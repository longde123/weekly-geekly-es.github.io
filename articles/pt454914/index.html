<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üàÅ üîÄ üòô N√≥s usamos o Yii2. Estamos escrevendo outro CMS ou uma tentativa de acelerar significativamente o desenvolvimento com o m√≠nimo de sobrecarga üïü üê∂ üåÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quase todo desenvolvedor que trabalha com uma certa estrutura h√° muito tempo possui um conjunto de ferramentas pr√≥prias, o que permite acelerar o dese...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>N√≥s usamos o Yii2. Estamos escrevendo outro CMS ou uma tentativa de acelerar significativamente o desenvolvimento com o m√≠nimo de sobrecarga</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454914/">  Quase todo desenvolvedor que trabalha com uma certa estrutura h√° muito tempo possui um conjunto de ferramentas pr√≥prias, o que permite acelerar o desenvolvimento do site.  No entanto, muitas vezes, eles s√£o mal estruturados, n√£o possuem documenta√ß√£o e s√£o finalizados no "processo" de produ√ß√£o. <br><br>  A id√©ia do projeto yicms era coletar todos os desenvolvimentos para a estrutura Yii2, que pareciam convenientes em um determinado sistema, na linha de frente dos quais deveria ser colocada a facilidade de uso, a flexibilidade e a capacidade de acelerar significativamente o desenvolvimento de sites padr√£o com suas ferramentas.  Este projeto foi desenvolvido por mim para a "alma", mas no momento j√° est√° em beta. <br><a name="habracut"></a><br>  A ess√™ncia do yicms est√° em algum lugar no meio entre os recursos da estrutura e os recursos usuais do CMS.  Este n√£o √© o CMS no sentido usual da palavra, mas apenas um conjunto de m√≥dulos que podem acelerar significativamente o desenvolvimento do site usando suas pr√≥prias ferramentas, al√©m de ter acesso completo aos recursos da estrutura.  Os principais recursos incorporados no yicms s√£o o painel de administra√ß√£o gerado em tempo real e as classes com anota√ß√£o autom√°tica que permitem usar o preenchimento autom√°tico do IDE e ter uma interface intuitiva. <br><br><h3>  Instala√ß√£o e configura√ß√£o </h3><br>  Ent√£o, vamos come√ßar com o yicms instalando-o.  Para namoro, a maneira mais f√°cil √© usar o Open Server ou qualquer outra plataforma de servidor semelhante.  Como o yicms tem uma forte depend√™ncia do Yii, vamos instal√°-lo primeiro.  Para simplificar, usaremos o modelo b√°sico: <br><br> <code>composer create-project --prefer-dist yiisoft/yii2-app-basic basic</code> <br> <br>  Depois que o compositer instala a estrutura, inclua a se√ß√£o require do arquivo composer.json nos quatro m√≥dulos yicms e execute a atualiza√ß√£o do compositor. <br><br><pre> <code class="json hljs"> <span class="hljs-string"><span class="hljs-string">"require"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"php"</span></span>: <span class="hljs-string"><span class="hljs-string">"&gt;=5.4.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yiisoft/yii2"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.14"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yiisoft/yii2-bootstrap"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"yiisoft/yii2-swiftmailer"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.0.0 || ~2.1.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-common"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-pages"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-essences"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"iliich246/yii2-yicms-feedback"</span></span>: <span class="hljs-string"><span class="hljs-string">"dev-master"</span></span> },</code> </pre><br>  Cada m√≥dulo representa um conjunto de funcionalidades espec√≠ficas, que ser√£o consideradas no futuro.  Por enquanto, basta instalar todos eles. <br><br>  Em seguida, voc√™ precisa se lembrar de configurar o servidor.  No Open Server, usamos o Apache e configuramos .htaccess da seguinte maneira: <br><br>  Para o arquivo .htaccess raiz: <br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">Options</span></span></span></span> +FollowSymLinks IndexIgnore */* RewriteEngine <span class="hljs-literal"><span class="hljs-literal">on</span></span> RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span> !^/(web) RewriteRule ^assets/(.*)$ /web/assets/<span class="hljs-number"><span class="hljs-number">$1</span></span><span class="hljs-meta"><span class="hljs-meta"> [L] RewriteRule ^css/(.*)$ web/css/$1 [L] RewriteRule ^js/(.*)$ web/js/$1 [L] RewriteRule ^images/(.*)$ web/images/$1 [L] RewriteRule ^files/(.*)$ web/files/$1 [L] RewriteRule (.*) /web/$1 RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteRule . web/index.php</span></span></code> </pre><br>  Para o arquivo .htaccess no diret√≥rio da web <br><br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_FILENAME}</span></span> !-f RewriteCond <span class="hljs-variable"><span class="hljs-variable">%{REQUEST_FILENAME}</span></span> !-d RewriteRule . index.php</code> </pre><br>  A pr√≥xima etapa √© rolar a migra√ß√£o de cada m√≥dulo yicms no banco de dados.  No console, executamos sequencialmente os seguintes comandos: <br><br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-common/Migrations</code> <br> <br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-pages/Migrations</code> <br> <br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-essences/Migrations</code> <br> <br> <code>yii migrate/up --migrationPath=@vendor/iliich246/yii2-yicms-feedback/Migrations</code> <br> <br>  Agora vamos come√ßar a configura√ß√£o no arquivo config / web.php. <br><br>  A se√ß√£o de m√≥dulos est√° configurada da seguinte maneira: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'modules'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'common'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsCommon\CommonModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'pages'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsPages\PagesModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'essences'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsEssences\EssencesModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'feedback'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsFeedback\FeedbackModule'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'redactor'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'yii\redactor\RedactorModule'</span></span>, ],</code> </pre><br>  A se√ß√£o de inicializa√ß√£o √© configurada da seguinte maneira: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'bootstrap'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'log'</span></span>, <span class="hljs-string"><span class="hljs-string">'common'</span></span>, <span class="hljs-string"><span class="hljs-string">'pages'</span></span>, <span class="hljs-string"><span class="hljs-string">'essences'</span></span>, <span class="hljs-string"><span class="hljs-string">'feedback'</span></span>],</code> </pre> <br>  A se√ß√£o do usu√°rio est√° configurada da seguinte maneira: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'user'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'identityClass'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'Iliich246\YicmsCommon\Base\CommonUser'</span></span>, <span class="hljs-string"><span class="hljs-string">'enableAutoLogin'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, ],</code> </pre><br>  Remova a se√ß√£o de coment√°rios urlManager: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'urlManager'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'enablePrettyUrl'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'showScriptName'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, <span class="hljs-string"><span class="hljs-string">'rules'</span></span> =&gt; [ ], ],</code> </pre><br>  A estrutura Yii2 e o sistema yicms foram configurados com sucesso. <br><br>  Ap√≥s a primeira inicializa√ß√£o, se tudo tiver sido configurado corretamente, o diret√≥rio yicms dever√° ser criado no diret√≥rio raiz do projeto, que conter√° os arquivos dispon√≠veis para altera√ß√µes do usu√°rio e as classes com anota√ß√£o autom√°tica tamb√©m ser√£o criadas nele. <br><br><img src="https://habrastorage.org/webt/ws/zc/n6/wszcn6cnsn9mjmguj_cq5mwkt8k.jpeg"><br><br><h3>  Descri√ß√£o dos m√≥dulos Common e Pages </h3><br>  O sistema yicms consiste em duas se√ß√µes.  Se√ß√£o Dev, que deve estar acess√≠vel apenas ao desenvolvedor (o c√≥digo pode estar quebrado nele) e a se√ß√£o Admin deve estar acess√≠vel ao administrador do site (o gerenciamento de conte√∫do √© realizado nele).  Para come√ßar, voc√™ precisa ir para a se√ß√£o Dev, para isso, use o seguinte URL: <br><br> <code>http://&lt;  &gt;/web/common/dev/login-as-dev?hash=123456&amp;asDev</code> <br> <br>  Depois disso, o painel Dev deve abrir: <br><br><img src="https://habrastorage.org/webt/hy/2m/zr/hy2mzrfv8ln9m2jtpk_xbnx4b1q.jpeg"><br><br>  Agora vamos come√ßar com a funcionalidade yicms.  Primeiro, no m√≥dulo P√°ginas, criaremos uma p√°gina chamada √≠ndice, que ser√° a p√°gina principal do site.  V√° para a lista de p√°ginas e crie uma nova p√°gina chamada √≠ndice.  Por padr√£o, os campos title, meta_description e meta_keywords ser√£o criados para a p√°gina.  Al√©m disso, criaremos outro campo atrav√©s do bot√£o Adicionar novo Campo com o nome do texto, deixaremos todos os seus par√¢metros por padr√£o. <br><br>  Agora, se voc√™ seguir o link <br><br> <code>http://&lt;  &gt;/web/pages/admin</code> <br> <br>  se√ß√£o admin ser√° aberta.  A p√°gina de √≠ndice estar√° dispon√≠vel para preencher com o conte√∫do.  Preencha todos os campos com texto livre. <br><br>  No momento da cria√ß√£o da se√ß√£o de √≠ndice na se√ß√£o dev da p√°gina de √≠ndice, a classe Index foi criada no diret√≥rio yicms / Pages / Models no qual tamb√©m foram criadas anota√ß√µes para os campos t√≠tulo, meta_description, meta_keywords, bem como para o campo de texto que criamos em tempo real.  Um objeto desta classe que podemos usar para obter o valor dos campos.  Considere como isso pode ser feito.  No controlador SiteController padr√£o do modelo b√°sico em actionIndex, escreva o seguinte: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Displays homepage. * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> \Iliich246\YicmsPages\Base\PagesException */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionIndex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $indexPage = \app\yicms\Pages\Models\Index::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'index'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'indexPage'</span></span> =&gt; $ indexPage ]); }</code> </pre><br>  Como a classe \ app \ yicms \ Pages \ Models \ Index foi gerada automaticamente, o preenchimento autom√°tico para isso funcionar√° no IDE.  Agora $ indexPage pode ser usado como um √≠ndice.  Agora abra a exibi√ß√£o do √≠ndice.  N√≥s removemos todos os desnecess√°rios de l√° e escrevemos: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $indexPage \app\yicms\Pages\Models\Index */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;title = $indexPage-&gt;title; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;registerMetaTag([ <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'description'</span></span>, <span class="hljs-string"><span class="hljs-string">'content'</span></span> =&gt; $indexPage-&gt;meta_description ]); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;registerMetaTag([ <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'keywords'</span></span>, <span class="hljs-string"><span class="hljs-string">'content'</span></span> =&gt; $indexPage-&gt;meta_keywords ]); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">site</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">index</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">jumbotron</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt;&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">"&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  A anota√ß√£o da vari√°vel $ indexPage √© necess√°ria para o preenchimento autom√°tico do IDE.  Agora use o objeto $ indexPage.  Todos os campos que criamos na se√ß√£o dev para a p√°gina de √≠ndice est√£o dispon√≠veis no objeto da classe Index, que, gra√ßas √† anota√ß√£o autom√°tica, √© complementada pelo IDE ap√≥s a inser√ß√£o do operador de seta. <br><br>  No total, em pouco tempo, criamos uma p√°gina de √≠ndice para a qual um painel de administrador foi criado automaticamente para editar seu conte√∫do.  Usamos a programa√ß√£o apenas para criar o objeto de p√°gina no controlador padr√£o da estrutura e na forma em que poder√≠amos usar rapidamente o objeto de p√°gina, gra√ßas ao preenchimento autom√°tico e uma interface intuitiva. <br><br>  Examinamos apenas a menor parte dos recursos yicms.  Agora vamos complicar a p√°gina principal do site usando um yicms um pouco. <br><br>  O yicms suporta o multilinguismo imediatamente.  Para ativar o segundo idioma na se√ß√£o dev do m√≥dulo comum, selecione a lista de idiomas, selecione o idioma russo e ative-o: <br><br><img src="https://habrastorage.org/webt/ka/eh/uw/kaehuwkq6y1qeubwmue9obzqtv4.jpeg"><br><br>  Agora, no painel de administra√ß√£o, podemos preencher os campos para v√°rios idiomas.  Voc√™ pode criar novos idiomas no sistema.  No entanto, ser√° necess√°rio traduzir o painel de administra√ß√£o usando ferramentas de estrutura regulares.  Portanto, ao criar um novo idioma, voc√™ deve aderir √† ISO.  Para controles de conte√∫do, uma nova placa com um novo idioma ser√° simplesmente adicionada. <br><br><h4>  Blocos de arquivos componentes </h4><br>  Em seguida, considere o elemento de blocos de arquivos.  No painel de desenvolvimento da p√°gina de √≠ndice, crie um bloco de arquivo com o documento com o nome do programa.  Outras configura√ß√µes de bloco ser√£o deixadas por padr√£o.  Agora, no painel do administrador, a edi√ß√£o da p√°gina de √≠ndice do arquivo de documento ficou dispon√≠vel.  Fa√ßa o download de um arquivo arbitr√°rio.  Agora, o link para o download pode ser exibido na p√°gina de √≠ndice do site: <br><br><pre> <code class="php hljs">‚Ä¶ &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Document</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">document</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">uploadUrl</span></span></span><span class="hljs-class">() ?&gt;"&gt; &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">document</span></span></span><span class="hljs-class"> ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; ‚Ä¶ &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Agora, na p√°gina, o link carregar√° o arquivo que carregamos no painel de administra√ß√£o.  Por padr√£o, o bloco de arquivos opera no modo de arquivo √∫nico em todos os idiomas.  No entanto, no painel de desenvolvimento, voc√™ pode alternar o tipo de idioma para o tipo traduz√≠vel e, em seguida, para cada idioma, ser√° necess√°rio fazer upload de seu pr√≥prio arquivo.  Nesse caso, o arquivo cujo idioma est√° atualmente ativo no site ser√° baixado atrav√©s do link.  Obviamente, voc√™ pode fazer o download para um idioma espec√≠fico, que ser√° discutido mais adiante. <br><br>  A pr√≥xima etapa no painel de desenvolvimento √© criar um bloco de arquivo de receitas para o qual especificaremos o tipo como v√°rios tipos.  Nesse modo, voc√™ pode fazer upload de muitos arquivos para um bloco de arquivos.  Para fazer isso, no painel do administrador, na guia receitas exibida, fa√ßa o upload de v√°rios arquivos arbitr√°rios. <br>  Depois disso, na forma de √≠ndice, listamos os arquivos: <br><br><pre> <code class="php hljs">‚Ä¶ &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Recipes</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class"> ($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipes</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipe</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">href</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipe</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">uploadUrl</span></span></span><span class="hljs-class">() ?&gt;"&gt; &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">recipe</span></span></span><span class="hljs-class"> ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; ‚Ä¶</span></span></code> </pre><br>  No modo de tipo m√∫ltiplo, um bloco de arquivo pode ser ignorado atrav√©s do foreach ou de um iterador. <br><br><h4>  Componente de bloco de imagens </h4><br>  Agora considere o elemento de bloco de imagens.  Crie um bloco de figuras para a p√°gina de √≠ndice, deixando todas as configura√ß√µes padr√£o.  Da mesma forma que os blocos de arquivos no painel de administra√ß√£o, tornou-se poss√≠vel fazer o upload de uma imagem.  Carregar uma imagem arbitr√°ria.  Agora, na forma de √≠ndice, escrevemos o seguinte: <br><br><pre> <code class="php hljs">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Image</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h3</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">picture</span></span></span><span class="hljs-class"> ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">=""&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Da mesma forma que os arquivos de imagem, um √© carregado por padr√£o em todos os idiomas; no entanto, para imagens, esse comportamento pode ser alterado no painel de desenvolvimento e carregar sua imagem para cada idioma.  Voc√™ tamb√©m pode enviar muitas imagens em um bloco. <br><br>  Crie um bloco de galeria de imagens no painel de desenvolvimento, cujo tipo ser√° definido como V√°rias imagens.  Para imagens, voc√™ tamb√©m pode pendurar os campos de texto rapidamente.  Portanto, na janela modal para definir o bloco da galeria, vamos para a se√ß√£o "Exibir campo do bloco de imagem".  Nesta se√ß√£o para imagens, crie campos com os nomes alt e nome.  Agora, no painel de administra√ß√£o de cada imagem, √© poss√≠vel definir os campos de texto alt e name.  Tamb√©m em yicms para imagens prontas para uso, est√° dispon√≠vel a capacidade de "cortar" e criar miniaturas.  Por exemplo, crie um modelo de miniatura para o bloco da galeria.  Na janela modal do bloco de imagens, v√° para a se√ß√£o "Configurar miniaturas de imagens".  Nele, criaremos um configurador de miniaturas com o nome ‚Äúx2‚Äù e os par√¢metros divider = 2 e quality = 80. Por nome, poderemos acessar a miniatura, o divisor determinar√° quanto reduzir o tamanho da imagem original, a qualidade determina a qualidade de compacta√ß√£o da miniatura.  Em seguida, crie outro modelo de miniatura com os par√¢metros: nome_do_programa = ‚Äúx5‚Äù, divisor = 5, qualidade = 50. Agora, quando carregarmos a imagem no painel de administra√ß√£o, duas miniaturas ser√£o criadas automaticamente para ela com os par√¢metros selecionados. <br><br>  Agora carregue algumas imagens no painel de administra√ß√£o do grupo de galerias.  Depois que a imagem √© criada e carregada, voc√™ pode preencher os campos alt e name, cujos modelos foram criados no painel de desenvolvimento.  Vamos ver como exibir tudo isso no site. <br><br><pre> <code class="php hljs">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">indexPage</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">gallery</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getImages</span></span></span><span class="hljs-class">() </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">col</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lg</span></span></span><span class="hljs-class">-4"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class"> ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">width</span></span></span><span class="hljs-class">="100%" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> ?&gt;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">outputThumbnail</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x2</span></span></span><span class="hljs-class">') ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> ?&gt;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">img</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">src</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">outputThumbnail</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x5</span></span></span><span class="hljs-class">') ?&gt;" </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class">="&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">alt</span></span></span><span class="hljs-class"> ?&gt;"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">&gt;&lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">image</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Aqui, o m√©todo getImages () retorna uma matriz de objetos do aplicativo de classe com anota√ß√£o autom√°tica \ yicms \ Pages \ Models \ Index \ Images \ GalleryImage na qual as anota√ß√µes foram criadas para os campos alt e name que criamos em tempo real e o preenchimento autom√°tico do IDE est√° dispon√≠vel para eles.  Al√©m disso, chamando o m√©todo outputThumbnail (&lt;Nome do modelo em miniatura&gt;) no objeto, alternamos o objeto para o modo de sa√≠da em miniatura. <br><br>  Para blocos de imagens, √© poss√≠vel criar n√£o apenas campos, mas tamb√©m condi√ß√µes, as quais consideraremos um pouco mais adiante.  Campos e condi√ß√µes tamb√©m podem ser criados para blocos de arquivos.  Funciona com um princ√≠pio semelhante. <br><br><h4>  Condi√ß√µes dos componentes </h4><br>  Agora considere o pr√≥ximo elemento.  Estas s√£o condi√ß√µes.  As condi√ß√µes s√£o convenientes para a cria√ß√£o nas listas, caixas de sele√ß√£o do painel do administrador etc.  O que determinar√° determinado comportamento ao trabalhar com p√°ginas.  Vejamos um exemplo.  Crie uma condi√ß√£o chamada segundo plano no painel de desenvolvimento na p√°gina de √≠ndice.  Digite selecione "selecione o tipo suspenso".  Depois de criar a condi√ß√£o, iremos para a se√ß√£o "Op√ß√µes da condi√ß√£o de configura√ß√£o".  Crie tr√™s valores de condi√ß√£o com os valores transparente, vermelho e verde. <br><br>  Depois disso, uma condi√ß√£o com uma lista suspensa com os valores TRANSPARENTE, VERMELHO e VERDE aparecer√° no painel de administra√ß√£o da p√°gina de √≠ndice.  Eles s√£o convertidos para mai√∫sculas, porque na classe anotada automaticamente criada eles s√£o representados como constantes. <br><br>  Agora vamos tentar usar a condi√ß√£o criada.  N√≥s o usamos de uma maneira um pouco diferente para mostrar outras possibilidades.  Como a p√°gina de √≠ndice √© a p√°gina principal do site, ser√° semanticamente verdadeiro alterar a cor de plano de fundo do site em suas configura√ß√µes.  Portanto, nossa condi√ß√£o ser√° alterar a cor do plano de fundo em todo o site, para inseri-la no layout do controlador.  Abra o arquivo de modelo de layout da estrutura b√°sica do Yii2 e crie um objeto Index: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/* </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this \yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/* </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $content string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">widgets</span></span>\<span class="hljs-title"><span class="hljs-title">Alert</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">helpers</span></span>\<span class="hljs-title"><span class="hljs-title">Html</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">bootstrap</span></span>\<span class="hljs-title"><span class="hljs-title">Nav</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">bootstrap</span></span>\<span class="hljs-title"><span class="hljs-title">NavBar</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">widgets</span></span>\<span class="hljs-title"><span class="hljs-title">Breadcrumbs</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">assets</span></span>\<span class="hljs-title"><span class="hljs-title">AppAsset</span></span>; AppAsset::register(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); $pagesIndex = \app\yicms\Pages\Models\Index::getInstance(); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginPage() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;!DOCTYPE html&gt; &lt;html lang=<span class="hljs-string"><span class="hljs-string">"&lt;?= Yii::$app-&gt;language ?&gt;"</span></span>&gt; &lt;head&gt; &lt;meta charset=<span class="hljs-string"><span class="hljs-string">"&lt;?= Yii::$app-&gt;charset ?&gt;"</span></span>&gt; &lt;meta http-equiv=<span class="hljs-string"><span class="hljs-string">"X-UA-Compatible"</span></span> content=<span class="hljs-string"><span class="hljs-string">"IE=edge"</span></span>&gt; &lt;meta name=<span class="hljs-string"><span class="hljs-string">"viewport"</span></span> content=<span class="hljs-string"><span class="hljs-string">"width=device-width, initial-scale=1"</span></span>&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;registerCsrfMetaTags() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;title&gt;<span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= Html::encode(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;title) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/title&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;head() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;/head&gt; &lt;body&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginBody() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> ‚Ä¶</code> </pre><br>  Como o objeto da classe Index √© algo como um singleton, podemos chamar o m√©todo est√°tico getInstance () o quanto quisermos, sem o risco de fazer consultas duplicadas extras ao banco de dados e outras despesas gerais ao cri√°-lo.  Agora, usando o objeto $ pagesIndex, alteraremos a tag adicionando um estilo embutido: <br><br><pre> <code class="php hljs">&lt;body style=<span class="hljs-string"><span class="hljs-string">"background-color: &lt;?php if ($pagesIndex-&gt;background-&gt;value() == \app\yicms\Pages\Models\Index\Conditions\Background::TRANSPARENT):?&gt; transparent; &lt;?php elseif ($pagesIndex-&gt;background-&gt;value() == \app\yicms\Pages\Models\Index\Conditions\Background::RED):?&gt; #FFD3D3 &lt;?php else: ?&gt; #BBFFC8 &lt;?php endif; ?&gt; "</span></span>&gt;</code> </pre><br>  Chamando $ pagesIndex-&gt; ‚Äã‚Äãbackground-&gt; value () e comparando com a constante que foi criada na classe anotada automaticamente \ app \ yicms \ Pages \ Models \ Index \ Conditions \ Background, selecionamos a cor de fundo do site. <br><br>  Em seguida, considere os recursos das classes anotadas automaticamente.  Enquanto o yicms est√° em execu√ß√£o, muitos eventos acontecem que podem ser tratados pela estrutura do Yii.  N√≥s damos um exemplo. <br><br><pre> <code class="php hljs">app\yicms\Pages\Models\Index\Fields\Text</code> </pre> <br>  Este arquivo foi criado por um anotador autom√°tico quando criamos o campo de texto para a p√°gina de √≠ndice no painel de desenvolvimento.  Quando escrevemos &lt;? = $ IndexPage-&gt; text?&gt; No modelo, √© criado algo semelhante ao singleton dessa classe espec√≠fica, que no modelo √© convertido em uma string usando a m√°gica __toString (). <br><br>  Para alterar o conte√∫do, assinamos o evento e o processamos atrav√©s da fun√ß√£o de retorno de chamada: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Text</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Field</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;on(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::EVENT_BEFORE_OUTPUT, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $event \Iliich246\YicmsCommon\Base\HookEvent */</span></span> }); } }</code> </pre><br>  O evento EVENT_BEFORE_OUTPUT ocorre antes que o conte√∫do do campo seja exibido.  Vamos tentar mudar isso.  Para fazer isso, usamos o objeto de evento \ Iliich246 \ YicmsCommon \ Base \ HookEvent: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;on(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::EVENT_BEFORE_OUTPUT, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $event \Iliich246\YicmsCommon\Base\HookEvent */</span></span> $value = $event-&gt;getHook(); $value = strrev($value); $event-&gt;setHook($value); });</code> </pre><br>  O evento HookEvent obt√©m o valor do campo antes que o evento seja disparado.  No evento, voc√™ pode obter esse valor atrav√©s de $ event-&gt; getHook (), alter√°-lo e envi√°-lo de volta ao objeto atrav√©s do evento usando $ event-&gt; setHook ($ value).  Assim, no caso, viramos o texto que o campo Texto exibe para tr√°s. <br><br>  Quase todas as classes alugadas automaticamente t√™m v√°rios eventos que podem ser conectados de maneira semelhante, mas sua considera√ß√£o est√° al√©m do escopo do artigo de apura√ß√£o de fatos. <br><br>  No total, neste artigo, examinamos dois m√≥dulos yicms, os m√≥dulos Comum e P√°ginas.  O m√≥dulo Comum inclui componentes como Campos, Blocos de arquivos, Blocos de imagens e Condi√ß√µes.  O m√≥dulo P√°ginas √© respons√°vel por criar objetos de p√°gina que cont√™m todos os elementos do m√≥dulo Comum.  I.e.  todos os m√≥dulos yicms dependem do m√≥dulo comum principal. <br><br><h3>  M√≥dulo Yii2-yicms-essences </h3><br>  Agora vamos nos familiarizar com o m√≥dulo Essences.  Este m√≥dulo foi projetado para criar entidades do tipo categoria-&gt; entidade, por exemplo, a categoria de mercadorias-&gt; mercadorias, tipo de ve√≠culo (carros, motocicleta) -&gt; ve√≠culo espec√≠fico etc.  Dentro do m√≥dulo, esses elementos s√£o chamados de categorias e representa√ß√µes. <br><br>  Como exemplo, mostramos a cria√ß√£o de um cat√°logo simples da categoria-&gt; tipo de produto para uma loja online. <br><br>  Na se√ß√£o Dev do m√≥dulo Essences, v√° para a lista de ess√™ncias e l√° vamos para a se√ß√£o create new essence.  Fornecemos o nome do programa produtos e deixamos o restante das configura√ß√µes por padr√£o.  Por padr√£o, uma entidade com comportamento √© criada: uma visualiza√ß√£o pode pertencer a uma categoria.  No entanto, voc√™ pode especificar outros comportamentos: basta criar visualiza√ß√µes sem categorias ou uma visualiza√ß√£o pode pertencer a v√°rias categorias. <br><br>  As pr√≥prias categorias s√£o constru√≠das com base no princ√≠pio de uma √°rvore, quando qualquer categoria tem um pai (exceto o primeiro).  I.e.  categorias s√£o folhas de uma estrutura de dados do tipo √°rvore. <br><br>  Total de produtos da entidade criados.  Para ela, as classes anotadas automaticamente foram criadas no diret√≥rio app \ yicms \ Essences \ Models.  Em seguida, no painel de desenvolvimento, precisamos criar modelos de classe e modelos de apresenta√ß√£o.  Tudo isso √© semelhante ao modo como os criamos para a p√°gina de √≠ndice.  Os elementos Campos, Blocos de arquivos, Blocos de imagens e Condi√ß√µes est√£o dispon√≠veis para eles no modo de cria√ß√£o instant√¢nea.  Depois de terminar de criar modelos no painel de administra√ß√£o, ele fica dispon√≠vel para criar categorias e visualiza√ß√µes com os elementos de modelo que definimos no painel de desenvolvimento. <br><br>  Ent√£o, criaremos v√°rias categorias de mercadorias.  E para cada categoria de produtos, existem v√°rios produtos.  Uma vez feito isso, a coisa toda pode ser exibida no site principal.  Considere como isso √© feito.  No SiteController, crie uma a√ß√£o actionProcuts: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionProducts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $productsEssence = Products::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'products'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'productsEssence'</span></span> =&gt; $productsEssence ]); }</code> </pre><br>  Crie uma visualiza√ß√£o de produtos para ele <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $productsEssence \app\yicms\Essences\Models\Products */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">content</span></span></span><span class="hljs-class">"&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">productsEssence</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">categories</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">category</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt;: &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">category</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h1</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">foreach</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">category</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">represents</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">as</span></span></span><span class="hljs-class"> $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">product</span></span></span><span class="hljs-class">): ?&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h2</span></span></span><span class="hljs-class">&gt;: &lt;?= $</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">product</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class"> ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">h2</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endforeach</span></span></span><span class="hljs-class">; ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre><br>  Gra√ßas ao mecanismo de anota√ß√£o autom√°tica, o m√©todo $ productsEssence-&gt; categories retorna uma matriz de objetos do aplicativo de classe com anota√ß√£o autom√°tica \ yicms \ Essences \ Models \ ProductsCategory.  Como nas classes anotadas automaticamente anteriormente nesta classe, h√° anota√ß√µes nos campos que criamos em tempo real, o IDE poder√° usar o preenchimento autom√°tico.  Tamb√©m √© importante notar que as classes com anota√ß√£o autom√°tica foram desenvolvidas com a ideia de que o usu√°rio yicms poder√° colocar sua pr√≥pria l√≥gica de neg√≥cios nelas, ou seja,  voc√™ pode escrever seu pr√≥prio c√≥digo neles e o mecanismo de anota√ß√£o autom√°tica altera √°reas especialmente marcadas e nenhum c√≥digo de usu√°rio ser√° afetado. <br><br>  O m√©todo $ category-&gt; representa tamb√©m retorna uma matriz de objetos app \ yicms \ Essences \ Models \ ProductsRepresents que possuem todas as mesmas vantagens da anota√ß√£o autom√°tica que as categorias.  Obviamente, existem m√©todos mais flex√≠veis para obter id√©ias.  Por exemplo, $ category-&gt; getRepresentsQuery () retornar√° um objeto ActiveQuery da estrutura Yii2, que pode ser personalizado ainda mais para refinar a consulta ao banco de dados, usada para criar pagina√ß√£o ou carregamento lento. <br><br>  No total, o m√≥dulo Essenses permite criar rapidamente um esqueleto da funcionalidade da loja, com o painel de administra√ß√£o j√° funcionando.  L√≥gica comercial adicional pode ser gravada em classes anotadas automaticamente. <br><br><h3>  M√≥dulo Yii2-yicms-feedback </h3><br>  Este m√≥dulo destina-se √† constru√ß√£o de formul√°rios de entrada de informa√ß√µes no site pelos visitantes e usu√°rios do site.  A ideologia do trabalho permanece a mesma. Primeiro, no painel de desenvolvimento, digitamos os campos necess√°rios para o formul√°rio. <br><br>  Considere a opera√ß√£o do m√≥dulo como um exemplo.  Crie um registro com as mensagens de nome do programa no painel de desenvolvimento no m√≥dulo de feedback.  Na p√°gina de configura√ß√µes de mensagens, podemos ver o bot√£o Modelos de p√°ginas de coment√°rios.  Usando esse link, podemos criar elementos do campo de tipo, bloco de arquivos, bloco de imagens, condi√ß√µes que podem ser usadas para estilizar o conte√∫do da p√°gina de mensagens.  Eles n√£o s√£o diferentes daqueles que consideramos para o m√≥dulo P√°ginas.  Agora, estamos mais interessados ‚Äã‚Äãna se√ß√£o Modelos de entrada de coment√°rios.  Nesta se√ß√£o, podemos criar entidades como campos de entrada, arquivos de entrada, imagens de entrada e condi√ß√µes de entrada.  Essas entidades s√£o exatamente o que voc√™ precisa para criar formul√°rios de entrada personalizados. <br><br>  Crie dois campos de entrada com os nomes nome e sobrenome.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagem de entrada chamada foto. </font><font style="vertical-align: inherit;">Condi√ß√£o de entrada chamada contrato. </font><font style="vertical-align: inherit;">Por enquanto, vamos deixar todas as configura√ß√µes para essas entidades como padr√£o. </font><font style="vertical-align: inherit;">Posteriormente neste exemplo, configuraremos validadores que tamb√©m est√£o suspensos nessas entidades em tempo real (os validadores tamb√©m est√£o dispon√≠veis para entidades do m√≥dulo Common e funcionam de acordo com a mesma l√≥gica do m√≥dulo de feedback. Discutiremos um pouco mais adiante). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora aplique o m√≥dulo em nosso site. </font><font style="vertical-align: inherit;">Primeiro, crie uma nova a√ß√£o no SiteController:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $messages = \app\yicms\Feedback\Models\Messages::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'messages'</span></span> =&gt; $messages ]); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Em seguida, crie uma exibi√ß√£o de mensagem e escreva o seguinte: </font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this yii\web\View */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $message \app\yicms\Feedback\Models\Messages */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $form = \yii\bootstrap\ActiveForm::begin([ <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'some-form'</span></span>, <span class="hljs-string"><span class="hljs-string">'options'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'data-pjax'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, ], ]); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">row</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">col</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xs</span></span></span><span class="hljs-class">-12"&gt; &lt;?= \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">helpers</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Html</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">submitButton</span></span></span><span class="hljs-class">('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Save</span></span></span><span class="hljs-class">', ['</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">' =&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">btn</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">btn</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">success</span></span></span><span class="hljs-class">']) ?&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bootstrap</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveForm</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class">(); ?&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para criar o formul√°rio, usaremos as ferramentas padr√£o da estrutura. </font><font style="vertical-align: inherit;">Para aproveitar o m√≥dulo de feedback, escreveremos o seguinte:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_name-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_name, $messages-&gt;input_name-&gt;key) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_surname-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_surname, $messages-&gt;input_surname-&gt;key) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_photo-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_photo, $messages-&gt;input_photo-&gt;key) -&gt;fileInput() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;input_agreement-&gt;isActive): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $form-&gt;field($messages-&gt;input_agreement, $messages-&gt;input_agreement-&gt;key)-&gt;checkbox() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span>; <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para entidades do tipo input, voc√™ deve usar o prefixo input_, caso contr√°rio, as anota√ß√µes autom√°ticas funcionam para elas da mesma maneira que para o restante das coisas no yicms. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No in√≠cio, h√° uma verifica√ß√£o da atividade do campo; se o campo estiver inativo, ele n√£o deve ser renderizado e, mesmo se for renderizado, os dados que foram preenchidos n√£o ser√£o carregados no servidor. A atividade de campo pode ser ativada / desativada no painel de desenvolvimento. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A seguir, √© a forma padr√£o da estrutura em que voc√™ precisa escrever assim</font></font><br><br><pre> <code class="php hljs">$form-&gt;field($messages-&gt;input_name, $messages-&gt;input_name-&gt;key)</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ messages-&gt; input_name retornar√° um objeto da classe app \ yicms \ Feedback \ Models \ Message \ InputFields \ Name, que √© o descendente da estrutura do Modelo Yii2 e pode ser usado nos formul√°rios, a chave $ messages-&gt; input_name-&gt; retornar√° o valor correto da chave, em ordem para que o formul√°rio possa ser carregado. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora, quando vamos para a p√°gina com o formul√°rio, todos os seus campos s√£o renderizados, mas o carregamento no servidor ainda n√£o funciona. √â muito f√°cil de fazer. Tentei tornar a interface de trabalho de feedback o mais semelhante poss√≠vel √† interface de trabalho do modelo na estrutura. Sim, eu tive que "sacrificar" um pouco de arquitetura, mas como um todo, ficou assim:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $messages = \app\yicms\Feedback\Models\Messages::getInstance(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($messages-&gt;load(Yii::$app-&gt;request-&gt;post()) &amp;&amp; $messages-&gt;validate()) { $messages-&gt;handle(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'messages'</span></span> =&gt; $messages ]); }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora, o formul√°rio ser√° carregado, validado e salvo no servidor. </font><font style="vertical-align: inherit;">Na se√ß√£o admin, podemos ver as informa√ß√µes inseridas no formul√°rio. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, voc√™ pode usar uma classe anotada automaticamente:</font></font><br><br> <code>\app\yicms\Feedback\Models\Messages</code> <br> <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Messages</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Feedback</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> self instance . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getInstance</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::getByName(<span class="hljs-string"><span class="hljs-string">'messages'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@inheritdoc</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;on(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::EVENT_AFTER_HANDLE, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($event)</span></span></span><span class="hljs-function"> </span></span>{ Yii::$app-&gt;mailer-&gt;compose(<span class="hljs-string"><span class="hljs-string">'message'</span></span>, [ <span class="hljs-string"><span class="hljs-string">'message'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span> ]) -&gt;setFrom(<span class="hljs-string"><span class="hljs-string">'from@domain.com'</span></span>) -&gt;setTo(<span class="hljs-string"><span class="hljs-string">'to@domain.com'</span></span>) -&gt;setSubject(<span class="hljs-string"><span class="hljs-string">'Message subject'</span></span>) -&gt;send(); }); } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neste exemplo, nos inscrevemos no evento EVENT_AFTER_HANDLE. </font><font style="vertical-align: inherit;">O evento ocorre depois que os dados do formul√°rio foram salvos no servidor. </font><font style="vertical-align: inherit;">Nesse caso, enviamos uma carta para o modelo do qual podemos inserir os dados salvos do formul√°rio:</font></font><br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $this \yii\web\View view component instance */</span></span> <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> $message \app\yicms\Feedback\Models\Message */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;h1&gt;Mail on message&lt;/h1&gt; &lt;h1&gt;Name: <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $message-&gt;input_name-&gt;value <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/h1&gt; &lt;h2&gt;Surname: <span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span>= $message-&gt;input_surname-&gt;value <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/h2&gt;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">$ message-&gt; input_name-&gt; value simplesmente retorna os dados atuais que foram armazenados no banco de dados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora vamos ver como os validadores funcionam. No painel de desenvolvimento na entidade do campo de entrada com o nome name, adicione o validador obrigat√≥rio. Este √© o validador de estrutura padr√£o yii \ validators \ RequiredValidator. Quando o adicionamos, ele ainda n√£o est√° ativo, porque o bot√£o com o nome est√° branco. Para ativ√°-lo, voc√™ precisa clicar neste bot√£o, a janela de configura√ß√µes do validador ser√° aberta. L√° voc√™ precisa instalar a caixa de sele√ß√£o e ativ√°-la. Ao mesmo tempo, voc√™ pode configurar todos os outros par√¢metros do validador, como mensagens de erro em todos os idiomas do sistema etc. Ap√≥s salvar, o √≠cone do validador fica verde, o que significa que ficou ativo e ser√° aplicado na valida√ß√£o de formul√°rios.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na condi√ß√£o de entrada com o contrato de nome, desligamos o validador de compara√ß√£o. </font><font style="vertical-align: inherit;">E configure-o para comparar com 1, digite n√∫mero e o operador ==. </font><font style="vertical-align: inherit;">Al√©m disso, voc√™ pode escrever uma mensagem nos campos de texto de erro, como "Voc√™ deve concordar com os termos da oferta". </font><font style="vertical-align: inherit;">Agora, no formul√°rio, a valida√ß√£o ocorrer√° somente quando a caixa de sele√ß√£o do contrato estiver marcada. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No total, neste artigo, examinamos as principais caracter√≠sticas do sistema yicms.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt454914/">https://habr.com/ru/post/pt454914/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt454898/index.html">Programar √© mais do que codificar</a></li>
<li><a href="../pt454900/index.html">Como tornar os formul√°rios da Web no site convenientes e seguros: ferramentas e construtores de desenvolvimento</a></li>
<li><a href="../pt454904/index.html">Samsung lan√ßa curso on-line gratuito de rede neural para vis√£o computacional</a></li>
<li><a href="../pt454906/index.html">Classifica√ß√£o de plataformas educacionais adicionais em TI: de acordo com os resultados do estudo My Circle</a></li>
<li><a href="../pt454912/index.html">Dwarf Fortress Tarn Adams fala sobre desenvolvimento de jogos</a></li>
<li><a href="../pt454916/index.html">Arquitetura de rede neural para implementar o algoritmo RL com a capacidade de definir a√ß√µes em execu√ß√£o simultaneamente</a></li>
<li><a href="../pt454918/index.html">Como combinar as costas de dois varejistas no SAP em 12 horas</a></li>
<li><a href="../pt454920/index.html">Desempenho do front end: analisando m√©tricas importantes</a></li>
<li><a href="../pt454924/index.html">Configura√ß√µes de autentica√ß√£o no Veeam Backup para Microsoft Office 365 v3</a></li>
<li><a href="../pt454928/index.html">Maneira de ignorar a tela de bloqueio do Windows em sess√µes RDP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>