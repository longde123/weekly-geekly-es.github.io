<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎅🏼 ☀️ 🤥 Integrasi Komputer-Teleponi dan Telepon Grandstream 🧗 🚥 😄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Semakin banyak komunikasi modern yang diintegrasikan ke dalam dunia di sekitar kita, dan telepon kantor tidak terkecuali. Grandstream memutuskan untuk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Integrasi Komputer-Teleponi dan Telepon Grandstream</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/arttel/blog/404241/"><div style="text-align:center;"><img src="https://habrastorage.org/web/448/945/4b8/4489454b8f9a42deb58a5fbf9e2b2f6c.png"></div><br><p> Semakin banyak komunikasi modern yang diintegrasikan ke dalam dunia di sekitar kita, dan telepon kantor tidak terkecuali.  Grandstream memutuskan untuk mengikuti dan menambahkan dukungan untuk antarmuka CTI (Computer-Telephony Integration) khusus untuk telepon mereka.  Awalnya, perangkat seri GXP21XX diperbarui, dan sedikit kemudian perangkat dari garis GXP16XX yang lebih muda, seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GXP1610</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GXP1620</a> , dll <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diperbarui</a> . <a name="habracut"></a></p><br><p>  Bahkan, "antarmuka CTI" dikatakan keras, pada kenyataannya - API REST kecil yang memungkinkan Anda untuk mengontrol ponsel Anda menggunakan permintaan HTTP sederhana.  Tampaknya: Anda dapat melakukan panggilan, melacak status jalur yang digunakan oleh telepon pada PBX, tetapi ketika menggunakan, misalnya, IP PBX berbasis cloud, ini tidak selalu memungkinkan.  Selain itu, CTI memungkinkan Anda untuk mengontrol speakerphone, volume speaker, mematikan mikrofon, dll., Yang tidak selalu memungkinkan di level PBX. </p><br><p>  Jadi apa yang bisa kita lakukan dengan CTI?  Secara umum, tidak terlalu banyak, kami hanya memiliki lima jenis permintaan yang tersedia: </p><br><table><thead><tr><th>  Minta </th><th>  Deskripsi </th></tr></thead><tbody><tr><td>  api-get_line_status </td><td>  Status Baris </td></tr><tr><td>  api-get_phone_status </td><td>  Status telepon </td></tr><tr><td>  api-send_key </td><td>  Menekan tombol (0-9, #, *, peka konteks, dll.) </td></tr><tr><td>  operasi api-phone_ </td><td>  Manipulasi paling sederhana dengan ponsel (menerima panggilan, mengatur ulang, dll.) </td></tr><tr><td>  operasi api-sys_ </td><td>  Memungkinkan Anda menyalakan ulang dan mengatur ulang perangkat ke pengaturan pabrik </td></tr></tbody></table><br><p>  Menggunakan ini sangat sederhana, kami membentuk permintaan formulir: </p><br><pre><code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"http://IP  /cgi-bin/api-get_line_status?passcode="</span></span> <span class="hljs-comment"><span class="hljs-comment">// (     )</span></span></code> </pre> <br><p>  Sebagai tanggapan, kami mendapatkan JSON dari formulir: </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"success"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"body"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"line"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"state"</span></span>: <span class="hljs-string"><span class="hljs-string">"idle"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"acct"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"active"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"remotename"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"remotenumber"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"line"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"state"</span></span>: <span class="hljs-string"><span class="hljs-string">"connected"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"acct"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"active"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"remotename"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"remotenumber"</span></span>: <span class="hljs-string"><span class="hljs-string">"203"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"line"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">"state"</span></span>: <span class="hljs-string"><span class="hljs-string">"idle"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"acct"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"active"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"remotename"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"remotenumber"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, ... { <span class="hljs-attr"><span class="hljs-attr">"line"</span></span>: <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-attr"><span class="hljs-attr">"state"</span></span>: <span class="hljs-string"><span class="hljs-string">"idle"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"acct"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"active"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">"remotename"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"remotenumber"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> } ] }</code> </pre> <br><p>  Mengganti <strong>api-get_line_status</strong> dengan <strong>api-get_phone_status</strong> dalam permintaan, kami mendapatkan informasi singkat di telepon: </p><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"response"</span></span>: <span class="hljs-string"><span class="hljs-string">"success"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"body"</span></span>: <span class="hljs-string"><span class="hljs-string">"busy"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"misc"</span></span>: <span class="hljs-string"><span class="hljs-string">"0"</span></span> }</code> </pre> <br><p>  Metode ini nyaman ketika kita hanya perlu menginterogasi status perangkat atau saluran telepon dan sangat tidak nyaman dalam kasus di mana kita ingin melacak perubahan yang sedang terjadi.  Panggilan masuk, kami akan mengambil nomor yang masuk dan menunjukkan pemberitahuan kepada pengguna, tetapi bagaimana cara melakukannya?  Kami tidak memiliki kesempatan untuk berlangganan acara apa pun, itu bukan keputusan yang baik untuk memalu telepon dua atau tiga kali per detik dengan permintaan status.  Sayangnya, dalam situasi ini, CTI bukan asisten. </p><br><p>  Kami melihat lebih jauh, <strong>api-send_key</strong> , sesuai namanya, melayani permintaan ini untuk mengirim penekanan tombol ke tombol telepon, Anda dapat mengirim satu per satu atau beberapa sekaligus.  Bahkan, penekanan tombol yang ditransfer dimulai pada interval sekitar satu detik, dan proses ini tidak dapat terganggu.  Pada saat yang sama, tombol-tombol pada telepon tidak diblokir dan mereka dapat ditekan secara bebas, sebagai akibatnya, telepon yang dapat dieksekusi berubah menjadi "kekacauan" yang tidak dapat dipahami. </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"http://192.168.4.118/cgi-bin/api-send_key?passcode=admin&amp;keys=LINE2:2:0:3:SEND"</span></span></code> </pre> <br><p>  Seperti yang Anda lihat, parameter <strong>tombol</strong> lain telah ditambahkan, menunjukkan tombol mana yang harus ditekan.  (Tabel dengan daftar semua tombol yang dapat ditekan secara virtual ada dalam dokumentasi CTI.) </p><br><p>  Hal pertama yang terlintas dalam pikiran: "Apakah tidak mungkin untuk menulis ekstensi untuk browser yang akan memungkinkan Anda untuk melakukan panggilan langsung dari itu?"  Pilihan paling sederhana tidak lama datang.  Karena saya memiliki browser Google Chrome utama, saya menulis untuk itu, hanya perlu dua file untuk membuat: </p><br><pre> <code class="hljs powershell">// manifest.json { <span class="hljs-string"><span class="hljs-string">"manifest_version"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"ArtDial"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"permissions"</span></span>: [<span class="hljs-string"><span class="hljs-string">"contextMenus"</span></span>], <span class="hljs-string"><span class="hljs-string">"background"</span></span>: { <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: [<span class="hljs-string"><span class="hljs-string">"background.js"</span></span>] } }</code> </pre> <br><pre> <code class="hljs pgsql">// background.js <span class="hljs-keyword"><span class="hljs-keyword">function</span></span> dial(selectedText) { var serviceCall = <span class="hljs-string"><span class="hljs-string">'http://192.168.4.118/cgi-bin/api-send_key?passcode=admin&amp;keys='</span></span>+ selectedText.replace(/[^\d]/g, <span class="hljs-string"><span class="hljs-string">''</span></span>).split(<span class="hljs-string"><span class="hljs-string">''</span></span>).<span class="hljs-keyword"><span class="hljs-keyword">join</span></span>(<span class="hljs-string"><span class="hljs-string">':'</span></span>) +<span class="hljs-string"><span class="hljs-string">':SEND'</span></span>; var xhr = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> XMLHttpRequest(); xhr.<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>("GET", serviceCall, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); xhr.send(); } chrome.contextMenus.<span class="hljs-keyword"><span class="hljs-keyword">create</span></span>({ title: ": %s", contexts: ["selection"], onclick: <span class="hljs-keyword"><span class="hljs-keyword">function</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>, tab) { dial(<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.selectionText); } });</code> </pre> <br><p>  Kami menempatkannya dalam satu folder, di halaman ekstensi kami mengaktifkan mode pengembang dan menghubungkan ekstensi kami. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/web/08f/0e1/769/08f0e1769db04533af6745467569033e.gif" width="70%"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/web/8cd/ee5/270/8cdee527026342be8b658edc22f42127.gif" width="70%"></div><br><p>  Untuk mengelola panggilan, permintaan operasi <strong>api-phone_</strong> disediakan, dengan itu kami dapat menerima atau menolak panggilan masuk (acceptcall / rejectcall), menunda, atau mengakhiri percakapan saat ini (holdcall / endcall).  Perintah <strong>pembatalan yang</strong> lebih universal juga tersedia, yang memungkinkan Anda untuk menolak dan mengakhiri panggilan.  Untuk mengirim, gunakan permintaan formulir: </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"http://192.168.4.118/cgi-bin/api-phone_operation?passcode=admin&amp;cmd=cancel"</span></span></code> </pre> <br><p>  Dan hal terakhir: <strong>operasi api-sys_</strong> , akan memungkinkan kita untuk me-restart telepon, atau meresetnya ke pengaturan pabrik (REBOOT dan RESET, masing-masing).  Kami menggunakan kueri formulir: </p><br><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"http://192.168.4.118/cgi-bin/api-sys_operation?passcode=admin&amp;request=REBOOT"</span></span></code> </pre> <br><p>  Hanya menggunakan Integrasi Komputer-Telephony tidak mungkin dapat membuat aplikasi beramai-ramai yang akan sepenuhnya berinteraksi dengan lingkungan Anda.  Tetapi sebagai alat tambahan yang digunakan bersama dengan API lain (URL tindakan di ponsel atau AMI di Asterisk), CTI memiliki hak untuk ada. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id404241/">https://habr.com/ru/post/id404241/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id404231/index.html">Intel Core i9 - prosesor baru dimulai dengan huruf i</a></li>
<li><a href="../id404233/index.html">Pengujian robomobiles diusulkan untuk mempercepat statistik</a></li>
<li><a href="../id404235/index.html">Ketika pasien adalah sumber pendapatan: masalah dengan obat-obatan untuk penyakit langka</a></li>
<li><a href="../id404237/index.html">Beralih ke HTTPS membantu Wikipedia menentang sensor negara</a></li>
<li><a href="../id404239/index.html">Gelombang gravitasi terdaftar untuk ketiga kalinya: apa yang bisa kita pelajari tentang Semesta?</a></li>
<li><a href="../id404243/index.html">Dapur bagian dalam Polybius: tiga blockchain untuk semua kesempatan</a></li>
<li><a href="../id404245/index.html">Jaringan saraf menghasilkan kode GUI dari screenshot</a></li>
<li><a href="../id404247/index.html">Mengapa System Shock Penting</a></li>
<li><a href="../id404249/index.html">India meluncurkan satelit, menyatukan tetangganya di Asia Selatan</a></li>
<li><a href="../id404255/index.html">Laporan pertemuan pertama klub penggemar Meizu di Ukraina: lautan hiburan, smartphone, dan positif</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>