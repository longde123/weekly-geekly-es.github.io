<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüè´ ü¶Ä üê• LED mince faite maison üëºüèΩ ‚öîÔ∏è ‚ò¶Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pourquoi est-il n√©cessaire 


 R√©cemment, j'ai √©crit un article sur un ordinateur de v√©lo Bluetooth fait maison. Il y a eu une discussion anim√©e. L'un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LED mince faite maison</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408807/"><h1>  Pourquoi est-il n√©cessaire </h1><br><p>  R√©cemment, j'ai √©crit un article sur un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ordinateur de v√©lo Bluetooth</a> fait maison.  Il y a eu une discussion anim√©e.  L'une des suggestions de modernisation √©tait l'id√©e d'ajouter une indication ou un √©cran LCD.  J'ai aim√© l'id√©e.  Et j'ai d√©cid√© de r√©fl√©chir √† la fa√ßon de lui donner vie. </p><br><p>  √âtant donn√© que les ordinateurs de v√©lo avaient d√©j√† √©t√© fabriqu√©s, le bo√Ætier √©tait presque enti√®rement occup√©, l'option avec un √©cran LCD est tomb√©e.  Nous avions besoin d'une taille de 40x30 mm, en tenant compte de tous les c√¢bles et fils, et en √©paisseur pas plus de 2-3 mm.  Il y a aussi peu de conclusions gratuites.  Divers indicateurs LED (trois chiffres, √©chelle) ne convenaient pas.  Puis une tr√®s bonne id√©e m'est venue √† l'esprit - faire un indicateur fait maison √† partir de LED SMD.  Prenez une fine textolite unilat√©rale, placez dessus le bon nombre de LED, dans le bon ordre et vous obtenez un excellent indicateur.  Ayant imagin√© que les fils devraient √™tre conduits √† toutes les LED, j'ai d√©cid√© qu'un microcontr√¥leur bon march√© qui contr√¥lerait toutes les LED lui-m√™me s'adapterait √† la carte, et le MK principal de l'ordinateur de v√©lo contr√¥lerait l'indicateur via un seul fil. </p><br><p>  Le r√©sultat est un indicateur tr√®s compact (seulement 3 mm d'√©paisseur).  Gestion sur un fil, et 2 de plus sur la nourriture.  Si vous avez des appareils pr√™ts √† l'emploi ou si vous pr√©voyez d'en fabriquer un et que vous avez besoin d'un indicateur, un indicateur fait maison est la meilleure option.  Voyons de plus pr√®s comment cela fonctionne. </p><a name="habracut"></a><br><h1>  20 LED sur 10 broches - facile! </h1><br><p>  MK J'ai choisi le plus cher - SMT8S003, le m√™me que dans le compteur de v√©lo.  Il n'a que 20 jambes.  Si vous supprimez les jambes du pouvoir et du contr√¥le, il reste 14 jambes.  La premi√®re t√¢che qui devait √™tre r√©solue √©tait de contr√¥ler ces jambes avec autant de LED que possible. </p><br><p>  Il m'est imm√©diatement venu √† l'esprit que 2 LED pouvaient √™tre accroch√©es sur une jambe, avec une broche sur GND et l'autre sur VDD.  Pour chaque LED, une r√©sistance.  Selon ce sch√©ma. </p><br><p><img src="https://habrastorage.org/webt/vc/c-/id/vcc-idtntq-9zcgj2_g-tl7-awe.jpeg"><br clear="left"><br>  C'est facile √† g√©rer.  Nous alimentons la broche 0, une LED est allum√©e, alimentation 1 - la deuxi√®me LED est allum√©e.  Nous traduisons dans le troisi√®me √©tat (entr√©e), pas un ne br√ªle.  Il se r√©v√®le sur 14 conclusions que vous pouvez accrocher 28 LED.  Pas mal. </p><br><p>  Le fils a dessin√© l'indicateur lui-m√™me.  Pour un ordinateur de v√©lo, le type d'indicateur le plus utile, apr√®s les chiffres, est une √©chelle.  L'indicateur se compose de 2 √©chelles de 8 LED et de 4 LED d'√©tat diff√©rentes.  Total 20 LED.  J'ai rapidement esquiss√© la carte, grav√©, soud√© et commenc√© les tests. </p><br><p>  J'allume le MK, toutes les conclusions sont dans le troisi√®me √©tat, rien ne devrait br√ªler.  Et ... les LED sont allum√©es.  Bien s√ªr, ils ont suffisamment de tension de 5 volts pour briller faiblement.  √áa ne marchera pas, on change le sch√©ma ... </p><br><h2>  Plus de LED </h2><br><p>  Apr√®s une petite r√©flexion, une autre id√©e est venue.  Connectez les LED non pas √† l'alimentation et √† la terre, mais √† deux autres conclusions du MK.  Ensuite, vous pouvez d√©finitivement tout d√©sactiver.  Nous essayons, cela fonctionne tr√®s bien.  En raison de l'indication dynamique, tout clignote magnifiquement.  Vous pouvez contr√¥ler chaque LED. </p><br><p>  En cons√©quence, le sch√©ma suivant s'est av√©r√© pour l'avenir: </p><br><p><img src="https://habrastorage.org/webt/kd/5c/fc/kd5cfcy9pbstuw4l02doacdbzle.jpeg"><br clear="left">  On distingue plusieurs conclusions de contr√¥le et travailleurs.  Nous mettons les r√©sistances uniquement sur la commande upr1 upr2.  Ainsi, le circuit et la trace de la carte sont grandement simplifi√©s.  Jusqu'√† 96 LED peuvent √™tre plac√©es sur 14 broches.  6 gestionnaires et 8 travailleurs, plus 2 LED sur chacun.  Plus que suffisant, le bras de soudure se fatiguera. </p><br><p>  Il s'est av√©r√© que vous pouvez faire plus.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Charlie</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Allen</a> est all√© encore plus loin en pla√ßant plusieurs LED entre les broches de contr√¥le.  Ainsi, jusqu'√† 16 * 15 LED peuvent √™tre plac√©es sur 16 broches.  Mais, dans son circuit, de nombreuses r√©sistances sont ajout√©es, et il faut aussi que toutes les LED soient de la m√™me couleur, en g√©n√©ral il y a de petits probl√®mes.  Conclusion - 96 LED sont plus que suffisantes. </p><br><h1>  Nous contr√¥lons chaque LED individuellement </h1><br><p>  Pour contr√¥ler chaque LED, la m√©thode d'indication dynamique est utilis√©e.  √Ä un moment donn√©, une LED peut √™tre allum√©e par sortie de contr√¥le.  Ensuite, vous devez trier toutes les paires, ce sont les √©tats d'indication, etc. dans un cercle.  Puisque la carte a d√©j√† √©t√© faite, je l'ai refaite en une broche de contr√¥le et une r√©sistance.  Il s'est av√©r√© 20 LED sur une sortie et 10 conclusions de travail.  Total 20 √âtats. </p><br><p><img src="https://habrastorage.org/webt/de/6p/yx/de6pyx1yu4lwcrrknzrnr-7o25m.jpeg"><br clear="left"></p><br><p>  Pour r√©duire la consommation d'√©nergie, MK fonctionne √† une fr√©quence de 2 MHz.  Pour trier 20 √©tats avec une fr√©quence d'au moins 50 Hz, vous avez besoin d'une minuterie avec une fr√©quence de 1000 Hz.  De plus, je voulais √©galement contr√¥ler la luminosit√©.  Mais il s'av√®re que pour l'abaisser d'un facteur 10, vous avez besoin d'une fr√©quence de minuterie de 10 000 Hz et de 100 fois les 100 000 Hz.  Dans ce cas, dans le gestionnaire d'interruption, vous devez trier toutes les options et allumer la LED souhait√©e.  En g√©n√©ral, MK ne pouvait pas faire face.  J'ai d√ª passer √† l'option avec modulation PWM. </p><br><h1>  Nous contr√¥lons la luminosit√© √† l'aide d'une minuterie PWM </h1><br><p>  Le r√©sultat est un programme simple.  Nous utilisons une minuterie - TIM2, avec possibilit√© de g√©n√©ration PWM.  Nous avons r√©gl√© la fr√©quence du minuteur sur 1000 Hz, et la valeur maximale du minuteur 125 est la largeur PWM, qui d√©terminera la gradation de la luminosit√©.  Par cons√©quent, vous pouvez d√©finir n'importe quelle valeur de luminosit√© de 0 √† 125. Au moment de la deuxi√®me interruption de la minuterie, par rapport au remplissage du PWM, √©teignez toutes les LED. </p><br><p>  Le r√©sultat est un excellent indicateur.  En raison du contr√¥le de la luminosit√©, la consommation dans la phase active est de 1 mA √† 4 mA. </p><br><h1>  Nous connectons un ordinateur de v√©lo </h1><br><p>  L'indicateur lui-m√™me est pr√™t, dans le cas du compteur de v√©lo, il ressemble √† ceci: </p><br><p><img src="https://habrastorage.org/webt/ra/si/ap/rasiapvq2nntvwyejmvpegpakym.jpeg"><br clear="left"><br>  Pour contr√¥ler l'indicateur, j'ai choisi le protocole 1 fil.  Je ne le d√©crirai pas.  Je peux seulement dire que j'ai d√ª me tourmenter pour r√©ussir √† g√©rer l'interruption et √† supporter les d√©lais n√©cessaires, mais finalement cela a fonctionn√©.  L'ordinateur de v√©lo est comme un ma√Ætre et l'indicateur est comme un esclave.  Pour le contr√¥le, 4 octets doivent √™tre transmis.  Le premier octet est la commande, la luminosit√© et un bit pour passer en mode veille, les 3 octets restants sont des LED, un peu par LED. </p><br><p>  La premi√®re chose qui m'est venue √† l'esprit sur l'indicateur √©tait la vitesse et le personnel.  Les LED de service doivent √™tre laiss√©es pour l'√©tat Bluetooth, la violation du contr√¥le de la vitesse et de la cadence, et un autre - le contr√¥le de la distance. </p><br><p>  Apr√®s les tests exp√©rimentaux, j'ai ajout√© la possibilit√© d'afficher la distance restante de l'ensemble ou les calories restantes de l'ensemble.  Cela s'est av√©r√© tr√®s pratique.  Vous fixez un plan - pour passer 2000 Cal en promenade, vous allez voir tout de suite, il reste encore la moiti√©.  Conclusion - une indication est une chose utile. </p><br><p>  Mon fils a vraiment aim√©, il a eu l'id√©e de faire un porte-cl√©s - un indicateur avec une batterie en √©poxy.  Je suis all√© r√©fl√©chir. </p><br><h1>  Quels autres indicateurs peuvent √™tre r√©alis√©s </h1><br><p>  Horloge - LED en deux cercles - heures et minutes. </p><br><p>  Points cardinaux - pour la boussole √©lectronique. </p><br><p>  √âchelle pour codeur rotatif incr√©mental. </p><br><p>  Plusieurs √©chelles dans un indicateur. </p><br><p>  Coeur pour une carte musicale. </p><br><p>  Matrice 8x8 pour l'affichage des images. </p><br><p>  Indicateur mince √† sept segments pour un chiffre de 11 LED. </p><br><p>  En g√©n√©ral, il existe de nombreuses id√©es sur la fa√ßon de l'utiliser. </p><br><p>  Sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github</a> , comme d'habitude, une carte, programme, impl√©mentation du protocole 1 fil et indication dynamique.  Celui qui en a besoin, vous pouvez l'utiliser dans vos projets. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr408807/">https://habr.com/ru/post/fr408807/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr408795/index.html">La recherche de la vie dans le syst√®me solaire</a></li>
<li><a href="../fr408797/index.html">Une br√®ve histoire de l'√©cran bleu de la mort</a></li>
<li><a href="../fr408799/index.html">La voiture √©lectrique √† la charge de l'essai Falcon Heavy de janvier √©tait une blague. Ou pas ...</a></li>
<li><a href="../fr408801/index.html">Arnaque dans le cloud: comment les escrocs essaient de se faire passer pour HashFlare et de vendre des services inexistants</a></li>
<li><a href="../fr408803/index.html">Musique couleur incroyablement spectaculaire sur Arduino et LED</a></li>
<li><a href="../fr408809/index.html">Mon Bitcoin Odyssey √† 200000 $</a></li>
<li><a href="../fr408811/index.html">La nouvelle imprimante 3D imprime 10 fois plus vite que les mod√®les existants</a></li>
<li><a href="../fr408815/index.html">Le commerce des contrats √† terme sur Bitcoin a commenc√©: cons√©quences et pr√©visions</a></li>
<li><a href="../fr408817/index.html">Qui sont les "vagabonds gris" de l'Australie</a></li>
<li><a href="../fr408819/index.html">8 millions de dollars pour Starfall. La startup ALE lancera la premi√®re pluie de m√©t√©ores artificielle au monde en 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>