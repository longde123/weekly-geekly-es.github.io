<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👝 🤴🏽 🕋 Como assumir o controle de sua infraestrutura de rede. Capítulo Um Retenção 👫 👰 🧗🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo é o primeiro de uma série de artigos intitulados "Como colocar a infraestrutura de rede sob seu controle". O conteúdo de todos os artigos ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como assumir o controle de sua infraestrutura de rede. Capítulo Um Retenção</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433614/">  <i>Este artigo é o primeiro de uma série de artigos intitulados "Como colocar a infraestrutura de rede sob seu controle".</i>  <i>O conteúdo de todos os artigos da série e os links podem ser encontrados <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a></i> . <br><br>  Admito plenamente que haja um número suficiente de empresas em que uma rede simples de uma hora ou até um dia não é crítica.  Infelizmente ou felizmente, não tive a oportunidade de trabalhar nesses lugares.  Mas, é claro, as redes são diferentes, os requisitos são diferentes, as abordagens são diferentes e, no entanto, de uma forma ou de outra, a lista abaixo será, em muitos casos, realmente "mast-do". <br><br>  Então, as condições iniciais. <br><br>  Você está em um novo local de trabalho ou tem uma promoção ou decide dar uma nova olhada em suas responsabilidades.  A rede da empresa é sua área de responsabilidade.  Para você, esse é, em grande parte, um desafio e um novo, que justifica o tom de orientação deste artigo :).  Mas espero que o artigo também possa ser útil para qualquer engenheiro de rede. <br><br>  Seu primeiro objetivo estratégico é aprender a resistir à entropia e manter o nível de serviço prestado. <br><br>  Muitas das tarefas descritas abaixo podem ser resolvidas por vários meios.  Eu intencionalmente não levanto o tópico da implementação técnica, como  em princípio, muitas vezes não é tão importante como você resolveu um problema específico, mas como você o usa e se é realmente importante.  É de pouca utilidade, por exemplo, no seu sistema de monitoramento desenvolvido profissionalmente, se você não olhar para lá e não responder a alertas. <br><a name="habracut"></a><br><h2>  Equipamento </h2><br>  Primeiro você precisa entender onde estão os maiores riscos. <br><br>  Novamente, poderia ser diferente.  Admito que em algum lugar, por exemplo, haverá problemas de segurança, e em algum lugar relacionado à continuidade do serviço, e em algum lugar, talvez, em outra coisa.  Porque não <br><br>  Suponhamos, com toda a certeza, que isso seja uma continuidade de serviço (esse foi o caso em todas as empresas em que trabalhei). <br><br>  Então você precisa começar com o equipamento.  Aqui está uma lista de tópicos a serem observados: <br><br><ul><li>  classificação de criticidade do equipamento </li><li>  redundância de equipamentos críticos </li><li>  suporte, licenças </li></ul><br>  Você deve considerar possíveis falhas, especialmente com equipamentos no topo da sua classificação de criticidade.  Geralmente, a probabilidade de problemas duplos é negligenciada; caso contrário, sua solução e suporte podem se tornar excessivamente caros, mas no caso de elementos de rede realmente críticos, cuja falha pode afetar significativamente os negócios, você deve pensar nisso. <br><br><blockquote>  <b>Exemplo</b> <br><br>  Suponha que estamos falando de um switch raiz em um data center. <br><br>  Como concordamos que a continuidade do serviço é o critério mais importante, é razoável fornecer uma "redundância" deste equipamento.  Mas isso não é tudo.  Você também deve decidir quanto tempo, no caso de uma interrupção do primeiro comutador, é aceitável que você viva com apenas um comutador restante, porque existe o risco de que ele se quebre. <br><br>  <b>Importante!</b>  <b>Você não precisa resolver esse problema sozinho.</b>  <b>Você deve descrever os riscos, as possíveis soluções e o valor para sua gerência ou gerência da empresa.</b>  <b>Eles devem tomar decisões.</b> <br><br>  Portanto, se foi decidido que, dada a pequena probabilidade de uma quebra dupla, trabalhar por 4 horas em um switch é, em princípio, aceitável, então você pode apenas ter o suporte adequado (para o qual o equipamento será substituído dentro de 4 horas). <br><br>  Mas existe o risco de que eles não sejam entregues.  Infelizmente, uma vez que nos encontramos em tal situação.  Em vez de quatro horas, o equipamento durou uma semana !!! <br><br>  Portanto, esse risco também precisa ser discutido e, talvez, seja mais correto comprar outro comutador (terceiro) e mantê-lo em peças de reposição (backup a frio) ou usá-lo para fins de laboratório. </blockquote><br>  <b>Importante!</b>  <b>Faça uma tabela de todos os suportes que você possui com as datas de término e adicione-os ao calendário para que, pelo menos um mês depois, receba uma carta informando que você deve começar a se preocupar em estender o suporte.</b> <br><br>  Você não será perdoado se esquecer de estender o suporte e, no dia seguinte ao término, seu equipamento irá falhar. <br><br><h2>  Trabalho de emergência </h2><br>  O que quer que aconteça na sua rede, idealmente, você deve manter o acesso ao seu equipamento de rede. <br><br>  <b>Importante!</b>  <b>Você deve ter acesso ao console de todos os equipamentos e esse acesso não deve depender da operabilidade da rede de transmissão de dados do usuário (dados).</b> <br><br>  Você também deve prever possíveis cenários negativos e documentar as ações necessárias.  A disponibilidade deste documento é crítica, portanto, ele não deve ser compartilhado apenas em um recurso compartilhado pelo departamento, mas também armazenado localmente em computadores de engenheiros. <br><br>  Deve haver <br><br><ul><li>  informações necessárias para abrir um aplicativo em suporte a um fornecedor ou integrador </li><li>  informações sobre como chegar a qualquer equipamento (console, gerenciamento) </li></ul><br>  Obviamente, qualquer outra informação útil pode estar contida, por exemplo, uma descrição do procedimento de atualização para vários equipamentos e comandos úteis de diagnóstico. <br><br><h2>  Parceiros </h2><br>  Agora você precisa avaliar os riscos associados aos parceiros.  Geralmente <br><br><ul><li>  Provedores de serviços de Internet e pontos de troca de tráfego (IX) </li><li>  fornecedores de canais de comunicação </li></ul><br>  Que perguntas você precisa fazer a si mesmo?  Como no caso de equipamentos, é necessário considerar várias opções para situações de emergência.  Por exemplo, para provedores de serviços da Internet, pode ser algo como: <br><br><ul><li>  O que acontecerá se o ISP X deixar de fornecer um serviço por algum motivo? </li><li>  Você tem largura de banda suficiente para outros provedores? </li><li>  quão boa será a coerência? </li><li>  Quão independentes são seus ISPs e um grave acidente em um deles causará problemas com os outros? </li><li>  Quantas entradas ópticas para o seu data center? </li><li>  O que acontece se uma das entradas for completamente destruída? </li></ul><br>  Quanto aos insumos, na minha prática em duas empresas diferentes, em dois centros de dados diferentes, a escavadeira destruiu os poços e apenas por um milagre nossas ópticas não foram afetadas.  Este não é um caso tão raro. <br><br>  Bem, é claro, você precisa não apenas fazer essas perguntas, mas, novamente, com o apoio da liderança, para fornecer uma solução aceitável em qualquer situação. <br><br><h2>  Backup </h2><br>  A próxima prioridade pode ser um backup das configurações de hardware.  De qualquer forma, este é um ponto muito importante.  Não vou listar os casos em que você pode perder a configuração, é melhor fazer um backup regular e não pensar nisso.  Além disso, o backup regular pode ser muito útil no controle de alterações. <br><br>  <b>Importante!</b>  <b>Faça um backup diariamente.</b>  <b>Esta não é uma quantidade tão grande de dados para economizar nisso.</b>  <b>De manhã, o engenheiro de serviço (ou você) deve receber um relatório do sistema que indica claramente se o backup foi bem-sucedido ou não e, no caso de um backup malsucedido, o problema deve ser resolvido ou um ticket deve ser criado (consulte os processos do departamento de rede).</b> <br><br><h2>  Versão do software </h2><br>  A questão de atualizar ou não o software de hardware não é tão clara.  Por um lado, as versões antigas são bugs e vulnerabilidades conhecidas, mas, por outro lado, o novo software é, em primeiro lugar, nem sempre um procedimento de atualização indolor e, em segundo lugar, novos bugs e vulnerabilidades. <br><br>  Aqui você precisa encontrar a melhor opção.  Algumas recomendações óbvias <br><br><ul><li>  apenas versões estáveis </li><li>  Ainda assim, você não deve viver com versões muito antigas do software </li><li>  faça um sinal com informações onde qualquer software é </li><li>  leia periodicamente relatórios sobre vulnerabilidades e bugs nas versões de software e, no caso de problemas críticos, vale a pena pensar em uma atualização </li></ul><br>  Nesse estágio, tendo acesso ao equipamento, informações de suporte e uma descrição do procedimento de atualização, você está, em princípio, pronto para esta etapa.  A opção ideal é quando você possui equipamento de laboratório, onde pode verificar todo o procedimento, mas, infelizmente, isso não acontece com frequência. <br><br>  No caso de equipamento crítico, você pode entrar em contato com o suporte do fornecedor com uma solicitação para ajudá-lo na atualização. <br><br><h2>  Sistema de bilhetes </h2><br>  Agora você pode olhar em volta.  Você precisa estabelecer processos de interação com outros departamentos e dentro do departamento. <br><br>  Talvez isso não seja obrigatório (por exemplo, se sua empresa é pequena), mas eu recomendo organizar o trabalho de forma que todas as tarefas externas e internas passem pelo sistema de tickets. <br><br>  Um sistema de ticket é essencialmente sua interface para comunicações internas e externas, e você deve descrevê-la com um grau suficiente de detalhes. <br><br>  Vamos dar um exemplo de uma tarefa importante e frequentemente encontrada de abrir acesso.  Vou descrever um algoritmo que funcionou muito bem em uma das empresas. <br><br><blockquote>  <b>Exemplo</b> <br><br>  Para começar, os clientes de acesso frequentemente articulam seu desejo em um idioma incompreensível para um engenheiro de rede, ou seja, no idioma do aplicativo, por exemplo, “me dê acesso ao 1C”. <br><br>  Portanto, nunca aceitamos solicitações diretamente desses usuários. <br>  E esse foi o primeiro requisito <br><br><ul><li>  solicitações de acesso devem vir dos departamentos técnicos (no nosso caso, eram unix, windows, engenheiros de helpdesk) </li></ul><br>  O segundo requisito é que <br><br><ul><li>  esse acesso deve ser registrado (pelo departamento técnico do qual recebemos essa solicitação) e, como solicitação, obtemos um link para esse acesso registrado </li></ul><br>  A forma desta solicitação deve ser clara para nós, ou seja, <br><br><ul><li>  a solicitação deve conter informações sobre qual e em qual acesso à sub-rede deve ser aberto, bem como sobre o protocolo e (no caso de tcp / udp) portas </li></ul><br>  Também deve ser indicado <br><br><ul><li>  descrição de por que esse acesso é aberto </li><li>  temporário ou permanente (se temporário, até que data) </li></ul><br>  E um ponto muito importante é <br><br><ul><li>  do chefe do departamento que iniciou o acesso (por exemplo, contabilidade) </li><li>  do chefe do departamento técnico, de onde essa solicitação chegou ao departamento de rede (por exemplo, suporte técnico) </li></ul><br>  Ao mesmo tempo, o “proprietário” desse acesso é considerado o chefe do departamento que iniciou o acesso (contabilidade em nosso exemplo) e é responsável por manter a página com acesso registrado para esse departamento atualizada. <br></blockquote><br><h2>  Registo </h2><br>  Isso é algo para se afogar.  Mas se você deseja implementar uma abordagem proativa, precisa aprender a lidar com esse fluxo de dados. <br><br><blockquote>  Aqui estão algumas sugestões práticas: <br><br><ul><li>  visualizar os logs necessários diariamente </li><li>  no caso de uma visualização agendada (e não de emergência), você pode limitar-se a níveis de gravidade de 0, 1, 2 e adicionar seus padrões favoritos de outros níveis, se considerar necessário </li><li>  escreva um script que analise os logs e ignore os logs cujos padrões você adicionou à lista de ignorados </li></ul><br>  Essa abordagem permitirá, com o tempo, compilar uma lista de ignorados de logs nos quais você não está interessado e deixar apenas aqueles que realmente considera importantes. <br>  Funcionou muito bem para nós. </blockquote><br><h2>  Monitoramento </h2><br>  Não é incomum quando uma empresa não possui um sistema de monitoramento.  Você pode, por exemplo, confiar nos logs, mas o equipamento pode simplesmente "morrer" sem ter que "dizer" nada, ou o pacote do protocolo udp syslog pode ser perdido e não alcançar.  Em geral, é claro, o monitoramento ativo é importante e necessário. <br><br><blockquote>  Dois exemplos mais exigidos na minha prática: <br><br><ul><li>  monitorar o carregamento de canais de comunicação, links críticos (por exemplo, conectar-se a provedores).  Eles permitem que você veja proativamente o potencial problema de degradação do serviço devido à perda de tráfego e, consequentemente, evite-o. </li><li>  Gráficos baseados em NetFlow.  Eles facilitam a localização de anomalias de tráfego e são muito úteis para detectar alguns tipos simples, mas significativos, de ataques de hackers. </li></ul></blockquote><br>  <b>Importante!</b>  <b>Configure a notificação por sms para os eventos mais críticos.</b>  <b>Isso se aplica ao monitoramento e ao log.</b>  <b>Se você não tiver um turno de plantão, o SMS também deve aparecer após o expediente.</b> <br><br>  Pense no processo de forma a não despertar todos os engenheiros.  Tínhamos um engenheiro de plantão para isso. <br><br><h2>  Controle de mudança </h2><br>  Na minha opinião, não é necessário controlar todas as alterações.  Mas, em qualquer caso, você poderá, se necessário, encontrar facilmente quem e por que fez essas ou outras alterações na rede. <br><br><blockquote>  Algumas dicas: <br><br><ul><li>  use o sistema de ticket para obter uma descrição detalhada do que foi feito como parte desse ticket, por exemplo, copiando a configuração aplicada ao ticket </li><li>  Use os recursos de comentário no hardware da rede (por exemplo, confirme o comentário no Juniper).  Você pode gravar o número do bilhete </li><li>  use diff dos seus backups de configuração </li></ul><br>  Você pode inserir isso como um processo, pesquisando todos os tickets diariamente para alterações. </blockquote><br><h2>  Os processos </h2><br>  Você deve formalizar e descrever os processos em sua equipe.  Se você chegou a esse ponto, pelo menos os seguintes processos já devem funcionar em sua equipe: <br><br>  Processos diários: <br><br><ul><li>  trabalhar com tickets </li><li>  trabalhar com logs </li><li>  controle de mudança </li><li>  folha de verificação diária </li></ul><br>  Processos anuais: <br><br><ul><li>  extensão de garantias, licenças </li></ul><br>  Processos assíncronos: <br><br><ul><li>  resposta a várias emergências </li></ul><br><h2>  Conclusão da primeira parte </h2><br>  Você notou que tudo isso não tem a ver com configuração de rede, design, protocolos de rede, roteamento ou segurança ... Isso é algo em torno.  Mas estes, embora talvez chatos, mas, é claro, elementos muito importantes da unidade de rede. <br><br>  Até agora, como você vê, você não melhorou nada na sua rede.  Se havia vulnerabilidades de segurança, elas permaneciam; se havia um design inadequado, ele permanecia.  Até você aplicar suas habilidades e conhecimentos de um engenheiro de rede, que provavelmente gastou muito tempo, esforço e, às vezes, dinheiro.  Mas primeiro você precisa criar (ou fortalecer) a base e depois fazer a construção. <br><br>  As partes a seguir são sobre como procurar e corrigir erros e, em seguida, melhorar sua infraestrutura. <br><br>  Obviamente, não é necessário fazer tudo sequencialmente.  O tempo pode ser crítico.  Faça em paralelo se os recursos permitirem. <br><br>  E uma adição importante.  Comunique, pergunte, consulte sua equipe.  No final, cabe a eles apoiar e fazer tudo isso. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt433614/">https://habr.com/ru/post/pt433614/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt433604/index.html">Trabalho confortável com o Android Studio</a></li>
<li><a href="../pt433606/index.html">Profundidades do SIEM: correlações prontas para uso. Parte 3.2 Metodologia de Normalização de Eventos</a></li>
<li><a href="../pt433608/index.html">O carro do futuro. Telas em vez de vidro automático?</a></li>
<li><a href="../pt433610/index.html">Notas de um fitoquímico. Caqui</a></li>
<li><a href="../pt433612/index.html">FCC: Satélites SpaceX em órbita - uma fonte de detritos perigosos para os habitantes da Terra</a></li>
<li><a href="../pt433618/index.html">Som de "tubo quente" com suas próprias mãos. E se você atravessar uma loja, um clube e uma oficina?</a></li>
<li><a href="../pt433620/index.html">Como o SystemUI funciona no Android</a></li>
<li><a href="../pt433624/index.html">Learning Rust: Como conversei com o UDP com a Azul</a></li>
<li><a href="../pt433628/index.html">Cultura de feedback: como não cair em acusações</a></li>
<li><a href="../pt433630/index.html">Um passo mais perto da vacina contra o HIV: título de anticorpos neutralizantes séricos em macacos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>