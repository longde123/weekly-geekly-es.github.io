<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚è¨ üõÑ üë®‚Äçüíª Un peu d'exp√©rience sur la sauvegarde et le stockage ü§º üë™ üìç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! 

 Il y a quelque temps, je me suis plong√© dans le monde de la ¬´dure entreprise¬ª, notamment dans ce domaine qui est responsable du sto...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Un peu d'exp√©rience sur la sauvegarde et le stockage</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459952/"> Bonjour √† tous! <br><br>  Il y a quelque temps, je me suis plong√© dans le monde de la ¬´dure entreprise¬ª, notamment dans ce domaine qui est responsable du stockage et de la sauvegarde des donn√©es.  Plus pr√©cis√©ment, c'est le plus.  Et pendant cette p√©riode, j'ai accumul√© plusieurs r√®gles que j'essaie d'adh√©rer lors de la conception ou de l'entretien de solutions dans ce domaine.  Certains ont d√©j√† surv√©cu aux leurs, avec le d√©veloppement de la technologie, et certains fonctionnent assez bien.  Et j'ai d√©cid√© de les partager avec vous. <br><br>  Il n'y aura pas de r√®gle 3-2-1, qui est souvent mentionn√©e sans moi, ainsi que certaines techniques directes pour des situations sp√©cifiques et d'autres choses dans la m√™me veine.  Peut-√™tre pour la plupart de ceux qui liront ce seront les bases et les platitudes.  C'est juste ma modeste exp√©rience et j'esp√®re que cela sera utile √† quelqu'un.  Je demande un chat. <br><a name="habracut"></a><br><h3>  Caract√©ristiques du "dimensionnement" local </h3><br>  T√¥t ou tard, il est n√©cessaire d'obtenir quelques t√©raoctets et / ou IOPS suppl√©mentaires.  Et puis le dimensionnement commence.  Souvent d√©nu√© de sens et impitoyable.  Parce qu'il est extr√™mement rare que quelqu'un fixe les exigences RTO pour le dimensionnement, qui sont g√©n√©ralement pr√©sent√©es pour la sauvegarde.  Bien que cela semble √™tre une exigence √©vidente pour tout complexe mat√©riel.  C'est-√†-dire  Lors du dimensionnement et de la formation des exigences pour un nouvel √©quipement, pour une raison quelconque, les exigences du syst√®me de sauvegarde, qui restaurera d'urgence quelque chose sur votre mat√©riel, ne sont pas prises en compte.  Parfois, quelque chose est assez gros.  En g√©n√©ral, une sorte de marge de productivit√© et d'espace est en cours d'√©laboration, mais la toute premi√®re r√©cup√©ration de donn√©es montre qu'elle ne sera pas suffisante pour le cycle de vie d√©fini pour cet √©quipement. <br><br>  Au cours de la derni√®re ann√©e, j'ai d√©j√† vu deux fois une situation o√π le goulot d'√©tranglement pendant la r√©cup√©ration de donn√©es √©tait la baie de disques sur laquelle la r√©cup√©ration a √©t√© effectu√©e.  Ils s'inscrivent dans RTO, mais la cloche √©tait alarmante. <br><br><h3>  Nous avons une solution sur le cluster, pourquoi avez-vous besoin d'une sauvegarde?! </h3><br>  C‚Äôest cette phrase prononc√©e tr√®s ¬´√©nergiquement¬ª que j‚Äôai entendue en communiquant <br>  avec un d√©veloppeur d'un logiciel tr√®s utile pour une entreprise.  Le d√©veloppeur a fait valoir que la sauvegarde n'est pas n√©cessaire pour la r√©cup√©ration du fait que la solution est d√©ploy√©e sur un cluster et, par cons√©quent, si un n≈ìud (ou une baie de disques) tombe sur le site, le cluster sera enregistr√©.  Dans ces cas, il sauvera sans aucun doute.  C'est g√©n√©ralement excellent quand il y a des gars qui pensent √† la tol√©rance aux pannes m√™me au stade du d√©veloppement. <br><br>  Cependant, la perte de donn√©es est obtenue non seulement par la d√©faillance de l'√©quipement sur un site, et pour une raison quelconque, le d√©veloppeur n'a pas voulu comprendre cela pendant un certain temps.  En cons√©quence, la premi√®re version du logiciel a √©t√© publi√©e sur le SGBD communautaire, dont la m√©canique de sauvegarde ne permettait de remplir ni les exigences RTO / RPO ni le SLA de l'entrepreneur. <br>  En g√©n√©ral, j'entends assez souvent cette phrase sur un cluster. <br><br><h3>  D'abord, puis √ßa! </h3><br>  L'une de mes plus grosses erreurs a √©t√© de consid√©rer les objets de sauvegarde comme des objets ind√©pendants.  Voici le SGBD, voici le logiciel.  C'est une sauvegarde comme √ßa, et c'est comme √ßa.  D'abord un, puis un autre.  Et un jour, nous n'avons pas pu r√©cup√©rer.  Plus pr√©cis√©ment, ils le pouvaient, mais pendant les quelques jours consacr√©s √† la correction des erreurs dans la base de donn√©es.  Et ce n'est pas moi qui les ai √©limin√©s, pour lesquels j'ai particuli√®rement honte.  Bien que nous ayons utilis√© un m√©canisme de sauvegarde r√©gulier pour ce SGBD.  D√©j√† test√© sur d'autres syst√®mes. <br><br>  √Ä partir de ce moment, je me bouscule et secoue le d√©veloppeur / propri√©taire du syst√®me sur la fa√ßon de sauvegarder et de restaurer correctement.  Par exemple, dans un cas, la seule fa√ßon de cr√©er une sauvegarde fonctionnelle √©tait d'arr√™ter compl√®tement les services sur 5 serveurs, d'effectuer une sauvegarde et de d√©marrer les services. <br><br><h3>  Vider notre tout? </h3><br>  Je rencontre souvent des solutions sur des SGBD tels que MySQL et PostgreSQL.  Et encore plus souvent, je rencontre une situation o√π le vidage banal de la base de donn√©es dans / tmp est utilis√© comme m√©thode de sauvegarde, puis vers un autre support.  Dans le m√™me temps, les syst√®mes sur lesquels ces SGBD sont utilis√©s sont assez critiques pour les temps d'arr√™t en cas de perte de donn√©es et sont tr√®s charg√©s.  Je suis d√©j√† silencieux sur les volumes. <br><br>  Pour une raison quelconque, peu de personnes lisent la documentation de ces produits et ne savent pas qu'il existe d'autres m√©thodes et solutions pour cr√©er des sauvegardes de ces SGBD.  <i>MySQL Enterprise Backup</i> pour MySQL et <i>pg_basebackup</i> ( <i>pg_start_backup, pg_stop_backup</i> ) respectivement dans PostgreSQL.  Ou il le sait, mais a vol√© hors de sa t√™te.  Bien que ces solutions ne soient pas beaucoup plus compliqu√©es et rapides.  Sauvegarde plus rapide, restauration plus rapide, test plus rapide. <br><blockquote>  Veuillez ne pas tirer sur le pianiste. <br>  Il fait de son mieux. <br>  Oscar Fingal O'Flahertie Wills Wilde </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459952/">https://habr.com/ru/post/fr459952/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459928/index.html">Parcours de l'√©tudiant vers le d√©veloppement d'applications mobiles</a></li>
<li><a href="../fr459930/index.html">Automatisation de l'importation Python</a></li>
<li><a href="../fr459934/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 306 (du 8 au 14 juillet)</a></li>
<li><a href="../fr459936/index.html">9 astuces suppl√©mentaires pour travailler avec Visual Studio</a></li>
<li><a href="../fr459948/index.html">Impl√©mentation de nuages ‚Äã‚Äãvolum√©triques physiquement corrects comme dans Horizon Zero Dawn</a></li>
<li><a href="../fr459954/index.html">Pourquoi l'une des plus grandes soci√©t√©s informatiques a rejoint CNCF - un fonds d√©veloppant une infrastructure cloud</a></li>
<li><a href="../fr459956/index.html">Implantation en l'absence totale de dents, suite √† des visites intempestives chez le dentiste</a></li>
<li><a href="../fr459958/index.html">T√¢ches d'analyse de la conf√©rence Hydra - √©quilibrage de charge et stockage en m√©moire</a></li>
<li><a href="../fr459960/index.html">De l'id√©e √† la sortie. Exp√©rience d√©taill√©e du march√© frontal</a></li>
<li><a href="../fr459964/index.html">8 astuces UI simples pour dynamiser la conception d'un prototype sans recourir √† l'animation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>