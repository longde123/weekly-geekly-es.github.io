<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🏭 👨🏽‍🎨 🌆 Wie man aufhört, dasselbe zu tun ⛩️ 👨🏻‍🚀 📬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wiederholen Sie von Zeit zu Zeit Routineoperationen? Hier bin ich. Aber jedes Mal, wenn ich im SQL-Client mit dem Rostelecom-Repository arbeitete, mus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie man aufhört, dasselbe zu tun</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rostelecom/blog/462021/">  Wiederholen Sie von Zeit zu Zeit Routineoperationen?  Hier bin ich.  Aber jedes Mal, wenn ich im SQL-Client mit dem Rostelecom-Repository arbeitete, musste ich alle Verknüpfungen zwischen den Tabellenhandles registrieren.  Und das trotz der Tatsache, dass in 90% der Fälle die Felder und Bedingungen für das Verknüpfen von Tabellen von Abfrage zu Abfrage übereinstimmten!  Es scheint, dass jeder SQL-Client über Funktionen zur automatischen Vervollständigung verfügt, dies funktioniert jedoch nicht immer für Speicher: Sie verfügen selten über eindeutige Einschränkungen und Fremdschlüssel, um die Leistung zu verbessern. Ohne diese Funktion kann das Programm nicht herausfinden, wie Entitäten zusammenhängen und was es für Sie tun kann vorschlagen. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/ys/wr/0t/yswr0tn6siriyfofwm0t2yemux8.jpeg"></a> <br><br>  Nachdem ich Verleugnung, Wut, Verhandlungen, Depressionen und die Annäherung an Akzeptanz durchgemacht hatte, entschied ich mich - warum nicht versuchen, die automatische Vervollständigung mit Blackjack selbst zu implementieren und wie es sollte?  Ich benutze den in Java geschriebenen dbeaver-Client, er hat eine Open-Source-Community-Version.  Ein einfacher Plan ist gereift: <br><a name="habracut"></a><br><ol><li>  Suchen Sie nach Klassen für die automatische Vervollständigung im Quellcode </li><li>  Richten Sie sie neu aus, um mit externen Metadaten zu arbeiten und von dort Informationen zu Joins abzurufen </li><li>  ?????? </li><li>  GEWINN </li></ol><br>  Ich fand schnell das erste Element heraus - ich fand eine Anforderung zum Anpassen der automatischen Füllung im Bugtracker und fand die SQLCompletionAnalyzer-Klasse im zugehörigen Commit.  Ich habe mir den Code angesehen - was ich brauche.  Es bleibt zu schreiben, damit alles funktioniert.  Ich wartete auf einen freien Abend und begann über die Umsetzung nachzudenken.  Tabellenverknüpfungsregeln (Metadaten) haben beschlossen, in json zu führen.  Ich hatte keine praktischen Erfahrungen mit diesem Format und die aktuelle Aufgabe wurde als Gelegenheit gesehen, diese Lücke zu schließen. <br><br>  Um mit json zu arbeiten, habe ich mich für die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">json-simple-</a> Bibliothek von Google entschieden.  Hier begannen Überraschungen.  Wie sich herausstellte, wird dbeaver als Tru-Anwendung mit dem OSGi-Framework auf der Eclipse-Plattform geschrieben.  Für erfahrene Entwickler bietet dieses Ding den Komfort des Abhängigkeitsmanagements, aber für mich war es eher wie dunkle Magie, für die ich eindeutig nicht bereit war: Wie üblich registriere ich den Import der benötigten Klassen aus der json-simple-Bibliothek im Header der bearbeiteten Klasse, ich spezifiziere ihn in pom. xml, wonach sich das Projekt kategorisch weigert, richtig zusammenzusetzen, und mit Fehlern fehlschlägt. <br><br>  Infolgedessen konnten die Assemblyfehler behoben werden: Ich habe die Bibliothek nicht in pom.xml, sondern im manifest.mf-Manifest registriert, wie von OSGI gefordert, und sie als Importpaket angegeben.  Nicht die schönste Lösung, aber es funktioniert.  Dann erschien die nächste Überraschung.  Wenn Sie in Intellij Idea entwickeln, können Sie Ihr Projekt nicht einfach auf der Basis der Eclipse-Plattform starten und debuggen: Ein unerfahrener Entwickler sollte nicht weniger als ein Analyst leiden, ohne Anforderungen automatisch zu vervollständigen.  Die Biberentwickler selbst kamen zur Rettung und zeigten im Wiki alle Tänze mit einem Tamburin an, die gemacht werden müssen.  Das nervigste ist, dass das Projekt auch nach all diesen Kniebeugen nicht in einem Debugging mit der über das Importpaket verbundenen JSON-Bibliothek beginnen wollte (obwohl es immer noch erfolgreich zum fertigen Produkt zusammengesetzt wurde). <br><br>  Zu diesem Zeitpunkt hatte ich das Gefühl, dass es unangenehm ist, json für meine Aufgabe zu verwenden - schließlich sollten die Metadaten manuell bearbeitet werden, und dafür ist das XML-Format besser geeignet.  Das zweite Argument für XML war das Vorhandensein aller erforderlichen Klassen im JDK, wodurch es möglich wurde, den Kampf mit einer externen Bibliothek einzustellen.  Mit großer Freude habe ich alle Metadaten von json nach xml übertragen und die Autocomplete-Logik bearbeitet. <br><br><div class="spoiler">  <b class="spoiler_title">Beispiel für Metadaten</b> <div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableRelations</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableRelation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">leftTable</span></span></span><span class="hljs-tag">&gt;</span></span>dim_account<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">leftTable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rightTable</span></span></span><span class="hljs-tag">&gt;</span></span>dim_partner<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rightTable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">joinColumnPair</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">leftColumn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"partner_key"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rightColumn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"partner_key"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">joinColumnPair</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">leftColumn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"src_id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rightColumn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"src_id"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableRelation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableRelation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">leftTable</span></span></span><span class="hljs-tag">&gt;</span></span>dim_account<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">leftTable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rightTable</span></span></span><span class="hljs-tag">&gt;</span></span>dim_branch<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rightTable</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">joinColumnPair</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">leftColumn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"src_id"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rightColumn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"src_id"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">joinColumnPair</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">leftColumn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"branch_key"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rightColumn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"branch_key"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableRelation</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tableRelations</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><br>  Infolgedessen habe ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Änderungen</a> an den Klassen SQLUtils und SQLCompletionAnalyzer vorgenommen.  Die Idee ist folgende: Wenn das Programm keine geeigneten Sätze für die automatische Vervollständigung gemäß der Grundlogik gefunden hat, prüft es mithilfe einer externen XML-Datei, ob Verknüpfungen möglich sind.  Die Datei selbst enthält Tabellenpaare, die die Felder angeben, mit denen diese Tabellen verknüpft werden müssen.  Standardmäßig sind Einschränkungen der technischen Gültigkeitsdaten der Einträge eff_dttm und exp_dttm sowie des logischen Löschflags deleted_ind festgelegt. <br><br>  Als Änderungen am Code vorgenommen wurden, stellte sich die Frage: Wer füllt die Metadatendatei?  Es gibt viele Entitäten im Repository, es ist unrentabel, alle Verbindungen selbst zu registrieren.  Am Ende habe ich beschlossen, diese Aufgabe meinen Analystenkollegen aufzuhängen.  Die Metadatendatei wurde auf svn hochgeladen, von wo aus mit dem Programm in einem lokalen Verzeichnis ausgecheckt wird.  Das Prinzip lautet: Eine neue Entität ist im Repository erschienen?  Ein Analyst ermöglicht das Verknüpfen einer Datei, schreibt Änderungen fest, der Rest führt Check-outs für sich selbst durch und arbeitet gerne automatisch: Community, Wissensakkumulation und all das.  Hielt einen Workshop für Kollegen über die Verwendung des Programms ab, schrieb einen Artikel in Konfluenz - jetzt hat das Unternehmen mehr als ein praktisches Werkzeug. <br><br>  Die Arbeit an dieser Funktion gab mir das Verständnis, dass man keine Angst haben sollte, Open-Source-Projekte auszuwählen - in der Regel haben sie eine klare Architektur, und selbst Grundkenntnisse der Sprache werden für Experimente ausreichen.  Und mit einem gewissen Maß an Ausdauer können Sie sogar die verhassten Routineoperationen loswerden und sich Zeit für neue Experimente sparen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de462021/">https://habr.com/ru/post/de462021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de462007/index.html">Entwicklung robuster Python-Skripte</a></li>
<li><a href="../de462009/index.html">Programmtrends: Was ist im Jahr 2020 zu erwarten?</a></li>
<li><a href="../de462011/index.html">Web-Geoservices. Überblick über moderne Lösungen</a></li>
<li><a href="../de462013/index.html">Verlauf des Docker-Speicher-Migrationsproblems (Docker-Root)</a></li>
<li><a href="../de462015/index.html">SAP-Berichtsuniversum</a></li>
<li><a href="../de462023/index.html">Cascadeur: Die Zukunft der Spielanimation</a></li>
<li><a href="../de462025/index.html">Relationales Netzwerkdatenmodell</a></li>
<li><a href="../de462027/index.html">Wie Dark 50ms Code einsetzt</a></li>
<li><a href="../de462029/index.html">19 nützliche Funktionen der .htaccess-Datei</a></li>
<li><a href="../de462031/index.html">Zum Beispiel, wenn Sie die Protokolle lesen !: Starten Sie Hotspot 2.0 im Wi-Fi-Netzwerk in der U-Bahn</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>