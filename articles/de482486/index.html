<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö§ üêÇ üòÅ Was ist Misra und wie man es kocht üèµÔ∏è üõèÔ∏è ü••</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vielleicht hat jeder Entwickler von Mikrocontroller-Software von speziellen Codierungsstandards geh√∂rt, um die Codesicherheit und Portabilit√§t zu verb...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Was ist Misra und wie man es kocht</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/482486/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cf9/5bc/021/cf95bc0219fd9e34f03d5cfc316f7e71.png" alt="Abbildung 2"></div><br>  Vielleicht hat jeder Entwickler von Mikrocontroller-Software von speziellen Codierungsstandards geh√∂rt, um die Codesicherheit und Portabilit√§t zu verbessern.  Einer dieser Standards ist MISRA.  In diesem Artikel werden wir uns genauer mit diesem Standard, seinem Konzept und seiner Verwendung in Ihren Projekten befassen. <br><a name="habracut"></a><br>  Viele unserer Leser haben geh√∂rt, dass PVS-Studio die Klassifizierung seiner Warnungen nach dem MISRA-Standard unterst√ºtzt.  Derzeit <a href="https://www.viva64.com/en/misra/">deckt</a> PVS-Studio mehr als 100 MISRA C-Regeln ab: 2012 und MISRA C ++: 2008. <br><br>  Dieser Artikel zielt darauf ab, drei Fliegen mit einer Klappe zu schlagen: <br><br><ol><li>  Sagen Sie, was MISRA f√ºr diejenigen ist, die mit diesem Standard noch nicht vertraut sind. </li><li>  Erinnern Sie die Welt der eingebetteten Entwicklung daran, was wir tun k√∂nnen. </li><li>  Helfen Sie neuen Mitarbeitern unseres Unternehmens, die k√ºnftig auch unseren MISRA-Analysator weiterentwickeln, sich mit ihm vertraut zu machen. </li></ol><br>  Ich hoffe ich kann es interessant machen.  Also los geht's! <br><br><h2>  Die Geschichte der Misra </h2><br>  Die Geschichte von MISRA begann vor langer Zeit.  Damals, in den fr√ºhen neunziger Jahren, finanzierte das britische Regierungsprogramm "Safe IT" verschiedene Projekte, die in irgendeiner Weise mit der Sicherheit elektronischer Systeme zu tun hatten.  Das MISRA-Projekt (Motor Industry Software Reliability Association) wurde gegr√ºndet, um einen Leitfaden f√ºr die Entwicklung von Software f√ºr Mikrocontroller in Bodenfahrzeugen zu erstellen - haupts√§chlich in Autos. <br><br>  Das vom Staat finanzierte MISRA-Team nahm die Arbeiten auf und ver√∂ffentlichte im November 1994 seinen ersten Leitfaden: " <a href="https://pdfs.semanticscholar.org/f7ab/6319c0ab1fb546e406a3f65463cd0e5d2f0c.pdf">Entwicklungsrichtlinien f√ºr fahrzeugbasierte Software</a> ".  Dieser Leitfaden war noch nicht an eine bestimmte Sprache gebunden, aber ich muss zugeben, dass die Arbeit beeindruckend war und wahrscheinlich alle denkbaren Aspekte der Entwicklung eingebetteter Software betraf.  √úbrigens haben die Entwickler dieses Handbuchs k√ºrzlich das <a href="https://www.misra.org.uk/LinkClick.aspx%3Ffileticket%3DpHorDgiWiPs%253D%26amp%3Btabid%3D59">25-j√§hrige Jubil√§um</a> eines f√ºr sie so wichtigen Termins <a href="https://www.misra.org.uk/LinkClick.aspx%3Ffileticket%3DpHorDgiWiPs%253D%26amp%3Btabid%3D59">gefeiert</a> . <br><br>  Als die Finanzierung durch den Staat beendet war, beschlossen die MISRA-Mitglieder, weiterhin informell zusammenzuarbeiten, was bis heute so bleibt.  Generell ist MISRA (als Organisation) eine Community von Stakeholdern aus verschiedenen Auto- und Flugzeugindustrien.  Nun sind diese Parteien: <br><br><ul><li>  Bentley-Kraftfahrzeuge </li><li>  Ford Motor Company </li><li>  Jaguar Land Rover </li><li>  Delphi-Dieselsysteme </li><li>  HORIBA MIRA </li><li>  Protean elektrisch </li><li>  Ingenieurdienstleistungen von Visteon </li><li>  Die Universit√§t von Leeds </li><li>  Ricardo uk </li><li>  ZF TRW </li></ul><br>  Sehr starke Marktteilnehmer, nicht wahr?  Es ist nicht √ºberraschend, dass ihr erster sprachbezogener Standard, MISRA C, unter Entwicklern kritischer eingebetteter Systeme zum Alltag geworden ist.  Wenig sp√§ter erschien MISRA C ++.  Allm√§hlich wurden Versionen der Standards aktualisiert und verfeinert, um die neuen Funktionen der Sprachen abzudecken.  Derzeit sind die aktuellen Versionen MISRA C: 2012 und MISRA C ++: 2008. <br><br><h2>  Hauptkonzept und Beispiele f√ºr Regeln </h2><br>  MISRA zeichnet sich durch eine unglaubliche Liebe zum Detail und √§u√üerste Sorgfalt bei der Gew√§hrleistung von Sicherheit und Schutz aus.  Die Autoren haben nicht nur alle C- und C ++ - M√§ngel an einem Ort gesammelt (wie zum Beispiel die Autoren von CERT), sondern auch die internationalen Standards dieser Sprachen sorgf√§ltig ausgearbeitet und alle Arten von Fehlern aufgeschrieben.  Anschlie√üend f√ºgten sie Regeln zur Codelesbarkeit hinzu, um den bereinigten Code vor einem neuen Fehler zu sch√ºtzen. <br><br>  Sehen wir uns ein paar Regeln an, die dem Standard entnommen sind, um das Ausma√ü des Ernstes zu verstehen. <br><br>  Einerseits gibt es anst√§ndige, lohnende Regeln, die immer befolgt werden m√ºssen, egal f√ºr was Ihr Projekt ist.  Zum gr√∂√üten Teil sollen sie undefiniertes / nicht angegebenes / implementierungsdefiniertes Verhalten beseitigen.  Zum Beispiel: <br><br><ul><li>  Verwenden Sie nicht den Wert einer nicht initialisierten Variablen </li><li>  Verwenden Sie den Zeiger nicht auf DATEI, nachdem der Stream geschlossen wurde </li><li>  Alle nicht leeren Funktionen sollten einen Wert zur√ºckgeben </li><li>  Schleifenz√§hler d√ºrfen nicht vom Typ Gleitkomma sein </li><li>  und andere. </li></ul><br>  Auf der anderen Seite gibt es Regeln, deren Nutzen nicht schwer zu ermitteln ist, die jedoch (aus Sicht gew√∂hnlicher Projekte) gelegentlich verletzt werden k√∂nnen: <br><br><ul><li>  Verwenden Sie nicht goto und longjmp </li><li>  Jeder Schalter sollte mit der Standardbezeichnung enden </li><li>  Schreiben Sie keinen unerreichbaren Code </li><li>  Verwenden Sie keine variablen Funktionen </li><li>  Verwenden Sie keine Adressarithmetik (au√üer <i>[]</i> und <i>++</i> ) </li><li>  ... </li></ul><br>  Solche Regeln sind auch nicht schlecht und zusammen mit den vorherigen erh√∂hen sie die Sicherheit bereits sp√ºrbar. Aber reicht dies f√ºr hochzuverl√§ssige eingebettete Systeme aus?  Sie werden nicht nur in der Automobilindustrie, sondern auch in der Luftfahrt-, Raumfahrt-, Milit√§r- und Medizinindustrie eingesetzt. <br><br>  Wir wollen nicht, dass <a href="https://www.viva64.com/en/b/0438/">ein R√∂ntgenger√§t</a> aufgrund eines Softwarefehlers <a href="https://www.viva64.com/en/b/0438/">Patienten mit einer Dosis von 20.000 Rad bestrahlt</a> , daher reichen die √ºblichen "Alltagsregeln" nicht aus.  Bei Menschenleben und viel Geld ist Sorgfalt unabdingbar.  Hier kommen die restlichen MISRA-Regeln ins Spiel: <br><br><ul><li>  Das Suffix 'L' im Literal muss immer ein Gro√übuchstabe sein (der Kleinbuchstabe 'l' kann mit 1 verwechselt werden) </li><li>  Verwenden Sie nicht den "Komma" -Operator (dies erh√∂ht die Wahrscheinlichkeit, einen Fehler zu machen) </li><li>  Keine Rekursion verwenden (ein kleiner Mikrocontroller-Stack kann leicht √ºberlaufen) </li><li>  Die Hauptteile der Anweisungen, <i>falls</i> <i>andernfalls</i> <i>f√ºr</i> <i>while-</i> <i>do-</i> <i>switch</i> geschweifte Klammern verwendet werden m√ºssen (m√∂glicherweise k√∂nnen Sie einen Fehler machen, wenn der Code <a href="https://www.viva64.com/en/w/v2507/">falsch ausgerichtet ist</a> ) </li><li>  Verwenden Sie keinen dynamischen Speicher (da die Gefahr besteht, dass dieser nicht vom Heap freigegeben wird, insbesondere in Mikrocontrollern). </li><li>  ... und viele, viele dieser Regeln. </li></ul><br>  Es kommt h√§ufig vor, dass Menschen, die MISRA zum ersten Mal begegnen, den Eindruck haben, dass der Zweck des Standards darin besteht, "dies und das zu verbieten".  In der Tat ist es so, aber nur zu einem gewissen Grad. <br><br>  Einerseits hat der Standard viele solcher Regeln, aber er soll nicht alles verbieten, andererseits listet er alle M√∂glichkeiten auf, die Codesicherheit irgendwie zu verletzen.  Bei den meisten Regeln entscheiden Sie selbst, ob Sie sie befolgen m√ºssen oder nicht.  Ich werde diesen Fall n√§her erl√§utern. <br><br>  In MISRA C sind die Regeln in drei Hauptkategorien unterteilt: Obligatorisch, Erforderlich und Beratung.  Obligatorisch sind Regeln, die unter keinem Vorwand verletzt werden d√ºrfen.  Dieser Abschnitt enth√§lt beispielsweise die Regel: "Verwenden Sie nicht den Wert einer nicht initiierten Variablen."  Die vorgeschriebenen Regeln sind weniger streng: Sie sehen die M√∂glichkeit der Ablehnung vor, jedoch nur, wenn diese Abweichungen sorgf√§ltig dokumentiert und schriftlich begr√ºndet werden.  Der Rest der Regeln f√§llt in die Kategorie Advisory, die nicht obligatorisch sind. <br><br>  MISRA C ++ weist einige Unterschiede auf: Es gibt keine obligatorische Kategorie, und die meisten Regeln geh√∂ren zur Kategorie Erforderlich.  Daher haben Sie das Recht, gegen eine Regel zu versto√üen. Vergessen Sie jedoch nicht, alle Abweichungen zu kommentieren.  Es gibt auch die Dokumentenkategorie - dies sind verbindliche Regeln (Abweichungen sind nicht zul√§ssig) im Zusammenhang mit allgemeinen Vorgehensweisen wie "Jede Verwendung des Assemblers muss dokumentiert werden" oder "Eine enthaltene Bibliothek muss MISRA C ++ entsprechen". <br><br><h2>  Andere Probleme </h2><br>  Tats√§chlich handelt es sich bei MISRA nicht nur um ein Regelwerk.  Tats√§chlich ist es eine Richtlinie zum Schreiben von sicherem Code f√ºr Mikrocontroller, und es steckt voller Extras.  Schauen wir sie uns genauer an. <br><br>  Zun√§chst enth√§lt der Standard eine ziemlich gr√ºndliche Beschreibung der Hintergrundgeschichte: Warum der Standard erstellt wurde, warum C oder C ++ ausgew√§hlt wurde, Vor- und Nachteile dieser Sprachen. <br><br>  Wir alle kennen die Vorz√ºge dieser Sprachen sehr gut.  Ebenso sind wir uns ihrer M√§ngel bewusst :) Hohe Komplexit√§t, unvollst√§ndige Standardspezifikation und Syntax, die es erm√∂glichen, leicht einen Fehler zu machen und ihn dann f√ºr Ewigkeiten zu suchen - all dies kann nur erw√§hnt werden.  Beispielsweise k√∂nnten Sie dies versehentlich schreiben: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; ++i); { do_something(); }</code> </pre> <br>  Immerhin besteht die M√∂glichkeit, dass eine Person kein <a href="https://www.viva64.com/en/w/v529/">zus√§tzliches Semikolon</a> bemerkt, oder?  Eine andere M√∂glichkeit besteht darin, Code <a href="https://www.viva64.com/en/w/v559/">wie folgt</a> zu schreiben: <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SpendTime</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> doWantToKillPeople)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (doWantToKillPeople = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { StartNuclearWar(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { PlayComputerGames(); } }</code> </pre> <br>  Es ist gut, dass sowohl der <a href="https://www.viva64.com/en/w/v2507/">erste</a> als auch der <a href="https://www.viva64.com/en/w/v2561/">zweite</a> Fall leicht von den Regeln MISRA (1 - MISRA C: 13.4 / MISRA C ++: 6.2.1; 2 - MISRA C: 13.4 / MISRA C ++: 6.2.1) erfasst werden k√∂nnen. <br><br>  Der Standard enth√§lt sowohl eine Beschreibung der Probleme als auch Tipps dazu, was man wissen muss, bevor man eine bestimmte Aufgabe √ºbernimmt: wie man den Entwicklungsprozess gem√§√ü MISRA einrichtet;  Verwendung von statischen Analyseger√§ten zur √úberpr√ºfung des Codes auf Konformit√§t;  Welche Dokumente muss man pflegen, wie f√ºllt man sie aus und so weiter. <br><br>  Die Anh√§nge am Ende enthalten au√üerdem: eine kurze Liste und eine Zusammenfassung der Regeln, eine kleine Liste von C / C ++ - Schwachstellen, ein Beispiel f√ºr eine Dokumentation zu Regelabweichungen und einige Checklisten, die dazu beitragen, all diese B√ºrokratie zu beseitigen. <br><br>  Wie Sie sehen, handelt es sich bei MISRA nicht nur um ein Regelwerk, sondern um eine fast vollst√§ndige Infrastruktur zum Schreiben von sicherem Code f√ºr eingebettete Systeme. <br><br><h2>  Verwendung in Ihren Projekten </h2><br>  Stellen Sie sich die Szene vor: Sie werden ein Programm f√ºr ein so notwendiges und verantwortungsbewusstes Embedded-System schreiben.  Oder Sie haben bereits ein Programm, m√ºssen es aber nach MISRA "portieren".  Wie √ºberpr√ºfen Sie Ihren Code auf √úbereinstimmung mit dem Standard?  M√ºssen Sie es wirklich manuell machen? <br><br>  Die manuelle Code√ºberpr√ºfung ist eine schwierige und m√∂glicherweise sogar unm√∂gliche Aufgabe.  Jeder Rezensent muss nicht nur jede Codezeile sorgf√§ltig durchsehen, sondern auch den Standard fast auswendig k√∂nnen.  Verr√ºckt! <br><br>  Daher raten die MISRA-Entwickler selbst zur statischen Analyse, um Ihren Code zu testen.  Schlie√ülich ist die statische Analyse ein automatisierter Prozess der Code√ºberpr√ºfung.  Sie f√ºhren den Analyzer einfach mit Ihrem Programm aus und in wenigen Minuten erhalten Sie einen Bericht √ºber m√∂gliche Verst√∂√üe gegen den Standard.  Das ist was du brauchst, nicht wahr?  Sie m√ºssen lediglich das Protokoll √ºberpr√ºfen und die Warnungen korrigieren. <br><br>  Die n√§chste Frage ist - ab wann sollten wir MISRA einsetzen?  Die Antwort ist einfach: Je fr√ºher, desto besser.  Idealerweise - bevor Sie √ºberhaupt mit dem Schreiben von Code beginnen, da MISRA davon ausgeht, dass Sie den Standard f√ºr den gesamten Lebenszyklus Ihres Codes einhalten. <br><br>  Nun, es ist nicht immer m√∂glich, von Anfang an nach MISRA zu schreiben.  Beispielsweise ist es h√§ufig so, dass das Projekt bereits teilweise oder vollst√§ndig umgesetzt wurde, der Kunde jedoch sp√§ter w√ºnschte, dass das Projekt dem Standard entspricht.  In diesem Fall m√ºssen Sie den vorhandenen Code gr√ºndlich √ºberarbeiten. <br><br>  Hier taucht die Falle auf.  Ich w√ºrde sogar sagen, dass ein Unterwasser-Felsbrocken auftaucht.  Was passiert, wenn Sie einen statischen Analysator nehmen und das "normale" Projekt √ºberpr√ºfen, um den MISRA-Standard zu erf√ºllen?  Spoiler: Sie k√∂nnen Angst haben. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44e/2b7/7d9/44e2b77d90cd9804e1ec0a5a38f166a2.png" alt="Abbildung 5"></div><br><br>  Richtig, das Beispiel auf dem Bild ist √ºbertrieben.  Es zeigt das Ergebnis der √úberpr√ºfung eines ziemlich gro√üen Projekts, das eigentlich nicht f√ºr die Arbeit an Mikrocontrollern gedacht war.  Wenn Sie jedoch bereits vorhandenen Code √ºberpr√ºfen, erhalten Sie m√∂glicherweise eine, zwei, drei oder sogar zehntausend Analysatorwarnungen.  Neue Warnungen, die f√ºr neuen oder ge√§nderten Code ausgegeben werden, gehen einfach in dieser gro√üen Reihe von Warnungen verloren. <br><br>  Was k√∂nnen Sie dagegen tun?  M√ºssen Sie wirklich alle Aufgaben verschieben und alle Anstrengungen unternehmen, um alte Warnungen zu beheben? <br><br>  Als Entwickler des statischen Analysators wissen wir, dass nach der √úberpr√ºfung so viele Warnungen angezeigt werden.  Aus diesem Grund haben wir eine L√∂sung entwickelt, mit der Sie den Analysator sofort verwenden k√∂nnen, ohne die Arbeit zu unterbrechen.  Diese L√∂sung hei√üt "Basis unterdr√ºcken". <br><br>  Unterdr√ºckungsbasen stellen den PVS-Studio-Mechanismus dar, mit dem Sie Analysatormeldungen massiv unterdr√ºcken k√∂nnen.  Wenn Sie ein Projekt zum ersten Mal √ºberpr√ºfen und mehrere Tausend Warnungen erhalten, m√ºssen Sie sie nur in eine Unterdr√ºckungsbasis einf√ºgen. Beim n√§chsten Durchlauf erhalten Sie keine Warnungen. <br><br>  Auf diese Weise k√∂nnen Sie den Code wie gewohnt weiter schreiben und √§ndern. Dabei erhalten Sie nur Meldungen zu Fehlern, die gerade im Projekt aufgetreten sind.  So k√∂nnen Sie hier und jetzt den gr√∂√üten Nutzen aus dem Analyseger√§t ziehen, ohne von alten Fehlern abgelenkt zu werden.  Ein paar Klicks - und der Analysator wird in Ihre Entwicklung √ºbernommen!  Die ausf√ºhrlichen Anweisungen dazu finden Sie <a href="https://www.viva64.com/en/m/0032/">hier</a> . <br><br>  Vielleicht fragen Sie sich: ‚ÄûWarten Sie, was ist mit den versteckten Warnungen?‚Äú Die Antwort ist ganz einfach: Vergessen Sie sie nicht und beheben Sie sie in einfachen Schritten.  Beispielsweise k√∂nnen Sie die Unterdr√ºckungsbasis in das Versionskontrollsystem laden und nur solche Festschreibungen zulassen, die die Anzahl der Warnungen nicht erh√∂hen.  So schleift Ihr ‚ÄûUnterwasser-Felsblock‚Äú fr√ºher oder sp√§ter spurlos ab. <br><br>  Okay, der Analyzer ist nun erfolgreich √ºbernommen und wir k√∂nnen fortfahren.  Was ist als n√§chstes zu tun?  Die Antwort liegt auf der Hand - arbeiten Sie mit dem Code!  Aber was braucht es, um die Konformit√§t mit der Norm zu erkl√§ren?  Wie beweisen Sie, dass Ihr Projekt MISRA entspricht? <br><br>  Tats√§chlich gibt es kein spezielles "Zertifikat", dass Ihr Code MISRA entspricht.  Standardm√§√üig sollte das Compliance-Tracking von zwei Parteien durchgef√ºhrt werden: dem Software-Kunden und dem Software-Anbieter.  Der Anbieter entwickelt eine Software, die dem Standard entspricht und die erforderlichen Dokumente ausf√ºllt.  Der Kunde muss seinerseits sicherstellen, dass die Daten aus diesen Dokumenten wahr sind. <br><br>  Wenn Sie Software f√ºr sich selbst entwickeln, liegt die Verantwortung f√ºr die Einhaltung des Standards nur bei Ihnen :) <br><br>  Um die Konformit√§t Ihres Projekts nachzuweisen, ben√∂tigen Sie im Allgemeinen Belege.  Die Liste der Dokumente, die Projektentwickler vorbereiten sollten, kann variieren, aber MISRA bietet einige als Referenz.  Schauen wir uns dieses Set genauer an. <br><br>  Sie ben√∂tigen diese Dinge, um die Standardkonformit√§t anzuwenden: <br><br><ul><li>  Das Projekt selbst, dessen Code den obligatorischen und erforderlichen Regeln entspricht </li><li>  F√ºhrungsdurchsetzungsplan </li><li>  Dokumentation zu allen Compiler- und Static Analyzer-Warnungen </li><li>  Dokumentation f√ºr alle Abweichungen von den erforderlichen Regeln </li><li>  Richtlinien-Compliance-Zusammenfassung </li></ul><br>  Der erste ist ein Durchsetzungsplan.  Dies ist Ihre wichtigste Tabelle und enth√§lt Verweise auf alle anderen Dokumente.  In der ersten Spalte finden Sie eine Liste der MISRA-Regeln. Im √úbrigen wird vermerkt, ob Abweichungen von diesen Regeln aufgetreten sind.  Diese Tabelle sieht ungef√§hr so ‚Äã‚Äãaus: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7bc/bba/a3f/7bcbbaa3f6e9115e55b721ec99c5f763.png" alt="Bild 1"></div><br>  Der Standard empfiehlt, Ihr Projekt mit mehreren Compilern zu erstellen und zwei oder mehr statische Analysatoren zu verwenden, um Ihren Code auf Kompatibilit√§t zu testen.  Wenn der Compiler oder Analyzer eine regelbezogene Warnung ausgibt, sollten Sie diese in der Tabelle notieren und die folgenden Punkte dokumentieren: Warum kann die Warnung nicht behoben werden, ob sie falsch ist oder nicht usw. <br><br>  Wenn eine der Regeln nicht von einem statischen Analyseger√§t √ºberpr√ºft werden kann, m√ºssen Sie eine manuelle Code√ºberpr√ºfung durchf√ºhren.  Dieses Verfahren muss ebenfalls dokumentiert werden. Anschlie√üend sollte ein Link zu dieser Dokumentation zum Compliance-Plan hinzugef√ºgt werden. <br><br>  Wenn sich der Compiler oder der statische Analysator als richtig herausstellt oder wenn w√§hrend des Code√ºberpr√ºfungsprozesses g√ºltige Regelverst√∂√üe vorliegen, m√ºssen Sie diese entweder korrigieren oder dokumentieren.  Nochmals, indem Sie den Link zur Dokumentation in der Tabelle anh√§ngen. <br><br>  Ein Compliance-Plan ist daher ein Dokument, das eine Dokumentation f√ºr jede in Ihrem Code festgestellte Abweichung enth√§lt. <br><br>  Lassen Sie uns kurz darauf eingehen, Abweichungen von den Regeln direkt zu dokumentieren.  Wie bereits erw√§hnt, ist eine solche Dokumentation nur f√ºr erforderliche Regeln erforderlich, da obligatorische Regeln nicht verletzt werden k√∂nnen und Beratungsregeln ohne Dokumentation verletzt werden k√∂nnen. <br><br>  Wenn Sie von der Regel abweichen m√∂chten, sollte die Dokumentation Folgendes enthalten: <br><br><ul><li>  Die Nummer der Regel, gegen die versto√üen wurde </li><li>  Der genaue Ort der Abweichung </li><li>  Die G√ºltigkeit der Abweichung </li><li>  Beweis, dass die Abweichung die Sicherheit nicht beeintr√§chtigt </li><li>  M√∂gliche Folgen f√ºr den Benutzer </li></ul><br>  Wie Sie sehen, werden Sie sich bei einem solchen Dokumentationsansatz ernsthaft fragen, ob sich der Versto√ü lohnt.  Dies geschah speziell, um nicht das Verlangen zu versp√ºren, die erforderlichen Regeln zu verletzen :) <br><br>  Nun zur Zusammenfassung der Einhaltung der Regeln.  Dieses Papier ist vielleicht am einfachsten zu f√ºllen: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b06/c76/3a8/b06c763a8c54330152d00006f25f0778.png" alt="Bild 3"></div><br>  Die mittlere Spalte wird gef√ºllt, bevor Sie mit der Arbeit am Code beginnen, und die rechte - nachdem Ihr Projekt fertig ist. <br><br>  Hier ist eine vern√ºnftige Frage: Warum sollten die Kategorien von Regeln spezifiziert werden, wenn sie bereits in der Norm selbst spezifiziert sind?  Tatsache ist, dass der Standard es erlaubt, eine Regel in eine strengere Kategorie zu "bef√∂rdern".  Zum Beispiel k√∂nnte ein Kunde Sie auffordern, eine Beratungsregel zu kategorisieren.  Eine solche "Promotion" sollte durchgef√ºhrt werden, bevor mit dem Code gearbeitet wird, und die Zusammenfassung der Einhaltung der Regeln erm√∂glicht es Ihnen, dies explizit zu vermerken. <br><br>  Bei der letzten Spalte ist es ganz einfach: Sie m√ºssen nur notieren, ob die Regel verwendet wird, und wenn ja, ob es Abweichungen davon gibt. <br><br>  Diese ganze Tabelle wird ben√∂tigt, damit Sie schnell sehen k√∂nnen, welche Priorit√§ten Regeln haben und ob der Code mit ihnen √ºbereinstimmt.  Wenn Sie pl√∂tzlich die genaue Ursache der Abweichung erfahren m√∂chten, k√∂nnen Sie sich jederzeit an den Compliance-Plan wenden und die erforderliche Dokumentation finden. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b4/c84/ca8/5b4c84ca873358cbb9b5dd6349330da4.png" alt="Abbildung 6"></div><br>  Sie haben den Code also sorgf√§ltig gem√§√ü den MISRA-Regeln geschrieben.  Sie haben einen Compliance-Plan erstellt und alles dokumentiert, was dokumentiert werden konnte, und Sie haben Ihre Compliance-Lebensl√§ufe ausgef√ºllt.  Wenn dies tats√§chlich der Fall ist, dann haben Sie einen sehr sauberen, sehr lesbaren und sehr zuverl√§ssigen Code, den Sie jetzt hassen :) <br><br>  Wo wird dein Programm jetzt leben?  In einem MRT-Ger√§t?  In einem gew√∂hnlichen Geschwindigkeitssensor oder in der Steuerung eines Weltraumsatelliten?  Ja, Sie haben einen ernsthaften b√ºrokratischen Weg durchlaufen, aber das ist keine gro√üe Sache.  Wenn es um echte Menschenleben geht, muss man immer gewissenhaft sein. <br><br>  Wenn Sie es geschafft haben, das siegreiche Ende zu erreichen, gratuliere ich Ihnen ganz herzlich: Sie schreiben hochwertigen, sicheren Code.  Danke sch√∂n <br><br><h2>  Die Zukunft der Standards </h2><br>  Zum Finale m√∂chte ich auf die Zukunft der Standards eingehen. <br><br>  Jetzt lebt und entwickelt sich Misra.  Beispiel: "Die dritte Ausgabe von MISRA C: 2012 (Erste √úberarbeitung)" ist eine √ºberarbeitete und um neue Regeln erweiterte Ausgabe, die Anfang 2019 angek√ºndigt wurde. Gleichzeitig wird die bevorstehende Ver√∂ffentlichung von "MISRA C: 2012, √Ñnderung 2 - C11" ver√∂ffentlicht Core ‚Äú, ein √ºberarbeiteter Standard des Jahres 2012, wurde angek√ºndigt.  Dieses Dokument wird Regeln enthalten, die zum ersten Mal die C-Sprachversionen von 2011 und 2018 abdecken. <br><br>  Auch MISRA C ++ entwickelt sich weiter.  Wie Sie wissen, stammt der letzte Standard von MISRA C ++ aus dem Jahr 2008, daher ist die √§lteste Version der Sprache, die es abdeckt, C ++ 03.  Aus diesem Grund gibt es einen anderen Standard, der MISRA √§hnelt und AUTOSAR C ++ hei√üt.  Es war urspr√ºnglich als Fortsetzung von MISRA C ++ gedacht und sollte sp√§tere Versionen der Sprache abdecken.  Im Gegensatz zu seinem Mastermind wird AUTOSAR C ++ zweimal im Jahr aktualisiert und unterst√ºtzt derzeit C ++ 14.  Neue Updates f√ºr C ++ 17 und C ++ 20 stehen noch aus. <br><br>  Warum habe ich √ºber einen anderen Standard gesprochen?  Fakt ist, dass beide Organisationen vor knapp einem Jahr angek√ºndigt haben, ihre Standards in einem zusammenzuf√ºhren.  MISRA C ++ und AUTOSAR C ++ werden zu einem einzigen Standard und von nun an gemeinsam weiterentwickelt.  Ich denke, das sind gro√üartige Neuigkeiten f√ºr Entwickler, die in C ++ f√ºr Mikrocontroller schreiben, und nicht weniger gro√üartige Neuigkeiten f√ºr Entwickler von statischen Analyseger√§ten.  Es gibt noch viel mehr zu tun!  :) <br><br><h2>  Fazit </h2><br>  Heute haben Sie hoffentlich viel √ºber MISRA gelernt: Lesen Sie die Geschichte seiner Entstehung, studieren Sie die Beispiele f√ºr Regeln und Konzepte des Standards, √ºberlegen Sie sich alles, was Sie f√ºr die Verwendung von MISRA in Ihren Projekten ben√∂tigen, und werfen Sie einen Blick auf die Zukunft.  Ich hoffe, Sie verstehen jetzt besser, was MISRA ist und wie man es kocht! <br><br>  In der alten Tradition werde ich hier einen Link zu unserem statischen Analysator PVS-Studio hinterlassen.  Es kann nicht nur Abweichungen vom MISRA-Standard feststellen, sondern auch <a href="https://www.viva64.com/en/examples/">eine Vielzahl</a> von Fehlern und Schwachstellen.  Wenn Sie PVS-Studio selbst ausprobieren m√∂chten, <a href="https://www.viva64.com/en/pvs-studio-download/">laden Sie</a> die Demoversion <a href="https://www.viva64.com/en/pvs-studio-download/">herunter</a> und √ºberpr√ºfen Sie Ihr Projekt. <br><br>  Hier endet mein Artikel.  Ich w√ºnsche allen Lesern ein frohes Weihnachtsfest und einen guten Rutsch ins Neue Jahr! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de482486/">https://habr.com/ru/post/de482486/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de482474/index.html">"Wie ich den Sommer verbracht habe"</a></li>
<li><a href="../de482478/index.html">Iteraptor: Bibliothek f√ºr Deep Transparent Map Redus</a></li>
<li><a href="../de482480/index.html">Kosmische Ber√ºhrungen des ausgehenden Jahres</a></li>
<li><a href="../de482482/index.html">Rollenspiele</a></li>
<li><a href="../de482484/index.html">So steigern Sie die Entwicklungseffizienz mithilfe der Constraints-Theorie</a></li>
<li><a href="../de482490/index.html">Was ist MISRA und wie kocht man es?</a></li>
<li><a href="../de482492/index.html">Permafrost-Auftauen und Treibhausgasemissionen</a></li>
<li><a href="../de482494/index.html">Umfrageergebnisse aktualisieren</a></li>
<li><a href="../de482496/index.html">Ergebnisse: 9 gro√üe technologische Durchbr√ºche von 2019</a></li>
<li><a href="../de482498/index.html">Entwicklungsgeschichte der Schnittstellen in Java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>