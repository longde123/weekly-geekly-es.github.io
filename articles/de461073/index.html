<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😮 🍴 👩🏼‍✈️ Wir verbinden Online-Karten mit dem Navigator auf dem Smartphone. Teil 3 - OverpassTurbo 🤖 👨🏿‍🤝‍👨🏼 🏇🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir verwandeln das zuvor erstellte Skript in eine API zum Anzeigen einer interaktiven Karte von der OverpassTurbo.eu-Website über die Navigationsanwen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir verbinden Online-Karten mit dem Navigator auf dem Smartphone. Teil 3 - OverpassTurbo</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461073/"><p>  Wir verwandeln das zuvor erstellte Skript in eine API zum Anzeigen einer interaktiven Karte von der OverpassTurbo.eu-Website über die Navigationsanwendung des Smartphones. </p><a name="habracut"></a><br><p>  Inhalt: </p><br><p>  1 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einführung.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Standard-Rasterkarten</a> <br>  2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fortsetzung.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schreiben eines einfachen Rasters für Vektorkarten</a> <br>  3 - Ein Sonderfall.  Wir verbinden die OverpassTurbo-Karte </p><br><h3 id="chto-takoe-overpassturbo">  Was ist OverpassTurbo? </h3><br><p> Also.  Es gibt eine Kartendatenbank wie OpenStreetMaps.  Es enthält alles: die Meere, die Konturen der Kontinente, Berge, Wälder, Straßen, Gebäude, Spielplätze und sogar Bremsschwellen.  Jedes Objekt hat einen Namen, Koordinaten und Eigenschaften.  Zum Beispiel durch die Straße - das Beschichtungsmaterial, durch das Gebäude - die Anzahl der Stockwerke und so weiter. </p><br><p>  Also.  Die meisten Karten, die heute im Internet präsentiert werden, werden auf der Grundlage dieser speziellen Datenbank generiert.  Aber was ist, wenn all diese vorgefertigten Karten nicht zu uns passen?  Sie können Ihre eigenen machen!  Nun, oder zumindest die bestehende ergänzen, was viel einfacher ist. </p><br><p>  Dies ist, was <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">OverpassTurbo.eu</a> tut.  Es ist eine Online-IDE.  Mit ihm können Sie die OSM-Datenbank abfragen.  Wir klicken auf die Schaltfläche <strong>Start</strong> , die Anfrage geht an die Datenbank und nach einer Weile kehren die Daten zu uns zurück.  OverpassTurbo visualisiert diese Daten in Form von Vektormarkierungen und Linien auf der Hintergrundebene - eine Karte von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">OpenSteerMap.org</a> . </p><br><p>  Als Beispiel dafür, was Sie mit OverpassTurbo tun können, möchte ich Ihnen das Skript zeigen, das mir am besten gefällt.  Es wurde von einem Benutzer unter dem Spitznamen Erelen geschrieben.  Also: Dieses Skript zeichnet auf der Karte verschiedene Trinkwasserquellen und deren Namen auf.  Meiner Meinung nach ist es sehr nützlich und sehr klar.  Um zu sehen, wie dieses Skript funktioniert, folgen Sie einfach dem Link und klicken Sie auf <strong>Start</strong> .  (Wenn die Site einen Fehler ausgibt, gehen Sie durch das VPN und versuchen Sie es erneut.) </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">https://overpass-turbo.eu/s/z95</a> </p><br><p><img src="https://habrastorage.org/webt/64/fa/g4/64fag4skex-vyoy75agsaqvt0_w.png"></p><br><p>  Oder hier ist ein Skript, das ich bereits für meine eigenen Bedürfnisse erstellt habe.  Damit finden Sie leicht gute Joggingstrecken in unbekannten Parks.  Zu diesem Zweck hebt das Skript hell gepflegte Schotterwege hervor: Für meinen Geschmack ist es am bequemsten, auf diesen zu laufen.  Asphalt ist weiß markiert.  Gewöhnliche Feldwege in Schwarz.  Alle Pfade mit dem Tag „schwer zu erreichen“ oder „schlechte Beschichtungsqualität“ sind jedoch mit einer unauffälligen gestrichelten Linie gekennzeichnet: Um seltener zu stolpern, versuche ich, sie zu vermeiden.  Im Allgemeinen wird die Karte so erstellt, dass Sie einfach eine Wegbeschreibung entlang der auffälligsten Linien erhalten.  Und damit diese Route am Ende erfolgreich ist. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">http://overpass-turbo.eu/s/KXU</a> </p><br><p><img src="https://habrastorage.org/webt/gi/8n/pa/gi8npad8i2az-pu8q2x2gb7xziw.png"></p><br><p>  Mit diesem Tool können Sie die Karte mit beliebigen Daten ergänzen.  Und ich stelle fest, dass dies sehr, sehr aufregend ist.  Aber in diesem Artikel geht es nicht darum.  Wenn Sie sich für dieses Thema interessieren, können Sie sich hier mit den Grundlagen von Overpass vertraut machen. </p><br><p>  Bevor wir jedoch zum Code übergehen, werfen wir zunächst einen Blick auf das Endergebnis, das wir erhalten sollten. </p><br><h3 id="instrukciya-dlya-polzovateley-kak-polzovatsya-nashim-api">  Anleitung für Benutzer: Verwendung unserer API </h3><br><p>  Also.  Angenommen, Sie haben bereits ein vorgefertigtes Skript für OverpassTurbo, dessen Ergebnisse Sie auf Ihrem Smartphone sehen möchten.  Und das nicht im Browser, sondern im Navigator.  Bringen Sie dazu Ihr Skript in das folgende Format. </p><br><pre><code class="css hljs"><span class="hljs-selector-attr"><span class="hljs-selector-attr">[bbox:{{bbox}}]</span></span>; ( //     <span class="hljs-selector-tag"><span class="hljs-selector-tag">node</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[amenity=waste_basket]</span></span>; ); <span class="hljs-selector-tag"><span class="hljs-selector-tag">out</span></span>;&gt;;<span class="hljs-selector-tag"><span class="hljs-selector-tag">out</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">skel</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">qt</span></span>;</code> </pre> <br><p>  Insbesondere interessiert uns die erste Zeile: Unsere Anwendung wird sie ersetzen. </p><br><p>  Klicken Sie anschließend auf die Schaltfläche <strong>Teilen</strong> .  Deaktivieren Sie unbedingt den Aktivierungsstatus <strong>des angezeigten Kartenfelds</strong> . </p><br><p><img src="https://habrastorage.org/webt/vi/75/ug/vi75ughpyooqulnwtesjmeftlwk.png"></p><br><p>  Kopieren Sie danach den Link.  Wir gehen beispielsweise davon aus, dass Ihr kopierter Link folgendermaßen aussieht: </p><br><p> <code>http://overpass-turbo.eu/s/KEy</code> </p> <br><p>  Schauen Sie sich jetzt unsere API an </p><br><p> <code>https://anygis.herokuapp.com/mapshoter/overpass/{x}/{y}/{z}/{crossZoom}?script={script}</code> </p> <br><p>  Mit <strong>{x}, {y}</strong> und <strong>{z}</strong> scheint alles klar zu sein: Dies sind die Koordinaten der gewünschten Kachel. </p><br><p>  Anstelle von <strong>{script} müssen</strong> Sie Ihre Skript- <strong>ID</strong> ersetzen.  In unserem Beispiel <strong>s / Key</strong> . </p><br><p>  Aber was ist <strong>{crossZoom}</strong> ?  Angenommen, Sie haben 15. Wenn Sie dann eine Kachel für einen Zoom von weniger als 15 anfordern, sendet der Server keine langsame Anforderung an OverpassTurbo, sondern leitet Sie einfach mit einer leeren OpenStreetMaps-Hintergrundebene zur Karte weiter (die fast sofort geladen wird).  Dieser Ansatz ist erforderlich, damit Sie die Karte bei Bedarf entfernen, schnell zum gewünschten Ort scrollen, zoomen und warten können.  Warten Sie, bis OverpassTurbo eine Karte mit den Ergebnissen generiert. </p><br><p>  Ich hoffe, das Grundprinzip ist klar.  Schauen Sie sich nun die ausgefüllte URL für unsere Anfrage an.  Ich denke, die Verwendung unserer API wird Ihnen jetzt nicht schwer fallen: Ersetzen Sie einfach <strong>s / KEy</strong> durch die <strong>ID</strong> Ihres Skripts. </p><br><p> <code>https://anygis.herokuapp.com/mapshoter/overpass/{x}/{y}/{z}/15?script=s/KEy</code> </p> <br><p>  In der Zwischenzeit werden wir sehen, wie eine solche Anwendung implementiert wird. </p><br><h3 id="scenariy-3--poisk-s-pomoschyu-url-i-kesha-brauzera">  Szenario 3 - Suche mithilfe der URL und des Browser-Cache </h3><br><p>  Also.  Beginnen wir mit der Datei <strong>router.js</strong> .  Lassen Sie unsere Methode <strong>crossZoom-</strong> und <strong>Skriptparameter</strong> akzeptieren.  Und dann geben wir sie an den Arbeiter weiter.  Wir fügen auch eine Option hinzu, die das Skript unterbricht und den Benutzer zu einer anderen Site umleitet, wenn der angeforderte Zoom zu niedrig ist. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'express'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PORT = process.env.PORT || <span class="hljs-number"><span class="hljs-number">5000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express() app.listen( PORT, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log( <span class="hljs-string"><span class="hljs-string">'    '</span></span>, PORT ) }) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { StaticPool } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'node-worker-threads-pool'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> worker = <span class="hljs-string"><span class="hljs-string">"./worker.js"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> workersPool = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StaticPool({ <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-attr"><span class="hljs-attr">task</span></span>: worker, <span class="hljs-attr"><span class="hljs-attr">workerData</span></span>: <span class="hljs-string"><span class="hljs-string">"no"</span></span> }) <span class="hljs-comment"><span class="hljs-comment">//     app.get( '/:x/:y/:z/:crossZoom', async ( req, res, next ) =&gt; { const x = req.params.x const y = req.params.y const z = req.params.z const crossZoom = req.params.crossZoom const scriptName = req.query.script //     if ( Number( z ) &lt; Number( crossZoom ) ) { res.redirect( `http://tile.openstreetmap.org/${z}/${x}/${y}.png` ) } //      const screenshot = await workersPool.exec( { x, y, z, scriptName } ) const imageBuffer = Buffer.from( screenshot, 'base64' ) res.writeHead( 200, { 'Content-Type': 'image/png', 'Content-Length': imageBuffer.length }) res.end( imageBuffer ) })</span></span></code> </pre><br><p>  Die Datei <strong>worker.js</strong> hat sich nicht wesentlich geändert.  Leiten Sie die neuen Variablen einfach weiter. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { parentPort, workerData } = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'worker_threads'</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> puppeteer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'puppeteer'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> mapshoter = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'./mapshoter'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> browser = <span class="hljs-string"><span class="hljs-string">"empty"</span></span> parentPort.on( <span class="hljs-string"><span class="hljs-string">"message"</span></span>, ( params ) =&gt; { doMyAsyncCode( params ) .then( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> result </span></span></span><span class="hljs-function">) =&gt;</span></span> { parentPort.postMessage( result ) }) }) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doMyAsyncCode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> params </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> prepareEnviroment() <span class="hljs-comment"><span class="hljs-comment">//   const screenshot = await mapshoter.makeTile( params.x, params.y, params.z, params.scriptName, browser ) return screenshot } async function prepareEnviroment( ) { if ( browser === "empty" ) { const herokuDeploymentParams = {'args' : ['--no-sandbox', '--disable-setuid-sandbox']} browser = await puppeteer.launch( herokuDeploymentParams ) } }</span></span></code> </pre> <br><p>  Schauen wir uns jetzt <strong>mapshoter.js an</strong> .  Schauen Sie sich zuerst den Code an: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> puppeteer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'puppeteer'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> geoTools = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">'./geoTools'</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeTile</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> x, y, z, scriptName, browserLink </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      const runButtonSelector = '#navs &gt; div &gt; div.buttons &gt; div:nth-child(1) &gt; a:nth-child(1)' const codeEditorSelector = '#editor &gt; div.CodeMirror.CodeMirror-wrap &gt; div:nth-child(1) &gt; textarea' //          const coordinates = geoTools.getAllCoordinates( x, y, z ) const bBox = `[bbox:${coordinates.bBox.latMin}, ${coordinates.bBox.lonMin}, ${coordinates.bBox.latMax}, ${coordinates.bBox.lonMax}];` const centerCoordinates = `${coordinates.center.lat};${coordinates.center.lon};${z}` //      const browser = await browserLink const page = await browser.newPage() await page.setViewport( { width: 850, height: 450 } ) //  ,   : //      await page.waitFor( randomInt( 0, 500 ) ) //        URL var pageUrl = `http://overpass-turbo.eu/?C=${centerCoordinates}` await page.goto( pageUrl, { waitUntil: 'networkidle2', timeout: 10000 } ) //       URL pageUrl = 'http://overpass-turbo.eu/' + scriptName await page.goto( pageUrl, { waitUntil: 'networkidle0', timeout: 20000 } ) //      await page.focus( codeEditorSelector ) //        , //     await page.keyboard.type( bBox + ' //' ) // ,  -IDE   await page.waitFor( 100 ) //     - await page.click( runButtonSelector ) // ,      . //     . await page.waitForFunction(() =&gt; !document.querySelector('body &gt; div.modal &gt; div &gt; ul &gt; li:nth-child(1)'), {polling: 'mutation'}); await page.waitFor( 1000 ) //    const cropOptions = { fullPage: false, clip: { x: 489, y: 123, width: 256, height: 256 } } const screenshot = await page.screenshot( cropOptions ) //   await page.close() return screenshot } //       function randomInt( low, high ) { return Math.floor( Math.random() * ( high - low ) + low ) } module.exports.makeTile = makeTile</span></span></code> </pre> <br><p>  In diesem Skript werden wir aus Gründen der Abwechslung zunächst mit gewöhnlichen Elementselektoren (die nicht <strong>XPath sind</strong> ) arbeiten.  Wie man sie findet, wurde in einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">früheren Artikel beschrieben</a> . </p><br><p>  Als nächstes erhalten wir die Koordinaten.  Nur dieses Mal werden neben den <strong>Mittelkoordinaten</strong> auch die Koordinaten der <strong>Kachelränder</strong> ( <strong>bBox</strong> ) benötigt. </p><br><p>  Starten Sie als Nächstes den Browser.  Hier ist alles typisch.  Bevor Sie jedoch mit dem Laden der Seite fortfahren, lassen Sie das Skript eine zufällige Zeitspanne von 0 bis 500 ms warten.  Damit wir nicht zu viele identische Anfragen gleichzeitig von uns erhalten und nicht gebannt werden. </p><br><p>  Danach gehen wir zu der Site unter der URL, zu der die Koordinaten der Kachelmitte hinzugefügt werden.  Infolgedessen befindet sich der gewünschte Ort in der Mitte der Karte. </p><br><p>  Gehen Sie danach zu einer anderen URL.  Diesmal mit der <strong>ID</strong> unseres Skripts.  Infolgedessen wird unser Skript im Text des Code-Editors angezeigt. </p><br><p>  (Bitte beachten Sie, dass sich die Karte verschieben würde, wenn Sie beim Kopieren der URL für unser Skript im Menü " <strong>Teilen"</strong> <strong>das</strong> Kontrollkästchen " <strong>Status der Karte speichern"</strong> nicht deaktivieren würden. </p><br><p>  Und jetzt beantworte ich die Frage vernünftig: Warum gehen wir zweimal zur URL, dh wir geben zweimal für das Laden dieser Website aus?  Ich antworte.  Erstens konnte ich nicht finden, wie das Laden von Skripten und der Übergang zu den angegebenen Koordinaten in einer URL-Anforderung kombiniert werden können.  Zweitens, weil Puppeteer aus irgendeinem Grund Text extrem langsam druckt und mit den Oberflächenelementen auf dieser Site arbeitet.  Eineinhalb Minuten können drucken!  Die Idee, die Koordinaten in das Suchfeld einzufügen und dann auf die Zoom-Schaltflächen zu klicken, wie wir es im vorherigen Artikel getan haben, wurde abgelehnt.  Das Doppelklicken auf den Link war daher viel schneller als all dies.  Vielleicht ist dies ein Fehler, der früher oder später behoben wird, aber im Moment arbeiten wir mit dem, was ist. </p><br><p>  Leider können Sie die Texteingabe nicht vollständig verlassen.  Wir müssen die erste Zeile im Code-Editor-Fenster ersetzen.  Im Moment berichtet sie, dass es notwendig ist, Informationen aus der Datenbank für das gesamte Gebiet herunterzuladen, das derzeit auf dem Bildschirm angezeigt wird. </p><br><pre> <code class="javascript hljs">[bbox:{{bbox}}];</code> </pre> <br><p>  Wir werden es durch die Koordinaten der Ränder der Kachel ersetzen.  Dies dient dazu, nicht zu viel Zeit mit dem Herunterladen aus der Datenbank zu verschwenden.  Das Skript druckt also in der ersten Zeile so etwas wie diesen Text: </p><br><pre> <code class="javascript hljs">[bbox:<span class="hljs-number"><span class="hljs-number">55.6279</span></span>, <span class="hljs-number"><span class="hljs-number">37.5622</span></span>, <span class="hljs-number"><span class="hljs-number">55.6341</span></span>, <span class="hljs-number"><span class="hljs-number">37.5732</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//</span></span></code> </pre> <br><p>  Um die ursprüngliche Zeile nicht löschen zu müssen (oft durch langsames Drücken von <strong>Entf</strong> ), kommentieren wir sie einfach.  Auf diese Weise reduzieren wir den Zeitaufwand für die Texteingabe und die Ladezeit aus der Datenbank so weit wie möglich.  Infolgedessen sieht die erste Zeile folgendermaßen aus: </p><br><pre> <code class="javascript hljs">[bbox:<span class="hljs-number"><span class="hljs-number">55.6279</span></span>, <span class="hljs-number"><span class="hljs-number">37.5622</span></span>, <span class="hljs-number"><span class="hljs-number">55.6341</span></span>, <span class="hljs-number"><span class="hljs-number">37.5732</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//[bbox:{{bbox}}];</span></span></code> </pre> <br><p>  Danach muss unser Skript auf die Schaltfläche <strong>Start</strong> klicken, etwas warten, einen Screenshot der Karte machen und ihn an den Benutzer senden.  Und alles: Die Aufgabe ist erledigt! </p><br><p>  Wenn Sie sich ein Beispiel für das resultierende Skript ansehen möchten, können Sie auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">diesen Link</a> klicken. </p><br><h3 id="zaklyuchenie">  Fazit </h3><br><p>  Nun, da es nicht schwer anzunehmen ist, funktioniert diese Version des Skripts noch langsamer als die vorherigen.  Immerhin verbringt die Site jetzt Zeit mit einer Anfrage aus einer Datenbank eines Drittanbieters.  Und an sich funktioniert es nicht zu schnell.  Diese Methode macht es jedoch extrem einfach (wenn auch langsam), eine einzigartige, angepasste Karte zu erhalten.  Und darüber hinaus basierend auf den neuesten Daten.  Und das kann manchmal sehr nützlich sein.  Es lohnt sich also, eine solche Methode in Betracht zu ziehen. </p><br><p>  Und das ist alles.  Für alle Fälle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">möchte</a> ich Sie daran erinnern, dass auf meiner <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">AnyGIS-</a> Website <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">ein</a> Archiv mit vorgefertigten Voreinstellungen für die Navigatoren Locus, OsmAnd und GuruMaps vorhanden ist.  Es gibt sowohl Rasterkarten als auch "gerasterte" Vektorkarten, für deren Anzeige die in diesen Artikeln beschriebene Anwendung verwendet wird.  Komm und benutze. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de461073/">https://habr.com/ru/post/de461073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de461061/index.html">Magnesiumlegierungen, Zwillingsgrenzen und Entmischung</a></li>
<li><a href="../de461063/index.html">Interaktion von R mit Datenbanken am Beispiel von Microsoft SQL Server und anderen DBMS</a></li>
<li><a href="../de461067/index.html">Die 65 wichtigsten SQL-Fragen aus Vorstellungsgesprächen, auf die Sie 2019 vorbereitet sein sollten. Teil I.</a></li>
<li><a href="../de461069/index.html">Nobel-IP-Außenkameras: Tests, Technologien und Funktionen von Ivideon-Videoüberwachungssystemen</a></li>
<li><a href="../de461071/index.html">Optimierung von Datenbankabfragen am Beispiel eines B2B-Service für Builder</a></li>
<li><a href="../de461075/index.html">Business Intelligence. IT-Objekte, Komponenten, Tools</a></li>
<li><a href="../de461077/index.html">Wie werden Pentester gekocht? Eingangstests für Praktikanten im Bereich digitale Sicherheit</a></li>
<li><a href="../de461079/index.html">Stadt ohne Stau</a></li>
<li><a href="../de461081/index.html">Der Tag, an dem Dodo aufgehört hat. Asynchrones Skript</a></li>
<li><a href="../de461083/index.html">Schreiben von Software mit der Funktionalität von Client-Server-Dienstprogrammen Windows, Teil 02</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>