<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¥ ğŸ€ âœ‰ï¸ é—ä¼ ç®—æ³•ï¼ˆæˆ–è€…å®¢æˆ·æ°¸è¿œæ˜¯ç‹è€…-å¸¸å¸¸æ˜¯å‚»ç“œï¼‰ ğŸŒ’ ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨ğŸ¼ âœğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ï¼ˆç¬¬2ç‰ˆï¼Œä¿®æ­£äº†é”™åˆ«å­—-å¸Œæœ›å¤§å®¶...ï¼‰ 

 å“ˆHaï¼ 

 ç°åœ¨ä»–ååœ¨é‚£é‡Œï¼Œä¸ºä¸€ä¸ªæœ‹å‹åˆ¶ä½œäº†é—ä¼ ç®—æ³•çš„åŸå‹ã€‚ å¯å‘åˆ†äº«ï¼Œä»¥åŠå…¶ä»–ä¸€äº›æƒ³æ³•... 

 ç»™å®šï¼ˆå®¢æˆ·è®¢è´­ï¼‰ï¼šåœ¨æŸä¸ªç‹å›½ä¸­ï¼Œä»“åº“æœ‰100ä¸ªç‰¢æˆ¿ã€‚ è´§ç‰©åœ¨é‡Œé¢ã€‚ å¦‚ä½•å–æ•°é‡Xä»¥ä¾¿å°†æ‰€æœ‰æ¶‰åŠçš„å•å…ƒæ’ç©ºï¼Ÿ å—¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨å…·æœ‰ä¸€ä¸ªå•å…ƒæ ¼ç±»å‹[3...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>é—ä¼ ç®—æ³•ï¼ˆæˆ–è€…å®¢æˆ·æ°¸è¿œæ˜¯ç‹è€…-å¸¸å¸¸æ˜¯å‚»ç“œï¼‰</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465797/"> ï¼ˆç¬¬2ç‰ˆï¼Œä¿®æ­£äº†é”™åˆ«å­—-å¸Œæœ›å¤§å®¶...ï¼‰ <br><br> å“ˆHaï¼ <br><br> ç°åœ¨ä»–ååœ¨é‚£é‡Œï¼Œä¸ºä¸€ä¸ªæœ‹å‹åˆ¶ä½œäº†é—ä¼ ç®—æ³•çš„åŸå‹ã€‚ å¯å‘åˆ†äº«ï¼Œä»¥åŠå…¶ä»–ä¸€äº›æƒ³æ³•... <br><br> ç»™å®šï¼ˆå®¢æˆ·è®¢è´­ï¼‰ï¼šåœ¨æŸä¸ª<s>ç‹å›½ä¸­ï¼Œ</s>ä»“åº“æœ‰100ä¸ªç‰¢æˆ¿ã€‚ è´§ç‰©åœ¨é‡Œé¢ã€‚ å¦‚ä½•å–æ•°é‡Xä»¥ä¾¿å°†æ‰€æœ‰æ¶‰åŠçš„å•å…ƒæ’ç©ºï¼Ÿ å—¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨å…·æœ‰ä¸€ä¸ªå•å…ƒæ ¼ç±»å‹[34ã€10ã€32ã€32ã€33ã€41ã€44ã€4ã€28ã€23ã€22ã€28ã€29ã€14ã€28ã€15ã€38ã€49ã€30ã€24ï¼Œ 18ã€9ã€15ã€8ã€17ã€9ã€2ã€7ã€30ã€29ã€29ã€2ã€28ã€23ã€19ã€4ã€15ã€30ã€38ã€3ã€14ã€21ã€43ã€50ã€29ï¼Œ 14ï¼Œ17ï¼Œ12ï¼Œ25ï¼Œ15ï¼Œ23ï¼Œ28ï¼Œ47ï¼Œ38ï¼Œ29ï¼Œ7ï¼Œ36ï¼Œ45ï¼Œ25ï¼Œ6ï¼Œ25ï¼Œ11ï¼Œ10ï¼Œ1ï¼Œ19ï¼Œ37ï¼Œ24ï¼Œ27ï¼Œ50ï¼Œ12ï¼Œ 1ï¼Œ1ï¼Œ44ï¼Œ22ï¼Œ48ï¼Œ13ï¼Œ46ï¼Œ49ï¼Œ11ï¼Œ33ï¼Œ29ï¼Œ4ï¼Œ19ï¼Œ33ï¼Œ12ï¼Œ3ï¼Œ47ï¼Œ27ï¼Œ26ï¼Œ45ï¼Œ40ï¼Œ37ï¼Œ21ï¼Œ2ï¼Œ8ï¼Œ 41ï¼Œ5ï¼Œ1ï¼Œ9ï¼Œ5]-å¦‚ä½•æ‹¨å·ï¼Œä¾‹å¦‚40 <br><br> å¥½å§ï¼Œä½ å¯ä»¥ç ´äº§ï¼Œè‚¯å®šæœ‰ä»€ä¹ˆèªæ˜çš„ï¼Œä½†æ˜¯ä½ å¯ä»¥ç”¨é—ä¼ ç®—æ³•æ¥è§£å†³... <br><a name="habracut"></a><br><br> ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦åŠ¨è„‘ç­‹ï¼Œå› ä¸ºå¦‚æœæ‚¨åªæµè§ˆåˆ—è¡¨ï¼Œåˆ™éœ€è¦ä»å‰ä¸¤ä¸ªå•å…ƒæ ¼ä¸­æå–-ä½†æ˜¯ï¼Œç¬¬äºŒä¸ªå°†æ˜¯å…¶ä½™çš„ã€‚ è€Œä¸”æ‚¨ä¸å¿…èµ°å¤ªè¿œã€‚ ä½†æ˜¯è¦çŸ¥é“ï¼Œå®¢æˆ·æ˜¯ä¸€ä½å®Œç¾ä¸»ä¹‰è€…ï¼Œä»–å¸Œæœ›å®ƒåƒè¯æˆ¿ä¸€æ ·ã€‚ å¤§æ¦‚åœ¨ä¸€ä¸ªå€¼å¾—é‡‘é‡çš„ç‰¢æˆ¿ä»“åº“é‡Œã€‚ å®ƒå‘ç”Ÿäº†ã€‚ <br><br> ç¬¬äºŒä¸ªé—®é¢˜ï¼šå¦‚æœæŒ‰å‡åºæ’åºï¼Œåˆ™è‚¯å®šå¯ä»¥åˆ·æ›´å¤šçš„å•å…ƒæ ¼...åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæœ‰å¾ˆå¤šå•å…ƒæ ¼å°‘äºåä¸ªå•å…ƒæ ¼ã€‚ å¯èƒ½ï¼Œå®¢æˆ·ä¹Ÿä¸æƒ³ï¼›ï¼‰æˆ‘ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„äººï¼šæˆ‘æ˜¯è€æ¿ã€‚ ä»–ä»¬å‘Šè¯‰æ‚¨-è¿™æ ·åšï¼Œä¸è¦é—®é—®é¢˜ã€‚ <br><br>  ï¼ˆå—¯ï¼Œä¸æ˜¯æˆ‘çš„å®¢æˆ·ï¼Œå¦åˆ™æˆ‘å°†å†æ¬¡å¯¹äººçš„æ€æƒ³å¤±å»ä¿¡å¿ƒ...ï¼‰ <br><br> å¥½å§ï¼Œä¸Šå¸ä¸ä»–åŒåœ¨ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä¼˜å…ˆçº§...ç„¶åæˆ‘ä»¬å°†è®¨è®ºé—ä¼ ç®—æ³•-æˆ‘ä»¬å¿…é¡»ä»¥æŸç§æ–¹å¼è§£å†³è¯¥é—®é¢˜...æˆ‘ä»¬å°†ç”¨Javaç¼–å†™ã€‚ <br><br> å¯¹äºé‚£äº›ä»¥å‰ä»æœªçœŸæ­£å¬è¯´è¿‡çš„äººï¼šæ¨¡ä»¿è‡ªç„¶æ¯äº²ã€‚ <br><ol><li> ç¼–ç è¡Œä¸º </li><li> æˆ‘ä»¬å€ŸåŠ©åˆé€‚çš„åŸºå‡†æ¥æ£€æŸ¥æ¯ä¸ªé€‰é¡¹çš„å·¥ä½œæƒ…å†µ </li><li> æœ€å¥½åœ°å°†å…¶å±æ€§ä¼ é€’ç»™ä¸‹ä¸€ä»£ </li></ol><br><br> åœ¨è‡ªç„¶ç•Œçš„æœ€åä¸€æ­¥ï¼Œæœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼šäº¤æ¢ï¼ˆæŸ“è‰²ä½“ç›¸åŒéƒ¨åˆ†ä¹‹é—´çš„å­—ç¬¦äº¤æ¢ï¼‰å’Œçªå˜ï¼ˆé—ä¼ å¯†ç çš„è‡ªå‘æ”¹å˜ï¼‰ã€‚ å—¨ï¼Œé«˜ä¸­ï¼›ï¼‰ <br><br> ä»…æ­¤è€Œå·²ã€‚ æˆ‘ä»¬å°†ç¼–ç ä»å“ªä¸ªå•å…ƒæ ¼è·å–ï¼Œä»å“ªä¸ªå•å…ƒæ ¼è·å–ã€‚ æˆ‘ä»¬æœ‰100ä¸ªå•å…ƒï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„æŸ“è‰²ä½“å°†åŒ…å«100ä¸ªçœŸ/å‡å…ƒç´ ï¼Œä¸ºæ­¤æˆ‘é€‰æ‹©äº†Stringï¼Œå…¶ä¸­å°†å†™å…¥é›¶å’Œä¸€ã€‚ å½“ç„¶ï¼Œä»–ä»¬å°†æ˜¯100ã€‚ <br><br> åŸºå‡†æµ‹è¯•æ˜¯æ­¤è¿‡ç¨‹ä¸­æœ€é‡è¦çš„äº‹æƒ…ã€‚ å¤§è‡ªç„¶æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªåˆ©åŸºå¸‚åœºï¼Œè€Œè®¡ç®—æœºè‡ªç„¶å°†åœ¨åŸºå‡†æµ‹è¯•ä¸­å¯»æ‰¾ä¸€ä¸ªæ¼æ´ï¼Œä»¥æ„šå¼„å®ƒå¹¶ç”Ÿå­˜ä¸‹æ¥ã€‚ å¤ªå¥½äº†ï¼Œè¯´å®è¯... <br><br> è¯´äº†è¿™ä¹ˆå¤šï¼Œåƒè¿™æ ·ï¼š <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">benchmark</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String chromosome, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> verbose)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sum = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>[] cArr = chromosome.toCharArray(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cnt_bins; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cArr[i] == <span class="hljs-string"><span class="hljs-string">'1'</span></span>) { sum += stock[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (verbose) System.out.println(<span class="hljs-string"><span class="hljs-string">"storage bin "</span></span> + i + <span class="hljs-string"><span class="hljs-string">":\t+"</span></span> + stock[i] + <span class="hljs-string"><span class="hljs-string">"\t= "</span></span> + sum); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sum == target_qty) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Math.abs(target_qty - sum); }</code> </pre> <br><br> è¿™ä¸ªæƒ³æ³•æ˜¯ï¼Œæˆ‘ä»¬ç¦»æœŸæœ›çš„æ•°å­—40è¶Šè¿œï¼Œæ•ˆæœè¶Šå·®ã€‚ å¦‚æœæˆ‘ä»¬è·å¾—40åˆ†ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æŸ“è‰²ä½“ä¸Šä¸ä¼šèµ°å¾—æ›´è¿œï¼Œæˆ‘ä»¬èµ¢äº†ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬å°†æŒ‰å‡åºæ’åº-ç½šåˆ†è¶Šå°‘è¶Šå¥½ã€‚ <br><br> ç¬¬ä¸€ä»£æ˜¯éšæœºåˆ›å»ºçš„ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// create 1st generation for (int i = 0; i &lt; generation_size; i++) { StringWriter sw = new StringWriter(); for (int j = 0; j &lt; cnt_bins; j++) { // take stock from this bin? sw.append(rnd.nextBoolean() ? "1" : "0"); } chromosomes.add(sw.toString()); sw.close(); }</span></span></code> </pre> <br><br> å®é™…ä¸Šï¼Œç”±äºé—ä¼ ç®—æ³•å¯ä»¥è¾¾åˆ°ç›®æ ‡ï¼Œä½†å¹¶ä¸æ€»æ˜¯å¯ä»¥å®ç°ï¼Œå› æ­¤é™åˆ¶ä¸–ä»£æ•°å¾ˆé‡è¦ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> generationNo = <span class="hljs-number"><span class="hljs-number">0</span></span>; generationNo &lt; maxGenerationCnt; generationNo++) { <span class="hljs-comment"><span class="hljs-comment">// evaluate List&lt;SimpleEntry&lt;String, Integer&gt;&gt; evaluated = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; chromosomes.size(); i++) { evaluated.add( new SimpleEntry&lt;String, Integer&gt;(chromosomes.get(i), benchmark(chromosomes.get(i), false))); } // ...    , .  ... } System.out.println("No solution found after " + maxGenerationCnt + " iterations");</span></span></code> </pre> <br><br> æ’åºï¼Œç•™ä¸‹æœ€å¥½çš„ï¼š <br><br><pre> <code class="java hljs">... <span class="hljs-comment"><span class="hljs-comment">// sort evaluated = evaluated.stream().sorted((e1, e2) -&gt; Integer.compare(e1.getValue(), e2.getValue())) .collect(Collectors.toList()); System.out.println("Generation " + generationNo + "; Best / last parent / worst: " + evaluated.get(0).getValue() + " / " + evaluated.get(best_size).getValue() + " / " + evaluated.get(evaluated.size() - 1).getValue()); if (evaluated.get(0).getValue() == 0) { System.out.println("Solution found"); benchmark(evaluated.get(0).getKey(), true); System.exit(0); } // leave only the best evaluated = evaluated.subList(0, best_size); ...</span></span></code> </pre><br><br> æˆ‘ä»¬ç¹æ®–ç¹æ®–ï¼Œæ¢å¤äººå£è§„æ¨¡ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬éšæœºé€‰æ‹©çˆ¶æ¯ï¼Œç»„åˆç›¸åŒçš„ç¬¦å·ï¼ˆå¦‚æœå¹¸è¿çš„è¯ï¼Œè¯·å‚é˜…äº¤æ¢æ ‡å¿—ï¼‰ï¼Œå˜å¼‚ï¼ˆå˜å¼‚æ ‡å¿—ï¼‰ï¼Œç­‰å¾…å¥‡è¿¹... <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// replication List&lt;String&gt; parents = evaluated.stream().map(e -&gt; e.getKey()).collect(Collectors.toList()); chromosomes.clear(); while (chromosomes.size() &lt; generation_size) { int parent1 = rnd.nextInt(evaluated.size()); int parent2 = rnd.nextInt(evaluated.size()); char[] cArr1 = parents.get(parent1).toCharArray(); char[] cArr2 = parents.get(parent2).toCharArray(); for (int i = 0; i &lt; cnt_bins; i++) { boolean exchange = rnd.nextDouble() &lt; exchange_rate; if (exchange) { char c1 = cArr1[i]; char c2 = cArr2[i]; // exchange both values cArr1[i] = c2; cArr2[i] = c1; } // mutation boolean mutation = rnd.nextDouble() &lt; mutation_rate; if (mutation) { cArr1[i] = rnd.nextBoolean() ? '1' : '0'; } mutation = rnd.nextDouble() &lt; mutation_rate; if (mutation) { cArr2[i] = rnd.nextBoolean() ? '1' : '0'; } } chromosomes.add(new String(cArr1)); chromosomes.add(new String(cArr2)); }</span></span></code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">å¥½å§ï¼Œè¿™æ˜¯ç»™ä½ ä¸€ä¸ªå¥‡è¿¹ï¼š</b> <div class="spoiler_text"> ç›®æ ‡å€¼ï¼š40 <br> åº“å­˜ï¼š[34ã€10ã€32ã€32ã€33ã€41ã€44ã€4ã€28ã€23ã€22ã€28ã€29ã€14ã€28ã€15ã€38ã€49ã€30ã€24ã€18ã€9ã€15ã€8 ï¼Œ17ã€9ã€2ã€7ã€30ã€29ã€29ã€2ã€28ã€23ã€19ã€4ã€15ã€30ã€38ã€3ã€14ã€21ã€43ã€50ã€29ã€14ã€17ã€12ã€25 ï¼Œ15ï¼Œ23ï¼Œ28ï¼Œ47ï¼Œ38ï¼Œ29ï¼Œ7ï¼Œ36ï¼Œ45ï¼Œ25ï¼Œ6ï¼Œ25ï¼Œ11ï¼Œ10ï¼Œ1ï¼Œ19ï¼Œ37ï¼Œ24ï¼Œ27ï¼Œ50ï¼Œ12ï¼Œ1ï¼Œ1ï¼Œ44ï¼Œ22 ï¼Œ48ã€13ã€46ã€49ã€11ã€33ã€29ã€4ã€19ã€33ã€12ã€3ã€47ã€27ã€26ã€45ã€40ã€37ã€21ã€2ã€8ã€41ã€5ã€1ã€9 ï¼Œ5] <br> ç¬¬0ä»£ï¼› æœ€å¥½/æœ€åä¸€ä¸ªçˆ¶æ¯/æœ€åï¼š705/991/1580 <br> ç¬¬1ä»£ï¼› æœ€å¥½/æœ€åä¸€ä¸ªçˆ¶æ¯/æœ€å·®ï¼š576/846/1175 <br> ç¬¬2ä»£ï¼› æœ€å¥½/æœ€åä¸€ä¸ªçˆ¶æ¯/æœ€åï¼š451/722/1108 <br> ç¬¬ä¸‰ä»£ï¼› æœ€å¥½/æœ€åä¸€ä¸ªçˆ¶æ¯/æœ€å·®ï¼š0/613/904 <br> æ‰¾åˆ°è§£å†³æ–¹æ¡ˆ <br> å‚¨ç‰©ç®±7ï¼š+4 = 4 <br> å‚¨ç‰©ç®±10ï¼š+22 = 26 <br> å‚¨ç‰©ç®±13ï¼š+14 = 40 <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">è¿™æ˜¯æ•´ä¸ªä»£ç </b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> ypk; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.StringWriter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.AbstractMap.SimpleEntry; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.stream.Collectors; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.ArrayList; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Arrays; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Random; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">YPK</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> generation_size = <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> best_size = <span class="hljs-number"><span class="hljs-number">200</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cnt_bins = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> max_stock = <span class="hljs-number"><span class="hljs-number">50</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> exchange_rate = .<span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> mutation_rate = .<span class="hljs-number"><span class="hljs-number">01</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Random rnd = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> target_qty = rnd.nextInt(cnt_bins * max_stock / <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">// some quantity private static List&lt;String&gt; chromosomes = new ArrayList&lt;&gt;(); private static int maxGenerationCnt = 20; private static int[] stock = new int[cnt_bins]; public static void main(String[] args) throws IOException { System.out.println("Target value: " + target_qty); // create sample stock stock = new int[cnt_bins]; for (int i = 0; i &lt; cnt_bins; i++) { stock[i] = rnd.nextInt(max_stock) + 1; } System.out.println("Stock: " + Arrays.toString(stock)); // create 1st generation for (int i = 0; i &lt; generation_size; i++) { StringWriter sw = new StringWriter(); for (int j = 0; j &lt; cnt_bins; j++) { // take stock from this bin? sw.append(rnd.nextBoolean() ? "1" : "0"); } chromosomes.add(sw.toString()); sw.close(); } for (int generationNo = 0; generationNo &lt; maxGenerationCnt; generationNo++) { // evaluate List&lt;SimpleEntry&lt;String, Integer&gt;&gt; evaluated = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; chromosomes.size(); i++) { evaluated.add( new SimpleEntry&lt;String, Integer&gt;(chromosomes.get(i), benchmark(chromosomes.get(i), false))); } // sort evaluated = evaluated.stream().sorted((e1, e2) -&gt; Integer.compare(e1.getValue(), e2.getValue())) .collect(Collectors.toList()); System.out.println("Generation " + generationNo + "; Best / last parent / worst: " + evaluated.get(0).getValue() + " / " + evaluated.get(best_size).getValue() + " / " + evaluated.get(evaluated.size() - 1).getValue()); if (evaluated.get(0).getValue() == 0) { System.out.println("Solution found"); benchmark(evaluated.get(0).getKey(), true); System.exit(0); } // leave only the best evaluated = evaluated.subList(0, best_size); // replication List&lt;String&gt; parents = evaluated.stream().map(e -&gt; e.getKey()).collect(Collectors.toList()); chromosomes.clear(); while (chromosomes.size() &lt; generation_size) { int parent1 = rnd.nextInt(evaluated.size()); int parent2 = rnd.nextInt(evaluated.size()); char[] cArr1 = parents.get(parent1).toCharArray(); char[] cArr2 = parents.get(parent2).toCharArray(); for (int i = 0; i &lt; cnt_bins; i++) { boolean exchange = rnd.nextDouble() &lt; exchange_rate; if (exchange) { char c1 = cArr1[i]; char c2 = cArr2[i]; // exchange both values cArr1[i] = c2; cArr2[i] = c1; } // mutation boolean mutation = rnd.nextDouble() &lt; mutation_rate; if (mutation) { cArr1[i] = rnd.nextBoolean() ? '1' : '0'; } mutation = rnd.nextDouble() &lt; mutation_rate; if (mutation) { cArr2[i] = rnd.nextBoolean() ? '1' : '0'; } } chromosomes.add(new String(cArr1)); chromosomes.add(new String(cArr2)); } } System.out.println("No solution found after " + maxGenerationCnt + " iterations"); } private static int benchmark(String chromosome, boolean verbose) { int sum = 0; char[] cArr = chromosome.toCharArray(); for (int i = 0; i &lt; cnt_bins; i++) { if (cArr[i] == '1') { sum += stock[i]; if (verbose) System.out.println("storage bin " + i + ":\t+" + stock[i] + "\t= " + sum); } if (sum == target_qty) { return 0; } } return Math.abs(target_qty - sum); } }</span></span></code> </pre> <br></div></div><br><br> æœ€åï¼šå¦‚æœæ‚¨æ··æ·†äº†å‚æ•°-å¤ªå¤šçš„çªå˜ï¼Œå¤ªå°çš„äººå£è§„æ¨¡ç­‰ç­‰ã€‚  -ä¼šåœæ»ç”šè‡³äº§ç”Ÿæ‰€æœ‰æœ€å·®çš„ç»“æœã€‚ <br><br> é¡ºä¾¿è¯´ä¸€å¥ï¼Œè¿™ä¸ªé—®é¢˜é€šå¸¸å·²ç»éšæœºè§£å†³äº†ï¼Œä¸éœ€è¦ä¸‹ä¸€ä»£:)å¦‚æœæ‚¨æƒ³ä½¿è®¡ç®—æœºçš„å¯¿å‘½å¤æ‚åŒ–ï¼Œè¯·ä»åŸºå‡†ä¸­åˆ é™¤æ­¤å›æŠ¥ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sum == target_qty) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><br> è¿™ä¼šä½¿ä»»åŠ¡å¤æ‚åŒ–ï¼Œå¹¶ä½¿è®¡ç®—æœºé­å—ä¸€äº›å†²å‡»ã€‚ <br><br> ç¥ä½ å¥½è¿ <br><br>  m_OO_m </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN465797/">https://habr.com/ru/post/zh-CN465797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN465787/index.html">çˆ±å±±ç¾Š</a></li>
<li><a href="../zh-CN465789/index.html">åŸ¹è®­Cisco 200-125 CCNA v3.0ã€‚ ç¬¬29å¤©ã€‚PATå’ŒNAT</a></li>
<li><a href="../zh-CN465791/index.html">é›¶å”®å•†æ¼æ´-å¯ä»¥åœ¨è¯·æ±‚ä¸­è·å¾—OTPçš„ä¸‰ç§æƒ…å†µ</a></li>
<li><a href="../zh-CN465793/index.html">å‰ç«¯æ¯å‘¨æ‘˜è¦ï¼ˆ2019å¹´8æœˆ26æ—¥è‡³9æœˆ1æ—¥ï¼‰</a></li>
<li><a href="../zh-CN465795/index.html">ä¸Šå‘¨ç¬¬378æœŸï¼ˆ2019å¹´8æœˆ26æ—¥è‡³9æœˆ1æ—¥ï¼‰çš„å‰ç«¯ä¸–ç•Œæ‘˜è¦</a></li>
<li><a href="../zh-CN465801/index.html">é£Ÿå“è®¾è®¡æ–‡æ‘˜ï¼Œ2019å¹´8æœˆ</a></li>
<li><a href="../zh-CN465803/index.html">å»ºç«‹Goé¡¹ç›®çš„Mavenæ–¹æ³•</a></li>
<li><a href="../zh-CN465805/index.html">Gigatron-ä¸å«å¤„ç†å™¨çš„è‡ªåˆ¶å¾®å‹è®¡ç®—æœº</a></li>
<li><a href="../zh-CN465807/index.html">æµè¡Œçš„JavaScriptåº“å¦‚ä½•å¼€å§‹åœ¨ç»ˆç«¯ä¸Šå±•ç¤ºå¹¿å‘Šçš„æ•…äº‹</a></li>
<li><a href="../zh-CN465809/index.html">ä¸è¦é™·å…¥è¿‡æ—©ä¼˜åŒ–çš„é™·é˜±</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>