<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¡ ğŸ•´ğŸ½ ğŸ¤¯ ä½¿ç”¨å¸¦C ++å’ŒCortex M4å¾®æ§åˆ¶å™¨çš„Observeræ¨¡æ¿è¿›è¡Œé™æ€è®¢é˜… âœ… ğŸ™ŒğŸ¼ ğŸ…¿ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤§å®¶èº«ä½“å¥åº·ï¼ 


 åœ¨æ–°å¹´çš„å‰å¤œï¼Œæˆ‘æƒ³ç»§ç»­è°ˆè®ºåœ¨å¾®æ§åˆ¶å™¨ä¸Šä½¿ç”¨C ++çš„é—®é¢˜ï¼Œè¿™ä¸€æ¬¡ï¼Œæˆ‘å°†å°è¯•è°ˆè®ºä½¿ç”¨Observeræ¨¡æ¿ï¼ˆä½†åœ¨ä¸‹æ–‡ä¸­ï¼Œæˆ‘å°†å…¶ç§°ä¸ºPublisher-Subscriberæˆ–ä»…ç§°ä¸ºSubscriberï¼Œä¾‹å¦‚ä¸€ä¸ªåŒå…³è¯­ï¼‰ï¼Œä»¥åŠå¯¹Cçš„é™æ€è®¢é˜…çš„å®ç°ã€‚ ++ 17ä»¥åŠè¿™ç§æ–¹æ³•åœ¨æŸäº›åº”ç”¨ç¨‹...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨å¸¦C ++å’ŒCortex M4å¾®æ§åˆ¶å™¨çš„Observeræ¨¡æ¿è¿›è¡Œé™æ€è®¢é˜…</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481606/"><p><img src="https://habrastorage.org/webt/kq/jo/qx/kqjoqxpr1itcdx-_kq4luowkpqe.jpeg"></p><br><p> å¤§å®¶èº«ä½“å¥åº·ï¼ </p><br><p> åœ¨æ–°å¹´çš„å‰å¤œï¼Œæˆ‘æƒ³ç»§ç»­è°ˆè®ºåœ¨å¾®æ§åˆ¶å™¨ä¸Šä½¿ç”¨C ++çš„é—®é¢˜ï¼Œè¿™ä¸€æ¬¡ï¼Œæˆ‘å°†å°è¯•è°ˆè®ºä½¿ç”¨Observeræ¨¡æ¿ï¼ˆä½†åœ¨ä¸‹æ–‡ä¸­ï¼Œæˆ‘å°†å…¶ç§°ä¸ºPublisher-Subscriberæˆ–ä»…ç§°ä¸ºSubscriberï¼Œä¾‹å¦‚ä¸€ä¸ªåŒå…³è¯­ï¼‰ï¼Œä»¥åŠå¯¹Cçš„é™æ€è®¢é˜…çš„å®ç°ã€‚ ++ 17ä»¥åŠè¿™ç§æ–¹æ³•åœ¨æŸäº›åº”ç”¨ç¨‹åºä¸­çš„ä¼˜åŠ¿ã€‚ </p><a name="habracut"></a><br><h2 id="vvedenie"> å¼•è¨€ </h2><br><p>æ¨¡æ¿è®¢é˜…æœåŠ¡å™¨æ˜¯è½¯ä»¶å¼€å‘ä¸­æœ€å¸¸ç”¨çš„æ¨¡æ¿ä¹‹ä¸€ã€‚ ä¾‹å¦‚ï¼Œæœ‰äº†å®ƒï¼Œä»–ä»¬å°±å¯ä»¥åœ¨Windowsçª—ä½“ä¸­è¿›è¡ŒæŒ‰é’®å•å‡»å¤„ç†ã€‚ æ— è®ºå¦‚ä½•ï¼Œåœ¨éœ€è¦ä»¥æŸç§æ–¹å¼å“åº”ç³»ç»Ÿå‚æ•°æ›´æ”¹çš„ä»»ä½•åœ°æ–¹ï¼Œæ— è®ºæ˜¯æ–‡ä»¶æ›´æ”¹è¿˜æ˜¯æ›´æ–°ä¼ æ„Ÿå™¨çš„æµ‹é‡å€¼ï¼Œéƒ½æ˜¯æ—¶å€™äº† <del> æ²¡æœ‰æ€è€ƒ </del> ä½¿ç”¨è®¢é˜…æœåŠ¡å™¨æ¨¡æ¿ã€‚ </p><br><p> æ¨¡æ¿çš„ä¼˜åŠ¿åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥é‡Šæ”¾å‘å¸ƒè€…å’Œè®¢é˜…è€…çš„çŸ¥è¯†ï¼Œè€Œä¸å¿…ä¾èµ–äºç‰¹å®šçš„å¯¹è±¡ã€‚ æˆ‘ä»¬å¯ä»¥å°†ä»»ä½•äººç­¾åç»™ä»»ä½•äººï¼Œè€Œä¸ä¼šå½±å“Publisherå’ŒSubscriberå¯¹è±¡çš„å®ç°ã€‚ </p><br><h2 id="nachalnye-usloviya"> åˆå§‹æ¡ä»¶ </h2><br><p> åœ¨ç†Ÿæ‚‰æ¨¡æ¿ä¹‹å‰ï¼Œé¦–å…ˆè®©æˆ‘ä»¬åŒæ„æˆ‘ä»¬è¦å¼€å‘å¯é çš„è½¯ä»¶ï¼Œå…¶ä¸­ï¼š </p><br><ul><li> ä¸è¦ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é… </li><li> å‡å°‘æŒ‡é’ˆçš„å·¥ä½œ </li><li> æˆ‘ä»¬ä½¿ç”¨å°½å¯èƒ½å¤šçš„å¸¸é‡ï¼Œä»¥ä¾¿æ²¡æœ‰äººå¯ä»¥å°½å¯èƒ½å¤šåœ°æ›´æ”¹ä»»ä½•äºº </li><li> ä½†åŒæ—¶æˆ‘ä»¬åœ¨RAMä¸­ä½¿ç”¨çš„å¸¸é‡å°½å¯èƒ½å°‘ </li></ul><br><p> ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è®¢æˆ·æ¨¡æ¿çš„æ ‡å‡†å®ç°ã€‚ </p><br><h2 id="standartnaya-realizaciya"> æ ‡å‡†å®æ–½ </h2><br><p> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œå½“æ‚¨å•å‡»è¯¥æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿LEDé—ªçƒï¼Œä½†æ˜¯å°šä¸çŸ¥é“æœ‰å¤šå°‘ä¸ªLEDå‘å…‰ï¼Œå®é™…ä¸Šï¼Œæ‚¨å¯èƒ½éœ€è¦ä¸ä»¥LEDé—ªçƒï¼Œè€Œæ˜¯åœ¨èˆ¹ä¸Šä»¥èšå…‰ç¯é—ªçƒï¼Œä»¥æ‘©å°”æ–¯ç”µç ä¼ è¾“æ¶ˆæ¯ã€‚ é‡è¦çš„æ˜¯æˆ‘ä»¬ä¸çŸ¥é“å°†è¦è®¢é˜…è°ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘æ‰‹å¤´æ²¡æœ‰èšå…‰ç¯ï¼Œå› æ­¤æœ¬æ–‡ä¸­æ‰€æœ‰ä¸ºç®€å•èµ·è§å’Œæ›´å¥½ç†è§£çš„ç¤ºä¾‹éƒ½æ˜¯ä½¿ç”¨LEDåˆ¶ä½œçš„ã€‚ </p><br><p> å› æ­¤ï¼Œå½“æ‚¨æŒ‰ä¸‹æŒ‰é’®æ—¶ï¼Œæ‚¨éœ€è¦å°†æ­¤æŒ‰é”®é€šçŸ¥ç»™LEDã€‚ ç»§è€Œï¼Œåœ¨å¾—çŸ¥æŒ‰ä¸‹LEDåï¼Œåº”è¯¥åˆ‡æ¢åˆ°ç›¸åçš„çŠ¶æ€ã€‚ <br>  UMLä¸­çš„æ ‡å‡†å®ç°å¦‚ä¸‹... </p><br><p><img src="https://habrastorage.org/webt/zu/8g/ro/zu8gro30gxgngc8w36oesxy9w2i.png"></p><br><p>è¿™é‡Œçš„<code>ButtonController</code>ç±»è´Ÿè´£è½®è¯¢æŒ‰é’®å¹¶å‘è®¢é˜…è€…é€šçŸ¥æœ‰å…³å•å‡»çš„ä¿¡æ¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <code>Led</code>æ˜¯è®¢é˜…è€…ã€‚ è¿™ä¸¤ä¸ªç±»é€šè¿‡<code>IPublisher</code>å’Œ<code>ISubsriber</code>è§£è€¦ï¼Œå¹¶ä¸”ä¸¤ä¸ªç±»éƒ½ä¸ç›¸äº’äº†è§£ã€‚ å› æ­¤ï¼Œä»<code>ISubscriber</code>æ¥å£ç»§æ‰¿çš„ä»»ä½•å¯¹è±¡éƒ½å¯ä»¥é¢„è®¢<code>ButtonController</code>çš„äº‹ä»¶ã€‚ </p><br><p> ç”±äºç¦æ­¢åŠ¨æ€å†…å­˜åˆ†é…ï¼Œå› æ­¤æˆ‘å£°æ˜äº†ä¸€ä¸ªç”±3ä¸ªå…ƒç´ ç»„æˆçš„æ•°ç»„ç”¨äºè®¢é˜…ã€‚ å³ æœ€å¤šå¯ä»¥æœ‰3ä¸ªè®¢é˜…è€…ã€‚ å› æ­¤ï¼Œåœ¨ç¬¬ä¸€ä¸ªè¿‘ä¼¼å€¼ä¸­ï¼Œå‘<code>ButttonsController</code>ç±»é€šçŸ¥è®¢é˜…è€…çš„æ–¹æ³•å¯èƒ½çœ‹èµ·æ¥åƒ </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ButtonController</span></span></span><span class="hljs-class"> :</span></span> IPublisher { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(;;) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UserButton::IsPressed()) { Notify() ; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Notify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//          HandleEvent() for(auto it: pSubscribers) { if (it != nullptr) { it-&gt;HandleEvent() ; } } } } ;</span></span></code> </pre> <br><p> æ‰€æœ‰çš„ç›éƒ½åœ¨<code>Publisher</code>ç±»çš„<code>Notify()</code>æ–¹æ³•ä¸­ã€‚ åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬éå†è®¢é˜…è€…åˆ—è¡¨ï¼Œå¹¶åœ¨æ¯ä¸ªè®¢é˜…è€…ä¸Šè°ƒç”¨<code>HandleEvent()</code>æ–¹æ³•ï¼Œè¿™å¾ˆé…·ï¼Œå› ä¸ºæ¯ä¸ªè®¢é˜…è€…éƒ½ä»¥è‡ªå·±çš„æ–¹å¼å®ç°æ­¤æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­è¿›è¡Œæ“ä½œ <del> å…¨éƒ¨ </del> éšå¿ƒæ‰€æ¬²ï¼ˆå®é™…ä¸Šï¼Œæ‚¨å¿…é¡»å°å¿ƒï¼Œå¦åˆ™é­”é¬¼çŸ¥é“è®¢æˆ·åœ¨åšä»€ä¹ˆï¼‰ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ä»–çš„æ–¹æ³•ï¼Œä¾‹å¦‚ä»ä¸­æ–­ä¸­è°ƒç”¨ï¼Œå¹¶ä¸”æ‚¨éœ€è¦ä¿æŒè­¦æƒ•ï¼Œä»¥é˜²æ­¢è®¢æˆ·åšé•¿è€Œåçš„äº‹æƒ…ï¼‰ </p><br><p> åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒLEDå¯ä»¥åšä»»ä½•äº‹æƒ…ï¼Œå› æ­¤å®ƒå¯ä»¥è¿›è¡ŒçŠ¶æ€åˆ‡æ¢ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Port, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> pinNum&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Led</span></span></span><span class="hljs-class">:</span></span> ISubscriber { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Toggle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Port::ODR::Toggle(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; pinNum); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  ,    ,  Toggle() ; } };</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">å…¨é¢å®æ–½æ‰€æœ‰è¯¾ç¨‹</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Port, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> pinNum&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Button</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsPressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((Port::IDR::Read() &amp; (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; pinNum)) == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   { while ((Port::IDR::Read() &amp; (1 &lt;&lt; pinNum)) == 0) //     { }; result = true; } return result; } } ; //     GPIOC.13 using UserButton = Button&lt;GPIOC, 13&gt; ; struct ISubscriber { virtual void HandleEvent() = 0; } ; struct IPublisher { virtual void Notify() const = 0; virtual void Subscribe(ISubscriber* subscriber) = 0; } ; template &lt;typename Port, std::uint32_t pinNum&gt; struct Led: ISubscriber { static void Toggle() { Port::ODR::Toggle(1 &lt;&lt; pinNum); } void HandleEvent() override { Toggle() ; } }; struct ButtonController : IPublisher { void Run() { for(; ;) { if (UserButton::IsPressed()) { Notify() ; } } } void Notify() const override { for(auto it: pSubscribers) { if (it != nullptr) { it-&gt;HandleEvent() ; } } } void Subscribe(ISubscriber* subscriber) override { if (index &lt; pSubscribers.size()) { pSubscribers[index] = subscriber ; index ++ ; } //   3   ...   } private: std::array&lt;ISubscriber*, 3&gt; pSubscribers ; std::size_t index = 0U ; } ;</span></span></code> </pre></div></div><br><p> è®¢é˜…å¦‚ä½•æŸ¥çœ‹ä»£ç ï¼Ÿ ä¾æ­¤ç±»æ¨ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  Led1    5  GPIOC static Led&lt;GPIOC,5&gt; Led1 ; //  Led2    8  GPIOC static Led&lt;GPIOC,8&gt; Led2 ; //  Led3    9  GPIOC static Led&lt;GPIOC,9&gt; Led3 ; ButtonController buttonController ; //  3  buttonController.Subscribe(&amp;Led1) ; buttonController.Subscribe(&amp;Led2) ; buttonController.Subscribe(&amp;Led3) ; //       buttonController.Run() ; }</span></span></code> </pre> <br><p> å¥½æ¶ˆæ¯æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä»»ä½•å¯¹è±¡è¿›è¡Œç­¾åï¼Œè€Œå¯¹è±¡çš„åˆ›å»ºæ—¶é—´å¯¹æˆ‘ä»¬è€Œè¨€å¹¶ä¸é‡è¦ã€‚ å®ƒå¯ä»¥æ˜¯é™æ€æˆ–å±€éƒ¨çš„å…¨å±€å¯¹è±¡ã€‚ ä¸€æ–¹é¢ï¼Œè¿™å¾ˆå¥½ï¼Œä½†å¦ä¸€æ–¹é¢ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨æ­¤ä»£ç ä¸­è®¢é˜…è¿è¡Œæ—¶ã€‚ å®é™…ä¸Šï¼Œå®é™…ä¸Šï¼Œåœ¨ç¼–è¯‘é˜¶æ®µå°±çŸ¥é“å¯¹è±¡<code>Led3</code> ï¼Œ <code>Led3</code> ï¼Œ <code>Led3</code>çš„åœ°å€ã€‚ é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸èƒ½åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œè®¢é˜…å¹¶åœ¨ROMä¸­ä¿ç•™æŒ‡å‘è®¢é˜…è€…çš„æŒ‡é’ˆæ•°ç»„å‘¢ï¼Ÿ </p><br><p> æ­¤å¤–ï¼Œè¿˜å­˜åœ¨æ½œåœ¨é”™è¯¯çš„é£é™©ï¼Œä¾‹å¦‚ï¼Œæœ‰å¤šå°‘äººæƒ³çŸ¥é“å¦‚æœä»å¤šä¸ªçº¿ç¨‹ä¸­è°ƒç”¨<code>Subsribe()</code>æ–¹æ³•ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿ æˆ‘ä»¬ä»…é™äº3ä¸ªè®¢é˜…è€…ï¼Œå¦‚æœæˆ‘ä»¬ç­¾ç½²4ä¸ªLEDä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ </p><br><p> åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åˆå§‹åŒ–æœŸé—´çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­è¿›è¡Œä¸€æ¬¡è®¢é˜…ï¼Œä»…ä¿å­˜æŒ‡å‘è®¢é˜…è€…çš„æŒ‡é’ˆå³å¯ã€‚ æŒ‡é’ˆå°†ç»ˆèº«ä¿ç•™è¿™äº›è®¢æˆ·çš„åœ°å€ã€‚ æ¯ç­çš„æ—¥å­æ˜¯ä¸å¯é¿å…çš„ <del> ç”±äºè¶…æ–°æ˜Ÿçˆ†å‘ </del>  ï¼ˆå½“ç„¶ï¼Œå¦‚æœæˆ‘ä»¬è€ƒè™‘ç›¸å½“é•¿çš„æ—¶é—´ï¼‰ã€‚ ä½†æ˜¯æ— è®ºå¦‚ä½•ï¼ŒRAMæ•…éšœçš„å¯èƒ½æ€§æ¯”ROMé«˜å¾—å¤šï¼Œå› æ­¤ä¸å»ºè®®å°†æ°¸ä¹…æ•°æ®å­˜å‚¨åœ¨RAMä¸­ã€‚ </p><br><p> ä¸å¥½çš„æ¶ˆæ¯æ˜¯ï¼Œè¿™æ ·çš„ä½“ç³»ç»“æ„è§£å†³æ–¹æ¡ˆå ç”¨äº†ROMå’ŒRAMå¾ˆå¤§çš„ç©ºé—´ã€‚ ä»¥é˜²ä¸‡ä¸€ï¼Œæˆ‘ä»¬å†™å‡ºæ­¤è§£å†³æ–¹æ¡ˆéœ€è¦å¤šå°‘ROMå’ŒRAMï¼š </p><br><div class="scrollable-table"><table><thead><tr><th> æ¨¡ç»„ </th><th> å¯†ç  </th><th> åªè¯»æ•°æ® </th><th>  RWæ•°æ® </th></tr></thead><tbody><tr><td>  main.o </td><td>  488 </td><td>  64 </td><td>  21 </td></tr></tbody></table></div><br><p> å³ åœ¨ROMä¸­æ€»å…±552å­—èŠ‚ï¼Œåœ¨RAMä¸­æ€»å…±21å­—èŠ‚-å‡è®¾æŒ‰ä¸‹æŒ‰é’®å¹¶é—ªçƒä¸‰ä¸ªLEDä¸éœ€è¦å¤ªå¤šã€‚ </p><br><p> å¥½å§ï¼Œä¸ºäº†ä¿æŠ¤è‡ªå·±å…å—æ­¤ç±»éº»çƒ¦å¹¶å‡å°‘æ§åˆ¶å™¨èµ„æºçš„æ¶ˆè€—ï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä½¿ç”¨é™æ€è®¢é˜…çš„é€‰é¡¹ã€‚ </p><br><h2 id="staticheskaya-podpiska"> é™æ€è®¢é˜… </h2><br><p> ä¸ºäº†ä½¿è®¢é˜…æˆä¸ºé™æ€ï¼Œå¯ä»¥ä½¿ç”¨å‡ ç§æ–¹æ³•ã€‚ æˆ‘å°†è¿™æ ·å‘½åï¼š </p><br><ul><li> ä¼ ç»Ÿæ–¹æ³•æ˜¯ç›¸åŒçš„æ–¹æ³•ï¼Œä½†æ˜¯ä½¿ç”¨constexpræ„é€ å‡½æ•°å¹¶é€šè¿‡å®ƒæ¥è®¾ç½®è®¢æˆ·åˆ—è¡¨ã€‚ </li><li><del> éå¸¸è§„ </del> ä½¿ç”¨æ¨¡æ¿-é€šè¿‡æ¨¡æ¿å‚æ•°ä¼ è¾“è®¢æˆ·åˆ—è¡¨ã€‚  ï¼ˆè¿™é‡Œçš„æ¨¡æ¿æ˜¯å…ƒç¼–ç¨‹é¢†åŸŸçš„å®šä¹‰ï¼Œè€Œä¸æ˜¯è®¾è®¡æ¨¡å¼ï¼‰ </li></ul><br><h3 id="tradicionnyy-podhod-k-staticheskoy-podpiske"> é™æ€è®¢é˜…çš„ä¼ ç»Ÿæ–¹æ³• </h3><br><p> è®©æˆ‘ä»¬å°è¯•åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œè®¢é˜…ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯¹æ¶æ„è¿›è¡Œä¸€äº›è°ƒæ•´ï¼š </p><br><p><img src="https://habrastorage.org/webt/lr/_k/gy/lr_kgyobfgkebxpz9gfyqiod34u.png"></p><br><p> è¯¥å›¾ç‰‡ä¸åŸå§‹å›¾ç‰‡æ²¡æœ‰å¤ªå¤§åŒºåˆ«ï¼Œä½†æ˜¯æœ‰å‡ ä¸ªåŒºåˆ«ï¼š <code>Subscribe()</code>æ–¹æ³•å·²è¢«åˆ é™¤ï¼Œç°åœ¨é¢„è®¢å°†ç›´æ¥åœ¨æ„é€ å‡½æ•°ä¸­è¿›è¡Œã€‚ æ„é€ å‡½æ•°å¿…é¡»æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ï¼Œå¹¶ä¸”ä¸ºäº†èƒ½å¤Ÿåœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œé™æ€ç­¾åï¼Œå°†ä½¿ç”¨<code>constexpr</code> ã€‚ ä¸€ä¸ªè®¢æˆ·æ•°ç»„å°†åœ¨å…¶ä¸­åˆå§‹åŒ–ï¼Œå¹¶ä¸”æ­¤åˆå§‹åŒ–å¯åœ¨ç¼–è¯‘æ—¶å®Œæˆï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ButtonController</span></span></span><span class="hljs-class"> :</span></span> IPublisher { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... Args&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ButtonController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Args </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params">*... args)</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pSubscribers</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">initializer_list</span></span>&lt;ISubscriber <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>*&gt; result = {args...} ; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> index = <span class="hljs-number"><span class="hljs-number">0U</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> it: result) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (index &lt; size) { pSubscribers[index] = <span class="hljs-keyword"><span class="hljs-keyword">const_cast</span></span>&lt;ISubscriber*&gt;(it); } index ++ ; } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> size = <span class="hljs-number"><span class="hljs-number">3U</span></span>; ISubscriber* pSubscribers[size] ; } ;</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">è¿™æ ·çš„å®ç°çš„å®Œæ•´ä»£ç </b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ISubscriber</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; } ; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IPublisher</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Notify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; } ; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Port, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> pinNum&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Button</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsPressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((Port::IDR::Read() &amp; (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; pinNum)) == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   { while ((Port::IDR::Read() &amp; (1 &lt;&lt; pinNum)) == 0) //     { }; result = true; } return result; } } ; template &lt;typename Port, std::uint32_t pinNum&gt; struct Led: ISubscriber { constexpr Led() { } static void Toggle() { Port::ODR::Toggle(1&lt;&lt;pinNum); } void HandleEvent() const override { Toggle() ; } }; //     GPIOC.13 using UserButton = Button&lt;GPIOC, 13&gt; ; struct ButtonController : IPublisher { template&lt;typename... Args&gt; constexpr ButtonController(Args const*... args): pSubscribers() { std::initializer_list&lt;ISubscriber const*&gt; result = {args...} ; std::size_t index = 0U; for(auto it: result) { if (index &lt; size) { pSubscribers[index] = const_cast&lt;ISubscriber*&gt;(it); } index ++ ; } } void Run() const { for(; ;) { if (UserButton::IsPressed()) { Notify() ; } } } void Notify() const override { for(auto it: pSubscribers) { if (it != nullptr) { it-&gt;HandleEvent() ; } } } private: static constexpr std::size_t size = 3U; ISubscriber* pSubscribers[size] ; } ;</span></span></code> </pre></div></div><br><p> ç°åœ¨å¯ä»¥åœ¨ç¼–è¯‘æ—¶å®Œæˆè®¢é˜…ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  Led1    5  GPIOC static constexpr Led&lt;GPIOC,5&gt; Led1 ; //  Led2    8  GPIOC static constexpr Led&lt;GPIOC,8&gt; Led2 ; //  Led3    9  GPIOC static constexpr Led&lt;GPIOC,9&gt; Led3 ; static constexpr ButtonController buttonController(&amp;Led1, &amp;Led2, &amp;Led3) ; buttonController.Run() ; return 0 ; } ;</span></span></code> </pre> <br><p> åœ¨è¿™é‡Œï¼Œ <code>buttonController</code>å¯¹è±¡ä¸æŒ‡å‘è®¢æˆ·çš„æŒ‡é’ˆæ•°ç»„å®Œå…¨ä½äºROMä¸­ï¼š </p><br><blockquote>  main :: buttonController 0x800'1f04 0x10æ•°æ®main.o [1] </blockquote><p> ä¸€åˆ‡ä¼¼ä¹éƒ½ä¸ç®—ä»€ä¹ˆï¼Œåªæ˜¯æˆ‘ä»¬åˆè¢«é™åˆ¶ä¸ºåªæœ‰3ä¸ªè®¢æˆ·ã€‚ å¹¶ä¸”å‘å¸ƒè€…ç±»å¿…é¡»å…·æœ‰constexpræ„é€ å‡½æ•°ï¼Œå¹¶ä¸”é€šå¸¸æ˜¯å®Œå…¨æ’å®šçš„ï¼Œä»¥ç¡®ä¿æŒ‡å‘ROMä¸­çš„è®¢é˜…è€…çš„æŒ‡é’ˆï¼Œå¦åˆ™ï¼Œå³ä½¿å…·æœ‰å·²çŸ¥çš„è®¢é˜…è€…åœ°å€ï¼Œæˆ‘ä»¬çš„å¯¹è±¡ä»¥åŠæ‰€æœ‰å†…å®¹ä¹Ÿå°†å†æ¬¡è¿›å…¥RAMã€‚ </p><br><p> å…¶ä»–ç¼ºç‚¹-ç”±äºä»ç„¶ä½¿ç”¨è™šæ‹ŸåŠŸèƒ½ï¼Œå› æ­¤è™šæ‹ŸåŠŸèƒ½è¡¨ä¼šé€ç‚¹é€ä½å‡ºç°åœ¨æˆ‘ä»¬çš„ROMä¸­ã€‚ èµ„æºè™½ç„¶è´Ÿæ‹…å¾—èµ·ï¼Œä½†ä¸æ˜¯æ— é™çš„ã€‚ åœ¨å¤§å¤šæ•°åº”ç”¨ä¸­ï¼Œæ‚¨å¯ä»¥é”¤å‡»å®ƒå¹¶é‡‡ç”¨æ›´å¤§çš„å¾®æ§åˆ¶å™¨ï¼Œä½†æ˜¯ç»å¸¸ä¼šå‘ç”Ÿæ¯ä¸ªå­—èŠ‚éƒ½å¾ˆé‡è¦çš„æƒ…å†µï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°ç”±æˆåƒä¸Šä¸‡ä¸ªåˆ¶é€ çš„äº§å“ï¼ˆä¾‹å¦‚ç‰©ç†ç‰©ç†ä¼ æ„Ÿå™¨ï¼‰æ—¶ã€‚ </p><br><p> è®©æˆ‘ä»¬çœ‹çœ‹æ­¤è§£å†³æ–¹æ¡ˆä¸­çš„å†…å­˜æƒ…å†µå¦‚ä½•ï¼š </p><br><div class="scrollable-table"><table><thead><tr><th> æ¨¡ç»„ </th><th> å¯†ç  </th><th> åªè¯»æ•°æ® </th><th>  RWæ•°æ® </th></tr></thead><tbody><tr><td>  main.o </td><td>  172 </td><td>  76 </td><td>  0 </td></tr></tbody></table></div><br><p> å°½ç®¡ç»“æœæ˜¯â€œæƒŠäººçš„â€ï¼šæ€»RAMæ¶ˆè€—ä¸º0å­—èŠ‚ï¼ŒROMä¸º248å­—èŠ‚ï¼Œè¿™æ˜¯ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆçš„ä¸€åŠï¼Œä½†æ„Ÿè§‰ä»æœ‰æ”¹è¿›çš„ç©ºé—´ã€‚ åœ¨è¿™248ä¸ªå­—èŠ‚ä¸­ï¼Œå¤§çº¦æœ‰50ä¸ªä»…å ç”¨è™šæ‹Ÿæ–¹æ³•è¡¨ã€‚ </p><br><p>  <u>ä¸€ä¸ªå°é¢˜å¤–è¯ï¼š</u> <br> ç°ä»£å¾®æ§åˆ¶å™¨çš„ROMå¤§å°è¦è¾¾åˆ°256 kBçš„ä¸€ä¸ªæ­¥éª¤ï¼ˆä¾‹å¦‚ï¼ŒTI Cortex M4å¾®æ§åˆ¶å™¨å…·æœ‰256 kBçš„ROMï¼Œè€Œä¸‹ä¸€ç‰ˆæœ¬å·²ç»æ˜¯512 kBï¼‰ã€‚ è€Œä¸”ç”±äº50ä¸ªé¢å¤–çš„å­—èŠ‚ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸é‡‡ç”¨ä¸€ä¸ªå…·æœ‰256 KBæ›´å¤§ROMå’Œæ›´æ˜‚è´µçš„æ§åˆ¶å™¨ï¼Œå› æ­¤æ”¾å¼ƒè™šæ‹ŸåŠŸèƒ½å¯ä»¥èŠ‚çœå¤šè¾¾50ç¾åˆ†çš„æƒ…å†µï¼ˆ256ä¸ªROMå’Œ512 KB ROMçš„å¾®æ§åˆ¶å™¨ä¹‹é—´çš„å·®å¼‚å¤§çº¦æ˜¯50ç¾å…ƒï¼‰ï¼Œè¿™å°†ä¸æ˜¯å¾ˆå¥½ã€‚ 50-60ç¾åˆ†ï¼‰ã€‚ </p><br><p> å¯¹äº1ä¸ªå¾®æ§åˆ¶å™¨æ¥è¯´ï¼Œè¿™å¬èµ·æ¥å¾ˆè’è°¬ï¼Œä½†æ˜¯æ¯å¹´åœ¨40ä¸‡ä¸ªè®¾å¤‡ä¸Šï¼Œæ‚¨å¯ä»¥èŠ‚çœ20ä¸‡ç¾å…ƒã€‚ å·²ç»ä¸é‚£ä¹ˆæœ‰è¶£äº†ï¼Œä½†è€ƒè™‘ä½¿ç”¨å“ªç§è€é¼ ã€‚ è¿™é¡¹ä¼˜æƒ å¯ä»¥å¾—åˆ°3,000å¢å¸ƒçš„æ–‡å‡­å’Œç¤¼å“å¡ï¼Œæ¯«æ— ç–‘é—®ï¼Œæ‹’ç»è™šæ‹ŸåŠŸèƒ½å’Œåœ¨ROMä¸­èŠ‚çœ50å­—èŠ‚çš„æ­£ç¡®æ€§ã€‚ </p><br><h3 id="netradicionnyy-podhod"> éå¸¸è§„æ–¹æ³• </h3><br><p> è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨æ²¡æœ‰è™šæ‹ŸåŠŸèƒ½çš„æƒ…å†µä¸‹å®Œæˆç›¸åŒçš„å·¥ä½œï¼Œå¹¶èŠ‚çœæ›´å¤šçš„ROMã€‚ </p><br><p> é¦–å…ˆï¼Œè®©æˆ‘ä»¬å¼„æ¸…æ¥šå®ƒæ˜¯æ€ä¹ˆå›äº‹ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  Led1    5  GPIOC static Led&lt;GPIOC,5&gt; Led1 ; //  Led2    8  GPIOC static Led&lt;GPIOC,8&gt; Led2 ; //  Led3    9  GPIOC static Led&lt;GPIOC,9&gt; Led3 ; //   ButtonController&lt;Led1, Led2, Led3&gt; buttonController ; buttonController.Run() ; return 0 ; }</span></span></code> </pre> <br><p> æˆ‘ä»¬çš„ä»»åŠ¡æ˜¯ä½¿ä¸¤ä¸ªå¯¹è±¡Publisherï¼ˆ <code>ButtonController</code> ï¼‰å’ŒSubscriberï¼ˆ <code>Led</code> ï¼‰å½¼æ­¤åˆ†ç¦»ï¼Œä»¥ä½¿å®ƒä»¬å½¼æ­¤ä¹‹é—´ä¸äº†è§£ï¼Œä½†æ˜¯<code>ButtonController</code>å¯ä»¥åŒæ—¶é€šçŸ¥<code>Led</code> ã€‚ </p><br><p> æ‚¨å¯ä»¥é€šè¿‡æŸç§æ–¹å¼å£°æ˜<code>ButtonController</code>ç±»ã€‚ </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;Led&lt;GPIOC,<span class="hljs-number"><span class="hljs-number">5</span></span>&gt;&amp; subscriber1, Led&lt;GPIOC,<span class="hljs-number"><span class="hljs-number">8</span></span>&gt;&amp; subscriber2, Led&lt;GPIOC,<span class="hljs-number"><span class="hljs-number">9</span></span>&gt;&amp; subscriber3&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ButtonController</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(; ;) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UserButton::IsPressed()) { Notify() ; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Notify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ subscriber1.HandleEvent() ; subscriber2.HandleEvent() ; subscriber3.HandleEvent() ; } ... } ;</code> </pre> <br><p> ä½†æ‚¨çŸ¥é“ï¼Œè¿™é‡Œæˆ‘ä»¬é™„åŠ äº†ç‰¹å®šçš„ç±»å‹ï¼Œ <code>BbuttonController</code>æ¯æ¬¡åœ¨æ–°é¡¹ç›®ä¸­éƒ½å¿…é¡»é‡åš<code>BbuttonController</code>ç±»çš„å®šä¹‰ã€‚ æˆ‘æƒ³åœ¨æ–°é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨<code>ButtonController</code>è€Œä¸ä¼šæœ‰<code>ButtonController</code> ã€‚ </p><br><p>  C ++ 17å¯ä»¥è§£å†³ï¼Œæ‚¨ä¸èƒ½æŒ‡å®šç±»å‹ï¼Œè€Œæ˜¯è¦æ±‚ç¼–è¯‘å™¨ä¸ºæ‚¨æ¨æ–­å‡ºç±»å‹-è¿™æ­£æ˜¯æ‚¨æ‰€éœ€è¦çš„ã€‚ ä¸ä¼ ç»Ÿæ–¹æ³•ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é‡Šæ”¾å‘å¸ƒè€…å’Œè®¢é˜…è€…çš„çŸ¥è¯†ï¼Œè€Œè®¢é˜…è€…çš„æ•°é‡å®é™…ä¸Šæ˜¯æ— é™çš„ã€‚ </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; ... subscribers&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ButtonController</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(; ;) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UserButton::IsPressed()) { Notify() ; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Notify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ pass((subscribers.HandleEvent() , <span class="hljs-literal"><span class="hljs-literal">true</span></span>)...) ; } ... } ;</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">passï¼ˆ..ï¼‰å‡½æ•°å¦‚ä½•å·¥ä½œ</b> <div class="spoiler_text"><p>  <code>Notify()</code>æ–¹æ³•è°ƒç”¨<code>pass()</code>å‡½æ•°ï¼›å®ƒç”¨äºæ‰©å±•å…·æœ‰å¯å˜æ•°é‡å‚æ•°çš„æ¨¡æ¿å‚æ•° </p><br><pre> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Notify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ pass((subscribers.HandleEvent() , <span class="hljs-literal"><span class="hljs-literal">true</span></span>)...) ; }</code> </pre> <br><p>  <code>pass()</code>å‡½æ•°çš„å®ç°ç®€ç›´æ˜¯éš¾ä»¥æƒ³è±¡çš„ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå¸¦æœ‰å¯å˜æ•°é‡å‚æ•°çš„å‡½æ•°ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... Args&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Args...)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ } } ;</code> </pre> <br><p>  <code>HandleEvent()</code>å‡½æ•°å¦‚ä½•æ‰©å±•ä¸ºæ¯ä¸ªè®¢æˆ·çš„å¤šä¸ªè°ƒç”¨ï¼Ÿ </p><br><p> ç”±äº<code>pass()</code>å‡½æ•°æ¥å—å¤šä¸ªä»»ä½•ç±»å‹çš„å‚æ•°ï¼Œå› æ­¤æ‚¨å¯ä»¥å°†å¤šä¸ª<code>bool</code>ç±»å‹çš„å‚æ•°ä¼ é€’<code>bool</code> ï¼Œä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥è°ƒç”¨<code>pass(true, true, true)</code>å‡½æ•°ã€‚ å½“ç„¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿï¼Œä½†æ˜¯æˆ‘ä»¬ä¸éœ€è¦ã€‚ </p><br><p> è¯¥è¡Œ<code>(subscribers.HandleEvent() , true)</code>ä½¿ç”¨è¿ç®—ç¬¦â€œï¼Œâ€ï¼ˆé€—å·ï¼‰ï¼Œå®ƒæ‰§è¡Œä¸¤ä¸ªæ“ä½œæ•°ï¼ˆä»å·¦åˆ°å³ï¼‰å¹¶è¿”å›ç¬¬äºŒä¸ªè¿ç®—ç¬¦çš„å€¼ï¼Œå³åœ¨è¿™é‡Œï¼Œå…ˆæ‰§è¡Œ<code>subscribers.HandleEvent()</code> ï¼Œç„¶åå†æ‰§è¡Œè¯¥å‡½æ•°<code>pass()</code>å°†è®¾ç½®ä¸º<code>true</code> ã€‚ </p><br><p> å¥½å§ï¼Œâ€œ ...â€æ˜¯ç”¨äºæ‰©å±•å¯å˜æ•°é‡å‚æ•°çš„æ ‡å‡†æ¡ç›®ã€‚ å¯¹äºæˆ‘ä»¬çš„æƒ…å†µï¼Œç¼–è¯‘å™¨çš„åŠ¨ä½œå¯ä»¥éå¸¸ç¤ºæ„æ€§åœ°æè¿°å¦‚ä¸‹ï¼š </p><br><pre> <code class="cpp hljs">pass((subscribers.HandleEvent() , <span class="hljs-literal"><span class="hljs-literal">true</span></span>)...) ; -&gt; pass((Led1.HandleEvent() , <span class="hljs-literal"><span class="hljs-literal">true</span></span>), (Led2.HandleEvent() , <span class="hljs-literal"><span class="hljs-literal">true</span></span>), (Led3.HandleEvent() , <span class="hljs-literal"><span class="hljs-literal">true</span></span>)) ; -&gt; Led1.HandleEvent() ; -&gt; pass(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, (Led2.HandleEvent() , <span class="hljs-literal"><span class="hljs-literal">true</span></span>), (Led3.HandleEvent() , <span class="hljs-literal"><span class="hljs-literal">true</span></span>)) ; -&gt; Led2.HandleEvent() ; -&gt; pass(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, (Led3.HandleEvent() , <span class="hljs-literal"><span class="hljs-literal">true</span></span>)) ; -&gt; Led3.HandleEvent() ; -&gt; pass(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>) ;</code> </pre> </div></div><br><p> é™¤äº†é“¾æ¥ï¼Œè¿˜å¯ä»¥ä½¿ç”¨æŒ‡é’ˆï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>* ... subscribers&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ButtonController</span></span></span><span class="hljs-class"> {</span></span> ... } ;</code> </pre> <br><p>  <strong>å¦å¤–ï¼š</strong>å®é™…ä¸Šï¼Œæ„Ÿè°¢<a href="https://habr.com/ru/users/vamireh/" class="user_link">vamireh</a> <a href="https://habr.com/ru/post/481606/">æŒ‡å‡º</a>æ‰€æœ‰è¿™äº›èˆè¹ˆéƒ½ä¸ <del> æ‰‹é¼“ </del> ä¸éœ€è¦C ++ 17ä¸­çš„<code>pass</code>å‡½æ•°ã€‚ ç”±äºæŠ˜å è¡¨è¾¾å¼ï¼ˆåœ¨C ++ 17æ ‡å‡†ä¸­å¼•å…¥ï¼‰æ”¯æŒé€—å·â€œï¼Œâ€ï¼Œå› æ­¤ä»£ç å¾—ä»¥è¿›ä¸€æ­¥ç®€åŒ–ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; ... subscribers&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ButtonController</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(; ;) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (UserButton::IsPressed()) { Notify() ; } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Notify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ ((subscribers.HandleEvent()), ...) ; } } ;</code> </pre> <br><p> ä»ç»“æ„ä¸Šæ¥è¯´ï¼Œå®ƒé€šå¸¸çœ‹èµ·æ¥éå¸¸ç®€å•ï¼š </p><br><p><img src="https://habrastorage.org/webt/hx/di/jj/hxdijj1xdfvncxtdsr04a1qp_ve.png"></p><br><p> æˆ‘åœ¨è¿™é‡Œæ·»åŠ äº†å¦ä¸€ä¸ªLCDç±»ï¼Œä½†çº¯ç²¹æ˜¯ä¸ºäº†ä¸¾ä¾‹è¯´æ˜ï¼Œç°åœ¨å®ƒä¸è®¢é˜…è€…çš„ç±»å‹å’Œæ•°é‡æ— å…³ï¼Œä¸»è¦æ˜¯å®ƒå°†å®ç°<code>HandleEvent()</code>æ–¹æ³•ã€‚ </p><br><p> ç°åœ¨ï¼Œæ‰€æœ‰ä»£ç é€šå¸¸ä¹Ÿæ›´åŠ å®¹æ˜“ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Port, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> pinNum&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Button</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsPressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((Port::IDR::Read() &amp; (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; pinNum)) == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-comment"><span class="hljs-comment">//   { while ((Port::IDR::Read() &amp; (1 &lt;&lt; pinNum)) == 0) //     { }; result = true; } return result; } } ; //     GPIOC.13 using UserButton = Button&lt;GPIOC, 13&gt; ; template &lt;typename Port, std::uint32_t pinNum&gt; struct Led { static void Toggle() { Port::ODR::Toggle(1&lt;&lt;pinNum); } void HandleEvent() const { Toggle() ; } }; template &lt;auto&amp; ... subscribers&gt; struct ButtonController { void Run() const { for(; ;) { if (UserButton::IsPressed()) { Notify() ; } } } void Notify() const { ((subscribers.HandleEvent()), ...) ; } } ; int main() { //  Led1    5  GPIOC static constexpr Led&lt;GPIOC,5&gt; Led1 ; //  Led2    8  GPIOC static constexpr Led&lt;GPIOC,8&gt; Led2 ; //  Led3    9  GPIOC static constexpr Led&lt;GPIOC,9&gt; Led3 ; static constexpr ButtonController&lt;Led1, Led2, Led3&gt; buttonController ; buttonController.Run() ; return 0 ; }</span></span></code> </pre> <br><p>  <code>Run()</code>æ–¹æ³•ä¸­çš„<code>Notify()</code>è°ƒç”¨é€€åŒ–ä¸ºç®€å•çš„é¡ºåºè°ƒç”¨ </p><br><pre> <code class="cpp hljs">Led1.HandleEvent() ; Led2.HandleEvent() ; Led3.HandleEvent() ;</code> </pre> <br><p> é‚£è¿™é‡Œçš„è®°å¿†å‘¢ï¼Ÿ </p><br><div class="scrollable-table"><table><thead><tr><th> æ¨¡ç»„ </th><th> å¯†ç  </th><th> åªè¯»æ•°æ® </th><th>  RWæ•°æ® </th></tr></thead><tbody><tr><td>  main.o </td><td>  186 </td><td>  4 </td><td>  0 </td></tr></tbody></table></div><br><p>  ROMå…±190å­—èŠ‚ï¼ŒRAMå…±æœ‰0å­—èŠ‚ã€‚ ç°åœ¨ï¼Œè¯¥è®¢å•å‡ ä¹æ˜¯æ ‡å‡†ç‰ˆæœ¬çš„ä¸‰å€ï¼Œè€Œå®ƒæ‰§è¡Œçš„åŠŸèƒ½å´å®Œå…¨ç›¸åŒã€‚ </p><br><p> å› æ­¤ï¼Œå¦‚æœæ‚¨å…·æœ‰åº”ç”¨ç¨‹åºä¸­é¢„å…ˆå·²çŸ¥çš„è®¢æˆ·åœ°å€ï¼Œå¹¶ä¸”æ‚¨éµå¾ªæœ¬æ–‡å¼€å¤´å®šä¹‰çš„æ¡ä»¶ï¼Œ </p><br><div class="spoiler">  <b class="spoiler_title">æœ¬æ–‡å¼€å¤´çš„æ¡ä»¶</b> <div class="spoiler_text"><ul><li> ä¸è¦ä½¿ç”¨åŠ¨æ€å†…å­˜åˆ†é… </li><li> å‡å°‘æŒ‡é’ˆçš„å·¥ä½œ </li><li> æˆ‘ä»¬ä½¿ç”¨å°½å¯èƒ½å¤šçš„å¸¸é‡ï¼Œä»¥ä¾¿æ²¡æœ‰äººå¯ä»¥å°½å¯èƒ½å¤šåœ°æ›´æ”¹ä»»ä½•äºº </li><li> ä½†åŒæ—¶æˆ‘ä»¬åœ¨RAMä¸­ä½¿ç”¨çš„å¸¸é‡å°½å¯èƒ½å°‘ </li></ul></div></div><br><p> æ‚¨å¯ä»¥æ”¾å¿ƒåœ°ä½¿ç”¨Publisher-Subscriberæ¨¡æ¿çš„è¿™ç§å®ç°æ¥å‡å°‘ä»£ç è¡Œå¹¶èŠ‚çœèµ„æºï¼Œåœ¨é‚£é‡Œæ‚¨å¯ä»¥çœ‹åˆ°å¹¶ä¸”ä¸ä»…å¯ä»¥ç´¢å–ç¤¼å“å¡ï¼Œè¿˜å¯ä»¥æ ¹æ®å½“å¹´çš„ç»“æœè·å¾—å¥–é‡‘ã€‚ </p><br><p>  <a href="https://yadi.sk/d/_nF8mwnX0tXkKA" rel="nofollow">IAR 8.40.2ä¸‹</a>çš„æµ‹è¯•<a href="https://yadi.sk/d/_nF8mwnX0tXkKA" rel="nofollow">ç¤ºä¾‹ä½äºæ­¤å¤„</a> </p><br><p> ä¸€åˆ‡å³å°†åˆ°æ¥ï¼ åœ¨æ–°çš„ä¸€å¹´é‡Œç¥ä½ å¥½è¿ï¼ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN481606/">https://habr.com/ru/post/zh-CN481606/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN481594/index.html">æ ¹æ®GOST R IEC 61508ï¼ˆIEC 61508ï¼‰å¼€å‘â€œç®€å•ç”µå‹å‘ç”Ÿå™¨â€</a></li>
<li><a href="../zh-CN481596/index.html">è§£æELK 7.5è®¾ç½®ä»¥è¿›è¡ŒMikrotikæ—¥å¿—åˆ†æ</a></li>
<li><a href="../zh-CN481598/index.html">å¯¹å¯¹æŠ—Avalonia UIåŠ¨ç‰©å›­å¹³å°çš„è´¡çŒ®å¾ˆå°</a></li>
<li><a href="../zh-CN481600/index.html">ç›†æ™¯å®¶æ—Wikiå¼•æ“ï¼š2019å¹´ç»“æœ</a></li>
<li><a href="../zh-CN481604/index.html">è½¦é‡Œé›…å®¾æ–¯å…‹è‹›åˆ»çš„å¼€å‘äººå‘˜å¦‚ä½•ä¸ºGoogle Playå’Œç¤¾äº¤ç½‘ç»œåˆ¶ä½œæ¸¸æˆ</a></li>
<li><a href="../zh-CN481610/index.html">PostgreSQLåæ¨¡å¼ï¼šåœ¨è´Ÿè½½ä¸‹æ›´æ–°å¤§è¡¨</a></li>
<li><a href="../zh-CN481612/index.html">æˆ‘ä»¬å¯¹Avalonia UIäº‰å–æ›´å°‘å¹³å°çš„è´¡çŒ®</a></li>
<li><a href="../zh-CN481616/index.html">æµ‹åœ°çº¿åœ†é¡¶ã€‚ å…³äºè®¾å¤‡å’Œæˆ‘çš„è®¡ç®—ç»éªŒ</a></li>
<li><a href="../zh-CN481618/index.html">Unity MVPæˆ–å¦‚ä½•ç®€åŒ–ç”Ÿæ´»</a></li>
<li><a href="../zh-CN481620/index.html">ç»åšç½‘ç»œSRXå’ŒCisco ASAï¼šä¸‹ä¸€ä¸ªç³»åˆ—</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>