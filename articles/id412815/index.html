<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš¡ ğŸ­ ğŸ‘ğŸ½ Manajer Web, OpenVPN Client Keys VPNFace Lite â« ğŸ˜ˆ ğŸ™ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Intro 


 Meningkatnya permintaan VPN huruf ajaib dan alasannya, jauh dari teknologi jaringan, bahkan tidak menarik untuk diajak bercanda. 
 Hai, apak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Manajer Web, OpenVPN Client Keys VPNFace Lite</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412815/"><h1 id="intro">  Intro </h1><br><p>  Meningkatnya permintaan VPN huruf ajaib dan alasannya, jauh dari teknologi jaringan, bahkan tidak menarik untuk diajak bercanda. </p><br><blockquote>  Hai, apakah Anda pandai komputer?  bantu saya tentang vpn? </blockquote><a name="habracut"></a><br><p>  Bahkan, saya bahkan senang bahwa orang-orang mulai mempelajari dasar-dasar jaringan komputer (apa vpn, apa yang terjadi, dan mengapa berbagai situs mulai membukanya?), Dan, jika mungkin, membantu.  Saya mencoba untuk mendorong proses mengkonfigurasi sendiri server VPN saya, tetapi saya mengerti bahwa <em>tidak semua orang harus menjadi administrator sistem</em> , jadi beberapa teman hanya menyarankan membeli server dan memberikannya kepada saya untuk konfigurasi. </p><br><p>  Tetapi setiap programmer harus malas agar tidak mengulangi hal yang sama berulang kali.  Melakukan tindakan yang sama berulang kali mengasah keterampilan, tetapi membunuh semua minat pengembangan dan kreativitas (dan waktu). </p><br><p>  Maka, dengan menyiapkan server VPN ketiga, saya menyadari bahwa itu perlu untuk mengotomatisasi semua ini dan membuat <em>pengguna ramah</em> , sehingga setelah instruksi singkat bahkan pengguna yang paling biasa dapat berbagi kunci ovpn dengan teman atau kerabat.  Dan bahkan lebih baik - untuk menginstal sistem, pengguna dapat secara mandiri dengan keterampilan dan pengetahuan minimal. </p><br><p>  Jadi proyek VPNFace lahir - satu set skrip server untuk mengelola kunci pengguna dari server OpenVPN, dan panel kontrol web untuk mereka.  Dan setelah beberapa hari pengembangan, saya mendapati diri saya berpikir bahwa sekitar 25% dari fungsionalitas yang akan diletakkan tidak akan pernah diklaim oleh "pengguna biasa" yang sama ini, dan awalan Lite ditambahkan ke namanya, dan konsep utama proyek berubah dari <em>desainer tujuan umum</em> menjadi <em>berpikiran sempit. alat</em> , yang pada saat yang sama juga secara signifikan mengurangi waktu pengembangan sebelum rilis. </p><br><p>  Tentu saja - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="Google Garis Besar VPN">yah, itu tidak pernah terjadi</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" title="Pritunl">seperti</a> itu - mengapa manajer OpenVPN lain?  Sejujurnya - pikiran tentang proyek lain dari manajer VPN muncul di benak saya ketika inti utama sudah bekerja, dan saya melihat segala macam hal kecil.  Awalnya saya kesal karena saya sangat bodoh dan bahkan tidak melakukan studi minimum (karena saya tidak suka memproduksi sepeda khususnya), tetapi setelah mempelajari proyek-proyek di atas, saya menyadari bahwa tambang saya juga memiliki ceruk pasar sendiri. </p><br><p>  Fitur Utama: </p><br><ol><li>  Minimalisme fungsional: pengguna biasa, ketika berinteraksi dengan vpn sebagai administrator, hanya memerlukan beberapa fungsi - buat kunci, kunci, dan buka kunci.  Dia tidak mungkin berpikir tentang membuat server VPN lain jika dia punya server yang berfungsi, atau naik untuk mengubah data pusat sertifikat.  Hanya sedikit orang yang membutuhkan grafik lalu lintas yang indah, dan fungsionalitas server perusahaan, untuk tujuan <em>tenang menggunakan telegram</em> . </li><li>  Minimalisme perangkat lunak: satu-satunya program yang dibutuhkan pengguna adalah klien OpenVPN resmi, tersedia di semua sistem dan perangkat.  Panel kontrol kunci adalah aplikasi web yang berjalan di browser.  Otorisasi administratif dilakukan oleh kunci vpn. </li><li>  Konfigurasi semi-tetap: 80 persen pengguna memerlukan hal yang sama, dan mereka tidak peduli apa alamat IP di dalam jaringan (mereka bahkan tidak tahu bahwa mereka ada di sana), 15% lainnya memerlukan sedikit lebih banyak, tetapi, sama, satu dan sama juga, 5% sisanya menulis hal-hal serupa sendiri, menerapkan semua yang mereka butuhkan, sehingga Anda tidak bisa khawatir tentang mereka.  Namun demikian, panel dapat dihubungkan secara manual ke server yang sudah openvpn, atau memperbaiki data sertifikat sebelum instalasi standar. </li><li>  Detasemen absolut ke perusahaan hosting atau layanan pihak ketiga lainnya - ada cukup banyak salinan dalam perselisihan tentang hosting paling ajaib, ini tetap sepenuhnya menjadi pilihan pengguna.  Sistem operasi server lebih penting untuk skrip - ditulis di bawah sistem Ubuntu / Debian, tetapi semua host memilikinya.  Sistem akan berdiri dengan tenang baik di jaringan rumah internal maupun di perusahaan. </li><li>  proses instalasi yang paling disederhanakan pada server yang baru dibeli bersih: jika sesuatu dapat dilakukan tanpa partisipasi pengguna, ini dilakukan dengan menggunakan hardcode.  Karena Lite.  Ya, itu tidak mungkin untuk mencapai installer seperti Google Outline, itu memerlukan koneksi pengguna melalui ssh untuk memulai instalasi, dan pembelian independen dari server, tetapi itu mungkin untuk mencapai bahwa pengetahuan tentang "bagaimana menghubungkan melalui ssh" adalah salah satu yang paling sulit.  Dengan "pengaturan default", pengguna dikonfigurasikan dengan konfigurasi "standar" tanpa pertanyaan. </li></ol><br><h1 id="panel-upravleniya-klyuchami">  Panel Kontrol Kunci </h1><br><p>  Selama instalasi default, tiga server VPN dibuat: administrator, Internet, dan gelap - tidak sulit menebak dari namanya, yang pertama berfungsi untuk akses administrator ke server dan panel kontrol tombol (dan ssh, jika perlu), yang kedua - segera melepaskan pengguna ke Internet, dan yang ketiga secara transparan mengambil semua lalu lintas yang mungkin ke jaringan tor (lalu lintas udp kecuali DNS tidak pergi ke mana pun, dan DNS pergi ke tor) </p><br><p><img src="https://habrastorage.org/webt/3g/wh/lv/3gwhlv6hr0jbzvhfd6jfrjeldsm.png"></p><br><p>  Panel kontrol diputuskan untuk dibuat pada AngularJS keenam yang baru ( <em>selama instalasi, versi yang dikompilasi dari panel diunduh, sehingga perpustakaan sudut tidak diperlukan untuk bekerja</em> ).  Saya suka konsep aplikasi web, dan saya mencoba mengembangkan ke arah ini, jika memungkinkan.  Saya juga ingin mempelajari materi sudut untuk waktu yang lama untuk membuat panel admin Google di berbagai proyek. </p><br><p>  Manajemen kunci, sebagaimana telah ditunjukkan, disederhanakan menjadi minimum: </p><br><p>  Kunci Baru: </p><br><p><img src="https://habrastorage.org/webt/tr/ld/k_/trldk_mwy4vblg-n-pcdvh3gurk.png"></p><br><p>  Kunci kunci: </p><br><p><img src="https://habrastorage.org/webt/b_/pa/i9/b_pai9e-us8hdshodi5irijqrm4.png"></p><br><p>  Buka Kunci: </p><br><p><img src="https://habrastorage.org/webt/4x/sd/hi/4xsdhithv5rglkaazhu9j1o1ptw.png"></p><br><p>  Tombol unduh memberi file ovpn yang sudah selesai untuk koneksi. </p><br><p>  Bantuan pengguna minimum ada di panel: </p><br><p><img src="https://habrastorage.org/webt/di/eb/ck/diebckjumhsfakj7hzkjmbaq4u4.png"></p><br><p>  Dan dokumentasi yang dikompilasi termasuk dalam proyek, yang secara default naik untuk subnet administratif di port 81: </p><br><p><img src="https://habrastorage.org/webt/ty/2n/2i/ty2n2i9ntmsqykn74qffv7nrz5s.png"></p><br><p>  Arti dari versi Lite juga membatasi dukungan bahasa - saat ini seluruh proyek hanya ada di Rusia, dan multibahasa bahkan tidak diletakkan dalam kernel. </p><br><h1 id="servernaya-chast">  Sisi server </h1><br><p>  Sisi server berjalan pada skrip nodejs dan bash.  Mengapa ada simpul?  Saya menyukainya, dan saya punya banyak proyek untuknya.  Memiliki koleksi vpn-manager sepertinya ide yang bagus bagi saya.  Skrip instalasi menarik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">manajer versi simpul</a> , menginstal simpul v10 melalui itu, dan membuat tautan ke folder seluruh sistem untuk layanan yang ditulis di bawah simpuljs untuk bekerja. </p><br><p>  Paket yang diinstal pada node juga minimal - selamanya, selamanya layanan untuk meluncurkan proyek sebagai layanan sistem, express - untuk api web, shelljs - untuk mengeksekusi perintah konsol, ip - address dan subnet kalkulator, output warna kapur ke konsol.  Tentu saja, daftar ini dapat disingkat dengan perfeksionisme minimalis, tetapi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">hukum kedua Akin</a> jelas muncul entah dari mana (hukum yang sama dapat diterapkan pada pertanyaan "mengapa nodejs?" Dan beberapa yang lain) dan meskipun ada keinginan untuk minimalis dalam masalah lain, di sini Saya memutuskan untuk tidak masuk terlalu dalam. </p><br><p>  Skrip server mengelola server openvpn melalui serangkaian skrip bash dan memerlukan struktur file direktori root tertentu dan konfigurasi file openvpn.  Dua file json digunakan sebagai basis data, yang memungkinkan: </p><br><ol><li>  singkirkan interaksi dengan database seperti mongo / sql dan dependensi serta komplikasi terkait </li><li>  tanpa masalah, siapkan "pangkalan" (dan struktur direktori dan file) secara manual atau dengan skrip, ketika menginstal pada server yang dikonfigurasikan, ketika installer yang termasuk dalam kit bahkan dapat berbahaya dan proses instalasi standar harus dihindari (kebutuhan untuk instalasi diperiksa secara tepat untuk keberadaan dan isi json file basis data) </li></ol><br><p>  Bonus terpisah dari panel kontrol sebagai aplikasi web independen adalah pemisahan fungsionalitas server menjadi seperangkat titik akhir http api yang terpisah, yang membuka kemungkinan mengelola kunci pengguna melalui permintaan http pihak ketiga ke program pihak ketiga. </p><br><h1 id="prostaya-ustanovka-po-umolchaniyu">  Instalasi mudah (default) </h1><br><p>  Diasumsikan bahwa instalasi seperti itu akan berjalan pada server baru yang bersih.  Jika server sudah dikonfigurasi untuk beberapa tugas - lebih baik merujuk ke instalasi manual (agar tidak merusak fungsi yang ada). </p><br><p>  Saya suka instalasi nvm (manajer versi simpul) di mana pengguna perlu mengeksekusi hanya satu perintah di terminal, yang ia salin dari situs proyek, sehingga installer default bekerja dengan cara yang sama.  Saat skrip bash instalasi startup sedang berjalan, paket iptables-persistent akan meminta pengguna untuk menyimpan aturan iptables saat ini. </p><br><p><img src="https://habrastorage.org/webt/f_/vc/ke/f_vckeeni_hi396mjlwhkjmuuko.png"></p><br><p>  Pilihan pengguna tidak ada bedanya, karena setelah menyelesaikan instalasi, tindakan terakhir akan mengkonfigurasi ulang firewall, dan seperangkat aturan baru akan menimpa pemilihan saat ini.  Di akhir pekerjaan, skrip akan meminta Anda untuk menyelesaikan instalasi melalui antarmuka web. </p><br><p><img src="https://habrastorage.org/webt/ih/d2/-e/ihd2-en90hmiyiynxpqjexvxljc.png"></p><br><p>  Instalasi web dimulai dengan konfirmasi alamat ip publik dari server.  Secara default, skrip web mengambil data dari url string browser.  Berfokus pada ip ini, kode server mencari antarmuka alamat jaringan untuk konfigurasi firewall dan server openvpn di masa depan. </p><br><p><img src="https://habrastorage.org/webt/cs/mh/hg/csmhhgijn6e6epp86hfwemjtyc8.png"></p><br><p>  Setelah menerima data jaringan, penginstal membuat server administrator vpn.  Pembuatan kunci kriptografi selama pengaturan direktori root membutuhkan waktu, dan selama pengembangan, pada mesin yang sama, waktu ini bervariasi dari 1 hingga 15 menit. </p><br><p>  Ketika server dibuat dan dimulai, penginstal melanjutkan ke langkah kedua, di mana ia meminta pengguna untuk membuat kunci administrator. </p><br><p><img src="https://habrastorage.org/webt/ct/ib/r9/ctibr9x0ju5opuhykwxyhz4w0gc.png"></p><br><p>  Kemudian masuk ke mode siaga untuk menghubungkan administrator vpn.  Diharapkan bahwa vpn akan terhubung pada perangkat yang sama dari mana instalasi dilakukan. </p><br><p><img src="https://habrastorage.org/webt/ib/s-/am/ibs-am0zswrpurcj2izew-bwlws.png"></p><br><p>  Ketika seorang pengguna terhubung ke server administrator vpn, itu menjadi tersedia di alamat 10.1.0.1, dan permintaan jsonp dari halaman installer berhasil melewati sana, yang menjadi sinyal untuk mengarahkan halaman ke alamat internal dan menyelesaikan instalasi. </p><br><p><img src="https://habrastorage.org/webt/ug/uv/si/uguvsiqhx4tege1hc6opgol94dk.png"></p><br><p>  Pada tahap akhir instalasi, dua server vpn yang tersisa dibuat dan dikonfigurasi (waktu untuk menghasilkan kriptografi * 2), untuk, nginx dan iptalbles.  Setelah menerima sinyal untuk menyelesaikan instalasi dari sisi server, skrip akan mengarahkan halaman ke panel kontrol utama. </p><br><h1 id="ruchnaya-ustanovka">  Instalasi manual </h1><br><p>  Pemasangan manual panel kontrol pada struktur kerja server OpenVPN memerlukan beberapa langkah dan secara teknis layak oleh administrator linux (dan saya tidak berpikir bahwa orang lain selain mereka mungkin memerlukan instalasi manual): </p><br><ol><li>  persiapan lingkungan nodejs sesuai dengan persyaratan keamanan server saat ini dan pengorganisasian skrip dalam bentuk yang diperlukan (layanan, manual, dll.) </li><li>  menyiapkan struktur file data dan direktori server, membuat json "database" </li><li>  mengatur proxy nginx pada panel kontrol dan dokumentasi, jika perlu </li></ol><br><p>  Detail dan detail teknis dapat ditemukan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi online</a> . </p><br><h1 id="v-kachestve-zaklyucheniya">  Kesimpulannya </h1><br><p>  Saya harap proyek ini berguna bagi seseorang. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Repositori proyek</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Repositori kode sumber panel web sudut</a> <br>  Proyek ini didistribusikan di bawah lisensi MIT dan diterbitkan untuk mendukung gerakan DIGITAL RESITANCE. </p><br><p>  Gagasan Pengembangan PS di atas atap - dan kencangkan multibahasa, dan singkirkan momen-momen sulit dalam kode, dan tambahkan fungsionalitas untuk membuat server, mengelola perutean dan firewall, mengubah sistem menjadi <em>perancang universal</em> , dll.  dll, tetapi bagaimana dan kapan semua ini akan diterapkan?  Tanpa petunjuk, masa depan akan muncul. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id412815/">https://habr.com/ru/post/id412815/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id412805/index.html">Langkah-langkah saya, keberhasilan dan kesalahan dalam dunia dev game dengan contoh bot game di Telegram</a></li>
<li><a href="../id412807/index.html">Catatan dari penyedia IoT. Propriety</a></li>
<li><a href="../id412809/index.html">Otentikasi dua faktor di situs menggunakan token USB. Bagaimana cara membuat akses ke portal layanan aman?</a></li>
<li><a href="../id412811/index.html">C DevTools on Elbrus: laporan yang jelas dari HolyJS 2018 Piter</a></li>
<li><a href="../id412813/index.html">Header HTTP yang tidak perlu</a></li>
<li><a href="../id412819/index.html">Jumat Pemanasan untuk Pikiran: Karma Sempurna untuk Habrahabr</a></li>
<li><a href="../id412821/index.html">Lihat, perhatikan, lihat: apa bedanya?</a></li>
<li><a href="../id412823/index.html">Wawancara dalam bahasa Inggris: cara mendapatkannya tidak lebih buruk dari teman putra ibu</a></li>
<li><a href="../id412825/index.html">Perangkat Blok QEMU</a></li>
<li><a href="../id412827/index.html">Pavel Durov: Setelah banding ILV, Apple memblokir pembaruan Telegram di seluruh dunia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>