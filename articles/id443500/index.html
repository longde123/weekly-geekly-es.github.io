<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍🤝‍👨🏻 🧒🏿 🏸 Komponen fungsional dengan React Hooks. Kenapa lebih baik? 🔔 📿 👩‍🏭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ketika React.js 16.8 dirilis kami mendapat kesempatan untuk menggunakan React Hooks. Kait membuat kita dapat menulis komponen yang berfungsi penuh men...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Komponen fungsional dengan React Hooks. Kenapa lebih baik?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443500/"><p>  Ketika React.js 16.8 dirilis kami mendapat kesempatan untuk menggunakan React Hooks.  Kait membuat kita dapat menulis komponen yang berfungsi penuh menggunakan fungsi.  Kita dapat menggunakan semua fitur React.js dan melakukannya dengan cara yang lebih nyaman. </p><br><p>  Banyak orang tidak setuju dengan konsepsi Hooks.  Dalam artikel ini saya ingin memberi tahu tentang beberapa keuntungan penting yang diberikan React Hooks kepada Anda dan mengapa kami perlu menulis dengan Hooks. </p><br><p>  Saya tidak akan berbicara tentang cara menggunakan kait.  Itu tidak terlalu penting untuk contoh.  Jika Anda ingin membaca sesuatu tentang topik ini, Anda dapat menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi resmi</a> .  Juga, jika topik ini menarik bagi Anda, saya akan menulis lebih banyak tentang Hooks. </p><a name="habracut"></a><br><h2 id="hooks-allow-us-to-reuse-our-code-easily">  Kait memungkinkan kita menggunakan kembali kode kita dengan mudah </h2><br><p>  Mari kita bayangkan sebuah komponen yang merender bentuk sederhana.  Ini bisa menjadi sesuatu yang menunjukkan beberapa input kepada kami dan memungkinkan kami untuk mengubah nilainya. </p><br><p>  Dengan notasi kelas, akan ada sesuatu seperti ini: </p><br><pre><code class="plaintext hljs">class Form extends React.Component { state = { // Fields values fields: {}, }; render() { return ( &lt;form&gt; {/* Inputs render */} &lt;/form&gt; ); }; }</code> </pre> <br><p>  Mari kita bayangkan sekarang bahwa kita ingin secara otomatis menyimpan nilai bidang kita ke backend setiap kali mereka berubah.  Saya menyarankan untuk melewati definisi fungsi eksternal seperti <code>shallowEqual</code> dan <code>debounce</code> . </p><br><pre> <code class="plaintext hljs">class Form extends React.Component { constructor(props) { super(props); this.saveToDraft = debounce(500, this.saveToDraft); }; state = { // Fields values fields: {}, // Draft saving meta draft: { isSaving: false, lastSaved: null, }, }; saveToDraft = (data) =&gt; { if (this.state.isSaving) { return; } this.setState({ isSaving: true, }); makeSomeAPICall().then(() =&gt; { this.setState({ isSaving: false, lastSaved: new Date(), }) }); } componentDidUpdate(prevProps, prevState) { if (!shallowEqual(prevState.fields, this.state.fields)) { this.saveToDraft(this.state.fields); } } render() { return ( &lt;form&gt; {/* Draft saving meta render */} {/* Inputs render */} &lt;/form&gt; ); }; }</code> </pre> <br><p>  Komponen yang sama dengan kait: </p><br><pre> <code class="plaintext hljs">const Form = () =&gt; { // Our state const [fields, setFields] = useState({}); const [draftIsSaving, setDraftIsSaving] = useState(false); const [draftLastSaved, setDraftLastSaved] = useState(false); useEffect(() =&gt; { const id = setTimeout(() =&gt; { if (draftIsSaving) { return; } setDraftIsSaving(true); makeSomeAPICall().then(() =&gt; { setDraftIsSaving(false); setDraftLastSaved(new Date()); }); }, 500); return () =&gt; clearTimeout(id); }, [fields]); return ( &lt;form&gt; {/* Draft saving meta render */} {/* Inputs render */} &lt;/form&gt; ); }</code> </pre> <br><p>  Seperti yang kita lihat, tidak ada perbedaan besar di sini.  Kami mengganti <code>this.state</code> dengan <code>useState</code> hook dan menyimpan konsep di <code>useEffect</code> hook sekarang. </p><br><p>  Perbedaan yang ingin saya tunjukkan di sini adalah (ada perbedaan lain juga, tetapi saya akan berkonsentrasi pada yang ini): kita dapat dengan mudah mengekstrak kode ini dari komponen kita dan menggunakannya di tempat lain: </p><br><pre> <code class="plaintext hljs">// useDraft hook can be used in any other component const useDraft = (fields) =&gt; { const [draftIsSaving, setDraftIsSaving] = useState(false); const [draftLastSaved, setDraftLastSaved] = useState(false); useEffect(() =&gt; { const id = setTimeout(() =&gt; { if (draftIsSaving) { return; } setDraftIsSaving(true); makeSomeAPICall().then(() =&gt; { setDraftIsSaving(false); setDraftLastSaved(new Date()); }); }, 500); return () =&gt; clearTimeout(id); }, [fields]); return [draftIsSaving, draftLastSaved]; } const Form = () =&gt; { // Our state const [fields, setFields] = useState({}); const [draftIsSaving, draftLastSaved] = useDraft(fields); return ( &lt;form&gt; {/* Draft saving meta render */} {/* Inputs render */} &lt;/form&gt; ); }</code> </pre> <br><p>  Dan kita bisa menggunakan hook <code>useDraft</code> di komponen lain!  Tentu saja, ini adalah contoh yang sangat sederhana, tetapi penggunaan kembali kode cukup penting dan contoh ini menunjukkan betapa mudahnya menggunakan Hooks. </p><br><h2 id="hooks-allow-us-to-write-component-in-more-intuitive-way">  Kait memungkinkan kita untuk menulis komponen dengan cara yang lebih intuitif </h2><br><p>  Mari kita bayangkan rendering komponen kelas, misalnya, layar obrolan, daftar obrolan, dan formulir pesan.  Seperti ini: </p><br><pre> <code class="plaintext hljs">class ChatApp extends React.Component { state = { currentChat: null, }; handleSubmit = (messageData) =&gt; { makeSomeAPICall(SEND_URL, messageData) .then(() =&gt; { alert(`Message is sent to chat ${this.state.currentChat}`); }); }; render() { return ( &lt;Fragment&gt; &lt;ChatsList changeChat={currentChat =&gt; { this.setState({ currentChat }); }} /&gt; &lt;CurrentChat id={currentChat} /&gt; &lt;MessageForm onSubmit={this.handleSubmit} /&gt; &lt;/Fragment&gt; ); }; }</code> </pre> <br><p>  Lalu bayangkan pengguna kami menggunakan komponen obrolan ini: </p><br><ul><li>  Mereka membuka obrolan 1 </li><li>  Mereka mengirim pesan (bayangkan jaringan yang lambat) </li><li>  Mereka membuka obrolan 2 </li><li>  Mereka melihat peringatan tentang pesan mereka: <br><ul><li>  "Pesan dikirim ke obrolan 2" </li></ul></li></ul><br><p>  Tapi mereka mengirim pesan ke obrolan kedua, bagaimana itu terjadi?  Itu karena metode kelas bekerja dengan nilai saat ini, bukan nilai yang kami miliki ketika kami memulai permintaan pesan.  Ini bukan masalah besar dengan komponen sederhana seperti ini, tetapi dapat menjadi sumber bug dalam sistem yang lebih kompleks. </p><br><p>  Di sisi lain, komponen fungsional bertindak dengan cara lain: </p><br><pre> <code class="plaintext hljs">const ChatApp = () =&gt; { const [currentChat, setCurrentChat] = useState(null); const handleSubmit = useCallback( (messageData) =&gt; { makeSomeAPICall(SEND_URL, messageData) .then(() =&gt; { alert(`Message is sent to chat ${currentChat}`); }); }, [currentChat] ); render() { return ( &lt;Fragment&gt; &lt;ChatsList changeChat={setCurrentChat} /&gt; &lt;CurrentChat id={currentChat} /&gt; &lt;MessageForm onSubmit={handleSubmit} /&gt; &lt;/Fragment&gt; ); }; }</code> </pre> <br><p>  Mari kita bayangkan pengguna kami: </p><br><ul><li>  Mereka membuka obrolan 1 </li><li>  Mereka mengirim pesan (bayangkan jaringan yang lambat) </li><li>  Mereka membuka obrolan 2 </li><li>  Mereka melihat peringatan tentang pesan mereka: <br><ul><li>  "Pesan dikirim ke obrolan 1" </li></ul></li></ul><br><p>  Nah, apa yang berubah?  Sekarang kami bekerja dengan sebuah nilai, ditangkap dalam momen render.  Kami sedang membuat <code>handleSubmit</code> baru setiap kali <code>currentChat</code> berubah.  Ini memungkinkan kita untuk melupakan perubahan di masa depan dan berpikir tentang <strong>sekarang</strong> . </p><br><p>  <em>Setiap komponen membuat menangkap semua yang digunakannya</em> . </p><br><h2 id="hooks-make-components-lifecycle-gone">  Kait membuat komponen siklus hidup hilang </h2><br><p>  Alasan ini sangat bersinggungan dengan yang sebelumnya.  React adalah perpustakaan UI deklaratif.  Deklaratif membuat UI membuat dan memproses lebih mudah.  Ini memungkinkan kita untuk melupakan tentang perubahan DOM penting. </p><br><p>  Meski begitu, ketika kita menggunakan kelas, kita menghadapi siklus komponen.  Ini terlihat seperti ini: </p><br><ul><li>  Pemasangan </li><li>  Memperbarui (setiap kali <code>state</code> atau properti berubah) </li><li>  Lepas </li></ul><br><p>  Tampaknya nyaman tetapi saya meyakinkan bahwa itu hanya karena kebiasaan kita.  Ini tidak seperti Bereaksi. </p><br><p>  Alih-alih ini, komponen fungsional memungkinkan kita untuk menulis kode komponen dan melupakan siklus hidup.  Kami hanya memikirkan <em>sinkronisasi</em> .  Kami menulis fungsi membuat UI kami dari alat peraga input dan keadaan dalam. </p><br><p>  Pada awalnya <code>useEffect</code> hook seperti penggantian untuk <code>componentDidMount</code> , <code>componentDidUpdate</code> dan metode siklus hidup lainnya.  Tapi tidak seperti ini.  Ketika kami menggunakan <code>useEffect</code> kami berkata untuk Bereaksi: "Hei, buat ini setelah merender komponen saya". </p><br><p>  Berikut adalah contoh yang bagus dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> besar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tentang useEffect</a> : </p><br><ul><li>  <strong>Bereaksi:</strong> Beri saya UI ketika negara adalah <code>0</code> . </li><li>  <strong>Komponen Anda:</strong> <br><ul><li>  Inilah hasil rendernya: <code>&lt;p&gt;You clicked 0 times&lt;/p&gt;</code> . </li><li>  Ingat juga untuk menjalankan efek ini setelah selesai: <code>() =&gt; { document.title = 'You clicked 0 times' }</code> . </li></ul></li><li>  <strong>Bereaksi:</strong> Tentu.  Memperbarui UI.  Hai browser, saya menambahkan beberapa hal ke DOM. </li><li>  <strong>Browser:</strong> Keren, saya melukisnya di layar. </li><li>  <strong>Bereaksi:</strong> Oke, sekarang saya akan menjalankan efek yang Anda berikan kepada saya. <br><ul><li>  Menjalankan <code>() =&gt; { document.title = 'You clicked 0 times' }</code> . </li></ul></li></ul><br><p>  Itu jauh lebih deklaratif, bukan? </p><br><h2 id="in-closing">  Sebagai penutup </h2><br><p>  React Hooks memungkinkan kami untuk menyingkirkan beberapa masalah dan membuat pengembangan lebih mudah.  Kita hanya perlu mengubah model mental kita.  Komponen fungsional sebenarnya adalah fungsi UI dari alat peraga.  Mereka menggambarkan bagaimana semua itu harus terjadi kapan saja dan membantu kita melupakan perubahan. </p><br><p>  Kita perlu belajar <strong>bagaimana</strong> menggunakannya, tapi hei, apakah Anda menulis komponen kelas dengan benar pada saat pertama? </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id443500/">https://habr.com/ru/post/id443500/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id443486/index.html">ReLEx SMILE: Bagaimana tidak membuat kesalahan dalam perkiraan</a></li>
<li><a href="../id443490/index.html">Mengapa saya membatasi pekerjaan saya pada Debian</a></li>
<li><a href="../id443492/index.html">Gim untuk pecinta dan pakar di Linux</a></li>
<li><a href="../id443494/index.html">Panduan: Cara Meluncurkan Produk SaaS di AppSumo - Keberhasilan dan Beberapa Kesalahan</a></li>
<li><a href="../id443498/index.html">Flightradar24 - bagaimana cara kerjanya? Bagian 2, Protokol ADS-B</a></li>
<li><a href="../id443502/index.html">Mengapa tepatnya 4 tahun yang lalu NASA menembakkan langit malam Cape Canaveral dengan roket Atlas V?</a></li>
<li><a href="../id443504/index.html">World Wide Web berusia tiga puluh tahun - apa yang akan terjadi selanjutnya?</a></li>
<li><a href="../id443506/index.html">Parser sederhana untuk youtube di tabel google</a></li>
<li><a href="../id443508/index.html">Game papan pendidikan untuk programmer</a></li>
<li><a href="../id443510/index.html">Notebook Compaq Armada 7700 - sebagai pengembangan dari lini Compaq LTE</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>