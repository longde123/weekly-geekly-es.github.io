<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯУЯ ЁЯд░ЁЯП╝ ЁЯУо рд╕реНрдХреНрд░реИрдЪ рд╕реЗ рд╕реНрдкреНрд░рд┐рдВрдЧ рдлреНрд░реЗрдорд╡рд░реНрдХ рдПрдкреАрдЖрдИ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ред рд╢реБрд░реБрдЖрддреА рдХреЗ рд▓рд┐рдП рд╡реЙрдХрдереНрд░реВред рднрд╛рдЧ 1 ЁЯЖЩ ЁЯНП тПоя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╕реНрдкреНрд░рд┐рдВрдЧ рдлреНрд░реЗрдорд╡рд░реНрдХ рд╕рдордЭрдиреЗ рдФрд░ рд╕реАрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЬрдЯрд┐рд▓ рд░реВрдкрд░реЗрдЦрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред рдЕрдзрд┐рдХрд╛рдВрд╢ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЗрд╕реЗ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХрд╛рд░реНрдпреЛрдВ рдФрд░ Google рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдзреАрд░реЗ-рдзреАрд░реЗ рд╕реА...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╕реНрдХреНрд░реИрдЪ рд╕реЗ рд╕реНрдкреНрд░рд┐рдВрдЧ рдлреНрд░реЗрдорд╡рд░реНрдХ рдПрдкреАрдЖрдИ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ред рд╢реБрд░реБрдЖрддреА рдХреЗ рд▓рд┐рдП рд╡реЙрдХрдереНрд░реВред рднрд╛рдЧ 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419679/"><img src="https://habrastorage.org/webt/iw/mz/82/iwmz824_ptetkxwvc6sqtwjmbjw.png"><br><br>  рд╕реНрдкреНрд░рд┐рдВрдЧ рдлреНрд░реЗрдорд╡рд░реНрдХ рд╕рдордЭрдиреЗ рдФрд░ рд╕реАрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЬрдЯрд┐рд▓ рд░реВрдкрд░реЗрдЦрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред  рдЕрдзрд┐рдХрд╛рдВрд╢ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЗрд╕реЗ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХрд╛рд░реНрдпреЛрдВ рдФрд░ Google рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдзреАрд░реЗ-рдзреАрд░реЗ рд╕реАрдЦрддреЗ рд╣реИрдВред  рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдкреНрд░рднрд╛рд╡реА рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкреВрд░реА рддрд╕реНрд╡реАрд░ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИ рдФрд░ рд╕рд╛рде рд╣реА рдпрд╣ рдорд╣рдВрдЧрд╛ рд╣реИред <br><br>  рдореИрдВ рдЖрдкрдХреЛ рд╕реНрдкреНрд░рд┐рдВрдЧ рдХреЗ рдЕрдзреНрдпрдпрди рдХреЗ рд▓рд┐рдП рдореМрд▓рд┐рдХ рд░реВрдк рд╕реЗ рдирдП рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреА рдкреЗрд╢рдХрд╢ рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ред  рдпрд╣ рдЗрд╕ рддрдереНрдп рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИ рдХрд┐ рдПрдХ рд╡реНрдпрдХреНрддрд┐ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреА рдПрдХ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рд╡рд╕рдВрдд рдХреЗ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреА рдЦрд╝рд╛рд╕рд┐рдпрдд рдпрд╣ рд╣реИ рдХрд┐, рд╡рд╕рдВрдд рдХреЗ рдЕрдзреНрдпрдпрди рдХрд┐рдП рдЧрдП рдкрд╣рд▓реБрдУрдВ рдХреА 100% рд╕рдордЭ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдЬрд╛рд╡рд╛ рдХреЛрд░ (рдПрдиреЛрдЯреЗрд╢рди, рд░рд┐рдлреНрд▓реЗрдХреНрд╢рди, рдлрд╛рдЗрд▓реНрд╕, рдЬреЗрдирд░рд┐рдХ) рдореЗрдВ рднреА рдмрдбрд╝реА рд╡реГрджреНрдзрд┐ рджреЗрддрд╛ рд╣реИред <br><br>  рд▓реЗрдЦ рдЖрдкрдХреЛ рдПрдХ рдЕрд╡рд┐рд╕реНрдорд░рдгреАрдп рдЕрдиреБрднрд╡ рджреЗрдЧрд╛ рдФрд░ рдЖрдкрдХреЛ рдПрдХ рдирд┐рд░реНрдгрд╛рдпрдХ рдбреЗрд╡рд▓рдкрд░ рдХреА рддрд░рд╣ рдорд╣рд╕реВрд╕ рдХрд░рд╛рдПрдЧрд╛ред  рдХрджрдо рд╕реЗ рдХрджрдо, рдЖрдк рдЕрдкрдиреА рдХрдХреНрд╖рд╛рдУрдВ рдХреЛ рд╕реЗрдо рдмрдирд╛рдПрдВрдЧреЗ рдФрд░ рдЙрдирдХреЗ рдЬреАрд╡рди рдЪрдХреНрд░ (рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡рд╕рдВрдд рдореЗрдВ рдЙрд╕реА рддрд░рд╣) рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░реЗрдВрдЧреЗред  рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдХрдХреНрд╖рд╛рдПрдВ <b>рдмреАрдирдлреИрдХреНрдЯрд░реА</b> , <b>рдХрдВрдкреЛрдиреЗрдВрдЯ</b> , <b>рд╕рд░реНрд╡рд┐рд╕</b> , <b>рдмреАрдирдкреЛрд╕реНрдЯрдкреНрд░реЛрд╕реЗрд╕рд░</b> , <b>рдмреАрдирдирд╛рдорд╡реЗрдпрд░</b> , <b>рдмреАрдирдлреИрдХреНрдЯрд░реАрд╡реЗрдпрд░</b> , <b>рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝рд┐рдВрдЧ</b> <b>рдмреАрди</b> , <b>рдкреЛрд╕реНрдЯрдХрдВрд╕реНрдЯреНрд░рдХреНрдЯ</b> , <b>рдкреНрд░реАрдбреЗрд╕реНрдЯреНрд░реЙрдп</b> , <b>рдбрд┐рд╕реНрдкреЛрдЬреЗрдмрд▓</b> <b>рдмреАрди</b> , <b>рдРрдкреНрд▓реАрдХреЗрд╢рдирдЯреЗрдХреНрд╕реНрдЯ</b> , <b>рдПрдкреНрд▓рд┐рдХреЗрд╢рдирд▓реАрд╕реНрдЯрдирд░</b> , <b>рдХреЙрдирдЯреЗрдХреНрд╕реНрдЯрдбреЛрдЬреЗрдВрдЯ рд╣реИрдВ</b> ред <br><a name="habracut"></a><br><h2>  рдереЛрдбрд╝рд╛ рдЕрдкрдиреЗ рдмрд╛рд░реЗ рдореЗрдВ </h2><br>  рдореЗрд░рд╛ рдирд╛рдо рдпрд╛рд░реЛрд╕реНрд▓рд╛рд╡ рд╣реИ рдФрд░ рдореИрдВ 4 рд╕рд╛рд▓ рдХреЗ рдЕрдиреБрднрд╡ рдХреЗ рд╕рд╛рде рдЬрд╛рд╡рд╛ рдбреЗрд╡рд▓рдкрд░ рд╣реВрдВред  рдлрд┐рд▓рд╣рд╛рд▓ рдореИрдВ рдИрдкреАрдПрдПрдо рд╕рд┐рд╕реНрдЯрдореНрд╕ (рдПрд╕рдкреАрдмреА) рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рддрд╛ рд╣реВрдВ, рдФрд░ рдореИрдВ рдЙрди рддрдХрдиреАрдХреЛрдВ рдореЗрдВ рдЧрд╣рд░рд╛рдИ рд╕реЗ рддрд▓реНрд▓реАрди рд╣реВрдВ рдЬреЛ рд╣рдо рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдЕрдХреНрд╕рд░ рдореБрдЭреЗ рд╡рд╕рдВрдд рд╕реЗ рдирд┐рдкрдЯрдирд╛ рдкрдбрд╝рддрд╛ рд╣реИ, рдФрд░ рдореИрдВ рдЗрд╕рдореЗрдВ рдХреБрдЫ рдмреАрдЪ рдХрд╛ рдореИрджрд╛рди рджреЗрдЦрддрд╛ рд╣реВрдВ рдЬрд┐рд╕рдореЗрдВ рдЖрдк рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВ (рдЬрд╛рд╡рд╛ рд╣рд░ рдХреЛрдИ рдЗрддрдиреА рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЬрд╛рдирддрд╛ рд╣реИ, рдФрд░ рдмрд╣реБрдд рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрдкрдХрд░рдг рдФрд░ рдкреНрд░реМрджреНрдпреЛрдЧрд┐рдХрд┐рдпрд╛рдВ рднреА рдЖ рд╕рдХрддреА рд╣реИрдВ рдФрд░ рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ)ред <br><br>  рдХреБрдЫ рдорд╣реАрдиреЗ рдкрд╣рд▓реЗ, рдореИрдВрдиреЗ рд╕реНрдкреНрд░рд┐рдВрдЧ рдкреНрд░реЛрдлреЗрд╢рдирд▓ v5.0 рд╕рд░реНрдЯрд┐рдлрд┐рдХреЗрд╢рди (рдХреЛрд░реНрд╕ рди рд▓реЗрдХрд░) рдкрд╛рд╕ рдХрд┐рдпрд╛ред  рдЙрд╕рдХреЗ рдмрд╛рдж, рдореИрдВрдиреЗ рд╕реЛрдЪрд╛ рдХрд┐ рдХреИрд╕реЗ рджреВрд╕рд░реЗ рд▓реЛрдЧреЛрдВ рдХреЛ рдмрд╕рдВрдд рд╕рд┐рдЦрд╛рдпрд╛ рдЬрд╛рдПред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдЗрд╕ рд╕рдордп рдХреЛрдИ рдкреНрд░рднрд╛рд╡реА рд╢рд┐рдХреНрд╖рдг рдкрджреНрдзрддрд┐ рдирд╣реАрдВ рд╣реИред  рдЕрдзрд┐рдХрд╛рдВрд╢ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рдкрд╛рд╕ рд░реВрдкрд░реЗрдЦрд╛ рдФрд░ рдЗрд╕рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХрд╛ рдмрд╣реБрдд рд╕рддрд╣реА рд╡рд┐рдЪрд╛рд░ рд╣реИред  рд╡рд╕рдВрдд рд╕реНрд░реЛрддреЛрдВ рдХреЛ рдбреАрдмрдЧ рдХрд░рдирд╛ рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рд╣реИ рдФрд░ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдмрд┐рд▓реНрдХреБрд▓ рдкреНрд░рднрд╛рд╡реА рдирд╣реАрдВ рд╣реИ (рдореИрдВ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рдЗрд╕ рдкрд░ рд╢реМрдХреАрди рдерд╛)ред  10 рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд░реЗрдВ?  рд╣рд╛рдВ, рдХрд╣реАрдВ рди рдХрд╣реАрдВ рдЖрдк рдЕрдкрдиреЗ рдЬреНрдЮрд╛рди рдХреЛ рдЧрд╣рд░рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдЕрдиреБрднрд╡ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди "рд╣реБрдб рдХреЗ рдиреАрдЪреЗ" рдХрд╛ рдмрд╣реБрдд рдХреБрдЫ рдЖрдкрдХреЗ рд╕рд╛рдордиреЗ рдХрднреА рдирд╣реАрдВ рдЦреБрд▓реЗрдЧрд╛ред  рдкрдврд╝реЗрдВ рдПрдХреНрд╢рди рдореЗрдВ рд╡рд╕рдВрдд?  рд╢рд╛рдВрдд, рд▓реЗрдХрд┐рди рдкреНрд░рдпрд╛рд╕ рдореЗрдВ рдорд╣рдВрдЧрд╛ред  рдореИрдВрдиреЗ рдЗрд╕реЗ 40% рдХрд╛рдо рдХрд┐рдпрд╛ рд╣реИ (рдкреНрд░рдорд╛рдгрди рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░реА рдХреЗ рджреМрд░рд╛рди), рд▓реЗрдХрд┐рди рдпрд╣ рдЖрд╕рд╛рди рдирд╣реАрдВ рдерд╛ред <br><br>  рдХрд┐рд╕реА рдЪреАрдЬрд╝ рдХреЛ рдЕрдВрдд рддрдХ рд╕рдордЭрдиреЗ рдХрд╛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рдЙрд╕реЗ рд╕реНрд╡рдпрдВ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ рд╣реИред  рд╣рд╛рд▓ рд╣реА рдореЗрдВ, рдореЗрд░реЗ рдкрд╛рд╕ рдпрд╣ рд╡рд┐рдЪрд╛рд░ рдерд╛ рдХрд┐ рдЖрдк рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рд╕реА рд╡реНрдпрдХреНрддрд┐ рдХрд╛ рдиреЗрддреГрддреНрд╡ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЗрд╕рдХреЗ рдбреАрдЖрдИ рдврд╛рдВрдЪреЗ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреА рджреЗрдЦрд░реЗрдЦ рдХрд░реЗрдЧрд╛ред  рдЗрд╕рдХреА рдореБрдЦреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛ рдпрд╣ рд╣реЛрдЧреА рдХрд┐ рдПрдкреАрдЖрдИ рдХрд╛ рдЕрдзреНрдпрдпрди рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдПрдкреАрдЖрдИ рдХреЗ рд╕рд╛рде рд╣реЛрдЧрд╛ред  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреА рдЕрдЬреАрдмрддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рд╡рд╕рдВрдд рдХреА рдЧрд╣рд░реА (рдмрд┐рдирд╛ рд░рд┐рдХреНрдд рд╕реНрдерд╛рди) рд╕рдордЭ рдХреЗ, рдПрдХ рд╡реНрдпрдХреНрддрд┐ рдХреЛ рдЬрд╛рд╡рд╛ рдХреЛрд░ рдореЗрдВ рдПрдХ рдмрдбрд╝реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдЕрдиреБрднрд╡ рдорд┐рд▓реЗрдЧрд╛ред  рд╕рдЪ рдХрд╣реВрдВ, рддреЛ рдореИрдВрдиреЗ рд╕реНрд╡рдпрдВ рд▓реЗрдЦ рдХреА рддреИрдпрд╛рд░реА рдХреЗ рджреМрд░рд╛рди рд╡рд╕рдВрдд рдФрд░ рдЬрд╛рд╡рд╛ рдХреЛрд░ рджреЛрдиреЛрдВ рдкрд░ рдмрд╣реБрдд рд╕реА рдирдИ рдЪреАрдЬреЗрдВ рд╕реАрдЦреАрдВред  рдЪрд▓реЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ! <br><br><h2>  рдЦрд░реЛрдВрдЪ рд╕реЗ рдкрд░рд┐рдпреЛрдЬрдирд╛ </h2><br>  рддреЛ, рдкрд╣рд▓реА рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЕрдкрдиреА рдкрд╕рдВрджреАрджрд╛ рдЖрдИрдбреАрдИ рдЦреЛрд▓реЗрдВ рдФрд░ рдЦрд░реЛрдВрдЪ рд╕реЗ рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдПрдВред  рд╣рдо рдХрд┐рд╕реА рднреА рдорд╛рд╡реЗрди рдпрд╛ рдХрд┐рд╕реА рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рд╕реЗ рдирд╣реАрдВ рдЬреБрдбрд╝реЗрдВрдЧреЗред  рд╣рдо рд╡рд╕рдВрдд рдирд┐рд░реНрднрд░рддрд╛ рдХреЛ рднреА рдирд╣реАрдВ рдЬреЛрдбрд╝реЗрдВрдЧреЗред  рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рдПрдХ рдПрдкреАрдЖрдИ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ рд╣реИ рдЬреЛ рд╕реНрдкреНрд░рд┐рдВрдЧ рдПрдкреАрдЖрдИ рдХреЗ рд╕рдорд╛рди рд╣реИ, рдФрд░ рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рд▓рд╛рдЧреВ рдХрд░реЗрдВред <br><br>  рдПрдХ рд╕реНрд╡рдЪреНрдЫ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ, 2 рдореБрдЦреНрдп рдкреИрдХреЗрдЬ рдмрдирд╛рдПрдВред  рдкрд╣рд▓рд╛ рдкреИрдХреЗрдЬ рдЖрдкрдХреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди ( <code>com.kciray</code> ), рдФрд░ рдЗрд╕рдХреЗ рдЕрдВрджрд░ <code>Main.java</code> рд╡рд░реНрдЧ рд╣реИред  рджреВрд╕рд░рд╛ рдкреИрдХреЗрдЬ org.springframework рд╣реИред  рд╣рд╛рдВ, рд╣рдо рдореВрд▓ рд╕реНрдкреНрд░рд┐рдВрдЧ рдХреА рдкреИрдХреЗрдЬ рд╕рдВрд░рдЪрдирд╛, рдЙрд╕рдХреА рдХрдХреНрд╖рд╛рдУрдВ рдФрд░ рдЙрдирдХреЗ рддрд░реАрдХреЛрдВ рдХреЗ рдирд╛рдо рдХреА рдирдХрд▓ рдХрд░реЗрдВрдЧреЗред  рдЗрд╕ рддрд░рд╣ рдХрд╛ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдкреНрд░рднрд╛рд╡ рд╣реИ - рдЬрдм рдЖрдк рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ рдХреБрдЫ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХрд╛ рдЕрдкрдирд╛ рд╕рд░рд▓ рдФрд░ рд╕рдордЭ рдореЗрдВ рдЖрдиреЗ рд▓рдЧрддрд╛ рд╣реИред  рдлрд┐рд░, рдЬрдм рдЖрдк рдмрдбрд╝реА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдЖрдкрдХреЛ рдкреНрд░рддреАрдд рд╣реЛрдЧрд╛ рдХрд┐ рд╡рд╣рд╛рдВ рд╕рдм рдХреБрдЫ рдЖрдкрдХреЗ рд╡рд░реНрдХрдкреАрд╕ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕рд┐рд╕реНрдЯрдо рдХреЛ рд╕рдордЧреНрд░ рд░реВрдк рд╕реЗ рд╕рдордЭрдиреЗ, рдЙрд╕рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░рдиреЗ, рдмрдЧреНрд╕ рдХреЛ рдареАрдХ рдХрд░рдиреЗ, рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ, рдЗрддреНрдпрд╛рджрд┐ рдкрд░ рдмрд╣реБрдд рд╕рдХрд╛рд░рд╛рддреНрдордХ рдкреНрд░рднрд╛рд╡ рдбрд╛рд▓ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдпрджрд┐ рдЖрдкрдХреЛ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рд╣реИ, рддреЛ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ рдПрдХ</a> рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИрдВ</a> ред <br><br><h2>  рдПрдХ рдХрдВрдЯреЗрдирд░ рдмрдирд╛рдПрдБ </h2><br>  рдЖрд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрд╛рд░реНрдп рд╕реЗрдЯ рдХрд░реЗрдВред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 2 рд╡рд░реНрдЧ рд╣реИрдВ - <code>ProductFacade</code> рдФрд░ <code>PromotionService</code> ред  рдЕрдм рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдЗрди рд╡рд░реНрдЧреЛрдВ рдХреЛ рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрддрдирд╛ рдХрд┐ рдХрдХреНрд╖рд╛рдПрдВ рд╕реНрд╡рдпрдВ рдПрдХ-рджреВрд╕рд░реЗ (рдкреИрдЯрд░реНрди DI) рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВред  рд╣рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рд╡рд░реНрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ рдЗрди рд╕рднреА рд╡рд░реНрдЧреЛрдВ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░реЗрдЧрд╛ рдФрд░ рдЙрдирдХреЗ рдмреАрдЪ рдирд┐рд░реНрднрд░рддрд╛ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░реЗрдЧрд╛ред  рдЪрд▓реЛ рдЗрд╕реЗ рдПрдХ рдХрдВрдЯреЗрдирд░ рдХрд╣рддреЗ рд╣реИрдВред  рдЪрд▓реЛ <code>Container</code> рд╡рд░реНрдЧ рдмрдирд╛рдПрдБ ... рд╣рд╛рд▓рд╛рдВрдХрд┐ рдирд╣реАрдВ, рд░реБрдХреЛ!  рд╡рд╕рдВрдд рдореЗрдВ рдПрдХ рднреА рдХрдВрдЯреЗрдирд░ рд╡рд░реНрдЧ рдирд╣реАрдВ рд╣реИред  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХрдИ рдХрдВрдЯреЗрдирд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИрдВ, рдФрд░ рдЗрди рд╕рднреА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрдиреЛрдВ рдХреЛ 2 рдкреНрд░рдХрд╛рд░реЛрдВ - рдмрд┐рди рдХрд╛рд░рдЦрд╛рдиреЛрдВ рдФрд░ рд╕рдВрджрд░реНрднреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдмрд┐рди рдХрд╛рд░рдЦрд╛рдирд╛ рд╕реЗрдо рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдПрдХ рд╕рд╛рде рдЬреЛрдбрд╝рддрд╛ рд╣реИ (рдирд┐рд░реНрднрд░рддрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди, рдбреАрдЖрдИ), рдФрд░ рд╕рдВрджрд░реНрдн рдЙрд╕реА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХрд░рддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рдпрд╣ рдХреБрдЫ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдЕрдВрддрд░реНрд░рд╛рд╖реНрдЯреНрд░реАрдпрдХрд░рдг)ред  рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рдЕрдм рдЗрди рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рд░реНрдпреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдмрд┐рди рдХрд╛рд░рдЦрд╛рдиреЗ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВрдЧреЗред <br><br>  рдПрдХ рдирдпрд╛ <code>BeanFactory</code> рдХреНрд▓рд╛рд╕ рдмрдирд╛рдПрдВ рдФрд░ рдЗрд╕реЗ <code>BeanFactory</code> рдкреИрдХреЗрдЬ рдореЗрдВ рдбрд╛рд▓реЗрдВред  рдЗрд╕ рдХреНрд▓рд╛рд╕ рдХреЗ рдЕрдВрджрд░ <code>Map&lt;String, Object&gt; singletons</code> рд╕реНрдЯреЛрд░ <code>Map&lt;String, Object&gt; singletons</code> рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдмрд┐рди рдХреА <code>id</code> рдХреЛ рдмрд┐рди рдореЗрдВ рд╣реА рдореИрдк рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рдореЗрдВ <code>Object getBean(String beanName)</code> рд╡рд┐рдзрд┐ рдЬреЛрдбрд╝реЗрдВ, рдЬреЛ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рд╕реЗрдо рдХреЛ рдЦреАрдВрдЪрддрд╛ рд╣реИред <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Map&lt;String, Object&gt; singletons = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBean</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String beanName)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> singletons.get(beanName); } }</code> </pre> <br>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ <code>BeanFactory</code> рдФрд░ <code>FactoryBean</code> рджреЛ рдЕрд▓рдЧ рдЪреАрдЬреЗрдВ рд╣реИрдВред  рдкрд╣рд▓рд╛ рдмрд┐рди рдХрд╛рд░рдЦрд╛рдирд╛ (рдХрдВрдЯреЗрдирд░) рд╣реИ, рдФрд░ рджреВрд╕рд░рд╛ рдмрд┐рди рдХрд╛рд░рдЦрд╛рдирд╛ рд╣реИ, рдЬреЛ рдХрдВрдЯреЗрдирд░ рдХреЗ рдЕрдВрджрд░ рдмреИрдарддрд╛ рд╣реИ рдФрд░ рдбрд┐рдмреНрдмреЗ рдХрд╛ рдЙрддреНрдкрд╛рджрди рднреА рдХрд░рддрд╛ рд╣реИред  рдлреИрдХреНрдЯреНрд░реА рдХреЗ рдЕрдВрджрд░ рдлреИрдХреНрдЯреНрд░реАред  рдпрджрд┐ рдЖрдк рдЗрди рдкрд░рд┐рднрд╛рд╖рд╛рдУрдВ рдХреЗ рдмреАрдЪ рднреНрд░рдорд┐рдд рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдпрд╛рдж рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдЕрдВрдЧреНрд░реЗрдЬреА рдореЗрдВ рджреВрд╕рд░реА рд╕рдВрдЬреНрдЮрд╛ рдЕрдЧреНрд░рдгреА рд╣реИ, рдФрд░ рдкрд╣рд▓рд╛ рдПрдХ рд╡рд┐рд╢реЗрд╖рдг рдЬреИрд╕рд╛ рд╣реИред  рдмреАрди <b>рдлреИрдХреНрдЯреНрд░реА рдореЗрдВ,</b> рдореБрдЦреНрдп рд╢рдмреНрдж рдлреИрдХреНрдЯреНрд░реА рд╣реИ, рдФрд░ рдлреИрдХреНрдЯреНрд░реА <b>рдмреАрди</b> рдореЗрдВ рдмреАрди рд╣реИред <br><br>  рдЕрдм, <code>ProductService</code> рдФрд░ <code>PromotionsService</code> рдХрдХреНрд╖рд╛рдПрдВ рдмрдирд╛рдПрдБред  <code>ProductService</code> рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗ рдЙрддреНрдкрд╛рдж рд▓реМрдЯрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рдпрд╣ рдЬрд╛рдВрдЪрдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдЗрд╕ рдЙрддреНрдкрд╛рдж рдкрд░ рдХреЛрдИ рдЫреВрдЯ (рдкреНрд░рдЪрд╛рд░) рд▓рд╛рдЧреВ рд╣реЛрддреА рд╣реИред  рдИ-рдХреЙрдорд░реНрд╕ рдореЗрдВ, рд░рд┐рдпрд╛рдпрддреА рдХрд╛рд░реНрдп рдХреЛ рдЕрдХреНрд╕рд░ рдПрдХ рдЕрд▓рдЧ рд╕реЗрд╡рд╛ рд╡рд░реНрдЧ (рдФрд░ рдХрднреА-рдХрднреА рддреГрддреАрдп-рдкрдХреНрд╖ рд╡реЗрдм рд╕реЗрд╡рд╛) рдХреЛ рдЖрд╡рдВрдЯрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PromotionsService</span></span></span><span class="hljs-class"> </span></span>{ } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PromotionsService promotionsService; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> PromotionsService </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPromotionsService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> promotionsService; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setPromotionsService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PromotionsService promotionsService)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.promotionsService = promotionsService; } }</code> </pre><br>  рдЕрдм рд╣рдореЗрдВ рдЕрдкрдиреЗ рдХрдВрдЯреЗрдирд░ ( <code>BeanFactory</code> ) рдХреЛ рд╣рдорд╛рд░реА рдХрдХреНрд╖рд╛рдУрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ, рдЙрдиреНрд╣реЗрдВ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдмрдирд╛рдиреЗ рдФрд░ рдПрдХ рдХреЛ рджреВрд╕рд░реЗ рдореЗрдВ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  <code>new ProductService()</code> рддрд░рд╣ рд╕рдВрдЪрд╛рд▓рди рдХрдВрдЯреЗрдирд░ рдХреЗ рдЕрдВрджрд░ рд╕реНрдерд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЖрдЗрдП рд╕рдмрд╕реЗ рдЖрдзреБрдирд┐рдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг (рдХрдХреНрд╖рд╛ рд╕реНрдХреИрдирд┐рдВрдЧ рдФрд░ рдПрдиреЛрдЯреЗрд╢рди) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ <code>@Component</code> ( <code>@Component</code> <code> org.springframework.beans.factory.stereotype</code> ) рдХреЗ рд╕рд╛рде <code>@Component</code> рдПрдиреЛрдЯреЗрд╢рди рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.RUNTIME) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> Component { }</code> </pre><br>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдПрдиреЛрдЯреЗрд╢рди рдХреЛ рдореЗрдореЛрд░реА рдореЗрдВ рд▓реЛрдб рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдмрдХрд┐ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдЪрд▓ рд░рд╣рд╛ рд╣реИ ( <code>RetentionPolicy.CLASS</code> )ред  рд╣рдордиреЗ рдПрдХ рдирдИ рдЕрд╡рдзрд╛рд░рдг рдиреАрддрд┐ ( <code>RetentionPolicy.RUNTIME</code> ) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛ред <br><br>  рдЕрдм <code>ProductService</code> рдХреНрд▓рд╛рд╕реЗрдЬ рд╕реЗ рдкрд╣рд▓реЗ рдФрд░ <code>@Component</code> рд╕реЗ рдкрд╣рд▓реЗ <code>@Component</code> рдЬреЛрдбрд╝реЗрдВред <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... } @Component public class PromotionService { //... }</span></span></code> </pre> <br><br>  рд╣рдореЗрдВ рдЕрдкрдиреЗ рдкреИрдХреЗрдЬ ( <code>com.kciray</code> ) <code>BeanFactory</code> рд╕реНрдХреИрди рдХрд░рдиреЗ рдФрд░ рдЗрд╕рдореЗрдВ рдЙрди рдХрдХреНрд╖рд╛рдУрдВ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ <code>@Component</code> рджреНрд╡рд╛рд░рд╛ рдПрдиреЛрдЯреЗрдЯ рдХрд┐рдП <code>@Component</code> ред  рдпрд╣ рдХрд╛рд░реНрдп рддреБрдЪреНрдЫ рд╕реЗ рджреВрд░ рд╣реИред  рдЬрд╛рд╡рд╛ рдХреЛрд░ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЛрдИ рддреИрдпрд╛рд░ рд╕рдорд╛рдзрд╛рди рдирд╣реАрдВ рд╣реИ</a> , рдФрд░ рд╣рдореЗрдВ рдЦреБрдж рдПрдХ рдмреИрд╕рд╛рдЦреА рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред  рдЗрд╕ рдмреИрд╕рд╛рдЦреА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣рдЬрд╛рд░реЛрдВ рд╡рд╕рдВрдд рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдШрдЯрдХ рд╕реНрдХреИрдирд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рднрдпрд╛рдирдХ рд╕рддреНрдп рдЖрдкрдиреЗ рдЬрд╛рди рд▓рд┐рдпрд╛ рд╣реИред  рдЖрдкрдХреЛ <code>ClassLoader</code> рд╕реЗ <code>ClassLoader</code> рдирд╛рдо рдирд┐рдХрд╛рд▓рдиреЗ <code>ClassLoader</code> рдФрд░ рдЬрд╛рдВрдЪрдирд╛ рд╣реЛрдЧрд╛ <code>ClassLoader</code> рд╡реЗ ".class" рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВ, рдФрд░ рдлрд┐рд░ рдЙрдирдХрд╛ рдкреВрд░рд╛ рдирд╛рдо рдмрдирд╛рдПрдБ рдФрд░ рдЙрд╕рдореЗрдВ рд╕реЗ рдХреНрд▓рд╛рд╕ рдСрдмреНрдЬреЗрдХреНрдЯ рдирд┐рдХрд╛рд▓ рджреЗрдВ! <br><br>  рдореИрдВ рдЖрдкрдХреЛ рддреБрд░рдВрдд рдЪреЗрддрд╛рд╡рдиреА рджреЗрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдХрдИ рдЬрд╛рдБрдЪ рдЕрдкрд╡рд╛рдж рд╣реЛрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рд▓рдкреЗрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд░рд╣реЗрдВред  рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ, рд╣рдо рддрдп рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рд╣рдо рдХреНрдпрд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рд╣рдо <code>BeanFactory</code> рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╡рд┐рдзрд┐ рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ <code>Main</code> рдореЗрдВ рдХреЙрд▓ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//BeanFactory.java public class BeanFactory{ public void instantiate(String basePackage) { } } //Main.java BeanFactory beanFactory = new BeanFactory(); beanFactory.instantiate("com.kciray");</span></span></code> </pre><br>  рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ <code>ClassLoader</code> рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрд╣ рд▓реЛрдбрд┐рдВрдЧ рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ, рдФрд░ рдЗрд╕реЗ рдХрд╛рдлреА рд╕рд░рд▓рддрд╛ рд╕реЗ рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="java hljs">ClassLoader classLoader = ClassLoader.getSystemClassLoader();</code> </pre> <br>  рдЖрдкрдиреЗ рд╢рд╛рдпрдж рдкрд╣рд▓реЗ рд╣реА рджреЗрдЦрд╛ рд╣реИ рдХрд┐ рд╕рдВрдХреБрд▓ рдХреЛ рдПрдХ рдмрд┐рдВрджреБ рдФрд░ рдПрдХ рд╕реНрд▓реИрд╢ рджреНрд╡рд╛рд░рд╛ рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╣рдореЗрдВ рдмреИрдЪ рдкрде рдХреЛ рдлрд╝реЛрд▓реНрдбрд░ рдкрде рдореЗрдВ рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ <code>List&lt;URL&gt;</code> (рдЖрдкрдХреЗ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдкрде рдЬрд╣рд╛рдБ рдЖрдк рд╡рд░реНрдЧ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдЦреЛрдЬ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ) рдЬреИрд╕реА рдХреБрдЫ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><pre> <code class="java hljs">String path = basePackage.replace(<span class="hljs-string"><span class="hljs-string">'.'</span></span>, <span class="hljs-string"><span class="hljs-string">'/'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//"com.kciray" -&gt; "com/kciray" Enumeration&lt;URL&gt; resources = classLoader.getResources(path);</span></span></code> </pre> <br>  рддреЛ рдПрдХ рдкрд▓ рд░реБрдХрд┐рдП!  <code>Enumeration&lt;URL&gt;</code> <code>List&lt;URL&gt;</code> ред  рдпрд╣ рд╕рдм рдХреНрдпрд╛ рд╣реИ?  рдУрд╣, рд╣реЙрд░рд░, рдпрд╣ <code>Iterator</code> рдХрд╛ рдкреБрд░рд╛рдирд╛ рдкреВрд░реНрд╡рдЬ рд╣реИ, рдЬрд╛рд╡рд╛ 1.0 рдХреЗ рдмрд╛рдж рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реИред  рдпрд╣ рд╡рд╣ рд╡рд┐рд░рд╛рд╕рдд рд╣реИ рдЬрд┐рд╕рд╕реЗ рд╣рдореЗрдВ рдирд┐рдкрдЯрдирд╛ рд╣реИред  рдпрджрд┐ (рд╕рднреА рд╕рдВрдЧреНрд░рд╣ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <code>Iterable</code> рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд▓рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рддреЛ <code>Enumeration</code> рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЖрдкрдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, <code>while(resources.hasMoreElements())</code> рдФрд░ <code>nextElement()</code> ред  рдФрд░ рдлрд┐рд░ рднреА рд╕рдВрдЧреНрд░рд╣ рд╕реЗ рдЖрдЗрдЯрдо рдирд┐рдХрд╛рд▓рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИред  рдХреЗрд╡рд▓ 1996, рдХреЗрд╡рд▓ рдХрдЯреНрдЯрд░ред  рдЕрд░реЗ рд╣рд╛рдБ, рдЬрд╛рд╡рд╛ 9 рдореЗрдВ рдЙрдиреНрд╣реЛрдВрдиреЗ <code>Enumeration.asIterator()</code> рд╡рд┐рдзрд┐ рдЬреЛрдбрд╝реА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдк рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЖрдЧреЗ рдЪрд▓рддреЗ рд╣реИрдВред  рд╣рдореЗрдВ рдлрд╝реЛрд▓реНрдбрд░реЛрдВ рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдФрд░ рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  URL рдХреЛ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХрдирд╡рд░реНрдЯ рдХрд░реЗрдВ, рдФрд░ рдлрд┐рд░ рдЙрд╕рдХрд╛ рдирд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред  рдпрд╣рд╛рдВ рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рд╣рдо рдиреЗрд╕реНрдЯреЗрдб рдкреИрдХреЗрдЬ рдХреЛ рд╕реНрдХреИрди рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ рддрд╛рдХрд┐ рдХреЛрдб рдХреЛ рдЬрдЯрд┐рд▓ рди рдХрд░реЗрдВред  рдпрджрд┐ рдЖрдк рдЪрд╛рд╣реЗрдВ рддреЛ рдЖрдк рдЕрдкрдиреЗ рдХрд╛рд░реНрдп рдХреЛ рдЬрдЯрд┐рд▓ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (resources.hasMoreElements()) { URL resource = resources.nextElement(); File file = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> File(resource.toURI()); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(File classFile : file.listFiles()){ String fileName = classFile.getName();<span class="hljs-comment"><span class="hljs-comment">//ProductService.class } }</span></span></code> </pre><br>  рдЕрдЧрд▓рд╛, рд╣рдореЗрдВ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рдмрд┐рдирд╛ рдлрд╝рд╛рдЗрд▓ рдирд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  2018 рдореЗрдВ рдпрд╛рд░реНрдб рдореЗрдВ, рдЬрд╛рд╡рд╛ рдиреЗ рдХрдИ рд╡рд░реНрд╖реЛрдВ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓ I / O (NIO 2) рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрднреА рднреА рдлрд╝рд╛рдЗрд▓ рдирд╛рдо рд╕реЗ рд╡рд┐рд╕реНрддрд╛рд░ рдХреЛ рдЕрд▓рдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдореБрдЭреЗ рдЕрдкрдиреА рдмрд╛рдЗрдХ рдЦреБрдж рдмрдирд╛рдиреА рд╣реЛрдЧреА, рдХреНрдпреЛрдВрдХрд┐  рд╣рдордиреЗ рдЕрдкрд╛рдЪреЗ рдХреЙрдордиреНрд╕ рдЬреИрд╕реЗ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред  рдЪрд▓реЛ рдкреБрд░рд╛рдиреЗ рджрд╛рджрд╛ рд░рд╛рд╕реНрддреЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ <code>lastIndexOf(".")</code> : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(fileName.endsWith(<span class="hljs-string"><span class="hljs-string">".class"</span></span>)){ String className = fileName.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, fileName.lastIndexOf(<span class="hljs-string"><span class="hljs-string">"."</span></span>)); }</code> </pre> <br>  рдЕрдЧрд▓рд╛, рд╣рдо рдХрдХреНрд╖рд╛ рдХреЗ рдкреВрд░реНрдг рдирд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд░реНрдЧ рд╡рд╕реНрддреБ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЗрд╕рдХреЗ рд▓рд┐рдП рд╣рдо рдХрдХреНрд╖рд╛ рдХреЗ рд╡рд░реНрдЧ рдХреЛ рдХрд╣рддреЗ рд╣реИрдВ): <br><br><pre> <code class="java hljs">Class classObject = Class.forName(basePackage + <span class="hljs-string"><span class="hljs-string">"."</span></span> + className);</code> </pre> <br>  рдареАрдХ рд╣реИ, рдЕрдм рд╣рдорд╛рд░реА рдХрдХреНрд╖рд╛рдПрдВ рд╣рдорд╛рд░реЗ рд╣рд╛рдереЛрдВ рдореЗрдВ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдХреЗрд╡рд▓ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░рдирд╛ рд╣реИ рдЬрд┐рдирдХреЗ рдкрд╛рд╕ <code>@Component</code> рдЯрд┐рдкреНрдкрдгреА рд╣реИ: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(classObject.isAnnotationPresent(Component.class)){ System.out.println(<span class="hljs-string"><span class="hljs-string">"Component: "</span></span> + classObject); }</code> </pre> <br>  рднрд╛рдЧреЛ рдФрд░ рдЬрд╛рдВрдЪ рдХрд░реЛред  рдХрдВрд╕реЛрд▓ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="bash hljs">Component: class com.kciray.ProductService Component: class com.kciray.PromotionsService</code> </pre> <br>  рдЕрдм рд╣рдореЗрдВ рдЕрдкрдиреЗ рд╕реЗрдо рдмрдирд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред  рдЖрдкрдХреЛ <code>new ProductService()</code> рддрд░рд╣ рдХреБрдЫ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдкреНрд░рддреНрдпреЗрдХ рдмреАрди рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЕрдкрдиреА рдХрдХреНрд╖рд╛ рд╣реИред  рдЬрд╛рд╡рд╛ рдореЗрдВ рдкреНрд░рддрд┐рдмрд┐рдВрдм рд╣рдореЗрдВ рдПрдХ рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рд╕рдорд╛рдзрд╛рди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдирд┐рд░реНрдорд╛рддрд╛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ): <br><br><pre> <code class="java hljs">Object instance = classObject.newInstance();<span class="hljs-comment"><span class="hljs-comment">//=new CustomClass()</span></span></code> </pre> <br>  рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдЗрд╕ рдмреАрди рдХреЛ <code>Map&lt;String, Object&gt; singletons</code> рдореЗрдВ рдбрд╛рд▓рдирд╛ рд╣реЛрдЧрд╛ред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдмреАрди рдирд╛рдо (рдЗрд╕рдХреА рдЖрдИрдбреА) рдЪреБрдиреЗрдВред  рдЬрд╛рд╡рд╛ рдореЗрдВ, рд╣рдо рдХрдХреНрд╖рд╛рдУрдВ рдХреА рддрд░рд╣ рдЪрд░ рдХрд╣рддреЗ рд╣реИрдВ (рдХреЗрд╡рд▓ рдкрд╣рд▓рд╛ рдЕрдХреНрд╖рд░ рд▓реЛрдЕрд░рдХреЗрд╕ рд╣реИ)ред  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЛ рд╕реЗрдо рдкрд░ рднреА рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╡рд╕рдВрдд рдПрдХ рдЬрд╛рд╡рд╛ рдлреНрд░реЗрдорд╡рд░реНрдХ рд╣реИ!  рдмрд┐рди рдирд╛рдо рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░реЗрдВ рддрд╛рдХрд┐ рдкрд╣рд▓рд╛ рдЕрдХреНрд╖рд░ рдЫреЛрдЯрд╛ рд╣реЛ, рдФрд░ рдЗрд╕реЗ рдорд╛рдирдЪрд┐рддреНрд░ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="java hljs">String beanName = className.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).toLowerCase() + className.substring(<span class="hljs-number"><span class="hljs-number">1</span></span>); singletons.put(beanName, instance);</code> </pre> <br>  рдЕрдм рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕рдм рдХреБрдЫ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдХрдВрдЯреЗрдирд░ рдХреЛ рд╕реЗрдо рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛, рдФрд░ рдЙрдиреНрд╣реЗрдВ рдирд╛рдо рд╕реЗ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЖрдкрдХреЗ <code>instantiate()</code> рдХрд╛ рдирд╛рдо <code>instantiate()</code> рд╡рд┐рдзрд┐ рдФрд░ <code>classObject.newInstance();</code> рд╡рд┐рдзрд┐ рдХрд╛ рдирд╛рдо рд╣реИ <code>classObject.newInstance();</code>  рдПрдХ рдЖрдо рдЬрдбрд╝ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, <code>instantiate()</code> рдмреАрди рдХреЗ рдЬреАрд╡рди рдЪрдХреНрд░ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИред  рдЬрд╛рд╡рд╛ рдореЗрдВ, рд╕рдм рдХреБрдЫ рдЖрдкрд╕ рдореЗрдВ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ! <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//Main.java BeanFactory beanFactory = new BeanFactory(); beanFactory.instantiate("com.kciray"); ProductService productService = (ProductService) beanFactory.getBean("productService"); System.out.println(productService);//ProductService@612</span></span></code> </pre> <br><br>  <code>org.springframework.beans.factory.stereotype.Service</code> рдПрдиреЛрдЯреЗрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рднреА рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  рдпрд╣ <code>@Component</code> рдХреЗ рд╕рдорд╛рди рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдЕрд▓рдЧ рддрд░рд╣ рд╕реЗ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдкреВрд░рд╛ рдмрд┐рдВрджреБ рдирд╛рдо рдореЗрдВ рд╣реИ - рдЖрдк рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдХрдХреНрд╖рд╛ рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ, рди рдХрд┐ рдХреЗрд╡рд▓ рдПрдХ рдШрдЯрдХред  рдпрд╣ рд╡реИрдЪрд╛рд░рд┐рдХ рдЯрд╛рдЗрдкрд┐рдВрдЧ рдЬреИрд╕рд╛ рдХреБрдЫ рд╣реИред  рд╡рд╕рдВрдд рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдореЗрдВ рдПрдХ рд╕рд╡рд╛рд▓ рдерд╛ "рдХреНрдпрд╛ рдПрдиреЛрдЯреЗрд╢рди рдЯрдХрд╕рд╛рд▓реА рд╣реИрдВ?"  (рд╕реВрдЪреАрдмрджреНрдз рд▓реЛрдЧреЛрдВ рдореЗрдВ рд╕реЗ)  рддреЛ, рд╕реНрдЯреАрд░рд┐рдпреЛрдЯрд╛рдЗрдкрд┐рдХрд▓ рдПрдиреЛрдЯреЗрд╢рди рд╡реЗ рд╣реИрдВ рдЬреЛ <code>stereotype</code> рдкреИрдХреЗрдЬ рдореЗрдВ рд╣реИрдВред <br><br><h2>  рдЧреБрдг рднрд░реЗрдВ </h2><br>  рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдЖрд░реЗрдЦ рдХреЛ рджреЗрдЦреЗрдВ, рдпрд╣ рд╕реЗрдо рдХреЗ рдЬреАрд╡рди рдЪрдХреНрд░ рдХреА рд╢реБрд░реБрдЖрдд рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред  рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рд╣рдордиреЗ рдЬреЛ рдХрд┐рдпрд╛ рд╡рд╣ рдЗрдВрд╕реНрдЯреЗрдВрдЯрд┐рдПрдЯ ( <code>newInstance()</code> рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЗрдо рдмрдирд╛рдирд╛) рд╣реИред  рдЕрдЧрд▓рд╛ рдЪрд░рдг рд╕реЗрдо рдХрд╛ рдХреНрд░реЙрд╕-рдЗрдВрдЬреЗрдХреНрд╢рди рд╣реИ (рдирд┐рд░реНрднрд░рддрд╛ рдЗрдВрдЬреЗрдХреНрд╢рди, рдпрд╣ рдирд┐рдпрдВрддреНрд░рдг рдХрд╛ рдЙрд▓рдЯрд╛ рднреА рд╣реИ (IoC))ред  рдЖрдкрдХреЛ рд╕реЗрдо рдХреЗ рдЧреБрдгреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рдиреЗ рдФрд░ рд╕рдордЭрдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдХреМрди рд╕реЗ рдЧреБрдгреЛрдВ рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк <code>productService.getPromotionsService()</code> рдХреЙрд▓ рдХрд░рддреЗ <code>productService.getPromotionsService()</code> , рддреЛ рдЖрдкрдХреЛ <code>null</code> рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐  рдирд┐рд░реНрднрд░рддрд╛ рдЕрднреА рддрдХ рдирд╣реАрдВ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/2i/4v/4c/2i4v4cbsb-bdpdrgb0grh_swclu.png"><br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <code>@Autowired</code> рдкреИрдХреЗрдЬ рдмрдирд╛рдПрдВ рдФрд░ рдЗрд╕рдореЗрдВ <code>@Autowired</code> рдПрдиреЛрдЯреЗрд╢рди рдЬреЛрдбрд╝реЗрдВред  рд╡рд┐рдЪрд╛рд░ рдЙрди рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╣реИ рдЬреЛ рдЗрд╕ рдПрдиреЛрдЯреЗрд╢рди рдХреЗ рд╕рд╛рде рдирд┐рд░реНрднрд░рддрд╛рдПрдВ рд╣реИрдВред <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Retention</span></span>(RetentionPolicy.RUNTIME) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-meta"><span class="hljs-meta">@interface</span></span> Autowired { }</code> </pre> <br>  рдЗрд╕рдХреЗ рдмрд╛рдж, рдЗрд╕реЗ рд╕рдВрдкрддреНрддрд┐ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> PromotionsService promotionsService; <span class="hljs-comment"><span class="hljs-comment">//... }</span></span></code> </pre> <br>  рдЕрдм рд╣рдореЗрдВ рдЗрди рдПрдиреЛрдЯреЗрд╢рди <code>BeanFactory</code> рдЦреЛрдЬрдиреЗ рдФрд░ рдЙрди рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ рдХреЛ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ <code>BeanFactory</code> рдХреЛ рд╕рд┐рдЦрд╛рдирд╛ рд╣реЛрдЧрд╛ред  рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рд╡рд┐рдзрд┐ рдЬреЛрдбрд╝реЗрдВ, рдФрд░ рдЗрд╕реЗ <code>Main</code> рд╕реЗ рдХреЙрд▓ рдХрд░реЗрдВ: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanFactory</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... public void populateProperties(){ System.out.println("==populateProperties=="); } }</span></span></code> </pre> <br>  рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рдмрд╕ рдЕрдкрдиреЗ рд╕рднреА рдбрд┐рдмреНрдмреЗ <code>object.getClass().getDeclaredFields()</code> рдореИрдк рдореЗрдВ рдЬрд╛рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ, рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдмрд┐рди рдХреЗ рд▓рд┐рдП рдЙрд╕рдХреЗ рд╕рднреА рдлрд╝реАрд▓реНрдбреНрд╕ ( <code>object.getClass().getDeclaredFields()</code> рдирд┐рдЬреА рдХреНрд╖реЗрддреНрд░реЛрдВ рд╕рд╣рд┐рдд рд╕рднреА рдлрд╝реАрд▓реНрдбреНрд╕ рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИред  рдФрд░ рдЬрд╛рдБрдЪ рдХрд░реЗрдВ рдХрд┐ рдХреНрдпрд╛ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ <code>@Autowired</code> рдПрдиреЛрдЯреЗрд╢рди рд╣реИ: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Object object : singletons.values()) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Field field : object.getClass().getDeclaredFields()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (field.isAnnotationPresent(Autowired.class)) { } } }</code> </pre> <br>  рдЕрдЧрд▓рд╛, рд╣рдореЗрдВ рдПрдХ рдмрд╛рд░ рд╕рднреА рдбрд┐рдмреНрдмреЗ рд╕реЗ рдЧреБрдЬрд░рдиреЗ рдФрд░ рдЙрдирдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рджреЗрдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ - рдЕрдЪрд╛рдирдХ рдпрд╣ рд╡рд╣ рдкреНрд░рдХрд╛рд░ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдорд╛рд░рд╛ рдмрд┐рди рдЦреБрдж рд▓реЗрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИред  рд╣рд╛рдБ, рд╣рдореЗрдВ рдПрдХ рддреНрд░рд┐-рдЖрдпрд╛рдореА рдЪрдХреНрд░ рдорд┐рд▓рддрд╛ рд╣реИ! <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Object dependency : singletons.values()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dependency.getClass().equals(field.getType())) { } }</code> </pre> <br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬрдм рд╣рдореЗрдВ рдЗрд╕рдХреА рд▓рдд рд▓рдЧ рдЧрдИ, рддреЛ рд╣рдореЗрдВ рдЗрд╕реЗ рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдкрд╣рд▓реА рдЪреАрдЬрд╝ рдЬреЛ рдЖрдк рд╕реЛрдЪ рд╕рдХрддреЗ рд╣реИрдВ, рд╡рд╣ рд╣реИ рд╕реАрдзреЗ рд╕реАрдзреЗ рдкрд░рд╛рд╡рд░реНрддрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ <code>promotionsService</code> рдХреНрд╖реЗрддреНрд░ рд▓рд┐рдЦрдирд╛ред  рд▓реЗрдХрд┐рди рд╡рд╕рдВрдд рдРрд╕рд╛ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдЖрдЦрд┐рд░рдХрд╛рд░, рдпрджрд┐ рдлрд╝реАрд▓реНрдб рдореЗрдВ рдПрдХ <code>private</code> рд╕рдВрд╢реЛрдзрдХ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдкрд╣рд▓реЗ рдЗрд╕реЗ <code>public</code> рд░реВрдк рд╕реЗ рд╕реЗрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдлрд┐рд░ рдЕрдкрдирд╛ рдорд╛рди рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛, рдлрд┐рд░ рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ <code>private</code> (рдЕрдЦрдВрдбрддрд╛ рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП) рд╕реЗрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдПрдХ рдмрдбрд╝реА рдмреИрд╕рд╛рдЦреА рдХреА рддрд░рд╣ рд▓рдЧрддрд╛ рд╣реИред  рдПрдХ рдмрдбрд╝реА рдмреИрд╕рд╛рдЦреА рдХреЗ рдмрдЬрд╛рдп, рд╣рдо рдПрдХ рдЫреЛрдЯреА рд╕реА рдмреИрд╕рд╛рдЦреА рдмрдирд╛рддреЗ рд╣реИрдВ (рд╣рдо рд╕реЗрдЯрд░ рдХрд╛ рдирд╛рдо рдмрдирд╛рдПрдВрдЧреЗ рдФрд░ рдЙрд╕реЗ рдХреЙрд▓ рдХрд░реЗрдВрдЧреЗ): <br><br><pre> <code class="java hljs">String setterName = <span class="hljs-string"><span class="hljs-string">"set"</span></span> + field.getName().substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).toUpperCase() + field.getName().substring(<span class="hljs-number"><span class="hljs-number">1</span></span>);<span class="hljs-comment"><span class="hljs-comment">//setPromotionsService System.out.println("Setter name = " + setterName); Method setter = object.getClass().getMethod(setterName, dependency.getClass()); setter.invoke(object, dependency);</span></span></code> </pre> <br>  рдЕрдм рдЕрдкрдирд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЪрд▓рд╛рдПрдВ рдФрд░ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЬрдм <code>null</code> рдмрдЬрд╛рдп <code>productService.getPromotionsService()</code> рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рдП, рддреЛ рд╣рдорд╛рд░реА рд╕реЗрдо рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рдПрдЧреАред <br><br>  рд╣рдордиреЗ рдЬреЛ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рд╣реИ рд╡рд╣ рдкреНрд░рдХрд╛рд░ рджреНрд╡рд╛рд░рд╛ рдЗрдВрдЬреЗрдХреНрд╢рди рд╣реИред  рдирд╛рдо ( <code>javax.annotation.Resource</code> рдПрдиреЛрдЯреЗрд╢рди) рджреНрд╡рд╛рд░рд╛ рдПрдХ рдЗрдВрдЬреЗрдХреНрд╢рди рднреА рд╣реИред  рдпрд╣ рдЗрд╕ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рднрд┐рдиреНрди рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдХреНрд╖реЗрддреНрд░ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдмрдЬрд╛рдп, рдЗрд╕рдХрд╛ рдирд╛рдо рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдЗрд╕рдХреЗ рдЕрдиреБрд╕рд╛рд░ - рдирдХреНрд╢реЗ рд╕реЗ рдирд┐рд░реНрднрд░рддрд╛ред  рдпрд╣рд╛рдВ рд╕рдм рдХреБрдЫ рд╕рдорд╛рди рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдХреБрдЫ рд╕рд░рд▓ рдореЗрдВ рднреАред  рдореЗрд░рд╛ рд╕реБрдЭрд╛рд╡ рд╣реИ рдХрд┐ рдЖрдк рдкреНрд░рдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рдЕрдкрдирд╛ рдмреАрди рдмрдирд╛рдПрдБ, рдФрд░ рдлрд┐рд░ рдЗрд╕реЗ <code>@Resource</code> рд╕реЗ <code>@Resource</code> рдФрд░ <code>populateProperties()</code> рд╡рд┐рдзрд┐ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░реЗрдВред <br><br><h2>  рд╣рдо рд╕реЗрдо рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдЙрдирдХреЗ рдирд╛рдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ </h2><br><img src="https://habrastorage.org/webt/ds/ge/nn/dsgennl2rvz-spa6h51l_yox81o.png"><br><br>  рдРрд╕реЗ рд╕рдордп рд╣реЛрддреЗ рд╣реИрдВ рдЬрдм рдЖрдкрдХреЛ рдмрд┐рди рдХреЗ рдЕрдВрджрд░ рдЙрд╕рдХрд╛ рдирд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдРрд╕реА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЕрдХреНрд╕рд░ рдЙрддреНрдкрдиреНрди рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рдбрд┐рдмреНрдмреЗ, рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдпрд╣ рдХрд┐ рд╡реЗ рдбрд┐рдмреНрдмреЗ рд╣реИрдВред  рд╡рд╕рдВрдд рдХреЗ рдкрд╣рд▓реЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ, рдпрд╣ рдорд╛рди рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдХрд┐ рдмреАрди рдПрдХ POJO (рдкреНрд▓реЗрди рдУрд▓реНрдб рдЬрд╛рд╡рд╛ рдУрдмреНрдЬреЗрдХ, рдЕрдЪреНрдЫрд╛ рдкреБрд░рд╛рдирд╛ рдЬрд╛рд╡рд╛ рдСрдмреНрдЬреЗрдХреНрдЯ) рд╣реИ, рдФрд░ рд╕рдВрдкреВрд░реНрдг рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдПрдХреНрд╕рдПрдордПрд▓ рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реЗ рдЕрд▓рдЧ рд╣реЛ рдЧрдпрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╣рдо рдЗрд╕ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдирд╛рдо рдЗрдВрдЬреЗрдХреНрд╢рди рдмрд┐рди рдХреЗ рдЬреАрд╡рди рдЪрдХреНрд░ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИред <br><br>  рд╣рдо рдХреИрд╕реЗ рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдХреМрди рд╕рд╛ рд╕реЗрдо рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ рдХрд┐ рдЙрд╕рдХрд╛ рдирд╛рдо рдХреНрдпрд╛ рд╣реИ рдФрд░ рд╡рд╣ рдХреНрдпрд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддрд╛ рд╣реИ?  рдкрд╣рд▓реА рдмрд╛рдд рдЬреЛ рджрд┐рдорд╛рдЧ рдореЗрдВ рдЖрддреА рд╣реИ рд╡рд╣ рд╣реИ <code>@InjectName</code> рдХрд╛ рдирдпрд╛ рдПрдиреЛрдЯреЗрд╢рди рдмрдирд╛рдирд╛ рдФрд░ рдЙрд╕реЗ <code>@InjectName</code> рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд▓рд╛рдирд╛ред  рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдорд╛рдзрд╛рди рдмрд╣реБрдд рд╕рд╛рдорд╛рдиреНрдп рд╣реЛрдЧрд╛ рдФрд░ рдЖрдкрдХреЛ рдХрдИ рдмрд╛рд░ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдкреИрд░ рдореЗрдВ рдЧреЛрд▓реА рдорд╛рд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ (рдЗрд╕ рдПрдиреЛрдЯреЗрд╢рди рдХреЛ рдЕрдиреБрдЪрд┐рдд рдкреНрд░рдХрд╛рд░ рдХреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдкрд░ рд░рдЦреЗрдВ (рд╕реНрдЯреНрд░рд┐рдВрдЧ рдирд╣реАрдВ), рдпрд╛ рдПрдХ рд╣реА рдХрдХреНрд╖рд╛ рдореЗрдВ рдХрдИ рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рдирд╛рдо рдЗрдВрдЬреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ)ред  рдПрдХ рдФрд░ рд╕рдорд╛рдзрд╛рди рд╣реИ, рдЕрдзрд┐рдХ рд╕рдЯреАрдХ - рдПрдХ рд╕реЗрдЯрд░ рд╡рд┐рдзрд┐ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдПред  рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдбрд┐рдмреНрдмреЗ рдЕрдкрдирд╛ рдирд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред  <code>BeanNameAware</code> рдкреИрдХреЗрдЬ рдореЗрдВ <code>BeanNameAware</code> рдХреНрд▓рд╛рд╕ рдмрдирд╛рдПрдВ: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanNameAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setBeanName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span></span>; }</code> </pre> <br>  рдЗрд╕рдХреЗ рдмрд╛рдж, рд╣рдорд╛рд░реА <code>PromotionsService</code> рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░реЗрдВ: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PromotionsService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanNameAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String beanName; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setBeanName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name)</span></span></span><span class="hljs-function"> </span></span>{ beanName = name; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBeanName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> beanName; } }</code> </pre> <br>  рдФрд░ рдЕрдВрдд рдореЗрдВ, рдмреАрди рдХрд╛рд░рдЦрд╛рдиреЗ рдореЗрдВ рдПрдХ рдирдИ рд╡рд┐рдзрд┐ рдЬреЛрдбрд╝реЗрдВред  рдпрд╣рд╛рдВ рд╕рдм рдХреБрдЫ рд╕рд░рд▓ рд╣реИ - рд╣рдо рдЕрдкрдиреЗ рдмрд┐рди-рд╕рд┐рдВрдЧрд▓рдЯрди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдмрд┐рди рд╣рдорд╛рд░реЗ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╕реЗрдЯрд░ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВ: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">injectBeanNames</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String name : singletons.keySet()) { Object bean = singletons.get(name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(bean <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> BeanNameAware){ ((BeanNameAware) bean).setBeanName(name); } } }</code> </pre> <br>  рдЪрд▓рд╛рдПрдВ рдФрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕рдм рдХреБрдЫ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="java hljs">BeanFactory beanFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BeanFactory(); beanFactory.instantiate(<span class="hljs-string"><span class="hljs-string">"com.kciray"</span></span>); beanFactory.populateProperties(); beanFactory.injectBeanNames(); <span class="hljs-comment"><span class="hljs-comment">//... System.out.println("Bean name = " + promotionsService.getBeanName());</span></span></code> </pre><br>  рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рд╡рд╕рдВрдд рдореЗрдВ рдЕрдиреНрдп рд╕рдорд╛рди рдЗрдВрдЯрд░рдлреЗрд╕ рд╣реИрдВред  рдореЗрд░рд╛ рд╕реБрдЭрд╛рд╡ рд╣реИ рдХрд┐ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмреАрдирдлреИрдХреНрдЯрд┐рд╡рд╡реЗрдпрд░</a> рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрд╡рдпрдВ</a> рд▓рд╛рдЧреВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░реЗрдВ</a> , рдЬреЛ рд╕реЗрдо рдХреЛ рдмреАрди рдХрд╛рд░рдЦрд╛рдиреЗ рдХрд╛ рд▓рд┐рдВрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрд╣ рдПрдХ рд╕рдорд╛рди рддрд░реАрдХреЗ рд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><h2>  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдмреАрдиреНрд╕ </h2><br><img src="https://habrastorage.org/webt/yq/0w/5t/yq0w5t8x0kqrgqwllfuxsi77xug.png"><br><br>  рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╕реНрдерд┐рддрд┐ рд╣реИ рдЬрд╣рд╛рдВ рдЖрдкрдХреЛ рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рдЗрдВрдЬреЗрдХреНрд╢рди рд▓рдЧрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдХреБрдЫ рдХреЛрдб рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдмрд┐рди рдЧреБрдг рд╕реЗрдЯ рд╣реИрдВ)ред  рд╕рд░рд▓ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рд╣рдореЗрдВ рдмрд┐рди рдХреЛ рдЦреБрдж рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╡реИрдХрд▓реНрдкрд┐рдХ рд░реВрдк рд╕реЗ, рд╣рдо рдПрдХ <code>InitializingBean</code> рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕рдореЗрдВ <code>void afterPropertiesSet()</code> рд╡рд┐рдзрд┐ рдХреЗ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рдбрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕ рддрдВрддреНрд░ рдХрд╛ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рдареАрдХ рд╡реИрд╕рд╛ рд╣реА рд╣реИ рдЬреИрд╕рд╛ рдХрд┐ <code>BeanNameAware</code> рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕рдорд╛рдзрд╛рди рд╕реНрдкреЙрдЗрд▓рд░ рдХреЗ рдиреАрдЪреЗ рд╣реИред  рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ рдПрдХ рдорд┐рдирдЯ рдореЗрдВ рд╕реНрд╡рдпрдВ рдХрд░реЗрдВ: <br><br><div class="spoiler">  <b class="spoiler_title">рдмреАрди рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рд╕реЙрд▓реНрдпреВрд╢рди</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//InitializingBean.java package org.springframework.beans.factory; public interface InitializingBean { void afterPropertiesSet(); } //BeanFactory.java public void initializeBeans(){ for (Object bean : singletons.values()) { if(bean instanceof InitializingBean){ ((InitializingBean) bean).afterPropertiesSet(); } } } //Main.java beanFactory.initializeBeans();</span></span></code> </pre> <br></div></div><br><br><h2>  рдкреЛрд╕реНрдЯ рдкреНрд░реЛрд╕реЗрд╕рд░ рдЬреЛрдбрд╝рдирд╛ </h2><br>  рдкрд╣рд▓реЗ рд╡рд╕рдВрдд рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд╕реНрдерд╛рди рдкрд░ рдЦреБрдж рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВред  рдЖрдкрдХрд╛ рдлреНрд░реЗрдорд╡рд░реНрдХ рдмрдврд╝ рд░рд╣рд╛ рд╣реИ рдФрд░ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рдмреАрдЪ рдмрд╣реБрдд рд▓реЛрдХрдкреНрд░рд┐рдп рд╣реИ, рд╣рд░ рджрд┐рди рдореЗрд▓ рдореЗрдВ рдПрдХ рдпрд╛ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧреА рд╕реБрд╡рд┐рдзрд╛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдз рдХреЗ рд╕рд╛рде рдкрддреНрд░ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВред  рдпрджрд┐ рдРрд╕реА рдкреНрд░рддреНрдпреЗрдХ рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП рдЖрдк рдЕрдкрдирд╛ рд╕реНрд╡рдпрдВ рдХрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдмреАрди рдХреЗ рдЬреАрд╡рди рдЪрдХреНрд░ рдореЗрдВ рдЬрд╛рдВрдЪрддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ (рдЬреАрд╡рди рдЪрдХреНрд░) рдЕрдирд╛рд╡рд╢реНрдпрдХ рдЬрд╛рдирдХрд╛рд░реА рд╕реЗ рднрд░рд╛ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╣рдо рдПрдХ рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рдХреБрдЫ рддрд░реНрдХ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ (рдмрд┐рд▓реНрдХреБрд▓ рдХрд┐рд╕реА рднреА, рдЪрд╛рд╣реЗ рд╡рд╣ рдПрдиреЛрдЯреЗрд╢рди рдХреЗ рд▓рд┐рдП рдЬрд╛рдБрдЪ рдХрд░ рд░рд╣рд╛ рд╣реЛ, рдмрд┐рди рдХреЛ рджреВрд╕рд░реЗ рдмрд┐рди рдХреЗ рд╕рд╛рде рдмрджрд▓рдирд╛, рдХреБрдЫ рд╡рд┐рд╢реЗрд╖ рдЧреБрдгреЛрдВ рдХреЛ рд╕реЗрдЯ рдХрд░рдирд╛, рдФрд░ рдЗрд╕реА рддрд░рд╣)ред <br><br>  рдЖрдЗрдП рдЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪреЗрдВред  рдЗрд╕реЗ рдлрд▓рд┐рдпреЛрдВ рдХреА рдХреБрдЫ рдкреЛрд╕реНрдЯ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рдмреАрдирдкреЛрд╕реНрдЯрдкреНрд░реЛрд╕реЗрд╕рд░ рдХрд╣рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╣рдореЗрдВ рдПрдХ рдХрдард┐рди рд╕рд╡рд╛рд▓ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИ - рддрд░реНрдХ рдХрд╛ рдкрд╛рд▓рди рдХрдм рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП?  рдЖрдЦрд┐рд░рдХрд╛рд░, рд╣рдо рдЗрд╕реЗ рдЖрд░рдВрднреАрдХрд░рдг рд╕реЗ рдкрд╣рд▓реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдо рдЗрд╕реЗ рдмрд╛рдж рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдХреБрдЫ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП, рдкрд╣рд▓рд╛ рд╡рд┐рдХрд▓реНрдк рдмреЗрд╣рддрд░ рд╣реИ, рджреВрд╕рд░реЛрдВ рдХреЗ рд▓рд┐рдП - рджреВрд╕рд░рд╛ ... рдХреИрд╕реЗ рд╣реЛ? <br><br>  рд╣рдо рдПрдХ рд╣реА рдмрд╛рд░ рдореЗрдВ рджреЛрдиреЛрдВ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЛ рд╕рдХреНрд╖рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдПрдХ рдкреЛрд╕реНрдЯ-рдкреНрд░реЛрд╕реЗрд╕рд░ рджреЛ рд▓реЙрдЬрд┐рдХреНрд╕, рджреЛ рддрд░реАрдХреЛрдВ рдХреЛ рд▓реЗ рдЬрд╛рдиреЗ рджреЗрдВред  рдПрдХ рдХреЛ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди рд╕реЗ рдкрд╣рд▓реЗ ( <code>afterPropertiesSet()</code> рдореЗрдердб) рд╕реЗ рдкрд╣рд▓реЗ рдФрд░ рджреВрд╕рд░реЗ рдХреЛ рдмрд╛рдж рдореЗрдВ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЕрдм рдЖрдЗрдП рдЦреБрдж рд╣реА рддрд░реАрдХреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪреЗрдВ - рдЙрдирдХреЗ рдкрд╛рд╕ рдХреНрдпрд╛ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП?  рдЬрд╛рд╣рд┐рд░ рд╣реИ, <code>Object bean</code> рд╣реА ( <code>Object bean</code> ) рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред  рд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП, рдмреАрди рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдк рдЗрд╕ рдмреАрди рдХрд╛ рдирд╛рдо рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЖрдкрдХреЛ рдпрд╛рдж рд╣реИ рдХрд┐ рдмрд┐рди рдЦреБрдж рд╣реА рдЗрд╕рдХреЗ рдирд╛рдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИред  рдФрд░ рд╣рдо рдмреАрдирдиреЗрдорд╡реЗрдпрд░ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рднреА рдмреАрдиреНрд╕ рдХреЛ рдордЬрдмреВрд░ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди, рдкреЛрд╕реНрдЯ-рдкреНрд░реЛрд╕реЗрд╕рд░ рд╕реНрддрд░ рдкрд░, рдмреАрди рдирд╛рдо рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рд╣рдо рдЗрд╕реЗ рджреВрд╕рд░реЗ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред <br><br>  рдФрд░ рд╕реЗрдо рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд░рддреЗ рд╕рдордп рдХреНрдпрд╛ рд╡рд┐рдзрд┐ рд╡рд╛рдкрд╕ рдЖрдиреА рдЪрд╛рд╣рд┐рдП?  рдЪрд▓реЛ рдЗрд╕реЗ рдмрд┐рди рд╡рд╛рдкрд╕ рд╣реА рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ рд╣рдореЗрдВ рд╕реБрдкрд░-рд▓рдЪреАрд▓рд╛рдкрди рджреЗрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдПрдХ рдмрд┐рди рдХреЗ рдмрдЬрд╛рдп, рдЖрдк рдПрдХ рдкреНрд░реЙрдХреНрд╕реА рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдкрд░реНрдЪреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдЗрд╕рдХреА рдХреЙрд▓ рдХреЛ рд▓рдкреЗрдЯрддрд╛ рд╣реИ (рдФрд░ рд╕реБрд░рдХреНрд╖рд╛ рдЬреЛрдбрд╝рддрд╛ рд╣реИ)ред  рдпрд╛ рдЖрдк рдлрд┐рд░ рд╕реЗ рдмрд┐рди рдХреЛ рджреЛрдмрд╛рд░рд╛ рдмрдирд╛рдХрд░ рдХрд┐рд╕реА рдЕрдиреНрдп рд╡рд╕реНрддреБ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╡рд╛рдкрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреА рдмрд╣реБрдд рдмрдбрд╝реА рд╕реНрд╡рддрдВрддреНрд░рддрд╛ рджреА рдЬрд╛рддреА рд╣реИред  рдиреАрдЪреЗ рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдЕрдВрддрд┐рдо рд╕рдВрд╕реНрдХрд░рдг рд╣реИ: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.springframework.beans.factory.config; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanPostProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postProcessBeforeInitialization</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object bean, String beanName)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postProcessAfterInitialization</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object bean, String beanName)</span></span></span></span>; }</code> </pre> <br>  рдЕрдЧрд▓рд╛, рд╣рдореЗрдВ рдЕрдкрдиреЗ рдмреАрди рдХрд╛рд░рдЦрд╛рдиреЗ рдореЗрдВ рд╕рд░рд▓ рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреА рдПрдХ рд╕реВрдЪреА рдФрд░ рдирдП рд▓реЛрдЧреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╣рд╛рдБ, рдпрд╣ рдПрдХ рдирд┐рдпрдорд┐рдд ArrayList рд╣реИред <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//BeanFactory.java private List&lt;BeanPostProcessor&gt; postProcessors = new ArrayList&lt;&gt;(); public void addPostProcessor(BeanPostProcessor postProcessor){ postProcessors.add(postProcessor); }</span></span></code> </pre> <br>  рдЕрдм <code>initializeBeans</code> рд╡рд┐рдзрд┐ рдХреЛ рдмрджрд▓реЗрдВ рддрд╛рдХрд┐ рдпрд╣ рдкреЛрд╕реНрдЯ-рдкреНрд░реЛрд╕реЗрд╕рд░реНрд╕ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦреЗ: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initializeBeans</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String name : singletons.keySet()) { Object bean = singletons.get(name); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (BeanPostProcessor postProcessor : postProcessors) { postProcessor.postProcessBeforeInitialization(bean, name); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bean <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> InitializingBean) { ((InitializingBean) bean).afterPropertiesSet(); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (BeanPostProcessor postProcessor : postProcessors) { postProcessor.postProcessAfterInitialization(bean, name); } } }</code> </pre> <br>  рдЖрдЗрдП рдПрдХ рдЫреЛрдЯрд╛ рдкреЛрд╕реНрдЯ рдкреНрд░реЛрд╕реЗрд╕рд░ рдмрдирд╛рдПрдВ рдЬреЛ рдХреЙрд▓ рдХреЛ рдХрдВрд╕реЛрд▓ рдореЗрдВ рдмрддрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рд╣рдорд╛рд░реЗ рдмреАрди рдХрд╛рд░рдЦрд╛рдиреЗ рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИ: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomPostProcessor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanPostProcessor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postProcessBeforeInitialization</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object bean, String beanName)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"---CustomPostProcessor Before "</span></span> + beanName); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bean; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postProcessAfterInitialization</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object bean, String beanName)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"---CustomPostProcessor After "</span></span> + beanName); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bean; } }</code> </pre> <br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//Main.java BeanFactory beanFactory = new BeanFactory(); beanFactory.addPostProcessor(new CustomPostProcessor());</span></span></code> </pre> <br><br>  рдЕрдм рдЪрд▓рд╛рдПрдВ рдФрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕рдм рдХреБрдЫ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдХрд╛рд░реНрдп рдХреЗ рд░реВрдк рдореЗрдВ, рдПрдХ рдкреЛрд╕реНрдЯ рдкреНрд░реЛрд╕реЗрд╕рд░ рдмрдирд╛рдПрдВ рдЬреЛ <code>@PostConstruct (javax.annotation.PostConstruct)</code> рдПрдиреЛрдЯреЗрд╢рди <code>@PostConstruct (javax.annotation.PostConstruct)</code> рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛ред  рдпрд╣ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рддрд░реАрдХрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ (рдЬрд╛рд╡рд╛ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИ, рд╡рд╕рдВрдд рдореЗрдВ рдирд╣реАрдВ)ред  рдЗрд╕рдХрд╛ рд╕рд╛рд░ рдпрд╣ рд╣реИ рдХрд┐ рдЖрдк рдПрдиреЛрдЯреЗрд╢рди рдХреЛ рдХрд┐рд╕реА рд╡рд┐рдзрд┐ рдкрд░ рд░рдЦрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕ рд╡рд┐рдзрд┐ рдХреЛ BEFORE рдорд╛рдирдХ рд╕реНрдкреНрд░рд┐рдВрдЧ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝реЗрд╢рди (рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝рд┐рдВрдЧрдмреЛрди) рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕рднреА рдПрдиреЛрдЯреЗрд╢рди рдФрд░ рдкреИрдХреЗрдЬ (рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ javax.annotation) рдмрдирд╛рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ, рдирд┐рд░реНрднрд░рддрд╛ рдХреЛ рдХрдиреЗрдХреНрдЯ рди рдХрд░реЗрдВ!  рдпрд╣ рдЖрдкрдХреЛ рд╕реНрдкреНрд░рд┐рдВрдЧ рдХреЛрд░ рдФрд░ рдЗрд╕рдХреЗ рдПрдХреНрд╕рдЯреЗрдВрд╢рди (рдЬреЗрд╡реИрдХреНрд╕ рд╕рдкреЛрд░реНрдЯ) рдХреЗ рдмреАрдЪ рдХрд╛ рдЕрдВрддрд░ рджреЗрдЦрдиреЗ рдФрд░ рдЗрд╕реЗ рдпрд╛рдж рд░рдЦрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛ред  рдпрд╣ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдПрдХ рд╢реИрд▓реА рд░рдЦреЗрдЧрд╛ред <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк рдЗрд╕ рддрдереНрдп рдореЗрдВ рджрд┐рд▓рдЪрд╕реНрдкреА рд▓реЗрдВрдЧреЗ рдХрд┐ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╡рд╕рдВрдд рдореЗрдВ рдПрдиреЛрдЯреЗрд╢рди </font></font><code>@PostConstruct</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рддрд░рд╣ рд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдкреЛрд╕реНрдЯ-рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЙрдордирдиреЛрдЯреЗрд╢рди рдмреАрдирдкреЛрд╕реНрдЯрдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рд╡рд╣рд╛рдВ рдЭрд╛рдВрдХрдирд╛ рдордд, рдЕрдкрдирд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд▓рд┐рдЦреЛред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдд рдореЗрдВ, рдореИрдВ рдЖрдкрдХреЛ </font></font><code>void close()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдХреНрд╖рд╛ рдореЗрдВ </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рдзрд┐ рдЬреЛрдбрд╝рдиреЗ </font></font><code>BeanFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рджреЛ рдФрд░ рддрдВрддреНрд░реЛрдВ рдХреЛ рдХрд╛рдо </font><font style="vertical-align: inherit;">рдХрд░рдиреЗ рдХреА </font><font style="vertical-align: inherit;">рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдкрд╣рд▓рд╛ рдПрдХ рдПрдиреЛрдЯреЗрд╢рди рд╣реИ </font></font><code>@PreDestroy (javax.annotation.PreDestroy)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬрд┐рд╕рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдЙрди рддрд░реАрдХреЛрдВ рдХреЗ рд▓рд┐рдП рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдХрдВрдЯреЗрдирд░ рдмрдВрдж рд╣реЛрдиреЗ рдкрд░ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рджреВрд╕рд░рд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ </font></font><code>org.springframework.beans.factory.DisposableBean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рдзрд┐ рд╢рд╛рдорд┐рд▓ рд╣реИ </font></font><code>void destroy()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА рдбрд┐рдмреНрдмреЗ рд╕реНрд╡рдпрдВ рдХреЛ рдирд╖реНрдЯ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ (рдореБрдХреНрдд рд╕рдВрд╕рд╛рдзрди, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП) рд╣реЛрдВрдЧреЗред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@PreDestroy + рдбрд┐рд╕реНрдкреЛрдЬреЗрдмрд▓ рдмреАрди</font></font></b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//DisposableBean.java package org.springframework.beans.factory; public interface DisposableBean { void destroy(); } //PreDestroy.java package javax.annotation; import java.lang.annotation.Retention; import java.lang.annotation.RetentionPolicy; @Retention(RetentionPolicy.RUNTIME) public @interface PreDestroy { } //DisposableBean.java public void close() { for (Object bean : singletons.values()) { for (Method method : bean.getClass().getMethods()) { if (method.isAnnotationPresent(PreDestroy.class)) { try { method.invoke(bean); } catch (IllegalAccessException e) { e.printStackTrace(); } catch (InvocationTargetException e) { e.printStackTrace(); } } } if (bean instanceof DisposableBean) { ((DisposableBean) bean).destroy(); } } }</span></span></code> </pre> <br></div></div><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреВрд░реНрдг рдмреАрди рдЬреАрд╡рдирдЪрдХреНрд░ </font></font></h2><img src="https://habrastorage.org/webt/ns/uh/lk/nsuhlk9ko9d9gxtzmcytopfruim.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП рд╣рдордиреЗ рдмрд┐рди рдХреЗ рдкреВрд░реНрдг рдЬреАрд╡рди рдЪрдХреНрд░ рдХреЛ рдЙрд╕рдХреЗ рдЖрдзреБрдирд┐рдХ рд░реВрдк рдореЗрдВ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдореБрдЭреЗ рдЙрдореНрдореАрдж рд╣реИ рдХрд┐ рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЖрдкрдХреЛ рдЗрд╕реЗ рдпрд╛рдж рд░рдЦрдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧрд╛ред</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдорд╛рд░рд╛ рдкрд╕рдВрджреАрджрд╛ рд╕рдВрджрд░реНрдн </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдмрд╣реБрдд рдмрд╛рд░ рд╕рдВрджрд░реНрдн рд╢рдмреНрдж рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рд░ рдХреЛрдИ рдпрд╣ рдирд╣реАрдВ рд╕рдордЭрддрд╛ рд╣реИ рдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдм рд╣рдо рд╕рдм рдХреБрдЫ рдХреНрд░рдо рдореЗрдВ рд░рдЦреЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдореИрдВрдиреЗ рд▓реЗрдЦ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рд╣реИ, рд╕рдВрджрд░реНрдн рдХрдВрдЯреЗрдирд░ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИ, рд╕рд╛рде рд╣реА рд╕рд╛рде </font></font><code>BeanFactory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди, рдмреБрдирд┐рдпрд╛рджреА рдХрд╛рд░реНрдпреЛрдВ (DI) рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдЕрднреА рднреА рдХреБрдЫ рд╢рд╛рдВрдд рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрдирдореЗрдВ рд╕реЗ рдПрдХ рдлреАрдЪрд░ рдмрд┐рдиреНрд╕ рдХреЗ рдмреАрдЪ рдИрд╡реЗрдВрдЯ рднреЗрдЬрдирд╛ рдФрд░ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рдирд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдЦ рдмрд╣реБрдд рдмрдбрд╝рд╛ рдирд┐рдХрд▓рд╛ рдФрд░ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдХрд╛рдЯ рджрд┐рдпрд╛ рдЬрд╛рдиреЗ рд▓рдЧрд╛, рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рд╕рдВрджрд░реНрдн рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рд╕реНрдкреЙрдЗрд▓рд░ рдХреЗ рдиреАрдЪреЗ рд░рдЦ рджрд┐рдпрд╛ред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдореЗрдВ рд╕рдВрджрд░реНрдн рдХрд╛ рдПрд╣рд╕рд╛рд╕ рд╣реИ</font></font></b> <div class="spoiler_text">    .   <code>org.springframework.context</code> ,   <code>ApplicationContext</code>  .        <code>BeanFactory</code> .      ,      <code>close()</code> . <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationContext</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> BeanFactory beanFactory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BeanFactory(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplicationContext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String basePackage)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> ReflectiveOperationException</span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"******Context is under construction******"</span></span>); beanFactory.instantiate(basePackage); beanFactory.populateProperties(); beanFactory.injectBeanNames(); beanFactory.initializeBeans(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ beanFactory.close(); } }</code> </pre> <br><br>     <code>Main</code> ,   ,   : <br><br><pre> <code class="java hljs">ApplicationContext applicationContext = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ApplicationContext(<span class="hljs-string"><span class="hljs-string">"com.kciray"</span></span>); applicationContext.close();</code> </pre> <br>   ,   .       <code>close()</code> ,     ┬л ┬╗     - .   ,   : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.springframework.context.event; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContextClosedEvent</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre> <br>      <code>ApplicationListener</code> ,      .        ,          ( <code>ApplicationListener&lt;E&gt;</code> ). ,    Java-,         . ,      ,    : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.springframework.context; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationListener</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt;</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onApplicationEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E event)</span></span></span></span>; }</code> </pre> <br>     <code>ApplicationContext</code> .     <code>close()</code>     ,  ,      .    <code>ApplicationListener&lt;ContextClosedEvent&gt;</code> ,     <code>onApplicationEvent(ContextClosedEvent)</code> .    ,   ? <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ beanFactory.close(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(Object bean : beanFactory.getSingletons().values()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bean <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> ApplicationListener) { } } }</code> </pre> <br>  рд▓реЗрдХрд┐рди рдирд╣реАрдВред   .       <code>bean instanceof ApplicationListener&lt;ContextClosedEvent&gt;</code> .      Java.      <i>  (type erasure)</i> ,    &lt;T&gt;   &lt;Object&gt;.   ,   ?    ,    <code>ApplicationListener&lt;ContextClosedEvent&gt;</code> ,     ? <br><br>   ,       ,       .  ,      ,    ,     ,   : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Type type: bean.getClass().getGenericInterfaces()){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(type <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> ParameterizedType){ ParameterizedType parameterizedType = (ParameterizedType) type; } }</code> </pre> <br> ,       ,  ,   тАФ   .   ,         : <br><br><pre> <code class="java hljs">Type firstParameter = parameterizedType.getActualTypeArguments()[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(firstParameter.equals(ContextClosedEvent.class)){ Method method = bean.getClass().getMethod(<span class="hljs-string"><span class="hljs-string">"onApplicationEvent"</span></span>, ContextClosedEvent.class); method.invoke(bean, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContextClosedEvent()); }</code> </pre> <br>        ApplicationListener: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PromotionsService</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BeanNameAware</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ApplicationListener</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContextClosedEvent</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... @Override public void onApplicationEvent(ContextClosedEvent event) { System.out.println("&gt;&gt; ContextClosed EVENT"); } }</span></span></code> </pre> <br> ,     Main  ,    ,   : <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//Main.java void testContext() throws ReflectiveOperationException{ ApplicationContext applicationContext = new ApplicationContext("com.kciray"); applicationContext.close(); }</span></span></code> </pre> <br></div></div><br><h2>  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рд╛рд░рдВрдн рдореЗрдВ, рдореИрдВрдиреЗ рдЕрдВрдЧреНрд░реЗрдЬреА рдореЗрдВ рдмрд╛рд▓реНрдбреБрдВрдЧ рдХреЗ рд▓рд┐рдП рдЗрд╕ рд▓реЗрдЦ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рдИ, рд▓реЗрдХрд┐рди рддрдм рдореБрдЭреЗ рд▓рдЧрд╛ рдХрд┐ рд╣реЗрдмреЗ рдХреЗ рджрд░реНрд╢рдХ рдкреНрд░рд╢рд┐рдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЕрдЧрд░ рдЖрдкрдХреЛ рдореЗрд░реЗ рд╡рд┐рдЪрд╛рд░ рдкрд╕рдВрдж рдЖрдП, рддреЛ рд▓реЗрдЦ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЙрд╕реЗ 30 рд╕реЗ рдЕрдзрд┐рдХ рдХреА рд░реЗрдЯрд┐рдВрдЧ рдорд┐рд▓рддреА рд╣реИ, рддреЛ рдореИрдВ рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХрд╛ рд╡рд╛рджрд╛ рдХрд░рддрд╛ рд╣реВрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдЦ рд▓рд┐рдЦрддреЗ рд╕рдордп, рдореИрдВрдиреЗ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕реНрдкреНрд░рд┐рдВрдЧ рдХреЛрд░ рдХреЗ рдЬреНрдЮрд╛рди рдХреЛ рджрд┐рдЦрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рдЬреЛ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрд░ рд╕реНрдкреНрд░рд┐рдВрдЧ 5.0 рдкреНрд░рдорд╛рдгрди рдкреНрд░рдорд╛рдгрди рдЧрд╛рдЗрдб</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░ рднреА рдЖрдзрд╛рд░рд┐рдд рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рдРрд╕реЗ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреА рдорджрдж рд╕реЗ рдЖрдк рдкреВрд░реЗ рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдХреЛ рдХрд╡рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЬрд╛рд╡рд╛ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рд╡рд╕рдВрдд рдХреЛ рдЕрдзрд┐рдХ рд╕реБрд▓рдн рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдкрдбреЗрдЯ 05/10/2018 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрддреНрд░ рдореЗрд░реЗ рдкрд╛рд╕ рд▓рдЧрд╛рддрд╛рд░ рдкреНрд░рд╢реНрди рдЖрддреЗ рд╣реИрдВ "рдФрд░ рдЬрдм рдирд┐рд░рдВрддрд░рддрд╛, рд╣рдо рдЙрд╕рдХреЗ рд▓рд┐рдП рдЗрдВрддрдЬрд╛рд░ рдХрд░ рд░рд╣реЗ рд╣реИрдВред" </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рд╡рд╣рд╛рдБ рдмрд┐рд▓реНрдХреБрд▓ рднреА рд╕рдордп рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЕрдиреНрдп рд╡реНрдпрдХреНрддрд┐рдЧрдд рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдВ рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдЧрд░ рдЖрдк рдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рдХреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдпрд╣ рд╡рд┐рдЪрд╛рд░ рдкрд╕рдВрдж рдЖрдпрд╛ рд╣реИ, рддреЛ рдЖрдк рд╡рд╕рдВрдд рдХреЗ рд╕рдВрдХреАрд░реНрдг рдЦрдВрдб рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рдирд┐рд░рдВрддрд░рддрд╛ рд▓реЗрдЦ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рд╣рдмреНрд░ рдЦрд╛рддрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдореИрдВ рдЕрдкрдиреЗ рдЦрд╛рддреЗ рд╕реЗ рдПрдХ рд▓реЗрдЦ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ рдпрд╛ рдЖрдкрдХреЛ рдПрдХ рдЖрдордВрддреНрд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рд╖рдпреЛрдВ рдХрд╛ рд╡рд┐рддрд░рдг: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдкреНрд░рд┐рдВрдЧ рдХрдВрдЯреЗрдирд░ - [рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдкреНрд░рд┐рдВрдЧ AOP - [рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдкреНрд░рд┐рдВрдЧ рд╡реЗрдм - [рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо] </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдкреНрд░рд┐рдВрдЧ рдХреНрд▓рд╛рдЙрдб - [рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдирд╛рдо]</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi419679/">https://habr.com/ru/post/hi419679/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi419665/index.html">рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╢рд╣рд░ рдХреА рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ ASKUE рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ LoRaWAN рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдЕрдиреБрднрд╡</a></li>
<li><a href="../hi419667/index.html">рдПрдЬрд╝реНрдпреЛрд░ рдкрд░ рдЙрдкрдпреЛрдЧреА рд╕рд╛рдордЧреНрд░рд┐рдпреЛрдВ рдХрд╛ рдЪрдпрдиред рднрд╛рдЧ 1 - рдХрд┐рддрд╛рдмреЗрдВ</a></li>
<li><a href="../hi419671/index.html">рд╕реАрдорд╛рдПрдВ рдЬрд┐рдирдХрд╛ рдЙрд▓реНрд▓рдВрдШрди рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдпрд╛ рд╣рдордиреЗ рддреАрди рдмрд╛рд░ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рдХреИрд╕реЗ рддреЗрдЬ рдХрд┐рдпрд╛</a></li>
<li><a href="../hi419673/index.html">рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдмреНрд░рд╣реНрдорд╛рдВрдб 6. рдПрдХ рд╕рдЬрд╛рддреАрдп рд╡рд┐рд╕реНрддрд╛рд░ рдмреНрд░рд╣реНрдорд╛рдВрдб рдХреА рдЧрддрд┐рд╢реАрд▓рддрд╛, рднрд╛рдЧ 2</a></li>
<li><a href="../hi419677/index.html">IOS рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ HTTPS рдЯреНрд░реИрдлрд┐рдХ рдХреЛ рдХреИрд╕реЗ рд╕реВрдБрдШреЗрдВ</a></li>
<li><a href="../hi419683/index.html">рдЪреБрд╕реНрдд рдЯреАрдореЛрдВ рдХреЗ рд▓рд┐рдП рдореИрдЯреНрд░рд┐рдХреНрд╕ рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИ?</a></li>
<li><a href="../hi419685/index.html">рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдПрдВ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП</a></li>
<li><a href="../hi419687/index.html">рдЧреБрдкреНрдд рдХреАрдмреЛрд░реНрдб рд╕реНрддрд░ 3 рдпрд╛ рд▓рдВрдмреЗ рдбреИрд╢ рдХреЛ рдХреИрд╕реЗ рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдВ</a></li>
<li><a href="../hi419689/index.html">I. рд╡рд┐рдШрдЯрдиред рджреНрд╡рд┐рддреАрдпред рдПрдбреАрдПрдЪрдбреА рдпрд╛ рдПрдХ рдЖрд▓рд╕реА рдореЛрд░рди?</a></li>
<li><a href="../hi419693/index.html">рдорд┐рдХрд░реЛрдЯрд┐рдХ: рд░реАрд╕реЗрдЯ, рдмреИрдХрдЕрдк рдФрд░ рдбреНрдпреВрд▓рдмреВрдЯ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>