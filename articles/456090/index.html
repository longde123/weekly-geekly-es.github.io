<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïõ ‚úîÔ∏è ‚ôÇÔ∏è Introducci√≥n a las pruebas unitarias en Unity ü¶é üêº üç©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øTienes curiosidad por saber c√≥mo funcionan las pruebas unitarias en Unity? ¬øNo est√° seguro de qu√© prueba de unidad es en general? Si respondiste posi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introducci√≥n a las pruebas unitarias en Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456090/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b63/9d9/71f/b639d971f3e2a10105d91bb3c94fdbb1.jpg" alt="imagen"></div><br>  ¬øTienes curiosidad por saber c√≥mo funcionan las pruebas unitarias en Unity?  ¬øNo est√° seguro de qu√© prueba de unidad es en general?  Si respondiste positivamente a estas preguntas, entonces este tutorial te ser√° √∫til.  De √©l aprender√° lo siguiente sobre las pruebas unitarias: <br><br><ul><li>  Que es esto </li><li>  Su beneficio </li><li>  Ventajas y desventajas. </li><li>  C√≥mo funciona en Unity usando Test Runner </li><li>  C√≥mo escribir y ejecutar pruebas unitarias que ser√°n probadas </li></ul><br><blockquote>  <em>Nota</em> : este tutorial asume que est√° familiarizado con el lenguaje C # y los conceptos b√°sicos del desarrollo en Unity.  Si es nuevo en Unity, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">consulte primero los otros tutoriales en este motor</a> . </blockquote><h2>  ¬øQu√© es una prueba unitaria? </h2><br>  Antes de profundizar en el c√≥digo, es importante comprender claramente qu√© es la prueba de unidad.  En pocas palabras, las pruebas unitarias son pruebas ... unidades. <br><br>  <em>La prueba de la unidad</em> (idealmente) est√° dise√±ada para probar una unidad de c√≥digo separada.  La composici√≥n de una "unidad" puede variar, pero es importante recordar que las pruebas unitarias deben probar exactamente un "elemento" a la vez. <br><a name="habracut"></a><br>  Es necesario crear pruebas unitarias para verificar que un peque√±o fragmento l√≥gico de c√≥digo en un escenario particular se ejecute exactamente como se espera.  Esto puede ser dif√≠cil de entender antes de comenzar a escribir sus propias pruebas unitarias, as√≠ que veamos un ejemplo: <br><br>  Ha escrito un m√©todo que permite al usuario ingresar un nombre.  El m√©todo se escribe para que no se permitan n√∫meros en el nombre, y el nombre en s√≠ mismo puede constar de solo diez caracteres o menos.  Su m√©todo intercepta la pulsaci√≥n de tecla de cada tecla y agrega el car√°cter correspondiente al campo de <code>name</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> name = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateNameWithCharacter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">: character</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 if (!Char.IsLetter(char)) { return; } // 2 if (name.Length &gt; 10) { return; } // 3 name += character; }</span></span></code> </pre> <br>  ¬øQu√© est√° pasando aqu√≠? <br><br><ol><li>  Si el car√°cter no es una letra, entonces el c√≥digo sale previamente de la funci√≥n y no agrega el car√°cter a la cadena. </li><li>  Si el nombre tiene diez o m√°s caracteres, el c√≥digo no permite al usuario agregar otro car√°cter. </li><li>  Si se pasan estas dos comprobaciones, el c√≥digo agrega un car√°cter al final del nombre. </li></ol><br>  Esta unidad se puede probar, ya que es un "m√≥dulo" del trabajo realizado.  Las pruebas unitarias <i>imponen la</i> l√≥gica del m√©todo. <br><br><h2>  Ejemplo de prueba de unidad </h2><br>  ¬øC√≥mo escribimos pruebas unitarias para el m√©todo <code>UpdateNameWithCharacter</code> ? <br><br>  Antes de comenzar a implementar estas pruebas unitarias, debemos considerar cuidadosamente lo que hacen estas pruebas y encontrar nombres para ellas. <br><br>  Eche un vistazo a los ejemplos de nombres de prueba de unidad a continuaci√≥n.  De los nombres debe quedar claro que verifican: <br><br> <code>UpdateNameDoesntAllowCharacterAddingToNameIfNameIsTenOrMoreCharactersInLength</code> <br> <br> <code>UpdateNameAllowsLettersToBeAddedToName</code> <br> <br> <code>UpdateNameDoesntAllowNonLettersToBeAddedToName</code> <br> <br>  A partir de estos nombres de m√©todos de prueba, vemos que realmente verificamos si la "unidad" de trabajo se <code>UpdateNameWithCharacter</code> mediante el m√©todo <code>UpdateNameWithCharacter</code> .  Estos nombres de prueba pueden parecer demasiado largos y detallados, pero es bueno para nosotros. <br><br>  Cada prueba unitaria que escriba es parte de un conjunto de pruebas.  <em>El conjunto de pruebas</em> contiene todas las pruebas unitarias relacionadas con el grupo l√≥gico funcional (por ejemplo, "pruebas de unidades de batalla").  Si alguna prueba del kit falla, entonces todo el conjunto de pruebas falla. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/20d/1e7/0ed/20d1e70ed7231be0c0cfd5f6f082751c.png"></div><br><h2>  Lanzamiento del juego </h2><br>  Abra el <em>proyecto Crashteroids Starter</em> (puede descargarlo <a href="">desde aqu√≠</a> ) y luego abra la escena del <em>juego</em> desde la carpeta <em>Assets / RW / Scenes</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/029/6fd/316/0296fd31696c7e75eeea4ec626709277.jpg"></div><br>  Haga clic en <em>Jugar</em> para iniciar Crashteroids, y luego haga clic en el bot√≥n <em>Iniciar juego</em> .  Mueve la nave espacial con las flechas <em>izquierda</em> y <em>derecha</em> del teclado. <br><br>  Para disparar un rayo l√°ser, presione la <em>barra espaciadora</em> .  Si el rayo golpea el asteroide, la puntuaci√≥n aumentar√° en uno.  Si un asteroide choca con un barco, el barco explota y el juego termina (con la posibilidad de comenzar de nuevo). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c2f/cea/c40/c2fceac408455035e41f3c9c268ff448.jpg"></div><br>  Intenta jugar un poco y aseg√∫rate de que despu√©s de la colisi√≥n del asteroide con la nave aparezca la inscripci√≥n Game Over. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b5/55f/fa6/0b555ffa69f33fb09fb17204197af889.jpg"></div><br><h2>  Comenzando con Unity Test Runner </h2><br>  Ahora que sabemos c√≥mo funciona el juego, es hora de escribir pruebas unitarias para verificar que todo funcione como deber√≠a.  Por lo tanto, si usted (u otra persona) decide actualizar el juego, estar√° seguro de que la actualizaci√≥n no romper√° nada de lo que funcion√≥ antes. <br><br>  Para escribir pruebas, primero debe aprender sobre Unity Test Runner.  <em>Test Runner le</em> permite ejecutar pruebas y verificar si pasan con √©xito.  Para abrir Unity Test Runner, seleccione <em>Ventana ‚ñ∏ General ‚ñ∏ Test Runner</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f48/f31/aa4/f48f31aa4fc16c486b2161c75ba772af.jpg"></div><br>  Despu√©s de que Test Runner se abra en una nueva ventana, puede simplificar su vida haciendo clic en la ventana de Test Runner y <em>arrastr√°ndola</em> al lugar junto a la ventana de Scene. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e10/25b/408/e1025b408f785453827a962ce33aff67.gif"></div><br><h2>  Preparaci√≥n de NUnit y carpetas de prueba </h2><br>  Test Runner es una funci√≥n de prueba unitaria proporcionada por Unity, pero utiliza el marco <em>NUnit</em> .  Cuando comience a trabajar con pruebas unitarias m√°s en serio, le recomiendo estudiar la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">wiki en NUnit</a> para obtener m√°s informaci√≥n.  En este art√≠culo se analizar√° todo lo que necesita por primera vez. <br><br>  Para ejecutar las pruebas, primero debemos crear una carpeta de prueba en la que se almacenar√°n las clases de prueba. <br><br>  En la ventana <em>Proyecto,</em> seleccione la carpeta <em>RW</em> .  Eche un vistazo a la ventana <em>Test Runner</em> y aseg√∫rese de que <em>PlayMode est√©</em> seleccionado. <br><br>  Haga clic en el bot√≥n llamado <em>Crear carpeta de ensamblaje de prueba de PlayMode</em> .  Ver√° aparecer una nueva carpeta en la carpeta RW.  Estamos satisfechos con las <em>pruebas de</em> nombre est√°ndar, por lo que puede presionar <em>Entrar</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5f5/be4/df3/5f5be4df386c8f262c4a3c257b55319f.gif"></div><br>  Tal vez se pregunte cu√°les son estas dos pesta√±as diferentes dentro de Test Runner. <br><br>  La pesta√±a <em>PlayMode se</em> usa para las pruebas realizadas en el modo Play (cuando el juego se ejecuta en tiempo real).  Las pruebas en la pesta√±a <em>EditMode se</em> ejecutan fuera del modo Play, lo cual es conveniente para probar cosas como comportamientos personalizados en el Inspector. <br><br>  En este tutorial, cubriremos las pruebas de PlayMode.  Pero cuando se sienta c√≥modo, puede intentar experimentar con las pruebas en EditMode.  <em>Cuando trabaje con Test Runner en este tutorial, aseg√∫rese siempre de que la pesta√±a PlayMode est√© seleccionada</em> . <br><br><h2>  ¬øQu√© hay en el conjunto de pruebas? </h2><br>  Como aprendimos anteriormente, una prueba unitaria es una funci√≥n que prueba el comportamiento de un peque√±o fragmento de c√≥digo espec√≠fico.  Dado que la prueba unitaria es un m√©todo, para ejecutarla, debe estar en el archivo de clase. <br><br>  Test Runner omite todos los archivos de clase de prueba y realiza pruebas unitarias a partir de ellos.  Un archivo de clase que contiene pruebas unitarias se denomina conjunto de pruebas. <br><br>  En el conjunto de pruebas, subdividimos l√≥gicamente nuestras pruebas.  Debemos separar el c√≥digo de prueba en conjuntos l√≥gicos separados (por ejemplo, un conjunto de pruebas para f√≠sica y un conjunto separado para batalla).  En este tutorial solo necesitamos un conjunto de pruebas, y es hora de crear una. <br><br><h2>  Preparaci√≥n de un conjunto de prueba y conjunto de pruebas </h2><br>  Seleccione la carpeta <em>Pruebas</em> y, en la ventana <em>Test Runner</em> , haga clic en el bot√≥n <em>Crear secuencia de comandos de prueba en la carpeta actual</em> .  Nombre el nuevo archivo <em>TestSuite</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c64/0ab/968/c640ab968dfd79a3c72e2a99bc5daa2c.gif"></div><br>  Adem√°s del nuevo archivo C #, el motor de Unity tambi√©n crea otro archivo llamado <em>Tests.asmdef</em> .  Este es el <em>archivo de definici√≥n de ensamblaje</em> , que se utiliza para mostrar a Unity d√≥nde est√°n las dependencias del archivo de prueba.  Esto es necesario porque el c√≥digo de la aplicaci√≥n terminada est√° contenido por separado del c√≥digo de prueba. <br><br>  Si tiene una situaci√≥n en la que Unity no puede encontrar archivos de prueba o pruebas, aseg√∫rese de que haya un archivo de definici√≥n de ensamblaje que incluya su conjunto de pruebas.  El siguiente paso es configurarlo. <br><br>  Para que el c√≥digo de prueba tenga acceso a las clases de juego, crearemos un ensamblaje del c√≥digo de clase y estableceremos el enlace en el ensamblaje de Pruebas.  Haga clic en la carpeta <em>Scripts</em> para seleccionarlo.  Haga clic derecho en esta carpeta y seleccione <em>Crear ‚ñ∏ Definici√≥n de ensamblaje</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b8/24c/84a/5b824c84ad6686493c41951751030b8d.jpg"></div><br>  Denomine el archivo <em>GameAssembly</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21b/bd6/c96/21bbd6c968426c23ea7839dd9f747355.png"></div><br>  Haga clic en la carpeta <em>Pruebas</em> y luego en el archivo de definici√≥n de compilaci√≥n <em>Pruebas</em> .  En el <em>Inspector,</em> haga clic en el bot√≥n <em>m√°s</em> debajo del encabezado <em>Referencias de definici√≥n de ensamblaje</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4be/fc3/d13/4befc3d13ea67e5ec94b707d04582a3d.png"></div><br>  Ver√° el campo <em>Falta referencia</em> .  Haga clic en el <em>punto al</em> lado de este campo para abrir la ventana de selecci√≥n.  Seleccione el archivo <em>GameAssembly</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/727/990/57f/72799057fe5ff62ba5c997d5ec2a7563.jpg"></div><br>  Deber√≠a ver el archivo de ensamblaje GameAssembly en la secci√≥n de enlaces.  Haga clic en el bot√≥n <em>Aplicar</em> para guardar estos cambios. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a16/bf5/259/a16bf525984f2f23b819d9b2d0e37a2b.png"></div><br>  Si no sigue estos pasos, no podr√° hacer referencia a los archivos de clase del juego dentro de los archivos de prueba de la unidad.  Despu√©s de lidiar con esto, puede continuar con el c√≥digo. <br><br><h2>  Escribimos la primera prueba unitaria </h2><br>  Haga doble clic en el script <em>TestSuite</em> para abrirlo en el editor de c√≥digo.  Reemplace todo el c√≥digo con esto: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.TestTools; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> NUnit.Framework; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Collections; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TestSuite</span></span> { }</code> </pre> <br>  ¬øQu√© pruebas necesitamos escribir?  Honestamente, incluso en un juego peque√±o como Crashteroids, puedes escribir bastantes pruebas para verificar que todo funcione como deber√≠a.  En este tutorial, nos restringimos solo a √°reas clave: reconocimiento de colisi√≥n y mec√°nica b√°sica del juego. <br><br><blockquote>  <em>Nota</em> : cuando se trata de escribir pruebas unitarias de un producto a nivel de producci√≥n, debe pagar el tiempo suficiente para tener en cuenta todos los casos l√≠mite que deben probarse en todas las √°reas del c√≥digo. </blockquote><br>  Como primera prueba, es bueno comprobar si los asteroides realmente se est√°n moviendo hacia abajo.  ¬°Ser√° dif√≠cil para ellos chocar con la nave si se alejan de ella!  Agregue el siguiente m√©todo y variable privada al script <em>TestSuite</em> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Game game; <span class="hljs-comment"><span class="hljs-comment">// 1 [UnityTest] public IEnumerator AsteroidsMoveDown() { // 2 GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;("Prefabs/Game")); game = gameGameObject.GetComponent&lt;Game&gt;(); // 3 GameObject asteroid = game.GetSpawner().SpawnAsteroid(); // 4 float initialYPos = asteroid.transform.position.y; // 5 yield return new WaitForSeconds(0.1f); // 6 Assert.Less(asteroid.transform.position.y, initialYPos); // 7 Object.Destroy(game.gameObject); }</span></span></code> </pre> <br>  Solo hay unas pocas l√≠neas de c√≥digo, pero hacen muchas cosas.  Entonces deteng√°monos y tratemos con cada parte: <br><br><ol><li>  Este es <em>un atributo</em> .  Los atributos definen comportamientos espec√≠ficos del compilador.  Este atributo le dice al compilador de Unity que el c√≥digo es una prueba unitaria.  Debido a esto, aparecer√° en el Test Runner cuando comience las pruebas. </li><li>  Crea una instancia de Juego.  Todo lo dem√°s est√° incrustado en el juego, por lo que cuando lo creamos, contendr√° todo lo que necesita ser probado.  En un entorno de producci√≥n, lo m√°s probable es que todos los elementos no est√©n dentro del mismo prefabricado.  Por lo tanto, deber√° recrear todos los objetos necesarios en la escena. </li><li>  Aqu√≠ creamos un asteroide para que podamos monitorear si se est√° moviendo.  El m√©todo <code>SpawnAsteroid</code> devuelve una instancia del asteroide creado.  El componente Asteroide tiene un m√©todo <code>Move</code> (si tiene curiosidad sobre c√≥mo funciona el movimiento, puede echar un vistazo a la secuencia de comandos <em>Asteroid</em> dentro de <em>RW / Scripts</em> ). </li><li>  El seguimiento de la posici√≥n inicial es necesario para asegurarse de que el asteroide se haya movido hacia abajo. </li><li>  Todas las pruebas unitarias de Unity son rutinas, por lo que debe agregar un retorno suave.  Tambi√©n agregamos un paso de tiempo de 0.1 segundos para simular el paso del tiempo por el cual se supon√≠a que el asteroide deb√≠a moverse hacia abajo.  Si no necesita simular un paso de tiempo, puede devolver nulo. </li><li>  Esta es la etapa de <em>afirmaci√≥n</em> , en la que afirmamos que la posici√≥n del asteroide es menor que la posici√≥n inicial (es decir, se ha movido hacia abajo).  Comprender las afirmaciones es una parte importante de las pruebas unitarias, y NUnit proporciona varios m√©todos de afirmaci√≥n.  Aprobar o no aprobar el examen est√° determinado por esta l√≠nea. </li><li>  Por supuesto, nadie lo rega√±ar√° por el desorden que queda despu√©s de completar las pruebas, pero otras pruebas pueden fallar debido a eso.  Siempre es importante limpiar (eliminar o restablecer) el c√≥digo despu√©s de la prueba de la unidad, de modo que cuando ejecute la pr√≥xima prueba de la unidad no queden artefactos que puedan afectar esta prueba.  Es suficiente para nosotros simplemente eliminar el objeto del juego, porque para cada prueba creamos una instancia completamente nueva del juego. </li></ol><br><h2>  Pasando pruebas </h2><br>  Bueno, escribiste tu primera prueba unitaria, pero ¬øc√≥mo sabes si funciona?  Por supuesto, con Test Runner!  En la ventana Test Runner, expanda todas las l√≠neas con flechas.  Deber√≠a ver la prueba <code>AsteroidsMoveDown</code> en la lista con c√≠rculos grises: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d4c/5d4/05a/d4c5d405a1aa5aded204806790a07233.jpg"></div><br>  Un c√≠rculo gris indica que la prueba a√∫n no se ha completado.  Si la prueba se inici√≥ y pas√≥, se muestra una flecha verde al lado.  Si la prueba falla, se mostrar√° una X roja junto a ella. Ejecute la prueba haciendo clic en el bot√≥n <em>Ejecutar todo</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d45/da5/8c9/d45da58c99e0db679578aabab6e5601b.jpg"></div><br>  Esto crear√° una escena temporal y ejecutar√° la prueba.  Al finalizar, deber√≠a ver que la prueba pas√≥. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/640/16b/19e/64016b19e01a68544a1644b61ffb5c57.jpg"></div><br>  Has escrito con √©xito tu primera prueba unitaria indicando que los asteroides creados se est√°n moviendo hacia abajo. <br><br><blockquote>  <em>Nota</em> : antes de comenzar a escribir sus propias pruebas unitarias, debe comprender la implementaci√≥n que est√° probando.  Si tiene curiosidad por saber c√≥mo funciona la l√≥gica que est√° probando, estudie el c√≥digo en la carpeta <em>RW / Scripts</em> . </blockquote><br><h2>  Usando pruebas de integraci√≥n </h2><br>  Antes de profundizar en el agujero del conejo de las pruebas unitarias, es hora de decir qu√© son las pruebas de integraci√≥n y en qu√© se diferencian de las pruebas unitarias. <br><br>  <em>Las pruebas de integraci√≥n</em> son pruebas que verifican c√≥mo funcionan juntos los "m√≥dulos" del c√≥digo.  "M√≥dulo" es otro t√©rmino difuso.  Una diferencia importante es que las pruebas de integraci√≥n deben probar el funcionamiento del software en la producci√≥n real (es decir, cuando un jugador realmente juega un juego). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f01/824/6f3/f018246f3658664a77104a1fa1dc045b.png"></div><br>  Digamos que hiciste un juego de batalla donde un jugador mata monstruos.  Puedes crear una prueba de integraci√≥n para asegurarte de que cuando un jugador mata a 100 enemigos, se abre un logro ("Logro"). <br><br>  Esta prueba afectar√° a varios m√≥dulos de c√≥digo.  Lo m√°s probable es que se trate del motor f√≠sico (reconocimiento de colisiones), despachadores enemigos (que controlan la salud del enemigo y procesan da√±os, as√≠ como tambi√©n pasan a otros eventos relacionados) y un rastreador de eventos que rastrea todos los eventos disparados (por ejemplo, "el monstruo es asesinado").  Luego, cuando llegue el momento de desbloquear el logro, puede llamar al administrador de logros. <br><br>  La prueba de integraci√≥n simular√° al jugador matando a 100 monstruos y verificar√° si el logro est√° desbloqueado.  Es muy diferente de la prueba unitaria porque prueba componentes de c√≥digo grandes que funcionan juntos. <br><br>  En este tutorial, no estudiaremos las pruebas de integraci√≥n, pero esto deber√≠a mostrar la diferencia entre la unidad de trabajo (y por qu√© se est√° probando la unidad) y el m√≥dulo del c√≥digo (y por qu√© se est√° probando la integraci√≥n). <br><br><h2>  Agregar una prueba a un conjunto de pruebas </h2><br>  La pr√≥xima prueba probar√° el final del juego cuando la nave colisiona con un asteroide.  Con <em>TestSuite</em> abierto en el <em>editor de</em> c√≥digo, agregue la prueba que se muestra a continuaci√≥n en la primera prueba unitaria y guarde el archivo: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameOverOccursOnAsteroidCollision</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); Game game = gameGameObject.GetComponent&lt;Game&gt;(); GameObject asteroid = game.GetSpawner().SpawnAsteroid(); <span class="hljs-comment"><span class="hljs-comment">//1 asteroid.transform.position = game.GetShip().transform.position; //2 yield return new WaitForSeconds(0.1f); //3 Assert.True(game.isGameOver); Object.Destroy(game.gameObject); }</span></span></code> </pre> <br>  Ya vimos la mayor parte de este c√≥digo en la prueba anterior, pero hay algunas diferencias: <br><br><ol><li>  Obligamos al asteroide y a la nave a colisionar, dando claramente al asteroide la misma posici√≥n que la nave.  Esto crear√° una colisi√≥n de sus hitboxes y conducir√° al final del juego.  Si tiene curiosidad sobre c√≥mo funciona este c√≥digo, eche un vistazo a los archivos <em>Ship</em> , <em>Game</em> y <em>Asteroid</em> en la carpeta Scripts. </li><li>  Es necesario un paso de tiempo para que se active el evento Colisi√≥n del motor f√≠sico, por lo que se devuelve un retraso de 0.1 segundos. </li><li>  Esta afirmaci√≥n es verdadera y verifica que el indicador <code>gameOver</code> en el script del juego es verdadero.  La bandera se vuelve verdadera durante la operaci√≥n del juego, cuando se destruye el barco, es decir, probamos para asegurarnos de que se establece en verdadero despu√©s de la destrucci√≥n del barco. </li></ol><br>  Regrese a la ventana Test Runner y ver√° que una nueva prueba de unidad ha aparecido all√≠. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a8/f52/b28/4a8f52b2875ca90a37b74348435e3da5.jpg"></div><br>  Esta vez ejecutaremos este en lugar del conjunto de pruebas completo.  Haga clic en <em>GameOverOccursOnAsteroidCollision</em> , y luego en el bot√≥n <em>Ejecutar seleccionado</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e2/0f5/fbd/7e20f5fbd8b4a8a6ff849fea66c90ed1.jpg"></div><br>  Y listo, pasamos otra prueba. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/966/02f/869/96602f869c59d8218407a7ce2e57df7d.jpg"></div><br><h2>  Etapas de sintonizaci√≥n y destrucci√≥n </h2><br>  Es posible que haya notado que en nuestras dos pruebas hay un c√≥digo que se repite: d√≥nde se crea el objeto Juego y d√≥nde se establece un enlace al script del Juego: <br><br><pre> <code class="cs hljs">GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); game = gameGameObject.GetComponent&lt;Game&gt;();</code> </pre> <br>  Tambi√©n notar√°s que hay una repetici√≥n en la destrucci√≥n del objeto Juego: <br><br><pre> <code class="cs hljs">Object.Destroy(game.gameObject);</code> </pre> <br>  Al probar esto sucede muy a menudo.  Cuando se trata de ejecutar pruebas unitarias, en realidad hay dos fases: la fase de <em>configuraci√≥n</em> y la fase de <em>desmontaje</em> . <br><br>  Todo el c√≥digo dentro del m√©todo de configuraci√≥n se ejecutar√° antes de la prueba de la unidad (en este conjunto), y todo el c√≥digo dentro del m√©todo Tear Down se ejecutar√° despu√©s de la prueba de la unidad (en este conjunto). <br><br>  Es hora de simplificar nuestras vidas moviendo la configuraci√≥n y desmontando el c√≥digo a m√©todos especiales.  Abra el editor de c√≥digo y agregue el siguiente c√≥digo al comienzo del archivo <em>TestSuite</em> , justo antes del primer atributo [UnityTest]: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">SetUp</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); game = gameGameObject.GetComponent&lt;Game&gt;(); }</code> </pre> <br>  El atributo <code>SetUp</code> indica que se llama a este m√©todo antes de <code>SetUp</code> cada prueba. <br><br>  Luego agregue el siguiente m√©todo y guarde el archivo: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">TearDown</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Teardown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Object.Destroy(game.gameObject); }</code> </pre> <br>  El atributo <code>TearDown</code> indica que se llama a este m√©todo despu√©s de <code>TearDown</code> cada prueba. <br><br>  Una vez preparado el c√≥digo de configuraci√≥n y destrucci√≥n, elimine las l√≠neas de c√≥digo que est√°n presentes en estos m√©todos y reempl√°celas con llamadas a los m√©todos correspondientes.  Despu√©s de eso, el c√≥digo se ver√° as√≠: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TestSuite</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Game game; [SetUp] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Setup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject gameGameObject = MonoBehaviour.Instantiate(Resources.Load&lt;GameObject&gt;(<span class="hljs-string"><span class="hljs-string">"Prefabs/Game"</span></span>)); game = gameGameObject.GetComponent&lt;Game&gt;(); } [TearDown] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Teardown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Object.Destroy(game.gameObject); } [UnityTest] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AsteroidsMoveDown</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject asteroid = game.GetSpawner().SpawnAsteroid(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> initialYPos = asteroid.transform.position.y; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.1f</span></span></span></span></span><span class="hljs-function">)</span></span>; Assert.Less(asteroid.transform.position.y, initialYPos); } [UnityTest] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GameOverOccursOnAsteroidCollision</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { GameObject asteroid = game.GetSpawner().SpawnAsteroid(); asteroid.transform.position = game.GetShip().transform.position; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.1f</span></span></span></span></span><span class="hljs-function">)</span></span>; Assert.True(game.isGameOver); } }</code> </pre> <br><h2>  Prueba de juego terminado y disparo con l√°ser </h2><br>  Una vez preparados los m√©todos de ajuste y destrucci√≥n que simplifican nuestras vidas, podemos comenzar a agregar nuevas pruebas en las que se utilizan.  La siguiente prueba es verificar que cuando un jugador hace clic en <em>Nuevo juego</em> , el valor de <em>gameOver bool</em> no <em>es</em> cierto.  Agregue dicha prueba al final del archivo y gu√°rdela: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NewGameRestartsGame</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//1 game.isGameOver = true; game.NewGame(); //2 Assert.False(game.isGameOver); yield return null; }</span></span></code> </pre> <br>  Esto ya deber√≠a parecerte familiar, pero vale la pena mencionar lo siguiente: <br><br><ol><li>  Este fragmento de c√≥digo prepara esta prueba para que el <code>gameOver</code> booleano <code>gameOver</code> sea ‚Äã‚Äãverdadero.  Al llamar al m√©todo <code>NewGame</code> , nuevamente debe establecer el indicador en <code>false</code> . </li><li>  Aqu√≠ argumentamos que bool <code>isGameOver</code> es <code>false</code> , lo que deber√≠a ser cierto cuando se invoca un nuevo juego. </li></ol><br>  Regrese a Test Runner y deber√≠a ver que hay una nueva prueba <em>NewGameRestartsGame</em> .  Ejecute esta prueba, como lo hicimos antes, y ver√° que se ejecuta con √©xito: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b63/9d9/71f/b639d971f3e2a10105d91bb3c94fdbb1.jpg"></div><br><h2>  Declaraci√≥n de rayo l√°ser </h2><br>  La siguiente prueba es agregar la prueba de que el rayo l√°ser disparado por la nave est√° volando (similar a la primera prueba de unidad que escribimos).  Abra el archivo <em>TestSuite</em> en el editor.  Agregue el siguiente m√©todo y guarde el archivo: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LaserMovesUp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 GameObject laser = game.GetShip().SpawnLaser(); // 2 float initialYPos = laser.transform.position.y; yield return new WaitForSeconds(0.1f); // 3 Assert.Greater(laser.transform.position.y, initialYPos); }</span></span></code> </pre> <br>  Esto es lo que hace este c√≥digo: <br><br><ol><li>  Obtiene un enlace al rayo l√°ser generado emitido desde la nave. </li><li>  La posici√≥n inicial se registra para que podamos verificar que se est√° moviendo hacia arriba. </li><li>  Esta declaraci√≥n es consistente con la declaraci√≥n de la prueba de la unidad <code>AsteroidsMoveDown</code> , solo que ahora afirmamos que el valor es mayor (es decir, el l√°ser se mueve hacia arriba). </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guarde el archivo y regrese a Test Runner. </font><font style="vertical-align: inherit;">Ejecute la prueba </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LaserMovesUp</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y observe </font><em><font style="vertical-align: inherit;">c√≥mo</font></em><font style="vertical-align: inherit;"> pasa:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ce/a15/242/2cea152426f82ea491345ead3f0eaa94.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ahora ya debe comenzar a comprender c√≥mo funciona todo, por lo que es hora de agregar las dos √∫ltimas pruebas y completar el tutorial. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verificando que el l√°ser destruya los asteroides </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A continuaci√≥n, nos aseguraremos de que cuando se golpee, el l√°ser destruya el asteroide. </font><font style="vertical-align: inherit;">Abra el editor y agregue la </font><font style="vertical-align: inherit;">siguiente prueba </font><font style="vertical-align: inherit;">al final de </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TestSuite</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y luego guarde el archivo:</font></font><br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LaserDestroysAsteroid</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 GameObject asteroid = game.GetSpawner().SpawnAsteroid(); asteroid.transform.position = Vector3.zero; GameObject laser = game.GetShip().SpawnLaser(); laser.transform.position = Vector3.zero; yield return new WaitForSeconds(0.1f); // 2 UnityEngine.Assertions.Assert.IsNull(asteroid); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As√≠ es como funciona: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Creamos un asteroide y un rayo l√°ser, y les asignamos la misma posici√≥n para provocar una colisi√≥n. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es una prueba especial con una distinci√≥n importante. </font><font style="vertical-align: inherit;">¬øVes que utilizamos expl√≠citamente </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UnityEngine.Assertions</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para esta prueba </font><font style="vertical-align: inherit;">? </font><font style="vertical-align: inherit;">Esto se debe a que Unity tiene una clase </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nula</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especial </font><font style="vertical-align: inherit;">que es diferente de la clase nula "regular". </font><font style="vertical-align: inherit;">Una instrucci√≥n de marco NUnit </font></font><code>Assert.IsNull()</code> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no funcionar√°</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en las comprobaciones de Unity para nulo. </font><font style="vertical-align: inherit;">Al verificar nulo en Unity, debe usar expl√≠citamente UnityEngine.Assertions.Assert, no Assert from NUnit.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regrese a Test Runner y ejecute una nueva prueba. </font><font style="vertical-align: inherit;">Ver√° un icono verde que nos agrada.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/275/80f/1b2/27580f1b206647e0a2fd09c43577ee8f.jpg"></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Probar o no evaluar: esa es la pregunta </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La decisi√≥n de apegarse a las pruebas unitarias no es una decisi√≥n f√°cil y no debe tomarse a la ligera. Sin embargo, los beneficios de las pruebas merecen la pena. Hay incluso una metodolog√≠a de desarrollo, llamado </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">desarrollo basado en pruebas</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Test Driven Development, TDD). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Trabajando dentro del marco de TDD, usted escribe pruebas antes de escribir la l√≥gica de la aplicaci√≥n. Primero, crea pruebas, aseg√∫rese de que el programa no las pase y luego escriba solo el c√≥digo dise√±ado para pasar las pruebas. Este puede ser un enfoque muy diferente a la codificaci√≥n, pero asegura que usted escriba el c√≥digo de manera adecuada para las pruebas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tenga esto en cuenta cuando comience a trabajar en su pr√≥ximo proyecto. Pero por ahora, es hora de escribir sus propias pruebas unitarias, para las cuales necesita un juego que le hemos proporcionado.</font></font><br><br><blockquote> <em></em> :    ‚Äî    ,    .   ,           .    ¬´¬ª ,   ,      .   ,             .        ,        .       ,     ,            . </blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Las pruebas pueden ser una gran inversi√≥n, as√≠ que considere las ventajas y desventajas de agregar pruebas unitarias a su proyecto: </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ventajas de las pruebas unitarias </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Las pruebas unitarias tienen muchas ventajas importantes, que incluyen las siguientes: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Da confianza de que el m√©todo se comporta como se esperaba. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sirve como documentaci√≥n para nuevas personas que estudian la base del c√≥digo (las pruebas unitarias son excelentes para la ense√±anza). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Te hace escribir c√≥digo de manera comprobable. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Permite aislar y corregir errores m√°s r√°pido. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> No permite actualizaciones futuras para agregar nuevos errores al antiguo c√≥digo de trabajo (se denominan errores de regresi√≥n). </font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Desventajas de las pruebas unitarias </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, es posible que no tenga tiempo o presupuesto para realizar pruebas unitarias. </font><font style="vertical-align: inherit;">Estas son sus desventajas a tener en cuenta:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Escribir pruebas puede llevar m√°s tiempo que el c√≥digo en s√≠. </font></font></li><li>       . </li><li>      . </li><li> ,        . </li><li>         ,    -. </li><li>     (       ),       . </li><li> -    . </li><li> UI  . </li><li>           . </li><li>              . </li></ul><br><h2>  ,       </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es hora de escribir la √∫ltima prueba. </font><font style="vertical-align: inherit;">Abra el editor de c√≥digo, agregue el siguiente c√≥digo al final del archivo </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TestSuite</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y gu√°rdelo:</font></font><br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">UnityTest</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DestroyedAsteroidRaisesScore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 GameObject asteroid = game.GetSpawner().SpawnAsteroid(); asteroid.transform.position = Vector3.zero; GameObject laser = game.GetShip().SpawnLaser(); laser.transform.position = Vector3.zero; yield return new WaitForSeconds(0.1f); // 2 Assert.AreEqual(game.score, 1); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esta es una prueba importante, verificando que cuando un jugador destruye un asteroide, la puntuaci√≥n aumenta. </font><font style="vertical-align: inherit;">En esto consiste:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Creamos un asteroide y un rayo l√°ser, y los colocamos en una posici√≥n. </font><font style="vertical-align: inherit;">Debido a esto, surge una colisi√≥n que desencadena un aumento en la puntuaci√≥n.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> La afirmaci√≥n de que game.score ahora es 1 (y no 0, como era al principio). </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guarde el c√≥digo y regrese a Test Runner para ejecutar esta √∫ltima prueba y ver si se ejecuta el juego: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e5d/d4c/0ee/e5dd4c0ee4ad72e21a180621c65c11ba.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Impresionante! </font><font style="vertical-align: inherit;">Todas las pruebas pasaron.</font></font><br><br><h2>  ¬øA d√≥nde ir despu√©s? </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En el art√≠culo examinamos una gran cantidad de informaci√≥n. </font><font style="vertical-align: inherit;">Si desea comparar su trabajo con el proyecto final, m√≠relo en el </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , cuyo enlace tambi√©n se indica al comienzo del art√≠culo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En este tutorial, aprendi√≥ qu√© son las pruebas unitarias y c√≥mo escribirlas en Unity. </font><font style="vertical-align: inherit;">Adem√°s, escribi√≥ seis pruebas unitarias que aprobaron el c√≥digo con √©xito y se familiariz√≥ con algunos de los pros y los contras de las pruebas unitarias. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øTe sientes seguro? </font><font style="vertical-align: inherit;">Entonces puedes escribir muchas m√°s pruebas. </font><font style="vertical-align: inherit;">Examine los archivos de clase del juego e intente escribir pruebas unitarias para otras partes del c√≥digo. </font><font style="vertical-align: inherit;">Considere agregar pruebas para los siguientes escenarios:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Cada tipo de asteroide cuando tocas la nave conduce al final del juego. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Comenzar un nuevo juego restablece el puntaje. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El movimiento hacia la izquierda y hacia la derecha de la nave funciona correctamente. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si desea aumentar su conocimiento de las pruebas unitarias, entonces vale la pena explorar la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implementaci√≥n de dependencias</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">marcos para trabajar con objetos simulados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Esto puede simplificar enormemente la configuraci√≥n de la prueba. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lea tambi√©n la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">documentaci√≥n de NUnit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para obtener m√°s informaci√≥n sobre el marco de NUnit. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Y si√©ntase libre de compartir sus pensamientos y preguntas en los foros. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬°Pruebas exitosas!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/456090/">https://habr.com/ru/post/456090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456072/index.html">Dav1d: el decodificador AV1 m√°s r√°pido ahora en Firefox por defecto</a></li>
<li><a href="../456078/index.html">Proyecci√≥n de conflicto corporativo sobre conectividad de red</a></li>
<li><a href="../456082/index.html">C√≥mo desarrollamos recomendaciones personalizadas de productos</a></li>
<li><a href="../456084/index.html">Kubernetes 1.15: Resumen de lo m√°s destacado</a></li>
<li><a href="../456086/index.html">iOS Storyboards: an√°lisis de los pros y contras, mejores pr√°cticas</a></li>
<li><a href="../456092/index.html">Siete signos preocupantes de que depende del clima, incluso si no lo cree</a></li>
<li><a href="../456094/index.html">Leemos hojas de datos 2: SPI en STM32; Temporizadores e interrupciones PWM en el STM8</a></li>
<li><a href="../456096/index.html">Lo que hace el lector promedio de geektimes mientras se cierne en las nubes</a></li>
<li><a href="../456100/index.html">Ahora en el nuevo empaque: Kingston A400 en formato M.2 se apresura al mercado</a></li>
<li><a href="../456102/index.html">Reportes f√°ciles en C / C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>