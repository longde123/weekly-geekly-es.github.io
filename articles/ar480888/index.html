<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐พ ๐ฏ๏ธ ๐๐ฝ Coroutines DIY. ุฌุฒุก 1. ูููุฏุงุช ูุณูู ๐ฑ ๐ง๐ผ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุนุงูู JVM ุ ุชุดุชูุฑ ููุฑููุชู ุจูุถู ูุบุฉ Kotlin ู Project Loom . ูู ุฃุฑ ูุตููุง ุฌูุฏูุง ููุจุฏุฃ ูููุชูููููุณูู ุ ูุฑูุฒ ููุชุจุฉ ููุชููู ููุฑูุชููู ุบูุฑ ููููู ุชูุงููุง ูุฃู ุดุฎ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Coroutines DIY. ุฌุฒุก 1. ูููุฏุงุช ูุณูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/haulmont/blog/480888/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูู ุนุงูู JVM ุ ุชุดุชูุฑ ููุฑููุชู ุจูุถู ูุบุฉ Kotlin ู <a href="https://habr.com/ru/company/jugru/blog/422519/">Project Loom</a> .  ูู ุฃุฑ ูุตููุง ุฌูุฏูุง ููุจุฏุฃ ูููุชูููููุณูู ุ ูุฑูุฒ ููุชุจุฉ ููุชููู ููุฑูุชููู ุบูุฑ ููููู ุชูุงููุง ูุฃู ุดุฎุต ุบูุฑ ูุณุชุนุฏ.  ูู ุชุฌุฑุจุชู ุ ูุฅู ูุนุธู ุงููุงุณ ูุนุฑููู ููุท ุนู coroutines ุฃู ูุฐู "ุชูุงุฑุงุช ุฎูููุฉ ุงููุฒู" ูุฃููู ูู kotlin ูุนูููู ูู ุฎูุงู ุชูููุฏ ููุฏ bytecode ุงูุฐูู.  ูุฐูู ููุช ุญุชู ููุช ูุฑูุจ.  ููุฏ ุฌุงุกุช ุงูููุฑุฉ ุฅููู ุฃูู ูุธุฑูุง ูุฃูู ูููู ุชูููุฐ coroutines ูู ุฑูุฒ ุซุงููู ุ ูููุงุฐุง ูุง ูุชู ุชูููุฐูุง ูู ุฌุงูุง.  ูู ูุฐู ุงูููุฑุฉ ุ ุธูุฑุช ูุงุญููุง ููุชุจุฉ ุตุบูุฑุฉ ูุจุณูุทุฉ ุฅูู ุญุฏ ูุง ุ ูุขูู ุฃู ูููููุง ุฃู ูุทูุฑ ุชูุฑูุจูุง.  ุงูุชูุงุตูู ุชุญุช ุฎูุถ. </p><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/2_/7f/s4/2_7fs4po74_uoaqwmucjmnyjcuw.jpeg"></div><a name="habracut"></a><br><h3 id="ishodnyy-kod" style=";text-align:right;direction:rtl">  ุดูุฑุฉ ุงููุตุฏุฑ </h3><br><p style=";text-align:right;direction:rtl">  ุฏุนูุช ูุดุฑูุน Microutines ุ ุงูุฐู ุฌุงุก ูู ูููุชูู Micro ู Coroutines. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฑูุฒ ูุชุงุญ ุนูู <a href="https://github.com/alexander-shustanov/microutines">ุฌูุซุจ</a> .  ูู ุงูุจุฏุงูุฉ ุ ุฃุฑุฏุช ุจูุงุก ุงูุณุฑุฏ ููููุง ูุชุทูุฑ ูููู ุงูุฎุงุต ููููุถูุน ุ ููุญุฏูุซ ุนู ูุฑุงุฑุงุชู ูุฃููุงุฑู ุงูุฎุงุทุฆุฉ ุ ุญูู ุชุทููุฑ api ุ ูููู ุจุนุฏ ุฐูู ุณูููู ุงูุฑูุฒ ูู ุงูููุงูุฉ ูุฎุชูููุง ุชูุงููุง ุนู ุงูููุฏ ูุน github (ููู ุฃูุฑ ูุง ููุฑ ููู ุนูู ุฃู ุญุงู ุ ุฃูุชุจ ููุงู ูุงุญุฏ ูุฑุงุช ุ ูุนูู ุฌูุซุจ ููููุฏู ูู ููุช ูุขุฎุฑ).  ูุฐูู ุ ุณูู ุฃุตู ุงููุณุฎุฉ ุงูููุงุฆูุฉ ููููุชุจุฉ ูู ุงูุบุงูุจ ุ ูุฅุฐุง ูุงูุช ุจุนุถ ุฃุฌุฒุงุก ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุบูุฑ ูุงุถุญุฉ ุฌุฏูุง ูููููุฉ ุงูุฃููู ุ ููู ุงูุฃุฑุฌุญ ุฃููุง ุถุฑูุฑูุฉ ูุญู ุงููุดููุงุช ุงูุชู ุณููุธุฑ ูููุง ูู ุงูููุงูุงุช ุงูุชุงููุฉ. </p><br><h3 id="disclaimer" style=";text-align:right;direction:rtl">  ุชูุตู </h3><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ููุน ูู ูุดุฑูุน ุงูุชุฏุฑูุจ.  ุณุฃููู ุณุนูุฏูุง ุฅุฐุง ูุงู ุฃุญุฏ ุงููุฑุงุก ุจุฅูุญุงุญู ุนูู ุงููุนุจ ุฃู ุญุชู ุชูุฏูู ุทูุจ ุณุญุจ.  ูููู ุงุณุชุฎุฏุงูู ูู ุงูุฅูุชุงุฌ ูุง ูุณุชุญู ูู ูุฐุง ุงูุนูุงุก.  ุฃูุถู ุทุฑููุฉ ูููู ุงูุชูููููุฌูุง ุจุนูู ูู ุชูููุฐูุง ุจููุณู ุ ููู ุงููุฏู ุงููุญูุฏ ููุฐุง ุงููุดุฑูุน. </p><br><p style=";text-align:right;direction:rtl">  ูุฃูุง ูุง ุฃุถูู ุฏูุฉ ุงููุตุทูุญุงุช ุงููุณุชุฎุฏูุฉ.  ุฑุจูุง ุณูุนุช ุจุนุถูู ูู ููุงู ูุง ุ ูุญูุธุช ุจุดูู ุบูุฑ ุตุญูุญ ุ ูุงูุจุนุถ ูููู ุญุชู ุฌุงุก ูุนู ููุณู. </p><br><h3 id="chto-takoe-korutiny" style=";text-align:right;direction:rtl">  ูุง ูู coroutines </h3><br><p style=";text-align:right;direction:rtl"> ููุง ูุงุญุธุช ุจุงููุนู ุ ูุซูุฑุง ูุง ููุงู ุนู coroutines ุฃู ูุฐู "ุชุฏููุงุช ุชุณููู".  ูุฐุง ููุณ ุชุนุฑูู ุญูููู.  ูู ุฃุนุทู ุชุนุฑูููุง ุญูููููุง ุฃูุถูุง ุ ูููู ุณุฃุญุงูู ูุตู ูุงููุฉ ูุฐู ุงูุฃุดูุงุก ุ coroutines.  ุงุณุชุฏุนุงุก ุงูุชุฏููุงุช coroutines ูู ูููู ุตุญูุญุง ุชูุงูุง.  Coroutine ูู ูุญุฏุฉ ุชุฎุทูุท ุฃุตุบุฑ ูู ุงูุฏูู ุ ูุงูุฏูู ุ ุจุฏูุฑู ุ ุฃุตุบุฑ ูู ูุญุฏุฉ ุงูุฌุฏููุฉ.  ุชุชู ูุนุงูุฌุฉ ุนูููุฉ ุชุฎุทูุท ูุคุดุฑ ุงูุชุฑุงุจุท ุจูุงุณุทุฉ ูุธุงู ุงูุชุดุบูู.  Corutin ููุฎุฑุทูู ูู ุงูุชุฎุทูุท ... ูุญู ููุฎุฑุทูู ูู ุชุฎุทูุทูู.  ูุนูู Coroutines ุฃุนูู ุณูุงุณู ุงูุนูููุงุช ุงูุนุงุฏูุฉ ุ ูุชุชูุซู ุงูููุฒุฉ ุงูุฑุฆูุณูุฉ ูู ุนุฏู ุญุธุฑ ุงูุฎูุท ุนูุฏูุง ููุชุธุฑูู ุฅููุงู ูููุฉ ุฃุฎุฑู ุ ูููู ุญุฑุฑูุง ููุญุตูู ุนูู coroutine ุขุฎุฑ.  ููุณูู ูุฐุง ุงูููุฌ ุชุนุฏุฏ ุงูููุงู ุงูุชุนุงูููุฉ.  Corutin ูููู ุฃู ุชุนูู ุฃููุง ูู ููุถูุน ูุงุญุฏ ุ ุซู ูู ุขุฎุฑ.  ูุนูู ุฎูุท coroutine ูููุฑุฏ ุ ููููู ุฃู ูุนูู ููููู coroutine ุนูู ุฎูุท ูุงุญุฏ.  ุชุณุชุทูุน ุฃู ุชุฑู ูุฐู ุงูุตูุฑุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/41/xu/3j/41xu3j8m3cgly0vdiixkaomex2o.png"></p><br><p style=";text-align:right;direction:rtl">  ุชูู ููุงู ุงููุณุงููุงุช 1 ูุงููุณุงููุฉ 2 ุจููุน ูู ุงูุทูุจุงุช ููุง ุชููุน ุงูุชุฏูู ุฃุซูุงุก ุงูุชุธุงุฑ ุงูุฑุฏูุฏ ุ ูููู ุชููู ุนูููุง ูุชูุงุตูู ุจุนุฏ ุชููู ุงูุฅุฌุงุจุงุช.  ูููููุง ูุชุงุจุฉ ูุฐุง ุงูุฑูุฒ ุจุงุณุชุฎุฏุงู ุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช ุ ููุง ุชููู.  ูุฐุง ุตุญูุญ ุ ูููู ุฌููุฑ coroutine ูู ุฃููุง ููุชุจ ุฑูุฒูุง ุฏูู ุนูููุงุช ุฑุฏ ุงูุงุชุตุงู ุ ููุชุจ ุฑูุฒูุง ุชุณูุณูููุง ุนุงุฏููุง ูุนูู ุจุดูู ุบูุฑ ูุชุฒุงูู. </p><br><h3 id="generatory" style=";text-align:right;direction:rtl">  ูููุฏุงุช </h3><br><p style=";text-align:right;direction:rtl">  ุณูุจุฏุฃ ุงูุชุทููุฑ ูู ุงูุจุณูุท ุงูู ุงููุนูุฏ.  ุฃูู ูุง ุณููุนูู ูู ุฅูุดุงุก ูุฌููุนุฉ ูุณูู ุ ูุชู ุชูููุฐู ูู ุจุนุถ ุงููุบุงุช ุจุงุณุชุฎุฏุงู ุงููููุฉ ุงูููุชุงุญูุฉ.  ุงููููุฏุงุช ููุณุช ูุตุงุฏูุฉ ููุง ุ ููุง ุณูุฑู ูุงุญููุง ุ ููููู ุชูููุฐ ุงููููุฏุงุช ูุงููููุฑุงุช ุจุงุณุชุฎุฏุงู ููุณ ุงูุขููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูููุฑ ูู ูุซุงู ูู ุงูุซุนุจุงู ุ ุจุจุณุงุทุฉ ูุฃู ุงููููุฏุงุช ููุฌูุฏุฉ ุฎุงุฑุฌ ุงูุตูุฏูู. </p><br><pre style=";text-align:right;direction:rtl"><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> k = <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> k k += <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> k k += <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> generator(): print(i)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุชูุดู ุงูุฏูุฑุฉ ุฅูู ุดูุก ููุฐุง (ุฑุจูุง ููุณ ููุฐุง ุ ูููู ุงููุจุฏุฃ ููู ุจุงููุณุจุฉ ููุง): </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">gen = generator() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: i = next(gen) print(i) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> StopIteration: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณุชููู ุงุณุชุฏุนุงุก <code>generator()</code> ุจุฅูุดุงุก ููุฑุฑ ุฎุงุต ูุณูู ุงููููุฏ.  ุงูููุงููุฉ ุงูุฃููู ุฅูู <code>next(gen)</code> ุชููุฐ ุงูุฑูุฒ ูู ุจุฏุงูุฉ ูุธููุฉ <code>generator</code> ุฅูู <code>yield</code> ุงูุฃูู ุ <code>genertator()</code> ูุชุงุจุฉ ูููุฉ ุงููุชุบูุฑ ุงููุญูู <code>k</code> ูู <code>genertator()</code> ุฅูู ุงููุชุบูุฑ <code>i</code> .  ุณุชุณุชูุฑ ูู ููุงููุฉ ุชุงููุฉ ุฅูู <code>next</code> ูู ุชูููุฐ ุงููุธููุฉ ุจุงูุชุนูููุงุช ุงูุชู ุชูู <code>yield</code> ุงูุณุงุจู ูุจุงุดุฑุฉู <code>yield</code> ูููุฐุง.  ูู ูุฐู ุงูุญุงูุฉ ุ ุจูู ุงูููุงููุงุช <code>next</code> ุ ูุชู ุญูุธ ููู ุฌููุน ุงููุชุบูุฑุงุช ุงููุญููุฉ ุฏุงุฎู <code>generator</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ููุณู ุชูุฑูุจุง ุ ูููู ูู ูุบุฉ Kotlin. </p><br><pre style=";text-align:right;direction:rtl"> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> seq = sequence { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">10</span></span> yield(i) i += <span class="hljs-number"><span class="hljs-number">10</span></span> yield(i) i += <span class="hljs-number"><span class="hljs-number">10</span></span> yield(i) } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> seq) { println(i) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู Java ุ ูููููุง ุฃู ููุนู ุฌูููุง ูุณูููุง ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Iterable&lt;Integer&gt; seq = DummySequence.first(() -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DummySequence.next(i, () -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i1 = i + <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DummySequence.next(i1, () -&gt; DummySequence.end(i1 + <span class="hljs-number"><span class="hljs-number">10</span></span>)); }); }); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i: seq) { System.out.println(i); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชูููุฐ ุงูุฏููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.Assert; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.junit.Test; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Iterator; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.function.Supplier; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.stream.Collectors; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.stream.StreamSupport; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DummySequenceTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dummySequenceTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ DummySequence&lt;Integer&gt; sequence = DummySequence.first(() -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DummySequence.next(<span class="hljs-number"><span class="hljs-number">10</span></span>, () -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i1 = i + <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DummySequence.next(i1, () -&gt; DummySequence.end(i1 + <span class="hljs-number"><span class="hljs-number">10</span></span>)); }); }); List&lt;Integer&gt; list = StreamSupport.stream(sequence.spliterator(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) .collect(Collectors.toList()); Assert.assertEquals(<span class="hljs-number"><span class="hljs-number">10</span></span>, ((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) list.get(<span class="hljs-number"><span class="hljs-number">0</span></span>))); Assert.assertEquals(<span class="hljs-number"><span class="hljs-number">20</span></span>, ((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) list.get(<span class="hljs-number"><span class="hljs-number">1</span></span>))); Assert.assertEquals(<span class="hljs-number"><span class="hljs-number">30</span></span>, ((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) list.get(<span class="hljs-number"><span class="hljs-number">2</span></span>))); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DummySequence</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterator</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Step&lt;T&gt; step; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DummySequence</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Step&lt;T&gt; step)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.step = step; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Iterator&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (step <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> EndStep) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; step = step.nextStep(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> step.getValue(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">DummySequence&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">first</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Supplier&lt;Step&lt;T&gt;&gt; next)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DummySequence&lt;&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FirstStep&lt;T&gt;(next)); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">Step&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T value, Supplier&lt;Step&lt;T&gt;&gt; next)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IntermediateStep&lt;&gt;(value, next); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-function">Step&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">end</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EndStep&lt;&gt;(value); } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Step</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Step&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nextStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FirstStep</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Step</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ Supplier&lt;Step&lt;T&gt;&gt; nextStep; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FirstStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Supplier&lt;Step&lt;T&gt;&gt; next)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.nextStep = next; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Step&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nextStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nextStep.get(); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IntermediateStep</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Step</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ T value; Supplier&lt;Step&lt;T&gt;&gt; nextStep; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IntermediateStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T value, Supplier&lt;Step&lt;T&gt;&gt; nextStep)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value = value; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.nextStep = nextStep; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Step&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nextStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nextStep.get(); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EndStep</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Step</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ T value; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EndStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T value)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value = value; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Step&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nextStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(); } } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ููุชูุท ูู lambda ุงููุชุฏุงุฎูุฉ ุงูุชุงููุฉ ุฌููุน ุงููุชุบูุฑุงุช ูู ุฌููุน lambdas ุงูุณุงุจูุฉ ููุชู ุชูููุฐู ููุท ุนูุฏ ุทูุจ ุงูุนูุตุฑ ุงูุชุงูู.  ุณุชููู ูุชูุฌุฉ ูู ูุงูุฏุง ูู ุงูุนูุตุฑ ุงูุฐู ุชู ุฅูุดุงุคู ููุชูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชุงููุฉ.  ูุจุฏู ุบุฑูุจุงู ุฌุฏุงู ุ ูุฃุดู ูู ุฃู ุฃู ุดุฎุต ุณูู ููุชุจ ููุฐุง.  ูุดูุฑ ุฅูู ุงููุซู ุงูุฃุนูู ุงูุฐู ุณูุณุนู ุฅููู (ูุณูุญููู ุ ุจุงุณุชุซูุงุก ุฃููุง ุณูุณุชุฎุฏู ูุฆุฉ ูุฌูููุฉ ุจุฏูุงู ูู lambdas). </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Sequence&lt;Integer&gt; sequence = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sequence&lt;Integer&gt;(() -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">10</span></span>; yield(i); i += <span class="hljs-number"><span class="hljs-number">10</span></span>; yield(i); i += <span class="hljs-number"><span class="hljs-number">10</span></span>; yield(i); });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ุชูุชูู ุงููุธููุฉ ุงูุชู ุชู ุชูุฑูุฑูุง ุฅูู ูููุดุฆ ุงูุชุณูุณู ูู <code>yield</code> ุฅูู <code>yield</code> ููุท ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ูุฌุจ ุชุฎุฒูู ููู ุงููุชุบูุฑุงุช ุงููุญููุฉ ุจูู ุงูููุงููุงุช ุฅูู <code>sequence.next()</code> .  ูุณูู ูุฐุง ุงูุงุฏุฎุงุฑ ููููุฏุณ ูุฑูู ุขุฎุฑ ุชุนูููุฉ ุชู ุชูููุฐูุง ุจู <em>preemption</em> (ููุชุฑุฌู ุงูุนุงุฆุฏ ุฅูู ุงููุบุฉ ุงูุฑูุณูุฉ) ุฃู <em>ุงูุชุนููู</em> . </p><br><h3 id="kontinuacii" style=";text-align:right;direction:rtl">  Kontinuatsii </h3><br><p style=";text-align:right;direction:rtl">  ูุชุณูู ุงููุทุนุฉ ุงูุชู ูููู ุถุบุทูุง ุงุณุชูุฑุงุฑ.  ุชุชู ุชุฑุฌูุฉ ุงุณุชูุฑุงุฑ ุฅูู ุงููุบุฉ ุงูุฑูุณูุฉ ุจุงุณู "ุงุณุชูุฑุงุฑ" ุ ูููู ุณูู ุฃุณูููุง ุงุณุชูุฑุงุฑ.  ููููุจูุฏูุง ุชูุชุจ ุนู ุงูุงุณุชูุฑุงุฑูุฉ: </p><br><blockquote style=";text-align:right;direction:rtl">  ููุซู ุงุณุชูุฑุงุฑ (ุงููููุฏุณ ุงุณุชูุฑุงุฑ) ุญุงูุฉ ุงูุจุฑูุงูุฌ ูู ูุญุธุฉ ูุนููุฉ ุ ูุงูุชู ูููู ุญูุธูุง ูุงุณุชุฎุฏุงููุง ููุงูุชูุงู ุฅูู ูุฐู ุงูุญุงูุฉ.  ุชุญุชูู ุงูุงุณุชูุฑุงุฑุงุช ุนูู ุฌููุน ุงููุนูููุงุช ูููุงุตูุฉ ุชูููุฐ ุงูุจุฑูุงูุฌ ูู ููุทุฉ ูุญุฏุฏุฉ. </blockquote><p style=";text-align:right;direction:rtl">  ูููุชุฑุถ ุฃู ูุฏููุง ุจุงููุนู ุทุฑููุฉ ุณุญุฑูุฉ ุชููุฐ ุขููุฉ ุงูุงุณุชูุฑุงุฑูุฉ ุ ูุงูุชู ุชูุซููุง ุงููุงุฌูุฉ ุงูุชุงููุฉ.  ุทุฑููุฉ <code>run</code> ูููู ุฃู ุชููู ุชูููุฐู.  ุชุณุชุฃูู ูู ููุงููุฉ ูุงุญูุฉ ุงูุชูููุฐ ูู ุขุฎุฑ <code>yield</code> .  ูููููุง ุงูุชูููุฑ ูู ุงุณุชูุฑุงุฑ ุจุงุนุชุจุงุฑู <code>Runnable</code> ุงูุชู ูููู ุชูููุฐูุง ูู ุฃุฌุฒุงุก. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Continuation</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SequenceScope&lt;T&gt; scope)</span></span></span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูู ูุณุชุฎุฏู ุงุณุชูุฑุงุฑ ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Sequence&lt;Integer&gt; sequence = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sequence&lt;&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Continuation&lt;&gt;() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SequenceScope&lt;Integer&gt; scope)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; System.out.println(<span class="hljs-string"><span class="hljs-string">"Continuation start"</span></span>); scope.yield(i++); System.out.println(<span class="hljs-string"><span class="hljs-string">"Continuation resume"</span></span>); scope.yield(i++); System.out.println(<span class="hljs-string"><span class="hljs-string">"Continuation resume"</span></span>); scope.yield(i++); System.out.println(<span class="hljs-string"><span class="hljs-string">"Continuation end"</span></span>); } }); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(Integer i: sequence) { System.out.println(<span class="hljs-string"><span class="hljs-string">"Next element :"</span></span> + i); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุชููุน ุงูุญุตูู ุนูู ูุฐุง ุงูุงุณุชูุชุงุฌ: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฅูุชุงุฌ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Continuation start Next element: 1 Continuation resume Next element: 2 Continuation resume Next element: 3 Continuation end</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุณูู ูุณุชุฏุนู <code>Sequence</code> ุจูุงุก ุนูู ุทูุจ ุงูุนูุตุฑ ุงูุชุงูู <code>Continuation.run(scope)</code> ุ ูุงูุฐู ุณูููุฐ ูุชูุฉ ูู ุงูููุฏ ุญุชู ุงูุบูุฉ ุงูุชุงููุฉ ูุชููู ูุฒุฏุญูุฉ.  ุณูู ุชุจุฏุฃ ุงูููุงููุฉ ุงูุชุงููุฉ ุฅูู <code>Continuation.run(scope)</code> ุงูุนูู ูู ููุงู ุขุฎุฑ ูุฒุงุญูุฉ ูุชูููุฐ ุงูุฑูุฒ ุญุชู <code>yield</code> ุงูุชุงูู.  ุฑูุฒ <code>Sequence</code> ูููู ุฃู ูููู ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sequence</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterator</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SequenceScope</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Object STOP = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Object next = STOP; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Continuation&lt;T&gt; nextStep; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Sequence</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Continuation&lt;T&gt; nextStep)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.nextStep = nextStep; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (next == STOP) { nextStep.run(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> next != STOP; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (next == STOP) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!hasNext()) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NoSuchElementException(); } } T result = (T) next; next = STOP; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yield</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span><span class="hljs-function"> </span></span>{ next = t; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Iterator&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  ,       return this; } } interface SequenceScope&lt;T&gt; { void yield(T t); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ุจุงุณุชุซูุงุก ุฃู java ุบูุฑ ูุงุฏุฑ ุนูู ุฅููุงู ุชูููุฐ ุงูุทุฑููุฉ ูู ููุงู ุชุนุณูู ุ ุจุญูุซ ูููู ุจุนุฏ ุฐูู ุงูุงุณุชูุฑุงุฑ ูู ุงูุชูููุฐ ูู ููุงู ุงููุญุทุฉ ุงูุฃุฎูุฑุฉ.  ูุฐูู ุ ุณูุชุนูู ุนูููุง ุงูููุงู ุจุฐูู ูุฏูููุง.  ูุนุฑุถ ุญูู ุงูุชุตููู ุ ุงูุฐู ุณูุฎุฒู ููู ุนุฏุฏ ุขุฎุฑ ุนุงุฆุฏ ูุณูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IntegerSequenceContinuation</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Continuation</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> label = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SequenceScope&lt;Integer&gt; scope)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.i; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (label) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: System.out.println(<span class="hljs-string"><span class="hljs-string">"Continuation start"</span></span>); scope.yield(i++); label = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.i = i; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: System.out.println(<span class="hljs-string"><span class="hljs-string">"Continuation resume"</span></span>); scope.yield(i++); label = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.i = i; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: System.out.println(<span class="hljs-string"><span class="hljs-string">"Continuation resume"</span></span>); scope.yield(i++); label = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.i = i; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: System.out.println(<span class="hljs-string"><span class="hljs-string">"Continuation end"</span></span>); label = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(); } } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏููุง ุขูุฉ ุญููููุฉ (ุขูุฉ ุญุงูุฉ ูุญุฏูุฏุฉ) ุ ููุฐุง ุฅูู ุญุฏ ุจุนูุฏ ูู ูุง ููุนูู Kotlin ูู ููุฑููุงุชูุณ (ููููู ุฅูุบุงุก ุชุฑุฌูุฉ ููุนุฑูุฉ ูุง ุฅุฐุง ููุช ุจุงูุทุจุน ุชููู ุดูุฆูุง ูุง).  ูุฏููุง 4 ุญุงูุงุช ุ ูู ููุงููุฉ ููุฏ ุงูุชูููุฐ ุชููุฐ ุฌุฒุกูุง ูู ุงูููุฏ ูุชุฌุฑู ุงูุงูุชูุงู ุฅูู ุงูุญุงูุฉ ุงูุชุงููุฉ.  ูุชุนูู ุนูููุง ุญูุธ ุงููุชุบูุฑ ุงููุญูู i ูู ุญูู ุงููุตู.  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชุนููุฏ ุบูุฑ ุงููุจุฑุฑ ุ ููุฌุฏ ููุฐุง ุงูุฑูุฒ ูุดููุฉ ุฃุฎุฑู: ูููููุง ุชูุฑูุฑ ููู ูุฎุชููุฉ ููุนููุฉ ูุทุงู ููู ููุงููุฉ ุชุดุบูู.  ูุฐูู ุ ุณูููู ูู ุงูุฌูุฏ ุญูุธ ูุนููุฉ ุงููุทุงู ูู ุญูู ุงููุตู ุนูู ุงูููุงููุฉ ุงูุฃููู ุ ูููุงุตูุฉ ุงูุนูู ูุนูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุชู ุชูููุฐ ุงุณุชูุฑุงุฑ java ูููุง ุ ูููู ุจุทุฑููุฉ ุบุฑูุจุฉ ุฅูู ุญุฏ ูุง ููู ุญุงูุฉ ูุงุญุฏุฉ ููุท.  ูู ูู ูุฑุฉ ูุง ููุชุจ ุฃุญุฏ ุดูุฆูุง ููุงุซูุงู ุ ูุนุฏ ุชุญุฑูุฑ ูุซู ูุฐุง ุงูุฑูุฒ ุฃูุฑูุง ุตุนุจูุง ุ ููุฑุงุกุฉ ูุซู ูุฐุง ุงูุฑูุฒ ุฃูุฑ ุตุนุจ.  ูุฐูู ุ ุณูู ูุจูู ุขูุฉ ุงูุฏููุฉ ุจุนุฏ ุงูุชุฌููุน. </p><br><h3 id="suspendable--continuation" style=";text-align:right;direction:rtl">  ุชุนููู ู ุงุณุชูุฑุงุฑ </h3><br><p style=";text-align:right;direction:rtl">  ููู ูููู ูุง ุฅุฐุง ูุงู ุงูุงุณุชูุฑุงุฑ ูุฏ ุฃููู ุงูุนูู ุฃู ุชูููุ  ุงุณูุญ ูุทุฑููุฉ <code>run</code> ุจุฅุฑุฌุงุน ูุงุฆู <code>SUSPEND</code> ุฎุงุต ูู ุญุงูุฉ ุงูุชุนููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Continuation</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ Object SUSPEND = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Object() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"[SUSPEND]"</span></span>; } }; <span class="hljs-function"><span class="hljs-function">T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุญุธ ุฃููู ุฃุฒูุช ูุนููุฉ ุงูุฅุฏุฎุงู ูู ุงูุงุณุชูุฑุงุฑูุฉ.  ูุฌุจ ุฃู ูุชุฃูุฏ ูู ุฃู ุงููุนููุงุช ูุง ุชุชุบูุฑ ูู ุงุณุชุฏุนุงุก ุฅูู ุขุฎุฑ ุ ูุฅู ุฃูุถู ุทุฑููุฉ ููููุงู ุจุฐูู ูู ุญุฐููุง.  ุนูู ุงูุนูุณ ูู ุฐูู ุ ูุญุชุงุฌ ุงููุณุชุฎุฏู ุฅูู ูุนููุฉ <code>scope</code> (ุณูุชู ุงุณุชุฎุฏุงูู ููุซูุฑ ูู ุงูุฃุดูุงุก ุ ูููู ุงูุขู ูุชู ุชูุฑูุฑ <code>SequenceScope</code> ุฅูู ููุงูู ุ ูุงูุฐู ูุทูู ุนููู <code>yield</code> ).  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ูุฑูุฏ ุงููุณุชุฎุฏู ูุนุฑูุฉ ุฃู <code>SUSPEND</code> ููุง ูุฑูุฏ ุฅุฑุฌุงุน ุฃู ุดูุก.  ุชูุฏูู ูุงุฌูุฉ <code>Suspendable</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Suspendable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scope</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">abstract</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(C scope)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scope</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ูุฆุฉ ูุฌุฑุฏุฉ ุ ูููุณ ูุงุฌูุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ูุฆุฉ ุจุฏูุงู ูู ูุงุฌูุฉ ูุง ูุณูุญ ุจูุชุงุจุฉ lambdas ูููุฑุถ ูุชุงุจุฉ ูุฆุงุช ูุฌูููุฉ.  ุณูููู ูู ุงููุฑูุญ ุฌุฏูุง ุจุงููุณุจุฉ ููุง ุงูุนูู ูู ุฑูุฒ ุซุงููู ูุน ุงุณุชูุฑุงุฑูุฉ ููุง ูู ุงูุญุงู ูุน ุงููุตูู ุ ูุฃูู ูููู ุชุฎุฒูู ุงูุญููู ุงููุญููุฉ ูู ุญููููู.  ูููู lambdas ูู bytecode ูุง ุชุจุฏู ููุฃููุง ูุฆุฉ.  ููุฒูุฏ ูู ุงูุชูุงุตูู ุ ุงุฐูุจ <a href="https://habr.com/ru/company/haulmont/blog/432418/">ููุง</a> . </p></div></div><br><p style=";text-align:right;direction:rtl">  <code>Suspendable</code> ูู <code>Continuation</code> ูู ููุช ุงูุชุตููู ุ ูู ุญูู <code>Continuation</code> <code>Suspendable</code> ูู <code>Suspendable</code> .  ููุชุจ ุงููุณุชุฎุฏู ุงูููุฏ ูู ุงููุณุชูู <code>Suspendable</code> ุ ููุนูู ุงูููุฏ ุงูููุฎูุถ ูู ุงูููุชุจุฉ ูุน <code>Continuation</code> .  ุฅูู ูุชุญูู ุฅูู ูุงุญุฏ ุจุนุฏ ุชุนุฏูู ุงูุฑูุฒ ุงูุซุงููู. </p><br><p style=";text-align:right;direction:rtl">  ูุจู ุฃู ูุชุญุฏุซ ุนู ุงูุงุณุชุจุงู ุจุนุฏ ุงุณุชุฏุนุงุก <code>yield</code> ุ ูููู ูู ุงููุณุชูุจู ุณูู ูุญุชุงุฌ ุฅูู ุงูุงุณุชุจุงู ุจุนุฏ ุจุนุถ ุงูุทุฑู ุงูุฃุฎุฑู.  ุณูููู ุจุชูููุฒ ูุฐู ุงูุฃุณุงููุจ ูุน ุชุนููู ุชูุถูุญู <code>@Suspend</code> .  ููุฐุง ููุทุจู ุนูู <code>yield</code> ููุณู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SequenceScope</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scope</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Suspend</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yield</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span><span class="hljs-function"> </span></span>{...} }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุฐูุฑ ุฃูู ุณูุชู ุจูุงุก ุงุณุชูุฑุงุฑุงุชูุง ุนูู ุงูุชุดุบูู ุงูุขูู ุงููุญุฏูุฏ.  ุฏุนููุง ูุชุนูู ููุง ุจูุฒูุฏ ูู ุงูุชูุงุตูู.  ูุทูู ุนููู ุขูุฉ ุงูุญุงูุฉ ุงููุญุฏูุฏุฉ ูุฃูู ูุญุชูู ุนูู ุนุฏุฏ ูุญุฏูุฏ ูู ุงูุญุงูุงุช.  ูุชุฎุฒูู ุงูุญุงูุฉ ุงูุญุงููุฉ ุ ุณูุณุชุฎุฏู ุญูู ุชุณููุฉ ุฎุงุต.  ูู ุงูุจุฏุงูุฉ ุ <code></code> ุงูุชุณููุฉ 0 - ุญุงูุฉ ุงูุตูุฑ (ุงูุฃููู).  ูู ููุงููุฉ ุฅูู <code>Continuation.run</code> ุณุชููุฐ ููุนูุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุชุฐูุจ ุฅูู ุญุงูุฉ ูุง (ูู ุฃู ุฏููุฉ ุฃุฎุฑู ุบูุฑ ุงูุฃููู).  ุจุนุฏ ูู ุนูููุฉ ุงูุชูุงู ุ ููุจุบู ุฃู ูุญูุธ ุงุณุชูุฑุงุฑ ุฌููุน ุงููุชุบูุฑุงุช ุงููุญููุฉ ุ ูุฑูู ุงูุญุงูุฉ ุงูุญุงููุฉ ูุชูููุฐ <code>return SUSPEND</code> .  ุณูุชู ุงูุฅุดุงุฑุฉ ุฅูู ุงูุงูุชูุงู ุฅูู ุงูุญุงูุฉ ุงูููุงุฆูุฉ ุนู ุทุฑูู <code>return null</code> (ูู ุงูููุงูุงุช ุงูุชุงููุฉ ุณูุนูุฏ ููุณ ููุท <code>null</code> ).  ูุฌุจ ุฃู ููุชูู ุงุณุชุฏุนุงุก <code>Continuation.run</code> ูู ุงูุญุงูุฉ ุงูููุงุฆูุฉ ูุน ุงุณุชุซูุงุก <code>ContinuationEndException</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ููุชุจ ุงููุณุชุฎุฏู ุงูููุฏ ูู <code>Suspendable</code> ุ ุจุนุฏ <code>Suspendable</code> ุงูุจุฑูุฌู ุ ูุชุญูู ุฅูู <code>Continuation</code> ุ ูุงูุฐู ุชุนูู ุจู ุงูููุชุจุฉ ุ ูุฎุงุตุฉ ุงููููุฏุงุช ุงูุฎุงุตุฉ ุจูุง.  ูุจุฏู ุฅูุดุงุก ูููุฏ ุฌุฏูุฏ ูููุณุชุฎุฏู ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Sequence&lt;Integer&gt; seq = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sequence(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Suspendable() {...});</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ุงููููุฏ ููุณู ูุญุชุงุฌ ุฅูู ุงุณุชูุฑุงุฑ ุ ูุฃูู ูุญุชุงุฌ ุฅูู ุชููุฆุฉ <code>Continuation&lt;T&gt; nextStep;</code>  .  ููุญุตูู ุนูู <code>Continuation</code> ูู <code>Suspendable</code> ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุชุจุช ูุฆุฉ <code>Magic</code> ุฎุงุตุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/le/hn/sk/lehnsk5dh-wi0l_awsdjm9ykz8m.jpeg"></p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> microutine.core; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> microutine.coroutine.CoroutineScopeImpl; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.lang.reflect.Field; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Magic</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String SCOPE = <span class="hljs-string"><span class="hljs-string">"scope$S"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;C extends Scope, R&gt; <span class="hljs-function"><span class="hljs-function">Continuation&lt;R&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createContinuation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Suspendable&lt;C&gt; suspendable, C scope)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Field contextField = suspendable.getClass().getDeclaredField(SCOPE); contextField.setAccessible(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contextField.get(suspendable) != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Continuation already created"</span></span>); contextField.set(suspendable, scope); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(e); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getContinuation(suspendable); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;R, C extends Scope&gt; <span class="hljs-function"><span class="hljs-function">Continuation&lt;R&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getContinuation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Suspendable suspendable)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getScope(suspendable) == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"No continuation created for provided suspendable"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//noinspection unchecked return ((Continuation&lt;R&gt;) suspendable); } private static Scope getScope(Suspendable suspendable) { try { Field contextField = suspendable.getClass().getDeclaredField(SCOPE); contextField.setAccessible(true); return (Scope) contextField.get(suspendable); } catch (Exception e) { throw new RuntimeException(e); } } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุนูู ูุฐุง ุงูุณุญุฑุ  ุจุงุณุชุฎุฏุงู ูุนููุฉ <code>scope</code> ุ ุชุชู ุชููุฆุฉ ูุฌุงู <code>scope$S</code> ุนุจุฑ ุงูุงูุนูุงุณ (ุงูุญูู ุงูุชุฎูููู ุงูุฐู ุณููุดุฆู ูู ุงูุฑูุฒ ุงูุซุงููู).  ุชุชู ุชููุฆุฉ ุงุณุชูุฑุงุฑ ูุฑุฉ ูุงุญุฏุฉ ููุท ูู <code>createContinuation</code> ุ ูุณูู ุชุคุฏู ูุญุงููุฉ ุซุงููุฉ ูู ุงูุชููุฆุฉ ุฅูู ุชูููุฐ.  ููุฃุชู ุจุนุฏ ุฐูู ุงูููุน ุงููุนุชุงุฏ ุงููุฏูู ุจูุง ุฅูู <code>Continuation</code> .  ุจุดูู ุนุงู ุ ููุฏ ุฎุฏุนุชู ุ ูู ุงูุณุญุฑ ููุณ ููุง.  ูุธุฑูุง ูุฃู ูุฐุง ุงูููุน ูู ุงูุชุญููู ูููู ุ ูุฅู <code>Suspendable</code> ุงููุญุฏุฏุฉ <code>Suspendable</code> ุชูููุฐูุง ุจุงููุนู <code>Continuation</code> .  ูุญุฏุซ ูุฐุง ุฃุซูุงุก ุงูุชุฌููุน. </p><br><h3 id="struktura-proekta" style=";text-align:right;direction:rtl">  ูููู ุงููุดุฑูุน </h3><br><p style=";text-align:right;direction:rtl">  ุณูุชุฃูู ุงููุดุฑูุน ูู ุซูุงุซุฉ ุฃุฌุฒุงุก: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฑูุฒ ุงูููุชุจุฉ (ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ุงููุณุชูู ุงูููุฎูุถ ูุงููุณุชูู ุงูุนุงูู) </li><li style=";text-align:right;direction:rtl">  ุงูุงุฎุชุจุงุฑุงุช (ูู ุงููุงูุน ุ ููุท ุงูุขู ููููู ุงุณุชุฎุฏุงู ูุฐู ุงูููุชุจุฉ) </li><li style=";text-align:right;direction:rtl">  Converter Suspendable -&gt; Continuation (ูุชู ุชูููุฐู ููููุฉ ูููุฉ ูู ุจูุงุก gradle buildSrc) </li></ul><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุงููุญูู ููุฌูุฏ ุญุงูููุง ูู buildSrc ุ ูุณูููู ูู ุงููุณุชุญูู ุงุณุชุฎุฏุงูู ูู ููุงู ูุง ุฎุงุฑุฌ ุงูููุชุจุฉ ููุณูุง.  ููู ูู ุงูููุช ุงูุญุงูู ุ ูุญู ูุณูุง ูู ุญุงุฌุฉ ุฅูููุง.  ูู ุงููุณุชูุจู ุ ุณูููู ูุฏููุง ุฎูุงุฑุงู: ุฌุนูู ูููููุง ุฅุถุงูููุง ูููุตูุงู ุฃู ุฅูุดุงุก ูููู java ุฎุงุต ุจูุง (ููุง ููุนู <a href="https://github.com/puniverse/quasar">Quasar</a> ) ูุฅุฌุฑุงุก ุชุญูููุงุช ูู ููุช ุงูุชุดุบูู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">build.gradle</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">plugins { id "java" } group 'microutines' version '1.0-SNAPSHOT' sourceCompatibility = 1.8 task processYield(type: microutine.ProcessSuspendableTask) { classPath = compileJava.outputs.files + compileJava.classpath inputs.files(compileJava.outputs.files) } task processTestYield(type: microutine.ProcessSuspendableTask) { classPath = compileJava.outputs.files + compileTestJava.classpath inputs.files(compileTestJava.outputs.files) } compileJava.finalizedBy(processYield) //      compileTestJava.finalizedBy(processTestYield) repositories { mavenCentral() } dependencies { testCompile group: 'junit', name: 'junit', version: '4.12' compile group: 'junit', name: 'junit', version: '4.12' }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุณูุชู ุงูุชุนุงูู ูุน <code>Suspendable</code> ุฅูู <code>Continuation</code> ุจูุงุณุทุฉ ุงููููุฉ TaskSuspendableTask.  ูุง ููุฌุฏ ุดูุก ูุซูุฑ ููุงูุชูุงู ูู ูุฆุฉ ูููุฉ ุงูุจุฑุฏ ุ ููู ูุฎุชุงุฑ ููุท ุงููุฆุงุช ุงููุงุฒูุฉ ููุฑุณููุง ููุชุญููู ุฅูู ูุฆุฉ <code>SuspendableConverter</code> .  ูู ุงูุฐู ููููุง ุงูุขู. </p><br><h3 id="generaciya-baytkoda" style=";text-align:right;direction:rtl">  Bytecode ุงูุฌูู </h3><br><p style=";text-align:right;direction:rtl">  ููุนูู ูุน bytecode ุ ุณูู ูุณุชุฎุฏู ููุชุจุฉ ASM OW2.  ุชุนูู ุงูููุชุจุฉ ุนูู ูุจุฏุฃ ูุญูู SAX.  ูููู ุจุฅูุดุงุก ClassReader ุฌุฏูุฏ ุ ูุฅุทุนุงููุง ูุฆุฉ ูุชุฑุฌูุฉ ูุตููู ูู ูุญุฏุงุช ุงูุจุงูุช ุ ูุงุณุชุฏุนุงุก ุทุฑููุฉ <code>accept(ClassVisitor visitor)</code> .  ุณูููู ClassReader ุจุชุญููู bytecode ูุงุณุชุฏุนุงุก ุงูุทุฑู ุงูููุงุณุจุฉ ููุฒุงุฆุฑ ุงูุฐู ุชู ุชูุฑูุฑู ( <code>visitMethod</code> ุฃู <code>visitClass</code> ุฃู <code>visitInsn</code> ).  ูููู ููุฒุงุฆุฑ ุงูุนูู ูู ูุถุน ุงููุญูู ูุชูููุถ ุงูููุงููุงุช ููุฒุงุฆุฑ ุงูุชุงูู.  ุนุงุฏุฉู ูุง ูููู ุขุฎุฑ ุฒุงุฆุฑ ูู <code>ClassWriter</code> ุ ูุงูุฐู ูุชู ููู ุฅูุดุงุก <code>ClassWriter</code> ุงูููุงุฆู.  ุฅุฐุง ูุงูุช ุงููููุฉ ุบูุฑ ุฎุทูุฉ (ูุฏููุง ูุงุญุฏุฉ ููุท) ุ ููุฏ ูุณุชุบุฑู ุงูุฃูุฑ ุนุฏุฉ ุชูุฑูุฑุงุช ุฎูุงู ุงููุตู.  ููุงู ุทุฑููุฉ ุฃุฎุฑู ุชููุฑูุง asm ููู ูุชุงุจุฉ ุงููุตู ุงูุฏุฑุงุณู ุฅูู <code>ClassNode</code> ุฎุงุต ุ ูุฅุฌุฑุงุก ุงูุชุญูููุงุช ุจุงููุนู ุนููู.  ุงูุทุฑููุฉ ุงูุฃููู ุฃุณุฑุน ุ ูููููุง ูุฏ ูุง ุชููู ููุงุณุจุฉ ูุญู ุงููุดููุงุช ุบูุฑ ุงูุฎุทูุฉ ุ ูุฐูู ุงุณุชุฎุฏูุช ููุชุง ุงูุทุฑููุชูู. </p><br><p style=";text-align:right;direction:rtl">  <code>Suspendable</code> 3 ูุฆุงุช <code>Suspendable</code> ูู ุชุญููู <code>Suspendable</code> to <code>Continuation</code> : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>SuspendInfoCollector</code> - ูุญูู ุฃุณููุจ <code>Suspendable.run</code> ุ ููุฌูุน ูุนูููุงุช ุญูู ุฌููุน ุงูููุงููุงุช ุฅูู ุฃุณุงููุจ <code>@Suspend</code> ูุญูู ุงููุชุบูุฑุงุช ุงููุญููุฉ ุงููุณุชุฎุฏูุฉ. </li><li style=";text-align:right;direction:rtl">  <code>SuspendableConverter</code> - ูููู ุจุฅูุดุงุก ุงูุญููู ุงููุทููุจุฉ ุ ููููู ุจุชุบููุฑ ุงูุชูููุน ูุงูุชุนุงูู ูุน ุทุฑููุฉ <code>Suspendable.run</code> ููุญุตูู ุนูู <code>Continuation.run</code> . </li><li style=";text-align:right;direction:rtl">  <code>SuspendableMethodConverter</code> - ูุญูู ุฑูุฒ ุงูุฃุณููุจ <code>Suspendable.run</code> .  ูุถูู ุฑูุฒูุง ูุญูุธ ูุงุณุชุนุงุฏุฉ ุงููุชุบูุฑุงุช ุงููุญููุฉ ุ ูุญูุธ ุงูุญุงูุฉ ุงูุญุงููุฉ ูู ุญูู <code>label</code> ูุงูุงูุชูุงู ุฅูู ุงูุชุนูููุงุช ุงููุทููุจุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุตู ุจุนุถ ุงูููุงุท ุจูุฒูุฏ ูู ุงูุชูุตูู. </p><br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุงูุจุญุซ ุนู ุทุฑููุฉ <code>run</code> ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">MethodNode method = classNode.methods.stream() .filter(methodNode -&gt; methodNode.name.equals(<span class="hljs-string"><span class="hljs-string">"run"</span></span>) &amp;&amp; (methodNode.access &amp; Opcodes.ACC_BRIDGE) == <span class="hljs-number"><span class="hljs-number">0</span></span>) .findFirst() .orElseThrow(() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"Unable to find method to convert"</span></span>));</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุชููุน ุฃูู ูู ุงููุฆุฉ ุงููุงุจูุฉ ููุชุญููู ุณูููู ููุงู ุทุฑููุชุงู <code>run</code> ุ ุฃุญุฏููุง ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุชุนุฏูู ุงูุฌุณุฑ (ูุง ุชุชู ูุฑุงุกุชู <a href="https://habr.com/ru/company/haulmont/blog/426419/">ููุง</a> ).  ูุญู ููุชููู ุจุทุฑููุฉ ุฏูู ุชุนุฏูู. </p><br><p style=";text-align:right;direction:rtl">  ูู JVM bytecode ุ ูููู ุฅุฌุฑุงุก ุงูุชูุงู ูุดุฑูุท (ูุบูุฑ ูุดุฑูุท) ูู ุฃู ููุงู.  ูุญุชูู ASM ุนูู ุชุฌุฑูุฏ <code>Label</code> ุฎุงุต (ุชุณููุฉ) ุ ููู ููุถุน ูู ุงูุฑูุฒ ุงูุจุฑูุฏู.  ูู ุฎูุงู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ุจุนุฏ ูู ููุงููุฉ ุฅูู ุฃุณุงููุจ <code>@Suspend</code> ุ <code>@Suspend</code> ููุฒุฉ ูุดุฑูุทุฉ ูู ุจุฏุงูุฉ ุทุฑููุฉ <code>run</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visitCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    super.visitCode(); Label startLabel = new Label(); super.visitVarInsn(Opcodes.ALOAD, THIS_VAR_INDEX); //    this super.visitFieldInsn(Opcodes.GETFIELD, myClassJvmName, "label$S$S", "I"); //  label$S$S super.visitVarInsn(Opcodes.ISTORE, labelVarIndex); //      super.visitVarInsn(Opcodes.ILOAD, labelVarIndex); //   label   super.visitIntInsn(Opcodes.BIPUSH, 0); //  0   super.visitJumpInsn(Opcodes.IF_ICMPEQ, startLabel); //      startLabel        (label == 0) for (int i = 0; i &lt; numLabels; i++) { //   ,     super.visitVarInsn(Opcodes.ILOAD, labelVarIndex); super.visitIntInsn(Opcodes.BIPUSH, i + 1); super.visitJumpInsn(Opcodes.IF_ICMPEQ, labels[i]); } super.visitTypeInsn(Opcodes.NEW, "microutine/core/ContinuationEndException"); // run      ,   super.visitInsn(Opcodes.DUP); super.visitMethodInsn(Opcodes.INVOKESPECIAL, "microutine/core/ContinuationEndException", "&lt;init&gt;", "()V", false); super.visitInsn(Opcodes.ATHROW); super.visitLabel(startLabel); // ,      }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุถุน ุงูุนูุงูุงุช ุจุนุฏ ุงุณุชุฏุนุงุกุงุช ุทุฑู <code>@Suspend</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visitMethodInsn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> opcode, String owner, String name, String descriptor, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isInterface)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> suspendPoint = Utils.isSuspendPoint(classLoader, owner, name); <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.visitMethodInsn(opcode, owner, name, descriptor, isInterface); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (suspendPoint) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.visitVarInsn(Opcodes.ALOAD, THIS_VAR_INDEX); <span class="hljs-comment"><span class="hljs-comment">//    this super.visitIntInsn(Opcodes.BIPUSH, suspensionNumber); //   ,       super.visitFieldInsn(Opcodes.PUTFIELD, myClassJvmName, "label$S$S", "I"); //     label$S$S saveFrame(); //    suspend(); super.visitLabel(labels[suspensionNumber - 1]); // ,     restoreFrame(); //    suspensionNumber++; } } private void suspend() { super.visitFieldInsn(Opcodes.GETSTATIC, "microutine/core/Continuation", "SUSPEND", "Ljava/lang/Object;"); //    Continuation.SUSPEND super.visitInsn(Opcodes.ARETURN); //   }</span></span></code> </pre> <br><h3 id="testy" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑุงุช </h3><br><p style=";text-align:right;direction:rtl">  ููุชุจ ูููุฏ ูุนุทู ุซูุงุซุฉ ุฃุฑูุงู ุนูู ุงูุชูุงูู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">testIntSequence</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">YieldTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testIntSequence</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Sequence&lt;Integer&gt; sequence = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sequence&lt;Integer&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SequenceSuspendable&lt;Integer&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SequenceScope&lt;Integer&gt; scope)</span></span></span><span class="hljs-function"> </span></span>{ scope.yield(<span class="hljs-number"><span class="hljs-number">10</span></span>); scope.yield(<span class="hljs-number"><span class="hljs-number">20</span></span>); scope.yield(<span class="hljs-number"><span class="hljs-number">30</span></span>); } }); List&lt;Integer&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Integer integer : sequence) { list.add(integer); } assertEquals(<span class="hljs-number"><span class="hljs-number">10</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) list.get(<span class="hljs-number"><span class="hljs-number">0</span></span>)); assertEquals(<span class="hljs-number"><span class="hljs-number">20</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) list.get(<span class="hljs-number"><span class="hljs-number">1</span></span>)); assertEquals(<span class="hljs-number"><span class="hljs-number">30</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) list.get(<span class="hljs-number"><span class="hljs-number">2</span></span>)); } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูุง ููุซู ุงูุงุฎุชุจุงุฑ ููุณู ุฃู ุดูุก ูุซูุฑ ููุงูุชูุงู ุ ููููู ูุซูุฑ ููุงูุชูุงู ุจุฏุฑุฌุฉ ูุงููุฉ ููู ุชุดููุฑ ููู ุงููุตู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">testIntSequence decompiled</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">YieldTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">YieldTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testIntSequence</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NamelessClass_1</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SequenceSuspendable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Continuation</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SequenceScope scope$S; NamelessClass_1() { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object var1)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> label = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S; SequenceScope var2; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (label != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (label != <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (label != <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (label != <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContinuationEndException(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { var2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { var2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.yield(<span class="hljs-number"><span class="hljs-number">30</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S = var2; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Continuation.SUSPEND; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { var2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.yield(<span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S = var2; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Continuation.SUSPEND; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { var2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.yield(<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S = var2; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Continuation.SUSPEND; } } } Sequence&lt;Integer&gt; sequence = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sequence(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NamelessClass_1()); List&lt;Integer&gt; list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList(); Iterator var3 = sequence.iterator(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(var3.hasNext()) { Integer integer = (Integer)var3.next(); list.add(integer); } Assert.assertEquals(<span class="hljs-number"><span class="hljs-number">10L</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>)(Integer)list.get(<span class="hljs-number"><span class="hljs-number">0</span></span>)); Assert.assertEquals(<span class="hljs-number"><span class="hljs-number">20L</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>)(Integer)list.get(<span class="hljs-number"><span class="hljs-number">1</span></span>)); Assert.assertEquals(<span class="hljs-number"><span class="hljs-number">30L</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>)(Integer)list.get(<span class="hljs-number"><span class="hljs-number">2</span></span>)); } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุงูุฑูุฒ ููุชูุฎ ููุบุงูุฉ ุ ูุนุธู ุงูุชุนูููุงุช ุชููู ุจุญูุธ ูุงุณุชุนุงุฏุฉ ุฅุทุงุฑ ุงูููุฏุณ (ุงููุชุบูุฑุงุช ุงููุญููุฉ).  ููุน ุฐูู ุ ูุฅูู ูุง ูุนูู.  ุงููุซุงู ุงููุนุทู ุณูู ูุนูู ุจุดูู ูุซุงูู ุจุฏูู ุฌูู ูุณูู.  ุฏุนูุง ูููุฑ ูู ูุซุงู ุฃูุซุฑ ุตุนูุจุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุจููุงูุณู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">YieldTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fibonacci</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Sequence&lt;Integer&gt; sequence = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sequence&lt;&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Suspendable&lt;Integer&gt;() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SequenceScope&lt;Integer&gt; scope)</span></span></span><span class="hljs-function"> </span></span>{ scope.yield(<span class="hljs-number"><span class="hljs-number">1</span></span>); scope.yield(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>) { b += a; scope.yield(b); a += b; scope.yield(a); } } }); <span class="hljs-comment"><span class="hljs-comment">//noinspection OptionalGetWithoutIsPresent Integer tenthFibonacci = StreamSupport.stream(sequence.spliterator(), false) .skip(9).findFirst().get(); assertEquals(55, ((int) tenthFibonacci)); } }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ุงูุฑูุฒ ุฃุนูุงู ูููุฏ ุชุณูุณู ููุจููุงุชุดู ูุงููุงุฆู.  ูุญู ูุฌูุน ูููู ุงูุดูุฑุฉ: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุจููุงุชุดู decompiled</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">YieldTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">YieldTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fibonacci</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NamelessClass_1</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SequenceSuspendable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Continuation</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SequenceScope scope$S; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> aa$S; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ba$S; NamelessClass_1() { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object var1)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> label = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S; SequenceScope var2; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (label != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (label != <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var3; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> var4; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (label != <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (label == <span class="hljs-number"><span class="hljs-number">3</span></span>) { var2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S; var3 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.aa$S; var4 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ba$S; var3 += var4; var2.yield(var3); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S = <span class="hljs-number"><span class="hljs-number">4</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S = var2; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.aa$S = var3; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ba$S = var4; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Continuation.SUSPEND; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (label != <span class="hljs-number"><span class="hljs-number">4</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ContinuationEndException(); } var2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S; var3 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.aa$S; var4 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ba$S; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { var2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S; var3 = <span class="hljs-number"><span class="hljs-number">1</span></span>; var4 = <span class="hljs-number"><span class="hljs-number">1</span></span>; } var4 += var3; var2.yield(var4); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S = var2; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.aa$S = var3; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ba$S = var4; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Continuation.SUSPEND; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { var2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S; var2.yield(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S = var2; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Continuation.SUSPEND; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { var2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S; var2.yield(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.label$S$S = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.scope$S = var2; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Continuation.SUSPEND; } } } Sequence&lt;Integer&gt; sequence = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Sequence(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NamelessClass_1()); Integer tenthFibonacci = (Integer)StreamSupport.stream(sequence.spliterator(), <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>).skip(<span class="hljs-number"><span class="hljs-number">9L</span></span>).findFirst().get(); Assert.assertEquals(<span class="hljs-number"><span class="hljs-number">55L</span></span>, (<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>)tenthFibonacci); } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ููู ูุง ูุฌุนู ุงููุตู decompiled ุตุนุจุฉ ุจูุง ููู ุงูููุงูุฉ.  ูุซู ุขุฎุฑ ูุฑุฉ ุ ุชููุฏ ูุนุธู ุงูุฅุฑุดุงุฏุงุช ุงููุชุบูุฑุงุช ุงููุญููุฉ ููุงู.  ุจุนุถ ุงูุชุนูููุงุช ุบูุฑ ูุฌุฏูุฉ ุ ูุงููุชุบูุฑุงุช ุนูู ุงูููุฑ ูุชู ุชุขูููุง ุจูุงุณุทุฉ ููู ุฃุฎุฑู.         ,      . </p><br><p style=";text-align:right;direction:rtl">          while,      .     .        .              ,     ''  <code>return SUSPEND</code> . </p><br><h3 id="rezyume" style=";text-align:right;direction:rtl">  ููุฎุต </h3><br><p style=";text-align:right;direction:rtl"> ,   ,   ,   .        yield.           ,   ,      โ ,   .      ,    (    )   .  ,   JIT     .  <code>yield</code>   <code>yieldAll</code> โ ,       ,        ,             ,    .        ,      ,    . </p><br><p style=";text-align:right;direction:rtl">      โ  โ   ,     .         ,         .  ,          :       ,   . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar480888/">https://habr.com/ru/post/ar480888/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar480870/index.html">ูุชุงุฆุฌ ุงูุนูุฏ</a></li>
<li><a href="../ar480872/index.html">ุฃุบููุช ุดุฑูุฉ ุฅูุชู ูุฌูุฉ ุฃูููุฉ ุชู ุงูุฅุจูุงุบ ุนููุง ูุจู ุณุชุฉ ุฃุดูุฑ</a></li>
<li><a href="../ar480874/index.html">ุฃุฏุช ุฏุฑุงุณุฉ ุงููููุชุฑูููุงุช ุฅูู ุงูุชุดุงู ุบูุฑ ูุชููุน ูู ุงูุฑูุงุถูุงุช</a></li>
<li><a href="../ar480876/index.html">ูููู ุจุชูุธูู Dock ูุฌุนู ุงูุชุทุจูู ุฏูู xCode</a></li>
<li><a href="../ar480886/index.html">ุงูุดุจูุงุช ุงูุนุตุจูุฉ ูุงููุณุจุฉ ุงูุฐูุจูุฉ: ุงูุชุดุบูู ุงูุซุงูู</a></li>
<li><a href="../ar480890/index.html">ูุชุงุฆุฌ ุงููุณุญ ุนูู ุงุณุชุฎุฏุงู ููุญุฉ ุงูุณุจุฑุณ</a></li>
<li><a href="../ar480892/index.html">ุจุงููู ุงูุฅูุชุฑูุช</a></li>
<li><a href="../ar480900/index.html">ุฃุนุฏ ุทููู! (ูุตุฉ N.-F)</a></li>
<li><a href="../ar480902/index.html">ุฌุฏูุฏ Postgres_exporter ููุฒุงุช ุฑุตุฏ ุจูุณุชุฌุฑุณ</a></li>
<li><a href="../ar480904/index.html">PHP Microservice Framework: ุจูุฆุฉ ุงูุชุทููุฑ ูู Swoft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>