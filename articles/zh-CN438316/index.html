<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â„ï¸ ğŸš¯ ğŸ´ 2Dä¸­çš„å¸¦ç¬¦å·è·ç¦»åœºåŸºç¡€çŸ¥è¯† â˜•ï¸ â˜ªï¸ ğŸ’†ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å°½ç®¡ç½‘æ ¼æ˜¯æœ€ç®€å•ï¼Œæœ€é€šç”¨çš„æ¸²æŸ“æ–¹å¼ï¼Œä½†æ˜¯è¿˜æœ‰å…¶ä»–ä¸€äº›é€‰é¡¹å¯ä»¥ç”¨2då’Œ3dè¡¨ç¤ºå½¢çŠ¶ã€‚ ä¸€ç§å¸¸ç”¨çš„æ–¹æ³•æ˜¯æœ‰ç¬¦å·è·ç¦»å­—æ®µï¼ˆSDFï¼‰ã€‚ å¸¦ç¬¦å·çš„è·ç¦»åœºæä¾›äº†æ›´ä¾¿å®œçš„å…‰çº¿è·Ÿè¸ªï¼Œå…è®¸ä¸åŒçš„å½¢çŠ¶å½¼æ­¤å¹³æ»‘åœ°æµåŠ¨ï¼Œå¹¶èŠ‚çœäº†ä½åˆ†è¾¨ç‡çº¹ç†ä»¥è·å–é«˜è´¨é‡å›¾åƒã€‚ 

 æˆ‘ä»¬å°†ä»ä½¿ç”¨äºŒç»´å‡½æ•°ç”Ÿæˆè·ç¦»åœºçš„ç¬¦å·å¼€å§‹ï¼Œä½†æ˜¯ç¨åæˆ‘ä»¬å°†ç»§...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>2Dä¸­çš„å¸¦ç¬¦å·è·ç¦»åœºåŸºç¡€çŸ¥è¯†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438316/"> å°½ç®¡ç½‘æ ¼æ˜¯æœ€ç®€å•ï¼Œæœ€é€šç”¨çš„æ¸²æŸ“æ–¹å¼ï¼Œä½†æ˜¯è¿˜æœ‰å…¶ä»–ä¸€äº›é€‰é¡¹å¯ä»¥ç”¨2då’Œ3dè¡¨ç¤ºå½¢çŠ¶ã€‚ ä¸€ç§å¸¸ç”¨çš„æ–¹æ³•æ˜¯æœ‰ç¬¦å·è·ç¦»å­—æ®µï¼ˆSDFï¼‰ã€‚ å¸¦ç¬¦å·çš„è·ç¦»åœºæä¾›äº†æ›´ä¾¿å®œçš„å…‰çº¿è·Ÿè¸ªï¼Œå…è®¸ä¸åŒçš„å½¢çŠ¶å½¼æ­¤å¹³æ»‘åœ°æµåŠ¨ï¼Œå¹¶èŠ‚çœäº†ä½åˆ†è¾¨ç‡çº¹ç†ä»¥è·å–é«˜è´¨é‡å›¾åƒã€‚ <br><br> æˆ‘ä»¬å°†ä»ä½¿ç”¨äºŒç»´å‡½æ•°ç”Ÿæˆè·ç¦»åœºçš„ç¬¦å·å¼€å§‹ï¼Œä½†æ˜¯ç¨åæˆ‘ä»¬å°†ç»§ç»­ä»¥3Då½¢å¼ç”Ÿæˆå®ƒä»¬ã€‚ æˆ‘å°†ä½¿ç”¨ä¸–ç•Œç©ºé—´çš„åæ ‡ï¼Œä»¥ä¾¿å°½å¯èƒ½å‡å°‘å¯¹ç¼©æ”¾æ¯”ä¾‹å’ŒUVåæ ‡çš„ä¾èµ–ï¼Œå› æ­¤ï¼Œå¦‚æœæ‚¨ä¸äº†è§£å®ƒçš„å·¥ä½œåŸç†ï¼Œè¯·<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨å¹³å¦çš„å åŠ å±‚ä¸Š</a>ç ”ç©¶æœ¬<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•™ç¨‹</a> ï¼Œä»¥è§£é‡Šæ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eb/w-/sj/ebw-sjziw5loorrc2yj1wsl1vyu.gif"></div><a name="habracut"></a><br><h2> åŸºç¡€å‡†å¤‡ </h2><br> æˆ‘ä»¬å°†æš‚æ—¶æ”¾å¼ƒåŸºæœ¬å¹³é¢å åŠ ç€è‰²å™¨çš„å±æ€§ï¼Œå› ä¸ºç°åœ¨æˆ‘ä»¬å°†å¤„ç†æŠ€æœ¯åŸºç¡€ã€‚ ç„¶åï¼Œæˆ‘ä»¬å°†é¡¶ç‚¹åœ¨ä¸–ç•Œä¸Šçš„ä½ç½®ç›´æ¥å†™å…¥ç‰‡æ®µç»“æ„ï¼Œè€Œä¸ä¼šå…ˆå°†å…¶è½¬æ¢ä¸ºUVã€‚ åœ¨å‡†å¤‡å·¥ä½œçš„æœ€åé˜¶æ®µï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªæ–°å‡½æ•°æ¥è®¡ç®—åœºæ™¯å¹¶å°†è·ç¦»è¿”å›åˆ°æœ€è¿‘çš„æ›²é¢ã€‚ ç„¶åï¼Œæˆ‘ä»¬è°ƒç”¨å‡½æ•°å¹¶å°†ç»“æœç”¨ä½œé¢œè‰²ã€‚ <br><br><pre><code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/034_2D_SDF_Basics"</span></span>{ SubShader{ <span class="hljs-comment"><span class="hljs-comment">//           Tags{ "RenderType"="Opaque" "Queue"="Geometry"} Pass{ CGPROGRAM #include "UnityCG.cginc" #pragma vertex vert #pragma fragment frag struct appdata{ float4 vertex : POSITION; }; struct v2f{ float4 position : SV_POSITION; float4 worldPos : TEXCOORD0; }; v2f vert(appdata v){ v2f o; //         o.position = UnityObjectToClipPos(v.vertex); //     o.worldPos = mul(unity_ObjectToWorld, v.vertex); return o; } float scene(float2 position) { //      return 0; } fixed4 frag(v2f i) : SV_TARGET{ float dist = scene(i.worldPos.xz); fixed4 col = fixed4(dist, dist, dist, 1); return col; } ENDCG } } FallBack "Standard" //fallback   ,       }</span></span></code> </pre> <br> æˆ‘å°†åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ç¼–å†™å¸¦ç¬¦å·è·ç¦»å­—æ®µçš„æ‰€æœ‰å‡½æ•°ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥é‡å¤ä½¿ç”¨å®ƒä»¬ã€‚ ä¸ºæ­¤ï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ã€‚ æˆ‘ä»¬ä¸æ·»åŠ ä»»ä½•é‚ªæ¶ï¼Œç„¶åè®¾ç½®å®ƒå¹¶å®Œæˆæ¡ä»¶åŒ…å«ä¿æŠ¤ï¼Œé¦–å…ˆæ£€æŸ¥é¢„å¤„ç†å™¨å˜é‡æ˜¯å¦å·²è®¾ç½®ã€‚ å¦‚æœå°šæœªå®šä¹‰ï¼Œåˆ™å®šä¹‰å®ƒå¹¶åœ¨è¦åŒ…å«çš„å‡½æ•°ä¹‹åå®Œæˆæ¡ä»¶ifæ„é€ ã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸¤æ¬¡æ·»åŠ æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æœ‰æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å®ƒä»¬éƒ½æ·»åŠ äº†ç›¸åŒçš„æ–‡ä»¶ï¼‰ï¼Œé‚£ä¹ˆè¿™å°†ç ´åç€è‰²å™¨ã€‚ å¦‚æœæ‚¨ç¡®å®šè¿™ç§æƒ…å†µæ°¸è¿œä¸ä¼šå‘ç”Ÿï¼Œé‚£ä¹ˆæ‚¨å°†æ— æ³•æ‰§è¡Œæ­¤æ£€æŸ¥ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// in include file // include guards that keep the functions from being included more than once #ifndef SDF_2D #define SDF_2D // functions #endif</span></span></code> </pre> <br> å¦‚æœåŒ…å«æ–‡ä»¶ä¸ä¸»ç€è‰²å™¨ä½äºåŒä¸€æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ™å¯ä»¥ä½¿ç”¨pragmaæ„é€ ç®€å•åœ°å°†å…¶åŒ…æ‹¬åœ¨å†…ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// in main shader #include "2D_SDF.cginc"</span></span></code> </pre> <br> å› æ­¤ï¼Œæˆ‘ä»¬å°†åœ¨æ¸²æŸ“çš„è¡¨é¢ä¸Šä»…çœ‹åˆ°ä¸€ä¸ªé»‘è‰²è¡¨é¢ï¼Œå‡†å¤‡åœ¨å…¶ä¸Šæ˜¾ç¤ºè·ç¦»å¹¶å¸¦æœ‰ç¬¦å·ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/25b/a3a/188/25ba3a188962c645fc6a12cfb5aed751.png"></div><br><h2> åœˆåœˆ </h2><br> æœ‰ç¬¦å·è·ç¦»å­—æ®µçš„æœ€ç®€å•å‡½æ•°æ˜¯åœ†å‡½æ•°ã€‚ è¯¥å‡½æ•°å°†ä»…æ¥æ”¶æ ·æœ¬çš„ä½ç½®å’Œåœ†çš„åŠå¾„ã€‚ æˆ‘ä»¬é¦–å…ˆè·å¾—æ ·æœ¬ä½ç½®å‘é‡çš„é•¿åº¦ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ä½ç½®ï¼ˆ0ï¼Œ0ï¼‰å¤„å¾—åˆ°ä¸€ä¸ªç‚¹ï¼Œè¯¥ç‚¹ç±»ä¼¼äºåŠå¾„ä¸º0çš„åœ†ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">circle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 samplePosition, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> length(samplePosition); }</code> </pre> <br> ç„¶åï¼Œæ‚¨å¯ä»¥åœ¨åœºæ™¯å‡½æ•°ä¸­è°ƒç”¨åœ†å‡½æ•°å¹¶è¿”å›å…¶è¿”å›çš„è·ç¦»ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 position)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sceneDistance = circle(position, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sceneDistance; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/839/6a8/f87/8396a8f8780b6b30deb88d1009f6f5c7.png"></div><br> ç„¶åï¼Œæˆ‘ä»¬å°†åŠå¾„æ·»åŠ åˆ°è®¡ç®—ä¸­ã€‚ æœ‰ç¬¦å·è·ç¦»å‡½æ•°çš„ä¸€ä¸ªé‡è¦æ–¹é¢æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨å¯¹è±¡å†…éƒ¨æ—¶ï¼Œä¸è¡¨é¢çš„è·ç¦»ä¸ºè´Ÿï¼ˆè¿™æ˜¯â€œæœ‰ç¬¦å·â€ä¸€è¯åœ¨â€œæœ‰ç¬¦å·è·ç¦»â€è¡¨è¾¾å¼ä¸­çš„å«ä¹‰ï¼‰ã€‚ è¦å°†åœ†å¢åŠ åˆ°åŠå¾„ï¼Œæˆ‘ä»¬åªéœ€ä»é•¿åº¦ä¸­å‡å»åŠå¾„å³å¯ã€‚ å› æ­¤ï¼Œå‡½æ•°è¿”å›0çš„æ‰€æœ‰ä½ç½®çš„è¡¨é¢éƒ½å‘å¤–ç§»åŠ¨ã€‚ å¤§å°ä¸º0çš„åœ†ä¸è¡¨é¢çš„è·ç¦»çš„å•ä½ä¸º2ï¼ŒåŠå¾„ä¸º1çš„åœ†ä¸è¡¨é¢çš„è·ç¦»åªæœ‰ä¸€ä¸ªå•ä½ï¼Œè€ŒåŠå¾„ä¸º3çš„åœ†çš„åœ†å†…éƒ¨ä¸ºä¸€ä¸ªå•ä½ï¼ˆå€¼ä¸º-1ï¼‰ï¼› <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">circle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 samplePosition, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> length(samplePosition) - radius; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7a/b83/57f/e7ab8357f4c844bc7bc58dfda6406d9d.png"></div><br> ç°åœ¨ï¼Œæˆ‘ä»¬å”¯ä¸€ä¸èƒ½åšçš„å°±æ˜¯å°†åœ†ä»ä¸­å¿ƒç§»å¼€ã€‚ è¦è§£å†³æ­¤é—®é¢˜ï¼Œæ‚¨å¯ä»¥å‘åœ†å‡½æ•°æ·»åŠ æ–°çš„å‚æ•°ï¼Œä»¥è®¡ç®—æ ·æœ¬ä½ç½®ä¸åœ†å¿ƒä¹‹é—´çš„è·ç¦»ï¼Œå¹¶ä»è¯¥å€¼ä¸­å‡å»åŠå¾„ä»¥å®šä¹‰åœ†ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç§»åŠ¨é‡‡æ ·ç‚¹çš„ç©ºé—´æ¥é‡æ–°å®šä¹‰åŸç‚¹ï¼Œç„¶ååœ¨è¯¥ç©ºé—´ä¸­è·å¾—ä¸€ä¸ªåœ†ã€‚ ç¬¬äºŒç§é€‰æ‹©çœ‹èµ·æ¥è¦å¤æ‚å¾—å¤šï¼Œä½†æ˜¯ç”±äºç§»åŠ¨å¯¹è±¡æ˜¯æˆ‘ä»¬è¦ç”¨äºæ‰€æœ‰å›¾å½¢çš„ä¸€ç§æ“ä½œï¼Œå› æ­¤å®ƒæ›´å…·é€šç”¨æ€§ï¼Œå› æ­¤æˆ‘å°†å¯¹å…¶è¿›è¡Œè§£é‡Šã€‚ <br><br><h2> æ¬å®¶ </h2><br>  â€œç‚¹ç©ºé—´çš„å˜æ¢â€-å¬èµ·æ¥æ¯”å®é™…æƒ…å†µè¦ç³Ÿç³•å¾—å¤šã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å°†ç‚¹ä¼ é€’ç»™å‡½æ•°ï¼Œå‡½æ•°ä¼šå¯¹å…¶è¿›è¡Œæ›´æ”¹ï¼Œä»¥ä¾¿å°†æ¥æˆ‘ä»¬ä»å¯ä»¥ä½¿ç”¨å®ƒã€‚ åœ¨ä¼ è¾“çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€ä»è¯¥ç‚¹å‡å»åç§»é‡å³å¯ã€‚ å½“æˆ‘ä»¬æƒ³æ²¿æ­£æ–¹å‘ç§»åŠ¨å½¢çŠ¶æ—¶ï¼Œä¼šå‡å»ä½ç½®ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ç©ºé—´ä¸­æ¸²æŸ“çš„å½¢çŠ¶ä¸ç§»åŠ¨ç©ºé—´çš„æ–¹å‘ç›¸åã€‚ <br><br> ä¾‹å¦‚ï¼Œå¦‚æœè¦åœ¨ä½ç½®<code>(3, 4)</code>ä¸Šç»˜åˆ¶ä¸€ä¸ªçƒä½“ï¼Œåˆ™éœ€è¦æ›´æ”¹ç©ºé—´ï¼Œä»¥ä½¿<code>(3, 4)</code>å˜æˆ<code>(0, 0)</code> ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦å‡å»<code>(3, 4)</code> ã€‚ ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å›´ç»•<i>æ–°</i>çš„åŸç‚¹ç»˜åˆ¶ä¸€ä¸ªçƒä½“ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯ä¸€ä¸ª<i>æ—§</i>ç‚¹<code>(3, 4)</code> ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// in sdf functions include file float2 translate(float2 samplePosition, float2 offset){ return samplePosition - offset; }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 position)</span></span></span><span class="hljs-function"> </span></span>{ float2 circlePosition = translate(position, float2(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sceneDistance = circle(circlePosition, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sceneDistance; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e5/7ca/6cc/7e57ca6cc1b5953b03811fd2d48ac3f1.png"></div><br><h2> é•¿æ–¹å½¢ </h2><br> å¦ä¸€ä¸ªç®€å•çš„å½¢çŠ¶æ˜¯çŸ©å½¢ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬åˆ†åˆ«è€ƒè™‘è¿™äº›ç»„ä»¶ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬è·å–åˆ°ä¸­å¿ƒçš„è·ç¦»ï¼Œå–ç»å¯¹å€¼ã€‚ ç„¶åï¼Œç±»ä¼¼äºåœ†å½¢ï¼Œæˆ‘ä»¬å‡å»ä¸€åŠçš„å¤§å°ï¼ˆæœ¬è´¨ä¸Šç±»ä¼¼äºçŸ©å½¢çš„åŠå¾„ï¼‰ã€‚ ä¸ºäº†ä»…æ˜¾ç¤ºç»“æœçš„å¤–è§‚ï¼Œæˆ‘ä»¬ç°åœ¨ä»…è¿”å›ä¸€ä¸ªç»„ä»¶ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rectangle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 samplePosition, float2 halfSize)</span></span></span></span>{ float2 componentWiseEdgeDistance = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(samplePosition) - halfSize; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> componentWiseEdgeDistance.x; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14d/d5f/62a/14dd5f62af057366f38cdfaa2bc19315.png"></div><br> ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¿”å›æœ€å¤§çš„åˆ†é‡2å°±å¯ä»¥å¾—åˆ°çŸ©å½¢çš„å»‰ä»·ç‰ˆæœ¬ã€‚è¿™åœ¨è®¸å¤šæƒ…å†µä¸‹éƒ½æœ‰æ•ˆï¼Œä½†ä¸èƒ½æ­£ç¡®æ‰§è¡Œï¼Œå› ä¸ºå®ƒä¸èƒ½åœ¨æ‹è§’å¤„æ˜¾ç¤ºæ­£ç¡®çš„è·ç¦»ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a9c/b19/e06/a9cb19e061cb980c3fe8a2d533b2fbfb.png"></div><br> å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•è·å¾—å›¾å½¢å¤–éƒ¨çŸ©å½¢çš„æ­£ç¡®å€¼ï¼šé¦–å…ˆè·å–åˆ°è¾¹ç¼˜çš„è·ç¦»ä¸0ä¹‹é—´çš„æœ€å¤§å€¼ï¼Œç„¶åå–å…¶é•¿åº¦ã€‚ <br><br> å¦‚æœæˆ‘ä»¬ä¸å°†è·ç¦»é™åˆ¶åœ¨0ä»¥ä¸‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è®¡ç®—åˆ°æ‹è§’çš„è·ç¦»ï¼ˆedgeDistancesä¸º<code>(0, 0)</code> ï¼‰ï¼Œä½†æ˜¯æ‹è§’ä¹‹é—´çš„åæ ‡ä¸ä¼šä½äº0ï¼Œå› æ­¤å°†ä½¿ç”¨æ•´ä¸ªè¾¹ç¼˜ã€‚ è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯ï¼Œåœ¨æ•´ä¸ªå›¾å½¢å†…éƒ¨ï¼Œå°†0ç”¨ä½œè·è¾¹ç¼˜çš„è·ç¦»ã€‚ <br><br> è¦æ ¡æ­£æ•´ä¸ªå†…éƒ¨é›¶ä»¶çš„è·ç¦»0ï¼Œæ‚¨éœ€è¦ç”Ÿæˆå†…éƒ¨è·ç¦»ï¼Œåªéœ€ä½¿ç”¨ä¾¿å®œçš„çŸ©å½¢å…¬å¼ï¼ˆä»xå’Œyåˆ†é‡è·å–æœ€å¤§å€¼ï¼‰ï¼Œç„¶åä¿è¯å®ƒæ°¸è¿œä¸ä¼šè¶…è¿‡0ï¼Œå°†æœ€å°å€¼å–ä¸º0ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å¤–éƒ¨è·ç¦»ï¼ˆæ°¸è¿œä¸å°äº0ï¼‰å’Œå†…éƒ¨è·ç¦»ï¼ˆæ°¸è¿œä¸è¶…è¿‡0ï¼‰ç›¸åŠ ï¼Œä»è€Œè·å¾—å®Œæˆçš„è·ç¦»å‡½æ•°ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rectangle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 samplePosition, float2 halfSize)</span></span></span></span>{ float2 componentWiseEdgeDistance = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(samplePosition) - halfSize; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> outsideDistance = length(max(componentWiseEdgeDistance, <span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> insideDistance = min(max(componentWiseEdgeDistance.x, componentWiseEdgeDistance.y), <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> outsideDistance + insideDistance; }</code> </pre> <br> ç”±äºæˆ‘ä»¬ä»¥å‰ä»¥é€šç”¨å½¢å¼è®°å½•äº†ä¼ é€’å‡½æ•°ï¼Œå› æ­¤ç°åœ¨æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæ¥å°†å…¶ä¸­å¿ƒç§»åŠ¨åˆ°ä»»ä½•ä½ç½®ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 position)</span></span></span><span class="hljs-function"> </span></span>{ float2 circlePosition = translate(position, float2(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sceneDistance = rectangle(circlePosition, float2(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sceneDistance; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cc0/8eb/671/cc08eb671ae5314ae32d3a20cd685b4b.png"></div><br><h2> è½¬å¼¯ </h2><br> æ—‹è½¬å½¢çŠ¶ç±»ä¼¼äºç§»åŠ¨å½¢çŠ¶ã€‚ åœ¨è®¡ç®—åˆ°å›¾å½¢çš„è·ç¦»ä¹‹å‰ï¼Œæˆ‘ä»¬å°†åæ ‡åå‘æ—‹è½¬ã€‚ ä¸ºäº†å°½å¯èƒ½ç®€åŒ–å¯¹æ—‹è½¬çš„ç†è§£ï¼Œæˆ‘ä»¬å°†æ—‹è½¬ä¹˜ä»¥2 * piä»¥è·å¾—å¼§åº¦è§’ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†æ—‹è½¬ä¼ é€’ç»™è¯¥å‡½æ•°ï¼Œå…¶ä¸­0.25æ˜¯å››åˆ†ä¹‹ä¸€åœˆï¼Œ0.5æ˜¯åŠåœˆï¼Œè€Œ1æ˜¯æ•´åœˆï¼ˆå¦‚æœæ‚¨è§‰å¾—æ›´è‡ªç„¶ï¼Œåˆ™å¯ä»¥æ‰§è¡Œä¸åŒçš„è½¬æ¢ï¼‰ã€‚ æˆ‘ä»¬è¿˜åè½¬äº†æ—‹è½¬ï¼Œå› ä¸ºå‡ºäºä¸ç§»åŠ¨æ—¶ç›¸åŒçš„åŸå› ï¼Œæˆ‘ä»¬éœ€è¦æ²¿ä¸å›¾å½¢æ—‹è½¬ç›¸åçš„æ–¹å‘æ—‹è½¬ä½ç½®ã€‚ <br><br> ä¸ºäº†è®¡ç®—æ—‹è½¬åæ ‡ï¼Œæˆ‘ä»¬é¦–å…ˆæ ¹æ®è§’åº¦è®¡ç®—æ­£å¼¦å’Œä½™å¼¦ã€‚  Hlslå…·æœ‰sincoså‡½æ•°ï¼Œä¸å•ç‹¬è®¡ç®—ç›¸æ¯”ï¼Œå®ƒä»¬è®¡ç®—è¿™ä¸¤ä¸ªå€¼çš„é€Ÿåº¦æ›´å¿«ã€‚ <br><br> åœ¨ä¸ºåˆ†é‡xæ„é€ æ–°çŸ¢é‡æ—¶ï¼Œæˆ‘ä»¬å°†åŸå§‹åˆ†é‡xä¹˜ä»¥ä½™å¼¦ï¼Œå°†åˆ†é‡yä¹˜ä»¥æ­£å¼¦ã€‚ å¦‚æœæ‚¨è®°å¾—0çš„ä½™å¼¦ä¸º1ï¼Œå¹¶ä¸”å½“æ—‹è½¬0æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›æ–°çŸ¢é‡çš„åˆ†é‡xä¸ä»¥å‰å®Œå…¨ç›¸åŒï¼ˆå³ä¹˜ä»¥1ï¼‰ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“è®°ä½è¿™ä¸€ç‚¹ã€‚ å…ˆå‰æŒ‡å‘ä¸Šæ–¹çš„åˆ†é‡yå¯¹åˆ†é‡xæ²¡æœ‰è´¡çŒ®ï¼Œä½†å‘å³æ—‹è½¬ï¼Œå…¶å€¼ä»0å¼€å§‹ï¼Œé¦–å…ˆå˜å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶è¿åŠ¨å®Œå…¨ç”±æ­£å¼¦æè¿°ã€‚ <br><br> å¯¹äºæ–°çŸ¢é‡çš„åˆ†é‡yï¼Œæˆ‘ä»¬å°†ä½™å¼¦ä¹˜ä»¥æ—§çŸ¢é‡çš„åˆ†é‡yï¼Œç„¶åå‡å»æ­£å¼¦ä¹˜ä»¥æ—§åˆ†é‡xã€‚ è¦ç†è§£ä¸ºä»€ä¹ˆæˆ‘ä»¬å‡å»è€Œä¸æ˜¯åŠ æ­£å¼¦ä¹˜ä»¥åˆ†é‡xï¼Œæœ€å¥½æƒ³è±¡ä¸€ä¸‹å‘é‡<code>(1, 0)</code>åœ¨é¡ºæ—¶é’ˆæ—‹è½¬æ—¶å¦‚ä½•å˜åŒ–ã€‚ ç»“æœçš„yåˆ†é‡ä»0å¼€å§‹ï¼Œç„¶åå°äº0ã€‚è¿™ä¸æ­£å¼¦çš„è¡Œä¸ºç›¸åï¼Œå› æ­¤æˆ‘ä»¬æ›´æ”¹ç¬¦å·ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">float2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rotate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 samplePosition, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> rotation)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> PI = <span class="hljs-number"><span class="hljs-number">3.14159</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> angle = rotation * PI * <span class="hljs-number"><span class="hljs-number">2</span></span> * <span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sine, cosine; sincos(angle, sine, cosine); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> float2(cosine * samplePosition.x + sine * samplePosition.y, cosine * samplePosition.y - sine * samplePosition.x); }</code> </pre> <br> ç°åœ¨æˆ‘ä»¬å·²ç»ç¼–å†™äº†æ—‹è½¬æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä¸ä¼ é€’ç»“åˆä½¿ç”¨æ¥ç§»åŠ¨å’Œæ—‹è½¬å›¾å½¢ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 position)</span></span></span><span class="hljs-function"> </span></span>{ float2 circlePosition = position; circlePosition = rotate(circlePosition, _Time.y); circlePosition = translate(circlePosition, float2(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sceneDistance = rectangle(circlePosition, float2(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sceneDistance; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d46/99b/da0/d4699bda0f35c10163998bd22fac5eab.gif"></div><br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆå›´ç»•æ•´ä¸ªåœºæ™¯çš„ä¸­å¿ƒæ—‹è½¬å¯¹è±¡ï¼Œä»¥ä¾¿æ—‹è½¬ä¹Ÿå½±å“è½¬ç§»ã€‚ è¦ç›¸å¯¹äºå…¶ä¸­å¿ƒæ—‹è½¬å›¾å½¢ï¼Œæ‚¨é¦–å…ˆéœ€è¦ç§»åŠ¨å›¾å½¢ï¼Œç„¶åå†æ—‹è½¬å®ƒã€‚ ç”±äºæ—‹è½¬æ—¶é¡ºåºçš„æ”¹å˜ï¼Œå›¾å½¢çš„ä¸­å¿ƒå°†æˆä¸ºåæ ‡ç³»çš„ä¸­å¿ƒã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 position)</span></span></span><span class="hljs-function"> </span></span>{ float2 circlePosition = position; circlePosition = translate(circlePosition, float2(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)); circlePosition = rotate(circlePosition, _Time.y); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sceneDistance = rectangle(circlePosition, float2(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sceneDistance; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8e5/3f3/12d/8e53f312d343fcbe95d000703001da3c.gif"></div><br><h2> ç¼©æ”¾æ¯”ä¾‹ </h2><br> ç¼©æ”¾ä¸å˜æ¢å½¢çŠ¶çš„å…¶ä»–æ–¹å¼ç›¸ä¼¼ã€‚ æˆ‘ä»¬å°†åæ ‡æŒ‰æ¯”ä¾‹åˆ’åˆ†ï¼Œä»¥ç¼©å°çš„æ¯”ä¾‹åœ¨ç©ºé—´ä¸­ç»˜åˆ¶å›¾å½¢ï¼Œç„¶ååœ¨åŸºæœ¬åæ ‡ç³»ä¸­å®ƒä»¬å˜å¾—æ›´å¤§ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">float2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 samplePosition, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> scale)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> samplePosition / scale; }</code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 position)</span></span></span><span class="hljs-function"> </span></span>{ float2 circlePosition = position; circlePosition = translate(circlePosition, float2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)); circlePosition = rotate(circlePosition, <span class="hljs-number"><span class="hljs-number">.125</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> pulseScale = <span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">0.5</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(_Time.y * <span class="hljs-number"><span class="hljs-number">3.14</span></span>); circlePosition = scale(circlePosition, pulseScale); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sceneDistance = rectangle(circlePosition, float2(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sceneDistance; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e66/043/a58/e66043a5877fbdcbcc38629d70334481.gif"></div><br> å°½ç®¡è¿™æ ·å¯ä»¥æ­£ç¡®æ‰§è¡Œç¼©æ”¾ï¼Œä½†è·ç¦»ä¹Ÿå¯ä»¥ç¼©æ”¾ã€‚ æœ‰ç¬¦å·è·ç¦»å­—æ®µçš„ä¸»è¦ä¼˜ç‚¹æ˜¯ï¼Œæˆ‘ä»¬å§‹ç»ˆçŸ¥é“åˆ°æœ€è¿‘è¡¨é¢çš„è·ç¦»ï¼Œä½†æ˜¯ç¼©å°ä¼šå®Œå…¨ç ´åè¯¥å±æ€§ã€‚ é€šè¿‡å°†ç¬¦å·è·ç¦»å‡½æ•°ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º<code>rectangle</code> ï¼‰è·å¾—çš„è·ç¦»åœºä¹˜ä»¥æ¯”ä¾‹å°ºï¼Œå¯ä»¥è½»æ¾è§£å†³æ­¤é—®é¢˜ã€‚ å‡ºäºç›¸åŒçš„åŸå› ï¼Œæˆ‘ä»¬ä¸èƒ½è½»æ˜“ç¼©æ”¾ä¸å‡åŒ€ï¼ˆxå’Œyè½´çš„ç¼©æ”¾æ¯”ä¾‹ä¸åŒï¼‰ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scene</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 position)</span></span></span><span class="hljs-function"> </span></span>{ float2 circlePosition = position; circlePosition = translate(circlePosition, float2(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)); circlePosition = rotate(circlePosition, <span class="hljs-number"><span class="hljs-number">.125</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> pulseScale = <span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">0.5</span></span>*<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(_Time.y * <span class="hljs-number"><span class="hljs-number">3.14</span></span>); circlePosition = scale(circlePosition, pulseScale); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sceneDistance = rectangle(circlePosition, float2(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) * pulseScale; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sceneDistance; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/802/1bd/da1/8021bdda196f8300516f04cdf965c8af.gif"></div><br><h2> å¯è§†åŒ– </h2><br> å¸¦ç¬¦å·çš„è·ç¦»å­—æ®µå¯ç”¨äºå¤šç§ç”¨é€”ï¼Œä¾‹å¦‚åˆ›å»ºé˜´å½±ï¼Œæ¸²æŸ“3Dåœºæ™¯ï¼Œç‰©ç†åœºå’Œæ¸²æŸ“æ–‡æœ¬ã€‚ ä½†æ˜¯æˆ‘ä»¬è¿˜ä¸å¸Œæœ›æ·±å…¥äº†è§£å¤æ‚æ€§ï¼Œå› æ­¤ï¼Œæˆ‘å°†ä»…è§£é‡Šå…¶å¯è§†åŒ–çš„ä¸¤ç§æŠ€æœ¯ã€‚ ç¬¬ä¸€ç§æ˜¯å¸¦æœ‰æŠ—é”¯é½¿çš„æ¸…æ™°å½¢å¼ï¼Œç¬¬äºŒç§æ˜¯æ ¹æ®è·ç¦»ç»˜åˆ¶çº¿æ¡ã€‚ <br><br><h3> æ¸…é™¤è¡¨æ ¼ </h3><br> æ­¤æ–¹æ³•ç±»ä¼¼äºå‘ˆç°æ–‡æœ¬æ—¶ç»å¸¸ä½¿ç”¨çš„æ–¹æ³•ï¼Œå®ƒåˆ›å»ºæ¸…æ™°çš„è¡¨å•ã€‚ å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›ä»å‡½æ•°ä¸­ç”Ÿæˆè·ç¦»åœºï¼Œè€Œæ˜¯è¦ä»çº¹ç†ä¸­è¯»å–è·ç¦»åœºï¼Œåˆ™å¯ä»¥ä½¿æˆ‘ä»¬ä½¿ç”¨åˆ†è¾¨ç‡æ¯”å¹³å¸¸ä½å¾—å¤šçš„çº¹ç†ï¼Œå¹¶è·å¾—è‰¯å¥½çš„æ•ˆæœã€‚  TextMesh Proä½¿ç”¨æ­¤æŠ€æœ¯æ¥å‘ˆç°æ–‡æœ¬ã€‚ <br><br> ä¸ºäº†åº”ç”¨æ­¤æŠ€æœ¯ï¼Œæˆ‘ä»¬åˆ©ç”¨äº†ä»¥ä¸‹äº‹å®ï¼šè·ç¦»å­—æ®µä¸­çš„æ•°æ®å·²ç­¾åï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“äº†æˆªæ­¢ç‚¹ã€‚ æˆ‘ä»¬ä»è®¡ç®—è·ç¦»åœºåˆ°ä¸‹ä¸€ä¸ªåƒç´ çš„è·ç¦»å¼€å§‹ã€‚ è¯¥å€¼åº”ä¸åæ ‡æ›´æ”¹çš„é•¿åº¦ç›¸åŒï¼Œä½†æ˜¯ç”¨ç¬¦å·è®¡ç®—è·ç¦»æ›´å®¹æ˜“ä¸”æ›´å¯é ã€‚ <br><br> æ”¶åˆ°è·ç¦»å˜åŒ–åï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸€åŠè·ç¦»å˜åŒ–åˆ°è´Ÿ/åŠ ä¸€åŠè·ç¦»å˜åŒ–ã€‚ è¿™å°†æ‰§è¡Œçº¦0çš„ç®€å•è£å‰ªï¼Œä½†å…·æœ‰å¹³æ»‘æ•ˆæœã€‚ ç„¶åï¼Œå¯ä»¥å°†æ­¤å¹³æ»‘å€¼ç”¨äºæˆ‘ä»¬éœ€è¦çš„ä»»ä½•äºŒè¿›åˆ¶å€¼ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘å°†ç€è‰²å™¨æ›´æ”¹ä¸ºé€æ˜ç€è‰²å™¨ï¼Œå¹¶å°†å…¶ç”¨äºalphaé€šé“ã€‚ æˆ‘ä»æ­£å€¼åˆ°è´Ÿå€¼è¿›è¡Œäº†å¹³æ»‘è¿‡æ¸¡ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›è·ç¦»å­—æ®µçš„è´Ÿå€¼å¯è§ã€‚ å¦‚æœæ‚¨ä¸å¤ªäº†è§£é€æ˜æ¸²æŸ“çš„å·¥ä½œåŸç†ï¼Œé‚£ä¹ˆå»ºè®®é˜…è¯»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘çš„</a>é€æ˜æ¸²æŸ“<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•™ç¨‹</a> ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//properties Properties{ _Color("Color", Color) = (1,1,1,1) }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//in subshader outside of pass Tags{ "RenderType"="Transparent" "Queue"="Transparent"} Blend SrcAlpha OneMinusSrcAlpha ZWrite Off</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">fixed4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f i)</span></span></span><span class="hljs-function"> : SV_TARGET</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dist = scene(i.worldPos.xz); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distanceChange = fwidth(dist) * <span class="hljs-number"><span class="hljs-number">0.5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> antialiasedCutoff = smoothstep(distanceChange, -distanceChange, dist); fixed4 col = fixed4(_Color, antialiasedCutoff); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> col; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/86d/a08/e1c/86da08e1cfcb25212c6bf3c22dfa1dc8.gif"></div><br><h3> é«˜ç¨‹çº¿ </h3><br> å¯è§†åŒ–è·ç¦»åœºçš„å¦ä¸€ç§å¸¸ç”¨æŠ€æœ¯æ˜¯å°†è·ç¦»æ˜¾ç¤ºä¸ºçº¿ã€‚ åœ¨æˆ‘ä»¬çš„å®ç°ä¸­ï¼Œæˆ‘å°†åœ¨å®ƒä»¬ä¹‹é—´æ·»åŠ ä¸€äº›ç²—çº¿å’Œä¸€äº›ç»†çº¿ã€‚ æˆ‘è¿˜å°†ä»¥ä¸åŒçš„é¢œè‰²ç»˜åˆ¶å›¾çš„å†…éƒ¨å’Œå¤–éƒ¨ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥çœ‹åˆ°å¯¹è±¡çš„ä½ç½®ã€‚ <br><br> æˆ‘ä»¬å°†ä»æ˜¾ç¤ºå›¾çš„å†…éƒ¨å’Œå¤–éƒ¨ä¹‹é—´çš„å·®å¼‚å¼€å§‹ã€‚ å¯ä»¥åœ¨æè´¨ä¸­è‡ªå®šä¹‰é¢œè‰²ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¸ºå›¾å½¢çš„å†…éƒ¨å’Œå¤–éƒ¨é¢œè‰²æ·»åŠ æ–°å±æ€§ä»¥åŠç€è‰²å™¨å˜é‡ã€‚ <br><br><pre> <code class="cpp hljs">Properties{ _InsideColor(<span class="hljs-string"><span class="hljs-string">"Inside Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) _OutsideColor(<span class="hljs-string"><span class="hljs-string">"Outside Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) }</code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//global shader variables float4 _InsideColor; float4 _OutsideColor;</span></span></code> </pre> <br> ç„¶åï¼Œåœ¨ç‰‡æ®µç€è‰²å™¨ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥åƒç´ çš„ä½ç½®ï¼Œç„¶åé€šè¿‡ä½¿ç”¨<code>step</code>å‡½æ•°å°†è·ç¦»ä¸å¸¦æœ‰0çš„ç¬¦å·è¿›è¡Œæ¯”è¾ƒæ¥è¿›è¡Œæ¸²æŸ“ã€‚ æˆ‘ä»¬ä½¿ç”¨æ­¤å˜é‡ä»å†…éƒ¨åˆ°å¤–éƒ¨é¢œè‰²è¿›è¡Œæ’å€¼å¹¶å°†å…¶å‘ˆç°åœ¨å±å¹•ä¸Šã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">fixed4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f i)</span></span></span><span class="hljs-function"> : SV_TARGET</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dist = scene(i.worldPos.xz); fixed4 col = lerp(_InsideColor, _OutsideColor, step(<span class="hljs-number"><span class="hljs-number">0</span></span>, dist)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> col; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/989/13c/15b/98913c15b68cb3fcca4b6d1e4a3f70c0.gif"></div><br> è¦æ¸²æŸ“çº¿æ¡ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æŒ‡å®šæ¸²æŸ“çº¿æ¡çš„é¢‘ç‡ä»¥åŠçº¿æ¡çš„ç²—ç»†ï¼Œè®¾ç½®å±æ€§å’Œç›¸åº”çš„ç€è‰²å™¨å˜é‡ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//Properties _LineDistance("Mayor Line Distance", Range(0, 2)) = 1 _LineThickness("Mayor Line Thickness", Range(0, 0.1)) = 0.05</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//shader variables float _LineDistance; float _LineThickness;</span></span></code> </pre> <br> ç„¶åï¼Œä¸ºäº†ç»˜åˆ¶çº¿æ¡ï¼Œæˆ‘ä»¬å°†ä»è®¡ç®—è·ç¦»å˜åŒ–å¼€å§‹ï¼Œä»¥ä¾¿ä»¥åå¯ä»¥ä½¿ç”¨å®ƒè¿›è¡Œå¹³æ»‘ã€‚ æˆ‘ä»¬ä¹Ÿå·²ç»å°†å…¶é™¤ä»¥2ï¼Œå› ä¸ºç¨åæˆ‘ä»¬å°†å…¶ç›¸åŠ ç„¶åå‡å»ä¸€åŠä»¥è¦†ç›–1ä¸ªåƒç´ çš„å˜åŒ–è·ç¦»ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distanceChange = fwidth(dist) * <span class="hljs-number"><span class="hljs-number">0.5</span></span>;</code> </pre> <br> ç„¶åï¼Œæˆ‘ä»¬è®¡ç®—è·ç¦»å¹¶å¯¹å…¶è¿›è¡Œè½¬æ¢ï¼Œä»¥ä½¿å…¶åœ¨é‡å¤ç‚¹å¤„å…·æœ‰ç›¸åŒçš„è¡Œä¸ºã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å…¶é™¤ä»¥çº¿ä¹‹é—´çš„è·ç¦»ï¼Œè€Œåœ¨ç¬¬ä¸€æ­¥ä¸­æˆ‘ä»¬å°†ä¸ä¼šè·å¾—æ•´æ•°ï¼Œè€Œæ˜¯ä»…æ ¹æ®è®¾ç½®çš„è·ç¦»è·å¾—æ•´æ•°ã€‚ <br><br> ç„¶åæˆ‘ä»¬å°†æ•°å­—åŠ 0.5ï¼Œå–å°æ•°éƒ¨åˆ†ï¼Œç„¶åå†å‡å»0.5ã€‚ åœ¨æ­¤éœ€è¦å°æ•°éƒ¨åˆ†å’Œå‡æ³•ï¼Œä»¥ä¾¿çº¿ä»¥é‡å¤æ¨¡å¼ç©¿è¿‡é›¶ã€‚ æˆ‘ä»¬æ·»åŠ 0.5ä»¥è·å¾—å°æ•°éƒ¨åˆ†ï¼Œä»¥ä¸­å’Œ0.5çš„è¿›ä¸€æ­¥å‡æ³•-åç§»å°†å¯¼è‡´ä»¥ä¸‹äº‹å®ï¼šå›¾å½¢ä¸º0çš„å€¼ä½äº0ã€1ã€2ç­‰ï¼Œè€Œä¸æ˜¯0.5ã€1.5ï¼Œç­‰ <br><br> è½¬æ¢å€¼çš„æœ€åä¸€æ­¥-æˆ‘ä»¬å–ç»å¯¹å€¼ï¼Œç„¶åå†ä¹˜ä»¥çº¿ä¹‹é—´çš„è·ç¦»ã€‚ ç»å¯¹å€¼ä½¿ç›´çº¿çš„ç‚¹ä¹‹å‰å’Œä¹‹åçš„åŒºåŸŸä¿æŒä¸å˜ï¼Œè¿™ä½¿åˆ›å»ºç›´çº¿çš„è£å‰ªå˜å¾—æ›´åŠ å®¹æ˜“ã€‚ éœ€è¦æœ€åä¸€æ¬¡æ“ä½œï¼Œæˆ‘ä»¬å†æ¬¡å°†å€¼ä¹˜ä»¥çº¿ä¹‹é—´çš„è·ç¦»ï¼Œä»¥æŠµæ¶ˆç­‰å¼å¼€å§‹å¤„çš„é™¤æ³•ï¼Œè¿™è¦å½’åŠŸäºæ­¤ï¼Œå€¼çš„å˜åŒ–ä»ä¸å¼€å§‹å¤„ç›¸åŒï¼Œå¹¶ä¸”å…ˆå‰è®¡ç®—å‡ºçš„è·ç¦»å˜åŒ–ä»ç„¶æ­£ç¡®ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a89/db3/de9/a89db3de916eaf871c4525348272a635.png"></div><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> majorLineDistance = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(frac(dist / _LineDistance + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) - <span class="hljs-number"><span class="hljs-number">0.5</span></span>) * _LineDistance;</code> </pre> <br> ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»æ ¹æ®ä¸å›¾å½¢çš„è·ç¦»è®¡ç®—å‡ºäº†ä¸çº¿çš„è·ç¦»ï¼Œç°åœ¨å¯ä»¥ç»˜åˆ¶çº¿äº†ã€‚ æˆ‘ä»¬ä»çº¿åšåº¦å‡å»è·ç¦»å˜åŒ–çš„ä¸€åŠåˆ°çº¿åšåº¦åŠ ä¸Šè·ç¦»å˜åŒ–çš„ä¸€åŠï¼Œè¿›è¡Œäº†å¹³æ»‘è¿‡æ¸¡ï¼Œå¹¶ä½¿ç”¨åˆšè®¡ç®—å‡ºçš„çº¿è·ç¦»ä½œä¸ºæ¯”è¾ƒå€¼ã€‚ è®¡ç®—å®Œè¯¥å€¼åï¼Œæˆ‘ä»¬å°†å…¶ä¹˜ä»¥é¢œè‰²ä»¥åˆ›å»ºé»‘çº¿ï¼ˆå¦‚æœéœ€è¦å¤šè‰²çº¿ï¼Œä¹Ÿå¯ä»¥å°†å…¶æ›´æ”¹ä¸ºå…¶ä»–é¢œè‰²ï¼‰ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">fixed4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f i)</span></span></span><span class="hljs-function"> : SV_TARGET</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dist = scene(i.worldPos.xz); fixed4 col = lerp(_InsideColor, _OutsideColor, step(<span class="hljs-number"><span class="hljs-number">0</span></span>, dist)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distanceChange = fwidth(dist) * <span class="hljs-number"><span class="hljs-number">0.5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> majorLineDistance = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(frac(dist / _LineDistance + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) - <span class="hljs-number"><span class="hljs-number">0.5</span></span>) * _LineDistance; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> majorLines = smoothstep(_LineThickness - distanceChange, _LineThickness + distanceChange, majorLineDistance); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> col * majorLines; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/890/6b1/452/8906b1452c9d7a05f39b5c3070f2c547.gif"></div><br> æˆ‘ä»¬ä»¥ç›¸åŒçš„æ–¹å¼åœ¨ç²—çº¿ä¹‹é—´å®ç°ç»†çº¿-æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªå±æ€§ï¼Œè¯¥å±æ€§ç¡®å®šç²—çº¿ä¹‹é—´åº”è¯¥æœ‰å¤šå°‘æ¡ç»†çº¿ï¼Œç„¶åæˆ‘ä»¬å¯¹ç²—çº¿è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯ç”±äºç»†çº¿ä¹‹é—´çš„è·ç¦»ï¼Œæˆ‘ä»¬å°†ç²—çº¿ä¹‹é—´çš„è·ç¦»é™¤ä»¥ç²—çº¿ä¹‹é—´çš„æ•°é‡ä»–ä»¬ã€‚ æˆ‘ä»¬è¿˜å°†ä½¿ç»†çº¿çš„æ•°é‡æˆä¸º<code>IntRange</code> ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åªèƒ½åˆ†é…æ•´æ•°å€¼ï¼Œè€Œä¸ä¼šè·å¾—<code>IntRange</code>ç²—çº¿ä¸<code>IntRange</code>ç»†çº¿ã€‚ è®¡ç®—ç»†çº¿åï¼Œæˆ‘ä»¬ç”¨ä¸ç²—çº¿ç›¸åŒçš„æ–¹å¼å°†å®ƒä»¬ä¹˜ä»¥é¢œè‰²ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//properties [IntRange]_SubLines("Lines between major lines", Range(1, 10)) = 4 _SubLineThickness("Thickness of inbetween lines", Range(0, 0.05)) = 0.01</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//shader variables float _SubLines; float _SubLineThickness;</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">fixed4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">frag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(v2f i)</span></span></span><span class="hljs-function"> : SV_TARGET</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dist = scene(i.worldPos.xz); fixed4 col = lerp(_InsideColor, _OutsideColor, step(<span class="hljs-number"><span class="hljs-number">0</span></span>, dist)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distanceChange = fwidth(dist) * <span class="hljs-number"><span class="hljs-number">0.5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> majorLineDistance = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(frac(dist / _LineDistance + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) - <span class="hljs-number"><span class="hljs-number">0.5</span></span>) * _LineDistance; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> majorLines = smoothstep(_LineThickness - distanceChange, _LineThickness + distanceChange, majorLineDistance); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distanceBetweenSubLines = _LineDistance / _SubLines; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> subLineDistance = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(frac(dist / distanceBetweenSubLines + <span class="hljs-number"><span class="hljs-number">0.5</span></span>) - <span class="hljs-number"><span class="hljs-number">0.5</span></span>) * distanceBetweenSubLines; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> subLines = smoothstep(_SubLineThickness - distanceChange, _SubLineThickness + distanceChange, subLineDistance); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> col * majorLines * subLines; }</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e8c/664/bf0/e8c664bf0fb16337f77f242c4f3f5c01.gif"></div><br><h2> æºä»£ç  </h2><br><h3>  2D SDFåŠŸèƒ½ </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/034_2D_SDF/2D_SDF.cginc</a> </li></ul><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> SDF_2D #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> SDF_2D float2 rotate(float2 samplePosition, float rotation){ const float PI = 3.14159; float angle = rotation * PI * 2 * -1; float sine, cosine; sincos(angle, sine, cosine); return float2(cosine * samplePosition.x + sine * samplePosition.y, cosine * samplePosition.y - sine * samplePosition.x); } float2 translate(float2 samplePosition, float2 offset){ </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//move samplepoint in the opposite direction that we want to move shapes in return samplePosition - offset; } float2 scale(float2 samplePosition, float scale){ return samplePosition / scale; } float circle(float2 samplePosition, float radius){ //get distance from center and grow it according to radius return length(samplePosition) - radius; } float rectangle(float2 samplePosition, float2 halfSize){ float2 componentWiseEdgeDistance = abs(samplePosition) - halfSize; float outsideDistance = length(max(componentWiseEdgeDistance, 0)); float insideDistance = min(max(componentWiseEdgeDistance.x, componentWiseEdgeDistance.y), 0); return outsideDistance + insideDistance; } #endif</span></span></span></span></code> </pre> <br><h3> åœ†çš„ä¾‹å­ </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/034_2D_SDF/Circle.shader</a> </li></ul><br><pre> <code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/034_2D_SDF_Basics/Rectangle"</span></span>{ SubShader{ <span class="hljs-comment"><span class="hljs-comment">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry Tags{ "RenderType"="Opaque" "Queue"="Geometry"} Pass{ CGPROGRAM #include "UnityCG.cginc" #include "2D_SDF.cginc" #pragma vertex vert #pragma fragment frag struct appdata{ float4 vertex : POSITION; }; struct v2f{ float4 position : SV_POSITION; float4 worldPos : TEXCOORD0; }; v2f vert(appdata v){ v2f o; //calculate the position in clip space to render the object o.position = UnityObjectToClipPos(v.vertex); //calculate world position of vertex o.worldPos = mul(unity_ObjectToWorld, v.vertex); return o; } float scene(float2 position) { float2 circlePosition = position; circlePosition = rotate(circlePosition, _Time.y * 0.5); circlePosition = translate(circlePosition, float2(2, 0)); float sceneDistance = rectangle(circlePosition, float2(1, 2)); return sceneDistance; } fixed4 frag(v2f i) : SV_TARGET{ float dist = scene(i.worldPos.xz); fixed4 col = fixed4(dist, dist, dist, 1); return col; } ENDCG } } FallBack "Standard" //fallback adds a shadow pass so we get shadows on other objects }</span></span></code> </pre> <br><h3> çŸ©å½¢ç¤ºä¾‹ </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/034_2D_SDF/Rectangle.shader</a> </li></ul><br><pre> <code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/034_2D_SDF_Basics/Rectangle"</span></span>{ SubShader{ <span class="hljs-comment"><span class="hljs-comment">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry Tags{ "RenderType"="Opaque" "Queue"="Geometry"} Pass{ CGPROGRAM #include "UnityCG.cginc" #include "2D_SDF.cginc" #pragma vertex vert #pragma fragment frag struct appdata{ float4 vertex : POSITION; }; struct v2f{ float4 position : SV_POSITION; float4 worldPos : TEXCOORD0; }; v2f vert(appdata v){ v2f o; //calculate the position in clip space to render the object o.position = UnityObjectToClipPos(v.vertex); //calculate world position of vertex o.worldPos = mul(unity_ObjectToWorld, v.vertex); return o; } float scene(float2 position) { float2 circlePosition = position; circlePosition = rotate(circlePosition, _Time.y * 0.5); circlePosition = translate(circlePosition, float2(2, 0)); float sceneDistance = rectangle(circlePosition, float2(1, 2)); return sceneDistance; } fixed4 frag(v2f i) : SV_TARGET{ float dist = scene(i.worldPos.xz); fixed4 col = fixed4(dist, dist, dist, 1); return col; } ENDCG } } FallBack "Standard" //fallback adds a shadow pass so we get shadows on other objects }</span></span></code> </pre> <br><h3> æˆªæ­¢ </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/034_2D_SDF/Cutoff.shader</a> </li></ul><br><pre> <code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/034_2D_SDF_Basics/Cutoff"</span></span>{ Properties{ _Color(<span class="hljs-string"><span class="hljs-string">"Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) } SubShader{ Tags{ <span class="hljs-string"><span class="hljs-string">"RenderType"</span></span>=<span class="hljs-string"><span class="hljs-string">"Transparent"</span></span> <span class="hljs-string"><span class="hljs-string">"Queue"</span></span>=<span class="hljs-string"><span class="hljs-string">"Transparent"</span></span>} Blend SrcAlpha OneMinusSrcAlpha ZWrite Off Pass{ CGPROGRAM #include <span class="hljs-string"><span class="hljs-string">"UnityCG.cginc"</span></span> #include <span class="hljs-string"><span class="hljs-string">"2D_SDF.cginc"</span></span> #pragma vertex vert #pragma fragment frag struct appdata{ float4 vertex : POSITION; }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">v2f</span></span></span><span class="hljs-class">{</span></span> float4 position : SV_POSITION; float4 worldPos : TEXCOORD0; }; fixed3 _Color; <span class="hljs-function"><span class="hljs-function">v2f </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(appdata v)</span></span></span></span>{ v2f o; <span class="hljs-comment"><span class="hljs-comment">//calculate the position in clip space to render the object o.position = UnityObjectToClipPos(v.vertex); //calculate world position of vertex o.worldPos = mul(unity_ObjectToWorld, v.vertex); return o; } float scene(float2 position) { float2 circlePosition = position; circlePosition = rotate(circlePosition, _Time.y * 0.5); circlePosition = translate(circlePosition, float2(2, 0)); float sceneDistance = rectangle(circlePosition, float2(1, 2)); return sceneDistance; } fixed4 frag(v2f i) : SV_TARGET{ float dist = scene(i.worldPos.xz); float distanceChange = fwidth(dist) * 0.5; float antialiasedCutoff = smoothstep(distanceChange, -distanceChange, dist); fixed4 col = fixed4(_Color, antialiasedCutoff); return col; } ENDCG } } FallBack "Standard" //fallback adds a shadow pass so we get shadows on other objects }</span></span></code> </pre> <br><h3> è·ç¦»çº¿ </h3><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/ronja-tutorials/ShaderTutorials/blob/master/Assets/034_2D_SDF/DistanceLines.shader</a> </li></ul><br><pre> <code class="cpp hljs">Shader <span class="hljs-string"><span class="hljs-string">"Tutorial/034_2D_SDF_Basics/DistanceLines"</span></span>{ Properties{ _InsideColor(<span class="hljs-string"><span class="hljs-string">"Inside Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) _OutsideColor(<span class="hljs-string"><span class="hljs-string">"Outside Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) _LineDistance(<span class="hljs-string"><span class="hljs-string">"Mayor Line Distance"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>)) = <span class="hljs-number"><span class="hljs-number">1</span></span> _LineThickness(<span class="hljs-string"><span class="hljs-string">"Mayor Line Thickness"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.05</span></span> [IntRange]_SubLines(<span class="hljs-string"><span class="hljs-string">"Lines between major lines"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)) = <span class="hljs-number"><span class="hljs-number">4</span></span> _SubLineThickness(<span class="hljs-string"><span class="hljs-string">"Thickness of inbetween lines"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.05</span></span>)) = <span class="hljs-number"><span class="hljs-number">0.01</span></span> } SubShader{ <span class="hljs-comment"><span class="hljs-comment">//the material is completely non-transparent and is rendered at the same time as the other opaque geometry Tags{ "RenderType"="Opaque" "Queue"="Geometry"} Pass{ CGPROGRAM #include "UnityCG.cginc" #include "2D_SDF.cginc" #pragma vertex vert #pragma fragment frag struct appdata{ float4 vertex : POSITION; }; struct v2f{ float4 position : SV_POSITION; float4 worldPos : TEXCOORD0; }; v2f vert(appdata v){ v2f o; //calculate the position in clip space to render the object o.position = UnityObjectToClipPos(v.vertex); //calculate world position of vertex o.worldPos = mul(unity_ObjectToWorld, v.vertex); return o; } float scene(float2 position) { float2 circlePosition = position; circlePosition = rotate(circlePosition, _Time.y * 0.2); circlePosition = translate(circlePosition, float2(2, 0)); float sceneDistance = rectangle(circlePosition, float2(1, 2)); return sceneDistance; } float4 _InsideColor; float4 _OutsideColor; float _LineDistance; float _LineThickness; float _SubLines; float _SubLineThickness; fixed4 frag(v2f i) : SV_TARGET{ float dist = scene(i.worldPos.xz); fixed4 col = lerp(_InsideColor, _OutsideColor, step(0, dist)); float distanceChange = fwidth(dist) * 0.5; float majorLineDistance = abs(frac(dist / _LineDistance + 0.5) - 0.5) * _LineDistance; float majorLines = smoothstep(_LineThickness - distanceChange, _LineThickness + distanceChange, majorLineDistance); float distanceBetweenSubLines = _LineDistance / _SubLines; float subLineDistance = abs(frac(dist / distanceBetweenSubLines + 0.5) - 0.5) * distanceBetweenSubLines; float subLines = smoothstep(_SubLineThickness - distanceChange, _SubLineThickness + distanceChange, subLineDistance); return col * majorLines * subLines; } ENDCG } } FallBack "Standard" //fallback adds a shadow pass so we get shadows on other objects }</span></span></code> </pre> <br> æˆ‘å¸Œæœ›æˆ‘è®¾æ³•ç”¨ä¸€ä¸ªç¬¦å·è§£é‡Šè·ç¦»å­—æ®µçš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶ä¸”æ‚¨å·²ç»åœ¨ç­‰å¾…ä¸€äº›æ–°çš„æ•™ç¨‹ï¼Œåœ¨è¿™äº›æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†è®¨è®ºå…¶ä»–ä½¿ç”¨å®ƒä»¬çš„æ–¹æ³•ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438316/">https://habr.com/ru/post/zh-CN438316/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438304/index.html">åˆ†åŒ…ï¼Ÿ é…·ä½ å‘½ä¸­</a></li>
<li><a href="../zh-CN438306/index.html">è¾å°„ï¼šå¹³æ—¥æ”¾å°„åŒ–å­¦å®éªŒå®¤</a></li>
<li><a href="../zh-CN438310/index.html">Instagramä½¿ç”¨æœºå™¨å­¦ä¹ åˆ é™¤å‡ç²‰ä¸</a></li>
<li><a href="../zh-CN438312/index.html">ä½¿ç”¨Ansibleçš„ç½‘ç»œè‡ªåŠ¨åŒ–ï¼šå‘½ä»¤æ¨¡å—</a></li>
<li><a href="../zh-CN438314/index.html">1. Check Point Maestroè¶…å¤§è§„æ¨¡ç½‘ç»œå®‰å…¨æ€§-ä¸€ç§æ–°çš„å¯æ‰©å±•å®‰å…¨æ€§å¹³å°</a></li>
<li><a href="../zh-CN438318/index.html">å¦‚ä½•æŒæ¡å¼‚æ­¥/ç­‰å¾…è¯­æ³•ï¼šä¸€ä¸ªçœŸå®çš„ä¾‹å­</a></li>
<li><a href="../zh-CN438320/index.html">æ•™å­©å­ç¼–ç¨‹</a></li>
<li><a href="../zh-CN438322/index.html">VSaaS 2025ï¼šæœªæ¥çš„CCTVæŠ€æœ¯</a></li>
<li><a href="../zh-CN438326/index.html">ä¿„ç½—æ–¯çš„5Gï¼šä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿå®ƒçš„ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿä½•æ—¶å‡ºç°ï¼Ÿ ç®€è¦ä»‹ç»ä¸»è¦å†…å®¹</a></li>
<li><a href="../zh-CN438328/index.html">ç¨‹åºå‘˜çš„è–ªèµ„æ³¡æ²«å¦‚ä½•è†¨èƒ€ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>