<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✊🏼 🧑🏿‍🤝‍🧑🏿 🔧 Lire des médias à l'aide de la bibliothèque VLCj 👰🏼 🔐 👰🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Contexte 
 (vous pouvez sauter immédiatement et passer à l'élément suivant) 

 En apprenant Java, immédiatement après avoir maîtrisé le swing, il est ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lire des médias à l'aide de la bibliothèque VLCj</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434126/"><h3>  Contexte </h3><br>  (vous pouvez sauter immédiatement et passer à l'élément suivant) <br><br>  En apprenant Java, immédiatement après avoir maîtrisé le swing, il est devenu intéressant: «Mais comment lire de l'audio ou de la vidéo?».  J'ai fouillé pendant longtemps sur Google, y creusé plusieurs bibliothèques qui, en théorie, devraient me donner exactement ce que je veux.  Mais comme la pratique l'a montré, la plupart de ces bibliothèques lisent un très petit nombre de formats et ne sont pas très pratiques à utiliser.  Après avoir fouillé quelques jours, j'ai finalement trouvé quelque chose qui, en théorie, devrait m'aider à résoudre le problème.  La bibliothèque VLCj prend les codecs du lecteur multimédia VLC et lit les fichiers avec eux.  Un autre jour de souffrance avec un tutoriel sur le site officiel et finalement réussi à démarrer la lecture du fichier vidéo dans JFrame. <br><a name="habracut"></a><br><h3>  Passons aux choses sérieuses: </h3><br>  1. Téléchargez la bibliothèque elle-même (il vaut mieux prendre la dernière version, car elle a des problèmes de compatibilité) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> <br><br>  2. Si vous n'avez pas encore installé le lecteur multimédia VLC, vous devrez le télécharger et l'installer.  Vous pouvez le télécharger sur le site officiel de VideoLan (il vaut mieux prendre la dernière version, il contient plus de codecs). <br><br>  3. IDE, j'utilise Eclipse. <br><cut><br>  Créez d'abord un nouveau projet et nommez-le, par exemple, «MediaPlayer». <br><br>  Ouvrez maintenant le dossier MediaPlayer dans votre espace de travail Eclipse et décompressez l'archive téléchargée avec la bibliothèque dans ce dossier. <br><br>  Plus loin dans Eclipse, dans les paramètres de votre projet, cliquez sur «Ajouter des fichiers JAR externes» et dans la fenêtre qui s'ouvre, recherchez et sélectionnez le fichier vlcj-3.0.1.jar.  Choisissez <b>LUI ET LUI SEULEMENT</b> . <br><br>  La bibliothèque était donc connectée au projet.  Ensuite, nous devons créer une instance de la classe.  Par exemple, créez Test.java (j'espère que ce processus n'a besoin d'être expliqué à personne). <br><br>  Nous avons obtenu une classe vide avec approximativement le contenu suivant: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre> <br>  Ensuite, nous devons créer un JFrame dans lequel nous voulons afficher notre vidéo.  Nous créons également un JPanel et y mettons le Canvas, que nous utilisons comme surface pour notre lecteur vidéo. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ JFrame f=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JFrame(); f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); f.setVisible(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); f.setBounds(<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">1000</span></span>,<span class="hljs-number"><span class="hljs-number">600</span></span>); Canvas c=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Canvas(); c.setBackground(Color.black); JPanel p=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JPanel(); p.setLayout(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BorderLayout()); p.add(c); f.add(p); } }</code> </pre> <br>  Ainsi, la partie visuelle est prête.  Ensuite, nous nous tournons directement vers la bibliothèque et le lecteur VLC.  Et en fait, créez le joueur lui-même dans notre cadre. <br><br><pre> <code class="java hljs">NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), <span class="hljs-string"><span class="hljs-string">"C:\\Program Files\VideoLAN\VLC"</span></span>); Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class); MediaPlayerFactory mpf= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaPlayerFactory(); EmbeddedMediaPlayer emp= mpf.newEmbeddedMediaPlayer(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Win32FullScreenStrategy(f)); emp.setVideoSurface(mpf.newVideoSurface(c)); emp.setEnableMouseInputHandling(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); emp.setEnableKeyInputHandling(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); String file=<span class="hljs-string"><span class="hljs-string">"C:\\Users\Admin\eclipse-workspace\MediaPlayer/video.avi"</span></span>; emp.prepareMedia(file); emp.play();</code> </pre> <br>  Ici, nous avons indiqué le chemin vers le lecteur VLC (plus spécifiquement, les fichiers libvlc.dll, libvlccore.dll et le dossier plugins).  Nous avons créé un lecteur multimédia avancé (il a un plus grand ensemble de capacités qu'un simple "lecteur multimédia"), lui avons attribué une surface, indiqué le chemin d'accès au fichier vidéo, préparé le fichier pour la lecture et effectivement lu. <br><br>  Par conséquent, votre code ressemblera à ceci: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.BorderLayout; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.Canvas; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.Color; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.swing.JFrame; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.swing.JPanel; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.sun.jna.Native; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.sun.jna.NativeLibrary; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.binding.LibVlc; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.player.MediaPlayerFactory; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.player.embedded.EmbeddedMediaPlayer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.player.embedded.windows.Win32FullScreenStrategy; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.runtime.RuntimeUtil; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ JFrame f=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JFrame(); f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); f.setVisible(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); f.setBounds(<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">1000</span></span>,<span class="hljs-number"><span class="hljs-number">600</span></span>); Canvas c=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Canvas(); c.setBackground(Color.black); JPanel p=<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JPanel(); p.setLayout(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BorderLayout()); p.add(c); f.add(p); NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), <span class="hljs-string"><span class="hljs-string">"C:\\Program Files/VideoLAN/VLC"</span></span>); Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class); MediaPlayerFactory mpf= <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MediaPlayerFactory(); EmbeddedMediaPlayer emp= mpf.newEmbeddedMediaPlayer(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Win32FullScreenStrategy(f)); emp.setVideoSurface(mpf.newVideoSurface(c)); emp.setEnableMouseInputHandling(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); emp.setEnableKeyInputHandling(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); String file=<span class="hljs-string"><span class="hljs-string">"C:\\Users\Admin\eclipse-workspace\MediaPlayer/video.avi"</span></span>; emp.prepareMedia(file); emp.play(); } }</code> </pre> <br>  Gardez à l'esprit que: <br>  - Votre chemin vers le lecteur multimédia VLC peut différer. <br>  - Le chemin d'accès à votre vidéo peut varier. <br><br>  Pour plus de commodité, vous pouvez copier les fichiers nécessaires du lecteur multimédia VLC vers votre projet.  Cela élimine également la nécessité d'installer VLC sur les ordinateurs sur lesquels votre programme fonctionnera. <br><br>  Au début, j'ai eu du mal à lire des fichiers dont le nom ou le chemin d'accès est cyrillique.  Si vous rencontrez les mêmes difficultés, faites un clic droit sur votre instance de classe et allez dans ses paramètres et changez son encodage en UTF-8 </cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434126/">https://habr.com/ru/post/fr434126/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434116/index.html">L'histoire de la facilité scandaleuse de pirater l'infrastructure de développement de logiciels modernes</a></li>
<li><a href="../fr434118/index.html">Tutoriel React, partie 4: Composants parents et enfants</a></li>
<li><a href="../fr434120/index.html">Tutoriel React, Partie 5: Premiers pas avec une application TODO, style de base</a></li>
<li><a href="../fr434122/index.html">Scénario - Pas un objet de page</a></li>
<li><a href="../fr434124/index.html">Activez l'accélération GPU dans Photoshop sous Wine</a></li>
<li><a href="../fr434128/index.html">PHP Digest n ° 146 (10-24 décembre 2018) + Résultats 2018</a></li>
<li><a href="../fr434130/index.html">Interface réactive. Conférence d'Artyom Belov à FrontTalks 2018</a></li>
<li><a href="../fr434132/index.html">Achetez un téléviseur et roulez-le: LG prévoit de commencer à vendre des téléviseurs flexibles dans l'année à venir</a></li>
<li><a href="../fr434134/index.html">Analyse des résultats de l'enquête Kaggle ML & DS 2018</a></li>
<li><a href="../fr434136/index.html">Anatomie d'entreprise</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>