<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍⚕️ 🕢 🌗 Kein dummes Büro 🌙 💘 🕵🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich würde es niemals wagen, einen Artikel über die nächste Implementierung eines Smart Homes mit dem Anschluss von Sensoren für Wasserlecks im Badezim...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kein dummes Büro</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/391399/"><img src="https://habrastorage.org/files/0dd/7a2/355/0dd7a23553144b86ab85d90d2b064823.jpg" align="left" width="255" height="189"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich würde es niemals wagen, einen Artikel über die nächste Implementierung eines Smart Homes mit dem Anschluss von Sensoren für Wasserlecks im Badezimmer und Tracking-Systemen für Katzentricks in der Wohnung zu schreiben. Gott sei Dank ist die Katze unter der Kontrolle eines Hundes, das Wasser scheint auch nicht zu fließen. Trotzdem arbeiten wir mehr in verschiedenen Büros, in denen es nicht immer möglich ist, ein optimales Arbeitsumfeld zu schaffen. Der Artikel widmet sich dem Umweltüberwachungssystem des Arbeitsbereichs im Büro und den Aktivitäten, die wir nach einem Monat (überraschend) stabiler Arbeit durchgeführt haben. Natürlich senden wir alle Daten in die Clouds, betrachten sie von unseren Smartphones aus, es gibt keinen Nutzen, aber es gibt keinen Grund, sich mit Verwandten und Freunden zu rühmen, und das Büro ist komfortabler geworden. Alles ist auf ESP8266 implementiert, aber wie - Sie sind unter cat willkommen)</font></font><br>
<br>
<a name="habracut"></a><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wo ist der Monitor? </font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde nicht sagen, dass wir direkt unter unerträglichen Bedingungen arbeiten. </font><font style="vertical-align: inherit;">Die Büros in der Firma sind wunderbar, in Räumen von drei Personen, viele Blumen. </font><font style="vertical-align: inherit;">Das Gebäude selbst ist von Wald umgeben. </font><font style="vertical-align: inherit;">Im Allgemeinen wird ein Panorama des Büros beigefügt, in dem das Überwachungssystem bereitgestellt wird. </font></font><br>
<img src="https://habrastorage.org/files/984/d35/3ac/984d353ace384c1eae1e75d112a56c4c.jpg"> <br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was ist Überwachung? </font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nichts Originelles. </font><font style="vertical-align: inherit;">Wir entfernen die Temperatur im Büro, Luftfeuchtigkeit, Druck und CO2-Gehalt. </font><font style="vertical-align: inherit;">Natürlich wurde dem System ein Lichtsensor hinzugefügt. </font><font style="vertical-align: inherit;">Das Beleuchtungsniveau von Arbeitsplätzen unterliegt sogar der Kontrolle und sollte in unserem Fall zwischen 300 und 400 Lux liegen. </font><font style="vertical-align: inherit;">Vielleicht ist dies der wichtigste Parameter für komfortables Arbeiten. </font><font style="vertical-align: inherit;">Und das dynamischste während des Tages.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3e1/150/cbc/3e1150cbc42247ad859b2faf45845c6b.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir erhalten Temperatur und Luftfeuchtigkeit vom DHT22-Sensor. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sensors.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/e10/371/788/e10371788d6747288bed75aebce84343.jpg" width="301" height="247"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir nehmen Druck vom BMP180-Sensor. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sensors.</font></font><div style="text-align:center;"><img src="https://habrastorage.org/files/26e/126/3d0/26e1263d0df142ec90551d66818d3226.jpg" width="225" height="230"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der CO2-Gehalt wird vom optischen Sensor MH-Z14 überwacht. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beschreibung des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sensors.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/25c/952/171/25c952171b2449b7b1560bafcec9bfbe.jpg" width="260" height="250"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, der TSL2561-Sensor in Form eines Typenschilds für die Arduino GROVE-Serie überwacht die Lichtqualität. </font><font style="vertical-align: inherit;">Beschreibung </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/293/d8a/b9c/293d8ab9c5fd451fa9c835ca64bd1b5a.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und schließlich steuert der ESP8266-Controller in Form eines Taschentuchs für das Rapid Prototyping von NodeMcu (mit dem Namen der Firmware), das in meinem Fall von der Standard-Arduino-IDE geflasht wird, alles. </font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/ca4/d7c/47d/ca4d7c47d81a42f1b70252f2d1b0992f.jpg" width="320" height="220"></div><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir sammeln die Box-Version</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Also sind alle Sensoren auf dem Tisch ausgelegt - es ist Zeit, das Gerät zusammenzubauen. </font><font style="vertical-align: inherit;">Zunächst werden wir jedoch einige Feinheiten analysieren. </font><font style="vertical-align: inherit;">Zur Verdeutlichung ein schematisches Diagramm skizziert.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/005/e9a/9aa/005e9a9aa1664c72aad7be7822bd1f32.jpg"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier werden alle Sensoren mit +3,3 V betrieben, was wir von der NodeMcu-Karte nehmen werden, da bereits drei davon auf der Karte sind. Der Kohlendioxidsensor muss jedoch separat mit Strom versorgt werden, er benötigt 4 bis 6 Volt Strom, und der Hersteller empfiehlt dringend, dies besonders zu beachten. Da ich vorhabe, das Gerät über + 5V von einem separaten Netzteil mit Strom zu versorgen, treten keine Probleme auf. Wir versorgen Klemme 1 des MH-Z14-Sensors mit Strom (oder 15, da sie doppelt vorhanden sind). Wenn Sie den Sensor für ein paar Minuten einschalten, wird beim Senden über die TX / RX-Leitung kein Müll an den Port ausgegeben. Daher nehme ich das nützliche Signal von diesem Sensor vom PWM-Ausgang auf der 6. Etappe. Im Allgemeinen hat mir dieser Sensor gefallen. Es ist ziemlich stabil, hat einen digitalen und einen analogen Ausgang, kann aber nur mit Mikrocontrollern mit Drei-Volt-Logik arbeiten. Führen Sie es beispielsweise auf UNO ohne aus</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tanzen mit Tamburinen</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Koordination der logischen Ebenen wird nicht funktionieren. In unserem Fall läuft das ESP wie alle anderen Sensoren mit Drei-Volt-Logik. Gleichzeitig ist das ESP selbst in Bezug auf die Stromqualität besonders wählerisch, aber auf der Karte, die ich in diesem Artikel verwendet habe, ist das normale Schema zur Stabilisierung der Eingangsleistung auf +3,3 V zusammengestellt, aber ich würde nicht empfehlen, die Karte von zweifelhaften IPs zu speisen, und würde es überhaupt nicht geben wäre mehr als 5 Volt. Wir werden auch keine vollständig zusammengebaute Schaltung debuggen und sie nur über einen USB-Anschluss mit Strom versorgen. Da der Kohlendioxidsensor aufgrund des Vorhandenseins einer Glühbirne (wahrscheinlich als IR-Quelle) in seinem Design einen hohen Verbrauch hat, kann dies den Anschluss drücken. Brauchen wir es?). Daher füllen wir die Firmware mit dem mitgelieferten Netzteil eines Drittanbieters oder über USB aus, trennen jedoch den Kohlendioxidsensor.</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist nicht ohne Lötkolben ...</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Wie Sie dem Diagramm entnehmen können, verwende ich zwei Sensoren an der i2c-Leitung. </font><font style="vertical-align: inherit;">Dies ist ein Drucksensor und ein Lichtsensor. </font><font style="vertical-align: inherit;">Wie Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wissen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , können Sie an einem seriellen Bus bis zu 127 Sensoren und Geräte aller Art "aufhängen". </font><font style="vertical-align: inherit;">Bei der Implementierung des Protokolls sollten die SDA / SCL-Leitungen nur einmal mit Strom versorgt werden. </font><font style="vertical-align: inherit;">Und wenn wir N Sensoren aufhängen, in denen sich jeweils Klammern befinden, können Sie eine Linie pflanzen. </font><font style="vertical-align: inherit;">Wahrscheinlich wäre mit den beiden Sensoren nichts passiert - aber ich bin immer konsequent im Design. </font><font style="vertical-align: inherit;">Es sollte keinen Zahn geben - sorry ... Deshalb werden wir die Pull-up-Widerstände in einem der Sensoren los. </font><font style="vertical-align: inherit;">Es war bequemer, die Widerstände aus dem Drucksensor herauszureißen. </font><font style="vertical-align: inherit;">Die Abbildung zeigt.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/606/4b0/ef3/6064b0ef37ef4f2dbcbcfba329f13b12.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach all diesen Übungen sammeln wir unsere Box-Version. </font><font style="vertical-align: inherit;">In einer Papierbox)</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/d60/a52/e23/d60a52e239a941a7b1c143d0d4c2568a.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was überrascht - es hat sofort funktioniert. </font><font style="vertical-align: inherit;">Das ist nicht gut, aber trotzdem. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir verdauen Daten.</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Die Ideologie ist also diese. </font><font style="vertical-align: inherit;">Wir sammeln Daten von Sensoren und legen sie beispielsweise alle 10 Minuten über Office-WLAN im Cloud-Speicher ab. </font><font style="vertical-align: inherit;">Wir erstellen wunderschöne Grafiken und analysieren die Ergebnisse von Thingspeak.com. </font><font style="vertical-align: inherit;">Der Service ist kostenlos, ziemlich stabil und leicht zu verstehen. </font><font style="vertical-align: inherit;">Über ihn viele </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geschrieben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Wir registrieren den Kanal, erhalten den API-Schlüssel und setzen die Daten von allen Sensoren mithilfe der POST-Methode zurück.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmcode</font></font></b><div class="spoiler_text"><pre><code class="plaintext hljs">//    ,     <font></font>
#include &lt;Wire.h&gt;<font></font>
#include &lt;ESP8266WiFi.h&gt; //     ,    <font></font>
float index_comfort=0; //   <font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//   ,    <font></font>
//   <font></font>
#include "DHT.h"<font></font>
#define DHTTYPE DHT22  //   - Grove DHT22<font></font>
#define DHTPIN 14     //  14  ESP (   D5)  . <font></font>
<font></font>
//       <font></font>
float humidity_room = 0.0; //     <font></font>
//  humidity_room = dht.readHumidity();<font></font>
float temp_room = 0.0; //     <font></font>
//  temp_room = dht.readTemperature();<font></font>
<font></font>
//    .     <font></font>
//     <font></font>
DHT dht(DHTPIN, DHTTYPE);<font></font>
<font></font>
//++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//     <font></font>
#include &lt;Digital_Light_TSL2561.h&gt;<font></font>
//      <font></font>
float light_room=0.0;<font></font>
//  light_room=TSL2561.readVisibleLux();<font></font>
<font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//  C02  <font></font>
int CO2; //     <font></font>
int pin_CO2 = 13; //  13,   7 <font></font>
//  2<font></font>
<font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//    . <font></font>
#include &lt;Adafruit_BMP085.h&gt;<font></font>
Adafruit_BMP085 bmp;<font></font>
float pressure =0.0; //   <font></font>
//  pressure=bmp.readPressure(); <font></font>
//   !<font></font>
// 1013.25 millibar = 101325  = 760  ..   ? ...<font></font>
//      ,  <font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//        -<font></font>
//     thingspeak.com , , ..,  <font></font>
#define myPeriodic 300; //        <font></font>
const char* server = "184.106.153.149"; //   thingspeak.com<font></font>
<font></font>
String apiKey ="1K******************GM"; //   <font></font>
<font></font>
const char* MY_SSID = "P********x"; //  Wi-Fi  <font></font>
const char* MY_PWD = ""; //  ,    ,  ""<font></font>
<font></font>
int sent = 0; //   ()  .  ?  ,  ...<font></font>
<font></font>
//++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//    ,  <font></font>
<font></font>
void setup() {<font></font>
  Serial.begin(9600); //    <font></font>
 <font></font>
  Serial.println("Go! Go! Go!");<font></font>
  <font></font>
  Wire.begin(); <font></font>
 <font></font>
  dht.begin(); //    <font></font>
 <font></font>
  TSL2561.init(); //    <font></font>
 <font></font>
  pinMode(pin_CO2, INPUT); //    CO2  <font></font>
 <font></font>
  //   <font></font>
 if (!bmp.begin()) {<font></font>
 Serial.println("Promlem with sensor bmp180!");<font></font>
  while (1) {}<font></font>
  }<font></font>
  //  wi-Fi<font></font>
 connectWifi();<font></font>
}<font></font>
<font></font>
//++++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//       <font></font>
void connectWifi() <font></font>
{<font></font>
  Serial.print("Connecting to "+*MY_SSID);<font></font>
 WiFi.begin(MY_SSID, MY_PWD);<font></font>
 while (WiFi.status() != WL_CONNECTED) {<font></font>
  delay(1000);<font></font>
 Serial.print(".");<font></font>
  }<font></font>
  <font></font>
 Serial.println("");<font></font>
 Serial.println("Connected");<font></font>
 Serial.println(""); <font></font>
  Serial.print("SSID: ");<font></font>
  Serial.println(WiFi.SSID());<font></font>
<font></font>
  //   <font></font>
  IPAddress ip = WiFi.localIP();<font></font>
  Serial.print("IP Address: ");<font></font>
  Serial.println(ip);<font></font>
<font></font>
  //    <font></font>
  long rssi = WiFi.RSSI();<font></font>
  Serial.print("signal strength (RSSI):");<font></font>
  Serial.print(rssi);<font></font>
  Serial.println(" dBm"); <font></font>
}//end connect<font></font>
<font></font>
//++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
//    <font></font>
void send_info(float temp_in, float temp_out, float humidity_in, int CO2_in, float light_in, float pressure_all )<font></font>
{  <font></font>
  WiFiClient client;<font></font>
  <font></font>
   if (client.connect(server, 80)) { // use ip 184.106.153.149 or api.thingspeak.com<font></font>
   Serial.println("WiFi Client connected ");<font></font>
   <font></font>
   //        <font></font>
   String postStr = apiKey; //  <font></font>
   postStr += "&amp;field1=";<font></font>
   postStr += String(temp_in); //    <font></font>
<font></font>
   postStr += "&amp;field2=";<font></font>
   postStr += String(temp_out); //   <font></font>
<font></font>
   postStr += "&amp;field3=";<font></font>
   postStr += String(humidity_in); //    <font></font>
<font></font>
   postStr += "&amp;field4=";<font></font>
   postStr += String(CO2_in); // 2   <font></font>
<font></font>
   postStr += "&amp;field5=";<font></font>
   postStr += String(light_in); //    <font></font>
<font></font>
   postStr += "&amp;field6=";<font></font>
   postStr += String(pressure_all); //   <font></font>
   <font></font>
   postStr += "\r\n\r\n"; //    <font></font>
   <font></font>
   client.print("POST /update HTTP/1.1\n");<font></font>
   client.print("Host: api.thingspeak.com\n");<font></font>
   client.print("Connection: close\n");<font></font>
   client.print("X-THINGSPEAKAPIKEY: " + apiKey + "\n");<font></font>
   client.print("Content-Type: application/x-www-form-urlencoded\n");<font></font>
   client.print("Content-Length: ");<font></font>
   client.print(postStr.length());<font></font>
   client.print("\n\n");<font></font>
   client.print(postStr);<font></font>
   delay(1000);  <font></font>
   }//end if<font></font>
   sent++; //   <font></font>
  <font></font>
 client.stop();<font></font>
 Serial.println("transmition closed ");<font></font>
}//end send<font></font>
<font></font>
<font></font>
//+++++++++++++++++++++++++++++++++++++++++++++++++++++<font></font>
<font></font>
//    ,   ? <font></font>
<font></font>
void loop()<font></font>
{<font></font>
 delay(5000);<font></font>
 // <font></font>
 dht.begin();<font></font>
 humidity_room = dht.readHumidity();<font></font>
delay(500);<font></font>
<font></font>
//   <font></font>
 temp_room = dht.readTemperature();<font></font>
delay(500);<font></font>
<font></font>
//   <font></font>
light_room=TSL2561.readVisibleLux();<font></font>
delay(500);<font></font>
<font></font>
<font></font>
// CO2  <font></font>
 while(digitalRead(pin_CO2)==HIGH){;}<font></font>
float duration_h = pulseIn(pin_CO2,HIGH)/1000;<font></font>
 <font></font>
 CO2= int(5000*(duration_h-2)/(duration_h+(1004-duration_h)-4)); //   <font></font>
 delay(500);<font></font>
<font></font>
//  <font></font>
bmp.begin();<font></font>
pressure=bmp.readPressure(); <font></font>
pressure=int((pressure/101325)*760);<font></font>
delay(500);<font></font>
<font></font>
//    <font></font>
if (temp_room&lt;18) {<font></font>
  index_comfort=(2*light_room/300)+(400/CO2)+humidity_room/40;<font></font>
  }<font></font>
<font></font>
if (temp_room&gt;25) {<font></font>
  index_comfort=(2*light_room/300)+(400/CO2)+humidity_room/40;<font></font>
  }<font></font>
<font></font>
  index_comfort=1+(2*(light_room/300)+(400/CO2)+humidity_room/40);<font></font>
<font></font>
  if (index_comfort&gt;5){<font></font>
    index_comfort=5;<font></font>
    }<font></font>
  <font></font>
//    <font></font>
send_info(temp_room, index_comfort, humidity_room, CO2, light_room, pressure);<font></font>
  <font></font>
  //.      <font></font>
  int count = myPeriodic;<font></font>
  while(count--)<font></font>
  delay(1000);<font></font>
<font></font>
  // ,  .   ...<font></font>
  // , <font></font>
  //<font></font>
  //       i2c    ,   <font></font>
  // .     . <font></font>
  //     .  .    <font></font>
  //  ,   .    ,   . <font></font>
  //     ,  DHT22,    . <font></font>
  // --,     ... <font></font>
  // 15  2016 .    <font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn alles richtig funktioniert, wird es so etwas sein)</font></font></b><div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/files/a16/19c/b2d/a1619cb2dc4342e48c4b02734610fc5b.jpg"></div><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit dies funktioniert, benötigen Sie Bibliotheken für die Arbeit mit ausgewählten Sensoren und eine Bibliothek für die Arbeit mit ESP8266 über WLAN. Sie müssen auch die NodeMcu-Karte zur Liste der Arduino IDE-Karten hinzufügen. Damit der Computer sie sehen kann, benötigen Sie einen USB-SERIAL CH340-Treiber, der problemlos im Netzwerk zu finden und herunterzuladen ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bibliothek für ESP8266 </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laden Sie die</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bibliothek für die Arbeit mit einem Feuchtigkeitssensor </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">herunter</font></a><font style="vertical-align: inherit;"> . </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laden Sie die</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bibliothek </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">herunter,</font></a><font style="vertical-align: inherit;"> um mit dem Lichtsensor zu arbeiten. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Laden Sie die</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Bibliothek </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">herunter,</font></a><font style="vertical-align: inherit;"> um mit einem Drucksensor zu arbeiten. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Download</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Der CO2-Sensor benötigt keine Bibliotheken. Die Anzeigen werden anhand der Dauer des von PWM kommenden Impulsausgangs berechnet und anhand der Formel aus der </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;">Beschreibung</font></a><font style="vertical-align: inherit;"> berechnet</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensor. </font><font style="vertical-align: inherit;">Der Messbereich beträgt übrigens nicht 2000 ppm, sondern 5000 ppm, was übrigens auch vom Benutzer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hellsy22</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> in einem kürzlich erschienenen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> über einen ähnlichen Kohlendioxidsensor geschrieben wurde. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisatorische Schlussfolgerungen</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
1. Arbeiten </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Das Handwerk ist es wert, aus einer Schachtel Papier in ein anständiges Gebäude zu ziehen.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hier ist es. </font><font style="vertical-align: inherit;">Es wird wie eine Ampel sein, um den Komfort im Büro zu zeigen.</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/907/3a4/e47/9073a4e47fc247bfa7c88341594f2fbf.jpg"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. Abends ist nicht viel Licht im Büro - sie haben ein paar Deckenleuchten hinzugefügt. Es wurde besser. 350 lx </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Die Putzfrau arbeitet wirklich. Kommt früh am Morgen, macht das Licht an, die Nassreinigung sorgt für eine halbe Stunde Feuchtigkeitsschub im Büro. Nicht viel, aber dennoch ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Nach zwei Stunden Arbeit (drei Personen atmen schwer) im Büro sinkt der CO2-Gehalt. Fünf Minuten Lüften korrigieren die Situation auf den Normalwert (500 ppm). Kombinieren Sie (falls gewünscht) Lüften mit Gymnastik)))</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6. Sehr trocken. </font><font style="vertical-align: inherit;">Das Heizen im Winter ist natürlich der direkte Grund. </font><font style="vertical-align: inherit;">Es ist nicht möglich, eine angenehme Luftfeuchtigkeit von 40-50% zu erreichen. </font><font style="vertical-align: inherit;">Blumen im Büro geben der Luftfeuchtigkeit jedoch im Vergleich zu einem ähnlichen Raum ohne Blumen einen Plus von 10 Prozent. </font><font style="vertical-align: inherit;">Vergessen Sie natürlich nicht, sie zu gießen. </font><font style="vertical-align: inherit;">Übrigens braucht man 10-12 Liter Wasser, um die Blumen zu gießen. </font><font style="vertical-align: inherit;">Das Büro hat 13 Blumentöpfe. </font><font style="vertical-align: inherit;">Zweimal pro Woche gießen. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7. Der Nutzen davon in allem ist offen gesagt nicht genug. </font><font style="vertical-align: inherit;">Zum Beispiel wären solche Systeme für Schulklassen oder eine Klinik wahrscheinlich nützlicher.</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ct/sl/yg/ctslygn5rw0wym3aqglkzwvrcoe.jpeg"></div></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de391399/">https://habr.com/ru/post/de391399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de391385/index.html">Erste Tour durch das Hauptquartier von Blue Origin</a></li>
<li><a href="../de391387/index.html">Warum ist das Sonnensystem flach? [Voiceover Vert Dider]</a></li>
<li><a href="../de391389/index.html">Ein glücklicher Mann, der es geschafft hat, all seine Träume und Pläne zu verwirklichen. Admiral Ingenieur und Akademiker A.I. Berg und Ki Berg Netika</a></li>
<li><a href="../de391393/index.html">Falscher Honig: Der französische Imker hat gelernt, wie man Hanfhonig macht</a></li>
<li><a href="../de391395/index.html">PCB Lineal. Die Linie von Amateurfunk und Crowdfunding in Vkontakte</a></li>
<li><a href="../de391401/index.html">HackerQuest v0.97: Questraum des Schwierigkeitsgrades "Nightmare"</a></li>
<li><a href="../de391403/index.html">Drahtloser Witz. Übersicht über das ESP-8266 Witty-Modul</a></li>
<li><a href="../de391407/index.html">World Drone Prix Supercup Super Cup: Preispool von 1 Million US-Dollar</a></li>
<li><a href="../de391409/index.html">Dawn Probe studiert Ceres ein Jahr lang: interessante Entdeckungen und neue Rätsel</a></li>
<li><a href="../de391413/index.html">Musikvisualisierung des 21. Jahrhunderts: Von der Animusik zur Spieluhr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>