<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí∞ üë±üèø üéÄ Explora√ß√£o do shader de areia do jogo Journey üëÉüèø üë©üèº‚Äçüåæ üë©‚Äçüë©‚Äçüëß‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entre os muitos jogos independentes lan√ßados nos √∫ltimos 10 anos, um dos meus favoritos √© definitivamente o Journey . Gra√ßas √† sua est√©tica deslumbran...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Explora√ß√£o do shader de areia do jogo Journey</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476448/">  Entre os muitos jogos independentes lan√ßados nos √∫ltimos 10 anos, um dos meus favoritos √© definitivamente o <em>Journey</em> .  Gra√ßas √† sua est√©tica deslumbrante e bela trilha sonora, o <em>Journey</em> se tornou um exemplo de excel√™ncia em quase todos os aspectos do desenvolvimento. <br><br>  Sou desenvolvedor de jogos e artista t√©cnico, por isso fiquei muito intrigado com a maneira como a areia foi renderizada.  N√£o √© apenas bonito, mas tamb√©m diretamente relacionado √† jogabilidade b√°sica e √† jogabilidade como um todo.  <em>A jornada</em> √© literalmente constru√≠da de areia e, sem um efeito t√£o surpreendente, o jogo em si simplesmente n√£o poderia existir. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/63f/be0/2a8/63fbe02a87ccac8101001a43d953776f.jpg"></div><br>  Neste artigo de dois posts, prestarei homenagem ao legado da <em>Journey</em> , ensinando como recriar exatamente a mesma renderiza√ß√£o em areia usando shaders.  Independentemente da necessidade de dunas de areia no seu jogo, esta s√©rie de tutoriais permitir√° que voc√™ aprenda a recriar est√©tica espec√≠fica no seu pr√≥prio jogo.  Se voc√™ deseja recriar o lindo shader de areia usado no <em>Journey</em> , primeiro precisa entender como ele foi constru√≠do.  E, embora pare√ßa extremamente complexo, na verdade consiste em v√°rios efeitos relativamente simples.  Essa abordagem para escrever shaders √© necess√°ria para se tornar um artista t√©cnico de sucesso.  Portanto, espero que voc√™ fa√ßa essa <em>jornada</em> comigo, na qual n√£o apenas exploramos a cria√ß√£o de shaders, mas tamb√©m aprendemos a combinar est√©tica e jogabilidade. <br><a name="habracut"></a><br><h1>  An√°lise de areia no Journey </h1><br>  Este artigo, como muitas outras tentativas de recriar a renderiza√ß√£o em areia do <em>Journey</em> , √© baseado em um relat√≥rio do GDC que o engenheiro l√≠der da empresa John Edwards, intitulado " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer">Renderiza√ß√£o em areia em viagem</a> ".  Nesta palestra, John Edwards fala sobre todas as camadas de efeitos adicionadas √†s dunas de areia do <em>Journey</em> para obter a apar√™ncia certa. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/wt2yYnBRD3U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  O relat√≥rio √© muito √∫til, mas no contexto deste tutorial, muitas das limita√ß√µes e decis√µes tomadas por John Edwards n√£o s√£o importantes.  Vamos tentar recriar os shaders de areia, remanescentes do shampoo <em>Journey</em> , principalmente por refer√™ncias visuais. <br><br>  Vamos come√ßar com uma malha 3D simples de uma duna perfeitamente lisa.  A credibilidade da renderiza√ß√£o da areia depende de dois aspectos: ilumina√ß√£o e gr√£os.  Uma maneira interessante de refletir a luz da areia √© fornecida por um <strong>modelo de ilumina√ß√£o</strong> modificado.  No contexto da codifica√ß√£o de sombreador, o modelo de ilumina√ß√£o determina sombras e realces com base nas propriedades do modelo e nas condi√ß√µes de ilumina√ß√£o da cena. <br><br>  No entanto, tudo isso n√£o √© suficiente para criar a ilus√£o de realismo.  O problema √© que a areia simplesmente n√£o pode ser modelada com superf√≠cies planas.  Gr√£os de areia devem ser considerados.  √â por isso que existem dois efeitos separados que funcionam diretamente com o <strong>normal na superf√≠cie</strong> , que podem ser usados ‚Äã‚Äãpara simular pequenas part√≠culas de areia na superf√≠cie da duna. <br><br>  O diagrama abaixo mostra todos os efeitos que aprenderemos neste tutorial.  Do ponto de vista t√©cnico, os c√°lculos normais s√£o realizados antes do processamento da ilumina√ß√£o.  Para facilitar o estudo, os efeitos ser√£o descritos em uma ordem diferente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/373/0b9/8a1/3730b98a1670ef00cf68efb0af0cc08b.png"></div><br><h6>  Cor difusa </h6><br>  O efeito mais simples do shader de areia √© sua <strong>cor difusa</strong> , que descreve aproximadamente o componente <em>opaco</em> da apar√™ncia geral.  A cor difusa √© calculada com base na cor <em>real</em> do objeto e nas condi√ß√µes de ilumina√ß√£o.  Uma esfera pintada de branco n√£o ser√° perfeitamente branca em todos os lugares, porque a cor difusa depende do incidente de luz nela.  As cores difusas s√£o calculadas usando um modelo matem√°tico que aproxima o reflexo da luz de uma superf√≠cie.  Gra√ßas a um relat√≥rio de John Edwards com o GDC, sabemos exatamente a equa√ß√£o usada, que ele chama de <strong>reflet√¢ncia difusa do contraste</strong> ;  baseia-se no conhecido modelo de <strong>reflex√µes</strong> de <strong>Lambert</strong> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/509/4c1/65b/5094c165b5f2e1ba10696fec1641482c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90f/9b4/73f/90f9b473f7d1eefcb6ca32871300fed8.png"></div><br>  <i>Antes e depois de aplicar a equa√ß√£o</i> <br><br><h6>  Areia normal </h6><br>  A geometria original √© completamente suave.  Para compensar isso, a <strong>superf√≠cie normal do</strong> modelo √© alterada usando uma t√©cnica chamada <strong>mapeamento de resposta</strong> .  Permite usar uma textura para simular geometria mais complexa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90f/9b4/73f/90f9b473f7d1eefcb6ca32871300fed8.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/07a/739/06d/07a73906d58ed9d4c251340b4e92d7f5.png"></div><br><h6>  Ilumina√ß√£o de borda </h6><br>  Cada n√≠vel de <em>viagem</em> usa uma paleta de cores limitada.  Por isso, √© bastante dif√≠cil entender onde uma duna termina e outra come√ßa.  Para aumentar a legibilidade, √© utilizada a t√©cnica de pequeno destaque do que √© vis√≠vel apenas ao longo da borda da duna.  Isso se chama <strong>ilumina√ß√£o de aro</strong> e existem v√°rias maneiras de implement√°-lo.  Para este tutorial, escolhi um m√©todo baseado <strong>nas</strong> reflex√µes de <strong>Fresnel</strong> que modela as reflex√µes em superf√≠cies polidas nos chamados <em>√¢ngulos de incid√™ncia</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/07a/739/06d/07a73906d58ed9d4c251340b4e92d7f5.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/864/285/818/8642858189235ff1d796378992523ceb.png"></div><br><h6>  Espelho reflexo do oceano </h6><br>  Um dos aspectos mais agrad√°veis <em>da</em> jogabilidade <em>do Journey</em> √© a capacidade de "surfar" nas dunas de areia.  Provavelmente √© por isso que a empresa de jogos queria que a areia parecesse mais um l√≠quido do que um s√≥lido.  Para isso, foi utilizada uma forte reflex√£o, que pode ser encontrada frequentemente em shaders de √°gua.  John Edwards chama esse efeito de <strong>oceano especular</strong> , e no tutorial n√≥s o implementamos usando <strong>a reflex√£o de Blinn-Fong</strong> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/864/285/818/8642858189235ff1d796378992523ceb.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/d17/d2f/716d17d2f4d0d0796e51bee059ce39c2.png"></div><br><h6>  Reflexo brilho </h6><br>  A adi√ß√£o de um componente especular do oceano ao shader de areia proporciona uma apar√™ncia mais fluida.  No entanto, ele ainda n√£o permite que um dos aspectos visuais mais importantes da areia seja transmitido: reflex√µes que ocorrem aleatoriamente.  Nas dunas reais, esse efeito ocorre porque cada gr√£o de areia reflete a luz em sua dire√ß√£o e muitas vezes um desses raios refletidos entra em nosso olho.  Tal <strong>reflexo de brilho</strong> (reflexo de reflexos) ocorre mesmo em locais onde a luz direta do sol n√£o cai;  complementa o oceano especular e aprimora o senso de credibilidade. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/716/d17/d2f/716d17d2f4d0d0796e51bee059ce39c2.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/539/f3c/33c/539f3c33c6c12f5206540ff62ecf4102.png"></div><br><h6>  Ondas de areia </h6><br>  Alterar as normais nos permitiu simular o efeito de pequenos gr√£os de areia cobrindo a superf√≠cie da duna.  Nas dunas do mundo real, as ondas causadas pelo vento costumam aparecer.  Sua forma varia dependendo da inclina√ß√£o e posi√ß√£o de cada duna em rela√ß√£o √† dire√ß√£o do vento.  Potencialmente, esses padr√µes podem ser criados por meio de uma textura protuberante, mas, neste caso, ser√° imposs√≠vel alterar a forma das dunas em tempo real.  A solu√ß√£o proposta por John Edwards √© semelhante a uma t√©cnica chamada <strong>sombreamento triplanar</strong> : utiliza quatro texturas diferentes, misturadas dependendo da posi√ß√£o e inclina√ß√£o de cada duna. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/539/f3c/33c/539f3c33c6c12f5206540ff62ecf4102.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/828/9b4/997/8289b49971bbe0046845f71284790124.png"></div><br><h1>  Jornada Sand Shader Anatomy </h1><br>  O Unity tem muitos modelos de shader para voc√™ come√ßar.  Como estamos interessados ‚Äã‚Äãem materiais que podem receber ilumina√ß√£o e projetar sombras, precisamos come√ßar com o <strong>shader de</strong> superf√≠cie (shader de superf√≠cie). <br><br>  Todos <strong>os shaders de superf√≠cie</strong> s√£o executados em dois est√°gios.  Primeiro, √© chamada <strong>uma fun√ß√£o de superf√≠cie</strong> que coleta as propriedades da superf√≠cie que precisa ser renderizada, por exemplo, seu <em>albedo</em> , <em>rugosidade</em> , <em>propriedades do metal</em> , <em>transpar√™ncia</em> e <em>dire√ß√£o normal</em> .  Todas essas propriedades s√£o transferidas para <strong>a fun√ß√£o de ilumina√ß√£o</strong> , que leva em considera√ß√£o a influ√™ncia de fontes externas de luz e calcula o sombreamento e a ilumina√ß√£o. <br><br><h2>  Fun√ß√£o de superf√≠cie </h2><br>  Vamos come√ßar com o que se torna o n√∫cleo da nossa fun√ß√£o de superf√≠cie, chamada no c√≥digo de <code>surf</code> abaixo.  As √∫nicas propriedades que precisamos definir s√£o a <em>cor da areia</em> e a <strong>normal da superf√≠cie</strong> .  O normal de um modelo 3D √© um vetor que indica a posi√ß√£o da superf√≠cie.  Os vetores normais s√£o usados ‚Äã‚Äãpela fun√ß√£o de ilumina√ß√£o para calcular como a luz ser√° refletida.  Eles geralmente s√£o calculados durante a importa√ß√£o da malha.  No entanto, eles podem ser modificados para simular uma geometria mais complexa.  √â aqui que os efeitos <strong>normais</strong> da <strong>areia</strong> e das <strong>ondas de</strong> <strong>areia</strong> distorcem a norma da areia para simular sua rugosidade. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">surf</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Input IN, inout SurfaceOutput o)</span></span></span><span class="hljs-function"> </span></span>{ o.Albedo = _SandColor; o.Alpha = <span class="hljs-number"><span class="hljs-number">1</span></span>; float3 N = float3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); N = RipplesNormal(N); N = SandNormal (N); o.Normal = N; }</code> </pre> <br>  Ao escrever normais para <code>o.Normal</code> eles devem ser expressos no <strong>espa√ßo tangente</strong> .  Isso significa que o vetor √© selecionado em rela√ß√£o √† superf√≠cie do modelo 3D.  Ou seja, <code>float3(0, 0, 1)</code> na verdade significa que nenhuma altera√ß√£o √© realmente feita no modelo 3D normal. <br><br>  Ambas as fun√ß√µes, <code>RipplesNormal</code> e <code>SandNormal</code> recebem o vetor normal e o modificam.  Mais tarde veremos como isso pode ser feito. <br><br><h2>  Fun√ß√£o de ilumina√ß√£o </h2><br>  √â na fun√ß√£o de ilumina√ß√£o que todos os outros efeitos s√£o implementados.  O c√≥digo abaixo mostra como cada componente individual √© calculado em fun√ß√µes separadas (cor difusa, ilumina√ß√£o da borda, especular do oceano e reflex√£o de brilho).  Ent√£o todos eles s√£o combinados. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> surface surf Journey fullforwardshadows float4 LightingJourney (SurfaceOutput s, fixed3 viewDir, UnityGI gi) { float3 diffuseColor = DiffuseColor (); float3 rimColor = RimLighting (); float3 oceanColor = OceanSpecular (); float3 glitterColor = GlitterSpecular (); float3 specularColor = saturate(max(rimColor, oceanColor)); float3 color = diffuseColor + specularColor + glitterColor; return float4(color * s.Albedo, 1); }</span></span></code> </pre> <br>  O m√©todo de combinar componentes √© bastante arbitr√°rio e nos permite alter√°-lo para estudar possibilidades art√≠sticas. <br><br>  Normalmente, reflex√µes especulares se acumulam sobre cores difusas.  Como aqui n√£o temos uma, mas tr√™s reflex√µes especulares ( <em>luz do aro</em> , <em>especular do oceano</em> e <em>especular do brilho</em> ), precisamos ter mais cuidado para n√£o deixar a areia tremeluzente.  Como a luz do aro e a especular do oceano fazem parte do mesmo efeito, podemos escolher apenas o valor m√°ximo deles.  O especular de brilho √© adicionado separadamente porque esse componente cria areia tremeluzente. <br><br><h2>  Parte 2. Cor Difusa </h2><br>  Na segunda parte do post, vamos nos concentrar no modelo de ilumina√ß√£o usado no jogo e nisso.  como recri√°-lo no Unity. <br><br>  Na parte anterior, lan√ßamos as bases para o que gradualmente se transformar√° em nossa vers√£o do shader de areia Journey.  Como mencionado anteriormente, <strong>a fun√ß√£o de ilumina√ß√£o √©</strong> usada em <strong>sombreadores de superf√≠cie</strong> para calcular o efeito da ilumina√ß√£o, para que sombras e realces apare√ßam na superf√≠cie.  Descobrimos que o Journey tem v√°rios efeitos que se enquadram nessa categoria.  Come√ßaremos com o efeito mais b√°sico (e mais simples) encontrado no n√∫cleo deste shader: sua <strong>ilumina√ß√£o</strong> difusa ( <strong>ilumina√ß√£o</strong> difusa / difusa). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78f/166/71c/78f16671c754f05e619ce034fad81926.png"></div><br>  Por enquanto, omitimos todos os outros efeitos e componentes, focando na <strong>ilumina√ß√£o da areia</strong> . <br><br>  A fun√ß√£o de ilumina√ß√£o que <code>DiffuseColor</code> na parte anterior do post chamada <code>LightingJourney</code> simplesmente delega o c√°lculo da cor difusa da areia a uma fun√ß√£o chamada <code>DiffuseColor</code> . <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">float4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LightingJourney</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(SurfaceOutput s, fixed3 viewDir, UnityGI gi)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Lighting properties float3 L = gi.light.dir; float3 N = s.Normal; // Lighting calculation float3 diffuseColor = DiffuseColor(N, L); // Final color return float4(diffuseColor, 1); }</span></span></code> </pre> <br>  Devido ao fato de que cada efeito √© independente e armazenado em sua pr√≥pria fun√ß√£o, nosso c√≥digo ser√° mais modular e limpo. <br><br><h2>  Reflex√£o de Lambert </h2><br>  Antes de criar ilumina√ß√£o difusa "como no Journey", √© bom ver como √© a fun√ß√£o de ilumina√ß√£o difusa "b√°sica".  A t√©cnica mais simples de sombreamento para materiais foscos √© chamada de <strong>reflet√¢ncia lambertiana</strong> .  Este modelo aproxima a apar√™ncia da maioria das superf√≠cies n√£o brilhantes e n√£o met√°licas.  √â nomeado ap√≥s o cientista enciclop√©dico su√≠√ßo <strong>Johann Heinrich Lambert</strong> , que prop√¥s seu conceito em 1760. <br><br>  O conceito de reflex√£o de Lambert √© baseado em uma id√©ia simples: o <em>brilho de uma superf√≠cie depende da quantidade de luz incidente nela</em> .  Geometricamente, isso pode ser mostrado no diagrama abaixo, onde a esfera √© iluminada por uma fonte de luz remota.  Embora as √°reas vermelha e verde da esfera recebam a mesma quantidade de ilumina√ß√£o, suas √°reas de superf√≠cie s√£o significativamente diferentes.  Se a luz na regi√£o vermelha for distribu√≠da por uma √°rea maior, isso significa que cada unidade do quadrado vermelho recebe menos luz que verde. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2cf/d48/495/2cfd484953877a47fe5ba564b399ea35.png"></div><br>  Teoricamente, a reflex√£o de Lambert depende do √¢ngulo relativo entre a <em>superf√≠cie</em> e a <em>luz incidente</em> .  Do ponto de vista matem√°tico, dizemos que essa √© uma fun√ß√£o do <strong>normal para a superf√≠cie</strong> e a <strong>dire√ß√£o da ilumina√ß√£o</strong> .  Essas quantidades s√£o expressas usando dois vetores de comprimento unit√°rio (chamados <strong>vetores unit√°rios</strong> ) <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> N </script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> L </script>  .  Os vetores √∫nicos s√£o uma maneira padr√£o de especificar <em>dire√ß√µes</em> no contexto da codifica√ß√£o de sombreador. <br><br><div class="spoiler">  <b class="spoiler_title">O valor de N e L</b> <div class="spoiler_text">  <strong>Normal</strong> √† superf√≠cie <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.074ex" viewBox="0 -772.3 888.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> N </script>  √â um vetor unit√°rio direcionado para <em>longe da</em> pr√≥pria superf√≠cie. <br><br>  Por analogia, podemos assumir que a <strong>dire√ß√£o da ilumina√ß√£o</strong> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-7"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.074ex" viewBox="0 -772.3 681.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> L </script>  aponta <em>da</em> fonte de luz e segue na dire√ß√£o em que a luz est√° se movendo.  Mas n√£o √© assim: a dire√ß√£o da ilumina√ß√£o √© um √∫nico vetor apontando <em>na dire√ß√£o da</em> dire√ß√£o da qual a luz veio. <br><br>  Isso pode ser confuso, especialmente se voc√™ √© novo na cria√ß√£o de shaders.  No entanto, gra√ßas a essa nota√ß√£o, as equa√ß√µes se tornam mais simples. </div></div><br><div class="spoiler">  <b class="spoiler_title">Reflex√£o de Lambert na Unidade</b> <div class="spoiler_text">  Antes do <strong>Shader padr√£o do</strong> Unity 5, a reflex√£o de Lambert era o modelo padr√£o para sombrear as superf√≠cies iluminadas. <br><br>  Voc√™ ainda pode acess√°-lo no Inspetor de materiais: no <em>sombreador herdado,</em> ele √© chamado de <em>Difuso</em> . <br><br>  Se voc√™ escrever seu pr√≥prio sombreador de superf√≠cie, a reflex√£o Lambert estar√° dispon√≠vel como uma fun√ß√£o de ilumina√ß√£o chamada <code>Lambert</code> : <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> surface surf Lambert fullforwardshadows</span></span></code> </pre> <br>  Sua implementa√ß√£o pode ser encontrada na fun√ß√£o <code>LightingLambert</code> definida no arquivo <code>CGIncludes\Lighting.cginc</code> . </div></div><br><div class="spoiler">  <b class="spoiler_title">Reflex√£o de Lambert e clima</b> <div class="spoiler_text">  A reflex√£o de Lambert √© um modelo bastante antigo, mas fornece uma compreens√£o de conceitos complexos, como sombreamento de superf√≠cie.  Tamb√©m pode ser usado para explicar muitos outros fen√¥menos.  Por exemplo, o mesmo diagrama explica por que √© mais frio nos p√≥los do planeta do que no equador. </div></div><br>  Observando com mais aten√ß√£o, podemos ver que a superf√≠cie recebe a quantidade m√°xima de ilumina√ß√£o quando seu normal √© paralelo √† dire√ß√£o da ilumina√ß√£o.  E vice-versa: n√£o h√° luz se dois vetores unit√°rios forem perpendiculares um ao outro. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e1/d06/6c6/0e1d066c6ff998abda8ca5c7607e4c4e.png"></div><br>  Obviamente, o √¢ngulo entre <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-9"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> N </script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-11"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-6"> L </script>  cr√≠tico para a reflex√£o de acordo com Lambert.  Al√©m disso, o brilho √© m√°ximo e igual a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-13"><span class="MJXp-mn" id="MJXp-Span-14">100</span><span class="MJXp-mi" id="MJXp-Span-15">%</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.423ex" height="2.298ex" viewBox="0 -832 2335 989.6" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-25" x="1501" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-7"> 100 \% </script>  quando o √¢ngulo √© <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-16"><span class="MJXp-mn" id="MJXp-Span-17">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> 0 </script>  e m√≠nimo ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-18"><span class="MJXp-mn" id="MJXp-Span-19">0</span><span class="MJXp-mi" id="MJXp-Span-20">%</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.098ex" height="2.298ex" viewBox="0 -832 1334 989.6" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-25" x="500" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-9"> 0 \% </script>  ) quando o √¢ngulo tende a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-21"><span class="MJXp-msubsup" id="MJXp-Span-22"><span class="MJXp-mn" id="MJXp-Span-23" style="margin-right: 0.05em;">90</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-24" style="vertical-align: 0.5em;"><span class="MJXp-mtext" id="MJXp-Span-25">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29">c</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.871ex" height="2.419ex" viewBox="0 -935.7 2527.6 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-39"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="500" y="0"></use><g transform="translate(1001,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-63" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-69" x="787" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-72" x="1132" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-63" x="1584" y="0"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-10"> 90 ^ {\ circ} </script>  .  Se voc√™ conhece a <em>√°lgebra vetorial</em> , pode entender que uma quantidade representando a reflex√£o de Lambert <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-30"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">I</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.172ex" height="2.057ex" viewBox="0 -780.1 504.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-49" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-11"> I </script>  √© igual a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-32"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">N</span><span class="MJXp-mtext" id="MJXp-Span-34">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.417ex" height="2.057ex" viewBox="0 -780.1 3624 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-63" x="1138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-64" x="1572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6F" x="2095" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="2581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4C" x="2942" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-12"> N \ cdot L </script>  onde est√° o operador <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-40"><span class="MJXp-mtext" id="MJXp-Span-41">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.771ex" height="2.057ex" viewBox="0 -780.1 2054 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-63" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-64" x="683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6F" x="1207" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="1692" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> \ cdot </script>  chamado de <strong>produto escalar</strong> . <br><br>  (1) <p><math> </math> $$ display $$ \ begin {equa√ß√£o *} I = N \ cdot L \ end {equa√ß√£o *} $$ display $$ </p><br>  O produto escalar √© uma medida da ‚Äúcoincid√™ncia‚Äù de dois vetores em rela√ß√£o um ao outro e varia no intervalo de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-52"><span class="MJXp-mo" id="MJXp-Span-53" style="margin-left: 0em; margin-right: 0.111em;">+</span><span class="MJXp-mn" id="MJXp-Span-54">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.057ex" viewBox="0 -728.2 1279 885.9" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-15"> + 1 </script>  (para dois vetores id√™nticos) a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-55"><span class="MJXp-mo" id="MJXp-Span-56" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-57">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.057ex" viewBox="0 -728.2 1279 885.9" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-16"> -1 </script>  (para dois vetores opostos).  Um produto escalar √© a base do sombreamento, que examinei em detalhes no tutorial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Modelos de renderiza√ß√£o e ilumina√ß√£o com base f√≠sica</a> . <br><br><h3>  Implementa√ß√£o </h3><br>  E para <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-58"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-17"> N </script>  e para <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-60"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-18"> L </script>  Voc√™ pode acessar facilmente os recursos de ilumina√ß√£o do shader de superf√≠cie atrav√©s de <code>s.Normal</code> e <code>gi.light.dirin</code> .  Para simplificar, iremos renome√°-los no c√≥digo shader para <code>N</code> e <code>L</code> <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">float3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DiffuseColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float3 N, float3 L)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotL = saturate( dot(N, L) ); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NdotL; }</code> </pre> <br>  <code>saturate</code> fun√ß√£o <code>saturate</code> limita o valor de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-62"><span class="MJXp-mn" id="MJXp-Span-63">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-19"> 0 </script>  antes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-64"><span class="MJXp-mn" id="MJXp-Span-65">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-20"> 1 </script>  .  No entanto, como o produto escalar est√° na faixa de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-66"><span class="MJXp-mo" id="MJXp-Span-67" style="margin-left: 0em; margin-right: 0.111em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-68">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.057ex" viewBox="0 -728.2 1279 885.9" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2212" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-21"> -1 </script>  antes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-69"><span class="MJXp-mo" id="MJXp-Span-70" style="margin-left: 0em; margin-right: 0.111em;">+</span><span class="MJXp-mn" id="MJXp-Span-71">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.971ex" height="2.057ex" viewBox="0 -728.2 1279 885.9" role="img" focusable="false" style="vertical-align: -0.366ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="778" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-22"> + 1 </script>  , precisaremos trabalhar apenas com seus valores negativos.  √â por isso que a reflex√£o de Lambert √© frequentemente implementada da seguinte forma: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotL = max(<span class="hljs-number"><span class="hljs-number">0</span></span>, dot(N, L) );</code> </pre> <br><h2>  Reflex√£o de contraste da luz ambiente </h2><br>  Embora o reflexo de Lambert oculte bem a maioria dos materiais, ele n√£o √© fisicamente preciso nem foto-realista.  Nos jogos mais antigos, os shaders de Lambert eram usados ‚Äã‚Äãextensivamente.  Os jogos que usam essa t√©cnica geralmente <em>parecem</em> antigos, porque podem inadvertidamente reproduzir a est√©tica de jogos antigos.  Se voc√™ n√£o se esfor√ßar para isso, a reflex√£o de Lambert deve ser evitada e usar uma tecnologia mais moderna. <br><br>  Um desses modelos √© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer">o Modelo de Reflex√£o de Oren-Nayyar</a> , originalmente descrito no artigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer">Generaliza√ß√£o do</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer">Modelo de Reflex√£o</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer">de Lambert</a> , publicado em 1994 por Michael Oren e Sri C. Nayyar.  O modelo de Oren-Nayyar √© uma generaliza√ß√£o da reflex√£o de Lambert e √© especialmente projetado para superf√≠cies rugosas.  Inicialmente, os desenvolvedores do Journey queriam usar a reflex√£o Oren-Nayyar como base para seu shader de areia.  No entanto, essa id√©ia foi abandonada devido aos altos custos de computa√ß√£o. <br><br>  Em seu relat√≥rio de 2013, o artista t√©cnico John Edwards explica que o modelo de reflex√£o criado para a areia Journey foi baseado em uma s√©rie de tentativas e erros.Os desenvolvedores pretendiam n√£o recriar a renderiza√ß√£o fotorrealista do deserto, mas dar vida a uma est√©tica concreta e imediatamente reconhec√≠vel. <br><br>  Segundo ele, o modelo de sombreamento resultante corresponde a esta equa√ß√£o: <br><br>  2) <p><math> </math> $$ display $$ \ begin {equa√ß√£o *} I = 4 * \ left (\ left (N \ odot \ left [1, 0,3, 1 \ right] \ right) \ cdot L \ right) \ end {equa√ß√£o *} $$ display $$ </p><br>  onde <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-95"><span class="MJXp-mtext" id="MJXp-Span-96">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.891ex" height="2.057ex" viewBox="0 -780.1 2106 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-64" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6F" x="1259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="1744" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-24"> \ odot </script>  - <strong>produto elemento</strong> - <strong>elemento de</strong> dois vetores. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">float3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DiffuseColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float3 N, float3 L)</span></span></span><span class="hljs-function"> </span></span>{ Ny *= <span class="hljs-number"><span class="hljs-number">0.3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotL = saturate(<span class="hljs-number"><span class="hljs-number">4</span></span> * dot(N, L)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NdotL; }</code> </pre> <br>  Modelo de reflex√£o (2) John Edwards chama <strong>contraste difuso</strong> ; portanto, usaremos esse nome em todo o tutorial. <br><br>  A anima√ß√£o abaixo mostra a diferen√ßa no sombreamento de Lambert (esquerda) e contraste difuso do Journey (direita). <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/q-hQiDA71Yg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">Qual √© o significado de 4 e 0,3?</b> <div class="spoiler_text">  Embora o contraste difuso n√£o tenha sido projetado para ser fisicamente preciso, ainda podemos tentar entender o que ele faz. <br><br>  Na sua ess√™ncia, ele ainda usa a reflex√£o de Lambert.  A primeira diferen√ßa √≥bvia √© que o resultado geral √© multiplicado por <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-101"><span class="MJXp-mn" id="MJXp-Span-102"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.074ex" viewBox="0 -772.3 500.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-34" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-25"> 4 </script>  .  Isso significa que todos os pixels que foram normalmente recebidos <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-103"><span class="MJXp-mn" id="MJXp-Span-104"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">25 </font></font></span><span class="MJXp-mi" id="MJXp-Span-105"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">%</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.261ex" height="2.211ex" viewBox="0 -831.5 1834.5 952" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-35" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-25" x="1001" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-26"> 25 \% </script>  a ilumina√ß√£o agora brilhar√° como se estivesse recebendo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-106"><span class="MJXp-mn" id="MJXp-Span-107"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100 </font></font></span><span class="MJXp-mi" id="MJXp-Span-108"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">%</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.423ex" height="2.211ex" viewBox="0 -831.5 2335 952" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-25" x="1501" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-27"> 100 \% </script>  ilumina√ß√£o.  Multiplicando tudo por <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-109"><span class="MJXp-mn" id="MJXp-Span-110"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.074ex" viewBox="0 -772.3 500.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-34" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-28"> 4 </script>  de acordo com Lambert, o sombreamento fraco se torna muito mais forte e a regi√£o de transi√ß√£o entre a escurid√£o e a luz √© menor.  Nesse caso, a sombra se torna mais n√≠tida. <br><br>  Efeito da multiplica√ß√£o do componente <code>y</code> na dire√ß√£o normal <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-111"><span class="MJXp-mn" id="MJXp-Span-112"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font></span><span class="MJXp-mo" id="MJXp-Span-113" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mn" id="MJXp-Span-114"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.359ex" height="2.486ex" viewBox="0 -772.3 1446.2 1070.5" role="img" focusable="false" style="vertical-align: -0.693ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2C" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-33" x="945" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-29"> 0,3 </script>  explicar √© muito mais dif√≠cil.  √Ä medida que os componentes do vetor mudam, a dire√ß√£o geral em que ele aponta muda.  Reduzindo o valor do componente <code>y</code> para tudo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-115"><span class="MJXp-mn" id="MJXp-Span-116"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">30 </font></font></span><span class="MJXp-mi" id="MJXp-Span-117"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">%</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.261ex" height="2.211ex" viewBox="0 -831.5 1834.5 952" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-33"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-25" x="1001" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-30"> 30 \% </script>  do seu valor original, a reflex√£o do contraste difuso faz com que as sombras se tornem mais verticais. <br><br>  Nota: um produto escalar mede diretamente o √¢ngulo entre dois vetores apenas se ambos tiverem comprimento <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-118"><span class="MJXp-mn" id="MJXp-Span-119"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.074ex" viewBox="0 -772.3 500.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-31"> 1 </script>  .  A altera√ß√£o feita reduz o comprimento normal <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-120"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.074ex" viewBox="0 -772.3 888.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-32"> N </script>  que n√£o √© mais um vetor de unidade. </div></div><br><h2>  De tons de cinza a cores </h2><br>  Todas as anima√ß√µes mostradas acima t√™m tons de cinza, porque mostram os valores de seu modelo de reflex√£o, variando no intervalo de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-122"><span class="MJXp-mn" id="MJXp-Span-123">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-33"> 0 </script>  antes <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-124"><span class="MJXp-mn" id="MJXp-Span-125">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-34"> 1 </script>  ". Podemos adicionar cores facilmente usando <code>NdotL</code> como o coeficiente de interpola√ß√£o entre duas cores: uma para sombra total e a outra para areia totalmente iluminada. <br><br><pre> <code class="cpp hljs">float3 _TerrainColor; float3 _ShadowColor; <span class="hljs-function"><span class="hljs-function">float3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DiffuseColor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float3 N, float3 L)</span></span></span><span class="hljs-function"> </span></span>{ Ny *= <span class="hljs-number"><span class="hljs-number">0.3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotL = saturate(<span class="hljs-number"><span class="hljs-number">4</span></span> * dot(N, L)); float3 color = lerp(_ShadowColor, _TerrainColor, NdotL); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> color; }</code> </pre> <br><h2>  Parte 3. Areia normal </h2><br>  Na terceira parte, vamos nos concentrar na cria√ß√£o de mapas normais que transformam modelos 3D suaves em dunas de areia. <br><br>  Na parte anterior do tutorial, implementamos a ilumina√ß√£o difusa da areia Journey.  Ao usar apenas esse efeito, as dunas do deserto parecer√£o bastante chatas e chatas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8cb/dd6/9a8/8cbdd69a8a92614469132400c0979c79.png"></div><br>  Um dos efeitos mais intrigantes da Journey √© a granula√ß√£o da areia.  Olhando para qualquer tela, parece-nos que as dunas n√£o s√£o lisas e homog√™neas, mas criadas a partir de milh√µes de gr√£os microsc√≥picos de areia. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e93/307/efc/e93307efce359d4830f5894dde30c9e6.jpg"></div><br>  Esse efeito pode ser alcan√ßado usando uma t√©cnica chamada <strong>mapeamento de relevo</strong> , que permite que a luz ricocheteie em uma superf√≠cie plana como se fosse mais complexa.  Veja como esse efeito altera a apar√™ncia da renderiza√ß√£o: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90f/9b4/73f/90f9b473f7d1eefcb6ca32871300fed8.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/07a/739/06d/07a73906d58ed9d4c251340b4e92d7f5.png"></div><br>  Pequenas diferen√ßas podem ser vistas com o aumento: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea7/3d5/b3f/ea73d5b3fb56c941c9b61f022dcb8699.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2f8/efa/5c4/2f8efa5c4926a0de947b8ff91e114498.png"></div><br><h2>  Lidamos com mapas normais </h2><br>  A areia consiste em in√∫meros gr√£os de areia, cada um com sua pr√≥pria forma e composi√ß√£o (veja abaixo).  Cada part√≠cula individual reflete a ilumina√ß√£o em uma dire√ß√£o potencialmente aleat√≥ria.  Uma maneira de obter esse efeito √© criar um modelo 3D contendo todos esses gr√£os microsc√≥picos de areia.  Mas, devido ao n√∫mero incr√≠vel de pol√≠gonos necess√°rios, essa abordagem n√£o √© vi√°vel. <br><br>  Mas h√° outra solu√ß√£o que √© frequentemente usada para simular uma geometria mais complexa em compara√ß√£o com um modelo 3D real.  Cada v√©rtice ou face do modelo 3D est√° associado a um par√¢metro chamado <strong>dire√ß√£o normal</strong> .  Este √© um vetor de comprimento unit√°rio usado para calcular a reflex√£o da luz na superf√≠cie de um modelo 3D.  Ou seja, para simular areia, voc√™ precisa simular essa distribui√ß√£o aparentemente aleat√≥ria de gr√£os de areia e, portanto, como eles afetam as normais da superf√≠cie. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/413/bc4/cc3/413bc4cc3466b827a1a1d86559d54054.jpg"></div><br>  Isso pode ser feito de in√∫meras maneiras.  O mais simples √© criar uma textura que mude a dire√ß√£o das normais originais do modelo das dunas. <br><br>  <strong>Normal √† superf√≠cie</strong> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-126"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.064ex" height="2.057ex" viewBox="0 -780.1 888.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-4E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-35"> N </script>  no caso geral, √© calculado pela geometria do modelo 3D.  No entanto, voc√™ pode modific√°-lo usando o <strong>mapa normal</strong> .  Mapas normais s√£o texturas que permitem simular geometrias mais complexas, alterando a orienta√ß√£o local das normais para a superf√≠cie.  Essa t√©cnica √© freq√ºentemente chamada de <strong>mapeamento de resposta</strong> . <br><br>  Alterar as normais √© uma tarefa bastante simples que pode ser executada na fun√ß√£o de <code>surf</code> do <strong>shader de superf√≠cie</strong> .  Essa fun√ß√£o usa dois par√¢metros, um dos quais √© uma <code>struct</code> chamada <code>SurfaceOutput</code> .  Ele cont√©m todas as propriedades necess√°rias para renderizar uma parte de um modelo 3D, desde a cor ( <code>o.Albedo</code> ) at√© a transpar√™ncia ( <code>o.Alpha</code> ).  Outro par√¢metro que ele cont√©m √© a dire√ß√£o normal ( <code>o.Normal</code> ), que pode ser reescrita para alterar a maneira como a luz √© refletida no modelo. <br><br>  De acordo com a documenta√ß√£o do Unity sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer">Surface Shaders</a> , todas as normais gravadas na estrutura <code>o.Normal</code> devem ser expressas no <strong>espa√ßo tangente</strong> : <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SurfaceOutput</span></span></span><span class="hljs-class"> {</span></span> fixed3 Albedo; <span class="hljs-comment"><span class="hljs-comment">// diffuse color fixed3 Normal; // tangent space normal, if written fixed3 Emission; half Specular; // specular power in 0..1 range fixed Gloss; // specular intensity fixed Alpha; // alpha for transparencies };</span></span></code> </pre> <br>  Assim, podemos relatar que os vetores unit√°rios devem ser expressos no sistema de coordenadas em rela√ß√£o √† malha normal.  Por exemplo, ao escrever para <code>o.Normal</code> valores de <code>float3(0, 0, 1)</code> normal permanecer√£o inalterados. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">surf</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Input IN, inout SurfaceOutput o)</span></span></span><span class="hljs-function"> </span></span>{ o.Albedo = _SandColor; o.Alpha = <span class="hljs-number"><span class="hljs-number">1</span></span>; o.Normal = float3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br>  Isso ocorre porque o vetor <code>float3(0, 0, 1)</code> √© realmente um vetor normal expresso em rela√ß√£o √† geometria do modelo 3D. <br><br>  Portanto, para alterar o normal para a superf√≠cie no <strong>shader de superf√≠cie</strong> , basta escrever um novo vetor na <strong>fun√ß√£o de superf√≠cie</strong> em <code>o.Normal</code> : <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">surf</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Input IN, inout SurfaceOutput o)</span></span></span><span class="hljs-function"> </span></span>{ o.Albedo = _SandColor; o.Alpha = <span class="hljs-number"><span class="hljs-number">1</span></span>; o.Normal = ... <span class="hljs-comment"><span class="hljs-comment">// change the normal here }</span></span></code> </pre> <br>  No restante do post, criaremos a aproxima√ß√£o inicial, que complicaremos na sexta parte do tutorial. <br><br><h2>  Areia normal </h2><br>  A parte mais problem√°tica √© entender <em>como os</em> gr√£os de areia mudam normalmente para a superf√≠cie.  Embora individualmente cada gr√£o de areia possa espalhar a luz em qualquer dire√ß√£o, no geral, algo mais acontece.  Qualquer abordagem fisicamente precisa deve estudar a distribui√ß√£o de vetores normais na superf√≠cie da areia e model√°-la matematicamente.  Esses modelos realmente existem, mas a solu√ß√£o apresentada em nosso tutorial √© muito mais simples e, ao mesmo tempo, muito eficaz. <br><br>  Em cada ponto do modelo, um <strong>vetor de unidade aleat√≥rio √©</strong> amostrado da textura.  Ent√£o, o normal para a superf√≠cie se inclina uma certa quantidade em rela√ß√£o a esse vetor.  Com a cria√ß√£o correta de uma textura aleat√≥ria e a sele√ß√£o de uma quantidade apropriada de mistura, podemos mudar o normal para a superf√≠cie de forma a criar uma sensa√ß√£o de granula√ß√£o, sem perder a curvatura geral das dunas. <br><br>  Valores aleat√≥rios podem ser amostrados usando uma textura preenchida com cores aleat√≥rias.  Os componentes R, G e B de cada pixel s√£o usados ‚Äã‚Äãcomo componentes X, Y e Z do vetor normal.  Os componentes de cores est√£o na faixa <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-128"><span class="MJXp-mtext" id="MJXp-Span-129">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">t</span><span class="MJXp-mo" id="MJXp-Span-134" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-135">0</span><span class="MJXp-mo" id="MJXp-Span-136" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-137">1</span><span class="MJXp-mtext" id="MJXp-Span-138">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-139">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">t</span><span class="MJXp-mo" id="MJXp-Span-144" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.855ex" height="2.66ex" viewBox="0 -832 6395.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5B" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2C" x="2706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="3151" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-72" x="3901" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-69" x="4353" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-67" x="4698" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-68" x="5179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="5755" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5D" x="6117" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-36"> \ left [0, 1 \ right] </script>  , ent√£o eles precisam ser convertidos em um intervalo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-145"><span class="MJXp-mtext" id="MJXp-Span-146">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">t</span><span class="MJXp-mo" id="MJXp-Span-151" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mo" id="MJXp-Span-152" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-153">1</span><span class="MJXp-mo" id="MJXp-Span-154" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-155" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-156">1</span><span class="MJXp-mtext" id="MJXp-Span-157">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">t</span><span class="MJXp-mo" id="MJXp-Span-163" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.471ex" height="2.66ex" viewBox="0 -832 7952.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5B" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2212" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="2984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2C" x="3484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2B" x="3929" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="4708" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-72" x="5458" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-69" x="5910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-67" x="6255" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-68" x="6736" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="7312" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5D" x="7674" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-37"> \ left [-1, + 1 \ right] </script>  .  Ent√£o o vetor resultante √© normalizado para que seu comprimento seja igual a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-164"><span class="MJXp-mn" id="MJXp-Span-165">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="1.937ex" viewBox="0 -728.2 500.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-38"> 1 </script>  . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0d2/c95/03d/0d2c9503d98fd2463e7e3682743736bd.png"></div><br><div class="spoiler">  <b class="spoiler_title">Crie texturas aleat√≥rias</b> <div class="spoiler_text">  Existem muitas maneiras de gerar texturas aleat√≥rias.  Para obter o efeito desejado, o mais importante √© a distribui√ß√£o geral de vetores aleat√≥rios que podem ser amostrados a partir da textura. <br><br>  Na imagem acima, cada pixel √© completamente aleat√≥rio.  N√£o h√° dire√ß√£o geral (cor) que prevalece na textura, porque cada valor tem a mesma probabilidade que todos os outros.  Essa textura nos d√° um tipo de areia que espalha luz em todas as dire√ß√µes. <br><br>  Durante uma palestra no GDC, John Edwards deixou claro que a textura aleat√≥ria usada para a areia em Journey era gerada a partir de uma distribui√ß√£o gaussiana.  Isso garante que a dire√ß√£o predominante coincida com o normal para a superf√≠cie. </div></div><br><div class="spoiler">  <b class="spoiler_title">Os vetores aleat√≥rios precisam ser normalizados?</b> <div class="spoiler_text">  A imagem que usei para amostrar vetores aleat√≥rios foi gerada usando um processo completamente aleat√≥rio.  N√£o apenas cada pixel √© gerado individualmente: os componentes R, G e B de um pixel tamb√©m s√£o independentes um do outro.  Ou seja, no caso geral, os vetores amostrados dessa textura n√£o ter√£o garantia de comprimento igual a <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-166"><span class="MJXp-mn" id="MJXp-Span-167"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.074ex" viewBox="0 -772.3 500.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-39"> 1 </script>  . <br><br>  Obviamente, voc√™ pode gerar uma textura na qual cada pixel ao converter de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-168"><span class="MJXp-mtext" id="MJXp-Span-169">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-171"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-174" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font></span><span class="MJXp-mn" id="MJXp-Span-175"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 </font></font></span><span class="MJXp-mo" id="MJXp-Span-176" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mn" id="MJXp-Span-177"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1, </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179"><font style="vertical-align: inherit;">r </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181"><font style="vertical-align: inherit;">g </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182"><font style="vertical-align: inherit;">h </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mo" id="MJXp-Span-184" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">]</font></span></font><span class="MJXp-mtext" id="MJXp-Span-178">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-184" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.855ex" height="2.762ex" viewBox="0 -831.5 6395.7 1189" role="img" focusable="false" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5B" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2C" x="2706" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="3151" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-72" x="3901" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-69" x="4353" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-67" x="4698" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-68" x="5179" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="5755" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5D" x="6117" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-40"> \ left [0, 1 \ right] </script>  em <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-185"><span class="MJXp-mtext" id="MJXp-Span-186">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t </font></font></span><span class="MJXp-mo" id="MJXp-Span-191" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font></span><span class="MJXp-mo" id="MJXp-Span-192" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-mn" id="MJXp-Span-193"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-194" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-mo" id="MJXp-Span-195" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-196"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198"><font style="vertical-align: inherit;">r </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200"><font style="vertical-align: inherit;">g </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201"><font style="vertical-align: inherit;">h </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202"><font style="vertical-align: inherit;">t </font></span><span class="MJXp-mo" id="MJXp-Span-203" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">]</font></span></font><span class="MJXp-mtext" id="MJXp-Span-197">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-203" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.471ex" height="2.762ex" viewBox="0 -831.5 7952.7 1189" role="img" focusable="false" style="vertical-align: -0.83ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5B" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2212" x="2205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="2984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2C" x="3484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2B" x="3929" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="4708" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-72" x="5458" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-69" x="5910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-67" x="6255" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-68" x="6736" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="7312" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5D" x="7674" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-41"> \ left [-1, + 1 \ right] </script>  e de fato ter√° que ter um comprimento <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-204"><span class="MJXp-mn" id="MJXp-Span-205"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.162ex" height="2.074ex" viewBox="0 -772.3 500.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-42"> 1 </script>  .  No entanto, dois problemas surgem aqui. <br><br> ,             . -,    <em> </em>   mip-,             . <br><br>   ,    . </div></div><br><h2>  Implementa√ß√£o </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na parte anterior do tutorial, nos familiarizamos com o conceito de "mapas normais" quando ele apareceu no primeiro esbo√ßo da </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fun√ß√£o de superf√≠cie</font></font></strong> <code>surf</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Recordando o diagrama mostrado no come√ßo do artigo, voc√™ pode ver que s√£o necess√°rios dois efeitos para recriar a renderiza√ß√£o da areia Journey. O primeiro ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normais de areia</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) que consideramos nesta parte do artigo, e o segundo ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ondas de areia</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) que estudamos na sexta parte.</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">surf</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Input IN, inout SurfaceOutput o)</span></span></span><span class="hljs-function"> </span></span>{ o.Albedo = _SandColor; o.Alpha = <span class="hljs-number"><span class="hljs-number">1</span></span>; float3 N = float3(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); N = RipplesNormal(N); <span class="hljs-comment"><span class="hljs-comment">// Covered in Journey Sand Shader #6 N = SandNormal (N); // Covered in this article o.Normal = N; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Na se√ß√£o anterior, introduzimos o conceito de mapeamento de resposta, que nos mostrou que parte do efeito exigir√° amostragem da textura (√© chamada no c√≥digo </font></font><code>uv_SandTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O problema com o c√≥digo acima √© que, para c√°lculos, voc√™ precisa saber a verdadeira posi√ß√£o do ponto que estamos desenhando. De fato, voc√™ precisa de uma </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">coordenada UV</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para provar a textura </font><font style="vertical-align: inherit;">, que determina de qual pixel ler. Se o modelo 3D que usamos √© relativamente plano e tem uma convers√£o de UV, podemos us√°-lo para provar uma textura aleat√≥ria.</font></font><br><br><pre> <code class="cpp hljs">N = WavesNormal(IN.uv_SandTex.xy, N); N = SandNormal (IN.uv_SandTex.xy, N);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou voc√™ tamb√©m pode usar a posi√ß√£o no mundo ( </font></font><code>IN.worldPos</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) do ponto renderizado. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora, finalmente, podemos nos concentrar em </font></font><code>SandNormal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sua implementa√ß√£o. </font><font style="vertical-align: inherit;">Como afirmado anteriormente nesta parte, a id√©ia √© coletar um pixel de uma textura aleat√≥ria e us√°-lo (ap√≥s converter em um vetor de unidade) como um novo normal.</font></font><br><br><pre> <code class="cpp hljs">sampler2D_float _SandTex; <span class="hljs-function"><span class="hljs-function">float3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SandNormal</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 uv, float3 N)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Random vector float3 random = tex2D(_SandTex, uv).rgb; // Random direction // [0,1]-&gt;[-1,+1] float3 S = normalize(random * 2 - 1); return S; }</span></span></code> </pre> <br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como zoom textura aleat√≥ria?</font></font></b> <div class="spoiler_text">    UV- 3D-      ,   .      ,       . <br><br>   ,  Unity   .   ,        <code>_SandText_ST</code> . Unity       (  ) <code>_SandTex</code> . <br><br>  <code>_SandText_ST</code>    :     .        ,          <em>Tiling</em>  <em>Offset</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f29/a84/059/f29a84059ab970f412217f09c87fcf6f.png"></div><br>       ,     <code>TRANSFORM_TEX</code> : <br><br><pre> <code class="cpp hljs">sampler2D_float _SandTex; float4 _SandTex_ST; <span class="hljs-function"><span class="hljs-function">float3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SandNormal</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 uv, float3 N)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Random vector float3 random = tex2D(_SandTex, TRANSFORM_TEX(uv, _SandTex)).rgb; // Random direction // [0,1]-&gt;[-1,+1] float3 S = normalize(random * 2 - 1); return S; }</span></span></code> </pre> </div></div><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Incline os normais </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O trecho de c√≥digo mostrado acima funciona, mas n√£o produz resultados muito bons. A raz√£o para isso √© simples: se retornarmos um normal completamente aleat√≥rio, mas essencialmente perdermos a sensa√ß√£o de curvatura. De fato, a dire√ß√£o do normal √© usada para calcular como a luz deve ser refletida da superf√≠cie, e seu principal objetivo √© sombrear o modelo de acordo com sua curvatura. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A diferen√ßa pode ser vista nas imagens abaixo. Acima, as normais das dunas s√£o completamente aleat√≥rias, e √© imposs√≠vel entender onde uma termina e outra come√ßa. Abaixo, apenas o normal do modelo √© usado, pelo que obtemos uma superf√≠cie muito lisa.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/620/9cb/acb/6209cbacb616db15bee5f95e314779c8.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/476/f0a/f25/476f0af2535dc2d552ce4b01a1d7751a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ambas as solu√ß√µes n√£o nos conv√™m. </font><font style="vertical-align: inherit;">Precisamos de algo no meio. </font><font style="vertical-align: inherit;">Uma dire√ß√£o aleat√≥ria amostrada de uma textura deve ser usada para </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inclinar o</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> normal em uma certa quantidade, como mostrado abaixo:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/929/dfb/7e6/929dfb7e6d4712b7c69a403d0733c25b.png" width="239" height="240"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A opera√ß√£o descrita no diagrama √© chamada </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">slerp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que significa </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">interpola√ß√£o</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> linear esf√©rica (interpola√ß√£o linear esf√©rica). </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O Slerp</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> funciona exatamente como o lerp, com uma exce√ß√£o - ele pode ser usado para interpolar com seguran√ßa entre vetores unit√°rios, e o resultado da opera√ß√£o ser√£o outros vetores unit√°rios. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infelizmente, a implementa√ß√£o correta do slerp √© bastante cara. </font><font style="vertical-align: inherit;">E para um efeito, pelo menos com base no acaso, √© il√≥gico us√°-lo.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostre-me a equa√ß√£o slerp</font></font></b> <div class="spoiler_text">    , <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-206"><span class="MJXp-msubsup" id="MJXp-Span-207"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-209" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.313ex" height="1.936ex" viewBox="-38.5 -535.3 995.9 833.5" role="img" focusable="false" style="vertical-align: -0.693ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="712" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-43">p_0</script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-210"><span class="MJXp-msubsup" id="MJXp-Span-211"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-213" style="vertical-align: -0.4em;">1</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.313ex" height="1.936ex" viewBox="-38.5 -535.3 995.9 833.5" role="img" focusable="false" style="vertical-align: -0.693ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="712" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-44">p_1</script>   ,       .  Ent√£o <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-214"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.085ex" height="2.486ex" viewBox="0 -772.3 2189.5 1070.5" role="img" focusable="false" style="vertical-align: -0.693ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6C" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-65" x="768" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-72" x="1234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="1686" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-45">slerp</script>    : <br><br>  (1) <p><math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-220"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">p</span><span class="MJXp-mrow" id="MJXp-Span-226"><span class="MJXp-mo" id="MJXp-Span-227" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.244em;"><span class="MJXp-right MJXp-scale7" style="font-size: 1.978em; margin-left: -0.05em;">(</span></span><span class="MJXp-msubsup" id="MJXp-Span-228"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-230" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-232"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-234" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-235" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">t</span><span class="MJXp-mo" id="MJXp-Span-237" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.244em;"><span class="MJXp-right MJXp-scale7" style="font-size: 1.978em; margin-left: -0.05em;">)</span></span></span><span class="MJXp-mo" id="MJXp-Span-238" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mfrac" id="MJXp-Span-239" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi" id="MJXp-Span-240">sin</span><span class="MJXp-mo" id="MJXp-Span-241" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-242"><span class="MJXp-mo" id="MJXp-Span-243" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mrow" id="MJXp-Span-244"><span class="MJXp-mo" id="MJXp-Span-245" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-246">1</span><span class="MJXp-mo" id="MJXp-Span-247" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">t</span><span class="MJXp-mo" id="MJXp-Span-249" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mi" id="MJXp-Span-250">Œ©</span><span class="MJXp-mo" id="MJXp-Span-251" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi" id="MJXp-Span-252">sin</span><span class="MJXp-mo" id="MJXp-Span-253" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-254"><span class="MJXp-mo" id="MJXp-Span-255" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi" id="MJXp-Span-256">Œ©</span><span class="MJXp-mo" id="MJXp-Span-257" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-258"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-260" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-261" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mfrac" id="MJXp-Span-262" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi" id="MJXp-Span-263">sin</span><span class="MJXp-mo" id="MJXp-Span-264" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-265"><span class="MJXp-mo" id="MJXp-Span-266" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">t</span><span class="MJXp-mi" id="MJXp-Span-268">Œ©</span><span class="MJXp-mo" id="MJXp-Span-269" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi" id="MJXp-Span-270">sin</span><span class="MJXp-mo" id="MJXp-Span-271" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mrow" id="MJXp-Span-272"><span class="MJXp-mo" id="MJXp-Span-273" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi" id="MJXp-Span-274">Œ©</span><span class="MJXp-mo" id="MJXp-Span-275" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-276"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-278" style="vertical-align: -0.4em;">1</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="46.744ex" height="6.202ex" viewBox="0 -1601.8 20125.7 2670.3" role="img" focusable="false" style="vertical-align: -2.482ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-6C" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-65" x="768" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-72" x="1234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="1686" y="0"></use><g transform="translate(2356,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="712" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2C" x="957" y="0"></use><g transform="translate(1402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2C" x="2359" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="2805" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-29" x="3556" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-3D" x="6579" y="0"></use><g transform="translate(7358,0)"><g transform="translate(397,0)"><rect stroke="none" width="5659" height="60" x="0" y="220"></rect><g transform="translate(60,739)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-73"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-69" x="394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-6E" x="673" y="0"></use><g transform="translate(1229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5B" x="0" y="0"></use><g transform="translate(278,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2212" x="722" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="1723" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-29" x="2474" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-3A9" x="3030" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-5D" x="4031" y="0"></use></g></g><g transform="translate(1464,-740)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-73"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-69" x="394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-6E" x="673" y="0"></use><g transform="translate(1229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-3A9" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-29" x="1112" y="0"></use></g></g></g></g><g transform="translate(13535,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="712" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-2B" x="14715" y="0"></use><g transform="translate(15493,0)"><g transform="translate(342,0)"><rect stroke="none" width="3212" height="60" x="0" y="220"></rect><g transform="translate(60,739)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-73"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-69" x="394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-6E" x="673" y="0"></use><g transform="translate(1229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-74" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-3A9" x="361" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-29" x="1473" y="0"></use></g></g><g transform="translate(240,-740)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-73"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-69" x="394" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-6E" x="673" y="0"></use><g transform="translate(1229,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-3A9" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-29" x="1112" y="0"></use></g></g></g></g><g transform="translate(19168,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="712" y="-213"></use></g></g></svg></span></div><script type="math/tex; mode=display" id="MathJax-Element-46">\begin{equation*} slerp\left(p_0, p_1, t\right) = \frac{\sin\left[\left(1-t\right)\Omega\right]}{\sin\left(\Omega\right)}p_0 + \frac{\sin\left(t\Omega\right)}{\sin\left(\Omega\right)} p_1 \end{equation*}</script> </math></p><br>  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-279"><span class="MJXp-mi" id="MJXp-Span-280">Œ©</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.678ex" height="2.074ex" viewBox="0 -772.3 722.5 892.8" role="img" focusable="false" style="vertical-align: -0.28ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-3A9" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-47">\Omega</script> ‚Äî     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-281"><span class="MJXp-msubsup" id="MJXp-Span-282"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-284" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.313ex" height="1.936ex" viewBox="-38.5 -535.3 995.9 833.5" role="img" focusable="false" style="vertical-align: -0.693ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-30" x="712" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-48">p_0</script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-285"><span class="MJXp-msubsup" id="MJXp-Span-286"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-287" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-288" style="vertical-align: -0.4em;">1</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.313ex" height="1.936ex" viewBox="-38.5 -535.3 995.9 833.5" role="img" focusable="false" style="vertical-align: -0.693ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMATHI-70" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/476448/&amp;usg=ALkJrhiC-WelrsCgVuYnCnBhwVpztf3_AQ#MJMAIN-31" x="712" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-49">p_1</script> ,       : <br><br> (2) <p><math> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-289"><span class="MJXp-mi" id="MJXp-Span-290">Œ©</span><span class="MJXp-mo" id="MJXp-Span-291" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293">o</span><span class="MJXp-msubsup" id="MJXp-Span-294"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-296" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-297">‚àí</span><span class="MJXp-mn" id="MJXp-Span-298">1</span></span></span><span class="MJXp-mrow" id="MJXp-Span-299"><span class="MJXp-mo" id="MJXp-Span-300" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.244em;"><span class="MJXp-right MJXp-scale7" style="font-size: 1.978em; margin-left: -0.05em;">(</span></span><span class="MJXp-msubsup" id="MJXp-Span-301"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-303" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-304" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-msubsup" id="MJXp-Span-305"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306" style="margin-right: 0.05em;">p</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-307" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-308" style="margin-left: 0em; margin-right: 0em; vertical-align: -0.244em;"><span class="MJXp-right MJXp-scale7" style="font-size: 1.978em; margin-left: -0.05em;">)</span></span></span></span></span><script type="math/tex; mode=display" id="MathJax-Element-50">\begin{equation*} \Omega=cos^{-1} \left(p_0 \cdot p_1 \right) \end{equation*}</script> </math></p><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â importante observar que, se usarmos </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a interpola√ß√£o linear</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tradicional </font><font style="vertical-align: inherit;">, o vetor resultante ser√° muito diferente:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eef/5e1/42f/eef5e142f1c8c05cac9b3d4f18d8e097.png" width="239" height="240"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A opera√ß√£o Lerp entre dois vetores de unidade separados nem sempre cria outros vetores de unidade. </font><font style="vertical-align: inherit;">De fato, isso nunca acontece, a menos que o coeficiente seja</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-309"><span class="MJXp-mn" id="MJXp-Span-310"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51">1</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-311"><span class="MJXp-mn" id="MJXp-Span-312"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 0</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52">0</script>  . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Apesar disso, ao normalizar o resultado do lerp, obtemos um vetor unit√°rio, surpreendentemente pr√≥ximo do resultado gerado pelo slerp: </font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">float3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nlerp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float3 n1, float3 n2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> t)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> normalize(lerp(n1, n2, t)); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essa t√©cnica, chamada </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nlerp</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , fornece uma aproxima√ß√£o aproximada do slerp. </font><font style="vertical-align: inherit;">Seu uso foi popularizado por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Casey Muratori</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um dos desenvolvedores do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The Witness</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Se voc√™ estiver interessado em aprender mais sobre este t√≥pico, recomendo os </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigos No√ß√µes b√°sicas sobre Slerp. </font><font style="vertical-align: inherit;">Ent√£o n√£o o </font></font></a> <font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">use </font></a><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;">por </font></a></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jonathan Blow</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Math Magician - Lerp, Slerp e Nlerp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gra√ßas ao nlerp, agora podemos inclinar com efici√™ncia vetores normais para um lado aleat√≥rio, amostrados de </font></font><code>_SandTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="cpp hljs">sampler2D_float _SandTex; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _SandStrength; <span class="hljs-function"><span class="hljs-function">float3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SandNormal</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(float2 uv, float3 N)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Random vector float3 random = tex2D(_SandTex, uv).rgb; // Random direction // [0,1]-&gt;[-1,+1] float3 S = normalize(random * 2 - 1); // Rotates N towards Ns based on _SandStrength float3 Ns = nlerp(N, S, _SandStrength); return Ns; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O resultado √© mostrado abaixo: </font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/rddUAStRjZ8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  O que vem a seguir </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Na pr√≥xima parte, consideraremos as reflex√µes tremeluzentes, gra√ßas √†s quais as dunas se parecer√£o com o oceano. </font></font><br><br><h3>  Agradecimentos </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O videogame </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> foi </font><font style="vertical-align: inherit;">desenvolvido pela </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thatgamecompany</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e publicado pela </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sony Computer Entertainment</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Est√° dispon√≠vel para PC ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Epic Store</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) e PS4 ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS Store</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelos 3D de fundos de dunas e op√ß√µes de ilumina√ß√£o s√£o criados por </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jiadi Deng</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um modelo 3D do personagem de Journey foi encontrado no f√≥rum FacePunch (agora fechado).</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pacote Unity </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ deseja recriar esse efeito, o pacote completo do Unity pode ser baixado do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="noopener noreferrer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patreon</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Inclui tudo o que voc√™ precisa, de sombreadores a modelos 3D.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt476448/">https://habr.com/ru/post/pt476448/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt476434/index.html">Escrevemos drivers USB para dispositivos abandonados</a></li>
<li><a href="../pt476436/index.html">Relat√≥rios da primeira reuni√£o na R√∫ssia de desenvolvedores de rob√¥s no sistema operacional do rob√¥</a></li>
<li><a href="../pt476442/index.html">D√™ algum espa√ßo ou um microcontrolador como um medidor de frequ√™ncia</a></li>
<li><a href="../pt476444/index.html">Desmistifica√ß√£o dos princ√≠pios da computa√ß√£o qu√¢ntica</a></li>
<li><a href="../pt476446/index.html">Jira Plugins: alguns exemplos da inven√ß√£o bem sucedida da bicicleta</a></li>
<li><a href="../pt476450/index.html">Vis√£o geral do cPanel - um console baseado na Web para gerenciar sites e hospedagem</a></li>
<li><a href="../pt476452/index.html">Armazenamento de valor-chave ou como nossos aplicativos se tornaram mais convenientes</a></li>
<li><a href="../pt476454/index.html">O 5G est√° chegando: quais empresas garantir√£o a introdu√ß√£o de novas tecnologias em 2020</a></li>
<li><a href="../pt476456/index.html">O sistema de cr√©dito social chin√™s n√£o √©, antes de tudo, um sistema de avalia√ß√£o de cidad√£os, mas uma API massiva</a></li>
<li><a href="../pt476460/index.html">O primeiro formato de arquivo de sucesso na Internet n√£o foi o MP3, mas o MIDI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>