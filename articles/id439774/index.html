<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖖🏿 👩‍👩‍👧‍👧 👨🏿‍🎨 Mengotomatiskan pengujian penyeleksi redux dalam aplikasi 🈴 ⏰ 👅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel ini, saya ingin membagikan ide-ide saya tentang cara mengotomatiskan penulisan unit test dalam aplikasi react / redux. Ide-ide ini lahir ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mengotomatiskan pengujian penyeleksi redux dalam aplikasi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439774/">  Pada artikel ini, saya ingin membagikan ide-ide saya tentang cara mengotomatiskan penulisan unit test dalam aplikasi react / redux.  Ide-ide ini lahir dalam salah satu diskusi dengan kolega, dalam proses penulisan tes, dan, menurut saya, solusi yang diusulkan memiliki hak untuk hidup. <br><a name="habracut"></a><br><h3>  Tentang masalah </h3><br>  Saya ingin menghilangkan pemikiran tentang perlunya unit test dan langsung ke pokok permasalahan.  Bagaimana kami menguji penyeleksi sekarang? <br><br>  Selektor redux adalah fungsi yang mengambil status aplikasi (toko) dan mengembalikan hasilnya.  Bahkan jika pemilih dibuat menggunakan pilih kembali createSelector () dan menggabungkan beberapa penyeleksi, ia juga menerima store sebagai input. <br><br>  Oleh karena itu, untuk menguji pemilih, untuk kebaikan, Anda harus mentransfer pemberhentian penuh untuk itu.  Tentu saja, membuat toko tiruan dapat menghilangkan area yang tidak perlu, tetapi jika kita menguji pemilih kompleks yang menggabungkan pemilih lain dari berbagai bagian toko, kita harus menciptakan kembali keadaan penuh atau hampir lengkap.  Dan untuk setiap kasus. <br><br>  Di sini Anda dapat melakukan beberapa cara: <br><br><ul><li>  Untuk membuat ulang status aplikasi dalam lingkungan uji dan membongkar status, menggunakan, misalnya, ekstensi redux devtools; </li><li> Buat saja objek, seperti kata mereka, dengan pena.  Jika aplikasinya besar dan kondisinya berisi banyak "cabang", ini bisa menjadi proses yang agak rumit dan melelahkan. </li></ul><br><h3>  Ide otomatisasi proses </h3><br>  Bayangkan Anda memiliki middleware yang, antara lain, tahu tentang semua pemilih aplikasi.  Middleware semacam itu dapat, setelah setiap tindakan, menghitung semua penyeleksi dan menyiapkan test case yang terdiri dari: <br><br><ul><li>  Peristiwa yang terjadi (aksi); </li><li>  Status aplikasi (toko); </li><li>  Hasil mengeksekusi semua penyeleksi dengan status ini; </li></ul><br>  Dengan demikian, untuk setiap tindakan, kita akan memiliki kumpulan data: keadaan aplikasi untuk transmisi ke penyeleksi dan hasil yang diharapkan - pada kenyataannya, untuk membandingkan. <br><br>  Yaitu  kami memiliki set data dari aplikasi nyata, persiapan yang memakan waktu minimum. <br><br>  Tetap hanya mempelajari cara menyimpan data ini dan entah bagaimana secara otomatis melakukan penyeleksi dan membandingkan hasilnya, tetapi tugas ini sederhana, teknis, dan saya telah menyelesaikannya untuk Anda.  Dalam bab ini, saya hanya ingin menyampaikan ide. <br><br><h3>  Bagaimana cara kerjanya? </h3><br>  Jika secara umum idenya jelas (dan tampaknya cukup untuk Anda :)), saya mengusulkan untuk melanjutkan implementasi.  Pertama, kita memerlukan ekstensi browser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Redux CheckState</a> . <br>  Ekstensi ini mendapatkan semua tindakan aplikasi Anda, mengeksekusi penyeleksi, dan menyimpan kasus uji.  Pada akhirnya, di sana Anda mengklik tombol dan mengunduh file dengan kasus uji yang dihasilkan. <br><br>  Itu terlihat seperti ini: <br><br><img src="https://habrastorage.org/webt/od/9w/y8/od9wy81s9oxpwexnidqsgw0orks.png" alt="Tangkapan Layar Redux CheckState"><br><br>  Agar ekstensi menerima data tentang tindakan yang sedang berlangsung dan dapat melakukan silector, Anda perlu melakukan manipulasi kecil dengan proyek. <br><br><h4>  Langkah 1. Ekspor pemilih </h4><br>  Di root proyek, Anda perlu membuat file checkState.config.js dan mengekspor semua penyeleksi yang ingin Anda uji darinya.  Dalam proyek pengujian saya, ini terlihat seperti ini: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> { selectCategories, selectActiveCategory, selectIsCategoryActive, selectActiveCategoryId, } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./state/category"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> { selectPopup, selectPopupType, selectIsPopupOpen, } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./state/popup"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> { selectTasks, selectActiveTasks, selectActiveDoneTasks, selectActiveInProgressTasks, } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./state/task"</span></span>;</code> </pre> <br>  <i>Lihat contoh di <a href="">github</a> .</i> <br><br><h4>  Langkah 2. Implementasi Middleware </h4><br>  Sekarang Anda perlu menambahkan middleware, yang akan mentransfer semua tindakan dan data lainnya ke ekstensi. <br><br>  Kode ini sangat sederhana: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> selectors <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"./checkState.config"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> checkStateMiddleware = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options = {}</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[<span class="hljs-string"><span class="hljs-string">"__checkStoreExtension__"</span></span>] ? <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>[<span class="hljs-string"><span class="hljs-string">"__checkStoreExtension__"</span></span>](options) : <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">store</span></span></span><span class="hljs-function"> =&gt;</span></span> next =&gt; <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> next(action); };</code> </pre> <br>  <i>Dalam <a href="">aplikasi pengujian</a> saya <a href="">,</a> Anda juga dapat melihat opsi implementasi naskah.</i> <br><br>  Itu saja, pengkodean pada ini selesai.  Sekarang kami meluncurkan aplikasi, buka ekstensi dan mulai menggunakan aplikasi sebagai pengguna.  Anda harus menyelesaikan game aksi sebanyak mungkin.  Setiap tindakan sempurna akan Anda lihat di ekstensi.  Anda juga dapat mengklik tindakan apa pun dan melihat hasil pemilih. <br><br>  Ketika semua tindakan sudah sempurna - cukup unduh file dan masukkan ke proyek.  Sekarang tinggal menjalankan tes.  Itu masih lebih mudah. <br><br><h4>  Menjalankan tes </h4><br>  Untuk menjalankan tes, saya menyiapkan alat CLI.  Instal paket: <br><blockquote>  npm saya cek-state -g </blockquote><br>  Setelah itu, di folder proyek, jalankan perintah: <br><blockquote>  check-state start </blockquote><br>  Periksa status CLI akan menemukan file dengan kasus uji yang dihasilkan oleh ekstensi browser, itu akan menemukan dan mengkompilasi penyeleksi yang diekspor (sementara javascript dan jenis naskah didukung). <br>  Setelah itu, semua kasus uji akan lulus secara berturut-turut, setiap pemilih akan dieksekusi dengan status aplikasi dari kasus uji dan nilai yang dihitung akan dibandingkan dengan yang diharapkan (juga dari kasus uji).  Jika tidak ada perbedaan, kita akan melihat garis hijau, jika ada garis merah, dengan informasi yang akan membantu mendiagnosis masalah: <br><br><ul><li>  Nama pemilih yang mengembalikan hasil yang salah; </li><li>  Hasil yang Diharapkan </li><li>  Hasil saat ini; </li><li>  Cuplikan status aplikasi dari test case. </li></ul><br><img src="https://habrastorage.org/webt/te/s6/wu/tes6wuqfqw0qxq60pn0flksc-28.png" alt="Periksa status tangkapan layar alat CLI"><br>  <i>Contoh dari tes "jatuh".</i> <br><br>  Agar Anda dapat bereksperimen dengan alat ini, saya menyiapkan aplikasi uji yang memiliki beberapa penyeleksi dan sudah menerapkan kondisi Periksa: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh aplikasi</a> <br><br><h3>  Kesimpulan </h3><br>  Saya harap Anda menyukai gagasan mengotomatiskan penulisan autotest, dan mungkin Anda akan menerapkan pendekatan ini dalam proyek Anda :) <br><br>  Jika Anda tertarik dengan implementasi teknis alat: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ekstensi</a> browser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Redux CheckState di github</a> ; </li><li>  Alat CLI <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Periksa status pada github</a> . </li></ul><br>  Saya akan senang dengan ide dan komentar :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id439774/">https://habr.com/ru/post/id439774/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id439762/index.html">Tentang pendidikan tinggi, programmer dan pekerjaan kerah biru</a></li>
<li><a href="../id439764/index.html">Buah Perusahaan</a></li>
<li><a href="../id439766/index.html">Tingkatkan itu! Peningkatan resolusi modern</a></li>
<li><a href="../id439768/index.html">Bagaimana cara kerja barcode?</a></li>
<li><a href="../id439772/index.html">Unit Tes menulis di Swift untuk menguji tugas yang tidak sinkron</a></li>
<li><a href="../id439776/index.html">Frontend Weekly Digest (4 - 10 Feb 2019)</a></li>
<li><a href="../id439778/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 351 (4 - 10 Februari 2019)</a></li>
<li><a href="../id439780/index.html">PHP Digest No. 149 (28 Januari - 11 Februari 2019)</a></li>
<li><a href="../id439782/index.html">CMS tanpa kepala - masa depan dalam manajemen konten</a></li>
<li><a href="../id439784/index.html">Mesin Metana Raptor Memecah Rekor RD-180</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>