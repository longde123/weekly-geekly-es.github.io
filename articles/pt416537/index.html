<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤜🏿 🎅🏼 🚒 Oficinas em Wireshark 🧞 👂🏾 👩🏼‍⚖️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Julia Evans, autora do material que publicamos hoje, decidiu falar sobre uma de suas ferramentas de rede favoritas chamada Wireshark . Este é um progr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Oficinas em Wireshark</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/416537/">  Julia Evans, autora do material que publicamos hoje, decidiu falar sobre uma de suas ferramentas de rede favoritas chamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Wireshark</a> .  Este é um programa poderoso e complexo, equipado com uma interface gráfica, projetada para analisar o tráfego nas redes de computadores.  Julia diz que, na prática, ela usa apenas alguns dos recursos do Wireshark, mas eles geralmente são úteis.  Aqui, ela deseja compartilhar com todos que desejam uma história sobre os métodos mais úteis para trabalhar com o programa e espera que sejam úteis não apenas para ela, mas também para todos que precisam resolver problemas de rede. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/rz/ag/uw/rzaguwsi5logcjjqkre-sglko0o.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Instale o Wireshark</font> </h2><br>  As distribuições do Wireshark para vários sistemas operacionais podem ser encontradas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Para instalar o programa, você pode baixar e instalar o arquivo correspondente.  Como alternativa, se você usa distribuições Linux baseadas no Debian, pode usar o comando <code>sudo apt install wireshark</code> .  Se desejar, para encontrar a versão mais recente do programa, você pode consultar o arquivo pessoal dos pacotes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wireshark-dev</a> . <br><br>  É assim que a interface do programa se parece. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/485/d33/40c/485d3340cca2688b2d8460c7263b1d31.png"></div><br>  <i><font color="#999999">Interface Wireshark</font></i> <br><br>  À primeira vista, tudo isso pode parecer muito complicado: uma longa lista de pacotes, um campo misterioso para inserir algum tipo de solicitação ... Como trabalhar com o Wireshark? <br><br><h2>  <font color="#3AC1EF">Análise de arquivos pcap</font> </h2><br>  Eu normalmente uso o Wireshark para descobrir as causas dos problemas de rede.  A sequência de ações executadas no curso da solução de tais problemas é semelhante a esta: <br><br><ol><li>  Capture pacotes com o <code>tcpdump</code> (geralmente com um comando como <code>sudo tcpdump port 443 -w output.pcap</code> ). </li><li>  Copiando o arquivo pcap para um laptop em funcionamento ( <code>scp host:~/output.pcap .</code> ). </li><li>  Abrindo um arquivo pcap usando o Wireshark ( <code>wireshark output.pcap</code> ). </li></ol><br>  Como você pode ver, tudo é muito simples.  No entanto, após a abertura do arquivo pcap no programa, você pode ter uma pergunta lógica sobre o que fazer com tudo isso.  Vamos conversar sobre isso. <br><br><h2>  <font color="#3AC1EF">Análise de conexão TCP</font> </h2><br>  Frequentemente, quando analiso uma determinada situação no Wireshark, preciso verificar alguma conexão TCP específica, com a qual, por algum motivo, algo está errado.  Graças ao Wireshark, você pode analisar todo o ciclo de vida de uma conexão TCP individual e descobrir as causas do comportamento incorreto do sistema. <br><br>  Você pode fazer isso clicando com o botão direito do mouse no pacote em que está interessado e escolhendo o comando <code>Conversation filter &gt; TCP</code> no menu de contexto. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a9a/1ce/e15/a9a1cee15deb7869196dc71cee5800af.png"></div><br>  <i><font color="#999999">Iniciar análise de conexão TCP</font></i> <br><br>  Depois disso, o Wireshark mostrará outros pacotes da mesma conexão TCP à qual o pacote em que você clicou pertence.  Na figura abaixo, você pode ver um exemplo de uma conexão SSL bem-sucedida - existem pacotes de <code>client hello</code> , <code>service hello</code> , <code>certificate</code> , <code>server key exchange</code> que são usados ​​para estabelecer conexões SSL. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/53e/bfc/ae9/53ebfcae9417574c6423124725e6a373.png"></div><br>  <i><font color="#999999">Análise de conexão TCP</font></i> <br><br>  A técnica de análise de pacotes TCP discutida aqui eu tive que usar no dia em que este artigo foi escrito, no trabalho.  Algumas conexões foram interrompidas e notei que, depois de enviar o pacote <code>client hello</code> do <code>client hello</code> , o <code>client hello</code> enviou o pacote <code>FIN ACK</code> , que encerrou a conexão TLS.  O que eu consegui descobrir acabou sendo útil, pois ficou claro que o cliente e não o servidor estavam encerrando a conexão.  Como resultado, descobri imediatamente que o problema está no cliente e preciso prestar atenção. <br><br>  O acima é um esquema muito típico para mim de trabalhar com o Wireshark.  Normalmente, o cliente e o servidor estão envolvidos na conexão, e algo dá errado no cliente ou no servidor.  Pode ser, por exemplo, algum tipo de falha ou erro nas configurações do sistema.  Como resultado, o Wireshark fornece uma ajuda inestimável para identificar o culpado dos problemas, ajudando a descobrir se é um cliente ou um servidor. <br><br><h2>  <font color="#3AC1EF">Decodificar como equipe</font> </h2><br>  Para entender exatamente o que é um pacote específico, o Wireshark usa números de porta, e essa abordagem geralmente funciona.  Por exemplo, se um programa vê algum tráfego na porta 80, decide que é tráfego HTTP e geralmente é. <br><br>  No entanto, às vezes as conexões HTTP usam portas incomuns e, como resultado, o Wireshark precisa de dicas para reconhecê-las.  Essas dicas podem ser dadas ao programa chamando o menu de contexto do pacote e selecionando o comando <code>Decode as</code> lá.  Além disso, você pode dizer ao Wireshark qual protocolo é usado para transmitir pacotes usando uma determinada porta.  Essas dicas simplificam a análise de dados. <br><br><h2>  <font color="#3AC1EF">Exibir conteúdo do pacote</font> </h2><br>  No Wireshark, existe simplesmente um modo agradável para exibir informações detalhadas sobre um pacote, com o qual você pode entender o conteúdo de qualquer pacote.  Pegue, por exemplo, o pacote com a mensagem <code>client hello</code> do <code>client hello</code> do exemplo anterior.  Este é o primeiro pacote de conexão SSL, o cliente com sua ajuda como se dissesse: “Olá!  Aqui estou eu! <br><br>  O Wireshark oferece ao administrador da rede duas ferramentas incrivelmente úteis para examinar o conteúdo do pacote.  O primeiro é um modo de visualização no qual você pode expandir os cabeçalhos disponíveis para o pacote (por exemplo, cabeçalho Ethernet, cabeçalho IP, cabeçalho TCP) e visualizar seu conteúdo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a2f/990/77a/a2f99077a2e3cdb10652ad3a387103f0.png"></div><br>  <i><font color="#999999">Análise de cabeçalho de pacote</font></i> <br><br>  O segundo modo de visualizar pacotes é um verdadeiro milagre.  Aqui você pode ver os dados brutos do pacote como uma sequência de bytes.  E, o que é especialmente interessante, se você passar o mouse sobre um byte (por exemplo, na figura abaixo, o cursor está no byte incluído em <code>tiles.services.mozilla.com</code> ), o programa, na barra de status, informará a qual campo pertence. este byte (neste caso, é o campo <code>Server Name</code> do <code>Server Name</code> ) e sobre o nome de código usado pelo Wireshark para este campo (neste caso - <code>ssl.handshake.extensions_server_name</code> ) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d50/6e8/b35/d506e8b3512c273fd66a94796230f4e5.png"></div><br>  <i><font color="#999999">Análise de dados de pacotes brutos</font></i> <br><br><h2>  <font color="#3AC1EF">Pesquisa de Pacotes</font> </h2><br>  O Wireshark suporta uma poderosa linguagem de consulta.  Isso simplifica bastante a busca por pacotes específicos nas listas.  Normalmente, ao trabalhar com um programa, uso consultas muito simples.  Aqui estão alguns exemplos: <br><br><ul><li>  O <code>frame contains "mozilla"</code> consulta <code>frame contains "mozilla"</code> permite procurar a linha do <code>mozilla</code> em qualquer lugar do pacote e listar os pacotes encontrados. </li><li>  A solicitação <code>tcp.port == 443</code> exibe pacotes usando a porta TCP 443. </li><li>  A consulta <code>dns.resp.len &gt; 0</code> exibe todas as respostas DNS </li><li>  A <code>ip.addr == 52.7.23.87</code> exibe pacotes cujo endereço IP de origem ou destino é 52.7.23.87. </li></ul><br>  A linguagem de consulta do Wireshark possui recursos muito maiores do que a linguagem de consulta <code>tcpdump</code> (e, além disso, suporta o preenchimento automático pressionando a tecla TAB).  Como resultado, costumo usar a seguinte sequência de ações: captura uma grande quantidade de pacotes usando o <code>tcpdump</code> (digamos, algo como todos os pacotes da porta 443) e os estudo cuidadosamente usando o Wireshark. <br><br><h2>  <font color="#3AC1EF">Exibir detalhes da duração da conexão TCP</font> </h2><br>  Às vezes, preciso prestar atenção especial ao estudo de conexões TCP lentas.  Como fazer isso, desde que no meu arquivo haja registros de milhares de pacotes?  Como encontrar conexões TCP lentas? <br><br>  Se você selecionar <code>Statistics</code> no menu principal do programa e o comando <code>Conversations</code> , o Wireshark fornecerá um conjunto maravilhoso de informações estatísticas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e1a/477/968/e1a477968ed8e4473600709d927efe58.png"></div><br>  <i><font color="#999999">Informação estatística</font></i> <br><br>  Em particular, aqui, na coluna <code>Duration</code> , você pode ver a duração das conexões TCP, identificar a mais longa delas e estudá-las cuidadosamente.  Este é um recurso muito útil. <br><br><h2>  <font color="#3AC1EF">Atualização do Wireshark</font> </h2><br>  Se você não atualiza o Wireshark há muito tempo, vale a pena fazer isso.  Por exemplo, recentemente, em um laptop em funcionamento, eu estava pesquisando pacotes HTTP / 2.  Não foi fácil para mim, então, e decidi examinar a documentação.  Como se viu, eu tinha uma versão antiga do programa.  Na atualização que instalei, o suporte ao HTTP / 2 foi seriamente aprimorado, ou seja, havia exatamente o que eu precisava naquele momento. <br><br><h2>  <font color="#3AC1EF">Usando o Wireshark para aprender protocolos de rede</font> </h2><br>  Este artigo contém alguns termos que podem ser atribuídos a algo como o jargão dos especialistas em rede.  Por exemplo - quadro, porta TCP (porta TCP), resposta DNS (resposta DNS), endereço IP de origem (endereço IP de origem), conexões SSL do pacote <code>client hello</code> (hello do cliente SSL).  Uma das razões para usá-los é o fato de que o Wireshark definitivamente não está tentando proteger o usuário dos meandros da estrutura interna das tecnologias de rede.  Para um iniciante, esse estado de coisas pode, inicialmente, fazer você pensar que o Wireshark não é um programa para ele, mas apenas para especialistas experientes em rede. <br><br>  O foco do Wireshark nos mecanismos de rede de baixo nível, no entanto, tem uma grande vantagem.  O fato é que, trabalhando com este programa, você pode aprender algo novo sobre protocolos de rede.  Por exemplo, não sei muito sobre os mecanismos internos do protocolo TLS / SSL.  No entanto, analisando o tráfego no Wireshark, notei que os dois primeiros pacotes da conexão SSL são o <code>client hello</code> e o <code>server hello</code> .  Como resultado, o protocolo, que, se não se aprofundar nos detalhes de sua obra, parece misterioso e inacessível ao entendimento, passa a assumir uma forma mais compreensível, transforma-se em algo que pode ser entendido e analisado. <br><br><h2>  <font color="#3AC1EF">Sumário</font> </h2><br>  O Wireshark tem enormes oportunidades.  Aqui nós conversamos apenas sobre alguns deles.  No entanto, os métodos de trabalho discutidos aqui, de acordo com o autor do material, são usados ​​em cerca de 95% das situações em que há necessidade do Wireshark.  Portanto, esperamos que mesmo o pouco que você aprendeu hoje seja útil para você. <br><br>  <b>Caros leitores!</b>  Você usa o Wireshark? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt416537/">https://habr.com/ru/post/pt416537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt416525/index.html">Segredos do design bem-sucedido de IP (sistema de informação) no exemplo da construção de um hospital</a></li>
<li><a href="../pt416527/index.html">Virgin Galactic concordou em usar o espaçoporto italiano</a></li>
<li><a href="../pt416531/index.html">Treinamento GAN em Sustentabilidade</a></li>
<li><a href="../pt416533/index.html">O resumo de materiais frescos do mundo do front-end da última semana n ° 322 (2 a 8 de julho de 2018)</a></li>
<li><a href="../pt416535/index.html">Eventos digitais em Moscou 9 a 15 de julho</a></li>
<li><a href="../pt416539/index.html">15 propriedades e métodos pouco conhecidos de objetos DOM</a></li>
<li><a href="../pt416541/index.html">Perguntas freqüentes sobre energia renovável, parte 2</a></li>
<li><a href="../pt416543/index.html">PHP Digest No. 134 (24 de junho a 8 de julho de 2018)</a></li>
<li><a href="../pt416545/index.html">Fatia de experiência pessoal: desenvolvimento, solicitações de recebimento, confirmações, habilidades de software</a></li>
<li><a href="../pt416547/index.html">Rostec deixa a Yota Devices, um smartphone com duas telas será oferecido aos assinantes da Agência de Notícias Xinhua</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>