<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚èÆÔ∏è üë©üèæ‚Äçüé§ üëç Ir a asegurar 2FA en la cadena de bloques üöµüèæ üë¶üèæ üë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Los mensajes SMS son el m√©todo de autenticaci√≥n de dos factores (2FA) m√°s popular. Es utilizado por bancos, billeteras electr√≥nicas y criptogr√°ficas, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ir a asegurar 2FA en la cadena de bloques</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476090/">  Los mensajes SMS son el m√©todo de autenticaci√≥n de dos factores (2FA) m√°s popular.  Es utilizado por bancos, billeteras electr√≥nicas y criptogr√°ficas, buzones y todo tipo de servicios;  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El n√∫mero de usuarios del m√©todo se acerca al 100%</a> . <br><br>  Tengo un brote de eventos es indignante, porque este m√©todo no es seguro.  La reasignaci√≥n del n√∫mero de una tarjeta SIM a otra comenz√≥ al comienzo de la era m√≥vil; as√≠ es como se restaura el n√∫mero cuando se pierde la SIM.  Los ‚Äúespecialistas en destete de dinero digital‚Äù se dieron cuenta: la opci√≥n ‚Äúsobrescribir tarjetas SIM‚Äù puede usarse en esquemas fraudulentos.  Despu√©s de todo, quien controla la tarjeta SIM puede administrar la banca en l√≠nea, las billeteras electr√≥nicas e incluso las criptomonedas de otras personas.  Y puede hacerse cargo del n√∫mero de otra persona sobornando a un empleado de telecomunicaciones mediante fraude o documentos falsos. <br><br><img src="https://habrastorage.org/webt/sm/lg/oh/smlgohi_vtrtginwsqvp3t2jqy8.png"><br><br>  Se han revelado miles de episodios de intercambio de SIM: as√≠ se ha llamado a este esquema de fraude.  La escala del desastre sugiere que el mundo pronto abandonar√° el 2FA por SMS.  Pero esto no sucede: el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estudio</a> dice que no son los usuarios los que eligen el m√©todo 2FA, sino los propietarios del servicio. <br><br>  Sugerimos usar el m√©todo 2FA seguro con la entrega de c√≥digos √∫nicos a trav√©s de blockchain, y le diremos c√≥mo conectarlo con el propietario del servicio. <br><a name="habracut"></a><br><h2>  La cuenta va a millones </h2><br>  En 2019, el fraude de intercambio de SIM aument√≥ en un 63% seg√∫n la polic√≠a de Londres, y el "cheque promedio" del atacante fue de 4,000 GBP.  No encontr√© estad√≠sticas en Rusia, pero supongo que es a√∫n peor. <br><br>  El intercambio de SIM se usa para robar cuentas populares de Twitter, Instagram, Facebook, VK, cuentas bancarias y recientemente lleg√≥ a las criptomonedas, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">informa el peri√≥dico Times</a> del empresario de bitcoins Joby Weeks.  Los casos de alto perfil de robo de criptomonedas con la ayuda del intercambio de SIM han aparecido en la prensa desde 2016;  En 2019 lleg√≥ un verdadero pico. <br><br>  En mayo, los fiscales estadounidenses en el distrito oriental de Michigan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">acusaron a</a> nueve j√≥venes de entre 19 y 26 a√±os: supuestamente eran miembros de una banda de hackers llamada The Community.  La pandilla est√° acusada de siete ataques de intercambio, como resultado de lo cual los piratas inform√°ticos se apropiaron de la criptomoneda por un valor de m√°s de $ 2.4 millones.  Y en abril, un estudiante de California, Joel Ortiz, recibi√≥ 10 a√±os de prisi√≥n por el intercambio de SIM;  $ 7,5 millones en criptomonedas se convirtieron en su presa. <br><br><img src="https://habrastorage.org/webt/xy/b4/61/xyb4614ligd5ao0hslycslmxq3u.jpeg"><br>  <i>Foto de Joel Ortiz en una conferencia de prensa universitaria.</i>  <i>Dos a√±os despu√©s, ser√° detenido por fraude cibern√©tico.</i> <br><br><h2>  El principio del intercambio de SIM </h2><br>  Intercambio significa intercambio.  En todos estos esquemas, los delincuentes asignan el n√∫mero de tel√©fono de una v√≠ctima, generalmente mediante la reemisi√≥n de una tarjeta SIM, y la usan para restablecer una contrase√±a.  Un intercambio de SIM t√≠pico en teor√≠a se ve as√≠: <br><br><ol><li>  Inteligencia  Los estafadores descubren los datos personales de la v√≠ctima: nombre y tel√©fono.  Se pueden encontrar en fuentes abiertas (redes sociales, amigos) o se pueden obtener de un c√≥mplice, un empleado de un operador de telefon√≠a m√≥vil. </li><li>  Bloqueo  La tarjeta SIM de la v√≠ctima est√° desactivada;  Para hacer esto, simplemente llame al soporte t√©cnico del proveedor, informe el n√∫mero y diga que se ha perdido el tel√©fono. </li><li>  Capture, transfiera n√∫meros a su tarjeta SIM.  Por lo general, esto tambi√©n se hace a trav√©s de un c√≥mplice en una empresa de telecomunicaciones o falsificando documentos. </li></ol><br>  En la vida real es a√∫n m√°s grave.  Los atacantes seleccionan a una v√≠ctima y luego controlan diariamente la ubicaci√≥n del tel√©fono: una solicitud de informaci√≥n que el suscriptor ha cambiado a roaming cuesta 1-2 centavos.  Tan pronto como el propietario de la tarjeta SIM se haya ido al extranjero, acuerdan con el gerente del sal√≥n de comunicaci√≥n emitir una nueva tarjeta SIM.  Cuesta alrededor de $ 50 (encontr√© informaci√≥n, en diferentes pa√≠ses y de diferentes operadores de $ 20 a $ 100), mientras que el gerente ser√° despedido en el peor de los casos, no hay responsabilidad. <br><br>  Ahora todos los intrusos recibir√°n todos los SMS, y el propietario del tel√©fono no podr√° hacer nada al respecto: est√° en el extranjero.  Y luego los villanos obtienen acceso a todas las cuentas de la v√≠ctima y, si lo desean, cambian las contrase√±as. <br><br><h2>  Posibilidades de devolver bienes robados </h2><br>  Los bancos a veces van hacia las v√≠ctimas y retiran transferencias de sus cuentas.  Por lo tanto, es posible devolver dinero fiduciario, incluso si no se encuentra al delincuente.  Pero con las billeteras de criptomonedas, todo es m√°s complicado, tanto <i>t√©cnica</i> como legalmente.  Hasta ahora, ning√∫n intercambio / billetera ha pagado una compensaci√≥n a las v√≠ctimas de intercambio. <br><br>  Si las v√≠ctimas quieren defender su dinero en los tribunales, acusan al operador: cre√≥ las condiciones para el robo de dinero de la cuenta.  Esto es exactamente lo que hizo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Michael Turpin</a> , quien perdi√≥ $ 224 millones debido al canje. Ahora est√° demandando a la compa√±√≠a de telecomunicaciones AT&amp;T. <br><br><img src="https://habrastorage.org/webt/1d/bx/cp/1dbxcp8cbskbzhc8dlpwm3rqggm.png"><br><br>  Hasta ahora, ning√∫n estado tiene esquemas de trabajo para proteger legalmente a los propietarios de criptomonedas.  Es imposible asegurar su capital o recibir una compensaci√≥n por su p√©rdida.  Por lo tanto, prevenir un ataque de intercambio es m√°s f√°cil que combatir sus consecuencias.  La forma m√°s obvia es utilizar un "segundo factor" m√°s confiable para 2FA. <br><br><h2>  El intercambio de SIM no es el √∫nico problema de 2FA por SMS </h2><br>  Los c√≥digos de confirmaci√≥n en SMS tambi√©n son inseguros desde un punto de vista t√©cnico.  Los mensajes pueden ser interceptados debido a vulnerabilidades fatales en el Sistema de Se√±alizaci√≥n 7 (SS7).  2FA by SMS se reconoce oficialmente como inseguro (el Instituto Nacional de Est√°ndares y Tecnolog√≠a de EE. UU. Habla de esto en su <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gu√≠a de autenticaci√≥n digital</a> ). <br><br>  Adem√°s, la presencia de 2FA a menudo inspira al usuario con una sensaci√≥n de falsa seguridad, y elige una contrase√±a m√°s simple.  Por lo tanto, dicha autenticaci√≥n no complica, pero facilita el acceso de un atacante a la cuenta. <br><br>  Y, a menudo, los SMS vienen con un largo retraso o no llegan en absoluto. <br><br><h2>  Otros m√©todos 2FA </h2><br>  Por supuesto, en tel√©fonos inteligentes y SMS, la luz no convergi√≥.  Hay otros m√©todos 2FA.  Por ejemplo, c√≥digos TAN √∫nicos: el m√©todo es primitivo, pero funciona, todav√≠a se usa en algunos bancos.  Existen sistemas que utilizan datos biom√©tricos: huellas dactilares, escaneos retinianos.  Otra opci√≥n que parece un compromiso razonable en t√©rminos de conveniencia, confiabilidad y precio son las aplicaciones especiales para 2FA: RSA Token, Google Authenticator.  Y hay claves f√≠sicas y otros m√©todos. <br><br>  En teor√≠a, todo parece l√≥gico y confiable.  Pero en la pr√°ctica, las soluciones modernas de 2FA tienen problemas y, debido a ellos, la realidad es diferente de las expectativas. <br><br>  Seg√∫n el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estudio</a> , el uso de 2FA es un inconveniente en principio, y la popularidad de 2FA a trav√©s de SMS se explica por "menos inconvenientes en comparaci√≥n con otros m√©todos": recibir c√≥digos √∫nicos es comprensible para el usuario. <br><br>  Muchos usuarios de m√©todos 2FA se asocian con el temor de que se pierda el acceso.  Se puede perder o robar una clave f√≠sica o una lista de contrase√±as de TAN.  Personalmente, tengo una experiencia negativa con Google Authenticator.  Se rompi√≥ mi primer tel√©fono inteligente con esta aplicaci√≥n: eval√∫e mis esfuerzos para restaurar el acceso a las cuentas.  Otro problema es la transici√≥n a un nuevo dispositivo.  Google Authenticator no puede exportar debido a problemas de seguridad (si las claves se pueden exportar, ¬øqu√© tipo de seguridad existe?).  Una vez que transfer√≠ las claves manualmente, y luego decid√≠ que era m√°s f√°cil dejar el viejo tel√©fono inteligente en una caja en un estante. <br><br>  El m√©todo 2FA deber√≠a ser: <br><br><ul><li>  Seguro: solo usted debe obtener acceso a su cuenta, no atacantes </li><li>  Fiable: obtienes acceso a tu cuenta siempre que la necesites </li><li>  Conveniente y asequible: el uso de 2FA es claro y requiere un m√≠nimo de tiempo </li><li>  Barato </li></ul><br>  Creemos que blockchain es la soluci√≥n correcta. <br><br><h2>  Use 2FA en la cadena de bloques </h2><br>  Para un usuario, 2FA en la cadena de bloques se ve igual que recibir c√≥digos √∫nicos por SMS.  La √∫nica diferencia est√° en el canal de entrega.  La forma de obtener un c√≥digo 2FA depende de lo que ofrece la cadena de bloques.  En nuestro proyecto (la informaci√≥n est√° en mi perfil) esta es una aplicaci√≥n web, Tor, iOS, Android, Linux, Windows, MacOS. <br><br>  El servicio genera un c√≥digo de una sola vez y lo env√≠a al mensajero en la cadena de bloques.  Adem√°s, seg√∫n los cl√°sicos: el usuario ingresa el c√≥digo recibido en la interfaz de servicio e inicia sesi√≥n. <br><br><img src="https://habrastorage.org/webt/4a/yq/ph/4ayqphaul5iozz1f_v2g0q4ziqw.png"><br><br>  En el art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo funciona un mensajero descentralizado en la cadena de bloques,</a> escrib√≠ que la cadena de bloques garantiza la seguridad y la privacidad de la mensajer√≠a.  Sobre el tema del env√≠o de c√≥digos 2FA, destacar√©: <br><br><ul><li>  Un clic para crear una cuenta, sin tel√©fonos ni correos electr√≥nicos. </li><li>  Todos los mensajes con c√≥digos 2FA est√°n encriptados End-to-End curve25519xsalsa20poly1305. </li><li>  El ataque MITM est√° excluido: cada mensaje con un c√≥digo 2FA es una transacci√≥n en la cadena de bloques y est√° firmado por Ed25519 EdDSA. </li><li>  Un mensaje con un c√≥digo 2FA cae en su bloque.  La secuencia y la marca de tiempo de los bloques no se pueden corregir y, por lo tanto, el orden de los mensajes. </li><li>  No existe una estructura central que verifique la "autenticidad" de un mensaje.  Esto se realiza mediante un sistema de nodo distribuido basado en consenso y pertenece a los usuarios. </li><li>  Incapacidad para deshabilitar: las cuentas no se pueden bloquear y los mensajes se pueden eliminar. </li><li>  Acceda a los c√≥digos 2FA desde cualquier dispositivo en cualquier momento. </li><li>  Mensaje de confirmaci√≥n de entrega con c√≥digo 2FA.  Un servicio que env√≠a una contrase√±a √∫nica sabe con certeza que se ha entregado.  No hay botones "Enviar de nuevo". </li></ul><br>  Para comparar con otros m√©todos 2FA, he compilado una tabla: <br><br><img src="https://habrastorage.org/webt/pl/am/tm/plamtmeiv5xnjmupd5bevfrpftu.png"><br><br>  El usuario recibe una cuenta en el blockchain messenger para recibir c√≥digos en un segundo, solo se usa la frase de contrase√±a para ingresar.  Por lo tanto, los m√©todos de aplicaci√≥n pueden ser diferentes: puede usar una cuenta para obtener c√≥digos para todos los servicios, o puede crear una cuenta separada para cada servicio. <br><br>  Tambi√©n hay una desventaja: una cuenta debe tener al menos una transacci√≥n.  Para que el usuario reciba un mensaje cifrado con un c√≥digo, debe conocer su clave p√∫blica, y solo aparece en la cadena de bloques con la primera transacci√≥n.  Salimos de esta manera: nos dieron la oportunidad de obtener tokens gratis en nuestra billetera.  Sin embargo, una soluci√≥n m√°s correcta es nombrar la cuenta como clave p√∫blica.  (Para comparaci√≥n, nuestro n√∫mero de cuenta <i>U1467838112172792705</i> es un derivado de la clave p√∫blica <i>cc1ca549413b942029c4742a6e6ed69767c325f8d989f7e4b71ad82a164c2ada</i> . Para el mensajero, esto es m√°s conveniente y legible, pero para el sistema de env√≠o de c√≥digos 2FA).  Creo que en el futuro alguien tomar√° esa decisi√≥n y transferir√° "Conveniencia y Accesibilidad" a la zona verde. <br><br>  El costo de enviar un c√≥digo 2FA es realmente bajo: 0.001 ADM, ahora es 0.00001 USD.  Nuevamente, puede aumentar su blockchain y hacer que el precio sea cero. <br><br><h2>  C√≥mo conectar 2FA en la cadena de bloques a su servicio </h2><br>  Espero haber podido interesar a algunos lectores para agregar autorizaci√≥n de blockchain a sus servicios. <br><br>  Te dir√© c√≥mo hacerlo usando el ejemplo de nuestro messenger, y por analog√≠a puedes usar otra cadena de bloques.  En la aplicaci√≥n de demostraci√≥n 2FA, usamos postgresql10 para almacenar informaci√≥n de la cuenta. <br><br>  Pasos de conexi√≥n: <br><br><ol><li>  Cree una cuenta en la cadena de bloques desde la que enviar√° c√≥digos 2FA.  Recibir√° una frase de contrase√±a, que se utiliza como clave privada para cifrar mensajes con c√≥digos y para firmar transacciones. </li><li>  Agregue un script a su servidor para generar c√≥digos 2FA.  Si ya utiliza cualquier otro m√©todo 2FA con la entrega de contrase√±a de un solo uso, este paso ya se ha completado. </li><li>  Agregue un script a su servidor para enviar c√≥digos al usuario en el blockchain messenger. </li><li>  Cree una interfaz de usuario para enviar e ingresar el c√≥digo 2FA.  Si ya utiliza cualquier otro m√©todo 2FA con la entrega de contrase√±a de un solo uso, este paso ya se ha completado. </li></ol><br>  <b>1 Crear una cuenta</b> <br><br>  Crear una cuenta en blockchain es la generaci√≥n de una clave privada, una clave p√∫blica y una direcci√≥n de cuenta derivada de ella. <br><br><img src="https://habrastorage.org/webt/7o/at/vs/7oatvsalils_l9wsl8av5cjqtkc.png"><br><br>  Primero, se genera la frase de contrase√±a BIP39, a partir de la cual se considera el hash SHA-256.  El hash se usa para generar la clave privada ks y la clave p√∫blica kp.  De la clave p√∫blica con el mismo SHA-256 con inversi√≥n, obtenemos la direcci√≥n en la cadena de bloques. <br><br>  Si desea enviar c√≥digos 2FA cada vez desde una nueva cuenta, el c√≥digo para crear una cuenta deber√° agregarse al servidor: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Mnemonic <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'bitcore-mnemonic'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.passphrase = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Mnemonic(Mnemonic.Words.ENGLISH).toString() ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> bip39 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'bip39'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> crypto <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'crypto'</span></span> adamant.createPassphraseHash = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">passphrase</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> seedHex = bip39.mnemonicToSeedSync(passphrase).toString(<span class="hljs-string"><span class="hljs-string">'hex'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> crypto.createHash(<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>).update(seedHex, <span class="hljs-string"><span class="hljs-string">'hex'</span></span>).digest() } ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sodium <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'sodium-browserify-tweetnacl'</span></span> adamant.makeKeypair = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hash</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> keypair = sodium.crypto_sign_seed_keypair(hash) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">publicKey</span></span>: keypair.publicKey, <span class="hljs-attr"><span class="hljs-attr">privateKey</span></span>: keypair.secretKey } } ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> crypto <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'crypto'</span></span> adamant.getAddressFromPublicKey = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">publicKey</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> publicKeyHash = crypto.createHash(<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>).update(publicKey, <span class="hljs-string"><span class="hljs-string">'hex'</span></span>).digest() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> temp = Buffer.alloc(<span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>; i++) { temp[i] = publicKeyHash[<span class="hljs-number"><span class="hljs-number">7</span></span> - i] } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'U'</span></span> + bignum.fromBuffer(temp).toString() }</code> </pre> <br>  En la aplicaci√≥n de demostraci√≥n, la simplificamos: creamos una cuenta en la aplicaci√≥n web y le enviamos los c√≥digos.  En la mayor√≠a de los casos, esto es m√°s conveniente para el usuario: sabe que el servicio env√≠a c√≥digos 2FA desde una cuenta espec√≠fica y puede nombrarlo. <br><br><img src="https://habrastorage.org/webt/j6/0p/pi/j60ppi_a1zvkc-ifcrdxkaz8ow8.png"><br><br>  <b>2 Generaci√≥n de c√≥digos 2FA</b> <br><br>  El c√≥digo 2FA debe generarse para cada inicio de sesi√≥n de usuario.  Usamos la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">clandestina</a> , pero puedes elegir cualquier otra. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> hotp = speakeasy.hotp({ counter, <span class="hljs-attr"><span class="hljs-attr">secret</span></span>: account.seSecretAscii, });</code> </pre><br>  Validaci√≥n del c√≥digo de usuario 2FA ingresado por el usuario: <br><br><pre> <code class="javascript hljs">se2faVerified = speakeasy.hotp.verify({ <span class="hljs-attr"><span class="hljs-attr">counter</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.seCounter, <span class="hljs-attr"><span class="hljs-attr">secret</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.seSecretAscii, <span class="hljs-attr"><span class="hljs-attr">token</span></span>: hotp, });</code> </pre><br>  <b>3 Enviar c√≥digo 2FA</b> <br><br>  Puede usar la API del nodo blockchain, la biblioteca JS API o la consola para enviar el c√≥digo 2FA.  En este ejemplo, usamos la consola: esta es la interfaz de l√≠nea de comandos, una utilidad que simplifica la interacci√≥n con la cadena de bloques.  Para enviar un mensaje con un c√≥digo 2FA, debe usar el comando <code>send message</code> de la consola. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> util = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'util'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> exec = util.promisify(<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'child_process'</span></span>).exec); ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> command = <span class="hljs-string"><span class="hljs-string">`adm send message </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${adamantAddress}</span></span></span><span class="hljs-string"> "2FA code: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${hotp}</span></span></span><span class="hljs-string">"`</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { error, stdout, stderr } = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> exec(command);</code> </pre><br>  Una forma alternativa de enviar mensajes es utilizar el m√©todo de <code>send</code> en la biblioteca JS API. <br><br>  <b>4 interfaz de usuario</b> <br><br>  El usuario debe tener la oportunidad de ingresar el c√≥digo 2FA, esto se puede hacer de varias maneras dependiendo de la plataforma de su aplicaci√≥n.  En nuestro ejemplo, este es Vue. <br><br><img src="https://habrastorage.org/webt/1g/yb/yv/1gybyvcmjucrqilrcpo74k8onoy.png"><br><br>  El c√≥digo fuente de la aplicaci√≥n de demostraci√≥n de autorizaci√≥n de dos factores en la cadena de bloques se puede ver en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> .  Hay un enlace en la demostraci√≥n en vivo en el archivo L√©ame para probarlo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/476090/">https://habr.com/ru/post/476090/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../476060/index.html">Noticias del mundo de OpenStreetMap No. 485 (29.10.2019 - 04.11.2019)</a></li>
<li><a href="../476074/index.html">Coche el√©ctrico hecho en casa - parte 1</a></li>
<li><a href="../476076/index.html">Demasiado limpio?</a></li>
<li><a href="../476082/index.html">Array.splice y Array.slice en JavaScript</a></li>
<li><a href="../476088/index.html">SOMBRERO NEGRO Conferencia de Estados Unidos. Hazte rico o muere: gana dinero en Internet con Black Hat. Parte 1</a></li>
<li><a href="../476092/index.html">Acerca de las instrucciones "Fot√≥nica", "Programaci√≥n y TI" y "Informaci√≥n y ciberseguridad" de la Olimpiada "Soy un profesional"</a></li>
<li><a href="../476094/index.html">El regreso de la era de los imperios: todo sobre Age of Empires IV</a></li>
<li><a href="../476096/index.html">Inventario de la I a la Z. Consideramos activos de TI</a></li>
<li><a href="../476098/index.html">Estructuras de datos en Java. M√©todos √∫tiles de clase auxiliar</a></li>
<li><a href="../476100/index.html">Arquitectura de sistemas inform√°ticos 1 parte. Puertas l√≥gicas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>