<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•¶ üëÉüèø üíõ Horloge √©lectronique faite maison, base de l'√©l√©ment - partie 1, mesure du temps üåö üêº üë®üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probablement chaque geek qui aime l'√©lectronique maison, t√¥t ou tard, vient √† l'id√©e de cr√©er sa propre montre unique. L'id√©e est assez bonne, nous al...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Horloge √©lectronique faite maison, base de l'√©l√©ment - partie 1, mesure du temps</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/383091/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Probablement chaque geek qui aime l'√©lectronique maison, t√¥t ou tard, vient √† l'id√©e de cr√©er sa propre montre unique. </font><font style="vertical-align: inherit;">L'id√©e est assez bonne, nous allons voir comment et sur quoi il vaut mieux les faire. </font><font style="vertical-align: inherit;">Comme point de d√©part, nous supposons qu'une personne sait comment programmer des microcontr√¥leurs, comprend comment envoyer 2 octets via i2c ou un port s√©rie et peut souder plusieurs fils ensemble. </font><font style="vertical-align: inherit;">En principe, cela suffit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est clair que la fonction cl√© d'une montre est de mesurer le temps (qui aurait pens√©, oui?). </font><font style="vertical-align: inherit;">Et il est souhaitable de le faire aussi pr√©cis√©ment que possible, il existe plusieurs options et pi√®ges.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, quelles m√©thodes de mesure du temps disponibles dans le mat√©riel pouvons-nous utiliser?</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">G√©n√©rateur RC int√©gr√©</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'id√©e la plus simple qui peut vous venir √† l'esprit est de simplement configurer une minuterie logicielle et de d√©compter les secondes. </font><font style="vertical-align: inherit;">Donc, cette id√©e n'est pas bonne. </font><font style="vertical-align: inherit;">L'horloge fonctionnera certainement, mais la pr√©cision du g√©n√©rateur int√©gr√© n'est aucunement r√©gul√©e, et elle peut ¬´flotter¬ª √† moins de 10% de la valeur nominale. </font><font style="vertical-align: inherit;">Il est peu probable que quelqu'un ait besoin d'heures qui disparaissent par mois pendant 15 minutes.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module DS1307 en temps r√©el</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une option plus correcte, qui est √©galement utilis√©e dans la plupart des produits "folk", est une horloge en temps r√©el. La puce est √©chang√©e avec le microcontr√¥leur via I2C, elle n√©cessite un minimum de liaison (quartz et une paire de r√©sistances). Le prix d'√©mission est d'environ 100 roubles par microcircuit, soit environ 1 $ par ebee pour une carte finie avec un microcircuit, un module de m√©moire et un connecteur de batterie. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sch√©ma de la fiche technique: </font></font><br>
<br>
<img src="https://habrastorage.org/files/ac0/5f3/3d1/ac05f33d158d4613aef472a1523735b8.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout aussi important, la puce est disponible dans un bo√Ætier DIP, de sorte que tout radio-amateur novice peut la souder. La batterie int√©gr√©e maintient la montre en marche m√™me si l'alimentation a √©t√© coup√©e.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il semblerait que tout va bien, sinon pour un seul probl√®me - une faible pr√©cision. La pr√©cision approximative du quartz de la montre est de 20 √† 30 ppm. La d√©signation ppm - parties par million, indique le nombre de parties par million. Il semblerait que 20 millioni√®mes soit super, mais pour une fr√©quence de 32768Hz, il s'av√®re que 20 * 32768/1000000 = ¬± 0,655536Hz, c'est-√†-dire d√©j√† un demi-hertz. Par des calculs simples, on peut voir que le g√©n√©rateur avec une telle diff√©rence par jour ¬´colle¬ª aux 56 000 cycles suppl√©mentaires (ou manquants), ce qui correspond √† 2 secondes par jour. Le quartz peut √™tre diff√©rent, certains utilisateurs ont √©crit une erreur de 5 secondes par jour. D'une certaine mani√®re, ce n'est pas tr√®s pr√©cis - dans un mois, une telle montre dispara√Ætra au moins pendant une minute. C'est d√©j√† une diff√©rence d√©cente, visible √† l'≈ìil nu (lorsque la s√©rie pr√©f√©r√©e de la grand-m√®re commence √† 11h00 et que l'horloge indique 11h05, le d√©veloppeur d'une telle montre devant des proches sera mal √† l'aise).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, comme la temp√©rature dans la pi√®ce est plus ou moins stable et que la fr√©quence du quartz ne changera pas beaucoup, vous pouvez ajouter une correction logicielle. </font><font style="vertical-align: inherit;">Un autre conseil donn√© sur les forums est d'utiliser une montre √† quartz issue de vieilles cartes m√®res; selon les critiques, elles y sont assez pr√©cises.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module DS3231 en temps r√©el</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ne sommes pas les premiers √† poser la question de l'exactitude, et Dallas, r√©pondant √† nos souhaits, a publi√© un module plus avanc√© - DS3231. </font><font style="vertical-align: inherit;">Il est appel√© "horloge en temps r√©el extr√™mement pr√©cise", il dispose d'un g√©n√©rateur int√©gr√© avec correction de la temp√©rature. </font><font style="vertical-align: inherit;">La pr√©cision est 10 fois plus √©lev√©e et est de 2 ppm. </font><font style="vertical-align: inherit;">Le prix d'√©mission est l√©g√®rement plus √©lev√©, mais le bo√Ætier du microcircuit est con√ßu pour un montage SMD, la soudure n'est pas si pratique, mais vous pouvez acheter une carte pr√™te √† l'emploi. </font></font><br>
<br>
<img src="https://habrastorage.org/files/cbd/4a0/9f3/cbd4a09f3207443b98af2efe90f8a70f.png"> <br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(photo du site du vendeur)</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pr√©cision de 6 secondes par mois, c'est d√©j√† un bon r√©sultat. </font><font style="vertical-align: inherit;">Mais nous irons plus loin - id√©alement, l'horloge du 21e si√®cle n'a pas du tout besoin d'√™tre ajust√©e.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module radio DCF-77</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©thode est plut√¥t exotique, mais pour √™tre compl√®te, elle ne peut pas √™tre ignor√©e. Peu de gens le savent, mais les signaux horaires exacts ont √©t√© transmis par radio depuis les ann√©es 70. L'√©metteur DCF-77 est situ√© en Allemagne pr√®s de Francfort, et √† la fr√©quence SDV de 77,5 KHz, des horodatages sont transmis (oui, ils avaient d√©j√† une horloge murale et de bureau il y a 20 ans qui n'avait pas besoin d'√™tre ajust√©e). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La m√©thode est bonne en ce que le circuit a une faible consommation d'√©nergie, donc m√™me des montres-bracelets avec une telle technologie sont maintenant produites. La carte d'admission DCF-77 termin√©e peut √™tre achet√©e sur ebay, le prix est de 20 $. </font></font><br>
<br>
<img src="https://habrastorage.org/files/8cc/6d3/4ff/8cc6d34ff19c487f9a625229ab10c743.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De nombreuses horloges et stations m√©t√©orologiques ont la capacit√© de recevoir du DCF-77, le seul probl√®me est que le signal n'atteint pratiquement pas la Russie. Carte de couverture de Wikipedia:</font></font><br>
<br>
<img src="https://habrastorage.org/files/a50/07e/855/a5007e855a5f4372813876e0957e1166.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comme vous pouvez le voir, seuls Moscou et Saint-P√©tersbourg sont √† la fronti√®re de la r√©ception. </font><font style="vertical-align: inherit;">Selon les propri√©taires, un signal ne peut √™tre re√ßu qu'occasionnellement, ce qui n'est bien s√ªr pas adapt√© √† une utilisation pratique.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Module GPS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si l'horloge n'est pas loin de la fen√™tre, un module GPS est une m√©thode tr√®s r√©elle pour obtenir l'heure exacte. </font><font style="vertical-align: inherit;">Ces modules peuvent √™tre achet√©s √† peu de frais sur ebay (prix d'√©mission 10-15 $). </font><font style="vertical-align: inherit;">Par exemple, Ublox NEO-6M se connecte directement aux broches s√©rie du processeur et produit des cha√Ænes NMEA √† une vitesse de 9600. Les </font></font><br>
<br>
<img src="https://habrastorage.org/files/5ec/69a/d22/5ec69ad22d3d4502bab18741c91eac85.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
donn√©es sont pr√©sent√©es dans ce format approximativement "$ GPRMC, 040302.663, A, 3939.7, N, 10506.6, W, 0.27, 358.86, 200804 ,, * 1A ", et il n'est pas difficile de les analyser m√™me pour un Arduino faible. </font><font style="vertical-align: inherit;">Les patriotes, en passant, peuvent acheter le module Ublox NEO-7N plus cher, qui prend en charge (selon les avis) √† la fois le GPS et le Glonass.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De toute √©vidence, le module GPS ne sait rien des diff√©rents fuseaux horaires, le d√©veloppeur devra donc penser par lui-m√™me pour les calculer et changer l'heure d'√©t√© / d'hiver. </font><font style="vertical-align: inherit;">Un autre inconv√©nient de l'utilisation du GPS est sa consommation d'√©nergie relativement √©lev√©e (cependant, certains modules peuvent √™tre mis en "mode veille" avec des commandes distinctes).</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wifi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et enfin, la derni√®re fa√ßon (et la plus √©vidente pour le moment) d'obtenir l'heure exacte est de la retirer d'Internet. Il existe deux approches. La premi√®re, et la plus simple, consiste √† utiliser quelque chose comme un Raspberry PI avec Linux comme carte de la montre, alors vous n'avez rien √† faire, tout fonctionnera hors de la bo√Æte. Si vous voulez "exotique" - alors l'option la plus int√©ressante est le module esp8266. </font></font><br>
<br>
<img src="https://habrastorage.org/files/208/799/b53/208799b53e7c467598787efd497319e7.png"><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est peu co√ªteux (le prix de la question est d'environ 200 roubles par ebay) le module WiFi peut √™tre √©chang√© avec le serveur via le port s√©rie du processeur, si vous le souhaitez, il peut √©galement √™tre reflasher (il y a beaucoup de firmware tiers), et une partie de la logique (par exemple, interroger le serveur de temps) peut √™tre effectu√©e dans le module lui-m√™me. Le firmware tiers prend en charge un tas de tout, de Lua au C ++, donc les options pour "√©tirer votre cerveau" sont tout √† fait suffisantes.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur ce sujet, les mesures de temps peuvent probablement √™tre ferm√©es. </font><font style="vertical-align: inherit;">Dans la partie suivante, nous examinerons de plus pr√®s les processeurs et les m√©thodes de sortie du temps.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr383091/">https://habr.com/ru/post/fr383091/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr383077/index.html">Les guerres de l'information font rage dans des articles controvers√©s de Wikip√©dia</a></li>
<li><a href="../fr383081/index.html">Mangalyaan a envoy√© des images d√©taill√©es de la surface de Mars</a></li>
<li><a href="../fr383083/index.html">Google a commenc√© √† promouvoir Android One en Afrique</a></li>
<li><a href="../fr383085/index.html">Espace en mouvement (circulation prudente)</a></li>
<li><a href="../fr383089/index.html">Courte critique du PC portable de jeu ASUS G751JY</a></li>
<li><a href="../fr383093/index.html">Google a pr√©sent√© sa version du routeur domestique OnHub pour 200 $</a></li>
<li><a href="../fr383095/index.html">"Diamants du ciel." Les chimistes obtiennent des nanofibres de carbone de l'air (du CO2)</a></li>
<li><a href="../fr383097/index.html">Windows 10 Insider Preview 10525 tue Google Chrome</a></li>
<li><a href="../fr383099/index.html">L'avenir de BMW: une bouteille d'eau et une torpille dans l'habitacle</a></li>
<li><a href="../fr383101/index.html">BioLite offre une source d'√©lectricit√© respectueuse de l'environnement</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>