<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèæ‚Äçü§ù‚Äçüßëüèæ üçÄ ‚õ©Ô∏è Comment √©crire des programmes √† la jonction du d√©veloppement mobile et des algorithmes? Concours et histoires Yandex ü§ù ü§∏üèæ üö´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Du 10 au 22 septembre aura lieu le concours de d√©veloppement mobile Yandex.Blitz. L'inscription est ouverte . Blitz est un court chemin vers Yandex: l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment √©crire des programmes √† la jonction du d√©veloppement mobile et des algorithmes? Concours et histoires Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/420305/">  Du 10 au 22 septembre aura lieu le concours de d√©veloppement mobile Yandex.Blitz.  L'inscription est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ouverte</a> .  Blitz est un court chemin vers Yandex: les 5 meilleurs participants devront r√©ussir une section de l'entretien au lieu des quatre standards pour obtenir une offre d'emploi. <br><br>  √Ä l'occasion du concours, nous avons discut√© avec des coll√®gues de t√¢ches int√©ressantes qui s'appliquent imm√©diatement aux plateformes mobiles et aux algorithmes.  Aujourd'hui, nous partagerons leurs histoires avec les lecteurs de Habr. <br><br><img src="https://habrastorage.org/webt/3z/_5/ry/3z_5rygov_eu9yhgyzngfbv6vmy.png"><br><br>  On pense que le d√©veloppement d'applications mobiles est quelque chose de sp√©cial, loin de la programmation au sens g√©n√©ral, et les sp√©cialistes qui √©crivent pour Android et iOS ne rencontrent jamais de r√©solution de t√¢ches gourmandes en algorithmes, se limitant √† connecter des biblioth√®ques pr√™tes √† l'emploi, √† composer des √©crans, √† √©crire une logique m√©tier simple et la recherche de bogues d'une plate-forme sp√©cifique.  Mais pas si simple. <br><br><a name="habracut"></a>  La cr√©ation de logiciels pour les appareils mobiles est toujours lourde de limites.  M√™me dans les appareils haut de gamme, les processeurs et les GPU ne sont pas aussi puissants et pas autant de m√©moire que sur un ordinateur moderne.  Dans le m√™me temps, la majeure partie du march√© est constitu√©e de smartphones √©conomiques dot√©s d'un mat√©riel encore plus faible.  Leurs propri√©taires sont particuli√®rement touch√©s par le manque de ressources. <br><br>  Le d√©veloppement d'un projet concurrentiel complexe est impossible sans l'utilisation de solutions qui g√®rent les t√¢ches plus rapidement qu'en temps quadratique.  Les utilisateurs peuvent s'adresser √† un concurrent s'ils n'aiment pas la vitesse de travail ou la fa√ßon dont votre application consomme l'√©nergie de la batterie. <br><br>  Historiquement, Blitz est un concours pour la connaissance des algorithmes et la capacit√© de traduire l'id√©e d'une solution en code.  Le Blitz, qui se tiendra en septembre, ne fera pas exception.  Nous avons essay√© de s√©lectionner des t√¢ches avec des algorithmes similaires √† ceux utilis√©s par les d√©veloppeurs mobiles Yandex dans des projets r√©els pour Android et iOS. <br><br><h4>  Acc√©l√©rer le navigateur Sugest </h4><br>  <b><i>Mikhail Efimov, d√©veloppeur principal</i></b> : <br><blockquote> - J'ai fait omnibox - Cha√Æne de recherche du navigateur.  Le remplissage automatique fonctionne - entrez simplement le d√©but du mot, et nous vous proposerons le mot entier.  La t√¢che initiale peut √™tre simplifi√©e comme suit: apr√®s avoir re√ßu une cha√Æne d'entr√©e, recherchez tous les mots d'un ensemble pr√©d√©fini dans lequel la cha√Æne d'entr√©e appara√Æt comme une sous-cha√Æne.  Pour ce faire, nous prenons tous les suffixes du mot - toutes les sous-cha√Ænes avec lesquelles il se termine.  Par exemple, pour le mot ¬´table¬ª, ce sera ¬´table¬ª et ¬´tol¬ª.  Les suffixes d'un ou deux caract√®res - ici nous aurions "ol" et "l" - ne sont pas pris en compte, car √† travers eux les ordures entrent dans le sest. <br><br>  Ainsi, au lieu d'un mot, nous en obtenons deux.  S'il se composait de cinq lettres, ils en obtiendraient trois, etc. De plus, par exemple, vous pouvez cr√©er un trie de structure de donn√©es bien connu, qui vous permet de les rechercher.  Mais cette structure a un inconv√©nient - elle peut occuper beaucoup d'espace m√©moire. <br><br>  √Ä notre tour, nous avons conserv√© une liste tri√©e de suffixes - tableau de suffixes.  L'√©l√©ment dans le tableau n'est pas le suffixe entier - alors la structure prendrait trop de m√©moire, une quantit√© quadratique - mais juste une paire de pointeurs.  Le premier d'entre eux indique le mot ou la phrase que vous souhaitez utiliser, le second - le symbole dans le mot ou la phrase par lequel le suffixe commence.  Cette approche √©conomise de la m√©moire.  Nous n'avons que deux pointeurs, deux nombres de huit octets au lieu de tr√®s longs mots. <br><br>  La question suivante est de savoir comment stocker une liste d√©j√† tri√©e.  Il peut √™tre stock√© comme un simple tableau - mais de nouvelles entr√©es y seront ins√©r√©es pendant tr√®s longtemps.  Par cons√©quent, j'ai choisi de stocker l'arborescence de recherche binaire "augment√©e" - l'arborescence de recherche binaire augment√©e.  En tant que cl√©, chaque n≈ìud de l'arborescence contient un certain suffixe pour un certain mot, et en tant que ¬´suppl√©ment¬ª, des informations sur les priorit√©s sont stock√©es dans les n≈ìuds.  Il vous suffit de trouver le n≈ìud d'arbre correspondant au pr√©fixe saisi.  De plus, vous pouvez analyser ce n≈ìud et les n≈ìuds voisins pour comprendre lequel des mots peut √™tre utilis√© pour l'√©mission. <br><br>  Parmi eux, ceux qui ont une priorit√© plus √©lev√©e sont s√©lectionn√©s.  La priorit√© est affect√©e par la longueur de l'indentation du suffixe depuis le d√©but du mot.  Pour les mots avec une indentation nulle, la priorit√© est plus √©lev√©e - par exemple, si l'utilisateur a entr√© "st", alors le mot "table" sera beaucoup plus prioritaire que le mot "bridge".  Mais en principe, vous pouvez entrer une telle s√©quence de caract√®res que le navigateur en r√©ponse indiquera le mot o√π cette s√©quence se produit au milieu ou √† la fin.  Par exemple, s'il n'y a pas de mot commen√ßant par cette s√©quence. </blockquote><br><h4>  Affichage des cam√©ras de vid√©osurveillance sur mobile Yandex. </h4><br>  <i><b>Sergey Kuznetsov, d√©veloppeur principal</b> :</i> <br><blockquote>  - Nous avions un algorithme qui affichait les cam√©ras sur une carte.  Il a travaill√© en temps quadratique, pas tr√®s vite.  Il y avait une id√©e qu'il peut √™tre am√©lior√©, sans recourir √† des fioritures. <br><br>  Si nous parlons de l'√©nonc√© du probl√®me, nous avions beaucoup de cam√©ras √† afficher.  √Ä des √©chelles √©lev√©es de la carte, ils pouvaient se croiser, et c'√©tait moche - il fallait afficher une cam√©ra au lieu de plusieurs se croisant. <br><br>  Si nous formalisons ce probl√®me, il se r√©sumait √† ce qui suit: sur le plan, il y a n carr√©s identiques avec des c√¥t√©s parall√®les aux axes de coordonn√©es, et vous devez choisir parmi eux un si grand nombre de carr√©s afin qu'ils ne se croisent pas √† l'int√©rieur, et tous les autres carr√©s se croisent au moins l'un des carr√©s de l'ensemble d'origine.  L'algorithme de solution le plus simple - lorsque nous avons s√©lectionn√© un carr√© et l'avons intersect√© avec tous les autres - a fonctionn√© pour n <sup>2</sup> .  Mais le probl√®me peut √™tre r√©solu dans n * log (n), en utilisant une certaine classe d'algorithmes, que dans la litt√©rature on appelle la ¬´ligne de balayage¬ª.  Si vous ne connaissez pas cette approche, ce probl√®me peut bien s√ªr √™tre r√©solu, mais si vous le savez, il peut √™tre r√©solu beaucoup plus facilement.  Vous savez imm√©diatement dans quelle direction penser. </blockquote><br><img src="https://habrastorage.org/webt/qp/5g/kq/qp5gkqw4zm-uhpoopbmma9jqk1q.png" width="350"><img src="https://habrastorage.org/webt/mr/sv/qt/mrsvqt_-ri1ognvqr4eokhkvj4m.png" width="350"><br><h5>  <sub><sup>Cam√©ras sur cartes mobiles.</sup></sub>  <sub><sup>Si vous effectuez un zoom arri√®re, une seule ic√¥ne reste</sup></sub> </h5><br><h4>  Obtention de donn√©es √† partir d'une des sources du navigateur Sugest </h4><br>  <i><b>Alexander Yashkin, chef du groupe back-end du portail</b> :</i> <br><blockquote>  - Il existe plusieurs sources "lourdes" de conseils qui s'affichent lors de la saisie dans le navigateur omnibox.  L'une de ces sources est l'historique local de l'utilisateur.  Les conseils de l'historique sont t√©l√©charg√©s par un fournisseur historique - un composant nous est venu de Chromium.  Quelle est la particularit√© d'omnibox?  Cela devrait √™tre tr√®s rapide, demander imm√©diatement au fur et √† mesure que vous tapez, donc les sources sont principalement synchrones.  Lorsque le navigateur d√©marre, le fournisseur cr√©e un index rapide des conseils d'historique au cours de la semaine derni√®re.  Dans Chromium, l'index d'historique pour omnibox a utilis√© les conteneurs associatifs std :: set et std :: map de la biblioth√®que standard C ++.  Pour stocker des donn√©es √† l'int√©rieur de ces conteneurs, du bois rouge-noir est g√©n√©ralement utilis√©. <br><br>  Notre t√¢che √©tait d'acc√©l√©rer la recherche d'historique dans l'omnibox.  √Ä partir des histogrammes des utilisateurs, nous avons vu que la recherche historique prend le plus de temps, et sur les ordinateurs lents, les gens souffrent vraiment.  Pour certains, l'attente √©tait d'un dixi√®me de seconde - lorsque vous tapez rapidement des caract√®res dans l'omnibox, c'est trop long et cela peut √™tre encore pire. <br><br>  J'ai fait plusieurs d√©marches, optimisations, en amont dans Chrome.  En m√™me temps, nous avons modifi√© notre code.  La t√¢che est ensuite pass√©e √† notre d√©veloppeur Denis Yaroshevsky.  C'est un d√©veloppeur plut√¥t enthousiaste - il s'int√©resse aux algorithmes C ++, STL et.  Apr√®s avoir fouill√©, il a propos√© d'agir radicalement: remplacer std :: set par flat_set, et std :: map par flat_map.  Autrement dit, changez simplement la structure de base.  std :: set et std :: map stockent leurs √©l√©ments dans les n≈ìuds de l'arbre, et flat_set et flat_map, en fait, sont des wrappers sur le vecteur tri√©.  Les conteneurs plats sont l'un des conteneurs les plus populaires qui ne font pas partie de la biblioth√®que standard C ++.  Peut-√™tre que dans la prochaine norme, ils y tomberont encore. <br><br>  Au d√©but, il y avait une certaine m√©fiance: le chemin propos√© semblait trop simple, allong√© √† la surface.  Pour prouver l'efficacit√©, nous avons fait un test de perf: nous avons pris le profil d'un de nos coll√®gues, construit un index d'historique √† partir de celui-ci et lanc√© des requ√™tes populaires dessus.  Nous avons choisi 10 requ√™tes et compt√© le temps.  Denis m'a montr√© le r√©sultat, les am√©liorations √©taient √©videntes et je croyais aussi en son id√©e. <br><br>  Le probl√®me trouv√© n'√©tait pas sp√©cifique √† Yandex.Browser.  Cela affectait n'importe quel navigateur bas√© sur Chromium, donc d'abord, en tant que participants au projet Chromium, nous avons d√©cid√© de faire un amont.  Mais chez Chromium, nombreux sont ceux qui s'engagent et certaines des id√©es propos√©es sont folles.  Les d√©veloppeurs de chrome ont une attitude plut√¥t m√©fiante vis-√†-vis de tous ceux qui proposent de changer quelque chose de l'ext√©rieur, de mani√®re encore plus radicale.  Au d√©but, ils ne voulaient pas prendre notre patch.  Ils ont sugg√©r√© avant cela de prouver l'efficacit√© et d'√©crire un mini-design-doc afin de pouvoir comprendre l'id√©e, en tirer profit et critiquer la proposition. <br><br>  En outre, ils ont dit: une fois que vous en avez besoin, √©crivez et ajoutez des impl√©mentations distinctes de conteneurs plats.  N'ajoutez aucune nouvelle biblioth√®que √† notre projet - des impl√©mentations existent d√©j√† dans boost, eastl.  Des conteneurs plats devaient √™tre ajout√©s aux composants de base du chrome.  Il s'agit d'un analogue de la biblioth√®que standard, et les gens du chrome sont tr√®s inquiets afin que rien de plus n'y p√©n√®tre. <br><br>  Denis Yaroshevsky a fait tout cela, a pass√© du temps √† √©crire un document de conception, a √©crit l'impl√©mentation de flat_set dans des mod√®les C ++, a appliqu√© beaucoup de magie de mod√®le, a √©crit des tests couvrant la fonctionnalit√© des conteneurs, a cr√©√© un autre test de performance synth√©tique - nous ne pouvions pas envoyer de test de performance avec de vrais profil d'un coll√®gue.  Denis s'est disput√© avec les propri√©taires du code de base et de l'omniboxe, a retravaill√© substantiellement le code en fonction des r√©sultats de l'examen - et les a finalement surmont√©s et a t√©l√©charg√© le code sur Chromium. <br><br>  Toute cette saga a dur√© six mois.  Le chrome a ensuite √©crit: ¬´Oui, nous avons vraiment constat√© une am√©lioration de 10 √† 20% de tous les histogrammes.  Super, merci! ‚Äù  D'eux, cela nous est d√©j√† parvenu en aval dans le navigateur, puis une fin heureuse.  En effet, l'indice historique s'est consid√©rablement acc√©l√©r√© sur toutes les configurations, sur toutes les plateformes.  Dans cet indice, les avantages des conteneurs plats sont bien meilleurs que les inconv√©nients. <br><br>  Apr√®s l'amont, flat_set et flat_map ont commenc√© √† √™tre utilis√©s beaucoup plus souvent - maintenant, dans le code, vous pouvez trouver plusieurs centaines d'endroits o√π ils sont impliqu√©s.  Moralit√© - la patience et le travail vont tout broyer et choisir soigneusement non seulement des algorithmes pour votre code, mais aussi des structures de donn√©es appropri√©es. </blockquote><br><img src="https://habrastorage.org/webt/ax/2-/3k/ax2-3k3so-zw4zsgqtgmkajj7uo.png"><br><h5>  <sub><sup>Voir le c√¥t√© gauche du graphique.</sup></sub>  <sub><sup>Une nette diminution du temps de chargement des r√©sultats de l'omnibox d√©but 2017 est pr√©cis√©ment due au passage √† flat_set et flat_map</sup></sub> </h5><br><h4>  Acc√©l√©rer l'un des HashMap dans Chromium </h4><br>  <i><b>Oleg Maksimenko, d√©veloppeur principal</b> :</i> <br><blockquote>  "L'objectif √©tait d'acc√©l√©rer le stockage des pages HTML r√©guli√®res dans l'un de nos sous-projets."  J'ai utilis√© les moyens standard de profilage du code - j'ai regard√© quels morceaux de code sont ¬´chauds¬ª dans le processus de sauvegarde.  Je suis tomb√© sur un endroit inattendu.  Autrement dit, ce n'est pas la logique principale, mais juste une recherche sur le conteneur HashMap, qui devrait occuper un petit pourcentage du temps total.  Au lieu de cela, il y avait des co√ªts vraiment √©lev√©s. <br><br>  J'ai d√©cid√© de remplacer l'impl√©mentation existante.  C'√©tait un HashMap interne, de Chromium.  Je l'ai remplac√© et j'ai gagn√© plusieurs fois.  Ensuite, je suis all√© un peu plus loin et je me suis assur√© que ce n'√©tait pas une erreur des gars de Google, qu'il ne s'agissait pas d'impl√©menter l'int√©gralit√© de HashMap, mais une fonction de hachage.  C'est une chose externe.  Et il s'est av√©r√© qu'ils avaient un hachage trivial dans le code que nous avons utilis√©, l'adresse en m√©moire a √©t√© utilis√©e comme hachage.  Peut-√™tre, en raison de certaines fonctionnalit√©s, par exemple, un petit volume, une telle solution leur convenait.  Peut-√™tre que leur HashMap n'√©tait pas un point chaud, mais il est devenu le n√¥tre lorsque nous avons appliqu√© cette structure.  En rempla√ßant simplement la fonction de hachage na√Øve et triviale par std :: hash, nous avons obtenu une augmentation de la vitesse de 3 √† 10 fois.  En cons√©quence, cet appel √† la m√©moire de hachage a disparu de la liste des points chauds, il a commenc√© √† occuper un petit pourcentage, comme pr√©vu au d√©part.  Tout est devenu bon et beau. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr420305/">https://habr.com/ru/post/fr420305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr420295/index.html">NeoQUEST-2018: le Cold Boot tant attendu, la recherche scientifique et les invit√©s de Nizhny Novgorod</a></li>
<li><a href="../fr420297/index.html">Instructions pas √† pas pour retrouver l'acc√®s aux instances Linux Amazon EC2 lors de la perte d'un fichier pem</a></li>
<li><a href="../fr420299/index.html">Mes exemples pr√©f√©r√©s de programmation fonctionnelle dans Kotlin</a></li>
<li><a href="../fr420301/index.html">Le Premier ministre indien Narendra Modi: nous enverrons le drapeau du pays dans l'espace √† bord du Gaganyan en 2022</a></li>
<li><a href="../fr420303/index.html">√âquilibrage de charge lors de l'analyse de sites et de la connexion de ressources cloud suppl√©mentaires</a></li>
<li><a href="../fr420307/index.html">5 astuces CSS √† conna√Ætre</a></li>
<li><a href="../fr420311/index.html">Comment notre intuition nous trompe sur le r√©chauffement climatique</a></li>
<li><a href="../fr420313/index.html">Nous faisons des heures litt√©raires sur la base du livre √©lectronique</a></li>
<li><a href="../fr420315/index.html">Nous fabriquons un configurateur 3D sans programmation ni mise en page</a></li>
<li><a href="../fr420317/index.html">Un nouveau test sanguin instantan√© pour les l√©sions c√©r√©brales a √©t√© d√©velopp√©.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>