<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧚🏽 🤜🏽 🌳 Firmware Sonoff Basic melalui Raspberry Pi 🙌🏻 🍎 🌲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Manual ini tidak dimaksudkan untuk menjadi baru. Di atas cukup google (meskipun dalam bahasa Inggris), tetapi untuk waktu yang lama saya mencari di ma...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Firmware Sonoff Basic melalui Raspberry Pi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442310/">  Manual ini tidak dimaksudkan untuk menjadi baru.  Di atas cukup google (meskipun dalam bahasa Inggris), tetapi untuk waktu yang lama saya mencari di mana untuk memulai dan memutuskan untuk membantu mereka yang memulai jalur komunikasi dengan Sonoff. <br><br>  Ada banyak ulasan tentang Sonoff Basic di Internet, termasuk dalam bahasa Rusia, ada juga artikel tentang cara menghubungkannya ke sistem Smart Home lokal setelah memencetnya. <br>  Jadi, jika Anda tidak memiliki USB-UART (belum datang dari China), dan unit Sonoff sudah ada dan ada Raspberry Pi, maka artikel ini untuk Anda. <br><a name="habracut"></a><br>  Di sini, jika Anda telah mencoba mencari informasi tentang cara mem-flash unit China ini, maka Anda menyadari bahwa Anda tidak dapat melakukannya tanpa setrika.  Hal pertama yang pertama, Anda harus menyolder sisir agar dapat menghubungkan unit kami ke Raspberry Pi. <br><br><img src="https://habrastorage.org/webt/ns/ps/7a/nsps7adgmpsmog1pnffryghrhew.jpeg"><br><br>  Selanjutnya, kita menghubungkan Sonoff Basic (setelah memutusnya dari 220V) ke Raspberry Pi, seperti yang ditunjukkan pada gambar (saya mengambil gambar, serta informasi di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> , dan saya berikan di sini, dengan demikian, terjemahan singkat). <br><br><img src="https://habrastorage.org/webt/su/rn/xf/surnxficlfyovyppipif8z-d1ji.jpeg"><br><br>  Hal pertama yang harus dilakukan adalah melihat apakah Anda memiliki port ttyS0. <br><br><pre><code class="bash hljs">ls /dev/</code> </pre> <br>  Jika tidak ada, tetapi ada ttyAMA0 (seperti dalam artikel di atas), maka ini tidak berarti bahwa semuanya baik-baik saja dengan Anda (saya mengingatkan Anda bahwa kita berbicara tentang Raspberry Pi 3 b +), karena  ttyAMA0 - bertanggung jawab untuk bluetooth.  Ini berarti bahwa kita perlu masuk ke pengaturan: <br><br><pre> <code class="bash hljs">sudo raspi-config</code> </pre> <br>  dan di "Interfacing Options" aktifkan "Serial", lalu reboot. <br><br>  Selanjutnya, siapkan Raspberry: <br><br><pre> <code class="bash hljs">sudo systemctl stop serial-getty@ttyS0.service sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">disable</span></span> serial-getty@ttyS0.service</code> </pre> <br>  Dan edit cmdline.txt, yaitu hapus “console = serial0,115200”: <br><br><pre> <code class="bash hljs">sudo cp /boot/cmdline.txt /boot/cmdline.bak sudo nano /boot/cmdline.txt</code> </pre> <br>  Selain itu, disarankan untuk atribut "enable_uart = 1" tepat di bawah (tentu saja, tanpa tanda kutip), jujur ​​saja, saya tidak tahu apa yang akan terjadi jika ini tidak dilakukan. <br><br>  Selanjutnya, instal pip (jika perlu) dan esptool.py: <br><br><pre> <code class="bash hljs">sudo apt-get install python-pip sudo pip install esptool</code> </pre> <br>  Reboot Raspberry. <br><br>  Unduh firmware (saya menggunakan ESPEasy build 120 sebagai rilis stabil, tetapi secara umum semuanya berlaku untuk firmware lain juga): <br><br><pre> <code class="bash hljs">wget http://www.letscontrolit.com/downloads/ESPEasy_R120.zip</code> </pre> <br>  Setelah memastikan bahwa Anda berada di folder tempat Anda ingin mengunduh dan kemudian unzip firmware Anda. <br><br><pre> <code class="bash hljs">unzip ESPEasy_R120.zip</code> </pre> <br>  Dan harus mendapatkan daftar file: <br><br><pre> <code class="bash hljs">ESPEasy_R120_1024.bin ESPEasy_R120_512.bin esptool.exe Source ESPEasy_R120_4096.bin ESPEasy_R120.zip flash.cmd</code> </pre> <br>  Selanjutnya, lepaskan Sonoff dari 3.3V, tahan tombol di papan (hanya ada satu tombol - jangan mencampurnya), terhubung ke 3.3V. <br><br>  Kami membuat cadangan firmware (dan tiba-tiba kami ingin kembali nanti, dan firmware unik untuk setiap blok). <br><br><pre> <code class="bash hljs">sudo esptool.py --port /dev/ttyS0 read_flash 0x00000 0x100000 Sonoff_backup_01.bin</code> </pre> <br>  Putuskan Sonoff dari 3.3V, tahan tombol di papan, terhubung ke 3.3V.  Kami menghapus memori: <br><br><pre> <code class="bash hljs">sudo esptool.py --port /dev/ttyAMA0 erase_flash</code> </pre> <br>  Putuskan Sonoff dari 3.3V, tahan tombol di papan, terhubung ke 3.3V.  Firmware (kami membawa firmware ke 1MB, kecuali tentu saja Anda menyolder ulang memori blok Anda): <br><br><pre> <code class="bash hljs">sudo esptool.py --port /dev/ttyS0 write_flash -fm dout 0x0 ESPEasy_R120_1024.bin</code> </pre> <br>  Nah, secara umum, dan itu saja, Anda harus mem-flash perangkat Anda. <br><br>  Ketika modul dimulai untuk pertama kalinya, jaringan wifi "ESP_0" dan kata sandi jaringan "configesp" akan muncul.  Anda harus terhubung dengannya, setelah itu Anda akan secara otomatis diarahkan ke halaman pengaturan, di mana Anda perlu memasukkan informasi tentang jaringan wifi Anda yang ada, ke mana sonoff harus terhubung sebagai klien. <br><br>  Anda juga dapat mengkonfigurasi wifi dengan perintah: <br><br><pre> <code class="bash hljs">sudo miniterm.py /dev/ttyS0 115200 -e</code> </pre> <br>  Itu perlu untuk masuk (tanpa memperhatikan terminal, yang marah setelah memasuki SSID, atau setelah menunggu 3 detik sampai Sonoff tenang): <br><br><pre> <code class="bash hljs">ssid yourSSID password yourPassword</code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id442310/">https://habr.com/ru/post/id442310/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id442294/index.html">Apa Oleg Artamonov sedikit salah</a></li>
<li><a href="../id442298/index.html">Gatsby.js secara detail</a></li>
<li><a href="../id442300/index.html">Saya melihat dan mendengarkan di mana saya inginkan. Mengintegrasikan Chromecast ke dalam Aplikasi Android</a></li>
<li><a href="../id442304/index.html">Lipat smartphone: bagaimana dengan aplikasi?</a></li>
<li><a href="../id442306/index.html">Cara vendor git ke git lain</a></li>
<li><a href="../id442312/index.html">DoT untuk distribusi RPZ</a></li>
<li><a href="../id442316/index.html">Pustaka C ++ yang ringkas untuk memprogram metode perbedaan terbatas ala operator. Bagian 1. Semantik</a></li>
<li><a href="../id442318/index.html">Cara melakukan perubahan dengan retrospektif</a></li>
<li><a href="../id442320/index.html">Laptop Compaq LTE 5000, bagian dua - tentang kekurangan dan perawatannya</a></li>
<li><a href="../id442322/index.html">Ode kepada teman tersayang Anda. Ensiklopedia pemilik Dell Latitude D820 / D830</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>