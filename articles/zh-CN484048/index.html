<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>➡️ 🏂🏿 🤦🏼 PHP和正则表达式：初学者的基础 🎈 💴 🍭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="预期“ PHP后端开发人员”课程以及相关课程“ Framework Laravel”中的新主题将开始，我们希望分享自由作者编写的文章。 

 注意！ 本文与课程计划无关， 仅对初学者有用。 要获得更深入的知识，我们邀请您访问免费的为期两天的在线密集课程，主题为：“创建Telegram-bot以在机构...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PHP和正则表达式：初学者的基础</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/484048/">  <i>预期<a href="https://otus.pw/vMHA/">“ PHP后端开发人员”</a>课程以及相关课程<a href="https://otus.pw/vS2d/">“ Framework Laravel”</a>中的新主题将开始，我们希望分享自由作者编写的文章。</i> <i><br><br></i>  <i><b>注意！</b></i>  <i>本文<b>与课程计划无关，</b> <b>仅对初学者</b>有用。</i>  <i>要获得更深入的知识，我们邀请您访问<b><a href="https://otus.pw/vMHA/">免费的为期两天的在线密集课程，主题为：“创建Telegram-bot以在机构中订购咖啡并在线付款</a></b> 。 <b><a href="https://otus.pw/vMHA/">”</a></b></i>  <i>紧张的第二天将在<a href="https://otus.pw/cl2i/">这里</a>举行。</i> <i><br></i> <br><img src="https://habrastorage.org/webt/94/4h/6y/944h6y1qgyysdz1bigypwmh2kgc.png"><br><hr><br> 大家好！ 即将到来的<code>[20]{2,}0</code> 。 今天，我想谈谈一个有时从“是的，如果您已经有了现成的解决方案，为什么还需要学习所有这些知识”到“还可以学习全部Perl？”的笑话主题。 但是，随着时间的流逝，许多程序员开始精通正则表达式，而在哈布雷（Habré）上，没有一个关于该主题的新文章（ <i>尽管正则表达式最近变化不大</i> ）。 现在该写另一个了！ <br><a name="habracut"></a><br><br><h3> 正则表达式与其具体实现隔离 </h3><br> 正则表达式（英语表示为<i>RegEx</i>或<i>regex</i> ）是一种用于研究和处理文本的各种选项的工具：搜索，检查，搜索和替换由字母或数字（或其中的任何其他字符）组成的元素包括特殊字符和标点符号）。 最初，正则表达式是从50年代在数学领域进行的科学研究环境中诞生的。 <br><br> 几十年后，这些原理和思想被转移到UNIX操作系统环境中（特别是它们包含在<code>grep</code>实用程序中），并以Perl编程语言实现，该语言在Internet诞生之初就广泛用于后端（至今已被使用，但如今已经很少使用）了例如表单验证。 <br><br><img src="https://habrastorage.org/webt/qc/ar/2n/qcar2n7t2d3mfadvtvfhnapw8by.png"><br><br><h5> 如果它们看起来很简单，那么为什么乍一看它们却如此恐怖呢？ </h5><br> 实际上，任何表达式都可以是“正则表达式”，并且可以用于检查或搜索任何字符。 例如，词<em>Pavel</em>或<em>example@mail.ru</em>当然也可以用作常规，只是在相当狭窄的范围内。 要在PHP环境中测试正则表达式的性能而无需启动服务器或托管，您可以使用以下在线<a href="https://regex101.com/">服务</a> （该<a href="https://regex101.com/">服务</a>不适用于俄语字符的处理）。 首先，我们只使用<em>Pavel</em>作为正则表达式。 <br><br> 假设我们有以下文本： <br><br>  <b>帕维尔非常</b>了解。  <b>帕维尔</b>使用nginx，但他不是漫步者。 <br><br> 现在，正则表达式已经找到了单词Pavel的两种情况。 很棒，但是听起来并不是很有用（除非出于某些原因，您试图通过Vim和Python分析诸如《战争与和平》中“ <b>先生</b> ”一词的提法之类的内容，但是我对您没有任何疑问）。 <br><br><h5> 表达变异性 </h5><br> 如果您的正则表达式是可变的（例如，您只知道其中的一部分，并且需要查找从2000年开始到2099年结束的年数），那么我们可以使用以下正则表达式： <em>20 ..</em> <br><br>  <i>文字：年轻作家写很多东西。</i>  <i>例如，出生于<b>2002年</b>的作家与<b>2008年</b>和<b>2012年</b>大不相同<b>。</b></i> <br><br> 在这里，借助正则表达式，我们可以找到所有年份，但是到目前为止，这没有任何意义。 最有可能的是，我们不需要2012年以后的年份（尽管可能会冒犯8岁以下的年轻作家，但现在不应该这样）。 值得研究字符集，但稍后再讨论，因为现在我们将讨论正则表达式的另一个重要部分：转义元字符。 <br><br> 想象一下，我们需要查找扩展名为<code>.doc</code>的文件的出现次数（假设我们仅导出某些上传到数据库的文件）。 但是，点仅表示任何字符吗？ 那该怎么办呢？ <br> 在这里，用反斜杠转义元字符对我们有帮助。 现在，表达式<code>\.doc</code>将足以搜索任何带有扩展名<code>.doc</code>文本： <br><br> 正则表达式： <code>\.doc</code> <br><br> 文字：kursach.doc， <code>nepodozritelneyfail.exe</code> ， <code>shaprgalka.rtf doc</code> ， <code>shaprgalka.rtf doc</code> <br><br> 如您所见，我们可以在列表中成功找到扩展名为<code>.doc</code>的文件数。 但是，我们无法使用此正则表达式提取完整文件名，例如，将其提取到数组中。 现在该看看字符集了。 <br><br><h5> 匹配整套字符 </h5><br> 在正则表达式中，使用元字符-方括号<code>[ ]</code>来提供与集合的匹配。 可以将任意两个ASII字符指定为范围的开始和结束。 对于一个简单的实现，假设我们要查找扩展名为<code>.jpg</code>所有编号为0到9的文件。 <br><br> 正则表达式： <code>[0-9]\.jpg</code> <br><br> 文字： <b>1.jpg</b> ， <b>2.jpg</b> ， <b>3.jpg</b> ，photo.jpg，anime.jpg， <b>8.jpg</b> ，jkl.jpg <br><br> 值得注意的是，我们的正则表达式不会覆盖超过1位的文件名。 关于多项选择的选择会略低一些，但是现在想象一下，我们突然需要实现相反的结果。 添加元字符<code>^</code> （相反，它在正则表达式中具有多达两个函数）。 要将其用作例外，您需要将其完全添加到我们的集合中： <br><br> 正则表达式： <code>[^0-9]\.jpg</code> <br><br> 文字：1.jpg，2.jpg，3.jpg，phot <b>o.jpg</b> ，anim <b>e.jpg</b> ，8.jpg，jk <b>l.jpg</b> <br><br> 但是如果没有多重选择，这些当然是劣等的表达。 <br><br><h5> 有用的表 </h5><br> 这是一个元字符表： <br><br><div class="scrollable-table"><table><tbody><tr><td>  \ </td><td> 将元字符转义为常规字符 </td></tr><tr><td>  ^ </td><td> 在行的开头搜索特定字符（但仅当您从集合[]中排除该字符时） </td></tr><tr><td>  $ </td><td> 行尾 </td></tr><tr><td>  | </td><td> 另类 </td></tr><tr><td>  （） </td><td> 分组 </td></tr><tr><td>  \ w </td><td> 所有字母数字字符（由于某些原因，许多手册在数字字符上不一致） </td></tr><tr><td>  \ W </td><td> 同一件事，正好相反 </td></tr><tr><td>  \ s </td><td> 任何空格 </td></tr><tr><td>  \ S </td><td> 任何非空白 </td></tr></tbody></table></div><br><br> 空格元字符表 <br><div class="scrollable-table"><table><tbody><tr><td>  [\ b] </td><td> 单字符返回 </td></tr><tr><td>  \ f </td><td> 页面翻译 </td></tr><tr><td>  \ n </td><td> 换行 </td></tr><tr><td>  \ r </td><td> 回车 </td></tr><tr><td>  \ t </td><td> 制表 </td></tr><tr><td>  \ v </td><td> 垂直标签 </td></tr></tbody></table></div><br><br><h3> 多项选择：进行简单验证 </h3><br> 掌握了所学的知识之后，我们将尝试制作一个正则表达式，以查找例如少于3个字母的单词（反垃圾邮件的标准任务）。 如果我们尝试使用以下正则表达式- <code>\w{1,3}</code> （其中元字符<code>\w</code>表示任何字符，大括号表示从多少到多少的字符数，那么我们将突出显示一行中的所有字符-您需要以某种方式指定文本中单词的开头和结尾，为此，我们需要元字符<code>\b</code> 。 <br><br> 正则表达式： <code>\b\w{1,3}\b:</code> <br><br> 文字：好词 <br>  <b>不</b> <br>  <b>蛋</b> <br><br> 还不错！ 现在，少于三个字母的单词将无法进入我们的数据库。 让我们看一下邮件地址的验证： <br><br> 正则表达式： <code>\w+@\w+\.\w+</code> <br><br> 要求：电子邮件的开头应该是任何字符（数字或字母，因为电子邮件通常只包含数字）。 然后是<code>@</code>符号，然后是任意数量的字符，然后是转义的点（即只是一个点）和第一级域。 <br><br><h5> 更详细地考虑字符重复。 </h5><br> 现在，让我们仔细看看如何在正则表达式中重复字符。 例如，您想在文本中找到2到6之间的任何数字组合： <br><br> 正则表达式： <code>[2-6]+</code> <br><br> 文字：这是89个不同的<b>234</b>位数字<b>24</b> 。 <br><br> 让我给您一张所有元字符量词的表格： <br><br><div class="scrollable-table"><table><tbody><tr><td>  * </td><td> 字符重复0，广告无限 </td></tr><tr><td>  + </td><td> 从1重复到无穷 </td></tr><tr><td>  {n} </td><td> 精确重复n次 </td></tr><tr><td>  {n，} </td><td> 从n到无穷大 </td></tr><tr><td>  {n1，n2} </td><td> 精确地从n1到n2倍 </td></tr><tr><td>  ？ </td><td>  0或1个字符，不再 </td></tr></tbody></table></div><br><br> 应用量词没什么复杂的。 除了一个警告：贪婪和懒惰的量词。 表格如下： <br><br><div class="scrollable-table"><table><tbody><tr><td>  * </td><td>  *？ </td></tr><tr><td>  + </td><td>  +？ </td></tr><tr><td>  {n，} </td><td>  {n，}？ </td></tr></tbody></table></div><br><br> 惰性量词与贪婪的量词的不同之处在于，它们捕获的字符数最少而不是最大。 想象一下，我们有一个任务来查找所有h1-h6标头标签及其内容，并且其余文本不受影响（我故意输入了不存在的h7标签，以免遭受转义Habra标签的困扰）： <br><br> 正则表达式：&lt;h [1-7]&gt;。*？&lt;\ / H [1-7]&gt; <br><br> 文本： <b><code>&lt;</code> <code>h7</code> <code>&gt;</code>您好<code>&lt;/</code> <code>h7</code> <code>&gt;</code></b> lorem ipsum avada kedavra <b><code>&lt;</code> <code>h7</code> &gt;购买<code>&lt;</code> <code>/h7</code> <code>&gt;</code></b> <br><br> 一切都成功进行，但这仅归功于惰性量词。 在使用贪婪量词的情况下，标记之间的所有文本都会突出（我认为这不需要说明）。 <br><br><h5> 字符串边框 </h5><br> 我们上面已经使用过的字符串的边界。 这是更详细的表： <br><br><div class="scrollable-table"><table><tbody><tr><td>  \ b </td><td> 词边界 </td></tr><tr><td>  \ B </td><td> 不是单词边界 </td></tr><tr><td>  \ A </td><td> 行首 </td></tr><tr><td>  \ Z </td><td> 行尾 </td></tr><tr><td>  \ G </td><td> 行动结束 </td></tr></tbody></table></div><br><br><h5> 使用子表达式 </h5><br> 正则表达式中的子表达式是使用group metacharacter <code>()</code> 。 <br> 这是一个可以普遍找到IP地址的各种变体的正则表达式示例。 <br><br> 正则表达式：（（（25 [0-5]）|（2 [0-4] \ d）|（1 \ d {2}）|（\ d {1,2}））\。）{3} （（（（25 [0-5] |（2 [0-4] \ d）|（1 \ d {2}）|（\ d {1,2}）））） <br><br> 文字： <b>255.255.255.255</b>只是一个地址 <br>  <b>191.198.174.192</b>维基百科 <br>  <b>87.240.190.67</b> vk <br>  <b>31.13.72.36</b>脸书 <br><br> 它使用逻辑运算符<code>|</code>  （或），这使我们可以编写与IP地址的编译规则匹配的正则表达式。  IP地址必须包含1到3位数字，其中三个数字可以从1到2开头（或者第二个数字必须在0到4之间），或者以25开头然后是3位数结果在0到5之间。而且，每个数字组合之间必须有一个点。 使用上面的表格，尝试在顶部破译正则表达式。 一开始的正则表达式会让您感到厌烦，但长并不意味着复杂。 <br><br><h5> 展望未来 </h5><br> 要查看某些字符的任何组合的表达式，请指定一个模式，通过该模式可以检测到匹配项，但不会返回。 本质上，向前看定义了一个子表达式，因此它是相应形成的。 向前看的语法模式由一个以？=开头的子表达式组成，然后均等地跟随要匹配的文本。 <br><br> 这是一项特定的任务：密码必须至少包含7个字符，并且必须至少包含一个大写字母和数字。 在这里，一切都将变得更加复杂，因为用户应该能够将大写字母放在句子的开头和中间（并且该字母应该重复相同的内容）。 <br><br> 因此，我们需要期待表达。 此外，我们需要将标志分成几组。 我想将其大小限制为8到22个字符： <br><br> 正则表达式：/ <code>/^(?=.*[az])(?=.*[AZ])(?=.*\d)[a-zA-Z\d]{8,}$/</code> <br><br> 文字： <b>Qwerty123</b> <br>  <b>Im789098</b> <br> 弱密码 <br><br><h3>  PHP正则表达式工作的功能 </h3><br> 要了解正则表达式在PHP中的工作方式，请查看官方PCRE文档（Perl兼容正则表达式）中的功能，该文档可在官方网站上获得。 该表达式必须用定界符括起来，例如用正斜杠括起来。 <br><br> 任意字符都可以是分隔符，字母数字，反斜杠“ \”和零字节除外。 如果定界符出现在模式中，则必须转义\。 作为分隔符，组合来自Perl：（），{}，[]。 <br><br>  PHP使用什么功能？  PCRE软件包提供以下功能来支持正则表达式： <br><br><ul><li>  <em>preg_grep（）</em> -执行搜索并返回匹配项数组。 </li><li>  <em>preg_match（）</em> -使用正则表达式搜索第一个匹配项 </li><li>  <em>preg_match_all（）</em> -使用正则表达式执行全局搜索 </li><li>  <em>preg_quote（）</em> -接受模板并返回其转义版本 </li><li>  <em>preg_replace（）</em> -执行搜索和替换操作 </li><li>  <em>preg_replace_callback（）</em> -也执行搜索和替换操作，但它们使用回调-任何特定替换的函数 </li><li>  <em>preg_split（）</em> -将字符串拆分为子字符串 </li></ul><br><br> 修饰词<code>i</code>安排不区分大小写的匹配。 <br> 使用<code>m</code>修饰符，可以激活多行文本处理模式。 <br><br> 替换字符串可以作为PHP代码计算。 要激活此模式，请使用<em>e</em>修饰符。 <br><br> 所有<code>preg_replace()</code> ， <code>preg_replace_callback()</code>和<code>preg_split()</code>支持一个附加参数，该参数引入了对最大替换数或分区数的限制。 <br><br> 反向链接可以用$符号表示（例如，$ 1），在早期版本中，使用\符号代替$符号。 <br> 不使用元字符\ E，\ l，\ L，\ u和\ U（因此，本文中未提及它们）。 <br><br> 没有POSIX字符类，我们的文章将是不完整的，POSIX字符类也可以在PHP中使用（通常可以很好地提高常规的可读性，但并非所有的急着学习，因为它们经常破坏表达式的逻辑）。 <br><br><div class="scrollable-table"><table><tbody><tr><td>  [[：alnum：]] </td><td> 英文字母或数字的任何字母 </td></tr><tr><td>  [[：alpha：]] </td><td> 任何字母（[a-zA-Z]） </td></tr><tr><td>  [[：空白：]] </td><td> 空格或字符代码0和255 </td></tr><tr><td>  [[：数字：]] </td><td> 任意数字（[0-9]） </td></tr><tr><td>  [[：较低：]] </td><td> 英文字母的任何小写字母（[az]） </td></tr><tr><td>  [[：上层：]] </td><td> 英文字母的任何大写字母（[AZ]） </td></tr><tr><td>  [[：punct：]] </td><td> 任何标点符号 </td></tr><tr><td>  [[：空格：]] </td><td> 任何空格 </td></tr><tr><td>  [[：xdigit：]] </td><td> 任意十六进制数字（[0-9a-fA-F]） </td></tr></tbody></table></div><br><br> 最后，我将给出一个使用上述实现的PHP正则表达式的具体实现示例。 我还添加了用户名验证，以便他不能输入太短的字母组合（好吧，假设这些是昵称，而不是名称，名称短于两个字母）： <br><br><pre> <code class="php hljs"> $pattern_name = <span class="hljs-string"><span class="hljs-string">'/\w{3,}/'</span></span>; $pattern_mail = <span class="hljs-string"><span class="hljs-string">'/\w+@\w+\.\w+/'</span></span>; $pattern_password = <span class="hljs-string"><span class="hljs-string">'/^(?=.*[az])(?=.*[AZ])(?=.*\d)[a-zA-Z\d]{8,}$/'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (preg_match($pattern_name, $name) &amp;&amp; preg_match($pattern_mail, $mail) &amp;&amp; preg_match($pattern_password, $_POST[<span class="hljs-string"><span class="hljs-string">'password'</span></span>])) { <span class="hljs-comment"><span class="hljs-comment">#  ,  ,   ,   ,      }</span></span></code> </pre><br><br> 谢谢大家的关注！ 当然，今天我们仅涉及正则表达式的一部分，并且可以撰写更多有关正则表达式的文章。 例如，我们没有讨论文本中相同单词重复搜索的实现。 但我希望所获得的知识足以有意义地编写我的第一个表单验证，然后再进行更复杂的事情。 <br><br>  <b>按照传统，一些有用的链接：</b> <br><br>  MIT正则表达式<a href="http://web.mit.edu/hackl/www/lab/turkshop/slides/regex-cheatsheet.pdf">备忘单</a> <br>  php regex <a href="https://www.php.net/manual/ru/pcre.pattern.php">文档</a>的官方部分。 <br><br>  <b>仅此而已。</b>  <b><a href="https://otus.pw/vMHA/">密集</a>见！</b> <br>  <b>紧张的第二天<a href="https://otus.pw/cl2i/">将在这里举行</a></b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN484048/">https://habr.com/ru/post/zh-CN484048/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN484020/index.html">您想给谁留下深刻的印象？</a></li>
<li><a href="../zh-CN484026/index.html">第6部分：将MemTest86 +移植到RISC-V</a></li>
<li><a href="../zh-CN484028/index.html">马蹄弯-可折叠平板电脑，带折叠显示屏</a></li>
<li><a href="../zh-CN484036/index.html">新行业集团为智能家居创建通用标准</a></li>
<li><a href="../zh-CN484046/index.html">使用PVS-Studio检查Emby</a></li>
<li><a href="../zh-CN484050/index.html">使用PVS-Studio分析器嵌入源代码分析</a></li>
<li><a href="../zh-CN484052/index.html">月球基地的任务</a></li>
<li><a href="../zh-CN484056/index.html">您的项目真的需要测试吗？</a></li>
<li><a href="../zh-CN484062/index.html">MEMASICS学习英语</a></li>
<li><a href="../zh-CN484064/index.html">如何为本地化准备游戏？ 10条基本规则</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>