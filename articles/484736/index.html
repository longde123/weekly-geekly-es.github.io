<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëå üö∞ ü§±üèº Linux: eliminar el grupo de bloqueo / dev / random üóìÔ∏è üßö üö±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como saben, / dev / random, un generador de n√∫meros pseudoaleatorios criptogr√°ficamente fuerte (CSPRNG), tiene un problema desagradable: el bloqueo. E...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Linux: eliminar el grupo de bloqueo / dev / random</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/484736/"> Como saben, / dev / random, un generador de n√∫meros pseudoaleatorios criptogr√°ficamente fuerte (CSPRNG), tiene un problema desagradable: el bloqueo.  Este art√≠culo describe c√≥mo resolverlo. <br><br>  En los √∫ltimos meses, los medios para generar n√∫meros aleatorios en el n√∫cleo se han modificado ligeramente, pero los problemas en este subsistema se han resuelto en un <a href="https://lwn.net/Kernel/Index/">per√≠odo de tiempo</a> m√°s amplio.  Los <a href="https://lwn.net/Articles/802360/">cambios</a> m√°s <a href="https://lwn.net/Articles/802360/">recientes</a> se realizaron para evitar que la llamada al sistema getrandom () se bloquee durante mucho tiempo durante el arranque del sistema, pero la raz√≥n detr√°s de esto fue el comportamiento del grupo aleatorio de bloqueo.  Un parche reciente eliminar√≠a este grupo, y era de esperar que ir√≠a al n√∫cleo principal. <br><br>  Andy Lutomirski lanz√≥ la tercera versi√≥n del parche a fines de diciembre.  Realiza <i>"dos cambios sem√°nticos b√°sicos en las API de Linux aleatorias"</i> .  El parche agrega el nuevo indicador GRND_INSECURE a la llamada al sistema getrandom () (aunque Lutomirsky se refiere a √©l como getentropy (), que se implementa en glibc usando getrandom () con indicadores fijos);  Este indicador obliga a la llamada a devolver siempre la cantidad de datos solicitados, pero sin garantizar que los datos sean aleatorios.  El n√∫cleo simplemente har√° todo lo posible para proporcionar los mejores datos aleatorios que tenga en un momento dado.  <i>"Probablemente lo mejor que puede hacer es llamarlo" INSEGURIDAD "</i> (inseguro) para evitar que se use para cosas que necesitan seguridad". <a name="habracut"></a><br><br>  Los parches tambi√©n eliminan el grupo de bloqueo.  Actualmente, el n√∫cleo admite dos grupos de datos aleatorios, uno de los cuales corresponde a / dev / random y el otro a / dev / urandom, como se describe en este <a href="https://lwn.net/Articles/658497/">art√≠culo de</a> 2015.  Un grupo de bloqueo es un grupo para / dev / random;  la lectura de este dispositivo se bloquear√° (es decir, su nombre) hasta que se recopile entrop√≠a "suficiente" del sistema para satisfacer la solicitud.  Las lecturas adicionales de este archivo tambi√©n se bloquean si no hay suficiente entrop√≠a en el grupo. <br><br>  Eliminar el grupo de bloqueo significa que la lectura de / dev / random se comporta como getrandom () con el valor de las banderas establecido en cero (y convierte la bandera GRND_RANDOM en noop).  Despu√©s de inicializar el generador de n√∫meros aleatorios criptogr√°ficos (CRNG), la lectura de / dev / random y la llamada getrandom (..., 0) no se bloquear√°n y devolver√°n la cantidad solicitada de datos aleatorios. <br><br>  Lutomirsky dice: <i>‚ÄúCreo que el grupo de bloqueo de Linux se ha vuelto obsoleto.</i>  <i>CRNG Linux genera resultados que son lo suficientemente buenos como para usar incluso para la generaci√≥n de claves.</i>  <i>El grupo de bloqueo no es m√°s fuerte en ning√∫n sentido material, y requiere una gran cantidad de infraestructura de dudoso valor para mantenerlo ‚Äù.</i> <br><br>  Los cambios se realizaron con el objetivo de garantizar que los programas existentes no sufran realmente, y de hecho, los problemas con la larga espera para cosas como generar claves GnuPG se har√°n m√°s peque√±os. <br><br>  <i>‚ÄúEstas series no deben violar ning√∫n programa existente.</i>  <i>/ dev / urandom permanece sin cambios.</i>  <i>/ dev / random a√∫n se bloquea inmediatamente despu√©s de la carga, pero bloquea menos que antes.</i>  <i>getentropy () con banderas existentes devolver√° un resultado que ser√° tan pr√°ctico para el prop√≥sito como antes ".</i> <br><br>  Lutomirsky se√±al√≥ que la pregunta sigue abierta si el n√∫cleo deber√≠a proporcionar los llamados "n√∫meros aleatorios verdaderos", que en cierta medida deber√≠an haber sido realizados por el n√∫cleo de bloqueo.  √âl ve solo una raz√≥n para esto: "cumplimiento de las normas estatales".  Lutomirsky sugiri√≥ que si el kernel debe proporcionar esto, entonces esto debe hacerse a trav√©s de una interfaz completamente diferente o debe transferirse al espacio del usuario, lo que le permite recuperar patrones de eventos no procesados ‚Äã‚Äãque se pueden usar para crear dicho grupo de bloqueo. <br><br>  Stephan M√ºller sugiri√≥ que su conjunto de <a href="https://lwn.net/ml/linux-kernel/2722222.P16TYeLAVu%40positron.chronox.de/">parches</a> para el generador de n√∫meros aleatorios de Linux (LRNG) (actualmente se lanza la versi√≥n 26) podr√≠a ser una forma de proporcionar n√∫meros aleatorios verdaderos para las aplicaciones que lo necesitan.  LRNG "cumple totalmente con los requisitos de las" Recomendaciones sobre las fuentes de entrop√≠a utilizadas para generar bits aleatorios "SP800-90B", lo que lo convierte en una soluci√≥n al problema de los est√°ndares estatales. <br>  Matthew Garrett se opuso al t√©rmino "datos aleatorios verdaderos", y se√±al√≥ que los dispositivos seleccionables pueden, en principio, modelarse con la precisi√≥n suficiente para hacerlos predecibles: "no estamos tomando eventos cu√°nticos aqu√≠". <br><br>  Muller respondi√≥ que el t√©rmino proviene del est√°ndar alem√°n AIS 31 para describir un generador de n√∫meros aleatorios que solo produce el resultado "a la misma velocidad que la fuente de ruido subyacente produce entrop√≠a". <br><br>  Adem√°s de los malentendidos de la terminolog√≠a, la presencia de un grupo de bloqueo, como lo sugieren los parches LRNG, simplemente conducir√° a varios problemas, al menos si est√° disponible sin privilegios. <br><br>  Como dijo Lutomirsky: <i>‚ÄúEsto no resuelve el problema.</i>  <i>Si dos usuarios diferentes ejecutan programas est√∫pidos como gnupg, simplemente se agotan mutuamente.</i>  <i>Veo que actualmente hay dos problemas principales con / dev / random: es susceptible a DoS (es decir, agotamiento de recursos, influencia da√±ina o algo as√≠), y dado que no requiere ning√∫n privilegio para usarlo, sujeto a abuso.</i>  <i>Gnupg est√° equivocado, es un colapso completo.</i>  <i>Si agregamos una nueva interfaz sin privilegios que usar√°n gnupg y programas similares, perderemos nuevamente ‚Äù.</i> <br><br>  Muller se√±al√≥ que agregar getrandom () ahora permitir√° que GnuPG use esta interfaz, ya que proporcionar√° la garant√≠a necesaria de que el grupo se ha inicializado.  Basado en discusiones con el desarrollador de GnuPG Werner Koch, Muller cree que la garant√≠a es la √∫nica raz√≥n por la que GnuPG actualmente lee directamente desde / dev / random.  Pero si hay una interfaz no privilegiada que est√° sujeta a una denegaci√≥n de servicio (a partir de hoy / dev / random), entonces, seg√∫n Lutomirsky, algunas aplicaciones la utilizar√°n mal. <br><br>  Theodore Yue Tak Ts'o, el desarrollador del subsistema de n√∫meros aleatorios de Linux, parece haber cambiado de opini√≥n acerca de la necesidad de un grupo de bloqueo.  Dijo que eliminar este grupo efectivamente eliminar√≠a la idea de que Linux tiene un verdadero generador de n√∫meros aleatorios (TRNG): <i>"esto no tiene sentido, ya que esto es exactamente lo que * BSD siempre ha hecho".</i> <br><br>  Tambi√©n le preocupa que proporcionar el mecanismo TRNG simplemente sirva como se√±uelo para los desarrolladores de aplicaciones y cree que, en realidad, dados los diversos tipos de hardware soportados por Linux, no es posible garantizar TRNG en el n√∫cleo.  Incluso la capacidad de trabajar con equipos basados ‚Äã‚Äãen privilegios de root no resolver√° el problema: <i>"Los desarrolladores de aplicaciones especifican que su aplicaci√≥n se instale como root por razones de seguridad, porque esta es la √∫nica forma de acceder a n√∫meros aleatorios" realmente buenos ".</i> <br><br>  Muller pregunt√≥ si Cao se hab√≠a negado a implementar el grupo de bloqueo, que √©l mismo hab√≠a propuesto durante mucho tiempo.  Cao respondi√≥ que planeaba tomar los parches de Lutomirsky y se opuso activamente a agregar una interfaz de bloqueo al n√∫cleo. <br><br>  <i>‚ÄúEl n√∫cleo no puede dar ninguna garant√≠a sobre si la fuente de ruido se ha caracterizado adecuadamente.</i>  <i>Lo √∫nico que puede obtener un desarrollador de GPG u OpenSSL es la vaga sensaci√≥n de que TRUERANDOM es "mejor", y dado que quieren m√°s seguridad, sin duda intentar√°n usarlo.</i>  <i>En alg√∫n momento, se bloquear√°, y cuando alg√∫n otro usuario inteligente (quiz√°s un especialista en distribuci√≥n) lo inserte en el script de inicio y los sistemas dejen de funcionar, los usuarios solo tendr√°n que quejarse ante el propio Linus Torvalds ".</i> <br><br>  Cao tambi√©n aboga por proporcionar a los cript√≥grafos y aquellos que realmente necesitan TRNG una forma de recopilar su propia entrop√≠a en el espacio del usuario para que puedan usarla como mejor les parezca.  √âl dice que la recopilaci√≥n de entrop√≠a no es un proceso que puede realizar el n√∫cleo en todo tipo de hardware soportado por √©l, adem√°s, el n√∫cleo en s√≠ mismo no puede estimar la cantidad de entrop√≠a proporcionada por varias fuentes. <br><br>  <i>"El n√∫cleo no debe mezclar diferentes fuentes de ruido y, por supuesto, no debe intentar afirmar que sabe cu√°ntos bits de entrop√≠a recibe cuando intenta jugar alg√∫n tipo de" juego desigual de entrop√≠a "en una arquitectura de CPU simple para el usuario feo "Casos IOT / Embedded, cuando todo est√° fuera de sincronizaci√≥n con un solo generador maestro, cuando no hay instrucciones de CPU para reordenar o renombrar el registro, etc."</i> <i><br><br></i>  <i>‚ÄúPodemos hablar acerca de proporcionar herramientas que intenten hacer estos c√°lculos, pero tales cosas deber√≠an llevarse a cabo en el equipo de cada usuario, lo que para la mayor√≠a de los usuarios del kit de distribuci√≥n no es pr√°ctico.</i>  <i>Si esto est√° destinado solo a cript√≥grafos, deje que se haga en su espacio de usuario.</i>  <i>Y no simplifiquemos GPG, OpenSSL, etc., para que todos digan: "queremos" aleatoriedad verdadera "y no estamos de acuerdo en nada menos".</i>  <i>Podemos hablar sobre c√≥mo proporcionamos interfaces a los cript√≥grafos para que puedan obtener la informaci√≥n necesaria a trav√©s del acceso a fuentes de ruido primarias, separadas y nombradas, y, posiblemente, de alguna manera, la fuente de ruido puede autenticarse en una biblioteca o aplicaci√≥n de espacio de usuario ".</i> <br><br>  Hubo una peque√±a discusi√≥n sobre c√≥mo podr√≠a verse esa interfaz, porque, por ejemplo, para algunos eventos puede haber implicaciones de seguridad.  Cao se√±al√≥ que los c√≥digos de exploraci√≥n del teclado (es decir, las pulsaciones de teclas) se mezclan en el grupo como parte de la recopilaci√≥n de entrop√≠a: "Transferir esto al espacio del usuario, incluso a trav√©s de una llamada privilegiada del sistema, ser√≠a al menos irrazonable".  Es posible que otros tiempos de eventos puedan crear alg√∫n tipo de fuga de informaci√≥n a trav√©s de canales laterales. <br><br>  Por lo tanto, existe la sensaci√≥n de que el problema de larga data del subsistema de n√∫meros aleatorios de Linux est√° en camino a una soluci√≥n.  Los cambios que ha sufrido recientemente el subsistema de n√∫meros aleatorios, de hecho, solo condujeron a problemas DoS en el proceso de su uso.  Ahora hay formas efectivas de obtener los mejores n√∫meros aleatorios que el n√∫cleo puede proporcionar.  Si TRNG sigue siendo deseable para Linux, entonces esta deficiencia deber√° abordarse en el futuro, pero lo m√°s probable es que no se haga dentro del n√∫cleo mismo. <br><br><h3>  Un poco de publicidad :) </h3><br>  Gracias por quedarte con nosotros.  ¬øTe gustan nuestros art√≠culos?  ¬øQuieres ver m√°s materiales interesantes?  Ap√≥yenos haciendo un pedido o recomendando a sus amigos <a href="https://ua-hosting.company/cloudvps/nl">VPS basado en la nube para desarrolladores desde $ 4.99</a> , un <b>an√°logo √∫nico de servidores de nivel b√°sico que inventamos para usted:</b> <a href="https://habr.com/company/ua-hosting/blog/347386/">toda la verdad sobre VPS (KVM) E5-2697 v3 (6 n√∫cleos) 10GB DDR4 480GB SSD 1Gbps desde $ 19 o c√≥mo dividir el servidor?</a>  (las opciones est√°n disponibles con RAID1 y RAID10, hasta 24 n√∫cleos y hasta 40GB DDR4). <br><br>  <b>Dell R730xd 2 veces m√°s barato en el centro de datos Equinix Tier IV en Amsterdam?</b>  ¬°Solo tenemos <b><a href="https://ua-hosting.company/serversnl">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV desde $ 199</a> en los Pa√≠ses Bajos!</b>  <b><b>Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - ¬°desde $ 99!</b></b>  Lea sobre <a href="https://habr.com/company/ua-hosting/blog/329618/">C√≥mo construir un edificio de infraestructura.</a>  <a href="https://habr.com/company/ua-hosting/blog/329618/">clase utilizando servidores Dell R730xd E5-2650 v4 que cuestan 9,000 euros por un centavo?</a> </div></div><p>Source: <a href="https://habr.com/ru/post/484736/">https://habr.com/ru/post/484736/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484724/index.html">Noticias del mundo de OpenStreetMap No. 494 (12.31.2019-06.01.2020)</a></li>
<li><a href="../484728/index.html">Comprador misterioso de CityMobile</a></li>
<li><a href="../484730/index.html">Dell Inspiron 7490: port√°til de metal ligero para todos los d√≠as con excelente autonom√≠a</a></li>
<li><a href="../484732/index.html">¬øQu√© es VMware y por qu√© es importante su compatibilidad con SSD?</a></li>
<li><a href="../484734/index.html">Lo que podr√≠a haberse presentado en el CES en los siglos XIX y XX.</a></li>
<li><a href="../484738/index.html">Tutorial de integraci√≥n continua para Laravel 6 en Google Cloud Run</a></li>
<li><a href="../484740/index.html">Semana de la seguridad 04: problemas de cifrado en Windows 10</a></li>
<li><a href="../484744/index.html">Como hice sombras 2D en Unity</a></li>
<li><a href="../484750/index.html">Esquizofrenia: un cuidado</a></li>
<li><a href="../484752/index.html">Escribir un controlador de computadora port√°til para divertirse y obtener ganancias, o C√≥mo comprometerse con el kernel incluso si no es tan inteligente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>