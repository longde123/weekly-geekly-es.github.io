<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💿 🚑 ❇️ Lampu pintar yang menunjukkan suasana di kota Anda 🧒🏼 😏 👩🏽‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Semua orang tahu perasaan ini ketika ada keinginan obsesif untuk melakukan sesuatu: untuk membeli sesuatu, membuat sesuatu, menulis sesuatu, memanggil...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lampu pintar yang menunjukkan suasana di kota Anda</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419299/"><img src="https://habrastorage.org/webt/uh/vi/eq/uhvieqz4u17x6p6fzdp5lcmx5mi.jpeg"><br><br>  Semua orang tahu perasaan ini ketika ada keinginan obsesif untuk melakukan sesuatu: untuk membeli sesuatu, membuat sesuatu, menulis sesuatu, memanggil seseorang ... Jadi saya memiliki keinginan untuk melakukan sesuatu dengan tangan saya sendiri.  Dalam mencari proyek yang sesuai pada instructables.com, saya menemukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini</a> dan menyadari - inilah yang Anda butuhkan! <br><a name="habracut"></a><br>  Pertama-tama, saya mengadaptasi desain lampu ini untuk diri saya sendiri: <br><br><ul><li>  alih-alih suasana seluruh dunia, saya memutuskan untuk mengambil suasana kota saya </li><li>  alih-alih raspberry pi, saya memutuskan untuk menggunakan arduino (karena sudah tersedia) </li><li> desain kotak plexiglass saya juga berubah sedikit atas kebijaksanaan saya </li><li>  kemampuan untuk mengkonfigurasi lampu tanpa berkedip, melalui kartu sd. </li></ul><br>  Langkah pertama saya memutuskan untuk menulis program di bawah Arduino.  Masalahnya adalah bahwa Arduino tidak memiliki wifi, tetapi solusinya ditemukan cukup cepat - esp8266.  ESP8266 adalah mikrokontroler dengan antarmuka Wi-Fi.  Selain Wi-Fi, mikrokontroler dibedakan oleh kemampuan untuk menjalankan program dari memori flash eksternal dengan antarmuka SPI.  Pemrograman ESP8266 dilakukan melalui adaptor serial, yang dapat digunakan sebagai arduino.  Selain itu, menulis dan menginstal program juga dapat dilakukan melalui arduino IDE. <br><br><img src="https://habrastorage.org/webt/so/ns/jv/sonsjv6obvmpnmfjmulf1tqwfn0.jpeg"><br><br>  Saat bekerja dengan papan ESP-01, saya segera menyadari bahwa menggunakan arduino uno + ESP-01 bundle bukanlah solusi terbaik.  Faktanya adalah bahwa untuk memprogram board, perlu untuk merakit sirkuit programmer kecil.  Ini, tentu saja, tidak sulit, tetapi sangat merepotkan: untuk firmware modul, Anda harus menghubungkan ESP-01 melalui programmer ke arduino uno, yang bekerja dalam mode serial adapter, dan untuk memeriksa pengoperasian program, Anda harus menghubungkan kembali ESP-01 langsung ke arduino uno dalam mode celana sehingga kedua papan dapat bertukar informasi melalui port serial. <br><br><img src="https://habrastorage.org/webt/cb/sc/1s/cbsc1sludsx1ty3r3gukccbqe-s.jpeg"><br><br>  Oleh karena itu, saya memutuskan untuk menggunakan papan NodeMCU sebagai mikrokontroler, yang merupakan sesuatu seperti esp8266 dan arduino mini pada satu papan.  Selain itu, ia memiliki input micro usb, yang sangat menyederhanakan prosedur untuk bekerja dengannya. <br><br><img src="https://habrastorage.org/webt/zo/6c/ay/zo6cayg0goy_vby2v4wbfigwdic.jpeg"><br><br>  Program itu sendiri ternyata sangat sederhana.  Pertama, terhubung ke jaringan wifi, login dan kata sandi yang disimpan di kartu sd.  Setelah itu, json diunduh dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ip-api.com/json</a> untuk menentukan lokasi lampu (hanya nama kota dan koordinat geografis yang diambil dari paket).  Ketika lokasi lampu diketahui, program mulai menghasilkan permintaan untuk twitter, menggunakan kata kunci yang menggambarkan setiap "suasana hati" yang diprogram.  Setelah memproses permintaan, program menghitung jumlah total tweet dan menentukan persentase setiap mood dalam siklus saat ini.  Untuk membuat perhitungan mood saat ini lebih “hidup” - program membandingkan mood saat ini dengan yang sebelumnya dan menghitung perubahan persentase.  Misalnya, jika dalam siklus pertama pekerjaan, distribusi suasana hati adalah 0,4 untuk kebahagiaan dan 0,05 untuk romansa, dan pada siklus kedua, 0,5 dan 0,1, masing-masing, program akan memilih "romance" sebagai suasana hati saat ini (karena peningkatan kebahagiaan adalah 25%, dan romansa adalah 100). %).  Pendekatan ini memungkinkan Anda untuk dengan cepat merespons perubahan suasana hati yang tiba-tiba di kota, serta melacak suasana hati yang campur aduk (jika fraksi massa kedua suasana tersebut kira-kira sama, program akan beralih di antara mereka secara bergantian). <br><br>  Tahap kedua adalah perakitan perumahan lampu.  Saya segera menentukan bahan - kaca plexiglass (transmisi cahaya 44%) setebal 2 mm.  Pada saat yang sama, menurut ide tersebut, rak bawah - tempat semua barang elektronik berada, terbuat dari kaca plexiglass transparan.  Pada saat yang sama, ada perasaan bahwa ketika lampu bekerja, cahaya tampak keluar dari bawah dan menciptakan ilusi pengangkatan lampu itu sendiri. <br><br>  Saya ingin merekatkan dinding yang dipotong dari plexiglass satu sama lain menggunakan lem panas.  Tetapi desain seperti itu ternyata tidak stabil (mungkin karena lebar dinding yang kecil) dan terus-menerus berantakan.  Lalu saya memutuskan untuk mengencangkan dinding dengan bantuan sudut dan sekrup.  Pilihan ini ternyata lebih dapat diandalkan (meskipun tidak begitu lucu), jadi saya berhenti menggunakannya. <br><br>  Setelah merakit case, saya melanjutkan ke tahap ketiga dan terakhir - memasang elektronik di rak bawah.  Semuanya cukup sederhana di sini, kecuali bahwa bukannya 4 LED yang direncanakan, saya menggunakan 8 - 4 tambahan diarahkan ke bawah untuk membuat efek levitasi.  Faktanya adalah bahwa saya melewatkan ukuran lampu dan 30% dari rak memakan kompartemen untuk 4 baterai AA, menghalangi cahaya LED. <br><br><img src="https://habrastorage.org/webt/o9/w9/kh/o9w9khoanlb2twipnbkef1g3cfm.jpeg"><br><br>  Dan juga ditemukan bahwa LED yang saya beli memiliki pekerjaan yang buruk dalam menampilkan warna yang kompleks.  Karena itu, saya harus membatasi diri pada 7 yang sederhana: merah, hijau, biru, pink (merah + biru), kuning (merah + hijau), pirus (hijau + biru) dan putih. <br><br>  Hasil akhir karya dapat dilihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">video</a> . <br><br>  Dalam video ini, lampu dalam mode demonstrasi - dengan cepat mengubah semua kombinasi warna kabel dalam urutan acak.  Dalam mode operasi "normal", lampu melakukan polling setiap sepuluh menit untuk menghitung suasana hati saat ini dan berubah warna sesuai dengan hasil perhitungan. <br><br>  Anggaran proyek berjumlah sedikit lebih dari 2 ribu rubel.  Selain itu, bagian paling mahal: baterai 4x AA 700r, selembar kaca plexiglass 600r buram, 500r nodemcu Cina. <br><br>  Apa yang bisa ditingkatkan: <br><br><ul><li>  Saat merakit case, Anda bisa menggunakan sudut transparan sehingga tidak terlalu menonjol. </li><li>  Biaya kotak Plexiglas dapat dikurangi secara signifikan jika Anda membeli selembar Plexiglas yang besar dan memotongnya sendiri. </li><li>  Anda dapat menggunakan LED yang lebih mahal, yang biasanya akan menampilkan warna antara seperti oranye, ungu, dll. </li><li>  Anda dapat menggunakan sumber daya lain, seperti mahkota.  Hal ini terutama disebabkan oleh kenyataan bahwa kompartemen baterai untuk 4 baterai AA terlalu besar dan menghalangi sejumlah besar cahaya dari bagian bawah lampu.  Benar, tidak diketahui berapa lama lampu bisa bekerja dari satu mahkota. </li><li>  Anda dapat membuat antarmuka web sederhana untuk mengatur lampu.  Karena perpustakaan untuk bekerja dengan kartu sd tidak mendukung bahasa Rusia, mustahil untuk menetapkan kata kunci untuk pencarian dengan cara ini. </li></ul><br>  Kode program dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> .  Jika itu akan menarik - saya dapat memberi tahu Anda lebih banyak tentang program ini di artikel terpisah. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id419299/">https://habr.com/ru/post/id419299/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id419283/index.html">Bezos melempar uang dan insinyur untuk mengembangkan roket sehubungan dengan percepatan perlombaan ruang angkasa</a></li>
<li><a href="../id419289/index.html">Dengar dan bicara: Pengumuman HolyJS 2018 Moskow</a></li>
<li><a href="../id419291/index.html">Pengumuman Heisenbug 2018 Moskow: jawaban untuk semua pertanyaan</a></li>
<li><a href="../id419295/index.html">Multimodularitas dan Belati 2. Kuliah Yandex</a></li>
<li><a href="../id419297/index.html">Melihat komentar tentang Habré dalam urutan penambahan</a></li>
<li><a href="../id419303/index.html">Laporan Tesla menunjukkan kerugian dan pendapatan yang lebih tinggi dari yang diharapkan investor</a></li>
<li><a href="../id419305/index.html">Spy Toy or Find: Mesin Tik Barbie ™</a></li>
<li><a href="../id419307/index.html">Roskomnadzor menaruh minat pada koneksi bisnis Facebook</a></li>
<li><a href="../id419309/index.html">Warna Sedang JavaScript</a></li>
<li><a href="../id419311/index.html">Luminer industri dari pabrikan domestik Effest dengan indeks rendering warna yang baik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>