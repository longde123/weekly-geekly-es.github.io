<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíô üßëüèø‚Äçü§ù‚Äçüßëüèª üë®üèª‚Äçüî¨ Schulung Cisco 200-125 CCNA v3.0. Tag 37. STP: Root Bridge-Auswahl, PortFast- und BPDU-Schutzfunktionen. Teil 2 üë©‚Äçüë¶‚Äçüë¶ üå± üì±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Angenommen, STP befindet sich in einem Konvergenzzustand. Was passiert, wenn ich das Kabel nehme und den Schalter H direkt mit dem Root-Schalter A ver...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schulung Cisco 200-125 CCNA v3.0. Tag 37. STP: Root Bridge-Auswahl, PortFast- und BPDU-Schutzfunktionen. Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/466425/"> Angenommen, STP befindet sich in einem Konvergenzzustand.  Was passiert, wenn ich das Kabel nehme und den Schalter H direkt mit dem Root-Schalter A verbinde?  Root Bridge "sieht", dass es einen neuen aktivierten Port hat, und sendet eine BPDU dar√ºber. <br><br><img src="https://habrastorage.org/webt/gb/xf/nx/gbxfnxwkx_0wqivijpl1vcbxxic.jpeg"><br><br>  Der Switch H, der diesen Frame ohne Kosten erhalten hat, bestimmt die Kosten der Route durch den neuen Port als 0 + 19 = 19, w√§hrend die Kosten seines Root-Ports 76 betragen. Danach durchl√§uft der Port des Switch H, der zuvor deaktiviert wurde, alle √úbergangsphasen und wechselt nach nur 50 Sekunden in den √úbertragungsmodus.  Wenn andere Ger√§te an diesen Switch angeschlossen sind, verlieren alle f√ºr 50 Sekunden die Verbindung zum Root-Switch und zum gesamten Netzwerk. <a name="habracut"></a><br><br>  Switch G verh√§lt sich genauso und empf√§ngt einen BPDU-Frame mit einer Preisbenachrichtigung 19 von Switch H. Er √§ndert den Wert seines zugewiesenen Ports in 19 + 19 = 38 und weist ihn als neuen Root-Port neu zu, da der Wert seines alten Root-Ports 57 betr√§gt mehr als 38. Gleichzeitig beginnen alle Phasen der 50 Sekunden dauernden Neuzuweisung von Ports erneut, und letztendlich bricht das gesamte Netzwerk zusammen. <br><br><img src="https://habrastorage.org/webt/7i/zg/pd/7izgpd1gse7cxs-ex8tutsnbice.jpeg"><br><br>  Schauen wir uns nun an, was in einer √§hnlichen Situation bei Verwendung von RSTP passieren wird.  Der Root-Switch sendet auch BPDU an den mit ihm verbundenen Switch H, blockiert jedoch unmittelbar danach seinen Port.  Nachdem Switch N diesen Frame empfangen hat, stellt er fest, dass diese Route kosteng√ºnstiger ist als sein Root-Port, und blockiert sie sofort.  Danach sendet N den Root-Switch-Vorschlag mit der Aufforderung, einen neuen Port zu √∂ffnen, da seine Kosten geringer sind als die Kosten des vorhandenen Root-Ports.  Nachdem der Root-Switch die Anforderung akzeptiert hat, entsperrt er seinen Port und sendet die Vereinbarung an Switch H, wonach dieser den neuen Port zu seinem Root-Port macht. <br><br><img src="https://habrastorage.org/webt/x_/ep/dr/x_epdroynd-6-f1qlhdls_lfing.jpeg"><br><br>  Dar√ºber hinaus erfolgt dank des Mechanismus f√ºr Vorschl√§ge / Vereinbarungen die Neuzuweisung des Root-Ports fast sofort, und alle an den Switch H angeschlossenen Ger√§te verlieren nicht die Verbindung zum Netzwerk. <br>  Durch Zuweisen eines neuen Root-Ports verwandelt Switch H den alten Root-Port in einen alternativen Port.  Dasselbe passiert mit Switch G - er tauscht Angebots- / Vertragsnachrichten mit Switch H aus, weist einen neuen Root-Port zu und blockiert die anderen Ports.  Dann wird der Prozess im n√§chsten Netzwerksegment mit Switch F fortgesetzt. <br><br><img src="https://habrastorage.org/webt/le/dc/mi/ledcmit2scjkqd15ymdhwe_pusw.jpeg"><br><br>  Switch F, der die Kosten analysiert hat, wird feststellen, dass die Route zum Root-Switch durch den unteren Port 57 kostet, w√§hrend die vorhandene Route durch den oberen Port 38 kostet und alles so l√§sst, wie es ist.  Wenn Sie dies erfahren, blockiert der G-Switch den Port in Richtung F und leitet den Datenverkehr entlang der neuen GHA-Route an den Root-Switch weiter. <br><br>  Bis Switch F einen Vorschlag / eine Vereinbarung von Switch G erh√§lt, bleibt sein unterer Port blockiert, um Schleifen zu vermeiden.  Sie sehen also, dass RSTP ein sehr schnelles Protokoll ist, das nicht die f√ºr STP typischen Probleme im Netzwerk verursacht. <br>  Fahren wir nun mit der √úberpr√ºfung der Teams fort.  Sie m√ºssen in den globalen Konfigurationsmodus des Switches wechseln und den PVST- oder RPVST-Modus mit dem Befehl &lt;pvst / rpvst&gt; im Spanning-Tree-Modus ausw√§hlen.  Dann m√ºssen Sie entscheiden, wie Sie die Priorit√§t eines bestimmten VLAN √§ndern m√∂chten.  Verwenden Sie dazu den Befehl Spanning-Tree vlan &lt;VLAN-Nummer&gt; Priorit√§t &lt;Wert&gt;.  Im letzten Video-Tutorial sollten Sie sich daran erinnern, dass die Priorit√§t ein Vielfaches von 4096 ist. Standardm√§√üig ist diese Nummer 32768 plus die VLAN-Nummer.  Wenn Sie VLAN1 ausw√§hlen, ist die Standardpriorit√§t 32768 + 1 = 32769. <br><br><img src="https://habrastorage.org/webt/ds/dg/xv/dsdgxvuxv7_csffcqnmtdpfbmea.jpeg"><br><br>  Warum m√ºssen Sie m√∂glicherweise die Priorit√§t von Netzwerken √§ndern?  Wir wissen, dass ein BID aus einem numerischen Priorit√§tswert und einer MAC-Adresse besteht.  Die MAC-Adresse des Ger√§ts kann nicht ge√§ndert werden. Sie hat einen konstanten Wert, sodass Sie nur den Priorit√§tswert √§ndern k√∂nnen. <br><br>  Angenommen, es gibt ein gro√ües Netzwerk, in dem alle Cisco-Ger√§te kreisf√∂rmig verbunden sind.  In diesem Fall ist PVST standardm√§√üig aktiviert, sodass der Root-Switch vom System ausgew√§hlt wird.  Wenn alle Ger√§te die gleiche Priorit√§t haben, hat der Switch mit der √§ltesten MAC-Adresse einen Vorteil.  Es kann sich jedoch um einen 10 bis 12 Jahre alten Legacy-Switch handeln, der nicht einmal √ºber die Leistung und Leistung verf√ºgt, um ein so umfangreiches Netzwerk zu ‚Äûf√ºhren‚Äú. <br>  Gleichzeitig verf√ºgt Ihr Netzwerk m√∂glicherweise √ºber den neuesten Switch f√ºr mehrere tausend Dollar, der aufgrund der gr√∂√üeren MAC-Adresse gezwungen ist, dem alten Switch zu einem Preis von ein paar hundert Dollar zu "gehorchen".  Wenn der alte Switch zum Root-Switch wird, weist dies auf einen schwerwiegenden Netzwerkdesignfehler hin. <br><br>  Daher m√ºssen Sie in die Einstellungen des neuen Switches gehen und ihm einen Mindestpriorit√§tswert zuweisen, z. B. 0. Bei Verwendung von VLAN1 betr√§gt der Gesamtpriorit√§tswert 0 + 1 = 1, und alle anderen Ger√§te betrachten ihn immer als Root-Switch. <br><br>  Stellen Sie sich nun eine solche Situation vor.  Wenn der Root-Switch aus irgendeinem Grund nicht mehr verf√ºgbar ist, m√∂chten Sie m√∂glicherweise, dass der neue Root-Switch nicht nur ein Switch mit der niedrigsten Priorit√§t ist, sondern ein bestimmter Switch mit den besten Netzwerkfunktionen.  In diesem Fall wird in den Root Bridge-Einstellungen ein Befehl verwendet, der die prim√§ren und sekund√§ren Root-Switches zuweist: Spanning-Tree-VLAN &lt;VLAN-Netzwerksnummer&gt; root &lt;prim√§r / sekund√§r&gt;.  Der Priorit√§tswert f√ºr den Prim√§rschalter Prim√§r betr√§gt 32768 - 4096 - 4096 = 24576. F√ºr den Sekund√§rschalter Sekund√§r wird er nach der Formel 32768 - 4096 = 28672 berechnet. <br><br>  Sie k√∂nnen diese Nummern nicht manuell eingeben - das System erledigt dies automatisch f√ºr Sie.  Daher hat der Root-Switch die Priorit√§t 24576, und wenn er nicht verf√ºgbar ist, hat der Switch die Priorit√§t 28672, w√§hrend die Priorit√§t aller anderen Switches standardm√§√üig mindestens 32768 betr√§gt. Dies sollte erfolgen, wenn das System den Root-Switch nicht automatisch zuweisen soll. <br><br>  Wenn Sie die STP-Einstellungen anzeigen m√∂chten, m√ºssen Sie den Befehl show spanning-tree summary verwenden.  Schauen wir uns nun alle Themen an, die wir heute mit Packet Tracer gelernt haben.  Ich verwende die Netzwerktopologie von 4 Switches Modell 2690, es spielt keine Rolle, da alle Modelle von Cisco Switches STP unterst√ºtzen.  Sie sind miteinander verbunden, so dass das Netzwerk einen Teufelskreis bildet. <br><br>  Standardm√§√üig arbeiten Cisco-Ger√§te im PSTV + -Modus, dh die Konvergenz jedes Ports dauert nicht l√§nger als 20 Sekunden.  Im Simulationsfenster k√∂nnen Sie das Senden von Datenverkehr anzeigen und die Betriebsparameter des erstellten Netzwerks anzeigen. <br><br><img src="https://habrastorage.org/webt/_u/1w/wo/_u1wworrzyuxdfrdbw-puoxbjry.jpeg"><br><br>  Sie sehen, was der STP-BPDU-Frame ist.  Wenn Sie die Bezeichnung Version 0 sehen, haben Sie STP, da Version 2 f√ºr RSTP verwendet wird. Hier ist auch der Root-ID-Wert, der aus der Priorit√§t und der MAC-Adresse des Root-Switch besteht, und der Bridge-ID-Wert, der diesem entspricht. <br><br><img src="https://habrastorage.org/webt/wd/gt/ic/wdgticvk35on9102-mcjwf4hlxg.jpeg"><br><br>  Diese Werte sind gleich, da die Kosten f√ºr die Route zum Root-Switch f√ºr SW0 0 betragen und es sich daher selbst um den Root-Switch handelt.  Nach dem Einschalten der Switches aufgrund der Verwendung von STP wurde daher automatisch die Root Bridge ausgew√§hlt und das Netzwerk funktionierte.  Sie sehen, dass der obere Port Fa0 / 2 des SW2-Schalters auf Blocking eingestellt wurde, um eine Schleife zu verhindern, wie durch die orange Farbe des Markers angezeigt. <br><br><img src="https://habrastorage.org/webt/jr/mn/_w/jrmn_w7vygcm2sjvmnvddla6sq8.jpeg"><br><br>  Gehen wir zur Einstellungskonsole des SW0-Schalters und verwenden einige Befehle.  Der erste ist der Befehl show spanning-tree, nach dessen Eingabe auf dem Bildschirm Informationen zum PSTV + -Modus f√ºr VLAN1 angezeigt werden.  Wenn wir mehrere VLANs verwenden, wird am unteren Rand des Fensters ein weiterer Informationsblock f√ºr das zweite und die anschlie√üend verwendeten Netzwerke angezeigt. <br><br><img src="https://habrastorage.org/webt/02/ng/ir/02ngirpnlpfjjtx9lkoahvledbi.jpeg"><br><br>  Sie k√∂nnen sehen, dass das STP-Protokoll gem√§√ü dem IEEE-Standard verf√ºgbar ist, was die Verwendung von PVSTP + bedeutet.  Technisch gesehen ist dies kein .1d-Standard.  Hier finden Sie auch Informationen zur Root-ID: Priorit√§t 32769, MAC-Adresse des Root-Ger√§ts, Kosten 19 usw.  Das Folgende sind Bridge-ID-Informationen, bei denen der Priorit√§tswert 32768 +1 entschl√ºsselt wird und eine andere MAC-Adresse folgt.  Wie Sie sehen, habe ich mich geirrt - der Switch SW0 ist kein Root-Switch, der Root-Switch hat eine andere MAC-Adresse, die in den Root-ID-Parametern angegeben ist.  Ich denke, dies liegt an der Tatsache, dass SW0 einen BPDU-Frame mit Informationen erhalten hat, dass einige Switches im Netzwerk gute Gr√ºnde haben, die Rolle des Root zu spielen.  Jetzt werden wir dar√ºber nachdenken. <br><br>  (Anmerkung des √úbersetzers: Die Root-ID ist die Kennung des Root-Switch, die f√ºr alle Ger√§te desselben VLANs, die √ºber STP ausgef√ºhrt werden, gleich ist. Die Bridge-ID ist die Kennung des lokalen Switch als Teil der Root-Bridge, die f√ºr verschiedene Switches und verschiedene VLANs unterschiedlich sein kann.) <br><br>  Ein weiterer Umstand, der darauf hinweist, dass SW0 kein Root-Switch ist, besteht darin, dass der Root-Switch keinen Root-Port hat. In diesem Fall gibt es sowohl einen Root-Port als auch einen Designated Port, die sich im Weiterleitungsstatus befinden.  Sie sehen auch die Art der Verbindung p2p oder Punkt-zu-Punkt.  Dies bedeutet, dass die Ports fa0 / 1 und fa0 / 2 direkt mit benachbarten Switches verbunden sind. <br>  Wenn ein Port mit dem Hub verbunden w√§re, w√ºrde der Verbindungstyp als gemeinsam genutzt bezeichnet. Dies wird sp√§ter ber√ºcksichtigt.  Wenn ich den Befehl zum Anzeigen der Zusammenfassungsinformationen der show spanning-tree summary eingebe, wird angezeigt, dass sich dieser Switch im PVSTP-Modus befindet. Anschlie√üend wird die Liste der nicht zug√§nglichen Portfunktionen aufgelistet. <br><br><img src="https://habrastorage.org/webt/oq/v6/sb/oqv6sb8fuljx0vzdgk43bigsfb8.jpeg"><br><br>  Das Folgende zeigt den Status und die Anzahl der Ports, die VLAN1 bedienen: Blockieren von 0, Abh√∂ren von 0, Lernen von 0, im Weiterleitungsstatus im STP-Modus gibt es 2 Ports. <br>  Bevor Sie mit dem Schalter SW2 fortfahren, schauen wir uns die Einstellungen des Schalters SW1 an.  Dazu verwenden wir den gleichen Befehl show spanning-tree. <br><br><img src="https://habrastorage.org/webt/yz/yb/f7/yzybf7phzs61b09drhqgnvig1ig.jpeg"><br><br>  Sie sehen, dass die MAC-Adresse der Root-ID f√ºr den Switch SW1 dieselbe ist wie f√ºr SW0, da bei der Konvergenz alle Ger√§te im Netzwerk dieselbe Root Bridge-Ger√§teadresse erhalten, da sie der vom STP-Protokoll getroffenen Auswahl vertrauen.  Wie Sie sehen k√∂nnen, ist SW1 der Root-Switch, da die Root-ID- und Bridge-ID-Adressen identisch sind.  Zus√§tzlich wird die Meldung "Dieser Schalter ist die Wurzel" angezeigt. <br><br>  Ein weiteres Zeichen f√ºr den Root-Switch ist, dass er keine Root-Ports hat. Beide Ports sind als Designated gekennzeichnet.  Wenn alle Ports als Designated angezeigt werden und sich im Weiterleitungsstatus befinden, haben Sie den Root-Switch. <br><br>  Der SW3-Switch enth√§lt √§hnliche Informationen, und jetzt wechsle ich zu SW2, da sich einer seiner Ports im Blockierungszustand befindet.  Ich verwende den Befehl show spanning-tree und wir sehen, dass die Root-ID-Informationen und der Priorit√§tswert mit den √ºbrigen Switches identisch sind. <br>  Im Folgenden wird angegeben, dass einer der Ports Alternative ist.  Lassen Sie sich nicht st√∂ren, der 802.1d-Standard nennt es den blockierenden Port, und in PVSTP wird ein blockierter Port immer als Alternative bezeichnet.  Dieser alternative Fa0 / 2-Port befindet sich also in einem blockierten Zustand, und der Fa0 / 1-Port fungiert als Root-Port. <br><br>  Der blockierte Port befindet sich im Netzwerksegment zwischen Switch SW0 und Switch SW2, so dass wir keine Schleife bilden.  Wie Sie sehen k√∂nnen, verwenden die Switches eine Verbindung wie p2p, da keine anderen Ger√§te mit ihnen verbunden sind. <br><br><img src="https://habrastorage.org/webt/io/l4/zt/iol4zt5fm3clkpjrqme5nkedalw.jpeg"><br><br>  Wir haben ein Netzwerk, das mit dem STP-Protokoll konvergiert.  Jetzt nehme ich das Kabel und verbinde den Schalter SW2 direkt mit dem Schalter SW1.  Danach werden alle SW2-Ports durch orangefarbene Markierungen angezeigt. <br><br><img src="https://habrastorage.org/webt/cv/0x/2d/cv0x2djghir-4ht3yaza36tz9gu.jpeg"><br><br>  Wenn wir den Befehl show spanning-tree summary verwenden, werden wir feststellen, dass sich die beiden Ports zuerst im Listening-Status befinden, dann in den Learning-Status und nach einigen Sekunden in den Forwarding-Status, wobei sich die Markierungsfarbe in Gr√ºn √§ndert.  Wenn Sie jetzt den Befehl show spanning-tree eingeben, k√∂nnen Sie sehen, dass Fa0 / 1, das fr√ºher ein Root-Port war, jetzt blockiert wurde und als alternativer Port bekannt wurde. <br><br><img src="https://habrastorage.org/webt/zt/3u/zh/zt3uzhakx9ischj3l7nhzpay0xy.jpeg"><br><br>  Der Fa0 / 3-Port, an den das Root-Switch-Kabel angeschlossen ist, wurde zum Root-Port, und der Fa0 / 2-Port wurde zum designierten Designated-Port.  Schauen wir uns noch einmal den laufenden Konvergenzprozess an.  Ich werde das SW2-SW1-Kabel abziehen und zur vorherigen Topologie zur√ºckkehren.  Sie sehen, dass die SW2-Ports zuerst blockiert sind und wieder orange werden, dann nacheinander den Listening- und Learning-Status durchlaufen und im Forwarding-Status enden.  In diesem Fall wird ein Port gr√ºn und der zweite, der mit dem Switch SW0 verbunden ist, bleibt orange.  Der Konvergenzprozess hat ziemlich lange gedauert, das sind die Kosten des STP. <br><br><img src="https://habrastorage.org/webt/2b/2f/sv/2b2fsvymkmhweas-zsqywgln9_i.jpeg"><br><br>  Schauen wir uns nun an, wie RSTP funktioniert.  Beginnen wir mit dem Schalter SW2 und geben in den Einstellungen den Befehl Spanning-Tree-Modus Rapid-Pvst ein.  Dieser Befehl hat nur zwei Optionen: pvst und rapid-pvst, ich benutze die zweite.  Nach Eingabe des Befehls wechselt der Switch in den RPVST-Modus. Sie k√∂nnen dies mit dem Befehl show spanning-tree √ºberpr√ºfen. <br><br><img src="https://habrastorage.org/webt/3l/ox/ik/3loxikgk8uz1-pendamxieyv7fk.jpeg"><br><br>  Zu Beginn sehen Sie eine Meldung, dass das RSTP-Protokoll jetzt mit uns zusammenarbeitet.  Alles andere bleibt unver√§ndert.  Dann muss ich dasselbe f√ºr alle anderen Ger√§te tun, und dort wird das RSTP-Setup durchgef√ºhrt.  Schauen wir uns an, wie dieses Protokoll f√ºr STP funktioniert. <br><br>  Ich verbinde den SW2-Switch mit einem Kabel direkt wieder mit dem Root-Switch SW1 - mal sehen, wie schnell die Konvergenz erfolgt.  Ich tippe den Befehl show spanning-tree summary und sehe, dass sich zwei Switch-Ports im Blockierungsstatus befinden, einer im Weiterleitungsstatus. <br><br><img src="https://habrastorage.org/webt/po/nb/6y/ponb6yceu2_uezs940bmpot4zr8.jpeg"><br><br>  Sie k√∂nnen sehen, dass die Konvergenz fast sofort stattgefunden hat, sodass Sie beurteilen k√∂nnen, wie viel RSTP schneller als STP ist.  Als N√§chstes k√∂nnen wir den Spanning-Tree-Befehl portfast default verwenden, mit dem alle Switch-Ports standardm√§√üig in den portfast-Modus versetzt werden.  Dies gilt, wenn die meisten Switch-Ports Edge-Ports sind, die direkt mit Hosts verbunden sind.  Wenn wir einen Port haben, der nicht Edge ist, konfigurieren wir ihn wieder in den Spanning-Tree-Modus. <br><br>  Um die Arbeit mit VLAN zu konfigurieren, k√∂nnen Sie den Befehl spanning-tree vlan &lt;number&gt; mit Priorit√§tsparametern (legt die Switch-Priorit√§t f√ºr den Spanning-Tree fest) oder root (legt den Switch als root fest) verwenden.  Wir verwenden den Priorit√§tsbefehl spanning-tree vlan 1, der als Priorit√§t eine beliebige Zahl angibt, die ein Vielfaches von 4096 im Bereich von 0 bis 61440 ist. Sie k√∂nnen also die Priorit√§t eines beliebigen VLAN manuell √§ndern. <br><br>  Sie k√∂nnen den Spanning-Tree-Befehl vlan 1 root mit prim√§ren oder sekund√§ren Parametern eingeben, um den prim√§ren oder Backup-Root-Port f√ºr ein bestimmtes Netzwerk zu konfigurieren.  Wenn ich Spanning-Tree VLAN 1 Root Primary verwende, ist dieser Port der Hauptstammport f√ºr VLAN1. <br><br>  Ich werde den Befehl show spanning-tree eingeben und sehen, dass dieser Switch SW2 die Priorit√§t 24577 hat. Die MAC-Adressen der Root-ID und der Bridge-ID sind identisch, was bedeutet, dass er jetzt zum Root-Switch geworden ist. <br><br><img src="https://habrastorage.org/webt/bo/5h/m6/bo5hm64ib1fyej_6kmphrslvn3o.jpeg"><br><br>  Sie sehen, wie schnell die Konvergenz und √Ñnderung der Rolle von Switches stattgefunden hat.  Jetzt werde ich den Hauptschaltermodus mit dem Befehl no spanning-tree vlan 1 root primary abbrechen, wonach seine Priorit√§t auf den vorherigen Wert 32769 zur√ºckkehrt und die Rolle des Root-Schalters wieder an SW1 √ºbertragen wird. <br><br>  Mal sehen, wie Portfast funktioniert.  Ich werde den Befehl int f0 / 1 eingeben, in die Einstellungen dieses Ports gehen und den Spanning-Tree-Befehl verwenden, wonach das System Hinweise f√ºr Parameterwerte gibt. <br><br><img src="https://habrastorage.org/webt/va/9j/qx/va9jqxbgepa3y9pjq0qwlpsyc5c.jpeg"><br><br>  Als n√§chstes verwende ich den Spanning-Tree-Befehl portfast, der mit den Deaktivierungsparametern (deaktiviert die Portfast-Funktion f√ºr diesen Port) oder dem Trunk (aktiviert die Portfast-Funktion f√ºr diesen Port auch im Trunk-Modus) eingegeben werden kann. <br><br>  Wenn Sie Spanning-Tree-Portfast eingeben, wird die Funktion an diesem Port einfach aktiviert.  Um die BPDU Guard-Funktion zu aktivieren, m√ºssen Sie den Befehl spanning-tree bpduguard enable verwenden. Der Befehl spanning-tree bpduguard disable deaktiviert diese Funktion. <br><br>  Ich werde Ihnen noch schnell etwas sagen.  Wenn f√ºr VLAN1 die Schnittstelle des Switches SW2 in Richtung SW3 blockiert ist, kann bei anderen Einstellungen f√ºr ein anderes VLAN, z. B. VLAN2, dieselbe Schnittstelle zum Root-Port werden.  Somit kann ein Verkehrslastausgleichsmechanismus in dem System implementiert werden - in einem Fall wird dieses Netzwerksegment nicht verwendet, in einem anderen - es wird verwendet. <br><br>  Ich werde zeigen, was passiert, wenn eine gemeinsam genutzte Schnittstelle entsteht, wenn ein Hub verbunden ist.  Ich werde der Schaltung einen Hub hinzuf√ºgen und ihn mit zwei Kabeln an den SW2-Schalter anschlie√üen. <br><br><img src="https://habrastorage.org/webt/gx/he/hh/gxhehhxqpnrxyabevd7l-sr6d9u.jpeg"><br><br>  Der Befehl show spanning-tree spiegelt das folgende Bild wider. <br><br><img src="https://habrastorage.org/webt/1v/fd/co/1vfdcoqljwc45rzj4--t6vizme4.jpeg"><br><br>  Fa0 / 5 (der untere linke Port des Switches) wird zum Backup-Port, und der Fa0 / 4-Port (der untere rechte Port des Switches) wird zum festgelegten Port.  Der Typ beider Ports wird gemeinsam genutzt oder gemeinsam genutzt.  Dies bedeutet, dass das Hub-Switch-Schnittstellensegment ein gemeinsames Netzwerk ist. <br><br>  Dank der Verwendung von RSTP konnten wir alternative und Backup-Ports trennen.  Wenn wir den SW2-Switch mit dem Befehl pvst im Spanning-Tree-Modus in den Pvst-Modus schalten, sehen wir, dass sich die Fa0 / 5-Schnittstelle wieder im alternativen Status befindet, da jetzt kein Unterschied zwischen dem Backup-Port und dem alternativen Port besteht. <br><br><img src="https://habrastorage.org/webt/3s/9g/d5/3s9gd5pqpga1k-vbj0xjavyqmvi.jpeg"><br><br>  Es war eine sehr lange Lektion, und wenn Sie etwas nicht verstehen, rate ich Ihnen, es noch einmal zu √ºberpr√ºfen. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/LRGmg5omwW0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Vielen Dank f√ºr Ihren Aufenthalt bei uns.  Gef√§llt dir unser Artikel?  M√∂chten Sie weitere interessante Materialien sehen?  Unterst√ºtzen Sie uns, indem Sie eine Bestellung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aufgeben</a> oder Ihren Freunden empfehlen, einen <b>Rabatt von 30% f√ºr Habr-Benutzer auf ein einzigartiges Analogon von Einstiegsservern, das wir f√ºr Sie erfunden haben:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die ganze Wahrheit √ºber VPS (KVM) E5-2650 v4 (6 Kerne) 10 GB DDR4 240 GB SSD 1 Gbit / s von $ 20 oder wie teilt man den Server?</a>  (Optionen sind mit RAID1 und RAID10, bis zu 24 Kernen und bis zu 40 GB DDR4 verf√ºgbar). <br><br>  <b>Dell R730xd 2 mal g√ºnstiger?</b>  Nur wir haben <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2,6 GHz 14C 64 GB DDR4 4 x 960 GB SSD 1 Gbit / s 100 TV von 199 US-Dollar</a> in den Niederlanden!</b>  <b><b>Dell R420 - 2x E5-2430 2,2 GHz 6C 128 GB DDR3 2x960 GB SSD 1 Gbit / s 100 TB - ab 99 US-Dollar!</b></b>  Lesen Sie mehr √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den Aufbau eines Infrastrukturgeb√§udes.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Klasse mit Dell R730xd E5-2650 v4 Servern f√ºr 9.000 Euro f√ºr einen Cent?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466425/">https://habr.com/ru/post/de466425/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466409/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 37. STP: Root Bridge-Auswahl, PortFast- und BPDU-Schutzfunktionen. Teil 1</a></li>
<li><a href="../de466413/index.html">Site Exchange f√ºr Bitrix und 1C: L√∂sung der Hauptprobleme</a></li>
<li><a href="../de466417/index.html">Warshipping - eine Cyber-Bedrohung, die per Post verschickt wird</a></li>
<li><a href="../de466419/index.html">Warum wir bei Sitefinity arbeiten</a></li>
<li><a href="../de466423/index.html">Das mysteri√∂se LyX-Programm. Teil 1</a></li>
<li><a href="../de466427/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 38. EtherChannel-Protokoll f√ºr OSI Layer 2</a></li>
<li><a href="../de466429/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 39. Stapel und Aggregation von Switch-Chassis</a></li>
<li><a href="../de466431/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 40. 802.1X Standard- und AAA-Protokollfamilie</a></li>
<li><a href="../de466433/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 41. DHCP-Snooping und nicht standardm√§√üiges natives VLAN</a></li>
<li><a href="../de466435/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 42. Inter-VLAN-Routing und SVI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>