<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüé® üò¶ üèè Como desenvolvemos um dispositivo para monitorar a aten√ß√£o dos motoristas. Experimente o Yandex.Taxi ü§ß ‚ôàÔ∏è üç≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O t√°xi deve ser confort√°vel e seguro. E isso depende n√£o apenas da qualidade do carro e do servi√ßo, mas tamb√©m da concentra√ß√£o da aten√ß√£o do motorista...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como desenvolvemos um dispositivo para monitorar a aten√ß√£o dos motoristas. Experimente o Yandex.Taxi</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/461137/"><img src="https://habrastorage.org/webt/fu/ag/ow/fuagowhmp0mr-5j1p_xvxe4vlkw.jpeg"><br><br>  O t√°xi deve ser confort√°vel e seguro.  E isso depende n√£o apenas da qualidade do carro e do servi√ßo, mas tamb√©m da concentra√ß√£o da aten√ß√£o do motorista, que cai durante o excesso de trabalho.  Portanto, no n√≠vel de servi√ßo, limitamos o tempo que o motorista passa atr√°s do volante. <br><br>  √Äs vezes, por√©m, os motoristas ficam cansados ‚Äã‚Äã- por exemplo, uma pessoa estava ocupada em outro emprego o dia todo e, √† noite, decidia "dirigir".  O que fazer sobre isso?  Como entender que o motorista interv√©m sem alterar o sono?  Voc√™ pode, por exemplo, tentar avaliar at√© que ponto ele monitora a estrada e determinar sinais de fadiga, por exemplo, pela natureza do piscar.  Isso parece simples?  Tudo √© mais complicado do que parece. <br><br>  Hoje, primeiro contaremos aos leitores de Habr como criamos e desenvolvemos uma c√¢mera que pode fazer isso. <br><br>  Portanto, √© dado: a frequ√™ncia e a dura√ß√£o dos piscadas dependem do grau de fadiga.  Quando estamos cansados, a cabe√ßa fica menos m√≥vel, a dire√ß√£o do nosso olhar muda com menos frequ√™ncia, piscamos com mais frequ√™ncia e deixamos os olhos fechados por longos per√≠odos de tempo - a diferen√ßa pode ser medida em fra√ß√µes de um segundo ou v√°rios graus de rota√ß√£o, mas ela existe.  Nossa tarefa era projetar um dispositivo que nos permitisse analisar piscadas, bem como a dire√ß√£o de nossos olhares, bocejos e movimentos da cabe√ßa, a fim de avaliar o n√≠vel de aten√ß√£o e cansa√ßo do motorista. <br><br><a name="habracut"></a>  Primeiro, decidimos: vamos criar um aplicativo para laptop, coloc√°-lo nos volunt√°rios dentre os funcion√°rios e ele usar√° a c√¢mera embutida para rastrear os sinais de que precisamos?  Portanto, coletaremos imediatamente um grande corpo de informa√ß√µes para an√°lise e testaremos rapidamente nossas hip√≥teses. <br><br>  Spoiler: nada aconteceu!  Muito rapidamente ficou claro que a maioria das pessoas que trabalham no computador constantemente olha para o teclado e inclina a cabe√ßa.  Ou seja, os olhos n√£o s√£o vis√≠veis, e nem est√° claro se est√£o fechados ou abertos, uma pessoa pisca ou simplesmente olha da tela para o teclado e vice-versa. <br><br><img src="https://habrastorage.org/webt/l9/la/n6/l9lan6o4wjrpctaeelbsnuosnso.jpeg"><br><br>  Ent√£o percebemos que, mesmo para fazer um prot√≥tipo, precisamos de algum tipo de dispositivo.  Compramos o primeiro modelo de c√¢mera IP dispon√≠vel, que funciona na faixa de infravermelho. <br><br>  Por que precisamos de infravermelho?  A ilumina√ß√£o pode ser diferente, √†s vezes o usu√°rio est√° na sombra, √†s vezes a luz vem de tr√°s, de cima ou n√£o h√° nenhuma.  Se fabricarmos um dispositivo de medi√ß√£o, ele dever√° funcionar da mesma forma sob quaisquer condi√ß√µes. <br><br>  Para o experimento, surgiu uma c√¢mera bastante popular da Xiaomi - CHUANGMI. <br><br><img src="https://habrastorage.org/webt/tr/qt/f9/trqtf9jukb0tuzste_5rq-nsiwk.jpeg"><br><br>  Aconteceu que ela dispara a uma frequ√™ncia de 15 quadros por segundo, e precisamos do dobro: o piscar dura de 30 a 150 ms, a 15 quadros por segundo, arriscamos n√£o ver um piscar menor que 60 a 70 ms.  Portanto, tivemos que modificar seu firmware para ligar √† for√ßa a ilumina√ß√£o IR, obter acesso direto ao fluxo de v√≠deo e capturar os 30 quadros necess√°rios por segundo.  Tendo conectado a c√¢mera ao laptop e configurado para receber o fluxo de v√≠deo atrav√©s do protocolo RTSP, come√ßamos a gravar os primeiros v√≠deos.  A c√¢mera foi colocada 15 cm abaixo da c√¢mera do laptop, e isso possibilitou "ver" melhor os olhos do usu√°rio. <br><br>  Sucesso?  E novamente, n√£o.  Depois de coletar centenas de v√≠deos, percebemos que nada estava acontecendo.  O comportamento do usu√°rio do laptop durante o dia √© diferente do comportamento do motorista: uma pessoa pode se levantar a qualquer momento, sair para dar uma mordida, apenas caminhar e fazer um aquecimento, enquanto o motorista passa muito mais tempo sentado.  Portanto, esses dados n√£o nos conv√™m. <br><br>  Ficou claro que a √∫nica maneira √© fabricar ou comprar uma c√¢mera adequada e instal√°-la no carro. <br><br>  Parece que tudo √© elementar: compramos um DVR, nos voltamos para o motorista, prendemos no carro e uma vez por semana pegamos cart√µes SD com grava√ß√µes de v√≠deo.  Mas aqui, na realidade, tudo acabou n√£o sendo t√£o simples. <br><br>  Em primeiro lugar, √© extremamente dif√≠cil encontrar um DVR com ilumina√ß√£o IR e precisamos ver bem o rosto, principalmente √† noite. <br><br>  Em segundo lugar, todos os DVRs possuem uma lente grande angular, de modo que a √°rea com o rosto do motorista acaba sendo muito pequena e voc√™ n√£o consegue distinguir nada do registro.  Sim, e a distor√ß√£o da lente estraga a an√°lise da posi√ß√£o da cabe√ßa e a dire√ß√£o da vis√£o. <br><br>  Terceiro, esse empreendimento n√£o escala bem em dez, cem ou mais m√°quinas.  Precisamos coletar muitos dados de diferentes drivers para analis√°-los e tirar conclus√µes.  Trocar manualmente os cart√µes de mem√≥ria em centenas de m√°quinas todas as semanas ou todos os dias √© uma enorme perda de tempo.  Tentamos at√© encontrar uma c√¢mera que enviasse v√≠deos para a nuvem, mas n√£o havia nada semelhante no mercado. <br><br>  Havia at√© uma id√©ia de criar "seu pr√≥prio DVR" a partir do Raspberry Pi, uma c√¢mera com ilumina√ß√£o IR e suportes. <br><br><img src="https://habrastorage.org/webt/zr/ba/3z/zrba3zrobipczwlnn8u0swwvdoi.jpeg"><br><br>  O resultado n√£o foi exatamente o que esper√°vamos: complicado, √© imposs√≠vel instalar a c√¢mera separadamente do computador.  O fato √© que, com um comprimento de cabo superior a 50 cm, os problemas com o sinal foram iniciados e o pr√≥prio cabo CSI √© bastante fr√°gil, muito largo e, portanto, n√£o √© muito adequado para instala√ß√£o em uma m√°quina. <br><br>  Temos que ir para Hong Kong, decidimos.  O objetivo da viagem foi bastante abstrato: ver o que diferentes fabricantes est√£o fazendo no campo de an√°lise do comportamento do motorista, comprar amostras de produtos, se encontrarmos, e procurar solu√ß√µes / componentes t√©cnicos adequados que possamos instalar nos carros. <br><br>  Fomos imediatamente a duas exposi√ß√µes populares de eletr√¥nicos e componentes.  No pavilh√£o eletr√¥nico automotivo, vimos um dom√≠nio sem precedentes de gravadores de v√≠deo, c√¢meras de vis√£o traseira e sistemas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ADAS</a> , mas quase ningu√©m estava envolvido na an√°lise do comportamento do motorista.  Os prot√≥tipos de v√°rios fabricantes determinaram adormecer, distrair, fumar e falar ao telefone, mas ningu√©m sequer pensou em fadiga. <br><br>  Como resultado, compramos v√°rias amostras de c√¢meras e computadores de placa √∫nica.  Ficou claro que 1) n√£o existem produtos acabados adequados para n√≥s;  2) √© necess√°rio separar o computador e a c√¢mera para n√£o obscurecer a vis√£o do motorista.  Portanto, adotamos uma placa de c√¢mera com uma interface USB e, como uma unidade de computa√ß√£o, um computador Banana Pi de placa √∫nica e, ao mesmo tempo, v√°rios players Android baseados em processadores Amlogic. <br><br><img src="https://habrastorage.org/webt/mh/yy/rq/mhyyrqsrpdv8ypl30wacadprkne.jpeg"><br><br>  "Por que os jogadores s√£o?"  - voc√™ pergunta.  De fato, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">S912 e at√© o S905</a> s√£o bastante poderosos em termos de desempenho e podem facilmente puxar a grava√ß√£o de v√≠deo para nossos prop√≥sitos, mesmo com a an√°lise de imagens no local.  A an√°lise de imagem no local era necess√°ria para n√£o enviar todo o fluxo de v√≠deo ao servidor. <br><br>  Vamos contar: um minuto de v√≠deo bem compactado na resolu√ß√£o H.264 de 640 √ó 480 (30 FPS) leva pelo menos 5 megabytes.  Assim, em uma hora haver√° 300 megabytes e, para um turno padr√£o de 8 horas - cerca de 2-3 gigabytes. <br><br>  Carregar 3 gigabytes de v√≠deo todos os dias com a ajuda de um modem LTE √© muito "caro".  Portanto, decidimos gravar periodicamente v√≠deos de 5 minutos e analisar tudo o que acontece no carro ali e envi√°-lo para nossos servidores na forma de um fluxo de eventos analisado: um conjunto de pontos faciais, uma dire√ß√£o da vis√£o, uma virada na cabe√ßa etc. <br><br>  Voltamos das exposi√ß√µes de bom humor, trouxemos um monte de lixo necess√°rio (e desnecess√°rio) e percebemos como continuar√≠amos a fazer o prot√≥tipo. <br><br>  A c√¢mera USB que encontramos em Hong Kong era quase perfeita para n√≥s: tamanho 38 √ó 38 mm, lentes padr√£o (12 mm), a capacidade de soldar iluminadores IR diretamente na placa. <br><br><img src="https://habrastorage.org/webt/vw/r9/fs/vwr9fs6x4vzo304bkvfw9phoqse.jpeg"><br><br>  Portanto, solicitamos imediatamente ao fabricante que nos fizesse um prot√≥tipo com os componentes necess√°rios.  Agora entendemos: precisamos de uma c√¢mera USB com luz de fundo e um PC de placa √∫nica para processamento de v√≠deo.  Decidimos experimentar tudo o que foi apresentado no mercado e organizamos uma sess√£o de compras no AliExpress.  Compramos quatro d√∫zias de c√¢meras diferentes, uma d√∫zia de PCs de placa √∫nica, players Android, uma cole√ß√£o de lentes de 12 mm e muitos outros dispositivos estranhos. <br><br><img src="https://habrastorage.org/webt/ck/6m/tb/ck6mtbk3ytd-8iucodljfkod-gs.jpeg"><br><br>  O problema com o hardware foi resolvido.  E quanto ao software? <br><br>  Muito rapidamente, conseguimos um prot√≥tipo simples baseado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OpenCV</a> , que grava um v√≠deo, encontra o rosto do motorista, analisa-o, marca 68 pontos-chave no rosto, reconhece piscar, bocejar, virar a cabe√ßa etc. <br><br>  A pr√≥xima tarefa foi fazer nosso prot√≥tipo funcionar em um PC de placa √∫nica.  O Raspberry PI caiu imediatamente: poucos n√∫cleos, um processador fraco, mais de sete quadros por segundo n√£o podem ser retirados.  E sobre como escrever um v√≠deo simultaneamente, reconhecer um rosto e analis√°-lo, n√£o havia d√∫vida.  Pelas mesmas raz√µes, decodificadores e computadores de placa √∫nica no Allwinner (H2, H3, H5), Amlogic S905 e Rockchip RK3328 n√£o se encaixavam em n√≥s, embora o √∫ltimo estivesse muito pr√≥ximo do desempenho desejado.  Como resultado, ainda temos dois SoCs em potencial: Amlogic S912 e Rockchip RK3399. <br><br>  Na Amlogic, a escolha de dispositivos era pequena: uma caixa de TV ou o Khadas VIM2.  Tudo funcionou da mesma forma na caixa de TV e no Khadas, mas o resfriamento das decodificadores de TV deixou muito a desejar, e configurar o Linux nelas geralmente n√£o √© um exerc√≠cio para os fracos de cora√ß√£o: fazer com que o Wi-Fi, o BT funcione, fazendo o sistema operacional ver toda a mem√≥ria, - √â longo, dif√≠cil e imprevis√≠vel.  Como resultado, escolhemos o Khadas VIM2: ele possui um radiador de refrigera√ß√£o padr√£o e a placa √© compacta o suficiente para ocult√°-la atr√°s do painel da m√°quina. <br><br><img src="https://habrastorage.org/webt/f_/_1/lt/f__1ltkkzkqy08jygtdgs-jrooi.jpeg"><br><br>  A essa altura, o fabricante da placa da c√¢mera j√° havia nos enviado um lote de teste de cem pe√ßas, e est√°vamos ansiosos pela batalha: fazer um prot√≥tipo, coloc√°-lo em um carro e coletar dados. <br><br>  T√≠nhamos uma c√¢mera, havia software, havia um PC de placa √∫nica, mas n√£o havia a menor id√©ia de como colocar tudo isso no carro e conect√°-lo √† fonte de alimenta√ß√£o integrada. <br><br>  Obviamente, a c√¢mera precisava de um corpo e montagem.  Compramos duas impressoras 3D de uma s√≥ vez para imprimir pe√ßas, e o contratado nos tornou o primeiro modelo primitivo do gabinete. <br><br><img src="https://habrastorage.org/webt/ju/jt/ct/jujtct45fz8xpuv-pd_xvr18qmm.jpeg"><br><br>  Agora, surgiu a dif√≠cil tarefa de escolher: onde montar a c√¢mera no carro para obter uma boa imagem, mas n√£o para obscurecer a vis√£o do motorista.  Havia exatamente tr√™s op√ß√µes: <br><br><ol><li>  No meio do p√°ra-brisa. </li><li>  No rack esquerdo. </li><li>  No espelho retrovisor. </li></ol><br><img src="https://habrastorage.org/webt/ou/nv/en/ounven5ffmbmk-fnzvfqqy6oyls.jpeg"><br><br>  Naquele momento, pareceu-nos que √© melhor conectar a c√¢mera diretamente ao espelho retrovisor: ela √© sempre direcionada ao rosto do motorista, para que a c√¢mera fotografe exatamente o que precisamos.  Infelizmente, os fabricantes de espelhos retrovisores n√£o se certificaram de que algo pudesse ser anexado de forma conveniente e confi√°vel a eles.  As c√¢meras n√£o aguentaram bem, ca√≠ram e fecharam a an√°lise. <br><br><img src="https://habrastorage.org/webt/9h/oo/gc/9hoogck8s_vhjdzabffnwni1n78.jpeg"><br><br>  No entanto, equipamos v√°rias m√°quinas e come√ßamos a coletar dados delas.  Tornou-se claro que o design era imperfeito, e os problemas relacionados ao desempenho e ao aquecimento aumentaram ao gravar e analisar simultaneamente o rosto. <br><br>  Decidimos montar a c√¢mera no n√≠vel dos olhos no rack esquerdo: fechamos menos a revis√£o e temos um bom √¢ngulo para a c√¢mera para que o motorista possa ser visto.  O estojo teve que ser refeito, pois os prendedores com dobradi√ßas se mostraram extremamente confi√°veis: eles se separam quando agitam, quebram e as ventosas descolam do vidro. <br><br><img src="https://habrastorage.org/webt/qj/mt/ko/qjmtkocxocrcpmzhkzw3urszdem.jpeg"><br><br>  Decidimos que, para o prot√≥tipo e a coleta de dados, √© melhor grudar firmemente as c√¢meras no vidro, para que nenhuma trepida√ß√£o e influ√™ncias externas possam mudar de posi√ß√£o.  Modificamos levemente o gabinete e, ao mesmo tempo, realizamos o teste de carga da instala√ß√£o usando uma fita dupla face especial.  Para o teste, foi utilizado equipamento complexo e de alta precis√£o. <br><br><img src="https://habrastorage.org/webt/7r/c-/cb/7rc-cbdojhkigygkl9kbwucodek.jpeg"><br><br>  Devido a problemas de desempenho, decidimos mudar o SoC para um mais poderoso, por isso escolhemos o PC de placa √∫nica NanoPI M4 no processador Rockchip RK3399. <br><br>  Comparado ao Khadas VIM2, √© cerca de um ter√ßo mais produtivo, possui compacta√ß√£o de hardware e decodifica√ß√£o de v√≠deo e se comporta muito mais est√°vel em condi√ß√µes de temperatura dif√≠ceis.  Sim, tentamos colocar c√¢meras e placas de circuito no freezer, aquec√™-las no forno e fizemos muitos outros testes desumanos. <br><br><img src="https://habrastorage.org/webt/ro/ia/ty/roiatyksmkri083bp6dsk2soye4.jpeg"><br><br>  Como gravamos v√≠deo n√£o apenas assim, mas tamb√©m na din√¢mica ao longo do dia, era importante que a hora do sistema no dispositivo fosse precisa.  Infelizmente, a maioria dos computadores de placa √∫nica n√£o est√° equipada com um rel√≥gio com alimenta√ß√£o pr√≥pria.  Tivemos a sorte de o nosso NanoPI ter um conector de bateria. <br><br>  Eu tive que projetar um gabinete para um computador que o protegesse fisicamente e atuasse como suporte para antenas WiFi e BT.  Tamb√©m fornecemos um local para a montagem da bateria do rel√≥gio com um suporte. <br><br><img src="https://habrastorage.org/webt/cy/94/6w/cy946wwax2lf0lt9szdcx-7-qbe.jpeg"><img src="https://habrastorage.org/webt/ba/s8/xu/bas8xuo0kr2v5_ti2gczvaups_i.jpeg"><br><br>  Al√©m disso, planejamos equipar cem m√°quinas com prot√≥tipos que gravariam v√≠deos e transmitissem toda a telemetria para a nuvem on-line: existe um motorista, com que frequ√™ncia e por um longo tempo ele pisca, boceja, fica distra√≠do da estrada, vira a cabe√ßa etc. etc. e n√£o apenas) os par√¢metros nos permitem treinar um modelo que avalia a concentra√ß√£o do motorista na estrada, distra√≠do ou cansado.  Para fazer tudo isso diretamente no dispositivo do carro, tivemos que reescrever o c√≥digo completamente, fazer compress√£o de v√≠deo por hardware, girar logs e grava√ß√µes de v√≠deo, envi√°-lo regularmente para o servidor, atualizar remotamente o software e muito mais. <br><br>  Ao mesmo tempo, ficou claro para n√≥s que nossos c√°lculos e algoritmos funcionariam muito melhor com uma an√°lise facial b√°sica mais precisa.  Nos primeiros prot√≥tipos, usamos o detector de rosto incorporado ao OpenCV com base no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">modelo em cascata haar</a> e o modelo para marcar 68 pontos de face com base na biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dlib</a> .  N√≥s mesmos calculamos a posi√ß√£o da cabe√ßa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">calculando a</a> proje√ß√£o dos pontos de face no plano focal.  As solu√ß√µes de c√≥digo-fonte aberto para reconhecimento e marca√ß√£o de rostos funcionam bem em quadros em que o rosto √© fotografado na frente ou no perfil, mas em condi√ß√µes intermedi√°rias, eles geralmente s√£o confundidos. <br><br>  Portanto, decidimos licenciar uma boa solu√ß√£o de reconhecimento de rosto e marca√ß√£o de terceiros - VisionLabs SDK.  Comparado aos algoritmos anteriores, consome mais recursos, mas proporciona um aumento not√°vel na qualidade do reconhecimento e marca√ß√£o de faces, o que leva a uma extra√ß√£o mais precisa dos fatores para o aprendizado de m√°quina.  Com a ajuda de colegas da VisionLabs, conseguimos mudar rapidamente para o SDK e obter o desempenho que precis√°vamos: 30 quadros / s.  em uma resolu√ß√£o de 640x480. <br><br>  O VisionLabs SDK usa redes neurais para reconhecimento de faces.  A tecnologia processa cada quadro, encontra o rosto do motorista e fornece as coordenadas dos olhos, nariz, boca e outros pontos-chave.  Os dados obtidos s√£o usados ‚Äã‚Äãpara criar um quadro normalizado de tamanho 250x250, onde a face est√° localizada estritamente no centro.  Esse quadro j√° pode ser usado para calcular a posi√ß√£o da cabe√ßa em graus ao longo de tr√™s eixos: guinada, inclina√ß√£o e rota√ß√£o.  Para rastrear o status dos olhos do motorista, o sistema analisa a imagem dos olhos e, para cada olho, decide se est√° fechado ou aberto.  O sistema √© capaz de determinar, usando a tecnologia IR Liveness, se uma pessoa viva est√° na frente da c√¢mera ou se o motorista anexou uma foto.  Para an√°lise, √© usado um quadro normalizado e, na sa√≠da, obtemos o resultado vivo ou n√£o vivo. <br><br><h4>  Conclus√£o </h4><br>  Enquanto reescrev√≠amos e depur√°vamos o software, nossas impressoras 3D imprimiam estojos para c√¢meras e PCs de placa √∫nica dia e noite.  A impress√£o do kit (corpo da c√¢mera + gabinete do PC) levou cerca de 3-4 horas de opera√ß√£o da impressora, portanto tivemos que expandir as capacidades de produ√ß√£o: usamos quatro impressoras.  Mas conseguimos fazer tudo dentro do cronograma. <br><br><img src="https://habrastorage.org/webt/ob/rs/b5/obrsb5c3yhdnisat6cn5jvatoa4.jpeg"><br><br>  Em duas semanas, equipamos totalmente os primeiros cem carros em v√°rias frotas de t√°xi - parceiros Yandex.Taxi.  Agora, com a ajuda deles, coletamos v√≠deos, analisamos o comportamento do motorista, sinais de fadiga, aprimoramos algoritmos e treinamos modelos que avaliam o n√≠vel de aten√ß√£o e fadiga.  E somente depois disso (levando em considera√ß√£o todos os dados, feedback dos motoristas e passageiros) estaremos prontos para avan√ßar para a pr√≥xima etapa - produ√ß√£o e implementa√ß√£o em massa. <br><br>  Infelizmente, para escalar para v√°rios milhares ou dezenas de milhares de instala√ß√µes, a solu√ß√£o t√©cnica atual n√£o √© muito adequada por v√°rios motivos.  Tudo o que falamos neste artigo √© um experimento r√°pido, cujo objetivo era aprender rapidamente como coletar dados diretamente das m√°quinas para treinar modelos.  O pr√≥ximo grande est√°gio para n√≥s √© desenvolver e come√ßar a produzir um dispositivo com as mesmas dimens√µes, mas constitu√≠do por uma unidade: a c√¢mera, os sensores e o modem estar√£o localizados em um estojo compacto, que instalaremos em massa nas m√°quinas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt461137/">https://habr.com/ru/post/pt461137/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt461125/index.html">A tarefa de criar c√≥digos num√©ricos seq√ºenciais para numerar mensagens no c√≥digo-fonte no Visual Studio (ex. C #)</a></li>
<li><a href="../pt461127/index.html">An√°lise de desempenho da VM no VMware vSphere. Parte 3: Armazenamento</a></li>
<li><a href="../pt461129/index.html">Sobre kote, esposa, dois filhos, a id√©ia ... e n√£o apenas. Hist√≥ria com continua√ß√£o</a></li>
<li><a href="../pt461131/index.html">Caminh√£o de carrinho ROS - Parte 2. Software</a></li>
<li><a href="../pt461133/index.html">Testando o c√≥digo do SQL Server com tSQLt</a></li>
<li><a href="../pt461141/index.html">Meu primeiro dia com o Haiku: ela √© inesperadamente boa</a></li>
<li><a href="../pt461143/index.html">Sobre quest√µes atuais de design de jogos e formas de resolv√™-las. Vista de baixo</a></li>
<li><a href="../pt461145/index.html">O que uma equipe deve liderar: pap√©is, responsabilidades e habilidades</a></li>
<li><a href="../pt461147/index.html">Como economizar 64 horas combinando chaves no PowerPoint</a></li>
<li><a href="../pt461149/index.html">Migra√ß√£o desobstru√≠da do MongoDB para o Kubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>