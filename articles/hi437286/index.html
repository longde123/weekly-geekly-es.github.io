<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯзСЁЯП┐тАНЁЯдЭтАНЁЯзСЁЯП╜ ЁЯЫ╡ ЁЯРФ рдореИрдВ .NET рдХреЛрд░ + рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ + рдПрдкреЗрдЯреНрд░рд┐рдХреНрд╕ + рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ + рдЧреНрд░рд╛рдлрд╛рдирд╛ + рдЬреЙрдмреНрд╕ + рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реВрдВ ЁЯд░ЁЯП╗ ЁЯЫ┤ ЁЯТФ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рд╛рдЗрдЯ рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ, рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ, рдЕрдиреБрд╕реВрдЪрд┐рдд рдиреМрдХрд░рд┐рдпреЛрдВ рдФрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдХрд░рдиреЗ (рд╕рднреА рд╕реНрд░реЛрдд рдХреЛрдб рд╕рдВрд▓рдЧреНрди...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдореИрдВ .NET рдХреЛрд░ + рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ + рдПрдкреЗрдЯреНрд░рд┐рдХреНрд╕ + рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ + рдЧреНрд░рд╛рдлрд╛рдирд╛ + рдЬреЙрдмреНрд╕ + рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реВрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437286/">  рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕рд╛рдЗрдЯ рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ, рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП рдЗрд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ, рдЕрдиреБрд╕реВрдЪрд┐рдд рдиреМрдХрд░рд┐рдпреЛрдВ рдФрд░ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЬрд╛рдВрдЪ рдХрд░рдиреЗ (рд╕рднреА рд╕реНрд░реЛрдд рдХреЛрдб рд╕рдВрд▓рдЧреНрди рд╣реИрдВ) рдХреЗ рдЙрджрд╛рд╣рд░рдг рдкрд░ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ рд╕рд╛рде рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдкрд░рд┐рдЪрдп <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпреВрдЖрдИ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЕрдкрдирд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдиреНрдЪ рдХрд░реЗрдВ</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрд╡реЗрджрди рдореЗрдВ рдХрд╕реНрдЯрдо рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдЬреЛрдбрд╝рдирд╛</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдореИрдЯреНрд░рд┐рдХреНрд╕ рд╕рдВрдЧреНрд░рд╣</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧреНрд░рд╛рдлрд╛рдирд╛ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рди рдореИрдЯреНрд░рд┐рдХреНрд╕</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд╛рд░реНрдп</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреЛрд╖ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдирд┐рд╖реНрдХрд░реНрд╖</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдиреЛрдЯреНрд╕</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдВрджрд░реНрдн</a> <br><a name="habracut"></a><br><a name="1"></a><h2>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </h2><br>  <i>рд▓рд┐рдирдХреНрд╕ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИ, рдЖрдкрдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдорд┐рдиреАрдмреНрдпреВрдм</a> рдХрд╛ рдЙрдкрдпреЛрдЧ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░рдирд╛ рд╣реЛрдЧрд╛</a></i> <br><ol><li>  рдХреНрдпрд╛ рдЖрдкрдХреЗ рдкрд╛рд╕ рдбреЙрдХрдЯрд░ рдбреЗрд╕реНрдХрдЯреЙрдк рд╣реИ </li><li>  рдЗрд╕рдореЗрдВ рдЖрдкрдХреЛ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдПрдХрд▓-рдиреЛрдб рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдЦреЛрдЬрдиреЗ рдФрд░ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ <br><img src="https://habrastorage.org/webt/zc/ij/zs/zcijzspy007dfz7ilba9xhv3mg0.png"></li><li>  рдЕрдм рдЖрдкрдХреЗ рдкрд╛рд╕ kubernetis рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдкреАрдЖрдИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http: // localhost: 8001 / рд╣реИ</a> </li><li> рдЙрд╕рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреБрдмреЗрдХреЗрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣реЛрддрд╛ рд╣реИ <br>  рдХрдорд╛рдВрдб&gt; <code>kubectl version</code> рд╕рд╛рде рдЗрд╕рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ <br>  рдирд╡реАрдирддрдо рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдпрд╣рд╛рдБ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://storage.googleapis.com/kubernetes-release/release/stable.txt</a> <br>  рдЖрдк рдЗрд╕реЗ рдЙрдкрдпреБрдХреНрдд рд▓рд┐рдВрдХ <a href="">https://storage.googleapis.com/kubernetes-release/release/v1.13.2/bin/windows/amd64/kubectl.exe</a> рдкрд░ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </li><li>  <code>kubectl cluster-info</code> рдХрд┐ рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛рд░реНрдп рдХрд░ рд░рд╣рд╛ рд╣реИ&gt; <code>kubectl cluster-info</code> </li></ol><br><a name="2"></a><h2>  рдпреВрдЖрдИ рд╕реНрдерд╛рдкрдирд╛ </h2><br><ol><li>  рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдПрдХ рд╣реА рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ <br><pre> <code class="bash hljs">kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/master/aio/deploy/recommended/kubernetes-dashboard.yaml</code> </pre> </li><li>  рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ <pre> <code class="bash hljs">kubectl describe secret</code> </pre> <br>  рдФрд░ рдХреЙрдкреА рдХрд░реЗрдВ <br><img src="https://habrastorage.org/webt/9q/kl/fa/9qklfaacfs9863l1s5cy7nnz1-k.png"></li><li>  рдЕрдм рдкреНрд░реЙрдХреНрд╕реА рд╢реБрд░реВ рдХрд░реЗрдВ <pre> <code class="bash hljs">kubectl proxy</code> </pre> </li><li>  рдФрд░ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=http://localhost:8001/api/v1/namespaces/kube-system/services/">http: // localhost: 8001 / api / v1 / namespaces / kube-system / services / https: kubernetes-dashboard: /xy / рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</a> <img src="https://habrastorage.org/webt/-w/si/i1/-wsii1ckz09obhzqxwsf25yauvm.png"></li></ol><br><br><a name="3"></a><h2>  рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЕрдкрдиреЗ рдЖрд╡реЗрджрди рдЪрд▓ рд░рд╣рд╛ рд╣реИ </h2><br><ol><li>  рдореИрдВрдиреЗ рд╕реНрдЯреВрдбрд┐рдпреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/SanSYS/kuberfirst рдХреЗ</a> рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдорд╛рдирдХ mvc netcoreapp2.1 рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдпрд╛ </li><li>  Dockerfile: <pre> <code class="actionscript hljs">FROM microsoft/dotnet:<span class="hljs-number"><span class="hljs-number">2.1</span></span>-aspnetcore-runtime AS base WORKDIR /app EXPOSE <span class="hljs-number"><span class="hljs-number">80</span></span> FROM microsoft/dotnet:<span class="hljs-number"><span class="hljs-number">2.1</span></span>-sdk AS build WORKDIR /src COPY ./MetricsDemo.csproj . RUN ls RUN dotnet restore <span class="hljs-string"><span class="hljs-string">"MetricsDemo.csproj"</span></span> COPY . . RUN dotnet build <span class="hljs-string"><span class="hljs-string">"MetricsDemo.csproj"</span></span> -c Release -o /app FROM build AS publish RUN dotnet publish <span class="hljs-string"><span class="hljs-string">"MetricsDemo.csproj"</span></span> -c Release -o /app FROM base AS <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> WORKDIR /app COPY --from=publish /app . ENTRYPOINT [<span class="hljs-string"><span class="hljs-string">"dotnet"</span></span>, <span class="hljs-string"><span class="hljs-string">"MetricsDemo.dll"</span></span>]</code> </pre> </li><li>  рдЗрд╕ рдЪреАрдЬрд╝ рдХреЛ рдореАрдЯреНрд░рд┐рдХ 3 рдЯреИрдЧ рдХреЗ рд╕рд╛рде рдЗрдХрдЯреНрдард╛ рдХрд┐рдпрд╛ <pre> <code class="bash hljs">docker build -t metricsdemo3 .</code> </pre> </li><li>  рд▓реЗрдХрд┐рди!  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдХреЛрдмрд░рд╛ рд╣рдм рд╕реЗ рдЫрд╡рд┐рдпреЛрдВ рдХреЛ рдЦреАрдВрдЪрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рд╕реНрдерд╛рдиреАрдп рд░рдЬрд┐рд╕реНрдЯрд░ рдЙрдард╛рддрд╛ рд╣реВрдВ </li><li>  рдиреЛрдЯ - рдХреБрдмреЗрд░рдиреЗрдЯрд┐рд╕ рдореЗрдВ рдЪрд▓рд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдирд╣реАрдВ рдХреА <pre> <code class="bash hljs">docker create -p 5000:5000 --restart always --name registry registry:2</code> </pre></li><li>  рдФрд░ рдореИрдВ рдЗрд╕реЗ рдЕрдзрд┐рдХреГрдд рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рдХреЗ рд░реВрдк рдореЗрдВ рд▓рд┐рдЦрддрд╛ рд╣реВрдВ: <br><img src="https://habrastorage.org/webt/0e/h3/5e/0eh35ewv6frgqwrwaqddcriqhpu.png"><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"registry-mirrors"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"insecure-registries"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"localhost:5000"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"debug"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"experimental"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre> </li><li>  рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ рдзрдХреНрдХрд╛ рджреЗрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдПрдХ рдЬреЛрдбрд╝реЗ рдХреЛ рдФрд░ рдЕрдзрд┐рдХ рдЗрд╢рд╛рд░реЛрдВ <pre> <code class="bash hljs">docker start registry docker tag metricsdemo3 localhost:5000/sansys/metricsdemo3 docker push localhost:5000/sansys/metricsdemo3</code> </pre> </li><li>  рдпрд╣ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦреЗрдЧрд╛: <br><img src="https://habrastorage.org/webt/ep/6i/5o/ep6i5ofhvqdr8cokxqbidrqisvk.png"></li><li><div class="spoiler">  <b class="spoiler_title">UI рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓реЙрдиреНрдЪ рдХрд░реЗрдВ</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/tv/oa/ed/tvoaedah5gqbrqftpcxjdlwrkpi.png"><br></div></div></li></ol><br><br><h4>  рдпрджрд┐ рдпрд╣ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реИ рдФрд░ рдЖрдк рд╕рдВрдЪрд╛рд▓рди рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </h4><br>  рдПрдХ рддреИрдирд╛рддреА рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдБ <br><div class="spoiler">  <b class="spoiler_title">1-рддреИрдирд╛рддреА-app.yaml</b> <div class="spoiler_text"><pre> <code class="bash hljs">kind: Deployment apiVersion: apps/v1 metadata: name: metricsdemo labels: app: web spec: replicas: 2 <span class="hljs-comment"><span class="hljs-comment">#    (  ) #  ,      selector: matchLabels: app: metricsdemo template: metadata: labels: app: metricsdemo #     selector  kind: Service spec: containers: - name: metricsdemo #   image: localhost:5000/sansys/metricsdemo3 #    ports: - containerPort: 80 #       # :    ,       --- kind: Service apiVersion: v1 metadata: name: metricsdemo #    __meta_kubernetes_service_name="metricsdemo",  https://prometheus.io/docs/prometheus/latest/configuration/configuration/#kubernetes_sd_config labels: apptype: business #    __meta_kubernetes_service_label_apptype="business" -  instancetype: web #    __meta_kubernetes_service_label_instancetype="web" spec: selector: app: metricsdemo #    labels:app type: LoadBalancer #      ports: - protocol: TCP #    _meta_kubernetes_service_port_protocol="TCP" port: 9376 targetPort: 80 name: portapi #    __meta_kubernetes_service_port_name="portapi"</span></span></code> </pre> </div></div><br>  рдЫреЛрдЯрд╛ рд╡рд┐рд╡рд░рдг <ul><li>  Kind - рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ yaml рдлрд╝рд╛рдЗрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХреА рдЗрдХрд╛рдИ рдХрд╛ рд╡рд░реНрдгрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ </li><li>  apiVersion - рд╡рд╕реНрддреБ рдХреЛ рдХрд┐рд╕ рдПрдкреАрдЖрдИ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </li><li>  рд▓реЗрдмрд▓ - рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рдХреЗрд╡рд▓ рд▓реЗрдмрд▓ (рдмрд╛рдИрдВ рдУрд░ рдХреА рдХреБрдВрдЬрд┐рдпрд╛рдБ рдФрд░ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдЕрдкрдиреЗ рдЖрдк рд╕реЗ рд╕реЛрдЪрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ) </li><li>  рдЪрдпрдирдХрд░реНрддрд╛ - рдЖрдкрдХреЛ рддреИрдирд╛рддреА рдХреЗ рд╕рд╛рде рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд▓реЗрдмрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ </li></ul><br>  рдЕрдЧрд▓рд╛: <pre> <code class="bash hljs">kubectl create -f .\1-deployment-app.yaml</code> </pre><br>  рдФрд░ рдЖрдкрдХреЛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдЕрдкрдиреА рддреИрдирд╛рддреА рдХреЛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=http://localhost:8001/api/v1/namespaces/kube-system/services/">http: // localhost: 8001 / api / v1 / namespaces / kube-system / services / https: kubernetes-рдбреИрд╢рдмреЛрд░реНрдб: / рдкреНрд░реЙрдХреНрд╕реА / #! / рддреИрдирд╛рддреА? рдиреЗрдорд╕реНрдкреЗрд╕ = рдбрд┐рдлрд╝реЙрд▓реНрдЯ</a> <br><div class="spoiler">  <b class="spoiler_title">рд╕реНрдХреНрд░реАрди</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/8c/sp/gj/8cspgj27ws9tcjd-6euq5s3djig.png"></div></div><br>  рдЬрд┐рд╕рдХреЗ рдЕрдВрджрд░ рдПрдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕реЗрдЯ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рджреЛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ (рдкреЙрдбреНрд╕) рдореЗрдВ рдЪрд▓ рд░рд╣рд╛ рд╣реИ рдФрд░ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ рдбрдм рдХрд┐рдП рдЧрдП рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЦреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╛рд╣рд░ рд╕реЗ рдПрдХ рдкрддреЗ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛ рд╣реИ <br><div class="spoiler">  <b class="spoiler_title">рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/zl/ix/tl/zlixtl8tehddvrk36ykdfx6hd48.png"><br><img src="https://habrastorage.org/webt/5u/kq/cx/5ukqcxek-nslcezxse0dqot_cym.png"><br></div></div><br><a name="4"></a><h2>  рдЖрд╡реЗрджрди рдореЗрдВ рдХрд╕реНрдЯрдо рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдЬреЛрдбрд╝рдирд╛ </h2><br>  рдЖрд╡реЗрджрди рдореЗрдВ рдкреИрдХреЗрдЬ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://www.app-metrics.io/</a> рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ <br>  рдореИрдВ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдореИрдВ рдЙрдиреНрд╣реЗрдВ рдХреИрд╕реЗ рдЬреЛрдбрд╝реВрдВрдЧрд╛, рдЕрднреА рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ - рдореИрдВ рдПрдкреА рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдХреЙрд▓ рдХреЗ рдХрд╛рдЙрдВрдЯрд░реЛрдВ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдорд┐рдбрд▓рд╡реЗрдпрд░ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рддрд╛ рд╣реВрдВ <div class="spoiler">  <b class="spoiler_title">рдпрд╣рд╛рдБ рдорд┐рдбрд▓рд╡реЗрдпрд░ рд╣реИ</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AutoDiscoverRoutes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HttpContext context</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context.Request.Path.Value == <span class="hljs-string"><span class="hljs-string">"/favicon.ico"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; keys = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; vals = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> routeData = context.GetRouteData(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (routeData != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { keys.AddRange(routeData.Values.Keys); vals.AddRange(routeData.Values.Values.Select(p =&gt; p.ToString())); } keys.Add(<span class="hljs-string"><span class="hljs-string">"method"</span></span>); vals.Add(context.Request.Method); keys.Add(<span class="hljs-string"><span class="hljs-string">"response"</span></span>); vals.Add(context.Response.StatusCode.ToString()); keys.Add(<span class="hljs-string"><span class="hljs-string">"url"</span></span>); vals.Add(context.Request.Path.Value); Program.Metrics.Measure.Counter.Increment(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CounterOptions { Name = <span class="hljs-string"><span class="hljs-string">"api"</span></span>, <span class="hljs-comment"><span class="hljs-comment">//ResetOnReporting = true, // ,     MeasurementUnit = Unit.Calls, Tags = new MetricTags(keys.ToArray(), vals.ToArray()) }); }</span></span></code> </pre></div></div><br>  рдФрд░ рдПрдХрддреНрд░рд┐рдд рдореЗрдЯреНрд░рд┐рдХреНрд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http: // localhost: 9376 / рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ</a> <br><br><img src="https://habrastorage.org/webt/yc/-h/9n/yc-h9ndhal2nj4kgeablgor4oba.png"><br><br>  * IMetricRoot рдпрд╛ рдЗрд╕рдХреЗ рдЕрдореВрд░реНрдд рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ <i>(Services.AddMetrics (Program.Metrics);</i> ) <br><br><a name="5"></a><h2>  рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рд╕рдВрдЧреНрд░рд╣ </h2><br>  рд╕рдмрд╕реЗ рдмреБрдирд┐рдпрд╛рджреА рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рд╕реЗрдЯрд┐рдВрдЧ: рдЗрд╕рдХреЗ рдХреЙрдиреНрдлрд┐рдЧрд░ (prometheus.yml) рдореЗрдВ рдПрдХ рдирдпрд╛ рдХрд╛рдо рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдЗрд╕реЗ рдПрдХ рдирдпрд╛ рд▓рдХреНрд╖реНрдп рдмрдирд╛рдПрдВ: <br><pre> <code class="bash hljs">global: scrape_interval: 15s evaluation_interval: 15s rule_files: <span class="hljs-comment"><span class="hljs-comment"># - "first.rules" # - "second.rules" scrape_configs: - job_name: prometheus static_configs: - targets: ['localhost:9090', '__:']</span></span></code> </pre> <br>  рд▓реЗрдХрд┐рди рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдХреЛ рдХреБрдмреЗрд░рдиреЗрдЯрд┐рд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://prometheus.io/docs/prometheus/latest/configuration/configuration/#kuberneteses/sd_config</a> рд╕реЗ рдореАрдЯреНрд░рд┐рдХ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХрд╛ рдореВрд▓ рд╕рдорд░реНрдерди рд╣реИ <br>  рдореИрдВ рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрд╡рд╛ рдХреЛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рдЫрд╛рдирдиреЗ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ: рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рд▓реЗрдмрд▓ <br>  рдбреЙрдХ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдиреМрдХрд░реА рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: <br><pre> <code class="bash hljs">- job_name: business-metrics <span class="hljs-comment"><span class="hljs-comment">#     metrics_path: /metrics kubernetes_sd_configs: - role: endpoints #   .   service,pod,ingress static_configs: - targets: - localhost:9090 relabel_configs: #       default   c  apptype = business - action: keep regex: default;business source_labels: - __meta_kubernetes_namespace - __meta_kubernetes_service_label_apptype</span></span></code> </pre> <br>  рдХреБрдмреЗрд░рдиреЗрдЯрд┐рд╕ рдореЗрдВ, рдХреЙрдиреНрдлрд┐рдЧрд░ рдлрд╛рдЗрд▓ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╕реНрдерд╛рди рд╣реИ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди</a> <br>  рдореИрдВ рдЗрд╕ рд╡рд┐рдиреНрдпрд╛рд╕ рдХреЛ рд╡рд╣рд╛рдВ рд╕рд╣реЗрдЬрддрд╛ рд╣реВрдВ: <br><div class="spoiler">  <b class="spoiler_title">2-рдкреНрд░реЛрдореЗрдерд┐рдпрд╕-configmap.yaml</b> <div class="spoiler_text"><pre> <code class="bash hljs">apiVersion: v1 kind: ConfigMap <span class="hljs-comment"><span class="hljs-comment">#  ,   metadata: name: prometheus-config #  - namespace: default labels: kubernetes.io/cluster-service: "true" addonmanager.kubernetes.io/mode: EnsureExists data: #     prometheus.yml: | global: scrape_interval: 5s # Default is every 1 minute. evaluation_interval: 5s # The default is every 1 minute. scrape_configs: - job_name: prometheus static_configs: - targets: - localhost:9090 - job_name: business-metrics #     metrics_path: /metrics kubernetes_sd_configs: - role: endpoints #   .   service,pod,ingress static_configs: - targets: - localhost:9090 relabel_configs: #       default   c  apptype = business - action: keep regex: default;business source_labels: - __meta_kubernetes_namespace - __meta_kubernetes_service_label_apptype</span></span></code> </pre></div></div><br>  рдХреБрдмреЗрд░рдиреЗрдЯрд┐рд╕ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕реНрдерд╛рди <br><pre> <code class="bash hljs">kubectl create -f .\2-prometheus-configmap.yaml</code> </pre> <br>  рдЕрдм рдЖрдкрдХреЛ рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╕рд╛рде рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдХреЛ рддреИрдирд╛рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ <br><div class="spoiler">  <b class="spoiler_title">kubectl create -fред \ 3-рдкрд░рд┐рдирд┐рдпреЛрдЬрди-prometheus.yaml</b> <div class="spoiler_text"><pre> <code class="bash hljs">apiVersion: extensions/v1beta1 kind: Deployment metadata: name: prometheus namespace: default spec: replicas: 1 template: metadata: labels: app: prometheus-server spec: containers: - name: prometheus image: prom/prometheus args: - <span class="hljs-string"><span class="hljs-string">"--config.file=/etc/config/prometheus.yml"</span></span> - <span class="hljs-string"><span class="hljs-string">"--web.enable-lifecycle"</span></span> ports: - containerPort: 9090 volumeMounts: - name: prometheus-config-volume <span class="hljs-comment"><span class="hljs-comment">#    mountPath: /etc/config/ #     volumes: - name: prometheus-config-volume #     configMap: defaultMode: 420 name: prometheus-config #  - --- kind: Service apiVersion: v1 metadata: name: prometheus spec: selector: app: prometheus-server #    labels:app type: LoadBalancer #      ports: - protocol: TCP port: 9090 targetPort: 9090</span></span></code> </pre></div></div><br>  рдзреНрдпрд╛рди рджреЗрдВ - prometheus.yml рдлрд╝рд╛рдЗрд▓ рдХрд╣реАрдВ рднреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ <br>  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди-рдорд╛рдирдЪрд┐рддреНрд░ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕рднреА рдлрд╛рдЗрд▓реЗрдВ рдкреНрд░реЛрдореЗрдерд┐рдпрд╕-рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди-рд╡реЙрд▓реНрдпреВрдо рдЦрдВрдб рдореЗрдВ рдлрд╛рдЗрд▓реЗрдВ рдмрди рдЬрд╛рддреА рд╣реИрдВ, рдЬреЛ / etc / config / рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдореБрд╣рд┐рдо рдХреА рдЬрд╛рддреА рд╣реИ <br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдкрде рдХреЗ рд╕рд╛рде рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рддрд░реНрдХ рд╣реИрдВ <br>  --web.enable-lifecycle - рдХрд╣рддреА рд╣реИ рдХрд┐ рдЖрдк POST / - / рд░реАрд▓реЛрдб рдХреЛ рдЦреАрдВрдЪ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдирдП рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░реЗрдЧрд╛ (рдЙрдкрдпреЛрдЧреА рдЕрдЧрд░ рдХреЙрдиреНрдлрд┐рдЧрд░ "рдлреНрд▓рд╛рдИ рдкрд░" рдмрджрд▓рддрд╛ рд╣реИ рдФрд░ рдЖрдк рдХрдВрдЯреЗрдирд░ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ) <br><br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рддреИрдирд╛рдд рд╣реИ <br><pre> <code class="bash hljs">kubectl create -f .\3-deployment-prometheus.yaml</code> </pre> <br>  рдЫреЛрдЯреЗ рдЪрд░рдгреЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ рдФрд░ рдкрддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http: // localhost: 9090 / рд▓рдХреНрд╖реНрдп рдкрд░ рдЬрд╛рдПрдВ</a> , рдЖрдкрдХреЛ рд╡рд╣рд╛рдВ рдЕрдкрдиреА рд╕реЗрд╡рд╛ рдХреЗ рд╕рдорд╛рдкрди рдмрд┐рдВрджреБрдУрдВ рдХреЛ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП <br><br><img src="https://habrastorage.org/webt/sz/vw/vg/szvwvg5evcq_gfbusz56mx1k-se.png"><br><br>  рдФрд░ рдореБрдЦреНрдп рдкреГрд╖реНрда рдкрд░ рдЖрдк рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ <br><pre> <code class="bash hljs">sum by (response, action, url, app) (delta(application_api[15s]))</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">рдмрд╢рд░реНрддреЗ рдХрд┐ рдХреЛрдИ рд╡реНрдпрдХреНрддрд┐ рд╕рд╛рдЗрдЯ рдкрд░ рдЬрд╛ рд░рд╣рд╛ рдерд╛, рдпрд╣ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдирд┐рдХрд▓реЗрдЧрд╛</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/pq/gl/ss/pqglssktt2mud6b2i1nltnqptou.png"><br></div></div><br>  рдХреНрд╡реЗрд░реА рднрд╛рд╖рд╛ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://prometheus.io/docs/prometheus/latest/querying/asasics/</a> <br><br><a name="6"></a><h2>  рдЧреНрд░рд╛рдлрд╛рдирд╛ рдореЗрдВ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВ </h2><br>  рд╣рдо рднрд╛рдЧреНрдпрд╢рд╛рд▓реА рдереЗ - рд╕рдВрд╕реНрдХрд░рдг 5 рддрдХ, рдбреИрд╢рдмреЛрд░реНрдб рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗрд╡рд▓ HTTP рдПрдкреАрдЖрдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЦрд┐рд╕рдХрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдЕрдм рдЖрдк рдкреНрд░реЛрдорд┐рдерд┐рдпрд╕ рдХреЗ рд╕рд╛рде рднреА рдРрд╕рд╛ рд╣реА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <br>  рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдкрд░ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЧреНрд░рд╛рдлреНрдЯрд╛рдирд╛ рдбреЗрдЯрд╛ рд╕реНрд░реЛрдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди</a> рдФрд░ рдбреИрд╢рдмреЛрд░реНрдб <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЛ рдЦреАрдВрдЪ рд╕рдХрддрд╛ рд╣реИ</a> <br><ol><li>  <code>/etc/grafana/provisioning/datasources/</code> - source configs (рдкреНрд░реЛрдореЗрдЯрд╕ рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрд┐рдВрдЧреНрд╕, рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬрд╝, рдЬрд╝реИрдмрд┐рдХреНрд╕, рдЗрд▓рд╛рд╕реНрдЯрд┐рдХ, рдЖрджрд┐) </li><li>  <code>/etc/grafana/provisioning/dashboards/</code> - <code>/etc/grafana/provisioning/dashboards/</code> рдПрдХреНрд╕реЗрд╕ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ </li><li>  <code>/var/lib/grafana/dashboards/</code> - рдпрд╣рд╛рдБ рдореИрдВ рдЦреБрдж рдХреЛ рдбреИрд╢рдмреЛрд░реНрдб рдХреЛ json рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░реВрдБрдЧрд╛ </li></ol><br><div class="spoiler">  <b class="spoiler_title">рдпрд╣ рдЗрд╕ рддрд░рд╣ рдирд┐рдХрд▓рд╛</b> <div class="spoiler_text"><pre> <code class="bash hljs">apiVersion: v1 kind: ConfigMap metadata: creationTimestamp: null name: grafana-provisioning-datasources namespace: default data: all.yml: | datasources: - name: <span class="hljs-string"><span class="hljs-string">'Prometheus'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: <span class="hljs-string"><span class="hljs-string">'prometheus'</span></span> access: <span class="hljs-string"><span class="hljs-string">'proxy'</span></span> org_id: 1 url: <span class="hljs-string"><span class="hljs-string">'http://prometheus:9090'</span></span> is_default: <span class="hljs-literal"><span class="hljs-literal">true</span></span> version: 1 editable: <span class="hljs-literal"><span class="hljs-literal">true</span></span> --- apiVersion: v1 kind: ConfigMap metadata: creationTimestamp: null name: grafana-provisioning-dashboards namespace: default data: all.yml: | apiVersion: 1 providers: - name: <span class="hljs-string"><span class="hljs-string">'default'</span></span> orgId: 1 folder: <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: file disableDeletion: <span class="hljs-literal"><span class="hljs-literal">false</span></span> updateIntervalSeconds: 10 <span class="hljs-comment"><span class="hljs-comment">#how often Grafana will scan for changed dashboards options: path: /var/lib/grafana/dashboards --- apiVersion: v1 kind: ConfigMap metadata: creationTimestamp: null name: grafana-dashboards namespace: default data: service-http-requests.json: | { "annotations": { "list": [ { "builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations &amp; Alerts", "type": "dashboard" } ] }, "editable": true, "gnetId": null, "graphTooltip": 0, "links": [], "panels": [ { "aliasColors": {}, "bars": false, "dashLength": 10, "dashes": false, "fill": 1, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 0 }, "id": 2, "legend": { "alignAsTable": false, "avg": false, "current": false, "max": false, "min": false, "rightSide": true, "show": true, "total": false, "values": false }, "lines": true, "linewidth": 1, "links": [], "nullPointMode": "null", "percentage": false, "pointradius": 5, "points": false, "renderer": "flot", "seriesOverrides": [], "spaceLength": 10, "stack": false, "steppedLine": false, "targets": [ { "expr": "sum by (response, action, url, app) (delta(application_api[15s]))", "format": "time_series", "interval": "15s", "intervalFactor": 1, "legendFormat": "{{app}} {{response}} - {{url}}", "refId": "A" } ], "thresholds": [], "timeFrom": null, "timeRegions": [], "timeShift": null, "title": "Http requests", "tooltip": { "shared": true, "sort": 0, "value_type": "individual" }, "type": "graph", "xaxis": { "buckets": null, "mode": "time", "name": null, "show": true, "values": [] }, "yaxes": [ { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true }, { "format": "short", "label": null, "logBase": 1, "max": null, "min": null, "show": true } ], "yaxis": { "align": false, "alignLevel": null } } ], "refresh": "5s", "schemaVersion": 16, "style": "dark", "tags": [], "templating": { "list": [] }, "time": { "from": "now-30m", "to": "now" }, "timepicker": { "refresh_intervals": [ "5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d" ], "time_options": [ "5m", "15m", "1h", "6h", "12h", "24h", "2d", "7d", "30d" ] }, "timezone": "", "title": "Business metrics", "uid": "Dm0tD0Qik", "version": 1 }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">рдЦреБрдж рдХреА рддреИрдирд╛рддреА, рдХреЛрдИ рдирдИ рдмрд╛рдд рдирд╣реАрдВ</b> <div class="spoiler_text"><pre> <code class="bash hljs">apiVersion: extensions/v1beta1 kind: Deployment metadata: name: grafana namespace: default labels: app: grafana component: core spec: replicas: 1 template: metadata: labels: app: grafana component: core spec: containers: - image: grafana/grafana name: grafana imagePullPolicy: IfNotPresent resources: limits: cpu: 100m memory: 100Mi requests: cpu: 100m memory: 100Mi env: - name: GF_AUTH_BASIC_ENABLED value: <span class="hljs-string"><span class="hljs-string">"true"</span></span> - name: GF_AUTH_ANONYMOUS_ENABLED value: <span class="hljs-string"><span class="hljs-string">"true"</span></span> - name: GF_AUTH_ANONYMOUS_ORG_ROLE value: Admin readinessProbe: httpGet: path: /login port: 3000 <span class="hljs-comment"><span class="hljs-comment"># initialDelaySeconds: 30 # timeoutSeconds: 1 volumeMounts: - name: grafana-provisioning-datasources mountPath: /etc/grafana/provisioning/datasources/ - name: grafana-provisioning-dashboards mountPath: /etc/grafana/provisioning/dashboards/ - name: grafana-dashboards mountPath: /var/lib/grafana/dashboards/ volumes: - name: grafana-provisioning-datasources configMap: defaultMode: 420 name: grafana-provisioning-datasources - name: grafana-provisioning-dashboards configMap: defaultMode: 420 name: grafana-provisioning-dashboards - name: grafana-dashboards configMap: defaultMode: 420 name: grafana-dashboards nodeSelector: beta.kubernetes.io/os: linux --- apiVersion: v1 kind: Service metadata: name: grafana namespace: default labels: app: grafana component: core spec: type: LoadBalancer ports: - protocol: TCP port: 3000 targetPort: 3000 selector: app: grafana component: core</span></span></code> </pre> </div></div><br>  рд╡рд┐рд╕реНрддреГрдд рдХрд░реЗрдВ <br><pre> <code class="bash hljs">kubectl create -f .\4-grafana-configmap.yaml kubectl create -f .\5-deployment-grafana.yaml</code> </pre> <br>  рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рдЧреНрд░реЗрдлрд╛рди рддреБрд░рдВрдд рдирд╣реАрдВ рдмрдврд╝рддрд╛ рд╣реИ, рдпрд╣ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рд╕рд╛рдЗрдХреНрд▓реЗрдЗрдЯ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рд╕реЗ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=http://localhost:8001/api/v1/namespaces/kube-system/services/">рд▓реЙрдЧ рдореЗрдВ рджреЗрдЦ</a> рд╕рдХрддреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=http://localhost:8001/api/v1/namespaces/kube-system/services/">рд╣реИрдВ</a> <br>  рдЕрдм <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http: // localhost: 3000 / рдкрд░ рдЬрд╛рдПрдВ</a> <br>  рдФрд░ рдбреИрд╢рдмреЛрд░реНрдб рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ <br><br><img src="https://habrastorage.org/webt/-s/qu/vp/-squvpxh7r3uxz75j3oripxch_8.png"><br><img src="https://habrastorage.org/webt/pl/yp/ze/plypzemdf5a1z0lpshu6uli3tyi.png"><br><br>  рдпрджрд┐ рдЖрдк рдПрдХ рдирдпрд╛ рджреГрд╢реНрдп рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдпрд╛ рдХрд┐рд╕реА рдореМрдЬреВрджрд╛ рдХреЛ рдмрджрд▓рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ - рддреЛ рдЗрд╕реЗ рд╕реАрдзреЗ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдмрджрд▓реЗрдВ, рдФрд░ рдлрд┐рд░ рд╕рд╣реЗрдЬреЗрдВ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ, рдЖрдкрдХреЛ json рдХреЗ рд╕рд╛рде рдПрдХ рдореЛрдбрд▓ рд╡рд┐рдВрдбреЛ рдорд┐рд▓реЗрдЧреА, рдЬрд┐рд╕реЗ рдЖрдкрдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореИрдк рдореЗрдВ рдбрд╛рд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ <br><div class="spoiler">  <b class="spoiler_title">рд╕рдм рдХреБрдЫ рддреИрдирд╛рдд рд╣реИ рдФрд░ рдорд╣рд╛рди рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/go/id/tl/goidtlbneravv92p6g-4mkeonro.png"></div></div><br><a name="7"></a><h2>  рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд╛рд░реНрдп </h2><br>  рдХреНрдпреВрдмреЗрд░ рдореЗрдВ рдореБрдХреБрдЯ рдкрд░ рдХрд╛рд░реНрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд░реЛрдирдЬреЛрдм рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рд╣реИ <br>  рдХреНрд░реЛрдирдЬреЙрдм рдХреЗ рд╕рд╛рде, рдЖрдк рдХрд┐рд╕реА рднреА рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># https://kubernetes.io/docs/tasks/job/automated-tasks-with-cron-jobs/ apiVersion: batch/v1beta1 kind: CronJob metadata: name: runapijob spec: schedule: "*/1 * * * *" jobTemplate: spec: template: spec: containers: - name: runapijob image: busybox args: - /bin/sh - -c - date; wget -O - http://metricsdemo:9376/api/job/run/wakeUp &gt; /dev/null restartPolicy: OnFailure</span></span></code> </pre> <br>  рд╢реЗрдбреНрдпреВрд▓ рд╕реЗрдХреНрд╢рди рдореБрдХреБрдЯ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд╛рд╕рд┐рдХ рдирд┐рдпрдо рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ <br>  рдЯреНрд░рд┐рдЧрд░ рдХрдВрдЯреЗрдирд░ (рдкреЙрдбрдмреЙрдХреНрд╕) рдХреА рдкреЙрдб рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдореИрдВ рдореЗрдЯреНрд░рд┐рд╕рдбреЗрдореЗрдореЛ рд╕реЗрд╡рд╛ рдПрдкреА рд╡рд┐рдзрд┐ рдЦреАрдВрдЪрддрд╛ рд╣реВрдВ <br>  рдЖрдк рдХрд╛рдо рдХреЛ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><pre> <code class="bash hljs">kubectl.exe get cronjob runapijob --watch</code> </pre> <br><img src="https://habrastorage.org/webt/vt/1y/9v/vt1y9vjfhpygkk3xzokbywcbvnc.png"><br><br>  рдиреМрдХрд░реА рд╕реЗ рдЭрдЯрдХрд╛ рджреЗрдиреЗ рд╡рд╛рд▓реА рдореБрдЦреНрдп рд╕реЗрд╡рд╛ рдХреЛ рдХрдИ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╕реЗрд╡рд╛ рдореЗрдВ рдХреЙрд▓ рд▓рдЧрднрдЧ рдПрдХ рд╕рдорд╛рди рдкреНрд░рд╕рд╛рд░ рдХреЗ рд╕рд╛рде рдЪреВрд▓реНрд╣рд╛ рдореЗрдВ рдЬрд╛рддреА рд╣реИ <br><div class="spoiler">  <b class="spoiler_title">рдпрд╣ рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдореЗрдВ рдХреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hu/v2/tt/huv2ttrdtjee5ddvgxyk4ucwkou.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">рдХрд╛рд░реНрдп рдХреЛ рдбреАрдмрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЯреНрд░рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ev/k2/c7/evk2c7bl5zdr4gdqf1jcwvddu_w.png"></div></div><br>  рдХрдВрд╕реЛрд▓ рд╕реЗ рд▓реЙрдиреНрдЪ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдЕрдВрддрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ about рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреА рдЧрдгрдирд╛ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдкрд░ рдПрдХ рдЫреЛрдЯрд╛ рдбреЗрдореЛ <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   ,       -      kubectl run pi --image=perl -- perl -Mbignum=bpi -wle 'print bpi(2000)' #   . , ,  .   -   kubectl run pi --image=perl --restart=OnFailure -- perl -Mbignum=bpi -wle 'print bpi(2000)' #    5  kubectl run pi --image=perl --restart=OnFailure --schedule="0/5 * * * ?" -- perl -Mbignum=bpi -wle 'print bpi(2000)'</span></span></code> </pre> <br><br><a name="8"></a><h2>  рджреЛрд╖ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ </h2><br>  рдпрджрд┐ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдЕрдирдкреЗрдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХреНрд▓рд╕реНрдЯрд░ рдкреЙрдб рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рддрд╛ рд╣реИ <br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ рдПрдХ рддрд░реАрдХрд╛ рдмрдирд╛рдпрд╛ рд╣реИ рдЬреЛ рдПрдкреА рдбреНрд░реЙрдк рдХрд░рддрд╛ рд╣реИ <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">HttpGet(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"kill/me"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Kill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Exception(<span class="hljs-string"><span class="hljs-string">"Selfkill"</span></span>); }</code> </pre> <br>  <i>* Async рд╢реВрдиреНрдп рд╡рд┐рдзрд┐ рдореЗрдВ рдПрдкреАрдЖрдИ рдореЗрдВ рдЬреЛ рдЕрдкрд╡рд╛рдж рд╣реЛрддрд╛ рд╣реИ, рдЙрд╕реЗ рдЕрдирд╣реЗрд▓реНрдб рдЕрдкрд╡рд╛рдж рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХреНрд░реИрд╢ рдХрд░ рджреЗрддрд╛ рд╣реИ</i> <br><br>  рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http: // localhost: 9376 / api / job / рдХрд┐рд▓ / me рд╕реЗ</a> рдЕрдкреАрд▓ рдХрд░рддрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реВрдВ</a> <br>  рд╢реНрд░рд╡рдг рдХреА рд╕реВрдЪреА рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рд╕реЗрд╡рд╛ рдХреЗ рдХрд┐рд╕реА рдПрдХ рдЪреВрд▓реНрд╣рд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ <br><br><img src="https://habrastorage.org/webt/f9/qr/t3/f9qrt3v1y1oo1ks2bucvt5tarvi.png"><br><br>  рд▓реЙрдЧ рдХрдорд╛рдВрдб рд╡рд░реНрддрдорд╛рди рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ -p рд╡рд┐рдХрд▓реНрдк рдХреЗ рд╕рд╛рде рдпрд╣ рдкрд┐рдЫрд▓реЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓реЙрдЧ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛ред  рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЖрдк рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░рдг рдЬрд╛рди рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдЧрд┐рд░рд╛рд╡рдЯ рдХреЗ рд╕рд╛рде, рд╕рдм рдХреБрдЫ рд╕реНрдкрд╖реНрдЯ рд╣реИ: рдЧрд┐рд░ рдЧрдпрд╛ - рдЧреБрд▓рд╛рдм <br><br>  рд▓реЗрдХрд┐рди рдЖрд╡реЗрджрди рд╕рд╢рд░реНрдд рд░реВрдк рд╕реЗ рд▓рд╛рдЗрд╡ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рддреНред  рдЧрд┐рд░ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдХреБрдЫ рднреА рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рд╣реИ, рдпрд╛ рдЕрдкрдирд╛ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдзреАрд░реЗ-рдзреАрд░реЗ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░рд▓реЗрдЦрди рдХреЗ</a> рдЕрдиреБрд╕рд╛рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">,</a> рдлрд▓реА рдореЗрдВ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдХрдо рд╕реЗ рдХрдо рджреЛ рдкреНрд░рдХрд╛рд░ рдХреЗ "рдЙрддреНрддрд░рдЬреАрд╡рд┐рддрд╛" рд╣реИрдВ <br><ol><li>  рддрддреНрдкрд░рддрд╛ - рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЪреЗрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдЗрд╕ рдкреЙрдб рдкрд░ рдпрд╛рддрд╛рдпрд╛рдд рд╢реБрд░реВ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИред  рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдлрд▓реА рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рд╣реЛрдиреЗ рддрдХ рд╡рд╛рдкрд╕ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br></li><li>  liveness - "рдЙрддреНрддрд░рдЬреАрд╡рд┐рддрд╛ рдХреЗ рд▓рд┐рдП" рдЖрд╡реЗрджрди рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рдпрджрд┐ рдХрд┐рд╕реА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╕рдВрд╕рд╛рдзрди рддрдХ рдкрд╣реБрдВрдЪ рдирд╣реАрдВ рд╣реИ рдпрд╛ рдпрджрд┐ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрд┐рд▓реНрдХреБрд▓ рднреА рдЬрд╡рд╛рдм рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЧрддрд┐рд░реЛрдз рдФрд░ рдЗрд╕рд▓рд┐рдП рдПрдХ рд╕рдордпрдмрд╛рд╣реНрдп), рддреЛ рдХрдВрдЯреЗрдирд░ рдлрд┐рд░ рд╕реЗ рдЪрд╛рд▓реВ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  200 рдФрд░ 400 рдХреЗ рдмреАрдЪ рдХреЗ рд╕рднреА http рдХреЛрдб рдХреЛ рд╕рдлрд▓ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдмрд╛рдХреА рд╕рднреА рд╡рд┐рдлрд▓ рд╣реЛрддреЗ рд╣реИрдВ <br></li></ol><br>  рдореИрдВ рдЯрд╛рдЗрдордЖрдЙрдЯ рджреНрд╡рд╛рд░рд╛ рдкреБрдирдГ рдЖрд░рдВрдн рдХреА рдЬрд╛рдВрдЪ рдХрд░реВрдВрдЧрд╛, рдЗрд╕рдХреЗ рд▓рд┐рдП рдореИрдВ рдПрдХ рдирдпрд╛ рдПрдкреА рд╡рд┐рдзрд┐ рдЬреЛрдбрд╝реВрдВрдЧрд╛, рдЬреЛ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЖрджреЗрд╢ рдХреЗ рдЕрдиреБрд╕рд╛рд░ 123 рд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рдЙрддреНрддрд░рдЬреАрд╡рд┐рддрд╛ рд╕рддреНрдпрд╛рдкрди рдХреА рд╡рд┐рдзрд┐ рдХреЛ рдзреАрдорд╛ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдЧрд╛ред <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> deadlock; [HttpGet(<span class="hljs-string"><span class="hljs-string">"alive/{cmd}"</span></span>)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Kill</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cmd</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cmd == <span class="hljs-string"><span class="hljs-string">"deadlock"</span></span>) { deadlock = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Deadlocked"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (deadlock) Thread.Sleep(<span class="hljs-number"><span class="hljs-number">123</span></span> * <span class="hljs-number"><span class="hljs-number">1000</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> deadlock ? <span class="hljs-string"><span class="hljs-string">"Deadlocked!!!"</span></span> : <span class="hljs-string"><span class="hljs-string">"Alive"</span></span>; }</code> </pre> <br><br>  рдореИрдВ рдХрдВрдЯреЗрдирд░ рдореЗрдВ 1-рдкрд░рд┐рдирд┐рдпреЛрдЬрди- app.yaml рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХреБрдЫ рдЦрдВрдб рдЬреЛрдбрд╝рддрд╛ рд╣реВрдБ: <br><pre> <code class="bash hljs">containers: - name: metricsdemo image: localhost:5000/sansys/metricsdemo3:6 ports: - containerPort: 80 readinessProbe: <span class="hljs-comment"><span class="hljs-comment">#       httpGet: path: /health port: 80 initialDelaySeconds: 5 periodSeconds: 5 livenessProbe: #      httpGet: path: /api/job/alive/check port: 80 initialDelaySeconds: 5 periodSeconds: 5</span></span></code> </pre> <br>  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдРрдк рдиреЗ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛ рд╣реИ рдФрд░ рдШрдЯрдирд╛рдУрдВ рдХреА рд╕рджрд╕реНрдпрддрд╛ рд▓реЗ рд░рд╣рд╛ рд╣реИ <br><pre> <code class="bash hljs">kubectl get events --watch</code> </pre> <br>  рдореИрдВ рдореЗрдиреВ рдХреЛ рджрдмрд╛рддрд╛ рд╣реВрдВ рдбреЗрдбрд▓реЙрдХ рдореА ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http: // localhost: 9376 / api / job / рдЬрд╝рд┐рдВрджрд╛ / рдЧрддрд┐рд░реЛрдз</a> ) <br><br><img src="https://habrastorage.org/webt/ed/ir/bb/edirbbiw3gjjoptubdh7992z6yy.png"><br><br>  рдФрд░ рдкрд╛рдБрдЪ рд╕реЗрдХрдВрдб рдХреЗ рднреАрддрд░ рдореИрдВ рд╕рдорд╕реНрдпрд╛ рдФрд░ рдЙрд╕рдХреЗ рд╕рдорд╛рдзрд╛рди рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реВрдБ <br><br><pre> <code class="bash hljs">1s Warning Unhealthy Pod Liveness probe failed: Get http://10.1.0.137:80/api/job/alive/check: net/http: request canceled (Client.Timeout exceeded <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> awaiting headers) 1s Warning Unhealthy Pod Liveness probe failed: Get http://10.1.0.137:80/api/job/alive/check: net/http: request canceled (Client.Timeout exceeded <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> awaiting headers) 0s Warning Unhealthy Pod Liveness probe failed: Get http://10.1.0.137:80/api/job/alive/check: net/http: request canceled (Client.Timeout exceeded <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> awaiting headers) 0s Warning Unhealthy Pod Readiness probe failed: Get http://10.1.0.137:80/health: dial tcp 10.1.0.137:80: connect: connection refused 0s Normal Killing Pod Killing container with id docker://metricsdemo:Container failed liveness probe.. Container will be killed and recreated. 0s Normal Pulled Pod Container image <span class="hljs-string"><span class="hljs-string">"localhost:5000/sansys/metricsdemo3:6"</span></span> already present on machine 0s Normal Created Pod Created container 0s Normal Started Pod Started container</code> </pre> <br><br><a name="9"></a><h2>  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br><ol><li>  рдПрдХ рддрд░рдл, рдкреНрд░рд╡реЗрд╢ рджрд╣рд▓реАрдЬ рдореЗрд░реЗ рд╡рд┐рдЪрд╛рд░ рд╕реЗ рдмрд╣реБрдд рдХрдо рдирд┐рдХрд▓рд╛, рджреВрд╕рд░реА рддрд░рдл, рдпрд╣ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХреБрдмреЗрд░рдиреЗрдЯ рдХреНрд▓рд╕реНрдЯрд░ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдПрдХ рдбреЗрд╡рд▓рдкрд░ рдХрд╛ рдХрдВрдкреНрдпреВрдЯрд░ рд╣реИред  рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ, рд░рд╛рдЬреНрдп рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ, рдП / рдмреА рдкрд░реАрдХреНрд╖рдг рдЖрджрд┐ рдХреА рд╕реАрдорд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ред </li><li>  рдкреНрд░реЛрдореЗрдерд╕ рдиреЗ рдкрд╣рд▓реА рдмрд╛рд░ рдЗрд╕рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рд▓реЗрдХрд┐рди рдХреНрдпреВрдмрд░ рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХреЗ рджреМрд░рд╛рди рд╡рд┐рднрд┐рдиреНрди рджрд╕реНрддрд╛рд╡реЗрдЬреЛрдВ рдФрд░ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рдкрдврд╝рдХрд░ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рдХрд┐ рдпрд╣ рдХреНрд▓рд╕реНрдЯрд░ рдФрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рд╕реЗ рдореИрдЯреНрд░рд┐рдХреНрд╕ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИ </li><li>  рдпрд╣ рдЗрддрдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдбреЗрд╡рд▓рдкрд░ рдХреЛ рддреИрдирд╛рддреА рдХреЗ рд▓рд┐рдП рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЕрдкрдиреЗ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдПрдХ рдлреАрдЪрд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдФрд░ рд╕рдВрд▓рдЧреНрди рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдирддреАрдЬрддрди, рдЕрддрд┐рд░рд┐рдХреНрдд рдХреЗ рдмрд┐рдирд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдирдП рдореАрдЯреНрд░рд┐рдХред  рдкреНрд░рдпрд╛рд╕ рдордВрдЪ рдФрд░ рдареЗрд╕ рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрдиреЗ рд▓рдЧреЗрдВрдЧреЗред  рдЖрд░рд╛рдо рд╕реЗ </li></ol><br><br><a name="10"></a><h2>  рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдВ </h2><br><ol><li>  рдЕрдиреБрдкреНрд░рдпреЛрдЧ <code> :</code> рдХреЗ <code> :</code> рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ <code> :</code> , рдЬреЛ рдХрд┐ рдЧреНрд░рд╛рдлреНрдЯрд╛рдирд╛ тЖТ рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдбреЙрдХрдЯрд░-рдХрдВрдкреЛрдЬ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП, рдХреБрдЫ рднреА рдирдпрд╛ рдирд╣реАрдВ рд╣реИ </li><li>  <code>kubectl create -f file.yml</code> - рдПрдХ рдЗрдХрд╛рдИ рдмрдирд╛рдПрдБ </li><li>  <code>kubectl delete -f file.yml</code> - рдПрдХ рдЗрдХрд╛рдИ рд╣рдЯрд╛рдПрдВ </li><li>  <code>kubectl get pod</code> - рд╕рднреА рдЪреВрд▓реНрд╣реЛрдВ (рд╕реЗрд╡рд╛, рд╕рдорд╛рдкрди рдмрд┐рдВрджреБ ...) рдХреА рдПрдХ рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ <ul><li>  <code>--namespace=kube-system</code> - рдиреЗрдорд╕реНрдкреЗрд╕ рджреНрд╡рд╛рд░рд╛ рдлрд╝рд┐рд▓реНрдЯрд░рд┐рдВрдЧ </li><li>  <code>-n kube-system</code> - рдЗрд╕реА рддрд░рд╣ </li></ul></li><li>  <code>kubectl -it exec grafana-d8d4d9f5c-cvnkh -- /bin/bash</code> - рддрд▓ рдкрд░ рдЕрдиреБрд▓рдЧреНрдирдХ </li><li>  <code>kubectl delete service grafana</code> - рдПрдХ рд╕реЗрд╡рд╛, рдлрд▓реА рдХреЛ рд╣рдЯрд╛рдПрдВред  рдкрд░рд┐рдирд┐рдпреЛрдЬрди (- рд╕рднреА рд╣рдЯрд╛рдПрдБ) </li><li>  <code>kubectl describe</code> - рдЗрдХрд╛рдИ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВ (рдЖрдк рдЗрд╕реЗ рдПрдХ рд╣реА рдмрд╛рд░ рдореЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ) </li><li>  <code>kubectl edit service metricsdemo</code> - рдиреЛрдЯрдкреИрдб рд▓реЙрдиреНрдЪ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдордХреНрдЦреА рдкрд░ рд╕рднреА рдпрд╛рдорд▓реЛрдВ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░реЗрдВ <div class="spoiler">  <b class="spoiler_title">рдбреЗрдореЛ</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/xh/nc/c2/xhncc23bokunuyqam3ekkntdxrw.png"></div></div></li><li>  <code>kubectl --help</code> - рдмрдбрд╝реА рдорджрдж) </li><li>  рдПрдХ рдЖрдо рд╕рдорд╕реНрдпрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдПрдХ рдлрд▓реА (рд╡рд┐рдЪрд╛рд░ - рдПрдХ рдЪрд▓ рд░рд╣реА рдЫрд╡рд┐), рдХреБрдЫ рдЧрд▓рдд рд╣реЛ рдЧрдпрд╛ рдФрд░ рдХреЛрдИ рд╡рд┐рдХрд▓реНрдк рдирд╣реАрдВ рд╣реИрдВ, рд╕рд┐рд╡рд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рдЕрдВрджрд░ рдбрд┐рдмрдЧ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ (tcpdump / nc рдЖрджрд┐ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ)ред  - рдпреБрдЬрд╝рд╛рдИ рдХреБрдмреЗрдЯреЗрд▓-рдбрд┐рдмрдЧ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИрдмреНрд░.</a> com/en/company/flant/blog/ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">436112</a> <br></li></ol><br><br><a name="11"></a><h2>  рд╕рдВрджрд░реНрдн </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдРрдк рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдХреНрдпрд╛ рд╣реИ?</a> </li><li>  Kubernetes <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╢реБрд░реБрдЖрдд рдХреЗ рд▓рд┐рдП рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рддреИрдирд╛рддреА рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рддреИрдирд╛рддреА</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рдПрдХ рд╕реНрдЯреЗрдЯрд▓реЗрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЪрд▓рд╛рдПрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рдХреНрдпрд╛ рд╣реИ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">cronjob</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рддрддреНрдкрд░рддрд╛ рдЬрд╛рдВрдЪ рдХреЛ рдмрдврд╝рд╛рд╡рд╛ рджреЗрддрд╛ рд╣реИ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">kubectl рдзреЛрдЦрд╛ рд╢реАрдЯ</a> </li></ul></li><li>  рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд╡реЗрд░реА рднрд╛рд╖рд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Coober рдХреЗ рд▓рд┐рдП Prometeus рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ рдкреНрд░реЛрдореЗрдерд┐рдпрд╕ рдСрдкрд░реЗрдЯрд░ рдХреЗ рдХрд╛рдо рдХрд╛ рдЙрдкрдХрд░рдг рдФрд░ рддрдВрддреНрд░</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреВрд░реНрд╡ рддреИрдпрд╛рд░ рдЧреНрд░рд╛рдлреНрдЯрд╛рдирд╛ рд╡рд┐рдиреНрдпрд╛рд╕</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд▓реЛрдЧ рдХреИрд╕реЗ рдХрд░рддреЗ рд╣реИрдВ</a> (рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рд╕реЗ рдХреБрдЫ рдЪреАрдЬреЗрдВ рдкреБрд░рд╛рдиреА рд╣реИрдВ) - рд╡рд╣рд╛рдБ, рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рд▓реЙрдЧрд┐рдВрдЧ, рдЕрд▓рд░реНрдЯ рдЖрджрд┐ рднреА рд╣реИрдВред </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реЗрд▓реНрдо</a> - рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдкреИрдХреЗрдЬ рдкреНрд░рдмрдВрдзрдХ - рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░реЛрдореЗрдерд╕ + рдЧреНрд░рд╛рдлрд╛рдирд╛ рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рдерд╛, рд▓реЗрдХрд┐рди рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ - рдЕрдзрд┐рдХ рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Coober рд╕реЗ Prometheus рдХреЗ рд▓рд┐рдП рдХреНрдпреВрдмреНрд╕</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдЕрд╕рдлрд▓рддрд╛ рдХреА рдХрд╣рд╛рдирд┐рдпрд╛рдБ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Kubernetes-рд╣рд╛ред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">5 рдЬрд╛рджреВрдЧрд░ рдХреЗ рд╕рд╛рде рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдлреЗрд▓рдУрд╡рд░ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рддреИрдирд╛рдд рдХрд░реЗрдВ</a> </li></ol><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><img src="https://github.com/favicon.ico" width="22"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрд░реЛрдд рдХреЛрдб рдФрд░ рдЬреАрдердм рдкрд░ рдЙрдкрд▓рдмреНрдз рдЬреИрдо</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi437286/">https://habr.com/ru/post/hi437286/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi437274/index.html">рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рдЕрд╡рд▓реЛрдХрдирд╢реАрд▓рддрд╛ рдХреА рдУрд░ рдПрдХ рджреГрд╖реНрдЯрд┐рдХреЛрдг</a></li>
<li><a href="../hi437276/index.html">Sunlike LEDs рдХреЗ рд╕рд╛рде рд░рд┐рдорд┐рд▓рд┐рдЪ рдЯреЗрдмрд▓ рд▓реИрдВрдк</a></li>
<li><a href="../hi437280/index.html">рдЖрд╕рд╛рди рд╣реИ, рдпрд╣ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рд░рд╕рдж</a></li>
<li><a href="../hi437282/index.html">VMware рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП Kubernetes рдХрд╛ рдкрд░рд┐рдЪрдпред рднрд╛рдЧ 2. рдЕрднреНрдпрд╛рд╕</a></li>
<li><a href="../hi437284/index.html">рдСрдбрд┐рдпреЛ рдЙрджреНрдпреЛрдЧ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдЪрд┐рдбрд╝рд┐рдпрд╛рдШрд░ рдХреЗ рдкреЗрд╢реЗ</a></li>
<li><a href="../hi437292/index.html">рдХреНрдпреЛрдВ рдкрд╛рд░рдВрдкрд░рд┐рдХ рдЦреБрджрд░рд╛ рд╕реНрдЯреЛрд░ рдореЙрдбрд▓ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдореГрдд рд╣реИ</a></li>
<li><a href="../hi437296/index.html">рд▓реЛрдЧ рдФрдкрдЪрд╛рд░рд┐рдХ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ?</a></li>
<li><a href="../hi437298/index.html">рд▓рдЧрднрдЧ рдПрдХ рдЖрджрдореА</a></li>
<li><a href="../hi437300/index.html">рд╢реБрд░реБрдЖрддреА iOS рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд▓рд┐рдП 10 рдХреМрд╢рд▓ рдФрд░ рдЬреНрдЮрд╛рди рдЖрд╡рд╢реНрдпрдХ рд╣реИ</a></li>
<li><a href="../hi437304/index.html">рдЕрдЧрд░ рдЖрдк рдХрд▓рд░ рдмреНрд▓рд╛рдЗрдВрдб рд╣реИрдВ рддреЛ рдЖрд▓реВ рдХреИрд╕реЗ рдЦрд░реАрджреЗрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>