<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§– â‡ï¸ ğŸ¤¹ğŸ¾ ç¥ç»å·«å¸ˆçš„åé¢ã€‚ ç¬¬3éƒ¨åˆ†ï¼šå®Œæˆæ¸²æŸ“ï¼Œåˆ¶ä½œæ¸¸æˆ ğŸ‘¨ğŸ½â€ğŸŒ¾ ğŸ¤½ğŸ¿ ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å—¨ï¼Œè¿™æ˜¯æˆ‘çš„ä¸€ç³»åˆ—å‡ºç‰ˆç‰©çš„ç¬¬ä¸‰éƒ¨åˆ†ï¼Œä¸“é—¨ä»‹ç»Neuromancerçš„é€†å‘å¼€å‘-Neuro Giceræ˜¯åŒåå°è¯´çš„è§†é¢‘æ¸¸æˆä½“ç°ã€‚ 
 ç¥ç»å·«å¸ˆçš„åé¢ã€‚ ç¬¬1éƒ¨åˆ†ï¼šç²¾çµ 
 ç¥ç»å·«å¸ˆçš„åé¢ã€‚ ç¬¬2éƒ¨åˆ†ï¼šæ¸²æŸ“å­—ä½“ 

 è¿™éƒ¨åˆ†ä¼¼ä¹æœ‰äº›æ··ä¹±ã€‚ äº‹å®æ˜¯ï¼Œæœ¬æ–‡ä¸­æè¿°çš„å¤§å¤šæ•°å†…å®¹åœ¨æ’°å†™å‰ä¸€ç¯‡æ–‡ç« æ—¶å°±å·²å‡†å¤‡å°±ç»ªã€‚ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ç¥ç»å·«å¸ˆçš„åé¢ã€‚ ç¬¬3éƒ¨åˆ†ï¼šå®Œæˆæ¸²æŸ“ï¼Œåˆ¶ä½œæ¸¸æˆ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415555/"><img src="https://habrastorage.org/webt/wn/4k/jm/wn4kjm-p2fyta0emos5ufhkop_0.png"><br><p> å—¨ï¼Œè¿™æ˜¯æˆ‘çš„ä¸€ç³»åˆ—å‡ºç‰ˆç‰©çš„ç¬¬ä¸‰éƒ¨åˆ†ï¼Œä¸“é—¨ä»‹ç»Neuromancerçš„é€†å‘å¼€å‘-Neuro Giceræ˜¯åŒåå°è¯´çš„è§†é¢‘æ¸¸æˆä½“ç°ã€‚ </p><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¥ç»å·«å¸ˆçš„åé¢ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬1éƒ¨åˆ†ï¼šç²¾çµ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¥ç»å·«å¸ˆçš„åé¢ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬2éƒ¨åˆ†ï¼šæ¸²æŸ“å­—ä½“</a> </blockquote><p> è¿™éƒ¨åˆ†ä¼¼ä¹æœ‰äº›æ··ä¹±ã€‚ äº‹å®æ˜¯ï¼Œæœ¬æ–‡ä¸­æè¿°çš„å¤§å¤šæ•°å†…å®¹åœ¨æ’°å†™<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å‰ä¸€ç¯‡</a>æ–‡ç« æ—¶å°±å·²å‡†å¤‡å°±ç»ªã€‚ ä»é‚£æ—¶èµ·å·²ç»è¿‡å»äº†ä¸¤ä¸ªæœˆï¼Œè€Œä¸”ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘æ²¡æœ‰ä¿ç•™å·¥ä½œè®°å½•çš„ä¹ æƒ¯ï¼Œæ‰€ä»¥æˆ‘åªæ˜¯å¿˜è®°äº†ä¸€äº›ç»†èŠ‚ã€‚ ä½†æ˜¯ï¼Œå°±è¿™æ ·å§ã€‚ </p><a name="habracut"></a><br><hr><br><p> <em>[åœ¨æˆ‘å­¦ä¼šæ‰“å°è¡Œä¹‹åï¼Œç»§ç»­é¢ å€’å¯¹è¯æ¡†çš„ç»“æ„æ˜¯åˆä¹é€»è¾‘çš„ã€‚</em>  <em>ä½†æ˜¯ï¼Œå‡ºäºæŸç§åŸå› ï¼Œæˆ‘è½¬è€Œå®Œå…¨è¿›å…¥äº†æ¸²æŸ“ç³»ç»Ÿçš„åˆ†æã€‚]</em>å†æ¬¡ï¼Œæ²¿ç€<code>main</code>èµ°ï¼Œæˆ‘èƒ½å¤Ÿå®šä½é¦–å…ˆåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå†…å®¹çš„è°ƒç”¨ï¼š <code>seg000:0159: call sub_1D0B2</code> ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œâ€œä»»ä½•â€æ˜¯å…‰æ ‡å’Œä¸»èœå•çš„èƒŒæ™¯å›¾åƒï¼š </p><br><p><img src="https://habrastorage.org/webt/9l/9h/yq/9l9hyqeu9n7m8vyt8iizlz5wnze.png"><br></p><br><p> å€¼å¾—æ³¨æ„çš„æ˜¯<code>sub_1D0B2</code>å‡½æ•°<em>[ä»¥ä¸‹ç®€ç§°</em> <code>sub_1D0B2</code> <em>]</em>æ²¡æœ‰å‚æ•°ï¼Œä½†æ˜¯ï¼Œå®ƒçš„ç¬¬ä¸€æ¬¡è°ƒç”¨ä¹‹å‰æ˜¯ä¸¤ä¸ªå‡ ä¹ç›¸åŒçš„ä»£ç æ®µï¼š </p><br><pre> <code class="hljs perl">loc_100E5: loc_10123: mov ax, <span class="hljs-number"><span class="hljs-number">2</span></span> mov ax, <span class="hljs-number"><span class="hljs-number">2</span></span> mov dx, seg seg009 mov dx, seg seg01<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> dx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> dx <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax mov ax, <span class="hljs-number"><span class="hljs-number">506</span></span>Ah mov ax, <span class="hljs-number"><span class="hljs-number">5076</span></span>h ; <span class="hljs-string"><span class="hljs-string">"cursors.imh"</span></span>, <span class="hljs-string"><span class="hljs-string">"title.imh"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax call load_imh call load_imh ; load_imh(res, offt, seg) add sp, <span class="hljs-number"><span class="hljs-number">6</span></span> add sp, <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ah</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_123F8</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_123F8</span></span></span><span class="hljs-function"> </span></span>; sub_123F8(<span class="hljs-number"><span class="hljs-number">0</span></span>), sub_123F8(<span class="hljs-number"><span class="hljs-number">10</span></span>) add sp, <span class="hljs-number"><span class="hljs-number">2</span></span> add sp, <span class="hljs-number"><span class="hljs-number">2</span></span> cmp word_5AA92, <span class="hljs-number"><span class="hljs-number">0</span></span> mov ax, <span class="hljs-number"><span class="hljs-number">1</span></span> jz short loc_10123 <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dx</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seg</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seg010</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dx</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dx</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seg</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">seg009</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dx</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 64</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">h</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> 0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ah</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">A0h</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_1CF5B</span></span></span><span class="hljs-function"> </span></span>; sub_1CF5B(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, seg01<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sp</span></span></span><span class="hljs-function">, 0</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ch</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_1CF5B</span></span></span><span class="hljs-function"> </span></span>; sub_1CF5B(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">160</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, seg009, <span class="hljs-number"><span class="hljs-number">0</span></span>) add sp, 0Ch</code> </pre> <br><p> åœ¨è°ƒç”¨<code>render</code>ä¹‹å‰ï¼Œå°†å…‰æ ‡ï¼ˆ <code>title.imh</code> ï¼‰å’ŒèƒŒæ™¯ï¼ˆ <code>title.imh</code> ï¼‰è§£å‹ç¼©åˆ°å†…å­˜ä¸­ï¼ˆ <code>load_imh</code>æ˜¯ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€éƒ¨åˆ†</a>é‡å‘½åçš„<code>sub_126CB</code> ï¼‰ï¼Œåˆ†åˆ«åˆ†ä¸ºç¬¬ä¹å’Œç¬¬åä¸ªéƒ¨åˆ†ã€‚ å¯¹åŠŸèƒ½<code>sub_123F8</code>ç ”ç©¶å¹¶æ²¡æœ‰ç»™æˆ‘å¸¦æ¥ä»»ä½•æ–°ä¿¡æ¯ï¼Œä½†æ˜¯ä»…æŸ¥çœ‹<code>sub_1CF5B</code>çš„å‚æ•°ï¼Œæˆ‘å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š </p><br><ul><li> å‚æ•°4å’Œ5ä¸€èµ·ä»£è¡¨è§£å‹ç¼©åçš„Spriteçš„åœ°å€ï¼ˆ <code>segment:offset</code> ï¼‰ï¼› </li><li> å‚æ•°2å’Œ3å¯èƒ½æ˜¯åæ ‡ï¼Œå› ä¸ºè¿™äº›æ•°å­—ä¸è°ƒç”¨<code>render</code>ä¹‹åæ˜¾ç¤ºçš„å›¾åƒç›¸å…³ã€‚ </li><li> æœ€åä¸€ä¸ªå‚æ•°å¯èƒ½æ˜¯ç²¾çµèƒŒæ™¯ä¸é€æ˜åº¦çš„æ ‡å¿—ï¼Œå› ä¸ºè§£å‹åçš„ç²¾çµå…·æœ‰é»‘è‰²èƒŒæ™¯ï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨å±å¹•ä¸Šçœ‹åˆ°æ²¡æœ‰å®ƒçš„å…‰æ ‡ã€‚ </li></ul><br><p> ä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°<em>ï¼ˆå¹¶åŒæ—¶è¿›è¡Œä¸€èˆ¬æ¸²æŸ“ï¼‰ï¼Œ</em>åœ¨è·Ÿè¸ª<code>sub_1CF5B</code>ä¹‹å<em>ï¼Œ</em>ä¸€åˆ‡éƒ½å˜å¾—æ¸…æ™°äº†ã€‚ äº‹å®æ˜¯ï¼Œåœ¨æ•°æ®æ®µä¸­ï¼Œä»åœ°å€<code>0x3BD4</code>å¼€å§‹ï¼Œ <code>0x3BD4</code>äº†ä»¥ä¸‹ç±»å‹çš„11ä¸ªç»“æ„çš„æ•°ç»„ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sprite_layer_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> flags; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> update; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> left; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> top; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> dleft; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> dtop; <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span> sprite_hdr; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> sprite_segment; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> sprite_pixels; <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span> _sprite_hdr; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> _sprite_segment; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> _sprite_pixels; } <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>;</code> </pre> <br><p> æˆ‘ç§°è¿™ä¸ªæ¦‚å¿µä¸ºç²¾çµé“¾ã€‚ å®é™…ä¸Šï¼Œ <code>sub_1CF5B</code>å‡½æ•°ï¼ˆä»¥ä¸‹<code>add_sprite_to_chain</code> ï¼‰å°†æ‰€é€‰çš„spriteæ·»åŠ åˆ°é“¾ä¸­ã€‚ åœ¨16ä½è®¡ç®—æœºä¸Šï¼Œå®ƒå¤§çº¦å…·æœ‰ä»¥ä¸‹ç­¾åï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span> g_sprite_chain[<span class="hljs-number"><span class="hljs-number">11</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_sprite_to_chain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> top, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> offset, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> segment, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> opaque)</span></span></span></span>;</code> </pre> <br><p> å®ƒæ˜¯è¿™æ ·çš„ï¼š </p><br><ul><li> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>g_sprite_chain</code>æ•°ç»„ä¸­çš„ç´¢å¼•ï¼› </li><li>  <code>left</code>å’Œ<code>top</code>å‚æ•°åˆ†åˆ«å†™å…¥<code>g_sprite_chain[index].left</code>å’Œ<code>g_sprite_chain[index].top</code> ï¼› </li><li> å°†spriteæ ‡å¤´ï¼ˆä½äº<code>segment:offset</code>çš„å‰8ä¸ªå­—èŠ‚ï¼‰å¤åˆ¶åˆ°<code>imh_hdr_t</code>ç±»å‹çš„<code>g_sprite_chain[index].sprite_hdr</code> ï¼ˆä»ç¬¬ä¸€éƒ¨åˆ†é‡å‘½åä¸º<code>rle_hdr_t</code> ï¼‰ï¼š </li></ul><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">imh_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> unknown; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> width; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> height; } <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>;</code> </pre> <br><ul><li>  <code>g_sprite_chain[index].sprite_segment</code>å­—æ®µ<code>g_sprite_chain[index].sprite_segment</code>è®°å½•<code>segment</code>çš„å€¼ï¼› </li><li> åœ¨<code>g_sprite_chain[index].sprite_pixels</code> ï¼Œå†™å…¥ä¸€ä¸ªç­‰äº<code>offset + 8</code>çš„å€¼ï¼Œå› æ­¤<code>sprite_segment:sprite_pixels</code>æ˜¯æ·»åŠ çš„spriteçš„ä½å›¾åœ°å€ï¼› </li><li>  <code>sprite_hdr</code> ï¼Œ <code>sprite_segment</code>å’Œ<code>sprite_pixels</code>åœ¨<code>_sprite_hdr</code> ï¼Œ <code>_sprite_segment</code>å’Œ<code>_sprite_pixels</code> <code>sprite_pixels</code>é‡å¤<em>[ä¸ºä»€ä¹ˆï¼Ÿ</em>  <em>-æˆ‘ä¸çŸ¥é“ï¼Œè¿™ä¸æ˜¯è¿™ç§é‡å¤å­—æ®µçš„å”¯ä¸€æƒ…å†µ]</em> ï¼› </li><li> åœ¨å­—æ®µ<code>g_sprite_chain[index].flags</code> <code>1 + (opaque &lt;&lt; 4)</code>å†™å…¥ç­‰äº<code>1 + (opaque &lt;&lt; 4)</code> <code>g_sprite_chain[index].flags</code>å€¼<code>1 + (opaque &lt;&lt; 4)</code> ã€‚ è¯¥è®°å½•æ„å‘³ç€<code>flags</code>å€¼çš„ç¬¬ä¸€ä½æŒ‡ç¤ºâ€œå½“å‰â€å±‚çš„â€œæ´»åŠ¨â€ï¼Œè€Œç¬¬äº”ä½æŒ‡ç¤ºå…¶èƒŒæ™¯çš„<strong>ä¸é€æ˜åº¦</strong> ã€‚  <em>[æˆ‘å¯¹é€æ˜æ€§æ ‡å¿—çš„æ€€ç–‘æ¶ˆé™¤äº†ï¼Œå› ä¸ºæˆ‘é€šè¿‡å®éªŒæµ‹è¯•äº†å…¶å¯¹æ˜¾ç¤ºå›¾åƒçš„å½±å“ã€‚</em>  <em>åœ¨è¿è¡Œæ—¶æ›´æ”¹ç¬¬äº”ä½çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°è¿™äº›å·¥ä»¶]ï¼š</em> <br><img src="https://habrastorage.org/webt/9z/i8/ui/9zi8uizaa3s9fwsqke4rwa_3jqa.png"><br></li></ul><br><p> æ­£å¦‚æˆ‘å·²ç»æåˆ°çš„ï¼Œ <code>render</code>å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œä½†ä¸éœ€è¦å®ƒ-å®ƒç›´æ¥ä¸<code>g_sprite_chain</code>æ•°ç»„ä¸€èµ·ä½¿ç”¨ï¼Œå°†â€œå±‚â€äº¤æ›¿åœ°ä»æœ€åä¸€ä¸ªï¼ˆ <code>g_sprite_chain[10]</code> -èƒŒæ™¯ï¼‰è½¬ç§»åˆ°ç¬¬ä¸€ä¸ªï¼ˆ <code>g_sprite_chain[0]</code> -å‰æ™¯ï¼‰ã€‚  <code>sprite_layer_t</code>ç»“æ„å…·æœ‰ä¸ºæ­¤æ‰€éœ€çš„ä¸€åˆ‡ï¼Œç”šè‡³æ›´å¤šã€‚ æˆ‘è¯´çš„æ˜¯æœª<code>dleft</code>å­—æ®µ<code>update</code> ï¼Œ <code>dleft</code>å’Œ<code>dtop</code> ã€‚ </p><br><p> å®é™…ä¸Šï¼Œ <code>render</code>å‡½æ•°<strong>ä¸ä¼š</strong>åœ¨æ¯å¸§ä¸­é‡ç”»<strong>æ‰€æœ‰</strong>ç²¾çµã€‚  <code>g_sprite_chain.update</code>å­—æ®µçš„å€¼éé›¶è¡¨ç¤ºéœ€è¦é‡ç»˜å½“å‰çš„ç²¾çµã€‚ å‡è®¾æˆ‘ä»¬ç§»åŠ¨äº†å…‰æ ‡ï¼ˆ <code>g_sprite_chain[0]</code> ï¼‰ï¼Œé‚£ä¹ˆåœ¨é¼ æ ‡ç§»åŠ¨å¤„ç†ç¨‹åºä¸­å°†å‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mouse_move_handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...)</span></span></span><span class="hljs-function"> </span></span>{ ... g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].update = <span class="hljs-number"><span class="hljs-number">1</span></span>; g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dleft = mouse_x - g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].left; g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dtop = mouse_y - g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].top; }</code> </pre> <br><p> å½“æ§åˆ¶æƒä¼ é€’ç»™<code>render</code>å‡½æ•°æ—¶ï¼Œåè€…å·²åˆ°è¾¾<code>g_sprite_chain[0]</code>å±‚ï¼Œå› æ­¤éœ€è¦å¯¹å…¶è¿›è¡Œæ›´æ–°ã€‚ ç„¶åï¼š </p><br><ul><li> åœ¨æ›´æ–°ä¹‹å‰çš„æ‰€æœ‰å›¾å±‚ä¹‹å‰ï¼Œå°†è®¡ç®—å¹¶ç»˜åˆ¶å…‰æ ‡ç²¾çµå æ®çš„åŒºåŸŸçš„äº¤é›†ï¼› </li><li> ç²¾çµåæ ‡å°†è¢«æ›´æ–°ï¼š </li></ul><br><pre> <code class="hljs powershell">g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].update = <span class="hljs-number"><span class="hljs-number">0</span></span>; g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].left += g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dleft g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dleft = <span class="hljs-number"><span class="hljs-number">0</span></span>; g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].top += g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dtop g_sprite_chain[<span class="hljs-number"><span class="hljs-number">0</span></span>].dtop = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><ul><li> ç²¾çµå°†åœ¨æ›´æ–°çš„åæ ‡å¤„ç»˜åˆ¶ã€‚ </li></ul><br><p> è¿™æ ·å¯ä»¥æœ€å°åŒ–<code>render</code>åŠŸèƒ½æ‰§è¡Œçš„æ“ä½œæ•°é‡ã€‚ </p><br><hr><br><p> å°½ç®¡æˆ‘ç®€åŒ–äº†å¾ˆå¤šé€»è¾‘ï¼Œä½†å®ç°è¯¥é€»è¾‘å¹¶ä¸éš¾ã€‚ é‰´äºç°ä»£è®¡ç®—æœºçš„è®¡ç®—èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥è´Ÿæ‹…å¾—èµ·åœ¨æ¯å¸§ä¸­é‡ç»˜æ‰€æœ‰11 <code>g_sprite_chain.update</code>é“¾ç²¾çµï¼Œ <code>.dleft</code> ï¼Œå¯ä»¥<code>.dtop</code> <code>.dleft</code> ï¼Œ <code>.dtop</code>å’Œ<code>.dtop</code>ä»¥åŠä¸å®ƒä»¬ç›¸å…³çš„æ‰€æœ‰å¤„ç†ã€‚ å¦ä¸€ä¸ªç®€åŒ–æ¶‰åŠä¸é€æ˜åº¦æ ‡å¿—çš„å¤„ç†ã€‚ åœ¨åŸå§‹ä»£ç ä¸­ï¼Œå¯¹äºå­å›¾ä¸­çš„æ¯ä¸ªé€æ˜åƒç´ ï¼Œå°†æœç´¢ä¸è¾ƒä½å±‚ä¸­çš„ç¬¬ä¸€ä¸ªä¸é€æ˜åƒç´ çš„äº¤ç‚¹ã€‚ ä½†æ˜¯æˆ‘ä½¿ç”¨32ä½è§†é¢‘æ¨¡å¼ï¼Œå› æ­¤å¯ä»¥åœ¨<em>RGBA</em>æ–¹æ¡ˆä¸­æ›´æ”¹é€æ˜åº¦å­—èŠ‚çš„å€¼ã€‚ ç»“æœï¼Œæˆ‘å¾—åˆ°äº†å‘ï¼ˆä»ï¼‰é“¾ä¸­æ·»åŠ ï¼ˆåˆ é™¤ï¼‰å­ç”»é¢çš„åŠŸèƒ½ï¼š </p><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sprite_layer_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> flags; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> left; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> top; <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span> sprite_hdr; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *sprite_pixels; <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span> _sprite_hdr; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *_sprite_pixels; } <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span> g_sprite_chain[<span class="hljs-number"><span class="hljs-number">11</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add_sprite_to_chain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> top, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *sprite, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> opaque)</span></span></span><span class="hljs-function"> </span></span>{ assert(n &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span> *layer = &amp;g_sprite_chain[n]; <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(layer, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>)); layer-&gt;left = left; layer-&gt;top = top; memmove(&amp;layer-&gt;sprite_hdr, sprite, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>)); layer-&gt;sprite_pixels = sprite + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>); memmove(&amp;layer-&gt;_sprite_hdr, &amp;layer-&gt;sprite_hdr, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>) + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span>*)); layer-&gt;flags = ((opaque &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">16</span></span>) | <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove_sprite_from_chain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ assert(n &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span> *layer = &amp;g_sprite_chain[n]; <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(layer, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>)); }</code> </pre> </div></div><br><p> å°†å›¾å±‚ä¼ è¾“åˆ°<em>VGA</em>ç¼“å†²åŒºçš„åŠŸèƒ½å¦‚ä¸‹ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_to_vga</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> top, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *pixels, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bg_transparency)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw_sprite_to_vga</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">sprite_layer_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *sprite)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> top = sprite-&gt;top; <span class="hljs-keyword"><span class="hljs-keyword">int32_t</span></span> left = sprite-&gt;left; <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> w = sprite-&gt;sprite_hdr.width * <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> h = sprite-&gt;sprite_hdr.height; <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> bg_transparency = ((sprite-&gt;flags &gt;&gt; <span class="hljs-number"><span class="hljs-number">4</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *pixels = sprite-&gt;sprite_pixels; draw_to_vga(left, top, w, h, pixels, bg_transparency); }</code> </pre> <br><p>  <code>draw_to_vga</code>å‡½æ•°æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†ä¸­</a>æè¿°çš„åŒåå‡½æ•°ï¼Œä½†å¸¦æœ‰ä¸€ä¸ªé™„åŠ å‚æ•°ï¼ŒæŒ‡ç¤ºå›¾åƒèƒŒæ™¯çš„é€æ˜åº¦ã€‚ å°†<code>draw_sprite_to_vga</code>è°ƒç”¨æ·»åŠ åˆ°<code>render</code>å‡½æ•°çš„å¼€å¤´ï¼ˆå…¶ä½™å†…å®¹ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†</a>è¿ç§»ï¼‰ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">10</span></span>; i &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; i--) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(g_sprite_chain[i].flags &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } draw_sprite_to_vga(&amp;g_sprite_chain[i]); } ... }</code> </pre> <br><p> æˆ‘è¿˜ç¼–å†™äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ ¹æ®é¼ æ ‡æŒ‡é’ˆçš„å½“å‰ä½ç½®ï¼ˆ <code>update_cursor</code> ï¼‰å’Œä¸€ä¸ªç®€å•çš„èµ„æºç®¡ç†å™¨æ¥æ›´æ–°æ¸¸æ ‡ç²¾çµçš„ä½ç½®ã€‚ æˆ‘ä»¬å…±åŒåŠªåŠ›ï¼š </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-keyword"><span class="hljs-keyword">spite_chain_index_t</span></span> { SCI_CURSOR = <span class="hljs-number"><span class="hljs-number">0</span></span>, SCI_BACKGRND = <span class="hljs-number"><span class="hljs-number">10</span></span>, SCI_TOTAL = <span class="hljs-number"><span class="hljs-number">11</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">spite_chain_index_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> g_cursors[<span class="hljs-number"><span class="hljs-number">399</span></span>]; <span class="hljs-comment"><span class="hljs-comment">/* seg009 */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> g_background[<span class="hljs-number"><span class="hljs-number">32063</span></span>]; <span class="hljs-comment"><span class="hljs-comment">/* seg010 */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argv[])</span></span></span><span class="hljs-function"> </span></span>{ ... assert(resource_manager_load(<span class="hljs-string"><span class="hljs-string">"CURSORS.IMH"</span></span>, g_cursors)); add_sprite_to_chain(SCI_CURSOR, <span class="hljs-number"><span class="hljs-number">160</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>, g_cursors, <span class="hljs-number"><span class="hljs-number">0</span></span>); assert(resource_manager_load(<span class="hljs-string"><span class="hljs-string">"TITLE.IMH"</span></span>, g_background)); add_sprite_to_chain(SCI_BACKGRND, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, g_background, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (sfRenderWindow_isOpen(g_window)) { ... update_cursor(); render(); } ... }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">å…‰æ ‡GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/lw/ji/sm/lwjismkxi7ewlzw9m9zahx3imjy.gif"></div></div><br><hr><br><p> å¥½çš„ï¼Œå¯¹äºåŠŸèƒ½å®Œå–„çš„ä¸»èœå•ï¼Œèœå•æœ¬èº«å®é™…ä¸Šè¿˜ä¸å¤Ÿã€‚ ç°åœ¨æ˜¯æ—¶å€™å›åˆ°å¯¹è¯æ¡†çš„é¢ å€’äº†ã€‚  <em>[ä¸Šæ¬¡ï¼Œæˆ‘<code>draw_frame</code>æ„æˆå¯¹è¯æ¡†<code>draw_frame</code>å‡½æ•°ï¼Œå¹¶éƒ¨åˆ†åœ°åˆ†æäº†<code>draw_string</code>å‡½æ•°ï¼Œä»…ä»é‚£é‡Œæå–äº†æ–‡æœ¬æ¸²æŸ“é€»è¾‘ã€‚]</em>çœ‹ç€æ–°çš„<code>draw_frame</code> ï¼Œæˆ‘çœ‹åˆ°é‚£é‡Œä½¿ç”¨äº†<code>add_sprite_to_chain</code>å‡½æ•°-ä¸è¶³ä¸ºå¥‡ï¼Œä»…æ·»åŠ ä¸€ä¸ªå¯¹è¯æ¡†åœ¨ç²¾çµé“¾ä¸­ã€‚ å¿…é¡»å¤„ç†å¯¹è¯æ¡†ä¸­æ–‡æœ¬çš„ä½ç½®ã€‚ è®©æˆ‘æé†’æ‚¨ï¼Œå¯¹<code>draw_string</code>çš„è°ƒç”¨æ˜¯ä»€ä¹ˆæ ·çš„ï¼š </p><br><pre> <code class="hljs perl"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 5098</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">h</span></span></span><span class="hljs-function"> </span></span>; <span class="hljs-string"><span class="hljs-string">"New/Load"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax call draw_string ; draw_string(<span class="hljs-string"><span class="hljs-string">"New/Load"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre> <br><p> å’Œå¡«å……<code>draw_frame</code>çš„ç»“æ„<em>[è¿™æœ‰ç‚¹é¢†å…ˆï¼Œå› ä¸ºæˆ‘åœ¨å®Œå…¨å¼„æ¸…æ¥š<code>draw_string</code>ä¹‹åé‡å‘½åäº†å¤§å¤šæ•°å…ƒç´ ã€‚</em>  <em>é¡ºä¾¿è¯´ä¸€å¥ï¼Œå°±åƒåœ¨<code>sprite_layer_t</code>çš„æƒ…å†µä¸‹<code>sprite_layer_t</code> ï¼Œå­˜åœ¨é‡å¤å­—æ®µ]</em> ï¼š </p><br><pre> <code class="hljs powershell">typedef struct neuro_dialog_t { uint16_t left; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x65FA</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x20 uint16_t top; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x65FC</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x98 uint16_t right; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x65FE</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x7F uint16_t bottom; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6600</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xAF uint16_t inner_left; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6602</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x28 uint16_t inner_top; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6604</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA0 uint16_t inner_right; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6604</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA0 uint16_t inner_bottom; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6608</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA7 uint16_t _inner_left; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x660A</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x28 uint16_t _inner_top; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x660C</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA0 uint16_t _inner_right; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x660E</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x77 uint16_t _inner_bottom; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6610</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>xA7 uint16_t flags; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6612</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x06 uint16_t unknown; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x6614</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x00 uint8_t padding[<span class="hljs-number"><span class="hljs-number">192</span></span>] // ... uint16_t width; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x66D6</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x30 uint16_t pixels_offset; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x66D8</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x02 uint16_t pixels_segment; // word[<span class="hljs-number"><span class="hljs-number">0</span></span><span class="hljs-type"><span class="hljs-type">x66DA</span></span>]: <span class="hljs-number"><span class="hljs-number">0</span></span>x22FB } neuro_dialog_t;</code> </pre> <br><p> æˆ‘æ²¡æœ‰è§£é‡Šè¿™é‡Œçš„å†…å®¹ï¼Œæ–¹å¼å’ŒåŸå› ï¼Œè€Œæ˜¯ç•™ä¸‹äº†è¿™å¼ å›¾ç‰‡ï¼š </p><br><img src="https://habrastorage.org/webt/db/tf/nw/dbtfnw8fn1qx9aktubuvwojuw7y.png"><br><p> å˜é‡<code>x_offt</code>å’Œ<code>y_offt</code>åˆ†åˆ«æ˜¯<code>draw_string</code>å‡½æ•°çš„ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ã€‚ åŸºäºæ­¤ä¿¡æ¯ï¼Œå°†åç§°é‡å‘½åä¸º<code>build_dialog_frame</code>å’Œ<code>build_dialog_text</code>åï¼Œå¯ä»¥è½»æ¾æ„å»ºè‡ªå·±çš„<code>draw_frame</code>å’Œ<code>draw_text</code>ç‰ˆæœ¬ï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build_dialog_frame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">neuro_dialog_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *dialog, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> top, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> w, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> h, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> flags, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint8_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *pixels)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build_dialog_text</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">neuro_dialog_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *dialog, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *text, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x_offt, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint16_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y_offt)</span></span></span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-keyword"><span class="hljs-keyword">spite_chain_index_t</span></span> { SCI_CURSOR = <span class="hljs-number"><span class="hljs-number">0</span></span>, SCI_DIALOG = <span class="hljs-number"><span class="hljs-number">2</span></span>, ... } <span class="hljs-keyword"><span class="hljs-keyword">spite_chain_index_t</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *g_dialog = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">neuro_dialog_t</span></span> g_menu_dialog; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *argv[])</span></span></span><span class="hljs-function"> </span></span>{ ... assert(g_dialog = <span class="hljs-built_in"><span class="hljs-built_in">calloc</span></span>(<span class="hljs-number"><span class="hljs-number">8192</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)); build_dialog_frame(&amp;g_menu_dialog, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">152</span></span>, <span class="hljs-number"><span class="hljs-number">96</span></span>, <span class="hljs-number"><span class="hljs-number">24</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, g_dialog); build_dialog_text(&amp;g_menu_dialog, <span class="hljs-string"><span class="hljs-string">"New/Load"</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); add_sprite_to_chain(SCI_DIALOG, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">152</span></span>, g_dialog, <span class="hljs-number"><span class="hljs-number">1</span></span>); ... }</code> </pre> <br><img src="https://habrastorage.org/webt/ms/xt/bg/msxtbgydwxelkcfgng8vdud10ee.png"><br><p> æˆ‘çš„ç‰ˆæœ¬ä¸åŸå§‹ç‰ˆæœ¬ä¹‹é—´çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œæˆ‘ä½¿ç”¨åƒç´ å¤§å°çš„ç»å¯¹å€¼-æ›´å®¹æ˜“ã€‚ </p><br><hr><br><p> å³ä½¿è¿™æ ·ï¼Œæˆ‘ä¹Ÿå¯ä»¥è‚¯å®šï¼Œç´§éš<code>build_dialog_text</code>è°ƒç”¨ä¹‹åçš„ä»£ç éƒ¨åˆ†è´Ÿè´£åˆ›å»ºæŒ‰é’®ï¼š </p><br><pre> <code class="hljs perl"> ... mov ax, <span class="hljs-number"><span class="hljs-number">5098</span></span>h ; <span class="hljs-string"><span class="hljs-string">"New/Load"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax call build_dialog_text ; build_dialog_text(<span class="hljs-string"><span class="hljs-string">"New/Load"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) add sp, <span class="hljs-number"><span class="hljs-number">6</span></span> mov ax, <span class="hljs-number"><span class="hljs-number">6</span></span>Eh ; <span class="hljs-string"><span class="hljs-string">'n'</span></span> -  <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_181A3</span></span></span><span class="hljs-function"> </span></span>; sub_181A3(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'n'</span></span>) add sp, 0Ah mov ax, <span class="hljs-number"><span class="hljs-number">6</span></span>Ch ; <span class="hljs-string"><span class="hljs-string">'l'</span></span> -      <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax mov ax, <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax mov ax, <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">push</span></span> ax <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sub</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function">, 5 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ax</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">call</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub_181A3</span></span></span><span class="hljs-function"> </span></span>; sub_181A3(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'l'</span></span>)</code> </pre> <br><p> è¿™äº›éƒ½æ˜¯ç”Ÿæˆçš„æ³¨é‡Š<code>'n'</code>å’Œ<code>'l'</code> ï¼Œå®ƒä»¬æ˜¾ç„¶æ˜¯å•è¯<code>"New"</code>å’Œ<code>"load"</code>çš„ç¬¬ä¸€ä¸ªå­—æ¯ã€‚ æ­¤å¤–ï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡ç±»æ¨æ¥ä¸<code>build_dialog_text</code> ï¼Œé‚£ä¹ˆ<code>build_dialog_text</code>çš„å‰å››ä¸ªå‚æ•°ï¼ˆä»¥ä¸‹<code>build_dialog_item</code> ï¼‰å¯ä»¥æ˜¯åæ ‡å’Œå¤§å°çš„å› å­<em>[å®é™…ä¸Šï¼Œå‰ä¸‰ä¸ªå‚æ•°ï¼Œå®é™…ä¸Šæ˜¯ç¬¬å››ä¸ªå‚æ•°ï¼Œå…³äºå¦ä¸€ä¸ª]</em> ã€‚ å¦‚æœæ‚¨å°†è¿™äº›å€¼å åŠ åœ¨å›¾åƒä¸Šï¼Œåˆ™ä¸€åˆ‡æ”¶æ•›ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š </p><br><img src="https://habrastorage.org/webt/xy/gw/hj/xygwhjq2ykcj7wf9z0dbtzhzr7q.png"><br><p> å›¾åƒä¸­çš„å˜é‡<code>x_offt</code> ï¼Œ <code>y_offt</code>å’Œ<code>width</code>åˆ†åˆ«æ˜¯<code>build_dialog_item</code>å‡½æ•°çš„å‰ä¸‰ä¸ªå‚æ•°ã€‚ æ­¤çŸ©å½¢çš„é«˜åº¦å§‹ç»ˆç­‰äºç¬¦å·çš„é«˜åº¦-å…«ã€‚ åœ¨ä»”ç»†æŸ¥çœ‹<code>build_dialog_item</code> ï¼Œæˆ‘å‘ç°åœ¨<code>neuro_dialog_t</code>ç»“æ„ä¸­æŒ‡å®šä¸º<code>padding</code> ï¼ˆç°åœ¨ä¸º<code>items</code> ï¼‰çš„æ˜¯ä»¥ä¸‹å½¢å¼çš„16ä¸ªç»“æ„çš„æ•°ç»„ï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dialog_item_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> left; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> top; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> right; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> bottom; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> unknown; <span class="hljs-comment"><span class="hljs-comment">/* index? */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> letter; } <span class="hljs-keyword"><span class="hljs-keyword">dialog_item_t</span></span>;</code> </pre> <br><p> å­—æ®µ<code>neuro_dialog_t.unknown</code> ï¼ˆç°åœ¨ä¸º<code>neuro_dialog_t.items_count</code> ï¼‰æ˜¯èœå•ä¸­é¡¹ç›®æ•°çš„è®¡æ•°å™¨ï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">neuro_dialog_t</span></span></span><span class="hljs-class"> {</span></span> ... <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> flags; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> items_count; <span class="hljs-keyword"><span class="hljs-keyword">dialog_item_t</span></span> items[<span class="hljs-number"><span class="hljs-number">16</span></span>]; ... } <span class="hljs-keyword"><span class="hljs-keyword">neuro_dialog_t</span></span>;</code> </pre> <br><p>  <code>dialog_item_t.unknown</code>å­—æ®µä½¿ç”¨<code>build_dialog_item</code>å‡½æ•°çš„ç¬¬å››ä¸ªå‚æ•°åˆå§‹åŒ–ã€‚ ä¹Ÿè®¸è¿™æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„ç´¢å¼•ï¼Œä½†ä¼¼ä¹å¹¶éæ€»æ˜¯å¦‚æ­¤ï¼Œå› æ­¤<code>unknown</code> ã€‚  <code>dialog_item_t.letter</code>å­—æ®µä½¿ç”¨<code>build_dialog_item</code>å‡½æ•°çš„ç¬¬äº”ä¸ªå‚æ•°åˆå§‹åŒ–ã€‚ å†æ¬¡ï¼Œæœ‰å¯èƒ½åœ¨å·¦é”®å•å‡»å¤„ç†ç¨‹åºä¸­ï¼Œæ¸¸æˆæ£€æŸ¥é¼ æ ‡æŒ‡é’ˆçš„åæ ‡æ˜¯å¦è½å…¥å…¶ä¸­ä¸€é¡¹çš„åŒºåŸŸï¼ˆä¾‹å¦‚ï¼Œä»…æŒ‰é¡ºåºå¯¹å…¶è¿›è¡Œæ’åºï¼‰ï¼Œå¦‚æœæœ‰å‘½ä¸­ï¼Œåˆ™ä»è¯¥å­—æ®µä¸­é€‰æ‹©æ‰€éœ€çš„æŒ‰é’®å•å‡»å¤„ç†ç¨‹åºã€‚  <em>[æˆ‘ä¸çŸ¥é“è¿™å®é™…ä¸Šæ˜¯å¦‚ä½•å®Œæˆçš„ï¼Œä½†æˆ‘å®Œå…¨å®ç°äº†è¿™ä¸€é€»è¾‘ã€‚</em> </p><br><p> è¿™è¶³ä»¥æ„æˆä¸€ä¸ªå®Œæ•´çš„ä¸»èœå•ï¼Œè€Œæ— éœ€å›é¡¾åŸå§‹ä»£ç ï¼Œè€Œåªæ˜¯é‡å¤å…¶åœ¨æ¸¸æˆä¸­è§‚å¯Ÿåˆ°çš„è¡Œä¸ºã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">Main_Menu.GIF</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/we/q8/ni/weq8ni9fy9vuusoaitjgazjt6e4.gif"></div></div><br><hr><br><p> å¦‚æœæ‚¨è§‚çœ‹äº†å‰ä¸€ä¸ªgifåˆ°æœ€åï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°æœ€åä¸€å¸§çš„å¯åŠ¨æ¸¸æˆå±å¹•ã€‚ å®é™…ä¸Šï¼Œæˆ‘å·²ç»å…·å¤‡äº†ä¸€åˆ‡å‡†å¤‡ã€‚ åªéœ€ä¸‹è½½å¹¶ä¸‹è½½å¿…è¦çš„ç²¾çµå¹¶å°†å…¶æ·»åŠ åˆ°ç²¾çµé“¾å³å¯ã€‚ ä½†æ˜¯ï¼Œé€šè¿‡å°†ä¸»è§’çš„ç²¾çµæ”¾ç½®åœ¨èˆå°ä¸Šï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªä¸<code>imh_hdr_t</code>ç»“æ„æœ‰å…³çš„é‡è¦å‘ç°ã€‚ </p><br><p> åœ¨åŸå§‹ä»£ç ä¸­ï¼Œä½¿ç”¨åæ ‡156å’Œ110è°ƒç”¨å°†ä¸»è§’çš„å›¾åƒæ·»åŠ åˆ°é“¾ä¸­çš„<code>add_sprite_to_chain</code>å‡½æ•°ã€‚è¿™æ˜¯æˆ‘æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘è‡ªå·±é‡å¤ä¸€ä¸‹ï¼š </p><br><img src="https://habrastorage.org/webt/i1/5s/yf/i15syfep7bdhuhxgsbkhr-bxev4.png" align="left"><br><p> å¼„æ¸…æ¥šæ˜¯ä»€ä¹ˆä¹‹åï¼Œæˆ‘å¾—åˆ°äº†ä»¥ä¸‹ç±»å‹çš„ç»“æ„<code>imh_hdr_t</code> ï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">imh_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> dx; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> dy; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> width; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> height; } <span class="hljs-keyword"><span class="hljs-keyword">imh_hdr_t</span></span>;</code> </pre> <br><p> åŸæ¥æ˜¯<code>unknown</code>å­—æ®µçš„ä¸œè¥¿åŸæ¥æ˜¯åç§»å€¼ï¼Œè¿™äº›åç§»å€¼æ˜¯ä»ç²¾çµé“¾ä¸­å­˜å‚¨çš„ç›¸åº”åæ ‡ï¼ˆæ¸²æŸ“è¿‡ç¨‹ä¸­ï¼‰å‡å»çš„ã€‚ </p><br><p><br clear="left"></p><br><p> å› æ­¤ï¼Œç»˜åˆ¶çš„å­ç”»é¢çš„å·¦ä¸Šè§’çš„å®é™…åæ ‡å¤§è‡´å¦‚ä¸‹è®¡ç®—ï¼š </p><br><pre> <code class="hljs cpp">left = <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>.left - <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>.sprite_hdr.dx top = <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>.top - <span class="hljs-keyword"><span class="hljs-keyword">sprite_layer_t</span></span>.sprite_hdr.dy</code> </pre> <br><p> å°†å…¶åº”ç”¨åˆ°æˆ‘çš„ä»£ç ä¸­ï¼Œæˆ‘å¾—åˆ°äº†æ­£ç¡®çš„ç”»é¢ï¼Œç„¶åæˆ‘å¼€å§‹æ¢å¤ä¸»è§’ã€‚ å®é™…ä¸Šï¼Œæˆ‘è‡ªå·±ç¼–å†™äº†æ‰€æœ‰ä¸è§’è‰²æ§åˆ¶ï¼ˆé¼ æ ‡å’Œé”®ç›˜ï¼‰ï¼ŒåŠ¨ç”»å’Œç§»åŠ¨ç›¸å…³çš„ä»£ç ï¼Œè€Œæ— éœ€å›é¡¾åŸå§‹ä»£ç ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">Moonwalk.gif</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/tw/ei/m2/tweim2zx4hrsefql82ny-elnimc.gif"></div></div><br><hr><br><p> è·å¾—äº†ç¬¬ä¸€çº§çš„æ–‡å­—ä»‹ç»ã€‚ è®©æˆ‘æé†’æ‚¨ï¼Œå­—ç¬¦ä¸²èµ„æºå­˜å‚¨åœ¨<code>.BIH</code>æ–‡ä»¶ä¸­ã€‚  <code>.BIH</code>æ–‡ä»¶ç”±å¤§å°å¯å˜çš„æ ‡å¤´å’Œä¸€ç³»åˆ—ä»¥nullç»ˆæ­¢çš„å­—ç¬¦ä¸²ç»„æˆã€‚ æ£€æŸ¥æ’­æ”¾æ­¤ç®€ä»‹çš„åŸå§‹ä»£ç ï¼Œæˆ‘å‘ç°<code>.BIH</code>æ–‡ä»¶ä¸­æ–‡æœ¬éƒ¨åˆ†å¼€å¤´çš„åç§»é‡åŒ…å«åœ¨ç¬¬å››ä¸ªæ ‡å¤´å•è¯ä¸­ã€‚ ç¬¬ä¸€è¡Œæ˜¯ç®€ä»‹ï¼š </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bih_hdr_t</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> unknown[<span class="hljs-number"><span class="hljs-number">3</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> text_offset; } <span class="hljs-keyword"><span class="hljs-keyword">bih_hdr_t</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> r1_bih[<span class="hljs-number"><span class="hljs-number">12288</span></span>]; assert(resource_manager_load(<span class="hljs-string"><span class="hljs-string">"R1.BIH"</span></span>, r1_bih)); <span class="hljs-keyword"><span class="hljs-keyword">bih_hdr_t</span></span> *hdr = (<span class="hljs-keyword"><span class="hljs-keyword">bih_hdr_t</span></span>*)r1_bih; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *intro = r1_bih + hdr-&gt;text_offset;</code> </pre> <br><p> æ­¤å¤–ï¼Œä¾é åŸå§‹æ–‡æ¡£ï¼Œæˆ‘å®ç°äº†å°†åŸå§‹å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºå­å­—ç¬¦ä¸²çš„è¿‡ç¨‹ï¼Œä»¥ä½¿å®ƒä»¬é€‚åˆç”¨äºæ–‡æœ¬è¾“å‡ºçš„åŒºåŸŸï¼Œåœ¨è¿™äº›è¡Œä¸­æ»šåŠ¨ï¼Œå¹¶åœ¨å‘å‡ºä¸‹ä¸€æ‰¹ä¹‹å‰ç­‰å¾…è¾“å…¥ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">GIFç®€ä»‹</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/uk/oa/ag/ukoaagah17k7eegsy4unobeskbg.gif"></div></div><br><hr><br><p> åœ¨å‡ºç‰ˆæ—¶ï¼Œé™¤äº†å·²ç»æè¿°çš„ä¸‰éƒ¨åˆ†å†…å®¹å¤–ï¼Œæˆ‘è¿˜å¼„æ¸…æ¥šäº†å£°éŸ³çš„å†ç°ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™åªæ˜¯æˆ‘çš„è„‘æµ·ï¼Œåœ¨æˆ‘çš„é¡¹ç›®ä¸­è¦èŠ±äº›æ—¶é—´æ‰èƒ½å®ç°ã€‚ å› æ­¤ï¼Œç¬¬å››éƒ¨åˆ†å¯èƒ½å®Œå…¨ä¸å£°éŸ³æœ‰å…³ã€‚ æˆ‘è¿˜è®¡åˆ’è®²ä¸€äº›æœ‰å…³è¯¥é¡¹ç›®çš„ä½“ç³»ç»“æ„ï¼Œä½†è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„è¿›å±•æƒ…å†µã€‚ </p><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¥ç»å·«å¸ˆçš„åé¢ã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬4éƒ¨åˆ†ï¼šå£°éŸ³ï¼ŒåŠ¨ç”»ï¼Œéœå¤«æ›¼ï¼ŒGithub</a> </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN415555/">https://habr.com/ru/post/zh-CN415555/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN415545/index.html">ä½¿ç”¨PowerShellè„šæœ¬å®‰è£…Veeam Backupï¼†Replication</a></li>
<li><a href="../zh-CN415547/index.html">å…³äºOSDAYæˆ–æ‚¨éœ€è¦æ•™å­¦ç”Ÿå¦‚ä½•åœ¨ä¿„ç½—æ–¯ITå…¬å¸å·¥ä½œå¹¶ç•™åœ¨é‚£é‡Œçš„ä¸€äº›çŸ¥è¯†</a></li>
<li><a href="../zh-CN415549/index.html">ç”µåŠ¨è¸æ¿è½¦å¦‚ä½•å é¢†ç¡…è°·ï¼Œä»¥åŠä¸ºä»€ä¹ˆè®¨åŒå®ƒä»¬</a></li>
<li><a href="../zh-CN415551/index.html">VoLTE / ViLTE + Wi-Fié€šè¯éå¸¸å¤æ‚</a></li>
<li><a href="../zh-CN415553/index.html">æ¥è‡ªARæŠ€æœ¯ä¸–ç•Œçš„æ–°é²œææ–™çš„æ‘˜è¦</a></li>
<li><a href="../zh-CN415557/index.html">ç¼–è§£ç å™¨2 +ç¥ç»ç½‘ç»œ=ä¸€å¼ è½¯ç›˜ä¸Šçš„æ•´ä¸ªæ’­å®¢</a></li>
<li><a href="../zh-CN415559/index.html">å‘¼å«ä¸­å¿ƒçš„å‘å±•å†å²ï¼Œæˆ–æŠ€æœ¯å¦‚ä½•æ”¹å˜äº†è¿è¥å•†ä¸å®¢æˆ·ä¹‹é—´çš„å·¥ä½œ</a></li>
<li><a href="../zh-CN415561/index.html">å¦‚ä½•å°†äº‹ä»¶ä»Veeam Backupï¼†Replicationæ¨é€åˆ°å³æ—¶é€šè®¯ç¨‹åºä¸­</a></li>
<li><a href="../zh-CN415563/index.html">â€œæœºæ¢°â€ Scrumçš„å¤„ç†ã€‚ ç¬¬2éƒ¨åˆ†ã€‚å›¢é˜Ÿ</a></li>
<li><a href="../zh-CN415565/index.html">ä¸ºä»€ä¹ˆï¼ˆä»Šå¤©ï¼‰è¿”å›444å¹¶ä¸æ€»æ˜¯æœ‰ç”¨çš„</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>