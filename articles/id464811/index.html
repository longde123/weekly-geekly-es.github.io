<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🏫 👩🏿‍✈️ 👨🏾‍🔧 Apple Music untuk pengembang ✍🏿 🍓 🌫️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata pengantar 


 Tidak peduli seberapa dimarahi Apple untuk platform tertutup dan ekosistem itu sendiri, beberapa solusi mereka adalah pengecualian....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apple Music untuk pengembang</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464811/"><h2 id="vvodnye-slova">  Kata pengantar </h2><br><p>  Tidak peduli seberapa dimarahi Apple untuk platform tertutup dan ekosistem itu sendiri, beberapa solusi mereka adalah pengecualian.  Ada banyak layanan streaming di pasar, tetapi menyediakan SDK lengkap untuk streaming dalam produk pihak ketiga sangat kecil, untuk pasar Rusia daftar SDK yang tersedia secara resmi terbatas pada Deezer dan Apple Music.  Tentu saja, ketika Spotify datang ke pasar kami, akan ada lebih banyak SDK yang tersedia, tetapi sejauh ini ada dua pemain dan hanya satu dari mereka yang memiliki basis pengguna yang luas. </p><br><p> Kebetulan saya punya pengalaman dengan Deezer SDK untuk Android dan saat ini saya aktif bekerja dengan Apple Music SDK ( <em>MusicKit</em> ) untuk iOS.  Dan perbedaan utama dari pengalaman dengan Deezer adalah bahwa MusicKit adalah puncak gunung es, itu juga API yang tersedia untuk umum.  Tidak seperti Deezer, di mana mengulang sebagian besar fungsi aplikasi resmi hanya proses yang panjang, tidak mungkin untuk mengulangi fungsionalitas bahkan halaman web Apple Music hanya menggunakan API publik.  Bahkan jika Apple menggunakan MusicKit dalam solusinya, maka selain itu, Apple menggunakan sejumlah permintaan API tidak berdokumen dan API pribadi yang tidak diperbolehkan untuk digunakan oleh manusia. </p><br><p>  Dalam artikel ini, saya akan berbicara tentang bekerja dengan MusicKit dari sudut pandang pengembang dalam konteks penerapan <em>tugas yang</em> cukup <em>sederhana</em> : mencari katalog, menampilkan gambar dalam hasil pencarian, mendapatkan lagu, rekomendasi, dan bahkan memainkan beberapa jenis musik.  Ke depan, saya akan mengatakan bahwa banyak hal di atas akan berlaku untuk bekerja dengan Apple Music di Android dan Javascript. </p><br><p>  Jika perlu, saya siap memberikan jawaban terperinci dengan kode untuk pertanyaan di komentar. </p><a name="habracut"></a><br><h2 id="otdelim-muh-ot-kotlet">  Pisahkan lalat dari irisan daging </h2><br><p>  Saat bekerja dengan MusicKit di iOS, Anda harus berinteraksi dengan entitas berikut: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">StoreKit</a> untuk otorisasi di Apple Music dan menawarkan berlangganan layanan ( <em>rujukan jika Anda dapat berlangganan program Afiliasi</em> ) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API HTTP</a> untuk mencari dan mengambil berbagai informasi dari direktori </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">iTunes Search API</a> untuk mencari direktori iTunes ( <em>alternatif yang sangat berguna untuk HTTP API</em> ).  Apple menunjukkan batas maksimum 20 permintaan per menit, ini seringkali cukup ketika membuat permintaan dari perangkat pengguna </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Media Player</a> untuk memainkan dan mengelola antrian </li></ul><br><p>  Juga, saat menghubungkan ke program Afiliasi, Anda dapat meminta akses ke dump metadata <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Umpan Mitra Perusahaan</a> , yang direkomendasikan oleh Apple untuk digunakan alih-alih permintaan yang sering ke API Pencarian iTunes. </p><br><p>  Dan untuk berjaga-jaga, Music.app adalah aplikasi Musik di perangkat iOS, yang merupakan pemutar Musik Apple resmi. </p><br><p>  Sumber informasi, dalam mengurangi urutan utilitasnya: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Dokumentasi resmi</a> </li><li>  Cari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">semua dokumentasi</a> Apple </li><li>  Metode Eksperimen Sains <sup>1</sup> dengan API HTTP </li><li>  Konsol Pengembang di browser favorit Anda, disematkan ke halaman web entitas yang diminati di Apple Music </li><li>  Forum Pengembang Apple </li><li>  Stackoverflow </li></ul><br><h2 id="poisk-kartinki">  Cari  Gambar </h2><br><p> Cara paling jelas untuk memeriksa apakah sesuatu dapat dilakukan dalam aplikasi Anda adalah kenyataan bahwa sesuatu seperti ini tersedia di aplikasi resmi.  Di sini kita ambil, misalnya, pencarian.  Kami mencari grup "The Police" dan di <code>Music.app</code> kami memiliki foto grup dengan Sting yang tersenyum: </p><br><img alt="pencarian polisi" src="https://habrastorage.org/webt/wn/jo/31/wnjo31ts3vxptbekvmhgdmxttqq.png" width="200"><br><p>  Hebat, kami akan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API pencarian</a> .  Dalam penerbitan, kami memiliki kunci <code>artwork</code> dengan tautan <code>url</code> tertanam untuk semuanya kecuali artis.  Ini aneh.  Periksa lagi, di Music.app semuanya ada di sana.  Selain itu, antarmuka web juga memiliki foto, dan tautan ke halaman web tersedia di API mesin pencari json. </p><br><p>  ITunes Search API juga tidak <code>artistLinkUrl</code> gambar, tetapi juga menyertakan alamat halaman web dengan kunci <code>artistLinkUrl</code> di <code>artistLinkUrl</code> . </p><br><p>  Nah, apa yang harus dilakukan, Anda harus mengunduh halaman <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">web</a> dan mendapatkan alamat gambar darinya, untungnya, para pengembang berhati-hati dan mendaftarkan alamat gambar dalam meta-informasi: </p><br><pre> <code class="plaintext hljs">&lt;meta property="og:image" content="https://is5-ssl.mzstatic.com/image/thumb/Features113/v4/bb/a2/66/bba266dd-570b-bff7-d7c6-777982582964/mzl.tdrwskof.jpg/1200x630cw.png" id="ember52310559" class="ember-view"&gt;</code> </pre> <br><p>  Secara formal, kami telah melanggar aturan Apple yang melarang "pengikisan" halaman web mereka.  Faktanya, semua aplikasi pihak ketiga melakukan ini, kecuali bagi mereka yang mencari gambar menggunakan layanan pihak ketiga. </p><br><p>  Ada satu lagi minus: kami meminta halaman berukuran beberapa ratus kilobyte.  Untuk aplikasi yang sudah menggerakkan data dalam jumlah besar ( <em>memutar musik</em> ), itu dapat ditoleransi ( <em>terutama ketika Anda menganggap bahwa data ditransmisikan dalam bentuk terkompresi</em> ), tetapi dalam kasus umum itu tidak terlalu. </p><br><p>  Ukuran gambar dapat disesuaikan dengan kebutuhan Anda: di <code>url</code> terdapat template untuk penggantian ( <code>{w}</code> , <code>{h}</code> ), dan pada halaman web tautan ke gambar memiliki format yang sama, sehingga tidak ada kesulitan dalam mendapatkan gambar dengan ukuran yang tepat.  Jika Anda ingin mendapatkan gambar bulat, Anda perlu menambahkan <code>cw</code> sebelum ekstensi. </p><br><h3 id="bonus-pro-kartinki-dlya-otobrazheniya-v-pleere">  Bonus tentang gambar untuk ditampilkan di pemutar </h3><br><p>  Selama pemutaran, pemutar dari <code>Media Player</code> beroperasi pada konstruk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>MPMediaItem</code></a> , yang, khususnya, menyediakan objek <code>Artwork</code> .  Sangat nyaman untuk menampilkan gambar trek di pemain.  Satu-satunya masalah adalah bahwa, dalam praktiknya, objek ini, apa pun yang dikatakan orang, tidak memberikan gambar untuk streaming musik ( <em>yang mana pun adalah musik dari Apple Music</em> ), jadi Anda harus "memutar" <code>MPMediaItem</code> diputar dengan lagu yang ditambahkan ke antrian dan diunduh gambar mirip dengan album. </p><br><h2 id="poisk-po-zhanram">  Cari berdasarkan genre </h2><br><p>  ITunes dan aplikasi Apple Music memiliki daftar genre dan lagu-lagu top di dalamnya.  Menemukan genre seharusnya tidak sulit, karena kita dapat mencari apa saja? </p><br><p>  Ini jauh dari kasus.  API tidak mencari berdasarkan genre dan tidak menyediakan daftar genre.  Dimungkinkan untuk meminta informasi ( <em>dari nama berguna</em> ) suatu genre dengan pengenalnya, <br>  tetapi sebagian besar informasi dalam API hanya berisi nama genre, bukan pengenal. </p><br><p>  Manfaat untuk iTunes adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">membongkar semua genre</a> ( <em>semuanya, termasuk "genre" aplikasi seluler</em> ).  Pengidentifikasi genre ( <em>seperti pengidentifikasi lainnya dari iTunes</em> ) sepenuhnya sesuai dengan pengidentifikasi di Apple Music.  Bongkar tersedia untuk semua wilayah ( <em>wilayah ditunjukkan dalam kunci <code>cc</code> , bukan <code>storefront</code> seperti di Apple Music API</em> ), tetapi pada kenyataannya hanya nama-nama yang berbeda ( <em>diterjemahkan</em> ).  Struktur genre bersifat hierarkis dan ada pengulangan nama-nama genre. </p><br><p>  Secara umum, pencarian berdasarkan genre harus dilakukan secara lokal, dan perlu diingat bahwa funk jazz, funk jazz, dan funk jazz adalah satu dan sama.  Tidak sulit, tetapi tidak sesederhana meminta API pencarian untuk mencari berdasarkan genre. </p><br><p>  Setelah menemukan genre, Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">meminta grafik</a> ( <em>daftar lagu paling populer</em> ) untuk genre ini.  Untuk genre yang langka, sangat mungkin untuk mendapatkan dalam rilis hanya 3 lagu. </p><br><p>  Fakta menyenangkan: untuk beberapa album dan artis ( <em>Ed Sheeran dari yang terkenal</em> ), salah satu genre hanya menunjukkan genre "Musik" tingkat atas.  Jika Anda ingin membuat rekomendasi berdasarkan genre, maka genre ini harus diabaikan. </p><br><h2 id="pesni-artistov">  Lagu Artis </h2><br><p>  Ketika sebuah aplikasi perlu memainkan lagu-lagu dari seorang artis ( <em>grup musik</em> ) paling sering ini berarti bahwa perlu untuk memainkan lagu-lagu <em>populer</em> dari grup ini.  Apple Music memungkinkan untuk meminta lagu sebagai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tautan</a> "lagu" <sup>2</sup> untuk artis tersebut.  Outputnya memiliki maksimal 20 lagu <sup>3</sup> , jelas diurutkan berdasarkan popularitas. </p><br><p>  Terkadang Anda masih ingin mendapatkan lebih banyak lagu.  Dengan grup yang sangat populer, ada opsi untuk mendapatkan daftar putar seperti " <em>[Nama Artis]:</em> <em>Esensial</em> " dan " <em>[Nama Artis]: Detail</em> " (" <em>[Nama Artis]: Langkah Berikutnya</em> "), tetapi secara umum, opsi ini tidak cocok.  Pilihan lain: ambil 20 lagu populer, dan selesaikan sisanya dari album, manfaat Apple Music memungkinkan untuk segera mendapatkan semua album artis ( <em>tautan seperti <code>albums</code></em> ) dan semua lagu di dalamnya ( <code>include="tracks"</code> ) dalam satu permintaan. </p><br><p>  Tetapi jika Anda mendapatkan semua lagu artis, maka masalah lain muncul: Anda harus memilih yang populer dari semua lagu ini.  Sayangnya, API informasi popularitas tidak menyediakan <sup>4</sup> .  Anda dapat mengambil lagu-lagu acak dari seluruh daftar, tetapi dalam praktiknya pendekatan ini mengarah pada pemutaran rekaman yang sama sekali tidak menarik ( <em>transkrip langsung, rekaman latihan, pertapa, dll.</em> ), Yang terutama terlihat dalam grup yang sangat populer <sup>5</sup> . </p><br><p>  Mari kita coba dapatkan lagu-lagu populer dengan cara yang berbeda.  Bahkan sebelum munculnya MusicKit, Apple mulai menyediakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API pencarian</a> di iTunes Store.  Seperti yang telah disebutkan, katalog di Apple Music dan iTunes Store adalah sama <sup>6</sup> dan, karenanya, pengidentifikasi lagu juga sama.  API ini mengembalikan 50 lagu secara default, tetapi Anda dapat meminta hingga 200 lagu.  Hasilnya juga diurutkan berdasarkan popularitas. </p><br><p>  Menariknya, Apple sendiri tidak menggunakan opsi ini di antarmuka webnya sendiri.  Mereka menggunakan API <sup>7 yang</sup> tidak berdokumen ( <em>baca, pribadi</em> ), yang dalam penerbitannya ada semua yang hilang, termasuk pengidentifikasi ( <em>dan bukan hanya nama</em> ) dari genre dan indeks popularitas.  Saya tidak berani menggunakan API ini dalam praktik <sup>8</sup> , karena pengidentifikasi genre dapat diperoleh dengan pencarian terbalik dengan nama genre <sup>9</sup> , dan indeks popularitas numerik tidak begitu penting ketika Anda mendapatkan daftar lagu yang diurutkan berdasarkan popularitas. </p><br><p>  Fakta lucu yang saya sebut " <em>masalah Hugh Laurie</em> " adalah bahwa katalog Apple Music memiliki banyak konten non-musik.  Secara khusus, berbagai kompilasi dari pertunjukan komedi dan stand-up.  Ini bagus di satu sisi ( <em>kami membayar untuk musik, tetapi kami juga punya dialog lucu dengan Stephen Fry yang dapat Anda dengarkan sebelum tidur</em> ), dan di sisi lain, itu mengarah ke semacam obrolan ketika diminta untuk menyalakan musik.  Dengan demikian, ketika konteks operasi aplikasi secara langsung menunjukkan bahwa pengguna ingin mendengarkan musik, seseorang harus secara independen menghapus dari daftar " <em>lagu</em> " yang genre-nya ditetapkan sebagai " <em>kata yang diucapkan</em> " dan " <em>komedi</em> ". </p><br><h2 id="rekomendacii">  Rekomendasi </h2><br><p>  Rekomendasi pemutaran (mereka juga " <em>lagu serupa</em> ", " <em>stasiun radio</em> ", " <em>Anda akan menyukainya</em> ", dll.) Telah menjadi fungsi dasar pemain streaming.  Secara konvensional, rekomendasi dapat dibagi menjadi dua jenis <sup>10</sup> : untuk pengguna ( <em>berdasarkan pada sejarah mendengarkan, pembelian dan suka</em> ) dan untuk objek musik ( <em>artis, trek, album dan playlist yang lebih jarang</em> ). </p><br><p>  Dengan preferensi pengguna di Apple Music, secara formal, <sup>11</sup> semuanya baik-baik saja: Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">meminta daftar</a> rekomendasi pribadi, yang mencakup " <em>campuran pribadi</em> " ( <em>daftar putar</em> ) dan album yang direkomendasikan.  Dari album, daftar lagu dapat diperoleh dengan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>API   ( tracks</code> )</a> , untuk daftar putar yang serupa.  Ingatlah bahwa trek tidak hanya mencakup lagu ( <code>type = "songs"</code> ), tetapi juga klip video, sehingga pemfilteran tambahan dari data yang diterima tidak akan merugikan. </p><br><p>  Dengan rekomendasi lain, semuanya menjadi sedikit lebih rumit.  Jika Anda melihat Music.app, maka " <em>artis serupa</em> " ditampilkan di sana dan Anda dapat menghidupkan " <em>stasiun radio</em> " untuk artis ini.  Yang terakhir kehilangan campuran dari artis dan rekomendasi kepadanya. </p><br><img alt="Polisi serupa" src="https://habrastorage.org/webt/lr/yr/e2/lryre2qusu_88h-xyvna4_gs8kc.png" width="200"><br><p>  Tampaknya semuanya sederhana: untuk seniman mungkin ada koneksi " <em>artis serupa</em> ".  Saya segera kesal, tidak ada koneksi seperti itu.  Juga tidak ada informasi kesamaan dalam skema data Umpan Mitra Perusahaan. </p><br><p>  Oke, jadi kami dapat meminta " <em>stasiun radio</em> " untuk artis dan mendapatkan daftar lagu?  Dan lagi, tidak, kami benar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">-</a> benar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dapat</a> meminta stasiun radio, pengenalnya adalah dalam penerbitan koneksi artis.  Tetapi dalam informasi stasiun tidak ada informasi tentang lagu, album atau artis yang diputar, hanya ada objek layanan dengan informasi untuk memainkan <code>playParams</code> .  Gagasan dengan <code>playParams</code> sederhana: kami memasukkan kamus ini ke dalam antrian pemutaran dan mendengarkan. </p><br><p>  Ini semua baik jika Anda ingin memainkan hanya stasiun radio ( <em>seperti Music.app lakukan</em> ), tetapi bagaimana jika Anda ingin mencampur lagu dari stasiun radio <sup>13</sup> dengan sesuatu yang lain?  Jelas, entah bagaimana kita perlu mendapatkan daftar artis serupa. </p><br><p>  Di <code>Media Player</code> , mainkan antrian memainkan peran penting, khususnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MPMusicPlayerControllerMutableQueue</a> .  Antrian memungkinkan Anda untuk: menyisipkan deskriptor setelah objek yang dapat diputar tertentu, menghapus objek yang ditentukan, dan juga mendapatkan daftar semua objek dalam antrian.  Saat meminta objek untuk output, kita harus mendapatkan array dari <code>MPMediaItem</code> .  Dan <code>MPMediaItem</code> , khususnya, termasuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pengidentifikasi lagu tersebut</a> .  Hanya ada satu masalah: konstruktor antrian bukan API publik, saya akan terjemahkan: <code>Media Player</code> dapat memberikan antrian yang sudah jadi (terkadang <em>dapat diedit</em> ), tetapi tidak mungkin membuatnya sendiri <sup>14</sup> . </p><br><p>  Nah, menggali sedikit ke arah tongkat penyangga bisa membantu.  Jika <code>Media Player</code> dapat memberi saya antrian variabel, maka saya harus menerimanya.  Untuk melakukan ini, Anda harus bekerja dengan pemain ( <em>singleton</em> ) saat ini, jadi Anda harus bertindak cepat, jika tidak pengguna akan kehilangan sesuatu yang salah, dan pemain masih akan memiliki waktu untuk memuat ulang lagu yang tidak perlu sejauh ini.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kami mengubah</a> antrean pemutaran saat ini ( <em>tambahkan deskriptor stasiun</em> ), lihat apa yang terjadi, putar kembali perubahan dalam antrian dengan transaksi baru ( <em>hapus apa yang sebenarnya ditambahkan ke antrian</em> ). </p><br><p>  Sayangnya, kami menemukan bahwa hanya dua objek <code>MPMediaItem</code> yang <code>MPMediaItem</code> ke antrian.  Keduanya terlihat seperti lagu ( <em>ada nama artis, nama trek, panjang lagu</em> ), tetapi tidak termasuk pengidentifikasi lagu.  Jika Anda melihat Music.app, kami menemukan bahwa semuanya menyatu di sana: menyalakan stasiun radio akan memutar lagu, dan dalam antrean hanya ada satu lagu untuk diputar.  Ketika Anda pindah ke lagu berikutnya, antrian diperbarui. </p><br><p>  Tidak masuk akal untuk mencoba membangun kruk dengan stasiun radio lebih lanjut, Anda harus menggunakan opsi lain. </p><br><p>  Ingatlah bahwa, di Music.app dan antarmuka web, artis serupa ditampilkan.  Artis serupa hanya tersedia untuk band paling populer <sup>15</sup> .  Sekali lagi, Anda harus menggunakan metode terlarang untuk mem-parsing halaman web.  Dari pro: kami sudah mengunduh halaman web untuk mendapatkan gambar, jadi kami bisa mendapatkan artis serupa dari itu segera. </p><br><p>  Dalam kode halaman html, kita melihat objek json besar, dari mana kita pertama-tama mengambil pengidentifikasi artis serupa ( <code>["data"]["relationships"]["artistContemporaries"]</code> ): </p><br><img alt="data halaman web" src="https://habrastorage.org/webt/xg/o-/yx/xgo-yxn-dh73gqcd8zieowzam3y.png" width="200"><br><p>  dan kemudian menggunakan pengidentifikasi ini kita mendapatkan data artis dari json yang sama ( <code>["included"]</code> dengan jenis <code>lockup/artist</code> ): </p><br><img alt="halaman web disertakan" src="https://habrastorage.org/webt/j8/du/my/j8dumysqer6_oh9wlj_8geroip4.png" width="300"><br><p>  Memiliki pengidentifikasi seniman, kami dapat meminta lagu mereka.  API memungkinkan Anda untuk meminta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">beberapa artis</a> dengan pengidentifikasi mereka dalam satu permintaan dengan tautan yang diaktifkan.  Sayangnya, dalam praktiknya, API mengembalikan kesalahan yang menunjukkan ketidakmungkinan menambahkan daftar trek ke hasilnya.  Ini hanya dapat dilakukan dengan meminta artis satu per satu atau dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">secara langsung meminta lagu</a> untuk satu artis.  Dalam hal ini, Anda dapat menggunakan iTunes Search API yang telah disebutkan, yang akan memberikan sedikit informasi yang lebih berguna. </p><br><p>  Daftar " <em>artis serupa</em> " di Apple Music cukup bagus, tetapi dalam praktiknya mereka sering berubah menjadi kosong.  Dalam situasi daftar rekomendasi yang kosong, Anda harus menggunakan layanan pihak ketiga.  Klasik - Last.fm, sedikit lebih canggih - Spotify.  Hasil keduanya harus sesuai dengan objek dalam katalog Apple Music.  Solusi "di dahi" adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mencari setiap artis</a> dengan nama dengan tepat satu hasil dan kemudian menerima lagu-lagu seperti yang dijelaskan di atas.  Solusinya sedikit lebih menarik, tetapi lebih mahal menggunakan musicbrainz untuk pencocokan.  Musicbrainz memberikan informasi tentang pengidentifikasi <sup>16</sup> di layanan lain, yaitu  Anda dapat mengaitkan pengenal di Spotify dengan pengenal di Apple Music.  Situasi dengan Last.fm bahkan lebih baik: Last.fm mengembalikan pengidentifikasi dari musicbrainz dalam daftar rekomendasi.  Overhead terletak pada batas penggunaan musicbrainz, dengan banyak lalu lintas yang harus Anda naikkan sendiri dari musicbrainz (untungnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ini mungkin</a> ) atau kembangkan API Anda sendiri di sekitar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">basis data</a> , kesedihannya dapat dengan mudah diunduh. </p><br><p>  Untuk grup baru, bahkan Last.fm tidak akan memberikan rekomendasi, opsi alternatif akan menjadi rekomendasi "genre".  Kami mengambil genre artis ( <em>berdasarkan nama kami mendapatkan pengidentifikasi dari daftar semua genre yang sudah dimuat</em> ), kami mendapatkan grafik untuk setiap genre, kami mencampur lagu yang diterima.  Ini lebih baik daripada tidak sama sekali. </p><br><h2 id="dve-veschi-nerazluchnye-pleer-i-ochered">  Dua hal tidak dapat dipisahkan: pemain dan antrian </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Media Player</a> bertanggung jawab untuk bermain di iOS dari Apple Music, memungkinkan Anda untuk bekerja dengan musik dari Apple Music dan direktori pribadi pengguna <sup>17</sup> .  Kerangka kerja ini tingkat tinggi dan dalam situasi bekerja dengan konten streaming turun ke tingkat di bawah <sup>18</sup> tidak akan berfungsi. </p><br><p>  Kerangka kerja ini menyediakan dua pemain dengan antarmuka perangkat lunak yang umum: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">satu</a> memainkan musik secara langsung di aplikasi Music.app, dan yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lainnya</a> bekerja kurang lebih secara independen.  Menggunakan yang pertama untuk sesuatu yang serius tidak ada gunanya <sup>19</sup> .  Dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> dengan berani terletak <sup>20</sup> bahwa pemain kedua tidak bekerja di latar belakang </p><br><p>  Dari sisi arsitektur, bekerja dengan masalah ini sederhana: kami memberi tahu pemain apa yang harus diputar ( <em>misalnya, mengisi antrian, berdasarkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">array pengidentifikasi lagu</a></em> ) dan mengontrol pemutaran ( <em>putar, jeda, berikutnya, sebelumnya</em> ). </p><br><p>  Tidak ada kontrol langsung dari antrian pemutaran, Anda perlu melakukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">perubahan transaksional</a> , yang membutuhkan waktu.  Pada saat yang sama, seringkali handler handler <code>completionHandler</code> dipanggil dengan kesalahan batas waktu, yang diterjemahkan sebagai " <em>Saya tidak tahu apakah saya bisa melakukan sesuatu atau apakah saya melakukan sesuatu yang lain, tetapi saya lelah menunggu diri saya sendiri</em> ."  Paling sering, transaksi berjalan dengan baik, dan kesalahan yang datang ke pawang harus diabaikan.  Beberapa perubahan dapat dilakukan pada tingkat yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sedikit lebih</a> tinggi, namun, jika Anda sudah harus menggunakan perubahan transaksional, maka lebih baik menggunakannya untuk semuanya. </p><br><p>  Secara umum, antrian cukup fleksibel dan, jika tidak mungkin aplikasi Anda akan bekerja dengan layanan streaming lain <sup>21</sup> kapan-kapan, maka Anda dapat melakukan banyak hal menarik dengan antrian, khususnya, menunjukkan kapan elemen mulai dimainkan dan berapa lama. </p><br><p>  Dari " <em>minus</em> " lain dari pendekatan tingkat tinggi semacam itu, perlu dicatat ketidakmampuan untuk memproses tindakan pengguna.  Menekan pengguna pada headset tombol " <em>lagu berikutnya</em> " tidak akan mengarah pada permintaan untuk program " <em>apa yang harus saya lakukan</em> ", pemain lebih tahu apa yang harus dilakukan dan beralih lagu sendiri.  Jadi Anda hanya bisa menangkap perubahan yang benar-benar dilakukan dalam keadaan pemain dan membuat beberapa keputusan setelah fakta. </p><br><p>  Di sisi lain, Anda tidak perlu berbuat banyak: informasi tentang bermain di layar kunci ada di sana dan semua tombol di dalamnya berfungsi, Apple Watch dan Siri dapat mengontrol pemutaran, dan streaming melalui AirPlay ke Apple TV berfungsi di luar kotak <sup>22</sup> . </p><br><p>  Dimungkinkan untuk mengulangi fungsionalitas dan antarmuka antrian Music.app di aplikasi Anda, tetapi kesederhanaan elemen drag'n'drop antrian ternyata berubah menjadi transaksi juggling untuk mengubah antrian dan menyinkronkan antrian yang diinginkan dan antrian nyata dari <sup>23</sup> pemain. </p><br><h2 id="para-slov-pro-sdk-dlya-drugih-platform">  Beberapa kata tentang SDK untuk platform lain </h2><br><p>  Sebenarnya, bekerja dengan API tidak berbeda pada platform lain, tetapi SDK tidak sepenuhnya disalin karbon dengan iOS dan, di beberapa tempat, lebih nyaman <sup>24</sup> , meskipun gagasan umum tentang antrian tandem dan pemutar tetap ada. </p><br><p>  Jadi, di Android, Anda bisa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mendapatkan antrian saat ini</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memindahkan elemen antrian</a> tanpa trik dengan perubahan transaksinya ( <em>menghapus dari antrian dan menambahkan ke tempat yang tepat dengan jari disilangkan</em> ). </p><br><p>  MusicKit JS juga menyediakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">metode pembungkus khusus</a> untuk bekerja dengan Apple Music API, <br>  tetapi saat menggunakan pembungkus Anda tidak dapat melakukannya tanpa membaca dokumentasi untuk API itu sendiri.  Bekerja dengan antrian dan pemutar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tidak lebih nyaman daripada SDK iOS</a> , tetapi dengan add-on kecil itu <a href="">bisa menjadi tertahankan</a> . </p><br><h2 id="para-slov-o-simulyatore">  Beberapa kata tentang simulator </h2><br><p>  Anda dapat bekerja di simulator dengan MusicKit hanya dalam konteks berkomunikasi dengan API HTTP, tetapi bahkan dalam kasus ini Anda harus menstabilkan token pengguna untuk melakukan permintaan, dan tidak mendapatkannya melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">StoreKit</a> .  Sangat tidak mungkin memainkan musik dari Apple Music di simulator, karena aplikasi Music.app tidak ada. </p><br><p>  Bahkan, Anda harus mengembangkan add-on Anda sendiri di atas SDK dan, ketika berjalan di simulator, gunakan implementasi ( <em>tiruan</em> ) alternatif.  Bahkan, selama pengembangan, simulator hanya berguna untuk bekerja pada antarmuka pengguna.  Abstraksi sendiri juga akan berguna dalam tangkapan layar otomatis untuk aplikasi ( <em>dan memang saat membuat tangkapan layar menggunakan simulator</em> ), karena memiliki kedua generasi iPad Pro "besar" di gudang senjata hanya untuk mengambil tangkapan layar pemain Anda di keduanya sangat tidak menguntungkan dan bodoh . </p><br><p>  Sebagai percobaan yang menarik, tetapi tidak terlalu berguna, Anda dapat membuat implementasi alternatif dari pemain tingkat tinggi Anda sendiri berdasarkan MusicKit JS. </p><br><h2 id="pro-enterprise-partner-feed">  Tentang Umpan Mitra Perusahaan </h2><br><p>  Di satu sisi, Apple menyediakan dump metadata berdasarkan permintaan dan mengatakan untuk menggunakannya untuk mengurangi beban pada API dan mendapatkan informasi yang tidak dimiliki API.  Di sisi lain, kami memiliki masalah yang jelas dengan ayam dan telur: akses ke program Afiliasi disediakan dengan menentukan tautan ke aplikasi.  Sangat sulit untuk mengembangkan aplikasi menggunakan data yang hanya dapat diperoleh dengan aplikasi yang diterbitkan di App Store. </p><br><p>  Dan, tentu saja, data tidak memberikan pendatang pertama.  Setiap aplikasi diperiksa dalam lima hari kerja.  Pada saat penulisan ini, saya belum berhasil mendapatkan setumpuk metadata di tangan saya.  Apple membungkus aplikasi saya tanpa menyebutkan alasan pastinya.  ,  -     " <em>Apple Music</em> "    ,    Apple   .   - ,      -, <em>       </em> . ,       Apple    ,    ,     . </p><br><p>       ,        ,         .             Apple Music    ( <em>      ,       </em> ),     . ,     ,     Apple Music  .         ,      ,      . </p><br><p>   Enterprise Partner Feed     : </p><br><ul><li>          Apple Music API  iTunes Search API </li><li>      (" <em> </em> "),   -   </li><li>        </li></ul><br><h2 id="ochevidnye-sovety">   </h2><br><p>    ,  -  : </p><br><ol><li>   .     ,   ,     .   <br>     ,   .         ,    -     </li><li>   -  ,   ,            . ,       -  ,             -. </li><li> ,  SDK         ,      .  Apple <sup>25</sup>   SDK     <sup>26</sup> ,         ,   ,     API  ,   SDK    . </li><li>      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a>   " <em>code level</em> "      .      " <em>Q&amp;A</em> "  " <em>Tech Notes</em> ",     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   </a> ,      - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> . </li><li>      . ,  ,       .  API ( <em>Last.fm, musicbrainz, iTunes Search API    </em> )    IP   .       Apple Music      .        " <em></em> "       ,         <sup>27</sup> . </li><li> ,   Apple Music API,       ,   . - App Store   ,      ( <em>    </em> )     , ,  ( <em>        </em> ).     <sup>28</sup>   ,    ,          ,            <sup>29</sup> .   Apple      <sup>30</sup> . </li><li> ,  - Apple Music —   Ember.    ,   ,     html         DOM   Javascript. </li><li>   -,   ,          .          ,    . </li></ol><br><h2 id="posleslovie">  </h2><br><p>     SDK,        batch   API,          ,    « »  Apple Music.  ,     ,        SDK   .          SDK,             . </p><br><p> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> . </p><br><h2 id="bespoleznye-primechaniya">   </h2><br><p> <sup>1</sup>    ( <em> </em> ) </p><br><p> <sup>2</sup> ,       </p><br><p> <sup>3</sup> ,  Music.app  -        ( <em>   </em> ),    API   ( <em>   ""</em> )  </p><br><p> <sup>4</sup>    <code>limit</code>  : <code>Specified limit for relationship 'songs' exceeds maximum of 20</code> </p><br><p> <sup>5</sup> The Beatles </p><br><p> <sup>6</sup>    ,      Apple Music   iTunes Store.   API iTunes Store   `isStreamablez,        Apple Music  . </p><br><p> <sup>7</sup>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewArtistSeeAll?cc=ru&amp;ids=424279384&amp;section=0</a> </p><br><p> <sup>8</sup>  ,     ,  ,     iTunes    ( <em></em> )   iTunes Store </p><br><p> <sup>9</sup>             </p><br><p> <sup>10</sup>  ,       ! </p><br><p> <sup>11</sup> ,    Apple Music      :   ,        ,      </p><br><p> <sup>12</sup> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MPMusicPlayerPlayParametersQueueDescriptor</a> </p><br><p> <sup>13</sup>   Apple Music   ,    ( <em></em> )   .        . </p><br><p> <sup>14</sup> , ,    App Store </p><br><p> <sup>15</sup>    ( <em></em> )    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">( <em></em> )</a>  ( <em></em> )    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">( <em></em> )</a> .       . </p><br><p> <sup>16</sup>       -,         </p><br><p> <sup>17</sup>     ,     iTunes Store    iTunes Match </p><br><p> <sup>18</sup>        API URL   </p><br><p> <sup>19</sup>  —   -,       . ,  . </p><br><p> <sup>20</sup>  : ( <em>When your app moves to the background, the music player stops playing the current media.</em> ).       <code>AVPlayer</code> ,     ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> </a>  <code>Info.plist</code>            . </p><br><p> <sup>21</sup>              . </p><br><p> <sup>22</sup>      ,    <code>MPMediaItem</code>    </p><br><p> <sup>23</sup>           </p><br><p> <sup>24</sup>     ,   SDK    ,     ,       .    iOS <code>Media Player</code>    ,     API  . </p><br><p> <sup>25</sup>         ,      —      ,       . </p><br><p> <sup>26</sup>     SDK       ,    Apple Music. Apple    ,   . </p><br><p> <sup>27</sup>       ,      —   . ,     Enterprise Partner Feed, musicbrainz,          API.  ,       ( <em>       </em> )    .      ,         . </p><br><p> <sup>28</sup> RIP </p><br><p> <sup>29</sup>   API  Bing </p><br><p> <sup>30</sup>        </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id464811/">https://habr.com/ru/post/id464811/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id464791/index.html">Kubernetes untuk mobil: cara membuka akses pengembang ke komputer yang terpasang dan membuatnya aman</a></li>
<li><a href="../id464795/index.html">Merry Quartusel, atau bagaimana prosesor telah hidup seperti itu</a></li>
<li><a href="../id464803/index.html">"Sembunyikan www": mengapa pengembang browser utama kembali menolak untuk menampilkan subdomain</a></li>
<li><a href="../id464805/index.html">Menulis ular di iPad (pythonista)</a></li>
<li><a href="../id464809/index.html">Bagaimana kami menguji teknologi pengenalan wajah dan apa yang terjadi</a></li>
<li><a href="../id464813/index.html">Mengganti Punto Switcher, tata letak Birman dengan skrip autohotkey</a></li>
<li><a href="../id464819/index.html">Hari keenam saya dengan Haiku: di bawah tenda sumber daya, ikon dan paket</a></li>
<li><a href="../id464823/index.html">Kami mempertimbangkan gaji rata-rata seorang "ahli data data." Parsim hh.ru menggunakan panda / python</a></li>
<li><a href="../id464831/index.html">Tambahkan fungsionalitas Razor Pages ke .NET standar</a></li>
<li><a href="../id464833/index.html">Hitung Scoring de la Fer atau studi tentang penilaian kredit sebagai bagian dari memperluas wawasan seseorang. Bagian 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>