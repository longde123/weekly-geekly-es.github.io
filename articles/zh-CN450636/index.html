<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ»â€ğŸ“ ğŸ’‘ ğŸ˜– Magento 2. Monologæˆ–å¦‚ä½•ç¼–å†™æ—¥å¿— ğŸ‘©ğŸ¾â€ğŸ’» ğŸ´â€â˜ ï¸ ğŸ”</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨ç ”ç©¶Magento 2çš„å„ç§æ¨¡å—æ—¶ï¼Œæ‚¨ä¼šå‘ç°æ—¥å¿—è®°å½•çš„ä½¿ç”¨é¢‘ç‡æ¯”Magento 1å°‘å¾—å¤šã€‚è¿™ä¸»è¦æ˜¯ç”±äºæ—¥å¿—è®°å½•å˜å¾—æ›´åŠ å›°éš¾ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘æƒ³é›†ä¸­è®¨è®ºè¯¥é—®é¢˜çš„æŠ€æœ¯æ–¹é¢ï¼Œå³å¦‚ä½•è®°å½•æ•°æ®ï¼Œå¦‚ä½•å°†æ—¥å¿—å†™å…¥è‡ªå·±çš„æ–‡ä»¶ä»¥åŠä»€ä¹ˆæ˜¯Monologã€‚ 

 ç›®å½• 
 ç‹¬ç™½ 
 Magento 2ä¸­çš„åº”ç”¨ç¨‹åºåŠŸèƒ½ 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Magento 2. Monologæˆ–å¦‚ä½•ç¼–å†™æ—¥å¿—</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450636/"> åœ¨ç ”ç©¶Magento 2çš„å„ç§æ¨¡å—æ—¶ï¼Œæ‚¨ä¼šå‘ç°æ—¥å¿—è®°å½•çš„ä½¿ç”¨é¢‘ç‡æ¯”Magento 1å°‘å¾—å¤šã€‚è¿™ä¸»è¦æ˜¯ç”±äºæ—¥å¿—è®°å½•å˜å¾—æ›´åŠ å›°éš¾ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘æƒ³é›†ä¸­è®¨è®ºè¯¥é—®é¢˜çš„æŠ€æœ¯æ–¹é¢ï¼Œå³å¦‚ä½•è®°å½•æ•°æ®ï¼Œå¦‚ä½•å°†æ—¥å¿—å†™å…¥è‡ªå·±çš„æ–‡ä»¶ä»¥åŠä»€ä¹ˆæ˜¯Monologã€‚ <br><a name="habracut"></a><br><h3> ç›®å½• </h3><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç‹¬ç™½</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Magento 2ä¸­çš„åº”ç”¨ç¨‹åºåŠŸèƒ½</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®ä½œ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨æ ‡å‡†è®°å½•å™¨è¿›è¡Œè®°å½•</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨å¸¦æœ‰è‡ªå®šä¹‰æ¸ é“çš„æ ‡å‡†è®°å½•å™¨è¿›è¡Œè®°å½•</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨è‡ªå·±çš„å¤„ç†ç¨‹åºå†™å…¥è‡ªå®šä¹‰æ–‡ä»¶</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨virtualTypeå†™å…¥è‡ªå®šä¹‰æ–‡ä»¶</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¿«é€Ÿæ•°æ®è®°å½•</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»“è®º</a> <br></blockquote><a name="monolog"></a><h2> ç‹¬ç™½ </h2><br> è®©æˆ‘ä»¬ä»æœ€é‡è¦çš„é—®é¢˜å¼€å§‹-ä»€ä¹ˆæ˜¯Monologï¼Œå®ƒæ¥è‡ªå“ªé‡Œã€‚ <br><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Monolog-</a></b>è¿™æ˜¯ä¸€ä¸ªå®ç°PSR-3æ ‡å‡†ä»¥è¿›è¡Œæ•°æ®è®°å½•çš„åº“ã€‚  Magento 2ä¸­ä½¿ç”¨çš„æ˜¯Monologæ¥è®°å½•æ—¥å¿—ã€‚ <br><br> åè¿‡æ¥ï¼Œ <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PSR-3</a></b>æ˜¯æè¿°æ•°æ®è®°å½•çš„é€šç”¨æ–¹æ³•çš„æ ‡å‡†ï¼Œä»¥åŠå®ç°å…·æœ‰å…¬å…±æ¥å£çš„è®°å½•å™¨çš„å»ºè®®ã€‚ <br><br><a name="psr-3"></a><div class="spoiler">  <b class="spoiler_title">PSR-3äº®ç‚¹</b> <div class="spoiler_text"><blockquote> <b>1.</b>è®°å½•å™¨ï¼ˆå¯¹è±¡ï¼‰å¿…é¡»å®ç°\ Psr \ Log \ LoggerInterfaceæ¥å£ã€‚ <br>  <b>2.</b>æˆ‘ä»¬æœ‰ä»¥ä¸‹é”™è¯¯çº§åˆ«ï¼ˆæŒ‰ä»é«˜åˆ°ä½çš„ä¼˜å…ˆçº§é¡ºåºæ˜¾ç¤ºï¼‰ï¼š <br>  <i><b>ç´§æ€¥</b> -ç³»ç»Ÿæ— æ³•ä½¿ç”¨ã€‚</i> <br>  <i><b>è­¦æŠ¥</b> -å¿…é¡»ç«‹å³é‡‡å–è¡ŒåŠ¨ã€‚</i>  <i>ä¾‹å¦‚ï¼šæ•´ä¸ªç½‘ç«™å…³é—­ï¼Œæ•°æ®åº“ä¸å¯ç”¨ç­‰ã€‚</i> <br>  <i>ä¸¥é‡-ä¸¥é‡æƒ…å†µã€‚</i>  <i>ç¤ºä¾‹ï¼šåº”ç”¨ç¨‹åºç»„ä»¶ä¸å¯ç”¨ï¼Œæ„å¤–å¼‚å¸¸ã€‚</i> <br>  <i><b>é”™è¯¯</b> -è¿è¡Œæ—¶é”™è¯¯ï¼Œä¸éœ€è¦ç«‹å³é‡‡å–æªæ–½ï¼Œä½†é€šå¸¸åº”å¯¹å…¶è¿›è¡Œç›‘è§†ã€‚</i> <br>  <i><b>è­¦å‘Š</b> -å¹¶éé”™è¯¯çš„å¼‚å¸¸äº‹ä»¶ï¼Œä¾‹å¦‚ï¼šä½¿ç”¨å·²å¼ƒç”¨çš„APIã€‚</i> <br>  <i><b>æ³¨æ„</b> -æ­£å¸¸ä½†é‡è¦çš„äº‹ä»¶ã€‚</i> <br>  <i><b>ä¿¡æ¯</b> -æœ‰è¶£çš„äº‹ä»¶ã€‚</i>  <i>ç¤ºä¾‹ï¼šç”¨æˆ·ç™»å½•ï¼ŒSQLç™»å½•ã€‚</i> <br>  <i><b>DEBUG-</b>è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ã€‚</i> <br><br>  <b>3.</b>æ¯ä¸ªçº§åˆ«éƒ½æœ‰è‡ªå·±çš„æ–¹æ³•ï¼ˆè°ƒè¯•ï¼Œä¿¡æ¯ï¼Œé€šçŸ¥ï¼Œè­¦å‘Šï¼Œé”™è¯¯ï¼Œä¸¥é‡ï¼Œè­¦æŠ¥ï¼Œç´§æ€¥/ç´§æ€¥æƒ…å†µï¼‰ï¼Œå¹¶ä¸”è¿˜åº”è¯¥æœ‰ä¸€ä¸ªæ—¥å¿—æ–¹æ³•ï¼Œå®ƒå°†é”™è¯¯çº§åˆ«ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ <br>  <b>4.è¿™äº›</b>æ–¹æ³•æ¥å—å­—ç¬¦ä¸²æˆ–ä»»ä½•å®ç°__toStringï¼ˆï¼‰çš„ä¸œè¥¿ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨å¿…é¡»ä¸ºæ•°ç»„æ‰‹åŠ¨ä½¿ç”¨print_rï¼ˆ$ messageï¼Œtrueï¼‰ï¼Œæˆ–è€…å°†å®ƒä»¬ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªå‚æ•°ä¸­ï¼‰ã€‚ <br>  <b>5.</b>æ‰€æœ‰æ–¹æ³•éƒ½æ¥å—$ä¸Šä¸‹æ–‡æ•°ç»„æ¥è¡¥å……æ—¥å¿—ã€‚ <br>  <b>6.</b>å¯ä»¥ä½†ä¸ä¸€å®šè¦å®ç°å°†$ä¸Šä¸‹æ–‡æ•°ç»„ä¸­çš„æ•°æ®æ›¿æ¢ä¸ºæ¶ˆæ¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨{name}æ ¼å¼ï¼Œå…¶ä¸­name-&gt; $ä¸Šä¸‹æ–‡ä¸­æ•°ç»„çš„é”®ã€‚ <br></blockquote><br></div></div><br>  Monologéå¸¸æ˜“äºä½¿ç”¨ã€‚ è®©æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚ <br><br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">StreamHandler</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Formatter</span></span>\<span class="hljs-title"><span class="hljs-title">HtmlFormatter</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     "name" $log = new Logger('name'); //  ,      "path/to/your1.log"       "WARNING"   (notice, info  debug   ). $log-&gt;pushHandler(new StreamHandler('path/to/your1.log', Logger::WARNING)); //  ,      "path/to/your2.log"       "ALERT"   (..        alert  emergency).    ,    .         html   HtmlFormatter. $log-&gt;pushHandler(new StreamHandler('path/to/your2.log', Logger::ALERT,false) -&gt;setFormatter(new HtmlFormatter)); //  ,       . $log-&gt;pushProcessor(function ($record) { $record['extra']['dummy'] = 'Hello world!'; return $record; }); //   $log-&gt;warning('Foo'); $log-&gt;error('Bar',['test']); $log-&gt;info('Test'); //   ,    1     INFO //your1.log // [2019-08-12 02:57:52] name.WARNING: Foo [] ['extra'=&gt;['dummy'=&gt;'Hello world!']] // [2019-08-12 02:57:53] name.ERROR: BAR ['test'] ['extra'=&gt;['dummy'=&gt;'Hello world!']] //your2.log // , .    ALERT  EMERGENCY</span></span></code> </pre> <br> è¯·è®°ä½Monologçš„å·¥ä½œé‡ç‚¹ï¼š <br><br><ul><li>  <b>è®°å½•å™¨</b>æ˜¯æˆ‘ä»¬ç”¨æ¥è®°å½•æ—¥å¿—çš„å¯¹è±¡ã€‚ è®°å½•å™¨æœ¬èº«ä¸è®°å½•ï¼Œä½†æ˜¯ç®¡ç†å¤„ç†ç¨‹åºã€‚ å¯ä»¥åˆ›å»ºä»»ä½•æ•°å­—ã€‚ </li><li>  <b>å¤„ç†ç¨‹åº</b> -ç›´æ¥å¤„ç†æ•°æ®çš„å¯¹è±¡ã€‚ æ‚¨å¯ä»¥æ ¹æ®éœ€è¦å‘è®°å½•å™¨æ·»åŠ ä»»æ„æ•°é‡çš„å¤„ç†ç¨‹åºã€‚ æ— è®ºç»™å®šçš„å¤„ç†ç¨‹åºæ˜¯å¦èƒ½å¤Ÿå¤„ç†é”™è¯¯ï¼Œæ‰€æœ‰è¿™äº›éƒ½å°†ä¾æ¬¡è°ƒç”¨ã€‚  isHandlingæ–¹æ³•ç¡®å®šæ­¤å¤„ç†ç¨‹åºæ˜¯å¦å°†èƒ½å¤Ÿå¤„ç†æ”¶åˆ°çš„é”™è¯¯ã€‚ <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isHandling</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $record)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $record[<span class="hljs-string"><span class="hljs-string">'level'</span></span>] &gt;= <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;level; }</code> </pre><br> æˆ‘è®¤ä¸ºï¼Œä¸å¤„ç†ç¨‹åºæœ€ç›¸ä¼¼çš„æ˜¯äº‹ä»¶è§‚å¯Ÿå™¨ã€‚ <br></li><li>  <b>å¤„ç†å™¨</b> -ä»»ä½•è¢«è°ƒç”¨å®ä½“ï¼ˆå¯è°ƒç”¨ï¼‰ã€‚ ä¹Ÿè®¸å‡ ä¸ªã€‚ å®ƒä»¬æ—¢å¯ä»¥å…¨å±€åˆ†é…ï¼Œä¹Ÿå¯ä»¥ä¸ºå¤„ç†ç¨‹åºå®‰è£…ã€‚ é¦–å…ˆï¼Œå¯åŠ¨å…¨çƒå¤„ç†å™¨ã€‚ å¤„ç†å™¨çš„ä¸»è¦ä»»åŠ¡æ˜¯å‘æ—¥å¿—ä¸­æ·»åŠ å…¶ä»–æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œè¿æ¥æ‰€æ¥è‡ªçš„IPï¼Œå…¨å±€å˜é‡çš„å€¼ï¼Œæœ‰å…³ä»£ç ä½äºå“ªä¸ªgitåˆ†æ”¯ä¸Šçš„ä¿¡æ¯ï¼Œç­‰ç­‰ï¼‰ã€‚ </li><li>  <b>æ ¼å¼åŒ–ç¨‹åº</b> -åœ¨å†™å…¥ä¹‹å‰è½¬æ¢æ¶ˆæ¯è¾“å‡ºã€‚ æ¯ä¸ªå¤„ç†ç¨‹åºåªèƒ½æœ‰1ä¸ªã€‚ å¿…é¡»æ›´æ”¹æ¶ˆæ¯æ­£æ–‡çš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼Œå°†æ–‡æœ¬è½¬æ¢ä¸ºhtmlæˆ–jsonã€‚ </li><li>  Channel-è®°å½•å™¨çš„åç§°ã€‚ è®°å½•æ—¥å¿—æ—¶å°†å…¶å†™å…¥ã€‚ ç”±äºå¯ä»¥åœ¨2ä¸ªä¸åŒçš„è®°å½•å™¨ä¸­ä½¿ç”¨1ä¸ªå¤„ç†ç¨‹åºï¼ˆå®ƒå°†å¤„ç†ç¨‹åºå°†æ—¥å¿—å†™å…¥1ä¸ªç›¸åŒçš„æ–‡ä»¶ï¼‰ï¼Œå› æ­¤è¿™å°†ç¡®å®šé”™è¯¯çš„æ¥æºã€‚ </li><li>  <b>çº§åˆ«</b> -é”™è¯¯çº§åˆ«ã€‚ å¤„ç†ç¨‹åºçš„æ­¤å‚æ•°è¡¨ç¤ºå®ƒå°†å¤„ç†çš„æœ€å°é”™è¯¯çº§åˆ«ã€‚ </li><li>  <b>æ°”æ³¡</b> -æ¶ˆæ¯å¼¹å‡ºçª—å£ã€‚ å¤„ç†ç¨‹åºå¤„ç†å®Œæ¶ˆæ¯åï¼Œè®°å½•å™¨å°†æ¶ˆæ¯ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºã€‚ å¯ä»¥ä½¿ç”¨bubbleå±æ€§åœæ­¢è¯¥è¿‡ç¨‹ã€‚ å¦‚æœå¤„ç†ç¨‹åºçš„æ­¤å±æ€§å€¼ä¸ºfalseï¼ˆé»˜è®¤å§‹ç»ˆä¸ºtrueï¼‰ï¼Œåˆ™åœ¨æ­¤å¤„ç†ç¨‹åºæ‰§è¡Œå…¶å·¥ä½œï¼ˆèƒ½å¤Ÿå¤„ç†æ­¤é”™è¯¯ï¼‰ä¹‹åï¼Œå…¶ä»–å¤„ç†ç¨‹åºå°†ä¸ä¼šå¯åŠ¨ã€‚ </li><li>  <b>æ’åºé¡ºåº</b> -æ‰§è¡Œé¡ºåºã€‚ æœ€åæ·»åŠ çš„å¤„ç†ç¨‹åºå§‹ç»ˆæ˜¯ç¬¬ä¸€ä¸ªå¯åŠ¨çš„ã€‚ æ­£æ˜¯æ­¤åŠŸèƒ½ä½¿æ‚¨å¯ä»¥å®ç°ä¸€ç§æœºåˆ¶ï¼Œä»¥å®Œå…¨ç¦ç”¨è®°å½•å™¨ï¼ˆé€šè¿‡å†’æ³¡falseï¼‰ã€‚ é€šè¿‡æ„é€ å‡½æ•°æ·»åŠ çš„å¤„ç†ç¨‹åºæŒ‰æ„é€ å‡½æ•°ä¸­æŒ‡å®šçš„é¡ºåºè¿›è¡Œã€‚ </li></ul><br><blockquote> ç”±äºPSR-3ä¸å¼ºåˆ¶å¼€å‘äººå‘˜å¼ºåˆ¶æ‰§è¡Œæ–‡æœ¬ä¸­çš„è‡ªåŠ¨æ›´æ­£å€¼ï¼Œå› æ­¤Monologé»˜è®¤æƒ…å†µä¸‹ä¸æ‰§è¡Œæ­¤æ“ä½œã€‚ å¦‚æœæ‚¨ç¼–å†™-&gt; emergï¼ˆ'test 1111 {placeholder}'ï¼Œ['placeholder'=&gt;'foo']ï¼‰ï¼Œæ‚¨å°†å¾—åˆ°ä»¥ä¸‹å†…å®¹ <br>  [2019-08-12 02:57:52] main.EMERGENCYï¼štest 1111 {placeholder} {â€œ placeholderâ€ï¼šâ€œ fooâ€} [] <br><br> ä¸ºäº†ä½¿æ›¿æ¢æ­£å¸¸å·¥ä½œï¼Œæ‚¨éœ€è¦è¿æ¥ä¸€ä¸ªé™„åŠ å¤„ç†å™¨-\ Monolog \ Processor \ PsrLogMessageProcessorã€‚ <br></blockquote> å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒMonologå…·æœ‰å¤§é‡å¼€ç®±å³ç”¨çš„Formatterï¼ŒProcessorï¼ŒHandlerã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å®ƒä»¬ï¼Œä¹Ÿå¯ä»¥è‡ªå·±ç¼–å†™ã€‚ <br><br><a name="subtlety"></a><h2>  Magento 2ä¸­çš„åº”ç”¨ç¨‹åºåŠŸèƒ½ </h2><br> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Magentoå®˜æ–¹ç½‘ç«™ä¸Šï¼Œ</a>æ‚¨å¯ä»¥æ‰¾åˆ°æœ‰å…³å¦‚ä½•ä½¿ç”¨è®°å½•ä»ªçš„ä¸€èˆ¬ç¤ºä¾‹ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œæ‰€æä¾›çš„ç¤ºä¾‹å¹¶æ²¡æœ‰æ­ç¤ºæ‰€æœ‰ç»†èŠ‚ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰å›ç­”â€œå¦‚ä½•å°†æ—¥å¿—å†™å…¥æ‚¨è‡ªå·±çš„æ–‡ä»¶â€è¿™ä¸€é—®é¢˜ã€‚ å› æ­¤ï¼Œè®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°äº†è§£æ‰€æœ‰å†…å®¹ã€‚ <br><br> åœ¨Magento 1æ—¶ä»£ï¼Œå¯èƒ½æ—©æ™šæ¯ä¸ªäººéƒ½ä½¿ç”¨Mage :: logæ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨ä»£ç ä¸­éšå¤„å¯è§ï¼Œæœ€ç®€å•çš„æ—¥å¿—æ¡ç›®çœ‹èµ·æ¥åƒMage :: logï¼ˆâ€œ ALARMï¼â€ï¼ŒNullå’Œâ€œ api.logâ€ï¼‰ã€‚ ç»“æœï¼Œæˆ‘ä»¬åœ¨var / log / api.logæ–‡ä»¶ä¸­è®°å½•äº†ä»¥ä¸‹æ ¼å¼çš„è®°å½• <br><br><pre> <code class="php hljs"><span class="hljs-number"><span class="hljs-number">2019</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span>T01:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>+<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> DEBUG (<span class="hljs-number"><span class="hljs-number">7</span></span>): ALARM!</code> </pre><br>  <i>é»˜è®¤æ ¼å¼ï¼šï¼…timestamp %% priorityNameï¼…ï¼ˆï¼…priorityï¼…ï¼‰ï¼šï¼…messageï¼…ã€‚</i> <br><br> è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨Magento 2ä¸­æœ€ç®€å•çš„æƒ…å†µä¸‹è®°å½•æ•°æ®ã€‚é€šå¸¸ï¼Œæ‚¨å°†ä½¿ç”¨$ this-&gt; _ logger-&gt; infoï¼ˆ'ALARMï¼'ï¼‰;  ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœå¯¹è±¡å…·æœ‰è¿™æ ·çš„å±æ€§ï¼Œåˆ™ç»§æ‰¿ï¼‰ã€‚ <br><br> ä½œä¸ºè¿™æ ·çš„è°ƒç”¨çš„ç»“æœï¼Œæˆ‘ä»¬åœ¨var / log / system.logæ–‡ä»¶ä¸­è·å¾—ä»¥ä¸‹æ¡ç›® <br><br><pre> <code class="php hljs">[<span class="hljs-number"><span class="hljs-number">2019</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span>] main.INFO: ALARM! [] []</code> </pre><br>  <i>é»˜è®¤æ ¼å¼ä¸º[ï¼…datetimeï¼…]ï¼…channelï¼…ã€‚ï¼…Level_nameï¼…ï¼šï¼…message %% context %% extraï¼…</i> <br><blockquote> å¦‚æœå¯¹è±¡ä¸å…·æœ‰è¿™æ ·çš„å±æ€§ï¼ˆ_loggeræˆ–loggerï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆéœ€è¦å°†ä¾èµ–é¡¹\ Psr \ Log \ LoggerInterfaceæ·»åŠ åˆ°æ‚¨çš„ç±»ä¸­ï¼Œç„¶åå°†ç»“æœå¯¹è±¡å†™å…¥$ loggerå±æ€§ï¼ˆæ ¹æ®<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PSR-2ç¬¬4.2ç‚¹</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Magentoç½‘ç«™ä¸Šçš„ç¤ºä¾‹</a> ï¼‰ ã€‚ <br></blockquote> ä¸Magento 1ä¸åŒï¼Œè¿™é‡Œæœ‰æ›´å¤šç»†å¾®å·®åˆ«ã€‚ <br><br>  <b>1.è®°å½•å‚æ•°ã€‚</b> <br><br> è€ƒè™‘å¯¹writeæ–¹æ³•çš„ä¸€èˆ¬è°ƒç”¨ <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger-&gt;{level}($message, $context = []); <span class="hljs-comment"><span class="hljs-comment">//$this-&gt;_logger-&gt;log('{level}', $message, $context = []);</span></span></code> </pre><br>  <b>1ï¼‰</b>æ ¹æ®PSR-3ï¼Œ{level}æ˜¯ä¿ç•™ç”¨äºè®°å½•ç‰¹å®šé”™è¯¯çº§åˆ«ï¼ˆè°ƒè¯•ï¼Œä¿¡æ¯ï¼Œé€šçŸ¥ï¼Œè­¦å‘Šï¼Œé”™è¯¯ï¼Œä¸¥é‡ï¼Œè­¦æŠ¥ï¼Œç´§æ€¥/ç´§æ€¥æƒ…å†µï¼‰çš„æ–¹æ³•ä¹‹ä¸€ã€‚ <br>  <b>2ï¼‰</b> $ message-ä¸Magento 1ä¸åŒï¼Œå®ƒåº”è¯¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ å³  $ object-&gt; getDataï¼ˆï¼‰åœ¨è¿™é‡Œä¸èµ·ä½œç”¨ã€‚ æ•°æ®æ•°ç»„å¿…é¡»ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå‚æ•°ã€‚  \ Exceptionå¯¹è±¡æ˜¯ä¸€ä¸ªä¾‹å¤–ï¼Œå› ä¸º\ Magento \ Framework \ Logger \ Monologçš„å®ç°å•ç‹¬å¤„ç†å®ƒä»¬ï¼Œå¹¶ä¸”å¦‚æœ\ Exceptionå¯¹è±¡ä½œä¸ºæ¶ˆæ¯ä¼ é€’ï¼Œåˆ™è‡ªåŠ¨å°†-&gt; getMessageï¼ˆï¼‰è¿›ä¸€æ­¥æ»šåŠ¨ä¸º$ messageã€‚ <br>  <b>3ï¼‰</b> $ contextæ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œä¸€ä¸ªæ•°ç»„ã€‚ <br><br>  <b>2. $ this-&gt; _ loggerå±æ€§å¹¶éåœ¨æ‰€æœ‰ç±»ä¸­éƒ½å¯ç”¨ã€‚</b> <br><br>  <b>å‡ºç°</b>åœ¨ï¼šå—ï¼ŒåŠ©æ‰‹ï¼Œæ¨¡å‹ï¼Œé›†åˆç­‰ã€‚ <br> åœ¨ä»¥ä¸‹<b>ç‰ˆæœ¬</b>ä¸­<b>ä¸å¯ç”¨</b> ï¼šResourceModelï¼ŒControllerï¼ŒComandï¼ŒSetupç­‰ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">äº†è§£æœ‰å…³ResourceModelå’ŒCollectionçš„æ›´å¤šä¿¡æ¯ã€‚</b> <div class="spoiler_text">  ResourceModelå…·æœ‰_loggerå±æ€§ï¼Œä½†æœªåœ¨æ„é€ å‡½æ•°ä¸­å¡«å……ã€‚ ä»…ä½¿ç”¨\ Magento \ Framework \ Model \ ResourceModel \ AbstractResourceä¸­çš„ç§æœ‰getLoggeræ–¹æ³•å¡«å……å®ƒã€‚ ä»…å½“åœ¨commitï¼ˆï¼‰æ–¹æ³•å†…å†™å…¥æ•°æ®åº“ï¼ˆåœ¨catchå—ä¸­ï¼‰æ—¶å‡ºé”™æ—¶ï¼Œæ‰è°ƒç”¨è¯¥æ–¹æ³•ã€‚ åœ¨æ­¤ä¹‹å‰ï¼Œèµ„æºæ¨¡å‹å°†æ²¡æœ‰è®°å½•å™¨ã€‚ <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">commit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection()-&gt;commit(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection()-&gt;getTransactionLevel() === <span class="hljs-number"><span class="hljs-number">0</span></span>) { $callbacks = CallbackPool::get(spl_object_hash(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection())); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($callbacks <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $callback) { call_user_func($callback); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (\<span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span> $e) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getLogger()-&gt;critical($e); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>; } â€¦ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLogger</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> === <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger = ObjectManager::getInstance()-&gt;get(\Psr\Log\LoggerInterface::class); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger; }</code> </pre><br>  Collectionä»ä¸€å¼€å§‹å°±æœ‰è®°å½•å™¨ã€‚ å®ƒæ˜¯åœ¨æ„é€ å‡½æ•°\ Magento \ Framework \ Data \ Collection \ AbstractDbä¸­åˆ†é…çš„ï¼Œå¹¶åœ¨ä»¥åç»§æ‰¿ã€‚ <br></div></div><br> ä¸èƒ½ä¸è¯´ï¼Œä½†æ˜¯åœ¨æ§åˆ¶å™¨ä¸­ï¼Œæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥ä½¿ç”¨ObjectManagerè·å–è®°å½•å™¨ï¼ˆé€šè¿‡$ this-&gt; _ objectManagerå±æ€§ï¼‰ã€‚ ä½†è¿™å½“ç„¶ä¸æ˜¯æœ€æ­£ç¡®çš„æ–¹æ³•ã€‚ <br><br>  <b>3.é»˜è®¤è®°å½•å™¨å’Œå¤„ç†ç¨‹åºåˆ—è¡¨ã€‚</b> <br><br> åœ¨å…¨å±€di.xmlï¼ˆåº”ç”¨ç¨‹åº/etc/di.xmlï¼‰ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°\ Psr \ Log \ LoggerInterfaceç”±\ Magento \ Framework \ Logger \ Monologç±»å®ç°ï¼Œè€Œåè€…åˆç»§æ‰¿è‡ª\ Monolog \ Loggerã€‚ è®°å½•å™¨åç§°ä¸ºmainã€‚ åœ¨é‚£é‡Œä¹Ÿå®šä¹‰äº†å‡ ä¸ªå¤„ç†ç¨‹åºã€‚ <br><br><pre> <code class="xml hljs">â€¦ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">preference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Psr\Log\LoggerInterface"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Monolog"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Monolog"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>main<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"handlers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"array"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>Magento\Framework\Logger\Handler\System<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"debug"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>Magento\Framework\Logger\Handler\Debug<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"syslog"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>Magento\Framework\Logger\Handler\Syslog<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> ...</code> </pre><br> ä¸€äº›ç±»ä¸ä¸Šé¢åˆ—å‡ºçš„ç±»ä¸åŒï¼ˆå› ä¸ºå®ƒä»¬åœ¨Magento \ Developeræ¨¡å—ä¸­é‡æ–°å®šä¹‰ï¼‰ï¼š <br><br>  <b>1ï¼‰</b> Magento \ Framework \ Logger \ Handler \ Systemï¼ˆ <i>ç›‘å¬INFOï¼‰</i> <br>  <b>2ï¼‰</b> Magento \å¼€å‘äººå‘˜\æ¨¡å‹\è®°å½•å™¨\å¤„ç†ç¨‹åº\è°ƒè¯•ï¼ˆ <i>ä¾¦å¬DEBUG</i> ï¼‰ <br>  <b>3ï¼‰</b> Magento \ Developer \æ¨¡å‹\ Logger \ Handler \ Syslogï¼ˆ <i>ä¾¦å¬DEBUG</i> ï¼‰ <br><br> åœ¨æŒ‡å®šçš„ç±»ï¼ˆDebugå’ŒSyslogï¼‰ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ï¼Œæ·»åŠ äº†ç¦ç”¨æ—¥å¿—è®°å½•çš„åŠŸèƒ½</a> ï¼ˆåˆ†åˆ«æ˜¯dev / debug / debug_loggingå’Œdev / syslog / syslog_loggingï¼‰ã€‚ <br><br> è¯·æ³¨æ„ï¼Œåœ¨å¤„ç†ç¨‹åºåˆ—è¡¨ä¸­æ²¡æœ‰å†™å…¥åˆ°exception.logçš„å¼‚å¸¸å¤„ç†ç¨‹åºã€‚ åœ¨ç³»ç»Ÿå¤„ç†ç¨‹åºä¸­è°ƒç”¨å®ƒã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">Magento \ Framework \ Logger \ Handler \ç³»ç»Ÿ</b> <div class="spoiler_text"><pre> <code class="php hljs">... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $record)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($record[<span class="hljs-string"><span class="hljs-string">'context'</span></span>][<span class="hljs-string"><span class="hljs-string">'exception'</span></span>])) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;exceptionHandler-&gt;handle($record); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } $record[<span class="hljs-string"><span class="hljs-string">'formatted'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getFormatter()-&gt;format($record); <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::write($record); } ...</code> </pre><br></div></div><br><blockquote>  Magento 2åˆ°2.2 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„é—®é¢˜</a>æ˜¯è®°å½•å™¨åœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤„ç†ç¨‹åºåæ— æ³•è·³è½¬åˆ°å¦ä¸€ä¸ªå¤„ç†ç¨‹åºã€‚ æ­¤é—®é¢˜æ˜¯ç”±ä»¥ä¸‹äº‹å®å¼•èµ·çš„ï¼šMonologè®¡ç®—å‡ºï¼Œæ‰€æœ‰å¤„ç†ç¨‹åºéƒ½ä½¿ç”¨æ•°å­—é”®ç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œå¹¶å¸¦æœ‰å­—æ¯é”®ï¼ˆ['system'=&gt;ï¼Œ'debug'=&gt;ï¼Œ...]ï¼‰ã€‚  Magentoå¼€å‘äººå‘˜åæ¥çº æ­£äº†è¿™ç§æƒ…å†µ-åœ¨å°†å“ˆå¸Œä¼ é€’ç»™Monologä¹‹å‰ï¼Œä»–ä»¬ä½¿ç”¨æ•°å­—é”®å°†å“ˆå¸Œè½¬æ¢ä¸ºå¸¸è§„æ•°ç»„ã€‚  Monologç°åœ¨ä¹Ÿæ›´æ”¹äº†å¤„ç†ç¨‹åºæšä¸¾ç®—æ³•ï¼Œå¹¶ä½¿ç”¨nextï¼ˆï¼‰æ–¹æ³•ã€‚ <br></blockquote>  <b>4.å°†æ‚¨çš„å¤„ç†ç¨‹åºå¼•å…¥ç°æœ‰å¤„ç†ç¨‹åºåˆ—è¡¨ä¸­ã€‚</b> <br><br> æˆ‘ä»¬æƒ³åˆ°äº†æœ€æœ‰è¶£çš„äº‹æƒ…ï¼Œå®ƒç¨å¾®ç ´åäº†Magento 2ä¸­çš„å®ç°å°è±¡ã€‚å¦‚æœæ²¡æœ‰...â€œé™„åŠ çš„èº«ä½“è¿åŠ¨â€ï¼Œå°±ä¸èƒ½ä½¿ç”¨di.xmlå°†è‡ªå®šä¹‰å¤„ç†ç¨‹åºæ·»åŠ åˆ°ç°æœ‰å¤„ç†ç¨‹åºåˆ—è¡¨ä¸­ã€‚ è¿™æ˜¯ç”±äºåˆå¹¶é…ç½®çš„åŸç†ã€‚ <br><br> æœ‰å‡ ç§<b>é…ç½®èŒƒå›´</b> ï¼š <br><br>  <b>1ï¼‰</b>åˆå§‹ï¼ˆapp /etc/di.xmlï¼‰ <br>  <b>2ï¼‰</b>å…¨å±€ï¼ˆ{moduleDir} /etc/di.xmlï¼‰ <br>  <b>3ï¼‰</b>ç‰¹å®šäºåŒºåŸŸï¼ˆ{moduleDir} / etc / {area} /di.xmlï¼Œå³å‰ç«¯/ adminhtml / crontab / webapi_soap / webapi_restç­‰ï¼‰ <br><br> åœ¨ç¬¬1å±‚å†…éƒ¨ï¼Œé…ç½®è¢«åˆå¹¶ï¼Œä½†æ˜¯åœ¨ä¸‹ä¸€ä¸ªå±‚ä¸­é€šè¿‡mergeé‡æ–°å®šä¹‰äº†å®ƒä»¬ï¼ˆå¦‚æœåœ¨æ­¤ä¹Ÿå£°æ˜äº†å®ƒä»¬ï¼‰ã€‚ è¿™ä½¿å¾—ä¸å¯èƒ½åœ¨å…¶æ¨¡å—ä¸­å°†å¤„ç†ç¨‹åºæ·»åŠ åˆ°ç°æœ‰åˆ—è¡¨ä¸­ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨åˆå§‹ä½œç”¨åŸŸä¸­å£°æ˜çš„ã€‚ <br><br>  <i>ä¹Ÿè®¸åœ¨å°†æ¥ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªå®ç°ï¼Œåœ¨è¯¥å®ç°ä¸­ï¼Œå¤„ç†ç¨‹åºçš„æ·»åŠ å°†ä»åˆå§‹ä½œç”¨åŸŸç§»è‡³å…¶ä»–æ¨¡å—ï¼Œä»è€Œè½¬ç§»åˆ°å…¨å±€ä½œç”¨åŸŸã€‚</i> <br><br><a name="howto"></a><h2> å®ä½œ </h2><br> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è®°å½•æ—¥å¿—çš„ä¸»è¦æ–¹å¼ï¼Œè¿™å¯¹æˆ‘ä»¬åœ¨ä»»åŠ¡æ‰§è¡Œä¸­å¯èƒ½å¾ˆæœ‰ç”¨ã€‚ <br><br><a name="howto1"></a><h3>  1.ä½¿ç”¨æ ‡å‡†è®°å½•å™¨è®°å½• </h3><br> è¿™ç§æ–¹æ³•ä½¿æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åœ¨æ ‡å‡†æ—¥å¿—ä¹‹ä¸€ï¼ˆdebug.logï¼Œsystem.logæˆ–exception.logï¼‰ä¸­å†™å…¥æ—¥å¿—ã€‚ <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RandomClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $logger; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Psr\Log\LoggerInterface $logger)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger = $logger; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger-&gt;info(<span class="hljs-string"><span class="hljs-string">'Something went wrong'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//[...some date...] main.INFO: Something went wrong [] [] } }</span></span></code> </pre><br> å¦‚æœæˆ‘ä»¬çš„ç±»ä¸­å·²ç»å­˜åœ¨ç»§æ‰¿çš„è®°å½•å™¨ä¾èµ–é¡¹ï¼Œä¸€åˆ‡å°†å˜å¾—æ›´åŠ ç®€å•ã€‚ <br><br><pre> <code class="php hljs">â€¦ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger-&gt;info(<span class="hljs-string"><span class="hljs-string">'Something went wrong'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    -&gt;debug,   ,      debug.log ...</span></span></code> </pre><br><a name="howto2"></a><h3>  2.ä½¿ç”¨å¸¦æœ‰è‡ªå®šä¹‰é€šé“çš„æ ‡å‡†è®°å½•å™¨è¿›è¡Œè®°å½• </h3><br> æ­¤æ–¹æ³•ä¸å‰ä¸€ä¸ªæ–¹æ³•çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œåˆ›å»ºäº†è®°å½•å™¨çš„å…‹éš†ï¼Œå¹¶ä¸ºå…¶åˆ†é…äº†å¦ä¸€ä¸ªé€šé“ï¼ˆåç§°ï¼‰ã€‚ è¿™å°†ç®€åŒ–æ—¥å¿—æ–‡ä»¶ä¸­çš„æœç´¢ã€‚ <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RandomClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $logger; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Psr\Log\LoggerInterface $logger)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger = $logger-&gt;withName(<span class="hljs-string"><span class="hljs-string">'api'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    } public function foo() { $this-&gt;logger-&gt;info('Something went wrong'); //[...some date...] api.INFO: Something went wrong [] [] } }</span></span></code> </pre><br><br> è¦æœç´¢å¿…è¦çš„æ—¥å¿—ï¼Œç°åœ¨å°±å¯ä»¥åœ¨ç°æœ‰system.logï¼Œdebug.logï¼Œexception.logæ–‡ä»¶ä¸­ä½¿ç”¨â€œ apiâ€ï¼ˆMagento 2ä¸­çš„é»˜è®¤è®°å½•å™¨ç§°ä¸ºmainï¼‰è¿›è¡Œæœç´¢ã€‚ å¯ä»¥ä½¿ç”¨ <br><pre> <code class="bash hljs">grep -rn <span class="hljs-string"><span class="hljs-string">'api'</span></span> var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/system.log</code> </pre><br><br><a name="howto3"></a><h3>  3.ä½¿ç”¨è‡ªå·±çš„å¤„ç†ç¨‹åºå†™å…¥è‡ªå®šä¹‰æ–‡ä»¶ </h3><br> è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„å¤„ç†ç¨‹åºï¼Œå°†æ‰€æœ‰Criticalçº§åŠæ›´é«˜çº§åˆ«çš„é”™è¯¯è®°å½•åˆ°å•ç‹¬çš„æ–‡ä»¶var / log / critical.logä¸­ã€‚ æ·»åŠ äº†é’ˆå¯¹ç»™å®šçš„é”™è¯¯çº§åˆ«æˆ–æ›´é«˜çº§åˆ«é˜»æ­¢æ‰€æœ‰å…¶ä»–å¤„ç†ç¨‹åºçš„åŠŸèƒ½ã€‚ è¿™å°†é¿å…åœ¨debug.logå’Œsystem.logæ–‡ä»¶ä¸­é‡å¤æ•°æ®ã€‚ <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Oxis</span></span>\<span class="hljs-title"><span class="hljs-title">Log</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Magento</span></span>\<span class="hljs-title"><span class="hljs-title">Framework</span></span>\<span class="hljs-title"><span class="hljs-title">Filesystem</span></span>\<span class="hljs-title"><span class="hljs-title">DriverInterface</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Magento</span></span>\<span class="hljs-title"><span class="hljs-title">Framework</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">Base</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $fileName = <span class="hljs-string"><span class="hljs-string">'var/log/critical.log'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $loggerType = Logger::CRITICAL; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DriverInterface $filesystem)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($filesystem,<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;bubble = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//      setBubble() } }</span></span></code> </pre><br><blockquote> åœ¨Magento 2 2.2+ä¸­çš„æ„é€ å‡½æ•°\ Magento \ Framework \ Logger \ Handler \ Baseä¸­ï¼Œå¤„ç†æ—¥å¿—æ–‡ä»¶è·¯å¾„çš„æ–¹å¼å·²æ›´æ”¹ <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// BP . $this-&gt;fileName // BP. DIRECTORY_SEPARATOR . $this-&gt;fileName</span></span></code> </pre><br> å› æ­¤ï¼Œåœ¨è¾ƒæ—§çš„å¤„ç†ç¨‹åºä¸­ï¼Œæ‚¨ä»ç„¶å¯ä»¥åœ¨$ fileNameçš„å¼€å¤´æ‰¾åˆ°/ã€‚ <br></blockquote><br><br> ä¾‹å¦‚ï¼Œä¸€äº›è§£é‡Šæ˜¯å€¼å¾—ç»™å‡ºçš„ã€‚ ç”±äºBaseä¸å…è®¸æ‚¨é€šè¿‡æ„é€ å‡½æ•°å‚æ•°è®¾ç½®bubbleå±æ€§ï¼Œå› æ­¤æˆ‘ä»¬è¦ä¹ˆå¿…é¡»é‡å¤Baseæ„é€ å‡½æ•°ä¸­çš„éƒ¨åˆ†ä»£ç ï¼Œä»¥å°†è¾“å…¥å‚æ•°æ­£ç¡®åœ°ä¼ é€’ç»™Baseç±»çš„çˆ¶ç±»ï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼Œå®ƒå…·æœ‰ç”¨äºè®¾ç½®æ­¤å±æ€§çš„è¾“å…¥å‚æ•°ï¼‰æˆ–è¿™æ ·çš„æ–¹æ³•ã€‚ æˆ‘é€‰æ‹©äº†ç¬¬äºŒä¸ªé€‰é¡¹ã€‚ <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Oxis</span></span>\<span class="hljs-title"><span class="hljs-title">Log</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">Test</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Psr</span></span>\<span class="hljs-title"><span class="hljs-title">Log</span></span>\<span class="hljs-title"><span class="hljs-title">LoggerInterface</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RandomClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $logger; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( LoggerInterface $logger, Test $handler )</span></span></span><span class="hljs-function"> </span></span>{ $logger-&gt;pushHandler($handler); <span class="hljs-comment"><span class="hljs-comment">//  setHandlers([$handler]),        . $this-&gt;logger = $logger; } public function foo() { $this-&gt;logger-&gt;critical('Something went wrong'); //      critical.log //[...some date...] main.CRITICAL: Something went wrong [] [] } }</span></span></code> </pre><br> è¿™ç§æ·»åŠ å¤„ç†ç¨‹åºçš„æ–¹æ³•å¹¶ä¸ç†æƒ³ï¼Œä½†æ˜¯å¯ä»¥è®©æ‚¨æ‘†è„±é—®é¢˜çš„Config Scopeçš„çº¦æŸï¼Œè¿™å°†è¦æ±‚æˆ‘ä»¬å¤åˆ¶di.xmlä¸­çš„æ‰€æœ‰è®°å½•å™¨ã€‚ å¦‚æœç›®æ ‡æ˜¯ç”¨æ‚¨è‡ªå·±çš„è®°å½•å™¨æ›¿æ¢æ‰€æœ‰è®°å½•å™¨ï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨virtualTypeæ–¹æ³•ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥è€ƒè™‘ã€‚ <br><br><a name="howto4"></a><h3>  4.ä½¿ç”¨virtualTypeå†™å…¥è‡ªå®šä¹‰æ–‡ä»¶ </h3><br> è¿™ç§æ–¹æ³•ä½¿æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶ä½¿ç”¨di.xmlä¸ºæ­¤æ‰€éœ€çš„ç±»å°†æ—¥å¿—å†™å…¥æŒ‡å®šçš„æ—¥å¿—æ–‡ä»¶ã€‚ æ‚¨å¯ä»¥åœ¨Magento \ Paymentå’ŒMagento \ Shippingæ¨¡å—ä¸­æ‰¾åˆ°ç±»ä¼¼çš„æ–¹æ³•ã€‚ æˆ‘æè¯·æ‚¨æ³¨æ„ä»¥ä¸‹äº‹å®ï¼šè¯¥æ–¹æ³•ä»Magento 2 2.2åŠæ›´é«˜ç‰ˆæœ¬å¼€å§‹èµ·ä½œç”¨ã€‚ <br><blockquote> åœ¨Magento 2 2.2åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œå‘æ„é€ å‡½æ•°\ Magento \ Framework \ Logger \ Handler \ Baseä¸­æ·»åŠ äº†æ–°å‚æ•°ï¼Œè¯¥å‚æ•°å…è®¸æ‚¨åˆ›å»ºè™šæ‹Ÿå¤„ç†ç¨‹åºå¹¶é€šè¿‡di.xmlæŒ‡å®šç”¨äºå†™å…¥æ—¥å¿—çš„æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚ ä»¥å‰ï¼Œéœ€è¦é€šè¿‡$ filePathæŒ‡å®šå®Œæ•´è·¯å¾„ï¼Œæˆ–è€…åˆ›å»ºæ–°çš„å¤„ç†ç¨‹åºå¹¶å°†ç›¸å¯¹è·¯å¾„å†™å…¥å—ä¿æŠ¤çš„æ–‡ä»¶$ fileNameå±æ€§ã€‚ <br></blockquote><br> åœ¨æˆ‘ä»¬æ¨¡å—çš„di.xmlä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ <br><pre> <code class="xml hljs"> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiHandler"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Handler\Base"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fileName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>var/log/api.log<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiLogger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Monolog"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>api<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"handlers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"array"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"default"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiHandler<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Oxis\Log\Model\A"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiLogger<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> å°†è®°å½•å™¨ç±»æ·»åŠ åˆ°Oxis \ Log \ Model \Aã€‚ <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Oxis</span></span>\<span class="hljs-title"><span class="hljs-title">Log</span></span>\<span class="hljs-title"><span class="hljs-title">Model</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $logger; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Psr\Log\LoggerInterface $logger)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger = $logger; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger-&gt;info(<span class="hljs-string"><span class="hljs-string">'Something went wrong'</span></span>); } }</code> </pre><br> ç°åœ¨ï¼Œç»å¯¹ä¼šåœ¨æˆ‘ä»¬çš„ç±»ä¸­è®°å½•çš„æ‰€æœ‰æ—¥å¿—éƒ½å°†ç”±æˆ‘ä»¬çš„è®°å½•å™¨ç‰ˆæœ¬å¤„ç†ï¼Œè¯¥è®°å½•å™¨å°†ä½¿ç”¨æˆ‘ä»¬çš„å¤„ç†ç¨‹åºå°†æ—¥å¿—å†™å…¥var /log/api.logæ–‡ä»¶ã€‚ <br><br>  <b>4.1ã€‚</b>  <b>å¦‚æœè¯¥ç±»é€šè¿‡$ä¸Šä¸‹æ–‡å¯¹è±¡è€Œä¸æ˜¯é€šè¿‡å…¶æ„é€ å‡½æ•°æ¥æ”¶è®°å½•å™¨ã€‚</b> <br> è¿™å¯èƒ½åŒ…æ‹¬\ Magento \ Catalog \ Model \ Productï¼Œåœ¨å…¶ä¸­æ²¡æœ‰\ Psr \ Log \ LoggerInterfaceçš„ä¾èµ–é¡¹ï¼Œä½†æ˜¯æœ‰\ Magento \ Framework \ Model \ Contextï¼Œé€šè¿‡å®ƒå¯ä»¥å°†è®°å½•å™¨è®¾ç½®ä¸ºclasså±æ€§ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿é€‰é¡¹ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå¹¶æ›¿æ¢ä½äº$ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­çš„è®°å½•å™¨ã€‚ ä¸ºäº†ä½¿è¿™ä¸ä¼šå½±å“æ•´ä¸ªMagentoï¼Œæˆ‘ä»¬å°†åªä½¿ç”¨virtualTypeæ›¿æ¢ç±»çš„$ contextã€‚ <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiHandler"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Handler\Base"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fileName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>var/log/api.log<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiLogger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Monolog"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>api<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"handlers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"array"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"default"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiHandler<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       logger--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiLogContainingContext"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Model\Context"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiLogger<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Oxis\Log\Model\A"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"context"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiLogContainingContext<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><a name="howto5"></a><h3>  5.å¿«é€Ÿçš„æ•°æ®è®°å½• </h3><br> æœ‰æ—¶æˆ‘ä»¬éœ€è¦å¿«é€Ÿæ·»åŠ æ—¥å¿—è®°å½•ã€‚ é€šå¸¸ï¼Œåœ¨ç”Ÿäº§æœåŠ¡å™¨ä¸Šæˆ–å¿«é€Ÿæµ‹è¯•ä¸­å¯èƒ½éœ€è¦è¿™æ ·åšã€‚ <br><pre> <code class="php hljs">... $log = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \Monolog\Logger(<span class="hljs-string"><span class="hljs-string">'custom'</span></span>, [<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \Monolog\Handler\StreamHandler(BP.<span class="hljs-string"><span class="hljs-string">'/var/log/custom.log'</span></span>)]); $log-&gt;error(<span class="hljs-string"><span class="hljs-string">'test'</span></span>); ...</code> </pre><br>  <i>è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹ï¼šå†™ä¸€ä¸ªæ—¥æœŸï¼Œæœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼ˆæ•°ç»„ï¼‰ï¼Œè‡ªåŠ¨åœ¨æœ«å°¾æ·»åŠ \ n</i> <br><br> åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ\ Monolog \ Loggeræ˜¯ä¸“é—¨åº”ç”¨çš„ï¼Œè€Œä¸æ˜¯\ Magento \ Framework \ Logger \ Monologå¯¹å…¶è¿›è¡Œæ‰©å±•ã€‚ äº‹å®æ˜¯ï¼Œè¿™ç§ç”¨æ³•æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯å†™çš„æ›´å°‘ï¼ˆè®°ä½èµ·æ¥æ›´å®¹æ˜“ï¼‰ã€‚ <br><br> ä¾æ¬¡ä½¿ç”¨\ Monolog \ Handler \ StreamHandlerä»£æ›¿\ Magento \ Framework \ Logger \ Handler \ Baseï¼Œå› ä¸ºç”±äºå¯¹ç¬¬ä¸‰æ–¹ç±»çš„é™„åŠ ä¾èµ–æ€§ï¼Œä½¿ç”¨Baseä½œä¸ºä»£ç ç‰‡æ®µä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚ <br><br> å¦ä¸€ä¸ªä¸èƒ½è¯´çš„æ–¹æ³•æ˜¯æ—§çš„file_put_contentsã€‚ <br><br><pre> <code class="php hljs">... file_put_contents(BP.<span class="hljs-string"><span class="hljs-string">'/var/log/custom.log'</span></span>, <span class="hljs-string"><span class="hljs-string">'test'</span></span>,FILE_APPEND); ...</code> </pre><br>  <i>è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹ï¼šå†™å¾—ç›¸å¯¹è¾ƒå¿«ï¼Œä¸éœ€è¦è®°ä½ç±»ã€‚</i> <br><br> åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå¸¸æ•°<b>BP</b>éƒ½èµ·ç€ä¸»å¯¼ä½œç”¨ã€‚ å¥¹æ€»æ˜¯æŒ‡å‘æ´‹çº¢è‰²ï¼ˆæ¯”é…’å§é«˜1çº§ï¼‰çš„æ–‡ä»¶å¤¹ï¼Œè¿™å¾ˆæ–¹ä¾¿ï¼Œè€Œä¸”æ€»æ˜¯å¯ä»¥å¸®åŠ©æˆ‘ä»¬å°†æ—¥å¿—å†™åˆ°æ­£ç¡®çš„ä½ç½®ã€‚ <br><br><a name="fin"></a><h2> ç»“è®º </h2><br> å¸Œæœ›ä»¥ä¸Šä¿¡æ¯å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN450636/">https://habr.com/ru/post/zh-CN450636/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN450626/index.html">ä¿®å¤è®¾è®¡æ¨¡å¼-PHPä¸­çš„Singleton</a></li>
<li><a href="../zh-CN450628/index.html">Juliaï¼šå¤šé¡¹å¼çš„ç±»å‹ï¼Œå¤šé‡æ–¹æ³•å’Œç®—æœ¯</a></li>
<li><a href="../zh-CN450630/index.html">å‰ç«¯æ¯å‘¨æ‘˜è¦ï¼ˆ2019å¹´4æœˆ29æ—¥è‡³5æœˆ5æ—¥ï¼‰</a></li>
<li><a href="../zh-CN450632/index.html">768å­—èŠ‚çš„Cram Basic</a></li>
<li><a href="../zh-CN450634/index.html">ä¸Šå‘¨ç¬¬363æœŸï¼ˆ2019å¹´4æœˆ29æ—¥è‡³5æœˆ5æ—¥ï¼‰æ¥è‡ªå‰ç«¯ä¸–ç•Œçš„æ–°é²œææ–™æ‘˜è¦</a></li>
<li><a href="../zh-CN450640/index.html">å¦‚ä½•ç†è§£è‡ªå·±ç¡®å®æˆ’çƒŸ</a></li>
<li><a href="../zh-CN450642/index.html">PHPæ‘˜è¦155å·ï¼ˆ2019å¹´4æœˆ22æ—¥è‡³5æœˆ6æ—¥ï¼‰</a></li>
<li><a href="../zh-CN450644/index.html">åŠ å¯†è´§å¸ï¼šæ˜¯ç”Ÿè¿˜æ˜¯æ­»ï¼Ÿ ç¬¬ä¸‰éƒ¨åˆ†</a></li>
<li><a href="../zh-CN450648/index.html">PS2 / PSPæ¨¡æ‹Ÿå™¨+ Googleäº‘ç«¯ç¡¬ç›˜+ YouTube =â€œç–¯ç‹‚â€ç»§ç»­</a></li>
<li><a href="../zh-CN450650/index.html">ä»¥åº”ç”¨ç¨‹åºä¸ºä¸­å¿ƒçš„åŸºç¡€æ¶æ„ã€‚ æœªæ¥çš„ç½‘ç»œæ¶æ„-ä»æ¨ç†åˆ°ä¸šåŠ¡</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>