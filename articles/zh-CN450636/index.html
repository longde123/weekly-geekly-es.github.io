<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🎓 💑 😖 Magento 2. Monolog或如何编写日志 👩🏾‍💻 🏴‍☠️ 🔍</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在研究Magento 2的各种模块时，您会发现日志记录的使用频率比Magento 1少得多。这主要是由于日志记录变得更加困难。 在这里，我想集中讨论该问题的技术方面，即如何记录数据，如何将日志写入自己的文件以及什么是Monolog。 

 目录 
 独白 
 Magento 2中的应用程序功能 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Magento 2. Monolog或如何编写日志</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450636/"> 在研究Magento 2的各种模块时，您会发现日志记录的使用频率比Magento 1少得多。这主要是由于日志记录变得更加困难。 在这里，我想集中讨论该问题的技术方面，即如何记录数据，如何将日志写入自己的文件以及什么是Monolog。 <br><a name="habracut"></a><br><h3> 目录 </h3><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">独白</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Magento 2中的应用程序功能</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">实作</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用标准记录器进行记录</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用带有自定义渠道的标准记录器进行记录</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用自己的处理程序写入自定义文件</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">使用virtualType写入自定义文件</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">快速数据记录</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">结论</a> <br></blockquote><a name="monolog"></a><h2> 独白 </h2><br> 让我们从最重要的问题开始-什么是Monolog，它来自哪里。 <br><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Monolog-</a></b>这是一个实现PSR-3标准以进行数据记录的库。  Magento 2中使用的是Monolog来记录日志。 <br><br> 反过来， <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PSR-3</a></b>是描述数据记录的通用方法的标准，以及实现具有公共接口的记录器的建议。 <br><br><a name="psr-3"></a><div class="spoiler">  <b class="spoiler_title">PSR-3亮点</b> <div class="spoiler_text"><blockquote> <b>1.</b>记录器（对象）必须实现\ Psr \ Log \ LoggerInterface接口。 <br>  <b>2.</b>我们有以下错误级别（按从高到低的优先级顺序显示）： <br>  <i><b>紧急</b> -系统无法使用。</i> <br>  <i><b>警报</b> -必须立即采取行动。</i>  <i>例如：整个网站关闭，数据库不可用等。</i> <br>  <i>严重-严重情况。</i>  <i>示例：应用程序组件不可用，意外异常。</i> <br>  <i><b>错误</b> -运行时错误，不需要立即采取措施，但通常应对其进行监视。</i> <br>  <i><b>警告</b> -并非错误的异常事件，例如：使用已弃用的API。</i> <br>  <i><b>注意</b> -正常但重要的事件。</i> <br>  <i><b>信息</b> -有趣的事件。</i>  <i>示例：用户登录，SQL登录。</i> <br>  <i><b>DEBUG-</b>详细的调试信息。</i> <br><br>  <b>3.</b>每个级别都有自己的方法（调试，信息，通知，警告，错误，严重，警报，紧急/紧急情况），并且还应该有一个日志方法，它将错误级别作为第一个参数。 <br>  <b>4.这些</b>方法接受字符串或任何实现__toString（）的东西（也就是说，您必须为数组手动使用print_r（$ message，true），或者将它们传递到下一个参数中）。 <br>  <b>5.</b>所有方法都接受$上下文数组来补充日志。 <br>  <b>6.</b>可以但不一定要实现将$上下文数组中的数据替换为消息。 在这种情况下，建议使用{name}格式，其中name-&gt; $上下文中数组的键。 <br></blockquote><br></div></div><br>  Monolog非常易于使用。 让我们看下面的例子。 <br><br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">StreamHandler</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Formatter</span></span>\<span class="hljs-title"><span class="hljs-title">HtmlFormatter</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     "name" $log = new Logger('name'); //  ,      "path/to/your1.log"       "WARNING"   (notice, info  debug   ). $log-&gt;pushHandler(new StreamHandler('path/to/your1.log', Logger::WARNING)); //  ,      "path/to/your2.log"       "ALERT"   (..        alert  emergency).    ,    .         html   HtmlFormatter. $log-&gt;pushHandler(new StreamHandler('path/to/your2.log', Logger::ALERT,false) -&gt;setFormatter(new HtmlFormatter)); //  ,       . $log-&gt;pushProcessor(function ($record) { $record['extra']['dummy'] = 'Hello world!'; return $record; }); //   $log-&gt;warning('Foo'); $log-&gt;error('Bar',['test']); $log-&gt;info('Test'); //   ,    1     INFO //your1.log // [2019-08-12 02:57:52] name.WARNING: Foo [] ['extra'=&gt;['dummy'=&gt;'Hello world!']] // [2019-08-12 02:57:53] name.ERROR: BAR ['test'] ['extra'=&gt;['dummy'=&gt;'Hello world!']] //your2.log // , .    ALERT  EMERGENCY</span></span></code> </pre> <br> 请记住Monolog的工作重点： <br><br><ul><li>  <b>记录器</b>是我们用来记录日志的对象。 记录器本身不记录，但是管理处理程序。 可以创建任何数字。 </li><li>  <b>处理程序</b> -直接处理数据的对象。 您可以根据需要向记录器添加任意数量的处理程序。 无论给定的处理程序是否能够处理错误，所有这些都将依次调用。  isHandling方法确定此处理程序是否将能够处理收到的错误。 <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isHandling</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $record)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $record[<span class="hljs-string"><span class="hljs-string">'level'</span></span>] &gt;= <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;level; }</code> </pre><br> 我认为，与处理程序最相似的是事件观察器。 <br></li><li>  <b>处理器</b> -任何被调用实体（可调用）。 也许几个。 它们既可以全局分配，也可以为处理程序安装。 首先，启动全球处理器。 处理器的主要任务是向日志中添加其他数据（例如，连接所来自的IP，全局变量的值，有关代码位于哪个git分支上的信息，等等）。 </li><li>  <b>格式化程序</b> -在写入之前转换消息输出。 每个处理程序只能有1个。 必须更改消息正文的格式，例如，将文本转换为html或json。 </li><li>  Channel-记录器的名称。 记录日志时将其写入。 由于可以在2个不同的记录器中使用1个处理程序（它将处理程序将日志写入1个相同的文件），因此这将确定错误的来源。 </li><li>  <b>级别</b> -错误级别。 处理程序的此参数表示它将处理的最小错误级别。 </li><li>  <b>气泡</b> -消息弹出窗口。 处理程序处理完消息后，记录器将消息传递给下一个处理程序。 可以使用bubble属性停止该过程。 如果处理程序的此属性值为false（默认始终为true），则在此处理程序执行其工作（能够处理此错误）之后，其他处理程序将不会启动。 </li><li>  <b>排序顺序</b> -执行顺序。 最后添加的处理程序始终是第一个启动的。 正是此功能使您可以实现一种机制，以完全禁用记录器（通过冒泡false）。 通过构造函数添加的处理程序按构造函数中指定的顺序进行。 </li></ul><br><blockquote> 由于PSR-3不强制开发人员强制执行文本中的自动更正值，因此Monolog默认情况下不执行此操作。 如果您编写-&gt; emerg（'test 1111 {placeholder}'，['placeholder'=&gt;'foo']），您将得到以下内容 <br>  [2019-08-12 02:57:52] main.EMERGENCY：test 1111 {placeholder} {“ placeholder”：“ foo”} [] <br><br> 为了使替换正常工作，您需要连接一个附加处理器-\ Monolog \ Processor \ PsrLogMessageProcessor。 <br></blockquote> 值得一提的是，Monolog具有大量开箱即用的Formatter，Processor，Handler。 您可以使用它们，也可以自己编写。 <br><br><a name="subtlety"></a><h2>  Magento 2中的应用程序功能 </h2><br> 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Magento官方网站上，</a>您可以找到有关如何使用记录仪的一般示例。 不幸的是，所提供的示例并没有揭示所有细节，而且也没有回答“如何将日志写入您自己的文件”这一问题。 因此，让我们更详细地了解所有内容。 <br><br> 在Magento 1时代，可能早晚每个人都使用Mage :: log方法，该方法在代码中随处可见，最简单的日志条目看起来像Mage :: log（“ ALARM！”，Null和“ api.log”）。 结果，我们在var / log / api.log文件中记录了以下格式的记录 <br><br><pre> <code class="php hljs"><span class="hljs-number"><span class="hljs-number">2019</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span>T01:<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span>+<span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> DEBUG (<span class="hljs-number"><span class="hljs-number">7</span></span>): ALARM!</code> </pre><br>  <i>默认格式：％timestamp %% priorityName％（％priority％）：％message％。</i> <br><br> 让我们看看如何在Magento 2中最简单的情况下记录数据。通常，您将使用$ this-&gt; _ logger-&gt; info（'ALARM！'）;  （例如，如果对象具有这样的属性，则继承）。 <br><br> 作为这样的调用的结果，我们在var / log / system.log文件中获得以下条目 <br><br><pre> <code class="php hljs">[<span class="hljs-number"><span class="hljs-number">2019</span></span><span class="hljs-number"><span class="hljs-number">-08</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span> <span class="hljs-number"><span class="hljs-number">02</span></span>:<span class="hljs-number"><span class="hljs-number">56</span></span>:<span class="hljs-number"><span class="hljs-number">43</span></span>] main.INFO: ALARM! [] []</code> </pre><br>  <i>默认格式为[％datetime％]％channel％。％Level_name％：％message %% context %% extra％</i> <br><blockquote> 如果对象不具有这样的属性（_logger或logger），那么我们首先需要将依赖项\ Psr \ Log \ LoggerInterface添加到您的类中，然后将结果对象写入$ logger属性（根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PSR-2第4.2点</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Magento网站上的示例</a> ） 。 <br></blockquote> 与Magento 1不同，这里有更多细微差别。 <br><br>  <b>1.记录参数。</b> <br><br> 考虑对write方法的一般调用 <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger-&gt;{level}($message, $context = []); <span class="hljs-comment"><span class="hljs-comment">//$this-&gt;_logger-&gt;log('{level}', $message, $context = []);</span></span></code> </pre><br>  <b>1）</b>根据PSR-3，{level}是保留用于记录特定错误级别（调试，信息，通知，警告，错误，严重，警报，紧急/紧急情况）的方法之一。 <br>  <b>2）</b> $ message-与Magento 1不同，它应该是一个字符串。 即  $ object-&gt; getData（）在这里不起作用。 数据数组必须传递给下一个参数。  \ Exception对象是一个例外，因为\ Magento \ Framework \ Logger \ Monolog的实现单独处理它们，并且如果\ Exception对象作为消息传递，则自动将-&gt; getMessage（）进一步滚动为$ message。 <br>  <b>3）</b> $ context是一个可选参数，一个数组。 <br><br>  <b>2. $ this-&gt; _ logger属性并非在所有类中都可用。</b> <br><br>  <b>出现</b>在：块，助手，模型，集合等。 <br> 在以下<b>版本</b>中<b>不可用</b> ：ResourceModel，Controller，Comand，Setup等。 <br><br><div class="spoiler">  <b class="spoiler_title">了解有关ResourceModel和Collection的更多信息。</b> <div class="spoiler_text">  ResourceModel具有_logger属性，但未在构造函数中填充。 仅使用\ Magento \ Framework \ Model \ ResourceModel \ AbstractResource中的私有getLogger方法填充它。 仅当在commit（）方法内写入数据库（在catch块中）时出错时，才调用该方法。 在此之前，资源模型将没有记录器。 <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">commit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection()-&gt;commit(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection()-&gt;getTransactionLevel() === <span class="hljs-number"><span class="hljs-number">0</span></span>) { $callbacks = CallbackPool::get(spl_object_hash(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection())); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($callbacks <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $callback) { call_user_func($callback); } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (\<span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span> $e) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getLogger()-&gt;critical($e); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>; } … <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getLogger</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> === <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger = ObjectManager::getInstance()-&gt;get(\Psr\Log\LoggerInterface::class); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger; }</code> </pre><br>  Collection从一开始就有记录器。 它是在构造函数\ Magento \ Framework \ Data \ Collection \ AbstractDb中分配的，并在以后继承。 <br></div></div><br> 不能不说，但是在控制器中，有一种方法可以使用ObjectManager获取记录器（通过$ this-&gt; _ objectManager属性）。 但这当然不是最正确的方法。 <br><br>  <b>3.默认记录器和处理程序列表。</b> <br><br> 在全局di.xml（应用程序/etc/di.xml）中，您可以找到\ Psr \ Log \ LoggerInterface由\ Magento \ Framework \ Logger \ Monolog类实现，而后者又继承自\ Monolog \ Logger。 记录器名称为main。 在那里也定义了几个处理程序。 <br><br><pre> <code class="xml hljs">… <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">preference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Psr\Log\LoggerInterface"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Monolog"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Monolog"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>main<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"handlers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"array"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"system"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>Magento\Framework\Logger\Handler\System<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"debug"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>Magento\Framework\Logger\Handler\Debug<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"syslog"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>Magento\Framework\Logger\Handler\Syslog<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> ...</code> </pre><br> 一些类与上面列出的类不同（因为它们在Magento \ Developer模块中重新定义）： <br><br>  <b>1）</b> Magento \ Framework \ Logger \ Handler \ System（ <i>监听INFO）</i> <br>  <b>2）</b> Magento \开发人员\模型\记录器\处理程序\调试（ <i>侦听DEBUG</i> ） <br>  <b>3）</b> Magento \ Developer \模型\ Logger \ Handler \ Syslog（ <i>侦听DEBUG</i> ） <br><br> 在指定的类（Debug和Syslog）中<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">，添加了禁用日志记录的功能</a> （分别是dev / debug / debug_logging和dev / syslog / syslog_logging）。 <br><br> 请注意，在处理程序列表中没有写入到exception.log的异常处理程序。 在系统处理程序中调用它。 <br><br><div class="spoiler">  <b class="spoiler_title">Magento \ Framework \ Logger \ Handler \系统</b> <div class="spoiler_text"><pre> <code class="php hljs">... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $record)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($record[<span class="hljs-string"><span class="hljs-string">'context'</span></span>][<span class="hljs-string"><span class="hljs-string">'exception'</span></span>])) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;exceptionHandler-&gt;handle($record); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } $record[<span class="hljs-string"><span class="hljs-string">'formatted'</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getFormatter()-&gt;format($record); <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::write($record); } ...</code> </pre><br></div></div><br><blockquote>  Magento 2到2.2 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的问题</a>是记录器在找到第一个处理程序后无法跳转到另一个处理程序。 此问题是由以下事实引起的：Monolog计算出，所有处理程序都使用数字键组成一个数组，并带有字母键（['system'=&gt;，'debug'=&gt;，...]）。  Magento开发人员后来纠正了这种情况-在将哈希传递给Monolog之前，他们使用数字键将哈希转换为常规数组。  Monolog现在也更改了处理程序枚举算法，并使用next（）方法。 <br></blockquote>  <b>4.将您的处理程序引入现有处理程序列表中。</b> <br><br> 我们想到了最有趣的事情，它稍微破坏了Magento 2中的实现印象。如果没有...“附加的身体运动”，就不能使用di.xml将自定义处理程序添加到现有处理程序列表中。 这是由于合并配置的原理。 <br><br> 有几种<b>配置范围</b> ： <br><br>  <b>1）</b>初始（app /etc/di.xml） <br>  <b>2）</b>全局（{moduleDir} /etc/di.xml） <br>  <b>3）</b>特定于区域（{moduleDir} / etc / {area} /di.xml，即前端/ adminhtml / crontab / webapi_soap / webapi_rest等） <br><br> 在第1层内部，配置被合并，但是在下一个层中通过merge重新定义了它们（如果在此也声明了它们）。 这使得不可能在其模块中将处理程序添加到现有列表中，因为它是在初始作用域中声明的。 <br><br>  <i>也许在将来，我们将看到一个实现，在该实现中，处理程序的添加将从初始作用域移至其他模块，从而转移到全局作用域。</i> <br><br><a name="howto"></a><h2> 实作 </h2><br> 让我们看一下记录日志的主要方式，这对我们在任务执行中可能很有用。 <br><br><a name="howto1"></a><h3>  1.使用标准记录器记录 </h3><br> 这种方法使我们可以轻松地在标准日志之一（debug.log，system.log或exception.log）中写入日志。 <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RandomClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $logger; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Psr\Log\LoggerInterface $logger)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger = $logger; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger-&gt;info(<span class="hljs-string"><span class="hljs-string">'Something went wrong'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//[...some date...] main.INFO: Something went wrong [] [] } }</span></span></code> </pre><br> 如果我们的类中已经存在继承的记录器依赖项，一切将变得更加简单。 <br><br><pre> <code class="php hljs">… <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;_logger-&gt;info(<span class="hljs-string"><span class="hljs-string">'Something went wrong'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    -&gt;debug,   ,      debug.log ...</span></span></code> </pre><br><a name="howto2"></a><h3>  2.使用带有自定义通道的标准记录器进行记录 </h3><br> 此方法与前一个方法的不同之处在于，创建了记录器的克隆，并为其分配了另一个通道（名称）。 这将简化日志文件中的搜索。 <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RandomClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $logger; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Psr\Log\LoggerInterface $logger)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger = $logger-&gt;withName(<span class="hljs-string"><span class="hljs-string">'api'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    } public function foo() { $this-&gt;logger-&gt;info('Something went wrong'); //[...some date...] api.INFO: Something went wrong [] [] } }</span></span></code> </pre><br><br> 要搜索必要的日志，现在就可以在现有system.log，debug.log，exception.log文件中使用“ api”（Magento 2中的默认记录器称为main）进行搜索。 可以使用 <br><pre> <code class="bash hljs">grep -rn <span class="hljs-string"><span class="hljs-string">'api'</span></span> var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/system.log</code> </pre><br><br><a name="howto3"></a><h3>  3.使用自己的处理程序写入自定义文件 </h3><br> 让我们创建一个简单的处理程序，将所有Critical级及更高级别的错误记录到单独的文件var / log / critical.log中。 添加了针对给定的错误级别或更高级别阻止所有其他处理程序的功能。 这将避免在debug.log和system.log文件中重复数据。 <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Oxis</span></span>\<span class="hljs-title"><span class="hljs-title">Log</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Magento</span></span>\<span class="hljs-title"><span class="hljs-title">Framework</span></span>\<span class="hljs-title"><span class="hljs-title">Filesystem</span></span>\<span class="hljs-title"><span class="hljs-title">DriverInterface</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Magento</span></span>\<span class="hljs-title"><span class="hljs-title">Framework</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">Base</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Monolog</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $fileName = <span class="hljs-string"><span class="hljs-string">'var/log/critical.log'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $loggerType = Logger::CRITICAL; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DriverInterface $filesystem)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($filesystem,<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;bubble = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//      setBubble() } }</span></span></code> </pre><br><blockquote> 在Magento 2 2.2+中的构造函数\ Magento \ Framework \ Logger \ Handler \ Base中，处理日志文件路径的方式已更改 <br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">// BP . $this-&gt;fileName // BP. DIRECTORY_SEPARATOR . $this-&gt;fileName</span></span></code> </pre><br> 因此，在较旧的处理程序中，您仍然可以在$ fileName的开头找到/。 <br></blockquote><br><br> 例如，一些解释是值得给出的。 由于Base不允许您通过构造函数参数设置bubble属性，因此我们要么必须重复Base构造函数中的部分代码，以将输入参数正确地传递给Base类的父类（顺便说一句，它具有用于设置此属性的输入参数）或这样的方法。 我选择了第二个选项。 <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Oxis</span></span>\<span class="hljs-title"><span class="hljs-title">Log</span></span>\<span class="hljs-title"><span class="hljs-title">Logger</span></span>\<span class="hljs-title"><span class="hljs-title">Handler</span></span>\<span class="hljs-title"><span class="hljs-title">Test</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">Psr</span></span>\<span class="hljs-title"><span class="hljs-title">Log</span></span>\<span class="hljs-title"><span class="hljs-title">LoggerInterface</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RandomClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $logger; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( LoggerInterface $logger, Test $handler )</span></span></span><span class="hljs-function"> </span></span>{ $logger-&gt;pushHandler($handler); <span class="hljs-comment"><span class="hljs-comment">//  setHandlers([$handler]),        . $this-&gt;logger = $logger; } public function foo() { $this-&gt;logger-&gt;critical('Something went wrong'); //      critical.log //[...some date...] main.CRITICAL: Something went wrong [] [] } }</span></span></code> </pre><br> 这种添加处理程序的方法并不理想，但是可以让您摆脱问题的Config Scope的约束，这将要求我们复制di.xml中的所有记录器。 如果目标是用您自己的记录器替换所有记录器，那么最好使用virtualType方法，我们将进一步考虑。 <br><br><a name="howto4"></a><h3>  4.使用virtualType写入自定义文件 </h3><br> 这种方法使我们可以强制使用di.xml为此所需的类将日志写入指定的日志文件。 您可以在Magento \ Payment和Magento \ Shipping模块中找到类似的方法。 我提请您注意以下事实：该方法从Magento 2 2.2及更高版本开始起作用。 <br><blockquote> 在Magento 2 2.2及更高版本中，向构造函数\ Magento \ Framework \ Logger \ Handler \ Base中添加了新参数，该参数允许您创建虚拟处理程序并通过di.xml指定用于写入日志的文件的相对路径。 以前，需要通过$ filePath指定完整路径，或者创建新的处理程序并将相对路径写入受保护的文件$ fileName属性。 <br></blockquote><br> 在我们模块的di.xml中，添加以下内容 <br><pre> <code class="xml hljs"> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiHandler"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Handler\Base"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fileName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>var/log/api.log<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiLogger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Monolog"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>api<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"handlers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"array"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"default"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiHandler<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Oxis\Log\Model\A"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiLogger<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br> 将记录器类添加到Oxis \ Log \ Model \A。 <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Oxis</span></span>\<span class="hljs-title"><span class="hljs-title">Log</span></span>\<span class="hljs-title"><span class="hljs-title">Model</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $logger; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Psr\Log\LoggerInterface $logger)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger = $logger; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;logger-&gt;info(<span class="hljs-string"><span class="hljs-string">'Something went wrong'</span></span>); } }</code> </pre><br> 现在，绝对会在我们的类中记录的所有日志都将由我们的记录器版本处理，该记录器将使用我们的处理程序将日志写入var /log/api.log文件。 <br><br>  <b>4.1。</b>  <b>如果该类通过$上下文对象而不是通过其构造函数接收记录器。</b> <br> 这可能包括\ Magento \ Catalog \ Model \ Product，在其中没有\ Psr \ Log \ LoggerInterface的依赖项，但是有\ Magento \ Framework \ Model \ Context，通过它可以将记录器设置为class属性。 在这种情况下，我们需要使选项稍微复杂一些，并替换位于$上下文对象中的记录器。 为了使这不会影响整个Magento，我们将只使用virtualType替换类的$ context。 <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiHandler"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Handler\Base"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fileName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>var/log/api.log<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiLogger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Logger\Monolog"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"string"</span></span></span><span class="hljs-tag">&gt;</span></span>api<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"handlers"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"array"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"default"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiHandler<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--       logger--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ApiLogContainingContext"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Magento\Framework\Model\Context"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logger"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiLogger<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">virtualType</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Oxis\Log\Model\A"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"context"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"object"</span></span></span><span class="hljs-tag">&gt;</span></span>ApiLogContainingContext<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">argument</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">arguments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><a name="howto5"></a><h3>  5.快速的数据记录 </h3><br> 有时我们需要快速添加日志记录。 通常，在生产服务器上或快速测试中可能需要这样做。 <br><pre> <code class="php hljs">... $log = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \Monolog\Logger(<span class="hljs-string"><span class="hljs-string">'custom'</span></span>, [<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \Monolog\Handler\StreamHandler(BP.<span class="hljs-string"><span class="hljs-string">'/var/log/custom.log'</span></span>)]); $log-&gt;error(<span class="hljs-string"><span class="hljs-string">'test'</span></span>); ...</code> </pre><br>  <i>这种方法的优点：写一个日期，有一个上下文（数组），自动在末尾添加\ n</i> <br><br> 在上面的示例中，\ Monolog \ Logger是专门应用的，而不是\ Magento \ Framework \ Logger \ Monolog对其进行扩展。 事实是，这种用法没有什么区别，但是写的更少（记住起来更容易）。 <br><br> 依次使用\ Monolog \ Handler \ StreamHandler代替\ Magento \ Framework \ Logger \ Handler \ Base，因为由于对第三方类的附加依赖性，使用Base作为代码片段不是很方便。 <br><br> 另一个不能说的方法是旧的file_put_contents。 <br><br><pre> <code class="php hljs">... file_put_contents(BP.<span class="hljs-string"><span class="hljs-string">'/var/log/custom.log'</span></span>, <span class="hljs-string"><span class="hljs-string">'test'</span></span>,FILE_APPEND); ...</code> </pre><br>  <i>这种方法的优点：写得相对较快，不需要记住类。</i> <br><br> 在这两种情况下，常数<b>BP</b>都起着主导作用。 她总是指向洋红色（比酒吧高1级）的文件夹，这很方便，而且总是可以帮助我们将日志写到正确的位置。 <br><br><a name="fin"></a><h2> 结论 </h2><br> 希望以上信息对您有所帮助。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN450636/">https://habr.com/ru/post/zh-CN450636/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN450626/index.html">修复设计模式-PHP中的Singleton</a></li>
<li><a href="../zh-CN450628/index.html">Julia：多项式的类型，多重方法和算术</a></li>
<li><a href="../zh-CN450630/index.html">前端每周摘要（2019年4月29日至5月5日）</a></li>
<li><a href="../zh-CN450632/index.html">768字节的Cram Basic</a></li>
<li><a href="../zh-CN450634/index.html">上周第363期（2019年4月29日至5月5日）来自前端世界的新鲜材料摘要</a></li>
<li><a href="../zh-CN450640/index.html">如何理解自己确实戒烟</a></li>
<li><a href="../zh-CN450642/index.html">PHP摘要155号（2019年4月22日至5月6日）</a></li>
<li><a href="../zh-CN450644/index.html">加密货币：是生还是死？ 第三部分</a></li>
<li><a href="../zh-CN450648/index.html">PS2 / PSP模拟器+ Google云端硬盘+ YouTube =“疯狂”继续</a></li>
<li><a href="../zh-CN450650/index.html">以应用程序为中心的基础架构。 未来的网络架构-从推理到业务</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>