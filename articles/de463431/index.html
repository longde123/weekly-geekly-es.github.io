<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõë üê¶ üìß Intelligentes Musikradio, f√ºr das keine permanente Internetverbindung erforderlich ist ü§üüèº ü•ô üëÇüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="W√§hrend ich arbeite und gehe, h√∂re ich oft Hintergrundmusik. Ich habe fr√ºher ein Internetradio namens Jango benutzt , das bis auf die folgenden Dinge ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Intelligentes Musikradio, f√ºr das keine permanente Internetverbindung erforderlich ist</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463431/"><p>  W√§hrend ich arbeite und gehe, h√∂re ich oft Hintergrundmusik.  Ich habe fr√ºher ein Internetradio namens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Jango benutzt</a> , das bis auf die folgenden Dinge f√ºr fast jeden geeignet war: </p><br><ul><li>  Unzug√§nglichkeit bei fast t√§glichen Waldspazierg√§ngen (d. h. ohne Internetverbindung). </li><li>  Die Notwendigkeit, zwischen verschiedenen Kan√§len zu wechseln, um das Musikgenre zu √§ndern.  Mit anderen Worten, der H√∂rer von Jango hat kaum eine Chance, neue Musikgenres zu entdecken. </li></ul><br><p>  Eines Tages kam die Idee auf eine mobile Anwendung zum Musikh√∂ren, die die meiste Zeit ohne das Internet (d. H. Zwischengespeicherte Musik) mit automatischer Erkennung der Musikpr√§ferenzen des Benutzers funktionieren k√∂nnte.  Ich habe so etwas noch nicht gesehen (vielleicht habe ich nur schlecht ausgesehen?), Also habe ich beschlossen, es selbst zu implementieren.  Jetzt, nach einigen Monaten des Codierens in meiner Freizeit von der Hauptarbeit, ver√∂ffentlichte ich die erste, immer noch sehr rohe, aber bereits funktionierende Version der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Android-Anwendung</a> . </p><br><p><img src="https://habrastorage.org/webt/gw/cx/_x/gwcx_xfnigailrw3e9221n3rpes.jpeg"></p><a name="habracut"></a><br><p>  Ich wollte eine Anwendung mit einer sehr einfachen und intuitiven Oberfl√§che implementieren (tats√§chlich mit nur zwei Schaltfl√§chen: "Pause" und "√úberspringen"), aber mit einer ausreichend fortgeschrittenen internen Logik, um musikalische Vorlieben zu analysieren (basierend auf der Erfassung von Statistiken √ºber die Dauer des H√∂rens von Titeln vor dem √úberspringen). und Caching von Tracks.  Da ich die Logik nicht f√ºr verschiedene Plattformen duplizieren wollte, wurde beschlossen, sie in C ++ (dem "gemeinsamen Nenner" f√ºr iOS und Android) zu implementieren. </p><br><p>  Um die Metadaten zu den Tracks sowie die Benutzereinstellungen zu speichern, habe ich SQLite ausgew√§hlt.  Album- und Musik-Cover-Dateien werden in einem dreistufigen Hash-basierten Verzeichnisbaum gespeichert (√§hnlich wie in Git). </p><br><p>  512 MiB hat die Cache-Gr√∂√üe gew√§hlt (diese und alle anderen Ziffern k√∂nnen nat√ºrlich konfiguriert werden).  Die Logik der Drehung der Spuren lautet wie folgt: Pro Aktualisierungsiteration werden 20 Spuren heruntergeladen.  Nachdem der Benutzer jeden Titel mindestens zweimal angeh√∂rt hat, wird ein neues Update eingeleitet.  Titel werden gel√∂scht, f√ºr die die durchschnittliche H√∂rzeit unter dem angegebenen Grenzwert liegt, und die Metadaten neuer Titel werden vom Server heruntergeladen. Danach beginnt der Download. </p><br><p>  Die Wiedergabelogik ist wie folgt.  Je l√§nger die durchschnittliche H√∂rzeit eines Titels ist, desto h√§ufiger wird er abgespielt. </p><br><p>  Als erfahrener C ++ - Entwickler hatte ich keine besonderen Schwierigkeiten bei der Implementierung der oben beschriebenen Logik (obwohl sie in Wirklichkeit etwas komplizierter ist).  Da ich jedoch keine Erfahrung mit dem Schreiben von Anwendungen f√ºr Android hatte, musste ich viel Zeit und M√ºhe auf die Implementierung der entsprechenden Softwareschicht (insbesondere der Benutzeroberfl√§che) verwenden.  Ich bin sicher, dass viele Dinge jetzt nicht optimal umgesetzt werden. </p><br><p>  Ich habe beschlossen, einen Android-Wrapper in Kotlin zu schreiben.  Tats√§chlich versprach Java keine Vorteile, da Sie sich immer noch mit JNI herumschlagen m√ºssten (unter iOS w√§re die Situation anders, Objective-C ist in Bezug auf die Integration mit nativem Kernlogikcode viel praktischer als Swift). </p><br><p>  Ich habe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fuel</a> zum Herunterladen von JSON-Metadaten und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fetch</a> zum Herunterladen von Dateien verwendet (ich war √ºberrascht, dass Fuel Dateien nicht effizient herunterladen kann).  √úbrigens habe ich in der zweiten Bibliothek Beschwerden √ºber die Stabilit√§t der Arbeit. </p><br><p>  Der Servercode wurde in Golang geschrieben und verwendet PostgreSQL durch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reform</a> .  Die aktuelle Metadatendatenbank wurde durch Indizierung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Free Music Archive erstellt</a> . In Zukunft plane ich, auch andere Open Source zu indizieren.  Tracks auf dem Server werden noch nicht gespeichert, um Speicherplatz zu sparen (ich spare beim Hosting), sondern verweisen direkt auf das Quell-Repository. </p><br><p>  Der Server sammelt Statistiken zum Abh√∂ren von Titeln f√ºr jeden Benutzer.  Somit wird jedem Musikgenre eine Pr√§ferenzbewertung zugewiesen, die die Wahrscheinlichkeit der Auswahl der geeigneten Kompositionen w√§hrend der Rotation beeinflusst. </p><br><p>  Ich w√ºrde mich freuen, wenn Sie meine Bewerbung versuchen.  Pl√∂tzlich wird es dir gefallen.  Sicherlich werden Sie w√§hrend des Gebrauchs auf Fehler sto√üen (das Programm ist noch roh).  Die Geschwindigkeit ihrer Korrektur h√§ngt direkt von der Nachfrage nach meiner Arbeit ab. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463431/">https://habr.com/ru/post/de463431/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463415/index.html">Sicherheitswoche 33: interessant mit Black Hat / DEF CON 2019</a></li>
<li><a href="../de463417/index.html">Portierung des Betriebssystems auf Aarch64</a></li>
<li><a href="../de463419/index.html">Digitale Veranstaltungen in Moskau vom 12. bis 18. August</a></li>
<li><a href="../de463425/index.html">Hybride Telefonsysteme</a></li>
<li><a href="../de463427/index.html">Museum f√ºr russische Auswanderung: Wie wir einen Bewegungssensor in ein Grammophon einbauen und allgemein Technologie hinzuf√ºgen</a></li>
<li><a href="../de463433/index.html">E-Mail-Blog: Google Mail-Funktionen</a></li>
<li><a href="../de463435/index.html">√úbersicht √ºber Cloud-Services zur Entwicklung eines Backends f√ºr mobile Anwendungen</a></li>
<li><a href="../de463437/index.html">Verbinden Sie ein mobiles Ger√§t mit der Datenbank, ohne Servercode zu schreiben</a></li>
<li><a href="../de463439/index.html">Apollo-Bordsteuerungscomputer: Messstab und technische Analyse des Speichers auf mehreren zusammengef√ºgten Kernen</a></li>
<li><a href="../de463441/index.html">Sampler. Konsolen-Dienstprogramm zur Visualisierung des Ergebnisses von Shell-Befehlen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>