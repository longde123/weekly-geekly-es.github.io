<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👊🏾 🛀🏼 👵🏾 Sobre os benefícios da incorporação de CSS em JS 🕺🏾 👩🏾‍🌾 🏣</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Esta postagem é uma resposta detalhada às perguntas desta conversa no Twitter . O autor do original, Sunil Pye, é o autor da relativamente popular bib...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre os benefícios da incorporação de CSS em JS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433276/"><p> <em>Esta postagem é uma resposta detalhada às perguntas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">desta conversa no Twitter</a> .</em>  <em>O autor do original, Sunil Pye, é o autor da relativamente popular biblioteca de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">glamour</a> e trabalha como desenvolvedor no Facebook.</em> </p><br><blockquote>  Como o Javascript é mais conveniente que o CSS?  Como escrever CSS dentro de JS o torna mais suportado? </blockquote><p>  Ficarei feliz em falar sobre esse tópico.  Devo dizer imediatamente que as soluções CSS-in-JS têm custos indiretos, mas geralmente esse preço é justificado pelas vantagens que elas trazem.  Às vezes, eles podem ser úteis, mas também isso não significa que o CSS-in-JS deva ser usado sempre e em qualquer lugar. </p><a name="habracut"></a><br><p>  Portanto, o mais importante em CSS-in-JS (cij) são os seletores de CSS.  A maior vantagem do cij é que os computadores podem gerar esses seletores automaticamente.  Convenções como OOCSS, etc.  em princípio, eles são bons, mas são baseados em seletores manuscritos, difíceis de garantir exclusividade no espaço para nome comum, porque sempre há uma chance de interseção.  Se isso não acontecer agora, poderá ocorrer após três anos, quando sua equipe crescer e as circunstâncias mudarem.  Essa situação é exacerbada usando bibliotecas de terceiros.  A limitação do escopo dos seletores de CSS também pode ser alcançada usando os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">módulos CSS</a> , que são populares precisamente para esta oportunidade. </p><br><p>  No entanto, com todas essas abordagens, os seletores são muito difíceis de analisar estaticamente e descobrir quais estão quebradas (ou contêm erros de digitação), o que significa que elas terão que ser verificadas manualmente no processo de revisão de código, o que reduzirá a eficácia do comando.  Devemos usar a ajuda dos computadores e não confiar na integridade e na perfeição das pessoas (porque não é assim).  O CSS-in-JS torna possível automatizar a geração de seletores e identificadores exclusivos. </p><br><p> Além disso, o controle aprimorado sobre os seletores de CSS abre novas possibilidades que antes não eram facilmente acessíveis.  Por exemplo, podemos <em>simplesmente</em> implementar a extração crítica de CSS combinando blocos HTML com os estilos de que eles precisam, para que possamos carregar apenas 1-2 Kb de CSS na página, o que é necessário para a exibição inicial da página.  Sem qualquer tempo de execução!  Estruturas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Gatsby</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Next</a> usam ativamente isso para melhorar os indicadores de desempenho em projetos baseados neles.  Eles incorporam CSS crítico diretamente no HTML para download simplesmente porque pesa tão pouco que seria melhor do que uma solicitação extra bloqueando o carregamento da página.  Isso reduz bastante o tempo de renderização da página inicial.  Além disso, também contribui para resolver os problemas de tamanho Javascript para download!  Os benefícios vêm da aplicação de CSS crítico, bem como do uso de <code>import()</code> dinâmica <code>import()</code> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">divisão de código</a> e remoção de código não utilizado.  (Em contraste com os arquivos de estilo Legacy, sempre crescentes, nos quais os desenvolvedores adicionam apenas um novo código, com medo de tocar no existente. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Há um pouco de análise sobre este tópico</a> .) </p><br><p>  Uma situação semelhante com a implementação de temas.  Você sabia que as <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">variáveis ​​CSS</a> , mesmo sendo uma coisa muito interessante, não foram para os casos de uso para os quais foram originalmente planejadas, e tudo porque os métodos de fallback para navegadores antigos eram muito complicados ou inferiores?  Isso significa que eles geralmente são usados ​​como constantes globais, mas muito raramente como variáveis ​​cujo valor é determinado dinamicamente no navegador.  Ter um tempo de execução CSS CSS significa que você pode passar valores de JS para estilos, tornando isso possível. </p><br><p>  De fato, você vai gostar: você pode finalmente usar <em>honestamente</em> variáveis ​​CSS em <em>todos os</em> navegadores, ou seja, recursos nativos sem tempo de execução nos navegadores que as suportam e um tempo de execução especial para navegadores mais antigos.  (Escrevi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mais</a> sobre isso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e, se entendi corretamente, essa é a única biblioteca que conseguiu isso). </p><br><p>  Em uma situação complexa do SPA com vários componentes e carregamento assíncrono de recursos, como scripts e estilos, você não pode garantir a ordem exata dos estilos de carregamento; portanto, é necessário criar algum tipo de solução de tempo de execução para garantir a ordem dos estilos ou apenas usar <code>!important</code> <em>se você se ater a algum tipo de metodologia CSS</em> .  Por exemplo, você tem um elemento com <code>class=“ab”</code> , mas as classes <code>a</code> e <code>b</code> definidas em arquivos de estilo diferentes, então você não pode ter certeza da forma final do bloco se não tiver uma ordem de sequência clara dos arquivos de estilo.  A base de código do Facebook contém milhares de usos do <code>!important</code> , mesmo que o código tenha sido escrito por programadores qualificados usando os princípios do SOLID e boa interação com a equipe de design. </p><br><p>  Isso geralmente se refere ao tratamento de CSS como se fosse Javascript - já que há 10 anos já estávamos resolvendo problemas semelhantes para JS - as bibliotecas e módulos se registravam no espaço de nomes global ( <code>$</code> e similares) e tínhamos que ter bastante cuidado com a ordem de conexão scripts em HTML.  Mas não ficamos presos ali para sempre - agora usamos módulos e os sistemas de montagem os costuram em uma ordem correta garantida.  Isso é simples e transparente para nós. </p><br><p>  Observando projetos reais, notei também que você ainda pode usar abordagens arquiteturais tradicionais (como OOCSS ou SMACSS etc.) no mundo do CSS-in-JS - os elementos dessas arquiteturas são representados aqui por objetos JS, em vez dos blocos seletores + estilos.  Eu adoto essa abordagem e ela funciona bem para mim.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aqui</a> você pode ler mais sobre isso. </p><br><p>  Também estou ciente das desvantagens do CSS-in-JS.  De fato, é exatamente por isso que não existe uma biblioteca “canônica” que represente CSS-in-JS - é um espectro de soluções diferentes, de CSS estático baunilha, por um lado, a bibliotecas totalmente dinâmicas, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">componentes estilizados,</a> por outro.  Pré-processadores como SASS ou LESS podem parecer perpendiculares a esse espectro, porque teoricamente podem ser usados ​​por qualquer uma dessas bibliotecas, a critério de seus autores.  Cada uma dessas bibliotecas tem suas desvantagens - algumas estão envolvidas na extração de estilos no estágio de montagem, para que não haja despesas no tempo de execução, outras focadas na correção ou conveniência dos desenvolvedores, outras focadas na implementação efetiva de animações complexas e assim por diante.  Essa diversidade é uma reação natural à necessidade de diferentes soluções para diferentes tarefas de trabalho, em um setor de rápido crescimento.  E isso acontece não apenas com as bibliotecas - os desenvolvedores de padrões da Web (ShadowDOM e outros) também tentam resolver esses problemas, mas sua solução também apresenta desvantagens, a menor das quais é que elas ainda não estão disponíveis em todos os lugares, o que a torna inaceitável para uso. em muitas equipes. </p><br><p>  Eu costumava ter sentimentos fortes sobre isso, mas temperei minhas opiniões nos últimos meses.  Acontece que a verdade está em algum lugar no meio - depende das equipes, requisitos, tempo, documentação e muitos outros fatores.  Além disso, não creio que este texto represente a “forma final” dessa idéia.  Deveríamos incentivar a experimentação nessa área para descobrir o que mais podemos fazer melhor e até incorporar algumas dessas coisas nos navegadores. </p><br><p>  PS Tarde demais, percebi que esqueci de marcar a caixa "Tradução", então foi publicada assim.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link para o original</a> . </p><br><p>  <em>Habr, conserte a interface, por que você não pode adicionar o sinalizador de tradução após a publicação?</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt433276/">https://habr.com/ru/post/pt433276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt433266/index.html">Introdução à API de Reflexão do PHP</a></li>
<li><a href="../pt433268/index.html">Cliente PHP Telegram (e recebimento de mensagens usando MadelineProto)</a></li>
<li><a href="../pt433270/index.html">Solução de problemas do MapStruct com ManyToMany</a></li>
<li><a href="../pt433272/index.html">Entrevista com David Gobel</a></li>
<li><a href="../pt433274/index.html">Oleg Dokuka sobre desenvolvimento reativo em jug.msk.ru</a></li>
<li><a href="../pt433278/index.html">Programação de vento WebGL e GPU. Palestra no FrontTalks 2018</a></li>
<li><a href="../pt433280/index.html">Conferência DEFCON 18. Engenharia reversa de trollim usando matemática</a></li>
<li><a href="../pt433282/index.html">Gateways de protocolos de troca industrial no Linux. Monte-se</a></li>
<li><a href="../pt433286/index.html">10 reuniões de TI e hackers mais próximos em Moscou</a></li>
<li><a href="../pt433288/index.html">Segurança na Web: Introdução ao HTTP</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>