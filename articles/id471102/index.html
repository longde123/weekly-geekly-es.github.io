<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤸🏿 👩🏼‍💼 👨🏻‍🍳 DNS Dinamis Kustom dengan CloudFlare 🛃 🤩 ♈️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata Pengantar 
 Untuk kebutuhan pribadi, ia mengangkat VSphere, di mana saya memutar router virtual dan server Ubuntu sebagai server media dan banyak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DNS Dinamis Kustom dengan CloudFlare</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471102/"><h3>  Kata Pengantar </h3><br><img src="https://habrastorage.org/webt/qa/jk/ya/qajkyam8ddqghr9tppzdlcrxhki.png" alt="Gambar untuk menarik perhatian" align="right" width="250">  Untuk kebutuhan pribadi, ia mengangkat VSphere, di mana saya memutar router virtual dan server Ubuntu sebagai server media dan banyak barang, dan server ini harus dapat diakses dari Internet.  Tetapi masalahnya adalah penyedia saya memberikan statika untuk uang, yang Anda selalu dapat menemukan aplikasi yang lebih berguna.  Oleh karena itu, saya menggunakan banyak ddclient + cloudflare. <br><br>  Semuanya baik-baik saja sampai ddclient berhenti bekerja.  Setelah menggali sedikit, saya menyadari bahwa waktunya telah tiba untuk kruk dan sepeda, karena waktu untuk mencari masalah mulai terlalu banyak.  Pada akhirnya, semuanya berubah menjadi iblis kecil yang hanya berfungsi, tetapi saya tidak membutuhkannya lagi. <br>  Siapa yang peduli - selamat datang di kucing. <br><a name="habracut"></a><br><h3>  Alat yang digunakan dan bagaimana "itu" bekerja </h3><br>  Jadi hal pertama yang saya pelajari di situs web cloudflare adalah semua yang perlu Anda ketahui tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API</a> .  Dan saya sudah duduk untuk mengimplementasikan semuanya dengan Python (setelah mengenal Python, saya menggunakannya lebih sering untuk beberapa tugas sederhana atau ketika saya perlu membuat prototipe dengan cepat) ketika saya tiba-tiba menemukan implementasi yang hampir siap. <br>  Secara umum, pembungkus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">python-cloudflare</a> diambil sebagai dasar. <br><br>  Saya mengambil satu contoh untuk memperbarui DNS dan menambahkan penggunaan file konfigurasi dan kemampuan untuk memperbarui beberapa catatan A dalam zona dan tentu saja jumlah zona yang tidak terbatas. <br><br>  Logikanya adalah sebagai berikut: <br><br><ol><li>  Skrip menerima daftar zona dari file konfigurasi dan melewati mereka dalam satu lingkaran </li><li>  Di setiap zona, skrip loop melalui setiap catatan DNS tipe A atau AAAA dan memeriksa IP Publik dengan catatan </li><li>  Jika IP berbeda, ubahlah, jika tidak, lewati iterasi loop dan lanjutkan ke yang berikutnya </li><li>  Tertidur pada waktu yang ditentukan dalam konfigurasi </li></ol><br><h3>  Instalasi dan pengaturan </h3><br>  Mungkin akan mungkin untuk membuat paket deb, tapi aku tidak kuat dalam hal itu, dan itu tidak rumit. <br>  Saya menggambarkan proses secara rinci dalam README.md di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman repositori</a> . <br><br>  Tapi kalau-kalau, saya akan menjelaskan dalam bahasa Rusia secara umum: <br><br><ol><li>  Pastikan Anda menginstal python3 dan python3-pip, jika tidak, instal (pada Windows, python3-pip diinstal dengan Python) </li><li>  Klon atau unduh repositori </li><li>  Instal dependensi yang diperlukan. <br><br><pre><code class="plaintext hljs">python3 -m pip install -r requirements.txt</code> </pre> <br></li><li>  Jalankan skrip instalasi <br>  Untuk Linux: <br><br><pre> <code class="plaintext hljs">chmod +x install.sh sudo ./install.sh</code> </pre> <br>  Untuk Windows: windows_install.bat <br></li><li>  Edit file konfigurasi <br>  Untuk Linux: <br><br><pre> <code class="plaintext hljs">sudoedit /etc/zen-cf-ddns.conf</code> </pre> <br>  Untuk Windows: <br><br>  Buka file zen-cf-ddns.conf di folder tempat Anda menginstal skrip. <br><br>  Ini adalah file JSON biasa, tidak ada yang rumit dengan pengaturan - Saya secara khusus dijelaskan sebagai contoh 2 zona berbeda di dalamnya. <br></li></ol><br><h4>  Apa yang tersembunyi di balik installer? </h4><br>  install.sh untuk Linux: <br><br><ol><li>  Seorang pengguna dibuat untuk memulai daemon, tanpa membuat direktori home dan kemampuan login. <br><br><pre> <code class="plaintext hljs">sudo useradd -r -s /bin/false zen-cf-ddns</code> </pre> <br></li><li>  File log dibuat di / var / log / </li><li>  Kami membuat pemilik file log dari pengguna yang baru dibuat </li><li>  File disalin di tempatnya (config di / etc, file executable di / usr / bin, file service di / lib / systemd / system) </li><li>  Layanan diaktifkan </li></ol><br>  windows_install.bat untuk Windows: <br><br><ol><li>  Salin file yang dapat dieksekusi dan file konfigurasi ke folder yang ditentukan pengguna </li><li>  Membuat tugas di penjadwal untuk menjalankan skrip saat startup sistem <br> <code>schtasks /create /tn "CloudFlare Update IP" /tr "%newLocation%" /sc onstart</code> <br> </li></ol><br>  Setelah mengubah konfigurasi, skrip perlu direstart, di Linux semuanya sederhana dan familier: <br><br><pre> <code class="plaintext hljs">sudo service zen-cf-ddns start sudo service zen-cf-ddns stop sudo service zen-cf-ddns restart sudo service zen-cf-ddns status</code> </pre><br>  untuk Windows, Anda harus mematikan proses pythonw dan menjalankan kembali skrip (sangat malas bagi saya untuk menulis layanan di bawah Windows di C #): <br><br><pre> <code class="plaintext hljs">taskkill /im pythonw.exe</code> </pre> <br>  Pada instalasi ini dan konfigurasi selesai, gunakan kesehatan Anda. <br><br>  Bagi mereka yang ingin melihat bukan kode Python yang paling indah, berikut adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori di GitHub</a> . <br><br>  Lisensi MIT, jadi lakukan apa pun yang Anda inginkan dengan kebaikan ini. <br><br>  PS: Saya mengerti bahwa itu ternyata sedikit penopang, tetapi berupaya dengan tugasnya dengan keras. <br><br>  UPD: 10/10/2019 17:37 <br>  Saya menemukan satu masalah lagi, dan jika seseorang memberi tahu saya bagaimana menyelesaikannya, saya akan sangat berterima kasih. <br>  Masalahnya adalah jika Anda menginstal dependensi tanpa sudo python -m pip install -r ..., maka dari bawah pengguna layanan modul tidak akan terlihat, tetapi saya tidak ingin memaksa pengguna untuk menginstal modul di bawah sudo, dan ini tidak benar. <br>  Bagaimana cara membuatnya cantik? <br>  UPD: 10/11/2019 19:16 Masalahnya diselesaikan menggunakan venv. <br>  Ternyata beberapa perubahan.  Rilis berikutnya adalah hari yang lain. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id471102/">https://habr.com/ru/post/id471102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id471092/index.html">Perintah Cp: menyalin folder file ke * nix dengan benar</a></li>
<li><a href="../id471094/index.html">Tutu.ru dan Moscow Club of Programmer diundang ke pertemuan backend pada 17 Oktober</a></li>
<li><a href="../id471096/index.html">Tes publik: solusi untuk privasi dan skalabilitas dalam Ethereum</a></li>
<li><a href="../id471098/index.html">Terobosan Digital - Bagaimana Itu</a></li>
<li><a href="../id471100/index.html">Interaksi antara komponen sudut menggunakan RxJS</a></li>
<li><a href="../id471104/index.html">Oktober Intisari Acara TI (Bagian Dua)</a></li>
<li><a href="../id471112/index.html">Alasan bodoh mengapa aplikasi penglihatan mesin Anda yang licik tidak berfungsi: orientasi di EXIF</a></li>
<li><a href="../id471116/index.html">5 perangkat teknologi makanan dan sebuah robot dengan tomat</a></li>
<li><a href="../id471118/index.html">Cara Memperkenalkan Organisasi Anda ke OpenStack</a></li>
<li><a href="../id471120/index.html">Bagaimana mengatasi masalah IT saat ini dalam manajemen perbaikan peralatan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>