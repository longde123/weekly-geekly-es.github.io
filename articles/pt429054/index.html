<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼‍🔧 🌛 👲🏾 Encontre N diferenças. Experiência de teste de layout Tinkoff.ru 🌩️ 👨🏿‍✈️ 🧗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O artigo é publicado em nome de Alexander Kochetkov e Crasse Snejana. 

 Quantas diferenças você encontrará em 10 segundos? 



 Nosso testador encont...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Encontre N diferenças. Experiência de teste de layout Tinkoff.ru</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/429054/">  <i>O artigo é publicado em nome de Alexander Kochetkov e Crasse Snejana.</i> <br><br>  Quantas diferenças você encontrará em 10 segundos? <br><br><img src="https://habrastorage.org/webt/yv/qh/_z/yvqh_zsiieango28fgf74stqf_k.jpeg"><br><br>  Nosso testador encontrará TODAS as diferenças.  E mesmo aqueles que não são visíveis.  Abaixo, falarei sobre como ele fará isso, mas primeiro apresentarei o curso das coisas. <br><a name="habracut"></a><br>  Nossa empresa está desenvolvendo várias aplicações web.  Tomemos, por exemplo, um aplicativo Web cliente típico com uma interface do usuário rica, várias centenas de páginas, layout responsivo e suporte para todos os navegadores populares.  Nesse cenário, o teste de regressão da interface do usuário existente se transforma em AD e leva muito tempo.  Para não enlouquecer e não se afundar neste atoleiro, automatizamos esse processo e criamos uma nova ferramenta - <b>QVisual</b> . <br><br>  Como uma pessoa testa o layout (UI)?  Ele pega a implementação atual e a compara com um padrão abstrato construído com base em sua própria experiência, conveniência e milhares de páginas da web visualizadas anteriormente.  Escrever sua própria IA para testar layouts seria, é claro, muito legal.  Mas essa idéia parece disparar de um canhão para pardais.  Portanto, facilitamos tudo: como referência, começamos a aceitar a mesma página verificada anteriormente por uma pessoa (na maioria dos casos, essa é uma página de um release anterior bem-sucedido).  Assim, toda a tarefa se resumia em comparar duas páginas. <br><br>  Obviamente, já foram publicadas muitas soluções que permitem comparar duas imagens pixel por pixel.  Por que escrevemos "outra bicicleta"?  A resposta é simples - não queríamos nos limitar à comparação pixel por pixel, queríamos comparar blocos individuais em uma página e receber um relatório significativo sobre o número e os tipos de diferenças nesses blocos.  Portanto, a ferramenta que implementamos pode comparar não apenas as imagens em si, mas também elementos de página individuais, se necessário.  Portanto, operamos não com capturas de tela de duas páginas, mas com instantâneos dessas páginas. <br><br><h4>  Vantagens da abordagem </h4><br>  Um instantâneo é uma captura de tela da página inteira, além de dados sobre os estilos e propriedades de alguns elementos da web nesta página.  Implementamos a busca por diferenças nos snapshots com um aplicativo de servidor com uma API aberta. <br><br>  Abordagem: comparar elementos, não imagens, permite destacar erros típicos, como: <br><br><ul><li>  <b>IMAGEM</b> - o elemento na página não corresponde visualmente ao elemento no padrão; </li><li>  <b>MOVIDO</b> - elementos de deslocamento, o elemento é idêntico à referência, mas com coordenadas diferentes; </li><li>  <b>Redimensionado</b> - muito semelhante a um deslocamento, mas em vez da posição do elemento, seu tamanho é diferente; </li><li>  <b>TEXTO</b> - erros no texto; </li><li>  <b>CSS</b> e <b>ATTRIBUTES</b> - as diferenças de estilos e atributos nem sempre são visíveis visualmente e nem sempre são um erro.  Mas controlar as alterações nelas é bastante útil, pois, em alguns casos, ajuda a encontrar erros associados a elas. </li></ul><br>  Uma pequena análise de exemplos com vários erros comuns: <br><br><img src="https://habrastorage.org/webt/2a/tm/-i/2atm-iq1tzielskk7jjhetmeu8i.gif" alt="imagem"><br><br><h4>  Como isso funciona? </h4><br>  Você pode remover o instantâneo da página usando suas próprias ferramentas e pode transferir uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">captura de tela</a> e dados sobre os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">elementos</a> para o servidor com duas solicitações POST comuns. <br>  Se seus testes forem escritos em Java, será mais fácil usar nossa biblioteca para esses fins, que por si só cuidarão da criação de um instantâneo e da transferência de dados para o servidor. <br>  Antes de começar, você precisará especificar várias variáveis ​​(endereço do servidor, tipo e versão do navegador, etc.).  No teste em si, você deve especificar o endereço da página da qual deseja tirar uma captura instantânea e uma lista de localizadores no formato Xpath ou CSS para procurar os elementos que precisamos (opcional).  Isso é tudo! <br><br>  Dentro da biblioteca, usamos os comandos internos do Selenium WebDriver e scripts JavaScript para tirar uma captura instantânea.  Os comandos internos do WebDriver permitem tirar capturas de tela da página com rapidez e precisão (sem colar e rolar) e js - encontre os elementos necessários e adicione dados sobre eles no instantâneo.  Depois de remover o instantâneo, transferimos para o nosso aplicativo de servidor, que salvará dados sobre os elementos no mongo e as próprias capturas de tela no disco do servidor.  Agora, esse instantâneo pode ser comparado com o padrão.  Os dados do elemento serão comparados como objetos regulares e capturas de tela - pixel por pixel usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OpenCV</a> . <br>  Agora você pode obter um relatório sobre a comparação de dois instantâneos.  Para fazer isso, você precisa enviar uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">solicitação GET</a> e obter os dados sobre a comparação na forma de JSON em resposta, ou usar nosso aplicativo front-end, que criará um relatório legível detalhado e mais importante. <br><br><h4>  E o relatório? </h4><br>  A página principal do relatório contém informações sobre testes aprovados e reprovados com êxito (destacados em vermelho) e consiste em três listas: <br><br><ul><li>  lista de testes (matéria) em que o layout foi verificado.  Aqui, por conveniência, os nomes dos testes correspondem ao URL das páginas das quais o instantâneo foi tirado; </li><li>  lista de estados (estado) - cada história pode conter vários estados, por exemplo, uma captura de tela antes de preencher o formulário e depois.  Cada estado pode conter vários instantâneos em diferentes resoluções e versões do navegador; </li><li>  lista com diferentes navegadores e permissões e breves estatísticas. </li></ul><br>  Na parte superior, existem ícones que permitem filtrar os resultados, dependendo do tipo de erro e da discrepância percentual na comparação pixel por pixel.  Esta implementação acelera a verificação de erros. <br><br><img src="https://habrastorage.org/webt/66/fo/wn/66fownexe7yn5lcjo67pdyjrlxe.png" alt="imagem"><br><br>  Estatísticas breves nos blocos da última lista contêm três parâmetros: <br><br><ul><li>  <b>pixels</b> - a diferença entre as duas imagens em porcentagem em relação ao tamanho da página inteira; </li><li>  <b>elementos</b> - o número de elementos diferentes (daqueles encontrados pelos localizadores aprovados no teste); </li><li>  <b>error</b> - erros internos que ocorreram ao comparar snapshots (por exemplo, uma das imagens não foi encontrada para comparação ou não há dados nos snapshots). </li></ul><br>  O relatório para cada página é composto por duas capturas de tela e traçados dos elementos nos quais o diff foi encontrado.  O texto pop-up ao passar o mouse sobre diferentes elementos indica o tipo de erro e o localizador pelo qual o elemento foi encontrado.  Você também pode definir a filtragem por tipo de erro, ocultar uma das capturas de tela e ativar / desativar o resultado da comparação pixel por pixel. <br><br><img src="https://habrastorage.org/webt/j4/1i/vd/j41ivdk8scudg4igkojzeu4u_hc.png"><br><br>  Como mencionado acima, também comparamos as capturas de tela pixel por pixel, o que para algumas tarefas é muito eficaz.  Por exemplo, para novas páginas com um DOM instável, não faz sentido gastar tempo escrevendo e mantendo localizadores. <br><br><img src="https://habrastorage.org/webt/wl/t7/nr/wlt7nr5-69dzhhby8jy8mgqg7tc.gif"><br><br>  Concluindo, quero dizer sobre o real esgotamento dessa ferramenta para a empresa: todos os dias o <b>QVisual</b> ajuda nossos testadores a acompanhar todas as alterações no layout dos aplicativos.  Economizamos muito tempo comparando pousos criando automaticamente capturas de tela (mais de 1500 pousos em 3 navegadores em 6 resoluções de tela). <br><br>  <b>PS:</b> Esta é uma breve visão geral de nossa ferramenta.  Você pode encontrar mais informações no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> , além de participar do desenvolvimento da ferramenta. <br><br>  <b>PPS</b> Para aqueles que querem testar a si mesmos - estas são todas as diferenças na imagem do cabeçalho: <br><br><img src="https://habrastorage.org/webt/ft/ny/oi/ftnyoiatmcuv5mhfvezdmcgrynm.jpeg"><br><br>  Canal de suporte da ferramenta Telegram: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">t.me/qvisual</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt429054/">https://habr.com/ru/post/pt429054/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt429044/index.html">As ações da Apple sofreram a pior queda desde 2014. Grandes investidores perderam bilhões</a></li>
<li><a href="../pt429046/index.html">Quatro anos de desenvolvimento do SObjectizer-5.5. Como o SObjectizer mudou durante esse período?</a></li>
<li><a href="../pt429048/index.html">Dicas para um hoster iniciante</a></li>
<li><a href="../pt429050/index.html">Ataque de troca de criptomoeda Gate.io registrado</a></li>
<li><a href="../pt429052/index.html">Por que em laptops touch alguns SPAs deixaram de oferecer suporte a eventos touch</a></li>
<li><a href="../pt429056/index.html">Física, não biologia, torna o envelhecimento inevitável</a></li>
<li><a href="../pt429058/index.html">Usando o Retrofit 2 em um aplicativo Android</a></li>
<li><a href="../pt429060/index.html">O conceito de uma mente ideal. Universal AI</a></li>
<li><a href="../pt429062/index.html">Domando multicast</a></li>
<li><a href="../pt429064/index.html">Lutando por recursos, parte 5: Começando do zero</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>