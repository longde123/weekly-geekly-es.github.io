<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’¯ ğŸ‘± ğŸ˜½ è¶…ç°ä»£çš„OpenGLã€‚ ç¬¬äºŒéƒ¨åˆ† â ğŸ¥ ğŸ‘¨ğŸ¼â€ğŸš’</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="çª—å¤–éƒ½å¿ƒæƒ…æ„‰å¿«ï¼Œæ¸©åº¦è¾ƒä½ã€‚ å¦‚æ‰€æ‰¿è¯ºçš„ï¼Œæˆ‘å°†ç»§ç»­å‘è¡¨æœ‰å…³ç°ä»£OpenGLè¶…çº§duperçš„æ–‡ç« ã€‚ è°è¿˜æ²¡æœ‰é˜…è¯»ç¬¬ä¸€éƒ¨åˆ†- è¶…ç°ä»£OpenGLã€‚ ç¬¬ä¸€éƒ¨åˆ† 

 ä¹Ÿè®¸æ‚¨å¾ˆå¹¸è¿ï¼Œæˆ‘å¯ä»¥å°†æ‰€æœ‰å‰©ä½™çš„ææ–™æ¨åˆ°æœ¬æ–‡ä¸­ï¼Œä½†å¹¶ä¸ç¡®å®š... 

 é˜µåˆ—çº¹ç† 
 çº¹ç†æ•°ç»„æ˜¯åœ¨OpenGL 3.0ä¸­æ·»åŠ å›å»çš„ï¼Œä½†ç”±äºæŸäº›...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>è¶…ç°ä»£çš„OpenGLã€‚ ç¬¬äºŒéƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457380/"><img src="https://habrastorage.org/webt/ui/wu/2k/uiwu2kjzkvznzwubjaqnk7lkoz0.jpeg"><br><br> çª—å¤–éƒ½å¿ƒæƒ…æ„‰å¿«ï¼Œæ¸©åº¦è¾ƒä½ã€‚ å¦‚æ‰€æ‰¿è¯ºçš„ï¼Œæˆ‘å°†ç»§ç»­å‘è¡¨æœ‰å…³ç°ä»£OpenGLè¶…çº§duperçš„æ–‡ç« ã€‚ è°è¿˜æ²¡æœ‰é˜…è¯»ç¬¬ä¸€éƒ¨åˆ†- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¶…ç°ä»£OpenGLã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€éƒ¨åˆ†</a> <br><br> ä¹Ÿè®¸æ‚¨å¾ˆå¹¸è¿ï¼Œæˆ‘å¯ä»¥å°†æ‰€æœ‰å‰©ä½™çš„ææ–™æ¨åˆ°æœ¬æ–‡ä¸­ï¼Œä½†å¹¶ä¸ç¡®å®š... <br><a name="habracut"></a><br><h3>  <font color="#4682B4">é˜µåˆ—çº¹ç†</font> </h3><br> çº¹ç†æ•°ç»„æ˜¯åœ¨OpenGL 3.0ä¸­æ·»åŠ å›å»çš„ï¼Œä½†ç”±äºæŸäº›åŸå› ï¼Œå¾ˆå°‘æœ‰äººå¯¹æ­¤è¿›è¡Œæ’°å†™ï¼ˆMasonså¯é åœ°éšè—äº†ä¿¡æ¯ï¼‰ã€‚ å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰ç¼–ç¨‹ï¼ŒçŸ¥é“ä»€ä¹ˆæ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•°ç»„</a> ï¼Œå°½ç®¡æˆ‘æœ€å¥½ä»å¦ä¸€é¢â€œå°è¯•â€ã€‚ <br><br> ä¸ºäº†å‡å°‘çº¹ç†ä¹‹é—´çš„åˆ‡æ¢æ¬¡æ•°ï¼Œä»è€Œå‡å°‘çŠ¶æ€åˆ‡æ¢æ“ä½œï¼Œäººä»¬ä½¿ç”¨äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çº¹ç†åœ°å›¾é›†</a> ï¼ˆä¸€ç§å­˜å‚¨å¤šä¸ªå¯¹è±¡æ•°æ®çš„çº¹ç†ï¼‰ã€‚ ä½†æ˜¯Khronosçš„èªæ˜äººä¸ºæˆ‘ä»¬å¼€å‘äº†ä¸€ç§æ›¿ä»£æ–¹æ³•-é˜µåˆ—çº¹ç†ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†çº¹ç†å­˜å‚¨ä¸ºè¯¥é˜µåˆ—ä¸­çš„å›¾å±‚ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¯ä»¥æ›¿ä»£åœ°å›¾é›†ã€‚  OpenGL Wikiå…³äºmipmapç­‰çš„æè¿°ç•¥æœ‰ä¸åŒï¼Œä½†æ˜¯å¯¹æˆ‘æ¥è¯´ä¼¼ä¹å¤ªå¤æ‚äº†ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">link</a> ï¼‰ã€‚ <br><br> ä¸åœ°å›¾é›†ç›¸æ¯”ï¼Œä½¿ç”¨æ­¤æ–¹æ³•çš„ä¼˜åŠ¿åœ¨äºï¼Œå°±åŒ…è£¹å’Œmipmappingè€Œè¨€ï¼Œæ¯ä¸€å±‚éƒ½è¢«è§†ä¸ºç‹¬ç«‹çš„çº¹ç†ã€‚ <br><br> ä½†æ˜¯å›åˆ°æˆ‘ä»¬çš„å…¬ç¾Šâ€¦â€¦çº¹ç†æ•°ç»„å…·æœ‰ä¸‰ç§ç±»å‹çš„ç›®æ ‡ï¼š <br><br><ul><li>  GL_TEXTURE_1D_ARRAY </li><li>  GL_TEXTURE_2D_ARRAY </li><li>  GL_TEXTURE_CUBE_MAP_ARRAY </li></ul><br> åˆ›å»ºçº¹ç†æ•°ç»„çš„ä»£ç ï¼š <br><br><pre><code class="cpp hljs">GLsizei width = <span class="hljs-number"><span class="hljs-number">512</span></span>; GLsizei height = <span class="hljs-number"><span class="hljs-number">512</span></span>; GLsizei layers = <span class="hljs-number"><span class="hljs-number">3</span></span>; glCreateTextures(GL_TEXTURE_2D_ARRAY, <span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;texture_array); glTextureStorage3D(texture_array, <span class="hljs-number"><span class="hljs-number">0</span></span>, GL_RGBA8, width, height, layers);</code> </pre> <br> æœ€ç»†å¿ƒçš„äººæ³¨æ„åˆ°æˆ‘ä»¬æ­£åœ¨ä¸º2Dçº¹ç†åˆ›å»ºå­˜å‚¨åº“ï¼Œä½†æ˜¯ç”±äºæŸäº›åŸå› ï¼Œæˆ‘ä»¬ä½¿ç”¨3Dæ•°ç»„ï¼Œå› æ­¤è¿™é‡Œæ²¡æœ‰é”™è¯¯æˆ–é”™åˆ«å­—ã€‚ æˆ‘ä»¬å­˜å‚¨2Dçº¹ç†ï¼Œä½†æ˜¯ç”±äºå®ƒä»¬ä½äºâ€œå›¾å±‚â€ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¾—åˆ°äº†3Dé˜µåˆ—ï¼ˆå®é™…ä¸Šï¼Œå­˜å‚¨çš„æ˜¯åƒç´ æ•°æ®ï¼Œè€Œä¸æ˜¯çº¹ç†ã€‚3Dé˜µåˆ—å…·æœ‰åŒ…å«åƒç´ æ•°æ®çš„2Då›¾å±‚ï¼‰ã€‚ <br><br> åœ¨è¿™é‡Œï¼Œå…³äºä¸€ç»´çº¹ç†çš„ç¤ºä¾‹å¾ˆå®¹æ˜“ç†è§£ã€‚  2Dåƒç´ é˜µåˆ—ä¸­çš„æ¯ä¸€è¡Œéƒ½æ˜¯å•ç‹¬çš„1Då±‚ã€‚  Mipmapçº¹ç†ä¹Ÿå¯ä»¥è‡ªåŠ¨åˆ›å»ºã€‚ <br><br> è¿™æ ·ï¼Œæ‰€æœ‰çš„å›°éš¾å°±ç»“æŸäº†ï¼Œå°†å›¾åƒæ·»åŠ åˆ°ç‰¹å®šå›¾å±‚éå¸¸ç®€å•ï¼š <br><br><pre> <code class="cpp hljs">glTextureSubImage3D(texarray, mipmap_level, offset.x, offset.y, layer, width, height, <span class="hljs-number"><span class="hljs-number">1</span></span>, GL_RGBA, GL_UNSIGNED_BYTE, pixels);</code> </pre> <br> ä½¿ç”¨æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¨å¾®æ›´æ”¹ç€è‰²å™¨ <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 450 core layout (location = 0) out vec4 color; layout (location = 0) in vec2 texture_0; uniform sampler2DArray texture_array; uniform uint diffuse_layer; float getCoord(uint capacity, uint layer) { return max(0, min(float(capacity - 1), floor(float(layer) + 0.5))); } void main() { color = texture(texture_array, vec3(texture_0, getCoord(3, diffuse_layer))); }</span></span></code> </pre> <br> æœ€å¥½çš„é€‰æ‹©æ˜¯åœ¨ç€è‰²å™¨å¤–éƒ¨è®¡ç®—æ‰€éœ€çš„å›¾å±‚ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">UBO</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SSBO</a> ï¼ˆå®ƒä¹Ÿç”¨äºä¼ è¾“çŸ©é˜µå’Œè®¸å¤šå…¶ä»–æ•°æ®ï¼Œä½†æ˜¯åˆæ˜¯å¦ä¸€å›äº‹ï¼‰ã€‚ å¦‚æœæ²¡æœ‰äººç­‰å¾…<a href="">tyk_1</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">tyk_2</a> ï¼Œæ‚¨å¯ä»¥é˜…è¯»ã€‚ <br><br> è‡³äºå¤§å°ï¼Œå³GL_MAX_ARRAY_TEXTURE_LAYERSåœ¨OpenGL 3.3ä¸­ä¸º256ï¼Œåœ¨OpenGL 4.5ä¸­ä¸º2048ã€‚ <br><br> å€¼å¾—ä¸€æçš„æ˜¯Samplerå¯¹è±¡ï¼ˆä¸Arrayçº¹ç†æ— å…³ï¼Œä½†å¾ˆæœ‰ç”¨ï¼‰-è¿™æ˜¯ä¸€ä¸ªç”¨äºè°ƒæ•´çº¹ç†å•å…ƒçŠ¶æ€çš„å¯¹è±¡ï¼Œæ— è®ºå½“å‰å°†å“ªä¸ªå¯¹è±¡é™„åŠ åˆ°è¯¥å•å…ƒã€‚ å®ƒæœ‰åŠ©äºå°†é‡‡æ ·å™¨çŠ¶æ€ä¸ç‰¹å®šçº¹ç†å¯¹è±¡åˆ†å¼€ï¼Œä»è€Œæ”¹å–„äº†æŠ½è±¡åº¦ã€‚ <br><br><pre> <code class="cpp hljs">GLuint sampler_state = <span class="hljs-number"><span class="hljs-number">0</span></span>; glGenSamplers(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;sampler_state); glSamplerParameteri(sampler_state, GL_TEXTURE_WRAP_S, GL_REPEAT); glSamplerParameteri(sampler_state, GL_TEXTURE_WRAP_T, GL_REPEAT); glSamplerParameteri(sampler_state, GL_TEXTURE_MAG_FILTER, GL_LINEAR); glSamplerParameteri(sampler_state, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR); glSamplerParameterf(sampler_state, GL_TEXTURE_MAX_ANISOTROPY_EXT, <span class="hljs-number"><span class="hljs-number">16.0f</span></span>);</code> </pre> <br> æˆ‘åˆšåˆšåˆ›å»ºäº†ä¸€ä¸ªé‡‡æ ·å™¨å¯¹è±¡ï¼Œä¸ºä»»ä½•çº¹ç†å•å…ƒå¯ç”¨äº†çº¿æ€§è¿‡æ»¤å’Œ16å€å„å‘å¼‚æ€§è¿‡æ»¤ã€‚ <br><br><pre> <code class="cpp hljs">GLuint texture_unit = <span class="hljs-number"><span class="hljs-number">0</span></span>; glBindSampler(texture_unit, sampler_state);</code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªå°†é‡‡æ ·å™¨ç»‘å®šåˆ°æ‰€éœ€çš„çº¹ç†å•å…ƒï¼Œç„¶åä¸å†æ˜¯æ‰€éœ€çš„bindim 0åˆ°è¯¥å•å…ƒã€‚ <br><br><pre> <code class="cpp hljs">glBindSampler(texture_unit, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br> é“¾æ¥é‡‡æ ·å™¨æ—¶ï¼Œå…¶è®¾ç½®ä¼˜å…ˆäºçº¹ç†å•å…ƒçš„è®¾ç½®ã€‚ ç»“æœï¼šæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç åº“å³å¯æ·»åŠ é‡‡æ ·å™¨å¯¹è±¡ã€‚ æ‚¨å¯ä»¥ä¿ç•™çº¹ç†åˆ›å»ºçš„åŸæ ·ï¼ˆå…·æœ‰è‡ªå·±çš„é‡‡æ ·å™¨çŠ¶æ€ï¼‰ï¼Œè€Œåªéœ€æ·»åŠ ä»£ç æ¥æ§åˆ¶å’Œä½¿ç”¨é‡‡æ ·å™¨å¯¹è±¡ã€‚ <br><br> å½“éœ€è¦åˆ é™¤å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åªéœ€è°ƒç”¨æ­¤å‡½æ•°ï¼š <br><br><pre> <code class="cpp hljs">glDeleteSamplers(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;sampler_state);</code> </pre> <br><h3>  <font color="#4682B4">çº¹ç†è§†å›¾</font> </h3><br> æˆ‘å°†å…¶ç¿»è¯‘ä¸ºâ€œçº¹ç†æŒ‡é’ˆï¼ˆå¯èƒ½æ¯”é“¾æ¥æ›´æ­£ç¡®ï¼Œæˆ‘æ˜¯xsï¼‰â€ï¼Œå› ä¸ºæˆ‘ä¸çŸ¥é“æœ€å¥½çš„ç¿»è¯‘ã€‚ <br><br>  OpenGLçš„è§’åº¦æ˜¯ä»€ä¹ˆï¼Ÿ <br><br> ä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒ‡å‘ä¸å˜ï¼ˆå³å¯å˜ï¼‰çº¹ç†çš„æ•°æ®çš„æŒ‡é’ˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ <br><br><img src="https://habrastorage.org/webt/ul/r0/sy/ulr0syubsujlqfshyemnh6sqdoq.jpeg"><br><br> å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªå…±äº«ç‰¹å®šçº¹ç†å¯¹è±¡çš„texelæ•°æ®çš„å¯¹è±¡ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">C ++ä¸­çš„std :: shared_ptr</a> ã€‚ åªè¦æœ‰è‡³å°‘ä¸€ä¸ªçº¹ç†æŒ‡é’ˆï¼Œé©±åŠ¨ç¨‹åºå°±ä¸ä¼šåˆ é™¤åŸå§‹çº¹ç†ã€‚ <br><br> å¯¹è¯¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wiki</a>è¿›è¡Œäº†æ›´è¯¦ç»†çš„æè¿°ï¼Œè¿˜å€¼å¾—ä¸€è¯»æœ‰å…³çº¹ç†å’Œç›®æ ‡çš„ç±»å‹ï¼ˆå®ƒä»¬ä¸å¿…åŒ¹é…ï¼‰ <br><br> è¦åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è°ƒç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">glGenTexture</a> ï¼ˆä¸éœ€è¦åˆå§‹åŒ–ï¼‰ç„¶åå†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è°ƒç”¨glTextureView</a>æ¥è·å–çº¹ç†æè¿°ç¬¦ã€‚ <br><br><pre> <code class="cpp hljs">glGenTextures(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;texture_view); glTextureView(texture_view, GL_TEXTURE_2D, source_name, internal_format, min_level, level_count, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br> çº¹ç†æŒ‡é’ˆå¯ä»¥æŒ‡å‘Mipmapçš„ç¬¬Nçº§ï¼Œéå¸¸æœ‰ç”¨å’Œæ–¹ä¾¿ã€‚ æŒ‡é’ˆå¯ä»¥æ˜¯çº¹ç†æ•°ç»„ï¼Œæ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œæ­¤æ•°ç»„ä¸­çš„ç‰¹å®šå±‚ï¼Œä¹Ÿå¯ä»¥æ˜¯3Dçº¹ç†çš„åˆ‡ç‰‡ï¼Œä½œä¸º2Dçº¹ç†ã€‚ <br><br><h3>  <font color="#4682B4">ç´¢å¼•å’Œé¡¶ç‚¹çš„å•ä¸ªç¼“å†²åŒº</font> </h3><br> å¥½å§ï¼Œä¸€åˆ‡éƒ½ä¼šå˜å¾—ç®€å•å¿«æ·ã€‚ ä»¥å‰ï¼ŒOpenGLçš„â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡â€</a>è§„èŒƒå»ºè®®å¼€å‘äººå‘˜å°†é¡¶ç‚¹å’Œç´¢å¼•æ•°æ®æ‹†åˆ†åˆ°ä¸åŒçš„ç¼“å†²åŒºä¸­ï¼Œä½†æ˜¯ç°åœ¨æ²¡æœ‰å¿…è¦äº†ï¼ˆå¾ˆé•¿çš„å†å²äº†ï¼‰ã€‚ <br> æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å°†ç´¢å¼•ä¿å­˜åœ¨é¡¶ç‚¹å‰é¢ï¼Œå¹¶å‘Šè¯‰é¡¶ç‚¹åœ¨å“ªé‡Œå¼€å§‹ï¼ˆæ›´ç¡®åˆ‡åœ°è¯´æ˜¯åç§»é‡ï¼‰ï¼Œä¸ºæ­¤ï¼Œæœ‰ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">glVertexArrayVertexBuffer</a> <br><br> è¿™æ˜¯æˆ‘ä»¬çš„å¤„ç†æ–¹å¼ï¼š <br><br><pre> <code class="cpp hljs">GLint alignment = GL_NONE; glGetIntegerv(GL_UNIFORM_BUFFER_OFFSET_ALIGNMENT, &amp;alignment); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GLsizei ind_len = GLsizei(ind_buffer.size() * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">element_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GLsizei vrt_len = GLsizei(vrt_buffer.size() * <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">vertex_t</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GLuint ind_len_aligned = align(ind_len, alignment); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> GLuint vrt_len_aligned = align(vrt_len, alignment); GLuint buffer = GL_NONE; glCreateBuffers(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;buffer); glNamedBufferStorage(buffer, ind_len_aligned + vrt_len_aligned, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>, GL_DYNAMIC_STORAGE_BIT); glNamedBufferSubData(buffer, <span class="hljs-number"><span class="hljs-number">0</span></span>, ind_len, ind_buffer.data()); glNamedBufferSubData(buffer, ind_len_aligned, vrt_len, vrt_buffer.data()); GLuint vao = GL_NONE; glCreateVertexArrays(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;vao); glVertexArrayVertexBuffer(vao, <span class="hljs-number"><span class="hljs-number">0</span></span>, buffer, ind_len_aligned, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">vertex_t</span></span>)); glVertexArrayElementBuffer(vao, buffer);</code> </pre> <br><br><h3>  <font color="#4682B4">é•¶åµŒå’Œè®¡ç®—ç€è‰²</font> </h3><br> æˆ‘ä¸ä¼šå‘Šè¯‰æ‚¨æœ‰å…³é•¶åµŒç»†åˆ†ç€è‰²å™¨çš„ä¿¡æ¯ï¼Œå› ä¸ºGoogleä¸­æœ‰å¾ˆå¤šæœ‰å…³æ­¤å†…å®¹çš„ä¿¡æ¯ï¼ˆä¿„è¯­ï¼‰ï¼Œè¿™é‡Œæœ‰ä¸¤èŠ‚è¯¾ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">1ï¼Œ2ï¼Œ3</a> ã€‚ æˆ‘ä»¬ç»§ç»­è€ƒè™‘ç”¨äºè®¡ç®—çš„ç€è‰²å™¨ï¼ˆbliiinï¼Œè¿˜æœ‰å¾ˆå¤šææ–™ï¼Œæˆ‘ä¼šç®€è¦åœ°å‘Šè¯‰æ‚¨ï¼‰ã€‚ <br><br> è§†é¢‘å¡å…·æœ‰å¤§é‡å†…æ ¸çš„ä¼˜ç‚¹ï¼Œå› æ­¤ï¼Œè§†é¢‘å¡è¢«è®¾è®¡ç”¨äºå¯å¹¶è¡Œæ‰§è¡Œçš„å¤§é‡å°å‹ä»»åŠ¡ã€‚ é¡¾åæ€ä¹‰ï¼Œè®¡ç®—ç€è‰²å™¨å¯ä»¥è§£å†³ä¸å›¾å½¢æ— å…³çš„é—®é¢˜ï¼ˆä¸å¿…è¦ï¼‰ã€‚ <br><br> å›¾ç‰‡ï¼Œæˆ‘ä¸çŸ¥é“è¯¥æ€ä¹ˆç§°å‘¼ï¼ˆå°±åƒæµè¢«åˆ†ç»„ä¸€æ ·ï¼‰ã€‚ <br><br><img src="https://habrastorage.org/webt/tw/3a/x_/tw3ax_rzsrwx5look90ggm5xehw.jpeg"><br><br> æˆ‘ä»¬å¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Ÿ <br><br><ul><li> å½±åƒå¤„ç† <ol><li> å¸ƒå¢å§† </li><li> åŸºäºå›¾å—çš„ç®—æ³•ï¼ˆå»¶è¿Ÿç€è‰²ï¼‰ </li></ol></li><li> æ¨¡æ‹Ÿ <br><ol><li> å¾®ç²’ </li><li> æ°´ </li></ol></li></ul><br> æ­¤å¤–ï¼Œæˆ‘è®¤ä¸ºæ²¡æœ‰ç†ç”±å†™ï¼ŒGoogleä¸­ä¹Ÿæœ‰å¾ˆå¤šä¿¡æ¯ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç”¨æ³•ç¤ºä¾‹ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//     glUseProgramStages( pipeline, GL_COMPUTE_SHADER_BIT, cs); // ,    / glBindImageTexture( 0, tex, 0, GL_FALSE, 0, GL_WRITE_ONLY, GL_RGBA8); // 80x45   (  1280720) glDispatchCompute( 80, 45, 1);</span></span></code> </pre> <br><br> è¿™æ˜¯ä¸€ä¸ªç©ºçš„è®¡ç®—ç€è‰²å™¨çš„ç¤ºä¾‹ï¼š <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 430 layout(local_size_x = 1, local_size_y = 1) in; layout(rgba32f, binding = 0) uniform image2D img_output; void main() { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// base pixel color for image vec4 pixel = vec4(0.0, 0.0, 0.0, 1.0); // get index in global work group ie x,y position ivec2 pixel_coords = ivec2(gl_GlobalInvocationID.xy); // // interesting stuff happens here later // // output to a specific pixel in the image imageStore(img_output, pixel_coords, pixel); }</span></span></span></span></code> </pre> <br><br> ä»¥ä¸‹æ˜¯ä¸€äº›é“¾æ¥ï¼Œå¯ä»¥æ›´æ·±å…¥åœ°äº†è§£<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">1ã€2ã€3ã€4</a> ã€‚ <br><br><h3>  <font color="#4682B4">è·¯å¾„æ¸²æŸ“</font> </h3><br> è¿™æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NVidiaçš„</a>æ–°æ‰©å±•ï¼ˆä¸æ˜¯æ–°æ‰©å±•ï¼‰ï¼Œå…¶ä¸»è¦ç›®æ ‡æ˜¯çŸ¢é‡2Dæ¸²æŸ“ã€‚ æˆ‘ä»¬å¯ä»¥å°†å…¶ç”¨äºæ–‡æœ¬æˆ–UIï¼Œå¹¶ä¸”ç”±äºå›¾å½¢æ˜¯çŸ¢é‡ï¼Œå› æ­¤å®ƒä¸ä¾èµ–äºåˆ†è¾¨ç‡ï¼Œè¿™æ— ç–‘æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜ç‚¹ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„UIçœ‹èµ·æ¥å¾ˆæ£’ã€‚ <br><br> åŸºæœ¬æ¦‚å¿µæ˜¯æ¨¡ç‰ˆï¼Œç„¶åæ˜¯å°é¢ï¼ˆåŸä»¶ä¸­çš„å°é¢ï¼‰ã€‚ è®¾ç½®è·¯å¾„æ¨¡å…·ï¼Œç„¶åå¯è§†åŒ–åƒç´ ã€‚ <br><br> å¯¹äºç®¡ç†ï¼Œä½¿ç”¨æ ‡å‡†GLuintï¼Œå¹¶ä¸”createå’Œdeleteå‡½æ•°å…·æœ‰æ ‡å‡†å‘½åçº¦å®šã€‚ <br><br><pre> <code class="cpp hljs">glGenPathsNV <span class="hljs-comment"><span class="hljs-comment">//  glDeletePathsNV // </span></span></code> </pre> <br><br> ä»¥ä¸‹æ˜¯æœ‰å…³å¦‚ä½•è·å–è·¯å¾„çš„ä¸€äº›ä¿¡æ¯ï¼š <br><ul><li> å­—ç¬¦ä¸²'eä¸­çš„SVGæˆ–PostScript <pre> <code class="cpp hljs">glPathStringNV</code> </pre> </li><li> å…·æœ‰ç›¸åº”åæ ‡çš„å‘½ä»¤æ•°ç»„ <pre> <code class="cpp hljs">glPathCommandsNV</code> </pre> å¹¶ç”¨äºæ›´æ–°æ•°æ® <pre> <code class="cpp hljs">glPathSubCommands, glPathCoords, glPathSubCoords</code> </pre> </li><li> å­—å‹ <pre> <code class="cpp hljs">glPathGlyphsNV, glPathGlyphRangeNV</code> </pre> </li><li> ç°æœ‰è·¯å¾„çš„çº¿æ€§ç»„åˆï¼ˆä¸€ä¸ªï¼Œä¸¤ä¸ªæˆ–å¤šä¸ªè·¯å¾„çš„æ’å€¼ï¼‰ <pre> <code class="cpp hljs">glCopyPathNV, glInterpolatePathsNV, glCombinePathsNV</code> </pre> </li><li> ç°æœ‰è·¯å¾„çš„çº¿æ€§å˜æ¢ <pre> <code class="cpp hljs">glTransformPathNV</code> </pre> </li></ul><br> æ ‡å‡†å‘½ä»¤åˆ—è¡¨ï¼š <br><br><ul><li> ç§»è‡³ï¼ˆxï¼Œyï¼‰ </li><li> å°é—­è·¯å¾„ </li><li> çº¿åˆ°ï¼ˆxï¼Œyï¼‰ </li><li> äºŒæ¬¡æ›²çº¿ï¼ˆx1ï¼Œy1ï¼Œx2ï¼Œy2ï¼‰ </li><li> ç«‹æ–¹æ›²çº¿ï¼ˆx1ï¼Œy1ï¼Œx2ï¼Œy2ï¼Œx3ï¼Œy3ï¼‰ </li><li> å¹³æ»‘äºŒæ¬¡æ›²çº¿ï¼ˆxï¼Œyï¼‰ </li><li> ä¸‰æ¬¡ä¸‰æ¬¡æ›²çº¿ï¼ˆx1ï¼Œy1ï¼Œx2ï¼Œy2ï¼‰ </li><li> æ¤­åœ†å¼§ï¼ˆrxï¼Œryï¼Œxè½´æ—‹è½¬ï¼Œå¤§å¼§æ ‡å¿—ï¼Œåæ æ ‡å¿—ï¼Œxï¼Œyï¼‰ </li></ul><br> è¿™æ˜¯PostScriptä¸­çš„è·¯å¾„å­—ç¬¦ä¸²ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-string"><span class="hljs-string">"100 180 moveto 40 10 lineto 190 120 lineto 10 120 lineto 160 10 lineto closepathâ€ // "</span></span><span class="hljs-number"><span class="hljs-number">300</span></span> <span class="hljs-number"><span class="hljs-number">300</span></span> moveto <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">400</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">300</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> curveto <span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-number"><span class="hljs-number">400</span></span> <span class="hljs-number"><span class="hljs-number">300</span></span> <span class="hljs-number"><span class="hljs-number">300</span></span> curveto closepathâ€ <span class="hljs-comment"><span class="hljs-comment">//</span></span></code> </pre> <br> åœ¨SVGä¸­ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-string"><span class="hljs-string">"M100,180 L40,10 L190,120 L10,120 L160,10 zâ€ // "</span></span>M300 <span class="hljs-number"><span class="hljs-number">300</span></span> C <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">400</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span>,<span class="hljs-number"><span class="hljs-number">300</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-number"><span class="hljs-number">200</span></span>,<span class="hljs-number"><span class="hljs-number">500</span></span> <span class="hljs-number"><span class="hljs-number">400</span></span>,<span class="hljs-number"><span class="hljs-number">300</span></span> <span class="hljs-number"><span class="hljs-number">300</span></span>Zâ€ <span class="hljs-comment"><span class="hljs-comment">//</span></span></code> </pre> <br> ä»ç„¶æœ‰å„ç§ç±»å‹çš„ofå¤´ï¼ŒåŒ…æ‹¬é¦…æ–™ï¼Œè¾¹ç¼˜ï¼ŒæŠ˜å¼¯ç±»å‹ï¼š <br><br><img src="https://habrastorage.org/webt/wx/uy/wv/wxuywvdg2rfuxlrrasn_hh9yzkm.jpeg"><br><br> æˆ‘ä¸ä¼šåœ¨è¿™é‡Œæè¿°æ‰€æœ‰å†…å®¹ï¼Œå› ä¸ºææ–™å¾ˆå¤šï¼Œå¹¶ä¸”å°†å ç”¨æ•´ç¯‡æ–‡ç« çš„å†…å®¹ï¼ˆå¦‚æœæœ‰æ„æ€ï¼Œæˆ‘ä¼šä»¥æŸç§æ–¹å¼ç¼–å†™ï¼‰ã€‚ <br><br> è¿™æ˜¯æ¸²æŸ“å›¾å…ƒçš„åˆ—è¡¨ <br><br><ul><li> ä¸‰æ¬¡æ›²çº¿ </li><li> äºŒæ¬¡æ›²çº¿ </li><li> çº¿æ•° </li><li> å­—ä½“å­—å½¢ </li><li> å¼§çº¿ </li><li> çŸ­åˆ’çº¿å’Œå°¾ç›–æ ·å¼ </li></ul><br> è¿™æ˜¯ä¸€äº›ä»£ç ï¼Œç„¶åæœ‰å¾ˆå¤šæ–‡æœ¬ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// SVG  glPathStringNV( pathObj, GL_PATH_FORMAT_SVG_NV, strlen(svgPathString), svgPathString); //  glStencilFillPathNV( pathObj, GL_COUNT_UP_NV, 0x1F); // //  ( ) glCoverFillPathNV( pathObj, GL_BOUNDING_BOX_NV);</span></span></code> </pre> <br> ä»…æ­¤è€Œå·²ã€‚ <br><br> åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™ç¯‡æ–‡ç« çš„æœ‰è¶£æ€§å’Œä¿¡æ¯æ€§è¾ƒå·®ï¼Œå¾ˆéš¾é€‰å‡ºææ–™ä¸­çš„ä¸»è¦å†…å®¹ã€‚ å¦‚æœæœ‰äººæœ‰å…´è¶£äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œæˆ‘å¯ä»¥ä¸¢å¼ƒä¸€äº›NVidiaèµ„æ–™å’ŒæŒ‡å‘è§„èŒƒçš„é“¾æ¥ï¼ˆå¦‚æœæˆ‘è®°å¾—ä¿å­˜å®ƒä»¬çš„ä½ç½®ï¼‰ã€‚ æˆ‘ä¹Ÿå¾ˆé«˜å…´åœ¨ç¼–è¾‘æœ¬æ–‡æ–¹é¢æœ‰ä»»ä½•å¸®åŠ©ã€‚ <br><br> æŒ‰ç…§æ‰¿è¯ºï¼Œæˆ‘å°†æ’°å†™ä»¥ä¸‹æœ‰å…³ä¼˜åŒ–å’Œå‡å°‘ç»˜å›¾è°ƒç”¨çš„æ–‡ç« ã€‚ æˆ‘æƒ³è¯·æ‚¨åœ¨è¯„è®ºä¸­å†™ä¸€äº›æ‚¨è¿˜è¦é˜…è¯»çš„å†…å®¹ä»¥åŠæ‚¨æ„Ÿå…´è¶£çš„å†…å®¹ï¼š <br><ul><li> åœ¨cocos2d-xä¸Šç¼–å†™æ¸¸æˆï¼ˆä»…ç»ƒä¹ ï¼Œæ— æ°´ï¼‰ </li><li> æœ‰å…³Vulkançš„ä¸€ç³»åˆ—æ–‡ç« çš„ç¿»è¯‘ </li><li>  OpenGLä¸Šçš„ä¸€äº›ä¸»é¢˜ï¼ˆå››å…ƒæ•°ï¼Œæ–°åŠŸèƒ½ï¼‰ </li><li> è®¡ç®—æœºå›¾å½¢ç®—æ³•ï¼ˆç…§æ˜ï¼Œç©ºé—´å±å¹•ç¯å¢ƒå…‰é®æŒ¡ï¼Œç©ºé—´å±å¹•åå°„ï¼‰ </li><li> æ‚¨çš„é€‰æ‹© </li></ul><br><br> è°¢è°¢å¤§å®¶çš„å…³æ³¨ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN457380/">https://habr.com/ru/post/zh-CN457380/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN457354/index.html">æ€§èƒ½æµ‹è¯•çš„æ•°æ®æ··æ·†</a></li>
<li><a href="../zh-CN457362/index.html">RUVDSçš„æ¨å¹¿ï¼šåœ¨å¤å¤©å‡†å¤‡æœåŠ¡å™¨</a></li>
<li><a href="../zh-CN457366/index.html">ç‹‚çƒ­è€…ï¼Œé“æ†æˆ–è§‚ä¼—-æ‚¨æ˜¯å“ªç§æ¸¸æˆç©å®¶ï¼Ÿ</a></li>
<li><a href="../zh-CN457374/index.html">å‡å°‘æ‚¨çš„Androidé¡¹ç›®çš„æ„å»ºæ—¶é—´</a></li>
<li><a href="../zh-CN457378/index.html">id Softwareå¦‚ä½•æ ¹æ®Commander Keençš„æŠ€æœ¯åˆ›å»ºWolfenstein 3D</a></li>
<li><a href="../zh-CN457382/index.html">é«˜æ€§èƒ½ç¨‹åºå‘˜çš„7ä¸ªä¹ æƒ¯</a></li>
<li><a href="../zh-CN457386/index.html">Linuxè™šæ‹Ÿæ¥å£ç®€ä»‹ï¼šéš§é“</a></li>
<li><a href="../zh-CN457390/index.html">é©¬è¾¾åŠ æ–¯åŠ -å¯¹æ¯”ä¹‹å²›</a></li>
<li><a href="../zh-CN457392/index.html">èŠ‚çœç§»åŠ¨è·¨å¹³å°å¼€å‘è´¹ç”¨ï¼šSkyengæ¡ˆä¾‹ç ”ç©¶</a></li>
<li><a href="../zh-CN457396/index.html">çƒ­å¯åŠ¨åè‡ªåŠ¨è§£é”æ ¹LUKSå®¹å™¨</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>