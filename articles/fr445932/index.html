<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí™üèª üë∞üèΩ üàπ S√©curit√© des applications client: conseils pratiques pour un d√©veloppeur frontal ‚è∞ üéÜ ü¶Ä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comme vous le savez, la plupart des attaques des pirates BlackHat visent √† compromettre les donn√©es du serveur des applications et services Web. Dans ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>S√©curit√© des applications client: conseils pratiques pour un d√©veloppeur frontal</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445932/"><p>  Comme vous le savez, la plupart des attaques des pirates BlackHat visent √† compromettre les donn√©es du serveur des applications et services Web.  Dans le m√™me temps, la partie cliente est attaqu√©e au moins aujourd'hui.  Selon la d√©finition s√®che, toute attaque est un ensemble de mesures de la part d'un pirate visant le r√©seau et le transfert de donn√©es, les donn√©es et leur substitution, l'infrastructure et les caract√©ristiques techniques de la mise en ≈ìuvre de l'application Web.  Par cons√©quent, les entreprises internationales exigent que les ing√©nieurs de d√©veloppement adoptent une approche plus responsable et approfondie de la s√©curit√© des applications clientes. </p><br><p>  Sur l'exemple de mon projet, je parlerai de la fa√ßon dont les applications clientes attaquent aujourd'hui et comment vous pouvez √©viter ces menaces. </p><a name="habracut"></a><br><img alt="Les 10 principales menaces de 2013 √† 2017" src="https://habrastorage.org/webt/ys/zg/d7/yszgd7tqw75npl5bx9pliitikte.jpeg"><br>  <i>Les 10 principales menaces pour 2013-2017.</i> <br><br><p>  Comme vous pouvez le voir, parmi les principales menaces, l'injection, le d√©clenchement d'erreur, le contournement de l'authentification et les donn√©es confidentielles non s√©curis√©es occupent la premi√®re place.  La menace d'utiliser des composants avec des vuln√©rabilit√©s connues est toujours d'actualit√©.  De nouvelles menaces sont √©galement apparues: piratage du m√©canisme de contr√¥le d'acc√®s, d√©s√©rialisation et s√©rialisation non s√©curis√©es des donn√©es, journalisation et surveillance insuffisamment d√©taill√©es. </p><br><p>  En 2001, Mark Curfy et Dennis Groves ont fond√© l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OWASP</a> (Open Web Application Security Project).  Il s'agit d'un projet international OpenSource pour l'√©change d'exp√©riences sur la lutte contre les vuln√©rabilit√©s dans les applications clientes, auquel participe un grand nombre d'ing√©nieurs en s√©curit√© des applications.  La communaut√© OWASP remplit le portail d'une multitude d'articles contenant des informations sur les vuln√©rabilit√©s, du mat√©riel de formation, des outils pour tester et repousser les attaques.  Les vraies attaques sont d√©crites, leurs aspects sont r√©v√©l√©s et ce qui doit √™tre fait pour pr√©venir les menaces est d√©crit. </p><br><p>  Pour comprendre quelles menaces sont dangereuses pour un projet, vous devez le tester √† fond.  Pour ce faire, le r√©seau dispose d'applications, de frameworks et de services en ligne qui identifient automatiquement certaines vuln√©rabilit√©s.  Pour les tests locaux, je recommande d'utiliser des applications et des frameworks, et pour tester des projets en fonctionnement, il est √©galement tr√®s utile d'ajouter des services en ligne. </p><br><img src="https://habrastorage.org/webt/zh/c7/ll/zhc7lln_b43msp-lkz7ah0iapmw.jpeg"><br><br><p>  Mais m√™me si les outils de test ne vous ont pas indiqu√© dans les rapports de vuln√©rabilit√©s importantes (ce qui est peu probable), faites toujours attention au stockage des donn√©es sensibles dans le syst√®me de contr√¥le de version, √† la cr√©ation de l'application, au m√©canisme d'authentification, √† l'algorithme de hachage de mot de passe, au chiffrement des donn√©es sensibles, ainsi qu'aux syst√®mes de journalisation et surveiller l'ensemble de l'application Web.  Dans ce cas, il est pr√©f√©rable de jouer en toute s√©curit√© et de ne pas faire aveugl√©ment confiance √† l'automatisation. </p><br><h2>  Git </h2><br><p>  Tout d'abord, parlons des donn√©es sensibles dans Git.  Id√©alement, un r√©f√©rentiel s√©par√© de secrets est allou√© pour stocker les donn√©es sensibles.  De l√†, lors de l'assemblage pour la mise en service, des donn√©es confidentielles sont extraites et cousues dans l'application.  Aujourd'hui, Hashicorp Vault, Keywhiz, Docker secrets, Azure Key Vault et un certain nombre d'autres sont populaires. </p><br><p>  Mais que faire si vous ne disposez pas d'un tel stockage?  Vous pouvez utiliser des outils pour coder et masquer des fichiers avec des secrets qui √©largiront les capacit√©s des syst√®mes de contr√¥le de version. </p><br><p> La premi√®re chose qui me vient √† l'esprit est la solution universelle BlackBox.  Il peut √™tre utilis√© avec n'importe quel syst√®me de contr√¥le de version, par exemple, Mercurial, Git, etc.  De plus, il existe deux extensions pour Git: git-crypt et git-secret.  Je recommande d'utiliser le second, car il m'a sembl√© le plus pratique √† utiliser et le plus compr√©hensible en termes de description dans la documentation officielle.  Apr√®s avoir install√© git-secret, vous devez l'initialiser dans le r√©f√©rentiel Git.  N'oubliez pas de sp√©cifier l'extension √† utiliser dans le fichier <b>.gitattributes</b> .  Ensuite, configurez l'accessibilit√© des secrets: identifiez les utilisateurs auxquels vous souhaitez donner acc√®s aux donn√©es sensibles.  Ajoutez ensuite des fichiers contenant des donn√©es sensibles et <code>git-secret-hide</code> les via <code>git-secret-hide</code> .  Vous pouvez obtenir des fichiers cach√©s via <code>git-secret-reveal.</code> </p><br> <code>brew install git-secret              //  <br> git secret init                      //  <br> git secret tell your@gpg.email       &amp;nbsp//   <br> git secret add &lt;files...&gt;             //   <br> git secret hide                      &amp;nbsp//   <br> git secret reveal                    &amp;nbsp//    <br></code> <br><h2>  Webpack </h2><br><p>  Une autre fa√ßon d'√©liminer les menaces consiste √† configurer correctement le webpack.  Pour vous prot√©ger contre les attaques XSS, XEE et similaires, vous devez envisager de respecter les politiques CORS (Cross-origin resource sharing) et CSP (Content Security Policy).  Dans les deux cas, il est important de suivre les en-t√™tes afin de v√©rifier l'authenticit√© de certains scripts utilis√©s dans le projet.  Les navigateurs ont des m√©canismes pour v√©rifier la fiabilit√© d'une source particuli√®re, par exemple, Safari √©mettra des avertissements √† chaque √©tape si CORS et CSP sont configur√©s incorrectement. </p><br><p>  Il existe deux fa√ßons de se conformer √† CORS et CSP.  La premi√®re consiste √† configurer les en-t√™tes de r√©ponse dans le back-end.  La seconde consiste √† enregistrer les deux politiques via des balises META et des attributs.  Cette derni√®re m√©thode est recommand√©e si vous avez des d√©veloppeurs back-end paresseux, ils sont toujours occup√©s et ne sont pas int√©ress√©s par les politiques de s√©curit√©.  Les balises META peuvent √™tre enregistr√©es imm√©diatement lors de la cr√©ation de l'application.  Des plugins comme html-webpack-plugin, html-webpack-exclude-assets-plugin, script-ext-html-webpack-plugin, csp-html-webpack-plugin et crypto nous aideront √† cela.  De plus, si vous avez des ressources tierces dans votre projet (par exemple, des liens vers des polices externes utilis√©es dans CSS; des ressources charg√©es √† partir de CDN, etc.), je recommande √©galement d'utiliser webpack-subresource-Integrity-plugin.  Ainsi, vous informerez le navigateur que les ressources charg√©es dans le script sont fiables, qu'elles ne contiennent aucune injection, qu'elles sont enti√®res et intactes.  Et m√™me si quelqu'un a inject√© des donn√©es malveillantes dans la ressource et que vous les avez t√©l√©charg√©es, vous devez vous y pr√©parer et prot√©ger votre projet contre de telles menaces. </p><br><p>  Je veux pr√™ter <b>une attention particuli√®re</b> √† l'ordre dans lequel les instances de classe pour les plugins sont cr√©√©es.  L'ordre doit √™tre comme ceci: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SHA256 = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) =&gt;</span></span> CRYPTO.createHash(<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>).update( str, <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>).digest(<span class="hljs-string"><span class="hljs-string">'base64'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sha256Str = SHA256( <span class="hljs-string"><span class="hljs-string">''</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() ); [‚Ä¶] <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({   <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'index.html'</span></span>,   <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'public/index.html'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScriptExtHtmlWebpackPlugin({    <span class="hljs-attr"><span class="hljs-attr">custom</span></span>: [{           <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.js$/</span></span>,           <span class="hljs-attr"><span class="hljs-attr">attribute</span></span>: <span class="hljs-string"><span class="hljs-string">'nonce'</span></span>,           <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">'nonce-'</span></span> + sha256Str    }] }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackExcludeAssetsPlugin(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CspHtmlWebpackPlugin({    <span class="hljs-string"><span class="hljs-string">'base-uri'</span></span>: <span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>,    <span class="hljs-string"><span class="hljs-string">'object-src'</span></span>: <span class="hljs-string"><span class="hljs-string">'\'none\''</span></span>,    <span class="hljs-string"><span class="hljs-string">'script-src'</span></span>: [<span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'unsafe-eval\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'nonce-'</span></span> + sha256Str + <span class="hljs-string"><span class="hljs-string">'\''</span></span>],    <span class="hljs-string"><span class="hljs-string">'style-src'</span></span>: [<span class="hljs-string"><span class="hljs-string">'\'unsafe-inline\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>] }, {    <span class="hljs-attr"><span class="hljs-attr">devAllowUnsafe</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,    <span class="hljs-attr"><span class="hljs-attr">enabled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,    <span class="hljs-attr"><span class="hljs-attr">hashingMethod</span></span>: <span class="hljs-string"><span class="hljs-string">'sha256'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SriPlugin({    <span class="hljs-attr"><span class="hljs-attr">hashFuncNames</span></span>: [<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>, <span class="hljs-string"><span class="hljs-string">'sha384'</span></span>],    <span class="hljs-attr"><span class="hljs-attr">enabled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }), [‚Ä¶]</code> </pre><br><p>  Ensuite, pendant l'assemblage, la <code>&lt;hed&gt;</code> affichera la m√©ta-balise <code>http-equiv=content-security-policy</code> .  Les directives seront √©crites dans l'attribut <code>content</code> , qui indique quels scripts et ressources peuvent √™tre approuv√©s. </p><br><p>  La directive <code>base-uri</code> indique quelle URL de base est utilis√©e pour charger des scripts, CSS, images, etc. </p><br><p>  Les objets ne se chargent g√©n√©ralement pas, d√©finissez donc <code>none</code> sur la directive <code>object-sr</code> c. </p><br><p>  La directive <code>script-src</code> s'applique aux scripts JS. </p><br><p>  N'oubliez pas d'enregistrer un attribut de type <code>nnce-&lt;hshVlue&gt;</code> chaque fois.  De plus, le hachage doit √™tre calcul√© √† l'aide de l'algorithme SHA256 ou SHA512. </p><br><p>  Quant √† la directive <code>style-src</code> , notre projet a une particularit√©: nous utilisons des composants de style pour √©crire du CSS pour chaque composant et les isoler les uns des autres.  Et par cons√©quent, il est n√©cessaire de sp√©cifier qu'en nous, <code>style-src</code> <code>unsafe-inline</code> et <code>self</code> sont utilis√©s dans <code>style-src</code> , sinon les composants style tomberont. </p><br><br><img src="https://habrastorage.org/webt/9x/di/ny/9xdinyh5msrmdszkkdayka1tqya.jpeg"><br><br><p>  La balise de <code>script</code> sera automatiquement d√©finie sur <code>nnce-&lt;hshVlue&gt;</code> , <code>integrity</code> et <code>cross-origin</code> .  Ils indiquent au navigateur que les ressources sont extraites de sources fiables.  Sinon, si le navigateur voit que la ressource ne correspond pas √† CSP ou CORS, il ne chargera tout simplement pas ce script ou fichier CSS, et il √©crira quelque chose dans la console comme: <i>"Faites attention √† ce script, √† cette ligne o√π vous initialisez lui.</i>  <i>Regardez, vous avez quelque chose de mal! "</i>  . </p><br><p>  La documentation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">MDN</a> , OWASP et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">W3C</a> fournit des directives pour l'application des politiques CSP et CORS.  De plus, tout outil de test d'intrusion signalera la conformit√© aux r√®gles CORS et CSP du projet.  Tout cadre ou outil qui effectuera des tests automatiques d'un projet signalera des failles. </p><br><h2>  Authentification des utilisateurs </h2><br><p>  Nous utilisons OpenID Connect et le protocole Kerberos.  Un standard OpenID assez courant est utilis√© pour authentifier les utilisateurs externes. </p><br><p>  Kerberos est plus adapt√© au r√©seau interne, dans la banque il est utilis√© pour l'authentification automatique des employ√©s.  Supposons qu'il existe une machine locale sur laquelle travaille un employ√© de l'organisation.  Il s'est authentifi√© une fois sur cette machine, puis il n'aura plus besoin de saisir √† nouveau le login et le mot de passe: l'employ√© se connecte √† n'importe quelle application et le syst√®me l'authentifie imm√©diatement.  Kerberos a des param√®tres subtils pour la machine locale, ce qui est difficile car il doit √™tre configur√© pour <b>chaque ordinateur et chaque navigateur.</b>  Si Internet Explorer r√©cup√®re normalement les param√®tres par d√©faut et que Chrome r√©cup√®re les param√®tres IE, Firefox doit le configurer s√©par√©ment.  Safari sur MacOS X trouvera les param√®tres lui-m√™me, mais pour Safari sur Windows, vous devrez les sp√©cifier manuellement. </p><br><p>  Vous devez v√©rifier votre application dans tous les navigateurs, que ce soit partout o√π il fonctionne comme il se doit.  Par exemple, si je travaille sur Windows, j'installe Safari localement et y teste mon projet, et si je travaille sur Mac, j'√©l√®ve Windows dans une machine virtuelle pour ex√©cuter l'application sur les versions correspondantes des navigateurs. </p><br><p>  L'authentification peut √™tre impl√©ment√©e dans des applications modernes √† l'aide de Passport.js et de packages de session express, ainsi que du SDK Auth0. </p><br><p>  Si vous ne parvenez pas √† d√©velopper un service d'authentification via OpenID Connect ou tout autre protocole, utilisez une couche proxy, telle que Auth0 et similaires, afin que l'authentification s'effectue via une soci√©t√© tierce sp√©cialis√©e dans la fourniture aux utilisateurs d'un acc√®s s√©curis√© aux ressources Internet. </p><br><p>  Lorsque nous mettons √† niveau une application vers Node.js, nous vous recommandons d'utiliser les packages Passport.js, express-session, etc. sur le serveur.  Pour assurer la s√©curit√© du client, nous √©levons ind√©pendamment le composant pour l'authentification.  N'oubliez pas de sp√©cifier l'attribut de saisie semi-automatique sur le formulaire d'authentification pour exclure la saisie semi-automatique des champs du formulaire. </p><br><h2>  Hachage de mot de passe </h2><br><p>  Le site Web de l'OWASP vous recommande de ne pas utiliser de m√©canismes de hachage de mot de passe int√©gr√©s √† la base de donn√©es.  Pour cela, il est pr√©f√©rable d'utiliser des packages tels que Argon2, PBKDF2, ccrypt et bcrypt.  Dans ma pratique, j'utilise Argon2 - c'est un wrapper pour GCC, les algorithmes PGP / GPG, etc., mais il vous oblige √† installer d'abord le paquet GCC.  Sch√©ma d'utilisation d'Argon2: </p><br><br><pre> <code class="bash hljs">1.  GCC &gt;= 4.8 install $ brew install gcc</code> </pre> <br><pre> <code class="bash hljs">2.     - $ npm install -g node-gyp</code> </pre> <br><pre> <code class="bash hljs">3.   Argon2 $ npm install argon2</code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">4.</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ARGON <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'argon2'</span></span>; ARGON.generateSalt().then( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">salt: string</span></span></span><span class="hljs-function">) =&gt;</span></span> {  ARGON.hash(<span class="hljs-string"><span class="hljs-string">'some-user-password'</span></span>, salt)    .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hash : string</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Successfully created Argon2 hash:'</span></span>, hash);       <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> store the hash in the user database  }); }); argon2.verify( 'previously-created-argon-hash-here', 'some-user-password').then(() =&gt; {  console.log('Successful password supplied!');  // </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> log the user in }).catch(() =&gt; {  console.log('Invalid password supplied!'); });</span></span></code> </pre> <br><h2>  Obfuscation </h2><br><p>  L'obfuscation vous permet de modifier le code afin qu'il ne puisse pas √™tre analys√© en composants.  Apr√®s tout, les attaquants - et pas seulement eux - utilisent tr√®s souvent la r√©tro-ing√©nierie: le programmeur prend un fichier JS et commence √† analyser les sources.  Ainsi, il peut apprendre les m√©thodes utilis√©es ou comprendre le m√©canisme de travail d'un script particulier afin d'impl√©menter du code malveillant.  Ou utilisez ces m√©canismes pour pirater une application Web et mener une attaque furtive. </p><br><p>  Les pirates informatiques n'ont pas de probl√®mes.  Tout d'abord, ils effectuent l'exploration de la ressource, d√©terminent les vuln√©rabilit√©s et attaquent le vecteur.  Par exemple, ils manipulent des donn√©es ou exploitent des vuln√©rabilit√©s contenues dans des protocoles de transport.  Le vecteur d'attaque peut viser les vuln√©rabilit√©s d'un syst√®me d'exploitation particulier; il y en a beaucoup dans n'importe quel syst√®me UNIX.  Mais les vuln√©rabilit√©s ne peuvent √™tre utilis√©es que si l'administrateur a des politiques de s√©curit√© mal configur√©es, par exemple, des URL mal d√©finies qui sortent. </p><br><p>  Ainsi, pour la reconnaissance, l'ing√©nierie inverse est utilis√©e.  Il est impossible de l'exclure compl√®tement, mais cela peut √™tre tr√®s difficile.  Pour cela, divers obfuscateurs sont utilis√©s, dans mon cas - javascript-obfuscator.  Sur cette base, un plugin pour webpack est cr√©√© - webpack-obfuscator.  √âgalement pour webpack cr√©√© obfuscator-loader.  Ce package a des param√®tres recommand√©s pour diff√©rents niveaux de parano√Øaques: faible, moyen et √©lev√©, ils peuvent √™tre trouv√©s sur le site officiel.  Si vous utilisez cet obfuscateur, n'oubliez pas qu'il fonctionne tr√®s mal avec le m√©canisme de minification int√©gr√© au webpack.  N'utilisez pas la minification et l'obfuscation ensemble, sinon l'obfuscateur peut compl√®tement casser le code du script. </p><br><p>  De plus, l'obfuscateur augmente le volume du script et son chargement.  Ici, vous devez d√©cider par vous-m√™me: soit vous am√©liorez la s√©curit√©, la stabilit√© et la fiabilit√©, mais vous perdez en commodit√© et en vitesse;  soit se soucier de la vitesse, mais oublier la s√©curit√©, suivre toutes les directives. </p><br><h2>  Journalisation et surveillance des menaces </h2><br><p>  Il existe une menace telle que l'utilisation de packages avec des vuln√©rabilit√©s d√©j√† connues.  Des analyseurs de menaces tels que npm audit, Snyk et LGTM vous aideront dans de telles situations.  Npm audit est un utilitaire standard int√©gr√© √† npm, mais vous devez constamment appeler cette commande ou proposer des b√©quilles.  Par cons√©quent, je vous conseille d'utiliser Snyk.  Ce projet poss√®de sa propre base de donn√©es avec des vuln√©rabilit√©s.  Lorsque vous d√©marrez le test, Snyk acc√®de √† cette base de donn√©es et t√©l√©charge en toute confidentialit√© le rapport dans votre projet Snyk, qui n'est pas accessible aux tiers.  Certes, vous ne pouvez v√©rifier votre projet gratuitement que 300 fois, et lorsque vous v√©rifiez chaque pr√©-validation, ces 300 tentatives gratuites se terminent tr√®s rapidement.  Par cons√©quent, il est pr√©f√©rable d'ex√©cuter un test pour les hooks de pr√©-push ou de pr√©-fusion. </p><br><p>  L'homme est la vuln√©rabilit√© la plus importante de tout syst√®me.  Par cons√©quent, assurez-vous de v√©rifier le projet avant de commencer √† cr√©er l'application, car m√™me le code source peut contenir quelque chose de malveillant.  C'est bien quand une seule personne a acc√®s au projet, mais nous travaillons g√©n√©ralement en √©quipe.  Et si une sorte de ¬´bien intentionn√©¬ª apparaissait qui d√©cidait de quitter ¬´magnifiquement¬ª l'entreprise et de laisser une marque?  Il faut √©galement garder cela √† l'esprit. </p><br><p>  Je recommande d'utiliser le package Snyk d√®s le d√©but du projet et de lancer l'analyse √† partir de la console.  Tout est simple ici: apr√®s l'installation, d√©finissez le login et le mot de passe du compte, et le test lui-m√™me peut √™tre effectu√© comme ceci: </p><br><ul><li>  Apr√®s avoir install√© la d√©pendance npm i snyk ‚ÄîD et sp√©cifi√© ¬´snyk¬ª: true dans package.json, ex√©cutez: </li></ul><br><pre> <code class="bash hljs">./node_modules/.bin/snyk wizard --dev</code> </pre> <br><ul><li>  Dans package.json, ajoutez des scripts et des param√®tres: </li></ul><br><pre> <code class="javascript hljs">{ ... <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: {  ...  <span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run test:snyk &amp;&amp; npm run test:jest"</span></span>,  ...  <span class="hljs-string"><span class="hljs-string">"test:snyk"</span></span>: <span class="hljs-string"><span class="hljs-string">"snyk test --dev"</span></span>,  ...  <span class="hljs-string"><span class="hljs-string">"prepare"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run prepare:snyk"</span></span>,  <span class="hljs-string"><span class="hljs-string">"prepare:snyk"</span></span>: <span class="hljs-string"><span class="hljs-string">"snyk protect"</span></span> }, <span class="hljs-string"><span class="hljs-string">"husky"</span></span>: {  <span class="hljs-string"><span class="hljs-string">"hooks"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"commit-msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"commitlint -E HUSKY_GIT_PARAMS"</span></span>,   <span class="hljs-string"><span class="hljs-string">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run test:snyk &amp;&amp; npm run lint &amp;&amp; npm run test:jest"</span></span>,   <span class="hljs-string"><span class="hljs-string">"pre-push"</span></span>: [    <span class="hljs-string"><span class="hljs-string">"npm run test:snyk"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run lint"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run test:jest"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run build:production"</span></span>   ],   ...  } }, <span class="hljs-string"><span class="hljs-string">"snyk"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  Ci-dessus, nous avons examin√© une v√©rification locale des menaces de s√©curit√©.  Pour v√©rifier les packages pour les menaces connues, je recommande √©galement d'utiliser LGTM.  Utilisez ce projet en conjonction avec GitHub ou Bitbucket (jusqu'√† ce que vous l'ayez essay√©, ce n'√©tait pas n√©cessaire), et le code sera v√©rifi√© imm√©diatement √† chaque push. </p><br><h2>  Surveillance des applications </h2><br><p>  Dans le domaine du Front-end, les outils sont d√©j√† bien √©tablis; des outils pour tous les go√ªts sont disponibles pour la journalisation et le suivi de la partie client.  Les plus c√©l√®bres sont Sentry, TrackJS et InsightOps.  Sentry Server peut √™tre d√©ploy√© sur ses serveurs physiques.  Par exemple, dans nos deux projets, nous avons utilis√© un serveur distinct, qui √©tait enti√®rement configur√© pour enregistrer le fonctionnement des applications.  Nous sommes all√©s √† l'URL et y avons d√©pos√© tous les journaux.  Si une erreur se produit dans l'application, elle est envelopp√©e dans un bloc try catch et envoy√©e au serveur Sentry via les m√©thodes du package raven.  Tout est simple et pratique.  Si vous voyez des URL obscures dans Sentry que vous n'avez pas enregistr√©es, si vous voyez des incorporations ou des messages obscurs, alors ils essaient de vous pirater.  Dans ma pratique, cela arrivait r√©guli√®rement.  Par exemple, l'un des projets - un service pour contourner les bloqueurs de publicit√©s et les antivirus - essayait constamment de contrecarrer, de casser. </p><br><p>  Pour la surveillance, je recommande √©galement d'utiliser Grafana.  Il est important de consid√©rer un syst√®me de crit√®res et d'indicateurs qui sera contr√¥l√© par le syst√®me.  Nous avons suivi le trafic, le retour de la publicit√©, le degr√© de rendu des publicit√©s, le nombre de banni√®res provenant de Yandex, etc.  (projets dans Rambler Group).  Nous devions comprendre comment Yandex fonctionne avec nos demandes, car il s'agit d'un service tiers, ce qui signifie qu'il doit √™tre surveill√©, car s'il √©choue, le projet entier peut s'effondrer compl√®tement. </p><br><p>  Si vous surveillez toutes les communications avec des services tiers, vous trouverez tr√®s rapidement toute erreur.  L'histoire vient de ma pratique: nous avons vu que de Yandex, les r√©ponses publicitaires ont brusquement cess√© de venir.  Il s'est av√©r√© qu'il y avait des dysfonctionnements techniques et l'ensemble du r√©seau publicitaire a connu une forte baisse.  Et ce n'est pas Yandex qui nous a inform√©s en premier, mais nous les avons appel√©s et leur avons demand√© de voir ce qui se passait avec leurs services. </p><br><p>  Quelle est la meilleure fa√ßon de surveiller?  Prenez une petite URL, √©crivez les param√®tres GET et envoyez une demande GET √† cette URL.  C√¥t√© serveur, traitez cette URL, √©crivez le journal dans la base de donn√©es et augmentez la surveillance √† Grafana.  Tout est simple. </p><br><p>  C‚Äôest tout.  √Ä l'avenir, j'essaierai de continuer √† √©crire sur le th√®me de la protection des applications Web contre les menaces.  √Ä tous ceux qui ont lu jusqu'au bout - je souhaite la s√©curit√© √† vos projets))) </p><br><h3>  Liste des sources de lecture sur le sujet: </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">www.owasp.org/index.php/Main_Page</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tproger.ru/translations/webapp-security</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">S. Hawks.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Application Single Page encore plus rapide: s√©curit√©</a> </p><br><p>  Seacord, Robert C. Norme de codage s√©curis√© CERT C / Robert C. Seacord.  - 2008 </p><br><p>  Chetan Karande.  S√©curisation des applications de n≈ìuds - 2017 </p><br><p>  Steven Palmer.  Les vuln√©rabilit√©s des applications Web d√©tectent, exploitent et pr√©viennent - 2011 </p><br><p>  Robert Shimonski, Sean-Philip Oriyano.  Attaques c√¥t√© client et d√©fense - 2012 </p><br><p>  Marcus Pinto, Dafydd Stuttard.  Manuel du pirate d'applications Web: recherche et exploitation des failles de s√©curit√©, 2e √©dition - 2011 </p><br><p>  Karl Duuna.  S√©curisez votre application Web Node.js - 2015 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445932/">https://habr.com/ru/post/fr445932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445920/index.html">En direct: comment freiner le d√©veloppement iOS dans de grandes √©quipes</a></li>
<li><a href="../fr445922/index.html">Pourquoi regarder des √©missions en ligne si vous pouvez lire Habr</a></li>
<li><a href="../fr445924/index.html">TR√âSORS: quand les montres intelligentes deviennent √©tranges</a></li>
<li><a href="../fr445926/index.html">Le programme UFO Secret des √âtats-Unis a √©galement √©tudi√© les trous de ver et les dimensions suppl√©mentaires.</a></li>
<li><a href="../fr445928/index.html">Comment nous avons augment√© la productivit√© de Tensorflow au service de 70%</a></li>
<li><a href="../fr445936/index.html">D√©veloppement √©lectronique. √Ä propos des microcontr√¥leurs sur les doigts</a></li>
<li><a href="../fr445940/index.html">AMA avec Habr, v 7.0. Citron, beignets et nouvelles</a></li>
<li><a href="../fr445946/index.html">MWC: mode d'emploi</a></li>
<li><a href="../fr445948/index.html">H√©ritage en C ++: d√©butant, interm√©diaire, avanc√©</a></li>
<li><a href="../fr445952/index.html">Un billion de petits c√©libataires</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>