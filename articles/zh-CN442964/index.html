<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â™ ï¸ ğŸ”¯ ğŸ—» è§£ææˆ–è‡ªå·±åŠ¨æ‰‹åšDOMçš„è‰ºæœ¯ ğŸ¤›ğŸ¼ ğŸ› ï¸ â—ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å“ˆHaï¼ æœ€è¿‘ï¼Œæˆ‘æƒ³åˆ°äº†åˆ›å»ºä¸€ç§ç®€å•çš„æ ‡è®°è¯­è¨€ï¼ˆå¦‚markdownï¼‰çš„æƒ³æ³•ï¼Œè¯¥è¯­è¨€éå¸¸é€‚åˆæˆ‘çš„ä»»åŠ¡ï¼Œå³å¿«é€Ÿç¼–å†™å…·æœ‰æ ¼å¼çš„è®²ä¹‰ä»¥åŠä»…ä½¿ç”¨ä¸€ä¸ªé”®ç›˜å³å¯â€œå³æ—¶â€æ’å…¥æ•°å­¦å…¬å¼çš„åŠŸèƒ½ã€‚ è¦å°†ä»¥è¿™ç§æ ¼å¼ç¼–å†™çš„æ–‡æœ¬è½¬æ¢æˆæ›´æ˜“äºç†è§£çš„å½¢å¼ï¼ˆä¾‹å¦‚LibreOffice Writeræ–‡æ¡£ï¼‰ï¼Œæ‚¨éœ€è¦ä¸€ä¸ªè§£æå™¨ ï¼Œæ¢å¥è¯è¯´...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>è§£ææˆ–è‡ªå·±åŠ¨æ‰‹åšDOMçš„è‰ºæœ¯</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442964/">å“ˆHaï¼ æœ€è¿‘ï¼Œæˆ‘æƒ³åˆ°äº†åˆ›å»ºä¸€ç§ç®€å•çš„æ ‡è®°è¯­è¨€ï¼ˆå¦‚markdownï¼‰çš„æƒ³æ³•ï¼Œè¯¥è¯­è¨€éå¸¸é€‚åˆæˆ‘çš„ä»»åŠ¡ï¼Œå³å¿«é€Ÿç¼–å†™å…·æœ‰æ ¼å¼çš„è®²ä¹‰ä»¥åŠä»…ä½¿ç”¨ä¸€ä¸ªé”®ç›˜å³å¯â€œå³æ—¶â€æ’å…¥æ•°å­¦å…¬å¼çš„åŠŸèƒ½ã€‚ è¦å°†ä»¥è¿™ç§æ ¼å¼ç¼–å†™çš„æ–‡æœ¬è½¬æ¢æˆæ›´æ˜“äºç†è§£çš„å½¢å¼ï¼ˆä¾‹å¦‚LibreOffice Writeræ–‡æ¡£ï¼‰ï¼Œæ‚¨éœ€è¦<i>ä¸€ä¸ªè§£æå™¨</i> ï¼Œæ¢å¥è¯è¯´å°±æ˜¯<i>è§£æå™¨</i> ã€‚ ç”±äºæˆ‘ä»¥å‰ç»å¸¸éª‘è‡ªè¡Œè½¦ï¼Œæ‰€ä»¥æˆ‘å»æœç´¢å¼•æ“æŸ¥è¯¢â€œè§£æå™¨ç¤ºä¾‹â€ï¼Œâ€œ htmlè½¬æ¢ä¸ºDOMâ€ï¼Œâ€œå¦‚ä½•è§£æhtmlâ€ç­‰ã€‚ä»¤æˆ‘å¤±æœ›çš„æ˜¯ï¼Œåœ¨æ‰€æœ‰æ‰¾åˆ°çš„èµ„æºä¸Šï¼Œè¦ä¹ˆæ˜¯åŸºæœ¬ç¤ºä¾‹ï¼ˆä¾‹å¦‚å¸¦æœ‰é€’å½’çš„Straustrupè®¡ç®—å™¨ï¼‰æˆ–ä½¿ç”¨ç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚flexï¼Œbisonï¼Œllvmå’Œyaccã€‚ è¿˜æœ‰æ›´å¤šçš„åº“ç”¨äºè§£æä¸¥æ ¼å®šä¹‰çš„è¯­è¨€ï¼ˆgumboï¼Œjsoupï¼Œrapidjsonï¼ŒQtå·¥å…·ç­‰ï¼‰ã€‚æˆ‘éƒ½ä¸æ‰“ç®—ä»…ä½¿ç”¨æ ‡å‡†åº“æ¥ç”¨C ++ç¼–å†™è‡ªå·±çš„æ ‡è®°è§£æå™¨ï¼Œè€Œæ˜¯æˆ‘çš„è®¡åˆ’çš„ä¸€éƒ¨åˆ†ã€‚æŠ€æœ¯å­¦é™¢çš„æ‰‹å†Œä»£æ›¿äº†ç”µå­èµ„æºï¼Œè€Œæˆä¸ºäº†è§£ææŠ€æœ¯çŸ¥è¯†çš„æ¥æºã€‚ å…³äºå¦‚ä½•è·å–æ–‡æœ¬å¹¶ä»å…¶æ„å»ºASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ï¼Œå…³äºæˆ‘åœ¨æ­¤è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é™·é˜±ï¼Œæˆ‘å°†å‘Šè¯‰æ‚¨ä»Šå¤©å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚ <br><br> æˆ‘å°†ç«‹å³è¿›è¡Œä¿ç•™-å¦‚æœæ‚¨çš„ç›®æ ‡æ˜¯ä½¿ç”¨è‡ªå·±çš„è„šæœ¬è¯­è¨€ç”šè‡³æ›´å¤æ‚ï¼Œé‚£ä¹ˆæœ¬æ–‡ä¸è¶³ä»¥å®ç°ã€‚ ç†æƒ³æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦å®Œå…¨äº†è§£è‡ªåŠ¨æœºå’Œç¦»æ•£ç»“æ„çš„ç†è®ºã€‚ ä½†æš‚æ—¶ï¼Œæˆ‘åªèƒ½å°†è‡ªå·±çš„ç»éªŒé™åˆ¶åœ¨è‡ªå·±çš„ç»éªŒä¸Šï¼Œæˆ‘ä¼šæ…·æ…¨åœ°åˆ†äº«è‡ªå·±çš„ç»éªŒã€‚ è¿™ä¸æˆ‘æœ€åˆçš„æ„å›¾ä¸å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€ä¸ªç†æƒ³çš„ç¤ºä¾‹ã€‚ æˆ‘ä»¬å°†æŠŠHTMLè§£æä¸ºä¸€ç§ç®€å•è€Œç†Ÿæ‚‰çš„è¯­è¨€ã€‚ <br><a name="habracut"></a><br> é¦–å…ˆï¼Œè§£æä¸æ˜¯å°†æ–‡æœ¬è½¬æ¢ä¸ºå¯¹è±¡æ¨¡å‹çš„å®Œæ•´è¿‡ç¨‹çš„åŒä¹‰è¯ã€‚ è¯¥è¿‡ç¨‹æœ¬èº«åŒ…æ‹¬ä¸¤ä¸ªé˜¶æ®µï¼š <br><br><ol><li>  <b>å¯¹</b>æ–‡æœ¬è¿›è¡Œæ ‡è®°çš„<b>è¯æ³•åˆ†æ</b>åªæ˜¯å…¶ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼Œå…·æœ‰ä¸€å®šçš„å¥æ³•å«ä¹‰ã€‚ </li><li>  <b>è§£æ</b>æ˜¯æ ¹æ®ä»¤ç‰Œçš„<i>æŠ½è±¡è¯­æ³•æ ‘</i> ï¼ˆAST-æŠ½è±¡è¯­æ³•æ ‘ï¼‰æˆ–<i>æ–‡æ¡£å¯¹è±¡æ¨¡å‹</i> ï¼ˆDOM-æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰çš„å€¼æ¥æ„é€ ä»¤ç‰Œã€‚ </li></ol><br> ä½†æ˜¯è®©æˆ‘ä»¬æŒ‰é¡ºåºè¿›è¡Œã€‚ åœ¨æ‰“å¼€æ‚¨å–œæ¬¢çš„IDEå¹¶ç¼–å†™ä»£ç ä¹‹å‰ï¼Œæ‚¨éœ€è¦å¼€å‘ä¸€ç§æœªæ¥è¯­è¨€çš„è¯­æ³•ã€‚ åœ¨æ­£å¼çš„æ— ä¸Šä¸‹æ–‡è¯­æ³•ä¸­ï¼Œæœ€è‘—åçš„æ˜¯<i>Backus-Naurï¼ˆBNFï¼‰</i> <i>å½¢å¼</i>å’Œ<i>æ‰©å±•çš„Backus-Naurå½¢å¼</i> ã€‚ æˆ‘åˆ©ç”¨äº†å®ƒä»¬çš„å…±ç”Ÿï¼ŒåŒæ—¶å…¼é¡¾äº†ä¸¤ç§å½¢å¼ã€‚ å¯ä»¥é€šè¿‡å…¶ä»–è¡¨è¾¾å¼å®šä¹‰ä»»ä½•è¡¨è¾¾å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre><code class="plaintext hljs">&lt;&gt; = &lt;_1&gt; &lt;_&gt; &lt;_2&gt;</code> </pre> <br> åœ¨è¿™é‡Œï¼Œä¸€ä¸ªè¡¨è¾¾å¼æ˜¯é€šè¿‡ä¸‰ä¸ªå…¶ä»–è¡¨è¾¾å¼æ¥ä¸€ä¸ªå®šä¹‰çš„ã€‚ åè¿‡æ¥ï¼Œå®ƒä»¬ä¹Ÿå¿…é¡»é€šè¿‡â€œç¬¬ä¸‰â€è¡¨è¾¾å¼ç­‰è¡¨ç¤ºã€‚ <br><br> ä»€ä¹ˆæ—¶å€™åœæ­¢ï¼Ÿ <br><br> å½¢å¼è¯­æ³•ä¸­ä»»ä½•è¯­è¨€çš„è¯­æ³•æè¿°éƒ½åŒ…å«ä¸¤ç§ç±»å‹çš„æ ‡è®°ï¼š <i>terminal</i>å’Œ<i>non-terminals</i> ã€‚  <b>éç»ˆç»“ç¬¦</b>æ˜¯éœ€è¦å®šä¹‰ä»¥ä¸‹å†…å®¹çš„è¡¨è¾¾å¼ï¼š <br><br><pre> <code class="plaintext hljs">&lt;_1&gt; = &lt;&gt; (&lt;_&gt; | &lt;_&gt;) &lt;&gt;</code> </pre> <br>  <b>ç»ˆç«¯æ˜¯</b>è‡ªç»™è‡ªè¶³çš„ï¼Œä¸éœ€è¦å®šä¹‰å®ƒä»¬ã€‚ ä¸Šé¢çš„ä¾‹å­å¯ä»¥è¿™æ ·å†™ï¼š <br><br><pre> <code class="plaintext hljs">&lt;&gt; = &lt;_1&gt; "+" &lt;_2&gt; &lt;_1&gt; = &lt;&gt; ("*" | "/") &lt;&gt;</code> </pre> <br> å…¶ä¸­â€œ +â€ï¼Œâ€œ *â€ï¼Œâ€œ /â€æ˜¯ç«¯å­ã€‚ <br> æ‚¨éœ€è¦ç«‹å³ä»è¯­æ³•ä¸­é€‰æ‹©ç»ˆç«¯ï¼Œç”šè‡³å¯ä»¥å°†å®ƒä»¬å†™åœ¨ä¸»è¦å®šä¹‰åº•éƒ¨çš„å•ç‹¬åˆ—è¡¨ä¸­-ç¨åå°†æ´¾ä¸Šç”¨åœºã€‚ <br><br> æœ‰å…³BNFçš„å®Œæ•´è¯´æ˜ï¼Œè¯·å‚è§Wikipedia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a> ã€‚ ç¼–å†™è¯­è¨€è¯­æ³•æ˜¯åˆ›å»ºä¸å®¹å¿è½»æµ®çš„è¯­è¨€çš„é‡è¦é˜¶æ®µã€‚ å…¶ä¸­ä¸€ä¸ªé”™è¯¯å¯èƒ½å¯¼è‡´ä»£ç å®Œå…¨å¤±æ•ˆï¼Œå¿…é¡»é‡æ–°ç¼–å†™ä»£ç ã€‚ å› æ­¤ï¼Œåœ¨è¿›è¡Œä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œè¯·ç¡®ä¿ç¼–è¯‘åçš„è¯­æ³•ä¸­æ²¡æœ‰äº‰è®®æ€§çš„é—®é¢˜ã€‚ å¦‚æœæ‚¨æœ‰ä¸¤ä¸ªç›‘è§†å™¨ï¼Œé‚£ä¹ˆåœ¨å‰©ä¸‹çš„å·¥ä½œä¸­ï¼Œç”¨ä¸€ä¸ªè¯­æ³•æ–‡ä»¶å ç”¨ä¸€ä¸ªç›‘è§†å™¨å°†å¾ˆæ–¹ä¾¿ï¼Œè¿™æ ·æ‚¨åœ¨ç¼–å†™ä»£ç æ—¶å°±å¯ä»¥å¾ˆå¿«å°†è§†çº¿ç§»åˆ°å®ƒä¸Šé¢ã€‚ ç›¸ä¿¡æˆ‘ï¼Œæ‚¨å¿…é¡»ä¸€ç›´è¿™æ ·åšã€‚ è¿™æ˜¯æˆ‘ç¼–è¯‘çš„HTML5 BNFè¯­æ³•ï¼š <br><br><pre> <code class="html hljs xml">(* document *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">document</span></span></span><span class="hljs-tag">&gt;</span></span> = {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">document_part</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">END</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">document_part</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_tag</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">comment</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">macro_tag</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">opening_tag</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">document_part</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">closing_tag</span></span></span><span class="hljs-tag">&gt;</span></span> (* tags *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">opening_tag</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> {&lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> [<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attributes_list</span></span></span><span class="hljs-tag">&gt;</span></span>] {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">closing_tag</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> "/" {&lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_tag</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> "!" {&lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> [<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attributes_list]</span></span></span><span class="hljs-tag"> {&lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} ["/"] "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">comment</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> "!" "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">--</span></span></span><span class="hljs-tag">" &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">comment_text</span></span></span><span class="hljs-tag">&gt;</span></span> "--" "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">macro_tag</span></span></span><span class="hljs-tag">&gt;</span></span> = "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">"</span></span></span><span class="hljs-tag"> "?" &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">macro_text</span></span></span><span class="hljs-tag">&gt;</span></span> "?" "&gt;" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">block_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> = "a" | "abbr" | "address" | "article" | "aside" | "audio" | "b" | "bdo" | "blockquote" | "body" | "button" | "canvas" | "caption" | "cite" | "code" | "colgroup" | "data" | "datalist" | "dd" | "del" | "details" | "dfn" | "dialog" | "div" | "dl" | "dt" | "em" | "fieldset" | "figcaption" | "figure" | "footer" | "form" | "h1" | "h2" | "h3" | "h4" | "h5" | "h6" | "head" | "header" | "html" | "i" | "iframe" | "ins" | "kbd" | "label" | "legend" | "li" | "main" | "map" | "mark" | "meter" | "nav" | "noscript" | "object" | "ol" | "optgroup" | "option" | "output" | "p" | "picture" | "pre" | "progress" | "q" | "ruby" | "rb" | "rt" | "rtc" | "rp" | "s" | "samp" | "script" | "section" | "select" | "small" | "span" | "strong" | "style" | "sub" | "summary" | "sup" | "table" | "tbody" | "td" | "template" | "textarea" | "tfoot" | "th" | "thead" | "time" | "title" | "tr" | "track" | "u" | "ul" | "var" | "video" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_tag_name</span></span></span><span class="hljs-tag">&gt;</span></span> = "area" | "base" | "br" | "col" | "embed" | "hr" | "img" | "input" | "link" | "menuitem" | "meta" | "param" | "source" | "track" | "wbr" (* attributes *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attributes_list</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unquoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single_quoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">double_quoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">empty_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unquoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "=" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unquoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single_quoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "=" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "'" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single_quoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> "'" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">double_quoted_attribute</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "=" {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span>} "\"" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">double_quoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> "\"" <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">attribute_name</span></span></span><span class="hljs-tag">&gt;</span></span> = (<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">letter</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span>) {<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">letter</span></span></span><span class="hljs-tag">&gt;</span></span> | <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span>} {* attribute values *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">unquoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> = /^[\s"'=<span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>/]/ {/^[\s"'=<span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>/]/} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single_quoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> = /^[']/ {/^[']/} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">double_quoted_attribute_value</span></span></span><span class="hljs-tag">&gt;</span></span> = /^["]/ {/^["]/} (* nonterminals *) <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> = {/^[<span class="hljs-tag"><span class="hljs-tag">&lt;&gt;</span></span>]/} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">comment_text</span></span></span><span class="hljs-tag">&gt;</span></span> = ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">macro_text</span></span></span><span class="hljs-tag">&gt;</span></span> = ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">letter</span></span></span><span class="hljs-tag">&gt;</span></span> = /[a-zA-Z]/ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">digit</span></span></span><span class="hljs-tag">&gt;</span></span> = /[0-9]/ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ws</span></span></span><span class="hljs-tag">&gt;</span></span> = " " | "\t" | "\n" (* terminals *) "<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">",</span></span></span><span class="hljs-tag"> "&gt;</span></span>", "/", "!", "?", " ", "\t", "\n"</code> </pre><br> è¯­æ³•å‡†å¤‡å°±ç»ªåï¼Œæ‚¨å¯ä»¥ç»§ç»­è¿›è¡Œè¯æ³•åˆ†æå™¨ï¼ˆè¯æ³•åˆ†æå™¨çš„å¦ä¸€ä¸ªåç§°ï¼Œå› ä¸ºå®ƒé™¤äº†è¿›è¡Œåˆ†æå¤–ï¼Œè¿˜å¯ä»¥è¯†åˆ«æ–‡æ¡£ä¸­çš„è¯æ³•é”™è¯¯ï¼‰ã€‚ ä¹çœ‹ä¹‹ä¸‹ï¼Œä¸€åˆ‡éƒ½å¾ˆç®€å•ï¼šå¸æ”¶å­—ç¬¦ï¼Œå†™å…¥ç¼“å†²åŒºï¼Œå¹¶åœ¨æ£€æµ‹åˆ°å¯†é’¥ç»ˆç«¯æ—¶å°†æ¥æ”¶åˆ°çš„ä»¤ç‰Œç¡®å®šä¸ºå…·æœ‰æŸç§ç±»å‹çš„ä»¤ç‰Œï¼Œå¯¹å—ï¼Ÿ æ˜¯çš„ï¼Œåªæœ‰ä»¤ç‰Œçš„ç±»å‹æ¯”ç¬¦å·æ›´é‡è¦ã€‚ æˆ‘ç°åœ¨è§£é‡Šã€‚ å½“ç„¶ï¼Œåæ±‡ç¼–ï¼ˆifsteamå’Œfileï¼‰è¿‡ç¨‹åº”è¯¥åŒ…å«ä¸€ä¸ªå¾ªç¯ï¼Œè¯¥å¾ªç¯ä»è¾“å…¥æµä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶å°†å…¶å‘é€åˆ°å¤„ç†è¯¥å­—ç¬¦çš„è¿›ç¨‹ï¼ˆconst charï¼†cï¼‰è¿‡ç¨‹ã€‚ ä¼¼ä¹è¯¥å¤„ç†è¿‡ç¨‹éœ€è¦åŒ…å«å¼€å…³Â©ï¼Œå…¶ä¸­æ¯ä¸ªé”®ç¬¦å·éƒ½æœ‰å…¶è‡ªå·±çš„åŠŸèƒ½ï¼Œå…·ä½“å–å†³äºå½“å‰ä»¤ç‰Œçš„ç±»å‹ã€‚ å®é™…ä¸Šï¼Œæƒ…å†µæ°æ°ç›¸åï¼šæœ€å¥½ä½¿ç”¨å¼€å…³æ¥æ£€æŸ¥ä»¤ç‰Œçš„ç±»å‹å¹¶å®šä¹‰å­—ç¬¦çš„åŠŸèƒ½ã€‚ æ­¤å¤–ï¼Œå½“å‰ä»¤ç‰Œé€šå¸¸å…·æœ‰ä¸ç¡®å®šç±»å‹ï¼Œæ˜¯è®¸å¤šç±»å‹ä¹‹ä¸€ã€‚ ä¾‹å¦‚ï¼Œæ‰“å¼€å°–æ‹¬å·åï¼Œæ‚¨ä¼šçœ‹åˆ°ï¼šæ‰“å¼€ï¼Œå…³é—­ï¼Œç©ºæ ‡ç­¾ä»¥åŠHTMLæ ·å¼çš„æ³¨é‡Šæˆ–å®æ ‡ç­¾ï¼ˆPHPè„šæœ¬åŒ…å«åœ¨â€œ &lt;ï¼Ÿ...ï¼Ÿ&gt;â€ä¸­ã€‚å¯¹äºæ‰€æœ‰æ­¤ç±»è”åˆï¼Œæ‚¨éƒ½éœ€è¦è‡ªå·±ä½¿ç”¨å¤§å°å†™ï¼‰ã€‚ä½¿ç”¨ä½æ ‡å¿—ã€‚ç»™å‡ºæœ‰é™æ•°é‡çš„ä»¤ç‰Œç±»å‹ï¼ˆè¶Šå¥½è¶Šå¥½ï¼Œå› ä¸ºè¯æ³•åˆ†æå™¨çš„ä»»åŠ¡æ˜¯ä½¿è¯­æ³•å·¥ä½œå°½å¯èƒ½å°‘ï¼‰ã€‚å¯¹äºæ¯ç§ç±»å‹ï¼Œç»™å‡ºå”¯ä¸€çš„äºŒé˜¶æ•°ï¼ˆ1ã€2ã€4ã€8ç­‰ï¼‰ï¼Œç„¶åä»¥äºŒè¿›åˆ¶æ ¼å¼æ˜¾ç¤ºå¦‚ä¸‹ï¼š0001ï¼Œ0010ï¼Œ0  100ç­‰ï¼Œå¹¶ä¸”æŒ‰ä½æ·»åŠ ä»»ä½•ç±»å‹çš„ä»»ä½•æ•°å­—ï¼Œå°†è·å¾—å”¯ä¸€çš„æ•°å­—ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> Token_type { END = <span class="hljs-number"><span class="hljs-number">1</span></span>, TEXT = <span class="hljs-number"><span class="hljs-number">2</span></span>, OPENING_BLOCK_TAG_NAME = <span class="hljs-number"><span class="hljs-number">4</span></span>, CLOSING_BLOCK_TAG_NAME = <span class="hljs-number"><span class="hljs-number">8</span></span>, EMPTY_TAG_NAME = <span class="hljs-number"><span class="hljs-number">16</span></span>, COMMENT = <span class="hljs-number"><span class="hljs-number">32</span></span>, MACRO_TAG = <span class="hljs-number"><span class="hljs-number">64</span></span>, ATTRIBUTE_NAME = <span class="hljs-number"><span class="hljs-number">128</span></span>, UNQUOTED_ATTRIBUTE_VALUE = <span class="hljs-number"><span class="hljs-number">256</span></span>, SINGLE_QUOTED_ATTRIBUTE_VALUE = <span class="hljs-number"><span class="hljs-number">512</span></span>, DOUBLE_QUOTED_ATTRIBUTE_VALUE = <span class="hljs-number"><span class="hljs-number">1024</span></span> };</code> </pre><br> æˆªæ–­çš„ç¨‹åºè¿‡ç¨‹ï¼š <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">void</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Lexer</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">::process</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">const</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">char</span></span> &amp;<span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span>) { switch (curr_token_type) { case <span class="hljs-attribute"><span class="hljs-attribute">END</span></span>: { throw <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"unexpected ending!"</span></span>); break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">TEXT</span></span>: { if (c == '&gt;') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"&gt;\"!"</span></span>); else if (c == '&lt;') { if (!buffer.empty()) { add(buffer, TEXT); buffer.clear(); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">curr_token_type</span></span> = <span class="hljs-selector-tag"><span class="hljs-selector-tag">OPENING_BLOCK_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">CLOSING_BLOCK_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">EMPTY_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">COMMENT</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">MACRO_TAG</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">else</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">buffer</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.push_back</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">break</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">OPENING_BLOCK_TAG_NAME</span></span>: { throw string("error!"); break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">CLOSING_BLOCK_TAG_NAME</span></span>: { if (c == '&lt;') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"&lt;\"!"</span></span>); else if (c == '/') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"&lt;\"!"</span></span>); else if (c == '!') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"!\"!"</span></span>); else if (c == '?') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"?\"!"</span></span>); else if (c == ' ') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">" \"!"</span></span>); else if (c == '\t') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"\\t\"!"</span></span>); else if (c == '\n') throw string("unexpected <span class="hljs-attribute"><span class="hljs-attribute">symbol</span></span>: \<span class="hljs-string"><span class="hljs-string">"\\n\"!"</span></span>); else if (c == '&gt;') { for (unsigned int i(0); i &lt; BLOCK_TAGS_COUNT; i++) if (buffer == block_tags[i]) { add(buffer, CLOSING_BLOCK_TAG_NAME); buffer.clear(); curr_token_type = TEXT; break; } } <span class="hljs-selector-tag"><span class="hljs-selector-tag">else</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">buffer</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.push_back</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">c</span></span>); <span class="hljs-selector-tag"><span class="hljs-selector-tag">break</span></span>; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">EMPTY_TAG_NAME</span></span>: { throw string("error!"); break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">COMMENT</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">MACRO_TAG</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">OPENING_BLOCK_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">CLOSING_BLOCK_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">EMPTY_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">COMMENT</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">MACRO_TAG</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">EMPTY_TAG_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">COMMENT</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ATTRIBUTE_NAME</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ATTRIBUTE_NAME</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">UNQUOTED_ATTRIBUTE_VALUE</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">SINGLE_QUOTED_ATTRIBUTE_VALUE</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">DOUBLE_QUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">UNQUOTED_ATTRIBUTE_VALUE</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">SINGLE_QUOTED_ATTRIBUTE_VALUE</span></span> | <span class="hljs-selector-tag"><span class="hljs-selector-tag">DOUBLE_QUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">UNQUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">SINGLE_QUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } <span class="hljs-selector-tag"><span class="hljs-selector-tag">case</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">DOUBLE_QUOTED_ATTRIBUTE_VALUE</span></span>: { ... break; } } }</code> </pre><br> æˆ‘ä»¬ç”¨å¼€å…³æ£€æŸ¥æœŸæœ›ä»¤ç‰Œï¼ˆæˆ–ä»¤ç‰Œï¼‰çš„ç±»å‹ï¼Œå¹¶åœ¨æ¯ç§æƒ…å†µä¸‹ç¡®å®šæ¯ä¸ªå…³é”®ç»ˆç«¯çš„ç¨‹åºã€‚ åŠŸèƒ½å¹¶ä¸å¤šï¼Œæ¯ä¸ªäººéƒ½æ‰§è¡Œç®€å•çš„æ“ä½œï¼šå°†å­—ç¬¦æ·»åŠ åˆ°ç¼“å†²åŒºä¸­ï¼Œæˆ–å°†ç¼“å†²åŒºè½¬å‚¨åˆ°ä¸‹ä¸€ä¸ªä»¤ç‰Œä¸­ï¼Œæˆ–æ›´æ”¹æ‰€éœ€çš„ä»¤ç‰Œç±»å‹ï¼Œæˆ–å¼•å‘å¼‚å¸¸ã€‚ ä½¿ç”¨å¯æœç´¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ä½¿ç”¨ä¸Šé¢ç¼–å†™çš„è¯­æ³•å¾ˆå®¹æ˜“ç¡®å®šæ‰€éœ€çš„è¿‡ç¨‹ã€‚ åªéœ€åœ¨å…¶ä»–è¡¨è¾¾å¼çš„å®šä¹‰ä¸­æŸ¥æ‰¾æœŸæœ›æ ‡è®°ï¼ˆæ ‡è®°ï¼‰çš„æ‰€æœ‰åŒ…å«ç‰©ï¼Œç„¶ååœ¨â€œç¬¬ä¸‰â€ä¸­åŒ…å«è¿™äº›è¡¨è¾¾å¼ï¼Œç­‰ç­‰ã€‚ è¿™æ˜¯geditæ–‡æœ¬ç¼–è¾‘å™¨ä¸­çš„å¼€å§‹æ ‡è®°çš„ç¤ºä¾‹ï¼š <br><br><img src="https://habrastorage.org/webt/72/fw/tw/72fwtwt_waeie4ulzftkxua356w.png" alt="å½¢å¼è¯­æ³•å–å‘"><br><br> é¦–å…ˆï¼Œå¯¼èˆªè¯­æ³•å¾ˆå›°éš¾ï¼Œä½†æ˜¯éšç€æ—¶é—´çš„æµé€å’Œç»éªŒçš„ç§¯ç´¯ï¼Œå®ƒå˜å¾—æ¯”åˆ’åˆ†åˆ—æ›´å¤æ‚ã€‚ è¿™æ˜¯åæ±‡ç¼–ç¨‹åºï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Lexer::disassemble (ifstream &amp;file) { tokens_count = <span class="hljs-number"><span class="hljs-number">0</span></span>; curr_token_type = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">line</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pos</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c; curr_token_type = TEXT; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((c = file.get()) != EOF) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c == <span class="hljs-string"><span class="hljs-string">'\n'</span></span>) { pos = <span class="hljs-number"><span class="hljs-number">1</span></span>; line++; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> pos++; process(c); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer.size() != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(curr_token_type | TEXT)) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"text was expected!"</span></span>); add(buffer, TEXT); buffer.clear(); } add(<span class="hljs-string"><span class="hljs-string">""</span></span>, END); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;error) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"lexer: "</span></span> + to_string(line) + <span class="hljs-string"><span class="hljs-string">","</span></span> + to_string(pos) + <span class="hljs-string"><span class="hljs-string">": "</span></span> + error); } }</code> </pre><br> å°†ç±»å‹è®¾ç½®ä¸ºTEXTæ˜¾ç„¶æ˜¯ç¬¬ä¸€ä¸ªé¢„æœŸçš„æ ‡è®°ï¼Œç„¶ååœ¨ç»“å°¾æ·»åŠ ENDç±»å‹çš„æ ‡è®°ä»¥åŠä»»ä½•æ–‡æœ¬ï¼ˆæˆ–ä¸ºç©ºï¼Œå¦‚æ­¤å¤„æ‰€ç¤ºï¼‰ã€‚ <br><br> ä¾‹å¦‚ï¼Œæˆ‘æ‹¿äº†ä¸€ä¸ªå¸¦æ³¨é‡Šçš„HTMLæ–‡æ¡£æ¨¡æ¿ï¼Œåœ¨å…¶ä¸­æ·»åŠ äº†ä¸€ä¸ªä¼ªPHPè„šæœ¬ï¼Œä½¿ç”¨è¯æ³•åˆ†æå™¨å¯¹å…¶è¿›è¡Œäº†å¤„ç†ï¼Œå¹¶ä»¥â€œ [â€œ &lt;token_text&gt;â€ï¼š&lt;token_type&gt;]â€œçš„æ ¼å¼æ˜¾ç¤ºäº†ä»¤ç‰Œåˆ—è¡¨ã€‚ è¿™æ˜¯å‘ç”Ÿäº†ä»€ä¹ˆï¼š <br><br><div class="spoiler">  <b class="spoiler_title">æ–‡ä»¶æœ¬èº«</b> <div class="spoiler_text"><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content-type"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/html"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"author"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Interquadro"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"keywords"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"format-detection"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"telephone=no"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"x-rim-auto-match"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"telephone=none"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"referrer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"no-referrer"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_suburl"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shortcut icon"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".ico"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".css"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--[if lt IE 9]&gt; &lt;script src="http://html5shiv.googlecode.com/svn/trunk/html5-els.js"&gt;&lt;/script&gt; &lt;![endif]--&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"intro"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">header</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"nav"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nav</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="php"><span class="hljs-meta"><span class="php"><span class="hljs-meta">&lt;?php</span></span></span><span class="php"> </span><span class="hljs-meta"><span class="php"><span class="hljs-meta">?&gt;</span></span></span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">hr</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">small</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"copyright"</span></span></span><span class="hljs-tag">&gt;</span></span>Copyright Â© 2019.   .<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">small</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">ä»£å¸åˆ—è¡¨</b> <div class="spoiler_text"><pre> [â€œï¼DOCTYPEâ€ï¼šEMPTY_TAG_NAME]
 [â€œ htmlâ€ï¼šATTRIBUTE_NAME]
 [â€œ
 â€œï¼šTEXT]
 [â€œ htmlâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ langâ€ï¼šATTRIBUTE_NAME]
 [â€œ enâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
 â€œï¼šTEXT]
 [â€œå¤´â€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå…ƒâ€ï¼šEMPTY_TAG_NAME]
 [â€œ http-equivâ€ï¼šATTRIBUTE_NAME]
 [â€œå†…å®¹ç±»å‹â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå†…å®¹â€ï¼šATTRIBUTE_NAME]
 [â€œ text / htmlâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå­—ç¬¦é›†â€ï¼šATTRIBUTE_NAME]
 [â€œ utf-8â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå…ƒâ€ï¼šEMPTY_TAG_NAME]
 [â€œåç§°â€ï¼šATTRIBUTE_NAME]
 [â€œä½œè€…â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå†…å®¹â€ï¼šATTRIBUTE_NAME]
 [â€œ Interquadroâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå…ƒâ€ï¼šEMPTY_TAG_NAME]
 [â€œåç§°â€ï¼šATTRIBUTE_NAME]
 [â€œè¯´æ˜â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå†…å®¹â€ï¼šATTRIBUTE_NAME]
 [â€œâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå…ƒâ€ï¼šEMPTY_TAG_NAME]
 [â€œåç§°â€ï¼šATTRIBUTE_NAME]
 [â€œå…³é”®å­—â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå†…å®¹â€ï¼šATTRIBUTE_NAME]
 [â€œâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå…ƒâ€ï¼šEMPTY_TAG_NAME]
 [â€œåç§°â€ï¼šATTRIBUTE_NAME]
 [â€œè§†å£â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå†…å®¹â€ï¼šATTRIBUTE_NAME]
 [â€œå®½åº¦=è®¾å¤‡å®½åº¦ï¼Œåˆå§‹æ¯”ä¾‹= 1â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå…ƒâ€ï¼šEMPTY_TAG_NAME]
 [â€œåç§°â€ï¼šATTRIBUTE_NAME]
 [â€œæ ¼å¼æ£€æµ‹â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå†…å®¹â€ï¼šATTRIBUTE_NAME]
 [â€œç”µè¯=å¦â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå…ƒâ€ï¼šEMPTY_TAG_NAME]
 [â€œ http-equivâ€ï¼šATTRIBUTE_NAME]
 [â€œ x-rim-auto-matchâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå†…å®¹â€ï¼šATTRIBUTE_NAME]
 [â€œç”µè¯=æ— â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå…ƒâ€ï¼šEMPTY_TAG_NAME]
 [â€œåç§°â€ï¼šATTRIBUTE_NAME]
 [â€œå¼•èæ¥æºâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå†…å®¹â€ï¼šATTRIBUTE_NAME]
 [â€œæ— æ¨èäººâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå…ƒâ€ï¼šEMPTY_TAG_NAME]
 [â€œåç§°â€ï¼šATTRIBUTE_NAME]
 [â€œ _suburlâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå†…å®¹â€ï¼šATTRIBUTE_NAME]
 [â€œâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	
	 â€œï¼šTEXT]
 [â€œæ ‡é¢˜â€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œæ ‡é¢˜â€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
	 â€œï¼šTEXT]
 [â€œé“¾æ¥â€ï¼šEMPTY_TAG_NAME]
 [â€œ relâ€ï¼šATTRIBUTE_NAME]
 [â€œå¿«æ·æ–¹å¼å›¾æ ‡â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ hrefâ€ï¼šATTRIBUTE_NAME]
 [â€œ .icoâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
	 â€œï¼šTEXT]
 [â€œé“¾æ¥â€ï¼šEMPTY_TAG_NAME]
 [â€œ relâ€ï¼šATTRIBUTE_NAME]
 [â€œæ ·å¼è¡¨â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œç±»å‹â€ï¼šATTRIBUTE_NAME]
 [â€œ text / cssâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ hrefâ€ï¼šATTRIBUTE_NAME]
 [â€œ .cssâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œæ ‡é¢˜â€ï¼šATTRIBUTE_NAME]
 [â€œâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ

	 â€œï¼šTEXT]
 [â€œ [å¦‚æœæ˜¯IE 9]&gt;
	 &lt;script src =â€œ http://html5shiv.googlecode.com/svn/trunk/html5-els.jsâ€&gt; &lt;/ script&gt;
	 &lt;ï¼[endif]â€œï¼šè¯„è®º
 [â€œ
 â€œï¼šTEXT]
 [â€œå¤´â€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ

 â€œï¼šTEXT]
 [â€œ bodyâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ
	 â€œï¼šTEXT]
 [â€œæ ‡é¢˜â€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ
		 â€œï¼šTEXT]
 [â€œ divâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ idâ€ï¼šATTRIBUTE_NAME]
 [â€œç®€ä»‹â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ

		 â€œï¼šTEXT]
 [â€œ divâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
	 â€œï¼šTEXT]
 [â€œæ ‡é¢˜â€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå¯¼èˆªâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ
		 â€œï¼šTEXT]
 [â€œ ulâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ idâ€ï¼šATTRIBUTE_NAME]
 [â€œå¯¼èˆªâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
			 â€œï¼šTEXT]
 [â€œ liâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œè¯¾ç¨‹â€ï¼šATTRIBUTE_NAME]
 [â€œå¯¼èˆªâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ aâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ hrefâ€ï¼šATTRIBUTE_NAME]
 [â€œï¼ƒâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œé¦–é¡µâ€ï¼šTEXT]
 [â€œ aâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ liâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
			 â€œï¼šTEXT]
 [â€œ liâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œè¯¾ç¨‹â€ï¼šATTRIBUTE_NAME]
 [â€œå¯¼èˆªâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ aâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ hrefâ€ï¼šATTRIBUTE_NAME]
 [â€œï¼ƒâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œè¯„è®ºâ€ï¼šTEXT]
 [â€œ aâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ liâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
			 â€œï¼šTEXT]
 [â€œ liâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œè¯¾ç¨‹â€ï¼šATTRIBUTE_NAME]
 [â€œå¯¼èˆªâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ aâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ hrefâ€ï¼šATTRIBUTE_NAME]
 [â€œâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œå¸®åŠ©â€ï¼šTEXT]
 [â€œ aâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ liâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
		 â€œï¼šTEXT]
 [â€œ ulâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
	 â€œï¼šTEXT]
 [â€œå¯¼èˆªâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ

	 â€œï¼šTEXT]
 [â€œä¸»è¦â€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ idâ€ï¼šATTRIBUTE_NAME]
 [â€œå†…å®¹â€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œ
		 â€œï¼šTEXT]
 [â€œ phpâ€ï¼šMACRO_TAG]
 [â€œ
	 â€œï¼šTEXT]
 [â€œä¸»è¦â€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ

	 â€œï¼šTEXT]
 [â€œé¡µè„šâ€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ
		 â€œï¼šTEXT]
 [â€œ hrâ€ï¼šEMPTY_TAG_NAME]
 [â€œ
		 â€œï¼šTEXT]
 [â€œå°â€ï¼šOPENING_BLOCK_TAG_NAME]
 [â€œ idâ€ï¼šATTRIBUTE_NAME]
 [â€œç‰ˆæƒâ€ï¼šDOUBLE_QUOTED_ATTRIBUTE_VALUE]
 [â€œç‰ˆæƒæ‰€æœ‰Â©2019ã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚â€  ï¼šTEXT]
 [â€œå°â€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
	 â€œï¼šTEXT]
 [â€œé¡µè„šâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
 â€œï¼šTEXT]
 [â€œ bodyâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ

 â€œï¼šTEXT]
 [â€œ htmlâ€ï¼šCLOSING_BLOCK_TAG_NAME]
 [â€œ
 â€œï¼šTEXT]
 [â€œâ€ï¼šEND]
</pre><br><br></div></div><br> ç°åœ¨æˆ‘ä»¬å‡†å¤‡å¼€å§‹ç¬¬äºŒéƒ¨åˆ†-è¯­æ³•æ ‘çš„æ„å»ºã€‚ ç”±äºæˆ‘ä»¬çš„æ ‡ç­¾å…·æœ‰å±æ€§ï¼Œå› æ­¤æ ‘èŠ‚ç‚¹é™¤ä¸å…¶ä»–èŠ‚ç‚¹é€šä¿¡å¤–ï¼Œè¿˜å°†åŒ…å«é”®å€¼å¯¹æ•°ç»„ã€‚ å¯ä»¥å°†æœ€ç»ˆçš„æ„é€ ç§°ä¸ºæœ¬æ–‡æ ‡é¢˜ä¸­æåˆ°çš„DOMæ–‡æ¡£çš„å¯¹è±¡æ¨¡å‹ã€‚ <br><br> æ‚¨éœ€è¦å¤šå°‘ä¸ªç±»æ¥å®ç°HTMLå…ƒç´ çš„æ‰€æœ‰å±æ€§ï¼Ÿ <br><br> ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªç±»ï¼Œä»¥ä¾¿å¯ä»¥ä¸ºå®ƒä»¬å®šä¹‰çº§è”æ ·å¼è¡¨ï¼Œä½†æ˜¯æˆ‘ä»¬å°†è‡ªå·±é™åˆ¶ä¸ºä¸‰ä¸ª-ä¸€ä¸ªç©ºçš„â€œ Nodeâ€æ ‡ç­¾ï¼Œä¸€ä¸ªç»§æ‰¿çš„â€œ Blockâ€å—ï¼ˆå†…å®¹åŒ…å«åœ¨ä¸¤ä¸ªæˆå¯¹æ ‡ç­¾ä¹‹é—´ï¼‰ä»¥åŠä»ä»–ä¸æ ¹æ ‘çš„æ ¹ã€‚ æˆ‘ä»¬è¿˜åœ¨è§£æå™¨ä¸­å®šä¹‰äº†ä¸€ä¸ªæ ‡ç­¾æ•°ç»„ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«æ–‡æœ¬ï¼Œä¾‹å¦‚&lt;p&gt;ï¼Œ&lt;li&gt;ï¼Œ&lt;strong&gt;ç­‰ï¼Œä»¥æ¸…é™¤å¸¦æœ‰æœªæ”¾ç½®æ–‡æœ¬çš„æ ‡è®°ã€‚ ç°åœ¨ç”±å°å†³å®šã€‚ å¦‚æœæ‚¨åœ¨è¯æ³•åˆ†æå™¨ä¸Šå·¥ä½œå¾—å¾ˆå¥½ï¼Œé‚£ä¹ˆè¯­æ³•ä¸Šçš„ä»»åŠ¡å°±æ˜¯å¸æ”¶æ ‡è®°å¹¶åœ¨æ‰“å¼€çš„èŠ‚ç‚¹ä¸­æ‰§è¡Œä»¥ä¸‹ä¸‰ç§æ“ä½œä¹‹ä¸€ï¼šå‘å…¶æ·»åŠ ä¸€ä¸ªç©ºèŠ‚ç‚¹ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°èŠ‚ç‚¹æˆ–é€šè¿‡å°†æŒ‡é’ˆè¿”å›ç»™çˆ¶èŠ‚ç‚¹è‡ªå·±å…³é—­å®ƒã€‚ å¯¹äºåè€…ï¼Œè¦æ±‚æ‰€æœ‰ç±»ï¼ˆä»åŸºæœ¬Nodeå¼€å§‹ï¼‰éƒ½åŒ…å«åœ¨åˆ›å»ºå…ƒç´ æ—¶è·å¾—çš„æ­¤ç±»æŒ‡é’ˆã€‚ æ­¤è¿‡ç¨‹ç§°ä¸ºè‡ª<i>é¡¶å‘ä¸‹è§£æ</i> ã€‚ <br><br> è§£æè¿‡ç¨‹ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Parser::parse (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Lexer &amp;lexer) { Block * open_block = (Block*) tree; Node * last_node = (Node*) tree; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> size = lexer.count(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> i(<span class="hljs-number"><span class="hljs-number">0</span></span>); i &lt; size<span class="hljs-number"><span class="hljs-number">-2</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (lexer[i].type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::TEXT: { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j(<span class="hljs-number"><span class="hljs-number">0</span></span>); j &lt; TEXT_TAGS_COUNT; j++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (open_block-&gt;get_name() == text_tags[j]) last_node = open_block-&gt;add(<span class="hljs-string"><span class="hljs-string">"TEXT"</span></span>, lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::OPENING_BLOCK_TAG_NAME: { last_node = open_block = open_block-&gt;open(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::CLOSING_BLOCK_TAG_NAME: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lexer[i].lexeme != open_block-&gt;get_name()) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"unexpected closing tag: &lt;/"</span></span> + lexer[i].lexeme + <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>); open_block = open_block-&gt;close(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::EMPTY_TAG_NAME: { last_node = open_block-&gt;add(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::COMMENT: { last_node = open_block-&gt;add(<span class="hljs-string"><span class="hljs-string">"COMMENT"</span></span>, lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::MACRO_TAG: { last_node = open_block-&gt;add(<span class="hljs-string"><span class="hljs-string">"MACRO"</span></span>, lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::ATTRIBUTE_NAME: { last_node-&gt;add_attr(lexer[i].lexeme, lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::UNQUOTED_ATTRIBUTE_VALUE: { last_node-&gt;set_last_attr(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::SINGLE_QUOTED_ATTRIBUTE_VALUE: { last_node-&gt;set_last_attr(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::DOUBLE_QUOTED_ATTRIBUTE_VALUE: { last_node-&gt;set_last_attr(lexer[i].lexeme); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> Lexer::END: { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (open_block-&gt;get_type() != Node::ROOT) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"unexpected ending!"</span></span>); open_block-&gt;close(); } } } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;error) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(<span class="hljs-string"><span class="hljs-string">"parser: "</span></span> + error); } }</code> </pre><br> ä»…æ­¤è€Œå·²ï¼ å¦‚æœæ­£ç¡®å®Œæˆæ‰€æœ‰æ“ä½œï¼Œåˆ™å¯ä»¥æ˜¾ç¤ºç»“æœæ ‘ï¼š <br><br><pre> | 
 +-&lt;æ ¹ç›®å½•&gt;
   | 
   +-&lt;ï¼DOCTYPE&gt;
   | 
   +-&lt;html&gt;
     | 
     +-&lt;å¤´&gt;
     |  | 
     |  +-&lt;å…ƒ&gt;
     |  | 
     |  +-&lt;å…ƒ&gt;
     |  | 
     |  +-&lt;å…ƒ&gt;
     |  | 
     |  +-&lt;å…ƒ&gt;
     |  | 
     |  +-&lt;å…ƒ&gt;
     |  | 
     |  +-&lt;å…ƒ&gt;
     |  | 
     |  +-&lt;å…ƒ&gt;
     |  | 
     |  +-&lt;å…ƒ&gt;
     |  | 
     |  +-&lt;å…ƒ&gt;
     |  | 
     |  +-&lt;æ ‡é¢˜&gt;
     |  | 
     |  +-&lt;é“¾æ¥&gt;
     |  | 
     |  +-&lt;é“¾æ¥&gt;
     |  | 
     |  +-&lt;è¯„è®º&gt;
     | 
     +-&lt;body&gt;
       | 
       +-&lt;æ ‡é¢˜&gt;
       |  | 
       |  +-&lt;div&gt;
       | 
       +-&lt;å¯¼èˆª
       |  | 
       |  +-&lt;ul&gt;
       |  | 
       |  +-&lt;li&gt;
       |  |  | 
       |  |  +-&lt;a&gt;
       |  | 
       |  +-&lt;li&gt;
       |  |  | 
       |  |  +-&lt;a&gt;
       |  | 
       |  +-&lt;li&gt;
       |  | 
       |  +-&lt;a&gt;
       | 
       +-&lt;ä¸»è¦&gt;
       |  | 
       |  +-&lt;å®&gt;
       | 
       +-&lt;é¡µè„š&gt;
         | 
         +-&lt;hr&gt;
         | 
         +-&lt;å°&gt;
</pre><br><br> ä½†æ˜¯ï¼Œå°½ç®¡ç”Ÿæˆçš„æ ‘å®é™…ä¸Šå¯ä»¥ç§°ä¸ºDOMï¼Œä½†æˆ‘ä»¬çš„è§£æå™¨ä¸å®Œæ•´çš„jQueryï¼ŒJsoupï¼Œbeautifulsoupæˆ–Gumboç›¸æ¯”è¿˜å¾ˆé¥è¿œï¼Œç‰¹åˆ«æ˜¯å› ä¸ºå®ƒæ— æ³•æ­£ç¡®å¤„ç†ä½äºæˆå¯¹çš„&lt;style&gt;å’Œ&lt;script&gt;æ ‡è®°ä¹‹é—´çš„æ–‡æœ¬ï¼Œå› æ­¤ä¹Ÿæ— æ³•è·å–æºä»£ç ã€‚ç›´åˆ°æˆ‘å¸¦æ¥å®ƒã€‚ ä½†æ˜¯ï¼Œå¦‚æœå“ˆå¸ƒç½—å¤«æ–¯å…‹å±…æ°‘è¡¨è¾¾äº†è¿™æ ·çš„æ„¿æœ›ï¼Œæˆ‘è‚¯å®šä¼šè¡¥å……ã€‚ æˆåŠŸã€‚ <br><br>  PSåœ¨å…¬å…±è®¿é—®ä¸­å¡«å……äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æºä»£ç </a> ã€‚ æ•æˆ‘ç›´è¨€ï¼ŒåŸå§‹çš„ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—è®¡åˆ’ä¸€ä¸ªå®Œæ•´çš„å›¾ä¹¦é¦†ã€‚ <br><br>  PSS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒéƒ¨åˆ†ã€‚</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442964/">https://habr.com/ru/post/zh-CN442964/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442950/index.html">è¯„è®ºCutra Wonder Cutter</a></li>
<li><a href="../zh-CN442952/index.html">Tinkoff.ruçš„æ–°Hackathon</a></li>
<li><a href="../zh-CN442954/index.html">åœ¨Unityä¸­ä½¿ç”¨SQLiteï¼ˆUnity + SQLiteï¼‰</a></li>
<li><a href="../zh-CN442958/index.html">Nikita Shamgunovå‘The Bellè®²è¿°äº†åœ¨Microsoftå’ŒFacebookå·¥ä½œï¼Œä¸ç›–èŒ¨å’ŒMemSQLæ•°æ®åº“è¿›è¡Œçš„äº¤è°ˆ</a></li>
<li><a href="../zh-CN442962/index.html">å…³äºRustçš„ç”Ÿå‘½çš„å¦ä¸€ç¯‡æ–‡ç« </a></li>
<li><a href="../zh-CN442966/index.html">æ˜Ÿå·´å…‹å’–å•¡çš„æ¯”ç‰¹å¸æ„æˆé‡å¤§ç¨æ”¶ç”³æŠ¥é—®é¢˜</a></li>
<li><a href="../zh-CN442968/index.html">è·å¾—æ”¯æŒä¸“ä¸šè®¤è¯çš„CPEï¼ˆISACAæ¡ˆä¾‹ç ”ç©¶ï¼‰</a></li>
<li><a href="../zh-CN442970/index.html">æ£‹ç›˜æ¸¸æˆï¼Œç”¨äºå­¦ä¹ ç”µè·¯çš„åŸºç¡€çŸ¥è¯†ã€‚ ä¸ºä»€ä¹ˆä¸å‘¢</a></li>
<li><a href="../zh-CN442974/index.html">ä¸‰è¯»é€šè¿‡çš„æ‰“å‡»å‡ä¿¡æ¯æ³•æ¡ˆ</a></li>
<li><a href="../zh-CN442976/index.html">ç°çŠ¶ï¼šITå·¨å¤´ä»¥4.05äº¿ç¾å…ƒæ”¶è´­Wi-Fiåˆåˆ›å…¬å¸</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>