<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤼 🔈 📒 Bangun solusi failover berdasarkan arsitektur Oracle RAC dan AccelStor Shared-Nothing 👫 📔 👧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sejumlah besar aplikasi Enterprise dan sistem virtualisasi memiliki mekanisme sendiri untuk membangun solusi toleran kesalahan. Secara khusus, Oracle ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bangun solusi failover berdasarkan arsitektur Oracle RAC dan AccelStor Shared-Nothing</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/accelstor/blog/448538/"><p> Sejumlah besar aplikasi Enterprise dan sistem virtualisasi memiliki mekanisme sendiri untuk membangun solusi toleran kesalahan.  Secara khusus, Oracle RAC (Oracle Real Application Cluster) adalah sekelompok dua atau lebih server basis data Oracle yang bekerja bersama untuk menyeimbangkan beban dan memberikan toleransi kesalahan pada tingkat server / aplikasi.  Untuk bekerja dalam mode ini, diperlukan penyimpanan yang umum, yang perannya biasanya penyimpanan. </p><br><p>  Seperti yang telah kita bahas di salah satu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> kami, dengan sendirinya, terlepas dari adanya komponen duplikat (termasuk pengontrol), sistem penyimpanan masih memiliki titik kegagalan - terutama dalam bentuk satu set data tunggal.  Oleh karena itu, untuk membangun solusi Oracle dengan persyaratan keandalan yang meningkat, skema “N server - satu penyimpanan” harus rumit. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/l3/lh/1t/l3lh1tmhqobqcqow6yxo-g3j8lc.png"></div><br><a name="habracut"></a><br><p>  Pertama, tentu saja, Anda perlu memutuskan risiko apa yang ingin kami asuransikan.  Dalam artikel ini, kami tidak akan mempertimbangkan perlindungan terhadap ancaman seperti meteorit telah tiba.  Jadi membangun solusi pemulihan bencana yang tersebar secara geografis akan tetap menjadi topik untuk salah satu artikel berikut.  Di sini kita melihat apa yang disebut solusi pemulihan bencana Cross-Rack, ketika perlindungan dibangun di tingkat lemari server.  Lemari sendiri dapat terletak di ruangan yang sama, atau berbeda, tetapi biasanya di dalam gedung yang sama. </p><br><p>  Kabinet ini harus berisi semua set peralatan dan perangkat lunak yang diperlukan yang akan memastikan operasi database Oracle terlepas dari keadaan "tetangga".  Dengan kata lain, menggunakan solusi pemulihan bencana Cross-Rack, kami menghilangkan risiko kegagalan: </p><br><ul><li>  Server Aplikasi Oracle </li><li>  Sistem penyimpanan </li><li>  Sistem switching </li><li>  Kegagalan total semua peralatan di kabinet: <br><ul><li>  Kegagalan daya </li><li>  Kegagalan sistem pendingin </li><li>  Faktor eksternal (manusia, alam, dll.) </li></ul></li></ul><br><p>  Duplikasi server Oracle menyiratkan prinsip Oracle RAC dan diimplementasikan melalui aplikasi.  Duplikasi alat switching juga tidak masalah.  Tetapi dengan duplikasi sistem penyimpanan, semuanya tidak begitu sederhana. </p><br><p>  Opsi termudah adalah mereplikasi data dari penyimpanan utama ke cadangan.  Sinkron atau asinkron, tergantung pada kemampuan penyimpanan.  Replikasi asinkron segera menimbulkan pertanyaan untuk memastikan konsistensi data dengan Oracle.  Tetapi bahkan jika ada integrasi perangkat lunak dengan aplikasi, dalam hal apa pun, dalam hal terjadi kecelakaan pada sistem penyimpanan utama, intervensi manual oleh administrator akan diperlukan untuk mengalihkan cluster ke penyimpanan cadangan. </p><br><p>  Opsi yang lebih kompleks adalah "virtualisator" perangkat lunak dan / atau perangkat keras dari sistem penyimpanan, yang akan menghilangkan masalah dengan konsistensi dan intervensi manual.  Tetapi kompleksitas penyebaran dan administrasi selanjutnya, serta biaya yang sangat tidak senonoh dari solusi semacam itu, membuat takut banyak orang. </p><br><p>  Hanya untuk skenario seperti pemulihan bencana Cross-Rack, semua Flash AccelStor NeoSapphire ™ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">H710</a> menggunakan arsitektur Shared-Nothing yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sempurna</a> .  Model ini adalah sistem penyimpanan dua-tunggal yang menggunakan teknologi FlexiRemap® sendiri untuk bekerja dengan flash drive.  Berkat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">FlexiRemap®</a> NeoSapphire ™ H710, ini dapat menghasilkan hingga 600K IOPS @ 4K penulisan acak dan 1M + IOPS @ 4K pembacaan acak, yang tidak dapat dicapai dengan penyimpanan berbasis RAID klasik. </p><br><p>  Tetapi fitur utama dari NeoSapphire ™ H710 adalah eksekusi dua node sebagai lampiran terpisah, yang masing-masing memiliki salinan data sendiri.  Sinkronisasi simpul dilakukan melalui antarmuka InfiniBand eksternal.  Berkat arsitektur ini, node dapat tersebar di lokasi yang berbeda dengan jarak hingga 100m, sehingga memberikan solusi pemulihan bencana Cross-Rack.  Kedua node bekerja sepenuhnya dalam mode sinkron.  Dari sisi host, H710 terlihat seperti penyimpanan dual-controller biasa.  Oleh karena itu, tidak ada opsi perangkat lunak dan perangkat keras tambahan dan pengaturan rumit yang perlu dilakukan. </p><br><p>  Jika Anda membandingkan semua solusi pemulihan bencana Cross-Rack yang dijelaskan di atas, versi AccelStor menonjol dari yang lain: </p><br><table><tbody><tr><th></th><th>  AccelStor NeoSapphire ™ Shared Nothing Architecture </th><th>  Perangkat lunak atau "virtualizer" penyimpanan </th><th>  Solusi replikasi </th></tr><tr><td colspan="4">  <b>Ketersediaan</b> </td></tr><tr><td>  Kegagalan Server </td><td>  <b>Tidak ada downtime</b> </td><td>  <b>Tidak ada downtime</b> </td><td>  <b>Tidak ada downtime</b> </td></tr><tr><td>  Alihkan Kegagalan </td><td>  <b>Tidak ada downtime</b> </td><td>  <b>Tidak ada downtime</b> </td><td>  <b>Tidak ada downtime</b> </td></tr><tr><td>  Kegagalan Penyimpanan </td><td>  <b>Tidak ada downtime</b> </td><td>  <b>Tidak ada downtime</b> </td><td>  <font color="green"><b>Downtime</b></font> </td></tr><tr><td>  Kegagalan seluruh kabinet </td><td>  <b>Tidak ada downtime</b> </td><td>  <b>Tidak ada downtime</b> </td><td>  <font color="green"><b>Downtime</b></font> </td></tr><tr><td colspan="4">  <b>Biaya dan kerumitan</b> </td></tr><tr><td>  Biaya solusi </td><td>  Rendah * </td><td>  <font color="green">Tinggi</font> </td><td>  <font color="green">Tinggi</font> </td></tr><tr><td>  Kesulitan Penempatan </td><td>  Rendah </td><td>  <font color="green">Tinggi</font> </td><td>  <font color="green">Tinggi</font> </td></tr></tbody></table><br><p>  <i>* AccelStor NeoSapphire ™ masih merupakan array All Flash, yang menurut definisi tidak memerlukan biaya "3 kopecks," terutama karena ia memiliki cadangan kapasitas ganda.</i>  <i>Namun, membandingkan total biaya solusi berdasarkan solusi tersebut dengan yang serupa dari vendor lain, biayanya dapat dianggap rendah.</i> </p><br><p>  Topologi untuk menghubungkan server aplikasi dan Semua node array Flash akan terlihat seperti ini: </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/5i/gb/cw/5igbcwdvm92bpabsylae4iysdra.png"></div><br><p>  Saat merencanakan topologi, Anda juga sangat disarankan untuk menduplikasi switch manajemen dan interkoneksi server. </p><br><p>  Selanjutnya, kita akan berbicara tentang menghubungkan melalui Fibre Channel.  Dalam hal menggunakan iSCSI, semuanya akan sama, disesuaikan untuk jenis switch yang digunakan dan pengaturan array yang sedikit berbeda. </p><br><h3>  Pekerjaan persiapan pada array </h3><br><div class="spoiler">  <b class="spoiler_title">Perangkat keras dan lunak bekas</b> <div class="spoiler_text"><p>  <b>Spesifikasi Server dan Switch</b> </p><br><table><tbody><tr><th>  Komponen </th><th>  Deskripsi </th></tr><tr><td>  Oracle Database 11g server </td><td>  Dua </td></tr><tr><td>  Sistem operasi server </td><td>  Oracle Linux </td></tr><tr><td>  Versi database Oracle </td><td>  11g (RAC) </td></tr><tr><td>  Prosesor per server </td><td>  Dua 16 core Intel® Xeon® CPU E5-2667 v2 @ 3.30GHz </td></tr><tr><td>  Memori fisik per server </td><td>  128GB </td></tr><tr><td>  Jaringan fc </td><td>  16Gb / s FC dengan multipathing </td></tr><tr><td>  FC HBA </td><td>  Emulex Lpe-16002B </td></tr><tr><td>  Port 1GbE publik khusus untuk manajemen cluster </td><td>  Adaptor ethernet Intel rj45 </td></tr><tr><td>  16Gb / s FC switch </td><td>  Brokat 6505 </td></tr><tr><td>  Port 10GbE pribadi khusus untuk sinkronisasi data </td><td>  Intel X520 </td></tr></tbody></table><br><p>  <b>AccelStor NeoSapphhire ™ Semua Spesifikasi Array Flash</b> </p><br><table><tbody><tr><th>  Komponen </th><th>  Deskripsi </th></tr><tr><td>  Sistem penyimpanan </td><td>  Model ketersediaan tinggi NeoSapphire ™: H710 </td></tr><tr><td>  Versi gambar </td><td>  4.0.1 </td></tr><tr><td>  Jumlah total drive </td><td>  48 </td></tr><tr><td>  Ukuran drive </td><td>  1.92TB </td></tr><tr><td>  Jenis drive </td><td>  SSD </td></tr><tr><td>  Port target FC </td><td>  Port 16x16Gb (8 per node) </td></tr><tr><td>  Port manajemen </td><td>  Kabel ethernet 1GbE menghubungkan ke host melalui switch ethernet </td></tr><tr><td>  Port detak jantung </td><td>  Kabel ethernet 1GbE menghubungkan antara dua simpul penyimpanan </td></tr><tr><td>  Port sinkronisasi data </td><td>  Kabel InfiniBand 56Gb / s </td></tr></tbody></table><br></div></div><br><p>  Sebelum Anda mulai menggunakan array, Anda harus menginisialisasi itu.  Secara default, alamat kontrol kedua node adalah sama (192.168.1.1).  Anda perlu menyambungkannya satu per satu dan menetapkan alamat manajemen yang baru (sudah berbeda) dan mengonfigurasi sinkronisasi waktu, setelah itu port Manajemen dapat dihubungkan ke satu jaringan.  Setelah itu, node-node tersebut digabungkan menjadi sepasang HA dengan menetapkan subnet ke koneksi Interlink. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/c3/kw/sp/c3kwspwqm38yl7ennakzykubswq.jpeg"></div><br><p>  Setelah inisialisasi selesai, Anda dapat mengontrol array dari sembarang node. </p><br><p>  Selanjutnya, buat volume yang diperlukan dan publikasikan untuk server aplikasi. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/6h/4s/gf/6h4sgfinagrbbngoououu-lg1au.png"></div><br><p>  Sangat disarankan agar Anda membuat beberapa volume untuk Oracle ASM, karena ini akan meningkatkan jumlah target untuk server, yang pada akhirnya akan meningkatkan kinerja keseluruhan (lebih lanjut tentang antrian di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> lain). </p><br><div class="spoiler">  <b class="spoiler_title">Konfigurasi tes</b> <div class="spoiler_text"><table><tbody><tr><th>  Nama volume penyimpanan </th><th>  Ukuran volume </th></tr><tr><td>  Data01 </td><td>  200GB </td></tr><tr><td>  Data02 </td><td>  200GB </td></tr><tr><td>  Data03 </td><td>  200GB </td></tr><tr><td>  Data04 </td><td>  200GB </td></tr><tr><td>  Data05 </td><td>  200GB </td></tr><tr><td>  Data06 </td><td>  200GB </td></tr><tr><td>  Data07 </td><td>  200GB </td></tr><tr><td>  Data08 </td><td>  200GB </td></tr><tr><td>  Data09 </td><td>  200GB </td></tr><tr><td>  Data10 </td><td>  200GB </td></tr><tr><td>  Kisi01 </td><td>  1GB </td></tr><tr><td>  Kisi02 </td><td>  1GB </td></tr><tr><td>  Kisi03 </td><td>  1GB </td></tr><tr><td>  Kisi04 </td><td>  1GB </td></tr><tr><td>  Kisi05 </td><td>  1GB </td></tr><tr><td>  Kisi06 </td><td>  1GB </td></tr><tr><td>  Redo01 </td><td>  100GB </td></tr><tr><td>  Ulangi02 </td><td>  100GB </td></tr><tr><td>  Ulang03 </td><td>  100GB </td></tr><tr><td>  Ulang04 </td><td>  100GB </td></tr><tr><td>  Ulangi05 </td><td>  100GB </td></tr><tr><td>  Ulang06 </td><td>  100GB </td></tr><tr><td>  Ulang07 </td><td>  100GB </td></tr><tr><td>  Ulangi08 </td><td>  100GB </td></tr><tr><td>  Ulang09 </td><td>  100GB </td></tr><tr><td>  Ulang 10 </td><td>  100GB </td></tr></tbody></table><br></div></div><br><h3>  Beberapa penjelasan tentang mode operasi array dan proses yang terjadi dalam situasi darurat </h3><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/5m/_k/uu/5m_kuurlb-2fy52d8p1tzufcyic.png"></div><br><p>  Setiap dataset simpul memiliki parameter "nomor versi".  Setelah inisialisasi awal, itu sama dan sama dengan 1. Jika karena alasan tertentu nomor versi berbeda, maka selalu ada sinkronisasi data dari versi yang lebih lama ke versi yang lebih muda, setelah itu nomor tersebut disejajarkan dengan versi yang lebih muda, mis.  ini berarti bahwa salinannya identik.  Alasan mengapa versi dapat bervariasi: </p><br><ul><li>  Reboot terjadwal dari salah satu node </li><li>  Kecelakaan di salah satu node karena shutdown mendadak (listrik, panas berlebih, dll.). </li><li>  Koneksi InfiniBand rusak dengan ketidakmampuan untuk melakukan sinkronisasi </li><li>  Gangguan pada salah satu node karena korupsi data.  Ini akan membutuhkan pembuatan grup HA baru dan sinkronisasi lengkap set data. </li></ul><br><p>  Bagaimanapun, simpul yang tersisa online meningkatkan nomor versinya satu, sehingga setelah tersambung kembali dengan pasangan, menyinkronkan kumpulan datanya. </p><br><p>  Jika koneksi terputus melalui tautan Ethernet, maka Heartbeat sementara beralih ke InfiniBand dan kembali dalam 10 detik ketika dipulihkan. </p><br><h3>  Konfigurasi Host </h3><br><p>  Untuk memastikan toleransi kesalahan dan meningkatkan kinerja, Anda harus mengaktifkan dukungan MPIO untuk array.  Untuk melakukan ini, tambahkan baris ke file /etc/multipath.conf, lalu muat ulang layanan multipath </p><br><div class="spoiler">  <b class="spoiler_title">Teks tersembunyi</b> <div class="spoiler_text">  perangkat { <br>  perangkat { <br>  vendor "AStor" <br>  path_grouping_policy "group_by_prio" <br>  path_selector "panjang antrian 0" <br>  path_checker "tur" <br>  fitur "0" <br>  hardware_handler "0" <br>  prio "const" <br>  segera failback <br>  fast_io_fail_tmo 5 <br>  dev_loss_tmo 60 <br>  user_friendly_names ya <br>  detect_prio ya <br>  rr_min_io_rq 1 <br>  no_path_retry 0 <br>  } <br>  } <br><br></div></div><br><p>  Selanjutnya, agar ASM dapat bekerja dengan MPIO melalui ASMLib, Anda perlu memodifikasi file / etc / sysconfig / oracleasm dan kemudian jalankan /etc/init.d/oracleasm scandisks </p><br><div class="spoiler">  <b class="spoiler_title">Teks tersembunyi</b> <div class="spoiler_text"><p>  # ORACLEASM_SCANORDER: Pola yang cocok untuk memesan pemindaian disk <br>  ORACLEASM_SCANORDER = "dm" </p><br><br><p>  # ORACLEASM_SCANEXCLUDE: Mencocokkan pola untuk mengeluarkan disk dari pemindaian <br>  ORACLEASM_SCANEXCLUDE = "sd" </p><br><p></p><h4>  Catatan </h4><br><p>  <i>Jika Anda tidak ingin menggunakan ASMLib, Anda dapat menggunakan aturan UDEV, yang merupakan dasar untuk ASMLib.</i> </p><br><p>  <i>Dimulai dengan versi 12.1.0.2 Oracle Database, opsi tersedia untuk instalasi sebagai bagian dari perangkat lunak ASMFD.</i> </p><br></div></div><br><p>  Pastikan untuk memastikan bahwa disk yang dibuat untuk Oracle ASM sejajar dengan ukuran blok tempat array bekerja secara fisik (4K).  Jika tidak, masalah kinerja dapat terjadi.  Karena itu, Anda harus membuat volume dengan parameter yang sesuai: </p><br><p>  <i>berpisah / dev / mapper / nama perangkat mklabel gpt mkpart primer 2048s 100% menyelaraskan-periksa optimal 1</i> </p><br><h3>  Distribusi database pada volume yang dibuat untuk konfigurasi pengujian kami </h3><br><table><tbody><tr><th>  Nama volume penyimpanan </th><th>  Ukuran volume </th><th>  Pemetaan Volume LUNs </th><th>  Detail Perangkat Volume ASM </th><th>  Ukuran Unit Alokasi </th></tr><tr><td>  Data01 </td><td>  200GB </td><td rowspan="26">  Petakan semua volume penyimpanan ke sistem penyimpanan semua port data </td><td rowspan="10">  Redundansi: normal <br>  Nama: DGDATA <br>  Tujuan: File data <br></td><td rowspan="10">  4MB </td></tr><tr><td>  Data02 </td><td>  200GB </td></tr><tr><td>  Data03 </td><td>  200GB </td></tr><tr><td>  Data04 </td><td>  200GB </td></tr><tr><td>  Data05 </td><td>  200GB </td></tr><tr><td>  Data06 </td><td>  200GB </td></tr><tr><td>  Data07 </td><td>  200GB </td></tr><tr><td>  Data08 </td><td>  200GB </td></tr><tr><td>  Data09 </td><td>  200GB </td></tr><tr><td>  Data10 </td><td>  200GB </td></tr><tr><td>  <font color="#248dee">Kisi01</font> </td><td>  <font color="#248dee">1GB</font> </td><td rowspan="3">  <font color="#248dee">Redundansi: normal</font> <font color="#248dee"><br></font>  <font color="#248dee">Nama: DGGRID1</font> <font color="#248dee"><br></font>  <font color="#248dee">Tujuan: Kotak: CRS dan Voting</font> <br></td><td rowspan="3">  <font color="#248dee">4MB</font> </td></tr><tr><td>  <font color="#248dee">Kisi02</font> </td><td>  <font color="#248dee">1GB</font> </td></tr><tr><td>  <font color="#248dee">Kisi03</font> </td><td>  <font color="#248dee">1GB</font> </td></tr><tr><td>  Kisi04 </td><td>  1GB </td><td rowspan="3">  Redundansi: normal <br>  Nama: DGGRID2 <br>  Tujuan: Kotak: CRS dan Voting <br></td><td rowspan="3">  4MB </td></tr><tr><td>  Kisi05 </td><td>  1GB </td></tr><tr><td>  Kisi06 </td><td>  1GB </td></tr><tr><td>  <font color="#248dee">Redo01</font> </td><td>  <font color="#248dee">100GB</font> </td><td rowspan="5">  <font color="#248dee">Redundansi: normal</font> <font color="#248dee"><br></font>  <font color="#248dee">Nama: DGREDO1</font> <font color="#248dee"><br></font>  <font color="#248dee">Tujuan: Mengulang log utas 1</font> <font color="#248dee"><br></font> <br></td><td rowspan="5">  <font color="#248dee">4MB</font> </td></tr><tr><td>  <font color="#248dee">Ulangi02</font> </td><td>  <font color="#248dee">100GB</font> </td></tr><tr><td>  <font color="#248dee">Ulang03</font> </td><td>  <font color="#248dee">100GB</font> </td></tr><tr><td>  <font color="#248dee">Ulang04</font> </td><td>  <font color="#248dee">100GB</font> </td></tr><tr><td>  <font color="#248dee">Ulangi05</font> </td><td>  <font color="#248dee">100GB</font> </td></tr><tr><td>  Ulang06 </td><td>  100GB </td><td rowspan="5">  Redundansi: normal <br>  Nama: DGREDO2 <br>  Tujuan: Mengulang log utas 2 <br><br></td><td rowspan="5">  4MB </td></tr><tr><td>  Ulang07 </td><td>  100GB </td></tr><tr><td>  Ulangi08 </td><td>  100GB </td></tr><tr><td>  Ulang09 </td><td>  100GB </td></tr><tr><td>  Ulang 10 </td><td>  100GB </td></tr></tbody></table><br><div class="spoiler">  <b class="spoiler_title">Pengaturan basis data</b> <div class="spoiler_text"><ul><li>  Ukuran blok = 8K </li><li>  Swap space = 16GB </li><li>  Nonaktifkan AMM (Manajemen Memori Otomatis) </li><li>  Nonaktifkan Halaman Besar Transparan </li></ul><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Pengaturan lainnya</b> <div class="spoiler_text"><p>  <u># vi /etc/sysctl.conf</u> <br>  ✓ fs.aio-max-nr = 1048576 <br>  ✓ fs.file-max = 6815744 <br>  ✓ kernel.shmmax 103079215104 <br>  ✓ kernel.shmall 31457280 <br>  ✓ kernel.shmmn 4096 <br>  ✓ kernel.sem = 250 32000 100 128 <br>  ✓ net.ipv4.ip_local_port_range = 9000 65500 <br>  ✓ net.core.rmem_default = 262144 <br>  ✓ net.core.rmem_max = 4194304 <br>  ✓ net.core.wmem_default = 262144 <br>  ✓ net.core.wmem_max = 1048586 <br>  ✓ vm.swappiness = 10 <br>  ✓ vm.min_free_kbytes = 524288 # jangan atur ini jika Anda menggunakan Linux x86 <br>  ✓ vm.vfs_cache_pressure = 200 <br>  ✓ vm.nr_hugepages = 57000 </p><br><br><p>  <u># vi /etc/security/limits.conf</u> <br>  ✓ jaringan lunak nproc 2047 <br>  ✓ jaringan keras nproc 16384 <br>  ✓ kisi lunak nofile 1024 <br>  ✓ jaringan keras nofile 65536 <br>  ✓ tumpukan soft grid 10240 <br>  ✓ jaringan hard stack 32768 <br>  ✓ oracle soft nproc 2047 <br>  ✓ oracle hard nproc 16384 <br>  ✓ oracle soft nofile 1024 <br>  ✓ oracle hard nofile 65536 <br>  ✓ tumpukan lunak oracle 10240 <br>  ✓ stack keras oracle 32768 <br>  ✓ memlock lunak 120795954 <br>  ✓ memlock keras 120795954 <br></p><br><p>  <u>sqlplus “/ as sysdba”</u> <br>  ubah proses set sistem = 2000 scope = spfile; <br>  ubah set sistem open_cursors = 2000 scope = spfile; <br>  ubah set sistem session_cached_cursors = 300 scope = spfile; <br>  ubah set sistem db_files = 8192 scope = spfile; <br></p><br><br></div></div><br><h3>  Tes toleransi kesalahan </h3><br><p>  Untuk tujuan demonstrasi, HammerDB digunakan untuk meniru beban OLTP.  Konfigurasi HammerDB: </p><br><table><tbody><tr><td>  <b>Jumlah Gudang</b> </td><td>  256 </td></tr><tr><td>  Total Transaksi per Pengguna </td><td>  1000000000000 </td></tr><tr><td>  Pengguna virtual </td><td>  256 </td></tr></tbody></table><br><p>  Hasilnya, indikator TPM 2.1M diperoleh, yang jauh dari batas kinerja array <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">H710</a> , tetapi ini adalah "langit-langit" untuk konfigurasi perangkat keras server saat ini (terutama karena prosesor) dan jumlahnya.  Tujuan dari tes ini adalah untuk menunjukkan toleransi kesalahan dari solusi secara keseluruhan, dan bukan untuk mencapai kinerja maksimum.  Oleh karena itu, kami hanya akan membangun di atas angka ini. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/3o/ds/id/3odsid2wr0ynssl4zuu8idq8dfq.png"></div><br><h3>  Tes untuk kegagalan salah satu node </h3><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ar/tf/og/artfogfilgwzy2vtxlsyvkp98vu.png"></div><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/zk/iv/xt/zkivxtazysrew4hhzjan-vujnma.png"></div><br><p>  Host kehilangan beberapa jalur ke toko, terus bekerja melalui yang tersisa dengan simpul kedua.  Kinerja turun selama beberapa detik karena restrukturisasi jalur, dan kemudian kembali normal.  Tidak ada gangguan layanan yang terjadi. </p><br><h3>  Uji kegagalan kabinet dengan semua peralatan </h3><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/mq/my/2b/mqmy2bzrge24zhnj217spj2rts4.png"></div><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/eq/nh/-8/eqnh-8pwbhyzqgdleh1tsiafkr0.png"></div><br><p>  Dalam hal ini, kinerja juga turun selama beberapa detik karena restrukturisasi jalur, dan kemudian kembali ke setengah nilai dari indikator asli.  Hasilnya dibelah dua dari yang asli karena pengecualian dari operasi satu server aplikasi.  Gangguan layanan juga tidak terjadi. </p><br><blockquote>  Jika Anda perlu menerapkan solusi pemulihan bencana Cross-Rack yang toleran terhadap Oracle dengan biaya yang masuk akal dan dengan sedikit upaya penyebaran / administrasi, maka bekerja bersama dengan arsitektur Oracle RAC dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AccelStor Shared-Nothing</a> akan menjadi salah satu pilihan terbaik.  Alih-alih Oracle RAC, mungkin ada perangkat lunak lain yang menyediakan untuk clustering, DBMS atau sistem virtualisasi yang sama, misalnya.  Prinsip membangun solusi akan tetap sama.  Dan skor akhir adalah nol untuk RTO dan RPO. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id448538/">https://habr.com/ru/post/id448538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id448528/index.html">Layanan VPN Wireguard Gratis di AWS</a></li>
<li><a href="../id448530/index.html">Bagaimana Megaphone tidur di langganan seluler</a></li>
<li><a href="../id448532/index.html">Pusat Data Luar Angkasa. Ringkas percobaan</a></li>
<li><a href="../id448534/index.html">Mengapa kita membutuhkan sakelar industri dengan EMC yang ditingkatkan?</a></li>
<li><a href="../id448536/index.html">Transparansi - The Butcherts 'Panacea</a></li>
<li><a href="../id448540/index.html">VMware NSX untuk yang terkecil. Bagian 5. Mengkonfigurasi penyeimbang beban</a></li>
<li><a href="../id448544/index.html">Bundel dalam baja. Bagaimana mereka terbentuk</a></li>
<li><a href="../id448546/index.html">UITableView header dan footer ukuran otomatis dengan AutoLayout</a></li>
<li><a href="../id448548/index.html">Konstruksi dalam seni: dari Brueghel ke Vasya Lozhkin</a></li>
<li><a href="../id448550/index.html">Kontes Laporan di #PAYMENTSECURITY 2019 Dibuka</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>