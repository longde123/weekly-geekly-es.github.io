<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé∑ üë®üèø‚Äç‚úàÔ∏è ‚úã Algoritmo de posicionamento de bloco baseado em restri√ß√µes üíû üë®üèø‚Äçüè´ üôéüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Esta publica√ß√£o descreve o algoritmo usado no Generate Worlds , uma ferramenta que permite aos usu√°rios criar e explorar mundos procedimentais criando...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Algoritmo de posicionamento de bloco baseado em restri√ß√µes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475188/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/998/f37/e4f/998f37e4feeb5b1aef28f76a1b4453e8.jpg" alt="imagem"></div><br>  Esta publica√ß√£o descreve o algoritmo usado no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Generate Worlds</a> , uma ferramenta que permite aos usu√°rios criar e explorar mundos procedimentais criando pequenos conjuntos de blocos de voxel.  Vou dar uma breve descri√ß√£o do algoritmo e, nos posts seguintes, falarei sobre suas vantagens em velocidade e flexibilidade em compara√ß√£o com outros m√©todos.  Para saber mais sobre o que √© a gera√ß√£o de procedimentos com base em restri√ß√µes e o que √© interessante, recomendo a leitura da minha <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">postagem anterior</a> . <br><br>  Se voc√™ deseja testar seus pontos fortes na cria√ß√£o de mundos procedimentais usando esse sistema, pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">comprar</a> Generate Worlds.  Se o pre√ßo for alto demais para voc√™, continue lendo: este post fornecer√° informa√ß√µes sobre como implementar independentemente o algoritmo Generate Worlds. <br><a name="habracut"></a><br><h3>  Conjuntos de pe√ßas </h3><br>  Em Gerar Mundos, cada mundo √© montado a partir de um <em>conjunto de pe√ßas</em> ( <em>conjunto de pe√ßas</em> ).  Em ess√™ncia, os azulejos s√£o apenas pequenos modelos de voxel.  Vamos come√ßar com um exemplo.  A imagem abaixo √© composta por 9 pe√ßas.  Como voc√™ pode ver, cada bloco consiste em voxels que aparecem como cubos coloridos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/108/c47/1d0/108c471d0bd6a102cacf2ef8011e278e.svg"><br>  Se voc√™ organizar esses modelos de voxel de maneira l√≥gica, poder√° criar uma bela cena pastoral, como na anima√ß√£o abaixo.  Por "l√≥gica", quero dizer que os ladrilhos se encaixam se suas cores ao longo da borda da junta combinam. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/285/b9b/8ad/285b9b8ad2f4a095bcd1f734ebec5e9e.gif" alt="imagem"></div><br>  A tarefa do algoritmo Generate Worlds √© concluir r√°pida e automaticamente essa montagem.  Antes de embarcar no algoritmo, vejamos a declara√ß√£o do problema. <br><br><h3>  N√≥s conectamos telhas entre si </h3><br>  D√™ uma olhada no conjunto de pe√ßas contendo 4 pe√ßas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/039/02d/6e9/03902d6e96866cd606d89bfbd3678114.png"></div><br>  Essas pe√ßas s√£o semelhantes √†s pe√ßas tridimensionais mostradas acima. <br><br>  O algoritmo Generate Worlds cria <em>combina√ß√µes v√°lidas de ladrilhos</em> usando uma regra simples: <em>se dois ladrilhos se tocam, todas as cores ao longo da borda do toque devem corresponder</em> .  Esta regra formaliza a abordagem usada por um designer vivo para criar um mundo 3D a partir de ladrilhos voxel. <br><br>  Em uma combina√ß√£o permitida dos 4 blocos apresentados acima, as c√©lulas claras ao longo das bordas devem tocar apenas as c√©lulas claras e uma c√©lula escura deve tocar apenas as c√©lulas escuras.  Por exemplo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f5/87c/81a/7f587c81a68124adbec7870583a55eda.svg"></div><br>  <i>Exemplos de conex√µes corretas e incorretas.</i> <br><br>  O exemplo √† direita √© inaceit√°vel, porque ao longo da borda do toque do ladrilho, o quadrado claro toca o quadrado escuro.  Duas combina√ß√µes v√°lidas geradas para este conjunto de pe√ßas s√£o mostradas abaixo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02a/a19/87e/02aa1987ea6a2fca68969088e8bd3ea9.png"></div><br>  No caso geral, a cria√ß√£o de combina√ß√µes v√°lidas de blocos n√£o √© uma tarefa trivial.  Por exemplo, considere a seguinte estrat√©gia simples "gananciosa": come√ßamos com uma grade vazia.  Em cada itera√ß√£o, colocamos o bloco em algum momento, escolhendo um bloco aceit√°vel, considerando os blocos j√° colocados.  O diagrama abaixo mostra os problemas dessa estrat√©gia. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aec/edd/bcb/aeceddbcbebf2b579949a1c6f96b04fb.svg" alt="posicionamento ganancioso"></div><br>  Se colocarmos blocos sem prever como a veicula√ß√£o afetar√° as escolhas futuras, o algoritmo "ganancioso" rapidamente p√°ra;  no diagrama acima, nenhum bloco v√°lido pode ser colocado no quadrado vermelho.  E este √© o principal problema: os blocos postados anteriormente podem reduzir o n√∫mero de op√ß√µes atuais para zero.  Precisamos de alguma maneira de proteger contra a coloca√ß√£o de ladrilhos, o que pode nos levar a um beco sem sa√≠da.  O algoritmo implementado em Generate Worlds come√ßa considerando todos os blocos poss√≠veis para colocar em todos os pontos da grade.  Se colocarmos um bloco na grade, √© √≥bvio que algumas das op√ß√µes futuras se tornam inacess√≠veis.  Depois que o algoritmo elimina essas op√ß√µes, podemos reexaminar as op√ß√µes restantes e eliminar outros blocos que agora s√£o incompat√≠veis com o menor n√∫mero poss√≠vel de blocos restantes em pontos vizinhos. <br><br>  Considere o seguinte exemplo.  O algoritmo come√ßa com uma grade 3x3, no centro da qual existe um √∫nico bloco.  A localiza√ß√£o desse bloco implica que 9 blocos poss√≠veis em pontos de grade vizinhos n√£o s√£o permitidos, portanto ele os descarta e n√£o os considera mais.  Ap√≥s excluir esses blocos, ele pode excluir blocos incompat√≠veis com todos os blocos considerados candidatos para posicionamento em pontos de grade vizinhos.  Os quadrados vermelhos no diagrama marcam os pontos nos quais os blocos s√£o exclu√≠dos, porque s√£o incompat√≠veis com todos os vizinhos que ainda est√£o sendo considerados.  Se o algoritmo continuar esse processo at√© que haja blocos que possam ser exclu√≠dos, ele retornar√° ao estado mostrado no canto inferior esquerdo do circuito.  Como voc√™ pode ver, muitos blocos foram exclu√≠dos de considera√ß√£o.  Se a estrat√©gia de coloca√ß√£o de pe√ßas consistisse apenas na sele√ß√£o de pe√ßas dos grupos restantes, a probabilidade de chegar a um beco sem sa√≠da seria muito menor do que na abordagem ‚Äúgananciosa‚Äù descrita acima. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/276/1ba/a2c/2761baa2c29c776b8c38d40ffbfc2507.svg"></div><br>  O problema dessa abordagem √© que, toda vez que um bloco √© colocado, √© necess√°rio um processo iterativo caro.  Mas observe que toda vez que coloco um bloco com um T invertido, os 19 blocos removidos no exemplo acima podem ser removidos de considera√ß√£o em torno desse canal.  Eu chamo a cole√ß√£o de blocos, que permanecem op√ß√µes v√°lidas em torno do bloco hospedado, uma <em>vizinhan√ßa v√°lida</em> desse bloco. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1f3/71d/5e9/1f371d5e975f66d9dade441076871130.svg"></div><br><h3>  Coloca√ß√£o r√°pida de blocos gra√ßas ao cache de informa√ß√µes </h3><br>  <strong>O princ√≠pio mais importante do algoritmo Generate Worlds √© que as informa√ß√µes coletadas sobre poss√≠veis vizinhos de bloco podem ser reutilizadas toda vez que esse bloco √© colocado.</strong>  Por exemplo, no caso de um T invertido para os oito quadrados circundantes da grade, podemos remover 19 pe√ßas imediatamente ap√≥s a coloca√ß√£o dessa pe√ßa, observando a vers√£o em cache da vizinhan√ßa permitida para essa pe√ßa. <br><br>  Por exemplo, no exemplo abaixo, o algoritmo preenche a grade 5x5 com blocos usando uma vizinhan√ßa permitida em cache de 4 blocos.  Depois de colocar o primeiro ladrilho, ele remove da considera√ß√£o 19 ladrilhos imposs√≠veis no exemplo acima.  Ap√≥s colocar cada bloco, todas as op√ß√µes ausentes na vizinhan√ßa aceit√°vel do bloco colocado s√£o removidas da considera√ß√£o. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cb6/258/00f/cb625800f505110fbc8df42d11735aa1.svg"></div><br>  Continuando dessa maneira, podemos preencher toda a grade apenas com atualiza√ß√µes locais r√°pidas para o conjunto de blocos, que ainda s√£o op√ß√µes v√°lidas para cada um dos pontos. <br><br>  As vizinhan√ßas permitidas podem ter qualquer tamanho que voc√™ precisar, para que voc√™ possa remover blocos incompat√≠veis distantes sempre que colocar um bloco.  Embora a gera√ß√£o de uma vizinhan√ßa aceit√°vel seja bastante lenta, ela precisa ser feita apenas uma vez, ap√≥s o que cada linearmente depende do tamanho da vizinhan√ßa para acomodar cada ladrilho. <br><br><h3>  Expandindo o sistema em 3D </h3><br>  O algoritmo Generate Worlds naturalmente se expande para mundos com uma terceira dimens√£o.  Em vez de blocos 2D correspondentes em cores com quatro blocos vizinhos em faces comuns, agora temos blocos 3D que devem corresponder em cores aos vizinhos em seis faces.  Considere os seguintes blocos 3D: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/835/271/cb4/835271cb4cd44d702e63a2a4b31659c2.svg"></div><br>  A montagem desses blocos em 3D √© a seguinte: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/492/a7e/11f/492a7e11f49c10ed645ea0b923eb9390.gif" alt="imagem"></div><br>  Nesse caso, as vizinhan√ßas admiss√≠veis n√£o s√£o grades bidimensionais, mas tridimensionais, e o algoritmo as gera em um caso 2D semelhante. <br><br><h3>  Galeria de resultados </h3><br>  Abaixo, s√£o mostrados os mundos gerados pelas implementa√ß√µes desse algoritmo, juntamente com breves descri√ß√µes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/998/f37/e4f/998f37e4feeb5b1aef28f76a1b4453e8.jpg"></div><br>  <i>Captura de tela de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Generate Worlds</a> mostrando a sala com sa√≠da.</i>  <i>As bordas no teto coincidem com as bordas dos ladrilhos.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/384/6c3/bcf/3846c3bcfde6900fe6838bfae03b72e1.jpg"></div><br>  <i>Uma captura de tela de outra ferramenta criada que tamb√©m usa o algoritmo Generate Worlds;</i>  <i>diferentes tipos de salas e corredores s√£o mostrados.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b21/b6c/3d5/b21b6c3d517ed695c0c4c779c7ee7c55.jpg"></div><br>  <i>Um mundo semelhante ao anterior, mas agora em uma bela vista isom√©trica</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4f1/7dd/2c2/4f17dd2c2c1733b0a382cf49ea85394c.png"></div><br>  <i>O mundo, cuja cria√ß√£o me inspirou no nono c√≠rculo do inferno de Dante: pecadores que foram congelados no gelo.</i>  <i>Renderizado em MagicaVoxel.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8a/efb/7b4/b8aefb7b4139940854b21344edcf6238.png"></div><br>  <i>O mundo, cuja cria√ß√£o me inspirou na segunda rodada do inferno de Dante: a paisagem, que √© irrigada pela chuva ardente, que atravessa a ponte.</i>  <i>Renderizado em MagicaVoxel.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/627/c77/361/627c7736180c96618ef1b43cb6249b18.png"></div><br>  <i>Um mundo de plataformas gramadas com cachoeiras e rios.</i>  <i>Renderizado em MagicaVoxel.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a39/09a/856/a3909a8564ab602825e020a4dab6796a.png" alt="mundo da cidade"></div><br>  <i>Paisagem de uma cidade medieval com edif√≠cios e paredes.</i>  <i>Renderizado em MagicaVoxel.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475188/">https://habr.com/ru/post/pt475188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475174/index.html">Como decolar com baterias ou um pouco de teoria do paramotor el√©trico. Parte 1</a></li>
<li><a href="../pt475178/index.html">Substituindo EAV por JSONB no PostgreSQL</a></li>
<li><a href="../pt475180/index.html">Como decolar com baterias ou a pr√°tica de operar o paramotor el√©trico SkyMax. Parte 2</a></li>
<li><a href="../pt475182/index.html">Como decidi uma competi√ß√£o de aprendizado de m√°quina semelhante a dados</a></li>
<li><a href="../pt475184/index.html">Chamadas sofisticadas do sistema Linux</a></li>
<li><a href="../pt475194/index.html">Escrevendo redux pelo SOLID</a></li>
<li><a href="../pt475196/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel n¬∫ 321 (de 4 a 10 de novembro)</a></li>
<li><a href="../pt475200/index.html">Not√≠cias do mundo do OpenStreetMap n¬∫ 484 (22/10/2019 - 28/10/2019)</a></li>
<li><a href="../pt475202/index.html">Primeira impress√£o do Xiaomi MIUI 11</a></li>
<li><a href="../pt475206/index.html">Quadrosc√≥pio de acordo com o esquema de Kutter 4 x 0,5 m para pesquisa astron√¥mica em alta velocidade</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>