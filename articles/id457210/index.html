<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¸ğŸ¿ â˜¯ï¸ ğŸ“« Simpan sumber daya statis di hosting Anda ğŸ‘¸ğŸ¼ ğŸ’ ğŸ˜¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salah satu hal pertama yang saya rekomendasikan kepada klien saya untuk mempercepat situs web akan tampak seperti paradoks pada awalnya: Anda harus me...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Simpan sumber daya statis di hosting Anda</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457210/">  Salah satu hal pertama yang saya rekomendasikan kepada klien saya untuk mempercepat situs web akan tampak seperti paradoks pada awalnya: Anda harus menempatkan sumber daya statis di hosting Anda, menyerahkan infrastruktur CDN pihak ketiga.  Dalam tulisan singkat ini dan, saya harap, posting yang sangat sederhana, saya ingin menguraikan kerugian menyimpan file statis Anda "di samping" dan keuntungan luar biasa dari hostingkan mereka di hosting saya. <br><a name="habracut"></a><br><h4>  Apa yang saya bicarakan? </h4><br>  Merupakan hal umum bagi pengembang untuk mengklik tautan ke aset statis, seperti perpustakaan atau plugin, yang terletak di situs dan sumber daya CDN.  Contoh klasik adalah jQuery. <br><br>  Ada sejumlah keuntungan yang jelas, tetapi tujuan saya kemudian dalam artikel ini adalah untuk mengekspos pendekatan ini, dan untuk menunjukkan bahwa kerugiannya jauh lebih lazim. <br><br>  (Pertama, pertimbangkan manfaatnya). <br><br><ul><li>  <b>Ini nyaman.</b>  Ini membutuhkan sedikit usaha untuk menghubungkan file.  Salin baris kode HTML, dan Anda selesai.  Mudah </li><li>  <b>Kami mendapatkan akses ke CDN.</b>  code.jquery.com disediakan oleh StackPath, ini adalah CDN.  Dengan menghubungkan ke konten di sumber ini, kami mendapatkan pengiriman berkualitas CDN, gratis. </li><li> <b>File pengguna mungkin sudah di-cache.</b>  Jika situs <a href="">web-a.com menautkan</a> ke <a href="">code.jquery.com/jquery-3.3.1.slim.min.js</a> dan pengguna beralih dari sini ke situs <a href="">web-b.com</a> , yang juga menautkan ke <a href="">code.jquery.com/jquery-3.3 .1.slim.min.js</a> , maka pengguna akan memiliki file ini di cache. </li></ul><br><h4>  Risiko: Penurunan Kecepatan dan Kegagalan </h4><br>  Saya tidak akan membahas terlalu banyak detail dalam posting ini.  Saya memiliki seluruh artikel tentang kelayakan pihak ketiga dan risiko yang terkait dengan keterlambatan dan interupsi.  Cukuplah untuk mengatakan bahwa jika Anda memiliki sumber daya kritis yang terkait dengan penyedia pihak ketiga, dan jika penyedia menderita crash dan penurunan kecepatan atau pemadaman, ini adalah berita yang sangat tidak menyenangkan bagi Anda.  Anda akan menderita karena ini juga. <br><br>  Jika Anda memiliki CSS pemblokiran render atau JS sinkron yang dihosting pada sumber daya pihak ketiga, silakan dan transfer mereka ke infrastruktur Anda sendiri segera.  Aset kritis terlalu berharga untuk ditinggalkan di server pihak ketiga. <br><br><h4>  Risiko: Pengakhiran Layanan </h4><br>  Ini adalah kejadian yang jauh kurang umum, tetapi apa yang terjadi jika penyedia memutuskan bahwa mereka perlu menghentikan layanan?  Inilah yang dilakukan Rawgit pada Oktober 2018, sejauh ini (pada saat penulisan), pencarian kasar pada kode GitHub masih menyediakan lebih dari satu juta tautan ke layanan, yang saat ini sedang ditutup, dan hampir 20.000 situs yang ada terus lihat itu. <br><br><h4>  Risiko: Kerentanan Keamanan </h4><br>  Hal lain yang perlu diperhatikan adalah masalah kepercayaan sederhana.  Jika kami membawa konten dari sumber pihak ketiga ke halaman kami, kami harus berharap bahwa file yang kami terima persis apa yang kami harapkan akan terima, dan mereka melakukan persis seperti yang kami harapkan darinya. <br><br>  Bayangkan kerugian yang bisa dilakukan jika seseorang bisa menguasai penyedia seperti code.jquery.com dan mulai mengirimkan konten yang dikompromikan atau berbahaya.  Menakutkan memikirkannya! <br><br><h4>  Integritas Sub-Sumber Daya </h4><br>  Kami harus membayar upeti kepada semua penyedia pihak ketiga yang disebutkan sejauh ini dalam artikel ini, mereka melakukan segalanya untuk memastikan integritas sub-sumber daya (Subresource Integrity - SRI).  SRI adalah mekanisme di mana penyedia menyediakan hash (secara teknis, hash diikuti oleh pengkodean Base64) dari file tertentu yang Anda harapkan dan akan digunakan.  Browser kemudian dapat memverifikasi bahwa file yang Anda terima persis seperti yang Anda minta. <br><br><pre><code class="plaintext hljs">&lt;script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8=" crossorigin="anonymous"&gt;&lt;/script&gt;</code> </pre> <br>  Sekali lagi, jika Anda benar-benar harus menghubungkan konten statis ke sumber daya pihak ketiga, pastikan bahwa SRI aktif.  Anda dapat menghubungkan SRI sendiri. <br><br><h4>  Reckoning: Negosiasi Jaringan </h4><br>  Salah satu biaya terbesar dan paling mendesak yang kami keluarkan adalah biaya membuka koneksi TCP baru.  Setiap sumber daya baru yang perlu kita kunjungi membutuhkan pembukaan koneksi, yang bisa sangat mahal: resolusi DNS, handshake TCP, negosiasi TLS, yang semuanya berkontribusi, dan cerita semakin memburuk karena koneksi tertunda. <br><br>  Saya akan memberikan contoh yang diambil langsung dari halaman Memulai Bootstrap sendiri.  Mereka menginstruksikan pengguna untuk melampirkan empat file. <br><br>  Keempat file ini terletak pada tiga sumber daya yang berbeda, yaitu, kita perlu membuka tiga koneksi TCP.  Berapa biayanya?  Nah, dengan koneksi yang cukup cepat, konten file-file statis di samping adalah 311ms, atau 1,65x lebih lambat daripada ketika menempatkannya di hosting Anda sendiri. <br><br>  Dengan menghubungi tiga sumber berbeda untuk melayani aset statis, kami secara kolektif kehilangan 805ms yang tidak perlu untuk persetujuan jaringan. <br><br>  OK, itu tidak begitu menakutkan, tetapi Trainline, klien saya, menemukan bahwa ketika penundaan dikurangi 300ms, pengunjung membayar tambahan 8 juta pound per tahun.  Ini adalah cara yang cukup mudah untuk menghasilkan 8 juta. <br><br>  Hanya dengan memindahkan sumber daya kami ke domain Anda, kami sepenuhnya menghilangkan biaya koneksi tambahan. <br><br>  Untuk koneksi yang lebih lambat, dengan penundaan yang lebih lama, ceritanya jauh lebih buruk.  Untuk 3G, versi pihak ketiga lebih lambat dari 1.765-an.  Saya pikir itu dimaksudkan untuk membuat situs kami lebih cepat. <br><br>  Ketika menghubungkan dengan penundaan besar, total biaya jaringan 5.037s mengerikan.  Apa yang bisa dihindari sepenuhnya. <br><br>  Memindahkan file ke infrastruktur kami sendiri mengurangi waktu pengunduhan dari 5.4s menjadi 3.6s. <br><br>  Jika ini bukan alasan yang bagus untuk meng-host sumber daya statis Anda, saya tidak tahu harus membawa apa lagi. <br><br><h4>  Pra-koneksi </h4><br>  Tentu saja, inti dari presentasi saya di sini adalah bahwa Anda tidak boleh memposting sumber daya statis di samping jika Anda dapat melakukan ini di hosting Anda.  Namun, jika tangan Anda terikat, Anda dapat menggunakan preconnect Resource Hint untuk secara proaktif membuka koneksi TCP ke sumber tertentu: Selain itu, menggunakan mereka sebagai header HTTP akan lebih cepat. <br>  <b>Catatan</b>  Bahkan jika Anda menggunakan pra-koneksi, jumlah waktu yang hilang akan berkurang hanya sedikit: Anda masih perlu membuka koneksi yang sesuai, dan kemungkinan biaya tidak akan pernah bisa dibenarkan, terutama untuk koneksi yang lambat. <br><br><h4>  Reckoning: Kehilangan Prioritas </h4><br>  Penghitungan kedua datang dalam bentuk optimasi di tingkat protokol, yang kami lewatkan ketika kami membagi konten ke dalam domain.  Jika Anda menggunakan HTTP / 2, apa yang harus dilakukan, Anda mendapatkan akses ke prioritisasi. <br><br>  Semua aliran (karenanya sumber daya) dengan koneksi TCP yang sama mempertahankan prioritas, dan browser dan server bekerja bersama-sama untuk membangun pohon ketergantungan dari semua aliran yang diprioritaskan ini, sehingga kami dapat mengembalikan sumber daya kritis lebih cepat dan mungkin menunda pengiriman yang kurang penting. <br><br>  <b>Catatan</b>  Secara teknis, karena penggabungan koneksi HTTP / 2, permintaan dapat diprioritaskan sehubungan satu sama lain di berbagai domain, selama mereka berbagi alamat IP yang sama. <br><br>  Jika kami mendistribusikan sumber daya kami di berbagai domain, kami harus membuka beberapa koneksi TCP yang unik.  Kami tidak dapat referensi silang prioritas untuk koneksi ini, yaitu, kami kehilangan kemampuan untuk mengirimkan file dengan cara tertentu yang dipikirkan dengan matang. <br><br>  Dengan meng-hosting semua konten pada satu hosting, kita dapat membangun pohon ketergantungan yang lebih kompleks.  Setiap utas memiliki ID sendiri, karena mereka milik pohon yang sama.  Jika kami menyediakan konten sebanyak mungkin dari satu domain, kami dapat membiarkan HTTP / 2 melakukan tugasnya dan memprioritaskan aset dengan harapan respons yang lebih cepat. <br><br><h4>  Caching </h4><br>  Pada umumnya, host sumber daya statis tampaknya cukup baik dengan menetapkan arahan max-age berumur panjang.  Ini masuk akal karena konten statis pada URL versi (seperti yang dinyatakan di atas) tidak akan pernah berubah.  Ini membuatnya sangat aman dan rasional untuk menegakkan kebijakan cache yang cukup agresif. <br><br>  Namun, ini tidak selalu terjadi, dan dengan secara mandiri menempatkan sumber daya Anda, Anda dapat mengembangkan lebih banyak strategi caching individual. <br><br><h4>  Mitos: Caching Lintas-Domain </h4><br>  Lebih menarik adalah kemampuan untuk melakukan caching aset lintas domain.  Artinya, jika banyak situs menautkan ke versi jQuery yang sama, yang terletak di CDN, maka tentunya pengguna sudah memiliki file khusus ini di komputer mereka.  Sesuatu seperti berbagi sumber daya peer-to-peer.  Ini adalah salah satu argumen paling umum untuk menggunakan penyedia aset statis pihak ketiga. <br><br>  Sayangnya, tidak ada bukti yang dipublikasikan untuk mendukung klaim ini: tidak ada alasan untuk percaya bahwa ini benar.  Sebaliknya, penelitian terbaru oleh Paul Calvano mengisyaratkan bahwa yang sebaliknya mungkin benar: <br><br>  Ada perbedaan yang mencolok antara usia cache sumber daya CSS dan font web pihak pertama dan ketiga.  95% font pihak pertama lebih tua dari 1 minggu dibandingkan dengan 50% font pihak ketiga yang kurang dari 1 minggu.  Ini memberikan alasan yang bagus untuk font web yang di-host-sendiri. <br><br>  Secara umum, tampaknya konten pihak ketiga di-cache lebih buruk daripada kontennya sendiri. <br><br>  Yang lebih penting lagi, Safari telah sepenuhnya menonaktifkan fitur ini karena kekhawatiran tentang penyalahgunaan privasi, sehingga teknologi cache bersama mungkin tidak berfungsi pada saat penulisan ini untuk 16% pengguna di seluruh dunia. <br><br>  Singkatnya, meskipun secara teori ini bagus, tidak ada bukti bahwa caching lintas domain entah bagaimana efisien. <br><br><h4>  Akses CDN </h4><br>  Manfaat lain yang tersebar luas dari menghubungi penyedia sumber daya statis adalah bahwa ia kemungkinan akan menggunakan infrastruktur yang kuat dengan kemampuan CDN: distribusi global, skalabilitas, latensi rendah, dan ketersediaan tinggi. <br><br>  Karena ini benar, jika Anda peduli dengan kinerja Anda, Anda harus menjalankan konten Anda sendiri dari CDN.  Dengan tingkat harga hosting saat ini, ada beberapa alasan mengapa Anda tidak menggunakan ini untuk sumber daya Anda. <br><br>  Dengan kata lain: jika Anda berpikir Anda membutuhkan CDN untuk jQuery Anda, Anda akan membutuhkan CDN untuk semuanya. <br><br><h4>  Host sumber daya statis di hosting Anda </h4><br>  Bahkan, ada sangat sedikit alasan untuk meninggalkan sumber daya statis Anda di infrastruktur orang lain.  Manfaat yang mungkin sering merupakan mitos, dan bahkan jika tidak, kompromi sama sekali tidak layak.  Memuat sumber daya dari berbagai sumber jauh lebih lambat.  Selama beberapa hari berikutnya, habiskan sepuluh menit mengaudit proyek Anda dan kendalikan semua sumber daya statis pihak ketiga. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id457210/">https://habr.com/ru/post/id457210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id457200/index.html">Bot menggambar untuk mewujudkan adegan sehari-hari dan bahkan cerita</a></li>
<li><a href="../id457202/index.html">Bagaimana kami memilih ide untuk pengembangan produk kami: vendor harus dapat mendengar ...</a></li>
<li><a href="../id457204/index.html">Windows PowerShell dan Long Paths</a></li>
<li><a href="../id457206/index.html">SQL Index Manager - cerita panjang tentang SQL Server, penggalian kuburan dan pemeliharaan indeks</a></li>
<li><a href="../id457208/index.html">Menghasilkan robots.txt secara dinamis untuk situs ASP.NET Core berdasarkan lingkungan</a></li>
<li><a href="../id457212/index.html">Mengapa tidak ada kata terlambat untuk mulai belajar Java (atau bahasa Java lainnya)</a></li>
<li><a href="../id457224/index.html">Pendekatan Modern untuk Persaingan di Android: Corotins at Kotlin</a></li>
<li><a href="../id457232/index.html">Robot lebah "Bumble" - uji terbang pertama di dalam ISS</a></li>
<li><a href="../id457234/index.html">Bias kognitif produk</a></li>
<li><a href="../id457236/index.html">Bagaimana perusahaan IT berjuang untuk menjual musik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>