<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤺 🕖 🌍 再加上百分之一的自动化 ⚗️ 📏 🚗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在上一篇文章的最后，我确定列出了我真正想作为整个自动化（不是国家而是乡村住宅）自动化的一部分而实施的无数技术解决方案列表。 

 以前，总功耗是由具有Modbus接口的单相电表控制的。 监视电流消耗读数以免超出合理的限制并且不等待组计算机断开连接很有用。 他一声巨响地完成了这项任务。 但是，对每个消...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>再加上百分之一的自动化</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirenboard/blog/421689/"><img src="https://habrastorage.org/webt/zi/zb/3d/zizb3dvguspwkvbjbz-dhmfb4sa.png"><br><br> 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">上一篇文章</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">最后，</a>我确定列出了我真正想作为整个自动化（不是国家而是乡村住宅）自动化的一部分而实施的无数技术解决方案列表。 <br><br> 以前，总功耗是由具有Modbus接口的单相电表控制的。 监视电流消耗读数以免超出合理的限制并且不等待组计算机断开连接很有用。 他一声巨响地完成了这项任务。 但是，对每个消费者进行单独监视会更加有趣。 对于什么以及如何执行此操作，我将尝试在本文中讲述。 <br><a name="habracut"></a><br> 首先，同事，我要非常感谢您对上一篇文章的关注。 回应您的评论并不比撰写文章本身有趣。 一位细心的读者注意到，粗糙的滤水器倒置安装！ <br><br>  Wiren Board生产几种型号的多通道Modbus功率计：四通道三相怪物<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WB-MAP12H</a> （及其单通道弟弟<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WB-MAP3H</a> ），六通道单相<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WB-MAP6S</a>和单独的型号<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WB-MAP3E</a> ，在需要诊断短路的特殊情况下使用和强大的浪潮。 <br><br>  WB-MAP系列的计数器可测量大量网络参数：电压，电流，频率，功率（有功，无功，总功率），功率因数，相角的瞬时参数； 每个通道的累积能量值。 除此之外，MAP计数器还允许您通过电压和电流来测量谐波系数，这对于评估带有“邪恶”用户的网络中的电能质量非常重要。 <br><br> 电压直接提供给电表的端子，每个通道的电流由可拆卸的电流互感器测量。 将仪表安装在完成的面板中时，这非常方便。 <br><br><img src="https://habrastorage.org/webt/fb/pn/ia/fbpniasb-wtfodesb_ifftwogs8.png" width="350" height="300"><br>  <i>柜台安装</i> <br><table><tbody><tr><td><img src="https://habrastorage.org/webt/xr/ey/rp/xreyrpcn8dsawapw8fgxw4ejby8.png" width="300" height="200"></td><td><img src="https://habrastorage.org/webt/kx/by/6f/kxby6fq6zaejmuviwkuf_k8oizo.png" width="300" height="200"></td></tr></tbody></table>  <i>安装分流变压器。</i> <br><br> 在显示板上，电流互感器看起来很漂亮整洁（如帖子标题中的图片所示），在现实生活中，您必须将变压器放置在原来的位置。 是的，盾牌一定很大！ <br><br> 正如我在上一篇文章中详细介绍的那样，我的乡间别墅的自动化项目基于我们的Wiren Board 5控制器的先前版本，通过Modbus接口将各种继电器模块，执行器和传感器连接到该版本。 <br><br> 在周末之前，我用两个WB-MAP6S计数器和一个WB-MAP12H武装自己，开始工作。 当然，最初对测量渠道数量的估计是不正确的：我想观察更多的消费者，因此我不得不花一些时间考虑哪些群体可以测量消费量。 <br><br> 选择了一般输入，稳定器和逆变器之后的负载，对流器和空调（分别单独），两个锅炉，一个电信柜，自动门，一台冰箱，一个温暖的地板。 <br><br> 计数器收集大量参数（WB-MAP12H具有超过一千个寄存器），但是如果您经常查询它们，即使对每个计数器进行数十个参数的持续轮询也将成为RS-485总线上的一大负担。 我将控制器随附的标准模板减少到所需的最小参数。 <br><br> 我将计数器转移到Wiren Board控制器的第二条RS-485总线上，以免干扰继电器模块和传感器的正常运行，并将速度提高到115200 kbit / s。 在这种配置下，仪表的测量开始变得非常愉快，并且不会干扰其余自动化设备的功能。 <br><br> 在实际使用所得结果之前，必须从各个方面进行分析。  Wiren Board控制器具有内置数据库和简单的可视化工具，但对于严肃的任务，值得使用更严肃的工具。 <br><br> 记得毕竟我使用Zabbix CP后，我决定在其上部署监视功能，但是渴望获得新的性能，因此我决定尝试使用流行的Influxdb + Grafana软件包来存储和显示数据。 控制器将所有数据以mqtt-topics的形式转换为服务器上单独的mqtt-broker， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Python脚本</a>在其中处理数据并将其存储在Influx中。 在那里安装了Grafana以显示所有内容。 <br><br> 最初的结果并没有让我失望。 这里有一些例子。 <br><br><img src="https://habrastorage.org/webt/60/3x/6g/603x6gqnkbs3lbkagbs15gvoqxi.png"><br>  <i>电源电压</i> <br><br> 除少数例外，所有故障均在21:00-23:00时发生，在周末尤为明显。 高峰-清晨。 <br><br> 这是两个稳定器的工作外观（黄色和蓝色线条）： <br><br><img src="https://habrastorage.org/webt/cc/zh/nk/cczhnkig80jc4ojl41cr9yibmdq.png"><br><br> 这些是拉脱维亚制造商广为人知的普通继电器稳定器，具有足够大的阶跃，可改变输出电压。 没什么特别的，尽管很明显其中之一倾向于切换到非常高的电压值（不过，该电压值适合在GOST的框架内）。 第一位替代候选人。 <br><br> 即时值以此类graphan小部件的形式显示： <br><br><img src="https://habrastorage.org/webt/qx/ag/eu/qxageuehzxgwz7dkm1nqmrmwr54.png"><br><br> 简单直观，适合输出到墙上的信息屏幕或平板电脑。 <br><br> 所有用户的瞬时功率图看起来非常漂亮（单击图像可将其完全打开）： <br><br> <a href=""><img src="https://habrastorage.org/webt/ft/rf/bg/ftrfbgrskmyh3isa90ckiewlmv0.png"></a> <br><br> 大而绿的不是鳄鱼，而是总的输入功率。 <br><br> 借助Grafana，您不仅可以在图表上选择所有内容，还可以选择一个或多个感兴趣的指标。 <br><br> 功率因数（cosφ）。 在现代家用设备中，它本身就很不错。 我检查了三个消费者的操作情况：空调，冰箱和热水器。 <br><br> 在主动运行时，热水器的功率因数为1-“高”（0.95 ... 1），冰箱为0.85-“良好”（0.8 ... 0.95）； 空调的功率因数（0.76）处于“满意”范围的上限（0.65 ... 0.8）。 <br><br> 变频空调： <br><table><tbody><tr><td><img src="https://habrastorage.org/webt/_r/zv/8q/_rzv8qtjho4fmckbrv1lou3y93m.png"></td><td><img src="https://habrastorage.org/webt/0g/w9/lo/0gw9loer2fsvdxf3zaenp3vzugm.png"></td></tr></tbody></table><br>  <i>在正常冷却模式下运行，压缩机上有一个单独的峰（右图）</i> <br><br> 在外部设备的压缩机初始启动，稳定运行模式，待机模式下出现明显的峰值。 <br><br> 冰箱如何工作？  “ Dr-dr-dr-dr-dr-dr-dr？” 差不多了 压缩机在腔室内预热时会定期启动： <br><br><img src="https://habrastorage.org/webt/-0/2f/zt/-02fztfesqpqvmmxxeu5n_jynus.png"><br>  <i>定期包括冰箱压缩机</i> <br><br><img src="https://habrastorage.org/webt/vw/af/gc/vwafgcmfkhqqtu_bjfd9b13abic.png"><br>  <i>单峰功率结构</i> <br><br> 单独的周期：打开冰箱的压缩机时，可以看到电涌。  WB-MAP计数器非常敏感：看到这些小的峰值，大约12瓦吗？ 冰箱内的灯亮了：有人爬进了冰箱！ <br><br> 加热的毛巾架以连续的开/关周期运行，以保持设定的温度： <br><table><tbody><tr><td><img src="https://habrastorage.org/webt/st/n3/mr/stn3mrsvwcsbeahfc4mrb3xpcx4.png"></td><td><img src="https://habrastorage.org/webt/aj/h2/rg/ajh2rg_v-32ncrz7o-5nc-yu0ey.png"></td></tr></tbody></table><br>  <i>右侧是各个消费高峰的更详细图像。</i> <br><br> 滚刀的工作方式大致相同： <br><br><img src="https://habrastorage.org/webt/1z/ez/hq/1zezhqbdevoxpcnewuygavpszu8.png"><br><br> 它似乎煮了我的早晨咖啡。 <br><br> 自动门的有趣的能量分布： <br><br><img src="https://habrastorage.org/webt/wi/mz/kz/wimzkzayo2vf00tv825u-4tup3w.png"><br><br> 它们在待机模式下消耗约5瓦的功率，在运行期间，能量消耗曲线使您可以看到阀门运动的各个阶段：第一个开始打开，然后第二个开始，然后它们一起打开，然后依次停止，驱动马达关闭。 <br><br> 锅炉保持水温，接通的频率和时间取决于热水的消耗量： <br><br><img src="https://habrastorage.org/webt/iy/o1/tx/iyo1txuwacaidp4qhmuorksn4ug.png"><br><br> 我不会再用图表让读者厌烦-我将展示一款平板电脑！  （Grafana不仅可以绘图，还可以在表格和条形图中显示数据。） <br><br><img src="https://habrastorage.org/webt/kn/zg/uz/knzguzes7leklkm9yptbxotaav0.png"><br><br> 该标签很简单，您可以按小时跟踪总能耗，并根据当前电价来评估每小时的成本。  Influxdb的旧版本是从服务器上当前版本的Ubuntu的存储库中安装的，它不知道如何从这些样本中获取通常的样本，因此无法以每小时的成本添加一列。 <br><br> 在图表上，消耗量如下所示： <br><br><img src="https://habrastorage.org/webt/qk/o3/ev/qko3evrab-xfwmw2jchzdlcnvac.png"><br><br> 鉴于Gafana可以生成警报消息，对于轻量级的电源监控而言，结果已经足够了。 <br> 但是，我想解决更多令人兴奋的问题。 <br><br><ul><li> 电流和电压的谐波。 他们是否提供有关房屋的有用信息？ 不良的消费者或闪闪发光的触点通常会产生高次谐波。 计数器的临时解析需要多长时间才能检测到它们并做出有关禁用“坏负载”的决策？ 还是只发出警报？ </li><li> 空调和对流器。 如果从房间的温度开始，您可以了解空调以哪种模式工作：它是不是试图以强韧的方式冷却对流器（应关闭对流器），或者如果空调以相反的方式工作，它们是否可以一起快速为房间供暖？ </li><li> 盖茨 如果能耗曲线发生变化并开始与常规曲线明显不同，则可能表明存在某种障碍，驱动器中的油由于低温而变稠，有人经常打开和关闭门。 在这里您可以发送警告，关闭电源。 是否有足够的控制器（Influx和Grafana）用于此目的？ 也许这些事情需要在单独的脚本中实现，仅订阅具有门能耗参数值的消息。 </li><li> 泵站和井泵。 与水流评估一起，可以跟踪由于某些故障，泄漏，储水箱问题而导致的性能下降。 </li><li> 我认为化粪池压缩机的运行也可以通过能耗来估算，尽管空气消耗量可以提供更多信息。 </li><li> 热水器。 井中的水非常硬，水垢很快形成。 因此，加热元件必须更多地工作并且以更严格的模式工作，以从附加的浮渣覆盖层下面加热水（如果水很浓，它也开始燃烧）。 了解功耗分析是否足以检测到形成的水垢（锅炉没有用于报告水箱中水温的界面）将会很有趣？ </li><li> 总功耗-如果电流接近其极限值，则可以禁用低优先级负载。 </li></ul><br> 如果有人为使用单个设备的能量监控提供了意外而有趣的选择，我将感到非常高兴。 <br><br> 朋友们，再见！ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN421689/">https://habr.com/ru/post/zh-CN421689/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN421675/index.html">最后，存在一个只有量子计算机才能解决的问题</a></li>
<li><a href="../zh-CN421677/index.html">如何识别状态控制中的风险以及为什么要进行这种机器学习</a></li>
<li><a href="../zh-CN421683/index.html">#RuPostgres会议：扩展PostgreSQL应用程序</a></li>
<li><a href="../zh-CN421685/index.html">为什么从事IT工作并不那么酷</a></li>
<li><a href="../zh-CN421687/index.html">如何组织进出知识共享</a></li>
<li><a href="../zh-CN421691/index.html">统计过程管理（第1部分。实施经验）</a></li>
<li><a href="../zh-CN421693/index.html">一个API的故事：我们如何将科学怪人变成英俊</a></li>
<li><a href="../zh-CN421695/index.html">[非]常规网络：如何使用Wi-Fi检测袋子中的水</a></li>
<li><a href="../zh-CN421699/index.html">从备份还原Jira时如何摆脱Active Object表的错误</a></li>
<li><a href="../zh-CN421701/index.html">Python学习沙箱和备忘单</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>