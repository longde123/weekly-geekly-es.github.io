<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå°Ô∏è üìè üÜë Instale o VMware ESXi no Mac Pro 1.1 üõåüèª üë©üèΩ‚Äçü§ù‚Äçüë©üèº ü§Ωüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O artigo descreve minha experi√™ncia na instala√ß√£o do VMware ESXi no antigo Apple Mac Pro 1.1. 

  

 A tarefa foi definida pelo cliente - para expandi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Instale o VMware ESXi no Mac Pro 1.1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476724/">  O artigo descreve minha experi√™ncia na instala√ß√£o do VMware ESXi no antigo Apple Mac Pro 1.1. <br><br> <a href=""><img src="https://habrastorage.org/webt/ie/fo/vc/iefovccpq3ylsnbc6cs2s0uclfg.jpeg"></a> <br><br>  A tarefa foi definida pelo cliente - para expandir o servidor de arquivos.  Como o servidor de arquivos da empresa foi criado no PowerMac G5 em 2016 e como atender ao legado criado √© digno de um artigo separado.  Foi decidido combinar a extens√£o com a atualiza√ß√£o e criar o servidor de arquivos a partir do MacPro existente.  E como est√° em um processador intel, a virtualiza√ß√£o tamb√©m pode ser feita. <br><br>  A tarefa √© bastante vi√°vel, mas tive que enfrentar v√°rias dificuldades e coletar dados pouco a pouco sobre sua solu√ß√£o.  Al√©m disso, a busca por uma solu√ß√£o era muitas vezes obscurecida pelos resultados do problema inverso ‚Äúinstalar o Mac OS no VMware‚Äù. <br><br>  Para consolidar a experi√™ncia adquirida, colete todos os gr√£os em um s√≥ lugar e traduza-os para o russo, este artigo foi criado. <br><a name="habracut"></a><br>  Requisito do leitor: familiarize-se com a instala√ß√£o do VMware ESXi em um hardware compat√≠vel, como um servidor HP.  Familiarize-se com a t√©cnica da Apple.  Em particular, n√£o dou detalhes da desmontagem da montagem do MacPro, e h√° muitas nuances. <br><br><h3>  1. Hardware </h3><br>  O MacPro 1.1, conhecido como MA356LL / A, tamb√©m conhecido como A1186 - o primeiro computador da Apple com processadores Intel, foi produzido em 2006-2008.  Apesar da idade de mais de 10 anos, o computador est√° em excelente condi√ß√£o f√≠sica.  Nenhum dos 4 f√£s mais poderosos √© barulhento.  Limpeza e desmontagem padr√£o necess√°rias. <br><br>  Processadores - 2 Xeon 5150 de n√∫cleo duplo. Arquitetura totalmente de 64 bits, mas EFI bootloader de 32 bits.  Isso √© muito importante, a vida √© muito venenosa! <br><br>  RAM - padr√£o de 4 GB PC5300 DDR2 ECC 667 MHz, pode ser facilmente expandido para 16 GB e alguns dizem mais.  A mem√≥ria do servidor √© adequada a partir da antiga HP gen.5-6 e, em geral, o computador √© muito semelhante a esse servidor apenas em um caso diferente. <br><br>  HDD - 4 cestos para 3,5 ‚Äù( <abbr title="F√°brica de formul√°rios grandes">LFF</abbr> ).  Com algumas melhorias f√≠sicas, 2,5 "( <abbr title="F√°brica de formul√°rios pequenos">SFF</abbr> ) entra nos cestos. Para mais detalhes, consulte <a href="http://www.efxi.ru/more/upgrade_ssd_mac_pro.html">[8] SSDs no Apple Mac Pro 1.1</a> . <br><br>  Tamb√©m h√° um DVD IDE, de at√© 2 partes no formato de 5,25 ". Mas tamb√©m existem conectores SATA. Na placa-m√£e, eles s√£o chamados ODD SATA (ODD = Unidade de disco √≥ptico). Minhas experi√™ncias mostraram que voc√™ pode e deve instalar discos r√≠gidos e SSDs neste local. <br><br><div class="spoiler">  <b class="spoiler_title">Mais com fotos</b> <div class="spoiler_text">  Voc√™ pode definitivamente combinar dispositivos IDE e SATA.  Talvez eles podem at√© coloc√°-los 2 IDE e 2 SATA, n√£o verifiquei. <br><br>  N√£o se esque√ßa de algumas dificuldades com os alimentos: apenas 2 molex s√£o criados, a capacidade de carga √© desconhecida.  A fonte de alimenta√ß√£o n√£o √© a mesma de um PC, toda a energia passa pela placa-m√£e, os conectores nela n√£o s√£o padr√£o para energia. <br><br>  Conector ODD <br><br> <a href=""><img src="https://habrastorage.org/webt/gx/ne/b6/gxneb6nya-2_rhpnpe0txxgvu34.jpeg"></a> <br><br>  O padr√£o de 0,5 m √© curto, ser√° apertado e √© conveniente conect√°-lo no √∫ltimo momento antes da conclus√£o da cesta deslizar para dentro da caixa. <br><br><img src="https://habrastorage.org/webt/aw/pl/rh/awplrhienujjzvlrauuzbc7x5rg.jpeg"><br><br>  Voc√™ precisar√° de um cabo SATA de 0,8 m, de prefer√™ncia com um conector angular.  1m demais. <br><br><img src="https://habrastorage.org/webt/vq/eg/w0/vqegw0enihb6tqo7npcs7dfzzio.jpeg"><br><br>  Como um adaptador f√≠sico 5.25-2.5, o caso de um CD-ROM desnecess√°rio √© perfeito.  Se n√£o houver desnecess√°rio - ele definitivamente se tornar√° tal ap√≥s a separa√ß√£o do enchimento do corpo. <br><br><img src="https://habrastorage.org/webt/ed/hv/co/edhvco9rjvhxjsilnp4c8cf8xtk.jpeg"><br></div></div><br>  Uma vis√£o geral do hardware e as possibilidades de sua moderniza√ß√£o podem ser conclu√≠das.  Olhando para o futuro, direi apenas que voc√™ n√£o deve se apressar em coletar e instalar tudo de uma s√≥ vez; no processo, precisaremos extrair o trem. <br><br><h3>  2. sele√ß√£o ESXi </h3><br>  Usando a <a href="https://www.vmware.com/resources/compatibility/search.php">tabela de compatibilidade da VMware,</a> voc√™ pode entender que o Xeon 5150 suporta no m√°ximo ESXi 5.5 U3.  √â esta vers√£o que vamos instalar. <br><br>  No ESXi 6.0, eles ofereceram suporte para tudo "obsoleto".  Oficialmente, ele n√£o pode ser colocado aqui e os mais novos do tipo 6.7, realmente - ele pode e vai funcionar.  Na Internet, houve men√ß√µes de que isso √© bem-sucedido.  Mas, n√£o desta vez, minha opini√£o √© que a incompatibilidade do processador √© uma forte feiti√ßaria.  Na produ√ß√£o, isso n√£o √© poss√≠vel, apenas para experimentos. <br><br>  Para novas vers√µes do ESXi, os m√©todos de conclus√£o de arquivo s√£o os mesmos. <br><br><h3>  3. Finaliza√ß√£o do arquivo de distribui√ß√£o </h3><br>  A distribui√ß√£o assumiu o padr√£o.  √â poss√≠vel a partir do site, √© poss√≠vel a partir de torrents.  ESXi 5.5 U3. <br><br>  Mas lembre-se, prestei aten√ß√£o √† arquitetura completamente de 64 bits, mas o gerenciador de inicializa√ß√£o EFI √© de 32 bits ?!  E aqui ele se encontrar√°.  Quando voc√™ tenta baixar o instalador, nada acontece. <br>  √â necess√°rio substituir o carregador de inicializa√ß√£o do instalador por um mais antigo de 32 bits.  Parece de uma vers√£o ainda anterior √† 5.0. <br><br>  <i>Isso √© descrito em detalhes no artigo <a href="https://communities.vmware.com/thread/327538">[2] Compatibilidade do Mac Pro com a instala√ß√£o do ESXi 5.0</a> , o arquivo <a href="">BOOTIA32.EFI</a> √© <a href="">obtido a</a> partir da√≠.</i> <br><br>  Usamos o programa de edi√ß√£o iso (por exemplo, ultraiso).  Encontramos a pasta \ EFI \ BOOT dentro do iso e substitu√≠mos o arquivo BOOTIA32.EFI pelo antigo, salve-o e agora tudo j√° est√° carregado! <br><br><img src="https://habrastorage.org/webt/ma/kv/ba/makvbay7dixrxt7iu60iezesqn4.jpeg"><br><br><h3>  4. Instalando o ESXi </h3><br>  Sem detalhes, tudo est√° como sempre.  Instala√ß√£o conclu√≠da com sucesso, mas nada est√° carregando, isso √© normal! <br><br><h3>  5. Finaliza√ß√£o do arquivo do carregador de inicializa√ß√£o </h3><br>  <i>O algoritmo de a√ß√µes est√° especificado no artigo <a href="https://neckercube.com/posts/2016-04-11-bringing-an-old-mac-pro-back-to-life-with-esxi-6-0/">[3] Trazendo de volta √† vida um Mac Pro antigo com o ESXi 6.0</a> , tamb√©m h√° um link para o arquivo de <a href="">arquivos de inicializa√ß√£o de 32 bits</a> .</i> <br><br><h4>  5.1  Removemos o disco r√≠gido e o conectamos a outro computador. </h4>  Eu usei a vers√£o de hardware do MacBook com o adaptador sata-usb, voc√™ pode usar o Linux.  Se n√£o houver um computador separado, voc√™ poder√° usar outro trem, conect√°-lo ao MacPro, instalar o MacOS e montar o disco r√≠gido ESXi. <br><br>  <b>Voc√™ n√£o pode usar o Windows!</b>  Mesmo que este disco seja inclu√≠do no sistema Windows, pequenas altera√ß√µes ser√£o feitas nele sem demanda.  Pequeno e n√£o incomoda ningu√©m, mas, no nosso caso, o download do ESXi terminar√° com o erro "Bank6 n√£o √© um banco de inicializa√ß√£o de vmware que nenhum hipervisor foi encontrado". <br><br><img src="https://habrastorage.org/webt/tb/ww/ql/tbwwqlf9wmgjooq4mxv6ol9qa04.png"><br><br>  <i>Aqui est√° um artigo com detalhes do que acontece se voc√™ n√£o obstante <a href="https://communities.vmware.com/thread/429698">[4] bank6 n√£o for um banco de inicializa√ß√£o VMware nenhum hipervisor encontrado</a> .</i>  <i>Mas <a href="https://kb.vmware.com/s/article/2012022">o m√©todo da</a> solu√ß√£o <a href="https://kb.vmware.com/s/article/2012022">√©</a> simples e r√°pido - coloque o ESXi novamente!</i> <br><br><h4>  5.2 Monte a parti√ß√£o EFI </h4><br>  Abra o terminal, certifique-se de mudar para o modo superusu√°rio <br><br><pre><code class="plaintext hljs">Sudo ‚Äìs</code> </pre> <br>  Crie um diret√≥rio para a se√ß√£o futura <br><br><pre> <code class="plaintext hljs">mkdir /Volumes/EFI</code> </pre> <br>  veja as se√ß√µes dispon√≠veis <br><br><pre> <code class="plaintext hljs">diskutil list</code> </pre> <br>  aqui est√° o que precisamos: uma se√ß√£o EFI chamada ESXi <br><br><img src="https://habrastorage.org/webt/6z/-m/uh/6z-muhyejlqbvakoj5m-0f_lmau.png"><br><br>  Monte-o <br><br><pre> <code class="plaintext hljs">mount_msdos /dev/disk2s1 /Volumes/EFI</code> </pre> <br>  Na unidade montada, voc√™ precisar√° substituir os arquivos por vers√µes mais antigas.  Vers√µes antigas podem ser encontradas no <a href="https://neckercube.com/posts/2016-04-11-bringing-an-old-mac-pro-back-to-life-with-esxi-6-0/">[3]</a> arquivo de <a href="">arquivos de inicializa√ß√£o de 32 bits</a> <br><br>  Arquivos para substituir: <br><br>  /EFI/BOOT/BOOTIA32.EFI <br>  /EFI/BOOT/BOOTx64.EFI <br>  /EFI/VMware/mboot32.efi <br>  /EFI/VMware/mboot64.efi <br><br><img src="https://habrastorage.org/webt/r7/xu/kd/r7xukdrdgxxifzeuudktui5dt7o.png"><br><br>  Ap√≥s a conclus√£o, desconecte a parti√ß√£o EFI montada <br><br><pre> <code class="plaintext hljs">umount -f /Volumes/EFI</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Nota sobre como criar uma imagem</b> <div class="spoiler_text"><h4>  Nota sobre como criar uma imagem </h4><br>  Idealmente, seria bom entender onde esses arquivos est√£o dentro da distribui√ß√£o.  Em seguida, eles podem ser substitu√≠dos ali mesmo e liberar sua pr√≥pria distribui√ß√£o "ESXi 5.5 para o antigo MacPro", totalmente preparada para uma instala√ß√£o sem problemas. <br><br>  N√£o consegui encontr√°-los.  Quase todos os arquivos com extens√µes do formato ".v00" na distribui√ß√£o ESXi s√£o arquivos tar de v√°rios tipos.  Os arquivos .Vtar est√£o inclu√≠dos neles, os arquivos tamb√©m est√£o neles ... Com o programa 7zip, eu cavei esses anexos sem fim por um longo tempo, mas n√£o consegui encontrar nada parecido com a se√ß√£o EFI.  Basicamente, existem diret√≥rios Linux. <br><br>  O arquivo efiboot.img parecia o mais adequado, mas voc√™ pode abri-lo facilmente e ver o que est√° errado l√°. <br><br><img src="https://habrastorage.org/webt/vl/44/xk/vl44xkhqttmrhyyhmzba3wlf3sm.png"><br></div></div><br><h4>  5.3  Retiramos o trem e instalamos no MacPro </h4><br>  J√° pronto para sempre, ferrando e montando tudo. <br><br>  E agora j√° estamos carregando o ESXi! <br><br>  Pode parecer que n√£o seja assim.  A partir do momento em que voc√™ o liga e a tela branca na tela preta, o ESXi demora um pouco mais do que antes do usual Mac OS da Apple. <br><br><h3>  6. FIM. </h3><br>  Isso conclui a instala√ß√£o, configure o ESXi como de costume para configurar o ESXi. <br><br> <a href=""><img src="https://habrastorage.org/webt/j3/ww/sp/j3wwsppozpfscd7ogqweylw2l3q.jpeg"></a> <br><br>  Vale a pena notar que a instala√ß√£o posterior do Mac Os nesse VMware instalado no hardware da Apple √© legal. <br><br><h3>  Literatura </h3><br>  Links para artigos, na maioria dos idiomas em ingl√™s. <br>  [1] Unidade √≥ptica Sata no Mac Pro 1.1 = substituindo o IDE sidyuk no SATA, no po√ßo ou no trem. <br>  <a href="https://discussions.apple.com/thread/3872488">https://discussions.apple.com/thread/3872488</a> <br>  <a href="http://www.tech.its.iastate.edu/macosx/downloads/MacPro-SATA-INS.pdf">http://www.tech.its.iastate.edu/macosx/downloads/MacPro-SATA-INS.pdf</a> <br>  [2] Compatibilidade do Mac Pro com a instala√ß√£o do ESXi 5.0 = sobre a substitui√ß√£o do gerenciador de inicializa√ß√£o para instala√ß√£o <br>  <a href="https://communities.vmware.com/thread/327538">https://communities.vmware.com/thread/327538</a> <br>  [3] Recuperando um antigo Mac Pro com o ESXi 6.0 = sobre a substitui√ß√£o de gerenciadores de inicializa√ß√£o por um ESXi j√° instalado. <br>  <a href="https://neckercube.com/posts/2016-04-11-bringing-an-old-mac-pro-back-to-life-with-esxi-6-0/">https://neckercube.com/posts/2016-04-11-bringing-an-old-mac-pro-back-to-life-with-esxi-6-0/</a> <br>  [4] bank6 n√£o √© um banco de inicializa√ß√£o do VMware nenhum hipervisor encontrado = o que acontecer√° se voc√™ se conectar no Windows <br>  <a href="https://communities.vmware.com/thread/429698">https://communities.vmware.com/thread/429698</a> <br>  [5] O host ESXi 5.x falha ao reiniciar ap√≥s a instala√ß√£o com o erro: N√£o √© um banco de inicializa√ß√£o do VMware.  Nenhum hipervisor encontrado (2012022) = e conselhos oficiais sobre como corrigi-lo <br>  <a href="https://kb.vmware.com/s/article/2012022">https://kb.vmware.com/s/article/2012022</a> <br>  [6] Como montar uma parti√ß√£o EFI no Mac OS <br>  <a href="https://kim.tools/blog/page/kak-primontirovat-efi-razdel-v-mac-os">https://kim.tools/blog/page/kak-primontirovat-efi-razdel-v-mac-os</a> <br>  [7] Guia de compatibilidade da VMware <br>  <a href="https://www.vmware.com/resources/compatibility/search.php">https://www.vmware.com/resources/compatibility/search.php</a> <br>  [8] SSDs no Apple Mac Pro 1.1 = instalando patins de 2,5 "em 3,5" em casa <br>  <a href="http://www.efxi.ru/more/upgrade_ssd_mac_pro.html">http://www.efxi.ru/more/upgrade_ssd_mac_pro.html</a> <br>  [9] Oferta de compra de adaptadores de tren√≥ pr√©-fabricados <br>  <a href="https://everymac.com/systems/apple/mac_pro/faq/mac-pro-how-to-replace-hard-drive-install-ssd.html">https://everymac.com/systems/apple/mac_pro/faq/mac-pro-how-to-replace-hard-drive-install-ssd.html</a> <br>  [10] Especifica√ß√£o do MacPro usado. <br>  <a href="https://everymac.com/systems/apple/mac_pro/specs/mac-pro-quad-2.66-specs.html">https://everymac.com/systems/apple/mac_pro/specs/mac-pro-quad-2.66-specs.htm</a> l <br><br><h3>  Lista de arquivos </h3><br>  <a href="">Carregador de</a> inicializa√ß√£o de instala√ß√£o do <a href="">BOOTIA32.EFI</a> de [2] <br>  <a href="">Arquivos de</a> inicializa√ß√£o de <a href="">32 bits</a> , substituindo o gerenciador de inicializa√ß√£o de [3] </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt476724/">https://habr.com/ru/post/pt476724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt476712/index.html">Servi√ßo para reuni√µes aleat√≥rias com estranhos, mas n√£o namoro. Hist√≥ria aleat√≥ria de inicializa√ß√£o do Coffee</a></li>
<li><a href="../pt476714/index.html">Opera√ß√£o de aprendizado de m√°quina no Mail.ru Mail</a></li>
<li><a href="../pt476718/index.html">Hist√≥ria de uma r√°dio nacional: Mussolini da Rural Radio e Joseph Goebbels aquecem l√¢mpadas</a></li>
<li><a href="../pt476720/index.html">Como identificar um funcion√°rio em potencial no est√°gio de curr√≠culo</a></li>
<li><a href="../pt476722/index.html">Automa√ß√£o de entrega de fluxo Apache NiFi</a></li>
<li><a href="../pt476726/index.html">Graduado pela Universidade de Innopolis sobre estudar na Universidade de Grenoble, AI, ingl√™s com franc√™s e queijo com percevejos</a></li>
<li><a href="../pt476728/index.html">Estrat√©gia de conte√∫do para empresas B2B: casos e listas de verifica√ß√£o</a></li>
<li><a href="../pt476734/index.html">Autodiagn√≥stico de discos r√≠gidos e recupera√ß√£o de dados</a></li>
<li><a href="../pt476736/index.html">Ca√ßa aos Ca√ßadores de Amea√ßas: como encontrar e treinar especialistas competentes?</a></li>
<li><a href="../pt476738/index.html">Slurm Prom: o primeiro curso sobre Prometheus em russo e seu autor Vladimir Guryanov</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>