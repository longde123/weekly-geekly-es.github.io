<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§© üçê üíâ Moi, RoboLoyer, ou comment rechercher des anomalies dans les documents üíù üö≤ üêó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pouvez-vous imaginer combien de documents r√©glementaires par heure un avocat d'entreprise doit consulter et quelles cons√©quences pourrait entra√Æner sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Moi, RoboLoyer, ou comment rechercher des anomalies dans les documents</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/digdes/blog/419837/">  Pouvez-vous imaginer combien de documents r√©glementaires par heure un avocat d'entreprise doit consulter et quelles cons√©quences pourrait entra√Æner sa n√©gligence?  Un pauvre confr√®re doit lire chaque contrat, surtout s'il n'y a pas de mod√®le standard pour lui, ce qui arrive souvent. <br><br>  En regardant dans les yeux fatigu√©s de notre avocat d'entreprise, nous avons d√©cid√© de cr√©er un service qui trouvera les probl√®mes dans les documents et les signalera √† l'avocat somnolant.  En cons√©quence, nous avons cr√©√© une solution avec l'agr√©gation des connaissances sur une certaine base de contrats et de conseils aux avocats, qui devrait faire l'objet d'une attention particuli√®re.  Bien s√ªr, non sans magie.  Magie math√©matique appel√©e d√©tection d'anomalies. <br><br>  Fondamentalement, les approches de d√©tection d'anomalies sont utilis√©es pour analyser le comportement d'une vari√©t√© d'√©quipements pour d√©tecter les d√©faillances, ou dans le secteur bancaire pour d√©terminer la fraude.  Et nous avons essay√© d'appliquer ces algorithmes pour l'analyse des documents juridiques.  Suivez la coupe pour d√©couvrir comment nous l'avons fait. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/31/gl/sl/31glslalfw7bbz4avc_vxy-yjro.jpeg"></div><a name="habracut"></a><br><h3>  1. Nous traitons des informations structur√©es </h3><br>  Nous avons de la chance car  Les textes des contrats sont suffisamment structur√©s, secs et compil√©s selon certains mod√®les.  Pour travailler sur le projet, l'id√©e a √©t√© propos√©e d'impl√©menter un prototype bas√© sur des contrats et des contrats du site zakupki.gov.ru (nous avons obtenu 200 000 documents).  Pour 170 000 contrats, nous avons pu identifier la structure: pr√©ambule, chapitres, paragraphes et annexes du contrat, en tenant compte des mots-cl√©s, position dans le texte et num√©rotation. <br><br>
<h3>  2. Diff√©rents types de contrats </h3><br>  Il est n√©cessaire de tenir compte du fait que les contrats peuvent √™tre de diff√©rents types.  Tous diff√®rent consid√©rablement par leur contenu, l'objet du contrat, les principaux chapitres, etc. Pour optimiser l'analyse de chaque type de contrat, il est n√©cessaire d'effectuer des travaux sur leur classement ou leur regroupement. <br>  Peut-√™tre que vous savez d√©j√† quels types de contrats sont pr√©sents dans votre base de donn√©es, et vous connaissez les signes par lesquels ils peuvent √™tre d√©termin√©s.  Dans notre cas, nous avons un corps brut de contrats sans aucune information suppl√©mentaire sur chaque contrat et sans aucune hypoth√®se sur la classification des march√©s publics.  Par cons√©quent, nous avons √©t√© contraints de recourir au clustering de notre base de contrats. <br><br>  Vous pouvez standardiser le clustering en utilisant le vecteur de pr√©sentation de document tf-idf, mais nous avons d√©cid√© d'essayer l'algorithme Doc2Vec, juste pour le plaisir.  √Ä l'aide de l'algorithme Doc2Vec, les contrats ont √©t√© convertis en vecteurs et les vecteurs de contrat r√©sultants ont √©t√© envoy√©s √† l'entr√©e de l'algorithme de clustering.  Nous avons utilis√© l'algorithme K-means pour regrouper les vecteurs.  √âtant donn√© que la similitude est g√©n√©ralement mesur√©e √† l'aide de la distance cosinus, nous l'avons utilis√©e √† la place de la distance euclidienne. <br><br>  Apr√®s avoir re√ßu 20 clusters de documents, il a fallu v√©rifier la qualit√© du clustering.  Comme nous n'avons pas de classification des contrats, nous ne pouvons pas comparer les clusters r√©sultants avec la partition existante.  Ensuite, nous avons d√©cid√© de regarder les mots qui d√©crivent le cluster.  Pour ce faire, nous avons pris les √©l√©ments ¬´Objet de l'accord¬ª pour chaque cluster, supprim√© les mots vides, les nombres et les mots trouv√©s dans la plupart des clusters.  Ensuite, nous avons s√©lectionn√© les 5 mots les plus courants pour chaque cluster comme mots cl√©s.  D'une mani√®re si simple, on peut √©valuer subjectivement la qualit√© du clustering. <br><br>  Exemples de mots d√©crivant des clusters: <br><br><ul><li>  locataire, propri√©taire, appartement, location, d√©veloppeur </li><li>  comp√©tence, p√©dagogique, p√©dagogique, acad√©mique, √† temps plein </li><li>  entrepreneur g√©n√©ral, sous-traitant, construction g√©n√©rale, concepteur, urbanisme </li><li>  pharmacie, quarantaine, d√©penser, phytosanitaire, √©tanche √† l'air </li><li>  d√©tective, gardien de s√©curit√©, r√©pression, anxi√©t√©, infraction </li><li>  licenci√©, sous-licenci√©, film, conc√©dant de licence, relais </li><li>  emprunteur, s√©questre, cr√©ancier, pr√™t, nantissement </li><li>  centralis√©, approvisionnement en √©nergie, intrazone, plomberie, √©gout </li></ul><br><h3>  3. Quelles anomalies pouvons-nous rencontrer dans les contrats </h3><br>  D√©terminons quels cas nous consid√©rerons anormaux et ce que nous pouvons en faire.  Nous avons identifi√© les sc√©narios suivants: <br><br><ol><li>  Une clause suppl√©mentaire a √©t√© ajout√©e au contrat qui n'a jamais √©t√© vue dans ce contexte auparavant.  Il est n√©cessaire d'attirer l'attention d'un avocat sur lui. </li><li>  Il n'y a aucune clause dans le contrat qui √©tait pr√©c√©demment rencontr√©e dans de tels contrats.  Nous devons conseiller √† l'avocat de l'ajouter. </li><li>  Un paragraphe est similaire √† un point de l'histoire, mais il est en quelque sorte reformul√©, certains mots sont ajout√©s ou supprim√©s.  Vous pouvez en informer l'avocat et vous conseiller de le modifier. </li></ol><br><h3>  4. Sous quelle forme soumettre les contrats </h3><br>  Comme d√©j√† mentionn√©, le contrat se compose de chapitres, les chapitres sont divis√©s en paragraphes, chaque paragraphe peut contenir des sous-paragraphes, etc.  Pour d√©composer le contrat en chapitres et paragraphes, nous avons pris en compte la num√©rotation, les transferts, les mots cl√©s: ¬´Chapitre¬ª, ¬´Article¬ª, etc.  Chaque √©l√©ment se compose d'une ou plusieurs phrases.  Pour diviser un √©l√©ment en phrases, sent_tokenize du module nltk.tokenize a √©t√© utilis√©. <br><br>  Le contrat lui-m√™me contient plusieurs chapitres globaux, dont l'essence et le contenu peuvent √™tre trouv√©s par les rubriques: l'objet du contrat, les droits et obligations des parties, le prix et la proc√©dure de r√®glement ... Nous avons essay√© de combiner les chapitres avec les m√™mes rubriques et de travailler ind√©pendamment avec diff√©rents chapitres.  Les titres des chapitres sont souvent reformul√©s, ont des fautes de frappe ou des signes de ponctuation suppl√©mentaires.  Pour que les groupes de chapitres soient suffisamment grands, nous avons combin√© les titres qui √©taient proches √† distance de Levenshtein en un seul groupe. <br><br>  L'un des probl√®mes que nous pouvons certainement rencontrer est l'√©norme volume d'entit√©s nomm√©es dans les contrats, qui sont souvent uniques et peuvent √™tre confondues avec une anomalie.  Il existe de nombreuses entit√©s dans les contrats, telles que les noms, noms de soci√©t√©s, dates, adresses, etc., qui varient d'un contrat √† l'autre.  Il est n√©cessaire de rechercher et d'√©liminer ces entit√©s du contrat, c'est-√†-dire  apporter le contrat √† un formulaire mod√®le.  Nous avons eu de la chance avec l'ensemble de donn√©es, car  dans le d√©chargement des contrats, il y avait une grande proportion de mod√®les de contrats, des entit√©s nomm√©es dans lesquelles sont remplac√©s par des soulign√©s.  Nous avons identifi√© entre quelles phrases les soulign√©s se produisent g√©n√©ralement afin de trouver ces phrases dans les documents termin√©s et d'en supprimer les entit√©s nomm√©es.  Il est clair que de cette mani√®re, nous n'avons pas supprim√© toutes les entit√©s nomm√©es.  Par cons√©quent, nous avons √† nouveau travers√© la coque avec la biblioth√®que Natasha et supprim√© les entit√©s qu'elle a trouv√©es. <br><br><h3>  5. D√©finition de clauses anormales dans le contrat </h3><br>  Nous avons d√©j√† pu s√©parer les contrats par type en utilisant le clustering et avons pu identifier des groupes de chapitres similaires.  Maintenant, en utilisant les connaissances accumul√©es sur une certaine clause d'un certain type de contrat, nous pouvons comprendre ce qui doit √™tre corrig√© dans le contrat actuel.  Calculons la probabilit√© de son anomalie pour chaque phrase du chapitre. <br><br>  Pour chaque groupe de chapitres, nous stockons toutes les offres que nous avons rencontr√©es dans notre ensemble de documents de formation issus des march√©s publics.  Parce que  il y en a beaucoup, pour chaque groupe de chapitres le mod√®le Word2Vec a √©t√© form√©, et chaque phrase est associ√©e √† un vecteur de la somme pond√©r√©e (par tf-idf) des vecteurs des mots qui y sont inclus.  De plus, les vecteurs de phrases ont √©t√© divis√©s en grappes de mani√®re similaire √† la division des vecteurs pour les documents. <br><br>  Maintenant, lorsqu'une proposition nous parvient, nous d√©terminons de quel groupe de contrats il s'agit, de quel groupe de chapitres, de quel groupe de propositions elle est la plus proche et dans ce groupe nous trouvons la plus proche.  La distance par rapport √† l'offre la plus proche peut √™tre consid√©r√©e comme une mesure du caract√®re anormal de cette offre.  Si la distance √† l'offre la plus proche est nulle, alors notre offre n'est pas anormale.  Avec l'augmentation de cette distance, nous doutons de plus en plus que la proposition ne contienne pas d'anomalies.  Il est tr√®s probable que quelque chose ne va pas avec lui. <br><br><h3>  6. Que faire des √©l√©ments manquants </h3><br>  Nous avons compris comment trouver des points anormaux dans le contrat, mais nous n'avons pas appris √† trouver des anomalies sous la forme de phrases ou de points manquants.  Une telle anomalie peut √™tre facilement trouv√©e si nous avons en main un mod√®le pour ce type d'accord, mais, par exemple, il y a des moments o√π une autre entreprise nous a envoy√© un accord √©tabli selon notre propre mod√®le. <br>  Pour d√©tecter de telles anomalies, nous devons cr√©er un mod√®le de contrat avec un ensemble d'offres / clauses obligatoires, toujours bas√©es uniquement sur nos contrats. <br><br>  Nous avons trouv√© et test√© l'algorithme de construction du mod√®le.  Cet algorithme suppose que dans notre base de donn√©es des contrats, il existe un chapitre similaire avec l'ensemble correct des √©l√©ments, que nous voulons identifier et indiquer comme mod√®le. <br><br>  Algorithme: <br><img src="https://habrastorage.org/webt/8q/35/xn/8q35xnsqxvbts0bmro19vjegnji.png"><br><br><ol><li>  Pour chaque groupe de chapitres, pr√©-entra√Ænez un mod√®le bas√© sur l'algorithme MinHashLSH, qui vous permet de trouver rapidement des textes proches. </li><li>  Pour chaque chapitre du contrat t√©l√©charg√©, recherchez une liste des paragraphes qui lui sont proches dans la base de donn√©es. </li><li>  Sur la base des paragraphes ferm√©s obtenus, construisez un mod√®le de langage et s√©lectionnez comme paragraphe de mod√®le avec la probabilit√© la plus √©lev√©e pr√©dite par le mod√®le de langage. </li></ol><br>  Apr√®s avoir re√ßu un mod√®le pour chaque chapitre, nous pouvons identifier les √©l√©ments manquants qui sont pr√©sents dans le mod√®le mais ne figurent pas dans le contrat actuel, et conseiller √† l'avocat de les ajouter. <br><br><h3>  7. Pipeline complet </h3><br>  Pour r√©sumer et rassembler toutes les √©tapes ensemble: <br><br><div class="spoiler">  <b class="spoiler_title">I. Collecte, traitement et stockage des corps de contrats</b> <div class="spoiler_text">  A. Assembler le corps des contrats types. <br>  B. Classer / regrouper les contrats par type. <br>  C. D√©composer le contrat en chapitres, paragraphes et phrases. <br>  D. Supprimer les entit√©s nomm√©es des contrats. <br>  E. Regroupez les chapitres par titre. <br>  F. Pour chaque groupe de chapitres, entra√Ænez Word2Vec. <br>  G. Faites correspondre chaque phrase avec le vecteur de la somme pond√©r√©e des vecteurs des mots qui y sont inclus. <br>  H. Cluster les vecteurs de phrases re√ßus et stocker chaque cluster s√©par√©ment pour rechercher rapidement le vecteur le plus proche dans le cluster le plus proche. <br>  I. Pour chaque groupe de chapitres, entra√Ænez MinHashLSH. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">II. Recherche d'anomalies dans un nouveau document</b> <div class="spoiler_text">  <u>A. Souligner les points anormaux</u> <br>  1. D√©finissez le type de contrat (classe ou cluster) <br>  2. Divisez le document en chapitres, paragraphes et phrases <br>  3. Pour chaque chapitre, recherchez le groupe de chapitres correspondant dans la base de donn√©es <br>  4. Faites correspondre chaque phrase avec un vecteur <br>  5. Trouvez pour chaque offre du contrat le cluster d'offres le plus proche, et en lui l'offre la plus proche <br>  6. Calculez les distances entre les vecteurs de proposition et coloriez les phrases en fonction des distances obtenues. <br>  7. Ne coloriez que des parties de phrases, si elles diff√®rent en quelques mots par les plus proches. <br>  8. Conseillez l'√©dition sous la forme de la phrase suivante. <br>  <u>Recherche d'objets manquants</u> <br>  1. Pour chaque chapitre, cr√©ez un mod√®le <br>  2. Conseillez d'ajouter les √©l√©ments manquants du mod√®le <br></div></div><br><h3>  8. √âvaluation de la qualit√© </h3><br>  Pour √©valuer la qualit√© des solutions au probl√®me, un ensemble de contrats de test a √©t√© form√©.  Des anomalies ont √©t√© artificiellement ajout√©es aux contrats sous la forme de la suppression d'une partie des mots, l'insertion de mots / phrases dans les phrases, l'insertion de phrases d'autres chapitres, la suppression de phrases.  Nous avons √©valu√© la qualit√© de chaque type d'anomalie et obtenu la distribution suivante des erreurs de d√©termination: <br> <a href=""><img src="https://habrastorage.org/webt/yc/ui/qc/ycuiqcieu9q55hh_bq5v5wquvqu.png"></a> <a href=""><img src="https://habrastorage.org/webt/vm/p-/iv/vmp-ivtswrpjwkqlqoluzzw1bqu.png"></a> <br><br>  Autrement dit, l'algorithme propos√© nous permet de d√©terminer des inclusions incorrectes dans 4 cas sur 5.  Il convient de noter qu'avec l'augmentation du volume de l'√©chantillon de formation et le regroupement des contrats pour diff√©rents types, nous pouvons obtenir une am√©lioration de cette √©valuation. <br><br><h3>  9. Visualisation </h3><br>  Pour visualiser une telle solution au probl√®me, une interface web a √©t√© mise en place dans laquelle un nouveau contrat peut √™tre charg√©, dont le texte sera affich√© sur la page et les offres anormales seront mises en √©vidence.  Plus la couleur de la phrase est fonc√©e, plus nous sommes s√ªrs qu'elle est anormale.  Parce que  nous avons trouv√© l'offre la plus proche, nous recommandons de modifier pour l'utilisateur sous la forme de cette prochaine offre, ou nous recommandons de modifier la partie sp√©cifique de l'offre si la prochaine a une l√©g√®re diff√©rence avec l'original. <br><br><img src="https://habrastorage.org/webt/t3/3j/lw/t33jlwllhryjaptkeqv_aqkm4xy.gif"><br><br><h3>  10. Le cas √©ch√©ant? </h3><br>  L'application pratique du service r√©sultant est la plus appropri√©e dans les cas o√π un examen ¬´en continu¬ª de la puret√© juridique d'un grand nombre de documents du m√™me type est requis: par exemple, lors de l'octroi de pr√™ts collat√©raux au public (hypoth√®que, pr√™ts-auto et assurance).  Par exemple, dans le cas d'une hypoth√®que, il s'agit de contrats de vente de biens immobiliers, de contrats d'assurance immobili√®re et d'emprunteur, de contrats d'√©valuation immobili√®re, etc.  - des centaines de pages de texte dans les dossiers de chaque client, qui peuvent √™tre analys√©es presque instantan√©ment, et des endroits anormaux seront "mis en √©vidence" √† l'avocat pour analyse des risques ou fraudes. <br><br>  Donc, les avocats de la chair et du sang ne peuvent pas se passer compl√®tement, mais les technologies modernes leur permettent de vous faciliter la vie. <br><br>  Mat√©riel pr√©par√© par Elena Sannikova ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">helen_sunny</a> ). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419837/">https://habr.com/ru/post/fr419837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419825/index.html">Test des performances de plusieurs types de disques dans un environnement virtuel</a></li>
<li><a href="../fr419829/index.html">Le chiffrement de cl√© par d√©faut d'OpenSSH est pire que rien</a></li>
<li><a href="../fr419831/index.html">Fonctionnement de JS: √©l√©ments personnalis√©s</a></li>
<li><a href="../fr419833/index.html">Travail √† distance, comment √ßa marche</a></li>
<li><a href="../fr419835/index.html">Comment motiver les auteurs, n√©gocier avec des experts et g√©n√©ralement r√©diger de bons articles</a></li>
<li><a href="../fr419839/index.html">Piratage ATM NCR de bas niveau</a></li>
<li><a href="../fr419843/index.html">GeekUniversity ouvre ses inscriptions √† la Facult√© d'Intelligence Artificielle</a></li>
<li><a href="../fr419845/index.html">Version 0.4.9: implications</a></li>
<li><a href="../fr419847/index.html">De 0,01 TFlops HPL √† ASC'18 Application Innovation</a></li>
<li><a href="../fr419849/index.html">Enqu√™te sur la carte m√®re: comment les cybercriminels volent des num√©ros mobiles avec l'aide de soci√©t√©s de t√©l√©communications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>