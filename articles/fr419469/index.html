<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📋 🤷🏿 👩🏾 UE4 | Le cycle du jour et de la nuit | Modification de SkySphere 🙏🏼 👩🏼‍🔬 🚷</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le changement de jour et de nuit augmente souvent chez les utilisateurs. Et si le mouvement du soleil lui-même est assez simple à organiser, alors réa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UE4 | Le cycle du jour et de la nuit | Modification de SkySphere</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419469/"><table><tbody><tr><td><img src="https://habrastorage.org/webt/i8/vv/kq/i8vvkqlbthqie8tuxsil4m1tihc.png" title="Jour et nuit" align="left">  Le changement de jour et de nuit augmente souvent chez les utilisateurs.  Et si le mouvement du soleil lui-même est assez simple à organiser, alors réaliser un travail plus ou moins réaliste *** SkySphere *** est déjà beaucoup plus difficile. </td></tr></tbody></table><br><p>  Dans cet article, je n'ai pas l'intention de montrer toutes sortes de façons de changer l'orientation de <strong><em>DirectionalLight</em></strong> avec les saisons et la précession.  À ce sujet, à mon avis, il y a suffisamment de matériel.  Quelqu'un le fait via <em>Blueprint</em> , mais j'utilise <em>C ++</em> , afin que l'horloge tourne sur le serveur et synchronise périodiquement (une fois toutes les quelques secondes) l'horloge du client.  En même temps, aucun mouvement ne se produit sur le serveur.  Ce n'est pas une chose noble de déplacer le soleil dans le ciel. </p><br><p>  Ensuite, je vais parler des problèmes qui se posent et montrer ma version de mise à niveau du <strong><em>BP_Sky_Sphere</em></strong> standard pour qu'il fonctionne correctement avec le cycle quotidien. </p><br><hr><a name="habracut"></a><br><p>  Avant la modification, il sera très utile de copier tout le contenu du dossier <em>EngineSky</em> dans votre répertoire afin de ne pas gâcher le <em>Blueprint</em> standard et les ressources qui y sont connectées. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hc/b6/0q/hcb60qrpea9jjmt5epkmyo92gve.png" title="Emplacement BP_Sky_Sphere"></div><br><hr><br><p>  Tout d'abord, je veux parler d'un bug (ou des fonctionnalités) de la sphère standard.  Le <em>StaticMesh</em> ci- <em>joint</em> pour la sphère a une échelle de 400. Si vous le changez à 1, il semble que rien ne changera, mais si vous avancez un peu, vous vous sentirez comme dans le film "The Truman Show".  Oui, cette sphère, bien qu'énorme, a ses propres frontières.  Un problème évident pour les mondes ouverts, qui est très facile à résoudre en faisant bouger la sphère avec le joueur. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/uu/c5/q9/uuc5q9zbqocf6qjx3jivk-hioha.png" title="Sphère en mouvement"></div><br><p>  Bien sûr, comme alternative, vous pouvez agrandir la sphère, mais une telle idée ne m'impressionne pas beaucoup. </p><br><hr><br><p>  L'élément suivant définit une nuit normale.  Je n'aime pas du tout que les étoiles n'apparaissent qu'à minuit et le reste du temps - c'est juste une sorte de soirée prolongée. </p><br><p>  Il est également tout simplement résolu en ajustant les courbes existantes et en en ajoutant de nouvelles. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ma/ee/f_/maeef_fbjh-0qy0zlwmqqkw1p-g.png" title="Fichiers pour SkySphere"></div><br><div class="spoiler">  <b class="spoiler_title">Exemple de courbe</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/je/bx/jn/jebxjnwz4wffra4nlgkfwfudpyw.png" title="Exemple de courbe"></div></div></div><br><hr><br><p>  Le problème suivant est l'amortissement de la lumière pour <em>DirectionalLight</em> et <em>SkyLight</em> .  Il est assez étrange de constater que la nuit, il ne peut être vu pire que pendant la journée.  Il est également résolu très simplement en ajoutant et en ajustant des courbes. </p><br><div class="spoiler">  <b class="spoiler_title">Modification des niveaux d'éclairage</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/pn/ah/q1/pnahq16t9que9s5ibs-ongxblua.png" title="Réglage de la lumière"></div></div></div><br><hr><br><p>  Bon, pour le dessert ... Les étoiles ne bougent pas!  Si la <em>nuit est longue et pleine d'horreurs</em> , alors le joueur ne le remarquera peut-être pas.  Mais sommes-nous pour une approche sérieuse? </p><br><p>  Tout d'abord, j'ai fait bouger la texture des étoiles en ajoutant des variables supplémentaires au matériau. </p><br><div class="spoiler">  <b class="spoiler_title">Quelque chose comme ça</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/sv/ar/4h/svar4hd_cr_waskgntdl-h4v47o.png" title="Changement de texture"></div></div></div><br><p>  Tant que le soleil se déplace le long du plan équatorial, tout est en ordre.  Mais lors de la simulation de hautes latitudes, les difficultés mathématiques commencent et le refus de la texture de tourner comme nous le voulons.  Mais sommes-nous pour une approche sérieuse?  :) </p><br><p>  En conséquence, il a décidé de faire deux sphères célestes.  L'une avec des nuages, le soleil et le ciel, et la seconde, un peu plus grande, avec des étoiles.  <strong><em>BP_Sky_Sphere a</em></strong> également connecté une <strong><em>sphère</em></strong> supplémentaire et lui a poliment demandé de tourner avec le soleil ... </p><br><p>  Et la partie la plus intéressante!  Rendre la sphère céleste plus petite partiellement transparente.  En connectant simplement la logique du matériau à l' <em>opacité</em> , bien sûr, j'ai obtenu de merveilleuses étoiles qui brillaient à travers les nuages ​​de la nuit noire.  Par conséquent, j'ai dû à nouveau modifier le matériau avec un fichier, dessinant en fait deux cieux.  Un avec des nuages ​​noirs pour les visuels.  Et le second, avec des nuages ​​toujours blancs comme neige, pour <em>Opacity</em> .  De plus, il a ajouté beaucoup de blanc pendant la journée, ce qui a rendu le ciel opaque afin que le bleu translucide n'effraye pas sa profondeur. </p><br><div class="spoiler">  <b class="spoiler_title">Blueprint</b> <div class="spoiler_text"><p>  Image cliquable <br></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/i7/hb/ie/i7hbiewnz563pf3o03ayopkyu-4.png" title="SkySphere Blueprint"></div><p></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Matière</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/to/0e/gi/to0egihkctiysbq7onixdg2mqm8.png" title="Matériel SkySphere"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qu/dj/x4/qudjx4p-wn7yggoue3qozdzgmzi.png" title="Matériel SkySphere"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gz/oa/6t/gzoa6tc3ugdm04-alvx8togsvse.png" title="Matériel SkySphere"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vp/qq/nj/vpqqnjzwui4pdxyae48jayuyzbq.png" title="Matériel SkySphere"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/iw/lp/qr/iwlpqrzms2fj0m0etcu75k4ahkk.png" title="Matériel SkySphere"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9d/xi/9j/9dxi9jciwkknqep1h_6k1gmdzvc.png" title="Matériel SkySphere"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/z0/fz/b_/z0fzb_jmzhkgz_zm8jaqohtua8u.png" title="Matériel SkySphere"></div></div></div><br><p>  Maintenant, tout fonctionne comme prévu par le Créateur, dans ce cas - par moi.  Il ne reste plus qu'à affiner les courbes de contrôle, mais dans l'ensemble, il semble assez bon. </p><br><hr><br><p>  Si vous avez des idées sur la façon de rendre cela plus facile, veuillez partager.  Je vous en serais reconnaissant. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419469/">https://habr.com/ru/post/fr419469/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419453/index.html">Méthodes numériques pour résoudre des systèmes d'équations non linéaires</a></li>
<li><a href="../fr419457/index.html">RabbitMQ - SQL Server</a></li>
<li><a href="../fr419459/index.html">Batteries au plomb: alphabet de charge d'impulsion</a></li>
<li><a href="../fr419461/index.html">Ventilation des toilettes</a></li>
<li><a href="../fr419467/index.html">De l'ampoule à l'aspirateur et au drone - comment nous avons appris à Alice à gérer des centaines d'appareils</a></li>
<li><a href="../fr419471/index.html">Option de migration de jQuery vers javascript pur</a></li>
<li><a href="../fr419473/index.html">Comment sont les choses dans le cloud et ce qui fait avancer l'IaaS: discuter des tendances technologiques</a></li>
<li><a href="../fr419475/index.html">Comment trouver l'inspiration et ne pas perdre l'unicité</a></li>
<li><a href="../fr419477/index.html">Plus simple qu'il n'y paraît. Chapitre 11</a></li>
<li><a href="../fr419479/index.html">Sécurité "Ekaterinburg Arena": comment nous avons préparé le stade pour la Coupe du monde 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>