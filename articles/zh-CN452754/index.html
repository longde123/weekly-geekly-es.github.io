<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐎 🦐 ✋🏼 19％的最受欢迎的Docker映像没有root密码 💃🏻 🌙 🤲🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="5月18日，上周六，Kenna Security的Jerry Gamblin从Docker Hub上检查了 1000个最受欢迎的映像，以获取其中使用的根密码。 在19％的情况下，他不在。 



 与高山背景 
 进行微型研究的原因是本月初发布的Talos漏洞报告（ TALOS-2019-0782 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>19％的最受欢迎的Docker映像没有root密码</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/452754/">  5月18日，上周六，Kenna Security的Jerry Gamblin从Docker Hub上<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">检查了</a> 1000个最受欢迎的映像，以获取其中使用的根密码。 在19％的情况下，他不在。 <br><br><img src="https://habrastorage.org/webt/i2/4y/cz/i24ycz7-_we8wpvxf2ivmnaxrxq.png"><a name="habracut"></a><br><br><h2> 与高山背景 </h2><br> 进行微型研究的原因是本月初发布的Talos漏洞报告（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TALOS-2019-0782</a> ），其作者-由于从Cisco Umbrella找到了Peter Adkins-报告称，带有流行的Alpine容器分发套件的Docker映像没有密码根： <br><br><blockquote>  “ Alpine Linux Docker映像的正式版本（从v3.3开始）包含root用户的NULL密码。 该漏洞是由于2015年12月引入的回归而出现的。 它的本质是，在容器中部署有问题的Alpine Linux版本的系统，并使用Linux PAM或将影子系统文件用作身份验证数据库的其他机制，可以为根用户接受NULL密码。” </blockquote><br> 经过测试的高山版本Docker映像被称为3.3–3.9（含）和最新版本的edge。 <br><br> 作者向受此问题影响的用户提出以下建议： <br><br><blockquote>  “必须在基于有问题的Alpine版本构建的Docker映像中显式禁用root帐户。 漏洞的利用可能取决于环境，因为要成功使用此漏洞，需要使用Linux PAM或其他类似机制将服务或应用程序转发到外部。” </blockquote><br> 此问题已在Alpine版本3.6.5、3.7.3、3.8.4、3.9.2和Edge（20190228快照）中得到解决，并且受其影响的图像的所有者被提供注释掉了<code>/etc/shadow</code> root的行，或确保缺少<code>linux-pam</code>软件包。 <code>linux-pam</code> 。 <br><br><h2> 继续使用Docker Hub </h2><br> 杰里·甘布林（Jerry Gamblin）决定询问：“事实证明，在容器中使用空密码的做法有多广泛。” 为此，他编写了一个小的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Bash脚本</a> ，其本质非常简单： <br><br><ul><li> 通过对Docker Hub中的API的curl请求，请求托管在其中的Docker映像列表； </li><li> 通过jq将其按<code>popularity</code>字段排序，并获得结果的前一千个残差； </li><li> 对它们中的每一个都执行<code>docker pull</code> ； </li><li> 对于从Docker Hub收到的每个映像，通过从<code>/etc/shadow</code>文件读取第一行来执行<code>docker run</code> ； </li><li> 如果字符串值原来是<code>root:::0:::::</code> ，则图像名称保存在单独的文件中。 </li></ul><br> 怎么了  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">该文件</a>包含194行，其名称是Linux系统中流行的Docker映像的名称，该用户的root用户没有密码： <br><br><blockquote>  “在此列表中，最著名的名字是govuk / governpaas，hashicorp，microsoft，monsanto和mesosphere。  kylemanna / openvpn是列表中最受欢迎的容器，其统计数据总计超过1000万次拉动。” </blockquote><br> 但是，值得回顾的是，这种现象本身并不意味着使用它们的系统的安全性上存在直接漏洞：这完全取决于它们的使用方式<i>（请参见上面Alpine案例的评论）</i> 。 但是，我们已经多次看到“这个寓言的寓意”：表面上的简单性通常有一个缺点，必须始终牢记这一缺点，并且在技术场景中应考虑其后果。 <br><br><h2> 聚苯乙烯 </h2><br> 另请参阅我们的博客： <br><br><ul><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Docker Hub上映像中基本操作系统的统计信息</a> ”； </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">要求安全的环境中的Docker和Kubernetes</a> ”； </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">runc中的漏洞CVE-2019-5736，允许在主机上获得root特权</a> ”； </li><li>  “ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">易受攻击的Docker VM-Docker和渗透测试的虚拟益智游戏</a> 。” </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN452754/">https://habr.com/ru/post/zh-CN452754/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN452744/index.html">没有自由职业者的交流，是否有充裕的生活？</a></li>
<li><a href="../zh-CN452746/index.html">《 R.沉浸在大数据中的编程艺术》一书</a></li>
<li><a href="../zh-CN452748/index.html">NGINX开发现代应用程序的原理。 第一部分</a></li>
<li><a href="../zh-CN452750/index.html">OpenLiteSpeed内部和外部的Nextcloud：配置反向代理</a></li>
<li><a href="../zh-CN452752/index.html">自制BigData。 第1部分。AWS集群上的Spark流实践</a></li>
<li><a href="../zh-CN452756/index.html">在Unity中创建塔防：敌人</a></li>
<li><a href="../zh-CN452760/index.html">维生素D。喝还是不喝，这就是问题所在。 （或关于我如何通过了未按规定进行分析的故事）</a></li>
<li><a href="../zh-CN452762/index.html">MVCC-7。 自动清洁</a></li>
<li><a href="../zh-CN452764/index.html">[Peter]与Sergei Melnikov会面JUG.ru-超光速分析：理论与实践</a></li>
<li><a href="../zh-CN452766/index.html">渐进式流技术，或如何通过网络观看4k视频而不会感到烦恼</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>