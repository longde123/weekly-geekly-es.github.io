<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêä ‚õ≤Ô∏è üõéÔ∏è Le titre sera diff√©rent üåØ üë®‚Äçüë®‚Äçüëß‚Äçüë¶ ü•ú</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si vous d√©veloppez un produit pour le march√© de masse, les personnes tr√®s malvoyantes l'utilisent probablement. Si vous vous efforcez de cr√©er des int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le titre sera diff√©rent</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/452226/">  Si vous d√©veloppez un produit pour le march√© de masse, les personnes tr√®s malvoyantes l'utilisent probablement.  Si vous vous efforcez de cr√©er des interfaces conviviales, vous devez le faire de mani√®re pratique pour tous les clients, y compris les personnes malvoyantes.  Je pense que nous l'oublions souvent.  Et il est temps de le r√©parer. <br><br><img src="https://habrastorage.org/webt/vl/d_/dg/vld_dgvbru6qn4h7vwhdjzhh2r0.png"><br><a name="habracut"></a><br>  J'ai saisi la requ√™te ¬´livraison de pizza¬ª dans la recherche sur l'App Store, t√©l√©charg√© les 24 premi√®res applications et v√©rifi√© laquelle d'entre elles offrait une interface pour les personnes malvoyantes. <br><br><img src="https://habrastorage.org/webt/gc/g_/r-/gcg_r-5lktwzdhejhfqkcxlwkfm.png"><br><br>  <b>2 sur 24</b> .  Et l'un des deux, semble-t-il, l'a fait par accident: √† mesure que la taille de la police augmente, toute l'interface ¬´flotte¬ª et devient plus difficile √† utiliser.  C'est triste. <br><br>  550 000 personnes utilisent l'application iOS Dodo Pizza chaque mois.  M√™me si 1% de nos utilisateurs ont une police agrandie, ce sont 5500 personnes qui sont mal √† l'aise avec notre application.  Nous allons le corriger. <br><br><h2>  Ajouter un support de type dynamique </h2><br><ol><li>  Nous utilisons des styles de texte syst√®me dynamiques au lieu de styles statiques. </li><li> Vous pouvez √©galement activer la coche Ajuster automatiquement la police sur les √©tiquettes des story-boards.  Ou, si l'√©tiquette dans le bouton ou est cr√©√©e via le code, nous <code>adjustsFontForContentSizeCategory</code> sur son param√®tre <code>adjustsFontForContentSizeCategory</code> . </li><li>  Nous apprenons √† l'interface √† s'√©tendre √† diff√©rentes tailles de police: <br>  - Nous utilisons le calcul automatique de la taille des cellules lorsque nous le pouvons. <br>  - L√† o√π nous ne pouvons pas - nous obtenons les param√®tres de taille de police actuels et r√©pondons aux modifications de la m√©thode <code>traitCollectionDidChange</code> . </li><li>  Nous obtenons une interface impossible √† utiliser. </li></ol><br><br> <a href=""><img src="https://habrastorage.org/webt/vg/sj/qa/vgsjqakh4zfv-lcere3iv0rptk0.png"></a> <br><br><h2>  Nous changeons l'interface pour qu'elle puisse √™tre utilis√©e </h2><br>  Nous reculons et commen√ßons √† penser comment bien faire tout. <br><br><h3>  Utilisez correctement la place dans le menu </h3><br>  Maintenant, il y a beaucoup d'espace vide sous l'image de la pizza.  Essayons de mettre une image au-dessus du nom: de cette fa√ßon, elle deviendra plus grande et l'espace vide dispara√Ætra.  Pour ce faire, nous enveloppons le conteneur d'image et de <code>UIStackView</code> avec tout le reste dans <code>UIStackView</code> , puis nous <code>UIStackView</code> la direction de la vue de la pile si n√©cessaire. <br><br> <a href=""><img src="https://habrastorage.org/webt/dt/s_/vg/dts_vgharid2k9v5r9yvqxu1cto.png"></a> <br><br>  Nous n'avons pas de s√©parateurs entre les √©l√©ments du menu, c'est pourquoi lorsque la taille est grande, les cellules commencent √† ¬´coller ensemble¬ª et le prix de la pizza est trop proche de l'image de la prochaine pizza.  Essayons d'ajouter un s√©parateur. <br><br> <a href=""><img src="https://habrastorage.org/webt/tl/8t/yf/tl8tyfcp3bir8nju3ziwcxcbozi.png"></a> <br><br>  Pas √ßa.  Tout d'abord, √ßa a l'air moyen.  Deuxi√®mement, il sera difficile √† voir pour les personnes malvoyantes.  M√™me repeint du gris au noir. <br><br>  Nous le supprimons et essayons simplement d'augmenter Internet entre les cellules. <br><br> <a href=""><img src="https://habrastorage.org/webt/7b/kq/m8/7bkqm8wzzu5dayijekqfmik_0qw.png"></a> <br><br>  Maintenant. <br><br>  Sous-total: utilisez plus d'espace, les yeux sautent moins d'une ligne √† l'autre, la lecture est devenue plus facile. <br><br><h3>  Nous am√©liorons l'√©tirement et le retrait </h3><br>  Vous pouvez maintenant augmenter la largeur du bouton ajouter au panier, sinon il flottait vers la gauche et n'est pas sous votre doigt, bien qu'il y ait beaucoup d'espace vide √† droite.  Vous pouvez, bien s√ªr, simplement le d√©placer vers la droite, mais cela sera g√™nant pour les gauchers et, en g√©n√©ral, nous ferons un meilleur geste que non compress√©.  Et nous allons rendre le trait plus gras, et maintenant il n'est pas coh√©rent avec la police. <br><br> <a href=""><img src="https://habrastorage.org/webt/ew/en/c8/ewenc8ziqn0o7ffnkvvzbo5a7o4.png"></a> <br><br>  Je regarde tout cela et je comprends que la photo de pizza, bien s√ªr, est tr√®s √©norme.  Essayons de le cacher, peut-√™tre sans images tu peux vivre. <br><br> <a href=""><img src="https://habrastorage.org/webt/pp/pk/1q/pppk1qwmxxbayqrk5kula3oxfgg.png"></a> <br><br>  En g√©n√©ral, un menu sans photos n'a pas perdu beaucoup d'informations, mais maintenant un √©l√©ment de menu interf√®re presque toujours avec l'√©cran d'un iPhone 6S.  Mais il est devenu moins attrayant, Drool ne coule pas lors du d√©filement.  Tels.  Pour l'instant, laissons cela comme √ßa, r√©fl√©chissons bien et peut-√™tre reviendrons plus tard sur la photo. <br><br><h3>  N'oubliez pas de cocher "live" </h3><br>  Maintenant cat√©gories.  En g√©n√©ral, m√™me avec la premi√®re approche, cela s'est av√©r√© tol√©rable.  Allumez-en un nouveau. <br><br> <a href=""><img src="https://habrastorage.org/webt/dj/5z/mi/dj5zmie3v-yr8jceovq9t5xmkhc.png"></a> <br><br>  J'ai essay√© de parcourir le menu et de basculer entre les cat√©gories.  N√©anmoins, cela s'est mal pass√©: tout s'effondre dans l'action.  Lorsque vous faites d√©filer le menu, les cat√©gories changent automatiquement et, sur de si grandes broches, elles attirent trop l'attention. <br><br>  <code>UICollectionView</code> par un bouton qui appellera <code>UIActionSheet</code> . <br><br> <a href=""><img src="https://habrastorage.org/webt/re/c4/fr/rec4frqesfjg5_43ftutrekxw1u.png"></a> <br><br>  Voooot.  Maintenant, vous pouvez prendre sur le panneau sup√©rieur, o√π la ville, les stocks, l'adresse et le code promotionnel. <br><br><h3>  N'oubliez pas les tr√®s longues files d'attente </h3><br>  Tout d'abord, faisons un choix de la ville.  Il n'y a rien de compliqu√© avec la police du bouton, mais il est int√©ressant d'apprendre aux "triangles" √† grandir avec la police.  Dans notre cas, le triangle a √©t√© transform√© en ic√¥ne dans le bouton, qui est d√©plac√© vers la droite via <code>CGAffineTransform</code> .  Une autre option consiste √† collecter <code>NSAttributedString</code> partir du texte et de l'ic√¥ne en triangle, puis de tout alimenter vers le bouton.  Pour normaliser l'ic√¥ne, vous pouvez utiliser une image vectorielle, qui doit n√©cessairement √™tre dans les actifs avec la coche Pr√©server les donn√©es vectorielles. <br><br> <a href=""><img src="https://habrastorage.org/webt/r5/7k/fz/r57kfzbng-bwybworqlvbzunagk.png"></a> <br><blockquote>  L'ic√¥ne du triangle est noire et est peinte en blanc √† travers le code.  Et pour une raison quelconque, avec la taille de texte standard, des artefacts sous forme de bordures noires sortent dessus.  C'est marrant  Pas vraiment.  Il a √©t√© gu√©ri en mettant une ic√¥ne qui √©tait √† l'origine blanche dans les actifs. </blockquote><br>  Maintenant on √©tire les dodo-roubles, tout est simple: <br><br> <a href=""><img src="https://habrastorage.org/webt/ct/bh/7s/ctbh7styq51y9xt7c3reqc9wdg4.png"></a> <br><br>  Et maintenant, la question est: que se passera-t-il si le nom de la ville s'av√®re long et que nous avons de nombreux dodo-roubles?  En th√©orie, vous devez raccourcir le nom de la ville.  Rappelez-vous ce que j'ai dit √† propos de la deuxi√®me option pour ajouter une telle ic√¥ne √† un bouton, via <code>NSAttributedString</code> ?  J'ai essay√© et maintenant il y a un probl√®me quand on r√©duit le titre, l'ic√¥ne triangle dispara√Æt, car maintenant elle fait partie du titre.  Stosh.  Nous devrons retourner la logique de d√©placer l'ic√¥ne √† travers les transformations. <br><blockquote>  Si vous connaissez un moyen pratique de d√©placer l'ic√¥ne du bouton vers la droite et de la mettre √† l'√©chelle avec la police dans l'en-t√™te - jetez-la dans les commentaires, s'il vous pla√Æt. </blockquote><br><h3>  Cram dans </h3><br>  Enfin des stocks.  Ici, vous devez vous asseoir et r√©fl√©chir.  Le titre peut √™tre long et m√™me maintenant, il ne tient parfois pas sur une seule ligne.  Sur une grande taille, il ne rentrera pas du tout bien.  Si vous faites le caoutchouc du panneau orange sup√©rieur et laissez le titre de l'action dans une grande taille occuper plusieurs lignes, le bloc sup√©rieur mangera la moiti√© de l'√©cran m√™me sur les grands iPhones, et vous n'aurez pas √† vous souvenir de 4S.  Ce n'est pas le cas.  Vous pouvez jouer avec une mise en page √† l'int√©rieur de la zone d'action: faire le carr√© de l'image et prendre la place vacante comme titre.  Mais les images des stocks sont personnalis√©es dans un format sp√©cifique et ne s'afficheront pas correctement dans un autre.  C'est impossible. <br><br>  Compliqu√© <br><br>  Donc, mais vous pouvez √† nouveau supprimer compl√®tement les images et occuper toute la place avec un titre. <br><br> <a href=""><img src="https://habrastorage.org/webt/pa/uu/q7/pauuq7hzrctfjqof3wt_7fh4x4g.png"></a> <br><br>  Ouais, √ßa l'est.  Les mains d√©mangent pour coloriser l'arri√®re-plan sous le titre de l'action, mais cela affectera n√©gativement la lisibilit√©.  Et nous, comme, essayons de l'am√©liorer.  Nous ne peignons donc rien et passons aux deux boutons restants concernant l'adresse et les codes promotionnels. <br><br><h3>  Nous travaillons avec des restrictions strictes </h3><br>  Les titres de ces boutons sont irr√©ductibles.  Mais s'ils ne sont pas r√©duits, les boutons se glisseront les uns sur les autres.  Et oui, vous ne pouvez pas masquer ces boutons. <br><br>  Quand j'ai refait le stock, je ne voulais pas augmenter la hauteur du panneau orange sup√©rieur.  Cela semble devoir.  C'est bien qu'ils ne l'aient pas augment√© √† ce moment-l√†, sinon maintenant il y aurait aduha.  En g√©n√©ral, je vais s√©lectionner une ligne pour chaque bouton. <br><br> <a href=""><img src="https://habrastorage.org/webt/zj/nz/qg/zjnzqgtax6ep4jfk8y1_ogs3pgi.png"></a> <br><br>  Ufff, c'est tout.  En ce qui concerne les photos d√©sactiv√©es dans le menu, je ne suis toujours pas s√ªr.  Alternativement, vous ne pouvez afficher que la moiti√© des images de pizza au lieu d'un cercle entier, mais nous avons des demi-pizzas droites dans le menu, donc cela ne fonctionnera pas, nous pouvons confondre les utilisateurs. <br><br>  Comparons la premi√®re approche avec le r√©sultat final: <br><br> <a href=""><img src="https://habrastorage.org/webt/tu/eh/m7/tuehm7kleeeivqqaoep4nljpsly.png"></a> <br><br>  Comparez maintenant ¬´avant¬ª et ¬´apr√®s¬ª avec une simulation de mauvaise vision: <br><br> <a href=""><img src="https://habrastorage.org/webt/y9/rw/re/y9rwrenclvvgw5yzf6ifgz5fu_0.png"></a> <br><br>  N'ayez pas peur de changer l'interface et les commandes.  Il n'y a rien de mal √† ce que quelqu'un voit un autre bouton ou, par exemple, un curseur.  Et ce n'est pas fatal si quelqu'un ne voit pas quelque chose ou si le titre est diff√©rent. <br><blockquote>  Et nous n'avons pas touch√© le <code>UITabBarController</code> , car avec une grande taille de texte, il peut afficher l'ic√¥ne et le titre de l'onglet de la m√™me mani√®re que iOS montre le changement de volume. </blockquote><br><h2>  Nous montrons comment tout cela fonctionne √† l'int√©rieur </h2><br>  Chaque composant d'interface utilisateur logique de l'application iOS Dodo Pizza est allou√© √† un <code>UIViewController</code> distinct.  Chacun de ces contr√¥leurs a une <code>UIView</code> allou√©e √† un fichier distinct.  Vous pouvez en savoir plus √† ce sujet dans nos articles: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Contr√¥leur, allez-y doucement!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous sortons le code dans UIView</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Contr√¥leur d'oignon.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous cassons les √©crans en plusieurs parties</a> <br><br>  La suppression de composants d'interface utilisateur logiques dans un <code>UIViewController</code> distinct <code>UIViewController</code> consid√©rablement simplifi√© la t√¢che de modification des interfaces vers diff√©rents √©tats.  Nous vous recommandons d'essayer cette approche, m√™me si vous ne pr√©voyez pas d'ajouter la prise en charge de Dynamic Type - il est plus facile de contr√¥ler l'√©tat des √©crans: r√©pondez aux changements d'autorisation, de droits, de r√¥les, etc. <br><br>  Alors voil√†.  Nous ajoutons une couche suppl√©mentaire entre un tel composant d'interface utilisateur et son conteneur parent.  Nous l'avons appel√© <code>StateViewController</code> . <br><br><img src="https://habrastorage.org/webt/zt/2t/3q/zt2t3qd01qrlnmjiem-ihzgjb5u.png"><br>  Le contr√¥leur avec le menu int√®gre le contr√¥leur d'√©tat, et il int√®gre d√©j√† la <code>collection</code> - ou le contr√¥leur de <code>button</code> . <br><br>  Ce <code>StateViewController</code> affiche tel ou tel composant d'interface utilisateur en fonction d'une situation. <br><br>  Pour ce faire, <code>StateViewController</code> doit conna√Ætre ses √©tats et les changer si n√©cessaire. <br><br>  Dans cet exemple, <code>StateViewController</code> basculera la s√©lection des cat√©gories dans le menu de la collection au bouton et vice versa.  Et dans le cas d'un affichage ¬´normal¬ª, et dans le cas d'un affichage pour les malvoyants, le s√©lecteur doit pouvoir faire les m√™mes choses: <br><br><ul><li>  Afficher la liste des cat√©gories. </li><li>  Mettez en surbrillance la cat√©gorie s√©lectionn√©e. </li><li>  Mettre √† jour la liste des cat√©gories. </li><li>  Signaler que la cat√©gorie "est sorti". </li></ul><br>  Sentez-vous cette merveilleuse odeur de petites b√ªches fra√Æches?  Et, non, c'est une √©quipe de pizza livr√©e par api mobile.  Pause de 5 minutes. <br><br>  <i>2 tranches plus tard</i> <br>  "... Eh bien, nous emballons nos composants comme √ßa pour s√©lectionner des cat√©gories dans les protocoles, ET ILS SONT IMM√âDIATEMENT!" <br><blockquote>  Astuce: lancez l'inspecteur d'accessibilit√© pour v√©rifier facilement la fa√ßon dont l'interface r√©agit aux modifications des param√®tres de mosa√Øque dynamique.  Pour ce faire, dans le Xcode ouvert, cliquez sur Xcode ‚Üí Ouvrir l'outil de d√©veloppement ‚Üí Inspecteur d'accessibilit√©, s√©lectionnez le simulateur dans l'appareil et acc√©dez au dernier onglet </blockquote><br><blockquote>  Autre astuce: retirez le contr√¥le dynamo taip sur l'iPhone (pas sur le simulateur) au Control Center pour changer facilement et rapidement la taille du texte.  Pour ce faire, sur un iPhone, acc√©dez √† Param√®tres ‚Üí Centre de contr√¥le ‚Üí Personnaliser les contr√¥les et ajoutez la taille du texte. </blockquote><br>  Nous avons appel√© le s√©lecteur de cat√©gorie habituel <code>CategoriesCollectionViewController</code> , et pour les malvoyants - <code>CategoriesButtonViewController</code> .  Leur protocole commun est appel√© <code>CategoriesPickerProtocol</code> .  Le contr√¥leur d'√©tat g√©n√©ral est <code>CategoriesStateViewController</code> . <br><br>  Nous d√©crivons les √©tats possibles dans notre <code>CategoriesStateViewController</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> collection, button }</code> </pre> <br>  Nous lui apprenons √† montrer le contr√¥leur souhait√© pour chaque √©tat: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> state: <span class="hljs-type"><span class="hljs-type">State</span></span> = .collection { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> state != oldValue { updateViewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateViewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> viewController = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.viewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateController(with: viewController) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> state { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .collection: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesCollectionViewController</span></span>.instantiateFromStoryboard() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .button: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesButtonViewController</span></span>.instantiateFromStoryboard() } }</code> </pre> <br>  <code>instantiateFromStoryboard()</code> - une m√©thode d'une extension auto-√©crite √† un contr√¥leur de vue, cr√©e une instance de contr√¥leur √† partir de storyboards s'ils ont le m√™me nom.  Le code se trouve dans le code source √† la fin de l'article. <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traitCollectionDidChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> previousTraitCollection: UITraitCollection?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.traitCollectionDidChange(previousTraitCollection) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateStateToCurrentContentSize() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateStateToCurrentContentSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> contentSize = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.traitCollection.preferredContentSizeCategory <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateState(to: contentSize) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(to contentSize: UIContentSizeCategory)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.state = contentSize.isAccessibilityCategory ? .button : .collection }</code> </pre> <br>  Nous d√©crivons le protocole <code>CategoriesPickerProtocol</code> , en ajoutant simultan√©ment deux protocoles suppl√©mentaires: pour le d√©l√©gu√© et pour la donn√©e. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesPickerProtocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> datasource: <span class="hljs-type"><span class="hljs-type">CategoriesDatasource?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> delegate: <span class="hljs-type"><span class="hljs-type">CategoriesDelegate?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">select</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateCategories</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selectedCategory: <span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDatasource</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> categories: [<span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(of category: Product.ProductCategory)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDelegate</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">productCategoriesView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> categoriesPicker: CategoriesPickerProtocol, didSelect category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> }</code> </pre> <br>  Cela n'a aucun sens de montrer l'impl√©mentation, c'est juste que chaque piker affiche les cat√©gories et signale les changements √† la hausse. <br><br>  Un exemple d√©taill√© de l'utilisation de contr√¥leurs d'√©tat pour le taype dynamique peut √™tre trouv√© dans mon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©p√¥t sur GitHub</a> . <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Au fait, nous nous d√©veloppons</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr452226/">https://habr.com/ru/post/fr452226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr452210/index.html">Bot pour VK sur Python avec MySQL dans une heure, partie 2</a></li>
<li><a href="../fr452212/index.html">Comment d√©m√©nager aux √âtats-Unis avec votre startup: 3 options de visa r√©el, leurs caract√©ristiques et statistiques</a></li>
<li><a href="../fr452214/index.html">Les stages sont de la chair √† canon pour boucher les trous, pas ¬´une exp√©rience inestimable et des perspectives de carri√®re¬ª</a></li>
<li><a href="../fr452222/index.html">Les tours t√©l√©phoniques a√©ronautiques, la prochaine √©tape 5G</a></li>
<li><a href="../fr452224/index.html">Le guide rapide pour un d√©veloppeur Web</a></li>
<li><a href="../fr452228/index.html">Anna Boyarkina, Miro (anciennement RealtimeBoard): sur la r√©flexion sur les produits, la culture d'√©quipe, les comp√©tences futures</a></li>
<li><a href="../fr452230/index.html">Nous √©tudions la diode tunnel sur l'exemple du 3I306M</a></li>
<li><a href="../fr452232/index.html">ObjectRepository - Mod√®le de r√©f√©rentiel en m√©moire .NET pour vos projets domestiques</a></li>
<li><a href="../fr452234/index.html">Thermom√®tre et hygrom√®tre sur ATMEGA 328P-MU - Augmenter le niveau de d√©veloppement Arduino</a></li>
<li><a href="../fr452236/index.html">Harmonie des scripts dans l'application Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>