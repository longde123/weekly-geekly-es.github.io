<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐊 ⛲️ 🛎️ Le titre sera différent 🌯 👨‍👨‍👧‍👦 🥜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si vous développez un produit pour le marché de masse, les personnes très malvoyantes l'utilisent probablement. Si vous vous efforcez de créer des int...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le titre sera différent</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/452226/">  Si vous développez un produit pour le marché de masse, les personnes très malvoyantes l'utilisent probablement.  Si vous vous efforcez de créer des interfaces conviviales, vous devez le faire de manière pratique pour tous les clients, y compris les personnes malvoyantes.  Je pense que nous l'oublions souvent.  Et il est temps de le réparer. <br><br><img src="https://habrastorage.org/webt/vl/d_/dg/vld_dgvbru6qn4h7vwhdjzhh2r0.png"><br><a name="habracut"></a><br>  J'ai saisi la requête «livraison de pizza» dans la recherche sur l'App Store, téléchargé les 24 premières applications et vérifié laquelle d'entre elles offrait une interface pour les personnes malvoyantes. <br><br><img src="https://habrastorage.org/webt/gc/g_/r-/gcg_r-5lktwzdhejhfqkcxlwkfm.png"><br><br>  <b>2 sur 24</b> .  Et l'un des deux, semble-t-il, l'a fait par accident: à mesure que la taille de la police augmente, toute l'interface «flotte» et devient plus difficile à utiliser.  C'est triste. <br><br>  550 000 personnes utilisent l'application iOS Dodo Pizza chaque mois.  Même si 1% de nos utilisateurs ont une police agrandie, ce sont 5500 personnes qui sont mal à l'aise avec notre application.  Nous allons le corriger. <br><br><h2>  Ajouter un support de type dynamique </h2><br><ol><li>  Nous utilisons des styles de texte système dynamiques au lieu de styles statiques. </li><li> Vous pouvez également activer la coche Ajuster automatiquement la police sur les étiquettes des story-boards.  Ou, si l'étiquette dans le bouton ou est créée via le code, nous <code>adjustsFontForContentSizeCategory</code> sur son paramètre <code>adjustsFontForContentSizeCategory</code> . </li><li>  Nous apprenons à l'interface à s'étendre à différentes tailles de police: <br>  - Nous utilisons le calcul automatique de la taille des cellules lorsque nous le pouvons. <br>  - Là où nous ne pouvons pas - nous obtenons les paramètres de taille de police actuels et répondons aux modifications de la méthode <code>traitCollectionDidChange</code> . </li><li>  Nous obtenons une interface impossible à utiliser. </li></ol><br><br> <a href=""><img src="https://habrastorage.org/webt/vg/sj/qa/vgsjqakh4zfv-lcere3iv0rptk0.png"></a> <br><br><h2>  Nous changeons l'interface pour qu'elle puisse être utilisée </h2><br>  Nous reculons et commençons à penser comment bien faire tout. <br><br><h3>  Utilisez correctement la place dans le menu </h3><br>  Maintenant, il y a beaucoup d'espace vide sous l'image de la pizza.  Essayons de mettre une image au-dessus du nom: de cette façon, elle deviendra plus grande et l'espace vide disparaîtra.  Pour ce faire, nous enveloppons le conteneur d'image et de <code>UIStackView</code> avec tout le reste dans <code>UIStackView</code> , puis nous <code>UIStackView</code> la direction de la vue de la pile si nécessaire. <br><br> <a href=""><img src="https://habrastorage.org/webt/dt/s_/vg/dts_vgharid2k9v5r9yvqxu1cto.png"></a> <br><br>  Nous n'avons pas de séparateurs entre les éléments du menu, c'est pourquoi lorsque la taille est grande, les cellules commencent à «coller ensemble» et le prix de la pizza est trop proche de l'image de la prochaine pizza.  Essayons d'ajouter un séparateur. <br><br> <a href=""><img src="https://habrastorage.org/webt/tl/8t/yf/tl8tyfcp3bir8nju3ziwcxcbozi.png"></a> <br><br>  Pas ça.  Tout d'abord, ça a l'air moyen.  Deuxièmement, il sera difficile à voir pour les personnes malvoyantes.  Même repeint du gris au noir. <br><br>  Nous le supprimons et essayons simplement d'augmenter Internet entre les cellules. <br><br> <a href=""><img src="https://habrastorage.org/webt/7b/kq/m8/7bkqm8wzzu5dayijekqfmik_0qw.png"></a> <br><br>  Maintenant. <br><br>  Sous-total: utilisez plus d'espace, les yeux sautent moins d'une ligne à l'autre, la lecture est devenue plus facile. <br><br><h3>  Nous améliorons l'étirement et le retrait </h3><br>  Vous pouvez maintenant augmenter la largeur du bouton ajouter au panier, sinon il flottait vers la gauche et n'est pas sous votre doigt, bien qu'il y ait beaucoup d'espace vide à droite.  Vous pouvez, bien sûr, simplement le déplacer vers la droite, mais cela sera gênant pour les gauchers et, en général, nous ferons un meilleur geste que non compressé.  Et nous allons rendre le trait plus gras, et maintenant il n'est pas cohérent avec la police. <br><br> <a href=""><img src="https://habrastorage.org/webt/ew/en/c8/ewenc8ziqn0o7ffnkvvzbo5a7o4.png"></a> <br><br>  Je regarde tout cela et je comprends que la photo de pizza, bien sûr, est très énorme.  Essayons de le cacher, peut-être sans images tu peux vivre. <br><br> <a href=""><img src="https://habrastorage.org/webt/pp/pk/1q/pppk1qwmxxbayqrk5kula3oxfgg.png"></a> <br><br>  En général, un menu sans photos n'a pas perdu beaucoup d'informations, mais maintenant un élément de menu interfère presque toujours avec l'écran d'un iPhone 6S.  Mais il est devenu moins attrayant, Drool ne coule pas lors du défilement.  Tels.  Pour l'instant, laissons cela comme ça, réfléchissons bien et peut-être reviendrons plus tard sur la photo. <br><br><h3>  N'oubliez pas de cocher "live" </h3><br>  Maintenant catégories.  En général, même avec la première approche, cela s'est avéré tolérable.  Allumez-en un nouveau. <br><br> <a href=""><img src="https://habrastorage.org/webt/dj/5z/mi/dj5zmie3v-yr8jceovq9t5xmkhc.png"></a> <br><br>  J'ai essayé de parcourir le menu et de basculer entre les catégories.  Néanmoins, cela s'est mal passé: tout s'effondre dans l'action.  Lorsque vous faites défiler le menu, les catégories changent automatiquement et, sur de si grandes broches, elles attirent trop l'attention. <br><br>  <code>UICollectionView</code> par un bouton qui appellera <code>UIActionSheet</code> . <br><br> <a href=""><img src="https://habrastorage.org/webt/re/c4/fr/rec4frqesfjg5_43ftutrekxw1u.png"></a> <br><br>  Voooot.  Maintenant, vous pouvez prendre sur le panneau supérieur, où la ville, les stocks, l'adresse et le code promotionnel. <br><br><h3>  N'oubliez pas les très longues files d'attente </h3><br>  Tout d'abord, faisons un choix de la ville.  Il n'y a rien de compliqué avec la police du bouton, mais il est intéressant d'apprendre aux "triangles" à grandir avec la police.  Dans notre cas, le triangle a été transformé en icône dans le bouton, qui est déplacé vers la droite via <code>CGAffineTransform</code> .  Une autre option consiste à collecter <code>NSAttributedString</code> partir du texte et de l'icône en triangle, puis de tout alimenter vers le bouton.  Pour normaliser l'icône, vous pouvez utiliser une image vectorielle, qui doit nécessairement être dans les actifs avec la coche Préserver les données vectorielles. <br><br> <a href=""><img src="https://habrastorage.org/webt/r5/7k/fz/r57kfzbng-bwybworqlvbzunagk.png"></a> <br><blockquote>  L'icône du triangle est noire et est peinte en blanc à travers le code.  Et pour une raison quelconque, avec la taille de texte standard, des artefacts sous forme de bordures noires sortent dessus.  C'est marrant  Pas vraiment.  Il a été guéri en mettant une icône qui était à l'origine blanche dans les actifs. </blockquote><br>  Maintenant on étire les dodo-roubles, tout est simple: <br><br> <a href=""><img src="https://habrastorage.org/webt/ct/bh/7s/ctbh7styq51y9xt7c3reqc9wdg4.png"></a> <br><br>  Et maintenant, la question est: que se passera-t-il si le nom de la ville s'avère long et que nous avons de nombreux dodo-roubles?  En théorie, vous devez raccourcir le nom de la ville.  Rappelez-vous ce que j'ai dit à propos de la deuxième option pour ajouter une telle icône à un bouton, via <code>NSAttributedString</code> ?  J'ai essayé et maintenant il y a un problème quand on réduit le titre, l'icône triangle disparaît, car maintenant elle fait partie du titre.  Stosh.  Nous devrons retourner la logique de déplacer l'icône à travers les transformations. <br><blockquote>  Si vous connaissez un moyen pratique de déplacer l'icône du bouton vers la droite et de la mettre à l'échelle avec la police dans l'en-tête - jetez-la dans les commentaires, s'il vous plaît. </blockquote><br><h3>  Cram dans </h3><br>  Enfin des stocks.  Ici, vous devez vous asseoir et réfléchir.  Le titre peut être long et même maintenant, il ne tient parfois pas sur une seule ligne.  Sur une grande taille, il ne rentrera pas du tout bien.  Si vous faites le caoutchouc du panneau orange supérieur et laissez le titre de l'action dans une grande taille occuper plusieurs lignes, le bloc supérieur mangera la moitié de l'écran même sur les grands iPhones, et vous n'aurez pas à vous souvenir de 4S.  Ce n'est pas le cas.  Vous pouvez jouer avec une mise en page à l'intérieur de la zone d'action: faire le carré de l'image et prendre la place vacante comme titre.  Mais les images des stocks sont personnalisées dans un format spécifique et ne s'afficheront pas correctement dans un autre.  C'est impossible. <br><br>  Compliqué <br><br>  Donc, mais vous pouvez à nouveau supprimer complètement les images et occuper toute la place avec un titre. <br><br> <a href=""><img src="https://habrastorage.org/webt/pa/uu/q7/pauuq7hzrctfjqof3wt_7fh4x4g.png"></a> <br><br>  Ouais, ça l'est.  Les mains démangent pour coloriser l'arrière-plan sous le titre de l'action, mais cela affectera négativement la lisibilité.  Et nous, comme, essayons de l'améliorer.  Nous ne peignons donc rien et passons aux deux boutons restants concernant l'adresse et les codes promotionnels. <br><br><h3>  Nous travaillons avec des restrictions strictes </h3><br>  Les titres de ces boutons sont irréductibles.  Mais s'ils ne sont pas réduits, les boutons se glisseront les uns sur les autres.  Et oui, vous ne pouvez pas masquer ces boutons. <br><br>  Quand j'ai refait le stock, je ne voulais pas augmenter la hauteur du panneau orange supérieur.  Cela semble devoir.  C'est bien qu'ils ne l'aient pas augmenté à ce moment-là, sinon maintenant il y aurait aduha.  En général, je vais sélectionner une ligne pour chaque bouton. <br><br> <a href=""><img src="https://habrastorage.org/webt/zj/nz/qg/zjnzqgtax6ep4jfk8y1_ogs3pgi.png"></a> <br><br>  Ufff, c'est tout.  En ce qui concerne les photos désactivées dans le menu, je ne suis toujours pas sûr.  Alternativement, vous ne pouvez afficher que la moitié des images de pizza au lieu d'un cercle entier, mais nous avons des demi-pizzas droites dans le menu, donc cela ne fonctionnera pas, nous pouvons confondre les utilisateurs. <br><br>  Comparons la première approche avec le résultat final: <br><br> <a href=""><img src="https://habrastorage.org/webt/tu/eh/m7/tuehm7kleeeivqqaoep4nljpsly.png"></a> <br><br>  Comparez maintenant «avant» et «après» avec une simulation de mauvaise vision: <br><br> <a href=""><img src="https://habrastorage.org/webt/y9/rw/re/y9rwrenclvvgw5yzf6ifgz5fu_0.png"></a> <br><br>  N'ayez pas peur de changer l'interface et les commandes.  Il n'y a rien de mal à ce que quelqu'un voit un autre bouton ou, par exemple, un curseur.  Et ce n'est pas fatal si quelqu'un ne voit pas quelque chose ou si le titre est différent. <br><blockquote>  Et nous n'avons pas touché le <code>UITabBarController</code> , car avec une grande taille de texte, il peut afficher l'icône et le titre de l'onglet de la même manière que iOS montre le changement de volume. </blockquote><br><h2>  Nous montrons comment tout cela fonctionne à l'intérieur </h2><br>  Chaque composant d'interface utilisateur logique de l'application iOS Dodo Pizza est alloué à un <code>UIViewController</code> distinct.  Chacun de ces contrôleurs a une <code>UIView</code> allouée à un fichier distinct.  Vous pouvez en savoir plus à ce sujet dans nos articles: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Contrôleur, allez-y doucement!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous sortons le code dans UIView</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Contrôleur d'oignon.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous cassons les écrans en plusieurs parties</a> <br><br>  La suppression de composants d'interface utilisateur logiques dans un <code>UIViewController</code> distinct <code>UIViewController</code> considérablement simplifié la tâche de modification des interfaces vers différents états.  Nous vous recommandons d'essayer cette approche, même si vous ne prévoyez pas d'ajouter la prise en charge de Dynamic Type - il est plus facile de contrôler l'état des écrans: répondez aux changements d'autorisation, de droits, de rôles, etc. <br><br>  Alors voilà.  Nous ajoutons une couche supplémentaire entre un tel composant d'interface utilisateur et son conteneur parent.  Nous l'avons appelé <code>StateViewController</code> . <br><br><img src="https://habrastorage.org/webt/zt/2t/3q/zt2t3qd01qrlnmjiem-ihzgjb5u.png"><br>  Le contrôleur avec le menu intègre le contrôleur d'état, et il intègre déjà la <code>collection</code> - ou le contrôleur de <code>button</code> . <br><br>  Ce <code>StateViewController</code> affiche tel ou tel composant d'interface utilisateur en fonction d'une situation. <br><br>  Pour ce faire, <code>StateViewController</code> doit connaître ses états et les changer si nécessaire. <br><br>  Dans cet exemple, <code>StateViewController</code> basculera la sélection des catégories dans le menu de la collection au bouton et vice versa.  Et dans le cas d'un affichage «normal», et dans le cas d'un affichage pour les malvoyants, le sélecteur doit pouvoir faire les mêmes choses: <br><br><ul><li>  Afficher la liste des catégories. </li><li>  Mettez en surbrillance la catégorie sélectionnée. </li><li>  Mettre à jour la liste des catégories. </li><li>  Signaler que la catégorie "est sorti". </li></ul><br>  Sentez-vous cette merveilleuse odeur de petites bûches fraîches?  Et, non, c'est une équipe de pizza livrée par api mobile.  Pause de 5 minutes. <br><br>  <i>2 tranches plus tard</i> <br>  "... Eh bien, nous emballons nos composants comme ça pour sélectionner des catégories dans les protocoles, ET ILS SONT IMMÉDIATEMENT!" <br><blockquote>  Astuce: lancez l'inspecteur d'accessibilité pour vérifier facilement la façon dont l'interface réagit aux modifications des paramètres de mosaïque dynamique.  Pour ce faire, dans le Xcode ouvert, cliquez sur Xcode → Ouvrir l'outil de développement → Inspecteur d'accessibilité, sélectionnez le simulateur dans l'appareil et accédez au dernier onglet </blockquote><br><blockquote>  Autre astuce: retirez le contrôle dynamo taip sur l'iPhone (pas sur le simulateur) au Control Center pour changer facilement et rapidement la taille du texte.  Pour ce faire, sur un iPhone, accédez à Paramètres → Centre de contrôle → Personnaliser les contrôles et ajoutez la taille du texte. </blockquote><br>  Nous avons appelé le sélecteur de catégorie habituel <code>CategoriesCollectionViewController</code> , et pour les malvoyants - <code>CategoriesButtonViewController</code> .  Leur protocole commun est appelé <code>CategoriesPickerProtocol</code> .  Le contrôleur d'état général est <code>CategoriesStateViewController</code> . <br><br>  Nous décrivons les états possibles dans notre <code>CategoriesStateViewController</code> : <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">State</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> collection, button }</code> </pre> <br>  Nous lui apprenons à montrer le contrôleur souhaité pour chaque état: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> state: <span class="hljs-type"><span class="hljs-type">State</span></span> = .collection { <span class="hljs-keyword"><span class="hljs-keyword">didSet</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> state != oldValue { updateViewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateViewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> viewController = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.viewController(<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: state) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateController(with: viewController) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">viewController</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">for</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state: State)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> state { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .collection: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesCollectionViewController</span></span>.instantiateFromStoryboard() <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .button: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-type"><span class="hljs-type">CategoriesButtonViewController</span></span>.instantiateFromStoryboard() } }</code> </pre> <br>  <code>instantiateFromStoryboard()</code> - une méthode d'une extension auto-écrite à un contrôleur de vue, crée une instance de contrôleur à partir de storyboards s'ils ont le même nom.  Le code se trouve dans le code source à la fin de l'article. <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">traitCollectionDidChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> previousTraitCollection: UITraitCollection?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.traitCollectionDidChange(previousTraitCollection) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateStateToCurrentContentSize() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateStateToCurrentContentSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> contentSize = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.traitCollection.preferredContentSizeCategory <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.updateState(to: contentSize) } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(to contentSize: UIContentSizeCategory)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.state = contentSize.isAccessibilityCategory ? .button : .collection }</code> </pre> <br>  Nous décrivons le protocole <code>CategoriesPickerProtocol</code> , en ajoutant simultanément deux protocoles supplémentaires: pour le délégué et pour la donnée. <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesPickerProtocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> datasource: <span class="hljs-type"><span class="hljs-type">CategoriesDatasource?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> delegate: <span class="hljs-type"><span class="hljs-type">CategoriesDelegate?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">select</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateCategories</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selectedCategory: <span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel?</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDatasource</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> categories: [<span class="hljs-type"><span class="hljs-type">ProductCategoryModule</span></span>.<span class="hljs-type"><span class="hljs-type">ProductCategoryViewModel</span></span>] { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(of category: Product.ProductCategory)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CategoriesDelegate</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">productCategoriesView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> categoriesPicker: CategoriesPickerProtocol, didSelect category: ProductCategoryModule.ProductCategoryViewModel)</span></span></span></span> }</code> </pre> <br>  Cela n'a aucun sens de montrer l'implémentation, c'est juste que chaque piker affiche les catégories et signale les changements à la hausse. <br><br>  Un exemple détaillé de l'utilisation de contrôleurs d'état pour le taype dynamique peut être trouvé dans mon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dépôt sur GitHub</a> . <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Au fait, nous nous développons</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr452226/">https://habr.com/ru/post/fr452226/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr452210/index.html">Bot pour VK sur Python avec MySQL dans une heure, partie 2</a></li>
<li><a href="../fr452212/index.html">Comment déménager aux États-Unis avec votre startup: 3 options de visa réel, leurs caractéristiques et statistiques</a></li>
<li><a href="../fr452214/index.html">Les stages sont de la chair à canon pour boucher les trous, pas «une expérience inestimable et des perspectives de carrière»</a></li>
<li><a href="../fr452222/index.html">Les tours téléphoniques aéronautiques, la prochaine étape 5G</a></li>
<li><a href="../fr452224/index.html">Le guide rapide pour un développeur Web</a></li>
<li><a href="../fr452228/index.html">Anna Boyarkina, Miro (anciennement RealtimeBoard): sur la réflexion sur les produits, la culture d'équipe, les compétences futures</a></li>
<li><a href="../fr452230/index.html">Nous étudions la diode tunnel sur l'exemple du 3I306M</a></li>
<li><a href="../fr452232/index.html">ObjectRepository - Modèle de référentiel en mémoire .NET pour vos projets domestiques</a></li>
<li><a href="../fr452234/index.html">Thermomètre et hygromètre sur ATMEGA 328P-MU - Augmenter le niveau de développement Arduino</a></li>
<li><a href="../fr452236/index.html">Harmonie des scripts dans l'application Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>