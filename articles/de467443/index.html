<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöÆ üòã ‚úÖ Multimedia Center "Kodi" und Yocto Project üßíüèº ü§≤ üî∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einf√ºhrung in das Yocto-Projekt 
 Yocto Project ist ein kollaboratives Open Source-Projekt zur Vereinfachung der Entwicklung von Distributionen f√ºr ei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Multimedia Center "Kodi" und Yocto Project</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467443/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/q_/p2/ue/q_p2uexsi7n5tjnthirivhuwq2o.png"></div><br><h2>  Einf√ºhrung in das Yocto-Projekt </h2><br>  Yocto Project ist ein kollaboratives Open Source-Projekt zur Vereinfachung der Entwicklung von Distributionen f√ºr eingebettete Systeme.  Yocto enth√§lt eine gro√üe Anzahl von Vorlagen, Metadaten und Build-Tools.  In Yocto Project k√∂nnen Sie eine gro√üe Anzahl von BSP-Schichten (Platform Support Package) f√ºr alle Arten von Hardwareplattformen verbinden. <br><br>  Der Hauptzweck des Artikels ist der Versuch, die Zusammenstellung eines typischen Distributionspakets im Yocto-Projekt am Beispiel des bekannten Multimedia-Centers Kodi, Version 17.6, f√ºr einen Raspberry Pi 3B-Computer mit einer Karte zu zeigen. <br><br>  Wenn Sie sich irgendwo tief in Ihrer Seele als Sammler f√ºhlen, sich aber noch nicht entschieden haben, was Sie sammeln m√∂chten, dann ist dieser Artikel f√ºr Sie.  Wenn Sie das Yocto-Projekt bereits in Ihrer t√§glichen Arbeit verwenden, k√∂nnen Sie durch diesen Artikel scrollen.  Gehen Sie direkt zum letzten Kapitel und machen Sie sich bereit. <br><br>  Der Artikel ist rein praktisch und zeigt die M√∂glichkeit, die Erfolge des Yocto-Projekts und von OpenEmbedded f√ºr den Aufbau des Multimedia-Centers "Kodi" zu nutzen.  Yocto-Ebenen werden mit dem Repo-Dienstprogramm von Google verwaltet.  Ein Artikel im Dokument dieser Reihe. <br><br>  Also: lass uns gehen. <br><a name="habracut"></a><br><h2>  Inhalt: </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Installieren Sie</a> Yocto Project unter Ubuntu <br>  Distributions-Build- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Engine</a> in Yocto Project <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verwenden von</a> OpenEmbedded mit dem Yocto-Projekt <br>  Platform Support <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Package</a> (BSP) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verwalten Sie</a> Yocto-Ebenen mit Repo <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Installieren Sie</a> Repo <br>  Verteilungserstellungsmanifest <br>  Manifestierter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inhalt</a> <br>  Manifest <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beschreibung</a> <br>  Bs-Manifest- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Struktur</a> <br>  Poky-Variablen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">initialisieren</a> <br>  Repo- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Initialisierung</a> <br>  Repo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sync</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erstellen</a> einer Yocto-Projektkonfiguration <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konfigurationsdatei</a> build / conf / local.conf <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konfigurationsdatei</a> build / conf / bblayers.conf <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ebene</a> zum Zusammenbau eines Multimedia-Centers <br>  Schichtstruktur <br>  Ebenenkonfiguration <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zusammensetzung der</a> Rezepte-Berserker <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zusammensetzung des</a> Rezeptkerns <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zusammensetzung des</a> Rezeptkerns <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kompositionsrezepte</a> -Medienzentrum <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zusammensetzung der</a> Rezepte-Multimedia <br>  Kodi Build <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rezept Erg√§nzung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hinzuf√ºgen eines neuen</a> Elements zum Kodi-Einstellungsmen√º <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Maximale</a> Puffereinstellungen f√ºr Video <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fernsehen</a> √ºber IPTV <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Youtube</a> mit dem Kodi Plugin ansehen <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Konsolen-</a> Shell-Netzwerkkonfigurationserweiterung <br>  Verteilungserstellungsrezept <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eine kurze</a> Anleitung zum Erstellen eines Verteilungsimages <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nachtrag</a> <br><br><a name="install_yocto_koditv"></a><h2>  Installieren Sie Yocto Project unter Ubuntu </h2><br>  Um die Distribution mit dem Yocto Project unter Ubuntu zu erstellen, m√ºssen Sie die folgenden Pakete installieren: <br><br><pre><code class="bash hljs">sudo apt-get install -y --no-install-suggests --no-install-recommends \ gawk wget git-core diffstat unzip texinfo gcc-multilib \ build-essential chrpath socat cpio python python3 python3-pip python3-pexpect \ xz-utils debianutils iputils-ping python3-git python3-jinja2 libegl1-mesa libsdl1.2-dev \ xterm</code> </pre> <br>  Pakete werden mit dem Befehl <strong>apt-get install</strong> und dem <strong>Befehl skalo</strong> zur Eskalation von Berechtigungen <strong>installiert</strong> .  Im Ubuntu-System ist dies eine weit verbreitete Praxis, wenn der Befehl sudo zum Ausf√ºhren von Verwaltungsaktionen verwendet wird (beim Erstellen des Hauptbenutzers des Systems wird er automatisch in der sudo-Gruppe registriert). <br><br>  Detaillierte Installationsanweisungen finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier:</a> <br><br><a name="mechanism_build_koditv"></a><h2>  Distributions-Build-Engine in Yocto Project </h2><br>  Im Yocto-Projekt wird jede Programmeinheit anhand eines Montagerezeptes beschrieben.  Die Rezeptbeschreibungssprache √§hnelt "bash" mit der M√∂glichkeit, Codeteile in die Python-Sprache einzuf√ºgen.  Grundlegende <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Syntaxinformationen finden Sie im Yocto Project-Handbuch</a> .  Je nach Verwendungszweck kann eine Reihe von Baugruppenrezepten zu separaten Montageschichten kombiniert werden. <br><br>  Die Ebenen sind in hardwareabh√§ngige Ebenen unterteilt: BSP-Ebenen, UI-Ebenen (Benutzeroberfl√§che), bestimmte Yocto-Ebenen sowie Ebenen, die bestimmte Funktionen implementieren: <br>  B. Ebenen von OpenEmbedded =&gt; Multimedia, Python, Perl, Ruby, Networking, Systemd, Webserver usw. <br><br><a name="openembedded_koditv"></a><h2>  Verwenden von OpenEmbedded mit dem Yocto-Projekt </h2><br>  Wenn Sie jedoch das Yocto-Projekt verwenden, ben√∂tigen Sie mit Sicherheit Ebenen mit zus√§tzlichen Funktionen, d. H.  Eine gro√üe Auswahl an Rezepten f√ºr alle Gelegenheiten.  Und es gibt so ein Set - das sind Rezepte von OpenEmbedded.  OpenEmbedded ist eine Infrastruktur zum Erstellen von Paketen f√ºr Embedded Linux. <br><br>  OpenEmbedded ist vollst√§ndig kompatibel mit dem Yocto-Projekt, da dieses Projekt als Grundlage f√ºr das Yocto-Projekt verwendet wurde.  Vielleicht hat das Yocto-Projekt deshalb etwas bessere Stabilit√§t, bessere Dokumentation und etwas besseren Support (aber im Grunde ist es immer noch dasselbe OpenEmbedded). <br><br><a name="package_bsp_koditv"></a><h2>  Platform Support Package (BSP) </h2><br>  Das Board Support Package ist eine separate, spezialisierte Schicht (en) f√ºr eine bestimmte Karte, die die Hardwarefunktionen der Plattform definiert, d. H.  implementiert die spezifischen Dinge, die eine Karte von einer anderen unterscheiden: Prozessorfunktionen, Interrupts, Adressierung, Bootloaderfunktionen, Videoadapterfunktionen (GPU) usw. <br><br>  Dieser Artikel verwendet die BSP-Schicht - <strong>meta-raspberrypi</strong> <br>  Das Layer-Repository befindet sich unter: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">git.yoctoproject.org/git/meta-raspberrypi</a> <br><br><a name="repo_koditv"></a><h2>  Verwalten Sie Yocto-Ebenen mit Repo </h2><br>  Yocto Project kann eine gro√üe Anzahl von Ebenen von verschiedenen Lieferanten - Ger√§teentwicklern - verwenden, und all dies muss irgendwie verwaltet werden.  Stellen Sie sich vor, Sie haben ein Dutzend verschiedene Boards und jedes Board verf√ºgt √ºber ein separates BSP-Git-Repository. Dies ber√ºcksichtigt nicht die Infrastruktur des Yocto-Projekts selbst sowie m√∂gliche zus√§tzliche Funktionen von OpenEmbedded. <br><br>  In einer solchen Situation kommen Sie nicht mit einem separaten einfachen Installationsskript davon.  Willy-nilly, muss nach Werkzeugen suchen, die es gut k√∂nnen.  Noch mehr als gut.  Eines der besten Tools dieser Art ist das Google-Dienstprogramm Repo. <br><br>  <strong>Repo</strong> ist das Hauptwerkzeug zum Verwalten von GIT-Repositorys beim Erstellen des Android-Betriebssystems mit seiner gro√üen Codebasis.  Mit Repo k√∂nnen Sie ein Dutzend, wenn nicht hundert separate Git-Repositorys in einem Projekt verwalten, deren Versionen Sie sorgf√§ltig in einer XML-Datei des <strong>Manifests</strong> angeben k√∂nnen <br><br>  und f√ºr die korrekte Synchronisation aller Versionen aller Repositorys m√ºssen Sie nur einen Befehl ausf√ºhren <br><br>  <strong>Repo-Synchronisierung</strong> <br><br><a name="install_repo_koditv"></a><h3>  Installieren Sie Repo </h3><br>  Mit den folgenden Befehlen k√∂nnen Sie Repo in Ihrem <strong>~ / bin</strong> -Ausgangsverzeichnis installieren <br>  (Der Befehl curl kann separat installiert werden: sudo apt-get install curl) <br><br><pre> <code class="bash hljs">PATH=<span class="hljs-variable"><span class="hljs-variable">${PATH}</span></span>:~/bin mkdir ~/bin curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo chmod a+x ~/bin/repo</code> </pre><br><br>  und in Zukunft m√ºssen Sie nur noch den Befehl in der Konsole verwenden: <strong>repo</strong> <br><br><blockquote>  oder so <br>  Wenn das Verzeichnis HOME / bin nicht automatisch mit dem Standardstartpfad hinzugef√ºgt wird <br>  siehe Datei HOME / .profile <br><br>  $ <br>  $ PATH = $ {PATH}: ~ / bin <br>  $ repo <br>  $ <br></blockquote><br><a name="manifest_repo_koditv"></a><h3>  Verteilungserstellungsmanifest </h3><br>  Die im Rahmen des Artikels gesammelte Distribution muss ich so nennen.  Lass es der Name <strong>Torvin sein</strong> .  Mit dem Codenamen Torvin wird es eine minimalistische Linux-Distribution mit einem einzigen Programm enthalten.  Dies bezieht sich auf ein Anwendungsbenutzerprogramm - Kodi und nichts weiter (alles andere ist eine Systemebene).  F√ºr ein Multimedia-Center ist dies meiner Meinung nach v√∂llig ausreichend. <br><br><a name="context_repo_koditv"></a><h3>  Manifestierter Inhalt </h3><br>  Die Datei <strong>torvin-0.2.5.xml</strong> wird zum Verwalten von Verteilungsebenen verwendet <strong>.</strong> <br><br><pre> <code class="xml hljs"> <span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">default</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sync-j</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fetch</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://git.yoctoproject.org/git"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yocto"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fetch</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/openembedded"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"oe"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">remote</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fetch</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/berserktv"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"master"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs-manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/bs-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shell.sh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/shell.sh"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/base"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/rocko"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yocto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"poky"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/poky"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"oe"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"meta-openembedded"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/meta-openembedded"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"yocto"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"meta-raspberrypi"</span></span></span><span class="hljs-tag"> \ </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/meta-raspberrypi"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"rocko"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"berserk"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/berserk"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><a name="desc_repo_koditv"></a><h3>  Manifest Beschreibung </h3><br>  Zu Beginn des Manifests bezeichnen <strong>Remote-</strong> Tags zwei Haupt-GIT-Repositorys und ein Hilfs-Repository: <br><br>  <strong>https: ‚ÅÑ‚ÅÑgit.yoctoproject.org / git</strong> - Yocto-Repository mit dem Namen <strong>yocto</strong> <br>  <strong>https: ‚ÅÑ‚ÅÑgithub.com / openembedded</strong> - OpenEmbedded-Repository mit dem Namen <strong>oe</strong> <br>  https: ‚ÅÑ‚ÅÑgithub.com / berserktv - Hilfs-GIT-Repository mit dem Namen <strong>bs</strong> <br><br>  Im n√§chsten Teil des Manifests arbeiten wir mit abgek√ºrzter Benennung mit Projekten, die sich in diesen Repositorys befinden. Das <strong>Projekt-</strong> Tag enth√§lt die folgenden Attribute: <br><br>  <strong>remote</strong> - Der Name des Remote-Repositorys <br>  <strong>Revision</strong> - Der Name des Zweigs oder der Hash-Version <br>  <strong>name</strong> - Name des Projekts im angegebenen Repository <br>  <strong>Pfad</strong> - Der lokale Projektpfad in Ihrem Dateisystem <br><br><pre> <code class="html hljs xml">   <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"master"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs-manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/bs-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span>  xml      : git clone https://github.com/berserktv/bs-manifest -b master sources/bs-manifest</code> </pre><br>  Im Hauptteil des <strong>Projekt-</strong> Tags habe ich Befehle zum Erstellen symbolischer Links zur Infrastruktur von Hilfsskripten f√ºr die Erstinitialisierung und den regelm√§√üigen Start des von mir <strong>ben√∂tigten Poky-</strong> Build-Systems angegeben <br><br><pre> <code class="html hljs xml">   linkfile <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">revision</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"master"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bs-manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/bs-manifest"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"setup-environment"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"shell.sh"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/shell.sh"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">linkfile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">dest</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sources/base"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"raspberry/rocko"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span>        : ln -s src dest .. #      ln -s sources/bs-manifest/setup-environment setup-environment ln -s sources/bs-manifest/raspberry/shell.sh shell.sh #    ,  #      cd sources ln -s bs-manifest/raspberry/rocko base</code> </pre><br><a name="struct_repo_koditv"></a><h3>  Bs-Manifest-Struktur </h3><br><pre> ‚îú‚îÄ‚îÄ COPYING.MIT
 ‚îú‚îÄ‚îÄ Himbeere
 ‚îÇ ‚îú rocko
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ conf
 Bl ‚îÇ ‚îÇ ‚îú bblayers.conf
 ‚îÇ ‚îÇ ‚îÇ ‚îî local.conf
 Vin ‚îÇ ‚îî torvin-0.2.5.xml
 ‚îÇ ‚îî shell.sh
 ‚îú‚îÄ‚îÄ README.md
 ‚îî‚îÄ‚îÄ Setup-Umgebung
</pre><br><br>  Das <strong>bs-manifest-</strong> Projekt wird f√ºr ein flexibles Konfigurationsmanagement verwendet, wobei die Assemblys verschiedener Versionen der Distribution ber√ºcksichtigt werden.  Ich habe diese Version - 0.2.5 <br><br><a name="env_repo_koditv"></a><h3>  Poky-Variablen initialisieren </h3><br>  Die <strong>Setup-Umgebung</strong> f√ºr das Initialisierungsskript wurde aus dem Freescale Community-Projekt √ºbernommen (in der Yocto-Umgebung ist dies eine g√§ngige L√∂sung).  Das Skript ist f√ºr die Initialisierung der Variablen des Poky-Build-Systems verantwortlich. Das Skript erstellt eine Verzeichnisstruktur, in die es sehr gut unterteilt ist: <br><br><ul><li>  <strong>build</strong> - <strong>Build-</strong> Verzeichnis </li><li>  <strong>Quellcode f√ºr</strong> Assembly-Assembly-Rezepte </li><li>  <strong>download</strong> - Verzeichnis zum Herunterladen von Programmcode (Git-Datenbanken, tar.gz-Archive) </li></ul><br>  Der Inhalt des Setup-Umgebungsskripts kann hier angezeigt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden:</a> <br><br><div class="spoiler">  <b class="spoiler_title">Inhalt des Shell.sh-Skripts</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#!/bin/bash MACHINE='raspberrypi3' source ./setup-environment build echo "you may try 'bitbake core-image-minimal'" bash</span></span></code> </pre><br></div></div><br>  Dieses Root-Skript dient zum Initialisieren der Konfigurationsvariablen der Build-Umgebung und wird normalerweise zu Beginn einer Sitzung aufgerufen. <br><br><a name="init_repo_koditv"></a><h3>  Repo-Initialisierung </h3><br>  Um Repo zu initialisieren, m√ºssen Sie den folgenden Befehl ausf√ºhren: <br><br><pre> <code class="bash hljs">mkdir torvin <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> torvin repo init -u https:‚ÅÑ‚ÅÑgithub.com/berserktv/bs-manifest -m raspberry/rocko/torvin-0.2.5.xml</code> </pre><br>  Dabei teilt <strong>-u https: ‚ÅÑ‚ÅÑgithub.com / berserktv / bs-manifest</strong> GIT den Pfad zum Manifestprojekt mit <br><br>  Hinweis: Sie k√∂nnen auch <strong>-b Baumname</strong> angeben <br>  (Wenn Sie den Schalter -b nicht angeben, wird der Hauptzweig angenommen (standardm√§√üig)) <br><br>  Dabei gibt der Pfad <strong>-m Himbeere / Rocko / Torvin-0.2.5.xml</strong> zur Konfigurationsdatei Folgendes an: <br><br><ol><li>  Der Name der Hardwareplattform, f√ºr die die Montage ausgef√ºhrt wird - <strong>Himbeere</strong> </li><li>  Der Name des Hauptarbeitszweigs von Yocto / OpenEmbedded lautet <strong>rocko</strong> </li><li>  Der Codename der Version lautet <strong>torvin</strong> (alle Versionen der 0.2.x-Serie) </li><li>  Die digitale Versionsnummer, die zusammengebaut wird, ist <strong>0.2.5</strong> </li></ol><br><a name="sync_repo_koditv"></a><h3>  Repo Sync </h3><br>  F√ºhren Sie zum Booten oder anschlie√üende Synchronisieren einfach den folgenden Befehl aus: <br><br><pre> <code class="bash hljs">repo sync</code> </pre><br>  Wenn Sie im Revisionsattribut einen Hash-Commit- oder Tag-Namen haben, √§ndert sich die Version f√ºr dieses Git-Repository nicht. Dabei werden alle neuesten Versionen von GIT-Projekten abgerufen, die in der Manifestdatei angegeben sind (Zweige werden normalerweise angegeben).  Der Tag-Name kann wie folgt angegeben werden: revision = "refs / tags / v0.2.5" <br><br><a name="config_koditv"></a><h3>  Erstellen einer Yocto-Projektkonfiguration </h3><br>  Nachdem der Befehl repo sync ausgef√ºhrt wurde, k√∂nnen Sie mit der Erstellung der Hauptkonfiguration des Yocto-Projekts beginnen: <br><br><pre> <code class="bash hljs">./shell.sh</code> </pre><br>  Nach Abschluss des Skripts wird das Verzeichnis <strong>build / conf</strong> erstellt: <br>  mit zwei Hauptdateien: <br><br><ul><li>  <strong>local.conf</strong> - Assembly- <strong>Steuervariablen</strong> : <br>  Plattformname, Art der Verteilung und Build-Pakete usw. </li><li>  <strong>bblayers.conf</strong> - Konfiguration der verbundenen Ebenen des Yocto-Projekts </li></ul><br>  Standardm√§√üig sucht das Setup-Umgebungsskript nach <strong>source / base / conf</strong> <br>  Erstkonfiguration und wenn <strong>local.conf</strong> und <strong>bblayers.conf Dateien</strong> <br>  existieren, werden sie nach <strong>build / conf</strong> kopiert <br>  (Siehe die Variable TEMPLATES in der Setup-Umgebung.) <br><br>  d.h.  Dateien stammen aus den Quellen / bs-manifest / raspberry / rocko / conf <br>  Siehe Erstellen eines Symlinks zur Basis <br><br><a name="local_conf_config_koditv"></a><h3>  Konfigurationsdatei build / conf / local.conf </h3><br><div class="spoiler">  <b class="spoiler_title">Ein- / Ausblenden</b> <div class="spoiler_text"><pre> <code class="bash hljs"> MACHINE ??= <span class="hljs-string"><span class="hljs-string">'raspberrypi3'</span></span> DISTRO ?= <span class="hljs-string"><span class="hljs-string">'poky'</span></span> PACKAGE_CLASSES ?= <span class="hljs-string"><span class="hljs-string">"package_deb"</span></span> EXTRA_IMAGE_FEATURES ?= <span class="hljs-string"><span class="hljs-string">"debug-tweaks"</span></span> USER_CLASSES ?= <span class="hljs-string"><span class="hljs-string">"buildstats image-mklibs image-prelink"</span></span> PATCHRESOLVE = <span class="hljs-string"><span class="hljs-string">"noop"</span></span> BB_DISKMON_DIRS = <span class="hljs-string"><span class="hljs-string">"\ STOPTASKS,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${TMPDIR}</span></span></span><span class="hljs-string">,1G,100K \ STOPTASKS,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${DL_DIR}</span></span></span><span class="hljs-string">,1G,100K \ STOPTASKS,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${SSTATE_DIR}</span></span></span><span class="hljs-string">,1G,100K \ STOPTASKS,/tmp,100M,100K \ ABORT,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${TMPDIR}</span></span></span><span class="hljs-string">,100M,1K \ ABORT,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${DL_DIR}</span></span></span><span class="hljs-string">,100M,1K \ ABORT,</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${SSTATE_DIR}</span></span></span><span class="hljs-string">,100M,1K \ ABORT,/tmp,10M,1K"</span></span> PACKAGECONFIG_append_pn-qemu-native = <span class="hljs-string"><span class="hljs-string">" sdl"</span></span> PACKAGECONFIG_append_pn-nativesdk-qemu = <span class="hljs-string"><span class="hljs-string">" sdl"</span></span> CONF_VERSION = <span class="hljs-string"><span class="hljs-string">"1"</span></span> DL_DIR ?= <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${BSPDIR}</span></span></span><span class="hljs-string">/downloads/"</span></span> <span class="hljs-comment"><span class="hljs-comment"># size memory GPU for Raspberry Pi GPU_MEM = "128" GPU_MEM_256 = "112" GPU_MEM_512 = "160" GPU_MEM_1024 = "320" # for libs: "mpeg2dec libmad ffmpeg x264" LICENSE_FLAGS_WHITELIST += "commercial"</span></span></code> </pre><br></div></div><br><a name="bblayers_conf_config_koditv"></a><h3>  Konfigurationsdatei build / conf / bblayers.conf </h3><br><div class="spoiler">  <b class="spoiler_title">Ein- / Ausblenden</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf # changes incompatibly LCONF_VERSION = "6" POKY_BBLAYERS_CONF_VERSION = "2" BBPATH = "${TOPDIR}" BSPDIR := \ "${@os.path.abspath(os.path.dirname(d.getVar('FILE', True)) + '/../..')}" BBFILES ?= "" BBLAYERS ?= " \ ${BSPDIR}/sources/poky/meta \ ${BSPDIR}/sources/poky/meta-poky \ ${BSPDIR}/sources/poky/meta-yocto-bsp \ ${BSPDIR}/sources/meta-openembedded/meta-oe \ ${BSPDIR}/sources/meta-openembedded/meta-python \ ${BSPDIR}/sources/meta-openembedded/meta-networking \ ${BSPDIR}/sources/meta-openembedded/meta-multimedia \ ${BSPDIR}/sources/meta-openembedded/meta-filesystems \ ${BSPDIR}/sources/meta-raspberrypi \ ${BSPDIR}/sources/berserk/meta-berserk \ "</span></span></code> </pre><br></div></div><br><br>  Die Hauptvariablen der Datei local.conf, auf die Sie achten m√ºssen: <br><br><ul><li>  MASCHINE - der Name der Plattform, unter der die Montage durchgef√ºhrt wird </li><li>  DISTRO - Name der Verteilungskategorie </li><li>  PACKAGE_CLASSES - Paketformat f√ºr die Installation von Software </li><li>  LICENSE_FLAGS_WHITELIST - Verwendung zus√§tzlicher Lizenzen </li></ul><br>  Spezifische Einstellungen f√ºr die Raspberry Pi-Board-Familie <br><br><ul><li>  GPU_MEM = "128" - Die Gr√∂√üe des Videospeichers f√ºr den GPU-Videoadapter (aus dem RAM zugewiesen) </li><li>  GPU_MEM_256 = "112" - das gleiche gilt nur f√ºr Karten mit einer Gesamt-RAM-Gr√∂√üe von 256 MB </li><li>  GPU_MEM_512 = "160" - das gleiche gilt nur f√ºr Karten mit einer Gesamtspeichergr√∂√üe von 512 MB </li><li>  GPU_MEM_1024 = "320" - Gleiches gilt nur f√ºr Karten mit einer Gesamt-RAM-Gr√∂√üe von 1024 MB </li></ul><br><blockquote>  Hinweis: <br>  Wenn Sie beispielsweise nur die Variable GPU_MEM = "128" belassen, <br>  dann f√ºr alle RPI-, RPI2-, RPI3-Karten <br>  unabh√§ngig von der Menge des realen RAM <br>  auf der Karte wird immer f√ºr die GPU zugewiesen - 128Mb <br>  (und die gesamte RAM-Gr√∂√üe nimmt um diesen Wert ab) <br></blockquote><br>  Wenn alle Variablen angegeben sind, haben die Anweisungen GPU_MEM_256, GPU_MEM_512, GPU_MEM_1024 h√∂here Priorit√§t. <br><br>  Informationen zum Zusammenstellen des Multimedia-Centers finden Sie zus√§tzlich zu den regul√§ren Yocto-Ebenen in der Datei bblayers.conf <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/poky/meta \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/poky/meta-poky \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/poky/meta-yocto-bsp \</code> </pre><br>  Ich habe vier Ebenen mit zus√§tzlichen Funktionen von OpenEmbedded verbunden. <br><br>  Kodi Multimedia Center - ist ein komplexes Programm, das eine gro√üe Anzahl externer Bibliotheken verwendet. Sie m√ºssen jede Bibliothek mit einem Build-Rezept erstellen. Wenn m√∂glich, verwende ich daher alle Rezepte von OpenEmbedded in der Kategorie <strong>Multimedia</strong> <br><br>  Ich habe also eine Multimedia-Ebene angeschlossen und die Ebenen, von denen es abh√§ngt <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-oe \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-python \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-networking \ <span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-multimedia \</code> </pre><br>  Dann wird eine weitere OpenEmbedded-Ebene verbunden, um mit Dateisystemen zu arbeiten <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-openembedded/meta-filesystems \</code> </pre><br>  Au√üerdem wurde die BSP-Hauptschicht f√ºr die Raspberry Pi-Plattform verbunden <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/meta-raspberrypi \</code> </pre><br>  Nun, ganz am Ende ist eine zus√§tzliche Ebene verbunden, die f√ºr die Zusammenstellung des Verteilungsbildes mit der Funktionalit√§t des "Multimedia Centers" verantwortlich ist. <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">${BSPDIR}</span></span>/sources/berserk/meta-berserk \</code> </pre><br><a name="layer_koditv"></a><h2>  Ebene zum Zusammenbau eines Multimedia-Centers </h2><br>  Meiner Meinung nach ist das Yocto-Projekt ein industrieller M√§hdrescher zur Erstellung eingebetteter Distributionen.  Wenn Sie jedoch jemals mit dem Buildroot-Build-System gearbeitet haben, erscheint Ihnen Yocto m√∂glicherweise umst√§ndlich.  Es verwendet eine gro√üe Menge an freiem Festplattenspeicher.  F√ºr den normalen Betrieb ben√∂tigt Yocto etwa 80 bis 100 GB freien Speicherplatz. Dabei wird normalerweise die Baugruppe nur f√ºr eine Plattform ber√ºcksichtigt. <br><br>  Yocto erf√ºllt seinen Hauptzweck - die Unterst√ºtzung m√∂glichst vieler verschiedener Hardwareplattformen. Dies erfordert den flexibelsten Mechanismus zum Wechseln von Baugruppen.  Und dieser Mechanismus braucht Zeit und Ort.  Das Erstellen einer Distribution in Yocto ist kein schneller Prozess. <br><br>  Alle Funktionen zum Zusammenstellen des "Multimedia Centers" habe ich mit einer separaten Ebene: <br><br><pre> <code class="bash hljs">https://github/berserktv/berserk</code> </pre><br>  (Titel aus meinem Lieblingsbuch, Der Hammer und das Kreuz, von Harry Harrison.) <br>  (Torvin ist auch eine Figur in diesem Buch.) <br><br>  Um die Funktionalit√§t zu erhalten, die ich ben√∂tige, verwende ich die sogenannten Add-Ons f√ºr Rezepte, die sich in Dateien mit der Erweiterung .bbappend befinden <br>  In der .bbappend-Datei k√∂nnen Sie Ihre eigenen Befehlsaufrufe f√ºr die regul√§re Build-Rezept-Methode hinzuf√ºgen, z. B. f√ºr die Methode do_configure, do_compile, do_install usw. <br><br><a name="struct_top_layer_koditv"></a><h3>  Schichtstruktur </h3><br><pre> ‚îú‚îÄ‚îÄ COPYING.MIT
 ‚îú‚îÄ‚îÄ Meta-Berserker
 ‚îÇ ‚îú conf
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ layer.conf
 ‚îÇ ‚îú Rezepte-Berserker
 ‚îÇ ‚îÇ ‚îú bs-net
 ‚îÇ ‚îÇ ‚îú erste Runde
 ‚îÇ ‚îÇ ‚îú Bilder
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ tv
 ‚îÇ ‚îú Rezepte-Kern
 ‚îÇ ‚îÇ ‚îú init-ifupdown
 ‚îÇ ‚îÇ ‚îî psplash
 ‚îÇ ‚îú Rezepte-Kernel
 ‚îÇ ‚îÇ ‚îî Linux
 ‚îÇ ‚îú Rezepte-Medienzentrum
 ‚îÇ ‚îÇ ‚îú kodi
 ‚îÇ ‚îÇ ‚îî Kodi-Plugins
 ‚îÇ ‚îî Rezepte-Multimedia
 ‚îÇ ‚îî ffmpeg
 ‚îú‚îÄ‚îÄ README.md
 ‚îî‚îÄ‚îÄ changelog.txt
</pre><br><br>  Schichtzusammensetzung: <br><br><ul><li>  Konfiguration der <strong>Konf</strong> - Schicht </li><li>  Rezepts <strong>-Berserker</strong> - <strong>Rezepte f√ºr</strong> die Erstellung von Distributionen, Fernsehern, Netzwerken und Erststarts </li><li>  Rezept <strong>-Kern</strong> - Grundrezepte, insbesondere eine √Ñnderung des Startrezepts </li><li>  <strong>Rezepte-Kernel</strong> - Linux-Kernel-Build-Rezepte </li><li>  <strong>Rezepte-Medienzentrum</strong> - Rezepte zum <strong>Erstellen von</strong> Kodi und seinen Plugins </li><li>  <strong>rezepte-multimedia</strong> - multimedia rezepte, ffmpeg montage </li></ul><br><a name="config_layer_koditv"></a><h3>  Schichtkonfiguration </h3><br><div class="spoiler">  <b class="spoiler_title">Enth√§lt die Datei layer.conf</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># We have a conf and classes directory, add to BBPATH BBPATH .= ":${LAYERDIR}" # We have a packages directory, add to BBFILES BBFILES += "${LAYERDIR}/recipes-*/*/*.bb \ ${LAYERDIR}/recipes-*/*/*.bbappend" BBFILE_COLLECTIONS += "bs" BBFILE_PATTERN_bs := "^${LAYERDIR}/" BBFILE_PRIORITY_bs = "5" DISTRO_FEATURES_append += " wifi x11" PREFERRED_VERSION_ffmpeg = "3.1.11" SYSVINIT_ENABLED_GETTYS = "1" PREFERRED_VERSION_linux-raspberrypi ?= "4.9%"</span></span></code> </pre><br></div></div><br>  Die Datei enth√§lt einen Hinweis auf die Version der ffmpeg-Bibliothek, die Versionsnummer des Linux-Kernels sowie die Anzahl der virtuellen Konsolen (tty) und enth√§lt die Funktionen des Distributionskits - wifi x11 <br><blockquote>  DISTRO_FEATURES_append + = "wifi x11" <br><br>  PREFERRED_VERSION_ffmpeg = "3.1.11" <br>  SYSVINIT_ENABLED_GETTYS = "1" <br><br>  PREFERRED_VERSION_linux-raspberrypi? = "4,9%" <br></blockquote><br><a name="berserk_layer_koditv"></a><h3>  Zusammensetzung der Rezepte-Berserker </h3><br><pre> ‚îú‚îÄ‚îÄ bs-net
 ‚îÇ ‚îî‚îÄ‚îÄ bs-net_0.1.3.bb
 ‚îú‚îÄ‚îÄ Erster Lauf
 ‚îÇ ‚îú Dateien
 ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ first-run.sh
 ‚îÇ ‚îî first-run.bb
 ‚îú‚îÄ‚îÄ Bilder
 ‚îÇ ‚îî berserk-image.bb
 ‚îî‚îÄ‚îÄ Fernsehen
     ‚îú‚îÄ‚îÄ Dateien
     ‚îÇ ‚îî berserk.m3u8
     ‚îú‚îÄ‚îÄ tv-config.bb
     ‚îî‚îÄ‚îÄ tv-dir.inc
</pre><br><br>  wo: <br><br><ul><li>  bs-net_0.1.3.bb - Rezept zum Erstellen von Shell-Erweiterungen f√ºr WLAN / Ethernet-Schnittstellen </li><li>  first-run.bb - Rezept f√ºr den ersten Lauf, zus√§tzliche Festplattenpartitionierung </li><li>  first-run.sh - Shell-Skript des ersten Laufs (auf Laufstufe S ausf√ºhren) </li><li>  berserk-image.bb - Rezept zum Erstellen des Distributionsimages </li><li>  tv-config.bb - Rezept zum Konfigurieren von TV-Kan√§len mit IPTV </li><li>  berserk.m3u8 - Konfiguration √∂ffentlicher Fernsehkan√§le (m3u8-Format) </li></ul><br><a name="core_layer_koditv"></a><h3>  Rezept-Kernkomposition </h3><br><pre> ‚îú‚îÄ‚îÄ init-ifupdown
 ‚îÇ ‚îú Dateien
 ‚îÇ ‚îÇ ‚îî Schnittstellen
 ‚îÇ ‚îî init-ifupdown_1.0.bbappend
 ‚îî‚îÄ‚îÄ psplash
     ‚îú‚îÄ‚îÄ Dateien
     ‚îÇ ‚îî psplash-berserk-img.h
     ‚îî‚îÄ‚îÄ psplash_git.bbappend
</pre><br><br>  wo: <br><br><ul><li>  Schnittstellen - Datei mit der aktuellen Netzwerkeinstellung </li><li>  init-ifupdown_1.0.bbappend - Erweiterung f√ºr das Netzwerkkonfigurationsrezept </li><li>  psplash-berserk-img.h - Bild des Startbildschirmschoners <br>  Header-Datei, die mit dem Dienstprogramm gdk-pixbuf-csource abgerufen wurde </li><li>  psplash_git.bbappend - Erweiterung des Rezepts zum Starten des Startbildschirmschoners </li></ul><br>  Die Netzwerkkonfiguration auf dem Zielger√§t befindet sich in der Datei: <br><br><pre> <code class="bash hljs">/etc/network/interfaces</code> </pre><br>  Nachdem ich die Erweiterung des Rezepts init-ifupdown hinzugef√ºgt habe, ersetze ich die regul√§re Konfigurationsdatei durch meine eigene und √§ndere die Reihenfolge (Priorit√§t) des Skriptlaufs f√ºr die Ausf√ºhrungsebenen <br><br><pre> <code class="bash hljs">INITSCRIPT_PARAMS = <span class="hljs-string"><span class="hljs-string">"start 98 2 3 4 5 . stop 10 0 6 1 ."</span></span></code> </pre><br>  Derzeit enthalten fast alle modernen Linux-Distributionen einen Startbildschirm.  In der Regel zeigt der Start-Bildschirmschoner den aktuellen Ladezustand an  Anzeige der seit dem Systemstart verstrichenen Zeit.  In dieser Hinsicht ist Yocto keine Ausnahme und Sie k√∂nnen das Bild des Standard-Start-Bildschirmschoners in ein beliebiges Bild √§ndern. <br><br>  Dazu m√ºssen Sie: <br><br><ol><li>  FILESEXTRAPATHS_prepend - Verzeichnis f√ºr Ressourcen hinzuf√ºgen </li><li>  SRC_URI - F√ºgt eine Header-Datei mit einem beliebigen Bild hinzu </li><li>  SPLASH_IMAGES - Paketsteuervariable √§ndern </li></ol><br>  und weiter im Bildrezept "berserk-image.bb" ist es notwendig, das Splash-Startbild als die Merkmale des Bildes hinzuzuf√ºgen <br><br><pre> <code class="bash hljs">IMAGE_FEATURES += <span class="hljs-string"><span class="hljs-string">"splash"</span></span> <span class="hljs-comment"><span class="hljs-comment">#          SPLASH = "psplash-berserk"</span></span></code> </pre><br><a name="kernel_layer_koditv"></a><h2>  Zusammensetzung der Rezepte-Kernel </h2><br><pre> ‚îî‚îÄ‚îÄ Linux
     ‚îú‚îÄ‚îÄ Dateien
     ‚îÇ ‚îú db.txt.patch
     ‚îÇ ‚îî rbpi.cfg
     ‚îî‚îÄ‚îÄ linux-raspberrypi_4.9.bbappend
</pre><br><br>  wo: <br><br><ul><li>  db.txt.patch - Patch mit der Regulatory Domain-Basis (f√ºr WiFi verwendet) </li><li>  rbpi.cfg - Konfigurationsfragment des Linux-Kernels </li><li>  linux-raspberrypi_4.9.bbappend - Erweiterung des 4.9-Kernel-Build-Rezepts f√ºr Raspberry Pi </li></ul><br>  Wi-Fi-Ger√§te arbeiten mit bestimmten Frequenzen und f√ºr sie gibt es so etwas wie eine Regulierungsdom√§ne - dies ist der Parameter, der das Land angibt, in dem dieses Ger√§t arbeiten soll. <br><br>  Der Linux-Kernel verf√ºgt √ºber eine Begleitdatenbank, in der die zul√§ssigen Frequenzen und die f√ºr sie zul√§ssige Leistung f√ºr jedes Land registriert sind. <br><br>  Im einfachsten Fall kann diese Datenbank durch Angabe eines Parameters statisch direkt in den Kernel aufgenommen werden: <br>  <strong>CONFIG_CFG80211_INTERNAL_REGDB = y</strong> <br>  <strong>Genau</strong> das habe ich getan, indem ich einen Patch mit dieser Datenbank <strong>db.txt.patch verbunden habe</strong> <br><br>  Und noch etwas: In Yocto gibt es Fragmente von Kernelkonfigurationen.  Normalerweise enth√§lt ein Konfigurationsfragment, eine Datei mit der Erweiterung cfg, nur die Kernelparameter, die Sie f√ºr bestimmte Zwecke eindeutig ben√∂tigen.  Diese Konfiguration wird zu den Standardparametern hinzugef√ºgt, die bereits beim Erstellen des Kernels im Rezept vorhanden sind. <br><br>  Zus√§tzlich zum Rezept bbappend k√∂nnen Sie auch die Parameter √§ndern, die beim Start an den Kernel √ºbergeben werden: <br><br>  d.h.  Variable √ºberschreiben <br>  <strong>CMDLINE</strong> siehe Datei linux-raspberrypi_4.9.bbappend <br><br><div class="spoiler">  <b class="spoiler_title">rbpi.cfg Inhalt</b> <div class="spoiler_text"><pre> <code class="html hljs xml"> # use statically compiled regulatory rules database CONFIG_CFG80211_INTERNAL_REGDB=y #  Wifi  Asus USB-N53 chipset Ralink RT3572 CONFIG_RT2800USB=m #  wifi    Atheros D-Link DWA-126 802.11n (AR9271), # NetGear WNDA3200, NetGear WNA1100, TP-Link TL-WN722N (AR9271), # TL-WN322G v3, TL-WN422G  .. . cateee.net CONFIG_ATH9K_HW=m CONFIG_ATH9K_HTC=m #  Wifi    wpa_supplicant CONFIG_WIRELESS=y CONFIG_WEXT_CORE=y CONFIG_WEXT_PROC=y CONFIG_CRYPTO_AES=y #    IPSec,    Wifi  #   wpa_supplicant   CONFIG_CRYPTO_CCM=m CONFIG_CRYPTO_CTR=m CONFIG_CRYPTO_ARC4=m ######################### #   CONFIG_HAVE_PERF_EVENTS=y CONFIG_PERF_EVENTS=y CONFIG_HAVE_LATENCYTOP_SUPPORT=y CONFIG_LATENCYTOP=y # This option adds support for ASIX AX88xxx # based USB 2.0 10/100 Ethernet adapters. CONFIG_USB_NET_AX8817X=m</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"> linux-raspberrypi_4.9.bbappend</b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment">#      rpbi.cfg FILESEXTRAPATHS_prepend := "${THISDIR}/files:" SRC_URI += "file://db.txt.patch;patch=1 \ file://rbpi.cfg \ " #  BSP  meta-raspberrypi     # https://github.com/agherzan/meta-raspberrypi/issues/14 #    #   do_kernel_configme   #     arch/    do_kernel_configme_append() { cat ${WORKDIR}/rbpi.cfg &gt;&gt; ${WORKDIR}/defconfig } # CMDLINE for raspberrypi # default CMDLINE = "dwc_otg.lpm_enable=0 console=serial0,115200 # root=/dev/mmcblk0p2 rootfstype=ext4 rootwait" CMDLINE = "quiet dwc_otg.lpm_enable=0 console=serial0,115200 \ root=/dev/mmcblk0p2 rootfstype=ext4 rootwait"</span></span></code> </pre><br></div></div><br><a name="mediacentre_layer_koditv"></a><h3>  recipes-mediacentre </h3><br><pre> <code class="bash hljs">‚îú‚îÄ‚îÄ kodi ‚îÇ  ‚îú‚îÄ‚îÄ kodi ‚îÇ  ‚îú‚îÄ‚îÄ kodi_17.bbappend ‚îÇ  ‚îú‚îÄ‚îÄ kodi-dir.inc ‚îÇ  ‚îú‚îÄ‚îÄ kodi-runner.bb ‚îÇ  ‚îú‚îÄ‚îÄ kodi-settings.bb ‚îÇ  ‚îî‚îÄ‚îÄ kodi-version.inc ‚îî‚îÄ‚îÄ kodi-plugins ‚îú‚îÄ‚îÄ files ‚îú‚îÄ‚îÄ kodi-language-ru_3.0.10.bb ‚îú‚îÄ‚îÄ kodi-pvr-iptvsimple.bb ‚îú‚îÄ‚îÄ plugin-video-youtube_5.5.1.bb ‚îú‚îÄ‚îÄ screensaver-kodi-universe_0.1.2.bb ‚îú‚îÄ‚îÄ script-berserk-network_0.2.5.bb ‚îî‚îÄ‚îÄ script-module-requests_2.12.4.bb</code> </pre><br>  wo: <br><br><ol><li> kodi/ <br><ul><li> kodi ‚Äî    <strong>icon,run,settings</strong> <br>           </li><li> kodi_17.bbappend ‚Äî       Kodi </li><li> kodi-dir.inc ‚Äî    Kodi    </li><li> kodi-runner.bb ‚Äî   Kodi     </li><li> kodi-settings.bb ‚Äî     Kodi </li><li> kodi-version.inc ‚Äî        Kodi </li></ul><br></li><li> kodi-plugins/ <br><br><ul><li> files ‚Äî   tar.gz      </li><li> kodi-language-ru_3.0.10.bb ‚Äî     (  Kodi) </li><li> kodi-pvr-iptvsimple.bb ‚Äî   Kodi  pvr-iptvsimple </li><li> plugin-video-youtube_5.5.1.bb ‚Äî   Kodi    ¬´Youtube¬ª </li><li> screensaver-kodi-universe_0.1.2.bb ‚Äî    screensaver-kodi-universe </li><li> script-berserk-network_0.2.5.bb ‚Äî      </li><li> script-module-requests_2.12.4.bb ‚Äî      Youtube </li></ul><br></li></ol><br><a name="multimedia_layer_koditv"></a><h3>  recipes-multimedia </h3><br><pre>‚îî‚îÄ‚îÄ ffmpeg<font></font>
    ‚îú‚îÄ‚îÄ ffmpeg<font></font>
    ‚îÇ  ‚îú‚îÄ‚îÄ 0001-ffmpeg-Call-get_format-to-fix-an-issue-with-MMAL-ren.patch<font></font>
    ‚îÇ  ‚îú‚îÄ‚îÄ h264_parser.patch<font></font>
    ‚îÇ  ‚îî‚îÄ‚îÄ pfcd_hevc_optimisations.patch<font></font>
    ‚îî‚îÄ‚îÄ ffmpeg_3.1.11.bb<font></font>
</pre><br><br>  wo: <br><br><ul><li> 0001-ffmpeg-Call-get_format-to-fix-an-issue-with-MMAL-ren.patch ‚Äî   ffmpeg </li><li> h264_parser.patch ‚Äî     h264 </li><li> pfcd_hevc_optimisations.patch ‚Äî      Raspberry Pi </li><li> ffmpeg_3.1.11.bb ‚Äî    ffmpeg (,  ) </li></ul><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FFmpeg</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - OpenSource-Bibliothek zum Codieren / Decodieren einer Vielzahl von Video- und Audioformaten. </font><font style="vertical-align: inherit;">FFmpeg unterst√ºtzt fast 400 Codecs (ffmpeg-Codecs) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und √ºber 300 Formate (ffmpeg-Formate).</font></font><br><br><a name="build_kodi_koditv"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kodi Build Rezeptzusatz </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die OpenEmbedded-Ebene enth√§lt ein regul√§res Rezept zum Erstellen von Kodi, ist jedoch recht allgemein gehalten, und ich m√∂chte eine etwas stabilere und getestete Version f√ºr die Raspberry Pi-Plattform erhalten. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Softwareentwickler haben so etwas wie einen Reverse-Port-Patch. Die Software wird st√§ndig aktualisiert und jede neue Version enth√§lt sowohl neue Funktionen als auch die Korrektur bekannter Fehler. Mit dem Patch f√ºr die umgekehrte Portierung k√∂nnen Sie einige der √Ñnderungen in der neuen Version des Programms auf eine √§ltere Version √ºbertragen, wodurch es stabiler wird. Dies ist jedoch eine sehr harte und sorgf√§ltige Arbeit, die immer von einer gro√üen Anzahl von Entwicklern ausgef√ºhrt wird.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In der Welt der OpenSource-Community gibt es mehrere bekannte Projekte mit Kodi, von denen das beste (meiner Meinung nach) LibreElec (OpenElec) ist. </font><font style="vertical-align: inherit;">LibreElec hat einen guten Build f√ºr die Raspberry Pi-Plattform. </font><font style="vertical-align: inherit;">Hier haben sie es und es ist am besten, den Reverse-Port-Patch f√ºr Kodi zu nehmen. </font><font style="vertical-align: inherit;">So k√∂nnen Sie eine Vielzahl von Problemen loswerden, ohne etwas dar√ºber zu lernen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Kodi Multimedia Center konzentriert sich auf die Wiedergabe des "Medien" -Kontexts, und meiner Meinung nach ist die Kombination von Kodi und FFmpeg, d. H. </font><font style="vertical-align: inherit;">Durch die Interaktion bestimmter Versionen dieser Programme k√∂nnen andere Bibliotheken aus den Ebenen Yocto und OpenEmbedded belassen werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr die Montage habe ich die stabile Version von Kodi 17.6 und die Version FFmpeg 3.1.11 verwendet</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs">  ,       ,      systemD.         (   (  )).  ,     LibreElec       : <span class="hljs-comment"><span class="hljs-comment">#!/bin/bash HASH_VER="934507d922fb011ce46c76566206f2f1f603360b" git clone https://github.com/LibreELEC/LibreELEC.tv.git libreelec cd libreelec git checkout ${HASH_VER}   Kodi,   : projects/RPi2/patches/kodi (. : kodi-001-backport.patch)    FFmpeg,   : packages/multimedia/ffmpeg/patches</span></span></code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die mitgelieferte Versionsbeschreibungsdatei </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lautet kodi-version.inc</font></font></strong> <br><br><pre> <code class="bash hljs">FILESEXTRAPATHS_prepend := <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${THISDIR}</span></span></span><span class="hljs-string">/kodi:"</span></span> <span class="hljs-comment"><span class="hljs-comment">#  Krypton SRCREV = "a9a7a20071bfd759e72e7053cee92e6f5cfb5e48" PV = "17.6+gitr${SRCPV}"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der von mir in Betracht </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">gezogene</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zweig Yocto und OpenEmbedded - </font><strong><font style="vertical-align: inherit;">rocko</font></strong><font style="vertical-align: inherit;"> - enth√§lt Kodi Version 17.3. Um ein Upgrade auf Version 17.6 durchzuf√ºhren, f√ºgen Sie dem Rezept einfach eine kleine Erg√§nzung hinzu - </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kodi_17.bbappend</font></font></strong> <br><br><pre> <code class="bash hljs">require kodi-version.inc <span class="hljs-comment"><span class="hljs-comment">#     (   17.3) SRC_URI_remove = "file://0013-FTPParse.cpp-use-std-string.patch" #  ,   systemd   SRC_URI_remove = "file://0004-handle-SIGTERM.patch" #      RPI   libreelec SRC_URI_append += "file://kodi-krypton-rpb-backports.patch" #  error adding symbols: DSO missing from command line SRC_URI_append += "file://vchostif.patch" MENU_ICON = "addons/skin.estuary/media/icons/settings" #       ( ) SRC_URI_append += "file://bs-menu.patch file://icon/bs-network.png" do_configure_prepend() { install -m 0644 ${WORKDIR}/icon/bs-network.png ${S}/${MENU_ICON} } #    kodi plugins RRECOMMENDS_${PN}_append = "\ python-xml python-misc python-db \ python-crypt python-threading python-math python-email \ python-io python-netserver python-urllib3 python-datetime" #     Raspberry Pi #  OPENGL    --enable-gles #  kodi     docs/README.linux =&gt; libxmu libxinerama # libxtst xdpyinfo #      DISTRO_FEATURES   "x11" #   kodi  RPI1  RPI2,3    --disable-x11 BS_RPI = " --disable-gl --enable-openmax --enable-player=omxplayer \ --with-platform=raspberry-pi --disable-x11" BS_RPI3 = " --disable-gl --enable-openmax --enable-player=omxplayer \ --with-platform=raspberry-pi2 --disable-x11" EXTRA_OECONF_append = "${@bb.utils.contains('MACHINE', 'raspberrypi', \ '${BS_RPI}', '', d)}" EXTRA_OECONF_append = "${@bb.utils.contains('MACHINE', 'raspberrypi2', \ '${BS_RPI3}', '', d)}" EXTRA_OECONF_append = "${@bb.utils.contains('MACHINE', 'raspberrypi3', \ '${BS_RPI3}', '', d)}" #       Kodi   #  ,  USB  microSDHC  ( ) EXTRA_OECONF_append = " --enable-optical-drive"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit der Build-Option "--enable-optisches Laufwerk" k√∂nnen Sie den praktischen Benachrichtigungsmechanismus verbinden, den Kodi beim Anschlie√üen einer optischen Festplatte verwendet. </font><font style="vertical-align: inherit;">In diesem Fall √ºberwacht das MediaManager-Modul (a) (xbmc / storage / MediaManager.cpp) das Verbinden / Trennen neuer Festplattenpartitionen und zeigt eine Popup-Meldung dazu an. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel f√ºr das Anschlie√üen / Trennen von Laufwerken:</font></font><br><br><pre> <code class="bash hljs">ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> ENV{ID_FS_TYPE}==<span class="hljs-string"><span class="hljs-string">"vfat"</span></span> \ KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mkdir -p /media/%k"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mount -o iocharset=utf8,noatime /dev/%k /media/%k"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> ENV{ID_FS_TYPE}==<span class="hljs-string"><span class="hljs-string">"ntfs"</span></span> \ KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mkdir -p /media/%k"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/usr/bin/ntfs-3g -o \ iocharset=utf8,noatime,windows_names /dev/%k /media/%k"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> ENV{ID_FS_TYPE}==<span class="hljs-string"><span class="hljs-string">"ext2|ext3|ext4"</span></span> \ KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mkdir -p /media/%k"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/mount -o noatime /dev/%k /media/%k"</span></span> ACTION==<span class="hljs-string"><span class="hljs-string">"remove"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"block"</span></span> KERNEL==<span class="hljs-string"><span class="hljs-string">"sd[az][0-9]"</span></span> \ RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/umount /media/%k"</span></span>, RUN+=<span class="hljs-string"><span class="hljs-string">"/bin/rmdir /media/%k"</span></span></code> </pre><br><pre> <code class="html hljs xml">:  rmdir     ,       ( Linux    -  )       .</code> </pre><br><a name="add_menu_koditv"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hinzuf√ºgen eines neuen Elements zum Kodi-Einstellungsmen√º </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In Kodi 17.6 sind XML-Konfigurationsdateien f√ºr die Anzeige von Men√ºelementen verantwortlich. </font><font style="vertical-align: inherit;">Um ein weiteres Element im Men√º "Einstellungen" hinzuzuf√ºgen, passen Sie einfach die Datei an: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kodi / addons / skin.estuary / xml / Settings.xml </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wobei skin.estuary das Standarddesign f√ºr das Men√ºdesign ist. Die Elementbeschreibung </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sieht folgenderma√üen aus:</font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;item&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;label&gt; $ LOCALIZE [13279] &lt;/ label&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;onclick&gt; RunAddon (script.berserk.network, butnetwork) &lt;/ click&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    &lt;icon&gt; icons / settings / bs-network.png &lt;/ icon&gt;</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
&lt;/ item&gt;</font></font><font></font>
</pre><br><br>  wo: <br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">label</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Name des </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Men√ºelements onclick</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Behandlung des Ereignisses des Dr√ºckens der </font><strong><font style="vertical-align: inherit;">Men√ºschaltfl√§che</font></strong></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Starten des Plugins, wobei das erste Argument die Zeichenfolge "butnetwork" √ºbergibt) </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Symbol</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Symbol des </font><font style="vertical-align: inherit;">Men√ºelements </font><font style="vertical-align: inherit;">(Pfad zum PNG-Bild) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die oben genannte Funktionalit√§t sowie das Verbinden mehrerer zus√§tzlicher Kodi-Plugins sind in integriert Verwenden der Datei bs-menu.patch</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein- / Ausblenden</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> diff -Naur a/addons/skin.estuary/xml/Settings.xml b/addons/skin.estuary/xml/Settings.xml --- a/addons/skin.estuary/xml/Settings.xml 2018-02-01 18:17:45.000000000 +0300 +++ b/addons/skin.estuary/xml/Settings.xml 2018-03-08 12:06:50.000000000 +0300 @@ -134,6 +134,11 @@ &lt;icon&gt;icons/settings/interface.png&lt;/icon&gt; &lt;/item&gt; &lt;item&gt; + &lt;label&gt;<span class="hljs-variable"><span class="hljs-variable">$LOCALIZE</span></span>[13279]&lt;/label&gt; + &lt;onclick&gt;RunAddon(script.berserk.network,butnetwork)&lt;/onclick&gt; + &lt;icon&gt;icons/settings/bs-network.png&lt;/icon&gt; + &lt;/item&gt; + &lt;item&gt; &lt;label&gt;<span class="hljs-variable"><span class="hljs-variable">$LOCALIZE</span></span>[20077]&lt;/label&gt; &lt;onclick&gt;ActivateWindow(SkinSettings)&lt;/onclick&gt; &lt;icon&gt;icons/settings/skin.png&lt;/icon&gt; diff -Naur a/system/addon-manifest.xml b/system/addon-manifest.xml --- a/system/addon-manifest.xml 2018-03-07 15:58:24.000000000 +0300 +++ b/system/addon-manifest.xml 2018-05-14 14:06:58.000000000 +0300 @@ -27,6 +27,7 @@ &lt;addon&gt;resource.uisounds.kodi&lt;/addon&gt; &lt;addon&gt;screensaver.xbmc.builtin.black&lt;/addon&gt; &lt;addon&gt;screensaver.xbmc.builtin.dim&lt;/addon&gt; + &lt;addon&gt;screensaver.kodi.universe&lt;/addon&gt; &lt;addon&gt;script.module.pil&lt;/addon&gt; &lt;addon&gt;service.xbmc.versioncheck&lt;/addon&gt; &lt;addon&gt;skin.estuary&lt;/addon&gt; @@ -43,4 +44,8 @@ &lt;addon&gt;xbmc.python&lt;/addon&gt; &lt;addon&gt;xbmc.webinterface&lt;/addon&gt; &lt;addon optional=<span class="hljs-string"><span class="hljs-string">"true"</span></span>&gt;peripheral.joystick&lt;/addon&gt; + &lt;addon&gt;script.berserk.network&lt;/addon&gt; + &lt;addon&gt;resource.language.ru_ru&lt;/addon&gt; + &lt;addon&gt;script.module.requests&lt;/addon&gt; + &lt;addon&gt;plugin.video.youtube&lt;/addon&gt; &lt;/addons&gt;</code> </pre><br></div></div><br><a name="max_set_video_koditv"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Maximale Puffereinstellungen f√ºr Video </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Um die Leistung zu maximieren, k√∂nnen Sie im Kodi Multimedia Center die maximalen Puffereinstellungen festlegen: </font></font><br><br><pre> <code class="bash hljs">&lt;advancedsettings&gt; &lt;cache&gt; &lt;buffermode&gt;1&lt;/buffermode&gt; &lt;memorysize&gt;139460608&lt;/memorysize&gt; &lt;readfactor&gt;20&lt;/readfactor&gt; &lt;/cache&gt; &lt;/advancedsettings&gt;</code> </pre><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">buffermode = 1</font></font></strong> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - Pufferanforderungen f√ºr alle Dateisysteme (einschlie√ülich lokaler) </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lesefaktoren</font></font></strong> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font><strong><font style="vertical-align: inherit;">Passt</font></strong><font style="vertical-align: inherit;"> die Download-Geschwindigkeit basierend auf der durchschnittlichen Video-Bitrate an. </font><font style="vertical-align: inherit;">Wenn Sie beispielsweise ein Video mit einer durchschnittlichen Daten√ºbertragungsrate von 5 Mbit / s </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abspielen </font><font style="vertical-align: inherit;">und das </font><font style="vertical-align: inherit;">Pufferleseverh√§ltnis </font><font style="vertical-align: inherit;">auf 2,0 einstellen, wird die Download-Geschwindigkeit (und damit die Cache-F√ºllrate) auf etwa 10 Mbit / s begrenzt, also: </font><font style="vertical-align: inherit;">readfactor = 20 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hebt die Einschr√§nkung der Download-Geschwindigkeit auf. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memorysize</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = 139460608 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- die Puffergr√∂√üe betr√§gt 133 MB, w√§hrend 133 * 3 RAM verwendet wird, d.h. </font><font style="vertical-align: inherit;">ca. 400 MB RAM</font></font><br><br><a name="iptv_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fernsehen √ºber IPTV </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodi Media Center ist ein sehr leistungsf√§higes Tool zum Anzeigen digitaler Inhalte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Hauptfunktion, f√ºr die ich "Media Center" gesammelt habe, ist die Funktion des digitalen Fernsehens mit IPTV (Internet Protocol Television), d. H. Fernsehen √ºber das Internetprotokoll. Mit dieser Funktion k√∂nnen Sie von Ihrem Internetanbieter aus digitales Fernsehen schauen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dies ist die modernste und optimalste Option sowohl hinsichtlich der Bildqualit√§t als auch hinsichtlich zus√§tzlicher Merkmale, d.h. erbrachte Dienstleistungen. Beispielsweise k√∂nnen Fernsehkan√§le im Archiv bereitgestellt werden, in denen die gew√ºnschte Videoaufzeichnung einige Zeit nach der Ausstrahlung verf√ºgbar ist. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um IPTV in Kodi zu unterst√ºtzen, gibt es mehrere Plugin-Optionen, von denen ich mich f√ºr das Plugin entschieden habe</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pvr.iptvsimple</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verwenden Sie das Rezept, um das Plugin zu erstellen:</font></font><br><br><pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">    ‚îî‚îÄ‚îÄ Kodi-Plugins</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        ‚îî‚îÄ‚îÄ kodi-pvr-iptvsimple.bb</font></font><font></font>
</pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Plug-In ist verbunden √ºber: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodi-Hauptmen√º =&gt; "Add-Ons" =&gt; "Meine Add-Ons" =&gt; "PVR-Clients" =&gt; "PVR IPTV Simple Client" </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um den Betrieb des IPTV-Fernsehens als Teil von Kodi zu √ºberpr√ºfen, habe ich mehrere √∂ffentliche Nachrichtensender verwendet und f√ºgte sie der Liste im m3u8-Format hinzu und aktivierte auch den automatischen Start des Plugins ‚Äûpvr.iptvsimple‚Äú zu Beginn des Media Centers.</font></font><br><br><a name="youtube_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Youtube mit dem Kodi Plugin ansehen </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Programmierer, die Kodi entwickelten, boten die Flexibilit√§t, seine Funktionen zu erweitern. </font><font style="vertical-align: inherit;">Dies geschieht, damit jeder Enthusiast auf Wunsch Kodi hinzuf√ºgen kann, was er wirklich braucht. </font><font style="vertical-align: inherit;">Und diese Plugins f√ºr Kodi sind Dunkelheit.</font></font> Nun, du verstehst, worum es geht.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt so viele von ihnen, dass es eine Beschreibung in einem separaten Artikel verdient. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Plugins werden sehr einfach installiert. Verbinden Sie Kodi einfach mit dem Internet und dr√ºcken Sie einige Tasten im Men√º. Sie k√∂nnen dar√ºber in allen Foren lesen, die Kodi gewidmet sind. Aber die Assembly, da ist die Assembly, und ich werde ein weiteres Plugin als Beispiel in das Distributionskit aufnehmen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das meiner Meinung nach interessanteste und am weitesten verbreitete Plugin (Ohm) f√ºr Kodi ist das Youtube View Plugin. Kodi ist ein Multimedia-Center, und Youtube ist das gr√∂√üte Repository f√ºr diese Multimedia-Inhalte. Daher ist das Youtube-Plug-In f√ºr Kodi fast obligatorisch. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Plugin ist in Python geschrieben. Dies ist ein regul√§rer Plug-In-Mechanismus. Sie m√ºssen nichts kompilieren. Kopieren Sie einfach das fertige Plug-In mit den Plug-Ins in das Stammverzeichnis und geben Sie den Namen des Plug-Ins in der XML-Manifestdatei an:</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"System / addon-manifest.xml" </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Plugin stammt aus dem offiziellen Repository und sein Quellcode ist im Archiv enthalten: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rezepte-Medienzentrum / Kodi-Plugins / Dateien / Plugin.video.youtube.tar.gz Die </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Position des Plugin-Build-Rezepts finden Sie oben Kapitel "Rezept-Medienzentrum Komposition"</font></font><br><br><a name="bsnet_layer_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Konsolen-Shell-Netzwerkkonfigurationserweiterung </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da es sich bei dem im Rahmen dieses Artikels zusammengestellten Distributionskit um eine Demo handelt, sind die Anforderungen f√ºr die Einrichtung von ‚ÄûNetzwerkschnittstellen‚Äú minimal. </font><font style="vertical-align: inherit;">Ich wollte daf√ºr keinen schweren Netzwerkmanager ziehen, was f√ºr mich sehr unverst√§ndlich und sehr umst√§ndlich war, und deshalb habe ich zwei Shell-Skripte geschrieben, die die Konfiguration des regul√§ren Konfigurationsmechanismus erg√§nzen:</font></font><br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">############################################################## #     /etc/network/interfaces: ############################################################## auto eth0 iface eth0 inet manual up /etc/network/eth-manual $IFACE up down /etc/network/eth-manual $IFACE down auto wlan0 iface wlan0 inet manual up /etc/network/wlan $IFACE up down /etc/network/wlan $IFACE down</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um Ethernet / WLAN-Netzwerkschnittstellen bequem √ºber die GUI zu konfigurieren, verwende ich ein weiteres kleines Kodi-Plugin ‚Äûscript.berserk.network‚Äú. </font><font style="vertical-align: inherit;">Dies ist fast das einzige Kodi-Plugin, das ich herausgefunden habe, aber daf√ºr musste ich es schreiben. </font><font style="vertical-align: inherit;">Es ist extrem kompakt und minimalistisch und in der Python-Sprache geschrieben. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beide Komponenten werden nach Rezepten gesammelt:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rezepte-Berserker / bs-net / bs-net_0.1.3.bb </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rezepte-Medienzentrum / Kodi-Plugins / script-berserk-network_0.2.5.bb </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An dieser Stelle m√∂chte ich auf die Details eingehen. </font><font style="vertical-align: inherit;">Die ganze Flexibilit√§t bei der Verwendung von Yocto liegt also in verschiedenen Rezepten, d.h. </font><font style="vertical-align: inherit;">Verbunden Sie einen Satz von Rezepten - der einfachste Netzwerkmanager wurde zum Verteilungskit hinzugef√ºgt, ein anderer Satz verbunden - f√ºgte Ihren bevorzugten Netzwerkmanager hinzu, indem Sie beispielsweise systemD usw. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um beim Systemstart automatisch eine Verbindung zu einem WiFi-Zugangspunkt herzustellen, verwende ich die udev-Regel: /etc/udev/rules.d/80-wifi-start.rules</font></font><br><br><pre> <code class="bash hljs">SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"net"</span></span>, ACTION==<span class="hljs-string"><span class="hljs-string">"add"</span></span>, DRIVERS==<span class="hljs-string"><span class="hljs-string">"?*"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"wlan*"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/etc/network/wlan-runner </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$env</span></span></span><span class="hljs-string">{INTERFACE} up"</span></span> SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"net"</span></span>, ACTION==<span class="hljs-string"><span class="hljs-string">"remove"</span></span>, DRIVERS==<span class="hljs-string"><span class="hljs-string">"?*"</span></span>, KERNEL==<span class="hljs-string"><span class="hljs-string">"wlan*"</span></span>, \ RUN+=<span class="hljs-string"><span class="hljs-string">"/etc/network/wlan-runner </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$env</span></span></span><span class="hljs-string">{INTERFACE} down"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das WLAN-Runner-Skript f√ºhrt einfach die folgenden Befehle aus: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / network / wlan $ IFACE up</font></font><br>  oder <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> / etc / network / wlan $ IFACE down </font></font><br><br><a name="distrib_recipe_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verteilungserstellungsrezept </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Yocto-Projekt verf√ºgt √ºber einen Wiederverwendungsmechanismus. Es gibt Klassen, von denen Sie erben k√∂nnen (Direktive "erben"), und es gibt grundlegende Rezepte, die Sie verbinden k√∂nnen (Direktive "include"). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich werde die Vererbung anhand des Klassenbeispiels zeigen: </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">poky / meta / clasess / core-image.bbclass</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Klasse ist daf√ºr verantwortlich, die Gruppen von Paketen zu beschreiben, die Sie in ein bestimmtes Rezept aufnehmen k√∂nnen. Zu diesem Zweck reicht es aus, die Konstruktion am Anfang des Rezepts anzugeben: </font></font><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kernbild erben</font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Selbst im Text dieser Klasse k√∂nnen Sie die Merkmale des Bildes sehen. Jedes Merkmal ist f√ºr eine Gruppe von Funktionen verantwortlich, die im Bild enthalten sind, und jede Gruppe beschreibt letztendlich eine Reihe installierter Programme oder Bibliotheken. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Merkmale des Bildes werden wie folgt angezeigt:</font></font><br><br><pre> <code class="bash hljs">IMAGE_FEATURES += <span class="hljs-string"><span class="hljs-string">"ssh-server-dropbear splash"</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt auch DISTRO_FEATURES - Verteilungsfunktionen, die in der Layer-Konfigurationsdatei angegeben werden k√∂nnen. </font><font style="vertical-align: inherit;">Dies sind Funktionen auf Verteilungsebene. Wenn Sie beispielsweise eine Funktion √§ndern (z. B. x11), werden in der nachfolgenden Assembly alle Pakete wieder zusammengesetzt, die von dieser Option abh√§ngen (dies kann ziemlich lange dauern). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das grundlegende Grundrezept, das ich verwende, ist: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">poky / meta / prescription-core / images / core-image-minimal.bb</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Image Build Rezept</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> <span class="hljs-comment"><span class="hljs-comment"># Project: "Berserk" - build Kodi for the Raspberry Pi platform # license - The MIT License (MIT) DESCRIPTION = "Berserk - the image for the Raspberry PI" LICENSE = "MIT" MD5_SUM = "md5=0835ade698e0bcf8506ecda2f7b4f302" LIC_FILES_CHKSUM = "file://${COMMON_LICENSE_DIR}/MIT;${MD5_SUM}" IMAGE_FEATURES += "ssh-server-dropbear splash" #    rootfs    (250000kB=~250Mb) IMAGE_ROOTFS_EXTRA_SPACE_append += "+ 250000" # Base this image on core-image-minimal include recipes-core/images/core-image-minimal.bb # Set default password for 'root' user inherit extrausers ROOTUSERNAME = "root" ROOTPASSWORD = "berserk" EXTRA_USERS_PARAMS = "usermod -P ${ROOTPASSWORD} ${ROOTUSERNAME};" #  ,      SPLASH = "psplash-berserk" BS_DEBUG_TOOLS = "ldd strace ltrace" BS_GLIBC = "glibc-thread-db \ glibc-gconv-utf-16 \ glibc-gconv-utf-32 \ glibc-binary-localedata-en-us \ glibc-binary-localedata-ru-ru \ glibc-charmap-utf-8 \ " BS_BASE = "kernel-modules \ lsb \ pciutils \ parted \ tzdata \ dosfstools \ ntp \ ntpdate \ e2fsprogs-resize2fs \ ntfs-3g \ ntfsprogs \ " BS_WLAN = "kernel-module-rt2800usb \ kernel-module-rt2800lib \ kernel-module-rt2x00lib \ kernel-module-rt2x00usb \ kernel-module-cfg80211 \ kernel-module-nls-utf8 \ kernel-module-ath9k-common \ kernel-module-ath9k-hw \ kernel-module-ath9k-htc \ kernel-module-ctr \ kernel-module-ccm \ kernel-module-arc4 \ " BS_WIFI_SUPPORT = " \ iw \ dhcp-client \ wireless-tools \ wpa-supplicant \ linux-firmware \ " BS_SOFT = "mc \ kodi \ kodi-runner \ kodi-settings \ kodi-language-ru \ kodi-pvr-iptvsimple \ bs-net \ tv-config \ first-run \ script-berserk-network \ screensaver-kodi-universe \ plugin-video-youtube \ script-module-requests \ " # Include modules in rootfs IMAGE_INSTALL += " \ ${BS_BASE} \ ${BS_WLAN} \ ${BS_WIFI_SUPPORT} \ ${BS_GLIBC} \ ${BS_SOFT} \ ${BS_DEBUG_TOOLS} \ "</span></span></code> </pre><br></div></div><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich m√∂chte klarstellen, dass </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">das Kernel-Modul-</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Paket beispielsweise </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">alle in der defconfig-Datei angegebenen </font><strong><font style="vertical-align: inherit;">Kernel-Module</font></strong><font style="vertical-align: inherit;"> in das Distributions-Image </font><font style="vertical-align: inherit;">installiert </font><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie jedoch etwas stark anpassen, ben√∂tigen Sie m√∂glicherweise nicht einmal alle Kernelmodule. In diesem Fall ist es praktisch, jedes Modul nach Namen hinzuzuf√ºgen, wie in der Variablen </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BS_WLAN angegeben</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es ist wie ein Spickzettel. </font><strong><font style="vertical-align: inherit;">Geben</font></strong><font style="vertical-align: inherit;"> Sie nur das an, was Sie ben√∂tigen, und √ºberpr√ºfen Sie nach √úberpr√ºfung des Pakets "Kernel-Module" entfernen, pr√ºfen usw.</font></font><br><br><a name="instruction_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Eine kurze Anleitung zum Erstellen eines Verteilungsimages </font></font></h2><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1) Installieren Sie die Yocto Project-Abh√§ngigkeiten in Ubuntu:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> sudo apt-get install -y --no-install-suggests --no-install-recommends \ gawk wget git-core diffstat unzip texinfo gcc-multilib build-essential \ chrpath socat cpio python python3 python3-pip python3-pexpect \ xz-utils debianutils iputils-ping python3-git python3-jinja2 \ libegl1-mesa libsdl1.2-dev xterm</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2) Laden Sie Repo herunter und installieren Sie es:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> mkdir ~/bin curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo chmod a+x ~/bin/repo</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3) Laden Sie das Projekt von github herunter:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> PATH=<span class="hljs-variable"><span class="hljs-variable">${PATH}</span></span>:~/bin mkdir torvin <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> torvin repo init -u https://github.com/berserktv/bs-manifest \ -m raspberry/rocko/torvin-0.2.5.xml repo sync</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4) Erstellen Sie das Projekt:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs"> ./shell.sh bitbake berserk-image</code> </pre><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5) Schreiben Sie das Verteilungsbild auf die Speicherkarte:</font></font></b> <div class="spoiler_text"><blockquote>         <br> torvin/build/tmp/deploy/images/raspberrypi3 <br><br>      <br>     : <br> berserk-image-raspberrypi3.rpi-sdimg <br><br> c       <br> c      UTC <br><br>        dd <br><br> : <br>       ¬´microSDHC¬ª <br>      . <br><br> $ sudo bash <br> $ cd torvin/build/tmp/deploy/images/raspberrypi3 <br> $ dd if=berserk-image-raspberrypi3.rpi-sdimg of=/dev/sdX bs=1M <br> $ sync <br><br>  /dev/sdX: <br> X   a,b,c  .. <br>        <br><br>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">:</a> <br>     Windows,    <br>  Win32 Disk Imager  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">:</a> <br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">:</a> <br></blockquote><br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hinweis:</font></font></b> <div class="spoiler_text"><pre> <code class="bash hljs">             N      ,      <span class="hljs-string"><span class="hljs-string">""</span></span>          ,    git  (..         <span class="hljs-string"><span class="hljs-string">""</span></span>)   :  - Intel(R) Core(TM) i5-3570 CPU @ 3.40GHz  - 8    -  USB-3.0 1T   - 4  05    - 1     - 274.8 M   torvin/build    (cache ,   ,   ,  ,   ,    ..) -   42    torvin/downloads -  9.1  (git    tar.gz )  rootfs   - 550     /lib/firmware - 212  /lib/modules - 53  :        firmware (   )       ,   200 </code> </pre><br></div></div><br><a name="postscriptum_koditv"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nachtrag </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die F√§higkeiten von OpenSource in den letzten Jahren nehmen nur noch zu. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aber diese M√∂glichkeiten sind nicht gering, zum Beispiel m√ºssen Sie nicht einmal weit gehen. Es ist unwahrscheinlich, dass dasselbe "Microsoft" erwartet, dass die OpenSource-Technologie es vom Markt f√ºr mobile Betriebssysteme verdr√§ngt. Ich meine das Betriebssystem von Google - "Android", das √ºber Nacht den "Pionier" mobiler Systeme an den Rand gedr√§ngt hat. Und es ist nicht klar, ob Microsoft wieder darauf zur√ºckgreifen kann. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nat√ºrlich "Google", ein riesiges Unternehmen mit nahezu unbegrenzten Finanzen und exzellenten Entwicklern, aber dennoch, wie sie sagen "ohne den Kern und nicht hier und da". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die besten OpenSource-Projekte werden im Laufe der Zeit zu einem Kunstwerk (z. B. Kodi, Openelec / libre usw.)</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Und heute kann jeder sozusagen an den Best Practices in OpenSource teilnehmen, ohne aus Github (a) herauszukriechen. </font><font style="vertical-align: inherit;">Dieser Artikel handelt davon. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Haben Sie viele gute und unterschiedliche Baugruppen f√ºr sich und denken Sie daran, dass "die Welt des Internets der Dinge kommt".</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467443/">https://habr.com/ru/post/de467443/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467427/index.html">BudgetTracker - ein weiteres Open-Source-Tool f√ºr die pers√∂nliche Finanzbuchhaltung</a></li>
<li><a href="../de467429/index.html">Habrastatistik: Erkundung der am meisten und am wenigsten besuchten Abschnitte der Website</a></li>
<li><a href="../de467435/index.html">Wir senden Berichte von Veeam Agent Linux per Post oder per Telegramm</a></li>
<li><a href="../de467437/index.html">MVCC in PostgreSQL-1. Isolierung</a></li>
<li><a href="../de467439/index.html">Warum ist Vinyl zur√ºckgekommen und wie h√§ngen Streaming-Dienste damit zusammen?</a></li>
<li><a href="../de467445/index.html">Schwer fassbare Liste der installierten Windows-Updates</a></li>
<li><a href="../de467449/index.html">Erkennung von Schwachstellen und Bewertung der Resistenz gegen Hackerangriffe von Smartcards und Kryptoprozessoren mit integriertem Schutz</a></li>
<li><a href="../de467453/index.html">L√∂sung des Problems der Nummer 42 mit einem planetaren Supercomputer</a></li>
<li><a href="../de467455/index.html">QBS-Vorlage zum Programmieren von Mikrocontrollern in QtCreator am Beispiel von Milander-Controllern</a></li>
<li><a href="../de467457/index.html">Der Weg von der Operation zum Spieleentwickler oder die ersten Erfahrungen mit der mobilen Entwicklung auf Unity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>