<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🚒 👩🏿‍🎨 ♊️ Smart Home - kontrol suara dalam tiga langkah. Raspberry + HomeKit 🆓 ㊙️ 🤰🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dear teman-teman! 

 Kami memutuskan untuk berbagi dengan Anda solusi siap pakai anggaran, kami harap Anda akan menghargai upaya kami. Solusinya terbu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Smart Home - kontrol suara dalam tiga langkah. Raspberry + HomeKit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476540/">  Dear teman-teman! <br><br>  Kami memutuskan untuk berbagi dengan Anda solusi siap pakai anggaran, kami harap Anda akan menghargai upaya kami.  Solusinya terbukti, bekerja.  Di lampiran, Anda dapat mengunduh semua file dan pengaturan program.  Kami memberikan semuanya secara gratis. <br><br>  Rumah pintar untuk pelanggan pada dasarnya adalah "mainan" yang bisa Anda banggakan kepada teman-teman Anda, tetapi game-game ini tidak sepadan dengan usaha kecil para integrator! <br><br>  Ini akan tentang beberapa masalah dan solusi yang terkait dengan pencahayaan di rumah, sebagai unit integral dari "rumah pintar". <br><br>  <b>Masalah 1:</b> Jika sistem terpusat, maka jika terjadi kegagalan pengontrol pusat, program tidak dapat mengontrol relai penyalaan. <br><br>  <b>Solusi</b> : Gunakan modul kontrol terdistribusi dengan logika internal, dalam pengalaman kami, salah satu perangkat yang paling terbukti dalam hal ini adalah PR200 yang dapat diprogram yang diproduksi oleh OWEN.  Kami merekomendasikan menggunakan versi 220v, sebagai  sakelar rumah tangga dirancang khusus untuk voltase ini dan akan ada lebih sedikit masalah dengan "unit" logis pada input digital. <br><br><img src="https://sun9-34.userapi.com/c858324/v858324590/e2770/z4ovfGWcOog.jpg" alt="gambar"><br><br>  Perangkat ini memiliki 8 saluran (relay) yang dapat diprogram menggunakan logika internal (sebagai sistem terdistribusi), tambahan modul ekspansi 2 pcs juga terhubung.  8 saluran masing-masing, tetapi ada risiko dibiarkan tanpa luminer yang lebih terkontrol ketika PR200 sendiri gagal (8 saluran versus 24), jika Anda berencana untuk menyelamatkan, pikirkan! <br><br><img src="https://sun9-24.userapi.com/c858324/v858324590/e2781/5Bbfamak_2o.jpg" alt="gambar"><br><br>  Terlepas dari kenyataan bahwa program tersebut terlihat sederhana, kami melakukannya selama beberapa tahun bukan karena kesalahan kami sendiri, perusahaan Aries relatif baru-baru ini (setelah kemunculan PR200) ​​menambahkan kemampuan untuk mengelola variabel jaringan baik dari luar maupun dari dalam. <br><a name="habracut"></a><br>  Lebih lanjut tentang program ini: <br><br>  I8 adalah input digital dengan 8 switch di rumah atau kamar <br><br>  RTRIG - detektor depan, diperlukan untuk pembentukan impuls tunggal (per siklus program) <br><br>  KE INT - konversi Bool ke INT dapat ditiadakan, tetapi variabel jaringan Slave di Owen Logic tidak mendukung bool. <br><br>  XOR - eksklusif atau, jika pada satu input 1, maka output 1, jika kedua input berlaku 1 output akan diatur ulang, elemen program utama yang memutuskan untuk menyalakan atau mematikan lampu dengan menekan sakelar. <br><br>  Relay8 adalah variabel jaringan input dan output, seperti yang saya katakan di atas, baru-baru ini kita dapat menggunakan dua variabel ini dengan satu register Modbus (alamat), ini memungkinkan kita untuk menyimpan keadaan yang diperlukan baik di luar maupun di dalam tanpa menggunakan pemicu yang berbeda.  Variabel-variabel jaringan ini memiliki memori yang tidak mudah menguap, jadi ketika tegangan melonjak, pencahayaan akan kembali ke keadaan terakhir. <br><br>  TO BOOL - konversikan nilai INT ke BOOL, karena relay output memiliki status False / True. <br><br>  <b>Langkah 1</b> : program untuk 8 saluran dapat diunduh dari tautan di akhir artikel dan diunggah ke relai yang dapat diprogram, jangan lupa untuk mengubah platform target untuk versi PR200 / 110 Anda, jika tidak, perangkat akan gagal mem-flash! <br><br>  <b>Masalah 2:</b> sakelar rumah tangga standar memiliki keadaan hidup atau mati, yang secara fundamental bertentangan dengan logika kontrol pencahayaan di rumah pintar, kita perlu tombol tanpa memperbaiki (dengan pegas). <br><br>  <b>Solusi 1:</b> Gunakan tombol yang sudah jadi tanpa memperbaiki, yang tersedia untuk sebagian besar produsen sakelar seperti Shneider, Biticino, ABB, dll. (Solusi yang disarankan, meskipun tombol berada di posisi yang sama dan lampu menyala dan mati, terlihat indah secara estetika) <br><br>  <b>Solusi 2:</b> Tangkap PR200 / 110 perubahan dalam kondisi input saat menggunakan saklar rumah tangga biasa dengan kait dan kemudian kirim pulsa ke program yang Anda unduh di atas, jika lampu menyala, itu akan padam dan sebaliknya (tidak disarankan, karena setelah beberapa saat semua tombol akan menjadi tercampur-aduk) <br><br>  <b>Masalah 3:</b> tingkat atas sebagian besar produsen sistem rumah pintar tidak mencapai kesempurnaan estetika dan fungsional. <br><br>  Solusi: kami menggunakan HomeKit Apple, yang: fungsional, nyaman dan memiliki kontrol suara. <br><br>  <b>Langkah 2:</b> dok PR200 / 110 dengan HomeKit <br><br>  Untuk melakukan ini, diperlukan alat berikut: <br><br>  Solusi yang disarankan untuk Demo: <br><br>  Raspberry Pi 2/3/4 dan konverter usb rs485 (misalnya, dengan Alliexpress) <br><br><img src="https://sun9-44.userapi.com/c858324/v858324590/e283a/4-udUu3_Ycg.jpg" alt="gambar"><br><br>  Solusi yang disarankan untuk instalasi berdasarkan modul Raspberry CM3 + dalam desain industri dengan 2 dua port RS485 internal: <br><br><img src="https://antexcloud.ru/wp-content/uploads/AntexGate-.jpg" alt="gambar"><br><br>  Sambungkan perangkat berbasis Raspberry Anda ke jaringan listrik dan rumah terutama dengan kabel patch, dan bukan melalui wifi. <br><br>  Hubungkan port RS485 perangkat Anda dan PR200 / 110. <br><br>  Selanjutnya, tentukan alamat IP yang dikeluarkan router Anda dan sambungkan melalui SSh, misalnya, melalui program PUTTY (secara default, nama pengguna adalah pi password raspberry) <br><br>  Instal produk perangkat lunak simpul-merah untuk memasang dok protokol HomeKit di tingkat atas dan Modbus Rtu di tingkat bawah, lihat petunjuk instalasi di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Jangan lupa untuk membuat layanan simpul-merah Anda untuk startup. <br><br>  Instal paket HomeKit dan modbus untuk node-red <br><br><pre><code class="plaintext hljs">cd ~/.node-red npm install node-red-contrib-homekit npm install node-red-contrib-modbus sudo reboot</code> </pre> <br>  Kami menunggu reboot dan masuk ke browser "IP ANDA": 1880 (misalnya, 192.168.1.110:1880) <br><br>  Kami menyalin aliran berikutnya (kode di akhir artikel) dan menempelkan mesin aturan simpul-merah ke antarmuka web <br><br>  Buka Menu -&gt; impor -&gt; masukkan kode aliran <br><br><img src="https://sun9-62.userapi.com/c858324/v858324590/e27d5/gX_NP9Tcut0.jpg" alt="gambar"><br><br><img src="https://sun9-62.userapi.com/c858324/v858324590/e27dc/sW2lIvuLXFk.jpg" alt="gambar"><br><br><img src="https://sun9-14.userapi.com/c858324/v858324590/e27ed/2YlXvhSyAvE.jpg" alt="gambar"><br><br>  Anda harus menerapkan aliran dengan mengklik tombol Deploy <br><br>  Jika terjadi kegagalan, kami sarankan Anda untuk menentukan port RS485 dengan benar dalam pengaturan Modbus pada "Modbas Request" dan "Write Reset FC6" plugins (contoh / dev / ttyUSB0). <br><br>  Untuk keaslian, reboot perangkat SSH Anda à sudo reboot <br><br>  <b>Langkah 3</b>  Menyiapkan aplikasi di perangkat Apple Anda cukup sederhana. <br><br><img src="https://sun9-11.userapi.com/c858324/v858324590/e281c/tWFcJA_7AW8.jpg" alt="gambar"><br><br>  Beri nama untuk rumah kami sesuka hati, dalam contoh PR200 kami <br><br><img src="https://sun9-25.userapi.com/c858324/v858324590/e2868/21MYun_Ww10.jpg" alt="gambar"><br><br>  Tambahkan dan setuju untuk menggunakan aksesori yang tidak bersertifikat <br><br><img src="https://sun9-50.userapi.com/c858324/v858324590/e286f/N0JIhEZyKY8.jpg" alt="gambar"><br><br>  Kami memasukkan kode akses, dalam kasus kami 111 11 111, itu dapat diganti dalam pengaturan Node-red di masing-masing aksesoris HomeKit <br><br><img src="https://sun9-18.userapi.com/c858324/v858324590/e2880/Yx0gxJ739i8.jpg" alt="gambar"><br><br>  Kami menambahkan semua lampu kami ke kamar, ini bisa dilakukan nanti. <br><br>  Semoga Anda menggunakan sistem yang murah namun sangat nyaman ini. <br><br>  Perhatian: <br><br>  Kami tidak mengagitasi penggunaan komersial dari protokol HomeKit, pengembang mengambil semua tindakan yang bertentangan dengan perjanjian lisensi APPLE tentang penggunaan protokol HomeKit! <br><br>  Program untuk ARIES PR200 dan skrip untuk NodeRed dapat diunduh secara gratis di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id476540/">https://habr.com/ru/post/id476540/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id476526/index.html">Dasar Slurm di Moskow. Hari pertama Sebuah tendangan voli dari SocaCola, mikrofon diambil dari presenter dan dukungan sedang menunggu</a></li>
<li><a href="../id476528/index.html">Arsitek Perangkat Lunak Kursus baru dari OTUS</a></li>
<li><a href="../id476532/index.html">Pola dasar UI / UX</a></li>
<li><a href="../id476534/index.html">Cara membangun akuntansi manajemen yang efektif dan mendapatkan keuntungan besar</a></li>
<li><a href="../id476538/index.html">Protokol Distribusi Kunci Kriptografi Asimetris: Denning - Sacco, DASS, Wu Lama</a></li>
<li><a href="../id476546/index.html">Cloud WebRTC Streaming di DigitalOcean</a></li>
<li><a href="../id476548/index.html">Apa kesamaan dari overclocking dan downsizing?</a></li>
<li><a href="../id476550/index.html">Dasar Slurm di Moskow. Hari Kedua Mizaru, Kikazaru, Iwazaru, dan dukungan teknis selalu bertugas</a></li>
<li><a href="../id476554/index.html">Streaming WebRTC berbasis cloud di DigitalOcean</a></li>
<li><a href="../id476556/index.html">Narasi dan "ruang bawah tanah": bagaimana perancang game mengaitkan lokasi dengan plot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>