<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ฟ ๐ฑ ๐ธ๐ผ Apache Kafka + Spring Boot: ูุฑุญุจูุง ุ ุฎุฏูุงุช microservices โ๐ฝ ๐ ๐จ๐ฝ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ! ูู ูุฐุง ุงูููุดูุฑ ุ ุณููุชุจ ุชุทุจูููุง ุนูู Spring Boot 2 ุจุงุณุชุฎุฏุงู Apache Kafka ุถูู Linux ุ ูู ุชุซุจูุช JRE ุฅูู ุชุทุจูู microservice ูุนุงู. 

 ูุดูู ุฒูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apache Kafka + Spring Boot: ูุฑุญุจูุง ุ ุฎุฏูุงุช microservices</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440400/" style=";text-align:right;direction:rtl"> ูุฑุญุจุง ูุง ูุจุฑ!  ูู ูุฐุง ุงูููุดูุฑ ุ ุณููุชุจ ุชุทุจูููุง ุนูู Spring Boot 2 ุจุงุณุชุฎุฏุงู Apache Kafka ุถูู Linux ุ ูู ุชุซุจูุช JRE ุฅูู ุชุทุจูู microservice ูุนุงู. <br><br>  ูุดูู ุฒููุงุก ูู ูุณู ุชุทููุฑ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุงูุฐูู ุดุงูุฏูุง ุงูููุงู ูู ุฃููู ูุง ุฃุดุฑุญ ูุงููุฉ ุฃุจุงุชุดู ูุงููุง ู Spring Boot.  ุฃุนุชูุฏ ุฃู ุฃู ุดุฎุต ูุญุชุงุฌ ุฅูู ุชุฌููุน ูุดุฑูุน ููุชูู ุจุงุณุชุฎุฏุงู ุงูุชูููุงุช ุงููุฐููุฑุฉ ุฃุนูุงู ูุนุฑู ูุง ูู ุนููู ูููุงุฐุง ูุญุชุงุฌูู ุฅููู.  ุฅุฐุง ูู ููู ุงูุณุคุงู ูู ูุถุน ุงูุฎููู ุจุงููุณุจุฉ ูููุงุฑุฆ ุ ูุฅููู ุจุนุถ ุงูููุงูุงุช ุงูููุชุงุฒุฉ ุญูู ูุจุฑ ููุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุจุงุชุดู ูุงููุง</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Spring Boot</a> . <br><br>  ูููููุง ุงูุงุณุชุบูุงุก ุนู ุชูุถูุญุงุช ูุทููุฉ ุญูู ูุงููุฉ Kafka ู Spring Boot ู Linux ูุจุฏูุงู ูู ุฐูู ุ ุชุดุบูู ุฎุงุฏู Kafka ูู ููุทุฉ ุงูุตูุฑ ุนูู ุฌูุงุฒ Linux ุ ููุชุงุจุฉ ุฌูุงุฒู microservices ูุฌุนู ุฃุญุฏููุง ูุฑุณู ุฑุณุงุฆู ุฅูู ุงูุขุฎุฑ - ุจุดูู ุนุงู ุ ูู ุจุชูููู ุงูุนูุงุฑุฉ ุงูุฏูููุฉ ุงููุงููุฉ. <br><br><img src="https://habrastorage.org/webt/5d/p3/ab/5dp3abjx-c62zmfmmtp5tjvbjci.jpeg"><br><br>  ุณูู ุชุชุฃูู ุงููุดุงุฑูุฉ ูู ูุณููู.  ูู ุงูุจุฏุงูุฉ ุ ูููู ุจุชูููู ูุชุดุบูู Apache Kafka ุนูู ุฌูุงุฒ Linux ุ ููู ุงูุซุงููุฉ ููุชุจ ุฌูุงุฒู ุฎุฏูุงุช ูุตุบูุฑุฉ ูู Java. <br><a name="habracut"></a><br>  ูู ุจุฏุก ุงูุชุดุบูู ุ ุญูุซ ุจุฏุฃุช ูุณูุฑุชู ุงูููููุฉ ููุจุฑูุฌ ุ ูุงูุช ููุงู ุฎุฏูุงุช microservices ุนูู Kafka ุ ููุง ุนููุช ูุงุญุฏุฉ ูู ุฎุฏูุงุช microservices ุงูุฎุงุตุฉ ุจู ูุน ุขุฎุฑูู ูู ุฎูุงู Kafka ุ ููููู ูู ุฃุนุฑู ููู ูุนูู ุงูุฎุงุฏู ููุณู ุ ุณูุงุก ูุงู ููุชูุจูุง ูุชุทุจูู ุฃู ุฃูู ูุญุงุตุฑ ุจุงููุนู ุงูููุชุฌ.  ูุง ูุงู ููุงุฌุฃุฉ ูุฎูุจุฉ ุงูุฃูู ุนูุฏูุง ุงุชุถุญ ุฃู Kafka ูุง ูุฒุงู ููุชุฌูุง ูุญุงุตุฑูุง ุ ููู ุชููู ูููุชู ูู ูุชุงุจุฉ ุนููู ูู Java (ููู ูุง ุฃุญุจ ุงูููุงู ุจู) ุ ุจุงูุฅุถุงูุฉ ุฅูู ูุดุฑ ูุฅุนุฏุงุฏ ุงูุชุทุจูู ุงูููุงุฆู ูู devOps (ููู ูุง ุฃูุชุฑุถู) ุฃูุฑู ุฃู ุชูุนู).  ููุน ุฐูู ุ ุญุชู ูู ุชูููุช ูู ุฑูุนู ุนูู ุฎุงุฏู ูุงููุง ุงูุงูุชุฑุงุถู ูู ุฃูู ูู ููู ุ ููู ุงูุณูู ุฌุฏูุง ุงูููุงู ุจุฐูู.  ููุฐุง <br><br>  ุณูููู ูุฏููุง ุชุทุจูู ูููู ุงูุชูุงุนู ุงูุชุงูู: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/wy/id/y5/wyidy5ttuw6eam5buszy6rb8z0m.jpeg"></div><br>  ูู ููุงูุฉ ุงูููุดูุฑ ุ ูุงูุนุงุฏุฉ ุ ุณุชููู ููุงู ุฑูุงุจุท ุฅูู git ูุน ุฑูุฒ ุงูุนูู. <br><br><h1 style=";text-align:right;direction:rtl">  ูุดุฑ Apache Kafka + Zookeeper ุนูู ุฌูุงุฒ ุงูุชุฑุงุถู </h1><br>  ุญุงููุช ุฃู ุฃุฑูุน ูุงููุง ุนูู ูุธุงู Linux ุงููุญูู ุ ูุนูู ุงูุฎุดุฎุงุด ูุนูู ูุธุงู Linux ุงูุจุนูุฏ.  ูู ุญุงูุชูู (Linux) ุ ูุฌุญุช ุจุณุฑุนุฉ ูุจูุฑุฉ.  ูุน ุงูุฎุดุฎุงุด ุญุชู ุงูุขู ูู ูุญุฏุซ ุดูุก.  ูุฐูู ุ ุณูุฑูุน ูุงููุง ุนูู ููููุณ.  ุงุฎุชุฑุช ุฃูุจููุชู 18.04. <br><br>  ูููู ุชุนูู ูุงููุง ุ ูุฅููุง ุชุญุชุงุฌ ุฅูู ุญุงุฑุณ ููุญููุงูุงุช.  ููููุงู ุจุฐูู ุ ูุฌุจ ุนููู ุชูุฒููู ูุชุดุบููู ูุจู ุชุดุบูู Kafka. <br><br>  ููุฐุง <br><br><h4 style=";text-align:right;direction:rtl">  0. ุชุซุจูุช JRE </h4><br>  ูุชู ุฐูู ุนู ุทุฑูู ุงูุฃูุงูุฑ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">sudo apt-get update sudo apt-get install default-jre</code> </pre> <br>  ุฅุฐุง ุณุงุฑุช ุงูุฃููุฑ ุนูู ูุง ูุฑุงู ุ ููููู ุฅุฏุฎุงู ุงูุฃูุฑ <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">java -version</code> </pre> <br>  ูุชุฃูุฏ ูู ุชุซุจูุช Java. <br><br><h4 style=";text-align:right;direction:rtl">  1. ูู ุจุชูุฒูู Zookeeper </h4><br>  ุฃูุง ูุง ุฃุญุจ ุงููุฑู ุงูุณุญุฑูุฉ ุนูู ูุธุงู Linux ุ ุฎุงุตุฉู ุนูุฏูุง ููุฏููู ุจุนุถ ุงูุฃูุงูุฑ ููุท ูููุณ ูู ุงููุงุถุญ ูุง ุงูุฐู ููุนูููู.  ูุฐูู ุ ุณูู ุฃุตู ูู ุฅุฌุฑุงุก - ูุงุฐุง ููุนู ุจุงูุถุจุท.  ูุฐูู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุชูุฒูู Zookeeper ููู ุถุบุทู ูู ูุฌูุฏ ููุงุณุจ.  ูู ุงููุณุชุญุณู ุฃู ูุชู ุชุฎุฒูู ุฌููุน ุงูุชุทุจููุงุช ูู ูุฌูุฏ / opt ุ ููุฐุง ูู ุญุงูุชูุง ุ ุณูููู / opt / zookeeper. <br><br>  ุฃูุง ุงุณุชุฎุฏู ุงูุฃูุฑ ุฃุฏูุงู.  ุฅุฐุง ููุช ุชุนุฑู ุฃูุงูุฑ Linux ุงูุฃุฎุฑู ุงูุชู ุ ุจุฑุฃูู ุ ุณุชุชูุญ ูู ุงูููุงู ุจุฐูู ุจุทุฑููุฉ ุฃูุซุฑ ุนูุตุฑูุฉ ุจุดูู ุตุญูุญ ุ ุงุณุชุฎุฏููุง.  ุฃูุง ูุทูุฑ ุ ูููุณุช ูุทูุฑูุง ุ ูุฃูุง ุฃุชูุงุตู ูุน ุงูุฎูุงุฏู ุนูู ูุณุชูู "ุงููุงุนุฒ ููุณู".  ูุฐูู ุ ูู ุจุชูุฒูู ุงูุชุทุจูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">wget -P /home/xpendence/downloads/ <span class="hljs-string"><span class="hljs-string">"http://apache-mirror.rbc.ru/pub/apache/zookeeper/zookeeper-3.4.12/zookeeper-3.4.12.tar.gz"</span></span></code> </pre> <br>  ุชู ุชูุฒูู ุงูุชุทุจูู ุนูู ุงููุฌูุฏ ุงูุฐู ุชุญุฏุฏู ุ ููุฏ ููุช ุจุฅูุดุงุก ุงููุฌูุฏ / home / xpendence / download ูุชูุฒูู ุฌููุน ุงูุชุทุจููุงุช ุงูุชู ุฃุญุชุงุฌูุง. <br><br><h4 style=";text-align:right;direction:rtl">  2. ูู ุงูุญุงุฑุณ </h4><br>  ุงุณุชุฎุฏูุช ุงูุฃูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">tar -xvzf /home/xpendence/downloads/zookeeper-3.4.12.tar.gz</code> </pre> <br>  ูููู ูุฐุง ุงูุฃูุฑ ุจูู ุถุบุท ุงูุฃุฑุดูู ูู ุงููุฌูุฏ ุงูุฐู ุชูุฌุฏ ุจู.  ูุฏ ุชุญุชุงุฌ ุจุนุฏ ุฐูู ุฅูู ููู ุงูุชุทุจูู ุฅูู / opt / zookeeper.  ูููููู ุงูุฏุฎูู ุฅููู ุนูู ุงูููุฑ ููู ููุงู ูู ุงูุฃุฑุดูู ุจุงููุนู. <br><br><h4 style=";text-align:right;direction:rtl">  3. ุชุญุฑูุฑ ุงูุฅุนุฏุงุฏุงุช </h4><br>  ูู ุงููุฌูุฏ / zookeeper / conf / ููุฌุฏ ููู zoo-sample.cfg ุ ุฃูุชุฑุญ ุฅุนุงุฏุฉ ุชุณููุชู ุฅูู zoo.conf ุ ูุฐุง ูู ุงูููู ุงูุฐู ุณูุจุญุซ ุนูู JVM ุนูุฏ ุจุฏุก ุงูุชุดุบูู.  ูุฌุจ ุฅุถุงูุฉ ูุง ููู ุฅูู ูุฐุง ุงูููู ูู ุงูููุงูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">tickTime=2000 dataDir=/var/zookeeper clientPort=2181</code> </pre> <br>  ุฃูุถูุง ุ ูู ุจุฅูุดุงุก ุงูุฏููู / var / zookeeper. <br><br><h4 style=";text-align:right;direction:rtl">  4. ุฅุทูุงู Zookeeper </h4><br>  ุงูุชูู ุฅูู ุงููุฌูุฏ / opt / zookeeper ูุงุจุฏุฃ ุชุดุบูู ุงูุฎุงุฏู ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">bin/zkServer.sh start</code> </pre> <br>  ูุฌุจ ุฃู ุชุธูุฑ ูููุฉ "STARTED". <br><br>  ุจุนุฏ ุฐูู ุ ุฃูุชุฑุญ ุงูุชุญูู ูู ุฃู ุงูุฎุงุฏู ูุนูู.  ููุชุจ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">telnet localhost 2181</code> </pre> <br>  ูุฌุจ ุฃู ุชุธูุฑ ุฑุณุงูุฉ ุฃู ุงูุงุชุตุงู ูุงู ูุงุฌุญูุง.  ุฅุฐุง ูุงู ูุฏูู ุฎุงุฏู ุถุนูู ููู ุชุธูุฑ ุงูุฑุณุงูุฉ ุ ูุญุงูู ูุฑุฉ ุฃุฎุฑู - ุญุชู ุนูุฏ ุธููุฑ STARTED ุ ูุจุฏุฃ ุงูุชุทุจูู ูู ุงูุงุณุชูุงุน ุฅูู ุงููููุฐ ูู ููุช ูุงุญู.  ุนูุฏูุง ุญุงููุช ูู ูุฐุง ุนูู ุฎุงุฏู ุถุนูู ุ ุญุฏุซ ูู ูู ูุฑุฉ.  ุฅุฐุง ูุงู ูู ุดูุก ูุชุตูุงู ุ ูุฃุฏุฎู ุงูุฃูุฑ <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">ruok</code> </pre> <br>  ูุงุฐุง ูุนูู ุฐูู: "ูู ุฃูุช ุจุฎูุฑุ"  ูุฌุจ ุฃู ูุณุชุฌูุจ ุงูุฎุงุฏู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">imok ( !)</code> </pre> <br>  ูุงููุทุน ุงูุงุชุตุงู.  ูุฐูู ุ ูู ุดูุก ูููุง ููุฎุทุฉ.  ูุดุฑุน ูู ุฅุทูุงู Apache Kafka. <br><br><h4 style=";text-align:right;direction:rtl">  5. ุฅูุดุงุก ูุณุชุฎุฏู ุชุญุช Kafka </h4><br>  ููุนูู ูุน ูุงููุง ูุญุชุงุฌ ุฅูู ูุณุชุฎุฏู ูููุตู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">sudo adduser --system --no-create-home --disabled-password --disabled-login kafka</code> </pre> <br><h4 style=";text-align:right;direction:rtl">  6. ุชุญููู ุงุจุงุชุดู ูุงููุง </h4><br>  ููุงู ููุนุงู ูู ุงูุชูุฒูุนุงุช - ุซูุงุฆู ููุตุงุฏุฑ.  ูุญู ุจุญุงุฌุฉ ุฅูู ุซูุงุฆู.  ูู ุงููุธูุฑ ุ ุงูุฃุฑุดูู ูุน ุซูุงุฆู ูุฎุชูู ูู ุงูุญุฌู.  ูุฒู ุงูุซูุงุฆู 59 ููุบุงุจุงูุช ุ ููุฒู 6.5 ููุบุงุจุงูุช. <br><br>  ูู ุจุชูุฒูู ุงูููู ุงูุซูุงุฆู ุฅูู ุงูุฏููู ููุงู ุ ุจุงุณุชุฎุฏุงู ุงูุฑุงุจุท ุฃุฏูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">wget -P /home/xpendence/downloads/ <span class="hljs-string"><span class="hljs-string">"http://mirror.linux-ia64.org/apache/kafka/2.1.0/kafka_2.11-2.1.0.tgz"</span></span></code> </pre> <br><h4 style=";text-align:right;direction:rtl">  7. ูู ุฃุจุงุชุดู ูุงููุง </h4><br>  ูุง ูุฎุชูู ุฅุฌุฑุงุก ุงูุชูุฑูุบ ุนู ููุณ ุงูุดูุก ุจุงููุณุจุฉ ูู Zookeeper.  ูููู ุฃูุถูุง ุจูู ุถุบุท ุงูุฃุฑุดูู ูู ุฏููู / opt ูุฅุนุงุฏุฉ ุชุณููุชู ุฅูู kafka ุจุญูุซ ูููู ุงููุณุงุฑ ุฅูู ูุฌูุฏ / bin ูู / opt / kafka / bin <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">tar -xvzf /home/xpendence/downloads/kafka_2.11-2.1.0.tgz</code> </pre> <br><h4 style=";text-align:right;direction:rtl">  8. ุชุญุฑูุฑ ุงูุฅุนุฏุงุฏุงุช </h4><br>  ุงูุฅุนุฏุงุฏุงุช ูู /opt/kafka/config/server.properties.  ุฃุถู ุณุทุฑ ูุงุญุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">delete.topic.enable = <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  ูุจุฏู ุฃู ูุฐุง ุงูุฅุนุฏุงุฏ ุงุฎุชูุงุฑู ุ ููุนูู ุจุฏููู.  ูุณูุญ ูู ูุฐุง ุงูุฅุนุฏุงุฏ ุจุญุฐู ุงูููุถูุนุงุช.  ุฎูุงู ุฐูู ุ ูุง ููููู ุจุจุณุงุทุฉ ุญุฐู ุงูููุงุถูุน ูู ุฎูุงู ุณุทุฑ ุงูุฃูุงูุฑ. <br><br><h4 style=";text-align:right;direction:rtl">  9. ูููุญ ุญู ุงููุตูู ุฅูู ุฏููู ุงููุณุชุฎุฏู ูุงููุง ูุงููุง </h4><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">chown -R kafka:nogroup /opt/kafka chown -R kafka:nogroup /var/lib/kafka</code> </pre> <br><h4 style=";text-align:right;direction:rtl">  10. ุงูุฅุทูุงู ุงูุฐู ุทุงู ุงูุชุธุงุฑู ูุฅุจุงุชุดู ูุงููุง </h4><br>  ูุฏุฎู ุงูุฃูุฑ ุ ูุจุนุฏ ุฐูู ูุจุฏุฃ ูุงููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">/opt/kafka/bin/kafka-server-start.sh /opt/kafka/config/server.properties</code> </pre> <br>  ุฅุฐุง ูู ุชูุชุดุฑ ุงูุฅุฌุฑุงุกุงุช ุงููุนุชุงุฏุฉ (ูุชู ูุชุงุจุฉ ูุงููุง ุจูุบุฉ ุฌุงูุง ูุณูุงูุง) ูู ุงูุณุฌู ุ ููู ุดูุก ูุนูู ูููููู ุงุฎุชุจุงุฑ ุฎุฏูุชูุง. <br><br><h4 style=";text-align:right;direction:rtl">  10.1.  ูุดุงูู ุงูุฎุงุฏู ุถุนููุฉ </h4><br>  ูุฅุฌุฑุงุก ุชุฌุงุฑุจ ุนูู Apache Kafka ุ ุฃุฎุฐุช ุฎุงุฏููุง ุถุนูููุง ูุญุชูู ุนูู ูุจ ูุงุญุฏ ู 512 ููุฌุงุจุงูุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู (ููุงุจู 99 ุฑูุจู ููุท) ุ ูุงูุชู ุชุจูู ุฃููุง ุนุฏุฉ ูุดููุงุช ุจุงููุณุจุฉ ูู. <br><br>  ููุงุฏ ุงูุฐุงูุฑุฉ.  ุจุงูุทุจุน ุ ูุง ููููู ุฑูุน ุชุฑุฏุฏ ุงูุชุดุบูู ุจุณุนุฉ 512 ููุฌุงุจุงูุช ุ ููู ูุชููู ุงูุฎุงุฏู ูู ูุดุฑ ุชุทุจูู ูุงููุง ุจุณุจุจ ููุต ุงูุฐุงูุฑุฉ.  ุงูุญูููุฉ ูู ุฃู ูุงููุง ูุณุชููู ุจุดูู ุงูุชุฑุงุถู 1 ุบูุบุงุจุงูุช ูู ุงูุฐุงูุฑุฉ.  ูุง ุนุฌุจ ุฃูู ูุงู ูู ุนุฏุงุฏ ุงูููููุฏูู :) <br><br>  ูุฐูุจ ุฅูู kafka-server-start.sh ุ zookeeper-server-start.sh.  ููุฌุฏ ุจุงููุนู ุฎุท ููุธู ุงูุฐุงูุฑุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">export KAFKA_HEAP_OPTS=<span class="hljs-string"><span class="hljs-string">"-Xmx1G -Xms1G"</span></span></code> </pre> <br>  ุชุบููุฑู ุฅูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">export KAFKA_HEAP_OPTS=<span class="hljs-string"><span class="hljs-string">"-Xmx256M -Xms128M"</span></span></code> </pre> <br>  ูุฐุง ุณูู ูููู ูู ุดููุฉ ูุงููุง ููุณูุญ ูู ุจุจุฏุก ุชุดุบูู ุงูุฎุงุฏู. <br><br>  ุงููุดููุฉ ุงูุซุงููุฉ ูุน ุงูููุจููุชุฑ ุงูุถุนูู ูู ุถูู ุงูููุช ููุงุชุตุงู ุจู Zookeeper.  ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุฅุนุทุงุก ูุฐุง 6 ุซูุงูู.  ุฅุฐุง ูุงู ุงูุญุฏูุฏ ุถุนูููุง ุ ููุฐุง ุจุงูุทุจุน ูุง ูููู.  ูู server.properties ูุฒูุฏ ููุช ุงูุงุชุตุงู ุจู zukipper: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">zookeeper.connection.timeout.ms=30000</code> </pre> <br>  ุฃูุง ูุถุนุช ูุตู ุฏูููุฉ. <br><br><h4 style=";text-align:right;direction:rtl">  11. ุงุฎุชุจุงุฑ ุฎุงุฏู ูุงููุง </h4><br>  ููููุงู ุจุฐูู ุ ุณูู ููุชุญ ูุญุทุชูู ุ ุนูู ูุงุญุฏุฉ ุณูุทูู ุงูููุชุฌ ุ ูุงูุขุฎุฑ - ุงููุณุชููู. <br>  ูู ูุญุฏุฉ ุงูุชุญูู ุงูุฃููู ุ ุฃุฏุฎู ุณุทุฑ ูุงุญุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">/opt/kafka/bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> /opt/kafka/bin/kafka-console-producer.sh --broker-list localhost:9092 --topic <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre> <br>  ูุฌุจ ุฃู ูุธูุฑ ูุฐุง ุงูุฑูุฒ ุ ููุฅุดุงุฑุฉ ุฅูู ุฃู ุงูููุชุฌ ุฌุงูุฒ ูุฅุฑุณุงู ุฑุณุงุฆู ุบูุฑ ูุฑุบูุจ ูููุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">&gt;</code> </pre> <br>  ูู ูุญุฏุฉ ุงูุชุญูู ุงูุซุงููุฉ ุ ุฃุฏุฎู ุงูุฃูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">/opt/kafka/bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic <span class="hljs-built_in"><span class="hljs-built_in">test</span></span> --from-beginning</code> </pre> <br>  ุงูุขู ุ ุจุงููุชุงุจุฉ ูู ูุญุฏุฉ ุงูุชุญูู ุงูุฎุงุตุฉ ุจุงูููุชุฌ ุ ุนูุฏ ุงูุถุบุท ุนูู Enter ุ ุณุชุธูุฑ ูู ูุญุฏุฉ ุงูุชุญูู ุงูุฎุงุตุฉ ุจุงููุณุชููู. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/k7/uu/kf/k7uukff1u2kyygrgetrnvjnqmmg.png"></a> <br><br>  ุฅุฐุง ุฑุฃูุช ุนูู ุงูุดุงุดุฉ ููุณ ูุซูู - ุชูุงูููุง ุ ูุงูุฃุณูุฃ ูุฏ ุงูุชูู! <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/n7/rg/lz/n7rglz4s3wvbqzg_chzjjooiazw.jpeg"></div><br>  ุงูุขู ุนูููุง ููุท ุฃู ููุชุจ ุงุซููู ูู ุงูุนููุงุก ุนูู Spring Boot ุณูุชูุงุตููู ูุน ุจุนุถูู ุงูุจุนุถ ูู ุฎูุงู Apache Kafka. <br><br><h1 style=";text-align:right;direction:rtl">  ูุชุงุจุฉ ุชุทุจูู ุนูู Spring Boot </h1><br>  ุณููุชุจ ุชุทุจูููู ูุชุจุงุฏู ุงูุฑุณุงุฆู ูู ุฎูุงู Apache Kafka.  ุณูู ุชุณูู ุงูุฑุณุงูุฉ ุงูุฃููู kafka-server ูุณูู ุชุญุชูู ุนูู ูู ูู ุงูููุชุฌ ูุงููุณุชููู.  ุณูุทูู ุนูู ุงูุซุงูู ุงุฎุชุจุงุฑ kafka ุ ููู ูุตูู ุจุญูุซ ูููู ูุฏููุง ุจููุฉ microservice. <br><br><h3 style=";text-align:right;direction:rtl">  ุฎุงุฏู kafka </h3><br>  ููุดุงุฑูุนูุง ุงูุชู ุชู ุฅูุดุงุคูุง ูู ุฎูุงู Spring Initializr ุ ูุญู ุจุญุงุฌุฉ ุฅูู ูุญุฏุฉ ูุงููุง.  ุฃุถูุช ูููุจูู ูููุจ ุ ููู ูุฐู ูุณุฃูุฉ ุฐูู. <br><br>  ูุชููู ุนููู ูุงููุง ูู ูููููู - ุงูููุชุฌ (ูุฑุณู ุฑุณุงุฆู ุฅูู ุฎุงุฏู ูุงููุง) ูุงููุณุชููู (ูุณุชูุน ุฅูู ุฎุงุฏู ูุงููุง ููุฃุฎุฐ ุฑุณุงุฆู ุฌุฏูุฏุฉ ูู ููุงู ุญูู ุงูููุถูุนุงุช ุงูุชู ุงุดุชุฑู ูููุง).  ูููุชูุง ูู ูุชุงุจุฉ ููุง ุงููููููู ูุฌุนููุง ุชุนูู. <br><br>  ุงููุณุชููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KafkaConsumerConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.server}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaServer; <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.group.id}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaGroupId; <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; batchFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BatchMessagingMessageConverter(converter())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; singleFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ConsumerFactory&lt;Long, AbstractDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs()); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; kafkaListenerContainerFactory() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerConfigs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer); props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, LongDeserializer.class); props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); props.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId); props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringJsonMessageConverter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">converter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter(); } }</code> </pre> <br>  ูุญุชุงุฌ ุฅูู ุชููุฆุฉ ุญูููู ุจุจูุงูุงุช ุซุงุจุชุฉ ูู kafka.properties. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">kafka.server=localhost:<span class="hljs-number"><span class="hljs-number">9092</span></span> kafka.group.id=server.broadcast</code> </pre> <br>  kafka.server ูู ุงูุนููุงู ุงูุฐู ูุชููู ุนููู ุฎุงุฏููุง ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุญูู.  ุจุดูู ุงูุชุฑุงุถู ุ ูุณุชูุน Kafka ุนูู ุงููููุฐ 9092. <br><br>  kafka.group.id ูู ูุฌููุนุฉ ูู ุงูุนููุงุก ุ ูุชู ุฎูุงููุง ุชุณููู ูุซูู ูุงุญุฏ ูู ุงูุฑุณุงูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏูู ุซูุงุซุฉ ูุงููุงุช ูู ูุฌููุนุฉ ูุงุญุฏุฉ ุ ููููู ูุณุชูุนูู ุฅูู ููุณ ุงูููุถูุน.  ุจูุฌุฑุฏ ุธููุฑ ุฑุณุงูุฉ ุฌุฏูุฏุฉ ุนูู ุงูุฎุงุฏู ูุน ูุฐุง ุงูููุถูุน ุ ูุชู ุชุณููููุง ุฅูู ุดุฎุต ูุง ูู ุงููุฌููุนุฉ.  ูุง ูุชููู ุงููุณุชูููุงู ุงููุชุจููุงู ุงูุฑุณุงูุฉ. <br><br>  ุจุนุฏ ุฐูู ุ ูููู ุจุฅูุดุงุก ูุตูุน ูููุณุชููููู - ConsumerFactory. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ConsumerFactory&lt;Long, AbstractDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs()); }</code> </pre> <br>  ุชู ุงูุชููุฆุฉ ูุน ุงูุฎุตุงุฆุต ุงูุชู ูุญุชุงุฌูุง ุ ูุณูููู ุจูุซุงุจุฉ ูุตูุน ููุงุณู ูููุณุชููููู ูู ุงููุณุชูุจู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consumerConfigs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer); props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, LongDeserializer.class); props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class); props.put(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId); props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props; }</code> </pre> <br>  ConsumerConfigs ูู ูุฌุฑุฏ ุฎุฑูุทุฉ ุงูุชูููู.  ูุญู ููุฏู ุนููุงู ุงูุฎุงุฏู ูุงููุฌููุนุฉ ู deserializers. <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ูุงุญุฏุฉ ูู ุฃูู ุงูููุงุท ูููุณุชููู.  ูููู ูููุณุชููู ุงุณุชูุงู ูู ูู ุงููุงุฆูุงุช ูุงููุฌููุนุงุช - ุนูู ุณุจูู ุงููุซุงู ุ ูู ูู StarshipDto ู List.  ูุฅุฐุง ุญุตููุง ุนูู StarshipDto ูู JSON ุ ูุณูุญุตู ุนูู ูุงุฆูุฉ ูู ุ ุจุตูุชูุง ุตููู JSON ุชูุฑูุจูุง.  ูุฐูู ุ ูุฏููุง ูุตูุนุงู ููุฑุณุงูุฉ ุนูู ุงูุฃูู - ููุฑุณุงุฆู ุงููุฑุฏูุฉ ูููุตูุงุฆู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; singleFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; }</code> </pre> <br>  ูุญู ุฅูุดุงุก ูุซูู ConcurrentKafkaListenerContainerFactory ุ ูุชุงุจุฉ ุทูููุฉ (ููุชุงุญ ุงูุฑุณุงูุฉ) ู AbstractDto (ูููุฉ ุงูุฑุณุงูุฉ ุงููุฌุฑุฏุฉ) ุ ูุชููุฆุฉ ุญููููุง ุจุฎุตุงุฆุต.  ูุญู ุ ุจุทุจูุนุฉ ุงูุญุงู ุ ูููุฆ ุงููุตูุน ูู ุฎูุงู ุงููุตูุน ุงูููุงุณู (ุงูุฐู ูุญุชูู ุจุงููุนู ุนูู ุชููุฆุฉ ุงูุฎุฑูุทุฉ) ุ ุซู ูุญุชูู ุนูู ุฃููุง ูุง ูุณุชูุน ุฅูู ุงูุญุฒู (ููุณ ุงููุตูููุงุช) ููุญุฏุฏ ูุญูู JSON ุงูุจุณูุท ููุญูู. <br><br>  ุนูุฏูุง ููุดุฆ ูุตูุนูุง ููุญุฒู / ุงููุตูููุงุช (ุงูุฏููุนุฉ) ุ ูููู ุงูุงุฎุชูุงู ุงูุฑุฆูุณู (ุจุตุฑู ุงููุธุฑ ุนู ุฃููุง ูุญุชูู ุจุงูุงุณุชูุงุน ุฅูู ุงูุญุฒู) ูู ุฃููุง ูุญุฏุฏ ููุญูู ูุญูู ุญุฒูุฉ ุฎุงุต ูุญูู ุงูุญุฒู ุงูุชู ุชุชููู ูู ูู ุณูุงุณู JSON. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; batchFactory() { ConcurrentKafkaListenerContainerFactory&lt;Long, AbstractDto&gt; factory = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); factory.setConsumerFactory(consumerFactory()); factory.setBatchListener(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); factory.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BatchMessagingMessageConverter(converter())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> factory; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringJsonMessageConverter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">converter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter(); }</code> </pre> <br>  ูุฃูุซุฑ ุดูุก ูุงุญุฏ.  ุนูุฏ ุชููุฆุฉ ุญุจูุจ ุงูุฑุจูุน ุ ูุฏ ูุง ูุชู ุญุณุงุจ ุงูุตูุฏูู ุชุญุช ุงุณู kafkaListenerContainerFactory ูุณูุชู ุฅุชูุงู ุงูุชุทุจูู.  ูู ุงููุคูุฏ ุฃู ููุงู ุฎูุงุฑุงุช ุฃูุซุฑ ุฃูุงูุฉ ูุญู ุงููุดููุฉ ุ ูุงููุชุงุจุฉ ุนููุง ูู ุงูุชุนูููุงุช ุ ูู ุงูููุช ุงูุญุงูู ุ ููุช ููุท ุจุฅูุดุงุก ุตูุฏูู ุชู ุฅูุบุงุก ุชุญูููู ุจูุธุงุฆู ุจููุณ ุงูุงุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KafkaListenerContainerFactory&lt;?&gt; kafkaListenerContainerFactory() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConcurrentKafkaListenerContainerFactory&lt;&gt;(); }</code> </pre> <br>  ุชู ุฅุนุฏุงุฏ ุงููุณุชููู.  ููุฑ ุฅูู ุงูููุชุฌ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">KafkaProducerConfig</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.server}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaServer; <span class="hljs-meta"><span class="hljs-meta">@Value</span></span>(<span class="hljs-string"><span class="hljs-string">"${kafka.producer.id}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String kafkaProducerId; <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Map&lt;String, Object&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">producerConfigs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ Map&lt;String, Object&gt; props = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HashMap&lt;&gt;(); props.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer); props.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, LongSerializer.class); props.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, JsonSerializer.class); props.put(ProducerConfig.CLIENT_ID_CONFIG, kafkaProducerId); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> props; } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProducerFactory&lt;Long, StarshipDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">producerStarshipFactory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultKafkaProducerFactory&lt;&gt;(producerConfigs()); } <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> KafkaTemplate&lt;Long, StarshipDto&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kafkaTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ KafkaTemplate&lt;Long, StarshipDto&gt; template = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KafkaTemplate&lt;&gt;(producerStarshipFactory()); template.setMessageConverter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringJsonMessageConverter()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> template; } }</code> </pre> <br>  ูู ุงููุชุบูุฑุงุช ุงูุซุงุจุชุฉ ุ ูุญุชุงุฌ ุฅูู ุนููุงู ุฎุงุฏู kafka ููุนุฑู ุงูููุชุฌ.  ูููู ุฃู ูููู ุฃู ุดูุก. <br><br>  ูู ุงูุชููููุงุช ุ ููุง ูุฑู ุ ูุง ููุฌุฏ ุดูุก ุฎุงุต.  ุชูุฑูุจุง ููุณ ุงูุดูุก.  ููู ูููุง ูุชุนูู ุจุงููุตุงูุน ููุงู ูุฑู ูุจูุฑ.  ูุฌุจ ุฃู ูุณุฌู ูุงูุจูุง ููู ูุฆุฉ ูุฑุณู ูุงุฆูุงุชูุง ุฅูู ุงูุฎุงุฏู ุ ููุฐูู ูุตูุนูุง ููุง.  ูุฏููุง ุฒูุฌ ูุงุญุฏ ูู ูุฐุง ุงููุจูู ุ ูููู ูููู ุฃู ูููู ููุงู ุงูุนุดุฑุงุช ูููู. <br><br>  ูู ุงููุงูุจ ุ ูุญุชูู ุจุฃููุง ุณูุณูุณู ุงููุงุฆูุงุช ูู JSON ุ ูุฑุจูุง ูุฐุง ูููู. <br><br>  ูุฏููุง ูุณุชููู ูููุชุฌ ุ ูุจูู ูุชุงุจุฉ ุฎุฏูุฉ ูู ุดุฃููุง ุฅุฑุณุงู ุงูุฑุณุงุฆู ูุงุณุชูุจุงููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Service</span></span> <span class="hljs-meta"><span class="hljs-meta">@Slf</span></span>4j <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StarshipServiceImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StarshipService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> KafkaTemplate&lt;Long, StarshipDto&gt; kafkaStarshipTemplate; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ObjectMapper objectMapper; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StarshipServiceImpl</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(KafkaTemplate&lt;Long, StarshipDto&gt; kafkaStarshipTemplate, ObjectMapper objectMapper)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.kafkaStarshipTemplate = kafkaStarshipTemplate; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.objectMapper = objectMapper; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ kafkaStarshipTemplate.send(<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>, dto); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@KafkaListener</span></span>(id = <span class="hljs-string"><span class="hljs-string">"Starship"</span></span>, topics = {<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>}, containerFactory = <span class="hljs-string"><span class="hljs-string">"singleFactory"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"=&gt; consumed {}"</span></span>, writeValueAsString(dto)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">writeValueAsString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> objectMapper.writeValueAsString(dto); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (JsonProcessingException e) { e.printStackTrace(); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(<span class="hljs-string"><span class="hljs-string">"Writing value to JSON failed: "</span></span> + dto.toString()); } } }</code> </pre> <br>  ููุงู ุทุฑููุชุงู ููุท ูู ุฎุฏูุชูุง ุ ูููุง ูุงููุชุงู ูุดุฑุญ ุนูู ุงูุนููู.  ูุญู autowire ุงูุฃููุงุท ุงูุชู ูุญุชุงุฌูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> KafkaTemplate&lt;Long, StarshipDto&gt; kafkaStarshipTemplate;</code> </pre> <br>  ุทุฑููุฉ ุงูููุชุฌ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ kafkaStarshipTemplate.send(<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>, dto); }</code> </pre> <br>  ูู ูุง ูู ูุทููุจ ูุฅุฑุณุงู ุฑุณุงูุฉ ุฅูู ุงูุฎุงุฏู ูู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุงูุฅุฑุณุงู ุนูู ุงููุงูุจ ูููู ุงูููุถูุน (ุงูููุถูุน) ููุงุฆููุง ููุงู.  ุณูุชู ุฅุฌุฑุงุก ุชุณูุณู ูููุงุฆู ูู JSON ูุณูุชู ูููู ุฅูู ุงูุฎุงุฏู ุชุญุช ุงูููุถูุน ุงููุญุฏุฏ. <br><br>  ุชุจุฏู ุทุฑููุฉ ุงูุงุณุชูุงุน ููุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@KafkaListener</span></span>(id = <span class="hljs-string"><span class="hljs-string">"Starship"</span></span>, topics = {<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>}, containerFactory = <span class="hljs-string"><span class="hljs-string">"singleFactory"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">consume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(StarshipDto dto)</span></span></span><span class="hljs-function"> </span></span>{ log.info(<span class="hljs-string"><span class="hljs-string">"=&gt; consumed {}"</span></span>, writeValueAsString(dto)); }</code> </pre> <br>  ูุญุชูู ุจูุฐู ุงูุทุฑููุฉ ุจุงุณุชุฎุฏุงู ุงูุชุนููู ุงูุชูุถูุญูKafkaListener ุ ุญูุซ ูุดูุฑ ุฅูู ุฃู ูุนุฑูู ูุฑุบุจ ููู ุ ูููุถูุนุงุช ูุณุชูุน ุฅูููุง ููุตูุน ูููู ุจุชุญููู ุงูุฑุณุงูุฉ ุงููุณุชููุฉ ุฅูู ูุง ูุญุชุงุฌ ุฅููู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุจูุง ุฃููุง ููุจู ูุงุฆููุง ูุงุญุฏูุง ุ ูุฅููุง ูุญุชุงุฌ ุฅูู ูุตูุน ูุฑุฏู.  ููุญุตูู ุนูู ูุงุฆูุฉ &lt;ุ&gt; ุ ุญุฏุฏ batchFactory.  ูุชูุฌุฉ ูุฐูู ุ ูุฑุณู ุงููุงุฆู ุฅูู ุฎุงุฏู kafka ุจุงุณุชุฎุฏุงู ุทุฑููุฉ ุงูุฅุฑุณุงู ููุญุตู ุนููู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ ุงูุงุณุชููุงู. <br><br>  ููููู ูุชุงุจุฉ ุงุฎุชุจุงุฑ ุฎูุงู 5 ุฏูุงุฆู ูุฅุธูุงุฑ ุงูููุฉ ุงููุงููุฉ ููุงููุง ุ ููููุง ุณูุฐูุจ ุฃุจุนุฏ ูู ุฐูู - ููุถู 10 ุฏูุงุฆู ูููุชุจ ุชุทุจูููุง ุขุฎุฑ ูุฑุณู ุฑุณุงุฆู ุฅูู ุงูุฎุงุฏู ุงูุฐู ุณูุณุชูุน ุฅููู ุฃูู ุชุทุจูู ูุฏููุง. <br><br><h2 style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุงููุงูุง </h2><br>  ุจุนุฏ ุชุฌุฑุจุฉ ูุชุงุจุฉ ุงูุชุทุจูู ุงูุฃูู ุ ูููููุง ุจุณูููุฉ ูุชุงุจุฉ ุงูุซุงูู ุ ุฎุงุตุฉู ุฅุฐุง ูููุง ุจูุณุฎ ุงููุตู ูุญุฒูุฉ dto ุ ุชุณุฌูู ุงูููุชุฌ ููุท (ุณูุฑุณู ุงูุฑุณุงุฆู ููุท) ูุฃุถู ุทุฑููุฉ ุงูุฅุฑุณุงู ุงููุญูุฏุฉ ุฅูู ุงูุฎุฏูุฉ.  ุจุงุณุชุฎุฏุงู ุงูุฑุงุจุท ุฃุฏูุงู ุ ููููู ุจุณูููุฉ ุชูุฒูู ุฑูุฒ ุงููุดุฑูุน ูุงูุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุดูุก ูุนูุฏ ููุงู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Scheduled</span></span>(initialDelay = <span class="hljs-number"><span class="hljs-number">10000</span></span>, fixedDelay = <span class="hljs-number"><span class="hljs-number">5000</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">produce</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ StarshipDto dto = createDto(); log.info(<span class="hljs-string"><span class="hljs-string">"&lt;= sending {}"</span></span>, writeValueAsString(dto)); kafkaStarshipTemplate.send(<span class="hljs-string"><span class="hljs-string">"server.starship"</span></span>, dto); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> StarshipDto </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createDto</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StarshipDto(<span class="hljs-string"><span class="hljs-string">"Starship "</span></span> + (LocalTime.now().toNanoOfDay() / <span class="hljs-number"><span class="hljs-number">1000000</span></span>)); }</code> </pre> <br>  ุจุนุฏ ุฃูู 10 ุซูุงูู ุ ูุจุฏุฃ kafka-tester ูู ุฅุฑุณุงู ุฑุณุงุฆู ุจุฃุณูุงุก ุงููุฌูู ุฅูู ุฎุงุฏู ูุงููุง ูู 5 ุซูุงูู (ุงูุตูุฑุฉ ูุงุจูุฉ ููููุฑ). <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/oo/ri/gk/oorigkqltxuntytvhzbarlninhk.png"></a> <br><br>  ููุงู ุ ูุชู ุงูุงุณุชูุงุน ุฅูููุง ูุชููููุง ูู ูุจู ุฎุงุฏู kafka (ุงูุตูุฑุฉ ูู ุฃูุถุง ูุงุจูุฉ ููููุฑ). <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/cs/w-/vc/csw-vcgajjpjymkdxcwibqllnoi.png"></a> <br><br>  ุขูู ุฃู ููุฌุญ ุฃููุฆู ุงูุฐูู ูุญูููู ุจุงูุจุฏุก ูู ูุชุงุจุฉ ุฎุฏูุงุช ูููุฑููุฉ ูู ูุงููุง ุจููุณ ุงูุณูููุฉ ุงูุชู ูุฌุญุช ุจูุง.  ูููุง ูู ุงูุฑูุงุจุท ุฅูู ุงููุดุงุฑูุน: <br><br>  โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุฎุงุฏู ูุงููุง</a> <br>  โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุงุฎุชุจุงุฑ ุงููุงูุง</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar440400/">https://habr.com/ru/post/ar440400/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar440388/index.html">ูุชุฑุงุช: ุชุทูุฑ C ++ ุงููุงุฏู</a></li>
<li><a href="../ar440390/index.html">ุนุงูู ูุชููุน ูู ุงูุฃูุธูุฉ ุงููุถููุฉ ูููุงู Embox ููู</a></li>
<li><a href="../ar440392/index.html">WebRTC ุนูู ูููุนู - โโูุง ุฃุฎุทุงุก ููุง ููุฒุงููุฉ</a></li>
<li><a href="../ar440394/index.html">ุชุตุงุนุฏ ุงูุชูุงุฒ PostgreSQL - ุชุญููู CVE-2018-10915</a></li>
<li><a href="../ar440398/index.html">ุชุงุฑูุฎ ุงููุดุงุฑูุฉ (ูุงูุงูุชุตุงุฑ) ูู ูุฃุณ ููุธูุฉ ุงูุนูู ุงูุฏูููุฉ ุงูุฑูุณูุฉ 2018 - CodeBall</a></li>
<li><a href="../ar440402/index.html">ูุทูุฑ SearchFace ุญูู ููุฒุงุช ุงูุฎูุงุฑุฒููุฉ</a></li>
<li><a href="../ar440404/index.html">"ููุฏุณุฉ ุงููุนูููุงุช": mitap ูู OZON</a></li>
<li><a href="../ar440410/index.html">ุชุญุฏูุฏ ุงูุตูุฑ ูุชุฎุฒูููุง ูุคูุชูุง ูุนุฑุถูุง ุนูู ุงูุฎุฑูุทุฉ</a></li>
<li><a href="../ar440412/index.html">Zimbra Collaboration Suite ู MS Exchange ุนูู ููุณ ุงููุฌุงู</a></li>
<li><a href="../ar440414/index.html">ุญูู linter ุ ุฌูุฏุฉ ุงูููุฏ ุ ุงูุฌูุฏุฉ ุจุดูู ุนุงู ูุฅุฏุงุฑุฉ ุงูุฌูุฏุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>