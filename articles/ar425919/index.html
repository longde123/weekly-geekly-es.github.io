<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐พ ๐ ๐๐ฟ ุฎุฑุงุฆุท ูุณุฏุณ ูู ุงููุญุฏุฉ: ุงูุญูุธ ูุงูุชุญููู ุ ุงูููุงู ุ ุงููุณุงูุงุช ๐๐ฝ ๐จโ๐จโ๐ง ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุฃุฌุฒุงุก 1-3: ุงูุดุจูุฉ ูุงูุฃููุงู ูุงุฑุชูุงุนุงุช ุงูุฎููุฉ 

 ุงูุฃุฌุฒุงุก 4-7: ุงููุทุจุงุช ูุงูุฃููุงุฑ ูุงูุทุฑู 

 ุงูุฃุฌุฒุงุก 8-11: ุงููุงุก ูุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ูุงูุฃุณูุงุฑ 

 ุงูุฃุฌุฒุงุก 12-1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฎุฑุงุฆุท ูุณุฏุณ ูู ุงููุญุฏุฉ: ุงูุญูุธ ูุงูุชุญููู ุ ุงูููุงู ุ ุงููุณุงูุงุช</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425919/" style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 1-3: ุงูุดุจูุฉ ูุงูุฃููุงู ูุงุฑุชูุงุนุงุช ุงูุฎููุฉ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 4-7: ุงููุทุจุงุช ูุงูุฃููุงุฑ ูุงูุทุฑู</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 8-11: ุงููุงุก ูุงูุฃุดูุงู ุงูุฃุฑุถูุฉ ูุงูุฃุณูุงุฑ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 12-15: ุงูุญูุธ ูุงูุชุญููู ุ ุงูููุงู ุ ุงููุณุงูุงุช</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 16-19: ุฅูุฌุงุฏ ุงูุทุฑูู ููุฑู ุงููุงุนุจูู ูุงูุฑุณูู ุงููุชุญุฑูุฉ</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 20-23: ุถุจุงุจ ุงูุญุฑุจ ุ ุจุญุซ ุงูุฎุฑุงุฆุท ุ ุงูุฌูู ุงูุฅุฌุฑุงุฆู</a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฃุฌุฒุงุก 24-27: ุฏูุฑุฉ ุงููุงุก ุ ุงูุชุขูู ุ ุงูููุงุทู ุงูุฃุญูุงุฆูุฉ ุ ุงูุฎุฑูุทุฉ ุงูุฃุณุทูุงููุฉ</a> <br><br><h1 style=";text-align:right;direction:rtl">  ุงูุฌุฒุก 12: ุญูุธ ูุชุญููู </h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุชุจุน ููุน ุงูุชุถุงุฑูุณ ุจุฏูุงู ูู ุงูููู. </li><li style=";text-align:right;direction:rtl">  ูู ุจุฅูุดุงุก ููู. </li><li style=";text-align:right;direction:rtl">  ููุชุจ ุงูุจูุงูุงุช ูู ููู ุ ุซู ููุฑุฃู. </li><li style=";text-align:right;direction:rtl">  ูููู ุจุชุณูุณู ุจูุงูุงุช ุงูุฎููุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅููุงุต ุญุฌู ุงูููู. </li></ul><br>  ูุญู ูุนุฑู ุจุงููุนู ููููุฉ ุฅูุดุงุก ุฎุฑุงุฆุท ูุซูุฑุฉ ููุงูุชูุงู.  ุงูุขู ุฃูุช ุจุญุงุฌุฉ ุฅูู ุชุนูู ููููุฉ ุญูุธูุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7bb/2ce/740/7bb2ce7409d37733e3b6f96c237ce1e9.jpg"></div><a name="habracut"></a><br>  <i>ุชู <a href="">ุชุญูููู</a> ูู ููู <a href="">test.map</a> .</i> <br><br><h2 style=";text-align:right;direction:rtl">  ููุน ุงูุชุถุงุฑูุณ </h2><br>  ุนูุฏ ุญูุธ ุฎุฑูุทุฉ ุ ูุง ูุญุชุงุฌ ุฅูู ุชุฎุฒูู ุฌููุน ุงูุจูุงูุงุช ุงูุชู ูุชุชุจุนูุง ุฃุซูุงุก ุชูููุฐ ุงูุชุทุจูู.  ุนูู ุณุจูู ุงููุซุงู ุ ูุญุชุงุฌ ููุท ุฅูู ุชุฐูุฑ ูุณุชูู ุงุฑุชูุงุน ุงูุฎููุฉ.  ูุชู ุฃุฎุฐ ููุถุนู ุงูุฑุฃุณู ููุณู ูู ูุฐู ุงูุจูุงูุงุช ุ ูุฐูู ูุง ุชุญุชุงุฌ ุฅูู ุชุฎุฒููู.  ูู ุงููุงูุน ุ ูู ุงูุฃูุถู ุฅุฐุง ูู ูุฎุฒู ูุฐู ุงูููุงููุณ ุงููุญุณูุจุฉ.  ูุจุงูุชุงูู ุ ุณุชุธู ุจูุงูุงุช ุงูุฎุฑูุทุฉ ุตุญูุญุฉ ุ ุญุชู ุฅุฐุง ูุฑุฑูุง ูู ููุช ูุงุญู ุชุบููุฑ ุฅุฒุงุญุฉ ุงูุงุฑุชูุงุน.  ุงูุจูุงูุงุช ูููุตูุฉ ุนู ุนุฑุถูุง. <br><br>  ูุจุงููุซู ุ ูุง ูุญุชุงุฌ ุฅูู ุชุฎุฒูู ุงูููู ุงูุฏููู ููุฎููุฉ.  ููููู ูุชุงุจุฉ ุฃู ุงูุฎููุฉ ุฎุถุฑุงุก.  ููู ุงูุธู ุงูุฃุฎุถุฑ ุงูุฏููู ูููู ุฃู ูุชุบูุฑ ูุน ุชุบููุฑ ูู ุงูููุท ุงูุจุตุฑู.  ููููุงู ุจุฐูู ุ ูููููุง ุญูุธ ููุฑุณ ุงูุฃููุงู ุ ูููุณ ุงูุฃููุงู ููุณูุง.  ูู ุงููุงูุน ุ ูุฏ ูููู ูุงููุงู ุจุงููุณุจุฉ ููุง ุชุฎุฒูู ูุฐุง ุงูููุฑุณ ุจุฏูุงู ูู ุงูุฃููุงู ุงูุญููููุฉ ูู ุงูุฎูุงูุง ูู ููุช ุงูุชุดุบูู.  ุณูุณูุญ ูุฐุง ูุงุญููุง ุจุงูุงูุชูุงู ุฅูู ุชุตูุฑ ุฃูุซุฑ ุชุนููุฏูุง ููุฅุบุงุซุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุญุฑูู ูุตูููุฉ ูู ุงูุฃููุงู </h3><br>  ุฅุฐุง ูู ุชุนุฏ ุงูุฎูุงูุง ุชุญุชูู ุนูู ุจูุงูุงุช ููููุฉ ุ ููุฌุจ ุชุฎุฒูููุง ูู ููุงู ุขุฎุฑ.  ูู ุงูุฃูุซุฑ ููุงุกูุฉ ูุชุฎุฒููู ูู <code>HexMetrics</code> .  ูุฐูู ุฏุนููุง ูุถูู ูุฌููุนุฉ ูู ุงูุฃููุงู ุฅูููุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Color[] colors;</code> </pre> <br>  ูุซู ุฌููุน ุงูุจูุงูุงุช ุงูุนุงูููุฉ ุงูุฃุฎุฑู ุ ูุซู ุงูุถูุถุงุก ุ ูููููุง ุชููุฆุฉ ูุฐู ุงูุฃููุงู ุจุงุณุชุฎุฏุงู <code>HexGrid</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Color[] colors; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexMetrics.noiseSource = noiseSource; HexMetrics.InitializeHashGrid(seed); HexMetrics.colors = colors; โฆ } โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!HexMetrics.noiseSource) { HexMetrics.noiseSource = noiseSource; HexMetrics.InitializeHashGrid(seed); HexMetrics.colors = colors; } }</code> </pre> <br>  ูุจูุง ุฃููุง ูุง ูููู ุงูุขู ุจุชุนููู ุงูุฃููุงู ูุจุงุดุฑุฉ ููุฎูุงูุง ุ ูุณูู ูุชุฎูุต ูู ุงูููู ุงูุงูุชุฑุงุถู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public Color defaultColor = Color.white; โฆ void CreateCell (int x, int z, int i) { โฆ HexCell cell = cells[i] = Instantiate&lt;HexCell&gt;(cellPrefab); cell.transform.localPosition = position; cell.coordinates = HexCoordinates.FromOffsetCoordinates(x, z); // cell.Color = defaultColor; โฆ }</span></span></code> </pre> <br>  ุงุถุจุท ุงูุฃููุงู ุงูุฌุฏูุฏุฉ ูุชุชูุงุณุจ ูุน ุงูุตููู ุงูุนุงู ููุญุฑุฑ ุงูุฎุฑุงุฆุท ุงูุณุฏุงุณู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4bf/3cb/002/4bf3cb002342f9ab3aa482cf3a526042.png"></div><br>  <i>ุชูุช ุฅุถุงูุฉ ุงูุฃููุงู ุฅูู ุงูุดุจูุฉ.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุจูุงุก ุงูุฎููุฉ </h3><br>  ูู ุจุฅุฒุงูุฉ ุญูู ุงูููู ูู <code>HexCell</code> .  ุจุฏูุงู ูู ุฐูู ุ ุณูููู ุจุชุฎุฒูู ุงูููุฑุณ.  ุจุฏูุงู ูู ููุฑุณ ุงูุฃููุงู ุ ูุณุชุฎุฏู ููุฑุณ ููุน ุฅุบุงุซุฉ ุฃูุซุฑ ุนููููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// Color color; int terrainTypeIndex;</span></span></code> </pre> <br>  ูููู ูุฎุงุตูุฉ ุงูููู ุงุณุชุฎุฏุงู ูุฐุง ุงูููุฑุณ ููุท ููุญุตูู ุนูู ุงูููู ุงูููุงุจู.  ุงูุขู ูู ูุชู ุชุนูููู ูุจุงุดุฑุฉ ุ ูุฐุง ุงุญุฐู ูุฐุง ุงูุฌุฒุก.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุตู ุนูู ุฎุทุฃ ูู ุงูุชุฑุฌูุฉ ุ ูุงูุฐู ุณูููู ุจุฅุตูุงุญู ูุฑูุจูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Color Color { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> HexMetrics.colors[terrainTypeIndex]; } <span class="hljs-comment"><span class="hljs-comment">// set { // โฆ // } }</span></span></code> </pre> <br>  ุฃุถู ุฎุงุตูุฉ ุฌุฏูุฏุฉ ููุญุตูู ุนูู ูุคุดุฑ ููุน ุงุฑุชูุงุน ุฌุฏูุฏ ูุชุนูููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TerrainTypeIndex { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> terrainTypeIndex; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (terrainTypeIndex != <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { terrainTypeIndex = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; Refresh(); } } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ููููุฉ ูุญุฑุฑ </h3><br>  ุฏุงุฎู <code>HexMapEditor</code> ูุญุฐู ุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุชุนููุฉ ุจุงูุฃููุงู.  ุณูุคุฏู ูุฐุง ุฅูู ุฅุตูุงุญ ุฎุทุฃ ุงูุชุฑุฌูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public Color[] colors; โฆ // Color activeColor; โฆ // bool applyColor; โฆ // public void SelectColor (int index) { // applyColor = index &gt;= 0; // if (applyColor) { // activeColor = colors[index]; // } // } โฆ // void Awake () { // SelectColor(0); // } โฆ void EditCell (HexCell cell) { if (cell) { // if (applyColor) { // cell.Color = activeColor; // } โฆ } }</span></span></code> </pre> <br>  ุฃุถู ุงูุขู ุญูู ูุทุฑููุฉ ููุชุญูู ูู ููุฑุณ ููุน ุงูุงุฑุชูุงุน ุงููุดุท. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> activeTerrainTypeIndex; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTerrainTypeIndex</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index</span></span></span><span class="hljs-function">)</span></span> { activeTerrainTypeIndex = index; }</code> </pre> <br>  ูุณุชุฎุฏู ูุฐู ุงูุทุฑููุฉ ูุจุฏูู ูุทุฑููุฉ <code>SelectColor</code> ุงูููููุฏุฉ ุงูุขู.  ูู ุจุชูุตูู ุฃุฏูุงุช ุงูุฃููุงู ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุจุงุณุชุฎุฏุงู <code>SetTerrainTypeIndex</code> ุ ูุน ุชุฑู ูู ุดูุก ุขุฎุฑ ุฏูู ุชุบููุฑ.  ูุฐุง ูุนูู ุฃู ุงููุคุดุฑ ุงูุณูุจู ูุง ูุฒุงู ููุฏ ุงูุงุณุชุฎุฏุงู ููุนูู ุฃูู ูุง ูุฌุจ ุชุบููุฑ ุงูููู. <br><br>  ูู ุจุชุบููุฑ <code>EditCell</code> ุจุญูุซ ูุชู ุชุนููู ููุฑุณ ููุน ุงูุงุฑุชูุงุน ููุฎููุฉ ุงูุชู ูุชู ุชุญุฑูุฑูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EditCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (activeTerrainTypeIndex &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { cell.TerrainTypeIndex = activeTerrainTypeIndex; } โฆ } }</code> </pre> <br>  ุนูู ุงูุฑุบู ูู ุฃููุง ุฃุฒููุง ุจูุงูุงุช ุงูููู ูู ุงูุฎูุงูุง ุ ูุฌุจ ุฃู ุชุนูู ุงูุฎุฑูุทุฉ ุจุงูุทุฑููุฉ ููุณูุง ููุง ูุงูุช ูู ูุจู.  ุงูุงุฎุชูุงู ุงููุญูุฏ ูู ุฃู ุงูููู ุงูุงูุชุฑุงุถู ูู ุงูุขู ุงูุฃูู ูู ุงูุตููู.  ูู ุญุงูุชู ูู ุฃุตูุฑ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8cc/e7e/6ac/8cce7e6acb202e119a6e7d5cdae2db74.png"></div><br>  <i>ุงูุฃุตูุฑ ูู ุงูููู ุงูุงูุชุฑุงุถู ุงูุฌุฏูุฏ.</i> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ุญูุธ ุงูุจูุงูุงุช ูู ููู </h2><br>  ููุชุญูู ูู ุญูุธ ูุชุญููู ุงูุฎุฑูุทุฉ ุ ูุณุชุฎุฏู <code>HexMapEditor</code> .  ุณููุดุฆ ุทุฑููุชูู ููููุงู ุจุฐูู ุ ููุชุฑูููุง ูุงุฑุบุชูู ุงูุขู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { }</code> </pre> <br>  ุฃุถู ุฒุฑูู ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ( <em>GameObject / UI / Button</em> ).  ูู ุจุชูุตูููุง ุจุงูุฃุฒุฑุงุฑ ูุฅุนุทุงุก ุงูููุตูุงุช ุงูููุงุณุจุฉ.  ููุฏ ูุถุนุชูู ูู ุฃุณูู ุงูููุญุฉ ุงููููู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6ec/eba/96b/6eceba96bb5ff18fd0b4ad9472a19695.png"></div><br>  <i>ุฃุฒุฑุงุฑ ุงูุญูุธ ูุงูุชุญููู.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ูููุน ุงูููู </h3><br>  ูุชุฎุฒูู ุจุทุงูุฉ ุ ุชุญุชุงุฌ ุฅูู ุญูุธูุง ูู ููุงู ูุง.  ููุง ูู ุงูุญุงู ูู ูุนุธู ุงูุฃูุนุงุจ ุ ุณูู ูููู ุจุชุฎุฒูู ุงูุจูุงูุงุช ูู ููู.  ูููู ุฃูู ูุถุน ูุฐุง ุงูููู ูู ูุธุงู ุงููููุงุชุ  ุชุนุชูุฏ ุงูุฅุฌุงุจุฉ ุนูู ูุธุงู ุงูุชุดุบูู ุงูุฐู ุชุนูู ููู ุงููุนุจุฉ.  ููู ูุธุงู ุชุดุบูู ูุนุงููุฑ ุฎุงุตุฉ ุจู ูุชุฎุฒูู ุงููููุงุช ุงููุชุนููุฉ ุจุงูุชุทุจููุงุช. <br><br>  ูุณูุง ุจุญุงุฌุฉ ููุนุฑูุฉ ูุฐู ุงููุนุงููุฑ.  ูุนุฑู Unity ุงููุณุงุฑ ุงูุตุญูุญ ุงูุฐู ูููู ุฃู ูุญุตู ุนููู ูุน <code>Application.persistentDataPath</code> .  ููููู ุงูุชุญูู ูู ููู ุณูููู ูุนู ุ ูู ุทุฑููุฉ <code>Save</code> ุ ุนุฑุถู ูู ูุญุฏุฉ ุงูุชุญูู ูุงูุถุบุท ุนูู ุงูุฒุฑ ูู ูุถุน ุงูุชุดุบูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Debug.Log(Application.persistentDataPath); }</code> </pre> <br>  ูู ุฃูุธูุฉ ุณุทุญ ุงูููุชุจ ุ ุณูุญุชูู ุงููุณุงุฑ ุนูู ุงุณู ุงูุดุฑูุฉ ูุงูููุชุฌ.  ูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงููุณุงุฑ ูู ูุจู ูู ูู ุงููุญุฑุฑ ูุงูุชุฌููุน.  ูููู ุชูููู ุงูุฃุณูุงุก ูู <em>ุชุญุฑูุฑ / ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน / ูุงุนุจ</em> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/656/a60/056/656a60056f9d51c5a5f3d81762135b87.png"></div><br>  <i>ุงุณู ุงูุดุฑูุฉ ูุงูููุชุฌ.</i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ูุง ูููููู ุงูุนุซูุฑ ุนูู ูุฌูุฏ Library ุนูู ุฌูุงุฒ Macุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุบุงูุจูุง ูุง ูููู ูุฌูุฏ <em>ุงูููุชุจุฉ</em> ูุฎูููุง.  ุชุนุชูุฏ ุทุฑููุฉ ุนุฑุถู ุนูู ุฅุตุฏุงุฑ OS X. ุฅุฐุง ูู ููู ูุฏูู ุฅุตุฏุงุฑ ูุฏูู ุ ูุญุฏุฏ ุงููุฌูุฏ ุงูุฑุฆูุณู ูู Finder ูุงูุชูู ุฅูู <em>Show View Options</em> .  ููุฌุฏ ูุฑุจุน ุงุฎุชูุงุฑ ููุฌูุฏ <em>ุงูููุชุจุฉ</em> . </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฐุง ุนู WebGLุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุง ูููู ูุฃูุนุงุจ WebGL ุงููุตูู ุฅูู ูุธุงู ูููุงุช ุงููุณุชุฎุฏู.  ุจุฏูุงู ูู ุฐูู ุ ูุชู ุฅุนุงุฏุฉ ุชูุฌูู ุฌููุน ุนูููุงุช ุงููููุงุช ุฅูู ูุธุงู ูููุงุช ููุฌูุฏ ูู ุงูุฐุงูุฑุฉ.  ุฅููุง ุดูุงูุฉ ุจุงููุณุจุฉ ููุง.  ููุน ุฐูู ุ ูุญูุธ ุงูุจูุงูุงุช ุ ุณุชุญุชุงุฌ ุฅูู ุทูุจ ุตูุญุฉ ุงูููุจ ูุฏูููุง ูุฅููุงุก ุงูุจูุงูุงุช ูู ุชุฎุฒูู ุงููุชุตูุญ. </div></div><br><h3 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููู </h3><br>  ูุฅูุดุงุก ููู ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ูุฆุงุช ูู ูุณุงุญุฉ ุงูุงุณู <code>System.IO</code> .  ูุฐูู ุ ูุถูู ุนุจุงุฑุฉ <code>using</code> ููุง ุนุจุฑ ูุฆุฉ <code>HexMapEditor</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.EventSystems; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexMapEditor</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { โฆ }</code> </pre> <br>  ูุญุชุงุฌ ุฃููุงู ุฅูู ุฅูุดุงุก ุงููุณุงุฑ ุงููุงูู ููููู.  ูุณุชุฎุฏู <em>test.map</em> ูุงุณู ููููู.  ูุฌุจ ุฅุถุงูุชู ุฅูู ูุณุงุฑ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ.  ูุนุชูุฏ ูุง ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุฅุฏุฎุงู ุฎุท ูุงุฆู ุฃู ูุงุฆู (ุฎุท ูุงุฆู ุฃู ูุงุฆู) ุนูู ุงููุธุงู ุงูุฃุณุงุณู.  <code>Path.Combine</code> ุทุฑููุฉ <code>Path.Combine</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); }</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุงููุตูู ุฅูู ุงูููู ูู ูุฐุง ุงููููุน.  ูููู ุจุฐูู ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <code>File.Open</code> .  ูุธุฑูุง ูุฃููุง ูุฑูุฏ ูุชุงุจุฉ ุงูุจูุงูุงุช ูู ูุฐุง ุงูููู ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ูุถุน ุงูุฅูุดุงุก ุงูุฎุงุต ุจู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุชู ุฅูุดุงุก ููู ุฌุฏูุฏ ุนูู ุงููุณุงุฑ ุงููุญุฏุฏ ุ ุฃู ุณูุชู ุงุณุชุจุฏุงู ููู ููุฌูุฏ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); File.Open(path, FileMode.Create);</code> </pre> <br>  ุณุชููู ูุชูุฌุฉ ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑููุฉ ุชุฏูู ุจูุงูุงุช ููุชูุญ ูุฑุชุจุท ุจูุฐุง ุงูููู.  ูููููุง ุงุณุชุฎุฏุงูู ููุชุงุจุฉ ุงูุจูุงูุงุช ุฅูู ููู.  ููุฌุจ ุฃูุง ููุณู ุฅุบูุงู ุงูุฏูู ุนูุฏูุง ูู ูุนุฏ ุจุญุงุฌุฉ ุฅููู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); Stream fileStream = File.Open(path, FileMode.Create); fileStream.Close();</code> </pre> <br>  ูู ูุฐู ุงููุฑุญูุฉ ุ ุนูุฏ ุงูููุฑ ููู ุงูุฒุฑ <em>ุญูุธ</em> ุ ุณูุชู ุฅูุดุงุก ููู <em>test.map</em> ูู ุงููุฌูุฏ ุงููุญุฏุฏ <em>ููุณุงุฑ</em> ููุจูุงูุงุช ุงููุฎุฒูุฉ.  ุฅุฐุง ุฏุฑุณุช ูุฐุง ุงูููู ุ ุณูููู ูุงุฑุบูุง ููุจูุบ ุญุฌูู 0 ุจุงูุช ุ ูุฃููุง ุญุชู ุงูุขู ูู ููุชุจ ุฃู ุดูุก ุฅููู. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุจ ุฅูู ุงูููู </h3><br>  ููุชุงุจุฉ ุงูุจูุงูุงุช ุฅูู ููู ุ ูุญุชุงุฌ ุฅูู ุทุฑููุฉ ูุฏูู ุงูุจูุงูุงุช ุฅููู.  ุฃุณูู ุทุฑููุฉ ููููุงู ุจุฐูู ูู ุจุงุณุชุฎุฏุงู <code>BinaryWriter</code> .  ุชุณูุญ ูู ูุฐู ุงููุงุฆูุงุช ุจูุชุงุจุฉ ุงูุจูุงูุงุช ุงูุจุฏุงุฆูุฉ ุฅูู ุฃู ุฏูู. <br><br>  ูู <code>BinaryWriter</code> ูุงุฆู <code>BinaryWriter</code> ุฌุฏูุฏ ุ ูุณูููู ุฏูู ุงูููู ุงูุฎุงุต ุจูุง <code>BinaryWriter</code> .  ุฅุบูุงู ุงููุงุชุจ ูุบูู ุงูุฏูู ุงูุฐู ูุณุชุฎุฏูู.  ูุฐูู ุ ูู ูุนุฏ ุจุญุงุฌุฉ ุฅูู ุชุฎุฒูู ุฑุงุจุท ูุจุงุดุฑ ููุฏูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); BinaryWriter writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryWriter(File.Open(path, FileMode.Create)); writer.Close();</code> </pre> <br>  ูููู ุงูุจูุงูุงุช ุฅูู ุฏูู ุ ูููููุง ุงุณุชุฎุฏุงู ุทุฑููุฉ <code>BinaryWriter.Write</code> .  ููุงู ููุน ูุฎุชูู ูู ุทุฑููุฉ <code>Write</code> ูุฌููุน ุงูุฃููุงุน ุงูุจุฏุงุฆูุฉ ุ ูุซู ุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ ูุงูุนุงุฆูุฉ.  ููููู ุฃูุถูุง ุชุณุฌูู ุงูุฎุทูุท.  ููุญุงูู ูุชุงุจุฉ ุงูุนุฏุฏ ุงูุตุญูุญ 123. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> BinaryWriter writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryWriter(File.Open(path, FileMode.Create)); writer.Write(<span class="hljs-number"><span class="hljs-number">123</span></span>); writer.Close();</code> </pre> <br>  ุงููุฑ ููู ุงูุฒุฑ <em>ุญูุธ</em> ููุญุต <em>ุฎุฑูุทุฉ ุงูุงุฎุชุจุงุฑ</em> ูุฑุฉ ุฃุฎุฑู.  ุงูุขู ุญุฌููุง 4 ุจุงูุช ุ ูุฃู ุงูุญุฌู ุงูุตุญูุญ ูู 4 ุจุงูุช. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ููุธูุฑ ูุฏูุฑ ุงููููุงุช ุฃู ุงูููู ูุดุบู ูุณุงุญุฉ ุฃูุจุฑุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุฃู ุฃูุธูุฉ ุงููููุงุช ุชูุณู ุงููุณุงุญุฉ ุฅูู ูุชู ุงูุจุงูุช.  ูุง ุชุชุนูุจ ูุญุฏุงุช ุงูุจุงูุช ุงููุฑุฏูุฉ.  ูุธุฑูุง ูุฃู <em>test.map</em> ูุณุชุบุฑู ุฃุฑุจุนุฉ ุจุงูุชุงุช ููุท ุญุชู ุงูุขู ุ ูุฅูู ูุชุทูุจ ูุชูุฉ ูุงุญุฏุฉ ูู ูุณุงุญุฉ ุงูุชุฎุฒูู. </div></div><br>  ูุงุญุธ ุฃููุง ูููู ุจุชุฎุฒูู ุงูุจูุงูุงุช ุงูุซูุงุฆูุฉ ุ ูููุณ ูุตูุง ูููู ูุฑุงุกุชู ุจูุงุณุทุฉ ุงูุฅูุณุงู.  ูุฐูู ุ ุฅุฐุง ูุชุญูุง ุงูููู ูู ูุญุฑุฑ ูุตูุต ุ ูุณูู ูุฑู ูุฌููุนุฉ ูู ุงูุฃุญุฑู ุบูุฑ ุงููููุฒุฉ.  ูู ุงููุญุชูู ุฃู ุชุฑู ุงูุฑูุฒ <em>{</em> ูุชุจูุนูุง ุจุดูุก ุฃู ุจุนุถ ุงูุนูุงุตุฑ ุงููุงุฆุจุฉ. <br><br>  ููููู ูุชุญ ุงูููู ูู ูุญุฑุฑ ุณุช ุนุดุฑู.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุฑู <em>7b 00 00 00</em> .  ูุฐู ุฃุฑุจุนุฉ ุจุงูุชุงุช ูู ุนุฏุฏูุง ุงูุตุญูุญ ุ ุชู ุชุนููููุง ุจุชุฑููุฒ ุณุฏุงุณู ุนุดุฑู.  ูู ุงูุฃุฑูุงู ุงูุนุดุฑูุฉ ุงูุนุงุฏูุฉ ุ ุชููู ูุฐู ุงููููุฉ <em>123 0 0 0</em> .  ูู ุซูุงุฆู ุ ุงูุจุงูุช ุงูุฃูู ูุดุจู <em>01111011</em> . <br><br>  ุฑูุฒ ASCII ูู <em>{</em> ูู 123 ุ ูุฐุง ูููู ุนุฑุถ ูุฐุง ุงูุญุฑู ูู ูุญุฑุฑ ูุตูุต.  ASCII 0 ูู ุญุฑู ูุงุฑุบ ูุง ูุทุงุจู ุฃู ุฃุญุฑู ูุฑุฆูุฉ. <br><br>  ุงูุจุงูุชุงุช ุงูุซูุงุซุฉ ุงููุชุจููุฉ ุชุณุงูู ุตูุฑ ุ ูุฃููุง ูุชุจูุง ุฑูููุง ุฃูู ูู 256. ุฅุฐุง ูุชุจูุง 256 ุ ูุณูุฑู <em>00 01 00 00</em> ูู ูุญุฑุฑ ุงูุณุฏุงุณู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฃูุง ูุฌุจ ุชุฎุฒูู 123 ูู 00 00 00 7bุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู <code>BinaryWriter</code> ุชูุณูู ุงูููุงูุฉ ุงูุตุบูุฑุฉ ูุญูุธ ุงูุฃุฑูุงู.  ูุฐุง ูุนูู ุฃูู ูุชู ูุชุงุจุฉ ุงูุจุงูุช ุงูุฃูู ุฃูููุฉ ุฃููุงู.  ุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูุชูุณูู ุจูุงุณุทุฉ Microsoft ูู ุชุทููุฑ ุฅุทุงุฑ ุนูู .NET.  ุฑุจูุง ุชู ุงุฎุชูุงุฑู ูุฃู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ Intel ุชุณุชุฎุฏู ุชูุณูู ุงูููุงูุฉ ุงูุตุบูุฑุฉ. <br><br>  ุจุฏูู ููุง ูู ููุงูุฉ ูุจูุฑุฉ ุ ุญูุซ ูุชู ุชุฎุฒูู ุงูุจุงูุชุงุช ุงูุฃูุซุฑ ุฃูููุฉ ุฃููุงู.  ูุฐุง ูุชูุงูู ูุน ุงูุชุฑุชูุจ ุงููุนุชุงุฏ ููุฃุฑูุงู ูู ุงูุฃุฑูุงู.  123 ูุงุฆุฉ ูุซูุงุซุฉ ูุนุดุฑูู ูุฃููุง ูุนูู ุงูุฑูู ุงูููุงุณู ุงููุจูุฑ.  ุฅุฐุง ูุงูุช ุตุบูุฑุฉ ููุบุงูุฉ ุ ูุฅู 123 ูุนูู ุซูุงุซูุงุฆุฉ ููุงุญุฏ ูุนุดุฑูู. </div></div><br><h3 style=";text-align:right;direction:rtl">  ูุญู ูุฌุนู ุงูููุงุฑุฏ ูุฌุงููุฉ </h3><br>  ูู ุงูููู ุฃู ูุบูู ุงููุงุชุจ.  ุฃุซูุงุก ูุชุญู ุ ูููู ูุธุงู ุงููููุงุช ุจุชุฃููู ุงูููู ุ ููุง ูููุน ุงูุนูููุงุช ุงูุฃุฎุฑู ูู ุงููุชุงุจุฉ ุฅููู.  ุฅุฐุง ูุณููุง ุฅุบูุงููุง ุ ูุณูุญุฌุจ ุฃููุณูุง ุฃูุถูุง.  ุฅุฐุง ุถุบุทูุง ุนูู ุฒุฑ ุงูุญูุธ ูุฑุชูู ุ ูู ุงููุฑุฉ ุงูุซุงููุฉ ูู ูุชููู ูู ูุชุญ ุงูุฏูู. <br><br>  ุจุฏูุงู ูู ุฅุบูุงู ุงููุงุชุจ ูุฏูููุง ุ ูููููุง ุฅูุดุงุก ูุชูุฉ <code>using</code> ููุฐุง ุงูุบุฑุถ.  ููู ุชุญุฏุฏ ุงููุทุงู ุงูุฐู ูููู ููู ุงููุงุชุจ ุตุงูุญูุง.  ุนูุฏูุง ูุชุฌุงูุฒ ุงูููุฏ ุงููุงุจู ููุชูููุฐ ูุฐุง ุงููุทุงู ุ ูุชู ุญุฐู ุงููุงุชุจ ูุฅุบูุงู ูุคุดุฑ ุงูุชุฑุงุจุท. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ( BinaryWriter writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryWriter(File.Open(path, FileMode.Create)) ) { writer.Write(<span class="hljs-number"><span class="hljs-number">123</span></span>); } <span class="hljs-comment"><span class="hljs-comment">// writer.Close();</span></span></code> </pre> <br>  ุณูุนูู ุฐูู ูุฃู ูุฆุชู ุงููุงุชุจ ูุชุฏูู ุงูููู ุชุทุจู ูุงุฌูุฉ <code>IDisposable</code> .  ุชุญุชูู ูุฐู ุงููุงุฆูุงุช ุนูู ุทุฑููุฉ <code>Dispose</code> ุ ูุงูุชู ูุชู ุงุณุชุฏุนุงุคูุง ุจุดูู ุบูุฑ ูุจุงุดุฑ ุนูุฏูุง ุชุชุฌุงูุฒ ูุทุงู <code>using</code> . <br><br>  ุงูููุฒุฉ ุงููุจุฑู <code>using</code> ูู ุฃูู ูุนูู ุจุบุถ ุงููุธุฑ ุนู ููููุฉ ููุงุฏ ูุทุงู ุงูุจุฑูุงูุฌ.  ุงูุนูุฏุฉ ุงููุจูุฑุฉ ูุงูุงุณุชุซูุงุกุงุช ูุงูุฃุฎุทุงุก ูุง ุชุฒุนุฌู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููู ููุฌุฒ ููุบุงูุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช </h3><br>  ููุฑุงุกุฉ ุงูุจูุงูุงุช ุงูููุชูุจุฉ ูุณุจููุง ุ ูุญุชุงุฌ ุฅูู ุฅุฏุฑุงุฌ ุงูุฑูุฒ ูู ุทุฑููุฉ <code>Load</code> .  ููุง ูู ุญุงูุฉ ุงูุญูุธ ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ูุณุงุฑ ููุชุญ ุฏูู ุงูููู.  ุงููุฑู ูู ุฃููุง ุงูุขู ููุชุญ ุงูููู ูููุฑุงุกุฉ ูููุณ ูููุชุงุจุฉ.  ูุจุฏูุงู ูู ุงููุงุชุจ ูุญุชุงุฌ ุฅูู <code>BinaryReader</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ( BinaryReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryReader(File.Open(path, FileMode.Open)) ) { } }</code> </pre> <br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูููููุง ุงุณุชุฎุฏุงู ุทุฑููุฉ <code>File.OpenRead</code> ููุชุญ ุงูููู ูููุฑุงุกุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (BinaryReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryReader(File.OpenRead(path))) { }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ูุง ูุณุชุฎุฏู File.OpenWrite ุนูุฏ ุงููุชุงุจุฉุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุชููู ูุฐู ุงูุทุฑููุฉ ุจุฅูุดุงุก ุฏูู ูุถูู ุจูุงูุงุช ุฅูู ุงููููุงุช ุงูููุฌูุฏุฉ ุ ุจุฏูุงู ูู ุงุณุชุจุฏุงููุง. </div></div><br>  ุนูุฏ ุงููุฑุงุกุฉ ุ ูุญุชุงุฌ ุฅูู ุงูุฅุดุงุฑุฉ ุจุดูู ุตุฑูุญ ุฅูู ููุน ุงูุจูุงูุงุช ุงููุณุชููุฉ.  ููุฑุงุกุฉ ุนุฏุฏ ุตุญูุญ ูู ุฏูู ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู <code>BinaryReader.ReadInt32</code> .  ููุฑุฃ ูุฐุง ุงูุฃุณููุจ ุนุฏุฏูุง ุตุญูุญูุง 32 ุจุช ุ ุฃู ุฃุฑุจุนุฉ ุจุงูุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (BinaryReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryReader(File.OpenRead(path))) { Debug.Log(reader.ReadInt32()); }</code> </pre> <br>  ูุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ุนูุฏ ุชููู <em>123 ุ</em> ุณูููู ูุงููุงู ุจุงููุณุจุฉ ููุง ูุฑุงุกุฉ ุจุงูุช ูุงุญุฏ.  ูููู ูู ุงูููุช ููุณู ุ ุณุชุจูู ุซูุงุซ ูุญุฏุงุช ุจุงูุช ุชูุชูู ุฅูู ูุฐุง ุงูุนุฏุฏ ุงูุตุญูุญ ูู ุงูุฏูู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ูุนูู ูุฐุง ููุฃุฑูุงู ุฎุงุฑุฌ ุงููุงุตู ุงูุฒููู 0-255.  ูุฐูู ุ ูุง ุชูุนู ุฐูู. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow">ุญุฒูุฉ ุงููุญุฏุฉ</a> <br><br><h2 style=";text-align:right;direction:rtl">  ูุชุงุจุฉ ุจูุงูุงุช ุงูุฎุฑุงุฆุท ููุฑุงุกุชูุง </h2><br>  ุนูุฏ ุญูุธ ุงูุจูุงูุงุช ุ ูุฅู ุงูุณุคุงู ุงูููู ูู ูุง ุฅุฐุง ูุงู ูุฌุจ ุงุณุชุฎุฏุงู ุชูุณูู ูููู ูุฑุงุกุชู ุจูุงุณุทุฉ ุงูุฅูุณุงู.  ุนุงุฏุฉู ูุง ุชููู ุงูุชูุณููุงุช ุงูุชู ูููู ูุฑุงุกุชูุง ุจูุงุณุทุฉ ุงูุฅูุณุงู ูู JSON ู XML ู ASCII ุงูุนุงุฏู ูุน ููุน ูู ุงูุจููุฉ.  ูููู ูุชุญ ูุฐู ุงููููุงุช ูุชูุณูุฑูุง ูุชุญุฑูุฑูุง ูู ูุญุฑุฑู ุงููุตูุต.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฅููุง ุชุจุณุท ุชุจุงุฏู ุงูุจูุงูุงุช ุจูู ุงูุชุทุจููุงุช ุงููุฎุชููุฉ. <br><br>  ููุน ุฐูู ุ ูุฅู ูุฐู ุงูุชูุณููุงุช ููุง ูุชุทูุจุงุชูุง ุงูุฎุงุตุฉ.  ุณุชุณุชููู ุงููููุงุช ูุณุงุญุฉ ุฃูุจุฑ (ุฃุญูุงููุง ุฃูุจุฑ ุจูุซูุฑ) ูู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงูุซูุงุฆูุฉ.  ูููููู ุฃูุถูุง ุฒูุงุฏุฉ ุชูููุฉ ุชุดููุฑ ููู ุชุดููุฑ ุงูุจูุงูุงุช ุจุดูู ูุจูุฑ ุ ูู ุญูุซ ูู ูู ููุช ุงูุชุดุบูู ูุจุตูุฉ ุงูุฐุงูุฑุฉ. <br><br>  ูู ุงูููุงุจู ุ ุงูุจูุงูุงุช ุงูุซูุงุฆูุฉ ูุถุบูุทุฉ ูุณุฑูุนุฉ.  ูุฐุง ููู ุนูุฏ ุชุณุฌูู ูููุงุช ูุจูุฑุฉ ูู ุงูุจูุงูุงุช.  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุงูุญูุธ ุงูุชููุงุฆู ูุฎุฑูุทุฉ ูุจูุฑุฉ ูู ูู ุฏูุฑุฉ ูู ุงููุนุจุฉ.  ูุฐูู <br>  ุณูุณุชุฎุฏู ุงูุชูุณูู ุงูุซูุงุฆู.  ุฅุฐุง ูุงู ุจุฅููุงูู ูุนุงูุฌุฉ ุฐูู ุ ููููู ุงูุนูู ุจุชูุณููุงุช ุฃูุซุฑ ุชูุตููุงู. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฐุง ุนู ุงูุชุณูุณู ุงูุชููุงุฆูุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุจุงุดุฑุฉ ุฃุซูุงุก ุนูููุฉ ุชุณูุณู ุจูุงูุงุช ุงููุญุฏุฉ ุ ูููููุง ูุชุงุจุฉ ูุฆุงุช ูุชุณูุณูุฉ ูุจุงุดุฑุฉ ุฅูู ุงูุฏูู.  ุณูุชู ุฅุฎูุงุก ุชูุงุตูู ุชุณุฌูู ุงูุญููู ุงููุฑุฏูุฉ ููุง.  ููุน ุฐูู ุ ูุง ูููููุง ุฅุฌุฑุงุก ุชุณูุณู ูุจุงุดุฑ ููุฎูุงูุง.  ุฅููุง ูุฆุงุช <code>MonoBehaviour</code> ุงูุชู ุชุญุชูู ุนูู ุจูุงูุงุช ูุง ูุญุชุงุฌ ุฅูู ุญูุธูุง.  ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุชุณูุณู ูุฑูู ูููุตู ูููุงุฆูุงุช ุ ููุง ููุถู ุนูู ุจุณุงุทุฉ ุงูุชุณูุณู ุงูุชููุงุฆู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูููู ูู ุงูุตุนุจ ุฏุนู ุชุบููุฑุงุช ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุณุชูุจููุฉ.  ูุฐูู ุ ุณูู ูุญุงูุธ ุนูู ุงูุชุญูู ุงููุงูู ุจุงูุชุณูุณู ุงููุฏูู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูุฌุนููุง ูููู ุญููุง ูุง ูุญุฏุซ. </div></div><br>  ูุชุณูุณู ุงูุฎุฑูุทุฉ ุ ูุญุชุงุฌ ุฅูู ุชุฎุฒูู ุจูุงูุงุช ูู ุฎููุฉ.  ูุญูุธ ูุชุญููู ุฎููุฉ ูุงุญุฏุฉ ุ ุฃุถู ุทุฑู <code>Save</code> <code>Load</code> ุฅูู <code>HexCell</code> .  ูุธุฑูุง ูุฃููุง ุชุญุชุงุฌ ุฅูู ูุงุชุจ ุฃู ูุงุฑุฆ ููุนูู ุ ูุณูู ูุถูููุง ููุนููุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexCell</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { } }</code> </pre> <br>  ุฃุถู ุทุฑู <code>Save</code> <code>Load</code> ุฅูู <code>HexGrid</code> .  ุชุชุฎุทู ูุฐู ุงูุทุฑู ุฌููุน ุงูุฎูุงูุง ุจุจุณุงุทุฉ ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุทุฑู <code>Load</code> ุงูุฎุงุตุฉ ุจูุง. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HexGrid</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Save(writer); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Load(reader); } } }</code> </pre> <br>  ุฅุฐุง ูููุง ุจุชูุฒูู ุฎุฑูุทุฉ ุ ููุฌุจ ุชุญุฏูุซูุง ุจุนุฏ ุชุบููุฑ ุจูุงูุงุช ุงูุฎููุฉ.  ููููุงู ุจุฐูู ุ ููุท ูู ุจุชุญุฏูุซ ุฌููุน ุงูุฃุฌุฒุงุก. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Load(reader); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; chunks.Length; i++) { chunks[i].Refresh(); } }</code> </pre> <br>  ุฃุฎูุฑูุง ุ ูููู ุจุงุณุชุจุฏุงู ุฑูุฒ ุงูุงุฎุชุจุงุฑ ุงูุฎุงุต ุจูุง ูู <code>HexMapEditor</code> ุจููุงููุงุช ุฅูู ุทุฑู <code>Save</code> <code>Load</code> ุงูุดุจูุฉ ุ ูุชูุฑูุฑ ุงููุงุชุจ ุฃู ุงููุงุฑุฆ ูุนูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ( BinaryWriter writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryWriter(File.Open(path, FileMode.Create)) ) { hexGrid.Save(writer); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (BinaryReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryReader(File.OpenRead(path))) { hexGrid.Load(reader); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุญูุธ ููุน ุงูุฅุบุงุซุฉ </h3><br>  ูู ุงููุฑุญูุฉ ุงูุญุงููุฉ ุ ุชุคุฏู ุฅุนุงุฏุฉ ุงูุญูุธ ุฅูู ุฅูุดุงุก ููู ูุงุฑุบ ุ ููุง ูุคุฏู ุงูุชูุฒูู ุฅูู ุฃู ุดูุก.  ููุจุฏุฃ ุชุฏุฑูุฌูุงู ุจุชุณุฌูู ูุชุญููู ููุฑุณ ููุน ุงูุงุฑุชูุงุน <code>HexCell</code> ููุท. <br><br>  ูู ุจุชุนููู ุงููููุฉ ูุจุงุดุฑุฉ ุฅูู ุญูู terrainTypeIndex.  ูู ูุณุชุฎุฏู ุงูุฎุตุงุฆุต.  ูุธุฑูุง ูุฃููุง ูููู ุจุชุญุฏูุซ ุฌููุน ุงูุฃุฌุฒุงุก ุจุดูู ุตุฑูุญ ุ ููุง ุญุงุฌุฉ ูุฅุฌุฑุงุก ููุงููุงุช ุฅูู ุฎุตุงุฆุต <code>Refresh</code> .  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุธุฑูุง ูุฃููุง ูุญูุธ ุงูุฎุฑุงุฆุท ุงูุตุญูุญุฉ ููุท ุ ุณููุชุฑุถ ุฃู ุฌููุน ุงูุฎุฑุงุฆุท ุงูุชู ุชู ุชูุฒูููุง ุตุญูุญุฉ ุฃูุถูุง.  ูุฐูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ูุชุญูู ููุง ุฅุฐุง ูุงู ุงูููุฑ ุฃู ุงูุทุฑูู ูุณููุญูุง ุจู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { writer.Write(terrainTypeIndex); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { terrainTypeIndex = reader.ReadInt32(); }</code> </pre> <br>  ุนูุฏ ุงูุญูุธ ูู ูุฐุง ุงูููู ุ ุณูููุชุจ ููุฑุณ ูุงุญุฏ ุชูู ุงูุขุฎุฑ ูุฌููุน ุฃููุงุน ุงูุฎูุงูุง.  ูุธุฑูุง ูุฃู ุงูููุฑุณ ุนุฏุฏ ุตุญูุญ ุ ูุฅู ุญุฌูู ูู ุฃุฑุจุนุฉ ุจุงูุช.  ุชุญุชูู ุจุทุงูุชู ุนูู 300 ุฎููุฉ ุ ุฃู ุฃู ุญุฌู ุงูููู ุณูููู 1200 ุจุงูุช. <br><br>  ููุฑุฃ ุงูุญูู ุงูููุงุฑุณ ุจููุณ ุงูุชุฑุชูุจ ุงูุฐู ููุชุจุช ุจู.  ุฅุฐุง ููุช ุจุชุบููุฑ ุฃููุงู ุงูุฎูุงูุง ุจุนุฏ ุงูุญูุธ ุ ูุฅู ุชุญููู ุงูุฎุฑูุทุฉ ุณูุนูุฏ ุงูุฃููุงู ุฅูู ุงูุญุงูุฉ ุนูุฏ ุงูุญูุธ.  ูุธุฑูุง ูุฃููุง ูู ูุนุฏ ูุญุชูุธ ุจุฃู ุดูุก ุ ูุณุชุธู ุจููุฉ ุจูุงูุงุช ุงูุฎููุฉ ููุง ูู.  ุฃู ุฃู ุงูุชุญููู ุณูุบูุฑ ููุน ุงูุชุถุงุฑูุณ ุ ูููู ููุณ ุงุฑุชูุงุนูุง ุ ููุณุชูู ุงูููุงู ุ ูููุฒุงุช ุงูุชุถุงุฑูุณ ุ ููุง ุฅูู ุฐูู. <br><br><h3 style=";text-align:right;direction:rtl">  ุญูุธ ูู ุนุฏุฏ ุตุญูุญ </h3><br>  ูุง ูููู ุญูุธ ูุคุดุฑ ููุน ุงูุฅุบุงุซุฉ.  ุชุญุชุงุฌ ุฅูู ุญูุธ ุฌููุน ุงูุจูุงูุงุช ุงูุฃุฎุฑู.  ููุจุฏุฃ ุจุฌููุน ุงูุญููู ุงูุตุญูุญุฉ.  ูุฐุง ูุคุดุฑ ูููุน ุงูุฅุบุงุซุฉ ุ ุงุฑุชูุงุน ุงูุฎููุฉ ุ ูุณุชูู ุงูููุงู ุ ูุณุชูู ุงููุฏููุฉ ุ ูุณุชูู ุงููุฒุฑุนุฉ ุ ูุณุชูู ุงูุบุทุงุก ุงููุจุงุชู ููุคุดุฑ ุงูุฃุดูุงุก ุงูุฎุงุตุฉ.  ูุฌุจ ูุฑุงุกุชูุง ุจููุณ ุงูุชุฑุชูุจ ุงูุฐู ุชู ุชุณุฌูููุง ุจู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { writer.Write(terrainTypeIndex); writer.Write(elevation); writer.Write(waterLevel); writer.Write(urbanLevel); writer.Write(farmLevel); writer.Write(plantLevel); writer.Write(specialIndex); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { terrainTypeIndex = reader.ReadInt32(); elevation = reader.ReadInt32(); waterLevel = reader.ReadInt32(); urbanLevel = reader.ReadInt32(); farmLevel = reader.ReadInt32(); plantLevel = reader.ReadInt32(); specialIndex = reader.ReadInt32(); }</code> </pre> <br>  ุญุงูู ุงูุขู ุญูุธ ูุชุญููู ุงูุฎุฑูุทุฉ ุ ูุฅุฌุฑุงุก ุงูุชุบููุฑุงุช ุจูู ูุฐู ุงูุนูููุงุช.  ุชู ุงุณุชุนุงุฏุฉ ูู ูุง ูููุง ุจุชุถูููู ูู ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ุจุฃูุถู ูุง ูุณุชุทูุน ุ ุจุงุณุชุซูุงุก ุงุฑุชูุงุน ุงูุฎููุฉ.  ุญุฏุซ ูุฐุง ูุฃูู ุนูุฏ ุชุบููุฑ ูุณุชูู ุงูุงุฑุชูุงุน ุ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุซ ุงููุถุน ุงูุฑุฃุณู ููุฎููุฉ.  ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุนููู ูููุฉ ุงูุงุฑุชูุงุน ุงููุญููุฉ ุฅูู ุงูุฎุงุตูุฉ ุ ูููุณ ุฅูู ุงูุญูู.  ููู ูุฐู ุงูุฎุงุตูุฉ ุชููู ุจุนูู ุฅุถุงูู ูุง ูุญุชุงุฌู.  ูุฐูู ุ ุฏุนูุง ูุณุชุฎุฑุฌ ุงูููุฏ ุงูุฐู ูููู ุจุชุญุฏูุซ ููุถุน ุงูุฎููุฉ ูู ูุญุฏุฏ <code>Elevation</code> <code>RefreshPosition</code> ุทุฑููุฉ <code>RefreshPosition</code> ูููุตูุฉ.  ุงูุชุบููุฑ ุงููุญูุฏ ุงูุฐู ุชุญุชุงุฌ ุฅูู ุฅุฌุฑุงุฆู ููุง ูู ุงุณุชุจุฏุงู <code>value</code> ุจูุฑุฌุน ุฅูู ุญูู <code>elevation</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RefreshPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Vector3 position = transform.localPosition; position.y = elevation * HexMetrics.elevationStep; position.y += (HexMetrics.SampleNoise(position).y * <span class="hljs-number"><span class="hljs-number">2f</span></span> - <span class="hljs-number"><span class="hljs-number">1f</span></span>) * HexMetrics.elevationPerturbStrength; transform.localPosition = position; Vector3 uiPosition = uiRect.localPosition; uiPosition.z = -position.y; uiRect.localPosition = uiPosition; }</code> </pre> <br>  ุงูุขู ูููููุง ุงุณุชุฏุนุงุก ุงูุฃุณููุจ ุนูุฏ ุชุนููู ุงูุฎุงุตูุฉ ุ ููุฐูู ุจุนุฏ ุชุญููู ุจูุงูุงุช ุงูุงุฑุชูุงุน. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Elevation { โฆ <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elevation == <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } elevation = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; RefreshPosition(); ValidateRivers(); โฆ } } โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { terrainTypeIndex = reader.ReadInt32(); elevation = reader.ReadInt32(); RefreshPosition(); โฆ }</code> </pre> <br>  ุจุนุฏ ูุฐุง ุงูุชุบููุฑ ุ ุณุชุบูุฑ ุงูุฎูุงูุง ุงุฑุชูุงุนูุง ุงูุธุงูุฑู ุจุดูู ุตุญูุญ ุนูุฏ ุงูุชุญููู. <br><br><h3 style=";text-align:right;direction:rtl">  ุญูุธ ุฌููุน ุงูุจูุงูุงุช </h3><br>  ูุชู ุชุฎุฒูู ูุฌูุฏ ุงูุฌุฏุฑุงู ูุงูุฃููุงุฑ ุงููุงุฑุฏุฉ / ุงูุตุงุฏุฑุฉ ูู ุงูุฎููุฉ ูู ุงูุญููู ุงูููุทููุฉ.  ูููููุง ูุชุงุจุชูุง ุจุจุณุงุทุฉ ูุนุฏุฏ ุตุญูุญ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฅู ุจูุงูุงุช ุงูุทุฑูู ุนุจุงุฑุฉ ุนู ูุตูููุฉ ูู ุณุช ููู ููุทููุฉ ูููููุง ูุชุงุจุชูุง ุจุญููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { writer.Write(terrainTypeIndex); writer.Write(elevation); writer.Write(waterLevel); writer.Write(urbanLevel); writer.Write(farmLevel); writer.Write(plantLevel); writer.Write(specialIndex); writer.Write(walled); writer.Write(hasIncomingRiver); writer.Write(hasOutgoingRiver); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; roads.Length; i++) { writer.Write(roads[i]); } }</code> </pre> <br>  ูุชู ุชุฎุฒูู <code>HexDirection</code> ุงูุฃููุงุฑ ุงููุงุฑุฏุฉ ูุงูุตุงุฏุฑุฉ ูู ุญููู <code>HexDirection</code> .  ููุน <code>HexDirection</code> ูู ุชุนุฏุงุฏ ูุชู ุชุฎุฒููู ุฏุงุฎูููุง ูููู ุตุญูุญุฉ ูุชุนุฏุฏุฉ.  ูุฐูู ุ ูููููุง ุฃูุถูุง ุฅุฌุฑุงุก ุชุณูุณู ููุง ูุนุฏุฏ ุตุญูุญ ุจุงุณุชุฎุฏุงู ุชุญููู ุตุฑูุญ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> writer.Write(hasIncomingRiver); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)incomingRiver); writer.Write(hasOutgoingRiver); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)outgoingRiver);</code> </pre> <br>  ุชุชู ูุฑุงุกุฉ ุงูููู ุงูููุทููุฉ ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <code>BinaryReader.ReadBoolean</code> .  ุงุชุฌุงูุงุช ุงูุฃููุงุฑ ุตุญูุญุฉ ุ ููุฌุจ ุนูููุง ุชุญููููุง ุฅูู <code>HexDirection</code> . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { terrainTypeIndex = reader.ReadInt32(); elevation = reader.ReadInt32(); RefreshPosition(); waterLevel = reader.ReadInt32(); urbanLevel = reader.ReadInt32(); farmLevel = reader.ReadInt32(); plantLevel = reader.ReadInt32(); specialIndex = reader.ReadInt32(); walled = reader.ReadBoolean(); hasIncomingRiver = reader.ReadBoolean(); incomingRiver = (HexDirection)reader.ReadInt32(); hasOutgoingRiver = reader.ReadBoolean(); outgoingRiver = (HexDirection)reader.ReadInt32(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; roads.Length; i++) { roads[i] = reader.ReadBoolean(); } }</code> </pre> <br>  ุงูุขู ูููู ุจุญูุธ ุฌููุน ุจูุงูุงุช ุงูุฎููุฉ ุงููุงุฒูุฉ ููุญูุธ ุงููุงูู ูุงุณุชุนุงุฏุฉ ุงูุฎุฑูุทุฉ.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฐุง ูุชุทูุจ ุชุณุนุฉ ุฃุนุฏุงุฏ ุตุญูุญุฉ ูุชุณุน ููู ููุทููุฉ ููู ุฎููุฉ. </font><font style="vertical-align: inherit;">ุชุฃุฎุฐ ูู ูููุฉ ููุทููุฉ ุจุงูุชูุง ูุงุญุฏูุง ุ ูุฐูู ูุณุชุฎุฏู ุฅุฌูุงูู 45 ุจุงูุช ููู ุฎููุฉ. </font><font style="vertical-align: inherit;">ุจูุนูู ุ ุชุชุทูุจ ุงูุจุทุงูุฉ ุงูุชู ุชุญุชูู ุนูู 300 ุฎููุฉ ุฅุฌูุงูู 13ุ500 ุจุงูุช. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูููู ุญุฌู ุงูููู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃูู ูุจุฏู ุฃู 13500 ุจุงูุช ููุณุช ูุจูุฑุฉ ูู 300 ุฎููุฉ ุ ุฑุจูุง ูููููุง ุงูููุงู ุจุฐูู ุจูููุฉ ุฃูู. </font><font style="vertical-align: inherit;">ูู ุงูููุงูุฉ ุ ูุฏููุง ุณูุทุฑุฉ ูุงููุฉ ุนูู ููููุฉ ุชุณูุณู ุงูุจูุงูุงุช. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุฑู ูุง ุฅุฐุง ูุงูุช ููุงู ุทุฑููุฉ ุฃูุซุฑ ุฅุญูุงูุง ูุชุฎุฒูููุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุฎุชุฒุงู ุงููุงุตู ุงูุฑููู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชุฎุฒูู ูุณุชููุงุช ุงูุฎููุฉ ูุงููุคุดุฑุงุช ุงููุฎุชููุฉ ูุนุฏุฏ ุตุญูุญ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุฅููุง ุชุณุชุฎุฏู ููุท ูุฌููุนุฉ ุตุบูุฑุฉ ูู ุงูููู. </font><font style="vertical-align: inherit;">ูู ูููู ุณูุจูู ุจุงูุชุฃููุฏ ูู ุญุฏูุฏ 0-255. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุณูุชู ุงุณุชุฎุฏุงู ุงูุจุงูุช ุงูุฃูู ููุท ูู ูู ุนุฏุฏ ุตุญูุญ. </font><font style="vertical-align: inherit;">ุงูุซูุงุซุฉ ุงููุชุจููุฉ ุณุชููู ุฏุงุฆูุง ุตูุฑ. </font><font style="vertical-align: inherit;">ูุง ูุนูู ูุชุฎุฒูู ูุฐู ุงูุจุงูุชุงุช ุงููุงุฑุบุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุชุฌุงูููุง ุนู ุทุฑูู ูุชุงุจุฉ ุนุฏุฏ ุตุญูุญ ููุจุงูุช ูุจู ุงููุชุงุจุฉ ุฅูู ุงูุฏูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)terrainTypeIndex); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)elevation); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)waterLevel); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)urbanLevel); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)farmLevel); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)plantLevel); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)specialIndex); writer.Write(walled); writer.Write(hasIncomingRiver); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)incomingRiver); writer.Write(hasOutgoingRiver); writer.Write((<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)outgoingRiver);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุ ูุฅุฑุฌุงุน ูุฐู ุงูุฃุฑูุงู ุ ูุฌุจ ุฃู ูุณุชุฎุฏููุง </font></font><code>BinaryReader.ReadByte</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุชู ุงูุชุญููู ูู ุงูุจุงูุช ุฅูู ุงูุนุฏุฏ ุงูุตุญูุญ ุถูููุงู ุ ูุฐูู ูุง ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุชุญูููุงุช ุตุฑูุญุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> terrainTypeIndex = reader.ReadByte(); elevation = reader.ReadByte(); RefreshPosition(); waterLevel = reader.ReadByte(); urbanLevel = reader.ReadByte(); farmLevel = reader.ReadByte(); plantLevel = reader.ReadByte(); specialIndex = reader.ReadByte(); walled = reader.ReadBoolean(); hasIncomingRiver = reader.ReadBoolean(); incomingRiver = (HexDirection)reader.ReadByte(); hasOutgoingRiver = reader.ReadBoolean(); outgoingRiver = (HexDirection)reader.ReadByte();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐูู ูุชุฎูุต ูู ุซูุงุซุฉ ุจุงูุช ููู ุนุฏุฏ ุตุญูุญ ุ ููุง ูููุฑ 27 ุจุงูุช ููู ุฎููุฉ. ุงูุขู ูููู 18 ุจุงูุช ููู ุฎููุฉ ุ ู 5400 ุจุงูุช ููุท ููู 300 ุฎููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุจูุงูุงุช ุงูุจุทุงูุฉ ุงููุฏููุฉ ุชุตุจุญ ุจูุง ูุนูู ูู ูุฐู ุงููุฑุญูุฉ. ุนูุฏ ุชุญููู ุงูุญูุธ ุงููุฏูู ุ ูุชู ุฎูุท ุงูุจูุงูุงุช ููุญุตู ุนูู ุฎูุงูุง ูุดูุดุฉ. ูุฐุง ูุฃููุง ููุฑุฃ ุงูุขู ุจูุงูุงุช ุฃูู. ุฅุฐุง ูุฑุฃูุง ุจูุงูุงุช ุฃูุซุฑ ูู ุฐู ูุจู ุ ูุณูุญุตู ุนูู ุฎุทุฃ ุนูุฏ ูุญุงููุฉ ุงููุฑุงุกุฉ ุจุนุฏ ููุงูุฉ ุงูููู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅู ุนุฏู ุงููุฏุฑุฉ ุนูู ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงููุฏููุฉ ููุงุณุจูุง ุ ูุฃููุง ุจุตุฏุฏ ุชุญุฏูุฏ ุงูุชูุณูู. </font><font style="vertical-align: inherit;">ูููู ุนูุฏูุง ููุฑุฑ ุชูุณูู ุงูุญูุธ ุ ุณูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฃู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุณุชูุจููุฉ ูููููุง ูุฑุงุกุชูุง ุฏุงุฆููุง. </font><font style="vertical-align: inherit;">ุญุชู ุฅุฐุง ูููุง ุจุชุบููุฑ ุงูุชูุณูู ุ ููู ุงูุฃูุถู ุฃู ูุธู ุจุฅููุงููุง ูุฑุงุกุฉ ุงูุชูุณูู ุงููุฏูู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุชุญุงุฏ ููุฑ ุจุงูุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ูุณุชุฎุฏู ุฃุฑุจุนุฉ ุจุงูุช ูุชุฎุฒูู ุจูุงูุงุช ุงูููุฑ ุ ุงุซูุงู ููู ุงุชุฌุงู. </font><font style="vertical-align: inherit;">ููู ุงุชุฌุงู ุ ูููู ุจุชุฎุฒูู ูุฌูุฏ ุงูููุฑ ูุงูุงุชุฌุงู ุงูุฐู ูุชุฏูู ููู </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุจุฏู ูู ุงููุงุถุญ ุฃููุง ูุณูุง ุจุญุงุฌุฉ ุฅูู ุชุฎุฒูู ุงุชุฌุงู ุงูููุฑ ุฅุฐุง ูู ููู ูุฐูู. </font><font style="vertical-align: inherit;">ููุฐุง ูุนูู ุฃู ุงูุฎูุงูุง ุจุฏูู ููุฑ ุชุญุชุงุฌ ุฅูู ูุญุฏุชู ุจุงูุช ุฃูู. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูููู ุจุงูุช ูุงุญุฏ ูู ุงุชุฌุงู ุงูููุฑ ุ ุจุบุถ ุงููุธุฑ ุนู ูุฌูุฏู.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏููุง ุณุชุฉ ุงุชุฌุงูุงุช ูุญุชููุฉ ุ ูุชู ุชุฎุฒูููุง ูุฃุฑูุงู ูู ุงููุงุตู ุงูุฒููู 0-5. </font><font style="vertical-align: inherit;">ูููู ุซูุงุซ ุจุชุงุช ููุฐุง ุ ูุฃูู ูู ุฃุฑูุงู ุงูููุงุฐุฌ ุงูุซูุงุฆูุฉ ูู 0 ุฅูู 5 ุชุจุฏู ูุซู 000 ุ 001 ุ 010 ุ 011 ุ 100 ุ 101 ู 110. ููุฐุง ูุนูู ุฃู ุจุงูุชุฉ ุฃุฎุฑู ูุง ุชุฒุงู ุบูุฑ ูุณุชุฎุฏูุฉ ูุฎูุณ ุจุชุงุช ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ูุงุญุฏ ูููู ููุฅุดุงุฑุฉ ุฅูู ูุฌูุฏ ููุฑ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุงุณุชุฎุฏุงู ุงูุจุช ุงูุซุงูู ุ ุงูููุงุจู ููุฑูู 128. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุณูุถูู 128 ุฅููู ูุจู ุชุญููู ุงูุงุชุฌุงู ุฅูู ุจุงูุช. ุฃู ุ ุฅุฐุง ูุงู ูุฏููุง ููุฑ ูุชุฏูู ุฅูู ุงูุดูุงู ุงูุบุฑุจู ุ ูุณูู ููุชุจ 133 ุ ููู ูู ุดูู ุซูุงุฆู ูู 10000101. ูุฅุฐุง ูู ููู ููุงู ููุฑ ุ ูุฅููุง ููุชุจ ุตูุฑ ุจุงูุช ููุท.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูููุช ููุณู ุ ูุง ุชุฒุงู ุฃุฑุจุนุฉ ุจุชุงุช ุฃุฎุฑู ุบูุฑ ูุณุชุฎุฏูุฉ ุ ูููู ูุฐุง ุฃูุฑ ุทุจูุนู. </font><font style="vertical-align: inherit;">ูููููุง ุฏูุฌ ููุง ุงูุงุชุฌุงููู ููููุฑ ูู ุจุงูุช ูุงุญุฏ ุ ููู ูุฐุง ุณูููู ุจุงููุนู ูุฑุจููุง ููุบุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// writer.Write(hasIncomingRiver); // writer.Write((byte)incomingRiver); if (hasIncomingRiver) { writer.Write((byte)(incomingRiver + 128)); } else { writer.Write((byte)0); } // writer.Write(hasOutgoingRiver); // writer.Write((byte)outgoingRiver); if (hasOutgoingRiver) { writer.Write((byte)(outgoingRiver + 128)); } else { writer.Write((byte)0); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุดูุฑุฉ ุจูุงูุงุช ุงูููุฑ ุ ูุญุชุงุฌ ุฃููุงู ุฅูู ูุฑุงุกุฉ ุงูุจุงูุช ูุฑุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ูููุชูุง ูุง ุชูู ุนู 128 ุ ููุฐุง ูุนูู ุฃู ููุงู ููุฑ. </font><font style="vertical-align: inherit;">ููุญุตูู ุนูู ุงุชุฌุงูู ุ ุงุทุฑุญ 128 ุ ุซู ุงุนุชูู </font></font><code>HexDirection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// hasIncomingRiver = reader.ReadBoolean(); // incomingRiver = (HexDirection)reader.ReadByte(); byte riverData = reader.ReadByte(); if (riverData &gt;= 128) { hasIncomingRiver = true; incomingRiver = (HexDirection)(riverData - 128); } else { hasIncomingRiver = false; } // hasOutgoingRiver = reader.ReadBoolean(); // outgoingRiver = (HexDirection)reader.ReadByte(); riverData = reader.ReadByte(); if (riverData &gt;= 128) { hasOutgoingRiver = true; outgoingRiver = (HexDirection)(riverData - 128); } else { hasOutgoingRiver = false; }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุญุตููุง ุนูู 16 ุจุงูุช ููู ุฎููุฉ. </font><font style="vertical-align: inherit;">ูุจุฏู ุฃู ุงูุชุญุณูู ููุณ ูุจูุฑูุง ุ ูููู ูุฐู ุฅุญุฏู ุงูุญูู ุงูุชู ูุชู ุงุณุชุฎุฏุงููุง ูุชูููู ุญุฌู ุงูุจูุงูุงุช ุงูุซูุงุฆูุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุธ ุงูุทุฑู ูู ุจุงูุช ูุงุญุฏ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ุญููุฉ ููุงุซูุฉ ูุถุบุท ุจูุงูุงุช ุงูุทุฑูู. </font><font style="vertical-align: inherit;">ูุฏููุง ุณุช ููู ููุทููุฉ ูููู ุชุฎุฒูููุง ูู ุงูุจุชุงุช ุงูุณุชุฉ ุงูุฃููู ูู ุงูุจุงูุช. </font><font style="vertical-align: inherit;">ุฃู ุฃู ูู ุงุชุฌุงู ููุทุฑูู ูุชู ุชูุซููู ุจุฑูู ุจููุฉ ุงุซููู. </font><font style="vertical-align: inherit;">ูุฐู ูู 1 ู 2 ู 4 ู 8 ู 16 ู 32 ุฃู ูู ุดูู ุซูุงุฆู 1 ู 10 ู 100 ู 1000 ู 10000 ู 100000. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุดุงุก ุจุงูุช ููุงุฆู ุ ูุญุชุงุฌ ุฅูู ุชุนููู ุงูุจุชุงุช ุงูุชู ุชุชูุงูู ูุน ุงูุงุชุฌุงูุงุช ุงููุณุชุฎุฏูุฉ ููุทุฑู. </font><font style="vertical-align: inherit;">ููุญุตูู ุนูู ุงูุงุชุฌุงู ุงูุตุญูุญ ููุงุชุฌุงู ุ ูููููุง ุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู </font></font><code>&lt;&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุซู ุถููุง ุจุงุณุชุฎุฏุงู ุนุงูู ุชุดุบูู ุฃุญุงุฏู ุงููุนุงูู OR. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ุชู ุงุณุชุฎุฏุงู ุงูุทุฑู ุงูุฃููู ูุงูุซุงููุฉ ูุงูุซุงูุซุฉ ูุงูุณุงุฏุณุฉ ุ ูุณูููู ุงูุจุงูุช ุงูููุงุฆู 100111.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> roadFlags = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; roads.Length; i++) { <span class="hljs-comment"><span class="hljs-comment">// writer.Write(roads[i]); if (roads[i]) { roadFlags |= 1 &lt;&lt; i; } } writer.Write((byte)roadFlags);</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ูุนูู &lt;&lt;ุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     .   integer      .  .     integer .    ,          .   <code>1 &lt;&lt; n</code>  2 <sup>n</sup> ,    . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุญุตูู ุนูู ุงููููุฉ ุงูููุทููุฉ ููุทุฑูู ููุฎูู ุ ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ููุง ุฅุฐุง ุชู ุชุนููู ุงูุจุช. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููู ุจุฅุฎูุงุก ูู ุงูุจุชุงุช ุงูุฃุฎุฑู ุจุงุณุชุฎุฏุงู ุนุงูู ุชุดุบูู ุฃุญุงุฏู ุงููุนุงูู AND ุจุงูุฑูู ุงูููุงุณุจ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชูู ุงููุชูุฌุฉ ูุณุงููุฉ ููุตูุฑ ุ ูุณูุชู ุชุนููู ุงูุจุช ููุฌูุฏ ุงูุทุฑูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> roadFlags = reader.ReadByte(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; roads.Length; i++) { roads[i] = (roadFlags &amp; (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; i)) != <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฃู ุถุบุทูุง 6 ุจุงูุช ูู ูุงุญุฏุฉ ุ ุชููููุง 11 ุจุงูุช ููู ุฎููุฉ. </font><font style="vertical-align: inherit;">ูุน 300 ุฎููุฉ ุ ูุฐุง ูู ููุท 3300 ุจุงูุช. </font><font style="vertical-align: inherit;">ุฃู ุ ุจุนุฏ ุฃู ุนูููุง ููููุงู ูุน ุงูุจุงูุช ุ ููููุง ุญุฌู ุงูููู ุจูุณุจุฉ 75ูช.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงุณุชุนุฏุงุฏ ูููุณุชูุจู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุงูุฅุนูุงู ุนู ุงูุชูุงู ุชูุณูู ุงูุญูุธ ุ ูุถูู ุชูุงุตูู ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุจู ุญูุธ ุจูุงูุงุช ุงูุฎุฑูุทุฉ ุ ุณูุถุทุฑ </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุงุจุฉ ุนุฏุฏ ุตุญูุญ ุตูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ( BinaryWriter writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryWriter(File.Open(path, FileMode.Create)) ) { writer.Write(<span class="hljs-number"><span class="hljs-number">0</span></span>); hexGrid.Save(writer); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุคุฏู ุฐูู ุฅูู ุฅุถุงูุฉ ุฃุฑุจุนุฉ ุจุงูุชุงุช ูุงุฑุบุฉ ุฅูู ุจุฏุงูุฉ ุจูุงูุงุชูุง. </font><font style="vertical-align: inherit;">ุฃู ูุจู ุชุญููู ุงูุจุทุงูุฉ ุ ูุฌุจ ุฃู ููุฑุฃ ูุฐู ุงูุจุงูุช ุงูุฃุฑุจุนุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (BinaryReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryReader(File.OpenRead(path))) { reader.ReadInt32(); hexGrid.Load(reader); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ูุฐู ุงูุจุงูุชุงุช ุบูุฑ ูุฌุฏูุฉ ุญุชู ุงูุขู ุ ุฅูุง ุฃููุง ุชุณุชุฎุฏู ูุนููุงู ูููุฑ ุงูุชูุงูู ุงูุนูุณู ูู ุงููุณุชูุจู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุจุฅุถุงูุฉ ูุฐู ุงูุจุงูุชุงุช ุงููุงุฑุบุฉ ุ ูุณุชุนุชูุฏ ูุญุชููุงุช ุงูุจุงูุชุงุช ุงูููููุฉ ุงูุฃููู ุนูู ุงูุฎููุฉ ุงูุฃููู ูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูููู ูู ุงูุตุนุจ ุนูููุง ูู ุงููุณุชูุจู ูุนุฑูุฉ ุฃู ุฅุตุฏุงุฑ ูู ุชูุณูู ุงูุญูุธ ุงูุฐู ูุชุนุงูู ูุนู. </font><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุชุญูู ูู ุงูุจุงูุชุงุช ุงูุฃุฑุจุนุฉ ุงูุฃููู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ูุงุฑุบุฉ ุ ูุฅููุง ูุชุนุงูู ูุน ุฅุตุฏุงุฑ ูู ุงูุชูุณูู 0. ูู ุงูุฅุตุฏุงุฑุงุช ุงููุณุชูุจููุฉ ุ ุณูููู ูู ุงููููู ุฅุถุงูุฉ ุดูุก ุขุฎุฑ ููุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ุ ุฅุฐุง ูุงู ุงูุนููุงู ุบูุฑ ุตูุฑู ุ ููุญู ูุชุนุงูู ูุน ูุณุฎุฉ ุบูุฑ ูุนุฑููุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู ูุง ูููููุง ูุนุฑูุฉ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุ ูุฌุจ ุนูููุง ุฑูุถ ุชูุฒูู ุงูุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (BinaryReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryReader(File.OpenRead(path))) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> header = reader.ReadInt32(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header == <span class="hljs-number"><span class="hljs-number">0</span></span>) { hexGrid.Load(reader); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"Unknown map format "</span></span> + header); } }</code> </pre> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 13: ุฅุฏุงุฑุฉ ุงูุจุทุงูุฉ </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุจุฅูุดุงุก ุจุทุงูุงุช ุฌุฏูุฏุฉ ูู ูุถุน ุงูุชุดุบูู. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุถู ุงูุฏุนู ููุฎุชูู ุฃุญุฌุงู ุงูุจุทุงูุงุช. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุถู ุญุฌู ุงูุฎุฑูุทุฉ ุฅูู ุงูุจูุงูุงุช ุงููุญููุธุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุธ ูุชุญููู ุงูุฎุฑุงุฆุท ุงูุนุดูุงุฆูุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุฑุถ ูุงุฆูุฉ ุงูุจุทุงูุงุช. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐุง ุงูุฌุฒุก ุ ุณูุถูู ุฏุนููุง ูุฃุญุฌุงู ูุฎุชููุฉ ูู ุงูุจุทุงูุงุช ุ ุจุงูุฅุถุงูุฉ ุฅูู ุญูุธ ูููุงุช ูุฎุชููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏุกูุง ูู ูุฐุง ุงูุฌุฒุก ุ ุณูุชู ุฅูุดุงุก ุงูุจุฑุงูุฌ ุงูุชุนููููุฉ ูู Unity 5.5.0.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/abd/9e2/1e4/abd9e21e467d0b291c33f4ad31e96c51.jpg"></div><br> <i><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏุงูุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุชุจุฉ ุงูุฎุฑุงุฆุท.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ุฎุฑุงุฆุท ุฌุฏูุฏุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ูุฐู ุงููุญุธุฉ ุ ุฃูุดุฃูุง ุงูุดุจูุฉ ุงูุณุฏุงุณูุฉ ูุฑุฉ ูุงุญุฏุฉ ููุท - ุนูุฏ ุชุญููู ุงููุดูุฏ. </font><font style="vertical-align: inherit;">ุงูุขู ุณูุฌุนู ูู ุงููููู ุจุฏุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ ูู ุฃู ููุช. </font><font style="vertical-align: inherit;">ุณุชุณุชุจุฏู ุงูุจุทุงูุฉ ุงูุฌุฏูุฏุฉ ุจุจุณุงุทุฉ ุงูุจุทุงูุฉ ุงูุญุงููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู Awake </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุชุชู ุชููุฆุฉ ุจุนุถ ุงูููุงููุณ ุ ููู ุซู ูุชู ุชุญุฏูุฏ ุนุฏุฏ ุงูุฎูุงูุง ูุฅูุดุงุก ุงูุฃุฌุฒุงุก ูุงูุฎูุงูุง ุงููุงุฒูุฉ. </font><font style="vertical-align: inherit;">ูู ุฎูุงู ุฅูุดุงุก ูุฌููุนุฉ ุฌุฏูุฏุฉ ูู ุงูุฃุฌุฒุงุก ูุงูุฎูุงูุง ุ ูููู ุจุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ุฏุนูุง ูููุณู </font></font><code>HexGrid.Awake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ูุณููู - ููุฏ ูุตุฏุฑ ุงูุชููุฆุฉ ูุงูุทุฑููุฉ ุงูุนุงูุฉ </font></font><code>CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexMetrics.noiseSource = noiseSource; HexMetrics.InitializeHashGrid(seed); HexMetrics.colors = colors; CreateMap(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { cellCountX = chunkCountX * HexMetrics.chunkSizeX; cellCountZ = chunkCountZ * HexMetrics.chunkSizeZ; CreateChunks(); CreateCells(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุฒุฑูุง ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ููุฏ ุฌุนูุชูุง ูุจูุฑุฉ ููุถุนูุง ุชุญุช ุฃุฒุฑุงุฑ ุงูุญูุธ ูุงูุชุญููู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/203/c02/ff4/203c02ff4ca668836064c72ad770328c.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฒุฑ ุฎุฑูุทุฉ ุฌุฏูุฏ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุฑุจุท ุญุฏุซ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">On Click</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฐุง ุงูุฒุฑ ุจุทุฑููุฉ </font></font><code>CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆููุง </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจูุนูู ุ ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุตูุญ ูุญุฑุฑ ุฎุฑุงุฆุท Hex</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููููุง ูุฏุนู ูุจุงุดุฑุฉ ุทุฑููุฉ ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Grid</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/36a/d04/a3e/36ad04a3ebf94b00faf7aebe8c783b2f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ุฎุฑูุทุฉ ุจุงูููุฑ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณุญ ุงูุจูุงูุงุช ุงููุฏููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุ ุนูุฏ ุงูููุฑ ููู ุงูุฒุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุฑูุทุฉ ุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุณูุชู ุฅูุดุงุก ูุฌููุนุฉ ุฌุฏูุฏุฉ ูู ุงูุฃุฌุฒุงุก ูุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุง ูุชู ุญุฐู ุงููุฏููุฉ ูููุง ุชููุงุฆููุง. </font><font style="vertical-align: inherit;">ูุฐูู ุ ููุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ุนุฏุฉ ุดุจูุงุช ุฎุฑูุทุฉ ูุชุฑุงูุจุฉ ุนูู ุจุนุถูุง ุงูุจุนุถ. </font><font style="vertical-align: inherit;">ูุชุฌูุจ ุฐูู ุ ูุญุชุงุฌ ุฃููุงู ุฅูู ุงูุชุฎูุต ูู ุงูุฃุดูุงุก ุงููุฏููุฉ. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุฏููุฑ ุฌููุน ุงูุฃุฌุฒุงุก ุงูุญุงููุฉ ูู ุงูุจุฏุงูุฉ </font></font><code>CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (chunks != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; chunks.Length; i++) { Destroy(chunks[i].gameObject); } } โฆ }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููููุง ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูุฃุดูุงุก ุงูููุฌูุฏุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ,         .     ,       .  ,    โ    ,      . </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูู ุงููููู ุชุฏููุฑ ุนูุงุตุฑ ุชุงุจุนุฉ ูุซู ูุฐู ูู ุญููุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุจุงูุทุจุน.         . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุฏุฏ ุงูุญุฌู ูู ุงูุฎูุงูุง ุจุฏูุงู ูู ุงูุฃุฌุฒุงุก </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูููุง ูุทูุจ ูู ุญุฌู ุจุทุงูุฉ ูู ุฎูุงู ุงูููุฏุงู </font></font><code>chunkCountX</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>chunkCountZ</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌูู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ุณูููู ูู ุงูุฃูุณุจ ุงูุฅุดุงุฑุฉ ุฅูู ุญุฌู ุงูุฎุฑูุทุฉ ูู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูู ุงูููุช ููุณู ุ ูููููุง ุญุชู ุชุบููุฑ ุญุฌู ุงููุทุนุฉ ูู ุงููุณุชูุจู ุฏูู ุชุบููุฑ ุญุฌู ุงูุจุทุงูุงุช. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนูุง ูุชุจุงุฏู ุฃุฏูุงุฑ ุนุฏุฏ ุงูุฎูุงูุง ูุนุฏุฏ ุญููู ุงูุฃุฌุฒุงุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public int chunkCountX = 4, chunkCountZ = 3; public int cellCountX = 20, cellCountZ = 15; โฆ // int cellCountX, cellCountZ; int chunkCountX, chunkCountZ; โฆ public void CreateMap () { โฆ // cellCountX = chunkCountX * HexMetrics.chunkSizeX; // cellCountZ = chunkCountZ * HexMetrics.chunkSizeZ; chunkCountX = cellCountX / HexMetrics.chunkSizeX; chunkCountZ = cellCountZ / HexMetrics.chunkSizeZ; CreateChunks(); CreateCells(); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุคุฏู ูุฐุง ุฅูู ุฎุทุฃ ูู ุงูุชุฌููุน ุ ูุฃูู </font></font><code>HexMapCamera</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุฃุญุฌุงู ุชุฌุฒุฆุฉ </font><font style="vertical-align: inherit;">ูุชุญุฏูุฏ ูููุนู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงูุชุบููุฑ </font></font><code>HexMapCamera.ClampPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ูุณุชุฎุฏู ูุจุงุดุฑุฉ ุนุฏุฏ ุงูุฎูุงูุง ุงูุชู ูุง ูุฒุงู ุจุญุงุฌุฉ ุฅูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">Vector3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClampPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 position</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> xMax = (grid.cellCountX - <span class="hljs-number"><span class="hljs-number">0.5f</span></span>) * (<span class="hljs-number"><span class="hljs-number">2f</span></span> * HexMetrics.innerRadius); position.x = Mathf.Clamp(position.x, <span class="hljs-number"><span class="hljs-number">0f</span></span>, xMax); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> zMax = (grid.cellCountZ - <span class="hljs-number"><span class="hljs-number">1</span></span>) * (<span class="hljs-number"><span class="hljs-number">1.5f</span></span> * HexMetrics.outerRadius); position.z = Mathf.Clamp(position.z, <span class="hljs-number"><span class="hljs-number">0f</span></span>, zMax); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจูุบ ุญุฌู ุงูุฌุฒุก 5 ร 5 ุฎูุงูุง ุ ูุงูุฎุฑุงุฆุท ุงูุชุฑุงุถููุง ุจุญุฌู 4 ร 3 ุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ูุฐูู ุ ููุญูุงุธ ุนูู ุงูุจุทุงูุงุช ููุณูุง ุ ุณูุชุนูู ุนูููุง ุงุณุชุฎุฏุงู ุญุฌู 20 ร 15 ุฎููุฉ. </font><font style="vertical-align: inherit;">ูุนูู ุงูุฑุบู ูู ุฃููุง ูููุง ุจุชุนููู ููู ุงูุชุฑุงุถูุฉ ูู ุงูููุฏ ุ ุฅูุง ุฃู ูุงุฆู ุงูุดุจูุฉ ูู ูุณุชุฎุฏููุง ุชููุงุฆููุง ุ ูุฃู ุงูุญููู ููุฌูุฏุฉ ุจุงููุนู ูุชุตุจุญ ุงูุชุฑุงุถููุง ุตูุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/399/2e3/da6/3992e3da66fb278c396e15a3d339707a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุดูู ุงูุชุฑุงุถู ุ ูุจูุบ ุญุฌู ุงูุจุทุงูุฉ 20 ร 15.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุญุฌุงู ุจุทุงูุงุช ูุฎุตุตุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชููู ุงูุฎุทูุฉ ุงูุชุงููุฉ ุฏุนู ุฅูุดุงุก ุจุทุงูุงุช ูู ุฃู ุญุฌู ุ ูููุณ ููุท ุงูุญุฌู ุงูุงูุชุฑุงุถู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุฃุถู </font></font><code>HexGrid.CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X ู Z </font><font style="vertical-align: inherit;">ุฅูู </font><font style="vertical-align: inherit;">ุงููุนููุงุช. ุณุชุญู ูุญู ุนุฏุฏ ุงูุฎูุงูุง ุงูุญุงูู. </font><font style="vertical-align: inherit;">ูู ุงูุฏุงุฎู ุ </font></font><code>Awake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุชุตู ุจูู ููุท ูุน ุงูุนุฏุฏ ุงูุญุงูู ูู ุงูุฎูุงูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { HexMetrics.noiseSource = noiseSource; HexMetrics.InitializeHashGrid(seed); HexMetrics.colors = colors; CreateMap(cellCountX, cellCountZ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { โฆ cellCountX = x; cellCountZ = z; chunkCountX = cellCountX / HexMetrics.chunkSizeX; chunkCountZ = cellCountZ / HexMetrics.chunkSizeZ; CreateChunks(); CreateCells(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุณูุนูู ูุฐุง ุจุดูู ุตุญูุญ ููุท ูุน ุนุฏุฏ ุงูุฎูุงูุง ุงูุชู ุชุนุฏ ูุถุงุนููุง ูุญุฌู ุงูุฌุฒุก. </font><font style="vertical-align: inherit;">ุฎูุงููุง ูุฐูู ุ ุณูุคุฏู ุงููุณูุฉ ุงูุตุญูุญุฉ ุฅูู ุฅูุดุงุก ุนุฏุฏ ูููู ุฌุฏูุง ูู ุงูุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃูู ูููููุง ุฅุถุงูุฉ ุฏุนู ููุฃุฌุฒุงุก ุงูููููุกุฉ ุฌุฒุฆููุง ุจุงูุฎูุงูุง ุ ูููุญุธุฑ ููุท ุงุณุชุฎุฏุงู ุงูุฃุญุฌุงู ุงูุชู ูุง ุชุชูุงูู ูุน ุงูุฃุฌุฒุงุก. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ุนุงูู ุงูุชุดุบูู </font></font><code>%</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุณุงุจ ูุง ุชุจูู ูู ูุณูุฉ ุนุฏุฏ ุงูุฎูุงูุง ุนูู ุนุฏุฏ ุงูุฃุฌุฒุงุก. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุณุงูู ุงูุตูุฑ ุ ูููุงู ุชูุงูุถ ููู ูููู ุจุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ. </font><font style="vertical-align: inherit;">ูุจูููุง ูููู ุจุฐูู ุ ุฏุนูุง ูุถูู ุญูุงูุฉ ุถุฏ ุงูุตูุฑ ูุงูุฃุญุฌุงู ุงูุณูุจูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( x &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> || x % HexMetrics.chunkSizeX != <span class="hljs-number"><span class="hljs-number">0</span></span> || z &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> || z % HexMetrics.chunkSizeZ != <span class="hljs-number"><span class="hljs-number">0</span></span> ) { Debug.LogError(<span class="hljs-string"><span class="hljs-string">"Unsupported map size."</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } โฆ }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุฆูุฉ ุจุทุงูุฉ ุฌุฏูุฏุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุฑุญูุฉ ุงูุญุงููุฉ ุ </font><font style="vertical-align: inherit;">ูู ูุนุฏ </font><font style="vertical-align: inherit;">ุฒุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุนูู ุ ูุฃู ุงูุทุฑููุฉ </font></font><code>HexGrid.CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชูู ุงูุขู ุนูู ูุนููุชูู. ูุง ูููููุง ุฑุจุท ุฃุญุฏุงุซ ุงููุญุฏุฉ ูุจุงุดุฑุฉ ุจูุฐู ุงูุฃุณุงููุจ. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฏุนู ุฃุญุฌุงู ูุฎุชููุฉ ูู ุงูุจุทุงูุงุช ุ ูุญุชุงุฌ ุฅูู ุจุนุถ ุงูุฃุฒุฑุงุฑ. ุจุฏูุงู ูู ุฅุถุงูุฉ ูู ูุฐู ุงูุฃุฒุฑุงุฑ ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุฆูุณูุฉ ุ ุฏุนูุง ููุดุฆ ูุงุฆูุฉ ููุจุซูุฉ ูููุตูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ููุญุฉ ููุงุดูุฉ ุฌุฏูุฏุฉ ุฅูู ุงููุดูุฏ ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameObject / UI / Canvas</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). ุณูุณุชุฎุฏู ููุณ ุงูุฅุนุฏุงุฏุงุช ุงูููุฌูุฏุฉ ูู ุงูููุญุฉ ุงูุญุงููุฉ ุ ุจุงุณุชุซูุงุก ุฃู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฑุชูุจ ุงููุฑุฒ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุจ ุฃู ูููู ูุณุงููุงู ูู 1. ูุจูุถู ูุฐุง ุ ุณูููู ุฃุนูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฎุงุตุฉ ุจุงููุญุฑุฑ ุงูุฑุฆูุณู. ููุฏ ุฌุนูุช ูู ูู ุงูููุญุฉ ุงูููุงุดูุฉ ููุธุงู ุงูุฃุญุฏุงุซ ุชุงุจุนูุง ููุงุฆู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ ุจุญูุซ ูุธู ุงูุชุณูุณู ุงููุฑูู ูููุดูุฏ ูุธูููุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c91/6c5/c2c/c916c5c2cee3f58576b12ac1a052bd64.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3be/a8b/79b/3bea8b79bae11a493aea43590394b0a3.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ููุญุฉ ุฎุฑูุทุฉ ุฌุฏูุฏุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู </font><font style="vertical-align: inherit;">ููุญุฉ </font><font style="vertical-align: inherit;">ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบูู ุงูุดุงุดุฉ ุจุฃููููุง. </font><font style="vertical-align: inherit;">ููุงู ุญุงุฌุฉ ุฅูู ุชุนุชูู ุงูุฎูููุฉ ูุนุฏู ุงูุณูุงุญ ูููุคุดุฑ ุจุงูุชูุงุนู ูุน ูู ุดูุก ุขุฎุฑ ุนูุฏูุง ุชููู ุงููุงุฆูุฉ ููุชูุญุฉ. </font><font style="vertical-align: inherit;">ุฃุนุทู ุฐูู ูู ููู ููุญุฏุ ูุชูุธููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุตูุฑุฉ ุงููุตุฏุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุถูุง ุนู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌููุนุฉ (0ุ 0ุ 0ุ 200).</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/16c/1f0/a4f/16c1f0a4f31e0769099b845794a83b4a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุนุฏุงุฏุงุช ุตูุฑุฉ ุงูุฎูููุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุดุฑูุท ูุงุฆูุฉ ุฅูู ูุณุท ุงูููุญุฉ ุ ุนูู ุบุฑุงุฑ ููุญุงุช </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Map Editor</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ุชุณููุฉ ูุงุถุญุฉ ูุฃุฒุฑุงุฑ ูุจุทุงูุงุชูุง ุงูุตุบูุฑุฉ ูุงููุชูุณุทุฉ ูุงููุจูุฑุฉ. </font><font style="vertical-align: inherit;">ุณูุถูู ุฃูุถูุง ุฒุฑ ุฅูุบุงุก ููุง ูู ุญุงูุฉ ุชุบููุฑ ุงููุงุนุจ ุฑุฃููุง. </font><font style="vertical-align: inherit;">ุจุนุฏ ุงูุงูุชูุงุก ูู ุฅูุดุงุก ุงูุชุตููู ุ ูู ุจุฅูุบุงุก ุชูุดูุท </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงููุงูู </font><font style="vertical-align: inherit;">.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c0a/0d9/584/c0a0d95847337d91b97a823312c98a43.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/917/3a1/7c3/9173a17c38f4c6e35f258c407b44d710.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุฎุฑูุทุฉ ุฌุฏูุฏุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุฏุงุฑุฉ ุงููุงุฆูุฉ ุ ูู ุจุฅูุดุงุก ูููู </font></font><code>NewMapMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุถุงูุชู ุฅูู ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุฎุฑูุทุฉ ุฎุฑูุทุฉ ุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ ุ ูุญุชุงุฌ ุฅูู ุงููุตูู ุฅูู ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Grid</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฐูู ุ ูููู ุจุฅุถุงูุฉ ุญูู ูุดุชุฑู ุฅููู ูุฑุจุทู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">NewMapMenu</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexGrid hexGrid; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f7d/a25/c3e/f7da25c3ed3ebf12ba9f4785b19ec8e1.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ูุงุฆูุฉ ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุงูุชุชุงุญ ูุงูุฎุชุงู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ูุชุญ ูุฅุบูุงู ุงููุงุฆูุฉ ุงูููุจุซูุฉ ุจุจุณุงุทุฉ ุนู ุทุฑูู ุชูุดูุท ูุฅูุบุงุก ุชูุดูุท ูุงุฆู ุงูููุญุฉ. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุถูู </font></font><code>NewMapMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุชูู ุดุงุฆุนุชูู ููููุงู ุจุฐูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Open</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Close</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูู ุจุชูุตูู ุฒุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">New Map</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UI </font><font style="vertical-align: inherit;">ุงูุฎุงุต </font><font style="vertical-align: inherit;">ุจุงููุญุฑุฑ ุจุงูุทุฑููุฉ </font></font><code>Open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b84/100/590/b841005902c164f5eb1dcab4f39c4221.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญ ุงููุงุฆูุฉ ุจุงูุถุบุท. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃูุถูุง ุจุชูุตูู ุฒุฑ " </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุบุงุก</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃูุฑ" ุจุงูุทุฑููุฉ </font></font><code>Close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูุชูุญ ููุง ุฐูู ูุชุญ ุงููุงุฆูุฉ ุงูููุจุซูุฉ ูุฅุบูุงููุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ุฎุฑุงุฆุท ุฌุฏูุฏุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุดุงุก ุฎุฑุงุฆุท ุฌุฏูุฏุฉ ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฏุนุงุก </font><font style="vertical-align: inherit;">ุงูุฃุณููุจ </font><font style="vertical-align: inherit;">ูู ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Grid</font></font></em><font style="vertical-align: inherit;"></font><code>CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุญุชุงุฌ ุจุนุฏ ุฐูู ุฅูู ุฅุบูุงู ุงููุงุฆูุฉ ุงูููุจุซูุฉ. </font><font style="vertical-align: inherit;">ุฃุถู ุฅูู </font></font><code>NewMapMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุชู ุณุชุชุนุงูู ูุน ูุฐุง ุ ูุน ูุฑุงุนุงุฉ ุงูุญุฌู ุงูุชุนุณูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { hexGrid.CreateMap(x, z); Close(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃูุง ุชููู ูุฐู ุงูุทุฑููุฉ ุนุงูุฉ ุ ูุฃููุง ูุง ุฒููุง ูุง ูุณุชุทูุน ุชูุตูููุง ูุจุงุดุฑุฉ ุจุฃุญุฏุงุซ ุงูุฃุฒุฑุงุฑ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ูู ุจุฅูุดุงุก ุทุฑููุฉ ูุงุญุฏุฉ ููู ุฒุฑ ุณูุชู ุงูุงุชุตุงู </font></font><code>CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุญุฌู ุงููุญุฏุฏ. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููุฎุฑูุทุฉ ุงูุตุบูุฑุฉ ุ ุงุณุชุฎุฏูุช ุญุฌู 20 ร 15 ุ ูุชูุงูู ูุน ุงูุญุฌู ุงูุงูุชุฑุงุถู ููุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููุจุทุงูุฉ ุงููุชูุณุทุฉ ุ ูุฑุฑุช ูุถุงุนูุฉ ูุฐุง ุงูุญุฌู ุ ูุงูุญุตูู ุนูู 40 ร 30 ุ ููุถุงุนูุชู ูุฑุฉ ุฃุฎุฑู ููุจุทุงูุฉ ุงููุจูุฑุฉ. </font><font style="vertical-align: inherit;">ูู ุจุชูุตูู ุงูุฃุฒุฑุงุฑ ุจุงูุทุฑู ุงูููุงุณุจุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateSmallMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { CreateMap(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMediumMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { CreateMap(<span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateLargeMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { CreateMap(<span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-number"><span class="hljs-number">60</span></span>); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ุงููุงููุฑุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงูุขู ุงุณุชุฎุฏุงู ุงููุงุฆูุฉ ุงูููุจุซูุฉ ูุฅูุดุงุก ุฎุฑุงุฆุท ุฌุฏูุฏุฉ ุจุซูุงุซุฉ ุฃุญุฌุงู ูุฎุชููุฉ! ูู ุดูุก ูุนูู ุจุดูู ุฌูุฏ ุ ููููุง ุจุญุงุฌุฉ ุฅูู ุงูุงูุชูุงู ุจุจุนุถ ุงูุชูุงุตูู. ุนูุฏูุง ุชููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุดุทุฉ ุ ูู ูุนุฏ ุจุฅููุงููุง ุงูุชูุงุนู ูุน ูุงุฌูุฉ ูุณุชุฎุฏู ุงููุญุฑุฑ ูุชุญุฑูุฑ ุงูุฎูุงูุง. ููุน ุฐูู ุ ูุง ูุฒุงู ุจุฅููุงููุง ุงูุชุญูู ูู ุงููุงููุฑุง. ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ูุน ูุชุญ ุงููุงุฆูุฉ ุ ูุฌุจ ุฃู ุชููู ุงููุงููุฑุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฏููุง ูุงููุฑุง ูุงุญุฏุฉ ููุท ุ ูุฅู ุงูุญู ุงูุณุฑูุน ูุงูุนููู ูู ุจุจุณุงุทุฉ ุฅุถุงูุฉ ุฎุงุตูุฉ ุซุงุจุชุฉ ุฅูููุง </font></font><code>Locked</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููุงุณุชุฎุฏุงู ุนูู ูุทุงู ูุงุณุน ุ ูุฐุง ุงูุญู ููุณ ููุงุณุจูุง ุฌุฏูุง ุ ูููู ุจุงููุณุจุฉ ุฅูู ูุงุฌูุชูุง ุงูุจุณูุทุฉ ูููู. ูุฐุง ูุชุทูุจ ุฃู ูุชุชุจุน ุงูุญุงูุฉ ุงูุซุงุจุชุฉ ุจุงูุฏุงุฎู </font></font><code>HexMapCamera</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุงูุชู ูุชู ุชุนููููุง ุนูุฏ ูุงููุฑุง Awake.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> HexMapCamera instance; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { instance = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; swivel = transform.GetChild(<span class="hljs-number"><span class="hljs-number">0</span></span>); stick = swivel.GetChild(<span class="hljs-number"><span class="hljs-number">0</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุงุตูุฉ </font></font><code>Locked</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฃู ูููู ุฎุงุตูุฉ ููุทููุฉ ุซุงุจุชุฉ ุจุณูุทุฉ ููุท ูุน ูุงุถุน. </font><font style="vertical-align: inherit;">ูู ูุง ููุนูู ูู ุฅููุงู ุชุดุบูู ุงููุซูู </font></font><code>HexMapCamera</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูููู ููููุงู ุ ูุชุดุบููู ุนูุฏูุง ูููู ุบูุฑ ูุคูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Locked { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { instance.enabled = !<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู </font></font><code>NewMapMenu.Open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุญุฌุจ ุงููุงููุฑุง </font></font><code>NewMapMenu.Close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู- ูุชุญูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Open</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); HexMapCamera.Locked = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Close</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); HexMapCamera.Locked = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุญูุงุธ ุนูู ูุถุน ุงููุงููุฑุง ุงูุตุญูุญ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ูุดููุฉ ุฃุฎุฑู ูุญุชููุฉ ูู ุงููุงููุฑุง. </font><font style="vertical-align: inherit;">ุนูุฏ ุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ ุฃุตุบุฑ ูู ุงูุฎุฑูุทุฉ ุงูุญุงููุฉ ุ ูุฏ ุชุธูุฑ ุงููุงููุฑุง ุฎุงุฑุฌ ุญุฏูุฏ ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุณุชุจูู ููุงู ุญุชู ูุญุงูู ุงููุงุนุจ ุชุญุฑูู ุงููุงููุฑุง. </font><font style="vertical-align: inherit;">ูุนูุฏูุง ููุท ุณุชุตุจุญ ูุญุฏูุฏุฉ ุจุญุฏูุฏ ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุฐู ุงููุดููุฉ ุ ูููููุง ุฅุถุงูุฉ </font></font><code>HexMapCamera</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุทุฑููุฉ ุซุงุจุชุฉ </font></font><code>ValidatePosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><code>AdjustPosition</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุคุฏู </font><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก ุทุฑููุฉ </font><font style="vertical-align: inherit;">ูุซูู ูุน ุฅุฒุงุญุฉ ุตูุฑูุฉ ุฅูู ุฅุฌุจุงุฑ ุงููุงููุฑุง ุนูู ุงูุงูุชูุงู ุฅูู ุญุฏูุฏ ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงููุงููุฑุง ููุฌูุฏุฉ ุจุงููุนู ุฏุงุฎู ุญุฏูุฏ ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ ุ ูุณุชุจูู ูู ููุงููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ValidatePosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { instance.AdjustPosition(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฏุนุงุก ุงูุทุฑููุฉ ุจุงูุฏุงุฎู </font></font><code>NewMapMenu.CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { hexGrid.CreateMap(x, z); HexMapCamera.ValidatePosition(); Close(); }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุธ ุญุฌู ุงูุฎุฑูุทุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃูู ูููููุง ุฅูุดุงุก ุจุทุงูุงุช ุจุฃุญุฌุงู ูุฎุชููุฉ ุ ุฅูุง ุฃููุง ูุง ุชุคุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุนูุฏ ุงูุญูุธ ูุงูุชุญููู. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃู ุชุญููู ุงูุฎุฑูุทุฉ ุณูุคุฏู ุฅูู ุฎุทุฃ ุฃู ุฎุฑูุทุฉ ุบูุฑ ุตุญูุญุฉ ุฅุฐุง ูุงู ุญุฌู ุงูุฎุฑูุทุฉ ุงูุญุงููุฉ ูุง ูุชุทุงุจู ูุน ุญุฌู ุงูุฎุฑูุทุฉ ุงููุญููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุฐู ุงููุดููุฉ ุ ูุจู ุชุญููู ุจูุงูุงุช ุงูุฎููุฉ ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ ุจุงูุญุฌู ุงูููุงุณุจ. </font><font style="vertical-align: inherit;">ูููุชุฑุถ ุฃู ูุฏููุง ุฎุฑูุทุฉ ุตุบูุฑุฉ ูุญููุธุฉ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ูู ุดูุก ุนูู ูุง ูุฑุงู ุฅุฐุง ุฃูุดุฃูุง </font></font><code>HexGrid.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุฑูุทุฉ 20 ร 15 </font><font style="vertical-align: inherit;">ูู ุงูุจุฏุงูุฉ </font><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { CreateMap(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Load(reader); } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; chunks.Length; i++) { chunks[i].Refresh(); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฎุฒูู ุจุญุฌู ุงูุจุทุงูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ูููููุง ุชุฎุฒูู ุจุทุงูุฉ ุจุฃู ุญุฌู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูููู ุงูุญู ุงูุนุงู ูู ุญูุธ ุญุฌู ุงูุฎุฑูุทุฉ ุฃูุงู ูุฐู ุงูุฎูุงูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryWriter writer</span></span></span><span class="hljs-function">)</span></span> { writer.Write(cellCountX); writer.Write(cellCountZ); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Save(writer); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุซู ูููููุง ุงูุญุตูู ุนูู ุงูุญุฌู ุงูุญูููู ูุงุณุชุฎุฏุงูู ูุฅูุดุงุก ุฎุฑูุทุฉ ุจุงูุฃุญุฌุงู ุงูุตุญูุญุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader</span></span></span><span class="hljs-function">)</span></span> { CreateMap(reader.ReadInt32(), reader.ReadInt32()); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู ูููููุง ุงูุขู ุชุญููู ุฎุฑุงุฆุท ุจุฃุญุฌุงู ูุฎุชููุฉ ุ ูุฅููุง ููุงุฌู ูุฑุฉ ุฃุฎุฑู ูุดููุฉ ูุถุน ุงููุงููุฑุง. </font><font style="vertical-align: inherit;">ุณูููู ุจุญููุง ุนู ุทุฑูู ุงูุชุญูู ูู ูููุนูุง </font></font><code>HexMapEditor.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุชุญููู ุงูุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (BinaryReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryReader(File.OpenRead(path))) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> header = reader.ReadInt32(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header == <span class="hljs-number"><span class="hljs-number">0</span></span>) { hexGrid.Load(reader, header); HexMapCamera.ValidatePosition(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"Unknown map format "</span></span> + header); } } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุณูู ููู ุฌุฏูุฏ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูููุฌ ูุนูู ูุน ุงูุจุทุงูุงุช ุงูุชู ุณูุญุชูุธ ุจูุง ูู ุงููุณุชูุจู ุ ุฅูุง ุฃููุง ูู ุชุนูู ูุน ุงูุจุทุงูุงุช ุงููุฏููุฉ. </font><font style="vertical-align: inherit;">ูุงูุนูุณ ุจุงูุนูุณ - ูู ูุชููู ุงูุฑูุฒ ูู ุงูุฌุฒุก ุงูุณุงุจู ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ูู ุชุญููู ูููุงุช ุงูุฎุฑุงุฆุท ุงูุฌุฏูุฏุฉ ุจุดูู ุตุญูุญ. </font><font style="vertical-align: inherit;">ููุชูููุฒ ุจูู ุงูุชูุณููุงุช ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ ุ ุณูุฒูุฏ ุงููููุฉ ุงูุตุญูุญุฉ ููุฑุฃุณ. </font><font style="vertical-align: inherit;">ูุงู ุชูุณูู ุงูุญูุธ ุงููุฏูู ุจุฏูู ุญุฌู ุงูุฎุฑูุทุฉ ูุฏูู ุงูุฅุตุฏุงุฑ 0. ุณูููู ุงูุชูุณูู ุงูุฌุฏูุฏ ุจุญุฌู ุงูุฎุฑูุทุฉ ูุฏูู ุงูุฅุตุฏุงุฑ 1. ูุฐูู ุ ุนูุฏ ุงูุชุณุฌูู ุ </font></font><code>HexMapEditor.Save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ููุชุจ 1 ุจุฏูุงู ูู 0.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> ( BinaryWriter writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryWriter(File.Open(path, FileMode.Create)) ) { writer.Write(<span class="hljs-number"><span class="hljs-number">1</span></span>); hexGrid.Save(writer); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุขู ูุตุงุนุฏูุง ุ ุณูุชู ุญูุธ ุงูุจุทุงูุงุช ูุฅุตุฏุงุฑ 1. ุฅุฐุง ุญุงูููุง ูุชุญูุง ูู ุงูุชุฌููุน ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุงูุณุงุจู ุ ูุณูู ูุฑูุถูู ุงูุชุญููู ูุงูุฅุจูุงุบ ุนู ุชูุณูู ุจุทุงูุฉ ุบูุฑ ูุนุฑูู. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุณูุญุฏุซ ูุฐุง ุฅุฐุง ุญุงูููุง ุจุงููุนู ุชุญููู ูุซู ูุฐู ุงูุจุทุงูุฉ. </font><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ุชุบููุฑ ุงูุทุฑููุฉ </font></font><code>HexMapEditor.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ุชูุจู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = Path.Combine(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"test.map"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (BinaryReader reader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BinaryReader(File.OpenRead(path))) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> header = reader.ReadInt32(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header == <span class="hljs-number"><span class="hljs-number">1</span></span>) { hexGrid.Load(reader); HexMapCamera.ValidatePosition(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Debug.LogWarning(<span class="hljs-string"><span class="hljs-string">"Unknown map format "</span></span> + header); } } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชูุงูู ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ุฅุฐุง ุฃุฑุฏูุง ุ ูุง ูุฒุงู ุจุฅููุงููุง ุชูุฒูู ุฎุฑุงุฆุท ุงูุฅุตุฏุงุฑ 0 ุ ุจุงูุชุฑุงุถ ุฃู ุฌููุนูุง ููุง ููุณ ุงูุญุฌู 20 ร 15. ุฃู ุฃูู ูุง ูุฌุจ ุฃู ูููู ุงูุนููุงู 1 ุ ูููู ุฃู ูููู ุตูุฑูุง ุฃูุถูุง. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูู ุฅุตุฏุงุฑ ูุชุทูุจ ูููุฌูุง ุฎุงุตูุง ุจู ุ </font></font><code>HexMapEditor.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ููุฑุฑ ุงูุฑุฃุณ ุฅูู ุงูุทุฑููุฉ </font></font><code>HexGrid.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>) { hexGrid.Load(reader, header); HexMapCamera.ValidatePosition(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู </font></font><code>HexGrid.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนููุงููุง </font><font style="vertical-align: inherit;">ุฅูู </font><font style="vertical-align: inherit;">ุงููุนููุฉ ูุงุณุชุฎุฏูู ูุงุชุฎุงุฐ ูุฑุงุฑุงุช ุจุดุฃู ุฅุฌุฑุงุกุงุช ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูุฑุฃุณ ุฃูู ูู 1 ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ูุฑุงุกุฉ ุจูุงูุงุช ุญุฌู ุงูุจุทุงูุฉ. </font><font style="vertical-align: inherit;">ูุฅูุง ุ ูุฅููุง ูุณุชุฎุฏู ุญุฌู ุงูุจุทุงูุฉ ุงูุซุงุจุช ุงููุฏูู ุงูุจุงูุบ 20 ร 15 ููุชุฎุทู ูุฑุงุกุฉ ุจูุงูุงุช ุงูุญุฌู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> header</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">20</span></span>, z = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header &gt;= <span class="hljs-number"><span class="hljs-number">1</span></span>) { x = reader.ReadInt32(); z = reader.ReadInt32(); } CreateMap(x, z); โฆ }</code> </pre> <br> <a href="" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุตุฏุงุฑ ููู ุงูุฎุฑูุทุฉ 0</font></font></a> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญุต ุญุฌู ุงูุจุทุงูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ูุน ุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ ุ ูู ุงููููู ูุธุฑููุง ุฃู ูุถุทุฑ ุฅูู ุชุญููู ุฎุฑูุทุฉ ุบูุฑ ูุชูุงููุฉ ูุน ุญุฌู ุงูุฌุฒุก. </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุญุฏุซ ูุฐุง ุ ูุฌุจ ุฃู ููุทุน ุชุญููู ุงูุจุทุงูุฉ. </font></font><code>HexGrid.CreateMap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุถ ุจุงููุนู ุฅูุดุงุก ุฎุฑูุทุฉ ููุนุฑุถ ุฎุทุฃ ูู ูุญุฏุฉ ุงูุชุญูู. </font><font style="vertical-align: inherit;">ูุฅุฎุจุงุฑ ุงููุชุตู ุจุงูุทุฑููุฉ ุ ุฏุนูุง ูุฑุฌุน ููุทููุฉ ุชุฎุจุฑูุง ุฅุฐุง ุชู ุฅูุดุงุก ุงูุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateMap</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( x &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> || x % HexMetrics.chunkSizeX != <span class="hljs-number"><span class="hljs-number">0</span></span> || z &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span> || z % HexMetrics.chunkSizeZ != <span class="hljs-number"><span class="hljs-number">0</span></span> ) { Debug.LogError(<span class="hljs-string"><span class="hljs-string">"Unsupported map size."</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } โฆ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุ </font></font><code>HexGrid.Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ุฅููุงู ุงูุชูููุฐ ุนูุฏ ูุดู ุฅูุดุงุก ุงูุฎุฑูุทุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> header</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">20</span></span>, z = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (header &gt;= <span class="hljs-number"><span class="hljs-number">1</span></span>) { x = reader.ReadInt32(); z = reader.ReadInt32(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CreateMap(x, z)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุชุญููู ูุญู ูุญู ุฌููุน ุงูุจูุงูุงุช ูู ุงูุฎูุงูุง ุงูููุฌูุฏุฉ ุ ูุง ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุฎุฑูุทุฉ ุฌุฏูุฏุฉ ุฅุฐุง ุชู ุชุญููู ุฎุฑูุทุฉ ูู ููุณ ุงูุญุฌู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูููู ุชุฎุทู ูุฐู ุงูุฎุทูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x != cellCountX || z != cellCountZ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CreateMap(x, z)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฏุงุฑุฉ ุงููููุงุช </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุญูุธ ูุชุญููู ุงูุจุทุงูุงุช ุจุฃุญุฌุงู ูุฎุชููุฉ ุ ูููููุง ููุชุจ ูููุฑุฃ ุฏุงุฆููุง </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุฑูุทุฉ ุงูุงุฎุชุจุงุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุงูุขู ุณูุถูู ุฏุนููุง ููููุงุช ูุฎุชููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุญูุธ ุงูุฎุฑูุทุฉ ุฃู ุชุญููููุง ูุจุงุดุฑุฉู ุ ูุณุชุฎุฏู ูุงุฆูุฉ ููุจุซูุฉ ุฃุฎุฑู ุชููุฑ ุฅุฏุงุฑุฉ ูููุงุช ูุชูุฏูุฉ. </font><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ููุญุฉ ุฑุณู ุฃุฎุฑู ุ ููุง ูู ุงูุญุงู ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูููู ูุฐู ุงููุฑุฉ ุณูู ูุทูู ุนูููุง ุงุณู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุธ ูุงุฆูุฉ ุงูุชุญููู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุณุชููู ูุฐู ุงููุงุฆูุฉ ุจุญูุธ ุงูุฎุฑุงุฆุท ูุชุญููููุง ุ ุงุนุชูุงุฏูุง ุนูู ุงูุฒุฑ ุงูุฐู ุชู ุงูุถุบุท ุนููู ููุชุญู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุจุฅูุดุงุก ุชุตููู </font><em><font style="vertical-align: inherit;">Save Load Menu</font></em><font style="vertical-align: inherit;"> .</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ูุงูุช ูุงุฆูุฉ ุญูุธ. ูู ููุช ูุงุญู ุ ุณูุญูููุง ุฏููุงูููููุง ุฅูู ูุงุฆูุฉ ุชูููุฏ. ูุซู ูุงุฆูุฉ ุฃุฎุฑู ุ ูุฌุจ ุฃู ูููู ููุง ุฎูููุฉ ูุดุฑูุท ูุงุฆูุฉ ุ ุชุณููุฉ ูุงุฆูุฉ ุ ูุฒุฑ ุฅูุบุงุก. ุซู ุฃุถู ุนุฑุถ ุชูุฑูุฑ ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameObject / UI / Scroll View</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุฅูู ุงููุงุฆูุฉ ูุนุฑุถ ูุงุฆูุฉ ุจุงููููุงุช. ุฃุฏูุงู ูููู ุจุฅุฏุฑุงุฌ ุญูู ุงูุฅุฏุฎุงู ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameObject / UI / Input Field</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ููุฅุดุงุฑุฉ ุฅูู ุฃุณูุงุก ุงูุจุทุงูุงุช ุงูุฌุฏูุฏุฉ. ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุฒุฑ ุฅุฌุฑุงุก ูุญูุธ ุงูุฎุฑูุทุฉ. ูุฃุฎูุฑูุง. ุฅุถุงูุฉ ุฒุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฐู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฅุฒุงูุฉ ุจุทุงูุงุช ุบูุฑ ุงููุฑุบูุจ ูููุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c73/279/198/c732791989e1eb6fa53e73ec3435bc74.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/176/485/3da/1764853da66092443c0327638dc1803a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุตููู ูุงุฆูุฉ ุชุญููู ุญูุธ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุฑุงุถููุง ุ ูุณูุญ ุนุฑุถ ุงูุชูุฑูุฑ ุจุงูุชูุฑูุฑ ุงูุฃููู ูุงูุฑุฃุณู ุ ูููููุง ูุง ูุญุชุงุฌ ุฅูุง ุฅูู ูุงุฆูุฉ ุจุงูุชูุฑูุฑ ุงูุฑุฃุณู. ููุฐููุ ุชุนุทูู ุงูุชูุฑูุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุตู ุงูุฃููู ุดุฑูุท ุงูุชูุฑูุฑ. ูููุง ุฃูุถูุง ุจุชุนููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุงูุญุฑูุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู ุชุซุจูุท ูุชุนุทูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุตูุฑ ุงูุฐุงุชู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุนู ุงููุงุฆูุฉ ุชุจุฏู ุฃูุซุฑ ุชูููุฏูุง.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/43f/3a9/e36/43f3a9e36202f436772f54eedcd96c76.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุงุฑุงุช ูุงุฆูุฉ ุงููููุงุช. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุจุฅุฒุงูุฉ ุงูุทูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scrollbar Horizontal</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงููููุงุช</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฃููุง ูุณูุง ุจุญุงุฌุฉ ุฅููู. </font><font style="vertical-align: inherit;">ุซู ูู ุจุชุบููุฑ ุญุฌู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุฑูุท ุงูุชูุฑูุฑ ุงูุนููุฏู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญูุซ </font><em><font style="vertical-align: inherit;">ูุตู ุฅูู</font></em><font style="vertical-align: inherit;"> ุฃุณูู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูููู ุชุบููุฑ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุต ุงูุนูุตุฑ ุงููุงุฆุจ ููุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุฎุงู ุงูุงุณู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุตุฑ ุงููุงุฆุจ ุงูุฎุงุต ุจู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููุฏ ุงุณุชุฎุฏูุช ูุตูุง ูุตูููุง ุ ูููู ููููู ุชุฑูู ูุงุฑุบูุง ูุงูุชุฎูุต ูู ุงูุนูุตุฑ ุงููุงุฆุจ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ed5/7d5/d17/ed57d5d17dfb0695fc4b2f5f3f9dc8a5.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุชุบููุฑ ุชุตููู ุงููุงุฆูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุงูุชูููุง ูู ุงูุชุตููู ุ ูุงูุขู ูููู ุจุฅูุบุงุก ุชูุดูุท ุงููุงุฆูุฉ ุจุญูุซ ูุชู ุฅุฎูุงุคูุง ุจุดูู ุงูุชุฑุงุถู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฏุงุฑุฉ ุงููุงุฆูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชุนูู ุงููุงุฆูุฉ ุ ูุญุชุงุฌ ุฅูู ุจุฑูุงูุฌ ูุตู ุขุฎุฑ ุ ูู ูุฐู ุงูุญุงูุฉ - </font></font><code>SaveLoadMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุซู </font></font><code>NewMapMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุญุชุงุฌ ุฅูู ุงุฑุชุจุงุท ุจุงูุดุจูุฉ ุ ููุฐูู ุงูุฃุณุงููุจ </font></font><code>Open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>Close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SaveLoadMenu</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HexGrid hexGrid; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Open</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); HexMapCamera.Locked = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Close</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); HexMapCamera.Locked = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ูุฐุง ุงููููู ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SaveLoadMenu</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฃุนุทู ุงุฑุชุจุงุทูุง ููุงุฆู ุงูุดุจูุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/974/86f/440/97486f440f44d4db9c744cfa9b6acec0.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู SaveLoadMenu. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชูุชุญ ูุงุฆูุฉ ููุญูุธ ุฃู ุงูุชุญููู. </font><font style="vertical-align: inherit;">ูุชุจุณูุท ุงูุนูู ุ ุฃุถู </font></font><code>Open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนููุฉ ููุทููุฉ </font><font style="vertical-align: inherit;">ุฅูู ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุญุฏุฏ ูุง ุฅุฐุง ูุงู ูุฌุจ ุฃู ุชููู ุงููุงุฆูุฉ ูู ูุถุน ุงูุญูุธ. </font><font style="vertical-align: inherit;">ุณูุชุชุจุน ูุฐุง ุงููุถุน ูู ุงูููุฏุงู ููุนุฑูุฉ ุงูุฅุฌุฑุงุก ุงูุฐู ุณูููู ุจู ูุงุญููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> saveMode; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Open</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> saveMode</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.saveMode = saveMode; gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); HexMapCamera.Locked = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุงูุฌูุน ุจูู ุฃุฒุฑุงุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุธ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญููู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฑุงูุฉ ุฎุฑูุทุฉ ูุญุฑุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุน ุฃุณููุจ </font></font><code>Open</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุธ ุชุญููู ุงููุงุฆูุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุชุญูู ูู ุงููุนููุฉ ุงูููุทููุฉ ูุฒุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูุธ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุท </font><font style="vertical-align: inherit;">.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/38c/59c/44f/38c59c44fa001e97128532d7c7d92168.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุญ ุงููุงุฆูุฉ ูู ูุถุน ุงูุญูุธ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ุชูู ูุฏ ูุนูุชุ ุฑุจุท ุงูุญุฏุซ ุฃุฒุฑุงุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุบุงุก</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุฑููุฉ </font></font><code>Close</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงูุขู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุธ ุชุญููู ุงููุงุฆูุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุฃู ุชูุชุญ ูุชุบูู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบูุฑ ูู ุงููุธูุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุฃูุดุฃูุง ุงููุงุฆูุฉ ููุงุฆูุฉ ุญูุธ ุ ูููู ูุชู ุชุญุฏูุฏ ูุถุนูุง ูู ุฎูุงู ุงูุถุบุท ุนูู ุงูุฒุฑ ููุชุญูุง. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุชุบููุฑ ูุธูุฑ ุงููุงุฆูุฉ ุญุณุจ ุงููุถุน. </font><font style="vertical-align: inherit;">ุนูู ูุฌู ุงูุฎุตูุต ุ ูุญุชุงุฌ ุฅูู ุชุบููุฑ ุชุณููุฉ ุงููุงุฆูุฉ ูุชุณููุฉ ุฒุฑ ุงูุฅุฌุฑุงุก. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃููุง ุณูุญุชุงุฌ ุฅูู ุฑูุงุจุท ููุฐู ุงูุนูุงูุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SaveLoadMenu</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Text menuLabel, actionButtonLabel; โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e7c/4d3/b8d/e7c4d3b8d55ce8c333d38be996a3ebc1.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุชุตุงู ุจุงูุนูุงูุงุช. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ุชูุชุญ ุงููุงุฆูุฉ ูู ูุถุน ุงูุญูุธ ุ ูุณุชุฎุฏู ุงูุชุณููุงุช ุงูููุฌูุฏุฉ ุ ุฃู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุธ ุงูุฎุฑูุทุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุงุฆูุฉ </font><font style="vertical-align: inherit;">ูุฒุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูุธ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฅุฌุฑุงุก. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐููุ ููุญู ูู ูุถุน ุงูุชุญูููุ ุฃู ุงุณุชุฎุฏุงู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญููู ุฎุฑูุทุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุญููู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Open</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> saveMode</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.saveMode = saveMode; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (saveMode) { menuLabel.text = <span class="hljs-string"><span class="hljs-string">"Save Map"</span></span>; actionButtonLabel.text = <span class="hljs-string"><span class="hljs-string">"Save"</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { menuLabel.text = <span class="hljs-string"><span class="hljs-string">"Load Map"</span></span>; actionButtonLabel.text = <span class="hljs-string"><span class="hljs-string">"Load"</span></span>; } gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); HexMapCamera.Locked = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุฏุฎู ุงุณู ุงูุจุทุงูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนูุง ูุชุฑู ูุงุฆูุฉ ุงููููุงุช ุงูุขู. </font><font style="vertical-align: inherit;">ูููู ูููุณุชุฎุฏู ุชุญุฏูุฏ ุงูููู ุงููุญููุธ ุฃู ุงูุฐู ุชู ุชูุฒููู ุนู ุทุฑูู ุฅุฏุฎุงู ุงุณู ุงูุจุทุงูุฉ ูู ุญูู ุงูุฅุฏุฎุงู. </font><font style="vertical-align: inherit;">ููุญุตูู ุนูู ูุฐู ุงูุจูุงูุงุช ุ ูุญุชุงุฌ ุฅูู ูุฑุฌุน ููููู </font></font><code>InputField</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุฎุงู ุงูุงุณู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> InputField nameInput;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e49/8e0/021/e498e002162a42103571cfac7cf91221.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุชุตุงู ุจูุฌุงู ุงูุฅุฏุฎุงู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ููุฒู ุฅุฌุจุงุฑ ุงููุณุชุฎุฏู ุนูู ุฅุฏุฎุงู ุงููุณุงุฑ ุงููุงูู ูููู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุณูู ูููู ููุท ุงุณู ุงูุจุทุงูุฉ ุฏูู ุชูุฏูุฏ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.MAP</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฏุนูุง ูุถูู ุทุฑููุฉ ุชุฃุฎุฐ ูุฏุฎูุงุช ุงููุณุชุฎุฏู ูุชูุดุฆ ุงููุณุงุฑ ุงูุตุญูุญ ููุง. </font><font style="vertical-align: inherit;">ูุฐุง ุบูุฑ ูููู ุนูุฏูุง ูููู ุงูุฅุฏุฎุงู ูุงุฑุบูุง ุ ูุฐูู ูู ูุฐู ุงูุญุงูุฉ ุณูุนูุฏ </font></font><code>null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SaveLoadMenu</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSelectedPath</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> mapName = nameInput.text; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mapName.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Path.Combine(Application.persistentDataPath, mapName + <span class="hljs-string"><span class="hljs-string">".map"</span></span>); } }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ูุญุฏุซ ุฅุฐุง ุฃุฏุฎู ุงููุณุชุฎุฏู ุฃุญุฑููุง ุบูุฑ ุตุงูุญุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">        ,       .  ,      ,         . <br><br>         <em>Content Type</em>  . ,       - ,     .      ,    ,    . </div></div><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุธ ูุชุญููู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุณูู ุชุดุงุฑู ูู ุงูุญูุธ ูุงูุชุญููู </font></font><code>SaveLoadMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐููุ ููุญู ูุชุญุฑู ุงูุทุฑู </font></font><code>Save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>Load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>SaveLoadMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ุชุนุฏ ููุงู ุญุงุฌุฉ ุฅูู ูุดุงุฑูุชูุง ุ ูุณุชุนูู ูุน ูุนููุฉ ุงููุณุงุฑ ุจุฏูุงู ูู ุงููุณุงุฑ ุงูุซุงุจุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> path</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// string path = Path.Combine(Application.persistentDataPath, "test.map"); using ( BinaryWriter writer = new BinaryWriter(File.Open(path, FileMode.Create)) ) { writer.Write(1); hexGrid.Save(writer); } } void Load (string path) { // string path = Path.Combine(Application.persistentDataPath, "test.map"); using (BinaryReader reader = new BinaryReader(File.OpenRead(path))) { int header = reader.ReadInt32(); if (header &lt;= 1) { hexGrid.Load(reader, header); HexMapCamera.ValidatePosition(); } else { Debug.LogWarning("Unknown map format " + header); } } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูููู ุงูุขู ุจุชุญููู ูููุงุช ุนุดูุงุฆูุฉ ุ ุณูููู ูู ุงูุฌูุฏ ุงูุชุญูู ูู ูุฌูุฏ ุงูููู ุจุงููุนู ุ ูุญูููุง ููุท ุญุงูู ูุฑุงุกุชู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ูุฐูู ุ ูุฅููุง ูููู ุฎุทุฃ ููููู ุงูุนูููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> path</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!File.Exists(path)) { Debug.LogError(<span class="hljs-string"><span class="hljs-string">"File does not exist "</span></span> + path); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุฃุถู ุงูุทุฑููุฉ ุงูุนุงูุฉ </font></font><code>Action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุจุฏุฃ ุจุงูุญุตูู ุนูู ุงููุณุงุฑ ุงููุญุฏุฏ ูู ูุจู ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ูุณุงุฑ ุ ููู ุจุญูุธู ุฃู ุชุญูููู. </font><font style="vertical-align: inherit;">ุซู ุฃุบูู ุงููุงุฆูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Action</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = GetSelectedPath(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (path == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (saveMode) { Save(path); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { Load(path); } Close(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฎูุงู ุฅุฑูุงู ุญุฏุซ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฒุฑ ุงูุฅุฌุฑุงุก</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุฐู ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุ ูููููุง ุงูุญูุธ ูุงูุชุญููู ุจุงุณุชุฎุฏุงู ุฃุณูุงุก ุงูุฎุฑุงุฆุท ุงูุนุดูุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุง ูุนูุฏ ุชุนููู ุญูู ุงูุฅุฏุฎุงู ุ ุณูุจูู ุงูุงุณู ุงููุญุฏุฏ ุญุชู ุงูุญูุธ ุฃู ุงูุชุญููู ุงูุชุงูู. </font><font style="vertical-align: inherit;">ูุฐุง ููุงุณุจ ููุญูุธ ุฃู ุงูุชุญููู ูู ููู ูุงุญุฏ ุนุฏุฉ ูุฑุงุช ูุชุชุงููุฉ ุ ูุฐูู ูู ูุบูุฑ ุฃู ุดูุก.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุงุตุฑ ูุงุฆูุฉ ุงูุฎุฑูุทุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุณูููุฃ ูุงุฆูุฉ ุงููููุงุช ุจุฌููุน ุงูุจุทุงูุงุช ุงูููุฌูุฏุฉ ุนูู ูุณุงุฑ ุชุฎุฒูู ุงูุจูุงูุงุช. </font><font style="vertical-align: inherit;">ุนูุฏ ุงูููุฑ ููู ุฃุญุฏ ุงูุนูุงุตุฑ ุงูููุฌูุฏุฉ ูู ุงููุงุฆูุฉ ุ ุณูุชู ุงุณุชุฎุฏุงูู ููุต ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุฎุงู ุงูุงุณู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฃุถู ุจุทุฑููุฉ </font></font><code>SaveLoadMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุงูุฉ ููุฐุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectItem</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { nameInput.text = name; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุดูุก ูุง ูู ุนูุตุฑ ูุงุฆูุฉ. </font><font style="vertical-align: inherit;">ุงูุฒุฑ ุงููุนุชุงุฏ ุณููุนู. </font><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุฆู ูุฎูุถ ุงูุงุฑุชูุงุน ุฅูู 20 ูุญุฏุฉ ุจุญูุซ ูุง ูุฃุฎุฐ ูุณุงุญุฉ ูุจูุฑุฉ ุนููุฏููุง. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃูุง ูุจุฏู ุฒุฑูุง ุ ูุฐูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณููุณุญ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฑุงุจุท </font><em><font style="vertical-align: inherit;">ุตูุฑุฉ ุงููุตุฏุฑ</font></em><font style="vertical-align: inherit;"> ููููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุตูุฑุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฎุงุต ุจู </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณูุตุจุญ ุฃุจูุถ ุจุงููุงูู. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูู ูุชุฃูุฏ ูู ูุญุงุฐุงุฉ ุงูุชุณููุฉ ุฅูู ุงููุณุงุฑ ููู ูุฌูุฏ ูุณุงูุฉ ุจูู ุงููุต ูุงูุฌุงูุจ ุงูุฃูุณุฑ ูู ุงูุฒุฑ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุงูุงูุชูุงุก ูู ุชุตููู ุงูุฒุฑ ุ ูุญููู ุฅูู ุงูุฌุงูุฒุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/501/0f0/6e5/5010f06e5b380440bca024ffb8c0e307.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/67b/60b/21f/67b60b21f34e4ae69846c35ed5583fae.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฒุฑ ุนูุตุฑ ูุงุฆูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููููุง ุฑุจุท ุญุฏุซ ุงูุฒุฑ ูุจุงุดุฑุฉ ุจูุงุฆูุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุฑูุทุฉ ุงูุฌุฏูุฏุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุฃููุง ุณุงุจูุฉ ุงูุฅุนุฏุงุฏ ูุบูุฑ ููุฌูุฏุฉ ูู ุงููุดูุฏ ุจุนุฏ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุนูุตุฑ ุงููุงุฆูุฉ ุฅูู ุงุฑุชุจุงุท ุจุงููุงุฆูุฉ ุจุญูุซ ููููู ุงุณุชุฏุนุงุก ุฃุณููุจ ุนูุฏ ุงูููุฑ ูููู </font></font><code>SelectItem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุง ูุญุชุงุฌ ุฅูู ุชุชุจุน ุงุณู ุงูุจุทุงูุฉ ุงูุชู ููุซููุง ุ ูุชุนููู ูุตู. </font><font style="vertical-align: inherit;">ูููู ุจุฅูุดุงุก ูููู ุตุบูุฑ ููุฐุง </font></font><code>SaveLoadItem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SaveLoadItem</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SaveLoadMenu menu; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> MapName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mapName; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { mapName = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; transform.GetChild(<span class="hljs-number"><span class="hljs-number">0</span></span>).GetComponent&lt;Text&gt;().text = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> mapName; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Select</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { menu.SelectItem(mapName); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ูููููุง ุฅูู ุนูุตุฑ ุงููุงุฆูุฉ ูุงุฌุนู ุงูุฒุฑ ูุณุชุฏุนู ุทุฑููุชู </font></font><code>Select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/249/172/7a0/2491727a0c07b0b92e89db0e3c02fe67.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงูุนูุตุฑ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุฆูุฉ ุงูุชุนุจุฆุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุก ุงููุงุฆูุฉ ุ </font></font><code>SaveLoadMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุญุชุงุฌ ุฅูู ุงุฑุชุจุงุท ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุชูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฏุงุฎู ุฅุทุงุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนุฑุถ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆูุฉ ุงููููุงุช</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููุง ูุญุชุงุฌ ุฃูุถูุง ุฅูู ุฑุงุจุท ุฅูู ุงูุนูุตุฑ ุงูุฌุงูุฒ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> RectTransform listContent; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SaveLoadItem itemPrefab;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4b6/22a/0eb/4b622a0eb5cf47422ce591dcd5c120e8.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฒุฌ ูุญุชููุงุช ุงููุงุฆูุฉ ูุงูุชุฌููุฒ ุงููุณุจู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุทุฑููุฉ ุฌุฏูุฏุฉ ูููุก ูุฐู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุฃููู ูู ุชุญุฏูุฏ ูููุงุช ุงูุฎุฑุงุฆุท ุงูููุฌูุฏุฉ. </font><font style="vertical-align: inherit;">ููุญุตูู ุนูู ูุตูููุฉ ูู ุฌููุน ูุณุงุฑุงุช ุงููููุงุช ุฏุงุฎู ุงูุฏููู ุ ูููููุง ุงุณุชุฎุฏุงู ุงูุทุฑููุฉ </font></font><code>Directory.GetFiles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุญุชูู ูุฐู ุงูุทุฑููุฉ ุนูู ูุนููุฉ ุซุงููุฉ ุชุณูุญ ูู ุจุชุตููุฉ ุงููููุงุช. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ููุท ุงููููุงุช ุงููุทุงุจูุฉ ูููุงุน </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* .map</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุทููุจุฉ </font><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FillList</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[] paths = Directory.GetFiles(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"*.map"</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฃุณู ุ ูุง ูุชู ุถูุงู ุชุฑุชูุจ ุงูููู. </font><font style="vertical-align: inherit;">ูุนุฑุถูุง ุจุงูุชุฑุชูุจ ุงูุฃุจุฌุฏู ุ ูุญุชุงุฌ ุฅูู ูุฑุฒ ุงูุตููู ุจุงุณุชุฎุฏุงู </font></font><code>System.Array.Sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.UI; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.IO; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SaveLoadMenu</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FillList</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[] paths = Directory.GetFiles(Application.persistentDataPath, <span class="hljs-string"><span class="hljs-string">"*.map"</span></span>); Array.Sort(paths); } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุณููุดุฆ ูุซููุงุช ูุณุจูุฉ ุงูุตูุน ููู ุนูุตุฑ ูู ุนูุงุตุฑ ุงููุตูููุฉ. </font><font style="vertical-align: inherit;">ูู ุจุฑุจุท ุงูุนูุตุฑ ุจุงููุงุฆูุฉ ุ ููู ุจุชุนููู ุงุณู ุงูุฎุฑูุทุฉ ุงูุฎุงุตุฉ ุจู ูุฌุนูู ุชุงุจุนูุง ููุญุชููุงุช ุงููุงุฆูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Array.Sort(paths); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; paths.Length; i++) { SaveLoadItem item = Instantiate(itemPrefab); item.menu = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; item.MapName = paths[i]; item.transform.SetParent(listContent, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู </font></font><code>Directory.GetFiles</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูุฏ ุงููุณุงุฑุงุช ุงููุงููุฉ ูููููุงุช ุ ูุญุชุงุฌ ุฅูู ูุณุญูุง. </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ูุฐุง ูู ุจุงูุถุจุท ูุง ูุฌุนู ุงูุทุฑููุฉ ุงูููุงุณุจุฉ </font></font><code>Path.GetFileNameWithoutExtension</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> item.MapName = Path.GetFileNameWithoutExtension(paths[i]);</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุนุฑุถ ุงููุงุฆูุฉ ุ ูุญุชุงุฌ ุฅูู ููุก ูุงุฆูุฉ. </font><font style="vertical-align: inherit;">ููุธุฑูุง ูุฃู ุงููููุงุช ูู ุงููุญุชูู ุฃู ุชุชุบูุฑ ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุฐูู ูู ูู ูุฑุฉ ููุชุญ ูููุง ุงููุงุฆูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Open</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> saveMode</span></span></span><span class="hljs-function">)</span></span> { โฆ FillList(); gameObject.SetActive(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); HexMapCamera.Locked = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูุฏ ุฅุนุงุฏุฉ ููุก ุงููุงุฆูุฉ ุ ูุญุชุงุฌ ุฅูู ุญุฐู ุฌููุน ุงูุนูุงุตุฑ ุงููุฏููุฉ ูุจู ุฅุถุงูุฉ ุนูุงุตุฑ ุฌุฏูุฏุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FillList</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; listContent.childCount; i++) { Destroy(listContent.GetChild(i).gameObject); } โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c83/4ff/fc3/c834fffc34b03b0d39de0056796fa199.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุงุตุฑ ุจุฏูู ุชุฑุชูุจ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฑุชูุจ ุงูููุงุท </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชุนุฑุถ ุงููุงุฆูุฉ ุงูุขู ุงูุนูุงุตุฑ ุ ูููููุง ุณุชุชุฏุงุฎู ูุณุชููู ูู ูุถุน ุณูุฆ. ูุชุญููููู ุฅูู ูุงุฆูุฉ ุนููุฏูุฉ ุ ุฃุถู </font><font style="vertical-align: inherit;">ูููู </font><em><font style="vertical-align: inherit;">ูุฌููุนุฉ ุงูุชุฎุทูุท ุงูุนููุฏู</font></em><font style="vertical-align: inherit;"> ( </font><em><font style="vertical-align: inherit;">ูููู / ุชุฎุทูุท / ูุฌููุนุฉ ุชุฎุทูุท ุนููุฏู</font></em><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">ุฅูู ูุงุฆู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุชูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงููุงุฆูุฉ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฅูู ุชุฑุชูุจ ููุนูู ุจุดูู ุตุญูุญุ ุชุดุบูู </font><em><font style="vertical-align: inherit;">ุงูุนุฑุถ</font></em><font style="vertical-align: inherit;"> ูู ููู ูู </font><em><font style="vertical-align: inherit;">ุงูุทูู ุงูุชุญูู ูู ุญุฌู</font></em><font style="vertical-align: inherit;"> ู </font><em><font style="vertical-align: inherit;">ุงูุทูู ุชูุณูุน ุงูููุฉ</font></em><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุฌุจ ุชุนุทูู </font><font style="vertical-align: inherit;">ุฎูุงุฑู </font><em><font style="vertical-align: inherit;">ุงูุงุฑุชูุงุน</font></em><font style="vertical-align: inherit;"> .</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/392/32e/aac/39232eaac1c1741718d8993aae992bb4.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7dd/aba/ce4/7ddabace4df7d61a274544889de9a3c2.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุฌููุนุฉ ุงูุชุฎุทูุท ุงูุฑุฃุณู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุญุตููุง ุนูู ูุงุฆูุฉ ุฌูููุฉ ูู ุงูุนูุงุตุฑ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุง ูุชู ุถุจุท ุญุฌู ูุญุชููุงุช ุงููุงุฆูุฉ ุนูู ุงูุนุฏุฏ ุงูุญูููู ููุนูุงุตุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุง ูุชุบูุฑ ุญุฌู ุดุฑูุท ุงูุชูุฑูุฑ ุฃุจุฏูุง. </font><font style="vertical-align: inherit;">ูููููุง ุฅุฌุจุงุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุชูู ุนูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุบููุฑ ุงูุญุฌู ุชููุงุฆููุง ุนู ุทุฑูู ุฅุถุงูุฉ ูููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฌู ุงููุญุชูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู / ุชุฎุทูุท / ูุฌุฑุจ ุญุฌู ุงููุญุชูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) ุฅููู. </font><font style="vertical-align: inherit;">ูุฌุจ ุถุจุท </font><font style="vertical-align: inherit;">ูุถุน </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุกูุฉ ุงูุนููุฏู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฌู ุงูููุถู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/34e/c56/fdb/34ec56fdb61e1d3a2bc71989333a7a8a.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/acb/a17/bf1/acba17bf1387ddb89b00ea48c9e31035.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุฌุฑุจ ุญุฌู ุงููุญุชูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุน ุนุฏุฏ ูููู ูู ุงูููุงุท ุ ุณูุฎุชูู ุดุฑูุท ุงูุชูุฑูุฑ. </font><font style="vertical-align: inherit;">ูุนูุฏูุง ูููู ููุงู ุนุฏุฏ ูุจูุฑ ุฌุฏูุง ูู ุงูุนูุงุตุฑ ูู ุงููุงุฆูุฉ ุงูุชู ูุง ุชุชูุงุณุจ ูุน ุฅุทุงุฑ ุงูุนุฑุถ ุ ูุธูุฑ ุดุฑูุท ุงูุชูุฑูุฑ ููู ุญุฌู ููุงุณุจ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/327/460/6d8/3274606d8e5831f783d282d5122e55cc.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธูุฑ ุดุฑูุท ุงูุชูุฑูุฑ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญุฐู ุงูุจุทุงูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุงูุนูู ุจุณูููุฉ ูุน ุงูุนุฏูุฏ ูู ูููุงุช ุงูุฎุฑุงุฆุท. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูู ุจุนุถ ุงูุฃุญูุงู ูููู ูู ุงูุถุฑูุฑู ุงูุชุฎูุต ูู ุจุนุถ ุงูุจุทุงูุงุช. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ููููู ุงุณุชุฎุฏุงู ุงูุฒุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฐู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุฏุนูุง ููุดุฆ ุทุฑููุฉ ูุฐูู ููุฌุนู ุงูุฒุฑ ูุทูู ุนููู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ููุงู ูุณุงุฑ ูุญุฏุฏ ุ ูุงุญุฐูู ุจุจุณุงุทุฉ ุจุงุณุชุฎุฏุงู </font></font><code>File.Delete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Delete</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = GetSelectedPath(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (path == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } File.Delete(path); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูุฌุจ ุฃู ูุชุญูู ุฃูุถูุง ูู ุฃููุง ูุนูู ูุน ููู ููุฌูุฏ ุจุงููุนู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููุง ููุจุบู ููุง ูุญุงููุฉ ุฅุฒุงูุชู ุ ูููู ูุฐุง ูุง ูุคุฏู ุฅูู ุญุฏูุซ ุฎุทุฃ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (File.Exists(path)) { File.Delete(path); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฅุฒุงูุฉ ุงูุจุทุงูุฉ ุ ูุง ูุญุชุงุฌ ุฅูู ุฅุบูุงู ุงููุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ูุฌุนู ูู ุงูุณูู ุญุฐู ูููุงุช ูุชุนุฏุฏุฉ ูู ููุช ูุงุญุฏ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุจุนุฏ ุงูุฅุฒุงูุฉ ุ ูุญุชุงุฌ ุฅูู ูุณุญ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฏุฎุงู ุงูุงุณู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ููุฐูู ุชุญุฏูุซ ูุงุฆูุฉ ุงููููุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (File.Exists(path)) { File.Delete(path); } nameInput.text = <span class="hljs-string"><span class="hljs-string">""</span></span>; FillList();</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 14: ููุงุฏ ุงูุฅุบุงุซุฉ </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุฎุฏู ุฃููุงู ุงูุฐุฑูุฉ ูุฅูุดุงุก ุฎุฑูุทุฉ ูุชูุทุนุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ุฃุตู ูุณูุฌ ุงููุตูููุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุถุงูุฉ ูุคุดุฑุงุช ุงูุงุฑุชูุงุน ููุดุจูุงุช. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุญููุงุช ุจูู ููุงุฏ ุงูุฅุบุงุซุฉ. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ูุฐู ุงููุญุธุฉ ุ ุงุณุชุฎุฏููุง ุงูุฃููุงู ุงูุตูุจุฉ ูุจุทุงูุงุช ุงูุชูููู. </font><font style="vertical-align: inherit;">ุงูุขู ุณูููู ุจุชุทุจูู ุงููููุณ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4da/9e8/4fa/4da9e84faf824fdcf3933310de58ff9c.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุณู ุงูููุงู.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฒูุฌ ูู ุซูุงุซุฉ ุฃููุงุน </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ุงูุฃููุงู ุงูููุญุฏุฉ ูููู ุชูููุฒูุง ุจูุถูุญ ูุชุชูุงูู ุชูุงููุง ูุน ุงููููุฉ ุ ุฅูุง ุฃููุง ูุง ุชุจุฏู ูุซูุฑุฉ ููุงูุชูุงู ููุบุงูุฉ. </font><font style="vertical-align: inherit;">ุณูุฒูุฏ ุงุณุชุฎุฏุงู ุงูููุงู ุจุดูู ูุจูุฑ ูู ุฌุงุฐุจูุฉ ุงูุฎุฑุงุฆุท. </font><font style="vertical-align: inherit;">ุจุงูุทุจุน ุ ููุฐุง ูุฌุจ ุนูููุง ูุฒุฌ ุงูููุงู ุ ูููุณ ููุท ุงูุฃููุงู. </font><font style="vertical-align: inherit;">ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendering 3 ุ ุถู ุงูููุงู ุ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฏุซุช ุนู ููููุฉ ูุฒุฌ ููุงุฏ ูุชุนุฏุฏุฉ ุจุงุณุชุฎุฏุงู ุฎุฑูุทุฉ ุงูุชูุณูู. </font><font style="vertical-align: inherit;">ูู ุฎุฑุงุฆุทูุง ุงูุณุฏุงุณูุฉ ุ ููููู ุงุณุชุฎุฏุงู ููุฌ ููุงุซู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูุฏูู 3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฎูุท ุฃุฑุจุนุฉ ููุงุฏ ููุท ุ ููููููุง ุฏุนู ูุง ูุตู ุฅูู ุฎูุณุฉ ููุงุฏ ุจุงุณุชุฎุฏุงู ุฎุฑูุทุฉ ูุงุญุฏุฉ. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ูุณุชุฎุฏู ุฎูุณุฉ ุฃููุงู ูุฎุชููุฉ ุ ูุฐุง ููู ููุงุณุจุฉ ุชูุงููุง ููุง. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูููููุง ูุงุญููุง ุฅุถุงูุฉ ุฃููุงุน ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ููุงู ุญุงุฌุฉ ูุฏุนู ุนุฏุฏ ุนุดูุงุฆู ูู ุฃููุงุน ุงูุฅุบุงุซุฉ. </font><font style="vertical-align: inherit;">ุนูุฏ ุงุณุชุฎุฏุงู ุฎุตุงุฆุต ุงููุณูุฌ ุงููุญุฏุฏุฉ ุจุดูู ุตุฑูุญ ุ ูุฐุง ุบูุฑ ูููู ุ ูุฐูู ูุฌุจ ุนููู ุงุณุชุฎุฏุงู ูุฌููุนุฉ ูู ุงูุฃูุณุฌุฉ. </font><font style="vertical-align: inherit;">ูู ููุช ูุงุญู ุณูููู ุจุฅูุดุงุฆู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงุณุชุฎุฏุงู ูุตูููุงุช ุงููุณูุฌ ุ ูุญุชุงุฌ ุจุทุฑููุฉ ูุง ุฅูู ุฅุฎุจุงุฑ ุงูุชุธููู ุนู ุงูุฃูุณุฌุฉ ุงูุชู ูุฌุจ ูุฒุฌูุง. </font><font style="vertical-align: inherit;">ุงูุฎูุท ุงูุฃุตุนุจ ุถุฑูุฑู ูููุซูุซุงุช ุงูุฒุงููุฉ ุ ูุงูุชู ูููู ุฃู ุชููู ุจูู ุซูุงุซ ุฎูุงูุง ุจููุน ุฎุงุต ูู ุงูุชุถุงุฑูุณ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุฎูุท ุงูุฏุนู ุจูู ุงูุฃููุงุน ุงูุซูุงุซุฉ ููู ูุซูุซ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุฎุฏุงู ุฃููุงู ุงูุฐุฑูุฉ ูุฎุฑุงุฆุท Splat </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุชุฑุงุถ ุฃูู ูููููุง ุฅุฎุจุงุฑู ุจุงูุฃูุณุฌุฉ ุงููุฑุงุฏ ูุฒุฌูุง ุ ูููููุง ุงุณุชุฎุฏุงู ุฃููุงู ุงูุฐุฑูุฉ ูุฅูุดุงุก ุฎุฑูุทุฉ ูุชูุทุนุฉ ููู ูุซูุซ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู ูู ูู ุญุงูุฉ ูุชู ุงุณุชุฎุฏุงู ุซูุงุซุฉ ููุงุฏ ูุญุฏ ุฃูุตู ุ ูุญุชุงุฌ ุฅูู ุซูุงุซ ูููุงุช ุฃููุงู ููุท. </font><font style="vertical-align: inherit;">ููุซู ุงูููู ุงูุฃุญูุฑ ุงููุณูุฌ ุงูุฃูู ูุงูุฃุฎุถุฑ - ุงูุซุงูู ูุงูุฃุฒุฑู - ุงูุซุงูุซ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/cf1/3fb/603/cf13fb603f1d7ab8e83d9290b483b9ee.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุฑูุทุฉ ุงููุซูุซ ุชูุจูู.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฌููุน ุฎุฑูุทุฉ ุฏุงุฆุฑุฉ ุงููุซูุซ ูุณุงูู ุฏุงุฆููุง ูุงุญุฏุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุนู         .     . ,        (1, 0, 0)  ,  (ยฝ, ยฝ, 0)     (&amp;frac13;, &amp;frac13;, &amp;frac13;)  . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงููุซูุซ ูุญุชุงุฌ ุฅูู ูุณูุฌ ูุงุญุฏ ููุท ุ ูุฅููุง ูุณุชุฎุฏู ุงูููุงุฉ ุงูุฃููู ููุท. </font><font style="vertical-align: inherit;">ุฃู ุฃู ูููู ุณูููู ุฃุญูุฑ ุจุงููุงูู. </font><font style="vertical-align: inherit;">ูู ุญุงูุฉ ุงูุฎูุท ุจูู ููุนูู ูุฎุชูููู ุ ูุณุชุฎุฏู ุงูููุงุชูู ุงูุฃููู ูุงูุซุงููุฉ. </font><font style="vertical-align: inherit;">ุฃู ุฃู ููู ุงููุซูุซ ุณูููู ูุฒูุฌูุง ูู ุงูุฃุญูุฑ ูุงูุฃุฎุถุฑ. </font><font style="vertical-align: inherit;">ูุนูุฏูุง ูุชู ุงูุนุซูุฑ ุนูู ุงูุฃููุงุน ุงูุซูุงุซุฉ ุ ุณูููู ูุฒูุฌูุง ูู ุงูุฃุญูุฑ ูุงูุฃุฎุถุฑ ูุงูุฃุฒุฑู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/aa3/364/890/aa33648906f62a94be8a45aba4bd80de.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซูุงุซุฉ ุชููููุงุช ุฎุฑูุทุฉ ุชูุจูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูู ูุณุชุฎุฏู ุชููููุงุช ุฎุฑุงุฆุท ุงูุฏูุงุฆุฑ ุงูููุทูุฉ ูุฐู ุจุบุถ ุงููุธุฑ ุนู ุงููุฒูุฌ ุงููุนูู ุงูููุฒูุฌ. </font><font style="vertical-align: inherit;">ููุฐุง ูุนูู ุฃู ุฎุฑูุทุฉ ุงูุฏุงุฆุฑุฉ ุณุชููู ุฏุงุฆููุง ูู ููุณูุง. </font><font style="vertical-align: inherit;">ุงูููุงู ููุท ุณูุชุบูุฑ. </font><font style="vertical-align: inherit;">ููู ููุนู ุฐูู ุ ุณููุชุดู ูุงุญููุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุงูุชุบููุฑ </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ููุดุฆ ุฎุฑุงุฆุท ุงูุฏูุงุฆุฑ ูุฐู ุ ุจุฏูุงู ูู ุงุณุชุฎุฏุงู ุฃููุงู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ุบุงูุจูุง ูุง ูุณุชุฎุฏู ุซูุงุซุฉ ุฃููุงู ุ ูุณููุดุฆ ููู ุญููููุง ุซุงุจุชุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Color color1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color(<span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Color color2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Color color3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Color(<span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">0f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>);</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑุงูุฒ ุงูุฎูุงูุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุงุณุชุจุฏุงู ููู ูุฑูุฒ ุงูุฎูุงูุง ุงูุชุฑุงุถููุง. </font><font style="vertical-align: inherit;">ูุง ูุชู ุงููุฒุฌ ููุง ุ ูุฐูู ูุณุชุฎุฏู ุงูููู ุงูุฃูู ููุท ุ ุฃู ุงูุฃุญูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithoutRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { TriangulateEdgeFan(center, e, color1); โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3e9/44b/f10/3e944bf109bb387ab6a620ea680c2772.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงูุฒ ุงูุญูุฑุงุก ููุฎูุงูุง. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชุญูู ูุฑุงูุฒ ุงูุฎูุงูุง ุงูุขู ุฅูู ุงูููู ุงูุฃุญูุฑ. </font><font style="vertical-align: inherit;">ุฌููุนูู ูุณุชุฎุฏููู ุงูููุงู ุงูุฃูู ุ ุจุบุถ ุงููุธุฑ ุนู ุงููููุณ. </font><font style="vertical-align: inherit;">ุฎุฑุงุฆุทูู ุงููุชูุงุฑุจุฉ ูู ููุณูุง ุ ุจุบุถ ุงููุธุฑ ุนู ุงูููู ุงูุฐู ููููู ุงูุฎูุงูุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญู ุงูููุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง ุจุชุบููุฑ ุงูุฃุฌุฒุงุก ุฏุงุฎู ุงูุฎูุงูุง ููุท ุฏูู ุฃู ุชุชุฏูู ุงูุฃููุงุฑ ุนูู ุทูููุง. </font><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุฃู ููุนู ุงูุดูุก ููุณู ุจุงููุณุจุฉ ููุฃุฌุฒุงุก ุงููุฌุงูุฑุฉ ููุฃููุงุฑ. </font><font style="vertical-align: inherit;">ูู ุญุงูุชูุง ุ ูุฐุง ุดุฑูุท ุถูุน ููุฑูุญุฉ ููุซูุซุงุช ุงูุถูุน. </font><font style="vertical-align: inherit;">ููุง ุ ุฃูุถูุง ุ ุงูุฃุญูุฑ ููุท ูุงูู ุจุงููุณุจุฉ ููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateAdjacentToRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { โฆ TriangulateEdgeStrip(m, color1, e, color1); TriangulateEdgeFan(center, m, color1); โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b7c/846/a8a/b7c846a8a2a4b5a2670b77359d55f9f6.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงุทุน ุงูุญูุฑุงุก ุงููุฌุงูุฑุฉ ููุฃููุงุฑ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฃููุงุฑ </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ุจููุฏุณุฉ ุงูุฃููุงุฑ ุฏุงุฎู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูููู ูุฌุจ ุฃู ูุชุญูููุง ุฅูู ุงูููู ุงูุฃุญูุฑ. </font><font style="vertical-align: inherit;">ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุฏุนูุง ูููู ูุธุฑุฉ ุนูู ุจุฏุงูุฉ ุงูุฃููุงุฑ ูููุงูุชูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithRiverBeginOrEnd</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { โฆ TriangulateEdgeStrip(m, color1, e, color1); TriangulateEdgeFan(center, m, color1); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ุงูููุฏุณุฉ ุงูุชู ุชุชููู ูููุง ุงูุถูุงู ููุงุน ุงูููุฑ. </font><font style="vertical-align: inherit;">ููุฏ ููุช ุจุชุฌููุน ุงุณุชุฏุนุงุกุงุช ุทุฑููุฉ ุงูุฃููุงู ูุชุณููู ูุฑุงุกุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { โฆ TriangulateEdgeStrip(m, color1, e, color1); terrain.AddTriangle(centerL, m.v1, m.v2); <span class="hljs-comment"><span class="hljs-comment">// terrain.AddTriangleColor(cell.Color); terrain.AddQuad(centerL, center, m.v2, m.v3); // terrain.AddQuadColor(cell.Color); terrain.AddQuad(center, centerR, m.v3, m.v4); // terrain.AddQuadColor(cell.Color); terrain.AddTriangle(centerR, m.v4, m.v5); // terrain.AddTriangleColor(cell.Color); terrain.AddTriangleColor(color1); terrain.AddQuadColor(color1); terrain.AddQuadColor(color1); terrain.AddTriangleColor(color1); โฆ }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/da8/46a/455/da846a455aa262ddff54429faa207267.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃููุงุฑ ุงูุญูุฑุงุก ุนูู ุทูู ุงูุฎูุงูุง.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฃุถูุงุน </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฎุชูู ุฌููุน ุงูุญูุงู ูุฃููุง ุจูู ุงูุฎูุงูุง ุงูุชู ูููู ุฃู ุชุญุชูู ุนูู ุฃููุงุน ูุฎุชููุฉ ูู ุงูุชุถุงุฑูุณ. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุงูููู ุงูุฃูู ูููุน ุงูุฎููุฉ ุงูุญุงูู ุ ูุงูููู ุงูุซุงูู ูููุน ุงูุฌูุงุฑ. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุณุชุตุจุญ ุฎุฑูุทุฉ ุงูุชูุณูู ูุชุฏุฑุฌุฉ ุญูุฑุงุก ูุฎุถุฑุงุก ุ ุญุชู ูู ูุงูุช ููุชุง ุงูุฎููุชูู ูู ููุณ ุงูููุน. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ููุชุง ุงูุฎููุชูู ุชุณุชุฎุฏูุงู ููุณ ุงููุณูุฌ ุ ูุณุชุตุจุญ ูุฌุฑุฏ ุฎููุท ูู ููุณ ุงููุณูุฌ ุนูู ููุง ุงูุฌุงูุจูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateConnection</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, EdgeVertices e1 </span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.GetEdgeType(direction) == HexEdgeType.Slope) { TriangulateEdgeTerraces(e1, cell, e2, neighbor, hasRoad); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { TriangulateEdgeStrip(e1, color1, e2, color2, hasRoad); } โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/368/42b/88c/36842b88cd626359ef4adfd4c3b99b13.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถููุน ุญูุฑุงุก ูุฎุถุฑุงุก ุจุงุณุชุซูุงุก ุงูุญูุงู.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูู ุงูุงูุชูุงู ุงูุญุงุฏ ุจูู ุงูุฃุญูุฑ ูุงูุฃุฎุถุฑ ูุณุจุจ ูุดุงููุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">   ,         ,      .        .     splat map,         .            . <br><br>  ,           . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูุงู ุฐุงุช ุงูุญูุงู ุฃูุซุฑ ุชุนููุฏูุง ุจุนุถ ุงูุดูุก ุ ูุฃููุง ุชุญุชูู ุนูู ุฑุคูุณ ุฅุถุงููุฉ. </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ูุนูู ุฑูุฒ ุงูุงุณุชููุงุก ุงูุญุงูู ุจุดูู ุฑุงุฆุน ูุน ุฃููุงู ุงูุฎุฑูุทุฉ ุงูููุณูุฉ. </font><font style="vertical-align: inherit;">ูุง ุนููู ุณูู ุงุณุชุฎุฏุงู ุงูููููู ุงูุฃูู ูุงูุซุงูู ุ ูููุณ ุฃููุงู ุฎูุงูุง ุงูุจุฏุงูุฉ ูุงูููุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeTerraces</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices begin, HexCell beginCell, EdgeVertices end, HexCell endCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasRoad </span></span></span><span class="hljs-function">)</span></span> { EdgeVertices e2 = EdgeVertices.TerraceLerp(begin, end, <span class="hljs-number"><span class="hljs-number">1</span></span>); Color c2 = HexMetrics.TerraceLerp(color1, color2, <span class="hljs-number"><span class="hljs-number">1</span></span>); TriangulateEdgeStrip(begin, color1, e2, c2, hasRoad); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { EdgeVertices e1 = e2; Color c1 = c2; e2 = EdgeVertices.TerraceLerp(begin, end, i); c2 = HexMetrics.TerraceLerp(color1, color2, i); TriangulateEdgeStrip(e1, c1, e2, c2, hasRoad); } TriangulateEdgeStrip(e2, c2, end, color2, hasRoad); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/450/635/fe1/450635fe13e41a888046f2f7e0cce830.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุงู ุฃุถูุงุน ุญูุฑุงุก ุญูุฑุงุก.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฒูุงูุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฒูุงูุง ุงูุฎููุฉ ูู ุงูุฃูุซุฑ ุตุนูุจุฉ ูุฃููุง ูุฌุจ ุฃู ุชุฎูุท ุซูุงุซ ููุงุฏ ูุฎุชููุฉ. </font><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุงูููู ุงูุฃุญูุฑ ููููุฉ ุงูุณูููุฉ ูุงูุฃุฎุถุฑ ุฅูู ุงููุณุงุฑ ูุงูุฃุฒุฑู ุฅูู ุงููููู. </font><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุฒูุงูุง ูุซูุซ ูุงุญุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateCorner</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 bottom, HexCell bottomCell, Vector3 left, HexCell leftCell, Vector3 right, HexCell rightCell </span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { terrain.AddTriangle(bottom, left, right); terrain.AddTriangleColor(color1, color2, color3); } features.AddWall(bottom, bottomCell, left, leftCell, right, rightCell); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/10a/d9c/218/10ad9c21858e48e059c92bbed08c779f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฒูุงูุง ุญูุฑุงุก ูุฎุถุฑุงุก ูุฒุฑูุงุก ุจุงุณุชุซูุงุก ุงูุญูุงู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ููุง ูุฑุฉ ุฃุฎุฑู ุงุณุชุฎุฏุงู ุฑูุฒ ุงุณุชููุงุก ุงูููู ุงูุญุงูู ููุฃุฑูุงู ุฐุงุช ุงูุญูุงู. </font><font style="vertical-align: inherit;">ููุท ูุชู ุงูุงุณุชููุงุก ุจูู ุซูุงุซุฉ ุฃููุงู ุ ูููุณ ููููู. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ุถุน ูู ุงุนุชุจุงุฑู ุงูุญูุงู ุบูุฑ ุงููุฑูุจุฉ ูู ุงูููุญุฏุฑุงุช.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateCornerTerraces</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, HexCell beginCell, Vector3 left, HexCell leftCell, Vector3 right, HexCell rightCell </span></span></span><span class="hljs-function">)</span></span> { Vector3 v3 = HexMetrics.TerraceLerp(begin, left, <span class="hljs-number"><span class="hljs-number">1</span></span>); Vector3 v4 = HexMetrics.TerraceLerp(begin, right, <span class="hljs-number"><span class="hljs-number">1</span></span>); Color c3 = HexMetrics.TerraceLerp(color1, color2, <span class="hljs-number"><span class="hljs-number">1</span></span>); Color c4 = HexMetrics.TerraceLerp(color1, color3, <span class="hljs-number"><span class="hljs-number">1</span></span>); terrain.AddTriangle(begin, v3, v4); terrain.AddTriangleColor(color1, c3, c4); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { Vector3 v1 = v3; Vector3 v2 = v4; Color c1 = c3; Color c2 = c4; v3 = HexMetrics.TerraceLerp(begin, left, i); v4 = HexMetrics.TerraceLerp(begin, right, i); c3 = HexMetrics.TerraceLerp(color1, color2, i); c4 = HexMetrics.TerraceLerp(color1, color3, i); terrain.AddQuad(v1, v2, v3, v4); terrain.AddQuadColor(c1, c2, c3, c4); } terrain.AddQuad(v3, v4, left, right); terrain.AddQuadColor(c3, c4, color2, color3); }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/504/d1d/6b3/504d1d6b3997b321e0a6e7bf5aa253f2.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญูุงู ุงูุฒุงููุฉ ุงูุญูุฑุงุก ูุงูุฎุถุฑุงุก ูุงูุฒุฑูุงุก ุ ุจุงุณุชุซูุงุก ุงูุญูุงู ุนูู ุทูู ุงูููุญุฏุฑุงุช. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุชุนูู ุงูุฃูุฑ ุจุงูููุญุฏุฑุงุช ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุทุฑููุฉ </font></font><code>TriangulateBoundaryTriangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชููุช ูุฐู ุงูุทุฑููุฉ ุฎูุงูุง ุงูุจุฏุงูุฉ ูุงููุบุงุฏุฑุฉ ููุนููุงุช. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุญุชุงุฌ ุงูุขู ุฅูู ุฃููุงู ุงูุฃููุงู ุงูููุงุณุจุฉ ุ ูุงูุชู ูุฏ ุชุฎุชูู ููููุง ููุทูุจูููุฌูุง. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุณุชุจุฏู ูุฐู ุงููุนููุงุช ุจุฃููุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateBoundaryTriangle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, Color beginColor, Vector3 left, Color leftColor, Vector3 boundary, Color boundaryColor </span></span></span><span class="hljs-function">)</span></span> { Vector3 v2 = HexMetrics.Perturb(HexMetrics.TerraceLerp(begin, left, <span class="hljs-number"><span class="hljs-number">1</span></span>)); Color c2 = HexMetrics.TerraceLerp(beginColor, leftColor, <span class="hljs-number"><span class="hljs-number">1</span></span>); terrain.AddTriangleUnperturbed(HexMetrics.Perturb(begin), v2, boundary); terrain.AddTriangleColor(beginColor, c2, boundaryColor); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { Vector3 v1 = v2; Color c1 = c2; v2 = HexMetrics.Perturb(HexMetrics.TerraceLerp(begin, left, i)); c2 = HexMetrics.TerraceLerp(beginColor, leftColor, i); terrain.AddTriangleUnperturbed(v1, v2, boundary); terrain.AddTriangleColor(c1, c2, boundaryColor); } terrain.AddTriangleUnperturbed(v2, HexMetrics.Perturb(left), boundary); terrain.AddTriangleColor(c2, leftColor, boundaryColor); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุจุชุบููุฑู </font></font><code>TriangulateCornerTerracesCliff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญูุซ ูุณุชุฎุฏู ุงูุฃููุงู ุงูุตุญูุญุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateCornerTerracesCliff</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, HexCell beginCell, Vector3 left, HexCell leftCell, Vector3 right, HexCell rightCell </span></span></span><span class="hljs-function">)</span></span> { โฆ Color boundaryColor = Color.Lerp(color1, color3, b); TriangulateBoundaryTriangle( begin, color1, left, color2, boundary, boundaryColor ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (leftCell.GetEdgeType(rightCell) == HexEdgeType.Slope) { TriangulateBoundaryTriangle( left, color2, right, color3, boundary, boundaryColor ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { terrain.AddTriangleUnperturbed( HexMetrics.Perturb(left), HexMetrics.Perturb(right), boundary ); terrain.AddTriangleColor(color2, color3, boundaryColor); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุนู ููุณ ุงูุดูุก ูู ุฃุฌู </font></font><code>TriangulateCornerCliffTerraces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateCornerCliffTerraces</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, HexCell beginCell, Vector3 left, HexCell leftCell, Vector3 right, HexCell rightCell </span></span></span><span class="hljs-function">)</span></span> { โฆ Color boundaryColor = Color.Lerp(color1, color2, b); TriangulateBoundaryTriangle( right, color3, begin, color1, boundary, boundaryColor ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (leftCell.GetEdgeType(rightCell) == HexEdgeType.Slope) { TriangulateBoundaryTriangle( left, color2, right, color3, boundary, boundaryColor ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { terrain.AddTriangleUnperturbed( HexMetrics.Perturb(left), HexMetrics.Perturb(right), boundary ); terrain.AddTriangleColor(color2, color3, boundaryColor); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f89/7e0/e40/f897e0e408335e1e7b198ced5e1dc8ad.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎุฑูุทุฉ ุฅุบุงุซุฉ ูุงููุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุตูุงุฆู ุงููููุณ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญุช ุงูุชุถุงุฑูุณ ูุฏููุง ุฎุฑูุทุฉ ูุชูุทุนุฉ ุ ูููููุง ุชูุฑูุฑ ูุฌููุนุฉ ุงููููุณ ุฅูู ุงูุชุธููู. </font><font style="vertical-align: inherit;">ูุง ูููููุง ููุท ุชุนููู ุฌูุงุฒ ุชุธููู ูุตููู ูู ููุงุฏ C # ุ ูุฃู ุงูุตููู ูุฌุจ ุฃู ูููู ููุฌูุฏูุง ูู ุฐุงูุฑุฉ GPU ูููุงู ูุงุญุฏ. </font><font style="vertical-align: inherit;">ุณูุชุนูู ุนูููุง ุงุณุชุฎุฏุงู ูุงุฆู ุฎุงุต </font></font><code>Texture2DArray</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชู ุฏุนูู ูู Unity ููุฐ ุงูุฅุตุฏุงุฑ 5.4.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุฏุนู ุฌููุน GPUs ุงููุตูููุงุช ุงููุณูุฌูุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  GPU  ,         .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> Unity</a> . <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> Direct3D 11/12 (Windows, Xbox One) </li><li style=";text-align:right;direction:rtl"> OpenGL Core (Mac OS X, Linux) </li><li style=";text-align:right;direction:rtl"> Metal (iOS, Mac OS X) </li><li style=";text-align:right;direction:rtl"> OpenGL ES 3.0 (Android, iOS, WebGL 2.0) </li><li style=";text-align:right;direction:rtl"> PlayStation 4 </li></ul></div></div><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุณูุฏ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ูุฅู ุฏุนู Unity ููุตูููุงุช ุงููููุณ ูู ุงูุฅุตุฏุงุฑ 5.5 ูู ุงูุญุฏ ุงูุฃุฏูู. </font><font style="vertical-align: inherit;">ูุง ูููููุง ููุท ุฅูุดุงุก ุฃุตู ุตููู ูุณูุฌ ูุชุนููู ููุงุฏ ูู. </font><font style="vertical-align: inherit;">ุนูููุง ุงูููุงู ุจุฐูู ูุฏูููุง. </font><font style="vertical-align: inherit;">ูููููุง ุฅูุง ุฅูุดุงุก ูุฌููุนุฉ ูู ุงูููุงู ูู ูุถุน ุงูุชุดุบูู ุ ุฃู ุฅูุดุงุก ุฃุตู ูู ุงููุญุฑุฑ. </font><font style="vertical-align: inherit;">ุฏุนููุง ุฅูุดุงุก ุฃุตู.</font></font><br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ุฅูุดุงุก ุฃุตูุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     ,         Play    .        ,        . <br><br>     ,    . Unity            .            ,    . ,       . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุดุงุก ูุฌููุนุฉ ูู ุงูููุงู ุ ุณูููู ุจุชุฌููุน ุณูุฏูุง. </font><font style="vertical-align: inherit;">ูู ุจุฅูุดุงุก ุจุฑูุงูุฌ ูุตู </font></font><code>TextureArrayWizard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุถุนู ุฏุงุฎู ูุฌูุฏ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุญุฑุฑ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ </font></font><code>MonoBehaviour</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ููุชุฏ ุงูููุน </font></font><code>ScriptableWizard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุณุงุญุฉ ุงูุงุณู </font></font><code>UnityEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEditor; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TextureArrayWizard</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableWizard</span></span> { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ูุชุญ ุงููุนุงูุฌ ูู ุฎูุงู ุทุฑููุฉ ุซุงุจุชุฉ ูุนููุฉ </font></font><code>ScriptableWizard.DisplayWizard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุนููุงุชู ูู ุฃุณูุงุก ูุงูุฐุฉ ุงููุนุงูุฌ ูุฒุฑ ุฅูุดุงุก ุงูุฎุงุต ุจู. </font><font style="vertical-align: inherit;">ุณูู ูุณูู ูุฐู ุงูุทุฑููุฉ ุจุทุฑููุฉ ุซุงุจุชุฉ </font></font><code>CreateWizard</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateWizard</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ScriptableWizard.DisplayWizard&lt;TextureArrayWizard&gt;( <span class="hljs-string"><span class="hljs-string">"Create Texture Array"</span></span>, <span class="hljs-string"><span class="hljs-string">"Create"</span></span> ); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุตูู ุฅูู ุงููุนุงูุฌ ูู ุฎูุงู ุงููุญุฑุฑ ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูุฐู ุงูุทุฑููุฉ ุฅูู ูุงุฆูุฉ ุงููุญุฏุฉ. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฅุถุงูุฉ ุณูุฉ ุฅูู ุงูุฃุณููุจ </font></font><code>MenuItem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฏุนูุง ูุถููู ุฅูู ูุงุฆูุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุตูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ูุจุดูู ุฃูุซุฑ ุชุญุฏูุฏูุง ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assets / Create / Texture Array</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> [<span class="hljs-meta"><span class="hljs-meta">MenuItem(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Assets/Create/Texture Array"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateWizard</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f7d/2b4/433/f7d2b44333870be6838dcd48ea3a697f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุงูุฌูุง ุงููุฎุตุต. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ุนูุตุฑ ุงููุงุฆูุฉ ุงูุฌุฏูุฏ ุ ููููู ูุชุญ ุงููุงุฆูุฉ ุงูููุจุซูุฉ ููุนุงูุฌูุง ุงููุฎุตุต. </font><font style="vertical-align: inherit;">ุฅููุง ููุณุช ุฌูููุฉ ุฌุฏูุง ุ ูููููุง ููุงุณุจุฉ ูุญู ุงููุดููุฉ. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ูุง ุชุฒุงู ูุงุฑุบุฉ. </font><font style="vertical-align: inherit;">ูุฅูุดุงุก ูุฌููุนุฉ ูู ุงูููุงู ุ ูุญุชุงุฌ ุฅูู ูุฌููุนุฉ ูู ุงูููุงู. </font><font style="vertical-align: inherit;">ุฃุถู ุญูููุง ุนุงููุง ุฅูููุง ููุณูุฏ. </font><font style="vertical-align: inherit;">ุชุนุฑุถู ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุณูููุฉ ุงูููุงุณูุฉ ูููุนุงูุฌ ููุง ููุนู ููุชุด ููุงุณู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Texture2D[] textures;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/beb/aa7/d6d/bebaa7d6dd8e0d995ea485d670ea5a0a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฌุณุชูุฑ ูุน ููุงุฏ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุจุฅูุดุงุก ุดูุก </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูููุฑ ููู ุงูุฒุฑ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุนุงูุฌ ุ ูุฎุชูู. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุดูู ุงููุญุฏุฉ ูู ุนุฏู ูุฌูุฏ ุทุฑููุฉ </font></font><code>OnWizardCreate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏ ุงูููุฑ ููู ุงูุฒุฑ ุฅูุดุงุก ุ ูุฐูู ูุญุชุงุฌ ุฅูู ุฅุถุงูุชู ุฅูู ุงููุนุงูุฌ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnWizardCreate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุณูููู ุจุฅูุดุงุก ูุฌููุนุฉ ูุณูุฌ ูุฏููุง. </font><font style="vertical-align: inherit;">ุนูู ุงูุฃูู ุฅุฐุง ุฃุถุงู ุงููุณุชุฎุฏู ููุงุฏ ุฅูู ุงููุนูู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููุง ููุฌุฏ ุดูุก ูุฅูุดุงุกู ููุฌุจ ุฅููุงู ุงูุนูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnWizardCreate</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (textures.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุทูุจ ุงููููุน ูุญูุธ ุฃุตู ุตููู ุงููุณูุฌ. </font><font style="vertical-align: inherit;">ูููู ูุชุญ ููุญุฉ ุญูุธ ุงูููู ุจุงุณุชุฎุฏุงู ุงูุทุฑููุฉ </font></font><code>EditorUtility.SaveFilePanelInProject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุญุฏุฏ ูุนููุงุชู ุงุณู ุงูููุญุฉ ูุงุณู ุงูููู ุงูุงูุชุฑุงุถู ูููุญู ุงูููู ูุงููุตู. </font><font style="vertical-align: inherit;">ุชุณุชุฎุฏู ุตูุงุฆู ุงูุฒุฎุฑูุฉ ุงูุชุฏุงุฏ ููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุตู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุนุงู </font><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (textures.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } EditorUtility.SaveFilePanelInProject( <span class="hljs-string"><span class="hljs-string">"Save Texture Array"</span></span>, <span class="hljs-string"><span class="hljs-string">"Texture Array"</span></span>, <span class="hljs-string"><span class="hljs-string">"asset"</span></span>, <span class="hljs-string"><span class="hljs-string">"Save Texture Array"</span></span> );</code> </pre> <br> <code>SaveFilePanelInProject</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฑุฌุงุน ูุณุงุฑ ุงูููู ุงููุญุฏุฏ ูู ูุจู ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ุจุงูููุฑ ููู "ุฅูุบุงุก ุงูุฃูุฑ" ูู ูุฐู ุงูููุญุฉ ุ ูุณูููู ุงููุณุงุฑ ุนุจุงุฑุฉ ุนู ุณูุณูุฉ ูุงุฑุบุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุฌุจ ุนูููุง ููุงุทุนุฉ ุงูุนูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = EditorUtility.SaveFilePanelInProject( <span class="hljs-string"><span class="hljs-string">"Save Texture Array"</span></span>, <span class="hljs-string"><span class="hljs-string">"Texture Array"</span></span>, <span class="hljs-string"><span class="hljs-string">"asset"</span></span>, <span class="hljs-string"><span class="hljs-string">"Save Texture Array"</span></span> ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (path.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุดุงุก ูุฌููุนุฉ ูู ุงูููุงู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูุฏููุง ุงููุณุงุฑ ุงูุตุญูุญ ุ ููููููุง ุงููุถู ูุฏููุง ูุฅูุดุงุก ูุงุฆู ุฌุฏูุฏ </font></font><code>Texture2DArray</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชุชุทูุจ ุทุฑููุฉ ุงููููุดุฆ ุชุญุฏูุฏ ุนุฑุถ ูุงุฑุชูุงุน ุงููุณูุฌ ุ ูุทูู ุงููุตูููุฉ ุ ูุชูุณูู ุงูููุงู ุ ูุงูุญุงุฌุฉ ุฅูู ุชุฑููุจ mip. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููู ูุฐู ุงููุนููุงุช ูู ููุณูุง ูุฌููุน ุงูุฃูุณุฌุฉ ูู ุงูุตููู. </font><font style="vertical-align: inherit;">ูุชูููู ุงููุงุฆู ุ ูุณุชุฎุฏู ุงููุณูุฌ ุงูุฃูู. </font><font style="vertical-align: inherit;">ูุฌุจ ุนูู ุงููุณุชุฎุฏู ุงูุชุญูู ูู ุฃู ุฌููุน ุงูุฃูุณุฌุฉ ููุง ููุณ ุงูุชูุณูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (path.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } Texture2D t = textures[<span class="hljs-number"><span class="hljs-number">0</span></span>]; Texture2DArray textureArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture2DArray( t.width, t.height, textures.Length, t.format, t.mipmapCount &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> );</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุตููู ุงููุณูุฌ ูู ููุฑุฏ GPU ูุงุญุฏ ุ ูุฅูู ูุณุชุฎุฏู ููุณ ุฃูุถุงุน ุงูุชุตููุฉ ูุงูุทู ูุฌููุน ุงูุฃูุณุฌุฉ. </font><font style="vertical-align: inherit;">ููุง ูุณุชุฎุฏู ูุฑุฉ ุฃุฎุฑู ุงููุณูุฌ ุงูุฃูู ูุฅุนุฏุงุฏ ูู ุดูุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> Texture2DArray textureArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Texture2DArray( t.width, t.height, textures.Length, t.format, t.mipmapCount &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> ); textureArray.anisoLevel = t.anisoLevel; textureArray.filterMode = t.filterMode; textureArray.wrapMode = t.wrapMode;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ูุณุฎ ุงูุฃูุณุฌุฉ ุฅูู ูุตูููุฉ ุจุงุณุชุฎุฏุงู ุงูุทุฑููุฉ </font></font><code>Graphics.CopyTexture</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุชููู ุงูุทุฑููุฉ ุจูุณุฎ ุจูุงูุงุช ุงููุณูุฌ ุงูุฎุงู ุ ูุณุชูู mip ูุงุญุฏ ูู ูู ูุฑุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ุญูู ุฌููุน ุงูููุงู ููุณุชููุงุช mip ุงูุฎุงุตุฉ ุจูุง. </font><font style="vertical-align: inherit;">ูุนููุงุช ุงูุทุฑููุฉ ูู ูุฌููุนุชุงู ุชุชูููุงู ูู ููุฑุฏ ูุณูุฌ ูููุฑุณ ููุณุชูู mip. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุฃูุณุฌุฉ ุงูุฃุตููุฉ ููุณุช ุตูุงุฆู ุ ูุฅู ููุฑุณูุง ุฏุงุฆููุง ุตูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> textureArray.wrapMode = t.wrapMode; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; textures.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> m = <span class="hljs-number"><span class="hljs-number">0</span></span>; m &lt; t.mipmapCount; m++) { Graphics.CopyTexture(textures[i], <span class="hljs-number"><span class="hljs-number">0</span></span>, m, textureArray, i, m); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ูุฏููุง ูู ุงูุฐุงูุฑุฉ ุงูุตููู ุงูุตุญูุญ ูู ุงูููุงู ุ ููููุง ููุณุช ุฃุตููุง ุญุชู ุงูุขู. </font><font style="vertical-align: inherit;">ุณุชููู ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ูู ุงุณุชุฏุนุงุก </font></font><code>AssetDatabase.CreateAsset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุตููู ููุณุงุฑู. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุชู ูุชุงุจุฉ ุงูุจูุงูุงุช ูู ููู ูู ูุดุฑูุนูุง ุ ูุณุชุธูุฑ ูู ูุงูุฐุฉ ุงููุดุฑูุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; textures.Length; i++) { โฆ } AssetDatabase.CreateAsset(textureArray, path);</code> </pre> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุงู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุดุงุก ูุฌููุนุฉ ุญููููุฉ ูู ุงูููุงู ุ ูุญุชุงุฌ ุฅูู ุงูููุงู ุงูุฃุตูู. ูููุง ููู ุฎูุณุฉ ููุงุฏ ุชุทุงุจู ุงูุฃููุงู ุงูุชู ุงุณุชุฎุฏููุงูุง ุญุชู ุงูุขู. ูุตุจุญ ุงูุฃุตูุฑ ุฑูููุง ุ ูุงูุฃุฎุถุฑ ูุตุจุญ ุนุดุจูุง ุ ูุงูุฃุฒุฑู ูุตุจุญ ุงูุฃุฑุถ ุ ูุงูุจุฑุชูุงู ูุตุจุญ ุงูุญุฌุฑ ุ ูุงูุฃุจูุถ ูุตุจุญ ุงูุซูุฌ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/195/104/a40/195104a4070bfa42e6c4e0eaff218d42.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0d7/777/f86/0d7777f865b086c46a1c95a06380c66a.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0f8/30b/55f/0f830b55ffdbc729bc02d013805bb2c3.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/347/4eb/37b/3474eb37b3a5404866a6fd384e9c6352.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6de/0eb/fa3/6de0ebfa32b5b0b04c8c082e6cce0c01.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงู ุงูุฑูู ูุงูุนุดุจ ูุงูุฃุฑุถ ูุงูุญุฌุฑ ูุงูุซูุฌ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุญุธ ุฃู ูุฐู ุงูููุงู ููุณุช ุตูุฑูุง ููุฐุง ุงูุงุฑุชูุงุญ. </font><font style="vertical-align: inherit;">ูุฐู ูู ุงูุฃููุงุท ุงูุฒุงุฆูุฉ ุงูุนุดูุงุฆูุฉ ุงูุณููุฉ ุงูุชู ุฃูุดุฃุชูุง ุจุงุณุชุฎุฏุงู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NumberFlow</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ููุฏ ุณุนุช ุฅูู ุฅูุดุงุก ุฃููุงุน ูุชูุงุตูู ุงูุฅุบุงุซุฉ ุงูุจุงุฑุฒุฉ ุงูุชู ูุง ุชุชุนุงุฑุถ ูุน ุงูุฅุบุงุซุฉ ุงููุถูุนุฉ ุงููุฌุฑุฏุฉ. </font><font style="vertical-align: inherit;">ุชุจูู ุฃู ุงููุงูุนูุฉ ุงููุงูุนูุฉ ุบูุฑ ููุงุณุจุฉ ูุฐูู. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุนูู ุงูุฑุบู ูู ุฃู ุงูุฃููุงุท ุชุถูู ุชููุนูุง ุ ุฅูุง ุฃู ููุงู ููุฒุงุช ููููุฉ ูููุฒุฉ ูููุง ุชุฌุนู ุงูุชูุฑุงุฑ ููุญูุธูุง ุนูู ุงูููุฑ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ูุฐู ุงูุฃูุณุฌุฉ ุฅูู ุงูุตููู ุงูุฑุฆูุณู ุ ูุน ุงูุชุฃูุฏ ูู ุฃู ุชุฑุชูุจูุง ูุทุงุจู ุงูุฃููุงู. </font><font style="vertical-align: inherit;">ุฃู ุงูุฑูุงู ุฃููุงู ุ ุซู ุงูุนุดุจ ูุงูุฃุฑุถ ูุงูุญุฌุฑ ูุฃุฎูุฑูุง ุงูุซูุฌ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5ec/511/2a1/5ec5112a1bdaa4f170ec382b2549ad9d.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/a54/4e8/1f0/a544e81f0c74fa36290553a6c6a328df.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ูุฌููุนุฉ ูู ุงูููุงู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฅูุดุงุก ุฃุตู ุตููู ุงููุณูุฌ ุ ุญุฏุฏู ูุงูุญุตู ูู ุงูููุชุด.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6e1/8f3/8d6/6e18f38d6682f71b3c8a999823642cd4.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุด ูุฌููุนุฉ ุงููููุณ.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ูู ุฃุจุณุท ุนุฑุถ ููุทุนุฉ ูู ุจูุงูุงุช ุตููู ุงููุณูุฌ. ูุงุญุธ ุฃู ููุงู ููุชุงุญ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Is Readable</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุฏ ุงูุชุดุบูู ูู ุงูุจุฏุงูุฉ. ูุธุฑูุง ูุฃููุง ูุง ูุญุชุงุฌ ุฅูู ูุฑุงุกุฉ ุจูุงูุงุช ุงูุจูุณู ูู ุงูุตููู ุ ูุฃููู ุชุดุบูููุง. ูุง ูููููุง ุงูููุงู ุจุฐูู ูู ุงููุนุงูุฌ ูุฃูู ูุง </font></font><code>Texture2DArray</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฌุฏ ุทุฑู ุฃู ุฎุตุงุฆุต ูููุตูู ุฅูู ูุฐู ุงููุนููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ูู Unity 5.6 ุ ููุงู ุฎุทุฃ ููุณุฏ ุตูุงุฆู ุงููููุณ ูู ุงูุชุฌููุนุงุช ุนูู ุงูุนุฏูุฏ ูู ุงูููุตุงุช. ููููู ุงูุงูุชูุงู ุญูููุง ุฏูู ุชุนุทูู ุฅููุงููุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฑุงุกุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฃูุถูุง ุฅูู ูุฌูุฏ ุญูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Color Space</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูุชู ุชู ุชุนููููุง ูููููุฉ 1. ูุฐุง ูุนูู ุฃู ุงูููุงุฏ ููุชุฑุถ ุฃููุง ูู ูุณุงุญุฉ ุฌุงูุง ุ ููุฐุง ุตุญูุญ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ูู ุงูููุชุฑุถ ุฃู ุชููู ูู ูุณุงุญุฉ ุฎุทูุฉ ุ ููุฌุจ ุชุนููู ุงูุญูู ุนูู 0. ูู ุงููุงูุน ุ ุงููุตูู </font></font><code>Texture2DArray</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏูู ูุนููุฉ ุฅุถุงููุฉ ูุชุญุฏูุฏ ูุณุงุญุฉ ุงูููู ุ ูููู </font></font><code>Texture2D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุธูุฑ ูุง ุฅุฐุง ูุงู ูู ูุณุงุญุฉ ุฎุทูุฉ ุฃู ูุง ุ ูุฐูู ุ ุนูู ุฃู ุญุงู ุ ุชุญุชุงุฌ ุฅูู ุชุนููู ุงููููุฉ ูุฏูููุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุดุงุฏุฑ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ูุฏููุง ูุฌููุนุฉ ูู ุงูููุงู ุ ูุญุชุงุฌ ุฅูู ุชุนููู shader ููููุฉ ุงูุนูู ูุนูุง. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ูุณุชุฎุฏู ุชุธููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VertexColors</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุชูุฏูู ุงูุชุถุงุฑูุณ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ุณูุณุชุฎุฏู ุงูุขู ุงูููุงู ุจุฏูุงู ูู ุงูุฃููุงู ุ ูุนูุฏ ุชุณููุชู ุฅูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terrain</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ุซู ูุญูู ูุนููุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_MainTex</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ูุตูููุฉ ูู ุงูุฃูุณุฌุฉ </font><em><font style="vertical-align: inherit;">ููุนูููุง</font></em><font style="vertical-align: inherit;"> ูุงุฏุฉ ุนุฑุถ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">Shader</span></span> <span class="hljs-string"><span class="hljs-string">"Custom/Terrain"</span></span> { <span class="hljs-section"><span class="hljs-section">Properties</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">_Color</span></span> (<span class="hljs-string"><span class="hljs-string">"Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) _MainTex (<span class="hljs-string"><span class="hljs-string">"Terrain Texture Array"</span></span>, 2DArray) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} <span class="hljs-attribute"><span class="hljs-attribute">_Glossiness</span></span> (<span class="hljs-string"><span class="hljs-string">"Smoothness"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span> _Metallic (<span class="hljs-string"><span class="hljs-string">"Metallic"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> } โฆ }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/878/0b2/3de/8780b23ded3ced3ab980a039d0f5753d.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฏ ุงูุฅุบุงุซุฉ ูุน ูุฌููุนุฉ ูู ุงูููุงู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูููู ุตูุงุฆู ุงููุณูุฌ ุนูู ุฌููุน ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ ุงูุชู ุชุฏุนููุง ุ ุชุญุชุงุฌ ุฅูู ุฒูุงุฏุฉ ุงููุณุชูู ุงููุณุชูุฏู ููุชุธููู ูู 3.0 ุฅูู 3.5.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs cs"> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">pragma</span></span></span><span class="hljs-meta"> target 3.5</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงููุชุบูุฑ </font></font><code>_MainTex</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุดูุฑ ุงูุขู ุฅูู ูุฌููุนุฉ ูู ุงูููุงู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุชุบููุฑ ููุนู. </font><font style="vertical-align: inherit;">ูุนุชูุฏ ุงูููุน ุนูู ุงููุธุงู ุงูุฃุณุงุณู ุงููุณุชูุฏู ูุณูุชููู ุงููุงูุฑู ูุฐุง ุงูุฃูุฑ </font></font><code>UNITY_DECLARE_TEX2DARRAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs objectivec"><span class="hljs-comment"><span class="hljs-comment">// sampler2D _MainTex; UNITY_DECLARE_TEX2DARRAY(_MainTex);</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ูู ุงูุญุงู ูู ุชุธููู ุฃุฎุฑู ุ ูุฃุฎุฐ ุนููุงุช ูู ูุณูุฌ ุงูุฅุบุงุซุฉ ุ ูุญุชุงุฌ ุฅูู ุฅุญุฏุงุซูุงุช ุนุงูู XZ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูุถูู ููุถุนูุง ูู ุงูุนุงูู ุฅูู ุจููุฉ ุฅุฏุฎุงู ุชุธููู ุงูุณุทุญ. </font><font style="vertical-align: inherit;">ูุญุฐู ุฃูุถูุง ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงูุงูุชุฑุงุถูุฉ ุ ูุฃููุง ูุณูุง ุจุญุงุฌุฉ ุฅูููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs swift"> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Input</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// float2 uv_MainTex; float4 color : COLOR; float3 worldPos; };</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุฎุฐ ุนููุฉ ูู ูุฌููุนุฉ ูู ุงูุฃูุณุฌุฉ ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ูุงูุฑู </font></font><code>UNITY_SAMPLE_TEX2DARRAY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฃุฎุฐ ุนููุฉ ูู ุตููู ุ ูุญุชุงุฌ ุฅูู ุซูุงุซุฉ ุฅุญุฏุงุซูุงุช. </font><font style="vertical-align: inherit;">ุงูุฃูููู ููุง ุฅุญุฏุงุซูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงูุนุงุฏูุฉ. </font><font style="vertical-align: inherit;">ุณูุณุชุฎุฏู ุฅุญุฏุงุซูุงุช XZ ุงูุนุงูููุฉ ุงูุชู ุชู ุชุบููุฑ ุญุฌููุง ุฅูู 0.02. </font><font style="vertical-align: inherit;">ูุฐูู ูุญุตู ุนูู ุฏูุฉ ูุณูุฌ ุฌูุฏุฉ ูู ุงูุชูุจูุฑ ุงููุงูู. </font><font style="vertical-align: inherit;">ุณูุชู ุชูุฑุงุฑ ุงูููุงู ูู ุฃุฑุจุน ุฎูุงูุง ุชูุฑูุจูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุงุณุชุฎุฏุงู ุงูุฅุญุฏุงุซูุงุช ุงูุซุงูุซุฉ ููุคุดุฑ ูุตููู ุงููุณูุฌ ุ ููุง ูู ุงูุญุงู ูู ุงูุตููู ุงูุนุงุฏู. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุฅุญุฏุงุซูุงุช ุชุทูู ุ ูุจู ููุฑุณุฉ ูุตูููุฉ GPU ุชูุฑูุจูุง. </font><font style="vertical-align: inherit;">ููุฐ ุฃู ุนุฑููุง ุงููููุณ ุงููุทููุจ ุ ุฏุนูุง ูุณุชุฎุฏู ุงูุฃูู ุฏุงุฆููุง. </font><font style="vertical-align: inherit;">ุฃูุถุง ุ ูู ูุคุซุฑ ููู ุงูููุฉ ุนูู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ุ ูุฃููุง ุฎุฑูุทุฉ ุฏุงุฆุฑูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { float2 uv = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos.xz * <span class="hljs-number"><span class="hljs-number">0.02</span></span>; fixed4 c = UNITY_SAMPLE_TEX2DARRAY(_MainTex, float3(uv, <span class="hljs-number"><span class="hljs-number">0</span></span>)); Albedo = c.rgb * _Color; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c08/a19/df0/c08a19df0f6c0674406e4922b6595585.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุดูุก ุฃุตุจุญ ุฑูุงู. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุฎุชูุงุฑ ุงููููุณ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุฎุฑูุทุฉ ุชุถุฎูู ุงูุฅุบุงุซุฉ ุงูุชู ุชูุฒุฌ ุงูุฃููุงุน ุงูุซูุงุซุฉ ูู ูุซูุซ. </font><font style="vertical-align: inherit;">ูุฏููุง ูุฌููุนุฉ ูู ุงูููุงู ูุน ูุณูุฌ ููู ููุน ูู ุงูุชุถุงุฑูุณ. </font><font style="vertical-align: inherit;">ูุฏููุง ุชุธููู ูุฎุชุจุฑ ูุฌููุนุฉ ูู ุงูููุงู. </font><font style="vertical-align: inherit;">ูููู ูู ุงูููุช ุงูุญุงูู ุ ููุณ ูุฏููุง ุทุฑููุฉ ูุฅุฎุจุงุฑ ุชุธููู ุงูููุงู ุงูุฐู ูุฌุจ ุงุฎุชูุงุฑู ููู ูุซูุซ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูู ูุซูุซ ูุฎูุท ูุง ูุตู ุฅูู ุซูุงุซุฉ ุฃููุงุน ุ ูุญุชุงุฌ ุฅูู ุฑุจุท ุซูุงุซุฉ ูุคุดุฑุงุช ุจูู ูุซูุซ. </font><font style="vertical-align: inherit;">ูุง ูููููุง ุชุฎุฒูู ูุนูููุงุช ูููุซูุซุงุช ุ ูุฐุง ุนูููุง ุชุฎุฒูู ููุงุฑุณ ุงูููู. </font><font style="vertical-align: inherit;">ุณุชุฎุฒู ุฌููุน ุฑุคูุณ ุงููุซูุซ ุงูุซูุงุซุฉ ุจุจุณุงุทุฉ ููุณ ุงููุคุดุฑุงุช ููุง ูู ุงูุญุงู ูุน ุงูููู ุงูุตูุจ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจูุงูุงุช ุงูุดุจูุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุงุณุชุฎุฏุงู ุฅุญุฏู ูุฌููุนุงุช ุดุจูุฉ ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ูุชุฎุฒูู ุงููุคุดุฑุงุช. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃูู ูุชู ุชุฎุฒูู ุซูุงุซุฉ ููุงุฑุณ ุนูู ูู ููุฉ ุ ููู ุชููู ูุฌููุนุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุซูุงุฆูุฉ ุงูุฃุจุนุงุฏ ุงูููุฌูุฏุฉ ูุงููุฉ. </font><font style="vertical-align: inherit;">ูุญุณู ุงูุญุธ ุ ูููู ุฃู ุชุญุชูู ูุฌููุนุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุนูู ูุง ูุตู ุฅูู ุฃุฑุจุนุฉ ุฅุญุฏุงุซูุงุช. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุถูู ุฅูู </font></font><code>HexMesh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุงุฆูุฉ ุงูุซุงููุฉ </font></font><code>Vector3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุงูุชู ุณูุดูุฑ ุฅูููุง ุจุฃููุงุน ุงูุฅุบุงุซุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> useCollider, useColors, useUVCoordinates, useUV2Coordinates; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> useTerrainTypes; [NonSerialized] List&lt;Vector3&gt; vertices, terrainTypes;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููู ุฃููุงุน </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุถุงุฑูุณ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุทูู </font><em><font style="vertical-align: inherit;">ุงูุชุถุงุฑูุณ</font></em><font style="vertical-align: inherit;"> ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Grid Chunk</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุงูุฒุฉ </font><font style="vertical-align: inherit;">.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/728/0c5/4eb/7280c54ebcd1a6063fb3df9f0328cc5b.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุชุฎุฏู ุฃููุงุน ุงูุฅุบุงุซุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ุณูุฃุฎุฐ ูุงุฆูุฉ ุฃุฎุฑู </font></font><code>Vector3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃููุงุน ุงูุฅุบุงุซุฉ ุฃุซูุงุก ุชูุธูู ุงูุดุจูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useTerrainTypes) { terrainTypes = ListPool&lt;Vector3&gt;.Get(); } triangles = ListPool&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;.Get(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุนูููุฉ ุชุทุจูู ุจูุงูุงุช ุงูุดุจูุฉ ุ ูููู ุจุญูุธ ุฃููุงุน ุงูุฅุบุงุซุฉ ูู ูุฌููุนุฉ ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุงูุซุงูุซุฉ. </font><font style="vertical-align: inherit;">ูุจุณุจุจ ูุฐุง ุ ูู ูุชุนุงุฑุถูุง ูุน ูุฌููุนุชูู ุฃุฎุฑููู ุ ุฅุฐุง ูุฑุฑูุง ุงุณุชุฎุฏุงููุง ูุนูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Apply</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useTerrainTypes) { hexMesh.SetUVs(<span class="hljs-number"><span class="hljs-number">2</span></span>, terrainTypes); ListPool&lt;Vector3&gt;.Add(terrainTypes); } hexMesh.SetTriangles(triangles, <span class="hljs-number"><span class="hljs-number">0</span></span>); โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุนููู ุฃููุงุน ุงูุฅุบุงุซุฉ ูู ุงููุซูุซ ุ ุณูู ูุณุชุฎุฏููุง </font></font><code>Vector3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจูุง ุฃู ุชูู ูู ููุณูุง ูููุซูุซ ุจุฃูููู ุ ูุฅููุง ูุถูู ููุณ ุงูุจูุงูุงุช ุซูุงุซ ูุฑุงุช ููุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddTriangleTerrainTypes</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 types</span></span></span><span class="hljs-function">)</span></span> { terrainTypes.Add(types); terrainTypes.Add(types); terrainTypes.Add(types); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุงุฎุชูุงุท ูู ุฑุจุงุนูุฉ ูุนูู ุจุงูุทุฑููุฉ ููุณูุง. </font><font style="vertical-align: inherit;">ุฌููุน ุงูููู ุงูุฃุฑุจุนุฉ ูู ููุณ ุงูููุน.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddQuadTerrainTypes</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 types</span></span></span><span class="hljs-function">)</span></span> { terrainTypes.Add(types); terrainTypes.Add(types); terrainTypes.Add(types); terrainTypes.Add(types); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑุงูุญ ูุซูุซุงุช ุงูุฃุถูุงุน </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุฅุถุงูุฉ ุฃููุงุน ุฅูู ุจูุงูุงุช ุงูุดุจูุฉ ูู </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุจุฏุฃ </font></font><code>TriangulateEdgeFan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃููุงู ุ ูู ุฃุฌู ุณูููุฉ ุงููุฑุงุกุฉ ุ ูููู ุจุชูุณูู ุงุณุชุฏุนุงุกุงุช ุฃุณููุจ ุงูุฑุฃุณ ูุงูููู. </font><font style="vertical-align: inherit;">ุชุฐูุฑ ุฃูู ูุน ูู ุงุณุชุฏุนุงุก ููุฐู ุงูุทุฑููุฉ ุ ููุฑุฑู ุฅููู </font></font><code>color1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุญุชู ูุชููู ูู ุงุณุชุฎุฏุงู ูุฐุง ุงูููู ูุจุงุดุฑุฉ ุ ููุง ูุทุจู ุงููุนููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeFan</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 center, EdgeVertices edge, Color color</span></span></span><span class="hljs-function">)</span></span> { terrain.AddTriangle(center, edge.v1, edge.v2); <span class="hljs-comment"><span class="hljs-comment">// terrain.AddTriangleColor(color); terrain.AddTriangle(center, edge.v2, edge.v3); // terrain.AddTriangleColor(color); terrain.AddTriangle(center, edge.v3, edge.v4); // terrain.AddTriangleColor(color); terrain.AddTriangle(center, edge.v4, edge.v5); // terrain.AddTriangleColor(color); terrain.AddTriangleColor(color1); terrain.AddTriangleColor(color1); terrain.AddTriangleColor(color1); terrain.AddTriangleColor(color1); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูุฃููุงู ุ ูุถูู ุฃููุงุน ุงูุฅุบุงุซุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงูุฃููุงุน ูู ุงููุซูุซ ูุฏ ุชููู ูุฎุชููุฉ ุ ูุฌุจ ุฃู ุชููู ูุฐู ูุนููุฉ ุชุญู ูุญู ุงูููู. </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏู ูุฐุง ุงูููุน ุงูุจุณูุท ูุฅูุดุงุก </font></font><code>Vector3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุงููููุงุช ุงูุฃุฑุจุน ุงูุฃููู ููุท ูู ุงููููุฉ ุจุงููุณุจุฉ ููุง ุ ูุฃูู ูู ูุฐู ุงูุญุงูุฉ ุชููู ุฎุฑูุทุฉ ุงูุฏุงุฆุฑุฉ ุงูุญูุฑุงุก ุฏุงุฆููุง. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุฌููุน ููููุงุช ุงููุชุฌู ุงูุซูุงุซุฉ ุจุญุงุฌุฉ ุฅูู ุงูุชุนููู ุ ูููุนูููุง ููุนูุง ูุงุญุฏูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeFan</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 center, EdgeVertices edge, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> type</span></span></span><span class="hljs-function">)</span></span> { โฆ Vector3 types; types.x = types.y = types.z = type; terrain.AddTriangleTerrainTypes(types); terrain.AddTriangleTerrainTypes(types); terrain.AddTriangleTerrainTypes(types); terrain.AddTriangleTerrainTypes(types); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุงูุขู ุฅูู ุชุบููุฑ ุฌููุน ุงูููุงููุงุช ููุฐู ุงูุทุฑููุฉ ุ ูุน ุงุณุชุจุฏุงู ูุณูุทุฉ ุงูููู ุจููุฑุณ ูู ููุน ุชุถุงุฑูุณ ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">Vnesom ูุฐุง ุงูุชุบููุฑ </font></font><code>TriangulateWithoutRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>TriangulateAdjacentToRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>TriangulateWithRiverBeginOrEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// TriangulateEdgeFan(center, e, color1); TriangulateEdgeFan(center, e, cell.TerrainTypeIndex);</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ูุฐู ุงูููุทุฉ ุ ุนูุฏ ุจุฏุก ูุถุน ุงูุชุดุบูู ุ ุณุชุธูุฑ ุฃุฎุทุงุก ุชุฎุจุฑู ุฃู ุงููุฌููุนุงุช ุงูุซุงูุซุฉ ูู ุดุจูุงุช ุงูุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุฎุงุฑุฌ ุงูุญุฏูุฏ. </font><font style="vertical-align: inherit;">ุญุฏุซ ูุฐุง ูุฃููุง ูุง ูุถูู ุฃููุงุน ุงูุฅุบุงุซุฉ ุฅูู ูู ูุซูุซ ูุฑุจุงุนู ุญุชู ุงูุขู. </font><font style="vertical-align: inherit;">ูุฐูู ุฏุนููุง ููุงุตู ุงูุชุบููุฑ </font></font><code>HexGridChunk</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฎุทูุท ุงูุถูุน </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุนูุฏ ุฅูุดุงุก ุดุฑูุท ุญุงูุฉ ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุฃููุงุน ุงูุชุถุงุฑูุณ ุงูููุฌูุฏุฉ ุนูู ููุง ุงูุฌุงูุจูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุถูููุง ููุนููุงุช ุ ุซู ููุดุฆ ูุชุฌููุง ููุฃููุงุน ุงูุชู ูุชู ุชุนููู ููุงุชูู ููุง ูุฐู ุงูุฃููุงุน. </font><font style="vertical-align: inherit;">ุงูููุงุฉ ุงูุซุงูุซุฉ ููุณุช ูููุฉ ุ ูุฐุง ููุท ูู ุจุชุนุงุฏููุง ูุน ุงูููุงุฉ ุงูุฃููู. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฅุถุงูุฉ ุงูุฃููุงู ุ ุฃุถู ุงูุฃููุงุน ุฅูู ุงูุฑุจุงุนู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeStrip</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices e1, Color c1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> type1, EdgeVertices e2, Color c2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> type2, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasRoad = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span></span><span class="hljs-function">)</span></span> { terrain.AddQuad(e1.v1, e1.v2, e2.v1, e2.v2); terrain.AddQuad(e1.v2, e1.v3, e2.v2, e2.v3); terrain.AddQuad(e1.v3, e1.v4, e2.v3, e2.v4); terrain.AddQuad(e1.v4, e1.v5, e2.v4, e2.v5); terrain.AddQuadColor(c1, c2); terrain.AddQuadColor(c1, c2); terrain.AddQuadColor(c1, c2); terrain.AddQuadColor(c1, c2); Vector3 types; types.x = types.z = type1; types.y = type2; terrain.AddQuadTerrainTypes(types); terrain.AddQuadTerrainTypes(types); terrain.AddQuadTerrainTypes(types); terrain.AddQuadTerrainTypes(types); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hasRoad) { TriangulateRoadSegment(e1.v2, e1.v3, e1.v4, e2.v2, e2.v3, e2.v4); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุญู ุจุญุงุฌุฉ ุฅูู ุชุบููุฑ ุงูุชุญุฏูุงุช </font></font><code>TriangulateEdgeStrip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃููุง </font></font><code>TriangulateAdjacentToRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>TriangulateWithRiverBeginOrEnd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>TriangulateWithRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุงุณุชุฎุฏุงู ููุน ูู ุงูุฎูุงูุง ูููุง ุงูุฌุงูุจูู ูู ูุทุงุน ุงูุฒุนุงูู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// TriangulateEdgeStrip(m, color1, e, color1); TriangulateEdgeStrip( m, color1, cell.TerrainTypeIndex, e, color1, cell.TerrainTypeIndex );</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ </font></font><code>TriangulateConnection</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชุณุชุฎุฏู </font><font style="vertical-align: inherit;">ุฃุจุณุท ุญุงูุฉ ููุญุงูุฉ </font><font style="vertical-align: inherit;">ููุน ุงูุฎููุฉ ูุฃูุฑุจ ุญุงูุฉ ูููุน ุงูุฌูุงุฑ ููุญุงูุฉ ุงูุจุนูุฏุฉ. </font><font style="vertical-align: inherit;">ูููู ุฃู ุชููู ูู ููุณูุง ุฃู ูุฎุชููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateConnection</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, EdgeVertices e1 </span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cell.GetEdgeType(direction) == HexEdgeType.Slope) { TriangulateEdgeTerraces(e1, cell, e2, neighbor, hasRoad); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// TriangulateEdgeStrip(e1, color1, e2, color2, hasRoad); TriangulateEdgeStrip( e1, color1, cell.TerrainTypeIndex, e2, color2, neighbor.TerrainTypeIndex, hasRoad ); } โฆ }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุฑ ููุณู ููุทุจู ุนูู </font></font><code>TriangulateEdgeTerraces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุญูุฒ ุซูุงุซ ูุฑุงุช </font></font><code>TriangulateEdgeStrip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุฃููุงุน ุงูุญูุงู ูู ููุณูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateEdgeTerraces</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> EdgeVertices begin, HexCell beginCell, EdgeVertices end, HexCell endCell, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hasRoad </span></span></span><span class="hljs-function">)</span></span> { EdgeVertices e2 = EdgeVertices.TerraceLerp(begin, end, <span class="hljs-number"><span class="hljs-number">1</span></span>); Color c2 = HexMetrics.TerraceLerp(color1, color2, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t1 = beginCell.TerrainTypeIndex; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t2 = endCell.TerrainTypeIndex; TriangulateEdgeStrip(begin, color1, t1, e2, c2, t2, hasRoad); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { EdgeVertices e1 = e2; Color c1 = c2; e2 = EdgeVertices.TerraceLerp(begin, end, i); c2 = HexMetrics.TerraceLerp(color1, color2, i); TriangulateEdgeStrip(e1, c1, t1, e2, c2, t2, hasRoad); } TriangulateEdgeStrip(e2, c2, t1, end, color2, t2, hasRoad); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฒูุงูุง </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุจุณุท ุญุงูุฉ ูุฒุงููุฉ ูุซูุซ ุจุณูุท. </font><font style="vertical-align: inherit;">ุชููู ุงูุฎููุฉ ุงูุณูููุฉ ุงูููุน ุงูุฃูู ุ ูุงูููุน ุงูุฃูุณุฑ ุงูุซุงูู ุ ูุงูููุน ุงูุฃููู ุงูุซุงูุซ. </font><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงููุง ุ ูู ุจุฅูุดุงุก ูุชุฌู ูุฃููุงุน ูุฅุถุงูุชู ุฅูู ุงููุซูุซ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateCorner</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 bottom, HexCell bottomCell, Vector3 left, HexCell leftCell, Vector3 right, HexCell rightCell </span></span></span><span class="hljs-function">)</span></span> { โฆ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { terrain.AddTriangle(bottom, left, right); terrain.AddTriangleColor(color1, color2, color3); Vector3 types; types.x = bottomCell.TerrainTypeIndex; types.y = leftCell.TerrainTypeIndex; types.z = rightCell.TerrainTypeIndex; terrain.AddTriangleTerrainTypes(types); } features.AddWall(bottom, bottomCell, left, leftCell, right, rightCell); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุณุชุฎุฏู ููุณ ุงูููุฌ </font></font><code>TriangulateCornerTerraces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููุง ููุท ูููู ุจุฅูุดุงุก ูุฌููุนุฉ ูู quad-s.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateCornerTerraces</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, HexCell beginCell, Vector3 left, HexCell leftCell, Vector3 right, HexCell rightCell </span></span></span><span class="hljs-function">)</span></span> { Vector3 v3 = HexMetrics.TerraceLerp(begin, left, <span class="hljs-number"><span class="hljs-number">1</span></span>); Vector3 v4 = HexMetrics.TerraceLerp(begin, right, <span class="hljs-number"><span class="hljs-number">1</span></span>); Color c3 = HexMetrics.TerraceLerp(color1, color2, <span class="hljs-number"><span class="hljs-number">1</span></span>); Color c4 = HexMetrics.TerraceLerp(color1, color3, <span class="hljs-number"><span class="hljs-number">1</span></span>); Vector3 types; types.x = beginCell.TerrainTypeIndex; types.y = leftCell.TerrainTypeIndex; types.z = rightCell.TerrainTypeIndex; terrain.AddTriangle(begin, v3, v4); terrain.AddTriangleColor(color1, c3, c4); terrain.AddTriangleTerrainTypes(types); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { Vector3 v1 = v3; Vector3 v2 = v4; Color c1 = c3; Color c2 = c4; v3 = HexMetrics.TerraceLerp(begin, left, i); v4 = HexMetrics.TerraceLerp(begin, right, i); c3 = HexMetrics.TerraceLerp(color1, color2, i); c4 = HexMetrics.TerraceLerp(color1, color3, i); terrain.AddQuad(v1, v2, v3, v4); terrain.AddQuadColor(c1, c2, c3, c4); terrain.AddQuadTerrainTypes(types); } terrain.AddQuad(v3, v4, left, right); terrain.AddQuadColor(c3, c4, color2, color3); terrain.AddQuadTerrainTypes(types); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุฎูุท ุงูุญูุงู ูุงูููุญุฏุฑุงุช ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงููุง </font></font><code>TriangulateBoundaryTriangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุท ูู ุจุฅุนุทุงุฆูุง ูุนููุฉ ูุชุงุจุฉ ูุชุฌูุฉ ูุฅุถุงูุชูุง ุฅูู ูู ูุซูุซุงุชูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateBoundaryTriangle</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, Color beginColor, Vector3 left, Color leftColor, Vector3 boundary, Color boundaryColor, Vector3 types </span></span></span><span class="hljs-function">)</span></span> { Vector3 v2 = HexMetrics.Perturb(HexMetrics.TerraceLerp(begin, left, <span class="hljs-number"><span class="hljs-number">1</span></span>)); Color c2 = HexMetrics.TerraceLerp(beginColor, leftColor, <span class="hljs-number"><span class="hljs-number">1</span></span>); terrain.AddTriangleUnperturbed(HexMetrics.Perturb(begin), v2, boundary); terrain.AddTriangleColor(beginColor, c2, boundaryColor); terrain.AddTriangleTerrainTypes(types); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">2</span></span>; i &lt; HexMetrics.terraceSteps; i++) { Vector3 v1 = v2; Color c1 = c2; v2 = HexMetrics.Perturb(HexMetrics.TerraceLerp(begin, left, i)); c2 = HexMetrics.TerraceLerp(beginColor, leftColor, i); terrain.AddTriangleUnperturbed(v1, v2, boundary); terrain.AddTriangleColor(c1, c2, boundaryColor); terrain.AddTriangleTerrainTypes(types); } terrain.AddTriangleUnperturbed(v2, HexMetrics.Perturb(left), boundary); terrain.AddTriangleColor(c2, leftColor, boundaryColor); terrain.AddTriangleTerrainTypes(types); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><code>TriangulateCornerTerracesCliff</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูุดุงุก ูุงููุงุช ุงูุฃููุงุน ุนูู ุฃุณุงุณ ุงูุฎูุงูุง ุงููููููุฉ. </font><font style="vertical-align: inherit;">ุซู ุฃุถูู ุฅูู ูุซูุซ ูุงุญุฏ ูุฃุฏุฎูู </font></font><code>TriangulateBoundaryTriangle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateCornerTerracesCliff</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, HexCell beginCell, Vector3 left, HexCell leftCell, Vector3 right, HexCell rightCell </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> b = <span class="hljs-number"><span class="hljs-number">1f</span></span> / (rightCell.Elevation - beginCell.Elevation); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { b = -b; } Vector3 boundary = Vector3.Lerp( HexMetrics.Perturb(begin), HexMetrics.Perturb(right), b ); Color boundaryColor = Color.Lerp(color1, color3, b); Vector3 types; types.x = beginCell.TerrainTypeIndex; types.y = leftCell.TerrainTypeIndex; types.z = rightCell.TerrainTypeIndex; TriangulateBoundaryTriangle( begin, color1, left, color2, boundary, boundaryColor, types ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (leftCell.GetEdgeType(rightCell) == HexEdgeType.Slope) { TriangulateBoundaryTriangle( left, color2, right, color3, boundary, boundaryColor, types ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { terrain.AddTriangleUnperturbed( HexMetrics.Perturb(left), HexMetrics.Perturb(right), boundary ); terrain.AddTriangleColor(color2, color3, boundaryColor); terrain.AddTriangleTerrainTypes(types); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุทุจู ููุณ ุงูุดูุก </font></font><code>TriangulateCornerCliffTerraces</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateCornerCliffTerraces</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> Vector3 begin, HexCell beginCell, Vector3 left, HexCell leftCell, Vector3 right, HexCell rightCell </span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> b = <span class="hljs-number"><span class="hljs-number">1f</span></span> / (leftCell.Elevation - beginCell.Elevation); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (b &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { b = -b; } Vector3 boundary = Vector3.Lerp( HexMetrics.Perturb(begin), HexMetrics.Perturb(left), b ); Color boundaryColor = Color.Lerp(color1, color2, b); Vector3 types; types.x = beginCell.TerrainTypeIndex; types.y = leftCell.TerrainTypeIndex; types.z = rightCell.TerrainTypeIndex; TriangulateBoundaryTriangle( right, color3, begin, color1, boundary, boundaryColor, types ); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (leftCell.GetEdgeType(rightCell) == HexEdgeType.Slope) { TriangulateBoundaryTriangle( left, color2, right, color3, boundary, boundaryColor, types ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { terrain.AddTriangleUnperturbed( HexMetrics.Perturb(left), HexMetrics.Perturb(right), boundary ); terrain.AddTriangleColor(color2, color3, boundaryColor); terrain.AddTriangleTerrainTypes(types); } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุงูุฃููุงุฑ </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุฃุฎูุฑุฉ ููุชุบููุฑ ูู ูุฐู </font></font><code>TriangulateWithRiver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจูุง ุฃููุง ููุง ูู ูุณุท ุงูุฎููุฉ ุ ููุญู ูุชุนุงูู ููุท ูุน ููุน ุงูุฎููุฉ ุงูุญุงููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุจุฅูุดุงุก ูุงูู ูู ูุฅุถุงูุชู ุฅูู ูุซูุซุงุช ูุฑุจุงุนูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TriangulateWithRiver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> HexDirection direction, HexCell cell, Vector3 center, EdgeVertices e </span></span></span><span class="hljs-function">)</span></span> { โฆ terrain.AddTriangleColor(color1); terrain.AddQuadColor(color1); terrain.AddQuadColor(color1); terrain.AddTriangleColor(color1); Vector3 types; types.x = types.y = types.z = cell.TerrainTypeIndex; terrain.AddTriangleTerrainTypes(types); terrain.AddQuadTerrainTypes(types); terrain.AddQuadTerrainTypes(types); terrain.AddTriangleTerrainTypes(types); โฆ }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุจ ูุฒูุฌ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุฑุญูุฉ ุ ุชุญุชูู ุงูุดุจูุงุช ุนูู ูุคุดุฑุงุช ุงูุงุฑุชูุงุน ุงููุงุฒูุฉ. </font><font style="vertical-align: inherit;">ูู ูุง ุชุจูู ููุง ูู ุฅุฌุจุงุฑ ุชุธููู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุถุงุฑูุณ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนูู </font><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงููุง. </font><font style="vertical-align: inherit;">ูู ุฃุฌู ุฃู ุชูุน ุงููุคุดุฑุงุช ูู ุฌูุงุฒ ุชุธููู ุงูุฌุฒุก ุ ูุญุชุงุฌ ุฃููุงู ุฅูู ุชูุฑูุฑูุง ุนุจุฑ ุฌูุงุฒ ุชุธููู ุงูููุฉ. </font><font style="vertical-align: inherit;">ูููููุง ุงูููุงู ุจุฐูู ูู ูุธููุฉ ุงูุฐุฑูุฉ ุงูุฎุงุตุฉ ุจูุง ุ ููุง ูุนููุง ูู Shader </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estuary</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุจุฅุถุงูุฉ ุญูู ุฅูู ุจููุฉ ุงูุฅุฏุฎุงู </font></font><code>float3 terrain</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุณุฎู ุฅููู </font></font><code>v.texcoord2.xyz</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> #pragma surface surf Standard fullforwardshadows vertex:vert #pragma target <span class="hljs-number"><span class="hljs-number">3.5</span></span> โฆ struct <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> { <span class="hljs-type"><span class="hljs-type">float4</span></span> color : COLOR; float3 worldPos; float3 terrain; }; <span class="hljs-type"><span class="hljs-type">void</span></span> vert (<span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> appdata_full v, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> data) { UNITY_INITIALIZE_OUTPUT(<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span>, data); data.terrain = v.texcoord2.xyz; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุฃุฎุฐ ุนููุฉ ุงููุตูููุฉ ุซูุงุซ ูุฑุงุช ููู ูุทุนุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุฏุนูุง ููุดุฆ ูุธููุฉ ููุงุฆูุฉ ูุฅูุดุงุก ุฅุญุฏุงุซูุงุช ุงููุณูุฌ ุ ูุฃุฎุฐ ุนููุงุช ูู ุตููู ูุชุนุฏูู ุนููุฉ ุจุฎุฑูุทุฉ ูุชูุทุนุฉ ูููุฑุณ ูุงุญุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">float4</span></span> GetTerrainColor (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>) { float3 uvw = float3(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos.xz * <span class="hljs-number"><span class="hljs-number">0.02</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.terrain[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>]); <span class="hljs-type"><span class="hljs-type">float4</span></span> c = UNITY_SAMPLE_TEX2DARRAY(_MainTex, uvw); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> c * <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.color[<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>]; } <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { โฆ }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูููููุง ุงูุนูู ูุน ุงููุชุฌู ููุตูููุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูุนู   - <code>color[0]</code>  <code>color.r</code> .  <code>color[1]</code>  <code>color.g</code> ,   . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงุณุชุฎุฏุงู ูุฐู ุงููุธููุฉ ุ ูููููุง ุจุจุณุงุทุฉ ุชุฌุฑุจุฉ ูุฌููุนุฉ ุงููููุณ ุซูุงุซ ูุฑุงุช ูุฏูุฌ ุงููุชุงุฆุฌ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { // float2 uv = <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos.xz * <span class="hljs-number"><span class="hljs-number">0.02</span></span>; fixed4 c = GetTerrainColor(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) + GetTerrainColor(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) + GetTerrainColor(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); o.Albedo = c.rgb * _Color; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/da9/2fa/577/da92fa577510b38d4d0cdb99db83aea0.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุงุญุฉ ูุฒุฎุฑูุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูููููุง ุฃู ูุฑุณู ุงููููุด ุจุงูุฒุฎุงุฑู. </font><font style="vertical-align: inherit;">ูุฎูุทูู ูุซู ุงูุฃููุงู ุงูุตูุจุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุณุชุฎุฏู ุฅุญุฏุงุซูุงุช ุงูุนุงูู ูููุณู ููุฃุดุนุฉ ููู ุงูุจููุณุฌูุฉ ุ ูุฅููุง ูุง ุชุชุบูุฑ ูุน ุงูุงุฑุชูุงุน. </font><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ุชูุชุฏ ุนูู ุทูู ุงูููุญุฏุฑุงุช ุงูุญุงุฏุฉ. </font><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุช ุงูููุงู ูุญุงูุฏุฉ ุฅูู ุญุฏ ูุง ููุชุบูุฑุฉ ุฌุฏูุง ุ ูุณุชููู ุงููุชุงุฆุฌ ููุจููุฉ. </font><font style="vertical-align: inherit;">ุฎูุงู ุฐูู ุ ูุญุตู ุนูู ุนูุงูุงุช ุชูุฏุฏ ูุจูุญุฉ ูุจูุฑุฉ. </font><font style="vertical-align: inherit;">ููููู ูุญุงููุฉ ุฅุฎูุงุฆูุง ุจุงุณุชุฎุฏุงู ููุฏุณุฉ ุฃู ูุณูุฌ ุฅุถุงูู ููููุญุฏุฑุงุช ุ ูููู ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ูู ูููู ุจุฐูู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุณุงุญ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุ ุนูุฏูุง ูุณุชุฎุฏู ุงูุฒุฎุงุฑู ุจุฏูุงู ูู ุงูุฃููุงู ุ ุณูููู ูู ุงูููุทูู ุชุบููุฑ ููุญุฉ ุงููุญุฑุฑ. </font><font style="vertical-align: inherit;">ูููููุง ุฅูุดุงุก ูุงุฌูุฉ ุฌูููุฉ ูููููุง ุญุชู ุนุฑุถ ููุงุฏ ุงูุฅุบุงุซุฉ ุ ููููู ุณุฃุฑูุฒ ุนูู ุงูุงุฎุชุตุงุฑุงุช ุงูุชู ุชุชูุงูู ูุน ููุท ุงููุฎุทุท ุงูุญุงูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/263/c52/c81/263c52c812c97de2b8095b6ca80a8f5d.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฎูุงุฑุงุช ุงูุฅุบุงุซุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุชุนุฏ ููุงู ุญุงุฌุฉ ูุฎุงุตูุฉ ุงูููู ุ ูุฐุง ุงุญุฐููุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public Color Color { // get { // return HexMetrics.colors[terrainTypeIndex]; // } // }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถูุง ุฅุฒุงูุฉ ูุฌููุนุฉ ูู ุงูุฃููุงู ูุงูุดูุฑุฉ ุงููุฑุชุจุทุฉ ุจูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public Color[] colors; โฆ void Awake () { HexMetrics.noiseSource = noiseSource; HexMetrics.InitializeHashGrid(seed); // HexMetrics.colors = colors; CreateMap(cellCountX, cellCountZ); } โฆ โฆ void OnEnable () { if (!HexMetrics.noiseSource) { HexMetrics.noiseSource = noiseSource; HexMetrics.InitializeHashGrid(seed); // HexMetrics.colors = colors; } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฃุฎูุฑูุง ุ ูุง ุญุงุฌุฉ ุฃูุถูุง ุฅูู ูุฌููุนุฉ ูู ุงูุฃููุงู </font></font><code>HexMetrics</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public static Color[] colors;</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฒุก 15: ุงููุณุงูุงุช </font></font></h1><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุฑุถ ุฎุทูุท ุงูุดุจูุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุชุจุฏูู ุจูู ูุถุนู ุงูุชุญุฑูุฑ ูุงูููุงุญุฉ. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุญุณุจ ุงููุณุงูุฉ ุจูู ุงูุฎูุงูุง. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌุฏ ุทุฑู ุญูู ุงูุนูุจุงุช. </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุญู ูุฃุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ุงูุชูุงููู ุงููุชุบูุฑุฉ ููููู. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุนุฏ ุฅูุดุงุก ุฎุฑุงุฆุท ุนุงููุฉ ุงูุฌูุฏุฉ ุ ุณูุจุฏุฃ ุงูุชููู. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/15b/b5d/65d/15bb5d65de19358da88e581cedad71cb.jpg"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุตุฑ ูุณุงุฑ ููุณ ุฏุงุฆูุง ูุณุชูููุง.</font></font></i> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุฑุถ ุงูุดุจูุฉ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุชูููุฐ ุงูุชููู ุนูู ุงูุฎุฑูุทุฉ ุจุงูุงูุชูุงู ูู ุฎููุฉ ุฅูู ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูููุตูู ุฅูู ููุงู ูุง ุ ุชุญุชุงุฌ ุฅูู ุงููุฑูุฑ ุนุจุฑ ุณูุณูุฉ ูู ุงูุฎูุงูุง. </font><font style="vertical-align: inherit;">ูุชุณููู ุชูุฏูุฑ ุงููุณุงูุงุช ุ ุฏุนูุง ูุถูู ุฎูุงุฑ ุนุฑุถ ุงูุดุจูุฉ ุงูุณุฏุงุณูุฉ ุงูุชู ุชุณุชูุฏ ุฅูููุง ุฎุฑูุทุชูุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุณูุฌ ุดุจูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุนุฏู ุงูุชุธุงู ุดุจูุฉ ุงูุฎุฑูุทุฉ ุ ูุฅู ุงูุดุจูุฉ ุงูุฃุณุงุณูุฉ ูุณุทุญุฉ ุชูุงููุง. </font><font style="vertical-align: inherit;">ูููููุง ุฅุธูุงุฑ ุฐูู ูู ุฎูุงู ุนุฑุถ ููุท ุงูุดุจูุฉ ุนูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูููู ุชุญููู ุฐูู ุจุงุณุชุฎุฏุงู ูุณูุฌ ุดุจูู ูุชูุฑุฑ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/3a7/74c/76e/3a774c76e29b57018450a8e21f5bf1fb.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฑุงุฑ ูุณูุฌ ุดุจูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชูู ุงููุณูุฌ ุงูููุถุญ ุฃุนูุงู ุนูู ุฌุฒุก ุตุบูุฑ ูู ุงูุดุจูุฉ ุงูุณุฏุงุณูุฉ ุงูุชู ุชุบุทู ุฎููุชูู 2 ร 2. </font><font style="vertical-align: inherit;">ูุฐู ุงูููุทูุฉ ูุณุชุทููุฉ ูููุณุช ูุฑุจุนุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุงููุณูุฌ ููุณู ูุฑุจุน ุ ูุจุฏู ุงูููุท ููุชุฏูุง. </font><font style="vertical-align: inherit;">ุนูุฏ ุฃุฎุฐ ุงูุนููุงุช ุ ูุญุชุงุฌ ุฅูู ุชุนููุถ ุฐูู.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุณูุงุท ุงูุดุจูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅุณูุงุท ููุด ุดุจูู ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ </font><font style="vertical-align: inherit;">ุฎุงุตูุฉ ูุณูุฌ ุฅูู </font><font style="vertical-align: inherit;">Shader </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terrain</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs nginx"> <span class="hljs-section"><span class="hljs-section">Properties</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">_Color</span></span> (<span class="hljs-string"><span class="hljs-string">"Color"</span></span>, Color) = (<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) _MainTex (<span class="hljs-string"><span class="hljs-string">"Terrain Texture Array"</span></span>, 2DArray) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} <span class="hljs-attribute"><span class="hljs-attribute">_GridTex</span></span> (<span class="hljs-string"><span class="hljs-string">"Grid Texture"</span></span>, 2D) = <span class="hljs-string"><span class="hljs-string">"white"</span></span> {} <span class="hljs-attribute"><span class="hljs-attribute">_Glossiness</span></span> (<span class="hljs-string"><span class="hljs-string">"Smoothness"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span> _Metallic (<span class="hljs-string"><span class="hljs-string">"Metallic"</span></span>, Range(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>)) = <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/283/708/6de/2837086dedff939d3380396c9146ddfc.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฏ ุงูุฅุบุงุซุฉ ุจูุณูุฌ ุดุจูู. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุฎุชุจุฑ ุงููุณูุฌ ุจุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช XZ ููุนุงูู ุ ุซู ุงุถุฑุจู ูู ุงูุจูุงุถ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ุฎุทูุท ุงูุดุจูุฉ ุนูู ุงููููุณ ุฑูุงุฏูุฉ ุ ูุฅู ูุฐุง ุณูุคุฏู ุฅูู ุชุดุงุจู ุงูููุท ูู ุงููููุด.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql"> sampler2D _GridTex; โฆ <span class="hljs-type"><span class="hljs-type">void</span></span> surf (<span class="hljs-keyword"><span class="hljs-keyword">Input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">inout</span></span> SurfaceOutputStandard o) { fixed4 c = GetTerrainColor(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) + GetTerrainColor(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) + GetTerrainColor(<span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); fixed4 grid = tex2D(_GridTex, <span class="hljs-keyword"><span class="hljs-keyword">IN</span></span>.worldPos.xz); o.Albedo = c.rgb * grid * _Color; o.Metallic = _Metallic; o.Smoothness = _Glossiness; o.Alpha = ca; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/972/a3e/432/972a3e4323541d1195904c9777a29e07.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุฑุจ ุงูุจูุฏู ุจุดุจูุฉ ุฏูููุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ููุงุณ ุงูููุท ุจุญูุซ ูุชุทุงุจู ูุน ุงูุฎูุงูุง ูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุงููุณุงูุฉ ุจูู ูุฑุงูุฒ ุงูุฎูุงูุง ุงููุฌุงูุฑุฉ ูู 15 ุ ููุฌุจ ูุถุงุนูุชูุง ูุชุญุฑูู ุฎููุชูู. </font><font style="vertical-align: inherit;">ุฃู ุฃููุง ุจุญุงุฌุฉ ุฅูู ุชูุณูู ุฅุญุฏุงุซูุงุช ุงูุดุจูุฉ V ุนูู 30. ูุจูุบ ูุตู ุงููุทุฑ ุงูุฏุงุฎูู ููุฎูุงูุง 5โ3 ุ ููุชุญุฑูู ุฎููุชูู ุฅูู ุงููููู ุ ูุญุชุงุฌ ุฅูู ุฃุฑุจุนุฉ ุฃุถุนุงู ุฐูู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูู ุงูุถุฑูุฑู ุชูุณูู ุฅุญุฏุงุซูุงุช ุดุจูุฉ U ุนูู 20โ3.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs markdown"> float2 gridUV = IN.worldPos.xz; gridUV.x <span class="hljs-emphasis"><span class="hljs-emphasis">*= 1 / (4 *</span></span> 8.66025404); gridUV.y <span class="hljs-emphasis"><span class="hljs-emphasis">*= 1 / (2 *</span></span> 15.0); fixed4 grid = tex2D(_GridTex, gridUV);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/454/1ba/191/4541ba19123145c27422e2b90b52aa6f.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฌู ุงูุดุจูุฉ ุงูุตุญูุญ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุชุชูุงูู ุฎุทูุท ุงูุดุจูุฉ ูุน ุฎูุงูุง ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุซู ููุงุฏ ุงูุฅุบุงุซุฉ ุ ูุชุฌุงูููู ุงูุงุฑุชูุงุน ุ ูุฐูู ุณูุชู ุชูุฏูุฏ ุงูุฎุทูุท ุนูู ุทูู ุงูููุญุฏุฑุงุช.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/98a/708/906/98a7089069b6d04bc708851045c9fe7a.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุณูุงุท ุนูู ุงูุฎูุงูุง ุฐุงุช ุงูุงุฑุชูุงุน. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุงุฏุฉ ูุง ูููู ุชุดูู ุงูุดุจูุฉ ููุณ ุณูุฆูุง ููุบุงูุฉ ุ ุฎุงุตุฉ ุนูุฏ ุงููุธุฑ ุฅูู ุฎุฑูุทุฉ ูู ูุณุงูุฉ ุทูููุฉ.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/287/5ac/690/2875ac690eb796bf00a86b48d193aec8.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุดุจูุฉ ูู ุงููุณุงูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅุฏุฑุงุฌ ุงูุดุจูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃู ุนุฑุถ ุงูุดุจูุฉ ููุงุณุจ ุ ุฅูุง ุฃูู ููุณ ูุทููุจูุง ุฏุงุฆููุง. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูุฌุจ ุฅููุงู ุชุดุบููู ุนูุฏ ุงูุชูุงุท ููุทุฉ ุดุงุดุฉ. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ููุถู ุงูุฌููุน ุฑุคูุฉ ุงูุดุจูุฉ ุจุงุณุชูุฑุงุฑ. </font><font style="vertical-align: inherit;">ูุฐูู ุฏุนููุง ูุฌุนูู ุงุฎุชูุงุฑููุง. </font><font style="vertical-align: inherit;">ุณูุถูู ุงูุชูุฌูู ูุชุนุฏุฏ ุงููููุงุช ุฅูู ุงูุชุธููู ูุฅูุดุงุก ุฎูุงุฑุงุช ูุน ูุจุฏูู ุดุจูุฉ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ุณูู ูุณุชุฎุฏู ุงููููุฉ ุงูุฃุณุงุณูุฉ </font></font><code>GRID_ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุชู ูุตู ุชุฌููุน ุงูุชุธููู ุงูุดุฑุทู ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rendering 5 ุ ุฃุถูุงุก ูุชุนุฏุฏุฉ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs css"> <span class="hljs-selector-id"><span class="hljs-selector-id">#pragma</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">surface</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">surf</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Standard</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">fullforwardshadows</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vertex</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:vert</span></span> <span class="hljs-selector-id"><span class="hljs-selector-id">#pragma</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">target</span></span> 3<span class="hljs-selector-class"><span class="hljs-selector-class">.5</span></span> <span class="hljs-selector-id"><span class="hljs-selector-id">#pragma</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">multi_compile</span></span> _ <span class="hljs-selector-tag"><span class="hljs-selector-tag">GRID_ON</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏ ุงูุฅุนูุงู ุนู ูุชุบูุฑ ุ ูููู </font></font><code>grid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃููุงู ุจุชุนูููู ูููุฉ 1. ููุชูุฌุฉ ูุฐูู ุ ุณูุชู ุชุนุทูู ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ุซู ุณูููู ุจุชุฌุฑุจุฉ ูุณูุฌ ุงูุดุจูุฉ ููุท ูููุชุบูุฑ ุจุงุณุชุฎุฏุงู ูููุฉ ุฑุฆูุณูุฉ ูุญุฏุฏุฉ </font></font><code>GRID_ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="hljs mel"> fixed4 <span class="hljs-keyword"><span class="hljs-keyword">grid</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span>; #<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> defined(GRID_ON) float2 gridUV = IN.worldPos.xz; gridUV.x *= <span class="hljs-number"><span class="hljs-number">1</span></span> / (<span class="hljs-number"><span class="hljs-number">4</span></span> * <span class="hljs-number"><span class="hljs-number">8.66025404</span></span>); gridUV.y *= <span class="hljs-number"><span class="hljs-number">1</span></span> / (<span class="hljs-number"><span class="hljs-number">2</span></span> * <span class="hljs-number"><span class="hljs-number">15.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">grid</span></span> = tex2D(_GridTex, gridUV); #endif o.Albedo = c.rgb * <span class="hljs-keyword"><span class="hljs-keyword">grid</span></span> * _Color;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง </font></font><code>GRID_ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุฏู ุชุถููู </font><font style="vertical-align: inherit;">ุงููููุฉ ุงูุฑุฆูุณูุฉ </font><font style="vertical-align: inherit;">ูู ุชุธููู ุงูุชุถุงุฑูุณ ุ ุณุชุฎุชูู ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ูุชููููู ูุฑุฉ ุฃุฎุฑู ุ ุณูุถูู ููุชุงุญูุง ุฅูู ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุฑุฑ ุงูุฎุฑุงุฆุท. </font><font style="vertical-align: inherit;">ูุชุญููู ุฐูู ุ </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุฃุญุตู ุนูู ุฑุงุจุท ุฅูู ูุงุฏุฉ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terrain</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุทุฑููุฉ ูุชูููู ุงููููุฉ ุงูุฑุฆูุณูุฉ ุฃู ุชุนุทูููุง </font></font><code>GRID_ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Material terrainMaterial; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShowGrid</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> visible</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (visible) { terrainMaterial.EnableKeyword(<span class="hljs-string"><span class="hljs-string">"GRID_ON"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { terrainMaterial.DisableKeyword(<span class="hljs-string"><span class="hljs-string">"GRID_ON"</span></span>); } }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7d0/d53/873/7d0d53873a0aace69be804dcbf22d7ce.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุฑุฑ ูุณุฏุณุงุช ูุณูุฑุฉ ุจุงูุฅุดุงุฑุฉ ุฅูู ุงููุงุฏุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ููุชุงุญ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุดุจูุฉ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู </font><font style="vertical-align: inherit;">ูุฑุจุทู ุจุงูุทุฑููุฉ </font></font><code>ShowGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/56b/38a/6b6/56b38a6b6792eb8b89fb3936a55e9194.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุจุฏูู ุงูุดุจูุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุญูุธ ุงูุฏููุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูู ูุถุน ุงูุชุดุบูู ุ ูููููุง ุชุจุฏูู ุนุฑุถ ุงูุดุจูุฉ. </font><font style="vertical-align: inherit;">ูู ุงูุงุฎุชุจุงุฑ ุงูุฃูู ุ ูุชู ุฅููุงู ุชุดุบูู ุงูุดุจูุฉ ูุจุฏุฆููุง ูุชุตุจุญ ูุฑุฆูุฉ ุนูุฏ ุชุดุบูู ุงูููุชุงุญ. </font><font style="vertical-align: inherit;">ุนูุฏ ุฅููุงู ุชุดุบููู ุ ุณุชุฎุชูู ุงูุดุจูุฉ ูุฑุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ุฅุฐุง ุฎุฑุฌูุง ูู ูุถุน ุงูุชุดุบูู ุนูุฏูุง ุชููู ุงูุดุจูุฉ ูุฑุฆูุฉ ุ ูุณูุชู ุฅุนุงุฏุฉ ุชุดุบูููุง ูู ุงููุฑุฉ ุงูุชุงููุฉ ุงูุชู ุชููู ูููุง ุจุชุดุบูู ูุถุน ุงูุชุดุบูู ุ ุนูู ุงูุฑุบู ูู ุฅููุงู ุชุดุบูู ุงูููุชุงุญ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ูุฃููุง ูุบูุฑ ุงููููุฉ ุงูุฑุฆูุณูุฉ ูููุงุฏ </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุถุงุฑูุณ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุนุงูุฉ </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูููู ุจุชุญุฑูุฑ ุงูุฃุตู ุงููุงุฏู ุ ูุฐูู ูุชู ุญูุธ ุงูุชุบููุฑ ูู ูุญุฑุฑ ุงููุญุฏุฉ. </font><font style="vertical-align: inherit;">ูู ูุชู ุญูุธู ูู ุงูุชุฌููุน. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจุฏุก ุงููุนุจุฉ ุฏุงุฆููุง ุจุฏูู ุดุจูุฉ ุ ุณูุนุทู ุงููููุฉ ุงูุฑุฆูุณูุฉ </font></font><code>GRID_ON</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู Awake </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { terrainMaterial.DisableKeyword(<span class="hljs-string"><span class="hljs-string">"GRID_ON"</span></span>); }</code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุถุน ุงูุชุญุฑูุฑ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุฃุฑุฏูุง ุงูุชุญูู ูู ุงูุญุฑูุฉ ุนูู ุงูุฎุฑูุทุฉ ุ ูุนูููุง ุงูุชูุงุนู ูุนูุง. </font><font style="vertical-align: inherit;">ูุญุฏ ุฃุฏูู ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุงูุฎููุฉ ูููุทุฉ ุจุฏุงูุฉ ูููุณุงุฑ. </font><font style="vertical-align: inherit;">ูููู ุนูุฏ ุงูููุฑ ููู ุฎููุฉ ุ ุณูุชู ุชุญุฑูุฑูุง. </font><font style="vertical-align: inherit;">ูููููุง ุชุนุทูู ุฌููุน ุฎูุงุฑุงุช ุงูุชุนุฏูู ูุฏูููุง ุ ูููู ูุฐุง ุบูุฑ ูุฑูุญ. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ูุฑูุฏ ุฅุฌุฑุงุก ุญุณุงุจุงุช ุงูุฅุฒุงุญุฉ ุฃุซูุงุก ุชุญุฑูุฑ ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนูุง ูุถูู ููุชุงุญูุง ูุญุฏุฏ ูุง ุฅุฐุง ููุง ูู ูุถุน ุงูุชุญุฑูุฑ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฑูุฑ ุงูุชุจุฏูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุฅูู </font></font><code>HexMapEditor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูู ุงูููุทูู </font></font><code>editMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุทุฑููุฉ ุงูุชู ุชุญุฏุฏู. </font><font style="vertical-align: inherit;">ุซู ุฃุถู ููุชุงุญูุง ุขุฎุฑ ุฅูู ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุชุญูู ููู. </font><font style="vertical-align: inherit;">ููุจุฏุฃ ุจูุถุน ุงูุชููู ุ ุฃู ุฃูู ุณูุชู ุชุนุทูู ูุถุน ุงูุชุญุฑูุฑ ุจุดูู ุงูุชุฑุงุถู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> editMode; โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetEditMode</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toggle</span></span></span><span class="hljs-function">)</span></span> { editMode = toggle; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1bf/19b/ace/1bf19baceed0ecfa766dbe0386ed38d3.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุงุญ ูุถุน ุงูุชุญุฑูุฑ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุนุทูู ุงูุชุนุฏูู ุญููุง ุ ุงุฌุนู ุงูููุงููุฉ </font></font><code>EditCells</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุชูุฏ ุนูู </font></font><code>editMode</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleInput</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Ray inputRay = Camera.main.ScreenPointToRay(Input.mousePosition); RaycastHit hit; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(inputRay, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> hit)) { HexCell currentCell = hexGrid.GetCell(hit.point); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previousCell &amp;&amp; previousCell != currentCell) { ValidateDrag(currentCell); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { isDrag = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (editMode) { EditCells(currentCell); } previousCell = currentCell; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { previousCell = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุณููุงุช ุงูุชุตุญูุญ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุงูุขู ููุณ ูุฏููุง ูุญุฏุงุช ููุชุญุฑู ุญูู ุงูุฎุฑูุทุฉ. </font><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู ุ ูุชุตูุฑ ูุณุงูุงุช ุงูุญุฑูุฉ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ููููู ุงุณุชุฎุฏุงู ุชุณููุงุช ุงูุฎูุงูุง ุงูููุฌูุฏุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุณูุฌุนููุง ูุฑุฆูุฉ ุนูุฏ ุชุนุทูู ูุถุน ุงูุชุญุฑูุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetEditMode</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> toggle</span></span></span><span class="hljs-function">)</span></span> { editMode = toggle; hexGrid.ShowUI(!toggle); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุจุฏุฃ ุจูุถุน ุงูุชููู ุ ูุฌุจ ุชูููู ุงูุชุตูููุงุช ุงูุงูุชุฑุงุถูุฉ. </font></font><code>HexGridChunk.Awake</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนุทููุง </font><font style="vertical-align: inherit;">ุญุงูููุง </font><font style="vertical-align: inherit;">ุ ูููู ูุง ูุฌุจ ุนููู ูุนู ุฐูู ุจุนุฏ ุงูุขู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Awake</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { gridCanvas = GetComponentInChildren&lt;Canvas&gt;(); cells = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HexCell[HexMetrics.chunkSizeX * HexMetrics.chunkSizeZ]; <span class="hljs-comment"><span class="hljs-comment">// ShowUI(false); }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/730/666/90c/73066690c998f0715fb22356a0374fed.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุณูู ุงูุชุณููุงุช. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุตุจุญ ุฅุญุฏุงุซูุงุช ุงูุฎููุฉ ูุฑุฆูุฉ ูุจุงุดุฑุฉ ุจุนุฏ ุชุดุบูู ูุถุน ุงูุชุดุบูู. </font><font style="vertical-align: inherit;">ููููุง ูุณูุง ุจุญุงุฌุฉ ุฅูู ุฅุญุฏุงุซูุงุช ุ ูุณุชุฎุฏู ุงูุชุณููุงุช ูุนุฑุถ ุงููุณุงูุงุช. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃู ูุฐุง ูุชุทูุจ ุฑูููุง ูุงุญุฏูุง ููุท ููู ุฎููุฉ ุ ููููู ุฒูุงุฏุฉ ุญุฌู ุงูุฎุท ุจุญูุซ ูููู ูุฑุงุกุชู ุจุดูู ุฃูุถู. </font><font style="vertical-align: inherit;">ูู ุจุชุบููุฑ ุงูุฅุนุฏุงุฏ ุงูุฃุณุงุณู ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hex Cell Label</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุญูุซ ูุณุชุฎุฏู ุงูุฎุท ุงูุบุงูู ุจุงูุญุฌู 8.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8ea/008/aa0/8ea008aa075686891f8815148c70ba06.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุงูุงุช ุฐุงุช ุญุฌู ุงูุฎุท ุงูุบุงูู 8.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุขู ุจุนุฏ ุชุดุบูู ูุถุน ุงูุชุดุบูู ุ ุณูุฑู ุนูุงูุงุช ูุจูุฑุฉ. </font><font style="vertical-align: inherit;">ููุท ุงูุฅุญุฏุงุซูุงุช ุงูุฃููู ููุฎููุฉ ูุฑุฆูุฉ ุ ููุง ูุชู ูุถุน ุงูุจุงูู ูู ุงูููุตู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/745/baf/016/745baf0160c2f9cf8aaae974ff285d16.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุนูุงูุงุช ุงููุจูุฑุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูู ูุนุฏ ุจุญุงุฌุฉ ุฅูู ุงูุฅุญุฏุงุซูุงุช ุ ูุณูุญุฐู </font></font><code>HexGrid.CreateCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููููุฉ </font><font style="vertical-align: inherit;">ูู </font><font style="vertical-align: inherit;">ุงููููุฉ </font></font><code>label.text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateCell</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> z, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i</span></span></span><span class="hljs-function">)</span></span> { โฆ Text label = Instantiate&lt;Text&gt;(cellLabelPrefab); label.rectTransform.anchoredPosition = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector2(position.x, position.z); <span class="hljs-comment"><span class="hljs-comment">// label.text = cell.coordinates.ToStringOnSeparateLines(); cell.uiRect = label.rectTransform; โฆ }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ุฅุฒุงูุฉ ุชุจุฏูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุตูููุงุช</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงูุทุฑููุฉ ุงููุฑุชุจุทุฉ ุจู </font><font style="vertical-align: inherit;">ูู ูุงุฌูุฉ ุงููุณุชุฎุฏู </font></font><code>HexMapEditor.ShowUI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// public void ShowUI (bool visible) { // hexGrid.ShowUI(visible); // }</span></span></code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6e0/4d4/652/6e04d46522e65937a9324e0f3498d480.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุนุฏ ููุชุงุญ ุงูุฃุณููุจ ุฃูุซุฑ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูุฌุงุฏ ุงููุณุงูุงุช </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุฃุตุจุญ ูุฏููุง ูุถุน ุงูุชููู ุงููููุฒ ุ ูููููุง ุงูุจุฏุก ูู ุนุฑุถ ุงููุณุงูุงุช. </font><font style="vertical-align: inherit;">ุณูุญุฏุฏ ุฎููุฉ ุซู ูุนุฑุถ ุงููุณุงูุฉ ูู ูุฐู ุงูุฎููุฉ ุฅูู ุฌููุน ุงูุฎูุงูุง ุนูู ุงูุฎุฑูุทุฉ.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุฑุถ ุงููุณุงูุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุชุจุน ุงููุณุงูุฉ ุฅูู ุงูุฎููุฉ ุ ุฃุถู ุฅูู </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญูู ุงูุตุญูุญ </font></font><code>distance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณูุดูุฑ ุฅูู ุงููุณุงูุฉ ุจูู ูุฐู ุงูุฎููุฉ ูุงูุฎููุฉ ุงููุญุฏุฏุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุจุงููุณุจุฉ ููุฎููุฉ ุงููุญุฏุฏุฉ ููุณูุง ุ ุณุชููู ุตูุฑูุง ุ ูุงูุฌุงุฑ ุงููุจุงุดุฑ ูู 1 ุ ูููุฐุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูุฏูุง ูุชู ุชุนููู ุงููุณุงูุฉ ุ ูุฌุจ ุนูููุง ุชุญุฏูุซ ุชุณููุฉ ุงูุฎููุฉ ูุนุฑุถ ูููุชูุง. </font></font><code>HexCell</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏูู ุฅุดุงุฑุฉ ุฅูู </font></font><code>RectTransform</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฆู ูุงุฌูุฉ ุงููุณุชุฎุฏู. </font><font style="vertical-align: inherit;">ุณูุญุชุงุฌ ุฅูู ุงูุงุชุตุงู ุจู </font></font><code>GetComponent&lt;Text&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุตูู ุฅูู ุงูุฒูุฒุงูุฉ. </font><font style="vertical-align: inherit;">ุถุน ูู ุงุนุชุจุงุฑู ูุง </font></font><code>Text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฌุฏ ูู ูุณุงุญุฉ ุงูุงุณู </font></font><code>UnityEngine.UI</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐุง ุงุณุชุฎุฏูู ูู ุจุฏุงูุฉ ุงูุจุฑูุงูุฌ ุงููุตู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateDistanceLabel</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Text label = uiRect.GetComponent&lt;Text&gt;(); label.text = distance.ToString(); }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุง ูุฌุจ ุฃู ูุญุชูุธ ุจุฑุงุจุท ูุจุงุดุฑ ุฅูู ูููู ุงููุตุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> ,   .     ,       ,  ,    .   ,      . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููู ุจุชุนููู ุงูุฎุงุตูุฉ ุงูุนุงูุฉ ูุงุณุชูุงู ูุชุนููู ุงููุณุงูุฉ ุฅูู ุงูุฎููุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุชุญุฏูุซ ุงูุชุณููุฉ ุงูุฎุงุตุฉ ุจูุง. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Distance { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> distance; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { distance = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; UpdateDistanceLabel(); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุฅูู </font></font><code>HexGrid</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ ุงูุนุงูุฉ </font></font><code>FindDistancesTo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุณุชุฎุฏุงู ูุนููุฉ ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ุณูููู ุจุจุณุงุทุฉ ุจุชุนููู ูุณุงูุฉ ุงูุตูุฑ ููู ุฎููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindDistancesTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Distance = <span class="hljs-number"><span class="hljs-number">0</span></span>; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูู ูุชู ุชูููู ูุถุน ุงูุชุญุฑูุฑ ุ ูุฅููุง </font></font><code>HexMapEditor.HandleInput</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูู ุทุฑููุฉ ุฌุฏูุฏุฉ ูุน ุงูุฎููุฉ ุงูุญุงููุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (editMode) { EditCells(currentCell); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { hexGrid.FindDistancesTo(currentCell); }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงููุณุงูุงุช ุจูู ุงูุฅุญุฏุงุซูุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูู ูุถุน ุงูุชููู ุ ุจุนุฏ ููุณ ุฃุญุฏูุง ุ ุชุนุฑุถ ุฌููุน ุงูุฎูุงูุง ุตูุฑูุง. </font><font style="vertical-align: inherit;">ูููู ุ ุจุงูุทุจุน ุ ูุฌุจ ุนูููู ุนุฑุถ ุงููุณุงูุฉ ุงูุญููููุฉ ููุฎููุฉ. </font><font style="vertical-align: inherit;">ูุญุณุงุจ ุงููุณุงูุฉ ุจููููุง ุ ูููููุง ุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ูุฐูู ุ ุงูุชุฑุถ ุฃู </font></font><code>HexCoordinates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏููุง ุทุฑููุฉ </font></font><code>DistanceTo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุณุชุฎุฏููุง </font></font><code>HexGrid.FindDistancesTo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindDistancesTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Distance = cell.coordinates.DistanceTo(cells[i].coordinates); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ุงูุขู ุฅูู </font></font><code>HexCoordinates</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font></font><code>DistanceTo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฌุจ ุนููู ููุงุฑูุฉ ุฅุญุฏุงุซูุงุชู โโูุน ุฅุญุฏุงุซูุงุช ูุฌููุนุฉ ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ููุจุฏุฃ ููุท ุจููุงุณ X ุ ูุณูุทุฑุญ ุฅุญุฏุงุซูุงุช X ูู ุจุนุถูุง ุงูุจุนุถ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DistanceTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCoordinates other</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x - other.x; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ุฅุฒุงุญุฉ ุนูู ุทูู X ุจุงููุณุจุฉ ููุฎููุฉ ุงููุญุฏุฏุฉ. </font><font style="vertical-align: inherit;">ููู ูุง ูููู ุฃู ุชููู ุงููุณุงูุงุช ุณุงูุจุฉ ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ุฅุฑุฌุงุน ุงููุฑู ุงูุฅุญุฏุงุซู X modulo.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x &lt; other.x ? other.x - x : x - other.x;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/fdb/c62/16c/fdbc6216c12ae4a38ff7edaba203116e.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุงูุงุช ุนูู ุทูู X.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฐุง ูุญุตู ุนูู ุงููุณุงูุงุช ุงูุตุญูุญุฉ ููุท ุฅุฐุง ุฃุฎุฐูุง ูู ุงูุงุนุชุจุงุฑ ุจูุนุฏูุง ูุงุญุฏูุง ููุท. </font><font style="vertical-align: inherit;">ูููู ููุงู ุซูุงุซุฉ ุฃุจุนุงุฏ ูู ุดุจูุฉ ุงูุณุฏุงุณูุงุช. </font><font style="vertical-align: inherit;">ูุฐุง ุฏุนููุง ูุฌูุน ุงููุณุงูุงุช ูุฌููุน ุงูุฃุจุนุงุฏ ุงูุซูุงุซุฉ ููุฑู ูุง ูููุญูุง ุฅูุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (x &lt; other.x ? other.x - x : x - other.x) + (Y &lt; other.Y ? other.Y - Y : Y - other.Y) + (z &lt; other.z ? other.z - z : z - other.z);</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ffd/170/ac0/ffd170ac0b133a9b589e3dea9d6fd2b3.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฌููุน ูุณุงูุงุช XYZ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุถุญ ุฃููุง ูุญุตู ุนูู ุถุนู ุงููุณุงูุฉ. </font><font style="vertical-align: inherit;">ุฃู ููุญุตูู ุนูู ุงููุณุงูุฉ ุงูุตุญูุญุฉ ุ ูุฌุจ ุชูุณูู ูุฐุง ุงููุจูุบ ุฅูู ุงููุตู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((x &lt; other.x ? other.x - x : x - other.x) + (Y &lt; other.Y ? other.Y - Y : Y - other.Y) + (z &lt; other.z ? other.z - z : z - other.z)) / <span class="hljs-number"><span class="hljs-number">2</span></span>;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9bd/37d/353/9bd37d3535471f748d31be64ce897c17.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงูุงุช ุญููููุฉ.</font></font></i> <br><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง ูุณุงูู ุงููุฌููุน ุถุนู ุงููุณุงูุฉุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ,       .      ,  (1, โ3, 2).       .      ,       .      .   ,            .         . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/09e/533/197/09e533197dfc487db1c5b91f92fd6ba8.png"></div><br> <i> .</i> </div></div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุนูู ูุน ุงูุนูุจุงุช </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุชูุงูู ุงููุณุงูุงุช ุงููุญุณูุจุฉ ูู ูุจููุง ูุน ุฃูุตุฑ ุงููุณุงุฑุงุช ูู ุงูุฎููุฉ ุงููุญุฏุฏุฉ ุฅูู ุงูุฎููุฉ ุงูุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุง ูููููุง ุฅูุฌุงุฏ ุทุฑููุฉ ุฃูุตุฑ. </font><font style="vertical-align: inherit;">ูููู ูู ุงููุคูุฏ ุฃู ุชููู ูุฐู ุงููุณุงุฑุงุช ุตุญูุญุฉ ุฅุฐุง ูู ูุญุธุฑ ุงููุณุงุฑ ุฃู ุดูุก. </font><font style="vertical-align: inherit;">ูููู ููููุญุฏุฑุงุช ูุงูููุงู ูุบูุฑูุง ูู ุงูุนูุงุฆู ุฃู ุชุฌุนููุง ูุชุฌูู. </font><font style="vertical-align: inherit;">ุฑุจูุง ูุง ูููู ุงููุตูู ุฅูู ุจุนุถ ุงูุฎูุงูุง ุนูู ุงูุฅุทูุงู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฅูุฌุงุฏ ุทุฑููุฉ ููุชุบูุจ ุนูู ุงูุนูุจุงุช ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ููุฌ ูุฎุชูู ุจุฏูุงู ูู ูุฌุฑุฏ ุญุณุงุจ ุงููุณุงูุฉ ุจูู ุงูุฅุญุฏุงุซูุงุช. </font><font style="vertical-align: inherit;">ูู ูุนุฏ ุจุฅููุงููุง ูุญุต ูู ุฎููุฉ ุนูู ุญุฏุฉ. </font><font style="vertical-align: inherit;">ุณูุชุนูู ุนูููุง ุงูุจุญุซ ูู ุงูุฎุฑูุทุฉ ุญุชู ูุฌุฏ ูู ุฎููุฉ ูููู ุงููุตูู ุฅูููุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุตููุฑ ุงูุจุญุซ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุจุญุซ ุนู ุงูุฎุฑุงุฆุท ูู ุนูููุฉ ุชูุฑุงุฑูุฉ. </font><font style="vertical-align: inherit;">ูููู ูุง ูููู ุจู ุ ุณูููู ูู ุงููููุฏ ุฑุคูุฉ ูู ูุฑุญูุฉ ูู ูุฑุงุญู ุงูุจุญุซ. </font><font style="vertical-align: inherit;">ูููููุง ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุญููู ุฎูุงุฑุฒููุฉ ุงูุจุญุซ ุฅูู coroutine ุ ูุงูุชู ูุญุชุงุฌ ุฅูู ูุณุงุญุฉ ุจุญุซ ููุง </font></font><code>System.Collections</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุนุฏู ุงูุชุญุฏูุซ 60 ุชูุฑุงุฑูุง ูู ุงูุซุงููุฉ ุตุบูุฑ ุจูุง ูููู ููุฑู ูุง ูุญุฏุซ ุ ููู ูุณุชุบุฑู ุงูุจุญุซ ุนูู ุฎุฑูุทุฉ ุตุบูุฑุฉ ููุชูุง ุทูููุงู.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindDistancesTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { StartCoroutine(Search(cell)); } <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { WaitForSeconds delay = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WaitForSeconds(<span class="hljs-number"><span class="hljs-number">1</span></span> / <span class="hljs-number"><span class="hljs-number">60f</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> delay; cells[i].Distance = cell.coordinates.DistanceTo(cells[i].coordinates); } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฃู ุจุญุซูุง ูุงุญุฏูุง ูุดุทูุง ููุท ูู ุฃู ููุช. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุจู ุงูุจุฏุก ูู ุจุญุซ ุฌุฏูุฏ ุ ูููู ุฌููุน coroutines.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindDistancesTo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { StopAllCoroutines(); StartCoroutine(Search(cell)); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุญุชุงุฌ ุฅูู ุฅููุงู ุงูุจุญุซ ุนูุฏ ุชุญููู ุฎุฑูุทุฉ ุฌุฏูุฏุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">BinaryReader reader, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> header</span></span></span><span class="hljs-function">)</span></span> { StopAllCoroutines(); โฆ }</code> </pre> <br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุชุณุงุน ูุทุงู ุงูุจุญุซ ุงูุฃูู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ูุจู ุฃู ูุจุฏุฃ ุงูุจุญุซ ุ ูุนูู ุฃู ุงููุณุงูุฉ ุฅูู ุงูุฎููุฉ ุงููุญุฏุฏุฉ ูู ุตูุฑ. ูุจุทุจูุนุฉ ุงูุญุงู ุ ูุฅู ุงููุณุงูุฉ ุฅูู ุฌููุน ุฌูุฑุงููุง ูู 1 ุ ุฅุฐุง ูุงู ูู ุงููููู ุงููุตูู ุฅูููู. ุซู ูููููุง ุฅููุงุก ูุธุฑุฉ ุนูู ุฃุญุฏ ูุคูุงุก ุงูุฌูุฑุงู. ูุฐู ุงูุฎููุฉ ุนูู ุงูุฃุฑุฌุญ ููุง ุฌูุฑุงููุง ุงูุฐูู ูููู ุงููุตูู ุฅูููู ุ ูุงูุฐูู ูู ูุชู ุญุณุงุจ ุงููุณุงูุฉ ุงูุฎุงุตุฉ ุจูู ุญุชู ุงูุขู. ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููุฌุจ ุฃู ุชููู ุงููุณุงูุฉ ุฅูู ูุคูุงุก ุงูุฌูุฑุงู 2. ูููููุง ุชูุฑุงุฑ ูุฐู ุงูุนูููุฉ ูุฌููุน ุงูุฌูุฑุงู ุนูู ูุณุงูุฉ 1. ุจุนุฏ ุฐูู ุ ููุฑุฑูุง ูุฌููุน ุงูุฌูุฑุงู ุนูู ูุณุงูุฉ 2. ูููุฐุง ุ ุญุชู ูุตู ุฅูู ุฌููุน ุงูุฎูุงูุง.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ุฃููุง ุฃููุงู ูุฌุฏ ุฌููุน ุงูุฎูุงูุง ุนูู ูุณุงูุฉ 1 ุ ุซู ูุฌุฏ ูู ุดูุก ุนูู ูุณุงูุฉ 2 ุ ุซู ุนูู ูุณุงูุฉ 3 ุ ูููุฐุง ุ ุญุชู ููุชูู. </font><font style="vertical-align: inherit;">ูุถูู ูุฐุง ุงูุนุซูุฑ ุนูู ุฃุตุบุฑ ูุณุงูุฉ ููู ุฎููุฉ ูููู ุงููุตูู ุฅูููุง. </font><font style="vertical-align: inherit;">ูุฐู ุงูุฎูุงุฑุฒููุฉ ุชุณูู ุงูุจุญุซ ุงูุฃูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชุนูู ุ ูุญุชุงุฌ ุฅูู ูุนุฑูุฉ ูุง ุฅุฐุง ููุง ูุฏ ุญุฏุฏูุง ุจุงููุนู ุงููุณุงูุฉ ุฅูู ุงูุฎููุฉ. </font><font style="vertical-align: inherit;">ุบุงูุจูุง ูุง ูุชู ูุถุน ุงูุฎูุงูุง ูู ูุฌููุนุฉ ุชุณูู ูุฌููุนุฉ ุฌุงูุฒุฉ ุฃู ูุบููุฉ. </font><font style="vertical-align: inherit;">ูููู ูููููุง ุชุญุฏูุฏ ุงููุณุงูุฉ ุฅูู ุงูุฎููุฉ </font></font><code>int.MaxValue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฅุดุงุฑุฉ ุฅูู ุฃููุง ูู ูุฒูุฑูุง ุจุนุฏ. </font><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุฐูู ูุฌููุน ุงูุฎูุงูุง ูุจุงุดุฑุฉ ูุจู ุฅุฌุฑุงุก ุงูุจุญุซ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Distance = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; } โฆ }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุฃูุถูุง ุงุณุชุฎุฏุงู ูุฐุง ูุฅุฎูุงุก ุฌููุน ุงูุฎูุงูุง ุบูุฑ ุงููุฑุบูุจุฉ ุนู ุทุฑูู ุงูุชุบููุฑ </font></font><code>HexCell.UpdateDistanceLabel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ุณูุจุฏุฃ ูู ุจุญุซ ุนูู ุฎุฑูุทุฉ ูุงุฑุบุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateDistanceLabel</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Text label = uiRect.GetComponent&lt;Text&gt;(); label.text = distance == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue ? <span class="hljs-string"><span class="hljs-string">""</span></span> : distance.ToString(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุชุชุจุน ุงูุฎูุงูุง ุงูุชู ูุฌุจ ุฒูุงุฑุชูุง ุ ูุงูุชุฑุชูุจ ุงูุฐู ุชูุช ุฒูุงุฑุชูุง. </font><font style="vertical-align: inherit;">ุบุงูุจูุง ูุง ุชุณูู ูุฐู ุงููุฌููุนุฉ ุจุญุฏูุฏ ุฃู ูุฌููุนุฉ ููุชูุญุฉ. </font><font style="vertical-align: inherit;">ูุญุชุงุฌ ููุท ุฅูู ูุนุงูุฌุฉ ุงูุฎูุงูุง ุจููุณ ุงูุชุฑุชูุจ ุงูุฐู ุงูุชูููุง ุจู. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ููููู ุงุณุชุฎุฏุงู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ </font></font><code>Queue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุงูุชู ุชุนุฏ ุฌุฒุกูุง ูู ูุณุงุญุฉ ุงูุงุณู </font></font><code>System.Collections.Generic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุณุชููู ุงูุฎููุฉ ุงููุญุฏุฏุฉ ูู ุงูุฃููู ุงูุชู ูุชู ูุถุนูุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุฐู ูุณุชููู ุนูู ูุณุงูุฉ 0.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-function">IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell cell</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; cells.Length; i++) { cells[i].Distance = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; } WaitForSeconds delay = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WaitForSeconds(<span class="hljs-number"><span class="hljs-number">1</span></span> / <span class="hljs-number"><span class="hljs-number">60f</span></span>); Queue&lt;HexCell&gt; frontier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Queue&lt;HexCell&gt;(); cell.Distance = <span class="hljs-number"><span class="hljs-number">0</span></span>; frontier.Enqueue(cell); <span class="hljs-comment"><span class="hljs-comment">// for (int i = 0; i &lt; cells.Length; i++) { // yield return delay; // cells[i].Distance = // cell.coordinates.DistanceTo(cells[i].coordinates); // } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐู ุงููุญุธุฉ ุ ุชููู ุงูุฎูุงุฑุฒููุฉ ุจุชูููุฐ ุงูุญููุฉ ุฃุซูุงุก ูุฌูุฏ ุดูุก ูุง ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ. </font><font style="vertical-align: inherit;">ุนูุฏ ูู ุชูุฑุงุฑ ุ ูุชู ุงุณุชุฑุฏุงุฏ ุงูุฎููุฉ ุงูููุฌูุฏุฉ ูู ุงูููุฏูุฉ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> frontier.Enqueue(cell); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (frontier.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> delay; HexCell current = frontier.Dequeue(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ูุฏููุง ุงูุฎููุฉ ุงูุญุงููุฉ ุ ูุงูุชู ูููู ุฃู ุชููู ุนูู ุฃู ูุณุงูุฉ. </font><font style="vertical-align: inherit;">ุจุนุฏ ุฐูู ุ ูุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุฌููุน ุฌูุฑุงููุง ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุฎุทูุฉ ูุงุญุฏุฉ ุฃุจุนุฏ ูู ุงูุฎููุฉ ุงููุญุฏุฏุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (frontier.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> delay; HexCell current = frontier.Dequeue(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = current.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { neighbor.Distance = current.Distance + <span class="hljs-number"><span class="hljs-number">1</span></span>; frontier.Enqueue(neighbor); } } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููู ูุฌุจ ุฃู ูุถูู ููุท ุชูู ุงูุฎูุงูุง ุงูุชู ูู ุชุนุท ุจุนุฏ ูุณุงูุฉ. </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; neighbor.Distance == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { neighbor.Distance = current.Distance + <span class="hljs-number"><span class="hljs-number">1</span></span>; frontier.Enqueue(neighbor); }</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุญุซ ูุงุณุน.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฌูุจ ุงููุงุก </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุงูุชุฃูุฏ ูู ุฃู ุงูุจุญุซ ุงูุฃูู ุจุงุชุณุงุน ุงููุณุงูุฉ ูุฌุฏูุง ุนูู ุงูุฎุฑูุทุฉ ุงูุฑุชูุจุฉ ุ ูููููุง ุงูุจุฏุก ูู ุฅุถุงูุฉ ุงูุนูุจุงุช. </font><font style="vertical-align: inherit;">ูููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุฑูุถ ุฅุถุงูุฉ ุฎูุงูุง ุฅูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุฅุฐุง ุชู ุงุณุชููุงุก ุดุฑูุท ูุนููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุชุฎุทู ุจุงููุนู ุจุนุถ ุงูุฎูุงูุง: ุงูุฎูุงูุง ุบูุฑ ุงูููุฌูุฏุฉ ุ ูุชูู ุงูุชู ุฃุดุฑูุง ุฅูููุง ุจุงููุนู. </font><font style="vertical-align: inherit;">ุฏุนููุง ูุนูุฏ ูุชุงุจุฉ ุงูุดูุฑุฉ ุจุญูุซ ูุชุฎุทู ุงูุฌูุฑุงู ุจุดูู ุตุฑูุญ ูู ูุฐู ุงูุญุงูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { HexCell neighbor = current.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || neighbor.Distance != <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } neighbor.Distance = current.Distance + <span class="hljs-number"><span class="hljs-number">1</span></span>; frontier.Enqueue(neighbor); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ูุชุฎุทู ุฌููุน ุงูุฎูุงูุง ุงูููุฌูุฏุฉ ุชุญุช ุงููุงุก. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุนูุฏ ุงูุจุญุซ ุนู ุฃูุตุฑ ูุณุงูุงุช ุ ูุนุชุจุฑ ุงูุญุฑูุฉ ุนูู ุงูุฃุฑุถ ููุท.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || neighbor.Distance != <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.IsUnderwater) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุงูุงุช ุฏูู ุงูุชุญุฑู ุนุจุฑ ุงููุงุก. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ุชุฒุงู ุงูุฎูุงุฑุฒููุฉ ุชุฌุฏ ุฃูุตุฑ ูุณุงูุงุช ุ ูููููุง ุชุชุฌูุจ ุงูุขู ูู ุงููุงุก. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูุง ุชูุชุณุจ ุงูุฎูุงูุง ุชุญุช ุงููุงุก ุฃู ูุณุงูุฉ ุ ูุซู ุงูููุงุทู ุงููุนุฒููุฉ ูู ุงูุฃุฑุถ. </font><font style="vertical-align: inherit;">ุชุชููู ุงูุฎููุฉ ุชุญุช ุงููุงุก ุงููุณุงูุฉ ููุท ุฅุฐุง ุชู ุชุญุฏูุฏูุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฌูุจ ุงูููุญุฏุฑุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุถูุง ุ ูุชุญุฏูุฏ ุฅููุงููุฉ ุฒูุงุฑุฉ ุฃุญุฏ ุงูุฌูุฑุงู ุ ูููููุง ุงุณุชุฎุฏุงู ููุน ุงูุถูุน. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุฌุนู ุงูููุญุฏุฑุงุช ุชุณุฏ ุงููุณุงุฑ. </font><font style="vertical-align: inherit;">ุฅุฐุง ุณูุญุช ุจุงูุญุฑูุฉ ุนูู ุงูููุญุฏุฑุงุช ุ ููุง ูุฒุงู ูู ุงููููู ุงููุตูู ุฅูู ุงูุฎูุงูุง ุนูู ุงูุฌุงูุจ ุงูุขุฎุฑ ูู ุงูุฌุฑู ุ ููุท ุนูู ุงููุณุงุฑุงุช ุงูุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูุฐูู ุ ูููู ุฃู ุชููู ุนูู ูุณุงูุงุช ูุฎุชููุฉ ุฌุฏูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.IsUnderwater) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.GetEdgeType(neighbor) == HexEdgeType.Cliff) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; }</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุงูุงุช ุฏูู ุนุจูุฑ ุงูููุญุฏุฑุงุช. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชูุงููู ุงูุณูุฑ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุชุฌูุจ ุงูุฎูุงูุง ูุงูุญูุงู ุ ููู ูุฐู ุงูุฎูุงุฑุงุช ุซูุงุฆูุฉ. </font><font style="vertical-align: inherit;">ูููู ูููุฑุก ุฃู ูุชุตูุฑ ุฃูู ูู ุงูุฃุณูู ุงูุชููู ูู ุจุนุถ ุงูุงุชุฌุงูุงุช ุฃูุซุฑ ูู ุบูุฑูุง. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ููุงุณ ุงููุณุงูุฉ ูู ุงูุนูู ุฃู ุงูููุช.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุทุฑู ุงูุณุฑูุนุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ูู ุงูููุทูู ุฃู ูููู ุงูุณูุฑ ุนูู ุงูุทุฑู ุฃุณูู ูุฃุณุฑุน ุ ูุฐูู ุฏุนููุง ูุฌุนู ุชูุงุทุน ุงูุญูุงู ูุน ุงูุทุฑู ุฃูู ุชูููุฉ. </font><font style="vertical-align: inherit;">ูุธุฑูุง ูุฃููุง ูุณุชุฎุฏู ููููุง ุตุญูุญุฉ ูุชุญุฏูุฏ ุงููุณุงูุฉ ุ ูุณูู ูุชุฑู ุชูููุฉ ุงูุชุญุฑู ุนูู ุทูู ุงูุทุฑู ุชุณุงูู 1 ุ ูุณุชุฒุฏุงุฏ ุชูููุฉ ุนุจูุฑ ุงูุญูุงู ุงูุฃุฎุฑู ุฅูู 10. ููุฐุง ูุฑู ูุจูุฑ ูุชูุญ ููุง ูุนุฑูุฉ ูุง ุฅุฐุง ุญุตููุง ุนูู ุงููุชุงุฆุฌ ุงูุตุญูุญุฉ ุนูู ุงูููุฑ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance = current.Distance; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.HasRoadThroughEdge(d)) { distance += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { distance += <span class="hljs-number"><span class="hljs-number">10</span></span>; } neighbor.Distance = distance;</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/899/225/6e3/8992256e34fef206c7282bc31a72a573.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุทุฑู ุฐุงุช ุงููุณุงูุงุช ุงูุฎุงุทุฆุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑุฒ ุงูุญุฏูุฏ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุก ุงูุญุธ ุ ุงุชุถุญ ุฃู ุงูุจุญุซ ุงูุฃูู ูุง ูููู ุฃู ูุนูู ูุน ุชูุงููู ููู ูุชุบูุฑุฉ. </font><font style="vertical-align: inherit;">ููุชุฑุถ ุฃู ุงูุฎูุงูุง ุชุถุงู ุฅูู ุงูุญุฏูุฏ ุจุชุฑุชูุจ ุฒูุงุฏุฉ ุงููุณุงูุฉ ุ ููุฐุง ุจุงููุณุจุฉ ููุง ูู ูุนุฏ ููุงุณุจูุง. </font><font style="vertical-align: inherit;">ูุญู ุจุญุงุฌุฉ ุฅูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุฐุงุช ุฃููููุฉ ุ ุฃู ูุงุฆูุฉ ุงูุชุธุงุฑ ุชุตูู ููุณูุง. </font><font style="vertical-align: inherit;">ูุง ุชูุฌุฏ ููุงุฆู ุงูุชุธุงุฑ ุฐุงุช ุฃููููุฉ ููุงุณูุฉ ุ ูุฃูู ูุง ููููู ุจุฑูุฌุชูุง ุจุทุฑููุฉ ุชูุงุณุจ ุฌููุน ุงูููุงูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฅูุดุงุก ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุฐุงุช ุงูุฃููููุฉ ุงูุฎุงุตุฉ ุจูุง ุ ูููู ุฏุนูุง ูููู ุจุชุญุณูููุง ูุชูุงุณุจ ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุงููุณุชูุจูู. </font><font style="vertical-align: inherit;">ูู ุงูููุช ุงูุญุงูู ุ ูุณุชุจุฏู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจูุงุฆูุฉ ุชุญุชูู ุนูู ุทุฑููุฉ </font></font><code>Sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> List&lt;HexCell&gt; frontier = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;HexCell&gt;(); cell.Distance = <span class="hljs-number"><span class="hljs-number">0</span></span>; frontier.Add(cell); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (frontier.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> delay; HexCell current = frontier[<span class="hljs-number"><span class="hljs-number">0</span></span>]; frontier.RemoveAt(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (HexDirection d = HexDirection.NE; d &lt;= HexDirection.NW; d++) { โฆ neighbor.Distance = distance; frontier.Add(neighbor); } }</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃูุง ูููููู ุงุณุชุฎุฏุงู ListPool &lt;HexCell&gt;ุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl"> , ,  .       ,  ,        . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชููู ุงูุญุฏูุฏ ุตุญูุญุฉ ุ ูุญุชุงุฌ ุฅูู ูุฑุฒูุง ุจุนุฏ ุฅุถุงูุฉ ุฎููุฉ ุฅูููุง. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูููููุง ุชุฃุฌูู ุงูุชุตููู ุญุชู ุชุชู ุฅุถุงูุฉ ุฌููุน ุฌูุฑุงู ุงูุฎููุฉ ุ ูููู ุ ุฃูุฑุฑ ุ ุญุชู ูุง ุชูููุง ุงูุชุญุณููุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑูุฏ ูุฑุฒ ุงูุฎูุงูุง ุญุณุจ ุงููุณุงูุฉ. </font><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุงุณุชุฏุนุงุก ุทุฑููุฉ ูุฑุฒ ุงููุงุฆูุฉ ูุน ุงุฑุชุจุงุท ุจุงูุทุฑููุฉ ุงูุชู ุชุฌุฑู ูุฐู ุงูููุงุฑูุฉ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> frontier.Add(neighbor); frontier.Sort((x, y) =&gt; x.Distance.CompareTo(y.Distance));</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุชุนูู ุทุฑููุฉ ุงููุฑุฒ ูุฐูุ</font></font></b> <div class="spoiler_text" style=";text-align:right;direction:rtl">     .     ,       .        . <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> frontier.Sort(CompareDistances); โฆ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CompareDistances</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HexCell x, HexCell y</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x.Distance.CompareTo(y.Distance); }</code> </pre> </div></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/2ca/f5d/f85/2caf5df85335f7997694522b7885d882.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุญุฏูุฏ ุงูุชู ุชู ูุฑุฒูุง ูุง ุชุฒุงู ุบูุฑ ุตุญูุญุฉ.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุญุฏูุซ ุงูุญุฏูุฏ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุนุฏ ุฃู ุจุฏุฃูุง ูู ูุฑุฒ ุงูุญุฏูุฏ ุ ุจุฏุฃูุง ูู ุงูุญุตูู ุนูู ูุชุงุฆุฌ ุฃูุถู ุ ูููู ูุง ุชุฒุงู ููุงู ุฃุฎุทุงุก. ูุฐุง ูุฃูู ุนูุฏูุง ุชุชู ุฅุถุงูุฉ ุฎููุฉ ุฅูู ุงูุญุฏูุฏ ุ ูุฅููุง ูุง ูุฌุฏ ุจุงูุถุฑูุฑุฉ ุฃูุตุฑ ูุณุงูุฉ ููุฐู ุงูุฎููุฉ. ูุฐุง ูุนูู ุฃูู ูู ูุนุฏ ุจุฅููุงููุง ุงูุขู ุชุฎุทู ุงูุฌูุฑุงู ุงูุฐูู ุชู ุชุฎุตูุต ูุณุงูุฉ ููู ุจุงููุนู. ุจุฏูุงู ูู ุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุชุญูู ููุง ุฅุฐุง ูุฌุฏูุง ูุณุงุฑูุง ุฃูุตุฑ. ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุชุบููุฑ ุงููุณุงูุฉ ุฅูู ุงูุฌุงุฑ ุ ุจุฏูุงู ูู ุฅุถุงูุชู ุฅูู ุงูุญุฏูุฏ.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexCell neighbor = current.GetNeighbor(d); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.IsUnderwater) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.GetEdgeType(neighbor) == HexEdgeType.Cliff) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance = current.Distance; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.HasRoadThroughEdge(d)) { distance += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { distance += <span class="hljs-number"><span class="hljs-number">10</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (neighbor.Distance == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { neighbor.Distance = distance; frontier.Add(neighbor); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (distance &lt; neighbor.Distance) { neighbor.Distance = distance; } frontier.Sort((x, y) =&gt; x.Distance.CompareTo(y.Distance));</code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/https://translate" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณุงูุงุช ุงูุตุญูุญุฉ. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุขู ุจุนุฏ ุฃู ุญุตููุง ุนูู ุงููุณุงูุงุช ุงูุตุญูุญุฉ ุ ุณูุจุฏุฃ ูู ุงูุชูููุฑ ูู ุชูุงููู ุงูููู. </font><font style="vertical-align: inherit;">ูุฏ ุชูุงุญุธ ุฃู ุงููุณุงูุงุช ุฅูู ุจุนุถ ุงูุฎูุงูุง ูุจูุฑุฉ ูู ุงูุจุฏุงูุฉ ุ ูููู ูุชู ุชุตุญูุญูุง ุนูุฏ ุฅุฒุงูุชูุง ูู ุงูุญุฏูุฏ. </font><font style="vertical-align: inherit;">ูุณูู ูุฐุง ุงูููุฌ ุฎูุงุฑุฒููุฉ Dijkstra ุ ููุทูู ุนููู ุงุณู ุฃูู ุงุฎุชุฑุงุน ุจูุงุณุทุฉ Edsger Dijkstra.</font></font><br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูููุญุฏุฑุงุช </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุฑูุฏ ุฃู ููุชุตุฑ ุงูุฃูุฑ ุนูู ุงูุชูุงููู ุงููุฎุชููุฉ ููุทุฑู ููุท. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุชูููู ุชูููุฉ ุนุจูุฑ ุงูุญูุงู ุงููุณุทุญุฉ ุจุฏูู ุทุฑู ุฅูู 5 ุ ูุชุฑู ุงูููุญุฏุฑุงุช ุจุฏูู ุทุฑู ุจูููุฉ 10.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> HexEdgeType edgeType = current.GetEdgeType(neighbor); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (edgeType == HexEdgeType.Cliff) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> distance = current.Distance; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.HasRoadThroughEdge(d)) { distance += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { distance += edgeType == HexEdgeType.Flat ? <span class="hljs-number"><span class="hljs-number">5</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span>; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/8fd/8e1/1b5/8fd8e11b5a95d0e35ce03d1eb8bc32a0.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุชุบูุจ ุนูู ุงูููุญุฏุฑุงุช ุ ุชุญุชุงุฌ ุฅูู ูุฒูุฏ ูู ุงูุนูู ุ ูุงูุทุฑู ุณุฑูุนุฉ ุฏุงุฆููุง.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุงุฆูุงุช ุงูุฅุบุงุซุฉ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฅุถุงูุฉ ุงูุชูุงููู ูู ูุฌูุฏ ูุงุฆูุงุช ุงูุฅุบุงุซุฉ. </font><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงูุนุฏูุฏ ูู ุงูุฃูุนุงุจ ูููู ุงูุชููู ูู ุงูุบุงุจุงุช ุฃูุซุฑ ุตุนูุจุฉ. </font><font style="vertical-align: inherit;">ูู ูุฐู ุงูุญุงูุฉ ุ ูุถูู ุจุจุณุงุทุฉ ุฌููุน ูุณุชููุงุช ุงููุงุฆูุงุช ุฅูู ุงููุณุงูุฉ. </font><font style="vertical-align: inherit;">ูููุง ุฃูุถุง ูุณุฑุน ุงูุทุฑูู ูู ุดูุก.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.HasRoadThroughEdge(d)) { distance += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { distance += edgeType == HexEdgeType.Flat ? <span class="hljs-number"><span class="hljs-number">5</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span>; distance += neighbor.UrbanLevel + neighbor.FarmLevel + neighbor.PlantLevel; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f6e/ef4/b2b/f6eef4b2bba378bd83daf9377f9a1603.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃุดูุงุก ุชุชุจุงุทุฃ ุฅุฐุง ูู ููู ููุงู ุทุฑูู.</font></font></i> <br><br><h3 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุฌุฏุฑุงู </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุฎูุฑูุง ุ ููุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงูุฌุฏุฑุงู. </font><font style="vertical-align: inherit;">ูุฌุจ ุฃู ุชููุน ุงูุฌุฏุฑุงู ุงูุญุฑูุฉ ุฅุฐุง ูู ููุฑ ุงูุทุฑูู ุนุจุฑูุง.</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.HasRoadThroughEdge(d)) { distance += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (current.Walled != neighbor.Walled) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { distance += edgeType == HexEdgeType.Flat ? <span class="hljs-number"><span class="hljs-number">5</span></span> : <span class="hljs-number"><span class="hljs-number">10</span></span>; distance += neighbor.UrbanLevel + neighbor.FarmLevel + neighbor.PlantLevel; }</code> </pre> <br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/1b3/9cd/7a9/1b39cd7a97483749c25474622ed8326b.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฏุฑุงู ูุง ุชุณูุญ ููุง ุจุงููุฑูุฑ ุ ุชุญุชุงุฌ ุฅูู ุงูุจุญุซ ุนู ุงูุจูุงุจุฉ. </font></font></i> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุฒูุฉ ุงููุญุฏุฉ</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar425919/">https://habr.com/ru/post/ar425919/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar425905/index.html">ููููุฉ ูุชุงุจุฉ ููุฏ ุงููุฌูุน ูุน ุชุนูููุงุช ูุชุฏุงุฎูุฉ (ุชูููุฉ ุฃุฎุฑู ููุชุนุชูู ุนูู ุฑูุฒ ุงูุจุงูุช)</a></li>
<li><a href="../ar425907/index.html">ูุญู ูููู ุจูุดุฑูุน ุชุนูููู ุงูุขูุฉ ูู Python. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar425911/index.html">ูู ุจููู CRM cloud ุฅูู ุงูุฅุตุฏุงุฑ ุงููุญุงุตุฑ</a></li>
<li><a href="../ar425915/index.html">ููู ูููู ููุงุชุตุงูุงุช ุนุจุฑ ุงูุญุฏูุฏ ุฃู ุชุญู ูุญู ุฅุดุงุฑุงุช ุงููุฑูุฑ ูุชูุตูุฑ ุทุฑููุฉ ุงูุนูู</a></li>
<li><a href="../ar425917/index.html">ููุงุชู ุงูุนุฏุงูุฉ ูููุน Waymo ูู ุชุณุฌูู ุจุฑุงุกุฉ ุงุฎุชุฑุงุน ูุชูููููุฌูุง lidar ุงูุฑุฆูุณูุฉ</a></li>
<li><a href="../ar425921/index.html">ุงุฌุชูุงุน ูุฌุชูุน .NET ุนูู CLRium # 4 + ุนุจุฑ ุงูุฅูุชุฑูุช</a></li>
<li><a href="../ar425923/index.html">25 ุณูุฉ ุนุฐุงุจ</a></li>
<li><a href="../ar425925/index.html">ุงูุทุจุงุนุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ ูู ุฅูุดุงุก ุงูุชุฎุทูุทุงุช ุนูู ุณุจูู ุงููุซุงู ูู STUDIO 911</a></li>
<li><a href="../ar425927/index.html">ูุญุทุฉ ุงูุทูุณ ุนูู Arduino ูู A ุฅูู Z. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar425929/index.html">ุชุฎูุช ุฌูุฌู ุนู ุงูููุงุญ ูู ุฃุฌู ุนูุฏ ุงูุจูุชุงุฌูู ุงููููุงุฑ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>