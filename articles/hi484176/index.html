<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯзТЁЯП╜ ЁЯСОЁЯП╜ ЁЯХЭ рдПрдХрддрд╛ рдореЗрдВ рд╕реНрдерд┐рддрд┐ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ ЁЯУШ ЁЯзХЁЯП╝ тЬНЁЯП╜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЗрди-рдЧреЗрдо рд╕рдВрд╕реНрдерд╛рдУрдВ рдХреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпрд╛рдВ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИрдВ рдЬрдм рдЙрдиреНрд╣реЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЛрдВ рд╕реЗ рдХрд╛рд░реНрдп рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдПрдХрддрд╛ рдореЗрдВ рд╕реНрдерд┐рддрд┐ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484176/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4fa/bf6/c19/4fabf6c19761d028d621903401a84746.png" alt="рдЫрд╡рд┐"></div><br>  рдЗрди-рдЧреЗрдо рд╕рдВрд╕реНрдерд╛рдУрдВ рдХреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпрд╛рдВ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИрдВ рдЬрдм рдЙрдиреНрд╣реЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЛрдВ рд╕реЗ рдХрд╛рд░реНрдп рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬреЛ <i>рд░рд╛рдЬреНрдпреЛрдВ</i> рдХреЗ рдЙрдкрдпреЛрдЧ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ <i>рд╣реИ</i> ред <br><br>  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЖрдк рдЬрд╛рдирд╡рд░ рдмрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓реЗрддреЗ рд╣реИрдВ, рддреЛ рдХреЛрдб рдЬрд▓реНрджреА рд╕реЗ рдХрдИ рдиреЗрд╕реНрдЯреЗрдб рдмрдпрд╛рдиреЛрдВ рдХреЗ рд╕рд╛рде рдЙрд▓рдЭ рдЕрд░рд╛рдЬрдХрддрд╛ рдореЗрдВ рдмрджрд▓ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЗ рдПрдХ рд╕реБрдВрджрд░ рд╕рдорд╛рдзрд╛рди рдХреЗ рд▓рд┐рдП, рдЖрдк рд╕реНрдЯреЗрдЯ рдбрд┐рдЬрд╝рд╛рдЗрди рдкреИрдЯрд░реНрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рдЗрд╕ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЛ рдЙрд╕рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд рдХрд░реЗрдВрдЧреЗ! <br><br>  рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рд╕реЗ рдЖрдк: <br><br><ul><li>  рдПрдХрддрд╛ рдореЗрдВ рд░рд╛рдЬреНрдп рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреА рдореВрд▓ рдмрд╛рддреЗрдВ рдЬрд╛рдиреЗрдВред </li><li>  рдЖрдк рд╕реАрдЦреЗрдВрдЧреЗ рдХрд┐ рдПрдХ рд░рд╛рдЬреНрдп рдорд╢реАрди рдХреНрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрдм рдХрд░рдирд╛ рд╣реИред </li><li>  рдЕрдкрдиреЗ рдЪрд░рд┐рддреНрд░ рдХреА рдЧрддрд┐ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕реАрдЦреЗрдВред </li></ul><br><blockquote>  <em>рдиреЛрдЯ</em> : рдпрд╣ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдЙрдиреНрдирдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╣реИ;  рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдПрдХрддрд╛ рдореЗрдВ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рдирд╛ рд╣реИ рдФрд░ C # рдХрд╛ рдФрд╕рдд рд╕реНрддрд░ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдпреВрдирд┐рдЯреА 2019.2 рдФрд░ C # 7 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </blockquote><a name="habracut"></a><br><h2>  рдХрд╛рдо рдкрд░ рд▓рдЧрдирд╛ </h2><br>  <a href="">рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕рд╛рдордЧреНрд░реА</a> рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВред  <em>рдЬрд╝рд┐рдк рдлрд╝рд╛рдЗрд▓</em> рдЦреЛрд▓рдирд╛ рдФрд░ рдПрдХрддрд╛ рдореЗрдВ <em>рд╕реНрдЯрд╛рд░реНрдЯрд░</em> рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЦреЛрд▓реЗрдВред <br><br>  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдХрдИ рдлрд╝реЛрд▓реНрдбрд░ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рдЖрд░рдВрдн рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВрдЧреЗред  <em>рдПрд╕реЗрдЯреНрд╕ / рдЖрд░рдбрдмреНрд▓реНрдпреВ</em> рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ <em>рдПрдирд┐рдореЗрд╢рди</em> , <em>рд╕рд╛рдордЧреНрд░реА</em> , <em>рдореЙрдбрд▓</em> , <em>рдкреНрд░реАрдлреИрдм</em> , <em>рд╕рдВрд╕рд╛рдзрди</em> , <em>рджреГрд╢реНрдп</em> , <em>рд▓рд┐рдкрд┐рдпреЛрдВ</em> рдФрд░ <em>рдзреНрд╡рдирд┐рдпреЛрдВ рдХреЗ</em> рдлрд╝реЛрд▓реНрдбрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, <em>рдЬрд┐рдирдХреЗ</em> рдирд╛рдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╣реИрдВред <br><br>  рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдХреЗрд╡рд▓ <em>рджреГрд╢реНрдпреЛрдВ</em> рдФрд░ <em>рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЗ</em> рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВрдЧреЗред <br><br>  <em>рдЖрд░рдбрдмреНрд▓реНрдпреВ / рджреГрд╢реНрдпреЛрдВ рдкрд░</em> рдЬрд╛рдПрдВ рдФрд░ <em>рдореЗрди</em> рдЦреЛрд▓реЗрдВред  рдЧреЗрдо рдореЛрдб рдореЗрдВ, рдЖрдкрдХреЛ рдордзреНрдпрдпреБрдЧреАрди рдорд╣рд▓ рдХреЗ рдЕрдВрджрд░ рд╣реБрдб рдореЗрдВ рдПрдХ рдЪрд░рд┐рддреНрд░ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/478/f1b/4e1/478f1b4e1ec3a2e8702e365e4082a605.png"></div><br>  <em>Play</em> рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ <em>рдХреИрдорд░рд╛</em> <em>рдХреИрд░реЗрдХреНрдЯрд░</em> рдлреНрд░реЗрдо рдХреЛ рдХреИрд╕реЗ рдлрд┐рдЯ рдХрд░рддрд╛ рд╣реИред  рдлрд┐рд▓рд╣рд╛рд▓, рд╣рдорд╛рд░реЗ рдЫреЛрдЯреЗ рдЦреЗрд▓ рдореЗрдВ рдХреЛрдИ рдмрд╛рддрдЪреАрдд рдирд╣реАрдВ рд╣реИ, рд╣рдо рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдореЗрдВ рдЙрди рдкрд░ рдХрд╛рдо рдХрд░реЗрдВрдЧреЗред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ba3/62c/536/ba362c53682371294f90576b5fd5adc6.gif"></div><br><h2>  рдЪрд░рд┐рддреНрд░ рдХрд╛ рдЕрдиреНрд╡реЗрд╖рдг рдХрд░реЗрдВ </h2><br>  <em>рдкрджрд╛рдиреБрдХреНрд░рдо рдореЗрдВ,</em> <em>рд╡рд░реНрдг рдХрд╛</em> рдЪрдпрди рдХрд░реЗрдВред  <em>рдЗрдВрд╕реНрдкреЗрдХреНрдЯрд░</em> рдмрд╛рд╣рд░ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВред  рдЖрдкрдХреЛ <em>рд╡рд░реНрдг</em> рдирд┐рдпрдВрддреНрд░рдг рддрд░реНрдХ рд╡рд╛рд▓реЗ рд╕рдорд╛рди рдирд╛рдо рд╡рд╛рд▓рд╛ рдПрдХ <em>рдШрдЯрдХ</em> рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛ред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/957/ffd/2ba/957ffd2ba0299d4b509b75bedb094581.png"></div><br>  <em>рдЖрд░рдбрдмреНрд▓реНрдпреВ / рд▓рд┐рдкрд┐рдпреЛрдВ</em> рдореЗрдВ рд╕реНрдерд┐рдд рдУрдкрди <em>рдХреИрд░реЗрдХреНрдЯрд░реНрд╕</em> ред <br><br>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрдИ рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░рддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЙрдирдореЗрдВ рд╕реЗ рдЬреНрдпрд╛рджрд╛рддрд░ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИрдВред  рдЕрднреА рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП рдирд┐рдореНрди рд╡рд┐рдзрд┐рдпреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВред <br><br><ul><li> <code>Move</code> : рдпрд╣ рдЪрд░рд┐рддреНрд░ рдХреЛ рдЧрддрд┐ рджреЗрддрд╛ рд╣реИ, рдЧрддрд┐ рдФрд░ рдЧрддрд┐ рдХреА <code>speed</code> рд░реВрдк рдореЗрдВ рдкреНрд░рдХрд╛рд░ рдХреА <code>speed</code> рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдХреЛрдгреАрдп рдЧрддрд┐ рдХреЗ рд░реВрдк рдореЗрдВред </li><li>  <code>ResetMoveParams</code> : рдпрд╣ рд╡рд┐рдзрд┐ <i>рдЪрд╛рд▓</i> рдФрд░ рдЪрд░рд┐рддреНрд░ рдХреЗ рдХреЛрдгреАрдп рд╡реЗрдЧ рдХреЛ <i>рдЪреЗрддрди</i> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рд░реАрд╕реЗрдЯ рдХрд░рддреА рд╣реИред  рдЗрд╕рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ рд╕рд┐рд░реНрдл рд╕рдлрд╛рдИ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <code>SetAnimationBool</code> : рдпрд╣ рдорд╛рди рдХреЗ рд▓рд┐рдП рдЯрд╛рдЗрдк Bool рдХреЗ <code>SetAnimationBool</code> рдПрдиреАрдореЗрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред </li><li>  <code>CheckCollisionOverlap</code> : рдпрд╣ рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ <code>Vector3</code> рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдПрдХ <code>bool</code> рд▓реМрдЯрд╛рддрд╛ рд╣реИ рдЬреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ <code></code> рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рддреНрд░рд┐рдЬреНрдпрд╛ рдХреЗ рднреАрддрд░ рдХреЛрдИ рдХреЛрд▓рд╛рдбрд░ рд╣реИрдВ рдпрд╛ <code></code> ред </li><li>  <code>TriggerAnimation</code> : рдЗрдирдкреБрдЯ <code>param</code> рдПрдиреАрдореЗрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ <code>TriggerAnimation</code> рдХрд░рддрд╛ рд╣реИред </li><li>  <code>ApplyImpulse</code> : рдкреНрд░рдХрд╛рд░ <code>ApplyImpulse</code> рдХреЗ рдЗрдирдкреБрдЯ рдкреИрд░рд╛рдореАрдЯрд░ <code>force</code> рдмрд░рд╛рдмрд░ рдХреИрд░реЗрдХреНрдЯрд░ рдХреЗ рд▓рд┐рдП <code>ApplyImpulse</code> рдкрд▓реНрд╕ <code>ApplyImpulse</code> ред </li></ul><br>  рдиреАрдЪреЗ рдЖрдк рдЗрди рддрд░реАрдХреЛрдВ рдХреЛ рджреЗрдЦреЗрдВрдЧреЗред  рд╣рдорд╛рд░реЗ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдореЗрдВ, рдЙрдирдХреА рд╕рд╛рдордЧреНрд░реА рдФрд░ рдЖрдВрддрд░рд┐рдХ рдХрд╛рд░реНрдп рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИрдВред <br><br><h2>  рд░рд╛рдЬреНрдп рдорд╢реАрдиреЗрдВ рдХреНрдпрд╛ рд╣реИрдВ </h2><br>  рдПрдХ рд░рд╛рдЬреНрдп рдорд╢реАрди рдПрдХ рдЕрд╡рдзрд╛рд░рдгрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдХрдВрдЯреЗрдирд░ рдХрд┐рд╕реА рдЪреАрдЬ рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдордп рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред  рдЗрдирдкреБрдЯ рдбреЗрдЯрд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдпрд╣ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХ рдирд┐рд╖реНрдХрд░реНрд╖ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдПрдХ рдирдП рд░рд╛рдЬреНрдп рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рд░рд╛рдЬреНрдп рдорд╢реАрдиреЛрдВ рдХреЛ <a href="https://www.geeksforgeeks.org/unified-modeling-language-uml-state-diagrams/" rel="noopener">рд░рд╛рдЬреНрдп рдЖрд░реЗрдЦ рдХреЗ</a> рд░реВрдк рдореЗрдВ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд░рд╛рдЬреНрдп рдЖрд░реЗрдЦ рддреИрдпрд╛рд░ рдХрд░рдирд╛ рдЖрдкрдХреЛ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рднреА рд╕рдВрднрд╛рд╡рд┐рдд рд░рд╛рдЬреНрдпреЛрдВ рдФрд░ рдЙрди рджреЛрдиреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдХреНрд░рдордг рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЛрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред <br><br><h3>  рд░рд╛рдЬреНрдп рдХреА рдорд╢реАрдиреЗрдВ </h3><br>  <em>рдкрд░рд┐рдорд┐рдд рд░рд╛рдЬреНрдп рдорд╢реАрди</em> рдпрд╛ <em>FSM (рдкрд░рд┐рдорд┐рдд рд░рд╛рдЬреНрдп рдорд╢реАрди)</em> <em>рдорд╢реАрдиреЛрдВ</em> рдХреЗ рдЪрд╛рд░ рдореБрдЦреНрдп рдкрд░рд┐рд╡рд╛рд░реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ <em>рд╣реИ</em> ред  рдСрдЯреЛрдореЗрдЯрд╛ рд╕рд░рд▓ рдорд╢реАрдиреЛрдВ рдХреЗ рдЕрдореВрд░реНрдд рдореЙрдбрд▓ рд╣реИрдВред  рдЙрдиреНрд╣реЗрдВ <a href="https://cs.stanford.edu/people/eroberts/courses/soco/projects/2004-05/automata-theory/basics.html" rel="noopener"><em>рдСрдЯреЛрдореЗрдЯрд╛</em></a> рдХреЗ <a href="https://cs.stanford.edu/people/eroberts/courses/soco/projects/2004-05/automata-theory/basics.html" rel="noopener"><em>рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ</em></a> рдврд╛рдВрдЪреЗ рдореЗрдВ рдЕрдзреНрдпрдпрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬреНрдЮрд╛рди рдХреА рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рд╢рд╛рдЦрд╛ред <br><br>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ: <br><br><ul><li>  FSM рдореЗрдВ рдкрд░рд┐рдорд┐рдд рдорд╛рддреНрд░рд╛ рдореЗрдВ <em>рд╕реНрдерд┐рддрд┐ рд╣реЛрддреА рд╣реИ</em> ред  рдХрд┐рд╕реА рднреА рд╕рдордп <em>,</em> рдЗрдирдореЗрдВ рд╕реЗ рдХреЗрд╡рд▓ рдПрдХ рд░рд╛рдЬреНрдп <em>рд╕рдХреНрд░рд┐рдп рд╣реИ</em> ред </li><li>  рдкреНрд░рддреНрдпреЗрдХ рд░рд╛рдЬреНрдп рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ <em>рдЖрдиреЗ рд╡рд╛рд▓реА рд╕реВрдЪрдирд╛рдУрдВ</em> рдХреЗ рдкреНрд░рд╛рдкреНрдд рдЕрдиреБрдХреНрд░рдо рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╡рд╣ рдХрд┐рд╕ рд░рд╛рдЬреНрдп рдореЗрдВ <em>рдЙрддреНрдкрд╛рджрди рдХреЗ</em> рд░реВрдк рдореЗрдВ рдЬрд╛рдПрдЧрд╛ред </li><li>  рдЖрдЙрдЯрдкреБрдЯ рд╕реНрдЯреЗрдЯ рдирдпрд╛ рд╕рдХреНрд░рд┐рдп рд░рд╛рдЬреНрдп рдмрди рдЬрд╛рддрд╛ рд╣реИред  рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, <em>рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рдмреАрдЪ</em> рдПрдХ <em>рд╕рдВрдХреНрд░рдордг рд╣реИ</em> ред </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c43/111/f04/c43111f045f3727ab5f3b02c05c6ecc2.png"></div><br>  рдЗрд╕реЗ рдмреЗрд╣рддрд░ рдврдВрдЧ рд╕реЗ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЧреЗрдо рдХреЗ рдЪрд░рд┐рддреНрд░ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ рдЬреЛ рдЬрдореАрди рдкрд░ рд╣реИред  рдЪрд░рд┐рддреНрд░ <i>рд╕реНрдерд╛рдпреА</i> рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИред  рдпрд╣ рдЙрд╕рдХреА <em>рд╕рдХреНрд░рд┐рдп рд╕реНрдерд┐рддрд┐ рд╣реЛрдЧреА</em> рдЬрдм рддрдХ рдХрд┐ рдЦрд┐рд▓рд╛рдбрд╝реА рдмрдЯрди рджрдмрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЪрд░рд┐рддреНрд░ рдХреВрдж рдЬрд╛рдПред <br><br>  <i>рд╕реНрдЯреИрдВрдбрд┐рдВрдЧ</i> рд╕реНрдЯреЗрдЯ рдПрдХ рдмрдЯрди рдкреНрд░реЗрд╕ рдХреА рдкрд╣рдЪрд╛рди рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг <em>рдЗрдирдкреБрдЯ рдХреЗ</em> рд░реВрдк рдореЗрдВ рдХрд░рддрд╛ рд╣реИ рдФрд░ <em>рдЖрдЙрдЯрдкреБрдЯ рдХреЗ</em> рд░реВрдк рдореЗрдВ <i>рдЬрдВрдкрд┐рдВрдЧ</i> рд╕реНрдЯреЗрдЯ рдореЗрдВ рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдЧрддрд┐ рдХреА рдРрд╕реА рдЕрд╡рд╕реНрдерд╛рдУрдВ рдХреА рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрдЦреНрдпрд╛ рд╣реИ рдФрд░ рдПрдХ рд╡рд░реНрдг рдПрдХ рд╕рдордп рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рд░рд╛рдЬреНрдп рдореЗрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдПрдлрдПрд╕рдПрдо рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИред <br><br><h3>  рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд рд░рд╛рдЬреНрдп рдорд╢реАрдиреЗрдВ </h3><br>  рдПрдлрдПрд╕рдПрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдПрдХ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдорд░ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ, рдЬрд┐рд╕рдореЗрдВ рдХрдИ рд░рд╛рдЬреНрдп рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рднреМрддрд┐рдХреА рддрд░реНрдХ рд╕рд╛рдЭрд╛ рдХрд░рддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк <em>рдХреНрд░рд╛рдЙрдЪрд┐рдВрдЧ</em> рдФрд░ <em>рд╕реНрдерд╛рдпреА</em> рд░рд╛рдЬреНрдпреЛрдВ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдФрд░ рдХреВрдж рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдХрдИ рдЖрд╡рдХ рдЪрд░ рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди рд╡реНрдпрд╡рд╣рд╛рд░ рдФрд░ рд╕реВрдЪрдирд╛ рдЙрддреНрдкрд╛рджрди рдХрд╛ рдиреЗрддреГрддреНрд╡ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдРрд╕реА рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд╕рд╛рдорд╛рдиреНрдп рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рд░рд╛рдЬреНрдп рдореЗрдВ рд╕реМрдВрдкрдирд╛ рддрд░реНрдХрд╕рдВрдЧрдд рд╣реЛрдЧрд╛ред  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдпрд╣ <em>рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд</em> рд░рд╛рдЬреНрдп рдорд╢реАрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдПрдХ рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд FSM рдореЗрдВ, рдЙрдирдХреЗ <em>рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдХреЗ</em> рд▓рд┐рдП рдЖрдиреЗ рд╡рд╛рд▓реА <i>рдХрдЪреНрдЪреА</i> рд╕реВрдЪрдирд╛рдУрдВ рдХреЛ рдкреНрд░рддреНрдпрд╛рдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВред  рдпрд╣ рдмрджрд▓реЗ рдореЗрдВ, рдЖрдкрдХреЛ рдЕрдкрдиреЗ рддрд░реНрдХ рдХреЛ рдмрдирд╛рдП рд░рдЦрддреЗ рд╣реБрдП рдПрдлрдПрд╕рдПрдо рдХреЗ рдЖрдХрд╛рд░ рдФрд░ рдЬрдЯрд┐рд▓рддрд╛ рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред <br><br><h2>  рд╕реНрдерд┐рддрд┐ рдЯреЗрдореНрдкрд▓реЗрдЯ </h2><br>  рдЙрдирдХреА рдкреБрд╕реНрддрдХ <i>рдбрд┐рдЬрд╛рдЗрди рдкреИрдЯрд░реНрди рдореЗрдВ: рдкреБрди: рдкреНрд░рдпреЛрдЬреНрдп рд╡рд╕реНрддреБ-рдЙрдиреНрдореБрдЦ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЗ рддрддреНрд╡,</i> рдПрд░рд┐рдЪ рдЧрд╛рдорд╛, рд░рд┐рдЪрд░реНрдб рд╣реЗрд▓реНрдо, рд░рд╛рд▓реНрдл рдЬреЙрдирд╕рди рдФрд░ рдЬреЙрди рд╡реНрд▓рд┐рд╕рд┐рдбрд┐рд╕ ( <em>рдж рдЧреИрдВрдЧ рдСрдлрд╝ рдлреЛрд░</em> ) рдиреЗ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд░рд╛рдЬреНрдп рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЗ <i>рдХрд╛рд░реНрдп</i> рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛: <br><br>  тАЬрдЬрдм рдЖрдВрддрд░рд┐рдХ рд╕реНрдерд┐рддрд┐ рдмрджрд▓рддреА рд╣реИ рддреЛ рдЙрд╕реЗ рд╡рд╕реНрддреБ рдХреЛ рдЕрдкрдиреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреА рдЪрд╛рд╣рд┐рдПред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдРрд╕рд╛ рд▓рдЧреЗрдЧрд╛ рдХрд┐ рдСрдмреНрдЬреЗрдХреНрдЯ рдиреЗ рдЕрдкрдиреА рдХрдХреНрд╖рд╛ рдмрджрд▓ рджреА рд╣реИред тАЭ <br><br>  рдЗрд╕реЗ рдмреЗрд╣рддрд░ рдврдВрдЧ рд╕реЗ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: <br><br><ul><li>  рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЬреЛ рдЖрдВрджреЛрд▓рди рдХреЗ рддрд░реНрдХ рдХреЗ рд▓рд┐рдП рдЖрдиреЗ рд╡рд╛рд▓реА рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░рддреА рд╣реИ, рдПрдХ рдЗрди-рдЧреЗрдо рдЗрдХрд╛рдИ рд╕реЗ рдЬреБрдбрд╝реА рд╣реЛрддреА рд╣реИред </li><li>  рдпрд╣ рд╡рд░реНрдЧ рдПрдХ <i>рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐</i> рдЪрд░ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдХреЗрд╡рд▓ <i>рд░рд╛рдЬреНрдп</i> рд╡рд░реНрдЧ рдХреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИред </li><li>  рдЖрд╡рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдЗрд╕ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдЗрд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЕрдкрдиреЗ рднреАрддрд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рдмрдирд╛рддрд╛ рд╣реИред  рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд░рд╛рдЬреНрдп рд╕рдВрдХреНрд░рдордгреЛрдВ рдХреЛ рднреА рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред </li></ul><br>  рдЗрд╕рд▓рд┐рдП, рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рдордп рдкрд░ <i>рд╡рд░реНрддрдорд╛рди рд░рд╛рдЬреНрдп</i> рдЪрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдРрд╕рд╛ рд▓рдЧреЗрдЧрд╛ рдХрд┐ рдПрдХ рд╣реА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╡рд░реНрдЧ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ "рд╕реНрдерд┐рддрд┐" рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛ рд╕рд╛рд░ рд╣реИред <br><br>  рд╣рдорд╛рд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ, рдЙрдкрд░реЛрдХреНрдд <em>рд╡рд░реНрдг</em> рд╡рд░реНрдЧ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░реЗрдЧрд╛ред  рд▓реЗрдХрд┐рди рд╣рдо рдЙрд╕реЗ рдЦреБрдж рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд░рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3d8/d20/f59/3d8d20f5921bf342b2ac84b5677e9a3b.png"></div><br>  рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рд░рд╛рдЬреНрдп рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП рддреАрди рдкреНрд░рдореБрдЦ рдмрд┐рдВрджреБ рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рд░рд╛рдЬреНрдп рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рд╕рдордЧреНрд░ рд░реВрдк рд╕реЗ рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ: <br><br><ul><li>  <em>рдкреНрд░рд╡реЗрд╢</em> : рдпрд╣ рд╡рд╣ рдХреНрд╖рдг рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдХреЛрдИ рдЗрдХрд╛рдИ рдХрд┐рд╕реА рд░рд╛рдЬреНрдп рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреА рд╣реИ рдФрд░ рд░рд╛рдЬреНрдп рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╕рдордп рдХреЗрд╡рд▓ рдПрдХ рдмрд╛рд░ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </li><li>  <em>рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВ</em> : рдЗрдирдкреБрдЯ рдХреЗ рд╕рдорд╛рди - рд╕рднреА рд░реАрд╕реЗрдЯ рдСрдкрд░реЗрд╢рди рдпрд╣рд╛рдВ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ рдХреЗрд╡рд▓ рд░рд╛рдЬреНрдп рдкрд░рд┐рд╡рд░реНрддрди рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  <em>рдЕрдкрдбреЗрдЯ рд▓реВрдк</em> : рдпрд╣рд╛рдВ рдореВрд▓ <i>рдЕрджреНрдпрддрди рддрд░реНрдХ рд╣реИ</i> рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рдлреНрд░реЗрдо рдореЗрдВ рдЪрд▓рддрд╛ рд╣реИред  рдЗрд╕реЗ рдХрдИ рднрд╛рдЧреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рднреМрддрд┐рдХреА рдХреЛ рдЕрджреНрдпрддрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЪрдХреНрд░ рдФрд░ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рд▓рд┐рдП рдПрдХ рдЪрдХреНрд░ред </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a26/847/8e6/a268478e6da2566cc58d1083fefed27f.png"></div><br><h3>  рд░рд╛рдЬреНрдп рдФрд░ рд░рд╛рдЬреНрдп рдорд╢реАрди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ </h3><br>  <em>рдЖрд░рдбрдмреНрд▓реНрдпреВ / рд▓рд┐рдкрд┐рдпреЛрдВ рдкрд░</em> рдЬрд╛рдПрдВ рдФрд░ <em>StateMachine.cs</em> рдЦреЛрд▓реЗрдВред <br><br>  <em>рд░рд╛рдЬреНрдп рдорд╢реАрди</em> , рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЕрдиреБрдорд╛рди рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд░рд╛рдЬреНрдп рдорд╢реАрди рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдореВрд░реНрддрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ <code>CurrentState</code> рдЗрд╕ рд╡рд░реНрдЧ рдХреЗ рдЕрдВрджрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕реНрдерд┐рдд рд╣реИред  рдпрд╣ рд╡рд░реНрддрдорд╛рди рд╕рдХреНрд░рд┐рдп рд░рд╛рдЬреНрдп рдорд╢реАрди рд░рд╛рдЬреНрдп рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рд┐рдВрдХ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░реЗрдЧрд╛ред <br><br>  рдЕрдм, <i>рд░рд╛рдЬреНрдп</i> рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдЗрдП <em>RW / рд▓рд┐рдкрд┐рдпреЛрдВ рдкрд░ рдЬрд╛рдПрдВ</em> рдФрд░ IDE рдореЗрдВ <em>State.cs</em> рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЦреЛрд▓реЗрдВред <br><br>  <em>рд░рд╛рдЬреНрдп</em> рдПрдХ рдЕрдореВрд░реНрдд рд╡рд░реНрдЧ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдо рдПрдХ <i>рдореЙрдбрд▓ рдХреЗ</i> рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ рдЬрд┐рд╕рд╕реЗ рдкрд░рд┐рдпреЛрдЬрдирд╛ <i>рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ</i> рд╕рднреА <i>рд╡рд░реНрдЧ</i> рд╡реНрдпреБрддреНрдкрдиреНрди рд╣реИрдВред  рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╕рд╛рдордЧреНрд░реА рдореЗрдВ рдХреЛрдб рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рддреИрдпрд╛рд░ рд╣реИред <br><br>  <code>DisplayOnUI</code> рдХреЗрд╡рд▓ рдСрди-рд╕реНрдХреНрд░реАрди UI рдореЗрдВ рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХрд╛ рдирд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЖрдкрдХреЛ рдЗрд╕рдХреА рдЖрдВрддрд░рд┐рдХ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдЬрд╛рдирдиреЗ рдХреА рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реИ, рдмрд╕ рдпрд╣ рд╕рдордЭ рд▓реЗрдВ рдХрд┐ рдпрд╣ рдПрдХ рдЗрдирдкреБрдЯ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ <code>UIManager.Alignment</code> рдкреНрд░рдХрд╛рд░ рдХрд╛ рдПрдХ <code>UIManager.Alignment</code> рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ <code>Left</code> рдпрд╛ <code>Right</code> рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рд╕реНрдХреНрд░реАрди рдХреЗ рдмрд╛рдПрдВ рдпрд╛ рджрд╛рдПрдВ рддрд▓ рдореЗрдВ рд╕реНрдерд┐рддрд┐ рдХреЗ рдирд╛рдо рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдЗрд╕ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рджреЛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдЪрд░, <code>character</code> рдФрд░ <code>stateMachine</code> ред  <code>character</code> рдЪрд░ <em>рдЪрд░рд┐рддреНрд░</em> рд╡рд░реНрдЧ рдХреА рдПрдХ рдЖрд╡реГрддреНрддрд┐ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ <code>stateMachine</code> <em>рд░рд╛рдЬреНрдп</em> рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реЗ <em>рд░рд╛рдЬреНрдп рдорд╢реАрди рдХреА</em> рдПрдХ рдЖрд╡реГрддреНрддрд┐ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рд░рд╛рдЬреНрдп рдХрд╛ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рддреЗ рд╕рдордп, рдирд┐рд░реНрдорд╛рддрд╛ <code>character</code> рдФрд░ <code>stateMachine</code> рдмрд╛рдВрдзрддрд╛ рд╣реИред <br><br>  рдПрдХ рджреГрд╢реНрдп рдореЗрдВ <code>Character</code> рдХреЗ рдХрдИ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдореЗрдВ рд░рд╛рдЬреНрдпреЛрдВ рдФрд░ рд░рд╛рдЬреНрдп рдорд╢реАрдиреЛрдВ рдХрд╛ рдЕрдкрдирд╛ рд╕реЗрдЯ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЕрдм <em>State.cs</em> рдореЗрдВ рдирд┐рдореНрди рд╡рд┐рдзрд┐рдпрд╛рдБ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рд╣реЗрдЬреЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { DisplayOnUI(UIManager.Alignment.Left); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleInput</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogicUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PhysicsUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Exit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { }</code> </pre> <br>  рдпреЗ рд╡рд░реНрдЪреБрдЕрд▓ рддрд░реАрдХреЗ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рдкреНрд░рдореБрдЦ рд╕реНрдерд┐рддрд┐ рдмрд┐рдВрджреБрдУрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдЬрдм <em>рд░рд╛рдЬреНрдп рдорд╢реАрди</em> рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рдмреАрдЪ рдПрдХ рд╕рдВрдХреНрд░рдордг рдХрд░рддреА рд╣реИ, рддреЛ рд╣рдо рдкрд┐рдЫрд▓реЗ рд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП <code>Exit</code> рдФрд░ рдирдпрд╛ <i>рд╕рдХреНрд░рд┐рдп рд░рд╛рдЬреНрдп</i> <code>Enter</code> ред <br><br>  <code>HandleInput</code> , <code>LogicUpdate</code> рдФрд░ <code>PhysicsUpdate</code> рдПрдХ рд╕рд╛рде <i>рдЕрдкрдбреЗрдЯ рд▓реВрдк</i> рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  <code>HandleInput</code> рдЦрд┐рд▓рд╛рдбрд╝реА рдЗрдирдкреБрдЯ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред  <code>LogicUpdate</code> рдмреБрдирд┐рдпрд╛рджреА рддрд░реНрдХ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ, рдЬрдмрдХрд┐ <code>PhyiscsUpdate</code> рддрд░реНрдХ рдФрд░ рднреМрддрд┐рдХреА рдХреА рдЧрдгрдирд╛ рдХрд░рддрд╛ рд╣реИред <br><br>  рдЕрдм <em>StateMachine.cs рдХреЛ</em> рдлрд┐рд░ рд╕реЗ рдЦреЛрд▓реЗрдВ, рдирд┐рдореНрди рд╡рд┐рдзрд┐рдпрд╛рдБ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рд╣реЗрдЬреЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">State startingState</span></span></span><span class="hljs-function">)</span></span> { CurrentState = startingState; startingState.Enter(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ChangeState</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">State newState</span></span></span><span class="hljs-function">)</span></span> { CurrentState.Exit(); CurrentState = newState; newState.Enter(); }</code> </pre> <br>  <code>Initialize</code> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>CurrentState</code> рд╕реЗрдЯ рдХрд░рдХреЗ рд╕реНрдЯреЗрдЯ рдорд╢реАрди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ <code>Initialize</code> рдХрд░реЗрдВ рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП <code>Enter</code> рдХреЙрд▓ <code>Enter</code> ред  рдпрд╣ рдкрд╣рд▓реА рдмрд╛рд░ рд╕рдХреНрд░рд┐рдп рд░рд╛рдЬреНрдп рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд▓рд┐рдП, рд░рд╛рдЬреНрдп рдорд╢реАрди рдХреЛ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░рддрд╛ рд╣реИред <br><br>  <code>ChangeState</code> <em>рд░рд╛рдЬреНрдп</em> рд╕рдВрдХреНрд░рдордг рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ <em>рд╣реИ</em> ред  рдпрд╣ <code>CurrentState</code> рд╕рд╛рде рдЕрдкрдиреЗ рд╕рдВрджрд░реНрдн рдХреЛ рдмрджрд▓рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдкреБрд░рд╛рдиреЗ <code>CurrentState</code> рд▓рд┐рдП <code>Exit</code> рдХрд╣рддрд╛ рд╣реИред  рдЕрдВрдд рдореЗрдВ, рдпрд╣ <code>Enter</code> for <code>newState</code> рдХрд╣рддрд╛ рд╣реИред <br><br>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдо <em>рд░рд╛рдЬреНрдп</em> рдФрд░ <em>рд░рд╛рдЬреНрдп рдорд╢реАрди</em> рд╕реЗрдЯ рдХрд░рддреЗ <em>рд╣реИрдВ</em> ред <br><br><h3>  рдореЛрд╢рди рд╕реНрдЯреЗрдЯреНрд╕ рдмрдирд╛рдирд╛ </h3><br>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд░рд╛рдЬреНрдп рдЖрд░реЗрдЦ рдкрд░ рдПрдХ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ, рдЬреЛ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рдЦреЗрд▓ рдХреЗ рд╕рд╛рд░ <i>рдХреЗ рдЖрдВрджреЛрд▓рди рдХреА</i> рд╡рд┐рднрд┐рдиреНрди <i>рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЛ</i> рджрд░реНрд╢рд╛рддрд╛ рд╣реИред  рдЗрд╕ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ, рд╣рдо <i>FSM</i> рдЖрдХреГрддрд┐ рдореЗрдВ рджрд┐рдЦрд╛рдП рдЧрдП <i>рдЖрдВрджреЛрд▓рди рдХреЗ</i> рд▓рд┐рдП "рд╕реНрдерд┐рддрд┐" рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4fa/bf6/c19/4fabf6c19761d028d621903401a84746.png"></div><br>  рдЖрдВрджреЛрд▓рди рдХреЗ рд░рд╛рдЬреНрдпреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ, рдЕрд░реНрдерд╛рддреН <em>рд╕реНрдЯреИрдВрдбрд┐рдВрдЧ</em> , <em>рдбрдХрд┐рдВрдЧ</em> рдФрд░ <em>рдЬрдВрдкрд┐рдВрдЧ</em> , рд╕рд╛рде рд╣реА рд╕рд╛рде рдЖрдиреЗ рд╡рд╛рд▓реЗ рдбреЗрдЯрд╛ рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдХреНрд░рдордг рдХрд╛ рдХрд╛рд░рдг рдХреИрд╕реЗ рдмрдирддреЗ рд╣реИрдВред  рдпрд╣ рдПрдХ рдкрджрд╛рдиреБрдХреНрд░рдорд┐рдд рдПрдлрдПрд╕рдПрдо рд╣реИ рдЬрд┐рд╕рдореЗрдВ <em>рдЧреНрд░рд╛рдЙрдВрдбреЗрдб</em> <em>рдбрдХрд┐рдВрдЧ</em> рдФрд░ <em>рд╕реНрдЯреИрдВрдбрд┐рдВрдЧ</em> <em>рдЙрдк-рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ</em> рд▓рд┐рдП рдПрдХ рдЙрдк-рд░рд╛рдЬреНрдп <em>рд╣реИ</em> ред <br><br>  рдПрдХрддрд╛ рдкрд░ рд▓реМрдЯреЗрдВ рдФрд░ <em>рдЖрд░рдбрдмреНрд▓реНрдпреВ / рд▓рд┐рдкрд┐рдпреЛрдВ / рд░рд╛рдЬреНрдпреЛрдВ рдореЗрдВ рдЬрд╛рдПрдВ</em> ред  рд╡рд╣рд╛рдВ рдЖрдкрдХреЛ рдХрдИ рд╕реА # рдлрд╛рдЗрд▓реЗрдВ рдорд┐рд▓реЗрдВрдЧреА, рдЬрд┐рдирдХреЗ рдирд╛рдо <i>рд░рд╛рдЬреНрдп</i> рдореЗрдВ рд╕рдорд╛рдкреНрдд рд╣реЛрдВрдЧреЗред <br><br>  рдЗрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдлрд╛рдЗрд▓реЗрдВ рдПрдХ рд╡рд░реНрдЧ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреА рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ <code>State</code> рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓реА рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдпреЗ рд╡рд░реНрдЧ рдЙрди рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рд╣рдо рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред <br><br>  рдЕрдм <em>RW / Scripts</em> рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ <em>Character.cs</em> рдХреЛ рдЦреЛрд▓реЗрдВред <br><br>  <code>#region Variables</code> рдлрд╝рд╛рдЗрд▓ рдХреЗ рдКрдкрд░ рд╕реНрдХреНрд░реЙрд▓ рдХрд░реЗрдВ рдФрд░ рдирд┐рдореНрди рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> StateMachine movementSM; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> StandingState standing; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DuckingState ducking; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> JumpingState jumping;</code> </pre> <br>  рдпрд╣ <code>movementSM</code> рдПрдХ рд░рд╛рдЬреНрдп рдорд╢реАрди рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬреЛ <code>Character</code> рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдЧрддрд┐ рддрд░реНрдХ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИред  рд╣рдордиреЗ рддреАрди рд░рд╛рдЬреНрдпреЛрдВ рдХреЗ рд▓рд┐рдВрдХ рднреА рдЬреЛрдбрд╝реЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрдВрджреЛрд▓рди рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдПрдХ рд╣реА рдлрд╛рдЗрд▓ рдореЗрдВ <code>#region MonoBehaviour Callbacks</code> рдЬрд╛рдПрдВред  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.html" rel="noopener">MonoBehaviour</a> рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдлрд┐рд░ рд╕рд╣реЗрдЬреЗрдВ <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { movementSM = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StateMachine(); standing = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StandingState(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, movementSM); ducking = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DuckingState(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, movementSM); jumping = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JumpingState(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, movementSM); movementSM.Initialize(standing); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { movementSM.CurrentState.HandleInput(); movementSM.CurrentState.LogicUpdate(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FixedUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { movementSM.CurrentState.PhysicsUpdate(); }</code> </pre> <br><ul><li>  <code>Start</code> рдХреЛрдб <em>рд░рд╛рдЬреНрдп рдорд╢реАрди</em> рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ <code>movementSM</code> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд╕рд╛рдЗрди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдЧрддрд┐ рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рднреА рддреНрд╡рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдореЛрд╢рди рд╕реНрдЯреЗрдЯреНрд╕ рдмрдирд╛рддреЗ рд╕рдордп, рд╣рдо <code>this</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП <code>Character</code> рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рд╕рд╛рде-рд╕рд╛рде <code>movementSM</code> рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХрд╛ рд╕рдВрджрд░реНрдн рджреЗрддреЗ рд╣реИрдВред  рдЕрдВрдд рдореЗрдВ, рд╣рдо рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЕрд╡рд╕реНрдерд╛ рдХреЗ рд▓рд┐рдП <code>movementSM</code> рдФрд░ <code>Standing</code> рдХреЛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЕрд╡рд╕реНрдерд╛ рдХрд╣рддреЗ рд╣реИрдВред </li><li>  <code>Update</code> рд╡рд┐рдзрд┐ рдореЗрдВ, рд╣рдо <code>HandleInput</code> рдФрд░ <code>LogicUpdate</code> рдХреЛ <code>CurrentState</code> рдорд╢реАрди рдХреЗ <code>CurrentState</code> рдХреЗ рд▓рд┐рдП рдХрд╣рддреЗ рд╣реИрдВред  рдЗрд╕реА рддрд░рд╣, <code>FixedUpdate</code> рд╣рдо <code>PhysicsUpdate</code> рдХреЛ <code>CurrentState</code> рдорд╢реАрди рдХреЗ <code>PhysicsUpdate</code> рд▓рд┐рдП рдХрд╣рддреЗ рд╣реИрдВред  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдпрд╣ рдПрдХ рд╕рдХреНрд░рд┐рдп рд░рд╛рдЬреНрдп рдХреЛ рдХрд╛рд░реНрдп рд╕реМрдВрдкрддрд╛ рд╣реИ;  рдпрд╣ "рд╕реНрдерд┐рддрд┐" рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛ рдЕрд░реНрде рд╣реИред </li></ul><br>  рдЕрдм рд╣рдореЗрдВ рдЧрддрд┐ рдХреА рдкреНрд░рддреНрдпреЗрдХ рдЕрд╡рд╕реНрдерд╛ рдХреЗ рдЕрдВрджрд░ рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЕрдкрдиреЗ рдЖрдк рдХреЛ рд╕рдВрднрд╛рд▓реЛ, рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХреЛрдб рд╣реЛрдВрдЧреЗ! <br><br><h3>  рд╕реНрдерд╛рдпреА рдлрд░реНрдо </h3><br>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╡рд┐рдВрдбреЛ рдореЗрдВ <em>RW / рд▓рд┐рдкрд┐рдпреЛрдВ / рд░рд╛рдЬреНрдпреЛрдВ</em> рдореЗрдВ рд▓реМрдЯреЗрдВред <br><br>  <em>рдЧреНрд░рд╛рдЙрдВрдбреЗрдб</em> рдЦреЛрд▓реЗрдВред рдзреНрдпрд╛рди рджреЗрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдЗрд╕ рд╡рд░реНрдЧ рдореЗрдВ рдПрдХ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рд╣реИ рдЬреЛ <code>State</code> рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред  рдпрд╣ рддрд░реНрдХрд╕рдВрдЧрдд рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╡рд░реНрдЧ рдЗрд╕рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИред  рдЖрдк рдЕрдиреНрдп рд╕рднреА <i>рд░рд╛рдЬреНрдп</i> рд╡рд░реНрдЧреЛрдВ рдореЗрдВ рдПрдХ рд╣реА рдЪреАрдЬрд╝ рджреЗрдЦреЗрдВрдЧреЗред <br><br>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Enter(); horizontalInput = verticalInput = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Exit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Exit(); character.ResetMoveParams(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleInput</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.HandleInput(); verticalInput = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Vertical"</span></span>); horizontalInput = Input.GetAxis(<span class="hljs-string"><span class="hljs-string">"Horizontal"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PhysicsUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.PhysicsUpdate(); character.Move(verticalInput * speed, horizontalInput * rotationSpeed); }</code> </pre> <br>  рдпрд╣рд╛рдБ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ: <br><br><ul><li>  рд╣рдо рдореВрд▓ рдХрдХреНрд╖рд╛ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЖрднрд╛рд╕реА рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдорд╛рддрд╛-рдкрд┐рддрд╛ рдореЗрдВ рдореМрдЬреВрдж рд╕рднреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рд╕рдВрд░рдХреНрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдЕрдзрд┐рд░реЛрдкрд┐рдд рд╡рд┐рдзрд┐ рд╕реЗ рдПрдХ рд╣реА рдирд╛рдо рдХреЗ рд╕рд╛рде <code>base</code> рд╡рд┐рдзрд┐ рдХрд╣рддреЗ рд╣реИрдВред  рдпрд╣ рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЯреЗрдореНрдкрд▓реЗрдЯ рд╣реИ рдЬрд┐рд╕рдХрд╛ рд╣рдо рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦреЗрдВрдЧреЗред </li><li>  рдЕрдЧрд▓реА рдкрдВрдХреНрддрд┐, <code>Enter</code> рдЙрдирдХреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рдиреЛрдВ рдХреЗ <code>verticalInput</code> <code>horizontalInput</code> рдФрд░ <code>verticalInput</code> рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред </li><li>  рдЕрдВрджрд░ рд╕реЗ <code>Exit</code> рд╣рдо, рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдХрд┐рд╕реА рдЕрдиреНрдп рд░рд╛рдЬреНрдп рдореЗрдВ рдмрджрд▓рддреЗ рд╕рдордп рд░реАрд╕реЗрдЯ рдХрд░рдиреЗ <code></code> рд▓рд┐рдП <code></code> <code>ResetMoveParams</code> рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВред </li><li>  <code>HandleInput</code> рд╡рд┐рдзрд┐ рдореЗрдВ, <code>horizontalInput</code> рдЗрдирдкреБрдЯ рдФрд░ рд╡рд░реНрдЯрд┐рдХрд▓ рдЗрдирдкреБрдЯ рд╡реИрд░рд┐рдПрдмрд▓ рдХреНрд╖реИрддрд┐рдЬ рдФрд░ рдКрд░реНрдзреНрд╡рд╛рдзрд░ рдЗрдирдкреБрдЯ рдЕрдХреНрд╖реЛрдВ <code>HandleInput</code> рдореВрд▓реНрдпреЛрдВ рдХреЛ <code>HandleInput</code> рд╣реИрдВред  рдЗрд╕рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдЦрд┐рд▓рд╛рдбрд╝реА рдХреБрдВрдЬрд┐рдпреЛрдВ <em>рдбрдмреНрд▓реНрдпреВ</em> , <em>рдП</em> , <em>рдПрд╕</em> рдФрд░ <em>рдбреА</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЪрд░рд┐рддреНрд░ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИ <em>ред</em> </li><li>  <code>PhysicsUpdate</code> рд╣рдо рдПрдХ <code>PhysicsUpdate</code> рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ <code>verticalInput</code> рдЧрддрд┐ рд╕реЗ рдЧреБрдгрд╛ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ <code>horizontalInput</code> <code>PhysicsUpdate</code> рдФрд░ <code>verticalInput</code> рдЪрд░ рдХреЛ рдкрд╛рд░ рдХрд░рддрд╛ рд╣реИред  рдЪрд░ <code>speed</code> рдЧрддрд┐ рдХреА рдЧрддрд┐ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ <code>rotationSpeed</code> , рдХреЛрдгреАрдп рд╡реЗрдЧред </li></ul><br>  рдЕрдм <em>Standing.cs</em> рдЦреЛрд▓реЗрдВ рдФрд░ рдЗрд╕ рддрдереНрдп рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣ <code>Grounded</code> рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИред  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реБрдЖ, рдХреНрдпреЛрдВрдХрд┐ рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рдКрдкрд░ рдХрд╣рд╛, <em>рд╕реНрдЯреИрдВрдбрд┐рдВрдЧ</em> <em>рдЧреНрд░рд╛рдЙрдВрдбреЗрдб</em> рдХрд╛ рдПрдХ рд╡рд┐рдХрд▓реНрдк рд╣реИред  рдЗрд╕ рд░рд┐рд╢реНрддреЗ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рддрд░реАрдХреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдореЗрдВ рд╣рдо рд╡рд┐рд░рд╛рд╕рдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд <code>override</code> рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд╕рд╣реЗрдЬреЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Enter(); speed = character.MovementSpeed; rotationSpeed = character.RotationSpeed; crouch = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; jump = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleInput</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.HandleInput(); crouch = Input.GetButtonDown(<span class="hljs-string"><span class="hljs-string">"Fire3"</span></span>); jump = Input.GetButtonDown(<span class="hljs-string"><span class="hljs-string">"Jump"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogicUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.LogicUpdate(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (crouch) { stateMachine.ChangeState(character.ducking); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (jump) { stateMachine.ChangeState(character.jumping); } }</code> </pre> <br><ul><li>  <code>Enter</code> рд╣рдо <code>Grounded</code> рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдЪрд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╣реИрдВред  <code>speed</code> рдФрд░ <code>RotationSpeed</code> рдЪрд░рд┐рддреНрд░ рдХреЗ <code>MovementSpeed</code> рдФрд░ <code>RotationSpeed</code> рд▓рд╛рдЧреВ рдХрд░реЗрдВред  рдлрд┐рд░ рд╡реЗ рдХреНрд░рдорд╢рдГ рдЖрдВрджреЛрд▓рди рдХреА <i>рд╕рд╛рдорд╛рдиреНрдп</i> рдЧрддрд┐ рдФрд░ рдЪрд░рд┐рддреНрд░ рдХреЗ рд╕рд╛рд░ рдХреЗ рд▓рд┐рдП рдХреЛрдгреАрдп рдЧрддрд┐ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИрдВред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, <code>crouch</code> рдФрд░ <code>jump</code> рдЗрдирдкреБрдЯ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪрд░ рдЭреВрдареЗ рдкрд░ рд░реАрд╕реЗрдЯ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред </li><li>  <code>HandleInput</code> рдЕрдВрджрд░, <code>crouch</code> рдФрд░ <code>jump</code> рд╡реИрд░рд┐рдПрдмрд▓ <code>HandleInput</code> рдФрд░ <code>HandleInput</code> рд▓рд┐рдП рдкреНрд▓реЗрдпрд░ рдЗрдирдкреБрдЯ рд╕реНрдЯреЛрд░ рдХрд░рддреЗ рд╣реИрдВред  рдпрджрд┐ рдореБрдЦреНрдп рджреГрд╢реНрдп рдореЗрдВ рдЦрд┐рд▓рд╛рдбрд╝реА <em>рд╢рд┐рдлреНрдЯ рдХреБрдВрдЬреА</em> рджрдмрд╛рддрд╛ рд╣реИ <em>, рддреЛ</em> рд╕реНрдХреНрд╡реИрдЯ рдХреЛ рд╕рд╣реА рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕реА рддрд░рд╣, рдПрдХ рдЦрд┐рд▓рд╛рдбрд╝реА <code>jump</code> рд▓рд┐рдП <em>рд╕реНрдкреЗрд╕ рдХреА рдХрд╛</em> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИред </li><li>  <code>LogicUpdate</code> рд╣рдо рдЯрд╛рдЗрдк <code>bool</code> рдХреЗ <code>crouch</code> рдФрд░ <code>jump</code> рдЪрд░ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддреЗ рд╣реИрдВред  рдпрджрд┐ <code>crouch</code> рд╕рддреНрдп рд╣реИ, рддреЛ <code>movementSM.CurrentState</code> <code>character.ducking</code> рдмрджрд▓ рдЬрд╛рддрд╛ <code>character.ducking</code> ред  рдпрджрд┐ <code>jump</code> рд╕рд╣реА рд╣реИ, рддреЛ рд░рд╛рдЬреНрдп <code>character.jumping</code> рдмрджрд▓рддрд╛ рд╣реИред </li></ul><br>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рд╕рд╣реЗрдЬреЗрдВ рдФрд░ рдЗрдХрдЯреНрдард╛ рдХрд░реЗрдВ, рдлрд┐рд░ <em>рдкреНрд▓реЗ</em> рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рдЖрдк рдЪрд╛рдмрд┐рдпрд╛рдБ <em>рдбрдмреНрд▓реНрдпреВ</em> , <em>рдП</em> , <em>рдПрд╕</em> рдФрд░ <em>рдбреА</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рджреГрд╢реНрдп рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдШреВрдо рд╕рдХрддреЗ рд╣реИрдВ <em>ред</em>  рдпрджрд┐ рдЖрдк <em>рд╢рд┐рдлреНрдЯ</em> рдпрд╛ <em>рд╕реНрдкреЗрд╕</em> рдХреЛ рджрдмрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд╡реНрдпрд╡рд╣рд╛рд░ рд╣реЛрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рд╕рдВрдмрдВрдзрд┐рдд рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдЕрднреА рддрдХ рд▓рд╛рдЧреВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/450/89a/564/45089a5640a8d492b20ac5948e0fdf69.gif"></div><br>  рдЯреЗрдмрд▓ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЗ рдиреАрдЪреЗ рд▓реЗ рдЬрд╛рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдЪрд░рд┐рддреНрд░ рдХреЗ рдХреЛрд▓рд╛рдЗрдбрд░ рдХреА рдКрдВрдЪрд╛рдИ рдХреЗ рдХрд╛рд░рдг рдпрд╣ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИред  рдЪрд░рд┐рддреНрд░ рдХреЛ рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕реНрдХреНрд╡рд╛рдЯрд┐рдВрдЧ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред <br><br><h3>  рд╣рдо рдЯреЗрдмрд▓ рдХреЗ рдиреАрдЪреЗ рдЪрдврд╝рддреЗ рд╣реИрдВ </h3><br>  <em>Ducking.cs</em> рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЦреЛрд▓реЗрдВред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ <code>Ducking</code> рдХреЗ рд╕рдорд╛рди рдХрд╛рд░рдгреЛрдВ рд╕реЗ <code>Ducking</code> рдХреЛ <code>Grounded</code> рдХреНрд▓рд╛рд╕ рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИред  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд <code>override</code> рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд╕рд╣реЗрдЬреЗрдВ: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Enter(); character.SetAnimationBool(character.crouchParam, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); speed = character.CrouchSpeed; rotationSpeed = character.CrouchRotationSpeed; character.ColliderSize = character.CrouchColliderHeight; belowCeiling = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Exit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Exit(); character.SetAnimationBool(character.crouchParam, <span class="hljs-literal"><span class="hljs-literal">false</span></span>); character.ColliderSize = character.NormalColliderHeight; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleInput</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.HandleInput(); crouchHeld = Input.GetButton(<span class="hljs-string"><span class="hljs-string">"Fire3"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogicUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.LogicUpdate(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(crouchHeld || belowCeiling)) { stateMachine.ChangeState(character.standing); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PhysicsUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.PhysicsUpdate(); belowCeiling = character.CheckCollisionOverlap(character.transform.position + Vector3.up * character.NormalColliderHeight); }</code> </pre> <br><ul><li>  <code>Enter</code> рдЕрдВрджрд░ <code>Enter</code> рд╕реНрдХреНрд╡рд╛рдЯ рдПрдиреАрдореЗрд╢рди рдЯреЙрдЧрд▓ рдХрд╛ рдХрд╛рд░рдг рдмрдирдиреЗ <code>Enter</code> рдкреИрд░рд╛рдореАрдЯрд░ рдХреНрд░рд╛рдЙрдЪ рдкрд░ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рд╕реНрдХреНрд╡рд╛рдЯ рдПрдиреАрдореЗрд╢рди рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИред  <code>character.CrouchSpeed</code> рдФрд░ <code>character.CrouchRotationSpeed</code> рдЧреБрдгреЛрдВ рдХреЛ <code>speed</code> рдФрд░ <code>rotation</code> рдорд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЬреЛ <i>рдПрдХ рд╕реНрдХреНрд╡рд╛рдЯ рдореЗрдВ рдЪрд▓рддреЗ</i> рд╕рдордп рдЪрд░рд┐рддреНрд░ рдХреА рдЧрддрд┐ рдФрд░ рдХреЛрдгреАрдп рдЧрддрд┐ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдЕрдЧрд▓рд╛ <code>character.CrouchColliderHeight</code> CrouchColliderHeight рдЪрд░рд┐рддреНрд░ рдХреЗ рдХреЛрд▓рд╛рдЗрдбрд░ рдХрд╛ рдЖрдХрд╛рд░ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд╕реНрдХреНрд╡реАрдЯрд┐рдВрдЧ рдХрд░рддреЗ рд╕рдордп рд╡рд╛рдВрдЫрд┐рдд рдХреЛрд▓рд╛рдЗрдбрд░ рдХреА рдКрдБрдЪрд╛рдИ рджреЗрддрд╛ рд╣реИред  рдЕрдВрдд рдореЗрдВ, <code>belowCeiling</code> рджрд┐рдпрд╛ рдЧрдпрд╛ рдЧрд▓рдд рдкрд░ рд░реАрд╕реЗрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  рдЗрдирд╕рд┐рдЯ рд╕реЗ <code>Exit</code> рд╕реНрдХреНрд╡рд╛рдЯ рдПрдиреАрдореЗрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рдЧрд▓рдд рдкрд░ рд╕реЗрдЯ рд╣реИред  рдпрд╣ рд╕реНрдХреНрд╡рд╛рдЯ рдПрдиреАрдореЗрд╢рди рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░рддрд╛ рд╣реИред  рдлрд┐рд░ рд╕рд╛рдорд╛рдиреНрдп рдХреЛрд▓рд╛рдЗрдбрд░ рдХреА рдКрдБрдЪрд╛рдИ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ, рдЬрд┐рд╕реЗ <code>character.NormalColliderHeight</code> рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ <code>character.NormalColliderHeight</code> ред NormalColliderHeightред </li><li>  <code>HandleInput</code> рдЕрдВрджрд░ <code>HandleInput</code> рдЪрд░ <code>crouchHeld</code> рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рдЗрдирдкреБрдЯ рдореВрд▓реНрдп рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  <em>рдореБрдЦреНрдп</em> рджреГрд╢реНрдп рдореЗрдВ, <em>Shift рдХреЛ</em> <code>crouchHeld</code> рдХреЛ рд╕рддреНрдп <code>crouchHeld</code> рд╣реИред </li><li>  <code>PhysicsUpdate</code> рдЕрдВрджрд░ <code>PhysicsUpdate</code> рдЪрд░ рдХреЗ <code>belowCeiling</code> рдЪрд░ рдХреЛ <code>belowCeiling</code> рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдПрдХ рдмрд┐рдВрджреБ рдкрд╛рд╕ рдХрд░рдХреЗ рдПрдХ рдорд╛рди рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╡рд░реНрдг рдЧреЗрдо рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдкреНрд░рдореБрдЦ рдХреЗ рд╕рд╛рде <code>CheckCollisionOverlap</code> рд╡рд┐рдзрд┐ рд╣реИред  рдпрджрд┐ рдЗрд╕ рдмрд┐рдВрджреБ рдХреЗ рдкрд╛рд╕ рдПрдХ рдЯрдХреНрдХрд░ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЪрд░рд┐рддреНрд░ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреА рдЫрдд рдХреЗ рдиреАрдЪреЗ рд╣реИред </li><li>  рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ, <code>LogicUpdate</code> рдЪреЗрдХ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ <code>crouchHeld</code> рдпрд╛ рдЙрд╕рд╕реЗ <code>belowCeiling</code> рд╣реИред  рдпрджрд┐ рдЙрдирдореЗрдВ рд╕реЗ рдХреЛрдИ рднреА рд╕рддреНрдп рдирд╣реАрдВ рд╣реИ, рддреЛ <code>movementSM.CurrentState</code> ред </li></ul><br>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ рдФрд░ <em>Play</em> рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рдЕрдм рдЖрдк рджреГрд╢реНрдп рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдШреВрдо рд╕рдХрддреЗ рд╣реИрдВред  рдпрджрд┐ рдЖрдк <em>Shift</em> рджрдмрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╡рд░реНрдг рдиреАрдЪреЗ рдмреИрда рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЖрдк рд╕реНрдХреНрд╡рд╛рдЯ рдореЗрдВ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЖрдк рдордВрдЪ рдХреЗ рдиреАрдЪреЗ рднреА рдЪрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдпрджрд┐ рдЖрдк рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреЗ рдиреАрдЪреЗ <em>рд╢рд┐рдлреНрдЯ</em> рд░рд┐рд▓реАрдЬрд╝ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЪрд░рд┐рддреНрд░ рддрдм рддрдХ рдПрдХ рд╡рд░реНрдЧ рдореЗрдВ рд░рд╣реЗрдЧрд╛, рдЬрдм рддрдХ рд╡рд╣ рдЕрдкрдирд╛ рдЖрд╢реНрд░рдп рдирд╣реАрдВ рдЫреЛрдбрд╝ рджреЗрддрд╛ред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee4/dce/657/ee4dce657ae6be49244106652a168a3a.gif"></div><br><h3>  рдЪрдврд╝рддрд╛ рд╣реИ! </h3><br>  <em>рдЬрдВрдкрд┐рдВрдЧ</em> рдЦреЛрд▓реЗрдВред  рдЖрдкрдХреЛ <code>Jump</code> рдирд╛рдордХ рдПрдХ рд╡рд┐рдзрд┐ рджрд┐рдЦрд╛рдИ рджреЗрдЧреАред  рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рди рдХрд░реЗрдВ;  рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ рдХрд┐ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЪрд░рд┐рддреНрд░ рднреМрддрд┐рдХреА рдФрд░ рдПрдиреАрдореЗрд╢рди рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдХрд░ рдХреВрдж рд╕рдХреЗред <br><br>  рдЕрдм рд╕рд╛рдорд╛рдиреНрдп <code>override</code> рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдмрдЪрд╛рдПрдВ <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Enter(); SoundManager.Instance.PlaySound(SoundManager.Instance.jumpSounds); grounded = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; Jump(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LogicUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.LogicUpdate(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (grounded) { character.TriggerAnimation(landParam); SoundManager.Instance.PlaySound(SoundManager.Instance.landing); stateMachine.ChangeState(character.standing); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PhysicsUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.PhysicsUpdate(); grounded = character.CheckCollisionOverlap(character.transform.position); }</code> </pre> <br><ul><li>  <code>Enter</code> рдЕрдВрджрд░ <code>Enter</code> рд╕рд┐рдВрдЧрд▓рдЯрди <code>SoundManager</code> рдХреА рдЖрд╡рд╛рдЬ рдмрдЬрд╛рддрд╛ рд╣реИред  рдлрд┐рд░ <code>grounded</code> рдХреЛ рдЙрд╕рдХреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рдкрд░ рд░реАрд╕реЗрдЯ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЖрдЦрд┐рд░ рдореЗрдВ <code>Jump</code> рдХреЛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <code>PhysicsUpdate</code> рдЕрдВрджрд░ <code>PhysicsUpdate</code> рдЪрд░рд┐рддреНрд░ рдХреЗ рдкреИрд░реЛрдВ рдХреЗ рдЖрдЧреЗ <code>PhysicsUpdate</code> рдмрд┐рдВрджреБ <code>PhysicsUpdate</code> рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЬрдм рдЪрд░рд┐рддреНрд░ рдЬрдореАрди рдкрд░ рд╣реИ, рддреЛ <code>grounded</code> рдХреЛ рд╕рд╣реА рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </li><li>  <code>LogicUpdate</code> , рдпрджрд┐ <code>grounded</code> рд╕рд╣реА рд╣реИ, рддреЛ рд╣рдо <code>TriggerAnimation</code> рдПрдиреАрдореЗрд╢рди рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЯреНрд░рд┐рдЧрд░ рдПрдирд┐рдореЗрд╢рди рдХрд╣рддреЗ рд╣реИрдВ, рдЯрдЪрдбрд╛рдЙрди рд╕рд╛рдЙрдВрдб рдмрдЬрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ <code>movementSM.CurrentState</code> рдореЗрдВ <code>character.standing</code> рдмрджрд▓рд╛рд╡ рд╣реЛрддрд╛ <code>character.standing</code> ред </li></ul><br>  рдЗрд╕рд▓рд┐рдП, рдЗрд╕ рдкрд░ рд╣рдордиреЗ <em>"рд░рд╛рдЬреНрдп" рдЯреЗрдореНрдкрд▓реЗрдЯ</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ FSM рд╡рд┐рд╕реНрдерд╛рдкрди рдХрд╛ рдкреВрд░реНрдг рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдкреВрд░рд╛ рдХрд░ <em>рд▓рд┐рдпрд╛ рд╣реИ</em> ред  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ рдФрд░ рдЙрд╕реЗ рдЪрд▓рд╛рдПрдВред  рдХреИрд░реЗрдХреНрдЯрд░ рдЬрдВрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <em>рд╕реНрдкреЗрд╕</em> рджрдмрд╛рдПрдВред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ebd/e16/05d/ebde1605dc739588529c51509e19c0a8.gif"></div><br><h2>  рдЖрдЧреЗ рдХрд╣рд╛рдБ рдЬрд╛рдирд╛ рд╣реИ? </h2><br>  <a href="">рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╕рд╛рдордЧреНрд░реА</a> рдореЗрдВ рдПрдХ рдорд╕реМрджрд╛ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдФрд░ рдПрдХ рддреИрдпрд╛рд░ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╣реИред <br><br>  рдЗрд╕рдХреА рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рдмрд╛рд╡рдЬреВрдж, рд░рд╛рдЬреНрдп рдорд╢реАрдиреЛрдВ рдХреА рд╕реАрдорд╛рдПрдВ рд╣реИрдВред  рд╕рдорд╡рд░реНрддреА рд░рд╛рдЬреНрдп рдорд╢реАрдиреЗрдВ рдФрд░ рдкреБрд╢рдбрд╛рдЙрди рдСрдЯреЛрдореИрдЯрди рдорд╢реАрдиреЗрдВ рдЗрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рд╕реАрдорд╛рдУрдВ рдХреЛ рд╕рдВрднрд╛рд▓ рд╕рдХрддреА рд╣реИрдВред  рдЖрдк рдЙрдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд░реЙрдмрд░реНрдЯ рдирд┐рд╕реНрдЯреНрд░реЛрдо <a href="https://gameprogrammingpatterns.com/state.html" rel="noopener"><em>рдЧреЗрдо рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдкреИрдЯрд░реНрди</em></a> рдХреА рдкреБрд╕реНрддрдХ рдореЗрдВ рдкрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЧреЗрдо рдореЗрдВ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдЧреЗрдо рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ <a href="https://en.wikipedia.org/wiki/Behavior_tree_(artificial_intelligence,_robotics_and_control)" rel="noopener"><em>рд╡реНрдпрд╡рд╣рд╛рд░ рдкреЗрдбрд╝реЛрдВ рдХреА</em></a> рдЬрд╛рдВрдЪ рдХрд░рдХреЗ рд╡рд┐рд╖рдп рдХреЛ рдЧрд╣рд░рд╛рдИ рд╕реЗ рдЦреЛрдЬрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi484176/">https://habr.com/ru/post/hi484176/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi484166/index.html">VVVVVV ??? VVVVVV !!! :)</a></li>
<li><a href="../hi484168/index.html">рд╣рдо рдХреЛрдгреАрдп рд╕реАрдбреАрдХреЗ рд╕реЗ рдЖрднрд╛рд╕реА рд╕реНрдХреНрд░реЙрд▓рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рд░рдгрдиреАрддрд┐ рд▓рд┐рдЦрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi484170/index.html">R77.30 рд╕реЗ 80.20 рддрдХ рдЪреЗрдХ рдкреНрд╡рд╛рдЗрдВрдЯ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ</a></li>
<li><a href="../hi484172/index.html">рдПрдХрддрд╛ рдореЗрдВ рдирд┐рд░рдВрддрд░ рдПрдХреАрдХрд░рдг: рдПрдХ рдЙрдкрд╣рд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХреЗ рд╕рдордп рдХреЛ рдХрдо рдХрд░рдиреЗ рдФрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдмрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП + рдХреИрд╕реЗ</a></li>
<li><a href="../hi484174/index.html">"рдЪрд░рдо" рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдпрд╛ рдЬрдм рд╣рдордиреЗ "DOZOR" рд╢реЛ рдореЗрдВ рднрд╛рдЧ рд▓рд┐рдпрд╛, рддрдм рдХреИрд╕рд▓ рдкреАрдирд╛</a></li>
<li><a href="../hi484178/index.html">рдЧреНрд░рд╣ рдкреГрдереНрд╡реА рдХреЗ рд▓рд┐рдП рдмреБрджреНрдзрд┐рдорд╛рди рдИрдерд░рдиреЗрдЯ рд╕реНрд╡рд┐рдЪ</a></li>
<li><a href="../hi484180/index.html">рд░реЛрд╕реНрдЯреЗрд▓рдХреЙрдо рд╡рд░реНрдЪреБрдЕрд▓ рдкреАрдмреАрдПрдХреНрд╕: рдПрдкреАрдЖрдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХреНрдпрд╛ рдФрд░ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</a></li>
<li><a href="../hi484182/index.html">рдПрдХреНрд╕рдиреЛрдмреЛрдЯреНрд╕: рдореЗрдВрдврдХ рдХреЛрд╢рд┐рдХрд╛рдУрдВ рд╕реЗ рдЬреАрд╡рд┐рдд рдиреИрдиреЛрд░реЛрдмреЛрдЯреНрд╕</a></li>
<li><a href="../hi484186/index.html">LDAP - "рдкреНрд░рдорд╛рдгреАрдХрд░рдг" рдПрдХ рдПрдВрдЯреАрдкреИрдЯрд░реНрди рд╣реИ</a></li>
<li><a href="../hi484188/index.html">рдбреЗрдЯрд╛рдмреЗрд╕ рдбрд┐рдЬрд╛рдЗрди рдорд╛рдирдХ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>