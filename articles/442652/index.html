<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÜ ü•í üè≠ Uso de Fastify y Preact para prototipar r√°pidamente aplicaciones web ‚§¥Ô∏è ü•ë üë©üèΩ‚Äç‚úàÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El autor del material, cuya traducci√≥n publicamos hoy, quiere compartir una historia sobre las tecnolog√≠as que utiliza para desarrollar r√°pidamente pr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Uso de Fastify y Preact para prototipar r√°pidamente aplicaciones web</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/442652/">  El autor del material, cuya traducci√≥n publicamos hoy, quiere compartir una historia sobre las tecnolog√≠as que utiliza para desarrollar r√°pidamente prototipos de aplicaciones web.  Estas tecnolog√≠as incluyen las bibliotecas Fastify y Preact.  Tambi√©n usa la biblioteca htm.  Se integra f√°cilmente con Preact y se utiliza para describir elementos DOM utilizando construcciones intuitivas que recuerdan a JSX.  Al mismo tiempo, no se necesita un transpilador como Babel para trabajar con √©l.  Despu√©s de demostrar las herramientas de desarrollo de prototipos y los m√©todos para trabajar con √©l, el autor del material mostrar√° c√≥mo empaquetar dichas aplicaciones en contenedores Docker.  Esto facilita la demostraci√≥n de aplicaciones a todos los interesados. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/iq/mq/4a/iqmq4a-j0p_qnlayhqdbmbb2au4.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Inicio</font> </h2><br>  Hace unas semanas, utilic√© el conjunto de tecnolog√≠as antes mencionado cuando necesitaba crear una aplicaci√≥n web prototipo muy simple dise√±ada para probar, junto con mis colegas, algunas suposiciones. <br><br>  Mi experimento fue extremadamente exitoso.  Pude crear un prototipo muy r√°pido, los colegas tuvieron la oportunidad de experimentar con √©l convenientemente, pudieron expresar r√°pidamente sus impresiones al respecto.  Al mismo tiempo, podr√≠an probar el proyecto incluso si Node.js y NPM no estuvieran instalados en sus computadoras. <br><br>  Todo esto me llev√≥ a la idea de que deber√≠a escribir material sobre mi enfoque para la creaci√≥n r√°pida de prototipos de aplicaciones web.  Es posible que este enfoque sea √∫til para otra persona.  Para aquellos que ya est√°n familiarizados con Fastify y Preact, describir√© de inmediato lo m√°s importante, lo que les permitir√° poner en pr√°ctica mis ideas de inmediato. <br><br><h2>  <font color="#3AC1EF">Ideas principales</font> </h2><br>  Si ya est√° familiarizado con Fastify y Preact y desea aprender sobre c√≥mo organizar el desarrollo de proyectos basados ‚Äã‚Äãen estas tecnolog√≠as, entonces est√° literalmente a un par de pasos de lo que desea.  A saber, estamos hablando de los siguientes comandos: <br><br><pre><code class="plaintext hljs">git clone https://github.com/lmammino/fastify-preact-htm-boilerplate.git my-new-project cd my-new-project rm -rf .git npm install</code> </pre> <br>  Por supuesto, puede cambiar el nombre del proyecto, <code>my-new-project</code> , al nombre de su proyecto. <br><br>  Despu√©s de instalar todo lo que necesita, puede comenzar a trabajar en el proyecto.  A saber, estamos hablando de lo siguiente: <br><br><ul><li>  La carpeta <code>src/ui</code> contiene archivos de la parte cliente de la aplicaci√≥n (aqu√≠ se utilizan Preact y htm). </li><li>  La carpeta <code>src/server</code> contiene archivos relacionados con el lado del servidor de la aplicaci√≥n (aqu√≠ se usa Fastify). </li></ul><br>  Al editar los archivos apropiados, puede ejecutar el proyecto: <br><br><pre> <code class="plaintext hljs">npm start</code> </pre> <br>  Despu√©s de eso, puede probarlo yendo a la direcci√≥n <code>localhost:3000</code> en el navegador. <br><br>  Y una cosa m√°s.  Si te gust√≥ mi desarrollo, estar√© inmensamente agradecido por la estrella en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> . <br><br>  Ahora echemos un vistazo a las tecnolog√≠as utilizadas aqu√≠ y las caracter√≠sticas de trabajar con ellas. <br><br><h2>  <font color="#3AC1EF">Fastify</font> </h2><br>  Fastify es un marco web r√°pido y econ√≥mico para Node.js.  Este proyecto fue creado originalmente por dos programadores.  Ahora, el equipo de quienes trabajan en √©l tiene 10 personas, m√°s de 130 personas ayudan en el desarrollo del proyecto, recolect√≥ casi 10,000 estrellas en GitHub. <br><br>  Fastify fue influenciado por los frameworks Node.js como Express y Hapi, que han existido durante bastante tiempo.  Originalmente estaba dirigido a la productividad, a la conveniencia de los programadores y a expandir sus capacidades con la ayuda de complementos.  Esta, por cierto, es una de mis caracter√≠sticas favoritas de Fastify. <br><br>  Si no est√° familiarizado con el marco de Fastify o desea conocerlo mejor, puedo recomendar su <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n</a> oficial. <br><br>  Cabe se√±alar que estoy relacionado con Fastify.  Soy miembro del equipo principal de desarrollo y me dedico principalmente a apoyar el sitio del proyecto y a trabajar en su documentaci√≥n. <br><br><h2>  <font color="#3AC1EF">Preact</font> </h2><br>  Preact es una biblioteca para desarrollar interfaces de usuario para proyectos web, que fue creada por una persona como un reemplazo compacto y r√°pido para React.  Este proyecto result√≥ ser bastante exitoso, ahora todo un equipo de desarrolladores est√° involucrado en √©l, en GitHub obtuvo m√°s de 20,000 estrellas. <br><br>  Una de las razones por las que me gusta Preact es que esta biblioteca tiene una capa extensible para describir los componentes visuales de la aplicaci√≥n.  En circunstancias normales, esta biblioteca se puede usar usando JSX en combinaci√≥n con Babel para traducir el c√≥digo, pero si no desea instalar Babel y configurar el proceso de compilaci√≥n de la aplicaci√≥n, puede usar Preact, por ejemplo, junto con la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">htm</a> , que usa plantillas literales y no requiere transpilaci√≥n al iniciar proyectos en los que se utiliza en navegadores modernos. <br><br>  En este art√≠culo usaremos la biblioteca htm y pronto consideraremos algunos ejemplos. <br><br><h2>  <font color="#3AC1EF">Resumen del proyecto</font> </h2><br>  Aqu√≠ nos fijamos en todo el proceso de creaci√≥n de un proyecto.  Nuestro objetivo ser√° desarrollar una aplicaci√≥n web simple que muestre informaci√≥n sobre la hora en el servidor en el momento de su lanzamiento.  Aqu√≠, para que quede m√°s claro por qu√© nos esforzaremos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d8/9fe/c12/4d89fec1291d3ab9b66f7673af992d06.png"></div><br>  <i><font color="#999999">Aplicaci√≥n en navegador</font></i> <br><br>  Esta es una aplicaci√≥n de p√°gina √∫nica (SPA), en la que Preact y htm se usan para formar su parte cliente, y Fastify se usa para crear una API dise√±ada para recibir el tiempo del servidor. <br><br>  Un lector atento puede notar que la p√°gina que se muestra en la figura anterior tiene un √≠cono de favicon.  Es cierto, √©l es muy peque√±o all√≠, as√≠ que voy a facilitar la tarea a aquellos que, rompiendo los ojos, est√°n tratando de distinguir.  Aqu√≠ hay una versi√≥n ampliada de la misma. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aaa/3a8/c3b/aaa3a8c3b25bba5f361af23d9af0f22b.jpg"></div><br>  <i><font color="#999999">Favicon</font></i> <br><br><h2>  <font color="#3AC1EF">Configurar el lado del servidor de la aplicaci√≥n</font> </h2><br>  Comencemos creando una nueva carpeta: <br><br><pre> <code class="plaintext hljs">mkdir server-time cd server-time</code> </pre> <br>  Ahora inicialice el proyecto NPM e instale Fastify: <br><br><pre> <code class="plaintext hljs">npm init -y npm i --save fastify@next fastify-static@next fastify-cli</code> </pre> <br>  Tenga en cuenta que us√© la construcci√≥n <code>@next</code> al describir algunos <code>@next</code> dependencia.  Esto se hace para que el proyecto use la biblioteca Fastify 2, que actualmente se encuentra en un estado candidato de lanzamiento, pero muy pronto se convertir√° en la versi√≥n estable principal. <br><br>  Tenga en cuenta que tambi√©n puede crear un nuevo proyecto basado en Fastify utilizando la <code>fastify-cli</code> l√≠nea de comandos <code>fastify-cli</code> : <br><br><pre> <code class="plaintext hljs">npx fastify-cli generate server-time</code> </pre> <br>  Al momento de escribir este material, este equipo crea un proyecto dise√±ado para usar Fastify 1.x, pero muy pronto, despu√©s del lanzamiento de Fastify 2, esta herramienta se actualizar√°. <br><br>  Analicemos los paquetes instalados: <br><br><ul><li>  <code>fastify</code> es un componente central del marco. </li><li>  <code>fastify-static</code> es un complemento adicional que le permite servir convenientemente archivos est√°ticos con el servidor Fastify. </li><li>  <code>fastify-cli</code> es una herramienta de l√≠nea de comandos que le permite crear proyectos basados ‚Äã‚Äãen Fastify. </li></ul><br>  Por el momento, estamos listos para crear una API basada en Fastify.  Pongamos el c√≥digo del servidor en el <code>src/server/server.js</code> : <br><br><pre> <code class="plaintext hljs">const path = require('path') module.exports = async function(fastify, opts) { //      `src/ui` fastify.register(require('fastify-static'), {   root: path.join(__dirname, '..', 'ui'), }) //     API fastify.get('/api/time', async (request, reply) =&gt; {   return { time: new Date().toISOString() } }) }</code> </pre> <br>  Creo que el c√≥digo anterior se explica bien, pero hay algunos detalles interesantes de los que vale la pena hablar.  Esto ser√° especialmente √∫til para aquellos que no tienen experiencia con Fastify. <br><br>  Lo primero a lo que puede prestar atenci√≥n en este c√≥digo es que aqu√≠ se usa la palabra clave <code>async</code> .  Fastify admite el desarrollo de estilo as√≠ncrono / en espera y un enfoque de devoluci√≥n de llamada m√°s tradicional.  Qu√© elegir exactamente depende de las preferencias de un desarrollador en particular. <br><br>  Otro detalle interesante es que definimos el servidor aqu√≠ como un m√≥dulo exportado.  Este m√≥dulo (esto se llama un "complemento" en la jerga de Fastify) es una funci√≥n que toma una instancia de Fastify ( <code>fastify</code> ) y un conjunto de opciones ( <code>opts</code> ) como argumentos.  Dentro de la declaraci√≥n del m√≥dulo, podemos usar una instancia de <code>fastify</code> para registrar complementos.  Esto es exactamente lo que sucede con el <code>fastify-static</code> .  Tambi√©n podemos describir puntos finales HTTP utilizando m√©todos especiales como <code>fastify.get</code> y <code>fastify.post</code> . <br><br>  El enfoque modular utilizado aqu√≠, aunque parece un poco inusual, tiene sus ventajas.  Para empezar, debe tenerse en cuenta que le permite combinar varios servidores.  Imagine que ha creado un servidor dise√±ado para servir un blog y otro para un foro.  Se pueden integrar f√°cilmente en una aplicaci√≥n existente uni√©ndolos a rutas como <code>/blog</code> y <code>/forum</code> . <br><br>  Adem√°s, este enfoque le permite abstraer aplicaciones y sub-aplicaciones de los enlaces del servidor (por ejemplo, enlace de socket), pasando la soluci√≥n a esta tarea ya sea a la aplicaci√≥n ra√≠z o <code>fastify-cli</code> . <br><br>  Inicie el servidor utilizando la <code>fastify</code> l√≠nea de comandos <code>fastify</code> : <br><br><pre> <code class="plaintext hljs">node_modules/.bin/fastify start --log-level info src/server/server.js</code> </pre> <br>  Para simplificar nuestra vida, podemos agregar este comando a la secci√≥n de <code>scripts</code> de nuestro archivo <code>package.json</code> : <br><br><pre> <code class="plaintext hljs">{ "scripts": {   "start": "fastify start --log-level info src/server/server.js" } }</code> </pre> <br>  Antes de iniciar realmente el servidor, debemos asegurarnos de que haya una carpeta en la que se ubicar√°n los recursos est√°ticos.  De lo contrario, <code>fastify-static</code> error.  Crea esta carpeta: <br><br><pre> <code class="plaintext hljs">mkdir src/ui</code> </pre> <br>  Ahora podemos iniciar la aplicaci√≥n con el comando <code>npm start</code> y navegar usando el navegador a <code>localhost:3000/api/time</code> . <br><br>  Si todo funciona correctamente, en el navegador puede ver algo como lo siguiente: <br><br><pre> <code class="plaintext hljs">{ "time": "2019-02-17T19:32:03.354Z" }</code> </pre> <br>  En este punto, puede apreciar otra buena caracter√≠stica de Fastify.  Se basa en el hecho de que la serializaci√≥n JSON, en el caso de que una ruta determinada devuelva un objeto, se aplica autom√°ticamente. <br><br>  Ahora se completa el trabajo en la API del servidor.  Tengamos una interfaz. <br><br><h2>  <font color="#3AC1EF">Configuraci√≥n frontend</font> </h2><br>  Todo el c√≥digo de nuestro proyecto relacionado con la interfaz se ubicar√° en la carpeta <code>src/ui</code> .  Constar√° de 5 archivos: <br><br><ul><li>  <code>app.js</code> : crea el c√≥digo de la aplicaci√≥n. </li><li>  <code>bootstrap.min.css</code> : c√≥digo CSS para dise√±ar la aplicaci√≥n (se toma directamente del marco Bootstrap). </li><li>  <code>favicon.ico</code> : archivo favicon.  Si est√° desarrollando una aplicaci√≥n seria, no puede prescindir de un buen archivo favicon. </li><li>  <code>index.html</code> es el archivo HTML principal de nuestra aplicaci√≥n de una p√°gina. </li><li>  <code>preacthtm.js</code> : c√≥digo de las bibliotecas Preact y htm. </li></ul><br>  Primero, coloque los archivos en la carpeta, que son estilos, bibliotecas y el √≠cono de favicon: <br><br><pre> <code class="plaintext hljs">curl "https://unpkg.com/htm@2.0.0/preact/standalone.js" &gt; src/ui/preacthtm.js curl "https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" &gt; src/ui/bootstrap.min.css curl "https://github.com/lmammino/fastify-preact-htm-boilerplate/blob/master/src/ui/favicon.ico?raw=true" &gt; src/ui/favicon.ico</code> </pre> <br>  Ahora cree el archivo <code>src/ui/index.html</code> : <br><br><pre> <code class="plaintext hljs">&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt;   &lt;meta charset="utf-8" /&gt;   &lt;meta     name="viewport"     content="width=device-width, initial-scale=1, shrink-to-fit=no"   /&gt;   &lt;!-- Bootstrap CSS --&gt;   &lt;link rel="stylesheet" href="/bootstrap.min.css" /&gt;   &lt;title&gt;My awesome server time&lt;/title&gt; &lt;/head&gt; &lt;body&gt;   &lt;div id="app"&gt;&lt;/div&gt;   &lt;!-- JavaScript --&gt;   &lt;script src="/preacthtm.js"&gt;&lt;/script&gt;   &lt;script src="/app.js"&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre> <br>  Tenemos ante nosotros una p√°gina HTML muy ordinaria con la que cargamos todos los recursos (CSS y JS) y creamos un elemento <code>&lt;div&gt;</code> vac√≠o con la <code>app</code> identificaci√≥n, en el que enviaremos nuestra aplicaci√≥n durante la ejecuci√≥n del proyecto. <br><br>  Ahora eche un vistazo al c√≥digo de la aplicaci√≥n, que debe estar en el <code>src/ui/app.js</code> : <br><br><pre> <code class="plaintext hljs">/*  htmPreact */ const { html, Component, render } = htmPreact class App extends Component { componentDidMount() {   this.setState({ loading: true, time: null })   fetch('/api/time')     .then(response =&gt; response.json())     .then(data =&gt; this.setState({ loading: false, time: data.time })) } render(props, state) {   return html`     &lt;div class="container mt-5"&gt;       &lt;div class="row justify-content-center"&gt;         &lt;div class="col"&gt;           &lt;h1&gt;Hello from your new App&lt;/h1&gt;           &lt;div&gt;             ${state.loading &amp;&amp;               html`                 &lt;p&gt;Loading time from server...&lt;/p&gt;               `} ${state.time &amp;&amp;               html`                 &lt;p&gt;Time from server: &lt;i&gt;&lt;font color="#999999"&gt;${state.time}&lt;/font&gt;&lt;/i&gt; &lt;/p&gt;               `}           &lt;/div&gt;           &lt;hr /&gt;           &lt;div&gt;             Have fun changing the code from this boilerplate:             &lt;ul&gt;               &lt;li&gt;UI code available at &lt;code&gt;/src/ui&lt;/code&gt;&lt;/li&gt;               &lt;li&gt;Server-side code available at &lt;code&gt;/src/server&lt;/code&gt;&lt;/li&gt;             &lt;/ul&gt;           &lt;/div&gt;         &lt;/div&gt;       &lt;/div&gt;     &lt;/div&gt;   ` } } render( html`   &lt;${App} /&gt; `, document.getElementById('app') )</code> </pre> <br>  Solo hay un componente con estado en esta aplicaci√≥n llamado <code>App</code> .  El estado de este componente incluye 2 variables: <br><br><ul><li>  <code>loading</code> es una variable l√≥gica que se usa para indicar si se est√° realizando una solicitud a la API del servidor en un determinado momento para obtener informaci√≥n sobre la hora del servidor. </li><li>  <code>time</code> : una cadena que contiene la √∫ltima informaci√≥n de tiempo recibida del servidor. </li></ul><br>  Si est√° familiarizado con React, puede comprender f√°cilmente el c√≥digo anterior. <br>  Usando Preact y htm, podemos crear componentes declarando clases que extienden la clase de <code>Component</code> incorporada. <br><br>  En esta clase, podemos describir el comportamiento de un componente usando m√©todos de ciclo de vida como <code>componentDidMount()</code> , y tambi√©n usar un m√©todo que se comporta como un m√©todo <code>render()</code> regular de React. <br><br>  En nuestro caso, tan pronto como el componente se adjunte a la p√°gina (m√©todo <code>componentDidMount()</code> ), establecemos la propiedad de <code>loading</code> estado y ejecutamos una solicitud de API usando <code>fetch</code> . <br>  Una vez completada la solicitud, establecemos el valor de la propiedad de estado de <code>time</code> y restablecemos la propiedad de <code>loading</code> a <code>false</code> . <br><br>  El m√©todo <code>render()</code> se llama autom√°ticamente cada vez que cambia el estado de un componente o cuando se le pasan nuevas propiedades.  En este m√©todo, describimos el componente DOM usando htm. <br><br>  La biblioteca htm le permite describir los nodos DOM utilizando literales de plantillas etiquetadas con una etiqueta especial: <code>html</code> .  Dentro de nuestra plantilla literal, las expresiones din√°micas pueden estar presentes, como las que usamos para verificar el estado y decidir qu√© mostrar si la aplicaci√≥n est√° cargando datos del servidor y si los datos ya est√°n cargado <br><br>  Tambi√©n vale la pena se√±alar que necesitamos crear una instancia de la aplicaci√≥n y mostrarla en una p√°gina HTML.  Esto se hace utilizando la funci√≥n <code>render()</code> del objeto global <code>htmPreact</code> . <br><br>  Ahora se ha completado el trabajo en la aplicaci√≥n front-end.  Puede reiniciar el servidor, vaya a <code>localhost:3000</code> y experimente con lo que acabamos de crear.  Por ejemplo, puede desarrollar el suyo en base a esta aplicaci√≥n.  Y cuando lo que cree parezca lo suficientemente interesante como para mostr√°rselo a otra persona, probablemente le sea √∫til empacar su aplicaci√≥n en un contenedor Docker. <br><br><h2>  <font color="#3AC1EF">Aplicaci√≥n en contenedores</font> </h2><br>  Creo que la mejor manera de mostrar a otros sus nuevos proyectos peque√±os es utilizar las capacidades de Docker para este prop√≥sito. <br><br>  Gracias a Docker, cualquier persona que intente ejecutar su aplicaci√≥n en casa no tendr√° que pensar si tiene instalada la versi√≥n adecuada de Node.js y NPM, no necesitar√° descargar el c√≥digo fuente de la aplicaci√≥n para asegurarse de que ingrese la secuencia correcta de comandos , instale sus dependencias e inicie el servidor. <br><br>  Para empacar la aplicaci√≥n en el contenedor Docker, necesitamos crear un <code>Dockerfile</code> muy simple en la carpeta ra√≠z de nuestro proyecto: <br><br><pre> <code class="plaintext hljs">FROM node:11-alpine WORKDIR /app COPY . /app RUN npm install --production EXPOSE 3000 CMD ["npm", "start"]</code> </pre> <br>  Aqu√≠ describimos las siguientes acciones: <br><br><ul><li>  La imagen se crea en base a la imagen Node.js 11, construida sobre la base de Alpine Linux. </li><li>  Todo lo de la carpeta actual se copia en la carpeta <code>/app</code> del contenedor. </li><li>  Despu√©s de eso, ejecutamos el comando <code>npm install</code> para descargar e instalar las dependencias.  El uso del indicador <code>--production</code> lleva al hecho de que solo se instalar√°n las dependencias necesarias para la implementaci√≥n del proyecto en producci√≥n.  Esto acelera la creaci√≥n de im√°genes si el proyecto usa muchas dependencias de desarrollo. </li><li>  Indicamos que el contenedor debe tener poro abierto 3000, en el cual, por defecto, el servidor funcionar√°. </li><li>  Al final, describimos un comando, <code>npm start</code> , que se ejecutar√° cuando se inicie el contenedor.  Ella lanza la aplicaci√≥n. </li></ul><br>  Para recopilar la imagen para el contenedor, ejecute el siguiente comando: <br><br><pre> <code class="plaintext hljs">docker build -t server-time .</code> </pre> <br>  Despu√©s de unos segundos, la imagen deber√≠a estar lista y deber√≠a poder iniciar el contenedor: <br><br><pre> <code class="plaintext hljs">docker run -it -p 3000:3000 server-time</code> </pre> <br>  La <code>-p</code> permite configurar la conexi√≥n entre el puerto de contenedor 3000 y el puerto local 3000. Esto le permitir√° acceder a la aplicaci√≥n en contenedor en <code>localhost:3000</code> . <br>  Ahora est√° listo para compartir su aplicaci√≥n con otras personas.  Para ejecutarlo en el entorno Docker, es suficiente, siempre que Docker est√© instalado en la computadora, para ejecutar los dos comandos anteriores en su carpeta. <br><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  En este art√≠culo, hablamos sobre c√≥mo crear un entorno para el r√°pido desarrollo de aplicaciones web usando Fastify y Preact.  Adem√°s, hablamos sobre c√≥mo compartir la aplicaci√≥n con otras personas que usan Docker. <br><br>  Como se mencion√≥ anteriormente, las herramientas propuestas est√°n dise√±adas para la creaci√≥n r√°pida de prototipos, por lo que ahora puede que se pregunte qu√© falta aqu√≠ para desarrollar aplicaciones reales.  Lo m√°s probable es que cuando habla de "aplicaciones reales", se refiera a las siguientes caracter√≠sticas: <br><br><ul><li>  Compilaci√≥n de recursos de la parte front-end de la aplicaci√≥n: creaci√≥n de archivos optimizados (paquetes), posiblemente utilizando Webpack, Babel u otras herramientas. </li><li>  Enrutamiento en el front-end de la aplicaci√≥n. </li><li>  Representaci√≥n del servidor </li><li>  Medios de almacenamiento permanente de datos. </li></ul><br>  Todav√≠a no se han agregado todas estas posibilidades para desarrollar aplicaciones reales al conjunto de tecnolog√≠as discutidas aqu√≠, por lo que por ahora lo percibo como una herramienta para desarrollar prototipos.  Estoy seguro de que si te gust√≥ lo que viste y consideras todo esto como la base para futuras aplicaciones que resuelven problemas reales, puedes encontrar f√°cilmente lo que necesitas y crear aplicaciones listas para Fastify y Preact lanzamiento de producci√≥n. <br><br>  <b>Estimados lectores!</b>  ¬øC√≥mo se prototipan las aplicaciones web? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/442652/">https://habr.com/ru/post/442652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../442642/index.html">Qu√© leer en marzo: 22 libros nuevos para vendedores, gerentes, desarrolladores y dise√±adores</a></li>
<li><a href="../442644/index.html">La mayor√≠a de las habilidades que no son de programaci√≥n aumentan el valor del desarrollador</a></li>
<li><a href="../442646/index.html">Redes de Kubernetes: entrada</a></li>
<li><a href="../442648/index.html">Ir mecanismos de asignaci√≥n</a></li>
<li><a href="../442650/index.html">An√°lisis y optimizaci√≥n de aplicaciones React.</a></li>
<li><a href="../442654/index.html">Cambiar a Next.js y acelerar la carga de la p√°gina de inicio de manifold.co 7.5 veces</a></li>
<li><a href="../442658/index.html">8 trucos para trabajar con CSS: paralaje, pie de p√°gina adhesivo y otros</a></li>
<li><a href="../442660/index.html">Matem√°ticas reconciliando a Newton con el mundo cu√°ntico</a></li>
<li><a href="../442662/index.html">C√≥mo ver SDDL y no romper los ojos en punto y coma</a></li>
<li><a href="../442664/index.html">QIWI Kitchen 6 de febrero: c√≥mo estuvo + presentaciones de oradores</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>