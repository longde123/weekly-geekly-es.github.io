<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨â€ğŸ”¬ ğŸ³ ğŸª å¯æšä¸¾ï¼šå¦‚ä½•äº§ç”Ÿä¸šåŠ¡ä»·å€¼ ğŸ¥ ğŸ‘ ğŸµï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡ç®€è¦è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨å…¬å…±è¯­è¨€å…³é”®å­—å¯èƒ½å¯¹é¡¹ç›®çš„ITåŸºç¡€ç»“æ„é¢„ç®—äº§ç”Ÿå½±å“ï¼Œæˆ–å¦‚ä½•å¸®åŠ©å®ç°æ‰˜ç®¡åŸºç¡€ç»“æ„çš„æŸäº›é™åˆ¶/é™åˆ¶ï¼Œæ­¤å¤–ï¼Œå®ƒè¿˜å¯ä»¥å¾ˆå¥½åœ°è¯´æ˜è´¨é‡æºä»£ç çš„æˆç†Ÿåº¦ã€‚ 

 ä¸ºäº†æ¼”ç¤ºæ€æƒ³ï¼Œæœ¬æ–‡å°†ä½¿ç”¨Cï¼ƒè¯­è¨€ï¼Œä½†æ˜¯å¤§å¤šæ•°æ€æƒ³å¯èƒ½ä¼šç¿»è¯‘æˆå…¶ä»–è¯­è¨€ã€‚ 

 ä»è¯­è¨€çš„ç‰¹å¾æ¥çœ‹ï¼Œä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œâ€œ yieldâ€æ˜¯...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¯æšä¸¾ï¼šå¦‚ä½•äº§ç”Ÿä¸šåŠ¡ä»·å€¼</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444358/"> æœ¬æ–‡ç®€è¦è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨å…¬å…±è¯­è¨€å…³é”®å­—å¯èƒ½å¯¹é¡¹ç›®çš„ITåŸºç¡€ç»“æ„é¢„ç®—äº§ç”Ÿå½±å“ï¼Œæˆ–å¦‚ä½•å¸®åŠ©å®ç°æ‰˜ç®¡åŸºç¡€ç»“æ„çš„æŸäº›é™åˆ¶/é™åˆ¶ï¼Œæ­¤å¤–ï¼Œå®ƒè¿˜å¯ä»¥å¾ˆå¥½åœ°è¯´æ˜è´¨é‡æºä»£ç çš„æˆç†Ÿåº¦ã€‚ <br><a name="habracut"></a><br> ä¸ºäº†æ¼”ç¤ºæ€æƒ³ï¼Œæœ¬æ–‡å°†ä½¿ç”¨Cï¼ƒè¯­è¨€ï¼Œä½†æ˜¯å¤§å¤šæ•°æ€æƒ³å¯èƒ½ä¼šç¿»è¯‘æˆå…¶ä»–è¯­è¨€ã€‚ <br><br> ä»è¯­è¨€çš„ç‰¹å¾æ¥çœ‹ï¼Œä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œâ€œ yieldâ€æ˜¯æœ€è¢«ä½ä¼°çš„å…³é”®å­—ã€‚ æ‚¨å¯ä»¥é˜…è¯»æ–‡æ¡£å¹¶åœ¨Internetä¸Šæ‰¾åˆ°å¤§é‡ç¤ºä¾‹ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œå‡è®¾â€œæ”¶ç›Šâ€å…è®¸éšå¼åˆ›å»ºâ€œè¿­ä»£å™¨â€ã€‚ æ ¹æ®è®¾è®¡ï¼Œè¿­ä»£å™¨åº”å…¬å¼€IEnumerableæºä»¥ä¾›â€œå…¬å…±â€ä½¿ç”¨ã€‚ ä»è¿™é‡Œå¼€å§‹æ£˜æ‰‹ã€‚ å› ä¸ºæˆ‘ä»¬åœ¨è¯­è¨€ä¸­æœ‰å¾ˆå¤šIEnumerableçš„å®ç°ï¼šåˆ—è¡¨ï¼Œå­—å…¸ï¼Œå“ˆå¸Œé›†ï¼Œé˜Ÿåˆ—ç­‰ã€‚ ä»æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œä¸ºäº†æ»¡è¶³æŸäº›ä¸šåŠ¡ä»»åŠ¡çš„éœ€æ±‚è€Œé€‰æ‹©å…¶ä¸­ä¹‹ä¸€æ˜¯é”™è¯¯çš„ã€‚ è€Œä¸”ï¼Œæ— è®ºé€‰æ‹©å“ªç§å®ç°æ–¹å¼ï¼Œæ‰€æœ‰è¿™äº›éƒ½ä¼šä½¿è¯¥ç¨‹åºâ€œæœ‰æ•ˆâ€æ¶åŒ–ï¼Œè¿™æ˜¯ä¼ä¸šçœŸæ­£éœ€è¦çš„ï¼Œä¸æ˜¯å—ï¼Ÿ é€šå¸¸ï¼Œå®ƒå¯ä»¥å·¥ä½œï¼Œä½†ä»…åœ¨å°†æœåŠ¡éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ä¹‹å‰æœ‰æ•ˆã€‚ <br><br> ä¸ºäº†è¯´æ˜é—®é¢˜ï¼Œæˆ‘å»ºè®®ä¸ºå¤§å¤šæ•°ä¼ä¸šé¡¹ç›®é€‰æ‹©ä¸€ä¸ªéå¸¸å¸¸è§çš„ä¸šåŠ¡æ¡ˆä¾‹/æµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ¬æ–‡ä¸­è¿›è¡Œæ‰©å±•ï¼Œå¹¶ç”¨è¯¥æµç¨‹çš„æŸäº›éƒ¨åˆ†æ›¿ä»£ï¼Œä»¥äº†è§£è¿™ç§æ–¹æ³•å¯¹ä¼ä¸šé¡¹ç›®çš„å½±å“ç¨‹åº¦ã€‚ è€Œä¸”å®ƒåº”è¯¥å¯ä»¥å¸®åŠ©æ‚¨åœ¨è¿™ç§æƒ…å†µä¸‹æ‰¾åˆ°é€‚åˆæ‚¨çš„æƒ…å†µä»¥è¿›è¡Œä¿®å¤ã€‚ <br><br> ä»»åŠ¡ç¤ºä¾‹ï¼š <br><br><ol><li> å°†ä¸€ç»„è®°å½•ä»æ–‡ä»¶æˆ–æ•°æ®åº“æŒ‰è¡ŒåŠ è½½åˆ°å†…å­˜ä¸­ã€‚ </li><li> å¯¹äºè®°å½•çš„æ¯ä¸€åˆ—ï¼Œå°†å€¼æ›´æ”¹ä¸ºå…¶ä»–å€¼ã€‚ </li><li> å°†è½¬æ¢ç»“æœä¿å­˜åˆ°æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­ã€‚ </li></ol><br> è®©æˆ‘ä»¬å‡è®¾è¿™ç§é€»è¾‘å¯èƒ½é€‚ç”¨çš„å‡ ç§æƒ…å†µã€‚ ç›®å‰ï¼Œæˆ‘çœ‹åˆ°ä¸¤ç§æƒ…å†µï¼š <br><br><ol><li> å¯¹äºæŸäº›æ§åˆ¶å°ETLåº”ç”¨ç¨‹åºï¼Œè¿™å¯èƒ½æ˜¯æµç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ </li><li> è¿™å¯èƒ½æ˜¯MVCåº”ç”¨ç¨‹åºæ§åˆ¶å™¨ä¸­åŠ¨ä½œå†…éƒ¨çš„é€»è¾‘ã€‚ </li></ol><br> å¦‚æœæˆ‘ä»¬å°†ä»»åŠ¡æ”¹å†™ä¸ºæ›´å…·æŠ€æœ¯æ€§çš„æ–¹å¼ï¼Œé‚£ä¹ˆå¬èµ·æ¥å¯èƒ½æ˜¯è¿™æ ·çš„ï¼šâ€œï¼ˆ1ï¼‰åˆ†é…ä¸€å®šæ•°é‡çš„å†…å­˜ï¼Œï¼ˆ2ï¼‰ä»æŒä¹…æ€§å­˜å‚¨ä¸­å°†ä¿¡æ¯åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œï¼ˆ3ï¼‰ä¿®æ”¹å’Œï¼ˆ4ï¼‰åˆ·æ–°è®°å½•æ›´æ”¹ä¸ºæŒä¹…æ€§å­˜å‚¨çš„å†…å­˜ã€‚â€ åœ¨è¿™é‡Œï¼Œæè¿°â€œï¼ˆ1ï¼‰åˆ†é…å†…å­˜é‡â€ä¸­çš„ç¬¬ä¸€ä¸ªçŸ­è¯­å¯èƒ½ä¸æ‚¨çš„éåŠŸèƒ½éœ€æ±‚æœ‰çœŸæ­£çš„å…³è”ã€‚ å› ä¸ºæ‚¨çš„å·¥ä½œ/æœåŠ¡åº”è¯¥â€œç”Ÿæ´»â€åœ¨æŸäº›æ‰˜ç®¡ç¯å¢ƒä¸­ï¼Œè€Œæ‰˜ç®¡ç¯å¢ƒå¯èƒ½ä¼šæœ‰ä¸€äº›é™åˆ¶/é™åˆ¶ï¼ˆä¾‹å¦‚ï¼Œæ¯ä¸ªå¾®æœåŠ¡150Mbï¼‰ï¼Œå¹¶é¢„æµ‹é¢„ç®—ä¸­æ‚¨çš„æœåŠ¡æ”¯å‡ºï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥é¢„æµ‹å†…å­˜é‡ä½¿ç”¨å“ªç§æœåŠ¡ï¼ˆé€šå¸¸æˆ‘ä»¬ä¼šè¯´æœ€å¤§å†…å­˜é‡ï¼‰ã€‚ æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºæ‚¨çš„æœåŠ¡ç¡®å®šå†…å­˜çš„â€œè¶³è¿¹â€ã€‚ <br><br> è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹æˆ‘åœ¨ä¼ä¸šé¡¹ç›®çš„ä¸åŒä»£ç åº“ä¸­ä¸æ—¶è§‚å¯Ÿåˆ°çš„çœŸæ­£é€šç”¨å®ç°çš„å†…å­˜å ç”¨é‡ã€‚ åŒæ ·ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°è¯•åœ¨é¡¹ç›®ä¸­æ‰¾åˆ°å®ƒï¼Œä¾‹å¦‚ï¼Œåœ¨â€œå­˜å‚¨åº“â€æ¨¡å¼å®ç°çš„â€œå¹•åâ€ä¸­ï¼Œåªéœ€å°è¯•æ‰¾åˆ°ä»¥ä¸‹å•è¯ï¼šâ€œ ToListâ€ï¼Œâ€œ ToArrayâ€ï¼Œâ€œ ToReadonlyCollectionâ€ç­‰ã€‚ æ‰€æœ‰è¿™äº›å®ç°æ„å‘³ç€ï¼š <br><br>  1.å¯¹äºæ–‡ä»¶/æ•°æ®åº“ä¸­çš„æ¯ä¸€è¡Œ/è®°å½•ï¼Œåˆ†é…å†…å­˜ä»¥ä¿å­˜æ–‡ä»¶/æ•°æ®åº“ä¸­è®°å½•çš„å±æ€§ï¼ˆå³var user = new Userï¼ˆï¼‰{FirstName ='Test'ï¼ŒLastName ='Test2'}ï¼‰ <br><br>  2.æ¥ä¸‹æ¥ï¼Œå€ŸåŠ©â€œ ToArrayâ€æˆ–æ‰‹åŠ¨å°†å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åˆ°æŸä¸ªé›†åˆä¸­ï¼ˆå³ï¼Œvar users = new Listï¼ˆï¼‰ï¼› users.Addï¼ˆuserï¼‰ï¼‰ã€‚ å› æ­¤ï¼Œä¸ºæ–‡ä»¶ä¸­çš„æ¯ä¸ªè®°å½•åˆ†é…äº†ä¸€å®šæ•°é‡çš„å†…å­˜ï¼Œå¹¶ä¸”ä¸è¦å¿˜è®°å®ƒï¼Œå¼•ç”¨å­˜å‚¨åœ¨æŸä¸ªé›†åˆä¸­ã€‚ <br><br> è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IEnumerable&lt;User&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LoadUsers2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;User&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> line <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> File.ReadLines(<span class="hljs-string"><span class="hljs-string">"text.txt"</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> splittedLine = line.Split(<span class="hljs-string"><span class="hljs-string">';'</span></span>); list.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User() { FirstName = splittedLine[<span class="hljs-number"><span class="hljs-number">0</span></span>], LastName = splittedLine[<span class="hljs-number"><span class="hljs-number">1</span></span>] }); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> list; <span class="hljs-comment"><span class="hljs-comment">// or return File.ReadLines("text.txt") .Select(line =&gt; line.Split(';')) .Select(splittedLine =&gt; new User() { FirstName = splittedLine[0], LastName = splittedLine[1] }).ToArray(); }</span></span></code> </pre> <br> å†…å­˜åˆ†æå™¨ç»“æœï¼š <br><br><img src="https://habrastorage.org/webt/du/i2/bx/dui2bxcfqb1tvgzfeyvwsj6mfba.jpeg" alt="å›¾ç‰‡"><br><br> æ­£æ˜¯ç”±äºæ‰˜ç®¡æ¯ä¸ªå®¹å™¨çš„èµ„æºé™åˆ¶ï¼Œæˆ‘åœ¨äº§å“ç¯å¢ƒä¸­æ¯æ¬¡åœ¨å®¹å™¨åœæ­¢/é‡æ–°åŠ è½½ä¹‹å‰éƒ½çœ‹åˆ°è¿‡è¿™æ ·çš„å›¾ç‰‡ã€‚ <br><br> å› æ­¤ï¼Œè¿™ç§æƒ…å†µä¸‹çš„å ç”¨ç©ºé—´å¤§è‡´å–å†³äºæ–‡ä»¶ä¸­è®°å½•çš„æ•°é‡ã€‚ å› ä¸ºå†…å­˜åˆ†é…æ–‡ä»¶ä¸­çš„æ¯ä¸ªè®°å½•ã€‚ è€Œä¸”ï¼Œè¿™äº›å°è±Œè±†çš„æ€»å’Œä½¿æˆ‘ä»¬çš„æœåŠ¡å¯èƒ½æ¶ˆè€—çš„å†…å­˜æœ€å¤§-è¿™æ˜¯æœåŠ¡çš„å ç”¨ç©ºé—´ã€‚ ä½†æ˜¯è¿™ä¸ªè¶³è¿¹å¯ä»¥é¢„æµ‹å—ï¼Ÿ æ˜¾ç„¶æ²¡æœ‰ã€‚ å› ä¸ºæˆ‘ä»¬æ— æ³•é¢„æµ‹æ–‡ä»¶ä¸­çš„è®¸å¤šè®°å½•ã€‚ è€Œä¸”ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ–‡ä»¶å¤§å°ä¼šå¤šæ¬¡è¶…è¿‡æ‰˜ç®¡ä¸­å…è®¸çš„å†…å­˜é‡ã€‚ è¿™æ„å‘³ç€å¾ˆéš¾åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨è¿™ç§å®ç°ã€‚ <br><br> ä¼¼ä¹æ˜¯æ—¶å€™é‡æ–°è€ƒè™‘è¿™ç§å®ç°äº†ã€‚ ä¸‹ä¸€ä¸ªå‡è®¾å¯èƒ½ä¼šç»™æˆ‘ä»¬æä¾›æ›´å¤šè®¡ç®—æœåŠ¡è¶³è¿¹çš„æœºä¼šï¼šâ€œè¶³è¿¹åº”ä»…å–å†³äºæ–‡ä»¶ä¸­ä¸€ä¸ªè®°å½•çš„å¤§å°â€ã€‚ ç²—ç•¥åœ°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—ä»…ä¸€æ¡è®°å½•çš„æ¯ä¸€åˆ—çš„æœ€å¤§å¤§å°å¹¶å°†å®ƒä»¬ç›¸åŠ ã€‚ é¢„æµ‹è®°å½•çš„å¤§å°è€Œä¸æ˜¯é¢„æµ‹æ–‡ä»¶ä¸­çš„è®°å½•æ•°éå¸¸å®¹æ˜“ã€‚ <br><br>  <b>çœŸçš„å¾ˆå¥‡æ€ªï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥å®ç°ä¸€ç§æœåŠ¡ï¼Œè¯¥æœåŠ¡å¯ä»¥å¤„ç†ä¸å¯é¢„æµ‹çš„è®°å½•é‡ï¼Œå¹¶ä¸”ä»…å€ŸåŠ©ä¸€ä¸ªå…³é”®å­—â€œ yieldâ€ *å°±èƒ½ä¸æ–­æ¶ˆè€—ä»…å‡ å…†å­—èŠ‚çš„æ•°æ®ã€‚</b> <br><br> æ—¶é—´ä¸ºä¾‹ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1. Load byline a set of records from a file or DB into memory. var users = LoadUsers(); // 2. For each column of the record change the value to someone other value. users = ModifyFirstName(users); // 3. Save the results of transformation into a file or DB. SaveUsers(users); } private static IEnumerable&lt;User&gt; LoadUsers() { foreach(var line in File.ReadLines("text.txt")) { var splitedLine = line.Split(';'); yield return new User() { FirstName = splitedLine[0], LastName = splitedLine[1] }; } } private static IEnumerable&lt;User&gt; ModifyFirstName(IEnumerable&lt;User&gt; users) { foreach (var user in users) { user.FirstName += "_1"; yield return user; } } private static void SaveUsers(IEnumerable&lt;User&gt; users) { foreach(var user in users) { File.AppendAllLines("results.txt", new string []{ user.FirstName + ';' + user.LastName }); } } private class User { public string FirstName { get; set; } public string LastName { get; set; } } }</span></span></code> </pre><br> å¦‚æ‚¨åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­çœ‹åˆ°çš„ï¼Œä¸€æ¬¡åªä¸ºä¸€ä¸ªå¯¹è±¡åˆ†é…å†…å­˜ï¼š'yield return new Userï¼ˆï¼‰'è€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªé›†åˆå¹¶ç”¨å¯¹è±¡å¡«å……å®ƒã€‚ è¿™æ˜¯ä¼˜åŒ–çš„ä¸»è¦è¦ç‚¹ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸ºæœåŠ¡è®¡ç®—æ›´å¤šå¯é¢„æµ‹çš„å†…å­˜å ç”¨é‡ã€‚ å› ä¸ºæˆ‘ä»¬åªéœ€è¦çŸ¥é“ä¸¤ä¸ªå­—æ®µçš„å¤§å°ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­å°±æ˜¯FirstNameå’ŒLastNameã€‚ å°†ä¿®æ”¹åçš„ç”¨æˆ·ä¿å­˜åˆ°æ–‡ä»¶ä¸­æ—¶ï¼ˆè¯·å‚é˜…File.AppendAllLinesï¼‰ï¼Œè¯¥ç”¨æˆ·å¯¹è±¡çš„å®ä¾‹å¯ç”¨äºåƒåœ¾å›æ”¶ã€‚ å¹¶é‡Šæ”¾å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ï¼ˆå³LoadUsersä¸­â€œ foreachâ€è¯­å¥çš„ä¸‹ä¸€æ¬¡è¿­ä»£ï¼‰ï¼Œå› æ­¤å¯ä»¥åˆ›å»ºç”¨æˆ·å¯¹è±¡çš„ä¸‹ä¸€ä¸ªå®ä¾‹ã€‚ æ¢å¥è¯è¯´ï¼Œå¤§è‡´è€Œè¨€ï¼Œæ¯æ¬¡è¿­ä»£æ—¶ï¼Œç›¸åŒæ•°é‡çš„å†…å­˜å°†æ›¿æ¢ä¸ºç›¸åŒæ•°é‡çš„å†…å­˜ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸éœ€è¦æ¯”æ–‡ä»¶ä¸­å•ä¸ªè®°å½•å¤§çš„å†…å­˜ã€‚ <br><br> ä¼˜åŒ–åçš„å†…å­˜åˆ†æå™¨ç»“æœï¼š <br><br><img src="https://habrastorage.org/webt/6k/gy/y6/6kgyy6wiwpafktukdwq2lsh_vx0.jpeg" alt="å›¾ç‰‡"><br><br> ä»å¦ä¸€ä¸ªè§’åº¦æ¥çœ‹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¸Šé¢çš„å®ç°ä¸­ç¨å¾®é‡å‘½åå‡ ä¸ªæ–¹æ³•ï¼Œä»¥ä¾¿ä½¿ç”¨å¯ä»¥æ³¨æ„åˆ°MVCåº”ç”¨ç¨‹åºä¸­Controllerçš„ä¸€äº›æœ‰æ„ä¹‰çš„é€»è¾‘ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetUsersAction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1. Load byline a set of records from a file or DB into memory. var users = LoadUsers(); // 2. For each column of the record change the value to someone other value. var usersDTOs = MapToDTO(users); // 3. Save the results of transformation into a file or DB. OkResult(usersDTOs); }</span></span></code> </pre><br> ä»£ç æ¸…å•ä¹‹å‰çš„ä¸€ä¸ªé‡è¦è¯´æ˜ï¼šåƒEntityFrameworkï¼ŒASP.net MVCï¼ŒAutoMapperï¼ŒDapperï¼ŒNHibernateï¼ŒADO.netç­‰å¤§å¤šæ•°é‡è¦åº“éƒ½å…¬å¼€/ä½¿ç”¨IEnumerablesæºã€‚ å› æ­¤ï¼Œè¿™æ„å‘³ç€åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼ŒLoadUserså¯ä»¥æ›¿æ¢ä¸ºä½¿ç”¨EntityFrameworkçš„å®ç°ã€‚ ä»æ•°æ®åº“è¡¨ä¸­é€è¡ŒåŠ è½½æ•°æ®ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ã€‚ åœ¨æŸäº›MVCæ¡†æ¶æˆ–æˆ‘ä»¬è‡ªå·±åŸºäºç½‘ç»œæµçš„å®ç°ä¸­ï¼Œå¯ä»¥ç”¨Automapperä»£æ›¿MapToDTOå¹¶ç”¨IActionResultçš„â€œå®é™…â€å®ç°ä»£æ›¿OkResultï¼Œä¾‹å¦‚ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OkResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IEnumerable&lt;User&gt; users</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// you can use a networksteam implementation using(StreamWriter sw = new StreamWriter("result.txt")) { foreach(var user in users) { sw.WriteLine(user.FirstName + ';' + user.LastName); } } }</span></span></code> </pre><br> è¿™ä¸ªâ€œç±»ä¼¼mvcâ€çš„ç¤ºä¾‹å‘æˆ‘ä»¬å±•ç¤ºäº†æˆ‘ä»¬ä»ç„¶èƒ½å¤Ÿé¢„æµ‹å’Œè®¡ç®—Webåº”ç”¨ç¨‹åºçš„å†…å­˜å ç”¨é‡ã€‚ ä½†æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¹Ÿå°†å–å†³äºè¯·æ±‚æ•°ã€‚ ä¾‹å¦‚ï¼Œå¬èµ·æ¥éåŠŸèƒ½æ€§éœ€æ±‚å¯èƒ½æ˜¯è¿™æ ·çš„ï¼šâ€œç„¶åï¼Œä¸è¶…è¿‡1000ä¸ªè¯·æ±‚çš„æœ€å¤§å†…å­˜é‡ï¼šæ¯ä¸ªç”¨æˆ·å¯¹è±¡200KB x 1000ä¸ªè¯·æ±‚ã€œ200MBâ€ã€‚ <br><br> åœ¨æ‰©å±•Webåº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹ï¼Œè¿™ç§è®¡ç®—å¯¹äºæ€§èƒ½ä¼˜åŒ–éå¸¸æœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼Œæ‚¨éœ€è¦åœ¨100ä¸ªå®¹å™¨/ VMä¸Šæ‰©å±•Webåº”ç”¨ç¨‹åºã€‚ å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦å†³å®šåº”ä»æ‰˜ç®¡æœåŠ¡æä¾›å•†åˆ†é…å¤šå°‘èµ„æºï¼Œå› æ­¤å¯ä»¥è°ƒæ•´ä»¥ä¸‹å…¬å¼ï¼šæ¯ä¸ªç”¨æˆ·å¯¹è±¡200KB x 1000ä¸ªè¯·æ±‚x 100VMsã€œ20GBã€‚ æ­¤å¤–ï¼Œè¿™æ˜¯æœ€å¤§çš„å†…å­˜é‡ï¼Œå¹¶ä¸”è¯¥é‡å—é¡¹ç›®é¢„ç®—çš„æ§åˆ¶ã€‚ <br><br> æˆ‘å¸Œæœ›æœ¬æ–‡ä¸­çš„ä¿¡æ¯ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œå¹¶ä¸ºæ‚¨çš„é¡¹ç›®èŠ‚çœå¤§é‡é‡‘é’±å’Œæ—¶é—´ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN444358/">https://habr.com/ru/post/zh-CN444358/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN444346/index.html">GraphQLå’ŒGolang</a></li>
<li><a href="../zh-CN444348/index.html">åŠŸèƒ½æ€§Reactç»„ä»¶ä¸åŸºäºç±»çš„ç»„ä»¶æœ‰ä½•ä¸åŒï¼Ÿ</a></li>
<li><a href="../zh-CN444350/index.html">ç”±äºæŸäº›åŸå› ï¼ŒMVPï¼ˆæœ€ä½å¯è¡Œäº§å“ï¼‰æ— æ³•å¯åŠ¨</a></li>
<li><a href="../zh-CN444352/index.html">Kontur.Kampusï¼šæˆ‘ä»¬é‚€è¯·æ‚¨å‚è§‚åœ£å½¼å¾—å ¡é™„è¿‘çš„å·¥ä¸šå‘å±•å…è´¹å­¦ç”Ÿè¥</a></li>
<li><a href="../zh-CN444356/index.html">Reactæ•™ç¨‹ç¬¬24éƒ¨åˆ†ï¼šç¬¬äºŒå½¢å¼è¯¾</a></li>
<li><a href="../zh-CN444360/index.html">ä¸å…¬æ­£çš„Google Playæ˜¯ç¾å¥½çš„ç”Ÿæ´»ä½“éªŒ</a></li>
<li><a href="../zh-CN444362/index.html">Unityå’ŒHavokå¼€å‘æ–°çš„ç‰©ç†å¼•æ“</a></li>
<li><a href="../zh-CN444364/index.html">24å°æ—¶Rustæ¸¸æˆï¼šä¸ªäººå‘å±•ç»éªŒ</a></li>
<li><a href="../zh-CN444366/index.html">ç ”è®¨ä¼šâ€œä¿¡æ¯å®‰å…¨è¦æ±‚ï¼šä¼ä¸šå¦‚ä½•ä¸ä¹‹å…±å­˜â€</a></li>
<li><a href="../zh-CN444368/index.html">æˆ‘ä»¬åªæ˜¯åœ¨å®éªŒå®¤çš„3Dæ‰“å°æœºä¸Šæ‰“å°äº†éº¦å…‹é£-ç„¶åä¼šæœ‰å®Œæ•´çš„ç§‘å¹»å°è¯´</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>