<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤦 🌳 👬 LIDAR por Mazda. Probamos, nos ponemos a Lada 🏂 😤 💬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola 
 Esta vez obtuve un LIDAR real del Mazda CX5, alrededor de 2012. liberar. En este artículo, tengo la intención de desmontar el módulo y encender...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LIDAR por Mazda. Probamos, nos ponemos a Lada</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/399621/"><img src="https://habrastorage.org/files/a87/c82/941/a87c82941e0147d1a83f314129b92761.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hola </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Esta vez obtuve un LIDAR real del Mazda CX5, alrededor de 2012. </font><font style="vertical-align: inherit;">liberar. </font><font style="vertical-align: inherit;">En este artículo, tengo la intención de desmontar el módulo y encenderlo en la mesa. </font><font style="vertical-align: inherit;">Y lo curioso es que instalaré este LIDAR en Datsun Mido (Lada Kalina en la infancia).</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/files/dd7/9f3/f59/dd79f3f598fc4d6b87a3ea34e982e226.JPG" alt="imagen"><br>
<br>
<img src="https://habrastorage.org/files/f35/111/9a3/f351119a347046cf9e02f31f57e25e3f.JPG" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aunque LIDAR está escrito en el dispositivo, de hecho es una ruleta de coche láser que es capaz de medir la distancia a un objeto en frente. Función principal: proporciona frenado automático en caso de aproximación peligrosa a otro vehículo o, por ejemplo, a una pared. El dispositivo es uno de los principales en el complejo ADAS de Mazda y está fabricado por Continental (no solo fabrican neumáticos de caucho). La opción ADAS se llama CitySafety. El sistema de frenado automático se llama Mazda –SCBS. El rango de detección de obstáculos es de 6 m, el sistema funciona a una velocidad de hasta 40 km / h. Según el fabricante, el sistema ayudará a prevenir un accidente a velocidades de hasta 15 km / hy reducirá la gravedad del accidente a velocidades de hasta 30 km / h. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ejemplo de operación del sistema:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/T_xS0qNDDaY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Observo que en el sitio web del fabricante </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(enlace)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> logré encontrar documentación bastante detallada para el módulo. </font><font style="vertical-align: inherit;">De la documentación se deduce que el dispositivo no fue diseñado para una marca específica de automóviles, tiene un software interno suficientemente desarrollado que permite medir la distancia al objeto, así como la velocidad de este objeto. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí hay un extracto de la documentación sobre las principales características de rendimiento: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Propósito del dispositivo:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sensor anticolisión</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medición de la distancia a los objetos y medición de la velocidad de estos objetos en tres canales independientes. </font><font style="vertical-align: inherit;">A distancias de hasta 13,5 m</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El dispositivo tiene un sistema interno para monitorear la salud del láser IR y los receptores IR. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Especificaciones declaradas por el fabricante del sensor:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rango: 1.0-10m. </font><font style="vertical-align: inherit;">Alcance extendido hasta 13.5 m</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patrón de directividad 27 horizontalmente y 11 verticalmente</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rango Resolución 1 mm</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rango de velocidades medidas 2-160 km \ h</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precisión de medición de velocidad + -2 km \ h</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frecuencia de medida 100 Hz</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Potencia del láser 45 mW láser clase 1, duración del flash 33 ns</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Longitud de onda 905 nm</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tiempo de funcionamiento 12000 horas o 15 años.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El sensor tiene tres canales de medición, uno central y dos laterales.</font></font><br>
<img src="https://habrastorage.org/files/a2d/203/a22/a2d203a221324fb3a1a772fde8a28dd1.png" alt="imagen"><br>
<br>
<img src="https://habrastorage.org/files/1dc/659/417/1dc6594179924103a625f39928b90170.png" alt="imagen"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Procedemos al examen y preparación</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El dispositivo es bastante compacto, tiene tres "ojos" de vidrio. </font><font style="vertical-align: inherit;">Dos lentes para recibir radiación reflejada y una lente Fresnel para formar la proyección necesaria del rayo láser. </font><font style="vertical-align: inherit;">Montado en una caja de plástico sin el uso de tornillos. </font><font style="vertical-align: inherit;">Todo en los clips.</font></font><br>
<br>
<img src="https://habrastorage.org/files/37e/6c5/d36/37e6c5d3645e428f844255e0e38b7a21.JPG" alt="imagen"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adentro desde abajo</font></font></h3><br>
<img src="https://habrastorage.org/files/c1e/a7c/efe/c1ea7cefe0be43659d4209f8d7501fde.JPG" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí hay un elemento IR emisor, completamente diferente a un láser. </font><font style="vertical-align: inherit;">Debajo del emisor hay un fotodiodo IR que monitorea la presencia de radiación. </font><font style="vertical-align: inherit;">El sistema está controlado por un microcontrolador MC9S12XEG128 de 16 bits especializado para aplicaciones automotrices. </font><font style="vertical-align: inherit;">También en este lado están los elementos de una fuente de alimentación conmutada.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adentro arriba</font></font></h3><br>
<br>
<img src="https://habrastorage.org/files/ca7/75f/0af/ca775f0affe64e4aa74b190e9c54f54e.JPG" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí vemos un misterioso chip de ST, que, aparentemente, implementa las funciones de un telémetro láser. </font><font style="vertical-align: inherit;">Transceptor CAN, un espacio vacío para otro transceptor CAN, dos lentes receptoras y una placa con fotocélulas IR. </font><font style="vertical-align: inherit;">Directamente debajo de las lentes hay dos LED IR, que sirven para verificar la operatividad del receptor. </font><font style="vertical-align: inherit;">Estos elementos son visibles en la foto sin las lentes. </font><font style="vertical-align: inherit;">La documentación del dispositivo dice que las mediciones se llevan a cabo a través de tres canales independientes, podemos verificar esto al ver los tres elementos receptores.</font></font><br>
<br>
<img src="https://habrastorage.org/files/403/ab9/ac6/403ab9ac60034faca6fe4d491b018240.JPG" alt="imagen"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conexión en la mesa</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de conectar el dispositivo de acuerdo con la hoja de datos, yo mismo determiné la asignación de pines del conector. El dispositivo resultó ser fácil de conectar, era necesario encontrar solo una alimentación de 12 V y un bus CAN. En la documentación, el bus CAN se encontraba en otros pines, en mi caso no se utilizaron y el espacio vacío del transceptor estaba destinado solo a ellos. La velocidad de transmisión en mi canal CAN es –500 kbit \ s, sin usar, a juzgar por los documentos - 1Mbit \ s. </font></font><br>
<br>
<img src="https://habrastorage.org/files/edb/02f/7b9/edb02f7b9ee141ef8f0b0726fa79f02b.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conecté el dispositivo a una fuente de laboratorio estándar típica y el bus CAN a un osciloscopio Tektronix con un decodificador CAN. Inmediatamente después de encenderlo, el consumo de corriente fue de 90 mA, con sobretensiones de hasta 130 mA aproximadamente una vez por segundo. Llegó a la conclusión de que el lidar comenzó a encender el láser. El bus CAN también cobró vida de inmediato, había un único paquete que el osciloscopio reconoció fácilmente.</font></font><br>
<br>
<blockquote>ID: 0x21D<br>
DLC 8 byte<br>
DATA: 0x7F 0x3F 0xFF 0x00 0x00 0x00 0xD2 0x94 </blockquote><br>
<img src="https://habrastorage.org/files/673/cc8/b95/673cc8b95b1542e2a7c9c88367381f00.JPG"><br>
<br>
<img src="https://habrastorage.org/files/7d3/21a/810/7d321a810d2d4eea9e3d768603485b51.JPG"><br>
<br>
<h3>    .</h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Instale "lidar" en su automóvil, comencé por analogía con el Mazda. </font><font style="vertical-align: inherit;">Simplemente lo pegué en una cinta de doble cara en el parabrisas en el área del espejo retrovisor. </font><font style="vertical-align: inherit;">Suministraba energía de la toma del encendedor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me conecté a CAN usando un adaptador hecho por mí mismo hace 10 años, compatible con el conocido programa CAN-Hacker. </font><font style="vertical-align: inherit;">A diferencia de la primera inclusión en la mesa, el primer byte del paquete comenzó a cambiar activamente de inmediato, hasta que el lidar se reparó en el vestíbulo. </font><font style="vertical-align: inherit;">Basado en lo que concluí que este byte es responsable de la distancia medida. </font></font><br>
<br>
<img src="https://habrastorage.org/files/925/f3c/543/925f3c5430cb49e1ba4b2dbbd52508aa.jpg"><br>
<br>
<img src="https://habrastorage.org/files/073/81e/620/07381e620c8b457f926f57c0948e2a1e.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El manual sobre el protocolo de comunicación LIDAR con el mundo exterior describe muchos parámetros transmitidos. </font><font style="vertical-align: inherit;">En nuestro caso, fue posible lograr solo medir la distancia al frente del objeto.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prueba</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para las pruebas, el auto de un amigo fue elegido como objetivo. </font><font style="vertical-align: inherit;">La prueba fue la siguiente:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nos acercamos lo más posible al objetivo, arreglamos el primer byte del paquete</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medimos la distancia a la meta con una cinta métrica láser</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comparamos los datos de la ruleta con los datos transmitidos por el LIDAR.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Correspondencia del valor del primer byte del paquete LIDAR y el valor medido por la cinta métrica láser:</font></font><br>
<br>
<blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0x41 = 2.054 m </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0x46 = 3.166 m </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0x49 = 3.8 m </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0x7F - se pierde el objetivo</font></font></blockquote><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resultó que el lidar mide con confianza la distancia al objetivo no más de 4 metros. </font><font style="vertical-align: inherit;">En mi opinión, este no es el mejor resultado para un sensor del sistema de frenado de emergencia. </font><font style="vertical-align: inherit;">Quizás el dispositivo funcionó en algún tipo de modo simplificado o de prueba y en un automóvil mide la distancia en un rango más amplio. </font><font style="vertical-align: inherit;">También realizamos un experimento con una gran pizarra blanca brillante, en este caso, la distancia se midió hasta 5 metros.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resumen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El Mazda LIDAR de corto alcance fabricado por Continental es un dispositivo interesante. </font><font style="vertical-align: inherit;">Me gustaría que el rango de medición del rango vaya más allá de los pasillos de 4 metros. </font><font style="vertical-align: inherit;">Si hay una oportunidad, intentaré configurarlo en el modo descrito en la documentación y le permitirá medir grandes distancias y velocidades de los objetos. </font><font style="vertical-align: inherit;">Es posible revitalizar el segundo canal CAN. </font><font style="vertical-align: inherit;">Si de repente hay alguien que quiere cavar un dispositivo en Novosibirsk, estaré encantado de trabajar juntos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agrego que el dispositivo es bastante fácil de encontrar en el análisis a un precio de 3,000 a 6,000 rublos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Número de catálogo: GHP9-67XD0 </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y, por último, una película sobre un dispositivo filmada lo mejor que puede.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/c02iE7ldNsE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enlaces: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continental, documentación</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAZDA</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
→ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Historia del usuario</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es399621/">https://habr.com/ru/post/es399621/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es399611/index.html">Dolor en las manos al trabajar en una computadora. Parte 3. Síndrome de escala</a></li>
<li><a href="../es399613/index.html">Historia de inconsistencia de la NASA y la agencia</a></li>
<li><a href="../es399615/index.html">Как беспилотники изменят промышленность</a></li>
<li><a href="../es399617/index.html">Ganancias en Forex. ¿Verdad o mito? ¿Es realista ganar dinero en el mercado forex?</a></li>
<li><a href="../es399619/index.html">IRS agazapado, oculto por el Servicio de Impuestos Federales: cómo los servicios de impuestos de Rusia y los Estados Unidos manejan las criptomonedas</a></li>
<li><a href="../es399623/index.html">Cómo Crypto Extortionist hizo libre el pasaje ferroviario de San Francisco</a></li>
<li><a href="../es399625/index.html">Pregúntele a Ethan No. 111: ¿mueren las galaxias?</a></li>
<li><a href="../es399627/index.html">Pseudociencia y estafadores. Revistas científicas falsas</a></li>
<li><a href="../es399629/index.html">Inteligencia artificial en la plataforma Xeon. Intel compra a Nervana</a></li>
<li><a href="../es399631/index.html">¿Qué debemos construir un traje espacial? Entrevista con el desarrollador de los trajes Nikolay Moiseev, parte 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>