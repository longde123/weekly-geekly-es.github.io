<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÆ üë©üèø‚Äçüöí üë∞üèæ Dificultades para calcular los ingresos de suscripciones auto-renovables en aplicaciones iOS üßëüèº‚Äçü§ù‚Äçüßëüèº üö£üèª üë®üèΩ‚Äçüè≠</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola, soy Renat de Apphud . Si tiene una aplicaci√≥n con suscripciones auto-renovables o va a lanzar su primera aplicaci√≥n con suscripciones, tarde o t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dificultades para calcular los ingresos de suscripciones auto-renovables en aplicaciones iOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/apphud/blog/474440/"><p><img src="https://habrastorage.org/webt/y9/ml/fw/y9mlfw9vxvbqq9eedrpqnyegskc.png" alt="imagen"></p><br><p> Hola, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">soy</a> Renat de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Apphud</a> .  Si tiene una aplicaci√≥n con suscripciones auto-renovables o va a lanzar su primera aplicaci√≥n con suscripciones, tarde o temprano se enfrentar√° a la pregunta de c√≥mo transferir correctamente los ingresos de las suscripciones a sus an√°lisis.  Hablemos de eso. <a name="habracut"></a></p><br><h2 id="dlya-chego-nuzhno-schitat-vyruchku-s-prodazh-podpisok">  ¬øPor qu√© necesito considerar los ingresos por ventas de suscripciones? </h2><br><p>  Los ingresos por suscripci√≥n deben considerarse para enviarlos a los sistemas de an√°lisis y atribuci√≥n de productos que no saben c√≥mo hacer esto: Amplitud, Mixpanel, AppsFlyer, Branch, Adjust.  Su servidor ser√° √∫til para que pueda rastrear eventos de suscripci√≥n: conversiones, renovaciones, cancelaciones y enviarlos a sus an√°lisis.  Desafortunadamente, no todos los analistas de productos admiten la API de servidor a servidor.  Por ejemplo, Firebase o Flurry.  No tienen una API para enviar eventos desde su servidor y no admiten suscripciones de seguimiento.  Como dicen, ellos mismos no lo hacen, y no dan a los dem√°s. </p><br><p>  En este art√≠culo le dir√© qu√© dificultades puede encontrar si decide hacerlo usted mismo. </p><br><h2 id="analitika-podpisok-v-app-store-connect-ne-daet-polnuyu-kartinu">  El an√°lisis de suscripci√≥n de App Store Connect no abarca </h2><br><p>  En general, la anal√≠tica en App Store Connect no es anal√≠tica en absoluto.  Solo puede ver el panorama general: conversiones, n√∫mero de eventos y retenci√≥n.  Apple ni siquiera afirma ser un competidor completo para los analistas de productos.  App Store Connect es primitivo: </p><br><ul><li>  No puede asociar datos con usuarios y fuentes de tr√°fico. </li><li>  no puedes construir tus propios embudos y gr√°ficos; </li><li>  Los datos se actualizan una vez al d√≠a. </li></ul><br><p><img src="https://habrastorage.org/webt/qw/c9/pw/qwc9pwldrp9fltzgu65r7cp5xvw.png" alt="imagen"><br>  <em>Descripci√≥n general de la suscripci√≥n a App Store Connect</em> </p><br><h2 id="pochemu-otpravlyat-vyruchku-s-podpisok-s-ios-ustroystva--plohaya-ideya">  Por qu√© enviar ingresos por suscripci√≥n desde un dispositivo iOS es una mala idea </h2><br><p>  El principal problema es que no puede enviar eventos de suscripci√≥n cuando la aplicaci√≥n no se est√° ejecutando.  Los fondos se cargan al comienzo de cada per√≠odo de suscripci√≥n, y no se sabe cu√°ndo el usuario iniciar√° la aplicaci√≥n.  Esto puede suceder en un d√≠a, en una semana o nunca.  En este √∫ltimo caso, no se enviar√° nada. </p><br><h2 id="tipy-sobytiy">  Tipos de eventos </h2><br><p>  A primera vista, solo dos eventos son suficientes: el comienzo de la prueba y la cancelaci√≥n de fondos.  De hecho, hay muchos eventos y a menudo ocurren.  Puede hacer un conjunto de 5 eventos, o puede hacerlo desde 20. Todo depende de sus necesidades. </p><br><p>  El siguiente es un conjunto de muestra de eventos relacionados con la suscripci√≥n. </p><br><p>  <strong>Renovaciones</strong> <br>  <em>Extensi√≥n regular, activaci√≥n de prueba, registro de una oferta introductoria y promocional (gratuita y de pago).</em> </p><br><p>  <strong>Conversi√≥n de suscripci√≥n regular</strong> <br>  <em>Conversi√≥n de ofertas promocionales de prueba, introductorias y pagas (gratuitas y pagas).</em> </p><br><p>  <strong>Vencimiento</strong> <br>  <em>vencimiento de una suscripci√≥n regular, vencimiento de una versi√≥n de prueba, vencimiento de una oferta introductoria pagada, vencimiento de una oferta promocional gratuita, vencimiento de una oferta promocional pagada</em> </p><br><p>  <strong>Devoluciones</strong> <br>  <em>reembolso de una suscripci√≥n regular, reembolso de una oferta introductoria pagada, reembolso de una oferta promocional pagada</em> </p><br><p>  <strong>Otros eventos</strong> <br>  <em>habilitar renovaci√≥n, desactivar renovaci√≥n, transici√≥n al per√≠odo de gracia, actualizar suscripci√≥n</em> </p><br><p>  Muchos eventos, ¬øverdad?  Apphud rastrea <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">19 tipos de</a> eventos.  Puede asignar a cada evento su propio nombre y combinar algunas cancelaciones en un solo evento. </p><br><h2 id="slozhnosti-s-vychisleniem-ceny">  Desaf√≠os a los precios </h2><br><p>  La mayor dificultad es que el cheque de Apple no indica la cantidad debitada.  Quiz√°s Apple alg√∫n d√≠a agregar√° esto a la verificaci√≥n, pero hasta ahora tenemos que manejar las siguientes situaciones manualmente. </p><br><h4 id="izmenenie-ceny">  Cambio de precio </h4><br><p>  Al aumentar el costo de la suscripci√≥n, el desarrollador puede indicar si debe aplicar nuevos precios para los nuevos suscriptores.  Si elige <em>postularse</em> , entonces todo es simple.  La suscripci√≥n simplemente caduca si el usuario se ha negado a aumentar el precio.  Y si elige <em>no presentar una solicitud</em> , entonces para los suscriptores antiguos es necesario usar los precios a los que se suscribieron inicialmente.  <em>StoreKit</em> no devuelve informaci√≥n sobre el precio al que se ha suscrito el usuario, por lo que debe almacenar el precio para cada usuario en alg√∫n lugar. </p><br><h4 id="smena-podpiski">  Cambio de suscripci√≥n </h4><br><p>  Al suscribirse, el usuario mismo puede cambiar su duraci√≥n y precio en la configuraci√≥n de suscripci√≥n en la aplicaci√≥n App Store.  Debe verificar el identificador del producto al renovar la suscripci√≥n y obtener el precio correspondiente.  Hay tres tipos de cambios de suscripci√≥n: downgrade, cross-grade y upgrade.  Sobre esto, escribimos un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo</a> separado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sobre Habr</a> , tambi√©n puede leer la documentaci√≥n oficial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </p><br><h4 id="vozvrat-neispolzovannoy-chasti-podpiski">  Devolver parte de suscripci√≥n no utilizada </h4><br><p>  Si, pasa.  Para los grados cruzados y las actualizaciones de suscripci√≥n, la parte paga no utilizada se devuelve al usuario y el costo de la nueva suscripci√≥n se cobra de inmediato. </p><br><p><img src="https://habrastorage.org/webt/fg/kh/ki/fgkhkikqanfx27agq_p5sqjf8ze.jpeg" alt="imagen"><br>  <em>Un ejemplo de un usuario en Apphud que ha cambiado su suscripci√≥n con la devoluci√≥n de una parte no utilizada</em> </p><br><h4 id="raznye-ceny-dlya-raznyh-stran">  Diferentes precios para diferentes pa√≠ses. </h4><br><p>  En la App Store, Connect puede crear diferentes precios para una suscripci√≥n para diferentes pa√≠ses.  Por lo tanto, debe almacenar los precios de cada pa√≠s por separado y usar el precio correspondiente al pa√≠s del usuario. </p><br><h4 id="raznye-valyuty">  Diferentes monedas </h4><br><p>  No todos los analistas de productos admiten la conversi√≥n de divisas.  Es necesario convertir los precios a la moneda base (por ejemplo, USD) y usarlo solo en todas partes.  En Apphud, actualizamos regularmente los tipos de cambio utilizando los tipos de cambio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">abiertos</a> . </p><br><h4 id="komissiya-apple">  Comisi√≥n de manzana </h4><br><p>  La comisi√≥n de Apple es del 30%.  Pero despu√©s de un a√±o de usar la suscripci√≥n, la comisi√≥n de Apple se reduce al 15%.  Un matiz importante: las interrupciones en la suscripci√≥n <em>por</em> m√°s de 60 d√≠as restablecen la fecha de uso continuo. </p><br><h4 id="vvodnoe-predlozhenie-ne-obyazatelno-vvodnoe">  La oraci√≥n introductoria no es necesariamente introductoria </h4><br><p>  Esto significa que las ofertas introductorias de prueba y de pago pueden ser no solo al comienzo de la suscripci√≥n, sino que tambi√©n se pueden emitir al regresar a la suscripci√≥n, si el usuario no ha elaborado la oferta introductoria antes. </p><br><h4 id="ceny-vvodnyh-predlozheniy">  Precios de oferta de lanzamiento </h4><br><p>  Es necesario almacenar los precios y el tipo de ofertas introductorias para cada pa√≠s en el servidor: prueba, prepago o pago tal como se utiliza.  Lea m√°s sobre oraciones introductorias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </p><br><h4 id="promo-predlozheniya">  Ofertas promocionales </h4><br><p>  Las ofertas promocionales pueden alternarse y reemplazarse entre s√≠, ya que se pueden usar un n√∫mero ilimitado de veces.  Es necesario almacenar no solo el precio de la suscripci√≥n principal, sino tambi√©n los precios de todas las ofertas promocionales de cada pa√≠s.  Lea m√°s sobre ofertas promocionales <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </p><br><p><img src="https://habrastorage.org/webt/ii/vf/ud/iivfud47autqywvaxvsucnoziii.jpeg" alt="imagen"><br>  <em>Un ejemplo de un usuario en Apphud que se inscribi√≥ con una oferta introductoria y luego aprovech√≥ una oferta promocional.</em> </p><br><h4 id="vozvraty">  Devoluciones </h4><br><p>  Es necesario calcular las transacciones para las cuales se realiz√≥ la devoluci√≥n y enviar cantidades negativas a los analistas. </p><br><h4 id="opredelenie-user-id-pri-zapuske-s-drugogo-ustroystva">  Determinaci√≥n de la ID de usuario cuando se inicia desde otro dispositivo. </h4><br><p>  El usuario puede iniciar la aplicaci√≥n desde otro dispositivo.  Es importante determinar correctamente la ID de usuario con la que se env√≠an los datos al an√°lisis.  En algunos casos, tendr√° que combinar usuarios en el servidor.  Las renovaciones deben enviarse con la identificaci√≥n de usuario correcta. </p><br><h4 id="hranenie-chekov-polzovateley-i-proverka-po-raspisaniyu">  Almacenamiento de cheques de usuario y cheques programados </h4><br><p>  Finalmente, debe guardar los cheques de los usuarios y verificarlos antes de la fecha de vencimiento esperada y para los eventos que Apple env√≠a en sus notificaciones. </p><br><h2 id="integracii-v-apphud">  Integraciones en Apphud </h2><br><p>  Una de las funciones de Apphud es la integraci√≥n, que permite enviar eventos de suscripci√≥n a an√°lisis de productos a trav√©s de nuestro servidor. </p><br><h4 id="integracii-c-produktovymi-analitikami">  Integraciones de analistas de producto </h4><br><p>  Para permitir la integraci√≥n con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Amplitude</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mixpanel</a> , debe agregar una clave API en la configuraci√≥n de Apphud. </p><br><p>  Despu√©s de agregar integraci√≥n a sus an√°lisis, vendr√°n eventos en tiempo real.  Puede encontrar ARPU, MRR, tasas de conversi√≥n de prueba, cancelar la suscripci√≥n, etc. Y, por supuesto, asociar todo esto con sus propios eventos dentro de la aplicaci√≥n.  Adem√°s, los indicadores para cada usuario estar√°n disponibles para usted: la cantidad gastada por √©l, el n√∫mero de transacciones y otros. </p><br><p><img src="https://habrastorage.org/webt/vn/bd/p0/vnbdp0uymymj5a7nwvjgqochjhu.jpeg" alt="imagen"><br>  <em>Usuario de ejemplo en Mixpanel despu√©s de agregar integraci√≥n en Apphud</em> </p><br><h4 id="integracii-s-sistemami-atribucii">  Integraci√≥n con sistemas de atribuci√≥n </h4><br><p>  Si est√° promocionando su aplicaci√≥n o planea hacerlo, la integraci√≥n de Apphud con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AppsFlyer</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Branch</a> lo ayudar√° a rastrear la efectividad de sus campa√±as publicitarias.  Puede comparar canales de tr√°fico por ingresos totales de suscripciones y otras m√©tricas. </p><br><p><img src="https://habrastorage.org/webt/qp/im/wi/qpimwi1ptwt5lftfd-pagf0l-me.jpeg" alt="imagen"><br>  <em>Ingresos de suscripci√≥n de diferentes canales de tr√°fico en Branch</em> </p><br><h4 id="integracii-s-messendzherami">  Integraciones con mensajer√≠a instant√°nea. </h4><br><p>  Tambi√©n puede recibir informaci√≥n sobre nuevas pruebas o renovaciones en tiempo real en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Slack</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Telegram</a> .  La integraci√≥n no llevar√° m√°s de un minuto. </p><br><h2 id="zaklyuchenie">  Conclusi√≥n </h2><br><p>  Es dif√≠cil calcular los ingresos exactos de las suscripciones usted mismo.  Adem√°s de tener su propio servidor, deber√° calcular correctamente la cantidad cobrada.  Para la implementaci√≥n, pasar√° mucho tiempo y recursos que vale la pena gastar en mejorar el producto.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Apphud</a> lo ayudar√° a calcular correctamente los ingresos de las suscripciones y enviarlos a sus an√°lisis. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/474440/">https://habr.com/ru/post/474440/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../474426/index.html">La serie animada "C√≠rculo matem√°tico"</a></li>
<li><a href="../474430/index.html">DevOpsDays Moscow: una conferencia que la comunidad hace para la comunidad</a></li>
<li><a href="../474434/index.html">Propia bot de Telegram para rastrear el tiempo de actividad de sus servidores en Python y Docker</a></li>
<li><a href="../474436/index.html">GitLab debido a la pol√≠tica termina la contrataci√≥n de ingenieros de Rusia y China</a></li>
<li><a href="../474438/index.html">Simple y en C ++. Conceptos b√°sicos de Userver: un marco para escribir microservicios asincr√≥nicos</a></li>
<li><a href="../474442/index.html">Historia de Irish Life Extension</a></li>
<li><a href="../474444/index.html">5 proyectos de entrenamiento m√°s atrevidos para el desarrollador (Layer, Squoosh, Calculator, Website Crawler, Music Player)</a></li>
<li><a href="../474448/index.html">De lo que es capaz el cerebro de un estudiante en el mundo de la inform√°tica</a></li>
<li><a href="../474450/index.html">Deje de usar TTL rid√≠culamente peque√±o para DNS</a></li>
<li><a href="../474452/index.html">Informe de estado de oto√±o de Haxe</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>