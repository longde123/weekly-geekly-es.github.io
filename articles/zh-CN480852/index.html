<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘‘ â®ï¸ ğŸ¤¾ğŸ½ Vaadinå’ŒSpring Bootä¸Šçš„å¿«é€ŸWebåº”ç”¨å¼€å‘ ğŸ‘©â€ğŸ­ ğŸ›ï¸ âœŒğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æœ¬æ–‡çš„ç›®çš„æ˜¯ç³»ç»ŸåŒ–ä½¿ç”¨Spring Bootåœ¨Vaadin 14ä¸Šå¼€å‘Webåº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ã€‚ 


 åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œæˆ‘å»ºè®®é˜…è¯»ä»¥ä¸‹ææ–™ï¼š 


- Spring Bootç®€ä»‹ 
- æ˜¥å­£æ•°æ®JPA 
- é¾™ç›®å²›å›å½’Javaçš„ä¼Ÿå¤§ 
- Vaadin Flow-ä¸€åªå¥‡æ€ªçš„é¹¿ 
 å°è±¡æ•° 


 Va...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vaadinå’ŒSpring Bootä¸Šçš„å¿«é€ŸWebåº”ç”¨å¼€å‘</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480852/"><p><img src="https://habrastorage.org/webt/gx/-o/lw/gx-olwos1pluf9izwqqd5j2r1uk.png" alt="æ°”é“æ­£å‹é€šæ°”"></p><br><p> æœ¬æ–‡çš„ç›®çš„æ˜¯ç³»ç»ŸåŒ–ä½¿ç”¨Spring Bootåœ¨Vaadin 14ä¸Šå¼€å‘Webåº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ã€‚ </p><br><p> åœ¨é˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œæˆ‘å»ºè®®é˜…è¯»ä»¥ä¸‹ææ–™ï¼š </p><br><ul><li>  <a href="https://habr.com/ru/post/435144/">Spring Bootç®€ä»‹</a> </li><li>  <a href="https://habr.com/ru/post/435114/">æ˜¥å­£æ•°æ®JPA</a> </li><li>  <a href="https://habr.com/ru/post/438870/">é¾™ç›®å²›å›å½’Javaçš„ä¼Ÿå¤§</a> </li><li>  <a href="https://habr.com/ru/company/haulmont/blog/416893/">Vaadin Flow-ä¸€åªå¥‡æ€ªçš„é¹¿</a> <a name="habracut"></a></li></ul><br><h4 id="vpechatleniya"> å°è±¡æ•° </h4><br><p>  Vaadin 14æ˜¯ç”¨äºè®¾è®¡Webåº”ç”¨ç¨‹åºçš„ç›¸å½“æ–¹ä¾¿çš„å·¥å…·ï¼Œåœ¨æ»¡è¶³è¯¥è¦æ±‚ä¹‹å‰ï¼Œå®ƒä»…åœ¨JavaFXï¼ŒAndroidç”šè‡³J2MEä¸Šå¼€å‘äº†å›¾å½¢ç•Œé¢ï¼Œå¹¶ä¸”åŒæ—¶é¿å…äº†å‰ç«¯å¼€å‘ï¼ˆå¯ä½¿ç”¨HTMLï¼ŒCSSï¼ŒJSçš„åŸºæœ¬çŸ¥è¯†ï¼‰ï¼Œå› ä¸ºå®ƒä¸è®¤ä¸ºæˆ‘çš„ </p><br><p>  <strong>å…è´£å£°æ˜</strong> </p><br><p> é‚£äº›å°šæœªä½¿ç”¨Spring Bootçš„äººå»ºè®®è·³è¿‡ä½¿ç”¨Spring Initializrçš„å¿«é€Ÿå…¥é—¨ï¼Œè¿”å›æ¨èçš„ææ–™ï¼Œå¹¶å°è¯•è‡ªå·±é…ç½®ä¸€åˆ‡ï¼Œé‡åˆ°å¾ˆå¤šä¸åŒçš„é—®é¢˜ï¼Œå¦åˆ™å°†æ¥åœ¨ç†è§£å„ç§äº‹ç‰©ä¸Šä¼šæœ‰å·®è·ã€‚ </p><br><h4 id="bystryy-start"> å¿«é€Ÿä¸Šæ‰‹ </h4><br><p> ä½¿ç”¨<a href="https://start.spring.io/" rel="nofollow">Spring Initializr</a>ä¸ºæˆ‘ä»¬çš„Webåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œè¯¥é¡¹ç›®æ˜¯æˆ‘ä»¬å°å‹Webåº”ç”¨ç¨‹åºçš„å¿…è¦ä¾èµ–é¡¹ï¼š </p><br><ul><li>  Spring Data JPAï¼ˆç”¨äºæ•°æ®åº“ï¼‰ </li><li>  Vaadinï¼ˆç”¨äºWebåº”ç”¨ç¨‹åºå¼€å‘ï¼‰ </li><li> é¾™ç›®å²›ï¼ˆå‡å°‘æ ·æ¿ä»£ç ï¼‰ </li><li>  MySQLé©±åŠ¨ç¨‹åºï¼ˆæˆ‘ä½¿ç”¨mariadbï¼Œåœ¨æ˜¥å­£åˆå§‹åŒ–å®ƒä¸æ˜¯ï¼‰ </li></ul><br><h4 id="nastroyka-applicationproperties-i-bazy-dannyh"> è®¾ç½®application.propertieså’Œæ•°æ®åº“ </h4><br><p> åœ¨Spring Initializrä¸Šåˆ›å»ºçš„é¡¹ç›®å‡ ä¹å¯ä»¥è¿è¡Œäº†ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡æŒ‡å®šæ•°æ®åº“è·¯å¾„ï¼Œç”¨æˆ·åå’Œå¯†ç æ¥é…ç½®application.propertiesã€‚ </p><br><pre><code class="plaintext hljs">spring.datasource.url = jdbc:mariadb://127.0.0.1:3306/test spring.datasource.username=user spring.datasource.password=password spring.jpa.hibernate.ddl-auto=update</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">æ³¨æ„ï¼šddl-auto</b> <div class="spoiler_text"><p> è¯·å‹¿åœ¨å®æ—¶æ•°æ®åº“æˆ–å¼€å‘é¡¹ç›®æ—¶å°†ddl-autoä¸æ›´æ–°å€¼ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨æ›´æ–°æ•°æ®åº“æ¶æ„ã€‚ <br>  ddl-autoçš„ç°æœ‰é€‰é¡¹ï¼š <br>  create-å°†åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œè¯¥è¡¨å…ˆå‰å·²åˆ é™¤è¯¥è¡¨çš„æ—§ç‰ˆæœ¬ï¼ˆåœ¨æ¶æ„æ›´æ”¹çš„æƒ…å†µä¸‹ä¼šä¸¢å¤±æ•°æ®ï¼‰ <br>  validate-æ£€æŸ¥æ•°æ®åº“ä¸­çš„è¡¨ï¼Œå¦‚æœå®ƒä¸å®ä½“ä¸åŒ¹é…ï¼Œåˆ™ä¼‘çœ å°†æŠ›å‡ºå¼‚å¸¸ <br> æ›´æ–°-æ£€æŸ¥è¡¨ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°å®ƒï¼Œè€Œä¸ä¼šä»å®ä½“ä¸­åˆ é™¤ä¸å­˜åœ¨çš„å­—æ®µ <br>  create-drop-æ£€æŸ¥è¡¨ï¼Œåˆ›å»ºæˆ–æ›´æ–°å®ƒï¼Œç„¶ååˆ é™¤å®ƒï¼Œä»¥ç”¨äºå•å…ƒæµ‹è¯• </p></div></div><br><p> è®¾ç½®äº†ddl-autoï¼šupdateå€¼åï¼Œhibernateå°†æ ¹æ®æˆ‘ä»¬çš„æœ¬è´¨åœ¨æ•°æ®åº“ä¸­è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œå› ä¸º æˆ‘ä»¬åˆ¶ä½œä¸€ä¸ªç®€å•çš„é€šè®¯å½•ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªè”ç³»äººç±»ã€‚ </p><br><div class="spoiler">  <b class="spoiler_title">Contact.class</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Entity</span></span>(name = <span class="hljs-string"><span class="hljs-string">"Contacts"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Getter</span></span> <span class="hljs-meta"><span class="hljs-meta">@Setter</span></span> <span class="hljs-meta"><span class="hljs-meta">@EqualsAndHashCode</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Contact</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-meta"><span class="hljs-meta">@GeneratedValue</span></span>(strategy = GenerationType.AUTO) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String firstName; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String secondName; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String fatherName; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String numberPhone; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String email; }</code> </pre> </div></div><br><p> è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºå¤„ç†æ•°æ®åº“çš„æ¥å£ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªè¿”å›Listçš„æ–¹æ³•ï¼Œå› ä¸º é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Data JPAè¿”å›Iterableè€Œä¸æ˜¯Listã€‚ <br></p><div class="spoiler">  <b class="spoiler_title">ContactRepository.class</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactRepository</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CrudRepository</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Contact</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-function">List&lt;Contact&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> </div></div><br><p>  Vaadinä¸Šçš„ç•Œé¢å¼€å‘åŒ…æ‹¬å°†è¾“å…¥ï¼Œå¯è§†åŒ–å’Œäº¤äº’å½¢å¼çš„ç»„ä»¶æ·»åŠ åˆ°å¸ƒå±€å¯¹è±¡ä¸­ï¼Œä»¥è¿›è¡Œå…ƒç´ çš„å¿…è¦å®šä½ã€‚ å¯ä»¥<a href="https://vaadin.com/components" rel="nofollow">åœ¨æ¡†æ¶</a>çš„<a href="https://vaadin.com/components" rel="nofollow">å®˜æ–¹ç½‘ç«™ä¸Š</a>æ‰¾åˆ°æ‰€æœ‰ç»„ä»¶çš„åˆ—è¡¨<a href="https://vaadin.com/components" rel="nofollow">ã€‚</a> </p><br><p> æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„ä¸»é¡µå°†ä¸ºContactListã€‚ æˆ‘ä»¬å°†ä»<a href="https://vaadin.com/components/vaadin-app-layout" rel="nofollow">AppLayout</a>ç»§æ‰¿å·²åˆ›å»ºé¡µé¢çš„æ‰€æœ‰å¯¹è±¡-è¿™æ˜¯Webåº”ç”¨ç¨‹åºçš„å…¸å‹å¸ƒå±€ï¼ŒåŒ…æ‹¬ï¼š </p><br><ul><li> å¯¼èˆªæ ï¼ˆæ ‡é¢˜ï¼‰ </li><li> æŠ½å±‰ï¼ˆä¾§è¾¹æ ï¼‰ </li><li> å†…å®¹å†…å®¹ <br> åŒæ—¶ï¼Œå°†ç»„ä»¶æ·»åŠ åˆ°Navbarå’ŒDrawerï¼Œå¹¶å°†ç»„ä»¶è®¾ç½®ä¸ºContentä½œä¸ºContentï¼Œä¾‹å¦‚VerticalLayoutï¼Œå…¶ä¸­ç”¨æˆ·å…ƒç´ å°†ä»¥å‚ç›´æ’åˆ—æ”¾ç½®ã€‚ </li></ul><br><p> ç”¨äºç¼–è¾‘å’Œåˆ›å»ºè”ç³»äººçš„é¡µé¢å°†ä¸ºManageContactï¼Œæˆ‘ä»¬å°†åœ¨å…¶ä¸­å®ç°HasUrlParameteræ¥å£ä»¥ä¼ è¾“è”ç³»äººIDï¼Œæ‰“å¼€æ­¤æ¥å£åï¼Œå¿…é¡»å°†å‚æ•°ä¼ é€’ç»™é¡µé¢ã€‚ <br> ä¸ºäº†å°†é¡µé¢ç»‘å®šåˆ°ç‰¹å®šçš„URLï¼Œä½¿ç”¨Routeæ³¨é‡Šï¼š </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Route</span></span>(<span class="hljs-string"><span class="hljs-string">"contacts"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactList</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppLayout</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-meta"><span class="hljs-meta">@Route</span></span>(<span class="hljs-string"><span class="hljs-string">"manageContact"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ManageContact</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppLayout</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HasUrlParameter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">&gt; </span></span>{}</code> </pre> <br><h4 id="sozdanie-spiska-kontaktov"> åˆ›å»ºè”ç³»äººåˆ—è¡¨ </h4><br><p> åœ¨ContactListå¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­ï¼Œé¦–å…ˆæŒ‡å®šè¦ä½¿ç”¨çš„ç»„ä»¶ä½œä¸ºå¯¹è±¡çš„å­—æ®µã€‚ ç”±äºæ•°æ®å°†ä»æ•°æ®åº“ä¸­è·å–ï¼Œå› æ­¤æœ‰å¿…è¦å°†å­˜å‚¨åº“è¿æ¥åˆ°å¯¹è±¡å­—æ®µã€‚ </p><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Route</span></span>(<span class="hljs-string"><span class="hljs-string">"contacts"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ContactList</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppLayout</span></span></span><span class="hljs-class"> </span></span>{ VerticalLayout layout; Grid&lt;Contact&gt; grid; RouterLink linkCreate; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> ContactRepository contactRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ContactList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ layout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VerticalLayout(); grid = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grid&lt;&gt;(); linkCreate = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RouterLink(<span class="hljs-string"><span class="hljs-string">" "</span></span>,ManageContact.class,<span class="hljs-number"><span class="hljs-number">0</span></span>); layout.add(linkCreate); layout.add(grid); addToNavbar(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> H3(<span class="hljs-string"><span class="hljs-string">" "</span></span>)); setContent(layout); } }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">å…³äºè‡ªåŠ¨è¿çº¿ï¼ˆå·²æ›´æ–°ï¼‰</b> <div class="spoiler_text"><p> ä¸è¦å°è¯•ä»å¯¹è±¡çš„æ„é€ å‡½æ•°è®¿é—®contactRepositoryï¼›è¿™è‚¯å®šä¼šå¯¼è‡´NullPointerExceptionï¼Œä»å…·æœ‰PostConstructæ‰¹æ³¨çš„æ–¹æ³•æˆ–å·²ç»åˆ›å»ºçš„å¯¹è±¡çš„æ–¹æ³•è¿›è¡Œè®¿é—®ã€‚ <br> åœ¨<a href="https://habr.com/ru/users/zesetup/" class="user_link">zesetup</a> ï¼šcontactRepositoryçš„æŠ€å·§ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°è¿›è¡Œæ³¨å…¥ï¼š </p><br><pre> <code class="java hljs">ContactRepository contactRepository; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ContactList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ContactRepository contactRepository)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.contactRepository = contactRepository;</code> </pre> <br><p> ä½œä¸º<a href="https://habr.com/ru/users/markellg/" class="user_link">markellg</a>çš„æç¤ºï¼šå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä½¿ç”¨Spring 4.3åŠæ›´é«˜ç‰ˆæœ¬æ—¶ï¼Œå¦‚æœç±»åŒ…å«å•ä¸ªæ„é€ å‡½æ•°ï¼Œåˆ™æ„é€ å‡½æ•°ä¸Šçš„Autowiredæ³¨é‡Šæ˜¯å¯é€‰çš„ã€‚ </p></div></div><br><p>  VerticalLayoutç»„ä»¶å·²æ·»åŠ åˆ°ContactListç±»ä¸­ï¼Œç”¨äºå†…å®¹ä¸­å…ƒç´ çš„å‚ç›´æ’åˆ—ï¼Œæˆ‘ä»¬<a href="https://vaadin.com/api/platform/14.1.2/com/vaadin/flow/router/RouterLink.html" rel="nofollow">å°†å‘å…¶ä¸­</a>æ·»åŠ <a href="https://vaadin.com/api/platform/14.1.2/com/vaadin/flow/router/RouterLink.html" rel="nofollow">RouterLink</a> ï¼ˆè½¬åˆ°è”ç³»åˆ›å»ºé¡µé¢ï¼‰å’Œ<a href="https://vaadin.com/components/vaadin-grid" rel="nofollow">Grid</a>ä»¥æ˜¾ç¤ºè¡¨æ ¼ã€‚ ç½‘æ ¼ç”±Contactå¯¹è±¡é”®å…¥ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä»åˆ—è¡¨ä¸­åŠ è½½æ•°æ®ï¼Œå¹¶ä¸”åœ¨è°ƒç”¨setItemsï¼ˆï¼‰æ–¹æ³•æ—¶å®ƒä»¬ä¼šè‡ªåŠ¨æ‹‰èµ·ï¼› </p><br><pre> <code class="java hljs">Grid&lt;Contact&gt; grid; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ContactList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ grid = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Grid&lt;&gt;(); <span class="hljs-comment"><span class="hljs-comment">//      grid = new Grid&lt;&gt;(Contact.class); //      ,       }</span></span></code> </pre> <br><p> è‡ªåŠ¨åˆ—åˆ›å»ºçš„è¡Œä¸ºå¯¹æˆ‘ä»¬è€Œè¨€å¹¶ä¸æœ‰è¶£ï¼Œå› ä¸º åœ¨æœ¬æ–‡çš„æ¡†æ¶ä¸­ï¼Œå€¼å¾—å±•ç¤ºçš„æ˜¯å¢åŠ åˆ—ï¼Œä»¥åŠæ˜¾ç¤ºç”¨äºåˆ é™¤æˆ–ç¼–è¾‘è”ç³»äººçš„æŒ‰é’®ã€‚ </p><br><p> ä¸ºäº†å¡«å……è¡¨ï¼Œæˆ‘ä»¬å°†ä»contactRepositoryè·å–æ•°æ®ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå¸¦æœ‰PostConstructæ‰¹æ³¨çš„æ–¹æ³• </p><br><div class="spoiler">  <b class="spoiler_title">ç”¨fillGridï¼ˆï¼‰å¡«å……è¡¨æ ¼</b> <div class="spoiler_text"><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@PostConstruct</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillGrid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ List&lt;Contact&gt; contacts = contactRepository.findAll(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!contacts.isEmpty()){ <span class="hljs-comment"><span class="hljs-comment">//     grid.addColumn(Contact::getFirstName).setHeader(""); grid.addColumn(Contact::getSecondName).setHeader(""); grid.addColumn(Contact::getFatherName).setHeader(""); grid.addColumn(Contact::getNumberPhone).setHeader(""); grid.addColumn(Contact::getEmail).setHeader("E-mail"); //     grid.addColumn(new NativeButtonRenderer&lt;Contact&gt;("", contact -&gt; { UI.getCurrent().navigate(ManageContact.class,contact.getId()); })); grid.addColumn(new NativeButtonRenderer&lt;Contact&gt;("", contact -&gt; { Dialog dialog = new Dialog(); Button confirm = new Button(""); Button cancel = new Button(""); dialog.add("     ?"); dialog.add(confirm); dialog.add(cancel); confirm.addClickListener(clickEvent -&gt; { contactRepository.delete(contact); dialog.close(); Notification notification = new Notification(" ",1000); notification.setPosition(Notification.Position.MIDDLE); notification.open(); grid.setItems(contactRepository.findAll()); }); cancel.addClickListener(clickEvent -&gt; { dialog.close(); }); dialog.open(); })); grid.setItems(contacts); } }</span></span></code> </pre> </div></div><br><p>  NativeButtonRendererç”¨äºæ·»åŠ å¸¦æœ‰ç¼–è¾‘å’Œåˆ é™¤æŒ‰é’®çš„åˆ—ï¼Œæˆ‘ä»¬å°†æŒ‰é’®åç§°ä¼ é€’ç»™æ„é€ å‡½æ•°å‚æ•°ï¼Œä»¥åŠæŒ‰é’®å•å‡»å¤„ç†ç¨‹åºã€‚ </p><br><pre> <code class="java hljs">grid.addColumn(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NativeButtonRenderer&lt;Contact&gt;(<span class="hljs-string"><span class="hljs-string">""</span></span>, contact -&gt; { <span class="hljs-comment"><span class="hljs-comment">//DO SOMETHING })); grid.addColumn(new NativeButtonRenderer&lt;Contact&gt;("", new ClickableRenderer.ItemClickListener&lt;Contact&gt;() { @Override public void onItemClicked(Contact contact) { //DO SOMETHING }}));</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">ç»“æœ</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/3r/gv/r_/3rgvr_xegcdji_o0azcc3e6cfb8.png" alt="è”ç»œäººæ¸…å•"></p></div></div><br><h4 id="sozdanie-stranicy-redaktirovaniya-kontaktov"> åˆ›å»ºè”ç³»äººç¼–è¾‘é¡µé¢ </h4><br><p> è”ç³»äººç¼–è¾‘é¡µé¢æ¥å—å‚æ•°ä½œä¸ºè”ç³»äººIDï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å®ç°setParameterï¼ˆï¼‰æ–¹æ³•ï¼š </p><br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setParameter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BeforeEvent beforeEvent, Integer contactId)</span></span></span><span class="hljs-function"> </span></span>{ id = contactId; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!id.equals(<span class="hljs-number"><span class="hljs-number">0</span></span>)){ addToNavbar(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> H3(<span class="hljs-string"><span class="hljs-string">" "</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { addToNavbar(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> H3(<span class="hljs-string"><span class="hljs-string">" "</span></span>)); } fillForm(); <span class="hljs-comment"><span class="hljs-comment">//  }</span></span></code> </pre> <br><p> æ·»åŠ ç»„ä»¶ç±»ä¼¼äºContactListï¼Œä»…åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨VerticalLayoutï¼Œè€Œæ˜¯ä½¿ç”¨FormLayoutç‰¹æ®Šæ ‡è®°æ¥æ˜¾ç¤ºæ­¤ç±»è¡¨å•ã€‚ æˆ‘ä»¬ä¸å†ä½¿ç”¨å¸¦æœ‰PostConstructæ‰¹æ³¨çš„æ–¹æ³•æ¥ç”¨æ•°æ®å¡«å……è¡¨å•ï¼Œè€Œæ˜¯åœ¨ä»URLè·å–è”ç³»å·ç ä¹‹åï¼Œå› ä¸ºé“¾ä¸ºï¼šå¯¹è±¡æ„é€ å‡½æ•°-&gt; @PostConstruct-&gt; <a href="https://habr.com/ru/users/override/" class="user_link">è¦†ç›–</a> </p><br><div class="spoiler">  <b class="spoiler_title">Managecontact.class</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Route</span></span>(<span class="hljs-string"><span class="hljs-string">"manageContact"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ManageContact</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppLayout</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HasUrlParameter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">&gt; </span></span>{ Integer id; FormLayout contactForm; TextField firstName; TextField secondName; TextField fatherName; TextField numberPhone; TextField email; Button saveContact; <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> ContactRepository contactRepository; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ManageContact</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    contactForm = new FormLayout(); firstName = new TextField(""); secondName = new TextField(""); fatherName = new TextField(""); numberPhone = new TextField(" "); email = new TextField(" "); saveContact = new Button(""); //     contactForm.add(firstName, secondName,fatherName,numberPhone,email,saveContact); setContent(contactForm); } @Override public void setParameter(BeforeEvent beforeEvent, Integer contactId) { id = contactId; if (!id.equals(0)){ addToNavbar(new H3(" ")); } else { addToNavbar(new H3(" ")); } fillForm(); } public void fillForm(){ if (!id.equals(0)){ Optional&lt;Contact&gt; contact = contactRepository.findById(id); contact.ifPresent(x -&gt; { firstName.setValue(x.getFirstName()); secondName.setValue(x.getSecondName()); fatherName.setValue(x.getFatherName()); numberPhone.setValue(x.getNumberPhone()); email.setValue(x.getEmail()); }); } saveContact.addClickListener(clickEvent-&gt;{ //       Contact contact = new Contact(); if (!id.equals(0)){ contact.setId(id); } contact.setFirstName(firstName.getValue()); contact.setSecondName(secondName.getValue()); contact.setFatherName(fatherName.getValue()); contact.setEmail(email.getValue()); contact.setNumberPhone(numberPhone.getValue()); contactRepository.save(contact); Notification notification = new Notification(id.equals(0)? "  ":"  ",1000); notification.setPosition(Notification.Position.MIDDLE); notification.addDetachListener(detachEvent -&gt; { UI.getCurrent().navigate(ContactList.class); }); contactForm.setEnabled(false); notification.open(); }); } }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">ç»“æœ</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/gy/el/nx/gyelnxnr0lxp5jjyvx8mbit8ttw.png" alt="è”ç³»äººç¼–è¾‘"></p></div></div><br><p> ç»“æœï¼šVaadin 14æ˜¯ç”¨äºåˆ›å»ºç®€å•Webåº”ç”¨ç¨‹åºçš„ç›¸å½“æ–¹ä¾¿çš„æ¡†æ¶ï¼Œä½¿ç”¨å®ƒï¼Œæ‚¨å¯ä»¥å¿«é€Ÿåˆ¶ä½œå‡ºä»…å…·æœ‰JavaçŸ¥è¯†çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥æ­£å¸¸å·¥ä½œã€‚ ä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œæ•´ä¸ªæ¥å£æ˜¯åœ¨æœåŠ¡å™¨ç«¯åˆ›å»ºçš„ï¼Œæ¯”ä½¿ç”¨HTML5 + JSæ›´åŠ éœ€è¦èµ„æºã€‚ è¯¥æ¡†æ¶æ›´é€‚åˆéœ€è¦å¿«é€Ÿå®Œæˆè€Œæ— éœ€ç ”ç©¶å‰ç«¯æŠ€æœ¯çš„å°å‹é¡¹ç›®ã€‚ </p><br><p> æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•æ— éœ€é¢„å…ˆè®¾è®¡æ•°æ®åº“å³å¯å¿«é€Ÿè½»æ¾åœ°åˆ›å»ºWebåº”ç”¨ç¨‹åºï¼Œé¿å…ä½¿ç”¨å†—é•¿çš„xmlé…ç½®ä»¥åŠå¼€å‘Webç•Œé¢çš„é€Ÿåº¦å¦‚ä½•ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒSpring Bootå’ŒSpring Data JPAä½¿å¼€å‘äººå‘˜çš„å·¥ä½œæ›´è½»æ¾ï¼Œå¹¶ç®€åŒ–äº†å¼€å‘ã€‚ æœ¬æ–‡ä¸ä¼šå¯¹å·²ç»å»ºç«‹çš„å¼€å‘äººå‘˜é€éœ²ä»»ä½•æ–°â€‹â€‹å†…å®¹ï¼Œä½†æ˜¯å°†å¸®åŠ©åˆå­¦è€…å¼€å§‹æŒæ¡Springæ¡†æ¶ã€‚ </p><br><p>  <a href="https://github.com/DiProtsenko/vaadin-test" rel="nofollow">å¸¦é¡¹ç›®çš„å­˜å‚¨åº“</a> </p><br><blockquote> æ–‡ç« ä¸­å¯èƒ½å­˜åœ¨è¯­æ³•å’Œæ ‡ç‚¹é”™è¯¯ï¼›æ£€æµ‹åˆ°åï¼Œè¯·ä»¥ä¸ªäººåä¹‰å‘é€ </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN480852/">https://habr.com/ru/post/zh-CN480852/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN480834/index.html">å¸¦1Cçš„VPSæœåŠ¡å™¨ï¼šæœ‰ç‚¹é«˜ï¼Ÿ</a></li>
<li><a href="../zh-CN480836/index.html">ä½¿ç”¨ç€è‰²å™¨æ›¿æ¢æ¸¸æˆä¸­çš„è°ƒè‰²æ¿</a></li>
<li><a href="../zh-CN480838/index.html">SQLæŸ¥è¯¢é€Ÿåº¦å¾ˆå¿«ã€‚ ç¬¬ä¸€éƒ¨åˆ†</a></li>
<li><a href="../zh-CN480840/index.html">æ°´å£°ç³»ç»Ÿçš„ç½‘ç»œæ”»å‡»ï¼šç¥è¯ä¸ç°å®</a></li>
<li><a href="../zh-CN480848/index.html">é€‚ç”¨äº6è‡³10å²çš„åˆå­¦è€…ç”µå­å·¥ç¨‹å¸ˆçš„å¥—ä»¶å’Œæ„é€ å™¨ã€‚ å•†åº—é‡Œæœ‰ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN480856/index.html">ä¹”è¾¾ è¯•å›¾ä»¥å£°æ˜æ–¹å¼è¿›è¡Œ</a></li>
<li><a href="../zh-CN480858/index.html">åœ¨æµè§ˆå™¨ä¸­å¯åŠ¨Linux-jor1kæ¨¡æ‹Ÿå™¨å°†æä¾›å¸®åŠ©ï¼ˆå†…ç½®çš„Monkey Islandï¼ŒDoomå’ŒFrontier Elite IIï¼‰</a></li>
<li><a href="../zh-CN480860/index.html">é˜²é”ˆç†è®º</a></li>
<li><a href="../zh-CN480866/index.html">Webå¼€å‘çš„æ–°æ—¶ä»£æˆ–â€œä¸€åˆ‡å·²å­˜åœ¨â€</a></li>
<li><a href="../zh-CN480870/index.html">åå¹´ç»“æœ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>