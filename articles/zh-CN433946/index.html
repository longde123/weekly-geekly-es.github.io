<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ğŸ½ ğŸ‘ŠğŸ¼ ğŸ•´ğŸ¾ äººå·¥æ™ºèƒ½å¤‡å¿˜å•-ä¸¢å¼ƒå¤šä½™çš„ä¸œè¥¿ï¼Œæ•™ä¸»è¦çŸ¥è¯†ã€‚ è®­ç»ƒåºåˆ—å¤„ç†æŠ€æœ¯ â¿ ğŸ‘†ğŸ½ â™¦ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è¿™æ˜¯ç¬¬äºŒç¯‡æœ‰å…³å¯¹æµ·ä¸Šæœå¯»èˆ¹åªæ¯”èµ›çš„ææ–™è¿›è¡Œåˆ†æå’Œç ”ç©¶çš„æ–‡ç« ã€‚ ä½†æ˜¯ç°åœ¨æˆ‘ä»¬å°†ç ”ç©¶è®­ç»ƒåºåˆ—çš„å±æ€§ã€‚ è®©æˆ‘ä»¬å°è¯•æŸ¥æ‰¾å¤šä½™çš„ä¿¡æ¯ï¼Œæºæ•°æ®ä¸­çš„å†—ä½™å¹¶å°†å…¶åˆ é™¤ã€‚ 



 æœ¬æ–‡ä¹Ÿæ˜¯å‡ºäºå¥½å¥‡å’Œé—²ç½®å…´è¶£çš„ç»“æœï¼Œåœ¨å®è·µä¸­ä»€ä¹ˆä¹Ÿæ²¡æœ‰é‡åˆ°ï¼Œå¯¹äºå®é™…ä»»åŠ¡å‡ ä¹æ²¡æœ‰å¤åˆ¶ç²˜è´´çš„å†…å®¹ã€‚ è¿™æ˜¯å¯¹åŸ¹è®­é¡ºåºå±æ€§çš„ä¸€é¡¹å°ç ”ç©¶-ç»™å‡ºäº†ä½œè€…...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>äººå·¥æ™ºèƒ½å¤‡å¿˜å•-ä¸¢å¼ƒå¤šä½™çš„ä¸œè¥¿ï¼Œæ•™ä¸»è¦çŸ¥è¯†ã€‚ è®­ç»ƒåºåˆ—å¤„ç†æŠ€æœ¯</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433946/"> è¿™æ˜¯ç¬¬äºŒç¯‡æœ‰å…³å¯¹æµ·ä¸Šæœå¯»èˆ¹åªæ¯”èµ›çš„ææ–™è¿›è¡Œåˆ†æå’Œç ”ç©¶çš„æ–‡ç« ã€‚ ä½†æ˜¯ç°åœ¨æˆ‘ä»¬å°†ç ”ç©¶è®­ç»ƒåºåˆ—çš„å±æ€§ã€‚ è®©æˆ‘ä»¬å°è¯•æŸ¥æ‰¾å¤šä½™çš„ä¿¡æ¯ï¼Œæºæ•°æ®ä¸­çš„å†—ä½™å¹¶å°†å…¶åˆ é™¤ã€‚ <br><br><img src="https://habrastorage.org/webt/b4/yk/pz/b4ykpzewv86nxd0szou25c_egzg.jpeg"><br><br> æœ¬æ–‡ä¹Ÿæ˜¯å‡ºäºå¥½å¥‡å’Œé—²ç½®å…´è¶£çš„ç»“æœï¼Œåœ¨å®è·µä¸­ä»€ä¹ˆä¹Ÿæ²¡æœ‰é‡åˆ°ï¼Œå¯¹äºå®é™…ä»»åŠ¡å‡ ä¹æ²¡æœ‰å¤åˆ¶ç²˜è´´çš„å†…å®¹ã€‚ è¿™æ˜¯å¯¹åŸ¹è®­é¡ºåºå±æ€§çš„ä¸€é¡¹å°ç ”ç©¶-ç»™å‡ºäº†ä½œè€…çš„æ¨ç†å’Œä»£ç ï¼Œæ‚¨å¯ä»¥è‡ªå·±æ£€æŸ¥/è¡¥å……/æ›´æ”¹æ‰€æœ‰å†…å®¹ã€‚ <br><br>  kaggleæµ·æ´‹æœç´¢æ¯”èµ›æœ€è¿‘ç»“æŸäº†ã€‚ ç©ºä¸­å®¢è½¦å…¬å¸å»ºè®®åˆ†ææœ‰èˆ¹å’Œæ— èˆ¹çš„æµ·æ´‹å«æ˜Ÿå›¾åƒã€‚ å¦‚æœuint8ï¼Œåˆ™æ€»å…±192555å¼ å›¾ç‰‡768x768x3-340,720,680,960å­—èŠ‚ï¼Œè¿™æ˜¯å¤§é‡ä¿¡æ¯ï¼Œå¹¶ä¸”æ¨¡ç³Šåœ°æ€€ç–‘å¹¶éæ‰€æœ‰å›¾ç‰‡éƒ½éœ€è¦è®­ç»ƒç½‘ç»œï¼Œå¹¶ä¸”åœ¨è¿™ç§ä¿¡æ¯é‡ä¸­ï¼Œé‡å¤å’Œå†—ä½™æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ è®­ç»ƒç½‘ç»œæ—¶ï¼Œä¹ æƒ¯ä¸Šä¼šåˆ†ç¦»ä¸€äº›æ•°æ®ï¼Œè€Œä¸åœ¨è®­ç»ƒä¸­ä½¿ç”¨å®ƒä»¬ï¼Œè€Œæ˜¯ä½¿ç”¨å®ƒæ¥éªŒè¯è®­ç»ƒçš„è´¨é‡ã€‚ å¹¶ä¸”ï¼Œå¦‚æœä¸€ä¸ªæµ·æ´‹å’ŒåŒä¸€ç‰‡æµ·åŸŸé™·å…¥äº†ä¸¤ä¸ªä¸åŒçš„å›¾åƒä¸­ï¼Œè€Œä¸€ä¸ªå›¾åƒåˆè½å…¥äº†è®­ç»ƒåºåˆ—ä¸­ï¼Œè€Œå¦ä¸€å›¾åƒåˆè½å…¥äº†éªŒè¯åºåˆ—ä¸­ï¼Œé‚£ä¹ˆéªŒè¯å°†å¤±å»æ„ä¹‰ï¼Œç½‘ç»œå°†å—åˆ°é‡æ–°è®­ç»ƒï¼Œæˆ‘ä»¬å°†ä¸ä¼šæ£€æŸ¥ç½‘ç»œçš„æ³›åŒ–ä¿¡æ¯çš„èƒ½åŠ›ï¼Œå› ä¸ºæ•°æ®æ˜¯ç›¸åŒçš„ã€‚ åº”å¯¹è¿™ç§ç°è±¡éœ€è¦å‚ä¸è€…çš„GPUèŠ±è´¹å¤§é‡æ—¶é—´å’Œç²¾åŠ›ã€‚ åƒå¾€å¸¸ä¸€æ ·ï¼Œä¼˜èƒœè€…å’Œè·å¥–è€…éƒ½ä¸ä¼šæ€¥äºå‘ä»–ä»¬çš„ç²‰ä¸ä»¬å±•ç¤ºç²¾é€šçš„ç§˜å¯†å¹¶åˆ—å‡ºä»£ç ï¼Œå¹¶ä¸”æ²¡æœ‰å­¦ä¹ å’Œå­¦ä¹ å®ƒçš„æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å°†ç»§ç»­å­¦ä¹ è¯¥ç†è®ºã€‚ <br><a name="habracut"></a><br> ä¸€ä¸ªç®€å•çš„è§†è§‰æ£€æŸ¥æ˜¾ç¤ºç¡®å®æœ‰å¤ªå¤šæ•°æ®ï¼ŒåŒä¸€æ¡æµ·é“å˜æˆäº†ä¸åŒçš„å›¾ç‰‡ï¼Œè¯·çœ‹ç¤ºä¾‹ <br><br><img src="https://habrastorage.org/webt/b8/wn/tb/b8wntbyikiqqjafizkmc6okundc.png"><br><br><img src="https://habrastorage.org/webt/ph/xh/g1/phxhg1aaqljhnqiaq28h17fktvo.png"><br><br><img src="https://habrastorage.org/webt/7z/pz/ua/7zpzuaapp2rhjfsxqbqe2jip5jk.png"><br><br><img src="https://habrastorage.org/webt/ed/yx/7c/edyx7cyftluhepdskpo7thftvlm.png"><br><br> å‡ºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä»¬å¯¹çœŸå®æ•°æ®ä¸æ„Ÿå…´è¶£ï¼Œå­˜åœ¨å¾ˆå¤šè™šå‡çš„ä¾èµ–å…³ç³»ï¼Œä¸æˆ‘ä»¬ä¸å¿…è¦çš„è¿æ¥ï¼Œä¸è‰¯çš„æ ‡è®°ä»¥åŠå…¶ä»–ç¼ºç‚¹ã€‚ <br><br> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œ</a>æˆ‘ä»¬ç ”ç©¶äº†å¸¦æœ‰æ¤­åœ†å’Œå™ªç‚¹çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬å°†ç»§ç»­å¯¹å…¶è¿›è¡Œç ”ç©¶ã€‚ è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æœæ‚¨å‘ç°åœ¨ä»»æ„å›¾ç‰‡é›†ä¸Šè®­ç»ƒçš„ç½‘ç»œçš„ä»»ä½•å¸å¼•äººçš„åŠŸèƒ½ï¼Œåˆ™ä¸æ¸…æ¥šè¿™æ˜¯ç½‘ç»œå±æ€§è¿˜æ˜¯è®­ç»ƒé›†çš„å±æ€§ã€‚ æ¥è‡ªç°å®ä¸–ç•Œçš„åºåˆ—çš„ç»Ÿè®¡å‚æ•°æœªçŸ¥ã€‚ æœ€è¿‘ï¼Œå¤§å¸ˆPleskov Pavel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">paske57</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è°ˆåˆ°</a> ï¼Œå¦‚æœè‡ªå·±äº²è‡ªç ”ç©¶æ•°æ®ï¼ˆä¾‹å¦‚æŸ¥çœ‹ç…§ç‰‡å…ƒæ•°æ®ï¼‰æ˜¯ä¸€ä»¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">å¥½äº‹ï¼Œ</a>æœ‰æ—¶å€™èµ¢å¾—å›¾ç‰‡çš„åˆ†ç±»/åˆ†ç±»å¾ˆå®¹æ˜“ã€‚ å¹¶ä¸”ä¸èƒ½ä¿è¯åœ¨å®é™…æ•°æ®ä¸­ä¸å­˜åœ¨è¿™ç§éè‡ªæ„¿åœ°ä¾èµ–å…³ç³»ã€‚ å› æ­¤ï¼Œä¸ºäº†ç ”ç©¶ç½‘ç»œçš„å±æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¤­åœ†å’ŒçŸ©å½¢æ‹ç…§ï¼Œå¹¶ä½¿ç”¨è®¡ç®—æœºçš„éšæœºæ•°ç”Ÿæˆå™¨ï¼ˆå…¶å…·æœ‰ä¼ªéšæœºç”Ÿæˆå™¨ï¼Œè¯¥ä¼ªéšæœºç”Ÿæˆå™¨å…·æœ‰åŸºäºå…¶ä»–éæ•°å­—ç®—æ³•å’Œç‰©è´¨ç‰©ç†ç‰¹æ€§çš„ç”Ÿæˆå™¨æ¥ç¡®å®šä½ç½®ï¼Œé¢œè‰²å’Œå…¶ä»–å‚æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ä¸åœ¨æœ¬æ–‡ä¸­è®¨è®ºï¼‰ã€‚ <br><br> å› æ­¤ï¼Œä»¥sea <i>np.random.sampleï¼ˆï¼‰* 0.75ä¸ºä¾‹</i> ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ³¢æµªï¼Œé£ï¼Œæµ·å²¸å’Œå…¶ä»–éšè—çš„å›¾æ¡ˆå’Œé¢å­”ã€‚ èˆ¹/æ¤­åœ†ä¹Ÿå°†æ¶‚ä¸Šç›¸åŒçš„é¢œè‰²ï¼Œä»¥åŒºåˆ†æµ·ä¸èˆ¹å’Œå¹²æ‰°ç‰©ï¼Œå‘æµ·æˆ–èˆ¹/å¹²æ‰°ç‰©æ·»åŠ 0.25ï¼Œå®ƒä»¬éƒ½å°†æ˜¯ç›¸åŒçš„å½¢çŠ¶-ä¸åŒå¤§å°å’Œæ–¹å‘çš„æ¤­åœ†ã€‚ å¹²æ‰°ä¹Ÿåªä¼šæ˜¯ä¸æ¤­åœ†ç›¸åŒé¢œè‰²çš„çŸ©å½¢-è¿™å¾ˆé‡è¦ï¼Œä¿¡æ¯å’Œå¹²æ‰°èƒŒæ™¯ä¸‹çš„ç›¸åŒé¢œè‰²çš„å¹²æ‰°ä¹Ÿå¾ˆé‡è¦ã€‚ æˆ‘ä»¬å°†ä»…å¯¹é¢œè‰²è¿›è¡Œå°‘é‡æ›´æ”¹ï¼Œå¹¶ä¸”å°†ä¸ºæ¯å¼ å›¾ç‰‡å’Œæ¯ä¸ªæ¤­åœ†/çŸ©å½¢è¿è¡Œ<i>np.random.sampleï¼ˆï¼‰</i> ï¼Œå³ æ¤­åœ†/çŸ©å½¢çš„èƒŒæ™¯å’Œé¢œè‰²å‡ä¸é‡å¤ã€‚ æ–‡æœ¬ä¸­è¿˜æœ‰ç”¨äºåˆ›å»ºå›¾ç‰‡/è’™ç‰ˆçš„ç¨‹åºä»£ç ä»¥åŠåä¸ªéšæœºé€‰æ‹©çš„å¯¹çš„ç¤ºä¾‹ã€‚ <br><br> ä»¥ä¸€ä¸ªéå¸¸æ™®é€šçš„ç½‘ç»œç‰ˆæœ¬ï¼ˆæ‚¨å¯ä»¥ä½¿ç”¨è‡ªå·±å–œæ¬¢çš„ç½‘ç»œï¼‰ä¸ºä¾‹ï¼Œå°è¯•è¯†åˆ«å¹¶æ˜¾ç¤ºå¤§å‹è®­ç»ƒåºåˆ—çš„å†—ä½™ï¼Œä»è€Œè‡³å°‘è·å¾—æŸç§å®šæ€§å’Œå®šé‡çš„å†—ä½™ç‰¹å¾ã€‚ å³ ä½œè€…è®¤ä¸ºï¼Œè®¸å¤šGBçš„è®­ç»ƒåºåˆ—å®é™…ä¸Šæ˜¯å¤šä½™çš„ï¼Œæœ‰è®¸å¤šä¸å¿…è¦çš„å›¾ç‰‡ï¼Œä¸éœ€è¦åŠ è½½æ•°åä¸ªGPUå¹¶è¿›è¡Œä¸å¿…è¦çš„è®¡ç®—ã€‚ æ•°æ®çš„å†—ä½™ä¸ä»…ä½“ç°åœ¨åŒä¸€éƒ¨åˆ†æ˜¾ç¤ºåœ¨ä¸åŒçš„å›¾ç‰‡ä¸­ï¼Œè€Œä¸”è¿˜ä½“ç°åœ¨è¿™äº›æ•°æ®ä¸­ä¿¡æ¯çš„å†—ä½™ä¸Šï¼Œè€Œä¸æ˜¯é‚£ä¹ˆå¤šã€‚ å³ä½¿æœªæ­£ç¡®é‡å¤ï¼Œæ•°æ®ä¹Ÿå¯èƒ½æ˜¯å†—ä½™çš„ã€‚ è¯·æ³¨æ„ï¼Œè¿™ä¸æ˜¯å¯¹ä¿¡æ¯åŠå…¶å……åˆ†æ€§æˆ–å†—ä½™æ€§çš„ä¸¥æ ¼å®šä¹‰ã€‚ æˆ‘ä»¬åªæƒ³äº†è§£å¯ä»¥å‡å°‘å¤šå°‘è®­ç»ƒï¼Œå¯ä»¥ä»è®­ç»ƒåºåˆ—ä¸­å‰”é™¤å“ªäº›å›¾ç‰‡ä»¥åŠå¤šå°‘å›¾ç‰‡è¶³ä»¥æ¥å—ï¼ˆæˆ‘ä»¬ä¼šåœ¨ç¨‹åºä¸­è‡ªè¡Œè®¾ç½®ç²¾åº¦ï¼‰è®­ç»ƒã€‚ è¿™æ˜¯ä¸€ä¸ªç‰¹å®šçš„ç¨‹åºï¼Œä¸€ä¸ªç‰¹å®šçš„æ•°æ®é›†ï¼Œä½œä¸ºéšœç¢ï¼Œåœ¨å¸¦æœ‰ä¸‰è§’å½¢çš„æ¤­åœ†ä¸Šï¼Œæœ‰å¯èƒ½æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œåœ¨å¸¦æœ‰çŸ©å½¢çš„æ¤­åœ†ä¸Šï¼ˆæˆ‘çš„å‡è®¾æ˜¯ï¼Œä¸€åˆ‡éƒ½å°†ç›¸åŒå¹¶ä¸”ç›¸åŒã€‚ä½†æ˜¯æˆ‘ä»¬ç°åœ¨ä¸å¯¹å…¶è¿›è¡Œæ£€æŸ¥ï¼‰ ï¼Œæˆ‘ä»¬ä¸è¿›è¡Œåˆ†æï¼Œä¹Ÿä¸è¯æ˜å®šç†ï¼‰ã€‚ <br><br> å› æ­¤ï¼Œé‰´äºï¼š <br><br><ul><li> å›¾ç‰‡/é®ç½©å¯¹çš„å­¦ä¹ é¡ºåºã€‚ æˆ‘ä»¬å¯ä»¥ç”Ÿæˆä»»æ„æ•°é‡çš„å›¾ç‰‡/è’™ç‰ˆå¯¹ã€‚ æˆ‘å°†ç«‹å³å›ç­”é—®é¢˜-ä¸ºä»€ä¹ˆé¢œè‰²å’ŒèƒŒæ™¯æ˜¯éšæœºçš„ï¼Ÿ æˆ‘å°†ç®€å•ï¼Œç®€è¦ï¼Œæ¸…æ¥šè€Œå…¨é¢åœ°å›ç­”æˆ‘éå¸¸å–œæ¬¢å®ƒï¼Œä¸éœ€è¦è¾¹ç•Œå½¢å¼çš„é¢å¤–å®ä½“ï¼› </li><li> è¯¥ç½‘ç»œæ˜¯æ™®é€šçš„ï¼Œæ™®é€šçš„Uå‹ç½‘ç»œï¼Œç»è¿‡ç¨åŠ ä¿®æ”¹å¹¶å¹¿æ³›ç”¨äºç»†åˆ†ã€‚ </li></ul><br> æµ‹è¯•æ€è·¯ï¼š <br><br><ul><li> ä¸å®é™…ä»»åŠ¡ä¸€æ ·ï¼Œåœ¨æ„é€ çš„åºåˆ—ä¸­ä½¿ç”¨çš„æ˜¯åƒå…†å­—èŠ‚çš„æ•°æ®ã€‚ ä½œè€…è®¤ä¸ºè®­ç»ƒåºåˆ—çš„å¤§å°ä¸æ˜¯é‚£ä¹ˆå…³é”®ï¼Œåº”è¯¥æ²¡æœ‰å¾ˆå¤šæ•°æ®ï¼Œä½†æ˜¯å®ƒä»¬åº”è¯¥åŒ…å«â€œå¾ˆå¤šâ€ä¿¡æ¯ã€‚ è¿™æ ·çš„æ•°é‡ï¼Œä¸€ä¸‡å¯¹å›¾ç‰‡/æ©æ¨¡ï¼Œæ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œç½‘ç»œå°†ä»æ›´å°‘çš„æ•°æ®ä¸­å­¦ä¹ ã€‚ </li></ul><br> è®©æˆ‘ä»¬å¼€å§‹ï¼Œé€‰æ‹©10,000å¯¹ï¼Œå¹¶ä»”ç»†è€ƒè™‘å®ƒä»¬ã€‚ æˆ‘ä»¬å°†ä»è¯¥è®­ç»ƒåºåˆ—ä¸­æŒ¤å‡ºæ‰€æœ‰æ°´ï¼Œæ‰€æœ‰ä¸å¿…è¦çš„ç¢å±‘ï¼Œå¹¶å°†æ‰€æœ‰å¹²ç‡¥æ®‹ç•™ç‰©ä½¿ç”¨å¹¶ä»˜è¯¸å®è·µã€‚ <br><br> ç°åœ¨ï¼Œæ‚¨å¯ä»¥æ£€æŸ¥è‡ªå·±çš„ç›´è§‰ï¼Œå¹¶å‡è®¾åœ¨10,000å¯¹ä¸­æœ‰å¤šå°‘å¯¹è¶³ä»¥è®­ç»ƒå’Œé¢„æµ‹å¦ä¸€å¯¹ï¼Œè€Œä¸”è¿˜åˆ›å»ºäº†10,000å¯¹å¯¹çš„åºåˆ—ï¼Œå…¶å‡†ç¡®æ€§è¶…è¿‡0.98ã€‚ æ¯”è¾ƒåå†™åœ¨çº¸ä¸Šã€‚ <br><br> ä¸ºäº†å®é™…ä½¿ç”¨ï¼Œè¯·è€ƒè™‘åˆ°äººä¸ºé€‰æ‹©çš„æµ·æ´‹å’Œèˆ¹åªï¼Œè¿™æ˜¯<i>np.random.sampleï¼ˆï¼‰</i> ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">æˆ‘ä»¬åŠ è½½åº“ï¼Œç¡®å®šå›¾ç‰‡æ•°ç»„çš„å¤§å°</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt %matplotlib inline <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> math <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> tqdm <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tqdm <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> skimage.draw <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ellipse, polygon <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Model <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.optimizers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Adam <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.layers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Input,Conv2D,Conv2DTranspose,MaxPooling2D,concatenate <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.layers <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> BatchNormalization,Activation,Add,Dropout <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras.losses <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> binary_crossentropy <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> keras <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> backend <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> K <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tensorflow <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tf <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> keras <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> keras w_size = <span class="hljs-number"><span class="hljs-number">128</span></span> train_num = <span class="hljs-number"><span class="hljs-number">10000</span></span> radius_min = <span class="hljs-number"><span class="hljs-number">10</span></span> radius_max = <span class="hljs-number"><span class="hljs-number">20</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">ç¡®å®šæŸå¤±å’Œå‡†ç¡®æ€§å‡½æ•°</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dice_coef</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y_true, y_pred)</span></span></span><span class="hljs-function">:</span></span> y_true_f = K.flatten(y_true) y_pred = K.cast(y_pred, <span class="hljs-string"><span class="hljs-string">'float32'</span></span>) y_pred_f = K.cast(K.greater(K.flatten(y_pred), <span class="hljs-number"><span class="hljs-number">0.5</span></span>), <span class="hljs-string"><span class="hljs-string">'float32'</span></span>) intersection = y_true_f * y_pred_f score = <span class="hljs-number"><span class="hljs-number">2.</span></span> * K.sum(intersection) / (K.sum(y_true_f) + K.sum(y_pred_f)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> score <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dice_loss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y_true, y_pred)</span></span></span><span class="hljs-function">:</span></span> smooth = <span class="hljs-number"><span class="hljs-number">1.</span></span> y_true_f = K.flatten(y_true) y_pred_f = K.flatten(y_pred) intersection = y_true_f * y_pred_f score = (<span class="hljs-number"><span class="hljs-number">2.</span></span> * K.sum(intersection) + smooth) / (K.sum(y_true_f) + K.sum(y_pred_f) + smooth) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1.</span></span> - score <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bce_dice_loss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(y_true, y_pred)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> binary_crossentropy(y_true, y_pred) + dice_loss(y_true, y_pred) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_iou_vector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(A, B)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Numpy version batch_size = A.shape[0] metric = 0.0 for batch in range(batch_size): t, p = A[batch], B[batch] true = np.sum(t) pred = np.sum(p) # deal with empty mask first if true == 0: metric += (pred == 0) continue # non empty mask case. Union is never empty # hence it is safe to divide by its number of pixels intersection = np.sum(t * p) union = true + pred - intersection iou = intersection / union # iou metrric is a stepwise approximation of the real iou over 0.5 iou = np.floor(max(0, (iou - 0.45)*20)) / 10 metric += iou # teake the average over all images in batch metric /= batch_size return metric def my_iou_metric(label, pred): # Tensorflow version return tf.py_func(get_iou_vector, [label, pred &gt; 0.5], tf.float64) from keras.utils.generic_utils import get_custom_objects get_custom_objects().update({'bce_dice_loss': bce_dice_loss }) get_custom_objects().update({'dice_loss': dice_loss }) get_custom_objects().update({'dice_coef': dice_coef }) get_custom_objects().update({'my_iou_metric': my_iou_metric })</span></span></code> </pre><br></div></div><br> æˆ‘ä»¬å°†ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­</a>çš„æŒ‡æ ‡ã€‚ è®©æˆ‘æé†’è¯»è€…ï¼Œæˆ‘ä»¬å°†é¢„æµ‹åƒç´ çš„é®ç½©-è¿™æ˜¯â€œæµ·â€æˆ–â€œèˆ¹â€ï¼Œå¹¶è¯„ä¼°é¢„æµ‹çš„çœŸå®æ€§æˆ–è™šå‡æ€§ã€‚ å³ ä»¥ä¸‹å››ä¸ªé€‰é¡¹æ˜¯å¯èƒ½çš„-æˆ‘ä»¬æ­£ç¡®åœ°é¢„æµ‹åƒç´ æ˜¯â€œæµ·â€ï¼Œæ­£ç¡®åœ°é¢„æµ‹åƒç´ æ˜¯â€œèˆ¹â€ï¼Œæˆ–è€…åœ¨é¢„æµ‹â€œæµ·â€æˆ–â€œèˆ¹â€æ—¶å‡ºé”™ã€‚ å› æ­¤ï¼Œå¯¹äºæ‰€æœ‰å›¾ç‰‡å’Œæ‰€æœ‰åƒç´ ï¼Œæˆ‘ä»¬ä¼°è®¡æ‰€æœ‰å››ä¸ªé€‰é¡¹çš„æ•°é‡å¹¶è®¡ç®—ç»“æœ-è¿™å°†æ˜¯ç½‘ç»œçš„ç»“æœã€‚ é”™è¯¯çš„é¢„æµ‹è¶Šå°‘è¶Šå‡†ç¡®ï¼Œç»“æœè¶Šå‡†ç¡®ï¼Œç½‘ç»œè¶Šå¥½ã€‚ <br><br> ä¸ºäº†è¿›è¡Œç ”ç©¶ï¼Œè®©æˆ‘ä»¬é€‰æ‹©ç»è¿‡ç²¾å¿ƒç ”ç©¶çš„U-netï¼Œå®ƒæ˜¯ç”¨äºå›¾åƒåˆ†å‰²çš„å‡ºè‰²ç½‘ç»œã€‚ é€‰æ‹©äº†ä¸å¤ªç»å…¸çš„U-netç‰ˆæœ¬ï¼Œä½†æƒ³æ³•æ˜¯ç›¸åŒçš„ï¼Œç½‘ç»œå¯¹å›¾ç‰‡æ‰§è¡Œäº†éå¸¸ç®€å•çš„æ“ä½œ-å®ƒé€šè¿‡é€æ­¥è¿›è¡Œå˜æ¢æ¥å‡å°å›¾ç‰‡çš„å¤§å°ï¼Œç„¶åå°è¯•ä»å‹ç¼©å›¾åƒä¸­æ¢å¤æ©ç ã€‚ å³ åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œå›¾ç‰‡çš„å°ºå¯¸è¢«è®¾ä¸º16x16ï¼Œç„¶åæˆ‘ä»¬å°è¯•ä½¿ç”¨ä¹‹å‰æ‰€æœ‰å‹ç¼©å±‚ä¸­çš„æ•°æ®æ¥è¿˜åŸè’™ç‰ˆã€‚ <br><br> æˆ‘ä»¬å°†ç½‘ç»œè§†ä¸ºâ€œé»‘åŒ£å­â€ï¼Œè€Œä¸ä¼šç ”ç©¶ç½‘ç»œå†…éƒ¨å‘ç”Ÿçš„æƒ…å†µï¼Œæƒé‡å¦‚ä½•å˜åŒ–ä»¥åŠå¦‚ä½•é€‰æ‹©æ¸å˜-è¿™æ˜¯å¦ä¸€é¡¹ç ”ç©¶çš„ä¸»é¢˜ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">å¸¦å—çš„Uç½‘</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">convolution_block</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x, filters, size, strides=</span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">,</span></span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, padding=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'same'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, activation=True)</span></span></span><span class="hljs-function">:</span></span> x = Conv2D(filters, size, strides=strides, padding=padding)(x) x = BatchNormalization()(x) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> activation == <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: x = Activation(<span class="hljs-string"><span class="hljs-string">'relu'</span></span>)(x) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">residual_block</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(blockInput, num_filters=</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">16</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> x = Activation(<span class="hljs-string"><span class="hljs-string">'relu'</span></span>)(blockInput) x = BatchNormalization()(x) x = convolution_block(x, num_filters, (<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) ) x = convolution_block(x, num_filters, (<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>), activation=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) x = Add()([x, blockInput]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x <span class="hljs-comment"><span class="hljs-comment"># Build model def build_model(input_layer, start_neurons, DropoutRatio = 0.5): conv1 = Conv2D(start_neurons * 1, (3, 3), activation=None, padding="same" )(input_layer) conv1 = residual_block(conv1,start_neurons * 1) conv1 = residual_block(conv1,start_neurons * 1) conv1 = Activation('relu')(conv1) pool1 = MaxPooling2D((2, 2))(conv1) pool1 = Dropout(DropoutRatio/2)(pool1) conv2 = Conv2D(start_neurons * 2, (3, 3), activation=None, padding="same" )(pool1) conv2 = residual_block(conv2,start_neurons * 2) conv2 = residual_block(conv2,start_neurons * 2) conv2 = Activation('relu')(conv2) pool2 = MaxPooling2D((2, 2))(conv2) pool2 = Dropout(DropoutRatio)(pool2) conv3 = Conv2D(start_neurons * 4, (3, 3), activation=None, padding="same")(pool2) conv3 = residual_block(conv3,start_neurons * 4) conv3 = residual_block(conv3,start_neurons * 4) conv3 = Activation('relu')(conv3) pool3 = MaxPooling2D((2, 2))(conv3) pool3 = Dropout(DropoutRatio)(pool3) conv4 = Conv2D(start_neurons * 8, (3, 3), activation=None, padding="same")(pool3) conv4 = residual_block(conv4,start_neurons * 8) conv4 = residual_block(conv4,start_neurons * 8) conv4 = Activation('relu')(conv4) pool4 = MaxPooling2D((2, 2))(conv4) pool4 = Dropout(DropoutRatio)(pool4) # Middle convm = Conv2D(start_neurons * 16, (3, 3), activation=None, padding="same")(pool4) convm = residual_block(convm,start_neurons * 16) convm = residual_block(convm,start_neurons * 16) convm = Activation('relu')(convm) deconv4 = Conv2DTranspose(start_neurons * 8, (3, 3), strides=(2, 2), padding="same")(convm) uconv4 = concatenate([deconv4, conv4]) uconv4 = Dropout(DropoutRatio)(uconv4) uconv4 = Conv2D(start_neurons * 8, (3, 3), activation=None, padding="same")(uconv4) uconv4 = residual_block(uconv4,start_neurons * 8) uconv4 = residual_block(uconv4,start_neurons * 8) uconv4 = Activation('relu')(uconv4) deconv3 = Conv2DTranspose(start_neurons * 4, (3, 3), strides=(2, 2), padding="same")(uconv4) uconv3 = concatenate([deconv3, conv3]) uconv3 = Dropout(DropoutRatio)(uconv3) uconv3 = Conv2D(start_neurons * 4, (3, 3), activation=None, padding="same")(uconv3) uconv3 = residual_block(uconv3,start_neurons * 4) uconv3 = residual_block(uconv3,start_neurons * 4) uconv3 = Activation('relu')(uconv3) deconv2 = Conv2DTranspose(start_neurons * 2, (3, 3), strides=(2, 2), padding="same")(uconv3) uconv2 = concatenate([deconv2, conv2]) uconv2 = Dropout(DropoutRatio)(uconv2) uconv2 = Conv2D(start_neurons * 2, (3, 3), activation=None, padding="same")(uconv2) uconv2 = residual_block(uconv2,start_neurons * 2) uconv2 = residual_block(uconv2,start_neurons * 2) uconv2 = Activation('relu')(uconv2) deconv1 = Conv2DTranspose(start_neurons * 1, (3, 3), strides=(2, 2), padding="same")(uconv2) uconv1 = concatenate([deconv1, conv1]) uconv1 = Dropout(DropoutRatio)(uconv1) uconv1 = Conv2D(start_neurons * 1, (3, 3), activation=None, padding="same")(uconv1) uconv1 = residual_block(uconv1,start_neurons * 1) uconv1 = residual_block(uconv1,start_neurons * 1) uconv1 = Activation('relu')(uconv1) uconv1 = Dropout(DropoutRatio/2)(uconv1) output_layer = Conv2D(1, (1,1), padding="same", activation="sigmoid")(uconv1) return output_layer # model input_layer = Input((w_size, w_size, 3)) output_layer = build_model(input_layer, 16) model = Model(input_layer, output_layer) model.compile(loss=bce_dice_loss, optimizer="adam", metrics=[my_iou_metric]) model.summary()</span></span></code> </pre> <br></div></div><br> ç”Ÿæˆå›¾ç‰‡/é®ç½©å¯¹çš„åŠŸèƒ½ã€‚ åœ¨å¡«å……æœ‰éšæœºå™ªå£°çš„128x128å½©è‰²å›¾ç‰‡ä¸Šï¼Œè¯¥å™ªå£°æ˜¯ä»0.0 ... 0.75æˆ–0.25..1.0ä¸¤ä¸ªèŒƒå›´ä¸­éšæœºé€‰æ‹©çš„ã€‚ åœ¨å›¾ç‰‡ä¸­éšæœºæ”¾ç½®ä¸€ä¸ªéšæœºå–å‘çš„æ¤­åœ†ï¼Œå¹¶åœ¨åŒä¸€ä½ç½®æ”¾ç½®ä¸€ä¸ªçŸ©å½¢ã€‚ æˆ‘ä»¬æ£€æŸ¥å®ƒä»¬æ˜¯å¦ç›¸äº¤ï¼Œå¹¶åœ¨å¿…è¦æ—¶å°†çŸ©å½¢ç§»åˆ°ä¾§é¢ã€‚ æ¯æ¬¡æˆ‘ä»¬é‡æ–°è®¡ç®—æµ·/èˆ¹çš„ç€è‰²å€¼ã€‚ ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†å¸¦æœ‰å›¾ç‰‡çš„é®ç½©æ”¾åœ¨ä¸€ä¸ªé˜µåˆ—ä¸­ï¼Œä½œä¸ºç¬¬å››ç§é¢œè‰²ï¼Œå³ çº¢è‰²ï¼Œç»¿è‰²ï¼Œè“è‰²ï¼Œé¢å…·ï¼Œæ›´å®¹æ˜“ã€‚ <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next_pair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> img_l = (np.random.sample((w_size, w_size, <span class="hljs-number"><span class="hljs-number">3</span></span>))* <span class="hljs-number"><span class="hljs-number">0.75</span></span>).astype(<span class="hljs-string"><span class="hljs-string">'float32'</span></span>) img_h = (np.random.sample((w_size, w_size, <span class="hljs-number"><span class="hljs-number">3</span></span>))* <span class="hljs-number"><span class="hljs-number">0.75</span></span> + <span class="hljs-number"><span class="hljs-number">0.25</span></span>).astype(<span class="hljs-string"><span class="hljs-string">'float32'</span></span>) img = np.zeros((w_size, w_size, <span class="hljs-number"><span class="hljs-number">4</span></span>), dtype=<span class="hljs-string"><span class="hljs-string">'float'</span></span>) p = np.random.sample() - <span class="hljs-number"><span class="hljs-number">0.5</span></span> r = np.random.sample()*(w_size<span class="hljs-number"><span class="hljs-number">-2</span></span>*radius_max) + radius_max c = np.random.sample()*(w_size<span class="hljs-number"><span class="hljs-number">-2</span></span>*radius_max) + radius_max r_radius = np.random.sample()*(radius_max-radius_min) + radius_min c_radius = np.random.sample()*(radius_max-radius_min) + radius_min rot = np.random.sample()*<span class="hljs-number"><span class="hljs-number">360</span></span> rr, cc = ellipse( r, c, r_radius, c_radius, rotation=np.deg2rad(rot), shape=img_l.shape ) p1 = np.rint(np.random.sample()* (w_size<span class="hljs-number"><span class="hljs-number">-2</span></span>*radius_max) + radius_max) p2 = np.rint(np.random.sample()* (w_size<span class="hljs-number"><span class="hljs-number">-2</span></span>*radius_max) + radius_max) p3 = np.rint(np.random.sample()* (<span class="hljs-number"><span class="hljs-number">2</span></span>*radius_max - radius_min) + radius_min) p4 = np.rint(np.random.sample()* (<span class="hljs-number"><span class="hljs-number">2</span></span>*radius_max - radius_min) + radius_min) poly = np.array(( (p1, p2), (p1, p2+p4), (p1+p3, p2+p4), (p1+p3, p2), (p1, p2), )) rr_p, cc_p = polygon(poly[:, <span class="hljs-number"><span class="hljs-number">0</span></span>], poly[:, <span class="hljs-number"><span class="hljs-number">1</span></span>], img_l.shape) in_sc_rr = list(set(rr) &amp; set(rr_p)) in_sc_cc = list(set(cc) &amp; set(cc_p)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(in_sc_rr) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> len(in_sc_cc) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(in_sc_rr) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>: _delta_rr = np.max(in_sc_rr) - np.min(in_sc_rr) + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> np.mean(rr_p) &gt; np.mean(in_sc_rr): poly[:,<span class="hljs-number"><span class="hljs-number">0</span></span>] += _delta_rr <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: poly[:,<span class="hljs-number"><span class="hljs-number">0</span></span>] -= _delta_rr <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(in_sc_cc) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>: _delta_cc = np.max(in_sc_cc) - np.min(in_sc_cc) + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> np.mean(cc_p) &gt; np.mean(in_sc_cc): poly[:,<span class="hljs-number"><span class="hljs-number">1</span></span>] += _delta_cc <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: poly[:,<span class="hljs-number"><span class="hljs-number">1</span></span>] -= _delta_cc rr_p, cc_p = polygon(poly[:, <span class="hljs-number"><span class="hljs-number">0</span></span>], poly[:, <span class="hljs-number"><span class="hljs-number">1</span></span>], img_l.shape) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> p &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>: img[:,:,:<span class="hljs-number"><span class="hljs-number">3</span></span>] = img_l.copy() img[rr, cc,:<span class="hljs-number"><span class="hljs-number">3</span></span>] = img_h[rr, cc] img[rr_p, cc_p,:<span class="hljs-number"><span class="hljs-number">3</span></span>] = img_h[rr_p, cc_p] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: img[:,:,:<span class="hljs-number"><span class="hljs-number">3</span></span>] = img_h.copy() img[rr, cc,:<span class="hljs-number"><span class="hljs-number">3</span></span>] = img_l[rr, cc] img[rr_p, cc_p,:<span class="hljs-number"><span class="hljs-number">3</span></span>] = img_l[rr_p, cc_p] img[:,:,<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-number"><span class="hljs-number">0.</span></span> img[rr, cc,<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-number"><span class="hljs-number">1.</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> img</code> </pre><br> è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè®­ç»ƒå¯¹çš„åºåˆ—ï¼Œè¯·å‚é˜…éšæœº10 <br><br><pre> <code class="python hljs">_txy = [next_pair() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> idx <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(train_num)] f_imgs = np.array(_txy)[:,:,:,:<span class="hljs-number"><span class="hljs-number">3</span></span>].reshape(<span class="hljs-number"><span class="hljs-number">-1</span></span>,w_size ,w_size ,<span class="hljs-number"><span class="hljs-number">3</span></span>) f_msks = np.array(_txy)[:,:,:,<span class="hljs-number"><span class="hljs-number">3</span></span>:].reshape(<span class="hljs-number"><span class="hljs-number">-1</span></span>,w_size ,w_size ,<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">del</span></span>(_txy) <span class="hljs-comment"><span class="hljs-comment">#    10   fig, axes = plt.subplots(2, 10, figsize=(20, 5)) for k in range(10): kk = np.random.randint(train_num) axes[0,k].set_axis_off() axes[0,k].imshow(f_imgs[kk]) axes[1,k].set_axis_off() axes[1,k].imshow(f_msks[kk].squeeze())</span></span></code> </pre><br><img src="https://habrastorage.org/webt/42/7w/x6/427wx65rkih5858776eoahbgbhw.png"><br><br><h3> ç¬¬ä¸€æ­¥ã€‚ è®©æˆ‘ä»¬å°è¯•ä»¥æœ€å°‘çš„è®­ç»ƒ </h3><br> å®éªŒçš„ç¬¬ä¸€æ­¥å¾ˆç®€å•ï¼Œæˆ‘ä»¬æ­£åœ¨å°è¯•è®­ç»ƒç½‘ç»œä»¥ä»…é¢„æµ‹11å¼ ç¬¬ä¸€å¼ å›¾ç‰‡ã€‚ <br><br><pre> <code class="python hljs">batch_size = <span class="hljs-number"><span class="hljs-number">10</span></span> val_len = <span class="hljs-number"><span class="hljs-number">11</span></span> precision = <span class="hljs-number"><span class="hljs-number">0.85</span></span> m0_select = np.zeros((f_imgs.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>]), dtype=<span class="hljs-string"><span class="hljs-string">'int'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(val_len): m0_select[k] = <span class="hljs-number"><span class="hljs-number">1</span></span> t = tqdm() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: fit = model.fit(f_imgs[m0_select&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>], f_msks[m0_select&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>], batch_size=batch_size, epochs=<span class="hljs-number"><span class="hljs-number">1</span></span>, verbose=<span class="hljs-number"><span class="hljs-number">0</span></span> ) current_accu = fit.history[<span class="hljs-string"><span class="hljs-string">'my_iou_metric'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] current_loss = fit.history[<span class="hljs-string"><span class="hljs-string">'loss'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] t.set_description(<span class="hljs-string"><span class="hljs-string">"accuracy {0:6.4f} loss {1:6.4f} "</span></span>.\ format(current_accu, current_loss)) t.update(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> current_accu &gt; precision: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> t.close()</code> </pre> <br> <code>accuracy 0.8636 loss 0.0666 : : 47it [00:29, 5.82it/s]</code> <br> <br> æˆ‘ä»¬ä»åˆå§‹åºåˆ—ä¸­é€‰æ‹©äº†å‰11ä¸ªï¼Œå¹¶åœ¨å®ƒä»¬ä¸Šé¢è®­ç»ƒäº†ç½‘ç»œã€‚ ç°åœ¨ï¼Œç½‘ç»œæ˜¯ä¸“é—¨å­˜å‚¨è¿™äº›å›¾ç‰‡è¿˜æ˜¯è¿›è¡Œæ±‡æ€»éƒ½æ— æ‰€è°“ï¼Œä¸»è¦æ˜¯å®ƒå¯ä»¥æŒ‰ç…§æˆ‘ä»¬éœ€è¦çš„æ–¹å¼è¯†åˆ«è¿™11å¼ å›¾ç‰‡ã€‚ æ ¹æ®æ‰€é€‰çš„æ•°æ®é›†å’Œå‡†ç¡®æ€§ï¼Œç½‘ç»œè®­ç»ƒå¯ä»¥æŒç»­å¾ˆé•¿æ—¶é—´ã€‚ ä½†æ˜¯æˆ‘ä»¬åªæœ‰å‡ æ¬¡è¿­ä»£ã€‚ æˆ‘å†è¯´ä¸€éï¼Œå¯¹äºæˆ‘ä»¬ç°åœ¨æ¥è¯´ç½‘ç»œå­¦ä¹ æˆ–å­¦ä¹ çš„æ–¹å¼å’ŒçŸ¥è¯†å¹¶ä¸é‡è¦ï¼Œä¸»è¦æ˜¯å®ƒå·²è¾¾åˆ°æ—¢å®šçš„é¢„æµ‹å‡†ç¡®æ€§ã€‚ <br><br><h3> ç°åœ¨å¼€å§‹ä¸»è¦å®éªŒ </h3><br> æˆ‘ä»¬å°†ä»æ„å»ºçš„åºåˆ—ä¸­è·å–æ–°çš„å›¾ç‰‡/é®ç½©å¯¹ï¼Œå¹¶å°è¯•ç”±å—è¿‡è®­ç»ƒçš„ç½‘ç»œåœ¨å·²é€‰æ‹©çš„åºåˆ—ä¸Šè¿›è¡Œé¢„æµ‹ã€‚ åˆšå¼€å§‹æ—¶ï¼Œåªæœ‰11å¯¹å›¾åƒ/é®ç½©å’Œç½‘ç»œè®­ç»ƒï¼Œä¹Ÿè®¸ä¸æ˜¯å¾ˆæ­£ç¡®ã€‚ å¦‚æœåœ¨æ–°å¯¹ä¸­ä»¥å¯æ¥å—çš„ç²¾åº¦é¢„æµ‹å›¾ç‰‡ä¸­çš„æ©ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä¸¢å¼ƒè¯¥å¯¹ï¼Œå®ƒæ²¡æœ‰ç½‘ç»œçš„æ–°ä¿¡æ¯ï¼Œå®ƒå·²ç»çŸ¥é“å¹¶å¯ä»¥ä»è¯¥å›¾ç‰‡ä¸­è®¡ç®—å‡ºæ©ç ã€‚ å¦‚æœé¢„æµ‹çš„å‡†ç¡®æ€§ä¸è¶³ï¼Œåˆ™æˆ‘ä»¬å°†æ­¤å›¾åƒåŠ é®ç½©æ·»åŠ åˆ°åºåˆ—ä¸­ï¼Œå¹¶å¼€å§‹è®­ç»ƒç½‘ç»œï¼Œç›´åˆ°åœ¨æ‰€é€‰åºåˆ—ä¸Šè·å¾—å¯æ¥å—çš„å‡†ç¡®æ€§ç»“æœä¸ºæ­¢ã€‚ å³ è¯¥å›¾ç‰‡åŒ…å«æ–°ä¿¡æ¯ï¼Œæˆ‘ä»¬å°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬çš„è®­ç»ƒåºåˆ—ä¸­ï¼Œå¹¶é€šè¿‡è®­ç»ƒæå–å…¶ä¸­åŒ…å«çš„ä¿¡æ¯ã€‚ <br><br><pre> <code class="python hljs">batch_size = <span class="hljs-number"><span class="hljs-number">50</span></span> t_batch_size = <span class="hljs-number"><span class="hljs-number">1024</span></span> raw_len = val_len t = tqdm(<span class="hljs-number"><span class="hljs-number">-1</span></span>) id_train = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-comment"><span class="hljs-comment">#id_select = 1 while True: t.set_description("Accuracy {0:6.4f} loss {1:6.4f}\ selected img {2:5d} tested img {3:5d} ". format(current_accu, current_loss, val_len, raw_len)) t.update(1) if id_train == 1: fit = model.fit(f_imgs[m0_select&gt;0], f_msks[m0_select&gt;0], batch_size=batch_size, epochs=1, verbose=0 ) current_accu = fit.history['my_iou_metric'][0] current_loss = fit.history['loss'][0] if current_accu &gt; precision: id_train = 0 else: t_pred = model.predict( f_imgs[raw_len: min(raw_len+t_batch_size,f_imgs.shape[0])], batch_size=batch_size ) for kk in range(t_pred.shape[0]): val_iou = get_iou_vector( f_msks[raw_len+kk].reshape(1,w_size,w_size,1), t_pred[kk].reshape(1,w_size,w_size,1) &gt; 0.5) if val_iou &lt; precision*0.95: new_img_test = 1 m0_select[raw_len+kk] = 1 val_len += 1 break raw_len += (kk+1) id_train = 1 if raw_len &gt;= train_num: break t.close()</span></span></code> </pre><br><pre> <code class="bash hljs">Accuracy 0.9830 loss 0.0287 selected img 271 tested img 9949 : : 1563it [14:16, 1.01it/s]</code> </pre> <br> åœ¨æ­¤ï¼Œç²¾åº¦æ˜¯æŒ‡â€œç²¾åº¦â€ï¼Œè€Œä¸æ˜¯æ ‡å‡†çš„kerasåº¦é‡ï¼Œå­ä¾‹ç¨‹â€œ my_iou_metricâ€ç”¨äºè®¡ç®—ç²¾åº¦ã€‚ è§‚å¯Ÿè¢«è°ƒæŸ¥å’Œæ·»åŠ çš„å›¾ç‰‡çš„å‡†ç¡®æ€§å’Œæ•°é‡éå¸¸æœ‰è¶£ã€‚ æœ€åˆï¼Œå‡ ä¹æ‰€æœ‰å›¾ç‰‡/é®ç½©å¯¹éƒ½æ˜¯ç”±ç½‘ç»œæ·»åŠ çš„ï¼Œå¤§çº¦70å¤„å¼€å§‹ä¸¢å¼ƒã€‚ æ¥è¿‘8000æŠ•æ·å‡ ä¹æ‰€æœ‰çš„å¯¹ã€‚ <br><br> æ£€æŸ¥ç½‘ç»œé€‰æ‹©çš„è§†è§‰éšæœºå¯¹ï¼š <br><br><pre> <code class="python hljs">fig, axes = plt.subplots(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>)) t_imgs = f_imgs[m0_select&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>] t_msks = f_msks[m0_select&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">10</span></span>): kk = np.random.randint(t_msks.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>]) axes[<span class="hljs-number"><span class="hljs-number">0</span></span>,k].set_axis_off() axes[<span class="hljs-number"><span class="hljs-number">0</span></span>,k].imshow(t_imgs[kk]) axes[<span class="hljs-number"><span class="hljs-number">1</span></span>,k].set_axis_off() axes[<span class="hljs-number"><span class="hljs-number">1</span></span>,k].imshow(t_msks[kk].squeeze())</code> </pre><br> æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„æˆ–è¶…è‡ªç„¶çš„ï¼š <br><br><img src="https://habrastorage.org/webt/dq/rr/7r/dqrr7rze9sbmmoepvvjuma-tjxu.png"><br><br> è¿™äº›æ˜¯ç½‘ç»œåœ¨è®­ç»ƒçš„ä¸åŒé˜¶æ®µé€‰æ‹©çš„å¯¹ã€‚ å½“ç½‘ç»œä»è¯¥åºåˆ—ä¸­æ¥æ”¶åˆ°è¾“å…¥å¯¹æ—¶ï¼Œå®ƒæ— æ³•ä»¥æŒ‡å®šçš„ç²¾åº¦è®¡ç®—æ©ç ï¼Œå¹¶ä¸”è¯¥å¯¹å·²åŒ…å«åœ¨è®­ç»ƒåºåˆ—ä¸­ã€‚ ä½†æ˜¯æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„æ™®é€šå›¾ç‰‡ã€‚ <br><br><h3> éªŒè¯ç»“æœå’Œå‡†ç¡®æ€§ </h3><br> è®©æˆ‘ä»¬æ£€æŸ¥ç½‘ç»œè®­ç»ƒç¨‹åºçš„è´¨é‡ï¼Œç¡®ä¿è´¨é‡ä¸æ˜æ˜¾å–å†³äºåˆå§‹åºåˆ—çš„é¡ºåºï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†å›¾åƒ/é®ç½©å¯¹çš„åˆå§‹åºåˆ—æ··åˆåœ¨ä¸€èµ·ï¼Œä»¥ç›¸åŒçš„æ–¹å¼ä¼˜å…ˆé€‰æ‹©å…¶ä»–11å¯¹ï¼Œè®­ç»ƒç½‘ç»œå¹¶åˆ‡æ–­å¤šä½™çš„éƒ¨åˆ†ã€‚ <br><br><pre> <code class="python hljs">sh = np.arange(train_num) np.random.shuffle(sh) f0_imgs = f_imgs[sh] f0_msks = f_msks[sh] model.compile(loss=bce_dice_loss, optimizer=<span class="hljs-string"><span class="hljs-string">"adam"</span></span>, metrics=[my_iou_metric]) model.summary()</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">é”»ç‚¼ä»£ç </b> <div class="spoiler_text"><pre> <code class="python hljs">batch_size = <span class="hljs-number"><span class="hljs-number">10</span></span> val_len = <span class="hljs-number"><span class="hljs-number">11</span></span> precision = <span class="hljs-number"><span class="hljs-number">0.85</span></span> m0_select = np.zeros((f_imgs.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>]), dtype=<span class="hljs-string"><span class="hljs-string">'int'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(val_len): m0_select[k] = <span class="hljs-number"><span class="hljs-number">1</span></span> t = tqdm() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: fit = model.fit(f0_imgs[m0_select&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>], f0_msks[m0_select&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>], batch_size=batch_size, epochs=<span class="hljs-number"><span class="hljs-number">1</span></span>, verbose=<span class="hljs-number"><span class="hljs-number">0</span></span> ) current_accu = fit.history[<span class="hljs-string"><span class="hljs-string">'my_iou_metric'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] current_loss = fit.history[<span class="hljs-string"><span class="hljs-string">'loss'</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>] t.set_description(<span class="hljs-string"><span class="hljs-string">"accuracy {0:6.4f} loss {1:6.4f} "</span></span>.\ format(current_accu, current_loss)) t.update(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> current_accu &gt; precision: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> t.close()</code> </pre> <br><pre> <code class="bash hljs">accuracy 0.8636 loss 0.0710 : : 249it [01:03, 5.90it/s]</code> </pre> <br><pre> <code class="python hljs">batch_size = <span class="hljs-number"><span class="hljs-number">50</span></span> t_batch_size = <span class="hljs-number"><span class="hljs-number">1024</span></span> raw_len = val_len t = tqdm(<span class="hljs-number"><span class="hljs-number">-1</span></span>) id_train = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-comment"><span class="hljs-comment">#id_select = 1 while True: t.set_description("Accuracy {0:6.4f} loss {1:6.4f}\ selected img {2:5d} tested img {3:5d} ". format(current_accu, current_loss, val_len, raw_len)) t.update(1) if id_train == 1: fit = model.fit(f0_imgs[m0_select&gt;0], f0_msks[m0_select&gt;0], batch_size=batch_size, epochs=1, verbose=0 ) current_accu = fit.history['my_iou_metric'][0] current_loss = fit.history['loss'][0] if current_accu &gt; precision: id_train = 0 else: t_pred = model.predict( f_imgs[raw_len: min(raw_len+t_batch_size,f_imgs.shape[0])], batch_size=batch_size ) for kk in range(t_pred.shape[0]): val_iou = get_iou_vector( f_msks[raw_len+kk].reshape(1,w_size,w_size,1), t_pred[kk].reshape(1,w_size,w_size,1) &gt; 0.5) if val_iou &lt; precision*0.95: new_img_test = 1 m0_select[raw_len+kk] = 1 val_len += 1 break raw_len += (kk+1) id_train = 1 if raw_len &gt;= train_num: break t.close()</span></span></code> </pre><br><pre> <code class="bash hljs">Accuracy 0.9890 loss 0.0224 selected img 408 tested img 9456 : : 1061it [21:13, 2.16s/it]</code> </pre> <br></div></div><br> ç»“æœå¹¶ä¸æ˜¾ç€å–å†³äºåŸå§‹åºåˆ—å¯¹çš„é¡ºåºã€‚ åœ¨å‰ä¸€ç§æƒ…å†µä¸‹ï¼Œç½‘ç»œé€‰æ‹©äº†271ï¼Œç°åœ¨é€‰æ‹©äº†408ï¼Œå¦‚æœæ‚¨å°†å…¶æ··åˆä½¿ç”¨ï¼Œåˆ™ç½‘ç»œå¯ä»¥é€‰æ‹©å…¶ä»–æ•°é‡ã€‚ æˆ‘ä»¬ä¸ä¼šæ£€æŸ¥ï¼Œç¬”è€…è®¤ä¸ºæ€»ä¼šå°‘äº10,000ã€‚ <br><br> åœ¨æ–°çš„ç‹¬ç«‹åºåˆ—ä¸Šæ£€æŸ¥ç½‘ç»œé¢„æµ‹çš„å‡†ç¡®æ€§ <br><br><pre> <code class="python hljs">_txy = [next_pair() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> idx <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(train_num)] test_imgs = np.array(_txy)[:,:,:,:<span class="hljs-number"><span class="hljs-number">3</span></span>].reshape(<span class="hljs-number"><span class="hljs-number">-1</span></span>,w_size ,w_size ,<span class="hljs-number"><span class="hljs-number">3</span></span>) test_msks = np.array(_txy)[:,:,:,<span class="hljs-number"><span class="hljs-number">3</span></span>:].reshape(<span class="hljs-number"><span class="hljs-number">-1</span></span>,w_size ,w_size ,<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">del</span></span>(_txy) test_pred_0 = model.predict(test_imgs) t_val_0 = get_iou_vector(test_msks,test_pred_0) t_val_0</code> </pre> <br><pre> <code class="bash hljs">0.9927799999999938</code> </pre> <br><br><h3> æ€»ç»“ä¸ç»“è®º </h3><br> å› æ­¤ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»10,000å¯¹ä¸­é€‰æ‹©å°‘äºä¸‰åˆ°å››ç™¾ä¸ªï¼Œé¢„æµ‹å‡†ç¡®åº¦ä¸º0.99278ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰åŒ…å«è‡³å°‘ä¸€äº›æœ‰ç”¨ä¿¡æ¯çš„å¯¹å‰”é™¤æ‰ï¼Œå‰©ä¸‹çš„å…¨éƒ¨å‰”é™¤ã€‚ æˆ‘ä»¬æ²¡æœ‰è°ƒæ•´è®­ç»ƒåºåˆ—çš„ç»Ÿè®¡å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰å¢åŠ ä¿¡æ¯çš„å¯é‡å¤æ€§ï¼Œç­‰ç­‰ã€‚ å¹¶ä¸”æ ¹æœ¬æ²¡æœ‰ä½¿ç”¨ç»Ÿè®¡æ–¹æ³•ã€‚ æˆ‘ä»¬æ‹ä¸€å¼ ç…§ç‰‡ï¼Œå…¶ä¸­ä»ç„¶åŒ…å«ç½‘ç»œæœªçŸ¥çš„ä¿¡æ¯ï¼Œç„¶åå°†æ‰€æœ‰ä¿¡æ¯æŒ¤å‡ºç½‘ç»œçš„è´Ÿæ‹…ã€‚ å¦‚æœç½‘ç»œè‡³å°‘é‡åˆ°ä¸€å¼ â€œç¥ç§˜â€å›¾ç‰‡ï¼Œé‚£ä¹ˆå®ƒå°†åœ¨ä¸šåŠ¡ä¸­å…¨éƒ¨ä½¿ç”¨ã€‚ <br><br> æ€»å…±271å¯¹å›¾ç‰‡/é®ç½©å¯¹åŒ…å«ç”¨äºé¢„æµ‹10,000å¯¹çš„ä¿¡æ¯ï¼Œæ¯å¯¹å¯¹çš„å‡†ç¡®åº¦è‡³å°‘ä¸º0.8075ï¼Œå³ï¼Œæ•´ä¸ªåºåˆ—çš„æ€»å‡†ç¡®åº¦è¾ƒé«˜ï¼Œä½†æ˜¯åœ¨æ¯å¼ å›¾ç‰‡ä¸­ï¼Œå…¶æ€»å‡†ç¡®åº¦ä¸ä½äº0.8075ï¼Œæˆ‘ä»¬æ²¡æœ‰æ²¡æœ‰å›¾ç‰‡æˆ‘ä»¬å¯ä»¥é¢„æµ‹ï¼Œå¹¶ä¸”çŸ¥é“è¯¥é¢„æµ‹çš„ä¸‹è¾¹ç•Œã€‚  ï¼ˆå½“ç„¶ï¼Œåœ¨è¿™é‡Œï¼Œä½œè€…è‡ªå¹è‡ªwithoutï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªï¼Œè¿™ç¯‡æ–‡ç« æ€ä¹ˆä¸ä¼šéªŒè¯è¿™ä¸ªè¯´æ³•ï¼Œå¤§çº¦æ˜¯0.8075ï¼Œè¿˜æ˜¯è¯æ®ï¼Œä½†å¾ˆå¯èƒ½æ˜¯çœŸçš„ï¼‰ <br><br> è¦è®­â€‹â€‹ç»ƒç½‘ç»œï¼Œä¸éœ€è¦å°†å³å°†åˆ°æ¥çš„æ‰€æœ‰å†…å®¹åŠ è½½åˆ°GPUä¸­ï¼Œæ‚¨å¯ä»¥æ‹‰å‡ºè®­ç»ƒçš„æ ¸å¿ƒï¼Œå¹¶åœ¨è®­ç»ƒå¼€å§‹æ—¶åœ¨å…¶ä¸Šè®­ç»ƒç½‘ç»œã€‚ å½“æ‚¨è·å¾—æ–°å›¾ç‰‡æ—¶ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨æ ‡è®°å‡ºç½‘ç»œæ— æ³•é¢„æµ‹çš„å›¾ç‰‡å¹¶å°†å…¶æ·»åŠ åˆ°ç«è½¦çš„æ ¸å¿ƒï¼Œä»è€Œå¯¹ç½‘ç»œè¿›è¡Œé‡æ–°åŸ¹è®­ä»¥ä»æ–°å›¾ç‰‡ä¸­å‹ç¼©æ‰€æœ‰ä¿¡æ¯ã€‚ è€Œä¸”æ²¡æœ‰å¿…è¦å•ç‹¬é€‰æ‹©ä¸€ä¸ªéªŒè¯åºåˆ—ï¼›æˆ‘ä»¬å¯ä»¥å‡å®šé™¤é€‰å®šçš„åºåˆ—ä»¥å¤–çš„æ‰€æœ‰å…¶ä»–å†…å®¹éƒ½æ˜¯ä¸€ä¸ªéªŒè¯åºåˆ—ã€‚ <br><br> åœ¨æ•°å­¦ä¸Šå¹¶ä¸ä¸¥æ ¼ï¼Œä½†å¾ˆé‡è¦ã€‚ å¯ä»¥è‚¯å®šåœ°è¯´ï¼Œæ¯ä¸ªå›¾ç‰‡/é®ç½©å¯¹éƒ½åŒ…å«â€œå¾ˆå¤šâ€ä¿¡æ¯ã€‚ æ¯å¯¹éƒ½åŒ…å«â€œå¤§é‡â€ä¿¡æ¯ï¼Œå°½ç®¡åœ¨å¤§å¤šæ•°å›¾ç‰‡/é®ç½©å¯¹ä¸­ï¼Œä¿¡æ¯æ˜¯ç›¸äº¤æˆ–é‡å¤çš„ã€‚  271ä¸ªå›¾ç‰‡/é®ç½©å¯¹ä¸­çš„æ¯å¯¹éƒ½åŒ…å«å¯¹äºé¢„æµ‹å¿…ä¸å¯å°‘çš„ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸èƒ½ç®€å•åœ°å°†å…¶ä¸¢å¼ƒã€‚ <br><br> å¥½å§ï¼Œå…³äºæŠ˜ç—•çš„ä¸€å¥è¯ï¼Œè®¸å¤šä¸“å®¶å’Œkagglerså°†è®­ç»ƒé¡ºåºåˆ†ä¸ºæŠ˜ç—•ï¼Œç„¶ååˆ†åˆ«è®­ç»ƒï¼Œå¹¶ç»“åˆä»¥æ›´æ£˜æ‰‹çš„æ–¹å¼è·å¾—çš„ç»“æœã€‚ åœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°†å…¶åˆ†æˆå¤šä¸ªæŠ˜å ï¼Œå¦‚æœä»10,000ä¸ªä¸­åˆ é™¤271å¯¹ï¼Œåˆ™å¯ä»¥åœ¨å…¶ä½™æ ¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ ¹åºåˆ—ï¼Œè¿™æ˜¾ç„¶ä¼šæä¾›ä¸åŒä½†å¯æ¯”çš„ç»“æœã€‚ æ‚¨å¯ä»¥ç®€å•åœ°æ··åˆå¹¶å–å…¶ä»–å‰11ä¸ªï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚ <br><br> æœ¬æ–‡æä¾›äº†ä¸€ä¸ªä»£ç ï¼Œå¹¶æ˜¾ç¤ºäº†å¦‚ä½•è®­ç»ƒU-netè¿›è¡Œå›¾åƒåˆ†å‰²ã€‚ è¿™æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæœ‰æ„åœ°æ²¡æœ‰å¯¹å…¶ä»–ç½‘ç»œï¼Œå…¶ä»–åºåˆ—è¿›è¡Œæ³›åŒ–ï¼Œä¹Ÿæ²¡æœ‰ä¸¥æ ¼çš„æ•°å­¦åŸç†ï¼Œä¸€åˆ‡éƒ½åœ¨â€œæŒ‡å°–â€ä¸Šè®²è¿°å’Œå±•ç¤ºã€‚ åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œè¯´æ˜å¦‚ä½•åœ¨è¾¾åˆ°å¯æ¥å—çš„å‡†ç¡®æ€§çš„åŒæ—¶å­¦ä¹ ç½‘ç»œã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN433946/">https://habr.com/ru/post/zh-CN433946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN433934/index.html">SAFeæˆ–è§„æ¨¡åŒ–æ•æ·æ¡†æ¶</a></li>
<li><a href="../zh-CN433936/index.html">åœ¨å¯»æ‰¾ç»™å­©å­çš„é«˜ç§‘æŠ€ç¤¼ç‰©å—ï¼Ÿ æƒ³æƒ³ä¸€ä¸ªæ¸¸ä¹åœºï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå›´æ </a></li>
<li><a href="../zh-CN433938/index.html">Yandexå’ŒGoogleå¦‚ä½•æ€»ç»“å¹´åº¦</a></li>
<li><a href="../zh-CN433940/index.html">AppStoreä¸­çš„Reviewå¤šå°‘é’±</a></li>
<li><a href="../zh-CN433944/index.html">æ¯ç­æ€§çš„ä¾‹å¤–</a></li>
<li><a href="../zh-CN433948/index.html">å¦‚ä½•ä½¿ä»˜æ¬¾æ›´æ–¹ä¾¿ï¼šIaaSæä¾›å•†çš„ç»éªŒ</a></li>
<li><a href="../zh-CN433952/index.html">ä»HPEé€‰æ‹©SAP HANAè§£å†³æ–¹æ¡ˆçš„10ä¸ªç†ç”±ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN433954/index.html">å…«ç§éŸ³é¢‘æŠ€æœ¯å’ŒéŸ³é¢‘å°å·¥å…·å°†äº2019å¹´è¿›å…¥TECnologyåäººå ‚</a></li>
<li><a href="../zh-CN433956/index.html">Moddersä½¿ç”¨AIæ”¹å–„äº†æ¸¸æˆçš„è´¨æ„Ÿ</a></li>
<li><a href="../zh-CN433958/index.html">Spring Bootä¸Šçš„TDDåº”ç”¨ç¨‹åºï¼šä½¿ç”¨æ•°æ®åº“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>