<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â™’ï¸ ğŸ› ğŸ‘‹ğŸ» åŸºäºæ˜Ÿå·çš„ä¼šè®®å®¤ ğŸ‘¨ğŸ½â€âœˆï¸ ğŸš„ ğŸ”º</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å‰è¨€ 
 ä¸‹åˆå¥½ 

 æœ‰ä¸¤ä»¶äº‹ä¿ƒä½¿æˆ‘å†™è¿™ç¯‡æ–‡ç« ï¼šå¾ˆå°‘æˆ–ç¼ºå°‘æœ‰å…³Asteriskâ€œèŠ¯ç‰‡â€çš„ç°ä»£å·¥ä½œç¤ºä¾‹ï¼Œä»¥åŠä¸“å®¶ä¸æ„¿æ„ä¸å…¶ä»–äººå…±äº«è¿™äº›â€œèŠ¯ç‰‡â€ã€‚ ç°åœ¨æˆ‘æ˜¯å…³äºRUç¤¾åŒºçš„ã€‚ è®ºå›ä¸Šçš„å„ç§â€œç¥–çˆ¶â€æ›´å¯èƒ½ç»™æ‚¨å……æ–¥æ±¡å¢ï¼Œå¹¶è®©æ‚¨é˜…è¯»åå¹´å‰çš„ä¹¦ï¼Œè€Œä¸æ˜¯æˆ–å¤šæˆ–å°‘åœ°æä¾›æœ‰ç”¨çš„ä¿¡æ¯ã€‚ è®ºå›ä¸»é¢˜æœ¬èº«ï¼ˆåˆ›å»ºäº2005-2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>åŸºäºæ˜Ÿå·çš„ä¼šè®®å®¤</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427117/"><h3> å‰è¨€ </h3><br> ä¸‹åˆå¥½ <br><br> æœ‰ä¸¤ä»¶äº‹ä¿ƒä½¿æˆ‘å†™è¿™ç¯‡æ–‡ç« ï¼šå¾ˆå°‘æˆ–ç¼ºå°‘æœ‰å…³Asteriskâ€œèŠ¯ç‰‡â€çš„ç°ä»£å·¥ä½œç¤ºä¾‹ï¼Œä»¥åŠä¸“å®¶ä¸æ„¿æ„ä¸å…¶ä»–äººå…±äº«è¿™äº›â€œèŠ¯ç‰‡â€ã€‚ ç°åœ¨æˆ‘æ˜¯å…³äºRUç¤¾åŒºçš„ã€‚ è®ºå›ä¸Šçš„å„ç§â€œç¥–çˆ¶â€æ›´å¯èƒ½ç»™æ‚¨å……æ–¥æ±¡å¢ï¼Œå¹¶è®©æ‚¨é˜…è¯»åå¹´å‰çš„ä¹¦ï¼Œè€Œä¸æ˜¯æˆ–å¤šæˆ–å°‘åœ°æä¾›æœ‰ç”¨çš„ä¿¡æ¯ã€‚ è®ºå›ä¸»é¢˜æœ¬èº«ï¼ˆåˆ›å»ºäº2005-2010å¹´ï¼‰éå¸¸è¿‡æ—¶ï¼Œæœ‰æ—¶åœ¨å½“å‰ç‰ˆæœ¬çš„æ˜Ÿå·ä¸­å·²ç»çœ‹åˆ°ä¸€äº›å†…å®¹ï¼Œå¹¶ä¸”éœ€è¦é‡åšä¸€äº›å†…å®¹æ‰èƒ½ä½¿å…¶æ­£å¸¸å·¥ä½œã€‚ <br><a name="habracut"></a><br> æ‰€ä»¥åœ¨è¿™é‡Œã€‚ <br> ç”±äºæ”¾å¼ƒäº†CUCMï¼Œå–è€Œä»£ä¹‹çš„æ˜¯Asteriskï¼Œç®¡ç†å±‚çš„ä»»åŠ¡æ˜¯ä»¥æœ€åŸå§‹çš„å½¢å¼ä¿å­˜ç”¨æˆ·ä¸­æœ€å—æ¬¢è¿çš„æœåŠ¡ï¼Œä»¥å…ä½¿äººä»¬æ„Ÿåˆ°æ²®ä¸§ã€‚ å…¶ä¸­ä¹‹ä¸€æ˜¯åˆ›å»ºä¼šè®®ã€‚ åˆ°é‚£æ—¶ï¼Œæˆ‘å·²ç»å¯¹Asteriskç†Ÿæ‚‰äº†ï¼Œä½†è¿˜ä¸é‚£ä¹ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥èŠ±äº†å¤§çº¦ä¸€ä¸ªåŠæ˜ŸæœŸçš„æ—¶é—´æ¥æ•´ç†å„ç§ä¼šè®®é€‰é¡¹ï¼Œæœ€ç»ˆå†³å®šäº†å¦ä¸€ä¸ªä»»åŠ¡ã€‚ <br><br> é—®é¢˜æ˜¯ï¼Œä»ä¸ç±»ä¼¼çš„è§£å†³æ–¹æ¡ˆç±»ä¼¼ï¼Œæœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸€ç¯‡æ–‡ç« æåˆ°</a>äº†è¿‡æ—¶çš„çº¦ä¼šï¼Œè¿˜æœ‰æŸç§æˆ‘ä»ç„¶æ— æ³•å·¥ä½œçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ€ªç‰©</a> ã€‚ æˆ‘å»ºè®®ä¸è¦é‚£ä¹ˆç¬¨é‡ã€‚ <br><cut></cut><br><h3> çº¸æµ† </h3><br> æˆ‘ä¸ä¼šæè¿°ä»€ä¹ˆæ˜¯å…±è½­ï¼Œæ˜¯ä»€ä¹ˆè´Ÿè´£ç‰¹å®šé…ç½®ä¸­çš„ä»€ä¹ˆéƒ¨åˆ†ï¼Œä»¥åŠè¯¥é€‰é¡¹æ˜¯ä»€ä¹ˆï¼Œæˆ‘å°†ä»…è·å¾—æ­¤ä¿¡æ¯ï¼Œå¹¶ä¸”å®ƒæ˜¯æœ€æ–°çš„ã€‚ ç°åœ¨è®¨è®ºæ•´ä¸ªå†³ç­–ã€‚ <br><br> ç›®æ ‡ï¼šä½¿ä¼šè®®å¯ä»¥åœ¨å¯¹è¯æœŸé—´åˆ›å»ºï¼Œç„¶åé‚€è¯·é‚£é‡Œçš„æ›´å¤šè®¢æˆ·ã€‚ ä¸»è¦é—®é¢˜æ˜¯channelredirectå‡½æ•°æ— æ³•æ­£å¸¸è¿è¡Œã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ‚¨åœ¨é€šè¯è¿‡ç¨‹ä¸­ä»æ‹¨å·æ–¹æ¡ˆä¸­æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œåˆ™å…¶ä¸­ä¸€ä¸ªé€šé“å°†åœ¨éœ€è¦æ—¶è‡ªåŠ¨å…³é—­ï¼Œè€Œç¬¬äºŒä¸ªé€šé“å°†å´©æºƒï¼Œå¹¶å°†æ•´ä¸ªæ‹¨å·æ–¹æ¡ˆçˆ¬åˆ°2è¡Œå¹¶åœ¨Dialsä¸Šæ³¨å†Œgé€‰é¡¹æ˜¯å¾ˆæ‡’çš„ã€‚ è€Œä¸”æˆ‘ä¸æ˜ç™½ä¸ºä»€ä¹ˆåœ¨å¤§å¤šæ•°æ‰‹å†Œä¸­ï¼Œæ¯ä¸ªäººéƒ½è¯•å›¾ä»…é€šè¿‡æ‹¨å·è®¡åˆ’æ¥è§£å†³é—®é¢˜ï¼Œå´å¿½ç•¥äº†æ˜Ÿå·ä¸å¤–éƒ¨è„šæœ¬å’ŒAMIé…åˆä½¿ç”¨çš„èƒ½åŠ›ã€‚ <br><cut></cut><br> è¿™æ ·å•Š æ˜Ÿå·14.4.0 <br><br>  2ä¸ªé€‰é¡¹çš„ä¼šè®®è„šæœ¬ï¼ˆå¸¦æ³¨é‡Šï¼‰ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">Conference.php</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-comment"><span class="hljs-comment">//    $host = "192.168.1.1"; $port = "5038"; $timeout = "10"; $user = "conference"; $pass = "1111"; // ,    1   2  $kusok = $argv[1]; //       if ($kusok == 1){ //  $channel = $argv[2]; $bridgepeer = $argv[3]; $confnum = $argv[4]; print_r($bridgepeer); print_r($confnum); // $sconn = fsockopen ($host, $port, $timeout) or die ("Connection to $host:$port failed!"); fputs ($sconn, "Action: Login\r\n"); fputs ($sconn, "Username: $user\r\n"); fputs ($sconn, "Secret: $pass\r\n\r\n"); //   fputs ($sconn, "Action: Setvar\r\n"); fputs ($sconn, "Channel: $channel\r\n"); fputs ($sconn, "Variable: CONFNUM\r\n"); fputs ($sconn, "Value: $confnum\r\n\r\n"); fputs ($sconn, "Action: Setvar\r\n"); fputs ($sconn, "Channel: $bridgepeer\r\n"); fputs ($sconn, "Variable: CONFNUM\r\n"); fputs ($sconn, "Value: $confnum\r\n\r\n"); // fputs ($sconn, "Action: Redirect\r\n"); fputs ($sconn, "Channel: $bridgepeer\r\n"); fputs ($sconn, "ExtraChannel: $channel\r\n"); fputs ($sconn, "Context: service_code-ael\r\n"); fputs ($sconn, "Exten: conference\r\n"); fputs ($sconn, "Priority: 1\r\n\r\n"); fputs($sconn, "Action: Logoff\r\n\r\n"); sleep(2); fclose ($sconn); } //     if ($kusok == 2) { //  $confnum = $argv[2]; $inviten = $argv[3]; $sconn = fsockopen ($host, $port, $errno, $errstr, $timeout) or die ("Connection to $host:$port failed!"); // fputs ($sconn, "Action: Login\r\n"); fputs ($sconn, "Username: $user\r\n"); fputs ($sconn, "Secret: $pass\r\n\r\n"); //     fputs ($sconn, "Action: Originate\r\n"); fputs ($sconn, "Channel: Local/".$inviten."@out-ael\r\n"); fputs ($sconn, "Context: service_code-ael\r\n"); fputs ($sconn, "Exten: conference\r\n"); fputs ($sconn, "Priority: 1\r\n"); fputs ($sconn, "Variable: CONFNUM=".$confnum."\r\n\r\n"); fputs($sconn, "Action: Logoff\r\n\r\n"); sleep(2); fclose ($sconn); } }</span></span></code> </pre> <br></div></div><br> ç¼–ç¨‹å¤§å¸ˆå¯ä»¥é€šè¿‡ç¼–å†™ç³–æœæ¥ä¿®å¤ä»£ç ï¼Œæˆ‘å°½åŠ›ç¼–å†™äº†ä»£ç ã€‚ <br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¼€å§‹ç›´æ¥åœ¨Asteriskæœ¬èº«ä¸­ä½¿ç”¨æ­¤è„šæœ¬ã€‚ <br><br> ä¸ºäº†åˆ›å»ºä¼šè®®ï¼Œæˆ‘é€‰æ‹©äº†ç»„åˆ* 1ã€‚ ç®€è¦åœ°è¯´ï¼Œä¸ä¸ä¸»è¦ç¼–å·ç›¸äº¤ã€‚ <br><br> å°†å…·æœ‰æ‰€éœ€å˜é‡çš„è„šæœ¬è°ƒç”¨æ·»åŠ åˆ°features.conf <br><br><pre> <code class="hljs ruby">[applicationmap] conference =&gt; *<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>,System(<span class="hljs-regexp"><span class="hljs-regexp">/usr/bin</span></span><span class="hljs-regexp"><span class="hljs-regexp">/php /home</span></span><span class="hljs-regexp"><span class="hljs-regexp">/script/conference</span></span>.php <span class="hljs-number"><span class="hljs-number">1</span></span> ${CHANNEL} ${BRIDGEPEER} ${CALLERID(num)})</code> </pre><br> ç„¶åï¼Œè¦ä½¿å…¶èµ·ä½œç”¨ï¼Œè¯·åœ¨[globals]éƒ¨åˆ†çš„Dialplanä¸­åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œç„¶åæ·»åŠ æˆ‘ä»¬çš„åŠŸèƒ½ <br><br><pre> <code class="hljs">DYNAMIC_FEATURES=conference</code> </pre> <br> è¦å°†æ–°å‚ä¸è€…æ·»åŠ åˆ°å·²åˆ›å»ºçš„ä¼šè®®ä¸­ï¼Œæ‚¨éœ€è¦åœ¨confbridge.confä¸­æ³¨å†Œä»£ç ã€‚ <br><br><pre> <code class="hljs haskell">[default_menu] <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> = menu *1=dialplan_exec(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">service_code</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ael</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">conference_add</span></span></span><span class="hljs-class">,1)</span></span></code> </pre><br> å¥½å§ï¼Œç°åœ¨æœ€å¥½çš„éƒ¨åˆ†æ˜¯extensions.aelï¼š <br><br> è¦åˆ›å»ºä¼šè®®ï¼ˆphpè„šæœ¬åœ¨æ­¤å¤„å¤„ç†ä¸¤ä¸ªå¯¹è¯é€šé“ï¼‰ï¼š <br><br><pre> <code class="hljs perl"> <span class="hljs-string"><span class="hljs-string">conference =&gt;</span></span> { ConfBridge(${CONFNUM},,,default_menu); }</code> </pre><br> è¦æ·»åŠ æ–°ç”¨æˆ·ï¼ˆdialplan_execåœ°å€åœ¨æ­¤å¤„ï¼‰ï¼š <br><br><pre> <code class="hljs ruby">conference_add =&gt; { Read(INVITEN,dial,<span class="hljs-number"><span class="hljs-number">11</span></span>,i); System(<span class="hljs-regexp"><span class="hljs-regexp">/usr/bin</span></span><span class="hljs-regexp"><span class="hljs-regexp">/php /home</span></span><span class="hljs-regexp"><span class="hljs-regexp">/script/conference</span></span>.php <span class="hljs-number"><span class="hljs-number">2</span></span> ${CALLERID(num)} ${INVITEN}); }</code> </pre><br> ä»…æ­¤è€Œå·²ã€‚ æ‹¨å·è®¡åˆ’ä¸­æ²¡æœ‰æˆåƒä¸Šä¸‡çš„ä»£ç ã€‚ ä¸€åˆ‡éƒ½å¾ˆå®½æ•ã€‚  * 1åœ¨å¯¹è¯ä¸­ï¼Œè€Œæ‚¨åˆåœ¨confä¸­ï¼Œ* 1èœ‚é¸£å’Œæ‹¨å·ï¼Œæ·»åŠ è¯¥äººã€‚ <br><br><h3> æˆé•¿ </h3><br> ç”±äºç”¨æˆ·çš„å›°æƒ‘ï¼Œæˆ‘å¼€å§‹å¼€å‘æ­¤åŠŸèƒ½ã€‚ <br><br> æ¥ä¸‹æ¥çš„æœºä¼šæ˜¯ä»å¤´å¼€å§‹åˆ›å»ºä¼šè®®ï¼ˆè€Œä¸æ˜¯ä»å¯¹è¯ä¸­ï¼‰ï¼Œä»¥åŠæŒ‰ä¼šè®®å·è¿›å…¥å·²åˆ›å»ºçš„ä¼šè®®ï¼Œè€Œä¸å¿…ç­‰å¾…é‚€è¯·å‘¼å« <br><br> æ·»åŠ åˆ°æ‹¨å·è®¡åˆ’ï¼š <br><br><pre> <code class="hljs ruby"><span class="hljs-number"><span class="hljs-number">_</span></span>*<span class="hljs-number"><span class="hljs-number">1</span></span>XXXX =&gt; { NoOp(${CONFCHAN}); Set(__CONFNUM=${<span class="hljs-symbol"><span class="hljs-symbol">EXTEN:</span></span><span class="hljs-number"><span class="hljs-number">2</span></span>}); System(<span class="hljs-regexp"><span class="hljs-regexp">/usr/bin</span></span><span class="hljs-regexp"><span class="hljs-regexp">/php /home</span></span><span class="hljs-regexp"><span class="hljs-regexp">/script/conference</span></span>.php <span class="hljs-number"><span class="hljs-number">3</span></span> ${CONFCHAN} ${CONFNUM} ); }</code> </pre><br> æ·»åŠ åˆ°è„šæœ¬ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">Conference.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//     if ($kusok == 3){ //  $channel = $argv[2]; $confnum = $argv[3]; // $sconn = fsockopen ($host, $port, $timeout) or die ("Connection to $host:$port failed!"); fputs ($sconn, "Action: Login\r\n"); fputs ($sconn, "Username: $user\r\n"); fputs ($sconn, "Secret: $pass\r\n\r\n"); //   fputs ($sconn, "Action: Setvar\r\n"); fputs ($sconn, "Channel: $channel\r\n"); fputs ($sconn, "Variable: CONFNUM\r\n"); fputs ($sconn, "Value: $confnum\r\n\r\n"); // fputs ($sconn, "Action: Redirect\r\n"); fputs ($sconn, "Channel: $channel\r\n"); fputs ($sconn, "Context: service_code-ael\r\n"); fputs ($sconn, "Exten: conference\r\n"); fputs ($sconn, "Priority: 1\r\n\r\n"); fputs($sconn, "Action: Logoff\r\n\r\n"); sleep(2); fclose ($sconn);</span></span></code> </pre> <br></div></div><br> æˆ‘è¿˜å¿…é¡»ä¿®æ”¹_ * Xè¡Œã€‚ <br><br><pre> <code class="hljs perl"> <span class="hljs-number"><span class="hljs-number">_</span></span>*X. =&gt; { set(__CONFCHAN=${CHANNEL}); Dial(Local/${EXTEN}@service_code-ael);</code> </pre><br> ç°åœ¨ï¼Œè¦è¿›å…¥ä¼šè®®æˆ–ä»å¤´å¼€å§‹åˆ›å»ºä¼šè®®ï¼Œæ‚¨åªéœ€æ‹¨æ‰“* 1å’Œä¸€ä¸ªç”µè¯ï¼Œä¾‹å¦‚* 15234ã€‚ <br><br> è¯¥æœåŠ¡çš„æœ€åä¸€ä¸ªå˜ç§æ˜¯æ‰€è°“çš„â€œå°ç»„ä¼šè®®â€ã€‚ è¿™æ˜¯å½“å¤§è€æ¿ä»¬æ‡’å¾—æ‰‹åŠ¨æ·»åŠ æ‰€æœ‰äººæ—¶ï¼Œä½†æ˜¯æˆ‘æƒ³æŒ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç„¶åä¸€åˆ‡éƒ½ç»„è£…å¥½äº†ã€‚ ä¸ºæ­¤ï¼Œæˆ‘å†³å®šå•ç‹¬ç¼–å†™æœåŠ¡ä»£ç ï¼ˆ* XXXï¼‰ï¼Œä»¥ä½¿äººä»¬è‡ªå·±ä¸ä¼šæ„Ÿåˆ°å›°æƒ‘ã€‚ å¯¹äºæˆ‘ä»¬çš„ç»„ç»‡è€Œè¨€ï¼Œåœ¨æœªæ¥100å¹´å†…ä¸å¤ªå¯èƒ½éœ€è¦è¶…è¿‡1000ä¸ªä¼šè®®ç»„ï¼Œå› æ­¤åº”è¯¥æœ‰è¶³å¤Ÿçš„ç¼–å·å‚¨å¤‡ã€‚ åœ¨å®¶é‡Œï¼Œæ‚¨å¯ä»¥æ·»åŠ ä¸ºå…¶ä»–å‰ç¼€ï¼Œå› æ­¤åˆ†é…ä¸åŒçš„ç¼–å·èƒ½åŠ›ã€‚ <br><br> æ‹¨å·æ–¹æ¡ˆï¼š <br><br><pre> <code class="hljs ruby"> <span class="hljs-number"><span class="hljs-number">_</span></span>*XXX=&gt; { Set(CONFNUM=${CALLERID(num)}); System(<span class="hljs-regexp"><span class="hljs-regexp">/usr/bin</span></span><span class="hljs-regexp"><span class="hljs-regexp">/php /home</span></span><span class="hljs-regexp"><span class="hljs-regexp">/script/groups</span></span>.php ${<span class="hljs-symbol"><span class="hljs-symbol">EXTEN:</span></span><span class="hljs-number"><span class="hljs-number">1</span></span>} ${CONFNUM}); ConfBridge(${CONFNUM},,,default_menu); }</code> </pre><br> å‚ä¸è€…è‡ªå·±çš„å°–å«å£°ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">groups.php</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">//  function call ($group, $confnum) { $many = count($group); //       for ($i=0; $many&gt;$i; $i++) { //    $num = trim(array_shift($group[$i])); // system("asterisk -rx \"channel originate Local/$num@out-ael application ConfBridge $confnum\""); } } //    function conf_group ($groupid) { //   $opt = array( PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION, PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC ); $pdo = new PDO("odbc:mssql_asterisk, "asterisk, "121212", $opt); //   $sql = "SELECT extension FROM [asterisk].[dbo].[conf_groups] where groupid = $groupid"; $select = $pdo-&gt;query($sql); $result = $select-&gt;fetchAll(); // $pdo = NULL; return $result; } //  ,    $groupid = $argv[1]; //   $confnum = $argv[2]; //   $group=conf_group($groupid); // call($group, $confnum); }</span></span></code> </pre><br></div></div><br> æ‰€æœ‰ç»„å‡æŒ‰ç…§â€œç»„ï¼Œç¼–å·ï¼Œåç§°ï¼Œæè¿°â€çš„ç»“æ„å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ã€‚ å¦‚æœå‡ºç°ä¸€ä¸ªæ–°ç»„ï¼Œåˆ™åªéœ€å°†å…¶æ·»åŠ åˆ°æ•°æ®åº“ã€‚ <br><br> ç°åœ¨ï¼Œä¾‹å¦‚ï¼Œè¦å¬é›†æ‰€æœ‰è‘£äº‹å‚åŠ ä¼šè®®ï¼Œä¸€èˆ¬å°†åªéœ€è¦æ‹¨* 100ã€‚ é€šå¸¸ï¼Œå¤§è€æ¿æœ‰å¤§ç”µè¯ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†* 100ç»‘å®šåˆ°ä»»ä½•å¿«é€Ÿæ‹¨å·é”®ï¼Œå°†å…¶ç­¾åä¸ºâ€œ directorâ€ï¼Œå¹¶ä¸”ç”¨æˆ·ä¸å¿…ç†ä¼šé”®å…¥ä»€ä¹ˆå†…å®¹ã€‚ æˆ‘æŒ‰ä¸‹äº†æŒ‰é’®-æˆ‘å¬é›†äº†ä¼šè®®ã€‚ <br><br>  <b>ç°åœ¨é¢„æ–™åˆ°æ‚¨çš„é—®é¢˜ï¼š</b> <br><br> ä¸ºä»€ä¹ˆä½¿ç”¨è„šæœ¬å’Œamiï¼Ÿ å› ä¸ºé€šè¿‡æ‹¨å·è®¡åˆ’ï¼Œæˆ‘æ— æ³•åœ¨ä¸ä¸¢å¤±ä¸¤ä¸ªé¢‘é“çš„æƒ…å†µä¸‹åˆç†åœ°é‡å®šå‘ä¸¤ä¸ªé¢‘é“ã€‚ åœ¨amiä¸­ï¼Œåœ¨é‡å®šå‘åŠŸèƒ½ä¸­ï¼Œæ‚¨å¯ä»¥é™„åŠ ä¸€ä¸ªé¢‘é“+ä¸ºæ­¤è®¾ç½®ä¸€ä¸ªå˜é‡ï¼ˆä¾‹å¦‚ï¼Œä¼šè®®å·ï¼Œä»¥ä¾¿ä»–ä¹Ÿå¯ä»¥å‘å…¶ä¸­æ·»åŠ ä¸€ä¸ªäººï¼‰ã€‚ <br><br> æ‚¨å¯èƒ½è¿˜ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘å°†è¦ç´ æ”¾åœ¨å•ç‹¬çš„service_code-aelä¸Šä¸‹æ–‡ä¸­ã€‚ å½“æ‚¨å…·æœ‰å¤šä¸ªåŠŸèƒ½éƒ¨ä»¶æ—¶ï¼Œè¿™å¾ˆæ–¹ä¾¿ã€‚ æˆ‘å†³å®šä½¿å®ƒä»¬é€šè¿‡*ï¼Œå› æ­¤ï¼Œåœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œæˆ‘éƒ½åªå†™_ *Xã€‚ å’Œåœ¨è¿™ç§æƒ…å†µä¸‹çš„åœ°å€ã€‚ ä¹Ÿè®¸æœ‰äººä¼šæ‰¾åˆ°ä¸€ä¸ªæ›´ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œä½†å‡ ä¸ªæœˆæ¥æˆ‘ä¸€ç›´æ²¡æœ‰æ‰¾åˆ°å®ƒã€‚ å¹¶ä¸”æ­¤åŠŸèƒ½å¸å¼•äº†ç”¨æˆ·ã€‚ <br><br> ä¸ºä»€ä¹ˆé€‰æ‹©aelï¼Œè€Œä¸æ˜¯confï¼Ÿ å¥½å§ï¼Œå› ä¸ºå®ƒæ›´ç»“æ„åŒ–ä¸”æ›´æ˜“äºé˜…è¯»ã€‚ <br> æ›´å®¹æ˜“ç†è§£ ä¸€ä¸ªgotoifå‡½æ•°å€¼å¾—ã€‚ æˆ‘è¿˜æ²¡åˆ°luaã€‚ <br><br> ä¸ºä»€ä¹ˆåœ¨å¤§é‡æ”¶é›†ç¤ºä¾‹ä¸­æ˜¯é€šè¿‡bashè€Œä¸æ˜¯é€šè¿‡AMIæ¥å®Œæˆçš„ï¼Ÿ é—®é¢˜åœ¨äºï¼Œé€šè¿‡amié€šè¿‡è¿ç»­æ‰§è¡Œä¸€å †åŸå§‹æ“ä½œï¼Œç³»ç»Ÿä¼šç­‰å¾…ä¸Šä¸€ä¸ªå®Œæˆï¼Œä»¥ç»™å‡ºä¸‹ä¸€ä¸ªã€‚ å¦‚æœæ²¡æœ‰äººæ‹¿èµ·ç”µè¯ï¼Œå¹¶ä¸”æœ‰20ç§’é’Ÿno_anså’Œè¿™5ä»¶ä¸œè¥¿ï¼Ÿ æ‚¨å¯ä»¥ç­‰åˆ°æ™šä¸Šæ”¶é›†ã€‚ <br><br> å¥½å§ï¼Œè¿™å¯èƒ½å°±æ˜¯å…¨éƒ¨ã€‚ æˆ‘å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºé‚£äº›å¯»æ±‚å¿«é€Ÿï¼Œèˆ’é€‚åœ°ä¸ºç”¨æˆ·æä¾›æœåŠ¡çš„æ±‚èŒè€…æä¾›å¸®åŠ©ï¼Œè€Œæœ€é‡è¦çš„æ˜¯ï¼Œå°†æ¥ä¿æŒè¯¥ç³»ç»Ÿå¯¹æˆ‘è‡ªå·±æ¥è¯´å¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥è¯´å¯¹å°†æ¥æœ‰ä¿ç•™ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN427117/">https://habr.com/ru/post/zh-CN427117/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN427105/index.html">å­¦ä¹ å­¦ä¹ ï¼šç»§ç»­æ•™è‚²æ˜¯æ•°å­—ç»æµæ—¶ä»£ç«äº‰åŠ›çš„å…³é”®</a></li>
<li><a href="../zh-CN427107/index.html">Parsim X12â€œåœ¨è†ç›–ä¸Šâ€</a></li>
<li><a href="../zh-CN427109/index.html">å¤ªç©ºç›—ç‰ˆ-ç¾å‘³çš„Delta-Vå’Œæ°¢éšèº«æ±½èˆ¹-ç¬¬1éƒ¨åˆ†</a></li>
<li><a href="../zh-CN427111/index.html">è½¬æ¢æ—§ç‰ˆåº”ç”¨ç¨‹åºçš„å¼€å‘å’Œäº¤ä»˜æµç¨‹</a></li>
<li><a href="../zh-CN427113/index.html">å¯ç¼–ç¨‹é—¨é˜µåˆ—ï¼šå®ƒä»¬å¦‚ä½•å¸®åŠ©5Gç½‘ç»œ</a></li>
<li><a href="../zh-CN427123/index.html">å›¾çµæ¸¸æˆ</a></li>
<li><a href="../zh-CN427129/index.html">å¨èƒæƒ…æŠ¥-ä¿¡æ¯å®‰å…¨çš„ç°ä»£æ–¹æ³•</a></li>
<li><a href="../zh-CN427131/index.html">ç†Ÿæ‚‰Audiomaniaï¼šæœ‰å…³ç”Ÿäº§ï¼Œè®¾è®¡ï¼ŒåŠå…¬å®¤å’Œä¸šåŠ¡çš„15ç§ä¸»é¢˜ææ–™</a></li>
<li><a href="../zh-CN427133/index.html">åˆ†ç±»-ç»å…¸ä¼˜åŒ–ä»»åŠ¡</a></li>
<li><a href="../zh-CN427135/index.html">æ¸¸æˆä¸­è¿‡åœºåŠ¨ç”»å’ŒåŠ¨ä½œåºåˆ—çš„å®ç°</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>