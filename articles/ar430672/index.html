<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๐พ ๐ ๐น ูุณุฎุฉ ูุตูุฉ ูู ุชูุฑูุฑ "ุงููุงุนููู ููุงุจู CSP ููุงุจู ุงูููุงู ..." ูุน C ++ CoreHard ุฎุฑูู 2018 ๐จ๐ผโ๐ โ ๐๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุฃูุงุฆู ุชุดุฑูู ุงูุซุงูู / ููููุจุฑ ุ ุงุณุชุถุงูุช ูููุณู ูุคุชูุฑ C ++ ุงูุชุงูู ูุคุชูุฑ C ++ CoreHard ูุฎุฑูู 2018. ููุฏูุช ุชูุฑูุฑ ุงููุจุทุงู "Actors vs CSP vs Tasks ..." ุ ุงู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุณุฎุฉ ูุตูุฉ ูู ุชูุฑูุฑ "ุงููุงุนููู ููุงุจู CSP ููุงุจู ุงูููุงู ..." ูุน C ++ CoreHard ุฎุฑูู 2018</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430672/" style=";text-align:right;direction:rtl">  ูู ุฃูุงุฆู ุชุดุฑูู ุงูุซุงูู / ููููุจุฑ ุ ุงุณุชุถุงูุช ูููุณู ูุคุชูุฑ C ++ ุงูุชุงูู ูุคุชูุฑ C ++ CoreHard ูุฎุฑูู 2018. ููุฏูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุฑูุฑ ุงููุจุทุงู "Actors vs CSP vs Tasks ..."</a> ุ ุงูุฐู ุชุญุฏุซ ุนู ููู ูููู ููุชุทุจููุงุช ุฐุงุช ุงููุณุชูู ุงูุฃุนูู ูู "ุงูุธููุฑ ูู C ++" "ุจุฑุงูุฌ ูุชุนุฏุฏุฉ ุชูุงูุณูุฉ".  ุชุญุช ูุณุฎุฉ ููุทูุนุฉ ูู ูุฐุง ุงูุชูุฑูุฑ ุ ุชุญููุช ุฅูู ููุงู.  ููุดุท ุ ูุดุฐุจ ูู ุฃูุงูู ุ ูููู ูู ุฃูุงูู. <br><br>  ุฃูุฏ ุฃู ุฃุบุชูู ูุฐู ุงููุฑุตุฉ ูุฃุดูุฑ ูุฌุชูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CoreHard</a> ุนูู ุชูุธูู ุงููุคุชูุฑ ุงููุจูุฑ ุงููุงุฏู ูู ูููุณู ูุนูู ูุฑุตุฉ ุงูุชุญุฏุซ.  ูุฃูุถุง ูููุดุฑ ุงูููุฑู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชูุงุฑูุฑ ุงูููุฏูู ููุชูุงุฑูุฑ ุนูู ูููุน ููุชููุจ</a> . <br><br>  ูุฐุง ุ ุฏุนูุง ููุชูู ุฅูู ุงูููุถูุน ุงูุฑุฆูุณู ูููุญุงุฏุซุฉ.  ุนูู ูุฌู ุงูุชุญุฏูุฏ ุ ูุง ูู ุงูุฃุณุงููุจ ุงูุชู ูููููุง ุงุณุชุฎุฏุงููุง ูุชุจุณูุท ุงูุจุฑูุฌุฉ ูุชุนุฏุฏุฉ ุงูุฎููุท ูู C ++ ุ ูููู ุณุชุจุฏู ุจุนุถ ูุฐู ุงูุฃุณุงููุจ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ูุงูููุฒุงุช ุงููุชุฃุตูุฉ ูู ุฃุณุงููุจ ูุนููุฉ ุ ููุง ูู ุงููุดุชุฑู ุจูููุง ุ ููุง ุฅูู ุฐูู. <br><br>  ููุงุญุธุฉ: ุชู ุงูุนุซูุฑ ุนูู ุงูุฃุฎุทุงุก ูุงูุฃุฎุทุงุก ุงููุทุจุนูุฉ ูู ุงูุนุฑุถ ุงูุชูุฏููู ุงูุฃุตูู ููุชูุฑูุฑ ุ ูุฐูู ุณุชุณุชุฎุฏู ุงูููุงูุฉ ุดุฑุงุฆุญ ูู ุงูุฅุตุฏุงุฑ ุงููุญุฏุซ ูุงููุญุฑุฑ ุ ูุงูุชู ูููู ุงูุนุซูุฑ ุนูููุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุนุฑูุถ ุงูุชูุฏูููุฉ ูู Google</a> ุฃู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SlideShare</a> . <br><br><h1 style=";text-align:right;direction:rtl">  multithreading ุนุงุฑูุฉ ูู ุงูุดุฑ! </h1><br>  ุนููู ุฃู ุชุจุฏุฃ ุจุงูุชูุงูุงุช ุงููุชูุฑุฑุฉ ุ ูุงูุชู ุ ูุน ุฐูู ุ ูุง ุชุฒุงู ุฐุงุช ุตูุฉ: <br><blockquote style=";text-align:right;direction:rtl">  ุจุฑูุฌุฉ C ++ ูุชุนุฏุฏุฉ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ูู ุฎูุงู ุงูุฎููุท ุงูุนุงุฑูุฉ ุ ููุชุบูุฑุงุช ุงูุชุจุงุฏู ูุงูุญุงูุฉ ูู <b>ุงูุนุฑู</b> <b>ูุงูุฃูู</b> <b>ูุงูุฏู</b> . </blockquote><a name="habracut"></a><br>  ุชู ูุตู ูุซุงู ุฌูุฏ ูุคุฎุฑูุง ููุง ูู ูุฐู ุงูููุงูุฉ ููุง ุนูู ุญุจุฑู: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฏุณุฉ ุงูุฎุงุฏู ุงูุชููู ูุทูู ุงููุงุฑ ุงููุญููู ุนุจุฑ ุงูุฅูุชุฑูุช Tacticool</a> ".  ูู ุฐูู ุ ุชุญุฏุซ ุงูุฑุฌุงู ุนู ููููุฉ ุชููููู ุ ุนูู ูุง ูุจุฏู ุ ูู ุฌูุน ูุฌููุนุฉ ูุงููุฉ ูู ุงูููุงุจุณ ุฐุงุช ุงูุตูุฉ ุจุชุทููุฑ ููุฏ ูุชุนุฏุฏ ุงูุฎููุท ูู C ู C ++.  ูุงูุช ููุงู "ุชูุฑูุฑุงุช ุฐุงูุฑุฉ" ูุชูุฌุฉ ููุณุจุงู ุ ูุฃุฏุงุก ููุฎูุถ ุจุณุจุจ ููุงุฒุงุฉ ุบูุฑ ูุงุฌุญุฉ. <br><br>  ููุชูุฌุฉ ูุฐูู ุ ุงูุชูู ูู ุดูุก ุจุดูู ุทุจูุนู: <br><blockquote style=";text-align:right;direction:rtl">  ุจุนุฏ ูุถุงุก ุฃุณุจูุนูู ูู ุงูุนุซูุฑ ุนูู ุงูุฃุฎุทุงุก ุงูุฃูุซุฑ ุฃูููุฉ ูุฅุตูุงุญูุง ุ ูุฑุฑูุง ุฃูู ูู <u>ุงูุฃุณูู ุฅุนุงุฏุฉ ูุชุงุจุฉ ูู ุดูุก ูู ููุทุฉ ุงูุตูุฑ</u> ุจุฏูุงู ูู ูุญุงููุฉ ุฅุตูุงุญ ุฌููุน ุฃูุฌู ุงููุตูุฑ ูู ุงูุญู ุงูุญุงูู. </blockquote><br>  ุชูุงูู ุงูุฃุดุฎุงุต ูุบุฉ C / C ++ ุฃุซูุงุก ุงูุนูู ุนูู ุงูุฅุตุฏุงุฑ ุงูุฃูู ูู ุฎุงุฏููู ูุฃุนุงุฏูุง ูุชุงุจุฉ ุงูุฎุงุฏู ุจูุบุฉ ุฃุฎุฑู. <br><br>  ุนุฑุถ ููุชุงุฒ ูููููุฉ ุฑูุถ ุงููุทูุฑูู ุงุณุชุฎุฏุงู C ++ ูู ุงูุนุงูู ุงููุงูุนู ุ ุฎุงุฑุฌ ูุฌุชูุน C ++ ุงููุฑูุญ ุ ุญุชู ุนูุฏูุง ูููู ุงุณุชุฎุฏุงู C ++ ููุงุณุจูุง ููุจุฑุฑูุง. <br><br><h2 style=";text-align:right;direction:rtl">  ููู ููุงุฐุงุ </h2><br>  ููู ููุงุฐุง ุ ุฅุฐุง ููู ูุฑุงุฑูุง ูุชูุฑุงุฑูุง ุฃู "ุชุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท" ูู ูุบุฉ C ++ ุฃูุฑ ุดุฑูุฑ ุ ูุณุชูุฑ ุงููุงุณ ูู ุงุณุชุฎุฏุงูู ุจูุซุงุจุฑุฉ ุฌุฏูุฑุฉ ุจุชุทุจูู ุฃูุถูุ  ูุง ูู ุงูููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฌููุ </li><li style=";text-align:right;direction:rtl">  ุงููุณูุ </li><li style=";text-align:right;direction:rtl">  ูุชูุงุฒูุฉ NIHุ </li></ul><br>  ุจุนุฏ ูู ุดูุก ุ ููุณ ููุงู ุณูู ููุฌ ูุงุญุฏ ุชู ุงุฎุชุจุงุฑู ุนุจุฑ ุงูุฒูู ูุงูุนุฏูุฏ ูู ุงููุดุงุฑูุน.  ุนูู ูุฌู ุงูุฎุตูุต: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฌูุงุช ุงููุงุนูุฉ </li><li style=";text-align:right;direction:rtl">  ุชูุตูู ุงูุนูููุงุช ุงููุชุณูุณูุฉ (CSP) </li><li style=";text-align:right;direction:rtl">  ุงูููุงู (ุบูุฑ ูุชุฒุงููุฉ ุ ูุนูุฏ ุ ูุณุชูุจููุฉ ุ ...) </li><li style=";text-align:right;direction:rtl">  ุชุฏููุงุช ุงูุจูุงูุงุช </li><li style=";text-align:right;direction:rtl">  ุงูุจุฑูุฌุฉ ุงูุชูุงุนููุฉ </li><li style=";text-align:right;direction:rtl">  ... </li></ul><br>  ููุฃูู ุฃู ูููู ุงูุณุจุจ ุงูุฑุฆูุณู ูู ุงูุฌูู.  ูู ุบูุฑ ุงููุญุชูู ุฃู ูุชู ุชุฏุฑูุณ ูุฐุง ูู ุงูุฌุงูุนุงุช.  ูุฐุง ูุฅู ุงููุญุชุฑููู ุงูุดุจุงุจ ุ ุงูุฐูู ูุฏุฎููู ุฅูู ุงููููุฉ ุ ูุณุชุฎุฏููู ุงููููู ุงูุฐู ูุนุฑูููู ุจุงููุนู.  ูุฅุฐุง ูู ูุชู ุจุนุฏ ุฐูู ุชุฌุฏูุฏ ูุฎุฒู ุงููุนุฑูุฉ ุ ูุฅู ุงูุฃุดุฎุงุต ูุณุชูุฑูู ูู ุงุณุชุฎุฏุงู ุงูุฎููุท ุงูุนุงุฑูุฉ ูุงููุฎุชููุงุช ููุชุบูุฑุงุช ุงูุญุงูุฉ. <br><br>  ุณูุชุญุฏุซ ุงูููู ุนู ุงูุฃุณุงููุจ ุงูุซูุงุซุฉ ุงูุฃููู ูู ูุฐู ุงููุงุฆูุฉ.  ููู ูุชุญุฏุซ ุจุดูู ุชุฌุฑูุฏู ุ ูููู ุนูู ุณุจูู ุงููุซุงู ููููุฉ ูุงุญุฏุฉ ุจุณูุทุฉ.  ุฏุนูุง ูุญุงูู ุฅุธูุงุฑ ููู ุณูุจุฏู ุงูุฑูุฒ ุงูุฐู ูุญู ูุฐู ุงููุดููุฉ ุจุงุณุชุฎุฏุงู ูููุงุช ููููุงุช ุงููุงุนููุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงุณุชุฎุฏุงู ุงูููุงู. <br><br><h1 style=";text-align:right;direction:rtl">  ุชุญุฏู ุงูุชุฌุงุฑุจ </h1><br>  ูุทููุจ ูุชูููุฐ ุฎุงุฏู HTTP ุงูุฐู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุจูู ุงูุทูุจ (ูุนุฑู ุงูุตูุฑุฉ ุ ูุนุฑู ุงููุณุชุฎุฏู) ุ </li><li style=";text-align:right;direction:rtl">  ูุนุทู ุตูุฑุฉ ูุน "ุนูุงูุงุช ูุงุฆูุฉ" ูุฑูุฏุฉ ููุฐุง ุงููุณุชุฎุฏู. </li></ul><br>  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏ ุชุทูุจ ุจุนุถ ุงูุฎุฏูุงุช ุงููุฏููุนุฉ ูุซู ูุฐุง ุงูุฎุงุฏู ุชูุฒูุน ุงููุญุชูู ุญุณุจ ุงูุงุดุชุฑุงู.  ุฅุฐุง ูุงูุช ุงูุตูุฑุฉ ูู ูุฐู ุงูุฎุฏูุฉ "ุชูุจุซู" ูู ููุงู ูุง ุ ูุนูุฏูุง "ุจุงูุนูุงูุงุช ุงููุงุฆูุฉ" ุ ุณูููู ูู ุงููููู ููู ูู ูุญุชุงุฌ ุฅูู "ุญุฌุจ ุงูุฃูุณุฌูู". <br><br>  ุงููููุฉ ูุฌุฑุฏุฉ ุ ููุฏ ุตูุบุช ุฎุตูุตูุง ููุฐุง ุงูุชูุฑูุฑ ุชุญุช ุชุฃุซูุฑ ูุดุฑูุนูุง ุงูุชุฌุฑูุจู ุงูุฑูุจูุงู (ููุฏ ุชุญุฏุซูุง ุจุงููุนู ุนู ุฐูู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑูู 1</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑูู 2</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑูู 3</a> ). <br><br>  ุณูุนูู ุฎุงุฏู HTTP ูุฐุง ุนูู ุงููุญู ุงูุชุงูู: <br><table border="1" style=";text-align:right;direction:rtl"><tbody><tr><td><img src="https://habrastorage.org/webt/bq/qo/zk/bqqozkulonydk1ccnzog-kzv610.jpeg"></td></tr></tbody></table><br>  ุจุนุฏ ุชููู ุทูุจ ูู ุงูุนููู ุ ููุชูู ุฅูู ุฎุฏูุชูู ุฎุงุฑุฌูุชูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฃูู ูุนูุฏ ููุง ูุนูููุงุช ุงููุณุชุฎุฏู.  ุจูุง ูู ุฐูู ูู ููุงู ูุญุตู ุนูู ุตูุฑุฉ "ุงูุนูุงูุงุช ุงููุงุฆูุฉ" ุ </li><li style=";text-align:right;direction:rtl">  ุงูุซุงููุฉ ุชุนูุฏ ููุง ุงูุตูุฑุฉ ุงูุฃุตููุฉ </li></ul><br>  ุชุนูู ูุงุชุงู ุงูุฎุฏูุชุงู ุจุดูู ูุณุชูู ููููููุง ุงููุตูู ุฅููููุง ูู ููุช ูุงุญุฏ. <br><br>  ูุธุฑูุง ูุฃูู ูููู ุฅุฌุฑุงุก ูุนุงูุฌุฉ ุงูุทูุจุงุช ุจุดูู ูุณุชูู ุนู ุจุนุถูุง ุงูุจุนุถ ุ ูุญุชู ุจุนุถ ุงูุฅุฌุฑุงุกุงุช ุนูุฏ ูุนุงูุฌุฉ ุทูุจ ูุงุญุฏ ูููู ุฃู ูุชู ุจุงูุชูุงุฒู ุ ูุฅู ุงุณุชุฎุฏุงู ุงููุฏุฑุฉ ุงูุชูุงูุณูุฉ ููุญู ุจููุณู.  ุฅู ุฃุจุณุท ุดูุก ูุชุจุงุฏุฑ ุฅูู ุงูุฐูู ูู ุฅูุดุงุก ุณูุณูุฉ ุฑุณุงุฆู ูููุตูุฉ ููู ุทูุจ ูุงุฑุฏ: <br><table border="1" style=";text-align:right;direction:rtl"><tbody><tr><td><img src="https://habrastorage.org/webt/g0/f9/ps/g0f9ps3vmq-osh-hy0i71ut_kfw.jpeg"></td></tr></tbody></table><br>  ููู ูููุฐุฌ one-request = ูููุฐุฌ ุณูุฑ ุนูู ูุงุญุฏ ูููู ููุบุงูุฉ ููุง ูุชุทูุฑ ุจุดูู ุฌูุฏ.  ูุญู ูุง ูุญุชุงุฌ ูุฐุง. <br><br>  ุญุชู ูู ุงูุชุฑุจูุง ูู ุนุฏุฏ ุชุฏููุงุช ุงูุนูู ุจุดูู ูููุฏุฑ ุ ูุง ุฒููุง ุจุญุงุฌุฉ ุฅูู ุนุฏุฏ ุตุบูุฑ ูููู: <br><table border="1" style=";text-align:right;direction:rtl"><tbody><tr><td><img src="https://habrastorage.org/webt/ve/yl/vv/veylvvoaisqxod1-0nsp4vhh80e.jpeg"></td></tr></tbody></table><br>  ููุง ูุญุชุงุฌ ุฅูู ุฏูู ูููุตู ูุชููู ุทูุจุงุช HTTP ุงููุงุฑุฏุฉ ุ ูุฏูู ูููุตู ูุทูุจุงุช HTTP ุงูุตุงุฏุฑุฉ ุงูุฎุงุตุฉ ุจูุง ุ ูุฏูู ูููุตู ูุชูุณูู ูุนุงูุฌุฉ ุทูุจุงุช HTTP ุงููุณุชููุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ูุฌููุนุฉ ูู ุชุฏููุงุช ุงูุนูู ูุฃุฏุงุก ุงูุนูููุงุช ุนูู ุงูุตูุฑ (ูุธุฑูุง ูุฃู ุงููุนุงูุฌุฉ ุนูู ุงูุตูุฑ ูุชูุงุฒูุฉ ุจุดูู ุฌูุฏ ุ ูุฅู ูุนุงูุฌุฉ ุตูุฑุฉ ุนู ุทุฑูู ุนุฏุฉ ุชุฏููุงุช ูู ููุช ูุงุญุฏ ุณูููู ููุช ุงููุนุงูุฌุฉ). <br><br>  ูุฐูู ุ ูุฏููุง ูู ูุนุงูุฌุฉ ุนุฏุฏ ูุจูุฑ ูู ุงูุทูุจุงุช ุงููุงุฑุฏุฉ ุงููุชุฒุงููุฉ ุนูู ุนุฏุฏ ุตุบูุฑ ูู ุณูุงุณู ุงูุนูู.  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ููููุฉ ุชุญููู ุฐูู ูู ุฎูุงู ุงูููุงูุฌ ุงููุฎุชููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุจุนุถ ุงูุชูุงุฒูุงุช ุงููุงูุฉ </h2><br>  ูุจู ุงูุงูุชูุงู ุฅูู ุงููุตุฉ ุงูุฑุฆูุณูุฉ ูุฃูุซูุฉ ุฑูุฒ ุงูุชุญููู ุ ูุฌุจ ุนูู ุจุนุถ ุงูููุงุญุธุงุช. <br><br>  ุฃููุงู ุ ูุง ุชุฑุชุจุท ุฌููุน ุงูุฃูุซูุฉ ุงูุชุงููุฉ ุจุฃู ุฅุทุงุฑ ุฃู ููุชุจุฉ ูุนููุฉ.  ุฃู ุชุทุงุจูุงุช ูู ุฃุณูุงุก ููุงููุงุช API ุชููู ุนุดูุงุฆูุฉ ูุบูุฑ ููุตูุฏุฉ. <br><br>  ุซุงูููุง ุ ูุง ููุฌุฏ ุฎุทุฃ ูู ุงูุชุนุงูู ูุน ุงูุฃูุซูุฉ ุฃุฏูุงู.  ูุชู ุฐูู ุนู ุนูุฏ ุ ุจุญูุซ ุชููู ุงูุดุฑุงุฆุญ ูุถุบูุทุฉ ููุฑุฆูุฉ.  ูุฃูุถูุง ูุชูุงุณุจ ุงููุงุฏุฉ ูู ุงูููุช ุงููุฎุตุต ููุชูุฑูุฑ. <br><br>  ุซุงูุซูุง ุ ุชุณุชุฎุฏู ุงูุฃูุซูุฉ ููุงููุง ูุนูููุง ุชูููุฐููุง ูุญุชูู ุนูู ูุนูููุงุช ุญูู ูุง ูู ููุฌูุฏ ุฏุงุฎู ุงูุจุฑูุงูุฌ.  ูุนุชูุฏ ููุก ูุฐุง ุงูููุงู ุนูู ุงูููุฌ.  ูู ุญุงูุฉ ุงููุงุนููู ุ ุณูููู ููุต ุงูุชูููุฐ - ุฑูุงุจุท ุฅูู ุฌูุงุช ูุงุนูุฉ ุฃุฎุฑู.  ูู ุญุงูุฉ CSP ุ ูู excontextContext ุ ุณุชููู ููุงู ูููุงุช CSP ููุชูุงุตู ูุน ุนูููุงุช CSP ุงูุฃุฎุฑู.  ุฅูุฎ. <br><br><h1 style=";text-align:right;direction:rtl">  ุงูููุฌ ุฑูู 1: ุงููุงุนููู </h1><br><h2 style=";text-align:right;direction:rtl">  ูููุฐุฌ ุงูููุซููู ุจุงุฎุชุตุงุฑ </h2><br>  ุนูุฏ ุงุณุชุฎุฏุงู ูููุฐุฌ ุงูููุซููู ุ ุณูุชู ุจูุงุก ุงูุญู ูู ูุงุฆูุงุช ูููุตูุฉ ููุฌูุงุช ุงููุงุนูุฉ ุ ูู ูููุง ูู ุญุงูุชู ุงูุฎุงุตุฉ ููุง ูููู ุงููุตูู ุฅูู ูุฐู ุงูุญุงูุฉ ูุฃู ุดุฎุต ุจุงุณุชุซูุงุก ุงููุงุนู ููุณู. <br><br>  ูุชูุงุนู ุงูููุซููู ูุน ุจุนุถูู ุงูุจุนุถ ูู ุฎูุงู ุงูุฑุณุงุฆู ุบูุฑ ุงููุชุฒุงููุฉ.  ูู ููุซู ูุฏูู ุตูุฏูู ุจุฑูุฏ ูุฑูุฏ ุฎุงุต ุจู (ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู) ุ ุญูุซ ูุชู ุญูุธ ุงูุฑุณุงุฆู ุงููุฑุณูุฉ ุฅูู ุงูููุซู ููู ุฃูู ูุชู ุงุณุชุฑุฏุงุฏูุง ููุฒูุฏ ูู ุงููุนุงูุฌุฉ. <br><br>  ูุนูู ุงูููุซููู ุนูู ูุจุงุฏุฆ ุจุณูุทุฉ ููุบุงูุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุงุนู ูู ููุงู ูู ุณููู ุ </li><li style=";text-align:right;direction:rtl">  ุงูุฌูุงุช ุงููุงุนูุฉ ุงูุฑุฏ ุนูู ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุจุนุฏ ุงุณุชูุงู ุงูุฑุณุงูุฉ ุ ูููู ููููุซู: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฑุณุงู ุจุนุถ ุงูุฑุณุงุฆู (ุงูููุงุฆูุฉ) ุฅูู ุฌูุงุช ูุงุนูุฉ ุฃุฎุฑู ุ </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุนุฏุฏ (ููุงุฆู) ูู ุงูุฌูุงุช ุงููุงุนูุฉ ุงูุฌุฏูุฏุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุชุญุฏูุฏ ุณููู ุฌุฏูุฏ ููุนุงูุฌุฉ ุงูุฑุณุงุฆู ุงููุงุญูุฉ. </li></ul></li></ul><br>  ุฏุงุฎู ุงูุชุทุจูู ุ ูููู ุชูููุฐ ุงูููุซููู ุจุทุฑู ูุฎุชููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ุชูุซูู ูู ููุซู ูุชูุงุฑ ูููุตู ููุธุงู ุงูุชุดุบูู (ูุญุฏุซ ูุฐุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ููุชุจุฉ C :: Just :: Thread Pro Actor Edition) ุ </li><li style=";text-align:right;direction:rtl">  ูููู ุชูุซูู ูู ููุซู ุจุงุนุชุจุงุฑู ุฑูุชูู ููุฏุณ ุ </li><li style=";text-align:right;direction:rtl">  ูููู ุชูุซูู ูู ููุซู ููุงุฆู ูููู ููู ุดุฎุต ูุง ุจุงุณุชุฏุนุงุก ุทุฑู ุฑุฏ ุงูุงุชุตุงู. </li></ul><br>  ูู ูุฑุงุฑูุง ุ ุณูู ูุณุชุฎุฏู ุงูุฌูุงุช ุงููุงุนูุฉ ูู ุดูู ูุงุฆูุงุช ูุน ุงูุงุณุชุฑุฌุงุนุงุช ุ ููุชุฑู coroutines ููููุฌ CSP. <br><br><h2 style=";text-align:right;direction:rtl">  ูุฎุทุท ุงููุฑุงุฑ ุนูู ุฃุณุงุณ ูููุฐุฌ ุงูููุซููู </h2><br>  ุจูุงุกู ุนูู ุงูุฌูุงุช ุงููุงุนูุฉ ุ ุณูุจุฏู ุงููุฎุทุท ุงูุนุงู ูุญู ูุดููุชูุง ููุง ููู: <br><table border="1" style=";text-align:right;direction:rtl"><tbody><tr><td><img src="https://habrastorage.org/webt/di/f7/pn/dif7pngijjde8aizja_skqy58oo.jpeg"></td></tr></tbody></table><br>  ุณูููู ูุฏููุง ููุซููู ุชู ุฅูุดุงุคูู ูู ุจุฏุงูุฉ ุฎุงุฏู HTTP ููู ููุฌูุฏูู ุทูุงู ุงูููุช ุฃุซูุงุก ุนูู ุฎุงุฏู HTTP.  ูุคูุงุก ูู ุงูุฌูุงุช ุงููุงุนูุฉ ูุซู: HttpSrv ู UserChecker ู ImageDownloader ู ImageMixer. <br><br>  ุนูุฏ ุงุณุชูุงู ุทูุจ HTTP ุฌุฏูุฏ ูุงุฑุฏ ุ ูููู ุจุฅูุดุงุก ูุซูู ุฌุฏูุฏ ูููุซู RequestHandler ุ ูุงูุฐู ุณูุชู ุชุฏููุฑู ุจุนุฏ ุฅุตุฏุงุฑ ุฑุฏ ุนูู ุทูุจ HTTP ุงููุงุฑุฏ. <br><br><h2 style=";text-align:right;direction:rtl">  RequestHandler ุฑูุฒ ุงูููุซู </h2><br>  ูููู ุฃู ูุจุฏู ุชูููุฐ ุนุงูู request_handler ุ ุงูุฐู ููุณู ูุนุงูุฌุฉ ุทูุจ HTTP ุงููุงุฑุฏ ููุง ููู: <br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">request_handler</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">final</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> some_basic_type { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> execution_context context_; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> request request_; optional&lt;user_info&gt; user_info_; optional&lt;image_loaded&gt; image_; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_user_info</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(user_info info)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_image_loaded</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(image_loaded image)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_mixed_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mixed_image image)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send_mix_images_request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; ... <span class="hljs-comment"><span class="hljs-comment">//     . }; void request_handler::on_start() { send(context_.user_checker(), check_user{request_.user_id(), self()}); send(context_.image_downloader(), download_image{request_.image_id(), self()}); } void request_handler::on_user_info(user_info info) { user_info_ = std::move(info); if(image_) send_mix_images_request(); } void request_handler::on_image_loaded(image_loaded image) { image_ = std::move(image); if(user_info_) send_mix_images_request(); } void request_handler::send_mix_images_request() { send(context_.image_mixer(), mix_images{user_info-&gt;watermark_image(), *image_, self()}); } void request_handler::on_mixed_image(mixed_image image) { send(context_.http_srv(), reply{..., std::move(image), ...}); }</span></span></code> </pre> <br>  ุฏุนููุง ุชุญููู ูุฐุง ุงูุฑูุฒ. <br><br>  ูุฏููุง ูุฆุฉ ูู ุงูุณูุงุช ุงูุชู ูุฎุฒููุง ุฃู ุณูููู ุจุชุฎุฒูู ูุง ูุญุชุงุฌู ููุนุงูุฌุฉ ุงูุทูุจ.  ุฃูุถุง ูู ูุฐู ุงููุฆุฉ ููุงู ูุฌููุนุฉ ูู ุงูุงุณุชุฑุฌุงุนุงุช ุงูุชู ุณูุชู ุงุณุชุฏุนุงุคูุง ูู ููุช ุฃู ุขุฎุฑ. <br><br>  ุฃููุงู ุ ุนูุฏูุง ูุชู ุฅูุดุงุก ููุซู ุ ูุชู ุงุณุชุฏุนุงุก ุฑุฏ ุงูุงุชุตุงู on_start ().  ูุฑุณู ููู ุฑุณุงูุชูู ุฅูู ููุซููู ุขุฎุฑูู.  ุฃููุงู ุ ูุฐู ุฑุณุงูุฉ check_user ููุชุญูู ูู ูุนุฑู ุงูุนููู.  ุซุงูููุง ุ ูุฐู ุฑุณุงูุฉ download_image ูุชูุฒูู ุงูุตูุฑุฉ ุงูุฃุตููุฉ. <br><br>  ูู ูู ุฑุณุงูุฉ ูู ุงูุฑุณุงุฆู ุงููุฑุณูุฉ ุ ูููู ุจุชูุฑูุฑ ุฑุงุจุท ูุฃููุณูุง (ุชุคุฏู ุทุฑููุฉ ุงุณุชุฏุนุงุก ุงูุฐุงุช () ุฅูู ุฅุฑุฌุงุน ุฑุงุจุท ุฅูู ุงููุงุนู ุงูุฐู ุชู ุงุณุชุฏุนุงุก ุงูุฐุงุช () ูู)).  ูุฐุง ุถุฑูุฑู ุญุชู ูุชููู ููุซููุง ูู ุฅุฑุณุงู ุฑุณุงูุฉ ุงุณุชุฌุงุจุฉ.  ุฅุฐุง ูู ูุฑุณู ุฑุงุจุทูุง ุฅูู ููุซููุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุฑุณุงูุฉ check_user ุ ููู ูุนุฑู ููุซู UserChecker ุฅูู ูู ุณูุชู ุฅุฑุณุงู ูุนูููุงุช ุงููุณุชุฎุฏู ุฅููู. <br><br>  ุนูุฏูุง ูุชู ุฅุฑุณุงู ุฑุณุงูุฉ user_info ุชุชุถูู ูุนูููุงุช ุงููุณุชุฎุฏู ุฅูููุง ุงุณุชุฌุงุจุฉ ุ ูุชู ุงุณุชุฏุนุงุก ุฑุฏ ุงูุงุชุตุงู on_user_info ().  ูุนูุฏูุง ูุชู ุฅุฑุณุงู ุฑุณุงูุฉ image_loaded ุฅูููุง ุ ูุชู ุงุณุชุฏุนุงุก ุฑุฏ ุงูุงุชุตุงู on_image_loaded () ุนูู ููุซููุง.  ูุงูุขู ุฏุงุฎู ูุงุชูู ุงูุงุณุชุฏุนุงุกุงุช ูุฑู ููุฒุฉ ูุชุฃุตูุฉ ูู ูููุฐุฌ ุงูููุซููู: ูุง ูุนุฑู ุจุงูุถุจุท ุงูุชุฑุชูุจ ุงูุฐู ุณูุชููู ููู ุฑุณุงุฆู ุงูุงุณุชุฌุงุจุฉ.  ูุฐูู ุ ูุฌุจ ุฃู ููุชุจ ุฑูุฒูุง ุจุญูุซ ูุง ูุนุชูุฏ ุนูู ุชุฑุชูุจ ูุตูู ุงูุฑุณุงุฆู.  ูุฐูู ุ ูู ูู ูู ุงููุนุงูุฌุงุช ุ ูููู ุฃููุงู ุจุชุฎุฒูู ุงููุนูููุงุช ุงููุณุชููุฉ ูู ุงูุณูุฉ ุงูููุงุจูุฉ ุ ุซู ูุชุญูู ููุง ุฅุฐุง ููุง ูุฏ ุฌูุนูุง ุจุงููุนู ุฌููุน ุงููุนูููุงุช ุงูุชู ูุญุชุงุฌูุงุ  ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููููููุง ุงููุถู ูุฏููุง.  ุฅุฐุง ูู ููู ูุฐูู ุ ูุฅููุง ุณููุชุธุฑ ุฃูุซุฑ. <br><br>  ูุฐุง ูู ุณุจุจ ูุฌูุฏ ons ูู on_user_info () ู on_image_loaded () ุฅุฐุง ุชู ุงุณุชุฏุนุงุก send_mix_images_request (). <br><br><blockquote style=";text-align:right;direction:rtl">  ูู ุญูุซ ุงููุจุฏุฃ ุ ูู ุชุทุจููุงุช ูููุฐุฌ ุงูููุซููู ุ ูุฏ ุชููู ููุงู ุขููุงุช ูุซู ุงูุงุณุชูุงู ุงูุงูุชูุงุฆู ูู ุฅุฑูุงูุบ ุฃู ุงูุชุฎุฒูู ูู ุนูุง ุ ูุงูุชู ูู ุฎูุงููุง ููููู ูุนุงูุฌุฉ ุชุฑุชูุจ ูุนุงูุฌุฉ ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ุ ููููุง ูู ูุชุญุฏุซ ุนู ูุฐุง ุงูููู ุ ุญุชู ูุง ูุชุนูู ูู ุชูุงุตูู ุนูููุงุช ุงูุชูููุฐ ุงููุฎุชููุฉ ูููููุฐุฌ ุงููุงุนููู. </blockquote><br>  ูุฐูู ุ ุฅุฐุง ุชู ุชููู ุฌููุน ุงููุนูููุงุช ุงูุชู ูุญุชุงุฌูุง ูู UserChecker ู ImageDownloader ุ ูุณูุชู ุงุณุชุฏุนุงุก ุทุฑููุฉ send_mix_images_request () ุ ุญูุซ ูุชู ุฅุฑุณุงู ุฑุณุงูุฉ mix_images ุฅูู ููุซู ImageMixer.  ูุชู ุงุณุชุฏุนุงุก ุฑุฏ ุงูุงุชุตุงู on_mixed_image () ุนูุฏูุง ูุชููู ุฑุณุงูุฉ ุงุณุชุฌุงุจุฉ ูุน ุงูุตูุฑุฉ ุงููุงุชุฌุฉ.  ููุง ูุฑุณู ูุฐู ุงูุตูุฑุฉ ุฅูู ููุซู HttpSrv ูููุชุธุฑ ุญุชู ูุดูู HttpSrv ุงุณุชุฌุงุจุฉ HTTP ููุฏูุฑ RequestHandler ุงูุฐู ุฃุตุจุญ ุบูุฑ ุถุฑูุฑู (ุนูู ุงูุฑุบู ูู ุฃูู ุ ูู ุญูุซ ุงููุจุฏุฃ ุ ูุง ููุฌุฏ ุดูุก ูููุน ุงูููุซู RequestHandler ูู ุงูุชุฏููุฑ ุงูุฐุงุชู ูู ุฑุฏ ุงูุงุชุตุงู on_mixed_image ()). <br><br>  ูุฐุง ูู ุดุฆ. <br><br>  ุชุจูู ุฃู ุชูููุฐ ุงูููุซู RequestHandler ุถุฎู ููุบุงูุฉ.  ูููู ูุฐุง ูุฑุฌุน ุฅูู ุญูููุฉ ุฃููุง ููุง ุจุญุงุฌุฉ ุฅูู ูุตู ูุตู ุฏุฑุงุณู ุจุณูุงุช ูุงุณุชุฑุฌุงุนุงุช ุ ุซู ุชูููุฐ ุนูููุงุช ุงูุงุณุชุฑุฌุงุนุงุช ุฃูุถูุง.  ููู ููุทู ุนูู RequestHandler ุชุงูู ููุบุงูุฉ ุ ููููู ุ ุนูู ุงูุฑุบู ูู ูููุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ูุฆุฉ request_handler ุ ุฃูุฑ ุณูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูููุฒุงุช ุงููุชุฃุตูุฉ ูู ุงูููุซููู </h2><br>  ุงูุขู ูููููุง ุฃู ูููู ุจุถุน ูููุงุช ุญูู ููุฒุงุช ูููุฐุฌ ุงูููุซููู. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูููุงุนูุงุช </h3><br>  ููุงุนุฏุฉ ุ ูุณุชุฌูุจ ุงูููุซููู ููุท ููุฑุณุงุฆู ุงููุงุฑุฏุฉ.  ููุงู ุฑุณุงุฆู - ูุนุงูุฌูุง ุงูููุซู.  ูุง ุฑุณุงุฆู - ุงููุงุนู ูุง ููุนู ุดูุฆุง. <br><br>  ูููุทุจู ูุฐุง ุจุดูู ุฎุงุต ุนูู ุนูููุงุช ุชูููุฐ ูููุฐุฌ ุงูููุซููู ุญูุซ ูุชู ุชูุซูู ุงูููุซููู ููุงุฆูุงุช ุฐุงุช ุนูููุงุช ุฑุฏ.  ูููู ุงูุฅุทุงุฑ ุจุณุญุจ ุฑุฏ ุงุชุตุงู ุงูููุซู ูุฅุฐุง ูู ููู ุงูููุซู ุจุฅุฑุฌุงุน ุงูุชุญูู ูู ุฑุฏ ุงูุงุชุตุงู ุ ููู ูุชููู ุงูุฅุทุงุฑ ูู ุฎุฏูุฉ ุงูููุซููู ุงูุขุฎุฑูู ูู ููุณ ุงูุณูุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุชู ุชุญููู ุงูููุซููู ุจุดูู ุฒุงุฆุฏ </h3><br>  ุจุงููุณุจุฉ ููููุซููู ุ ูููููุง ุจุณูููุฉ ุฃู ูุฌุนู ุงูููุซู - ุงูููุชุฌ ูููุฏ ุฑุณุงุฆู ูููุณุชููู - ุงููุงุนู ุจูุชูุฑุฉ ุฃุณุฑุน ุจูุซูุฑ ูู ูุฏุฑุฉ ุงูููุซู - ุงููุณุชููู ุนูู ูุนุงูุฌุชูุง. <br><br>  ุณูุคุฏู ุฐูู ุฅูู ุญูููุฉ ุฃู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ูููุณุชููู - ุงููุงุนู ุณุชููู ุจุงุณุชูุฑุงุฑ.  ููู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุ ุฃู  ุฒูุงุฏุฉ ุงุณุชููุงู ุงูุฐุงูุฑุฉ ูู ุงูุชุทุจูู ุณูููู ูู ุณุฑุนุฉ ุงูุชุทุจูู.  ุณูุคุฏู ูุฐุง ุฅูู ููู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ุจุดูู ุฃุณุฑุน ุ ููุชูุฌุฉ ูุฐูู ุ ูุฏ ูุชุฏููุฑ ุงูุชุทุจูู ุฅูู ุนุฏู ุงูุชุดุบูู ุงููุงูู. <br><br>  ูู ูุฐุง ูุชูุฌุฉ ูุจุงุดุฑุฉ ููุชูุงุนู ุบูุฑ ุงููุชุฒุงูู ููููุซููู.  ูุฃู ุนูููุฉ ุงูุฅุฑุณุงู ุจุดูู ุนุงู ูุง ุชููุน.  ูุฌุนูู ูู ุงูุญุฌุจ ููุณ ุจุงูุฃูุฑ ุงูุณูู ุ ูุฃูู  ูููู ููููุซู ุฃู ูุฑุณู ุฅูู ููุณู.  ูุฅุฐุง ูุงูุช ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูููุซู ููุชูุฆุฉ ุ ูุนูุฏ ุงูุฅุฑุณุงู ุฅูู ููุณู ุ ุณูุชู ุญุธุฑ ุงูููุซู ููุฐุง ุณูููู ุนููู. <br><br>  ูุฐูู ุนูุฏ ุงูุนูู ูุน ุงูุฌูุงุช ุงููุงุนูุฉ ุ ูุฌุจ ุฅููุงุก ุงูุชูุงู ุฌุฏู ููุดููุฉ ุงูุชุญููู ุงูุฒุงุฆุฏ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุนุฏูุฏ ูู ุงูููุซููู ููุณูุง ุฏุงุฆูุง ุงูุญู. </h3><br>  ููุงุนุฏุฉ ุนุงูุฉ ุ ุงูุฌูุงุช ุงููุงุนูุฉ ูู ููุงูุงุช ุฎูููุฉ ุงููุฒู ูููุงู ุฅุบุฑุงุก ูุฅูุดุงุฆูุง ูู ุชุทุจูููุง ุจุฃุนุฏุงุฏ ูุจูุฑุฉ.  ููููู ุฅูุดุงุก ุนุดุฑุฉ ุขูุงู ููุซู ููุงุฆุฉ ุฃูู ูููููู.  ูุญุชู ูุงุฆุฉ ููููู ููุซู ุ ุฅุฐุง ุณูุญ ูู ุงูุญุฏูุฏ. <br><br>  ููู ุงููุดููุฉ ุชููู ูู ุตุนูุจุฉ ุชุชุจุน ุณููู ุนุฏุฏ ูุจูุฑ ุฌุฏูุง ูู ุงูููุซููู.  ุฃู  ูุฏ ูููู ูุฏูู ุจุนุถ ุงูุฌูุงุช ุงููุงุนูุฉ ุงูุชู ุชุนูู ุจุดูู ุตุญูุญ ุจุดูู ูุงุถุญ.  ุจุนุถ ุงูููุซููู ุงูุฐูู ุฅูุง ูุนูููู ุจุดูู ุบูุฑ ุตุญูุญ ุจุดูู ูุงุถุญ ุฃู ูุง ูุนูููู ุนูู ุงูุฅุทูุงู ุ ูุฃูุช ุชุนุฑู ุจุงูุชุฃููุฏ.  ูููู ูุฏ ูููู ููุงู ุนุฏุฏ ูุจูุฑ ูู ุงูููุซููู ุงูุฐูู ูุง ุชุนุฑู ุดูุฆูุง ุจุดุฃููู: ูู ูุนูููู ุนูู ุงูุฅุทูุงู ุ ูู ูุนูููู ุจุดูู ุตุญูุญ ุฃู ุบูุฑ ุตุญูุญ.  ููู ุฐูู ูุฃูู ุนูุฏูุง ูููู ูุฏูู ูุงุฆุฉ ููููู ููุงู ูุณุชูู ูุน ููุทู ุณูููู ุงูุฎุงุต ูู ุจุฑูุงูุฌู ุ ูุฅู ูุฑุงูุจุฉ ูุฐุง ุฃูุฑ ุตุนุจ ููุบุงูุฉ ุนูู ุงูุฌููุน. <br><br>  ูุฐูู ุ ูุฏ ูุชุจูู ุฃูู ุนูุฏ ุฅูุดุงุก ุนุฏุฏ ูุจูุฑ ูู ุงูููุซููู ูู ุงูุชุทุจูู ุ ูุฅููุง ูุง ูุญู ูุดููุชูุง ุงููุทุจูุฉ ุ ูููู ููุงุฌู ูุดููุฉ ุฃุฎุฑู.  ูุจุงูุชุงูู ุ ูุฏ ูููู ูู ุงููููุฏ ุจุงููุณุจุฉ ููุง ุงูุชุฎูู ุนู ุงูุฌูุงุช ุงููุงุนูุฉ ุงูุจุณูุทุฉ ุงูุชู ุชุญู ูููุฉ ูุงุญุฏุฉ ุ ูุตุงูุญ ุฌูุงุช ุฃูุซุฑ ุชุนููุฏูุง ูุซูููุง ุชุคุฏู ุงูุนุฏูุฏ ูู ุงูููุงู.  ูููู ุจุนุฏ ุฐูู ุณูููู ููุงู ุนุฏุฏ ุฃูู ูู ุงูุฌูุงุช ุงููุงุนูุฉ "ุงูุซูููุฉ" ูู ุงูุชุทุจูู ูุณูููู ูู ุงูุฃุณูู ุนูููุง ูุชุงุจุนุชูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูู ุฃูู ููุธุฑ ุ ููุงุฐุง ุชุฃุฎุฐุ </h2><br>  ุฅุฐุง ุฃุฑุงุฏ ุดุฎุต ูุง ูุญุงููุฉ ุงูุนูู ูุน ุงูููุซููู ูู C ++ ุ ููุง ูุงุฆุฏุฉ ูู ุจูุงุก ุฏุฑุงุฌุงุชู ุงูุฎุงุตุฉ ุ ูููุงู ุงูุนุฏูุฏ ูู ุงูุญููู ุงูุฌุงูุฒุฉ ุ ุนูู ูุฌู ุงูุฎุตูุต: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SObjectizer</a> (ุฏุนู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุงููุญููุฉ!) </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุทุงุฑ ุนูู C ++ (CAF)</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">QP / C ++</a> </li></ul><br>  ูุฐู ุงูุฎูุงุฑุงุช ุงูุซูุงุซุฉ ุญูุฉ ููุชุทูุฑุฉ ููุชุนุฏุฏุฉ ุงูููุตุงุช ูููุซูุฉ.  ููููู ุฃูุถูุง ุชุฌุฑุจุชูุง ูุฌุงููุง.  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช ุจุฏุฑุฌุงุช ูุชูุงูุชุฉ ูู [ูุง] ูุถุงุฑุฉ ูููู ุงูุนุซูุฑ ุนูููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุงููุงุฆูุฉ ุนูู ููููุจูุฏูุง</a> . <br><br>  ุชู ุชุตููู SObjectizer ู CAF ููุงุณุชุฎุฏุงู ูู ุงูููุงู ุนุงููุฉ ุงููุณุชูู ุฅูู ุญุฏ ูุง ุญูุซ ูููู ุชุทุจูู ุงูุงุณุชุซูุงุกุงุช ูุงูุฐุงูุฑุฉ ุงูุฏููุงููููุฉ.  ููุฏ ูููู ุฅุทุงุฑ QP / C ++ ูุญู ุงูุชูุงู ุงููุดุงุฑููู ูู ุงูุชูููุฉ ุงููุฏูุฌุฉ ุ ูุซู  ุชุญุช ูุฐุง ุงูููุงู ูู "ุณุฌู". <br><br><h1 style=";text-align:right;direction:rtl">  ุงูููุฌ ุฑูู 2: CSP (ุชูุตูู ุงูุนูููุงุช ุงููุชุณูุณูุฉ) </h1><br><h2 style=";text-align:right;direction:rtl">  CSP ุนูู ุงูุฃุตุงุจุน ูุจุฏูู ูุงุชุงู </h2><br>  ูููุฐุฌ CSP ูุดุจู ุฅูู ุญุฏ ูุจูุฑ ูููุฐุฌ ุงูููุซููู.  ูููู ุฃูุถูุง ุจุจูุงุก ุญููุง ูู ูุฌููุนุฉ ูู ุงูููุงูุงุช ุงููุณุชููุฉ ุ ูู ูููุง ูู ุญุงูุชู ุงูุฎุงุตุฉ ููุชูุงุนู ูุน ุงูููุงูุงุช ุงูุฃุฎุฑู ููุท ูู ุฎูุงู ุงูุฑุณุงุฆู ุบูุฑ ุงููุชุฒุงููุฉ. <br><br>  ููุท ูุฐู ุงูููุงูุงุช ูู ูููุฐุฌ CSP ุชุณูู "ุงูุนูููุงุช". <br><br>  ุงูุนูููุงุช ูู CSP ุฎูููุฉ ุงููุฒู ุ ุฏูู ุฃู ููุงุฒุงุฉ ูุนูููู ูู ุงูุฏุงุฎู.  ุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ููุงุฒุงุฉ ุดูุก ูุง ุ ูุฅููุง ุจุจุณุงุทุฉ ูุจุฏุฃ ูู ุงูุนุฏูุฏ ูู ุนูููุงุช CSP ุ ุงูุชู ูู ูุนุฏ ููุงู ุฃู ููุงุฒู ูููุง. <br><br>  ุชุชูุงุนู ุนูููุงุช CSP ูุน ุจุนุถูุง ุงูุจุนุถ ุนุจุฑ ุงูุฑุณุงุฆู ุบูุฑ ุงููุชุฒุงููุฉ ุ ูููู ูุง ูุชู ุฅุฑุณุงู ุงูุฑุณุงุฆู ุฅูู ุตูุงุฏูู ุงูุจุฑูุฏ ุ ููุง ูู ุงูุญุงู ูู ูููุฐุฌ ุงูููุซููู ุ ูููู ุฅูู ุงููููุงุช.  ูููู ุงุนุชุจุงุฑ ุงููููุงุช ุจูุซุงุจุฉ ููุงุฆู ุงูุชุธุงุฑ ููุฑุณุงุฆู ุ ุนุงุฏุฉ ูุง ุชููู ุฐุงุช ุญุฌู ุซุงุจุช. <br><br>  ุนูู ุนูุณ ูููุฐุฌ ุงูููุซููู ุ ุญูุซ ูุชู ุฅูุดุงุก ุตูุฏูู ุจุฑูุฏ ุชููุงุฆููุง ููู ููุซู ุ ูุฌุจ ุฅูุดุงุก ุงููููุงุช ูู CSP ุจุดูู ุตุฑูุญ.  ูุฅุฐุง ุงุญุชุฌูุง ุฅูู ุงูุนูููุชูู ููุชูุงุนู ูุน ุจุนุถูุง ุงูุจุนุถ ุ ููุฌุจ ุนูููุง ุฅูุดุงุก ุงูููุงุฉ ุจุฃููุณูุง ุ ุซู ุฅุฎุจุงุฑ ุงูุนูููุฉ ุงูุฃููู "ุณุชูุชุจ ููุง" ุ ููุฌุจ ุฃู ุชููู ุงูุนูููุฉ ุงูุซุงููุฉ: "ุณุชูุฑุฃ ููุง ูู ููุง". <br><br>  ูู ุงูููุช ููุณู ุ ุชุญุชูู ุงููููุงุช ุนูู ุนูููุชูู ุนูู ุงูุฃูู ูุฌุจ ุงุณุชุฏุนุงุคููุง ุจุดูู ุตุฑูุญ.  ุงูุฃูู ูู ุนูููุฉ ุงููุชุงุจุฉ (ุฅุฑุณุงู) ููุชุงุจุฉ ุฑุณุงูุฉ ุฅูู ุงูููุงุฉ. <br><br>  ุซุงููุงู ุ ุนูููุฉ ูุฑุงุกุฉ (ุชููู) ููุฑุงุกุฉ ุฑุณุงูุฉ ูู ููุงุฉ.  ูุงูุญุงุฌุฉ ุฅูู ุงุณุชุฏุนุงุก ุงููุฑุงุกุฉ / ุงูุงุณุชูุงู ุจุดูู ุตุฑูุญ ูููุฒ CSP ุนู ูููุฐุฌ ุงูููุซููู ุ ูุฃูู  ูู ุญุงูุฉ ุงูููุซููู ุ ูููู ุฅุฎูุงุก ุนูููุฉ ุงููุฑุงุกุฉ / ุงูุงุณุชูุงู ุนู ุงูููุซู ุจุดูู ุนุงู.  ุฃู  ูููู ูุฅุทุงุฑ ุนูู ุงูููุซู ุงุณุชุฑุฏุงุฏ ุงูุฑุณุงุฆู ูู ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูููุซู ูุงุณุชุฏุนุงุก ูุนุงูุฌ (ุฑุฏ ุงุชุตุงู) ููุฑุณุงูุฉ ุงููุณุชุฑุฏุฉ. <br><br>  ูู ุญูู ุฃู ุนูููุฉ CSP ููุณูุง ูุฌุจ ุฃู ุชุฎุชุงุฑ ูุญุธุฉ ููุงููุฉ ุงููุฑุงุกุฉ / ุงูุงุณุชูุงู ุ ูุฅู ุนูููุฉ CSP ูุฌุจ ุฃู ุชุญุฏุฏ ุงูุฑุณุงูุฉ ุงูุชู ุชููุชูุง ูุชุนุงูุฌ ุงูุฑุณุงูุฉ ุงููุณุชุฎุฑุฌุฉ. <br><br>  ุฏุงุฎู ุชุทุจูููุง "ุงููุจูุฑ" ุ ูููู ุชูููุฐ ุนูููุงุช CSP ุจุทุฑู ูุฎุชููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ุชูููุฐ ุนูููุฉ CSP-shny ููุธุงู ุชุดุบูู ูุคุดุฑ ุชุฑุงุจุท ูููุตู.  ุงุชุถุญ ุญูุงู ุจุงูุธ ุงูุซูู ุ ูููู ูุน ุชุนุฏุฏ ุงูููุงู ุงูููุงุฆู. </li><li style=";text-align:right;direction:rtl">  ูููู ุชูููุฐ ุนูููุฉ CSP ุจูุงุณุทุฉ coroutine (coroutine ุงูููุฏุณ ุ ูุงูุฃููุงู ุ ูุงูุฎูุท ุงูุฃุฎุถุฑ ุ ...).  ุฅููุง ุฃุฑุฎุต ุจูุซูุฑ ุ ููู ุชุนุฏุฏ ุงูููุงู ูู ุชุนุงูููุฉ ููุท. </li></ul><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ููุชุฑุถ ุฃู ุนูููุงุช CSP ูุชู ุชูุฏูููุง ูู ุดูู Coroutines ุงูููุฏุณุฉ (ุนูู ุงูุฑุบู ูู ุฃู ุงูููุฏ ุงูููุถุญ ุฃุฏูุงู ูุฏ ูุชู ุชูููุฐู ุจุดูู ุฌูุฏ ุนูู ุณูุงุณู ูุธุงู ุงูุชุดุบูู). <br><br><h2 style=";text-align:right;direction:rtl">  ูุฎุทุท ุงูุญู ุงููุงุฆู ุนูู CSP </h2><br>  ูุดุจู ูุฎุทุท ุงูุญู ุงููุงุฆู ุนูู ูููุฐุฌ CSP ุฅูู ุญุฏ ูุจูุฑ ูุฎุทุทูุง ูุดุงุจููุง ููููุฐุฌ ุงูููุซููู (ููุฐุง ููุณ ูู ูุจูู ุงูุตุฏูุฉ): <br><table border="1" style=";text-align:right;direction:rtl"><tbody><tr><td><img src="https://habrastorage.org/webt/96/oy/uu/96oyuu6mwhj4ot6fqpsiiv-f1h8.jpeg"></td></tr></tbody></table><br>  ุณุชููู ููุงู ุฃูุถูุง ููุงูุงุช ุชุจุฏุฃ ูู ุจุฏุงูุฉ ุฎุงุฏู HTTP ูุชุนูู ุทูุงู ุงูููุช - ูุฐู ูู ุนูููุงุช CSP HttpSrv ู UserChecker ู ImageDownloader ู ImageMixer.  ููู ุทูุจ ูุงุฑุฏ ุฌุฏูุฏ ุ ุณูุชู ุฅูุดุงุก ุนูููุฉ RequestHandler CSP ุฌุฏูุฏุฉ.  ุชููู ูุฐู ุงูุนูููุฉ ุจุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุฑุณุงุฆู ููุณูุง ุนูุฏ ุงุณุชุฎุฏุงู ูููุฐุฌ ุงูููุซููู. <br><br><h2 style=";text-align:right;direction:rtl">  RequestHandler CSP Process Code </h2><br>  ูุฏ ูุจุฏู ูุฐุง ููุฃูู ุฑูุฒ ุฏุงูุฉ ุชููุฐ ุนูููุฉ RequestHandler CSP: <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">request_handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> execution_context ctx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> request req)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> user_info_ch = make_chain&lt;user_info&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> image_loaded_ch = make_chain&lt;image_loaded&gt;(); ctx.user_checker_ch().write(check_user{req.user_id(), user_info_ch}); ctx.image_downloader_ch().write(download_image{req.image_id(), image_loaded_ch}); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> user = user_info_ch.read(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> original_image = image_loaded_ch.read(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> image_mix_ch = make_chain&lt;mixed_image&gt;(); ctx.image_mixer_ch().write( mix_image{user.watermark_image(), <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(original_image), image_mix_ch}); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> result_image = image_mix_ch.read(); ctx.http_srv_ch().write(reply{..., <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(result_image), ...}); }</code> </pre> <br>  ููุง ูู ุดูุก ุชุงูู ูููุฑุฑ ููุณ ุงูููุท ุจุงูุชุธุงู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃููุงู ุ ููุดุฆ ููุงุฉ ูุงุณุชูุจุงู ุฑุณุงุฆู ุงูุงุณุชุฌุงุจุฉ.  ูุฐุง ุถุฑูุฑู ูุฃู  ูุง ุชุญุชูู ุนูููุฉ CSP ุนูู ุตูุฏูู ุจุฑูุฏ ุงูุชุฑุงุถู ุฎุงุต ุจูุง ุ ูุซู ุงูููุซููู.  ูุฐูู ุ ุฅุฐุง ูุงูุช ุนูููุฉ CSP-shny ุชุฑูุฏ ุชููู ุดูุก ูุง ุ ููุฌุจ ุฃู ุชููู ูู ุญูุฑุฉ ูู ุฅูุดุงุก ููุงุฉ ุญูุซ ุณูุชู ูุชุงุจุฉ ูุฐุง "ุดูุก" ุ </li><li style=";text-align:right;direction:rtl">  ุซู ูุฑุณู ุฑุณุงูุชูุง ุฅูู ุนูููุฉ CSP ุงูุฑุฆูุณูุฉ.  ููุดูุฑ ูู ูุฐู ุงูุฑุณุงูุฉ ุฅูู ููุงุฉ ุฑุณุงูุฉ ุงูุงุณุชุฌุงุจุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุซู ูููู ุจุฅุฌุฑุงุก ุนูููุฉ ุงููุฑุงุกุฉ ูู ุงูููุงุฉ ุญูุซ ูุฌุจ ุฃู ูุฑุณู ุฑุณุงูุฉ ุงุณุชุฌุงุจุฉ. </li></ul><br>  ูุธูุฑ ูุฐุง ุจูุถูุญ ูู ูุซุงู ุงูุชูุงุตู ูุน ุนูููุฉ ImageSPixer CSP: <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> image_mix_ch = make_chain&lt;mixed_image&gt;(); <span class="hljs-comment"><span class="hljs-comment">//  . ctx.image_mixer_ch().write( //  . mix_image{..., image_mix_ch}); //     . auto result_image = image_mix_ch.read(); //  .</span></span></code> </pre> <br>  ูููู ุจุดูู ูููุตู ุ ูุฌุฏุฑ ุงูุชุฑููุฒ ุนูู ูุฐุง ุงูุฌุฒุก: <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> user = user_info_ch.read(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> original_image = image_loaded_ch.read();</code> </pre> <br>  ููุง ูุฑู ุงุฎุชูุงููุง ุฎุทูุฑูุง ุขุฎุฑ ุนู ูููุฐุฌ ุงูููุซููู.  ูู ุญุงูุฉ CSP ุ ูููููุง ุชููู ุฑุณุงุฆู ุงูุงุณุชุฌุงุจุฉ ุจุงูุชุฑุชูุจ ุงูุฐู ููุงุณุจูุง. <br><br>  ูู ุชุฑูุฏ ุงูุงูุชุธุงุฑ ููุญุตูู ุนูู ูุนูููุงุช ุงููุณุชุฎุฏู ุฃููุงูุ  ุญูุณูููุง ุ ุชูููููููู ููู ุงููููุฑุงุกุฉู ุญูุชููู ููุธูููุฑู user_info.  ุฅุฐุง ุชู ุฅุฑุณุงู image_loaded ุฅูููุง ุจุงููุนู ูู ูุฐุง ุงูููุช ุ ูุณูู ุชูุชุธุฑ ุจุจุณุงุทุฉ ูู ููุงุชูุง ุญุชู ููุฑุฃูุง. <br><br>  ูุฐุง ุ ูู ุงููุงูุน ุ ูู ูุง ูููู ุฃู ูุตุงุญุจ ุงูุฑูุฒ ุงูููุถุญ ุฃุนูุงู.  ูุงู ุงูุฑูุฒ ุงููุนุชูุฏ ุนูู CSP ุฃูุซุฑ ุฅุญูุงูุง ูู ูุธูุฑู ุงููุงุฆู ุนูู ุงูููุซู.  ููู ููุณ ููุงุฌุฆุง ููุฐ ุฐูู ุงูุญูู  ููุง ูู ููู ูุฏููุง ููุตู ูุตู ูููุตู ูุน ุฃุณุงููุจ ุฑุฏ ุงูุงุชุตุงู.  ูุฌุฒุก ูู ุญุงูุฉ ุนูููุฉ CSP - ุฎุฌููุฉ ูุฏููุง RequestHandler ููุฌูุฏ ุถููููุง ูู ุดูู ุงูุญุฌุฌ ctx ู req. <br><br><h2 style=";text-align:right;direction:rtl">  ููุฒุงุช CSP </h2><br><h3 style=";text-align:right;direction:rtl">  ุชูุงุนููุฉ ูุงุณุชุจุงููุฉ ุนูููุงุช CSP </h3><br>  ุนูู ุนูุณ ุงูุฌูุงุช ุงููุงุนูุฉ ุ ูููู ุฃู ุชููู ุนูููุงุช CSP ุชูุงุนููุฉ ุฃู ุงุณุชุจุงููุฉ ุฃู ูููููุง.  ูููุชุฑุถ ุฃู ุนูููุฉ CSP ูุญุตุช ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ุ ูุฅุฐุง ูุงูุช ููุงู ุฃู ูููุง ุ ููุฏ ุนุงูุฌุชูุง.  ูุจุนุฏ ุฐูู ุ ูุธุฑูุง ูุนุฏู ูุฌูุฏ ุฑุณุงุฆู ูุงุฑุฏุฉ ุ ุชุนูุฏ ุจูุถุงุนูุฉ ุงููุตูููุงุช. <br><br>  ุจุนุฏ ูุฑูุฑ ุจุนุถ ุงูููุช ุ ุชุนุจุช ุนูููุฉ CSP ูููุตูููุฉ ูู ุงูุถุฑุจ ุ ูุฑุงุฌุน ูุฑุฉ ุฃุฎุฑู ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ.  ูุง ุฌุฏูุฏุฉุ  ุญุณููุง ุ ุญุณููุง ุ ุฏุนูุง ูุฐูุจ ููุถุงุนูุฉ ุงููุตูููุงุช ุฃูุซุฑ. <br><br>  ููุฐู ุงููุฏุฑุฉ ุนูู ุนูููุงุช CSP ููููุงู ุจุจุนุถ ุงูุฃุนูุงู ุญุชู ูู ุบูุงุจ ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ ุชุฌุนู ูููุฐุฌ CSP ูุฎุชูููุง ุชูุงููุง ุนู ูููุฐุฌ ุงูููุซููู. <br><br><h3 style=";text-align:right;direction:rtl">  ุขููุงุช ุญูุงูุฉ ุงูุฒุงุฆุฏ ุงูุฃุตููุฉ </h3><br>  ูุธุฑูุง ูุฃูู ุ ููุงุนุฏุฉ ุ ูุฅู ุงููููุงุช ูู ููุงุฆู ุงูุชุธุงุฑ ูุฑุณุงุฆู ุฐุงุช ุญุฌู ูุญุฏูุฏ ููุญุงููุฉ ูุชุงุจุฉ ุฑุณุงูุฉ ุฅูู ููุงุฉ ูุนุจุฃุฉ ุชููู ุงููุฑุณู ุ ุซู ูู CSP ูุฏููุง ุขููุฉ ูุฏูุฌุฉ ููุญูุงูุฉ ุถุฏ ุงูุชุญููู ุงูุฒุงุฆุฏ. <br><br>  ูู ุงููุงูุน ุ ุฅุฐุง ูุงูุช ูุฏููุง ุนูููุฉ ููุชุฌ ูุทูุฑุฉ ูุนูููุฉ ุจุทูุฆุฉ ูููุณุชููู ุ ูุฅู ุนูููุฉ ุงูููุชุฌ ุณุชููุฃ ุงูููุงุฉ ุจุณุฑุนุฉ ูุณูุชู ุชุนููููุง ูุนูููุฉ ุงูุฅุฑุณุงู ุงูุชุงููุฉ.  ูุณูู ุชูุงู ุนูููุฉ ุงูููุชุฌ ุญุชู ุชุญุฑุฑ ุนูููุฉ ุงููุณุชููู ูุณุงุญุฉ ูู ุงูููุงุฉ ููุฑุณุงุฆู ุงูุฌุฏูุฏุฉ.  ุจูุฌุฑุฏ ุธููุฑ ุงูููุงู ุ ุชุณุชููุธ ุนูููุฉ ุงูููุชุฌ ูุชููู ุฑุณุงุฆู ุฌุฏูุฏุฉ ูู ุงูููุงุฉ. <br><br>  ูุจุงูุชุงูู ุ ุนูุฏ ุงุณุชุฎุฏุงู CSP ุ ูููููุง ุฃู ูููู ุจุดุฃู ูุดููุฉ ุงูุญูู ุงูุฒุงุฆุฏ ุฃูู ููุง ูู ุญุงูุฉ ูููุฐุฌ ุงูููุซููู.  ุตุญูุญ ุ ููุงู ูุฃุฒู ููุง ุ ุณูุชุญุฏุซ ุนูู ุจุนุฏ ุฐูู ุจูููู. <br><br><h3 style=";text-align:right;direction:rtl">  ููู ูุชู ุชูููุฐ ุนูููุงุช CSP </h3><br>  ูุฌุจ ุฃู ููุฑุฑ ููู ุณูุชู ุชูููุฐ ุนูููุงุช CSP ุงูุฎุงุตุฉ ุจูุง. <br><br>  ูููู ุงูููุงู ุจุฐูู ุจุญูุซ ูุชู ุชูุซูู ูู ุนูููุฉ CSP-shny ุจูุงุณุทุฉ ูุคุดุฑ ุชุฑุงุจุท ูุธุงู ุชุดุบูู ูููุตู.  ุงุชุถุญ ุญูุงู ุจุงูุธ ุงูุซูู ูุบูุฑ ูุงุจู ููุชุทููุฑ.  ูููู ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุญุตู ุนูู ุชุนุฏุฏ ุงูููุงู ุงูููุงุฆู: ุฅุฐุง ุจุฏุฃุช ุนูููุฉ CSP ุงูุฎุงุตุฉ ุจูุง ูู ูุถุงุนูุฉ ุงููุตูููุงุช ุฃู ุฅุฌุฑุงุก ููุน ูู ุญุธุฑ ุงูููุงููุงุช ุ ูุฅู ูุธุงู ุงูุชุดุบูู ุณูุฏูุนูุง ูู ุงูููุงูุฉ ุฅูู ุฎุงุฑุฌ ุงูููุงุฉ ุงูุญุณุงุจูุฉ ููุฌุนู ูู ุงููููู ูุนูููุงุช CSP ุงูุฃุฎุฑู ุฃู ุชุนูู. <br><br>  ูู ุงููููู ุฃู ูุชู ุชูุซูู ูู ุนูููุฉ CSP ุจูุงุณุทุฉ coroutine (coroutine ุงูููุฏุณ).  ูุฐุง ุญู ุฃุฑุฎุต ููุงุจู ููุชุทููุฑ.  ูููู ููุง ุณูููู ูุฏููุง ููุท ุชุนุงูู ูุชุนุฏุฏ ุงูููุงู.  ูุฐูู ุ ุฅุฐุง ุงุณุชุบุฑูุช ุนูููุฉ CSP ูุฌุฃุฉ ุนูููุฉ ุถุฑุจ ุงููุตูููุฉ ุ ูุณูุชู ุญุธุฑ ุณูุณูุฉ ุงูุนูู ูุน ุนูููุฉ CSP ูุนูููุงุช CSP ุงูุฃุฎุฑู ุงููุฑุชุจุทุฉ ุจูุง. <br><br>  ูุฏ ุชููู ููุงู ุฎุฏุนุฉ ุฃุฎุฑู.  ูููุชุฑุถ ุฃููุง ูุณุชุฎุฏู ููุชุจุฉ ุชุงุจุนุฉ ูุฌูุฉ ุฎุงุฑุฌูุฉ ูุง ูููููุง ุงูุชุฃุซูุฑ ุนูููุง ูู ุงูุฏุงุฎู.  ูุฏุงุฎู ุงูููุชุจุฉ ุ ูุชู ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช TLS (ุฃู ุงูุชุฎุฒูู ุงููุญูู ููุคุดุฑ ุงูุชุฑุงุจุท).  ูููู ุจุฅุฌุฑุงุก ููุงููุฉ ูุงุญุฏุฉ ููุธููุฉ ุงูููุชุจุฉ ูุชููู ุงูููุชุจุฉ ุจุชุนููู ูููุฉ ุจุนุถ ูุชุบูุฑุงุช TLS.  ุซู "ุชุญุฑูุงุช" ุฑูุชูููุง ุฅูู ุฎูุท ุนูู ุขุฎุฑ ุ ููุฐุง ูููู ุ ูุฃูู  ูู ุญูุซ ุงููุจุฏุฃ ุ ูููู ููููุฑูุชููุงุช ุงูุงูุชูุงู ูู ุฎูุท ุนูู ุฅูู ุขุฎุฑ.  ูููู ุจุฅุฌุฑุงุก ุงูููุงููุฉ ุงูุชุงููุฉ ููุธููุฉ ุงูููุชุจุฉ ูุชุญุงูู ุงูููุชุจุฉ ูุฑุงุกุฉ ูููุฉ ูุชุบูุฑ TLS.  ูููู ูุฏ ูููู ููุงู ุจุงููุนู ูุนูู ูุฎุชูู!  ูุงูุจุญุซ ุนู ูุซู ูุฐุง ุงูุฎุทุฃ ุณูููู ุตุนุจูุง ุฌุฏูุง. <br><br>  ูุฐูู ุ ุชุญุชุงุฌ ุฅูู ุงูุชูููุฑ ุจุนูุงูุฉ ูู ุงุฎุชูุงุฑ ุงูุทุฑููุฉ ูุชูููุฐ ุนูููุงุช CSP-shnyh.  ููู ุฎูุงุฑ ูู ููุงุท ุงูููุฉ ูุงูุถุนู ุงูุฎุงุตุฉ ุจู. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูุนุฏูุฏ ูู ุงูุนูููุงุช ููุณุช ุงูุญู ุฏุงุฆููุง. </h3><br>  ููุง ูู ุงูุญุงู ูุน ุงูููุซููู ุ ูุฅู ุงููุฏุฑุฉ ุนูู ุฅูุดุงุก ุงูุนุฏูุฏ ูู ุนูููุงุช CSP ูู ุจุฑูุงูุฌู ููุณุช ุฏุงุฆููุง ุญููุง ููุดููุฉ ุชุทุจูููุฉ ุ ูููููุง ุชุฎูู ูุดุงูู ุฅุถุงููุฉ ูููุณู. <br><br>  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅู ุถุนู ุงูุฑุคูุฉ ููุง ูุญุฏุซ ุฏุงุฎู ุงูุจุฑูุงูุฌ ูู ุฌุฒุก ูุงุญุฏ ููุท ูู ุงููุดููุฉ.  ุฃูุฏ ุงูุชุฑููุฒ ุนูู ูุฃุฒู ุขุฎุฑ. <br><br>  ูุงูุญูููุฉ ูู ุฃูู ุนูู ูููุงุช CSP-shnyh ููููู ุจุณูููุฉ ุงูุญุตูู ุนูู ุชูุงุธุฑูุฉ ูู ุงูุฌููุฏ.  ุชุญุงูู ุงูุนูููุฉ "ุฃ" ูุชุงุจุฉ ุฑุณุงูุฉ ุฅูู ุงูููุงุฉ ุงููุงููุฉ C1 ูุงูุนูููุฉ "ุฃ" ูุชูููุฉ ูุคูุชูุง.  ูู ุงูููุงุฉ C1 ุ ูุฌุจ ูุฑุงุกุฉ ุงูุนูููุฉ B ุ ุงูุชู ุญุงููุช ุงููุชุงุจุฉ ุฅูู ุงูููุงุฉ C2 ุ ุงูููุชูุฆุฉ ุ ูุจุงูุชุงูู ุ ุชู ุชุนููู ุงูุนูููุฉ B.  ููู ุงูููุงุฉ C2 ุ ูุงูุช ุงูุนูููุฉ ุฃ ูู ุงููุฑุงุกุฉ. ูุฐุง ูู ุดูุก ุ ูุตููุง ุฅูู ุทุฑูู ูุณุฏูุฏ. <br><br>  ุฅุฐุง ูุงู ูุฏููุง ุนูููุชุงู ููุท ูู CSP ุ ููููููุง ุงูุนุซูุฑ ุนูู ูุซู ูุฐุง ุงูุทุฑูู ุงููุณุฏูุฏ ุฃุซูุงุก ุงูุชุตุญูุญ ุฃู ุญุชู ูุน ุฅุฌุฑุงุก ูุฑุงุฌุนุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ูููู ุฅุฐุง ูุงู ูุฏููุง ุงูููุงููู ูู ุงูุนูููุงุช ูู ุงูุจุฑูุงูุฌ ุ ูุฅููุง ุชุชูุงุตู ุจูุดุงุท ูุน ุจุนุถูุง ุงูุจุนุถ ุ ุซู ูุฒุฏุงุฏ ุงุญุชูุงู ุญุฏูุซ ูุซู ูุฐู ุงููุขุฒู ุจุดูู ูุจูุฑ. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูู ุฃูู ููุธุฑ ุ ููุงุฐุง ุชุฃุฎุฐุ </h2><br>  ุฅุฐุง ุฃุฑุงุฏ ุดุฎุต ูุง ุงูุนูู ูุน CSP ูู C ++ ุ ูุฅู ุงูุฎูุงุฑ ููุง ุ ููุฃุณู ุ ููุณ ูุจูุฑูุง ูุซู ุงูููุซููู.  ุญุณููุง ุ ุฃู ูุง ุฃุนุฑู ุฃูู ุฃุจุญุซ ูููู ุฃูุธุฑ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุขูู ุฃู ุชุดุงุฑู ุงูุชุนูููุงุช ุฑูุงุจุท ุฃุฎุฑู. <br><br>  ูููู ุ ุฅุฐุง ุฃุฑุฏูุง ุงุณุชุฎุฏุงู CSP ุ ูุญุชุงุฌ ุฃููุงู ุฅูู ุงูุชุทูุน ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Boost.Fiber</a> .  ููุงู ุงูุฃููุงู (ุฃู coroutines) ุ ูุงููููุงุช ุ ูุญุชู ุงูุจุฏุงุฆูุฉ ููุฎูุถุฉ ุงููุณุชูู ูุซู mutex ุ condition_variable ุ ุงูุญุงุฌุฒ.  ูู ูุฐุง ูููู ุฃู ูุคุฎุฐ ููุณุชุฎุฏู. <br><br>  ุฅุฐุง ููุช ุฑุงุถููุง ุนู ุนูููุงุช CSP ูู ุดูู ุฎููุท ุ ูููููู ุฅููุงุก ูุธุฑุฉ ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SObjectizer</a> .  ููุงู ุฃูุถูุง ูุธุงุฆุฑ ููููุงุช CSP ูุชุทุจููุงุช ูุนูุฏุฉ ูุชุนุฏุฏุฉ ุงูุฎููุท ุนูู SObjectizer ูููู ูุชุงุจุชูุง ุฏูู ุฃู ููุซููู ุนูู ุงูุฅุทูุงู. <br><br><h1 style=";text-align:right;direction:rtl">  ุงููุงุนููู ููุงุจู CSP </h1><br>  ุงูููุซููู ูููุฏูู ุฎุฏูุงุช ุงูุชุดููุฑ ูุชุดุงุจููู ุฌุฏูุง ูุน ุจุนุถูู ุงูุจุนุถ.  ูุฑุงุฑุง ูุชูุฑุงุฑุง ุนุจุฑ ุงูุจูุงู ุฃู ูุฐูู ุงููููุฐุฌูู ูุชูุงูุฆุงู.  ุฃู  ูููู ุชูุฑุงุฑ ูุง ูููู ูุนูู ุนูู ุงูููุซููู ุจูุณุจุฉ 1 ูู 1 ุชูุฑูุจูุง ูู ุนูููุงุช CSP ูุงูุนูุณ ุตุญูุญ.  ูููููู ุฃูู ุซุจุช ุญุชู ุงูุฑูุงุถูุงุช.  ููู ููุง ูุง ุฃููู ุฃู ุดูุก ุ ูุฐุง ูุง ูููููู ููู ุฃู ุดูุก.  ูููู ูู ุฃููุงุฑู ุงูุฎุงุตุฉ ูู ููุงู ูุง ุนูู ูุณุชูู ุงููุทุฑุฉ ุงูุณูููุฉ ุงูููููุฉ ุ ูุฅู ูู ูุฐุง ูุจุฏู ูุนููููุง ุชูุงููุง.  ูู ุจุนุถ ุงูุญุงูุงุช ุ ูู ุงููุงูุน ุ ูููู ุงุณุชุจุฏุงู ุงูุฌูุงุช ุงููุงุนูุฉ ุจุนูููุงุช CSP ุ ูุนูููุงุช CSP ุจูุงุณุทุฉ ุงูุฌูุงุช ุงููุงุนูุฉ. <br><br>  ููุน ุฐูู ุ ููุงู ุงูุนุฏูุฏ ูู ุงูุงุฎุชูุงูุงุช ุจูู ุงูุฌูุงุช ุงููุงุนูุฉ ูููุฏูู ุฎุฏูุงุช ุงูุชุดููุฏ (CSP) ุงูุชู ูููู ุฃู ุชุณุงุนุฏ ูู ุชุญุฏูุฏ ุฃูู ูููู ูู ูู ูุฐู ุงูููุงุฐุฌ ูููุฏูุง ุฃู ุบูุฑ ูุคุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููููุงุช ููุงุจู ุตูุฏูู ุงูุจุฑูุฏ </h2><br>  ูุฏู ุงูููุซู "ููุงุฉ" ูุงุญุฏุฉ ูุงุณุชูุจุงู ุงูุฑุณุงุฆู ุงููุงุฑุฏุฉ - ูุฐุง ูู ุตูุฏูู ุงูุจุฑูุฏ ุงูุฎุงุต ุจู ุ ูุงูุฐู ูุชู ุฅูุดุงุคู ุชููุงุฆููุง ููู ููุซู.  ููููู ุงูููุซู ุจุงุณุชุฑุฏุงุฏ ุงูุฑุณุงุฆู ูู ููุงู ุจุงูุชุณูุณู ุ ุจุงูุถุจุท ุจููุณ ุงูุชุฑุชูุจ ุงูุฐู ูุงูุช ุจู ุงูุฑุณุงุฆู ูู ุตูุฏูู ุงูุจุฑูุฏ. <br><br>  ููุฐุง ุณุคุงู ุฎุทูุฑ ููุบุงูุฉ.  ูููุชุฑุถ ุฃู ููุงู ุซูุงุซ ุฑุณุงุฆู ูู ุตูุฏูู ุจุฑูุฏ ุงูููุซู: M1 ู M2 ู M3.  ุงูููุซู ููุชู ุญุงูููุง ููุท ุจู M3.      M3    M1,  M2.       ? <br><br><blockquote style=";text-align:right;direction:rtl">           selective receive  Erlang  stashing-  Akka. </blockquote><br>   CSP-     ,         . ,  CSP-     : C1, C2  C3.    CSP-       C3.      .     C1  C2   ,     . <br><br><h2 style=";text-align:right;direction:rtl">    </h2><br>  ,      ,      . <br><br>   CSP-    -      .  -       . <br><br><h2 style=";text-align:right;direction:rtl">   </h2><br>       ().         ,      ,   ,            ,      CSP- . <br><br><h2 style=";text-align:right;direction:rtl">  C++     CSP </h2><br>   Go ,       CSP            . <br><br>  Go   ยซCSP- ยป (aka goroutines),      ,          (Go- select,      ,    ),                stdlib. <br><br>  C++   stackful coroutines  (  ).    CSP  C++  , ,   , โฆ          ,      Go. <br><br><h1 style=";text-align:right;direction:rtl">  โ3: Tasks (async, future, wait_all, ...) </h1><br><h2 style=";text-align:right;direction:rtl">  Task-based     </h2><br>  Task-based   ,       ,        -,    (  task)  -  . <br><br>      async.  async  -future,        ,  . <br><br>  ,    N    N -future,     -   .  ,     โ1  โ2,         โ3.     โ3,         โ4, โ5  โ6.  ..,  .. <br><br>   ยซยป   . , ,   .then()  -future,    wait_all(), wait_any(). <br><br>   ยซ ยป     ,     .          (  ). <br><br><h2 style=";text-align:right;direction:rtl">  request_handler-  Task-based  </h2><br>     HTTP-   task-    : <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handle_request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> execution_context &amp; ctx, request req)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> user_info_ft = async(ctx.http_client_ctx(), [req] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> retrieve_user_info(req.user_id()); }); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> original_image_ft = async(ctx.http_client_ctx(), [req] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> download_image(req.image_id()); }); when_all(user_info_ft, original_image_ft).then( [&amp;ctx, req](tuple&lt;future&lt;user_info&gt;, future&lt;image_loaded&gt;&gt; data) { async(ctx.image_mixer_ctx(), [&amp;ctx, req, d=<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(data)] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mix_image(get&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;(d).get().watermark_image(), get&lt;<span class="hljs-number"><span class="hljs-number">1</span></span>&gt;(d).get()); }) .then([req](future&lt;mixed_image&gt; mixed) { async(ctx.http_srv_ctx(), [req, im=<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(mixed)] { make_reply(...); }); }); }); }</code> </pre> <br>     ,   . <br><br>    ,        HTTP-      .  -future     user_info_ft. <br><br>     ,         HTTP-     .  -future    original_image_ft. <br><br>        .      : when_all(user_info_ft, original_image_ft).   -future   ,      .       ยซ ยป           ImageMixer-.        ,   HTTP-    ,   HTTP-. <br><br>         .     : <br><table style=";text-align:right;direction:rtl"><tbody><tr><td><img src="https://habrastorage.org/webt/5k/c0/mr/5kc0mrvqnxdf6lp4-p0wgn1nj7w.jpeg"></td></tr></tbody></table><br>       (     ): <br><table style=";text-align:right;direction:rtl"><tbody><tr><td><img src="https://habrastorage.org/webt/zu/j4/g4/zuj4g4wwg0wxmhazj5k5rdb8pgu.jpeg"></td></tr></tbody></table><br>           , ,  ,  : <br><table style=";text-align:right;direction:rtl"><tbody><tr><td><img src="https://habrastorage.org/webt/sw/at/uz/swatuzio1z33-ei16gquj-ss5mg.jpeg"></td></tr></tbody></table><br><br><h2 style=";text-align:right;direction:rtl">  Task-based  </h2><br><h3 style=";text-align:right;direction:rtl">  </h3><br>  ,      โ     Task-.     . <br><br>      ,  callback hell.     Node.js-.   C++,     Task-,      callback hell. <br><br><h3 style=";text-align:right;direction:rtl">  ุฎุทุฃ ูู ุงูุชุนุงูู </h3><br>     โ   . <br><br>   ,    async  future            ,      CSP.    CSP  A    B    ,     B       ,     A: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">           ; </li><li style=";text-align:right;direction:rtl">      ,    std::variant     . </li></ul><br>    future  :    future   ,    . <br><br> ,   ,       . ,   โ1  ,      future,      โ2.   โ2      future,   . ,  ,      . ,     future,     โ3.     , ,  ,    .  ุฅูุฎ. <br><br>     ,              ,          . <br><br><h3 style=";text-align:right;direction:rtl">  Task-  / </h3><br>       Task-based  โ     -   .   , ,   150 ,   10    ,  ,     .    140 ?       :) <br><br>     โ        . ,    -        50- .    ,     -,    ,   ?  ,  ,   :) <br><br><h3 style=";text-align:right;direction:rtl">  </h3><br>        Task-based .       : <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> user_info_ft = async(ctx.http_client_ctx(), [req] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> retrieve_user_info(req.user_id()); }); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> original_image_ft = async(ctx.http_client_ctx(), [req] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> download_image(req.image_id()); });</code> </pre> <br>        HTTP-  ,       .     ,           ,        .        ,    -      . <br><br><h2 style=";text-align:right;direction:rtl"> Actors/CSP vs Tasks </h2><br>      ,     CSP-     ,  Task-based        .    ,  Actors/CSP   Task-. <br><br>       . <br><br>        CSP,       .             :    ,  ,     . <br><br>  ุฃู     CSP    . <br><br> , ,        CSP- .      ? <br><br>      Task-based ,     .  ,    ,   ,   ,        .. <br><br>  ุฃู   Task-    . <br><br> , Actors/CSP  Tasks     ,    . Actors/CSP          .  Tasks       . <br><br> ,     Actor-   ,  ImageMixer,          .  -        ImageMixer  Task-based . <br><br><h2 style=";text-align:right;direction:rtl">  ,  ? </h2><br>     Task-  C++,         C++20.     .then()  future,     wait_all()  wait_any.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> cppreference</a> . <br><br>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">async++</a> .  ,  ,   ,  -   . <br><br>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Microsoft PPL</a> .    ,  ,    . <br><br><blockquote style=";text-align:right;direction:rtl">      Intel TBB.        Task-based  ,   ,    TBB โ   data flow . ,      ,    Intel TBB  ,      data flow. </blockquote><br><h2 style=";text-align:right;direction:rtl">   </h2><br>  ,  ,    : " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  ++20. Coroutines TS   </a> ". <br><br>     Task-based   stackless coroutines  ++20.  ,     Task-        CSP- . <br><br>    -  Task-based ,       . <br><br><h1 style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h1><br>  ,    ,       . <br><br> ,    , โ  ,               -    -    . <br><br>      ,       ,     - lock-free    lock-free .    ,       : <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> actors </li><li style=";text-align:right;direction:rtl"> communicating sequential processes (CSP) </li><li style=";text-align:right;direction:rtl"> tasks (async, promises, futures, ...) </li><li style=";text-align:right;direction:rtl"> data flows </li><li style=";text-align:right;direction:rtl"> reactive programming </li><li style=";text-align:right;direction:rtl">  ... </li></ul><br>  ,     C++   .    ,  ,  ,  ,   . <br><br>   : ,     . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar430672/">https://habr.com/ru/post/ar430672/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar430662/index.html">ูุฑุงูุจุฉ ุฎูุงุฏู Windows ุนูู MS SQL ููุท ุ ูููู ููุฐุชูุง ุณุฑุงู</a></li>
<li><a href="../ar430664/index.html">ุฏูุฑ ูุงุฆุฏ ุงููุฑูู ูู ุงูุชูุธูู</a></li>
<li><a href="../ar430666/index.html">ููููุฉ ุชูููู ุฃุฏุงุก ุงููุฑูู</a></li>
<li><a href="../ar430668/index.html">ูุญุฏู ูู ุงูููุฏุงู ููุณ ูุญุงุฑุจูุง. ุงูุทุฑูู ุฅูู ุงูุนูู ุงูุฌูุงุนู ุงููุนุงู</a></li>
<li><a href="../ar430670/index.html">ุฅุฏุงุฑุฉ ุงูุชุฑุชูุจ</a></li>
<li><a href="../ar430674/index.html">ููุทู ุจูุงุก ุฌุฏุงูู ุงูุนูู ุงูุนุงูููุฉ</a></li>
<li><a href="../ar430676/index.html">ุงูุขุซุงุฑ: shshshsh ุ sssssss ุ VOIP ุ BBS ูุฃุตุฏูุงุก ุงูููุฏู ุงูุขุฎุฑูู</a></li>
<li><a href="../ar430678/index.html">ุงุฎุชุจุงุฑ ุนุดุฑุฉ ูุฎููุงุช ูุน ูุตุงุจูุญ LED</a></li>
<li><a href="../ar430680/index.html">ูุชุงุจุฉ ูุนุงูุฌ ูุจูุฆุฉ ุจุณูุทุฉ ูุฐูู</a></li>
<li><a href="../ar430682/index.html">ุซูุงุซ ุณููุงุช ูู ูุดุฑูุน ุงูุณุงุชู ุงููููุฑูู ุงูููุฑู: ูุฑุงุญู ุงูููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>