<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😝 👱🏿 🌂 LED ramping buatan sendiri 👩🏽‍🤝‍👨🏼 🌾 🆎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mengapa itu dibutuhkan? 


 Baru-baru ini, saya menulis artikel tentang komputer sepeda bluetooth buatan sendiri. Ada diskusi yang hidup. Salah satu s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LED ramping buatan sendiri</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408807/"><h1>  Mengapa itu dibutuhkan? </h1><br><p>  Baru-baru ini, saya menulis artikel tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">komputer sepeda bluetooth</a> buatan sendiri.  Ada diskusi yang hidup.  Salah satu saran untuk modernisasi adalah gagasan untuk menambahkan indikasi atau layar LCD.  Saya menyukai ide itu.  Dan saya memutuskan untuk memikirkan cara menghidupkannya. </p><br><p>  Karena komputer sepeda sudah dibuat, kasingnya hampir penuh, pilihan dengan layar lcd hilang.  Kami membutuhkan ukuran 40x30mm, dengan mempertimbangkan semua kabel dan kabel, dan dengan ketebalan tidak lebih dari 2-3mm.  Ada juga beberapa kesimpulan gratis.  Berbagai indikator LED (tiga digit, skala) tidak sesuai.  Kemudian pikiran yang sangat bagus muncul di benak saya - untuk membuat indikator buatan rumah dari SMD LED.  Ambil textolite satu sisi yang tipis, letakkan di atasnya jumlah LED yang tepat, dalam urutan yang benar dan Anda mendapatkan indikator yang sangat baik.  Setelah membayangkan bahwa kabel harus mengarah ke semua LED, saya memutuskan bahwa mikrokontroler murah yang akan mengendalikan semua LED itu sendiri akan cocok di papan, dan MK utama dari komputer sepeda akan mengontrol indikator melalui satu kawat. </p><br><p>  Hasilnya adalah indikator yang sangat kompak (hanya setebal 3mm).  Manajemen pada satu kawat, dan 2 lagi pada makanan.  Jika Anda memiliki perangkat yang siap pakai, atau Anda berencana untuk membuat perangkat, dan Anda memerlukan indikator, maka indikator buatan adalah pilihan terbaik.  Mari kita teliti lebih lanjut bagaimana cara kerjanya. </p><a name="habracut"></a><br><h1>  20 LED pada 10 pin - mudah! </h1><br><p>  MK Saya memilih yang paling mahal - SMT8S003, sama seperti di komputer sepeda.  Dia hanya memiliki 20 kaki.  Jika Anda melepaskan kaki kekuasaan dan kontrol, maka 14 kaki tetap.  Tugas pertama yang harus diselesaikan adalah mengendalikan kaki-kaki ini dengan LED sebanyak mungkin. </p><br><p>  Segera terpikir oleh saya bahwa 2 LED dapat digantung dengan satu kaki, dengan satu pin pada GND dan yang lainnya pada VDD.  Untuk setiap LED, sebuah resistor.  Menurut skema ini. </p><br><p><img src="https://habrastorage.org/webt/vc/c-/id/vcc-idtntq-9zcgj2_g-tl7-awe.jpeg"><br clear="left"><br>  Mudah dikelola.  Kami memberi makan untuk pin 0, satu LED menyala, feed 1 - LED kedua menyala.  Kami menerjemahkan ke dalam status ketiga (input), tidak ada yang terbakar.  Ternyata pada 14 kesimpulan Anda bisa menggantung 28 LED.  Sangat tidak buruk. </p><br><p>  Putranya menggambar indikator itu sendiri.  Untuk komputer sepeda, jenis indikator yang paling berguna, setelah angka adalah skala.  Indikator terdiri dari 2 skala 8 LED, dan 4 LED status lebih berbeda.  Total 20 LED.  Saya cepat-cepat membuat sketsa papan, menggores, menyolder, dan mulai menguji. </p><br><p>  Saya nyalakan MK, semua kesimpulannya ada di negara ketiga, tidak ada yang harus terbakar.  Dan ... LED menyala.  Tentu saja, mereka memiliki voltase cukup 5 volt untuk menyala redup.  Itu tidak akan berhasil, kami mengubah skema ... </p><br><h2>  Lebih banyak LED </h2><br><p>  Setelah berpikir sebentar, ide lain muncul.  Hubungkan LED bukan ke power dan ground, tetapi ke dua kesimpulan lagi dari MK.  Maka Anda pasti bisa mematikan semuanya.  Kami mencoba, ini bekerja dengan baik.  Karena indikasi dinamis, semuanya berkedip dengan indah.  Anda dapat mengontrol setiap LED. </p><br><p>  Alhasil, skema berikut ternyata untuk masa depan: </p><br><p><img src="https://habrastorage.org/webt/kd/5c/fc/kd5cfcy9pbstuw4l02doacdbzle.jpeg"><br clear="left">  Kami membedakan beberapa kesimpulan kontrol dan pekerja.  Kami meletakkan resistor hanya pada kontrol upr1 upr2.  Dengan demikian, sirkuit dan jejak papan sangat disederhanakan.  Hingga 96 LED dapat ditempatkan pada 14 pin.  6 manajer dan 8 pekerja, ditambah 2 LED masing-masing.  Lebih dari cukup, lengan solder akan lelah. </p><br><p>  Ternyata, Anda bisa berbuat lebih banyak.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Charlie</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Allen</a> melangkah lebih jauh dengan menempatkan beberapa LED di antara pin kontrol.  Dengan demikian, hingga 16 * 15 LED dapat ditempatkan pada 16 pin.  Tapi, di sirkuitnya, banyak resistor ditambahkan, dan perlu juga bahwa semua LED memiliki warna yang sama, secara umum ada masalah kecil.  Kesimpulan - 96 LED lebih dari cukup. </p><br><h1>  Kami mengontrol setiap LED secara individual </h1><br><p>  Untuk mengontrol setiap LED, metode indikasi dinamis digunakan.  Pada satu titik waktu, satu LED dapat menyala per output kontrol.  Selanjutnya, Anda perlu memilah-milah semua pasangan, ini adalah negara indikasi, dan seterusnya dalam lingkaran.  Karena papan sudah dibuat, saya redid menjadi satu pin kontrol dan satu resistor.  Ternyata 20 LED pada satu output dan 10 kesimpulan bekerja.  Total 20 negara. </p><br><p><img src="https://habrastorage.org/webt/de/6p/yx/de6pyx1yu4lwcrrknzrnr-7o25m.jpeg"><br clear="left"></p><br><p>  Untuk mengurangi konsumsi energi, MK beroperasi pada frekuensi 2 MHz.  Untuk memilah 20 negara dengan frekuensi setidaknya 50 Hz, Anda memerlukan timer dengan frekuensi 1000 Hz.  Selain itu, saya juga ingin mengontrol kecerahan.  Tetapi ternyata, untuk menurunkannya dengan faktor 10, Anda memerlukan frekuensi timer 10.000 Hz, dan 100 kali 100.000 Hz.  Dalam hal ini, dalam interrupt handler, Anda perlu memilah-milah semua opsi dan menyalakan LED yang diinginkan.  Secara umum, MK tidak bisa mengatasinya.  Saya harus beralih ke opsi dengan modulasi PWM. </p><br><h1>  Kami mengontrol kecerahan menggunakan timer PWM </h1><br><p>  Hasilnya adalah program sederhana.  Kami menggunakan satu timer - TIM2, dengan kemungkinan pembuatan PWM.  Kami mengatur frekuensi timer ke 1000 Hz, dan nilai maksimum timer 125 adalah lebar PWM, yang akan menentukan gradasi kecerahan.  Akibatnya, Anda dapat mengatur nilai kecerahan dari 0 hingga 125. Pada saat interupsi timer kedua, dibandingkan dengan mengisi PWM, matikan semua LED. </p><br><p>  Hasilnya adalah indikator yang bagus.  Karena kontrol kecerahan, konsumsi dalam fase aktif adalah dari 1 mA hingga 4 mA. </p><br><h1>  Kami menghubungkan komputer sepeda </h1><br><p>  Indikatornya sendiri sudah siap, dalam kasus dari komputer sepeda terlihat seperti ini: </p><br><p><img src="https://habrastorage.org/webt/ra/si/ap/rasiapvq2nntvwyejmvpegpakym.jpeg"><br clear="left"><br>  Untuk mengontrol indikator, saya memilih protokol 1-kawat.  Saya tidak akan menjelaskannya.  Saya hanya bisa mengatakan bahwa saya harus menyiksa diri sendiri untuk bisa menangani interupsi dan menahan waktu yang diperlukan, tetapi pada akhirnya itu berhasil.  Komputer sepeda seperti seorang Master, dan indikatornya seperti seorang Budak.  Untuk kontrol, 4 byte harus dikirimkan.  Byte pertama adalah perintah, kecerahan dan satu bit untuk masuk ke mode tidur, 3 byte sisanya adalah LED, sedikit oleh LED. </p><br><p>  Hal pertama yang muncul di benak saya untuk ditampilkan pada indikator adalah kecepatan dan personil.  LED layanan harus dibiarkan karena status bluetooth, pelanggaran kecepatan dan kontrol irama, dan kontrol jarak-jauh lainnya. </p><br><p>  Setelah tes eksperimental, saya menambahkan kemampuan untuk menampilkan jarak yang tersisa dari set atau kalori yang tersisa dari set.  Ternyata sangat nyaman.  Anda menetapkan rencana - untuk menghabiskan 2000 Cal untuk berjalan-jalan, Anda pergi dan melihat segera, masih ada setengah yang tersisa.  Kesimpulan - indikasi adalah hal yang bermanfaat. </p><br><p>  Anak saya sangat menyukainya, ia mendapat ide untuk membuat gantungan kunci - indikator dengan baterai epoksi.  Saya pergi untuk berpikir. </p><br><h1>  Apa indikator lain yang bisa dilakukan </h1><br><p>  Jam - LED dalam dua lingkaran - jam dan menit. </p><br><p>  Poin kardinal - untuk kompas elektronik. </p><br><p>  Skala untuk rotary encoder inkremental. </p><br><p>  Beberapa skala dalam satu indikator. </p><br><p>  Hati untuk kartu musik. </p><br><p>  8x8 matrix untuk menampilkan gambar. </p><br><p>  Indikator tujuh segmen tipis untuk satu digit dari 11 LED. </p><br><p>  Secara umum, ada banyak ide tentang cara menggunakan ini. </p><br><p>  Pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> , seperti biasa, papan, program, implementasi protokol 1-kawat dan indikasi dinamis.  Siapa pun yang membutuhkannya, Anda dapat menggunakannya dalam proyek Anda. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id408807/">https://habr.com/ru/post/id408807/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id408795/index.html">Pencarian kehidupan di tata surya</a></li>
<li><a href="../id408797/index.html">Sejarah Singkat Layar Biru Kematian</a></li>
<li><a href="../id408799/index.html">Mobil listrik dalam uji beban Januari Falcon Heavy adalah lelucon. Atau tidak ...</a></li>
<li><a href="../id408801/index.html">Cloud scam: bagaimana scammers mencoba menyamar sebagai HashFlare dan menjual layanan yang tidak ada</a></li>
<li><a href="../id408803/index.html">Musik berwarna yang sangat spektakuler di Arduino dan LED</a></li>
<li><a href="../id408809/index.html">Pengembaraan Bitcoin $ 200K saya</a></li>
<li><a href="../id408811/index.html">Printer 3D baru mencetak 10 kali lebih cepat dari model yang ada</a></li>
<li><a href="../id408815/index.html">Perdagangan berjangka Bitcoin telah dimulai: konsekuensi dan perkiraan</a></li>
<li><a href="../id408817/index.html">Siapa "pengembara kelabu" Australia</a></li>
<li><a href="../id408819/index.html">$ 8 juta untuk starfall. Startup ALE untuk meluncurkan shower meteor buatan pertama di dunia pada tahun 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>