<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé´ ü•ö üßíüèΩ Termux paso a paso (Parte 2) üîº üôÖ üë®‚Äçüî¨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la √∫ltima parte, nos encontramos con los comandos b√°sicos de Termux, configuramos una conexi√≥n SSH con una PC, aprendimos a crear alias e instalamo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Termux paso a paso (Parte 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445868/"><img width="100%" src="https://habrastorage.org/webt/1y/qs/wu/1yqswuuknqxuwcnerqenogyqwby.jpeg"><br><br><p>  En la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">√∫ltima parte,</a> nos encontramos con los comandos b√°sicos de Termux, configuramos una conexi√≥n SSH con una PC, aprendimos a crear alias e instalamos varias utilidades √∫tiles.  Esta vez tenemos que ir a√∫n m√°s lejos, usted y yo: </p><br><ul><li>  aprender sobre Termux: API </li><li>  instale Python y nano, y tambi√©n escriba "¬°Hola, mundo!"  en pit√≥n </li><li> aprendemos sobre scripts de bash y escribimos un script usando Termux: API </li><li>  usando un script bash, Termux: API y Python escribiremos un programa simple <a name="habracut"></a></li></ul><br><p>  Como ahora entendemos lo que hacen los comandos de entrada, desde el siguiente paso no describir√© cada acci√≥n con tanto detalle, pero siempre que pueda haber dificultades, definitivamente lo explicar√©. </p><br><p>  A menudo uso alias, por lo que las abreviaturas utilizadas en esta parte se muestran aqu√≠: </p><br><pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> updg=<span class="hljs-string"><span class="hljs-string">'apt update &amp;&amp; apt upgrade'</span></span> <span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> py=<span class="hljs-string"><span class="hljs-string">'python'</span></span></code> </pre> <br><p>  El plan est√° listo, ¬°puedes comenzar!  Y, por supuesto, no te olvides de la "pesta√±a m√°gica" ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ver Parte 1</a> ). </p><br><h2>  Paso 4 </h2><br><h3>  Zambullirse en la madriguera del conejo Termux: API </h3><br><p>  <i>API cu√°nto en esta palabra para el coraz√≥n del codificador se fusion√≥</i> </p><br><p>  Si no toc√≥ el tema de Termux: API, todos nuestros pasos podr√≠an reducirse a un simple recuento de alg√∫n folleto como Linux for Dummies, como se se√±al√≥ correctamente en los comentarios a la primera parte. </p><br><p>  Primero, instale Termux: API desde Google Play Market (despu√©s de que no est√° de m√°s reiniciar Termux): </p><br><p><img width="100%" src="https://habrastorage.org/webt/vq/4j/yi/vq4jyiirgitt7jgubrxyc8aefki.png"></p><br><p>  A continuaci√≥n, necesitamos instalar el paquete API en la consola Termux: </p><br><pre> <code class="bash hljs">updg <span class="hljs-comment"><span class="hljs-comment">#    alias' apt install termux-api</span></span></code> </pre> <br><p>  Para los experimentos, uso Android 5.1.1, para los propietarios de Android 7 necesito "proteger" Termux: API yendo a Configuraci√≥n&gt; Aplicaciones protegidas, de lo contrario, las llamadas a la API, como <code>termux-battery-status</code> , se <code>termux-battery-status</code> .  (Ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">proyecto wiki</a> ) </p><br><p>  Ahora echa un vistazo m√°s de cerca a las capacidades adquiridas.  La descripci√≥n m√°s reciente y detallada de Termux: API se puede encontrar en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">wiki del proyecto</a> .  Tratar√© de elegir el m√°s visual e interesante, lo que me permitir√° obtener un trabajo independiente en el futuro. </p><br><h3>  Algunos ejemplos de Termux: API </h3><br><ul><li>  termux-bater√≠a-estado <br>  Devuelve el estado de la bater√≠a <br><br><img width="50%" src="https://habrastorage.org/webt/ih/n2/sm/ihn2sm48ilt9hcwj4xr2fheatxs.png"></li><li>  termux-brillo <br>  Establece el brillo de la pantalla de 0 a 255 <br><br><img width="50%" src="https://habrastorage.org/webt/d-/el/bz/d-elbz9rr4jubiqtoykxhmr89do.png"></li><li>  termux-tostadas <br>  Muestra una notificaci√≥n emergente temporal <br><br><img width="50%" src="https://habrastorage.org/webt/wf/8q/zq/wf8qzq7hf-3wnfxtx-gnwq-jn0m.png"></li><li>  antorcha termux <br>  Enciende una linterna <br><br><img width="50%" src="https://habrastorage.org/webt/--/rd/pl/--rdplssdedzbzmkktpnqjzidgw.png"></li><li>  termux-wifi-scaninfo <br>  Devuelve informaci√≥n sobre el √∫ltimo escaneo de redes Wi-Fi <br><br><img width="50%" src="https://habrastorage.org/webt/gg/jh/2n/ggjh2npxxg-qmy5ly5fykxgungq.png"></li></ul><br><p>  Es f√°cil ver que los valores devueltos son cadenas, diccionarios, diccionarios, en general, los tipos de datos con los que Python funciona muy bien, por lo que el siguiente paso es instalarlo. </p><br><h2>  Paso 5 </h2><br><h3>  Instalar Python y nano </h3><br><p>  Para instalar Python, escribimos en la terminal: </p><br><pre> <code class="bash hljs">updg apt install python apt install python2</code> </pre> <br><p>  Ahora tenemos 2 y 3 Python instalados. </p><br><p>  Durante el trabajo en este art√≠culo, descubr√≠ otro editor de nano texto que me gust√≥ m√°s que vim, vamos a instalarlo: </p><br><pre> <code class="bash hljs">apt install nano</code> </pre> <br><p>  Usarlo es m√°s f√°cil que vim, y nano tiene una interfaz m√°s f√°cil de usar.  <i>En un dispositivo Android, vim es a√∫n m√°s conveniente.</i> </p><br><h3>  HelloWorld en Python en Termux </h3><br><p>  En general, podr√≠a prescindir de este elemento, pero poner Python en Termux y no escribir HelloWorld, en mi opini√≥n, mal lenguaje. </p><br><p>  Mi objetivo no es ense√±arle a nadie Python, por lo que aquellos que no lo saben pueden simplemente copiar el c√≥digo (o comenzar a aprender por su cuenta, hay suficiente literatura), y aquellos que lo saben pueden hacerlo ellos mismos.  Y mostrar√© "en silencio" una forma de ingresar texto en la terminal sin un editor. </p><br><pre> <code class="bash hljs">cat &gt;hello-world.py <span class="hljs-comment"><span class="hljs-comment">#     ( cat 1.txt &gt; 2.txt) #  cat       , #     . str = 'Hello, world!' #   str  "Hello, world!" print (str) #       str # Ctrl + D      (hello-world.py) py hello-world.py #   (py  alias  python)</span></span></code> </pre> <br><p><img width="50%" src="https://habrastorage.org/webt/xt/nt/d3/xtntd34sya3etj9zjohm0dvf2u0.png"></p><br><p>  Si durante el proceso de entrada no not√≥ un error y ya presion√≥ Entrar, no podr√° ir a la l√≠nea de arriba. Para hacer esto, finalice la entrada presionando Ctrl + D (puede interrumpir Ctrl + Z por completo) y repita todo desde el principio.  Como usamos '&gt;', el archivo se reescribir√° por completo.  Por esta raz√≥n, no recomiendo usar este m√©todo de entrada si no est√° seguro de que escribir√° el c√≥digo inmediatamente sin errores. </p><br><h2>  Paso 6 </h2><br><h3>  Guiones Bash </h3><br><p>  Los scripts de Bash son una excelente manera de automatizar el trabajo con el terminal.  El script es un archivo con la extensi√≥n .sh (la extensi√≥n es opcional) que contiene un conjunto de comandos de terminal, algunos de los cuales ya hemos estudiado.  Aqu√≠ hay una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lista de la mayor√≠a de los comandos</a> , todo deber√≠a funcionar, pero tenga en cuenta que esta es una lista para Linux "adulto", y no para Termux, pero esto es simplemente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">excelente para los scripts de bash</a> . </p><br><p>  Usando scripts, puede automatizar casi todas las acciones mon√≥tonas.  Escribiremos el script bash m√°s simple que muestre el valor de la variable que √©l cre√≥, usar√© cat nuevamente, puede usar un editor de texto normal, y aquellos que quieran entrenarse pueden usar echo. </p><br><pre> <code class="bash hljs">cat &gt;test.sh <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> str=<span class="hljs-string"><span class="hljs-string">", !"</span></span> <span class="hljs-comment"><span class="hljs-comment">#   str #     ", !" #       '=' # export      (..   ) echo $str #        '$' # Ctrl + D # ./test.sh   ,         #        test.sh  chmod +x test.sh # chmod    (+  / - ) # '+x'       ./test.sh #    </span></span></code> </pre> <br><p><img width="90%" src="https://habrastorage.org/webt/dj/cs/fv/djcsfvcjyastc6p9prw5ei0nooy.png"></p><br>  Una persona amable coment√≥ con raz√≥n que el comando de <code>export</code> es superfluo si la variable se usa dentro del mismo script, ya que llevar√° la variable al entorno, es decir, la har√° accesible fuera del script, ocupando memoria adicional.  Por lo tanto, despu√©s de ejecutar <code>test.sh</code> podemos acceder a la variable <code>$str</code> desde la l√≠nea de comandos. <br><br><h3>  Script de Bash con Termux: API </h3><br><p>  Escribamos algo diferente de los notorios HelloWorlds, pero igual de in√∫til.  Nuestro gui√≥n ser√°: </p><br><ol><li>  ejecutar la solicitud de API termux-battery-status </li><li>  guardar los datos recibidos en el archivo test.txt </li><li>  mostrar datos de un archivo en la pantalla </li><li>  ejecute el programa hello-world.py escrito anteriormente </li><li>  escriba los datos recibidos del programa en el archivo test.txt </li><li>  mostrar datos de un archivo en la pantalla </li><li>  transferir datos del archivo al portapapeles </li><li>  mostrar el contenido del portapapeles </li><li>  mostrar un mensaje emergente con datos del portapapeles </li></ol><br><p>  Primero, cree una carpeta para el trabajo y copie hello-world.py all√≠ como test.py, cree los archivos test.sh y test.txt en esta carpeta: </p><br><pre> <code class="bash hljs">mkdir bashscript cat hello-world.py &gt;&gt; bashscript/test.py <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> bashscript/ touch test.sh test.txt <span class="hljs-comment"><span class="hljs-comment"># touch   chmod +x test.sh</span></span></code> </pre> <br><p>  Ahora, de cualquier manera conveniente, escribimos el script en el archivo test.sh: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #       #! ( ) #          clear #    termux-battery-status &gt; test.txt #  1  2    cat test.txt #  3 python test.py &gt; test.txt #  4  5 cat test.txt #  6 cat test.txt | termux-clipboard-set #  7 # |  .          termux-clipboard-get #  8 termux-clipboard-get | termux-toast #  9</span></span></code> </pre> <br><p>  Ahora, estando en la carpeta bashscript, escribimos ./test.sh que observamos en el terminal en el dispositivo Android: </p><br><p><img width="50%" src="https://habrastorage.org/webt/_l/aa/cc/_laaccc4hzm_asjl_es6_pfeera.png"></p><br><p>  Entonces escribimos el script de bash planeado.  Puede diluirlo con la salida a la consola de informaci√≥n sobre la ejecuci√≥n de cada acci√≥n (usando echo), lo dejar√© para los lectores. </p><br><h2>  Paso 7 </h2><br><h3>  Hagamos algo √∫til </h3><br><p>  <i>Relativamente √∫til</i> </p><br><p>  Formulamos los t√©rminos de referencia. <br>  Despu√©s de comenzar, la aplicaci√≥n debe colocar una l√≠nea aleatoria del archivo en el portapapeles y notificar sobre esto con un mensaje emergente. </p><br><p>  Tomaremos una secuencia de comandos bash como base, extraeremos una l√≠nea aleatoria de un archivo usando una rutina Python.  Hagamos un plan de trabajo de script: </p><br><ol><li>  Ejecutar subrutina </li><li>  Transfiere el resultado de la rutina al portapapeles </li><li>  Mostrar mensaje emergente </li></ol><br><p>  Decidiremos los nombres del directorio y los archivos de la aplicaci√≥n: </p><br><ul><li>  carpeta rndstr en el directorio de inicio <br><ul><li>  fuente - el archivo del que tomaremos las l√≠neas </li><li>  rndstr.py: una rutina que genera en la consola una l√≠nea aleatoria del archivo fuente </li><li>  rndstr.sh - archivo de script </li></ul></li></ul><br><p>  Creamos el directorio de la aplicaci√≥n y, despu√©s de haberlo movido, creamos archivos all√≠. </p><br><p>  Los primeros dos puntos del plan de script se pueden combinar con una tuber√≠a, como resultado, usando Termux: API obtenemos: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash python ~/rndstr/rndstr.py | termux-clipboard-set # 1  2    termux-toast "OK" # 3 .    ""</span></span></code> </pre> <br><p>  En el archivo fuente puedes poner cualquier texto l√≥gicamente dividido en l√≠neas, decid√≠ poner aforismos: </p><br><div class="spoiler">  <b class="spoiler_title">Listado de archivo sourse</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">   . .    .    ,  . .    . .    . .       . .   ,    ,   . .       ,   . .       ,    . .      ,     . .        . .     ,    . .       ,    . .     -  ,    .      ,     .   ,     ,     . .    ,    . .       ,  . .     ,   . .     ,    .     ,   . .          . .         .           ,     . .   -  .  ,  . .         . .     ,   ,  .        . .     ,    ,  ,     . .     !   ! </code> </pre> </div></div><br><p>  Nos queda por crear una rutina que extraiga una l√≠nea aleatoria del archivo fuente. <br>  Describiremos el algoritmo del subprograma: </p><br><ol><li>  Abre el archivo fuente </li><li>  Cuenta el n√∫mero de l√≠neas en un archivo abierto </li><li>  Cerramos el archivo (no hay nada para mantenerlo abierto demasiado tiempo) </li><li>  Genere un entero aleatorio dentro del n√∫mero de l√≠neas del archivo fuente </li><li>  Abre el archivo fuente </li><li>  Imprimimos una l√≠nea debajo del n√∫mero del n√∫mero generado </li><li>  Cerrar el archivo </li></ol><br><p>  Implementamos el algoritmo en Python (escribo en Python 3.7): </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random  <span class="hljs-comment"><span class="hljs-comment">#      import os  #    path = os.path.abspath(__file__) #       rndstr.py path = os.path.dirname(path)  #      path = path  + '/source' #       source f = open(path)  #   i = 0  #   for str in f: i+=1  #    f.close()  #   j = int(round(i * random.random()))  #      0  i f = open(path)  #   i = 0  #   for str in f:  #       if i == j:  #             print (str, end='')  #             break #       i+=1  #    1 f.close()  #  </span></span></code> </pre> <br><p>  Despu√©s de crear y grabar los archivos, debe otorgar derechos de ejecuci√≥n al archivo <code>rndstr.sh</code> y crear un alias para un inicio r√°pido. </p><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">alias</span></span> rnst=<span class="hljs-string"><span class="hljs-string">"~/rndstr/rndstr.sh"</span></span></code> </pre> <br><p>  Ahora ingresando <code>rnst</code> en la terminal <code>rnst</code> obtenemos un aforismo aleatorio en el portapapeles, que, por ejemplo, puede usarse en correspondencia. </p><br><p>  Entonces escribimos al menos algo √∫til.  Relativamente √∫til. </p><br><h3>  PS </h3><br><p>  En el √∫ltimo paso, deliberadamente no hice capturas de pantalla y no analic√© en detalle algunas de las acciones, escribiendo solo el contenido de los archivos para que los lectores tuvieran la oportunidad de trabajar por su cuenta. </p><br><p>  Inicialmente, plane√© mostrar en este ciclo c√≥mo usar nmap, sqlmap, pero sin m√≠ ya hay muchos art√≠culos sobre este tema.  Si desea que contin√∫e "Termux paso a paso", hay una encuesta a continuaci√≥n, y en los comentarios puede sugerir sobre qu√© m√°s escribir. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/445868/">https://habr.com/ru/post/445868/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445854/index.html">Encontrar un marco JS para la generaci√≥n de UI</a></li>
<li><a href="../445856/index.html">Telegrama despu√©s de 5 a√±os.</a></li>
<li><a href="../445858/index.html">Antig√ºedades: cuando los tel√©fonos eran raros</a></li>
<li><a href="../445860/index.html">La baja volatilidad de Bitcoin (BTC) conducir√° a la pr√≥xima Crypto Bull Run</a></li>
<li><a href="../445862/index.html">JS de todos lados: los 10 mejores informes de HolyJS 2018 Mosc√∫</a></li>
<li><a href="../445878/index.html">Deshacerse de paquetes duplicados en paquetes</a></li>
<li><a href="../445880/index.html">Entrevista en ingl√©s: c√≥mo hablar de ti correctamente</a></li>
<li><a href="../445884/index.html">La misi√≥n lunar Bereshit: ocho hitos de √©xito y $ 1 mill√≥n de la Fundaci√≥n XPRIZE (sujeto a un aterrizaje exitoso)</a></li>
<li><a href="../445886/index.html">"C√≥mo dejar de quemar" o sobre los problemas del flujo entrante de informaci√≥n de una persona moderna</a></li>
<li><a href="../445890/index.html">PyTest Neo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>