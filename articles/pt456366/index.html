<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÉ ‚úñÔ∏è ü§ê Como projetei a caixa LED HEART üë®üèΩ‚Äçüé§ üèâ üë©üèª‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sauda√ß√µes, Habr! 

 Quero contar uma hist√≥ria sobre a cria√ß√£o de uma caixa de m√∫sica com elementos de ilumina√ß√£o - um belo presente com a possibilidad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como projetei a caixa LED HEART</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456366/">  Sauda√ß√µes, Habr! <br><br>  Quero contar uma hist√≥ria sobre a cria√ß√£o de uma caixa de m√∫sica com elementos de ilumina√ß√£o - um belo presente com a possibilidade de sele√ß√£o individual de efeitos de ilumina√ß√£o e acompanhamento musical.  A caixa chamava-se comum - LED HEART.  Qualquer trabalho foi feito, quero compartilhar uma pequena hist√≥ria sobre como trabalhar nesse projeto de "hobby". <br><br>  N√£o √© segredo que, na rede (incluindo Habr√©), voc√™ pode conhecer muitos projetos para criar dia dos namorados, cora√ß√µes, etc.  V√≠deos de demonstra√ß√£o com eles costumam coletar cr√≠ticas lisonjeiras e entusiasmadas nos coment√°rios.  Ao mesmo tempo, a oportunidade de oferecer um presente t√£o interessante at√© agora permaneceu como muitos engenheiros, presuntos, etc.  pessoas com qualifica√ß√µes suficientes para repetir o projeto de algu√©m / criar o seu pr√≥prio.  Al√©m disso, voc√™ precisa de muito tempo livre para isso.  Eu n√£o vi uma produ√ß√£o em lote de tal presente.  O mais pr√≥ximo s√£o os kits de solda amadores mais simples de um par de empresas dom√©sticas e op√ß√µes semelhantes apresentadas em sites chineses. <br>  Essa ideia inicialmente levou a iniciar um projeto para criar um cora√ß√£o de LED, que estar√° dispon√≠vel n√£o apenas para aqueles que est√£o ‚Äúcom voc√™‚Äù com a eletr√¥nica. <br><br>  Vou come√ßar um pouco de longe, com um pano de fundo.  Durou v√°rios anos ... <a name="habracut"></a><br><br><h3>  Antecedentes </h3><br>  O primeiro v√≠deo com um cora√ß√£o de LEDs que vi em 2010 em um dos canais do youtube.  O projeto foi impressionante.  E em 2011, como estudante, durante algumas semanas de trabalho √† noite, secretamente da namorada, ele montou uma vers√£o simples do cora√ß√£o do LED e a apresentou em 8 de mar√ßo.  O projeto foi desenvolvido por mim - hardware e firmware - estudado, inventado bicicletas. <br><br>  Parecia ... em geral, algo como isto: <br><br><img src="https://habrastorage.org/webt/aa/ii/gz/aaiigzidhcvjjne9-iys01aj3_g.png" alt="imagem"><br><br><img src="https://habrastorage.org/webt/3g/w7/wk/3gw7wk6ohmy_mfadpdkomtq2aqw.jpeg" alt="imagem"><br><br>  Infelizmente, nenhuma foto transmite completamente o grau de exclusividade de presentes que me parecia insuper√°vel em alguns lugares h√° 9 anos.  Havia uma placa de circuito impresso com Attiny13A na lata a partir do peixe enlatado (MK n√£o √© vis√≠vel na foto, foi soldado por fios do lado de fora - um monte de fios que se estende al√©m da borda superior da foto), com registros de turno e LEDs brilhantes soldados ao longo do contorno do s√≠mbolo do cora√ß√£o.  Do lado de fora da tampa da lata, h√° uma inscri√ß√£o: ‚ÄúNas suas m√£os tudo est√° cheio de amor ... e at√© ...‚Äù e no interior ‚Äú‚Ä¶ cavala.  Desde 8 de mar√ßo! ‚Äù  Ao pressionar um grande bot√£o vermelho, as luzes come√ßaram a acender, os LEDs piscaram e brilharam de acordo com o que entrava em 1 kilobyte de mem√≥ria do microcontrolador.  Criatividade e romance ca√≠ram no limite, como voc√™ pode ver.  Pelo que me lembro agora, ando entre as fileiras do supermercado e penso em que tipo de caso escolher para um "presente saud√°vel" ... de repente meus olhos ficam em uma prateleira com enlatados ... e aqui est√° ... insight ... <br><br>  Bem, um pouco distra√≠do, vou continuar. <br><br><h3>  A hist√≥ria em si </h3><br>  Tendo recebido a resposta desejada de sua futura esposa, o pensamento se instalou em sua mente de que a produ√ß√£o e a venda de presentes t√£o interessantes podem fazer sentido em princ√≠pio.  Essa lembran√ßa evoca emo√ß√µes positivas e simboliza os sentimentos calorosos da pessoa que a entrega.  Mas estudo, diploma, trabalho, rotina e vida pessoal n√£o permitiram alocar tempo suficiente para se envolver em tais aventuras - tudo terminou antes de come√ßar. <br><br>  3 anos se passaram ... 2014 chegou ... Em algum momento, comecei a trope√ßar em projetos semelhantes na Internet novamente - alguns deles j√° eram mais avan√ßados e interessantes - a id√©ia de desenvolver minha pr√≥pria vers√£o √∫nica do cora√ß√£o e participar de sua produ√ß√£o acesa com vigor renovado, n√£o havia nada assim antes.  Ao mesmo tempo, obviamente, as pessoas demonstraram interesse.  J√° tendo experi√™ncia em engenharia, ele come√ßou a abordar essa quest√£o de forma mais sistem√°tica.  Mas, ainda assim, o trabalho nesse cora√ß√£o ocorreu no modo hobby - algumas noites e nos fins de semana, se poss√≠vel, em paralelo com outros projetos de ‚Äúhobby‚Äù e o trabalho principal, que estava em primeiro lugar na prioridade de todos os trabalhos.  Portanto, no final, o prazo acabou sendo incrivelmente inchado para esse projeto. <br><br>  Como o estudo come√ßou? <br><br>  Em primeiro lugar, as defici√™ncias nas constru√ß√µes amadoras vistas foram identificadas e avaliadas.  A coisa mais importante que foi observada ent√£o: <br><br><ul><li>  Falta de variedade de elementos de ilumina√ß√£o. </li><li>  A simplicidade e a falta de jeito dos desenhos, que sempre lubrificam a primeira impress√£o e podem n√£o levar ao efeito adequado ao dar.  A esmagadora maioria dos dispositivos examinados parecia artesanato amador, nada mais (como o que fiz em 2010) - s√≥lido, nada s√©rio, chato ... A maioria dos projetos considerados de cora√ß√£o ou n√£o tem corpo, ou esse corpo √© terr√≠vel - Ala uma serra de madeira compensada apodrecida, um parafuso perfurante em uma placa, janelas da organiza√ß√£o.  vidro, etc.  Um certo ideal √© necess√°rio - o tipo de dispositivo n√£o deve pelo menos assustar as pessoas, pelo contr√°rio - deve transmitir ao m√°ximo toda a gama de sentimentos de quem o transmite e, ao mesmo tempo - o dispositivo n√£o deve ser muito dimensional, super complexo, etc. . </li><li>  A falta de efeitos sonoros dos efeitos da luz nos projetos dos cora√ß√µes (com raras exce√ß√µes), embora, na minha opini√£o, implore por si.  Basta piscar a matriz de LEDs n√£o √© suficiente.  A m√∫sica deve melhorar o efeito, adicionar romance no momento da doa√ß√£o.  A m√∫sica pode at√© ser uma caracter√≠stica individual de um presente, pois "aquece" a atmosfera certa para a situa√ß√£o correspondente - rom√¢ntica / solene / engra√ßada e qualquer outra.  Havia uma suposi√ß√£o de que, se os efeitos da ilumina√ß√£o, para todo o resto, tamb√©m forem sincronizados com a melodia de fundo - ser√° muito legal, convincente e legal. </li><li>  Como, de acordo com o par√°grafo anterior, deve haver m√∫sica - a id√©ia de fazer uma caixa de m√∫sica surgir por conta pr√≥pria - voc√™ a abre - ela toca e brilha - voc√™ a fecha - ela para e desaparece. </li></ul><br>  Todos esses pensamentos o c√©rebro invadiu por um tempo.  Primeiro eu tive que decidir sobre a funcionalidade espec√≠fica da caixa.  Em termos gerais, foi visto da seguinte forma: <br><br><ul><li>  O cora√ß√£o deve ter uma matriz de LEDs, com resolu√ß√£o suficiente para que voc√™ possa executar uma linha de execu√ß√£o e fazer a anima√ß√£o mais simples.  Dever√° ser poss√≠vel desvanecer-se suavemente e acender os LEDs. </li><li>  Deve ser poss√≠vel criar e corrigir rapidamente os efeitos de ilumina√ß√£o para a r√°pida reestrutura√ß√£o do programa de ilumina√ß√£o para um cliente espec√≠fico.  Deve-se esclarecer que o modelo de intera√ß√£o com os clientes implicava o seguinte.  Inicialmente, o cliente recebe um conjunto b√°sico de programas de ilumina√ß√£o com melodias predefinidas, das quais ele seleciona o que √© mais adequado para seus desejos - al√©m disso, por sua parte, ajustaremos o programa de ilumina√ß√£o, adaptando-o a essa pessoa em particular, sua ocasi√£o / feriado (texto da linha de execu√ß√£o, que outros quadros).  No futuro, planejava-se expandir gradualmente a base de m√∫sicas e efeitos de ilumina√ß√£o dispon√≠veis.  Al√©m disso, da minha parte, sempre posso aconselhar a melhor op√ß√£o ap√≥s a comunica√ß√£o com o cliente, com base nos dados de entrada.  A possibilidade de um estudo completamente individual da melodia e da ilumina√ß√£o, mas a um custo aumentado, n√£o est√° totalmente descartada.  o processo de compila√ß√£o de um programa de efeitos de ilumina√ß√£o para uma nova melodia acaba sendo significativamente mais longo do que outros processos de prepara√ß√£o do dispositivo para venda. </li><li>  Um caso ilus√≥rio (contando apenas com o seu gosto no est√°gio de prot√≥tipo). </li><li>  Autonomia de poder, como  o dispositivo √© essencialmente uma lembran√ßa, n√£o faz sentido torn√°-lo estacion√°rio, conectado a uma fonte externa. </li></ul><br>  Al√©m disso, esses requisitos foram formalizados em tarefas t√©cnicas espec√≠ficas e, uma a uma, essas tarefas foram gradualmente resolvidas.  No processo, diferentes materiais foram examinados, tipos de projetos, circuitos foram pensados, bem, escrever o software, perceber a capacidade de adicionar / remover / editar rapidamente efeitos de ilumina√ß√£o, etc., levou a maior parte do tempo. <br>  Como exemplo de tais transforma√ß√µes, posso oferecer uma demonstra√ß√£o da vers√£o intermedi√°ria da caixa de prot√≥tipo fabricada em 2015 - pode ser considerado condicionalmente o resultado da itera√ß√£o 1 (a qualidade do v√≠deo √© terr√≠vel, o som foi sobreposto separadamente do arquivo mp3, n√£o poderia ser gravado adequadamente): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/F8leTFH6pFw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  E j√° a vers√£o final, montada em 2017: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0MPJeOb9aJI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Pode parecer que aqui os LEDs brilham mais escuros do que na vers√£o de 2015, mas n√£o √© assim - era apenas o fato de que, ao fotografar, a fonte externa era muito forte.  O som aqui j√° √© real. <br><br>  Quando esse exemplo apareceu, muita coisa havia mudado tanto fora quanto dentro do dispositivo e na parte do software. <br><br><h3>  Brevemente sobre HW </h3><br>  A caixa eletr√¥nica est√° localizada em tr√™s placas de circuito impresso.  Em um - LEDs, transistores e resistores, necess√°rios para a inclus√£o matricial de LEDs, o microcontrolador de controle Atmega32A e sua fia√ß√£o.  Na segunda placa, o controle de inicializa√ß√£o √© implementado quando a caixa √© aberta, um circuito de desligamento com uma redu√ß√£o inaceit√°vel da tens√£o de alimenta√ß√£o.  A terceira placa possui um mp3 player (m√≥dulo adquirido). <br><br>  O estojo √© uma caixa de metal comprada.  No interior, toda a estrutura √© baseada em uma moldura pl√°stica impressa em uma impressora 3D.  Alguns elementos s√£o mantidos por juntas adesivas, a placa principal √© mantida em √≠m√£s montados em uma base pl√°stica. <br>  A caixa √© alimentada por tr√™s pilhas AAA. <br><br><h3>  Brevemente sobre SW </h3><br>  Para o PC, foi desenvolvido um programa - um gerador de c√≥digo com interface gr√°fica, que permite criar e editar rapidamente efeitos de ilumina√ß√£o, controlar todos os intervalos de tempo necess√°rios (para sincroniza√ß√£o com a melodia de fundo) e gerar imediatamente um c√≥digo para piscar o microcontrolador localizado na placa do cora√ß√£o.  Um certo formato foi desenvolvido para gravar par√¢metros de efeito em matrizes de dados.  No lado do MK, o firmware analisa essas matrizes e as converte no brilho dos LEDs certos na hora certa.  O formato para gravar efeitos nas tabelas de c√≥digos √© bastante econ√¥mico - a mem√≥ria interna dos programas do microcontrolador √© suficiente para o c√≥digo do firmware e para tabelas com par√¢metros de efeitos de ilumina√ß√£o. <br><br>  Um artigo separado pode ser escrito sobre como resolver problemas t√©cnicos e problemas encontrados durante o desenvolvimento.  Obviamente, essa n√£o √© uma ‚Äúci√™ncia do foguete‚Äù e mastigar essas perguntas pode ser entediante para o p√∫blico, mas se algu√©m estiver interessado, voc√™ pode definitivamente ficar confuso. <br><br><h3>  Sum√°rio </h3><br>  Qual √© o resultado?  O projeto do caix√£o ainda pode ser lambido e atualizado infinitamente, aprimorado em dire√ß√µes completamente diferentes, funcionalidade adicionada etc.  Mas, na forma em que a caixa foi concebida - isso foi feito, o projeto de desenvolvimento foi conclu√≠do.  Para produ√ß√£o em s√©rie (pequena), √© necess√°rio fazer mais trabalho, mas isso √© uma quest√£o de tecnologia, como eles dizem. <br><br>  Em algum lugar no meio da jornada, percebi que tentar desenvolver de forma independente o componente comercial do projeto n√£o era muito interessante para mim, n√£o havia tempo nem muito desejo por ele.  N√£o havia ningu√©m que assumisse a maior parte do trabalho de organiza√ß√£o de vendas, trabalhando com melodias e efeitos de ilumina√ß√£o no meu ambiente.  Com uma parceria t√£o potencial, concordei em encerrar todos os problemas t√©cnicos, produ√ß√£o, compras e log√≠stica.  Mas n√£o deu certo.  E o tempo √© constantemente ocupado por outras tarefas - mais interessantes ou simplesmente necess√°rias / dom√©sticas. <br><br>  Portanto, no momento, considero o projeto conclu√≠do nesta fase.  No total, foram feitas 3 c√≥pias da vers√£o mais recente - duas para presentes aos entes queridos e uma c√≥pia feita sob encomenda.  Pode acontecer que algum tipo de hist√≥ria continue em algum momento, n√£o prometo, mas no momento o status √© assim.  Em geral, o resultado do trabalho me satisfez.  Mas o mais valioso √© a rea√ß√£o dos entes queridos, a quem as primeiras amostras de cora√ß√£o foram destinadas, pois n√£o seria uma pena gastar tanto quanto voc√™ gosta muito! <br><br>  Bem, em termos da racionalidade de conduzir um projeto como esse, foram tiradas conclus√µes objetivas, li√ß√µes aprendidas que certamente me servir√£o em a√ß√µes e realiza√ß√µes futuras! <br><br>  Obrigado pela leitura, estou sempre feliz em falar nos coment√°rios, se voc√™ tiver d√∫vidas, coment√°rios, sugest√µes. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt456366/">https://habr.com/ru/post/pt456366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt456350/index.html">Eventos digitais em Moscou, de 17 a 23 de junho</a></li>
<li><a href="../pt456352/index.html">M√≥dulo de comunica√ß√£o de objetos sem fio WISE-4000</a></li>
<li><a href="../pt456354/index.html">Como coletamos caixas de TV</a></li>
<li><a href="../pt456358/index.html">Os 13 artigos mais infames do ano passado</a></li>
<li><a href="../pt456362/index.html">Designer de n√≠vel 6: como motivamos e desenvolvemos designers</a></li>
<li><a href="../pt456368/index.html">Executando transa√ß√µes p√∫blicas e privadas no blockchain JPMorgan Quorum usando Web3</a></li>
<li><a href="../pt456370/index.html">Implementar QoS no armazenamento Qsan</a></li>
<li><a href="../pt456372/index.html">SimbirSoft convida profissionais de TI para o ver√£o intensivo de 2019</a></li>
<li><a href="../pt456374/index.html">Estruturas de dados de estado de blockchain do Plasma Cash</a></li>
<li><a href="../pt456376/index.html">N√£o √© uma bota primavera: uma vis√£o geral das alternativas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>