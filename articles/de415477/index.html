<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õîÔ∏è üç¢ üëêüèΩ √úberwachung des Betriebs von Vorort-Heimsystemen: Die ersten Schritte zu einem Smart Home üêû üëåüèø ‚òØÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der vorherige Artikel l√∂ste eine ziemlich hitzige Diskussion aus, und dieser Umstand √ºberzeugte mich von der Notwendigkeit, das, was wir "Erfahrungsau...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√úberwachung des Betriebs von Vorort-Heimsystemen: Die ersten Schritte zu einem Smart Home</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/415477/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/1q/ir/bi/1qirbi2pjzork0gilefg7xlyoho.jpeg"></div><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der vorherige Artikel</a> l√∂ste eine ziemlich hitzige Diskussion aus, und dieser Umstand √ºberzeugte mich von der Notwendigkeit, das, was wir "Erfahrungsaustausch" nennen, fortzusetzen.  Wir haben uns also darauf geeinigt, dass ich nach dem Erscheinen alternativer Energiequellen im Haus, vor allem des Solarkollektors, die Parameter messen wollte, die mit ihrer Arbeit einhergehen.  Um beispielsweise zu sehen, wie sich die Temperatur des Solark√ºhlmittels √§ndert, √ºberhitzt sich das Wasser im Kessel usw.  Es ist klar, dass die Messung von etwas an sich und sogar die √úbermittlung dieser Informationen an den Verbrauchsort (Telemetrie) weder den Komfort noch die Sicherheit erh√∂ht. Daher wurde der ‚ÄûTK‚Äú sofort ein Element auf der Fernbedienung verschiedener Aktuatoren hinzugef√ºgt.  In diesem Artikel werde ich keine Codelisten geben, sondern alle technischen L√∂sungen bis ins kleinste Detail detaillieren.  Mein Ziel ist es, den Gedankengang und die angenommenen technischen L√∂sungen sowie deren Ergebnis aufzuzeigen.  Wer einen √§hnlichen Weg einschlagen will, muss noch viele Probleme selbst l√∂sen. </p><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Ein leichter lyrischer Exkurs.</b> <div class="spoiler_text"><p>  Im Jahr 2010 erschien zusammen mit einem Wechselrichter / Batterien ein universelles GSM-Controller-Alarmsystem der russischen Firma RADS Electronics im Haus.  Dieses wunderbare Universalger√§t wurde zus√§tzlich zu Alarmfunktionen mit GSM-Warnungen verwendet, um auch das Licht im Wohnzimmer und vor allem den Elektrokessel zu steuern.  So habe ich vor langer Zeit gelernt, die Temperatur zu kontrollieren, die Temperatur aufrechtzuerhalten und das Haus vor der Ankunft im Voraus zu w√§rmen.  Die Bequemlichkeit solcher Systeme liegt auf der Hand.  Die F√§higkeiten des Controllers sind jedoch begrenzt, so dass der neue ‚ÄûTK‚Äú zun√§chst den Grundstein f√ºr die Schaffung eines parallelen Systems legte, selbst bei sich teilweise wiederholenden Funktionen und nat√ºrlich beim Zugriff auf Informationen von Sensoren und der Steuerung √ºber das Internet. </p></div></div><br><p>  Die anf√§nglichen Anforderungen drohten also: </p><br><ol><li>  Messen Sie die Temperatur an allen 8 Kesseld√ºsen und 2 Kesseld√ºsen. </li><li>  Messen Sie die Temperatur und Luftfeuchtigkeit im Heizraum, in dem das Ger√§t montiert ist. </li><li>  Messen Sie die Temperatur und Luftfeuchtigkeit der Au√üenluft.  Um eines Tages eine wetterabh√§ngige Heizungsregelung zu implementieren. </li><li>  Fahren Sie einen Elektrokessel, w√§hrend Sie das alte System beibehalten.  Der Kessel ist dreistufig mit Einstellung der Heiztemperatur und R√ºckmeldung √ºber die Temperatur des K√ºhlmittels.  F√ºr Fernbedienungszwecke ist es jedoch ausreichend, die Heizschritte ein- und auszuschalten. </li><li>  Kesselheizung verwalten. </li><li>  Verlegen Sie ein Minimum an Dr√§hten.  Nicht so sehr, um sich nicht darum zu k√ºmmern, sondern weil die Dekoration im Haus bereits erfolgt ist. </li><li>  Verf√ºgen Sie √ºber eine praktische Oberfl√§che zum Verwalten und Arbeiten mit Sensorwerten.  Die Schnittstelle muss auf mobilen Ger√§ten zug√§nglich sein. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Und noch ein kleiner Exkurs.</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/-l/p-/jz/-lp-jzlqt49mog78ksamlq75azq.jpeg" align="left">  <i>Auf dem Foto - ein Generator mit einem elektrischen Anlasser.</i>  <i>F√ºr den Winterstart musste ich eine Autobatterie und ein Ladeger√§t einsetzen.</i>  <i>Und verwenden Sie synthetisches √ñl.</i> </p><br><p>  Alle im selben Jahr 2010 lie√ü sich ein Benzingenerator in der Garage nieder.  Und bald wurde ein automatischer Startcontroller hinzugef√ºgt, der unabh√§ngig auf der Basis des Arduino-Mikrocontrollers hergestellt wurde.  Die Steuerung pr√ºft nicht nur das Vorhandensein eines 220-V-Netzwerks, sondern auch das Signal des Wechselrichters √ºber die Entladung der Batterien, und der Wechselrichter selbst liefert die automatische Eingabe des Generators.  Insgesamt war es m√∂glich, einen ziemlich intelligenten Generatorsteuerungsalgorithmus zu implementieren.  Im Allgemeinen bestand keine Angst vor der Verwendung von Mikrocontrollern, sowohl im Sinne der Verbindung von Peripherieger√§ten als auch im Sinne der Programmierung.  In der Vergangenheit habe ich viel in C / C ++ programmiert. </p></div></div><br><p>  Die Anforderungen sind im Allgemeinen einfach, wenn nicht trivial.  Es gibt Tausende verschiedener M√∂glichkeiten, sie zu implementieren.  Deshalb ist der Eckpfeiler die Wahl der Architektur und der technologische Stapel, auf dem das neue System aufgebaut wird.  Der systematische Ansatz ist genau das, was hier wichtig ist, das Verst√§ndnis, dass einzelne technische L√∂sungen miteinander verkn√ºpft werden m√ºssen, das Verst√§ndnis, dass das System sicherlich weiter expandieren wird, wie es bereits beim Stromversorgungssystem zu Hause geschehen ist.  Au√üerdem ist es wichtig, Ihre eigenen F√§higkeiten zu verstehen.  Deshalb musste ich googeln, "Hilfe vom Publikum" nehmen und "einen Freund anrufen". </p><br><p>  <i>Auf dem Foto Arduino Nano und nRF24L01 + mit Antenne</i> <br><img src="https://habrastorage.org/webt/8b/jv/9m/8bjv9mq_4o9_pllkockdofys34m.jpeg" align="left">  Ich fing an, nach Systemen zu suchen, die auf dem weit verbreiteten Z-Wave-Standard basieren. Dies beeinflusste weitere Entscheidungen stark, obwohl Z-Wave zun√§chst verworfen wurde.  Da Z-Wave eine offensichtliche Wahl f√ºr Anforderungen in meiner N√§he ist, ist es wichtig zu verstehen, warum es fallengelassen wurde.  Zun√§chst nat√ºrlich die Kosten f√ºr einen Sensor.  Und ich muss nur die Temperatur an einem Kessel an 8 Punkten messen, jeder Punkt ergibt 3000+ Rubel.  Zweitens der Formfaktor von Standardsensoren, die ihre Verwendung an Kesseld√ºsen nicht zulassen.  Drittens die begrenzte Auswahl an Steuerungssystemen und Fernzugriff, die ebenfalls alle propriet√§r (Sie sollten lesen: "begrenzt") und bezahlt sind.  Die Idee eines selbstorganisierenden Netzwerks mit der M√∂glichkeit sowohl der Peer-to-Peer-Kommunikation (Assoziationen) eines Sensor-Aktors als auch einer zentralisierten Server-Client-Verwaltung ist jedoch sehr attraktiv.  Auf Anraten eines Freundes ging er an ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">interessantes Projekt</a> , das zun√§chst wie eine Erweiterung der Funktionalit√§t von Z-Wave-Systemen auf Basis von Vera-Controllern aussah, jedoch den DIY-Ansatz verwendete.  Das Projekt verwendete Arduino, 2,4 GHz nRF24L01 + drahtlose Transceiver und die entsprechende Bibliothek.  Alles zusammen ist genau das, was f√ºr meine Anforderungen ben√∂tigt wird.  Die Verwendung von Arduino er√∂ffnet nahezu unbegrenzte M√∂glichkeiten der Hausautomation f√ºr Geld, eine Gr√∂√üenordnung (!) Kleiner als bei Z-Wave.  Es ist auch wichtig, dass Arduino eine au√üergew√∂hnlich stabile Plattform ist.  Der Generator-Autostart-Controller, der einmal auf dem Arduino montiert wurde, funktioniert seit 7 Jahren einwandfrei.  Aufgrund der Erfahrung mit Entwicklung, L√∂ten und Programmieren habe ich dieses Projekt eingestellt. </p><br><p>  Und ging sogar weiter.  Im Code habe ich mich v√∂llig geweigert, mich an Vera zu binden.  Stattdessen w√§hlte er einen der vom Autor der mysensors-Bibliothek empfohlenen Software-Controller.  Nachdem er die Foren und Websites der Hersteller studiert hatte, wurde er zum Open-Source-Projekt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">openHAB</a> .  Ausschlaggebend f√ºr die Offenheit, die plattform√ºbergreifende, integrierte, leistungsstarke Regelsprache und die Pr√§senz mobiler Clients war die folgende erkl√§rte Eigenschaft: ‚ÄûAnbieter- und Technologie-Agnostiker‚Äú.  Genau das braucht ein systemorientierter IT-Spezialist: die M√∂glichkeit, das System in Zukunft mit Komponenten verschiedener Hersteller und Standards zu erweitern und gleichzeitig f√ºr bestimmte Zwecke am besten geeignet zu sein.  Das hei√üt,  Von Anfang an bestand das Verst√§ndnis, dass nicht alles auf dem Arduino erledigt <b>werden</b> muss und nicht alles innerhalb der Grenzen von Z-Wave m√∂glich ist.  Gleichzeitig habe ich mich f√ºr eine zentralisierte Verwaltungslogik entschieden, was zun√§chst einmal ganz nat√ºrlich ist.  Das hei√üt,  Bei auf Arduino montierten Endger√§ten gibt es nur eine minimale Gesch√§ftslogik: Ein- und Ausschalten des Lichts von herk√∂mmlichen mechanischen Schaltern, die einfach zu Sensoren werden, Lesen und Konvertieren von Informationen von Sensoren physikalischer Parameter, √úbertragen von Daten an den Server, Empfangen und Ausf√ºhren von Befehlen vom Server.  Ich plane keine direkte Interaktion zwischen Ger√§tenetzwerkknoten.  Alle echte Gesch√§ftsf√ºhrungslogik basiert auf openHAB-Regeln.  Jetzt sind noch kleine Dinge √ºbrig - w√§hlen Sie die Hardwareplattform und das Betriebssystem f√ºr den Serverteil f√ºr openHAB. </p><br><p>  Viele DIY-Enthusiasten unter openHAB w√§hlen den Raspberry Pi.  Und dies ist eine gro√üartige L√∂sung, wirtschaftlich, kompakt und leise.  Es schien mir jedoch falsch, mich auf die Rechenleistung zu beschr√§nken, da ich mich sofort entschied, den zuk√ºnftigen Server als multifunktionales Ger√§t zu verwenden. Ich wollte beispielsweise das Kodi Media Center darauf und m√∂glicherweise in Zukunft etwas anderes, beispielsweise einen Software-Videorecorder, bereitstellen.  Mit Blick auf die Zukunft werde ich sagen, dass Kodi am Ende in ein Smart Home integriert ist. Wenn das Video startet, erlischt das Licht, wenn es stoppt, leuchtet es auf.  Und der DVR erschien auch und ist auch integriert.  Gleichzeitig habe ich keine besonderen Anforderungen an Multimedia-Komponenten, es reicht aus, dass der Server √ºber HDMI und S / PDIF verf√ºgt.  Im Herbst 2015 fiel die Wahl auf einen l√ºfterlosen Nettop von Hystou (siehe AliExpress): Intel Core i7, 8 GB, 256 GB SSD, 8 USB-Anschl√ºsse, einschlie√ülich 4 3,0, 2 LAN, WLAN, 2 HDMI, S / PDIF, Kartenleser im Allgemeinen alles, was Sie f√ºr das Gl√ºck einer DIY-Box brauchen.  Er kostete dann etwa 24 tr.  Ich habe die Wahl nie bereut, obwohl ich sagen muss, dass WiFi f√ºr ihn nicht sehr stabil ist.  Aber die Erfahrung, die all dem folgte, sagt zuversichtlich: Wo immer Sie Dr√§hte verlegen k√∂nnen - verlegen Sie Dr√§hte.  Ein Funkkanal ist unabh√§ngig von Standard und Frequenz (WLAN, Z-Wave, 433 MHz, 869 MHz, 2,4 GHz usw.) immer schlechter als ein Kabel.  Daher wird der Nettop schlie√ülich mit dem Heim-LAN-Kabel verbunden.  Und mehrere weitere verschiedene Systeme haben sich darauf niedergelassen. <br>  F√ºr das Betriebssystem des Servers w√ºrde ich Stabilit√§t und Vorhersagbarkeit empfehlen.  Linux-Distributionen mit einer gro√üen Community haben diese Eigenschaft.  Ich bin mit Ubuntu besser vertraut.  Dank plattform√ºbergreifender Funktionen kann alles unter Windows ausgef√ºhrt werden. </p><br><p>  Architektur und Stapel werden also ausgew√§hlt.  Wir handeln. </p><br><p><img src="https://habrastorage.org/webt/2h/na/oq/2hnaoqpssegd8ks0mgvm5bpymd4.jpeg" align="left">  <b>Aufgabe 1.</b> W√§hlen Sie Sensoren und Aktoren aus.  Die Temperatur des K√ºhlmittels und des Wassers wird an den D√ºsen des Kessels und des Kessels gemessen.  Dazu nehmen wir 1-Draht-DS18B20-Sensoren in ein metallversiegeltes Geh√§use, die von au√üen bequem direkt an den D√ºsen montiert werden.  Und die Rohre selbst mit Sensoren oben sind mit einer Schaumisolierung f√ºr Rohre abgedeckt.  Wenn es viele √§hnliche Sensoren gibt, ist der 1-Draht-Bus sehr praktisch.  Um die Lufttemperatur und Luftfeuchtigkeit im Heizraum und auf der Stra√üe zu messen, w√§hlen wir DHT22, einfach weil dies eine Standard-DIY-Wahl ist.  Verwalten Sie den Kessel schrittweise - mit herk√∂mmlichen mechanischen F√ºnf-Volt-Relais, die auch DIY-Schalttafeln bekannt sind.  Es ist wichtig zu beachten, dass diese Relais parallel zu den Stufenschaltern am Kessel geschaltet sind und nicht zu den TEN-Relais, die von der Kesselautomatisierung gesteuert werden.  Alle ausgew√§hlten Peripherieger√§te sind entweder direkt kunstlos programmiert, z. B. ein Relais, oder verf√ºgen √ºber die entsprechenden Bibliotheken f√ºr Arduino, z. B. 1-Draht / DS18B20 / DHT22.  Keine Komplikationen. </p><br><p>  <i>Auf dem Foto ein 300l Kessel.</i>  <i>Es ist zu sehen, dass sich ein schwarzes Kabel mit einem Sensor am Ende jedem Abzweigrohr n√§hert, diese in einer wei√üen Box kombiniert sind und ein gemeinsames wei√ües 1-Draht-Kabel zur Steuerung f√ºhrt.</i> </p><br><p>  <b>Aufgabe 2.</b> Daten und Befehle mit openHAB austauschen.  Ich musste ein bisschen basteln, denn mit openHAB war ich noch nicht "auf dich".  Die Architektur von Mysensoren impliziert das Vorhandensein eines Gateways (Gateways) zum Verbinden mit dem zentralen Controller / Server, d. H.  zu openHAB. <img src="https://habrastorage.org/webt/gs/hc/ku/gshcku8ujafvh5b_mytcifai_kw.jpeg" align="right">  Das Gateway selbst ist ein physisch separater Controller auf dem Arduino / nRF24L01 + und kann √ºber LAN / WiFi oder Serial mit dem Server verbunden werden.  Da ich am Anfang des Pfades bin, w√§hle ich Seriell und platziere das Gateway neben dem Server.  Das Gateway wird verwendet, um Nachrichten, die √ºber das Gateway an das mysensors-Netzwerk gesendet werden, weiterzuleiten und direkt mit dem zentralen Controller openHAB zu kommunizieren.  Mysensors-Nachrichten haben ein festes Format und sind leicht zu analysieren.  Wir f√ºgen der openHAB-Bindungsserie Serial hinzu, um das Gateway √ºber USB zu verbinden, und schreiben eine Regel zum Parsen von Nachrichten von Ger√§ten im mysensors-Netzwerk, die √ºber USB vom Gateway empfangen wurden.  Die openHAB-Regel, die Nachrichten analysiert, basiert auf Code, der im mysensors-Forum gefunden wurde.  Als n√§chstes schreiben wir die Regeln f√ºr Aktuatoren - Kesselsteuerrelais, Kesselheizung, Licht usw. </p><br><p>  <i>Das Foto zeigt ein Gateway, eine kleine braune Box mit einer Antenne in einem Audio-Lautsprecher.</i> </p><br><div class="spoiler">  <b class="spoiler_title">√úber openHAB</b> <div class="spoiler_text"><p>  openHAB - eine offene L√∂sung, die mithilfe der Community erweitert wird, indem Bindungen f√ºr bestimmte Ger√§te entwickelt werden, mit denen openHAB interagieren wird.  F√ºr die Interaktion mit Ger√§ten √ºber USB gibt es beispielsweise eine verbindliche Seriennummer.  √Ñhnliches gilt f√ºr andere Ger√§te oder Protokolle, z. B. Modbus, NTP, HTTP, Squeezebox, Kodi / XBMC, Z-Wave, ZigBee, Nest usw.  Ich selbst habe als aktiver Modbus-Bindungstester an der Entwicklung teilgenommen. </p></div></div><br><p><img src="https://habrastorage.org/webt/gv/ud/dt/gvuddthvqwvemt9nxugqzbcefjg.jpeg" align="left">  W√§hrend ich mit dem Verbinden des Gateways mit dem openHAB-Server besch√§ftigt war, beschloss ich, den Gateway-Code (und das Gateway selbst), der von mysensors.org stammt, zu finalisieren und einen Temperatur- und Feuchtigkeitssensor DHT22 sowie einen Atmosph√§rendrucksensor BMP180 hinzuzuf√ºgen. Gleichzeitig fand ich den Quellcode f√ºr die Vorhersage des Wetters anhand der atmosph√§rischen Dynamik Druck.  Alle diese Messungen und Vorhersagen werden an openHAB √ºbergeben. <br>  <i>Auf dem Foto befindet sich das Gateway im Inneren.</i>  <i>Auf dem wei√üen Draht ist DHT22, die Platine mit den freien Pins ist Arduino, unten rechts ist nRF24L01 + und BMP180.</i> </p><br><p>  <b>Aufgabe 3.</b> Schnittstelle und Fernzugriff.  openHAB ist ein vollst√§ndig anpassbares System, einschlie√ülich des Schnittstellenlayouts.  Dieses Markup ist einheitlich, sowohl f√ºr den normalen Zugriff √ºber einen Browser als auch √ºber eine mobile Anwendung.  Universelles Markup ist nat√ºrlich nicht ideal, aber auf einem Smartphone sieht es gut aus, und das ist wichtig.  Es bleibt zu entscheiden, wie auf den openHAB-Server au√üerhalb des lokalen Netzwerks zugegriffen werden soll.  Erstens k√∂nnen Sie (und vor allem optional) die myopenhab.org-Cloud verwenden.  Der openHAB-Server stellt √ºber eine spezielle Bindung eine direkte Verbindung zur Cloud her.  Diese L√∂sung ist die einfachste und bietet die volle Systemverwaltungsfunktion, mit Ausnahme der √úbertragung von Videos von IP-Kameras.  Zweitens gibt es f√ºr diejenigen, die die Wolken nicht m√∂gen und zu denen ich geh√∂re, die √ºblichen Mittel f√ºr den Fernzugriff, zum Beispiel eine Kombination aus VPN + VNC usw.  Ich werde aus offensichtlichen Gr√ºnden keine Details offenlegen, zumal dieses Problem nicht direkt mit dem Thema des Artikels zusammenh√§ngt.  Ich stelle nur fest, dass der mobile openHAB-Client eine Konfiguration f√ºr zwei Adressen hat.  Es geht zum ersten, wenn es einen openHAB-Server an dieser Adresse sieht, zum zweiten - wenn dies nicht der Fall ist.  Dies ist eine sehr praktische Funktion der Benutzeroberfl√§che.  Beispielsweise k√∂nnen Sie die Cloud als zweite Adresse angeben. OpenHAB ist dann immer ohne zus√§tzliche Manipulationen an der VPN-Verbindung verf√ºgbar.  Oder geben Sie die virtuelle Adresse an, die Sie mit einer VPN-L√∂sung erhalten haben.  Oder etwas anderes. </p><br><table><thead><tr><th>  Interface-Startbildschirm </th><th>  Scrollen Sie auf dem Startbildschirm nach unten </th><th>  Der ge√∂ffnete Men√ºpunkt "Licht" </th></tr></thead><tbody><tr><td><img src="https://habrastorage.org/webt/9z/ls/yp/9zlsyp9mydxjhq7g46p4a1lqvba.jpeg"></td><td><img src="https://habrastorage.org/webt/j8/zx/7_/j8zx7_o6z7tb2ihivbhn-tbkqzw.jpeg"></td><td><img src="https://habrastorage.org/webt/vp/ws/ld/vpwsldzn6krpnzqvvzqow0yvtuy.jpeg"></td></tr></tbody></table><br><p>  <em>Mit dem Markup k√∂nnen Sie eine bedingte Formatierung durchf√ºhren. Markieren Sie beispielsweise die Temperatur rot, wenn sie den im Markup angegebenen Wert √ºberschreitet.</em>  <em>Einige Elemente werden angezeigt, wenn sie gedr√ºckt werden, z. B. "Heizung", "Licht", "Sirene" usw.</em> </p><br><p>  Das ist alles  Wir nehmen einen L√∂tkolben und dann eine Tastatur.  Und nach und nach nimmt die erste Version des Systems Gestalt an.  Wie Sie wissen, kommt der Appetit mit dem Essen.  Infolgedessen werden der ersten Version des Systems neue Sensoren und sogar neue Steuerungen hinzugef√ºgt, um beispielsweise ein G√§stehaus zu automatisieren.  Als Ergebnis wurde in der ersten Phase ein System eingef√ºhrt, das: </p><br><ol><li>  Misst die Temperatur an 16 Punkten. </li><li>  Misst die Luftfeuchtigkeit an 4 Punkten. </li><li>  Misst die Spannung des 220V-Netzes am Eingang des Hauses zum Stabilisator. </li><li>  Misst Umgebungslicht.  Die Beleuchtung wird verwendet, um das Licht automatisch einzuschalten. </li><li>  Misst den atmosph√§rischen Druck und sagt das Wetter anhand der Druckdynamik voraus. </li><li>  Erkennt Bewegungen an mehreren Stellen. </li><li>  Kontrolliert die ganze Welt in einem G√§stehaus.  Die Schalter wurden zu Sensoren. </li><li>  F√§hrt Sirenen. </li><li>  Steuert separat 3 Stufen eines Elektrokessels, wobei die Funktionalit√§t des alten Systems erhalten bleibt.  Es steuert die Kesselheizung. </li><li>  √úberpr√ºft das Vorhandensein von Spannung am Kessel und an den Heizelementen des Kessels und liest auch die Fakten √ºber die Einbeziehung der Heizelemente des Kessels.  Dies ist wichtig, da zum einen der Kessel eine R√ºckmeldung √ºber die Temperatur des K√ºhlmittels hat und die Heizelemente selbst ausschalten kann, und zum anderen ein zweistufiges Lastbegrenzungsrelais im Armaturenbrett montiert ist, das den Kessel und den Kessel nacheinander trennt, wenn die Verbrauchsschwelle im Haus √ºberschritten wird.  Diese Daten werden in Smart-Home-Algorithmen weiter verwendet.  Aber zu diesem Zeitpunkt wusste ich nicht genau wie, ich hatte nur das Gef√ºhl, dass sie gebraucht werden w√ºrden. </li><li>  Liest die Fakten zum Ein- und Ausschalten der Solarkreislaufpumpe. <img src="https://habrastorage.org/webt/pv/so/fa/pvsofanjhrkcdclj2mlrurnll8u.jpeg" align="right"></li><li>  Erstellt Temperaturdiagramme f√ºr Woche, Tag und Stunde. </li><li>  Sendet Push-Benachrichtigungen zu verschiedenen Ereignissen.  Ereignisse k√∂nnen fast alle sein, z. B. Bewegungen auf der Veranda, Temperaturen, die einen vorgegebenen Schwellenwert √ºberschreiten, Stromverlust / -erscheinung usw.  Es wurde auch eine SMS-Benachrichtigung erstellt. </li><li>  Das alte System blieb physisch und logisch vom neuen getrennt, obwohl dieselben Sensoren im neuen teilweise wiederverwendet werden.  Das alte System behielt die Sicherheitsfunktionen und ein Backup-√úberwachungs- / Steuerungssystem bei. </li></ol><br><p>  <em>Das Foto zeigt die elektrische Ausstattung des G√§stehauses.</em>  <em>Die Box mit der Antenne ist der Controller, die runde ‚ÄûWaschmaschine‚Äú ist die Sirene, zwischen ihnen befindet sich der DHT22-Sensor, unter dem Schild befindet sich ein Bewegungssensor, links befindet sich ein unterbrechungsfreies 12-V-Netzteil.</em> </p><br><div class="spoiler">  <b class="spoiler_title">Beispiel f√ºr einen Systembetrieb</b> <div class="spoiler_text"><p>  Alle 30 Sekunden fragt der Regler die Temperatursensoren ab.  Im Falle einer √Ñnderung der Messwerte oder auf Anfrage vom Server werden Daten f√ºr jeden Sensor separat an das Gateway gesendet.  Das Gateway empf√§ngt Daten und sendet sie √ºber USB an openHAB.  In openHAB wird eine Regel ausgel√∂st, die Nachricht analysiert, der entsprechende Temperaturwert dem entsprechenden Element zugeordnet (das Grundkonzept von openHAB).  Es wird eine Regel generiert, die zum √Ñndern dieses Elements konfiguriert ist.  Wenn die Logik eine Reaktion liefert, z. B. "Wenn die Temperatur unter ein bestimmtes Niveau gefallen ist", wird eine Aktion ausgef√ºhrt, z. B. "Kesselheizung einschalten".  Dieser Befehl wird √ºber USB an das Gateway gesendet.  Das Gateway sendet einen Befehl √ºber Funk an die Steuerung, die Steuerung empf√§ngt den Befehl und schaltet das entsprechende Relais ein.  Gibt eine Best√§tigung des Eingangs des Befehls zur√ºck.  So etwas sieht aus wie das allgemeine Interaktionsschema von Systemkomponenten. </p></div></div><br><p>  <strong>Das Ergebnis.</strong>  Erste Ziele erreicht und noch mehr.  Die Temperaturen werden in Grafiken und in der Benutzeroberfl√§che gemessen und visualisiert.  Nach den Ergebnissen der Beobachtungen wurde klar, dass die Temperatur des hei√üen Wassers nie √ºber 55 Grad steigt und das K√ºhlmittel im Solarkreislauf - 60, Sie m√ºssen sich keine Sorgen um √úberhitzung machen.  Es ist zu sehen, dass die Lufttemperatur im Heizraum manchmal 30 Grad √ºberschreitet und Sie eine Klimaanlage installieren m√ºssen.  Es wurde bequem, die Heizung zu steuern, indem Sie einfach die virtuellen Schalter auf dem Smartphone-Bildschirm ber√ºhren.  Weiter.        . ,    ,       .    ,         .   .     ¬´¬ª,      . <br>    .      ,  24..     ,  Raspberry Pi  2500. Arduino  AliExpress   200,    (nRF24L01+, )     .  ‚Äì .       - ,      .  Das hei√üt,      . </p><br><div class="spoiler"> <b class="spoiler_title">,     .</b> <div class="spoiler_text"><p>  ,    .  ‚Äî 11.05.2018. ,        49 .     38,      35 .      .           .     . <img src="https://habrastorage.org/webt/a3/ba/3w/a3ba3wjudxbn9u-x-xcp2yjjhvo.jpeg"></p></div></div><br><p> <strong></strong> .  ,  ,          . ,   ,    C++,  Arduino, .     ,         openHAB.  ,        ‚Äì .      . - ,      ,  .    ¬´¬ª.    , ,    .     .   ‚Äì  .         . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de415477/">https://habr.com/ru/post/de415477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de415467/index.html">Programmierwettbewerb: Handel (Ank√ºndigungen)</a></li>
<li><a href="../de415469/index.html">Adblock f√ºr Radio</a></li>
<li><a href="../de415471/index.html">Erweiterung PHP und Kotlin Native. Teil eins, naiv</a></li>
<li><a href="../de415473/index.html">Wer scannt das Internet? Zeit, Eisen zu schmieden</a></li>
<li><a href="../de415475/index.html">Analyse von Legacy-Code bei Verlust des Quellcodes: zu tun oder nicht zu tun?</a></li>
<li><a href="../de415481/index.html">Venezuela blockiert direkte Verbindungen nach Tor und verschleiert den Verkehr zu Br√ºcken</a></li>
<li><a href="../de415483/index.html">7 h√§ufige Fehler beim Vergleich Ihrer Server mit der Cloud</a></li>
<li><a href="../de415485/index.html">Fahren Sie Kingston A1000 - ein Krankenwagen f√ºr den Laptop?</a></li>
<li><a href="../de415487/index.html">Seiten der Intel-Geschichte. Erster Chip, Intel 3101</a></li>
<li><a href="../de415489/index.html">Facebook schlie√üt Projekt zur Verbreitung des Internets mittels Drohnen auf Solarenergie ab</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>