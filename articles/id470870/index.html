<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📕 🏝️ ✊🏾 Prapemuat Font 🎮 👨‍👦‍👦 🤞🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Penulis artikel, terjemahan yang kami terbitkan hari ini, ingin berbicara tentang mengapa ia memuat font bahkan ketika ia tidak seharusnya. 
  
 Ketik...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Prapemuat Font</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/470870/">  Penulis artikel, terjemahan yang kami terbitkan hari ini, ingin berbicara tentang mengapa ia memuat font bahkan ketika ia tidak seharusnya. <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/2r/jy/xq/2rjyxqifqzb06x5rhh1zj-y28ao.png"></a> <br>  Ketika dia membuat situs di mana <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">asli dari</a> bahan ini diterbitkan, dia tidak akan menggunakan font-nya sendiri.  Ini pasti akan mempengaruhi kinerja situs, walaupun tidak terlalu banyak.  Penulis artikel tersebut mengatakan bahwa ia berusaha untuk membuat situs web cepat.  Namun, pada akhirnya, diputuskan untuk menggunakan satu font khusus untuk judul halaman dan pada saat yang sama mencoba membuat solusi ini sesedikit mungkin mempengaruhi kinerja proyek. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Memulai</font> </h2><br>  Untuk memulai, saya memutuskan untuk membuat file font sekecil mungkin.  Jadi saya membuat subset font ini.  Dengan kata lain, saya memilih dari font hanya karakter-karakter yang diperlukan untuk kata-kata dalam judul. <br><br>  Hasilnya, saya mendapat file yang sangat ringkas, yang ukurannya kurang dari 2 Kb.  Selain itu, saya meletakkannya di tempat yang sama dengan semua materi lain di situs, yang memungkinkan saya untuk menghilangkan ketergantungan pihak ketiga dan waktu yang dihabiskan untuk menghubungkan ke domain lain. <br><br>  Dan akhirnya, tautan ke file font ditempatkan di kode CSS yang tertanam di halaman, di bagian atas kode HTML, dan bukan di file CSS eksternal. <br><br>  Ini berarti bahwa browser dapat mendeteksi dan mengunduh file font tanpa harus mengunduh stylesheet eksternal.  Omong-omong, ini adalah alasan umum bahwa font memuat lebih dari yang diperlukan. <br><br><h2>  <font color="#3AC1EF">Kejutan</font> </h2><br>  Karena font khusus diperlukan untuk menampilkan teks, browser harus memperlakukannya sebagai sumber daya prioritas tinggi. <br><br>  Akibatnya, saya berharap file font dimuat dengan sangat cepat.  Halaman-halaman sumber daya saya, dalam hal apapun, cukup "ringan", jadi saya pikir tidak ada yang bisa mencegah pemuatan file font. <br><br>  Ketika saya menganalisis situs, saya sedikit terkejut. <br><br>  Jadi, melihat situs menggunakan alat pengembang Chrome dan memeriksanya di Webpagetest, saya menemukan bahwa font prioritas tinggi dimuat setelah gambar - sumber daya prioritas rendah. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a9e/b69/42b/a9eb6942be47a8350a3419a54e7382ef.png"></div><br>  <i><font color="#999999">Gambar diunduh sebelum unduhan font</font></i> <br><br>  Bagiku itu omong kosong. <br><br>  Saya tahu pasti bahwa browser, sebelum mengunduh font, dapat menunggu hingga mengetahui bahwa font tersebut diperlukan untuk menampilkan halaman.  Tetapi elemen tempat font saya digunakan terletak di bagian paling atas halaman, di dalam <code>&lt;header&gt;</code> , jauh lebih tinggi daripada tag dengan gambar yang dimuat sebelum font diunduh.  Elemen yang sesuai tidak hanya terletak di kode halaman, tetapi juga di pohon DOM. <br><br><h2>  <font color="#3AC1EF">Memulai font sebagai solusi untuk masalah tersebut</font> </h2><br>  Atribut <code>preload</code> memberitahu browser bahwa perlu preload sumber yang sesuai yang diperlukan untuk menampilkan halaman saat ini. <br><br>  Menggunakan atribut ini adalah cara yang baik untuk mengunduh awal sumber daya penting yang jika tidak akan ditemukan oleh browser nanti. <br><br>  File font adalah contoh yang bagus untuk menggunakan mekanisme ini.  Jika tautan ke file font dibuat dalam style sheet eksternal, browser tidak akan mendeteksi font sampai ia memuat style sheet ini. <br><br>  Menggunakan atribut <code>preload</code> diterapkan ke file font memberitahu browser bahwa itu akan membutuhkan font yang sesuai ketika menampilkan halaman. <br>  Selain itu, mekanisme ini sangat mudah diimplementasikan menggunakan elemen <code>&lt;link&gt;</code> . <br><br><pre> <code class="plaintext hljs">&lt;link rel="preload" href="myfont.woff2" as="font" type="font/woff2" crossorigin&gt;</code> </pre> <br>  Sebagai alternatif, Anda dapat menambahkan arahan preload ke header respons (meskipun, kecuali ditentukan lain, beberapa server atau CDN dapat mengartikan desain ini sebagai permintaan yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.cloudflare.com/website-optimization/">diprakarsai server</a> untuk mentransfer sumber daya ke klien). <br><br>  Saya tidak berharap bahwa di situs ini saya harus menggunakan mekanisme preloading sumber daya.  Kode CSS saya sangat sederhana, saya menyematkannya dalam kode HTML halaman, melakukannya sehingga halaman akan ditampilkan lebih cepat oleh browser ketika mereka pertama kali mengunjungi situs.  Karena font saya tidak tergantung pada pemuatan file CSS eksternal, browser, dalam hal apa pun, harus mendeteksinya sangat awal dan tanpa "petunjuk" tentang preloading. <br><br>  Namun, saya menemukan bahwa preloading font menyebabkan pemulihan keadilan, fakta bahwa file font sekarang dimuat sebelum file gambar diunduh. <br><br>  Berikut adalah diagram air terjun dari Webpagetest - Saya menyoroti tempat-tempat di mana pekerjaan dengan file font ditampilkan.  Di bagian atas gambar, preloading tidak digunakan.  Di bagian bawah - digunakan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8c/d2e/789/b8cd2e789c21ffe4d26175ef0bbd1711.png"></div><br>  <i><font color="#999999">Preloading dan bekerja dengan file font.</font></i> <br><br>  Mungkin akan lebih bermanfaat untuk mempertimbangkan storyboard dari proses pemuatan halaman (di sini, untuk kejelasan, tiruan dari koneksi yang sangat lambat digunakan). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/451/efc/532/451efc532263db4aa64740322d011bef.png"></div><br>  <i><font color="#999999">Di papan cerita teratas, preloading tidak digunakan.</font></i>  <i><font color="#999999">Di bagian bawah - digunakan</font></i> <br><br>  Secara sepintas, saya perhatikan bahwa saya menggunakan <code>font-display: fallback</code> handle.  Yaitu, judul awalnya ditampilkan menggunakan font cadangan jika font saya dimuat perlahan.  Namun, untuk pengujian ini, saya mematikan fitur ini, karena kalau tidak, akan sangat sulit untuk membedakan antara langkah-langkah dalam memuat halaman. <br><br><h2>  <font color="#3AC1EF">Mengapa ini berhasil?</font> </h2><br>  Untuk menampilkan halaman web, browser perlu membangun pohon DOM dan pohon CSSOM, yang kemudian digunakan untuk membangun pohon rendering. <br><br>  <code>preload</code> menggunakan elemen <code>&lt;link&gt;</code> dengan atribut <code>preload</code> untuk mengunduh font memungkinkan browser untuk mulai membangun CSSOM sebelum DOM selesai. <br><br>  Anda dapat melihat ini di gambar berikut, yang menunjukkan eksplorasi proses pemuatan halaman menggunakan alat pengembang Chrome. <br><br>  Berikut adalah bagaimana bekerja dengan materi halaman tanpa menggunakan preload.  Pertama, DOM dibuat dan gambar dimuat, lalu CSSOM dibuat dan font dimuat. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70e/d87/be1/70ed87be14271c5d93563d18161eaba7.png"></div><br>  <i><font color="#999999">Bekerja dengan halaman tanpa menggunakan preload</font></i> <br><br>  Dan di sini sama, tetapi dengan penggunaan preloading.  Di sini, browser mulai membuat CSSOM, mulai mengunduh font, dan kemudian menciptakan DOM dan mulai mengunduh gambar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c75/ea3/101/c75ea31011fe25c4527c7b6c64f86b2e.png"></div><br>  <i><font color="#999999">Bekerja dengan halaman menggunakan preload</font></i> <br><br><h2>  <font color="#3AC1EF">Apakah ada alternatif selain prapembuatan?</font> </h2><br>  Misalkan saya tidak dapat menggunakan atribut <code>preload</code> untuk meningkatkan prioritas file font.  Apa yang bisa saya lakukan?  Bagaimana Anda bisa menurunkan prioritas gambar? <br><br>  Karena penasaran, saya mencoba menerapkan ide di atas dan menambahkan atribut <code>loading="lazy"</code> ke elemen yang menggambarkan gambar.  Di Chrome 76 (satu-satunya browser yang mendukung ini pada saat penulisan), ini harus menurunkan prioritas gambar di luar area yang terlihat asli dari halaman. <br><br>  Menguji ide ini dengan alat pengembang telah menunjukkan bahwa ini mengarah ke font yang diunduh lebih awal.  Mungkin ini patut diingat, karena tingkat dukungan browser untuk mekanisme pemuatan yang malas meningkat dari waktu ke waktu. <br><br><h2>  <font color="#3AC1EF">Browser yang berbeda berperilaku berbeda</font> </h2><br>  Saya menguji proyek di beberapa browser berbeda dan di beberapa perangkat.  Dalam pengujian, saya menemukan bahwa iOS Safari (iPhone 8) menunjukkan perilaku yang sama dengan Chrome.  Yaitu, font, secara default, dimuat setelah gambar, tetapi menggunakan atribut <code>preload</code> memungkinkan <code>preload</code> untuk memperbaiki situasi. <br><br>  Masalah keterlambatan pemuatan font juga terjadi di Firefox, tetapi atribut <code>preload</code> belum didukung oleh browser ini secara default, jadi menggunakan atribut <code>preload</code> saat melihat situs di Firefox belum mengubah apa pun. <br><br>  Di Edge, font juga memuat lebih dari yang diinginkan.  Ada perasaan bahwa menggunakan Webload Pagetest menggunakan atribut <code>preload</code> hanya berfungsi sebagian.  Yaitu, bagi saya tampak seperti unduhan font ganda.  Setelah dimuat sebelumnya, kedua kalinya nanti. <br><br>  Dalam paragraf sebelumnya, saya berbicara tentang fakta bahwa saya "punya sensasi", dan bahwa saya "tampak".  Faktanya adalah ketika saya mencoba menguji perilaku ini menggunakan versi Edge saya sendiri, unduhan "ganda" hilang.  Sekarang saya merasa bahwa menggunakan atribut <code>preload</code> tidak mempercepat pemuatan font.  Mungkin perbedaan dalam perilaku halaman ini adalah hasil dari memperbaiki beberapa kesalahan di Edge, meskipun jika demikian, kesalahan diperbaiki dengan biaya mengubah mekanisme preloading sumber daya. <br><br><h2>  <font color="#3AC1EF">Ringkasan</font> </h2><br>  Di sini kita berbicara tentang mengapa font preloading tidak sakit bahkan jika tautan ke file mereka dibuat dalam kode CSS yang tertanam di halaman. <br><br>  Browser tidak selalu berperilaku seperti yang kita inginkan, atau seperti yang kita harapkan.  Tetapi kami memiliki alat yang membantu mempengaruhi perilaku browser, membantu mengarahkan mereka ke arah yang kami butuhkan. <br><br>  Saya dulu berpikir bahwa font preloading di situs saya sama sekali tidak ada gunanya.  Dari semua yang saya bicarakan, saya belajar pelajaran penting untuk diri saya sendiri.  Terdiri dari fakta bahwa Anda tidak boleh berasumsi apa pun. <br><br>  Pada akhirnya, saya dapat mengatakan bahwa font preloading adalah cara yang bagus untuk mempercepat output teks pada halaman web. <br><br>  <b>Pembaca yang budiman!</b>  Apakah Anda menggunakan mekanisme preloading font di proyek web Anda? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/webt/-o/2e/tu/-o2etuqogwhmdnmysb9_vivc9v4.png"></a> </div><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id470870/">https://habr.com/ru/post/id470870/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id470852/index.html">Memproses 40 TB kode dari 10 juta proyek pada server khusus dengan Go seharga $ 100</a></li>
<li><a href="../id470856/index.html">Telegram GRAM Wallet: ketentuan layanan</a></li>
<li><a href="../id470858/index.html">Antiquities: Benchmark dari prosesor 386 dan sembilan puluhan gagah</a></li>
<li><a href="../id470864/index.html">Tentang kelezatan beralih ke panel dan tidak hanya</a></li>
<li><a href="../id470868/index.html">Waktu untuk byte pertama: apa itu dan mengapa itu penting</a></li>
<li><a href="../id470872/index.html">Metrik kinerja untuk meneliti aplikasi web yang sangat cepat</a></li>
<li><a href="../id470874/index.html">Mengoptimalkan pemuatan JavaScript di Wikipedia</a></li>
<li><a href="../id470876/index.html">Buat konstruksi sintaks JavaScript khusus menggunakan Babel. Bagian 1</a></li>
<li><a href="../id470878/index.html">Buat konstruksi sintaks JavaScript khusus menggunakan Babel. Bagian 2</a></li>
<li><a href="../id470880/index.html">Mekanik game. Petualangan, konsep terapi bicara nol dan menarik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>