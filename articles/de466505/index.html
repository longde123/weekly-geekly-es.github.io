<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìµ üò∂ ‚òÇÔ∏è YIMP - Systemsteuerung f√ºr Yii 2 auf Bootstrap 4 üßïüèΩ ü¶î ü§úüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich bin sicher, dass viele Entwickler, die Frameworks vorgefertigten CMS bevorzugen, eine L√∂sung auf Bootstrap oder seinen Analoga auf Lager haben, mi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>YIMP - Systemsteuerung f√ºr Yii 2 auf Bootstrap 4</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466505/"><p>  Ich bin sicher, dass viele Entwickler, die Frameworks vorgefertigten CMS bevorzugen, eine L√∂sung auf Bootstrap oder seinen Analoga auf Lager haben, mit der Administrationsschnittstellen und andere Back-Office-Schnittstellen erstellt werden.  Und ich habe es.  Es funktioniert seit vielen Jahren erfolgreich, ist aber hoffnungslos veraltet.  Es ist Zeit umzuschreiben. </p><br><p>  W√§hrend der Arbeit an der neuen Version habe ich versucht, alle meine Erfahrungen zu diesem Thema zusammenzufassen. Als Ergebnis habe ich <strong>YIMP erhalten - ein Fahrrad</strong> , f√ºr das ich mich <strong>nicht sch√§me, es zu teilen:</strong> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LiveDemo</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">API-Dokumentation</a> . </p><br><p>  YIMP ist sehr einfach.  Aber hinter dieser Einfachheit steckt ein langer Gedanke, den ich auch teilen m√∂chte.  Dieser Artikel ist also keine Anweisung.  Hier sprechen wir nat√ºrlich √ºber Architektur, Abh√§ngigkeitsmanagement, das MVC-Paradigma und die Benutzeroberfl√§che. </p><a name="habracut"></a><br><p>  YIMP ist also ein Dashboard.  Dies ist kein vorgefertigtes Admin-Panel, kein CMS oder gar CMF.  Der Repr√§sentationscode muss unabh√§ngig geschrieben werden oder Gii verwenden (Vorlagen sind beigef√ºgt).  YIMP bietet ein Layout, das definiert, wo sich die Steuerelemente befinden sollen, sowie die Schnittstelle, √ºber die die Anwendung Daten an das Layout √ºbertr√§gt.  So sieht <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">es</a> auf Desktops aus: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mg/cq/8p/mgcq8plajqml62wpyw6za3gnode.png"></div><br><p>  Layout adaptiv.  Wenn der Bildschirm kleiner wird, verschwinden die Elemente oder bewegen sich unter den Schaltfl√§chen in der Navigationsleiste.  Infolgedessen sieht <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dieselbe Seite</a> des Telefons folgenderma√üen aus: </p><br><div class="spoiler">  <b class="spoiler_title">Lass es besser unter dem Spoiler sein</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/vv/gi/ni/vvginigkcypah1yxxxp7jnr6-6e.png" width="250"></div></div></div><br><p>  Was sehen wir im Layout?  Der Anwendungstitel, Breadcrumbs, drei Men√ºs (links, rechts und oben), Widgets in den Seitenleisten, Seitentitel.  In meiner Praxis reichten diese Elemente aus, um Schnittstellen zu entwickeln - von Administrationsseiten von Zielseiten bis hin zu Unternehmensinformationssystemen.  Ich habe versucht, sie so anzuordnen, dass der Raum so effizient wie m√∂glich genutzt wird.  Was sagst du </p><br><p>  Das Markup wird in reinem Bootstrap ohne Erweiterungen und Anpassungen geschrieben.  Wo immer m√∂glich, wurden Klassen von Bootstrap verwendet. Wenn Sie sich also f√ºr die Anpassung entscheiden, sollte es keine Probleme geben. </p><br><p>  Wie gesagt, YIMP enth√§lt eine Schnittstelle, √ºber die die Anwendung Daten an das Layout √ºbertr√§gt.  Mal sehen, wie das passiert.  √ñffne die Haube! </p><br><h2 id="leyaut">  Layout </h2><br><p>  Ich bin der Meinung, dass der Entwickler die volle Kontrolle √ºber das Layout haben sollte. Daher empfehle ich bei der Installation von YIMP, seinen Code in seine Anwendung zu kopieren.  Meiner Meinung nach ist dies viel besser, als ein Layout im Paket zu belassen und eine Reihe von Einstellungen daf√ºr zu blockieren.  Sehen wir uns den Layout-Code an: </p><br><div class="spoiler">  <b class="spoiler_title">77 Codezeilen.</b>  <b class="spoiler_title">Es ist nicht notwendig, sich damit zu besch√§ftigen!</b> <div class="spoiler_text"><pre><code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">dmitrybtn</span></span>\<span class="hljs-title"><span class="hljs-title">yimp</span></span>\<span class="hljs-title"><span class="hljs-title">widgets</span></span>\<span class="hljs-title"><span class="hljs-title">Alert</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">dmitrybtn</span></span>\<span class="hljs-title"><span class="hljs-title">yimp</span></span>\<span class="hljs-title"><span class="hljs-title">Yimp</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">yii</span></span>\<span class="hljs-title"><span class="hljs-title">bootstrap4</span></span>\<span class="hljs-title"><span class="hljs-title">Html</span></span>; $yimp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Yimp(); $yimp-&gt;register(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>); <span class="hljs-comment"><span class="hljs-comment">/** </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string $content Content came from view */</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginPage() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;!DOCTYPE html&gt; &lt;html lang=<span class="hljs-string"><span class="hljs-string">"en"</span></span>&gt; &lt;head&gt; &lt;meta charset=<span class="hljs-string"><span class="hljs-string">"&lt;?= Yii::$app-&gt;charset ?&gt;"</span></span>&gt; &lt;meta name=<span class="hljs-string"><span class="hljs-string">"viewport"</span></span> content=<span class="hljs-string"><span class="hljs-string">"width=device-width, initial-scale=1, shrink-to-fit=no"</span></span>&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> Html::csrfMetaTags() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;title&gt;<span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> Html::encode($yimp-&gt;nav-&gt;getTitle()) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span>&lt;/title&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;head() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;/head&gt; &lt;body&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;beginBody() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;navbar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginSidebars() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginLeftSidebar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginLeftSidebarMenu() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;menuLeft([ <span class="hljs-string"><span class="hljs-string">'options'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'nav-pills flex-column border rounded py-2'</span></span>] ]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endLeftSidebarMenu() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::SIDEBAR_LEFT])): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::SIDEBAR_LEFT] <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endLeftSidebar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginRightSidebar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginRightSidebarMenu() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;menuRight([ <span class="hljs-string"><span class="hljs-string">'options'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'nav-pills flex-column border rounded py-2'</span></span>] ]) <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endRightSidebarMenu() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::SIDEBAR_RIGHT])): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::SIDEBAR_RIGHT] <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endRightSidebar() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endSidebars() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;beginContent() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;headerDesktop() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> Alert::widget() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $content <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $yimp-&gt;endContent() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::FOOTER])): <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;blocks[$yimp::FOOTER] <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">endif</span></span> <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;endBody() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;/body&gt; &lt;/html&gt; <span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;endPage() <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> </div></div><br><p>  Wie Sie sehen k√∂nnen, sind alle YIMP-Markups in Methoden eingeschlossen.  Die meisten dieser Methoden drucken einfach die Zeilen, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aus diesem Array stammen</a> .  Ja, das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">KISS-</a> Prinzip ist unser Alles. </p><br><p>  Bitte beachten Sie, dass im Layout Bl√∂cke verwendet werden.  Sie werden ben√∂tigt, um in Ansichten definierte Widgets anzuzeigen (so werden Formularsteuerelemente gerendert).  Wenn das Widget auf allen Seiten h√§ngen soll, ist es besser, es direkt im Layout zu bestimmen. </p><br><p>  Der Hauptbereich und die Widgets werden also in den Ansichten definiert.  Und wo sind die √úberschriften, Men√ºs und Semmelbr√∂sel festgelegt?  Meiner Meinung nach sind sie am besten in Controllern definiert.  Dies ist ein wichtiger Punkt, da eine solche Entscheidung dem MVC-Paradigma widerspricht.  Schauen wir uns dieses Problem genauer an. </p><br><h2 id="kontrollery">  Controller </h2><br><p>  Lassen Sie also einen <code>ProfileController</code> , der Informationen zum Profil des aktuellen Benutzers anzeigen und das Kennwort √§ndern kann.  Logischerweise wird die <code>profile/view</code> "Mein Profil" genannt.  Es ist auch logisch, dass im Hauptmen√º der Eintrag "Mein Profil" angezeigt wird.  Schlie√ülich sollte "Mein Profil" in Breadcrumbs stehen: "Home / Mein Profil / Passwort √§ndern".  Ich denke, der Wunsch, eine Konstante mit den Worten "Mein Profil" zu definieren, ist durchaus berechtigt.  Sie k√∂nnen dies in der Ansicht nicht tun.  Die Auswahl einer separaten Ebene f√ºr √úberschriften ist umst√§ndlich.  Aus diesem Grund kam ich zu den Controllern. </p><br><p>  Der n√§chste Schritt war die Entscheidung, nicht nur Aktionsheader in den Controllern zu definieren, sondern auch Brotkrumen und Men√ºs.  Und tun Sie es, damit YIMP sie lesen kann.  Und hier brauchen wir ein Beispiel.  Schauen wir uns eine m√∂gliche Implementierung der <code>ProfileController</code> Klasse an. </p><br><div class="spoiler">  <b class="spoiler_title">52 Zeilen einfacher Code.</b>  <b class="spoiler_title">Besser genau hinschauen!</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProfileController</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">yii</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">web</span></span></span><span class="hljs-class">\</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> $nav; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::init(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \dmitrybtn\yimp\Navigator; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">titleView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">titlePassword</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">crumbsToView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titleView(), <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'/profile/view'</span></span>]] ]; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionView</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;title = <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titleView(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;menuRight = [ [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>], [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titlePassword(), [<span class="hljs-string"><span class="hljs-string">'password'</span></span>]], ]; ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'view'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionPassword</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;title = <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titlePassword(); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;crumbs = <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::crumbsToView(); ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;render(<span class="hljs-string"><span class="hljs-string">'password'</span></span>); } }</code> </pre> </div></div><br><p>  Header und Breadcrumbs werden mit statischen Methoden definiert, dh sie k√∂nnen √ºberall verwendet werden.  Zum Beispiel k√∂nnen Sie im Hauptmen√º der Anwendung schreiben: </p><br><pre> <code class="php hljs">[<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; ProfileController::titleView(), <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'/profile/view'</span></span>]],</code> </pre> <br><p>  Warum genau die Methoden?  Denn morgen werden Sie anstelle der W√∂rter "Mein Profil" aufgefordert, das Login des aktuellen Benutzers anzuzeigen. </p><br><p>  Mit Semmelbr√∂seln das gleiche.  Angenommen, unser Benutzer hat eine Liste von Bildern, f√ºr die <code>ImageController</code> verantwortlich ist.  Dann k√∂nnen Sie in die Aktion <code>image/create</code> schreiben: </p><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;crumbs = ProfileController::crumbsToView(),</code> </pre> <br><p>  und Brotkrumen wie "Startseite / Mein Profil / Bild hinzuf√ºgen" erhalten.  √úbrigens, da die Aktion " <code>image/create</code> " als "Bild hinzuf√ºgen" bezeichnet wird, muss das Aktionsmen√º " <code>profile/view</code> korrigiert werden: </p><br><pre> <code class="php hljs"> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;nav-&gt;menuRight = [ [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span>], [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span>::titlePassword(), [<span class="hljs-string"><span class="hljs-string">'password'</span></span>]], [<span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; ImageController::titleCreate(), <span class="hljs-string"><span class="hljs-string">'url'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'/image/create'</span></span>]] ];</code> </pre> <br><p>  Ich finde die Idee verst√§ndlich.  Meiner Meinung nach ist dies eine einfache und effektive L√∂sung, f√ºr die Sie sich vom MVC-Paradigma entfernen k√∂nnen.  Ja, der Controller-Code wird immer gr√∂√üer, aber es gibt einen Platz im Controller - wir schreiben dort keine Gesch√§ftslogik, oder?  Und ja, ich w√§re sehr interessiert, Ihre Meinung zu diesem Thema zu erfahren. </p><br><p>  Wir gehen weiter.  Wie Sie vielleicht vermutet haben, wird die als <code>\dmitrybtn\yimp\Navigator</code> definierte Eigenschaft <code>nav</code> verwendet, um Header, Men√ºs und Breadcrumbs vom Controller in das Layout zu √ºbertragen.  Und dies ist eine weitere Funktion von YIMP. </p><br><h2 id="navigator">  Navigator </h2><br><p>  Wie kommen die Einstellungen in das Layout?  Sehr einfach.  W√§hrend der Initialisierung pr√ºft YIMP die <code>nav</code> Eigenschaft des aktuellen Controllers.  Wenn diese Eigenschaft lesbar ist und ein Navigator ist ( <code>instanceof \dmitrybtn\yimp\Navigator</code> ), werden die entsprechenden Informationen angezeigt.  Der Navigator enth√§lt Eigenschaften, die Layoutelementen entsprechen, von denen eine vollst√§ndige Liste in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">API-Dokumentation</a> leichter zu sehen ist. </p><br><p>  In der Anwendung wird empfohlen, einen eigenen Navigator zu erstellen und darin Men√ºs zu definieren, die nicht von der aktuellen Aktion abh√§ngen (oben und links).  Danach m√ºssen Sie in allen Controllern die <code>nav</code> Eigenschaft erstellen und als Navigator definieren (Sie k√∂nnen Ihre H√§nde verwenden, Sie k√∂nnen erben oder Sie k√∂nnen Merkmale festlegen).  Bei Bedarf k√∂nnen Sie mehrere Navigatoren definieren. </p><br><p>  Dieser Ansatz beseitigt die direkte Beziehung zwischen YIMP und dem Controller.  Alle Interaktionen werden √ºber ein Objekt ausgef√ºhrt, dessen Implementierung vom Entwickler gesteuert wird.  Das hei√üt, dies ist das gleiche Prinzip der Abh√§ngigkeitsinversion von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SOLID</a> oder Low Coupling von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GRASP</a> . </p><br><p>  Es w√§re ideologisch korrekt, Schnittstellen sowohl f√ºr den Controller als auch f√ºr den Navigator zu verwenden.  Aber hier habe ich beschlossen, den einfachsten Weg zu gehen und das System nicht zu √ºberladen.  Am Ende spricht DIP nicht √ºber Schnittstellen, sondern √ºber Abstraktionen.  In diesem Fall ist Abstraktion eine Vereinbarung √ºber das Vorhandensein eines bestimmten Eigenschaftstyps in einer bestimmten Klasse.  Was denkst du? </p><br><p>  Das Fehlen einer direkten Beziehung zwischen YIMP und dem Controller wird wichtig, wenn Module im System angezeigt werden, die nichts √ºber YIMP wissen.  Oder umgekehrt - unter YIMP geschriebene Module werden in einem System installiert, das YIMP nicht verwendet. </p><br><p>  Im ersten Fall sieht YIMP keine Navigationseigenschaften im Controller.  Es wird kein Fehler angezeigt, aber Ihre Men√ºs verschwinden vom Bildschirm und die Aktions-ID wird als Titel verwendet.  Wie man ist  Sehr einfach: Wenn YIMP den Navigator nicht vom Controller √ºbernehmen kann, wird er mithilfe des Alias <code>yimp-nav</code> √ºber den DI-Container <code>yimp-nav</code> .  Mit diesem Alias ‚Äã‚Äãk√∂nnen Sie Ihren eigenen Standardnavigator registrieren, indem Sie beispielsweise in den Anwendungseinstellungen Folgendes angeben: </p><br><pre> <code class="php hljs"> <span class="hljs-string"><span class="hljs-string">'container'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'definitions'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'yimp-nav'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'class'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'\your\own\Navigator'</span></span>, ] ] ],</code> </pre> <br><p>  Im zweiten Fall ist der Navigator in der Steuerung, aber es gibt niemanden, der ihn lesen kann.  In diesem Fall wird empfohlen, einen Wrapper f√ºr die Ansichten im Modul zu schreiben, der den Navigator vom aktuellen Controller an das in Yii akzeptierte Format anpasst.  Das hei√üt, zeigen Sie <code>&lt;h1&gt;</code> im Hauptbereich an, <code>&lt;title&gt;</code> und Breadcrumbs durchlaufen die Parameter <code>Yii::$app-&gt;view</code> und zeigen das rechte Men√º in Form von Schaltfl√§chen an. </p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  YIMP wird jetzt ohne Version ver√∂ffentlicht.  Ich sehe keinen Grund, die Vorabversion zu ver√∂ffentlichen - daf√ºr ist alles zu einfach.  Ich denke, es ist besser, ein paar Wochen an einem realen Projekt zu testen und sofort zu Version 1.0.0 zu wechseln.  Kritik, Kommentare und Hilfe zu GitHub sind daher sehr willkommen. </p><br><p>  Und ich absolviere ein Modul, das die Zugriffskontrolle implementiert.  Wie man fertig wird - ich werde schreiben. </p><br><p>  Wie Sie sehen, gibt es hier nichts Kompliziertes.  Ich bin sicher, dass viele von Ihnen etwas √Ñhnliches auf Lager haben.  Und ich w√§re sehr interessiert zu wissen, wie Sie die Benutzeroberfl√§chenaufgabe in Ihrem Administrationsbereich l√∂sen. </p><br><p>  Danke allen! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466505/">https://habr.com/ru/post/de466505/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466495/index.html">Wie man mit der Konkurrenz in Go nichts falsch macht</a></li>
<li><a href="../de466497/index.html">Moderne Umgebung f√ºr React Native-Anwendungen</a></li>
<li><a href="../de466499/index.html">C / C ++ von Python (ctypes)</a></li>
<li><a href="../de466501/index.html">Github-Aktionen und plattform√ºbergreifendes Bauen</a></li>
<li><a href="../de466503/index.html">Slurm DevOps. Zweiter Tag. IaC, Infrastrukturtests und ‚ÄûSlurm inspiriert!‚Äú</a></li>
<li><a href="../de466515/index.html">Interview Was sollte ein Ingenieur von der Arbeit bei einem europ√§ischen Startup erwarten, wie werden Interviews durchgef√ºhrt und ist es schwierig, sich anzupassen?</a></li>
<li><a href="../de466517/index.html">Lokalisierungstraining an der Universit√§t von Washington</a></li>
<li><a href="../de466519/index.html">Detaillierte Analyse von AWS Lambda</a></li>
<li><a href="../de466521/index.html">C for Metal - Edelmetall f√ºr Computer auf Intel-Grafikkarten</a></li>
<li><a href="../de466525/index.html">Was ist ein PSD iPhone Layout und wie wird es verwendet?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>