<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСРЁЯП╛ ЁЯСЛЁЯП╛ ЁЯС╡ рдЙрджрд╛рд╣рд░рдг # F рдореЗрдВ рдореЙрдбрд▓-рд╡реНрдпреВ-рдЕрдкрдбреЗрдЯ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ ЁЯФ│ тЫ╖я╕П ЁЯСПЁЯП╗</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЬреЗрдПрд╕ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг рдХрд┐рд╕реА рдиреЗ Redux рдХреЛ рд░рд┐рдПрдХреНрдЯ рдореЗрдВ рдкрд╕рдВрдж рдирд╣реАрдВ рдХрд┐рдпрд╛? 


 рдореБрдЭреЗ рд░рд┐рдбреНрдпреВрд╕рд░реНрд╕ рдореЗрдВ рдЕрдирд╛рдбрд╝реА рд╕реНрд╡рд┐рдЪ-рдХреЗрд╕ рдкрд╕рдВрдж рдирд╣реАрдВ рдЖрдпрд╛, рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдкреИрдЯрд░реНрди рдорд┐...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЙрджрд╛рд╣рд░рдг # F рдореЗрдВ рдореЙрдбрд▓-рд╡реНрдпреВ-рдЕрдкрдбреЗрдЯ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459870/"><p>  рдЬреЗрдПрд╕ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрдиреЗ рдХреЗ рдХрд╛рд░рдг рдХрд┐рд╕реА рдиреЗ Redux рдХреЛ рд░рд┐рдПрдХреНрдЯ рдореЗрдВ рдкрд╕рдВрдж рдирд╣реАрдВ рдХрд┐рдпрд╛? </p><br><p>  рдореБрдЭреЗ рд░рд┐рдбреНрдпреВрд╕рд░реНрд╕ рдореЗрдВ рдЕрдирд╛рдбрд╝реА рд╕реНрд╡рд┐рдЪ-рдХреЗрд╕ рдкрд╕рдВрдж рдирд╣реАрдВ рдЖрдпрд╛, рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдкреИрдЯрд░реНрди рдорд┐рд▓рд╛рди рд╡рд╛рд▓реА рднрд╛рд╖рд╛рдПрдВ рд╣реИрдВ, рдФрд░ рдмреЗрд╣рддрд░ рдореЙрдбрд▓ рдИрд╡реЗрдВрдЯ рдФрд░ рдореЙрдбрд▓ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдл #ред <br>  рдпрд╣ рд▓реЗрдЦ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрд▓реНрдорд┐рд╢</a> рдореЗрдВ рдореИрд╕реЗрдЬрд┐рдВрдЧ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рд╣реИ</a> ред </p><a name="habracut"></a><br><p>  рдореИрдВ рдЗрд╕ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдкрд░ рд▓рд┐рдЦреЗ рдЧрдП рдХрдВрд╕реЛрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рджреВрдВрдЧрд╛, рдпрд╣ рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдкрд░ рд╕реНрдкрд╖реНрдЯ рд╣реЛрдЧрд╛ рдХрд┐ рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдП, рдФрд░ рдлрд┐рд░ рд╣рдо рдПрд▓реНрдорд┐рд╢ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЛ рд╕рдордЭреЗрдВрдЧреЗред </p><br><p>  рдореИрдВрдиреЗ рдХрд╡рд┐рддрд╛рдПрдВ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░рд▓ рдХрдВрд╕реЛрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓рд┐рдЦрд╛, рдмреАрдЬ рдореЗрдВ рдХрдИ рдХрд╡рд┐рддрд╛рдПрдВ рд╣реИрдВ, рдкреНрд░рддреНрдпреЗрдХ рд▓реЗрдЦрдХ рдХреЗ рд▓рд┐рдП, рдЬреЛ рдХрдВрд╕реЛрд▓ рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддреА рд╣реИрдВред </p><br><p> рд╡рд┐рдВрдбреЛ рдореЗрдВ рдкрд╛рда рдХреА рдХреЗрд╡рд▓ 4 рд▓рд╛рдЗрдиреЗрдВ рд╣реИрдВ, "рдЕрдк" рдФрд░ "рдбрд╛рдЙрди" рдмрдЯрди рджрдмрд╛рдХрд░ рдЖрдк рдХрд╡рд┐рддрд╛ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдХреНрд░реЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдбрд┐рдЬрд┐рдЯрд▓ рдмрдЯрди рдЯреЗрдХреНрд╕реНрдЯ рдХрд╛ рд░рдВрдЧ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдмрд╛рдПрдВ рдФрд░ рджрд╛рдПрдВ рдмрдЯрди рдЖрдкрдХреЛ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдЗрддрд┐рд╣рд╛рд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдиреЗ рдкреБрд╢реНрдХрд┐рди рдХреА рдХрд╡рд┐рддрд╛ рдкрдврд╝реА, рдЬреЛ рдпрд╛рд╕реАрди рдХреА рдХрд╡рд┐рддрд╛ рдореЗрдВ рдмрджрд▓ рджрд┐рдпрд╛, рдмрджрд▓ рдЧрдпрд╛ рдкрд╛рда рдХрд╛ рд░рдВрдЧ, рдФрд░ рдлрд┐рд░ рд╕реЛрдЪрд╛ рдХрд┐ рд░рдВрдЧ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рдерд╛ рдФрд░ рдпрд╕рд┐рдирди рдХреЛ рдпрд╣ рдкрд╕рдВрдж рдирд╣реАрдВ рдЖрдпрд╛, рдмрд╛рдПрдВ рддреАрд░ рдкрд░ рдбрдмрд▓-рдХреНрд▓рд┐рдХ рдХрд┐рдпрд╛ рдФрд░ рдЙрд╕ рдЬрдЧрд╣ рдкрд░ рд╡рд╛рдкрд╕ рдЖ рдЧрдпрд╛ рдЬрд╣рд╛рдВ рдЙрд╕рдиреЗ рдкреБрд╢реНрдХрд┐рди рдХреЛ рдкрдврд╝рдирд╛ рд╕рдорд╛рдкреНрдд рдХрд░ рджрд┐рдпрд╛ рдерд╛ред </p><br><p>  рдпрд╣ рдЪрдорддреНрдХрд╛рд░ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/3h/2j/lh/3h2jlh-zewzgiozosfdxax-re4m.png"></p><br><p>  рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред </p><br><p>  рдпрджрд┐ рдЖрдк рд╕рднреА рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЛрдЪрддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЬреЛ рдХреБрдЫ рднреА рдХрд░ рд╕рдХрддрд╛ рд╣реИ рд╡рд╣ рд╣реИ рдмрдЯрди рджрдмрд╛рдПрдВ, рдЗрд╕реЗ рджрдмрд╛рдХрд░ рдЖрдк рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреНрдпрд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ, рдФрд░ рд╡рд╣ рдЗрдЪреНрдЫрд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИ: </p><br><ol><li>  рд▓реЗрдЦрдХ рдмрджрд▓реЗрдВ </li><li>  рд░рдВрдЧ рдмрджрд▓реЗрдВ </li><li>  рд╕реНрдХреНрд░реЙрд▓ рдХрд░реЗрдВ (рдКрдкрд░ / рдиреАрдЪреЗ) </li><li>  рдкрд┐рдЫрд▓реЗ / рдЕрдЧрд▓реЗ рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдЬрд╛рдПрдВ </li></ol><br><p>  рдЪреВрдВрдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╡рд╛рдкрд╕ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рд╡рд╛рдкрд╕ рдЖрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЖрдкрдХреЛ рдЙрд╕рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдареАрдХ рдХрд░рдиреЗ рдФрд░ <strong>рдореЙрдбрд▓ рдХреЛ рдпрд╛рдж рд░рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ</strong> , рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╕рднреА рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдирд┐рдореНрдирд╛рдиреБрд╕рд╛рд░ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: </p><br><pre><code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Msg</span></span></span><span class="hljs-class"> = | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ConsoleEvent</span></span></span><span class="hljs-class"> of </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ConsoleKey</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ChangeAuthor</span></span></span><span class="hljs-class"> of </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Author</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ChangeColor</span></span></span><span class="hljs-class"> of </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ConsoleColor</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ChangePosition</span></span></span><span class="hljs-class"> of </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ChangePosition</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ChangeVersion</span></span></span><span class="hljs-class"> of </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ChangeVersion</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RememberModel</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WaitUserAction</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Exit</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ChangeVersion</span></span></span><span class="hljs-class"> = | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Back</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Forward</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ChangePosition</span></span></span><span class="hljs-class"> = | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Up</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Down</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Author</span></span></span><span class="hljs-class"> = | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Pushkin</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Lermontov</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Blok</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Esenin</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Poem</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Poem</span></span></span><span class="hljs-class"> of string</span></span></code> </pre> <br><p>  рдореЙрдбрд▓ рдореЗрдВ, рдЖрдкрдХреЛ рдЙрд╕ рдкрд╛рда рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ рдЕрдм рдХрдВрд╕реЛрд▓ рдореЗрдВ рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЗрддрд┐рд╣рд╛рд╕ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдХреМрди рд╕реЗ рдореЙрдбрд▓ рдХреЛ рджрд┐рдЦрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдпрд╣ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ред </p><br><pre> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Model</span></span></span><span class="hljs-class"> = { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">viewTextInfo</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewTextInfo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">countVersionBack</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">history</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewTextInfo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class"> } </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ViewTextInfo</span></span></span><span class="hljs-class"> = { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">text</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">string</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">formatText</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">string</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">countLines</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">positionY</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">color</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ConsoleColor</span></span></span><span class="hljs-class"> }</span></span></code> </pre> <br><p>  рдПрд▓реНрдорд┐рд╢ рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ - рдореЙрдбрд▓-рд╡реНрдпреВ-рдЕрдкрдбреЗрдЯ, рдореЙрдбрд▓ рдкрд░ рдкрд╣рд▓реЗ рд╣реА рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рдЪреБрдХрд╛ рд╣реИ, рдЖрдЗрдП рджреЗрдЦреЗрдВ: </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> <span class="hljs-type"><span class="hljs-type">SnowAndUserActionView</span></span> (model: <span class="hljs-type"><span class="hljs-type">Model</span></span>) (dispatch: <span class="hljs-type"><span class="hljs-type">Msg</span></span> -&gt; unit) = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> { formatText = ft; color = clr } = model.viewTextInfo; clearConsoleAndPrintTextWithColor ft clr <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> key = <span class="hljs-type"><span class="hljs-type">Console</span></span>.<span class="hljs-type"><span class="hljs-type">ReadKey</span></span>().<span class="hljs-type"><span class="hljs-type">Key</span></span>; <span class="hljs-type"><span class="hljs-type">Msg</span></span>.<span class="hljs-type"><span class="hljs-type">ConsoleEvent</span></span> key |&gt; dispatch <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> clearConsoleAndPrintTextWithColor (text: string) (color: <span class="hljs-type"><span class="hljs-type">ConsoleColor</span></span>) = <span class="hljs-type"><span class="hljs-type">Console</span></span>.<span class="hljs-type"><span class="hljs-type">Clear</span></span>(); <span class="hljs-type"><span class="hljs-type">Console</span></span>.<span class="hljs-type"><span class="hljs-type">WriteLine</span></span>() <span class="hljs-type"><span class="hljs-type">Console</span></span>.<span class="hljs-type"><span class="hljs-type">ForegroundColor</span></span> &lt;- color <span class="hljs-type"><span class="hljs-type">Console</span></span>.<span class="hljs-type"><span class="hljs-type">WriteLine</span></span>(text)</code> </pre> <br><p>  рдпрд╣ рд╡рд┐рдЪрд╛рд░реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИ, рдпрд╣ <em>viewTextInfo рдХреЗ</em> рдЖрдзрд╛рд░ рдкрд░ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ <em>рдЧрдпрд╛ рд╣реИ</em> , рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЗрд╕ рд╕рдВрджреЗрд╢ рдХреЛ <em>рдЕрдкрдбреЗрдЯ</em> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рднреЗрдЬрддрд╛ рд╣реИред <br>  рдмрд╛рдж рдореЗрдВ рд╣рдо рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЬрд╛рдВрдЪ рдХрд░реЗрдВрдЧреЗ рдХрд┐ <em>рдкреНрд░реЗрд╖рдг рдХреЗ</em> рд╕рдордп рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рд╣реЛрддрд╛ <em>рд╣реИ</em> , рдФрд░ рдпрд╣ рдХрд┐рд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдХрд╛рд░реНрдп рд╣реИред </p><br><p>  <em>рдЕрдкрдбреЗрдЯ</em> : </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> update (msg: <span class="hljs-type"><span class="hljs-type">Msg</span></span>) (model: <span class="hljs-type"><span class="hljs-type">Model</span></span>) = match msg with | <span class="hljs-type"><span class="hljs-type">ConsoleEvent</span></span> key -&gt; model, updateConsoleEvent key | <span class="hljs-type"><span class="hljs-type">ChangeAuthor</span></span> author -&gt; updateChangeAuthor model author | <span class="hljs-type"><span class="hljs-type">ChangeColor</span></span> color -&gt; updateChangeColor model color | <span class="hljs-type"><span class="hljs-type">ChangePosition</span></span> position -&gt; updateChangePosition model position | <span class="hljs-type"><span class="hljs-type">ChangeVersion</span></span> version -&gt; updateChangeVersion model version | <span class="hljs-type"><span class="hljs-type">RememberModel</span></span> -&gt; updateAddEvent model | <span class="hljs-type"><span class="hljs-type">WaitUserAction</span></span> -&gt; model, []</code> </pre> <br><p>  <em>рд╕рдВрджреЗрд╢</em> рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ <em>, рдпрд╣</em> рдЪрдпрди рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреМрди рд╕рд╛ рдлрд╝рдВрдХреНрд╢рди рд╕рдВрджреЗрд╢ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░реЗрдЧрд╛ред </p><br><p>  рдпрд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдкрд░ рдПрдХ <em>рдЕрдкрдбреЗрдЯ</em> рд╣реИ, рдмрдЯрди рдХреЛ рд╕рдВрджреЗрд╢ рдкрд░ <em>рд▓рд╛ рд░рд╣рд╛ рд╣реИ</em> , рдЕрдВрддрд┐рдо рдорд╛рдорд▓рд╛ - <em>WaitUserAction</em> рдШрдЯрдирд╛ рд▓реМрдЯрд╛рддрд╛ рд╣реИ - рдХреНрд▓рд┐рдХ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░реЗрдВ рдФрд░ рдЖрдЧреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВред </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> updateConsoleEvent (key: <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>) = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> msg = match key with | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">D1</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeColor</span></span> <span class="hljs-type"><span class="hljs-type">ConsoleColor</span></span>.<span class="hljs-type"><span class="hljs-type">Red</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">D2</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeColor</span></span> <span class="hljs-type"><span class="hljs-type">ConsoleColor</span></span>.<span class="hljs-type"><span class="hljs-type">Green</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">D3</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeColor</span></span> <span class="hljs-type"><span class="hljs-type">ConsoleColor</span></span>.<span class="hljs-type"><span class="hljs-type">Blue</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">D4</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeColor</span></span> <span class="hljs-type"><span class="hljs-type">ConsoleColor</span></span>.<span class="hljs-type"><span class="hljs-type">Black</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">D5</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeColor</span></span> <span class="hljs-type"><span class="hljs-type">ConsoleColor</span></span>.<span class="hljs-type"><span class="hljs-type">Cyan</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">LeftArrow</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeVersion</span></span> <span class="hljs-type"><span class="hljs-type">Back</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">RightArrow</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeVersion</span></span> <span class="hljs-type"><span class="hljs-type">Forward</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">P</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeAuthor</span></span> <span class="hljs-type"><span class="hljs-type">Author</span></span>.<span class="hljs-type"><span class="hljs-type">Pushkin</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">E</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeAuthor</span></span> <span class="hljs-type"><span class="hljs-type">Author</span></span>.<span class="hljs-type"><span class="hljs-type">Esenin</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">B</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeAuthor</span></span> <span class="hljs-type"><span class="hljs-type">Author</span></span>.<span class="hljs-type"><span class="hljs-type">Blok</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">L</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangeAuthor</span></span> <span class="hljs-type"><span class="hljs-type">Author</span></span>.<span class="hljs-type"><span class="hljs-type">Lermontov</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">UpArrow</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangePosition</span></span> <span class="hljs-type"><span class="hljs-type">Up</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">DownArrow</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ChangePosition</span></span> <span class="hljs-type"><span class="hljs-type">Down</span></span> | <span class="hljs-type"><span class="hljs-type">ConsoleKey</span></span>.<span class="hljs-type"><span class="hljs-type">X</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Exit</span></span> | _ -&gt; <span class="hljs-type"><span class="hljs-type">WaitUserAction</span></span> msg |&gt; <span class="hljs-type"><span class="hljs-type">Cmd</span></span>.ofMsg</code> </pre> <br><p>  рд╣рдо рд▓реЗрдЦрдХ рдХреЛ рдмрджрд▓рддреЗ рд╣реИрдВ, рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ <em>countVersionBack рдХреЛ</em> рддреБрд░рдВрдд 0 рдкрд░ рд░реАрд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдкрдиреА рдХрд╣рд╛рдиреА рдкрд░ рд╡рд╛рдкрд╕ рдЖ рдЧрдпрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рд░рдВрдЧ рдмрджрд▓рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ, рддреЛ рдЗрд╕ рдХреНрд░рд┐рдпрд╛ рдХреЛ рдирдпрд╛ рдорд╛рдирд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЗрд╕реЗ <em>рдЗрддрд┐рд╣рд╛рд╕ рдореЗрдВ</em> рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> updateChangeAuthor (model: <span class="hljs-type"><span class="hljs-type">Model</span></span>) (author: <span class="hljs-type"><span class="hljs-type">Author</span></span>) = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (<span class="hljs-type"><span class="hljs-type">Poem</span></span> updatedText) = seed.[author] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> updatedFormatText = getlines updatedText <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> updatedCountLines = (splitStr updatedText).<span class="hljs-type"><span class="hljs-type">Length</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> updatedViewTextInfo = {model.viewTextInfo with text = updatedText; formatText = updatedFormatText; countLines = updatedCountLines } { model with viewTextInfo = updatedViewTextInfo; countVersionBack = <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-type"><span class="hljs-type">Cmd</span></span>.ofMsg <span class="hljs-type"><span class="hljs-type">RememberModel</span></span></code> </pre><br><p>  рд╣рдо рд╡рд░реНрддрдорд╛рди рдореЙрдбрд▓ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд╕рд╛рде, <em>рдЗрддрд┐рд╣рд╛рд╕ рдХреЛ</em> рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╣реИрдВрдбрд▓рд░ рдХреЛ рдПрдХ <em>рдореИрдореЛрдбреЗрд▓</em> рд╕рдВрджреЗрд╢ рднреА рднреЗрдЬрддреЗ рд╣реИрдВред </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> updateModelHistory model = { model with history = model.history @ [ model.viewTextInfo ] }, <span class="hljs-type"><span class="hljs-type">Cmd</span></span>.ofMsg <span class="hljs-type"><span class="hljs-type">WaitUserAction</span></span></code> </pre> <br><p>  рд╢реЗрд╖ <em>рдЕрдкрдбреЗрдЯ</em> <a href="">рдпрд╣рд╛рдВ</a> рджреЗрдЦреЗ рдЬрд╛ рд╕рдХрддреЗ <a href="">рд╣реИрдВ</a> , рд╡реЗ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд╕рдорд╛рди рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ рдХрдИ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг рджреВрдВрдЧрд╛: </p><br><div class="spoiler">  <b class="spoiler_title">рдкрд░реАрдХреНрд╖рдг</b> <div class="spoiler_text"><p>  рд░рди <em>рд╡рд┐рдзрд┐</em> <em>рдЙрд╕ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд▓реЗрддреА рд╣реИ рдЬрд┐рд╕рдореЗрдВ</em> рд╕рдВрджреЗрд╢ <em>рд╕реВрдЪреА рд╕рдВрдЧреНрд░рд╣реАрдд рдХреА рдЬрд╛рддреА рд╣реИ</em> <em>рдФрд░ рд╡реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рдореЙрдбрд▓ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░ рджреЗрддреЗ рд╣реИрдВред</em> </p><br><pre> <code class="haskell hljs">[&lt;<span class="hljs-type"><span class="hljs-type">Property</span></span>(<span class="hljs-type"><span class="hljs-type">Verbose</span></span>=true)&gt;] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ``    `` (authors: <span class="hljs-type"><span class="hljs-type">Author</span></span> list) = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> state = (createProgram (authors |&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>.map <span class="hljs-type"><span class="hljs-type">ChangeAuthor</span></span>) |&gt; run) match (authors |&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>.tryLast) with | <span class="hljs-type"><span class="hljs-type">Some</span></span> s -&gt; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (<span class="hljs-type"><span class="hljs-type">Poem</span></span> text) = seed.[s] state.viewTextInfo.text = text | <span class="hljs-type"><span class="hljs-type">None</span></span> -&gt; true [&lt;<span class="hljs-type"><span class="hljs-type">Property</span></span>(<span class="hljs-type"><span class="hljs-type">Verbose</span></span>=true)&gt;] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ``    `` changeColorMsg = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> state = (createProgram (changeColorMsg|&gt;<span class="hljs-type"><span class="hljs-type">List</span></span>.map <span class="hljs-type"><span class="hljs-type">ChangeColor</span></span>)|&gt; run) match (changeColorMsg |&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>.tryLast) with | <span class="hljs-type"><span class="hljs-type">Some</span></span> s -&gt; state.viewTextInfo.color = s | <span class="hljs-type"><span class="hljs-type">None</span></span> -&gt; true [&lt;<span class="hljs-type"><span class="hljs-type">Property</span></span>(<span class="hljs-type"><span class="hljs-type">Verbose</span></span>=true,<span class="hljs-type"><span class="hljs-type">Arbitrary</span></span>=[|typeof&lt;<span class="hljs-type"><span class="hljs-type">ChangeColorAuthorPosition</span></span>&gt;|])&gt;] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> ``        `` msgs = <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tryLastSomeList list = list |&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>.filter (<span class="hljs-type"><span class="hljs-type">Option</span></span>.isSome) |&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>.map (<span class="hljs-type"><span class="hljs-type">Option</span></span>.get) |&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>.tryLast <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> lastAuthor = msgs |&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>.map (fun x -&gt; match x with | <span class="hljs-type"><span class="hljs-type">ChangeAuthor</span></span> a -&gt; <span class="hljs-type"><span class="hljs-type">Some</span></span> a | _ -&gt; <span class="hljs-type"><span class="hljs-type">None</span></span>) |&gt; tryLastSomeList <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> lastColor = msgs |&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>.map (fun x -&gt; match x with | <span class="hljs-type"><span class="hljs-type">ChangeColor</span></span> a -&gt; <span class="hljs-type"><span class="hljs-type">Some</span></span> a | _ -&gt; <span class="hljs-type"><span class="hljs-type">None</span></span>) |&gt; tryLastSomeList <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> state = (createProgram msgs |&gt; run) <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> colorTest = match lastColor with | <span class="hljs-type"><span class="hljs-type">Some</span></span> s -&gt; state.viewTextInfo.color = s | <span class="hljs-type"><span class="hljs-type">None</span></span> -&gt; true <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> authorTest = match lastAuthor with | <span class="hljs-type"><span class="hljs-type">Some</span></span> s -&gt; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> (<span class="hljs-type"><span class="hljs-type">Poem</span></span> t) = seed.[s]; state.viewTextInfo.text = t | <span class="hljs-type"><span class="hljs-type">None</span></span> -&gt; true authorTest &amp;&amp; colorTest</code> </pre></div></div><br><p>  рдЗрд╕рдХреЗ рд▓рд┐рдП, FsCheck рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдбреЗрдЯрд╛ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЕрдм рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдореВрд▓ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ, рдПрд▓реНрдорд┐рд╢ рдореЗрдВ рдХреЛрдб рд╕рднреА рдЕрд╡рд╕рд░реЛрдВ рдХреЗ рд▓рд┐рдП рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛, рдореИрдВрдиреЗ рдЗрд╕реЗ рд╕рд░рд▓ рдмрдирд╛ рджрд┐рдпрд╛ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореВрд▓ рдХреЛрдб)</a> : </p><br><pre> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dispatch</span></span></span><span class="hljs-class">&lt;'msg&gt; = 'msg -&gt; unit </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Sub</span></span></span><span class="hljs-class">&lt;'msg&gt; = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dispatch</span></span></span><span class="hljs-class">&lt;'msg&gt; -&gt; unit </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cmd</span></span></span><span class="hljs-class">&lt;'msg&gt; = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Sub</span></span></span><span class="hljs-class">&lt;'msg&gt; list </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Program</span></span></span><span class="hljs-class">&lt;'model, 'msg, 'view&gt; = { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">init</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">unit</span></span></span><span class="hljs-class"> -&gt;'</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class"> * </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cmd</span></span></span><span class="hljs-class">&lt;'</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">msg</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">update</span></span></span><span class="hljs-class">: '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">msg</span></span></span><span class="hljs-class"> -&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class"> -&gt; ('</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class"> * </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cmd</span></span></span><span class="hljs-class">&lt;'</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">msg</span></span></span><span class="hljs-class">&gt;) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">setState</span></span></span><span class="hljs-class">: '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class"> -&gt; '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">msg</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dispatch</span></span></span><span class="hljs-class">&lt;'</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">msg</span></span></span><span class="hljs-class">&gt; -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">unit</span></span></span><span class="hljs-class"> } let runWith&lt;'arg, 'model, 'msg, 'view&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">program</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Program</span></span></span><span class="hljs-class">&lt;'</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class">, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">msg</span></span></span><span class="hljs-class">, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">view</span></span></span><span class="hljs-class">&gt;) = let (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initModel</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">initCmd</span></span></span><span class="hljs-class">) = program.init() //1 let mutable state = initModel //2 let mutable reentered = false //3 let buffer = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RingBuffer</span></span></span><span class="hljs-class"> 10 //4 let rec dispatch msg = let mutable nextMsg = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Some</span></span></span><span class="hljs-class"> msg; //5 if reentered //6 then buffer.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Push</span></span></span><span class="hljs-class"> msg //7 else while </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Option</span></span></span><span class="hljs-class">.isSome nextMsg do // 8 reentered &lt;- true // 9 let (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">model</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">cmd</span></span></span><span class="hljs-class">) = program.update nextMsg.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Value</span></span></span><span class="hljs-class"> state // 9 program.setState model nextMsg.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Value</span></span></span><span class="hljs-class"> dispatch // 10 </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cmd</span></span></span><span class="hljs-class">.exec dispatch cmd |&gt; ignore //11 state &lt;- model; // 12 nextMsg &lt;- buffer.</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Pop</span></span></span><span class="hljs-class">() // 13 reentered &lt;- false; // 14 </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Cmd</span></span></span><span class="hljs-class">.exec dispatch initCmd |&gt; ignore // 15 state //16 let run program = runWith program</span></span></code> </pre> <br><p>  <em>Dispath &lt;'msg&gt; рдкреНрд░рдХрд╛рд░</em> рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдкреНрд░реЗрд╖рдг рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╣ <em>рд╕рдВрджреЗрд╢</em> рдФрд░ рд░рд┐рдЯрд░реНрди <em>рдЗрдХрд╛рдИ</em> рд▓реЗрддрд╛ рд╣реИ <br>  <em>рдЙрдк &lt;'msg&gt;</em> - рд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдмрд░ рдлрд╝рдВрдХреНрд╢рди, <em>рдбрд┐рд╕реНрдкреИрдЪ</em> рдФрд░ рд░рд┐рдЯрд░реНрди <em>рдпреВрдирд┐рдЯ</em> рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рд╣рдо <em>рд╕рдмрд╕</em> рд╕реВрдЪреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдЬрдм рд╣рдо <em>рдкреИрди рдХрд╛</em> рдЙрдкрдпреЛрдЧ <em>рдХрд░рддреЗ рд╣реИрдВ</em> : </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> ofMsg&lt;'msg&gt; (msg: 'msg): <span class="hljs-type"><span class="hljs-type">Cmd</span></span>&lt;'msg&gt; = [ fun (dispatch: <span class="hljs-type"><span class="hljs-type">Dispatch</span></span>&lt;'msg&gt;) -&gt; dispatch msg ]</code> </pre> <br><p>  рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЬреИрд╕реЗ рдХрд┐ <em>Cmd.ofMsg рдХреЛ рдпрд╛рдж рд░рдЦреЗрдВ рдЕрдкрдбреЗрдЯ</em> рдХреЗ рдЕрдВрдд рдореЗрдВ <em>рдпрд╛рдж</em> <em>рд░рдЦреЗрдВрдореЙрдбрд▓</em> рд╡рд┐рдзрд┐, рдереЛрдбрд╝реА рджреЗрд░ рдХреЗ рдмрд╛рдж рд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдмрд░ рдХреЛ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕рдВрджреЗрд╢ <em>рдЕрдкрдбреЗрдЯ</em> рд╡рд┐рдзрд┐ рдореЗрдВ рдЬрд╛рддрд╛ рд╣реИ <br>  <em>Cmd &lt;'msg&gt;</em> - рд╢реАрдЯ <em>рдЙрдк &lt;' msg&gt;</em> </p><br><p>  рдЪрд▓реЛ <em>рдкреНрд░реЛрдЧреНрд░рд╛рдо</em> рдкреНрд░рдХрд╛рд░ рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВ, рдпрд╣ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдкреНрд░рдХрд╛рд░ рд╣реИ, рдпрд╣ рдореЙрдбрд▓, рд╕рдВрджреЗрд╢ рдФрд░ <em>рджреГрд╢реНрдп</em> рдХрд╛ рдкреНрд░рдХрд╛рд░ рд▓реЗрддрд╛ рд╣реИ, рдХрдВрд╕реЛрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ <em>рджреГрд╢реНрдп</em> рд╕реЗ рдХреБрдЫ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдПрд▓реНрдорд┐рд╢ рдореЗрдВред рдпрд╣ рджреЗрдЦреЗрдВ рдХрд┐ рдпрд╣ DOM рдЯреНрд░реА рдХреЗ F # рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИред </p><br><p>  <em>Init</em> рдлрд╝реАрд▓реНрдб рдХреЛ рдПрд▓реНрдорд┐рд╢ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореЙрдбрд▓ рдФрд░ рдкрд╣рд▓рд╛ рд╕рдВрджреЗрд╢ рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдореИрдВ <em>Cmd.ofMsg рдХреЛ рдпрд╛рдж рдХрд░рддрд╛ рд╣реВрдВрдореЙрдбрд▓</em> <br>  <em>рдЕрдкрдбреЗрдЯ рдЕрдкрдбреЗрдЯ</em> рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░реНрдп рд╣реИ, рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрд╕рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реИрдВред </p><br><p>  <em>SetState</em> - рдорд╛рдирдХ рдПрд▓реНрдорд┐рд╢ рдореЗрдВ, рдпрд╣ рдХреЗрд╡рд▓ рдореЙрдбрд▓ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ <em>рдкреНрд░реЗрд╖рдг</em> рдФрд░ рдХреЙрд▓ <em>рд╡реНрдпреВ рджреЗрддрд╛ рд╣реИ</em> , рд▓реЗрдХрд┐рди рдореБрдЭреЗ рд╕рдВрджреЗрд╢ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ <em>рджреГрд╢реНрдп</em> рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП msg рдХреЛ рдкрд╛рд╕ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдореИрд╕реЗрдЬ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдореИрдВ рдЗрд╕рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рджрд┐рдЦрд╛рдКрдВрдЧрд╛ред </p><br><p>  <em>рд░рдирд╡рд┐рде</em> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИ, рдлрд┐рд░ рдХреЙрд▓ <em>рдЗрдирд┐рдЯ</em> , рдореЙрдбрд▓ рдФрд░ рдкрд╣рд▓рд╛ рд╕рдВрджреЗрд╢ рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИ, рддрд░реНрдЬ рдкрд░ 2,3 рджреЛ рдкрд░рд╕реНрдкрд░ рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдкрд╣рд▓рд╛ - рдЬрд┐рд╕рдореЗрдВ <em>рд░рд╛рдЬреНрдп</em> рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рджреВрд╕рд░рд╛ <em>рдкреНрд░реЗрд╖рдг</em> рдлрд╝рдВрдХреНрд╢рди рджреНрд╡рд╛рд░рд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><p>  4 рд╡реАрдВ рдкрдВрдХреНрддрд┐ рдкрд░, <em>рдмрдлрд░</em> рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ - рдЖрдк рдЗрд╕реЗ рдПрдХ рдХрддрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВ, рдкрд╣рд▓реЗ рдЖрдпрд╛ рдерд╛ - рдкрд╣рд▓рд╛ рдмрд╛рд╣рд░ рдЖрдпрд╛ рдерд╛ (рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, <em>рд░рд┐рдВрдЧ рдмрдлрд╝рд░</em> рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдмрд╣реБрдд рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ, рдореИрдВрдиреЗ рдЗрд╕реЗ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╕реЗ рд▓рд┐рдпрд╛ рд╣реИ, рдореИрдВ рдЖрдкрдХреЛ рдЗрд╕реЗ <em>рдЧреАрдереВрдм рдХреЗ рд╕рд╛рде</em> рдкрдврд╝рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ) </p><br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж рдкреБрдирд░рд╛рд╡рд░реНрддреА <em>рдкреНрд░реЗрд╖рдг</em> рдХрд╛рд░реНрдп рдЖрддрд╛ рд╣реИ, рд╡рд╣реА рдЬрд┐рд╕реЗ <em>рджреЗрдЦрдиреЗ рдХреЗ</em> рд▓рд┐рдП рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдкрд╣рд▓реА рдХреЙрд▓ рдкрд░, рд╣рдо рд▓рд╛рдЗрди 6 рдкрд░ рд▓рд╛рдЗрди рдХреЛ рдмрд╛рдИрдкрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рддреБрд░рдВрдд рд▓реВрдк рдореЗрдВ рдЪрд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВ, <em>рдлрд┐рд░</em> рд╕реЗ <em>рд╕рд╣реА рдкрд░</em> рд╕реЗрдЯ <em>рдХрд┐рдпрд╛</em> рдЬрд╛рддрд╛ <em>рд╣реИ</em> рддрд╛рдХрд┐ рдмрд╛рдж рдХреЗ рдкреБрдирд░рд╛рд╡рд░реНрддреА рдХреЙрд▓ рдЗрд╕ рд▓реВрдк рдореЗрдВ рд╡рд╛рдкрд╕ рди рдЬрд╛рдПрдВ, рд▓реЗрдХрд┐рди рдЬреЛрдбрд╝реЗрдВ <em>рдмрдлрд░</em> рдореЗрдВ рдирдпрд╛ рд╕рдВрджреЗрд╢ред </p><br><p>  рд▓рд╛рдЗрди 9 рдкрд░, рд╣рдо <em>рдЕрдкрдбреЗрдЯ</em> рд╡рд┐рдзрд┐ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рд╣рдо рдмрджрд▓реЗ рд╣реБрдП рдореЙрдбрд▓ рдФрд░ рдПрдХ рдирдпрд╛ рд╕рдВрджреЗрд╢ рдЪреБрдирддреЗ рд╣реИрдВ (рдкрд╣рд▓реА рдмрд╛рд░ рдпрд╣ <em>рдпрд╛рдж рд░рдЦреЗрдВ</em> рд╕рдВрджреЗрд╢ рд╣реИ) <br>  <em>рд▓рд╛рдЗрди</em> 10 рдореЙрдбрд▓ рдЦреАрдВрдЪрддрд╛ рд╣реИ, <em>рд╕реЗрдЯрд╕реНрдЯреНрд░реЗрдЯ</em> рд╡рд┐рдзрд┐ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддреА рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/3v/2c/3l/3v2c3li4ffe4paffy46f98nadle.png"></p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд╡рд┐рднрд┐рдиреНрди рдкреЛрд╕реНрдЯ рд╡рд┐рднрд┐рдиреНрди <em>рд╡рд┐рдЪрд╛рд░реЛрдВ рдХрд╛</em> рдХрд╛рд░рдг рдмрдирддреЗ <em>рд╣реИрдВ</em> <br>  рдпрд╣ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрд╡рд╢реНрдпрдХ рдЙрдкрд╛рдп рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдХреЙрд▓рд┐рдВрдЧ <em>рдХрдВрд╕реЛрд▓</em> <em>ред рд░реАрдбрд▓рд╛рдЗрди</em> рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХрд░рддрд╛ рд╣реИ, рдФрд░ <em>рд░рд┐рдореЗрдВрдбрдореЛрдбреЗрд▓, рдЪреЗрдВрдЬрдХреЛрд▓рд░</em> (рдЬреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рдЕрдВрджрд░ рдЯреНрд░рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдирд╣реАрдВ) рдЬреИрд╕реЗ рдЗрд╡реЗрдВрдЯ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдиреЗ рдкрд░ рд╣рд░ рдмрд╛рд░ рдЗрдВрддрдЬрд╛рд░ рдХрд░реЗрдВрдЧреЗ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЙрдиреНрд╣реЗрдВ рдмрд╕ рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рд░рдВрдЧред </p><br><p>  рдкрд╣рд▓реА рдмрд╛рд░, <em>OnlyShowView</em> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬреЛ рдХреЗрд╡рд▓ рдореЙрдбрд▓ рдХреЛ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░реЗрдЧрд╛ред <br>  рдЕрдЧрд░ <em>WaitMserAction</em> рд╕рдВрджреЗрд╢ рдпрд╛рдж рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп рд╡рд┐рдзрд┐ рдореЗрдВ рдЖрдпрд╛ рд╣реИ, рддреЛ <em>ShowAndUserActionView</em> рдлрд╝рдВрдХреНрд╢рди рдХреЛ <em>рдмреБрд▓рд╛рдпрд╛</em> рдЬрд╛рдПрдЧрд╛, рдЬреЛ рдореЙрдбрд▓ рдХреЛ <em>рдЖрдХрд░реНрд╖рд┐рдд</em> рдХрд░реЗрдЧрд╛ рдФрд░ рдкреНрд░рд╡рд╛рд╣ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХрд░реЗрдЧрд╛, рдмрдЯрди рджрдмрд╛рдП рдЬрд╛рдиреЗ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░ рд░рд╣рд╛ рд╣реИ, рдЬреИрд╕реЗ рд╣реА рдмрдЯрди рджрдмрд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛, <em>рдкреНрд░реЗрд╖рдг</em> рд╡рд┐рдзрд┐ рдлрд┐рд░ рд╕реЗ рдХреЙрд▓ рдХреА рдЬрд╛рдПрдЧреА рдФрд░ рд╕рдВрджреЗрд╢ <em>рдмрдлрд░ рдореЗрдВ</em> рднреЗрдЬ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ (рдХреНрдпреЛрдВрдХрд┐ <em>reenvited</em> = <em>рдЧрд▓рдд</em> <em>рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ</em> ) </p><br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж, рдЖрдкрдХреЛ <em>рдЕрдкрдбреЗрдЯ</em> рд╡рд┐рдзрд┐ рд╕реЗ рдЖрдП рд╕рднреА рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЕрдиреНрдпрдерд╛ рд╣рдо рдЙрдиреНрд╣реЗрдВ рдЦреЛ рджреЗрдВрдЧреЗ, рдкреБрдирд░рд╛рд╡рд░реНрддреА рдХреЙрд▓ рдХреЗрд╡рд▓ рддрднреА рд▓реВрдк рдореЗрдВ <em>рдЖрдПрдВрдЧреЗ</em> рдЬрдм <em>рдкреНрд░рддрд┐рд╢реЛрдз</em> рдЭреВрдард╛ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред  рд▓рд╛рдЗрди 11 рдЬрдЯрд┐рд▓ рд▓рдЧрддреА рд╣реИ, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдпрд╣ <em>рдмрдлрд░</em> рдореЗрдВ рд╕рднреА рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдПрдХ рдзрдХреНрдХрд╛ рд╣реИ: </p><br><pre> <code class="haskell hljs"><span class="hljs-title"><span class="hljs-title">let</span></span> exec&lt;'msg&gt; (dispatch: <span class="hljs-type"><span class="hljs-type">Dispatch</span></span>&lt;'msg&gt;) (cmd: <span class="hljs-type"><span class="hljs-type">Cmd</span></span>&lt;'msg&gt;) = cmd |&gt; <span class="hljs-type"><span class="hljs-type">List</span></span>.map (fun sub -&gt; sub dispatch)</code> </pre> <br><p>  <em>рдЕрдкрдбреЗрдЯ</em> рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯреЗ рд╕рднреА рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд▓рд┐рдП, <em>рдкреНрд░реЗрд╖рдг</em> рдХреЛ рдмреБрд▓рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕рд╕реЗ рдЗрди рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ <em>рдмрдлрд░ рдореЗрдВ</em> рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХреЗред </p><br><p>  рдкрдВрдХреНрддрд┐ 12 рдкрд░ рд╣рдо рдореЙрдбрд▓ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рдПрдХ рдирдпрд╛ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЬрдм <em>рдмрдлрд░</em> рдЦрд╛рд▓реА рдирд╣реАрдВ <em>рд╣реЛрддрд╛ рд╣реИ</em> рддреЛ рдЭреВрдареЗ рдкрд░ рд╡рд╛рдкрд╕ <em>рд▓реМрдЯрддреЗ рд╣реИрдВ</em> рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдХреЛрдИ рддрддреНрд╡ рдирд╣реАрдВ рдмрдЪрд╛ рд╣реИ рдФрд░ <em>рдкреНрд░реЗрд╖рдг</em> рдХреЗрд╡рд▓ <em>рджреГрд╢реНрдп</em> рд╕реЗ рдХрд╣рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИред  рдлрд┐рд░ рд╕реЗ, рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЬрдм рд╕рдм рдХреБрдЫ рд╕рд┐рдВрдХреНрд░реЛрдирд╕ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рд▓рд╛рдЗрди 10 рдкрд░ рдПрдХ рд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдбрд┐рд╕реНрдкреИрдЪ рдХреЙрд▓ рдХреА рдЙрдореНрдореАрдж рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдХреЛрдб рдореЗрдВ рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдХреЙрд▓ рд╣реИрдВ, рддреЛ рдХреЙрд▓рдмреИрдХ рд╕реЗ <em>рдбрд┐рд╕реНрдкреИрдЪ</em> рдХреЛ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рдЬрд╛рд░реА рд░рдЦрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЦреИрд░, рдпрд╣ <em>рдкреНрд░реЗрд╖рдг</em> рд╕рдорд╛рд░реЛрд╣ рдХрд╛ рдкреВрд░рд╛ рд╡рд┐рд╡рд░рдг рд╣реИ, рд▓рд╛рдЗрди 15 рдкрд░ рдЗрд╕реЗ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд▓рд╛рдЗрди 16 рдкрд░ <em>рд░рд╛рдЬреНрдп</em> рд▓реМрдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ <em>рд╣реИ</em> ред </p><br><p>  рдХрдВрд╕реЛрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ, рдЬрдм <em>рдмрдлрд░</em> рдЦрд╛рд▓реА рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рддрдм рдирд┐рдХрд╛рд╕ рдирд┐рдХрд▓рддрд╛ рд╣реИред  рдореВрд▓ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ, <em>рд░рдирд╡рд┐рде</em> рдХреБрдЫ рднреА рдирд╣реАрдВ <em>рджреЗрддрд╛ рд╣реИ</em> , рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдмрд┐рдирд╛ рдкрд░реАрдХреНрд╖рдг рдЕрд╕рдВрднрд╡ рд╣реИред </p><br><p>  рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП <em>рдХрд╛рд░реНрдпрдХреНрд░рдо</em> рдЕрд▓рдЧ рд╣реИ, <em>createProgram</em> рдлрд╝рдВрдХреНрд╢рди рдЙрди рд╕рдВрджреЗрд╢реЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЖрд░рдВрдн рдХрд░реЗрдЧрд╛ рдФрд░ <em>SetState рдореЗрдВ</em> рд╡реЗ рд╕рд╛рдорд╛рдиреНрдп рдХреНрд▓рд┐рдХ рдХреЛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ: <br><img src="https://habrastorage.org/webt/jc/tz/4u/jctz4uefscbzhubowwwfa9zltr8.png"></p><br><p>  рдореЗрд░реЗ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рд╕рдВрд╕реНрдХрд░рдг рдФрд░ рдореВрд▓ рдПрдХ рдХреЗ рдмреАрдЪ рдПрдХ рдФрд░ рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдЕрдкрдбреЗрдЯ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд╣рд▓реЗ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рдХреЗрд╡рд▓ <em>рд╕реЗрдЯрд╕реНрдЯреИрдЯ рдлрд╝рдВрдХреНрд╢рди</em> , рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рдореВрд▓ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ, рдкрд╣рд▓реЗ рд░реЗрдВрдбрд░рд┐рдВрдЧ рдФрд░ рдлрд┐рд░ рдореИрд╕реЗрдЬ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ, <em>рдХреЙрдирд╕реЛрд▓</em> рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХреЙрд▓ рдХреЗ рдХрд╛рд░рдг рдореБрдЭреЗ рдРрд╕рд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред <em>рд░реАрдбрдХреА</em> (рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛) <em>рджреЗрдЦреЗрдВ</em> ) </p><br><p>  рдореБрдЭреЗ рдЖрд╢рд╛ рд╣реИ рдХрд┐ рдореИрдВ рдпрд╣ рд╕рдордЭрд╛рдиреЗ рдореЗрдВ рдХрд╛рдордпрд╛рдм рд░рд╣рд╛ рдХрд┐ рдПрд▓реНрдорд┐рд╢ рдФрд░ рдЗрд╕реА рддрд░рд╣ рдХреА рдкреНрд░рдгрд╛рд▓реА рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддреА рд╣реИ, рдХрд╛рдлреА рдПрд▓реНрдорд┐рд╢ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдУрд╡рд░рдмреЛрд░реНрдб рдмрдиреА рд╣реБрдИ рд╣реИ, рдпрджрд┐ рдЖрдк рдЗрд╕ рд╡рд┐рд╖рдп рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рддреЛ рдореИрдВ рдЖрдкрдХреЛ рдЙрдирдХреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡реЗрдмрд╕рд╛рдЗрдЯ</a> рджреЗрдЦрдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВред </p><br><p>  рдЖрдкрдХрд╛ рдзреНрдпрд╛рди рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi459870/">https://habr.com/ru/post/hi459870/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi459852/index.html">рдмреИрдВрдХ рдХреЗ рдореЛрдмрд╛рдЗрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдЖрдХрд░реНрд╖рдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдЕрднреНрдпрд╛рд╕</a></li>
<li><a href="../hi459858/index.html">Android рдХреЗ рд▓рд┐рдП рдЖрдзреБрдирд┐рдХ рдореИрд▓рд╡реЗрдпрд░ рд╕реЗрд░реНрдмрд╕ рдХреА рдЦреЛрдЬ</a></li>
<li><a href="../hi459860/index.html">Gitlab-ci рдореЗрдВ рдПрдХреАрдХрд░рдг рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП ClickHouse рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛</a></li>
<li><a href="../hi459862/index.html">рдмрд░реНрдХрд▓реЗ DB STL рдЗрдВрдЯрд░рдлрд╝реЗрд╕</a></li>
<li><a href="../hi459866/index.html">Pwnable.kr 02 рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ рд╣рд▓ - рдЯрдХрд░рд╛рд╡ред рд╣реИрд╢ рдЯрдХрд░рд╛рд╡</a></li>
<li><a href="../hi459872/index.html">рдкреИрдЯрди рдЬреЗрдлред рдХрд╕реНрдЯрдо рдХрд╣рд╛рдирд┐рдпрд╛рдВред рдЪреБрд╕реНрдд рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рд╡рд┐рдХрд╛рд╕ рдХреА рдХрд▓рд╛</a></li>
<li><a href="../hi459874/index.html">рдЖрдкрдХреЗ рдкрд╛рд╕ рдЫрд┐рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╣реИ</a></li>
<li><a href="../hi459878/index.html">рдкреЗрдЬ рд▓реЛрдбрд┐рдВрдЧ рдХреЛ рдЧрддрд┐ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП 7 рд╕реАрдПрд╕рдПрд╕ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝реЗрд╢рди рдЯрд┐рдкреНрд╕</a></li>
<li><a href="../hi459880/index.html">рд▓рд┐рдирдХреНрд╕ рдкрд░ рдлрд╝рд╛рдпрд░рдлрд╝реЙрдХреНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ</a></li>
<li><a href="../hi459882/index.html">рд╕рдВрдЧреАрдд "рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ": рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдФрд░ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдХреНрдпрд╛ рдЯреНрд░реИрдХ рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>