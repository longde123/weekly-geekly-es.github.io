<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öóÔ∏è ü§õ üèûÔ∏è Mendapatkan FPGA dengan Python üßíüèø üë©üèª‚Äçü§ù‚Äçüë®üèº üìµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Teknologi FPGA (FPGA) saat ini mulai populer. Jumlah aplikasi meningkat: selain memproses sinyal digital, FPGA juga digunakan untuk mempercepat pembel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mendapatkan FPGA dengan Python</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439638/">  Teknologi FPGA (FPGA) saat ini mulai populer.  Jumlah aplikasi meningkat: selain memproses sinyal digital, FPGA juga digunakan untuk mempercepat pembelajaran mesin, dalam teknologi blockchain, pemrosesan video dan dalam IoT. <br><br>  Teknologi ini memiliki satu minus signifikan: untuk pemrograman, bahasa deskripsi yang cukup kompleks dan spesifik dari peralatan digital Verilog dan VHDL digunakan.  Ini mempersulit masuknya pendatang baru ke dalam FPGA dan sulit bagi pemberi kerja untuk menemukan spesialis dengan pengetahuan khusus ini di pasar tenaga kerja.  Di sisi lain, bahasa pemrograman Python tingkat tinggi yang populer dengan kerangka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MyHDL</a> membuat pemrograman FPGA sederhana dan menyenangkan.  Selain itu, orang yang tahu Python adalah urutan lebih banyak spesialis dengan Verilog / VHDL.  Dengan serangkaian artikel saya ingin menunjukkan betapa mudahnya untuk memasuki bidang FPGA mengetahui Python dan mulai membuat proyek FPGA yang sangat kompleks dalam bahasa ini.  Saya perhatikan bahwa python tidak langsung dieksekusi pada FPGA, tetapi merupakan alat untuk menghasilkan firmware. <br><a name="habracut"></a><br>  Pertama, kita membutuhkan python versi 3.6 itu sendiri (selanjutnya, semua operasi dilakukan pada OS Ubuntu 18.04). <br><br>  Instal myhdl: <br><br><pre><code class="bash hljs">pip3 install myhdl</code> </pre> <br>  Sebagai "Hello World!"  Kami akan menulis program sederhana yang membuat LED menyala ketika tombol ditekan.  Di dunia mikroprosesor "Hello World!"  Ini adalah program yang berkedip dengan satu LED, di dunia FPGA, Hello World adalah flashing dari seribu LED.  Hanya ada empat LED di papan tulis, jadi kami hanya akan mem-flashnya, tergantung pada tombol yang ditekan.  Penting untuk dicatat bahwa semua kode dalam FPGA, tidak seperti mikrokontroler, dieksekusi pada saat yang sama, semua dioda menyala dan keluar pada saat yang sama.  Dan tidak berurutan dalam kasus mikrokontroler.  Tes ini menggunakan papan WaveShare OpenEPM1270 dengan papan Altera Max II EPM1270T144C5 di papan tulis. <br><br><img src="https://habrastorage.org/webt/-l/lk/c8/-llkc88kifaz0umesq_pctqoim4.jpeg"><br><br>  Buat file python baru: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> myhdl <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> random <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> randrange <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">led_blinker</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(input1, led1, led2, led3, led4)</span></span></span><span class="hljs-function">:</span></span> @always_comb <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">on_off_led</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> input1 == <span class="hljs-number"><span class="hljs-number">1</span></span>: led1.next = <span class="hljs-number"><span class="hljs-number">1</span></span> led2.next = <span class="hljs-number"><span class="hljs-number">1</span></span> led3.next = <span class="hljs-number"><span class="hljs-number">0</span></span> led4.next = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: led1.next = <span class="hljs-number"><span class="hljs-number">0</span></span> led2.next = <span class="hljs-number"><span class="hljs-number">0</span></span> led3.next = <span class="hljs-number"><span class="hljs-number">1</span></span> led4.next = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> on_off_led</code> </pre><br>  Untuk mengetahui apakah kode kami berfungsi dengan benar, Anda memerlukan alat verifikasi.  Faktanya, setiap program untuk FPGA adalah prosesor sinyal digital, sehingga pengembang perlu memastikan bahwa ia menunjukkan dengan benar apa yang harus dilakukan dengan chip tersebut.  Ini dilakukan melalui simulasi, untuk ini Anda perlu menginstal program yang akan menampilkan sinyal yang diproses.  Ada banyak program seperti itu, tetapi menurut saya GTKWave gratis terbaik saat ini.  Itu dimasukkan dari terminal: <br><br><pre> <code class="bash hljs">sudo apt-get install gtkwave</code> </pre> <br>  Selanjutnya, dalam file dengan firmware, lingkungan pengujian harus dijelaskan.  Ini juga merupakan fungsi python: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> input1, led1, led2, led3, led4 = [Signal(bool(<span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">5</span></span>)] test = led_blinker(input1, led1, led2, led3, led4) @always(delay(<span class="hljs-number"><span class="hljs-number">10</span></span>)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> input1.next = randrange(<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> test, gen</code> </pre><br>  Di sini lingkungan pengujian menghasilkan urutan nol dan acak (modul Python acak digunakan). <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">simulate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(timesteps)</span></span></span><span class="hljs-function">:</span></span> tb = traceSignals(test) sim = Simulation(tb) sim.run(timesteps)</code> </pre><br>  Dan kami menginisialisasi simulator, menyeret fungsi lingkungan test_inverter di sana.  Dengan demikian, kita mendapatkan simulasi boneka Rusia ‚Üí test_inverter ‚Üí mensimulasikan (waktu dalam unit sewenang-wenang). <br><br>  Setelah menjalankan skrip di folder yang berfungsi, buat file .vcd dan jalankan melalui gtkwave, di terminal: gtkwave test_invereter.vcd. <br><br><img src="https://habrastorage.org/webt/fr/qf/lv/frqflvkzfgc2s_7s2ct4bsr6lem.png"><br><br>  Akibatnya, urutan acak dari sinyal input input1 dihasilkan, dan bagaimana fungsi led_blinker memproses sinyal-sinyal ini. <br><br>  Setelah kami memastikan bahwa logika bekerja persis seperti yang kami inginkan, maka kami harus membuang fungsi ini ke FPGA.  Saya sudah terbiasa bekerja dengan chip dari Intel (sebelumnya Altera), urutan operasi ini serupa untuk chip dari produsen lain dengan sistem CAD yang sesuai.  File biner dibuat pada chip FPGA, yang dibuat oleh kompiler dari pembuat chip, untuk Intel itu adalah Quartus, untuk Xilinx Vivado.  Kompiler hanya dapat bekerja dengan kode dalam VHDL / Verilog, sehingga kode Python harus diterjemahkan ke dalam salah satu bahasa ini (tidak masalah yang mana). <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">convert</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> input1, led1, led2, led3, led4 = [Signal(bool(<span class="hljs-number"><span class="hljs-number">0</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">5</span></span>)] toVerilog(led_blinker, input1, led1, led2, led3, led4) convert()</code> </pre><br>  Dalam contoh ini, kode tersebut diterjemahkan ke dalam Verilog.  Hasilnya ada dalam file led_blinker.v, dan Quartus harus memberikannya untuk menghasilkan firmware FPGA: <br><br><pre> <code class="vhdl hljs">module led_blinker ( input1, led1, led2, led3, led4 ); input input1; output led1; reg led1; output led2; reg led2; output led3; reg led3; output led4; reg led4; always @(input1) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>: LED_BLINKER_ON_OFF_LED <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((input1 == <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> led1 = <span class="hljs-number"><span class="hljs-number">1</span></span>; led2 = <span class="hljs-number"><span class="hljs-number">1</span></span>; led3 = <span class="hljs-number"><span class="hljs-number">0</span></span>; led4 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> led1 = <span class="hljs-number"><span class="hljs-number">0</span></span>; led2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; led3 = <span class="hljs-number"><span class="hljs-number">1</span></span>; led4 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> endmodule</code> </pre> <br>  Dalam pendekatan ini untuk pengembangan firmware FPGA, Anda dapat mengabaikan file ini dan cukup memasukkannya ke Quartus. <br><br>  Anda dapat mengunduh Quartus dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">fpgasoftware.intel.com</a> , kami memerlukan versi Lite gratis, itu sudah cukup bagi kami.  Unduh versi dasar ukuran 9 GB. <br><br>  Menginstal Quartus seharusnya tidak menjadi masalah bagi rata-rata pengguna Linux.  Setelah instalasi, Anda perlu mengatur beberapa parameter dalam sistem sehingga Anda dapat menggunakan perangkat untuk menginstal program FPGA - pemrogram: <br><br>  1. Buat aturan udev.  Untuk melakukan ini, buat file baru /etc/udev/rules.d/51-altera-usb-blaster.rules dengan konten berikut: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># USB-Blaster SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6001", MODE="0666" SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6002", MODE="0666" SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6003", MODE="0666" # USB-Blaster II SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6010", MODE="0666" SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6810", MODE="0666"</span></span></code> </pre><br>  Mulai ulang udev menggunakan udevadm: <br><br><pre> <code class="bash hljs">sudo udevadm control --reload</code> </pre> <br>  2. Izinkan akses non-root ke perangkat USB-Blaster.  Untuk melakukan ini, buat file /etc/udev/rules.d/altera-usb-blaster.rules dengan baris: <br><br><pre> <code class="bash hljs">ATTR{idVendor}==<span class="hljs-string"><span class="hljs-string">"09fb"</span></span>, ATTR{idProduct}==<span class="hljs-string"><span class="hljs-string">"6001"</span></span>, MODE=<span class="hljs-string"><span class="hljs-string">"666"</span></span></code> </pre> <br>  Ini memberikan rw-rw-rw- akses ke programmer. <br><br>  3. Konfigurasikan jtagd.  Quartus menggunakan daemon jtagd untuk bekerja, yang mengaitkan perangkat lunak dengan perangkat programmer.  Salin deskripsi dari direktori Anda dengan Quartus: <br><br><pre> <code class="bash hljs">sudo mkdir /etc/jtagd sudo cp &lt;Quartus install path&gt;/quartus/linux64/pgm_parts.txt /etc/jtagd/jtagd.pgm_parts</code> </pre> <br>  Jalankan Quartus dan buat "File" proyek baru - "Wizard proyek baru", ketikkan nama proyek. <br><br>  Selanjutnya, klik Selanjutnya.  Dan di menu Add Files, kami menghubungkan file Verilog yang dihasilkan dengan ekstensi .v.  Jadi, jika file Verilog diedit dari file python, maka akan secara otomatis diambil oleh Quartus. Selanjutnya, kita masuk ke menu pemilihan perangkat, dalam kasus kami adalah MAX II EMP1270T144C5 dan beberapa kali berikutnya.  Proyek ini dibuat. <br><br>  Di Project Navigator, buka menu file dan klik kanan pada file Verilog kami "Tetapkan sebagai entitas tingkat atas". <br><br>  Kami menyusun proyek.  Sekarang, di menu ‚ÄúAssignments-Pin Planner‚Äù, konfigurasikan pin pada chip: <br><br><img src="https://habrastorage.org/webt/j1/tq/2x/j1tq2xs2vmum49hubukjqbamibs.png"><br><br>  Kompilasi lagi.  Sekarang semuanya siap untuk pemrograman: Tools-Programmer.  Kami menghubungkan programmer dan power ke board, di Hardware Setup kami memilih USB-Blaster kami, mengatur kotak centang seperti yang ditunjukkan pada gambar dan Mulai. <br><br><img src="https://habrastorage.org/webt/9i/ge/t2/9iget2ugm70gdnp1rt1w5egwbii.png"><br><br>  Setelah Programmer melaporkan Berhasil.  Anda dapat melihat hasilnya di papan tulis: <br><br><img src="https://habrastorage.org/webt/7c/z5/9j/7cz59jrtezjl8jku1jzol5sjfhm.gif"><br><br><h4>  Kesimpulan </h4><br>  Pelajaran ini menjelaskan cara membuat lingkungan kerja dan proyek FPGA sederhana pertama dalam bahasa pemrograman Python. <br><br>  Dianggap: <br><br><ul><li>  cara menginstal: <ul><li>  myHDL; </li><li>  GTKWave; </li><li>  Quartus; </li></ul></li><li>  Pemrogram USB Blaster yang dikonfigurasikan di Ubuntu; </li><li>  FPGA Proyek FPGA dikembangkan; </li><li>  Pengujian dan verifikasi proyek; </li><li>  Menyusun proyek untuk FPGA; </li><li>  Proyek diunggah ke FPGA. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id439638/">https://habr.com/ru/post/id439638/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id439624/index.html">Mengapa menyimpan data dalam orbit</a></li>
<li><a href="../id439626/index.html">Pengalaman mengembangkan aplikasi gratis untuk kolektor OpenNumismat</a></li>
<li><a href="../id439628/index.html">Refresh data paralel di ASP.NET Web API</a></li>
<li><a href="../id439632/index.html">Cara mengatur Penerapan Berkelanjutan untuk proyek Anda: pengalaman pribadi</a></li>
<li><a href="../id439636/index.html">Krisis konsep untuk meningkatkan keselamatan jalan dan konsep baru untuk menyelesaikannya</a></li>
<li><a href="../id439640/index.html">Vinyl kembali dan dia berbeda</a></li>
<li><a href="../id439642/index.html">Perangkap Jawa. Bagian 1</a></li>
<li><a href="../id439644/index.html">Anti-Aging: Senolytics dan Terapi Penggantian Stem Cell</a></li>
<li><a href="../id439646/index.html">SoftBank Holding Menjual Saham Nvidia Karena Penurunan Harga, Tetapi Masih Mendapat $ 3,3 Miliar</a></li>
<li><a href="../id439652/index.html">Cara mengangkut startup Anda ke AS: 4 langkah penting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>