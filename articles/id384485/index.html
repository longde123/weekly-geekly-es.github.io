<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”• ğŸ“§ â™’ï¸ Modul Laurent dan Smart Home (Bagian 1). MajorDoMo ğŸ‘‚ğŸ¾ ğŸ¥ ğŸ‘§ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya ingin menyampaikan kepada Anda serangkaian artikel tentang modul kontrol Laurent KernelChip . Dalam seri ini saya akan memberi tahu Anda tentang ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Modul Laurent dan Smart Home (Bagian 1). MajorDoMo</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384485/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya ingin menyampaikan kepada Anda serangkaian artikel tentang modul kontrol Laurent </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">KernelChip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dalam seri ini saya akan memberi tahu Anda tentang bagaimana mengintegrasikan modul-modul ini ke dalam Smart Home Anda, bagaimana mempelajari cara mengelolanya dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sistem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> otomatisasi rumah </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">MajorDoMo yang</font></a><font style="vertical-align: inherit;"> populer </font><font style="vertical-align: inherit;">, dari sketsa Arduino, dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sistem Arduino Mega Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan bahkan bagaimana menerapkan modul-modul ini untuk tujuan yang sama sekali tidak terduga - untuk mengajar anak-anak Anda pemrograman dalam Memproses. </font></font><br>
<br>
<img src="https://habrastorage.org/files/915/0cb/0cb/9150cb0cbde940e588d1badce05af5bb.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara umum, modul yang cukup menarik di dalam dan dari dirinya sendiri dapat secara tak terduga menjadi sangat berguna di rumah tangga jika Anda mendekatinya dengan sejumlah imajinasi dan kreativitas.</font></font><br>
<a name="habracut"></a><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kenapa Laurent?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Karena modul-modul ini telah bekerja dengan sukses di sistem Smart Home saya untuk waktu yang lama (lebih dari tiga tahun) dan saya telah memperoleh beberapa pengalaman dalam menggunakannya dan saya memiliki sesuatu untuk diceritakan tentang mereka. </font><font style="vertical-align: inherit;">Dan saya juga memiliki beberapa pengalaman dan kode teruji yang siap pakai untuk mengelola modul-modul ini, yang ingin saya bagikan kepada Anda. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan Anda akan dapat mengembangkan solusi perangkat lunak Anda berdasarkan kode ini, itu akan sangat sederhana, karena saya sudah melakukan sebagian besar pekerjaan. </font><font style="vertical-align: inherit;">Selain itu, kode tersebut akan dijelaskan secara rinci, yang tentunya berkontribusi pada pemahaman Anda tentang cara kerjanya, mempelajari pemrograman, dan membangun sistem rumah pintar.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modul itu sendiri</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ketika saya memilih sendiri beberapa solusi siap pakai untuk mengelola beban listrik melalui jaringan, Laurent menyuap saya dengan kelengkapan dan kesederhanaan solusinya. Untuk mulai mengontrol jaringan dan mematikan perangkat dan pencahayaan, hampir tidak ada yang diperlukan. Tidak perlu mempelajari bahasa pemrograman, tidak perlu menyolder apa pun, cukup menghubungkan modul ke jaringan lokal, menghubungkan beban ke terminal relai (dan jangan lupa menerapkan daya ke modul itu sendiri) dan itu saja. Setelah itu, dimungkinkan untuk mengirim perintah langsung dari komputer (dari program terminal). Modul itu segera mulai dengan patuh menyalakan dan mematikan lampu sesuai dengan perintah saya. Saat itu, saya tidak perlu lagi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya dapat mengatakan tentang modul itu sendiri bahwa selama seluruh periode operasi tidak ada crash dan macet, semuanya bekerja dan bekerja "seperti jam", yang, pada kenyataannya, diperlukan dari modul tersebut untuk hanya bekerja.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Desain dan kualitas bangunan</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cukup dengan melihat modul untuk membuatnya jelas bahwa itu dikembangkan karena suatu alasan, "jika saja", tetapi mencoba melakukan hal yang benar-benar layak. </font><font style="vertical-align: inherit;">Saya juga tidak memiliki keluhan tentang kualitas pembuatan, semuanya dilakukan dengan hati-hati dan sebagaimana mestinya: tidak ada bagian yang bengkok, noda solder atau apapun seperti itu, semuanya jelas dan rapi. </font><font style="vertical-align: inherit;">Pada umumnya, kualitas build tidak berbeda dari komponen komputer "bermerek" dan Arduino "pabrik". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Satu-satunya hal yang akan saya lakukan jika saya merilis modul-modul ini sendiri adalah menginstal terminal multi-warna alih-alih terminal satu warna untuk menghubungkan kabel, paling tidak menyoroti terminal koneksi daya, tetapi ini sangat kecil, nit-picking (semuanya, tentu saja, ditandatangani dengan rapi).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tentang apakah artikel pertama dalam seri ini?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua informasi dibagi menjadi tiga artikel yang diselesaikan secara logis. Artikel pertama akan fokus pada pengintegrasian modul Laurent dengan MajorDoMo, sebuah platform otomatisasi rumah open source yang populer. Contoh spesifik dan kode PHP akan diberikan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Artikel kedua adalah tentang integrasi dengan ekosistem Arduino. Anda dapat mengelola modul dari sketsa pribadi Anda atau mengintegrasikan Laurent dengan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (yang juga didasarkan pada kode Arduino) dan mengelola Laurents dari antarmuka yang nyaman atau secara otomatis, sesuai dengan program. Solusi yang sudah jadi dan kode yang diuji juga akan diberikan.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan yang ketiga - tentang mengelola modul Laurent dari sketsa pada Pemrosesan. Yaitu, langsung dari desktop komputer di rumah Anda. Artikel yang sama akan menjelaskan cara meningkatkan minat anak-anak dalam mempelajari pemrograman dan peran apa yang dapat dimainkan modul ini dalam masalah ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seri ini dikhususkan untuk integrasi modul Laurent dengan sistem otomasi rumah dan tidak mempertimbangkan arsitektur dan pengoperasian modul itu sendiri. Ini dijelaskan dalam artikel lain yang dapat Anda baca </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan akan dibahas kemudian. Di sini kita hanya fokus pada integrasi.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam proses penulisan artikel, modul Laurent dengan firmware La01 dan versi antarmuka web LW1.0 digunakan, yaitu modul "pertarungan" yang telah bekerja selama tiga tahun. </font><font style="vertical-align: inherit;">Dalam versi baru detail implementasi modul mungkin sedikit berbeda, tetapi kompatibilitas dengan tim kontrol dipertahankan, jadi semua yang dikatakan di sini juga berlaku untuk modifikasi yang lebih baru.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bagaimana manajemen modul bekerja</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semua pertukaran informasi dengan modul dilakukan melalui jaringan dan untuk mulai bekerja dengannya, Anda perlu membuat koneksi TCP / IP pada port 2424. </font><font style="vertical-align: inherit;">Setelah koneksi dibuat, Anda dapat mengirim perintah teks (disebut perintah KE) yang mengontrol modul. </font><font style="vertical-align: inherit;">Situs </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web KernelChip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memiliki dokumentasi terperinci, termasuk deskripsi yang dapat diakses dari perintah KE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KernelChip merawat para pengguna dan menyediakan modul-modulnya dengan antarmuka web yang nyaman, tetapi ini adalah "kontrol manual", dan kenyamanan, nilai, dan kegunaan solusi akan meningkat berdasarkan pesanan jika kita belajar mengelola modul dari Smart Home kami. </font></font><br>
<br>
<img src="https://habrastorage.org/files/0ad/e7b/6e3/0ade7b6e3ff2446e969b922121a3c87d.jpg" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antarmuka web dilindungi kata sandi secara default dan untuk melihat konten halaman web Anda harus memasukkan nama pengguna "admin" dan kata sandi "Laurent".</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MajorDoMo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sistem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MajorDoMo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cukup populer dan saya tidak akan membahasnya di sini secara rinci. </font><font style="vertical-align: inherit;">Diasumsikan bahwa Anda telah menginstal sistem ini dan bekerja dengannya selama beberapa waktu. </font><font style="vertical-align: inherit;">Bagi mereka yang sama sekali tidak up to date, saya akan menjelaskan bahwa ini adalah platform otomatisasi rumah terbuka yang berjalan pada Windows dan Linux dan didasarkan pada server web dan merupakan sejenis CMS (sistem manajemen konten) khusus dengan kemampuan luas dan "diasah" untuk otomatisasi rumah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemungkinan dari MajorDoMo benar-benar tidak terbatas dan mengelola modul Laurent hanyalah salah satu talenta dari sistem ini.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rincian teknis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MajorDoMo menggabungkan file laurent.class.php, yang terletak di direktori</font></font><br>
<br>
<pre><code class="dos hljs">\htdocs\lib\<font></font>
<font></font>
</code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode lengkap laurent.class.php</font></font></b><div class="spoiler_text">&lt;?<br>
<br>
function laurent_command($host, $command, $password='Laurent') {<br>
<br>
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);<br>
 if ($socket === false) {<br>
 echo Â«socket_create() failed: reason: Â». socket_strerror(socket_last_error()). "\n";<br>
 return 0;<br>
 }<br>
<br>
$result = socket_connect($socket, $host, 2424);<br>
 if ($result === false) {<br>
 echo Â«socket_connect( $socket, $host, 2424) failed.\nReason: ($result) Â». socket_strerror(socket_last_error($socket)). "\n";<br>
 return 0;<br>
 }<br>
<br>
$in='$KE'."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
$in='$KE,PSW,SET,'.$password."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
$in=$command."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
socket_close($socket);<br>
 return trim($res);<br>
 <br>
 }<br>
<br>
function laurent_getStat($host, $password='Laurent') {<br>
<br>
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);<br>
 if ($socket === false) {<br>
 echo Â«socket_create() failed: reason: Â». socket_strerror(socket_last_error()). "\n";<br>
 return 0;<br>
 }<br>
<br>
$result = socket_connect($socket, $host, 2424);<br>
 if ($result === false) {<br>
 echo Â«socket_connect( $socket, $host, 2424) failed.\nReason: ($result) Â». socket_strerror(socket_last_error($socket)). "\n";<br>
 return 0;<br>
 }<br>
<br>
$in='$KE'."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
$in='$KE,PSW,SET,'.$password."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "\n"))) {<br>
 break;<br>
 }<br>
 }<br>
<br>
$command='$KE,DAT,ON';<br>
 $in=$command."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
$res='';<br>
 $started=0;<br>
 while ($out = socket_read($socket, 2048, PHP_NORMAL_READ)) {<br>
 $res.=$out;<br>
 if (is_integer(strpos($out, "#TIME,"))) {<br>
 if (!$started) {<br>
 $started=1;<br>
 } else {<br>
 break;<br>
 }<br>
 }<br>
 }<br>
<br>
$command='$KE,DAT,OFF';<br>
 $in=$command."\r\n";<br>
 socket_write($socket, $in, strlen($in));<br>
 sleep(1);<br>
 socket_write($socket, $in, strlen($in));<br>
 socket_write($socket, $in, strlen($in));<br>
<br>
socket_close($socket);<br>
 return trim($res);<br>
 <br>
 }<br>
<br>
?&gt;<br>
<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dan berisi semua yang Anda butuhkan untuk bekerja dengan modul Laurent. </font><font style="vertical-align: inherit;">File ini berisi fungsi-fungsi dalam bahasa pemrograman PHP dan, mungkin, dalam bentuk jadi atau dengan modifikasi minimal, dapat ditransfer ke sistem apa pun menggunakan bahasa pemrograman ini. </font><font style="vertical-align: inherit;">Jadi, jika Anda memiliki proyek Smart Home pada platform yang berbeda, maka Anda dapat mencoba mengintegrasikan Laurent dengan sistem Anda menggunakan file ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fungsi utama yang digunakan untuk mengontrol modul adalah</font></font><br>
<br>
<pre><code class="php hljs">laurent_command(<span class="hljs-string">'&lt; &gt;'</span>, <span class="hljs-string">'&lt;&gt;'</span>, <span class="hljs-string">'&lt;  &gt;'</span>);<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
misalnya,</font></font><br>
<br>
<pre><code class="php hljs">$result = laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,INF'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
, di mana '192.168.2.19' adalah alamat IP dari modul, '$ KE, INF' adalah perintah itu sendiri, 'Laurent' adalah kata sandi (default). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasil kerja fungsi masuk ke variabel $ hasil, yaitu, respons modul, yang dapat Anda analisis dan interpretasikan menggunakan alat bahasa PHP standar. Kata sandi ditentukan sebagaimana adanya secara default. Jika Anda telah mengubah kata sandi untuk akses ke modul Anda, Anda harus menggantinya dengan yang baru dan dalam panggilan fungsi. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Semuanya harus jelas dengan tim, Anda dapat mengambil perintah dari direktori dan mengelola modul seperti yang Anda inginkan. Alamat IP juga tidak boleh menyebabkan masalah. Cukup tentukan alamat IP yang benar-benar dimiliki modul Laurent Anda.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anda dapat mengakhiri teorinya dengan ini dan sekarang saya akan menunjukkan kepada Anda dengan contoh praktis bagaimana membuat kontrol cahaya (atau alat) langsung dari menu MajorDoMo.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh praktis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai contoh praktis, mari kita lihat penciptaan dua tombol "Nyalakan" dan "Matikan" di menu utama sistem MajorDoMo. Dengan tombol-tombol ini Anda dapat menghidupkan atau mematikan lampu atau alat listrik apa pun (di sini Anda hanya perlu mengingat bahwa relay yang dipasang pada modul tidak dapat langsung mengendalikan beban yang kuat seperti kompor listrik atau pemanas air). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, kita membuat tombol "Enable", untuk ini kita pergi ke panel admin MajorDoMo dan masukkan nama pengguna dan kata sandi (admin / admin secara default) dan klik "OBJECTS / Control Menu" dan kemudian pada tombol hijau besar "Tambah bagian baru". </font></font><br>
<br>
<img src="https://habrastorage.org/files/fb3/4af/d8b/fb34afd8babe4df5a78392f9b6025857.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, kami menemukan daftar drop-down "Jenis" dan pilih "Tombol" dari seluruh jenis yang disajikan dan klik "Simpan".</font></font><br>
<br>
<img src="https://habrastorage.org/files/2de/95f/137/2de95f13747c4887b12cc1a6b51315ae.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, pilih "Item menu induk" adalah tempat tombol kami "kait". </font><font style="vertical-align: inherit;">Saya memilikinya Laurent, dan Anda dapat memiliki item menu yang nyaman. </font><font style="vertical-align: inherit;">Secara default, ada "ROOT", yang berarti tombol akan segera terlihat, tanpa mengklik item menu apa pun. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bidang input "Judul" tulis apa yang Anda inginkan tertulis pada tombol. </font><font style="vertical-align: inherit;">Dan terakhir, di bidang Kode, tulis kode fungsi laurent_command yang sudah akrab bagi kita:</font></font><br>
<br>
<pre><code class="php hljs">laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,REL,2,1'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ini sama dengan dalam contoh teoretis, hanya variabel $ result yang hilang (kita tidak membutuhkannya) dan perintah digantikan oleh '$ KE, REL, 2,1', yang berarti mengaktifkan relay No. 2. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami melakukan hal yang sama untuk tombol "Matikan", tapi jangan lupa untuk mengubah nama tombol dan alih-alih '$ KE, REL, 2.1' tulis '$ KE, REL, 2.0', yang berarti matikan relai No. 2:</font></font><br>
<br>
<pre><code class="php hljs">laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,REL,2,0'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu saja. </font><font style="vertical-align: inherit;">Kami memuat ulang halaman dengan antarmuka MajorDoMo, muncul dua tombol baru yang menghidupkan dan mematikan lampu (atau alat) langsung dari antarmuka MajorDoMo dengan indah dan hampir tanpa penundaan. </font><font style="vertical-align: inherit;">Apa yang ingin kami capai.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kontrol otomatis</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang mari kita coba untuk mengontrol modul secara otomatis, tanpa campur tangan manusia. </font><font style="vertical-align: inherit;">Sekarang Anda akan melihat bahwa itu bahkan lebih mudah daripada menggunakan tombol untuk mengontrol modul. </font></font><br>
<br>
<img src="https://habrastorage.org/files/13a/34b/f74/13a34bf74e8943b5a0613e972ef09b85.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menemukan di menu utama panel admin MajorDoMo item "Objek", klik, lalu kami menemukan objek "ClockChime" dan metodenya "onNewMinute". </font><font style="vertical-align: inherit;">Kami membutuhkannya. </font><font style="vertical-align: inherit;">Bagi mereka yang tidak tahu, ini adalah metode "sentral" MajorDoMo, yang disebut setiap menit dan sangat populer. </font><font style="vertical-align: inherit;">Dalam metode ini ada banyak fungsi dan panggilan skrip yang menyediakan fungsionalitas pengguna sistem.</font></font><br>
<br>
<img src="https://habrastorage.org/files/1c6/88b/2ea/1c688b2ead4642b4934a67a00b19d9d2.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan yang perlu kita lakukan adalah menambahkan kode kita ke metode ini. </font><font style="vertical-align: inherit;">Sebagai contoh, pertimbangkan situasi ini. </font><font style="vertical-align: inherit;">Modul Laurent Anda mengontrol pencahayaan malam di halaman rumah Anda. </font><font style="vertical-align: inherit;">Dan Anda, misalnya, ingin lampu menyala jam 21.00, dan mati jam 7.30 pagi. </font><font style="vertical-align: inherit;">Tidak ada yang lebih sederhana, ini adalah kode yang harus Anda tambahkan ke metode onNewMinute:</font></font><br>
<br>
<pre><code class="php hljs"><span class="hljs-keyword">if</span> (timeIs(<span class="hljs-string">'21:00'</span>)) {<font></font>
  laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,REL,2,1'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword">if</span> (timeIs(<span class="hljs-string">'7:30'</span>)) {<font></font>
  laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,REL,2,0'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
}<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan itu dia! </font><font style="vertical-align: inherit;">Setuju, itu sama sekali tidak sulit. </font><font style="vertical-align: inherit;">Ini hanyalah sebuah contoh, logika kerja dapat benar-benar ada dan sangat canggih. </font><font style="vertical-align: inherit;">Dan bakat dari modul Laurent tidak berakhir dengan menyalakan dan mematikan beban, fungsinya jauh lebih luas, tetapi ini bukan topik artikel ini, di sini kami hanya mempertimbangkan masalah integrasi dengan contoh sederhana.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Menerima dan mengeluarkan data modul</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan contoh terakhir adalah bagaimana mendapatkan dan menampilkan informasi yang diterima dari modul Laurent pada halaman web MajorDoMo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MajorDoMo adalah sistem berorientasi objek dan semua pekerjaan terjadi di dalamnya melalui penciptaan objek dan penggunaan data (variabel) dan metode (kode program) mereka. Sedikit sulit? Sebenarnya, tidak apa-apa dan sekarang Anda akan melihatnya sendiri. </font></font><br>
<br>
<img src="https://habrastorage.org/files/adc/f9a/1c0/adcf9a1c0940400798e8392da8690c52.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, sebagai contoh kita akan menggunakan objek yang sudah ada "ThisComputer" dan kita akan menambahkannya ke "test" properti baru. Untuk melakukan ini, klik pada item menu "Objek" yang sudah akrab bagi kita di area admin MajorDoMo, temukan objek "ThisComputer" dan klik pada item "Properties", gulir ke bawah dan temukan bidang input "Tambahkan properti baru", masukkan "tes" dan klik "Refresh" (biarkan nilainya kosong).</font></font><br>
<br>
<img src="https://habrastorage.org/files/81a/bd8/8f8/81abd88f8596487ca7415eb6526d6d40.png" alt="gambar"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mengenai hal ini, operasi persiapan dapat dianggap selesai, kami menambahkan "pengujian" properti baru ke objek "Komputer ini", yang akan kami gunakan dalam percobaan kami. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang tugas kita adalah meminta informasi yang diperlukan dari modul Laurent dan meletakkannya di properti (variabel) dari "tes" objek "ThisComputer". </font><font style="vertical-align: inherit;">Bagaimana cara melakukannya? </font><font style="vertical-align: inherit;">Sangat sederhana. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tambahkan kode ini ke metode onNewMinute yang sudah kita ketahui:</font></font><br>
<br>
<pre><code class="php hljs">$result = laurent_command(<span class="hljs-string">'192.168.2.19'</span>, <span class="hljs-string">'$KE,INF'</span>, <span class="hljs-string">'Laurent'</span>);<font></font>
setGlobal(<span class="hljs-string">'ThisComputer.test'</span>, $result); <font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan setiap menit MajorDoMo akan meminta modul untuk informasi yang diperlukan dan memperbarui variabel "test", yang dapat kita gunakan sesuai kebutuhan. </font><font style="vertical-align: inherit;">Misalnya, tampilkan di halaman web. </font><font style="vertical-align: inherit;">Untuk melakukan ini, kami menempatkan kode berikut di sembarang tempat pada halaman yang kami butuhkan:</font></font><br>
<br>
<pre><code class="php hljs">%ThisComputer.test%<font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inilah yang disebut. </font><font style="vertical-align: inherit;">makro yang, saat memuat halaman, menggantikan nilai variabel bukan dirinya sendiri, disimpan dalam properti "test" dari objek "ThisComputer". </font><font style="vertical-align: inherit;">Dan sebagai hasilnya, Anda melihat informasi yang dikirimkan oleh modul Laurent sebagai tanggapan atas permintaan Anda di halaman web. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bagaimana cara menambahkan makro ke halaman? </font><font style="vertical-align: inherit;">Kami pergi ke menu admin dan pilih item "Halaman Beranda" dan pilih halaman yang Anda inginkan atau buat yang baru menggunakan tombol hijau "Halaman Baru". </font><font style="vertical-align: inherit;">Dan tambahkan makro ke lokasi yang diinginkan di halaman.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subtotal</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi itu saja. </font><font style="vertical-align: inherit;">Dipersenjatai dengan informasi dari artikel ini, Anda dapat merasa seperti master sejati dari Laurents dan mengintegrasikan modul-modul ini ke dalam sistem Smart Home Anda. </font><font style="vertical-align: inherit;">Dan dalam artikel selanjutnya dari seri ini Anda akan belajar cara mengelola modul dari sketsa Anda di Arduino dan dari sistem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino Mega Server</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id384485/">https://habr.com/ru/post/id384485/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id384475/index.html">Ulasan ini bukan gadget. Memilih wadah pelatihan terbaik dan aksesori lainnya untuk telepon pintar: Pembalut Adidas, tas, dan kantong silikon</a></li>
<li><a href="../id384477/index.html">NASA akan menguji teknologi pengembangan asteroid menggunakan sinar matahari</a></li>
<li><a href="../id384479/index.html">Pengembangan game pada Pengolahan dengan kontrol melalui papan Arduino Uno</a></li>
<li><a href="../id384481/index.html">Perang memaksa para ilmuwan Suriah untuk mengisi kembali stok benih dari "Kiamat Kiamat"</a></li>
<li><a href="../id384483/index.html">Telepon eksperimental ditenagai oleh panel surya. RC 1.0</a></li>
<li><a href="../id384487/index.html">Lagu "Selamat Ulang Tahun Untukmu" dengan perintah pengadilan diumumkan secara publik</a></li>
<li><a href="../id384489/index.html">Solid state drive baru tercepat dari pabrikan Korea - Samsung 950 Pro</a></li>
<li><a href="../id384491/index.html">Robot parkir lebih baik dari manusia</a></li>
<li><a href="../id384493/index.html">Jam tangan elektronik gaya Qlocktw</a></li>
<li><a href="../id384499/index.html">Acer Revo One: komputer mini dengan aksi spektrum luas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>