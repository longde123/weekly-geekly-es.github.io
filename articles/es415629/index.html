<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíè üì≤ üëÜüèª Automatizaci√≥n de cuencos tibetanos con la ayuda de "Arduino". Motor paso a paso en lugar de un monje. Programaci√≥n inal√°mbrica üë©‚Äçüëß üçÑ üëä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Y TRANSFERENCIA DE DIVINA VOLUNTAD DE SE√ëALES DE TIEMPO EXACTO A TRAV√âS DE ESP8266. 
 CUARTA PARTE 



 Entonces todo coincidi√≥. Primero, vi un art√≠cu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Automatizaci√≥n de cuencos tibetanos con la ayuda de "Arduino". Motor paso a paso en lugar de un monje. Programaci√≥n inal√°mbrica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415629/">  <b>Y TRANSFERENCIA <s>DE DIVINA VOLUNTAD DE</s> SE√ëALES DE TIEMPO EXACTO A TRAV√âS DE ESP8266.</b> <b><br></b>  <b>CUARTA PARTE</b> <br><br><img src="https://habrastorage.org/webt/gx/au/0j/gxau0jnutvametc-igezo5zkpvk.jpeg"><br><br>  Entonces todo coincidi√≥.  Primero, vi un art√≠culo sobre Gytayms sobre cortinas controladas por un motor paso a paso.  Record√© que ten√≠a el mismo motor al ralent√≠ por segundo a√±o.  Luego mi mirada cay√≥ sobre el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cuenco</a> , que hab√≠a estado acumulando polvo en el estante durante cinco a√±os.  Y entonces varios pensamientos inteligentes comenzaron a venir a mi cabeza ... <br><br>  No, por supuesto, a veces seg√∫n mi estado de √°nimo, tom√© esta copa en mis manos y durante alg√∫n tiempo extraje varios tipos de sonidos hechizantes, pero esto no era exactamente lo que quer√≠a.  Y quer√≠a hacer algo en paralelo y dejar que la copa sonara en ese momento.  Est√° claro que hace mil a√±os, esto habr√≠a requerido un <s>esclavo</s> separado, hace trescientos a√±os ser√≠a un mecanismo de mecanismo ingenioso, y ahora ... Bueno, ahora tenemos un motor paso a paso y una placa Arduino ProMini y otros dispositivos electr√≥nicos <s>no</s> sofisticados.  Solo queda codificar un poco el <s>ganado</s> .  Y al mismo tiempo, aseg√∫rese de que este cincel tibetano al mismo tiempo lucha contra la hora exacta, en vano, o algo que produjo tantos servidores de hora exactos.  Y deje que ESP8266 se comunique con ellos, ella sabe c√≥mo. <br><br>  Entonces ... <br><a name="habracut"></a><br>  Hay un cuenco con badajo. <br><br><img src="https://habrastorage.org/webt/tk/d_/hy/tkd_hy9acctcthkplro1s8fs20k.jpeg"><br><br>  Es necesario hacer que el mazo golpee contra el borde del taz√≥n.  Autom√°ticamente  Tambi√©n con posibilidad de control remoto (¬°y reprogramaci√≥n!).  Y solo para vencer el tiempo como un reloj viejo, pero con precisi√≥n moderna. <br><br>  Mirando hacia el futuro, mostrar√© lo que sucedi√≥ al final.  Mira mejor con sonido. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0jCoLDa7Xx0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Pero empecemos en orden.  Primero ten√≠a que entender c√≥mo se ver√≠a y funcionar√≠a la mec√°nica.  Para la electr√≥nica y el software, estaba tranquilo: detr√°s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tres art√≠culos</a> sobre c√≥mo lidiar con Arduinki desde la distancia. <br><br>  El principal elemento m√≥vil era un simple motor paso a paso 28YBJ-48 y necesitaba entender si pod√≠a manejar el mazo. <br><br><img src="https://habrastorage.org/webt/vl/kt/sn/vlktsnvvvzlckt-wjpsmztiqtqs.jpeg"><br><br>  La conexi√≥n misma del dvigun al arduino no es dif√≠cil, afortunadamente, se vendi√≥ con un controlador ULN2003 listo para usar.  Solo era necesario proporcionar una fuente de alimentaci√≥n separada para 5 voltios y una reserva de 200-300 mA, porque definitivamente no tendr√° suficiente convertidor en el arduino.  Luego, en cualquiera de los cuatro puertos digitales (tom√© PB1, PB2, PB3, PB4) transferimos los siguientes cuadernos de bits en la cantidad de ocho piezas. <br><br><pre><code class="cpp hljs">PORTB=<span class="hljs-number"><span class="hljs-number">0b00000010</span></span>;<span class="hljs-comment"><span class="hljs-comment">//     PORTB=0b00000110; PORTB=0b00000100; PORTB=0b00001100; PORTB=0b00001000; PORTB=0b00011000; PORTB=0b00010000; PORTB=0b00010010;</span></span></code> </pre> <br>  Para la rotaci√≥n en la direcci√≥n opuesta, transferimos los mismos cuadernos, pero en el orden inverso. <br><br><pre> <code class="cpp hljs"> PORTB=<span class="hljs-number"><span class="hljs-number">0b00010010</span></span>; PORTB=<span class="hljs-number"><span class="hljs-number">0b00010000</span></span>; PORTB=<span class="hljs-number"><span class="hljs-number">0b00011000</span></span>; PORTB=<span class="hljs-number"><span class="hljs-number">0b00001000</span></span>; PORTB=<span class="hljs-number"><span class="hljs-number">0b00001100</span></span>; PORTB=<span class="hljs-number"><span class="hljs-number">0b00000100</span></span>; PORTB=<span class="hljs-number"><span class="hljs-number">0b00000110</span></span>; PORTB=<span class="hljs-number"><span class="hljs-number">0b00000010</span></span>;</code> </pre><br>  Lo √∫nico que surge es la velocidad con la que se transmiten los datos.  Est√° claro que cuanto m√°s a menudo, m√°s r√°pido rotar√° el eje del motor, pero ¬øhasta qu√© l√≠mite?  Hay una frecuencia misteriosa de 100 Hz en la descripci√≥n, pero ¬øqu√© significa exactamente: el per√≠odo de un ciclo completo o cada mordisco por separado? <br><br>  En el curso de los experimentos, result√≥ que, aparentemente, se quer√≠a decir la frecuencia del cambio de t√©tradas precisamente.  Al m√°ximo, logr√© acelerar esta frecuencia a 147 Hz, en la cual el eje del motor hizo una revoluci√≥n en aproximadamente un segundo o dos.  No lo med√≠ exactamente, pero puedes juzgar por ti mismo que este modelo con esta caja de cambios no difiere en agilidad especial.  Pero para mi mazo, parec√≠a, en principio, adecuado. <br><br>  Pero despu√©s de todo, no solo la velocidad es importante para nosotros (o m√°s bien, ni siquiera es muy importante) sino la fuerza con la que el motor puede actuar sobre el fluido de trabajo.  En publicaciones dedicadas a este motor, se argument√≥ que no pod√≠an detenerse con una mano.  Result√≥ que el eje en s√≠, s√≠, no se detendr√°, pero ya una palanca peque√±a (y decid√≠ usar un sistema de palanca) literalmente de 10 cm de largo, se detiene y se detiene f√°cilmente incluso con un peque√±o impacto local. <br><br>  Por lo tanto, la opci√≥n m√°s simple inicial, cuando la palanca atornillada al eje empuja el batidor sobre la suspensi√≥n, que en consecuencia golpea el taz√≥n, no pas√≥.  El sonido era demasiado d√©bil.  As√≠ que decid√≠ pedir ayuda a la gravedad (la muy "perra despiadada" en palabras de Sheldon Cooper).  En esta realizaci√≥n, la palanca empuj√≥ un badajo hasta un √°ngulo de aproximadamente 30 grados con respecto a la direcci√≥n del centro de la Tierra, y luego se desenganch√≥ de √©l y lo envi√≥ de camino al taz√≥n.  Realmente me gust√≥ el sonido, tanto desde abajo como para mis vecinos.  El mecanismo de liberaci√≥n se realiz√≥ en un im√°n montado en el extremo de la palanca.  A medida que ascend√≠an, la gravedad derrot√≥ al magn√©tico y se liber√≥ el bloqueo.  Luego hice una parada mec√°nica de ayuda: una barra transversal con la que el mazo se un√≠a cerca del punto extremo de elevaci√≥n.  El motor continu√≥ girando, la palanca tir√≥ y desactiv√≥ por la fuerza la cerradura magn√©tica.  Aqu√≠, el motor fue ayudado por la gravedad, por lo que el esfuerzo de desconexi√≥n se requiri√≥ muy poco. <br><br>  El dise√±o en s√≠ fue ensamblado sobre la base de los detalles del dise√±ador infantil de la Torre Eiffel.  Lo compr√© durante mucho tiempo y peri√≥dicamente utilic√© sus piezas para mis manualidades.  La torre, por supuesto, no result√≥ ser la Eiffel, pero en mi opini√≥n no es peor :) <br><br><div class="spoiler">  <b class="spoiler_title">Casi la torre eiffel</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/wl/la/as/wllaasusy0nhw9s_ad0y7depa9k.jpeg"><br></div></div><br>  Todo funcion√≥ a la perfecci√≥n, pero con una desventaja: el sonido era siempre el mismo poder.  Esto es normal para ganar tiempo, pero en modo libre me gustar√≠a escuchar no solo pausas diferentes en el tiempo, sino tambi√©n sonidos de diferentes intensidades.  Por lo tanto, fue necesario aplicar un electroim√°n, que tambi√©n fue muy √∫til.  Los imanes convencionales tambi√©n fueron √∫tiles: una columna de cinco imanes peque√±os que utilic√© como amortiguador para domar las vibraciones del batidor despu√©s de golpear el taz√≥n. <br><br><img src="https://habrastorage.org/webt/vs/yv/gb/vsyvgb5eqgcdqze2hyhxesgya9k.jpeg"><br><br>  Al principio lo instal√© en el extremo de la palanca, pero el dise√±o era engorroso y poco confiable.  Por lo tanto, el electroim√°n se movi√≥ a un mazo.  Consumi√≥ alrededor de 300 mA y, por supuesto, era imposible controlarlo desde el puerto de Arduino.  Tuve que colocar una simple llave de transistor en una peque√±a placa de pruebas. <br><br><img src="https://habrastorage.org/webt/sm/2j/w6/sm2jw69rz-nfepnkzp99bebnn9i.png"><br><br>  R1 - 560 Ohm, VD1 - 1N4007, VT1 - BD139 <br><br>  Ensambl√© la parte electr√≥nica principal en el "Arduino ProMini" y el m√≥dulo ESP8266-07, cuyo firmware complet√© completamente paso a paso de acuerdo con mi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo anterior</a> .  Como resultado, yo, como siempre, tuve la oportunidad de programar el arduino de forma inal√°mbrica y tambi√©n comunicarme de forma remota con √©l, intercambiando datos, que finalmente utilic√© con √©xito.  Sin embargo, el diagrama muestra el Arduino Nano por razones hist√≥ricas, pero su conexi√≥n no es diferente. <br><br><img src="https://habrastorage.org/webt/ce/bu/6d/cebu6dvlctxn46bgg2cu5k6cnlc.png"><br><br>  Entonces, ¬øqu√© deseaba y luego encarnaba en el c√≥digo del programa? <br><br><ol><li>  Cuando enciende el sistema debe entrar independientemente en modo reloj. </li><li>  Debe haber una aplicaci√≥n en la computadora (tel√©fono inteligente) para cambiar los modos de operaci√≥n y transferir los datos necesarios. </li><li>  Los modos deben ser simples: un reloj, murmullos aleatorios y control manual. </li></ol><br>  Comenc√©, como parec√≠a, con lo m√°s simple: horas.  De hecho, cualquier radioaficionado para principiantes recoge primero una sonda y luego un reloj electr√≥nico.  Y luego, sin embargo, se pregunta por qu√© este reloj se atrasa un minuto por hora, parece que te√≥ricamente calcul√≥ todo correctamente. <br><br>  Ya ten√≠a el reloj electr√≥nico ensamblado. <br><br><img src="https://habrastorage.org/webt/lw/5u/eu/lw5ueutxi1xyqmu9bz8r6vpy-e0.jpeg"><br><br>  Y su caracter√≠stica principal √∫til para m√≠ ahora era su capacidad de arrastrar el tiempo exacto desde los servidores NTP usando el mismo microcircuito ESP8266, en la persona de su primera y m√°s simple encarnaci√≥n. <br><br>  Incluso quer√≠a presentar un art√≠culo sobre este tema hace un par de a√±os, pero despu√©s de ver cu√°ntas veces esto ya estaba hecho, cambi√© de opini√≥n.  Se reir√°n despu√©s de todo.  Pero en el contexto de este post an√°lisis de su trabajo es bastante apropiado.  Como mencion√© anteriormente en los art√≠culos, escribo programas para ESP8266 en el lenguaje LUA.  Sucedi√≥ as√≠. <br><br><div class="spoiler">  <b class="spoiler_title">Por lo tanto, el c√≥digo cargado en ese m√≥dulo ESP era as√≠.</b> <div class="spoiler_text"><pre> <code class="lua hljs">uart.setup(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">9600</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>) timezone = <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-comment"><span class="hljs-comment">--  tmr.alarm(1,5000,0,function() -- try once connect to NTP-server sk=net.createUDPSocket() sk:send(123,"130.149.17.21",string.char( 227, 0, 6, 236, 0,0,0,0,0,0,0,0, 49, 78, 49, 52, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)) sk:on("receive", function(sck, payload) ntp = payload:byte(41) * 128 * 256 * 256 + payload:byte(42) * 128 * 256 + payload:byte(43) * 128 + payload:byte(44) /2 + timezone * 1800 hour =ntp % 43200 / 1800 minute = ntp % 1800 / 30 secund = ntp % 60 uart.write(0,hour) uart.write(0,minute) uart.write(0,secund) sk:close() end ) end)</span></span></code> </pre><br></div></div><br>  La conclusi√≥n es simple.  Una vez (o no), se llama a la funci√≥n que configura el cliente UDP, que llama al servidor de hora exacto y pregunta la hora exacta en consecuencia.  En respuesta, el servidor voltea treinta y dos bytes, de los cuales es necesario obtener los cuatro bytes de datos deseados.  Desafortunadamente, esto no se busca minutos y horas, sino la cantidad de segundos que han transcurrido hasta el momento desde el 1 de enero de 1900.  Por lo tanto, deber√° calcular el tiempo actual a partir de los cuatro bytes de estos segundos con varias manipulaciones complejas. <br><br>  Adem√°s, todo es m√°s simple.  Inicie el transmisor UART y reduzca el tiempo calculado en tres bytes: horas, minutos y segundos. <br><br>  Y nuevamente insert√© este c√≥digo, ya en mi gestor de arranque LUA (enlace), justo en el lugar donde ya se ha realizado la conexi√≥n a la red WI-FI, pero a√∫n no se ha comenzado a trabajar. <br><br><div class="spoiler">  <b class="spoiler_title">A la vista, se ve as√≠.</b> <div class="spoiler_text"><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InstrProgrammingEnable</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-comment"><span class="hljs-comment">-- instruction for MC "enable programming" p=0 while p&lt;31 do p=p+1 pin=8 gpio.write(pin, gpio.LOW) spi.send(1, 0xAC,0x53) read = spi.recv( 1, 8) spi.send(1,0,0) gpio.write(pin, gpio.HIGH) if (string.byte(read)== 83) then --print("connection established") p=33 if(p==31) then --print("no connection") end end end end function ProgrammingDisable () pin=2--END OF ESET FOR MK GPIO4 gpio.mode(pin, gpio.INPUT) pin=8 gpio.mode(pin, gpio.INPUT) -- CE chip enable not used GPIO15 pin=5--CLK MASTER for SPI GPIO14 used gpio.mode(pin, gpio.INPUT) pin=6--MISO MASTER for SPI GPIO 12 may not used gpio.mode(pin, gpio.INPUT) pin=7--MOSI MASTER for SPI //GPIO13 used gpio.mode(pin, gpio.INPUT) end --PROGRAMMING ENABLE function ProgrammingEnable () pin=2-- RESET FOR MK gpio.mode(pin, gpio.OUTPUT) gpio.write(pin, gpio.LOW) pin=2--POZITIV FOR 4MSEC RESET FOR MK gpio.mode(pin, gpio.OUTPUT) gpio.write(pin, gpio.HIGH) tmr.delay(4) gpio.mode(pin, gpio.OUTPUT) gpio.write(pin, gpio.LOW) tmr.delay(25000) end function InstrFlashErase() --FFFFFFFFFFFFFFFFFF pin=8 gpio.write(pin, gpio.LOW) spi.send(1,0xAC,0x80,0,0) gpio.write(pin, gpio.HIGH) tmr.delay(15000) pin=2--RESET FOR MK gpio.mode(pin, gpio.OUTPUT) gpio.write(pin, gpio.HIGH) tmr.delay(20000) gpio.write(pin, gpio.LOW) --print( "FLASH is erased") InstrProgrammingEnable () end function InstrStorePAGE(H, address, data) pin=8 gpio.write(pin, gpio.LOW) spi.send(1,H,0,address,data) gpio.write(pin, gpio.HIGH) tmr.delay(500) end function InstrWriteFLASH(page_address_low,page_address_high) pin=8 gpio.write(pin, gpio.LOW) spi.send(1,0x4C,page_address_high,page_address_low,0) gpio.write(pin, gpio.HIGH) tmr.delay(5000)--        end function Programming (payload) pin=8--CS MASTER for SPI gpio.mode(pin, gpio.OUTPUT, gpio.PULLUP) pin=4--LED LIGHTS ON LOW gpio.mode(pin, gpio.OUTPUT) gpio.write(pin, gpio.LOW) --print(string.len(payload)) page_count = 7 --  1  for k =0 ,page_count ,1 do--quantity of pages for i=0 , 127, 2 do-- -1 address = i/2 data=payload:byte(i+1+128*k) if data == nil then data = 0xff end InstrStorePAGE(0x40,address,data) -- tmr.delay(100)-- otherwise not in time write data =payload:byte(i+1+1+128*k) if data == nil then data = 0xff end InstrStorePAGE(0x48,address,data) -- tmr.delay(100) end page_address_low=bit.band(k ,3)*64 -- 3   11 page_address_high=k/4+frame1024*2 tmr.delay(1000) InstrWriteFLASH(page_address_low,page_address_high) tmr.wdclr() end pin=4--LED gpio.mode(pin, gpio.OUTPUT) gpio.write(pin, gpio.HIGH) end --MAIN BLOCK wifi.setmode(wifi.STATION) --wifi.sta.config("mixa","M1sh8111") -- set SSID and password of your access point station_cfg={} tmr.delay(30000) station_cfg.ssid="mixa" tmr.delay(30000) station_cfg.pwd="M1sh8111" tmr.delay(30000) wifi.sta.config(station_cfg) tmr.delay(30000) wifi.sta.connect() tmr.delay(1000000) --print(wifi.sta.status()) --print(wifi.sta.getip()) while ( wifi.sta.status()~=1 ) do if( wifi.sta.status()==5) then break end end uart.setup(0,9600,8,0,1,0) --     NTP      AVR timezone = 3 --  tmr.alarm(1,5000,0,function() -- try once connect to NTP-server sk=net.createUDPSocket() sk:send(123,"130.149.17.21",string.char( 227, 0, 6, 236, 0,0,0,0,0,0,0,0, 49, 78, 49, 52, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)) sk:on("receive", function(sck, payload) ntp = payload:byte(41) * 128 * 256 * 256 + payload:byte(42) * 128 * 256 + payload:byte(43) * 128 + payload:byte(44) /2 + timezone * 1800 hour =ntp % 43200 / 1800 minute = ntp % 1800 / 30 secund = ntp % 60 uart.write(0,100)-- AVR    uart.write(0,hour) uart.write(0,minute) uart.write(0,secund) sk:close() end ) end) prog_address=""; sv=net.createServer(net.TCP,30) tmr.delay(100) --print("SERVER READY") sv:listen(40000,function(c)-- ,   c:on("receive", function(c, payload) --print(payload) if (payload =="program\r\n") then c:send("ready\r\n") --print("ready for program\r\n") tmr.wdclr() spi.setup(1, spi.MASTER, spi.CPOL_LOW, spi.CPHA_LOW, spi.DATABITS_8,80,spi.FULLDUPLEX) --  SPI 320  115 000  ProgrammingEnable ()---------------------------------------------------------------------  80    1  tmr.delay(100) InstrProgrammingEnable () tmr.delay(100) InstrFlashErase() tmr.delay(100) frame1024=0--   st=net.createServer(net.TCP,30)--         AWR,   stop program st:listen(40001,function(c) c:on("receive", function(c, payload) tmr.wdclr() Programming (payload) frame1024=frame1024+1 end) end) end if (payload =="data\r\n") then tmr.wdclr() c:send("ready\r\n") -- print("ready for data\r\n") c:on("receive", function(c, prog_address_payload) prog_address=prog_address_payload-- IP  UDP       -- print(prog_address) c:send(prog_address) srv=net.createUDPSocket()--     ,   data stop srv:listen(50000) -- uart.setup(0,9600,8,0,1,0) srv:on("receive", function(srv, pl) --      UDP pl=pl*1 -- print(pl) uart.write(0,pl) --    UART  AVR end) uart.on("data", 1, function(data) --    UART  AVR srv:send(50000,prog_address,data) --    UDP   end, 0) tmr.wdclr() end) end if (payload =="stop data\r\n") --      then ready = false if(srv~=nil) then srv:close() -- print("stop data") end collectgarbage() end if (payload =="stop program\r\n") then if(st~=nil) then st:close() frame1024=0 ProgrammingDisable () -- print("stop program") end collectgarbage() end end) end)</span></span></code> </pre><br></div></div><br>  Por supuesto, esto va en contra de mi concepto, donde el ESP8266 es un puente inal√°mbrico limpio, y el microcontrolador ATMEL hace el resto, pero como dicen: "una vez, no ...". <br><br>  Entonces, obtuvimos el tiempo exacto inicial (directamente del servidor NTP o indirectamente a trav√©s de la aplicaci√≥n en la computadora, no importa), luego nos gustar√≠a considerar el tiempo nosotros mismos.  En primer lugar, no hay nada para cargar la red y, en segundo lugar, ATMEL te permite te√≥ricamente contar segundos con buena precisi√≥n.  Te√≥ricamente s√≠.  Pero en la pr√°ctica, hay dificultades. <br><br>  <b>Una peque√±a digresi√≥n sobre el reloj en tiempo real en el AVR.</b> <br><br>  En teor√≠a, no hay nada complicado en construir un reloj en el microcontrolador AVR.  Los dise√±adores m√°s rabiosos incluso empujan un reloj de cuarzo a 32768 Hz en el circuito para esto.  Pero, de hecho, esto no es necesario.  De hecho, es necesario un reloj de cuarzo para formar un m√∫ltiplo de interrupci√≥n de un segundo y despertar un microcontrolador (nota) <b>dormido</b> .  Si su dispositivo funciona constantemente, y el reloj generalmente lo hace, entonces poner cuarzo adicional al existente y tomar dos patas de entrada-salida debajo es imprudente.  Es posible usar un resonador de cuarzo, que ya est√° all√≠, ocho o diecis√©is megahercios all√≠.  Su precisi√≥n de cuantificaci√≥n es suficiente para sus ojos, y contar un segundo como contador de tiempo tambi√©n ser√° f√°cil. <br><br>  De hecho, el microcontrolador AVR ya tiene todo para esto.  Como saben, la se√±al de reloj de entrada (por ejemplo, 8 MHz) llega dentro del chip (por ejemplo, AVRmega328P como el m√°s com√∫n para arduino) en el llamado pre-divisor, donde puede dividirse a√∫n m√°s por el deseo del programador (generalmente por 8, 64, 256, 1024).  Y luego llega a alg√∫n tipo de contador de tiempo (digamos T1), que inmediatamente comienza a incrementarse. <br><br>  Entonces, tomemos 8 MHz y dividamos entre 256. Obtenemos respectivamente la frecuencia de reloj del contador 31250 Hz.  En consecuencia, dado que el contador T1 tiene diecis√©is d√≠gitos y puede contar en consecuencia hasta 65535, entonces solo tendr√° tiempo para contar hasta 31250 en un segundo.  Lo que necesitamos  Adem√°s, nuestro temporizador tiene otro registro de comparaci√≥n muy √∫til.  Si escribimos el n√∫mero 31250 all√≠, entonces, bajo ciertas condiciones, se comparar√° constantemente con el contenido del contador T1 y, finalmente, cuando sea igual, el contador generar√° una se√±al de interrupci√≥n, por ejemplo, mantenga su segundo. <br><br>  Resulta conveniente, pero, desafortunadamente, no es del todo exacto.  Para nuestro contador se contar√° con un error de cuantificaci√≥n de 256 / 8,000,000, que da un error bastante grande al calcular un segundo en hasta 32 microsegundos.  Y esto lleva a un error de 2.8 segundos por d√≠a (0.000032 * 3600 * 24). <br>  Pero si dividimos los 8 MHz originales por una cantidad menor, por ejemplo, entre 64, entonces la precisi√≥n de cuantificaci√≥n aumentar√° 4 veces a 8 Œºs y reducir√° el error resultante a 0.33 segundos por d√≠a.  Pero, desafortunadamente, en este caso, el contador deber√° contarse hasta 125,000, y dicho n√∫mero en el registro de diecis√©is bits no entrar√°.  Tendremos que escribir un n√∫mero m√°s peque√±o en el registro de comparaci√≥n (62500 todav√≠a puede caber) y agregar un ciclo en el programa en s√≠ mismo, donde un segundo se contar√° no por una, sino por dos interrupciones. <br><br>  Pero tomamos un estuche ideal, y un resonador de cuarzo real, especialmente instalado en un tablero "hecho en China", puede traerte muchas sorpresas.  No, en general, si observa el cuarzo est√°ndar en las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hojas</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">datos</a> , te√≥ricamente, no todo es tan malo. <br><br>  Como podemos ver, el cuarzo de rango medio se comporta bastante bien.  Tiene una inestabilidad de su propia sinton√≠a a 25 ppm (o, en otras palabras, 25 ppm), es decir, resonar√° a una frecuencia no de 8 MHz, pero, por ejemplo, a una frecuencia de 8, 0002 MHz, lo que nos dar√° hasta 2.1 segundos de error por d√≠a  Pero este es un error constante y se puede tener en cuenta.  Tal cuarzo tambi√©n puede flotar a una temperatura de 5-10 ppm por grado, pero en condiciones de funcionamiento del dispositivo en la habitaci√≥n, el error tambi√©n ser√° peque√±o.  Todav√≠a existe un factor como el envejecimiento, pero es muy escaso y cambia las caracter√≠sticas del cuarzo a un estado de al menos cierta perceptibilidad, bueno, tal vez cinco a√±os.  O diez. <br><br>  Y aqu√≠ nos alegra tomar un clon chino de arduino, por ejemplo ARDUINO UNO. <br><br><img src="https://habrastorage.org/webt/p0/bk/ca/p0bkca_wthxj3_9hx9ttr6ivzbw.png"><br><br>  Ejecutamos en √©l un programa de prueba para contar el tiempo y comenzarlo.  ¬øRetrasos por hora por un minuto?  F√°cil!  Segunda junta Arduino UNO?  No hay nada mejor. <br><br>  Toma el Arduino ProMini. <br><br><img src="https://habrastorage.org/webt/r4/b5/e6/r4b5e6ggnkxbbgmeefim9cv5-8i.jpeg"><br><br>  Y aqu√≠ est√° mejor, s√≠.  El error disminuy√≥ a veinte segundos por hora.  Bueno, ya comparable a un reloj mec√°nico de cuco. <br><br>  El √∫ltimo tablero que tuve a mano fue el Arduino Nano. <br><br><img src="https://habrastorage.org/webt/k_/iz/iq/k_iziqqu4ag5ywb2rm39qlvi8ng.jpeg"><br><br>  Y ella fue la √∫nica que mostr√≥ resultados m√°s o menos sanos. <br><br>  Pero incluso con tal tablero, usando solo construcciones te√≥ricas, usted mismo comprende que no har√° un reloj exacto.  La placa necesita ser configurada y yo, con un suspiro, trep√© detr√°s del osciloscopio. <br><br>  Result√≥ que las placas Arduino tienen una caracter√≠stica desagradable: la salida a la que est√° conectado el resonador de cuarzo no tiene salida al peine de clavijas, aunque corresponde al puerto PB7.  Como, ya que el puerto est√° ocupado por cuarzo, entonces no te aferras a √©l.  Y justo al pie del microcontrolador, es muy dif√≠cil levantar la sonda del osciloscopio, para el montaje en superficie y un paso de 0,5 mm entre los terminales.  Pero incluso unirme a la pierna derecha no me dio nada.  Ya sea porque pinch√© incorrectamente o pinch√© en el lugar equivocado, porque la salida del resonador de cuarzo, tal vez no la salida del generador de reloj, y en general, est√° dentro del microcontrolador.  Por lo tanto, tuve que sortear soluciones alternativas: poner el preescalador en el coeficiente de divisi√≥n m√≠nimo: uno, escribir cero en el registro de comparaci√≥n para que la interrupci√≥n se sacudiera inmediatamente e ingresar al microcontrolador en un modo especial en el que el tramo de puerto PB1 cambia su estado l√≥gico con cada una de tales interrupciones. <br>  L√≥gicamente, cuando enciende la placa Arduino Nano de 16 MHz, debe aparecer un meandro de 8 MHz en la salida de este puerto. <br><br>  Que es lo que pas√≥.  El osciloscopio mostr√≥ una frecuencia de 8. 002 31 MHz.  Adem√°s, la √∫ltima descarga vivi√≥ su propia vida y todav√≠a no entend√≠a si faltaba la precisi√≥n del osciloscopio o si la frecuencia del oscilador de cristal flotaba de esta manera.  M√°s como un segundo. <br><br>  La buena estabilidad t√©rmica all√≠ tampoco ol√≠a.  Si respira en el tablero (¬øtal vez, por cierto, los recipientes a√∫n provienen de la humedad?) O trae un soldador (desde lejos), entonces el cuarzo podr√≠a moverse inmediatamente a cincuenta hertzios.  Y estas mediciones a√∫n se duplican aproximadamente, ya que la frecuencia inicial es de 16 MHz. <br><br>  Por lo tanto, en placas Arduino (al menos las de origen chino) es imposible lograr una precisi√≥n de m√°s de 200 Hz a una frecuencia de reloj de 16 MHz.  Lo que nos da la m√°xima precisi√≥n de los relojes ensamblados en tales tableros no m√°s de un segundo por d√≠a.  Y eso est√° bien. <br><br>  Porque hay clones chinos de Arduino UNO, ya mencionados por m√≠ anteriormente, con los que, en general, todo est√° mal.  Y son muy comunes, porque son baratos y convenientes. <br><br>  Por lo tanto, su frecuencia puede diferir de la declarada en m√°s de cien kilohercios.  Lo cual es inusual incluso para el peor cuarzo chino. <br><br>  ¬°El acertijo comienza con el hecho de que 12 MHz est√° escrito en el propio cuarzo!  Y en las descripciones de los vendedores, tambi√©n. <br><br><img src="https://habrastorage.org/webt/5l/ab/pj/5labpjeqa-grafww3mkdqnnawb4.jpeg"><br><br>  Pero no hay 12 MHz, eso es seguro.  Si habilita el puerto serie UART en la placa, lo ver√° por usted mismo.  Como el UART sintonizado a esta frecuencia no funcionar√°.  Y sintonizado a una frecuencia de 16 MHz - ser√°.  Adem√°s, personalmente vi las formas de onda en mis dos tableros Arduino Uno.  La primera placa ten√≠a una frecuencia de generador de 15.8784 MHz, y la segunda de 15.8661 MHz. <br><br>  Pero, de repente, result√≥ que el cuarzo de 12 MHz no est√° directamente relacionado con el microcontrolador AVR, sino que est√° dise√±ado para operar el puerto serie con una computadora a trav√©s de USB (para descargar bocetos).  Por lo tanto, la suposici√≥n de que no hab√≠a cuarzo adentro, sino una cadena RC mal ajustada, no se materializ√≥.  Y el cuarzo que necesitamos es mucho m√°s peque√±o y est√° ubicado al lado del chip del microcontrolador.  Pero es muy peque√±o y no tiene inscripci√≥n. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, todav√≠a no pod√≠a entender c√≥mo y d√≥nde encontrar resonadores de cuarzo de tan terrible calidad. </font><font style="vertical-align: inherit;">Pero aparentemente, todo es posible en China. </font><font style="vertical-align: inherit;">Y de alguna manera pens√© en los temerarios que usaban Arduinki para asuntos serios. </font><font style="vertical-align: inherit;">Bueno, el software puede y debe escribirse usted mismo, pero ¬øqu√© hacer con la calidad de los m√≥dulos mismos? </font><font style="vertical-align: inherit;">Aparentemente, desde los componentes electr√≥nicos, los chinos est√°n empujando a todos los m√°s baratos y rechazados. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El programa Singing Bowl para AVR. </font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al final, habiendo derrotado todas las dificultades con el tiempo preciso, escrib√≠ el siguiente c√≥digo para mi Arduino ProMini</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programa C para el microcontrolador AVRmega328P</font></font></b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* * Tibetian_Bowl.c * * Created: 07.06.2018 0:29:57 * Author: User */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> F_CPU 8000000 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;avr/io.h&gt; #include &lt;avr/interrupt.h&gt; #include &lt;stdint.h&gt;//    #include &lt;math.h&gt; //  #include &lt;stdio.h&gt; // - #include &lt;avr/eeprom.h&gt; #include &lt;stdbool.h&gt; #include &lt;setjmp.h&gt; #include &lt;stdlib.h&gt; volatile bool change_mode = false; volatile bool boom =false; volatile bool go_ahead=true; volatile bool go_back=false; volatile bool gerkon=false; volatile uint8_t latency=2;//     latency = 1 volatile uint8_t hour=12; volatile uint8_t hour24=12;//       12 volatile uint8_t minute=0; volatile uint8_t secund=0; volatile uint8_t power=0; volatile uint8_t pause_between_boom=0; volatile uint8_t first_byte=0; volatile uint8_t second_byte=0; volatile uint8_t third_byte=0; volatile uint8_t firth_byte=0; volatile uint8_t fifth_byte=0; volatile uint8_t cSREG; ISR(USART_RX_vect) { //     ,  //   ‚Äì  ,    . if (first_byte==0) { first_byte=UDR0; change_mode=true; goto ret; } if (second_byte==0) { second_byte=UDR0; goto ret; } if (third_byte==0) { third_byte=UDR0; goto ret; } if (firth_byte==0) { firth_byte=UDR0; goto ret; } if (fifth_byte==0) { fifth_byte=UDR0; goto ret; } cSREG=UDR0; ret: return; } ISR(PCINT1_vect )//PC2 int 10 //    { if (go_ahead) { UDR0=44; //      44 } if (go_back) { gerkon=true; } } ISR(TIMER1_COMPA_vect) { //        secund++; if (secund ==60) { secund=0; minute++; if(minute==60) { minute=0; hour++; if(hour==12) { hour=1;//     12  } hour24++; if(hour24==24) { hour24=1; } boom=true; } } } void time_delay(long dell)//       { long i; dell=dell*796;//  8  for(i=0;i&lt;dell;i++){;;}; sei();//    ,  -    .WTF ?????????????????????? } void turn_onkward()//       { uint8_t legnth=170;//    ( 0  170) for(uint16_t i =0;i&lt;=legnth;i++) { go_ahead=true; PORTB=0b00000010;//       time_delay(latency); PORTB=0b00000110; time_delay(latency); PORTB=0b00000100; time_delay(latency); PORTB=0b00001100; time_delay(latency); PORTB=0b00001000; time_delay(latency); PORTB=0b00011000; time_delay(latency); PORTB=0b00010000; time_delay(latency); PORTB=0b00010010; time_delay(latency); if (i&gt;140) { PORTD |=(1&lt;&lt;PORTD2);//     , 1 -   } } time_delay(100); go_ahead=false; } void turn_backward(uint8_t pause, uint8_t force_of_sound)//     // //       { uint8_t legnth=170;//       ( 0  170) for(uint16_t i =0;i&lt;=legnth;i++) { go_back=true; PORTB=0b00010010; time_delay(latency); PORTB=0b00010000; time_delay(latency); PORTB=0b00011000; time_delay(latency); PORTB=0b00001000; time_delay(latency); PORTB=0b00001100; time_delay(latency); PORTB=0b00000100; time_delay(latency); PORTB=0b00000110; time_delay(latency); PORTB=0b00000010;//16 ms   ,  latency = 2 time_delay(latency); if (i==force_of_sound*17) { PORTD &amp;=~(1&lt;&lt;PORTD2);//     , 0 -   } if (gerkon) { gerkon=false; break; } } time_delay(50); time_delay(pause*1000);//       go_back=false; } void sound(uint8_t force,uint8_t pause) //       1  10           { turn_onkward(); turn_backward(pause,force); } int main(void) { sei(); // UART  9600    8  time_delay(2000);//  , esp     -  UCSR0A=0; UCSR0B=0b10011000;// a UART UCSR0C=0b00000110; UBRR0L=51;// 8  9600  UART UBRR0H=0; //   INT0   2   10 //        PCICR|=(1&lt;&lt;PCIE1);//   14-8 PCMSK1|=(1&lt;&lt;PCINT10);//    INT10 DDRC&amp;=~(1&lt;&lt;PORTC2); DDRB=0b00111110;//PB1-PB4    , PB5      DDRD=0b00000100; // PD2      //SET INTERRUPT FROM TIMER1 AND SET TIMER1 GTCCR=0;//RESET PRESCALER TCCR1A=0;//I/O NORMAL WORK TCCR1C=0; TCCR1B=0B00001100;//1/256 PRESCALING AND CTC MODE TCNT1H=0;//RESET TIMER1 TCNT1L=0; TIMSK1=0B00000010;//SET COMPARE A INTERRUPT ENABLED OCR1AH=0x79;//SET TIME CONSTANT IN COMPARE REGISTER OCR1AL=0xa7;// 31143    7 972 608  TCCR0B=0b00000010;// 8        0  255 while (1) { begining: time_delay(1000); if (first_byte!=0) { UDR0=first_byte;//      .     (100,101,102)    } if (first_byte==100)//   (     NTP  { hour=second_byte;//  if (hour&gt;12)//      12  (24  ) { hour=hour-12; } if (hour==0) { hour=12; } minute=third_byte;//  secund=firth_byte;//  power=fifth_byte;//   first_byte=0;//   second_byte=0; third_byte=0; firth_byte=0; fifth_byte=0; change_mode=false; goto clock_mode; } if (first_byte==101)//   { power=second_byte; pause_between_boom=third_byte; first_byte=0; second_byte=0; third_byte=0; firth_byte=0; fifth_byte=0; change_mode=false; goto random_mode; } if (first_byte==102)//  { power=second_byte; first_byte=0; second_byte=0; third_byte=0; firth_byte=0; fifth_byte=0; change_mode=false; goto hand_mode; } //     ,      first_byte=0; second_byte=0; third_byte=0; firth_byte=0; fifth_byte=0; goto begining; clock_mode: while(change_mode==false) { if (boom)//   { for(uint8_t i =0;i&lt;hour;i++) { if ((hour24&gt;21)|(hour24&lt;10))//  { sound(3,0);//   10 (),  0  boom=false; } else { sound(power,0);//   10 (),  0  boom=false; } } } } goto begining; random_mode: while(change_mode==false) { uint8_t random_power = TCNT0;//      1 uint8_t random_pause = TCNT1L;//      1 random_pause=TCNT0;//      1 random_power=random_power/25; if (random_power&lt;5) { random_power=random_power+2;//      } random_pause=(random_pause/25)+pause_between_boom; UDR0=random_pause; time_delay(100); sound(random_power,random_pause); } goto begining; hand_mode: sound(power,0); goto begining; } }</span></span></span></span></code> </pre><br></div></div><br>   .   ,     ,    UART.   : <br><br> 100   <br> 101   <br> 102  . <br><br>  AVR  ,  ,        ESP8266.   , ESP    ,    NTP        .  ,       .   - 1  ,              -  ,   . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La interrupci√≥n del interruptor de l√°minas establece el mismo punto cero, si con el tiempo la palanca que tira del badajo comienza a moverse con relaci√≥n al eje del motor. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La aplicaci√≥n para la computadora.</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Se basa de todos modos en los mismos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">programas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> antiguos </font><font style="vertical-align: inherit;">, solo la representaci√≥n visual cambia aqu√≠.</font></font><br><br><img src="https://habrastorage.org/webt/cl/fo/k4/clfok4_1edajbwxdondtz9h9dpk.png"><br><br>       AVR  HTTP  UDP .             UDP . ,          , , -,      LUA  ,  -,     ,              UART.   ,  () AVR  .    ,   ,    ,      ,        ,        . <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">.</a> <br><br>  <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En general, los monjes tibetanos no solo golpean con badajos en cuencos cantores. </font><font style="vertical-align: inherit;">Si manejas con cuidado el mazo justo a lo largo del borde del cuenco, entonces, sin ning√∫n golpe, nacer√° un sonido maravilloso, teniendo debajo la </font><font style="vertical-align: inherit;">naturaleza </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">divina</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> de la resonancia. </font><font style="vertical-align: inherit;">Pero este es un desaf√≠o realmente serio para Arduino.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es415629/">https://habr.com/ru/post/es415629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es415619/index.html">Apple y Samsung completan guerra de patentes de 7 a√±os</a></li>
<li><a href="../es415621/index.html">Sistema de monitoreo minero</a></li>
<li><a href="../es415623/index.html">La din√°mica del vuelo vertical de un avi√≥n m√°s ligero que el aire.</a></li>
<li><a href="../es415625/index.html">Kubernetes: seminario web (4 de julio a las 19:30) e intensivo (3-5 de agosto)</a></li>
<li><a href="../es415627/index.html">C√≥mo (no) tienes que ser un gilipollas: la historia de un director t√©cnico</a></li>
<li><a href="../es415637/index.html">C√≥mo Yandex aplic√≥ la tecnolog√≠a de inteligencia artificial para traducir p√°ginas web</a></li>
<li><a href="../es415641/index.html">Cata de gaviotas. En el arsenal de un hacker de radio</a></li>
<li><a href="../es415643/index.html">Magento Meetup Kharkov - reportajes en video</a></li>
<li><a href="../es415645/index.html">Una mirada a Highload ++ de Siberia</a></li>
<li><a href="../es415647/index.html">A partir del 1 de julio, se requieren servicios de Internet para almacenar mensajes de usuarios rusos durante 6 meses.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>