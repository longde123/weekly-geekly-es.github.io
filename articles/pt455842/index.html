<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå∑ üéé ü•õ Espalhe uma lista vinculada individualmente. Edi√ß√£o Swift üîò üíÉüèª ü•å</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="N√£o √© segredo que um dos passatempos favoritos de um desenvolvedor de software √© entrevistar empregadores. Todos fazemos isso de tempos em tempos e po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Espalhe uma lista vinculada individualmente. Edi√ß√£o Swift</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455842/"> N√£o √© segredo que um dos passatempos favoritos de um desenvolvedor de software √© entrevistar empregadores.  Todos fazemos isso de tempos em tempos e por raz√µes completamente diferentes.  E o mais √≥bvio deles - a procura de emprego - acho que n√£o √© o mais comum.  Participar de uma entrevista √© uma boa maneira de manter a forma, repetir o b√°sico esquecido e aprender algo novo.  E se for bem-sucedido, tamb√©m aumente a autoconfian√ßa.  Ficamos entediados, definimos o status de "aberto a ofertas" em algum tipo de rede social "comercial" como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"LinkedIn"</a> - e o ex√©rcito de gerentes de recursos humanos j√° est√° atacando nossas caixas de entrada para receber mensagens. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/bw/9r/mc/bw9rmcigk0k9beg-50tdq74sadw.jpeg" alt="imagem"><br><br>  No processo, enquanto todo esse tumulto est√° acontecendo, somos confrontados com muitas perguntas que, como dizem do outro lado da cortina impl√≠cita, est√£o "tocando um sino", e seus detalhes est√£o ocultos por tr√°s da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">neblina da guerra</a> .  Na maioria das vezes, eles s√£o lembrados apenas em testes por algoritmos e estruturas de dados (pessoalmente, eu n√£o tinha esses dados) e, na verdade, entrevistas. <br><br>  Uma das perguntas mais comuns em uma entrevista para um programador de qualquer especializa√ß√£o √© a lista.  Por exemplo, listas vinculadas individualmente.  E algoritmos b√°sicos relacionados.  Por exemplo, uma invers√£o de marcha.  E, geralmente, isso acontece da seguinte maneira: "Bom, mas como voc√™ expandiria uma lista vinculada individualmente?"  O principal √© pegar o candidato de surpresa com esta pergunta. <br><br>  Na verdade, tudo isso me levou a escrever essa breve resenha para lembretes e edifica√ß√µes constantes.  Ent√£o, brincadeiras √† parte, eis! <br><br><h2>  Lista vinculada individualmente </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Uma lista vinculada</a> √© uma das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">estruturas</a> b√°sicas de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dados</a> .  Cada elemento (ou n√≥) consiste em, de fato, dados armazenados e links para elementos vizinhos.  Uma lista vinculada individualmente armazena apenas um link para o pr√≥ximo elemento na estrutura e uma lista <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">duplamente vinculada</a> mant√©m o link para o pr√≥ximo e o anterior.  Essa organiza√ß√£o dos dados permite que eles estejam localizados em qualquer √°rea da mem√≥ria (diferente de, por exemplo, uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">matriz</a> , cujos elementos devem estar localizados na mem√≥ria, um ap√≥s o outro). <br><br>  H√° muito mais a ser dito sobre listas, √© claro: elas podem ser circulares (ou seja, o √∫ltimo elemento armazena um link para o primeiro) ou n√£o (ou seja, n√£o h√° link para o √∫ltimo elemento).  As listas podem ser digitadas, ou seja,  cont√©m dados do mesmo tipo ou n√£o.  E assim por diante e assim por diante. <br><br>  Melhor tentar escrever algum c√≥digo.  Por exemplo, de alguma forma, voc√™ pode imaginar um n√≥ da lista: <br><br><pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> payload: <span class="hljs-type"><span class="hljs-type">T</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nextNode: <span class="hljs-type"><span class="hljs-type">Node?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(payload: <span class="hljs-type"><span class="hljs-type">T</span></span>, nextNode: <span class="hljs-type"><span class="hljs-type">Node?</span></span> = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.payload = payload <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.nextNode = nextNode } }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Gen√©rico" √© um</a> tipo capaz de armazenar cargas √∫teis de qualquer tipo no campo de <code>payload</code> . <br><br>  A lista em si √© exaustivamente identificada por seu primeiro n√≥: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SinglyLinkedList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstNode: <span class="hljs-type"><span class="hljs-type">Node</span></span>&lt;<span class="hljs-type"><span class="hljs-type">T</span></span>&gt;? <span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(firstNode: <span class="hljs-type"><span class="hljs-type">Node</span></span>&lt;<span class="hljs-type"><span class="hljs-type">T</span></span>&gt;? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.firstNode = firstNode } }</code> </pre><br>  O primeiro n√≥ √© declarado opcional, porque a lista pode estar vazia. <br><br>  <i>Em teoria, √© claro, na classe voc√™ precisa implementar todos os m√©todos necess√°rios - inserir, excluir, acessar n√≥s, etc., mas faremos isso em outro momento.</i>  <i>Ao mesmo tempo, verificaremos se o uso de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>struct</code></a> (com o qual a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Apple</a> nos incentiva ativamente pelo nosso exemplo) √© uma escolha melhor e talvez lembremos a abordagem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Copiar na grava√ß√£o"</a> .</i> <br><br><h2>  Propaga√ß√£o de lista vinculada √∫nica </h2><br><h3>  O primeiro caminho.  Ciclo </h3><br>  Chegou a hora de come√ßarmos os neg√≥cios para os quais estamos aqui hoje!  E a maneira mais eficaz de lidar com isso √© de duas maneiras.  O primeiro √© um loop simples, do primeiro ao √∫ltimo n√≥. <br><br>  O ciclo trabalha com tr√™s vari√°veis, que antes do in√≠cio recebem o valor do n√≥ anterior, atual e seguinte.  (Nesse momento, o valor do n√≥ anterior est√° naturalmente vazio.) O ciclo come√ßa verificando se o pr√≥ximo n√≥ n√£o est√° vazio e, nesse caso, o corpo do ciclo √© executado.  Nenhuma m√°gica acontece no loop: no n√≥ atual, o campo que se refere ao pr√≥ximo elemento recebe um link para o anterior (na primeira itera√ß√£o, o valor do link, respectivamente, √© redefinido, o que corresponde ao estado de coisas no √∫ltimo n√≥).  Al√©m disso, as vari√°veis ‚Äã‚Äãcorrespondentes ao n√≥ anterior, atual e seguinte recebem novos valores.  Ap√≥s sair do loop, o n√≥ atual (ou seja, o √∫ltimo iter√°vel em geral) recebe um novo valor de link para o pr√≥ximo n√≥, porque  A sa√≠da do loop ocorre exatamente no momento em que o √∫ltimo n√≥ da lista se torna atual. <br><br>  Em palavras, √© claro, tudo isso parece estranho e incompreens√≠vel, ent√£o √© melhor olhar para o c√≥digo: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SinglyLinkedList</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reverse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> previousNode: <span class="hljs-type"><span class="hljs-type">Node</span></span>&lt;<span class="hljs-type"><span class="hljs-type">T</span></span>&gt;? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentNode = firstNode <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nextNode = firstNode?.nextNode <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> nextNode != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { currentNode?.nextNode = previousNode previousNode = currentNode currentNode = nextNode nextNode = currentNode?.nextNode } currentNode?.nextNode = previousNode firstNode = currentNode } }</code> </pre><br>  Para verifica√ß√£o, usamos uma lista de n√≥s cujas cargas √∫teis s√£o identificadores <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">inteiros</a> simples.  Crie uma lista de dez elementos: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> node = <span class="hljs-type"><span class="hljs-type">Node</span></span>(payload: <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-comment"><span class="hljs-comment">// T == Int let list = SinglyLinkedList(firstNode: node) var currentNode = node var nextNode: Node&lt;Int&gt; for id in 1..&lt;10 { nextNode = Node(payload: id) currentNode.nextNode = nextNode currentNode = nextNode }</span></span></code> </pre><br>  Tudo parece estar bem, mas somos pessoas, n√£o computadores, e seria bom obter uma prova visual da exatid√£o da lista criada e do algoritmo descrito acima.  Talvez uma simples impress√£o seja suficiente.  Para tornar a sa√≠da leg√≠vel, adicione a implementa√ß√£o do protocolo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><code>CustomStringConvertible</code></a> n√≥ com um identificador inteiro: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomStringConvertible</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Int</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> description: <span class="hljs-type"><span class="hljs-type">String</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> firstPart = <span class="hljs-string"><span class="hljs-string">""" Node \(Unmanaged.passUnretained(self).toOpaque()) has id \(payload) and """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> nextNode = nextNode { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> firstPart + <span class="hljs-string"><span class="hljs-string">" next node \(nextNode.payload)."</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> firstPart + <span class="hljs-string"><span class="hljs-string">" no next node."</span></span> } } }</code> </pre><br>  ... E a lista correspondente para exibir todos os n√≥s em ordem: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SinglyLinkedList</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CustomStringConvertible</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Int</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> description: <span class="hljs-type"><span class="hljs-type">String</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> description = <span class="hljs-string"><span class="hljs-string">""" List \(Unmanaged.passUnretained(self).toOpaque()) """</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> firstNode != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { description += <span class="hljs-string"><span class="hljs-string">" has nodes:\n"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> node = firstNode <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> node != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { description += (node!.description + <span class="hljs-string"><span class="hljs-string">"\n"</span></span>) node = node!.nextNode } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> description } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> description + <span class="hljs-string"><span class="hljs-string">" has no nodes."</span></span> } } }</code> </pre><br>  A representa√ß√£o de string de nossos tipos conter√° um endere√ßo na mem√≥ria e um identificador inteiro.  Utilizando-os, organizamos a impress√£o da lista gerada de dez n√≥s: <br><br><pre> <code class="swift hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-type"><span class="hljs-type">String</span></span>(describing: list)) <span class="hljs-comment"><span class="hljs-comment">/* List 0x00006000012e1a60 has nodes: Node 0x00006000012e2380 has id 0 and next node 1. Node 0x00006000012e8d40 has id 1 and next node 2. Node 0x00006000012e8d20 has id 2 and next node 3. Node 0x00006000012e8ce0 has id 3 and next node 4. Node 0x00006000012e8ae0 has id 4 and next node 5. Node 0x00006000012e89a0 has id 5 and next node 6. Node 0x00006000012e8900 has id 6 and next node 7. Node 0x00006000012e8a40 has id 7 and next node 8. Node 0x00006000012e8a60 has id 8 and next node 9. Node 0x00006000012e8820 has id 9 and no next node. */</span></span></code> </pre><br>  Expanda esta lista e imprima-a novamente: <br><br><pre> <code class="swift hljs">list.<span class="hljs-built_in"><span class="hljs-built_in">reverse</span></span>() <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-type"><span class="hljs-type">String</span></span>(describing: list)) <span class="hljs-comment"><span class="hljs-comment">/* List 0x00006000012e1a60 has nodes: Node 0x00006000012e8820 has id 9 and next node 8. Node 0x00006000012e8a60 has id 8 and next node 7. Node 0x00006000012e8a40 has id 7 and next node 6. Node 0x00006000012e8900 has id 6 and next node 5. Node 0x00006000012e89a0 has id 5 and next node 4. Node 0x00006000012e8ae0 has id 4 and next node 3. Node 0x00006000012e8ce0 has id 3 and next node 2. Node 0x00006000012e8d20 has id 2 and next node 1. Node 0x00006000012e8d40 has id 1 and next node 0. Node 0x00006000012e2380 has id 0 and no next node. */</span></span></code> </pre><br>  Voc√™ pode observar que os endere√ßos na mem√≥ria da lista e dos n√≥s n√£o foram alterados e os n√≥s da lista s√£o impressos na ordem inversa.  As refer√™ncias ao pr√≥ximo elemento do n√≥ agora apontam para o anterior (isto √©, por exemplo, o pr√≥ximo elemento do n√≥ ‚Äú5‚Äù agora n√£o √© ‚Äú6‚Äù, mas ‚Äú4‚Äù).  E isso significa que conseguimos! <br><br><h3>  O segundo caminho.  Recurs√£o </h3><br>  A segunda maneira conhecida de fazer a mesma invers√£o de marcha √© baseada na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recurs√£o</a> .  Para implement√°-lo, declararemos uma fun√ß√£o que pega o primeiro n√≥ da lista e retorna o primeiro n√≥ "novo" (que era o √∫ltimo antes). <br><br>  O par√¢metro e o valor de retorno s√£o opcionais, porque, dentro dessa fun√ß√£o, √© chamado repetidamente em cada n√≥ subsequente at√© ficar vazio (ou seja, at√© o final da lista).  Portanto, no corpo da fun√ß√£o, √© necess√°rio verificar se o n√≥ no qual a fun√ß√£o √© chamada est√° vazio e se esse n√≥ possui o seguinte.  Caso contr√°rio, a fun√ß√£o retornar√° o que foi passado para o argumento. <br><br>  Na verdade, tentei honestamente descrever o algoritmo completo em palavras, mas no final apaguei quase tudo, porque o resultado seria imposs√≠vel de entender.  Para desenhar fluxogramas e descrever formalmente as etapas do algoritmo - tamb√©m, neste caso, acho que n√£o faz sentido, porque ser√° mais conveniente para voc√™ e eu apenas lermos e tentarmos compreender o c√≥digo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Swift</a> : <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SinglyLinkedList</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reverseRecursively</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reverse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> node: Node&lt;T&gt;?)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Node</span></span>&lt;<span class="hljs-type"><span class="hljs-type">T</span></span>&gt;? { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> head = node <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> node } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> head.nextNode == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> head } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> reversedHead = <span class="hljs-built_in"><span class="hljs-built_in">reverse</span></span>(head.nextNode) head.nextNode?.nextNode = head head.nextNode = <span class="hljs-literal"><span class="hljs-literal">nil</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reversedHead } firstNode = <span class="hljs-built_in"><span class="hljs-built_in">reverse</span></span>(firstNode) } }</code> </pre><br>  O pr√≥prio algoritmo √© "encapsulado" por um m√©todo do pr√≥prio tipo de lista, para a conveni√™ncia de chamar. <br><br>  Parece mais curto, mas, na minha opini√£o, mais dif√≠cil de entender. <br><br>  Chamamos esse m√©todo no resultado do spread anterior e imprimimos um novo resultado: <br><br><pre> <code class="swift hljs">list.reverseRecursively() <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-type"><span class="hljs-type">String</span></span>(describing: list)) <span class="hljs-comment"><span class="hljs-comment">/* List 0x00006000012e1a60 has nodes: Node 0x00006000012e2380 has id 0 and next node 1. Node 0x00006000012e8d40 has id 1 and next node 2. Node 0x00006000012e8d20 has id 2 and next node 3. Node 0x00006000012e8ce0 has id 3 and next node 4. Node 0x00006000012e8ae0 has id 4 and next node 5. Node 0x00006000012e89a0 has id 5 and next node 6. Node 0x00006000012e8900 has id 6 and next node 7. Node 0x00006000012e8a40 has id 7 and next node 8. Node 0x00006000012e8a60 has id 8 and next node 9. Node 0x00006000012e8820 has id 9 and no next node. */</span></span></code> </pre><br>  Pode-se ver pela sa√≠da que todos os endere√ßos na mem√≥ria n√£o foram alterados novamente e os n√≥s agora seguem na ordem original (ou seja, eles s√£o "implantados" novamente).  E isso significa que acertamos novamente! <br><br><h3>  Conclus√µes </h3><br>  Se voc√™ observar cuidadosamente os m√©todos de revers√£o (ou realizar um experimento com contagem de chamadas), notar√° que o loop no primeiro caso e a chamada interna (recursiva) no segundo caso ocorrem uma vez menos que o n√∫mero de n√≥s na lista (no nosso caso, nove vezes).  Voc√™ tamb√©m pode prestar aten√ß√£o ao que acontece ao redor do loop no primeiro caso - a mesma sequ√™ncia de atribui√ß√µes - e √† primeira chamada de m√©todo n√£o recursiva no segundo caso.  Acontece que em ambos os casos o "c√≠rculo" √© repetido exatamente dez vezes para uma lista de dez n√≥s.  Assim, temos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">complexidade</a> linear para ambos os algoritmos - <i>O (n)</i> . <br><br>  De um modo geral, os dois algoritmos descritos s√£o considerados os mais eficazes para resolver esse problema.  Quanto √† complexidade computacional, n√£o √© poss√≠vel criar um algoritmo com um valor mais baixo: de uma forma ou de outra, √© necess√°rio "visitar" cada n√≥ para atribuir um novo valor ao que est√° armazenado no link. <br><br>  Outro recurso que vale a pena mencionar √© a "complexidade da mem√≥ria alocada".  Ambos os algoritmos propostos criam um n√∫mero fixo de novas vari√°veis ‚Äã‚Äã(tr√™s no primeiro caso e uma no segundo).  Isso significa que a quantidade de mem√≥ria alocada n√£o depende das caracter√≠sticas quantitativas dos dados de entrada e √© descrita por uma fun√ß√£o constante - O (1). <br><br>  Mas, de fato, no segundo caso, n√£o √© assim.  O perigo de recurs√£o √© que mem√≥ria extra √© alocada para cada chamada recursiva na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pilha</a> .  No nosso caso, a profundidade da recurs√£o corresponde √† quantidade de dados de entrada. <br><br>  E finalmente, decidi experimentar um pouco mais: de maneira simples e primitiva, medi o tempo de execu√ß√£o absoluto de dois m√©todos para uma quantidade diferente de dados de entrada.  Assim: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> startDate = <span class="hljs-type"><span class="hljs-type">Date</span></span>().timeIntervalSince1970 <span class="hljs-comment"><span class="hljs-comment">// list.reverse() / list.reverseRecursively() let finishDate = Date().timeIntervalSince1970 let runningTime = finishDate ‚Äì startDate // Seconds</span></span></code> </pre><br>  E √© isso que eu recebi (esses s√£o os dados brutos do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Playground</a> ): <br><br><img src="https://habrastorage.org/webt/kf/at/bf/kfatbfsxar9clyyokzu6beu3ios.png" alt="imagem"><br><br>  (Infelizmente, meu computador n√£o domina os valores maiores.) <br><br>  O que pode ser visto da mesa?  Nada de especial ainda.  Embora j√° seja percept√≠vel que o m√©todo recursivo se comporte um pouco pior com um n√∫mero relativamente pequeno de n√≥s, mas em algum lugar entre 100 e 1000, ele come√ßa a mostrar melhor. <br><br>  Eu tamb√©m tentei o mesmo teste simples em um projeto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Xcode"</a> completo.  Os resultados s√£o os seguintes: <br><br><img src="https://habrastorage.org/webt/sr/vj/0d/srvj0dqmtgtse2wfuqq6llutte4.png" alt="imagem"><br><br>  Em primeiro lugar, vale ressaltar que os resultados foram obtidos ap√≥s a ativa√ß√£o do modo de otimiza√ß√£o ‚Äúagressivo‚Äù visando a velocidade de execu√ß√£o ( <code>-Ofast</code> ), raz√£o pela qual em parte os n√∫meros s√£o t√£o pequenos.  Tamb√©m √© interessante que, neste caso, o m√©todo recursivo tenha se mostrado um pouco melhor, pelo contr√°rio, apenas em tamanhos muito pequenos de dados de entrada, e j√° em uma lista de 100 n√≥s, o m√©todo perde.  Dos 100.000, ele fez o programa terminar de forma anormal. <br><br><h2>  Conclus√£o </h2><br>  Tentei abordar um t√≥pico bastante cl√°ssico do ponto de vista da minha linguagem de programa√ß√£o favorita no momento, e espero que voc√™ tenha curiosidade em acompanhar o progresso, assim como eu.  Tamb√©m fico muito feliz se voc√™ conseguiu aprender algo novo - ent√£o definitivamente perdi meu tempo neste artigo (em vez de sentar e assistir a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">programas de TV</a> ). <br><br>  <i>Se algu√©m deseja acompanhar minha atividade social, aqui est√° um link para o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">meu ‚ÄúTwitter‚Äù</a> , onde, antes de tudo, h√° links para minhas novas postagens e um pouco mais.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt455842/">https://habr.com/ru/post/pt455842/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt455828/index.html">Cientistas descobriram novas formas ex√≥ticas de sincroniza√ß√£o</a></li>
<li><a href="../pt455830/index.html">Uma olhada em V√° pelos olhos de um desenvolvedor .NET. Semana # 1</a></li>
<li><a href="../pt455832/index.html">Hist√≥rico de uma √∫nica investiga√ß√£o SQL</a></li>
<li><a href="../pt455834/index.html">Benchmarks para servidores Linux: 5 ferramentas abertas</a></li>
<li><a href="../pt455840/index.html">Como trabalhar com v√°rias consultas. Composi√ß√£o, Redutor, FP</a></li>
<li><a href="../pt455844/index.html">Criando um analisador Roslyn usando o teste de encapsulamento como exemplo</a></li>
<li><a href="../pt455846/index.html">Computa√ß√£o Distribu√≠da em Julia</a></li>
<li><a href="../pt455848/index.html">T√©cnica para evitar comportamento indefinido ao acessar um singleton</a></li>
<li><a href="../pt455850/index.html">Caixa de ferramentas para pesquisadores - terceira edi√ß√£o: localizando e trabalhando com fontes</a></li>
<li><a href="../pt455852/index.html">Eleva√ß√£o sinusal e implanta√ß√£o simult√¢nea</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>