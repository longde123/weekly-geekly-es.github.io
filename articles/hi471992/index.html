<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЮЧ ЁЯЪ╡ЁЯП╗ ЁЯФб рдЦреВрдВрдЯреА рдХреА рд╢реЗрд╖ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ ЁЯТв ЁЯзЭ ЁЯСйЁЯП╝тАНЁЯН│</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд┐рдЫрд▓реЗ рдкреЛрд╕реНрдЯ рдореЗрдВ рдкреАрдИрдЬреА-рдкрд╛рд░реНрд╕рд░ рдЬрдирд░реЗрдЯрд░ рдХреЗ рд╕рднреА рд╣рд┐рд╕реНрд╕реЛрдВ рдХреЛ рдПрдХ рд╕рд╛рде рд░рдЦрдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ рдпрд╣ рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реВрдВ рдХрд┐ рдХреБрдЫ рджрд┐рд▓рдЪрд╕реНрдк рдЪреАрдЬреЛрдВ рдХреЛ рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдПред 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЦреВрдВрдЯреА рдХреА рд╢реЗрд╖ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471992/"><p>  рдкрд┐рдЫрд▓реЗ рдкреЛрд╕реНрдЯ рдореЗрдВ рдкреАрдИрдЬреА-рдкрд╛рд░реНрд╕рд░ рдЬрдирд░реЗрдЯрд░ рдХреЗ рд╕рднреА рд╣рд┐рд╕реНрд╕реЛрдВ рдХреЛ рдПрдХ рд╕рд╛рде рд░рдЦрдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ рдпрд╣ рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реВрдВ рдХрд┐ рдХреБрдЫ рджрд┐рд▓рдЪрд╕реНрдк рдЪреАрдЬреЛрдВ рдХреЛ рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдПред </p><br><div class="spoiler">  <b class="spoiler_title">рдкрд╛рдпрдерди рдЦреВрдВрдЯреА рдкрд╛рд░реНрд╕рд░ рд╢реНрд░реГрдВрдЦрд▓рд╛ рд╕рд╛рдордЧреНрд░реА</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦреВрдВрдЯреА рдкрд░рд╕реЗрдВрдЯрд░реНрд╕</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦреВрдВрдЯреА рдкрд╛рд░реНрд╕рд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦреВрдВрдЯреА parser рдкреАрдврд╝реА</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦреВрдВрдЯреА рдкрд╛рд░реНрд╕рд░ рджреГрд╢реНрдп</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд╛рдо рдкреБрдирд░рд╛рд╡рд░реНрддреА рдЦреВрдВрдЯреА рд╡реНрдпрд╛рдХрд░рдг</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦреВрдВрдЯреА рд╡реНрдпрд╛рдХрд░рдг рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдПрдБ рдЬреЛрдбрд╝рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦреВрдВрдЯреА рдкрд╛рд░реНрд╕рд░ рдХреЗ рд▓рд┐рдП рдореЗрдЯрд╛ рд╡реНрдпрд╛рдХрд░рдг</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦреВрдВрдЯреА рдХреА рд╢реЗрд╖ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЛрд░ рдбреЗрд╡рд▓рдкрд░ рд╕реНрдкреНрд░рд┐рдВрдЯ рдкрд░ рдЦреВрдВрдЯреА</a> </li></ul></div></div><br><p>  рд╣рдо рдЦреВрдВрдЯреА рдХреА рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ: </p><a name="habracut"></a><br><ul><li> рдирд╛рдорд┐рдд рдЖрдЗрдЯрдо: <code>NAME=item</code> (рдирд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ) </li><li>  рд▓реБрдХрд╣реЗрдбреНрд╕: <code>&amp;item</code> (рд╕рдХрд╛рд░рд╛рддреНрдордХ) рдФрд░ ( <code>!item</code> ) (рдирдХрд╛рд░рд╛рддреНрдордХ) </li><li>  рдХреЛрд╖реНрдардХ рдореЗрдВ рдЖрдЗрдЯрдо рд╕рдореВрд╣реАрдХрд░рдг: ( <code>item item ...</code> ) </li><li>  рд╡реИрдХрд▓реНрдкрд┐рдХ рдЖрдЗрдЯрдо: <code>[item item ...]</code> рдФрд░ <code>item?</code> </li><li>  рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рдЖрдЗрдЯрдо: <code>item*</code> (рд╢реВрдиреНрдп рдпрд╛ рдЕрдзрд┐рдХ) рдФрд░ <code>item+</code> (рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ) </li></ul><br><h2 id="imenovannye-argumenty">  рдирд╛рдорд┐рдд рддрд░реНрдХ </h2><br><p>  рдирд╛рдо рддрддреНрд╡реЛрдВ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ рдЬрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рд╣реА рдирд┐рдпрдо рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рдХрд▓реНрдк рдореЗрдВ рдЙрдирдореЗрдВ рд╕реЗ рдХрдИ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: </p><br><pre> <code class="plaintext hljs">expr: term '+' term</code> </pre> <br><p>  рд╣рдо рдЪрд░ рдирд╛рдо рдореЗрдВ рдирдВрдмрд░ <code>1</code> рдЬреЛрдбрд╝рдХрд░ рджреВрд╕рд░реЗ <code>term</code> рдЙрд▓реНрд▓реЗрдЦ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рддрд╛рдХрд┐ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдореЗрдВ рдпрд╣ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдирд┐рдХрд▓реЗ: </p><br><pre> <code class="plaintext hljs">expr: term '+' term { term + term1 }</code> </pre> <br><p>  рд▓реЗрдХрд┐рди рд╣рд░ рдХреЛрдИ рдЗрд╕реЗ рдкрд╕рдВрдж рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ, рдореИрдВ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХреБрдЫ рд▓рд┐рдЦреВрдВрдЧрд╛: </p><br><pre> <code class="plaintext hljs">expr: left=term '+' right=term { left + right }</code> </pre> <br><p>  рдпрд╣ рдЖрд╕рд╛рдиреА рд╕реЗ рдореЗрдЯрд╛-рд╡реНрдпрд╛рдХрд░рдг рдореЗрдВ <code>item</code> рд▓рд┐рдП рдирд┐рдпрдо рдмрджрд▓рдХрд░ рд╕рдорд░реНрдерд┐рдд рд╣реИ: </p><br><pre> <code class="plaintext hljs">item: | NAME = atom { NamedItem(name.string, atom) } | atom { atom } atom: | NAME { name.string } | STRING { string.string }</code> </pre> <br><p>  (рдЬрд╣рд╛рдВ <code>atom</code> рд╕рд┐рд░реНрдл рдПрдХ рдкреБрд░рд╛рдиреА <code>item</code> ) </p><br><p>  рдЗрд╕рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ <code>NamedItem</code> рд╡рд░реНрдЧ рдХреА рдкрд░рд┐рднрд╛рд╖рд╛ рдХреЛ <code>grammar.py</code> рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣ рдЙрди рдбреЗрдЯрд╛ рд╡рд░реНрдЧреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдерд╛ - рдЗрд╕рдореЗрдВ <code>name</code> рдФрд░ <code>item</code> рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рднреА рд╣реИрдВред </p><br><p>  рд╣рдореЗрдВ рдХреЛрдб рдЬрдирд░реЗрдЯрд░ рдореЗрдВ рдЫреЛрдЯреЗ рдмрджрд▓рд╛рд╡ рдХрд░рдиреЗ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдореИрдВ рдкрд╛рдардХ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрднреНрдпрд╛рд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдЫреЛрдбрд╝ рджреВрдВрдЧрд╛ (рдпрд╛ рдЖрдк рдореЗрд░реЗ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА :-) рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрддреНрдкрдиреНрди рдХреЛрдб рдЕрдм рдкреНрд░рддреНрдпреЗрдХ рддрддреНрд╡ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╛рдо рдХреЗ рд╕рд╛рде рдПрдХ рдЪрд░ рд╕реЗ рдореЗрд▓ рдЦрд╛рдиреЗ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рджреЗрдЧрд╛, рди рдХрд┐ рддрддреНрд╡ рдирд┐рдпрдо рдирд╛рдо рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдирд╛рдо рдХреЗ рд╕рд╛рдеред  рдпрд╣ рдЙрди рддрддреНрд╡реЛрдВ рдХреЗ рд▓рд┐рдП рднреА рдХрд╛рдо рдХрд░реЗрдЧрд╛ рдЬреЛ рдЯреЛрдХрди рд╣реИрдВ (рдпрд╛ рддреЛ рдлреЙрд░реНрдо <code>NAME</code> рдпрд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╢рд╛рдмреНрджрд┐рдХ рдЬреИрд╕реЗ <code>':='</code> )ред </p><br><h2 id="lookahead">  рдЕрдЧреНрд░рд╛рд╡рд▓реЛрдХрди </h2><br><p>  Lookahead рджреНрд╡рд╛рд░рд╛ рдкреАрдЫрд╛ рдХрд┐рдпрд╛ред  рдЖрдк рд╢рд╛рдпрдж рдЗрд╕ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЛ рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рд╡реНрдпрдХреНрдд рдХрд░рддреЗ рд╣реИрдВред  рдлреЙрд░рд╡рд░реНрдб рд▓реБрдХрд╣реЗрдб рдХреЗ рджреМрд░рд╛рди, рдЯреЛрдХрдирд░ рдкреЙрдЗрдВрдЯрд░ рдХреЛ рд╢рд┐рдлреНрдЯ рдХрд┐рдП рдмрд┐рдирд╛, рдкрд╛рд░реНрд╕ рдХрд┐рдП рдЧрдП рд╡рд┐рдХрд▓реНрдк рдХреЛ рддреБрд░рдВрдд рдЕрд╕реНрд╡реАрдХрд╛рд░ рдпрд╛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд▓реЗрдЬрд╝рд╣реЗрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдкрд╛рд░реНрд╕рд░ рдЕрдкрд╡рд╛рджреЛрдВ рдХреЗ рд╕рд╛рде рднреНрд░рдо рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрдзрд┐рдХ рд╕реБрд░реБрдЪрд┐рдкреВрд░реНрдг рддрд░реАрдХреЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдореИрдВрдиреЗ рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ рд▓рд┐рдЦрд╛ рдерд╛ред  рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдП рдЧрдП рд╡рд┐рдХрд▓реНрдк рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдХреЗ рдмрдЬрд╛рдп рдХреЛрдИ рднреА рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛, рд╣рдо <code>OP</code> рдХреЛ <code>"}"</code> рдмрд╛рд╣рд░ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдПрдХ рдирд┐рд░реНрджреЗрд╢ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдкреБрд░рд╛рдирд╛ рдирд┐рдпрдо рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рдерд╛: </p><br><pre> <code class="plaintext hljs"> | OP { None if op.string in ("{", "}") else op.string }</code> </pre> <br><p>  рдирдпрд╛ рд╕рдВрд╕реНрдХрд░рдг рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs"> | !"}" OP { op.string }</code> </pre> <br><p>  рдпрд╣ рдШреБрдВрдШрд░рд╛рд▓реЗ рдмреНрд░реИрдХреЗрдЯ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рдХрд╛рд░реНрд░рд╡рд╛рдИ рд╕реЗ рд╡реНрдпрд╛рдХрд░рдг рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рдпрд╣ рд╣реЛрддрд╛ рд╣реИред  рд╣рдореЗрдВ <code>"{"</code> рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкрд╣рд▓реЗ рдХреЗ рд╡рд┐рдХрд▓реНрдк рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИ (рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╣ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рднреА рд╕рд╣реА рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреВрд▓ рдЧрдпрд╛ рдерд╛ :-)ред </p><br><p>  рд╣рдо рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ <code>item</code> рд▓рд┐рдП рдирд┐рдпрдо рдореЗрдВ рд╡реНрдпрд╛рд╣ рдХреЗ рд▓рд┐рдП рд╡реНрдпрд╛рдХрд░рдг рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">item: | NAME = atom { NamedItem(name.string, atom) } | atom { atom } | "&amp;" atom { Lookahead(atom, True) } | "!" atom { Lookahead(atom, False) }</code> </pre> <br><p>  рдПрдХ рдмрд╛рд░ рдлрд┐рд░, рд╣рдореЗрдВ рд▓реБрдХрд╣реЗрдб <code>Lookahead</code> рдХреЛ <code>grammar.py</code> рдЬреЛрдбрд╝рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ (рдФрд░ рдЗрд╕реЗ <code>@subheader</code> рдореЗрдВ рдЖрдпрд╛рдд рдХрд░реЗрдВ!) рдФрд░ рдЬреЗрдирд░реЗрдЯрд░ рдХреЛ рдирд┐рдореНрди рд╕рд╣рд╛рдпрдХ рд╡рд┐рдзрд┐ рдХреЛ рдЬреЛрдбрд╝рдХрд░ рдереЛрдбрд╝рд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░реЗрдВ: </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lookahead</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, positive, func, *args)</span></span></span><span class="hljs-function">:</span></span> mark = self.mark() ok = func(*args) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> self.reset(mark) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ok == positive</code> </pre> <br><p>  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХреЗ рд▓рд┐рдП рдЙрддреНрдкрдиреНрди рдХреЛрдб рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> self.lookahead(<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, self.expect, <span class="hljs-string"><span class="hljs-string">"}"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (op := self.expect(OP)) ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> op . string</code> </pre> <br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЙрдкрд░реЛрдХреНрдд рд╡реНрдпрд╛рдХрд░рдг рдХреЗ рдЯреБрдХрдбрд╝реЗ рд╕реЗ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реБрдХрд╣реЗрдб рдХреЛ рдЙрдЪрд┐рдд рдирд╛рдо рдирд╣реАрдВ рдорд┐рд▓ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рддрдп рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реИ, рд▓реЗрдХрд┐рди рдореБрдЭреЗ рдЕрднреА рддрдХ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдпрд╣ рдХрд┐рддрдирд╛ рдЙрдкрдпреЛрдЧреА рд╣реЛрдЧрд╛ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдирдХрд╛рд░рд╛рддреНрдордХ рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рдиреЛрдВ рдХреЗ рд▓рд┐рдП, рдореВрд▓реНрдп рд╣рдореЗрд╢рд╛ <code>None</code> ред </p><br><h2 id="gruppirovka-v-skobkah">  рдХреЛрд╖реНрдардХ рдореЗрдВ рд╕рдореВрд╣рди </h2><br><p>  рдЕрдм рдХреЛрд╖реНрдардХ рдХреЗ рд╕рд╛рде рд╕рдореВрд╣реЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВред  рдЙрдиреНрд╣реЗрдВ рдЖрд░реЗрдЦ рдореЗрдВ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЕрдЪреНрдЫреА рдЬрдЧрд╣ <code>atom</code> рд▓рд┐рдП рдирд┐рдпрдо <code>atom</code> : </p><br><pre> <code class="plaintext hljs">atom: | NAME { name.string } | STRING { string.string } | "(" alts ")" { self.synthetic_rule(alts) }</code> </pre> <br><p>  рдкрд╣рд▓реЗ рджреЛ рд╡рд┐рдХрд▓реНрдк рдирд╣реАрдВ рдмрджрд▓реЗ рд╣реИрдВред  рдирдП рд╡рд┐рдХрд▓реНрдк рдХреЗ рд▓рд┐рдП рдХреНрд░рд┐рдпрд╛ рдПрдХ рд╣реИрдХ (рдЬрд┐рд╕рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЕрд╕реНрдкрд╖реНрдЯреАрдХреГрдд рд░рд╣рддрд╛ рд╣реИ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдореЗрдЯрд╛-рдкрд╛рд░реНрд╕рд░ рдХреЛ рдордХреНрдЦреА рдкрд░ рд╡реНрдпрд╛рдХрд░рдг рдореЗрдВ рдирдП рдирд┐рдпрдореЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрд╣ рд╕рд╣рд╛рдпрдХ рдлрд╝рдВрдХреНрд╢рди (рдореЗрдЯрд╛-рдкрд╛рд░реНрд╕рд░ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд) рдирдП рдирд┐рдпрдо рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдирд╛рдо рджреЗрддрд╛ рд╣реИред  рдЗрд╕рдореЗрдВ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдмрд╛рдж рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЙрдкрд╕рд░реНрдЧ рд╢рд╛рдорд┐рд▓ рд╣реЛрдЧрд╛, рдЬреЛ рдЗрд╕реЗ рдЕрджреНрд╡рд┐рддреАрдп рдмрдирд╛рддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>_synthetic_rule_1</code> ред </p><br><p>  рдЖрдк рдкреВрдЫ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрджрд┐ рд╕рд┐рдВрдереЗрдЯрд┐рдХ рдирд┐рдпрдо рдЕрдВрддрддрдГ рдЧрд┐рд░рд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рддреЛ рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИред  рдореИрдВ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдХрд┐ рдЗрд╕рд╕реЗ рдХреИрд╕реЗ рдмрдЪрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП - рд╕рдмрд╕реЗ рдЦрд░рд╛рдм рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╡реНрдпрд╛рдХрд░рдг рдореЗрдВ рдПрдХ рдЕрдкреНрд░рдпреБрдХреНрдд рдирд┐рдпрдо рд╣реЛрдЧрд╛ред  рдФрд░ рд╕рдВрд╕реНрдорд░рдг рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдПрдХ рд╣реА рдЗрдирдкреБрдЯ рд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП рдПрдХ рд╣реА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЛ рджреЛ рдмрд╛рд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдпрд╛ рддреЛ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИ (рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рдЕрдЧрд░ рдРрд╕рд╛ рдерд╛, рддреЛ рд╕рдмрд╕реЗ рдЦрд░рд╛рдм рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдореГрдд рдирд┐рдпрдо рд╣реЛрдЧрд╛)ред </p><br><p>  рдХреЛрд╖реНрдардХ рдХреЗ рдЕрдВрджрд░ <code>alts</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╣рдо рдПрдХ рдКрд░реНрдзреНрд╡рд╛рдзрд░ рдкрдЯреНрдЯреА рдХреЛ рдПрдХ рд╕рдореВрд╣ рдХреЗ рднреАрддрд░ рд╕реАрдорд╛рдВрдХрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрд┐ рд╣рдорд╛рд░рд╛ рдирдпрд╛ рдПрдХреНрд╢рди рд╕реЙрд▓реНрдпреВрд╢рди рдЧрд▓рддреА рд╕реЗ <code>{</code> рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛ рд░рд╣рд╛ рд╣реИ, рд╣рдо рдЗрд╕реЗ рдирдХрд╛рд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs"> | !("{" | "}") OP { op.string }</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рдореВрд╣ рднреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ!  рдпрд╣ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рд▓реЗрдХрд┐рди рдЕрдиреНрдп рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдпрд╣ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рдЬрдм рд╕реЗ рд╣рдо рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ рдПрдХ рд╕рд┐рдВрдереЗрдЯрд┐рдХ рдирд┐рдпрдо рдЙрддреНрдкрдиреНрди рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рд╕реА рднреА рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рд░реНрдп рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ (рд╕рд┐рд╡рд╛рдп <code>synthetic_rule</code> :-) рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗред </p><br><h2 id="opcionalnye-elementy">  рд╡реИрдХрд▓реНрдкрд┐рдХ рдЖрдЗрдЯрдо </h2><br><p>  рдкреБрд░рд╛рдиреЗ рдкреИрдЧреЗрди рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВ рд╡реИрдХрд▓реНрдкрд┐рдХ рдЯреЛрдХрдиреЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪреМрдХреЛрд░ рдХреЛрд╖реНрдардХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВред  рдпрд╣ рд╡рд╣ рдЬрдЧрд╣ рд╣реИ рдЬрд╣рд╛рдБ рдпрд╣ рдЙрдкрдпреЛрдЧреА рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рд╡реНрдпрд╛рдХрд░рдг рдирд┐рдпрдо рдЬреЛ рд▓реВрдк рдХреЗ <code>for</code> рдПрдХ рдкрд╛рдпрдерди рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдпрд╣ рдЗрдВрдЧрд┐рдд рдХрд░рдиреЗ рдХреЗ <code>for</code> рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдХреЛрдИ <code>else</code> рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдореМрдЬреВрдж <code>else</code> рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рдлрд┐рд░ рд╣рдо <code>atom</code> рд▓рд┐рдП рд╡реНрдпрд╛рдХрд░рдг рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">atom: | NAME { name.string } | STRING { string.string } | "(" alts ")" { self.synthetic_rule(alts) } | "[" alts "]" { Maybe(self.synthetic_rule(alts)) }</code> </pre> <br><p>  <code>Maybe</code> рд╣реИ <code>Maybe</code> рдПрдХ <code>item</code> рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдФрд░ рдбреЗрдЯрд╛ рдХреНрд▓рд╛рд╕ рд╣реЛред  рд╣рдо рдХреЛрдб рдЬрдирд░реЗрдЯрд░ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╕рд┐рдВрдереЗрдЯрд┐рдХ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╡рд┐рдлрд▓ рди рд╣реЛ рдЕрдЧрд░ рдпрд╣ рдореВрд▓реНрдп <code>None</code> ред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ <code>or True</code> рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <code>[term]</code> : </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ((term := self.term()) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> term</code> </pre> <br><h2 id="povtoryayuschiesya-elementy">  рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рдЖрдЗрдЯрдо </h2><br><p>  рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛ рдПрдХ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧреА рдкреАрдИрдЬреА рдлрд╝рдВрдХреНрд╢рди рд╣реИ (рдЕрдВрдХрди рдирд┐рдпрдорд┐рдд рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рд╕реЗ рдЙрдзрд╛рд░ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдкреИрдЬрди рдореЗрдВ рднреА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ)ред  рджреЛ рд░реВрдк рд╣реИрдВ: рдПрдХ рдкрд░рдорд╛рдгреБ рдореЗрдВ <code>*</code> рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХрд╛ рдЕрд░реНрде рд╣реИ "рд╢реВрдиреНрдп рдпрд╛ рдЕрдзрд┐рдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐", рдЬрдмрдХрд┐ <code>+</code> рдЕрд░реНрде рд╣реИ "рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рджреЛрд╣рд░рд╛рд╡"ред  рдЕрдиреНрдп рдХрд╛рд░рдгреЛрдВ рд╕реЗ, рдореБрдЭреЗ <code>item</code> рдФрд░ <code>atom</code> рд▓рд┐рдП рд╡реНрдпрд╛рдХрд░рдг рдХреЗ рдирд┐рдпрдореЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдирд╛ рдкрдбрд╝рд╛, рдПрдХ рдордзреНрдпрд╡рд░реНрддреА рдирд┐рдпрдо рдЬреЛрдбрд╝рдирд╛, рдЬрд┐рд╕реЗ рдореИрдВрдиреЗ <code>molecule</code> рдХрд╣рд╛: </p><br><pre> <code class="plaintext hljs">item: | NAME '=' molecule { NamedItem(name.string, molecule) } | "&amp;" atom { Lookahead(atom) } | "!" atom { Lookahead(atom, False) } | molecule { molecule } molecule: | atom "?" { Maybe(atom) } | atom "*" { Loop(atom, False) } | atom "+" { Loop(atom, True) } | atom { atom } | "[" alts "]" { Maybe(self.synthetic_rule(alts)) } atom: | NAME { name.string } | STRING {string.string } | "(" alts ")" { self.synthetic_rule(alts) }</code> </pre> <br><p>  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрд╣ рд╡реИрдХрд▓реНрдкрд┐рдХ рддрддреНрд╡реЛрдВ ( <code>atom?</code> ) рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╡рд╛рдХреНрдпрд╡рд┐рдиреНрдпрд╛рд╕ рдХрд╛ рдкрд░рд┐рдЪрдп рджреЗрддрд╛ рд╣реИред  рдЗрд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ <code>Maybe</code> рдПрдХ рдиреЛрдб рдмрдирд╛рдиреЗ рдХрд╛ рдПрдХ рдФрд░ рддрд░реАрдХрд╛ рд╣реИред </p><br><p>  рдЗрди рдирд┐рдпрдореЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рдерд╛ рдХреНрдпреЛрдВрдХрд┐ рдореИрдВ рдХреБрдЫ рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЛ рд╡реИрдз рдирд╣реАрдВ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддрд╛: </p><br><ul><li>  рд╡реИрдХрд▓реНрдкрд┐рдХ рджреЛрд╣рд░рд╛рд╡ (рдЪреВрдВрдХрд┐ рдпрд╣ рд╢реВрдиреНрдп рдпрд╛ рдЕрдзрд┐рдХ рдХрд╛ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рд╣реИ); </li><li>  рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ (рдЖрдВрддрд░рд┐рдХ рд╕рднреА рдореИрдЪреЛрдВ рдХреЛ рдХреИрдкреНрдЪрд░ рдХрд░реЗрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдЦреВрдВрдЯреА рд╣рдореЗрд╢рд╛ рдПрдХ рд▓рд╛рд▓рдЪреА рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ) </li><li>  рдмрд╛рд░-рдмрд╛рд░ рд╡реИрдХрд▓реНрдкрд┐рдХ рдорд╛рди (рдЬреЛ рд╡реИрдХрд▓реНрдкрд┐рдХ рддрддреНрд╡ рдХреЗ рдореЗрд▓ рди рдЦрд╛рдиреЗ рдкрд░ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЛ рдмрд╛рдзрд┐рдд рдХрд░реЗрдЧрд╛)ред </li></ul><br><p>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдпрд╣ рдЕрднреА рднреА рдПрдХ рдЖрджрд░реНрд╢ рд╕рдорд╛рдзрд╛рди рдирд╣реАрдВ рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдХреБрдЫ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ <code>(foo?)*</code> ред  рдкрд╛рд░реНрд╕рд░ рдЬрдирд░реЗрдЯрд░ рдореЗрдВ рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП рдПрдХ рдЪреЗрдХ рдЬреЛрдбрд╝рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдЧрд╛, рд▓реЗрдХрд┐рди рдореИрдВ рдЗрд╕реЗ рд▓реЗрдЦ рдХреЗ рдмрд╛рд╣рд░ рдХрд░реВрдВрдЧрд╛ред </p><br><p>  <code>Loop</code> рдбреЗрдЯрд╛ рдХреНрд▓рд╛рд╕ рдореЗрдВ рджреЛ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ: <code>item</code> рдФрд░ <code>nonempty</code> ред  рдЙрддреНрдкрдиреНрди рдХреЛрдб рд╣реЗрд▓реНрдкрд░ рдкрд╛рд░реНрд╕рд░ <code>loop()</code> рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред  рдпрд╣ рдкрд╣рд▓реЗ рджрд┐рдЦрд╛рдИ рдЧрдИ <code>lookahead()</code> рд╡рд┐рдзрд┐ рдХреЗ рд╕рдорд╛рди рд╣реИ: </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, nonempty, func, *args)</span></span></span><span class="hljs-function">:</span></span> mark = self.mark() nodes = [] <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> node := func(*args) <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: nodes.append(node) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(nodes) &gt;= nonempty: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nodes self.reset(mark) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span></code> </pre> <br><p>  рдпрджрд┐ <code>nonempty</code> <code>False</code> (рдЗрд╕ рдЕрд░реНрде рдореЗрдВ рд╡реНрдпрд╛рдХрд░рдг <code>*</code> рдерд╛), рддреЛ рдЗрд╕рд╕реЗ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рд╣реЛрдЧреАред  рдХреЛрдИ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдирд╣реАрдВ рдорд┐рд▓реЗрдЧреА, рдФрд░ рдПрдХ рдЦрд╛рд▓реА рд╕реВрдЪреА рд╡рд╛рдкрд╕ рдХрд░ рджреА рдЬрд╛рдПрдЧреАред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдкрд╛рд░реНрд╕рд░ рдЬрдирд░реЗрдЯрд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ <code>is not None</code> рдЬреЛрдбрд╝рд╛ <code>is not None</code> рдЬрд╛рдПред  рдкрд┐рдЫрд▓реА рдкреЛрд╕реНрдЯ рд╕реЗ рдПрдХ рдирд░рдо рдЪреЗрдХ рдПрдХ рдЦрд╛рд▓реА рд╕реВрдЪреА рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ <code>False</code> рд▓реМрдЯрд╛рдПрдЧрд╛ред </p><br><p>  рдЖрдЬ рдХреЗ рд▓рд┐рдП рдмрд╕ рдЗрддрдирд╛ рд╣реА!  рдореИрдВ TatSu рдореЗрдВ рдореМрдЬреВрдж "рдХрдЯ" ( <code>~</code> ) рдСрдкрд░реЗрдЯрд░ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░рдиреЗ рдЬрд╛ рд░рд╣рд╛ рдерд╛, рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рдореБрдЭреЗ рдЗрд╕рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рдХрд╛ рдореМрдХрд╛ рдирд╣реАрдВ рдорд┐рд▓рд╛ рд╣реИред  рдореИрдВ рдЕрднреА рддрдХ рдЗрд╕ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдирд╣реАрдВ рд╣реВрдВ - рдЯрд╛рдЯрд╕реВ рдкреНрд░рд▓реЗрдЦрди рдХреЗрд╡рд▓ рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рджреЗрддрд╛ рд╣реИ рдЬреЛ рдореБрдЭреЗ рдереЛрдбрд╝рд╛ рд░реВрдЪрд┐ рджреЗрддрд╛ рд╣реИред  рдореБрдЭреЗ рдпрд╣ рдкреАрдИрдЬреА-рдкрд╛рд░реНрд╕рд░реНрд╕ рдХреЗ рдЕрдиреНрдп рдЬрдирд░реЗрдЯрд░ рдореЗрдВ рдирд╣реАрдВ рдорд┐рд▓рд╛, рдЗрд╕рд▓рд┐рдП, рд╢рд╛рдпрдж, рдпрд╣ рд╕реБрд╡рд┐рдзрд╛ рдХреЗрд╡рд▓ рдЯрд╛рдЯреВ рд╣реИред  рд╢рд╛рдпрдж рдХрд┐рд╕реА рджрд┐рди рдореИрдВ рдЙрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдКрдВрдЧрд╛ред  (рдЗрд╕ рдмреАрдЪ, рдореИрдВрдиреЗ рдЗрд╕реЗ рд╕рд┐рд░реНрдл рдорд╛рдорд▓реЗ рдореЗрдВ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛, рдЖрдк рдХрднреА рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВред :-) </p><br><p>  рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЕрдЧрд▓рд╛ рд▓реЗрдЦ рдПрдХ рдкреАрдИрдЬреА рд╡реНрдпрд╛рдХрд░рдг рд▓рд┐рдЦрдиреЗ рдХреЗ рдореЗрд░реЗ рдЕрдиреБрднрд╡ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реЛрдЧрд╛ рдЬреЛ рдкрд╛рдпрдерди рд╡реНрдпрд╛рдХрд░рдг рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдореИрдВ рдЖрдкрдХреЛ рдмрддрд╛рддрд╛ рд╣реВрдВ рдХрд┐ рдкрд╛рдпрдерди рдХрд░реНрдиреЗрд▓ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХрд╛ рд╕реНрдкреНрд░рд┐рдВрдЯ рдХреИрд╕реЗ рд╣реБрдЖ, рдЬреЛ рдЗрд╕ рд╣рдлреНрддреЗ рд▓рдВрджрди рдореЗрдВ рдмреНрд▓реВрдордмрд░реНрдЧ рдХреЗ рд▓реЙрдЬрд┐рд╕реНрдЯрд┐рдХ рд╕рдкреЛрд░реНрдЯ рдФрд░ рдкреАрдПрд╕рдПрдл рдФрд░ рдХреБрдЫ рдЕрдиреНрдп рдХрдВрдкрдирд┐рдпреЛрдВ рд╕реЗ рд╡рд┐рддреНрддреАрдп рд╕рд╣рд╛рдпрддрд╛ рдХреЗ рд╕рд╛рде рдерд╛ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдбреНрд░реЙрдкрдмреЙрдХреНрд╕ рдиреЗ рдореБрдЭреЗ рд╣реЛрдЯрд▓ рдФрд░ рдлреНрд▓рд╛рдЗрдЯ рдХрд╛ рднреБрдЧрддрд╛рди рдХрд┐рдпрд╛)ред  рдПрдорд┐рд▓реА рдореЛрд░рд╣рд╛рдЙрд╕ рдФрд░ рдкрд╛рдмреНрд▓реЛ рдЧреИрд▓рд┐рдВрдбреЛ рд╕рд╛рд▓рдЧрд╛рдбреЛ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рдзрдиреНрдпрд╡рд╛рдж, рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рдЙрдкрдХрд░рдг рдФрд░ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдореЗрдВ рдмрд╣реБрдд рдорджрдж рдХреАред  рдЕрдЧрд▓рд╛, рд╣рдо рдкреНрд░рджрд░реНрд╢рди рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦреЗрдВрдЧреЗ, рдФрд░ рдлрд┐рд░ рд╣рдо рдЗрд╕ рд╡реНрдпрд╛рдХрд░рдг рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ рддрд╛рдХрд┐ рдпрд╣ рдПрдПрд╕рдЯреА рдкреЗрдбрд╝ рдмрдирд╛ рд╕рдХреЗ рдЬреЛ рдХрд┐ рд╕реАрдкреАрдереЙрди рдмрд╛рдЗрдЯ рдХреЛрдб рд╕рдВрдХрд▓рдХ рджреНрд╡рд╛рд░рд╛ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЖрдЧреЗ рдФрд░ рднреА рдмрд╣реБрдд рд╕рд╛рд░реА рд░реЛрдЪрдХ рдмрд╛рддреЗрдВ рд╣реИ! </p><br><p>  рдЗрд╕ рд▓реЗрдЦ рдХреЗ рд▓рд┐рдП рд▓рд╛рдЗрд╕реЗрдВрд╕ рдФрд░ рдХреЛрдб рдХрд╛ рд╣рд╡рд╛рд▓рд╛ рджрд┐рдпрд╛: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">CC BY-NC-SA 4.0</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi471992/">https://habr.com/ru/post/hi471992/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi471980/index.html">рдлреЛрди рд╕реНрдХреИрдорд░реНрд╕ред рдЕрдзрд┐рдирд┐рдпрдо рдЪрд╛рд░, рдЕрдВрддрд┐рдо ...</a></li>
<li><a href="../hi471982/index.html">PHP рдХреЗ рднрд╡рд┐рд╖реНрдп рдкрд░ рдЪрд░реНрдЪрд╛</a></li>
<li><a href="../hi471986/index.html">рд╡рд╛рдо рдкреБрдирд░рд╛рд╡рд░реНрддреА рдЦреВрдВрдЯреА рд╡реНрдпрд╛рдХрд░рдг</a></li>
<li><a href="../hi471988/index.html">рдЦреВрдВрдЯреА рд╡реНрдпрд╛рдХрд░рдг рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдПрдБ рдЬреЛрдбрд╝рдирд╛</a></li>
<li><a href="../hi471990/index.html">рдкреАрдИрдЬреА рдкрд╛рд░реНрд╕рд░ рдХреЗ рд▓рд┐рдП рдореЗрдЯрд╛ рдЧреНрд░рд╛рдорд░</a></li>
<li><a href="../hi471994/index.html">рдХреЛрд░ рдбреЗрд╡рд▓рдкрд░ рд╕реНрдкреНрд░рд┐рдВрдЯ рдкрд░ рдЦреВрдВрдЯреА рдкрд░ рдХрд╛рдо рдХрд░реЗрдВ</a></li>
<li><a href="../hi471998/index.html">рдПрдл # 10: рд╕реВрдЪреА</a></li>
<li><a href="../hi472000/index.html">"рд╕рдореБрджрд╛рдп рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ": рдХреЛрдЪрд▓рд┐рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдорд╛рд░реНрдЪрд┐рди рдореЛрд╕реНрдХрд▓рд╛</a></li>
<li><a href="../hi472002/index.html">рдЧреНрд░реЗрдЬрд▓ рдореЗрдВ рдкреИрдХреЗрдЬ рд░реАрдкреИрдХрд┐рдВрдЧ</a></li>
<li><a href="../hi472004/index.html">Boost.Spirit, рдпрд╛ рд╕реВрдЪреА рдлрд┐рд▓реНрдЯрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП "рдЖрдзреНрдпрд╛рддреНрдорд┐рдХрддрд╛" рдЬреЛрдбрд╝реЗрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>