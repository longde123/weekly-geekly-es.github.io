<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛅 🌏 🧑🏾‍🤝‍🧑🏾 Engine, bahasa scripting, dan novel visual - dalam 45 jam 👩‍👦 📲 👎🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salam Kebetulan selama tiga tahun berturut-turut saya menjadikan permainan sebagai hadiah untuk Tahun Baru bagi orang-orang tertentu. Pada tahun 2018,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Engine, bahasa scripting, dan novel visual - dalam 45 jam</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483818/"><p><img src="https://habrastorage.org/webt/k-/q6/7j/k-q67jnxvm1knkh3qfvqjyhbira.png" alt="novel visual, skrip mesin dan bahasa selama 45 jam"></p><br><p>  Salam  Kebetulan selama tiga tahun berturut-turut saya menjadikan permainan sebagai hadiah untuk Tahun Baru bagi orang-orang tertentu.  Pada tahun 2018, itu adalah platformer dengan elemen teka-teki, yang saya <a href="https://habr.com/ru/post/345958/">tulis</a> di hub  Pada 2019 - RTS jaringan untuk dua pemain, tentang yang saya tidak menulis apa pun.  Dan akhirnya, pada tahun 2020 - sebuah cerita pendek visual, yang akan dibahas nanti, dibuat dalam waktu yang sangat terbatas. </p><br><p>  Dalam artikel ini: </p><br><ul><li>  desain dan implementasi mesin untuk cerita pendek visual, </li><li>  permainan dengan plot non-linear dalam 8 jam, </li><li>  penghapusan logika game dalam skrip dalam bahasa mereka sendiri. </li></ul><br><p>  Menarik?  Kemudian selamat datang di kucing. </p><br><p>  <em>Perhatian: ada banyak teks dan ~ 3.5mb gambar</em> </p><a name="habracut"></a><br><p>  Konten: </p><br><p>  0. Justifikasi untuk pengembangan mesin. </p><br><ol><li>  Pilihan platform. </li><li>  Arsitektur mesin dan implementasinya: <br>  2.1.  Pernyataan masalah. <br>  2.2.  Arsitektur dan implementasi. </li><li>  Bahasa skrip: <br>  3.1.  Bahasa <br>  3.2.  Penerjemah </li><li>  Pengembangan game: <br>  4.1.  Sejarah dan perkembangan logika game. <br>  4.2.  Grafik </li><li>  Statistik dan hasil. </li></ol><br><p>  <em>Catatan: Jika karena alasan tertentu Anda tidak tertarik pada detail teknis, Anda dapat langsung beralih ke langkah 4 “Pengembangan Game”, namun Anda akan melewatkan sebagian besar konten</em> </p><br><h2 id="0-obosnovanie-razrabotki-dvizhka">  0. Justifikasi untuk pengembangan mesin </h2><br><p>  Tentu saja, ada sejumlah besar mesin siap pakai untuk cerita pendek visual, yang, tidak diragukan lagi, lebih baik daripada solusi yang dijelaskan di bawah ini.  Namun, tidak peduli apa pun programmer saya, jika saya tidak menulis yang lain.  Karena itu, mari kita berpura-pura bahwa perkembangannya dibenarkan. </p><br><h2 id="1-vybor-platformy">  1. Pemilihan platform </h2><br><p>  Faktanya, pilihannya kecil: Java atau C ++.  Tanpa berpikir dua kali, saya memutuskan untuk mengimplementasikan rencana saya di Jawa, karena  untuk pengembangan cepat, ia menyediakan semua kemungkinan (yaitu, manajemen memori otomatis dan kesederhanaan yang lebih besar dibandingkan dengan C ++, yang menyembunyikan banyak detail tingkat rendah dan, sebagai hasilnya, memungkinkan penekanan yang kurang pada bahasa itu sendiri dan hanya memikirkan logika bisnis), dan juga menyediakan dukungan untuk windows, grafik, dan audio di luar kotak. </p><br><p>  Swing dipilih untuk mengimplementasikan antarmuka grafis, karena saya menggunakan Java 13, di mana JavaFX tidak lagi menjadi bagian dari perpustakaan, dan menambahkan puluhan megabita OpenJFX tergantung pada itu terlalu malas.  Mungkin ini bukan solusi terbaik, tapi tetap saja. </p><br><p>  <em>Mungkin muncul pertanyaan: mesin gim macam apa itu, tetapi tanpa akselerasi perangkat keras?</em>  <em>Jawabannya terletak pada kurangnya waktu untuk berurusan dengan OpenGL, dan juga tanpa makna mutlaknya: FPS tidak penting untuk novel visual (dalam hal apa pun, dengan animasi dan grafik sebanyak dalam hal ini).</em> </p><br><h2 id="2-arhitektura-dvizhka-i-ego-realizaciya">  2. Arsitektur mesin dan implementasinya </h2><br><h3 id="21-postanovka-zadachi">  2.1 pernyataan masalah </h3><br><p>  Untuk memutuskan bagaimana melakukan sesuatu, Anda perlu memutuskan mengapa.  Ini saya tentang pernyataan masalah,  arsitekturnya tidak universal, tetapi mesin "khusus domain", menurut definisi, secara langsung tergantung pada permainan yang dimaksud. </p><br><p>  Dengan mesin universal, saya memahami mesin yang mendukung konsep tingkat rendah, seperti "Obyek Game", "Adegan", "Komponen".  Diputuskan untuk membuatnya bukan mesin universal, karena ini akan secara signifikan mengurangi waktu pengembangan. </p><br><p>  Seperti yang direncanakan, permainan harus terdiri dari bagian-bagian berikut: </p><br><p><img src="https://habrastorage.org/webt/w9/fh/l5/w9fhl5dhsu2tiua2kd9d8n5lfdq.png" alt="struktur permainan novel visual"></p><br><p>  Artinya, ada latar belakang untuk setiap adegan, teks utama, serta bidang teks untuk input pengguna (novel visual dikandung dengan input pengguna sewenang-wenang, dan tidak dengan pilihan dari opsi yang diusulkan, seperti yang sering terjadi. Nanti saya akan menjelaskan mengapa ini buruk keputusan).  Diagram juga menunjukkan bahwa ada beberapa adegan dalam permainan dan, sebagai akibatnya, transisi dapat dibuat di antara mereka. </p><br><p>  <em>Catatan: Menurut adegan saya maksud bagian logis dari permainan.</em>  <em>Kriteria adegan bisa menjadi latar belakang yang sama di seluruh bagian ini.</em> </p><br><p>  Juga di antara persyaratan untuk mesin adalah kemampuan untuk memutar audio dan menampilkan pesan (dengan fungsi input pengguna opsional). </p><br><p>  Mungkin keinginan yang paling penting adalah keinginan untuk menulis logika permainan bukan di Jawa, tetapi dalam beberapa bahasa deklaratif sederhana. </p><br><p>  Ada juga keinginan untuk menyadari kemungkinan animasi prosedural, yaitu, gerakan gambar dasar, sehingga pada tingkat Jawa akan dimungkinkan untuk menentukan fungsi dimana kecepatan gerakan saat ini dipertimbangkan (misalnya, sehingga grafik kecepatannya langsung, atau sinusoid, atau yang lainnya). </p><br><p>  Seperti yang direncanakan, semua interaksi pengguna harus dilakukan melalui sistem dialog.  Dalam hal ini, dialog dianggap tidak harus berupa dialog dengan NPC atau sesuatu yang serupa, tetapi umumnya merupakan reaksi terhadap input pengguna mana pun yang telah didaftarkan pawang yang bersangkutan.  Tidak jelas  Ini akan menjadi lebih jelas segera. </p><br><h3 id="22-arhitektura-i-realizaciya">  2.2.  Arsitektur dan implementasi </h3><br><p>  Dengan semua hal di atas, Anda dapat membagi mesin menjadi tiga bagian yang relatif besar yang sesuai dengan paket java yang sama: </p><br><ol><li> <code>display</code> - berisi segala sesuatu yang menyangkut output kepada pengguna informasi apa pun (grafik, teks dan suara), serta menerima input darinya.  Semacam (Lihat), jika kita berbicara tentang MVC / MVP / dll. </li><li>  <code>initializer</code> - berisi kelas di mana mesin diinisialisasi dan diluncurkan. </li><li>  <code>sl</code> - berisi alat untuk bekerja dengan bahasa skrip (selanjutnya - SL). </li></ol><br><p>  Dalam paragraf ini saya akan mempertimbangkan dua bagian pertama.  Saya akan mulai dengan yang kedua. </p><br><p>  Kelas initializer memiliki dua metode utama: <code>initialize()</code> dan <code>run()</code> .  Awalnya, kontrol datang ke kelas peluncur, dari tempat <code>initialize()</code> dipanggil.  Setelah panggilan, penginisialisasi menganalisis parameter yang diteruskan ke program (jalur ke direktori dengan pencarian dan nama pencarian untuk dijalankan), memuat manifes pencarian yang dipilih (tentangnya beberapa saat kemudian), menginisialisasi tampilan, memeriksa apakah versi bahasa (SL) yang diperlukan oleh pencarian didukung oleh data penerjemah, dan akhirnya, meluncurkan utas terpisah untuk konsol pengembang. </p><br><p>  Segera setelah itu, jika semuanya berjalan lancar, peluncur memanggil metode <code>run()</code> , yang menggerakkan pemuatan pencarian yang sebenarnya.  Pertama, ada semua skrip yang terkait dengan pencarian yang diunduh (tentang struktur file pencarian - di bawah), mereka diumpankan ke penganalisa, yang hasilnya diberikan kepada penerjemah.  Kemudian, inisialisasi semua adegan dimulai dan inisialisasi menyelesaikan pelaksanaan alirannya, akhirnya menggantung tombol Enter handler pada tampilan.  Jadi, ketika pengguna menekan Enter, adegan pertama dimuat, tetapi lebih banyak tentang itu nanti. </p><br><p>  Struktur file pencarian adalah sebagai berikut: </p><br><p><img src="https://habrastorage.org/webt/3l/xo/nr/3lxonrfkeik_hwids4tire50dge.png" alt="struktur file pencarian"></p><br><p>  Ada folder terpisah untuk pencarian, di mana root adalah manifes, serta tiga folder tambahan: <code>audio</code> - untuk suara, <code>graphics</code> - untuk bagian visual dan <code>scenes</code> - untuk skrip yang menggambarkan adegan. </p><br><p>  Saya ingin menjelaskan secara singkat manifestonya.  Ini berisi bidang-bidang berikut: </p><br><ul><li>  <code>sl_version_req</code> - Versi SL diperlukan untuk memulai pencarian, </li><li>  <code>init_scene</code> - nama adegan dari mana pencarian dimulai, </li><li>  <code>quest_name</code> - nama pencarian indah yang muncul di judul jendela, </li><li>  <code>resolution</code> - resolusi layar yang tujuan pencariannya (beberapa kata tentang ini nanti), </li><li>  <code>font_size</code> - ukuran font untuk semua teks, </li><li>  <code>font_name</code> adalah nama font untuk semua teks. </li></ul><br><p>  Perlu dicatat bahwa selama inisialisasi tampilan, antara lain, perhitungan resolusi rendering dilakukan: yaitu, resolusi yang diperlukan diambil dari manifes dan diperas ke ruang yang tersedia untuk jendela sehingga: </p><br><ul><li>  rasio aspek tetap sama seperti dalam resolusi dari manifes, </li><li>  semua ruang yang tersedia ditempati dengan lebar atau tinggi. <br>  Berkat ini, pengembang pencarian dapat yakin bahwa gambarnya, misalnya 16: 9, akan ditampilkan pada layar apa pun dalam rasio ini. </li></ul><br><p>  Juga, ketika tampilan diinisialisasi, kursor disembunyikan, karena tidak terlibat dalam gameplay. </p><br><p>  Singkatnya tentang konsol pengembang.  Ini dikembangkan karena alasan berikut: </p><br><ol><li>  Untuk debug </li><li>  Jika terjadi kesalahan selama pertandingan, itu dapat diperbaiki melalui konsol pengembang. <br>  Ini hanya menerapkan beberapa perintah, yaitu: keluaran deskriptor dari jenis tertentu dan statusnya, keluaran utas bekerja, restart layar, dan perintah - <code>exec</code> yang paling penting, yang memungkinkan mengeksekusi kode SL dalam adegan saat ini. </li></ol><br><p>  Ini mengakhiri deskripsi penginisialisasi dan hal-hal terkait, dan kita dapat melanjutkan ke deskripsi tampilan. </p><br><p>  Struktur akhirnya adalah sebagai berikut: </p><br><p><img src="https://habrastorage.org/webt/zz/qb/-1/zzqb-15nrxzhechuggvxgzoo-hg.png" alt="struktur tampilan"></p><br><p>  Dari pernyataan masalah, kita dapat menyimpulkan bahwa semua yang harus dilakukan adalah menggambar, menggambar teks, memutar audio. </p><br><p>  Bagaimana teks / gambar biasanya digambar dalam mesin universal dan seterusnya?  Ada metode tipe <code>update()</code> , yang disebut setiap centang / langkah / bingkai / render / bingkai / dll dan di mana ada panggilan ke metode tipe <code>drawText()</code> / <code>drawImage()</code> - ini memastikan penampilan teks / gambar dalam bingkai ini.  Namun, begitu panggilan ke metode tersebut berhenti, rendering dari hal-hal yang terkait berhenti. </p><br><p>  Dalam kasus saya, diputuskan untuk melakukan sedikit berbeda.  Karena untuk novel visual, teks dan gambar relatif permanen, dan juga hampir semua yang dilihat pengguna (yaitu, mereka cukup penting), mereka dibuat sebagai objek game - yaitu, hal-hal yang hanya perlu Anda spawn dan tidak akan hilang sampai Anda bertanya kepada mereka.  Selain itu, solusi ini menyederhanakan implementasi. </p><br><p>  Objek (dari sudut pandang OOP) yang menggambarkan teks / gambar disebut descriptor.  Artinya, untuk pengguna mesin API hanya ada deskriptor yang dapat ditambahkan ke kondisi tampilan dan dihapus dari itu.  Dengan demikian, dalam versi final tampilan ada deskriptor berikut (mereka sesuai dengan kelas dengan nama yang sama): </p><br><div class="scrollable-table"><table><thead><tr><th>  Nama Deskriptor: </th><th>  Deskripsi Penjelasan: </th></tr></thead><tbody><tr><td> <code>ImageDescriptor</code> </td> <td>  Deskriptor gambar: berisi gambar ( <code>BufferedImage</code> ), posisi di layar dan lebar dengan tinggi.  Namun, saat membuat, hanya lebar yang ditentukan - tinggi dihitung sebanding dengan tinggi aslinya (dan tidak ada cara untuk meregangkan / mengompres gambar secara tidak proporsional, jadi ini adalah keputusan yang buruk). </td></tr><tr><td> <code>TextDescriptor</code> </td> <td>  Deskriptor teks: berisi teks, posisi dan ukurannya.  Selain itu, teks tidak memiliki skala lebar dan tinggi, tetapi terpotong saat melewati batas.  Teks dapat ditransfer oleh suku kata dan hanya dengan karakter spasi, dan juga gulir dengan garis. </td></tr><tr><td> <code>AudioDescriptor</code> </td> <td>  Deskriptor audio yang dapat memutar audio (baik sekali atau loop), jeda dan hapus. </td></tr><tr><td> <code>AnimationDescriptor</code> </td> <td>  Pegangan animasi yang, seperti audio, dapat dilingkarkan.  Berisi objek yang mengimplementasikan animasi, dan deskriptor gambar tempat animasi dimainkan.  Metode utama adalah <code>update(long)</code> , yang mengambil jumlah milidetik yang telah berlalu sejak panggilan <code>update(long)</code> terakhir <code>update(long)</code> .  Jumlah mereka digunakan untuk menghitung keadaan animasi saat ini. </td></tr><tr><td> <code>InputDescriptor</code> </td> <td>  Deskripsi deskriptor: adalah bidang teks di mana kursor selalu berada di akhir teks.  Perlu juga dicatat bahwa penyimpanan dan rendering teks dari deskriptor input dilakukan melalui deskriptor teks yang dibuat secara implisit, agar tidak menggandakan logika.  <em>Lucunya, saya memperhitungkan kemungkinan menekan Backspace, tetapi tidak memperhitungkan Hapus;</em>  <em>dan ketika Hapus masih ditekan selama permainan, ▯▯▯ muncul di lapangan, karena tidak ada pemrosesan yang dilakukan untuk Hapus dan karakter mencoba ditampilkan sebagai teks.</em> </td></tr><tr><td> <code>KeyAwaitDescriptor</code> </td> <td>  Pegangan yang dilewati tombol yang diperlukan (dari <code>KeyEvent</code> ) dan panggilan balik dengan beberapa logika yang akan diluncurkan ketika tombol yang sesuai ditekan. </td></tr><tr><td> <code>PostWorkDescriptor</code> </td> <td>  Pegangan yang menerima panggilan balik yang akan dipanggil setelah memproses setiap centang. </td></tr></tbody></table></div><br><p>  Layar juga berisi bidang untuk penerima input saat ini (deskriptor input) dan bidang yang menunjukkan deskriptor teks mana yang sekarang memiliki fokus dan yang teksnya akan bergulir di bawah tindakan yang sesuai pada bagian pengguna. </p><br><p>  Siklus permainan terlihat seperti ini: </p><br><ol><li>  Pemrosesan audio - memanggil metode <code>update()</code> pada deskriptor audio, yang memeriksa keadaan audio saat ini, membebaskan memori (jika perlu), dan melakukan pekerjaan teknis lainnya. </li><li>  Memproses penekanan tombol - mentransfer karakter yang dimasukkan ke deskriptor untuk menerima input, memproses penekanan tombol untuk tombol gulir (panah atas dan bawah) dan Backspace. </li><li>  Pemrosesan Animasi. </li><li>  Menghapus latar belakang di buffer rendering ( <code>BufferedImage</code> berfungsi sebagai buffer). </li><li>  Menggambar gambar. </li><li>  Rendering teks. </li><li>  Bidang gambar untuk input. </li><li>  Output dari buffer ke layar. </li><li>  Menangani <code>PostWorkDescriptor</code> . </li><li>  Beberapa bekerja untuk mengganti status tampilan, yang akan saya bahas nanti (di bagian interpreter SL). </li><li>  Hentikan aliran untuk waktu yang dihitung secara dinamis sehingga FPS sama dengan nilai yang ditentukan (30 secara default). </li></ol><br><p>  <em>Catatan: Mungkin muncul pertanyaan, "Mengapa memberikan bidang input jika deskriptor teks yang sesuai telah dibuat untuk mereka yang akan diberikan langkah lebih awal?"</em>  <em>Bahkan, rendering dalam paragraf 7 tidak terjadi - hanya parameter <code>InputDescriptor</code> yang disinkronkan dengan parameter <code>InputDescriptor</code> - seperti visibilitas layar, posisi, ukuran, dan lainnya.</em>  <em>Ini dilakukan, seperti ditunjukkan di atas, untuk alasan bahwa pengguna tidak secara langsung mengontrol deskriptor input yang sesuai dengan deskriptor teks dan umumnya tidak tahu apa-apa tentang itu.</em> </p><br><p>  Perlu dicatat bahwa ukuran dan posisi elemen pada layar tidak diatur dalam piksel, tetapi dalam ukuran relatif - angka dari 0 hingga 1 (diagram di bawah).  Yaitu, seluruh lebar untuk rendering adalah 1, dan keseluruhan tinggi adalah 1 (dan mereka tidak sama, yang saya lupa beberapa kali dan kemudian menyesal).  Itu juga akan bermanfaat untuk menjadikan (0,0) menjadi pusat, dan lebar / tinggi harus sama dengan dua, tetapi untuk beberapa alasan saya lupa / tidak memikirkannya.  Namun, bahkan opsi dengan lebar / tinggi sama dengan 1 menyederhanakan kehidupan pengembang pencarian. </p><br><p><img src="https://habrastorage.org/webt/ay/ay/zy/ayayzykqpewkfcggqoxxz3mtcse.png" alt="sistem koordinat relatif"></p><br><p>  Beberapa kata tentang sistem untuk membebaskan memori. </p><br><p>  Setiap deskriptor memiliki metode <code>setDoFree(boolean)</code> , yang harus dihubungi pengguna jika ia ingin menghancurkan deskriptor yang diberikan.  Pengumpulan sampah untuk deskriptor dari beberapa tipe terjadi segera setelah memproses semua deskriptor dari tipe ini.  Juga, audio yang diputar sekali dihapus secara otomatis setelah pemutaran berakhir.  Sama persis dengan animasi non-looping. </p><br><p>  Jadi, saat ini Anda dapat menggambar apa pun yang Anda inginkan, tetapi ini bukan gambar di atas, yang hanya memiliki latar belakang, teks utama dan bidang input.  Dan inilah pembungkus di atas layar, yang sesuai dengan kelas <code>DefaultDisplayToolkit</code> . </p><br><p>  Ketika diinisialisasi, itu hanya menambahkan deskriptor untuk latar belakang, teks, dll ke layar.Ia juga tahu bagaimana menampilkan pesan dengan ikon opsional, bidang input dan panggilan balik. </p><br><p>  <em>Kemudian bug kecil muncul, sebuah koreksi penuh yang membutuhkan mengulangi setengah dari sistem rendering: jika Anda melihat urutan rendering dalam loop game, Anda dapat melihat bahwa gambar diambil terlebih dahulu dan hanya kemudian teks.</em>  <em>Pada saat yang sama, ketika toolkit menunjukkan gambar, itu menempatkannya di tengah layar lebar dan <strong>tinggi</strong> .</em>  <em>Dan jika ada banyak teks dalam pesan, maka sebagian teks harus tumpang tindih dengan adegan.</em>  <em>Namun, karena latar belakang pesan adalah gambar (benar-benar hitam, tapi tetap saja), dan gambar digambar sebelum teks, satu teks dilapiskan pada teks lainnya (tangkapan layar di bawah).</em>  <em>Masalahnya sebagian diselesaikan dengan pemusatan vertikal bukan pada layar, tetapi di area di <strong>atas</strong> teks utama.</em>  <em>Solusi lengkap akan mencakup memperkenalkan parameter kedalaman dan mengulang renderers dari kata "sepenuhnya".</em> </p><br><div class="spoiler">  <b class="spoiler_title">Demonstrasi hamparan</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/la/t1/yn/lat1ynb6f3ivjxdvnhi4bsbjfvc.png" alt="teks tumpang tindih"></p></div></div><br><p>  Mungkin ini tentang tampilan, akhirnya, semuanya.  Anda dapat beralih ke bahasa, seluruh API untuk bekerja dengan yang terkandung dalam paket <code>sl</code> . </p><br><h2 id="3-skriptovyy-yazyk">  3. Bahasa scripting </h2><br><p>  <em>Catatan: Jika% USERNAME% yang dihormati membacanya di sini, dia melakukannya dengan baik, dan saya akan memintanya untuk tidak berhenti melakukannya: sekarang ini akan jauh lebih menarik daripada sebelumnya.</em> </p><br><h3 id="31-yazyk">  3.1.  Bahasa </h3><br><p>  Awalnya, saya ingin membuat bahasa deklaratif di mana hanya perlu menunjukkan semua parameter yang diperlukan untuk adegan itu, dan itu saja.  Mesin akan mengambil semua logika.  Namun, pada akhirnya, saya sampai pada bahasa prosedural, bahkan dengan elemen OOP (hampir tidak dapat dibedakan), dan ini adalah solusi yang baik, karena, dibandingkan dengan versi deklaratif, itu memberi peluang lebih banyak fleksibilitas dalam logika game. </p><br><p>  Sintaks bahasa dipikirkan agar sesederhana mungkin untuk parsing, yang logis, mengingat jumlah waktu yang tersedia. </p><br><p>  Jadi, kode tersebut disimpan dalam file teks dengan ekstensi SSF;  setiap file berisi deskripsi satu atau lebih adegan;  setiap adegan berisi nol atau lebih aksi;  setiap tindakan berisi nol atau lebih operator. </p><br><p>  Sedikit penjelasan tentang persyaratan.  Suatu tindakan hanyalah sebuah prosedur tanpa kemungkinan lewat argumen (sama sekali tidak mencegah perkembangan game).  Operator tampaknya tidak cukup apa arti kata ini dalam bahasa biasa (+, -, /, *), tetapi bentuknya sama: operator adalah totalitas nama dan semua argumennya. </p><br><p>  Mungkin Anda ingin akhirnya melihat kode sumber untuk SL, ini dia: </p><br><pre> <code class="plaintext hljs">scene dungeon { action init { load_image "background" "dungeon/background.png" load_image "key" "dungeon/key.png" load_audio "background" "dungeon/background.wav" load_audio "got_key" "dungeon/got_key.wav" } action first_come { play "background" loop set_background "background" set_text "some text" add_dialog "(||(|) (||-))" "dial_look_around" dial_look_around on } //some comment action dial_look_around { play "got_key" once show "some text 2" "key" none tag "key" switch_dialog "dial_look_around" off } }</code> </pre> <br><p>  Sekarang menjadi jelas apa operatornya.  Terlihat juga bahwa setiap tindakan adalah blok pernyataan (pernyataan dapat berupa blok pernyataan), dan juga fakta bahwa komentar satu baris didukung (tidak masuk akal untuk memasukkan yang multi-baris, selain itu, saya tidak menggunakan yang satu-baris). </p><br><p>  Demi penyederhanaan, konsep seperti "variabel" tidak diperkenalkan ke dalam bahasa;  sebagai hasilnya, semua nilai yang digunakan dalam kode adalah literal.  Tergantung pada jenisnya, literal berikut dibedakan: </p><br><div class="scrollable-table"><table><thead><tr><th>  Nama Literal: </th><th>  Catatan: </th></tr></thead><tbody><tr><td>  String literal </td><td>  Kemampuan untuk menghindari tanda kutip dan garis miring (\\) disertakan, juga dimungkinkan untuk memasukkan tanda hubung dalam teks </td></tr><tr><td>  Integer literal </td><td>  Mendukung angka negatif </td></tr><tr><td>  Floating point literal </td><td>  Mendukung angka negatif </td></tr><tr><td>  Tidak ada yang harfiah </td><td>  Kode diwakili sebagai <code>none</code> </td></tr><tr><td>  Boolean literal </td><td>  Dalam kode - <code>on</code> / <code>off</code> untuk benar / salah, masing-masing </td></tr><tr><td>  Literal umum </td><td>  Jika literal tidak termasuk salah satu dari tipe di atas dan terdiri dari huruf-huruf alfabet, angka, dan garis bawah bahasa Inggris, itu adalah literal umum. </td></tr></tbody></table></div><br><p>  Beberapa kata tentang penguraian bahasa.  Ada beberapa level "memuat" kode (diagram di bawah): </p><br><ol><li>  Tokenizer adalah kelas modular untuk memecah kode sumber menjadi token (unit semantik minimum bahasa).  Setiap jenis token dikaitkan dengan nomor - jenisnya.  Mengapa modular?  Karena bagian-bagian dari tokenizer yang memeriksa apakah ada bagian dari kode sumber yang merupakan token dari jenis tertentu diisolasi dari tokenizer dan diunduh dari luar (dari paragraf kedua). </li><li>  Add-on tokenizer adalah kelas yang mendefinisikan penampilan setiap jenis token di SL;  di tingkat bawah menggunakan tokenizer.  Juga di sini adalah penyaringan token ruang angkasa dan penghilangan komentar single-line.  Outputnya memberikan aliran token yang bersih, yang digunakan ... </li><li>  ... parser (itu juga modular), yang menghasilkan pohon sintaksis abstrak pada output.  Modular - karena dengan sendirinya ia hanya dapat mengurai adegan dan tindakan, tetapi tidak tahu bagaimana menganalisis operator.  Oleh karena itu, modul dimuat ke dalamnya (pada kenyataannya, dia sendiri memuatnya dalam konstruktor, yang tidak terlalu baik), yang dapat mengurai masing-masing operatornya. </li></ol><br><p><img src="https://habrastorage.org/webt/3c/vz/u-/3cvzu-qk5wgwwtgpn_dndl3aan8.png" alt="skrip pipa bahasa penguraian"></p><br><p>  Sekarang, secara singkat tentang operator, sehingga gagasan fungsionalitas bahasa muncul.  Awalnya, ada 11 operator, kemudian dalam proses berpikir melalui permainan, beberapa dari mereka bergabung menjadi satu, beberapa berubah, dan 9 lainnya ditambahkan.  Ini tabel ringkasannya: </p><br><div class="scrollable-table"><table><thead><tr><th>  Nama Operator: </th><th>  Catatan: </th></tr></thead><tbody><tr><td> <code>load_image</code> </td> <td>  Memuat gambar ke dalam memori </td></tr><tr><td> <code>load_audio</code> </td> <td>  Memuat audio ke dalam memori </td></tr><tr><td> <code>set_text</code> </td> <td>  Mengatur teks utama adegan. </td></tr><tr><td> <code>set_background</code> </td> <td>  Atur latar belakang untuk adegan itu. </td></tr><tr><td> <code>play</code> </td> <td>  Memutar audio (dapat memutar satu kali atau mengulang pemutaran) </td></tr><tr><td> <code>show</code> </td> <td>  Memperlihatkan pesan dengan callback (dalam SL) dan gambar opsional (dipanggil setelah pengguna menutup pesan) </td></tr><tr><td> <code>tag</code> </td> <td>  Menetapkan tag (label).  Itu dapat dianggap sebagai variabel global dengan nama yang ditentukan, yang tidak menyimpan nilai apa pun.  Ini berguna dalam kasus yang berbeda: misalnya, Anda dapat menandai sedemikian rupa apakah pemain menemukan kunci pintu, apakah ia sudah berada di lokasi ini, dll. </td></tr><tr><td>  <code>if_tag</code> / <code>if_tag_n</code> </td><td>  Operator percabangan yang memungkinkan Anda untuk melakukan sesuatu tergantung pada apakah tag yang sesuai dipasang.  cabang <code>else</code> didukung.  <code>if_tag</code> dieksekusi jika tag diatur, <code>if_tag_n</code> - dan sebaliknya </td></tr><tr><td> <code>add_dialog</code> </td> <td>  Memungkinkan Anda menambahkan dialog ke adegan.  Tentang mereka beberapa saat kemudian </td></tr><tr><td> <code>goto</code> </td> <td>  Transisi ke adegan lain </td></tr><tr><td> <code>call</code> </td> <td>  Panggilan tindakan khusus </td></tr><tr><td> <code>call_extern</code> </td> <td>  Meminta tindakan dari adegan lain. </td></tr><tr><td> <code>stop_all</code> </td> <td>  Berhenti memainkan semua suara / musik </td></tr><tr><td> <code>show_motion</code> </td> <td>  Memperlihatkan dan memindahkan gambar dari satu titik ke titik lainnya dalam waktu (durasi) yang ditentukan (dengan panggilan balik opsional yang dipanggil saat gerakan berakhir) </td></tr><tr><td> <code>animate</code> </td> <td>  Animasi gambar yang sebelumnya ditampilkan melalui <code>show_motion</code> .  Dari opsi: Anda dapat menentukan jenis animasi - <code>v_motion</code> / <code>h_motion</code> (gerakan vertikal / horizontal berdasarkan fungsi <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><msup><mi>t</mi><mn>3</mn></msup><mo>&amp;#x2212;</mo><mn>3</mn><msup><mi>t</mi><mn>2</mn></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.953ex" height="2.539ex" viewBox="0 -935.7 3854.8 1093.4" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/483818/&amp;xid=17259,15700023,15700186,15700191,15700259,15700271,15700301&amp;usg=ALkJrhhVvaUWrUekf2MsP8yJp8rcapdqEw#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/483818/&amp;xid=17259,15700023,15700186,15700191,15700259,15700271,15700301&amp;usg=ALkJrhhVvaUWrUekf2MsP8yJp8rcapdqEw#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/483818/&amp;xid=17259,15700023,15700186,15700191,15700259,15700271,15700301&amp;usg=ALkJrhhVvaUWrUekf2MsP8yJp8rcapdqEw#MJMAIN-33" x="511" y="513"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/483818/&amp;xid=17259,15700023,15700186,15700191,15700259,15700271,15700301&amp;usg=ALkJrhhVvaUWrUekf2MsP8yJp8rcapdqEw#MJMAIN-2212" x="1538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/483818/&amp;xid=17259,15700023,15700186,15700191,15700259,15700271,15700301&amp;usg=ALkJrhhVvaUWrUekf2MsP8yJp8rcapdqEw#MJMAIN-33" x="2538" y="0"></use><g transform="translate(3039,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/483818/&amp;xid=17259,15700023,15700186,15700191,15700259,15700271,15700301&amp;usg=ALkJrhhVvaUWrUekf2MsP8yJp8rcapdqEw#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://habr.com/ru/post/483818/&amp;xid=17259,15700023,15700186,15700191,15700259,15700271,15700301&amp;usg=ALkJrhhVvaUWrUekf2MsP8yJp8rcapdqEw#MJMAIN-32" x="511" y="513"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><msup><mi>t</mi><mn>3</mn></msup><mo>−</mo><mn>3</mn><msup><mi>t</mi><mn>2</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-1"> 2t ^ 3-3t ^ 2 </script>  ), kemungkinan pengulangan, indikasi waktu (durasi) dimana animasi harus dimainkan.  Dimungkinkan untuk mengirimkan satu nilai numerik (satu, karena tidak ada cara untuk meneruskan sejumlah variabel argumen, jadi ini sebagian adalah penopang) ke animasi (untuk setiap animasi itu berarti hal yang berbeda) dan panggilan balik opsional (dipanggil saat animasi dimainkan). </td></tr></tbody></table></div><br><p>  Operator untuk bekerja dengan penghitung - variabel integer khusus adegan. </p><br><div class="scrollable-table"><table><thead><tr><th>  Nama Operator: </th><th>  Catatan: </th></tr></thead><tbody><tr><td> <code>counter_set</code> </td> <td>  Membuat penghitung dan menginisialisasi dengan beberapa nilai </td></tr><tr><td> <code>counter_add</code> </td> <td>  Menambahkan nilai ke penghitung </td></tr><tr><td> <code>if_counter &lt;modifier&gt;</code> </td> <td>  Mampu membandingkan nilai dua penghitung / angka / angka dan penghitung.  <code>&lt;modifier&gt;</code> adalah literal umum dan memiliki bentuk <code>eq/gr/ls[_n]</code> , di mana <code>eq</code> sama, <code>gr</code> lebih besar dari, <code>ls</code> lebih kecil dari, <code>ls</code> lebih kecil, <code>_n</code> adalah negasi (misalnya, <code>gr_n</code> tidak lebih besar).  Seperti yang Anda lihat, semuanya disederhanakan sebanyak mungkin. </td></tr></tbody></table></div><br><p>  Ada juga pemikiran memperkenalkan <code>return</code> (fungsionalitas yang sesuai bahkan ditambahkan pada tingkat inti penerjemah), tetapi saya lupa, dan itu tidak berguna. </p><br><p>           ,      ,     :  <code>show_motion</code>      (, , 0.01)         <code>duration</code> . </p><br><p>          ,   (lookup)  (  ):      ///,        <code>load_audio</code> / <code>load_image</code> / <code>counter_set</code> / <code>add_dialog</code> .   ,       ,   ,    , — . .        ,     . , : " <code>scene_coast.dialog_1</code> " —  <code>dialog_1</code>   <code>scene_coast</code> . </p><br><p>           SL-,   . , ,       , —       .     :       (-, ),   ,       <code>lookup</code> ', ,  ,  .      ,            <code>goto</code>  <code>lookup</code> ',        . </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><p>    -      — - ,        ,       <code>n</code>  ( )    .             ,     ,       <code>n</code>   .   ,  . </p></div></div><br><p>   .     : </p><br><pre> <code class="plaintext hljs">add_dialog "regexp" "dialog_name" callback on/off</code> </pre> <br><p>     ,                  . ,     :     ,   ,      ,     ( ). </p><br><p>  ,    ,        ( )    ( )   ,    ( ).         :         ,    ,     , ""   "". </p><br><p><img src="https://habrastorage.org/webt/qw/nk/y6/qwnky6dhlw8amlkbhcnb3ex4tvs.png" alt="kerja sistem dialog"></p><br><p> <em>,       ( ,  )</em> </p><br><p>     ,  "": </p><br><pre> <code class="plaintext hljs">(||((|||) ( )?(||)?)|(||)( )?|  )</code> </pre> <br><p>  *** </p><br><p>   ,     :  — ,      ,   — . </p><br><p> <em>,       :      </em> </p><br><h3 id="32-interpretator"> 3.2.  </h3><br><p>      :   ,  —  ""  (   ).  <em></em>           . </p><br><p>   SL    ,     - .  : </p><br><ol><li> <code>init</code> —           ,    (  ,      , ,     ). </li><li> <code>first_come</code> — ,      .     ,  ,     . </li><li>       ,     : <code>come</code> —    ,     ( ). </li></ol><br><p> <em>: <code>init</code>  <code>first_come</code> —     ,          .</em> </p><br><p>         .     :      ,    ,    <strong></strong>  <code>init</code> -.  ,  <strong></strong>    (   )    . </p><br><p>  ,     <code>n</code> ,        <code>first_come</code> - (  -       -     ).       .  ,   :       ,        ,  <code>first_come</code>  <code>come</code> ,   <code>come</code> ( ).    :        ,             ,         ,       . </p><br><p>          (,    "", " ", "  "  . .).  ,      ,   -    - .    ,             ( ),          . </p><br><p>              (, ,    ).   :        ?       ,        ,      .      <code>provideState</code>  ,        ;  <strong></strong>           ,      . </p><br><p> <em>      ,  ,     ,     ,    (    ,    ),         (, ,      ,    ).</em> </p><br><h2 id="4-razrabotka-igry"> 4.   </h2><br><p>          .   2019-  2018-,      ,  ,    . </p><br><h3 id="41-istoriya-i-razrabotka-logiki-igry"> 4.1.      </h3><br><p>     ,  ,    , —  .             ,      .      (  ),      , <del>  </del>     - , 9  (),      -  (   ,     ( , , )  . </p><br><p>  ,   :     ,       ,   ,     .           ,       ,     . </p><br><p>  ,        25% (5)  ,  :  ,   ;   ( <code>animate</code> ),      ( <code>call_extern</code> ). </p><br><p>   ,     -     ( ),      (,   ,   —  ,  "You won"). </p><br><p><img src="https://habrastorage.org/webt/0g/la/gv/0glagv3q6tcjirb_qezojplz8tc.png" alt="novel visual demo"></p><br><h3 id="42-grafika"> 4.2.  Grafik </h3><br><p>          ,     : </p><br><p><img src="https://habrastorage.org/webt/pz/fw/qi/pzfwqi8pkcr7le0xjkjmkd8w-h8.png" alt="Rintisan untuk grafis"></p><br><p>      ,    ,    -   -    " ".     : </p><br><ul><li>      (4x2.23''),         . </li><li>       : ,    , —     . </li><li>            ////etc. </li></ul><br><p><img src="https://habrastorage.org/webt/e9/ry/rv/e9ryrv-13waaticfbp04vhwq5tu.png" alt="penggunaan kuas seni"></p><br><ul><li>    ,    ,     . </li></ul><br><p><img src="https://habrastorage.org/webt/th/hj/jm/thhjjmkujbdjdo4eqvksclai7pq.png" alt="karakter dari novel visual"></p><br><ul><li> ,        .      ,     , ,       .     . </li></ul><br><h2 id="5-statistika-i-itogi"> 5.    </h2><br><p>        ( 11 )    30  40 .    9    4  55 .     (  )  7  41 .   — ~4-6  (    45   ). </p><br><p> <em>:      "Darkyen's Time Tracker"   JetBrains (  ).</em> <br> <em>:       2    ,    —     .   45        8 .</em> </p><br><p>      : 4777,   ( ) — 637. </p><br><p> <em>:     <code>cloc</code> .</em> </p><br><p>    30   .    (  ) :  — ~8 ,      — ~24 ,   (     ) — ~8 .     . </p><br><p>   — 232  (  - ,   WAV). </p><br><div class="spoiler"> <b class="spoiler_title"> WAV?</b> <div class="spoiler_text"><p>       <code>javax.sound.sampled.AudioSystem</code> ,    WAV  AU ,    WAV. </p></div></div><br><p>   28  (  3  ).          —           17  /. </p><br><p>         -  :        ,        .  , ,   "   ",     " ".     (,   ),          (     ""/""  - ). </p><br><div class="spoiler"> <b class="spoiler_title">      ?</b> <div class="spoiler_text"><p>   —      ,    .      :        . . ,       ,       ""    :        NPC,      ,       (,    —    ..). </p></div></div><br><p>   ,      :  ,      . </p><br><p>    —  .     ,  :  ,  ,  ,   .              . ,        ,     , , , . </p><br><p>   .       (        ),    : </p><br><ul><li>  .  .  . </li><li>     .              ,    . </li><li>   ,       . </li></ul><br><p> <em>,             ,  .</em> </p><br><p>           <a href="https://github.com/wcobalt/stepper" rel="nofollow">GitHub</a> . </p><br><p>        (assets)  <a href="https://github.com/wcobalt/stepper/releases" rel="nofollow"> "Releases"</a>   "v1.0"  . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id483818/">https://habr.com/ru/post/id483818/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id483798/index.html">Cara mengotomatiskan penulisan iklan di Google Ads</a></li>
<li><a href="../id483800/index.html">Jangan tidur! Bagaimana Kami Belajar untuk Melepaskan 12.000 Tawaran Tiket Per Malam</a></li>
<li><a href="../id483802/index.html">Cara meluncurkan produk sendiri jika Anda seorang pengembang: Kiat dari pencipta Laravel Taylor Otvel. Bagian 1: Hadirin</a></li>
<li><a href="../id483804/index.html">Richard Hamming "Bab tidak ada": Seperti yang kita tahu apa yang kita ketahui (11-20 menit dari 40)</a></li>
<li><a href="../id483814/index.html">Abraham Flexner: The Usefulness of Useless Knowledge (1939)</a></li>
<li><a href="../id483820/index.html">Apa yang mempengaruhi penerbitan kredit. Ikhtisar Kompetisi Risiko Default Kredit Rumah</a></li>
<li><a href="../id483822/index.html">5 fitur JavaScript yang tanpanya saya tidak bisa menulis kode</a></li>
<li><a href="../id483826/index.html">Menghubungkan Model Sensor CO2 MH-Z19B Menggunakan Output Analog Vo</a></li>
<li><a href="../id483828/index.html">Pertukaran atom yang bersinar dan kemiskinan</a></li>
<li><a href="../id483830/index.html">Routing untuk iOS: navigasi universal tanpa menulis ulang aplikasi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>