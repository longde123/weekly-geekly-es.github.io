<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚁 ☁️ 🙋🏼 Jam tangan pintar dengan BASIC pada fisik 6502 🍙 📜 🏩</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prosesor 6502 telah ada selama lebih dari 40 tahun dan masih digunakan di sejumlah sistem embedded. WDC terus memproduksi chip periferal seri 65C02 da...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jam tangan pintar dengan BASIC pada fisik 6502</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448758/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gy/bi/ze/gybizext5yt88kfg3elkyxr5gic.jpeg"></div><br>  Prosesor 6502 telah ada selama lebih dari 40 tahun dan masih digunakan di sejumlah sistem embedded.  WDC terus memproduksi chip periferal seri 65C02 dan 65Cxx.  Penulis menemukan bahwa mereka sekarang tersedia dalam paket PLCC dan QFP, tetapi opsi chip ini jarang digunakan.  Microcircuits dalam paket DIP tidak lagi tersedia, karena permintaan dari produsen buatan sendiri saja terlalu kecil.  Penulis memutuskan untuk membuat papan tunggal terkecil pada 6502, yang ia dapat.  Ada kemungkinan bahwa prosesor single-board buatan rumah terkecil yang diketahui pada prosesor ini (bukan buatan sendiri dan kurang, misalnya, Tamagotchi).  Hasilnya adalah perangkat yang secara opsional dapat Anda gunakan untuk mengembangkan sarung tangan dengan tali.  Layar diambil dari Nokia 5110, shell ditulis dengan antarmuka yang indah, dan ternyata, mungkin, satu-satunya arloji pintar pada 6502. <br><br>  Arloji ini berisi: prosesor 65C02 dengan frekuensi clock 8 MHz, chip 65C22, LCD kontrol dan tombol polling di papan dan keyboard eksternal, layar Nokia 5110 (84x48 piksel), RAM statis 32 kB, ROM 16 kB ROM di ruang alamat.  Tegangan suplai 3,3 V. <br><br>  Dan yang paling penting: sebagai stasiun dok, Anda dapat menghubungkan matriks keyboard dari Commodore 64 ke konektor di papan, mendapatkan sesuatu yang mirip dengan Seiko UC-2000 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ulasan tentang Habré</a> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zn/b-/iq/znb-iqhvb8vu2mp7d5b48xvq_vu.jpeg"></div><a name="habracut"></a><br>  Sirkuit dan topologi papan sirkuit tercetak yang disusun di KiCad.  Dimensi papan dua sisi adalah 3x1,5 inci.  Semua komponen adalah SMD, kecuali untuk panel PLCC, serta konektor untuk keyboard dan LCD. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wx/ut/md/wxutmdfpfozprh_v2l1cjmwbfak.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/a4/nj/qk/a4njqkemdtxq2arzw5s9whpxghg.png"></div><br>  Topologi dalam ilustrasi tidak untuk skala.  Tampilan papan sebelum perakitan: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/v1/kj/p4/v1kjp4nloyqq_ykq96qr8fvycpw.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/x3/pn/t1/x3pnt11c_bbq0i_e_jl5glbvmi0.jpeg"></div><br>  Setelah: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rt/sq/ma/rtsqmarlhhk9r1smkhs5xqrlete.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sg/m5/ol/sgm5ol1cibggd321fi02pnuwtge.jpeg"></div><br>  <a href="">Arsip</a> (sirkuit, papan, firmware, dll.) <br><br>  Pada arloji, Anda dapat menjalankan beberapa aplikasi bawaan.  Salah satunya, G'Mon (Generic Monitor), adalah alat pengembangan dan debugging utama.  Ini memungkinkan Anda untuk melihat dan mengedit isi memori dalam sel dan fragmen yang terpisah, beralih ke program, mengisi bagian RAM dengan byte yang ditentukan, dan memindahkan fragmen melintasi ruang alamat.  Versi monitor yang digunakan dalam arloji disederhanakan sehingga selain itu, EhBasic cocok dengan ROM.  Dia nyaris tidak masuk ke dalamnya, hanya ada ~ 100 byte gratis yang tersisa.  Penerjemah dibangun kembali sedemikian rupa sehingga dapat menggabungkan dengan inti.  Ini, pada gilirannya, berisi semua rutin inisialisasi, bekerja dengan antarmuka eksternal, serta hubungan semua perangkat lunak yang tersedia.  Dan aplikasi lain - menu utama. <br><br>  Sejumlah besar kernel ditempati oleh kode yang berinteraksi dengan LCD dari Nokia 5110 melalui protokol SPI yang diimplementasikan perangkat lunak melalui 6522. Subprogram WriteBYTE dan Command masing-masing mengirim data grafik dan perintah ke LCD.  Karena tidak ada mode teks perangkat keras, prosedur untuk mengirim karakter ke layar ditulis.  Generator karakter disimpan dalam ROM dan diwakili oleh dua tabel pencarian: satu untuk byte tinggi, yang lain untuk byte rendah.  Bersama-sama, mereka menunjukkan posisi absolut byte karakter awal dalam ROM.  Rutin Write harus dijalankan setelah kode ASCII ditulis ke baterai prosesor, dan juga digunakan sebagai koordinat X untuk tabel pencarian.  Rutin pertama menulis kode ASCII ke buffer layar dalam memori.  Kemudian dia mencari data ubin yang sesuai dan menetapkan pointer ke sana.  Menampilkan 8 byte berturut-turut dari pointer, ia memanggil CCheck subroutine.  Secara terprogram memeriksa posisi kursor, dan jika layar penuh, panggil subrutin Scroll, yang menggeser gambar dengan satu baris teks.  Karena penulis tidak menerapkan pembacaan dari pengontrol LCD, teks diindeks sesuai dengan posisi kursor dan ditulis ke buffer dalam memori.  Subroutine Scroll menampilkan tiga garis bawah dari buffer ke tiga garis teratas pada LCD, kemudian mengisi garis bawah dengan spasi.  Rutin yang tersisa untuk bekerja dengan LCD adalah CReturn.  Ini mencari melalui tabel pencarian untuk posisi awal dari baris berikutnya, dan jika baris saat ini bukan bagian bawah, itu meningkatkan posisi kursor per satu.  Jika intinya - panggilan prosedur Gulir, dan hanya kemudian berakhir. <br><br>  Keyboard disurvei melalui 6522 oleh subrutin GetKey.  Bunyinya baris matriks keyboard demi baris dan menulis byte ke memori.  Jika ada bit yang berubah menjadi nol, itu menentukan kode ASCII dari tombol yang ditekan melalui tabel pencarian.  Pada dasarnya, kode tidak mengandung siklus agar dapat bekerja secepat mungkin.  Subrutin untuk mengonversi bit yang diberikan ke indeks tidak menggunakan tabel pencarian, tetapi sebagai hasilnya, kode tersebut ternyata cukup besar dan tidak efisien. <br><br>  Video: <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Browser Anda tidak mendukung video HTML5. <source src="http://notartyoms-box.net/images/6502Watch/Demo.mp4" type="video/mp4"></video></div></div></div><br>  Penulis tidak lagi bekerja pada firmware ini, ia beralih ke proyek lain.  Dia berharap bahwa kode ini akan berguna bagi mereka yang ingin mengontrol LCD dari Nokia 5110 dari satu papan ke 6502. Rutinitas yang sesuai dapat dengan mudah ditransfer ke perangkat lunak lain.  Yang paling penting adalah Write, Write_NS, Command, WriteBYTE, LCDInit, LCDClear, CCheck, CCheck_NS, CReturn, Scroll, dan SETCursor.  Rutinitas lain yang bermanfaat adalah LCDHome dan WriteBMP.  Hal ini diperlukan untuk menempatkan variabel LCDCursor, GTmp, GTmp5 dan GTmp6 dalam memori, serta tabel Screen sepanjang 84 byte.  Selain itu, diperlukan tabel pencarian CRTbl, CTableX, dan CTableY, serta bitmap Char dan Char2 dengan semua ubin. <br><br>  Jika Anda ingin membuat kumpulan ubin lain, gunakan templat dari folder Aset.  Di GIMP, ekspor bitmap ke file data dalam format RGB (bukan RGBX).  Jangan memperhatikan file .pal, dan letakkan file .data di folder BitConvert dari arsip.  Jalankan Convert.sh filename.data untuk mendapatkan file FONT.bin, yang akan menjadi kumpulan ubin. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id448758/">https://habr.com/ru/post/id448758/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id448742/index.html">Kotak Pandora: kami menganalisis eksploitasi kerentanan WinRAR menggunakan contoh pekerjaan NeoQUEST-2019</a></li>
<li><a href="../id448744/index.html">Bagaimana cara mentransfer variabel dari fragmen ke aktivitas di Android?</a></li>
<li><a href="../id448746/index.html">Indeks dalam PostgreSQL - 7 (GIN)</a></li>
<li><a href="../id448750/index.html">Tentang satu kerentanan yang tidak</a></li>
<li><a href="../id448756/index.html">Latar belakang: mengapa Apple dan Qualcomm bertengkar, dan kemudian berdamai</a></li>
<li><a href="../id448760/index.html">Pengembangan di cloud, keamanan informasi dan data pribadi: intisari untuk dibaca pada akhir pekan dari 1cloud</a></li>
<li><a href="../id448762/index.html">Kerusuhan di Picaba. Pengguna secara besar-besaran pergi ke Reddit</a></li>
<li><a href="../id448764/index.html">Jam tangan di ATtiny13</a></li>
<li><a href="../id448766/index.html">Buat monorepositori dengan ruang kerja lerna & benang</a></li>
<li><a href="../id448768/index.html">Kontrol pencahayaan multi-level: ketahanan solusi dan produk</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>