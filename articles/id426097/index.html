<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🚒 ✝️ 📹 Arduino Proyek "Mesin Robot RoboCar4W" 🌙 👧 ⏰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Anda mengerti, "editor itu menjelaskan," itu harus menghibur, segar, penuh petualangan yang menarik ... sehingga pembaca tidak bisa lepas. 
 I. Ilf, E...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arduino Proyek "Mesin Robot RoboCar4W"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426097/"><p>  <em>Anda mengerti, "editor itu menjelaskan," itu harus menghibur, segar, penuh petualangan yang menarik ... sehingga pembaca tidak bisa lepas.</em> <br>  I. Ilf, E. Petrov <em>"Bagaimana diciptakan Robinson"</em> . </p><br><p>  Memulai dengan Arduino, seperti halnya dengan platform perangkat lunak atau perangkat keras lainnya, selalu lebih menarik dari beberapa proyek nyata.  Pada saat yang sama, programmer menulis kode yang menampilkan "Hello, world", para arduinists berkedip LED.  Dan semua orang bahagia sebagai anak-anak. </p><br><p>  Saya memutuskan untuk memulai dengan proyek lanjutan, termasuk dengan harapan rahasia untuk merobek generasi muda dari Counter-Strike (gagal). </p><br><p>  Seperti yang bisa Anda tebak dari nama RoboCar4W, proyek pertama adalah mobil robot roda empat.  Mulai bekerja, saya sudah memiliki pengalaman pemrograman, saya pernah tahu cara menyolder untuk waktu yang lama, tetapi saya bahkan tidak tahu pinout Arduino sama sekali dan tidak membaca dokumentasi sama sekali.  Saya mempelajari semua kebijaksanaan dalam permainan dan Google untuk membantu. </p><a name="habracut"></a><br><p>  Karena proyek itu sendiri pada dasarnya bukan hal baru, deskripsi seperti dalam jaringan sudah cukup, semua komponen diketahui, tidak ada kejutan yang diharapkan.  Oleh karena itu, idenya dirumuskan dalam istilah yang paling umum dan tujuan utamanya adalah untuk membenamkan diri dalam "dunia benda" menggunakan Arduino, sebagai platform untuk prototyping cepat.  Dalam karya ini, mungkin seseorang mengenali dirinya di awal perjalanan. </p><br><p>  Semua perangkat keras dibeli di ebay, dan dari pengalaman saya sendiri, saya ingin mengatakan bahwa lebih mudah untuk membeli starter kit segera (cari dalam kata-kata dari Starter Kit Arduino), daripada merakitnya secara rinci.  Ya, dan semuanya datang bersamaan.  Diputuskan untuk tidak meremehkan, untuk membeli sasis normal, roda normal, motor normal, sehingga itu "mahal". </p><br><p>  Rahasia utama untuk pembelian yang sukses di eBay adalah membeli dari penjual berperingkat teratas dan membaca deskripsi produk dengan cermat.  Ada banyak artikel tentang ini di Internet. </p><br><p>  Papan Arduino mana yang harus dipilih? </p><br><p>  Saya mengambil Arduino UNO, banyak proyek dengan deskripsi untuk itu.  Tetapi sekarang saya akan menggunakan Arduino Mega 2560, ia memiliki lebih banyak keluaran digital dan analog dan kompatibilitas penuh pada proyek-proyek dengan UNO. </p><br><h1 id="obschee-opisanie-proekta">  Deskripsi umum proyek </h1><br><p>  Dalam dunia pengembangan perangkat lunak, ini juga disebut "persyaratan sistem." </p><br><p>  Gagasan proyek adalah sebagai berikut.  Versi pertama dari mesin robot yang disebut RoboCar4W harus melakukan tindakan sederhana: </p><br><ul><li>  bergerak maju, mundur, lakukan putaran </li><li>  mengukur jarak ke rintangan </li><li>  dapat secara otomatis mengatasi kendala di depan. </li></ul><br><p>  Versi kedua dari mesin harus dikontrol secara manual melalui bluetooth dari ponsel Android. </p><br><p>  Sehingga Anda lebih baik bekerja di sini adalah seluruh proyek RoboCar4W akhir dirakit (di sini tanpa bluetooth). </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/457/929/cc8/457929cc8554ef727654f53704ece195.jpg" alt="Arduino RoboCar4W"></p><br><p>  Berikut adalah video uji coba laut. </p><br><p>  Dalam video pertama, RoboCar4W drive secara otomatis dengan penghindaran kendala pada dua versi "firmware" yang berbeda, yaitu.  sketsa, oleh karena itu, jika seseorang adalah yang paling tajam dan memperhatikan bahwa perilaku robot dalam episode yang berbeda sedikit berbeda. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/a05/27c/f11/a0527cf11325d83a2b91826412b151b9.jpg" alt="Robot mobil RoboCar4W"></a> </p><br><p>  Dalam video kedua, RoboCar4W bergerak dengan bantuan perintah yang dikirimkan oleh "driver" melalui Bluetooth dari ponsel di bawah Android.  "Bluetooth RC Car" diinstal di telepon.  Terlebih lagi, jika ada rintangan di depan, robot berhenti, mis.  menabrak sesuatu tidak akan berfungsi (namun, ada tombol "rahasia" yang menonaktifkan mode aman). </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/173/997/d9c/173997d9c4f497310ab582b11007d468.jpg" alt="Robot mobil RoboCar4W"></a> </p><br><p>  Dalam video ketiga, RoboCar4W menunjukkan program gerakan demo yang diprogram sebelumnya secara bergantian.  Program demo diaktifkan berdasarkan perintah dari ponsel Android yang sama.  Robot hanya naik untuk sementara waktu dan berbelok. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/820/a73/9f5/820a739f5e40ca959f0c441e53552e4d.jpg" alt="Robot mobil RoboCar4W"></a> </p><br><h1 id="algoritm-upravleniya-dvizheniem">  Algoritma kontrol gerak </h1><br><p>  Adalah suatu kesalahan untuk memanggil metode kami "algoritme penghindaran rintangan" atau "pencarian jalur".  Ini adalah disiplin matematika yang terpisah, matematika murni.  Jika Anda benar-benar menyukai matematika, maka google frasa ini, Anda akan diberikan membaca selama enam bulan. </p><br><p>  Sementara itu, kami lebih tertarik pada hal-hal yang lebih mudah.  Oleh karena itu, kami akan menyebutnya sederhana - algoritma kontrol gerak robot 4-roda.  Tentu saja, kita berbicara tentang kontrol otomatis tanpa campur tangan manusia. </p><br><p>  Berikut ini adalah algoritma sederhana yang dituliskan dalam kata-kata, untuk algoritma yang lebih kompleks diperlukan (apakah Anda mau atau tidak) untuk membuat diagram blok. </p><br><p>  Sekarang pada saat yang sama lihat kode sumber untuk sketsa <a href="">RoboCar4W-1.ino</a> . </p><br><ol><li>  Kami mengukur jarak ke hambatan di depan. </li><li> Jika jarak yang diukur ini kurang dari nilai <code>DST_TRH_BACK</code> (kependekan dari jarak ambang batas), maka kami berhenti dan bergerak mundur sambil memutar.  Arah rotasi dipilih sebagai berikut: jika sebelumnya Anda belok kiri, lalu belok kanan dan sebaliknya. </li><li>  Jika jarak yang diukur lebih besar dari <code>DST_TRH_BACK</code> , tetapi kurang dari <code>DST_TRH_TURN</code> , maka cukup putar.  Arah rotasi dipilih secara acak. </li><li>  Jika Anda jauh dari rintangan, maka silakan saja. </li><li>  Kami ulangi lagi. </li></ol><br><p>  Apa bagusnya kita punya 4 roda dan all-wheel drive?  Kami dapat melakukan (program) beberapa jenis belokan: </p><br><ul><li>  Rotasi halus.  Semua roda berputar, tetapi roda di satu sisi berputar lebih cepat. </li><li>  Belokan tajam.  Roda hanya berputar di satu sisi. </li><li>  Putar balik ke tempatnya.  Seperti traktor, roda di satu sisi berputar ke belakang dan yang lain ke depan. </li></ul><br><p>  Dalam versi kedua program, ketika mengendalikan dari ponsel Android, safe mode, ketika robot mencoba untuk mencegah tabrakan frontal, dapat dimatikan jika program ditekan dua kali <br><img src="https://habrastorage.org/getpro/habr/post_images/2d3/256/454/2d3256454e390ed508f62d212ffb1d15.jpg" alt="Tombol"></p><br><p>  dan dihidupkan kembali dengan menekan sekali. </p><br><p>  <em>Catatan Penting</em> .  Semua logika berada di bawah kendali Arduino.  Android di sini bertindak seperti konsol game (tanpa otak) dari konsol, tugasnya adalah mentransmisikan tombol secara bodoh (mis. Perintah) melalui Bluetooth ke Arduino RoboCar4W. </p><br><h1 id="komponenty">  Komponen </h1><br><p>  Awalnya, alat berat ini termasuk servo drive yang mengubah pengukur jarak ultrasonik sudut tertentu untuk pengukuran dalam tiga arah.  Tetapi selama pengujian, karena penanganan yang ceroboh, servo terbakar, jadi sekarang sensor jarak hanya dengan kaku dipasang di depan kasing. </p><br><p>  Tidak ada garis perak, tetapi sketsa menjadi sedikit lebih mudah. </p><br><p>  Untuk masa depan, beli servo yang paling sederhana dan termurah, tenaga khusus, kecepatan dan ketepatan rotasi pada sudut tertentu tidak diperlukan, dan ternyata cukup mudah untuk menonaktifkan servo, seperti yang terjadi.  SG90 senilai $ 2 sangat cocok. </p><br><p>  Jadi komponen dari proyek RoboCar4W, deskripsi dalam bahasa Inggris diberikan untuk memudahkan pencarian di ebay dan sejenisnya: </p><br><ul><li>  Arduino UNO R3 </li><li>  Sasis siap pakai 4 Drive Platform Mobile Robot Platform Chassis Mobil Pintar Arduino Kompatibel </li><li>  Motor DC dengan rotasi di kedua arah - 4 pcs. </li><li>  Roda - 4 pcs. </li><li>  Board untuk mengendalikan 4 motor DC Motor Drive Shield L293D </li><li>  Ultrasonic Distance Meter HC-SR04 Modul Pengukur Jarak Modul Ultrasonik </li><li>  Baterai Ni-MH 1.2 V - 8 pcs. </li><li>  Dudukan kotak plastik untuk baterai, Dudukan kotak baterai 4 Baterai AA - 2 pcs. </li><li>  Jenis baterai "Krona" 8,4 V - 1 pc. </li><li>  Sakelar sakelar opsional - sakelar daya </li></ul><br><p>  Chassis, motor DC dan roda dibeli langsung di kit dan bahkan dengan instruksi perakitan. </p><br><h1 id="raspinovka">  Pinout </h1><br><p>  Input analog dapat digunakan sebagai pin digital port I / O.  Pin Arduino yang sesuai dengan input analog diberi nomor 14 hingga 19. Ini hanya berlaku untuk pin Arduino, bukan nomor pin fisik mikrokontroler Atmega. </p><br><p>  Anda tidak perlu menggambar, Anda cukup meletakkan semuanya di atas meja.  Saya melakukannya dengan cara ini. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/504/d24/fff/504d24fff6bdc78120e1a28a39848967.png" alt="Pinout"></p><br><p>  Pin D4, D7, D8, D12 akan sibuk jika motor DC atau motor stepper digunakan. </p><br><p>  Pin D9 (kontrol Servo # 1), D10 (kontrol Servo # 2) hanya akan digunakan jika servomotor digunakan. </p><br><p>  Pin Arduino tidak menempati pin Arduino untuk mengendalikan Motor Drive Shield L293D. </p><br><p>  Pin daya 3,3 V, 5 V, dan ground digandakan pada Motor Drive Shield dalam jumlah yang cukup.  Karena itu, tidak perlu khawatir tentang kekurangan mereka. </p><br><p>  Jika Anda masih ingin menggambar dengan indah, maka program Fritzing gratis akan membantu Anda. </p><br><h1 id="pitanie">  Nutrisi </h1><br><p>  Ini adalah poin kedua yang sangat penting.  Banyak tergantung pada nutrisi.  Sebagai contoh, motor servo ketika memutar poros pada sudut tertentu mulai mengkonsumsi banyak arus.  Pada saat yang sama, jika servo ini ditenagai oleh Arduino 5 V, maka ada "drawdown" pada tegangan dan sisa rangkaian mulai gagal, dan Arduino bahkan dapat reboot pada waktu yang sama. </p><br><p>  Bagaimanapun, jika Anda menggunakan motor dalam pesawat, maka Motor Drive Shield diperlukan (atau sirkuit serupa). </p><br><p>  Jadi, kami memiliki 4 motor DC, drive servo, papan Arduino itu sendiri, dan beberapa sensor.  Motor adalah yang paling rakus, tetapi sensor dapat berhasil didukung dari konektor papan Arduino itu sendiri, jadi semuanya sederhana dengan mereka.  Untuk kenyamanan, saya telah mengurangi seluruh ekonomi dalam satu tabel. </p><br><table><thead><tr><th></th><th>  Tegangan yang direkomendasikan atau tipikal.  Konsumsi saat ini </th><th>  Tegangan maksimum </th><th>  Apa yang direncanakan untuk diberi makan </th><th>  Catatan </th></tr></thead><tbody><tr><td>  Arduino UNO R3 Board </td><td>  7 - 12V, 200mA (rata-rata) </td><td>  6 - 20 </td><td>  "Krone 9V" Li-ion 650mAh, 8.4V </td><td>  Konektor Tengah </td></tr><tr><td>  Servo Motor MG-995 </td><td>  5-6 V, 0,1 - 0,3A (puncak) </td><td>  4.8 - 7.2 </td><td>  Baterai (5) pcs.  Ni-Mh 1.2V = 6V </td><td>  Makanan hanya dari sumber yang terpisah.  Jika Anda berkuasa bersama Arduino, maka semuanya akan gagal.  Tegangan baterai Ni-Mh 4pcs  * 1.2V = 4.8V tidak cukup.  Beberapa berpendapat bahwa servo ini tidak boleh digunakan pada 6 volt hanya 4,8 </td></tr><tr><td>  Motor DC (4 pcs.) </td><td>  6 - 8V, arus dari 70mA hingga 250mA </td><td>  3 - 12 </td><td>  baterai (5 + 3) pcs.  Ni-Mh 1.2V = 9.6V </td><td>  Anda tidak akan dapat menghidupkan mesin secara normal dari baterai 9V, jadi jangan buang waktu (dan baterai)! </td></tr><tr><td>  Pelindung Drive Motor L293D </td><td>  tidak wajib </td><td>  4,5 - 36 </td><td>  tidak wajib </td><td></td></tr><tr><td>  Modul Bluetooth HC-0506 </td><td>  3,3 V, 50 mA </td><td>  1.8-3.6 </td><td>  Dengan pin 3.3V papan Arduino </td><td></td></tr><tr><td>  Pengukur Jarak Ultrasonik HC-SR04 </td><td>  5 V, 2 mA </td><td>  5 </td><td>  Dengan pin papan Arduino 5V </td><td></td></tr></tbody></table><br><p>  Saya tidak memiliki konverter tegangan DC / DC.  Krona 9V bukan sumber kekuatan yang sangat baik, saya baru saja memilikinya. </p><br><p>  Tetapi saya menolak untuk menggunakan baterai berkapasitas tinggi Li-ion.  Pertama, karena biayanya yang tinggi, dan kedua, dalam belanja online Cina mudah untuk menjadi palsu.  Lebih tepatnya, bukan "mudah", tetapi "selalu."  Selain itu, Li-ion membutuhkan penanganan khusus, dan itu tidak aman. </p><br><p>  Jadi, seperti yang kita lihat dari tabel, kita membutuhkan 3 sumber daya independen: </p><br><ul><li>  Untuk papan dan sensor Arduino. </li><li>  Untuk servomotor. </li><li>  Untuk 4 motor DC. </li></ul><br><p>  Di mana saya bisa mendapatkan begitu banyak?  Bagaimanapun, papan Arduino itu sendiri harus diberdayakan dari sumber yang terpisah, seperti  ketika tegangan “sags”, misalnya, dari menyalakan motor, papan mungkin restart atau gagal.  Di sini kita menggunakan baterai faktor bentuk Krona 9V, dan konektor yang akan dihubungkan ke Arduino harus dengan "plus di tengah". </p><br><p>  Untuk motor servomotor dan 4 DC, Anda dapat melakukannya dengan satu sumber daya.  Satu-satunya masalah adalah servomotor dirancang untuk tegangan 5-6V (maksimum 7.2V) dan arus 100-300mA (puncak), dan motor DC membutuhkan 6-8V (maksimum 12V) dan arus 250mA. </p><br><p>  Untuk mengatasi masalah ini, ada konverter DC-DC, tetapi saya tidak memilikinya.  Akibatnya, saya menerapkan diagram kabel "eksklusif" (tanpa sirkuit elektronik step-down, hanya tegangan dan arus yang ramah lingkungan!): Saya menghubungkan 8 pcs.  Baterai 1.2V secara seri dan membuat keran di tempat yang tepat, seperti yang ditunjukkan pada diagram. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f13/3f4/b82/f133f4b82dc88cf2de958804735c73b3.png" alt="Nutrisi"></p><br><p>  6V pergi ke servomotor, dan 9,6 pergi ke motor DC.  Jelas bahwa baterai 1-5 akan mengalami peningkatan beban. </p><br><p>  Untuk mengendalikan motor servo dan DC, saya menggunakan Motor Drive Shield 4-channel berdasarkan chip L293D. </p><br><h1 id="sborka">  Majelis </h1><br><p>  Merakit sasis jadi adalah masalah kecil.  Tetapi jangan berpikir bahwa tanpa doping Anda akan segera mendapatkan semuanya.  Karena itu, siapkan file. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/058/f4a/d8b/058f4ad8b7a7b76295d5295dcd63afba.jpg" alt="Majelis"></p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/5bb/d2d/32c/5bbd2d32c5caa7a97d8201bddabae96c.jpg" alt="Majelis"></p><br><p>  Tidak mungkin untuk menghubungkan beberapa motor secara normal, motor servo atau stepper langsung ke Arduino.  Karena pin (kesimpulan) dari Arduino adalah arus rendah.  Untuk mengatasi masalah tersebut, ada modul kontrol drive tambahan - Motor Drive Shield berdasarkan chip L293D, yang merupakan salah satu chip paling umum yang dirancang untuk tujuan ini.  Chip L293D juga dikenal sebagai H-Bridge. </p><br><p>  Saya menggunakan papan yang menyediakan 4 saluran untuk menghubungkan pada dua chip L293D dan register geser.  Dibeli di eBay seharga $ 5. </p><br><p>  Papan modul kontrol drive ini memiliki spesifikasi sebagai berikut. </p><br><ul><li>  L293D Motor Drive Shield kompatibel dengan Arduino Mega 1280 dan 2560, UNO, Duemilanove, Diecimila </li><li>  Kontrol 4 saluran </li><li>  motor bertenaga dari 4.5V ke 36V </li><li>  arus muat yang diijinkan 600mA per saluran, arus puncak - 1.2A </li><li>  perlindungan overheat </li><li>  2 antarmuka dengan timer Arduino yang tepat (tidak akan ada "jitter") untuk menghubungkan servomotors ke 5V, jika tegangan suplai perlu lebih tinggi, maka koneksi daya harus diperbaiki seperti dijelaskan di bawah ini </li><li>  4 motor pengumpul DC dua arah atau 2 stepper dan 2 servomotors dapat dikontrol secara bersamaan </li><li>  4 motor DC dua arah masing-masing terhubung ke bus 8-bit untuk pemilihan kecepatan individu </li><li>  koneksi hingga 2 langkah drive (unipolar atau bipolar), dengan satu koil, koil ganda atau langkah bolak-balik </li><li>  konektor untuk menghubungkan sumber eksternal untuk catu daya terpisah dari logika kontrol dan motor </li><li>  RESET Tombol Arduino </li><li>  Perpustakaan AFMotor Adafruit digunakan untuk manajemen. </li></ul><br><p>  Motor Drive Shield membutuhkan sedikit penyempurnaan agar Anda dapat menghubungkan apa pun setelahnya.  Saya menyolder konektor yang diperlukan di atas, inilah yang terjadi. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/470/943/060/47094306049d3d9ff9dbe393bd203b1a.jpg" alt="Pelindung drive motor"></p><br><p>  Motor dapat dihubungkan ke catu daya tambahan relatif ke papan Arduino.  Saya merekomendasikan metode koneksi ini saja.  Untuk melakukan ini, hapus, buka jumper, seperti yang ditunjukkan pada gambar. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a18/6c0/d8b/a186c0d8b3c77c02a7e260411eb1cbd9.jpg" alt="4-channel L293D Motor Drive Shield.  Jumper untuk daya eksternal"></p><br><p>  Dalam hal ini, Arduino diberi daya dan motor diberi daya secara independen satu sama lain. </p><br><p>  LED pada pelindung motor menyala ketika ada daya untuk motor, jika tidak menyala, maka motor tidak akan bekerja. </p><br><p>  Masalah baru </p><br><p>  Posisi power jumper tidak berlaku untuk servos, mereka masih akan ditenagai oleh Arduino 5V.  Karena servomotors biasanya mengkonsumsi banyak arus dan jika daya tidak mencukupi, maka seluruh perangkat mulai gagal, dalam kasus "terbaik", hanya drive servo yang akan gagal - itu tidak akan berputar pada sudut yang ditetapkan, atau sepanjang waktu sebelum setiap belokan pertama berputar pada 0 derajat, dan hanya kemudian pada sudut tertentu (dan jika Anda bisa mengikuti).  Oleh karena itu, saya merekomendasikan untuk menyalakan servo juga dari sumber daya tambahan.  Untuk melakukan ini, Anda harus sedikit mengulang diagram koneksi: gigit kabel plus (biasanya merah) dari konektor standar dan sambungkan ke plus sumber daya secara langsung. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/d2f/6ea/fa1/d2f6eafa1d5721a6e36a38429aa4ad9e.jpg" alt="Finalisasi untuk menghubungkan kekuatan servomotor"></p><br><p>  Saat menghubungkan Motor Drive Shield, pin analog tidak digunakan.  Pin digital 2, 13 tidak digunakan. </p><br><p>  Pin berikut hanya digunakan jika motor DC atau motor stepper yang sesuai terhubung dan digunakan: </p><br><ul><li>  D11: Motor DC # 1 / Stepper # 1 (aktivasi dan kontrol kecepatan) </li><li>  D3: Motor DC # 2 / Stepper # 1 (aktivasi dan kontrol kecepatan) </li><li>  D5: Motor DC # 3 / Stepper # 2 (aktivasi dan kontrol kecepatan) </li><li>  D6: Motor DC # 4 / Stepper # 2 (aktivasi dan kontrol kecepatan) </li></ul><br><p>  Pin ini akan sibuk jika DC / steppers digunakan: D4, D7, D8, D12. </p><br><p>  Pin berikut akan ditempati hanya jika servomotors yang sesuai digunakan: </p><br><ul><li>  D9: Kontrol Servo # 1 </li><li>  D10: Kontrol Servo # 2 </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/27f/dd4/746/27fdd474619f83391b6c486a576a31fa.png" alt="Tabel koneksi"></p><br><p>  Untuk memulai dengan Motor Drive Shield, Anda perlu mengunduh dan menginstal perpustakaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AFMotor Adafruit</a> . </p><br><p>  Contoh kode untuk mengendalikan motor: </p><br><pre> <code class="hljs objectivec"><span class="hljs-meta"><span class="hljs-meta">#include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;AFMotor.h&gt;</span></span></span><span class="hljs-meta"> //   Adafruit #include </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Servo.h&gt;</span></span></span><span class="hljs-meta"> //     AF_DCMotor motor(1); //   ,    DC    Motor Shiled , ,  frequency Servo servo; //    servo.attach(10); //     9  10 (    Motor Shiled) motor.setSpeed(speed); //   DC   0 ()  255 ( ) motor.run(RELEASE); // DC   motor.run(FORWARD); // DC   motor.run(BACKWARD); // DC   servo.write(90); //    90 .</span></span></code> </pre> <br><p>  Motor DC mulai berputar hanya ketika menunjukkan kecepatan lebih besar dari 100, jika kurang, itu hanya berdengung.  Anda harus menentukan kecepatan minimum motor Anda secara eksperimental. </p><br><p>  Untuk motor yang terhubung ke M1 dan M2, Anda dapat mengatur frekuensi: MOTOR12_64KHZ, MOTOR12_8KHZ, MOTOR12_2KHZ, MOTOR12_1KHZ.  Kecepatan rotasi tertinggi dicapai pada 64KHz, frekuensi ini akan terdengar, frekuensi dan kecepatan lebih rendah pada 1KHz tetapi juga menggunakan lebih sedikit energi.  Motor 3 dan 4 selalu berjalan pada 1KHz, nilai-nilai lain diabaikan.  Standarnya adalah 1KHz di mana-mana. </p><br><p>  Setelah itu, perlu dilakukan uji motor.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sketsa untuk pengujian dapat diambil di sini</a> .  Di awal sketsa, ubah nomor motor dalam satu baris (atau garis) dari jenis: </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">AF_DCMotor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">…</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p>  Sketsa untuk beberapa waktu memutar motor ke depan di sepanjang pergerakan robot, dan kemudian kembali.  Perhatikan baik-baik untuk melihat apakah motor berputar ke arah itu, dan ubah polaritas sambungan jika perlu. </p><br><p>  Kami menghubungkan meteran jarak ultrasonik HC-SR04 Modul Ultrasonik.  Pinout: </p><br><ul><li>  Vcc </li><li>  Trig (T) </li><li>  Echo (r) </li><li>  GND </li></ul><br><p>  Waktu yang dihabiskan oleh pencari jangkauan ultrasonik untuk pengukuran (ditentukan secara empiris): </p><br><ul><li>  maksimum 240 ms jika jaraknya terlalu panjang (di luar jangkauan) </li><li>  setidaknya 1 ms jika jaraknya terlalu pendek </li><li>  jarak 1,5 m ditentukan dalam sekitar 10 ms </li></ul><br><p><img src="https://habrastorage.org/getpro/habr/post_images/de0/071/18e/de007118e81cee628722e426d8e83800.jpg" alt="Pengukur Jarak Ultrasonik HC-SR04 Modul Ultrasonik"></p><br><p>  Sensor pencari jarak ultrasonik, karena sifat fisiknya, dan bukan karena China, dalam beberapa kasus buruk menentukan jarak ke hambatan: </p><br><ul><li>  jika hambatannya kompleks, maka USG dipantulkan pada sudut yang berbeda dan sensor salah, </li><li>  ultrasound diserap dengan sempurna (mis. tidak tercermin) oleh furnitur atau mainan berlapis kain, dan sensor percaya bahwa tidak ada apa-apa di depannya. </li></ul><br><p>  Dengan kata lain, untuk pengintai ultrasonik, idealnya akan sangat baik jika semua hambatan dalam bentuk bidang padat yang tegak lurus dengan arah radiasi ultrasonik. </p><br><p>  Beberapa masalah dapat diselesaikan dengan sensor jarak inframerah.  Tapi itu juga tidak sempurna: </p><br><ul><li>  rentang maksimum kecil dibandingkan dengan ultrasound: 0,3-0,8 m versus 4 m </li><li>  jarak minimum yang besar dibandingkan dengan ultrasound: 10 cm vs 2 cm </li><li>  ketergantungan sensitivitas sensor pada pencahayaan keseluruhan </li></ul><br><p>  Meskipun jika Anda memasang pengukur jarak ini secara berpasangan, maka efisiensi pekerjaan mereka akan meningkat secara signifikan. </p><br><h1 id="podklyuchaem-bluetooth-hc-05">  Hubungkan Bluetooth HC-05 </h1><br><p>  Seperti yang dapat Anda lihat dari lembar data pin utama "telanjang" HC-05: </p><br><ul><li>  Transmisi TX (pin 1) </li><li>  Penerimaan RX (pin 2) </li><li>  Catu daya 3.3V (pin 12) 3.3V </li><li>  Tanah GND (pin 13) </li><li>  Indikator mode PIO8 (pin 31) </li><li>  PIO9 (pin 32) status koneksi, jika koneksi dibuat, output akan tinggi </li><li>  PIO11 (pin 34) untuk mengaktifkan mode perintah AT </li></ul><br><p>  Modul kami disolder ke Breakout / Base Board, di mana sudah ada pembagi tegangan, sehingga memiliki rentang tegangan kerja dari 3,3V hingga 6V. </p><br><p>  Kami menghubungkan unit modul Bluetooth kami: </p><br><ul><li>  Arduino (TX) - (RX) HC-05 </li><li>  Arduino (RX) - (TX) HC-05 </li><li>  Arduino (+ 5V) - (VCC) Bluetooth </li><li>  Arduino (GND) - (GND) Bluetooth </li><li>  LED, pin KUNCI tidak digunakan </li></ul><br><p>  Setelah daya disuplai ke modul Bluetooth HC-05, LED di atasnya akan berkedip, yang berarti bluetooth berfungsi. </p><br><p>  Nyalakan bluetooth di ponsel, cari perangkat dengan nama HC-05 dan hubungkan, kata sandi 1234. </p><br><p>  Untuk pengujian, isi sketsa sederhana dalam Arduino: </p><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">int</span></span> count = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-type"><span class="hljs-type">void</span></span> setup() { <span class="hljs-type"><span class="hljs-type">Serial</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>(<span class="hljs-number"><span class="hljs-number">9600</span></span>); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println("Test Arduino + Bluetooth. http://localhost"); } <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span>() { count++; <span class="hljs-type"><span class="hljs-type">Serial</span></span>.print("Count = "); <span class="hljs-type"><span class="hljs-type">Serial</span></span>.println(count); delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>); }</code> </pre> <br><p>  Di ponsel Android, instal Terminal Bluetooth.  Kami terhubung ke perangkat HC-05 dan kami mengamati pada layar ponsel merayap garis dengan penghitung yang meningkat. </p><br><p>  Agar modul dapat menerima perintah AT, Anda harus memasukkannya ke mode yang sesuai - untuk ini Anda perlu mengatur output KUNCI (PIO11) menjadi logis 1. Pada beberapa Papan Breakout / Basis, alih-alih output KUNCI, ada output EN (ENABLE), yang mungkin atau tidak mungkin untuk output. disolder ke pin pada chip itu sendiri.  Ini hanya berlaku untuk chip HC05.  Itu hanya output terminal EN saya tidak disolder di mana pun.  Oleh karena itu, dapat disolder dengan kawat terpisah ke terminal KUNCI (PIO11) chip.  Atau, selama operasi, untuk menempatkan HC05 ke mode AT-command, hubung singkat output chip KEY (PIO11) ke output daya Vcc selama beberapa detik.  Untuk HC06, pin KUNCI tidak diperlukan. </p><br><h1 id="programmnoe-obespechenie">  Perangkat lunak </h1><br><p>  Catatan  Setiap kali sebelum mengunduh program ke Arduino, pastikan modul Bluetooth tidak terhubung ke Arduino.  Ini akan menyebabkan masalah isi sketsa.  Putuskan sambungan daya dari modul Bluetooth atau kabel yang menghubungkan pin modul Arduino dan RX, TX. </p><br><p>  Di awal sketsa, ubah nomor motor pada baris jenis: </p><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">AF_DCMotor </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">motor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">…</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br><p>  <a href="">Buat sketsa untuk mode otomatis dengan unduhan penghindaran kendala di sini</a> . </p><br><p>  Jika Anda mengganti string </p><br><pre> <code class="hljs lua"><span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> <span class="hljs-built_in"><span class="hljs-built_in">debug</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br><p>  pada </p><br><pre> <code class="hljs lua"><span class="hljs-built_in"><span class="hljs-built_in">byte</span></span> <span class="hljs-built_in"><span class="hljs-built_in">debug</span></span> = <span class="hljs-number"><span class="hljs-number">10</span></span>;</code> </pre> <br><p>  Ini akan mengaktifkan mode debug. </p><br><p>  Dalam mode debugging, RoboCar4W tidak akan benar-benar mengemudi atau memutar.  Sebaliknya, aktifkan monitor port serial dan di sana Anda akan melihat bagaimana "drive" secara virtual.  Alih-alih drive yang sebenarnya maju, string "Maju" akan ditulis ke monitor port serial, bukannya mundur dengan belokan ke kiri, "Putar Kembali L (eft)", dll.  Sensor jarak ultrasonik juga tidak melakukan apa-apa, sebaliknya jarak ke rintangan dihasilkan secara terprogram dan acak. </p><br><p>  Mode debugging ini nyaman jika Anda mengubah algoritma gerakan dan alih-alih menangkap mesin tik di sekitar ruangan, cukup periksa semuanya saat idle. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sketsa Bluetooth untuk pengunduhan kontrol manual di sini</a> .  Sketsa tidak memiliki mode debug, karena semuanya transparan di sana.  Anda menekan tombol - robot berjalan. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Program untuk Adnroid Bluetooth RC Car</a> . </p><br><p>  Yah, itu dia!  Semoga perjalananmu menyenangkan! </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/32b/8dc/98f/32b8dc98ff44592014df2bf2f736f9d5.jpg" alt="Semoga perjalananmu menyenangkan!"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id426097/">https://habr.com/ru/post/id426097/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id426087/index.html">Menandatangani PDF dalam JS dan menempelkan tanda tangan di C # menggunakan Crypto PRO</a></li>
<li><a href="../id426089/index.html">Startup Amerika mengembangkan kacamata-AdBlock</a></li>
<li><a href="../id426091/index.html">8 cloud log analyzer untuk mengevaluasi lingkungan kerja</a></li>
<li><a href="../id426093/index.html">Monetisasi data pengguna vs iklan dalam aplikasi: pro dan kontra</a></li>
<li><a href="../id426095/index.html">Buka webinar "Bagaimana tidak menulis dengan Python"</a></li>
<li><a href="../id426099/index.html">Berita Typegram</a></li>
<li><a href="../id426101/index.html">Integritas Data dalam Arsitektur Layanan Mikro - Cara Memastikannya Tanpa Transaksi Terdistribusi dan Konektivitas yang Kuat</a></li>
<li><a href="../id426103/index.html">Webinar "Apakah Anda Membutuhkan Kubernetes" 15 Oktober pukul 19:00</a></li>
<li><a href="../id426105/index.html">Tangkapan saya dalam seminggu</a></li>
<li><a href="../id426111/index.html">Google masih akan meluncurkan layanan pencarian yang disensor di Cina</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>