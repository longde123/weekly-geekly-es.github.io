<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™ğŸ¾ ğŸª ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨ğŸ» Unityä¸­çš„GPUå…‰çº¿è·Ÿè¸ª-ç¬¬3éƒ¨åˆ† ğŸ¤  ğŸ¤¡ âš½ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[ ç¬¬ä¸€éƒ¨åˆ†å’Œç¬¬äºŒéƒ¨åˆ†ã€‚] 


 ä»Šå¤©æˆ‘ä»¬å°†å–å¾—é‡å¤§é£è·ƒã€‚ æˆ‘ä»¬å°†æ‘†è„±å…ˆå‰çƒå½¢çš„ç»“æ„å’Œä¹‹å‰è¿½è¸ªçš„æ— é™å¹³é¢ï¼Œå¹¶æ·»åŠ ä¸‰è§’å½¢-ç°ä»£è®¡ç®—æœºå›¾å½¢çš„å…¨éƒ¨å®è´¨ï¼Œè¿™æ˜¯æ‰€æœ‰è™šæ‹Ÿä¸–ç•Œæ‰€ç»„æˆçš„å…ƒç´ ã€‚ å¦‚æœæ‚¨æƒ³ç»§ç»­ä¸Šæ¬¡å®Œæˆçš„å·¥ä½œï¼Œè¯·ä½¿ç”¨ç¬¬2éƒ¨åˆ†ä¸­çš„ä»£ç  ã€‚ æˆ‘ä»¬ä»Šå¤©å°†è¦å®Œæˆçš„ä»£ç å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ° ã€‚ è®©æˆ‘ä»¬å¼€å§‹å§ï¼ 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unityä¸­çš„GPUå…‰çº¿è·Ÿè¸ª-ç¬¬3éƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450308/">  [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€</a>éƒ¨åˆ†å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬äºŒ</a>éƒ¨åˆ†ã€‚] <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9f/a8a/4f2/f9fa8a4f2a79b8c394636de6a128d0d5.png"></div><br> ä»Šå¤©æˆ‘ä»¬å°†å–å¾—é‡å¤§é£è·ƒã€‚ æˆ‘ä»¬å°†æ‘†è„±å…ˆå‰çƒå½¢çš„ç»“æ„å’Œä¹‹å‰è¿½è¸ªçš„æ— é™å¹³é¢ï¼Œå¹¶æ·»åŠ ä¸‰è§’å½¢-ç°ä»£è®¡ç®—æœºå›¾å½¢çš„å…¨éƒ¨å®è´¨ï¼Œè¿™æ˜¯æ‰€æœ‰è™šæ‹Ÿä¸–ç•Œæ‰€ç»„æˆçš„å…ƒç´ ã€‚ å¦‚æœæ‚¨æƒ³ç»§ç»­ä¸Šæ¬¡å®Œæˆçš„å·¥ä½œï¼Œè¯·ä½¿ç”¨ç¬¬<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2éƒ¨åˆ†ä¸­</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»£ç </a> ã€‚ æˆ‘ä»¬ä»Šå¤©å°†è¦å®Œæˆçš„ä»£ç å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨è¿™é‡Œæ‰¾åˆ°</a> ã€‚ è®©æˆ‘ä»¬å¼€å§‹å§ï¼ <br><br><h2> ä¸‰è§’å½¢ </h2><br>  <em>ä¸‰è§’å½¢</em>åªæ˜¯ä¸‰ä¸ªç›¸è¿<em>é¡¶ç‚¹</em>çš„åˆ—è¡¨ï¼Œæ¯ä¸ª<em>é¡¶ç‚¹</em>å­˜å‚¨è‡ªå·±çš„ä½ç½®ï¼Œæœ‰æ—¶è¿˜å­˜å‚¨æ³•çº¿ã€‚ ä»æ‚¨çš„è§’åº¦æ¥çœ‹ï¼Œé¡¶ç‚¹çš„éå†é¡ºåºå†³å®šäº†æˆ‘ä»¬æ­£åœ¨çœ‹çš„ä¸œè¥¿-ä¸‰è§’å½¢çš„æ­£é¢æˆ–èƒŒé¢ã€‚ ä¼ ç»Ÿä¸Šï¼Œâ€œå‰â€è¢«è§†ä¸ºé€†æ—¶é’ˆæ—è·¯é¡ºåºã€‚ <br><br> é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿç¡®å®šå°„çº¿æ˜¯å¦ä¸ä¸‰è§’å½¢ç›¸äº¤ï¼Œå¦‚æœç›¸äº¤ï¼Œåˆ™åœ¨å“ªä¸€ç‚¹ã€‚ å…ˆç”Ÿ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Thomas Akenin-Meller</a>å’ŒBen Tremboräº1997å¹´æå‡ºäº†ä¸€ç§éå¸¸æµè¡Œï¼ˆä½†ç»å¯¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸æ˜¯å”¯ä¸€çš„ä¸€ç§</a> ï¼‰çš„æ–¹æ³•æ¥ç¡®å®šå°„çº¿ä¸ä¸‰è§’å½¢çš„äº¤ç‚¹ã€‚ æ‚¨å¯ä»¥åœ¨æ­¤å¤„çš„æ–‡ç« â€œå¿«é€Ÿï¼Œæœ€å°å­˜å‚¨å°„çº¿ä¸‰è§’å½¢äº¤å‰ç‚¹â€ä¸­äº†è§£æ›´å¤š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¿¡æ¯</a> ã€‚ <br><a name="habracut"></a><br> æœ¬æ–‡ä¸­çš„ä»£ç å¯ä»¥è½»æ¾åœ°ç§»æ¤åˆ°HLSLç€è‰²å™¨ä»£ç ä¸­ï¼š <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> EPSILON = <span class="hljs-number"><span class="hljs-number">1e-8</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IntersectTriangle_MT97</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Ray ray, float3 vert0, float3 vert1, float3 vert2, inout </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> t, inout </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> u, inout </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> v)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// find vectors for two edges sharing vert0 float3 edge1 = vert1 - vert0; float3 edge2 = vert2 - vert0; // begin calculating determinant - also used to calculate U parameter float3 pvec = cross(ray.direction, edge2); // if determinant is near zero, ray lies in plane of triangle float det = dot(edge1, pvec); // use backface culling if (det &lt; EPSILON) return false; float inv_det = 1.0f / det; // calculate distance from vert0 to ray origin float3 tvec = ray.origin - vert0; // calculate U parameter and test bounds u = dot(tvec, pvec) * inv_det; if (u &lt; 0.0 || u &gt; 1.0f) return false; // prepare to test V parameter float3 qvec = cross(tvec, edge1); // calculate V parameter and test bounds v = dot(ray.direction, qvec) * inv_det; if (v &lt; 0.0 || u + v &gt; 1.0f) return false; // calculate t, ray intersects triangle t = dot(edge2, qvec) * inv_det; return true; }</span></span></code> </pre> <br> è¦ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ¡å…‰çº¿å’Œä¸€ä¸ªä¸‰è§’å½¢çš„ä¸‰ä¸ªé¡¶ç‚¹ã€‚ è¿”å›å€¼å‘Šè¯‰æˆ‘ä»¬ä¸‰è§’å½¢æ˜¯å¦ç›¸äº¤ã€‚ åœ¨ç›¸äº¤çš„æƒ…å†µä¸‹ï¼Œä¼šè®¡ç®—å‡ºä¸‰ä¸ªé™„åŠ å€¼ï¼š <code>t</code>æè¿°äº†æ²¿å…‰æŸåˆ°ç›¸äº¤ç‚¹çš„è·ç¦»ï¼Œè€Œ<code>u</code> / <code>v</code>æ˜¯ä¸‰ä¸ªé‡å¿ƒåæ ‡ä¸­çš„ä¸¤ä¸ªï¼Œå®ƒä»¬ç¡®å®šäº†ç›¸äº¤ç‚¹åœ¨ä¸‰è§’å½¢ä¸Šçš„ä½ç½®ï¼ˆæœ€åä¸€ä¸ªåæ ‡å¯ä»¥è®¡ç®—ä¸º<code>w = 1 - u - v</code> ï¼‰ã€‚ å¦‚æœæ‚¨è¿˜ä¸ç†Ÿæ‚‰é‡å¿ƒåæ ‡ï¼Œè¯·é˜…è¯»æœ‰å…³<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Scratchapixel</a>çš„å‡ºè‰²è¯´æ˜ã€‚ <br><br> æ²¡æœ‰å¤ªå¤šå»¶è¿Ÿï¼Œè®©æˆ‘ä»¬ç”¨ä»£ç ä¸­æŒ‡ç¤ºçš„é¡¶ç‚¹è·Ÿè¸ªä¸€ä¸ªä¸‰è§’å½¢ï¼ åœ¨ç€è‰²å™¨ä¸­æ‰¾åˆ°<code>Trace</code>å‡½æ•°ï¼Œå¹¶å‘å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ç‰‡æ®µï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Trace single triangle float3 v0 = float3(-150, 0, -150); float3 v1 = float3(150, 0, -150); float3 v2 = float3(0, 150 * sqrt(2), -150); float t, u, v; if (IntersectTriangle_MT97(ray, v0, v1, v2, t, u, v)) { if (t &gt; 0 &amp;&amp; t &lt; bestHit.distance) { bestHit.distance = t; bestHit.position = ray.origin + t * ray.direction; bestHit.normal = normalize(cross(v1 - v0, v2 - v0)); bestHit.albedo = 0.00f; bestHit.specular = 0.65f * float3(1, 0.4f, 0.2f); bestHit.smoothness = 0.9f; bestHit.emission = 0.0f; } }</span></span></code> </pre> <br> å°±åƒæˆ‘è¯´çš„ï¼Œ <code>t</code>å­˜å‚¨æ²¿å…‰æŸçš„è·ç¦»ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥å€¼æ¥è®¡ç®—äº¤ç‚¹ã€‚ æ³•çº¿å¯¹äºè®¡ç®—æ­£ç¡®çš„åå°„éå¸¸é‡è¦ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰è§’å½¢ä»»æ„ä¸¤ä¸ªè¾¹çš„çŸ¢é‡ç§¯æ¥è®¡ç®—ã€‚ å¯åŠ¨æ¸¸æˆæ¨¡å¼å¹¶æ¬£èµæ‚¨çš„ç¬¬ä¸€ä¸ªä¸‰è§’å½¢ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b29/65a/a84/b2965aa84ae9d882e6c26f7f44da2af7.png"></div><br>  <strong>ç»ƒä¹ ï¼š</strong>å°è¯•ä½¿ç”¨é‡å¿ƒåæ ‡è€Œä¸æ˜¯è·ç¦»æ¥è®¡ç®—ä½ç½®ã€‚ å¦‚æœä¸€åˆ‡æ­£ç¡®ï¼Œé‚£ä¹ˆé—ªäº®çš„ä¸‰è§’å½¢å°†çœ‹èµ·æ¥åƒä»¥å‰ä¸€æ ·ã€‚ <br><br><h2> ä¸‰è§’å½¢ç½‘æ ¼ </h2><br> æˆ‘ä»¬å…‹æœäº†ç¬¬ä¸€ä¸ªéšœç¢ï¼Œä½†æ˜¯ä»ä¸‰è§’å½¢è¿½è¸ªæ•´ä¸ªç½‘æ ¼æ˜¯å®Œå…¨ä¸åŒçš„æ•…äº‹ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¹ ä¸€äº›æœ‰å…³ç½‘æ ¼çš„åŸºæœ¬ä¿¡æ¯ã€‚ å¦‚æœæ‚¨çŸ¥é“å®ƒä»¬ï¼Œåˆ™å¯ä»¥å®‰å…¨åœ°è·³è¿‡ä¸‹ä¸€æ®µã€‚ <br><br> åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­ï¼Œç½‘æ ¼ç”±å‡ ä¸ªç¼“å†²åŒºå®šä¹‰ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯<em>é¡¶ç‚¹</em>å’Œ<em>ç´¢å¼•</em>ç¼“å†²åŒºã€‚  <em>é¡¶ç‚¹ç¼“å†²åŒº</em>æ˜¯æè¿°<em>å¯¹è±¡ç©ºé—´</em>ä¸­æ¯ä¸ªé¡¶ç‚¹ä½ç½®çš„3Då‘é‡åˆ—è¡¨ï¼ˆè¿™æ„å‘³ç€åœ¨ç§»åŠ¨ï¼Œæ—‹è½¬æˆ–ç¼©æ”¾å¯¹è±¡æ—¶ä¸éœ€è¦æ›´æ”¹è¿™äº›å€¼-ä½¿ç”¨çŸ©é˜µä¹˜æ³•å°†å®ƒä»¬ä»<em>å¯¹è±¡ç©ºé—´åŠ¨æ€</em>è½¬æ¢ä¸º<em>ä¸–ç•Œç©ºé—´</em> ï¼‰ ã€‚  <em>ç´¢å¼•ç¼“å†²åŒº</em>æ˜¯æ•´æ•°å€¼çš„åˆ—è¡¨ï¼Œè¿™äº›æ•´æ•°å€¼æ˜¯æŒ‡å‘é¡¶ç‚¹ç¼“å†²åŒºçš„<em>ç´¢å¼•</em> ã€‚ æ¯ä¸‰ä¸ªç´¢å¼•ç»„æˆä¸€ä¸ªä¸‰è§’å½¢ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœç´¢å¼•ç¼“å†²åŒºçš„æ ¼å¼ä¸º[0ï¼Œ1ï¼Œ2ï¼Œ0ï¼Œ2ï¼Œ3]ï¼Œåˆ™å®ƒå…·æœ‰ä¸¤ä¸ªä¸‰è§’å½¢ï¼šç¬¬ä¸€ä¸ªä¸‰è§’å½¢ç”±é¡¶ç‚¹ç¼“å†²åŒºä¸­çš„ç¬¬ä¸€ä¸ªï¼Œç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªé¡¶ç‚¹ç»„æˆï¼Œç¬¬äºŒä¸ªä¸‰è§’å½¢ç”±ç¬¬ä¸€ä¸ªï¼Œç¬¬ä¸‰ä¸ªä¸‰è§’å½¢ç»„æˆå’Œç¬¬å››åº§å±±å³°ã€‚ å› æ­¤ï¼Œç´¢å¼•ç¼“å†²å™¨è¿˜ç¡®å®šä¸Šè¿°éå†é¡ºåºã€‚ é™¤äº†é¡¶ç‚¹ç¼“å†²åŒºå’Œç´¢å¼•ä¹‹å¤–ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–ç¼“å†²åŒºå¯å°†å…¶ä»–ä¿¡æ¯æ·»åŠ åˆ°æ¯ä¸ªé¡¶ç‚¹ã€‚ æœ€å¸¸è§çš„é™„åŠ ç¼“å†²åŒºå­˜å‚¨<em>æ³•çº¿</em> ï¼Œ <em>çº¹ç†åæ ‡</em> ï¼ˆç§°ä¸º<em>texcoords</em>æˆ–ç®€ç§°ä¸º<em>UV</em> ï¼‰ä»¥åŠ<em>é¡¶ç‚¹é¢œè‰²</em> ã€‚ <br><br><h2> ä½¿ç”¨æ¸¸æˆå¯¹è±¡ </h2><br> é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºå“ªäº›GameObjectsåº”è¯¥æˆä¸ºå…‰çº¿è¿½è¸ªè¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯åªä½¿ç”¨<code>FindObjectOfType&lt;MeshRenderer&gt;()</code> ï¼Œä½†æ˜¯è¦åšå¾—æ›´çµæ´»ï¼Œæ›´å¿«ã€‚ è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„<code>RayTracingObject</code>ç»„ä»¶ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; [RequireComponent(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(MeshRenderer))] [RequireComponent(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(MeshFilter))] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RayTracingObject</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnEnable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { RayTracingMaster.RegisterObject(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnDisable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { RayTracingMaster.UnregisterObject(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }</code> </pre> <br> è¯¥ç»„ä»¶è¢«æ·»åŠ åˆ°æˆ‘ä»¬è¦ç”¨äºå…‰çº¿è·Ÿè¸ªçš„æ¯ä¸ªå¯¹è±¡ä¸­ï¼Œå¹¶ä½¿ç”¨<code>RayTracingMaster</code>è¿›è¡Œå…¶æ³¨å†Œã€‚ åœ¨å‘å¯¼ä¸­æ·»åŠ ä»¥ä¸‹åŠŸèƒ½ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _meshObjectsNeedRebuilding = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;RayTracingObject&gt; _rayTracingObjects = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;RayTracingObject&gt;(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RayTracingObject obj</span></span></span><span class="hljs-function">)</span></span> { _rayTracingObjects.Add(obj); _meshObjectsNeedRebuilding = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnregisterObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">RayTracingObject obj</span></span></span><span class="hljs-function">)</span></span> { _rayTracingObjects.Remove(obj); _meshObjectsNeedRebuilding = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br> ä¸€åˆ‡è¿›å±•é¡ºåˆ©-ç°åœ¨æˆ‘ä»¬çŸ¥é“éœ€è¦è·Ÿè¸ªå“ªäº›å¯¹è±¡ã€‚ ä½†æ˜¯éšä¹‹è€Œæ¥çš„æ˜¯å›°éš¾çš„éƒ¨åˆ†ï¼šæˆ‘ä»¬å°†è¦ä»Unityç½‘æ ¼ï¼ˆçŸ©é˜µï¼Œé¡¶ç‚¹ç¼“å†²åŒºå’Œç´¢å¼•-è®°ä½å®ƒä»¬å—ï¼Ÿï¼‰æ”¶é›†æ‰€æœ‰æ•°æ®ï¼Œå°†å®ƒä»¬å†™å…¥æˆ‘ä»¬è‡ªå·±çš„æ•°æ®ç»“æ„å¹¶å°†å…¶åŠ è½½åˆ°GPUä¸­ï¼Œä»¥ä¾¿ç€è‰²å™¨å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚ è®©æˆ‘ä»¬é¦–å…ˆåœ¨å‘å¯¼çš„Cï¼ƒç«¯å®šä¹‰æ•°æ®ç»“æ„å’Œç¼“å†²åŒºï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> MeshObject { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Matrix4x4 localToWorldMatrix; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> indices_offset; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> indices_count; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;MeshObject&gt; _meshObjects = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;MeshObject&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;Vector3&gt; _vertices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Vector3&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _indices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ComputeBuffer _meshObjectBuffer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ComputeBuffer _vertexBuffer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ComputeBuffer _indexBuffer;</code> </pre> <br>  ...ï¼Œç°åœ¨è®©æˆ‘ä»¬åœ¨ç€è‰²å™¨ä¸­æ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚ ä½ ä¹ æƒ¯äº†å—ï¼Ÿ <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MeshObject</span></span></span><span class="hljs-class"> {</span></span> float4x4 localToWorldMatrix; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> indices_offset; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> indices_count; }; StructuredBuffer&lt;MeshObject&gt; _MeshObjects; StructuredBuffer&lt;float3&gt; _Vertices; StructuredBuffer&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; _Indices;</code> </pre> <br> æ•°æ®ç»“æ„å·²ç»å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çœŸå®æ•°æ®å¡«å……å®ƒä»¬ã€‚ æˆ‘ä»¬å°†æ‰€æœ‰ç½‘æ ¼çš„æ‰€æœ‰é¡¶ç‚¹æ”¶é›†åˆ°ä¸€ä¸ªå¤§<code>List&lt;Vector3&gt;</code> ï¼Œå¹¶å°†æ‰€æœ‰ç´¢å¼•æ”¶é›†åˆ°ä¸€ä¸ªå¤§<code>List&lt;int&gt;</code> ã€‚ é¡¶ç‚¹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ç´¢å¼•éœ€è¦æ›´æ”¹ï¼Œä»¥ä¾¿å®ƒä»¬ç»§ç»­æŒ‡å‘æˆ‘ä»¬å¤§ç¼“å†²åŒºä¸­çš„æ­£ç¡®é¡¶ç‚¹ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬å·²ç»æ·»åŠ äº†1000ä¸ªé¡¶ç‚¹ä¸­çš„å¯¹è±¡ï¼Œç°åœ¨æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªç®€å•çš„ç½‘æ ¼ç«‹æ–¹ä½“ã€‚ ç¬¬ä¸€ä¸ªä¸‰è§’å½¢å¯èƒ½ç”±ç´¢å¼•[0ï¼Œ1ï¼Œ2]ç»„æˆï¼Œä½†æ˜¯ç”±äºç¼“å†²åŒºä¸­å·²ç»æœ‰1000ä¸ªé¡¶ç‚¹ï¼Œå› æ­¤éœ€è¦åœ¨å°†é¡¶ç‚¹æ·»åŠ åˆ°å¤šç»´æ•°æ®é›†ä¹‹å‰ç§»åŠ¨ç´¢å¼•ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬å°†å˜æˆ[1000ï¼Œ1001ï¼Œ1002]ã€‚ è¿™æ˜¯ä»£ç ä¸­çš„æ ·å­ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RebuildMeshObjectBuffers</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_meshObjectsNeedRebuilding) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } _meshObjectsNeedRebuilding = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; _currentSample = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Clear all lists _meshObjects.Clear(); _vertices.Clear(); _indices.Clear(); // Loop over all objects and gather their data foreach (RayTracingObject obj in _rayTracingObjects) { Mesh mesh = obj.GetComponent&lt;MeshFilter&gt;().sharedMesh; // Add vertex data int firstVertex = _vertices.Count; _vertices.AddRange(mesh.vertices); // Add index data - if the vertex buffer wasn't empty before, the // indices need to be offset int firstIndex = _indices.Count; var indices = mesh.GetIndices(0); _indices.AddRange(indices.Select(index =&gt; index + firstVertex)); // Add the object itself _meshObjects.Add(new MeshObject() { localToWorldMatrix = obj.transform.localToWorldMatrix, indices_offset = firstIndex, indices_count = indices.Length }); } CreateComputeBuffer(ref _meshObjectBuffer, _meshObjects, 72); CreateComputeBuffer(ref _vertexBuffer, _vertices, 12); CreateComputeBuffer(ref _indexBuffer, _indices, 4); }</span></span></code> </pre> <br> æˆ‘ä»¬åœ¨<code>OnRenderImage</code>å‡½æ•°ä¸­è°ƒç”¨<code>RebuildMeshObjectBuffers</code> ï¼Œä¸è¦å¿˜è®°åœ¨<code>OnDisable</code>é‡Šæ”¾æ–°çš„ç¼“å†²åŒºã€‚ è¿™æ˜¯æˆ‘åœ¨ä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨çš„ä¸¤ä¸ªå¸®åŠ©å‡½æ•°ï¼Œç”¨äºç®€åŒ–ç¼“å†²åŒºå¤„ç†ï¼š <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> CreateComputeBuffer&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">ref</span></span> ComputeBuffer buffer, List&lt;T&gt; data, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> stride) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Do we already have a compute buffer? if (buffer != null) { // If no data or buffer doesn't match the given criteria, release it if (data.Count == 0 || buffer.count != data.Count || buffer.stride != stride) { buffer.Release(); buffer = null; } } if (data.Count != 0) { // If the buffer has been released or wasn't there to // begin with, create it if (buffer == null) { buffer = new ComputeBuffer(data.Count, stride); } // Set data on the buffer buffer.SetData(data); } } private void SetComputeBuffer(string name, ComputeBuffer buffer) { if (buffer != null) { RayTracingShader.SetBuffer(0, name, buffer); } }</span></span></code> </pre> <br> å¤ªå¥½äº†ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ç¼“å†²åŒºï¼Œå¹¶ä¸”ç¼“å†²åŒºä¸­å¡«å……äº†å¿…è¦çš„æ•°æ®ï¼ ç°åœ¨æˆ‘ä»¬åªéœ€è¦å‘ç€è‰²å™¨æŠ¥å‘Šå³å¯ã€‚ å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°<code>SetShaderParameters</code> ï¼ˆç”±äºæœ‰äº†æ–°çš„å¸®åŠ©å™¨åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å‡å°‘çƒå½¢ç¼“å†²åŒºçš„ä»£ç ï¼‰ï¼š <br><br><pre> <code class="cs hljs">SetComputeBuffer(<span class="hljs-string"><span class="hljs-string">"_Spheres"</span></span>, _sphereBuffer); SetComputeBuffer(<span class="hljs-string"><span class="hljs-string">"_MeshObjects"</span></span>, _meshObjectBuffer); SetComputeBuffer(<span class="hljs-string"><span class="hljs-string">"_Vertices"</span></span>, _vertexBuffer); SetComputeBuffer(<span class="hljs-string"><span class="hljs-string">"_Indices"</span></span>, _indexBuffer);</code> </pre> <br> å› æ­¤ï¼Œè¿™é¡¹å·¥ä½œå¾ˆæ— èŠï¼Œä½†è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬åˆšåˆšåšäº†ä»€ä¹ˆï¼šæˆ‘ä»¬æ”¶é›†äº†ç½‘æ ¼çš„æ‰€æœ‰å†…éƒ¨æ•°æ®ï¼ˆçŸ©é˜µï¼Œé¡¶ç‚¹å’Œç´¢å¼•ï¼‰ï¼Œå°†å®ƒä»¬æ”¾ç½®åœ¨æ–¹ä¾¿ï¼Œç®€å•çš„ç»“æ„ä¸­ï¼Œç„¶åå°†å®ƒä»¬å‘é€åˆ°GPUï¼Œç°åœ¨æœŸå¾…ç€ä½•æ—¶ä»–ä»¬å¯ä»¥ä½¿ç”¨ã€‚ <br><br><h2> ç½‘æ ¼è¿½è¸ª </h2><br> æˆ‘ä»¬ä¸è¦è®©ä»–ç­‰å¾…ã€‚ åœ¨ç€è‰²å™¨ä¸­ï¼Œæˆ‘ä»¬å·²ç»å…·æœ‰å•ä¸ªä¸‰è§’å½¢çš„è·Ÿè¸ªä»£ç ï¼Œå¹¶ä¸”å®é™…ä¸Šï¼Œç½‘æ ¼åªæ˜¯å¾ˆå¤šä¸‰è§’å½¢ã€‚ è¿™é‡Œå”¯ä¸€çš„æ–°æ–¹é¢æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨çŸ©é˜µé€šè¿‡å†…ç½®çš„<code>mul</code>å‡½æ•°ï¼ˆä¹˜æ³•çš„ç¼©å†™ï¼‰å°†é¡¶ç‚¹ä»å¯¹è±¡ç©ºé—´è½¬æ¢ä¸ºä¸–ç•Œç©ºé—´ã€‚ çŸ©é˜µåŒ…å«å¯¹è±¡çš„å¹³ç§»ï¼Œæ—‹è½¬å’Œæ¯”ä¾‹ã€‚ å®ƒçš„å¤§å°ä¸º4Ã—4ï¼Œå› æ­¤è¦è¿›è¡Œä¹˜æ³•è¿ç®—ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª4då‘é‡ã€‚ å‰ä¸‰ä¸ªåˆ†é‡ï¼ˆxï¼Œyï¼Œzï¼‰æ¥è‡ªé¡¶ç‚¹ç¼“å†²åŒºã€‚ æˆ‘ä»¬å°†ç¬¬å››ä¸ªåˆ†é‡ï¼ˆwï¼‰è®¾ç½®ä¸º1ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨å¤„ç†ä¸€ä¸ªç‚¹ã€‚ å¦‚æœè¿™æ˜¯æ–¹å‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†åœ¨å…¶ä¸­å†™å…¥0ä»¥å¿½ç•¥çŸ©é˜µä¸­çš„æ‰€æœ‰å¹³ç§»å’Œç¼©æ”¾ã€‚ è¿™è®©æ‚¨æ„Ÿåˆ°å›°æƒ‘å—ï¼Ÿ ç„¶åè‡³å°‘é˜…è¯»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœ¬æ•™ç¨‹</a>å…«æ¬¡ã€‚ è¿™æ˜¯ç€è‰²å™¨ä»£ç ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IntersectMeshObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Ray ray, inout RayHit bestHit, MeshObject meshObject)</span></span></span><span class="hljs-function"> </span></span>{ uint offset = meshObject.indices_offset; uint count = offset + meshObject.indices_count; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (uint i = offset; i &lt; count; i += <span class="hljs-number"><span class="hljs-number">3</span></span>) { float3 v0 = (mul(meshObject.localToWorldMatrix, float4(_Vertices[_Indices[i]], <span class="hljs-number"><span class="hljs-number">1</span></span>))).xyz; float3 v1 = (mul(meshObject.localToWorldMatrix, float4(_Vertices[_Indices[i + <span class="hljs-number"><span class="hljs-number">1</span></span>]], <span class="hljs-number"><span class="hljs-number">1</span></span>))).xyz; float3 v2 = (mul(meshObject.localToWorldMatrix, float4(_Vertices[_Indices[i + <span class="hljs-number"><span class="hljs-number">2</span></span>]], <span class="hljs-number"><span class="hljs-number">1</span></span>))).xyz; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> t, u, v; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IntersectTriangle_MT97(ray, v0, v1, v2, t, u, v)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; t &lt; bestHit.distance) { bestHit.distance = t; bestHit.position = ray.origin + t * ray.direction; bestHit.normal = normalize(cross(v1 - v0, v2 - v0)); bestHit.albedo = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; bestHit.specular = <span class="hljs-number"><span class="hljs-number">0.65f</span></span>; bestHit.smoothness = <span class="hljs-number"><span class="hljs-number">0.99f</span></span>; bestHit.emission = <span class="hljs-number"><span class="hljs-number">0.0f</span></span>; } } } }</code> </pre> <br> æˆ‘ä»¬è·ç¦»çœ‹åˆ°ä¸€åˆ‡éƒ½åªæœ‰ä¸€æ­¥ä¹‹é¥ã€‚ è®©æˆ‘ä»¬é‡æ–°<code>Trace</code>å‡½æ•°ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªç½‘æ ¼ç‰©ä½“çš„è½¨è¿¹ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">RayHit </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Trace</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Ray ray)</span></span></span><span class="hljs-function"> </span></span>{ RayHit bestHit = CreateRayHit(); uint count, stride, i; <span class="hljs-comment"><span class="hljs-comment">// Trace ground plane IntersectGroundPlane(ray, bestHit); // Trace spheres _Spheres.GetDimensions(count, stride); for (i = 0; i &lt; count; i++) { IntersectSphere(ray, bestHit, _Spheres[i]); } // Trace mesh objects _MeshObjects.GetDimensions(count, stride); for (i = 0; i &lt; count; i++) { IntersectMeshObject(ray, bestHit, _MeshObjects[i]); } return bestHit; }</span></span></code> </pre> <br><h2> ç»“æœ </h2><br> ä»…æ­¤è€Œå·²ï¼ è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›ç®€å•çš„ç½‘æ ¼ç‰©ä½“ï¼ˆUnityåŸºæœ¬ä½“å¾ˆå¥½ï¼‰ï¼Œä¸ºå®ƒä»¬æä¾›<code>RayTracingObject</code>ç»„ä»¶å¹¶è§‚å¯Ÿé­”æœ¯ã€‚  <strong>è¯·å‹¿ä½¿ç”¨</strong>è¯¦ç»†çš„ç½‘æ ¼ï¼ˆè¶…è¿‡æ•°ç™¾ä¸ªä¸‰è§’å½¢ï¼‰ï¼ æˆ‘ä»¬çš„ç€è‰²å™¨ç¼ºä¹ä¼˜åŒ–ï¼Œå¦‚æœæ‚¨è¿‡åº¦ä¼˜åŒ–ï¼Œåˆ™å¯èƒ½éœ€è¦å‡ ç§’é’Ÿç”šè‡³å‡ åˆ†é’Ÿæ¥è·Ÿè¸ªæ¯ä¸ªåƒç´ è‡³å°‘ä¸€ä¸ªæ ·æœ¬ã€‚ ç»“æœï¼Œç³»ç»Ÿå°†åœæ­¢GPUé©±åŠ¨ç¨‹åºï¼ŒUnityå¼•æ“å¯èƒ½å´©æºƒï¼Œå¹¶ä¸”è®¡ç®—æœºå°†éœ€è¦é‡æ–°å¯åŠ¨ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c80/1d4/40e/c801d440e5a0a21f660b5a7e82e1b368.png"></div><br> è¯·æ³¨æ„ï¼Œæˆ‘ä»¬çš„ç½‘æ ¼æ²¡æœ‰å¹³æ»‘ä½†å¹³å¦çš„é˜´å½±ã€‚ ç”±äºå°šæœªå°†é¡¶ç‚¹çš„æ³•çº¿åŠ è½½åˆ°ç¼“å†²åŒºä¸­ï¼Œå› æ­¤è¦è·å¾—æ¯ä¸ªä¸‰è§’å½¢çš„é¡¶ç‚¹çš„æ³•çº¿ï¼Œæˆ‘ä»¬å¿…é¡»æ‰§è¡ŒçŸ¢é‡ç§¯ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ä¸‰è§’å½¢çš„åŒºåŸŸå†…æ’å€¼ã€‚ æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹çš„ä¸‹ä¸€éƒ¨åˆ†ä¸­è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ <br><br> å‡ºäºå…´è¶£çš„è€ƒè™‘ï¼Œæˆ‘ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Morgan McGwireæ¡£æ¡ˆåº“ä¸­</a>ä¸‹è½½äº†Stanford Bunnyï¼Œå¹¶ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Blender</a>ç¨‹åºåŒ…çš„åè¿›åˆ¶ä¿®æ”¹å™¨å°†é¡¶ç‚¹æ•°å‡å°‘åˆ°431ã€‚æ‚¨å¯ä»¥åœ¨<code>IntersectMeshObject</code>ç€è‰²å™¨å‡½æ•°ä¸­å°è¯•ä½¿ç”¨ç…§æ˜å‚æ•°å’Œç¡¬ç¼–ç çš„æè´¨ã€‚ è¿™æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Grafitti Shelter</a>çš„ä»‹ç”µå…”å­ï¼Œä¸Šé¢æœ‰ç¾ä¸½çš„æŸ”å’Œé˜´å½±å’Œç¨å¾®åˆ†æ•£çš„å…¨å±€ç…§æ˜ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0da/860/bb4/0da860bb41d9465f2dc21d649a509a66.png"></div><br>  ...è¿™æ˜¯ä¸€åªåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼€æ™®æ•¦å±±</a>å¼ºçƒˆçš„å®šå‘å…‰ä¸‹çš„é‡‘å±å…”å­ï¼Œå°†è¿ªæ–¯ç§‘çœ©å…‰æŠ•å°„åˆ°åœ°æ¿ä¸Šï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a76/bb1/a64/a76bb1a642d620929ecd250f92e1ef1f.jpg"></div><br>  ...è¿™æ˜¯ä¸¤åªå°å…”å­è—åœ¨è“å¤©ä¸‹çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kiara 9é»„æ˜</a>ä¸‹çš„å¤§çŸ³å¤´Suzanneä¸‹ï¼ˆæˆ‘ä¸ºç¬¬äºŒä¸ªå¯¹è±¡æŒ‡å®šäº†æ›¿ä»£ææ–™ï¼Œæ£€æŸ¥ç´¢å¼•åç§»æ˜¯å¦ä¸ºé›¶ï¼‰ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ef/196/a4f/7ef196a4f818b366b4838f2b1e4148f5.png"></div><br><h2> æ¥ä¸‹æ¥æ˜¯ä»€ä¹ˆï¼Ÿ </h2><br> çœŸæ˜¯ç¬¬ä¸€æ¬¡åœ¨è‡ªå·±çš„ç¤ºè¸ªå‰‚ä¸­çœ‹åˆ°çœŸå®çš„ç½‘æ ¼ç‰©ä½“ï¼Œå¯¹å—ï¼Ÿ ä»Šå¤©ï¼Œæˆ‘ä»¬å¤„ç†äº†ä¸€äº›æ•°æ®ï¼Œä½¿ç”¨Meller-Tramborç®—æ³•æ‰¾åˆ°äº†ç›¸äº¤ï¼Œå¹¶æ”¶é›†äº†æ‰€æœ‰æ•°æ®ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ç«‹å³ä½¿ç”¨Unityå¼•æ“çš„GameObjectså¼•æ“ã€‚ å¦å¤–ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å…‰çº¿è·Ÿè¸ªçš„ä¼˜ç‚¹ä¹‹ä¸€ï¼šåœ¨ä»£ç ä¸­æ·»åŠ æ–°çš„äº¤é›†åï¼Œæ‰€æœ‰æ¼‚äº®çš„æ•ˆæœï¼ˆæŸ”å’Œçš„é˜´å½±ï¼Œåå°„å’Œæ¼«åå°„çš„å…¨å±€ç…§æ˜ç­‰ç­‰ï¼‰ç«‹å³å¼€å§‹èµ·ä½œç”¨ã€‚ <br><br> æ¸²æŸ“æœ‰å…‰æ³½çš„å…”å­ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ï¼Œè€Œä¸”æˆ‘ä»ç„¶ä¸å¾—ä¸ä½¿ç”¨ä¸€äº›è¿‡æ»¤æ¥æ¶ˆé™¤æœ€æ˜æ˜¾çš„å™ªéŸ³ã€‚ ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œé€šå¸¸å°†åœºæ™¯å†™æˆç©ºé—´ç»“æ„ï¼Œä¾‹å¦‚ç½‘æ ¼ï¼ŒKç»´æ ‘æˆ–åŒ…å›´ä½“ç§¯çš„å±‚æ¬¡ç»“æ„ï¼Œè¿™å¤§å¤§æé«˜äº†æ¸²æŸ“å¤§å‹åœºæ™¯çš„é€Ÿåº¦ã€‚ <br><br> ä½†æ˜¯æˆ‘ä»¬éœ€è¦æŒ‰é¡ºåºç§»åŠ¨ï¼šè¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†æ¶ˆé™¤æ³•çº¿é—®é¢˜ï¼Œä»¥ä¾¿æˆ‘ä»¬çš„ç½‘æ ¼ï¼ˆç”šè‡³æ˜¯ä½å¤šè¾¹å½¢ç½‘æ ¼ï¼‰çœ‹èµ·æ¥æ¯”ç°åœ¨æ›´å¹³æ»‘ã€‚ åœ¨ç§»åŠ¨å¯¹è±¡å¹¶ç›´æ¥å¼•ç”¨Unityæè´¨æ—¶è‡ªåŠ¨æ›´æ–°çŸ©é˜µï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨ä»£ç ä¸­ç¼–å†™çŸ©é˜µï¼Œè¿™ä¹Ÿå¾ˆå¥½ã€‚ è¿™æ˜¯æˆ‘ä»¬åœ¨æ•™ç¨‹ç³»åˆ—çš„ä¸‹ä¸€éƒ¨åˆ†ä¸­å°†è¦åšçš„ã€‚ æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œå¹¶åœ¨ç¬¬å››éƒ¨åˆ†è§ï¼ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN450308/">https://habr.com/ru/post/zh-CN450308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN450294/index.html">æœ€å¯æ€•çš„æ¯’è¯</a></li>
<li><a href="../zh-CN450298/index.html">é‡å­æœªæ¥ï¼ˆç»­ï¼‰</a></li>
<li><a href="../zh-CN450300/index.html">ä¸å†äº‰è®ºå‡½æ•°å¼ç¼–ç¨‹å’ŒOOP</a></li>
<li><a href="../zh-CN450302/index.html">ä¸šä½™æ— çº¿ç”µæŠ€æœ¯ï¼šåœ¨ä¸­å›½å·¥å‚åˆ¶é€ åŸå‹ç”µè·¯æ¿</a></li>
<li><a href="../zh-CN450304/index.html">Carapuzikåç€ä¸€åªèš‚èšï¼š1äº¿å¹´çš„å—œé…¸ç²’ç»†èƒå¢å¤šç—‡</a></li>
<li><a href="../zh-CN450310/index.html">é£åˆ©æµ¦VideoWRITERçš„å·¥ä½œåŸç†ã€‚ é¦–å…ˆæ˜¯é“çš„ç…§ç‰‡ï¼Œç„¶åæœ‰ç‚¹ä¹å‘³</a></li>
<li><a href="../zh-CN450312/index.html">Docker Composeå…¥é—¨æŒ‡å—</a></li>
<li><a href="../zh-CN450314/index.html">TensorFlowé€‚ç”¨äºåˆå­¦è€…ã€‚ ç¬¬1éƒ¨åˆ†ï¼šä¸€èˆ¬ä¿¡æ¯ï¼Œå®‰è£…åº“</a></li>
<li><a href="../zh-CN450316/index.html">TDDï¼šä¸€ç§æ”¹å˜äº†æˆ‘ç”Ÿæ´»çš„å¼€å‘æ–¹æ³•</a></li>
<li><a href="../zh-CN450318/index.html">ç°ä»£JavaScriptå¼€å‘ä¸­çš„è®¾è®¡æ¨¡å¼</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>