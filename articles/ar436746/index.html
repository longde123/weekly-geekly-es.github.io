<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘‡ğŸ» ğŸ’ ğŸ”» ÙƒÙŠÙÙŠØ© ØªØ¯Ù‡ÙˆØ± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ù…Ù† Ø®Ù„Ø§Ù„ ØªØ­Ø³ÙŠÙ†Ù‡ ğŸ™…ğŸ» âŒ¨ï¸ ğŸ“</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ø£Ø±Ø¯Ù†Ø§ Ø§Ù„Ø£ÙØ¶Ù„ ØŒ Ù„ÙƒÙ† Ø§ØªØ¶Ø­ ÙƒÙ…Ø§ Ù‡Ùˆ Ø§Ù„Ø­Ø§Ù„ Ø¯Ø§Ø¦Ù…Ù‹Ø§. 
 ÙÙŠÙƒØªÙˆØ± ØªØ´ÙŠØ±Ù†ÙˆÙ…ÙŠØ±Ø¯ÙŠÙ† ØŒ 
 Ø±Ø¬Ù„ Ø¯ÙˆÙ„Ø© Ø±ÙˆØ³ÙŠ 


 Ù‡Ù†Ø§Ùƒ Ø£ÙˆÙ‚Ø§Øª ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø© ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ùƒ ØªÙØ¹Ù„ ÙÙŠÙ‡Ø§ ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ ØŒ ÙˆÙ„...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ÙƒÙŠÙÙŠØ© ØªØ¯Ù‡ÙˆØ± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ù…Ù† Ø®Ù„Ø§Ù„ ØªØ­Ø³ÙŠÙ†Ù‡</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436746/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <em>Ø£Ø±Ø¯Ù†Ø§ Ø§Ù„Ø£ÙØ¶Ù„ ØŒ Ù„ÙƒÙ† Ø§ØªØ¶Ø­ ÙƒÙ…Ø§ Ù‡Ùˆ Ø§Ù„Ø­Ø§Ù„ Ø¯Ø§Ø¦Ù…Ù‹Ø§.</em> <br>  ÙÙŠÙƒØªÙˆØ± ØªØ´ÙŠØ±Ù†ÙˆÙ…ÙŠØ±Ø¯ÙŠÙ† ØŒ <br>  Ø±Ø¬Ù„ Ø¯ÙˆÙ„Ø© Ø±ÙˆØ³ÙŠ </p><br><p style=";text-align:right;direction:rtl">  Ù‡Ù†Ø§Ùƒ Ø£ÙˆÙ‚Ø§Øª ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø© ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ùƒ ØªÙØ¹Ù„ ÙÙŠÙ‡Ø§ ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ ØŒ ÙˆÙ„ÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø®Ø·Ø£ Ù…Ø§. <br>  Ù‡Ø°Ù‡ Ø§Ù„Ù‚ØµØ© Ø¹Ù† Ø­Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø© Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø¨ÙŠÙ„. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  Ø¨Ù…Ø¬Ø±Ø¯ Ø£Ù† Ù†Ø¸Ø±Øª Ø¥Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² ÙˆÙÙƒØ±Øª ÙÙŠ ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø£Ù…Ø±: </p><br><pre style=";text-align:right;direction:rtl"><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendBounds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Data data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> beginIndex = data.beginIndex; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> endIndex = data.endIndex; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder() .append(<span class="hljs-string"><span class="hljs-string">'L'</span></span>) .append(data.str, beginIndex, endIndex) .append(<span class="hljs-string"><span class="hljs-string">';'</span></span>) .toString(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø£ÙˆÙ„Ø§Ù‹ ØŒ Ø£Ø±Ø¯Øª Ø­Ø³Ø§Ø¨ Ø§Ù„Ø·ÙˆÙ„ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù„Ù„Ø³Ù„Ø³Ù„Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª <code>beginIndex</code> Ùˆ <code>endIndex</code> (Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø­Ù‚ÙŠÙ‚Ø© Ø£Ù†Ù‡ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ù…Ù‚ØªØ·Ø¹Ø© ØŒ Ø³ØªØªÙ… Ø¥Ø¶Ø§ÙØ© Ø­Ø±ÙÙŠÙ† Ø¢Ø®Ø±ÙŠÙ† Ø¥Ù„Ù‰ <code>StringBuilder</code> ) ÙˆØªÙ…Ø±ÙŠØ± Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ…Ø© Ø¥Ù„Ù‰ Ù…ÙÙ†Ø´Ø¦ <code>StringBuilder</code> Ù„ØªØ­Ø¯ÙŠØ¯ ØµÙÙŠÙ Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ± .  Ø¨Ø¯Ø§ Ù‡Ø°Ø§ Ø§Ù„ÙÙƒØ± ÙˆØ§Ø¶Ø­Ù‹Ø§ Ø¬Ø¯Ù‹Ø§ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„ÙŠ ØŒ Ù„Ø°Ù„Ùƒ Ù‚Ø±Ø±Øª ØªØ¬Ø±Ø¨Ø© Ø´ÙŠØ¡ Ø¢Ø®Ø±.  Ø¯ÙØ¹ØªÙ†ÙŠ Ø­Ù‚ÙŠÙ‚Ø© Ø£Ù† Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù„Ù… ÙŠØªÙ… ØªØ³Ù„ÙŠØ· Ø§Ù„Ø¶ÙˆØ¡ Ø¹Ù„ÙŠÙ‡ Ø¨ÙˆØ§Ø³Ø·Ø© "Ø§Ù„ÙÙƒØ±Ø©" Ø¥Ù„Ù‰ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„ØµØ­ÙŠØ­ ØŒ Ø¹Ù„Ù‰ Ø§Ù„Ø±ØºÙ… Ù…Ù† Ø£Ù† Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ§Ø© Ø§Ù„Ø°ÙƒÙŠØ© ØªÙ‚ØªØ±Ø­ Ø¹Ø§Ø¯Ø©Ù‹ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ù‚ØµÙŠØ±Ø© Ù…Ù† <code>StringBuilder::append</code> Ø¨Ø¥Ø¶Ø§ÙØ© Ø³Ù„Ø§Ø³Ù„ ØŒ ÙˆÙ‡ÙŠ Ø£Ù‚ØµØ± ÙˆØ£Ø³Ù‡Ù„ ÙÙŠ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©. </p><br><p style=";text-align:right;direction:rtl">  Ø¹Ù‚Ø¨Ø© Ø£Ù…Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„ØªØ¨Ø³ÙŠØ· Ù‡ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø³Ù„ÙˆØ¨ <code>StringBuilder.append(CharSequence, int, int)</code> .  Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø£Ù† Ø­Ù‚Ù„ <code>data.str</code> Ø¹Ø¨Ø§Ø±Ø© Ø¹Ù† Ø³Ù„Ø³Ù„Ø© ØŒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… <code>String.substring(beginIndex, endIndex)</code> ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ Ø³Ù„Ø³Ù„Ø© ÙØ±Ø¹ÙŠØ© Ù…Ù†Ù‡ ÙˆØªÙ…Ø±ÙŠØ±Ù‡Ø§ Ø¥Ù„Ù‰ <code>StringBuilder.append(String)</code> . </p><br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø±Ù…Ø² Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendBounds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Data data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> beginIndex = data.beginIndex; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> endIndex = data.endIndex; String subString = data.str.substring(beginIndex, endIndex); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder() .append(<span class="hljs-string"><span class="hljs-string">'L'</span></span>) .append(subString) .append(<span class="hljs-string"><span class="hljs-string">';'</span></span>) .toString(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙˆØ§Ù„Ø¢Ù† ØªÙ‚Ø¯Ù… Idea ØªØ¨Ø³ÙŠØ·Ù‹Ø§: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendBounds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Data data)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> beginIndex = data.beginIndex; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> endIndex = data.endIndex; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'L'</span></span> + data.str.substring(beginIndex, endIndex) + <span class="hljs-string"><span class="hljs-string">';'</span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙˆÙ…Ø¹ Ø°Ù„Ùƒ ØŒ ÙØ¥Ù† Ù‡Ø¯ÙÙ†Ø§ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø© Ù„ÙŠØ³ Ù‚Ø§Ø¨Ù„ÙŠØ© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¨Ù‚Ø¯Ø± Ù…Ø§ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©.  Ù‚Ø§Ø±Ù† Ø¨ÙŠÙ† Ø§Ù„Ø·Ø±ÙŠÙ‚ØªÙŠÙ†: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@BenchmarkMode</span></span>(Mode.AverageTime) <span class="hljs-meta"><span class="hljs-meta">@OutputTimeUnit</span></span>(TimeUnit.NANOSECONDS) <span class="hljs-meta"><span class="hljs-meta">@Fork</span></span>(jvmArgsAppend = {<span class="hljs-string"><span class="hljs-string">"-Xms2g"</span></span>, <span class="hljs-string"><span class="hljs-string">"-Xmx2g"</span></span>}) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringBuilderAppendBenchmark</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Benchmark</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendSubString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Data data)</span></span></span><span class="hljs-function"> </span></span>{ String latinStr = data.latinStr; String nonLatinStr = data.nonLatinStr; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> beginIndex = data.beginIndex; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> endIndex = data.endIndex; String substring = data.nonLatin ? nonLatinStr.substring(beginIndex, endIndex) : latinStr.substring(beginIndex, endIndex); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder() .append(<span class="hljs-string"><span class="hljs-string">'L'</span></span>) .append(substring) .append(<span class="hljs-string"><span class="hljs-string">';'</span></span>) .toString(); } <span class="hljs-meta"><span class="hljs-meta">@Benchmark</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendBounds</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Data data)</span></span></span><span class="hljs-function"> </span></span>{ String latinStr = data.latinStr; String nonLatinStr = data.nonLatinStr; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> beginIndex = data.beginIndex; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> endIndex = data.endIndex; String appended = data.nonLatin ? nonLatinStr : latinStr; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder() .append(<span class="hljs-string"><span class="hljs-string">'L'</span></span>) .append(appended, beginIndex, endIndex) .append(<span class="hljs-string"><span class="hljs-string">';'</span></span>) .toString(); } <span class="hljs-meta"><span class="hljs-meta">@State</span></span>(Scope.Thread) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Data</span></span></span><span class="hljs-class"> </span></span>{ String latinStr; String nonLatinStr; <span class="hljs-meta"><span class="hljs-meta">@Param</span></span>({<span class="hljs-string"><span class="hljs-string">"true"</span></span>, <span class="hljs-string"><span class="hljs-string">"false"</span></span>}) <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> nonLatin; <span class="hljs-meta"><span class="hljs-meta">@Param</span></span>({<span class="hljs-string"><span class="hljs-string">"5"</span></span>, <span class="hljs-string"><span class="hljs-string">"10"</span></span>, <span class="hljs-string"><span class="hljs-string">"50"</span></span>, <span class="hljs-string"><span class="hljs-string">"100"</span></span>, <span class="hljs-string"><span class="hljs-string">"500"</span></span>, <span class="hljs-string"><span class="hljs-string">"1000"</span></span>}) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> beginIndex; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> endIndex; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ThreadLocalRandom random = ThreadLocalRandom.current(); <span class="hljs-meta"><span class="hljs-meta">@Setup</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ latinStr = randomString(<span class="hljs-string"><span class="hljs-string">"abcdefghijklmnopqrstuvwxyz"</span></span>); nonLatinStr = randomString(<span class="hljs-string"><span class="hljs-string">""</span></span>); beginIndex = <span class="hljs-number"><span class="hljs-number">1</span></span>; endIndex = length + <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">randomString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String alphabet)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span>[] chars = alphabet.toCharArray(); StringBuilder sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(length + <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length + <span class="hljs-number"><span class="hljs-number">2</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c = chars[random.nextInt(chars.length)]; sb.append(c); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sb.toString(); } } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ù…Ø¹ÙŠØ§Ø± Ø¨Ø³ÙŠØ· Ù…Ø«Ù„ Ø¨Ù†Ø³Ø§Øª Ø§Ø«Ù†ÙŠÙ†: ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø³Ù„Ø³Ù„Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø¥Ù„Ù‰ <code>StringBuilder</code> ØŒ ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø­Ø¬Ù…Ù‡Ø§ Ø­Ø³Ø¨ Ø­Ù‚Ù„ <code>length</code> ØŒ ÙˆØ¨Ù…Ø§ Ø£Ù† Ø§Ù„ÙÙ†Ø§Ø¡ Ù‡Ùˆ 2019 ØŒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø°Ù„Ùƒ ÙƒØ³Ù„Ø³Ù„Ø© ØªØ­ØªÙˆÙŠ ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø£Ø­Ø±Ù Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ© Ø§Ù„Ù„Ø§ØªÙŠÙ†ÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ù…Ø§ ÙŠØ³Ù…Ù‰ Ø§Ù„Ø®Ø· Ø§Ù„Ù…Ø¶ØºÙˆØ· ØŒ ÙˆØ§Ù„Ø°ÙŠ ÙŠÙØ³Ù…Ù‰ ÙÙŠÙ‡ ÙƒÙ„ Ø­Ø±Ù ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ 1 Ø¨Ø§ÙŠØª) ØŒ ÙˆØ³Ù„Ø³Ù„Ø© Ù…Ø¹ Ø§Ù„Ø£Ø­Ø±Ù ØºÙŠØ± Ø§Ù„Ù„Ø§ØªÙŠÙ†ÙŠØ© (ÙŠØªÙ… ØªÙ…Ø«ÙŠÙ„ ÙƒÙ„ Ø­Ø±Ù Ø¨ÙˆØ§Ø³Ø·Ø© 2 Ø¨Ø§ÙŠØª). </p><br><p style=";text-align:right;direction:rtl">  ÙÙŠ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø³Ø±ÙŠØ¹ ØŒ <code>appendSubString</code> Ø£Ù† Ø·Ø±ÙŠÙ‚Ø© <code>appendSubString</code> Ù„Ø¯ÙŠÙ†Ø§ Ø£Ø¨Ø·Ø£ ØŒ Ù„Ø£Ù† ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ù„ØµÙ‚Ù‡Ø§ ØªØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø·Ø±ÙŠÙ‚Ø© <code>appendBounds</code> ØŒ ÙˆÙ…Ø¹ Ø°Ù„Ùƒ ØŒ ÙÙŠ Ø·Ø±ÙŠÙ‚Ø© <code>appendSubString</code> Ø£ÙŠØ¶Ù‹Ø§ Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¶Ø­ <code>appendSubString</code> ÙØ±Ø¹ÙŠØ© ØŒ Ø£ÙŠ ØªØ®ØµÙŠØµ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù„ÙƒØ§Ø¦Ù† Ø¬Ø¯ÙŠØ¯ ÙˆÙ†Ø³Ø® Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª Ù…Ù† <code>data.latinStr</code> / <code>data.nonLatinStr</code> . </p><br><p style=";text-align:right;direction:rtl">  ÙŠØ¨Ø¯Ùˆ Ø£Ù† Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù‚ÙŠØ§Ø³ Ø§Ù„ØªÙŠ Ø£Ø¬Ø±ÙŠØªÙ‡Ø§ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… JDK11 Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ù…Ù†Ø²Ù„ÙŠ (Intel Core i5-4690ØŒ 3.50 GHz) ØªØ¨Ø¯Ùˆ Ø£ÙƒØ«Ø± Ø¥Ø«Ø§Ø±Ø© Ù„Ù„Ø¯Ù‡Ø´Ø© (ÙˆÙ„ÙƒÙ† Ù„Ù„ÙˆÙ‡Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰). </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Benchmark nonLatin length Score Error Units appendBounds true 5 44,6 Â± 0,4 ns/op appendBounds true 10 45,7 Â± 0,7 ns/op appendBounds true 50 129,0 Â± 0,5 ns/op appendBounds true 100 218,7 Â± 0,8 ns/op appendBounds true 500 907,1 Â± 5,5 ns/op appendBounds true 1000 1626,4 Â± 13,0 ns/op appendSubString true 5 28,6 Â± 0,2 ns/op appendSubString true 10 30,8 Â± 0,2 ns/op appendSubString true 50 65,6 Â± 0,4 ns/op appendSubString true 100 106,6 Â± 0,6 ns/op appendSubString true 500 430,1 Â± 2,4 ns/op appendSubString true 1000 839,1 Â± 8,6 ns/op appendBounds:Â·gc.alloc.rate.norm true 5 184,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm true 10 200,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm true 50 688,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm true 100 1192,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm true 500 5192,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm true 1000 10200,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm true 5 136,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm true 10 160,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm true 50 360,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm true 100 608,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm true 500 2608,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm true 1000 5104,0 Â± 0,0 B/op appendBounds false 5 20,8 Â± 0,1 ns/op appendBounds false 10 24,0 Â± 0,2 ns/op appendBounds false 50 66,4 Â± 0,4 ns/op appendBounds false 100 111,0 Â± 0,8 ns/op appendBounds false 500 419,2 Â± 2,7 ns/op appendBounds false 1000 840,4 Â± 7,8 ns/op appendSubString false 5 25,3 Â± 0,3 ns/op appendSubString false 10 25,7 Â± 0,2 ns/op appendSubString false 50 36,0 Â± 0,1 ns/op appendSubString false 100 52,8 Â± 0,4 ns/op appendSubString false 500 206,1 Â± 6,1 ns/op appendSubString false 1000 388,1 Â± 1,6 ns/op appendBounds:Â·gc.alloc.rate.norm false 5 80,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm false 10 88,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm false 50 320,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm false 100 544,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm false 500 2144,0 Â± 0,0 B/op appendBounds:Â·gc.alloc.rate.norm false 1000 4152,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm false 5 96,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm false 10 112,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm false 50 192,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm false 100 288,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm false 500 1088,0 Â± 0,0 B/op appendSubString:Â·gc.alloc.rate.norm false 1000 2088,0 Â± 0,0 B/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>appendSubString</code> Ø§ÙØªØ±Ø§Ø¶Ù†Ø§ ØŒ <code>appendSubString</code> Ø·Ø±ÙŠÙ‚Ø© <code>appendSubString</code> ÙÙŠ Ø§Ù„ØºØ§Ù„Ø¨ÙŠØ© Ø§Ù„Ø¹Ø¸Ù…Ù‰ Ù…Ù† Ø§Ù„Ø­Ø§Ù„Ø§Øª (Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ø§Ù„Ø³Ù„Ø§Ø³Ù„ ØºÙŠØ± Ø§Ù„Ù„Ø§ØªÙŠÙ†ÙŠØ©) ÙƒØ§Ù†Øª Ø£Ø³Ø±Ø¹ ÙˆØ£Ù‚Ù„ Ø´Ø±Ù‡Ù‹Ø§ (Ø¹Ù„Ù‰ Ø§Ù„Ø±ØºÙ… Ù…Ù† Ø£Ù† <code>String::substring</code> ØªÙØ±Ø¬Ø¹ ÙƒØ§Ø¦Ù†Ù‹Ø§ Ø¬Ø¯ÙŠØ¯Ù‹Ø§).  ÙƒÙŠÙ Ø­Ø¯Ø« Ø°Ù„ÙƒØŸ </p><br><h2 id="smotryu-v-knigu-vizhu-figu" style=";text-align:right;direction:rtl">  Ø£Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„ÙƒØªØ§Ø¨ ØŒ Ø£Ø±Ù‰ Ø§Ù„ØªÙŠÙ† </h2><br><p style=";text-align:right;direction:rtl">  Ø¯Ø±Ø§Ø³Ø© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ¯Ø±ÙŠ Ù„Ù€ <code>StringBuilder</code> Ø³ØªØ³Ø§Ø¹Ø¯ Ø¹Ù„Ù‰ <code>StringBuilder</code> Ø­Ø¬Ø§Ø¨ Ø§Ù„Ø³Ø±ÙŠØ©.  ØªÙ…Ø±ÙŠØ± ÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ù„ÙŠØ¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø§Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø¥Ù„Ù‰ Ù†ÙØ³ Ø§Ù„Ø£Ø³Ø§Ù„ÙŠØ¨ Ù…Ù† <code>AbstractStringBuilder</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringBuilder</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractStringBuilder</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">io</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Comparable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringBuilder</span></span></span><span class="hljs-class">&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CharSequence</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.append(str); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CharSequence s, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> start, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> end)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.append(s, start, end); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ <code>AbstractStringBuilder.append(String)</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> AbstractStringBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> appendNull(); } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> len = str.length(); ensureCapacityInternal(count + len); putStringAt(count, str); count += len; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putStringAt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, String str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getCoder() != str.coder()) { inflate(); } str.getBytes(value, index, coder); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù…Ø§ Ù‡Ùˆ Ù…Ø«ÙŠØ± Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ù‡Ù†Ø§ØŸ  ØªÙ‚ÙˆÙ… <code>AbstractStringBuilder::inflate</code> ØŒ ÙƒÙ…Ø§ ÙŠÙˆØ­ÙŠ Ø§Ù„Ø§Ø³Ù… ØŒ Ø¨ØªÙˆØ³ÙŠØ¹ ØµÙÙŠÙ <code>AbstractStringBuilder.value</code> Ø¹Ù†Ø¯ Ø§Ù„Ø¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©.  ÙŠØªÙ… <code>String::getBytes</code> Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ <code>String::getBytes</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBytes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] dst, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dstBegin, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> coder)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (coder() == coder) { System.arraycopy(value, <span class="hljs-number"><span class="hljs-number">0</span></span>, dst, dstBegin &lt;&lt; coder, value.length); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">// this.coder == LATIN &amp;&amp; coder == UTF16 StringLatin1.inflate(value, 0, dst, dstBegin, value.length); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ù…Ù‡Ù…ØŸ  Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø³Ù„Ø§Ø³Ù„ Ù…ØªØ¬Ø§Ù†Ø³Ø© ØŒ ÙØ³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… <code>System::arraycopy</code> Ù„Ù†Ù‚Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØŒ ÙˆØ¥Ù„Ø§ <code>StringLatin1::inflate</code> ØŒ ÙˆØ§Ù„Ø°ÙŠ ÙŠÙ‚ÙˆØ¯Ù†Ø§ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„ØªÙÙˆÙŠØ¶ Ø¥Ù„Ù‰ <code>StringUTF16::inflate</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// inflatedCopy byte[] -&gt; byte[] @HotSpotIntrinsicCandidate public static void inflate(byte[] src, int srcOff, byte[] dst, int dstOff, int len) { // We need a range check here because 'putChar' has no checks checkBoundsOffCount(dstOff, len, dst); for (int i = 0; i &lt; len; i++) { putChar(dst, dstOff++, src[srcOff++] &amp; 0xff); } } @HotSpotIntrinsicCandidate static void putChar(byte[] val, int index, int c) { assert index &gt;= 0 &amp;&amp; index &lt; length(val) : "Trusted caller missed bounds check"; index &lt;&lt;= 1; val[index++] = (byte)(c &gt;&gt; HI_BYTE_SHIFT); val[index] = (byte)(c &gt;&gt; LO_BYTE_SHIFT); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙˆØ¨Ø§Ù„ØªØ§Ù„ÙŠ ØŒ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØµÙÙˆÙ Ù…ØªØ¬Ø§Ù†Ø³Ø© ØŒ ÙØ³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙŠ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ <code>System::arraycopy</code> Ù„Ù†Ù‚Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØŒ ÙˆØ¥Ù„Ø§ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø­Ù„Ù‚Ø© ( <code>System::arraycopy</code> Ø£ÙŠØ¶Ù‹Ø§).  Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ Ø£Ù†Ù‡ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù„ØªØµØ§Ù‚ Ø¨Ø³Ø·Ø±ÙŠÙ† ØŒ Ø­ÙŠØ« ØªÙƒÙˆÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø­Ø±Ù ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ© Ø§Ù„Ù„Ø§ØªÙŠÙ†ÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© (Ø¨Ù…Ø¹Ù†Ù‰ Ø¢Ø®Ø± ØŒ ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø¨Ø§ÙŠØª Ø§Ù„ÙˆØ§Ø­Ø¯) ØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø£ÙØ¶Ù„ Ø¨ÙƒØ«ÙŠØ± Ù…Ù† Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù„ØªØµØ§Ù‚ Ø¨Ø§Ù„Ø®Ø·ÙˆØ· ØºÙŠØ± Ø§Ù„Ù…ØªØ¬Ø§Ù†Ø³Ø©.  ÙŠØ¤ÙƒØ¯ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¹ÙŠØ§Ø± (Ø§Ù†Ø¸Ø± Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬ Ù„ØºÙŠØ± <code>nonLatin = false</code> ). </p><br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† Ø·Ø±ÙŠÙ‚Ø© <code>AbstractStringBuilder.append(CharSequence, int, int)</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> AbstractStringBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CharSequence s, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> start, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> end)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { s = <span class="hljs-string"><span class="hljs-string">"null"</span></span>; } checkRange(start, end, s.length()); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> len = end - start; ensureCapacityInternal(count + len); appendChars(s, start, end); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendChars</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CharSequence s, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> off, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> end)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isLatin1()) { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] val = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = off, j = count; i &lt; end; i++) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> c = s.charAt(i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (StringLatin1.canEncode(c)) { val[j++] = (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>)c; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { count = j; inflate(); StringUTF16.putCharsSB(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value, j, s, i, end); count += end - i; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { StringUTF16.putCharsSB(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.value, count, s, off, end); } count += end - off; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù‡Ù†Ø§ ØŒ ÙŠØ´Ø¨Ù‡ Ø§Ù„Ù†Ù‡Ø¬ Ø§Ù„Ù…ØªØ¨Ø¹ ÙÙŠ Ø§Ù„Ù…Ø«Ø§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚: Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ù…ØªØ¬Ø§Ù†Ø³Ø© ØŒ ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¢Ù„ÙŠØ© Ø£ÙƒØ«Ø± Ø¨Ø³Ø§Ø·Ø© (Ù‡Ù†Ø§ ØŒ Ù†Ø³Ø® Ø§Ù„Ù†Ø³Ø® ÙÙŠ Ø­Ù„Ù‚Ø©) ØŒ Ù„Ù„Ø³Ù„Ø§Ø³Ù„ ØºÙŠØ± Ø§Ù„Ù…ØªØ¬Ø§Ù†Ø³Ø© Ø§Ù„ØªÙŠ Ù†Ø³ØªØ®Ø¯Ù…Ù‡Ø§ <code>StringUTF16</code> ØŒ ÙˆÙ…Ø¹ Ø°Ù„Ùƒ ØŒ Ù„Ø§Ø­Ø¸ Ø£Ù† <code>StringUTF16::putCharsSB</code> Ù…Ø¶Ù…Ù‘Ù†. </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putCharsSB</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] val, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, CharSequence s, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> off, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> end)</span></span></span><span class="hljs-function"> </span></span>{ checkBoundsBeginEnd(index, index + end - off, val); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = off; i &lt; end; i++) { putChar(val, index++, s.charAt(i)); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„Ø°Ù„Ùƒ ØŒ ÙØ¥Ù† Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© Ù„ÙƒÙ„ØªØ§ Ø§Ù„Ø·Ø±ÙŠÙ‚ØªÙŠÙ† ÙˆØ§Ù„Ø³Ø¨Ø¨ ÙˆØ±Ø§Ø¡ Ø£Ø¯Ø§Ø¦Ù‡Ù…Ø§ Ø§Ù„Ù…Ø®ØªÙ„Ù Ø£ÙƒØ«Ø± ÙˆØ¶ÙˆØ­Ù‹Ø§ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù†Ø§.  Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø°ÙŠ ÙŠØ·Ø±Ø­ Ù†ÙØ³Ù‡ Ø¨Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø­Ø§Ù„ - Ù…Ø§Ø°Ø§ ØªÙØ¹Ù„ Ù…Ø¹ Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø© Ø¨Ø¹Ø¯ Ø°Ù„ÙƒØŸ  Ù‡Ù†Ø§Ùƒ Ø§Ù„Ø¹Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª ÙÙŠ ÙˆÙ‚Øª ÙˆØ§Ø­Ø¯: </p><br><p style=";text-align:right;direction:rtl">  1) Ø¶Ø¹ Ø°Ù„Ùƒ ÙÙŠ Ø§Ù„Ø§Ø¹ØªØ¨Ø§Ø± ÙˆØ¹Ù†Ø¯Ù…Ø§ ÙŠÙƒØªØ´Ù Ø±Ù…Ø²Ù‹Ø§ Ù…Ø´Ø¨ÙˆÙ‡Ù‹Ø§ ØŒ Ù‚Ù… Ø¨ØªØºÙŠÙŠØ±Ù‡ Ø¨ÙŠØ¯ÙŠÙƒ <br>  2) Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Tagir ÙˆØ§Ø·Ù„Ø¨ Ù…Ù†Ù‡ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø´ÙŠÙƒ Ø§Ù„Ø°ÙŠ Ø³ÙŠÙ‚ÙˆÙ… Ø¨Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù†Ø§ <br>  3) Ù‚Ù… Ø¨Ø¥Ø¬Ø±Ø§Ø¡ ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ JDK Ø¨Ø­ÙŠØ« Ù„Ø§ ÙŠØªØºÙŠØ± Ø§Ù„Ø±Ù…Ø² Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚. </p><br><p style=";text-align:right;direction:rtl">  Ø¨Ø§Ù„Ø·Ø¨Ø¹ ØŒ Ù†Ø¨Ø¯Ø£ Ù…Ø¹ Ø§Ù„Ø«Ø§Ù„Ø«.  Ø¹Ù„Ù‰ Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ø§ØªØ®Ø§Ø° ÙØ±ØµØ©ØŸ </p><br><h2 id="pogruzhenie-v-puchinu" style=";text-align:right;direction:rtl">  Ø§Ù„Ù‡Ø§ÙˆÙŠØ© </h2><br><p style=";text-align:right;direction:rtl">  Ø³ÙˆÙ Ù†Ø¯Ø±Ø¨ <del>  Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø·Ø· </del>  Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ¯Ø±ÙŠ Ù„Ù€ Java Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø± ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†Ø²ÙŠÙ„Ù‡ Ù…Ù† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù‡Ù†Ø§</a> . </p><br><p style=";text-align:right;direction:rtl">  ØªØªÙ…Ø«Ù„ Ø£Ø¨Ø³Ø· Ø§Ù„Ø·Ø±Ù‚ ÙˆØ£ÙƒØ«Ø±Ù‡Ø§ ÙˆØ¶ÙˆØ­Ù‹Ø§ ÙÙŠ ØªØ­Ø³ÙŠÙ†Ù‡Ø§ ÙÙŠ ØªØ­Ø¯ÙŠØ¯ Ø³Ù„Ø³Ù„Ø© ÙØ±Ø¹ÙŠØ© Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„ Ø¯Ø§Ø®Ù„ Ø·Ø±ÙŠÙ‚Ø© <code>AbstractStringBuilder.append(CharSequence, int, int)</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  public AbstractStringBuilder append(CharSequence s, int start, int end) { if (s == null) { s = "null"; } checkRange(start, end, s.length()); int len = end - start; ensureCapacityInternal(count + len); appendChars(s, start, end); return this; } //  public AbstractStringBuilder append(CharSequence s, int start, int end) { if (s == null) { s = "null"; } checkRange(start, end, s.length()); return append(s.subSequence(start, end).toString()); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø£Ù†Øª Ø§Ù„Ø¢Ù† Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø¥Ù†Ø´Ø§Ø¡ JDK ØŒ ÙˆØ¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ØŒ ÙˆØªØ´ØºÙŠÙ„ Ù…Ø¹ÙŠØ§Ø± <code>StringBuilderAppendBenchmark::appendBounds</code> ØŒ ÙˆØ§Ù„Ø°ÙŠ ÙŠØ¬Ø¨ Ù…Ù‚Ø§Ø±Ù†Ø© Ù†ØªØ§Ø¦Ø¬Ù‡ Ø¨Ù†ØªØ§Ø¦Ø¬ Ù†ÙØ³ Ø§Ù„Ù…Ø¤Ø´Ø± Ø¹Ù„Ù‰ JDK Ø§Ù„Ø£ØµÙ„ÙŠ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#   before      JDK, # after -   Benchmark nonLatin length before after Units avgt true 5 44,6 64,4 ns/op avgt true 10 45,7 66,3 ns/op avgt true 50 129,0 168,9 ns/op avgt true 100 218,7 281,9 ns/op avgt true 500 907,1 1116,2 ns/op avgt true 1000 1626,4 2002,5 ns/op gc.alloc.rate.norm true 5 184,0 264,0 B/op gc.alloc.rate.norm true 10 200,0 296,0 B/op gc.alloc.rate.norm true 50 688,0 904,0 B/op gc.alloc.rate.norm true 100 1192,0 1552,0 B/op gc.alloc.rate.norm true 500 5192,0 6752,0 B/op gc.alloc.rate.norm true 1000 10200,0 13256,0 B/op avgt false 5 20,8 38,0 ns/op avgt false 10 24,0 37,8 ns/op avgt false 50 66,4 82,9 ns/op avgt false 100 111,0 138,8 ns/op avgt false 500 419,2 531,9 ns/op avgt false 1000 840,4 1002,7 ns/op gc.alloc.rate.norm false 5 80,0 152,0 B/op gc.alloc.rate.norm false 10 88,0 168,0 B/op gc.alloc.rate.norm false 50 320,0 440,0 B/op gc.alloc.rate.norm false 100 544,0 688,0 B/op gc.alloc.rate.norm false 500 2144,0 2688,0 B/op gc.alloc.rate.norm false 1000 4152,0 5192,0 B/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù…Ø§ ÙŠØ³Ù…Ù‰ ØŒ ÙØ¬Ø£Ø©!  Ù„Ù… ØªØ­Ø¯Ø« Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª ÙØ­Ø³Ø¨ ØŒ Ø¨Ù„ Ø­Ø¯Ø« ØªØ¯Ù‡ÙˆØ±.  Ø§Ù„Ù„Ø¹Ù†Ø© ØŒ ÙˆÙ„ÙƒÙ† ÙƒÙŠÙØŸ </p><br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ù‡ÙŠ Ø£Ù†Ù‡ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ØŒ ÙÙŠ ÙˆØµÙ Ø£Ø³Ù„ÙˆØ¨ <code>StringBuilder::append</code> Ù‚Ù…Øª Ø¨Ø¥Ù‡Ù…Ø§Ù„ ÙˆØ§Ø­Ø¯ ØµØºÙŠØ± ÙˆÙ„ÙƒÙ†Ù‡ Ù…Ù‡Ù….  ØªÙ… ÙˆØµÙ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ù…Ø«Ù„ Ù‡Ø°Ø§: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.append(str); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙˆÙ‡Ù†Ø§ ÙˆØ¬Ù‡Ø© Ù†Ø¸Ø±Ù‡Ø§ ÙƒØ§Ù…Ù„Ø©: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@HotSpotIntrinsicCandidate</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.append(str); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„Ø§ ÙŠÙØ¹Ø¯ Ø±Ù…Ø² Java Ø§Ù„Ø°ÙŠ Ø¯Ø±Ø³Ù†Ø§Ù‡ Ø£Ø¹Ù„Ø§Ù‡ ØŒ ÙˆØ§Ù„Ø°ÙŠ ÙŠØªÙ… ØªØ³Ø®ÙŠÙ†Ù‡ ÙˆØªØ¬Ù…ÙŠØ¹Ù‡ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ C2 ØŒ Ø£Ù…Ø±Ù‹Ø§ Ù…Ù‡Ù…Ù‹Ø§ ØŒ Ù„Ø£Ù†Ù‡ Ù„Ø§ ÙŠØªÙ… ØªÙ†ÙÙŠØ°Ù‡ ØŒ ÙˆÙ„ÙƒÙ†Ù‡ Ø¬ÙˆÙ‡Ø±ÙŠ.  Ù…Ù† Ø§Ù„Ø³Ù‡Ù„ Ø¥Ø«Ø¨Ø§Øª Ø°Ù„Ùƒ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø¥Ø²Ø§Ù„Ø© Ù…Ù„Ù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„ØªØ¹Ø±ÙŠÙ</a> Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ù„Ù <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„ØªØ¹Ø±ÙŠÙ ØºÙŠØ± Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†</a> .  ÙÙŠÙ…Ø§ ÙŠÙ„ÙŠ ØŒ ØªØªÙ… Ø¥Ø²Ø§Ù„Ø© Ù…Ù„Ù Ø§Ù„ØªØ¹Ø±ÙŠÙ <code>length = 1000</code> Ùˆ <code>nonLatin = true</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#   `appendSubString`, JDK    ns percent samples top ---------- ------- ------- --- 19096340914 43.57% 1897673 jbyte_disjoint_arraycopy &lt;--------- 13500185356 30.80% 1343343 jshort_disjoint_arraycopy &lt;--------- 4124818581 9.41% 409533 java.lang.String.&lt;init&gt; #   2177311938 4.97% 216375 java.lang.StringUTF16.compress #   1557269661 3.55% 154253 java.util.Arrays.copyOfRange #   349344451 0.80% 34823 appendSubString_avgt_jmhStub 279803769 0.64% 27862 java.lang.StringUTF16.newString 274388920 0.63% 27312 org.openjdk.jmh.infra.Blackhole.consume 160962540 0.37% 15946 SpinPause 122418222 0.28% 11795 __memset_avx2</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙƒÙˆØ¯ <code>StringBuilder</code> (Ùˆ <code>AbstractStringBuilder</code> ) Ù„Ø§ ÙŠØ´Ù… Ø­ØªÙ‰ Ù‡Ù†Ø§ ØŒ Ù…Ø§ ÙŠÙ‚Ø±Ø¨ Ù…Ù† 3/4 Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ ÙŠØ´ØºÙ„Ù‡Ø§ Ù…Ø¶Ù…Ù†.  Ø£Ø±ØºØ¨ ÙÙŠ Ù…Ù„Ø§Ø­Ø¸Ø© Ù†ÙØ³ Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ù…Ù„Ù ØªØ¹Ø±ÙŠÙ <code>StringBuilder.append(CharSequence, int, int)</code> "Ø§Ù„Ù…Ø­Ø³Ù†" Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§ <code>StringBuilder.append(CharSequence, int, int)</code> . </p><br><p style=";text-align:right;direction:rtl">  ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ ØŒ Ù„Ø¯ÙŠÙ†Ø§ Ù‡Ø°Ø§: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ns percent samples top ---------- ------- ------- --- 19071221451 43.78% 1897827 jbyte_disjoint_arraycopy 6409223440 14.71% 638348 jlong_disjoint_arraycopy 3933622128 9.03% 387403 java.lang.StringUTF16.newBytesFor 2067248311 4.75% 204193 java.lang.AbstractStringBuilder.ensureCapacityInternal 1929218737 4.43% 194751 java.lang.StringUTF16.compress 1678321343 3.85% 166458 java.util.Arrays.copyOfRange 1621470408 3.72% 160849 java.lang.String.checkIndex 969180099 2.22% 96018 java.util.Arrays.copyOf 581600786 1.34% 57818 java.lang.AbstractStringBuilder.&lt;init&gt; 417818533 0.96% 41611 appendBounds_jmhTest 406565329 0.93% 40479 java.lang.String.&lt;init&gt; 340972882 0.78% 33727 java.lang.AbstractStringBuilder.append 299895915 0.69% 29982 java.lang.StringBuilder.toString 183885595 0.42% 18136 SpinPause 168666033 0.39% 16755 org.openjdk.jmh.infra.Blackhole.consume</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø³ØªÙ‚ÙˆÙ„: "Ù‡Ø§ Ù‡Ù… ØŒ ÙÙŠ Ø¬ÙˆÙ‡Ø±Ù‡Ù… ØŒ ÙÙŠ Ø§Ù„Ù‚Ù…Ø©!"  ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹ ØŒ Ù‡Ø°Ù‡ ÙÙ‚Ø· Ù„ÙŠØ³Øª Ù‡ÙŠ Ù†ÙØ³Ù‡Ø§ ÙÙŠ Ø¬ÙˆÙ‡Ø±Ù‡Ø§ (Ø¨Ù…Ø§ ÙÙŠ Ø°Ù„Ùƒ Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù…Ù† Ø£Ø¹Ù„Ø§Ù‡).  Ø£Ø°ÙƒØ±: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@HotSpotIntrinsicCandidate</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> StringBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String str)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.append(str); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù‡Ù†Ø§ ÙŠØ­Ù„ Ù…Ø­Ù„ Ø¬ÙˆÙ‡Ø±ÙŠ Ø§Ù„Ø¯Ø¹ÙˆØ© Ø¥Ù„Ù‰ <code>StringBuilder.append(String)</code> ØŒ ÙˆÙ„ÙƒÙ† ÙÙŠ Ø§Ù„ØªØµØ­ÙŠØ­ Ù„Ø¯ÙŠÙ†Ø§ Ù‡Ø°Ù‡ Ø§Ù„Ø¯Ø¹ÙˆØ© Ù„ÙŠØ³Øª ÙƒØ°Ù„Ùƒ!  Ø¯Ø¹Ø§ <code>AbstractStringBuilder.append(String)</code> .  Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ <code>jbyte_disjoint_arraycopy</code> Ø§Ù„ØªÙŠ <code>jbyte_disjoint_arraycopy</code> Ù‡ÙŠ Ø¬ÙˆÙ‡Ø±ÙŠØ© Ù„ <code>StringLatin1::inflate</code> ØŒ ÙˆØ¯Ø¹Ø§ Ù…Ù† <code>AbstractStringBuider::putStringAt</code> Ø¹Ø¨Ø± <code>String::getBytes</code> .  Ø£ÙŠ Ø£Ù†Ù‡ ØŒ Ø¹Ù„Ù‰ Ø¹ÙƒØ³ <code>StringBuilder::append</code> Ù„Ø§ ÙŠØ¹Ø§Ù„Ø¬ ÙÙ‚Ø· Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø¨Ù„ ÙˆØ£ÙŠØ¶Ù‹Ø§ ÙƒÙˆØ¯ Ø¬Ø§ÙØ§ ØŒ </p><br><p style=";text-align:right;direction:rtl">  ÙÙ‡Ù… Ø³Ø¨Ø¨ Ø§Ù„ÙØ´Ù„ ØŒ Ø­Ø§ÙˆÙ„ Ø£Ù† ØªÙ†Ø¬Ø­ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø£Ø®Ø±Ù‰.  Ù…Ù† Ø§Ù„Ø³Ù‡Ù„ ØªØ®Ù…ÙŠÙ† Ø£Ù†Ù†Ø§ Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø§ Ø¥Ù„Ù‰ <code>StringBuilder::append</code> .  ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ Ø¹Ù† Ø·Ø±ÙŠÙ‚ ØªÙ…Ø²ÙŠÙ‚ Ø§Ù„ØªØµØ­ÙŠØ­ Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙˆØ¥Ø¬Ø±Ø§Ø¡ ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ <code>StringBuilder</code> Ù†ÙØ³Ù‡: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  @Override public StringBuilder append(CharSequence s, int start, int end) { super.append(s, start, end); return this; } //  @Override public StringBuilder append(CharSequence s, int start, int end) { if (s == null) { s = "null"; } checkRange(start, end, s.length()); return this.append(s.subSequence(start, end).toString()); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØªÙ… Ø¨Ø­ÙƒÙ…Ø©: ÙŠØ³Ù…Ù‰ StringBuilder :: Ø¥Ù„Ø­Ø§Ù‚ÙŠ. <br>  Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ù†Ø§Ø¡ ØŒ ØªØ´ØºÙŠÙ„ ØŒ Ù…Ù‚Ø§Ø±Ù†Ø©: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">#   before      JDK, # after -   Benchmark nonLatin length before after Units avgt true 5 44,6 60,2 ns/op avgt true 10 45,7 59,1 ns/op avgt true 50 129,0 164,6 ns/op avgt true 100 218,7 276,2 ns/op avgt true 500 907,1 1088,8 ns/op avgt true 1000 1626,4 1959,4 ns/op gc.alloc.rate.norm true 5 184,0 264,0 B/op gc.alloc.rate.norm true 10 200,0 296,0 B/op gc.alloc.rate.norm true 50 688,0 904,0 B/op gc.alloc.rate.norm true 100 1192,0 1552,0 B/op gc.alloc.rate.norm true 500 5192,0 6752,0 B/op gc.alloc.rate.norm true 1000 10200,0 13256,0 B/op avgt false 5 20,8 37,9 ns/op avgt false 10 24,0 37,9 ns/op avgt false 50 66,4 80,9 ns/op avgt false 100 111,0 125,6 ns/op avgt false 500 419,2 483,6 ns/op avgt false 1000 840,4 893,8 ns/op gc.alloc.rate.norm false 5 80,0 152,0 B/op gc.alloc.rate.norm false 10 88,0 168,0 B/op gc.alloc.rate.norm false 50 320,0 440,0 B/op gc.alloc.rate.norm false 100 544,0 688,0 B/op gc.alloc.rate.norm false 500 2144,0 2688,0 B/op gc.alloc.rate.norm false 1000 4152,0 5187,2 B/op</code> </pre><br><p style=";text-align:right;direction:rtl">  Ø£Ø´Ø¹Ø± Ø¨Ø­Ø²Ù† Ø´Ø¯ÙŠØ¯ Ø­Ù‚Ù‹Ø§ ØŒ Ù„ÙƒÙ†Ù‡Ø§ Ù„Ù… ØªØªØ­Ø³Ù†.  Ø§Ù„Ø¢Ù† Ù…Ù„Ù ØªØ¹Ø±ÙŠÙ Ø¬Ø¯ÙŠØ¯: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> ns percent samples top ---------- ------- ------- --- 19614374885 44.12% 1953620 jbyte_disjoint_arraycopy 6645299702 14.95% 662146 jlong_disjoint_arraycopy 4065789919 9.15% 400167 java.lang.StringUTF16.newBytesFor 2374627822 5.34% 234746 java.lang.AbstractStringBuilder.ensureCapacityInternal 1837858014 4.13% 183822 java.lang.StringUTF16.compress 1472039604 3.31% 145956 java.util.Arrays.copyOfRange 1316397864 2.96% 130747 appendBounds_jmhTest 956823151 2.15% 94959 java.util.Arrays.copyOf 573091712 1.29% 56933 java.lang.AbstractStringBuilder.&lt;init&gt; 434454076 0.98% 43202 java.lang.String.&lt;init&gt; 368480388 0.83% 36439 java.lang.AbstractStringBuilder.append 304409057 0.68% 30442 java.lang.StringBuilder.toString 272437989 0.61% 26833 SpinPause 201051696 0.45% 19985 java.lang.StringBuilder.&lt;init&gt; 198934052 0.45% 19810 appendBounds_avgt_jmhStub</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„Ù‚Ø¯ ØªØºÙŠØ± Ø§Ù„Ù‚Ù„ÙŠÙ„.  Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„ÙŠ ØŒ ÙŠØ¨Ù‚Ù‰ Ù…Ù† ØºÙŠØ± Ø§Ù„ÙˆØ§Ø¶Ø­ Ø³Ø¨Ø¨ Ø¹Ø¯Ù… Ø¹Ù…Ù„ Ø§Ù„Ø¬ÙˆÙ‡Ø± Ø¹Ù†Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ <code>StringBuilder.append(String)</code> Ù…Ù† Ø¯Ø§Ø®Ù„ <code>StringBuilder</code> .  Ù‡Ù†Ø§Ùƒ Ø´Ùƒ ÙÙŠ Ø£Ù† Ù„ØµÙ‚ (Ù…Ø¶Ù…Ù‘Ù†) Ù†Øµ Ø£Ø³Ù„ÙˆØ¨ <code>StringBuilder.append(String)</code> ÙÙŠ Ù†Øµ <code>StringBuilder.append(CharSequence, int, int)</code> ÙŠØºÙŠØ± Ø´ÙŠØ¦Ù‹Ø§ Ù…Ø§ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª Ø£Ø³Ù„ÙˆØ¨ VM. </p><br><p style=";text-align:right;direction:rtl">  Ø¹Ù„Ù‰ Ø£ÙŠ Ø­Ø§Ù„ ØŒ Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„ÙØ´Ù„ ØŒ ÙˆØ¥Ø®ÙˆØ§Ù†Ù‡.  Ù„Ù… ÙŠÙƒÙ† Ù…Ù† Ø§Ù„Ù…Ù…ÙƒÙ† ØªØµØ­ÙŠØ­ JDK ØŒ Ù„ÙƒÙ† Ù„Ø§ ÙŠØ²Ø§Ù„ Ø¨Ø¥Ù…ÙƒØ§Ù†Ù†Ø§ Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø§Ù„Ø¨Ø¯Ø§Ø¦Ù„ ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ø­ÙŠØ« ÙŠÙƒÙˆÙ† Ø°Ù„Ùƒ Ù…Ù†Ø·Ù‚ÙŠÙ‹Ø§. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ÙØ´Ù„ Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø§Ù„Ø£Ø¯Ø¨ÙŠ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><blockquote style=";text-align:right;direction:rtl">  Ø¬Ø§Ø¡ ØªØ´ÙÙŠØ± Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø®Ù„Ø§Ù„ ÙŠÙˆÙ…ÙŠÙ†.  Ù„Ø§ ÙŠØ±ØºØ¨ Ø§Ù„Ù…Ø³ØªÙƒØ´Ù ÙÙŠ Ø§Ù„Ø§Ù†ÙØµØ§Ù„ Ø¹Ù† Oto Velara ØŒ Ù…Ø¹ Ø´Ø±ÙƒØ© ØªØ¨Ù†ÙŠ Ø³ÙÙ† Ø­Ø±Ø¨ÙŠØ© Ø³Ø±ÙŠØ¹Ø© ÙˆÙ‚ÙˆÙŠØ© Ø¨Ø´ÙƒÙ„ Ù…Ø¯Ù‡Ø´.  Ù„Ø§ ÙŠØ±ÙŠØ¯ Ø§Ù„Ù…Ø³ØªÙƒØ´Ù Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªØ´ÙÙŠØ± Ù„ÙŠ.  Ø¥Ù†Ù‡ Ø¨Ø¨Ø³Ø§Ø·Ø© ÙŠÙƒØ±Ø± Ø§Ù„Ø±Ø¯ Ù…Ù† Ù…Ø±ÙƒØ² Ø§Ù„Ù‚ÙŠØ§Ø¯Ø©: "Ù„Ø§".  Ø§Ù„ØªØ´ÙÙŠØ± Ù„Ø§ ÙŠÙØ³Ø± Ù„Ù…Ø§Ø°Ø§ "Ù„Ø§".  "Ù„Ø§" ÙÙŠ Ø£ÙŠ Ø­Ø§Ù„ ÙŠØ¹Ù†ÙŠ Ø£Ù†Ù‡ Ø´Ø®Øµ Ù…Ø¹Ø±ÙˆÙ Ù„Ø¬Ù‡Ø§Ø² ÙƒÙ…Ø¨ÙŠÙˆØªØ± ÙƒØ¨ÙŠØ±.  Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø´ÙŠØ¡ Ù…Ø¹Ø±ÙˆÙ Ø¹Ù†Ù‡ ØŒ ÙÙƒØ§Ù† Ø§Ù„Ø¬ÙˆØ§Ø¨ Ù†Ø¹Ù…: Ø¬Ø±Ø¨Ù‡.  Ø³ÙŠØ¡ Ù„Ù„ØºØ§ÙŠØ©  Ø¥Ù†Ù‡ Ù„Ø£Ù…Ø± Ù…Ø¤Ø³Ù Ø£Ù† ØªÙÙ‚Ø¯ Ù…Ø«Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù…Ø«ÙŠØ± Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù….  ÙˆØ§Ù„Ù‚Ø§Ø¦Ø¯ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¢Ø³Ù Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„ÙŠ.  Ø±Ø¨Ù…Ø§ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø£Ù…Ø± Ù…Ø¤Ø³Ù.  Ø±Ø¢Ù†ÙŠ ÙŠÙ…Ø²Ù‚ Ø§Ù„ÙØ§ÙŠÙƒÙ†Ø¬.  ÙˆÙ‡Ùˆ Ù„Ø§ ÙŠØ±ÙŠØ¯ Ø£Ù† ÙŠØ¯ÙØ¹Ù†ÙŠ Ø¥Ù„Ù‰ Ø§Ù„ÙƒÙ„Ø§Ø¨ Ø§Ù„Ø³Ù„ÙˆÙ‚ÙŠØ© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰. <br>  Ø¥Ù†Ù‡ ØµØ§Ù…Øª.  Ù„ÙƒÙ†Ù†ÙŠ Ø£Ø¹Ù„Ù… Ø£Ù†Ù‡ ÙÙŠ ØªÙˆÙÙŠØ± Ù†Ù‚Øµ Ø­Ø§Ø¯ ÙÙŠ Ø§Ù„Ø¹Ù…Ø§Ù„: <br>  - Ø£Ù†Ø§ ØŒ Ø§Ù„Ø±ÙÙŠÙ‚ Ø§Ù„Ø¹Ø§Ù… ØŒ Ø£Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„ØºØ¯.  Ø¯Ø¹Ù†ÙŠ Ø§Ø°Ù‡Ø¨ <br>  - Ø§Ø³ØªÙ…Ø±.  - ÙˆÙØ¬Ø£Ø© ØªØ¨ØªØ³Ù….  "Ø£Ù†Øª ØªØ¹Ø±Ù ØŒ ÙƒÙ„ Ø³Ø­Ø§Ø¨Ø© Ù„Ù‡Ø§ Ø¨Ø·Ø§Ù†Ø© ÙØ¶ÙŠØ©." <br>  "Ø£Ù†Ø§ ØŒ Ø§Ù„Ø±ÙÙŠÙ‚ Ø§Ù„Ø¹Ø§Ù… ØŒ Ø£Ø¹Ø§Ù†ÙŠ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ù…Ù† Ù…Ø±Ø¶ Ø¬ÙŠØ¯." <br>  "ÙˆÙ…Ù† Ù‡Ù†Ø§"  Ù…Ù†Ø¹Øª Ù…Ù† Ù…Ù‚Ø§Ø¨Ù„ØªÙ‡ ØŒ Ù‡Ø°Ø§ Ø£Ù…Ø± Ø³ÙŠØ¡.  <strong>Ù„ÙƒÙ† Ø¥Ù„Ù‰ ÙƒÙ†ÙˆØ² ØªØ¬Ø±Ø¨ØªÙ†Ø§ ØŒ Ø£Ø¶ÙÙ†Ø§ Ø­Ø¨Ø© Ø£Ø®Ø±Ù‰.</strong> </blockquote></div></div><br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬Ø§Øª: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  Ù„Ø§ ÙŠØ±ØªØ¨Ø· Ø±Ù…Ø² Ø£Ø³Ø§Ù„ÙŠØ¨ JDK ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø¨Ø§Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙØ¹Ù„ÙŠ ØŒ Ù„Ø£Ù†Ù‡ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ù†Øµ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© ØŒ ÙŠÙ…ÙƒÙ† ØªÙ†ÙÙŠØ° Ø¬ÙˆÙ‡Ø±ÙŠ ØŒ ÙˆØ§Ù„Ø°ÙŠ ÙŠÙƒÙˆÙ† Ù…Ø®ÙÙŠÙ‹Ø§ ÙÙŠ Ø£Ø­Ø´Ø§Ø¡ Ø¬Ù‡Ø§Ø² VM. </li><li style=";text-align:right;direction:rtl">  ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ù…Ø«Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø³Ø§Ù„ÙŠØ¨ ØŒ Ø¹Ù„Ù‰ ÙˆØ¬Ù‡ Ø§Ù„Ø®ØµÙˆØµ ØŒ <code>@HotSpotIntrinsicCandidate</code> Ø¹Ù„Ø§Ù…Ø§Øª <code>@HotSpotIntrinsicCandidate</code> Ø¥Ù„ÙŠÙ‡Ø§ ØŒ Ø¹Ù„Ù‰ Ø§Ù„Ø±ØºÙ… Ù…Ù† Ø£Ù† Ø¨Ø¹Ø¶ Ø§Ù„Ø·Ø±Ù‚ Ù…Ø¶Ù…Ù‘Ù†Ø© Ø¯ÙˆÙ† Ø£ÙŠ ØªÙ„Ù…ÙŠØ­ ØŒ Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ <code>String::equals</code> ( <a href="">ÙˆØ§Ù„Ø¹Ø¯ÙŠØ¯ ØºÙŠØ±Ù‡Ø§</a> ). </li><li style=";text-align:right;direction:rtl">  Ø§Ù„Ø§Ø³ØªÙ†ØªØ§Ø¬ Ø§Ù„Ø°ÙŠ ÙŠØ£ØªÙŠ Ù…Ù† Ø§Ù„Ø£ÙˆÙ„ÙŠÙ† Ù‡Ùˆ Ø£Ù† Ù…Ù†Ø§Ù‚Ø´ØªÙ†Ø§ Ù„ÙƒÙŠÙÙŠØ© Ø¹Ù…Ù„ ÙƒÙˆØ¯ JDK Ù‚Ø¯ ØªØªØ¹Ø§Ø±Ø¶ Ù…Ø¹ Ø§Ù„ÙˆØ§Ù‚Ø¹.  C'est la vie </li></ul><br><p style=";text-align:right;direction:rtl">  PS <br>  Ø¨Ø¯ÙŠÙ„ Ù…Ø­ØªÙ…Ù„ Ø¢Ø®Ø±: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">StringBuilder sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); sb.append(str, <span class="hljs-number"><span class="hljs-number">0</span></span>, endIndex); <span class="hljs-comment"><span class="hljs-comment">// --&gt; StringBuilder sb = new StringBuilder(str.substring(o, endIndex));</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  PPS <br>  ÙŠØ´ÙŠØ± Ù…Ø·ÙˆØ±Ùˆ Ø£ÙˆØ±Ø§ÙƒÙ„ Ø¨Ø­Ù‚ Ø¥Ù„Ù‰ Ø°Ù„Ùƒ </p><br><blockquote style=";text-align:right;direction:rtl">  ÙŠØ¨Ø¯Ùˆ Ù„ÙŠ ØºØ±ÙŠØ¨Ù‹Ø§ Ø¥Ù„Ù‰ Ø­Ø¯ Ù…Ø§ ÙˆÙ…Ù† Ø§Ù„Ù…Ø³ØªØºØ±Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø³Ø§Ø± Ø±Ù…Ø² Ø¥Ù„Ù‰ <br>  sb.append (csØŒ intØŒ int) Ø§Ù„Ø°ÙŠ ÙŠØ®ØµØµ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ù…Ù† Ø£Ø¬Ù„ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø°Ù„Ùƒ <br>  ÙÙ‚Ø· ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø­ÙŠØ§Ù† ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø£Ù…ÙˆØ± ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø£Ø³Ø±Ø¹.  ÙƒÙ…Ø§ Ù„Ø§Ø­Ø¸Øª ØŒ ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡ <br>  Ø§Ù„Ù…ÙØ§Ø¶Ù„Ø§Øª Ù„ÙŠØ³Øª ÙˆØ§Ø¶Ø­Ø©. <br><br>  Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø°Ù„Ùƒ ØŒ Ø¥Ø°Ø§ ÙƒÙ†Ø§ Ù†Ø±ÙŠØ¯ ØªØ­Ø³ÙŠÙ† sb.append (cs ØŒ int ØŒ int) Ø±Ø¨Ù…Ø§ ÙŠØ¬Ø¨ Ø£Ù† Ù†Ø°Ù‡Ø¨ <br>  Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù…Ø§Ù… ÙˆØ§Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ ØŒ Ø±Ø¨Ù…Ø§ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø¥Ø¶Ø§ÙØ© Ø£Ùˆ Ø¥Ø¹Ø§Ø¯Ø© ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©. </blockquote><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ù‡Ùˆ <code>StringBuilder.append(CharSequence, int, int)</code> . </p><br><p style=";text-align:right;direction:rtl">  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„Ù…Ù‡Ù…Ø©</a> <br>  â†’ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù…Ù†Ø§Ù‚Ø´Ø©</a> </p><br><p style=";text-align:right;direction:rtl">  <strong>PPS</strong> <br>  ÙˆÙ…Ù† Ø§Ù„Ù…Ø«ÙŠØ± Ù„Ù„Ø§Ù‡ØªÙ…Ø§Ù… ØŒ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø­Ø¸Ø© ØŒ Ø¹Ù†Ø¯ ÙƒØªØ§Ø¨Ø© Ø´ÙŠØ¡ Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø¨ÙŠÙ„ </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">StringBuilder sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); sb.append(str.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, endIndex));</code> </pre> <br><p style=";text-align:right;direction:rtl">  "Ø§Ù„ÙÙƒØ±Ø©" ØªÙ‚ØªØ±Ø­ ØªØ¨Ø³ÙŠØ· Ø§Ù„Ø±Ù…Ø² Ø¥Ù„Ù‰ </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">StringBuilder sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); sb.append(s, <span class="hljs-number"><span class="hljs-number">0</span></span>, endIndex);</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ÙƒØ§Ù† Ù…Ù‡Ù…Ù‹Ø§ Ù„Ù„ØºØ§ÙŠØ© Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ùƒ ØŒ ÙÙ…Ù† Ø§Ù„Ù…Ø­ØªÙ…Ù„ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ù…Ø¨Ø³Ø· Ø£ÙƒØ«Ø± ØµØ­Ø©.  ÙˆÙ…Ø¹ Ø°Ù„Ùƒ ØŒ ÙØ¥Ù† Ù…Ø¹Ø¸Ù… Ø§Ù„Ø´ÙØ±Ø© Ø§Ù„ØªÙŠ Ù†ÙƒØªØ¨Ù‡Ø§ Ù…Ø®ØµØµØ© Ù„Ø±ÙØ§Ù‚Ù†Ø§ ØŒ ÙˆÙ„ÙŠØ³ Ù„Ù„Ø¢Ù„Ø§Øª. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar436746/">https://habr.com/ru/post/ar436746/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar436726/index.html">ÙŠØ¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø¹Ù† ÙÙ‚Ø¯ Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø¨ÙŠØªÙƒÙˆÙŠÙ† ÙƒÙ†ØªÙŠØ¬Ø© Ù„Ù„Ù‚Ø±ØµÙ†Ø© Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ù…Ø­Ø§ÙØ¸ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ…</a></li>
<li><a href="../ar436732/index.html">ML.NET Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ - Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ 10 Ø¯Ù‚ÙŠÙ‚Ø©</a></li>
<li><a href="../ar436740/index.html">Ø§Ù„Ø¨Ø­ÙˆØ« Ø§Ù„Ø®Ø§ØµØ© ØŒ Ù…Ø§Ø°Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…ÙØªÙˆØ­Ø© ØªØ®Ø¨Ø±Ù†Ø§ØŸ</a></li>
<li><a href="../ar436742/index.html">Android Robotics Ø­ØªÙ‰ 2019: Ø§Ù„Ù‚ØµØ© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø› ÙÙŠ 5 Ø£Ø¬Ø²Ø§Ø¡ Ø› Ø§Ù„Ø¬Ø²Ø¡ 1</a></li>
<li><a href="../ar436744/index.html">Ù‚Ù… Ø¨ØªØ´ØºÙŠÙ„ ÙƒØ§Ø´Ù Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø¹ØµØ¨ÙŠØ© Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¹Ù„Ù‰ Raspberry Pi Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Neural Compute Stick Ùˆ OpenVINO</a></li>
<li><a href="../ar436748/index.html">ØªØ·ÙˆÙŠØ± hexapod Ù…Ù† Ø§Ù„ØµÙØ± (Ø§Ù„Ø¬Ø²Ø¡ 3) - Ø§Ù„Ø­Ø±ÙƒÙŠØ©</a></li>
<li><a href="../ar436750/index.html">Ø§ØªØ¬Ø§Ù‡Ø§Øª ØªØ­Ù„ÙŠÙ„ ÙŠÙˆØªÙŠÙˆØ¨ Ø§Ù„Ø±ÙˆØ³ÙŠ Ù„Ø¹Ø§Ù… 2018</a></li>
<li><a href="../ar436752/index.html">Ø§Ù„ÙƒØ¹ÙƒØ© ÙƒØ°Ø¨Ø©</a></li>
<li><a href="../ar436754/index.html">Q2VKPT: Quake II Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¥Ø¶Ø§Ø¡Ø© ÙˆØ§Ù‚Ø¹ÙŠØ©</a></li>
<li><a href="../ar436756/index.html">ÙŠØ³Ø±Ø¹ Ø§Ù„ØªÙ…Ø§Ø«Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ù†Ù‚Ø§Ø°</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>