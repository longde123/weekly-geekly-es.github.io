<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÜ ‚òπÔ∏è üë®‚Äçüë©‚Äçüë¶‚Äçüë¶ Luxon - uma nova biblioteca para trabalhar com datas da equipe Moment.js üìÅ üöõ üóØÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Parece, por que precisamos de outra biblioteca para trabalhar com datas e hor√°rios em que existe uma biblioteca Moment conhecida ?! O mais interessant...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Luxon - uma nova biblioteca para trabalhar com datas da equipe Moment.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433850/"><img src="https://habrastorage.org/webt/j1/wb/tr/j1wbtroijv6w7pxb5j1ku-pgdso.jpeg"><br><br>  Parece, por que precisamos de outra biblioteca para trabalhar com datas e hor√°rios em que existe uma biblioteca Moment conhecida ?!  O mais interessante √© que a alternativa foi proposta pela pr√≥pria equipe do Moment. <br><a name="habracut"></a><br>  A biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Luxon</a> √© declarada como uma ferramenta poderosa, moderna e conveniente para trabalhar com datas e horas em JavaScript.  A biblioteca foi criada por Isaac Cambron, membro da equipe de desenvolvimento do Moment desde 2013. <br><br>  O autor tinha muitas id√©ias para o desenvolvimento do Moment, que ele n√£o p√¥de criar dentro da estrutura do c√≥digo existente.  Aqui est√£o os principais pontos que eu queria implementar: <br><br><ul><li>  experimente algumas id√©ias sobre como tornar a API mais l√≥gica (mas essas id√©ias n√£o s√£o compat√≠veis com a abordagem adotada pelo Moment), </li><li>  implementar o trabalho "pronto para uso" com fusos hor√°rios sem extens√µes adicionais, </li><li>  repensar completamente o trabalho com a internacionaliza√ß√£o, levando em considera√ß√£o o advento da API Intl, </li><li>  mude para um conjunto moderno de ferramentas e abordagens na forma√ß√£o do c√≥digo JS. </li></ul><br>  Portanto, ele decidiu escrever tudo do zero, o que levou cerca de dois anos. <br>  O resultado √© uma esp√©cie de vers√£o modernizada do Moment. <br>  A vers√£o resultante parecia interessante para toda a equipe de desenvolvimento do Moment, por isso foi decidido promover a nova biblioteca sob os ausp√≠cios da equipe. <br><br><h2>  Princ√≠pios de Luxon </h2><br><ol><li>  Cadeias de chamadas como no momento. </li><li>  Todos os tipos s√£o imut√°veis. </li><li>  API mais clara e √≥bvia: para objetos diferentes - m√©todos diferentes com par√¢metros claramente definidos. </li><li>  API internacional para internacionaliza√ß√£o (revers√£o para a vers√£o em ingl√™s se o navegador n√£o suportar a API internacional). </li><li>  API internacional para trabalhar com fusos hor√°rios. </li><li>  Suporte mais completo para calcular a dura√ß√£o. </li><li>  Suporte de intervalo nativo. </li><li>  Documenta√ß√£o de c√≥digo embutido. </li></ol><br>  <b>Esses princ√≠pios levaram √†s seguintes melhorias:</b> <br><br><ul><li>  O c√≥digo Luxon √© muito mais f√°cil de entender e depurar. </li><li>  O uso dos recursos internos do navegador para internacionaliza√ß√£o melhora o comportamento da biblioteca e, novamente, facilita a depura√ß√£o. </li><li>  O suporte ao fuso hor√°rio √© melhor implementado do que em qualquer outra biblioteca JS. </li><li>  O Luxon fornece uma ferramenta simples e muito poderosa para trabalhar com dura√ß√£o. </li><li>  A biblioteca possui boa documenta√ß√£o. </li></ul><br>  <b>Mas Luxon tem suas desvantagens:</b> <br><br><ul><li>  A √™nfase no uso dos recursos internos do navegador leva a dificuldades no suporte a navegadores antigos. </li><li>  Alguns recursos de internacionaliza√ß√£o que ainda n√£o s√£o suportados por navegadores n√£o s√£o implementados na biblioteca (voc√™ deve esperar que esse suporte apare√ßa nos navegadores). </li><li>  A implementa√ß√£o da API Intl em diferentes navegadores pode variar, respectivamente, o comportamento do Luxon tamb√©m varia. </li></ul><br><h2>  Instala√ß√£o </h2><br>  Luxon fornece m√≥dulos para todas as plataformas JavaScript modernas. <br><br>  A documenta√ß√£o possui uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lista</a> completa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">de navegadores suportados</a> com restri√ß√µes de aplicativo.  Para navegadores que n√£o possuem ou t√™m suporte internacional limitado, √© recomend√°vel usar um polyfile (em particular, isso se aplica ao IE 10 ou 11). <br><br>  Ao trabalhar com Node.js (6+), se voc√™ precisar trabalhar com localidades, precisar√° instalar adicionalmente o pacote <i>full-icu</i> e definir a vari√°vel de ambiente para permitir o uso deste pacote. <br><br>  O m√©todo de instala√ß√£o padr√£o do npm: <br>  <b>npm install --save luxon</b> <br><br>  Luxon tem suporte para TypeScript e Flow, tamb√©m h√° um m√≥dulo no formato ES6. <br><br><h2>  Revis√£o r√°pida </h2><br>  A biblioteca Luxon consiste em cinco classes principais: <br><br>  <i>DateTime</i> - data e hora com fuso hor√°rio e configura√ß√µes de exibi√ß√£o, bem como m√©todos relacionados. <br>  <i>Dura√ß√£o</i> - um per√≠odo de tempo (dura√ß√£o), por exemplo, "2 meses" ou "1 dia, 3 horas". <br>  M√©todos informativos para obter dados gerais sobre hora e data. <br>  <i>Intervalo</i> - intervalo de tempo e m√©todos para trabalhar com ele. <br>  <i>As configura√ß√µes</i> s√£o m√©todos est√°ticos que definem o comportamento geral do Luxon. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {DateTime, Duration, Info, Interval, Settings} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'luxon'</span></span>;</code> </pre> <br><h3>  Sua primeira data e hora </h3><br>  A classe mais importante em Luxon √© o DateTime.  DateTime representa data + hora, juntamente com fuso hor√°rio e localidade.  √â assim que voc√™ pode definir 15 de maio de 2017 √†s 08:30 no fuso hor√°rio local: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(<span class="hljs-number"><span class="hljs-number">2017</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>);</code> </pre> <br>  Aqui est√° a chamada para determinar a hora atual: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> now = DateTime.local();</code> </pre> <br><h3>  Criar do Objeto </h3><br><pre> <code class="javascript hljs">DateTime.fromObject({ <span class="hljs-attr"><span class="hljs-attr">month</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-attr"><span class="hljs-attr">day</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">hour</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-attr"><span class="hljs-attr">minutes</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-attr"><span class="hljs-attr">zone</span></span>: <span class="hljs-string"><span class="hljs-string">'Europe/Kaliningrad'</span></span> }); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018-12-22T12:20:00.000+02:00</span></span></code> </pre> <br><h3>  Criar a partir de uma string no formato ISO 8601 </h3><br><pre> <code class="javascript hljs">DateTime.fromISO(<span class="hljs-string"><span class="hljs-string">"2017-05-15"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; May 15, 2017 at 0:00 DateTime.fromISO("2017-05-15T08:30:00"); //=&gt; May 15, 2017 at 8:30</span></span></code> </pre> <br>  Ao converter para uma sequ√™ncia, o Luxon tamb√©m retorna uma sequ√™ncia no formato ISO 8601: <br><br><pre> <code class="javascript hljs">DateTime.local().toString(); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "2018-12-18T20:58:29.995+03:00"</span></span></code> </pre> <br><h3>  Obten√ß√£o de componentes individuais: </h3><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(); dt.year; <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018 dt.month; //=&gt; 12 dt.day; //=&gt; 18 dt.second; //=&gt; 27 dt.weekday; //=&gt; 2 dt.zoneName; //=&gt; "Europe/Moscow" dt.offset; //=&gt; 180 dt.daysInMonth; //=&gt; 31</span></span></code> </pre> <br><h3>  Sa√≠da formatada </h3><br>  O Luxon tem muitos m√©todos para converter DateTime em uma string, dois deles s√£o mais importantes para LocalString e toISO, o primeiro converte para um formato levando em considera√ß√£o o verniz do navegador e o segundo prepara o texto para processamento program√°tico (por exemplo, para transferir para um servidor): <br><br><pre> <code class="javascript hljs">dt.toLocaleString(); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18.12.2018" dt.toLocaleString(DateTime.DATETIME_MED); //=&gt; "18 . 2018 ., 21:46" dt.toISO(); //=&gt; "2018-12-18T21:46:55.013+03:00"</span></span></code> </pre> <br>  O Luxon possui duas d√∫zias de "predefini√ß√µes" prontas para sa√≠da formatada (como DATETIME_MED e TIME_WITH_LONG_OFFSET). <br><br>  Voc√™ tamb√©m pode criar sua pr√≥pria op√ß√£o de formata√ß√£o com base em tokens: <br><br><pre> <code class="javascript hljs">dt.setLocale(<span class="hljs-string"><span class="hljs-string">'ru'</span></span>).toFormat(<span class="hljs-string"><span class="hljs-string">'d MMMM tt - ZZZZZ'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18  21:46:55 - ,  "</span></span></code> </pre><br><h3>  Convers√µes DateTime </h3><br>  Nota importante: os objetos Luxon s√£o imut√°veis, ou seja,  quaisquer m√©todos de modifica√ß√£o aplicados a eles retornar√£o a c√≥pia modificada sem alterar o objeto original.  Portanto, todos os termos deste artigo (como na documenta√ß√£o do Luxon) como "alterar", "instalar", "redefinir" devem ser entendidos como "criar uma nova inst√¢ncia com outras propriedades". <br><br><h3>  Transforma√ß√µes matem√°ticas </h3><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18.12.2018, 20:30" dt.plus({hours: 3, minutes: 2}); //=&gt; "18.12.2018, 23:32" dt.minus({days: 7}); //=&gt; "11.12.2018, 20:30" dt.startOf('day'); //=&gt; "18.12.2018, 0:00" dt.endOf('hour'); //=&gt; "18.12.2018, 20:00"</span></span></code> </pre> <br><h3>  Substituindo Par√¢metros Individuais </h3><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(); dt.set({<span class="hljs-attr"><span class="hljs-attr">hour</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>}).hour <span class="hljs-comment"><span class="hljs-comment">//=&gt; 3</span></span></code> </pre><br><h3>  Convers√µes internacionais </h3><br>  O Luxon suporta v√°rias transforma√ß√µes Intl diferentes, uma das mais importantes √© a formata√ß√£o para diferentes localidades: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> f = {<span class="hljs-attr"><span class="hljs-attr">month</span></span>: <span class="hljs-string"><span class="hljs-string">'long'</span></span>, <span class="hljs-attr"><span class="hljs-attr">day</span></span>: <span class="hljs-string"><span class="hljs-string">'numeric'</span></span>}; dt.setLocale(<span class="hljs-string"><span class="hljs-string">'fr'</span></span>).toLocaleString(f); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "18 d√©cembre" dt.setLocale('en-GB').toLocaleString(f); //=&gt; "18 December" dt.setLocale('en-US').toLocaleString(f); //=&gt; "December 18"</span></span></code> </pre> <br>  A classe Info pode retornar listas de meses e dias da semana em um determinado local: <br><br><pre> <code class="javascript hljs">Info.months(<span class="hljs-string"><span class="hljs-string">'long'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">locale</span></span>: <span class="hljs-string"><span class="hljs-string">'it'</span></span>}); <span class="hljs-comment"><span class="hljs-comment">//=&gt; ["gennaio", "febbraio", "marzo", ...] Info.weekdays ('short', {locale: 'de'}); //=&gt; ["Mo", "Di", "Mi", ...]</span></span></code> </pre> <br><h3>  Fusos hor√°rios </h3><br>  Luxon suporta fusos hor√°rios.  Se voc√™ criar um DateTime sem especificar explicitamente um fuso hor√°rio, o fuso local ser√° selecionado por padr√£o.  Se voc√™ alterar o fuso hor√°rio para um DateTime existente, a hora e a data ser√£o recalculadas levando em considera√ß√£o a diferen√ßa entre os fusos hor√°rios. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dt = DateTime.local(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">00</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018-12-18T20:00:00.000+03:00 dt.zone.name; //=&gt; "Europe/Moscow" dt.setZone('Asia/Vladivostok'); //=&gt; 2018-12-19T03:00:00.000+10:00</span></span></code> </pre> <br>  Luxon tamb√©m suporta trabalhar com data e hora no formato UTC: <br><br><pre> <code class="javascript hljs">DateTime.utc(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2018-05-15T00:00:00.000Z DateTime.utc(); //=&gt; 2018-12-18T17:58:29.995Z DateTime.local().toUTC(); //=&gt; 2018-12-18T17:58:29.995Z DateTime.utc().toLocal(); //=&gt; 2018-12-18T20:58:29.995+03:00</span></span></code> </pre><br><h3>  Dura√ß√£o </h3><br>  A classe Duration oferece a capacidade de trabalhar com uma dura√ß√£o de, por exemplo, "2 horas e 7 minutos".  Voc√™ pode criar uma dura√ß√£o como esta: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dur = Duration.fromObject({<span class="hljs-attr"><span class="hljs-attr">hours</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">minutes</span></span>: <span class="hljs-number"><span class="hljs-number">7</span></span>});</code> </pre> <br>  Dura√ß√µes podem ser adicionadas e subtra√≠das.  A dura√ß√£o pode ter um valor negativo. <br><br><pre> <code class="javascript hljs">dur.minus(dur).minus(dur); <span class="hljs-comment"><span class="hljs-comment">//=&gt; {hours: -2, minutes: -7}</span></span></code> </pre> <br>  Da mesma forma, a dura√ß√£o pode ser adicionada ou subtra√≠da do DateTime. <br><br><pre> <code class="javascript hljs">DateTime.local().plus(dur);</code> </pre> <br>  A dura√ß√£o possui getters (semelhante aos get DateTime): <br><br><pre> <code class="javascript hljs">dur.hours; <span class="hljs-comment"><span class="hljs-comment">//=&gt; 2 dur.minutes; //=&gt; 7 dur.seconds; //=&gt; 0 dur.zone; //=&gt; undefined</span></span></code> </pre><br>  A dura√ß√£o tamb√©m possui outros m√©todos √∫teis: <br><br><pre> <code class="javascript hljs">dur.as(<span class="hljs-string"><span class="hljs-string">'seconds'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//=&gt; 7620 dur.toObject(); //=&gt; { hours: 2, minutes: 7 } dur.toISO(); //=&gt; 'PT2H7M'</span></span></code> </pre><br><h3>  Intervalos </h3><br>  Intervalos s√£o definidos como o per√≠odo entre dois pontos no tempo; a classe Interval √© usada para trabalhar com eles.  O hor√°rio de in√≠cio est√° inclu√≠do no intervalo, mas o hor√°rio de t√©rmino n√£o √©: consequentemente, o in√≠cio da convers√£o para uma sequ√™ncia de caracteres √© marcado com um colchete e o final com um colchete. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> today = DateTime.local(<span class="hljs-number"><span class="hljs-number">2018</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> later = DateTime.local(<span class="hljs-number"><span class="hljs-number">2020</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> interval = Interval.fromDateTimes(today, later); interval.toString(); <span class="hljs-comment"><span class="hljs-comment">//=&gt; "[2018-12-18T00:00:00.000+03:00 ‚Äì 2020-10-12T00:00:00.000+03:00)" interval.toISO(); //=&gt; "2018-12-18T00:00:00.000+03:00/2020-10-12T00:00:00.000+03:00" interval.length(); //=&gt; 57369600000 interval.length('years', true); //=&gt; 1.8169398907103824 interval.contains(DateTime.local(2019)); //=&gt; true</span></span></code> </pre> <br>  Os intervalos podem ser comparados entre si e combinados entre si: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nextYear = Interval.after(DateTime.local(), {<span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>}); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prevYear = Interval.before(DateTime.local(), {<span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>}); prevYear.overlaps(nextYear); <span class="hljs-comment"><span class="hljs-comment">//false prevYear.abutsStart(nextYear); //true nextYear.union(prevYear).length('years'); //=&gt; 2</span></span></code> </pre><br><h2>  Luxon and Moment </h2><br>  A biblioteca Luxon "vive" no projeto "Moment", mas n√£o √© um substituto completo para a biblioteca Moment.  O Luxon n√£o fornece a funcionalidade completa do Moment, por exemplo, a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">formata√ß√£o de data relativa</a> foi implementada apenas recentemente na vers√£o 71 do navegador Chrome, ainda n√£o funciona em outros navegadores e o suporte ainda n√£o foi implementado no Luxon (embora seja esperado).  Mas mesmo que os navegadores suportem a funcionalidade necess√°ria, voc√™ deve entender que ele estar√° dispon√≠vel apenas nesses novos ambientes.  Nos navegadores mais antigos, o Luxon trabalha com problemas, enquanto o Moment funciona a qualquer hora, em qualquer lugar. <br><br>  Al√©m disso, a API do Luxon foi completamente redesenhada e √© completamente diferente da API do momento. <br><br>  Observe as principais diferen√ßas entre Moment e Luxon. <br><br><h3>  Imunidade </h3><br>  Objetos Luxon s√£o imut√°veis, mas Moment n√£o. <br>  No exemplo abaixo, m1 e m2 s√£o o mesmo objeto que foi modificado pelo m√©todo add. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m1 = moment(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m2 = m1.add(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'hours'</span></span>); m1 === m2; <span class="hljs-comment"><span class="hljs-comment">//=&gt; true</span></span></code> </pre><br>  No caso de Luxon, o m√©todo plus retorna um novo objeto d2 sem alterar o d1 original. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d1 = DateTime.local(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> d2 = d1.plus({ <span class="hljs-attr"><span class="hljs-attr">hours</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span> }); d1 === d2; <span class="hljs-comment"><span class="hljs-comment">//=&gt; false d1.valueOf() === d2.valueOf(); //=&gt; false</span></span></code> </pre><br>  Por esse motivo, o Luxon n√£o requer construtores de c√≥pia ou m√©todos de clonagem especiais que o Moment usa para obter c√≥pias sem alterar o valor original. <br><br><h3>  Principais diferen√ßas funcionais </h3><br><ol><li>  A contagem regressiva dos meses em Luxon come√ßa em 1, e n√£o do zero, como em Moment (e nativamente no objeto Date js). </li><li>  A localiza√ß√£o e os fusos hor√°rios s√£o implementados usando a API Intl nativa (ou polyphile) e n√£o s√£o incorporados √† biblioteca. </li><li>  Luxon possui tipos internos Duration e Interval. </li><li>  O Luxon ainda n√£o suporta a formata√ß√£o de data relativa. </li><li>  Luxon tamb√©m n√£o possui um m√©todo humanizado para representar a dura√ß√£o em um estilo "humanizado" (por exemplo, "alguns segundos"). </li></ol><br><h3>  Diferen√ßas de estilo da API </h3><br><ul><li>  Nos m√©todos da API Luxon, os par√¢metros opcionais geralmente est√£o localizados por √∫ltimo. </li><li>  O Luxon possui muitos m√©todos separados para criar objetos (por exemplo, do ISO), diferentemente do Moment, que possui uma fun√ß√£o para isso, e o tipo do objeto √© definido por par√¢metros. </li><li>  Luxon tem analisadores muito rigorosos, enquanto Moment tem mais liberais, ou seja,  se o formato da sequ√™ncia de entrada for diferente do padr√£o, o Luxon imediatamente emitir√° um erro e o Moment tentar√° corrigir alguns erros no formato. </li><li>  O Luxon usa getters (dt.year, dt.isValid) para obter o valor dos campos internos, e n√£o m√©todos como Moment (m.year (), m.isValid ()). </li><li>  O Luxon permite que um m√©todo defina imediatamente todos os par√¢metros necess√°rios dt.set ({ano: 2016, m√™s: 4}); no momento, eles s√£o definidos apenas um de cada vez - uma cadeia de chamadas m.ano (2016) .m√™s (4). </li><li>  A dura√ß√£o em Luxon √© uma classe de dura√ß√£o de n√≠vel superior separada. </li></ul><br>  Caso contr√°rio, Luxon emprestou muitas id√©ias do Moment, a documenta√ß√£o ainda cont√©m tabelas de equival√™ncia dos m√©todos Moment e Luxon. <br><br><h3>  Tamanhos de arquivo da biblioteca </h3><br>  <i>Luxon (v. 1.8.2)</i> <br>  luxon.min.js - 61 KB <br><br>  <i>Momento (v. 2.23.0)</i> <br>  moment.min.js - 51 KB <br>  moment.min.js + locale / ru.js - 59 KB <br>  moment-with-locales.min.js - 323 KB <br><br>  Como voc√™ pode ver, sem as localidades do Moment, o tamanho √© 10 KB menor que o Luxon, mas com a adi√ß√£o de v√°rias localidades, o tamanho se torna aproximadamente igual. <br><br>  Se o suporte for necess√°rio imediatamente para todas as localidades, haver√° um ganho significativo da Luxon. <br><br><h3>  Sum√°rio </h3><br>  A biblioteca est√° completamente pronta para uso e o autor promete seu apoio.  A biblioteca j√° tem mais de 7k estrelas no github e sua popularidade est√° crescendo apenas.  N√£o apenas o pr√≥prio autor faz as confirma√ß√µes em seu c√≥digo, mas pelo menos mais 6 desenvolvedores. <br><br>  Assumirei que a biblioteca Luxon √© uma resposta √† apar√™ncia do suporte √† API Intl nos navegadores.  No momento, os desenvolvedores entendem que trabalhar com datas na Web pode mudar significativamente e est√° tentando se preparar para essas altera√ß√µes.  Mas eles n√£o podem prever com precis√£o o desenvolvimento da Web e, com ela, o novo projeto (que eles mesmos chamam de projeto Moment labs).  As id√©ias de Luxon ser√£o portadas para o Momento 3?  A maioria dos usu√°rios passar√° de Moment para Luxon em algum momento?  Talvez Luxon seja renomeado como Momento?  Os pr√≥prios desenvolvedores admitem que agora n√£o podem responder a essas perguntas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt433850/">https://habr.com/ru/post/pt433850/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt433838/index.html">Carta p√∫blica de Joshua Zayner sobre biohacker</a></li>
<li><a href="../pt433842/index.html">[Sexta-feira] grafite ASCII em monitores retr√¥ e outras superf√≠cies</a></li>
<li><a href="../pt433844/index.html">Sobre os tr√™s componentes necess√°rios para que a TI funcione com sucesso</a></li>
<li><a href="../pt433846/index.html">Energia nuclear antes do advento das usinas nucleares</a></li>
<li><a href="../pt433848/index.html">Patente da Apple para ve√≠culos el√©tricos</a></li>
<li><a href="../pt433852/index.html">A hist√≥ria de um experimento com o vetor Cython e C ++</a></li>
<li><a href="../pt433854/index.html">Carros voadores, m√©dicos rob√¥s e blockchain: o que aconteceu em 2018</a></li>
<li><a href="../pt433856/index.html">E quem est√° na sua gangue?</a></li>
<li><a href="../pt433858/index.html">Os melhores documentos do JPoint 2018: Java / JVM e seu desempenho, Kotlin, Spring, Docker</a></li>
<li><a href="../pt433860/index.html">Cuidando do usu√°rio ou como proteger os clientes contra erros</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>