<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöï ‚úä üöµüèæ Gerenciamento agendado de recursos de hardware üöò üë®üèæ‚Äçü§ù‚Äçüë®üèª üóìÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo discute uma poss√≠vel implementa√ß√£o de um sistema automatizado para gerenciar recursos de hardware (usando rel√©s eletromagn√©ticos como exem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gerenciamento agendado de recursos de hardware</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476854/">  Este artigo discute uma poss√≠vel implementa√ß√£o de um sistema automatizado para gerenciar recursos de hardware (usando rel√©s eletromagn√©ticos como exemplo) com refer√™ncia ao tempo absoluto.  Esse sistema pode ser muito √∫til para resolver o problema de testar a automa√ß√£o de v√°rios equipamentos. <br><br>  Por exemplo, em alguns laborat√≥rios de teste, √© necess√°rio automatizar a redefini√ß√£o de energia dos dispositivos estudados / testados em pontos de tempo estritamente definidos com refer√™ncia √† escala absoluta (por exemplo, na segunda-feira √†s 10:00 da manh√£).  No entanto, a tarefa √© complicada pelo fato de a decis√£o sobre a possibilidade de executar uma opera√ß√£o de gerenciamento de energia ser afetada pelo estado atual de outros recursos de hardware do dispositivo em estudo (por exemplo, um ou outro n√≠vel na linha GPIO de sa√≠da). <br><br>  A √∫ltima circunst√¢ncia complica um pouco a solu√ß√£o e nos leva a pensar em usar algum m√≥dulo de hardware externo no qual h√° suporte para os recursos de hardware necess√°rios para resolver esse problema, a saber: rel√©s, rel√≥gios em tempo real, linhas GPIO de entrada. <br><a name="habracut"></a><br>  Os primeiros experimentos que fizemos usando a plataforma Arduino.  No entanto, quando se tornou necess√°rio copiar esta solu√ß√£o em grandes quantidades com qualidade est√°vel, eles come√ßaram a procurar solu√ß√µes prontas.  Como resultado, ajustamos o sistema usando um m√≥dulo de hardware externo Laurent-5 com a capacidade de monitorar o processo de controle via Ethernet. <br><br><img src="https://habrastorage.org/webt/zz/2d/4f/zz2d4fw8lxsg86l9utv0i5kbvdw.jpeg"><br><br>  Para detalhes, √© necess√°rio redefinir brevemente a energia do dispositivo testado todos os dias estritamente √†s 07:00 da manh√£.  No entanto, uma redefini√ß√£o nunca deve ser realizada se o dispositivo continuar executando opera√ß√µes cr√≠ticas.  Nesse caso, um n√≠vel l√≥gico alto (+3,3 V) √© definido na linha GPIO de sa√≠da discreta do dispositivo. <br><br>  O m√≥dulo Laurent-5 foi conectado ao dispositivo de teste da seguinte forma.  O sinal de prontid√£o do dispositivo foi trazido para a linha discreta de entrada IO_1.  E a energia do dispositivo foi encaminhada atrav√©s de contatos normalmente fechados do rel√© RELE_1.  Se o rel√© estiver ligado, a energia do dispositivo em teste ser√° cortada. <br><br><img src="https://habrastorage.org/webt/es/wb/qj/eswbqjlblddxx5_lbj7nqsshxmc.png"><br><br>  Para configurar o sistema, primeiro, voc√™ precisa alterar a dire√ß√£o do m√≥dulo GPIO IO_1 Laurent-5 "na entrada".  A maneira mais f√°cil de configurar √© atrav√©s da interface da Web (o endere√ßo padr√£o √© 192.168.0.101).  Vamos para a se√ß√£o "Linhas gerais IO1 - IO8" no painel de controle principal. <br><br><img src="https://habrastorage.org/webt/kb/hx/kb/kbhxkbqp7o_xpffc_r6rr9dqsi0.png"><br><br>  Clicamos na ‚Äúseta‚Äù na linha IO_1 e alteramos a dire√ß√£o dessa linha do GPIO para o estado ‚Äúon‚Äù para analisar o estado da linha de ‚Äúprontid√£o‚Äù do dispositivo em teste. <br><br><img src="https://habrastorage.org/webt/sl/44/vt/sl44vtxi3u0-ewmcvsj4-vndkde.png"><br><br>  Em seguida, criamos regras CAT l√≥gicas que servir√£o para a automa√ß√£o da an√°lise de linha de "prontid√£o" e controlaremos o rel√©. <br><br>  Entramos na se√ß√£o CAT e clicamos no bot√£o "Criar um novo evento".  Aparecer√° uma janela na qual o ID = 1 ser√° atribu√≠do √† nova regra l√≥gica. <br><br><img src="https://habrastorage.org/webt/b8/kp/6n/b8kp6nmybfnuw4-xtykndpugevw.png"><br><br>  Escolha o tipo de evento RTC - a tarefa ser√° conclu√≠da no hor√°rio especificado. <br><br><img src="https://habrastorage.org/webt/x9/0z/11/x90z11hsooa22drer_pievghll4.png"><br><br>  Nas configura√ß√µes do evento, indicamos o tempo de resposta - todos os dias √†s 07:00 da manh√£. <br><br><img src="https://habrastorage.org/webt/ca/ne/b4/caneb4o1mlrsogy3k9baclsibju.png"><br><br>  Em resposta √† ocorr√™ncia deste evento usando comandos Ke, habilitamos a opera√ß√£o dos eventos CAT 2,3 e 4 que criaremos mais adiante.  Regras l√≥gicas adicionais s√£o necess√°rias para analisar o sinal de "prontid√£o" do dispositivo e evitar a reinicializa√ß√£o da energia, se n√£o estiver pronto para isso. <br><br><img src="https://habrastorage.org/webt/o9/1f/vs/o91fvsqnyb7tpvracojjprfbljs.png"><br><br>  Vamos dar um nome simb√≥lico a esta regra l√≥gica para maior clareza. <br><br><img src="https://habrastorage.org/webt/le/uj/fd/leujfdee4ccg6gseknn-mvdb618.png"><br><br>  Como resultado, um novo evento com ID = 1 aparecer√° na lista de regras l√≥gicas: <br><br><img src="https://habrastorage.org/webt/rq/pq/cc/rqpqccypdsyaleov4sfbwzbgr9m.png"><br><br>  Adicione a seguinte regra l√≥gica com ID = 2, que ser√° executada em um timer com uma frequ√™ncia de 1 vez por segundo. <br><br><img src="https://habrastorage.org/webt/s-/a7/uq/s-a7uqfybia7afxlyioo9kahhns.png"><br><br><img src="https://habrastorage.org/webt/h6/dd/lq/h6ddlqp8iqsiqxgem4g5tbsrcxc.png"><br><br>  Indicamos uma condi√ß√£o adicional que deve ser atendida para que a regra l√≥gica funcione, ou seja, especificamos a necessidade de um n√≠vel l√≥gico baixo em IO_1, sinalizando assim que o dispositivo est√° pronto para uma redefini√ß√£o de energia. <br><br><img src="https://habrastorage.org/webt/s2/aw/5l/s2aw5lhfyhs0zbysrs6c-stbpdk.png"><br><br>  Se todas as condi√ß√µes forem atendidas, desligue os eventos 2,3 e 4. Redefiniremos o contador de respostas para o evento 3 (veja abaixo) e ligaremos o rel√© RELE_1 por 4 segundos, ap√≥s o qual ele retornar√° automaticamente ao seu estado original (desligado). <br><br><img src="https://habrastorage.org/webt/45/rp/6x/45rp6xytgrzymc0j9knlkyckjfy.png"><br><br>  No entanto, o que devo fazer se o dispositivo "congelar" e o alarme tocar o tempo todo?  Para isso, usaremos eventos com ID = 3 e 4 nos quais implementamos uma apar√™ncia de um cron√¥metro de vigil√¢ncia com o envio de uma mensagem de alarme se, dentro de um tempo especificado, o dispositivo n√£o sinalizar sua disponibilidade para uma redefini√ß√£o de hardware. <br><br>  Vamos criar um evento com ID = 3 de acordo com o cron√¥metro comum, com uma frequ√™ncia de resposta de uma vez a cada 1 segundo.  Na verdade, esse evento n√£o far√° nada, basta enviar um comando $ KE vazio.  No entanto, a cada opera√ß√£o, o contador de opera√ß√µes deste evento aumentar√°.  Usando uma regra l√≥gica com ID = 4, monitoraremos esse valor e, se exceder um determinado limite (por exemplo, 300 opera√ß√µes, o que corresponde a 5 minutos), interromperemos a opera√ß√£o e incrementaremos o valor da vari√°vel de programa VAR_1 para an√°lise subsequente do n√∫mero de opera√ß√µes com falha. <br><br>  No total, um conjunto de regras l√≥gicas ter√° a seguinte apar√™ncia.  Para iniciar o sistema inteiro, basta ativar o processamento de eventos com ID = 1. <br><br><img src="https://habrastorage.org/webt/uu/gk/hm/uugkhmktxtbvttqtvdwwvusiey0.png"><br><br>  E haver√° o seguinte: todos os dias √†s 07:00 da manh√£, uma regra l√≥gica com ID = 1. ser√° acionada.Neste caso, o processamento de eventos com os IDs 2, 3 e 4. ser√° inclu√≠do como uma rea√ß√£o.Se o dispositivo em teste estiver pronto para reiniciar a energia (n√≠vel l√≥gico 0 a linha de sinal) - como parte da regra ID = 2, o processamento dos eventos 2-4 ser√° desativado, o contador de opera√ß√µes da 3¬™ regra foi redefinido por algum motivo e o dispositivo foi redefinido ligando brevemente o rel√©. <br><br>  Paralelamente, iniciamos a contagem regressiva com um rel√≥gio uma vez por segundo.  Ao verificar o valor do cron√¥metro do watchdog na estrutura da regra ID = 4, podemos travar a espera e sinalizar a falha de toda a opera√ß√£o naquele dia, incrementando a vari√°vel de programa VAR_1, cujo valor pode ser solicitado via TCP / HTTP para an√°lise subseq√ºente. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt476854/">https://habr.com/ru/post/pt476854/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt476838/index.html">Como capturar luz com espuma: rede de espuma-f√≥ton</a></li>
<li><a href="../pt476842/index.html">Como construir um sistema eficaz de suporte ao cliente</a></li>
<li><a href="../pt476844/index.html">Espec√≠fico e global: programa Mobius 2019 Moscou</a></li>
<li><a href="../pt476848/index.html">Pipeline de Hackney: hackathon da OZON, Netology e Yandex.Tolki</a></li>
<li><a href="../pt476852/index.html">Experi√™ncia pr√°tica atualizando o MySQL 5.7 para a vers√£o 8.0</a></li>
<li><a href="../pt476858/index.html">Exibir n√∫meros por LED</a></li>
<li><a href="../pt476862/index.html">Como escrever um contrato Python inteligente na rede Ontology. Parte 3: API de tempo de execu√ß√£o</a></li>
<li><a href="../pt476864/index.html">USB4: o que h√° de novo e por que isso importa</a></li>
<li><a href="../pt476868/index.html">IBM, mem√≥ria de linha de atraso e hist√≥rico de exibi√ß√£o de 80 √ó 24 caracteres</a></li>
<li><a href="../pt476870/index.html">Matem√°ticos come√ßam a domar o "problema do girassol"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>