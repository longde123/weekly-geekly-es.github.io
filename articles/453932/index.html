<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游뱜游 游 游눊游 Unas palabras en defensa del monolito 俱뫮잺 游븿游낗 游놇游낕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comparamos las caracter칤sticas del microservicio y la arquitectura monol칤tica, sus ventajas y desventajas. El art칤culo fue preparado para Habr basado ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unas palabras en defensa del monolito</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/453932/">  Comparamos las caracter칤sticas del microservicio y la arquitectura monol칤tica, sus ventajas y desventajas.  El art칤culo fue preparado para Habr basado en los materiales de nuestro meta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hot Backend</a> , que se celebr칩 en Samara el 9 de febrero de 2019.  Consideramos los factores de la elecci칩n de la arquitectura en funci칩n de la tarea espec칤fica. <a name="habracut"></a><br><br>  Incluso hace 5 a침os, nadie hab칤a o칤do hablar de microservicios.  Sin embargo, su popularidad aumenta de a침o en a침o, seg칰n las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estad칤sticas de</a> Google Trends. <br><br><img src="https://habrastorage.org/webt/1_/of/jd/1_ofjdwx6pauxathtq1srtfdsas.png"><br><br><h2>  Monolito y microservicios: ejemplos </h2><br>  Si el proyecto usa una arquitectura monol칤tica, entonces el desarrollador solo tiene una aplicaci칩n, cuyos componentes y m칩dulos funcionan con una sola base. <br><br><img src="https://habrastorage.org/webt/8q/pt/px/8qptpxklg15wtydbx847sqk2c9o.jpeg"><br><br>  La arquitectura de microservicios implica la descomposici칩n en m칩dulos que se ejecutan como procesos separados y pueden tener servidores separados.  Cada microservicio funciona con su propia base de datos y todos estos servicios pueden comunicarse entre s칤 de forma s칤ncrona (http) y as칤ncrona.  Adem치s, para optimizar la arquitectura, es deseable minimizar la relaci칩n entre los servicios. <br><br>  El siguiente diagrama est치 simplificado, refleja, en primer lugar, los componentes del negocio. <br><br><img src="https://habrastorage.org/webt/q2/gi/y-/q2giy-br8pq2amiqihkrkzmn2e4.jpeg"><br><br><h2>  Microservicios: beneficios </h2><br>  Existen al menos cuatro ventajas de la arquitectura de microservicios: <br><br>  <b>Escalado e implementaci칩n independientes</b> <br><br>  Se proporciona una implementaci칩n independiente para cada microservicio, y esto es conveniente al actualizar m칩dulos individuales.  Si la carga en el m칩dulo aumenta, el microservicio correspondiente se puede escalar sin afectar a los dem치s.  Esto le permite distribuir de manera flexible la carga y ahorrar recursos. <br><br>  <b>Desarrollo independiente</b> <br><br>  Cada microservicio (por ejemplo, un m칩dulo de memoria) puede ser desarrollado por un equipo para aumentar la velocidad de creaci칩n de un producto de software. <br><br>  <b>Sostenibilidad</b> <br><br>  La falla de un microservicio no afecta el desempe침o de otros m칩dulos. <br><br>  <b>Heterogeneidad</b> <br><br>  Cada equipo es libre de elegir su propio idioma y tecnolog칤a para implementar microservicios, sin embargo, es deseable que tengan interfaces compatibles. <br><br>  Entre los desarrolladores, puede escuchar la opini칩n de que la arquitectura monol칤tica est치 desactualizada, es dif칤cil de mantener y escalar, crece r치pidamente en un "gran trozo de tierra" y es pr치cticamente antipatr칩n, es decir, su presencia en el c칩digo es indeseable.  Las grandes empresas, como Netflix, que cambiaron a la arquitectura de microservicios en sus proyectos, a menudo se citan como evidencia de esta opini칩n. <br><br>  쯌eamos si todos realmente deber칤an cambiar de un monolito a microservicios siguiendo el ejemplo de las marcas m치s grandes? <br><br><h2>  Cambiar a microservicios: posibles dificultades </h2><br>  <b>Problema uno: descomposici칩n</b> <br><br>  Idealmente, la aplicaci칩n debe dividirse en microservicios para que interact칰en entre s칤 lo menos posible, de lo contrario, la aplicaci칩n ser치 dif칤cil de mantener.  Al mismo tiempo, la descomposici칩n es dif칤cil de implementar al comienzo del desarrollo, cuando los problemas comerciales y el 치rea tem치tica a칰n pueden cambiar con la llegada de nuevos requisitos.  Refactorizar es costoso. <br><br>  Si se hace necesario transferir parte de las funciones del servicio A al servicio B, puede haber dificultades: por ejemplo, los servicios se ejecutan en diferentes idiomas, las llamadas internas a los servicios se convierten en red, necesita conectar otras bibliotecas.  Podemos verificar la correcci칩n de la refactorizaci칩n solo con la ayuda de las pruebas. <br><br><img src="https://habrastorage.org/webt/ms/sb/zd/mssbzdbu2gw0mkt3xxsxd7cozuo.jpeg"><br><br>  <b>Problema dos: transacciones</b> <br><br>  Otro problema es que los microservicios no tienen el concepto de transacciones distribuidas.  Podemos garantizar la integridad arquitect칩nica de una operaci칩n comercial solo dentro de un microservicio.  Si la operaci칩n involucra varios microservicios, se pueden usar diferentes bases de datos all칤, y dicha transacci칩n tendr치 que ser abandonada.  Para resolver este problema, existen varios m칠todos utilizados en los negocios cuando la accesibilidad es m치s importante que la integridad.  Al mismo tiempo, se proporcionan mecanismos de compensaci칩n en caso de que algo salga mal.  Por ejemplo, si los productos no est치n en stock, debe realizar un reembolso en la cuenta del comprador. <br><br>  Si un monolito nos da integridad arquitect칩nica autom치ticamente, entonces con microservicios debe crear su propio mecanismo y usar bibliotecas con soluciones listas para usar.  Al distribuir una operaci칩n entre servicios, es mejor solicitar datos sincr칩nicamente y realizar acciones posteriores de forma asincr칩nica.  Si es imposible acceder a uno de los servicios, el equipo se pondr치 en cola tan pronto como est칠 disponible nuevamente. <br><br>  En este sentido, es necesario revisar el enfoque de la interfaz de usuario.  Se debe notificar al usuario que algunas acciones no se realizan de inmediato, sino dentro de un tiempo determinado.  Cuando se procesa la solicitud, recibe una invitaci칩n para ver los resultados. <br><br><img src="https://habrastorage.org/webt/j3/ms/1m/j3ms1mf_jzbabdwangp62th2uru.jpeg"><br><br>  <b>Problema tres: informes</b> <br><br>  Si utilizamos una arquitectura monol칤tica con una sola base de datos, para crear un informe complejo puede escribir seleccionar y extraer varias etiquetas de datos: tarde o temprano se mostrar치n.  Sin embargo, en microservicios, estos datos se pueden dispersar en diferentes bases. <br><br>  Por ejemplo, necesitamos enumerar compa침칤as con m칠tricas espec칤ficas.  Con una simple lista de empresas, todo funciona.  쯏 si necesita agregar m칠tricas que se encuentran en otra base de datos?  S칤, podemos hacer una solicitud adicional y solicitar m칠tricas por TIN.  쯏 si esta lista necesita ser filtrada y ordenada?  La lista de empresas puede ser muy grande, y luego tenemos que introducir un servicio adicional con su propia base de datos: informes. <br><br><img src="https://habrastorage.org/webt/lz/kq/sn/lzkqsn07kbbjovz9_rttgfqbfmg.jpeg"><br><br>  <b>Problema cuatro: alta complejidad de desarrollo</b> <br><br>  El trabajo en servicios distribuidos es m치s complicado: todas las solicitudes se realizan a trav칠s de la red y se pueden desactivar, debe proporcionar un mecanismo de devoluci칩n de llamada (쯨olver치 a hacer la llamada? 쮺u치ntas veces?).  Estos son los "ladrillos" que se acumulan gradualmente y contribuyen a aumentar la complejidad del proyecto. <br><br>  Los servicios pueden ser desarrollados por varios equipos diferentes, y debe documentarlos, mantener la documentaci칩n actualizada y advertir a otros equipos cuando cambie la versi칩n.  Estos son costos laborales adicionales. <br><br>  Si cada equipo tiene una implementaci칩n independiente, debe mantener al menos la versi칩n anterior y deshabilitarla solo despu칠s de que todos los consumidores del servicio hayan cambiado a la nueva API. <br>  Por supuesto, podemos llevar todas las API a alg칰n tipo de artefacto que estar치 disponible p칰blicamente.  Pero, en primer lugar, los servicios se pueden escribir en diferentes idiomas y, en segundo lugar, esto no se recomienda.  Por ejemplo, en uno de nuestros proyectos, rechazamos esto a pedido del cliente, relacionado con consideraciones de seguridad.  Cada microservicio tiene un repositorio separado y el cliente no les da acceso. <br><br>  En el proceso de desarrollo, todo puede funcionar correctamente, y luego, no.  Sucede que, en caso de excepciones, la aplicaci칩n intenta procesarlos infinitamente, y esto genera una gran carga: todo el sistema "se despliega".  Para evitar tales situaciones, debe configurar todo, por ejemplo, para limitar el n칰mero de intentos, no devolver esta llamada a la cola en el mismo segundo, etc. <br><br><img src="https://habrastorage.org/webt/_w/jd/oj/_wjdoj3ln-k7ysfb6wuh8kz1ycg.jpeg"><br><br><img src="https://habrastorage.org/webt/ae/rr/xc/aerrxc3udwi9pgafnmkzc7xy2du.jpeg"><br><br>  <b>El quinto problema: la complejidad de las pruebas, el rastreo y la depuraci칩n</b> <br><br>  Para probar un problema, debe descargar todos los microservicios involucrados.  La depuraci칩n se convierte en una tarea no trivial, y todos los registros deben recopilarse en alg칰n lugar en un solo lugar.  En este caso, necesita tantos registros como sea posible para descubrir qu칠 sucedi칩.  Para rastrear el problema, debe comprender todo el camino que ha recorrido el mensaje.  Las pruebas unitarias no son suficientes aqu칤, ya que es probable que haya errores en la uni칩n de los servicios.  Al realizar cambios, es posible verificar la operatividad solo despu칠s de ejecutar en el soporte.  Podemos limitar cada microservicio a una cierta cantidad de memoria (por ejemplo, 500 megabytes), pero hay momentos de carga m치xima cuando se necesitan hasta dos gigabytes.  Hay momentos en que el sistema comienza a ralentizarse.  Como resultado, los recursos se pueden gastar en algo que no pertenece a las tareas inmediatas del cliente: por ejemplo, solo hay dos microservicios comerciales, y la mitad de los recursos se gastan en tres microservicios adicionales que respaldan el trabajo de los dem치s. <br><br><img src="https://habrastorage.org/webt/pl/bn/36/plbn36qdp9gnyslu-b0xbecfo7c.jpeg"><br><br><h2>  Microservicio o monolito: criterios de selecci칩n </h2><br>  Al elegir entre arquitectura monol칤tica y microservicio, en primer lugar, debe proceder de la complejidad del 치rea tem치tica y la necesidad de escalar. <br><br>  Si el 치rea tem치tica es simple y no se espera un aumento global en el n칰mero de usuarios, entonces los microservicios se pueden usar sin ninguna duda.  En otros casos, es mejor comenzar el desarrollo en un monolito y ahorrar recursos si no se requiere escalar.  Si el 치rea tem치tica es compleja, y en la etapa inicial no se definen los requisitos finales, tambi칠n es mejor comenzar con un monolito, para no volver a hacer los microservicios varias veces.  Con el desarrollo posterior del proyecto, es posible distinguir sus partes individuales en microservicios. <br><br><img src="https://habrastorage.org/webt/bl/5c/9e/bl5c9elyajqq00pivozpby_yauy.jpeg"><br><br>  Una ventaja es la presencia de l칤mites al comienzo del proyecto, ya que esto ayudar치 a no romperlos durante el proceso de desarrollo.  Tambi칠n tiene sentido comenzar con una base de datos, pero definir un esquema para cada m칩dulo (por ejemplo, un esquema de pago).  Posteriormente, esto ayudar치 a simplificar la divisi칩n de m칩dulos en microservicios.  En este caso, observamos los l칤mites de los m칩dulos y podemos usar microservicios. <br><br>  Cada m칩dulo debe tener su propia API, para que luego se pueda asignar y convertir el m칩dulo en un microservicio. <br><br><img src="https://habrastorage.org/webt/6i/rp/b9/6irpb9ewnkmgleylittjhh5z-f8.jpeg"><br><br>  Una vez determinados los l칤mites de los m칩dulos, puede proceder a la descomposici칩n en microservicios, si es necesario.  En aproximadamente el 90% de los casos ser치 posible permanecer en el monolito, pero si es necesario, ser치 m치s f치cil y econ칩mico cambiar la arquitectura. <br><br>  En nuestra pr치ctica de trabajar con monolitos y microservicios, llegamos a las siguientes conclusiones: <br><ul><li>  No cambie a microservicios solo porque los usa Netflix, Twitter, Facebook </li><li>  Comience con dos o tres microservicios que interact칰en entre s칤, resuelva en detalle todos los requisitos no funcionales (seguridad, tolerancia a fallas, escalabilidad, etc.) y solo luego pase a otros servicios </li><li>  Automatiza todo lo posible </li><li>  Configurar monitoreo </li><li>  Escribir autotests </li><li>  No utilice transacciones distribuidas (pero esta no es una raz칩n para rechazar la garant칤a de integridad de los datos). </li><li>  Si desea utilizar la arquitectura de microservicios, prep치rese para el hecho de que el desarrollo puede costarle aproximadamente 3 veces m치s que en un monolito.  Sin embargo, ambas tecnolog칤as tienen sus propias desventajas y ventajas; cada una de ellas tiene su propio nicho. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/453932/">https://habr.com/ru/post/453932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../453914/index.html">Instrucciones de instalaci칩n del cliente de prueba TON</a></li>
<li><a href="../453916/index.html">C칩mo protegerse de los estafadores m칩viles</a></li>
<li><a href="../453920/index.html">C칩mo tomar el control de su infraestructura de red. Cap칤tulo cuatro Automatizaci칩n Plantillas</a></li>
<li><a href="../453926/index.html">C칩mo funciona y funciona el servicio de coche compartido</a></li>
<li><a href="../453930/index.html">Comparaci칩n y selecci칩n de sistemas de migraci칩n de datos.</a></li>
<li><a href="../453934/index.html">11 preguntas para discutir antes de comenzar a trabajar</a></li>
<li><a href="../453938/index.html">Seguimiento de bicicletas robadas NB-IoT</a></li>
<li><a href="../453942/index.html">Acerca de la 칠tica con el ejemplo de PMI Codex</a></li>
<li><a href="../453944/index.html">Errores enmascarados en embedd</a></li>
<li><a href="../453950/index.html">Se supone que debes estar aqu칤! 22 a침os del lanzamiento del legendario juego Duke Nukem 3D</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>