<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฉโโ๏ธ ๐ ุงูุชููู ุนู ุงุณุชุฎุฏุงู Ngrx / ุงูุขุซุงุฑ ููุฐุง ุงูุบุฑุถ ๐ ๐ง๐พ ๐๐ฝ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุจุนุถ ุงูุฃุญูุงู ูุคุฏู ุฃุจุณุท ุชุทุจูู ูููุธุงุฆู ูู ุงูููุงูุฉ ุฅูู ุฎูู ูุดููุงุช ุฃูุซุฑ ูู ุงูุฌูุฏ ุ ููุง ูุคุฏู ุฅูู ุฒูุงุฏุฉ ุงูุชุนููุฏ ูู ุฃูุงูู ุฃุฎุฑู. ูุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูู ุจููุฉ ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุชููู ุนู ุงุณุชุฎุฏุงู Ngrx / ุงูุขุซุงุฑ ููุฐุง ุงูุบุฑุถ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448858/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/73/82/fl/7382flctc9zmk_xd-mox_6ahrru.jpeg" alt="ุชูุซุงู ูุตูู ูุน ุงูุขุซุงุฑ"><br><br>  ูู ุจุนุถ ุงูุฃุญูุงู ูุคุฏู ุฃุจุณุท ุชุทุจูู ูููุธุงุฆู ูู ุงูููุงูุฉ ุฅูู ุฎูู ูุดููุงุช ุฃูุซุฑ ูู ุงูุฌูุฏ ุ ููุง ูุคุฏู ุฅูู ุฒูุงุฏุฉ ุงูุชุนููุฏ ูู ุฃูุงูู ุฃุฎุฑู.  ูุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูู ุจููุฉ ูุชุนุฑุฌุฉ ูุง ูุฑูุฏ ุฃุญุฏ ุฃู ูููุณูุง. <br><a name="habracut"></a><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุญุธุงุช ุงููุชุฑุฌู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุชุจ ุงูููุงู ูู ุนุงู 2017 ุ ูููู ุฐู ุตูุฉ ุจูุฐุง ุงูููู.  ุฅูู ููุฌู ููุฃุดุฎุงุต ุฐูู ุงูุฎุจุฑุฉ ูู RxJS ู Ngrx ุ ุฃู ุงูุฐูู ูุฑุบุจูู ูู ุชุฌุฑุจุฉ Redux in Angular. </p><br>  ุชู ุชุญุฏูุซ ููุชุทูุงุช ุงูููุฏ ุจูุงุกู ุนูู ุตูุบุฉ RxJS ุงูุญุงููุฉ ูุชู ุชุนุฏูููุง ููููุงู ูุชุญุณูู ูุงุจููุฉ ุงููุฑุงุกุฉ ูุณูููุฉ ุงูููู. <br></div></div><br><p style=";text-align:right;direction:rtl"> Ngrx / store ูู ููุชุจุฉ Angular ุชุณุงุนุฏ ุนูู ุงุญุชูุงุก ุชุนููุฏ ุงููุธุงุฆู ุงููุฑุฏูุฉ.  ุฃุญุฏ ุงูุฃุณุจุงุจ ูู ุฃู ngrx / store ูุดุชูู ุนูู ุงูุจุฑูุฌุฉ ุงููุธูููุฉ ุ ูุงูุชู ุชููุฏ ูุง ูููู ุงูููุงู ุจู ุฏุงุฎู ุฅุญุฏู ุงููุธุงุฆู ูุชุญููู ุงููุฒูุฏ ูู ุงููุนููููุฉ ุฎุงุฑุฌูุง.  ูู ngrx / store ุ ุชุนุชุจุฑ ุฃุดูุงุก ูุซู ุงููุฎูุถุงุช (ุงููุดุงุฑ ุฅูููุง ูููุง ููู ุจุงุณู ุงููุฎูุถุงุช) ุ ูุงููุญุฏุฏุงุช (ุงููุดุงุฑ ุฅูููุง ูููุง ููู ุจุงุณู ุงููุญุฏุฏุงุช) ููุดุบูู RxJS ูุธุงุฆู ุฎุงูุตุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงููุธุงุฆู ุงูุตุงููุฉ ุฃุณูู ูู ุงูุงุฎุชุจุงุฑ ูุงูุชุตุญูุญ ูุงูุชุญููู ูุงูููุงุฒูุฉ ูุงูุฌูุน.  ูุธููุฉ ูุธููุฉ ุฅุฐุง: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุน ููุณ ุงููุฏุฎูุงุช ุ ูุฅููุง ุชุฑุฌุน ุฏุงุฆูุง ููุณ ุงููุฎุฑุฌุงุช. </li><li style=";text-align:right;direction:rtl">  ูุง ุขุซุงุฑ ุฌุงูุจูุฉ. </li></ul><br><p style=";text-align:right;direction:rtl">  ูุง ูููู ุชุฌูุจ ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ุ ูููููุง ูุนุฒููุฉ ูู ngrx / store ุ ูุจุงูุชุงูู ูุฅู ุจููุฉ ุงูุชุทุจูู ูุฏ ุชุชููู ูู ูุธุงุฆู ุฎุงูุตุฉ. </p><br><h3 style=";text-align:right;direction:rtl">  ุขุซุงุฑ ุฌุงูุจูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุฑุณู ุงููุณุชุฎุฏู ุงููููุฐุฌ ุ ูุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุชุบููุฑุงุช ุนูู ุงูุฎุงุฏู.  ูุนุฏ ุชุบููุฑ ุงูุฎุงุฏู ูุงูุงุณุชุฌุงุจุฉ ููุนููู ุฃุญุฏ ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ.  ูููู ูุนุงูุฌุฉ ูุฐุง ูู ุงููููู: </p><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'SAVE_DATA'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: data, }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.saveData(data) <span class="hljs-comment"><span class="hljs-comment">// POST    .pipe(map(res =&gt; this.store.dispatch({ type: 'DATA_SAVED' }))) .subscribe();</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูููู ูู ุงูุฑุงุฆุน ุฃู ูุชููู ูู ุฅุฑุณุงู ุงูุฅุฌุฑุงุก (ุงููุดุงุฑ ุฅููู ูููุง ููู ุจุงุณู ุงูุฅุฌุฑุงุก) ุฏุงุฎู ุงููููู ุนูุฏูุง ูููู ุงููุณุชุฎุฏู ุจุฅุฑุณุงู ุงููููุฐุฌ ูุงูุชุนุงูู ูุน ุงูุชุฃุซูุฑ ุงูุฌุงูุจู ูู ููุงู ุขุฎุฑ. </p><br><p style=";text-align:right;direction:rtl">  Ngrx / ุชุฃุซูุฑุงุช ูู ุงููุณูุทุฉ ููุนุงูุฌุฉ ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ูู ngrx / store.  ูุณุชูุน ุฅูู ุงูุฅุฌุฑุงุกุงุช ุงููุฑุณูุฉ ูู ุงูุฎูุท ุงูุฐู ูููู ููุงุญุธุชู ุ ููุคุฏู ุชุฃุซูุฑุงุช ุฌุงูุจูุฉ ุ ููุนูุฏ ุฅุฌุฑุงุกุงุช ุฌุฏูุฏุฉ ุนูู ุงูููุฑ ุฃู ุจุดูู ุบูุฑ ูุชุฒุงูู.  ูุชู ุชูุฑูุฑ ุงูุฅุฌุฑุงุกุงุช ุงูุชู ุชู ุฅุฑุฌุงุนูุง ุฅูู ุงููุฎูุถ. </p><br><p style=";text-align:right;direction:rtl">  ุงููุฏุฑุฉ ุนูู ุงูุชุนุงูู ูุน ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ุจุทุฑููุฉ RxJS ุชุฌุนู ุงูุดูุฑุฉ ุฃูุซุฑ ูุธุงูุฉ.  ุจุนุฏ ุฅุฑุณุงู ุงูุฅุฌุฑุงุก ุงูุฃููู <code>SAVE_DATA</code> ูู ุงููููู ุ ููููู ุฅูุดุงุก ูุฆุฉ ุชุฃุซูุฑ ููุชุนุงูู ูุน ุงูุจุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">@Effect() saveData$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actions$.pipe( ofType(<span class="hljs-string"><span class="hljs-string">'SAVE_DATA'</span></span>), pluck(<span class="hljs-string"><span class="hljs-string">'payload'</span></span>), switchMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.saveData(data)), map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'DATA_SAVED'</span></span> })), );</code> </pre><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูุจุณุท ุชุดุบูู ุงููููู ููุท ูุจู ุฅุฑุณุงู ุงูุฅุฌุฑุงุกุงุช ูุงูุงุดุชุฑุงู ูู ูููู ููุงุญุธุชูุง. </p><br><h2 style=";text-align:right;direction:rtl">  ูู ุงูุณูู ุฅุณุงุกุฉ ุงุณุชุฎุฏุงู Ngrx / ุชุฃุซูุฑุงุช </h2><br><p style=";text-align:right;direction:rtl">  Ngrx / effects ูู ุญู ููู ููุบุงูุฉ ุ ูุฐูู ูู ุงูุณูู ุฅุณุงุกุฉ ุงุณุชุฎุฏุงูู.  ูููุง ููู ุจุนุถ ุฃููุงุท ููุงูุญุฉ ngrx / store ุงูุดุงุฆุนุฉ ุงูุชู ูุจุณุทูุง Ngrx / ุชุฃุซูุฑุงุช: </p><br><h3 style=";text-align:right;direction:rtl">  1. ููุฑุฑุฉ ุงูุฏููุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุงูุชุฑุถ ุฃูู ุชุนูู ุนูู ุชุทุจูู ูู ููุน ูุง ูููุณุงุฆุท ุงููุชุนุฏุฏุฉ ุ ูุฃู ูุฏูู ุงูุฎุตุงุฆุต ุงูุชุงููุฉ ูู ุดุฌุฑุฉ ุงูุญุงูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface State { <span class="hljs-attr"><span class="hljs-attr">mediaPlaying</span></span>: boolean; audioPlaying: boolean; videoPlaying: boolean; }</code> </pre><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุงูุตูุช ูู ููุน ูู ุงููุณุงุฆุท ุ ูููุง ูุงู <code>audioPlaying</code> ุตุญูุญูุง ุ ูุฌุจ ุฃู ูููู ุชุดุบูู ุงููุณุงุฆุท ุตุญูุญูุง ุฃูุถูุง.  ูุฐุง ุ ุฅููู ุงูุณุคุงู ุงูุชุงูู: "ููู ุฃุชุฃูุฏ ูู ุชุญุฏูุซ mediaPlaying ุนูุฏ ุชุญุฏูุซ audioPlayingุ" </p><br><p style=";text-align:right;direction:rtl">  <b>ุฅุฌุงุจุฉ ุบูุฑ ุตุงูุญุฉ</b> : ุงุณุชุฎุฏุงู Ngrx / ุชุฃุซูุฑุงุช! </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">@Effect() playMediaWithAudio$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actions$.pipe( ofType(<span class="hljs-string"><span class="hljs-string">'PLAY_AUDIO'</span></span>), map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'PLAY_MEDIA'</span></span> })), );</code> </pre><br><p style=";text-align:right;direction:rtl">  <b>ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ ูู</b> : ุฅุฐุง ูุงูุช ุญุงูุฉ <code>mediaPlaying</code> ุงูุชูุจุค ุจูุง ุจุงููุงูู ูู ุฌุงูุจ ุฌุฒุก ุขุฎุฑ ูู ุดุฌุฑุฉ ุงูุญุงูุฉ ุ ูุฅู ูุฐู ููุณุช ุญุงูุฉ ุญููููุฉ.  ูุฐู ุญุงูุฉ ูุดุชูุฉ.  ุฅูู ููุชูู ุฅูู ุงููุญุฏุฏ ูููุณ ุฅูู ุงููุชุฌุฑ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">audioPlaying$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.select(<span class="hljs-string"><span class="hljs-string">'audioPlaying'</span></span>); videoPlaying$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.select(<span class="hljs-string"><span class="hljs-string">'videoPlaying'</span></span>); mediaPlaying$ = combineLatest(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.audioPlaying$, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.videoPlaying$).pipe( map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[audioPlaying, videoPlaying]</span></span></span><span class="hljs-function">) =&gt;</span></span> audioPlaying || videoPlaying), );</code> </pre><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููู ุฃู ุชุธู ุญุงูุชูุง ูุธููุฉ ูุทุจูุนูุฉ ุ ููุญู ูุง ูุณุชุฎุฏู Ngrx / ุชุฃุซูุฑุงุช ูุดูุก ููุณ ูู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ. </p><br><h3 style=";text-align:right;direction:rtl">  2. ุชุณูุณู ุงูุฅุฌุฑุงุกุงุช ูุน ุงููุฎูุถ </h3><br><p style=";text-align:right;direction:rtl">  ุชุฎูู ุฃู ูุฏูู ูุฐู ุงูุฎุตุงุฆุต ูู ุดุฌุฑุฉ ุงูููุงูุฉ ุงูุฎุงุตุฉ ุจู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface State { <span class="hljs-attr"><span class="hljs-attr">items</span></span>: { [index: number]: Item }; favoriteItems: number[]; }</code> </pre><br><p style=";text-align:right;direction:rtl">  ุซู ูููู ุงููุณุชุฎุฏู ุจุญุฐู ุงูุนูุตุฑ.  ุนูุฏ ุฅุฑุฌุงุน ุทูุจ ุงูุญุฐู ุ <code>DELETE_ITEM_SUCCESS</code> ุฅุฑุณุงู ุฅุฌุฑุงุก <code>DELETE_ITEM_SUCCESS</code> ูุชุญุฏูุซ ุญุงูุฉ ุชุทุจูููุง.  ูู ูุฎูุถ <code>items</code> ุ ุชุชู ุฅุฒุงูุฉ <code>Item</code> ูุฑุฏู ูู ูุงุฆู <code>items</code> .  ูููู ุฅุฐุง ูุงู ูุนุฑู ุงูุนูุตุฑ ูุฐุง ูู ุตููู <code>favoriteItems</code> ุ ูุฅู ุงูุนูุตุฑ ุงูุฐู ูุดูุฑ ุฅููู ุณูููู ุบุงุฆุจุงู.  ูุฐุง ูุฅู ุงูุณุคุงู ูู ุ ููู ูููููู ุงูุชุฃูุฏ ูู ุฅุฒุงูุฉ ุงููุนุฑู ูู ุงูุนูุงุตุฑ <code>favoriteItems</code> ุนูุฏ ุฅุฑุณุงู ุฅุฌุฑุงุก <code>DELETE_ITEM_SUCCESS</code> ุ </p><br><p style=";text-align:right;direction:rtl">  <b>ุฅุฌุงุจุฉ ุบูุฑ ุตุงูุญุฉ</b> : ุงุณุชุฎุฏุงู Ngrx / ุชุฃุซูุฑุงุช! </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">@Effect() removeFavoriteItemId$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actions$.pipe( ofType(<span class="hljs-string"><span class="hljs-string">'DELETE_ITEM_SUCCESS'</span></span>), map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'REMOVE_FAVORITE_ITEM_ID'</span></span> })), );</code> </pre><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ุณูููู ูุฏููุง ุงูุขู ุฅุฌุฑุงุกุงู ูุชู ุฅุฑุณุงูููุง ูุงุญุฏูุง ุชูู ุงูุขุฎุฑ ุ ููุนูุฏ ูุฎูุถุงู ุญุงูุฉ ุฌุฏูุฏุฉ ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  <b>ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ</b> : ูููู ูุนุงูุฌุฉ <code>DELETE_ITEM_SUCCESS</code> ุจูุงุณุทุฉ ูู ูู ูุฎูุถ <code>items</code> <code>DELETE_ITEM_SUCCESS</code> <code>items</code> <code>favoriteItems</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">favoriteItemsReducer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state = initialState, action: Action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'REMOVE_FAVORITE_ITEM'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'DELETE_ITEM_SUCCESS'</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> itemId = action.payload; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">id</span></span></span><span class="hljs-function"> =&gt;</span></span> id !== itemId); <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state; } }</code> </pre><br><p style=";text-align:right;direction:rtl">  ุงููุฏู ูู ุงูุฅุฌุฑุงุก ูู ูุตู ูุง ุญุฏุซ ุนู ููููุฉ ุชุบููุฑ ุงูุฏููุฉ.  ูุง ุญุฏุซ ูุงู <code>DELETE_ITEM_SUCCESS</code> .  ูููุฉ ุงููุฎูุถุงุช ูู ุงูุชุณุจุจ ูู ุชุบููุฑ ููุงุซู ูู ุงูุญุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุง ุชุนุชุจุฑ ุฅุฒุงูุฉ ูุนุฑู ูู ุงูุนูุงุตุฑ <code>favoriteItems</code> ูู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ูุญุฐู <code>Item</code> .  ุชุชู ูุฒุงููุฉ ุงูุนูููุฉ ุจุฑูุชูุง ุจุงููุงูู ููููู ูุนุงูุฌุชูุง ุจูุงุณุทุฉ ุงููุฎูุถุงุช.  ููุณุช ููุงู ุญุงุฌุฉ Ngrx / ุงูุขุซุงุฑ. </p><br><h3 style=";text-align:right;direction:rtl">  3. ุทูุจ โโุจูุงูุงุช ูููููู </h3><br><p style=";text-align:right;direction:rtl">  ูุญุชุงุฌ ุงููููู ุงูุฎุงุต ุจู ุฅูู ุจูุงูุงุช ูู ุงููุชุฌุฑ ุ ูููู ุนููู ุฃููุงู ุงูุญุตูู ุนูููุง ูู ุงูุฎุงุฏู.  ูุงูุณุคุงู ูู ุ ููู ูููููุง ูุถุน ุงูุจูุงูุงุช ูู ุงููุชุฌุฑ ุจุญูุซ ูููู ูููููู ุงูุญุตูู ุนูููุงุ </p><br><p style=";text-align:right;direction:rtl">  <b>ุทุฑููุฉ ูุคููุฉ</b> : ุงุณุชุฎุฏุงู Ngrx / ุงูุขุซุงุฑ! </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููููู ุ ูุจุฏุฃ ุงูุทูุจ ุนู ุทุฑูู ุฅุฑุณุงู ุฅุฌุฑุงุก: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'GET_USERS'</span></span> }); }</code> </pre><br><p style=";text-align:right;direction:rtl">  ูู ูุฆุฉ ุงูุชุฃุซูุฑุงุช ุ ูุณุชูุน ุฅูู <code>GET_USERS</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">@Effect getUsers$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actions$.pipe( ofType(<span class="hljs-string"><span class="hljs-string">'GET_USERS'</span></span>), withLatestFrom(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userSelectors.needUsers$), filter(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[action, needUsers]</span></span></span><span class="hljs-function">) =&gt;</span></span> needUsers), switchMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUsers()), map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">users</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'RECEIVE_USERS'</span></span>, users })), );</code> </pre><br><p style=";text-align:right;direction:rtl">  ูููุชุฑุถ ุงูุขู ุฃู ุงููุณุชุฎุฏู ููุฑุฑ ุฃู ุทุฑูููุง ูุนูููุง ูุณุชุบุฑู ููุชูุง ุทูููุงู ููุชู ุชุญูููู ุ ูุฐูู ุณูุชุญูู ูู ูุณุงุฑ ุฅูู ุขุฎุฑ.  ูู ุฃุฌู ุฃู ุชููู ูุนุงูุฉ ูุนุฏู ุชุญููู ุงูุจูุงูุงุช ุบูุฑ ุงูุถุฑูุฑูุฉ ุ ูุฑูุฏ ุฅูุบุงุก ูุฐุง ุงูุทูุจ.  ุนูุฏูุง ูุชู ุฅุชูุงู ุงููููู ุ ุณูููู ุจุฅูุบุงุก ุงูุงุดุชุฑุงู ูู ุงูุทูุจ ุนู ุทุฑูู ุฅุฑุณุงู ุงูุฅุฌุฑุงุก: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">ngOnDestroy() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'CANCEL_GET_USERS'</span></span> }); }</code> </pre><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู ูุฆุฉ ุงูุชุฃุซูุฑุงุช ูุณุชูุน ุฅูู ููุง ุงูุฅุฌุฑุงุกูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">@Effect getUsers$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actions$.pipe( ofType(<span class="hljs-string"><span class="hljs-string">'GET_USERS'</span></span>, <span class="hljs-string"><span class="hljs-string">'CANCEL_GET_USERS'</span></span>), withLatestFrom(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userSelectors.needUsers$), filter(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[action, needUsers]</span></span></span><span class="hljs-function">) =&gt;</span></span> needUsers), map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[action, needUsers]</span></span></span><span class="hljs-function">) =&gt;</span></span> action), switchMap( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> action.type === <span class="hljs-string"><span class="hljs-string">'CANCEL_GET_USERS'</span></span> ? <span class="hljs-keyword"><span class="hljs-keyword">of</span></span>() : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUsers().pipe(map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">users</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'RECEIVE_USERS'</span></span>, users }))), ), );</code> </pre><br><p style=";text-align:right;direction:rtl">  ุญุณูุง.  ุงูุขู ูุถูู ูุทูุฑ ุขุฎุฑ ูููููุง ูุชุทูุจ ููุณ ุทูุจ HTTP (ูู ูููู ุจุฃู ุงูุชุฑุงุถุงุช ุญูู ุงูููููุงุช ุงูุฃุฎุฑู).  ูุฑุณู ุงููููู ููุณ ุงูุฅุฌุฑุงุกุงุช ูู ููุณ ุงูุฃูุงูู.  ุฅุฐุง ูุงู ููุง ุงููููููู ูุดุทูู ูู ููุณ ุงูููุช ุ ูุจุฏุฃ ุงููููู ุงูุฃูู ูู ุทูุจ HTTP ูุชููุฆุชู.  ุนูุฏ ุชููุฆุฉ ุงููููู ุงูุซุงูู ุ ูู ูุญุฏุซ ุดูุก ุฅุถุงูู ุ ูุฃู <code>needUsers</code> ุณูููู <code>false</code> .  ! ุฑุงุฆุน </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุนูุฏูุง ูุชู ุฅุชูุงู ุงููููู ุงูุฃูู ุ ุณูุชู ุฅุฑุณุงู <code>CANCEL_GET_USERS</code> .  ููู ุงููููู ุงูุซุงูู ูุง ูุฒุงู ุจุญุงุฌุฉ ุฅูู ูุฐู ุงูุจูุงูุงุช.  ููู ูููููุง ููุน ุทูุจ ูุชู ุฅูุบุงุคูุ  ุฑุจูุง ุณูุจุฏุฃ ุงูุนุฏุงุฏ ูุฌููุน ุงููุดุชุฑูููุ  ูู ุฃุทุจู ูุฐุง ุ ููููู ุฃุนุชูุฏ ุฃูู ูููุช ูุฐู ุงูููุทุฉ.  ููุฏ ุจุฏุฃูุง ูุดู ูู ุฃู ููุงู ุทุฑููุฉ ุฃูุถู ูุฅุฏุงุฑุฉ ุชุจุนูุงุช ุงูุจูุงูุงุช ูุฐู. </p><br><p style=";text-align:right;direction:rtl">  ูููุชุฑุถ ุงูุขู ุธููุฑ ูููู ุขุฎุฑ ุ ููุนุชูุฏ ุนูู ุงูุจูุงูุงุช ุงูุชู ูุง ูููู ุงุณุชุฑุฏุงุฏูุง ุญุชู ุชุธูุฑ ุจูุงูุงุช <code>users</code> ูู ุงููุชุฌุฑ.  ูุฏ ูููู ูุฐุง ุงุชุตุงููุง ุจูุฃุฎุฐ ููุจ ููุฏุฑุฏุดุฉ ุฃู ูุนูููุงุช ุฅุถุงููุฉ ุญูู ุจุนุถ ุงููุณุชุฎุฏููู ุฃู ุฃู ุดูุก ุขุฎุฑ.  ูุง ูุนุฑู ูุง ุฅุฐุง ูุงู ุณูุชู ุชููุฆุฉ ูุฐุง ุงููููู ูุจู ุฃู ุจุนุฏ ุงูุงุดุชุฑุงู ูู ูููููู ุขุฎุฑูู <code>users</code> . </p><br><p style=";text-align:right;direction:rtl">  ุฃูุถู ูุณุงุนุฏุฉ ูุฌุฏุชูุง ูู ูุฐุง ุงูุณููุงุฑูู ุงููุญุฏุฏ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฐู ุงููุดุงุฑูุฉ ุงูุฑุงุฆุนุฉ</a> .  ูู ูุซุงูู ุ ูุชุทูุจ <code>callApiX</code> ุฅููุงู <code>callApiX</code> ุจุงููุนู.  ููุฏ ุฃุฒูุช ุงูุชุนูููุงุช ูุฌุนููุง ุชุจุฏู ุฃูู ุชุฎููููุง ุ ููู ูุง ุชุชุฑุฏุฏ ูู ูุฑุงุกุฉ ุงูููุดูุฑ ุงูุฃุตูู ููุนุฑูุฉ ุงููุฒูุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">@Effect() actionX$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actions$.pipe( ofType(<span class="hljs-string"><span class="hljs-string">'ACTION_X'</span></span>), map(toPayload), switchMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">payload</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.api.callApiX(payload).pipe( map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'ACTION_X_SUCCESS'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: data })), catchError(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span>({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'ACTION_X_FAIL'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: err })), ), ), ); @Effect() actionY$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actions$.pipe( ofType(<span class="hljs-string"><span class="hljs-string">'ACTION_Y'</span></span>), map(toPayload), withLatestFrom(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.select(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function"> =&gt;</span></span> state.someBoolean)), switchMap(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[payload, someBoolean]</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> callHttpY = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.api.callApiY(v).pipe( map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> ({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'ACTION_Y_SUCCESS'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: data, })), catchError(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span>({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'ACTION_Y_FAIL'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: err, }), ), ); }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (someBoolean) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callHttpY(payload); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span>({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'ACTION_X'</span></span>, payload }).merge( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.actions$.pipe( ofType(<span class="hljs-string"><span class="hljs-string">'ACTION_X_SUCCESS'</span></span>, <span class="hljs-string"><span class="hljs-string">'ACTION_X_FAIL'</span></span>), first(), switchMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">action</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (action.type === <span class="hljs-string"><span class="hljs-string">'ACTION_X_FAIL'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span>({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'ACTION_Y_FAIL'</span></span>, <span class="hljs-attr"><span class="hljs-attr">payload</span></span>: <span class="hljs-string"><span class="hljs-string">'Because ACTION_X failed.'</span></span>, }); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> callHttpY(payload); }), ), ); }), );</code> </pre><br><p style=";text-align:right;direction:rtl">  ุฃุถู ุงูุขู ุดุฑุท ุฅูุบุงุก ุทูุจุงุช HTTP ุนูุฏูุง ูุง ุชุญุชุงุฌ ุงูููููุงุช ุฅูููุง ุ ูุณูุตุจุญ ุฐูู ุฃูุซุฑ ุชุนููุฏูุง. </p><br><h3 style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl">  .  .  . </pre></h3><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุ ููุงุฐุง ุชูุฌุฏ ุงููุซูุฑ ูู ุงููุดุงูู ูู ุฅุฏุงุฑุฉ ุชุจุนูุฉ ุงูุจูุงูุงุช ุนูุฏูุง ููุจุบู ุฃู ุชุฌุนู RxJS ุงูุฃูุฑ ุณููุงู ุญููุงุ </p><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฑุบู ูู ุฃู ุงูุจูุงูุงุช ุงููุงุฑุฏุฉ ูู ุงูุฎุงุฏู ูู ูู ุงููุงุญูุฉ ุงููููุฉ ุชุฃุซูุฑ ุฌุงูุจู ุ ูุง ูุจุฏู ูู ุฃู Ngrx / ุชุฃุซูุฑุงุช ูู ุฃูุถู ุทุฑููุฉ ููุชุนุงูู ูุน ูุฐุง. </p><br><p style=";text-align:right;direction:rtl">  ุงูููููุงุช ูู ูุงุฌูุงุช ุฅุฏุฎุงู / ุฅุฎุฑุงุฌ ุงููุณุชุฎุฏู.  ูุนุฑุถูู ุงูุจูุงูุงุช ููุฑุณููู ุงูุฅุฌุฑุงุกุงุช ุงูุชู ูููู ุจูุง.  ุนูุฏ ุชุญููู ุฃุญุฏ ุงูููููุงุช ุ ูุง ูุฑุณู ุฃู ุฅุฌุฑุงุกุงุช ูููู ุจูุง ูุฐุง ุงููุณุชุฎุฏู.  ูุฑูุฏ ุฅุธูุงุฑ ุงูุจูุงูุงุช.  ูุฐุง ุฃุดุจู ุงูุงุดุชุฑุงู ูู ุชุฃุซูุฑ ุฌุงูุจู. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ููููู ุฑุคูุฉ ุงูุชุทุจููุงุช ุงูุชู ุชุณุชุฎุฏู ุงูุฅุฌุฑุงุกุงุช ูุจุฏุก ุทูุจ ุจูุงูุงุช.  ูุฐู ุงูุชุทุจููุงุช ุชููุฐ ูุงุฌูุฉ ุฎุงุตุฉ ูููู ููุงุญุธุชูุง ูู ุฎูุงู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ.  ูููุง ุฑุฃููุง ุ ูููู ุฃู ุชุตุจุญ ูุฐู ุงููุงุฌูุฉ ุบูุฑ ูุฑูุญุฉ ููุฑููุฉ ููุบุงูุฉ.  ูุนุฏ ุงูุงุดุชุฑุงู ูู ุฎุฏูุฉ ุงูููุงุญุธุฉ ููุณูุง ูุฅูุบุงุก ุงูุงุดุชุฑุงู ูููุง ูุชูุตูููุง ุฃุณูู ุจูุซูุฑ. </p><br><h3 style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl">  .  .  . </pre></h3><br><p style=";text-align:right;direction:rtl">  <b>ุทุฑููุฉ ุฃูู ุฅููุงูุง</b> : ุณูููู ุงููููู ุจุชุณุฌูู ุงูุชูุงูู ุจุงูุจูุงูุงุช ุนู ุทุฑูู ุงูุงุดุชุฑุงู ูููุง ูู ุฎูุงู ูููู ููุงุญุธุชูุง. </p><br><p style=";text-align:right;direction:rtl">  ุณูููู ุจุฅูุดุงุก ููุงุญุธุชูุง ูุงูุชู ุชุญุชูู ุนูู ุทูุจุงุช HTTP ุงูุถุฑูุฑูุฉ.  ุณูุฑู ูุฏู ุณูููุฉ ุฅุฏุงุฑุฉ ุงุดุชุฑุงูุงุช ูุชุนุฏุฏุฉ ูุณูุงุณู ุงูุงุณุชุนูุงู ุงูุชู ุชุนุชูุฏ ุนูู ุจุนุถูุง ุงูุจุนุถ ุจุงุณุชุฎุฏุงู RxJS ุงูููู ุ ุจุฏูุงู ูู ุงูููุงู ุจุฐูู ูู ุฎูุงู ุงูุชุฃุซูุฑุงุช. </p><br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุฐู ูููู ููุงุญุธุชูุง ูู ุงูุฎุฏูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">requireUsers$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.pipe( select(selectNeedUser), filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">needUsers</span></span></span><span class="hljs-function"> =&gt;</span></span> needUsers), tap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'GET_USERS'</span></span> })), switchMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUsers()), tap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">users</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'RECEIVE_USERS'</span></span>, users })), finalize(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'CANCEL_GET_USERS'</span></span> })), share(), ); users$ = muteFirst( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.requireUsers$.pipe(startWith(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.pipe(select(selectUsers)), );</code> </pre><br><p style=";text-align:right;direction:rtl">  ุณูุชู ุฅุฑุณุงู ุงูุงุดุชุฑุงู ุฅูู <code>users$</code> ุฅูู ูู ูู <code>requireUsers$</code> ู <code>this.store.pipe(select(selectUsers))</code> ุ ูููู ูู ูุชู ุงุณุชูุงู ุงูุจูุงูุงุช ุฅูุง ูู <code>this.store.pipe(select(selectUsers))</code> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>muteFirst</code></a> ุชูููุฐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>muteFirst</code></a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>muteFirst</code></a> ุงูุซุงุจุช ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุฎุชุจุงุฑูุง</a> .) </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">ngOnInit() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.users$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userService.users$; }</code> </pre><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุชุจุนูุฉ ุงูุจูุงูุงุช ูุฐู ุฃุตุจุญุช ุงูุขู ููุงุญุธุฉ ุจุณูุทุฉ ุ ููููููุง ุงูุงุดุชุฑุงู ูุฅูุบุงุก ุงูุงุดุชุฑุงู ูู ุงููุงูุจ ุจุงุณุชุฎุฏุงู ุชูุฌูู ุบูุฑ <code>async</code> ุ ููู ูุนุฏ ุจุญุงุฌุฉ ุฅูู ุฅุฑุณุงู ุฅุฌุฑุงุกุงุช.  ุฅุฐุง ุชุฑู ุงูุชุทุจูู ูุณุงุฑ ุขุฎุฑ ูููู ููููุนูุง ููุจูุงูุงุช ุ ูุณูุชู ุฅูุบุงุก ุทูุจ HTTP ุฃู ุฅุบูุงู ูุฃุฎุฐ ุชูุตูู ุงูููุจ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ูุนุงูุฌุฉ ุณูุณูุฉ ุชุจุนูุฉ ุงูุจูุงูุงุช ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">requireUsers$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.pipe( select(selectNeedUser), filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">needUsers</span></span></span><span class="hljs-function"> =&gt;</span></span> needUsers), tap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'GET_USERS'</span></span> })), switchMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUsers()), tap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">users</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'RECEIVE_USERS'</span></span>, users })), share(), ); users$ = muteFirst( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.requireUsers$.pipe(startWith(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.pipe(select(selectUsers)), ); requireUsersExtraData$ = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.users$.pipe( withLatestFrom(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.pipe(select(selectNeedUsersExtraData))), filter(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[users, needData]</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>(users.length) &amp;&amp; needData), tap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'GET_USERS_EXTRA_DATA'</span></span> })), switchMap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getUsers()), tap(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">users</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.dispatch({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'RECEIVE_USERS_EXTRA_DATA'</span></span>, users, }), ), share(), ); public usersExtraData$ = muteFirst( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.requireUsersExtraData$.pipe(startWith(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.store.pipe(select(selectUsersExtraData)), );</code> </pre><br><p style=";text-align:right;direction:rtl">  ูููุง ููู ููุงุฑูุฉ ููุงุฒูุฉ ููุทุฑููุฉ ุฃุนูุงู ูุน ูุฐู ุงูุทุฑููุฉ: </p><br><img src="https://habrastorage.org/webt/xd/cb/ho/xdcbhozsjus5vu64eqp9x8nsnuy.png" alt="ููุงุฑูุฉ ููุงุฒูุฉ"><br><br><p style=";text-align:right;direction:rtl">  ูุชุทูุจ ุงุณุชุฎุฏุงู ุทุฑููุฉ ุงูููุงุญุธุฉ ุงูุฎุงูุตุฉ ุนุฏุฏูุง ุฃูู ูู ุณุทูุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุชู ุฅูุบุงุก ุงุดุชุฑุงูู ุชููุงุฆููุง ูู ุชุจุนูุงุช ุงูุจูุงูุงุช ุนุจุฑ ุงูุณูุณูุฉ.  (ููุฏ ุชุฎุทูุช ุงูุจูุงูุงุช <code>finalize</code> ุงูุชู ุชู ุชุถููููุง ูู ุงูุฃุตู ูุฌุนู ุงูููุงุฑูุฉ ุฃูุซุฑ ูุงุจููุฉ ููููู ุ ูููู ุญุชู ุจุฏูููุง ุ ุณุชุธู ุทูุจุงุช ุงูุจุญุซ ููุบุงุฉ ููููุง ูุฐูู.) </p><br><img src="https://habrastorage.org/webt/mj/2m/pc/mj2mpclzeric84dwrap4c5fpkqm.jpeg" alt="ุขุซุงุฑ ูุซู ุงููุฑุฒ ูู ูููุชูู"><br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br><p style=";text-align:right;direction:rtl">  Ngrx / ุงูุขุซุงุฑ ูู ุฃุฏุงุฉ ุนุธููุฉ!  ููู ุถุน ูู ุงุนุชุจุงุฑู ูุฐู ุงูุฃุณุฆูุฉ ูุจู ุงุณุชุฎุฏุงููุง: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ูุฐุง ุญูุง ุชุฃุซูุฑ ุฌุงูุจูุ </li><li style=";text-align:right;direction:rtl">  ูู Ngrx / ุชุฃุซูุฑุงุช ูู ุฃูุถู ุทุฑููุฉ ููููุงู ุจุฐููุ </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar448858/">https://habr.com/ru/post/ar448858/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar448842/index.html">ูุงููููู HAQ ุฌูุฏุฉ ุงูููุงุก ูุฑุงูุจ</a></li>
<li><a href="../ar448846/index.html">ุงูููู ุฃูุง ููุณู ุนูุฏ ุชุทุจูู Agile ูู ุดุฑูุฉ ูุจูุฑุฉ</a></li>
<li><a href="../ar448848/index.html">ุญูู ุฅุฒุงูุฉ ุงูุงุชุฌุงู ูู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ</a></li>
<li><a href="../ar448854/index.html">ุงููุฌุฑ ุทุงูู ุงูุชููู</a></li>
<li><a href="../ar448856/index.html">Torfon - ุชุทุจูู ุงููุญููู ููุงุชุตุงูุงุช ุงููุงุชููุฉ ูุฌูููุฉ</a></li>
<li><a href="../ar448860/index.html">ููุงุญุธุงุช ุฅุตุฏุงุฑ Android Studio 3.4 (ุฃุจุฑูู 2019)</a></li>
<li><a href="../ar448866/index.html">ุชูุงุตูู ุงูุงูุชูุงู ูู ุฃุณุนุงุฑ ุงูุตุฑู ุงูููุชุฑูุฉ (ุงููุณุจูุฉ) ุฅูู ุงููุทููุฉ. ุฎุทุฃ ูู ุงูุชุนุงูู</a></li>
<li><a href="../ar448868/index.html">ููุฎุต ุงูููุงุฏ ุงููุซูุฑุฉ ููุฅุนุฌุงุจ ููุทููุฑ ุงูุจุฑุงูุฌ ุงููุญููู ุฑูู 295 (ูู ุงููุชุฑุฉ ูู 15 ุฅูู 21 ุฃุจุฑูู)</a></li>
<li><a href="../ar448870/index.html">Optlib. ุชูููุฐ ุฎูุงุฑุฒููุฉ ุงูุชุญุณูู ุงููุฑุงุซู ูู โโุงูุตุฏุฃ</a></li>
<li><a href="../ar448872/index.html">ุชุฑุฌูุฉ ูุชุงุจ ุฏุงุฎูู ุญูู ุฅุฏุงุฑุฉ ุงูููุชุฌ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>