<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯзЧ ЁЯУМ ЁЯЦХ рдкрд░рд┐рдЪрдп InterSystems рдПрдкреАрдЖрдИ рдкреНрд░рдмрдВрдзрдХ ЁЯзЫЁЯП┐ ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСз ЁЯСе</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╣рдордиреЗ рд╣рд╛рд▓ рд╣реА рдореЗрдВ InterSystems API Manager (IAM), InterSystems IRIS рдбреЗрдЯрд╛ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХрд╛ рдПрдХ рдирдпрд╛ рдШрдЯрдХ рдЬрд╛рд░реА рдХрд┐рдпрд╛ рд╣реИ рдЬреЛ IT рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЗ рднреАрддрд░ рд╡реЗрдм API рд╕реЗ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдкрд░рд┐рдЪрдп InterSystems рдПрдкреАрдЖрдИ рдкреНрд░рдмрдВрдзрдХ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intersystems/blog/475670/"><p>  рд╣рдордиреЗ рд╣рд╛рд▓ рд╣реА рдореЗрдВ InterSystems API Manager (IAM), InterSystems IRIS рдбреЗрдЯрд╛ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХрд╛ рдПрдХ рдирдпрд╛ рдШрдЯрдХ рдЬрд╛рд░реА рдХрд┐рдпрд╛ рд╣реИ рдЬреЛ IT рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЗ рднреАрддрд░ рд╡реЗрдм API рд╕реЗ / рдХреА рдирд┐рдЧрд░рд╛рдиреА, тАЛтАЛрдирд┐рдпрдВрддреНрд░рдг рдФрд░ рдпрд╛рддрд╛рдпрд╛рдд рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВ рдЖрдкрдХреЛ IAM рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рджрд┐рдЦрд╛рдКрдВрдЧрд╛ рдФрд░ рдХреБрдЫ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реВрдВрдЧрд╛ рдЬреЛ IAM рдХреЗ рд╕рд╛рде рдЖрдкрдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╣реИрдВред  InterSystems API рдкреНрд░рдмрдВрдзрдХ рдЖрдкрдХреЛ рдЗрд╕рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ: </p><br><ul><li>  рдПрдкреАрдЖрдИ рджреЗрдЦреЗрдВ, рд╕рдордЭреЗрдВ рдХрд┐ рдПрдкреАрдЖрдИ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреМрди рдХрд░ рд░рд╣рд╛ рд╣реИ, рдХреМрди рд╕реЗ рдПрдкреАрдЖрдИ рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп рд╣реИрдВ, рдФрд░ рдХрд┐рди рд▓реЛрдЧреЛрдВ рдХреЛ рд╕реБрдзрд╛рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </li><li>  рдирд┐рдпрдВрддреНрд░рдг рдЬреЛ рдПрдкреАрдЖрдИ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЕрдиреБрд░реЛрдз рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕рд░рд▓ рдЙрдкрдпреЛрдЧ рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рд╕реЗ рдПрдкреАрдЖрдИ рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХрд░рддрд╛ рд╣реИ - рдЖрдкрдХреЗ рдкрд╛рд╕ рдЕрдиреБрдХреВрд▓рди рдпреЛрдЧреНрдп рдирд┐рдпрдВрддреНрд░рдг рд╣реИрдВ рдФрд░ рдЖрдк рдПрдкреАрдЖрдИ рдЦрдкрдд рдкреИрдЯрд░реНрди рдореЗрдВ рдмрджрд▓рд╛рд╡реЛрдВ рдХрд╛ рддреБрд░рдВрдд рдЬрд╡рд╛рдм рджреЗ рд╕рдХрддреЗ рд╣реИрдВред </li><li>  OAuth2.0, LDAP, рдпрд╛ рдХреБрдВрдЬреА рдЯреЛрдХрди рдкреНрд░рдорд╛рдгреАрдХрд░рдг рдЬреИрд╕реЗ рдХреЗрдВрджреНрд░реАрдХреГрдд рд╕реБрд░рдХреНрд╖рд╛ рддрдВрддреНрд░ рдХреЗ рд╕рд╛рде API рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦреЗрдВред </li><li>  рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рдХрд╛рдо рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдПрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖ рдкреЛрд░реНрдЯрд▓ рдЦреЛрд▓рдХрд░ рдПрдкреАрдЖрдИ рдХреЗ рд╕рд╛рде рдЙрддреНрдХреГрд╖реНрдЯ рдЕрдиреБрднрд╡ рдкреНрд░рджрд╛рди рдХрд░реЗрдВред </li><li>  рдПрдкреАрдЖрдИ рдХреЛ рд╕реНрдХреЗрд▓ рдХрд░реЗрдВ рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдиреНрдпреВрдирддрдо рджреЗрд░реА рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред </li></ul><br><p>  SOA рдпрд╛ microservice рдЖрд░реНрдХрд┐рдЯреЗрдХреНрдЪрд░ рдореЗрдВ рд╕рдВрдХреНрд░рдордг рдХреЗ рд▓рд┐рдП API рдХрд╛ рдкреНрд░рдмрдВрдзрди рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдЬреЛ рд╡реНрдпрдХреНрддрд┐рдЧрдд (рдорд╛рдЗрдХреНрд░реЛ) рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмреАрдЪ рдПрдХреАрдХрд░рдг рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЙрдиреНрд╣реЗрдВ рд╕рднреА рдмрд╛рд╣рд░реА рдФрд░ рдЖрдВрддрд░рд┐рдХ рдЙрдкрднреЛрдХреНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╕реБрд▓рдн рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдирдП рдПрдкреАрдЖрдИ рдмрдирд╛рдиреЗ, рдмрдирд╛рдП рд░рдЦрдиреЗ рдФрд░ рдЙрдкрднреЛрдЧ рдХрд░рдиреЗ рдореЗрдВ рдЖрд╕рд╛рди рд╣реЛ рд░рд╣реЗ рд╣реИрдВред </p><a name="habracut"></a><br><p>  рдпрджрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА InterSystems IRIS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЕрдкрдиреЗ рд▓рд╛рдЗрд╕реЗрдВрд╕ рдореЗрдВ IAM рд╡рд┐рдХрд▓реНрдк рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдЖрдИрдПрдПрдордПрд╕ рд╡рд┐рдХрд▓реНрдк рдЗрдВрдЯрд░рд╕рд┐рд╕реНрдЯрдо рдЖрдИрдЖрд░рдЖрдИрдПрд╕ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдореБрдлреНрдд рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдИрдПрдПрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЗрдВрдЯрд░рд╕рд┐рд╕реНрдЯрдореНрд╕ рд╕реЗ рдПрдХ рдирдИ рд▓рд╛рдЗрд╕реЗрдВрд╕ рдХреБрдВрдЬреА рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА InterSystems IRIS рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рдХреЗрд╡рд▓ InterSystems API рдкреНрд░рдмрдВрдзрдХ рдХреЛ рдЖрдЬрд╝рдорд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдпреЛрдЬрдирд╛ рдмрдирд╛ рд░рд╣реЗ рд╣реИрдВ, рддреЛ InterSystems рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВред </p><br><h1 id="nachalo-raboty-i-ustanovka">  рд╢реБрд░реБрдЖрдд рдФрд░ рд╕реНрдерд╛рдкрдирд╛ </h1><br><p>  InterSystems IAM рдЧреНрд░рд╛рд╣рдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">WRC</a> рд╕рд╛рдЗрдЯ рд╕реЗ "рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╡рд┐рддрд░рдг" рдЕрдиреБрднрд╛рдЧ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдбреЙрдХ рдХрдВрдЯреЗрдирд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдиреНрдпреВрдирддрдо рд╕рд┐рд╕реНрдЯрдо рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдБ: </p><br><ul><li>  рдбреЙрдХрдЯрд░ 04.17.0+ред </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЙрдХрд░</a> рдХрдореНрдкреЛрдЬрд╝ 1.12.0+ред </li><li>  рдЗрдВрдЯрд░рд╕рд┐рд╕реНрдЯрдо IRIS 2019.1.1+ред </li></ul><br><p>  рдкреНрд░рд╛рд░рдВрдн рдореЗрдВ, рдЖрдкрдХреЛ рдбреЙрдХрд░ рдЫрд╡рд┐ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдорд╣рддреНрд╡рдкреВрд░реНрдг! рдбрдмреНрд▓реНрдпреВрдЖрд░рд╕реА рдХреЗ рд╕рд╛рде рд╕рдВрдЧреНрд░рд╣ рдПрдХ рдбреЙрдХрдЯрд░ рдЫрд╡рд┐ рдирд╣реАрдВ рд╣реИ, рдЖрдкрдХреЛ рдЗрд╕реЗ рдбреЙрдХрдпрд░ рдЫрд╡рд┐ рдХреЗ рдЕрдВрджрд░ рдЕрдирдкреИрдХ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ): </p><br><pre><code class="plaintext hljs">docker load -i iam_image.tar</code> </pre> <br><p>  рдпрд╣ рдХрдорд╛рдВрдб рдЖрдкрдХреЗ рд╕рд░реНрд╡рд░ рдкрд░ рдмрд╛рдж рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП IAM рдЫрд╡рд┐ рдЙрдкрд▓рдмреНрдз рдХрд░рд╛рдПрдЧрд╛ред  IAM рдПрдХ рдЕрд▓рдЧ рдХрдВрдЯреЗрдирд░ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдк рдЗрд╕реЗ InterSystems IRIS рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рд╕реНрдХреЗрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  IAM рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд▓рд╛рдЗрд╕реЗрдВрд╕ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП InterSystems IRIS рддрдХ рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рдЗрдВрдЯрд░рд╕рд┐рд╕реНрдЯрдо IRIS рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ: </p><br><ul><li>  рд╡реЗрдм рдРрдк <code>/api/IAM</code> рдЪрд╛рд▓реВ рдХрд░реЗрдВ </li><li>  рд╕рдХреНрд╖рдо <code>IAM</code> рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ </li><li>  <code>IAM</code> рдпреВрдЬрд░ рдкрд╛рд╕рд╡рд░реНрдб рдмрджрд▓реЗрдВ </li></ul><br><p>  рдЕрдм IAM рдХрдВрдЯреЗрдирд░ рдЪрд▓рд╛рдПрдВред  рд╕рдВрдЧреНрд░рд╣ рдореЗрдВ рдЖрдкрдХреЛ рд╡рд┐рдВрдбреЛрдЬ рдФрд░ рдпреВрдирд┐рдХреНрд╕ (рдФрд░ рдореИрдХ) рдХреЗ рд▓рд┐рдП <code>iam-setup</code> рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдорд┐рд▓реЗрдЧреАред  рдпреЗ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЖрдкрдХреЛ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕реЗрдЯ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВрдЧреЗ, рдЬрд┐рд╕рд╕реЗ IAM рдХрдВрдЯреЗрдирд░ рдХреЛ рдЗрдВрдЯрд░рд╕рд┐рд╕реНрдЯрдо IRIS рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдорд┐рд▓реЗрдЧреАред  рдпрд╣рд╛рдБ рдореИрдХ рдкрд░ рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ: </p><br><pre> <code class="plaintext hljs">source ./iam-setup.sh Welcome to the InterSystems IRIS and InterSystems API Manager (IAM) setup script. This script sets the ISC_IRIS_URL environment variable that is used by the IAM container to get the IAM license key from InterSystems IRIS. Enter the full image repository, name and tag for your IAM docker image: intersystems/iam:0.34-1-1 Enter the IP address for your InterSystems IRIS instance. The IP address has to be accessible from within the IAM container, therefore, do not use "localhost" or "127.0.0.1" if IRIS is running on your local machine. Instead use the public IP address of your local machine. If IRIS is running in a container, use the public IP address of the host environment, not the IP address of the IRIS container. xxx.xxx.xxx.xxx Enter the web server port for your InterSystems IRIS instance: 52773 Enter the password for the IAM user for your InterSystems IRIS instance: Re-enter your password: Your inputs are: Full image repository, name and tag for your IAM docker image: intersystems/iam:0.34-1-1 IP address for your InterSystems IRIS instance: xxx.xxx.xxx.xxx Web server port for your InterSystems IRIS instance: 52773 Would you like to continue with these inputs (y/n)? y Getting IAM license using your inputs... Successfully got IAM license! The ISC_IRIS_URL environment variable was set to: http://IAM:****************@xxx.xxx.xxx.xxx:52773/api/iam/license WARNING: The environment variable is set for this shell only! To start the services, run the following command in the top level directory: docker-compose up -d To stop the services, run the following command in the top level directory: docker-compose down URL for the IAM Manager portal: http://localhost:8002</code> </pre> <br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, IAM рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг рдЫрд╡рд┐ рдХрд╛ рдирд╛рдо, рдЖрдИрдкреА рдкрддрд╛, рдЗрдВрдЯрд░рд╕рд┐рд╕реНрдЯрдо рдЖрдИрдЖрд░рдЖрдИрдПрд╕ рдкреЛрд░реНрдЯ рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рд╕рднреА рдЖрдкрдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдЖрдк рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">ISC_IAM_IMAGE=intersystems/iam:0.34-1-1 ISC_IRIS_URL=http://IAM:&lt;PASS&gt;@&lt;IP&gt;:&lt;PORT&gt;/api/iam/license</code> </pre> <br><h1 id="zapusk">  рд▓рд╛рдВрдЪ </h1><br><p>  рдЕрдм рдХрдорд╛рдВрдб рдЪрд▓рд╛рдХрд░ IAM рдЪрд▓рд╛рдПрдВ: </p><br><pre> <code class="plaintext hljs">docker-compose up -d</code> </pre> <br><p>  рдпрд╣ рдХрдорд╛рдВрдб IAM рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╕рдм рдХреБрдЫ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╢реБрд░реВ рд╣реЛред  рдХрдВрдЯреЗрдирд░реЛрдВ рдХреА рд╕реНрдерд┐рддрд┐ рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЬрд╛рдБрдЪ рдХреА рдЬрд╛рддреА рд╣реИ: </p><br><pre> <code class="plaintext hljs">docker ps</code> </pre> <br><p>  рдХрд┐рд╕реА рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдореЗрдВ <code>localhost:8002</code> рдПрдбрдорд┐рди рдЗрдВрдЯрд░рдлреЗрд╕ рдЦреЛрд▓реЗрдВред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/feb/7c8/83c/feb7c883ce4240a907f3a16e40c5bd37.png"></p><br><p>  рдЕрдм рддрдХ, рдпрд╣ рдЦрд╛рд▓реА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдПрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдирдИ рд╕рд╛рдЗрдЯ рд╣реИред  рдЪрд▓реЛ рдЗрд╕реЗ рдмрджрд▓рддреЗ рд╣реИрдВред  рдЖрдИрдПрдПрдо рдПрдкреАрдЖрдИ рдХреЛ рдореЙрдбреНрдпреВрд▓ рдФрд░ / рдпрд╛ рдЯреАрдореЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред  рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ "рдбрд┐рдлрд╝реЙрд▓реНрдЯ" рдкрд░ рдЬрд╛рдПрдВ рдЬреЛ рд╣рдо рдЕрдкрдиреЗ рдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/92a/89f/ec2/92a89fec21308f5a8818a667f74124a4.png" alt="рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рдЯреВрд▓рдмрд╛рд░"></p><br><p>  рдЗрд╕ рдХрд╛рд░реНрдпрдХреНрд╖реЗрддреНрд░ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдЕрднреА рднреА рд╢реВрдиреНрдп рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рдмрд╛рдИрдВ рдУрд░ рдореЗрдиреВ рдореЗрдВ IAM рдХреА рдмреБрдирд┐рдпрд╛рджреА рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХрд╛ рдПрдХ рд╡рд┐рдЪрд╛рд░ рдорд┐рд▓реЗрдЧрд╛ред  рдкрд╣рд▓реЗ рджреЛ рддрддреНрд╡: рд╕реЗрд╡рд╛рдПрдВ рдФрд░ рд░реВрдЯ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВ: </p><br><ul><li>  рд╕реЗрд╡рд╛ - рдПрдкреАрдЖрдИ, рдЬрд┐рд╕реЗ рд╣рдо рдЙрдкрднреЛрдХреНрддрд╛рдУрдВ рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, InterSystems IRIS рдореЗрдВ REST API рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, Google API, рдпрджрд┐ рдЖрдк рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </li><li>  рд░реВрдЯ рддрдп рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдХрд┐рд╕ рд╕реЗрд╡рд╛ рдореЗрдВ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдкреНрд░рддреНрдпреЗрдХ рд░реВрдЯ рдореЗрдВ рд╢рд░реНрддреЛрдВ рдХрд╛ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдпрджрд┐ рд╡реЗ рдорд┐рд▓рддреЗ рд╣реИрдВ, рддреЛ рдЕрдиреБрд░реЛрдз рд╕рдВрдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рд░реВрдЯ рдПрдХ рдЖрдИрдкреА, рдПрдХ рдкреНрд░реЗрд╖рдХ рдХреЗ рдбреЛрдореЗрди, HTTP рд╡рд┐рдзрд┐рдпреЛрдВ, рдПрдХ URI рдХреЗ рдХреБрдЫ рд╣рд┐рд╕реНрд╕реЛрдВ рдпрд╛ рдЗрди рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рд╕рдВрдпреЛрдЬрди рд╕реЗ рдореЗрд▓ рдЦрд╛ рд╕рдХрддрд╛ рд╣реИред </li></ul><br><h2 id="servis">  рд╕реЗрд╡рд╛ </h2><br><p>  рдЖрдЗрдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╕рд╛рде InterSystems IRIS рд╕реЗрд╡рд╛ рдмрдирд╛рдПрдВ: </p><br><div class="scrollable-table"><table><thead><tr><th>  рдореИрджрд╛рди </th><th>  рдореВрд▓реНрдп </th><th>  рд╡рд┐рд╡рд░рдг </th></tr></thead><tbody><tr><td>  рдирд╛рдо </td><td>  рдИрд░рд┐рд╕ </td><td>  рд╕реЗрд╡рд╛ рдХрд╛ рдирд╛рдо </td></tr><tr><td>  рдореЗрдЬрд╝рдмрд╛рди </td><td>  рдЖрдИрдкреА </td><td>  InterSystems рдЖрдИрдЖрд░рдЖрдИрдПрд╕ рд╕рд░реНрд╡рд░ рд╣реЛрд╕реНрдЯ рдпрд╛ рдЖрдИрдкреА </td></tr><tr><td>  рдмрдВрджрд░рдЧрд╛рд╣ </td><td>  52773 </td><td>  InterSystems IRIS рд╕рд░реНрд╡рд░ рд╡реЗрдм рдкреЛрд░реНрдЯ </td></tr><tr><td>  рдкрде </td><td>  / рдПрдкреА / рдПрдЯрд▓рд┐рдпрд░ </td><td>  рдЬрдбрд╝ рдкрде </td></tr><tr><td>  рдкреНрд░реЛрдЯреЛрдХреЙрд▓ </td><td>  http </td><td>  рдкреНрд░реЛрдЯреЛрдХреЙрд▓ </td></tr></tbody></table></div><br><p>  рд╢реЗрд╖ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЫреЛрдбрд╝ рджреЗрдВред  <code>Create</code> рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдмрдирд╛рдИ рдЧрдИ рд╕реЗрд╡рд╛ рдХреА рдЖрдИрдбреА рдХреЛ рд▓рд┐рдЦреЗрдВред </p><br><h2 id="marshrut">  рдорд╛рд░реНрдЧ </h2><br><p>  рдЕрдм рдПрдХ рдорд╛рд░реНрдЧ рдмрдирд╛рддреЗ рд╣реИрдВ: </p><br><div class="scrollable-table"><table><thead><tr><th>  рдореИрджрд╛рди </th><th>  рдореВрд▓реНрдп </th><th>  рд╡рд┐рд╡рд░рдг </th></tr></thead><tbody><tr><td>  рдкрде </td><td>  / рдПрдкреА / рдПрдЯрд▓рд┐рдпрд░ </td><td>  рдЬрдбрд╝ рдкрде </td></tr><tr><td>  рдкреНрд░реЛрдЯреЛрдХреЙрд▓ </td><td>  http </td><td>  рдкреНрд░реЛрдЯреЛрдХреЙрд▓ </td></tr><tr><td>  service.id </td><td>  3 рд╕реЗ рдорд╛рд░реНрдЧрджрд░реНрд╢рди </td><td>  рд╕реЗрд╡рд╛ (рдкрд┐рдЫрд▓реЗ рдЪрд░рдг рд╕реЗ рдЖрдИрдбреА) </td></tr></tbody></table></div><br><p>  рд╢реЗрд╖ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЫреЛрдбрд╝ рджреЗрдВред  <code>Create</code> рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдирд┐рд░реНрдорд┐рдд рд░реВрдЯ рдХреА рдЖрдИрдбреА рдХреЛ рд▓рд┐рдЦреЗрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, IAM рдкреЛрд░реНрдЯ 8000 рдкрд░ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕реБрдирддрд╛ рд╣реИред рдЕрдм <code>http://localhost:8000</code> рднреЗрдЬреЗ рдЧрдП рдЕрдиреБрд░реЛрдзреЛрдВ рдФрд░ <code>/api/atelier</code> рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдЗрдВрдЯрд░рд╕рд┐рд╕реНрдЯрдо IRIS рдкрд░ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд <code>/api/atelier</code> ред </p><br><h2 id="testirovanie">  рдкрд░реАрдХреНрд╖рдг </h2><br><p>  рдЖрдЗрдП рдПрдХ REST рдХреНрд▓рд╛рдЗрдВрдЯ рдореЗрдВ рдЕрдиреБрд░реЛрдз рдмрдирд╛рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВ (рдореИрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреЛрд╕реНрдЯрдореИрди рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВ)ред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b83/f1c/480/b83f1c4808a89dc680168ae06248aefe.png" alt="рдбрд╛рдХрд┐рдпрд╛ рдореЗрдВ рдЕрдиреБрд░реЛрдз"></p><br><p>  рд╣рдо <code>http://localhost:8000/api/atelier/</code> (рдордд рднреВрд▓рдирд╛ <code>/</code> рдЕрдВрдд рдореЗрдВ) рдХреЗ рд▓рд┐рдП рдПрдХ GET рдЕрдиреБрд░реЛрдз рднреЗрдЬреЗрдВрдЧреЗ рдФрд░ InterSystems IRIS рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВрдЧреЗред  рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрд░реЛрдз IAM рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдореИрдЯреНрд░рд┐рдХреНрд╕ рдПрдХрддреНрд░ рдХрд░рддрд╛ рд╣реИ: </p><br><ul><li>  HTTP рд╕реНрдерд┐рддрд┐ рдХреЛрдбред </li><li>  рд╡рд┐рд▓рдВрдмред </li><li>  рдирд┐рдЧрд░рд╛рдиреА (рдпрджрд┐ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ)ред </li></ul><br><p>  рдореИрдВрдиреЗ рдХрдИ рдФрд░ рдЕрдиреБрд░реЛрдз рдХрд┐рдП (рдЧреИрд░-рдореМрдЬреВрдж рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЗ рд▓рд┐рдП рджреЛ рдЕрдиреБрд░реЛрдзреЛрдВ рд╕рд╣рд┐рдд, рдЬреИрд╕реЗ / рдПрдкреАрдЖрдИ / рдПрдЯрд▓рд┐рдпрд░ / рдПрд╕реНрдЯ /), рдкрд░рд┐рдгрд╛рдо рддреБрд░рдВрдд рдбреИрд╢рдмреЛрд░реНрдб рдкрд░ рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВ: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/a88/413/318/a88413318fa2bfe01827af2d6ee3d925.png" alt="рдХреБрдЫ рдореИрдЯреНрд░рд┐рдХреНрд╕ рдХреЗ рд╕рд╛рде рдбреИрд╢рдмреЛрд░реНрдб"></p><br><h1 id="rabota-s-plaginami">  рдкреНрд▓рдЧрдЗрдиреНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВ </h1><br><p>  рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд░реВрдЯ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рд╣реЛ рдЧрдпрд╛ рд╣реИ, рд╣рдо рдЕрдкрдиреЗ рдПрдкреАрдЖрдИ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рдЙрди рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдорд╛рд░реА рд╕реЗрд╡рд╛ рдХреЗ рдкреВрд░рдХ рд╣реИрдВред </p><br><p>  рдПрдкреАрдЖрдИ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЛ рдмрджрд▓рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрдо рддрд░реАрдХрд╛ рдПрдХ рдкреНрд▓рдЧрдЗрди рдЬреЛрдбрд╝рдирд╛ рд╣реИред  рдкреНрд▓рдЧрдЗрдиреНрд╕ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдЕрд▓рдЧ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЖрдИрдПрдПрдо рд╕реЗ рд╡рд┐рд╢реНрд╡ рд╕реНрддрд░ рдкрд░ рдФрд░ рдХреЗрд╡рд▓ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рдВрд╕реНрдерд╛рдУрдВ рд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕рдореВрд╣), рд╕реЗрд╡рд╛ рдпрд╛ рд░реВрдЯред  рд╣рдо рд░реВрдЯ рдореЗрдВ "рджрд░ рд╕реАрдорд╛" рдкреНрд▓рдЧрдЗрди рдЬреЛрдбрд╝рдХрд░ рд╢реБрд░реВ рдХрд░реЗрдВрдЧреЗред  рдкреНрд▓рдЧ-рдЗрди рдФрд░ рдорд╛рд░реНрдЧ рдХреЗ рдмреАрдЪ рд╕рдВрдмрдВрдз рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдорд╛рд░реНрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ (рдЖрдИрдбреА) рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </p><br><h2 id="ogranichenie-kolichestva-zaprosov">  рдЕрдиреБрд░реЛрдз рд╕реАрдорд╛ </h2><br><p>  рдмрд╛рдИрдВ рд╕рд╛рдЗрдбрдмрд╛рд░ рдкрд░ рдореЗрдиреВ рдореЗрдВ рдкреНрд▓рдЧрдЗрдиреНрд╕ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред  рдЖрдк рдЗрд╕ рд╕реНрдХреНрд░реАрди рдкрд░ рд╕рднреА рд╕рдХреНрд░рд┐рдп рдкреНрд▓рдЧрдЗрдиреНрд╕ рджреЗрдЦрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЪреВрдВрдХрд┐ рдпрд╣ IAM рд╕рд░реНрд╡рд░ рдирдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЕрднреА рддрдХ рдХреЛрдИ рд╕рдХреНрд░рд┐рдп рдкреНрд▓рдЧрдЗрдиреНрд╕ рдирд╣реАрдВ рд╣реИрдВред  рддреЛ "рдирдпрд╛ рдкреНрд▓рдЧрдЗрди" рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдХреЗ рдЕрдЧрд▓реЗ рдЪрд░рдг рдкрд░ рдЬрд╛рдПрдВред </p><br><p>  рд╣рдореЗрдВ рдЬрд┐рд╕ рдкреНрд▓рдЧрдЗрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рд╡рд╣ "рдЯреНрд░реИрдлрд┐рдХ рдХрдВрдЯреНрд░реЛрд▓" рд╢реНрд░реЗрдгреА рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИ рдФрд░ рдЗрд╕реЗ "рд░реЗрдЯ рд▓рд┐рдорд┐рдЯрд┐рдВрдЧ" рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕реЗ рдЪреБрдиреЗрдВред  рдРрд╕реА рдХреБрдЫ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рдпрд╣рд╛рдБ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдо рдХреЗрд╡рд▓ рджреЛ рдХреНрд╖реЗрддреНрд░реЛрдВ рд╕реЗ рдЪрд┐рдВрддрд┐рдд рд╣реИрдВ: </p><br><div class="scrollable-table"><table><thead><tr><th>  рдореИрджрд╛рди </th><th>  рдореВрд▓реНрдп </th><th>  рд╡рд┐рд╡рд░рдг </th></tr></thead><tbody><tr><td>  route_id </td><td>  рдЖрдИрдбреА </td><td>  рд░реВрдЯ рдЖрдИрдбреА </td></tr><tr><td>  config.minute </td><td>  5 </td><td>  рдкреНрд░рддрд┐ рдорд┐рдирдЯ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ </td></tr></tbody></table></div><br><p>  рд╡рд╣ рд╕рдм рд╣реИред  рдкреНрд▓рдЧрдЗрди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдФрд░ рд╕рдХреНрд░рд┐рдп рд╣реИред  рдореИрдВ рдзреНрдпрд╛рди рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рд╣рдо рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдорд┐рдирдЯ, рдШрдВрдЯрд╛ рдпрд╛ рджрд┐рдиред  рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреНрд░рддрд┐ рдШрдВрдЯреЗ 1000 рдЕрдиреБрд░реЛрдз рдФрд░ рдЙрд╕реА рд╕рдордп рдкреНрд░рддрд┐ рдорд┐рдирдЯ 100 рдЕрдиреБрд░реЛрдз)ред  рдореИрдВрдиреЗ рдорд┐рдирдЯреЛрдВ рдХреЛ рдЪреБрдирд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкреНрд▓рдЧрдЗрди рдХреА рдЬрд╛рдВрдЪ рдХрд░рдирд╛ рдЖрд╕рд╛рди рдмрдирд╛рддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рдЖрдк рдкреЛрд╕реНрдЯрдореИрди рдХреЛ рдлрд┐рд░ рд╕реЗ рд╡рд╣реА рдЕрдиреБрд░реЛрдз рднреЗрдЬрддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ 2 рдЕрддрд┐рд░рд┐рдХреНрдд рд╣реЗрдбрд░ рдХреЗ рд╕рд╛рде рд╡рд╛рдкрд╕ рдЖ рдЧрдИ рд╣реИ: </p><br><ul><li>  XRateLimit- рд╕реАрдорд╛-рдорд┐рдирдЯ: 5 </li><li>  XRateLimit- рд╢реЗрд╖-рдорд┐рдирдЯ: 4 </li></ul><br><p>  рдпрд╣ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рд╡рд╣ рдкреНрд░рддрд┐ рдорд┐рдирдЯ 5 рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд╡рд░реНрддрдорд╛рди рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдореЗрдВ рд╡рд╣ 4 рдФрд░ рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/78b/0af/c02/78b0afc0269baad6b56ea4059dbdefe7.png" alt="рдЧрддрд┐ рд╕реАрдорд╛"></p><br><p>  рдпрджрд┐ рдЖрдк рдмрд╛рд░-рдмрд╛рд░ рдПрдХ рд╣реА рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЕрдВрдд рдореЗрдВ рдЖрдк рдЙрдкрд▓рдмреНрдз рдХреЛрдЯрд╛ рд╕реЗ рдмрд╛рд╣рд░ рд╣реЛ рдЬрд╛рдПрдВрдЧреЗ рдФрд░ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдирд┐рдХрд╛рдп рдХреЗ рд╕рд╛рде рдПрдХ HTTP рд╕реНрдерд┐рддрд┐ рдХреЛрдб 429 рдкреНрд░рд╛рдкреНрдд рд╣реЛрдЧрд╛: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/dcb/421/6bc/dcb4216bcf373f51ffe49d56d8bef8b4.png" alt="рдПрдкреАрдЖрдИ рдЕрдзрд┐рдХ рд╣реИ"></p><br><p>  рдПрдХ рдорд┐рдирдЯ рд░реБрдХреЛ рдФрд░ рдЖрдк рдлрд┐рд░ рд╕реЗ рдЕрдиреБрд░реЛрдз рднреЗрдЬрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдВрдЧреЗред </p><br><p>  рдпрд╣ рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрдВрддреНрд░ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЗрд╕рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ: </p><br><ul><li>  рдмреИрдХрдПрдВрдб рдХреЛ рд▓реЛрдб рд╕рд░реНрдЬреЗрд╕ рд╕реЗ рдмрдЪрд╛рдПрдВред </li><li>  рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдмрддрд╛рдПрдВ рдХрд┐ рд╡реЗ рдХрд┐рддрдиреЗ рдЕрдиреБрд░реЛрдз рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </li><li>  рдореБрджреНрд░реАрдХреГрдд рдПрдкреАрдЖрдИред </li></ul><br><p>  рдЖрдк рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдХреЗ рд▓рд┐рдП рдорд╛рди рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдЕрд╡рдзрд┐ рдХреЗ рд▓рд┐рдП рдПрдкреАрдЖрдИ рдпрд╛рддрд╛рдпрд╛рдд рдХреЛ рд╕реБрдЪрд╛рд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдЖрдк рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░реВрдЯ рдкрд░ рдкреНрд░рддрд┐ рдШрдВрдЯреЗ 600 рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред  рдкреНрд░рддрд┐ рдорд┐рдирдЯ рдФрд╕рддрди 10 рдЕрдиреБрд░реЛрдз рд╣реИрдВред  рд▓реЗрдХрд┐рди рдХреБрдЫ рднреА рдЧреНрд░рд╛рд╣рдХ рдХреЛ рдШрдВрдЯреЗ рдХреЗ рдкрд╣рд▓реЗ рдорд┐рдирдЯ рдореЗрдВ рд╕рднреА 600 рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИред  рд╢рд╛рдпрдж рдпрд╣ рд╡рд╣реА рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЪрд╛рд╣рд┐рдПред  рдЖрдк рдПрдХ рдШрдВрдЯреЗ рдХреЗ рднреАрддрд░ рдФрд░ рднреА рдЕрдзрд┐рдХ рд▓реЛрдб рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣ рд╕рдХрддреЗ рд╣реИрдВред  <code>config.minute</code> рдлрд╝реАрд▓реНрдб рдХрд╛ рдорд╛рди 20 рдкрд░ рд╕реЗрдЯ рдХрд░рдХреЗ, рдЖрдк рдЧрд╛рд░рдВрдЯреА рджреЗрддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рддрд┐ рдорд┐рдирдЯ 20 рд╕реЗ рдЕрдзрд┐рдХ рдЕрдиреБрд░реЛрдз рдФрд░ рдкреНрд░рддрд┐ рдШрдВрдЯреЗ 600 рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВред  рдпрд╣ рдкреНрд░рддрд┐ рдорд┐рдирдЯ 10 рдЕрдиреБрд░реЛрдзреЛрдВ рдХреА рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдФрд╕рддрди рд╕реНрдЯреНрд░реАрдо рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдорд┐рдирдЯ рдХреЗ рдЕрдВрддрд░рд╛рд▓ рдореЗрдВ рдЫреЛрдЯреЗ рдХреВрджрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рдорд┐рдирдЯ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐ рдШрдВрдЯрд╛ рдХреЛрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЕрдм рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рд╕рднреА рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдо рд╕реЗ рдХрдо 30 рдорд┐рдирдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдкреНрд░рддреНрдпреЗрдХ рджрд┐рдП рдЧрдП рд╕рдордп рдЕрдВрддрд░рд╛рд▓ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рд╣реЗрдбрд░ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдВрдЧреЗ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: </p><br><div class="scrollable-table"><table><thead><tr><th>  HTTP рд╣реИрдбрд░ </th><th>  рдореВрд▓реНрдп </th></tr></thead><tbody><tr><td>  рдПрдХреНрд╕-RateLimit-рд╕реАрдорд╛ рдШрдВрдЯреЗ </td><td>  600 </td></tr><tr><td>  рдПрдХреНрд╕-RateLimit-рд╢реЗрд╖ рдШрдВрдЯреЗ </td><td>  595 </td></tr><tr><td>  рдПрдХреНрд╕-RateLimit-рд╕реАрдорд╛ рдорд┐рдирдЯ </td><td>  20 </td></tr><tr><td>  рдПрдХреНрд╕-RateLimit-рд╢реЗрд╖ рдорд┐рдирдЯ </td><td>  16 </td></tr></tbody></table></div><br><p>  рдмреЗрд╢рдХ, рдЖрдк рдЬреЛ рд╣рд╛рд╕рд┐рд▓ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЙрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреНрд╡реЗрд░реА рд╕реАрдорд╛ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╣реИрдВред </p><br><h1 id="vyvody">  рдирд┐рд╖реНрдХрд░реНрд╖ </h1><br><p>  рдореИрдВ рдЗрд╕реЗ рд╕рдорд╛рдкреНрдд рдХрд░ рджреВрдВрдЧрд╛, рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ InterSystems API рдкреНрд░рдмрдВрдзрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрд╣рд▓реЗ рд▓реЗрдЦ рдХреЗ рд▓рд┐рдП рд╕рд╛рдордЧреНрд░реА рдХрд╛рдлреА рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред  рд╣рдордиреЗ 40 рд╕реЗ рдЕрдзрд┐рдХ рдкреНрд▓рдЧрдЗрдиреНрд╕ рдореЗрдВ рд╕реЗ рдХреЗрд╡рд▓ рдПрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред  рдЖрдк IAM рдХреЗ рд╕рд╛рде рдХрдИ рдФрд░ рджрд┐рд▓рдЪрд╕реНрдк рдЪреАрдЬреЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><ul><li>  рдЕрдкрдиреЗ рд╕рднреА рдПрдкреАрдЖрдИ рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЗрдВрджреНрд░реАрдп рдкреНрд░рдорд╛рдгреАрдХрд░рдг рддрдВрддреНрд░ рдЬреЛрдбрд╝реЗрдВред </li><li>  рдХрдИ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдмреИрд▓реЗрдВрд╕рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓реЛрдб рдХреЛ рд╕реНрдХреЗрд▓ рдХрд░реЗрдВред </li><li>  рдПрдХ рдкреВрд░реНрдг рдЙрдиреНрдирдпрди рд╕реЗ рдкрд╣рд▓реЗ рдкрд░реАрдХреНрд╖рдг рджрд░реНрд╢рдХреЛрдВ рдХреЗ рд▓рд┐рдП рдирдИ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдФрд░ рдмрдЧ рдлрд┐рдХреНрд╕ рдЬреЛрдбрд╝реЗрдВред </li><li>  рд╕рднреА рдПрдкреАрдЖрдИ рдХрд╛ рджрд╕реНрддрд╛рд╡реЗрдЬреАрдХрд░рдг рд╕рдорд░реНрдкрд┐рдд рд╡реЗрдм рдкреЛрд░реНрдЯрд▓ рдХреЗ рд╕рд╛рде рдЖрдВрддрд░рд┐рдХ рдФрд░ рдмрд╛рд╣рд░реА рдбреЗрд╡рд▓рдкрд░реНрд╕ рдкреНрд░рджрд╛рди рдХрд░реЗрдВред </li><li>  рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЛ рдХрдо рдХрд░рдиреЗ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рдмреИрдХрдПрдВрдб рд▓реЛрдб рдХреЛ рдХрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреИрд╢ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред </li></ul><br><h1 id="ssylki">  рд╕рдВрджрд░реНрдн </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░реЗрд╕ рд╡рд┐рдЬреНрдЮрдкреНрддрд┐</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░рд┐рдЪрдп рд╡реАрдбрд┐рдпреЛ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрдд рд╡реАрдбрд┐рдпреЛ</a> </li><li>  <a href="">рдкреНрд░рд▓реЗрдЦрди</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдХ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдкреАрдЖрдИ рдкреНрд░рдмрдВрдзрди рдкрд░ рдПрдХ рд╡реЗрдмрд┐рдирд╛рд░ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi475670/">https://habr.com/ru/post/hi475670/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi475658/index.html">DevOpsDays рдкрд░ рдХреНрдпреЛрдВ рдЬрд╛рдПрдВ? рдФрд░ рдпрд╣ рдПрдХ рдФрд░ DevOps рд╕рдореНрдореЗрд▓рди рдХреНрдпреЛрдВ рдирд╣реАрдВ рд╣реИ</a></li>
<li><a href="../hi475660/index.html">рдмреИрдХрдкреИрдХрд┐рдВрдЧ рдореЗрдВ рдПрдХ рдирдпрд╛ рд╢рдмреНрдж: рдкрд┐рдХреНрд╕реЗрд▓ рд╕реНрдХреНрд░реАрди рдореЙрдбрд▓ рд╕реЗ рдорд┐рд▓реЛ - рдореЗрд░рд╛ рдПрд▓рдИрдбреА рдЕрдиреБрднрд╡ рдФрд░ рдкреНрд░рднрд╛рд╡</a></li>
<li><a href="../hi475662/index.html">рдПрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд░реВрдк рдореЗрдВ рдореЗрд░реЗ рдХрд░рд┐рдпрд░ рдХреА рд╕рдмрд╕реЗ рд╢рд░реНрдордирд╛рдХ рдЧрд▓рддрд┐рдпрд╛рдБ (рдлрд┐рд▓рд╣рд╛рд▓)</a></li>
<li><a href="../hi475666/index.html">рд╡рд░реНрдЪреБрдЕрд▓ рд░рд┐рдпрд▓рд┐рдЯреА рдореЗрдВ 50 рдпреВрдПрдХреНрд╕ рдЯрд┐рдкреНрд╕</a></li>
<li><a href="../hi475668/index.html">рдмрд╛рд╣рд░ рдЬрд▓рд╛ рджреЛред рд╡рд╕реВрд▓реАред рд╢реБрд░реВ рдХрд░реЛред рдпрд╛ рдирд╣реАрдВ?</a></li>
<li><a href="../hi475672/index.html">рдЕрдЬрдЧрд░ рдФрд░ Django рдореЗрдВ рдПрдХ рдЪреИрдЯ рд▓реЗрдЦрди</a></li>
<li><a href="../hi475676/index.html">рдЗрдирд╕рд╛рдЗрдЯ-рдкреНрд░реЗрд░рд┐рдд рд╣реЛрдиреЗ рдХреЗ рдирд╛рддреЗ: рдорд╢реАрди рд▓рд░реНрдирд┐рдВрдЧ рдореЙрдбрд▓ рдХреЗ рдЙрдиреНрдирдд рд╡рд┐рд╢реНрд▓реЗрд╖рд┐рдХреА рдФрд░ рдЬреАрд╡рдирдЪрдХреНрд░ рдкреНрд░рдмрдВрдзрди</a></li>
<li><a href="../hi475678/index.html">рд╣рдо рдХрдВрдкреНрдпреВрдЯрд░ рд╕рд╛рдХреНрд╖рд░рддрд╛ рджреВрдз рдкреНрд░рджрд╛рддрд╛рдУрдВ рдХреЛ рдХреИрд╕реЗ рд╕рд┐рдЦрд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi475684/index.html">@Pythonetc рд╕рдВрдХрд▓рди, рдЕрдХреНрдЯреВрдмрд░ 2019</a></li>
<li><a href="../hi475686/index.html">рдпреБрдХреНрддрд┐рдпрд╛рдБ рдФрд░ рдЪрд╛рд▓реЗрдВ рдореЗрд░реЗ рдЯреЗрд▓реАрдЧреНрд░рд╛рдо-рдЪреИрдирд▓ @pythonetc, рдЕрдХреНрдЯреВрдмрд░ 2019 рд╕реЗ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>