<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëêüèø üç® üë®üèº Trabalhando com matrizes no bash üîì üôåüèø üë©üèø‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Os programadores usam regularmente o bash para resolver muitas tarefas relacionadas ao desenvolvimento de software. Ao mesmo tempo, matrizes bash s√£o ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Trabalhando com matrizes no bash</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/413725/">  Os programadores usam regularmente o bash para resolver muitas tarefas relacionadas ao desenvolvimento de software.  Ao mesmo tempo, matrizes bash s√£o frequentemente consideradas um dos recursos mais incompreens√≠veis desse shell (provavelmente, matrizes perdem apenas para express√µes regulares a esse respeito).  O autor do material, cuja tradu√ß√£o publicamos hoje, convida todos para o maravilhoso mundo das matrizes bash, que, se voc√™ se acostumar com a sintaxe incomum, podem trazer muitos benef√≠cios. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efa/72d/7c7/efa72d7c779f3915863c44ac528143a2.jpg" alt="imagem"></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">O verdadeiro desafio que os arrays do bash s√£o √∫teis</font> </h2><br>  Escrever sobre o bash √© controverso.  O fato √© que os artigos sobre o bash geralmente se transformam em guias do usu√°rio dedicados a hist√≥rias sobre os recursos sint√°ticos dos comandos em quest√£o.  Este artigo foi escrito de forma diferente. Esperamos que voc√™ n√£o o encontre no pr√≥ximo "manual do usu√°rio". <br><br>  Dado o exposto, imagine um cen√°rio real para o uso de matrizes no bash.  Suponha que voc√™ tenha a tarefa de avaliar e otimizar um utilit√°rio a partir de um novo conjunto interno de ferramentas usadas em sua empresa.  Na primeira etapa deste estudo, voc√™ precisa test√°-lo com diferentes conjuntos de par√¢metros.  O teste tem como objetivo estudar como um novo conjunto de ferramentas se comporta quando eles usam um n√∫mero diferente de threads.  Para simplificar a apresenta√ß√£o, assumimos que a ‚Äúcaixa de ferramentas‚Äù √© uma ‚Äúcaixa preta‚Äù compilada a partir do c√≥digo C ++.  Ao us√°-lo, o √∫nico par√¢metro que podemos influenciar √© o n√∫mero de threads reservados para o processamento de dados.  Chamar o sistema sob investiga√ß√£o na linha de comando √© assim: <br><br><pre><code class="hljs pgsql">./pipeline <span class="hljs-comment"><span class="hljs-comment">--threads 4</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">O b√°sico</font> </h2><br>  Antes de tudo, declaramos uma matriz que cont√©m os valores do par√¢metro <code>--threads</code> com o qual queremos testar o sistema.  Essa matriz √© assim: <br><br><pre> <code class="hljs lisp">allThreads=(<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span>)</code> </pre> <br>  Neste exemplo, todos os elementos s√£o n√∫meros, mas, de fato, em matrizes bash, voc√™ pode armazenar n√∫meros e seq√º√™ncias de caracteres ao mesmo tempo.  Por exemplo, a declara√ß√£o de uma matriz desse tipo √© bastante aceit√°vel: <br><br><pre> <code class="hljs lisp">myArray=(<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"three"</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-string"><span class="hljs-string">"five"</span></span>)</code> </pre> <br>  Como com outras vari√°veis ‚Äã‚Äãdo bash, verifique se n√£o h√° espa√ßos ao redor do sinal <code>=</code> .  Caso contr√°rio, o bash considerar√° o nome da vari√°vel o nome do programa que ele precisa executar e <code>=</code> o primeiro argumento! <br><br>  Agora que inicializamos a matriz, vamos extrair alguns elementos dela.  Aqui voc√™ pode observar, por exemplo, que o <code>echo $allThreads</code> produzir√° apenas o primeiro elemento da matriz. <br><br>  Para entender os motivos desse comportamento, vamos desviar um pouco das matrizes e relembrar como trabalhar com vari√°veis ‚Äã‚Äãno bash.  Considere o seguinte exemplo: <br><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">type</span></span>=<span class="hljs-string"><span class="hljs-string">"article"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Found 42 </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$type</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br>  Suponha que voc√™ tenha uma vari√°vel do <code>$type</code> que contenha uma sequ√™ncia que represente um substantivo.  Ap√≥s esta palavra, adicione a letra <code>s</code> .  No entanto, voc√™ n√£o pode simplesmente adicionar esta letra ao final do nome da vari√°vel, pois isso transformar√° o comando para acessar a vari√°vel em <code>$types</code> , ou seja, trabalharemos com uma vari√°vel completamente diferente.  Nessa situa√ß√£o, voc√™ pode usar uma constru√ß√£o como o <code>echo "Found 42 "$type"s"</code> .  Mas √© melhor resolver esse problema usando colchetes: <code>echo "Found 42 ${type}s"</code> , que nos permite dizer ao bash onde o nome da vari√°vel come√ßa e termina (curiosamente, a mesma sintaxe √© usada no JavaScript ES6 para incorporar vari√°veis em express√µes em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seq√º√™ncias de caracteres padr√£o</a> ). <br><br>  Agora de volta √†s matrizes.  Acontece que, embora chaves geralmente n√£o sejam necess√°rias ao trabalhar com vari√°veis, elas s√£o necess√°rias para trabalhar com matrizes.  Eles permitem que voc√™ defina √≠ndices para acessar os elementos da matriz.  Por exemplo, um comando do formul√°rio <code>echo ${allThreads[1]}</code> produzir√° o segundo elemento da matriz.  Se voc√™ esquecer as chaves na constru√ß√£o acima, o bash perceber√° <code>[1]</code> como uma string e processar√° o que acontece de acordo. <br><br>  Como voc√™ pode ver, as matrizes no bash t√™m uma sintaxe estranha, mas nelas, pelo menos, a numera√ß√£o dos elementos come√ßa do zero.  Isso os torna semelhantes aos arrays de muitas outras linguagens de programa√ß√£o. <br><br><h2>  <font color="#3AC1EF">Maneiras de acessar elementos da matriz</font> </h2><br>  No exemplo acima, usamos √≠ndices inteiros em matrizes especificadas explicitamente.  Agora considere mais duas maneiras de trabalhar com matrizes. <br><br>  O primeiro m√©todo √© aplic√°vel se precisarmos do <code>$i</code> √©simo elemento da matriz, em que <code>$i</code> √© uma vari√°vel que cont√©m o √≠ndice do elemento de matriz desejado.  Voc√™ pode extrair esse elemento da matriz usando uma constru√ß√£o do formul√°rio <code>echo ${allThreads[$i]}</code> . <br><br>  O segundo m√©todo permite exibir todos os elementos da matriz.  Consiste em substituir o √≠ndice num√©rico pelo s√≠mbolo <code>@</code> (pode ser interpretado como um comando apontando para todos os elementos da matriz).  √â assim: <code>echo ${allThreads[@]}</code> . <br><br><h2>  <font color="#3AC1EF">Iterando Elementos da Matriz em Loops</font> </h2><br>  Os princ√≠pios acima, de trabalhar com elementos de matriz, ser√£o √∫teis para resolver o problema de enumerar elementos de matriz.  No nosso caso, isso significa iniciar o comando <code>pipeline</code> em estudo com cada um dos valores, que simboliza o n√∫mero de threads e √© armazenado em uma matriz.  √â assim: <br><br><pre> <code class="hljs powershell"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{allThreads[<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ./pipeline -<span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-variable"><span class="hljs-variable">$t</span></span> done</code> </pre> <br><h2>  <font color="#3AC1EF">Enumerando √≠ndices de matriz em loops</font> </h2><br>  Agora considere uma abordagem ligeiramente diferente para classificar matrizes.  Em vez de iterar sobre os elementos, podemos iterar sobre os √≠ndices da matriz: <br><br><pre> <code class="hljs powershell"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{!allThreads[<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> ./pipeline -<span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{allThreads[<span class="hljs-variable"><span class="hljs-variable">$i</span></span>]} done</code> </pre> <br>  Vamos analisar o que est√° acontecendo aqui.  Como j√° vimos, uma constru√ß√£o no formato <code>${allThreads[@]}</code> representa todos os elementos da matriz.  Quando adicionamos um ponto de exclama√ß√£o aqui, transformamos essa constru√ß√£o em <code>${!allThreads[@]}</code> , o que leva ao fato de que ele retorna os √≠ndices da matriz (de 0 a 7 no nosso caso). <br><br>  Em outras palavras, o loop <code>for</code> sobre todos os √≠ndices da matriz representada como a vari√°vel <code>$i</code> , e no corpo da loop, os elementos da matriz que servem como valores do par√¢metro <code>${allThreads[$i]}</code> s√£o <code>--thread</code> usando a constru√ß√£o <code>${allThreads[$i]}</code> . <br><br>  A leitura deste c√≥digo √© mais dif√≠cil que a do exemplo anterior.  Portanto, surge a quest√£o de para que servem todas essas dificuldades.  E precisamos disso porque, em algumas situa√ß√µes, ao processar matrizes em loops, voc√™ precisa conhecer os √≠ndices e os valores dos elementos.  Por exemplo, se voc√™ precisar pular o primeiro elemento de uma matriz, a itera√ß√£o sobre os √≠ndices nos salvar√°, por exemplo, da necessidade de criar uma vari√°vel adicional e de increment√°-la em um loop para trabalhar com os elementos da matriz. <br><br><h2>  <font color="#3AC1EF">Matrizes de preenchimento</font> </h2><br>  At√© agora, exploramos o sistema invocando o comando <code>pipeline</code> e passando cada um dos valores do par√¢metro <code>--threads</code> nos interessa.  Agora, suponha que este comando d√™ a dura√ß√£o de um determinado processo em segundos.  Gostar√≠amos de interceptar os dados retornados a cada itera√ß√£o e salv√°-los em outra matriz.  Isso nos dar√° a oportunidade de trabalhar com os dados armazenados ap√≥s o t√©rmino de todos os testes. <br><br><h2>  <font color="#3AC1EF">Constru√ß√µes √∫teis de sintaxe</font> </h2><br>  Antes de falarmos sobre como adicionar dados √†s matrizes, vejamos algumas constru√ß√µes de sintaxe √∫teis.  Para come√ßar, precisamos de um mecanismo para obter a sa√≠da de dados por comandos bash.  Para capturar a sa√≠da de um comando, voc√™ precisa usar a seguinte constru√ß√£o: <br><br><pre> <code class="hljs lua"><span class="hljs-built_in"><span class="hljs-built_in">output</span></span>=$( ./my_script.sh )</code> </pre> <br>  Ap√≥s executar este comando, o que o <code>myscript.sh</code> <code>$output</code> ser√° armazenado na vari√°vel <code>$output</code> . <br><br>  A segunda constru√ß√£o, que ser√° √∫til muito em breve, permite anexar novos dados √†s matrizes.  √â assim: <br><br><pre> <code class="hljs lisp">myArray+=( <span class="hljs-string"><span class="hljs-string">"newElement1"</span></span> <span class="hljs-string"><span class="hljs-string">"newElement2"</span></span> )</code> </pre> <br><h2>  <font color="#3AC1EF">Resolu√ß√£o de problemas</font> </h2><br>  Agora, se voc√™ reunir tudo o que acabamos de aprender, poder√° criar um script para testar o sistema, que executa um comando com cada um dos valores de par√¢metro da matriz e armazena na outra matriz o que esse comando exibe. <br><br><pre> <code class="hljs powershell">allThreads=(<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">64</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span>) allRuntimes=() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{allThreads[<span class="hljs-selector-tag"><span class="hljs-selector-tag">@</span></span>]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> runtime=<span class="hljs-variable"><span class="hljs-variable">$</span></span>(./pipeline -<span class="hljs-literal"><span class="hljs-literal">-threads</span></span> <span class="hljs-variable"><span class="hljs-variable">$t</span></span>) allRuntimes+=( <span class="hljs-variable"><span class="hljs-variable">$runtime</span></span> ) done</code> </pre> <br><h2>  <font color="#3AC1EF">O que vem a seguir?</font> </h2><br>  Acabamos de examinar como usar matrizes bash para iterar sobre os par√¢metros usados ‚Äã‚Äãao iniciar um programa e salvar os dados que esse programa retorna.  No entanto, as op√ß√µes para usar matrizes n√£o se limitam a esse cen√°rio.  Aqui est√£o mais alguns exemplos. <br><br><h2>  <font color="#3AC1EF">Alertas de Problemas</font> </h2><br>  Nesse cen√°rio, examinaremos um aplicativo dividido em m√≥dulos.  Cada um desses m√≥dulos possui seu pr√≥prio arquivo de log.  Podemos escrever um script de tarefa <code>cron</code> que, se forem encontrados problemas no arquivo de log correspondente, notificar√° por e-mail a pessoa respons√°vel por cada um dos m√≥dulos: <br><br><pre> <code class="hljs kotlin">#  -    logPaths=(<span class="hljs-string"><span class="hljs-string">"api.log"</span></span> <span class="hljs-string"><span class="hljs-string">"auth.log"</span></span> <span class="hljs-string"><span class="hljs-string">"jenkins.log"</span></span> <span class="hljs-string"><span class="hljs-string">"data.log"</span></span>) logEmails=(<span class="hljs-string"><span class="hljs-string">"jay@email"</span></span> <span class="hljs-string"><span class="hljs-string">"emma@email"</span></span> <span class="hljs-string"><span class="hljs-string">"jon@email"</span></span> <span class="hljs-string"><span class="hljs-string">"sophia@email"</span></span>) #         <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ${!logPaths[@]}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> log=${logPaths[$i]} stakeholder=${logEmails[$i]} numErrors=$( tail -n <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$log</span></span></span><span class="hljs-string">"</span></span> | grep <span class="hljs-string"><span class="hljs-string">"ERROR"</span></span> | wc -l ) #       <span class="hljs-number"><span class="hljs-number">5</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$numErrors</span></span></span><span class="hljs-string">"</span></span> -gt <span class="hljs-number"><span class="hljs-number">5</span></span> ]]; then   emailRecipient=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$stakeholder</span></span></span><span class="hljs-string">"</span></span>   emailSubject=<span class="hljs-string"><span class="hljs-string">"WARNING: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${log}</span></span></span><span class="hljs-string"> showing unusual levels of errors"</span></span>   emailBody=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${numErrors}</span></span></span><span class="hljs-string"> errors found in log </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${log}</span></span></span><span class="hljs-string">"</span></span>   echo <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$emailBody</span></span></span><span class="hljs-string">"</span></span> | mailx -s <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$emailSubject</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$emailRecipient</span></span></span><span class="hljs-string">"</span></span> fi done</code> </pre> <br><h2>  <font color="#3AC1EF">Solicita√ß√µes de API</font> </h2><br>  Suponha que voc√™ queira coletar informa√ß√µes sobre quais usu√°rios comentam suas postagens no Medium.  Como n√£o temos acesso direto ao banco de dados deste site, n√£o discutiremos consultas SQL.  No entanto, voc√™ pode usar v√°rias APIs para acessar esse tipo de dados. <br><br>  Para evitar longas conversas sobre autentica√ß√£o e tokens, usaremos como ponto de extremidade o servi√ßo de teste de API p√∫blico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JSONPlaceholder</a> .  Ap√≥s receber uma publica√ß√£o do servi√ßo e extrair dados de seu c√≥digo nos endere√ßos de email dos comentaristas, podemos colocar esses dados em uma matriz: <br><br><pre> <code class="hljs kotlin">endpoint=<span class="hljs-string"><span class="hljs-string">"https://jsonplaceholder.typicode.com/comments"</span></span> allEmails=() #   <span class="hljs-number"><span class="hljs-number">10</span></span>  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> postId <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> {<span class="hljs-number"><span class="hljs-number">1</span></span>..<span class="hljs-number"><span class="hljs-number">10</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> #    API       response=$(curl <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${endpoint}</span></span></span><span class="hljs-string">?postId=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${postId}</span></span></span><span class="hljs-string">"</span></span>) #  jq   JSON       allEmails+=( $( jq <span class="hljs-string"><span class="hljs-string">'.[].email'</span></span> &lt;&lt;&lt; <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$response</span></span></span><span class="hljs-string">"</span></span> ) ) done</code> </pre> <br>  Observe que a ferramenta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jq</a> √© usada aqui, o que permite analisar o JSON na linha de comandos.  N√£o entraremos em detalhes sobre o trabalho com o jq, se voc√™ estiver interessado nesta ferramenta - consulte a documenta√ß√£o. <br><br><h2>  <font color="#3AC1EF">Bash ou Python?</font> </h2><br>  Matrizes - um recurso √∫til e est√° dispon√≠vel n√£o apenas no bash.  Quem escreve scripts para a linha de comando pode ter uma pergunta l√≥gica sobre em quais situa√ß√µes vale a pena usar o bash e em que, por exemplo, Python. <br><br>  Na minha opini√£o, a resposta a esta pergunta est√° em quanto o programador depende de uma tecnologia espec√≠fica.  Digamos, se o problema puder ser resolvido diretamente na linha de comando, nada impede o uso do bash.  No entanto, no caso de, por exemplo, o script no qual voc√™ se interessar fazer parte de um projeto escrito em Python, voc√™ poder√° usar o Python. <br><br>  Por exemplo, para resolver o problema considerado aqui, voc√™ pode usar um script escrito em Python, no entanto, isso se resumir√° em escrever wrappers para Python para bash: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> subprocess all_threads = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">32</span></span>, <span class="hljs-number"><span class="hljs-number">64</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>] all_runtimes = [] #         <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> all_threads: cmd = <span class="hljs-string"><span class="hljs-string">'./pipeline --threads {}'</span></span>.format(t) #   subprocess   ,    p = subprocess.Popen(cmd, stdout=subprocess.PIPE, shell=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) output = p.communicate()[<span class="hljs-number"><span class="hljs-number">0</span></span>] all_runtimes.append(output)</code> </pre> <br>  Talvez a solu√ß√£o para esse problema com o bash, sem envolver outras tecnologias, seja mais curta e compreens√≠vel, e aqui voc√™ pode fazer completamente sem o Python. <br><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>  Neste material, analisamos muitos projetos usados ‚Äã‚Äãpara trabalhar com matrizes.  Aqui est√° uma tabela onde voc√™ encontrar√° o que analisamos e algo novo. <br><table><tbody><tr><td>  Constru√ß√£o de sintaxe </td><td>  Descri√ß√£o do produto </td></tr><tr><td> <code>arr=()</code> </td> <td>  Crie uma matriz vazia </td></tr><tr><td> <code>arr=(1 2 3)</code> </td> <td>  Inicializa√ß√£o de matriz </td></tr><tr><td> <code>${arr[2]}</code> </td> <td>  Obtendo o terceiro elemento de uma matriz </td></tr><tr><td> <code>${arr[@]}</code> </td> <td>  Obtendo todos os elementos da matriz </td></tr><tr><td> <code>${!arr[@]}</code> </td> <td>  Obtendo √≠ndices de matriz </td></tr><tr><td> <code>${#arr[@]}</code> </td> <td>  C√°lculo do tamanho da matriz </td></tr><tr><td> <code>arr[0]=3</code> </td> <td>  Substituindo o primeiro elemento de uma matriz </td></tr><tr><td> <code>arr+=(4)</code> </td> <td>  Juntando uma matriz de valores </td></tr><tr><td> <code>str=$(ls)</code> </td> <td>  Salvando a Sa√≠da do <code>ls</code> como uma Cadeia de Caracteres </td></tr><tr><td> <code>arr=( $(ls) )</code> </td> <td>  Salvando a sa√≠da do <code>ls</code> como uma matriz de nomes de arquivos </td></tr><tr><td> <code>${arr[@]:s:n}</code> </td> <td>  Obtendo elementos da matriz de elemento com √≠ndice <code>s</code> para elemento com √≠ndice <code>s+(n-1)</code> <br></td></tr></tbody></table><br>  √Ä primeira vista, os arrays do bash podem parecer bastante estranhos, mas as possibilidades que eles oferecem valem a pena lidar com essas esquisitices.  Acreditamos que, ao dominar as matrizes do bash, voc√™ as usar√° com bastante frequ√™ncia.  √â f√°cil imaginar in√∫meros cen√°rios nos quais essas matrizes podem ser √∫teis. <br><br>  <b>Caros leitores!</b>  Se voc√™ tiver exemplos interessantes de uso de matrizes em scripts bash, compartilhe-os. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt413725/">https://habr.com/ru/post/pt413725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt413715/index.html">Pens√£o de aposentadoria em TI</a></li>
<li><a href="../pt413717/index.html">GraphQL para plataformas InterSystems</a></li>
<li><a href="../pt413719/index.html">C ++ 20 a caminho! Encontro no Rapperswil Yona</a></li>
<li><a href="../pt413721/index.html">Time Check: Timejacking vs Bitcoin</a></li>
<li><a href="../pt413723/index.html">Saga de servi√ßos eletr√¥nicos e suas localiza√ß√µes. Parte 2. Arm√°rio Eletr√¥nico</a></li>
<li><a href="../pt413729/index.html">Como e por que escrevemos nosso ECS</a></li>
<li><a href="../pt413731/index.html">Pesquisa de Mercado de Trabalho BA / SA</a></li>
<li><a href="../pt413733/index.html">Mikrosh, Krista, Apogee, Lviv - os primeiros computadores take-away sovi√©ticos</a></li>
<li><a href="../pt413739/index.html">Como digitalizamos toda a Internet e o que aprendemos</a></li>
<li><a href="../pt413741/index.html">O que era e como: impress√µes da equipe WWDC Redmadrobot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>