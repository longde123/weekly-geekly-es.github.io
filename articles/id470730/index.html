<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöÆ üç° üë∏üèΩ Azure PowerShell: "kebanyakan tidak berbahaya" üåÜ üöª üíó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya. Hari ini kami memiliki proyek Microsoft lain yang diuji. Dengan judul artikel, Anda dapat menebak bahwa kali ini para pengembang tidak ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Azure PowerShell: "kebanyakan tidak berbahaya"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/470730/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5dd/f61/f7d/5ddf61f7dcf2f891ee258f9d580d3dbd.png" alt="Gambar 6"></div><br>  Halo semuanya.  Hari ini kami memiliki proyek Microsoft lain yang diuji.  Dengan judul artikel, Anda dapat menebak bahwa kali ini para pengembang tidak dapat menyenangkan kami dengan sejumlah besar kesalahan.  Kami berharap bahwa penulis proyek tidak akan tersinggung dengan namanya.  Bagaimanapun, sejumlah kecil kesalahan sangat bagus, bukan?  Namun, sesuatu yang menarik ditemukan dalam kode Azure PowerShell.  Kami sarankan agar Anda membiasakan diri dengan fitur-fitur proyek ini dan melihat kesalahan yang ditemukan pada PV # C-analyzer PVS-Studio. <br><a name="habracut"></a><br><h2>  Tentang proyek </h2><br>  Azure PowerShell adalah cmdlet yang memungkinkan Anda untuk mengelola sumber daya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Azure</a> langsung dari baris perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PowerShell</a> .  Tujuan utama set ini adalah untuk menyederhanakan pembelajaran dan mulai cepat pengembangan untuk Azure.  Azure PowerShell memberi para administrator dan pengembang fitur-fitur canggih untuk membuat, menyebarkan, dan mengelola aplikasi Microsoft Azure. <br><br>  Azure PowerShell dikembangkan di lingkungan .NET Standard dan didukung oleh PowerShell 5.1 untuk Windows dan PowerShell 6.x dan lebih tinggi untuk semua platform.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kode sumber</a> Azure PowerShell tersedia di GitHub. <br><br>  Baru-baru ini, proyek Microsoft sering menarik perhatian saya.  Menurut pendapat saya, kualitas proyek-proyek ini biasanya yang terbaik.  Meskipun, tentu saja, bukan tanpa pengecualian, seperti artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WinForms: errors, Holmes</a> ".  Namun, kali ini semuanya normal.  Proyek ini besar: 6845 file .cs kode sumber berisi sekitar 700 ribu baris, tidak termasuk kosong (tes, serta peringatan tingkat ketiga keandalan, saya tidak memperhitungkan).  Ada sangat sedikit kesalahan untuk volume kode seperti itu: tidak lebih dari seratus.  Ada cukup banyak situasi dengan jenis yang sama, jadi untuk artikel yang saya pilih positif yang paling menarik.  Kesalahan, seperti yang biasa saya lakukan, diurutkan berdasarkan nomor diagnostik PVS-Studio. <br><br>  Saya juga menemukan fragmen kode yang terlihat seperti kesalahan, tetapi saya tidak bisa membuat kesimpulan yang jelas tentang keberadaan masalah nyata, karena saya tidak cukup akrab dengan fitur desain untuk PowerShell.  Saya berharap di antara pembaca akan ada ahli dalam masalah ini dan akan membantu saya.  Tentang itu di bawah ini. <br><br>  Sebelum dimulainya "pembekalan," saya perhatikan fitur proyek dalam hal strukturnya.  Kode sumber Azure PowerShell terdiri dari lebih dari tujuh puluh solusi Visual Studio.  Beberapa solusi termasuk proyek dari solusi lain.  Struktur seperti itu memperlambat analisis sedikit (tidak banyak).  Sisa verifikasi tidak menimbulkan kesulitan.  Untuk kenyamanan, di baris pesan kesalahan (dalam tanda kurung) saya akan menunjukkan nama solusi di mana kesalahan ini terdeteksi. <br><br><h2>  Hasil Validasi </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3001</a> Ada sub-ekspresi identik 'strTimespan.Berisi ("M")' di sebelah kiri dan di sebelah kanan dari '||'  operator.  AzureServiceBusCmdletBase.cs 187 (EventGrid) <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> TimeSpan </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ParseTimespan</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> strTimespan</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"P"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"D"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"T"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"H"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"M"</span></span>) || strTimespan.Contains(<span class="hljs-string"><span class="hljs-string">"M"</span></span>)) .... }</code> </pre> <br>  Contoh kesalahan yang cukup jelas, yang hanya dapat diperbaiki oleh pengembang.  Dalam hal ini, sama sekali tidak dapat dipahami apakah kita berurusan dengan duplikasi kode yang tidak mempengaruhi apa pun, atau bukannya <i>"M"</i> sesuatu yang lain harus muncul dalam salah satu dari dua pemeriksaan terakhir. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3001</a> Ada sub-ekspresi identik 'this.AggregationType! = Null' di kiri dan di kanan operator '&amp;&amp;'.  GetAzureRmMetricCommand.cs 156 (Monitor) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> AggregationType? AggregationType { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessRecordInternal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> aggregation = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType.HasValue) ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType.Value.ToString() : <span class="hljs-literal"><span class="hljs-literal">null</span></span>; .... }</code> </pre> <br>  Mungkin tidak ada kesalahan di sini.  Ini adalah contoh kode redundan.  Terkadang kode seperti itu mengindikasikan tingkat pengetahuan pengembang yang tidak memadai.  Faktanya adalah bahwa <i>this.AggregationType! = Null</i> dan <i>this.AggregationType.HasValue cek</i> identik.  Cukup menggunakan salah satunya (apa saja).  Secara pribadi, saya lebih suka <i>opsi HasValue</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">string</span></span> aggregation = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType.HasValue ? <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregationType.Value.ToString() : <span class="hljs-literal"><span class="hljs-literal">null</span></span>;</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3003</a> Penggunaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pola</a> 'jika (A) {...} else jika (A) {...}' terdeteksi.  Ada kemungkinan kehadiran kesalahan logis.  Periksa baris: 152, 163. GetAzureRmRecoveryServicesBackupProtectionPolicy.cs 152 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( WorkloadType == Models.WorkloadType.AzureVM ) { .... } .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( WorkloadType == Models.WorkloadType.AzureFiles ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( BackupManagementType != Models.BackupManagementType.AzureStorage ) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException( Resources.AzureFileUnsupportedBackupManagementTypeException ); } serviceClientProviderType = ServiceClientHelpers. GetServiceClientProviderType( Models.WorkloadType.AzureFiles ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( WorkloadType == Models.WorkloadType.AzureFiles ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( BackupManagementType != Models.BackupManagementType.AzureStorage ) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException( Resources.AzureFileUnsupportedBackupManagementTypeException ); } serviceClientProviderType = ServiceClientHelpers. GetServiceClientProviderType( Models.WorkloadType.AzureFiles ); } .... }</code> </pre> <br>  Dua <i>lainnya jika</i> balok benar-benar identik, termasuk kondisi dan tubuh balok.  Kesalahan seperti itu biasanya dibuat ketika menggunakan metode salin-tempel dalam pekerjaan.  Pertanyaannya lagi adalah kekritisan kesalahan ini.  Jika ini bukan duplikasi kode yang sederhana, maka kita dapat berbicara tentang kurangnya verifikasi yang diperlukan dan serangkaian tindakan yang sesuai.  Penulis perlu mengedit kode. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3005 Variabel</a> 'this.VM.OSProfile.WindowsConfiguration.ProvisionVMAgent' ditugaskan untuk dirinya sendiri.  SetAzureVMOperatingSystemCommand.cs 298 (Hitung) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-comment"><span class="hljs-comment">// OS Profile this.VM.OSProfile.WindowsConfiguration.ProvisionVMAgent = this.VM.OSProfile.WindowsConfiguration.ProvisionVMAgent; .... }</span></span></code> </pre> <br>  Nilai properti ditugaskan untuk dirinya sendiri.  Lihatlah iklannya: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">JsonProperty(PropertyName = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"provisionVMAgent"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>? ProvisionVMAgent { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  Deskripsi <i>JsonProperty</i> mengatakan "Menginstruksikan Newtonsoft.Json.JsonSerializer untuk selalu membuat serial anggota dengan nama yang ditentukan".  Tampaknya semuanya sederhana dan ada kesalahan yang jelas.  Juga membingungkan adalah penggunaan eksplisit <i>ini</i> untuk mengakses properti.  Mungkin, secara tidak sengaja, beberapa variabel lain tidak ditentukan selain <i>ini</i> .  Tapi untuk saat ini, kami tidak akan menarik kesimpulan.  Faktanya adalah bahwa dalam kode Azure PowerShell saya bertemu cukup banyak penugasan seperti itu (properti ditugaskan untuk dirinya sendiri).  Berikut adalah contoh tugas yang sangat mirip dengan kesalahan: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3005 Variabel</a> 'this.LastHeartbeat' ditugaskan untuk dirinya sendiri.  PSFabricDetails.cs 804 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ASRInMageAzureV2SpecificRPIDetails</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> InMageAzureV2ReplicationDetails details</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LastHeartbeat = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LastHeartbeat; <span class="hljs-comment"><span class="hljs-comment">// &lt;= this.RecoveryAvailabilitySetId = details.RecoveryAvailabilitySetId; this.AgentVersion = details.AgentVersion; this.DiscoveryType = details.DiscoveryType; .... }</span></span></code> </pre> <br>  Perhatikan tugas kedua dan selanjutnya.  Di sisi kanan ekspresi, bukan <i>ini</i> yang muncul sama sekali, tetapi <i>detail</i> .  <i>Lihatlah</i> deklarasi properti ini. Properti <i>LastHeartbeat</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime? LastHeartbeat { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre> <br>  Terakhir, cari properti dengan nama yang sama di kelas <i>InMageAzureV2ReplicationDetails</i> .  Properti seperti itu dinyatakan di sana: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">InMageAzureV2ReplicationDetails</span></span> : <span class="hljs-title"><span class="hljs-title">ReplicationProviderSpecificSettings</span></span> { .... [JsonProperty(PropertyName = <span class="hljs-string"><span class="hljs-string">"lastHeartbeat"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime? LastHeartbeat { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... }</code> </pre> <br>  Nah, dalam hal ini, saya siap mengakui pemicuan ini adalah kesalahan nyata.  Tapi apa yang harus dilakukan dengan pemicu berikut?  Di dalamnya, tidak seperti dua fragmen kode sebelumnya, ada beberapa penugasan properti untuk diri mereka sendiri.  Ini sudah kurang seperti kesalahan: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3005 Variabel</a> 'this.ResourceGroupName' ditugaskan untuk dirinya sendiri.  RemoveAzureRmExpressRouteConnectionCommand.cs 84 (CognitiveServices) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3005 Variabel</a> 'this.ExpressRouteGatewayName' ditugaskan untuk dirinya sendiri.  RemoveAzureRmExpressRouteConnectionCommand.cs 85 (CognitiveServices) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3005 Variabel</a> 'this.Name' ditugaskan untuk dirinya sendiri.  RemoveAzureRmExpressRouteConnectionCommand.cs 86 (CognitiveServices) </li></ul><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Cmdlet(VerbsCommon.Remove, ResourceManager.Common.AzureRMConstants.AzureRMPrefix + </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ExpressRouteConnection"</span></span></span><span class="hljs-meta">, DefaultParameterSetName = CortexParameterSetNames.ByExpressRouteConnectionName, SupportsShouldProcess = true), OutputType(typeof(bool))</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RemoveExpressRouteConnectionCommand</span></span> : <span class="hljs-title"><span class="hljs-title">ExpressRouteConnectionBaseCmdlet</span></span> { [Parameter( Mandatory = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, ParameterSetName = CortexParameterSetNames.ByExpressRouteConnectionName, HelpMessage = <span class="hljs-string"><span class="hljs-string">"The resource group name."</span></span>)] [ResourceGroupCompleter] [ValidateNotNullOrEmpty] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ResourceGroupName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Execute</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ResourceGroupName = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ResourceGroupName; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ExpressRouteGatewayName = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ExpressRouteGatewayName; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name; } .... } .... }</code> </pre> <br>  Metode <i>Execute</i> berisi tiga penetapan properti secara berurutan.  Untuk berjaga-jaga, saya memberikan deklarasi lengkap dari kelas <i>RemoveExpressRouteConnectionCommand</i> dengan semua atributnya, serta deklarasi properti <i>ResourceGroupName</i> (dua properti lainnya dideklarasikan dengan cara yang sama).  Memicu yang membuat saya berpikir tentang pertanyaan: "Apakah ini kesalahan?"  Saya menduga bahwa beberapa jenis sihir internal pengembangan PowerShell dapat terjadi di sini.  Saya berharap di antara pembaca ada ahli yang memiliki pengetahuan dalam hal ini.  Saya belum siap untuk membuat kesimpulan dalam kasus ini. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3006</a> Objek telah dibuat tetapi tidak sedang digunakan.  Kata kunci 'lempar' bisa hilang: lempar ArgumentException baru (FOO).  StartAzureRmRecoveryServicesAsrTestFailoverJob.cs 259 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartRPITestFailover</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException( Resources .UnsupportedDirectionForTFO); <span class="hljs-comment"><span class="hljs-comment">// Throw Unsupported Direction // Exception } .... }</span></span></code> </pre> <br>  Melewati kata kunci <i>lemparan</i> .  Terlebih lagi, komentar tersebut mengatakan bahwa pengecualian hanya boleh dibuang.  Dalam solusi <i>RecoveryServices</i> , saya menemukan beberapa kesalahan serupa: <br><br><ul><li>  V3006 Objek telah dibuat tetapi tidak sedang digunakan.  Kata kunci 'lempar' bisa hilang: lempar ArgumentException baru (FOO).  StartAzureRmRecoveryServicesAsrTestFailoverJob.cs 305 (RecoveryServices) </li><li>  V3006 Objek telah dibuat tetapi tidak sedang digunakan.  Kata kunci 'lempar' bisa hilang: lempar ArgumentException baru (FOO).  StartAzureRmRecoveryServicesAsrUnPlannedFailover.cs 278 (RecoveryServices) </li><li>  V3006 Objek telah dibuat tetapi tidak sedang digunakan.  Kata kunci 'lempar' bisa hilang: lempar ArgumentException baru (FOO).  StartAzureRmRecoveryServicesAsrUnPlannedFailover.cs 322 (RecoveryServices) </li><li>  V3006 Objek telah dibuat tetapi tidak sedang digunakan.  Kata kunci 'lempar' bisa hilang: lempar ArgumentException baru (FOO).  PerbaruiAzureRmRecoveryServicesAsrProtectionDirection.cs 421 (RecoveryServices) </li><li>  V3006 Objek telah dibuat tetapi tidak sedang digunakan.  Kata kunci 'lempar' bisa hilang: lempar ArgumentException baru (FOO)  PerbaruiAzureRmRecoveryServicesAsrProtectionDirection.cs 452 (RecoveryServices) </li></ul><br>  Ekspresi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3022</a> 'apiType.HasValue' selalu salah.  ApiManagementClient.cs 1134 (ApiManagement) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetApiTypeForImport</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...., PsApiManagementApiType? apiType</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (apiType.HasValue) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(apiType.Value) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> PsApiManagementApiType.Http: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SoapApiType.SoapToRest; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> PsApiManagementApiType.Soap: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SoapApiType.SoapPassThrough; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SoapApiType.SoapPassThrough; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> apiType.HasValue ? <span class="hljs-comment"><span class="hljs-comment">// &lt;= apiType.Value.ToString("g") : PsApiManagementApiType.Http.ToString("g"); }</span></span></code> </pre> <br>  Logika kerja dilanggar.  Jika <i>apiType</i> berisi nilai, maka kontrol tidak akan mencapai ekspresi <i>kembali</i> di akhir metode (semua cabang <i>switch</i> berisi <i>pengembalian</i> ).  Jika tidak, metode ini akan selalu mengembalikan <i>PsApiManagementApiType.Http.ToString ("g")</i> , dan <i>apiType.Value.ToString ("g")</i> , masing-masing, tidak akan pernah dikembalikan. <br><br>  Ekspresi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3022</a> 'automationJob! = Null &amp;&amp; automationJob == null' selalu salah.  NodeConfigurationDeployment.cs 199 (Automation) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NodeConfigurationDeployment</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> ...., Management.Automation.Models.Job automationJob = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">null</span></span></span></span><span class="hljs-function"><span class="hljs-params">, ....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (automationJob != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; automationJob == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; .... }</code> </pre> <br>  Kode paradoks.  Dua cek yang saling bertentangan.  Mungkin pemeriksaan kesetaraan <i>nol</i> kedua berisi variabel yang salah. <br><br>  Ekspresi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3022</a> selalu salah.  DataFactoryClient.Encrypt.cs 37 (DataFactory) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnPremisesEncryptString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( linkedServiceType == LinkedServiceType.OnPremisesSqlLinkedService &amp;&amp; linkedServiceType == LinkedServiceType.OnPremisesOracleLinkedService &amp;&amp; linkedServiceType == LinkedServiceType.OnPremisesFileSystemLinkedService &amp;&amp; (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-string"><span class="hljs-string">"value"</span></span>); } .... }</code> </pre> <br>  Memeriksa tidak ada gunanya, dan pengecualian tidak akan pernah dilempar.  Kondisi ini membutuhkan persamaan simultan dari variabel <i>linkedServiceType ke</i> tiga nilai yang berbeda.  Operator &amp;&amp; dan || mungkin bingung.  Kode yang diperbaiki: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( linkedServiceType == LinkedServiceType.OnPremisesSqlLinkedService || linkedServiceType == LinkedServiceType.OnPremisesOracleLinkedService || linkedServiceType == LinkedServiceType.OnPremisesFileSystemLinkedService) &amp;&amp; (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Length == <span class="hljs-number"><span class="hljs-number">0</span></span>)) ....</code> </pre> <br>  Ekspresi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3022</a> 'Ekus == null' selalu salah.  PSKeyVaultCertificatePolicy.cs 129 (KeyVault) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> CertificatePolicy </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToCertificatePolicy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ekus != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { x509CertificateProperties.Ekus = Ekus == <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? <span class="hljs-literal"><span class="hljs-literal">null</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(Ekus); } .... }</code> </pre> <br>  Pemeriksaan <i>berlebihan</i> variabel <i>Ekus</i> untuk kesetaraan <i>nol</i> .  Mungkin tidak ada yang salah, tetapi kodenya terlihat jelek. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3023</a> Pertimbangkan untuk memeriksa ungkapan ini.  Ekspresi berlebihan atau mengandung kesalahan cetak.  PolicyRetentionObjects.cs 207 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Validate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (RetentionTimes == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || RetentionTimes.Count == <span class="hljs-number"><span class="hljs-number">0</span></span> || RetentionTimes.Count != <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException( Resources.InvalidRetentionTimesInPolicyException); } }</code> </pre> <br>  Pemeriksaan berlebihan, atau kondisi yang salah.  Memeriksa <i>RetentionTimes.Count == 0</i> tidak masuk akal, karena setelah itu periksa <i>RetentionTimes.Count! = 1</i> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3025</a> Format salah.  Jumlah item format yang berbeda diharapkan saat memanggil fungsi 'Format'.  Argumen tidak digunakan: this.ResourceGroupName.  NewScheduledQueryRuleCommand.cs 117 (Monitor) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessRecordInternal</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ShouldProcess(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(<span class="hljs-string"><span class="hljs-string">"Creating Log Alert Rule '{0}' in resource group {0}"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ResourceGroupName))) { .... } .... }</code> </pre> <br>  Kesalahan dalam string format.  Kualifikasi <i>{0}</i> digunakan dua kali, dengan dua argumen diteruskan ke metode <i>Format</i> .  Opsi yang benar: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ShouldProcess(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(<span class="hljs-string"><span class="hljs-string">"Creating Log Alert Rule '{0}' in resource group {1}"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ResourceGroupName))) ....</code> </pre> <br>  Kesalahan serupa lainnya: <br><br><ul><li>  V3025 Format salah.  Jumlah item format yang berbeda diharapkan saat memanggil fungsi 'Format'.  Argumen tidak digunakan: this.ResourceGroupName.  RemoveScheduledQueryRuleCommand.cs 88 (Monitor) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3042</a> Kemungkinan NullReferenceException.  '?.'  dan '.'  operator digunakan untuk mengakses anggota objek 'imageAndOsType' VirtualMachineScaleSetStrategy.cs 81 (Hitung) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> ResourceConfig&lt;VirtualMachineScaleSet&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateVirtualMachineScaleSetConfig</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...., ImageAndOsType imageAndOsType, ....</span></span></span><span class="hljs-function">)</span></span> { .... VirtualMachineProfile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VirtualMachineScaleSetVMProfile { OsProfile = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VirtualMachineScaleSetOSProfile { ...., WindowsConfiguration = imageAndOsType.CreateWindowsConfiguration(), <span class="hljs-comment"><span class="hljs-comment">// &lt;= ...., }, StorageProfile = new VirtualMachineScaleSetStorageProfile { ImageReference = imageAndOsType?.Image, // &lt;= DataDisks = DataDiskStrategy.CreateVmssDataDisks( imageAndOsType?.DataDiskLuns, dataDisks) // &lt;= }, }, .... }</span></span></code> </pre> <br>  Saat membuat objek <i>VirtualMachineScaleSetVMPile</i> , variabel <i>imageAndOsType</i> digunakan tanpa memeriksa <i>nol</i> .  Namun, saat membuat <i>VirtualMachineScaleSetStorageProfile</i> , variabel ini sudah diperiksa menggunakan operator akses bersyarat, dan dua kali.  Kode terlihat tidak aman. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3042</a> Kemungkinan NullReferenceException.  '?.'  dan '.'  operator digunakan untuk mengakses anggota objek 'existingContacts' RemoveAzureKeyVaultCertificateContact.cs 123 (KeyVault) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... List&lt;PSKeyVaultCertificateContact&gt; existingContacts; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { existingContacts = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.DataServiceClient. GetCertificateContacts(VaultName)?.ToList(); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (KeyVaultErrorException exception) { .... existingContacts = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> email <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> EmailAddress) { existingContacts.RemoveAll(....); <span class="hljs-comment"><span class="hljs-comment">// &lt;= } .... }</span></span></code> </pre> <br>  Seperti dalam kasus eksekusi normal, dan sebagai hasil dari penanganan pengecualian, variabel yang adaContacts bisa mendapatkan <i>nol</i> , setelah itu pekerjaan akan dilanjutkan.  Lebih lanjut dalam kode variabel ini digunakan tanpa verifikasi. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3066</a> Kemungkinan urutan argumen yang salah diteruskan ke metode 'PersistSyncServerRegistration': 'storageSyncServiceUid' dan 'discoveryUri'.  EcsManagementInteropClient.cs 364 (StorageSync) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">EcsManagementInteropClient</span></span> : <span class="hljs-title"><span class="hljs-title">IEcsManagement</span></span> { .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PersistSyncServerRegistration</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> m_managementObject.PersistSyncServerRegistration( serviceUri, subscriptionId, storageSyncServiceName, resourceGroupName, clusterId, clusterName, storageSyncServiceUid, <span class="hljs-comment"><span class="hljs-comment">// &lt;= discoveryUri, // &lt;= serviceLocation, resourceLocation); } .... }</span></span></code> </pre> <br>  Penganalisa curiga bahwa urutan argumen yang lewat ke metode <i>PersistSyncServerRegistration bingung</i> .  Deklarasi Metode: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IEcsManagement</span></span> : <span class="hljs-title"><span class="hljs-title">IDisposable</span></span> { .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PersistSyncServerRegistration</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> [In, MarshalAs(UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> serviceUri, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> subscriptionId, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> storageSyncServiceName, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> resourceGroupName, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> clusterId, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> clusterName, [In, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarshalAs</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnmanagedType.BStr</span></span></span><span class="hljs-function">)] </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> discoveryUri, </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">// &lt;= [In, MarshalAs(UnmanagedType.BStr)] string storageSyncServiceUid, // &lt;= [In, MarshalAs(UnmanagedType.BStr)] string serviceLocation, [In, MarshalAs(UnmanagedType.BStr)] string resourceLocation); .... }</span></span></span></span></code> </pre> <br>  Memang, ada sesuatu yang bercampur aduk di sini dengan argumen nomor tujuh dan delapan.  Penulis perlu memverifikasi kode. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3077</a> Setter properti 'GetGuid' tidak menggunakan parameter 'nilai'.  RecoveryServicesBackupCmdletBase.cs 54 (RecoveryServices) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">RecoveryServicesBackupCmdletBase</span></span> : <span class="hljs-title"><span class="hljs-title">AzureRMCmdlet</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _guid; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> GetGuid { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _guid; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _guid = Guid.NewGuid().ToString(); } } .... }</code> </pre> <br>  Setter tidak menggunakan parameter yang dikirimkan.  Sebagai gantinya, mereka mendapatkan GUID baru dan menetapkannya ke bidang <i>_guid</i> .  Saya pikir sebagian besar pembaca akan setuju bahwa kode tersebut terlihat paling jelek.  Menggunakan konstruksi semacam itu tidak mudah: untuk (kembali) menginisialisasi properti <i>GetGuid</i> , <i>Anda</i> harus memberinya nilai palsu, yang sama sekali tidak terlihat.  Tetapi yang paling utama saya terhibur pada saat bagaimana penulis sendiri menggunakan konstruksi ini.  Hanya ada satu tempat dalam kode tempat <i>GetGuid bekerja</i> .  Lihatlah: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> itemResponse = ServiceClientAdapter.CreateOrUpdateProtectionIntent( GetGuid ?? Guid.NewGuid().ToString(), ....); .... }</code> </pre> <br>  Hebat! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3091</a> Analisis empiris.  Mungkin salah ketik ada di dalam string literal: "Id Grup Manajemen."  Kata 'Id' mencurigakan.  Constants.cs 36 (Sumber) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HelpMessages</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SubscriptionId = <span class="hljs-string"><span class="hljs-string">"Subscription Id of the subscription associated with the management"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> GroupId = <span class="hljs-string"><span class="hljs-string">"Management Group Id"</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= public const string Recurse = "Recursively list the children of the management group"; public const string ParentId = "Parent Id of the management group"; public const string GroupName = "Management Group Id"; // &lt;= public const string DisplayName = "Display Name of the management group"; public const string Expand = "Expand the output to list the children of the management group"; public const string Force = "Force the action and skip confirmations"; public const string InputObject = "Input Object from the Get call"; public const string ParentObject = "Parent Object"; }</span></span></code> </pre> <br>  Penganalisis menunjukkan kemungkinan kesalahan dalam string yang ditetapkan untuk konstanta <i>GroupName</i> .  Kesimpulannya didasarkan pada analisis empiris penugasan lain dengan mempertimbangkan nama variabel akun.  Saya pikir dalam hal ini analisanya benar, dan nilai konstanta <i>GroupName</i> haruslah "Nama Grup Manajemen".  Kesalahan ini mungkin disebabkan oleh fakta bahwa nilai untuk konstanta <i>GroupId disalin</i> , tetapi mereka lupa untuk mengubahnya. <br><br>  Kesalahan serupa lainnya: <br><br><ul><li>  V3091 Analisis empiris.  Mungkin salah ketik ada di dalam string literal.  Kata 'Nama' mencurigakan.  ParamHelpMsgs.cs 153 (RecoveryServices) </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3093</a> The '|'  operator mengevaluasi kedua operan.  Mungkin hubungan arus pendek '||'  Operator harus digunakan sebagai gantinya.  PSKeyVaultCertificatePolicy.cs 114 (KeyVault) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> CertificatePolicy </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToCertificatePolicy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrWhiteSpace(SubjectName) || DnsNames != <span class="hljs-literal"><span class="hljs-literal">null</span></span> || Ekus != <span class="hljs-literal"><span class="hljs-literal">null</span></span> || KeyUsage != <span class="hljs-literal"><span class="hljs-literal">null</span></span> | <span class="hljs-comment"><span class="hljs-comment">// &lt;= ValidityInMonths.HasValue) { .... } .... }</span></span></code> </pre> <br>  Ada kecurigaan bahwa telah terjadi kesalahan, dan operator || juga harus digunakan di antara kondisi terakhir di blok <i>if</i> .  Jawaban yang tepat, seperti yang sering terjadi, hanya dapat diberikan oleh pengembang. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3095 Objek</a> 'sertifikat' digunakan sebelum diverifikasi terhadap nol.  Periksa baris: 41, 43. CertificateInfo.cs 41 (Automation) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CertificateInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> ...., Azure.Management.Automation.Models.Certificate certificate</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Name = certificate.Name; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (certificate == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; .... }</code> </pre> <br>  Klasik  Objek digunakan terlebih dahulu, dan hanya kemudian tautan diperiksa untuk <i>null</i> .  Kami <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sangat sering</a> menemukan kesalahan seperti itu.  Pertimbangkan kesalahan serupa lainnya. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3095 Objek</a> 'clusterCred' digunakan sebelum diverifikasi terhadap nol.  Periksa baris: 115, 118. InvokeHiveCommand.cs 115 (HDInsight) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... _credential = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BasicAuthenticationCloudCredentials { Username = clusterCred.UserName, Password = clusterCred.Password.ConvertToString() }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (clusterConnection == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || clusterCred == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) .... }</code> </pre> <br>  Dan beberapa kesalahan serupa lainnya: <br><br><ul><li>  V3095 Objek '_profile' digunakan sebelum diverifikasi terhadap null.  Periksa baris: 47, 49. RMProfileClient.cs 47 (Akun) </li><li>  V3095 Objek 'this.LoadBalancer.BackendAddressPools' digunakan sebelum diverifikasi terhadap nol.  Periksa baris: 56, 63. AddAzureRmLoadBalancerBackendAddressPoolConfigCommand.cs 56 (CognitiveServices) </li><li>  Secara umum, dalam kode Azure PowerShell, saya bertemu lebih banyak kesalahan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3095</a> .  Tapi mereka semua sangat mirip, jadi saya tidak akan membahas hal ini lebih detail. </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3125 Objek</a> 'startTime' digunakan setelah diverifikasi terhadap nol.  Periksa baris: 1752, 1738. AutomationPSClientDSC.cs 1752 (Automation) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetNodeReportListFilterString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> ...., DateTimeOffset? startTime, ...., DateTimeOffset? lastModifiedTime</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (startTime.HasValue) { odataFilter.Add(<span class="hljs-string"><span class="hljs-string">"properties/startTime ge "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.FormatDateTime(startTime.Value)); <span class="hljs-comment"><span class="hljs-comment">// &lt;= } .... if (lastModifiedTime.HasValue) { odataFilter.Add("properties/lastModifiedTime ge " + this.FormatDateTime(startTime.Value)); // &lt;= } .... }</span></span></code> </pre> <br>  Juga jenis kesalahan yang cukup umum.  Variabel <i>startTime</i> diperiksa untuk nilai pada penggunaan pertama.  Lain kali Anda menggunakan ini, jangan.  Tapi itu bisa lebih buruk.  Lihatlah blok <i>if yang</i> kedua.  Saya berpikir bahwa seharusnya tidak ada variabel <i>startTime</i> sama <i>sekali</i> .  Ini ditunjukkan oleh tidak adanya pemeriksaan untuk keberadaan nilai sebelum digunakan, dan string yang dibentuk untuk meneruskan ke metode <i>Tambahkan</i> .  Bagian pertama dari baris ini menyebutkan variabel lain ( <i>lastModifiedTime</i> ). <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3125 Objek</a> 'firstPage' digunakan setelah diverifikasi terhadap null.  Periksa baris: 113, 108. IntegrationAccountAgreementOperations.cs 113 (LogicApp) <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IList&lt;IntegrationAccountAgreement&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ListIntegrationAccountAgreements</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> compositeList = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;IntegrationAccountAgreement&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstPage = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.LogicManagementClient. IntegrationAccountAgreements.List(....); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (firstPage != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { compositeList.AddRange(firstPage); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(firstPage.NextPageLink)) <span class="hljs-comment"><span class="hljs-comment">// &lt;= { .... } .... }</span></span></code> </pre> <br>  Kesalahan jelas lainnya.  Variabel <i>firstPage</i> digunakan dengan tidak aman, meskipun sebelumnya dalam kode ada penggunaan variabel ini dengan pemeriksaan awal untuk <i>null</i> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3125</a> dalam kode Azure PowerShell bahkan lebih <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sukses</a> daripada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3095 yang</a> dijelaskan sebelumnya.  Semuanya juga dari tipe yang sama.  Saya pikir kita dapat membatasi diri pada dua yang kita periksa. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3137 Variabel</a> 'apiVersionSetId' ditugaskan tetapi tidak digunakan pada akhir fungsi.  GetAzureApiManagementApiVersionSet.cs 69 (ApiManagement) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String ApiVersionSetId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteApiManagementCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> apiVersionSetId; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ParameterSetName.Equals(ContextParameterSet)) { .... apiVersionSetId = ApiVersionSetId; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { apiVersionSetId = ....; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(ApiVersionSetId)) <span class="hljs-comment"><span class="hljs-comment">// &lt;= { WriteObject(....); } else { WriteObject(Client.GetApiVersionSet(...., ApiVersionSetId)) // &lt;= } }</span></span></code> </pre> <br>  Penganalisa melaporkan bahwa <i>apiVersionSetId</i> variabel lokal telah diinisialisasi, tetapi belum digunakan.  Seringkali pola seperti itu menunjukkan kesalahan.  Saya pikir dalam kasus ini probabilitas kesalahan tinggi, mengingat bahwa nama <i>apiVersionSetId</i> variabel lokal dan nama properti <i>ApiVersionSetId</i> hanya berbeda dalam kasus huruf pertama.  Lihatlah kodenya.  Setelah menginisialisasi <i>apiVersionSetId</i> (dengan satu atau lain cara), maka hanya properti <i>ApiVersionSetId</i> yang digunakan dalam kode.  Sangat, sangat mencurigakan. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3137 Variabel</a> 'cacheId' ditugaskan tetapi tidak digunakan pada akhir fungsi.  RemoveAzureApiManagementCache.cs 94 (ApiManagement) <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String CacheId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteApiManagementCmdlet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> cacheId; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... cacheId = InputObject.CacheId; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... cacheId = cache.CacheId; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { .... cacheId = CacheId; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actionDescription = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format(...., CacheId); <span class="hljs-comment"><span class="hljs-comment">// &lt;= var actionWarning = string.Format(...., CacheId); // &lt;= .... Client.CacheRemove(resourceGroupName, serviceName, CacheId); // &lt;= .... }</span></span></code> </pre> <br>  Situasi, hampir persis mengulangi yang sebelumnya dipertimbangkan.  <i>CacheId</i> variabel lokal tidak digunakan setelah inisialisasi.  Sebagai gantinya, mereka menggunakan properti dengan nama yang sangat mirip, <i>CacheId</i> .  Saya tidak tahu, mungkin ini adalah pola di antara pengembang Azure PowerShell.  Tapi itu terlihat seperti kesalahan. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">V3143 Parameter</a> 'nilai' ditulis ulang di dalam setter properti, dan tidak digunakan setelah itu.  NewAzureIntegrationAccountPartnerCommand.cs 67 (LogicApp) <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Parameter(Mandatory = false, HelpMessage = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"The integration account partner type."</span></span></span><span class="hljs-meta">, ValueFromPipelineByPropertyName = false)</span></span>] [ValidateSet(<span class="hljs-string"><span class="hljs-string">"B2B"</span></span>, IgnoreCase = <span class="hljs-literal"><span class="hljs-literal">false</span></span>)] [ValidateNotNullOrEmpty] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> PartnerType { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.partnerType; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.partnerType; } <span class="hljs-comment"><span class="hljs-comment">// &lt;= }</span></span></code> </pre> <br>  Bidang <i>partnerType</i> dinyatakan seperti ini: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Default partner type. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> private string partnerType = "B2B";</span></span></code> </pre> <br>  Berlawanan dengan nama solusi di mana kesalahan ini terdeteksi (LogicApp), saya tidak melihat logika di sini.  Menggunakan <i>nilai</i> dalam setter untuk merekam bukan kejadian langka, tetapi dalam kasus ini kita berbicara tentang kehilangan nilai aslinya.  Terlihat aneh.  Kode memiliki akses baca tunggal ke properti ini.  Mungkin Anda harus mencari nasihat ahli lagi.  Mungkin saya tidak mengerti sesuatu.  Faktanya adalah bahwa saya bertemu beberapa pola yang sama persis: <br><br><ul><li>  V3143 Parameter 'nilai' ditulis ulang di dalam setter properti, dan tidak digunakan setelah itu.  NewAzureIntegrationAccountSchemaCommand.cs 79 (LogicApp) </li><li>  V3143 Parameter 'nilai' ditulis ulang di dalam setter properti, dan tidak digunakan setelah itu.  NewAzureIntegrationAccountSchemaCommand.cs 87 (LogicApp) </li><li>  V3143 Parameter 'nilai' ditulis ulang di dalam setter properti, dan tidak digunakan setelah itu.  UpdateAzureIntegrationAccountPartnerCommand.cs 67 (LogicApp) </li><li>  V3143 Parameter 'nilai' ditulis ulang di dalam setter properti, dan tidak digunakan setelah itu.  PerbaruiAzureIntegrationAccountSchemaCommand.cs 80 (LogicApp) </li><li>  V3143 Parameter 'nilai' ditulis ulang di dalam setter properti, dan tidak digunakan setelah itu.  PerbaruiAzureIntegrationAccountSchemaCommand.cs 88 (LogicApp) </li></ul><br><h2>  Kesimpulan </h2><br>  Itu semua bug menarik yang ditemukan dalam kode Azure PowerShell.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penggemar dan hanya tertarik, saya sarankan melakukan studi independen tentang kesalahan dalam kode proyek ini (atau lainnya). </font><font style="vertical-align: inherit;">Saya mungkin bisa melewatkan sesuatu yang menarik. </font><font style="vertical-align: inherit;">Untuk melakukan ini, cukup unduh dan instal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Terima kasih sudah membaca. </font><font style="vertical-align: inherit;">Kode tanpa kode!</font></font><br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br>  Jika Anda ingin berbagi artikel ini dengan audiens yang berbahasa Inggris, silakan gunakan tautan ke terjemahan: Sergey Khrenov. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Azure PowerShell: Kebanyakan Tidak Berbahaya</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id470730/">https://habr.com/ru/post/id470730/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id470718/index.html">"Efek aljabar" dalam bahasa manusia</a></li>
<li><a href="../id470720/index.html">Bagaimana cara menulis kontrak pintar dengan Python pada Ontologi? Bagian 2: API Penyimpanan</a></li>
<li><a href="../id470722/index.html">Bagaimana cara menulis kontrak pintar dengan Python pada Ontologi? Bagian 3: Runtime API</a></li>
<li><a href="../id470726/index.html">Bagaimana tidak tenggelam dalam rutinitas, atau Pengalaman kami membandingkan AWR dumps selama stress testing</a></li>
<li><a href="../id470728/index.html">Azure PowerShell: Kebanyakan Tidak Berbahaya</a></li>
<li><a href="../id470732/index.html">Pilihan musim gugur: apa pendapat Anda tentang payung pintar?</a></li>
<li><a href="../id470734/index.html">Kisah-kisah dari crypt (dari 40 tahun pekerjaan programmer)</a></li>
<li><a href="../id470736/index.html">WWDC 2019: Instrumen Kustom dan Simbol SF, serta pendekatan baru untuk pengembangan aplikasi iOS</a></li>
<li><a href="../id470742/index.html">Persamaan Navier-Stokes dan simulasi fluida pada CUDA</a></li>
<li><a href="../id470744/index.html">Matematika Mengungkap Rahasia Umpan Balik Sel Langsung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>