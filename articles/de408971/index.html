<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚶 ☎️ 👉🏾 Starten Sie DAB Multiplex zu Hause 🙇🏽 🤛🏻 📤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo Geektimes. 

 Der digitale Rundfunk wird in verschiedenen Ländern schrittweise eingeführt. In Europa und Australien ist es der Standard DAB / DA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Starten Sie DAB Multiplex zu Hause</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408971/">  Hallo Geektimes. <br><br>  Der digitale Rundfunk wird in verschiedenen Ländern schrittweise eingeführt.  In Europa und Australien ist es der Standard <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DAB / DAB +</a> , in den USA <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HD Radio</a> , in China <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CDR</a> (China Digital Radio).  Zu den Pluspunkten für den Benutzer zählen ein sauberer Klang aufgrund des digitalen Streams, zusätzliche Dienste (z. B. der Name des Songs und der Name des Interpreten auf dem Empfängerbildschirm) und im Fall von DAB eine größere Anzahl von Sendern im Vergleich zu FM.  Digitale Radioempfänger sind jetzt relativ günstig. Die Preise beginnen bei rund 40 US-Dollar. <br><br>  Russland hat sich noch keinem der Standards offiziell angeschlossen, aber wenn dies geschieht, wird es höchstwahrscheinlich DAB sein.  Der Testbetrieb wurde bereits in Moskau durchgeführt, und die europäischen Marktempfänger für die Russische Föderation sind geografisch besser zugänglich als die amerikanischen.  Neue europäische Autos (von denen wiederum mehr als amerikanische sind) sind häufig bereits mit einem DAB-Empfänger ausgestattet.  In der Zwischenzeit kann jeder zu Testzwecken DAB zu Hause mit einem SDR-Transceiver starten. <br><br><img src="https://habrastorage.org/webt/k6/rc/e8/k6rce8vbccstuywusg8ks1ypvwc.jpeg"><br>  (Bildquelle / Getty) <br><br>  Details unter dem Schnitt (sorgfältig viele lange und langweilige Konfigurationen). <br><a name="habracut"></a><br><h2>  Wie funktioniert es? </h2><br>  Leider sind unterschiedliche Standards nicht miteinander kompatibel. <br><br>  European <b>DAB</b> ist ein MP2- oder AAC-Stream, der mit ODFM in Kanälen mit Frequenzen von 174 bis 239 MHz übertragen wird.  So <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">weit wie</a> möglich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mehr als 30 Kanäle</a> mit einer Breite von jeweils etwa 1,5 MHz können mehrere Stationen gleichzeitig in einem Kanal übertragen werden.  Laut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wikipedia</a> ist die Verwendung von DAB bei Verwendung einer Bitrate von 192 kbit / s in Bezug auf die Anzahl der Sender dreimal effektiver als bei herkömmlichem FM. <br><br>  Das Spektrum eines DAB-Kanals auf dem SDR-Bildschirm sieht folgendermaßen aus: <br><br><img src="https://habrastorage.org/webt/vh/vr/xp/vhvrxpbqxv01zeh3dfd79vgbixi.jpeg"><br><br>  Zum Vergleich sehen FM-Sender im gleichen Maßstab wie folgt aus: <br><br><img src="https://habrastorage.org/webt/4v/-h/xp/4v-hxptupkzj4v56wyiw15vb9si.jpeg"><br><br>  Im amerikanischen <b>HD-Radio gingen</b> sie einen anderen Weg - digitale Kanäle wurden bestehenden FM-Sendern „zur Seite“ hinzugefügt.  Dies ermöglichte es uns, keine neuen Frequenzen zuzuweisen und die Kompatibilität mit alten Empfängern zu belassen.  Der Nachteil ist, dass in Großstädten bereits UKW-Sendungen ausgestrahlt werden.  Auf der anderen Seite ist sogar die maximale Anzahl von 50 Sendern für FM ziemlich gut, höchstwahrscheinlich brauchen die Hörer sie nicht. <br><br>  Das Spektrum von HD-Radio sieht folgendermaßen aus (Screenshot von Youtube): <br><br><img src="https://habrastorage.org/webt/yr/gn/dm/yrgndmvs0ptdz60a32m8xed1668.jpeg"><br><br>  Die chinesische <b>CDR hat</b> beschlossen, den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">amerikanischen Ansatz</a> zu kopieren, leider reichen meine Null-Chinesisch-Kenntnisse nicht aus, um detailliertere Informationen darüber zu finden. <br><br>  Der Preis für die Empfänger bei Amazon reicht von 30 US-Dollar für die einfachsten Modelle bis zu&gt; 100 US-Dollar für fortgeschrittenere Modelle mit Touchscreen, WLAN oder Farbbildschirm. <br><br><img src="https://habrastorage.org/webt/ft/ig/ah/ftigahoz4mqxvdvuriguzc9q-bs.jpeg"><br><br>  Da „Chukchi kein Leser ist“, werden wir das Testradio selbst im DAB / DAB + -Format starten.  HD-Radio funktioniert leider nicht, das Format ist geschlossen und es sind keine Encoder verfügbar. <br><br><h2>  Führen Sie DAB / DAB + aus </h2><br>  Der Prozess ist eigentlich nicht kompliziert, aber sehr mühsam in Bezug auf die Erstellung der erforderlichen Konfigurationen.  Für den Test benötigen wir Linux und SDR mit der Fähigkeit, beispielsweise HackRF oder USRP zu übertragen. <br><br><h3>  1. Zusammenstellung des Projekts </h3><br>  Zum Kompilieren des Encoders wird Linux benötigt.  Ich habe Ubunty verwendet, das fertige Image für VirtualBox wurde von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://www.osboxes.org/ubuntu/</a> heruntergeladen. <br><br>  <b>ODR-AudioEnc kompilieren</b> <br>  Zuerst müssen Sie den DAB / DAB + Audio-Encoder kompilieren. Sie finden ihn auf der Seite <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github.com/Opendigitalradio/ODR-AudioEnc</a> . <br><br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/Opendigitalradio/ODR-AudioEnc.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ODR-AudioEnc/ ./bootstrap ./configure --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-alsa --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-vlc make sudo make install</code> </pre> <br>  <b>ODR-DabMux kompilieren</b> <br>  ODR-DabMux kombiniert digitale Streams zu einem Multiplex.  Weitere <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Informationen finden</a> Sie unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github.com/Opendigitalradio/ODR-DabMux</a> . <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/Opendigitalradio/ODR-DabMux.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ODR-DabMux/ ./bootstrap.sh ./configure make sudo make install</code> </pre><br>  <b>ODR-DabMod kompilieren</b> <br>  Dies ist ein Modulator, der tatsächlich Daten an den Sender sendet.  Das Montageprinzip ist das gleiche, der Befehl zum Herunterladen: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/Opendigitalradio/ODR-DabMod.git</code> </pre><br>  Wenn während der Assembly keine Bibliotheken ausreichen, müssen sie mit apt-get installiert werden. <br><br>  Jetzt sind alle Teile des Projekts zusammengebaut, <s>und mit all dem werden wir versuchen, abzuheben</s> . <br><br><h3>  2. Konfiguration </h3><br>  Leider funktionierte USRP in einer virtuellen Maschine nicht und es war zu faul, volles Linux auf die Festplatte zu bringen.  Daher habe ich den Streaming-Modus nicht berücksichtigt - der Multiplex wurde aus vorbereiteten MP3-Dateien kompiliert und die resultierende IQ-Datei wurde unter Windows gestartet.  Ja, im Allgemeinen ist keine Streaming-Übertragung für das Haus erforderlich, es gab keine Aufgabe, eine „Piratenstation“ zu erstellen. <br><br>  Verschiedene Einstellungen werden hier ausführlicher beschrieben: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">http://opendigitalradio.github.io/mmbtools-doc/mmbtools.pdf</a> . <br><br>  <b>Datenaufbereitung</b> <br>  Es wird 2 Kanäle in unserem Multiplex geben, für die ich 2 MP3-Dateien von YouTube heruntergeladen und sie (wer hätte das gedacht) sound01.mp3 bzw. sound02.mp3 genannt habe. <br><br>  Konvertieren Sie Dateien in WAV mit einer Bitrate von 48000: <br>  ffmpeg -i sound01.mp3 -ar 48000 sound01.wav <br>  ffmpeg -i sound02.mp3 -ar 48000 sound02.wav <br><br>  Konvertieren Sie sie in das DAB-Format: <br>  odr-audioenc --dab -b 128 -i sound01.wav -o prog1.mp2 <br>  odr-audioenc --dab -b 128 -i sound02.wav -o prog2.mp2 <br><br>  Die Ausgabe sollte 2 Dateien prog1.mp2 und prog2.mp2 sein. <br><br>  <b>Multiplex-Erstellung</b> <br><br>  Zuerst müssen Sie eine Datei erstellen, die die Konfiguration unseres "Radiosenders" beschreibt.  Ich möchte Sie daran erinnern, dass es in einem DAB-Kanal viele Stationen mit jeweils eigenen Parametern geben kann. <br><br>  Erstellen Sie die Datei "config.mux" mit dem folgenden Text: <br><br><pre> <code class="cpp hljs">general { dabmode <span class="hljs-number"><span class="hljs-number">1</span></span> nbframes <span class="hljs-number"><span class="hljs-number">2000</span></span> ; Set to <span class="hljs-literal"><span class="hljs-literal">true</span></span> to enable logging to syslog syslog <span class="hljs-literal"><span class="hljs-literal">false</span></span> ; Enable timestamp definition necessary <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> SFN ; This also enables time encoding <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> the MNSC. tist <span class="hljs-literal"><span class="hljs-literal">false</span></span> } remotecontrol { telnetport <span class="hljs-number"><span class="hljs-number">0</span></span> } ensemble { id <span class="hljs-number"><span class="hljs-number">0x4fff</span></span> ecc <span class="hljs-number"><span class="hljs-number">0xec</span></span> ; Extended Country Code local-time-offset <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> international-table <span class="hljs-number"><span class="hljs-number">1</span></span> label <span class="hljs-string"><span class="hljs-string">"mmbtools"</span></span> shortlabel <span class="hljs-string"><span class="hljs-string">"mmbtools"</span></span> } services { srv-p1 { label <span class="hljs-string"><span class="hljs-string">"Station1"</span></span> } srv-p2 { label <span class="hljs-string"><span class="hljs-string">"Station2"</span></span> } } subchannels { sub-p1 { type audio inputfile <span class="hljs-string"><span class="hljs-string">"prog1.mp2"</span></span> bitrate <span class="hljs-number"><span class="hljs-number">128</span></span> id <span class="hljs-number"><span class="hljs-number">10</span></span> protection <span class="hljs-number"><span class="hljs-number">4</span></span> } sub-p2 { type audio inputfile <span class="hljs-string"><span class="hljs-string">"prog2.mp2"</span></span> bitrate <span class="hljs-number"><span class="hljs-number">128</span></span> id <span class="hljs-number"><span class="hljs-number">11</span></span> protection <span class="hljs-number"><span class="hljs-number">4</span></span> } } components { comp-p1 { service srv-p1 subchannel sub-p1 } comp-p2 { service srv-p2 subchannel sub-p2 } } outputs { output1 <span class="hljs-string"><span class="hljs-string">"file://output.eti?type=raw"</span></span> }</code> </pre><br>  Die Konfiguration beschreibt die Kanäle im Multiplex und ihre Datenquellen.  Der Parameter nbframes gibt an, wie viele Frames erstellt werden sollen. 2000 Frames entsprechen ungefähr einer Minute Wiedergabe. <br><br>  Erstellen Sie beim Speichern der Datei einen Multiplex: <br><br><pre> <code class="bash hljs">odr-dabmux config.mux</code> </pre> <br>  Die Ausgabe sollte die Datei <b>output.eti sein</b> , in meinem Fall war ihre Größe 12 MB. <br><br>  <b>Übertragen</b> <br><br>  Es gibt zwei Möglichkeiten.  Unter "echtem" Linux kann odr-dabmod Daten direkt an den Transceiver übertragen, dies hat jedoch unter der VM nicht funktioniert.  Daher habe ich als Ausgabeparameter eine Rohdatei angegeben, die mit Gnu Radio kompatible Daten enthält. <br><br>  Erstellen Sie die Datei config.ini: <br><br><pre> <code class="bash hljs">[input] transport = file <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> = output.eti loop=0 [modulator] digital_gain=0.9 rate=2048000 [output] output = file [fileoutput] format = complexf_normalised ;format = s8 filename = output.iq</code> </pre><br>  Hier ist der entscheidende Punkt das Ausgabeformat und sein Typ.  Für USRP verwende ich das Format complexf_normalised, für HackRF ist theoretisch ein 8-Bit-s8 geeignet. <br><br>  Speichern Sie die Konfiguration und starten Sie die Konvertierung: <br><br><pre> <code class="bash hljs">odr-dabmod config1.ini</code> </pre> <br>  Das ist alles!  Die Ausgabe sollte config.iq sein, in meinem Fall ungefähr 700 MB groß für eine Minute Aufnahme (IQ-Float-Format).  Wir kopieren es auf den "Haupt" -Computer und Linux kann geschlossen werden. <br><br><h3>  3. Testen </h3><br>  Wie ich bereits sagte, habe ich keinen DAB-Empfänger, der Chukchi ist kein Leser, ich höre überhaupt kein Radio :) Zum Testen habe ich die RTL-SDR-Pfeife und das kostenlose Programm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Welle.io verwendet</a> . <br><br>  Schließen Sie zuerst den Empfänger an, führen Sie Welle.io aus und suchen Sie einen freien Kanal.  In meinem Fall waren 12B davon betroffen: <br><br><img src="https://habrastorage.org/webt/cx/cl/md/cxclmd0xuxfdrffiloyf1xjxmpy.jpeg"><br><br>  Wir erinnern uns an die Frequenz und erstellen das einfachste Diagramm für die Übertragung an Gnu Radio: <br><br><img src="https://habrastorage.org/webt/cq/wu/jg/cqwujgyqzl2vj1t7eu2l26dedck.jpeg"><br><br>  Wir starten, warten ein paar Sekunden und ... wir hören die aufgenommene Musik über welle.io. <br><br><img src="https://habrastorage.org/webt/2x/ra/wv/2xrawv5tsbezvfknzsa3jcwctlo.jpeg"><br><br>  Wir stellen sicher, dass die Anzahl der Kanäle und ihre Namen den in der Konfiguration angegebenen entsprechen. <br><br>  Ja, der gesamte „Sendekomplex“ sieht folgendermaßen aus: <br><br><img src="https://habrastorage.org/webt/kr/9b/f2/kr9bf28cmcwyl_3nysdxmggf7o4.jpeg"><br><br><h3>  Fazit </h3><br>  Es sind nicht die Götter, die die Töpfe verbrennen, und es ist durchaus möglich, moderne Technologien zu Hause zu berühren, ohne den Desktop zu verlassen. <br><br>  Die Antenne war natürlich nicht auf die gewünschte Frequenz abgestimmt (und ich habe keinen Antennenanalysator), die maximale Leistung von USB3 beträgt wahrscheinlich nicht mehr als 1 W und ist selbst dann über ein Band von 1,5 MHz verteilt.  Die maximale Reichweite beträgt also ca. 0,5 m. <br><br>  Wenn jemand die Experimente mit größerer Leistung wiederholen möchte, bietet eine eBay-Suche nach dem Wort „RF-Leistungsverstärker“ viele nützliche Links (offiziell benötigen Sie eine Lizenz für die Ausstrahlung, natürlich sollten Sie sicherstellen, dass andere Dienste nicht gestört werden). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de408971/">https://habr.com/ru/post/de408971/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de408953/index.html">Toshiba führte eine "Helium" -Festplatte mit einer Kapazität von 14 TB ein</a></li>
<li><a href="../de408955/index.html">SBU durchsuchte den Gründer von ForkLog und beschlagnahmte alle Geräte aus dem Büro</a></li>
<li><a href="../de408957/index.html">In Russland werden sie eine wiederverwendbare Rakete entwickeln, die mit dem Falcon 9 konkurrieren kann</a></li>
<li><a href="../de408963/index.html">Wie unsere optischen Trennwände „gebacken“ werden</a></li>
<li><a href="../de408969/index.html">Psychedelische Fiktion (Kap. 2)</a></li>
<li><a href="../de408973/index.html">Wanhao Duplicator I3 Mini - erschwinglicher 3D-Druck</a></li>
<li><a href="../de408975/index.html">Lenovo Explorer VR Helm Bewertung: Lernen Sie VR mit minimalem Aufwand kennen</a></li>
<li><a href="../de408977/index.html">Die verrücktesten Raumschiffe</a></li>
<li><a href="../de408979/index.html">Das Kaspersky Lab vor einem US-Gericht fordert, das Verbot der öffentlichen Auftragsvergabe für seine Programme aufzuheben</a></li>
<li><a href="../de408981/index.html">Hat wissenschaftliches Wissen Grenzen?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>