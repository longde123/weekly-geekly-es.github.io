<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โฆ๏ธ ๐ฏ ๐ฃ ููููุฉ ุชุณุฑูุน ุนูููุฉ ุชูุฑูุบ LZ4 ูู ClickHouse ใฝ๏ธ ๐๐ผ ๐ฃ๐ฝ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุนูุฏ ุชูููุฐ ุงูุงุณุชุนูุงูุงุช ูู ClickHouse ุ ููููู ููุงุญุธุฉ ุฃู ูุธููุฉ LZ_decompress_fast ูู ุงูููู ุงูุดุฎุตู ุ ูู ุฃุญุฏ ุงูุฃูุงูู ุงูุฃููู ุ ุบุงูุจูุง ูุง ุชููู ูุฑุฆูุฉ. ููุงุฐุง ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููููุฉ ุชุณุฑูุน ุนูููุฉ ุชูุฑูุบ LZ4 ูู ClickHouse</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/452778/" style=";text-align:right;direction:rtl"> ุนูุฏ ุชูููุฐ ุงูุงุณุชุนูุงูุงุช ูู ClickHouse ุ ููููู ููุงุญุธุฉ ุฃู ูุธููุฉ LZ_decompress_fast ูู ุงูููู ุงูุดุฎุตู ุ ูู ุฃุญุฏ ุงูุฃูุงูู ุงูุฃููู ุ ุบุงูุจูุง ูุง ุชููู ูุฑุฆูุฉ.  ููุงุฐุง ูุญุฏุซ ูุฐุงุ  ุฃุตุจุญ ูุฐุง ุงูุณุคุงู ุงูุณุจุจ ูุฑุงุก ุงูุฏุฑุงุณุฉ ุจุฃููููุง ุญูู ุงุฎุชูุงุฑ ุฃูุถู ุฎูุงุฑุฒููุฉ ุชุฎููู ุงูุถุบุท.  ุฃูุง ููุง ุฃูุดุฑ ุงูุฏุฑุงุณุฉ ุจุฃููููุง ุ ููููู ุงูุนุซูุฑ ุนูู ุงููุณุฎุฉ ุงููุตูุฑุฉ ูู ุชูุฑูุฑู ุนูู HighLoad ++ Siberia. <br><br>  ูุชู ุชุฎุฒูู ุจูุงูุงุช ClickHouse ูู ุดูู ูุถุบูุท.  ูุฃุซูุงุก ุชูููุฐ ุงูุทูุจุงุช ุ ูุญุงูู ClickHouse ุนุฏู ุงูููุงู ุจุฃู ุดูุก ุชูุฑูุจูุง - ุงุณุชุฎุฏุงู ุงูุญุฏ ุงูุฃุฏูู ูู ููุงุฑุฏ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ูุญุฏุซ ุฃู ุฌููุน ุงูุญุณุงุจุงุช ุงูุชู ูุฏ ุชุณุชุบุฑู ุจุนุถ ุงูููุช ูุฏ ุชู ุชุญุณูููุง ุจุงููุนู ุจุดูู ุฌูุฏ ุ ูุฃู ุงูุทูุจ ููุชูุจ ุจุดูู ุฌูุฏ ูู ูุจู ุงููุณุชุฎุฏู.  ุซู ูุจูู ูุฃุฏุงุก ุงูุฅุตุฏุงุฑ. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/057/302/aba/057302aba5041790af404c2c781c4dd3.png"><br><br>  ูุงูุณุคุงู ูู - ููุงุฐุง ูููู ุฃู ูููู ุชูุฑูุบ LZ4 ุนูู ุงูุฒุฌุงุฌุฉุ  ูุจุฏู ุฃู LZ4 ุนุจุงุฑุฉ ุนู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฎูุงุฑุฒููุฉ ุฎูููุฉ ุงููุฒู ููุบุงูุฉ</a> : ูุชุฑุงูุญ ูุนุฏู ุงูุถุบุท ุ ุงุนุชูุงุฏูุง ุนูู ุงูุจูุงูุงุช ุ ูู 1 ุฅูู 3 ุฌูุฌุงุจุงูุช / ุซุงููุฉ ููู ููุฑ ูุนุงูุฌ.  ูุฐุง ุฃูุซุฑ ุจูุซูุฑ ูู ุณุฑุนุฉ ุงููุธุงู ุงููุฑุนู ูููุฑุต.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุญู ูุณุชุฎุฏู ุฌููุน ุงูููุงุฉ ุงููุชุงุญุฉ ุ ูููุงููุณ ุงูุชูุณูุน ุฎุทูุง ุนุจุฑ ุฌููุน ุงูููู ุงููุงุฏูุฉ. <br><a name="habracut"></a><br>  ูููู ููุงู ููุทุชุงู ูุฌุจ ูุฑุงุนุงุชููุง.  ุฃููุงู ุ ูุชู ูุฑุงุกุฉ ุงูุจูุงูุงุช ุงููุถุบูุทุฉ ูู ุงููุฑุต ุ ููุชู ุฅุนุทุงุก ูุนุฏู ุงูุถุบุท ูู ููุฏุงุฑ ุงูุจูุงูุงุช ุบูุฑ ุงููุถุบูุทุฉ.  ุฅุฐุง ูุงูุช ูุณุจุฉ ุงูุถุบุท ูุจูุฑุฉ ุจูุง ููู ุงูููุงูุฉ ุ ููู ุชุญุชุงุฌ ุฅูู ูุฑุงุกุฉ ุฃู ุดูุก ุชูุฑูุจูุง ูู ุงูุฃูุฑุงุต.  ูููู ูู ุงูููุช ููุณู ุ ูุชู ุฅูุดุงุก ุงููุซูุฑ ูู ุงูุจูุงูุงุช ุงููุถุบูุทุฉ ุ ูุจุงูุทุจุน ุ ูุคุซุฑ ูุฐุง ุนูู ุงุณุชููุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ: ูุชูุงุณุจ ุญุฌู ุถุบุท ุงูุจูุงูุงุช ูู ุญุงูุฉ LZ4 ุชูุฑูุจูุง ูุน ุญุฌู ุงูุจูุงูุงุช ุงููุถุบูุทุฉ ููุณูุง. <br><br>  ุซุงููุงู ุ ูุฏ ูุง ุชููู ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ุงูุฃูุฑุงุต ูุทููุจุฉ ุนูู ุงูุฅุทูุงู ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช.  ููููุงู ุจุฐูู ุ ููููู ุงูุงุนุชูุงุฏ ุนูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ููุตูุญุฉ ุฃู ุงุณุชุฎุฏุงู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุฎุงุตุฉ ุจู.  ูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุฃุนูุฏุฉ ุ ูููู ุงุณุชุฎุฏุงู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฃูุซุฑ ูุนุงููุฉ ูุธุฑูุง ูุญูููุฉ ุฃูู ูุง ุชูุน ุฌููุน ุงูุฃุนูุฏุฉ ููู ุ ูููู ููุท ุงูุฃุนูุฏุฉ ุงููุณุชุฎุฏูุฉ ุจุดูู ูุชูุฑุฑ.  ูุฐุง ูู ุงูุณุจุจ LZ4 ุ ูู ุญูุซ ุชุญููู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ูุบุงูุจุง ูุง ูููู ุนูู ุงูุฒุฌุงุฌุฉ. <br><br>  ููู ููุง ุณุคุงูุงู ุขุฎุฑุงู.  ุฅุฐุง ูุงู ุถุบุท ุงูุจูุงูุงุช "ูุจุทุฆ" ุ ูุนูุฏุฆุฐ ุฑุจูุง ูุง ููุจุบู ุถุบุทูุง ุนูู ุงูุฅุทูุงูุ  ููู ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุฐุง ุงูุงูุชุฑุงุถ ูุง ูุนูู ูู.  ุชู ูุคุฎุฑูุง ูู ClickHouse ุชูููู ุฎูุงุฑูู ูุถุบุท ุงูุจูุงูุงุช ููุท - LZ4 ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Zstandard</a> .  ุงูุงูุชุฑุงุถู ูู LZ4.  ูู ุฎูุงู ุงูุชุญูู ุฅูู Zstandard ุ ููููู ุฌุนู ุงูุถุบุท ุฃููู ูุฃุจุทุฃ.  ูููู ูุงู ูู ุงููุณุชุญูู ุชุนุทูู ุงูุถุบุท ุชูุงููุง ุญุชู ููุช ูุฑูุจ - ูุนุชุจุฑ LZ4 ูุญุฏ ุฃุฏูู ูุนููููุง ุ ูุงูุฐู ูููู ุงุณุชุฎุฏุงูู ุฏุงุฆููุง.  ูุฐุง ูู ุงูุณุจุจ ูู ุฃููู ุญูุง ุฃุญุจ LZ4.  :) <br><br>  ููู ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุธูุฑ ุดุฎุต ุบุฑูุจ ุบุงูุถ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฏุฑุฏุดุฉ ุงูุฏุฑุฏุดุฉ</a> ClickHouse ุงููุงุทูุฉ ุจุงูุฅูุฌููุฒูุฉ ุ ูุงูุฐู ูุงู ุฅูู ูุฏูู ูุธุงู ูุฑุนู ุณุฑูุน ููุบุงูุฉ ูููุฑุต (NVMe SSD) ููู ุดูุก ูุนุชูุฏ ุนูู ุงูุถุบุท - ุณูููู ูู ุงูุฑุงุฆุน ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุฅููุงู ุชุดุบููู.  ุฃุฌุจุชู ุฃูู ูุง ููุฌุฏ ูุซู ูุฐุง ุงูุงุญุชูุงู ุ ููู ูู ุงูุณูู ุฅุถุงูุชู.  ุจุนุฏ ุจุถุนุฉ ุฃูุงู ุชููููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุทูุจ ุชุฌูุน</a> ุ ูุงูุฐู ูููุฐ ุทุฑููุฉ ุงูุถุบุท <code>none</code> .  ููุฏ ุทูุจุช ุงููุชุงุฆุฌ - ุฅูู ุฃู ูุฏู ุณุงุนุฏ ูุฐุง ุงูุฃูุฑ ุ ููุฏู ุณุฑุนุฉ ุงูุทูุจุงุช.  ูุงู ุงูุดุฎุต ุฅู ูุฐู ุงูููุฒุฉ ุงูุฌุฏูุฏุฉ ุชุญููุช ุฅูู ูุงุฆุฏุฉ ูู ุงููุงุญูุฉ ุงูุนูููุฉ ุ ุญูุซ ุจุฏุฃุช ุงูุจูุงูุงุช ุจุฏูู ุถุบุท ูู ุดุบู ูุณุงุญุฉ ูุจูุฑุฉ ุฌุฏูุง. <br><br>  ุงูุณุคุงู ุงูุซุงูู ุงูุฐู ูุทุฑุญ ููุณู ูู: ุฅุฐุง ูุงู ููุงู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ุ ูููุงุฐุง ูุง ุชุฎุฒู ุงูุจูุงูุงุช ุบูุฑ ุงููุถุบูุทุฉ ุจุงููุนู ูููุ  ูุฐุง ูุณููุญ ุจู - ูู ูุซูุฑ ูู ุงูุญุงูุงุช ุณูููู ูู ุงููููู ุงูุชุฎูุต ูู ุงูุญุงุฌุฉ ุฅูู ุฅุฒุงูุฉ ุงูุถุบุท.  ููู ClickHouse ููุฌุฏ ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ูุซู ุฐุงูุฑุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชุฎุฒูู ุงููุคูุช ูููุชู ุงูููุณุนุฉ</a> .  ููู ูู ุงููุคุณู ุฃู ุชููู ุงููุซูุฑ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุนูููุง ุจุณุจุจ ููุงุกุชูุง ุงูููุฎูุถุฉ.  ูุจุฑุฑ ููุณู ููุท ุนูู ุงูุทูุจุงุช ุงูุตุบูุฑุฉ ุงููุชุชุงููุฉ ุงูุชู ุชุณุชุฎุฏู ููุณ ุงูุจูุงูุงุช ุชูุฑูุจูุง. <br><br>  ุงุนุชุจุงุฑุงุช ุนุงูุฉ: ูุฌุจ ุถุบุท ุงูุจูุงูุงุช ุ ูููุถู ุฏุงุฆููุง.  ุงุญุฑููุง ุฏุงุฆููุง ุนูู ูุฑุต ูุถุบูุท.  ููู ุนุจุฑ ุงูุดุจูุฉ ุฃูุถุง ูุน ุงูุถุบุท.  ูู ุฑุฃูู ุ ูุฌุจ ุงุนุชุจุงุฑ ุงูุถุบุท ุงูุงูุชุฑุงุถู ูุจุฑุฑูุง ุญุชู ุนูุฏ ุงูููู ุฅูู ุดุจูุฉ ุฐุงุช 10 ุบูุบุงุจุช ุฏูู ุฒูุงุฏุฉ ุงูุงุดุชุฑุงู ูู ูุฑูุฒ ุงูุจูุงูุงุช ุ ูููู ุงูุจูุงูุงุช ุฏูู ุถุบุท ุจูู ูุฑุงูุฒ ุงูุจูุงูุงุช ุบูุฑ ููุจูู ุนููููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ููุงุฐุง LZ4ุ </h3><br>  ููุงุฐุง ูุชู ุงุณุชุฎุฏุงู LZ4ุ  ูู ูู ุงููููู ุงุฎุชูุงุฑ ุดูุก ุฃุณููุ  ูู ุญูุซ ุงููุจุฏุฃ ุ ูุฐุง ูููู ุ ููู ุญู ููููุฏ.  ูููู ุฏุนููุง ุฃููุงู ูููู ูุธุฑุฉ ุนูู ูุฆุฉ ุงูุฎูุงุฑุฒููุงุช ุงูุชู ุชูุชูู ุฅูููุง LZ4. <br><br>  ุฃููุงู ุ ูุง ูุนุชูุฏ ุนูู ููุน ุงูุจูุงูุงุช.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ููุช ุชุนูู ููุฏููุง ุฃูู ุณูููู ูุฏูู ูุฌููุนุฉ ูู ุงูุฃุนุฏุงุฏ ุงูุตุญูุญุฉ ุ ูููููู ุงุณุชุฎุฏุงู ุฃุญุฏ ุงููุชุบูุฑุงุช ุงูุนุฏูุฏุฉ ูุฎูุงุฑุฒููุฉ VarInt - ุณูููู ุฃูุซุฑ ูุนุงููุฉ ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ุซุงููุงู ุ ูุง ูุนุชูุฏ LZ4 ูุซูุฑูุง ุนูู ุงูุงูุชุฑุงุถุงุช ุงููุทููุจุฉ ูู ูููุฐุฌ ุงูุจูุงูุงุช.  ุงูุชุฑุถ ุฃู ูุฏูู ุณูุณูุฉ ุฒูููุฉ ูุทููุจุฉ ูู ูุฑุงุกุงุช ุงููุณุชุดุนุฑ - ุตููู ุจู ุฃุฑูุงู ูู ุงูููุน float.  ุจุนุฏ ุฐูู ุ ููููู ุญุณุงุจ ุงูุฏูุชุง ุซู ุงูุถุบุท ุฃูุซุฑ ุ ูุณูููู ุฐูู ุฃูุซุฑ ูุนุงููุฉ ูู ุญูุซ ูุณุจุฉ ุงูุถุบุท. <br><br>  ูุฐุง ูู ุ LZ4 ูููู ุงุณุชุฎุฏุงููุง ุฏูู ูุดุงูู ูุฃู ุตูุงุฆู ุจุงูุช - ูุฃูุฉ ูููุงุช.  ุจุงูุทุจุน ุ ูุฏูู ุชุฎุตุตู ุงูุฎุงุต (ุฃูุซุฑ ูู ุฐูู ุฃุฏูุงู) ุ ููู ุจุนุถ ุงูุญุงูุงุช ูููู ุงุณุชุฎุฏุงูู ุจูุง ูุนูู.  ูููู ุฅุฐุง ุฃุณููุชูุง ุฎูุงุฑุฒููุฉ ููุฃุบุฑุงุถ ุงูุนุงูุฉ ุ ูุณูููู ูุฐุง ุฎุทุฃ ุจุณูุทูุง.  ููุงุญุธ ุฃูู ุจูุถู ุงูุฌูุงุฒ ุงูุฏุงุฎูู ุ ูููู LZ4 ุชููุงุฆููุง ุจุชูููุฐ ุฎูุงุฑุฒููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">RLE</a> ูุญุงูุฉ ุฎุงุตุฉ. <br><br>  ุณุคุงู ุขุฎุฑ: ูู LZ4 ูู ุงูุฎูุงุฑุฒููุฉ ุงููุซูู ููุฐู ุงููุฆุฉ ูู ุฃุฌู ุงูุฌูุน ุจูู ุงูุณุฑุนุฉ ูููุฉ ุงูุถุบุทุ  ุชุณูู ูุฐู ุงูุฎูุงุฑุฒููุงุช ุจุงุฑูุชู ุงูุญุฏูุฏู - ููุฐุง ูุนูู ุฃูู ูุง ุชูุฌุฏ ุฎูุงุฑุฒููุฉ ุฃุฎุฑู ุฃูุถู ุจุดูู ุตุงุฑู ูู ูุคุดุฑ ูุงุญุฏ ูููุณ ุฃุณูุฃ ูู ุบูุฑูุง (ูุญุชู ูู ูุฌููุนุฉ ูุงุณุนุฉ ูู ูุฌููุนุงุช ุงูุจูุงูุงุช).  ููุงู ุฎูุงุฑุฒููุงุช ุฃุณุฑุน ุ ูููููุง ุชุนุทู ูุณุจุฉ ุถุบุท ุฃูู ุ ูุชูู ุงูุชู ุชุถุบุท ุฃูุซุฑ ุ ูููู ูู ููุณ ุงูููุช ุฃุจุทุฃ ุฃู ุถุบุท ุฃุจุทุฃ. <br><br>  ูู ุงููุงูุน ุ ูุฅู LZ4 ููุณ ุญุฏูุฏูุง ุจุงุฑูุชู.  ููุงู ุฎูุงุฑุงุช ุฃูุถู ููููุงู.  ุนูู ุณุจูู ุงููุซุงู ุ ูุฐุง ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">LZTURBO</a> ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">powturbo</a> ูุนูู.  ููุณ ููุงู ุดู ูู ููุซูููุฉ ุงููุชุงุฆุฌ ุจูุถู ุงููุฌุชูุน ุนูู encode.ru (ููู ุฃูุจุฑ ููุชุฏู ุชูุฑูุจูุง ูุงูุถุบุท ุงููุญูุฏ ูุถุบุท ุงูุจูุงูุงุช).  ููู ุงููุทูุฑ ูุง ููุฒุน ุงูููุฏ ุงููุตุฏุฑู ุฃู ุงูุซูุงุฆูุงุช ุ ูููู ูุนุทููู ููุท ูุฏุงุฆุฑุฉ ูุญุฏูุฏุฉ ูู ุงููุงุณ ููุงุฎุชุจุงุฑ ุฃู ููุงุจู ุงููุซูุฑ ูู ุงููุงู (ูุซููุง ูู ูุฏูุน ุฃู ุดุฎุต ุญุชู ุงูุขู).  ูุณุชุญู ุฃูุถูุง ุงูุงูุชุจุงู ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุณุญููุฉ</a> (LZ5 ุณุงุจููุง) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงููุซุงูุฉ</a> .  ูููููู ุงูุนูู ุจุดูู ุฃูุถู ููููุงู ูู LZ4 ุนูุฏ ุงุฎุชูุงุฑ ูุณุชูู ุถุบุท.  ุงูุชุจู ุฃูุถูุง ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">LZSSE</a> - ุดูุก ูุซูุฑ ุฌุฏูุง ููุงูุชูุงู.  ููุน ุฐูู ุ ูู ุงูุฃูุถู ุฃู ููุธุฑ ุฅููู ุจุนุฏ ูุฑุงุกุฉ ูุฐุง ุงูููุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ููู ูุนูู LZ4ุ </h3><br>  ุฏุนููุง ููุธุฑ ูู ููููุฉ ุนูู LZ4 ุจุดูู ุนุงู.  ูุฐุง ุฃุญุฏ ุชุทุจููุงุช ุฎูุงุฑุฒููุฉ LZ77: ูุดูุฑ L ู Z ุฅูู ุฃุณูุงุก ุงููุคูููู (Lempel ู Ziv) ุ ู 77 - ูู ุนุงู 1977 ุ ุนูุฏูุง ุชู ูุดุฑ ุงูุฎูุงุฑุฒููุฉ.  ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุชุทุจููุงุช ุงูุฃุฎุฑู: QuickLZ ุ FastLZ ุ BriefLZ ุ LZF ุ LZO ุ ููุฐูู gzip ู zip ุนูุฏ ุงุณุชุฎุฏุงู ูุณุชููุงุช ุถุบุท ููุฎูุถุฉ. <br><br>  ุชุญุชูู ูุชูุฉ ุงูุจูุงูุงุช ุงููุถุบูุทุฉ ุจุงุณุชุฎุฏุงู LZ4 ุนูู ุณูุณูุฉ ูู ุงูุณุฌูุงุช (ุงูุฃูุงูุฑ ูุงูุชุนูููุงุช) ูู ููุนูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุญุฑูู: "ุฎุฐ ุงูุจุงูุชุงุช N ุงูุชุงููุฉ ููุง ูู ูุงูุณุฎูุง ุฅูู ุงููุชูุฌุฉ." </li><li style=";text-align:right;direction:rtl">  ุงููุทุงุจูุฉ (ุงููุทุงุจูุฉ): "ุฎุฐ N ุจุงูุช ุงูุชู ุชู ูู ุถุบุทูุง ุจุงููุนู ุจูุงุณุทุฉ ุฅุฒุงุญุฉ ุงูุฅุฒุงุญุฉ ูู ุงูููุถุน ุงูุญุงูู." </li></ol><br>  ูุซุงู  ูุจู ุงูุถุบุท: <br> <code>Hello world Hello</code> <br> <br>  ุจุนุฏ ุงูุถุบุท: <br> <code>literals 12 "Hello world " match 5 12</code> <br> <br>  ุฅุฐุง ุฃุฎุฐูุง ูุชูุฉ ูุถุบูุทุฉ ูุฐูุจูุง ุฅูููุง ูู ุฎูุงู ุงููุคุดุฑ ุ ูุชูููุฐ ูุฐู ุงูุฃูุงูุฑ ุ ูุณูุญุตู ุนูู ุงูุจูุงูุงุช ุงูุฃูููุฉ ุบูุฑ ุงููุถุบูุทุฉ ููุชูุฌุฉ ูุฐูู. <br><br>  ูุธุฑูุง ุชูุฑูุจูุง ูู ููููุฉ ูู ุถุบุท ุงูุจูุงูุงุช.  ุงูููุทุฉ ูุงุถุญุฉ ุฃูุถูุง: ูุฅุฌุฑุงุก ุงูุถุบุท ุ ุชููู ุงูุฎูุงุฑุฒููุฉ ุจุชุดููุฑ ุชูุฑุงุฑ ุชุณูุณู ุงูุจุงูุช ุจุงุณุชุฎุฏุงู ุงูุชุทุงุจูุงุช. <br><br>  ูุงุถุญ ูุจุนุถ ุงูุฎุตุงุฆุต.  ูุฐู ุงูุฎูุงุฑุฒููุฉ ููุฌูุฉ ูุญู ุงูุจุงูุช - ููู ูุง ุชุดุฑูุญ ุงูุจุงูุชุงุช ุงููุฑุฏูุฉ ุ ูููููุง ุชูุณุฎูุง ุจุงููุงูู.  ููุง ูููู ุงููุฑู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงูุชุฑููุฒ ุงูุงูุชุฑูุจูุง.  ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">zstd</a> ูู ุชูููู LZ77 ูุชุฑููุฒ ุฅูุชุฑูุจู. <br><br>  ูุงุญุธ ุฃูู ูุง ูุชู ุงุฎุชูุงุฑ ุญุฌู ุงููุชูุฉ ุงููุถุบูุทุฉ ูุจูุฑูุง ุฌุฏูุง ุจุญูุซ ูุง ุชููู ุงููุซูุฑ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ุฃุซูุงุก ุงูุชูุฑูุบ ุ  ุญุชู ูุง ุชุจุทุฆ ุงููุตูู ุงูุนุดูุงุฆู ูู ููู ูุถุบูุท (ูุงูุฐู ูุชููู ูู ุงูุนุฏูุฏ ูู ุงููุชู ุงููุถุบูุทุฉ) ุ  ููู ุจุนุถ ุงูุฃุญูุงู ุจุญูุซ ููุงุณุจ ุงููุชูุฉ ูู ุจุนุถ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ููููู ุงุฎุชูุงุฑ 64 ูููู ุจุงูุช - ูุฐูู ุณุชูุถุน ุงููุฎุงุฒู ุงููุคูุชุฉ ููุจูุงูุงุช ุงููุถุบูุทุฉ ูุบูุฑ ุงููุถุบูุทุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช L2 ูุณูุธู ุงููุตู. <br><br>  ุฅุฐุง ุงุญุชุฌูุง ุฅูู ุถุบุท ููู ุฃูุจุฑ ุ ูุณูููู ุจุจุณุงุทุฉ ุจุชุณูุณู ุงููุชู ุงููุถุบูุทุฉ.  ูู ุงูููุช ููุณู ุ ุจุฌุงูุจ ูู ูุชูุฉ ูุถุบูุทุฉ ุ ูู ุงูููุงุณุจ ูุถุน ุจูุงูุงุช ุฅุถุงููุฉ - ุฃุญุฌุงู ุ ุชุญูู ูู ุงููุฌููุน. <br><br>  ุงูุฅุฒุงุญุฉ ุงููุตูู ูููุจุงุฑุงุฉ ูุญุฏูุฏุฉ ุ ุจู LZ4 - 64 ูููู ุจุงูุช.  ุชุณูู ูุฐู ุงููููุฉ ูุงูุฐุฉ ุงูุฒูุงููุฉ.  ูู ุงููุงูุน ุ ูุฐุง ูุนูู ุฃูู ุนูุฏูุง ูุชุญุฑู ุงููุคุดุฑ ููุฃูุงู ุ ูููู ุฃู ุชููู ุงููุทุงุจูุงุช ูู ูุงูุฐุฉ ูู 64 ูููู ุจุงูุช ูู ุงูุญุฌู ุฅูู ุงููุคุดุฑ ุ ูุงูุฐู ูุชุญุฑู ูุน ุงููุคุดุฑ. <br><br>  ุงูุขู ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ููููุฉ ุถุบุท ุงูุจูุงูุงุช - ุจูุนูู ุขุฎุฑ ุ ููููุฉ ุงูุนุซูุฑ ุนูู ุชุณูุณูุงุช ูุทุงุจูุฉ ูู ููู.  ุจุงูุทุจุน ุ ููููู ุงุณุชุฎุฏุงู ุงููุงุญูุฉ trie (ุฑุงุฆุนุฉ ุฅุฐุง ุณูุนุช ุจูุง).  ููุงู ุฎูุงุฑุงุช ูููู ูููุง ุฃุทูู ุชุณูุณู ูุทุงุจู ูุถููู ููููู ุจูู ุงูุจุงูุชุงุช ุงูุณุงุจูุฉ ูู ุนูููุฉ ุงูุถุบุท.  ููุฐุง ูุง ูุณูู ุชุญููู ุงูุฃูุซู ููุนุทู ูุณุจุฉ ุถุบุท ุฃูุถู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุฑูุจุง</a> ูุชูุณูู ูุชูุฉ ูุถุบูุทุฉ ุซุงุจุชุฉ.  ูููู ููุงู ุฎูุงุฑุงุช ุฃูุซุฑ ูุงุนููุฉ - ุนูุฏูุง ูุฌุฏ ุจุนุถ ุงูุชุทุงุจู ุงูุฌูุฏ ูู ุงูุจูุงูุงุช ุ ูููู ููุณ ุจุงูุถุฑูุฑุฉ ุงูุฃุทูู.  ุงูุทุฑููุฉ ุงูุฃูุซุฑ ูุงุนููุฉ ููุนุซูุฑ ุนููู ูู ุงุณุชุฎุฏุงู ุฌุฏูู ุงูุชุฌุฒุฆุฉ. <br><br>  ููููุงู ุจุฐูู ุ ูุฐูุจ ูู ุฎูุงู ูุชูุฉ ุงูุจูุงูุงุช ุงููุตุฏุฑ ูุน ุงููุคุดุฑ ููุฃุฎุฐ ุจุถุน ุจุงูุช ุจุนุฏ ุงููุคุดุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ 4 ุจุงูุช.  ูู ุจุชุฌููุนูุง ููุถุนูุง ูู ุฌุฏูู ุงูุชุฌุฒุฆุฉ ุงูุฅุฒุงุญุฉ ูู ุจุฏุงูุฉ ุงููุชูุฉ - ุญูุซ ูุงุจูุช ูุฐู ุงูุจุงูุชุงุช ุงูุฃุฑุจุนุฉ.  ุงููููุฉ 4 ุชุณูู min-match - ุจูุณุงุนุฏุฉ ุฌุฏูู ุงูุชุฌุฒุฆุฉ ูุฐุง ุ ูููููุง ุฅูุฌุงุฏ ุชุทุงุจูุงุช ูุง ุชูู ุนู 4 ุจุงูุช. <br><br>  ุฅุฐุง ูุธุฑูุง ุฅูู ุฌุฏูู ุงูุชุฌุฒุฆุฉ ุ ููุงู ููุงู ุจุงููุนู ุณุฌู ููุงู ุ ูุฅุฐุง ูุงู ุงูุฅุฒุงุญุฉ ูุง ูุชุฌุงูุฒ ุงููุงูุฐุฉ ุงูููุฒููุฉ ุ ูุฅููุง ูุชุญูู ูู ุนุฏุฏ ุงูุจุงูุชุงุช ุงูุฅุถุงููุฉ ุงูุชู ุชุชุทุงุจู ุจุนุฏ ูุฐู ุงูุจุงูุชุงุช ุงูุฃุฑุจุนุฉ.  ุฑุจูุง ููุงู ุงููุซูุฑ ุงูุฐู ูุชุฒุงูู.  ูู ุงููููู ุฃูุถูุง ุฃู ูุญุฏุซ ุชุตุงุฏู ูู ุฌุฏูู ุงูุชุฌุฒุฆุฉ ููุง ููุฌุฏ ุดูุก ูุทุงุจู ูู.  ูุฐุง ุฃูุฑ ุทุจูุนู - ููููู ุจุจุณุงุทุฉ ุงุณุชุจุฏุงู ุงููููุฉ ูู ุฌุฏูู ุงูุชุฌุฒุฆุฉ ุจุขุฎุฑ ุฌุฏูุฏ.  ุณูู ูุคุฏู ุงูุชุตุงุฏู ูู ุฌุฏูู ุงูุชุฌุฒุฆุฉ ุจุจุณุงุทุฉ ุฅูู ุงูุฎูุงุถ ูุณุจุฉ ุงูุถุบุท ูุธุฑูุง ููุฌูุฏ ุนุฏุฏ ุฃูู ูู ุงูุชุทุงุจูุงุช.  ุจุงูููุงุณุจุฉ ุ ูุณูู ูุฐุง ุงูููุน ูู ุฌุฏูู ุงูุชุฌุฒุฆุฉ (ุจุญุฌู ุซุงุจุช ูุจุฏูู ุชุตุงุฏู) ุฌุฏูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ุฌุฏูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช.  ูุฐุง ุฃูุถูุง ููุทูู - ูู ุญุงูุฉ ุญุฏูุซ ุชุตุงุฏู ุ ููุณู ุฌุฏูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุณุฌู ุงููุฏูู ููุท. <br><blockquote style=";text-align:right;direction:rtl">  ูููุฉ ูููุงุฑุฆ ุงูููุธ.  ุฏุน ุงูุจูุงูุงุช ุชููู ุนุจุงุฑุฉ ุนู ูุฌููุนุฉ ูู ุงูุฃุฑูุงู ูุซู UInt32 ุจุชูุณูู endian ุงูุตุบูุฑ ุ ููู ุฌุฒุก ูู ุณูุณูุฉ ูู ุงูุฃุฑูุงู ุงูุทุจูุนูุฉ: 0 ุ 1 ุ 2 ... ูุถุญ ููุงุฐุง ุนูุฏ ุงุณุชุฎุฏุงู LZ4 ุ ูุง ูุชู ุถุบุท ูุฐู ุงูุจูุงูุงุช (ูููุฉ ุงูุจูุงูุงุช ุงููุถุบูุทุฉ ูุง ุชูู ุนู ูููุฉ ุงูุจูุงูุงุช ุบูุฑ ุงููุถุบูุทุฉ). </blockquote><h3 style=";text-align:right;direction:rtl">  ููููุฉ ุชุณุฑูุน ุงูุงููุฑ </h3><br>  ูุฐูู ุ ุฃุฑูุฏ ุชุณุฑูุน ุนูููุฉ ุชูุฑูุบ LZ4.  ุฏุนููุง ูุฑู ููู ุชุจุฏู ุฏูุฑุฉ ุงูุชูุฑูุบ.  ููุง ูู ุญููุฉ ูู ุงูููุฏ ุงููุงุฐุจ: <br><br><pre style=";text-align:right;direction:rtl">  ุจูููุง (...)
 {
     ูุฑุงุกุฉ (input_pos ุ literal_length ุ match_length) ุ<font></font>
<font></font>
     copy (output_posุ input_posุ literal_length)ุ
     output_pos + = literal_lengthุ<font></font>
<font></font>
     ูุฑุงุกุฉ (input_pos ุ match_offset) ุ<font></font>
<font></font>
     ูุณุฎุฉ (output_pos ุ output_pos - match_offset ุ
         match_length)ุ
     output_pos + = match_lengthุ
 } </pre><br>  ุชู ุชุตููู ุชูุณูู LZ4 ุจุญูุซ ุชุชูุงูู ุงูููู ุงูุญุฑููุฉ ูุงููุทุงุจูุฉ ูู ููู ูุถุบูุท.  ููู ุงููุงุถุญ ุฃู ุงูุญุฑูู ูุฃุชู ุฏุงุฆููุง ุฃููุงู (ูุฃูู ูู ุงูุจุฏุงูุฉ ูุง ููุฌุฏ ููุงู ูููู ุฃู ุชุญุตู ุนููู ุงููุจุงุฑุงุฉ).  ูุฐูู ุ ูุชู ุชุฑููุฒ ุฃุทูุงููุง ูุนูุง. <br><br>  ูู ุงููุงูุน ุ ูู ุดูุก ุฃูุซุฑ ุชุนููุฏูุง ููููุงู.  ุชุชู ูุฑุงุกุฉ ุจุงูุช ูุงุญุฏ ูู ุงูููู ุ ููุชู ุฃุฎุฐ ุญููุชูู ููู ุ ุญูุซ ูุชู ุชุฑููุฒ ุงูุฃุฑูุงู ูู 0 ุฅูู 15. ุฅุฐุง ูุงู ุงูุฑูู ุงูููุงุจู ูุง ูุณุงูู 15 ุ ูููุนุชุจุฑ ุทูู ุงูุญุฑูู ูุงููุทุงุจูุฉ ุ ุนูู ุงูุชูุงูู.  ูุฅุฐุง ูุงู ุงูุฑูู 15 ุ ูุณูููู ุงูุทูู ุฃุทูู ููุชู ุชุฑููุฒู ุจุงูุจุงูุชุงุช ุงูุชุงููุฉ.  ุซู ูุชู ูุฑุงุกุฉ ุงูุจุงูุช ุงูุชุงูู ุ ูุชุชู ุฅุถุงูุฉ ูููุชู ุฅูู ุงูุทูู.  ุนูุงูุฉ ุนูู ุฐูู ุ ุฅุฐุง ูุงู ูุณุงูู 255 ุ ูุณูุณุชูุฑ - ููุฑุฃ ุงูุจุงูุชุฉ ุงูุชุงููุฉ ุจููุณ ุงูุทุฑููุฉ. <br><br>  ูุงุญุธ ุฃู ุงูุญุฏ ุงูุฃูุตู ููุณุจุฉ ุงูุถุบุท ูุชูุณูู LZ4 ูุง ูุตู ุฅูู 255. ูุงูููุงุญุธุฉ ุงูุซุงููุฉ (ุนุฏููุฉ ุงููุงุฆุฏุฉ): ุฅุฐุง ูุงูุช ุจูุงูุงุชู ุฒุงุฆุฏุฉ ุนู ุงูุญุงุฌุฉ ุ ูุณูุคุฏู ุงุณุชุฎุฏุงู LZ4 ุฅูู ูุถุงุนูุฉ ูุณุจุฉ ุงูุถุบุท. <br><br>  ุนูุฏูุง ููุฑุฃ ุทูู ุงูุญุฑู (ุซู ุฃูุถูุง ุทูู ุงููุจุงุฑุงุฉ ูุฅุฒุงุญุฉ ุงููุจุงุฑุงุฉ) ุ ูุฅูุบุงุก ุชูููู ูููู ููุท ูุณุฎ ูุทุนุชูู ูู ุงูุฐุงูุฑุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ููููุฉ ูุณุฎ ูุทุนุฉ ูู ุงูุฐุงูุฑุฉ </h3><br>  ูุจุฏู ุฃูู ููููู ุงุณุชุฎุฏุงู ูุธููุฉ <code>memcpy</code> ุ ุงููุตููุฉ ููุท ููุณุฎ ุฃุฌุฒุงุก ูู ุงูุฐุงูุฑุฉ.  ูููู ูุฐุง ููุณ ุงูุฃูุซู ููุง ูุฒุงู ุบูุฑ ุตุญูุญ. <br><br>  ููุงุฐุง ูุชู ุงุณุชุฎุฏุงู ุงูุฏุงูุฉ memcpy ุฏูู ุงููุณุชูู ุงูุฃูุซูุ  ูุฃููุง ูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนุงุฏุฉู ูุง ุชููู ููุฌูุฏุฉ ูู ููุชุจุฉ libc (ูุนุงุฏุฉู ูุง ุชุฑุชุจุท ููุชุจุฉ libc ุฏููุงูููููุง ุ ูุณูู ูุชู ุงุณุชุฏุนุงุก memcpy ุจุดูู ุบูุฑ ูุจุงุดุฑ ุ ุนุจุฑ PLT) ุ </li><li style=";text-align:right;direction:rtl">  ูุง ูุชูุงุดู ูุน ูุณูุทุฉ ุงูุญุฌู ุบูุฑ ูุนุฑููุฉ ูู ููุช ุงูุชุฑุฌูุฉ ุ </li><li style=";text-align:right;direction:rtl">  ูุจุฐู ุงููุซูุฑ ูู ุงูุฌูุฏ ููุนุงูุฌุฉ "ุฐููู" ุฌุฒุก ูู ุงูุฐุงูุฑุฉ ุจุดูู ุตุญูุญ ูุงูุชู ูุง ุชุชุนุฏู ุญุฌู ูููุฉ ุงูุฌูุงุฒ ุฃู ุงูุชุณุฌูู. </li></ol><br>  ุงูููุทุฉ ุงูุฃุฎูุฑุฉ ูู ุงูุฃูุซุฑ ุฃูููุฉ.  ูููุชุฑุถ ุฃููุง ุทูุจูุง ูู ูุธููุฉ memcpy ูุณุฎ 5 ุจุงูุช ุจุงูุถุจุท.  ุณูููู ูู ุงูุฌูุฏ ุฌุฏูุง ูุณุฎ 8 ุจุงูุช ูู ุขู ูุงุญุฏ ุ ุจุงุณุชุฎุฏุงู ุฅุฑุดุงุฏุงุช movq ููุฐุง ุงูุบุฑุถ. <br><br> <code>Hello world <font color="#0fc000">Hello</font> <font color="#ff0000">wo</font> ... <br> ^^^^^ <font color="#ff0000">^^^</font> - src <br> ^^^^^ <font color="#ff0000">^^^</font> - dst</code> <br> <br>  ูููู ุจุนุฏ ุฐูู ุณูููู ุจูุณุฎ ุซูุงุซ ูุญุฏุงุช ุจุงูุช ุฅุถุงููุฉ - ุฃู ุ ุณููุชุจ ุฅูู ุงูุฎุงุฑุฌ ุงููุฎุฒู ุงููุคูุช ุงูุฐู ุชู ูููู.  ูุง ุชููู ูุธููุฉ <code>memcpy</code> ุงูุญู ูู ุงูููุงู ุจุฐูู - ูู ุงููุงูุน ุ ูุฃููุง ุณูุณุชุจุฏู ุจุนุถ ุงูุจูุงูุงุช ูู ุจุฑูุงูุฌูุง ุ ุณูููู ููุงู "ูุฑูุฑ" ูู ุงูุฐุงูุฑุฉ.  ูุฅุฐุง ูุชุจูุง ุนูู ุนููุงู ุบูุฑ ูุญุงุฐู ุ ููููู ูุถุน ูุญุฏุงุช ุงูุจุงูุช ุงูุฅุถุงููุฉ ูุฐู ุนูู ุตูุญุฉ ุฐุงูุฑุฉ ุธุงูุฑูุฉ ุบูุฑ ูุฎุตุตุฉ ุฃู ุนูู ุตูุญุฉ ุจุฏูู ูุตูู ูููุชุงุจุฉ.  ุซู ูุญุตู ุนูู segfault (ูุฐุง ุฌูุฏ). <br><br>  ูููู ูู ุญุงูุชูุง ุ ูููููุง ุฏุงุฆููุง ูุชุงุจุฉ ุจุงูุชุงุช ุฅุถุงููุฉ.  ูููููุง ูุฑุงุกุฉ ูุญุฏุงุช ุงูุจุงูุช ุงูุฅุถุงููุฉ ูู ูุฎุฒู ุงูุฅุฏุฎุงู ุงููุคูุช ุทุงููุง ุชูุฌุฏ ูุญุฏุงุช ุงูุจุงูุช ุงูุฅุถุงููุฉ ููู ุจุงููุงูู.  ูู ุธู ููุณ ุงูุธุฑูู ุ ูููููุง ูุชุงุจุฉ ุจุงูุชุงุช ุฅุถุงููุฉ ุฅูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ - ูุฃูู ูู ุงูุชูุฑุงุฑ ุงูุชุงูู ุณูููู ุจุงููุชุงุจุฉ ููููุง ุนูู ุฃู ุญุงู. <br><br>  ูุฐุง ุงูุชุญุณูู ููุฌูุฏ ุจุงููุนู ูู ุชุทุจูู LZ4 ุงูุฃุตูู: <br><br><pre style=";text-align:right;direction:rtl">  copy8 ูุถูููุฉ copy8 (UInt8 * dst ุ const UInt8 * src)
 {
     memcpy (dstุ srcุ 8)ุ  /// ูู ุงููุงูุน ุ memcpy ูุง ูุณูู ููุง.
 }<font></font>
<font></font>
 wildCopy8 ูุถูููุฉ (UInt8 * dst ุ const UInt8 * src ุ UInt8 * dst_end)
 {
     ูุนู
     {
         copy8 (dstุ src)ุ
         dst + = 8 ุ
         src + = 8ุ
     } ุจูููุง (dst &lt;dst_end) ุ
 } </pre><br>  ููุงุณุชูุงุฏุฉ ูู ูุฐุง ุงูุชุญุณูู ุ ุชุญุชุงุฌ ููุท ุฅูู ุงูุชุญูู ูู ุฃููุง ุจุนูุฏูู ุนู ุญุฏูุฏ ุงููุฎุฒู ุงููุคูุช.  ูุฌุจ ุฃู ูููู ูุฐุง ูุฌุงููุง ุ ูุฃููุง ูุชุญูู ุจุงููุนู ูู ุชุฌุงูุฒ ุญุฏูุฏ ุงููุฎุฒู ุงููุคูุช.  ููููู ูุนุงูุฌุฉ ุงูุจุงูุชุงุช ุงูููููุฉ ุงูุฃุฎูุฑุฉ - "ุฐูู" ุงูุจูุงูุงุช - ุจุนุฏ ุงูุญููุฉ ุงูุฑุฆูุณูุฉ. <br><br>  ููุน ุฐูู ุ ูุง ุชุฒุงู ููุงู ุจุนุถ ุงูุชูุงุตูู ุงูุฏูููุฉ.  ููุงู ูุณุฎุชุงู ูู ุงูุฏูุฑุฉ - ุงูุญุฑูู ูุงููุจุงุฑุงุฉ.  ูููู ุนูุฏ ุงุณุชุฎุฏุงู ุฏุงูุฉ LZ4_decompress_fast (ุจุฏูุงู ูู LZ4_decompress_safe) ุ ูุชู ุฅุฌุฑุงุก ุงูุชุญูู ูุฑุฉ ูุงุญุฏุฉ - ุนูุฏูุง ูุญุชุงุฌ ุฅูู ูุณุฎ ุงูุญุฑูู.  ุนูุฏ ูุณุฎ ุงูุชุทุงุจู ุ ูุง ูุชู ุฅุฌุฑุงุก ุงูุชุญูู ุ ูููู ูู <a href="">ููุงุตูุงุช ุชูุณูู LZ4 ุ</a> ููุงู ุดุฑูุท ุชุณูุญ <a href="">ุจุชุฌูุจูุง</a> : <br><br><blockquote style=";text-align:right;direction:rtl">  ุงูุจุงูุช ุงูุฎูุณ ุงูุฃุฎูุฑุฉ ูู ุฏุงุฆููุง ุญุฑููุฉ <br>  ูุฌุจ ุฃู ุชุจุฏุฃ ุงููุทุงุจูุฉ ุงูุฃุฎูุฑุฉ 12 ุจุงูุช ุนูู ุงูุฃูู ูุจู ููุงูุฉ ุงููุชูุฉ. <br>  ูุจุงูุชุงูู ุ ูุง ูููู ุถุบุท ูุชูุฉ ุจูุง ุฃูู ูู 13 ุจุงูุช. </blockquote><br>  ูููู ุฃู ุชุชุณุจุจ ุจูุงูุงุช ุงูุฅุฏุฎุงู ุงููุญุฏุฏุฉ ุจุดูู ุฎุงุต ูู ูุญุฑู ุฐุงูุฑุฉ.  ุฅุฐุง ููุช ุชุณุชุฎุฏู ูุธููุฉ LZ4_decompress_fast ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุญูุงูุฉ ุถุฏ ุงูุจูุงูุงุช ุงูุณูุฆุฉ.  ูุฌุจ ุฃู ุชููู ุงูุจูุงูุงุช ุงููุถุบูุทุฉ ุนุจุงุฑุฉ ุนู ุดูู ุนูู ุงูุฃูู.  ูุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุญูุงูุฉ ุถุฏ ุฃุญุฏ ุงูููุงุฌููู ุ ูุงุณุชุฎุฏู ุงูุฏุงูุฉ LZ4_decompress_safe.  ุฎูุงุฑุงุช ุฃุฎุฑู: ุฎุฐ ูุธููุฉ ุชุฌุฒุฆุฉ ุงูุชุดููุฑ ููุฌููุน ุชุญูู ุ ูููู ูู ุงููุคูุฏ ุฃูู ุณููุชู ูู ุงูุฃุฏุงุก ุ  ุฅูุง ุชุฎุตูุต ุงููุฒูุฏ ูู ุงูุฐุงูุฑุฉ ุงููุฎุงุฒู ุงููุคูุชุฉุ  ุฅูุง ุชุฎุตูุต ุฐุงูุฑุฉ ุงููุฎุงุฒู ุงููุคูุชุฉ ูุน ุงุณุชุฏุนุงุก ูููุตู ุฅูู mmap ูุฅูุดุงุก ุตูุญุฉ ุญูุงูุฉ. <br><br>  ุนูุฏูุง ุฃุฑู ุฑูุฒูุง ููุณุฎ ุจูุงูุงุช 8 ุจุงูุช ุ ุฃุทูุจ ุนูู ุงูููุฑ - ููุงุฐุง ุจุงูุถุจุท 8 ุจุงูุชุ  ููููู ูุณุฎ 16 ุจุงูุช ุจุงุณุชุฎุฏุงู ุณุฌูุงุช SSE: <br><br><pre style=";text-align:right;direction:rtl">  ูุณุฎุฉ ูุถููุฉ ูู ุงููุณุฎุฉ 16 (UInt8 * dst ุ const UInt8 * src)
 {
 # ุฅุฐุง __SSE2__
     _mm_storeu_si128 (reinterpret_cast &lt;__ m128i *&gt; (dst) ุ
         _mm_loadu_si128 (reinterpret_cast &lt;const __m128i *&gt; (src))) ุ
 #else
     memcpy (dstุ srcุ 16)ุ
 #endif
 }<font></font>
<font></font>
 wildCopy16 ูุถูู (UInt8 * dst ุ const UInt8 * src ุ UInt8 * dst_end)
 {
     ูุนู
     {
         copy16 (dstุ src)ุ
         dst + = 16 ุ
         src + = 16ุ
     } ุจูููุง (dst &lt;dst_end) ุ
 } </pre><br>  ูุณุฎ 32 ุจุงูุช ูู AVX ู 64 ุจุงูุช ูู AVX-512 ูุนูู ุจุดูู ูุดุงุจู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููููู ุชูุณูุน ุงูุฏูุฑุฉ ุนุฏุฉ ูุฑุงุช.  ุฅุฐุง ููุช ูุฏ ูุธุฑุช ูู ุฃู ููุช ูุถู ูู ููููุฉ ุชูููุฐ <code>memcpy</code> ุ ููุฐุง ูู ุจุงูุถุจุท ุงูููุฌ.  (ุจุงูููุงุณุจุฉ ุ ูู ูููู ุงููุชุฑุฌู ูู ูุฐู ุงูุญุงูุฉ ุจุชูุณูุน ุงูุญููุฉ ุฃู ุชูุฌูููุง: ุณูุชุทูุจ ุฐูู ุฅุฏุฎุงู ุงุฎุชุจุงุฑุงุช ูุฑููุฉ.) <br><br>  ููุงุฐุง ูุง ูุชู ุฐูู ูู ุชุทุจูู LZ4 ุงูุฃุตููุ  ุฃููุงู ุ ููุณ ูู ุงููุงุถุญ ูุง ุฅุฐุง ูุงู ูุฐุง ุฃูุถู ุฃู ุฃุณูุฃ.  ุชุนุชูุฏ ุงููุชูุฌุฉ ุนูู ุฃุญุฌุงู ุงูุฃุฌุฒุงุก ุงูุชู ูุฌุจ ูุณุฎูุง.  ูุฌุฃุฉ ูู ุฌููุนุง ูุตูุฑุฉ ูุงูุนูู ุงูุฅุถุงูู ุณูููู ุนุฏูู ุงููุงุฆุฏุฉุ  ูุซุงููุง ุ ุฅูู ูุฏูุฑ ุชูู ุงูุดุฑูุท ูู ุชูุณูู LZ4 ูุงูุชู ุชุณูุญ ูู ุจุชุฌูุจ ุงูุบุฏุงุก ุบูุฑ ุงูุถุฑูุฑู ูู ุงูุญููุฉ ุงูุฏุงุฎููุฉ. <br><br>  ููุน ุฐูู ุ ุณูู ูุจูู ูุฐุง ุงูุฎูุงุฑ ูู ุงูุงุนุชุจุงุฑ ุงูุขู. <br><br><h3 style=";text-align:right;direction:rtl">  ูุณุฎุฉ ุตุนุจุฉ </h3><br>  ุนูุฏุฉ ุฅูู ุงูุณุคุงู - ูู ูู ุงููููู ุฏุงุฆููุง ูุณุฎ ุงูุจูุงูุงุช ุจูุฐู ุงูุทุฑููุฉุ  ุงูุชุฑุถ ุฃููุง ุจุญุงุฌุฉ ุฅูู ูุณุฎ ุชุทุงุจู - ุฃู ุ ูุณุฎ ุฌุฒุก ูู ุงูุฐุงูุฑุฉ ูู ุงููุฎุฒู ุงููุคูุช ุงูุฅุฎุฑุงุฌ ุงูุฐู ูุชู ุฅุฒุงุญุฉ ุจุนุถ ุฎูู ุงููุคุดุฑ ุฅูู ููุถุน ูุฐุง ุงููุคุดุฑ. <br><br>  ุชุฎูู ุญุงูุฉ ุจุณูุทุฉ - ุชุญุชุงุฌ ุฅูู ูุณุฎ 5 ุจุงูุช ูู ุงูุฅุฒุงุญุฉ 12: <br><br> <code><font color="#0fc000">Hello</font> world ........... <br> ^^^^^ - src <br> ^^^^^ - dst <br> <br> Hello world <font color="#0fc000">Hello</font> <font color="#a8a8a8">wo</font> ... <br> ^^^^^ - src <br> ^^^^^ - dst</code> <br> <br>  ูููู ููุงู ุญุงูุฉ ุฃูุซุฑ ุชุนููุฏูุง - ุนูุฏูุง ูุญุชุงุฌ ุฅูู ูุณุฎ ูุทุนุฉ ูู ุงูุฐุงูุฑุฉ ุทูููุง ุฃูุจุฑ ูู ุงูุฅุฒุงุญุฉ.  ุฃู ุฃูู ูุดูุฑ ุฌุฒุฆููุง ุฅูู ุงูุจูุงูุงุช ุงูุชู ูู ุชุชู ูุชุงุจุชูุง ุจุนุฏ ุฅูู ุงููุฎุฒู ุงููุคูุช ููุฅุฎุฑุงุฌ. <br><br>  ูุณุฎ 10 ุจุงูุช ูู ุงูุฅุฒุงุญุฉ 3: <br><br> <code><font color="#0fc000">abc</font> ............. <br> ^^^^^^^^^^ - src <br> ^^^^^^^^^^ - dst <br> <br> abc <font color="#0fc000">abcabcabca</font> ... <br> ^^^^^^^^^^ - src <br> ^^^^^^^^^^ - dst</code> <br> <br>  ูู ุนูููุฉ ุงูุถุบุท ุ ูุฏููุง ุฌููุน ุงูุจูุงูุงุช ุ ููููู ุงูุนุซูุฑ ุนูู ูุซู ูุฐู ุงููุทุงุจูุฉ.  ูุง ุชุนุฏ ูุธููุฉ <code>memcpy</code> ููุงุณุจุฉ ููุณุฎูุง: ููู ูุง ุชุฏุนู ุงูุญุงูุฉ ุนูุฏูุง ุชุชูุงุทุน ุดุธุงูุง ุงูุฐุงูุฑุฉ.  ุจุงูููุงุณุจุฉ ุ ูุธููุฉ <code>memmove</code> ููุณุช ููุงุณุจุฉ ุฃูุถูุง ุ ูุฃู ุฌุฒุก ุงูุฐุงูุฑุฉ ูู ุญูุซ ุงูุญุตูู ุนูู ุงูุจูุงูุงุช ูู ูุชู ุชููุฆุชู ุจุงููุงูู.  ุชุญุชุงุฌ ุฅูู ูุณุฎ ููุง ูู ููุง ูููู ุจุงููุณุฎ ุจูุงุณุทุฉ ุงูุจุงูุช. <br><br><pre style=";text-align:right;direction:rtl">  ุงููุฑุฌุน [0] = ุงููุทุงุจูุฉ [0] ุ
 ุงููุฑุฌุน [1] = ุงููุทุงุจูุฉ [1] ุ
 ุงููุฑุฌุน [2] = ุงููุทุงุจูุฉ [2] ุ
 ุงููุฑุฌุน [3] = ุงููุทุงุจูุฉ [3] ุ
 ... </pre><br><br>  ุฅููู ููู ุชุนูู: <br><br> <code><font color="#0fc000">a</font> bc <font color="#0fc000">a</font> ............ <br> ^ - src <br> ^ - dst <br> <br> a <font color="#0fc000">b</font> ca <font color="#0fc000">b</font> ........... <br> ^ - src <br> ^ - dst <br> <br> ab <font color="#0fc000">c</font> ab <font color="#0fc000">c</font> .......... <br> ^ - src <br> ^ - dst <br> <br> abc <font color="#0fc000">a</font> bc <font color="#0fc000">a</font> ......... <br> ^ - src <br> ^ - dst <br> <br> abca <font color="#0fc000">b</font> ca <font color="#0fc000">b</font> ........ <br> ^ - src <br> ^ - dst</code> <br> <br>  ููุฐุง ูู ุ ูุฌุจ ุนูููุง ุฅูุดุงุก ุชุณูุณู ุงูุชูุฑุงุฑ.  ูู ุชุทุจูู LZ4 ุงูุฃุตูู ุ ุชูุช ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุบูุฑ ุงููููููุฉ ููุฐุง: <br><br><pre style=";text-align:right;direction:rtl">  const decigned dec32table [] = {0 ุ 1 ุ 2 ุ 1 ุ 4 ุ 4 ุ 4 ุ 4} ุ
 const int dec64table [] = {0 ุ 0 ุ 0 ุ -1 ุ 0 ุ 1 ุ 2 ุ 3} ุ<font></font>
<font></font>
 const int dec64 = dec64table [ุฅุฒุงุญุฉ] ุ
 ุงููุฑุฌุน [0] = ุงููุทุงุจูุฉ [0] ุ
 ุงููุฑุฌุน [1] = ุงููุทุงุจูุฉ [1] ุ
 ุงููุฑุฌุน [2] = ุงููุทุงุจูุฉ [2] ุ
 ุงููุฑุฌุน [3] = ุงููุทุงุจูุฉ [3] ุ
 ุชุทุงุจู + = dec32table [ุฅุฒุงุญุฉ] ุ
 memcpy (op + 4ุ matchุ 4)ุ
 ุชุทุงุจู - = dec64 ุ </pre><br>  ููุณุฎ ุฃูู ุจุงูุช 4 ุจุงูุช ุ ููุชูู ุจุนุฏุฏ ุณุญุฑู ุ ููุณุฎ ุงูู 4 ุจุงูุช ุงูุชุงููุฉ ููู ุ ูุญูู ุงููุคุดุฑ ูุชุชุทุงุจู ูุน ุฑูู ุณุญุฑู ุขุฎุฑ.  ููุฏ ูุณู ูุคูู ุงูููุฏ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Jan Collet</a> ) ุ ูุณุจุจ ูุซูุฑ ููุณุฎุฑูุฉ ุ ุชุฑู ุชุนููู ุนูู ูุนูู ูุฐุง.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฃุณูุงุก ูุชุบูุฑ ูุฑุจูุฉ.  ูุณูู ููุงููุง dec ... table ุ ููููุง ูุถูู ุฃุญุฏููุง ููุทุฑุญ ุงูุขุฎุฑ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุงุญุฏ ุขุฎุฑ ุบูุฑ ูููุนุฉ ุ ูุงูุขุฎุฑ ูู ูุซุงูุฉ ุงูุนูููุงุช.  ููุน ุฐูู ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู: ูุคุฎุฑูุง ุ ูุงู ุงููุคูู ุจุชุญุณูู ูุฐุง ุงูููุงู ูู ุงูููุฏ. <br><br>  ูุฅููู ููู ูุนูู ูู ุงููุงูุน.  ูุณุฎ ุฃูู ุจุงูุช 4 ุจุงูุช: <br><br> <code>abc <font color="#0fc000">abca</font> ......... <br> ^^^^ - src <br> ^^^^ - dst</code> <br> <br>  ุงูุขู ููููู ูุณุฎ 4 ุจุงูุช ูู ููุช ูุงุญุฏ: <br><br> <code>abcabca <font color="#0fc000">bcab</font> ..... <br> ^^^^ - src <br> ^^^^ - dst</code> <br> <br>    ,  8  : <br><br> <code>abcabcabcab <font color="#0fc000">cabcabca</font> ..... <br> ^^^^^^^^ - src <br> ^^^^^^^^ - dst</code> <br> <br>     ,      โ   .   : <br><br><pre style=";text-align:right;direction:rtl"> inline void copyOverlap8(UInt8 * op, const UInt8 *&amp; match, const size_t offset)<font></font>
{<font></font>
    /// 4 % n.<font></font>
    /// Or if 4 % n is zero, we use n.<font></font>
    /// It gives equivalent result, but is better CPU friendly for unknown reason.<font></font>
    static constexpr int shift1[] = { 0, 1, 2, 1, 4, 4, 4, 4 };<font></font>
<font></font>
    /// 8 % n - 4 % n<font></font>
    static constexpr int shift2[] = { 0, 0, 0, 1, 0, -1, -2, -3 };<font></font>
<font></font>
    op[0] = match[0];<font></font>
    op[1] = match[1];<font></font>
    op[2] = match[2];<font></font>
    op[3] = match[3];<font></font>
<font></font>
    match += shift1[offset];<font></font>
    memcpy(op + 4, match, 4);<font></font>
    match += shift2[offset];<font></font>
} </pre><br> ,  ,   . ,     ,     โ   16 . <br><br>    ยซ ยป    ,     ( <code>offset &lt; 16</code>   ,  <code>offset &lt; 8</code> ).  ()     16-   : <br><br><pre style=";text-align:right;direction:rtl"> inline void copyOverlap16(UInt8 * op, const UInt8 *&amp; match, const size_t offset)<font></font>
{<font></font>
    /// 4 % n.<font></font>
    static constexpr int shift1[]<font></font>
        = { 0, 1, 2, 1, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4 };<font></font>
<font></font>
    /// 8 % n - 4 % n<font></font>
    static constexpr int shift2[]<font></font>
        = { 0, 0, 0, 1, 0, -1, -2, -3, -4, 4, 4, 4, 4, 4, 4, 4 };<font></font>
<font></font>
    /// 16 % n - 8 % n<font></font>
    static constexpr int shift3[]<font></font>
        = { 0, 0, 0, -1, 0, -2, 2, 1, 8, -1, -2, -3, -4, -5, -6, -7 };<font></font>
<font></font>
    op[0] = match[0];<font></font>
    op[1] = match[1];<font></font>
    op[2] = match[2];<font></font>
    op[3] = match[3];<font></font>
<font></font>
    match += shift1[offset];<font></font>
    memcpy(op + 4, match, 4);<font></font>
    match += shift2[offset];<font></font>
    memcpy(op + 8, match, 8);<font></font>
    match += shift3[offset];<font></font>
} </pre><br>       ?  ,        SIMD-,       16 ,         ( 1  15). ,   ,      . <br><br>    โ   <code>pshufb</code> (  packed shuffle bytes)    SSSE3 (  S).    16- .      .   โ ยซยป:       0  15 โ    ,       . ,      127 โ     . <br><br>  : <br><br><pre style=";text-align:right;direction:rtl"> xmm0: abc.............<font></font>
xmm1: 0120120120120120<font></font>
<font></font>
pshufb %xmm1, %xmm0<font></font>
<font></font>
xmm0: abcabcabcabcabca </pre><br>           โ      !      : <br><br><pre style=";text-align:right;direction:rtl"> inline void copyOverlap16Shuffle(UInt8 * op, const UInt8 *&amp; match, const size_t offset)<font></font>
{<font></font>
#ifdef __SSSE3__<font></font>
<font></font>
    static constexpr UInt8 __attribute__((__aligned__(16))) masks[] =<font></font>
    {<font></font>
        0, 1, 2, 1, 4, 1, 4, 2, 8, 7, 6, 5, 4, 3, 2, 1, /* offset = 0, not used as mask, but for shift amount instead */<font></font>
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, /* offset = 1 */<font></font>
        0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1,<font></font>
        0, 1, 2, 0, 1, 2, 0, 1, 2, 0, 1, 2, 0, 1, 2, 0,<font></font>
        0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3,<font></font>
        0, 1, 2, 3, 4, 0, 1, 2, 3, 4, 0, 1, 2, 3, 4, 0,<font></font>
        0, 1, 2, 3, 4, 5, 0, 1, 2, 3, 4, 5, 0, 1, 2, 3,<font></font>
        0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1,<font></font>
        0, 1, 2, 3, 4, 5, 6, 7, 0, 1, 2, 3, 4, 5, 6, 7,<font></font>
        0, 1, 2, 3, 4, 5, 6, 7, 8, 0, 1, 2, 3, 4, 5, 6,<font></font>
        0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5,<font></font>
        0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 0, 1, 2, 3, 4,<font></font>
        0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 0, 1, 2, 3,<font></font>
        0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 0, 1, 2,<font></font>
        0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 0, 1,<font></font>
        0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 0,<font></font>
    };<font></font>
<font></font>
    _mm_storeu_si128(reinterpret_cast&lt;__m128i *&gt;(op),<font></font>
        _mm_shuffle_epi8(<font></font>
            _mm_loadu_si128(reinterpret_cast&lt;const __m128i *&gt;(match)),<font></font>
            _mm_load_si128(reinterpret_cast&lt;const __m128i *&gt;(masks) + offset)));<font></font>
<font></font>
    match += masks[offset];<font></font>
<font></font>
#else<font></font>
    copyOverlap16(op, match, offset);<font></font>
#endif<font></font>
} </pre><br>  <code>_mm_shuffle_epi8</code> โ  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">intrinsic</a> ,    <code>pshufb</code> . <br><br>          ,    ?  SSSE3 โ    ,   2006 .  AVX2  ,      32 ,      16- .     packed shuffle bytes,  vector permute bytes โ  ,    .  AVX-512 VBMI    ,    64 ,        .      ARM NEON โ   vtbl (vector table lookup),     8 . <br><br>  ,    <code>pshufb</code>  64- MMX-,   8 .         . ,        ,   16  (  ). <br><br>   Highload++ Siberia         ,    8          (  ) โ       ! <br><br><h3 style=";text-align:right;direction:rtl">    if </h3><br> ,    ,   16 .         ? <br><br>  ,       .      ,           ,  ,         .    ,     . <br><br> ,    . , ,    ,      65 536 .        65 536    .           , ,  65 551 .  ,  ,       96   128  โ     .     ,           ยซยป      mmap    (     madvice).      - page faults.         ,    . <br><br><h3 style=";text-align:right;direction:rtl">   ? </h3><br> ,    ,     : <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   16   8. </li><li style=";text-align:right;direction:rtl">  shuffle-   <code>offset &lt; 16</code> . </li><li style=";text-align:right;direction:rtl">    if. </li></ol><br>              . <br><br>  ูุซุงู 1: <br> Xeon E2650v2,  .,  AppVersion. <br> reference: 1.67 GB/sec. <br> 16 bytes, shuffle: 2.94 GB/sec ( 76% ). <br><br>  ูุซุงู 2: <br> Xeon E2650v2,  .,  ShowsSumPosition. <br> reference: 2.30 GB/sec. <br> 16 bytes, shuffle: 1.91 GB/sec ( 20% ). <br><br>   ,         .     ,    .   - ,   .   ,      .     โ       16 .  :    ,     ,   . <br><br>   ,     C++      :  8-  16-  ;     shuffle-. <br><br><pre style=";text-align:right;direction:rtl"> template &lt;size_t copy_amount, bool use_shuffle&gt;<font></font>
void NO_INLINE decompressImpl(<font></font>
     const char * const source,<font></font>
     char * const dest,<font></font>
     size_t dest_size) </pre><br>        ,         shuffle  .     ,   : <br><br><pre style=";text-align:right;direction:rtl"> sudo echo 'performance' | tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor<font></font>
kill -STOP $(pidof firefox) $(pidof chromium) </pre><br>        ยซยป  (c  Xeon E5645),           ,    . ,         ,    .    ,    shuffle-,   ,      16- . <br><br>         : <br><br><pre style=";text-align:right;direction:rtl"> sudo kill -STOP $(pidof python) $(pidof perl) $(pgrep -u skynet) $(pidof cqudp-client) </pre><br>    .    thermal throttling  power capping. <br><br><h3 style=";text-align:right;direction:rtl">     </h3><br> ,      ,        .         ,         ,    .       .       , ,     .   : ClickHouse      ,       ,         .       ,             (       โ  ?).      . <br><br>      ,    ,      .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ยซ ยป</a> .   ,      ,           ,    . <br><br>      ,   .        .       -        .             โ   ClickHouse      64 . ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>   .) <br><br>  ,     ยซ ยป, ,    .      ,     ,   ,   -   .           .            ,          ,    .      . <br><br>         ,          ,       .    ยซยป     ,    .     ,        .    Thompson Sampling. <br><br> ,   ,    .  โ      :  ,  .          .     ,     .       ,           C++.     โ ,     -   ,   ;     . <br><br>     ?      ,       .    . -,      ,         . -,  ,   ,   ยซยป . <br><br> ,  ,           Thompson Sampling โ   (   ,        ).   ,         ,         - ,     ,      .           ,     . <br><br>   ,   ยซยป .   ,     ,        ยซยป,     .      โ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a> .    ,     ,       . <br><br>       ,   ,    ,    ,   ยซยป: <br><br><pre style=";text-align:right;direction:rtl"> /// For better convergence, we don't use proper estimate of stddev.<font></font>
/// We want to eventually separate between two algorithms even in case<font></font>
/// when there is no statistical significant difference between them.<font></font>
double sigma() const<font></font>
{<font></font>
    return mean() / sqrt(adjustedCount());<font></font>
}<font></font>
<font></font>
double sample(pcg64 &amp; rng) const<font></font>
{<font></font>
     ...<font></font>
    return std::normal_distribution&lt;&gt;(mean(), sigma())(rng);<font></font>
} </pre><br>    ,       โ    memory latencies. <br><br>   ,         ,       โ    LZ4    . <br><br>  ,    : <br> โ reference (baseline):  LZ4   ; <br> โ variant 0:   8 ,   shuffle; <br> โ variant 1:   8 ,  shuffle; <br> โ variant 2:   16 ,   shuffle; <br> โ variant 3:   16 ,  shuffle; <br> โ ยซยป ,            . <br><br><h3 style=";text-align:right;direction:rtl">    CPU </h3><br>       CPU,    ,  .  ,   CPU   ? <br><br>         ClickHouse   ,  256    100    ( 256  ).  ,  CPU  ,      .      CPU: <br> โ Intelยฎ Xeonยฎ CPU E5-2650 v2 @ 2.60GHz <br> โ Intelยฎ Xeonยฎ CPU E5-2660 v4 @ 2.00GHz <br> โ Intelยฎ Xeonยฎ CPU E5-2660 0 @ 2.20GHz <br> โ Intelยฎ Xeonยฎ CPU E5645 @ 2.40GHz <br> โ Intel Xeon E312xx (Sandy Bridge) <br> โ AMD Opteron(TM) Processor 6274 <br> โ AMD Opteron(tm) Processor 6380 <br> โ Intelยฎ Xeonยฎ CPU E5-2683 v4 @ 2.10GHz <br> โ Intelยฎ Xeonยฎ CPU E5530 @ 2.40GHz <br> โ Intelยฎ Xeonยฎ CPU E5440 @ 2.83GHz <br> โ Intelยฎ Xeonยฎ CPU E5-2667 v2 @ 3.30GHz <br><br>    โ ,   R&amp;D: <br> โ AMD EPYC 7351 16-Core Processor โ    AMD. <br> โ Cavium ThunderX2 โ     x86,  AArch64.    SIMD-   .    224   56  . <br><br>  13 ,        256   6  (reference, 0, 1, 2, 3, adaptive),    10 ,   .  199 680 ,    . <br><br> ,    CPU  .         :      LZ4    (   โ  ).  ,  Cavium   .       ClickHouse,   ยซยป Xeon E5-2650 v2         ,      ,   ClickHouse    x86. <br><br><pre style=";text-align:right;direction:rtl"> โโcpuโโโโโโโโโโโโโโโโโโโโฌโโrefโโฌโadaptโโฌโโmaxโโฌโbestโโฌโadapt_boostโโฌโmax_boostโโฌโadapt_over_maxโโ<font></font>
โ E5-2667 v2 @ 3.30GHz โ 2.81 โ 3.19 โ 3.15 โ 3 โ 1.14 โ 1.12 โ 1.01 โ<font></font>
โ E5-2650 v2 @ 2.60GHz โ 2.5 โ 2.84 โ 2.81 โ 3 โ 1.14 โ 1.12 โ 1.01 โ<font></font>
โ E5-2683 v4 @ 2.10GHz โ 2.26 โ 2.63 โ 2.59 โ 3 โ 1.16 โ 1.15 โ 1.02 โ<font></font>
โ E5-2660 v4 @ 2.00GHz โ 2.15 โ 2.49 โ 2.46 โ 3 โ 1.16 โ 1.14 โ 1.01 โ<font></font>
โ AMD EPYC 7351 โ 2.03 โ 2.44 โ 2.35 โ 3 โ 1.20 โ 1.16 โ 1.04 โ<font></font>
โ E5-2660 0 @ 2.20GHz โ 2.13 โ 2.39 โ 2.37 โ 3 โ 1.12 โ 1.11 โ 1.01 โ<font></font>
โ E312xx (Sandy Bridge) โ 1.97 โ 2.2 โ 2.18 โ 3 โ 1.12 โ 1.11 โ 1.01 โ<font></font>
โ E5530 @ 2.40GHz โ 1.65 โ 1.93 โ 1.94 โ 3 โ 1.17 โ 1.18 โ 0.99 โ<font></font>
โ E5645 @ 2.40GHz โ 1.65 โ 1.92 โ 1.94 โ 3 โ 1.16 โ 1.18 โ 0.99 โ<font></font>
โ AMD Opteron 6380 โ 1.47 โ 1.58 โ 1.56 โ 1 โ 1.07 โ 1.06 โ 1.01 โ<font></font>
โ AMD Opteron 6274 โ 1.15 โ 1.35 โ 1.35 โ 1 โ 1.17 โ 1.17 โ 1 โ<font></font>
โ E5440 @ 2.83GHz โ 1.35 โ 1.33 โ 1.42 โ 1 โ 0.99 โ 1.05 โ 0.94 โ<font></font>
โ Cavium ThunderX2 โ 0.84 โ 0.87 โ 0.87 โ 0 โ 1.04 โ 1.04 โ 1 โ<font></font>
โโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโดโโโโโโโโดโโโโโโโดโโโโโโโดโโโโโโโโโโโโโโดโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโ </pre><br> ref, adapt, max โ       (,            ). best โ      ,  0  3. adapt_boost โ        baseline. max_boost โ          baseline. adapt_over_max โ         . <br><br>  ,    x86      12โ20%.   ARM    4%,   ,         .  ,        ยซยป              Intel. <br><br><h3 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h3><br>       . ,   LZ4     12โ20%,            .           .      ,         . <br><br>    ,     ,    ยซยป ,    ZStandard level 1  LZ4:      IO    . <br><br>           โ ,      .          ,       . <br><br>    :         . LZ4    ,   Lizard, Density  LZSSE  ,    . ,    LZ4      LZSSE  ClickHouse. <br><br>       LZ4 :         .          :      ,   .             . ,   inc-  dec-   <a href=""></a> .  ,           12โ15%     32 ,    16,   .       32  โ     ,     <a href=""> </a> . <br><br>       ,  ,          page cache  userspace (   mmap,    O_DIRECT  userspace page cache โ     ),      - (  CityHash128  CRC32-C,    HighwayHash, FARSH  XXH3).         ,       . <br><br>   ,     master,            .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>  HighLoad++ Siberia,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar452778/">https://habr.com/ru/post/ar452778/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar452766/index.html">ุชูููุฉ ุงูุจุซ ุงูุชุฏุฑูุฌู ุ ุฃู ููููุฉ ูุดุงูุฏุฉ ููุฏูู ุจุฏูุฉ 4k ุนุจุฑ ุงูุดุจูุฉ ุ ุฏูู ุฃูุงุฑูุฒ</a></li>
<li><a href="../ar452768/index.html">ููููุฉ ุชุตููู ุงูููุชุฌ ุฅุฐุง ูุฑุฑุช ุงูุฏุฎูู ุฅูู ุงูุณูู ุงูุฃุฌูุจู</a></li>
<li><a href="../ar452772/index.html">5 ุชูููุงุช ูุชูุฏูุฉ ูุงุฎุชุจุงุฑ ุงูุฐูุงุจ</a></li>
<li><a href="../ar452774/index.html">Dell XPS 13 9380: ููุจููุชุฑ ูุญููู ููุซูู ุจู ูุตุบูุฑ ุงูุญุฌู ููุบุงูุฉ ูู ุฃุฌู ุงูุนูู ุงูุฌุงุฏ</a></li>
<li><a href="../ar452776/index.html">N.M.D. (ููุณ ูู ุฃุนูุงูู)</a></li>
<li><a href="../ar452780/index.html">Mobius 2019 Piter: ุงูุจุซ ุงููุจุงุดุฑ ุงููุจุงุดุฑ ููู ุดูุก ุขุฎุฑ</a></li>
<li><a href="../ar452788/index.html">ุงูููุงุญ ูู ุฃุฌู ุงูุฌูุฏุฉ ูู ุชุทุจููุงุช ุงูููุจ ูุงูุงูุชุฆุงุจ ูุงูุชููู ูููุณุชุฑูุณ</a></li>
<li><a href="../ar452790/index.html">OpenCV 4.0 ู 4.1 - ูุง ุงูุฌุฏูุฏุ</a></li>
<li><a href="../ar452792/index.html">ุงูุญุงูุฉ ุงูุตูุจุฉ SSD ูุฑุงุฌุนุฉ ููุณุชุฎุฏูู ุงูุดุฑูุงุช ูููุบุณุชูู DC500R</a></li>
<li><a href="../ar452794/index.html">ุญูู ุชูุทูู ุงูููุชุฌุงุช. ุงูุฌุฒุก ุงูุฃูู: ูู ุฃูู ูุจุฏุฃุ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>