<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úäüèæ üë¥üèΩ ü§ûüèΩ Magento 2: renderer sel jaringan ‚è≠Ô∏è ü§¥üèΩ üëåüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Rilis versi 2.3.0 membawa penggunaan PWA di bagian depan aplikasi Magento lebih dekat ke jangkauan lengan. Dan jika beberapa pergeseran dalam teknolog...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Magento 2: renderer sel jaringan</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434064/"><p>  Rilis versi 2.3.0 membawa penggunaan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PWA</a> di bagian depan aplikasi Magento lebih dekat ke jangkauan lengan.  Dan jika beberapa pergeseran dalam teknologi yang digunakan terlihat ke depan, maka dengan panel admin semuanya jauh lebih stabil - labirin tua yang bagus dari berbagai jenis file yang perlu diedit sehingga sesuatu yang bermanfaat muncul di UI tidak direncanakan untuk ditingkatkan.  Pada artikel ini saya menjelaskan pembuatan renderer saya sendiri untuk kolom grid di panel admin - semuanya cukup sederhana dan, pada saat yang sama, sangat berguna jika digunakan dengan benar.  Misalnya, penyaji untuk menghasilkan tautan dalam kisi tautan ke kartu klien yang memesan: </p><br><p><img src="https://habrastorage.org/webt/kp/s8/rd/kps8rdz9jsalusps24g4vpav3g4.png" alt="gambar"></p><a name="habracut"></a><br><h1 id="bazovye-komponenty-renderera">  Komponen Renderer Dasar </h1><br><p>  Penyaji asli untuk tautan di Magento terdiri dari dua file: </p><br><ul><li>  <a href="">./module-ui/view/base/web/js/grid/columns/link.js</a> - kode komponen; </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">./module-ui/view/base/web/templates/grid/cells/link.html</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">templat</a> UI komponen ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">knockout</a> ); </li></ul><br><p> Dalam proses pemrosesan templat, fungsi yang disediakan oleh kode (objek <code>$col</code> ) digunakan.  Data input untuk diproses juga merupakan garis kisi saat ini (objek <code>$row</code> ): </p><br><pre> <code class="plaintext hljs">&lt;div class="data-grid-cell-content" if="!$col.isLink($row())" text="$col.getLabel($row())"/&gt; &lt;a class="action-menu-item" if="$col.isLink($row())" text="$col.getLabel($row())" attr="href: $col.getLink($row())"/&gt;</code> </pre> <br><p>  Data untuk grid diunduh melalui penyedia data.  Permintaan tipikal adalah sesuatu seperti ini: " <em><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http: //.../admin/mui/index/render/? Namespace = sales_order_grid</a> ...</em> ".  Struktur data dapat dilihat melalui bilah alat pengembang di browser.  Untuk kisi pesanan, kira-kira seperti ini: </p><br><pre> <code class="plaintext hljs">{ "items": [ { "id_field_name": "entity_id", "entity_id": "1", "status": "pending", "store_id": "Main Website&lt;br\/&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;Main Website Store&lt;br\/&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Default Store View&lt;br\/&gt;", "store_name": "Main Website\nMain Website Store\n", "customer_id": "1", "base_grand_total": "RUB34.68", "base_total_paid": null, "grand_total": "RUB34.68", "total_paid": null, "increment_id": "000000001", "base_currency_code": "RUB", "order_currency_code": "RUB", "shipping_name": "Alex Gusev", "billing_name": "Alex Gusev", "created_at": "2018-12-22 19:35:19", "updated_at": "2018-12-22 19:35:20", "billing_address": "Street,Riga,R\u012bga,1010", "shipping_address": "Street,Riga,R\u012bga,1010", "shipping_information": "Flat Rate - Fixed", "customer_email": "alex@flancer64.com", "customer_group": "1", "subtotal": "RUB24.68", "shipping_and_handling": "RUB10.00", "customer_name": "Alex Gusev", "payment_method": "checkmo", "total_refunded": "RUB0.00", "signifyd_guarantee_status": null, "orig_data": null, "actions": { "view": { "href": "http:\/\/sample.local.flancer64.com\/admin\/sales\/order\/view\/order_id\/1\/", "label": "View" } } } ], "totalRecords": 1 }</code> </pre> <br><h1 id="sobstvennyy-renderer">  Penyaji sendiri </h1><br><p>  Jadi, untuk membuat renderer kita sendiri, kita perlu menentukan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">komponen UI yang</a> terdiri dari dua file: </p><br><ul><li>  Kode JS komponen; </li><li>  Knockout-template dari komponen; </li></ul><br><p>  Tugas saya saat ini adalah membuat renderer yang menampilkan tautan ke klien yang memesan di sel kisi pesanan.  Untuk membuat tautan ke klien, saya perlu menggunakan pengenal klien yang sesuai - <code>customer_id</code> .  Anda dapat menulis template sendiri untuk rendering, tetapi dalam hal ini, saya cukup senang dengan template yang ada ( <code>./module-ui/view/base/web/templates/grid/cells/link.html</code> ).  Cukup menulis ulang kode JS yang akan mengembalikan hasil yang diinginkan ketika memanggil fungsi <code>$col.getLink($row())</code> dan <code>$col.isLink($row())</code> . </p><br><p>  Saya membagi kode saya menjadi dua bagian.  File <a href="">base.js</a> berisi logika dasar untuk menautkan yang digunakan dalam template, dan file <a href="">customer_name.js</a> memungkinkan Anda untuk mengonfigurasi logika dasar untuk menghubungkan sesuai dengan tugas-tugas kolom tertentu. </p><br><h2 id="bazovyy-funkcional">  Fungsionalitas dasar </h2><br><p>  Sebagai dasar, saya mengambil komponen UI <code>column</code> ada: </p><br><pre> <code class="plaintext hljs">define([ "Magento_Ui/js/grid/columns/column", "mageUtils" ], function (Column, utils) { ... }</code> </pre> <br><p>  dan (re) mendefinisikan atributnya, menunjukkan bahwa <code>ui/grid/cells/link</code> template (dari modul <code>Magento_Ui</code> ) digunakan untuk rendering: </p><br><pre> <code class="plaintext hljs"> return Column.extend({ defaults: { /** * Replace idAttrName &amp; route in children. */ /* name of the identification attribute */ idAttrName: "customer_id", /* route part to the page */ route: "/customer/index/edit/id/", bodyTmpl: "ui/grid/cells/link" } });</code> </pre> <br><p>  dan kemudian (kembali) mendefinisikan metode yang digunakan dalam templat. </p><br><p>  <code>isLink</code> (tautan dapat dibentuk jika data <code>record</code> berisi atribut dengan nama yang disimpan di <code>this.idAttrName</code> ): </p><br><pre> <code class="plaintext hljs"> isLink: function (record) { const result = !!utils.nested(record, this.idAttrName); return result; }</code> </pre> <br><p>  <code>getLink</code> : </p><br><pre> <code class="plaintext hljs"> getLink: function (record) { const id = utils.nested(record, this.idAttrName); const result = ROOT_URL + this.route + id; return result; }</code> </pre> <br><h2 id="ssylka-na-kartochku-klienta">  Tautan Kartu Klien </h2><br><p>  Dalam file <code>customer_name.js</code> , fungsionalitas dasar didefinisikan ulang sedemikian rupa sehingga tautan ke kartu klien dibentuk " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http: //.../admin/customer/index/edit/id/</a> ..." berdasarkan ID pelanggan <code>customer_id</code> : </p><br><pre> <code class="plaintext hljs">define([ "Flancer32_GridLink/js/grid/column/link/base" ], function (Column) { "use strict"; return Column.extend({ defaults: { idAttrName: "customer_id", route: "/customer/index/edit/id/" } }); });</code> </pre> <br><h2 id="podklyuchenie-renderera">  Koneksi Penyaji </h2><br><p>  Penyaji kustom terhubung ke kisi-kisi di file dengan definisi komponen UI yang sesuai.  Dalam kasus kami, ini adalah <code>./module-sales/view/adminhtml/ui_component/sales_order_grid.xml</code> .  Dalam modul asli, file <code>./view/adminhtml/ui_component/sales_order_grid.xml</code> dibuat tempat kami menimpa penyaji untuk kolom terkait: </p><br><pre> <code class="plaintext hljs">&lt;listing ...&gt; &lt;columns name="sales_order_columns"&gt; &lt;column name="customer_name" component="Vendor_Module/js/grid/column/link/customer_name"&gt; &lt;settings&gt; &lt;visible&gt;true&lt;/visible&gt; &lt;/settings&gt; &lt;/column&gt; &lt;/columns&gt; &lt;/listing&gt;</code> </pre> <br><p>  Opsi <code>settings/visible</code> diperlukan sehingga kolom "customer_name" terlihat di grid (secara default tidak terlihat). </p><br><h2 id="poryadok-zagruzki">  Urutan boot </h2><br><p>  Saat merakit semua deskriptor xml dari berbagai bagian aplikasi di Magento (termasuk deskripsi komponen UI), urutan pemrosesan deskriptor terkait dengan komponen yang sama, tetapi terletak di modul yang berbeda, adalah penting.  Dalam kasus kami, ini adalah <code>./view/adminhtml/ui_component/sales_order_grid.xml</code> .  Jika platform terlebih dahulu memproses deskriptor dari modul kami, dan kemudian dari modul penjualan, maka saat menggabungkan deskriptor, konfigurasi modul penjualan akan menggantikan konfigurasi kami di tempat-tempat di mana atribut yang sama didefinisikan (misalnya, <code>settings/visible</code> parameter yang <code>settings/visible</code> akan menjadi "false" ), meskipun penyaji kami masih akan digunakan (modul penjualan tidak mendefinisikan penyaji untuk sel "Nama Pelanggan"). </p><br><p>  Urutan pemuatan <code>./etc/module.xml</code> dalam <code>./etc/module.xml</code> : </p><br><pre> <code class="plaintext hljs">&lt;config ...&gt; &lt;module name="Vendor_Module" setup_version="0.1.0"&gt; &lt;sequence&gt; &lt;module name="Magento_Sales"/&gt; &lt;/sequence&gt; &lt;/module&gt; &lt;/config&gt;</code> </pre> <br><p>  Dalam hal ini, modul kami akan dimuat setelah modul Magento_Sales, dan pengaturan kami, jika mereka bertepatan dengan pengaturan dalam modul penjualan, akan menimpa pengaturan modul penjualan. </p><br><h2 id="rezyume">  Ringkasan </h2><br><p>  Himpunan penyaji yang disediakan oleh platform Magento cukup mendasar (misalnya, tidak menemukan penyaji untuk bilangan bulat dengan pembenaran-benar), tetapi membuat penyaji Anda sendiri dapat menghidupkan kembali tampilan standar kotak Magento di panel admin. </p><br><p>  Kode untuk publikasi ini dirancang sebagai modul " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mage2_ext_grid_column_renderer</a> ". </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id434064/">https://habr.com/ru/post/id434064/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id434054/index.html">Konferensi BLACK HAT. Cara membuat ponsel mata-mata. Bagian 2</a></li>
<li><a href="../id434056/index.html">Anda perlu tahu di mana harus meletakkan nol</a></li>
<li><a href="../id434058/index.html">Presentasi teknis StarsX / BFS baru dari SpaceX dijadwalkan untuk Maret-April 2019.</a></li>
<li><a href="../id434060/index.html">Apakah layak menyimpan panjang array ke variabel lokal di C #</a></li>
<li><a href="../id434062/index.html">Amazon mengirim 1700 audio pengguna Alexa ke orang secara acak</a></li>
<li><a href="../id434066/index.html">Sberbank FFD 1.05</a></li>
<li><a href="../id434068/index.html">Empat bulan setelah deteksi malware Windshift untuk Mac, masih belum terdeteksi oleh antivirus.</a></li>
<li><a href="../id434070/index.html">Intisari materi menarik untuk pengembang seluler # 280 (17-23 Desember)</a></li>
<li><a href="../id434072/index.html">FBI telah menutup 15 situs karena melakukan serangan DDoS. Akankah Natal pertama terjadi tanpa jatuhnya platform game?</a></li>
<li><a href="../id434076/index.html">Mengapa di Rusia tidak ada kerahasiaan perbankan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>