<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòô ü§∏ üè∫ Ein paar Worte zur Verteidigung des Monolithen ‚óªÔ∏è ‚õëÔ∏è üç≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir vergleichen die Merkmale von Microservice und monolithischer Architektur mit ihren Vor- und Nachteilen. Der Artikel wurde f√ºr Habr auf der Grundla...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ein paar Worte zur Verteidigung des Monolithen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/453932/">  Wir vergleichen die Merkmale von Microservice und monolithischer Architektur mit ihren Vor- und Nachteilen.  Der Artikel wurde f√ºr Habr auf der Grundlage der Materialien unseres Meta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hot Backend erstellt</a> , das am 9. Februar 2019 in Samara stattfand.  Wir betrachten die Faktoren der Wahl der Architektur in Abh√§ngigkeit von der spezifischen Aufgabe. <a name="habracut"></a><br><br>  Noch vor 5 Jahren hatte niemand von Microservices geh√∂rt.  Laut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Statistiken von</a> Google Trends nimmt ihre Beliebtheit jedoch von Jahr zu Jahr zu. <br><br><img src="https://habrastorage.org/webt/1_/of/jd/1_ofjdwx6pauxathtq1srtfdsas.png"><br><br><h2>  Monolith und Microservices: Beispiele </h2><br>  Wenn das Projekt eine monolithische Architektur verwendet, verf√ºgt der Entwickler nur √ºber eine Anwendung, deren Komponenten und Module auf einer einzigen Basis arbeiten. <br><br><img src="https://habrastorage.org/webt/8q/pt/px/8qptpxklg15wtydbx847sqk2c9o.jpeg"><br><br>  Bei der Microservice-Architektur wird in Module unterteilt, die als separate Prozesse ausgef√ºhrt werden und separate Server haben k√∂nnen.  Jeder Mikrodienst arbeitet mit einer eigenen Datenbank, und alle diese Dienste k√∂nnen sowohl synchron (http) als auch asynchron miteinander kommunizieren.  Dar√ºber hinaus ist es zur Optimierung der Architektur w√ºnschenswert, die Beziehung zwischen Diensten zu minimieren. <br><br>  Das folgende Diagramm ist vereinfacht und spiegelt zun√§chst die Gesch√§ftskomponenten wider. <br><br><img src="https://habrastorage.org/webt/q2/gi/y-/q2giy-br8pq2amiqihkrkzmn2e4.jpeg"><br><br><h2>  Microservices: Vorteile </h2><br>  Die Microservice-Architektur bietet mindestens vier Vorteile: <br><br>  <b>Unabh√§ngige Skalierung und Bereitstellung</b> <br><br>  F√ºr jeden Microservice wird eine unabh√§ngige Bereitstellung bereitgestellt. Dies ist praktisch, wenn einzelne Module aktualisiert werden.  Wenn die Belastung des Moduls zunimmt, kann der entsprechende Mikrodienst skaliert werden, ohne die anderen zu beeinflussen.  Auf diese Weise k√∂nnen Sie die Last flexibel verteilen und Ressourcen sparen. <br><br>  <b>Unabh√§ngige Entwicklung</b> <br><br>  Jeder Microservice (z. B. ein Speichermodul) kann von einem Team entwickelt werden, um die Erstellung eines Softwareprodukts zu beschleunigen. <br><br>  <b>Nachhaltigkeit</b> <br><br>  Der Ausfall eines Mikrodienstes wirkt sich nicht auf die Leistung anderer Module aus. <br><br>  <b>Heterogenit√§t</b> <br><br>  Jedes Team kann seine eigene Sprache und Technologie f√ºr die Implementierung von Microservices ausw√§hlen. Es ist jedoch w√ºnschenswert, dass es √ºber kompatible Schnittstellen verf√ºgt. <br><br>  Unter Entwicklern kann man die Meinung h√∂ren, dass monolithische Architektur veraltet ist, schwer zu warten und zu skalieren ist, schnell in einem ‚Äûgro√üen Schmutzklumpen‚Äú w√§chst und praktisch antipattern ist, dh ihre Anwesenheit im Code ist unerw√ºnscht.  Gro√üe Unternehmen wie Netflix, die in ihren Projekten auf Microservice-Architektur umgestellt haben, werden h√§ufig als Beweis f√ºr diese Meinung angef√ºhrt. <br><br>  Mal sehen, ob wirklich jeder nach dem Vorbild der gr√∂√üten Marken von einem Monolithen zu Microservices wechseln sollte. <br><br><h2>  Umstellung auf Microservices: M√∂gliche Schwierigkeiten </h2><br>  <b>Problem Eins: Zersetzung</b> <br><br>  Idealerweise sollte die Anwendung in Mikrodienste unterteilt werden, damit sie so wenig wie m√∂glich miteinander interagieren, da sonst die Anwendung schwierig zu warten ist.  Gleichzeitig ist die Zerlegung zu Beginn der Entwicklung schwierig zu implementieren, wenn sich gesch√§ftliche Probleme und der Themenbereich mit dem Aufkommen neuer Anforderungen noch √§ndern k√∂nnen.  Refactoring ist teuer. <br><br>  Wenn es notwendig wird, einen Teil der Funktionen von Dienst A auf Dienst B zu √ºbertragen, sind hier Schwierigkeiten m√∂glich: Beispielsweise werden Dienste in verschiedenen Sprachen ausgef√ºhrt, interne Aufrufe von Diensten werden zum Netzwerk, andere Bibliotheken m√ºssen verbunden werden.  Wir k√∂nnen die Richtigkeit des Refactorings nur mit Hilfe von Tests √ºberpr√ºfen. <br><br><img src="https://habrastorage.org/webt/ms/sb/zd/mssbzdbu2gw0mkt3xxsxd7cozuo.jpeg"><br><br>  <b>Problem zwei: Transaktionen</b> <br><br>  Ein weiteres Problem besteht darin, dass Microservices nicht das Konzept verteilter Transaktionen haben.  Wir k√∂nnen die architektonische Integrit√§t eines Gesch√§ftsbetriebs nur innerhalb eines Mikrodienstes garantieren.  Wenn der Vorgang mehrere Mikrodienste umfasst, k√∂nnen dort verschiedene Datenbanken verwendet werden, und eine solche Transaktion muss abgebrochen werden.  Um dieses Problem zu l√∂sen, werden im Gesch√§ftsleben verschiedene Methoden verwendet, bei denen die Barrierefreiheit wichtiger ist als die Integrit√§t.  Gleichzeitig werden Ausgleichsmechanismen bereitgestellt, falls etwas schief geht.  Wenn die Waren beispielsweise nicht auf Lager sind, m√ºssen Sie eine R√ºckerstattung auf das Konto des K√§ufers vornehmen. <br><br>  Wenn ein Monolith uns automatisch architektonische Integrit√§t verleiht, m√ºssen Sie bei Microservices einen eigenen Mechanismus entwickeln und Bibliotheken mit vorgefertigten L√∂sungen verwenden.  Wenn Sie eine Operation auf Dienste verteilen, ist es besser, Daten synchron anzufordern und nachfolgende Aktionen asynchron auszuf√ºhren.  Wenn es nicht m√∂glich ist, auf einen der Dienste zuzugreifen, wird das Team in die Warteschlange gestellt, sobald es wieder verf√ºgbar ist. <br><br>  In dieser Hinsicht ist es notwendig, den Ansatz f√ºr die Benutzeroberfl√§che zu √ºberarbeiten.  Der Benutzer sollte benachrichtigt werden, dass einige Aktionen nicht sofort, sondern innerhalb einer bestimmten Zeit ausgef√ºhrt werden.  Wenn der Antrag bearbeitet wird, erh√§lt er eine Einladung, die Ergebnisse anzuzeigen. <br><br><img src="https://habrastorage.org/webt/j3/ms/1m/j3ms1mf_jzbabdwangp62th2uru.jpeg"><br><br>  <b>Problem drei: Berichterstattung</b> <br><br>  Wenn wir eine monolithische Architektur mit einer einzigen Datenbank verwenden, k√∂nnen Sie zum Erstellen eines komplexen Berichts mehrere Datenbeschriftungen ausw√§hlen und aufrufen: Fr√ºher oder sp√§ter werden sie angezeigt.  Auf Microservices k√∂nnen diese Daten jedoch auf verschiedenen Basen gestreut werden. <br><br>  Zum Beispiel m√ºssen wir Unternehmen mit bestimmten Metriken auflisten.  Mit einer einfachen Liste von Unternehmen funktioniert alles.  Und wenn Sie Metriken hinzuf√ºgen m√ºssen, die in einer anderen Datenbank liegen?  Ja, wir k√∂nnen eine zus√§tzliche Anfrage stellen und Metriken per TIN anfordern.  Und wenn diese Liste gefiltert und sortiert werden muss?  Die Liste der Unternehmen kann sehr umfangreich sein, und dann m√ºssen wir einen zus√§tzlichen Service mit einer eigenen Datenbank einf√ºhren - Berichte. <br><br><img src="https://habrastorage.org/webt/lz/kq/sn/lzkqsn07kbbjovz9_rttgfqbfmg.jpeg"><br><br>  <b>Problem 4: Hohe Entwicklungskomplexit√§t</b> <br><br>  Die Arbeit an verteilten Diensten ist komplizierter: Alle Anforderungen werden √ºber das Netzwerk gestellt und k√∂nnen deaktiviert werden. Sie m√ºssen einen R√ºckrufmechanismus bereitstellen (wird der Anruf erneut get√§tigt? Wie oft?).  Dies sind die ‚ÄûBausteine‚Äú, die sich allm√§hlich ansammeln und zur Erh√∂hung der Komplexit√§t des Projekts beitragen. <br><br>  Services k√∂nnen von mehreren verschiedenen Teams entwickelt werden. Sie m√ºssen sie dokumentieren, die Dokumentation auf dem neuesten Stand halten und andere Teams warnen, wenn Sie die Version √§ndern.  Dies sind zus√§tzliche Arbeitskosten. <br><br>  Wenn jedes Team √ºber eine unabh√§ngige Bereitstellung verf√ºgt, m√ºssen Sie mindestens die vorherige Version beibehalten und erst deaktivieren, nachdem alle Benutzer des Dienstes auf die neue API umgestellt haben. <br>  Nat√ºrlich k√∂nnen wir alle APIs in eine Art Artefakt umwandeln, das √∂ffentlich verf√ºgbar sein wird.  Erstens k√∂nnen Dienste jedoch in verschiedenen Sprachen geschrieben werden, und zweitens wird dies nicht empfohlen.  In einem unserer Projekte haben wir dies beispielsweise auf Wunsch des Kunden aus Sicherheitsgr√ºnden abgelehnt.  Jeder Microservice verf√ºgt √ºber ein separates Repository, auf das der Kunde keinen Zugriff gew√§hrt. <br><br>  Im Entwicklungsprozess kann alles richtig funktionieren und dann - nein.  Es kommt vor, dass die Anwendung im Falle von Ausnahmen unendlich versucht, sie zu verarbeiten, und dies f√ºhrt zu einer gro√üen Belastung - das gesamte System "legt sich".  Um solche Situationen zu vermeiden, m√ºssen Sie alles konfigurieren, z. B. um die Anzahl der Versuche zu begrenzen, um diesen Anruf nicht in derselben Sekunde an die Warteschlange zur√ºckzugeben usw. <br><br><img src="https://habrastorage.org/webt/_w/jd/oj/_wjdoj3ln-k7ysfb6wuh8kz1ycg.jpeg"><br><br><img src="https://habrastorage.org/webt/ae/rr/xc/aerrxc3udwi9pgafnmkzc7xy2du.jpeg"><br><br>  <b>Das f√ºnfte Problem: die Komplexit√§t des Testens, Verfolgens und Debuggens</b> <br><br>  Um ein Problem zu testen, m√ºssen Sie alle beteiligten Microservices herunterladen.  Das Debuggen wird zu einer nicht trivialen Aufgabe, und alle Protokolle m√ºssen irgendwo an einem Ort gesammelt werden.  In diesem Fall ben√∂tigen Sie so viele Protokolle wie m√∂glich, um herauszufinden, was passiert ist.  Um das Problem zu verfolgen, m√ºssen Sie den gesamten Pfad verstehen, den die Nachricht zur√ºckgelegt hat.  Unit-Tests reichen hier nicht aus, da Fehler an der Kreuzung der Dienste wahrscheinlich sind.  Bei √Ñnderungen kann die Funktionsf√§higkeit erst nach dem Laufen auf dem Stand √ºberpr√ºft werden.  Wir k√∂nnen jeden Mikrodienst auf eine bestimmte Speichermenge (z. B. 500 Megabyte) beschr√§nken, aber es gibt Zeiten mit Spitzenlast, in denen bis zu zwei Gigabyte ben√∂tigt werden.  Es gibt Zeiten, in denen das System langsamer wird.  Infolgedessen k√∂nnen Ressourcen f√ºr etwas ausgegeben werden, das nicht zu den unmittelbaren Aufgaben des Kunden geh√∂rt: Beispielsweise gibt es nur zwei Business-Microservices, und die H√§lfte der Ressourcen wird f√ºr drei zus√§tzliche Microservices ausgegeben, die die Arbeit der anderen unterst√ºtzen. <br><br><img src="https://habrastorage.org/webt/pl/bn/36/plbn36qdp9gnyslu-b0xbecfo7c.jpeg"><br><br><h2>  Microservice oder Monolith: Auswahlkriterien </h2><br>  Wenn Sie zwischen monolithischer und Microservice-Architektur w√§hlen, m√ºssen Sie zun√§chst von der Komplexit√§t des Themenbereichs und der Notwendigkeit der Skalierung ausgehen. <br><br>  Wenn der Themenbereich einfach ist und keine globale Zunahme der Benutzerzahl zu erwarten ist, k√∂nnen ohne Zweifel Microservices verwendet werden.  In anderen F√§llen ist es besser, mit der Entwicklung eines Monolithen zu beginnen und Ressourcen zu sparen, wenn keine Skalierung erforderlich ist.  Wenn der Themenbereich komplex ist und in der Anfangsphase die endg√ºltigen Anforderungen nicht definiert sind, ist es auch besser, mit einem Monolithen zu beginnen, um die Mikrodienste nicht mehrmals zu wiederholen.  Mit der Weiterentwicklung des Projekts ist es m√∂glich, seine einzelnen Teile in Microservices zu unterscheiden. <br><br><img src="https://habrastorage.org/webt/bl/5c/9e/bl5c9elyajqq00pivozpby_yauy.jpeg"><br><br>  Ein Plus ist das Vorhandensein von Grenzen zu Beginn des Projekts, da dies dazu beitr√§gt, diese w√§hrend des Entwicklungsprozesses nicht zu durchbrechen.  Es ist auch sinnvoll, mit einer Datenbank zu beginnen, aber f√ºr jedes Modul ein Schema zu definieren (z. B. ein Zahlungsschema).  Anschlie√üend wird dies dazu beitragen, die Unterteilung von Modulen in Microservices zu vereinfachen.  In diesem Fall beobachten wir die Grenzen der Module und k√∂nnen Microservices verwenden. <br><br>  Jedes Modul muss √ºber eine eigene API verf√ºgen, damit es sp√§ter zugewiesen und zu einem Microservice gemacht werden kann. <br><br><img src="https://habrastorage.org/webt/6i/rp/b9/6irpb9ewnkmgleylittjhh5z-f8.jpeg"><br><br>  Nachdem Sie die Grenzen der Module festgelegt haben, k√∂nnen Sie bei Bedarf in Mikrodienste zerlegen.  In etwa 90% der F√§lle ist es m√∂glich, auf dem Monolithen zu bleiben, aber bei Bedarf ist es einfacher und billiger, die Architektur zu √§ndern. <br><br>  In unserer Praxis der Arbeit mit Monolithen und Mikrodiensten kamen wir zu folgenden Schlussfolgerungen: <br><ul><li>  Wechseln Sie nicht zu Microservices, nur weil diese von Netflix, Twitter, Facebook verwendet werden </li><li>  Beginnen Sie mit zwei oder drei Mikrodiensten, die miteinander interagieren, arbeiten Sie alle nicht funktionalen Anforderungen (Sicherheit, Fehlertoleranz, Skalierbarkeit usw.) detailliert aus und wechseln Sie erst dann zu anderen Diensten </li><li>  Automatisieren Sie alles M√∂gliche </li><li>  √úberwachung einrichten </li><li>  Schreiben Sie Autotests </li><li>  Verwenden Sie keine verteilten Transaktionen (dies ist jedoch kein Grund, die Garantie der Datenintegrit√§t abzulehnen). </li><li>  Wenn Sie eine Microservice-Architektur verwenden m√∂chten, m√ºssen Sie sich darauf einstellen, dass die Entwicklung etwa dreimal so viel kosten kann wie bei einem Monolithen.  Beide Technologien haben jedoch ihre eigenen Nachteile und Vorteile, und jede von ihnen hat ihre eigene Nische. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de453932/">https://habr.com/ru/post/de453932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de453914/index.html">Installationsanweisungen f√ºr den TON Test Client</a></li>
<li><a href="../de453916/index.html">So sch√ºtzen Sie sich vor mobilen Betr√ºgern</a></li>
<li><a href="../de453920/index.html">So √ºbernehmen Sie die Kontrolle √ºber Ihre Netzwerkinfrastruktur. Kapitel vier Automatisierung Vorlagen</a></li>
<li><a href="../de453926/index.html">Wie Carsharing-Service funktioniert und funktioniert</a></li>
<li><a href="../de453930/index.html">Vergleich und Auswahl von Datenmigrationssystemen</a></li>
<li><a href="../de453934/index.html">11 Fragen, die vor Arbeitsbeginn zu besprechen sind</a></li>
<li><a href="../de453938/index.html">NB-IoT Stolen Bike Tracking</a></li>
<li><a href="../de453942/index.html">√úber Ethik mit dem PMI-Codex-Beispiel</a></li>
<li><a href="../de453944/index.html">Maskierte Bugs in eingebettet</a></li>
<li><a href="../de453950/index.html">Du sollst hier sein! 22 Jahre nach Ver√∂ffentlichung des legend√§ren Spiels Duke Nukem 3D</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>