<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèæ üòº üë©üèø‚Äçüè≠ El libro "Mastering Kubernetes. Orquestaci√≥n de arquitecturas de contenedores " üè¶ ü¶í üë®üèª‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola habrozhiteli! Recientemente publicamos un libro sobre Kubernetes versi√≥n 1.10. La publicaci√≥n revis√≥ el pasaje "Soluciones de red para Kubernetes...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El libro "Mastering Kubernetes. Orquestaci√≥n de arquitecturas de contenedores "</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/441910/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/xd/js/pf/xdjspfcifagty4lu_leiajlxp1i.jpeg" align="left" alt="imagen"></a>  Hola habrozhiteli!  Recientemente publicamos un libro sobre Kubernetes versi√≥n 1.10.  La publicaci√≥n revis√≥ el pasaje "Soluciones de red para Kubernetes" <br><br>  La creaci√≥n de redes es un tema extenso.  Hay muchas formas de configurar una red con dispositivos, hogares y contenedores.  Kubernetes no te limita a esto.  Todo lo que esta plataforma prescribe es un modelo de red de alto nivel con un espacio de direcciones plano para hogares.  Dentro de este espacio, puede implementar muchas buenas soluciones con diferentes capacidades y para diferentes entornos.  En esta secci√≥n, veremos algunos de ellos e intentaremos comprender c√≥mo encajan en el modelo de red de Kubernetes. <br><a name="habracut"></a><br><h3>  Crear puentes en grupos de hardware </h3><br>  El entorno m√°s simple es un cl√∫ster desnudo, que es una red f√≠sica normal de nivel L2.  Para conectar contenedores a dicha red, puede usar el puente Linux est√°ndar.  Este es un procedimiento bastante laborioso que requiere experiencia con comandos de red Linux de bajo nivel, como brctl, ip addr, ip route, ip link, nsenter, etc. Puede comenzar a implementar dicha soluci√≥n leyendo la siguiente gu√≠a: blog.oddbit.com/ <br>  2014/08/11 / four-ways-to-connect-a-docker / (busque la secci√≥n Con dispositivos con puente de Linux). <br><br><h3>  Contiv </h3><br>  Contiv es un complemento de red de uso general.  Est√° dise√±ado para conectar contenedores a trav√©s de CNI y puede usarse con Docker (directamente), Mesos, Docker Swarm y, naturalmente, Kubernetes.  Contiv se ocupa de las pol√≠ticas de red y duplica parcialmente un objeto similar en Kubernetes.  Las siguientes son algunas de las caracter√≠sticas de este complemento de red: <br><br><ul><li>  soporte para CNM en libnetwork y la especificaci√≥n CNI; </li><li>  Un motor de pol√≠ticas rico en funciones que proporciona seguridad e implementaci√≥n de aplicaciones predecible. </li><li>  el mejor rendimiento de contenedor de su clase; </li><li>  multipropiedad, aislamiento y subredes superpuestas; </li><li>  Integraci√≥n de IPAM y descubrimiento de servicios; </li><li>  Amplia selecci√≥n de topolog√≠as f√≠sicas: <br><br>  a) protocolos de capa 2 (VLAN); <br>  b) protocolos de capa 3 (BGP); <br>  c) redes superpuestas; <br>  d) Cisco SDN (ACI); </li><li>  Soporte IPv6; </li><li>  pol√≠tica escalable y asignaci√≥n de ruta; </li><li>  Integraci√≥n con plantillas de aplicaciones, incluidas las siguientes: <br><br>  a) Docker-componer; <br>  b) gestor de despliegue de Kubernetes; <br>  c) equilibrio de carga en servicios, integrado en el equilibrador de microservicios del tipo "este - oeste" (este - oeste); <br>  d) aislamiento del tr√°fico durante el almacenamiento, control de acceso (por ejemplo, etcd / c√≥nsul), transmisi√≥n y gesti√≥n de la red. </li></ul><br>  Contiv tiene muchas caracter√≠sticas.  Esta herramienta implementa una amplia gama de tareas y admite varias plataformas, por lo que no estoy seguro de si ser√° la mejor opci√≥n para Kubernetes. <br><br><h3>  Abra vswitch </h3><br>  Open vSwitch es una soluci√≥n madura para crear conmutadores virtuales (software), con el apoyo de muchos jugadores importantes en el mercado.  El sistema Open Virtualization Network (OVN) le permite construir varias topolog√≠as de red virtual.  Tiene un complemento especial para Kubernetes, pero es muy dif√≠cil de configurar (consulte el manual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/openvswitch/ovn-kubernetes</a> ).  El complemento Linen CNI tiene menos funciones, pero su configuraci√≥n es mucho m√°s f√°cil: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github.com/John-Lin/linen-cni</a> .  La estructura CNI de lino se muestra en la Fig.  10.6 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/da/ub/a2/dauba2alxiaawikcjradox2yrcu.png" alt="imagen"></div><br>  Open vSwitch puede integrar servidores f√≠sicos, m√°quinas virtuales y pods / contenedores en una √∫nica red l√≥gica.  Este sistema admite modos de superposici√≥n y f√≠sicos. <br><br>  Estas son algunas de sus caracter√≠sticas clave: <br><br><ul><li>  VLAN 802.1Q est√°ndar con troncales y puertos p√∫blicos </li><li>  NIC vinculante con o sin LACP para un interruptor de nivel superior </li><li>  NetFlow, sFlow¬Æ y espejo para una mejor visibilidad; </li><li>  Configuraci√≥n de QoS (calidad de servicio) m√°s pol√≠ticas; </li><li>  tunelizaci√≥n a trav√©s de Geneve, GRE, VXLAN, STT y LISP; </li><li>  romper el control en 802.1ag; </li><li>  OpenFlow 1.0 m√°s numerosos complementos; </li><li>  base de datos transaccional para almacenar la configuraci√≥n con enlaces para C y Python; </li><li>  redirecci√≥n de alto rendimiento utilizando m√≥dulos de kernel de Linux. </li></ul><br><h3>  Nuage Networks VCS </h3><br>  Virtualized Cloud Services (VCS) es un producto de Nuage, que es una plataforma escalable y basada en pol√≠ticas para construir redes definidas por software (Networking Defined Software, SDN).  Esta es una soluci√≥n de nivel empresarial, que se basa en el sistema abierto Open vSwitch (para la redirecci√≥n de datos) y un controlador SDN multifuncional basado en est√°ndares abiertos. <br><br>  La plataforma Nuage combina pods de Kubernetes y entornos de terceros (virtuales y hardware) en redes de superposici√≥n transparentes y le permite describir pol√≠ticas detalladas para diferentes aplicaciones.  Su motor de an√°lisis en tiempo real le permite controlar la visibilidad y la seguridad de las aplicaciones de Kubernetes. <br><br>  Adem√°s, todos los componentes de VCS se pueden instalar como contenedores.  No hay requisitos de hardware espec√≠ficos. <br><br><h3>  Canal </h3><br>  Canal es una mezcla de dos proyectos de c√≥digo abierto: Calico y Flannel.  De ah√≠ el nombre.  El proyecto Flannel, desarrollado por el equipo CoreOS, se ocupa de las capacidades de red de los contenedores, mientras que Calico es responsable de las pol√≠ticas de red.  Inicialmente, se desarrollaron por separado, pero los usuarios quer√≠an usarlos juntos.  El proyecto de c√≥digo abierto de Canal ahora es una plantilla de implementaci√≥n para instalar Calico y Flannel como complementos CNI separados.  Creado por los fundadores de Calico, Tigera ha apoyado ambos proyectos e incluso plane√≥ una integraci√≥n m√°s estrecha, pero desde que lanz√≥ su propia soluci√≥n para redes seguras entre aplicaciones en Kubernetes, la prioridad se ha desplazado hacia la simplificaci√≥n de la configuraci√≥n e integraci√≥n de Flannel y Calico en lugar de desarrollar una soluci√≥n unificada.  En la fig.  10.7 muestra el estado actual del sistema del Canal y c√≥mo se relaciona con las plataformas de orquestaci√≥n como Kubernetes y Mesos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ch/qr/vu/chqrvuopqwdteccwbfaxsc40qp8.png" alt="imagen"></div><br>  Tenga en cuenta que cuando se integra con Kubernetes, Canal no accede a etcd directamente, sino al servidor API de Kubernetes. <br><br><h3>  Franela </h3><br>  Flannel es una red virtual que proporciona a cada nodo una red virtual para trabajar con tiempos de ejecuci√≥n de contenedor.  En cada nodo, se inicia el agente flaneld, elevando la subred en funci√≥n del espacio de direcciones reservado almacenado en el cl√∫ster etcd.  El intercambio de paquetes entre contenedores y, en general, el nodo lo realiza uno de varios servidores.  Muy a menudo, el servidor usa UDP sobre el dispositivo TUN, que de forma predeterminada canaliza el tr√°fico a trav√©s del puerto 8285 (no olvide abrirlo en su firewall). <br><br>  En la fig.  10.8 describe en detalle los diversos componentes de la red Flannel, los dispositivos de red virtuales que crea y c√≥mo se comunican con el host y el hogar a trav√©s del puente docker0.  Aqu√≠ tambi√©n puede ver el proceso de encapsulaci√≥n de paquetes UDP y su movimiento entre nodos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/go/ns/-h/gons-hy67hf_tg_9t_yqerodtjm.png" alt="imagen"></div><br>  Se admiten otras tecnolog√≠as de red: <br><br><ul><li>  vxlan - encapsula paquetes usando VXLAN dentro del kernel; </li><li>  host-gw: crea rutas IP a subredes a trav√©s de las direcciones IP del servidor remoto.  Vale la pena se√±alar que esto requiere una conexi√≥n directa en la segunda capa de red entre los servidores que ejecutan Flannel; </li><li>  aws-vpc: crea rutas IP en la tabla de enrutamiento de Amazon VPC </li><li>  gce: crea rutas IP en la red de Google Compute Engine </li><li>  alloc: realiza solo la selecci√≥n de la subred, pero no la redirecci√≥n de paquetes; </li><li>  ali-vpc: crea rutas IP en la tabla de enrutamiento VPC de Alicloud. </li></ul><br><h3>  Proyecto Calico </h3><br>  Calico es una soluci√≥n completa para redes entre contenedores y seguridad de red.  Se puede integrar con todas las principales plataformas de orquestaci√≥n y tiempos de ejecuci√≥n: <br><br><ul><li>  Kubernetes (complemento para CNI); </li><li>  Mesos (complemento para CNI); </li><li>  Docker (complemento para libnework); </li><li>  OpenStack (complemento para Neutron). </li></ul><br>  Calico tambi√©n se puede implementar localmente o en una nube p√∫blica mientras se conservan todas las funciones.  La aplicaci√≥n de pol√≠ticas de red puede depender de la carga, lo que proporciona un control claro del tr√°fico y garantiza que los paquetes siempre lleguen a los destinos deseados.  Calico puede importar autom√°ticamente pol√≠ticas de red desde plataformas de orquestaci√≥n.  De hecho, es responsable de implementar pol√≠ticas de red en Kubernetes. <br><br><h3>  Romana </h3><br>  Romana es una soluci√≥n moderna para la creaci√≥n de redes entre contenedores.  Originalmente fue dise√±ado para su uso en la nube y opera en la tercera capa de red, bas√°ndose en m√©todos est√°ndar para administrar direcciones IP.  Romana le permite aislar redes enteras mediante la creaci√≥n de puertas de enlace y rutas para ellos utilizando servidores basados ‚Äã‚Äãen Linux.  El trabajo en la tercera capa de red no requiere encapsulaci√≥n.  La pol√≠tica de red se aplica a todos los puntos finales y servicios como un firewall distribuido.  Romana facilita las implementaciones locales e h√≠bridas entre diferentes plataformas en la nube, ya que ya no necesita configurar redes de superposici√≥n virtual. <br><br>  Recientemente aparecido en Romana, las direcciones IP virtuales permiten a los usuarios locales abrir el acceso a sus servicios en redes locales del segundo nivel, utilizando direcciones externas y especificaciones de servicio. <br><br>  Los desarrolladores de Romana afirman que su enfoque mejora significativamente el rendimiento.  En la fig.  La Figura 10.9 muestra c√≥mo, junto con evitar la encapsulaci√≥n de VXLAN, puede eliminar una gran cantidad de sobrecarga. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kj/oz/fu/kjozfu8izlqy6thamshes1d5evi.png" alt="imagen"></div><br><h3>  Tejido de red </h3><br>  Las caracter√≠sticas principales del proyecto Weave Net son la facilidad de uso y la falta de configuraci√≥n.  Utiliza la encapsulaci√≥n VXLAN e instala micro-DNS en cada nodo.  Como desarrollador, se enfrentar√° a un alto nivel de abstracci√≥n.  Despu√©s de nombrar sus contenedores, Weave Net le permitir√° conectarse a puertos est√°ndar y habilitar los servicios apropiados.  Esto ayuda en la migraci√≥n de aplicaciones existentes a plataformas de microservicio y contenedorizaci√≥n.  Weave Net proporciona un complemento CNI para trabajar con Kubernetes y Mesos.  Comenzando con Kubernetes 1.4, la integraci√≥n con Weave Net se puede lograr con un solo comando que implementa DaemonSet: <br><br><pre><code class="plaintext hljs">kubectl apply -f https://git.io/weave-kube</code> </pre> <br>  Los pods Weave Net alojados en cada nodo son responsables de conectar cualquier otra instancia de pod a la red Weave.  Weave Net admite API con pol√≠ticas de red, proporcionando una soluci√≥n completa y f√°cil de configurar. <br><br><h3>  Uso efectivo de las pol√≠ticas de red. </h3><br>  La pol√≠tica de red de Kubernetes est√° dise√±ada para controlar el tr√°fico que se dirige a pods y espacios de nombres espec√≠ficos.  Cuando se administran cientos de microservicios implementados (como suele ser el caso con Kubernetes), las redes entre los hogares se destacan.  Es importante comprender que este mecanismo solo est√° relacionado indirectamente con la seguridad.  Si un atacante puede penetrar en la red interna, lo m√°s probable es que pueda crear su propia instancia del hogar que cumpla con la pol√≠tica de red y permita la comunicaci√≥n gratuita con otros hogares.  En la secci√≥n anterior, analizamos varias soluciones de red en Kubernetes, centr√°ndonos en las interfaces de red.  Aqu√≠ nos centraremos en la pol√≠tica de red implementada sobre estas soluciones, aunque ambos componentes est√°n estrechamente interconectados. <br><br><h3>  Arquitectura de pol√≠ticas de red en Kubernetes </h3><br>  La pol√≠tica de red determina c√≥mo los subconjuntos de hogares pueden interactuar entre s√≠ y con otros puntos finales de la red.  El recurso NetworkPolicy utiliza etiquetas para seleccionar hogares y define una lista de reglas de permisos que permiten que el tr√°fico se dirija a instancias de hogares seleccionadas (adem√°s de lo que ya est√° permitido por la pol√≠tica de aislamiento en el espacio de nombres dado). <br><br>  ¬ªSe puede encontrar m√°s informaci√≥n sobre el libro en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el sitio web del editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Contenidos</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Extracto</a> <br><br>  <b>Cup√≥n de</b> 20% de descuento para <b>Khabrozhitel</b> - <b>Kubernetes</b> <br><br>  Tras el pago de la versi√≥n en papel del libro, se env√≠a una versi√≥n electr√≥nica del libro por correo electr√≥nico. <br><br>  PD: el 7% del costo del libro se destinar√° a la traducci√≥n de nuevos libros de computadora, la lista de libros entregados a la imprenta est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/441910/">https://habr.com/ru/post/441910/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../441900/index.html">Satya Nadella habl√≥ sobre la cooperaci√≥n con el Pent√°gono</a></li>
<li><a href="../441902/index.html">C√≥mo la tecnolog√≠a crea nuevas realidades</a></li>
<li><a href="../441904/index.html">Instalaci√≥n de una pantalla IPS en el Thinkpad T430S</a></li>
<li><a href="../441906/index.html">Implementemos en Openshift</a></li>
<li><a href="../441908/index.html">¬øPuede la medicina digital resistir a los hackers?</a></li>
<li><a href="../441914/index.html">La era de la econom√≠a de las impresiones ya est√° cerca. Tecnolog√≠as del futuro en casa</a></li>
<li><a href="../441916/index.html">Realidad de trabajo duro - Xichang Satellite Launch Center - XSLC</a></li>
<li><a href="../441918/index.html">Estamos en UltraHD Morty! C√≥mo ver cualquier pel√≠cula en 4K</a></li>
<li><a href="../441920/index.html">Estrategia de seguridad de la informaci√≥n: ¬øha decidido c√≥mo avanzar?</a></li>
<li><a href="../441928/index.html">Inicie la aplicaci√≥n en Openshift y compare las herramientas existentes.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>