<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìÆ üëÜ üôãüèª M√°s telegramas secretos ü§òüèæ üßëüèø‚Äçü§ù‚ÄçüßëüèΩ üßúüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos est√°n acostumbrados a pensar en los telegramas como un medio confiable y seguro para enviar mensajes de cualquier tipo. Sin embargo, bajo el cap...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>M√°s telegramas secretos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451954/"><p>  Todos est√°n acostumbrados a pensar en los telegramas como un medio confiable y seguro para enviar mensajes de cualquier tipo.  Sin embargo, bajo el cap√≥, tiene una combinaci√≥n completamente normal de cifrado sim√©trico y, lo que no es nada interesante.  Y al final, ¬øpor qu√© deber√≠a confiar expl√≠citamente sus mensajes a un tercero? <br><img src="https://habrastorage.org/webt/fj/xl/ka/fjxlkasq2yqy1vfjle83rlnc4js.png" alt="CAPA por Antonio Proh√≠as"><br>  TL; DR: inventa un canal privado oculto a trav√©s de usuarios que se bloquean entre s√≠. </p><a name="habracut"></a><br><h2 id="skrytyy-kanal">  Canal oculto </h2><br><p> Existen muchas soluciones alternativas para transferir datos entre dos usuarios, evitando el contacto expl√≠cito.  Puede utilizar intermediarios, criptograf√≠a y esteganograf√≠a, redes de retransmisi√≥n y otros complementos sobre los protocolos existentes.  Pero a veces es √∫til poder contactar utilizando solo las capacidades oficiales declaradas.  Es decir, organizar un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">canal secreto</a> . </p><br><p>  Un ejemplo simple y comprensible de un canal oculto para un lector de habla rusa es una flor en la ventana de aparici√≥n de diecisiete momentos de la primavera.  Por s√≠ solo, puede pararse o no en la ventana; tal simbiosis es completamente normal y solo habla del amor del due√±o del apartamento por las flores.  Solo una interpretaci√≥n predeterminada distingue la informaci√≥n transmitida por un explorador de la obtenida por un transe√∫nte aleatorio. </p><br><p><img src="https://habrastorage.org/webt/xq/z2/bs/xqz2bs06a68qp9m11r-fpqgy6fo.jpeg" alt="Flor en la ventana"></p><br><h2 id="cvetochno-okonnye-kanaly-telegrama">  Telegrama de canales de ventana de flor </h2><br><p>  Para organizar su canal oculto de acuerdo con este ejemplo, solo se necesitan conceptualmente dos cosas: una ventana y una flor.  La ventana describe el objeto disponible para cambiar y determinar el estado, y la flor describe los posibles valores y el m√©todo para cambiarlos. </p><br><p>  ¬øQu√© es lo que Alice puede cambiar en un telegrama, que est√° disponible para ver a cierto Bob?  S√≠, muchas cosas: avatares, nombres de usuario, hora de la √∫ltima visita y mucho m√°s.  Sin embargo, generalmente est√°n disponibles para todos de inmediato, lo que limita la privacidad de un posible di√°logo: cualquier persona con conocimiento del m√©todo de transmisi√≥n podr√° escuchar los mensajes enviados.  Por extra√±o que parezca, esta restricci√≥n se puede eludir sin el uso de la criptograf√≠a. </p><br><h3 id="v-chernom-chernom-spiske">  En la lista negra </h3><br><p>  Cada usuario tiene su propia lista negra √∫nica, y si el lector ha visitado al menos una vez, deber√≠a haber notado que la fecha de la √∫ltima visita del delincuente cambi√≥ a "visto por √∫ltima vez hace mucho tiempo" junto con un avatar vac√≠o.  De hecho, el usuario podr√≠a estar en l√≠nea hace al menos un segundo y cambiar cien sellos en su perfil, pero la API de Telegram simplemente no devuelve estos datos a la aplicaci√≥n.  Por lo tanto, protege su vida personal de personas no deseadas, haci√©ndoles comprender que est√°n bloqueados. </p><br><p>  Entonces, ¬øcu√°l es el resultado de lo com√∫n entre la flor en la ventana y estar en la lista de bloqueo?  Tanto eso como otro pueden verificarse en un momento determinado, habiendo recibido un bit de informaci√≥n dependiendo de si est√°s en la lista negra o no.  Una ventaja adicional es el hecho de que los telegramas probablemente no se almacenan en sus registros (y si lo hacen, no por mucho tiempo solo para fines de registro) el historial de bloqueo de los usuarios de los dem√°s. </p><br><h2 id="organizovyvaem-bity">  Organiza los latidos </h2><br><p>  La capacidad de transmitir y recibir bits es, por supuesto, buena, pero a√∫n debe describir un mecanismo completo para su funcionamiento.  Telegram no env√≠a notificaciones a los usuarios cuando se agregan a la lista negra, por lo que la recepci√≥n de cada bit debe ser iniciada por el destinatario (Bob) y no depender del remitente (Alice).  Tambi√©n se deduce que Alice y Bob deben cumplir las solicitudes con la misma frecuencia, de modo que cada ciclo de reloj del remitente corresponde a un ciclo de reloj del destinatario. </p><br><p>  El algoritmo de intercambio en cada medida se ve as√≠: </p><br><ul><li>  A comprueba el bit que se env√≠a y, si es necesario enviar una se√±al, seg√∫n su valor: <br><ul><li>  A -&gt; T: bloque B; </li><li>  A -&gt; T: desbloquear B. </li></ul></li><li>  B se pone un poco: <br><ul><li>  B -&gt; T: solicitud del usuario A; </li><li>  T -&gt; B: informaci√≥n disponible sobre A; </li><li>  B: comprueba si la informaci√≥n recibida tiene el estado: <br><ul><li>  B: si hay -&gt; no est√° bloqueado y recibi√≥ 0 </li><li>  B: si no -&gt; est√° bloqueado y recibido 1 </li></ul></li></ul></li></ul><br><p>  La mayor√≠a de los procesadores de usuario modernos tienen buenos generadores de frecuencia incorporados (al menos el reloj del sistema), por lo que los relojes pueden sincronizarse con ellos sin usar el canal de datos en s√≠.  Vale la pena se√±alar que las solicitudes a la API de telegramas son de red y no se apresuran a trabajar r√°pidamente, lo que no ayuda al hecho de su bloqueo en la Federaci√≥n de Rusia y la necesidad de usar proxies.  Pero la duraci√≥n del ciclo debe exceder en promedio el tiempo requerido para completar estas solicitudes, por lo que la frecuencia y la velocidad de la transferencia de datos son extremadamente peque√±as. </p><br><h3 id="kodiruem-soobscheniya">  Codificamos mensajes </h3><br><p>  Los textos en lenguaje natural tienen una redundancia bastante alta, por lo que los mensajes recibidos con errores a menudo ser√°n entendibles para los humanos.  Y dado que Telegram sigue siendo un mensajero, a pesar de los intentos de adjuntarle todo tipo de dispositivos de gr√°ficos, audio y video, la correcci√≥n de errores puede descuidarse, limitando los datos transmitidos a mensajes de texto. </p><br><p>  Debido al bajo rendimiento del canal secreto, debe usar la codificaci√≥n m√°s eficiente para los posibles mensajes.  Afortunadamente, el nombre del mensajero nos recuerda los tiempos en que tales problemas eran comunes. </p><br><p>  Por lo tanto, mientras estamos en el siglo XXI, codificaremos los textos con uno de los m√©todos m√°s efectivos disponibles para los telegrafistas hace un siglo: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el c√≥digo Bodo</a> .  M√°s precisamente, su √∫ltima variaci√≥n de ITA-2 fue creada por Murray para hacer menos llamadas a la API en caracteres comunes.  Puede quejarse de la falta del idioma ruso, pero en mi opini√≥n, la transliteraci√≥n es una forma m√°s simple que el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sacrificio de caracteres adicionales a cualquier Yu y Sch</a> . </p><br><p>  Solo queda determinar el comienzo y el final de cada sesi√≥n de transferencia de datos, de modo que el lado receptor entre la secuencia grande pueda resaltar los mensajes que se le transmiten.  Antes de que comience la transferencia, Bob est√° en la lista negra o afuera.  Entonces Alice se√±ala el comienzo de la transferencia, cambiando este estado por un latido al opuesto.  Al final del programa, ella simplemente desbloquea a Bob.  Contin√∫a recibiendo caracteres nulos hasta que se haya acumulado lo suficiente como para indicar de manera confiable el final de la transmisi√≥n. </p><br><p><img src="https://habrastorage.org/webt/ci/pw/2a/cipw2arrv1vwonj6r0iyzwgkzda.png" alt="En la l√≠nea de tiempo"></p><br><p>  La desventaja de este enfoque es la imposibilidad pr√°ctica de conectarse (m√°s precisamente, puede conectarse, pero tiene que jugar con la correcci√≥n manual de errores) a la transmisi√≥n en curso y la separaci√≥n de los caracteres cero recibidos err√≥neamente de los realmente transmitidos.  Sin embargo, esto ya es un problema de implementaci√≥n. </p><br><h2 id="vysokie-tehnologii">  Alta tecnolog√≠a </h2><br><p>  Despu√©s de varias horas de intentar usar la biblioteca oficial para interactuar con la API, escup√≠ y escrib√≠ todo lo que necesitaba en Python usando un Telethon m√°s humano.  El autor incluso presenta la API en un estilo sincr√≥nico, que por alguna raz√≥n se ha convertido en una rareza terrible.  Tuve que escribir la codificaci√≥n de mensajes usando ITA-2 sobre mi rodilla, ya que realmente no encontr√© nada listo. </p><br><p>  La sincronizaci√≥n de frecuencia ocurre en el reloj del sistema (y s√≠, ¬°el programa duerme! En intervalos), que son bastante precisos si se tiene en cuenta el tiempo necesario para completar las solicitudes de API, que es estable durante m√°s de una d√©cima de segundo.  El usuario puede establecer la velocidad de transmisi√≥n que desee, sin embargo, utilizo el principio de "no m√°s solicitudes por segundo" para evitar errores y congelar el correo no deseado con el mismo tipo de solicitud.  Telegram, en general, result√≥ ser muy exigente con el uso de su API, bloqueando el acceso a la cuenta a trav√©s de ella durante un d√≠a incluso con solo tres autorizaciones (adem√°s, exitosas) seguidas, as√≠ como bloqueos aleatorios a corto plazo por razones desconocidas. </p><br><p>  Si los usuarios intercambian telegramas a trav√©s de un canal oculto, entonces realmente no necesitan una interfaz gr√°fica.  S√≠ y no en todas partes donde est√°, por lo tanto, escribi√≥ la utilidad de consola habitual.  Le permite esperar y recibir un mensaje con la ID de usuario especificada en una ejecuci√≥n, o enviarlo leyendo los argumentos de la l√≠nea de comandos.  Nadie, por supuesto, proh√≠be el uso de varios canales a la vez, y tambi√©n recibe y transmite mensajes en paralelo, solo necesita ejecutar varias instancias en paralelo. </p><br><h3 id="primer-ispolzovaniya">  Ejemplo de uso </h3><br><p>  Para usarlo, debe obtener su api_id y api_hash del telegrama de acuerdo con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esta instrucci√≥n</a> y establecer los valores recibidos en el archivo 'covertele.py'.  Los argumentos de la l√≠nea de comando indican la acci√≥n deseada, su identificador, el identificador del destinatario, as√≠ como el mensaje que se transmitir√° si es el remitente.  Todo se parece a esto: </p><br><pre><code class="plaintext hljs"> :  : Enter your phone number: XXX | Enter your phone number: XXX Enter auth code: YYY | Enter auth code: YYY Started message transmission... | Listening for the message... ---++ ('O', '9') | ---++ ('O', '9') --+-+ ('H', '#') | --+-+ ('H', '#') +++++ (1, 1) | +++++ (1, 1) --++- ('N', ',') | --++- ('N', ',') --+-- (' ', ' ') | --+-- (' ', ' ') ++-++ (0, 0) | ++-++ (0, 0) --+-+ ('H', '#') | --+-+ ('H', '#') -++-- ('I', '8') | -++-- ('I', '8') --+-- (' ', ' ') | --+-- (' ', ' ') --+++ ('M', '.') | --+++ ('M', '.') ++--- ('A', '-') | ++--- ('A', '-') -+-+- ('R', "'") | -+-+- ('R', "'") ++++- ('K', '(') | ++++- ('K', '(') +++++ (1, 1) | +++++ (1, 1) +-++- ('F', '!') | +-++- ('F', '!') --+++ ('M', '.') | --+++ ('M', '.') --+++ ('M', '.') | --+++ ('M', '.') Done, exiting... | ----- ('', '') | ----- ('', '') | Automatically decoded: OH, HI MARK!..</code> </pre> <br><p>  El texto se decodifica autom√°ticamente, pero los fan√°ticos que buscan errores a mano, leen sobre la marcha y realizan un seguimiento del progreso pueden hacerlo utilizando la salida de los c√≥digos enviados y recibidos. </p><br><p>  Si alguien quiere, tambi√©n puede usar la API simple proporcionada: </p><br><pre> <code class="plaintext hljs">from covertele import TelegramBlockingAPI from cochannel import CovertChannel friend = input("     :") #           #  ,     -,      id = input("  :") api = TelegramBlockingAPI(id) #        friend = input("Enter your friend's id:") channel = CovertChannel(api, friend) #    channel.receive()  channel.send()     channel.send("Bork, bork!") print(channel.receive) #       ,       _raw codes = channel.receive_raw() for code in codes: check(code) channel.send_raw([19, 24, 24, 13])</code> </pre> <br><h2 id="za-predelami-telegrama">  M√°s all√° del telegrama </h2><br><p>  Est√° claro que dicho canal se puede organizar sobre cualquier mensajero en el que haya un m√©todo para determinar si otros usuarios se bloquean.  Al mismo tiempo, interfaces similares se implementan f√°cilmente y se sustituyen de manera similar en el c√≥digo.  Entonces, si hay un deseo, puede usar el acabado y no escribir codificaci√≥n, etc. desde cero.  Afortunadamente, es poco probable que una pit√≥n lenta interfiera con la transmisi√≥n en bits a tales velocidades. </p><br><p>  PD: Un agradecimiento especial a mi pasi√≥n por el amor de lanzarme en una emergencia. </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La versi√≥n en ingl√©s sobre Habr</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Versi√≥n en ingl√©s en medio</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Github</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/451954/">https://habr.com/ru/post/451954/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451938/index.html">Ir √çndices de mapa de bits: B√∫squeda salvaje</a></li>
<li><a href="../451942/index.html">C√≥mo el zumbido en √Åfrica salva miles de vidas</a></li>
<li><a href="../451944/index.html">2019: A√±o de DEX (intercambios descentralizados)</a></li>
<li><a href="../451948/index.html">La historia de los tres cartuchos.</a></li>
<li><a href="../451950/index.html">Plantas de energ√≠a virtuales. ¬øEs posible gestionar las fuentes de energ√≠a "verde"?</a></li>
<li><a href="../451956/index.html">Uso de AppDynamics con Red Hat OpenShift v3</a></li>
<li><a href="../451958/index.html">Vemos torrents en la televisi√≥n inteligente sin SMS y registro</a></li>
<li><a href="../451960/index.html">90 vulnerabilidades de ejecuci√≥n remota de c√≥digo en mayo Actualizaci√≥n martes</a></li>
<li><a href="../451962/index.html">Cree herramientas en proyectos de aprendizaje autom√°tico, una descripci√≥n general</a></li>
<li><a href="../451966/index.html">Los dispositivos modernos de E / S son m√°s r√°pidos que los procesadores. Resumen del art√≠culo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>