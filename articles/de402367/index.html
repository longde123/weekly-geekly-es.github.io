<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õπüèª üïû ‚è∫Ô∏è Wie man aufh√∂rt, f√ºr Roaming zu bezahlen, oder mit einer Nummer auf der ganzen Welt üöµüèæ ü•õ ‚úäüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Idee zu diesem Material kam mir letztes Jahr, als ich am Ende des Monats, nachdem ich einen gro√üen Kreis um unser Unermessliches geschlossen hatte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie man aufh√∂rt, f√ºr Roaming zu bezahlen, oder mit einer Nummer auf der ganzen Welt</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/402367/">  Die Idee zu diesem Material kam mir letztes Jahr, als ich am Ende des Monats, nachdem ich einen gro√üen Kreis um unser Unermessliches geschlossen hatte, Rechnungen f√ºr Roaming erhielt.  Trotz der Zusicherungen von Mobilfunkunternehmen √ºber kostenloses Roaming innerhalb des Landes kann SMS- oder Internetverkehr separat berechnet werden.  Und die im Tarif enthaltenen Protokolle gelten nur in der ‚ÄûHeimatregion‚Äú.  Nun, da dieses Jahr nicht nur Reisen in mein Heimatland geplant sind, begann ich meine Idee zu verwirklichen - meine eigene station√§re Telefonzentrale zu Hause, die mich √ºberall auf der Welt kontaktieren kann. <br>  Unterwegs l√∂ste ich das Problem der Telefonkommunikation zwischen Wohnungen und H√§usern von Verwandten, da die Zeit der internen Verhandlungen nicht nur nach Stunden, sondern nach zehn Stunden berechnet wurde. <br>  <i>Kleiner Spoiler: Infolgedessen konnte ich Asterisk auf dem NAS und dem Router installieren</i> <i><br></i> <br><img src="https://habrastorage.org/files/ab7/4f8/753/ab74f8753aea4d2980f0242ce39fb3b1.jpg"><br><a name="habracut"></a><br>  Also kam ich zu dem Schluss, dass ich meine eigene Telefonie brauche.  Man k√∂nnte jeden der SIP-Telefoniedienste w√§hlen, die in gro√üer Anzahl auf dem Markt vorhanden sind.  Aber ich hatte eine Liste von Anforderungen, die keiner der Betreiber erf√ºllte: <br><br><ul><li>  Unabh√§ngige Wahl der internen Nummern </li><li>  Zugang zu externen Kommunikationsleitungen mit der M√∂glichkeit, Festnetz- und Mobilfunknummern anzurufen </li><li>  M√∂glichkeit, einen Betreiber auszuw√§hlen, der IP-Telefonie anbietet </li><li>  Die M√∂glichkeit, die SIM-Karte des ausgew√§hlten Betreibers mit dem √ºblichen "Telefon" -Tarif zu verwenden </li><li>  Vorhandensein des Sprachmen√ºs zum Weiterleiten eines eingehenden Anrufs an den erforderlichen Teilnehmer </li><li>  Minimale oder Nullkosten f√ºr die Wartung und Aufrechterhaltung der internen Kommunikation </li></ul><br>  Viele Betreiber bieten eine virtuelle Telefonzentrale und sogar ein Sprachmen√º an.  Dieser Service ist aber bereits bezahlt.  Einige Betreiber erlauben das kostenlose Telefonieren in ihrem Netzwerk, aber es gibt ein Problem beim W√§hlen langer Nummern.  Und sicherlich erlaubt Ihnen niemand, die SIM-Karte des ausgew√§hlten Betreibers mit den minimalen Kosten f√ºr Anrufe oder vorausbezahlte Minuten zu verwenden.  Also habe ich beschlossen, selbst mein eigener Telekommunikationsbetreiber zu werden. <br><br>  <b>Erster Schritt.</b>  <b>Plattformwahl: Virtualisierung</b> <br><br>  Da ich mich bereits mit IP-Telefonie besch√§ftigte, wurde beschlossen, meine Asterisk-basierte Telefonanlage zu erh√∂hen - sie ist kostenlos, es gibt viele Foren, Handb√ºcher und ... warum nicht?  Ich bekam ein paar Handys mit SIP-Unterst√ºtzung und begann √ºber die Plattform f√ºr die Arbeit mit Asterisk nachzudenken.  Um es in die Cloud oder auf einen virtuellen Server zu stellen, w√ºrde dies bedeuten, dass Sie fr√ºher oder sp√§ter bezahlen m√ºssen, aber dann bricht die Idee, Telefonie kostenlos zu machen, zusammen.  Aus diesem Grund habe ich mich f√ºr die Virtualisierungsfunktion meines QNAP TS-451 NAS entschieden.  Ich habe bereits √ºber diesen Netzwerklaufwerkschip geschrieben, damit Sie mehr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lesen k√∂nnen</a> .  Die Systemleistung reichte nicht nur f√ºr die Arbeit von Asterisk selbst, sondern auch f√ºr die Weboberfl√§che aus. Daher entschied ich mich f√ºr die Elastix-Distribution.  Ich muss sagen, dass die letzte Distribution, die auf der offiziellen Elastix.org-Website unter Nummer 5 verf√ºgbar ist, bereits Shareware ist. Ich empfehle daher, dass Sie auf Torrents nach Torrents Version 4 suchen - sie war kostenlos und frei verbreitet, aber jetzt ist sie nicht auf der Website verf√ºgbar. <br><br>  Die Erstellung von Benutzern in Elastix wird h√§ufig beschrieben, der Rest wird im Netzwerk jedoch nicht ausf√ºhrlich behandelt.  Daher werde ich die Verbindung des Multifon SIP-Providers von Megafon und die Erstellung eines Sprachmen√ºs mit Anrufweiterleitung beschreiben. <br><br>  Erstellen Sie in Multifon eine Amtsleitung mit den Parametern Ihres Kontos.  Sie k√∂nnen diese Option mit einer beliebigen Megafon-Betreibernummer verbinden.  Die Abbuchung h√§ngt nicht vom ausgew√§hlten Tarif ab und wird f√ºr jede Minute eines ausgehenden Anrufs vorgenommen.  Der Posteingang ist kostenlos.  Es werden zwei Gespr√§chslinien gleichzeitig unterst√ºtzt.  Au√üerdem k√∂nnen Sie konfigurieren, dass eingehende Anrufe nur an das Telefon, Telefon + Multiphone, nur an Multiphone gehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/498/22b/df1/49822bdf122d4f94a926dd7ef33477b3.JPG"></div><br>  Texteinstellungen f√ºr diejenigen, die sich selbst einen Multifon-Trunk hinzuf√ºgen m√∂chten: <br><br><div class="spoiler">  <b class="spoiler_title">Trunk Multifon</b> <div class="spoiler_text">  Peer-Details: <br><br>  Benutzername = Telefonnummer <br>  Typ = Peer <br>  Geheimnis = Passwort <br>  Port = 5060 <br>  nat = ja <br>  unsicher = port, einladen <br>  host = sbc.megafon.ru <br>  fromuser = phone_number <br>  fromdomain = multifon.ru <br>  dtmfmode = Inband <br>  context = from-trunk <br><br>  Register String: <br>  Telefonnummer: Passwort@multifon.ru/ Telefonnummer <br></div></div><br>  Wir sind also mit dem SIP-Anbieter verbunden und k√∂nnen den eingehenden Anruf jetzt an eine der Nebenstellennummern weiterleiten.  Was aber, wenn der Anrufer die zu w√§hlende Nebenstellennummer ausw√§hlen soll?  Sie k√∂nnen ein Sprachmen√º mit einer Auswahl an Empf√§ngern erstellen.  Ich werde eine schrittweise Beschreibung machen. <br><br>  <b>Erstellen Sie ein Sprachmen√º in Elastix</b> <br><br>  Gehen Sie zu Systemaufzeichnungen.  Hier sind die Parameter der Sprachaufzeichnung, die durchgef√ºhrt werden m√ºssen, bereits geschrieben: PCM, 16 Bit, 8000 Hz.  Dies kann sowohl im Standard-Aufzeichnungsprogramm als auch in Programmen von Drittanbietern wie SoundForge erfolgen. <br><br><img src="https://habrastorage.org/files/e61/11f/8e0/e6111f8e025b4aa9997a71f15c8ad4fd.JPG"><br><br>  Nachdem die Sprachansage erstellt und auf den Server hochgeladen wurde, wechseln Sie zum Men√ºpunkt IVR.  Wir erstellen ein neues Sprachmen√º und w√§hlen die Begr√º√üungsdatei sowie die Reaktion auf das Dr√ºcken der Tasten aus.  In meinem Fall habe ich gew√§hlt, dass durch Dr√ºcken der Nummer ‚Äû3‚Äú die Nummer ‚Äû101‚Äú aufgerufen wird und so weiter.  Wenn die falsche Taste ausgew√§hlt ist oder der Anrufer keine einzige Taste dr√ºckt, wird der Anruf an die Nebenstelle 304 weitergeleitet. <br><br><img src="https://habrastorage.org/files/609/623/97b/60962397b5814ebdb0009de89a0d2299.JPG"><br><br>  Jetzt m√ºssen wir den eingehenden Anruf in unser Sprachmen√º bringen.  Wir gehen zum Element Eingehende Routen und erstellen eine neue Regel.  W√§hlen Sie im letzten Absatz von "Ziel festlegen" IVR und die zuvor erstellte Warteschlange aus, die ich "dozvon" genannt habe. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/58e/a1b/ece/58ea1bece48e4befaa16526285636b0e.JPG"></div><br>  Wir speichern und verwenden.  All dies funktionierte ungef√§hr einen Monat lang ohne Fehler, aber das schien mir nicht genug zu sein.  Schlie√ülich hat nicht jedes Haus einen NAS mit einer virtuellen Maschine oder einem Server, auf dem Sie den Stern erh√∂hen k√∂nnen, aber fast jedes Haus hat einen Router! <br><br>  <b>M√∂gliche Probleme und deren L√∂sung mit einem virtuellen Server</b> <br><br>  Beim Erstellen der Server- und Portweiterleitung stellte sich heraus, dass der Betrieb von zwei virtuellen Maschinen und einem physischen Server auf demselben Netzwerkport nicht sehr effektiv ist.  Die einfachste L√∂sung bestand darin, das Virtualisierungssystem zu nutzen und eine separate Netzwerkschnittstelle f√ºr eine virtuelle Maschine auszuw√§hlen.  Es stellte sich heraus, dass dies mit den integrierten QNAP-Tools sehr einfach war.  Danach blieb die virtuelle NAS + 1-Maschine selbst auf der ersten Netzwerkschnittstelle und die zweite virtuelle Maschine auf der zweiten Netzwerkschnittstelle. <br><br><img src="https://habrastorage.org/files/e13/dc4/37a/e13dc437ad504802b5b0c61ecb17718f.JPG"><br><br>  <b>Schritt 2: Erh√∂hen Sie das Sternchen auf dem Router</b> <br><br>  Es ist also passiert, dass ich den Yota-Anbieter verwende, aber nicht die urspr√ºnglichen Router.  Ich habe mich lange Zeit f√ºr einen hervorragenden Router von Zyxel - Keenetic LTE entschieden.  Vor ein paar Jahren habe ich es bereits unter den h√§rtesten Bedingungen des Outbacks getestet und war vollkommen zufrieden - dazu gibt es auf Habr√© ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">separates Material</a> . <br><br>  In der neuesten NDMS-Firmware, genauer gesagt ab Firmware 2.08.B, ist die Unterst√ºtzung f√ºr OPKG-Pakete f√ºr die Router-Familie Zyxel Keenetic enthalten.  Dies bedeutet, dass Sie die unterschiedlichste Software einsetzen k√∂nnen.  (Es gibt eine Menge <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Software,</a> die f√ºr Zyxel-Router angepasst ist.) Warum also nicht Asterisk dort platzieren?  <i>Es ist wichtig, dass der Router mindestens 128 MB RAM hat.</i>  Kaum gesagt als getan! <br>  Dies ist umso angenehmer, als die Zyxel-Spezialisten sogar ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Handbuch</a> f√ºr die Bereitstellung von Asterisk f√ºr ihre Router erstellt haben.  Um Telefonie auf einem Router bereitzustellen, reicht es im Prinzip aus, die schrittweisen Anweisungen zu befolgen.  Und ich werde Ihnen erz√§hlen, wie ich die Funktionsweise dieses Systems verbessert und auf ein System gebracht habe, das sich auf einem separaten virtuellen Server drehte. <br><br>  Das erste, was mir auffiel, war ein unklares Problem beim Starten des Routers nach einem Neustart der Software.  Es stellte sich heraus, dass mein Flash-Laufwerk, das an den USB-Anschluss des Routers angeschlossen ist, Strom bis zu 0,16 A verbraucht.  Dies stellte sich als ausreichend heraus, so dass das LTE-Modem im Zyxel Keenetic LTE-Router nicht regelm√§√üig gestartet werden konnte.  Alles wurde geheilt, indem ein Flash-Laufwerk √ºber einen externen USB-Hub mit zus√§tzlicher Stromversorgung angeschlossen wurde.  Hat den von vielen Leuten erprobten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">D-Link DUB-H7 genommen</a> .  Damit waren die Probleme beendet.  Ich glaube, dass Router mit zwei USB-Anschl√ºssen ohne solche Kr√ºcken funktionieren. <br><br>  Kommen wir nun zu den Asterisk-Einstellungen.  Hier m√ºssen Sie bereits alle Stifte bearbeiten.  Es gibt zwei M√∂glichkeiten: Gehen Sie √ºber SSH und bearbeiten Sie dort (MC ist vorhanden) oder gehen Sie um den Ball zur IP-Adresse des Routers und bearbeiten Sie Dateien mit Notepad ++.  Beide Optionen passten zu mir und ich machte mich an die Arbeit.  Meine Benutzer wurden hinzugef√ºgt und der Multi-Trunk in der Datei sip.conf registriert.  Es bleibt nur eine Sprachwarteschlange zu erstellen.  Ich habe die Begr√º√üungs-Sprachdatei in <i>\\ 192.168.1.1 \ Asterisk-blue \ var \ lib \ asterisk \ Sounds \ ru</i> abgelegt und die folgenden √Ñnderungen an der Datei extensions.conf vorgenommen. <br><br><div class="spoiler">  <b class="spoiler_title">Erstellen eines Sprachmen√ºs in Asterisk</b> <div class="spoiler_text">  [extern ausgehend] <br>  ; ------------------ Multifon - exten =&gt; _8 .........., 1, NoOp () <br>  exten =&gt; _8 .........., n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _8 .........., n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _8 .........., n, Answer () <br>  exten =&gt; _8 .........., n, Wait (2) <br>  exten =&gt; _8 .........., n, Wiedergabe (/ opt / var / lib / Sternchen / Sounds / itsp_names / multifon) <br>  exten =&gt; _8 .........., n, Dial (SIP / Multifon / 7 $ {EXTEN: 1} ,, T) <br>  exten =&gt; _8 .........., n, Hangup () <br><br>  [Multifon-eingehend]; ===== Eingehender Anruf von Multifon ===== <br>  exten =&gt; _........, 1, NoOp () <br>  exten =&gt; _........, n, Wait (4) <br>  exten =&gt; _........, n, Answer () <br>  exten =&gt; _........, n (spielen), NoOp () <br>  exten =&gt; _........, n, Wait (1) <br>  exten =&gt; _........, n, Wiedergabe (hallo) <br>  exten =&gt; _........, n, Wait (0,5) <br>  exten =&gt; _........, n, Wiedergabe (priv) <br>  exten =&gt; _........, n, Set (TIMEOUT (Ziffer) = 1) <br>  exten =&gt; _........, n, NoOp () <br>  exten =&gt; _........, n, WaitExten (7) <br><br>  exten =&gt; _1,1, NoOp () <br>  exten =&gt; _1, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _1, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _1, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _1, n (dial_ext), Dial (SIP / 101.60, mt) <br><br>  exten =&gt; _2,1, NoOp () <br>  exten =&gt; _2, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _2, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _2, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _2, n (dial_ext), Dial (SIP / 302.60, mt) <br><br>  exten =&gt; _3,1, NoOp () <br>  exten =&gt; _3, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _3, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _3, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _3, n (dial_ext), Dial (SIP / 304.60, mt) <br></div></div><br>  Also hat es funktioniert.  Ausgehende Anrufe gehen √ºber Multifon, interne Anrufe zwischen Teilnehmern sind kostenlos und eingehende Anrufe √ºber Multifon k√∂nnen an jeden der drei Teilnehmer gerichtet werden.  Aber es schien mir nicht genug.  Und es ist schade, dass nur Megaphone eine alternative SIP-Verbindung zu einer Mobilfunkleitung bietet.  Was ist, wenn Sie einen anderen Mobilfunkanbieter verwenden m√∂chten?  Es gibt eine L√∂sung f√ºr das Problem! <br><br>  <b>Schritt drei: Wir verbinden jeden Mobilfunkbetreiber mit unserem Asterisk</b> <br><br>  Der letzte Schritt bestand darin, einen beliebigen Mobilfunkbetreiber mit unserem Telefonieserver zu verbinden.  Die logischste L√∂sung w√§re, ein GSM-SIP-Gateway anzuschlie√üen, das am Ausgang eine SIP-Amtsleitung bereitstellt.  Die Kosten f√ºr solche Ger√§te pro 1 SIM-Karte beginnen jedoch bei 9.000 Rubel, weshalb beschlossen wurde, den anderen Weg einzuschlagen.  Wir finden ein Modem mit Sprachunterst√ºtzung.  In unserem Fall stellte sich heraus, dass es sich um Huawei E3131 handelte.  Das Entsperren und Aktivieren von Sprachfunktionen wurde im Netzwerk wiederholt beschrieben, sodass ich davon nicht abgelenkt werde.  Wir legen die ben√∂tigte SIM-Karte in den USB-Hub-Anschluss ein und schalten zun√§chst den Betrieb als 3G-Modem im Men√º aus. <br><br><img src="https://habrastorage.org/files/4ee/4f9/c3a/4ee4f9c3a5ee482fb880c7409cf94156.JPG"><br><br>  Dann beginnen wir mit der Konfiguration der Dateien des Asterisk.  Installieren Sie zuerst das Dongle-Paket mit dem Befehl in der <i>opkg install asterisk11-chan-dongle-</i> Konsole.  √ñffnen Sie nach der Installation die Datei dongle.conf und bearbeiten Sie sie, um Folgendes zu erhalten: <br><br><div class="spoiler">  <b class="spoiler_title">Arbeitsdatei dongle.conf</b> <div class="spoiler_text">  [Dongle] <br>  Intervall = 15 <br><br>  [Standardeinstellungen] <br>  Kontext = Dongle-eingehend <br>  rxgain = 0 <br>  txgain = 0 <br>  usecallingpres = yes <br>  callwaiting = nein <br>  dtmf = Inband <br>  mindtmfgap = 45;  minimales Intervall vom Ende der Vorschau DTMF vom Beginn des n√§chsten in ms <br>  mindtmfduration = 80;  minimale DTMF-Tondauer in ms <br>  mindtmfinterval = 200;  minimales Intervall zwischen den Enden der DTMF mit den gleichen Ziffern in ms <br><br>  [GSM1] <br>  audio = / dev / ttyUSB1 <br>  data = / dev / ttyUSB2 <br>  imei = *****************;  E3131 - Geben Sie das IMEI-Modem ein <br></div></div><br>  Speichern Sie die Datei und wechseln Sie zur Datei extensions.conf.  Das Multifon kann auskommentiert und zur Arbeit mit dem Modem hinzugef√ºgt werden. <br><br><div class="spoiler">  <b class="spoiler_title">Wir registrieren uns f√ºr den Betrieb von Anrufen √ºber das USB-Modem in der Datei extensions.conf</b> <div class="spoiler_text">  [Dongle-ausgehend];  f√ºr ausgehende Anrufe: <br>  ; ------------------ GSM1 Donle - exten =&gt; _8 .........., 1, NoOp () <br>  exten =&gt; _8 .........., n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _8 .........., n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _8 .........., n, Answer () <br>  exten =&gt; _8 .........., n, Wait (2) <br>  exten =&gt; _8 .........., n, Wiedergabe (/ opt / var / lib / Sternchen / Sounds / itsp_names / beeline-gsm) <br>  exten =&gt; _8 .........., n, Dial (DONGLE / GSM1 / 8 $ {EXTEN: 1} ,, T) <br>  exten =&gt; _8 .........., n, Hangup () <br><br>  [Dongle-eingehend];  f√ºr eingehende Anrufe: <br>  exten =&gt; s, 1, NoOp () <br>  exten =&gt; s, n, Warte (4) <br>  exten =&gt; s, n, Answer () <br>  exten =&gt; s, n (spielen), NoOp () <br>  exten =&gt; s, n, Wait (1) <br>  exten =&gt; s, n, Wiedergabe (hallo) <br>  exten =&gt; s, n, Warte (0,5) <br>  exten =&gt; s, n, Wiedergabe (priv) <br>  exten =&gt; s, n, Set (TIMEOUT (Ziffer) = 1) <br>  exten =&gt; s, n, NoOp () <br>  exten =&gt; s, n, WaitExten (7) <br><br>  exten =&gt; _1,1, NoOp () <br>  exten =&gt; _1, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _1, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _1, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _1, n (dial_ext), Dial (SIP / 101.60, mt) <br><br>  exten =&gt; _2,1, NoOp () <br>  exten =&gt; _2, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _2, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _2, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _2, n (dial_ext), Dial (SIP / 302.60, mt) <br><br>  exten =&gt; _3,1, NoOp () <br>  exten =&gt; _3, n, Set (__ SIP_CODEC_OUTBOUND = ulaw) <br>  exten =&gt; _3, n, Set (__ SIP_CODEC_INBOUND = ulaw) <br>  exten =&gt; _3, n, Set (CALLERID (num) = 8 $ {CALLERID (num): 1}) <br>  exten =&gt; _3, n (dial_ext), Dial (SIP / 304.60, mt) <br></div></div><br>  Jetzt fing alles an und funktionierte wie es sollte.  Asterisk akzeptiert eingehende Anrufe an eine Nummer und der Benutzer w√§hlt durch Auswahl einer Nummer aus, wo er angerufen werden soll.  Ein ausgehender Anruf geht √ºber jeden Mobilfunkbetreiber, wo immer Sie sind.  Das hei√üt, Sie k√∂nnen Ihre SIM-Karte in ein USB-Modem einlegen und √ºberall auf der Welt hingehen.  Dort reicht es aus, Zugriff auf das Netzwerk zu haben und auf dem Smartphone / Laptop einen SIP-Client zu haben, der eine Verbindung zu Ihrem Asterisk-Server herstellt.  Die L√∂sung wird ausgef√ºhrt und funktioniert.  Die daraus resultierenden St√∂rungen wurden behoben, indem ein USB-Hub mit externer Stromversorgung hinzugef√ºgt und das Flash-Laufwerk ausgetauscht wurde, da einige Laufwerke fehlerhaft funktionierten.  Alle Arbeiten zur Inbetriebnahme der Telefonie werden einen Abend dauern. <br><br>  Um zu verhindern, dass diese Arbeit verschwindet, k√∂nnen Sie mit einem Befehl eine Sicherung des gesamten Asterisk auf einem Flash-Laufwerk erstellen: <br><br><div class="spoiler">  <b class="spoiler_title">Erstellen Sie eine Sicherungskopie des Asterisk auf einem Flash-Laufwerk</b> <div class="spoiler_text">  tar cvzf / opt / backup-`date "+% Y-% m-% d_% H-% M" .tar.gz -C / opt / bin usw. home lib verloren + gefunden root sbin share tmp usr var <br></div></div><br>  <b>Bonus f√ºr Besitzer von Zyxel Keenetic LTE</b> <br><br>  Es ist zu beachten, dass dieser Router auch mit zwei SIP-Clients mit physischen FXS-Ports ausgestattet ist, an die Sie jedes analoge Telefon anschlie√üen k√∂nnen.  Und dieser Client stellt problemlos eine Verbindung zum Asterisk-Server her, der sich darauf dreht. <br><br>  <b>Bonus f√ºr Besitzer von Zyxel Keenetic *</b> <br><br>  Wenn Sie kein Geld f√ºr den Kauf von SIP-Telefonen ausgeben m√∂chten, unterst√ºtzt die Keenetic-Router-Reihe den Zyxel DECT-Adapter, der die SIP-Telefoniefunktion mit der M√∂glichkeit zum Anschlie√üen eines beliebigen DECT-Mobilteils hinzuf√ºgt. <br><br>  <b>Fazit</b> <br><br>  Das Problem der freien Kommunikation zwischen verschiedenen Teilnehmern mit h√§ufigen und langen Gespr√§chen ist gel√∂st.  Die Aufgabe der ‚ÄûAnwesenheit‚Äú des Teilnehmers in der Stadt und der freien Kommunikation mit dem Eigent√ºmer der Nummer, wo immer sich der Eigent√ºmer befindet, ist ebenfalls gel√∂st.  Die QNAP TS-451 NAS-L√∂sung mit Virtualisierung profitiert von der M√∂glichkeit, Asterisk √ºber eine Webschnittstelle zu konfigurieren.  Die L√∂sung mit einem Router erfordert jedoch fast keine Kosten.  Sternchen - es ist einfach!  Warum f√ºr Roaming bezahlen, wenn die Verbindung kostenlos sein kann? <br><br>  Ich m√∂chte dem Zyxel-Team separat f√ºr die Reaktionsf√§higkeit, die Unterst√ºtzung beim Experimentieren und die Verbesserung der Funktionalit√§t ihrer Ger√§te danken. <br><br>  PS Wie weiter unten richtig ausgef√ºhrt, verbieten fast alle Mobilfunkbetreiber die Verwendung einer SIM-Karte zur Erstellung eines GSM-Gatters.  Tats√§chlich wird Sie niemand blockieren, bis Sie den kommerziellen Betrieb Ihres Tores aufnehmen.  Der Autor ist nicht verantwortlich f√ºr Ihre Handlungen. <br>  Ich kenne jedoch F√§lle, in denen Unternehmen Dutzende von SIM-Karten in GSM-Gateways f√ºr g√ºnstige Anrufe zu Mobilfunknummern verwendeten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de402367/">https://habr.com/ru/post/de402367/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de402355/index.html">Quantenschach</a></li>
<li><a href="../de402357/index.html">Kann ich Adobe Premiere und Sony Vegas durch kostenlose Video-Editoren ersetzen?</a></li>
<li><a href="../de402359/index.html">Goldfische schwimmen schneller als Haie</a></li>
<li><a href="../de402361/index.html">Europ√§ische Weltraumorganisation: Enceladus-Oberfl√§che erw√§rmt sich im Inneren</a></li>
<li><a href="../de402363/index.html">US-Schullehrer entschl√ºsselt leichtes Kryptogramm aus der obersten Etage des Adobe-B√ºros</a></li>
<li><a href="../de402369/index.html">So messen Sie die Geschwindigkeit eines 3D-Druckers - sein hei√ües Ende. Und nicht nur Geschwindigkeit</a></li>
<li><a href="../de402373/index.html">Was gibt die "Genetik der Mikrobiota"</a></li>
<li><a href="../de402375/index.html">8-Kilowatt-4-Kanal-Wechselstromschalter mit Verbrauchsmessung. Teil 1</a></li>
<li><a href="../de402377/index.html">Was halten Ihre Smartphones vom USB-Laden im Auto?</a></li>
<li><a href="../de402379/index.html">Was KI-Forscher √ºber die damit verbundenen m√∂glichen Risiken denken</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>