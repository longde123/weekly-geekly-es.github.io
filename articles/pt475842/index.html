<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äç‚öïÔ∏è üè¥ üë®üèø‚Äçüè´ Substituindo URL de a√ß√£o e URI em telefones SIP ou gerenciando via websockets? üñ®Ô∏è üçó ü§≥üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Telefones SIP. Computadores com um receptor. Em teoria, muito pode ser feito com eles, mas eles s√£o usados ‚Äã‚Äãapenas para chamadas :-) 

 Recentemente,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Substituindo URL de a√ß√£o e URI em telefones SIP ou gerenciando via websockets?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475842/"> Telefones SIP.  Computadores com um receptor.  Em teoria, muito pode ser feito com eles, mas eles s√£o usados ‚Äã‚Äãapenas para chamadas :-) <br><br>  Recentemente, o AsterConf esteve na confer√™ncia, e l√° os fornecedores conversaram sobre seus telefones, n√£o destacaremos ningu√©m, eles s√£o todos bons, em algum lugar melhor, em algum lugar mais barato, na verdade, eles fazem a mesma coisa. <br><br>  Alguns fornecedores melhoram a qualidade do som, algu√©m prende um tablet com um andr√≥ide, algu√©m tenta adicionar algum tipo de aplicativo.  E tudo para instalarmos esses telefones em desktops. <br><br>  E talvez os telefones sejam bons candidatos para o papel do controle remoto no mundo da IoT: cliquei no bot√£o e obtive o resultado.  E, na minha humilde opini√£o, n√£o h√° uma maneira simples e suficiente de conectar telefones ao seu "Gerente".  Como parte deste artigo, quero mostrar como pode parecer simples em um diagrama e demonstra√ß√£o em v√≠deo. <br><br>  E voc√™ compartilha nos coment√°rios, por favor, que talvez algo semelhante j√° tenha sido implementado em algum lugar ou que complemente suas sugest√µes e pensamentos. <br><a name="habracut"></a><br>  Os telefones t√™m URL de a√ß√£o e URIs de a√ß√£o. <br><br>  <b>O URL de a√ß√£o</b> nos permite enviar eventos diferentes para qualquer URL.  No URL, podemos especificar vari√°veis ‚Äã‚Äãpredefinidas que ser√£o preenchidas com dados reais durante uma chamada. <br><br>  Assim, por exemplo, a configura√ß√£o do meu telefone √© semelhante. <br><br><img src="https://habrastorage.org/webt/yn/tn/h3/yntnh3ybt83hmdpc0-p5bh_lz-k.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Designer de URL de a√ß√£o on-line para Yealink</a> <br><br>  <b>O URI de a√ß√£o</b> nos permite receber comandos no endere√ßo IP do telefone, e o telefone pode fazer chamadas, atender chamadas sob comando, adicionar volume, reiniciar etc.  no v√≠deo abaixo, voc√™ pode ver como tudo isso acontece.  Devemos indicar o endere√ßo de onde as equipes vir√£o. <br><br><img src="https://habrastorage.org/webt/ij/ne/hg/ijnehgcwy1cwjizhrcmxfwbm4ic.png"><br><br>  Tudo √© configur√°vel, qual √© o problema, mano? <br><br>  Essas s√£o interfaces bastante funcionais, mas ... s√£o bastante dif√≠ceis de integrar.  I.e.  precisamos executar 100.500 a√ß√µes para faz√™-lo funcionar.  Ou preencha 100 campos nas configura√ß√µes do dispositivo (voc√™ mesmo v√™ na tela) ou confunda-se com as provis√µes e prescreva alguns modelos de configura√ß√£o. <br><br>  Como resultado, existem muitas a√ß√µes nas quais √© f√°cil cometer um erro e n√£o conseguir o que voc√™ deseja e, em seguida, dedica muito tempo para descobrir os motivos do comportamento inadequado do dispositivo.  E bem, se voc√™ lida com um e possui cinco a dez, cem e dois fornecedores e at√© modelos de gera√ß√µes diferentes.  Puff Puff Puff ... <br><br>  Isso √© um problema?  Algu√©m precisa gerenciar o telefone de um assinante?  Para o assinante?  Do seu desktop, laptop ou smartphone?  Suporte t√©cnico?  Interno e externo, por exemplo, um provedor virtual de central telef√¥nica?  Preciso ter acesso ao telefone de maneira diferente do que o SIP?  Integrar o telefone com aplicativos, ignorando o IP-PBX? <br><br>  N√£o sei responder inequivocamente, h√° vantagens e desvantagens.  E para perceber as vantagens, eu gostaria de poder conectar rapidamente o URL da a√ß√£o e o URI da a√ß√£o ao meu "Gerente".  Eu chamo um gerente de servidor, a partir do qual posso ver centralmente uma lista de telefones, seu status e qualquer um deles executar alguma a√ß√£o dispon√≠vel. <br><br>  Vamos ver o diagrama. <br><br><img src="https://habrastorage.org/webt/qu/o8/0t/quo80td8bgjlllgt8zm-qaflr-u.png"><br><br>  Imagine que temos um cliente websockets em nosso telefone. <br><br>  Ent√£o, precisamos especificar no telefone apenas o endere√ßo de rede do "Gerente" e nosso telefone se conectar√° a ele.  Quando conectado, o telefone enviar√° seu ID, nome, mac.  Isso nos permitir√° compar√°-lo com a nossa lista de assinantes de PBX, por exemplo. <br><br>  Em seguida, assinamos os eventos que ocorrem no telefone.  Existem muitos deles, s√£o re-registros, respostas a chamadas, pressionamentos de bot√£o etc.  Em seguida, podemos discar o n√∫mero do nosso gerente enviando um comando.  Defina o DND ou remova o DND.  Em seguida, envio uma notifica√ß√£o ou lembrete para o telefone, defina um novo logotipo. <br><br>  E a seguran√ßa?  Em geral, os telefones SIP podem funcionar para NAT, eles n√£o precisam de um endere√ßo externo.  Mas se voc√™ definir a porta do servidor da web do telefone como a rede Action URI (onde a √°rea de administra√ß√£o, ali√°s, funciona) - espere surpresas desagrad√°veis. <br><br>  Mas se o telefone se conectar ao "Manager" via websockets, essa √© sua iniciativa e seu direito, ele poder√° se desconectar e, se voc√™ se conectar ao servidor remoto devido ao NAT, parecer√° uma conex√£o do navegador. <br><br>  Chega de palavras, mais perto do ponto.  Eu escrevi um pequeno cliente de telefone (que na minha opini√£o deveria estar no telefone), que se conecta ao servidor via soquete da web.  Al√©m disso, um navegador est√° conectado a este servidor, que pode receber mensagens do telefone e enviar comandos para l√°. <br><br>  O cliente √© apenas um inv√≥lucro para o URL da a√ß√£o e o URI da a√ß√£o, que funciona com o telefone por meio de suas interfaces familiares e agrupa todos os dados em um soquete da web.  Nos soquetes da Web, temos mensagens JSON regulares com as quais qualquer desenvolvedor da Web pode trabalhar. <br><br>  Assista ao v√≠deo, tudo √© bem simples.  Todo o c√≥digo √© m√≠nimo o suficiente apenas para mostrar o conceito. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Kx1Bwl70KEs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  O que est√° acontecendo no v√≠deo? <br><br><ol><li>  iniciamos o servidor que aceita conex√µes nos websockets, </li><li>  iniciamos o cliente (que funciona por URL de a√ß√£o e URI com o telefone) </li><li>  cliente se conecta ao servidor </li><li>  iniciamos o servidor da web (com a p√°gina em que o c√≥digo para conex√£o do navegador via websockets) </li><li>  abrir a p√°gina no navegador, a p√°gina se conecta ao servidor </li><li>  estamos enviando uma solicita√ß√£o de informa√ß√µes da p√°gina </li><li>  a solicita√ß√£o vai at√© o telefone e retorna informa√ß√µes sobre as linhas telef√¥nicas </li><li>  tamb√©m podemos enviar equipes diferentes </li><li>  incluindo o comando para fazer uma chamada </li><li>  e depois o comando desligar </li><li>  todos os dados s√£o vis√≠veis no log da p√°gina, bem como no console do servidor ativo e do telefone do cliente </li><li>  ent√£o voc√™ pode ver como ele reage aos comandos na p√°gina de telefone </li></ol><br>  Assim, conectar o telefone ao gerente √© apenas um endere√ßo.  E as mensagens dos soquetes da web para uma apresenta√ß√£o diferente e vice-versa podem ser qualquer desenvolvedor.  No meu caso, uma p√°gina est√° conectada ao gerente.  Em geral, pode ser um sistema mais complexo que processa comandos e envia mensagens para o telefone. <br><br>  Ter um m√©todo de conex√£o simples pode ser conveniente e, portanto, mais f√°cil de aprender.  Por essa interface, em teoria, √© poss√≠vel enviar novas configura√ß√µes e mensagens adicionais, facilitando a integra√ß√£o do telefone em qualquer infraestrutura. <br><br>  Em geral, esses s√£o apenas meus pensamentos sobre os resultados da exibi√ß√£o de novos produtos na Asterkonf.  Ficarei feliz em ver nos coment√°rios os pr√≥s e contras.  E talvez um dos fabricantes veja o racional nisso e introduza o chip :-) <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Projeto Github</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt475842/">https://habr.com/ru/post/pt475842/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt475832/index.html">Express√µes de m√≠dia CSS t√™m mais do que largura m√°xima</a></li>
<li><a href="../pt475834/index.html">Scrum n√£o ir√° ajud√°-lo. Entendemos porque</a></li>
<li><a href="../pt475836/index.html">Entrevista com Arthur Khachuyan: como calcular um bilion√°rio nas redes sociais?</a></li>
<li><a href="../pt475838/index.html">MUDAR pessoas. Ou ... mudar pessoas. Sobre como "decolar" o projeto de transforma√ß√£o</a></li>
<li><a href="../pt475840/index.html">Cliente da API do Badoo Jira: magia no Jira em PHP</a></li>
<li><a href="../pt475848/index.html">Como a pesquisa Yandex.Market funciona e o que acontecer√° se um dos servidores travar</a></li>
<li><a href="../pt475850/index.html">Como come√ßar a construir uma carreira em TI, se voc√™ ainda n√£o tem experi√™ncia</a></li>
<li><a href="../pt475856/index.html">O Google App Script, Mikrotik, Telegram e VPNBook come√ßaram a tocar um quarteto</a></li>
<li><a href="../pt475858/index.html">Divertido cripto-energia: o calor da minera√ß√£o para humanos e o calor dos humanos para minera√ß√£o</a></li>
<li><a href="../pt475860/index.html">Apache NiFi. 28 de novembro, na sala de confer√™ncias Deworkacy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>