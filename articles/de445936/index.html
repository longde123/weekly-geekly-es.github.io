<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐊 🔯 🌩️ Elektronikentwicklung. Über Mikrocontroller an den Fingern 📅 🍭 🤳🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie an ein Technologie-Startup denken, müssen Sie überhaupt kein Ass in der Elektronik sein. Ein enger Spezialist mit Kenntnissen der Grundlagen ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Elektronikentwicklung. Über Mikrocontroller an den Fingern</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445936/"><img src="https://habrastorage.org/webt/ft/gy/ko/ftgykowsgjxoa9maxgetdwgbzyi.jpeg"><br><br>  Wenn Sie an ein Technologie-Startup denken, müssen Sie überhaupt kein Ass in der Elektronik sein. Ein enger Spezialist mit Kenntnissen der Grundlagen des Marketings hat mit größerer Wahrscheinlichkeit eine gute Idee, aber selbst wenn Sie jemanden beauftragen, diese zu entwickeln, müssen Sie die Fähigkeiten der modernen Elementbasis navigieren und den Preis der Lösung präsentieren.  Andernfalls können Sie das Unmögliche verlangen oder ein Gerät mit überteuerten Kosten auf einer veralteten Elementbasis erwerben. <br>  Unter dem Schnitt ein Versuch, Menschen, die weit von ihnen entfernt sind, kurz und einfach über die Fähigkeiten moderner Mikrocontroller zu informieren.  Für diejenigen, die die Idee eines neuen elektronischen Geräts haben, aber keine Ahnung haben, was ein Mikrocontroller ist.  Wer den ersten Schritt von unterhaltsamen Experimenten mit der Arduino-Plattform zum Entwerfen eigener Geräte machen möchte, findet darin auch einfache, aber nützliche Tipps.  Ich habe versucht, mich nicht mit den technischen Details zu befassen. Zu <s>diesem Zweck reicht es nicht aus, dass das Buch</s> das Wesentliche darlegt und einige einfache, aber nützliche Tipps zum Schaltungsdesign gibt, um Anfänger vor elementaren Fehlern zu schützen. <br><a name="habracut"></a><br><h3>  Zusammenfassung des Artikels: </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie Mikrocontroller die Welt eroberten</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ARM-Architektur - Marktführer für Mikrocontroller von heute</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wettbewerb mit jüngeren Brüdern</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Über das Verlegen von Asphalt, die Vorteile des Schlafes und seiner Sorten</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kurz über die Fertigungstechnologie und wie Mikrocontroller-Serien aussehen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Die Peripherie des einfachsten ARM-Mikrocontrollers für einen halben Dollar</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der billigste Weg, um zusätzliche Funktionen zu erhalten</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Und was wird den Übergang zum Cortex-M4 zusätzlich zu dem ein paarmal erhöhten Preis hinzufügen?</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Cortex-M7 - wenn Sie mehr wollen ...</a> <br><br><br><a name="MCU"></a><h4>  <font color="#66a3be">Codeschutz, Aktualisierbarkeit und Vielfalt haben Mikrocontrollern geholfen, die Welt zu erobern</font> </h4><br>  Jedes intelligente Gerät erfordert Kontrolle.  In den meisten Fällen tun dies heute Mikrocontroller - Chips, die einen Mikroprozessorkern, Speicher und Peripheriemodule kombinieren, die für die Kommunikation mit anderen Komponenten des Geräts und der Außenwelt verantwortlich sind. <br><br><img src="https://habrastorage.org/webt/4m/8u/r5/4m8ur5ebaj5ss5wk1u06ibyqcoe.jpeg" align="left">  Mikrocontroller sind Alleskönner.  Ein Mikrocontroller kann Dutzende spezialisierter Mikroschaltungen ersetzen, die zur Ausführung der erforderlichen Funktionen erforderlich wären, wenn der Mikroprozessor die Rolle des Rechners spielen würde. <br><br>  Einer der unbestreitbaren Vorteile des Mikrocontrollers besteht darin, dass das Programm, unter dem er ausgeführt wird, in seinem Gehäuse versteckt ist (im Abschnitt „Programmspeicher“) und natürlich sehr gut vor Hacking geschützt ist, wenn der Mikrocode-Entwickler dies durch Aktivierung der integrierten Mechanismen erledigt hat Schutz.  So erhalten Sie heute so viel Schutz wie möglich für geistiges Eigentum. <br><br><img src="https://habrastorage.org/webt/rt/gg/bu/rtggbu8vffk3iumjdp_xhzkxp94.jpeg" align="right">  Was nicht gehackt werden kann, kann kopiert werden.  Warum sollten Sie versuchen, den im Mikrocontroller des Programms eingebetteten Code mit teuren, ausgeklügelten Geräten zu lesen, wenn es einfacher und billiger ist, einen Fachmann zu finden, der ihn erneut schreiben kann?  Vielleicht ist das Ergebnis sogar noch besser und die Funktionalität ist umfangreicher als die des Prototyps.  Ja, es kostet Geld, aber der Inhalt des FLASH-Speichers heutiger Mikrocontroller ist so gut geschützt, dass Versuche, unhöfliches „Hacken“ durchzuführen, noch mehr kosten.  Darüber hinaus wird das Problem des geistigen Eigentums gelöst, und Sie erhalten zusammen mit den Quellcodes des Programms die Möglichkeit, Ihr Gerät zu entwickeln und zu verbessern. <br><br>  Der Programmspeicher in modernen universellen Mikrocontrollern ist wiederbeschreibbar, und der Umschreibvorgang kann mehr als zehntausend Mal wiederholt werden.  Es wird empfohlen, diese Tatsache zum Aktualisieren von Software zu verwenden, um darin gefundene Fehler zu beseitigen oder die Funktionen eines bereits funktionierenden Geräts zu erweitern.  Dies ist recht einfach zu implementieren. Wenn Sie dem Programm einen speziellen Codeabschnitt hinzufügen, der als „Bootloader“ bezeichnet wird, haben Sie die Möglichkeit, die Software Ihres Geräts auf verschiedene Arten zu aktualisieren: am Servicepunkt (wenn das Gerät einen speziellen Anschluss im Gehäuse versteckt hat), mit dem Sie es verbinden können Computer über USB, über ein Netzwerk oder sogar eine drahtlose Schnittstelle.  Die Hauptsache ist, das Gerät mit den dafür notwendigen Peripheriegeräten auszustatten.  Wenn Sie die Möglichkeit haben, Software zu aktualisieren, sollten Sie immer an die Sicherheit denken. Wenn dieser Prozess nicht ausreichend geschützt ist, können Angreifer Ihren Code nicht nur stehlen, sondern ihn auch ändern und für ihre eigenen Zwecke verwenden <s>, was heimtückisch ist</s> .  Übernehmen Sie beispielsweise mithilfe der von Ihnen zu Hause installierten WEB-Kamera die Kontrolle über die Dinge Ihres „Smart Home“ oder Spions. <br><br><a name="ARM_MCU"></a><h4>  <font color="#66a3be">ARM-Architektur - Marktführer für Mikrocontroller von heute</font> </h4><br>  Seit der Zeit von King Peas werden Mikrocontroller normalerweise nach der Kapazität der Daten unterteilt, mit denen sie Operationen durchführen.  In den allermeisten Fällen lohnt es sich heute bei Neuentwicklungen, 32-Bit-Mikrocontroller mit ARM-Kern zu wählen.  Es gibt eine Vielzahl von Änderungen, und Sie können jederzeit die Instanz auswählen, die für die Lösung Ihres Problems am besten geeignet ist.  Je nach Funktionsumfang und Leistung kann der Preis eines Chips zwischen zehn Cent und zehn Dollar liegen. <br>  Mikrocontroller (MCUs) werden abhängig von der Architektur des Computerkerns normalerweise in große Familien unterteilt.  Für die Entwicklung von Geräten mit kleiner und mittlerer Komplexität gelten heute die beliebtesten Mikrocontroller mit Kernen von Cortex-M0 bis Cortex-M7.  Je größer die Anzahl, desto größer die Rechenleistung (und nicht nur), der Preis und der maximale Stromverbrauch.  Die Abfolge der Architektur spielte eine wichtige Rolle für die Popularität von ARM.  Ein Entwickler kann den Programmcode seiner früheren Entwicklungen mit minimalen Kosten ändern, indem er von Mikrocontrollern eines Herstellers zu Chips eines anderen wechselt und zwischen Kernen mit unterschiedlicher Leistung migriert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/d-/l5/o3/d-l5o3vfjxpjdltq9o6vftmu6wo.jpeg"></div><br><a name="brothers"></a><h4>  <font color="#66a3be">Wettbewerb mit jüngeren Brüdern</font> </h4><br>  Die ARMs steuerten jedoch nicht.  Ich erinnere mich gut an die Zeiten, als die 8-Bit-Mikrocontroller die absoluten Marktführer waren und 16-Bit-Kollegen von ihren Positionen aus erfolglos versuchten, sie zu pushen, aber ironischerweise gelang dies nur 32-Bit-älteren Brüdern.  So kam es, dass die Technologien zur Chipherstellung zum Zeitpunkt ihres Auftretens die Kosten für die Integration großer Mengen an FLASH-Speicher in sie erheblich reduzierten.  Bei dieser Gelegenheit wechselten die Programmierer vom Assembler zu einer höheren Sprache - C, deren Struktur perfekt auf der 32-Bit-Architektur basiert.  Infolgedessen führten 32-Bit-Mikrocontroller Berechnungen viel schneller durch als ihre 8- und 16-Bit-Kollegen, aber es gab ein Problem: Sie hatten einen höheren Stromverbrauch. <br><br>  Daher wurden sie zunächst in Fällen verwendet, in denen eine höhere Rechenleistung erforderlich war. <br><br>  Es ist bekannt, dass der durchschnittliche Stromverbrauch des Rechenkerns des Mikrocontrollers mit zunehmender Taktfrequenz signifikant ansteigt.  Zunächst hatten 8-Bit-Modelle von Mikrocontrollern bei einer ähnlichen Frequenz einen deutlich geringeren Verbrauch und konnten darüber hinaus mit einer niedrigen Taktfrequenz von bis zu 32 kHz arbeiten. <br><br>  Der Stromverbrauch von Mikrocontrollern hängt stark von der Taktfrequenz des Kerns und der Peripherie ab. Um diese zu regulieren, verwendeten sie die PLL-basierte Taktfrequenzerzeugungseinheit, die in Funkübertragungsgeräten weit verbreitet ist.  Dies ermöglichte es, die Taktfrequenz stark zu variieren, ohne den Master-Quarzresonator zu verändern.  Peripheriemodule müssen nicht die gleiche Taktfrequenz wie der Computerkern haben.  Um ihren Stromverbrauch zu senken, wurde ihnen die Frequenz über Teiler mit einem programmgesteuerten Teilungsverhältnis zugeführt.  Einführung der Möglichkeit, nicht verwendete Module zu deaktivieren.  Diese Maßnahmen reduzierten den Stromverbrauch erheblich, blieben jedoch deutlich höher als der von 8-Bit-Geräten. <br><br>  Für kurze Zeit entwickelte sich eine Parität: 32-Bit-MCUs eroberten die Nische der Top-End-Anwendungen, und 8-Bit-MCUs hielten sicher Positionen in Geräten, für die ein geringer Stromverbrauch wichtig war.  Es blieb bestehen, bis die 32-Bit-MCUs den "Puls" -Betriebsmodus perfekt beherrschten. <br><br>  Bis dahin lernten auch 8-Biter, wie man das macht, aber aufgrund der schlechten Leistung mussten sie viel länger wach bleiben und verloren infolgedessen an Energie, insbesondere bei Aufgaben, die Berechnungen erfordern, wie das folgende Bild zeigt. <br><br><img src="https://habrastorage.org/webt/ro/z1/ji/roz1jikhroyuoh_0whgbgiwusai.jpeg"><br><br><a name="sleep"></a><h4>  <font color="#66a3be">Über das Verlegen von Asphalt, die Vorteile des Schlafes und seiner Sorten</font> </h4><br>  So lernten Mikrocontroller, so gut zu glauben, dass sie sehr schnell mit ihrer Arbeit begannen und die meiste Zeit gezwungen waren, „das Geld zu schlagen“ und Energie zu verschlingen, um Leerlaufzyklen durchzuführen.  Bei Geräten mit eigener Stromversorgung verkürzt dies die Akkulaufzeit oder die Akkulaufzeit mit einer einzigen Ladung erheblich. <br><br>  Beobachten Sie die Bauarbeiter beim Verlegen des Asphalts.  Sie intensivieren ihre Arbeit stark, als ein Lastwagen mit einer neuen Portion Asphalt ankam und nach dem Verlegen langsamer wurde.  So können Mikrocontroller die Kerntaktfrequenz erhöhen und verringern.  Dies ist jedoch für sie nicht so einfach wie für die Arbeitnehmer - gleichzeitig ändert sich auch die Betriebsfrequenz der gesamten internen Peripherie, weshalb die empfindlichen Teile neu konfiguriert werden müssen. <br>  Ist es nicht einfacher, nach all der Arbeit schnell etwas Schlaf zu bekommen?  Oft ja.  Darüber hinaus unterscheiden sich die Schlafarten von Mikrocontrollern noch dramatischer als beim Menschen. <br><br><img src="https://habrastorage.org/webt/_o/s5/4x/_os54x2gaveqetdf6d2erfih87o.jpeg" align="left">  Sie können einfach ein Nickerchen machen.  In diesem Fall ist unser Chip immer bereit und sobald der Timer-Alarm ertönt oder durch einen externen Interrupt gestört wurde, wird er fast sofort aktiviert.  Da eine Person während eines Nickerchens Stress abbauen kann, aber nicht wirklich genug Schlaf bekommt, wenn Sie ständig gezogen werden, kann der Mikrocontroller seinen Energieverbrauch in diesem Modus „nur“ alle 10 Mal senken. Dieser Modus wird als SCHLAF bezeichnet. <br><br>  Der beste Weg, um gut zu schlafen, ist sich auszuziehen, ins Bett zu gehen, die Vorhänge am Fenster zu schließen und den Wecker einzuschalten.  Nach einem solchen Traum werden Sie jedoch nicht sofort zur Arbeit gehen.  Sie müssen mindestens mit kaltem Wasser abspülen und sich anziehen.  Der Mikrocontroller verfügt auch über diesen Modus, wenn er die Anzahl der externen Stimuli begrenzt und den Haupttaktgenerator ausschaltet.  Dies ist der STOP-Modus.  Es kann den Verbrauch um das 1000-fache reduzieren, aber es wird eine beträchtliche Zeit in Anspruch nehmen, um es zu verlassen. <br><br>  Stellen Sie sich vor, Sie hätten vor dem Schlafengehen eine angemessene Dosis Schlaftabletten getrunken, den Alarm und das Telefon ausgeschaltet und alle Fenster und Türen geschlossen.  Dies ist der STAND BY-Modus.  Der Mikrocontroller kann nur mit Hilfe spezieller Schlussfolgerungen aus diesem Modus entfernt werden, und der größte Teil der Erinnerung an das, was er vor einem solchen Traum getan hat, geht für immer verloren. Sie müssen erneut mit der Arbeit beginnen.  In diesem Modus verbraucht die MCU jedoch noch halb so viel. <br><br>  Letzteres, ein sehr exotischer Modus, erinnert bereits an jemanden, der nicht ohne spezielle Ausrüstung zurückgelassen werden kann.  In diesem Fall funktioniert <s>jedoch</s> nur ein spezieller Generator <s>, der Teil des Mikrocontrollers</s> auf einem separaten Uhrenquarz ist, der mit seiner eigenen Stromquelle betrieben werden kann und buchstäblich einige Bytes RAM hat, um den Mikrocontroller daran zu erinnern, in welchen Zustand er geraten ist.  Wenn die verbleibenden Teile des Mikrocontrollers gleichzeitig von der Stromversorgung getrennt werden, beträgt der Stromverbrauch möglicherweise bereits ein Zehntausendstel des aktiven Modus. <br><br>  <b>Bei der Auswahl eines Energiesparmodus müssen Sie die Konsequenzen der Anwendung berücksichtigen</b> : <br><br><ul><li>  Je tiefer der Traum, desto länger das Erwachen </li><li>  Je tiefer der Traum, desto weniger Möglichkeiten, den Mikrocontroller herauszuholen </li><li>  Je tiefer der Schlaf, desto weniger Informationen bleiben über den vorherigen Zustand des Mikrocontrollers </li><li>  Um die deklarierten Mindestwerte zu erreichen, müssen in vielen Modi zusätzliche Maßnahmen ergriffen werden, z. B. das Trennen von Peripheriegeräten </li><li>  Um den Stromverbrauch des gesamten Geräts zu minimieren, muss die Schaltung des gesamten Geräts korrekt ausgelegt werden </li><li>  Um den Stromverbrauch des gesamten Geräts zu minimieren, müssen Sie sicherstellen, dass die anderen Komponenten und Schaltkreise in einem inaktiven Modus ebenfalls über Mikropower verfügen.  Es ist dumm, enorme Anstrengungen zu unternehmen, um den Verbrauch des Mikrocontrollers unter ein Mikroampere zu senken und gleichzeitig einen billigen Stabilisator mit einem Eigenverbrauchsstrom von 100 Mikroampere im Gerät zu verwenden, <s>aber dies ist sehr häufig</s> </li><li>  Für den erfolgreichen Einsatz von Tiefschlafmodi muss nicht nur das Programm, sondern auch die Schaltung sorgfältig durchdacht werden. Andernfalls kann es beim Speichern zu sehr schwerwiegenden Problemen kommen - selten, aber das „tote“ Gerät friert aus unerklärlichen Gründen ein oder wacht zu oft auf und mag Infolgedessen ist der Verbrauch um Größenordnungen höher als erwartet </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ya/4r/vb/ya4rvbmj6zuxbkfdm42vayp9qnm.jpeg"></div><br>  Wenn sich Ihr Programmierer mit einem Schaltungsingenieur zum ersten Mal gegenseitig für die Krümmung verantwortlich gemacht hat und der Hersteller gemeinsam unrealistische Zahlen in Datenblättern auf dem Mikrocontroller veröffentlicht hat und Ihr Gerät Batterien um eine Größenordnung schneller als erwartet einlegt, ist dies ein Grund, sich zumindest unabhängig zu machen hochqualifizierte Experten. <br><br><a name="family"></a><h4>  <font color="#66a3be">Kurz über die Fertigungstechnologie und wie Mikrocontroller-Serien aussehen</font> </h4><br>  Der physikalisch aktive Teil des Mikrocontrollers wird wie die überwiegende Mehrheit anderer Mikroschaltungen normalerweise auf einem Monosiliciumwafer gebildet (nennen wir es in diesem Zusammenhang einen Chip).  Die Späne nehmen eine sehr kleine Fläche ein, aber es ist technologisch rentabel, Platten mit großem Durchmesser herzustellen. Daher wird normalerweise eine große Anzahl von Spänen wie Waben auf eine große Platte gelegt und während eines technologischen Prozesses geformt.  Anschließend werden die Platten in Stücke geschnitten und erhalten einzelne Chips, die in das Gehäuse gelegt werden. <img src="https://habrastorage.org/webt/zb/ci/pl/zbcipl0p0xcz2exeiddm0indj7a.jpeg" align="left">  Die Topologieentwicklung und das Debuggen von technologischen Prozessen eines neuen Chips ist sehr teuer, und der Platz, den ein einzelner Chip auf einer Platte einnimmt, ist normalerweise nicht groß.  Für Hersteller ist es rentabel, Chips in großen Mengen herzustellen, aber Benutzer benötigen in verschiedenen Fällen Mikrocontroller. Für jemanden ist es wichtig, ein kleineres und billigeres Gehäuse zu erhalten. Im Gegenteil, es werden mehr Ausgänge benötigt, um ein LCD oder einen externen Speicher mit einer parallelen Schnittstelle zu verwalten.  Für Hersteller ist es rentabel, alle Nischen abzudecken, damit Kunden nicht zu Wettbewerbern übergehen, ohne das für sie optimale Modell zu finden. <br><br>  Es ist oft rentabler, eine große Charge eines Universalchips freizugeben und in verschiedenen Fällen zu platzieren, als ein Dutzend verschiedener Chips auf den Markt zu bringen.  Bei Chips, die in Fällen mit einer kleinen Anzahl von Pins platziert sind, bleiben einige Ports (in diesem Zusammenhang unter Ports die Kontaktpads auf der Oberfläche des Chips, die zur Kommunikation mit der Außenwelt dienen) einfach nicht verbunden.  Oft gehen Hersteller noch weiter - um die Nachfrage und den Preis von Mikrocontrollern mit einer großen Anzahl von Beinen zu erhöhen, schneiden sie künstlich die Funktionalität von denen mit weniger Beinen ab - deaktivieren Sie einige Funktionen, begrenzen Sie die Menge des verfügbaren Speichers usw. <br><br>  Auf der Basis eines Chips bilden sie eine Reihe von Mikrocontrollern, die sich in der Speichergröße erheblich unterscheiden, und eine Reihe von Peripheriemodulen, manchmal zu bestimmten Preisen.  Gleichzeitig können die darin installierten Chips aus denselben Platten geschnitten werden.  Da die Fläche, auf der sich ein Chip befindet, klein ist, ist auch sein Beitrag zu den Kosten des Endprodukts gering und kann geopfert werden.  Es ist vorteilhaft, zusätzlichen Speicher und andere Funktionen beispielsweise in der Testphase zu deaktivieren - entweder mit Hilfe einmal programmierbarer Teile der Konfiguration oder durch Brennen der Jumper mit einem Laser.  Nur für die meisten Massenprodukte ist es sinnvoll, hierfür eine leicht modifizierte Fotovorlage zu erstellen.  Darüber hinaus ist es nicht erforderlich, dass nicht verwendeter Speicher physisch nicht vorhanden ist. Er kann wiederum einfach durch Entfernen von Jumpern in der Vorlage deaktiviert werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yx/uu/wr/yxuuwr9uhryuqjgsw9faxxl_szo.jpeg"></div><br>  Aus einem Standard-Chip-Design wird also eine ganze Reihe von Mikroschaltungen gebildet. <br><br><a name="perif"></a><h4>  <font color="#66a3be">Die Peripherie des einfachsten ARM-Mikrocontrollers für einen halben Dollar</font> </h4><br>  Der Prozessorkern ist das Gehirn, aber damit es nicht wie ein „kugelförmiges Pferd im Vakuum“ ist, sind Analoga der Sinne und Gliedmaßen erforderlich. <br><br>  Im Mikrocontroller spielen die Schlussfolgerungen zum Fall, an die die Ports (Pads) des Chips im Inneren des Gehäuses angeschlossen werden können, ihre Rolle.  Über interne Switches können wiederum verschiedene Peripheriemodule an denselben Port angeschlossen werden. <br>  Betrachten Sie zunächst die Peripherie einer der einfachsten Serien von ST, die auf dem Cortex-M0-Kern basiert - stm32F03. <br><br><img src="https://habrastorage.org/webt/mr/bx/fv/mrbxfvq_arcn6zy_3aapgjflvho.jpeg"><br><br>  <b>Für diese Serie haben wir die folgenden Grundfunktionen:</b> <br>  <b><font color="#66a3be">Echtzeituhr (Real Time Clock oder RTC)</font></b> , die von einem separaten Ausgang gespeist werden kann und von einem separaten Niederfrequenzresonator aus betrieben werden kann.  Dieses Modul verbraucht extrem wenig Energie. Bei einem Stromausfall kann es stundenlang an einem geladenen Kondensator oder jahrelang an einer im Gerät eingebauten kleinen Batterie arbeiten.  Darüber hinaus kann es als Wecker dienen und den Mikrocontroller zu einem festgelegten Zeitpunkt aus dem Zustand des tiefsten Schlafes entfernen. <br><br>  <b><font color="#66a3be">WatchDog</font></b> ist ein Wachhund, der verhindert, dass der Mikrocontroller für immer einschlafen kann, z. B. in einen endlosen Zyklus fällt oder zu einer nicht vorhandenen Adresse wechselt.  Das Funktionsprinzip ist einfach.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Programmierer stellt den Frostschutz-Timer für einen bestimmten Zeitraum, beispielsweise für eine Sekunde, ein und startet ihn. Dann platziert er an den Stellen des von ihm ausgewählten Programms kurze Codeabschnitte, die den Timer von Null aus neu starten. Wenn in einer Sekunde kein Timer zurückgesetzt wird, ist WatchDog der Ansicht, dass etwas mit dem Programm nicht stimmt, und passt zum Neustart des Mikrocontrollers. Das Programm beginnt von Anfang an zu arbeiten, und es ist möglich festzustellen, ob der Initiator des WatchDog-Resets war, und diese Tatsache beim Start zu berücksichtigen. </font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Allgemeines Input-Output-GPIO</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist die häufigste Funktion, die die meisten Mikrocontroller-Pins unterstützen. Sie können entweder als Eingänge oder als Ausgänge konfiguriert werden.</font></font><br><br>     .         (     ),      ,     1.        , ,     ,          ,     .  ,    ,   ,        20 — 50      (pull-up)    (pull-down). <br><br>     ,         <u>   </u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">oder niedrig. </font><font style="vertical-align: inherit;">Es gibt schwierigere Modi, aber wir werden nicht auf übermäßige Details eingehen.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tipps für Anfänger</font></font></b> <div class="spoiler_text"> <i>  —    ,     ,      .    ,   ,     ,        ,    . ,   ,   —      ,     ,    ,           . <br><br><img src="https://habrastorage.org/webt/a4/06/xz/a406xzrlqas-efxv5iidkjlmhmi.jpeg"><br><br>      ,    ( ),      . X4 —    .    5-7,     .      , ,   ,       ,     R24-R26,  1 .  VD4-VD6     5 ,   ,    ,     3,3 ,       5 .  R29-R31  100 . <br>         .        ,    .     STM32Fxx    <s>   </s>    5  ,       ,     ,          . <br><br> ,   .  , ,         ,         —              (- ).    ,       .    . <br><br>    .          .          «» ,      . <br><br>      ,     .         ,           —  .  ,          ,    . <br> ,    ,   ARM       ,   8- .    ,         ,    .     ,     ,    ,     .</i> </div></div><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temperatursensor</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der Mikrocontroller verfügt über einen eigenen Temperatursensor, der zwar nicht sehr genau ist, jedoch mit bestimmten Annahmen zur Messung der Temperatur im Gerät verwendet werden kann. </font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eindeutige Seriennummer</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jedem Mikrocontroller ist werkseitig eine eigene eindeutige Seriennummer zugeordnet. </font><font style="vertical-align: inherit;">Eine sehr praktische Funktion, mit der Sie die Massenproduktion Ihrer Produkte organisieren können. </font></font><br><br> <b><font color="#66a3be"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schnittstellen für den Datenaustausch</font></font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verschiedene Mikrocontroller dieser Serie können über mehrere der gängigsten Schnittstellen verfügen, die die Kommunikation mit anderen Chips und der Außenwelt erheblich erleichtern:</font></font><br><br><ul><li> USART —   ,       <s>   COM  RS232</s> ,     </li><li> SPI —  ,     ,    </li><li> I2C —  ,               .      ,           </li></ul><br>          GPIO,            . <br><br> <b><font color="#66a3be">-    AD</font></b>     . <br><br>   ,      .          ,         ,           .        .       12    ,  10     16. <br><br><img src="https://habrastorage.org/webt/2g/ru/k_/2gruk_gpzqlqu_rxupfdbyrmb4s.jpeg"><br><br>   3  12        3/4096=0.00073  —   . <br><br>         . <br><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"> <i>               .   ,     ,             <br> <b>    </b> <br><br></i> <ul><li>    MCU      </li><li>      MCU     </li></ul><br> <b>    </b> <br><br><ul><li>           —      MCU               XR7  100 ,   ,          —  . </li></ul><br> <b>    </b> <br><br><ul><li>        ,     .                  NP0     ,     ,       </li><li>     ,     ,             ,  ,    </li><li>             “”,            —       </li></ul><br> <b>    </b> ,  ,        ,      ,                 ,        . <br><br><ul><li>     ,          ,      ,   </li><li>          ( ),   .        ,   ,   ,  .     ,         </li></ul><br><img src="https://habrastorage.org/webt/cm/hp/1h/cmhp1hbrgbk70yzu20fl-v5agdu.jpeg"><br><br>                 .            MEMS             ,    .     ,        ,     . <br><br>   VBUT     .      : R5-10 , 10 0.1 ,   L1  L2 BLM18PG471SN1D     . <br><br><img src="https://habrastorage.org/webt/bi/gs/ja/bigsjabd3x3fbkyhfbnch4bsenc.jpeg"><br><br>       .  ,        ASIC,     .      —   .         ,   ,     .        « ». <br><br>       ,   . ,    ,  ,   ,      .     1,      16.   ?  ,      .       10 ,     —       10    .   ,   .    , ,     1 . ,    10       10 ! <br></div></div><br>  <b><font color="#66a3be">Ein Direktzugriffssystem auf den DAP- oder DMA-Speicher</font></b> ist eine weitere wichtige Sache.  Mit diesem Modul können Sie Daten von der Peripherie in den Speicher oder umgekehrt senden. <br><br>  Mit seiner Hilfe können Sie beispielsweise einen Speicherplatz zuweisen, um vom ADC kommende Daten zu speichern und daraus einen Ringpuffer zu erstellen.  Als nächstes startet der ADC in regelmäßigen Abständen im Datenlesemodus.  Unter Verwendung von DMA-Mechanismen werden die gelesenen Daten ohne Beteiligung des Kernels unabhängig byteweise in einen dedizierten Puffer gestellt.  Wenn der Puffer vollständig gefüllt ist, empfängt der Kernel ein Signal und beginnt mit der programmgesteuerten Verarbeitung. Das DMA-System startet den Startvorgang von Anfang an.  Da DMA mehrere Kanäle hat, stört es niemanden, für unseren Fall die automatische Ausgabe von Daten aus dem Puffer an USART zu implementieren.  Als Ergebnis erhalten wir den Prozess der Übertragung des Lesevorgangs vom ADC an USART, der ohne Verwendung des Kernels funktioniert, und nicht die einfache Arbeit des Programmierers an der DMA-Konfiguration zahlt sich gut aus. <br><br>  <b><font color="#66a3be">PWM- oder PWM-Pulsweitenmodulationsmodul</font></b> , aufgrund der Einschränkungen des Artikels werden wir nicht im Detail darauf eingehen. Ich stelle nur fest, dass es eine äußerst nützliche und weit verbreitete Funktion ist, mit der es möglich ist, die Helligkeit von LEDs, die Motordrehzahl, Lenkmaschinen und das Design intelligenter Gleichstrom zu steuern -DC-Wandler und sogar Klang synthetisieren. <br><br>  Was kann ich durch Hinzufügen von 30 Cent bekommen? <br><br><a name="family_plus"></a><h4>  <font color="#66a3be">Wechseln zu Cortex-M0 +.</font>  <font color="#66a3be">Der billigste Weg, um zusätzliche Funktionen zu erhalten</font> </h4><br>  Und welche zusätzlichen Brötchen bietet der Mikrocontroller der neuesten Serie mit einem etwas moderneren Kern als der Cortex-M0 +, der 20 bis 50 Cent teurer ist als die Analoga der oben genannten Serie in Bezug auf Gehäuse und Anzahl der Ausgänge? <br><br>  Tabelle der Unterschiede zwischen Serien <br><br><img src="https://habrastorage.org/webt/2y/ep/sx/2yepsxg9tqadr51lrrn23xaksnw.jpeg"><br><br><ul><li>  maximale Taktfrequenz verdoppelt </li><li>  von 2 auf 1,7 Volt fällt die minimale Versorgungsspannung ab </li><li>  ADC kann zweieinhalb Mal schneller arbeiten </li><li>  Es erschienen zwei Kanäle eines 12-Bit-Digital-Analog-Wandlers.  Dies ist eine äußerst nützliche Funktion, mit deren Hilfe an den Klemmen ein Signal einer bestimmten Spannung mit einer Genauigkeit von besser als 1 mV erzeugt werden kann, beispielsweise beliebige Wellenformen im Audiofrequenzbereich </li><li>  Komparatoren erschienen - Geräte zum Vergleichen der Werte von zwei analogen Signalen, kann es nützlich sein zu sagen, wenn das Moment des Überstroms bestimmt wird </li><li>  USB-Schnittstelle hinzugefügt, über die Sie Geräte an einen Computer anschließen können.  Von besonderem Interesse ist die Verfügbarkeit von Energieverwaltungsoptionen für die Implementierung einer USB-Typ-3-C-kompatiblen Schnittstelle.  Ich habe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">in einem meiner Artikel über Habré</a> über ihn gesprochen </li><li>  Der AES-Beschleuniger für 256-Bit-Verschlüsselungs- / Entschlüsselungsverfahren wurde angezeigt </li><li>  UART hatte die Möglichkeit, im Ruhemodus und in der Hardware-Unterstützung für LIN-Protokolle (ein einfaches Netzwerk, das in der Automobilindustrie weit verbreitet ist), IRDA (Datenübertragungsprotokoll über Infrarot-LEDs, TV-Fernbedienungen speichern), SIM-Karte ... zu arbeiten. </li><li>  Erweiterte Timer und PWM-Modul </li><li>  Die Obergrenze des Betriebstemperaturbereichs stieg auf 125 Grad </li><li>  Erhöhte Zuverlässigkeit aufgrund der Erweiterung der Neustartmodi bei Stromproblemen </li><li>  Es wurde ein "ehrlicher" Hardware-Zufallswertgenerator hinzugefügt - eine nützliche Funktion in der Kryptographie </li></ul><br>  Nun, für viele Anwendungen zahlt sich eine unbedeutende Preiserhöhung vollständig aus, da Sie sich weigern können, auf teurere Mikrocontroller höherer Modellreihen umzusteigen. <br><br><a name="Cort4"></a><h4>  <font color="#66a3be">Und was wird den Übergang zum Cortex-M4 zusätzlich zu dem ein paarmal erhöhten Preis hinzufügen?</font> </h4><br><img src="https://habrastorage.org/webt/tb/em/zm/tbemzmhj8xymuu7tmimap7hw4og.png"><br><br><ul><li>  Die maximale Taktfrequenz steigt auf 80 MHz </li><li>  Ein Block schien Gleitkommaberechnungen zu beschleunigen </li><li>  Natürlich hat sich der maximale interne Speicher erhöht </li><li>  Modelle mit 100 Beinen oder mehr unterstützen die Arbeit mit externem statischem Speicher </li><li>  USB hat gelernt, im HOST-Modus zu arbeiten </li><li>  Der CAN-Schnittstellencontroller wurde angezeigt.  Dies ist eine vielversprechende Schnittstelle für äußerst zuverlässige Anwendungen.  Er begann seinen siegreichen Marsch mit der Automobilindustrie und führt seit fast 20 Jahren einen langwierigen Krieg mit dem längst veralteten RS-485 in der äußerst konservativen industriellen Automatisierungsindustrie. </li><li>  Eine Schnittstelle zum Anschließen der SD-Karte wurde angezeigt.  Eine sehr nützliche Funktion - fügen Sie Ihrem Gerät einen Halter für 50 Cent hinzu und erhalten Sie ein austauschbares Speichermedium mit einer Größe von mehreren zehn Gigabyte!  Die meisten Karten funktionieren mit dem üblichen SPI, aber viel langsamer </li><li>  Sie fügten einen eingebauten Operationsverstärker mit einer Vielzahl von Betriebsarten hinzu.  <i>Dank dieser und früherer Funktionen musste ich für mein letztes Projekt eines drahtlosen Stethoskops die Auswahl für M4 anstelle von M0 + beenden.</i>  <i>Infolgedessen wurde es möglich, die Signalverstärkung vom MEMS-Mikrofon aus zu steuern und mehrere zehn Stunden Audioaufzeichnungen der Herzarbeit auf der SD-Karte zu speichern</i> </li><li>  Das Kryptomodul lernte das Lesen von HASH-Funktionen in Hardware. </li><li>  Die Steuerung von Touch-Anwendungen wurde verbessert und unterstützt jetzt nicht nur Schaltflächen, sondern auch Bildlaufelemente </li></ul><br><a name="Cort7"></a><h4>  <font color="#66a3be">Cortex-M7 - wenn Sie mehr wollen ...</font> </h4><br><img src="https://habrastorage.org/webt/lm/rb/gh/lmrbghjnya9ftsujulp3aygdma0.png"><br><br>  In der überwältigenden Anzahl von Projekten reichen die Funktionen der oben genannten Kernel aus, es treten jedoch auch Ausnahmen auf.  Persönlich passierte mir dies nur ein paar Mal und aus einem wirklich guten Grund nur einmal - es erforderte eine hohe Leistung für die Aufbereitung von Daten für den ASIC, einen Ethernet-Controller und einen CAN-FD-Bus mit einem erhöhten Wechselkurs. <br><br>  Wenn ST auf der Ebene der universellen Mikrocontroller mit Cortex 4-Kernen und darunter meiner subjektiven Meinung nach jetzt führend in Bezug auf Preis / Funktionalität ist, dann ist es im Bereich der leistungsstärkeren Chips ATMEL bzw. MICROCHIP unterlegen, das es kürzlich absorbiert hat.  Deshalb habe ich mich für die ATSAMV71-Serie ab 6 US-Dollar entschieden. <br><br>  Zusätzlich zu den oben genannten Funktionen (Ethernet-Controller und CAN-FD-Bus) erhalten wir im Großen und Ganzen einen Kernel mit einem Beschleuniger für Vorgänge, der die Produktivität erheblich steigert, bei einer Taktfrequenz von bis zu 300 MHz arbeitet, Schnittstellen zum Anschließen einer Videomatrix und Unterstützung für dynamischen Speicher. <br><br>  Abschließend werde ich diejenigen, die Erfahrung in der Kommunikation mit Mikrocontrollern haben, bitten, die geeignete Antwort auf die Frage zu wählen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de445936/">https://habr.com/ru/post/de445936/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de445922/index.html">Warum Online-Sendungen ansehen, wenn Sie Habr lesen können?</a></li>
<li><a href="../de445924/index.html">SCHÄTZE: Wenn intelligente Uhren komisch werden</a></li>
<li><a href="../de445926/index.html">Das US-amerikanische UFO-Geheimprogramm hat auch Wurmlöcher und zusätzliche Dimensionen untersucht.</a></li>
<li><a href="../de445928/index.html">Wie wir die Produktivität des Tensorflow-Dienstes um 70% steigern konnten</a></li>
<li><a href="../de445932/index.html">Sicherheit von Clientanwendungen: Praktische Tipps für einen Front-End-Entwickler</a></li>
<li><a href="../de445940/index.html">AMA mit Habr, v 7.0. Zitrone, Donuts und Nachrichten</a></li>
<li><a href="../de445946/index.html">MWC: Gebrauchsanweisung</a></li>
<li><a href="../de445948/index.html">Vererbung in C ++: Anfänger, Mittelstufe, Fortgeschrittene</a></li>
<li><a href="../de445952/index.html">Eine Billion kleiner Singles</a></li>
<li><a href="../de445954/index.html">AI-Beschleuniger von HSE, MTS und Rostelecom</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>