<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💚 👎 👩🏾‍🤝‍👨🏻 Comment j'ai décidé de protéger les documents contre la falsification et «inventé» une signature numérique électronique 🙍 🙆🏿 👉</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="De quoi s'agit-il 
 L'idée de créer mon propre petit projet Internet pour protéger les documents contre la falsification a été provoquée par une discu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment j'ai décidé de protéger les documents contre la falsification et «inventé» une signature numérique électronique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442210/"><h2>  De quoi s'agit-il </h2><br>  L'idée de créer mon propre petit projet Internet pour protéger les documents contre la falsification a été provoquée par une discussion au forum des défectoscopistes consacrée à la falsification totale des conclusions de contrôle de qualité qu'ils ont émises. <br><br>  Lors de la mise en œuvre de mon projet, j'ai réalisé que j'en suis venu au concept de signature numérique électronique, c'est-à-dire un vélo, bien sûr, je n'ai pas inventé, mais l'histoire de mon parcours peut être instructive. <br><br><h2>  Pertinence de la tâche de protection contre les contrefaçons </h2><br>  Le fait est que, dans notre siècle d'informations sans papier, pas une seule construction d'immobilisations, qu'il s'agisse d'un gazoduc ou d'un centre commercial, ne peut se passer de préparer un ensemble complet de documents conformes à l'exécution, qui comprend des conclusions de tests non destructifs (visuels, radiographiques, échographiques). <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/cm/7n/ee/cm7nee3ngx3tpo1yb-ihvnpregc.png"><br><br>  Cette conclusion est un document établi sous une certaine forme avec une conclusion sur l'adéquation ou l'inadéquation, par exemple, d'une soudure.  Les services d'essais non destructifs coûtent de l'argent et sont souvent assez considérables.  Un client / intermédiaire sans scrupules peut engager un laboratoire accrédité, en recevoir plusieurs avis et arrêter ou suspendre les travaux. <br><br>  Ce qui peut surprendre l'opérateur du détecteur de défauts ou le chef du laboratoire quand ils apprennent que même après la fin des travaux, des conclusions sont émises en leur nom, elles sont mises sur de faux sceaux et de fausses signatures.  La réputation du laboratoire en souffre et, en fait, la loi est violée.  C'est juste que dans un certain nombre de cas, personne ne le saura. <br><br>  Dans le cadre de la discussion - comment protéger vos documents, l'idée a été exprimée de mettre un code QR sur le document, dans lequel le numéro de conclusion, la date et la conclusion sur l'adéquation ou l'inaptitude de l'objet de contrôle seront enregistrés.  Pourquoi cette méthode est-elle bonne - le code QR restera clairement reconnaissable lors de la numérisation et de la copie d'un document. <br><br>  Cependant, les escrocs pourront également générer simplement un code QR avec le contenu nécessaire. <br><br><h2>  La naissance d'une idée </h2><br>  Et puis une pensée m'est venue à l'esprit - pourquoi ne pas crypter le contenu d'un tel code QR avec un algorithme fiable.  Si c'est le cas, vous devez trouver un moyen de le décrypter lors de la numérisation, par exemple, à travers la caméra d'un smartphone.  Ici, l'idée est née de faire du déchiffrement du côté du service Web, qui stockera la clé du déchiffrement. <br><br>  La dernière fois que j'ai créé un site en 2000 dans le bloc-notes et je ne suis pas très familier avec les technologies modernes de construction de sites, j'ai donc choisi Wix, pensant qu'avec l'aide du service, j'obtiendrai une belle image et des possibilités minimales pour travailler avec une base de données, et avec le code Wix, je coderai cela. de quoi ai-je besoin. <br><br>  Je dois dire tout de suite que je l'ai fait sans trop de difficultés et en quelques soirées, en tant qu'amateur, j'ai pu assembler la solution dont j'avais besoin à partir de blocs plus ou moins prêts à l'emploi. <br><br><h2>  Cryptage </h2><br>  J'ai pris l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">algorithme de</a> chiffrement AES 128 bits terminé avec l'implémentation Java Script sur Github et je l'ai placé dans la section backend du site. <br><br>  C'était peut-être la partie la plus facile du travail.  Le fonctionnement du cryptage lui-même ne m'était pas totalement inintéressant.  J'étais inquiet de la grandeur du plan. <br><br>  L'essentiel est de ne pas oublier de traduire le texte encodé en octets, et le résultat du cryptage en HEX. <br><br><pre><code class="plaintext hljs">// Convert text to bytes var textBytes = aesjs.utils.utf8.toBytes(text); // The counter is optional, and if omitted will begin at 1 var aesCtr = new aesjs.ModeOfOperation.ctr(key, new aesjs.Counter(5)); var encryptedBytes = aesCtr.encrypt(textBytes); // To print or store the binary data, you may convert it to hex var encryptedHex = aesjs.utils.hex.fromBytes(encryptedBytes);</code> </pre> <br><h2>  Génération de code QR </h2><br>  J'ai utilisé l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API</a> prête à l'emploi. <br><br>  Pour travailler, il suffit de créer un objet html1 - pour afficher du code html arbitraire et appeler la fonction API <br><br><pre> <code class="plaintext hljs">let val = “ " $w("#html1").src = "https://api.qrserver.com/v1/create-qr-code/?size=100x100&amp;data=" + val.toString(); $w("#html1").show();</code> </pre> <br><h2>  Travailler avec les utilisateurs </h2><br>  Wix prend en charge l'enregistrement d'utilisateur de base et les fonctions d'édition de profil.  L'outil est quelque peu bogué, mais réalisable. <br><br>  J'avais juste besoin d'ajouter un champ qui décrit le nom de l'organisation que représente l'utilisateur enregistré, mais ce champ est en lecture seule et il est rempli par l'administrateur du service lorsqu'il reçoit la confirmation que l'utilisateur enregistré représente vraiment l'organisation spécifiée. <br><br>  Il était également nécessaire de fixer la logique la plus simple liée à l'accès payant / gratuit aux fonctions (jusqu'à 20 documents par mois peuvent être protégés gratuitement) et le délai de paiement des services. <br><h2>  Principe de fonctionnement </h2><br>  Une clé de chiffrement privée unique est liée au compte de l'utilisateur. <br><br>  Un utilisateur connecté remplit un formulaire avec des informations sur la conclusion (numéro, date, résultat): <br><br><img src="https://habrastorage.org/webt/fo/id/ct/foidct3dccu6c3_6lorfm6c7pai.png"><br><br>  Ensuite, l'algorithme renvoie une URL contenant le texte chiffré TEXT et agissant comme la clé publique USER_ID, comme dans l'exemple ci-dessous: <br><br> <code>https:// <i>* *</i> /checkqr?user=3b01b0aa-68a0-4521-ab12-f17b86d3eabc&amp;v=1.0&amp;text=8a026594c26be959f4280e28fe8402c1acef233e369a31613d654d3b0a5bbaca206f3058d27d2fde66b65cb64a5a6caecb69b07ad39c0015e923dad89eb723</code> <br> <br>  L'URL se transforme en un code QR, que l'utilisateur met déjà sur son document en le copiant dans le presse-papiers (vous pouvez l'inclure dans le fichier source ou le coller comme autocollant sur un document imprimé fini). <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/lp/f-/0o/lpf-0ojmmbrd1bh7ylqqa-pmyzu.png"></a> <br><br>  Ce qui est important ici - en tant que tel, les informations n'entrent pas dans la base de données du site, mais restent uniquement sous la forme de ce lien et d'un code QR contenant ce lien.  Ainsi, aucune information sur le contenu du document protégé n'est stockée sur le serveur. <br><br><h2>  Le code est vérifié par le site lors de l'analyse du lien </h2><br>  Pour analyser quand un site reconnaît un lien, j'ai utilisé l'aide sur le code Wix <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.wix.com/code/reference/wix-">www.wix.com/code/reference/wix-http-functions.html</a> <br><br>  Si quelque chose s'est mal passé pendant le décryptage, cela pourrait être le cas si certaines modifications ont été apportées au code QR d'origine <br><blockquote>  «Le code du document a été déchiffré avec une erreur.  Faux possible.  Contactez l'organisation qui a préparé le document pour obtenir des éclaircissements. » </blockquote>  Si le déchiffrement est terminé avec succès, le texte déchiffré est émis contenant le nom du laboratoire, le numéro de document, la date d'émission et le résultat, et l'utilisateur est invité à comparer le résultat du déchiffrement avec ce qu'il voit sur le document réel. <br><br><h2>  Conclusion </h2><br>  Dès la naissance de l'idée, je suis arrivé à une mise en œuvre fonctionnelle avec un certain nombre de briques pré-faites. <br><br>  Je vous invite à une discussion sur l'idée que j'ai eue, une tentative de tester / pirater mon service. <br><br><h4>  Ce qui reste à compléter </h4><br><ul><li>  <s>Écrivez sur les résultats de la mise en œuvre sur habr</s> </li><li>  Comprendre comment réinitialiser la requête s'il y a déjà eu une vérification de lien une fois </li><li>  Pour comprendre comment réduire le texte chiffré, car lorsqu'une URL longue est codée, la taille du code QR est trop grande </li><li>  Ajouter la possibilité de copier du code dans le presse-papiers ou de l'envoyer par e-mail en cliquant sur un bouton (jusqu'à ce que je comprenne comment le faire en javascript) </li><li>  Améliorez votre travail avec la version mobile </li></ul><br><h4>  Réponse préliminaire à d'éventuelles critiques: </h4><br><blockquote>  N'est-il pas plus facile pour un laboratoire de tenir un registre des conclusions sur son site Web, et une balise QR similaire mènera-t-elle à ce registre ou même afficher une copie du rapport? </blockquote>  Cela peut être fait, mais un travail manuel important ou l'introduction de votre propre solution informatique comme celle développée par moi sera nécessaire, mais cela coûtera évidemment plus cher que d'utiliser une solution prête à l'emploi. <br><br>  Il est impossible de rendre un tel registre complètement accessible au public, car les informations ne sont pas publiques, mais ne peuvent être prises en compte que par le contractant, le client et Rostekhnadzor. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr442210/">https://habr.com/ru/post/fr442210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr442200/index.html">Mission lunaire de Bereshit - Des ingénieurs du MCC SpaceIL et Israel Aerospace Industries (IAI) ont résolu les problèmes</a></li>
<li><a href="../fr442202/index.html">Notifications push du serveur SpringBoot</a></li>
<li><a href="../fr442204/index.html">Ordinateur portable Compaq LTE 5000, première partie - Présentation</a></li>
<li><a href="../fr442206/index.html">Préparation à l'inspection de Roskomnadzor: une dure pratique pour les courageux</a></li>
<li><a href="../fr442208/index.html">Publier des fautes de frappe dans les publications</a></li>
<li><a href="../fr442212/index.html">Recueil de données scientifiques</a></li>
<li><a href="../fr442214/index.html">Comment nous définissons la station de base la plus haute altitude d'Europe de l'Est</a></li>
<li><a href="../fr442218/index.html">FunTech iOS-meetup # 1</a></li>
<li><a href="../fr442222/index.html">Curieuses perversions du monde informatique - 3</a></li>
<li><a href="../fr442224/index.html">Mauvais conseil: comment rédiger la documentation technique? Deuxième partie</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>