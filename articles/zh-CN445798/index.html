<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕒 👁️ 👨🏾‍🎓 猫内的犀牛-在Kopycat仿真器中运行固件 😖 ⚔️ 💵</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在2月16日的会议0x0A DC7831 DEF CON Nizhny Novgorod的框架中，我们提交了一份有关二进制代码仿真的基本原理和我们自己的开发报告-硬件平台仿真器Kopycat的报告 。 


 在本文中，我们将描述在仿真器中启动设备固件，演示与调试器的交互以及对固件进行小的动态分析。...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>猫内的犀牛-在Kopycat仿真器中运行固件</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/inforion/blog/445798/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gi/pb/7e/gipb7e8ucwinvebjerxy1fk2d-8.jpeg" width="80%"></div><br><p> 在2月16日的会议0x0A DC7831 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">DEF CON Nizhny Novgorod</a>的框架中，我们提交了一份有关二进制代码仿真的基本原理和我们自己的开发报告-硬件平台仿真器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kopycat的报告</a> 。 </p><br><p> 在本文中，我们将描述在仿真器中启动设备固件，演示与调试器的交互以及对固件进行小的动态分析。 </p><a name="habracut"></a><br><h2 id="predystoriya"> 背景知识 </h2><br><p><del> 很久以前在一个遥远的星系中 </del></p><br><p> 几年前，在我们的实验室中，需要研究设备的固件。 固件已压缩，由引导程序解压缩。 他以一种非常混乱的方式进行了此操作，几次将数据移入内存。 是的，然后固件本身与外围设备进行了主动交互。 而所有这些都在MIPS内核上。 </p><br><p>出于客观原因，现有的模拟器不适合我们，但我仍然想运行代码。 然后，我们决定制作自己的仿真器，该仿真器将最小化并允许解压缩主固件。 我们尝试了-事实证明。 我们认为，如果我们添加外围设备以也执行主要固件该怎么办。 这不是很痛苦-而且也解决了。 我们再次考虑，决定制作一个完整的模拟器。 </p><br><p> 结果是计算机系统<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kopycat</a>的仿真器。 </p><br><img src="https://habrastorage.org/webt/eb/cx/b6/ebcxb6pxtiypy0s-usvu6i_hdwu.png" align="right"><br><div class="spoiler">  <b class="spoiler_title">为什么选择Kopycat？</b> <div class="spoiler_text"><p> 有文字游戏。 </p><br><ol><li>  <em>copycat</em> （英语，n。[ˈkɒpɪkæt]）-模仿者，模仿者 </li><li>  <em>猫</em> （英语，n。[ˈkæt]）-猫，猫-该项目一位创作者的最爱动物 </li><li> 字母“ K”-来自Kotlin编程语言 </li></ol></div></div><br><h2 id="kopycat"> 科比猫 </h2><br><p> 创建仿真器时，设置了绝对特定的目标： </p><br><ul><li> 快速创建新的外围设备，模块，处理器核心的能力； </li><li> 从各种模块组装虚拟设备的能力； </li><li> 能够将任何二进制数据（固件）加载到虚拟设备的内存中； </li><li> 处理快照（系统状态快照）的能力； </li><li> 通过内置调试器与仿真器进行交互的能力； </li><li> 很好的现代语言发展。 </li></ul><br><p> 结果，选择了Kotlin来实现，总线体系结构（这是模块之间通过虚拟数据总线相互通信的时间），JSON作为设备描述格式以及GDB RSP作为与调试器进行交互的协议。 </p><br><p> 开发已经进行了两年多，并且正在积极进行中。 在此期间，实现了MIPS，x86，V850ES，ARM，PowerPC处理器内核。 </p><br><p> 该项目正在发展，是时候向大众介绍它了。 稍后我们将对该项目进行详细描述，但是现在我们将重点介绍使用Kopycat。 </p><br><p> 对于最急躁的人，可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>下载仿真器的促销版。 </p><br><h2 id="nosorog-v-emulyatore"> 犀牛在模拟器中 </h2><br><p> 回想一下，早在SMARTRHINO-2018大会上，就创建了一个测试设备“ Rhinoceros”，用于培训逆向工程技能。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">本文</a>介绍了静态固件分析的过程。 </p><br><p> 现在，让我们尝试添加“扬声器”并在仿真器中运行固件。 </p><br><p> 我们将需要： <br>  1）Java 1.8 <br>  2）Python和用于在仿真器内部使用Python的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Jep</a>模块。  Windows的Jep模块的WHL组件可在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处下载</a> 。 </p><br><p>  <strong>对于Windows：</strong> <br>  1） <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">com0com</a> <br>  2） <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">腻子</a> </p><br><p>  <strong>对于Linux：</strong> <br>  1）socat </p><br><p> 您可以将Eclipse，IDA Pro或radare2用作GDB客户端。 </p><br><h2 id="kak-eto-rabotaet"> 如何运作？ </h2><br><p> 为了在仿真器中执行固件，您必须“组装”虚拟设备，它是真实设备的模拟。 </p><br><p> 实际设备（“ rhino”）可以在框图中显示： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nh/ph/ph/nhphph7rjwm3xiv52mvp_uefdq8.jpeg" alt="实物电路" width="60%"></div><br><p> 仿真器具有模块化结构，最终的虚拟设备可以在JSON文件中描述。 </p><br><div class="spoiler">  <b class="spoiler_title">JSON共105行</b> <div class="spoiler_text"><pre><code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"top"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, // Plugin name should be the same as file name (or full path from library start) <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"rhino"</span></span>, // Directory where plugin places <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"user"</span></span>, // Plugin parameters (constructor parameters if jar-plugin version) <span class="hljs-attr"><span class="hljs-attr">"params"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"tty_dbg"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>}, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"tty_bt"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>}, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"firmware"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"String"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"default"</span></span>: <span class="hljs-string"><span class="hljs-string">"NUL"</span></span>} ], // Plugin outer ports <span class="hljs-attr"><span class="hljs-attr">"ports"</span></span>: [ ], // Plugin internal buses <span class="hljs-attr"><span class="hljs-attr">"buses"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"mem"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"size"</span></span>: <span class="hljs-string"><span class="hljs-string">"BUS30"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"nand"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"size"</span></span>: <span class="hljs-string"><span class="hljs-string">"4"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"gpio"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"size"</span></span>: <span class="hljs-string"><span class="hljs-string">"BUS32"</span></span> } ], // Plugin internal components <span class="hljs-attr"><span class="hljs-attr">"modules"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"u1_stm32"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"STM32F042"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"params"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"firmware:String"</span></span>: <span class="hljs-string"><span class="hljs-string">"params.firmware"</span></span> } }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"usart_debug"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"UartSerialTerminal"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"terminals"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"params"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"tty"</span></span>: <span class="hljs-string"><span class="hljs-string">"params.tty_dbg"</span></span> } }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"term_bt"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"UartSerialTerminal"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"terminals"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"params"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"tty"</span></span>: <span class="hljs-string"><span class="hljs-string">"params.tty_bt"</span></span> } }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"bluetooth"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"BT"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_2"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_4"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_5"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_6"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_7"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_8"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_9"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_10"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_11"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_12"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_13"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_14"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"led_15"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"plugin"</span></span>: <span class="hljs-string"><span class="hljs-string">"LED"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"library"</span></span>: <span class="hljs-string"><span class="hljs-string">"mcu"</span></span> } ], // Plugin connection between components <span class="hljs-attr"><span class="hljs-attr">"connections"</span></span>: [ [ <span class="hljs-string"><span class="hljs-string">"u1_stm32.ports.usart1_m"</span></span>, <span class="hljs-string"><span class="hljs-string">"usart_debug.ports.term_s"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"u1_stm32.ports.usart1_s"</span></span>, <span class="hljs-string"><span class="hljs-string">"usart_debug.ports.term_m"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"u1_stm32.ports.usart2_m"</span></span>, <span class="hljs-string"><span class="hljs-string">"bluetooth.ports.usart_m"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"u1_stm32.ports.usart2_s"</span></span>, <span class="hljs-string"><span class="hljs-string">"bluetooth.ports.usart_s"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"bluetooth.ports.bt_s"</span></span>, <span class="hljs-string"><span class="hljs-string">"term_bt.ports.term_m"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"bluetooth.ports.bt_m"</span></span>, <span class="hljs-string"><span class="hljs-string">"term_bt.ports.term_s"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_0.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x00"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_1.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x01"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_2.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x02"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_3.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x03"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_4.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x04"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_5.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x05"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_6.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x06"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_7.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x07"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_8.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x08"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_9.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x09"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_10.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x0A"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_11.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x0B"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_12.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x0C"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_13.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x0D"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_14.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x0E"</span></span>], [ <span class="hljs-string"><span class="hljs-string">"led_15.ports.pin"</span></span>, <span class="hljs-string"><span class="hljs-string">"u1_stm32.buses.pin_output_a"</span></span>, <span class="hljs-string"><span class="hljs-string">"0x0F"</span></span>] ] }</code> </pre> <br><p> 请注意<strong>参数</strong>部分中的<em>固件</em>参数-这是可以作为固件下载到虚拟设备的文件的名称。 </p></div></div><br><p> 虚拟设备及其与主操作系统的交互可以表示如下： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/m9/i_/27/m9i_27btauj0onjugttzj3srmfg.jpeg" alt="电路仿真装置" width="80%"></div><br><p> 仿真器的当前测试实例涉及与主OS的COM端口（调试UART和Bluetooth模块的UART）进行交互。 这些可以是连接设备的实际端口，也可以是虚拟COM端口（ <em>com0com / socat</em>仅用于此目的<em>）</em> 。 </p><br><p> 当前有两种从外部与仿真器进行交互的主要方法： </p><br><ul><li>  GDB RSP协议（分别支持该协议的工具-Eclipse / IDA / radare2）； </li><li> 模拟器内部命令行（Argparse或Python）。 </li></ul><br><h3 id="virtualnye-com-porty"> 虚拟COM端口 </h3><br><p> 为了通过终端与本地计算机上虚拟设备的UART进行交互，您需要创建几个连接的虚拟COM端口。 在我们的例子中，一个端口使用仿真器，第二个端口使用终端程序（PuTTY或屏幕）： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5d/jr/0w/5djr0wz88dgdaiw1xaasrof2wyk.png" alt="虚拟COM端口" width="80%"></div><br><h4 id="ispolzovanie-com0com"> 使用com0com </h4><br><p> 虚拟com端口是使用com0com套件中的设置实用程序配置的（控制台版本为<em>C：\ Program Files（x86）\ com0com \setup.exe，</em>或者GUI版本为<em>C：\ Program Files（x86）\ com0com \ setupg.exe</em> ） ： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/v-/j9/pf/v-j9pfquunpiezqhkcr6cuyq-9k.png" alt="配置虚拟COM端口"></div><br><p>  <strong><em>选中</em></strong>所有创建的虚拟端口<strong><em>的启用缓冲区溢出复选框</em></strong> ，否则仿真器将等待来自COM端口的响应。 </p><br><h4 id="ispolzovanie-socat"> 使用socat </h4><br><p> 在UNIX系统上，仿真器使用socat实用程序自动创建虚拟COM端口，为此在启动仿真器时在端口名称中指定<code>socat:</code>前缀就足够了。 </p><br><h3 id="vnutrenniy-interfeys-komandnoy-stroki-argparse-ili-python"> 内部命令行界面（Argparse或Python） </h3><br><p> 由于Kopycat是一个控制台应用程序，因此模拟器为命令行界面提供了两个选项以与其对象和变量进行交互：Argparse和Python。 </p><br><p>  Argparse是Kopycat内置的CLI，它始终对所有人可用。 </p><br><p> 另一个CLI是Python解释器。 要使用它，您需要安装Jep Python模块并配置模拟器以与Python一起使用（将使用安装在用户主系统上的Python解释器）。 </p><br><h4 id="ustanovka-python-modulya-jep"> 安装Python Jep模块 </h4><br><p> 在Linux下，可以通过pip安装Jep： </p><br><pre> <code class="bash hljs">pip install jep</code> </pre> <br><p> 要在Windows下安装Jep，必须首先安装Windows SDK和相应的Microsoft Visual Studio。 我们稍微简化了您的任务，并为Windows的当前版本的Python创建了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WHL</a> JEP <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">程序集</a> ，因此可以从文件安装模块： </p><br><pre> <code class="bash hljs">pip install jep-3.8.2-cp27-cp27m-win_amd64.whl</code> </pre> <br><p> 要验证Jep的安装，您必须运行命令行： </p><br><pre> <code class="bash hljs">python -c <span class="hljs-string"><span class="hljs-string">"import jep"</span></span></code> </pre> <br><p> 作为回应，应该收到一条消息： </p><br><pre> <code class="bash hljs">ImportError: Jep is not supported <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> standalone Python, it must be embedded <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Java.</code> </pre> <br><p> 在系统的仿真器批处理文件中（对于Windows为<em>kopycat.bat，</em>对于Linux为<em>kopycat</em> ），将附加参数<code>Djava.library.path</code>添加到<code>DEFAULT_JVM_OPTS</code>参数列表中-它应包含已安装的Jep模块的路径。 </p><br><p> 结果，对于Windows，您应该获得如下代码： </p><br><pre> <code class="plaintext hljs">set DEFAULT_JVM_OPTS="-XX:MaxMetaspaceSize=256m" "-XX:+UseParallelGC" "-XX:SurvivorRatio=6" "-XX:-UseGCOverheadLimit" "-Djava.library.path=C:/Python27/Lib/site-packages/jep"</code> </pre> <br><h2 id="zapusk-kopycat">  Kopycat发布 </h2><br><p> 该仿真器是一个控制台JVM应用程序。 启动是通过操作系统的命令行脚本（sh / cmd）执行的。 </p><br><p> 在Windows下运行的命令： </p><br><pre> <code class="plaintext hljs">bin\kopycat -g 23946 -n rhino -l user -y library -p firmware=firmware\rhino_pass.bin,tty_dbg=COM26,tty_bt=COM28</code> </pre> <br><p> 使用socat实用程序在Linux上运行的命令： </p><br><pre> <code class="plaintext hljs">./bin/kopycat -g 23946 -n rhino -l user -y library -p firmware=./firmware/rhino_pass.bin,tty_dbg=socat:./COM26,tty_bt=socat:./COM28</code> </pre> <br><ul><li>  <code>-g 23646</code>将打开以访问GDB服务器的TCP端口； </li><li>  <code>-n rhino</code>系统主模块的名称（设备组合件）； </li><li>  <code>-l user</code>搜索主模块的库的名称； </li><li>  <code>-y library</code> -搜索设备中包含的模块的路径； </li><li>  <code>firmware\rhino_pass.bin</code>固件文件的路径； </li><li>  COM26和COM28是虚拟COM端口。 </li></ul><br><p> 结果将是<code>Python &gt;</code> （或<code>Argparse &gt;</code> ） <code>Argparse &gt;</code> ： </p><br><pre> <code class="plaintext hljs">18:07:59 INFO [eFactoryBuilder.create ]: Module top successfully created as top 18:07:59 INFO [ Module.initializeAndRes]: Setup core to top.u1_stm32.cortexm0.arm for top 18:07:59 INFO [ Module.initializeAndRes]: Setup debugger to top.u1_stm32.dbg for top 18:07:59 WARN [ Module.initializeAndRes]: Tracer wasn't found in top... 18:07:59 INFO [ Module.initializeAndRes]: Initializing ports and buses... 18:07:59 WARN [ Module.initializePortsA]: ATTENTION: Some ports has warning use printModulesPortsWarnings to see it... 18:07:59 FINE [ ARMv6CPU.reset ]: Set entry point address to 08006A75 18:07:59 INFO [ Module.initializeAndRes]: Module top is successfully initialized and reset as a top cell! 18:07:59 INFO [ Kopycat.open ]: Starting virtualization of board top[rhino] with arm[ARMv6Core] 18:07:59 INFO [ GDBServer.debuggerModule ]: Set new debugger module top.u1_stm32.dbg for GDB_SERVER(port=23946,alive=true) Python &gt;</code> </pre> <br><h2 id="vzaimodeystvie-s-ida-pro"> 与IDA Pro的互动 </h2><br><p> 为了简化测试，我们使用Rhino固件作为<a href="">ELF文件</a> （元信息保存在其中）作为IDA中进行分析的源文件。 </p><br><p> 您也可以使用不带元信息的主固件。 </p><br><p> 在IDA Pro中启动Kopycat之后，在“调试器”菜单中，转到“ <em>切换调试器...</em> ”项，然后选择“ <em>远程GDB调试器</em> ”。 接下来，配置连接： <em>调试器</em>菜单<em>-进程选项...</em> </p><br><p> 设置值： </p><br><ul><li> 应用-任何价值 </li><li> 主机名：127.0.0.1（或运行Kopycat的远程计算机的IP地址） </li><li> 港口：23946 </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mx/kw/-l/mxkw-lbzq_igoewovazplw4moho.png" alt="配置与GDB服务器的连接"></div><br><p> 现在可以使用调试开始按钮（F9键）： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/af/mu/-q/afmu-qpi0ymfpsga-orunargmas.png"></div><br><p> 按下它-它连接到仿真器中的调试器模块。  IDA进入调试模式，其他窗口可用：有关寄存器的信息，有关堆栈的信息。 </p><br><p> 现在，我们可以使用调试器的所有标准功能： </p><br><ul><li> 分步执行指令（分别<em>进入</em> F7和F8键）。 </li><li> 开始和暂停执行； </li><li> 在代码和数据上创建断点（F2键）。 </li></ul><br><p> 连接到调试器并不意味着启动固件代码。 当前执行位置必须为地址<code>0x08006A74</code> - <em>Reset_Handler</em>函数的开始。 如果您向下滚动下面的列表，则可以看到对<em>主</em>功能的调用。 您可以将光标放在该行上（地址<code>0x08006ABE</code> ）并执行“ <em>运行直到光标”</em>操作（F4键）。 </p><br><p><img src="https://habrastorage.org/webt/wx/k4/3r/wxk43r-316cpnsdabb9eydkzus4.png" alt="图片"></p><br><p> 接下来，您可以按F7进入<em>主要</em>功能。 </p><br><p> 如果执行<em>继续过程</em>命令（F9键），则将出现“请稍候”窗口，其中只有一个“ <em>挂起”</em>按钮： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9e/78/tg/9e78tgoterc50rqvmosunzp1u5i.png"></div><br><p> 按下“ <em>挂起”后</em> ，将<em>暂停</em>执行固件代码，并且可以从被中断的代码中的同一地址继续执行固件代码。 </p><br><p> 如果继续执行代码，则在连接到虚拟COM端口的终端中，您可以看到以下几行： </p><br><p><img src="https://habrastorage.org/webt/fi/vi/j-/fivij-hshz3izcxoo0lnewnznc8.png" alt="图片"></p><br><p><img src="https://habrastorage.org/webt/2m/cn/oq/2mcnoqd__te1i0sq5z28jd29mdg.png" alt="图片"></p><br><p> 字符串“状态旁路”的存在指示虚拟蓝牙模块已切换到从用户的COM端口接收数据的模式。 </p><br><p> 现在，在Bluetooth终端（图中为COM29）中，您可以根据Rhino协议输入命令。 例如，字符串“ mur-mur”返回到蓝牙终端中的“ MEOW”命令： </p><br><img src="https://habrastorage.org/webt/yq/td/ab/yqtdabgfdd3jlzswsrk3rvbdzds.png"><br><br><h3 id="emuliruy-menya-ne-polnostyu"> 不完全模仿我 </h3><br><p> 构建仿真器时，可以选择设备的详细程度/仿真。 因此，例如，可以以不同方式仿真蓝牙模块： </p><br><ul><li> 具有全套命令的完全仿真的设备； </li><li> 模拟AT命令，并从主系统的COM端口接收数据流； </li><li> 虚拟设备可将完整的数据重定向到真实设备； </li><li> 作为一个简单的存根，始终返回“ OK”。 </li></ul><br><p> 在当前版本的仿真器中，使用第二种方法-虚拟蓝牙模块执行配置，然后从主系统的COM端口切换到仿真器UART端口，以将数据切换为“代理”模式。 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/e6/5c/m_/e65cm_tl2bggpbg0-q0azjvdz64.jpeg"></div><br><p> 如果外围设备的某些部分未实现，则考虑简单地编写代码的可能性。 例如，如果未创建用于控制DMA中数据传输的计时器（在位于<code>0x08006840</code>的<em>ws2812b_wait</em>函数中执行验证），则固件将始终等待位于<code>0x200004C4</code>的<em>busy</em>标志重置DMA数据线： </p><br><img src="https://habrastorage.org/webt/pt/jj/su/ptjjsutfya2dkoqdoshkeyeeqzw.png"><br><p> 我们可以通过在设置后立即手动重置<em>忙</em>标志来避免这种情况。 在IDA Pro中，您可以创建一个Python函数并在断点处调用它，并且必须在将值1写入<em>busy</em>标志后在代码中设置断点。 </p><br><h4 id="breakpoint-obrabotchik"> 断点处理程序 </h4><br><p> 首先，在IDA中创建一个Python函数。  <em>文件</em>菜单<em>-脚本命令...</em> </p><br><p> 在左侧列表中添加一个新代码段，并为其命名（例如<em>BPT</em> ）， <br> 在右侧的文本框中，输入功能代码： </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">skip_dma</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Skipping wait ws2812..."</span></span> value = Byte(<span class="hljs-number"><span class="hljs-number">0x200004C4</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> value == <span class="hljs-number"><span class="hljs-number">1</span></span>: PatchDbgByte(<span class="hljs-number"><span class="hljs-number">0x200004C4</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">False</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zi/za/-d/ziza-ddx3arqlqfbd-o6jvdmnjc.png"></div><br><p> 之后，单击<em>运行</em>并关闭脚本窗口。 </p><br><p> 现在，让我们转到<code>0x0800688A</code>的代码，设置断点（F2键），对其进行编辑（ <em>编辑断点...</em>上下文菜单），不要忘记设置脚本类型-Python： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fo/pn/1v/fopn1vb8fbxqrhn6xoia_rgnsau.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/h6/yq/b2/h6yqb29r1m9sngr3csfimxcxsew.png"></div><br><p> 如果<em>busy</em>标志的当前值为1，则应该在脚本行中<em>执行skip_dma</em>函数： </p><br><img src="https://habrastorage.org/webt/m-/t8/in/m-t8in2th7ei6neigdzgzq17kxy.png"><br><p> 如果运行固件以执行，则可以在IDA中“ <code>Skipping wait ws2812...</code> ”行的“ <em>输出”</em>窗口中看到断点处理程序代码。 现在，固件将不再等待重置<em>忙</em>标志。 </p><br><h4 id="vzaimodeystvie-s-emulyatorom"> 仿真器交互 </h4><br><p> 为了模仿而进行的模仿不太可能引起喜悦和喜悦。 如果仿真器帮助研究人员查看内存中的数据或建立流的交互作用，那就更有趣了。 </p><br><p> 我们展示了如何动态建立RTOS任务的交互。 首先，如果代码正在运行，则暂停其执行。 如果在“ LED”命令处理分支（地址<code>0x080057B8</code> ）中切换到<em>bluetooth_task_entry</em>函数，则可以看到首先创建的内容，然后将消息发送到<em>ledControlQueueHandle</em>系统队列。 </p><br><p><img src="https://habrastorage.org/webt/po/bk/zm/pobkzmapmust02eaafle7d_pxba.png" alt="图片"></p><br><p> 您应该设置断点以访问位于<code>0x20000624</code>的<em>ledControlQueueHandle</em>变量，然后继续执行代码： </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ev/wo/g3/evwog3vrv7ozxlxjozd4itvve0a.png"></div><br><p> 结果，首先它将在调用<em>osMailAlloc</em>函数之前在地址<code>0x080057CA</code>处停止，然后在调用<em>osMailPut</em>函数之前在<code>0x08005806</code>处<code>0x08005806</code> ，然后在属于<em>leds_task_entry</em>函数（LED任务）（即LED任务）的地址<code>0x08005BD4</code>上<em>稍等片刻</em> 。有一个任务开关，现在控件已接收到LED任务。 </p><br><p><img src="https://habrastorage.org/webt/th/ni/zh/thnizhzqykfn20l9-btkuqhawlc.png" alt="图片"></p><br><p> 通过这种简单的方法，您可以确定RTOS任务之间如何交互。 </p><br><p> 当然，实际上，任务的交互可能会更加复杂，但是使用仿真器跟踪此交互的难度会降低。 </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里，</a>您可以观看模拟器启动以及与IDA Pro交互的简短视频。 </p><br><h2 id="zapusk-s-radare2"> 使用Radare2启动 </h2><br><p> 您不能忽略Radare2这样的通用工具。 </p><br><p> 要使用r2连接到仿真器，命令将如下所示： </p><br><pre> <code class="plaintext hljs">radare2 -A -a arm -b 16 -d gdb://localhost:23946 rhino_fw42k6.elf</code> </pre> <br><p> 现在可以启动（ <code>dc</code> ）和暂停执行（Ctrl + C）。 </p><br><p> 不幸的是，在r2中，使用硬件gdb服务器和内存标记时存在问题，因此，断点和步骤（ <code>ds</code>命令）不起作用。 我们希望这一问题将在不久的将来得到解决。 </p><br><h2 id="zapusk-s-eclipse"> 使用Eclipse启动 </h2><br><p> 使用仿真器的选项之一是调试正在开发的设备的固件。 为了清楚起见，我们还将使用Rhino固件。 您可以<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">从此处</a>下载固件源。 </p><br><p> 我们将使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">System Workbench for STM32</a>套件中的Eclipse作为IDE。 </p><br><p> 为了将在Eclipse中直接编译的固件加载到仿真器中，需要将<code>firmware=null</code>参数添加到仿真器启动命令中： </p><br><pre> <code class="plaintext hljs">bin\kopycat -g 23946 -n rhino -l user -y library -p firmware=null,tty_dbg=COM26,tty_bt=COM28</code> </pre> <br><h3 id="nastroyka-debug-konfiguracii"> 调试配置 </h3><br><p> 在Eclipse中，选择<em>Run-Debug Configurations ...</em>菜单在打开的窗口的<em>GDB Hardware Debugging</em>部分中，您需要添加一个新配置，然后在“ Main”选项卡上指定当前项目和应用程序进行调试： </p><br><img src="https://habrastorage.org/webt/f-/yk/eo/f-ykeob2i5vg25qbrz_egbqntou.png"><br><p> 在“调试器”选项卡上，您必须指定GDB命令： <br> <code>${openstm32_compiler_path}\arm-none-eabi-gdb</code> </p> <br><p> 并输入用于连接到GDB服务器的参数（主机和端口）： </p><br><img src="https://habrastorage.org/webt/ef/ud/fo/efudfommb7a9gkr4kcvp0vtnqfm.png"><br><p> 必须在“启动”选项卡上指定以下参数： </p><br><ul><li> 启用复选框“ <em>加载映像”</em> （以便将组装的固件映像加载到仿真器中）； </li><li> 启用选中标记<em>加载符号</em> ; </li><li> 添加一个启动命令： <code>set $pc = *0x08000004</code> （将内存中的值设置为PC寄存器中的地址<code>0x08000004</code>的地址存储在此处）。 </li></ul><br><p>  <strong>请注意</strong> ，如果您不想从Eclipse下载固件文件，则无需指定“ <em>加载映像”</em>和<em>“运行命令”</em>参数。 </p><br><img src="https://habrastorage.org/webt/w3/q8/2f/w3q82fvei4c91385rlcipmuiy_i.png"><br><p> 单击“调试”后，可以在调试模式下工作： </p><br><ul><li> 分步执行代码 <br><img src="https://habrastorage.org/webt/1h/6n/ax/1h6nax1gpgcdyrwakdmzzlu6_x8.png"></li><li> 与断点的交互 <br><img src="https://habrastorage.org/webt/4d/n1/5e/4dn15e4hzaukbif58ggwhy_wg18.png"></li></ul><br><p>  <strong><em>注意事项</em></strong>  <em>Eclipse具有……一些功能……您必须忍受它们。</em>  <em>例如，如果在启动调试器时出现消息“没有可用的源“ 0x0”，则运行步骤命令（F5）</em> </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ra/uz/ko/rauzko55hgnj1y_uapnqbz8ftrw.png"></div><br><h2 id="vmesto-zaklyucheniya"> 而不是结论 </h2><br><p> 模拟本地代码是一件非常有趣的事情。 对于设备开发人员而言，无需实际设备即可调试固件。 对于研究人员-进行动态代码分析的能力，即使使用设备也不总是可能的。 </p><br><p> 我们希望为专家提供一种工具，该工具将方便，适度简单并且无需花费太多精力和时间来配置和启动。 </p><br><p> 在评论中写下有关您使用硬件仿真器的经验。 我们邀请您进行讨论，并乐于回答问题。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN445798/">https://habr.com/ru/post/zh-CN445798/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN445786/index.html">Java中的密码学。 密钥库类</a></li>
<li><a href="../zh-CN445788/index.html">自己动手做云视频监控：Ivideon Web SDK的新功能</a></li>
<li><a href="../zh-CN445792/index.html">我们如何在开放的Embox项目中开发文档</a></li>
<li><a href="../zh-CN445794/index.html">IT巨头推出了混合混合云部署解决方案</a></li>
<li><a href="../zh-CN445796/index.html">Fintech Digest：Dorsey支付比特币，澳大利亚的区块链战略，Levi的IPO，芝加哥市长以及比特币的必然性</a></li>
<li><a href="../zh-CN445800/index.html">15分钟内完成单声道</a></li>
<li><a href="../zh-CN445802/index.html">互联网趋势是每个人都应了解的5件事</a></li>
<li><a href="../zh-CN445804/index.html">封装真正的武士，或与C＃中的内部关键字关联的细微差别</a></li>
<li><a href="../zh-CN445806/index.html">人工智能如何改变科学</a></li>
<li><a href="../zh-CN445808/index.html">我们讨厌和被猎杀：病毒破解者的危险生命正在制造强大的敌人</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>