<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåë ‚öñÔ∏è ü§æüèø Campos l√≥gicos nos bancos de dados, existe um ant√≠doto? üéì ‚òùüèæ üìí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Geralmente, as tabelas cont√™m um grande n√∫mero de campos l√≥gicos, n√£o h√° como indexar todos eles e a efic√°cia dessa indexa√ß√£o √© baixa. No entanto, par...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Campos l√≥gicos nos bancos de dados, existe um ant√≠doto?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483056/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gv/ls/ke/gvlskeckr84dlji3r0xb3pmnk1k.jpeg" width="500"></div><br>  Geralmente, as tabelas cont√™m um grande n√∫mero de campos l√≥gicos, n√£o h√° como indexar todos eles e a efic√°cia dessa indexa√ß√£o √© baixa.  No entanto, para trabalhar com express√µes l√≥gicas arbitr√°rias em SQL, √© adequado um mecanismo de indexa√ß√£o multidimensional, que ser√° discutido sob o gato. <br><a name="habracut"></a><br>  No SQL, os campos l√≥gicos s√£o usados ‚Äã‚Äãprincipalmente em dois casos.  Primeiro, quando voc√™ realmente precisa de um atributo bin√°rio, por exemplo, 'compra / venda' na tabela de transa√ß√µes.  Tais atributos raramente mudam com o tempo. <br><br>  Em segundo lugar, para registrar o estado da <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BD%25D0%25B5%25D1%2587%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25B0%25D0%25B2%25D1%2582%25D0%25BE%25D0%25BC%25D0%25B0%25D1%2582">m√°quina de estado</a> que descreve o registro.  Entende-se que um objeto l√≥gico correspondente a um registro de tabela passa por uma s√©rie de estados, cujo n√∫mero e as transi√ß√µes entre eles s√£o determinados pela l√≥gica aplicada.  Um exemplo simples √© a t√©cnica de "exclus√£o revers√≠vel", quando um registro n√£o √© destru√≠do fisicamente, mas apenas marcado como exclu√≠do. <br><br>  Se a m√°quina for complexa, pode haver uma quantidade razo√°vel desses campos; em uma de <a href="https://arqatech.com/ru/products/qort/">nossas</a> tabelas, existem 58 (+14 obsoletos) campos (incluindo conjuntos de sinalizadores) e isso n√£o √© algo fora do comum.  Isso n√£o foi planejado originalmente, mas √† medida que o produto se desenvolve e os requisitos externos mudam, as m√°quinas correspondentes se desenvolvem, os desenvolvedores v√£o e v√™m, os analistas mudam ... em algum momento, pode ser mais seguro obter uma nova flag, em vez de entender todos os meandros.  Al√©m disso, dados hist√≥ricos foram acumulados e suas condi√ß√µes devem permanecer adequadas. <br><br><div class="spoiler">  <b class="spoiler_title">offtopic</b> <div class="spoiler_text">  De certa forma, isso √© semelhante ao processo evolutivo, quando uma massa de informa√ß√µes / mecanismos √© armazenada no genoma que, √† primeira vista, n√£o √© necess√°ria, mas √© imposs√≠vel se livrar deles.  Por outro lado, vale a pena tratar esses mecanismos com respeito, porque foram eles que permitiram aos predecessores evolucion√°rios sobreviver (inclusive durante as <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2581%25D1%2581%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B5_%25D0%25B2%25D1%258B%25D0%25BC%25D0%25B8%25D1%2580%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">grandes extin√ß√µes</a> ) e vencer a corrida evolutiva.  Mais uma vez, quem sabe aonde a evolu√ß√£o nos levar√° e o que ser√° √∫til no futuro. <br></div></div><br>  Colocar um sinalizador significa n√£o apenas adicionar um campo do tipo correspondente, mas tamb√©m lev√°-lo em considera√ß√£o na opera√ß√£o do aut√¥mato, em quais estados ele afeta e em quais transi√ß√µes ele participa.  Na pr√°tica, fica assim: <br><br><ul><li>  um processo ou uma s√©rie de processos, vamos cham√°-los de "escritores", criar novos registros no estado inicial (possivelmente em um dos estados iniciais) </li><li>  v√°rios processos, vamos cham√°-los de "leitores", de tempos em tempos eles l√™em objetos que est√£o nos estados de que precisam </li><li>  Em v√°rios processos, vamos cham√°-los de "manipuladores", monitorar estados espec√≠ficos e, com base na l√≥gica aplicada, alterar esses estados.  I.e.  operar uma m√°quina de estado. </li></ul><br>  Para selecionar registros que est√£o em um estado espec√≠fico, √© raro quando a filtragem por um dos campos booleanos √© suficiente.  Geralmente, essa √© uma express√£o completa, √†s vezes n√£o trivial.  Parece que voc√™ precisa indexar esses campos e o processador SQL descobrir√° isso.  Mas n√£o √© t√£o simples. <br><br>  Em primeiro lugar, pode haver muitos campos booleanos; index√°-los todos seria um desperd√≠cio. <br><br>  Em segundo lugar, pode revelar-se in√∫til, pois  a seletividade para cada um dos campos ser√° baixa e a probabilidade conjunta n√£o √© coberta pelas estat√≠sticas do processador SQL. <br><br>  Suponha que na tabela T1 existam dois campos booleanos: F1 e F2 e a consulta <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">select</span></span> F1, F2, <span class="hljs-keyword"><span class="hljs-keyword">count</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> T1 <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> F1, F2</code> </pre> <br>  desiste <br><div class="scrollable-table"><table><tbody><tr><th>  F1 </th><th>  F2 </th><th>  COUNT </th></tr><tr><td>  falsa </td><td>  falsa </td><td align="center">  499 </td></tr><tr><td>  falsa </td><td>  verdade </td><td align="center">  1 </td></tr><tr><td>  verdade </td><td>  falsa </td><td align="center">  1 </td></tr><tr><td>  verdade </td><td>  verdade </td><td align="center">  499 </td></tr></tbody></table></div><br>  I.e.  embora, de acordo com F1 e F2, verdadeiro e falso sejam igualmente prov√°veis, a combina√ß√£o (verdadeiro, falso) cai apenas uma vez em mil.  Como resultado, se indexarmos F1 e F2 separadamente <u>e for√ß√°-los a serem usados ‚Äã‚Äãna consulta</u> , o processador SQL ter√° que ler metade dos dois √≠ndices e cruzar os resultados.  Pode ser mais barato ler a tabela inteira e calcular a express√£o para cada linha. <br><br>  E mesmo que voc√™ colete estat√≠sticas sobre solicita√ß√µes conclu√≠das, isso n√£o ser√° muito √∫til.  estat√≠sticas especificamente para os campos respons√°veis ‚Äã‚Äãpelo estado da m√°quina flutuam muito.  De fato, a qualquer momento um "manipulador" pode vir e transferir metade das linhas do estado S1 para S2. <br><br>  Para trabalhar com essas express√µes, sugere-se um √≠ndice multidimensional, cujo algoritmo foi <a href="https://habr.com/post/464057/">apresentado anteriormente</a> e mostrou-se bastante bom. <br><br>  Mas primeiro voc√™ precisa descobrir como uma express√£o l√≥gica arbitr√°ria se transformar√° em uma (s) consulta (s) para o √≠ndice. <br><br><h4>  Forma normal disjuntiva </h4><br>  Uma √∫nica consulta para um √≠ndice multidimensional √© um ret√¢ngulo multidimensional que limita o espa√ßo da consulta.  Se o campo participar da solicita√ß√£o, uma restri√ß√£o ser√° definida para ele.  Caso contr√°rio, o ret√¢ngulo nesta coordenada √© limitado apenas pela largura dessa coordenada.  As coordenadas l√≥gicas t√™m capacidade para 1. <br><br>  Uma consulta de pesquisa nesse √≠ndice √© uma cadeia de &amp; (conjun√ß√£o), por exemplo, a express√£o: v1 &amp; v2 &amp; v3 &amp; (! V4), equivalente a v1: [1,1], v2: [1,1], v3: [1, 1], v4: [0,0].  E todos os outros campos t√™m um intervalo: [0,1]. <br><br>  Diante disso, nosso olhar imediatamente se volta para o <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B8%25D0%25B7%25D1%258A%25D1%258E%25D0%25BD%25D0%25BA%25D1%2582%25D0%25B8%25D0%25B2%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25BD%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0">DNF</a> - uma das formas can√¥nicas de express√µes l√≥gicas.  Argumenta-se que qualquer express√£o pode ser representada como uma disjun√ß√£o das conjun√ß√µes liter√°rias.  Um literal aqui se refere a um campo l√≥gico ou a sua nega√ß√£o. <br><br>  Em outras palavras, atrav√©s de manipula√ß√µes simples, qualquer express√£o l√≥gica pode ser representada como uma disjun√ß√£o de v√°rias consultas para um √≠ndice l√≥gico multidimensional. <br><br>  H√° um MAS.  Essa transforma√ß√£o, em alguns casos, pode levar a um aumento exponencial no tamanho da express√£o.  Por exemplo, a convers√£o de <br><br><img src="https://habrastorage.org/webt/sn/fg/gd/snfggdwldqn3fggm4ymvhrfa_xa.png"><br><br>  leva a uma express√£o de 2 ** n termos.  Nesses casos, o desenvolvedor do aplicativo deve pensar no significado f√≠sico do que est√° fazendo e, por parte do processador SQL, voc√™ sempre pode recusar o uso do √≠ndice l√≥gico se o n√∫mero de conjun√ß√µes exceder os limites razo√°veis. <br><br><h4>  Algoritmo de indexa√ß√£o multidimensional </h4><br>  Para a indexa√ß√£o multidimensional, s√£o usadas as propriedades de uma curva de numera√ß√£o auto-semelhante baseada em simplex hiper-c√∫bico com o lado 2. Como <a href="https://habr.com/post/464057/">resultado</a> , duas vers√µes dessas curvas s√£o de import√¢ncia pr√°tica - a curva Z e a curva de Hilbert. <br><br><img src="https://habrastorage.org/webt/ij/pk/p2/ijpkp2sneivmayqaie38y91mylc.png" alt="imagem"><br>  <i>Figura 1 curva Z bidimensional, 3 e 6 itera√ß√µes</i> <br><br><img src="https://habrastorage.org/webt/bo/ar/oq/boaroq7scpwqyvargccwvv6i7li.png" alt="imagem"><br>  <i>Figura 2 Curva Hilbert bidimensional, 3 e 6 itera√ß√µes</i> <br><br><ul><li>  Um simplex N-dimensional com o lado 2 tem 2 ** n v√©rtices e (2 ** n-1) transi√ß√µes entre eles. </li><li>  Uma itera√ß√£o elementar de um simplex transforma cada v√©rtice de um simplex em um simplex de n√≠vel inferior. </li><li>  Depois de fazer o n√∫mero necess√°rio de itera√ß√µes, podemos construir uma estrutura hiper-c√∫bica de qualquer tamanho. </li><li>  Al√©m disso, cada n√≥ dessa rede ter√° seu pr√≥prio n√∫mero √∫nico - o caminho percorrido ao longo da curva de numera√ß√£o desde o in√≠cio.  Al√©m disso, cada n√≥ dessa rede possui um valor em cada uma das coordenadas.  De fato, a <u>curva de numera√ß√£o traduz o ponto multidimensional em um valor unidimensional adequado para indexa√ß√£o com uma √°rvore B regular</u> . </li><li>  Todos os n√≥s localizados dentro de um simplex de qualquer n√≠vel est√£o dentro do mesmo intervalo e esse intervalo n√£o se cruza com nenhum simplex do mesmo n√≠vel. </li><li>  Portanto, qualquer ret√¢ngulo de pesquisa (caixa) pode ser dividido em um pequeno n√∫mero de subconsultas hiper-c√∫bicas, em cada uma das quais o √≠ndice pode ser lido por uma pesquisa / deslocamento. <br></li><li>  Para isso, adicionamos a m√°gica do trabalho de baixo n√≠vel com a √°rvore B para n√£o fazer solicita√ß√µes in√∫teis e ... o algoritmo est√° pronto. </li></ul><br>  Veja como funciona na pr√°tica: <br><br><img src="https://habrastorage.org/webt/to/hc/pq/tohcpqixfqjdnwh_hhnqlx8lgio.png"><br>  <i>Figura 3 Exemplo de pesquisa no √≠ndice bidimensional (curva Z)</i> <br><br>  A Figura 3 mostra o particionamento da extens√£o de pesquisa original em subconsultas e os pontos encontrados.  Foi utilizado um √≠ndice bidimensional, constru√≠do em um conjunto aleat√≥rio e uniformemente distribu√≠do de 100.000.000 pontos de extens√£o [1.000.000, 1.000.000]. <br><br><h4>  √çndice multidimensional l√≥gico </h4><br>  Como estamos falando de indexa√ß√£o multidimensional, √© hora de pensar em quanto pode ser multidimensional?  Existem limita√ß√µes objetivas? <br><br>  Obviamente, como a √°rvore B possui uma organiza√ß√£o da p√°gina e, para ser uma √°rvore, pelo menos dois elementos devem ser garantidos para caber na p√°gina.  Se voc√™ escolher a p√°gina por 8K, o armazenamento de um item n√£o poder√° ultrapassar 4K.  Em 4K, sem compacta√ß√£o, s√£o adequados cerca de 1000 valores de 32 bits.  Isso √© bastante, al√©m dos limites de qualquer aplica√ß√£o razo√°vel, podemos dizer que os limites f√≠sicos praticamente n√£o est√£o dispon√≠veis. <br><br>  H√° um outro lado, cada dimens√£o adicional n√£o √© de forma alguma livre, ocupa espa√ßo em disco e torna o trabalho mais lento.  Do ponto de vista do "significado f√≠sico", os campos que mudam ao mesmo tempo devem ser inclu√≠dos no mesmo √≠ndice e a busca por eles tamb√©m caminha junto.  N√£o faz sentido indexar tudo em uma linha. <br><br>  Os campos l√≥gicos s√£o diferentes.  Como vimos, dezenas de campos l√≥gicos podem estar envolvidos nos mesmos mecanismos.  E os custos de armazenamento / leitura s√£o bastante pequenos.  H√° uma tenta√ß√£o de coletar todos os campos l√≥gicos em um √≠ndice e ver o que acontece. <br><br>  √â verdade que existem nuances: <br><br><ul><li>  At√© agora, no valor indexado, os d√≠gitos das diferentes coordenadas eram misturados, nos d√≠gitos menos significativos da chave havia os bits menos significativos das coordenadas ... Portanto, a ordem dos campos durante a indexa√ß√£o n√£o importava. </li><li>  Agora, um bit √© gasto no armazenamento do valor de um campo l√≥gico.  I.e.  alguns campos l√≥gicos v√£o para o final da chave e outros para o come√ßo.  Isso significa que a filtragem por parte dos campos ser√° muito eficaz e, para alguns, ser√° muito ineficiente.  De fato, se fizermos uma pesquisa na ordem mais baixa, teremos que ler o √≠ndice inteiro para obter uma resposta.  Mas isso (provavelmente) √© melhor do que ler a tabela inteira para responder √† mesma pergunta. </li><li>  H√° um problema de escolha - todos os campos l√≥gicos s√£o iguais, mas alguns ser√£o mais iguais que outros.  De considera√ß√µes gerais, √© necess√°rio observar as distor√ß√µes das estat√≠sticas, quanto mais forte a raz√£o verdadeiro / falso para um campo espec√≠fico estiver distante do equil√≠brio, mais antiga ser√° a descarga em que seu valor ser√°. </li><li>  O particionamento pelo tipo da curva de numera√ß√£o desaparece; se antes era necess√°rio escolher entre a curva Z e a curva de Hilbert, n√£o h√° diferen√ßa pr√°tica nos dados de bit √∫nico. </li><li>  NULLs.  Com base no fato de NULL n√£o ser um valor desconhecido, mas na aus√™ncia de qualquer valor, esses registros n√£o devem ser inclu√≠dos no √≠ndice.  Nos √≠ndices unidimensionais, √© isso que acontece.  Mas, no nosso caso, pode acontecer que alguns dos campos l√≥gicos contenham valores, e outros n√£o.  Como resultado, n√£o podemos colocar isso no √≠ndice, pois  o algoritmo de pesquisa n√£o sabe como trabalhar com l√≥gica tern√°ria.  E, portanto, esses registros devem ser imposs√≠veis de serem inseridos na tabela (se houver um √≠ndice multidimensional, n√£o necessariamente l√≥gico). </li></ul><br>  Espera-se que um √≠ndice multidimensional l√≥gico possa, em alguns casos, n√£o funcionar com muita efici√™ncia.  A rigor, qualquer √≠ndice pode funcionar ineficientemente se houver muitos dados na √°rea de pesquisa.  Mas, para um √≠ndice l√≥gico multidimensional, isso √© composto pela depend√™ncia da ordem dos campos descrita acima, quando, por causa de um pequeno resultado, √© necess√°rio ler o √≠ndice inteiro.  Na medida em que isso √© um problema na pr√°tica, apenas o experimento pode mostrar. <br><br><h4>  Experi√™ncia num√©rica </h4><br>  Construindo um √≠ndice: <br><br><ul><li>  o √≠ndice ser√° de 128 bits, ou seja,  constru√≠do em 128 campos l√≥gicos </li><li>  e conter√° 2 ** 30 elementos </li><li>  o valor do elemento de √≠ndice ser√° um n√∫mero de 0 a 2 ** 30 </li><li>  a chave do elemento de √≠ndice ser√° o mesmo n√∫mero deslocado 48 bits para a esquerda, ou seja,  os campos l√≥gicos 48 a 78 ser√£o preenchidos com os d√≠gitos do n√∫mero na mesma ordem </li><li>  como resultado, obtemos 30 campos l√≥gicos significativos no meio da chave, os bits restantes ser√£o preenchidos 0 <br></li><li>  Cada um dos campos booleanos possui estat√≠sticas iguais verdadeiras / falsas </li><li>  Todos s√£o estatisticamente independentes. </li></ul><br>  Pesquisa: <br><br><ul><li>  Cada experimento corresponde √† sele√ß√£o de v√°rios campos l√≥gicos consecutivos e √† atribui√ß√£o de valores de pesquisa para eles.  N√£o porque o algoritmo possa pesquisar apenas em faixas, mas porque √© poss√≠vel visualizar os resultados do experimento com mais clareza, temos apenas duas dimens√µes - a largura da faixa e sua posi√ß√£o </li><li>  Um total de 24 s√©ries de experimentos.  Em cada s√©rie, procuraremos valores em que a faixa de campos l√≥gicos da largura correspondente N (de 1 a 24 bits) leva o valor verdadeiro. </li><li>  Em cada s√©rie, haver√° uma sub-s√©rie de experimentos em que uma faixa de campos l√≥gicos de uma largura selecionada est√° localizada com diferentes turnos S desde o in√≠cio da faixa em 30 campos l√≥gicos significativos.  Total de experimentos (30-N) nas sub-s√©ries. </li><li>  Em cada experimento, √© feita uma pesquisa por todos os elementos do √≠ndice que satisfazem a condi√ß√£o, ou seja,  campos com n√∫meros no intervalo [48 + S, 48 + S + N -1] ser√£o pesquisados ‚Äã‚Äãno intervalo [1,1], o restante no intervalo [0,1] <br></li><li>  A pesquisa √© feita desde o in√≠cio a frio </li><li>  O resultado √© o n√∫mero de p√°ginas de disco lidas, incluindo o cache (cache de 4096 p√°ginas) </li><li>  O controle da opera√ß√£o correta √© feito de duas maneiras - o n√∫mero de elementos encontrados deve ser igual a 2 ** (30-N) e nos valores encontrados, voc√™ pode verificar os d√≠gitos correspondentes <br></li></ul><br>  Ent√£o <br><br><img src="https://habrastorage.org/webt/1p/5a/bn/1p5abn4kb0b6myjlusbnoen308w.png"><br>  <i>Figura 4 Resultados, o n√∫mero de p√°ginas lidas em diferentes s√©ries</i> <br><br>  Por Y - o n√∫mero de p√°ginas lidas √© adiado. <br>  Em X - turno de tiras da categoria mais jovem (48) para a mais velha.  Listras de larguras diferentes s√£o assinadas e marcadas em cores diferentes. <br><br><img src="https://habrastorage.org/webt/lf/t0/7x/lft07xucczbi19oxdskdrvzb-ia.png"><br>  <i>Figura 5 Os mesmos dados da Figura 4, outra visualiza√ß√£o</i> <br><br>  Mudan√ßa de banda X <br>  Y - largura de banda <br><br>  O que deve ser observado: <br><br><ul><li>  embora isso n√£o seja diretamente vis√≠vel nas imagens, o √≠ndice funciona corretamente, mas √© vis√≠vel no n√∫mero de elementos encontrados e no conte√∫do dos elementos </li><li>  todas as faixas com largura n√£o superior a 10 e com desvio de 0 requerem leitura cont√≠nua do √≠ndice </li><li>  listras com uma largura de 1 a 18 com um aumento no deslocamento atingem a ass√≠ntota 2 ** (- N) do tamanho de todo o √≠ndice, o que √© l√≥gico </li><li>  para bandas mais largas da ass√≠ntota - a altura da √°rvore, n√£o pode haver menos leituras </li><li>  um pouco mais de 1000 elementos s√£o colocados na p√°gina da folha de √≠ndice, isso pode ser visto em uma faixa de largura 10, que quando o deslocamento 0 n√£o exige mais a leitura de todo o √≠ndice, algumas p√°ginas podem ser ignoradas </li><li>  a filtragem de baixo n√≠vel funciona surpreendentemente bem.  Considere uma faixa com uma largura de 10. Uma op√ß√£o ideal de pesquisa √© com um turno de 20 (um total de 30 campos significativos), quando n√£o h√° campos indefinidos no prefixo, os dados podem ser encontrados com um √∫nico feixe.  Nessa situa√ß√£o, aproximadamente 1/1000 do √≠ndice √© lido durante a pesquisa - 779 p√°ginas. <br>  O caso intermedi√°rio √© um turno de 10, temos um prefixo e um sufixo de 10 campos desconhecidos.  O n√∫mero de p√°ginas √© 2484, apenas tr√™s vezes pior do que no caso ideal. <br>  E mesmo no pior dos casos, com um deslocamento de 0 (um prefixo de 20 campos desconhecidos), voc√™ pode pular algumas p√°ginas. </li></ul><br>  No geral, o algoritmo de indexa√ß√£o multidimensional pode ser reconhecido como eficiente, mesmo em um caso t√£o absurdo.  <u>Mas a op√ß√£o mais malsucedida do ponto de vista do √≠ndice l√≥gico √© considerada - estados equiprob√°veis ‚Äã‚Äãem todos os campos l√≥gicos independentes.</u> <br><br><h4>  Experimente dados reais </h4><br>  Tabela de <i>negocia√ß√µes</i> , total de 278.479.918 linhas, dados de um dos loops de teste. <br>  Os resultados de algumas consultas na tabela abaixo: <br><br><div class="scrollable-table"><table><tbody><tr><th>  N </th><th>  Pedido </th><th>  O n√∫mero de linhas como resultado </th><th>  Ler p√°ginas </th></tr><tr><td>  1 </td><td align="right">  IsProcessed == 0 &amp;&amp; NullStatus == 0 </td><td align="right">  6.273 </td><td align="right">  9 </td></tr><tr><td>  2 </td><td align="right">  IsProcessed == 0 &amp;&amp; NullStatus == 0 &amp;&amp; IsCoverage == 0 </td><td align="right">  6.273 </td><td align="right">  9 </td></tr><tr><td>  3 </td><td align="right">  IsCoverage == 1 &amp;&amp; QF_ICEBERG == 1 </td><td align="right">  1 388 128 </td><td align="right">  386 </td></tr><tr><td>  4 </td><td align="right">  PutStatus == 1 &amp;&amp; PayStatus == 0 </td><td align="right">  61 788 376 </td><td align="right">  16.486 </td></tr><tr><td>  5 </td><td align="right">  IsProcessed == 1 &amp;&amp; NullStatus == 0 &amp;&amp; <br>  QF_CURR_PFI == 0 &amp;&amp; QF_TERMINATION == 0 </td><td align="right">  278 473 645 </td><td align="right">  74.285 </td></tr><tr><td>  6 </td><td align="right">  IsProcessed == 1 &amp;&amp; PutStatus == 0 &amp;&amp; <br>  IsCoverage == 1 <br></td><td align="right">  1 650 240 </td><td align="right">  447 </td></tr><tr><td>  7 </td><td align="right">  QF_UNK3 == 0 &amp;&amp; QF_UNK4 == 0 </td><td align="right">  23.392 </td><td align="right">  19 </td></tr></tbody></table></div><br>  A leitura / processamento de uma √∫nica p√°gina leva em m√©dia 0,8 ms. <br><br>  N√£o h√° necessidade de descrever o significado de consultas espec√≠ficas, elas est√£o aqui apenas para demonstrar operacionalidade.  O que, a prop√≥sito, est√° confirmado. <br><br>  Mas antes que essa t√©cnica possa ser √∫til, muito resta a ser feito.  Ent√£o, para continuar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt483056/">https://habr.com/ru/post/pt483056/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt483042/index.html">9 dicas de desempenho do Vue</a></li>
<li><a href="../pt483048/index.html">Divers√£o no terminal: 10 piadas cl√°ssicas do console</a></li>
<li><a href="../pt483050/index.html">As 5 principais empresas de desenvolvimento do ReactJS</a></li>
<li><a href="../pt483052/index.html">Pir√¢mide em vez de uma esfera: agrupamento n√£o-padr√£o de √°tomos de ouro</a></li>
<li><a href="../pt483054/index.html">‚ÄúN√£o haver√° massacre‚Äù - a hist√≥ria da tradu√ß√£o de The Worm</a></li>
<li><a href="../pt483058/index.html">Resultados da Pesquisa de F√©rias</a></li>
<li><a href="../pt483064/index.html">Vue para o menor blog aka pequeno em todos os c√¢nones</a></li>
<li><a href="../pt483066/index.html">Os 5 livros tradicionais de Bill Gates</a></li>
<li><a href="../pt483068/index.html">Engenharia reversa do popular BattlEye anti-fraude</a></li>
<li><a href="../pt483074/index.html">TensorRT 6.xxx - infer√™ncia de alto desempenho para modelos de aprendizado profundo (detec√ß√£o e segmenta√ß√£o de objetos)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>