<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèñÔ∏è üëÇüèº ‚§µÔ∏è Implementaci√≥n integrada de Windows y Linux üëçüèø üë©üèæ‚ÄçüöÄ ‚öìÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este art√≠culo describe c√≥mo implementar r√°pidamente un sistema integrado basado en Windows 10 y Debian Linux. Se dan ejemplos de construcci√≥n de una i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Implementaci√≥n integrada de Windows y Linux</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434086/">  Este art√≠culo describe c√≥mo implementar r√°pidamente un sistema integrado basado en Windows 10 y Debian Linux.  Se dan ejemplos de construcci√≥n de una interfaz segura. <br><a name="habracut"></a><br><h1>  Introduccion </h1><br><p>  En el proceso de desarrollo de dispositivos que tienen una interfaz gr√°fica hombre-m√°quina, tarde o temprano surge la tarea no solo de crear la interfaz en s√≠, sino tambi√©n de elegir la plataforma en la que deber√≠a funcionar.  Dicha plataforma puede ser una computadora de placa √∫nica con un sistema operativo, o un microcontrolador con una pantalla y un conjunto de bibliotecas relevantes, o alguna otra soluci√≥n original. </p><br><p>  A menudo sucede que en el nivel superior del sistema de control en el que se ejecuta la interfaz, tambi√©n se realizan tareas de comunicaci√≥n con el mundo exterior y la interacci√≥n con una amplia gama de dispositivos perif√©ricos.  Adem√°s, la interfaz en s√≠ puede ser bastante exigente con los recursos gr√°ficos.  Dado esto, y para ahorrar costos de mano de obra, es posible tomar una computadora de placa √∫nica como base e instalar un sistema operativo listo para usar.  El desarrollo de software en este caso puede simplificarse enormemente mediante el uso de marcos modernos con buena documentaci√≥n y un conjunto de ejemplos. </p><br><h2>  Requerimientos de interfaz </h2><br><p>  Desde el punto de vista del usuario, la interfaz debe cumplir los siguientes requisitos: </p><br><ul><li>  Al cargar en pantalla completa, deber√≠a aparecer una aplicaci√≥n, es la misma interfaz, es el mismo shell gr√°fico; </li><li>  Aparte de esta aplicaci√≥n, nada m√°s deber√≠a estar disponible para el usuario; </li><li>  La aplicaci√≥n deber√≠a funcionar todo el tiempo, el sistema no deber√≠a quedarse dormido, la pantalla no deber√≠a apagarse; </li><li>  Todos los atajos de teclado, ayudantes, funciones de accesibilidad y otras funciones similares deben desactivarse; </li><li>  En caso de falla de la aplicaci√≥n, el sistema deber√≠a reiniciarla autom√°ticamente; </li><li>  El sistema no tiene requisitos especiales para la velocidad o los modos en tiempo real, sin embargo, es necesario que la interfaz responda a los comandos del usuario sin demoras notables; </li><li>  El sistema debe ser resistente a reinicios duros repetidos, no deber√≠a ser necesario ejecutar un script especial para completar el trabajo; </li><li>  Deber√≠a ser posible clonar r√°pidamente el ensamblaje terminado en una serie de dispositivos con todas las configuraciones necesarias realizadas en modo autom√°tico. </li></ul><br><p>  En otras palabras, una limitaci√≥n completa de las acciones del usuario, la estabilidad y la escalabilidad. </p><br><p>  En cuanto al sistema operativo para una computadora de placa √∫nica, consideraremos inmediatamente dos opciones, una basada en Windows, la otra basada en Linux, y las compararemos entre s√≠. </p><br><p>  Por ejemplo, creemos una interfaz de quiosco de pantalla t√°ctil.  Y como aplicaci√≥n, tomemos uno de los ejemplos de capacitaci√≥n de Qt Quick e implem√©ntelo con algunos cambios.  El marco Qt est√° disponible para ambos sistemas operativos. </p><br><p>  Para no profundizar en los matices de instalar Windows y Linux en una plataforma ARM, el sistema se puede ensamblar f√°cilmente sobre la base de alg√∫n procesador compatible con x86.  En este caso, una de las muchas placas disponibles en la plataforma Intel Bay Trail se utiliz√≥ para experimentos. </p><br><p>  Un paquete de todos los programas y scripts est√° disponible en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub</a> . </p><br><h1>  Ruta de Windows </h1><br><p>  En un momento, se introdujo Windows Embedded de Microsoft para crear sistemas integrados.  Incluso en la primera versi√≥n de Windows Embedded XP, los desarrolladores recibieron un conjunto de herramientas para ensamblar los controladores m√°s truncados, pero equipados con los controladores de imagen necesarios.  Estos ensambles requer√≠an un m√≠nimo de RAM y funcionaban bien incluso en procesadores d√©biles.  La tecnolog√≠a fue desarrollada en la versi√≥n de Windows Embedded Standard 7, donde se me record√≥ el proceso de crear sus propios ensamblajes.  Windows Embedded utiliz√≥ la ideolog√≠a de un cat√°logo abierto de m√≥dulos, y cualquiera pod√≠a equipar su sistema con solo el conjunto de componentes necesarios.  La √∫ltima versi√≥n en la que estaba disponible este enfoque, aunque en forma truncada, es Windows Embedded Standard 8.1. </p><br><p>  Windows 10 IoT moderno se posiciona como una alternativa a Windows Embedded, pero es muy diferente de sus predecesores.  Un cat√°logo de componentes abierto ya no est√° disponible.  La capacidad de recopilar im√°genes claras del dise√±ador y hacer sus propios discos de instalaci√≥n de ellas ha desaparecido.  Las opciones especiales de un sistema integrado, como un filtro de grabaci√≥n, la marca del gestor de arranque, un filtro de teclado, etc., ahora se configuran en un sistema preinstalado.  Adem√°s, el soporte para estas funciones est√° disponible solo como parte de la versi√≥n pesada de Windows 10 Enterprise. </p><br><p>  Sin embargo, a pesar de los altos requisitos del sistema, especialmente a la cantidad de RAM, el uso de incluso versiones pesadas en soluciones integradas no causa ning√∫n problema especial, principalmente debido a la disponibilidad de componentes de hardware.  Adem√°s, no olvide que en los √∫ltimos a√±os se ha vuelto m√°s dif√≠cil comprar una licencia para productos antiguos de Microsoft. </p><br><h2>  Arreglo r√°pido </h2><br><p>  Tras el primer examen, resulta que incluso en Windows 10 ordinario ya hay una funci√≥n incorporada de "Acceso asignado" (Fig. 1), que parece una soluci√≥n lista para la tarea. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/t6/14/yr/t614yroc8ueu_rkh1t7srjo0cnu.png" alt="Acceso asignado"></div><p>  <i>Fig.</i>  <i>1. Funci√≥n de acceso asignada</i> </p><br><p>  Un programa que se puede utilizar como interfaz en este caso debe desarrollarse inicialmente como una aplicaci√≥n de la Plataforma universal de Windows.  Estas <i>aplicaciones appx</i> se instalan, por ejemplo, en un Windows Phone.  Una aplicaci√≥n simple de pantalla completa, por supuesto, puede convertirse a <i>appx</i> y firmarse con los certificados necesarios, y luego instalarse.  Puede funcionar como una interfaz, pero sin la protecci√≥n adecuada.  Desafortunadamente, en el modo normal de "Acceso asignado", el usuario todav√≠a tiene acceso abierto a algunas configuraciones del sistema y teclas de acceso r√°pido.  Como resultado, no se puede obtener una interfaz que cumpla con todos los requisitos anteriores utilizando este enfoque.  El sistema debe configurarse manualmente, de una manera diferente. </p><br><h2>  Decisi√≥n correcta </h2><br><h3>  1. Instalaci√≥n inicial </h3><br><p>  Entonces, antes que nada, necesitamos la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">distribuci√≥n de Windows 10 Enterprise LTSB</a> .  Puede tomar la imagen original de Microsoft, puede usar una ligera, o hacer la suya usando herramientas de terceros.  Para la placa experimental, se seleccion√≥ uno de los ensamblajes ya preparados (versi√≥n ligera de 32 bits). </p><br><p>  Instalamos el sistema desde el kit de distribuci√≥n en el tablero de destino.  Al instalar, dividimos el disco en dos secciones, C: - para el sistema, D: - para la aplicaci√≥n principal, utilidades y registros.  Tal desglose es √∫til en el futuro para el filtro de grabaci√≥n.  Despu√©s de la instalaci√≥n, esperamos hasta que aparezca el men√∫ de configuraci√≥n, o no continuamos el men√∫ con la configuraci√≥n de red. </p><br><p>  Reiniciamos en el modo de servicio a trav√©s de Ctrl + Shift + F3. </p><br><p>  Si no hubo errores durante el proceso de instalaci√≥n, luego de reiniciar, el sistema entrar√° en la cuenta de servicio del administrador y <i>aparecer√° la</i> ventana <i>SysPrep</i> en la pantalla (Fig. 2).  Debe estar cerrado, <i>iniciaremos SysPrep de manera</i> diferente, utilizando un archivo de respuesta especial que a√∫n no se ha creado. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/kw/xn/3y/kwxn3yxs3totane-ogcok3z9bto.png" alt="Ventana sysprep"></div><p>  <i>Fig.</i>  <i>2. Modo de servicio.</i> </p><br><h3>  2. Configuraci√≥n del sistema </h3><br><p>  Para otras acciones, necesitar√° las herramientas de <a href="">implementaci√≥n del Kit de evaluaci√≥n e implementaci√≥n de Windows 10</a> . </p><br><p>  Desde el disco con la distribuci√≥n de Windows instalada en la placa, debe extraer el <i>archivo de</i> imagen <i>install.wim</i> .  Sucede que en algunos ensamblajes este archivo puede almacenarse en forma comprimida con la extensi√≥n <i>esd</i> .  En este caso, primero debes descomprimirlo.  La utilidad <i>dism</i> se utiliza para esto. </p><br><p>  Descubra el n√∫mero de serie de la versi√≥n deseada dentro del contenedor (SourceIndex). </p><br><pre><code class="plaintext hljs">dism /Get-WimInfo /WimFile:install.esd</code> </pre> <br><p>  Luego, extraiga el archivo de imagen (en este caso, el primero en el contenedor). </p><br><pre> <code class="plaintext hljs">dism /export-image /SourceImageFile:install.esd /SourceIndex:1 /DestinationImageFile:install.wim /Compress:max /CheckIntegrity</code> </pre> <br><p>  Ahora debe abrir la imagen en el Administrador de im√°genes del sistema de Windows (desde las Herramientas de implementaci√≥n) y generar un directorio. </p><br><p>  Cabe se√±alar que trabajar con im√°genes en Windows System Image Manager solo es posible si la profundidad de bits de la imagen coincide con la profundidad de bits del host.  Es decir, es imposible editar la imagen de la versi√≥n de 32 bits en un sistema de 64 bits.  Aqu√≠, como dicen, sin comentarios. </p><br><p>  Cuando se crea el directorio, edite el archivo de respuesta para la utilidad <i>SysPrep</i> .  Ingrese la informaci√≥n del propietario, agregue los usuarios necesarios y configure el primer inicio de sesi√≥n autom√°tico (Fig. 3). </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ch/fn/4f/chfn4fan0jtazdofcrskqz6dakc.png" alt="Archivo de respuestas"></div><p>  <i>Fig.</i>  <i>3. Crear un archivo de respuesta.</i> </p><br><p>  No tiene sentido enumerar todos los par√°metros; el contenido del archivo de respuesta se puede encontrar en el repositorio.  Lo principal es no olvidar establecer los par√°metros de <i>CopyProfile</i> en <i>true</i> , <i>SkipReam</i> a <i>1</i> y habilitar el <i>inicio de sesi√≥n autom√°tico del</i> administrador.  Puede ingresar su clave de producto en la secci√≥n <i>4 specialize - Microsoft-Windows-Shell-Setup - ProductKey</i> . </p><br><h3>  3. Instalar programas </h3><br><p>  A continuaci√≥n, necesita el <i>archivo de</i> imagen <i>install.wim</i> real, por lo que debe colocarlo junto al archivo de respuesta <i>personalizar.xml</i> , en el que, despu√©s de guardar, debe reemplazar manualmente la ruta a la imagen.  Al final del archivo, la l√≠nea deber√≠a verse as√≠: </p><br><pre> <code class="plaintext hljs">&lt;cpi:offlineImage cpi:source="wim:d:/service/install.wim#Windows 10 Enterprise LTSB" xmlns:cpi="urn:schemas-microsoft-com:cpi" /&gt;</code> </pre> <br><p>  Para obtener la interfaz de demostraci√≥n de KioskShell, debe crear una versi√≥n para Windows desde el origen.  Los consejos de ensamblaje est√°n en el repositorio. </p><br><p>  Copiamos los archivos a la pizarra y obtenemos la siguiente estructura de archivos y directorios: </p><br><pre> <code class="plaintext hljs">C:\ ‚îî‚îÄ‚îÄ Design\ ‚îú‚îÄ‚îÄ backgroundDefault.jpg -      ( ) ‚îî‚îÄ‚îÄ oemlogo.bmp -  ,      D:\ ‚îú‚îÄ‚îÄ Logs\ -       ‚îú‚îÄ‚îÄ Service\ ‚îÇ ‚îú‚îÄ‚îÄ AfterSetup.bat -   ,     SysPrep ‚îÇ ‚îú‚îÄ‚îÄ FirstLogon.bat -        ‚îÇ ‚îú‚îÄ‚îÄ customize.xml -   ‚îÇ ‚îú‚îÄ‚îÄ install.wim -   ‚îÇ ‚îú‚îÄ‚îÄ CustomShellSetup.ps1 -  PowerShell     ‚îÇ ‚îú‚îÄ‚îÄ EnableRules.ps1 -  PowerShell     ‚îÇ ‚îú‚îÄ‚îÄ DisableAllRules.ps1 -      ( ) ‚îÇ ‚îî‚îÄ‚îÄ UserLogon.bat -      ( ) ‚îî‚îÄ‚îÄ Shell\ -     "KioskShell.exe"   </code> </pre> <br><h3>  4. Configuraci√≥n manual del sistema </h3><br><p>  Cuando el sistema est√° en modo de servicio, puede reiniciar tantas veces como lo desee, el sistema volver√° a √©l autom√°ticamente.  Sin embargo, con un tiempo de inactividad prolongado antes de configurar la alimentaci√≥n, la pantalla puede bloquearse y no volver a entrar, solo un reinicio ayudar√°.  Como cada proyecto espec√≠fico puede tener sus propias caracter√≠sticas de configuraci√≥n, es mejor hacerlo manualmente, pero tambi√©n puede usar scripts de automatizaci√≥n. </p><br><p>  Instalamos los componentes necesarios del sistema incorporado y deshabilitamos el control de la cuenta de usuario (consulte <i>AfterSetup.bat</i> desde el repositorio) </p><br><p>  Instale todos los controladores, configure el hardware (tarjeta de red IP, resoluci√≥n y orientaci√≥n de la pantalla, puertos de dispositivos externos, etc.), desactive las teclas fijas y todas las funciones especiales. </p><br><p>  Como en el futuro me gustar√≠a poder administrar de forma remota, habilitaremos el acceso a trav√©s de RDP.  La contrase√±a del administrador caducar√° en la etapa de configuraci√≥n autom√°tica. </p><br><p>  A continuaci√≥n, debe deshabilitar la actualizaci√≥n del sistema en el <i>Editor de directivas de grupo local</i> (en la secci√≥n <i>Configuraci√≥n</i> del <i>equipo - Plantillas administrativas - Componentes de Windows - Actualizaci√≥n de Windows</i> , debe <i>configurar Actualizaciones autom√°ticas configuradas</i> como <i>Deshabilitado</i> ).  Adem√°s, tambi√©n debe desactivar la exploraci√≥n autom√°tica de Windows Update (en el programador de tareas en la secci√≥n <i>Microsoft - Windows - UpdateOrchestrator</i> , debe deshabilitar todas las tareas), de lo contrario, aparecer√° una ventana negra cada vez que inicie, y cuando se conecte a Internet, Windows puede comenzar a actualizarse repentinamente. </p><br><p>  Luego, configure los ajustes de energ√≠a.  Para hacer esto, primero debe hacer visibles todas las configuraciones de energ√≠a en la secci√≥n <i>Configuraci√≥n avanzada de energ√≠a</i> (para esto, en el registro en cada subclave en <i>HKEY_LOCAL_MACHINE \ SYSTEM \ CurrentControlSet \ Control \ Power \ PowerSettings \ 238C9FA8-0AAD-41ED-83F4-97BE242C8F20,</i> si tiene el par√°metro <i>Atributos</i> , debe asignar el <i>atributo</i> valor para √©l <i>2</i> ).  Ahora que todas las configuraciones est√°n disponibles, apague el modo de suspensi√≥n, el modo de ausencia, elimine la acci√≥n del bot√≥n de encendido (a menos que, por supuesto, necesite lo contrario) y apague el temporizador de autorizaci√≥n cuando est√© inactivo.  A continuaci√≥n, eliminamos el modo de espera con la conexi√≥n (en la <i>secci√≥n</i> <i>HKEY_LOCAL_MACHINE \ SYSTEM \ CurrentControlSet \ Control \ Power</i> <i>,</i> establezca el par√°metro <i>CsEnabled</i> en <i>0</i> ).  Si es necesario, apague el control de brillo adaptativo de la pantalla. </p><br><p>  Cuando se completan todas las configuraciones del sistema, tenemos la √∫ltima oportunidad de realizar cambios, ya que la segunda ejecuci√≥n del script <i>AfterSetup.bat</i> iniciar√° el mecanismo de configuraci√≥n autom√°tica usando <i>SysPrep</i> , que no se puede detener.  A√∫n debe recordar activar el sistema (se propone familiarizarse con las opciones para activar las versiones corporativas de Windows usted mismo).  Incluso en esta etapa, puede hacer una copia de seguridad de todo el disco y corregir el estado preliminar de la imagen en caso de cualquier cambio en el futuro. </p><br><p>  Al final del trabajo, <i>SysPrep</i> no se reiniciar√°, sino que apagar√° la computadora; en este punto, ya puede crear una imagen de trabajo, lista para portar a una serie. </p><br><h3>  5. Configuraci√≥n final autom√°tica del sistema </h3><br><p>  Despu√©s de la primera carga de la imagen de trabajo (consulte <i>FirstLogon.bat</i> desde el repositorio), se configurar√° la interfaz segura, el inicio de sesi√≥n autom√°tico se volver√° a configurar en la cuenta de <i>Usuario</i> y se deshabilitar√°n los m√©todos abreviados de teclado que pueden da√±ar el sistema.  A continuaci√≥n, el Filtro de escritura unificado se configurar√° y activar√°.  En este caso, el filtro est√° configurado para proteger todas las particiones, excepto las carpetas <i>Servicio</i> y <i>Registros</i> , y utiliza un intercambio de 256 MB.  El sistema se reiniciar√° varias veces y, si todo se hace correctamente, en el pr√≥ximo inicio aparecer√° una interfaz segura, que se iniciar√° en nombre de la cuenta de <i>usuario</i> . </p><br><p>  Para reparar el sistema en el sitio, es posible ir a la pantalla de inicio de sesi√≥n y, por ejemplo, iniciar sesi√≥n en la cuenta de administrador.  En Windows 10, se proporciona un m√©todo est√°ndar para esto, debe presionar la tecla "Win" 5 veces seguidas. </p><br><h1>  Ruta de Linux </h1><br><p>  No existe una √∫nica forma est√°ndar de crear sistemas integrados con una interfaz gr√°fica basada en Linux.  Como no existe una distribuci√≥n com√∫n √∫nica, de todos modos, esta es una familia de sistemas que se crea con principios completamente diferentes.  El tema m√°s cercano puede parecer el proyecto Yocto Linux.  Sin embargo, es bastante dif√≠cil recopilar im√°genes llenas de aplicaciones, controladores y bibliotecas de terceros.  Para resolver este problema, es m√°s f√°cil tomar una distribuci√≥n preparada y bien soportada y configurarla manualmente. </p><br><h2>  Soluci√≥n simple </h2><br><h3>  1. Instalaci√≥n inicial </h3><br><p>  Entonces, antes que nada, necesitamos la distribuci√≥n en s√≠, por ejemplo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Debian</a> .  Puedes tomar otro, puedes hacer el tuyo.  Lo principal es que la distribuci√≥n no tiene un sistema de actualizaci√≥n autom√°tica.  Para la placa experimental, se eligi√≥ Debian Linux 9 (versi√≥n de 64 bits, kernel 4.9). </p><br><p>  Instalamos el sistema de la manera tradicional.  Al instalar, dividimos el disco en dos secciones, sda1 - <i>/</i> para el sistema, sda2 - <i>/ var / log</i> para el sistema y los registros de software.  Tal desglose es √∫til en el futuro para el filtro de grabaci√≥n.  Instale la <i>GUI xfce</i> est√°ndar y el servidor <i>ssh</i> .  Agregamos <i>administrador</i> durante la instalaci√≥n del usuario y establecemos la contrase√±a. </p><br><p>  Despu√©s de la instalaci√≥n, lo primero de la cuenta <i>ra√≠z</i> es agregar el usuario <i>administrador</i> al grupo <i>sudo</i> . </p><br><pre> <code class="plaintext hljs">apt install sudo adduser administrator sudo</code> </pre> <br><p>  Entramos en el sistema bajo el <i>administrador de</i> nombre de usuario y agregamos un nuevo usuario <i>usuario</i> . </p><br><pre> <code class="plaintext hljs">sudo useradd -m user</code> </pre> <br><p>  Para mayor comodidad, puede eliminar la contrase√±a por completo, ya que el acceso a esta cuenta seguir√° cerrado en todas partes. </p><br><pre> <code class="plaintext hljs">sudo passwd -d user</code> </pre> <br><h3>  2. Configuraci√≥n del sistema </h3><br><p>  Instalamos controladores, paquetes de firmware, programas adicionales seg√∫n se desee. </p><br><p>  Para habilitar la administraci√≥n remota en el futuro, si es necesario, puede instalar y configurar el servidor <i>vnc</i> .  Sin embargo, en este caso esto no tiene sentido, ya que todas las tareas administrativas se pueden realizar f√°cilmente a trav√©s de la consola, y para esto solo <i>es</i> suficiente el acceso a trav√©s de <i>ssh</i> . </p><br><p>  Linux tiene la capacidad de usar diferentes administradores de ventanas para diferentes usuarios.  Para que la interfaz de usuario funcione, instale un administrador minimalista con la capacidad de ajustar.  Y para la configuraci√≥n necesitar√° algunas aplicaciones m√°s. </p><br><pre> <code class="plaintext hljs">sudo apt install fluxbox arandr plymouth</code> </pre> <br><p>  Con <i>arandr,</i> puede cambiar la resoluci√≥n y la orientaci√≥n de la pantalla, si es necesario, y luego guardar la configuraci√≥n como un script (Fig. 4). </p><br><p><img src="https://habrastorage.org/webt/fm/qo/nw/fmqonwqu3j3rua5xd_nr9zbj4p4.png" alt="Par√°metros de pantalla set_resolution.sh"></p><br><p>  Fig.  4. Configuraci√≥n de la pantalla. </p><br><p>  A continuaci√≥n, debe iniciar sesi√≥n en el sistema una vez bajo la cuenta de usuario, despu√©s de seleccionar <i>fluxbox</i> instalado anteriormente como administrador de ventanas, y luego volver a cerrar sesi√≥n.  Esto es necesario para que <i>fluxbox</i> al primer inicio cree todos los archivos de configuraci√≥n y se seleccione como administrador est√°ndar para la cuenta de <i>usuario</i> (consulte el archivo <i>.dmrc</i> en el directorio de inicio del <i>usuario</i> ). </p><br><p>  Ahora necesita configurar <i>fluxbox</i> para cumplir con los requisitos de interfaz descritos anteriormente.  Para hacer esto, en <i>/home/user/.fluxbox/init,</i> apague el panel <i>session.screen0.toolbar.visible</i> <i>: false</i> , en <i>/home/user/.fluxbox/keys comentamos</i> todos los atajos de teclado, excepto los botones de volumen, y en <i>/ home / user /. fluxbox / startup</i> agrega el inicio del script de configuraci√≥n de pantalla, deshabilitando las funciones de ahorro de energ√≠a del monitor y la ejecuci√≥n autom√°tica de la aplicaci√≥n de pantalla completa.  El script reiniciar√° la aplicaci√≥n en caso de falla inesperada. </p><br><pre> <code class="plaintext hljs">set_resolution.sh xset -dmps s off /home/user/autostart.sh &amp;</code> </pre><br><p>  Ahora necesita acelerar el proceso de arranque del sistema y ocultarlo al usuario.  Para hacer esto, establezca <i>GRUB_TIMEOUT = 0</i> en <i>/ etc / default / grub y</i> establezca <i>quiet_boot = "1"</i> en <i>/etc/grub.d/10_linux</i> .  Para mostrar la animaci√≥n al cargar en los par√°metros del n√∫cleo <i>GRUB_CMDLINE_LINUX,</i> debe agregar la opci√≥n de <i>bienvenida</i> , y en caso de cambiar la orientaci√≥n de la pantalla, la <i>opci√≥n fbcon = rotate: 1</i> o <i>fbcon = rotate: 3</i> , dependiendo de la direcci√≥n.  Si es necesario, puede cambiar la resoluci√≥n y la orientaci√≥n en la pantalla de inicio de sesi√≥n.  Para esto, <i>display-setup-script = set_resolution.sh</i> debe especificarse en <i>/etc/lightdm/lightdm.conf</i> .  Y si necesita ocultar el cursor, agregue <i>xserver-command = X -core -nocursor</i> . </p><br><p>  Elegiremos un estilo de animaci√≥n de carga. </p><br><pre> <code class="plaintext hljs">sudo plymouth-set-default-theme -R text</code> </pre> <br><p>  Y finalmente arregle todos los cambios. </p><br><pre> <code class="plaintext hljs">sudo update-grub2</code> </pre> <br><h3>  3. Instalar programas </h3><br><p>  Para obtener la interfaz de demostraci√≥n de KioskShell, debe crear una versi√≥n de Linux desde el origen.  Los consejos de ensamblaje est√°n en el repositorio. </p><br><p>  Copiamos los archivos a la pizarra y obtenemos la siguiente estructura de archivos y directorios: </p><br><pre> <code class="plaintext hljs">/ ‚îú‚îÄ‚îÄ usr/ -      "KioskShell"    ‚îú‚îÄ‚îÄ local/ ‚îÇ ‚îî‚îÄ‚îÄ bin/ ‚îÇ ‚îî‚îÄ‚îÄ set_resolution.sh ‚îî‚îÄ‚îÄ home/ ‚îú‚îÄ‚îÄ administrator/ ‚îÇ ‚îî‚îÄ‚îÄ relogin.sh -       ‚îî‚îÄ‚îÄ user/ ‚îî‚îÄ‚îÄ autostart.sh -    </code> </pre> <br><h3>  4. Configuraci√≥n final del sistema </h3><br><p>  En esta etapa, puede hacer una copia de seguridad de todo el disco y corregir el estado preliminar de la imagen en caso de cualquier cambio en el futuro. </p><br><p>  Configure el inicio de sesi√≥n autom√°tico en la cuenta de usuario; para esto, configure <i>autologin-user = user</i> en <i>/etc/lightdm/lightdm.conf</i> . </p><br><p>  Ahora configure la protecci√≥n contra escritura. </p><br><pre> <code class="plaintext hljs">sudo apt install bilibop</code> </pre> <br><p>  Al instalar, seleccione el <i>mapa din√°mico de dispositivos falsos</i> . </p><br><p>  Edite el archivo de configuraci√≥n <i>/etc/bilibop/bilibop.conf</i> .  <i>Activamos</i> el m√≥dulo con el par√°metro <i>BILIBOP_LOCKFS = "true"</i> y agregamos una secci√≥n con registros a las excepciones <i>BILIBOP_LOCKFS_WHITELIST = "/ var / log"</i> .  Habilitemos la capacidad de deshabilitar temporalmente la protecci√≥n si es necesario <i>BILIBOP_LOCKFS_POLICY = "soft"</i> .  Y como no hay cifrado en el sistema, debe configurar <i>BILIBOP_LOCKFS_SWAP_POLICY = "soft"</i> . </p><br><p>  Reiniciamos el sistema y, si todo se hace correctamente, aparece una interfaz segura, que se inicia en nombre de la cuenta de usuario. </p><br><p>  El √∫ltimo paso puede automatizarse f√°cilmente para obtener un sistema con configuraci√≥n autom√°tica desde el primer inicio.  Esto crear√° una distribuci√≥n para escalar a m√∫ltiples dispositivos (se propone implementar este mecanismo de forma independiente). </p><br><p>  Para reparar el sistema en su lugar, es posible acceder a la pantalla de inicio de sesi√≥n e iniciar sesi√≥n en la cuenta de administrador.  En Linux, primero debe llegar a la consola a trav√©s de Ctrl + Alt + F1.  Despu√©s de iniciar sesi√≥n en la cuenta de administrador, obligue al <i>usuario</i> a cerrar sesi√≥n en el sistema. </p><br><pre> <code class="plaintext hljs">sudo skill -KILL -u user</code> </pre> <br><p>  Luego regrese al modo gr√°fico a trav√©s de Ctrl + Alt + F7 e inicie sesi√≥n nuevamente como administrador. </p><br><h1>  Conclusiones </h1><br><p>  No importa qu√© ruta se haya elegido, el resultado final es el mismo resultado.  Con la configuraci√≥n adecuada, la interfaz de usuario cumplir√° con todos los requisitos descritos anteriormente.  Solo son posibles las diferencias visuales, asociadas, por regla general, con las caracter√≠sticas de renderizar elementos gr√°ficos usando la aceleraci√≥n de hardware en diferentes plataformas. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/rm/nk/1-/rmnk1-wetcbmnk4qnwng5ztxdri.png" alt="Aplicaci√≥n de shell protegida"></div><p>  Fig.  5. La interfaz est√° en funcionamiento. </p><br><p></p><p>  Dado que la base del sistema es una computadora de placa √∫nica, no ser√° un problema instalar ninguna pantalla t√°ctil u otros controles.  Si tiene la aplicaci√≥n adecuada, sobre esta base puede crear no solo la consola de control del dispositivo o el tablero interactivo, sino tambi√©n otros dispositivos, por ejemplo, informaci√≥n o terminales comerciales. </p><br><h2>  Problema de elecci√≥n </h2><br><p>  Existe la opini√≥n de que Linux es muy dif√≠cil de configurar y mantener, pero al mismo tiempo es gratuito, y Windows es simple y conveniente, pero cuesta dinero.  Esto tal vez sea cierto, pero solo a nivel del hogar.  Cuando se trata de crear sistemas integrados, se deben considerar otras circunstancias.  Por ejemplo, ajustar Windows, especialmente en t√©rminos de administraci√≥n de energ√≠a y otros elementos de bajo nivel, ya no parece simple y conveniente.  Adem√°s, no olvide que Windows 10 exige bastante recursos.  En este ejemplo, fue posible medir el consumo de memoria de un sistema limpio varias veces, y ten√≠a aproximadamente 400 MB en estado inactivo.  A modo de comparaci√≥n, Linux Debian con todos sus complementos ocupaba unos 200 MB de memoria.  Por supuesto, si tiene varios gigabytes de RAM, esto no es un problema, pero a√∫n as√≠, cuando usa Windows y aplicaciones cliente altamente cargadas, debe tomar computadoras de una sola placa m√°s potentes.  Linux requiere menos recursos, pero es realmente dif√≠cil de configurar y requiere un enfoque ordenado, especialmente cuando se trabaja con el gestor de arranque.  Adem√°s, durante el desarrollo e implementaci√≥n de algunos elementos en el sistema, a veces es necesario ensamblar su propio n√∫cleo con par√°metros especiales.  Es efectivo, pero requiere un nivel apropiado de habilidad. </p><br><p>  Es dif√≠cil hacer una elecci√≥n inequ√≠voca como parte de la creaci√≥n de una interfaz segura.  La complejidad de desplegar sistemas es aproximadamente la misma.  El costo de adquirir licencias de Windows para una serie de instrumentos puede ser igual al costo de mantener sistemas en Linux.  Qu√© sistema elegir, usted decide. </p><br><p>  El autor introdujo varias interfaces hombre-m√°quina basadas en los ejemplos descritos en dispositivos electr√≥nicos para una amplia variedad de aplicaciones y demostr√≥ su operatividad en el mundo real. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es434086/">https://habr.com/ru/post/es434086/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es434076/index.html">¬øPor qu√© en Rusia no hay secreto bancario?</a></li>
<li><a href="../es434078/index.html">Solo necesita tomar y hacer: un nuevo podcast sobre proyectos editoriales y una carrera en los medios</a></li>
<li><a href="../es434080/index.html">C√≥mo dejar de escribir firmware para microcontroladores. Estamos empezando a vivir ...</a></li>
<li><a href="../es434082/index.html">Una red neuronal desarrollada por cient√≠ficos rusos ha aprendido a determinar la edad del video con un alto grado de precisi√≥n.</a></li>
<li><a href="../es434084/index.html">¬øPuede un autom√≥vil de la pel√≠cula "Hombres de negro" (1997) subirse al techo del t√∫nel?</a></li>
<li><a href="../es434088/index.html">C√≥mo ayudar a los empleados remotos a evitar la soledad y el agotamiento</a></li>
<li><a href="../es434090/index.html">Presentaci√≥n de un transistor de vac√≠o: un dispositivo hecho del vac√≠o</a></li>
<li><a href="../es434092/index.html">Las personas que salvaron 1968</a></li>
<li><a href="../es434096/index.html">Heisenbug 2018 Mosc√∫: una vista de la multitud</a></li>
<li><a href="../es434098/index.html">Post y preprocesamiento CSS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>