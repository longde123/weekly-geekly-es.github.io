<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜñ üèë üïò SMPP - Protocole de message court d'√©gal √† √©gal üí∫ üßñüèæ üñ≤Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut Bien que les messagers et les r√©seaux sociaux √©vincent tous les jours les m√©thodes de communication traditionnelles, cela n'enl√®ve rien √† la pop...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SMPP - Protocole de message court d'√©gal √† √©gal</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452842/"> Salut  Bien que les messagers et les r√©seaux sociaux √©vincent tous les jours les m√©thodes de communication traditionnelles, cela n'enl√®ve rien √† la popularit√© des SMS.  La v√©rification sur un site populaire, ou notification de transaction, d√©montre qu'ils vivent et vivront.  Vous √™tes-vous d√©j√† demand√© comment tout cela fonctionne?  Tr√®s souvent, SMPP est utilis√© pour envoyer des messages de masse, qui seront discut√©s sous le chat. <br><a name="habracut"></a><br>  Il y avait d√©j√† des articles sur Habr sur smpp, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2</a> , mais leur but n'√©tait pas de d√©crire le protocole lui-m√™me.  Bien s√ªr, vous pouvez imm√©diatement commencer par la source principale - la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sp√©cification</a> , mais je pense que ce serait bien d'avoir un bref r√©sum√©.  Je vais vous expliquer avec un exemple v3.4 je suis content de votre critique objective. <br><br>  SMPP est un protocole de messagerie d'√©gal √† √©gal.  Cela signifie que chaque serveur homologue / concentrateur est √©gal.  Dans le cas le plus simple, le sch√©ma de messagerie SMS ressemble √† ceci: <br><br><img src="https://habrastorage.org/webt/pp/ed/if/ppedifjeooamgdvhshv8-8pccgw.jpeg" alt="image"><br><br>  Cependant, si l'op√©rateur national n'a pas de route vers une r√©gion √©loign√©e, il demande cet interm√©diaire - hub SMS.  Parfois, pour envoyer un SMS, vous devez cr√©er une cha√Æne entre plusieurs pays, voire des continents. <br><br><h4>  √Ä propos du protocole </h4><br>  SMPP est un protocole de couche application bas√© sur l'√©change de <abbr title="Unit√© de donn√©es de protocole">PDU</abbr> et transmis via des sessions TCP / IP ou X25 pour l'envoi de sms et de messages ussd.  SMPP est g√©n√©ralement utilis√© en mode de connexion constante, ce qui permet de gagner du temps.  SMPP utilise un mod√®le de communication client-serveur. <br><br><h4>  Mode de communication </h4><br><img src="https://habrastorage.org/webt/za/i0/lg/zai0lgqtwd2gltfqklwt2ktluke.jpeg" alt="image"><br><br>  L'√©change de messages entre l'exp√©diteur et <abbr title="Centre SMS">SMSC</abbr> via SMPP peut √™tre effectu√© dans les modes suivants: <br><br>  √âmetteur (√©metteur) - transmission d'un message dans un sens, alternativement <br>  Destinataire (r√©cepteur) - ne re√ßoit que des messages de SMSC. <br>  Transreceiver (transceiver) - Messagerie entre SMSC et utilisateur <br><br><h3>  La structure </h3><br><img src="https://habrastorage.org/webt/uc/qf/qp/ucqfqpfoz2hozxwpihaikhs450k.png" alt="image"><br><br><h3>  Longueur du message </h3><br>  Un SMS peut contenir 70 caract√®res lors de la saisie en cyrillique et pas plus de 157 caract√®res latins + 3 <abbr title="En-t√™te de donn√©es utilisateur">UDH</abbr> si envoy√©.  SMS avec un grand nombre de caract√®res, il sera divis√© en plusieurs segments et combin√© dans l'appareil r√©cepteur.  En cas de segmentation, le nombre de caract√®res est r√©duit du fait des en-t√™tes du message dans lesquels la partie du message est indiqu√©e.  Par cons√©quent, lors de l'envoi d'un SMS volumineux, il contient au maximum 153 caract√®res latins ou 67 caract√®res atypiques. <br><br><h3>  Sch√©ma de codage des donn√©es </h3><br>  Cependant, les caract√®res doivent √™tre cod√©s pour transmettre un message.  Dans le protocole SMPP, un champ sp√©cial est responsable du codage - Data Coding Scheme, ou DCS.  Il s'agit d'un champ qui indique comment les messages doivent √™tre reconnus.  De plus, le champ DCS comprend: <br><br><ul><li>  le jeu de caract√®res qui d√©finit le codage; </li><li>  message de classe; </li><li>  demande de suppression automatique apr√®s lecture; </li><li>  indication de compression de message; </li><li>  langue de diffusion; </li></ul><br>  Alphabet 7 bits standard (GSM 03.38).  Il a √©t√© d√©velopp√© pour le syst√®me de messagerie GSM.  Un tel codage convient √† l'anglais et √† certaines langues latines.  Chaque caract√®re se compose de 7 bits et est cod√© en octet. <br><br>  UTF-16 (dans GSM UCS2) Pour inclure les caract√®res manquants dans l'encodage 7 bits, l'encodage UTF-16 a √©t√© d√©velopp√© qui ajoute des caract√®res suppl√©mentaires (y compris cyrillique) en r√©duisant la taille du message de 160 √† 70, ce type d'encodage se r√©p√®te presque compl√®tement Unicode <br><br>  Donn√©es d√©finies par l'utilisateur 8 bits.  Il s'agit notamment du KOI8-R et de Windows-1251.  Bien que cette solution semble √™tre plus √©conomique par rapport au m√™me UTF-1, pour utiliser de tels codages, une configuration pr√©liminaire sur les dispositifs de r√©ception et d'√©mission est requise.  Si sur certains d'entre eux les donn√©es d'encodage ne sont pas prises en charge, le message ne s'affichera pas correctement.  Dans ce cas, les deux appareils doivent √™tre configur√©s √† l'avance. <br><br><h3>  Messages de classe </h3><br><ul><li>  Classe0, ou flash, un message stock√© dans la m√©moire du t√©l√©phone √† la demande de l'utilisateur; </li><li>  Class1, ou ceux stock√©s dans le t√©l√©phone; </li><li>  Classe2, doit s'assurer que le message est stock√© dans la m√©moire du terminal mobile, sinon il doit donner des alertes SMSC sur l'impossibilit√© de sauvegarder; </li><li>  Classe 3 - dans ce cas, le t√©l√©phone doit envoyer une notification indiquant que le message peut √™tre enregistr√©, quelle que soit la quantit√© de m√©moire dans l'appareil.  Ce type de message implique que le message a atteint sa destination; </li></ul><br><h3>  Type de message </h3><br>  Message silencieux (SMS0) Type de message SMS sans contenu.  Ces SMS sont livr√©s sans pr√©avis et ne sont pas affich√©s sur l'√©cran de l'appareil. <br><br><h3>  PDU </h3><br>  Chaque op√©ration pdu est coupl√©e et se compose d'une demande et d'une r√©ponse.  Par exemple: une commande qui dit sur l'√©tablissement d'une connexion (bind_transmitter / bind_transmitter_resp), ou que le message a √©t√© transmis (Deliver_sm / Deliver_sm_resp) <br><br><img src="https://habrastorage.org/webt/ut/lo/is/utloisn0bi6fjn_ah4loztajpee.png" alt="image"><br><br>  Chaque paquet pdu se compose de deux parties - un en-t√™te et un corps.  La structure d'en-t√™te est la m√™me pour tout paquet pdu: la longueur de la commande est la longueur du paquet, id est le nom du paquet et la commande d'√©tat affiche un message transmis avec succ√®s ou avec une erreur. <br><br><h3>  Options TLV avanc√©es </h3><br>  TLV (Tag Length Value) ou champs facultatifs.  Ces param√®tres sont utilis√©s pour √©tendre les fonctions du protocole et ne sont pas n√©cessaires.  Ce champ est indiqu√© √† la fin du champ pdu.  Par exemple, √† l'aide de TLV dest_addr_np_information, vous pouvez organiser le transfert d'informations sur le portage d'un num√©ro. <br><br><h3>  Ton et Npi </h3><br>  Le param√®tre TON (Type of Number), informe le SMSC du format d'adressage et du type de r√©seau. <br>  Param√®tre NPI (Numbering Plan Identification) indiquant le plan de num√©rotation. <br><br><img src="https://habrastorage.org/webt/2i/4w/qo/2i4wqos7rl1qp9i23nkoqwp0uby.png" alt="image"><br><br><h3>  Adresse de la source du message ou nom alpha </h3><br>  Les messages envoy√©s au t√©l√©phone se pr√©sentent sous deux formes: num√©rique et alphab√©tique.  Le num√©rique peut √™tre long (semblable √† un num√©ro de t√©l√©phone) et court.  Parfois, les op√©rateurs ont des restrictions sur l'envoi √† partir de noms neutres, par exemple Infosms, Alert, etc.  Parfois, les op√©rateurs n'autorisent pas le trafic si le nom n'est pas enregistr√© sur leur r√©seau.  Cependant, ce sont des fonctionnalit√©s d'op√©rateur plus probables. <br><br><h3>  √âtapes d'exp√©dition </h3><br><img src="https://habrastorage.org/webt/0v/2o/gi/0v2ogi1zis-dnkyyonmld7rjbx8.png" alt="image"><br><br>  <b>SMS-SUBMIT</b> envoie un message MO FSM (message court depuis un terminal mobile) <br>  <b>SMS-SUBMIT REPORT</b> - confirmation que le message a √©t√© envoy√© par SMSC <br>  <b>SRI SM</b> (SendRoutingInfo) - SMSC re√ßoit des informations du HLR concernant le MSC / VLR de l'emplacement de l'abonn√© <br>  <b>SRI SM RESP</b> - r√©ponse du HLR concernant le poste d'abonn√© viande <br>  <b>MT-FSM</b> - apr√®s r√©ception de la position, un message est envoy√© √† l'aide de l'op√©ration "Forward Short Message" <br>  <b>MT-FSM ACK</b> - r√©ponse de SMSC qu'un message a √©t√© envoy√© <br>  <b>RAPPORT D'√âTAT SMS</b> - SMSC envoie l'√©tat de remise des messages. <br><br><h3>  Statut de remise des messages </h3><br>  <b>SMS-STATUS REPORT</b> peut prendre plusieurs valeurs: <br>  Message <b>DELIVRD</b> livr√© avec succ√®s <br>  <b>REJECTD</b> - message rejet√© par le centre SMS <br>  <b>EXPIR√â</b> - le message est supprim√© de la file d'attente d'envoi apr√®s la fin de TTL (dur√©e de vie du message) <br>  <b>UNDELIV</b> - autres cas de non-livraison <br>  <b>INCONNU -</b> aucune r√©ponse d'envoi re√ßue. <br><br><h3>  Erreurs de transmission </h3><br>  Parfois, les messages ne sont pas remis.  En cons√©quence, des erreurs se produisent.  Les erreurs sont renvoy√©es √† PDUs_sms_resp.  Toutes les erreurs peuvent √™tre divis√©es en temporaires (temporaires) et permanentes (permanentes). <br><br>  A titre d'exemple, les temporaires sont absent_subscriber, l'abonn√© n'est pas disponible ou pas sur le r√©seau, et l'abonn√© permanent n'existe pas.  En fonction des erreurs qui se produisent, une strat√©gie de transfert de ces messages est form√©e. <br><br>  Par exemple, si un abonn√© √©tait occup√© √† parler et a re√ßu un combin√© MT est une erreur occup√©e, le message peut √™tre envoy√© √† nouveau apr√®s quelques minutes, cependant, si l'abonn√© a un service de messagerie bloqu√©, le renvoi ne sera pas logique.  Vous pouvez trouver la liste des erreurs sur les pages SMSC, par exemple, comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ceci</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr452842/">https://habr.com/ru/post/fr452842/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr452832/index.html">Plan complet pour le nouveau programme lunaire de la NASA "Artemis" (Artemis)</a></li>
<li><a href="../fr452834/index.html">Microframe mince</a></li>
<li><a href="../fr452836/index.html">Outils Web, ou par o√π commencer un pentester?</a></li>
<li><a href="../fr452838/index.html">Int√©gration de 3CX avec Office 365 via l'API Azure</a></li>
<li><a href="../fr452840/index.html">Conf√©rence VMware EMPOWER 2019: comment s'est pass√© le premier jour</a></li>
<li><a href="../fr452844/index.html">Transformation ou blasph√®me: comment ¬´num√©riser¬ª les op√©rateurs t√©l√©coms</a></li>
<li><a href="../fr452846/index.html">Comment nous avons construit un cluster PostgreSQL fiable sur Patroni</a></li>
<li><a href="../fr452848/index.html">Que va-t-il se passer le 1er f√©vrier 2020?</a></li>
<li><a href="../fr452850/index.html">Syst√®mes √† l'int√©rieur des cartouches: comment les ing√©nieurs ont √©tendu les capacit√©s des consoles de jeux</a></li>
<li><a href="../fr452852/index.html">Travail √† distance: mythes la nuit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>