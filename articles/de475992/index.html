<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëºüèº üéÆ üéß Schreiben eines VLC-Plugins zum Erlernen der englischen Sprache ü§≥üèø üé™ üôÖüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel werde ich dar√ºber sprechen, wie man ein Plugin in C f√ºr den VLC Media Player schreibt. Ich habe mein Plugin geschrieben, um das Ansc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Schreiben eines VLC-Plugins zum Erlernen der englischen Sprache</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475992/"><img src="https://habrastorage.org/webt/nl/nj/r4/nlnjr4lpomher2u_r87vvsjeptc.png" alt="Bild"><br><br>  In diesem Artikel werde ich dar√ºber sprechen, wie man ein Plugin in C f√ºr den VLC Media Player schreibt.  Ich habe mein Plugin geschrieben, um das Anschauen von Fernsehsendungen und Filmen auf Englisch zu vereinfachen.  Die Idee, dieses Plugin zu erstellen, wird in den Abschnitten <b>Idee</b> und <b>L√∂sungsfindung beschrieben</b> .  Technische Details zur Plugin-Implementierung finden Sie in den Abschnitten " <b>Hello World-Plugin"</b> und " <b>Implementierung"</b> .  Was am Ende passiert ist und wie man es benutzt, k√∂nnen Sie im letzten Abschnitt, <b>Ergebnis</b> , <b>nachlesen</b> . <br><br>  Der Quellcode f√ºr das Projekt ist auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> verf√ºgbar. <br><a name="habracut"></a><br><h1>  Idee </h1><br>  Die Idee, eine Fremdsprache zu lernen, w√§hrend ich meine Lieblingsserie anschaue, ist nicht neu, aber ich pers√∂nlich hatte immer Probleme mit der Umsetzung.  Es ist sehr schwierig, eine Serie oder einen Film anzusehen, wenn Sie nicht die H√§lfte dessen verstehen, was sie sagen.  Nat√ºrlich k√∂nnen Sie Untertitel aktivieren, aber wenn in einer Rede ein unbekanntes Wort oder ein unbekannter Ausdruck vorkommt, wird nicht klarer, dass der Text ihn dupliziert.  Und mir gefiel es √ºberhaupt nicht, die Serie mit russischen Untertiteln anzusehen - das Gehirn wechselt in seine Muttersprache und nimmt keine Fremdsprache mehr wahr.  Ich habe irgendwo gelesen, dass man sich zuerst eine Serie auf Russisch und dann im Original ansehen muss.  Aber dieser Ansatz passte auch nicht zu mir.  Erstens ist es nicht mehr so ‚Äã‚Äãinteressant, sich so viel Zeit zu nehmen, um dasselbe mehrmals anzusehen, und zweitens ist es nicht mehr so ‚Äã‚Äãinteressant, das zweite Mal zuzusehen - die Motivation geht verloren. <br><br>  Trotz all der Schwierigkeiten, ausl√§ndische Fernsehsendungen zu sehen, kann ich technische Dokumentationen, Artikel und B√ºcher auf Englisch ziemlich gut lesen.  Ich lese gerne B√ºcher auf dem elektronischen Reader des Kindle. Da die W√∂rterbuchfunktion cool ist, k√∂nnen Sie mit einem Tastendruck eine √úbersetzung eines unbekannten Wortes finden.  Es ist praktisch, englischsprachige Artikel und Websites zu lesen, indem Sie eine spezielle Erweiterung f√ºr die √úbersetzung im Browser installieren - ich verwende die Erweiterung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Yandex.Translation</a> .  Dieser Ansatz erm√∂glicht es Ihnen, englische Texte zu lesen und zu verstehen, ohne nach unbekannten W√∂rtern zu suchen. <br><br>  Ich dachte, warum nicht den gleichen Ansatz f√ºr das Ansehen von Fernsehsendungen anwenden? Wir schalten die Serie auf Englisch ein, sobald eine unverst√§ndliche Phrase gefunden wird, wechseln zur russischen Audiospur und spulen ein wenig zur√ºck.  Als n√§chstes schauen wir uns die Serie weiterhin in Englisch an. <br><br><h1>  Suche nach einer L√∂sung </h1><br>  Tats√§chlich ist die gesamte Funktionalit√§t, die ich ben√∂tige, bereits in vielen g√§ngigen Mediaplayern verf√ºgbar.  Das Einzige, was ich vor ein paar Sekunden mit einem Knopfdruck den Audiotrack wechseln und das Video zur√ºckspulen m√∂chte.  Es w√§re auch toll, wenn der Mediaplayer selbst nach der √úbersetzung eines unverst√§ndlichen Fragments die Audiospur wieder auf Englisch umstellen w√ºrde.  Nun, es w√§re sch√∂n, das zuvor √ºbersetzte Fragment mit dem englischen Track wiederholen zu k√∂nnen. <br><br>  Das hei√üt, ich ben√∂tige einen Media Player, f√ºr den Sie Plugins schreiben k√∂nnen.  Es ist auch w√ºnschenswert, dass es plattform√ºbergreifend ist, da ich einen PC unter Windows und einen Laptop unter Linux verwende.  Meine Wahl fiel sofort auf den VLC.  Auf habr habe ich sogar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel gefunden,</a> in dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@Idunno erkl√§rt</a> , wie man eine VLC-Erweiterung auf LUA schreibt.  √úbrigens hat er diese Erweiterung auch geschrieben, um Englisch zu lernen.) Leider funktioniert diese Erweiterung in den neuesten Versionen von VLC (√§lter als 2.0.5) nicht.  Aufgrund eines instabilen Betriebs wurde die M√∂glichkeit, R√ºckruffunktionen hinzuzuf√ºgen, mit denen Tastaturereignisse in der LUA-Erweiterung verarbeitet werden konnten, aus der LUA-API entfernt.  In der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">README-Datei</a> f√ºhrt ein Link zur Mailingliste der VLC-Entwickler, die dieses Problem diskutieren, zu seiner Erweiterung auf GitHub <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">@Idunno</a> . <br><br>  Um meine Idee umzusetzen, funktioniert eine Erweiterung von LUA nicht, Sie m√ºssen ein Plugin in C schreiben. Und obwohl ich vor ungef√§hr 7 Jahren an der Universit√§t etwas in C geschrieben habe, habe ich mich entschlossen, es zu versuchen. <br><br><h1>  Hallo Welt Plugin </h1><br>  Es ist erw√§hnenswert, dass der VLC-Mediaplayer ziemlich gut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dokumentiert ist</a> .  Ich habe daraus gelernt, dass die Entwicklung eines Mediaplayers modular erfolgt.  VLC besteht aus mehreren unabh√§ngigen Modulen, die bestimmte Funktionen implementieren, und dem Kernel ( <b>libVLCCore</b> ), der diese Module verwaltet.  Es gibt zwei Arten von Modulen: interne ( <i>innerhalb des Baums</i> ) und externe ( <i>au√üerhalb des Baums</i> ).  Der Quellcode der internen Module wird mit dem Kernel-Code in einem Repository gespeichert.  Externe Module werden unabh√§ngig vom VLC Media Player entwickelt und montiert.  Letztere sind eigentlich sogenannte Plugins. <br><br>  Die Dokumentation enth√§lt auch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einen Artikel</a> zum Schreiben Ihres Plug-Ins (Moduls) in C. Dieser Artikel enth√§lt den Quellcode eines einfachen Plug-Ins, das beim Starten von VLC eine Willkommensmeldung " <i>Hallo, &lt;Name&gt;</i> " an der Konsole anzeigt (der Wert &lt;Name&gt; wird verwendet) aus den Plugin-Einstellungen).  <code>set_category(CAT_INTERFACE)</code> ich ein wenig <code>set_category(CAT_INTERFACE)</code> , werde ich sagen, dass im obigen Beispiel nach <code>set_category(CAT_INTERFACE)</code> die folgende Zeile <code>set_category(CAT_INTERFACE)</code> : <br><br><pre> <code class="cpp hljs">set_subcategory( SUBCAT_INTERFACE_CONTROL )</code> </pre> <br>  Nun, alles, was bleibt, ist das Plug-In zu montieren und seine Funktion zu testen.  Es gibt auch eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anleitung zum</a> Erstellen eines externen Plugins.  Hier lohnt es sich, auf den Abschnitt <b>Internationalisierung</b> zu achten, in dem beschrieben wird, wie die Lokalisierung in VLC funktioniert.  Kurz gesagt, f√ºr externe Plug-Ins m√ºssen Sie die Makros <code>N_()</code> , <code>_()</code> : <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DOMAIN </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"vlc-myplugin"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _(str) dgettext(DOMAIN, str) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> N_(str) (str)</span></span></code> </pre> <br>  F√ºr die Montage wird vorgeschlagen, das gute alte Makefile oder Autotools zu verwenden.  Ich entschied mich f√ºr den einfachen Weg und entschied mich f√ºr das Makefile.  Im Makefile m√ºssen Sie daran denken, die Variable <b><code>MODULE_STRING</code></b> zu definieren - dies ist die Kennung unseres Plugins.  Ich habe auch die Arbeit mit Verzeichnissen ein wenig optimiert - jetzt werden sie durch <i>pkg-config definiert</i> .  Das Ergebnis sind die folgenden Dateien: <br><br><div class="spoiler">  <b class="spoiler_title">hallo.c</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** * @file hello.c * @brief Hello world interface VLC module example */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> HAVE_CONFIG_H # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"config.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DOMAIN </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"vlc-myplugin"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> _(str) dgettext(DOMAIN, str) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> N_(str) (str) #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdlib.h&gt; /* VLC core API headers */ #include &lt;vlc_common.h&gt; #include &lt;vlc_plugin.h&gt; #include &lt;vlc_interface.h&gt; /* Forward declarations */ static int Open(vlc_object_t *); static void Close(vlc_object_t *); /* Module descriptor */ vlc_module_begin() set_shortname(N_("Hello")) set_description(N_("Hello interface")) set_capability("interface", 0) set_callbacks(Open, Close) set_category(CAT_INTERFACE) set_subcategory( SUBCAT_INTERFACE_CONTROL ) add_string("hello-who", "world", "Target", "Whom to say hello to.", false) vlc_module_end () /* Internal state for an instance of the module */ struct intf_sys_t { char *who; }; /** * Starts our example interface. */ static int Open(vlc_object_t *obj) { intf_thread_t *intf = (intf_thread_t *)obj; /* Allocate internal state */ intf_sys_t *sys = malloc(sizeof (*sys)); if (unlikely(sys == NULL)) return VLC_ENOMEM; intf-&gt;p_sys = sys; /* Read settings */ char *who = var_InheritString(intf, "hello-who"); if (who == NULL) { msg_Err(intf, "Nobody to say hello to!"); goto error; } sys-&gt;who = who; msg_Info(intf, "Hello %s!", who); return VLC_SUCCESS; error: free(sys); return VLC_EGENERIC; } /** * Stops the interface. */ static void Close(vlc_object_t *obj) { intf_thread_t *intf = (intf_thread_t *)obj; intf_sys_t *sys = intf-&gt;p_sys; msg_Info(intf, "Good bye %s!", sys-&gt;who); /* Free internal state */ free(sys-&gt;who); free(sys); }</span></span></span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Makefile</b> <div class="spoiler_text"><pre> <code class="smalltalk hljs"><span class="hljs-type"><span class="hljs-type">LD</span></span> = ld <span class="hljs-type"><span class="hljs-type">CC</span></span> = cc <span class="hljs-type"><span class="hljs-type">PKG_CONFIG</span></span> = pkg-config <span class="hljs-type"><span class="hljs-type">INSTALL</span></span> = install <span class="hljs-type"><span class="hljs-type">CFLAGS</span></span> = -g -<span class="hljs-type"><span class="hljs-type">O2</span></span> -<span class="hljs-type"><span class="hljs-type">Wall</span></span> -<span class="hljs-type"><span class="hljs-type">Wextra</span></span> <span class="hljs-type"><span class="hljs-type">LDFLAGS</span></span> = <span class="hljs-type"><span class="hljs-type">LIBS</span></span> = <span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_CFLAGS</span></span> := <span class="hljs-string"><span class="hljs-string">$(</span></span>shell <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">PKG_CONFIG</span></span>) --cflags vlc-plugin) <span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_LIBS</span></span> := <span class="hljs-string"><span class="hljs-string">$(</span></span>shell <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">PKG_CONFIG</span></span>) --libs vlc-plugin) <span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_DIR</span></span> := <span class="hljs-string"><span class="hljs-string">$(</span></span>shell <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">PKG_CONFIG</span></span>) --variable=pluginsdir vlc-plugin) plugindir = <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_DIR</span></span>)/misc override <span class="hljs-type"><span class="hljs-type">CC</span></span> += -std=gnu99 override <span class="hljs-type"><span class="hljs-type">CPPFLAGS</span></span> += -<span class="hljs-type"><span class="hljs-type">DPIC</span></span> -<span class="hljs-type"><span class="hljs-type">I</span></span>. -<span class="hljs-type"><span class="hljs-type">Isrc</span></span> override <span class="hljs-type"><span class="hljs-type">CFLAGS</span></span> += -fPIC override <span class="hljs-type"><span class="hljs-type">LDFLAGS</span></span> += -<span class="hljs-type"><span class="hljs-type">Wl</span></span>,-no-undefined,-z,defs override <span class="hljs-type"><span class="hljs-type">CPPFLAGS</span></span> += -<span class="hljs-type"><span class="hljs-type">DMODULE_STRING</span></span>=\<span class="hljs-comment"><span class="hljs-comment">"hello\"</span></span> override <span class="hljs-type"><span class="hljs-type">CFLAGS</span></span> += <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_CFLAGS</span></span>) override <span class="hljs-type"><span class="hljs-type">LIBS</span></span> += <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_LIBS</span></span>) all: libhello_plugin.so install: all mkdir -p -- <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">DESTDIR</span></span>)<span class="hljs-string"><span class="hljs-string">$(</span></span>plugindir) <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">INSTALL</span></span>) --mode <span class="hljs-number"><span class="hljs-number">0755</span></span> libhello_plugin.so <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">DESTDIR</span></span>)<span class="hljs-string"><span class="hljs-string">$(</span></span>plugindir) install-strip: <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">MAKE</span></span>) install <span class="hljs-type"><span class="hljs-type">INSTALL</span></span>=<span class="hljs-comment"><span class="hljs-comment">"$(INSTALL) -s"</span></span> uninstall: rm -f <span class="hljs-string"><span class="hljs-string">$(</span></span>plugindir)/libhello_plugin.so clean: rm -f -- libhello_plugin.so src/*.o mostlyclean: clean <span class="hljs-type"><span class="hljs-type">SOURCES</span></span> = hello.c <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SOURCES</span></span>:%.c=src/%.o): <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SOURCES</span></span>:%.c=src/%.c) libhello_plugin.so: <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SOURCES</span></span>:%.c=src/%.o) <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">CC</span></span>) <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">LDFLAGS</span></span>) -shared -o <span class="hljs-string"><span class="hljs-string">$@</span></span> <span class="hljs-string"><span class="hljs-string">$^</span></span> <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">LIBS</span></span>) .<span class="hljs-type"><span class="hljs-type">PHONY</span></span>: all install install-strip uninstall clean mostlyclean</code> </pre></div></div><br>  Der einfachste Weg, ein Plugin f√ºr Linux zu erstellen.  Dazu m√ºssen Sie den VLC-Mediaplayer selbst sowie die zum Erstellen des Plug-Ins erforderlichen Dateien und Tools installieren.  Unter Debian / Ubuntu kann dies mit dem folgenden Befehl erfolgen: <br><br><pre> <code class="bash hljs">sudo apt-get install vlc libvlc-dev libvlccore-dev gcc make pkg-config</code> </pre> <br>  Eigentlich ist alles fertig, wir sammeln und installieren unser Plugin mit dem Befehl: <br><br><pre> <code class="bash hljs">sudo make install</code> </pre> <br>  Um das Plugin zu testen, f√ºhren Sie VLC auch von der Konsole aus: <br><br><pre> <code class="bash hljs">vlc</code> </pre> <br>  Leider haben wir keine " <i>Hallo Welt</i> " gesehen.  Die Sache ist, dass das Plugin zuerst aktiviert werden muss.  √ñffnen Sie dazu die Einstellungen ( <b>Extras</b> &gt; <b>Einstellungen</b> ), wechseln Sie in die erweiterte Ansicht (w√§hlen Sie <b>Alle</b> in der Gruppe <b>Einstellungen</b> anzeigen) und suchen Sie in der Baumstruktur im linken Bereich <b>Schnittstelle</b> &gt; <b>Steuerungsschnittstellen</b> - aktivieren Sie das Kontrollk√§stchen neben unserem Plugin f√ºr die <b>Hallo-Schnittstelle</b> . <br><br> <a href=""><img src="https://habrastorage.org/webt/fi/wr/ey/fiwreyqdhfd4ncbgzc2g8z1z3y8.png"></a> <br><br>  Wir speichern die Einstellungen und starten den VLC neu. <br><br> <a href=""><img src="https://habrastorage.org/webt/g3/-n/h3/g3-nh3qc7k37kzwpbfywtow8msa.png"></a> <br><br><h1>  Erstellen Sie ein Plugin f√ºr Windows </h1><br>  Bei Windows sind die Dinge etwas komplizierter.  Um das Plugin zu erstellen, m√ºssen Sie sdk herunterladen, das Bibliotheken, Header- und Konfigurationsdateien von VLC enth√§lt.  Zuvor war sdk Teil der regul√§ren VLC-Assembly und befand sich im Programminstallationsordner.  Jetzt wird es als separate Media Player-Baugruppe geliefert.  Beispielsweise kann diese Assembly f√ºr VLC Version 3.0.8 unter <a href="">ftp://ftp.videolan.org/pub/videolan/vlc/3.0.8/win64/vlc-3.0.8-win64.7z</a> heruntergeladen werden (es ist wichtig, 7z herunterzuladen) -Archiv). <br><br>  Kopieren Sie den Inhalt des Archivs in einen Ordner, z. B. nach <i>C: \ Projects</i> .  Das Archiv enth√§lt neben sdk auch den Mediaplayer selbst, mit dem Sie das Plug-in testen und debuggen k√∂nnen. <br><br>  Damit unser Makefile zum Erstellen und Installieren des Plugins verwendet werden kann, m√ºssen Sie die Datei <i>C: \ Projects \ vlc-3.0.8 \ sdk \ lib \ pkgconfig \ vlc-plugin.pc reparieren</i> und den korrekten Pfad zum Ordner <b>sdk</b> in den Variablen <b>prefix</b> und <b>pluginsdir angeben</b> und <b>Plugins</b> : <br><br><pre> <code class="bash hljs">prefix=/c/Projects/vlc-3.0.8/sdk pluginsdir=/c/Projects/vlc-3.0.8/plugins</code> </pre> <br>  Um unter Windows zu bauen, m√ºssen wir auch einen Compiler und andere Dienstprogramme installieren.  Die gesamte erforderliche Software erhalten Sie, indem Sie die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MSYS2-</a> Umgebung installieren.  Die Projektwebsite enth√§lt detaillierte Installationsanweisungen.  Kurz gesagt, m√ºssen Sie unmittelbar nach der Installation die Konsole ( <i>C: \ msys64 \ msys2.exe</i> ) <i>√∂ffnen</i> und die MSYS2-Pakete mit dem folgenden Befehl aktualisieren: <br><br><pre> <code class="bash hljs">pacman -Syu</code> </pre> <br>  Schlie√üen Sie als N√§chstes das MSYS2-Terminalfenster, √∂ffnen Sie es erneut und f√ºhren Sie den Befehl aus <br><br><pre> <code class="bash hljs">pacman -Su</code> </pre> <br>  Nachdem Sie alle Pakete aktualisiert haben, m√ºssen Sie die Toolchain installieren: <br><br><pre> <code class="bash hljs">pacman -S base-devel mingw-w64-x86_64-toolchain</code> </pre> <br>  Nachdem alle erforderlichen Pakete installiert sind, k√∂nnen Sie mit dem Erstellen des Plugins beginnen.  Ich habe das Makefile ein wenig modifiziert, damit es das Plugin sowohl unter Linux als auch unter Windows erstellen kann.  Au√üerdem musste ich einige nicht unterst√ºtzte MinGW-Build-Parameter entfernen, was dazu f√ºhrte, dass das Makefile so aussah: <br><br><div class="spoiler">  <b class="spoiler_title">Makefile f√ºr Windows</b> <div class="spoiler_text"><pre> <code class="smalltalk hljs"><span class="hljs-type"><span class="hljs-type">LD</span></span> = ld <span class="hljs-type"><span class="hljs-type">CC</span></span> = cc <span class="hljs-type"><span class="hljs-type">PKG_CONFIG</span></span> = pkg-config <span class="hljs-type"><span class="hljs-type">INSTALL</span></span> = install <span class="hljs-type"><span class="hljs-type">CFLAGS</span></span> = -g -<span class="hljs-type"><span class="hljs-type">O2</span></span> -<span class="hljs-type"><span class="hljs-type">Wall</span></span> -<span class="hljs-type"><span class="hljs-type">Wextra</span></span> <span class="hljs-type"><span class="hljs-type">LDFLAGS</span></span> = <span class="hljs-type"><span class="hljs-type">LIBS</span></span> = <span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_CFLAGS</span></span> := <span class="hljs-string"><span class="hljs-string">$(</span></span>shell <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">PKG_CONFIG</span></span>) --cflags vlc-plugin) <span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_LIBS</span></span> := <span class="hljs-string"><span class="hljs-string">$(</span></span>shell <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">PKG_CONFIG</span></span>) --libs vlc-plugin) <span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_DIR</span></span> := <span class="hljs-string"><span class="hljs-string">$(</span></span>shell <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">PKG_CONFIG</span></span>) --variable=pluginsdir vlc-plugin) plugindir = <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_DIR</span></span>)/misc override <span class="hljs-type"><span class="hljs-type">CC</span></span> += -std=gnu99 override <span class="hljs-type"><span class="hljs-type">CPPFLAGS</span></span> += -<span class="hljs-type"><span class="hljs-type">DPIC</span></span> -<span class="hljs-type"><span class="hljs-type">I</span></span>. -<span class="hljs-type"><span class="hljs-type">Isrc</span></span> override <span class="hljs-type"><span class="hljs-type">CFLAGS</span></span> += -fPIC override <span class="hljs-type"><span class="hljs-type">LDFLAGS</span></span> += -<span class="hljs-type"><span class="hljs-type">Wl</span></span>,-no-undefined override <span class="hljs-type"><span class="hljs-type">CPPFLAGS</span></span> += -<span class="hljs-type"><span class="hljs-type">DMODULE_STRING</span></span>=\<span class="hljs-comment"><span class="hljs-comment">"hello\"</span></span> override <span class="hljs-type"><span class="hljs-type">CFLAGS</span></span> += <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_CFLAGS</span></span>) override <span class="hljs-type"><span class="hljs-type">LIBS</span></span> += <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">VLC_PLUGIN_LIBS</span></span>) <span class="hljs-type"><span class="hljs-type">SUFFIX</span></span> := so ifeq (<span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">OS</span></span>),<span class="hljs-type"><span class="hljs-type">Windows_NT</span></span>) <span class="hljs-type"><span class="hljs-type">SUFFIX</span></span> := dll endif all: libhello_plugin.<span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SUFFIX</span></span>) install: all mkdir -p -- <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">DESTDIR</span></span>)<span class="hljs-string"><span class="hljs-string">$(</span></span>plugindir) <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">INSTALL</span></span>) --mode <span class="hljs-number"><span class="hljs-number">0755</span></span> libhello_plugin.<span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SUFFIX</span></span>) <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">DESTDIR</span></span>)<span class="hljs-string"><span class="hljs-string">$(</span></span>plugindir) install-strip: <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">MAKE</span></span>) install <span class="hljs-type"><span class="hljs-type">INSTALL</span></span>=<span class="hljs-comment"><span class="hljs-comment">"$(INSTALL) -s"</span></span> uninstall: rm -f <span class="hljs-string"><span class="hljs-string">$(</span></span>plugindir)/libhello_plugin.<span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SUFFIX</span></span>) clean: rm -f -- libhello_plugin.<span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SUFFIX</span></span>) src/*.o mostlyclean: clean <span class="hljs-type"><span class="hljs-type">SOURCES</span></span> = hello.c <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SOURCES</span></span>:%.c=src/%.o): <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SOURCES</span></span>:%.c=src/%.c) libhello_plugin.<span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SUFFIX</span></span>): <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">SOURCES</span></span>:%.c=src/%.o) <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">CC</span></span>) <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">LDFLAGS</span></span>) -shared -o <span class="hljs-string"><span class="hljs-string">$@</span></span> <span class="hljs-string"><span class="hljs-string">$^</span></span> <span class="hljs-string"><span class="hljs-string">$(</span></span><span class="hljs-type"><span class="hljs-type">LIBS</span></span>) .<span class="hljs-type"><span class="hljs-type">PHONY</span></span>: all install install-strip uninstall clean mostlyclean</code> </pre></div></div><br>  Da MSYS2 nichts √ºber unser SDK f√ºr VLC wei√ü, muss vor dem <b>Erstellen</b> der Pfad zum Ordner <b>pkgconfig</b> von diesem SDK zur Umgebungsvariablen <b>PKG_CONFIG_PATH</b> hinzugef√ºgt <b>werden</b> .  √ñffnen Sie die MinGW-Konsole ( <i>C: \ msys64 \ mingw64.exec</i> ) und f√ºhren Sie die folgenden Befehle aus: <br><br><pre> <code class="plaintext hljs">export PKG_CONFIG_PATH=/c/projects/vlc-3.0.8/sdk/lib/pkgconfig:$PKG_CONFIG_PATH make install</code> </pre> <br>  Um das Plugin zu testen, f√ºhren Sie VLC auch von der Konsole aus: <br><br><pre> <code class="plaintext hljs">/c/projects/vlc-3.0.8/vlc</code> </pre> <br>  Gehen Sie wie bei Linux zu den Einstellungen und schalten Sie unser Plugin ein.  Wir speichern die Einstellungen und starten den VLC neu. <br><br><h1>  Plugin-Implementierung </h1><br>  Um mein Plugin zu implementieren, musste ich verstehen, wie der Media Player gesteuert wird (√Ñndern der Audiospur, Zur√ºckspulen) und wie Tastaturtastenereignisse behandelt werden.  Um das alles zu verstehen, habe ich mich der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> zugewandt.  Auch im Internet fand ich einige interessante Artikel, die die Architektur des Media Players beleuchteten: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://web.archive.org/web/20141204234622/">Die Architektur des VLC Media Frameworks</a> und die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">API-Dokumentation</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://web.archive.org/web/20141204234622/">des</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VLC Media Players</a> . <br><br>  VLC besteht aus einer gro√üen Anzahl unabh√§ngiger Module (400+).  Jedes Modul sollte Informationen √ºber die Art der von ihm implementierten Funktionalit√§t sowie √ºber die Initialisierungs- / Finalisierungsfunktionen enthalten.  Diese Informationen werden im Block <b>vlc_module_begin ()</b> - <b>vlc_module_end ()</b> mit den Makros <b>set_capability ()</b> und <b>set_callbacks () beschrieben</b> .  Die Modulinitialisierungs- / Finalisierungsfunktionen (normalerweise als <b>√ñffnen</b> und <b>Schlie√üen bezeichnet</b> ) haben die folgende Signatur: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Open</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vlc_object_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vlc_object_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *)</span></span></span></span></code> </pre> <br>  <b>vlc_object_t</b> ist der Basistyp f√ºr die Darstellung von Daten in VLC, von denen alle anderen geerbt werden (siehe Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Object_Management</a> ).  Ein Zeiger auf <b>vlc_object_t</b> muss entsprechend der vom Modul implementierten Funktionalit√§t in einen bestimmten Datentyp umgewandelt werden.  Um den Media Player zu steuern, habe ich <b>den</b> <b><i>Schnittstellenwert</i></b> im Makro <b>set_capability () festgelegt</b> .  Dementsprechend muss ich in den Funktionen <b>√ñffnen</b> und <b>Schlie√üen</b> <b>vlc_object_t</b> in <b>intf_thread_t umwandeln</b> . <br><br>  Die Interaktion zwischen den Modulen basiert auf dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beobachterdesignmuster</a> .  VLC bietet einen Mechanismus f√ºr <i>‚ÄûObjektvariablen‚Äú</i> (siehe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Variablen</a> ), mit dem Sie Instanzen vom Typ <b>vlc_object_t</b> (und seinen Ableitungen) Variablen hinzuf√ºgen k√∂nnen.  Module k√∂nnen √ºber diese Variablen Daten austauschen.  Sie k√∂nnen der Variablen auch eine R√ºckruffunktion hinzuf√ºgen, die aufgerufen wird, wenn sich der Wert dieser Variablen √§ndert. <br><br>  Betrachten <b>Sie</b> als Beispiel das <b>Hotkeys-</b> Modul ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">modules / control / hotkeys.c</a> ), das f√ºr die Behandlung von Hotkey-Ereignissen zust√§ndig ist.  In der Open-Funktion h√§ngt die <b>ActionEvent-</b> R√ºckruffunktion an der <b>Schl√ºsselaktionsvariablen</b> : <br><br><pre> <code class="cpp hljs">var_AddCallback( p_intf-&gt;obj.libvlc, <span class="hljs-string"><span class="hljs-string">"key-action"</span></span>, ActionEvent, p_intf );</code> </pre> <br>  Ein Zeiger auf <b>vlc_object_t</b> , ein Variablenname, eine R√ºckruffunktion und ein Zeiger auf void werden an die Funktion <b>var_AddCallback √ºbergeben</b> , um beliebige Daten zu √ºbergeben, die dann an die angegebene R√ºckruffunktion weitergeleitet werden.  Die Signatur der R√ºckruffunktion ist unten dargestellt. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ActionEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vlc_object_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vlc_value_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vlc_value_t</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *)</span></span></span></span></code> </pre> <br>  Ein Zeiger auf <b>vlc_object_t</b> , der Name der Variablen, die alten und neuen Werte dieser Variablen (in diesem Fall die Kennung der entsprechenden gedr√ºckten Tastenkombination der Aktion) sowie der Zeiger auf zus√§tzliche Daten, die beim Hinzuf√ºgen der R√ºckruffunktion angegeben wurden, werden an die R√ºckruffunktion √ºbergeben . <br><br>  Die direkte Verarbeitung von Hotkey-Ereignissen erfolgt in der <b>PutAction-</b> Funktion, die in der <b>ActionEvent-</b> R√ºckruffunktion <b>aufgerufen</b> wird.  Die <b>PutAction-</b> Funktion akzeptiert eine Kennung eines Ereignisses beim Dr√ºcken einer Tastenkombination ( <b>i_action</b> ) und f√ºhrt mit Hilfe des Switch-Operators die entsprechenden Aktionen aus. <br><br>  Ein R√ºcklaufereignis entspricht beispielsweise <b><code>ACTIONID_JUMP_BACKWARD_SHORT</code></b> .  Um die entsprechende Aktion auszuf√ºhren, wird das R√ºcklaufintervall aus den VLC-Einstellungen (aus der Variablen <b>Short-Jump-Size</b> ) entnommen: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">mtime_t</span></span> it = var_InheritInteger( p_input, varname );</code> </pre> <br>  Um die wiedergegebene Datei zur√ºckzuspulen, stellen Sie einfach die Variable f√ºr den <b>Zeitversatz</b> auf den Wert ein, der der Zeit (in Mikrosekunden) entspricht, um die Sie die Wiedergabe verschieben m√∂chten: <br><br><pre> <code class="cpp hljs">var_SetInteger( p_input, <span class="hljs-string"><span class="hljs-string">"time-offset"</span></span>, it * sign * CLOCK_FREQ );</code> </pre> <br>  F√ºr den schnellen Vorlauf m√ºssen Sie einen positiven Wert angeben, f√ºr den schnellen R√ºcklauf einen negativen.  Die <b>CLOCK_FREQ-Konstante wird</b> zum Konvertieren von Sekunden in Mikrosekunden verwendet. <br><br>  Ebenso √§ndert sich die Audiospur ( <b><code>ACTIONID_AUDIO_TRACK</code></b> Ereignis).  Nur die f√ºr die Audiospur verantwortliche <b>Audio-es-</b> Variable kann einen begrenzten Satz von Werten akzeptieren (entsprechend den in der wiedergegebenen Datei verf√ºgbaren Audiospuren).  Mit der Funktion <b>var_Change ()</b> erhalten Sie eine Liste der m√∂glichen Werte einer Variablen: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">vlc_value_t</span></span> <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>, list2; var_Change( p_input, <span class="hljs-string"><span class="hljs-string">"audio-es"</span></span>, VLC_VAR_GETCHOICES, &amp;<span class="hljs-built_in"><span class="hljs-built_in">list</span></span>, &amp;list2 );</code> </pre> <br>  Neben der Werteliste k√∂nnen Sie mit dieser Funktion auch eine Liste mit Beschreibungen dieser Werte abrufen (in diesem Fall den Namen der Audiospuren).  Jetzt k√∂nnen wir die Audiospur mit der Funktion <b>var_Set ()</b> √§ndern: <br><br><pre> <code class="cpp hljs">var_Set( p_input, <span class="hljs-string"><span class="hljs-string">"audio-es"</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">list</span></span>.p_list-&gt;p_values[i] );</code> </pre> <br>  Wie der Media Player zu verwalten ist, bleibt abzuwarten, wie mit Tastaturereignissen umgegangen wird.  Leider konnte ich keinen neuen Hotkey hinzuf√ºgen.  Alle Hotkeys sind im VLC-Kernelcode ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">src / misc / actions.c</a> ) fest <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">codiert</a> .  Aus diesem Grund habe ich einen Handler f√ºr Tastaturtastenereignisse auf niedrigerer Ebene hinzugef√ºgt und meine R√ºckruffunktion aufgeh√§ngt, um die Variable mit <b>gedr√ºckter Taste</b> zu √§ndern: <br><br><pre> <code class="cpp hljs">var_AddCallback( p_intf-&gt;obj.libvlc, <span class="hljs-string"><span class="hljs-string">"key-pressed"</span></span>, KeyboardEvent, p_intf );</code> </pre> <br>  Die Variable mit <b>gedr√ºckter Taste</b> speichert den Zeichencode (in Unicode), der der zuletzt gedr√ºckten Taste entspricht.  Wenn Sie beispielsweise die Taste mit der Nummer <b>"1"</b> <b>dr√ºcken</b> , wird der Variablen mit der <b>gedr√ºckten Taste</b> der Wert <b><i>49</i></b> zugewiesen (0x00000031 im 16. Zahlensystem).  Sie k√∂nnen andere Zeichencodes unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unicode-table.com anzeigen</a> .  Zus√§tzlich ber√ºcksichtigt der Wert der <b>Tastendruckvariablen</b> das Dr√ºcken von Modifikatortasten, wobei ihnen das vierte signifikante Byte zugewiesen wird.  Wenn Sie beispielsweise die Tastenkombination ‚Äû <b>Strg + 1</b> ‚Äú <b>dr√ºcken</b> , wird der Variablen bei <b>gedr√ºckter Taste</b> der Wert 0x <b>04</b> 000031 (00000 <b>1</b> 00 00000000 00000000 00110001 <sub>2</sub> ) zugewiesen.  Aus Gr√ºnden der √úbersichtlichkeit zeigt die folgende Tabelle die Bedeutungen verschiedener Tastenkombinationen: <br><div class="scrollable-table"><table><tbody><tr><th>  Tastaturk√ºrzel </th><th>  Wert </th></tr><tr><td>  Strg + 1 </td><td>  00000 <b>1</b> 00 00000000 00000000 00110001 <sub>2</sub> </td></tr><tr><td>  Alt + 1 </td><td>  0000000 <b>1</b> 00000000 00000000 00110001 <sub>2</sub> </td></tr><tr><td>  Strg + Alt + 1 </td><td>  00000 <b>1</b> 0 <b>1</b> 00000000 00000000 00110001 <sub>2</sub> </td></tr><tr><td>  Umschalt + 1 </td><td>  000000 <b>1</b> 0 00000000 00000000 <b>00100001</b> <sub>2</sub> </td></tr></tbody></table></div>  Achten Sie auf den Wert, wenn Sie die Kombination ‚Äû <b>Shift + 1</b> ‚Äú dr√ºcken.  Da in diesem Fall die ‚Äú <b>!</b>  ", Dann entspricht der Wert des ersten Bytes dem Code dieses Zeichens in Unicode (0x00000021). <br><br><h1>  Ergebnis </h1><br>  Ich habe mein <b>TIP-</b> Plugin ein Akronym f√ºr den Ausdruck ‚ÄûBitte √ºbersetzen‚Äú genannt, auch Tipp kann als ‚ÄûHinweis‚Äú √ºbersetzt werden.  Der Quellcode f√ºr das Plug-In wird auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> ver√∂ffentlicht. Dort k√∂nnen Sie auch vorgefertigte Plug-In-Assemblys f√ºr Windows und Linux herunterladen. <br><br>  Um das Plugin zu installieren, m√ºssen Sie die Datei <b>libtip_plugin.dll</b> (libtip_plugin.so f√ºr Linux) in den Ordner <i>&lt;path-to-vlc&gt; / plugins kopieren</i> .  Unter Windows wird VLC normalerweise im Ordner <i>C: \ Programme \ VideoLAN \ VLC</i> installiert.  Unter Linux k√∂nnen Sie den Installationsordner mit dem folgenden Befehl finden: <br><br><pre> <code class="plaintext hljs">whereis vlc</code> </pre> <br>  In Ubuntu ist beispielsweise VLC in <i>/ usr / lib / x86_64-linux-gnu / vlc installiert</i> . <br><br>  Als N√§chstes m√ºssen Sie VLC neu starten. Wechseln Sie dann im Hauptmen√º zu <b>Extras</b> &gt; <b>Einstellungen</b> in die erweiterte Ansicht (w√§hlen Sie in der Gruppe <b>Einstellungen</b> anzeigen die Option <b>Alle</b> aus), gehen Sie im linken Bereich zum Abschnitt <b>Benutzeroberfl√§che</b> &gt; <b>Steuerung</b> und aktivieren Sie das Kontrollk√§stchen neben <b>TIPP (bitte √ºbersetzen)</b> .  Dann m√ºssen Sie den VLC erneut starten. <br><br> <a href=""><img src="https://habrastorage.org/webt/df/06/qk/df06qkcl2vbiatwq7j_8uw4m_ey.png"></a> <br><br>  In den Plugin-Einstellungen k√∂nnen Sie die Nummern der Haupt- und Nebenaudiospuren (f√ºr die √úbersetzung) sowie die Zeit (in Sekunden) angeben, um die das Plugin zur√ºckgespult wird, um sie mit der Nebenaudiospur zu wiederholen. <br><br> <a href=""><img src="https://habrastorage.org/webt/mv/9-/vu/mv9-vuo9mfzicqyiqpsopnevrpu.png"></a> <br><br>  Um das Plugin zu steuern, habe ich die folgenden Tastaturk√ºrzel hinzugef√ºgt: <br><br><ul><li>  " <b>/</b> " F√ºr die √úbersetzung </li><li>  " <b>Shift + /</b> ", um das zuvor √ºbersetzte Videofragment mit der <b>Hauptaudiospur</b> zu wiederholen </li></ul><br>  W√§hrend der Ausf√ºhrung der √úbersetzungs- und Wiederholungsbefehle zeigt das Plugin die Meldungen <i>"TIPP: √úbersetzen"</i> und <i>"TIPP: Wiederholen"</i> in der oberen linken Ecke an. <br><br><img src="https://habrastorage.org/webt/4z/bu/1p/4zbu1p5mwskebq8vpbiny_oayr4.png"><br><br>  Aus meiner Erfahrung mit dem Plugin kann ich sagen, dass ich im Allgemeinen mit dem Ergebnis zufrieden bin.  Die Hauptsache ist, den richtigen Inhalt zu w√§hlen, wenn mindestens die H√§lfte der dort verwendeten Fremdsprache verstanden wird, hilft das Plugin bei der √úbersetzung des Rests.  Andernfalls ist das Plugin wahrscheinlich unbrauchbar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de475992/">https://habr.com/ru/post/de475992/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de475980/index.html">Geringe Konnektivit√§t, Architektur und Teamorganisation</a></li>
<li><a href="../de475982/index.html">Wie lerne ich eine Fremdsprache?</a></li>
<li><a href="../de475986/index.html">PocketBook 740 Pro Reader √úbersicht: 7,8 Zoll, Audio- und IPX8-Schutz</a></li>
<li><a href="../de475988/index.html">ML.NET Model Builder-Aktualisierungen</a></li>
<li><a href="../de475990/index.html">Erstellen moderner Cloud-Anwendungen mit Pulumi und .NET Core</a></li>
<li><a href="../de475994/index.html">Coole WSL (Windows Subsystem f√ºr Linux) Tipps und Tricks</a></li>
<li><a href="../de475996/index.html">Hinzuf√ºgen von Quarz zu Spring Boot</a></li>
<li><a href="../de475998/index.html">Anwendung von RPA in wissenschaftlichen und technischen Berechnungen</a></li>
<li><a href="../de476000/index.html">ML.NET Model Builder-Aktualisierungen</a></li>
<li><a href="../de476002/index.html">Erfahrung in der Suche nach einer Doktorandenstelle in Deutschland</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>