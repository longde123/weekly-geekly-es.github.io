<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÖüèº üòÖ üë®üèª‚Äçüåæ Planificaci√≥n de infraestructura para la recuperaci√≥n instant√°nea de m√°quinas virtuales Recuperaci√≥n instant√°nea de VM: Parte 2 üèπ üåõ ü§≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuamos con el tema, que comenz√≥ a considerarse en la primera parte . Hoy hablaremos sobre las conexiones de red y los servidores de destino, pres...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Planificaci√≥n de infraestructura para la recuperaci√≥n instant√°nea de m√°quinas virtuales Recuperaci√≥n instant√°nea de VM: Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/414547/">  Continuamos con el tema, que comenz√≥ a considerarse en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primera parte</a> .  Hoy hablaremos sobre las conexiones de red y los servidores de destino, presentaremos posibles opciones y opciones de planificaci√≥n de infraestructura para una recuperaci√≥n √≥ptima de Instant VM Recovery.  As√≠ que bienvenido al gato. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_5/c2/_c/_5c2_c7beo7ac9tamvuvgr2-_c4.png" width="600" height="271"></div><a name="habracut"></a><br><h1>  Acerca de las conexiones de red </h1><br>  Por supuesto, es bueno tener un canal con un ancho de banda de 10 Gbit / s, a trav√©s del cual se transfieren los datos durante la copia de seguridad.  Sin embargo, el canal es m√°s modesto para restaurar desde una copia de seguridad, pero se recomienda utilizar el equipo de NIC con LACP o SMB Multicanal, o alguna otra opci√≥n con agregaci√≥n de ancho de banda.  Puede usar, por ejemplo, puertos LOM en la versi√≥n 4x1 Gbit / s.  Esta configuraci√≥n se recomienda para la conexi√≥n de "varios dispositivos de origen: 1 dispositivo de copia de seguridad de destino", es decir, cuando se conecta "muchos a uno".  (Del mismo modo, la recuperaci√≥n paralela de un almacenamiento de respaldo a los dispositivos de destino, por regla general, estos son los mismos iniciales desde los que se realizaron los respaldos, es una conexi√≥n de uno a muchos). <br>  Por ejemplo, puede configurar m√∫ltiples trabajos de respaldo de m√∫ltiples hosts Hyper-V / LUN y guardar los respaldos en el mismo almacenamiento de destino.  Si tiene 10 de estos hosts con un ancho de banda de canal total de 4x1 Gbit / s, entonces si tiene una tuber√≠a de 10Gbit / s en el dispositivo de destino, esta es una configuraci√≥n bastante adecuada. <br><br>  En el caso de que el almacenamiento de respaldo sea SMB share, el multicanal funciona muy bien (SMB Direct puede complementarlo si tiene NIC con soporte RDMA configurado).  Estas capacidades ahora son compatibles con muchas implementaciones de cl√∫ster de Hyper-V.  Sin embargo, el componente de la soluci√≥n Veeam responsable del transportador de datos puede usar SMB Multicanal y SMB Direct (nuevamente, con NIC configuradas con soporte RDMA) solo en el escenario cuando usa m√°quinas virtuales almacenadas en SMB File share para respaldo proxy fuera del host.  Estos motores de datos Veeam funcionan respectivamente en el proxy de copia de seguridad fuera del host y en el repositorio.  Tal escenario se describe en detalle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br>  Otro punto importante: cuando se usa la formaci√≥n de equipos de NIC de Windows en <i>modo independiente de Switch</i> , se permite la transferencia de datos de todos los participantes y se recibe de uno solo.  Si desea obtener el rendimiento √≥ptimo en ambas direcciones para un proceso, no necesita usar LACP.  Pero en este caso, debe asegurarse de que se realicen varias restauraciones en el mismo host. <br><br>  Como puede ver, la agregaci√≥n de ancho de banda conlleva una serie de limitaciones y no es completamente id√©ntica a tener un buen canal.  En cualquier caso, debe basarse en escenarios de uso planificados. <br><br>  Resumiendo: dependiendo de su infraestructura, puede usar la formaci√≥n de equipos de NIC de Windows en LACP o en modo de conmutaci√≥n independiente / modo multicanal SMB.  La √∫ltima opci√≥n es √∫til si est√° trabajando con el recurso compartido de archivos SMB y desea usar SMB Direct (no se olvide de las caracter√≠sticas del trabajo mencionado anteriormente). <br><br><img src="https://habrastorage.org/webt/mm/fr/eo/mmfreonnwcu0xo_g0b7qcd3hg-m.png"><br><br>  Se necesita un alto ancho de banda y una baja latencia para proporcionar el mejor rendimiento durante el montaje de discos virtuales, al acceder y copiar datos durante Instant VM Recovery. <br><br>  Puede realizar varias operaciones de recuperaci√≥n al mismo tiempo y a√∫n no detener los trabajos de copia de seguridad.  Es decir, de nuevo, en presencia de un canal decente, el papel principal lo juegan los recursos inform√°ticos y el almacenamiento.  Si todo esto est√° dise√±ado correctamente para la copia de seguridad, la recuperaci√≥n ser√° efectiva. <br><br><h1>  Recomendaciones para dispositivos de destino </h1><br>  Considere varias opciones, de las cuales, posiblemente, elija la mejor para usted. <br><br><h3>  Opci√≥n 1: Recuperar a hosts Hyper-V y directamente al LUN en la infraestructura de producci√≥n </h3><br>  Incluso si tiene un sistema de almacenamiento de alto rendimiento con almacenamiento en cach√© de lectura / escritura o el nivel 1 est√° configurado, entonces, como se mencion√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en una publicaci√≥n anterior</a> , debe tener cuidado de no desbordarse.  De lo contrario, las m√°quinas virtuales de producci√≥n se ver√°n afectadas.  Y esto puede suceder, por ejemplo, si intenta escribir grandes cantidades de datos en el sistema de almacenamiento lo m√°s r√°pido posible, esto sucede al migrar los sistemas de almacenamiento.  En tales operaciones, tratamos de evitar el uso de sistemas de almacenamiento de nivel 1.  Consideraciones similares se aplican a la restauraci√≥n de m√°quinas virtuales grandes. <br><br>  Puede recomendar la recuperaci√≥n para separar los LUN con diferentes perfiles.  Las m√°quinas virtuales restauradas se pueden migrar lentamente a CSV de producci√≥n.  Para garantizar una alta disponibilidad, puede usar el cl√∫ster mediante la migraci√≥n de almacenamiento en vivo (funcionalidad de migraci√≥n de almacenamiento "en vivo").  Naturalmente, debe centrarse en el rendimiento de su matriz de almacenamiento. <br><br><h3>  Opci√≥n 2: recuperaci√≥n a hosts Hyper-V con unidades SSD / NMVe locales </h3><br>  Otro escenario de recuperaci√≥n en producci√≥n, bastante efectivo: usar el host Hyper-V desde el almacenamiento local a SSD o NVMe.  El tama√±o del espacio en disco depende de cu√°ntas m√°quinas virtuales desee recuperar durante un determinado per√≠odo de tiempo y de qu√© tan grandes sean estas m√°quinas virtuales. <br><br>  En teor√≠a, es poco probable que necesite restaurar a todos y todo, por lo que esta configuraci√≥n deber√≠a tener un costo bastante econ√≥mico.  Por ejemplo, puede usar una SSD en cada uno de los nodos del cl√∫ster, o solo en unos pocos, o en general solo en uno.  Cuantos m√°s SSD / NVMe use, m√°s presupuesto podr√° tener, mientras mantiene una distribuci√≥n de carga bastante eficiente entre los hosts.  En la etapa final del procedimiento de recuperaci√≥n instant√°nea, las m√°quinas virtuales se pueden transferir f√°cilmente a CSV de producci√≥n, utilizando la misma funcionalidad de migraci√≥n en vivo de almacenamiento. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fi/o9/bi/fio9bip9q5jezqbtx2xzb6t49lq.png" width="500" height="610"></div><br>  El diagrama muestra una opci√≥n de planificaci√≥n de infraestructura.  Por supuesto, puede combinar los enfoques anteriores a su discreci√≥n. <br><br><h3>  Opci√≥n 3: Recuperar a hosts dedicados de Hyper-V con unidades SSD / NVMe locales </h3><br>  En esta opci√≥n, asignamos uno o m√°s hosts espec√≠ficamente para admitir la recuperaci√≥n.  Esto evita una posible escasez de recursos y el impacto en la operaci√≥n de los hosts de producci√≥n en el cl√∫ster.  Puede usar unidades NVMe.  Recomendamos que pruebe las capacidades de recuperaci√≥n en esta configuraci√≥n de antemano para comprender c√≥mo se est√°n agotando los recursos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_5/c2/_c/_5c2_c7beo7ac9tamvuvgr2-_c4.png" width="600" height="271"></div><br>  Si planea aumentar su consumo, entonces, para la migraci√≥n final de m√°quinas reacondicionadas a producci√≥n, puede usar la llamada migraci√≥n sin compartir recursos Shared Nothing Live Migration.  (Para esto, deber√° establecer configuraciones de seguridad adicionales). En cuanto a los recursos de red, puede utilizar, por ejemplo, las capacidades SMB Multicanal y SMB Direct para la migraci√≥n a CSV / Live Migration / S2D Hyper-V. <br>  S√≠, la migraci√≥n de sistemas de almacenamiento (migraci√≥n en vivo de almacenamiento) no es el proceso m√°s r√°pido, es un inconveniente.  Pero hay una ventaja: sus m√°quinas virtuales se restauran y contin√∫an funcionando durante este proceso. <br><br><h1>  En conclusi√≥n </h1><br>  Por supuesto, todos eligen las opciones preferidas seg√∫n cu√°l sea el cuello de botella en una infraestructura particular (servidor de origen, servidor de destino, recursos de red).  Adem√°s, es muy posible que se requiera un estudio cuidadoso solo para planificar la recuperaci√≥n de las m√°quinas virtuales m√°s cr√≠ticas o para aquellos consumidores que pagan por dicho servicio. <br><br>  En cualquier caso, el objetivo principal siempre ser√° la recuperaci√≥n m√°s r√°pida posible. <br>  Despu√©s de eso, ya es posible migrar de forma segura al sistema de almacenamiento del cl√∫ster, lo que garantiza una alta disponibilidad y tolerancia a fallas.  Y, por supuesto, las m√°quinas virtuales deben protegerse en forma de copia de seguridad / replicaci√≥n en caso de que necesiten restaurarse nuevamente en alg√∫n momento. <br><br><h1>  ¬øQu√© m√°s leer? </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Art√≠culo de Habr sobre planificaci√≥n de infraestructura para recuperaci√≥n instant√°nea de VM (parte 1)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gu√≠a del usuario de Veeam Backup &amp; Replication para Hyper-V (en ruso)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Gu√≠a del usuario de Veeam Backup &amp; Replication para VMware (en ruso)</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es414547/">https://habr.com/ru/post/es414547/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es414531/index.html">Nadie sabe qu√© pasar√° con las compras en l√≠nea a partir del 1 de julio</a></li>
<li><a href="../es414535/index.html">Manchester: el lugar de nacimiento del desaliento, el post-punk y dos famosos clubes de f√∫tbol</a></li>
<li><a href="../es414537/index.html">C√≥mo hicimos uno de los mejores juegos de AR del mundo sin tr√°fico pagado</a></li>
<li><a href="../es414539/index.html">Los cibercriminales roban cada vez m√°s datos personales de los rusos</a></li>
<li><a href="../es414541/index.html">Optimizaci√≥n de la aplicaci√≥n node.js</a></li>
<li><a href="../es414549/index.html">3.000 ojos para inteligencia artificial. ¬øCu√°l es el sistema de monitoreo de estructuras del Centro Lakhta?</a></li>
<li><a href="../es414551/index.html">Instrucciones de admisi√≥n de doctorado en EE. UU.</a></li>
<li><a href="../es414555/index.html">C√≥mo transferimos 36 millones de clientes a un servicio de soporte t√©cnico digital</a></li>
<li><a href="../es414557/index.html">Hackear medidores inteligentes en PHDays 8: an√°lisis del concurso MeterH3cker</a></li>
<li><a href="../es414561/index.html">Escuela de videojuegos francesa: otro mundo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>