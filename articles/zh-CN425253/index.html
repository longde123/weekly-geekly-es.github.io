<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👹 👨🏿‍🏭 👏🏻 我们正在用Python做一个机器学习项目。 第一部分 👌🏻 🙌🏼 🐒</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="完整机器学习项目Python的翻译：第一部分 。 

 当您阅读一本书或听一听有关数据分析的培训课程时，您常常会感觉到您面对的是图片中某些无法放在一起的单独部分。 您可能会害怕采取下一步并借助机器学习完全解决问题的前景，但是借助本系列文章，您将对解决数据科学领域中任何问题的能力充满信心。 

 为了...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我们正在用Python做一个机器学习项目。 第一部分</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nix/blog/425253/"><img src="https://habrastorage.org/getpro/habr/post_images/5de/fed/62e/5defed62ea348f6e02365e283415b2fb.png"><br><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">完整机器学习项目Python的翻译：第一部分</a> 。</i> <br><br> 当您阅读一本书或听一听有关数据分析的培训课程时，您常常会感觉到您面对的是图片中某些无法放在一起的单独部分。 您可能会害怕采取下一步并借助机器学习完全解决问题的前景，但是借助本系列文章，您将对解决数据科学领域中任何问题的能力充满信心。 <br><br> 为了使您最终了解完整的图像，我们建议从头到尾分析使用真实数据进行机器学习的项目。 <br><a name="habracut"></a><br> 依次执行以下步骤： <br><br><ol><li> 清洁和格式化数据。 </li><li> 探索性数据分析。 </li><li> 设计和选择功能。 </li><li> 几种机器学习模型的指标比较。 </li><li> 最佳模型的超参数调整。 </li><li> 在测试数据集上评估最佳模型。 </li><li> 解释模型的结果。 </li><li> 结论并使用文档。 </li></ol><br> 您将学习阶段如何进入另一个阶段以及如何在Python中实现它们。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">整个项目</a>可在GitHub上找到，第一部分位于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处。</a> 在本文中，我们将考虑前三个阶段。 <br><br><h2> 任务说明 </h2><br> 在编写代码之前，您需要了解要解决的问题和可用数据。 在此项目中，我们将使用纽约<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">建筑物的</a>公共<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">能效数据</a> 。 <br><br> 我们的目标是：使用可用数据来构建模型，该模型预测特定建筑物的能源之星评分，并解释结果以查找影响最终评分的因素。 <br><br> 数据已经包含分配的能源之星评分，因此我们的任务是在受控回归下进行机器学习： <br><br><ul><li> 监督：我们知道标志和目的，我们的任务是训练可以比较第一个模型和第二个模型的模型。 </li><li> 回归：能源之星得分是一个连续变量。 </li></ul><br> 我们的模型必须准确-以便可以预测接近真实的“能源之星”评分值-并且可以解释-以便我们了解其预测。 了解目标数据后，我们可以在深入数据和创建模型时进行决策时使用它们。 <br><br><h2> 数据清理 </h2><br> 并非每个数据集都是观察值的完美匹配，没有异常和缺失值（提示<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">mtcars</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">iris</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">数据集</a> ）。 在真实数据中，顺序很少，因此在开始分析之前，需要<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">清除它并将其</a>转换为可接受的格式。 数据清理是解决大多数数据分析任务时不愉快但必不可少的过程。 <br><br> 首先，您可以以Pandas数据框的形式加载数据并检查它们： <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np # <span class="hljs-keyword"><span class="hljs-keyword">Read</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> data <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> a dataframe data = pd.read_csv(<span class="hljs-string"><span class="hljs-string">'data/Energy_and_Water_Data_Disclosure_for_Local_Law_84_2017__Data_for_Calendar_Year_2016_.csv'</span></span>) # Display top <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> dataframe data.head()</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/4ac/637/b86/4ac637b8682b2fcacddd155004681a0d.png"><br>  <i>这就是真实数据的外观。</i> <br><br> 这是一个60列的表格的一部分。 即使在这里，仍然存在一些问题：我们需要预测<code>Energy Star Score</code> ，但我们不知道所有这些列的含义。 尽管这不一定是问题，但是因为您经常可以创建准确的模型而根本不了解变量。 但是可解释性对我们很重要，因此我们需要找出至少几列的含义。 <br><br> 收到此数据时，我们没有询问这些值，而是查看了文件名： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a86/c00/ab2/a86c00ab2d64629e644e7186c78724f7.png"><br><br> 并决定搜索“ 84号地方法律”。 我们发现<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此页面</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">该页面</a>表示我们正在谈论纽约现行法律，根据该法律，一定规模的所有建筑物的所有者都应报告能耗。 进一步的搜索有助于找到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">所有列值</a> 。 因此，不要忽略文件名，它们可以是一个很好的起点。 另外，这提醒您不要着急，不要错过重要的事情！ <br><br> 我们不会研究所有的列，但是我们肯定会处理能源之星评分，其描述如下： <br><br><blockquote> 百分等级是1到100，这是根据建筑物所有者自己的年度能耗报告得出的。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">能源之星评分</a>是用于比较建筑物的能源性能的相对度量。 </blockquote><br> 第一个问题已解决，但第二个问题仍然存在-缺少值，标记为“不可用”。 这是Python中的字符串值，这意味着即使是带数字的字符串也将作为<code>object</code>数据类型存储，因为如果列中有任何字符串，Pandas会将其转换为完全由字符串组成的列。 可以使用<code>dataframe.info()</code>方法找到列数据类型： <br><br><pre> <code class="hljs pgsql"># See the <span class="hljs-keyword"><span class="hljs-keyword">column</span></span> data <span class="hljs-keyword"><span class="hljs-keyword">types</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> non-missing <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> data.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>()</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/db3/b4d/013/db3b4d013ca25d7e5ac483f0c24fa1e4.png"><br><br> 当然，某些明确包含数字的列（例如ft²）将作为对象存储。 我们无法对字符串值进行数值分析，因此我们将其转换为数值数据类型（尤其是<code>float</code> ）！ <br><br> 此代码首先用<i>一个数字</i> （ <code>np.nan</code> ）替换所有“不可用”（可以解释为数字），然后将某些列的内容转换为<code>float</code>类型： <br><br><pre> <code class="hljs pgsql"># Replace <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> occurrences <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Not</span></span> Available <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> a number data = data.replace({<span class="hljs-string"><span class="hljs-string">'Not Available'</span></span>: np.<span class="hljs-keyword"><span class="hljs-keyword">nan</span></span>}) # Iterate through the <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> list(data.<span class="hljs-keyword"><span class="hljs-keyword">columns</span></span>): # <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> that should be <span class="hljs-type"><span class="hljs-type">numeric</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">'ft²'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'kBtu'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'Metric Tons CO2e'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'kWh'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'therms'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'gal'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-string"><span class="hljs-string">'Score'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> col): # Convert the data <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-type"><span class="hljs-type">float</span></span> data[col] = data[col].astype(<span class="hljs-type"><span class="hljs-type">float</span></span>)</code> </pre> <br> 当与我们相对应的列中的值变成数字时，我们可以开始检查数据。 <br><br><h4> 丢失和异常数据 </h4><br> 除了不正确的数据类型外，最常见的问题之一就是缺少值。 由于各种原因可能会不存在这些值，在训练模型之前，必须填写或删除这些值。 首先，让我们找出每一列中有多少个值（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">代码在此处</a> ）。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b0/5da/a40/0b05daa40ba77acca25ed859856759f2.png"><br>  <i>要创建表，使用了<u>StackOverflow</u>分支上的函数。</i> <br><br> 信息应始终谨慎删除，并且如果该列中有很多值，则可能对我们的模型没有好处。 删除列的最佳阈值取决于您的任务（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里是一个讨论</a> ），在我们的项目中，我们将删除多于一半的空列。 <br><br> 同样在此阶段，最好删除异常值。 它们可能是由于输入数据时出现错别字或由于测量单位中的错误而发生，也可能是正确的但极高的值。 在这种情况下，我们将<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">根据极端异常</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">定义</a>删除“额外”值： <br><br><ul><li> 在第一个四分位数下方是一个3 *四分位数范围。 </li><li> 高于第三四分位数+ 3 *四分位数范围。 </li></ul><br>  Github上的记事本上列出了删除列和异常的代码。 完成数据清理过程并清除异常后，我们拥有11,000多座建筑物和49个标志。 <br><br><h2> 探索性数据分析 </h2><br> 无聊但必要的数据清理阶段已经完成，您可以继续学习！  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">探索性数据分析</a> （RAD）是一个无限时间的过程，在此过程中，我们将计算统计数据并查找数据中的趋势，异常，模式或关系。 <br><br> 简而言之，RAD试图弄清楚哪些数据可以告诉我们。 通常，分析是从表面综述开始的，然后我们找到有趣的片段并进行更详细的分析。 这些发现本身可能会很有趣，或者它们可能有助于模型的选择，从而有助于决定我们将使用哪些功能。 <br><br><h4> 单变量图 </h4><br> 我们的目标是预测“能源之星”得分的值（在数据中更名为我们的<code>score</code> ），因此从检查此变量的分布开始是有意义的。 直方图是一种可视化单个变量分布的简单但有效的方法，可以使用<code>matplotlib</code>轻松构建直方图。 <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt # Histogram <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the Energy Star Score plt.style.use(<span class="hljs-string"><span class="hljs-string">'fivethirtyeight'</span></span>) plt.hist(data[<span class="hljs-string"><span class="hljs-string">'score'</span></span>].dropna(), bins = <span class="hljs-number"><span class="hljs-number">100</span></span>, edgecolor = <span class="hljs-string"><span class="hljs-string">'k'</span></span>); plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Score'</span></span>); plt.ylabel(<span class="hljs-string"><span class="hljs-string">'Number of Buildings'</span></span>); plt.title(<span class="hljs-string"><span class="hljs-string">'Energy Star Score Distribution'</span></span>);</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/f82/bf3/84a/f82bf384af1bd0c407f1e680d0b47263.png"><br><br> 看起来可疑！ 能源之星评分是一个百分位数，因此当每个点分配给相同数量的建筑物时，您应该期望分配均匀。 但是，不成比例的大量建筑物获得了最高和最低的结果（对于能源之星评分，越大越好）。 <br><br> 如果再次查看该得分的定义，我们将看到它是根据“由建筑物所有者独立填写的报告”计算得出的，这可以解释非常大的值的过高之处。 要求建筑业主报告其能源消耗就像要求学生在考试中报告其成绩。 因此，这可能不是评估房地产能源效率的最客观标准。 <br><br> 如果我们有无限的时间供应，那么我们可以找出为什么这么多建筑物达到很高和很低的点。 为此，我们必须选择适当的建筑物并仔细分析它们。 但是，我们只需要学习如何预测分数，而无需开发更准确的评估方法。 您可以标记自己为可疑点，但我们将重点放在预测上。 <br><br><h4> 关系搜索 </h4><br>  AHFR的主要部分是寻找标志与目标之间的关系。 与之相关的变量可用于模型，因为它们可用于预测。 研究分类变量（仅需要有限的一组值）对目标的影响的一种方法是使用Seaborn库绘制密度。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">密度图可以视为平滑的直方图，</a>因为它显示了单个变量的分布。 您可以为图表上的各个类着色，以查看分类变量如何更改分布。 该代码绘制了能源之星得分密度图表，根据建筑物的类型（对于尺寸超过100的建筑物列表）进行了着色： <br><br><pre> <code class="hljs pgsql"># <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> a list <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> buildings <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> more than <span class="hljs-number"><span class="hljs-number">100</span></span> measurements <span class="hljs-keyword"><span class="hljs-keyword">types</span></span> = data.dropna(subset=[<span class="hljs-string"><span class="hljs-string">'score'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">types</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">types</span></span>[<span class="hljs-string"><span class="hljs-string">'Largest Property Use Type'</span></span>].value_counts() <span class="hljs-keyword"><span class="hljs-keyword">types</span></span> = list(<span class="hljs-keyword"><span class="hljs-keyword">types</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">types</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">values</span></span> &gt; <span class="hljs-number"><span class="hljs-number">100</span></span>].<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>) # Plot <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> distribution <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> scores <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> building categories figsize(<span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>) # Plot <span class="hljs-keyword"><span class="hljs-keyword">each</span></span> building <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> b_type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">types</span></span>: # <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> the building <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> subset = data[data[<span class="hljs-string"><span class="hljs-string">'Largest Property Use Type'</span></span>] == b_type] # Density plot <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Energy Star Scores sns.kdeplot(subset[<span class="hljs-string"><span class="hljs-string">'score'</span></span>].dropna(), label = b_type, shade = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, alpha = <span class="hljs-number"><span class="hljs-number">0.8</span></span>); # label the plot plt.xlabel(<span class="hljs-string"><span class="hljs-string">'Energy Star Score'</span></span>, size = <span class="hljs-number"><span class="hljs-number">20</span></span>); plt.ylabel(<span class="hljs-string"><span class="hljs-string">'Density'</span></span>, size = <span class="hljs-number"><span class="hljs-number">20</span></span>); plt.title(<span class="hljs-string"><span class="hljs-string">'Density Plot of Energy Star Scores by Building Type'</span></span>, size = <span class="hljs-number"><span class="hljs-number">28</span></span>);</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/23a/718/fd3/23a718fd3139123b609e2521ffe46e3c.png"><br><br> 如您所见，建筑物的类型极大地影响了点数。 办公大楼通常得分较高，而酒店则较低。 因此，您需要在模型中包括建筑物的类型，因为该符号会影响我们的目标。 作为分类变量，我们必须对建筑物类型执行一次热编码。 <br><br> 可以使用类似的图形来按城市区域估算能源之星得分： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/224/c69/820/224c69820a5c0362f804e37ae7d5de55.png"><br><br> 面积对得分的影响不如建筑物类型大。 尽管如此，我们仍将其包括在模型中，因为区域之间存在细微差异。 <br><br> 要计算变量之间的关系，可以使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pearson相关系数</a> 。 这是两个变量之间线性关系的强度和方向的量度。 值+1表示完全线性正关系，而值-1表示完全线性负关系。 以下是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pearson相关系</a>数值的一些示例： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0b3/455/654/0b34556548ab206112024fb0e8f69c01.png"><br><br> 尽管该系数不能反映非线性依赖性，但是可以从它开始评估变量之间的关系。 在Pandas中，您可以轻松计算数据框中任何列之间的相关性： <br><br><pre> <code class="hljs pgsql"># Find <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> correlations <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> the score <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> sort correlations_data = data.corr()[<span class="hljs-string"><span class="hljs-string">'score'</span></span>].sort_values()</code> </pre> <br> 与目标最负相关： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b62/181/178/b62181178669962fccf7caa472d9e2e8.png"><br><br> 最积极的是： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/598/47f/14a/59847f14a4d8afe1ce8ff237c5d3fa36.png"><br><br> 属性和目标之间存在很强的负相关性，其中最大的属于不同的EUI类别（计算这些指标的方法略有不同）。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">EUI（能源使用强度</a> ）是建筑物消耗的能量除以平方英尺的面积。 该特定值用于评估能效，数值越小越好。 逻辑表明这些相关性是合理的：如果EUI增加，则能源之星得分应下降。 <br><br><h4> 二元图 </h4><br> 我们使用散点图可视化两个连续变量之间的关系。 您可以将其他信息添加到点的颜色，例如，分类变量。 能源之星评分和EUI之间的关系如下所示，颜色表示不同类型的建筑物： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/974/204/7de/9742047ded29c74a9a8e6df9bf6396d1.png"><br><br> 该图使您可以直观地看到-0.7的相关系数。 随着EUI的降低，能源之星评分增加，这种关系在不同类型的建筑物中都可以观察到。 <br><br> 我们最新的研究图表称为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">对图</a> 。 这是查看不同变量对和单个变量分布之间关系的好工具。 我们将使用Seaborn库和PairGrid函数创建一个配对图，在上三角图中具有散点图，在对角直方图，二维核心密度图和下三角中具有相关系数。 <br><br><pre> <code class="hljs pgsql"># Extract the <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> plot plot_data = features[[<span class="hljs-string"><span class="hljs-string">'score'</span></span>, <span class="hljs-string"><span class="hljs-string">'Site EUI (kBtu/ft²)'</span></span>, <span class="hljs-string"><span class="hljs-string">'Weather Normalized Source EUI (kBtu/ft²)'</span></span>, <span class="hljs-string"><span class="hljs-string">'log_Total GHG Emissions (Metric Tons CO2e)'</span></span>]] # Replace the inf <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">nan</span></span> plot_data = plot_data.replace({np.inf: np.<span class="hljs-keyword"><span class="hljs-keyword">nan</span></span>, -np.inf: np.<span class="hljs-keyword"><span class="hljs-keyword">nan</span></span>}) # <span class="hljs-keyword"><span class="hljs-keyword">Rename</span></span> <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> plot_data = plot_data.<span class="hljs-keyword"><span class="hljs-keyword">rename</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> = {<span class="hljs-string"><span class="hljs-string">'Site EUI (kBtu/ft²)'</span></span>: <span class="hljs-string"><span class="hljs-string">'Site EUI'</span></span>, <span class="hljs-string"><span class="hljs-string">'Weather Normalized Source EUI (kBtu/ft²)'</span></span>: <span class="hljs-string"><span class="hljs-string">'Weather Norm EUI'</span></span>, <span class="hljs-string"><span class="hljs-string">'log_Total GHG Emissions (Metric Tons CO2e)'</span></span>: <span class="hljs-string"><span class="hljs-string">'log GHG Emissions'</span></span>}) # <span class="hljs-keyword"><span class="hljs-keyword">Drop</span></span> na <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> plot_data = plot_data.dropna() # <span class="hljs-keyword"><span class="hljs-keyword">Function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> calculate correlation coefficient <span class="hljs-keyword"><span class="hljs-keyword">between</span></span> two <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> def corr_func(x, y, **kwargs): r = np.corrcoef(x, y)[<span class="hljs-number"><span class="hljs-number">0</span></span>][<span class="hljs-number"><span class="hljs-number">1</span></span>] ax = plt.gca() ax.annotate("r = {:.2f}".format(r), xy=(<span class="hljs-number"><span class="hljs-number">.2</span></span>, <span class="hljs-number"><span class="hljs-number">.8</span></span>), xycoords=ax.transAxes, size = <span class="hljs-number"><span class="hljs-number">20</span></span>) # <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> the pairgrid <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> grid = sns.PairGrid(data = plot_data, size = <span class="hljs-number"><span class="hljs-number">3</span></span>) # Upper <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a scatter plot grid.map_upper(plt.scatter, color = <span class="hljs-string"><span class="hljs-string">'red'</span></span>, alpha = <span class="hljs-number"><span class="hljs-number">0.6</span></span>) # Diagonal <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a histogram grid.map_diag(plt.hist, color = <span class="hljs-string"><span class="hljs-string">'red'</span></span>, edgecolor = <span class="hljs-string"><span class="hljs-string">'black'</span></span>) # Bottom <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> correlation <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> density plot grid.map_lower(corr_func); grid.map_lower(sns.kdeplot, cmap = plt.cm.Reds) # Title <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> entire plot plt.suptitle(<span class="hljs-string"><span class="hljs-string">'Pairs Plot of Energy Data'</span></span>, size = <span class="hljs-number"><span class="hljs-number">36</span></span>, y = <span class="hljs-number"><span class="hljs-number">1.02</span></span>);</code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/5fa/4cc/94f/5fa4cc94f9b91df5ad4fda37aa3ae1f0.png"><br><br> 要查看变量之间的关系，请查找行和列的交集。 假设您要查看<code>Weather Norm EUI</code>和<code>score</code>之间的相关性，然后寻找<code>Weather Norm EUI</code>系列和<code>score</code>列，它们的相交系数为-0.67。 这些图不仅看起来很酷，而且还有助于选择模型的变量。 <br><br><h2> 设计和特征选择 </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">设计和选择功能</a>通常会在机器学习上花费的时间带来最大的回报。 首先我们给出定义： <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">特征构建：</a>从原始数据中提取或创建新特征<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的</a>过程。 要在模型中使用变量，您可能需要对其进行转换，例如，采用自然对数，或提取平方根，或对分类变量应用一键编码。 可以将特征设计视为从原始数据创建其他功能。 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">特征选择：</a>从数据中选择最相关的特征<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的</a>过程，在此过程中，我们删除了一些特征以帮助模型更好地概括新数据，以获得更易解释的模型。 标志的选择可以被认为是去除了“多余的”，因此只有最重要的部分仍然存在。 </li></ul><br> 机器学习模型只能从我们提供的数据中学习，因此确保我们包含与任务相关的所有信息非常重要。 如果您没有为模型提供正确的数据，它将无法学习，也无法产生准确的预测！ <br><br> 我们将执行以下操作： <br><br><ul><li> 适用于分类变量（所有权的季度和类型）一键编码。 </li><li> 加上所有数值变量的自然对数。 </li></ul><br> 为了将分类变量包括在模型中，必须进行<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">一次热编码</a> 。 机器学习算法将无法理解“办公室”的类型，因此，如果建筑物是办公室，我们将为其分配属性1；如果不是办公室，则将属性分配为0。 <br><br> 添加变换后的特征将有助于模型了解数据中的非线性关系。 在数据分析中，通常的做法<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">是提取平方根，取自然对数或以某种方式转换符号</a> ，这取决于特定的任务或您对最佳技术的了解。 在这种情况下，我们将添加所有数字符号的自然对数。 <br><br> 该代码选择数字符号，计算其对数，选择两个分类符号，对其进行一次热编码，然后将这两个集合组合为一个。 从描述来看，还有很多工作要做，但是在Pandas中，一切都很简单！ <br><br><pre> <code class="hljs pgsql"># <span class="hljs-keyword"><span class="hljs-keyword">Copy</span></span> the original data features = data.<span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>() # <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> the <span class="hljs-type"><span class="hljs-type">numeric</span></span> <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> numeric_subset = data.select_dtypes(<span class="hljs-string"><span class="hljs-string">'number'</span></span>) # <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">log</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">numeric</span></span> <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> col <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> numeric_subset.<span class="hljs-keyword"><span class="hljs-keyword">columns</span></span>: # Skip the Energy Star Score <span class="hljs-keyword"><span class="hljs-keyword">column</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> col == <span class="hljs-string"><span class="hljs-string">'score'</span></span>: next <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: numeric_subset[<span class="hljs-string"><span class="hljs-string">'log_'</span></span> + col] = np.log(numeric_subset[col]) # <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> the categorical <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> categorical_subset = data[[<span class="hljs-string"><span class="hljs-string">'Borough'</span></span>, <span class="hljs-string"><span class="hljs-string">'Largest Property Use Type'</span></span>]] # One hot encode categorical_subset = pd.get_dummies(categorical_subset) # <span class="hljs-keyword"><span class="hljs-keyword">Join</span></span> the two dataframes <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> concat # Make sure <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> use axis = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">perform</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">column</span></span> bind features = pd.concat([numeric_subset, categorical_subset], axis = <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br> 现在，我们拥有110列（标记）的11,000多个观测值（建筑物）。 并非所有的符号都对预测能源之星得分有用，因此我们将选择符号并删除一些变量。 <br><br><h4> 功能选择 </h4><br> 可用的110个标志中有许多是多余的，因为它们相互之间有很强的相关性。 例如，这是EUI和天气标准化站点EUI的图形，相关系数为0.997。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ab/c4f/ad8/4abc4fad887ef202d8d40961a8b02c34.png"><br><br> 彼此强烈相关的符号称为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">共线</a> 。 在这样的属性对中删除一个变量通常有助于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">模型泛化并且更易于解释</a> 。 请注意，我们在谈论的是某些符号与其他符号的相关性，而不是与目标的相关性，这只会对我们的模型有所帮助！ <br><br> 有多种计算特征共线性的方法，其中最流行的一种是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">方差膨胀因子</a> 。 我们将使用bcorrelation系数搜索和删除共线特征。 如果一对符号之间的相关系数大于0.6，则我们将其丢弃。 该代码位于记事本中（并用于响应<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Stack Overflow</a> ）。 <br><br> 该值看起来是任意的，但实际上我尝试了不同的阈值，以上所述使我可以创建最佳模型。 机器学习是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">经验性的</a> ，通常必须进行实验以找到最佳解决方案。 选择后，我们有64个属性和一个目标。 <br><br><pre> <code class="hljs pgsql"># Remove <span class="hljs-keyword"><span class="hljs-keyword">any</span></span> <span class="hljs-keyword"><span class="hljs-keyword">columns</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> na <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> features = features.dropna(axis=<span class="hljs-number"><span class="hljs-number">1</span></span>, how = <span class="hljs-string"><span class="hljs-string">'all'</span></span>) print(features.shape) (<span class="hljs-number"><span class="hljs-number">11319</span></span>, <span class="hljs-number"><span class="hljs-number">65</span></span>)</code> </pre> <br><h2> 选择基本等级 </h2><br> 我们清除了数据，进行了探索性分析，并构造了标志。 在继续创建模型之前，您需要选择初始基准级别（未使用的基准），这是一种假设，我们将以此与模型结果进行比较。 如果它们低于基本水平，我们将假定机器学习不适用于此任务，或者应尝试其他方法。 <br><br> 对于回归任务，作为基本级别，对于测试集中的所有示例，合理地猜测训练集上目标的中间值是合理的。 这些套件为任何型号设置的障碍都相对较低。 <br><br> 作为指标，我们将预测中的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">平均绝对误差（mae）</a>作为标准。 还有许多其他回归指标，但是我喜欢选择一个指标并使用它评估模型的建议。 而且平均绝对误差易于计算和解释。 <br><br> 在计算基础水平之前，您需要将数据分为训练和测试集： <br><br><ol><li> 我们在训练期间提供模型的属性以及答案。 模型必须学会匹配目标的特征。 </li><li> 测试功能集用于评估训练后的模型。 当她处理测试套件时，她看不到正确答案，只能根据可用功能进行预测。 我们知道测试数据的答案，可以将预测结果与它们进行比较。 </li></ol><br> 对于培训，我们使用70％的数据，而对于测试-30％： <br><br><pre> <code class="hljs pgsql"># Split <span class="hljs-keyword"><span class="hljs-keyword">into</span></span> <span class="hljs-number"><span class="hljs-number">70</span></span>% training <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-number"><span class="hljs-number">30</span></span>% testing <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> X, X_test, y, y_test = train_test_split(features, targets, test_size = <span class="hljs-number"><span class="hljs-number">0.3</span></span>, random_state = <span class="hljs-number"><span class="hljs-number">42</span></span>)</code> </pre> <br> 现在我们计算初始基础水平的指标： <br><br><pre> <code class="hljs vhdl"># <span class="hljs-keyword"><span class="hljs-keyword">Function</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> calculate mean absolute <span class="hljs-literal"><span class="hljs-literal">error</span></span> def mae(y_true, y_pred): <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> np.mean(<span class="hljs-keyword"><span class="hljs-keyword">abs</span></span>(y_true - y_pred)) baseline_guess = np.median(y) print(<span class="hljs-symbol"><span class="hljs-symbol">'The</span></span> baseline guess <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a score <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> %<span class="hljs-number"><span class="hljs-number">0.2</span></span>f' % baseline_guess) print(<span class="hljs-string"><span class="hljs-string">"Baseline Performance on the test set: MAE = %0.4f"</span></span> % mae(y_test, baseline_guess))</code> </pre> <br>  <b>基线猜测为66.00</b> <b><br></b>  <b>测试集的基准性能：MAE = 24.5164</b> <br><br> 测试仪上的平均绝对误差约为25分。 由于我们的评估范围是1到100，因此误差为25％-该模型的障碍很小！ <br><br><h2> 结论 </h2><br> 您在本文中，我们经历了使用机器学习解决问题的前三个阶段。 设置任务后，我们： <br><br><ol><li> 清除并格式化原始数据。 </li><li> 进行探索性分析以研究可用数据。 </li><li> 我们开发了将用于模型的一组功能。 </li></ol><br> ,    ,       . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Scikit-Learn</a>    ,        . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN425253/">https://habr.com/ru/post/zh-CN425253/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN425243/index.html">约翰·威利斯手册</a></li>
<li><a href="../zh-CN425245/index.html">RamblerFront和＃6的公告</a></li>
<li><a href="../zh-CN425247/index.html">测试中的众包</a></li>
<li><a href="../zh-CN425249/index.html">如何与ITMO大学的LLP相识：“低级编程”课程</a></li>
<li><a href="../zh-CN425251/index.html">LoJax：恶意活动中使用的第一个已知UEFI Rootkit</a></li>
<li><a href="../zh-CN425255/index.html">Broo无损压缩算法和增量编码，与Xdelta3进行比较。 家庭项目开发</a></li>
<li><a href="../zh-CN425259/index.html">使用git和Makefile备份您的网站</a></li>
<li><a href="../zh-CN425261/index.html">EV证书已失效</a></li>
<li><a href="../zh-CN425263/index.html">iFEST音乐节将在下诺夫哥罗德举行</a></li>
<li><a href="../zh-CN425265/index.html">Yandex.Health的开发规则</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>