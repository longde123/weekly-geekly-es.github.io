<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ÜñÔ∏è „äôÔ∏è üï¶ Como economizar recursos no navegador e n√£o quebrar a web. Relat√≥rio Yandex üë®‚Äçüë®‚Äçüë¶‚Äçüë¶ ‚õîÔ∏è üë©üèº‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apesar do crescimento do desempenho do dispositivo, a web est√° se tornando cada vez mais exigente em mem√≥ria e processador. A renderiza√ß√£o adequada e ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como economizar recursos no navegador e n√£o quebrar a web. Relat√≥rio Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/442456/"> Apesar do crescimento do desempenho do dispositivo, a web est√° se tornando cada vez mais exigente em mem√≥ria e processador.  A renderiza√ß√£o adequada e a aloca√ß√£o inteligente de recursos entre as guias s√£o uma parte importante da solu√ß√£o desse problema.  Konstantin Kramlih <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">PurplePowder</a> dedicou seu discurso na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">confer√™ncia</a> ‚ÄúI Frontend‚Äù a algoritmos que melhoram a produtividade e economizam recursos, tanto no projeto Chromium quanto no Yandex.Browser. <br><br>  Alguns deles - por exemplo, a tecnologia Hibernate - j√° classificamos em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">post separado</a> .  O relat√≥rio Bones cobre o problema de maneira mais ampla: n√£o apenas do ponto de vista da troca de guias, mas tamb√©m levando em considera√ß√£o os m√©todos de renderiza√ß√£o de conte√∫do, blocos e camadas de p√°gina. <br><br>  No final, os desenvolvedores de interface da Web podem aprender a identificar e resolver problemas de desempenho do site. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6OLVN_gprow" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Meu nome √© Kostya, sou o chefe do grupo de desenvolvimento de componentes internos da equipe Yandex.Browser.  No navegador, fa√ßo coisas diferentes h√° pouco mais de cinco anos: de toda decodifica√ß√£o em um navegador, de todos os v√≠deos HTML5 a renderiza√ß√£o, renderiza√ß√£o e outros processos semelhantes. <br><br><a name="habracut"></a>  Nos √∫ltimos um ano e meio a dois anos, participei de projetos relacionados √† economia de recursos no navegador: CPU, mem√≥ria, bateria. <br><br>  Voc√™ diz - Kostya, no quintal de 2019, onde est√£o os problemas com recursos?  Voc√™ pode comprar qualquer dispositivo que desejar com quaisquer recursos.  Mas se voltarmos para as estat√≠sticas abertas do Mozilla, veremos que metade dos usu√°rios tem 4 GB de mem√≥ria ou menos.  E muitos usu√°rios que t√™m um ou dois n√∫cleos f√≠sicos representam uma propor√ß√£o consider√°vel de seu p√∫blico.  Neste mundo em que vivemos. <br><br><img src="https://habrastorage.org/webt/vr/cx/q0/vrcxq0duik8iaocs9q0v7xbkcqs.jpeg"><br><br>  Quantos de voc√™s costumam ver esta guia?  √â exatamente o que acontece no caso de usu√°rios comuns que t√™m pouca mem√≥ria RAM e computadores antigos. <br><br><img src="https://habrastorage.org/webt/kd/kq/db/kdkqdbilt2lzsmz5q5p5xgizgci.jpeg"><br><br>  O que fazer  O problema n√£o √© segredo para ningu√©m, eles come√ßaram a lutar ativamente com ele cerca de tr√™s anos atr√°s.  Desde ent√£o, as porcas foram gradualmente apertadas de v√°rias maneiras.  Deixe-me mostrar um exemplo que foi publicado no Stack Overflow em 2016.  Aqui est√° um trecho bem simples.  Isso apenas atualiza o t√≠tulo e define o tempo decorrido desde o √∫ltimo lan√ßamento desta fun√ß√£o.  O que deve ser obtido idealmente?  Cada 100 ms no t√≠tulo deve ser escrito + -100.  Que sorte. <br><br><img src="https://habrastorage.org/webt/eh/fs/3h/ehfs3hfvws_8dd1t_fxe29qgdui.jpeg"><br><br>  Mas e se abrirmos e fizermos isso?  Algu√©m j√° encontrou isso?  A pergunta foi para Stack Overflow: que diabos o Cookie Clicker para de funcionar nas minhas guias de segundo plano?  Essa foi uma das primeiras iniciativas do Chromium destinadas a reduzir o uso da CPU no navegador.  A ideia era que, se o usu√°rio n√£o usa a guia agora, ele n√£o precisa mais agora - vamos colocar JS nela. <br><br>  O navegador tenta manter a carga da CPU nesta guia em cerca de 1% - come√ßa a pausar todos os tipos de temporizadores, execu√ß√£o de JS, etc. Essa √© uma das primeiras etapas no futuro brilhante. <br><br><img src="https://habrastorage.org/webt/qf/vu/_c/qfvu_cyufv3gab9rsell45yv-6g.jpeg"><br><br>  Ap√≥s algum tempo no navegador, voc√™ ter√° uma situa√ß√£o em que as guias de segundo plano param de funcionar.  Este √© o futuro brilhante de que estou falando.  De acordo com os planos do Chromium, que eles expressaram no √∫ltimo BlinkOn, em 2020 eles planejam faz√™-lo: deixe a guia carregar e, se estiver em segundo plano, n√£o far√° nada.  Voc√™ sempre precisa estar preparado para isso. <br><br><img src="https://habrastorage.org/webt/u2/_i/gx/u2_igx67m7vxehtknn_-juntdjs.jpeg"><br><br>  No Yandex.Browser, tamb√©m resolvemos esse problema, mas o resolvemos menos categoricamente e n√£o quebramos a Web inteira.  Criamos um modo de economia de energia que desativa a decodifica√ß√£o no processador e deixa apenas a decodifica√ß√£o na placa de v√≠deo, al√©m de diminuir o FPS e desativar algumas anima√ß√µes que n√£o s√£o necess√°rias no momento e em vez das quais o usu√°rio deve economizar bateria.  Isso nos deu cerca de uma hora de dura√ß√£o extra da bateria.  Qualquer um pode verificar, iXBT, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">verificado</a> . <br><br><img src="https://habrastorage.org/webt/vi/jx/kb/vijxkbmraau6ziqjhlswbz_u-t4.jpeg"><br><br>  Acho que alguns dir√£o: Kostya, voc√™ "quebrou" a Web, ajudou alguns usu√°rios, mas n√£o apresentou nada mais inteligente.  Adicione hardcore!  Como os navegadores desenham p√°ginas? <br><br><img src="https://habrastorage.org/webt/u4/2j/hy/u42jhyxml4ljdmmd6iu69azgl4g.jpeg"><br><br>  O conceito de camadas, em poucas palavras, √© quando o navegador tenta dividir a p√°gina em camadas e desenh√°-las separadamente.  Isso √© feito para que algumas anima√ß√µes sejam executadas e n√£o force o redesenho do que √© est√°tico.  O navegador faz isso em diferentes heur√≠sticas.  Por exemplo - tentando selecionar um elemento de v√≠deo em uma camada separada, que, obviamente, rapidamente e com frequ√™ncia redesenha.  E se for mostrado em algum lugar, n√£o ser√° necess√°rio redesenhar tudo. <br><br>  Al√©m disso, cada camada √© dividida em tais blocos - ret√¢ngulos de 256 por 256. No inspetor, voc√™ pode ver algo assim.  H√° um quadro que √© dividido em um monte de pe√ßas. <br><br><img src="https://habrastorage.org/webt/li/g7/ft/lig7ftmhfrgn3r_rlppouwefs8w.jpeg"><br><br><img src="https://habrastorage.org/webt/ip/1e/ud/ip1eudzb0uatttxq7-ydfb-aqe0.jpeg"><br><br>  O que √© e por que √© necess√°rio?  Primeiro de tudo, para priorizar a renderiza√ß√£o.  Se temos uma salsicha enorme, na qual todos desenhamos, por que precisamos desenhar tudo isso se agora o usu√°rio v√™ apenas o que tem agora no ViewPort? <br><br><img src="https://habrastorage.org/webt/4q/nf/5o/4qnf5oxbb4j3ta9jfxca9urof3c.jpeg"><br><br>  Usando essa abordagem, primeiro desenhamos apenas o que o usu√°rio v√™ agora no ViewPort, depois um lado a lado e depois na dire√ß√£o do pergaminho.  Se o usu√°rio rolar para baixo - puxe para baixo, se for para cima.  Todo o resto ser√° desenhado apenas se tivermos uma cota para esses blocos e pudermos desenh√°-los, ap√≥s o que o usu√°rio os ver√°.  Ou talvez nunca. <br><br><img src="https://habrastorage.org/webt/vt/vd/uw/vtvduwiv5swz_ogt7vkpwr8_rjc.jpeg"><br><br>  Tamb√©m ajuda muito com defici√™ncias.  Suponha que um usu√°rio abra uma p√°gina, selecione uma pe√ßa e n√£o seja necess√°rio redesenhar tudo.  Podemos deixar a maior parte da renderiza√ß√£o anterior.  Vamos redesenhar seis pe√ßas aqui, e tudo ficar√° bem. <br><br><img src="https://habrastorage.org/webt/5z/4p/uw/5z4puwbbmkpqcdqbip5yh1lstew.jpeg"><br><br>  Apenas nesse n√≠vel, v√°rias otimiza√ß√µes muito bem-sucedidas foram feitas.  Por exemplo, o Chromium fez essa otimiza√ß√£o por volta de 2017. <br><br><img src="https://habrastorage.org/webt/vc/lk/gy/vclkgyedfjzyc5wreb-q4t52pv0.jpeg"><br><br>  Se temos apenas uma renderiza√ß√£o pequena, fazemos apenas isso.  Em seguida, o cursor pisca e redesenhamos apenas a √°rea do cursor, mas n√£o a √°rea inteira desse bloco.  Economizamos muito a CPU para n√£o redesenhar tudo. <br><br><img src="https://habrastorage.org/webt/ax/-a/cv/ax-acv5ypcljlc7jkheipeut6ek.jpeg"><br><br>  Tamb√©m ajuda a economizar mem√≥ria.  Qual √© o problema aqui?  Ret√¢ngulos brancos inteiros.  Imagine que seria uma textura de 256 por 256, quatro bytes por pixel.  Embora pare√ßa que essa √°rea possa ser codificada com apenas cinco n√∫meros: coordenadas, largura, altura e cor. <br><br><img src="https://habrastorage.org/webt/ho/kx/kt/hokxktfgpxja01guodvgtxdhv6q.jpeg"><br><br>  No Chromium, a otimiza√ß√£o de √°reas monocrom√°ticas foi realizada.  Se o navegador entender que n√£o h√° renderiza√ß√£o nesse ret√¢ngulo, que √© completamente monocrom√°tico, n√£o √© transparente e atende a outras condi√ß√µes, basta dizer √† placa de v√≠deo - desenhe um ret√¢ngulo branco, n√£o selecione toda a textura. <br><br>  O que mais pode ser otimizado aqui?  Se voc√™ olhar para os blocos restantes - eles t√™m um pouco de conte√∫do e uma enorme √°rea de cor branca.  No Yandex.Browser, pensamos sobre isso e criamos um mecanismo que chamamos de mosaico adapt√°vel. <br><br><img src="https://habrastorage.org/webt/xr/vc/9j/xrvc9j8bqm5fpslcp1jbkvjzqpy.jpeg"><br><br>  H√° um pequeno ret√¢ngulo, um azulejo.  H√° pouco conte√∫do no meio do bloco.  N√≥s o selecionamos e - somente abaixo dele - a textura.  Todo o resto tamb√©m √© dividido em v√°rias √°reas, das quais estamos falando sobre a placa de v√≠deo: basta desenhar em branco aqui deste tamanho. <br><br><img src="https://habrastorage.org/webt/jh/ow/c7/jhowc7oh1nxm6-ofebqgzznnaya.jpeg"><br><br>  A p√°gina tamb√©m come√ßa a salvar tudo o que est√° destacado em vermelho.  Em p√°ginas mais complexas, √© algo parecido com isto. <br><br><img src="https://habrastorage.org/webt/of/pu/lz/ofpulzw2yanibpfx7vrweogcsr8.jpeg"><br><br>  √â importante entender que ainda existem v√°rias camadas e cada camada √© desenhada assim.  Em cada camada, voc√™ pode economizar uma certa quantidade de mem√≥ria.  Essa abordagem nos permitiu economizar cerca de 40% da mem√≥ria de v√≠deo em m√©dia para todos os usu√°rios. <br><br>  Mais hardcore!  Eles economizaram um pouco de mem√≥ria aqui, eles "quebraram" a web - por que n√£o "quebram" a web ainda mais? <br><br>  No Chromium, h√° algo como uma pol√≠tica: se o usu√°rio n√£o usar as guias em segundo plano, se as tiver deixado, ele n√£o precisar√° delas.  Se agora estamos sem mem√≥ria e o navegador est√° desativado, vamos pegar a guia mais antiga que o usu√°rio n√£o usa h√° muito tempo e mat√°-la.  Ela permanecer√° na interface, mas o processo n√£o estar√° mais l√°, todas as JS morrer√£o.  Tudo bem ou n√£o?  √â estranho fazer essa pergunta na parte do front-end e esperar outra resposta que n√£o seja "O que voc√™ est√° fazendo?" <br><br><img src="https://habrastorage.org/webt/ui/5j/nq/ui5jnqtbegu672hy2tzbfiglhrk.jpeg"><br><br>  Ent√£o n√£o foi muito.  Aqui est√£o os verdadeiros coment√°rios do blog Chromium: voc√™ quebrou todos os meus aplicativos para mim, houve algum tipo de jogo - e, pule, ele n√£o tem nenhum estado.  √â importante entender que o manipulador de descarga n√£o funcionou, como se tiv√©ssemos simplesmente colocado esta guia.  O usu√°rio retorna a ele e o recarregamos da rede, como se nada tivesse acontecido. <br><br>  Ent√£o, essa abordagem foi temporariamente abandonada e surgiu com uma id√©ia s√©ria mais ponderada.  Eles a chamaram de descartada. <br><br><img src="https://habrastorage.org/webt/x2/7w/zq/x27wzq5kw55gtlcsduajusa3yoi.jpeg"><br><br>  Qual √© o objetivo?  Este √© o mesmo assassinato de abas, apenas controlado.  Ele √© chamado de palavra inteligente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Page Lifecycle API</a> .  Se voc√™ possui uma guia e o usu√°rio n√£o a v√™ h√° muito tempo, pode entrar no estado congelado.  O navegador diz durante o evento: vou congelar voc√™ agora.  Ap√≥s o processamento do evento, nada ser√° executado.  Fa√ßa o que voc√™ precisa, prepare-se. <br><br>  Em seguida, ele pode sair do estado congelado atrav√©s do evento resume, supostamente nada aconteceu.  Ou, se o navegador realmente precisar liberar mem√≥ria no momento, ele simplesmente pega e mata.  Mas se o usu√°rio voltar a essa guia, recarregaremos e definiremos o campo foi descartado para o documento. <br><br><img src="https://habrastorage.org/webt/8c/-i/wu/8c-iwuqbmjxvsrdksgcjwvenew4.jpeg"><br><br>  No momento, voc√™ j√° pode se inscrever nesses eventos e captur√°-los, de alguma forma process√°-los.  Se a guia estiver realmente morta, voc√™ pode verificar o campo foi descartado.  Isso significa que voc√™ foi restaurado ap√≥s um descarte.  Voc√™ pode restaurar o estado anterior. <br><br><img src="https://habrastorage.org/webt/as/ny/b1/asnyb16w13ubi3k1dfi_04nicik.jpeg"><br><br>  N√≥s da Yandex.Browser pensamos h√° alguns anos: por que n√£o usar uma abordagem cardinal complexa.  Eles o chamavam de hiberna√ß√£o. <br><br><img src="https://habrastorage.org/webt/ce/7-/gn/ce7-gngt24kb9ikzc4nzdxbjspu.jpeg"><br><br>  Qual √© o objetivo?  Existem v√°rias guias, algum tipo de JS est√° sendo executado, algum tipo de estado.  Um processo separado √© criado para cada guia: aqui um v√≠deo pode ser reproduzido, aqui voc√™ deixa algo no formul√°rio.  O Hibernate chega - e n√£o h√° processos.  Todos n√≥s os pegamos.  Mas se agora voltarmos a essas guias, o processo voltar√° e todo o estado estar√° em vigor, o v√≠deo continuar√° sendo reproduzido no momento certo, todo o texto nos campos permanecer√° em vigor. <br><br><img src="https://habrastorage.org/webt/oy/ks/ug/oyksug04glkeh-amu4dyqfrryyc.jpeg"><br><br>  O que fizemos?  Tr√™s coisas mais importantes vivem dentro de cada renderizador: V8, que executa todo o JS, Blink, que armazena todo o DOM e algum tipo de liga√ß√£o do navegador, que ajuda a conectar tudo, com guias e tudo mais. <br><br><img src="https://habrastorage.org/webt/pz/hj/h4/pzhjh4pmyn-yz5afmas6omozx6g.jpeg"><br><br>  Por exemplo, considere uma amostra.  Aqui, esperamos que o onload aconte√ßa e adicionamos um novo elemento div √† √°rvore DOM.  Para o navegador, √© algo parecido com isto. <br><br><img src="https://habrastorage.org/webt/ic/cu/vy/iccuvyjbkmkyjhbgfb5de8uqxpc.jpeg"><br><br>  Naturalmente, existe uma √°rvore DOM, ela possui alguns campos, objetos associados e existe essa entidade. <br><br><img src="https://habrastorage.org/webt/ng/tj/ki/ngtjkiwdv6raldvffqgnoils7ge.jpeg"><br><br>  Na V8, o estado de cada n√≥ √© armazenado e esses n√≥s s√£o associados a objetos intermitentes por meio de uma camada de ligantes.  O que fizemos?  Pegamos o serializador da V8, serializamos todo o estado da V8, encontramos todos os objetos relacionados no Blink, escrevemos mais serializadores que salvam toda a √°rvore do DOM, serializam e depois gravam no disco, compactados e criptografados.  E ensinamos o navegador a se recuperar de um instant√¢neo como esse.  Ou seja, quando o usu√°rio acessa essa guia, n√≥s a expandimos, descriptografamos e mostramos ao usu√°rio, restauramos completamente.  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um post separado sobre o Hibernate</a> - aprox.) <br><br>  No momento, o Hibernate √© publicado para todos os est√°bulos e permite que cada usu√°rio salve uma m√©dia de uma ou duas guias.  Ou seja, ele tem em m√©dia uma guia sempre salva, ou talvez duas.  Isso economiza mem√≥ria para usu√°rios que t√™m mais de 10 guias - como fazemos com voc√™, mas n√£o somos representativos. <br><br>  Eu contei como o navegador est√° tentando ajudar, mas agora cada um de voc√™s pode fazer algo para acelerar o site e melhorar seu desempenho.  Voc√™ pode vir e fazer o certo hoje. <br><br>  Primeiro voc√™ precisa entender se h√° problemas de mem√≥ria. <br><br><img src="https://habrastorage.org/webt/xu/l4/nv/xul4nvtip2nc_mr93zrevltkmye.jpeg"><br><br>  Existem certos sintomas: o site come√ßa a se degradar ou o desbotamento aparece.  Geralmente, isso significa que o coletor de lixo √© acionado, o mundo inteiro est√° congelado e nada est√° sendo desenhado.  Ou que o site simplesmente diminui constantemente - isso tamb√©m acontece. <br><br>  Voc√™ precisa entender se h√° algum problema.  N√≥s olhamos o que acontece com a mem√≥ria JS. <br><br><img src="https://habrastorage.org/webt/ui/g4/kz/uig4kzofjrymuq0egjmk-cdt36o.jpeg"><br><br>  Se ele pula para frente e para tr√°s ou cresce continuamente, esse n√£o √© um bom sintoma.  Ou crescendo continuamente. <br><br><img src="https://habrastorage.org/webt/dt/to/ek/dttoekpmiceh7_6693-n6vrtsjk.jpeg"><br><br>  Nesse caso, voc√™ sempre pode tirar um instant√¢neo atrav√©s do DevTools.  Algu√©m j√° se incomodou com vazamentos em JS?  Se algu√©m n√£o souber, em JS √© bem poss√≠vel fazer um vazamento. <br><br><img src="https://habrastorage.org/webt/da/n_/yh/dan_yhjbdvvilgwgovgzzf6tpgu.jpeg"><br><br>  Por exemplo, voc√™ tem uma vari√°vel global na qual adiciona n√≥s que n√£o s√£o inseridos na √°rvore.  Voc√™ os esquece e, em seguida, eles comem centenas de kilobytes ou at√© megabytes. <br><br><img src="https://habrastorage.org/webt/vq/au/ia/vqauia5ylxx_u0xu8arw5ycuvta.jpeg"><br><br>  A rigor, n√£o est√° claro o que fazer com esses n√≥s desanexados.  Voc√™ pode pux√°-los para fora da √°rvore e depois inseri-los de volta.  Porque geralmente o estado da imagem ou algo mais permanece com eles.  Assim, voc√™ pode encontr√°-los e tratar o problema. <br><br><img src="https://habrastorage.org/webt/w7/a6/cy/w7a6cyfk_5iroc0ybpdk21gym5k.jpeg"><br><br>  Voc√™ tamb√©m pode observar a aloca√ß√£o de mem√≥ria na linha do tempo.  Se voc√™ tem uma descarga sistem√°tica e nunca limpa, isso tamb√©m √© um mau sinal, acho que todo mundo entende isso. <br><br><img src="https://habrastorage.org/webt/0m/ol/4w/0mol4w_xotmiebkvvheldcrnokq.jpeg"><br><br>  E voc√™ pode brincar com as camadas na sua guia.  O navegador geralmente trabalha com heur√≠sticas a esse respeito - tenta separar objetos que considera frequentemente alterados em camadas separadas.  Mas, √†s vezes, n√£o funciona muito bem, e voc√™ tem muitas camadas que consomem muita mem√≥ria.  Voc√™ sempre pode ver se tem uma situa√ß√£o dessas, eliminar algumas camadas e descobrir quanta mem√≥ria essa camada ocupa. <br><br><img src="https://habrastorage.org/webt/rc/w6/il/rcw6ilo68vshxkgqzq82esab_1y.jpeg"><br><br>  Outra camada de problemas √© o desempenho.  setTimeout √© uma m√° ideia para anima√ß√£o.  N√£o funciona da maneira que o navegador deseja renderizar a p√°gina.  Pode n√£o funcionar em fase: o navegador solicitou um quadro, mas ainda n√£o h√° anima√ß√£o, porque setTimeout n√£o funcionou.  Ou pode funcionar mesmo quando voc√™ n√£o precisa desenhar nada.  O usu√°rio saiu, ainda resta algum trabalho em segundo plano, mas trabalharemos com ele por meio de setTimeout. <br><br>  Aqui est√° a abordagem correta que seu retorno de chamada chamar√° apenas quando o navegador precisar desenhar esta p√°gina. <br><br><img src="https://habrastorage.org/webt/st/nr/dv/stnrdvev7a9sricvyvwivcufg4k.jpeg"><br><br>  Tamb√©m quero lembr√°-lo de que, se o navegador deseja desenhar 60 quadros por segundo, significa que para cada quadro ele precisar√° de cerca de 16 ms. <br><br><img src="https://habrastorage.org/webt/zo/fy/es/zofyesewo-ck8wl-z_jlsb6u7ak.jpeg"><br><br>  E se voc√™ ocupar o fluxo principal por mais de 16 ms, ter√° um salto de quadro garantido, o que √© bastante desagrad√°vel para o usu√°rio: o site come√ßa a tremer.  Portanto, todo o trabalho duro √© inserido corretamente nos threads de segundo plano, os quais voc√™ simplesmente retorna o resultado. <br><br><img src="https://habrastorage.org/webt/mp/rk/ry/mprkryexbai19rd-vhbj_tlbeb4.jpeg"><br><br>  Ou outra abordagem √© usar microtasking.  Crie uma fila de tarefas, processe-a ap√≥s algum tempo, at√© que a cota termine e deixe o navegador desenhar a p√°gina com calma. <br><br><img src="https://habrastorage.org/webt/-0/jr/bn/-0jrbntves41mkelcd56bmgu6uc.jpeg"><br><br>  Naturalmente, voc√™ pode adicionar novas camadas.  O navegador trabalha com heur√≠sticas e tenta selecionar a camada onde considerar necess√°rio.  Mas se voc√™ sabe que agora esse elemento ser√° animado, √© melhor informar explicitamente ao navegador que voc√™ precisa selecionar esse elemento em uma camada separada.  Ent√£o ser√° desenhado com mais efici√™ncia. <br><br><img src="https://habrastorage.org/webt/t9/pf/mr/t9pfmrqa0mhyszxphlkmvxafsag.jpeg"><br><br>  A √∫ltima abordagem interessante - reclamar.  Se voc√™ tiver problemas, √© sempre √∫til vir e conversar.  Talvez esse problema possa ser facilmente tratado, e n√≥s nos ajudaremos. <br><br>  Um pouco de fundo.  Este recurso est√° sendo elaborado atualmente.  Temos uma equipe de p√°ginas de desenvolvimento de mecanismos de pesquisa.  Eles t√™m uma m√©trica como a hora de renderizar o primeiro snippet.  Se o usu√°rio visualizar anteriormente o primeiro link no qual voc√™ precisa clicar e o que provavelmente lhe d√° a resposta correta, √© muito melhor desenh√°-lo o mais r√°pido poss√≠vel.  Eles vieram e perguntaram se era poss√≠vel acelerar de alguma forma dessa vez, porque todos haviam se espremido. <br><br>  Investigamos, realizamos testes de desempenho, fizemos um prot√≥tipo, e podemos fazer isso se o site nos indicar o que desenhar primeiro.  Testamos e vemos que isso melhora nosso desempenho.  Agora estamos testando isso em produ√ß√£o para um pequeno p√∫blico.  N√≥s olhamos o que resultar√° disso.  Fique atento. <br><br>  O mundo n√£o p√°ra.  O usu√°rio come√ßa a querer cada vez mais, os navegadores est√£o mudando, a web est√° mudando.  Isso √© normal.  Tentamos n√£o apenas criar recursos de supermercado, mas tamb√©m ajudar o usu√°rio de todas as maneiras poss√≠veis a obter a melhor experi√™ncia em termos de consumo de conte√∫do.  E voc√™ sempre precisa estar preparado para altera√ß√µes em qualquer navegador popular.  Naturalmente, se houver problemas, venha, estamos prontos para discutir e ajudar um ao outro. <br><br>  Aqui reuni v√°rios links √∫teis: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Hibernate no navegador Yandex</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aba descartada no chrome</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API do ciclo de vida da p√°gina</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Avalie o desempenho com o modelo RAIL</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Economia de energia em Yandex.Browser</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Estat√≠sticas de hardware do Steam</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O Relat√≥rio de Dados P√∫blicos do Firefox</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt442456/">https://habr.com/ru/post/pt442456/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt442446/index.html">Transforma√ß√£o digital no exemplo do call center de qualquer empresa</a></li>
<li><a href="../pt442448/index.html">Padr√µes de simultaneidade e erro ocultos no c√≥digo: Deadlock</a></li>
<li><a href="../pt442450/index.html">Blockchain e dados m√©dicos: como funciona</a></li>
<li><a href="../pt442452/index.html">Como efetuar login no NodeJS para que os meninos no quintal respeitem</a></li>
<li><a href="../pt442454/index.html">Magic Leap planeja complementar o mundo real com camadas digitais</a></li>
<li><a href="../pt442458/index.html">Abismo ou caminho artificial desde um piloto de RPA at√© a implementa√ß√£o em toda a empresa</a></li>
<li><a href="../pt442460/index.html">Ajudando o Queryable Provider a classificar seq√º√™ncias de caracteres interpoladas</a></li>
<li><a href="../pt442462/index.html">Erros t√≠picos ao trabalhar com o PostgreSQL. Parte 1</a></li>
<li><a href="../pt442464/index.html">Como o "drag√£o" tripulado cresceu</a></li>
<li><a href="../pt442466/index.html">Como promover um jogo incremental? Gr√°tis, r√°pido e eficiente *</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>