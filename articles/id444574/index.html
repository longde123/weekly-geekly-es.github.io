<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸŒ” ğŸŠ ğŸ‘ƒğŸ» Miniatur Macintosh Plus ğŸ”¯ â­ï¸ ğŸš´ğŸ¿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada masa awal komputer rumahan, ada perusahaan bernama Apple. Dia baru saja membuat langkah besar dengan jajaran komputer Apple II, tetapi dia membut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Miniatur Macintosh Plus</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444574/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/160/d50/755/160d50755b66bf8a810c5b9f62491add.jpg" alt="gambar"></div><br>  Pada masa awal komputer rumahan, ada perusahaan bernama Apple.  Dia baru saja membuat langkah besar dengan jajaran komputer Apple II, tetapi dia membutuhkan inovasi untuk tetap di atas pasar komputer yang bergerak cepat.  Perusahaan ini telah bekerja pada lini Lisa, yang terinspirasi oleh komputer mini dan ditujukan untuk pengguna bisnis, yang berarti memiliki harga yang sesuai, tetapi bagi konsumen rata-rata sepertinya terlalu mahal.  Sebagai proyek tambahan, Macintosh dikembangkan, yang seharusnya merupakan realisasi gagasan generasi baru komputer untuk "orang-orang dari jalanan" dan harganya sekitar $ 500.  Proyek ini diambil oleh Steve Jobs, dan di bawah kepemimpinannya, perangkat kerasnya menjadi lebih maju, perangkat lunak menerima GUI daripada antarmuka teks, dan harganya melonjak hingga hampir $ 2.500.  Meskipun peralatan yang diperoleh pada harga ini sedikit mengecewakan, misalnya, tidak memiliki akselerator grafis dan kemampuan suara dari mesin lain, tetapi perangkat lunak membenarkan harga.  Macintosh pertama adalah Mac 128K, dan keberhasilannya mendorong penciptaan model yang lebih canggih dari Mac yang ringkas ini, khususnya Macintosh 512K, Macintosh Plus, dan Macintosh SE Series. <br><br>  Meskipun pengembangan Macintosh berlangsung sekitar tahun 1984, jauh sebelum saya mulai memahami komputer, saya memiliki beberapa kelemahan untuk Macintosh yang ringkas: komputer pertama yang dibeli orang tua saya adalah Macintosh Plus.  Kemudian dilengkapi dengan hard drive SCSI 20 MB, dan pada mesin ini saya menulis program Basic pertama saya.  Ketika saya masih tinggal di Belanda, saya membeli mesin SE / 30 yang rusak dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengubahnya</a> menjadi server Linux, yang tetap mampu menjalankan perangkat lunak Mac.  Namun, saya meninggalkan mobil ini di Belanda, dan di sini, di Shanghai, saya tidak lagi memiliki perangkat keras Apple klasik. <br><br>  Meskipun sudah jelas bahwa saya tidak membutuhkan Mac Plus dalam kehidupan sehari-hari lagi, saya menyukai gagasan untuk memilikinya jika terjadi serangan nostalgia. <a name="habracut"></a>  Mungkin saya bisa mendapatkan sebagian kecil dari pengalaman Macintosh jika saya sendiri membuat salinan kecil dari mesin seperti itu.  Jika saya sudah memiliki pengalaman <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">membuat versi yang lebih kecil dari perangkat keras lama</a> , maka mengapa tidak mencoba menerapkan proses ini untuk membangun Mac Plus yang terhormat? <br><br><h1>  Tampilan </h1><br>  Apa yang harus saya gunakan untuk membangun mesin seperti itu?  Pada awalnya saya datang dengan ide untuk mengambil Raspberry Pi atau yang serupa, tambahkan layar LCD 2,5 inci, emulator seperti PCE atau MiniVMac, mencetak kasing pada printer 3D dan mempertimbangkan pekerjaan yang dilakukan.  Tapi saya pikir ide ini tidak akan membuahkan hasil: mesin untuk selera saya tidak hanya akan terlalu besar, tetapi proyek itu sendiri terlalu sederhana.  Dalam Mac 128K asli, bahkan ketika hasil akhirnya ternyata terlalu rendah daya, para pengembang berhasil melakukan beberapa trik untuk menghemat uang.  Perakitan sederhana dari replika "besi" standar bertentangan dengan semangat desain aslinya.  Jadi saya pergi ke Taobao untuk bahan-bahan yang lebih eksotis! <br><br><img align="right" src="https://habrastorage.org/getpro/habr/post_images/42f/7cf/4ba/42f7cf4ba397243640f69ed0864bb72e.png"><br>  Saya memutuskan untuk memulai dengan tampilan.  Untuk masanya, Mac memiliki layar resolusi tinggi, jadi sangat penting untuk memilih tampilan yang tepat.  Biasanya, ketika datang untuk memilih display di pasar elektronik Cina, bermacam-macamnya besar.  Sayangnya, "bermacam-macam besar" terdiri dari layar resolusi tinggi, tetapi juga ukuran besar, atau layar kecil resolusi kecil.  Idealnya, saya membutuhkan resolusi 512x342 piksel;  ini adalah resolusi asli Mac dan pada tampilan yang sama saya dapat menampilkan semuanya tanpa memperbesar.  Sayangnya, tidak ada layar yang siap pakai dari resolusi semacam itu di pasaran;  analog terdekat akan menjadi sesuatu seperti 640x480.  Untuk beberapa alasan, layar resolusi ini cukup besar: yang terkecil memiliki diagonal 3,5 inci.  Oleh karena itu, sayang sekali, jika saya ingin membuat Mac sekecil mungkin, maka saya harus mengurangi resolusinya. <br><br>  Setelah memutuskan bahwa sangat mungkin untuk sedikit mengurangi resolusi, saya mendapat bermacam-macam set layar yang cukup besar.  Salah satu tampilan pertama yang terlihat adalah x163qln01 - layar OLED 1,63 inci yang dibuat oleh AUO.  Agak mahal (sekitar $ 25 per layar), tetapi sering dapat ditemukan di Taobao, dan lembar data setidaknya mendokumentasikan kontak, ukuran, dan persyaratan daya.  Tampaknya tampilan ini dirancang untuk beberapa jenis jam tangan pintar di Android, dan sedikit google, saya bahkan menemukan beberapa urutan inisiasi yang dapat digunakan. <br><br>  Satu-satunya masalah (kecuali untuk konektor, kontak yang terletak pada jarak 0,5 mm dari satu sama lain) adalah bahwa tampilan tidak menggunakan antarmuka paralel dan bukan SPI, tetapi antarmuka MIPI.  Saya harus berurusan dengan ini nanti. <br><br>  Setelah memilih tampilan, Anda dapat pergi ke prosesor.  Saya memilih modul ESP32-Wrover.  Modul ini berisi ESP32 (chip WiFi dengan dua CPU 32-bit yang beroperasi pada frekuensi 240 MHz dan dengan sekitar setengah megabyte RAM), 4 memori flash MiB dan 4 MiB PSRAM.  Saya menyarankan bahwa dua core CPU akan cukup cepat untuk meniru Mac dan bahwa saya bisa menggunakan 4 MiB PSRAM sebagai RAM Mac.  Walaupun 4 MiB memori flash tidak terlalu banyak, mereka harus cukup untuk emulator plus hard disk kecil dengan perangkat lunak dan program sistem.  Saya juga mendapat manfaat dari fakta bahwa saya bekerja di Espressif, jadi peralatan ini cukup akrab bagi saya;  Selain itu, saya hanya dapat mengambil beberapa modul dari kantor, alih-alih membelinya dan menunggu pengiriman. <br><br>  Jadi, semuanya hampir siap untuk bekerja - layar OLED masih membutuhkan komponen untuk catu daya, sehingga jumlah komponen meningkat dengan penurun tegangan rendah (LDO) dan chip catu daya lainnya.  Untuk Mac, suara juga diperlukan, jadi saya mengambil chip akselerator dan speaker yang murah, dan mendapatkan modul FT232 standar untuk daya dan debugging.  Semua komponen ini cukup kecil dan memungkinkan saya mengurangi isi perangkat;  hasilnya harus model sedikit lebih dari 1/6 dari Mac nyata. <br><br><h1>  Kontrol tampilan </h1><br>  Meskipun saya tidak bisa mengeluh tentang resolusi, ukuran dan kecerahan layar, ternyata lebih sulit untuk menampilkan piksel di atasnya.  MIPI tidak didukung oleh silikon ESP32, jadi saya perlu mencari cara lain untuk berkomunikasi dengannya.  MIPI DSI adalah standar yang dikembangkan oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aliansi MIPI</a> dan tidak terbuka;  karena ini adalah hobi bagi saya, saya harus mengumpulkan bit informasi dari dokumen yang bocor dan menguji perangkat yang ada.  Untungnya, satu atau dua tahun yang lalu, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mike Harrison</a> merekayasa balik antarmuka MIPI DSI yang digunakan untuk mengontrol tampilan iPod ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">3</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">4</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">5</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web</a> ), dan juga menemukan beberapa salinan spesifikasi.  Itu membuat hidup saya jauh lebih mudah: setidaknya itu membantu saya mencari tahu apa yang harus dikirim ke layar. <br><br>  Meskipun ada lebih banyak antarmuka (dan untuk mengetahui hal ini, Anda harus menonton semua video yang saya berikan tautan di atas), lapisan fisik MIPI cukup mudah untuk dijelaskan.  MIPI menggunakan empat kabel: dua bus data dan dua bus jam.  Ini juga memiliki dua mode transmisi sinyal: mode Low Power (LP) dan mode High Speed â€‹â€‹(HS). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/23d/c2b/af2/23dc2baf2a437935e2144183e57c8c09.png"></div><br>  Dalam mode Daya Rendah, kabel digunakan secara terpisah untuk mengirimkan struktur data kontrol, serta untuk menunjukkan bahwa perintah tertentu memiliki efek langsung pada penerima fisik di sisi lain.  Penurunan tegangan dalam mode ini cukup besar dibandingkan dengan mode kecepatan tinggi: untuk sinyal tinggi, tegangannya sekitar 1,2 V, dan untuk sinyal rendah kira-kira 0 V. Karena mode daya rendah memiliki lebih banyak status sinyal, ia melakukan fungsi seperti mengirim penerima perintah untuk beralih ke mode kecepatan tinggi atau keluar.  Dalam grafik di atas, garis biru menunjukkan pengiriman data dalam mode Daya Rendah. <br><br>  Dalam mode Kecepatan Tinggi, dua bus jam (CLKP / CLKN), serta dua bus data (DP / DN) berfungsi sebagai bus diferensial: satu bus selalu berseberangan dengan yang lainnya.  Penerima mendeteksi perbedaan antara dua bus dan, berdasarkan mereka, menetapkan nilai yang ditransmisikan: 1 jika di atas DP, dan 0 jika di atas DN.  Sesuai namanya, mode Kecepatan Tinggi memberikan transfer data yang sangat cepat dengan frekuensi clock hingga 1,5 GHz.  Untuk mencapai hal ini tanpa terlalu banyak gangguan elektromagnetik dan konsumsi daya, standar menggunakan trik berikut: ia menggunakan tegangan yang sangat rendah: tegangan pada pasangan rata-rata 200 mV, dengan penyimpangan Â± 100 mV per bus untuk menunjukkan nol dan yang.  Dalam grafik di atas, bit merah ditransmisikan dalam mode kecepatan tinggi. <br><br>  Dari sudut pandang mentransfer data itu sendiri dalam mode kecepatan tinggi, antarmuka pada dasarnya dapat dianggap sebagai antarmuka SPI yang agak aneh dan diferensial: ada sinyal jam dan saluran transmisi data, dan pada setiap siklus jam nilai data ditransmisikan ke antarmuka.  Perbedaan dari SPI (kecuali bahwa sinyal adalah diferensial) adalah bahwa bit data ditransmisikan hanya ketika keadaan bus CLK berubah, dan tidak hanya, misalnya, di ujung tombak.  Perbedaan lainnya adalah bahwa permulaan suatu transmisi tidak dikenali ketika sinyal pada bus / CS menjadi rendah, melainkan suatu sinyal in-band: setiap transmisi data dimulai dengan satu "kata ajaib" yang unik, dan penerima menentukan nilai ini untuk memahami kapan transmisi dimulai. <br><br>  Untuk memastikan antarmuka ini berinteraksi dengan ESP32, saya harus melakukan perubahan level.  Saya ingin memberi daya pada ESP32 dari sumber 3.0 V sehingga semua GPIO juga memiliki 3.0 atau 0 V. Untuk menyesuaikan ini dengan level sinyal antarmuka MIPI, saya memilih solusi yang paling murah: Saya hanya menggunakan jaringan pembagi resistor. <br><br>  Untuk menghitung nilai-nilai resistor, saya membuat persamaan untuk tiga status tegangan keluaran yang menarik minat saya (1,1 V untuk sinyal Daya Rendah tinggi, 0,07 V untuk sinyal Kecepatan Tinggi rendah, 0,33 V untuk sinyal kecepatan tinggi tinggi; tegangan dipilih sebagai sehingga dalam kebanyakan kasus mereka tetap dalam spesifikasi) dan tiga negara input yang harus menghasilkannya.  Saya mendapat persamaannya.  Secara teoritis, itu mungkin untuk menyelesaikannya secara manual, tetapi pada akhirnya saya meninggalkan mereka di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">WolframAlpha</a> dan mendapatkan nilai-nilai resistor yang diperlukan. <br><br><pre>            3v
 G -R1 - + R3
 G -R2 - + - + ----&gt;
            R4
            GND<font></font>
<font></font>
 R4 * (1.9 / R1 + 1.9 / R3) = 1.1, 
 (1 / (1 / R4 + 1 / R1 + 1 / R2)) * (2.93 / R3) = 0,07, 
 (1 / (1 / R4 + 1 / R1)) * 2.67 * (1 / R3 + 1 / R2) = 0.33, 
 R2 = 1000<font></font>
<font></font>
 R1 = 280, R2 = 1K, R3 = 3K6, R4 = 150 </pre><br><br>  Pada saat ini, saya menyadari bahwa Anda juga dapat sedikit curang: karena dalam mode kecepatan tinggi bus diferensial, tampilan hanya akan melihat perbedaan antara dua bus untuk menentukan data yang dikirimkan.  Ini berarti bahwa saya dapat menghemat GPIO dengan menjaga tegangan tetap pada salah satu bus dan menerapkan sinyal tinggi atau rendah ke yang lain.  Untuk melakukan ini, saya membutuhkan jenis jaringan resistor kedua: <br><br><pre>            3v
            R3
 G -R1 - + - + ----&gt;
            R4
            GND<font></font>
<font></font>
 R4 * (1.9 / R1 + 1.9 / R3) = 1.1,
 (1 / (1 / R4 + 1 / R1)) * (2,8 / R3) = 0,2,
 R4 = 150<font></font>
<font></font>
 R1 = 320, R3 = 1500, R4 = 150 </pre><br><br>  Tugas lain adalah membuat sirkuit jam.  SPI normal mentransmisikan sedikit di tepi terkemuka bus jam.  (Atau di tepi trailing, tergantung pada konfigurasinya.) MIPI mentransmisikan bit di kedua ujung depan dan ujung sinyal clock.  Meskipun modul SPI dari peralatan ESP32 tidak dapat menghasilkan sinyal seperti itu dengan sendirinya, kami dapat mengonversi satu sama lain menggunakan pemicu-D sederhana, yang output terbaliknya terhubung ke input.  Setiap pulsa jam di input akan mengubah level output, seperti yang kita butuhkan. <br><br><h1>  Diagram sirkuit </h1><br>  Setelah berurusan dengan peralatan display, kami mengakhiri bagian yang paling sulit.  Sekarang yang harus kita lakukan adalah menambahkan sisanya.  Mari kita mulai dengan sumber listrik.  Ini cukup sederhana: Saya memberi makan seluruh rangkaian 5V dari konverter USB-ke-serial, yang juga dapat digunakan sebagai antarmuka debugging / pemrograman.  Tegangan ini digunakan untuk menghasilkan +4.6 V, -3.4 V dan 1.8 V yang dibutuhkan oleh layar OLED, serta 3.0 V untuk memberi daya pada ESP32.  Tegangan +4.6 V dan -3.4 V dihasilkan oleh chip TPS65631, dan sirkuit referensi untuk ini ditunjukkan dalam lembar data tampilan OLED.  Tegangan lain dihasilkan oleh sepasang LDO sederhana. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70a/d6a/f70/70ad6af70745587d6804e09451e192da.png"></div><br>  Macintosh juga memiliki suara.  Dengan standar modern, kualitasnya tidak terlalu tinggi (22 kHz, 8 bit), tetapi suara programnya sekarang legendaris, jadi dalam proyek saya, saya tidak bisa menolaknya.  ESP32 memiliki DAC 8-bit bawaan, yang digunakan untuk membuat gelombang suara analog yang dihasilkan oleh emulator.  Kemudian mereka dimasukkan ke NS8002, yang merupakan penguat suara AB-kelas 2 watt yang dipasang dalam format SOIC8 kecil.  Itu murah, membutuhkan sangat sedikit komponen pendukung, dan menciptakan lebih dari cukup suara untuk menarik perhatian pada Mac mungil. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/05d/461/dea/05d461deabf92b53b75f1e3290cef040.png"></div><br>  Salah satu aspek yang membuat Macintosh begitu revolusioner adalah bahwa itu adalah salah satu komputer komersial pertama dengan mouse.  Tim Macintosh memikirkan mouse dengan sangat hati-hati sehingga hampir seluruh OS didasarkan pada elemen UI yang dikendalikan mouse, dan tidak seperti, misalnya, PC IBM, seluruh Macintosh dapat dikendalikan oleh mouse.  Jelas, Mac mungil saya juga membutuhkan perangkat periferal yang penting ini.  Saya masih ingat bola tikus dijual dengan Macintosh pertama, tetapi saya tidak terlalu senang dengan kebutuhan untuk membersihkan rol terlalu sering dari kotoran;  untuk alasan inilah perangkat mekanis ini sepenuhnya digantikan oleh mouse optik.  Keuntungan dari ini adalah bahwa detail untuk mouse optik bermodel ini cukup mudah ditemukan: misalnya, tidak butuh waktu lama bagi saya untuk menemukan penjual sensor mouse gaming ADNS9500 dan optik yang sesuai. <br><br>  Aspek lain yang nyaman adalah bahwa sensor mouse optik adalah perangkat yang agak terintegrasi: hanya memerlukan beberapa komponen eksternal untuk bekerja, dan ini tercermin dalam diagram.  Menambahkan beberapa kapasitor untuk menstabilkan tegangan, sebuah transistor MOS (disalin langsung dari lembar data) untuk menyalakan dioda laser dan detail standar lainnya.  Sensor mouse mentransmisikan data melalui sinyal SPI empat-kawat, dan saya menggunakan salah satu kabel ini untuk mengirim sinyal tombol mouse: ketika saya mengklik tombol, kontak MISO ditarik sedikit ke bawah.  Nilai resistor pull-up ini tidak cukup bagi mouse untuk menghentikan transmisi data, tetapi cukup untuk mengatasi resistor pull-up, yang biasanya menarik bus ke atas, jadi ketika sensor menciptakan tiga keadaan di bus MISO, ESP32 dapat mengenali tombol tekan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/786/dc7/476/786dc7476e66ab6f8c477114a34f531b.png"></div><br>  Akhirnya, Anda perlu menghubungkan layar OLED.  Kami telah menyelesaikan semua pekerjaan yang sulit untuk menghitung nilai semua resistor, sehingga sirkuit seharusnya berbicara sendiri.  Chip yang ditambahkan adalah D-flip-flop, dan digunakan untuk membagi dua kecepatan clock: seperti yang disebutkan di atas, standar MIPI memerlukan bit baru setiap kali polaritas sinyal clock dibalik, sedangkan ESP32 mentransmisikan bit baru hanya di bagian depan atau belakang depan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/784/48e/7a6/78448e7a69765e0d224d6b36281a3f20.png"></div><br>  Setelah menggambar diagram skematik, saya kemudian membuat desain papan sirkuit.  Layar yang saya pilih harus dipasang di papan yang mengendalikannya, dan konektornya harus di bagian belakang papan sirkuit ini.  Meskipun ini tidak akan meninggalkan banyak ruang untuk komponen lain, saya masih ingin menempatkan semua komponen lainnya di sisi lain. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ef/ab4/18e/7efab418e1c2d82cd2c906ca8e91e66a.jpg"></div><br>  Sangat bagus untuk memiliki penglihatan yang baik dan senapan angin panas: ini memungkinkan saya untuk menggunakan komponen 0603 dan menempatkan segala sesuatu di ruang terbatas dewan.  Akan sangat sulit untuk menghubungkan konektor display dan chip daya OLED QFN dengan setrika solder konvensional. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/090/5db/fb3/0905dbfb3162f4d093b2e32d7a1aff8c.jpg"></div><br>  Saya menyadari bahwa sensor mouse dan komponennya akan memakan terlalu banyak ruang di papan, jadi saya memutuskan untuk menyolder semua komponen ke sensor itu sendiri.  Berkat ini, semuanya dapat ditempatkan di mouse. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d9/51b/a17/4d951ba1796a5b89dc7288e6bbdf0c58.jpg"></div><br><br><h1>  Perangkat lunak </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e08/7b1/5f8/e087b15f8fd3a27bcfd01de4de161aef.jpg"></div><br>  Jelas, perangkat lunak adalah elemen yang agak penting dari perakitan ini: Anda harus meniru seluruh Macintosh.  Namun, Macintosh bukan mesin yang rumit.  Bahkan, itu terdiri dari 68.000 mikrokontroler, pengontrol transfer serial Zilog Z8530 yang mengontrol port serial, 6522 VIA untuk I / O internal dan untuk menyediakan antarmuka dengan keyboard, serta beberapa array logika yang dapat diprogram (PAL) yang berisi logika untuk tampilan dan suara.  Ini juga memiliki chip Mesin Woz Terpadu yang menyediakan antarmuka dengan floppy drive.  Ini adalah chip yang cukup rumit;  Namun, saya tidak berencana untuk meniru floppy disk, jadi itu akan cukup untuk meniru IWM, terus-menerus kembali bahwa tidak ada disk di drive.  Sebagai gantinya, saya berencana untuk sepenuhnya meniru chip NCR 5380 SCSI yang terhubung ke hard drive SCSI yang ditiru, yang akan membaca dari memori flash bawaan ESP32-Wrover. <br><br>  Selain itu, akan ada beberapa program dengan akses langsung ke peralatan dalam sistem: programmer Mac diberitahu sejak awal untuk menggunakan lapisan abstraksi perangkat keras tingkat OS untuk menjaga kompatibilitas dengan versi peralatan Mac di masa depan.  Secara umum, ini berarti bahwa jika saya berhasil meniru perangkat keras sedemikian rupa sehingga OS boot dan senang dengan semuanya, maka sebagian besar program akan bekerja tanpa masalah. <br><br>  Jadi saya memutuskan bahwa Anda dapat mencoba menulis emulator dari awal.  Lebih tepatnya, tidak dari awal;  68000 adalah binatang yang agak rumit dan saya tidak ingin menemukan kembali rodanya.  Sebagai gantinya, saya mencari di internet dan menemukan bahwa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MAME</a> memiliki emulator 68K berbasis CK yang nyaman dan cepat yang disebut Musashi yang sesuai dengan kebutuhan saya dengan sempurna.    ,       -,       ESP32   . <br><br>         ESP32:       OpenOCD,     ,  Â«---Â»   .           Linux,    ESP32.     ,  datasheet   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Linux-68K</a>  ,      Inside Macintosh,     .     ,   ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   </a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Berbekal semua ini, setelah memilih gcc sebagai kompiler dan libsdl sebagai perpustakaan untuk bekerja dengan grafik, saya mulai bekerja. </font><font style="vertical-align: inherit;">Singkatnya, kemudian setelah beberapa saat saya akan mendapatkan emulator MacPlus yang sederhana namun berfungsi secara umum: mouse, video, hard drive SCSI, dan kerja suara:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9c/436/b8f/d9c436b8f1bf87e4ddeca8b928090c0e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Karena perangkat keras saya belum siap, saya memutuskan untuk port emulator saya ke ESP-Wrover-Kit devboard. </font><font style="vertical-align: inherit;">Saya masih memiliki beberapa papan seperti itu di tangan, dan selain modul Wrover, yang akan saya gunakan pula, mereka memiliki layar 320x240 nyaman yang dapat digunakan untuk memeriksa pengoperasian video.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/824/21d/c95/82421dc95010e61d82c8465df2301c1d.jpg"></div><br>    Mac      ;         7,8 ,    Mac Plus. (7,8    ,  Mac Plus;              ,     35%.) <br><br> ,     devboard â€”    ,         ,   ,     devboard.    :  devkit   320x240      Mac. ,    ,   320x320,      :        Mac  512x342? <br><br>      512x342    320x320,   .  ,   ,  ,  ,   .       ,   ,    -  ,          ,      .        .      OLED-. <br><br>  Tetapi bagaimana cara melakukannya?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kecil kemungkinan Anda dapat membuka layar OLED dan memasukkan beberapa piksel lebih banyak di dalamnya. Namun, ini tidak perlu; resolusi layar OLED sudah tiga kali lipat dari yang dinyatakan. Alasannya adalah bahwa layar ini berwarna: setiap "piksel" virtual memiliki subpiksel merah, hijau dan biru. Selain itu, pada layar khusus ini, subpiksel dilapisi dengan segitiga. Berikut ini adalah screenshot close-up dengan tiga piksel dihidupkan:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d51/597/1e1/d515971e1bab244debdf6e3da2ff960d.jpg"></div><br>  ,  â€”      ;         .    ,      480 x 640 .          512x342 ,   ,          ,     1,63- ,  GUI,   9- : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cfa/bf6/817/cfabf6817fcd374ca27afcf19244d6a6.jpg"></div><br><br><h1>  </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi sekarang saya memiliki tampilan dan perangkat lunak yang mengemulasi Macintosh Plus dengan cukup baik, ditambah mikrokontroler yang dapat dijalankan. Apa yang hilang Jelas, penutup untuk semua ini! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya memutuskan untuk mencetaknya pada printer 3D Formlabs 1+ SLA dari pekerjaan saya. Untuk melakukan ini, saya pertama-tama membutuhkan model. Saya ingin membuatnya dari awal. Jelas, lebih baik untuk memiliki Macintosh Plus nyata di tangan. Sebenarnya, saya memilikinya, tetapi kami dipisahkan oleh setengah benua ... Untungnya, saya berhasil menemukan solusi yang hampir sama bagusnya: beberapa orang baik menunjukkan dimensi Mac 128K asli (yang tubuhnya hampir sama dengan Plus) di wiki </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">iFixit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya masih membuat semua model 3D saya di OpenScad, dan setelah menyiksa dan mengutuk, saya berhasil membuat semua kurva terlihat seperti seharusnya. </font><font style="vertical-align: inherit;">Saya mendapatkan model Mac yang indah pada skala 1: 6.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c00/29f/772/c0029f7728baf02093072b9a886ba572.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya juga membuat mouse dari gambar dengan iFixit, tetapi karena sensor mouse optik yang cukup besar harus pas di dalamnya, itu tidak dapat diskalakan ke 1/6 dari mouse nyata. </font><font style="vertical-align: inherit;">Skala lebih dekat ke 2/5, sehingga mouse terlihat besar dibandingkan dengan Mac mungil, tetapi jauh lebih nyaman untuk jari manusia yang tidak berskala.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7af/f29/846/7aff29846237b0b754bafd8caa526ad1.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi yang tersisa hanyalah mencetak model. </font><font style="vertical-align: inherit;">Saya mengekspor konstruk ke berbagai file STL dan mencetaknya di Formlabs 1+. </font><font style="vertical-align: inherit;">Hasil akhirnya cukup baik; </font><font style="vertical-align: inherit;">Saya hanya menyesal bahwa saya tidak menambahkan kait ke kedua bagian desain. </font><font style="vertical-align: inherit;">Masalah ini diselesaikan dengan setetes superglue.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d3e/be4/eae/d3ebe4eae5427f564e366961b385cff6.jpg" alt="gambar"></div><br><br><h1>  Hasil </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jadi, saya punya semua komponen dan hanya bisa merakitnya. Konektor PCB di bagian depan sasis diamankan dengan beberapa klip. Konverter usb-ke-serial, yang digunakan sebagai mekanisme boot dan catu daya, terhubung ke belakang dan juga berlaku pada beberapa terminal. Saya lupa melakukan sesuatu untuk pemasangan di dalam speaker, tetapi saya berhasil memperbaikinya dalam kasing dengan lem super. Mouse terhubung oleh satu set kabel tipis. (Ya, mereka agak tidak konsisten dengan skema warna ... begitu saya menemukan kabel multicore yang lebih indah, saya akan memperbaikinya.)</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e8/5d2/efa/1e85d2efa496b34b17d3b655b73f459f.jpg"></div><br>     ,     ,     , ,            3D-  ,     . ,  ,         Mac,         ,  ,   . Mac   ! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/160/d50/755/160d50755b66bf8a810c5b9f62491add.jpg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b03/2ee/25e/b032ee25e2fabeb081533d97bd368034.jpg"></div><br>         ,     ,   Mac.  .  20    ,     ,     â€”   :  Mac Plus      ,   . <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/oMH8GGEcqQU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> ,      Mac Plus?        ,  ,         .  ,     :    AppleTalk  WiFi,      - ,             Mac.   ,      ,  -          Mac        After Dark: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b51/a98/7fe/b51a987fe61c1d827d9075b83bf36b2b.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seperti biasa, proyek ini bersifat open-source, desain papan sirkuit cetak dan kasingnya, serta firmware, dipasang di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Semuanya dilisensikan di bawah lisensi Beer-Ware, sehingga Anda dapat melakukan hampir semua hal yang Anda inginkan dengannya. </font><font style="vertical-align: inherit;">Jika Anda pernah menggunakan sesuatu dalam proyek Anda, Anda dapat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">menulis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tentang itu kepada saya.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id444574/">https://habr.com/ru/post/id444574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id444564/index.html">Pengembangan Produk Digital dengan Model Mental</a></li>
<li><a href="../id444566/index.html">Sikorsky mengadakan demonstrasi helikopter tak berawak dengan seorang pria di dalamnya</a></li>
<li><a href="../id444568/index.html">10 bug teratas dari proyek C ++ ditemukan pada 2018</a></li>
<li><a href="../id444570/index.html">10 kesalahan teratas dalam proyek C ++ untuk 2018</a></li>
<li><a href="../id444572/index.html">LED berkedip</a></li>
<li><a href="../id444576/index.html">Bagaimana Sistem Jenis Meningkatkan Kode JavaScript Anda</a></li>
<li><a href="../id444578/index.html">Speakers Top 3D Expo 2019: Yousef Hesuani dari 3dbio - pencetakan 3D organ dan jaringan</a></li>
<li><a href="../id444580/index.html">Infrastruktur FBO Sheremetyevo: bagaimana pesawat ringan bersiap untuk penerbangan</a></li>
<li><a href="../id444582/index.html">Palo Alto Networks Pengoptimal Kebijakan Keamanan NGFW</a></li>
<li><a href="../id444584/index.html">Android akan menawarkan pengguna Eropa browser dan mesin pencari pilihan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>