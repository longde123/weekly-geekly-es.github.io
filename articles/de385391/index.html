<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÉÔ∏è üìû ü¶è VU-Meter auf dem IN-33 üéÅ üëãüèº üë∞üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Zun√§chst ist es an der Zeit, meinen Verst√§rker durch etwas Neues zu ersetzen. Ich kann nicht sagen, dass Vega nach dem Upgrade schlecht gespielt hat, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VU-Meter auf dem IN-33</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/385391/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zun√§chst ist es an der Zeit, meinen Verst√§rker durch etwas Neues zu ersetzen. Ich kann nicht sagen, dass Vega nach dem Upgrade schlecht gespielt hat, aber es gibt eine Frist. Und entweder m√ºssen Sie es vollst√§ndig nach der Verj√§hrungsfrist regeln oder ... Machen Sie eine neue. Aber das ist ein separates Lied. In der Zwischenzeit wollte ich dem neuen Verst√§rker eine Signalanzeige hinzuf√ºgen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und alles w√§re in Ordnung, aber LEDs m√∂gen es nicht. Nein, sie sind modern, einfach, h√ºbsch ... und schrecklich langweilig. Und ich wollte etwas </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warmes, Lampenion</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Ich hatte immer eine Schw√§che f√ºr </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ionenlampen </font><font style="vertical-align: inherit;">... </font><font style="vertical-align: inherit;">Und deshalb wurde an der Datscha der Block der ILT6-30M-Lampe ge√∂ffnet. Aber ich war nicht lange gl√ºcklich - es stellte sich heraus, dass jemand Zeit hatte, es vor mir zu verbrennen ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und jetzt, als ich dar√ºber nachdachte, wie ich das Steuerger√§t austauschen sollte, stie√ü ich versehentlich auf die Lampe IN-33. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/23d/c85/63b/23dc8563b1e58ad36fb1ee839f5a8cb8.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und alles ist passiert ...</font></font><br>
<br>
<a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Lampe wurde nicht sofort gefunden. Und als sie in einem einzigen Gesch√§ft in St. Petersburg kauften, fragten sie mich √ºberrascht: Wei√ü ich, was ich √ºberhaupt kaufe? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber zu kaufen ist die halbe M√ºhe. Es wurde kein urspr√ºngliches Kontrollschema gefunden. Und was w√§re interessanter - die Lampe ben√∂tigt eine Leistung von 130 und 250 Volt konstanter Leistung! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und das Traurigste ist, dass es nur sehr wenige Informationen dar√ºber gibt. Auf RadioKot gibt es einen Artikel, in dem SLvik ein Projekt dazu erstellt und das Schema dargelegt hat. Es gibt einen deutschen Artikel, in dem eine Person auch ein Projekt darauf gemacht und den Arbeitsalgorithmus und die Quelle mit dem Schema dargelegt hat. Aber die Lampe dort ist 8-polig und meine ist 10. Ja, und die Pinbelegung passt nicht! Es gibt ein Handbuch f√ºr eine amerikanische √§hnliche Lampe. Es ist aber auch 8 Pin angegeben! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ein kleiner Exkurs. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Lampe hat 200 Segmente! Jeder kann INDIVIDUELL beleuchtet werden. Und die Schlussfolgerungen sind nur 10. "Wie haben sie es geschafft ?!"</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und hier ist das Interessanteste, was ich zum Beispiel nicht einmal geh√∂rt habe: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Lampe ist ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zehn-Z√§hler-Z√§hler</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Steuerungsidee ist ganz einfach: Wir "beleuchten" das "Samen" -Segment am Anfang der Gl√ºhbirne. Dann erden wir die 1. Kathode des benachbarten Elements und der Fluss ‚Äûspringt‚Äú vom Keimelement zu einem neuen. Zu diesem Zeitpunkt "l√∂schen" Sie den Samen und jetzt brennt das zweite Segment. Jetzt erden wir die zweite Kathode und der Fluss springt dorthin, das dritte Segment leuchtet auf. Und wir l√∂schen die erste Kathode. Wir machen das gleiche mit der 3. Kathode. Und wieder nach ihm, der erste, zweite, dritte. Es stellt sich eine Art "Lauflicht" heraus. Und wir fahren ihn so weit, wie wir es brauchen. Und wenn er das Niveau erreicht hat, das wir brauchen, schalten wir die Anode aus und wiederholen alles noch einmal.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zeichnung aus dem amerikanischen Handbuch auf dem Indikator: </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/11d/fc9/952/11dfc9952e75c93e0a7f141dfe474ba2.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So. Alles scheint mit der Theorie zu sein. Der Indikator liegt in unseren H√§nden, es ist Zeit zu √ºben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst m√ºssen Sie 130 und 250 Volt bekommen. Es gab eine verr√ºckte Idee, "aus der Steckdose" zu nehmen. Ich nahm eine Diodenbr√ºcke, warf einen </font><font style="vertical-align: inherit;">Kondensator </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf den</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kondensator, erhielt die Amplitude 310 vom Strom 220, lie√ü sie durch die Zenerdioden fallen und ... Ich griff zumindest danach und griff versehentlich nach der Masse des Ger√§ts und der Heizbatterie. Schmerzlich. H√∂chst. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seien Sie daher </font></font><u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√§u√üerst vorsichtig beim Umgang mit Ionenlampen ohne Gl√ºhlampen! Hochspannung ist kein Scherz. Platten nach dem Entl√∂ten m√ºssen gr√ºndlich mit Flussmittel gewaschen werden. Und wenn Sie nicht genug Erfahrung in der Elektronik haben, ist es besser, dieses Ger√§t nicht zusammenzubauen!</font></font></b></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Allgemeinen musste ich die Idee aufgeben, aus einer Verkaufsstelle zu essen. Das Sammeln von Impulsverst√§rkern ist faul. Aber dann kam die Idee, einen vorgefertigten Universalwechselrichter aus der Hintergrundbeleuchtung von LCD-Displays zu nehmen. Es kostet 150 Rubel pro St√ºck, der Transformator l√§sst sich leicht zerlegen und auf die von uns ben√∂tigten Spannungen zur√ºckspulen. Bei mir waren es 200 Windungen f√ºr eine 130-V-Wicklung und 240 Windungen f√ºr 250 Volt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es bleibt, um das Sicherheitssystem des Wechselrichters zu t√§uschen, sonst schaltet es sich nach 3 Sekunden aus. Dazu muss f√ºr den DF6109A-Chip der </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Widerstandswiderstand</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vom 13. Fu√ü bis zum Boden auf </font><font style="vertical-align: inherit;">12 K gel√∂tet werden </font><font style="vertical-align: inherit;">.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dann ist es ganz einfach: eine Diode, ein Kondensator und jetzt haben wir 130 und 250 V bereit. Zwar musste die Versorgungsspannung des Wechselrichters auf 15 V erh√∂ht werden, da sonst die Wicklungen st√§rker gewickelt werden m√ºssten. Wenn Sie einen d√ºnneren Draht mit einer gr√∂√üeren Anzahl von Windungen wickeln, k√∂nnen Sie auch mit 12 V speisen, aber ich hatte keinen d√ºnneren Draht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also - alles ist fast fertig. Wir machen eine Platine, schlie√üen einen Wechselrichter an und l√∂ten die Schl√ºssel gem√§√ü dem Schema. </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/d86/35a/ec7/d8635aec7eba85ce2307c5b30fad1195.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schema (meins, √ºberarbeitete Version. Original von SLvik): </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/d74/fbd/ec5/d74fbdec595a6b697eb651512e87f4eb.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lampenbelegung: </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/39b/730/4c4/39b7304c470c3162a6ed6de93236ad5b.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 Erste Anode </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2 Kathoden der ersten Gruppe </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3 Kathoden der zweiten Gruppe </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4 Erste Kathode des Resets </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5 Zweite Kathode des Resets </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6 Erste Hilfsanode </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7 Zweite Hilfsanode </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8 Hilfskathoden </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
9 Kathoden der dritten Gruppe</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10 Anode der zweiten Gruppe </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firmware. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist Zeit, sich an Arduino zu erinnern. </font><font style="vertical-align: inherit;">Auf dem Diagramm scheint es nicht besonders zu leuchten. </font><font style="vertical-align: inherit;">Aber es ist. </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aki ist der Gopher. Die</font></font></s><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sache ist, dass ich faul bin. </font><font style="vertical-align: inherit;">Bei Spielzeugprojekten ist es schneller, eine Skizze zu werfen und durch UART zu f√ºllen, als mit sauberem C zu baden und Spa√ü mit dem ISP zu haben. </font><font style="vertical-align: inherit;">Ja und bequemer f√ºr Anf√§nger. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Idee ist dies. </font><font style="vertical-align: inherit;">Wir nehmen das Arduino Duemilanove, flashen die Skizze, w√§hlen den Chip aus, l√∂ten ihn in die Platine und fertig. </font><font style="vertical-align: inherit;">Im Gegenzug kaufen wir f√ºr 150 Rubel einen neuen auf ebee. </font><font style="vertical-align: inherit;">Praktisch.</font></font><br>
<br>
<cut text=":"> <br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#define pA1 9</span>
<span class="hljs-comment">#define pA2 10 // -  </span>
<span class="hljs-comment">#define pK1 8  // - ! </span>
<span class="hljs-comment">#define pK2 7</span>
<span class="hljs-comment">#define pK3 6</span>
<span class="hljs-comment">#define pKR 5</span><font></font>
<font></font>
<span class="hljs-comment">#define SumCounterMax 13   // .   -   .</span>
<span class="hljs-comment">#define InputMultiplier 8  //  .    -   .</span><font></font>
<font></font>
int Avg1[SumCounterMax];<font></font>
int Avg2[SumCounterMax];<font></font>
byte nAvg = <span class="hljs-number">0</span>;<font></font>
<font></font>
const byte Log_Conv[<span class="hljs-number">256</span>] = {<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">12</span>,<span class="hljs-number">13</span>,<span class="hljs-number">15</span>,<span class="hljs-number">16</span>,<span class="hljs-number">17</span>,<span class="hljs-number">18</span>,<span class="hljs-number">20</span>,<span class="hljs-number">21</span>,<span class="hljs-number">22</span>,<span class="hljs-number">23</span>,<span class="hljs-number">24</span>,<span class="hljs-number">25</span>,<span class="hljs-number">26</span>,<span class="hljs-number">27</span>,<span class="hljs-number">28</span>,<span class="hljs-number">29</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>,<span class="hljs-number">32</span>,<span class="hljs-number">33</span>,<span class="hljs-number">33</span>,<span class="hljs-number">34</span>,<span class="hljs-number">35</span>,<span class="hljs-number">36</span>,<span class="hljs-number">37</span>,<span class="hljs-number">37</span>,<span class="hljs-number">38</span>,<span class="hljs-number">39</span>,<span class="hljs-number">40</span>,<span class="hljs-number">40</span>,<span class="hljs-number">41</span>,<span class="hljs-number">42</span>,<span class="hljs-number">42</span>,<span class="hljs-number">43</span>,<span class="hljs-number">44</span>,<span class="hljs-number">44</span>,<span class="hljs-number">45</span>,<span class="hljs-number">45</span>,<span class="hljs-number">46</span>,<span class="hljs-number">47</span>,<span class="hljs-number">47</span>,<span class="hljs-number">48</span>,<span class="hljs-number">48</span>,<span class="hljs-number">49</span>,<span class="hljs-number">50</span>,<span class="hljs-number">50</span>,<span class="hljs-number">51</span>,<span class="hljs-number">51</span>,<span class="hljs-number">52</span>,<span class="hljs-number">52</span>,<span class="hljs-number">53</span>,<span class="hljs-number">53</span>,<span class="hljs-number">54</span>,<span class="hljs-number">54</span>,<span class="hljs-number">55</span>,<span class="hljs-number">55</span>,<span class="hljs-number">56</span>,<span class="hljs-number">56</span>,<span class="hljs-number">57</span>,<span class="hljs-number">57</span>,<span class="hljs-number">57</span>,<span class="hljs-number">58</span>,<span class="hljs-number">58</span>,<span class="hljs-number">59</span>,<span class="hljs-number">59</span>,<span class="hljs-number">60</span>,<span class="hljs-number">60</span>,<span class="hljs-number">60</span>,<span class="hljs-number">61</span>,<span class="hljs-number">61</span>,<span class="hljs-number">62</span>,<span class="hljs-number">62</span>,<span class="hljs-number">63</span>,<span class="hljs-number">63</span>,<span class="hljs-number">63</span>,<span class="hljs-number">64</span>,<span class="hljs-number">64</span>,<span class="hljs-number">64</span>,<span class="hljs-number">65</span>,<span class="hljs-number">65</span>,<span class="hljs-number">66</span>,<span class="hljs-number">66</span>,<span class="hljs-number">66</span>,<span class="hljs-number">67</span>,<span class="hljs-number">67</span>,<span class="hljs-number">67</span>,<span class="hljs-number">68</span>,<span class="hljs-number">68</span>,<span class="hljs-number">68</span>,<span class="hljs-number">69</span>,<span class="hljs-number">69</span>,<span class="hljs-number">69</span>,<span class="hljs-number">70</span>,<span class="hljs-number">70</span>,<span class="hljs-number">70</span>,<span class="hljs-number">71</span>,<span class="hljs-number">71</span>,<span class="hljs-number">72</span>,<span class="hljs-number">73</span>,<span class="hljs-number">73</span>,<span class="hljs-number">73</span>,<span class="hljs-number">74</span>,<span class="hljs-number">74</span>,<span class="hljs-number">74</span>,<span class="hljs-number">74</span>,<span class="hljs-number">75</span>,<span class="hljs-number">75</span>,<span class="hljs-number">75</span>,<span class="hljs-number">76</span>,<span class="hljs-number">76</span>,<span class="hljs-number">76</span>,<span class="hljs-number">76</span>,<span class="hljs-number">77</span>,<span class="hljs-number">77</span>,<span class="hljs-number">77</span>,<span class="hljs-number">78</span>,<span class="hljs-number">78</span>,<span class="hljs-number">78</span>,<span class="hljs-number">78</span>,<span class="hljs-number">79</span>,<span class="hljs-number">79</span>,<span class="hljs-number">79</span>,<span class="hljs-number">79</span>,<span class="hljs-number">80</span>,<span class="hljs-number">81</span>,<span class="hljs-number">81</span>,<span class="hljs-number">82</span>,<span class="hljs-number">82</span>,<span class="hljs-number">82</span>,<span class="hljs-number">82</span>,<span class="hljs-number">83</span>,<span class="hljs-number">83</span>,<span class="hljs-number">83</span>,<span class="hljs-number">83</span>,<span class="hljs-number">84</span>,<span class="hljs-number">84</span>,<span class="hljs-number">84</span>,<span class="hljs-number">84</span>,<span class="hljs-number">84</span>,<span class="hljs-number">85</span>,<span class="hljs-number">85</span>,<span class="hljs-number">86</span>,<span class="hljs-number">86</span>,<span class="hljs-number">87</span>,<span class="hljs-number">87</span>,<span class="hljs-number">87</span>,<span class="hljs-number">87</span>,<span class="hljs-number">88</span>,<span class="hljs-number">88</span>,<span class="hljs-number">88</span>,<span class="hljs-number">88</span>,<span class="hljs-number">88</span>,<span class="hljs-number">89</span>,<span class="hljs-number">89</span>,<span class="hljs-number">89</span>,<span class="hljs-number">89</span>,<span class="hljs-number">90</span>,<span class="hljs-number">90</span>,<span class="hljs-number">90</span>,<span class="hljs-number">90</span>,<span class="hljs-number">90</span>,<span class="hljs-number">91</span>,<span class="hljs-number">91</span>,<span class="hljs-number">91</span>,<span class="hljs-number">91</span>,<span class="hljs-number">92</span>,<span class="hljs-number">93</span>,<span class="hljs-number">93</span>,<span class="hljs-number">93</span>,<span class="hljs-number">93</span>,<span class="hljs-number">93</span>,<span class="hljs-number">94</span>,<span class="hljs-number">94</span>,<span class="hljs-number">94</span>,<span class="hljs-number">94</span>,<span class="hljs-number">94</span>,<span class="hljs-number">95</span>,<span class="hljs-number">95</span>,<span class="hljs-number">95</span>,<span class="hljs-number">95</span>,<span class="hljs-number">95</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">97</span>,<span class="hljs-number">97</span>,<span class="hljs-number">97</span>,<span class="hljs-number">97</span>,<span class="hljs-number">97</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">99</span>,<span class="hljs-number">99</span>,<span class="hljs-number">99</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>};<font></font>
<font></font>
void setup()<font></font>
{<font></font>
	pinMode(pA1, OUTPUT);<font></font>
	pinMode(pA2, OUTPUT);<font></font>
	pinMode(pK1, OUTPUT);<font></font>
	pinMode(pK2, OUTPUT);<font></font>
	pinMode(pK3, OUTPUT);<font></font>
	pinMode(pKR, OUTPUT);<font></font>
<font></font>
	digitalWrite(pA1, LOW);<font></font>
	digitalWrite(pA2, LOW);<font></font>
	digitalWrite(pK1, LOW);<font></font>
	digitalWrite(pK2, LOW);<font></font>
	digitalWrite(pK3, LOW);<font></font>
	digitalWrite(pA1, LOW);<font></font>
	digitalWrite(pA2, LOW);<font></font>
	digitalWrite(pKR, HIGH);<font></font>
<font></font>
	delay(<span class="hljs-number">100</span>);<font></font>
	analogReference(INTERNAL);<font></font>
}<font></font>
<font></font>
void loop()<font></font>
{<font></font>
	//reset<font></font>
	digitalWrite(pA1, LOW);<font></font>
	digitalWrite(pA2, LOW);<font></font>
	digitalWrite(pK1, LOW);<font></font>
	digitalWrite(pK2, LOW);<font></font>
	digitalWrite(pK3, LOW);<font></font>
	digitalWrite(pA1, LOW);<font></font>
	digitalWrite(pA2, LOW);<font></font>
	<font></font>
	// <span class="hljs-string">""</span> .<font></font>
	digitalWrite(pKR, HIGH);<font></font>
	digitalWrite(pA1, HIGH);<font></font>
	digitalWrite(pA2, HIGH);<font></font>
<font></font>
	//  . *      =)<font></font>
	nAvg ++;<font></font>
	<span class="hljs-keyword">if</span> (nAvg == SumCounterMax)<font></font>
	{<font></font>
		nAvg = <span class="hljs-number">0</span>;<font></font>
	}<font></font>
	Avg1[nAvg] = min(analogRead(<span class="hljs-number">4</span>) * InputMultiplier, <span class="hljs-number">255</span>);<font></font>
	Avg2[nAvg] = min(analogRead(<span class="hljs-number">5</span>) * InputMultiplier, <span class="hljs-number">255</span>);<font></font>
	unsigned long sn1 = <span class="hljs-number">0</span>;<font></font>
	unsigned long sn2 = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(byte i = <span class="hljs-number">0</span>; i &lt; SumCounterMax; i++)<font></font>
	{<font></font>
		sn1 += Avg1[i];<font></font>
		sn2 += Avg2[i];<font></font>
	}<font></font>
	int n1 = Log_Conv[sn1 / SumCounterMax];<font></font>
	int n2 = Log_Conv[sn2 / SumCounterMax];<font></font>
	<font></font>
	// - .<font></font>
	<span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; max(max(n1, n2), <span class="hljs-number">60</span>) ; i++)<font></font>
	{<font></font>
		<span class="hljs-keyword">if</span> ((i + <span class="hljs-number">0</span>) % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)<font></font>
		{<font></font>
			digitalWrite(pK1, HIGH);<font></font>
			digitalWrite(pKR, LOW);<font></font>
			digitalWrite(pK3, LOW);<font></font>
		}<font></font>
		<span class="hljs-keyword">if</span> ((i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)<font></font>
		{<font></font>
			digitalWrite(pK2, HIGH);<font></font>
			digitalWrite(pK1, LOW);<font></font>
		}<font></font>
		<span class="hljs-keyword">if</span> ((i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)<font></font>
		{<font></font>
			digitalWrite(pK3, HIGH);<font></font>
			digitalWrite(pK2, LOW);<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (i &gt; n1)<font></font>
		{<font></font>
			digitalWrite(pA1, LOW);<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (i &gt; n2)<font></font>
		{<font></font>
			digitalWrite(pA2, LOW);<font></font>
		}<font></font>
		delayMicroseconds(<span class="hljs-number">90</span>);<font></font>
	}<font></font>
}<font></font>
<font></font>
</code></pre><br>
<br>
<br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, am Ende: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/305/be9/db5/305be9db54b773cb17bef4330fe8f6d9.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und auf Wunsch der Arbeiter Video:</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://www.youtube.com/embed/XkhMKLQryJ8%3Ffeature%3Doembed&amp;usg=ALkJrhgZsW-y0BJGewkZ-8jhzpMSVGk29A" frameborder="0" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS. </font><font style="vertical-align: inherit;">Es gab jedoch Fragen f√ºr erfahrene: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) - Warum musste ich die zus√§tzliche Anode und die zus√§tzliche Kathode verwenden, um den Referenzpunkt am Anfang der Skala zu stabilisieren, aber f√ºr andere wird er nicht verwendet und nichts ist kaputt? </font><font style="vertical-align: inherit;">Laut Handbuch werden sie ben√∂tigt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) - Aktualisierungsfrequenz. </font><font style="vertical-align: inherit;">Wie kritisch ist es oben / unten empfohlen? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gerne antworte ich in den Kommentaren. </font><font style="vertical-align: inherit;">Danke.</font></font></cut></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de385391/">https://habr.com/ru/post/de385391/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de385377/index.html">Robotern wurde beigebracht, wie man sicher f√§llt, indem man Katzenst√ºrze untersucht</a></li>
<li><a href="../de385381/index.html">Fiktion jetzt</a></li>
<li><a href="../de385383/index.html">So machen Sie ein Geschenk f√ºr 2000 km oder nutzen die undokumentierten Funktionen des Internets</a></li>
<li><a href="../de385385/index.html">STM32F103C8T6 - die ersten Schritte. Fahren Sie mit dem Oszilloskop fort</a></li>
<li><a href="../de385389/index.html">Denken Sie daran und sehen Sie: eine Auswahl von Smartwatches, die nicht auf Android Wear verf√ºgbar sind</a></li>
<li><a href="../de385393/index.html">Smartphone-√úbersicht Archos 50c Helium</a></li>
<li><a href="../de385395/index.html">Test des Akkus mit hoher Kapazit√§t f√ºr das Samsung Galaxy S5</a></li>
<li><a href="../de385399/index.html">Der harte Weg zu einem leisen Computer</a></li>
<li><a href="../de385401/index.html">15 Technologien aus ‚ÄûBack to the Future 2‚Äú, die uns bis 2015 versprochen wurden</a></li>
<li><a href="../de385405/index.html">Microsoft wird die Benutzer von den Vorteilen von Edge √ºberzeugen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>