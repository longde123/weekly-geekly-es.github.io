<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСйЁЯП╛тАНЁЯдЭтАНЁЯСйЁЯП╝ ЁЯСитАНтЭдя╕ПтАНЁЯТЛтАНЁЯСи ЁЯСитАНЁЯЪА рдПрдХ рдЕрдЦрдВрдб рдпреВрдирд┐рдХреНрд╕ рдЬреИрд╕рд╛ рдУрдПрд╕ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ - рдкреНрд░рд╛рд░рдВрдн рдХрд░рдирд╛ (1) ЁЯзЪЁЯП╛ ЁЯПЗЁЯП╛ ЁЯСйЁЯП╜тАНЁЯПн</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЯреНрд░рд╛рдпрд▓ рдЖрд░реНрдЯрд┐рдХрд▓ "рдПрдХ рдорд╛рдЗрдХреНрд░реЛрдХрд░реНрдирд▓ рдпреВрдирд┐рдХреНрд╕-рдЬреИрд╕реЗ OC - рд╢реЗрдбреНрдпреВрд▓рд░ рдХрд╛ рд╡рд┐рдХрд╛рд╕" рдХреА рдирдХрд╛рд░рд╛рддреНрдордХ рд╕рдореАрдХреНрд╖рд╛рдУрдВ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ, рдореИрдВрдиреЗ рдХреБрдЫ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рд▓...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдПрдХ рдЕрдЦрдВрдб рдпреВрдирд┐рдХреНрд╕ рдЬреИрд╕рд╛ рдУрдПрд╕ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ - рдкреНрд░рд╛рд░рдВрдн рдХрд░рдирд╛ (1)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466365/">  рдЯреНрд░рд╛рдпрд▓ рдЖрд░реНрдЯрд┐рдХрд▓ "рдПрдХ рдорд╛рдЗрдХреНрд░реЛрдХрд░реНрдирд▓ рдпреВрдирд┐рдХреНрд╕-рдЬреИрд╕реЗ OC - рд╢реЗрдбреНрдпреВрд▓рд░ рдХрд╛ рд╡рд┐рдХрд╛рд╕" рдХреА рдирдХрд╛рд░рд╛рддреНрдордХ рд╕рдореАрдХреНрд╖рд╛рдУрдВ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ, рдореИрдВрдиреЗ рдХреБрдЫ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рд▓реЗрдЦреЛрдВ <u>рдХреА</u> рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЛ <u>рдлрд┐рд░</u> рд╕реЗ <u>рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛</u> рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред  рдЕрдм, рдЕрдкрдиреЗ рд▓рдХреНрд╖рд┐рдд рджрд░реНрд╢рдХреЛрдВ рдХреЛ рдорд╣рд╕реВрд╕ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ рдЕрдкрдиреА рддрд░рд╣ рд╕реЗ рдЙрди рд▓реЛрдЧреЛрдВ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛ рдЧрдпрд╛, рдЬрд┐рдиреНрд╣реЗрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><a name="habracut"></a><br><h4>  рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдХреЗ рд▓рд┐рдП рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХрд╛ рдЬрд╡рд╛рдмред </h4><br>  <b>рдЯрд┐рдкреНрдкрдгреА 1.</b> рдЕрдиреБрд╕реВрдЪрдХ рдмрд╣реБрдд рд╕рд░рд▓ рд╣реИред <br><br>  рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдХреЗ рдкреНрд░рдХрд╛рд╢рди рдХреЗ рдмрд╛рдж рд╕реЗ, рдХреЛрдб рдмрд╣реБрдд рдмрджрд▓ рдЧрдпрд╛ рд╣реИред  рдПрдХ рдкреВрд░реНрдг рд╡рд┐рдХрд╕рд┐рдд рдХреЛрд░ рдХрд╛ рдЧрдарди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЬреЛ рдХрд┐ рд╕реВрдХреНрд╖реНрдо рдкреЛрд╖рдХ рд╣реЛрдирд╛ рдмрдВрдж рд╣реЛ рдЧрдпрд╛ рдерд╛ред  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд░реИрдо рдбрд┐рд╕реНрдХ (рдХрд░реНрдиреЗрд▓ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо) рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рд╣реИ, рдЖрднрд╛рд╕реА рдореЗрдореЛрд░реА (рдПрдордПрдордпреВ) рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рд╣реИред  рдХрд░реНрдиреЗрд▓ рдХреЗ рд▓рд┐рдП рдХрд╕реНрдЯрдо рдкреНрд░реЛрдЧреНрд░рд╛рдо рд▓рд┐рдЦрдирд╛ рд╕рдВрднрд╡ рд╣реЛ рдЧрдпрд╛ рд╣реИред  рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ рдФрд░ рдХреНрд▓рд┐рдм рд▓рд╛рдЗрдмреНрд░реЗрд░реА (stdio, string) рдереЗред  рддреЛ, /initrd/sh.elf рд╢реЗрд▓ рдПрдХ рдЕрд▓рдЧ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╣реИ рдЬреЛ рдпреЛрдЧрд┐рдиреА рдмреВрдЯрд▓реЛрдбрд░ рджреНрд╡рд╛рд░рд╛ рдкрд╛рд░реНрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдПрдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рддрд╛ рд╣реИред <br><br>  рд╢реЗрд▓ рдХрдорд╛рдВрдб рдХреА рд╕реВрдЪреА: рдирд┐рд╖реНрдкрд╛рджрди &lt;file.elf&gt;, ps, рдорд╛рд░, рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╢реЗрд▓ рдХреЛ рд╢реЗрд▓ рд╕реЗ рд╣реА рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдорд▓реНрдЯреАрдЯрд╛рд╕реНрдХрд┐рдВрдЧ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди)ред <br><br>  <b>рдиреЛрдЯ 2.</b> рд╡реАрдбрд┐рдпреЛ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдореЗрдВ рдкрд░реНрджреЗ рдХреЗ рдкреАрдЫреЗ рдмрд╣реБрдд рдЬрд╛рджреВ рд╣реИред <br><br>  рдореИрдВрдиреЗ рдЙрд╕ рдкрд╛рда рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдЬрд┐рд╕реЗ рдореИрдВ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд╕рдордЭрд╛ рд░рд╣рд╛ рд╣реВрдВред  рдЙрдиреНрд╣реЛрдВрдиреЗ рд╢реБрд░реБрдЖрддреА рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рднреА рдиреЗрддреГрддреНрд╡ рдХрд┐рдпрд╛, рдЬрд┐рдиреНрд╣реЗрдВ рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдФрд░ рд╕рд░рд▓рддрдо рдЪреАрдЬреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдИрдорд╛рдирджрд╛рд░реА рд╕реЗ, рдореБрдЭреЗ рдЖрд╢реНрдЪрд░реНрдп рд╣реБрдЖ рдХрд┐ рдЬрд┐рди рдирд╡рд╛рдЧрдВрддреБрдХреЛрдВ рдХреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдореЗрдВ рдХреЛрдИ рдЕрдиреБрднрд╡ рдирд╣реАрдВ рд╣реИ, рд╡реЗ рдЗрд╕ рддрд░рд╣ рдХреЗ рдЬрдЯрд┐рд▓ рд╡рд┐рд╖рдп рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЗрд╕реЗ рдЫрд┐рдкрд╛рдирд╛ рдкрд╛рдк рд╣реИ, рдореИрдВрдиреЗ рдЙрд╕реА рд╕реЗ рд╢реБрд░реБрдЖрдд рдХреА рдереАред  рдореИрдВрдиреЗ рдЕрдкрдиреЗ рдУрдПрд╕ рдХреЛ рд╕рдордЭрд╛рдиреЗ рд╕реЗ рдкреВрд░реНрд╡рд╛рдЧреНрд░рд╣ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рджрд┐рдпрд╛ рдХрд┐ рдЖрдк рдЕрдкрдиреЗ рдУрд╕реА рдХреЛ рдХреИрд╕реЗ рд▓рд┐рдЦреЗрдВред <br><br>  <b>рдЯрд┐рдкреНрдкрдгреА 3.</b> <u>рдЧрд┐рддреБрдм</u> рдХрд╛ рд▓рд┐рдВрдХ рдХрд╣рд╛рдВ рд╣реИ? <br><br>  рдЕрдм рд╡рд╣ рд╣реИред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">YouTube рдкрд░ рд╡реАрдбрд┐рдпреЛ</a> рдХреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд░реНрдгрди рдореЗрдВ</a> (рд╣рд╛рдВ, рдореИрдВ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдореЗрд░реЗ рд╡реАрдбрд┐рдпреЛ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рд╕реЗ рди рдЧреБрдЬрд░реЗрдВ, рдХрдо рд╕реЗ рдХрдо рдПрдХ рдЖрдВрдЦ рд╕реЗ рджреЗрдЦреЗрдВ)ред <br><br>  <b>рдЯрд┐рдкреНрдкрдгреА 4.</b> рд╣рдореЗрдВ рдкрд╣рд▓реЗ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рд╕реЗ рд╢реБрд░реБрдЖрдд рдХрд░рдиреА рдЪрд╛рд╣рд┐рдПред <br><br>  рд╡рд╣реА рд╣рдо рдХрд░реЗрдВрдЧреЗред <br><br>  <b>рдЯрд┐рдкреНрдкрдгреА 5.</b> рдЖрдк рдХреБрдЫ рдирд╣реАрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВ рд▓реЗрдХрд┐рди рд╕рд┐рд░реНрдл рдЯрд┐рдкреНрдкрдгреА рдХрд░рддреЗ рд╣реИрдВред <br><br>  рд╣рд╛рдБ, рдХреБрдЫ рдмрдбрд╝реА рдмрд╛рдд рдХрд░рдиреЗ рдХреА рдЕрднреА рд╕реЗ рдЧрд▓рддреА рд╣реЛ рдЧрдИред  рдЕрдм рд╣рдо рдХрджрдо рджрд░ рдХрджрдо рдЖрдЧреЗ рдмрдврд╝реЗрдВрдЧреЗ, рдзреАрд░реЗ-рдзреАрд░реЗ, рд╕рд░рд▓рддрдо рд╣реИрд▓реЛ рд╡рд░реНрд▓реНрдб рдХрд░реНрдиреЗрд▓ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВрдЧреЗред  рд╡реАрдбрд┐рдпреЛ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдЖрдкрдХреЛ рджреБрдирд┐рдпрд╛ рдХреА рдПрдХ рд╕рдордЧреНрд░ рддрд╕реНрд╡реАрд░ рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛, рдФрд░ рдЬреАрдердм рдкрд░ рд╕реНрд░реЛрдд рдХреЛрдб рдЖрдкрдХреЛ рд╡рд┐рд╡рд░рдг рдореЗрдВ рдбреБрдмрд╛ рджреЗрдЧрд╛ред <br><br><h4>  рд╕рд╛рдордЧреНрд░реА рдХреА рддрд╛рд▓рд┐рдХрд╛ред </h4><br>  1. рдмрд┐рд▓реНрдб рд╕рд┐рд╕реНрдЯрдо (рдореЗрдХ, рдЬреАрд╕реАрд╕реА, рдЧреИрд╕)ред  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдмреВрдЯ (рдорд▓реНрдЯреАрдмреВрдЯ)ред  рд▓реЙрдиреНрдЪ (qemu)ред  рд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реА (strcpy, memcpy, strext)ред <br>  2. рд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реА (рд╕реНрдкреНрд░рд┐рдВрдЯрдл, рд╕реНрдЯреНрд░реИрдЪреА, рд╕реНрдЯреНрд░реИрдореНрдк, рд╕реНрдЯреНрд░реЗрдЯреЛрдХ, рд╡рд╛_рд▓рд┐рд╕реНрдЯ ...)ред  рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЛ рдХрд░реНрдиреЗрд▓ рдореЛрдб рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЛрдб рдореЗрдВ рдмрдирд╛рдирд╛ред <br>  3. рдХрд░реНрдиреЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд▓реЙрдЧред  рд╡реАрдбрд┐рдпреЛ рдореЗрдореЛрд░реА  рдЯрд░реНрдорд┐рдирд▓ рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ (kprintf, kpanic, kassert)ред <br>  4. рдЧрддрд┐рд╢реАрд▓ рдореЗрдореЛрд░реА, рдПрдХ рдЧреБрдЪреНрдЫрд╛ (kmalloc, kfree)ред <br>  6. рдореЗрдореЛрд░реА рдФрд░ рдЗрдВрдЯрд░рдкреНрдЯ рд╣реИрдВрдбрд▓рд┐рдВрдЧ (GDT, IDT, PIC, syscall) рдХрд╛ рд╕рдВрдЧрдардиред  рдЕрдкрд╡рд╛рджред <br>  5. рд╡рд░реНрдЪреБрдЕрд▓ рдореЗрдореЛрд░реА (рдкреЗрдЬ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдФрд░ рдкреЗрдЬ рдЯреЗрдмрд▓)ред <br>  6. рдкреНрд░рдХреНрд░рд┐рдпрд╛ред  рд╕рдордпрдмрджреНрдзрдХред  рдорд▓реНрдЯреАрдЯрд╛рд╕реНрдХрд┐рдВрдЧред  рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ (рдорд╛рд░, рдирд┐рдХрд╛рд╕, рдкреАрдПрд╕)ред <br>  7. рдХрд░реНрдиреЗрд▓ рдХреА рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо (initrd), рдпреЛрдЧрд┐рдиреА рдФрд░ рдЗрд╕рдХреЗ рдЖрдВрддрд░рд┐рдХред  рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ (рдирд┐рд╖реНрдкрд╛рджрди)ред <br>  8. рдЪрд░рд┐рддреНрд░ рдбрд┐рд╡рд╛рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░ред  рд╕рд┐рд╕реНрдЯрдо рдХреЙрд▓ (ioctl, fopen, fread, fwrite)ред  рд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реА (fopen, fclose, fprintf, fscanf)ред <br>  9. рдХрд░реНрдиреЗрд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреВрд░реНрдг рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рд░реВрдк рдореЗрдВ рд╢реЗрд▓ред <br>  10. рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдореЛрдб (рд░рд┐рдВрдЧ 3)ред  рдЯрд╛рд╕реНрдХ рд╕реНрдЯреЗрдЯрд╕ рд╕реЗрдЧрдореЗрдВрдЯ (tss)ред <br><br><h3>  рдЪрд▓реЛ рдЪрд▓рддреЗ рд╣реИрдВред  рднрд╛рдЧ 1. рд╕рд┐рд╕реНрдЯрдо рдмрдирд╛рдПрдВ рдФрд░ рд▓реЙрдиреНрдЪ рдХрд░реЗрдВ </h3><br>  рд▓реЗрдЦ рдореЗрдВ рдореИрдВ рдХреЗрд╡рд▓ <b>рдкреНрд░рдореБрдЦ рдЪрд░рдгреЛрдВ рдХреА</b> рд╕реВрдЪреА рджреВрдВрдЧрд╛ред  рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рд╡рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕ рд▓реЗрдЦ рдХреЗ рд▓рд┐рдП рд╡реАрдбрд┐рдпреЛ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рджреЗрдЦреЗрдВред <br><br>  рдЖрдкрдХреЛ рд▓рд┐рдирдХреНрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╣рдо рдЕрдЪреНрдЫреЗ рдкреБрд░рд╛рдиреЗ рдореЗрдХ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░реЗрдВрдЧреЗред  рдХрд░реНрдиреЗрд▓ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЭрдВрдбреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><pre><code class="plaintext hljs">CC_FLAGS=-g -m32 -isystem $(IDIR) -I include -DKERNEL=1 -fno-stack-protector -Wall -Werror -fno-pie AS_FLAGS=-g --32 LD_FLAGS=-m elf_i386</code> </pre> <br>  рдПрдХ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдПрдореБрд▓реЗрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ, рд▓рд┐рдирдХреНрд╕ рдкрд░ qemu рдПрдореБрд▓реЗрдЯрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред  рд╣рдо рдЗрд╕ рддрд░рд╣ рдЕрдкрдирд╛ рдХрд░реНрдиреЗрд▓ рдЪрд▓рд╛рдПрдВрдЧреЗ: <br><br><pre> <code class="plaintext hljs">qemu-system-i386 -kernel ./bin/kernel.elf</code> </pre><br>  рдпрд╣ рднреА рд▓рд┐рдВрдХрд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдЫреЛрдЯреА рд╕реА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  рд╕рд╣реА рдкрддреЗ рдкрд░ рдФрд░ рд╕рд╣реА рдХреНрд░рдо рдореЗрдВ рдЕрдиреБрднрд╛рдЧреЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░реЗрдВрдЧреЗ: <br><br><pre> <code class="plaintext hljs">OUTPUT_FORMAT(elf32-i386) ENTRY(start) SECTIONS { . = 0x100000; .text : { *(.text) } .data : { *(.data) } .bss : { *(.bss) } }</code> </pre><br>  рдЪреВрдВрдХрд┐ рдХрд░реНрдиреЗрд▓ рдХреЛ рдорд▓реНрдЯреАрдмреВрдЯ рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдХреЛрдб рдЕрдиреБрднрд╛рдЧ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╣реЗрдбрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: <br><br><pre> <code class="plaintext hljs">.code32 .text # multiboot spec .align 4 multiboot: .long 0x1BADB002 # magic .long 0x00 # flags .long -(0x1BADB002 + 0x00) # checksum. m+f+c should be zero</code> </pre><br>  рдпрд╣ рдЕрдиреБрд╢рдВрд╕рд╛ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдЖрдк рддреБрд░рдВрдд рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдвреЗрд░ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВ рдФрд░ рдПрдХ рд╡реИрд╢реНрд╡рд┐рдХ рд╡рд┐рд╡рд░рдгрдХ рддрд╛рд▓рд┐рдХрд╛ рд╕реЗрдЯ рдХрд░реЗрдВред  рд╣рдорд╛рд░реЗ рдЕрдкрдиреЗ рдвреЗрд░ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВ: <br><br><pre> <code class="plaintext hljs">.bss .fill 8192,1 # 8Kb stack:</code> </pre><br>  рдПрдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдмрд┐рдВрджреБ рд▓рд┐рдЦреЗрдВред  рдЖрдкрдХреЛ рдЧрди рдЕрд╕реЗрдВрдмрд▓рд░ рд╕рд┐рдВрдЯреИрдХреНрд╕ рдЕрд╕рд╛рдорд╛рдиреНрдп рд▓рдЧ рд╕рдХрддрд╛ рд╣реИред  рдореИрдВрдиреЗ рдПрдХ рдмрд╛рд░ рдЗрдВрдЯреЗрд▓ рд╕рд┐рдВрдЯреИрдХреНрд╕ рдХреЛ рднреА рдкреНрд░рд╛рдердорд┐рдХрддрд╛ рджреА рдереА, рдлрд┐рд░ рдЙрд╕реЗ рдЪрдЦрд╛, рд▓рд┐рдирдХреНрд╕ рд╕реЛрд░реНрд╕ рдХреЛрдб рдореЗрдВ рдбрд┐рд▓реАрдЯ рдХрд░рддреЗ рд╣реБрдП, рдореИрдВрдиреЗ рдЕрдкрдиреЗ рд▓рд┐рдП рдПрдЯреА рдПрдВрдб рдЯреА рд╕рд┐рдВрдЯреИрдХреНрд╕ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкрд╕рдВрдж рдХрд┐рдпрд╛ред рдпрд╛рдж рд░рдЦрдиреЗ рд╡рд╛рд▓реА рдореБрдЦреНрдп рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЙрдирдХреЗ рдкрд╛рд╕ рд╡рд┐рдкрд░реАрдд рдСрдкрд░реЗрдВрдб рд╣реИрдВред  рдмрд╛рдХреА рд╕рдм рд╕рд╣рдЬ рд╣реЛрдЧрд╛ред <br><br><pre> <code class="plaintext hljs">start: cli movl $stack,%esp push %esp push %ebx /* address of struct multiboot_t */ call kernel_start /* should never return */ hlt</code> </pre><br>  рдпрд╣ рдмреЙрдпрд▓рд░рдкреНрд▓реЗрдЯ рдХреЛрдб рдХреЛ рдкреВрд░рд╛ рдХрд░рддрд╛ рд╣реИред  рдордЬрд╝рд╛ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рдЕрдм рд╣рдо C. рдореЗрдВ рдХреЛрдб рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдмрдзрд╛рдИ рд╕рдВрджреЗрд╢ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВрдЧреЗред <br><br><pre> <code class="plaintext hljs">char *hello = "Hello world!"; int screen_size = 80 * 25;</code> </pre><br>  рдЕрдЧрд▓рд╛, рд╣рдо рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рдХреЛ рд╕реНрд╡рдпрдВ рд▓рд┐рдЦрддреЗ рд╣реИрдВ рдЬрд┐рд╕ рдкрд░ рдХреЛрдбрд╛рдВрддрд░рдХ рдХреЛрдб рдирд┐рдпрдВрддреНрд░рдг рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдЧрд╛: <br><br><pre> <code class="plaintext hljs">/* * Api - Kernel entry point */ extern void kernel_start(struct multiboot_t* multiboot, void* kstack) { char *video = (char*)0xB8000; char buff[screen_size + 1]; video[screen_size] = '\0'; memset(buff, ' ', screen_size); strext(video, buff, 0x7); strext(video, hello, 0x7); }</code> </pre><br>  рдпрд╣рд╛рдВ рд╣рдо рдХреЗрд╡рд▓ рд╕реНрдХреНрд░реАрди рдкрд░ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдЖрдк рдкрд╣рд▓реЗ рдкрд╛рда рдХреЗ рдХреЛрдб рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХреЙрдкреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╣реИ рдФрд░ рдЗрд╕реЗ рдХрднреА рдирд╣реАрдВ рдмрджрд▓рд╛ рдЬрд╛рдПрдЧрд╛ред  рд╕реНрдХреНрд░реАрди рдкрд░ рдХреБрдЫ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдмрд╕ рдЗрд╕реЗ рд╡реАрдбрд┐рдпреЛ рдореЗрдореЛрд░реА рдореЗрдВ рд╕реАрдзреЗ рд▓рд┐рдЦрдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ, рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рд┐рддреНрд░ рдХреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖рддрд╛ рдкреНрд░рддреАрдХ рдХреЗ рд╕рд╛рде рдкреВрд░рдХ рдХрд░рдирд╛ред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЕрдкрдиреА рд╕реНрд╡рдпрдВ рдХреА рд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рдЬрд┐рд╕реЗ рд╣рдо рдЕрдкрдиреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рдпрдВ рд▓рд┐рдЦреЗрдВрдЧреЗред  рдЗрд╕рд▓рд┐рдП рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛрдЧрд╛ред  рдЗрд╕рд▓рд┐рдП, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдЬ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд╣рдорд╛рд░реЗ рдирд┐рдкрдЯрд╛рди 2 рдореЗрдВ рд╕рднреА рдкрд░рд┐рдЪрд┐рдд рдХрд╛рд░реНрдп (strcpy, memcpy) рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рд┐рддреНрд░ рдХреЗ рдмрд╛рдж рд╡рд┐рд╢реЗрд╖рддрд╛ рдмрд╛рдЗрдЯ рд╕рдореНрдорд┐рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣рдорд╛рд░реЗ рд╕реНрд╡рдпрдВ рдХреЗ рд╕реНрдЯреНрд░реЗрдХреНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред <br><br><h4>  рдирд┐рд╖реНрдХрд░реНрд╖ </h4><br>  рдЖрдЬ рдХреЗ рд▓рд┐рдП рдмрд╕ рдЗрддрдирд╛ рд╣реАред  рд╡реАрдбрд┐рдпреЛ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рджреЗрдЦреЗрдВ рдФрд░ рдЕрдкрдиреЗ рджрдо рдкрд░ рдРрд╕рд╛ рд╣реА рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред  рдпрджрд┐ рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЖрдк рдЧреАрдердм рдкрд░ рдкрд╛рда рдХреЗ рд▓рд┐рдП рд╕реНрд░реЛрддреЛрдВ рдореЗрдВ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡реАрдбрд┐рдпреЛ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рд╡рд┐рд╡рд░рдг рдореЗрдВ</a> <b>рдЬреАрдереВрдм рд╕реЗ</b> рд▓рд┐рдВрдХ рдХрд░реЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">:</a> <br><br><h4>  рд╕рд╛рд╣рд┐рддреНрдп </h4><br><br>  1. рдЬреЗрдореНрд╕ рдореЛрд▓реЙрдпред  рдЕрдкрдирд╛ рдЦреБрдж рдХрд╛ рдЦрд┐рд▓реМрдирд╛ рдпреВрдирд┐рдХреНрд╕-рдХреНрд▓реЛрди рдУрдПрд╕ рд░реЛрд▓ рдХрд░реЗрдВред <br>  2. рджрд╛рдБрддред  рдбреЙрд╕, рд╡рд┐рдВрдбреЛрдЬ, рдпреВрдирд┐рдХреНрд╕ рдХреЗ рд▓рд┐рдП рдЕрд╕реЗрдВрдмрд▓рд░ <br>  3. рдХрд▓рд╛рд╢реНрдирд┐рдХреЛрд╡ред  рдЕрд╕реЗрдВрдмрд▓рд░ рдЖрд╕рд╛рди рд╣реИ! <br>  4. рддрд╛рдирдирдмрд╛рдоред  рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдоред  рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдФрд░ рд╡рд┐рдХрд╛рд╕ред <br>  5. рд░реЙрдмрд░реНрдЯ рд▓рд╡ред  рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓  рд╡рд┐рдХрд╛рд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╡рд┐рд╡рд░рдгред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi466365/">https://habr.com/ru/post/hi466365/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi466349/index.html">15,000 рдСрдлрд╝рд▓рд╛рдЗрди рд╕реНрдЯреЛрд░ рдкрд░ рдП / рдмреА рдкрд░реАрдХреНрд╖рдг рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
<li><a href="../hi466355/index.html">рдордЧрд░рдордЪреНрдЫ рдЙрдбрд╝рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХрдо-рдХрдо (рднрд╛рд╡рдирд╛рдУрдВ рдХреЗ рдмрд┐рдирд╛ рдЗрдХреНрд░рд╛рдиреЛрдкреНрд▓рд╛рдВрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ, рд▓реЗрдХрд┐рди рдкрд╛рдЪрди рдХреЗ рд╕рд╛рде)</a></li>
<li><a href="../hi466359/index.html">рдХреНрдпреЛрдВ рд╡рд┐рд╢реНрд╡ рдкрд╛рд░рд┐рд╕реНрдерд┐рддрд┐рдХ рдЛрдг рджрд┐рд╡рд╕ рдФрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рдкрджрдЪрд┐рд╣реНрди рдЫрджреНрдо рд╡реИрдЬреНрдЮрд╛рдирд┐рдХ рдмрдХрд╡рд╛рд╕ рд╣реИ</a></li>
<li><a href="../hi466361/index.html">рдХреИрд╕реЗ Cossacks GICSP рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛</a></li>
<li><a href="../hi466363/index.html">рд╕реНрд▓рдо рджреЗрд╡рдУрдкреАрдПрд╕ред рдкрд╣рд▓рд╛ рджрд┐рдиред Git, CI / CD, IaC рдФрд░ рдЧреНрд░реАрди рдбрд╛рдпрдирд╛рд╕реЛрд░</a></li>
<li><a href="../hi466367/index.html">Android рдПрдкреАрдЖрдИ рд╕реНрддрд░, рдкрд┐рдЫрдбрд╝реЗ рдФрд░ рдЖрдЧреЗ рд╕рдВрдЧрддрддрд╛</a></li>
<li><a href="../hi466371/index.html">рд╢реАрд░реНрд╖ 3 рдмрд┐рдХреНрд░реА рдЖрдк рд░реБрдЭрд╛рди рдЯреНрд░реЗрдВрдбрд┐рдВрдЧ рдЯреЗрдХреНрдиреЛрд▓реЙрдЬреАрдЬ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi466373/index.html">рдкрд╛рдпрдерди рдЯреИрдордЯрдо рдмреЙрдЯ рд╡рд┐рдХрд╛рд╕</a></li>
<li><a href="../hi466375/index.html">рд╕рдВрдЧреНрд░рд╣рд╛рд▓рдп рдбреЗрдЯрд╛рдЖрд░реНрдЯред KUVT2 - рдЕрдзреНрдпрдпрди рдФрд░ рдЦреЗрд▓</a></li>
<li><a href="../hi466379/index.html">рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдкрд░ "рдбреЗрд╕реНрдХрдЯреЙрдк" рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдЪрд▓рд╛рдПрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>