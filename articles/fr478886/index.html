<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚶🏻 🌇 👲🏿 Composants angulaires avec contenu en ligne 🤸🏽 🔽 😴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque vous créez de nouveaux composants lors du développement sur Angular, vous vous efforcez de les créer de manière à ce qu'ils puissent être réut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Composants angulaires avec contenu en ligne</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478886/">  Lorsque vous créez de nouveaux composants lors du développement sur Angular, vous vous efforcez de les créer de manière à ce qu'ils puissent être réutilisés plusieurs fois.  Tout comme dans le développement de logiciels, un programmeur s'efforce de rendre son code aussi réutilisable que possible.  En même temps, je veux avoir des composants flexibles mais pas trop complexes. <br><br><img src="https://habrastorage.org/webt/lr/oc/ao/lrocaol1yl_y7iw6vulni6j1twa.jpeg"><br><a name="habracut"></a><br>  En règle générale, les composants doivent être aussi stupides que possible pour être plus faciles à entretenir et à tester.  Mais en même temps, ils sont personnalisables et flexibles de sorte que vous pouvez les réutiliser plusieurs fois, et ne pas traiter des composants de clonage qui sont similaires visuellement et fonctionnellement, mais qui diffèrent toujours par quelque chose.  Ou n'ajoutez pas un tas de paramètres aux composants, en fonction desquels activer ou désactiver tout comportement du composant, mais qui seront en fait utilisés dans 1 cas sur 100. <br><br>  Créer un sous-marin, qui devrait couler jusqu'au fond de la mer bleue sans risque pour la vie de l'équipage, puis le modifier avant de voler dans le ciel bleu n'est pas une tâche facile. <br><cut></cut><br>  Un composant angulaire est la plus petite unité d'interface utilisateur qui devrait effectuer une tâche simple et rien de plus.  La création de composants pour toutes les occasions est une mauvaise pratique.  Il faut donc trouver un compromis entre flexibilité et simplicité. <br><br>  Supposons que vous vouliez créer un composant qui se compose d'une sorte de wrapper, à l'intérieur duquel se trouvent un en-tête et une sorte de commutateur, et du contenu sous eux.  Quelque chose comme ça: <br><br><img src="https://habrastorage.org/webt/bx/c5/wr/bxc5wriimpcbk-mjo8d25duq5fi.png"><br><br>  L'ensemble du composant, qui sera appelé widget, est indiqué en vert.  Le commutateur d'en-tête est surligné en rouge et le contenu est surligné en bleu.  Angular est un cadre incroyablement puissant; la création d'un composant similaire à celui de l'image est une tâche très triviale pour Angular. <br><br><img src="https://habrastorage.org/webt/o-/5c/nw/o-5cnwpcgp__849owtseim7lul8.jpeg" width="300" align="right">  Mais que se passe-t-il si ce composant est rendu plus flexible, par exemple, de sorte que le contenu change en fonction des paramètres du composant widget? <br><br>  Vous pouvez résoudre la représentation externe du contenu en fonction du paramètre de widget, par exemple, à l'aide de la directive structurelle <i>ngIf</i> .  Vous pouvez basculer entre différentes vues.  Et s'il y a trop de soumissions, vous pouvez utiliser une autre directive structurelle <i>ngSwitch</i> . <br><br><img src="https://habrastorage.org/webt/yg/nj/yj/ygnjyj4lqsygs2n20foagrb8gws.jpeg" width="300" align="left">  Et si différentes vues répondaient différemment aux actions des utilisateurs?  Ensuite, le code du composant aura également un tas d'instructions conditionnelles.  Mais le code, dans lequel il existe de nombreuses instructions conditionnelles, au fil du temps, il devient difficile de maintenir, de corriger des bogues ou d'étendre les fonctionnalités ... <br><br>  Vous pouvez créer un composant widget de telle manière qu'il reçoive n'importe quel contenu, mais en même temps, il jette les valeurs sélectionnées du panneau de filtre dans les composants de la zone de contenu.  Et je voudrais également pouvoir transmettre des paramètres du composant parent du widget au contenu, sans affecter le composant du widget lui-même.  Pour résoudre ce problème, vous pouvez utiliser la merveilleuse directive <i>ngTemplateOutlet</i> , qui vous permettra de «résoudre» la représentation visuelle du composant.  Pour plus d'informations, vous pouvez vous référer à la <a href="https://angular.io/api/common/NgTemplateOutlet">documentation</a> , bien qu'à mon avis toute sa puissance n'y soit pas montrée. <br><br>  Dans ce cas, le composant widget peut être représenté comme suit: <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// widget.component.ts … private widgetContentTemplate: TemplateRef&lt;any&gt;; //      @ContentChild(WidgetContentTemplateDirective, { read: TemplateRef }) set WidgetContentTemplate(value: TemplateRef&lt;any&gt;) { this.widgetContentTemplate = value; } get WidgetContentTemplate(): TemplateRef&lt;any&gt; { return this.widgetContentTemplate; } …</span></span></code> </pre> <br><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- widget.component.html --&gt;</span></span> … <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"widget__content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      ,      context.   ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WidgetContentTemplate || DefaultWidgetContentTemplate; context: { post: SelectedPost }"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">DefaultWidgetContentTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>[    ]<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> …</code> </pre><br>  La directive ngTemplateOutlet accepte un objet TemplateRef qui est lu dans le composant à l'aide de @ContentChild.  Pour ce faire, vous devez créer une directive simple.  Voici son code: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// widget-content-template.directive.ts import { Directive, TemplateRef } from '@angular/core'; @Directive({ selector: '[appWidgetContentTemplate]' }) export class WidgetContentTemplateDirective { get Template(): TemplateRef&lt;any&gt; { return this.template; } constructor(private readonly template: TemplateRef&lt;any&gt;) {} }</span></span></code> </pre><br>  Les paramètres du commutateur de widget peuvent être transmis au contenu à l'aide de l'objet contextuel.  Pour que les paramètres du contexte soient correctement lus par le composant, il est nécessaire dans le composant parent, dans notre cas c'est AppComponent, n'oubliez pas de les décrire comme suit: <br><br><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- app.component.html --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-widget-component</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  (  )"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- let-post="post" ,         --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">appWidgetContentTemplate</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-post</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-post-view</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Post</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-post-view</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-widget-component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-widget-component</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  (  )"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  let-post="post"     ,  ShowPostInfo  AppComponent --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">appWidgetContentTemplate</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-post</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-post-view</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Post</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ShowPostInfo</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ShowPostInfo"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-post-view</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-widget-component</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Ainsi, nous avons un composant widget qui accepte et affiche n'importe quel contenu, tandis que le composant widget lui-même n'a rien à savoir sur le contenu.  Il transmet simplement les options de commutation.  Les lire ou non est une question de contenu. <br><br><img src="https://habrastorage.org/webt/sm/qp/-r/smqp-riiy6jniznk1j4o6xgbtpa.jpeg"><br><br>  La version complète du code peut être consultée <a href="https://stackblitz.com/edit/angular-ga68dw">ici</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr478886/">https://habr.com/ru/post/fr478886/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr478866/index.html">Meet Space - Nouveau produit de JetBrains</a></li>
<li><a href="../fr478872/index.html">DIY: comment automatiser la surveillance des entrepôts</a></li>
<li><a href="../fr478874/index.html">Toshiba a annoncé deux nouvelles gammes de disques durs avec des capacités allant jusqu'à 6 To et a annoncé sa concentration sur le segment des entreprises depuis 2020</a></li>
<li><a href="../fr478878/index.html">Le morceau de code le plus populaire de l'histoire de StackOverflow a un bug!</a></li>
<li><a href="../fr478880/index.html">Quels salaires les employeurs ont-ils proposés aux informaticiens au second semestre 2019</a></li>
<li><a href="../fr478888/index.html">Quelques réflexions sur les problèmes de prise en charge de CSS modulaire et de code</a></li>
<li><a href="../fr478892/index.html">Le bénévolat comme mode de vie</a></li>
<li><a href="../fr478894/index.html">Apprenez Azure en un mois de repas - notre nouveau livre électronique gratuit</a></li>
<li><a href="../fr478896/index.html">Annonce de .NET Core 3.1</a></li>
<li><a href="../fr478900/index.html">Quelques conseils utiles pour pratiquer Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>