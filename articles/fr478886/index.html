<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∂üèª üåá üë≤üèø Composants angulaires avec contenu en ligne ü§∏üèΩ üîΩ üò¥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque vous cr√©ez de nouveaux composants lors du d√©veloppement sur Angular, vous vous efforcez de les cr√©er de mani√®re √† ce qu'ils puissent √™tre r√©ut...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Composants angulaires avec contenu en ligne</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478886/">  Lorsque vous cr√©ez de nouveaux composants lors du d√©veloppement sur Angular, vous vous efforcez de les cr√©er de mani√®re √† ce qu'ils puissent √™tre r√©utilis√©s plusieurs fois.  Tout comme dans le d√©veloppement de logiciels, un programmeur s'efforce de rendre son code aussi r√©utilisable que possible.  En m√™me temps, je veux avoir des composants flexibles mais pas trop complexes. <br><br><img src="https://habrastorage.org/webt/lr/oc/ao/lrocaol1yl_y7iw6vulni6j1twa.jpeg"><br><a name="habracut"></a><br>  En r√®gle g√©n√©rale, les composants doivent √™tre aussi stupides que possible pour √™tre plus faciles √† entretenir et √† tester.  Mais en m√™me temps, ils sont personnalisables et flexibles de sorte que vous pouvez les r√©utiliser plusieurs fois, et ne pas traiter des composants de clonage qui sont similaires visuellement et fonctionnellement, mais qui diff√®rent toujours par quelque chose.  Ou n'ajoutez pas un tas de param√®tres aux composants, en fonction desquels activer ou d√©sactiver tout comportement du composant, mais qui seront en fait utilis√©s dans 1 cas sur 100. <br><br>  Cr√©er un sous-marin, qui devrait couler jusqu'au fond de la mer bleue sans risque pour la vie de l'√©quipage, puis le modifier avant de voler dans le ciel bleu n'est pas une t√¢che facile. <br><cut></cut><br>  Un composant angulaire est la plus petite unit√© d'interface utilisateur qui devrait effectuer une t√¢che simple et rien de plus.  La cr√©ation de composants pour toutes les occasions est une mauvaise pratique.  Il faut donc trouver un compromis entre flexibilit√© et simplicit√©. <br><br>  Supposons que vous vouliez cr√©er un composant qui se compose d'une sorte de wrapper, √† l'int√©rieur duquel se trouvent un en-t√™te et une sorte de commutateur, et du contenu sous eux.  Quelque chose comme √ßa: <br><br><img src="https://habrastorage.org/webt/bx/c5/wr/bxc5wriimpcbk-mjo8d25duq5fi.png"><br><br>  L'ensemble du composant, qui sera appel√© widget, est indiqu√© en vert.  Le commutateur d'en-t√™te est surlign√© en rouge et le contenu est surlign√© en bleu.  Angular est un cadre incroyablement puissant; la cr√©ation d'un composant similaire √† celui de l'image est une t√¢che tr√®s triviale pour Angular. <br><br><img src="https://habrastorage.org/webt/o-/5c/nw/o-5cnwpcgp__849owtseim7lul8.jpeg" width="300" align="right">  Mais que se passe-t-il si ce composant est rendu plus flexible, par exemple, de sorte que le contenu change en fonction des param√®tres du composant widget? <br><br>  Vous pouvez r√©soudre la repr√©sentation externe du contenu en fonction du param√®tre de widget, par exemple, √† l'aide de la directive structurelle <i>ngIf</i> .  Vous pouvez basculer entre diff√©rentes vues.  Et s'il y a trop de soumissions, vous pouvez utiliser une autre directive structurelle <i>ngSwitch</i> . <br><br><img src="https://habrastorage.org/webt/yg/nj/yj/ygnjyj4lqsygs2n20foagrb8gws.jpeg" width="300" align="left">  Et si diff√©rentes vues r√©pondaient diff√©remment aux actions des utilisateurs?  Ensuite, le code du composant aura √©galement un tas d'instructions conditionnelles.  Mais le code, dans lequel il existe de nombreuses instructions conditionnelles, au fil du temps, il devient difficile de maintenir, de corriger des bogues ou d'√©tendre les fonctionnalit√©s ... <br><br>  Vous pouvez cr√©er un composant widget de telle mani√®re qu'il re√ßoive n'importe quel contenu, mais en m√™me temps, il jette les valeurs s√©lectionn√©es du panneau de filtre dans les composants de la zone de contenu.  Et je voudrais √©galement pouvoir transmettre des param√®tres du composant parent du widget au contenu, sans affecter le composant du widget lui-m√™me.  Pour r√©soudre ce probl√®me, vous pouvez utiliser la merveilleuse directive <i>ngTemplateOutlet</i> , qui vous permettra de ¬´r√©soudre¬ª la repr√©sentation visuelle du composant.  Pour plus d'informations, vous pouvez vous r√©f√©rer √† la <a href="https://angular.io/api/common/NgTemplateOutlet">documentation</a> , bien qu'√† mon avis toute sa puissance n'y soit pas montr√©e. <br><br>  Dans ce cas, le composant widget peut √™tre repr√©sent√© comme suit: <br><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// widget.component.ts ‚Ä¶ private widgetContentTemplate: TemplateRef&lt;any&gt;; //      @ContentChild(WidgetContentTemplateDirective, { read: TemplateRef }) set WidgetContentTemplate(value: TemplateRef&lt;any&gt;) { this.widgetContentTemplate = value; } get WidgetContentTemplate(): TemplateRef&lt;any&gt; { return this.widgetContentTemplate; } ‚Ä¶</span></span></code> </pre> <br><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- widget.component.html --&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"widget__content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--      ,      context.   ,     --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"WidgetContentTemplate || DefaultWidgetContentTemplate; context: { post: SelectedPost }"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">DefaultWidgetContentTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>[    ]<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> ‚Ä¶</code> </pre><br>  La directive ngTemplateOutlet accepte un objet TemplateRef qui est lu dans le composant √† l'aide de @ContentChild.  Pour ce faire, vous devez cr√©er une directive simple.  Voici son code: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// widget-content-template.directive.ts import { Directive, TemplateRef } from '@angular/core'; @Directive({ selector: '[appWidgetContentTemplate]' }) export class WidgetContentTemplateDirective { get Template(): TemplateRef&lt;any&gt; { return this.template; } constructor(private readonly template: TemplateRef&lt;any&gt;) {} }</span></span></code> </pre><br>  Les param√®tres du commutateur de widget peuvent √™tre transmis au contenu √† l'aide de l'objet contextuel.  Pour que les param√®tres du contexte soient correctement lus par le composant, il est n√©cessaire dans le composant parent, dans notre cas c'est AppComponent, n'oubliez pas de les d√©crire comme suit: <br><br><pre> <code class="xml hljs"><span class="hljs-comment"><span class="hljs-comment">&lt;!-- app.component.html --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-widget-component</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  (  )"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- let-post="post" ,         --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">appWidgetContentTemplate</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-post</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-post-view</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Post</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-post-view</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-widget-component</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-widget-component</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"  (  )"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--  let-post="post"     ,  ShowPostInfo  AppComponent --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">appWidgetContentTemplate</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-post</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-post-view</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Post</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"post"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ShowPostInfo</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ShowPostInfo"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-post-view</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-widget-component</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Ainsi, nous avons un composant widget qui accepte et affiche n'importe quel contenu, tandis que le composant widget lui-m√™me n'a rien √† savoir sur le contenu.  Il transmet simplement les options de commutation.  Les lire ou non est une question de contenu. <br><br><img src="https://habrastorage.org/webt/sm/qp/-r/smqp-riiy6jniznk1j4o6xgbtpa.jpeg"><br><br>  La version compl√®te du code peut √™tre consult√©e <a href="https://stackblitz.com/edit/angular-ga68dw">ici</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr478886/">https://habr.com/ru/post/fr478886/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr478866/index.html">Meet Space - Nouveau produit de JetBrains</a></li>
<li><a href="../fr478872/index.html">DIY: comment automatiser la surveillance des entrep√¥ts</a></li>
<li><a href="../fr478874/index.html">Toshiba a annonc√© deux nouvelles gammes de disques durs avec des capacit√©s allant jusqu'√† 6 To et a annonc√© sa concentration sur le segment des entreprises depuis 2020</a></li>
<li><a href="../fr478878/index.html">Le morceau de code le plus populaire de l'histoire de StackOverflow a un bug!</a></li>
<li><a href="../fr478880/index.html">Quels salaires les employeurs ont-ils propos√©s aux informaticiens au second semestre 2019</a></li>
<li><a href="../fr478888/index.html">Quelques r√©flexions sur les probl√®mes de prise en charge de CSS modulaire et de code</a></li>
<li><a href="../fr478892/index.html">Le b√©n√©volat comme mode de vie</a></li>
<li><a href="../fr478894/index.html">Apprenez Azure en un mois de repas - notre nouveau livre √©lectronique gratuit</a></li>
<li><a href="../fr478896/index.html">Annonce de .NET Core 3.1</a></li>
<li><a href="../fr478900/index.html">Quelques conseils utiles pour pratiquer Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>