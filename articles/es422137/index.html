<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòí üëêüèø üèÇüèª Presagio: ¬øun presagio de problemas? üë®üèø‚Äçüé® üê∏ üôÜüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El a√±o 2018 actual es interesante porque casi todos los meses hay informaci√≥n sobre nuevas vulnerabilidades de hardware: Spectre y Meltdown . 


 M√°s ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Presagio: ¬øun presagio de problemas?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/selectel/blog/422137/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/y3/wt/uj/y3wtujwc18iorpu3i2tcbcr8x8e.png"></div><br><p>  El a√±o 2018 actual es interesante porque casi todos los meses hay informaci√≥n sobre nuevas vulnerabilidades de hardware: <strong>Spectre</strong> y <strong>Meltdown</strong> . </p><br><p>  M√°s recientemente, ¬°hace un par de semanas!  - Se publicaron noticias de <strong>alto</strong> perfil sobre las vulnerabilidades <strong>Foreshadow</strong> y <strong>L1Terminal Fault</strong> , que, seg√∫n se informa, omiten incluso el mecanismo <strong>SGX (Sofware Guard Extensions)</strong> , que anteriormente se consideraba casi irrompible. </p><br><p>  ¬øQu√© tan peligrosas son estas vulnerabilidades?  ¬øEs posible defenderse de ellos y, de ser as√≠, c√≥mo?  Hablaremos de todo esto a continuaci√≥n. </p><a name="habracut"></a><br><h2>  Referencia r√°pida </h2><br><p>  Foreshadow, o L1TF, es un grupo completo de vulnerabilidades que incluye: </p><br><ul><li>  CVE-2018-3615 - para evitar SGX; </li><li>  CVE-2018-3620 - para atacar el kernel del sistema operativo, as√≠ como SMM (Modo de administraci√≥n del sistema); </li><li>  CVE-2018-3646: para atacar m√°quinas virtuales. </li></ul><br><p>  Los autores de muchas publicaciones est√°n particularmente preocupados por la posibilidad de eludir la protecci√≥n SGX: Specter y Metldown no sab√≠an c√≥mo hacer esto, y esto hace que cualquier informaci√≥n confidencial quede indefensa.  Para comprender c√≥mo se justifica esta alarma, analicemos los principios de funcionamiento del mecanismo SGX. </p><br><h2>  ¬øQu√© es SGX y c√≥mo puedo evitarlo? </h2><br><p>  La abreviatura SGX significa Software Guard Extensions.  Este es el nombre del conjunto de instrucciones para los procesadores Intel utilizados para resaltar √°reas privadas de c√≥digo y datos.  En 2015, uno de los creadores de SGX, Matthew Hoykstra (Matthew Hoeskstra) public√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">un art√≠culo</a> (ver tambi√©n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">traducci√≥n al ruso</a> ), en el que identific√≥ los siguientes objetivos para crear esta tecnolog√≠a: </p><br><ul><li>  brinde a los desarrolladores de aplicaciones la capacidad de proteger datos cr√≠ticos contra el acceso no autorizado o los cambios mediante software malicioso que se ejecuta con mayores privilegios; </li><li>  permitir que las aplicaciones aseguren la integridad y confidencialidad de los datos y c√≥digos confidenciales sin interferir con el funcionamiento del sistema de privilegios y sin interferir con su planificaci√≥n y control de los recursos de la plataforma; </li><li>  hacer que la plataforma mida el c√≥digo confiable y use la aplicaci√≥n para producir un certificado firmado y otros certificados que confirmen que el c√≥digo se inicializ√≥ correctamente en un entorno confiable; </li><li>  dar a los usuarios la capacidad de controlar aplicaciones, sin limitar la libertad de instalar y eliminar aplicaciones y servicios; </li><li>  Permita que los desarrolladores creen aplicaciones confiables utilizando herramientas y procesos conocidos por ellos. </li><li>  Proporcionar mayor productividad para aplicaciones confiables </li><li>  permita que las aplicaciones determinen √°reas confiables de c√≥digo y datos incluso en el caso de que un atacante controle f√≠sicamente la plataforma y pueda llevar a cabo ataques directos en la memoria (consulte un ejemplo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">aqu√≠</a> ). </li></ul><br><p> El art√≠culo citado tiene mucho m√°s marketing que detalles t√©cnicos.  Esboza en general QU√â le permite hacer la tecnolog√≠a SGX, pero no se sabe c√≥mo se hace.  Describiremos esto en detalle a continuaci√≥n.  En nuestra presentaci√≥n, nos basaremos principalmente en un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">art√≠culo</a> detallado publicado por la Asociaci√≥n Internacional para la Investigaci√≥n de Criptolog√≠a (IACR, Asociaci√≥n Internacional para la Investigaci√≥n Criptol√≥gica). </p><br><p>  SGX crea en la memoria una regi√≥n protegida: <strong>PRM (memoria reservada del procesador)</strong> , que tambi√©n se denomina enclave.  El procesador protege el enclave de cualquier intento de acceso, incluidos los del kernel, el hipervisor y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">SMM</a> (Modo de administraci√≥n del sistema), as√≠ como de los intentos de acceso desde dispositivos perif√©ricos. </p><br><p>  PRM tiene un cach√© especial, el llamado <strong>EPC (Enclave Page Cache)</strong> , que consta de cuatro p√°ginas de kilobytes que almacenan el c√≥digo del enclave y los datos.  Cuando se llama a una funci√≥n confiable, la aplicaci√≥n "ve" solo los datos del enclave;  Cualquier acceso externo, incluso desde el sistema operativo, est√° prohibido. </p><br><p>  Con cualquier intento de acceder al enclave, se produce el llamado procedimiento de certificaci√≥n.  El enclave solicita un informe firmado por hardware, que incluye informaci√≥n sobre su valor.  Este informe se env√≠a al servidor de certificaci√≥n.  La parte p√∫blica de la clave de la aplicaci√≥n se env√≠a al enclave;  entonces se genera una clave privada, dependiendo del enclave y la plataforma.  La clave se cifra con una clave de firma y se almacena para uso futuro. </p><br><p>  Como se se√±al√≥ en las publicaciones oficiales de Intel, SGX puede proteger contra todo tipo de ataques a datos y c√≥digo: tanto desde el sistema y el software del usuario, como desde el gestor de arranque.  Pero SGX no puede proteger contra los llamados ataques de canal lateral.  SGX no puede sortear el notorio Spectre y Meltdown. </p><br><p>  Sin embargo, recientemente ha habido ataques (de hecho, incluso antes de Foreshadow, vea, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">aqu√≠</a> ) que le permiten evitar la protecci√≥n SGX.  Adem√°s, Foreshadow es el m√°s ruidoso y sensacional de ellos. </p><br><p>  La documentaci√≥n de SGX se√±al√≥ que "es imposible leer en enclaves y no se puede escribir nada en ellos, independientemente de la existencia de privilegios de cualquier nivel".  Sin embargo, en realidad, esto est√° lejos de ser el caso. </p><br><p>  En la primavera de este a√±o, apareci√≥ informaci√≥n sobre un ataque llamado SGX Spectre, con el que puede extraer datos de enclaves.  Como los investigadores de la Universidad Estatal de Ohio han demostrado (ver, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">aqu√≠</a> ), esto es posible gracias a los "agujeros" en el SDK, con los cuales los desarrolladores pueden integrar el soporte SGX en sus aplicaciones.  Entre los SDK afectados se encontraban Intel SGX SDK, Rust-SGX y Graphene-SGX.  Un an√°lisis detallado de este ataque se puede encontrar en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">este art√≠culo</a> ;  Tambi√©n se public√≥ un video en Youtube con un buen ejemplo. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/dOJgPNovFZo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  El video, por supuesto, no es convincente: el simple hecho de ingresar al enclave no significa que se puedan robar datos importantes.  Sin embargo, debe tenerse en cuenta: se viola la integridad y confidencialidad del mecanismo SGX. </p><br><p>  Prefiguraci√≥n rompe el aislamiento mediante el uso de un llamado ataque de canal lateral. </p><br><p>  Como en el famoso Specter and Meltdown, la vulnerabilidad utiliza el mecanismo de ejecuci√≥n especulativa de comandos.  Se basa en el siguiente punto: al acceder a la memoria en una direcci√≥n virtual que conduce a un fallo de p√°gina de terminal debido a la falta del indicador Presente en la tabla PTE (Entradas de tabla de p√°gina), los procesadores Intel calculan especulativamente la direcci√≥n f√≠sica y cargan los datos si Disponible en cach√© L1.  Los c√°lculos especulativos se llevan a cabo antes de verificar la disponibilidad de datos en la memoria f√≠sica y antes de verificar la disponibilidad de estos datos para la lectura.  Si no hay una bandera Presente en el PTE, la operaci√≥n se descarta;  pero los datos se "depositan" en el cach√© y se pueden extraer de √©l.  Los datos se pueden extraer a absolutamente cualquier direcci√≥n f√≠sica;  Esto abre grandes oportunidades para los atacantes y permite, por ejemplo, extraer datos en el host de la m√°quina invitada.  Ya han aparecido videos de demostraci√≥n: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/8ZF6kX6z7pM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Sin embargo, el video no parece, francamente, muy convincente y se asemeja a las numerosas demostraciones de las vulnerabilidades Spectre y Meltdown que navegaron por Internet a principios de este a√±o: parece que logramos superar la protecci√≥n, pero ¬øqu√© sigue?  Por supuesto, el bypass SGX claramente no es un buen caso de uso. </p><br><h3>  ¬øPor qu√© tener miedo? </h3><br><p>  A diferencia del aclamado Spectre y Meltdown, Foreshadow solo amenaza a los procesadores Intel.  En las descripciones, se observa que con la ayuda de este ataque es posible extraer no solo datos confidenciales del enclave, sino tambi√©n una clave de certificaci√≥n privada, que socava la confianza en todo el ecosistema SGX. </p><br><p>  Varias variaciones de Foreshadow amenazan el llamado Modo de administraci√≥n del sistema (SMM), el n√∫cleo del sistema operativo del hipervisor.  Algunos expertos se√±alan que con Foreshadow puede robar datos de m√°quinas virtuales en una nube de terceros.  Hay publicaciones en las que se observa que el nuevo ataque incluso le permite omitir los parches calculados anteriormente para proteger contra los ataques de Spectre y Meltdown. </p><br><p>  Sin embargo, al igual que con Spectre y Meltdown, todas las declaraciones de alto perfil deben tratarse con extrema precauci√≥n.  A√∫n no se han registrado casos de robo de datos significativos y confidenciales mediante ataques sensacionales.  Los prototipos publicados de exploits (como advierten sus propios autores) no son m√°s que muestras experimentales, extra√≠das de la pr√°ctica real, y no siempre funcionar√°n para todos, especialmente cuando se trata de m√°quinas virtuales.  Por lo tanto, es demasiado pronto para entrar en p√°nico: no solo para penetrar en el enclave, sino para extraer informaci√≥n realmente importante de √©l, debes intentarlo realmente. </p><br><p>  <strong>Hasta la fecha, no ha habido ataques verdaderamente serios.</strong> </p><br><h2>  Parches y rendimiento </h2><br><p>  El tema de los parches que protegen contra vulnerabilidades de hardware (y si no protegen, nivelan sus consecuencias) tambi√©n es muy relevante.  Recordemos la historia reciente con Specter and Meltdown: se tomaron muchas medidas en orden de incendio, lo que no tuvo las mejores consecuencias: reinicios repentinos del sistema, una fuerte ca√≠da en el rendimiento, etc.  Microsoft incluso tuvo que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">lanzar actualizaciones</a> que deshabilitan los parches de Intel.  En los primeros tres meses de este a√±o, solo se presentaron <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">32 demandas</a> contra Intel. </p><br><p>  Las grandes empresas respondieron r√°pidamente a la publicaci√≥n de informaci√≥n sobre la vulnerabilidad de Foreshadow: <strong>Intel</strong> , <strong>Red Hat</strong> , <strong>SUSE</strong> , <strong>VMware</strong> , <strong>Oracle</strong> hicieron declaraciones relevantes.  No menos r√°pido se lanzaron actualizaciones para los productos de Cisco y para el kernel de Linux. </p><br><p>  No sin incidentes: Intel lanz√≥ r√°pidamente actualizaciones de microc√≥digo, pero sin incidentes extra√±os: de repente se anunci√≥ una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">prohibici√≥n</a> de la publicaci√≥n de los resultados de las pruebas de rendimiento antes y despu√©s de la actualizaci√≥n (sin embargo, la prohibici√≥n se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">levant√≥</a> ).  Lo que fue dif√≠cil de decir.  Y el tema del efecto de los parches en el rendimiento, sin duda, merece un estudio separado y un art√≠culo separado.  Y es posible que publiquemos dicho art√≠culo en un futuro pr√≥ximo. </p><br><h2>  Conclusi√≥n </h2><br><p>  En este art√≠culo, proporcionamos una breve descripci√≥n de las vulnerabilidades de la clase Foreshadow.  Naturalmente, es imposible hablar sobre todos los aspectos de las vulnerabilidades del grupo Foreshadow dentro de un art√≠culo.  Por lo tanto, ofrecemos una selecci√≥n de enlaces √∫tiles para aquellos que deseen obtener m√°s informaci√≥n: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">explicaci√≥n del dispositivo de aplicaci√≥n usando SGX</a> (ver tambi√©n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">traducci√≥n al ruso</a> ); <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">an√°lisis de las caracter√≠sticas del mecanismo SGX</a> (incluidos sus puntos d√©biles); <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">un sitio especial dedicado a las vulnerabilidades del grupo Foreshadow</a> ; <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow noopener noreferrer">Una visi√≥n general de las t√©cnicas de ataque SGX</a> . <br></li></ul><br><p>  Si tiene experiencia en el an√°lisis de vulnerabilidades de hardware y sus consecuencias, bienvenido a comentar. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es422137/">https://habr.com/ru/post/es422137/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es422125/index.html">Diagn√≥stico SENS. Biomarcadores agregados de prote√≠nas</a></li>
<li><a href="../es422127/index.html">Al diablo con la raz√≥n. A veces</a></li>
<li><a href="../es422129/index.html">Entrevistas con los ganadores de la 59¬™ Olimpiada Internacional de Matem√°ticas</a></li>
<li><a href="../es422131/index.html">RICE e ICE Scoring: t√©cnicas simples de priorizaci√≥n para gerentes de productos avanzados</a></li>
<li><a href="../es422133/index.html">Torre autom√°tica de comando y control instalada en el norte de Colorado</a></li>
<li><a href="../es422139/index.html">Versi√≥n m√≥vil de Habr. Versi√≥n 3.0</a></li>
<li><a href="../es422141/index.html">Despliegue remoto y depuraci√≥n de aplicaciones centrales de dotnet en * nix</a></li>
<li><a href="../es422143/index.html">La receta para una revisi√≥n √∫til del c√≥digo del desarrollador de Yandex</a></li>
<li><a href="../es422147/index.html">Eleve su nodo Speedtest</a></li>
<li><a href="../es422149/index.html">C√≥mo es ser un auxiliar de vuelo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>