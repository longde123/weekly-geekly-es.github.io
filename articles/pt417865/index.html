<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõåüèΩ üçï üë©üèª‚Äçüé§ Acessibilidade Android - um lobo em pele de cordeiro? Palestra Yandex üõåüèæ üêä ‚ûó</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="H√° um m√™s, na pr√≥xima Droid Party, a desenvolvedora s√™nior Danila Fetisov examinou em detalhes o princ√≠pio do servi√ßo, respons√°vel pelas fun√ß√µes de ac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Acessibilidade Android - um lobo em pele de cordeiro? Palestra Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/417865/">  H√° um m√™s, na pr√≥xima <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Droid Party, a</a> desenvolvedora s√™nior Danila Fetisov examinou em detalhes o princ√≠pio do servi√ßo, respons√°vel pelas fun√ß√µes de acessibilidade do Android.  Voc√™ aprender√° como us√°-lo para melhorar a acessibilidade de seus projetos, bem como uma vulnerabilidade perigosa chamada clickjacking. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/dxbv5EoiRxc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Meu nome √© Danila Fetisov, sou do escrit√≥rio de Yandex em Moscou, mais especificamente de t√°xi, mais especificamente de tax√≠metro.  Hoje falaremos sobre o que √© a acessibilidade do Android e por que decidi chamar uma coisa t√£o sagrada para pessoas com defici√™ncia de lobo em pele de cordeiro. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/cv/vo/zp/cvvozpr20mbka0ypbsfbidevqg4.jpeg"><br><br>  Ent√£o, o esbo√ßo do relat√≥rio.  Primeiro, veremos como essa coisa pode ser usada, criada e personalizada.  Talvez eu lhe conte alguns truques da vida, nishtyaks de supermercado.  E ent√£o o mais interessante - sobre por que essa coisa √© perigosa. <br><img src="https://habrastorage.org/webt/a9/ey/rl/a9eyrlotqmcnesi28xvqz-eccf4.jpeg"><br>  Como podemos aplicar isso?  Em geral, o que √© isso para quem n√£o sabe?  Quaisquer eventos ocorrem no sistema, eles caem em nosso servi√ßo e n√≥s os processamos. <br><br>  Quando algo cai para n√≥s, podemos pegar o conte√∫do de l√° e dubl√°-lo usando o mesmo Yandex SpeechKit, Google Text-to-Speech do Google ou qualquer outra coisa que voc√™ gosta.  Mas o mais interessante, n√£o podemos apenas receber, mas tamb√©m lan√ßar um evento do sistema.  Voc√™ ainda pode dizer alguma coisa.  Ele jogou o evento, apertou o bot√£o, e est√° tudo bem, aproveite a vida. <br><br>  Se falamos sobre esses dois pontos, eles, na verdade, s√£o inadimplentes.  O Google lan√ßou esse recurso para que pessoas com defici√™ncia possam usar seu aplicativo.  Mas como todos sabem, n√≥s desenvolvedores n√£o queremos ficar entediados: sentamos, olhamos o c√≥digo e pensamos: como podemos aplic√°-lo?  E l√° vamos n√≥s. <br><br>  Automa√ß√£o, teste simulando a√ß√µes do usu√°rio, publicidade contextual.  Voc√™ entende: como obtemos conte√∫do da tela, podemos entender como frustrar esse usu√°rio. <br><br>  O que mais √© interessante?  Processando solicita√ß√µes USSD.  Infelizmente, a API normal apareceu apenas no 26¬∫ SDK, e os desenvolvedores de alguma forma precisam sobreviver.  E voc√™ imagina que eles est√£o analisando seriamente solicita√ß√µes USSD, analisando UIs usando o AccessibilityService. <br><br>  O sexto ponto √© a elipse.  Porque  Porque, ap√≥s este relat√≥rio, voc√™ entender√° como aplic√°-lo e para qu√™.  E ent√£o voc√™ literalmente abre seu fluxo de imagina√ß√£o, toma uma x√≠cara de ch√°, caf√© e dirige para codificar seus recursos interessantes. <br><br>  Por onde come√ßar?  O pr√≥ximo slide ser√° dolorosamente comum. <br><img src="https://habrastorage.org/webt/u8/jc/wx/u8jcwxc0utuf1cuifynebg6ln-i.jpeg"><br><br>  Tomamos um servi√ßo, herdamos do AccessibilityService e desfrutamos a vida. <br><br>  Em seguida, lan√ßamos esse servi√ßo no Manifest, e o que √© interessante aqui?  Essencialmente, um registro de servi√ßo regular.  Mas preste aten√ß√£o ao campo do r√≥tulo.  Agora n√£o vou contar o que √©.  Lembre-se, isso ser√° um pouco mais tarde. <br><img src="https://habrastorage.org/webt/u3/0x/_r/u30x_rwrhhj5ofyohytu0m97zua.jpeg"><br><img src="https://habrastorage.org/webt/qk/8p/yd/qk8pydxidl1roqfqjecast4wtns.jpeg"><br><br>  Mais adiante, no Manifest, temos apenas um arquivo de configura√ß√£o, nada interessante. <br><img src="https://habrastorage.org/webt/51/g8/eo/51g8eoxbsuo4pug8fio8_cltyhu.jpeg"><br><br>  E o pr√≥prio arquivo configs parece um pouco mais terr√≠vel.  Do que voc√™ precisar√°, provavelmente, 85 a 90% √© o campo de configura√ß√µes de filtro para eventos recebidos. <br><br>  Digamos que vale a pena aqui que queremos receber absolutamente todos os eventos.  Voc√™ pode colocar um filtro apenas nos cliques, na altera√ß√£o de conte√∫do ou em outra coisa. <br><br>  A seguir, um filtro para pacotes de aplicativos.  Para que √© isso?  Voc√™ mesmo entende perfeitamente que receber eventos de absolutamente todos os aplicativos no sistema seria demais para um aplicativo.  Portanto, o Google decidiu limit√°-lo de alguma forma.  Adicionado um filtro. <br><br>  Descri√ß√£o adicional.  Havia um campo de etiqueta e agora use a descri√ß√£o.  De fato, eles criam um par, que diz ao usu√°rio por que voc√™ precisa habilitar seu servi√ßo. <br><br>  E o √∫ltimo ponto: o conte√∫do √© necess√°rio ou n√£o na janela aberta atual.  Se voc√™ quiser apenas entender que ocorreu um evento, defina-o como false e n√£o atormente o usu√°rio novamente. <br><img src="https://habrastorage.org/webt/qi/xf/n8/qixfn8lb2tnrxvzvsedyjhp26v4.jpeg"><br><br>  A inclus√£o do servi√ßo.  Infelizmente, para ativar esse recurso, voc√™ ter√° que torturar o usu√°rio e for√ß√°-lo a passar por sete c√≠rculos de configura√ß√µes infernais, relativamente falando. <br><br>  Primeiro, abrimos oportunidades especiais para ele.  Cool AccessibilityService - esse √© exatamente o mesmo r√≥tulo do manifesto, que eu mencionei nos slides anteriores. <br><img src="https://habrastorage.org/webt/ys/kn/5d/yskn5d7xfrtm1xumv1s7qoiah3y.jpeg"><br><br>  Mais longe.  O usu√°rio precisa selecionar seu servi√ßo e, em seguida, ele come√ßa a ler a descri√ß√£o. Por que voc√™ deseja habilitar esse servi√ßo e obter algum controle sobre o dispositivo. <br><img src="https://habrastorage.org/webt/hl/1c/ge/hl1cge-ths25xe4nd9idmbs4vzk.jpeg"><br><br>  OK, inclui.  Mas l√° estava.  Sai algum tipo de di√°logo assustador, que diz: "Cara, se voc√™ ativ√°-lo agora, assumiremos o controle total do seu aplicativo, relativamente falando, tudo ser√° assustador".  Os usu√°rios nem sempre leem tudo isso, basta clicar em "OK" para estarmos atr√°s deles.  Ent√£o n√≥s vivemos. <br><br>  Bem, onde est√° o processamento do evento?  O pr√≥ximo slide √© um pouco mais inteligente do que o primeiro slide sobre o servi√ßo, mas mesmo assim. <br><img src="https://habrastorage.org/webt/az/l9/w2/azl9w2qudcqjphygfi-60a0dniy.jpeg"><br><br>  Aqui est√° nosso DummyAccessibilityService, e deixamos cair dois m√©todos l√°, nos quais escreveremos tudo.  De fato, interrup√ß√£o √© um m√©todo no qual voc√™ precisa limpar seus links, interromper assinaturas ou algo mais. <br><br>  O mais interessante √© a classe AccessibilityEvent, que √© nossa.  O que podemos tirar disso? <br><img src="https://habrastorage.org/webt/no/xx/vc/noxxvcfn4y0yml08swcmvl2xfa8.jpeg"><br>  Para come√ßar, podemos entender o que realmente aconteceu no seu sistema.  Tomamos EventType, e o que chegamos aqui? <br><br>  E percebemos que temos algum tipo de atividade aberta, ou Di√°logo, ou Pop-up, ou, em geral, a notifica√ß√£o caiu.  Tudo cai ali em window_state_changed. <br><br>  Compreendemos ainda que o conte√∫do de algumas visualiza√ß√µes mudou.  Eles o moveram, jogaram alguma linha na exibi√ß√£o de texto ou algo assim. <br><br>  E ent√£o descobrimos quando o usu√°rio clica ou seleciona uma visualiza√ß√£o.  Na minha opini√£o, 85 e at√© 98, provavelmente, por cento das principais tarefas do produto que voc√™ cobre com esses tipos de eventos. <br><br>  Mas se voc√™ n√£o tiver um n√∫mero suficiente deles, por favor, v√° para a documenta√ß√£o, mostrarei um link no final do relat√≥rio e, √© claro, voc√™ far√° o download do relat√≥rio, poder√° prosseguir.  √â apenas uma leitura para toda a noite, h√° uma lista enorme.  S√©rio, voc√™ n√£o vai domin√°-lo de cada vez. <br><img src="https://habrastorage.org/webt/f5/ja/fz/f5jafzlevas63xsqrin83inyxhc.jpeg"><br>  Agora temos uma pergunta: como encontrar uma vista?  N√≥s descobrimos o que aconteceu.  E agora vamos entender com qual vis√£o, com qual componente isso aconteceu. <br><br>  Participe do nosso AccessibilityEvent. <br><br>  Pegamos o Source dele e, voila, j√° temos meta-informa√ß√µes. <br><br>  Mas e se voc√™ for um desenvolvedor hardcore e n√£o tiver informa√ß√µes suficientes sobre uma visualiza√ß√£o, deseja entender o que est√° acontecendo basicamente na tela agora?  H√° uma limita√ß√£o no SDK, mas √© pequeno. <br><img src="https://habrastorage.org/webt/zk/op/5-/zkop5-6exzqeskitmmqwurgzjg0.jpeg"><br>  Tomamos nosso AccessibilityService e obtemos, de fato, uma refer√™ncia ao elemento raiz em toda a hierarquia na tela atual.  E s√≥ ent√£o temos nossa meta-informa√ß√£o em exibi√ß√£o. <br><img src="https://habrastorage.org/webt/rb/re/bb/rbrebb7swp7d2y33m_hfmukf_dc.jpeg"><br>  √â claro que isso √© legal, mas agora voc√™ deve ter uma pergunta em mente: bem, temos um link para o elemento raiz.  O que faremos a seguir? <br><br>  Se voc√™ deseja seguir o caminho seguro, ent√£o, por favor, a primeira op√ß√£o.  Fa√ßa uma visualiza√ß√£o de ID e encontre apenas um m√©todo. <br><br>  Se voc√™ acha que √© algo entediante, a ca√ßa √© algo mais divertido, ent√£o tiramos o texto da vista, o encontramos. <br><br>  Se isso n√£o for interessante o suficiente para voc√™ - bem, pessoal, tomem Crian√ßa e Recurs√£o, andem nela.  Ent√£o voc√™ entender√° exatamente o que est√° acontecendo. <br><br>  √ìtimo.  Voc√™ e eu descobrimos como encontrar uma vista.  Como agora para interagir com ela? <br><br>  Mais uma vez, pegamos nosso AccessibilityNodeInfo e agora j√° estamos lan√ßando A√ß√£o nele.  Que a√ß√£o podemos lan√ßar l√°? <br><img src="https://habrastorage.org/webt/gq/fg/wt/gqfgwtmaht-gksrhpzagim1siww.jpeg"><br>  Para come√ßar, podemos jogar Click.  Por que no final eu coloquei aqui n√£o apenas depois do Click, mas tamb√©m do Click and Select?  Sim, porque h√° v√°rias caixas de canto, quando o clique usual n√£o o salva.  Suponha que um usu√°rio selecione um texto e clique na visualiza√ß√£o para remover de maneira limpa a sele√ß√£o desse texto.  Ou, em alguns dispositivos, em princ√≠pio, a visualiza√ß√£o n√£o √© clic√°vel at√© voc√™ chamar Selecionar nela.  Em geral, muitos problemas.  E se voc√™ quiser tomar um banho de vapor - selecione, clique.  Duas a√ß√µes, e isso √© tudo, h√° felicidade. <br><br>  O que vem a seguir conosco?  E ent√£o temos a instala√ß√£o de texto.  Aqui tamb√©m tudo √© simples.  Tome Action_set_text, crie um Bundle com nossa linha e viva. <br><br>  E o terceiro ponto √© ir para a documenta√ß√£o.  Novamente, esta √© a segunda noite que voc√™ ter√°.  Um monte de a√ß√µes diretamente, na minha opini√£o, mais do que eventos. <br><br>  Viva!  A parte mais chata do relat√≥rio acabou.  Agora √© hora de todos os tipos de nishtyachkov. <br><br>  Suponha que voc√™ criou um servi√ßo, o configurou e lan√ßou algum tipo de processamento de eventos.  Agora voc√™ precisa entender como for√ßar o usu√°rio, como pedir para ele ainda habilitar este servi√ßo.  Para entender isso, voc√™ precisa descobrir, em princ√≠pio, o servi√ßo agora est√° ativado ou n√£o. <br><img src="https://habrastorage.org/webt/bt/ns/dk/btnsdk2nbs59tbxcdsxh1tpdeh8.jpeg"><br><br>  Tudo √© simples ao ponto da banalidade.  Tomamos o AccessibilityManager e solicitamos todos os servi√ßos atualmente inclu√≠dos no sistema e l√° encontramos os nossos. <br><br>  Mas tudo seria legal, √© claro, se o AccessibilityManager fosse um cara normal, e n√£o havia como voc√™ perguntar: "Cara, me d√™, por favor, todos os servi√ßos dispon√≠veis" e ele diz: "Desculpe, eu n√£o estou hoje de bom humor.  Aqui est√° uma lista vazia para voc√™.  E voc√™ est√° t√£o sentado e pensando: "Porra, n√≥s conversamos normalmente." <br><img src="https://habrastorage.org/webt/1d/fg/hb/1dfghb7xfautjz-mkrs0pdkjdd4.jpeg"><br><br>  Bem, existem bons velhos amigos - esses s√£o Settings.Secure.getInt e getString.  Primeiro, perguntamos se os servi√ßos est√£o inclusos no sistema.  Se inclu√≠do, tudo ser√° lan√ßado em uma linha, e j√° estamos procurando o nosso por meio de algum tipo de conte√∫do. <br><br>  E aqui nos reunimos com o fato de que fizemos tudo certo.  Criamos a configura√ß√£o, criamos a constru√ß√£o de qualquer evento, ativamos o servi√ßo.  Temos certeza de que ativamos o servi√ßo e os eventos n√£o chegam at√© n√≥s.  E assim, eles chegam ou n√£o chegam.  Naquele momento, pensei que na minha vida algum tipo de faixa preta havia chegado.  Bem, n√£o havia op√ß√µes. <br><br>  Eu pensei, pensei, reserched, reserched e, em seguida, bingo, percebi que essa √© a Xiaomi com o MIUI deles.  Isso √© s√≥ dor!  Isso √© serio. <br><br>  Ok, entenda qual √© o problema.  Como resolv√™-lo agora?  Infelizmente, em alguns firmware no MIUI, tudo √© feito para que, se seu aplicativo n√£o estiver na inicializa√ß√£o autom√°tica, o sistema nem iniciar√° o servi√ßo em princ√≠pio. <br><img src="https://habrastorage.org/webt/3b/_k/pm/3b_kpmlnpiqfih6eecs3v8w3x-q.jpeg"><br><br>  Mas aqui est√° uma solu√ß√£o: pedimos ao usu√°rio para adicionar seu aplicativo ao in√≠cio autom√°tico e continuamos a viver, aproveitar a vida. <br><img src="https://habrastorage.org/webt/y-/qq/zh/y-qqzhgxuwg7vj9hvrilasjw5es.jpeg"><br>  E ent√£o veio a cereja no bolo.  Por que esse servi√ßo, t√£o gentil para as pessoas com defici√™ncia, √© um lobo em pele de cordeiro? <br><br>  Parece-me que muitos de voc√™s j√° imaginaram que, se um usu√°rio ativar esse servi√ßo, poderemos facilmente roubar muitas informa√ß√µes confidenciais do dispositivo.  N√£o apenas podemos roub√°-lo, podemos deix√°-lo em algum lugar, por exemplo, desbloquear a tela se ela estiver bloqueada usando um c√≥digo PIN.  Bem, ok, desbloqueie a tela.  O que vem a seguir?  Estamos nos anunciando, ganharemos muito dinheiro, viveremos imediatamente.  E, no final, podemos basicamente imitar absolutamente qualquer a√ß√£o do usu√°rio e, digamos, colocar algum tipo de aplicativo, conceder direitos de administrador e dizer ao usu√°rio: ‚ÄúAdeus.  Diga adeus ao seu dispositivo. <br><img src="https://habrastorage.org/webt/29/pe/c0/29pec0si917-v1ig0uot2phee9s.jpeg"><br>  Tudo bem, podemos fazer tudo isso, mas agora voc√™ dir√°: ‚ÄúVoc√™, √© claro, muito bem.  Ele nos disse como podemos roubar que tipo de dados.  Mas como voc√™ faz o usu√°rio ativar o AccessibilityService e se o aplicativo √© canhoto? ‚Äù  Tudo bem, o usu√°rio, ao que me parece, apenas abre as configura√ß√µes, entende que h√° algum tipo de bobagem escrita l√°, fecha, desinstala o aplicativo e esquece.  E voc√™ sabe, voc√™ estar√° certo de que a primeira maneira de ativar as configura√ß√µes do sistema √© "n√£o", porque, voc√™ sabe, isso √© algum tipo de absurdo.  E aqui vem uma vulnerabilidade em nosso aux√≠lio, que, em ess√™ncia, √© chamada de clickjacking.  Quantos de voc√™s est√£o familiarizados com o clickjacking?  √ìtimo, ser√° interessante. <br><br>  Portanto, com base nessa vulnerabilidade, alguns caras - coloquei uma pequena refer√™ncia, porque todas as capturas de tela a seguir ser√£o dos recursos desses caras - criaram um ataque chamado Cloak and Dagger.  De fato, com apenas duas permiss√µes e intera√ß√£o m√≠nima do usu√°rio, voc√™ obt√©m acesso a todo o aplicativo diretamente da palavra "completamente". <br>  Mas ok, o que precisamos fazer para hackear o usu√°rio? <br><br>  Estamos lan√ßando nosso aplicativo no Google Play.  Esperamos que o usu√°rio da vers√£o Android seja menor que 8. <br><br>  Voc√™ entende, um pouco - 95% no momento.  E √© tudo, o usu√°rio baixa nosso aplicativo. <br><img src="https://habrastorage.org/webt/9v/dn/he/9vdnhevjsiqymsps9saljmvqbxo.jpeg"><br><br>  Em suma, esse malware diz ao usu√°rio como se tornar um cara legal, mostra um v√≠deo no final.  Agora voc√™ ver√° tudo por si mesmo. <br><img src="https://habrastorage.org/webt/gd/7z/mr/gd7zmrvvkntjwcemk7yutwncngi.jpeg"><br><br>  Ok, vamos come√ßar.  Um pequeno texto.  √â-nos dito: "Se voc√™ iniciar o tutorial agora, se tornar√° um cara legal".  Ok, claro, estamos come√ßando. <br><img src="https://habrastorage.org/webt/pl/sv/hm/plsvhmpjsbzpt3bgzrue8sxz9uw.jpeg"><br><br>  Algum outro texto.  Al√©m disso, as pessoas ser√£o apresentadas na forma de homens verdes.  Bem, ok, vamos clicar em Avan√ßar. <br><img src="https://habrastorage.org/webt/lb/ma/eu/lbmaeuozr-ryujmjavqj0qkxile.jpeg"><br><br>  Outro texto.  Bem, tudo bem.  Agora vou terminar de ler e definitivamente verei um v√≠deo no qual eles me dir√£o como me tornar um cara legal. <br><img src="https://habrastorage.org/webt/cm/ip/6_/cmip6_hmlgvpcgaye7vxyx61jbs.jpeg"><br><img src="https://habrastorage.org/webt/oj/9h/ad/oj9hadtoyv97xptkrep1llofyok.jpeg"><br><br>  Clico em "OK" e o v√≠deo come√ßa.  Isso n√£o √© t√£o importante para n√≥s.  √â importante o que realmente aconteceu no dispositivo naquele momento.  O usu√°rio inicia o aplicativo e, como o instalamos no Google Play, recebemos automaticamente permiss√£o para sobrepor.  Voila, abrimos a janela de acessibilidade e, em cima, apenas sobrepomos.  O usu√°rio clica no Tutorial Iniciar, mas na verdade seleciona o nosso AccessibilityService.  Bem, voc√™ entende o que vem a seguir. <br><img src="https://habrastorage.org/webt/wn/mz/ao/wnmzaoxeynacfz_ndt0yqwxqipq.jpeg"><br><br>  Em seguida, clique em Avan√ßar, selecione a op√ß√£o de altern√¢ncia. <br><img src="https://habrastorage.org/webt/bl/-h/ei/bl-hei-modlm3kl0v_jdimivloo.jpeg"><br><br>  No final, ativamos o AccessibilityService e o usu√°rio nem percebe que isso aconteceu. <br><br>  Voc√™ sabe qual √© o problema?  A sobreposi√ß√£o √© organizada de tal maneira que eles absorvem completamente todos os eventos, todos os toques j√° est√£o distantes ou perdem completamente.  E o objetivo desse ataque em particular √© preencher a sobreposi√ß√£o, a tela inteira, exceto um espa√ßo.  Nesse caso, este √© o bot√£o OK.  Este bot√£o √© realmente do di√°logo.  Quando clicamos nele, obtemos um evento que diz que o toque externo aconteceu e est√° tudo bem. <br><br>  Como o Google responde a todos esses problemas?  Voc√™ entende, essa √© uma vulnerabilidade bastante brutal. <br><img src="https://habrastorage.org/webt/mn/mz/hx/mnmzhxn22qbitijiqknvxdeycxm.jpeg"><br>  Tudo come√ßou de maneira interessante - tudo com oito anos de sil√™ncio.  O Google revelou essa coisinha, disse: ‚ÄúGente, use-a.  Est√° seguro.  Eu digo com certeza.  Bem, tudo bem.  Google jogou.  Os mesmos caras que Cloak e Dagger inventaram, deram apoio, emitiram rastreadores e rastreadores de bugs. <br><br>  Ent√£o o Google disse: ‚ÄúOk, pessoal, acalme-se.  Fecharei o clickjacking no Oreo. "  Bem, desligue.  Eles ainda est√£o l√°, pensam: ‚ÄúBem, droga, pessoal, mesmo assim, se os atacantes for√ßarem o usu√°rio a permitir acessibilidade, ser√° ruim.  Vamos zombar dos desenvolvedores um pouco. <br><br>  E eles enviam uma carta: "Fa√ßa, n√£o sei o qu√™, caso contr√°rio, seu aplicativo ser√° exclu√≠do do Google Play".  Em resumo, a carta era a seguinte: "Pessoal, conte-nos e usu√°rios por que voc√™ precisa do AccessibiiltyService".  Como saber?  Em que formato?  Onde  Geralmente sem entendimento.  E na carta, √© claro, isso n√£o √© indicado. <br><br>  Bem, tudo bem.  T√≥picos enormes no reddit, um monte de cartas para apoiar.  E ent√£o algum desenvolvedor coloca uma carta no reddit e diz: ‚ÄúSim, pessoal, nada complicado.  Coloque na descri√ß√£o que eu mostrei, no manifesto, coloque na descri√ß√£o no Google Play, e tudo ficar√° bem, eu vou deixar voc√™ em paz. " <br><br>  Naquele momento, pensei: bem, tudo bem, encontrei esta carta √† margem do Reddit.  Mas e se eu sou um desenvolvedor jovem, acabei de conhecer o AccessibilityService e quero liberar o aplicativo com isso?  Como devo descobrir que preciso executar essas a√ß√µes? Preciso inclu√≠-lo na descri√ß√£o no Google Play etc.?  Eu pensei, pensei, procurei, procurei e, sabe, pessoal, n√£o encontrei nada, a partir da palavra. <br><br>  Bem, s√©rio, n√£o h√° nada.  H√° apenas uma descri√ß√£o na documenta√ß√£o principal: "Pessoal, isso √© apenas para pessoas com defici√™ncia, esse √© o ponto.  Voc√™ n√£o pode mais us√°-lo. "  Mas, de fato, √© poss√≠vel. <br><img src="https://habrastorage.org/webt/5b/lw/_3/5blw_3tvoiwpbotsie5ilkmemve.jpeg"><br>  Bem, voc√™ e eu chegamos ao fim.  O que poder√≠amos falar com voc√™?  Falamos sobre como us√°-lo, entendemos como criar tudo, configur√°-lo e como lidar com eventos da interface do usu√°rio.  E, √© claro, entendemos como isso √© poss√≠vel, mas voc√™ n√£o precisa interagir com o AccessibilityService.  Claro, eu n√£o recomendo que voc√™ fa√ßa isso, foi apenas para obter informa√ß√µes.  Aqui est√£o as fontes prometidas: <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">developer.android.com/guide/topics/ui/accessibility/services</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">developer.android.com/reference/android/view/accessibility/AccessibilityEvent</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">developer.android.com/reference/android/view/accessibility/AccessibilityNodeInfo</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cloak-and-dagger.org</a> <br><br>  Gente, muito obrigado pela aten√ß√£o! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt417865/">https://habr.com/ru/post/pt417865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt417855/index.html">"Moon Palace" chin√™s estabeleceu um novo recorde</a></li>
<li><a href="../pt417857/index.html">Spoofer de GPS de US $ 225 capaz de redirecionar robomobiles para o tr√°fego que se aproxima</a></li>
<li><a href="../pt417859/index.html">Integra√ß√£o 3CX com Microsoft Dynamics 365</a></li>
<li><a href="../pt417861/index.html">Padr√£o prim√°rio sem fim</a></li>
<li><a href="../pt417863/index.html">Crian√ßas a pedir em breve? Conselho de √âtica do Reino Unido autoriza engenharia gen√©tica de embri√µes humanos</a></li>
<li><a href="../pt417867/index.html">Como avaliar a dura√ß√£o de um projeto de TI e quando n√£o vale a pena fazer nada</a></li>
<li><a href="../pt417869/index.html">Como depurar o WebRTC</a></li>
<li><a href="../pt417871/index.html">Na linha de chegada do turismo suborbital</a></li>
<li><a href="../pt417873/index.html">Maneiras de criar janelas pop-up</a></li>
<li><a href="../pt417875/index.html">Saindo do SPA da toca do coelho com trilhos modernos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>