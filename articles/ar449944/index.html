<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤠 🍼 🚂 عامل الميناء: نصائح سيئة 🤚🏼 🎦 🌔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="عندما علمت قيادة سيارة ، عاد المعلم في الدرس الأول إلى التقاطع ، ثم قال إنه يجب عليك ألا تفعل ذلك - على الإطلاق. هذه القاعدة تذكرت على الفور وللحياة. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>عامل الميناء: نصائح سيئة</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/449944/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/1t/az/zv/1tazzvia6gdlkzudhbqigjxjceg.jpeg"></p><br><p style=";text-align:right;direction:rtl">  عندما علمت قيادة سيارة ، عاد المعلم في الدرس الأول إلى التقاطع ، ثم قال إنه يجب عليك ألا تفعل ذلك - على الإطلاق.  هذه القاعدة تذكرت على الفور وللحياة. </p><br><p style=";text-align:right;direction:rtl">  تقرأ "النصيحة السيئة" للأطفال من قِبل غريغوري أوستر ، وترى كم هو سهل وطبيعي أنه لا يمكن القيام بذلك. </p><br><p style=";text-align:right;direction:rtl">  تمت كتابة الكثير من المقالات حول كيفية كتابة Dockerfile بشكل صحيح.  لكنني لم صادف تعليمات حول كيفية كتابة Dockerfile خاطئ.  أنا ملء هذه الفجوة.  وربما في المشاريع التي أحصل عليها للحصول على الدعم ، سيكون هناك عدد أقل من عمال الرصيف. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  جميع الأبطال ، والمواقف ، dockerfile هي خيالية.  إذا كنت تتعرف على نفسك ، آسف. </p><br><h2 id="sozdaem-dockerfile-zloveschiy-i-uzhasnyy" style=";text-align:right;direction:rtl">  إنشاء Dockerfile ، المشؤومة والرهيبة </h2><br><p style=";text-align:right;direction:rtl">  بيتر (كبير مطوري جافا / روبي / php): الزميل فاسيلي ، هل قمت بالفعل بتحميل وحدة نمطية جديدة إلى Docker؟ <br>  باسل (المبتدئين): لا ، لم أفعل ، لا يمكنني معرفة ذلك مع عامل الميناء هذا.  الكثير من المقالات حول ذلك ، عيني عريضة. </p><br><p style=";text-align:right;direction:rtl">  بيتر: حصلنا على موعد نهائي قبل عام.  دعنا نساعد ، سنكتشفها في هذه العملية.  قل لي ما لا يمكنك القيام به هناك. </p><br><p style=";text-align:right;direction:rtl">  باسل: لا يمكنني اختيار الصورة الأساسية بحيث تكون ضئيلة ، ولكن كان هناك كل ما هو مطلوب. <br>  بيتر: خذ صورة أوبونتو ، لديه كل ما تحتاجه.  وما الكثير من الفائض ، ثم سوف يأتي في متناول اليدين.  ولا تنسَ أن تضع أحدث علامة حتى يكون الإصدار دائمًا هو الأحدث. </p><br><p style=";text-align:right;direction:rtl">  وفي Dockerfile ، يظهر السطر الأول: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">FROM ubuntu:latest</code> </pre> <br><p style=";text-align:right;direction:rtl">  بيتر: ما هو التالي ، ماذا نكتب على وحدة لدينا؟ <br>  باسل: لذا روبي ، يجب أن يبدأ خادم ويب واثنين من شياطين الخدمة. <br>  بيتر: نعم ، ما الذي نحتاجه: الياقوت ، المجمد ، العقيدات ، imagemagick فماذا ... وفي الوقت نفسه ، قم بالترقية للحصول على حزم جديدة بالتأكيد. <br>  باسل: ونحن لن نخلق المستخدم ، حتى لا من الجذر؟ <br>  بيتر: حسنًا ، لا يزال يخدع بالحق. <br>  فاسيلي: أحتاج إلى وقت ، حوالي 15 دقيقة ، لجعل كل شيء في فريق واحد ، قرأت ذلك ... <br>  (بيتر بوقاحة يقاطع يونيو دقيق وذكي للغاية.) <br>  بيتر: اكتب في فرق منفصلة ، وسيكون من الأسهل قراءتها. </p><br><p style=";text-align:right;direction:rtl">  Dockerfile ينمو: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM ubuntu:latest RUN apt-get update RUN apt-get upgrade RUN apt-get -y install libpq-dev imagemagick gsfonts ruby-full RUN gem install bundler RUN curl -sL https://deb.nodesource.com/setup_9.x | sudo bash - RUN apt-get install -y nodejs RUN bundle install --without development test --path vendor/bundle RUN rm -rf /usr/local/bundle/cache/*.gem RUN apt-get clean RUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*</code> </pre> <br><p style=";text-align:right;direction:rtl">  ثم اقتحم إيغور إيفانوفيتش المكتب ، ديف أوبس (ولكن عدد العمليات أكبر من ديف) ، وصرخ: </p><br><p style=";text-align:right;direction:rtl">  AI: Petya ، قام المطورون مرة أخرى بتحطيم قاعدة بيانات prod ، متى ينتهي الأمر .... </p><br><p style=";text-align:right;direction:rtl">  بعد قليل من المناوشات ، يهدأ إيجور إيفانوفيتش ويبدأ في معرفة ما يفعله زملاؤه هنا. </p><br><p style=";text-align:right;direction:rtl">  AI: ماذا تفعل؟ <br>  باسل: بيتر يساعدني في تجميع Dockerfile لوحدة نمطية جديدة. <br>  ثانياً: دعنا نلقي نظرة ... ماذا تكتب هنا ، يمكنك تنظيف المستودع بأمر منفصل ، هذه طبقة إضافية ... لكن كيف تضع التبعيات إذا لم تقم بنسخ Gemfile!  وعلى أي حال ، هذا ليس جيدا. <br>  بيتر: يرجى الاطلاع على عملك ، وسنعرف ذلك بطريقة أو بأخرى. </p><br><p style=";text-align:right;direction:rtl">  يتنهد إيجور إيفانوفيتش بحزن ويترك من الذي كسر قاعدة البيانات. </p><br><p style=";text-align:right;direction:rtl">  بيتر: نعم ، لكن بخصوص الكود ، قال الشيء الصحيح ، تحتاج إلى إدخاله في الصورة.  ودعنا نضع ssh والمشرف على الفور ، وإلا سنبدأ تشغيل الشياطين. </p><br><p style=";text-align:right;direction:rtl">  فاسيلي: بعد ذلك ، قمت أولاً بنسخ Gemfile و Gemfile.lock ، ثم وضعت كل شيء فيه ، ثم قمت بنسخ المشروع بأكمله.  إذا لم يتغير Gemfile ، فسيتم أخذ الطبقة من ذاكرة التخزين المؤقت. <br>  بيتر: ما أنت جميعًا مع هذه الطبقات ، انسخ كل شيء مرة واحدة.  نسخ على الفور.  السطر الأول. </p><br><p style=";text-align:right;direction:rtl">  Dockerfile الآن يبدو مثل هذا: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM ubuntu:latest COPY ./ /app WORKDIR /app RUN apt-get update RUN apt-get upgrade RUN apt-get -y install libpq-dev imagemagick gsfonts ruby-full ssh supervisor RUN gem install bundler RUN curl -sL https://deb.nodesource.com/setup_9.x | sudo bash - RUN apt-get install -y nodejs RUN bundle install --without development test --path vendor/bundle RUN rm -rf /usr/local/bundle/cache/*.gem RUN apt-get clean RUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*</code> </pre> <br><p style=";text-align:right;direction:rtl">  بيتر: إذن ما التالي.  هل لديك التكوينات للمشرف؟ <br>  باسل: ناه ، لا.  لكنني سأفعل ذلك بسرعة. <br>  بيتر: ثم افعلها.  دعنا الآن نرسم النص الأولي الذي سيشغل كل شيء.  لذلك ، مع بدء تشغيل ssh مع nohup حتى نتمكن من الاتصال الحاوية ونرى ما حدث من خطأ.  ثم أيضا إطلاق المشرف.  حسنا ، ثم مجرد تشغيل الركاب. <br>  س: لكنني قرأت أنه يجب أن تكون هناك عملية واحدة ، لذلك سيعرف Docker أن هناك خطأ ما ويمكن إعادة تشغيل الحاوية. <br>  P: لا تهتم برأسك.  وبشكل عام ، كيف؟  كيف يمكنك تشغيل كل شيء في عملية واحدة؟  دع إيغور إيفانوفيتش يفكر في الاستقرار ، وليس مقابل لا شيء يحصل على راتب.  عملنا هو كتابة الرمز.  وعلى أي حال ، دعه يقول شكرا لك على كتابة Dockefile له. </p><br><p style=";text-align:right;direction:rtl">  بعد 10 دقائق واثنين من أشرطة الفيديو حول القطط. </p><br><p style=";text-align:right;direction:rtl">  س: فعلت كل شيء.  أضفت أيضا التعليقات. <br>  P: عرض! </p><br><p style=";text-align:right;direction:rtl">  نسخة جديدة من Dockerfile: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">FROM ubuntu:latest #    COPY ./ /app WORKDIR /app #    RUN apt-get update #   RUN apt-get upgrade #    RUN apt-get -y install libpq-dev imagemagick gsfonts ruby-full ssh supervisor #  bundler RUN gem install bundler #  nodejs     RUN curl -sL https://deb.nodesource.com/setup_9.x | sudo bash - RUN apt-get install -y nodejs #   RUN bundle install --without development test --path vendor/bundle #     RUN rm -rf /usr/local/bundle/cache/*.gem RUN apt-get clean RUN rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* #  ,   ,    . CMD [“/app/init.sh”]</code> </pre> <br><p style=";text-align:right;direction:rtl">  P: عظيم ، أنا أحب ذلك.  والتعليقات باللغة الروسية مريحة وقابلة للقراءة ، فإن الجميع سيعملون على هذا النحو.  لقد علمتك كل شيء ، ثم يمكنك أن تفعل ذلك بنفسك.  دعنا نذهب شرب القهوة ... </p><br><p style=";text-align:right;direction:rtl">  حسنًا ، لدينا هنا Dockerfile الرهيبة للغاية ، من منظورها الذي يريد إيغور إيفانوفيتش الإقلاع عنه وستؤلم عينيه لمدة أسبوع آخر.  Dockerfile ، بالطبع ، يمكن أن يكون أسوأ ، لا يوجد حد الكمال.  ولكن بالنسبة للمبتدئين ، وسوف تفعل. </p><br><p style=";text-align:right;direction:rtl">  أود أن أنهي باقتباس من غريغوري أوستر: </p><br><p style=";text-align:right;direction:rtl">  <em>إذا لم تكن حازما بعد</em> <em><br></em>  <em>لقد اختاروا الطريق في الحياة ،</em> <em><br></em>  <em>وأنت لا تعرف السبب</em> <em><br></em>  <em>اعمل طريقك لتبدأ ،</em> <em><br></em>  <em>تغلب على الأضواء في الشرفات -</em> <em><br></em>  <em>سيقول الناس شكرا لك.</em> <em><br></em>  <em>سوف تساعد الناس</em> <em><br></em>  <em>حماية الكهرباء.</em> </p><br><p style=";text-align:right;direction:rtl">  <strong>محدث</strong> : في التعليقات يسألون ما هو الخطأ في هذه Dockerfiles.  في اليوم الآخر سأكتب مقالة منفصلة مع تحليل الأخطاء. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar449944/">https://habr.com/ru/post/ar449944/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar449932/index.html">البحث عن المهام في JIRA (لغة بسيطة). الجزء 2: البحث المتقدم</a></li>
<li><a href="../ar449934/index.html">الطباعة ثلاثية الأبعاد بالمعادن: 5 فوائد واضحة من مثال عملي</a></li>
<li><a href="../ar449936/index.html">لماذا يصعب العمل في فريق متعدد الجنسيات؟</a></li>
<li><a href="../ar449938/index.html">المطورين مقابل الأعمال</a></li>
<li><a href="../ar449940/index.html">كيفية ضغط 16 جيجابايت من الذاكرة على اللوحة الأم التي لا تدعم هذا المبلغ</a></li>
<li><a href="../ar449946/index.html">1C حكايات المطور: admin</a></li>
<li><a href="../ar449948/index.html">جافا سكريبت: 7 أشياء صغيرة مفيدة</a></li>
<li><a href="../ar449952/index.html">تكوين التسليم المستمر على gitlab.com</a></li>
<li><a href="../ar449954/index.html">تثبيت Zimbra Open-Source Edition على CentOS 7</a></li>
<li><a href="../ar449956/index.html">الذكاء الاصطناعى @ MIPT: بيانات كبيرة للنماذج الرياضية للجينوم البشري</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>