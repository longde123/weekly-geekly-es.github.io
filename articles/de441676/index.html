<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👆🏾 👩🏾‍🚀 👨🏼‍🍳 Wie man Freunde PLUTO und HDSDR macht 🗡️ 👨🏼‍🤝‍👨🏻 🙇🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor nicht allzu langer Zeit kaufte ADALM PLUTO impulsiv einen niedlichen SDR-Transceiver für Kinder und Jugendliche. Zu meinem Bedauern funktioniert e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie man Freunde PLUTO und HDSDR macht</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441676/"><img src="https://habrastorage.org/webt/dx/vl/5c/dxvl5cuxvc4qn7duv1lossoiz2c.jpeg"><br><br><p>  Vor nicht allzu langer Zeit kaufte ADALM PLUTO impulsiv einen niedlichen SDR-Transceiver für Kinder und Jugendliche.  Zu meinem Bedauern funktioniert es mit einer Reihe von Software für LINUX, aber mein Lieblings- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HDSDR</a> unterstützt es nicht.  Ohne nachzudenken, begann ich mich mit diesem Problem zu befassen und hier ist, was daraus wurde: <br><a name="habracut"></a><br></p><p>  Analog Devices richtet sein PLUTO an Studenten.  Die gesamte Software für PLUTO ist offen und frei verfügbar.  Auf der Website des Unternehmens finden Sie eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Seite,</a> auf der Sie fast alle erforderlichen Informationen zum Betrieb von PLUTO finden.  Der größte Teil der Software ist unter Linux geschrieben. Den Schülern wird empfohlen, GNU Radio, MATLAB usw. zu verwenden. <br><br></p><p>  Ich habe ein reines Amateurfunkinteresse an PLUTO.  Ein SDR mit einem Bereich von 70 MHz bis 6 GHz (nach <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Offenlegung</a> ) für nur 150 amerikanische Gelder ist ein Wunder.  Wie viele Experimente können durchgeführt werden!  Sehen Sie, wie viel alles dort integriert ist: <br><br></p><p><img src="https://habrastorage.org/webt/ao/wg/mn/aowgmnuvpv1nj7kzloexjef5-fy.jpeg"><br><br></p><p>  Anscheinend glaubt AD, dass Schinken selbst Treiber für beliebte Programme schreiben sollten, so dass bis vor kurzem sogar SDR # nicht unterstützt wurde.  SDR # passt jedoch nicht zu mir, da ich eine gute CAT-Unterstützung in einem Programm benötige, um die Frequenz mit einem Transceiver zu synchronisieren.  Ich möchte versuchen, HDSDR als Panoramaempfänger zu verwenden, indem ich es an die erste Zwischenfrequenz des Transceivers anschließe.  Es gibt also nur einen Ausweg - HDSDR und PLUTO selbst zu integrieren. <br><br></p><p>  Mit Google habe ich schnell herausgefunden, dass ich zur Lösung meines Problems eine spezielle ExtIO_.dll-Bibliothek im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Winrad-</a> Format erstellen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">muss</a> .  Diese Bibliothek dient als Softwarebrücke zwischen dem HDSDR und dem gewünschten SDR-Empfänger.  Glücklicherweise ist die Bibliotheksoberfläche gut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dokumentiert</a> .  Darüber hinaus gibt es auf github einige vorgefertigte Bibliotheksimplementierungen für verschiedene Empfänger: RTL_SDR, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LimeSDR</a> usw. Es gab einen Ort, an dem man sehen konnte, wie man Code schreibt.  Die Bibliothek selbst ist ziemlich altmodisch, keine neuen Technologien, reines C89, wie sie vor 20 Jahren geschrieben haben.  Zumindest müssen Sie keine neue Programmiersprache lernen, was bereits Hoffnung auf Erfolg weckte. <br><br></p><p>  Tatsächlich muss ExtIO_.dll mit Dutzenden von Funktionen implementiert werden, mit denen Sie SDR-Geräte initialisieren, den Signalempfang starten und stoppen sowie die Einstellungen speichern und wiederherstellen können.  Für mich war der unverständlichste Moment das Format des Datenaustauschs zwischen dem Empfänger und HDSDR, aber mehr dazu weiter unten. <br><br></p><p>  Nun stellt sich die Frage, wie PLUTO programmgesteuert gesteuert werden kann.  Es gibt tatsächlich mehrere Steuerungsoptionen.  Ich habe mindestens zwei gefunden: entweder direkt mit dem Chip über die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">libad9361.dll-</a> Bibliothek oder über die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">IIO-</a> Bibliothek.  Die letztere Option schien mir einfacher und besser beschrieben zu sein, also entschied ich mich dafür.  In dieser Bibliothek sind alle Geräteeinstellungen in Form einer XML-Struktur verfügbar. Auf ein einzelnes Element wird über den Textnamen der Eigenschaft zugegriffen, was sehr praktisch ist.  Eine detailliertere Beschreibung der Bibliothek finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> .  Der große Vorteil der Bibliothek besteht darin, dass sie über Befehlszeilenprogramme verfügt, mit denen Sie die gewünschten Empfängereinstellungen jederzeit schnell ändern können.  Sie müssen also nicht alle SDR-Einstellungen in der HDSDR-Schnittstelle implementieren, sondern können mit dem erforderlichen Minimum auskommen.  Das Laden eines exotischen FIR-Filters kann über die Befehlszeile erfolgen, falls dies jemals erforderlich sein sollte.  Datenströme in IIO: <br><br></p><p><img src="https://habrastorage.org/webt/ce/dz/bh/cedzbhmsy9z56vdehgcoaas5hmk.png"><br><br></p><p>  Programmatisch war das Erlernen der Steuerung von PLUTO über HDSDR ziemlich schnell und einfach.  Es war etwas schwieriger, beim Streaming von Daten ein zufriedenstellendes Ergebnis zu erzielen, zumal ich noch keine Erfahrung mit SDR hatte.  Hier müssen Sie verstehen, dass die Daten vom SDR-Empfänger in Form eines Stroms von I / Q / I / Q ... I / Q-Abtastwerten stammen.  Jeder Abtastwert ist eine vorzeichenlose 16-Bit-Ganzzahl, von der nur 12 niederwertige Bits von Bedeutung sind.  Gleichzeitig bietet HDSDR ein Dutzend Optionen zum Empfangen von Datenströmen.  Welches bequemer und besser ist, ist mir nicht ganz klar.  Infolgedessen habe ich mich für die Option entschieden, die in ExtIO als exthwUSBdata16 bezeichnet wird, d. H.  eigentlich eins zu eins, wie die IIO-Bibliothek Daten liefert. <br>  Das nächste Problem war die Übertragung von Daten zwischen den IIO-Empfangspuffern und HDSDR.  Letzterer empfängt Daten in Blöcken, die ein Vielfaches von 512 Bytes sind, und IIO kann keine Daten in diesem Format ausgeben.  Ich musste einen Zwischenpuffer erstellen und den Stream durch ihn übertragen.  Der Übertragungscode wird unten angezeigt. <br><br></p><p></p><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">DWORD WINAPI </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GeneratorThreadProc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( __in LPVOID lpParameter )</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int16_t</span></span> iqbuf[EXT_BLOCKLEN * <span class="hljs-number"><span class="hljs-number">2</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">ssize_t</span></span> nbytes_rx; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *p_dat, *p_end; <span class="hljs-keyword"><span class="hljs-keyword">ptrdiff_t</span></span> p_inc; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> iqcnt = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// pointer to sample in iqbuf while ( !gbExitThread ) { nbytes_rx = iio_buffer_refill(rxbuf); p_inc = iio_buffer_step(rxbuf); p_end = (char *)iio_buffer_end(rxbuf); for (p_dat = (char *)iio_buffer_first(rxbuf, rx0_i); p_dat &lt; p_end; p_dat += p_inc) { iqbuf[iqcnt++] = ((int16_t*)p_dat)[0]; iqbuf[iqcnt++] = ((int16_t*)p_dat)[1]; if (iqcnt == EXT_BLOCKLEN * 2) { // buffer full iqcnt = 0; pfnCallback(EXT_BLOCKLEN, 0, 0.0F, &amp;iqbuf[0]); } } } gbExitThread = false; gbThreadRunning = false; return 0; }</span></span></code> </pre> <br><p>  Unter Verwendung des angegebenen Zyklus war es möglich, eine Stromübertragung von 4 MS / s zu erreichen. Oberhalb dieses Wertes haben die Daten keine Zeit zum Senden und das Signal wird mit Stottern empfangen, obwohl das Eisen in der Lage zu sein scheint, 20 MS / s und noch mehr zu senden.  Die Priorität des Threads, in dem sich die Schleife zu THREAD_PRIORITY_TIME_CRITICAL dreht, wurde erhöht, und die Größe der Puffer wurde erhöht.  Kein Ergebnis.  Wenn der Puffer auf 1 MB erhöht wurde, war außerdem ein normaler Empfang bei der minimalen Flussrate unmöglich.  Mehr heißt hier nicht besser.  Wenn Sie Ideen zur Geschwindigkeitssteigerung haben, teilen Sie diese bitte in den Kommentaren mit. <br><br></p><p>  Ich muss sagen, dass 4 MS / s für meine Zwecke völlig ausreichen, die Band deckt mehr als jede Amateur-HF-Band ab.  Ja, und auf den UKW- und Mikrowellenbändern genug für die meisten Aufgaben.  Infolgedessen wird die Bibliothek geschrieben, das HDSDR-Fenster mit eingeschaltetem PLUTO für den Empfang sieht ungefähr so ​​aus: <br><br></p><p><img src="https://habrastorage.org/webt/bz/sd/hb/bzsdhbg83dfjqv9iokbtcpwltbi.jpeg"><br><br></p><p>  Der gesamte Bibliothekscode ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> auf github verfügbar.  Fühlen Sie sich frei, es für Ihre Experimente mit ADALM PLUTO zu verwenden. <br><br></p><p>  73 de R2AJP </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de441676/">https://habr.com/ru/post/de441676/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de441654/index.html">Wie mache ich ein Praktikum bei einem großen IT-Unternehmen?</a></li>
<li><a href="../de441660/index.html">STM32F103C8T6 als Flash-Laufwerk mit FAT12-Dateisystem</a></li>
<li><a href="../de441664/index.html">Linus Torvalds glaubt nicht, dass Server in der ARM-Architektur x86 ersetzen werden. "Verkauf eines 64-Bit-Modells - Idiotie"</a></li>
<li><a href="../de441668/index.html">STM32. Gewichtsverlust Praxis oder Diät für den Controller</a></li>
<li><a href="../de441674/index.html">Testlayout? Einfach</a></li>
<li><a href="../de441678/index.html">Spieltornado-Physik: Wie Aerodynamik in Just Cause 4 (Verkehr) implementiert wird</a></li>
<li><a href="../de441680/index.html">Lua In Moskau 2019 Konferenzprogramm</a></li>
<li><a href="../de441682/index.html">HyperX Fury 3D - SSD mit klarem Stammbaum</a></li>
<li><a href="../de441684/index.html">Vorhersagen: Wolken werden sich 2019 ändern</a></li>
<li><a href="../de441686/index.html">Wie wir den Cache in der Tarantool-Datenbank implementiert haben</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>