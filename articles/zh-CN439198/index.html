<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😌 🌕 📱 屏障岛一代 🧝🏼 👨🏽‍🔧 📃</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="佛罗伦萨飓风的12月消息经常提到外部浅滩 -北卡罗莱纳州沿海的一系列隔离岛： 


 障壁岛是由波浪形成的平坦或块状的沙块，沿着与大陆海岸平行的方向冲浪。 它们通常采用长链的形式，可以延伸数十英里。 屏障岛通常被小潮汐通道隔开，并可能在这些岛与大陆之间形成泻湖。 

 根据Wikipedia的介绍 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>屏障岛一代</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439198/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">佛罗伦萨飓风</a>的12月消息经常提到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">外部浅滩</a> -北卡罗莱纳州沿海的一系列隔离岛： <br><br><div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/getpro/habr/post_images/a00/e8c/eef/a00e8ceef5bfbae53ac9a95a42a7cf5e.png"></div><br> 障壁岛是由波浪形成的平坦或块状的沙块，沿着与大陆海岸平行的方向冲浪。 它们通常采用长链的形式，可以延伸数十英里。 屏障岛通常被小潮汐通道隔开，并可能在这些岛与大陆之间形成泻湖。 <br><br> 根据<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Wikipedia的介绍</a> ，障碍岛可以覆盖多达15％的海岸，因此您可以期望在大多数幻想地图上看到它们，但实际上它们很少见。 由于噪声的性质，它们几乎永远不会发生在使用噪声创建地形的程序生成的地图上。 <br><br> 要了解为什么会这样，让我们​​看一下岛上的香草地图： <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cb8/342/f10/cb8342f1095276e3e7ced43ed57bf688.png"></div><br> 实际上，这是一个圆，由于添加了少量低频噪声而使圆分裂，从而使圆变形。 现在，让我们尝试使用噪声来破坏海岸并形成沿海岛屿。 这是一个包含低频噪声的孤岛： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e18/658/5b7/e186585b7a15a9287ad56bc13ac61f6d.png"></div><br> 它有海湾和海角。 由于我使用的低频噪声变化缓慢，因此浮雕元件相当大。 但是，噪音不足以产生孤岛。 让我们推一下： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9a/e78/c4a/f9ae78c4a84f5e99b2f58821ccade3b0.png"></div><br> 现在我们已经创建了几个岛屿，但是它们本质上是圆形的斑点，不一定沿着海岸伸展。 您可以添加高频噪声： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cab/89f/834/cab89f83445965bbad12d0f95bba1d94.png"></div><br> 这会给我们非常破碎的海岸线和沿海岸的小岛，但没有什么像隔离岛。 <br><br> 这样做的唯一原因是，噪声在x和y中不匹配，因此尽管噪声通常不是随机的，但它创建的形状是随机的： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d2e/4b4/ef6/d2e4b4ef6005d2675d2557f71eb0ce7b.png"></div><br> 在某些方面，这很好，但不适用于创建特定形式，例如，沿海岛屿。 <br><br> 与其他情况一样，当我需要生成特定形状或区域时，有必要创建所需形状的蒙版，然后使用蒙版内部的噪声。  （您也可以使用噪声使蒙版变形并赋予其更自然的形状。）实际上，隔离岛是从海岸偏移的细长区域。 因此，让我们创建这种形状的蒙版。 <br><br> 首先，我们将设置障碍岛所在的海岸部分。 可以通过选择海岸上的一个随机点和第二个下点来完成，这些点在图中用右上角的红线标记： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b45/e88/a41/b45e88a410c47b6832350b02b3215525.png"></div><br> 要开始创建屏障岛，我只需在这两点之间画一条直线，然后将其稍微向外投射到水中即可。 这会给我一个非常笔直且看起来不自然的岛，但是您可以扭曲它的形状以隐藏它。 真正的问题是该岛不会跟随海岸线。 对于大多数直接的沿海地区来说，它看起来可能是正常的，但是在蜿蜒的海岸上，它似乎很奇怪。 最好复制海岸线并将其作为岛屿形状的基础。 <br><br> 为此，我需要创建海岸线的副本，然后将其投影到垂直于海岸线的海洋中。 因为我意识到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">手写线</a> ，所以我已经有了一个计算折线的垂直线（法线）的过程，并且海岸线总是沿相同的方向移动，因此非常简单： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/9f1/b1e/0b39f1b1e868bb43d98839614109a3f5.png"></div><br> 或者<i>看起来很</i>简单。 让我们看看如果我在海岸线的较不光滑的部分上将海岸线向外侧进一步投影（以创建岛的蒙版的另一面）会发生什么情况： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3e/99f/5b8/a3e99f5b8bed9f6a0ffd74f5ae7e864a.png"></div><br> 投影线的两个线段彼此相交，并在多边形上创建了一个令人恐惧的“八”字形。 这就是所谓的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">平行曲线问题</a> 。 我们不能仅仅将海岸移开一段距离，还必须解决由于尖锐的内外角而引起的问题。 <br><br> 我一直在寻找Javascript代码来解决此问题，但即使在相当简单的示例上，（ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">从这里开始</a> ）发现的唯一示例也令人惊讶地崩溃。 所以我写了我自己的。 通常，解决方案是沿法线移动每个点，然后检查新点是否创建了一条与任何现有线相交的线。 如果是这样，则我们切断循环并插入由交点和新点组成的新线。 在我测试的测试用例中，该系统可以很好地满足我的要求。 <br><br> 现在，我可以为这些岛生成简单的蒙版了（没有循环）： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/599/060/e89/599060e8909fb0d5dda3f01b7ca82806.png"></div><br> 这太均匀了，所以我会扭曲轮廓： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b00/420/8a9/b004208a92018017e000669848f991ad.png"></div><br> 轮廓线可能在某些点接触海岸，但这是正常现象；通常在障碍岛上发现。 <br><br> 下一步是用土地填充轮廓，但是在执行此操作之前，我想使这些岛变长，并增加在同一海岸线上创建多个障碍岛的情况下避免相交的岛的逻辑。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cee/654/659/cee6546597a3c9a4552344298e07e2ca.png"></div><br> 现在，让我们尝试添加一些土地。 为此，我将提高海拔以上任何陆地位置（即Delaunay三角形）的高度： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf7/206/5d4/bf72065d44a8acc8247d2a1895c5db72.png"></div><br> 有两个方面值得注意。 首先，在左上角有一个相当成功的屏障岛。 但是，该岛似乎并未很好地填满垃圾填埋场。 由于多边形内部存在许多中心三角形，因此它们处于“打开”状态。 这为岛的形状增加了随机性。 其次，人们可以注意到其他两个岛屿离海岸如此近，以至于它们只是与海岸融为一体。 由于我想在这里创建岛屿，所以我不需要经常这样做，所以我将设置一代以在海岸线和岛屿之间增加水位。  （稍后我将添加检查以防止这种情况发生。） <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ca/150/ba5/6ca150ba54c211d1da8fdf4470401a02.png"></div><br> 关于陆地不规则三角形的一件好事是，它们自然地形成了屏障岛特有的潮汐管道。 关于它们的坏处是它们通常会创建斑点岛，看起来像是一串扭曲的珍珠。 它们与障碍岛不太相似，如果您使用很多单个三角形，它们看起来会很不自然。 <br><br> 如果我增加岛屿的宽度，两种影响都会消失，我会获得更多的自然岛屿，但没有潮汐通道： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/153/005/e17/153005e17c9d6bf4e464e2e27b77c1c7.png"></div><br> 但是我想学习如何产生非常狭窄的岛屿。 另一种方法是（显着）增加世界上的位置数量以提高分辨率： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b6/57c/f04/3b657cf0414f8bcc8cc21da0921d25e6.png"></div><br> 这样我们就可以得到令人印象深刻的细小岛，但它显着增加了创建地图所​​需的时间和内存。 <br><br> 在这两种方法中，岛上的某些部分很有可能会非常不平坦： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a75/32a/edd/a7532aedd16eeeba152ab0ee2e213f4b.png"></div><br> 发生这种情况是因为路径与基础Delaunay三角形的两个边（有时是所有三个边）相交。 这是在地图生成中使用Delaunay三角剖分的固有问题，但是由于某些原因，他们很少讨论它！ 在我的游戏中，这种情况很少发生在海岸线上，因为为了减少此类情况的发生，我故意添加了平滑阶段，但是此阶段往往会破坏狭窄的岛屿。 潜在的解决方案是创建稍微宽一些的岛并使用抗锯齿功能-如果设置正确，则可以得到较薄的岛，而不会出现很多三角形伪像： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/52d/558/3f3/52d5583f3b04c85ddd7f504c3679cc01.png"></div><br> 但是，使用这种方法，岛的狭窄程度仍然存在限制。 此外，这意味着我们永远不会获得真正的分形海岸线。 <br><br> 有时，平滑算法会导致将长的障碍岛分割成几个小的障碍岛（如上图的左下角所示），但是拥有一个可以强制执行此操作的选项将很方便： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/863/e5f/489/863e5f4893bdb0069219c761308b2ff7.png"></div><br> 剩下的唯一一件事就是给这些岛起个名字并映射它们。 这里唯一微妙的方面是，我不想为障碍岛链中的所有岛屿取名字。 在障碍岛的真实链条中，各个岛屿通常都有名称，这会导致地图上的混乱： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e15/8b4/b27/e158b4b272c4b55b1d3b128e5e1b9d4c.png"></div><br> 因此，在创建障碍岛时，我会考虑整个弧并为其添加一个名称，即使结果是这一代将弧分成几个岛： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fd/797/070/6fd797070e48a48856b4862892ff3b66.png"></div><br> 通常，障碍岛被称为“堤岸”或“竖井”（条形），因此这些词可在变体名称中找到。 <br><br> 此示例显示了潜在的障碍岛问题： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/028/cee/b56/028ceeb56ebe1c5c83ea7e56f02c3a2f.png"></div><br> 这里的屏障岛是在海湾内部创建的。 这是不合逻辑的（此外，导致名称的交集）。 为了避免这种情况，我可以使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">海湾识别逻辑</a> ，并跳过海岸线的这些部分。 此方法可能无法防止傻瓜，但是此卡非常有效： <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/086/180/a33/086180a3377f856a818fd9097925a998.png"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN439198/">https://habr.com/ru/post/zh-CN439198/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN439186/index.html">UX编辑器：真实的故事，真实的生活</a></li>
<li><a href="../zh-CN439190/index.html">如何使用ARCore创建增强现实应用程序</a></li>
<li><a href="../zh-CN439192/index.html">PC扬声器到十一</a></li>
<li><a href="../zh-CN439194/index.html">使用SharedEvents进行角色管理</a></li>
<li><a href="../zh-CN439196/index.html">摩根大通分析师：苹果应收购暴雪，Netflix或Sonos以使投资者放心</a></li>
<li><a href="../zh-CN439200/index.html">小孩子的作曲家</a></li>
<li><a href="../zh-CN439202/index.html">使用Seq2Seq自动编码器的Web攻击检测</a></li>
<li><a href="../zh-CN439204/index.html">通过植物遗传修饰提高光合作用的效率</a></li>
<li><a href="../zh-CN439206/index.html">我们如何解决在RecSys Challenge上继续播放列表的问题并获得第三名</a></li>
<li><a href="../zh-CN439208/index.html">哦，我的代码：MAPS.ME的工作方式</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>