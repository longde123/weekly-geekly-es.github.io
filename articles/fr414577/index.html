<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👦🏾 🐛 🧚🏻 Devilution: projet de reverse engineering Diablo 🛢️ 🤳🏼 👌🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comme les années le montrent, nous n'avons pratiquement aucune chance de voir le code source original - ou du moins un remake - de la première partie ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Devilution: projet de reverse engineering Diablo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414577/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/471/51e/0ad/47151e0ad7af950e53560cea5cd7b26c.jpg" alt="image"></div><br>  Comme les années le montrent, nous n'avons pratiquement aucune chance de voir le code source original - ou du moins un remake - de la première partie de Diablo (l'événement <i>The Darkening of Tristram</i> in <i>Diablo III</i> en l'honneur du 20e anniversaire de la sortie de la première partie est, bien sûr, bon, mais encore un peu pas ce que les fans attendaient).  Et laissez la dernière mise à jour du jeu sortir en 2001, et Blizzard lui-même a depuis longtemps cessé de le soutenir et de le vendre - le souvenir de celui-ci est toujours vivant dans nos cœurs.  Ce qui a encore une fois été confirmé par un certain GalaXyHaXz, qui a décidé de procéder à une rétro-ingénierie du jeu. <br><br>  Le code source est disponible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur Github</a> .  Le projet Devilution, que son auteur GalaXyHaXz a surnommé «Diablo Devolution», a nécessité plus de 1 200 heures - 4 mois de travail.  Ne manquez pas non plus les commentaires volumineux de l'auteur qui mettent en lumière le code source du jeu et situé dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un autre référentiel</a> .  Le code lui-même ne semble pas avoir d'importance jusqu'à présent, mais il continuera à être mis en ordre à mesure que le travail progresse sur d'autres modules du jeu. <br><br>  L'idée de la rétro-ingénierie d'un si grand projet a d'abord semblé une tâche fantastique, sinon pour un accident chanceux - ou, en d'autres termes, un petit oubli qui s'est produit il y a 20 ans. <br><br>  En 1998, Blizzard a donné le code source de Diablo à deux studios: Synergestic Software, qui développait le module complémentaire Hellfire, et Climax Studios, qui a travaillé sur le portage de la Playstation.  Ce n'est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pas la première fois que le</a> département Sony QA au Japon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">est «satisfait» de ses fuites</a> , ils se sont également distingués cette fois - dans la version japonaise du port, <i>un fichier symbolique a</i> été accidentellement oublié, qui comprenait des fonctions, des données, des types et bien plus encore.  Cela nous a permis de restaurer les fonctions d'origine, les variables globales, les structures de données, etc.  La version bêta du port pour la Playstation a également fuité, et elle contenait un autre fichier similaire, ce qui a grandement simplifié la tâche. <br><a name="habracut"></a><br>  Pour couronner le tout, la version de débogage de la version PC du jeu reposait toujours directement sur vos disques de jeu, cachée dans l'archive DIABDAT.MPQ -&gt; D1221A.MPQ -&gt; DIABLO.EXE.  La construction contient des outils de débogage qui ne sont pas disponibles dans la version finale, ainsi qu'un grand nombre d'assertions de ligne, grâce auxquelles il a été possible de recréer des noms de fichiers, des fonctions - même les numéros de ligne du code sont aussi proches que possible de l'original. <br><br>  Le développement de Diablo a commencé au moment de la sortie de Windows 95. En conséquence, le jeu a été optimisé pour cela.  Pour compiler le jeu, Microsoft Visual C ++ 4.20 a été utilisé, qui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">a été mis à jour dans la version 5.10 dans les correctifs suivants</a> .  Afin de reproduire avec précision le code d'origine, le projet a conservé la compatibilité avec ces versions de compilateurs, cependant des Makefiles sont disponibles pour les compilateurs modernes.  Les binaires exécutables résultant de la compilation, selon les rapports, s'exécutent sur Windows 7, Linux-WINE et Windows 10. <br><br>  C'est un fait bien connu que le jeu changeait sérieusement tout au long du projet, et de nombreuses idées ont été supprimées juste avant la sortie - et le multijoueur a été ajouté à la hâte. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/VscdPA6sUkc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  De nombreux créateurs de modifications pour le jeu (par exemple, les auteurs de The Hell mod) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sont déjà allés assez loin dans leurs recherches</a> sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">recherche</a> de code, notamment par la mise en place d'une mémoire de processus;  cependant, ils n'ont pas publié les résultats de leur travail, et beaucoup de ces mods ont été abandonnés à mi-chemin.  Si Devilution peut être amené à un certain degré de préparation, un problème similaire peut être évité - en plus d'apprendre quelque chose de nouveau sur le jeu lui-même. <br><br>  À l'heure actuelle, la rétro-ingénierie Diablo.exe.  Il reste quelques bibliothèques à gérer: Battle.snp (protocole Battle.Net obsolète), DiabloUI.dll (code du menu principal du jeu, entièrement basé sur Windows et mal écrit), Standard.snp (code multijoueur local, obsolète, similaire à celui utilisé) dans Starcraft) et quelques autres modules. <br><br>  Théoriquement, dans un avenir proche (après avoir inversé <i>DiabloUI.dll</i> ), le jeu peut devenir multiplateforme - à moins, bien sûr, que Blizzard ne se dépêche de fermer la boutique avant que l'auteur puisse attirer suffisamment de passionnés pour résoudre ce problème. <br><br>  PS Et comme pour Diablo II, tout n'est pas si clair: le jeu continue d'être vendu et pris en charge par Blizzard, sa base de code est environ 8 fois plus grande que l'original, et il y a des rumeurs selon lesquelles le remaster officiel est juste autour du coin - donc son inverse complet l'ingénierie dans un avenir prévisible ne doit pas attendre. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414577/">https://habr.com/ru/post/fr414577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414565/index.html">Lampe pour meubles, cuisine ou salle de bain</a></li>
<li><a href="../fr414567/index.html">Annonce de RamblerFront & # 5</a></li>
<li><a href="../fr414569/index.html">Les récifs coralliens gardent les secrets du passé et de l'avenir des océans</a></li>
<li><a href="../fr414571/index.html">La relativité inattendue du GPS intégré au cerveau</a></li>
<li><a href="../fr414573/index.html">IP DoorBell - Sonnette interactive</a></li>
<li><a href="../fr414579/index.html">Google AI a appris à prédire quand un patient mourra (mais tout n'est pas si sombre)</a></li>
<li><a href="../fr414581/index.html">Où est son bouton?! Comment une simple personne peut-elle décharger des données de Kibana et Elasticsearch et ne pas forcer les développeurs</a></li>
<li><a href="../fr414583/index.html">RIT ++, Tech RaDarts et tout-tout-tout</a></li>
<li><a href="../fr414585/index.html">Comment mon String.getBytes (UTF_8) s'est cassé et ce que j'en ai fait</a></li>
<li><a href="../fr414587/index.html">Drone autonome bricolage avec contrôle sur Internet. Partie 2 sur les logiciels</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>