<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëêüèº üõ¥ üçå Microservice-Architektur auf einem modernen Stapel von Java-Technologien üëäüèø üêõ üö¥üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir hatten JDK 11, Kotlin, Spring 5 und Spring Boot 2, Gradle 5 mit produktionsbereitem Kotlin DSL, JUnit 5 sowie ein halbes Dutzend Spring Cloud-Stac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Microservice-Architektur auf einem modernen Stapel von Java-Technologien</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431474/">  <i>Wir hatten JDK 11, Kotlin, Spring 5 und Spring Boot 2, Gradle 5 mit produktionsbereitem Kotlin DSL, JUnit 5 sowie ein halbes Dutzend Spring Cloud-Stack-Bibliotheken f√ºr die Serviceerkennung, das Erstellen von Gateway-APIs, das Client-Balancing und das Implementieren von Leistungsschaltermustern Schreiben deklarativer HTTP-Clients, verteiltes Tracing und all das.</i>  <i>Nicht, dass all dies ben√∂tigt worden w√§re, um eine Microservice-Architektur zu erstellen - nur zum Spa√ü ...</i> <br><a name="habracut"></a><br><h1>  Eintrag </h1><br>  In diesem Artikel sehen Sie ein Beispiel f√ºr eine Microservice-Architektur unter Verwendung relevanter Technologien in der Java-Welt, von denen die wichtigsten unten angegeben sind (diese Versionen werden zum Zeitpunkt der Ver√∂ffentlichung im Projekt verwendet): <br><div class="scrollable-table"><table><tbody><tr><th>  Art der Technologie </th><th>  Titel </th><th>  Version </th></tr><tr><td>  Plattform </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Jdk</a> </td><td>  11.0.1 </td></tr><tr><td>  Programmiersprache </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Kotlin</a> </td><td>  1.3.10 </td></tr><tr><td rowspan="2">  Anwendungsrahmen </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Fr√ºhlingsrahmen</a> </td><td>  5.0.9 </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Fr√ºhlingsstiefel</a> </td><td>  2.0.5 </td></tr><tr><td rowspan="2">  System erstellen </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Gradle</a> </td><td>  5.0 </td></tr><tr><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Gradle Kotlin DSL</a> </td><td>  1.0.4 </td></tr><tr><td>  Unit Testing Framework </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Junit</a> </td><td>  5.1.1 </td></tr><tr><td colspan="3" align="center">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Fr√ºhlingswolke</a> </td></tr><tr><td>  Single Access Point (API-Gateway) </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Fr√ºhlingswolken-Gateway</a> </td><td rowspan="7">  Im Release-Zug Finchley SR2-Projekt Spring Cloud enthalten </td></tr><tr><td>  Zentralisierte Konfiguration </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Spring Cloud Konfiguration</a> </td></tr><tr><td>  Anforderungsverfolgung (verteilte Verfolgung) </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Fr√ºhlingswolkenwahrheit</a> </td></tr><tr><td>  Deklarativer HTTP-Client </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Fr√ºhlingswolke OpenFeign</a> </td></tr><tr><td>  Serviceerkennung </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Fr√ºhlingswolke Netflix Eureka</a> </td></tr><tr><td>  Leistungsschalter </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Spring Cloud Netflix Hystrix</a> </td></tr><tr><td>  Clientseitiger Lastausgleich </td><td>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Spring Cloud Netflix-Multifunktionsleiste</a> </td></tr></tbody></table></div><br>  Das Projekt besteht aus 5 Microservices: 3 Infrastrukturen (Konfigurationsserver, Service Discovery Server, UI-Gateway) und Beispielen f√ºr Front-End (Items UI) und Back-End (Items Service): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jz/rw/ia/jzrwiaehuhksnkj2dzmjea-43fy.png"></div><br>  Alle von ihnen werden nachfolgend nacheinander betrachtet.  In einem ‚ÄûKampf‚Äú -Projekt wird es offensichtlich deutlich mehr Microservices geben, die alle Gesch√§ftsfunktionen implementieren.  Das Hinzuf√ºgen zu einer √§hnlichen Architektur erfolgt technisch auf die gleiche Weise wie die Benutzeroberfl√§che f√ºr Elemente und der Dienst "Elemente". <br><br><h3>  Haftungsausschluss </h3><br>  Der Artikel ber√ºcksichtigt keine Instrumente f√ºr die Containerisierung und Orchestrierung, da sie derzeit nicht im Projekt verwendet werden. <br><br><h1>  Server konfigurieren </h1><br>  Spring Cloud Config wurde verwendet, um ein zentrales Repository mit Anwendungskonfigurationen zu erstellen.  Konfigurationen k√∂nnen aus verschiedenen Quellen gelesen werden, z. B. aus einem separaten Git-Repository.  In diesem Projekt befinden sie sich der Einfachheit und Klarheit halber in den Anwendungsressourcen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sm/35/af/sm35aft9609348sicenfjgosw1k.png"></div><br>  In diesem Fall sieht die Konfiguration des Konfigurationsservers ( <code>application.yml</code> ) selbst folgenderma√üen aus: <br><br><pre> <code class="plaintext hljs">spring: profiles: active: native cloud: config: server: native: search-locations: classpath:/config server: port: 8888</code> </pre> <br>  Durch die Verwendung von Port 8888 k√∂nnen Config-Server-Clients ihren Port in ihrer <code>bootstrap.yml</code> nicht explizit angeben.  Beim Start laden sie ihre Konfiguration hoch, indem sie eine GET-Anforderung an den HTTP-API-Konfigurationsserver ausf√ºhren. <br><br>  Der Programmcode f√ºr diesen Microservice besteht aus nur einer Datei, die die Deklaration der Anwendungsklasse und die Hauptmethode enth√§lt, die im Gegensatz zum entsprechenden Java-Code eine Funktion der obersten Ebene ist: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableConfigServer</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConfigServerApplication</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fun</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">main</span></span></span></span>(args: Array&lt;String&gt;) { runApplication&lt;ConfigServerApplication&gt;(*args) }</code> </pre> <br>  Anwendungsklassen und Hauptmethoden in anderen Mikrodiensten sehen √§hnlich aus. <br><br><h1>  Service Discovery Server </h1><br>  Die Serviceerkennung ist ein Microservice-Architekturmuster, mit dem Sie die Interaktion zwischen Anwendungen angesichts einer m√∂glichen √Ñnderung der Anzahl ihrer Instanzen und des Netzwerkstandorts vereinfachen k√∂nnen.  Eine Schl√ºsselkomponente dieses Ansatzes ist die Dienstregistrierung - eine Datenbank mit Mikrodiensten, deren Instanzen und Netzwerkstandorten (weitere Details <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">hier</a> ). <br><br>  In diesem Projekt wird die Serviceerkennung auf der Grundlage von Netflix Eureka implementiert, einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">clientseitigen Serviceerkennung</a> : Der Eureka-Server f√ºhrt die Funktion der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Serviceregistrierung aus</a> , und der Eureka-Client kontaktiert den Eureka-Server, um eine Liste der Instanzen der aufgerufenen Anwendung zu erhalten, und f√ºhrt unabh√§ngig einen Ausgleich durch, bevor er eine Anforderung an einen Mikrodienst ausf√ºhrt Laden (mit Netflix Ribbon).  Netflix Eureka l√§sst sich wie einige andere Netflix OSS-Stack-Komponenten (wie Hystrix und Ribbon) mithilfe von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Spring Cloud Netflix in</a> Spring Boot-Anwendungen integrieren. <br><br>  In der Service Discovery Server-Konfiguration in den Ressourcen ( <code>bootstrap.yml</code> ) werden nur der Name der Anwendung und der Parameter angegeben, der angibt, dass der Start des Microservice unterbrochen wird, wenn keine Verbindung zum Config-Server hergestellt werden kann: <br><br><pre> <code class="plaintext hljs">spring: application: name: eureka-server cloud: config: fail-fast: true</code> </pre> <br>  Der Rest der Anwendungskonfiguration befindet sich in der <code>eureka-server.yml</code> in den <code>eureka-server.yml</code> : <br><br><pre> <code class="plaintext hljs">server: port: 8761 eureka: client: register-with-eureka: true fetch-registry: false</code> </pre> <br>  Der Eureka-Server verwendet Port 8761, sodass alle Eureka-Clients ihn nicht mit dem Standardwert angeben k√∂nnen.  Der Wert des <code>register-with-eureka</code> (der √úbersichtlichkeit <code>register-with-eureka</code> angegeben, <code>register-with-eureka</code> er auch standardm√§√üig verwendet wird) bedeutet, dass die Anwendung selbst wie andere Microservices auf dem Eureka-Server registriert wird.  Der Parameter <code>fetch-registry</code> bestimmt, ob der Eureka-Client Daten von der Service-Registrierung empf√§ngt. <br><br>  Eine Liste der registrierten Anwendungen und anderer Informationen finden Sie unter <code>http://localhost:8761/</code> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sh/co/lz/shcolza08r8j3qkdmgb42exawqs.png"></div><br>  Alternativen zum Implementieren der Serviceerkennung sind Consul, Zookeeper und andere. <br><br><h1>  Artikel Service </h1><br>  Diese Anwendung ist ein Beispiel f√ºr ein Back-End mit einer REST-API, die mithilfe des in Spring 5 ver√∂ffentlichten WebFlux-Frameworks implementiert wurde (die Dokumentation finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">hier</a> ), oder besser Kotlin DSL daf√ºr: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">itemsRouter</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handler: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ItemHandler</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = router { path(<span class="hljs-string"><span class="hljs-string">"/items"</span></span>).nest { GET(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, handler::getAll) POST(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, handler::add) GET(<span class="hljs-string"><span class="hljs-string">"/{id}"</span></span>, handler::getOne) PUT(<span class="hljs-string"><span class="hljs-string">"/{id}"</span></span>, handler::update) } }</code> </pre> <br>  Die Verarbeitung empfangener HTTP-Anforderungen wird an die <code>ItemHandler</code> Klassen- <code>ItemHandler</code> delegiert.  Eine Methode zum Abrufen einer Liste von Objekten einer Entit√§t sieht beispielsweise folgenderma√üen aus: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(request: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ServerRequest</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = ServerResponse.ok() .contentType(APPLICATION_JSON_UTF8) .body(fromObject(itemRepository.findAll()))</code> </pre> <br>  Die Anwendung wird zu einem Eureka-Server-Client, d. H. Sie registriert und empf√§ngt Daten von der Dienstregistrierung aufgrund des Vorhandenseins der <code>spring-cloud-starter-netflix-eureka-client</code> .  Nach der Registrierung sendet die Anwendung Hartbits mit einer bestimmten H√§ufigkeit an den Eureka-Server. Wenn der Prozentsatz der vom Eureka-Server empfangenen Hartbits im Verh√§ltnis zum maximal m√∂glichen Wert f√ºr einen bestimmten Zeitraum einen bestimmten Schwellenwert unterschreitet, wird die Anwendung aus der Dienstregistrierung gel√∂scht. <br><br>  Betrachten Sie eine der M√∂glichkeiten, um zus√§tzliche Metadaten an den Eureka-Server zu senden: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@PostConstruct</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addMetadata</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = aim.registerAppMetadata(mapOf(<span class="hljs-string"><span class="hljs-string">"description"</span></span> to <span class="hljs-string"><span class="hljs-string">"Some description"</span></span>))</code> </pre> <br>  <code>http://localhost:8761/eureka/apps/items-service</code> Sie sicher, dass diese Daten vom Eureka-Server empfangen werden, indem Sie √ºber Postman zu <code>http://localhost:8761/eureka/apps/items-service</code> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5l/0v/xg/5l0vxgolfgjzyuceskxhmdv-0kc.png"></div><br><br><h1>  Elemente Benutzeroberfl√§che </h1><br>  Dieser Microservice demonstriert nicht nur die Interaktion mit dem UI-Gateway (wird im n√§chsten Abschnitt gezeigt), sondern f√ºhrt auch die Front-End-Funktion f√ºr den Items-Service aus, der auf verschiedene Arten mit der REST-API interagieren kann: <br><br><ol><li>  Mit OpenFeign geschriebene Client-REST-API: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@FeignClient(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"items-service"</span></span></span><span class="hljs-meta">, fallbackFactory = ItemsServiceFeignClient.ItemsServiceFeignClientFallbackFactory::class)</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemsServiceFeignClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/items/{id}"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-meta"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">@PathVariable(</span></span></span><span class="hljs-meta-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta"><span class="hljs-meta-string">"id"</span></span></span></span></span><span class="hljs-function"><span class="hljs-params"><span class="hljs-meta">)</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String <span class="hljs-meta"><span class="hljs-meta">@GetMapping(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"/not-existing-path"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testHystrixFallback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String <span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemsServiceFeignClientFallbackFactory</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">FallbackFactory</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ItemsServiceFeignClient</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> log = LoggerFactory.getLogger(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">override</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fun</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">create</span></span></span></span>(cause: Throwable) = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : ItemsServiceFeignClient { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String { log.error(<span class="hljs-string"><span class="hljs-string">"Cannot get item with id=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$id</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ItemsUiException(cause) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testHystrixFallback</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String { log.error(<span class="hljs-string"><span class="hljs-string">"This is expected error"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"{\"error\" : \"Some error\"}"</span></span> } } } }</code> </pre> </li><li>  <code>RestTemplate</code> Bean <br>  In der Java-Konfiguration wird ein Bin erstellt: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-meta"><span class="hljs-meta">@LoadBalanced</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">restTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = RestTemplate()</code> </pre> <br>  Und so verwendet: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestWithRestTemplate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String = restTemplate.getForEntity(<span class="hljs-string"><span class="hljs-string">"http://items-service/items/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$id</span></span></span><span class="hljs-string">"</span></span>, String::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class"> ?: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">"No result"</span></span></span></span></code> </pre> </li><li>  <code>WebClient</code> Klassen- <code>WebClient</code> (f√ºr das WebFlux-Framework spezifische Methode) <br>  In der Java-Konfiguration wird ein Bin erstellt: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">webClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(loadBalancerClient: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LoadBalancerClient</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = WebClient.builder() .filter(LoadBalancerExchangeFilterFunction(loadBalancerClient)) .build()</code> </pre> <br>  Und so verwendet: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">requestWithWebClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(id: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Long</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Mono&lt;String&gt; = webClient.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>().uri(<span class="hljs-string"><span class="hljs-string">"http://items-service/items/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$id</span></span></span><span class="hljs-string">"</span></span>).retrieve().bodyToMono(String::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">)</span></span></code> </pre> </li></ol><br>  Die Tatsache, dass alle drei Methoden dasselbe Ergebnis zur√ºckgeben, kann unter <code>http://localhost:8081/example</code> : √ºberpr√ºft werden. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ma/c8/oz/mac8ozz07cju5mitffz_qiew9mc.png"></div><br>  Ich bevorzuge die Option mit OpenFeign, da es m√∂glich ist, einen Vertrag f√ºr die Interaktion mit dem genannten Microservice zu entwickeln, dessen Implementierung von Spring durchgef√ºhrt wird.  Ein Objekt, das diesen Vertrag implementiert, wird injiziert und wie eine normale Bohne verwendet: <br><br><pre> <code class="kotlin hljs">itemsServiceFeignClient.getItem(<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br>  Wenn die Anforderung aus irgendeinem Grund fehlschl√§gt, wird die entsprechende Methode der Klasse aufgerufen, die die <code>FallbackFactory</code> Schnittstelle implementiert. Dabei m√ºssen Sie den Fehler verarbeiten und die Standardantwort zur√ºckgeben (oder eine Ausnahme weiter ausl√∂sen).  F√ºr den Fall, dass eine bestimmte Anzahl aufeinanderfolgender Anrufe fehlschl√§gt, √∂ffnet die Sicherung den Stromkreis (mehr √ºber den Leistungsschalter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">hier</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">hier</a> ) und gibt Zeit, um den ausgefallenen Mikrodienst wiederherzustellen. <br><br>  Um den Feign-Client zu verwenden, m√ºssen Sie die Anwendungsklasse <code>@EnableFeignClients</code> mit Anmerkungen versehen: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@SpringBootApplication</span></span> <span class="hljs-meta"><span class="hljs-meta">@EnableFeignClients(clients = [ItemsServiceFeignClient::class])</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemsUiApplication</span></span></span></span></code> </pre> <br>  Damit Hystrix Fallback im Feign-Client funktioniert, m√ºssen Sie der Anwendungskonfiguration Folgendes hinzuf√ºgen: <br><br><pre> <code class="plaintext hljs">feign: hystrix: enabled: true</code> </pre> <br>  Um die Funktionsweise des Hystrix-Fallbacks im Feign-Client zu testen, rufen Sie einfach <code>http://localhost:8081/hystrix-fallback</code> .  Der Feign-Client versucht, die Anforderung auf einem Pfad auszuf√ºhren, der im Items-Dienst nicht vorhanden ist. Dies f√ºhrt zur R√ºckgabe der Antwort: <br><br><pre> <code class="json hljs">{<span class="hljs-attr"><span class="hljs-attr">"error"</span></span> : <span class="hljs-string"><span class="hljs-string">"Some error"</span></span>}</code> </pre> <br><h1>  UI-Gateway </h1><br>  Mit dem API-Gateway-Muster k√∂nnen Sie einen einzelnen Einstiegspunkt f√ºr die API erstellen, die von anderen Microservices bereitgestellt wird (weitere Details <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">hier</a> ).  Eine Anwendung, die dieses Muster implementiert, f√ºhrt das Routing (Routing) von Anforderungen an Microservices durch und kann auch zus√§tzliche Funktionen ausf√ºhren, z. B. die Authentifizierung. <br><br>  In diesem Projekt wird zur besseren √úbersichtlichkeit ein UI-Gateway implementiert, dh ein einzelner Einstiegspunkt f√ºr verschiedene UIs.  Offensichtlich ist die Gateway-API √§hnlich implementiert.  Der Microservice wird auf Basis des Spring Cloud Gateway Frameworks implementiert.  Eine Alternative ist Netflix Zuul, Teil von Netflix OSS und mit Spring Cloud Netflix in Spring Boot integriert. <br>  Das UI-Gateway wird auf Port 443 unter Verwendung des generierten SSL-Zertifikats (im Projekt) ausgef√ºhrt.  SSL und HTTPS sind wie folgt konfiguriert: <br><br><pre> <code class="plaintext hljs">server: port: 443 ssl: key-store: classpath:keystore.p12 key-store-password: qwerty key-alias: test_key key-store-type: PKCS12</code> </pre> <br>  Benutzeranmeldungen und Kennw√∂rter werden in einer Map-basierten Implementierung der WebFlux-spezifischen <code>ReactiveUserDetailsService</code> Schnittstelle gespeichert: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reactiveUserDetailsService</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: ReactiveUserDetailsService { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> user = User.withDefaultPasswordEncoder() .username(<span class="hljs-string"><span class="hljs-string">"john_doe"</span></span>).password(<span class="hljs-string"><span class="hljs-string">"qwerty"</span></span>).roles(<span class="hljs-string"><span class="hljs-string">"USER"</span></span>) .build() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> admin = User.withDefaultPasswordEncoder() .username(<span class="hljs-string"><span class="hljs-string">"admin"</span></span>).password(<span class="hljs-string"><span class="hljs-string">"admin"</span></span>).roles(<span class="hljs-string"><span class="hljs-string">"ADMIN"</span></span>) .build() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MapReactiveUserDetailsService(user, admin) }</code> </pre> <br>  Die Sicherheitseinstellungen sind wie folgt konfiguriert: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">springWebFilterChain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(http: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ServerHttpSecurity</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: SecurityWebFilterChain = http .formLogin().loginPage(<span class="hljs-string"><span class="hljs-string">"/login"</span></span>) .and() .authorizeExchange() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/login"</span></span>).permitAll() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/static/**"</span></span>).permitAll() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/favicon.ico"</span></span>).permitAll() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/webjars/**"</span></span>).permitAll() .pathMatchers(<span class="hljs-string"><span class="hljs-string">"/actuator/**"</span></span>).permitAll() .anyExchange().authenticated() .and() .csrf().disable() .build()</code> </pre> <br>  Die angegebene Konfiguration bestimmt, dass ein Teil der Webressourcen (z. B. Statik) allen Benutzern zur Verf√ºgung steht, einschlie√ülich denen, die sich nicht authentifiziert haben, und alles andere ( <code>.anyExchange()</code> ) wird nur authentifiziert.  Wenn Sie versuchen, eine URL einzugeben, f√ºr die eine Authentifizierung erforderlich ist, wird diese auf die Anmeldeseite umgeleitet ( <code>https://localhost/login</code> ): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vz/eu/yx/vzeuyxohx_kfb17mrg4llnv4n8q.png"></div><br>  Diese Seite verwendet die Tools des Bootstrap-Frameworks, das √ºber Webjars mit dem Projekt verbunden ist. Dadurch k√∂nnen clientseitige Bibliotheken als regul√§re Abh√§ngigkeiten verwaltet werden.  Thymeleaf wird verwendet, um HTML-Seiten zu bilden.  Der Zugriff auf die Anmeldeseite wird mit WebFlux konfiguriert: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">routes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = router { GET(<span class="hljs-string"><span class="hljs-string">"/login"</span></span>) { ServerResponse.ok().contentType(MediaType.TEXT_HTML).render(<span class="hljs-string"><span class="hljs-string">"login"</span></span>) } }</code> </pre> <br>  Das Spring Cloud Gateway-Routing kann in einer YAML- oder Java-Konfiguration konfiguriert werden.  Routen zu Microservices werden entweder manuell zugewiesen oder automatisch basierend auf den von der Serviceregistrierung empfangenen Daten erstellt.  Bei einer ausreichend gro√üen Anzahl von Benutzeroberfl√§chen, f√ºr die ein Routing erforderlich ist, ist die Integration in die Dienstregistrierung bequemer: <br><br><pre> <code class="plaintext hljs">spring: cloud: gateway: discovery: locator: enabled: true lower-case-service-id: true include-expression: serviceId.endsWith('-UI') url-expression: "'lb:http://'+serviceId"</code> </pre> <br>  Der Wert des Parameters <code>include-expression</code> gibt an, dass die Routen nur f√ºr Microservices erstellt werden, deren Namen mit <i>-UI enden</i> . Der Wert des Parameters <code>url-expression</code> besteht darin, dass auf sie √ºber das HTTP-Protokoll zugegriffen werden kann, im Gegensatz zum UI-Gateway, das √ºber HTTPS funktioniert, und beim Zugriff Sie verwenden den Client-Lastausgleich (implementiert mit Netflix Ribbon). <br><br>  Betrachten Sie das Beispiel zum manuellen Erstellen von Routen in der Java-Konfiguration (ohne Integration in die Dienstregistrierung): <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">routeLocator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(builder: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">RouteLocatorBuilder</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = builder.routes { route(<span class="hljs-string"><span class="hljs-string">"eureka-gui"</span></span>) { path(<span class="hljs-string"><span class="hljs-string">"/eureka"</span></span>) filters { rewritePath(<span class="hljs-string"><span class="hljs-string">"/eureka"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>) } uri(<span class="hljs-string"><span class="hljs-string">"lb:http://eureka-server"</span></span>) } route(<span class="hljs-string"><span class="hljs-string">"eureka-internals"</span></span>) { path(<span class="hljs-string"><span class="hljs-string">"/eureka/**"</span></span>) uri(<span class="hljs-string"><span class="hljs-string">"lb:http://eureka-server"</span></span>) } }</code> </pre> <br>  Die erste Route f√ºhrt zur zuvor angezeigten Eureka-Server-Homepage ( <code>http://localhost:8761</code> ), die zweite zum Laden von Ressourcen auf dieser Seite. <br><br>  Alle von der Anwendung erstellten Routen sind unter <code>https://localhost/actuator/gateway/routes</code> verf√ºgbar. <br><br>  In den zugrunde liegenden Microservices kann es erforderlich sein, auf die Anmeldung und / oder Rollen des im UI-Gateway authentifizierten Benutzers zuzugreifen.  Zu diesem Zweck habe ich einen Filter erstellt, der der Anforderung die entsprechenden Header hinzuf√ºgt: <br><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AddCredentialsGlobalFilter</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GlobalFilter { private val loggedInUserHeader = "logged-in-user" private val loggedInUserRolesHeader = "logged-in-user-roles" override fun filter</span></span></span></span>(exchange: ServerWebExchange, chain: GatewayFilterChain) = exchange.getPrincipal&lt;Principal&gt;() .flatMap { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> request = exchange.request.mutate() .header(loggedInUserHeader, it.name) .header(loggedInUserRolesHeader, (it <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Authentication).authorities?.joinToString(<span class="hljs-string"><span class="hljs-string">";"</span></span>) ?: <span class="hljs-string"><span class="hljs-string">""</span></span>) .build() chain.filter(exchange.mutate().request(request).build()) } }</code> </pre> <br>  Wenden wir uns nun √ºber das UI-Gateway - <code>https://localhost/items-ui/greeting</code> - der Benutzeroberfl√§che f√ºr <code>https://localhost/items-ui/greeting</code> wird zu Recht davon ausgegangen, dass die Verarbeitung dieser Header bereits in der Benutzeroberfl√§che f√ºr <code>https://localhost/items-ui/greeting</code> implementiert wurde: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rc/sl/_s/rcsl_sdjuf6vkxkite5h3rgzoui.png"></div><br>  Spring Cloud Sleuth ist eine L√∂sung f√ºr die Abfrageverfolgung in einem verteilten System.  Trace-ID (Pass-Through-ID) und Span-ID (Unit-of-Work-ID) werden zu den Headern der Anforderung hinzugef√ºgt, die mehrere Microservices durchlaufen (zum leichteren Verst√§ndnis habe ich das Schema vereinfacht; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">hier eine</a> ausf√ºhrlichere Erkl√§rung): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sp/1q/em/sp1qem4a6silx9bo3kh83enn_mu.png"></div><br>  Diese Funktionalit√§t wird durch einfaches Hinzuf√ºgen der <code>spring-cloud-starter-sleuth</code> . <br><br>  Wenn Sie die entsprechenden Protokollierungseinstellungen angeben, wird in der Konsole der entsprechenden Microservices Folgendes angezeigt (Trace-ID und Span-ID werden nach dem Namen des Microservices angezeigt): <br><br><pre> <code class="plaintext hljs">DEBUG [ui-gateway,009b085bfab5d0f2,009b085bfab5d0f2,false] oscghRoutePredicateHandlerMapping : Route matched: CompositeDiscoveryClient_ITEMS-UI DEBUG [items-ui,009b085bfab5d0f2,947bff0ce8d184f4,false] oswrfunction.server.RouterFunctions : Predicate "(GET &amp;&amp; /example)" matches against "GET /example" DEBUG [items-service,009b085bfab5d0f2,dd3fa674cd994b01,false] oswrfunction.server.RouterFunctions : Predicate "(GET &amp;&amp; /{id})" matches against "GET /1"</code> </pre> <br>  F√ºr eine grafische Darstellung der verteilten Ablaufverfolgung k√∂nnen Sie beispielsweise Zipkin verwenden, das als Server fungiert, der Informationen zu HTTP-Anforderungen von anderen Microservices zusammenfasst (weitere Details <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">hier</a> ). <br><br><h1>  Montage </h1><br>  Je nach Betriebssystem wird <code>gradlew clean build</code> oder <code>./gradlew clean build</code> . <br><br>  Angesichts der M√∂glichkeit, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Gradle-Wrapper zu verwenden</a> , ist kein lokal installierter Gradle erforderlich. <br><br>  Build und anschlie√üender Start geben JDK 11.0.1 erfolgreich weiter.  Zuvor arbeitete das Projekt mit JDK 10, daher gehe ich davon aus, dass es bei dieser Version keine Probleme mit der Montage und dem Start geben wird.  Ich habe keine Daten zu fr√ºheren Versionen des JDK.  Beachten Sie auch, dass f√ºr den verwendeten Gradle 5 mindestens JDK 8 erforderlich ist. <br><br><h1>  Starten </h1><br>  Ich empfehle, Anwendungen in der Reihenfolge zu starten, in der sie in diesem Artikel beschrieben sind.  Wenn Sie Intellij IDEA mit aktiviertem Dashboard ausf√ºhren verwenden, sollten Sie Folgendes erhalten: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7h/yb/t0/7hybt0ljfcfnrkckajkikwctj-g.png"></div><br><h1>  Fazit </h1><br>  Der Artikel untersuchte ein Beispiel f√ºr eine Microservice-Architektur auf dem aktuellen Technologie-Stack in der Java-Welt, seinen Hauptkomponenten und einigen Funktionen.  Ich hoffe f√ºr jemanden wird das Material n√ºtzlich sein.  Danke f√ºr die Aufmerksamkeit! <br><br><h1>  Referenzen </h1><br><ul><li>  Quellcode des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">GitHub-</a> Projekts </li><li>  Chris Richardson <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Microservice Artikel</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Ein Artikel √ºber</a> Martin Fowlers <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Microservices</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Leitfaden f√ºr</a> Martin Fowler Microservices </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de431474/">https://habr.com/ru/post/de431474/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de431460/index.html">"Testerkalender" f√ºr November. Angemessene Paartests</a></li>
<li><a href="../de431462/index.html">Wie wir einen Buchscanner f√ºr Schiffe gemacht haben</a></li>
<li><a href="../de431466/index.html">So stoppen Sie das Streben nach Spitzenleistungen und erreichen maximale Produktivit√§t</a></li>
<li><a href="../de431468/index.html">Eine praktische Implementierung des Schaltgenerators mit Verilog HDL</a></li>
<li><a href="../de431470/index.html">Dies k√∂nnen Sie (Computer). Eine Geschichte √ºber eine vergessene TV-Show</a></li>
<li><a href="../de431478/index.html">Konferenz von Roskomnadzor "Schutz personenbezogener Daten"</a></li>
<li><a href="../de431480/index.html">Magento hat eine neue Hauptplattform ver√∂ffentlicht - 2.3.0 GA</a></li>
<li><a href="../de431482/index.html">Und du, Yota ...</a></li>
<li><a href="../de431486/index.html">Unsichtbare Fliegen: Eine neue Methode zur Untersuchung des Nervensystems durch Gewebedepigmentierung</a></li>
<li><a href="../de431488/index.html">Klangmodulation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>