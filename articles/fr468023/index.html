<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🏫 😖 🧕🏽 L'intelligence artificielle dans le jeu de combat Shadow Fight 3 👆 👨🏾‍🎓 🥛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les concepteurs de jeux sont régulièrement confrontés au défi de créer une IA intéressante. Ce processus peut être relativement simple ou extrêmement ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'intelligence artificielle dans le jeu de combat Shadow Fight 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/banzai/blog/468023/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/lq/y9/71/lqy971j1var5p0ii8pswvtscth0.jpeg"></a> <br><br>  Les concepteurs de jeux sont régulièrement confrontés au défi de créer une IA intéressante.  Ce processus peut être relativement simple ou extrêmement complexe, selon les besoins du projet et les objectifs que vous poursuivez.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le</a> concepteur de jeu senior de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Banzai Games</a> , Mikhail Dragovalovskiy, a parlé de son expérience de travail sur l'IA pour le célèbre jeu de combat mobile Shadow Fight 3. <br><a name="habracut"></a><br><h3>  <b>Différence entre SF3 et la plupart des jeux de combat</b> </h3><br>  La série <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shadow Fight a</a> été immédiatement créée avec un certain nombre de fonctionnalités qui la distinguent de nombreux jeux de combat: <br><br><ul><li>  <b>La présence d'autoblocs.</b>  Si le personnage se déplace simplement et n'attaque pas, il bloque automatiquement toute attaque normale de l'ennemi; </li><li>  <b>Rythme et animations plus lents.</b>  Misez sur la composante tactique: le joueur doit avoir le temps de comprendre quel type de coup l'ennemi inflige et quelle attaque choisir pour réussir sa contre-attaque.  Cela nous a permis de donner au joueur la possibilité d'envisager des animations que nous essayons de rendre aussi belles et physiques que possible; </li><li>  <b>Collisions honnêtes.</b>  Cela crée des situations très cool dans lesquelles un personnage échappe magnifiquement à l'attaque du second et frappe en réponse, et grâce à des animations fluides, le joueur parvient à tout considérer; </li><li>  <b>Forme d'ombre.</b>  Lorsqu'une échelle spéciale est remplie, le joueur peut entrer dans la forme d'ombre et passer plusieurs tours spectaculaires qui traversent le bloc de l'adversaire </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/850/057/658/85005765836621306ec499978f25a54a.gif" alt="image"></div><br><h3>  AI dans les jeux précédents de la série </h3><br>  Nous avions déjà travaillé sur l'IA dans notre précédent jeu de combat - Shadow Fight 2, mais en raison de la transition vers la 3D, de l'apparition de collisions entre les joueurs et de l'ajout d'une forme d'ombre, nous n'avons pu transférer qu'une partie de la logique de l'IA, et le reste a dû être recréé. <br><br><h3>  Où commencer à travailler sur l'IA? </h3><br>  Si vous ne créez pas de bot en utilisant l'apprentissage automatique, je distinguerais deux approches de capitaine: <br><br><ol><li>  Faites un bot faible, puis renforcez-vous au niveau souhaité avec de nouvelles fonctionnalités; </li><li>  Faites un robot invincible puis affaiblissez. </li></ol><br>  La deuxième option semble très romantique: il semble que vous êtes plus intelligent que tout le monde et que vous créez une IA cool qui plie les joueurs, puis réduit heureusement la complexité du bot.  Du point de vue du développement, cela peut être plus pratique, car  vous pouvez réfléchir à l'avance à toutes les caractéristiques du comportement du bot dont vous avez besoin et imaginer pleinement son comportement final. <br><br>  Bien sûr, nous avons choisi cette option, bien que nous nous soyons ensuite rendu compte que tout n'était pas si simple: avec notre équilibre d'animations, de blocs automatiques et une variété de compétences, vous pouvez presque toujours trouver les tactiques et les abus nécessaires qui vous permettent de vaincre l'IA avec une compétence élevée.  Nous ne l'avons pas compris tout de suite, mais seulement lorsque nous avons correctement mesuré le taux de victoire des joueurs à différentes étapes du jeu.  Et ce, malgré le fait que pour de nombreuses personnes, à en juger par leurs commentaires sur le jeu, le bot était vraiment invincible. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ss/ka/ew/sskaewr7co7yu6-fblz5dhflua8.gif" alt="image"></div><br><h3>  <b>Comment fonctionne notre IA?</b> </h3><br>  <b>Déclencheurs ou règles de conduite</b> <br><br><ul><li>  Il est basé sur les règles selon lesquelles le bot effectue des actions aléatoires.  Nous appelons ce système de déclencheurs de règles.  Par exemple: </li><li>  Le bot regarde la distance entre lui-même et le joueur et ne sélectionne que les coups qu'il peut frapper, puis en délivre un au hasard parmi ces coups; </li><li>  Le bot ne spamme pas en lançant des armes; </li><li>  Le bot pénètre dans le front avec les armes de lancement de l'ennemi, puis commence à échapper à coup sûr pendant un certain temps; </li><li>  Et un tas de choses qu'un bot devrait ou ne devrait pas faire ... </li></ul><br>  Si vous lâchez un tel bot contre un débutant, avec un niveau de pompage égal, le résultat dépendra des armes avec lesquelles les adversaires sont armés.  Qui est plus rapide que l'animation, il gagnera.  Parce que, en fait, tous les deux appuient sur tous les boutons, sauf que le bot le fait un peu plus de manière significative. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e9/63c/ab4/9e963cab4827b2cefc8ad89e3c1e6e24.gif" alt="image"></div><br>  <b>Prise de décision</b> <br><br>  L'étape logique pour améliorer l'IA est de réduire le caractère aléatoire et d'ajouter un système de prise de décision qui fera passer le bot à la victoire.  Pour ce faire, vous devez comprendre quelles décisions sont bonnes dans quelles situations.  Pour les combats, deux situations se produisent tout le temps: <br><br><ol><li>  L'ennemi attend; </li><li>  L'ennemi attaque. </li></ol><br>  Il existe également deux solutions: <br><br><ol><li>  Besoin de battre lorsqu'il est garanti de frapper; </li><li>  Vous devez bloquer quand ils vous frappent et vous ne pouvez pas contre-attaquer. </li></ol><br>  Il s'avère que pour la victoire, l'IA doit interrompre les attaques ennemies avec ses contre-attaques, ou bloquer si elle ne peut pas les interrompre. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8a/814/ba1/c8a814ba1826ebdc8b2b20f6bed95004.gif" alt="image"></div><br>  Nous avons pris deux groupes de décisions que le bot prend: l'un - si l'ennemi est debout, l'autre - si l'ennemi attaque.  Afin que l'IA sache exactement quoi contrer, nous avons créé des tables de collision. <br><br>  <b>Tables de collision</b> <br><br>  Rappelez-vous comment le docteur Strange a regardé tous les résultats possibles de la bataille avec Thanos?  De même, les tables de collision fonctionnent comme ceci: l'ordinateur pré-calcule les résultats pour chaque animation d'attaque dans le jeu à chaque distance possible. <br><br>  Si plus en détail: on lance un coup avec une épée et en même temps un coup avec un katana, puis on regarde qui va frapper qui.  Nous faisons cette procédure pour tous les coups du jeu, à toutes les distances et avec des retards dans un nombre différent d'images (j'ai lancé un coup avec une épée, et l'ennemi à travers N images - une frappe de katana).  Tous les résultats sont enregistrés dans des tableaux.  Nous effectuons une procédure similaire avant chaque mise à jour et mettons les fichiers résultants après un algorithme de compression difficile sous la forme finie dans la build afin de ne pas consommer les ressources de l'appareil lors de l'exécution.  Le joueur dans le client a déjà une liste de tous les résultats, ce qui signifie que l'IA sait quel coup peut contrer n'importe quel coup du joueur à une distance spécifique, ou comprendre que la meilleure façon pour le moment est de bloquer l'attaque. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c65/37a/d84/c6537ad846df2cab45d2221eee8ff933.gif" alt="image"></div><br>  En conséquence, l'IA répond efficacement aux actions des joueurs.  Autrement dit, ils ont contré les contre-attaques.  Maintenant, vous devez apprendre au bot à attaquer de manière optimale, plutôt que des coups aléatoires. <br><br>  <b>Le choix de la distance et la bonne grève</b> <br><br>  Un lecteur attentif et intelligent dira: «Arrêtez !!!  Pourquoi même vous attaquer si l'ennemi est toujours dans le bloc automatique?  Nous devons attendre le coup de l’ennemi et le punir d’un coup rapide, ce qui interrompra son attaque! »  Oui, c'est vrai, mais un bot qui ne bouge pas et n'attaque pas sans les actions des joueurs a l'air au moins étrange.  L'IA doit pouvoir choisir des coups efficaces pour lancer une attaque, même si la stratégie optimale consiste à jouer à partir de contre-attaques.  Pour ce faire, nous avons développé un système de choix des meilleures distances et frappes. <br><br>  Comme nous le pensions: le joueur utilise le plus souvent plusieurs coups de poing favoris, ce qui signifie que le bot effectuera spécifiquement les attaques qui, à une distance sélectionnée, ne peuvent pas être interrompues par des coups de poing typiques du joueur.  Pour ce faire, nous: <br><br><ul><li>  Nous collectons des statistiques de tous les coups du joueur; </li><li>  Nous regardons dans quelle mesure nous avons les contre-attaques les plus efficaces contre ses attaques typiques; </li><li>  Nous passons cette distance au bot et le faisons rester dessus pendant toute la bataille. </li></ul><br>  En théorie, cela semble cool, mais dans la pratique, cela s'est avéré moins bon: les joueurs restent rarement inactifs - ils appuient presque toujours sur les boutons et sur le bot, de sorte que le bot est plus souvent guidé par le système de prise de décision basé sur les attaques du joueur, au lieu de prendre l'initiative.  Donc, choisir la bonne frappe ne fonctionne que contre les joueurs passifs, mais choisir la meilleure distance a amélioré les contre-attaques - elles sont devenues plus diversifiées, car  le bot a plus de choix. <br><br>  A ce stade, le bot est déjà assez efficace: il sait commencer au mieux son attaque, il sait quand contre-attaquer et quand bloquer.  Ensuite, nous parlerons des systèmes qui vous permettent de définir le niveau de complexité requis et d'affaiblir ou de renforcer le bot. <br><br>  <b>Ressentiment et pardon</b> <br><br>  Il s'agit d'un concept intéressant qui sous-tend notre système de bilan.  Grâce à lui, nous créons un niveau de complexité suffisant pour les débutants et les professionnels, tout en motivant le joueur à utiliser différents coups, ce qui augmente l'intérêt et le divertissement du jeu. <br><br>  L'essence du concept réside dans le nom: le bot s'offusque des coups du joueur, que le joueur répète de temps en temps.  Le ressentiment est un compteur qui réduit les chances de prendre une décision sous-optimale et augmente les chances que l'IA mène une contre-attaque parfaite. <br><br>  De l'autre côté de l'échelle se trouve le pardon - le bot commence à augmenter les chances de choisir des solutions non optimales et à réduire les chances d'une contre-attaque si le joueur arrête le spam et passe à l'utilisation d'autres hits. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e76/3f7/876/e763f78764a508e3d41aae5c3f311061.gif" alt="image"></div><br>  Si nous voulons créer un bot complexe, nous réduisons la vitesse du pardon et fixons également un niveau élevé de ressentiment de départ, si nous voulons créer un bot faible, l'inverse est vrai. <br><br>  <b>Retard</b> <br><br>  Chaque bot dans SF3 a un retard dans la prise de décision.  Il s'agit d'un paramètre qui oblige le bot à suspendre N images avant de choisir une option d'action.  Une chose utile - vous permet de créer l'apparence que votre adversaire pense.  Plus le bot que nous voulons faire est simple, plus nous lui mettons de retard. <br><br>  <b>Vérification de l'état</b> <br><br>  Pour rendre certaines parties du jeu plus émotionnelles, nous utilisons un contrôle sur les états et les relations des différentes variables du jeu. <br><br>  Nous pouvons forcer certains bots à ne pas lancer d'armes à certaines distances ou à réduire la vitesse de pardon si un joueur a plus de points de vie qu'un bot, ou rendre l'IA plus agressive si elle a peu de points de vie. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50e/74e/a79/50e74ea792b37131215e0351aa9157a3.gif" alt="image"></div><br>  En général, il s'agit d'un module complémentaire que nous utilisons pour générer des situations dans lesquelles le bot change radicalement son comportement et son efficacité.  Si nécessaire, nous restreignons certaines actions du bot dans diverses situations, par exemple, il est plus difficile pour un bot de lancer que pour un joueur, sinon le joueur ne pourra jamais lancer un bot, car  les distances auxquelles le lancer peut être appliqué seraient les mêmes, et le bot aurait juste le temps de commencer son animation plus tôt. <br><br>  Sur la base de tous les mécanismes ci-dessus, nous avons créé 9 préréglages de base de l'IA que nous utilisons dans différentes situations et sections du jeu.  Cette approche vous permet de modifier l'équilibre par point et de mesurer les changements. <br><br><h3>  <b>Résultat</b> </h3><br>  Le processus de création de tactiques de bot a été long.  Nous avons introduit ces fonctionnalités progressivement, donc parfois nos joueurs ont souffert, et après eux, nous avons souffert, en lisant leurs critiques et leurs malédictions.  Lorsque nous avons téléchargé les dernières versions des modifications, le flux de critiques négatives concernant le comportement des opposants s'est arrêté, ce dont nous sommes très fiers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bad/91e/018/bad91e01899935cd42bd81ee4e28826e.gif" alt="image"></div><br>  Notre expérience montre que de nouvelles améliorations du bot avec l'approche actuelle ne donnent pas une augmentation tangible de la qualité.  Par conséquent, nous avons commencé à travailler sur un réseau neuronal qui simulera les actions d'un joueur. <br><br>  Plusieurs éléments nous poussent à prendre cette décision: <br><br><ol><li>  Nous développons un nouveau jeu de combat PvP - Shadow Fight: Arena.  Sa caractéristique est des héros avec des tactiques très différentes avec des capacités et des mécanismes différents.  Faire un bot réaliste dans ces conditions est beaucoup plus difficile que dans le cas de SF3; </li><li>  Nous avons déjà une expérience positive de l'utilisation des réseaux de neurones pour résoudre les problèmes d'animation dans notre produit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cascadeur</a> .  Il s'agit d'un programme pour créer des animations réalistes que nous utilisons pour tous nos jeux; </li><li>  Nous voulons réunir une équipe de spécialistes ML compétents afin d'augmenter encore notre expertise dans ce domaine et l'utiliser pour améliorer Cascadeur et nos jeux. </li></ol><br>  <i>L'équipe de Banzai Games a besoin d'un chercheur en apprentissage profond.</i>  <i>En savoir plus sur l'offre d'emploi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468023/">https://habr.com/ru/post/fr468023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468013/index.html">Un moyen simple et sûr d'automatiser les déploiements canaris avec Helm</a></li>
<li><a href="../fr468015/index.html">Ce que l'on sait actuellement sur ITIL 4 et qui utilise déjà la nouvelle bibliothèque</a></li>
<li><a href="../fr468017/index.html">La monade peut-être via async / attendre en C # (sans tâche ov!)</a></li>
<li><a href="../fr468019/index.html">Développement de sites Web sur WebAssembly avec NetCore 3 et Blazor</a></li>
<li><a href="../fr468021/index.html">PHP, combien d'abstraction pour les gens?</a></li>
<li><a href="../fr468025/index.html">Comment configurer SNI dans Zimbra OSE?</a></li>
<li><a href="../fr468027/index.html">Méthodes d'optimisation de code pour Redd. Partie 2: mémoire non cache et fonctionnement sur bus parallèle</a></li>
<li><a href="../fr468031/index.html">Nous portons un jeu multijoueur de C ++ sur le Web avec Cheerp, WebRTC et Firebase</a></li>
<li><a href="../fr468039/index.html">Meetup Moscou Kubernetes # 6 à Acronis (Fiztehpark) 10/03/2019</a></li>
<li><a href="../fr468041/index.html">Annonce de l'interface Web de Kubernetes Web View (et un bref aperçu des autres interfaces Web pour Kubernetes)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>