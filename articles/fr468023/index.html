<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüè´ üòñ üßïüèΩ L'intelligence artificielle dans le jeu de combat Shadow Fight 3 üëÜ üë®üèæ‚Äçüéì ü•õ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les concepteurs de jeux sont r√©guli√®rement confront√©s au d√©fi de cr√©er une IA int√©ressante. Ce processus peut √™tre relativement simple ou extr√™mement ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>L'intelligence artificielle dans le jeu de combat Shadow Fight 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/banzai/blog/468023/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/lq/y9/71/lqy971j1var5p0ii8pswvtscth0.jpeg"></a> <br><br>  Les concepteurs de jeux sont r√©guli√®rement confront√©s au d√©fi de cr√©er une IA int√©ressante.  Ce processus peut √™tre relativement simple ou extr√™mement complexe, selon les besoins du projet et les objectifs que vous poursuivez.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Le</a> concepteur de jeu senior de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Banzai Games</a> , Mikhail Dragovalovskiy, a parl√© de son exp√©rience de travail sur l'IA pour le c√©l√®bre jeu de combat mobile Shadow Fight 3. <br><a name="habracut"></a><br><h3>  <b>Diff√©rence entre SF3 et la plupart des jeux de combat</b> </h3><br>  La s√©rie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shadow Fight a</a> √©t√© imm√©diatement cr√©√©e avec un certain nombre de fonctionnalit√©s qui la distinguent de nombreux jeux de combat: <br><br><ul><li>  <b>La pr√©sence d'autoblocs.</b>  Si le personnage se d√©place simplement et n'attaque pas, il bloque automatiquement toute attaque normale de l'ennemi; </li><li>  <b>Rythme et animations plus lents.</b>  Misez sur la composante tactique: le joueur doit avoir le temps de comprendre quel type de coup l'ennemi inflige et quelle attaque choisir pour r√©ussir sa contre-attaque.  Cela nous a permis de donner au joueur la possibilit√© d'envisager des animations que nous essayons de rendre aussi belles et physiques que possible; </li><li>  <b>Collisions honn√™tes.</b>  Cela cr√©e des situations tr√®s cool dans lesquelles un personnage √©chappe magnifiquement √† l'attaque du second et frappe en r√©ponse, et gr√¢ce √† des animations fluides, le joueur parvient √† tout consid√©rer; </li><li>  <b>Forme d'ombre.</b>  Lorsqu'une √©chelle sp√©ciale est remplie, le joueur peut entrer dans la forme d'ombre et passer plusieurs tours spectaculaires qui traversent le bloc de l'adversaire </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/850/057/658/85005765836621306ec499978f25a54a.gif" alt="image"></div><br><h3>  AI dans les jeux pr√©c√©dents de la s√©rie </h3><br>  Nous avions d√©j√† travaill√© sur l'IA dans notre pr√©c√©dent jeu de combat - Shadow Fight 2, mais en raison de la transition vers la 3D, de l'apparition de collisions entre les joueurs et de l'ajout d'une forme d'ombre, nous n'avons pu transf√©rer qu'une partie de la logique de l'IA, et le reste a d√ª √™tre recr√©√©. <br><br><h3>  O√π commencer √† travailler sur l'IA? </h3><br>  Si vous ne cr√©ez pas de bot en utilisant l'apprentissage automatique, je distinguerais deux approches de capitaine: <br><br><ol><li>  Faites un bot faible, puis renforcez-vous au niveau souhait√© avec de nouvelles fonctionnalit√©s; </li><li>  Faites un robot invincible puis affaiblissez. </li></ol><br>  La deuxi√®me option semble tr√®s romantique: il semble que vous √™tes plus intelligent que tout le monde et que vous cr√©ez une IA cool qui plie les joueurs, puis r√©duit heureusement la complexit√© du bot.  Du point de vue du d√©veloppement, cela peut √™tre plus pratique, car  vous pouvez r√©fl√©chir √† l'avance √† toutes les caract√©ristiques du comportement du bot dont vous avez besoin et imaginer pleinement son comportement final. <br><br>  Bien s√ªr, nous avons choisi cette option, bien que nous nous soyons ensuite rendu compte que tout n'√©tait pas si simple: avec notre √©quilibre d'animations, de blocs automatiques et une vari√©t√© de comp√©tences, vous pouvez presque toujours trouver les tactiques et les abus n√©cessaires qui vous permettent de vaincre l'IA avec une comp√©tence √©lev√©e.  Nous ne l'avons pas compris tout de suite, mais seulement lorsque nous avons correctement mesur√© le taux de victoire des joueurs √† diff√©rentes √©tapes du jeu.  Et ce, malgr√© le fait que pour de nombreuses personnes, √† en juger par leurs commentaires sur le jeu, le bot √©tait vraiment invincible. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ss/ka/ew/sskaewr7co7yu6-fblz5dhflua8.gif" alt="image"></div><br><h3>  <b>Comment fonctionne notre IA?</b> </h3><br>  <b>D√©clencheurs ou r√®gles de conduite</b> <br><br><ul><li>  Il est bas√© sur les r√®gles selon lesquelles le bot effectue des actions al√©atoires.  Nous appelons ce syst√®me de d√©clencheurs de r√®gles.  Par exemple: </li><li>  Le bot regarde la distance entre lui-m√™me et le joueur et ne s√©lectionne que les coups qu'il peut frapper, puis en d√©livre un au hasard parmi ces coups; </li><li>  Le bot ne spamme pas en lan√ßant des armes; </li><li>  Le bot p√©n√®tre dans le front avec les armes de lancement de l'ennemi, puis commence √† √©chapper √† coup s√ªr pendant un certain temps; </li><li>  Et un tas de choses qu'un bot devrait ou ne devrait pas faire ... </li></ul><br>  Si vous l√¢chez un tel bot contre un d√©butant, avec un niveau de pompage √©gal, le r√©sultat d√©pendra des armes avec lesquelles les adversaires sont arm√©s.  Qui est plus rapide que l'animation, il gagnera.  Parce que, en fait, tous les deux appuient sur tous les boutons, sauf que le bot le fait un peu plus de mani√®re significative. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9e9/63c/ab4/9e963cab4827b2cefc8ad89e3c1e6e24.gif" alt="image"></div><br>  <b>Prise de d√©cision</b> <br><br>  L'√©tape logique pour am√©liorer l'IA est de r√©duire le caract√®re al√©atoire et d'ajouter un syst√®me de prise de d√©cision qui fera passer le bot √† la victoire.  Pour ce faire, vous devez comprendre quelles d√©cisions sont bonnes dans quelles situations.  Pour les combats, deux situations se produisent tout le temps: <br><br><ol><li>  L'ennemi attend; </li><li>  L'ennemi attaque. </li></ol><br>  Il existe √©galement deux solutions: <br><br><ol><li>  Besoin de battre lorsqu'il est garanti de frapper; </li><li>  Vous devez bloquer quand ils vous frappent et vous ne pouvez pas contre-attaquer. </li></ol><br>  Il s'av√®re que pour la victoire, l'IA doit interrompre les attaques ennemies avec ses contre-attaques, ou bloquer si elle ne peut pas les interrompre. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8a/814/ba1/c8a814ba1826ebdc8b2b20f6bed95004.gif" alt="image"></div><br>  Nous avons pris deux groupes de d√©cisions que le bot prend: l'un - si l'ennemi est debout, l'autre - si l'ennemi attaque.  Afin que l'IA sache exactement quoi contrer, nous avons cr√©√© des tables de collision. <br><br>  <b>Tables de collision</b> <br><br>  Rappelez-vous comment le docteur Strange a regard√© tous les r√©sultats possibles de la bataille avec Thanos?  De m√™me, les tables de collision fonctionnent comme ceci: l'ordinateur pr√©-calcule les r√©sultats pour chaque animation d'attaque dans le jeu √† chaque distance possible. <br><br>  Si plus en d√©tail: on lance un coup avec une √©p√©e et en m√™me temps un coup avec un katana, puis on regarde qui va frapper qui.  Nous faisons cette proc√©dure pour tous les coups du jeu, √† toutes les distances et avec des retards dans un nombre diff√©rent d'images (j'ai lanc√© un coup avec une √©p√©e, et l'ennemi √† travers N images - une frappe de katana).  Tous les r√©sultats sont enregistr√©s dans des tableaux.  Nous effectuons une proc√©dure similaire avant chaque mise √† jour et mettons les fichiers r√©sultants apr√®s un algorithme de compression difficile sous la forme finie dans la build afin de ne pas consommer les ressources de l'appareil lors de l'ex√©cution.  Le joueur dans le client a d√©j√† une liste de tous les r√©sultats, ce qui signifie que l'IA sait quel coup peut contrer n'importe quel coup du joueur √† une distance sp√©cifique, ou comprendre que la meilleure fa√ßon pour le moment est de bloquer l'attaque. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c65/37a/d84/c6537ad846df2cab45d2221eee8ff933.gif" alt="image"></div><br>  En cons√©quence, l'IA r√©pond efficacement aux actions des joueurs.  Autrement dit, ils ont contr√© les contre-attaques.  Maintenant, vous devez apprendre au bot √† attaquer de mani√®re optimale, plut√¥t que des coups al√©atoires. <br><br>  <b>Le choix de la distance et la bonne gr√®ve</b> <br><br>  Un lecteur attentif et intelligent dira: ¬´Arr√™tez !!!  Pourquoi m√™me vous attaquer si l'ennemi est toujours dans le bloc automatique?  Nous devons attendre le coup de l‚Äôennemi et le punir d‚Äôun coup rapide, ce qui interrompra son attaque! ¬ª  Oui, c'est vrai, mais un bot qui ne bouge pas et n'attaque pas sans les actions des joueurs a l'air au moins √©trange.  L'IA doit pouvoir choisir des coups efficaces pour lancer une attaque, m√™me si la strat√©gie optimale consiste √† jouer √† partir de contre-attaques.  Pour ce faire, nous avons d√©velopp√© un syst√®me de choix des meilleures distances et frappes. <br><br>  Comme nous le pensions: le joueur utilise le plus souvent plusieurs coups de poing favoris, ce qui signifie que le bot effectuera sp√©cifiquement les attaques qui, √† une distance s√©lectionn√©e, ne peuvent pas √™tre interrompues par des coups de poing typiques du joueur.  Pour ce faire, nous: <br><br><ul><li>  Nous collectons des statistiques de tous les coups du joueur; </li><li>  Nous regardons dans quelle mesure nous avons les contre-attaques les plus efficaces contre ses attaques typiques; </li><li>  Nous passons cette distance au bot et le faisons rester dessus pendant toute la bataille. </li></ul><br>  En th√©orie, cela semble cool, mais dans la pratique, cela s'est av√©r√© moins bon: les joueurs restent rarement inactifs - ils appuient presque toujours sur les boutons et sur le bot, de sorte que le bot est plus souvent guid√© par le syst√®me de prise de d√©cision bas√© sur les attaques du joueur, au lieu de prendre l'initiative.  Donc, choisir la bonne frappe ne fonctionne que contre les joueurs passifs, mais choisir la meilleure distance a am√©lior√© les contre-attaques - elles sont devenues plus diversifi√©es, car  le bot a plus de choix. <br><br>  A ce stade, le bot est d√©j√† assez efficace: il sait commencer au mieux son attaque, il sait quand contre-attaquer et quand bloquer.  Ensuite, nous parlerons des syst√®mes qui vous permettent de d√©finir le niveau de complexit√© requis et d'affaiblir ou de renforcer le bot. <br><br>  <b>Ressentiment et pardon</b> <br><br>  Il s'agit d'un concept int√©ressant qui sous-tend notre syst√®me de bilan.  Gr√¢ce √† lui, nous cr√©ons un niveau de complexit√© suffisant pour les d√©butants et les professionnels, tout en motivant le joueur √† utiliser diff√©rents coups, ce qui augmente l'int√©r√™t et le divertissement du jeu. <br><br>  L'essence du concept r√©side dans le nom: le bot s'offusque des coups du joueur, que le joueur r√©p√®te de temps en temps.  Le ressentiment est un compteur qui r√©duit les chances de prendre une d√©cision sous-optimale et augmente les chances que l'IA m√®ne une contre-attaque parfaite. <br><br>  De l'autre c√¥t√© de l'√©chelle se trouve le pardon - le bot commence √† augmenter les chances de choisir des solutions non optimales et √† r√©duire les chances d'une contre-attaque si le joueur arr√™te le spam et passe √† l'utilisation d'autres hits. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e76/3f7/876/e763f78764a508e3d41aae5c3f311061.gif" alt="image"></div><br>  Si nous voulons cr√©er un bot complexe, nous r√©duisons la vitesse du pardon et fixons √©galement un niveau √©lev√© de ressentiment de d√©part, si nous voulons cr√©er un bot faible, l'inverse est vrai. <br><br>  <b>Retard</b> <br><br>  Chaque bot dans SF3 a un retard dans la prise de d√©cision.  Il s'agit d'un param√®tre qui oblige le bot √† suspendre N images avant de choisir une option d'action.  Une chose utile - vous permet de cr√©er l'apparence que votre adversaire pense.  Plus le bot que nous voulons faire est simple, plus nous lui mettons de retard. <br><br>  <b>V√©rification de l'√©tat</b> <br><br>  Pour rendre certaines parties du jeu plus √©motionnelles, nous utilisons un contr√¥le sur les √©tats et les relations des diff√©rentes variables du jeu. <br><br>  Nous pouvons forcer certains bots √† ne pas lancer d'armes √† certaines distances ou √† r√©duire la vitesse de pardon si un joueur a plus de points de vie qu'un bot, ou rendre l'IA plus agressive si elle a peu de points de vie. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50e/74e/a79/50e74ea792b37131215e0351aa9157a3.gif" alt="image"></div><br>  En g√©n√©ral, il s'agit d'un module compl√©mentaire que nous utilisons pour g√©n√©rer des situations dans lesquelles le bot change radicalement son comportement et son efficacit√©.  Si n√©cessaire, nous restreignons certaines actions du bot dans diverses situations, par exemple, il est plus difficile pour un bot de lancer que pour un joueur, sinon le joueur ne pourra jamais lancer un bot, car  les distances auxquelles le lancer peut √™tre appliqu√© seraient les m√™mes, et le bot aurait juste le temps de commencer son animation plus t√¥t. <br><br>  Sur la base de tous les m√©canismes ci-dessus, nous avons cr√©√© 9 pr√©r√©glages de base de l'IA que nous utilisons dans diff√©rentes situations et sections du jeu.  Cette approche vous permet de modifier l'√©quilibre par point et de mesurer les changements. <br><br><h3>  <b>R√©sultat</b> </h3><br>  Le processus de cr√©ation de tactiques de bot a √©t√© long.  Nous avons introduit ces fonctionnalit√©s progressivement, donc parfois nos joueurs ont souffert, et apr√®s eux, nous avons souffert, en lisant leurs critiques et leurs mal√©dictions.  Lorsque nous avons t√©l√©charg√© les derni√®res versions des modifications, le flux de critiques n√©gatives concernant le comportement des opposants s'est arr√™t√©, ce dont nous sommes tr√®s fiers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bad/91e/018/bad91e01899935cd42bd81ee4e28826e.gif" alt="image"></div><br>  Notre exp√©rience montre que de nouvelles am√©liorations du bot avec l'approche actuelle ne donnent pas une augmentation tangible de la qualit√©.  Par cons√©quent, nous avons commenc√© √† travailler sur un r√©seau neuronal qui simulera les actions d'un joueur. <br><br>  Plusieurs √©l√©ments nous poussent √† prendre cette d√©cision: <br><br><ol><li>  Nous d√©veloppons un nouveau jeu de combat PvP - Shadow Fight: Arena.  Sa caract√©ristique est des h√©ros avec des tactiques tr√®s diff√©rentes avec des capacit√©s et des m√©canismes diff√©rents.  Faire un bot r√©aliste dans ces conditions est beaucoup plus difficile que dans le cas de SF3; </li><li>  Nous avons d√©j√† une exp√©rience positive de l'utilisation des r√©seaux de neurones pour r√©soudre les probl√®mes d'animation dans notre produit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cascadeur</a> .  Il s'agit d'un programme pour cr√©er des animations r√©alistes que nous utilisons pour tous nos jeux; </li><li>  Nous voulons r√©unir une √©quipe de sp√©cialistes ML comp√©tents afin d'augmenter encore notre expertise dans ce domaine et l'utiliser pour am√©liorer Cascadeur et nos jeux. </li></ol><br>  <i>L'√©quipe de Banzai Games a besoin d'un chercheur en apprentissage profond.</i>  <i>En savoir plus sur l'offre d'emploi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468023/">https://habr.com/ru/post/fr468023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468013/index.html">Un moyen simple et s√ªr d'automatiser les d√©ploiements canaris avec Helm</a></li>
<li><a href="../fr468015/index.html">Ce que l'on sait actuellement sur ITIL 4 et qui utilise d√©j√† la nouvelle biblioth√®que</a></li>
<li><a href="../fr468017/index.html">La monade peut-√™tre via async / attendre en C # (sans t√¢che ov!)</a></li>
<li><a href="../fr468019/index.html">D√©veloppement de sites Web sur WebAssembly avec NetCore 3 et Blazor</a></li>
<li><a href="../fr468021/index.html">PHP, combien d'abstraction pour les gens?</a></li>
<li><a href="../fr468025/index.html">Comment configurer SNI dans Zimbra OSE?</a></li>
<li><a href="../fr468027/index.html">M√©thodes d'optimisation de code pour Redd. Partie 2: m√©moire non cache et fonctionnement sur bus parall√®le</a></li>
<li><a href="../fr468031/index.html">Nous portons un jeu multijoueur de C ++ sur le Web avec Cheerp, WebRTC et Firebase</a></li>
<li><a href="../fr468039/index.html">Meetup Moscou Kubernetes # 6 √† Acronis (Fiztehpark) 10/03/2019</a></li>
<li><a href="../fr468041/index.html">Annonce de l'interface Web de Kubernetes Web View (et un bref aper√ßu des autres interfaces Web pour Kubernetes)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>