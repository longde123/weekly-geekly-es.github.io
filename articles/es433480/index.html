<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚û°Ô∏è üë©‚Äç‚úàÔ∏è ü§≤ Holivarny historia sobre linter ‚õ∞Ô∏è üê∑ ‚èØÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Todos escribimos c√≥digo. Mucho c√≥digo. Por supuesto, hay errores. A veces es solo un c√≥digo torcido, y a veces el precio de un error es una nave espac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Holivarny historia sobre linter</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/433480/">  Todos escribimos c√≥digo.  Mucho c√≥digo.  Por supuesto, hay errores.  A veces es solo un c√≥digo torcido, y a veces el precio de un error es una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nave espacial</a> explotada.  Por supuesto, nadie hace jambas intencionales, todos intentan monitorear la calidad lo mejor que pueden, pero sin las herramientas de an√°lisis est√°tico es casi imposible asegurarse de que todo sea perfecto. <br><br>  Linters ayudan a llevar el c√≥digo a un estilo √∫nico y evitar errores.  Es cierto, solo si est√° listo para sufrir, y finalmente no descarta "pylint: disable", solo para retrasarlo.  Lo que deber√≠a ser un linter, y por qu√© Pylint no puede hacerlo, conoce a Nikita <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Sobolevn</a> , que entiende y ama tanto a los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">fan√°ticos</a> que incluso nombr√≥ a su compa√±√≠a para no molestarlos - wemake.services. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/56f/5cb/946/56f5cb9466bea0d6fd71b319f5165c2a.png" alt="imagen"><br><br>  A continuaci√≥n se muestra la versi√≥n de texto del informe sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Moscow Python Conf ++</a> sobre linters, c√≥mo hacerlo correctamente y c√≥mo no hacerlo.  La presentaci√≥n tuvo mucha interactividad, en l√≠nea y comunicaci√≥n con la audiencia.  El orador, en el camino, realiz√≥ encuestas y trat√≥ de convencer a la audiencia: observ√≥ la tendencia y, como en el debate, trat√≥ de igualar la proporci√≥n y cambiar la opini√≥n p√∫blica.  Algunas partes de las encuestas cayeron en descifrado, pero no todas, por lo que se adjunta un video para completar la imagen. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/7IVCOzL41Lk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h2>  ¬øPor qu√© necesitamos linters? <br></h2><br>  La tarea m√°s importante de linter es <strong>llevar el c√≥digo a la uniformidad</strong> .  Hay muchas opciones para escribir lo mismo en Python: ponga una coma aqu√≠ o all√°, olvide cerrar los corchetes o no lo olvide.  Cuando las personas escriben c√≥digo durante mucho tiempo, se convierte en una colcha de retazos de piezas dispares cosidas en diferentes momentos.  Es desagradable trabajar con una manta de este tipo, desalienta la lectura del c√≥digo, lo cual es muy malo. <br><br>  <strong>Linters hacen la vida m√°s f√°cil en una revisi√≥n</strong> .  Llego a la revisi√≥n del c√≥digo y pienso: ‚Äú¬°No quiero hacer esto!  ¬°Ahora habr√° espacios adicionales y otras tonter√≠as! ‚Äù  Me gustar√≠a que alguien m√°s preparara un buen c√≥digo, y despu√©s de eso apreciar√© las grandes cosas conceptuales. <br><br>  A veces miro el c√≥digo y pienso que todo est√° bien, y luego veo en alguna funci√≥n demasiadas variables o un error al que no le prest√© atenci√≥n.  La automatizaci√≥n encontrar√≠a este error, pero mir√©.  Para no caer en tales situaciones, utilizo el <strong>linter</strong> , <strong>encuentra todo lo que est√° oculto y es dif√≠cil de encontrar.</strong> <br><br><h2>  ¬øQu√© son las linters? </h2><br>  <strong>Los m√°s simples verifican solo el estilo</strong> , por ejemplo, <strong>Flake8</strong> .  Hasta cierto punto, tambi√©n negro, pero m√°s bien es un autoformer-linter.  <strong>Linters prueba la sem√°ntica m√°s dif√≠cil</strong> , y no solo la estil√≠stica: lo que haces, por qu√© y te <strong>pega</strong> en las manos si escribes con errores.  Un buen ejemplo es <strong>Pylint</strong> , que todos conocemos, usamos y amamos.  Llamo a estos linters - <strong>Mejores pr√°cticas</strong> .  El tercer tipo es la <strong>verificaci√≥n de tipo</strong> , estos linter est√°n un poco alejados.  La comprobaci√≥n de tipos en Python es nueva, ahora est√° siendo realizada por dos plataformas de la competencia: <strong>Mypy</strong> y <strong>Pyre</strong> . <br><br><h2>  ¬øC√≥mo usar linter? </h2><br>  No pretendo que linter sea una panacea y un reemplazo para todo.  Esto no es asi.  Linter: el primer paso de la pir√°mide, mediante el cual el c√≥digo entra en producci√≥n. <br><br>  Hay tres pasos en la pir√°mide: <br><br><ul><li>  <strong>Lanzar linter</strong> .  Es muy r√°pido y no necesita nada m√°s que el c√≥digo fuente: sin infraestructura, sin configuraci√≥n.  Verificaci√≥n: se aprob√≥ la primera <strong>verificaci√≥n de cordura</strong> ; todo est√° bien, estamos trabajando. </li><li>  <strong>Etapa de prueba</strong>  Este proceso es m√°s complicado y m√°s largo debido a errores que no son de c√≥digo.  Ya necesitaremos la configuraci√≥n correcta y completa de toda la aplicaci√≥n. </li><li>  <strong>Revisi√≥n de escenario</strong> . </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/77c/f40/e1c/77cf40e1cbfb54f312e98c7af63ac9d0.png"><br><br>  <b>Estos son los pasos necesarios</b> para que el c√≥digo entre en producci√≥n.  Si no realiz√≥ un paso, olvid√≥ algo o el revisor dijo que no funcionar√≠a, ver√° la inscripci√≥n: fall√≥: el c√≥digo incorrecto no entra en producci√≥n. <br><br><h3>  ¬øUtilizas un linter en el trabajo? </h3><br>  Si le preguntas a los desarrolladores de una empresa dif√≠cil, en la que trabajan los 7 d√≠as de la semana, si usan un linter, entonces resulta que al menos un tercio de ellos usan linters de manera muy estricta: <strong>CI cae, las verificaciones son severas</strong> .  El resto aplica aproximadamente linter <strong>al estilo de prueba</strong> , <strong>nunca</strong> y como un <strong>sistema de informes</strong> : inician el linter, generan un informe y ven lo mal que est√° todo.  Se usan linters, y eso es bueno.  En nuestra empresa, todo se construy√≥ con dureza: enlaces duros, muchas verificaciones, revisi√≥n de c√≥digo doble. <br><br><h3>  Revisi√≥n de c√≥digo <br></h3><br>  Los problemas surgen justo en esta etapa.  Este es el paso superior y m√°s dif√≠cil de la pir√°mide: la revisi√≥n del c√≥digo no puede automatizarse y, si es posible, conducir√° a la automatizaci√≥n de la escritura del c√≥digo.  Entonces los programadores no ser√°n necesarios. <br><br>  El proceso est√°ndar tiene este aspecto: el c√≥digo se revisa, encuentro errores y no quiero volver a cometerlos.  Por ejemplo, vi que el desarrollador capt√≥ BaseException: ‚ÄúNo hagas eso.  ¬°Por favor no atrapes! "  Despu√©s de 10 d√≠as, lo mismo.  Te recuerdo de nuevo: <br><br>  - <em>No capturamos BaseException.</em> <br>  " <em>Bien, lo entiendo".</em> <br><br>  Pasa un a√±o, el mismo error.  Llega un nuevo hombre, el mismo error.  Pienso: ¬øc√≥mo podemos automatizar todo para que la situaci√≥n no vuelva a suceder y solo se me ocurra: ‚Äú <strong>Vamos a cortar nuestra pelusa?</strong>  ¬ªCreemos un paquete abierto, coloquemos all√≠ todas las reglas que usamos en el trabajo y automaticemos la verificaci√≥n de reglas para que cada vez no escribamos a mano.  ¬°Automatizamos todo bien y de inmediato! <br><br>  Naturalmente, usted puede decir: " <strong>Ya existen linters confeccionados,</strong> funcionan, todos los usan, ¬øpor qu√© hacer los suyos?", Y tendr√° toda la raz√≥n, porque realmente hay linters.  Veamos cu√°les y qu√© hacen. <br><br><h3>  Pylint <br></h3><br>  En el encabezado " <strong>¬øPor qu√© no Pylint?"</strong>  "He escuchado esta pregunta muchas veces.  Le responder√© m√°s suavemente.  Pylint es una gran herramienta de estrella de rock para el c√≥digo Python, pero tiene caracter√≠sticas que no quiero ver en mi linter. <br><br>  <strong>Mezcla todo: controles estil√≠sticos, mejores pr√°cticas y controles de tipo</strong> .  La comprobaci√≥n de tipo de Pylint est√° poco desarrollada porque no hay informaci√≥n de tipo: intenta mostrarla de alguna manera, pero no funciona muy bien.  Por lo tanto, a menudo cuando escribo <code>model_name.some_property</code> en Django, puedo ver el error: "Lo siento, no existe esa propiedad, ¬°no puede usarla!"  Recuerdo que hay un complemento, lo instalo, luego uso Celery, tambi√©n comienza alg√∫n tipo de problema, instalo el complemento para Celery, uso otra biblioteca m√°gica y, como resultado, escribo en todas partes: "pylint: disable" ... No es eso lo que quiero obtener de linter. <br><br>  Otra caracter√≠stica oculta para el usuario es <strong>que Pylint tiene su propia implementaci√≥n del √°rbol de sintaxis abstracta en Python</strong> .  As√≠ es como se ve el c√≥digo cuando lo analiza y obtiene informaci√≥n sobre el √°rbol de nodos que conforman el c√≥digo.  Realmente no conf√≠o en mis propias implementaciones, porque siempre est√°n equivocadas. <br><br>  Adem√°s de Pylint, hay otras linters que tambi√©n hacen su trabajo. <br><br><h3>  Sonarquube <br></h3><br>  Una herramienta maravillosa, pero separada, que vive en alg√∫n lugar cercano a su proyecto. <br><br><ul><li>  <strong>SonarQube no podr√° ejecutarse con frecuencia</strong> : debe implementarse en alg√∫n lugar, mirar, monitorear, configurar. </li><li>  Est√° <strong>escrito en Java</strong> .  Si quieres arreglar tu linter para Python, escribir√°s c√≥digo en Java.  Creo que, conceptualmente, esto est√° mal: un desarrollador que pueda escribir en Python deber√≠a poder escribir c√≥digo para probar Python. </li></ul><br>  La compa√±√≠a que desarrolla SonarQube analiza espec√≠ficamente el concepto de desarrollo de productos.  Esto puede ser un problema. <br><br>  La ventaja de SonarQube es que tiene controles muy interesantes que muestran complejidad, posibles errores ocultos y errores.  Me gustan los cheques, los dejar√≠a y cambiar√≠a la plataforma. <br><br><h3>  Flake8 <br></h3><br>  Un linter maravilloso es muy simple, pero con un problema: <strong>hay pocas reglas</strong> por las cuales verifica qu√© tan bien est√° escrito el c√≥digo.  Al mismo tiempo, Flake8 tiene muchos complementos muy simples: el complemento m√≠nimo son 2 m√©todos que deben implementarse.  Pens√©: tomemos Flake8 como base y escribamos complementos, pero con nuestra comprensi√≥n de los beneficios para la empresa.  Y as√≠ lo hicimos. <br><br><h3>  El linter m√°s estricto del mundo. <br></h3><br>  Creamos una herramienta en la que recopilamos todo lo que creemos que es adecuado para Python y lo llamamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>wemake-python-styleguide</strong></a> .  El complemento se public√≥ p√∫blicamente, ya que creo que <strong>Open Source por defecto es una buena pr√°ctica</strong> .  Estoy profundamente convencido de que muchas herramientas se beneficiar√°n si se cargan en Open Source.  Para nuestro instrumento, se nos ocurri√≥ el eslogan: <strong>"¬°El linter m√°s estricto del mundo!"</strong> <br><br><blockquote>  La palabra clave en nuestro lenguaje es estricta, lo que significa dolor y sufrimiento. </blockquote><br>  Si usas el linter, y no te hace sufrir, as√≠ que te aferras a la cabeza: "¬øPor qu√© no te gusta, maldita sea?", Entonces este es un mal linter.  Omite errores, no supervisa suficientemente la calidad del c√≥digo y no lo necesitamos.  Necesitamos los m√°s estrictos del mundo, lo cual es muy importante.  Ahora tenemos alrededor de <strong>250 pruebas diferentes en ambas categor√≠as</strong> : estil√≠sticas y mejores pr√°cticas, pero sin verificaci√≥n de tipo.  Mypy est√° involucrado en eso, no le preocupamos de ninguna manera. <br><br>  Nuestro linter <strong>no</strong> tiene <strong>compromiso</strong> .  No tenemos reglas de la categor√≠a "No quisiera hacer esto, pero si realmente quieres, puedes hacerlo".  No, siempre hablamos con dureza, no lo hacemos porque es malo.  Entonces la gente viene y dice: "¬°Hay 2.5 casos de uso en los que esto es posible en principio!".  Si hay tales casos, escriba claramente que esta l√≠nea es permisible para que la interfaz la ignore, pero explique por qu√©.  Debe ser un comentario sobre por qu√© permitiste alguna pr√°ctica extra√±a y por qu√© lo est√°s haciendo.  Este enfoque tambi√©n es √∫til para documentar el c√≥digo. <br><br>  El linter m√°s estricto <strong>no requiere configuraci√≥n (WIP)</strong> .  Todav√≠a tenemos configuraciones, pero queremos deshacernos de ellas: al tener libertad, el usuario seguramente configurar√° para que el linter no funcione correctamente. <br><br><blockquote>  Una buena herramienta no necesita configuraci√≥n, tiene buenos valores predeterminados. </blockquote><br>  Con este enfoque, el c√≥digo ser√° coherente y funcionar√° igual para todos, al menos en teor√≠a.  Todav√≠a estamos trabajando en esto, y aunque hay configuraciones, puede usar nuestra herramienta y personalizarla usted mismo. <br><br><h2>  ¬øDe qui√©n dependemos? </h2><br>  De una gran cantidad de herramientas. <br><br><ul><li>  <strong>Escama 8</strong> . </li><li>  <strong>Eradicate</strong> es un complemento genial que encuentra fragmentos comentados en el c√≥digo y hace que los elimine, porque almacenar c√≥digo muerto en un proyecto es malo.  No se nos permite hacerlo. </li><li>  <strong>Isort</strong> es una herramienta que te obliga a ordenar las importaciones correctamente: en orden, sangr√≠a, comillas hermosas. </li><li>  <strong>Bandit</strong> es una gran herramienta para verificar la seguridad del c√≥digo de forma est√°tica.  Encuentra contrase√±as cableadas, uso torpe de <code>assert</code> en el c√≥digo, llama a <code>Popen</code> , <code>sys.exit</code> y dice que no se puede usar todo esto, pero si lo desea, le pide que escriba el motivo. </li><li>  Y m√°s de <strong>20 complementos</strong> que verifican corchetes, comillas y comillas. </li></ul><br><h2>  ¬øQu√© estamos comprobando? </h2><br>  Hay 4 grupos de reglas que usamos y aplicamos. <br><br>  <strong>La complejidad</strong> es el mayor problema.  No sabemos qu√© es la complejidad y no lo vemos en el c√≥digo.  Observamos el c√≥digo con el que trabajamos todos los d√≠as y parece que no es complicado: t√≥malo, l√©elo, todo funciona.  Esto no es asi.  El c√≥digo simple es un c√≥digo familiar.  La complejidad tiene criterios claros que probamos.  Sobre los criterios mismos, m√°s adelante.  Si el c√≥digo viola los criterios, entonces decimos: "El c√≥digo es complejo, ¬°reescribe!" <br><br>  <strong>Los nombres</strong> de las variables son un problema de programaci√≥n no resuelto.  Qui√©n leer√° cu√°ndo y en qu√© contexto no est√° claro.  Intentamos que los nombres sean lo m√°s coherentes y comprensibles posible, pero aunque lo intentamos, el problema a√∫n no se ha resuelto por completo. <br><br>  Por <strong>coherencia</strong> , tenemos una regla simple: escribir lo mismo en todas partes.  Si hay alg√∫n enfoque aprobado, √∫selo en todas partes.  No importa si te gusta o no, la consistencia es m√°s importante. <br><br>  Intentamos utilizar solo las <strong>mejores pr√°cticas.</strong>  Si sabemos que alguna pr√°ctica no es muy buena, entonces prohibimos su uso.  Si el desarrollador quiere usar pr√°cticas prohibidas, entonces esperamos argumentos de √©l: por qu√© y por qu√© aplicar.  Quiz√°s, durante el proceso de descripci√≥n, se entender√° por qu√© es malo. <br><br><h3>  ¬øQu√© es la complejidad? <br></h3><br>  La complejidad tiene m√©tricas espec√≠ficas que puede ver y decir si es dif√≠cil o no.  Hay muchos de ellos. <br><br>  <strong>Complejidad</strong> ciclom√°tica: la complejidad ciclom√°tica favorita de todos.  Encuentra en el c√≥digo una gran cantidad de estructuras anidadas <code>if</code> , <code>for</code> ejemplo, e indica demasiadas ramificaciones del c√≥digo y dificultades en la lectura.  Todo est√° mal con el c√≥digo incrustado: lees, lees, lees, volviste, le√≠ste, le√≠ste, saltaste y luego saltaste a otro ciclo.  Es imposible pasar de manera segura dicho c√≥digo de arriba a abajo. <br><br>  <strong>Argumentos, declaraciones y devoluciones.</strong>  Estas son m√©tricas cuantitativas: cu√°ntos argumentos hay en la funci√≥n o en el m√©todo, cu√°ntos est√°n dentro del cuerpo de esta funci√≥n o el m√©todo de declaraciones y retornos. <br><br>  <strong>La cohesi√≥n y el acoplamiento</strong> son m√©tricas populares de OOP.  <strong>La cohesi√≥n</strong> muestra la conexi√≥n de la clase interior.  Por ejemplo, hay una clase, y en el interior utilizas todos los m√©todos y propiedades, todo lo que declaraste.  Esta es una buena clase con alta conectividad en el interior.  <strong>El acoplamiento</strong> es cu√°nto est√°n conectadas las diferentes partes del sistema: m√≥dulos y clases.  Queremos lograr la m√°xima conectividad dentro de la clase y una conectividad m√≠nima afuera.  Entonces el sistema se mantiene f√°cilmente y funciona bien. <br><br>  <strong>Complejidad de Jones</strong> : tom√© prestada esta m√©trica, ¬°pero solo porque es una bomba!  La complejidad de Jones determina la complejidad de una l√≠nea: cuanto m√°s compleja es la l√≠nea, m√°s dif√≠cil es de entender, porque la memoria humana a corto plazo no puede procesar m√°s de 5-9 objetos a la vez.  Esta es la llamada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">billetera de Miller</a> . <br><br>  Observamos estas m√©tricas importantes y algunas otras, que son mucho m√°s grandes, y determinamos si el c√≥digo es adecuado o no.  A nuestro entender, la <strong>complejidad es una cascada</strong> . <br><br><h3>  Dificultad de la cascada <br></h3><br>  La dificultad comienza con el hecho de que escribimos la l√≠nea, y a√∫n es buena.  Pero luego viene el negocio y dice que los precios se han duplicado, y multiplicamos por 2. En este punto, Jones Complexity se vuelve loco y dice que ahora la l√≠nea es demasiado complicada, hay demasiada l√≥gica. <br><br>  Bueno, comenzamos una nueva variable, y el analizador de complejidad de funciones dice: <br><br>  - <em>No, eso no es as√≠, ahora hay demasiadas variables dentro de la funci√≥n.</em> <br><br>  Har√© un nuevo <strong>m√©todo</strong> y le pasar√© argumentos.  Ahora, comprobar el n√∫mero de argumentos de funci√≥n, o el n√∫mero de m√©todos dentro de la <strong>clase,</strong> dice que esto tambi√©n es imposible: la clase es demasiado compleja y debe dividirse en dos partes.  Se estrell√≥ al resaltar otra clase.  Ahora hay m√°s clases y todo est√° bien, pero al verificar la complejidad del <strong>m√≥dulo se</strong> informa que el m√≥dulo ahora es demasiado complejo y necesita ser refactorizado.  ¬øPor qu√©? <br><br>  Esto se llama sufrimiento.  Por eso digo que una pelusa deber√≠a hacerte sufrir.  Comenzamos multiplicando por 2 en una l√≠nea, y terminamos <strong>refactorizando todo el sistema</strong> .  Agregar un peque√±o fragmento de c√≥digo conduce a la refactorizaci√≥n de m√≥dulos completos, porque la complejidad se extiende como una cascada y cubre todo lo que es posible. <br><br>  <strong>"Necesita refactorizar"</strong> : esto hace que refactorice el c√≥digo.  No puede simplemente sentarse: "No toco este c√≥digo, parece funcionar".  No, un d√≠a cambiar√° el c√≥digo en otro lugar, y una cascada de complejidad inundar√° el m√≥dulo que no toc√≥ y tendr√° que refactorizarlo.  Creo que la refactorizaci√≥n es buena, y cuanto m√°s lo sea, m√°s estable y mejor funcionar√° su sistema.  <strong>¬°Y todo lo dem√°s es subjetivo!</strong> <br><br>  Ahora hablemos de gustos.  ¬°Esta es una parte hol√≠stica e interactiva! <br><br><h2>  Holivar <br></h2><br>  Apoyemos, los comentarios est√°n abiertos.  Primero, perm√≠teme recordarte que los nombres son un problema complejo y no resuelto.  Puede luchar sobre c√≥mo nombrar una variable, pero tenemos algunos enfoques que ayudan al menos a no cometer errores obvios. <br><br><h3>  Nombres <br></h3><br>  ¬øQu√© le parece: <strong>var, value, item, obj, data, result</strong> ?  ¬øQu√© son los <strong>datos</strong> ?  Algunos datos  ¬øCu√°l es el <strong>resultado</strong> ?  Alg√∫n tipo de resultado.  A menudo veo la variable <strong>resultado</strong> y una llamada a alg√∫n m√©todo infernal en una clase incomprensible, y pienso: ‚Äú¬øCu√°l es este resultado?  ¬øPor qu√© est√° √©l aqu√≠? <br><br>  Hay muchos desarrolladores que no est√°n de acuerdo conmigo y dicen que el <strong>valor</strong> es un nombre de variable perfectamente normal: <br><br>  - <em>¬°Siempre uso clave y valor!</em> <br>  - <em>¬øPor qu√© no usar clave y valor, pero decir que la clave es el nombre y el valor es el apellido?</em>  <em>Por qu√© es imposible nombrar first_name y last_name, ahora hay un contexto.</em> <br><br>  Generalmente la gente est√° de acuerdo, pero discuten de todos modos.  Esto es algo muy hol√≠stico: al menos 3 personas pasaron una hora de su vida conmigo para discutir sobre esto conmigo. <br><br><h3>  ¬øEst√° bien nombrar variables con una letra? <br></h3><br>  Por ejemplo, <strong>q</strong> ?  Todos conocemos el caso cl√°sico: <code>for i in some_iterable:</code>  Que es <strong>yo</strong>  En C, esta es una pr√°ctica est√°ndar, y todo proviene de ella.  Pero en Python, colecciones e iteradores.  Las colecciones contienen elementos que tienen nombres, llam√©moslos de alguna manera diferente. <br><br><blockquote>  La mitad de los desarrolladores piensan que llamar a las variables i, x, y, z es normal. </blockquote><br>  Creo que no puedes nombrar nombres con una letra.  Quiero m√°s contexto y es bueno que la segunda mitad de los desarrolladores est√©n de acuerdo conmigo.  Si en C esto todav√≠a est√° permitido de alguna manera debido al patrimonio hist√≥rico, entonces en Python este es un problema muy grande y no es necesario que lo haga. <br><br><h3>  Consistencia <br></h3><br>  Simplemente escojamos una salida de entre muchas y digamos: "Hag√°moslo".  Si es bueno o malo, ya no importa, es simplemente consistente. <br><br>  Solo estamos hablando de Python 3, Legacy no se considera en absoluto. <br><br>  Tengo un argumento: cuando heredamos de algo, deber√≠amos saber de qu√©: ser√≠a bueno ver el nombre del padre.  Lo curioso es que generalmente vemos el nombre del padre, excepto cuando se trata de un <strong>objeto</strong> .  Por lo tanto, formul√© una regla para m√≠: cuando escribo una clase, heredo de algo, siempre escribo el nombre del padre.  No importa lo que ser√°: modelo, objeto u otra cosa. <br><br>  Si hay una opci√≥n para escribir <code>Class Some(object)</code> o <code>class Some</code> , entonces elegir√© el primero.  Por un lado, muestra que claramente siempre escribimos lo que heredamos.  Por otro lado, no hay una particular <strong>verbosidad en √©l</strong> : no perdemos nada de unas pocas pulsaciones de teclas adicionales. <br><br>  Dos tercios de los desarrolladores est√°n m√°s familiarizados con la segunda opci√≥n, e incluso s√© por qu√©.  Mi hip√≥tesis: todo porque hemos migrado durante mucho tiempo de la segunda versi√≥n de Python a la tercera, y ahora mostramos que estamos escribiendo en la tercera Python.  No s√© c√≥mo es correcta la hip√≥tesis, pero me parece que es as√≠. <br><br><h3>  ¬øLas l√≠neas F son terribles? <br></h3><br>  Opciones de respuesta: <br><br><ul><li>  S√≠: pierden contexto, ponen l√≥gica en la plantilla y no dejan pelusa - (38%). </li><li>  No!  Son un milagro!  - (62%). </li></ul><br>  Existe la hip√≥tesis de que las l√≠neas f son terribles.  ¬°Empujan cualquier cosa en ellos!  Las l√≠neas f no son lo mismo que <code>.format</code> , las diferencias son dram√°ticas.  Cuando declaramos una plantilla y luego la formateamos, realizamos dos acciones por separado: primero definimos la plantilla y luego la formateamos.  Cuando declaramos una l√≠nea f, realizamos dos acciones simult√°neamente: declaramos inmediatamente la plantilla y la formateamos en el mismo momento. <br><br>  Hay dos problemas con las l√≠neas f.  Declaramos una plantilla para la l√≠nea f y todo funciona.  Y luego decidimos mover la plantilla 2 l√≠neas hacia arriba o moverla a otra funci√≥n, y todo se rompe.  <strong>Ahora no hay contexto que nos permita formatear cadenas</strong> , y no podemos procesarlas correctamente.  El segundo gran problema con las l√≠neas f: le permiten hacer lo terrible: <strong>pegar la l√≥gica en la plantilla</strong> .  Supongamos que hay una l√≠nea en la que simplemente insertamos el nombre de usuario y la palabra "Hola", esto es normal.  No hay nada particularmente terrible, pero luego vemos que el nombre de usuario viene en may√∫sculas, decidimos traducirlo a un caso de T√≠tulo y escribir directamente en la plantilla <code>username.title()</code> .  Luego, las condiciones, ciclos, importaciones aparecen en la plantilla.  Y todas las otras partes de php. <br><br>  Todos estos problemas me hacen decir que <strong>las l√≠neas f son un mal tema</strong> , no las usamos.  Lo curioso es que no tenemos un caso en el que solo las l√≠neas f sean adecuadas para nosotros.  Por lo general, cualquier formato es adecuado, pero elegimos <code>.format</code> , todo lo dem√°s es imposible, ni <code>%</code> ni l√≠neas f.  El trabajo de <code>.format</code> tambi√©n <code>.format</code> incluido, porque dentro de √©l puedes poner comillas rizadas y escribir el nombre de la variable o su orden. <br><br><blockquote>  Durante el informe, el n√∫mero de oponentes de la l√≠nea f aument√≥ del 33 al 38%; esta es una victoria peque√±a pero peque√±a. </blockquote><br><h3>  Los numeros <br></h3><br>  ¬øTe gustan n√∫meros como este: <code>final_score = 69 * previous result / 3.14</code> .  Esto parece una l√≠nea de c√≥digo est√°ndar, pero ¬øqu√© es 69?  Tales preguntas a menudo surgen cuando miro el c√≥digo que escrib√≠ hace alg√∫n tiempo, y el gerente en ese momento dice: <br><br>  - <em>Multiplica por 147.</em> <br>  - <em>¬øPor qu√© a los 147?</em> <br>  - <em>Tenemos tales aranceles.</em> <br><br>  Me multipliqu√© y olvid√©, o durante mucho tiempo recog√≠ alg√∫n valor del coeficiente para que todo funcionara, y luego olvid√© c√≥mo lo recog√≠ y por qu√©.  Resulta que un importante trabajo de investigaci√≥n permaneci√≥ oculto detr√°s de un n√∫mero sin t√≠tulo.  Ni siquiera s√© cu√°l es este n√∫mero, pero solo puedo encontrarlo, recuperarlo y restaurarlo de alguna manera comprometi√©ndome m√°s tarde. <br><br>  ¬øPor qu√© no hacerlo de manera diferente: coloque todos los n√∫meros complejos en su propia variable con el nombre y la documentaci√≥n?  Por ejemplo, para el n√∫mero 69, escriba que este es el indicador promedio en el mercado, y ahora la constante tiene un nombre y contexto.  Escribir√© un comentario de que tom√© la constante en el sitio de dicho estudio.  Si la investigaci√≥n cambia en el futuro, vendr√© y actualizar√© los datos. <br><br>  Por lo tanto, garantizamos que ning√∫n n√∫mero m√°gico atravesar√° nuestro c√≥digo y lo complicar√° desde adentro.  Se abren paso verificando la complejidad de cada l√≠nea y dicen: "Aqu√≠ est√° el n√∫mero 4766. ¬°Qu√© es, no s√©, resu√©lvelo t√∫ mismo!"  Este fue un gran descubrimiento para m√≠. <br><br><blockquote>  Como resultado, nos dimos cuenta de que debemos seguir esto, y no perdemos ning√∫n n√∫mero m√°gico en el c√≥digo.  Es bueno que casi el 100% de nuestros colegas est√©n de acuerdo con nosotros, y tampoco usan esos n√∫meros. </blockquote><br>  Pero hay excepciones: estos son n√∫meros del 10 al 10, n√∫meros 100, 1000 y similares, simplemente porque a menudo se encuentran y sin ellos es dif√≠cil.  <strong>Somos duros, pero no s√°dicos</strong> y pensamos un poco. <br><br><h3>  ¬øUsas '@staticmethod'? <br></h3><br>  Pensemos en qu√© <strong>es el m√©todo est√°tico</strong> .  ¬øAlguna vez te has preguntado por qu√© est√° en Python?  Yo no  Ten√≠a una hermosa Pylint que dec√≠a: <br><br>  - <em>Mira, no est√°s usando</em> <code>self</code> , <code>cls</code> - ¬° <em>haz un m√©todo est√°tico!</em> <br>  - <em>De acuerdo, Pylint, har√© un m√©todo est√°tico.</em> <br><br>  Luego ense√±√© Python a principiantes, y me preguntaron qu√© es el m√©todo est√°tico y por qu√© es necesario.  No sab√≠a la respuesta y pens√© si es posible escribir lo mismo con una funci√≥n, o no usar <code>self</code> en una funci√≥n regular, simplemente porque es una clase as√≠ y algo est√° sucediendo.  ¬øPor qu√© necesitamos una construcci√≥n de m√©todo est√°tico? <br><br>  Busqu√© en Google la pregunta, y result√≥ ser tan profunda como una madriguera de conejo.  Hay muchos otros lenguajes de programaci√≥n en los que el m√©todo est√°tico tampoco es del agrado.  Y bien razonado: el m√©todo est√°tico rompe el modelo de objetos.  Como resultado, me di cuenta de que el <strong>m√©todo est√°tico no es el lugar aqu√≠</strong> , y lo cortamos.  Ahora, si usamos el decorador de m√©todos est√°ticos, la interfaz dir√°: "No, lo siento, refactorizar". <br><br>  La mayor√≠a de los desarrolladores no est√°n de acuerdo conmigo, pero aproximadamente la mitad todav√≠a piensa que es mejor escribir m√©todos regulares o funciones regulares en lugar del m√©todo est√°tico. <br><br><h3>  L√≥gica en __init __. Ru: ¬øbuena o mala? <br></h3><br>  Este es mi tema favorito.  Seguramente, cuando crea un nuevo paquete y de alguna manera lo llama, crea __init __. Ru y se pregunta qu√© poner en √©l.  ¬øQu√© poner en __init __. Ru, y qu√© - en archivos uno al lado del otro?  Para m√≠, esta era una pregunta no trivial, y siempre estaba perdido: ¬øprobablemente algo m√°s importante?  Entonces pens√©: no, por el contrario, pondr√© lo m√°s importante en el contexto m√°s comprensible.  Si pone algo en __init __. Ru, y luego lo importa todo, resulta que las importaciones c√≠clicas tambi√©n son malas. <br><br>  Mir√© varias bibliotecas populares, sub√≠ su __init __. Ru, y not√© que b√°sicamente hay basura o compatibilidad con versiones anteriores.  Para m√≠, esta pregunta surgi√≥ bruscamente cuando comenc√© a crear paquetes grandes con muchos subpaquetes: te pierdes.           ,   .    Python,  ,   ,   __init__.  ,  90%     . <br><br>   ‚Äî ,   API,  ,   -  ,  ,   ? ,  ,      .      API   .   ,    __init__.   - : ,  ,   . <br><br>   ,   <code>I_CONTROL_CODE</code> ‚Äî   .   ,   .    ,  ,  __init__.   ‚Äî  .     ,    ,    , - ,       . <br><br><h3>  hasattr   ? <br></h3><br>     <strong>hasattr</strong> ?  ,   ,    Python   ‚Äî .  hasattr  ,         (). <br><br>   ,  ,   hasattr  ,     ,   .       ,   hasattr,   ,      . - ,  Python   -, hasattr      .       ,        .    <strong>getattr</strong>   ¬´  ,  ¬ª.          hasattr ‚Äî  getattr,  <strong>exception</strong> . <br><br>     50  50 ‚Äî ,        ,        . <br><br><h2>        <br></h2><br>     ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>layer-linter</strong></a> .   ?      :   ,   ,     ,    .     ,     -    .         - .  . <br><br>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>cohesion</strong></a> .       ,    . Cohesion ,     .      False Positive       ,       ‚Äî ,   ,  . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>vulture</strong></a>      Python    . - ,  Python   ,    .      ohesion. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><strong>Radon</strong></a>      ,   : <strong>Halstead</strong> , <strong>Maintainability Index</strong> ,  . ,       ‚Äî  . <br><br><h2> Final type <br></h2><br>   <strong>Final-</strong>  Python.     Typing Extensions,        ,    .  ,     - ,      ‚Äî  ,      .   ,   -  - ,  ?  No es necesario  .  -  ‚Äî  ,  , , . <br><br><h2> Gratis <br></h2><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>     ,     . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b90/e6c/e5d/b90e6ce5dc2ef3c00c83e73fa162447e.png"><br><br>       ,     . <br><br>      ,     .   ,   .      ,    Python-   ,   . <br><br><blockquote> ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Moscow Python Conf++</a> ,      .    ,        ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>         Python-. </blockquote><br>       .       .   ,      ,   ,      . <br><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/2fd/ed2/6fa/2fded26fa11ac61fb98e0b729b6bd0c6.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/01e/18a/d2d/01e18ad2d4184a42079552671a8957d8.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/f87/653/af3/f87653af3f7b6c6baca449b3c81b564f.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/d1e/5a8/576/d1e5a8576f1a724683a57f2c2861950e.png"><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es433480/">https://habr.com/ru/post/es433480/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es433468/index.html">Inyecci√≥n de fallas: su sistema no es confiable si no ha intentado romperlo</a></li>
<li><a href="../es433472/index.html">Lanzamiento de Unity 2018.3</a></li>
<li><a href="../es433474/index.html">Pylint de adentro hacia afuera. Como lo hace</a></li>
<li><a href="../es433476/index.html">50 tonos de apio</a></li>
<li><a href="../es433478/index.html">Por qu√© Django es elegido en la revista Tinkoff</a></li>
<li><a href="../es433482/index.html">Django bajo microscopio</a></li>
<li><a href="../es433486/index.html">Que otra vez La reactivaci√≥n de las tarjetas de d√©bito no bancarias</a></li>
<li><a href="../es433488/index.html">Christmas Scrum Meetup UPD Broadcast mitap</a></li>
<li><a href="../es433490/index.html">Revisi√≥n de la impresora 3D Creality CR-X</a></li>
<li><a href="../es433494/index.html">10 modismos ingleses que nunca sabr√°s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>