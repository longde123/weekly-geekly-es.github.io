<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏐 👩🏻‍🚒 🎄 Bagaimana Yandex.Zen, Plugin Caching WordPress dan Hosting Meningkatkan Tekanan Saya ⚠️ 🤮 🤦🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini, lebih tepatnya, dari serangkaian "catatan nyonya rumah." Nah, sedikit lagi tentang pengalaman pribadi dan mencungkil. 

 Jika Anda harus ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana Yandex.Zen, Plugin Caching WordPress dan Hosting Meningkatkan Tekanan Saya</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423005/"><img src="https://habrastorage.org/webt/12/3o/cf/123ocfvpows898t7vrwuhhveguo.jpeg" alt="gambar" width="100%"><br><br>  Artikel ini, lebih tepatnya, dari serangkaian "catatan nyonya rumah."  Nah, sedikit lagi tentang pengalaman pribadi dan mencungkil. <br><br>  Jika Anda harus berurusan dengan situs WordPress yang memiliki plugin caching WP Super Cache terinstal, maka artikel itu mungkin berguna bagi Anda.  Kalau tidak, ini hanya cerita pendek. <br><a name="habracut"></a><br>  Singkatnya, awal cerita adalah ini: ada situs.  Berita dan informasi tematik.  Dibuat oleh penyihir tidak dikenal di CMS WordPress.  Dan dilakukan persis seperti yang diizinkan pada saat itu dengan bantuan pemiliknya.  Seiring waktu, situs mendapatkan popularitas, jumlah pengunjung bertambah.  Situs itu sendiri "menghasilkan" iklan.  Yaitu  semakin banyak pengunjung, semakin baik.  Di beberapa titik, selama beban puncak, situs mulai berputar: halaman dimuat perlahan dan semua itu.  Tapi, tentu saja, sampai ayam itu mematuk, tidak ada yang benar-benar bergerak.  Ayam jantan muncul pada saat situs tersebut seharusnya meliput beberapa peristiwa yang menarik perhatian publik.  Pengunjung berlari masuk, situs turun, dan semua pendapatan yang diperkirakan mencair di depan mata kami.  Karena keadaan, saya harus bertindak sebagai resusitator.  Saya menulis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> tentang ini.  Keputusan saya menyeramkan (jangan ulangi), tetapi tujuan utama tercapai - impian diselamatkan.  Kebanyakan. <br><br>  Tentu saja, tidak ada yang tertarik mengulangi situasi yang sama dan bekerja di situs.  Pertama-tama, mereka menemukan alasan jatuh dan beban tinggi di server.  Itu adalah hal yang lumrah: kurangnya situs caching seperti itu dan mekanisme yang diimplementasikan dengan buruk untuk merekam dan menampilkan jumlah tampilan artikel.  Yang terakhir itu sendiri menciptakan beban yang layak: dengan setiap permintaan untuk halaman artikel, ia mengambil dari database jumlah tampilan artikel ini, menampilkannya, dan kemudian menambahkan satu dan menulisnya kembali ke database.  Pada saat yang sama, tabel <b>wp_postmeta</b> dengan metadata digunakan untuk penyimpanan (seperti yang disebut dalam WP).  Di mana massa disimpan sepenuhnya tidak relevan dengan pandangan akuntansi informasi dan yang sangat besar. <br><br>  Masalah caching diselesaikan dengan sederhana: di lingkungan yang sunyi, plugin WP Super Cache diinstal secara normal.  Apa, banyak, jika saya ingat dengan benar, menyarankan saya untuk melakukan alih-alih kruk menakutkan yang saya buat di komentar pada artikel saya itu.  Jujur, saya dulu dan sekarang kurang bernavigasi di ekosistem WordPress dan karenanya muncul kruk itu.  Plugin caching dipasang dan dikonfigurasikan oleh orang yang sudah tahu, dan langsung keluar dari kotak.  Dengan demikian, masalah caching terpecahkan.  Mengapa plugin ini dipilih, saya tidak tahu pasti.  Sejauh yang saya mengerti, ini adalah salah satu plugin yang paling populer dari jenis ini untuk WP. <br><br>  Mengingat pandangan, mereka bertindak agak berbeda.  Jelas bahwa mekanisme asli harus ditinggalkan.  Saya tidak ingin menolak untuk mempertimbangkan pandangan mereka sendiri: setidaknya satu blok yang menunjukkan "artikel paling populer dalam seminggu" terikat dengannya.  Semua plugin untuk merekam tampilan, walaupun mereka adalah "teman" dengan plugin caching, ternyata sangat rakus dan, paling sering, menerapkan mekanisme yang sama dengan menulis dan mengekstraksi data dari wp_postmeta.  Untuk situs kecil, ini sangat cocok.  Untuk situs dengan tingkat kehadiran puncak yang cukup solid - tidak lagi: terlalu rakus untuk fungsi sekecil itu.  Kemudian, omong-omong, saya muncul hosting berbayar dan tidak digunakan selama bertahun-tahun yang akan datang.  Termudah dan termurah.  Tanggung jawab untuk menyimpan, merekam, dan mengembalikan data tentang pandangan ditumpuk padanya.  Semuanya asinkron, mis.  bahkan jika jatuh, situs utama akan terus menampilkan artikel, iklan, dan segala sesuatu yang harus ditampilkan secara diam-diam.  Penyimpanan online untuk melihat data ditugaskan ke Redis, dan penyimpanan jangka panjang ke MySQL.  Jadi itu berputar, itu tidak benar-benar bertanya, dan memakan 1-2% dari beban maksimum yang diizinkan di hosting itu. <br><br>  Maka, waktu yang cukup lama berlalu.  Lagi malam dan lagi cerita lama.  Lalu lintas yang cukup kuat masuk ke situs dan situs mulai turun.  Dan lagi, saya satu-satunya spesialis kondisional yang terjaga di daerah tersebut.  Tentu saja, saya terkejut dengan pengulangan acara.  Pikiran pertama saya adalah seseorang secara tidak sengaja mematikan caching.  Tapi tidak, dalam kode sumber halaman situs yang diberikan server jatuh, saya melihat tanda-tanda plugin caching berfungsi.  Semuanya harus baik-baik saja.  Tetapi di panel kontrol server, saya melihat bahwa tidak ada RAM yang tersisa, jumlah permintaan basis data luar biasa dan semuanya buruk.  Pertama-tama, saya membuka halaman dengan deskripsi plugin, dengan cepat menelusuri matanya, tidak menemukan apa pun dan meninggalkan aktivitas ini.  Langkah selanjutnya adalah melihat statistik.  Saya melihat bahwa arus lalu lintas utama mengalir ke situs dari Yandex.Zen.  Dan permintaan yang mengarahkan pengguna ke situs terlihat seperti ini: <br><br><blockquote>  https://example.com <b>? utm_referrer = https:% 2F% 2Fzen.yandex.com</b> </blockquote><br>  Yaitu  Yandex.Zen menambahkan tag utm ke alamat.  Karena server sudah benar-benar berbaring dan memberi saya hanya 500, untuk beberapa alasan saya tidak dapat dengan jelas memverifikasi teori bahwa halaman dengan "pembobotan" tidak di-cache.  Oleh karena itu, "penopang" lain lahir (kemudian diganti): pengalihan ditambahkan ke .htaccess, yang mengubah permintaan dengan tag utm menjadi permintaan tanpa mereka sebelum WordPress dan semua plugin yang kuat ikut bermain.  Mesin reboot dan, voila, semuanya berfungsi: situs memuat dengan cepat, server diam-diam berdesir pada kecepatan rendah.  Karena tidak ada yang terjadi. <br><br>  Lalu saya santai dan naik dengan tenang menonton pengaturan plugin caching.  Pertama-tama, kotak centang "Jangan cache halaman dengan parameter GET", yang ada di sana.  Semuanya baik-baik saja, dia tidak layak.  Plus, seperti yang diperlihatkan percobaan, plugin mengatasi caching kueri dengan set parameter arbitrer apa pun.  Jika ini bukan tag utm (faktanya, saya hanya mengarahkan permintaan dari jenis tertentu dan tidak memotong semua tag utm). <br><br>  Di sini saya hati-hati (menggunakan CTRL + F) melihat halaman plugin.  Dan saya temukan di FAQ, paragraf yang mulia, “Bagaimana saya sebaiknya menggunakan alat pelacak utm_source di Google Analytics dengan plugin ini?”.  Jelas bahwa selama pemeriksaan sepintas lalu, saya dengan aman mengabaikannya: sepertinya tidak ada hubungannya dengan masalah tersebut.  Pada saat yang sama, omong-omong, ini tidak terlalu informatif dan tidak menawarkan solusi spesifik. <br><br>  <b>Satu-satunya kesimpulan yang mungkin berguna dalam artikel:</b> jika Anda memiliki situs WP dengan plugin WP Super Cache, maka periksa apa fungsinya (atau tidak), jika Anda mengirim permintaan dengan parameter “? Utm_referrer = https:% 2F% 2Fzen. yandex.com ", dll.  Saya tidak yakin ketika menginstal plugin ini, semua orang membaca FAQ-nya dengan sangat hati-hati.  Implementasi spesifik, tampaknya, tetap dengan pemilik situs: ketika saya terakhir melihat pembaruan plugin ini, saya tidak melihat perubahan apa pun mengenai reaksi anehnya terhadap tag utm. <br><br>  Tetapi kisah itu tidak akan lengkap (dan saya tidak akan mengatakannya) jika tidak ada konfirmasi lain dari hukum Murphy.  Sementara kami berkorespondensi secara damai dengan pemilik situs dan menyaksikan bagaimana situs tersebut bekerja dengan tenang selama sekitar satu jam ... situs tersebut jatuh.  Tanpa diduga dan akhirnya.  Tidak ada akses ke panel kontrol server, FTP, SSH dan yang lainnya tidak berfungsi.  Tidak ada yang berhasil.  Jika sebelum itu tekanan saya hanya sedikit meningkat dengan memecahkan masalah yang dilontarkan J. Zen dan plugin caching (setelah semua, itu adalah kesenangan khusus untuk dengan cepat memahami dan memperbaiki sesuatu dengan mudah), maka seluruh serangan panik mini terjadi pada saya.  Dan hanya perasaan samar bahwa beberapa baris dalam .htaccess tidak dapat membunuh segalanya satu jam setelah membuat garis-garis ini tidak membiarkan "mini" berubah menjadi sesuatu yang lebih lengkap.  Secara umum, setelah beberapa menit bertukar pesan yang mengejutkan, kami masuk ke akun pribadi penyedia hosting tempat server tinggal.  Dan di sana, di tiket, kami menemukan peringatan tentang "pekerjaan teknis dari X ke Y di MSC."  Yang paling menarik adalah di kantor pos, tidak peduli bagaimana kami mencari, kami tidak menemukan pesan dari hoster tentang karya-karya ini.  Tiket setidaknya sudah satu hari.  Sebelum ini, pesan seperti itu datang ke surat, dan tidak ada yang biasanya melihat tiket layanan dukungan (dan kantor hoster itu sendiri) biasanya tanpa kebutuhan khusus.  Karena itu, apa yang terjadi adalah kejutan besar.  Setelah itu, kami memarahi mata sang hoster, tertawa, menunggu sampai semuanya bekerja dan pergi tidur. <br><br>  Ini adalah sebuah cerita. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id423005/">https://habr.com/ru/post/id423005/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id422989/index.html">Database bukan hanya gudang data</a></li>
<li><a href="../id422993/index.html">Membakar TV OLED dalam tes nyata</a></li>
<li><a href="../id422995/index.html">QA mitap di Redmadrobot</a></li>
<li><a href="../id422997/index.html">Buku "PHP Modern"</a></li>
<li><a href="../id422999/index.html">Buat dataset alien Anda sendiri</a></li>
<li><a href="../id423007/index.html">"Malyavki, tapi bagus": bagaimana kami membawa siswa untuk berlatih</a></li>
<li><a href="../id423009/index.html">SENS Diagnostics. Biomarker glikasi protein</a></li>
<li><a href="../id423011/index.html">Manajemen Layanan Mikro dengan Kubernetes dan Istio</a></li>
<li><a href="../id423013/index.html">Bagaimana mengatur dependensi Anda dalam aplikasi Vue</a></li>
<li><a href="../id423015/index.html">Git: kesalahan umum dan cara memperbaikinya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>