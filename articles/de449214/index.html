<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍❤️‍👩 ✔️ 👨‍💻 Klusterkit 🥪 👩🏽‍🤝‍👨🏼 ☣️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="KlusterKit: Ein Open Source-Toolkit zur Vereinfachung der Kubernetes-Bereitstellung und zur Arbeit in physisch isolierten lokalen Umgebungen 





 Wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Klusterkit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/449214/"><h2 id="klusterkit-nabor-instrumentov-s-otkrytym-ishodnym-kodom-dlya-uproscheniya-deploev-kubernetes-i-raboty-v-fizicheski-izolirovannyh-lokalnyh-sredah">  KlusterKit: Ein Open Source-Toolkit zur Vereinfachung der Kubernetes-Bereitstellung und zur Arbeit in physisch isolierten lokalen Umgebungen </h2><br><p><img src="https://habrastorage.org/webt/z5/q7/va/z5q7vawtfqjkbja8megct_o6mdi.png"></p><br><p>  Wir freuen uns, Ihnen heute mitteilen zu können, dass Platform9 den Quellcode für Klusterkit, ein Kit mit drei Tools, unter der Apache v2.0-Lizenz auf GitHub öffnet. </p><br><p>  Unsere Kunden führen Software in privaten Rechenzentren ein, die häufig nicht mit dem Internet verbunden sind (aus Sicherheitsgründen oder aus anderen Gründen).  Diese großen Unternehmen möchten Kubernetes nutzen, ihre Anwendungen modernisieren und sie gleichzeitig in verschiedenen Rechenzentren bereitstellen, die häufig keine Verbindung zur Außenwelt haben.  Und hier kommt Klusterkit zur Rettung, was die Bereitstellung und Verwaltung von K8-Clustern in physisch isolierten Umgebungen vereinfacht. </p><br><p>  Klusterkit enthält drei unabhängige Tools, die zusammen oder getrennt zur Verwaltung des Lebenszyklus des Kubernetes-Produktionsclusters verwendet werden können: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">etcdadm</a> , CLI für vereinfachte Clusterverwaltung etcd. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nodeadm</a> , eine Knotenverwaltungs-CLI, die kubeadm ergänzt und die von kubeadm benötigten Abhängigkeiten bereitstellt. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">cctl</a> , ein Tool zur Verwaltung des Cluster-Lebenszyklus, das die Cluster-API aus der Kubernetes-Community akzeptiert und nodeadm und etcdadm verwendet, um hochverfügbare Kubernetes-Cluster in lokalen und sogar physisch isolierten Umgebungen einfach bereitzustellen und zu warten. </li></ol><br><p>  Zusammen führen diese drei Tools die folgenden Aufgaben aus: </p><a name="habracut"></a><br><ul><li>  Versenden und verwalten Sie den hochverfügbaren etcd-Cluster und das Kubernetes-Kontrollfeld problemlos in physisch isolierten lokalen Umgebungen über die Cluster-API. </li><li>  Stellen Sie die Cluster-Systemsteuerung nach einem Fehler mithilfe der etcd-Sicherung wieder her. </li><li>  Verpacken aller Artefakte, die zur Bereitstellung von Kubernetes in physisch isolierten Umgebungen erforderlich sind. </li></ul><br><h3 id="vozmozhnosti-klusterkit">  Klusterkit-Funktionen </h3><br><ul><li>  Unterstützung mehrerer Assistenten (K8s HA-Cluster). </li><li>  Bereitstellung und Verwaltung sicherer Cluster etcd </li><li>  Arbeiten Sie in physisch isolierten Umgebungen. </li><li>  Unterstützt sequentielles Update und Rollback. </li><li>  Flanell (vxlan) als CNI für das Backend;  plant, andere CNI zu unterstützen. </li><li>  Sichern und Wiederherstellen von etcd-Clustern nach Verlust eines Quorums. </li><li>  Schützt das Bedienfeld vor Speichermangel und CPU-Zeit. </li></ul><br><h3 id="arhitektura-resheniya-klusterkit">  Klusterkit-Lösungsarchitektur </h3><br><p> <a href=""><img src="https://habrastorage.org/webt/5y/xo/lv/5yxolv8yt1frmyxan5lmuji_ego.jpeg"></a> </p><br><p>  Aus Gründen der Fehlertoleranz und Einfachheit verwendet Klusterkit eine einzelne cctl-state.yaml-Datei zum Speichern von Kubernetes-Cluster-Metadaten.  Über die cctl-CLI können Sie den Lebenszyklus eines Kubernetes-Clusters auf jedem Computer mit dieser Statusdatei verwalten.  Dies kann ein Laptop eines Bedieners oder ein anderer Computer sein, der Teil eines Kubernetes-Clusters ist. </p><br><p>  Cctl implementiert und ruft die Upstream-Schnittstelle cluster-api als Bibliothek von CRUD-Operationen für Cluster auf.  Es verwendet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ssh-provider</a> , einen Open-Source-Bare-Metal-Cluster-API- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anbieter</a> von Platform9, der wiederum etcdadm und nodeadm aufruft, um Operationen am Cluster auszuführen. </p><br><h3 id="kak-ispolzovat-klusterkit-i-ego-komponenty">  Verwendung von Klusterkit und seinen Komponenten: </h3><br><p>  1 - Jedes der drei Werkzeuge kann einfach mit dem Befehl go get zusammengebaut werden: </p><br><pre><code class="plaintext hljs">go get -u github.com/platform9/cctl go get -u github.com/platform9/nodeadm go get -u github.com/kubernetes-sigs/etcdadm</code> </pre> <br><p>  2 - Anschließend können diese ausführbaren Dateien gepackt und auf die Zielcomputer kopiert werden, auf denen der Kubernetes-Cluster mit hohem Zugriff ausgeführt werden soll.  Fügen Sie die Dateien nodeadm und etcdadm in die Versionsverzeichnisse ein: </p><br><pre> <code class="plaintext hljs">cp $GOPATH/bin/nodeadm /var/cache/ssh-provider/nodeadm// cp $GOPATH/bin/etcdadm /var/cache/ssh-provider/etcdadm//</code> </pre> <br><p>  3 - Orchestrieren Sie bei Bedarf einen Kubernetes-Cluster lokal in einer physisch isolierten Umgebung. Die erforderlichen Abhängigkeiten können mit dem Befehl nodeadm und etcdadm download einfach im Voraus auf einen Computer mit Internetzugang heruntergeladen werden.  Dann können die heruntergeladenen Elemente (d. H. Kubelet und die Kubelet-Einheitendatei für systemd, ausführbare CNI-Datei, kubeadm-Datei, alle Container-Images, einschließlich Kubernetes, Keepalived-Image und systemd-Datei, Container-Image usw. und entsprechende Konfigurationsdateien) leicht kopiert werden physisch isolierte Hosts zusammen mit cctl, nodeadm und etcdadm.  (Einzelheiten finden Sie im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wiki</a> ). </p><br><p>  4 - Wenn alles vorhanden ist, können Sie den ersten Kubernetes-Cluster mit einigen Befehlen erstellen: </p><br><p>  - Erstellen Sie zuerst Anmeldeinformationen für den Cluster. </p><br><pre> <code class="plaintext hljs">$GOPATH/bin/cctl create credential --user root --private-key ~/.ssh/id_rsa</code> </pre> <br><p>  - Erstellen Sie dann ein Clusterobjekt.  –Hilfe hilft die unterstützten Optionen auf. </p><br><pre> <code class="plaintext hljs">$GOPATH/bin/cctl create cluster --pod-network 192.168.0.0/16 --service-network 192.169.0.0/24</code> </pre> <br><p>  - Erstellen Sie abschließend den ersten Computer im Cluster. </p><br><pre> <code class="plaintext hljs">$GOPATH/bin/cctl create machine --ip $MACHINE_IP --role master</code> </pre> <br><p>  Lesen Sie mehr Dokumentation auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de449214/">https://habr.com/ru/post/de449214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de449198/index.html">FFmpeg Erste Schritte mit Visual Studio</a></li>
<li><a href="../de449200/index.html">Höhepunkte der Vergangenheit Moskau Python Conf ++ 2019: Umwandlung in eine Plattform für Kommunikation</a></li>
<li><a href="../de449204/index.html">Da betrachten wir die Metriken für die Entwicklung und Unterstützung der Dokumentation. Yandex-Bericht</a></li>
<li><a href="../de449208/index.html">So erstellen und verwalten Sie erfolgreiche Teams</a></li>
<li><a href="../de449210/index.html">So funktioniert HPE SimpliVity 380 für VDI: Tests mit hoher Belastung</a></li>
<li><a href="../de449216/index.html">Betrug automatisierter Überwachungskameras</a></li>
<li><a href="../de449218/index.html">10 kritische Fähigkeiten für jeden DevOps-Ingenieur</a></li>
<li><a href="../de449220/index.html">DrumHero: Wie ich das erste Spiel in meinem Leben gemacht habe</a></li>
<li><a href="../de449224/index.html">Über die Tendenz der künstlichen Intelligenz</a></li>
<li><a href="../de449232/index.html">Überwachung des Solarenergieverbrauchs per Computer / Server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>