<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐏 🏴󠁧󠁢󠁳󠁣󠁴󠁿 🦍 HighLoad ++, Eugene Kuzovlev (EcommPay IT): que faire quand une minute d'arrêt coûte 100 000 $ 👩🏾‍🏫 👩🏽‍🤝‍👨🏻 👩🏾‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tout le monde parle des processus de développement et de test, de formation du personnel, de motivation croissante, mais ces processus sont rares lors...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>HighLoad ++, Eugene Kuzovlev (EcommPay IT): que faire quand une minute d'arrêt coûte 100 000 $</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/484908/"> Tout le monde parle des processus de développement et de test, de formation du personnel, de motivation croissante, mais ces processus sont rares lorsqu'une minute d'arrêt de service coûte de l'argent.  Que faire lorsque vous effectuez des transactions financières dans le cadre d'un SLA strict?  Comment augmenter la fiabilité et la tolérance aux pannes de vos systèmes, en décrivant le développement et les tests? <br><br><img src="https://habrastorage.org/webt/dz/-p/tn/dz-ptnygkaqhxsm07hgsfil2fxq.jpeg"><br><br>  La prochaine conférence HighLoad ++ se tiendra les 6 et 7 avril 2020 à Saint-Pétersbourg.  Détails et billets <a href="http://bit.ly/2sSxgBx">ici</a> .  9 novembre, 18h00.  HighLoad ++ Moscou 2018, Delhi + Calcutta Hall.  Résumés et <a href="http://www.highload.ru/moscow/2018/abstracts/4226">présentation</a> . <a name="habracut"></a><br><br>  <b>Evgeny Kuzovlev (ci-après dénommée la CE):</b> - Amis, bonjour!  Je m'appelle Kuzovlev Evgeny.  Je viens d'EcommPay, une division spécifique est EcommPay IT, une division informatique d'un groupe de sociétés.  Et aujourd'hui, nous allons parler des temps d'arrêt - comment les éviter, comment minimiser leurs conséquences, si vous ne pouvez pas les éviter.  Le thème est: "Que faire quand une minute d'arrêt coûte 100 000 $?"  Pour nous, pour l'avenir, les chiffres sont comparables. <br><br><h3>  Que fait EcommPay IT? </h3><br>  Qui sommes nous  Pourquoi suis-je debout devant toi?  Pourquoi ai-je le droit de vous dire quelque chose ici?  Et de quoi parlerons-nous plus en détail ici? <br><br><img src="https://habrastorage.org/webt/id/bv/so/idbvsod8gah5mhw25b4pnidb8d4.jpeg"><br><br>  EcommPay Group of Companies est un acquéreur international.  Nous traitons les paiements dans le monde entier - en Russie, en Europe, en Asie du Sud-Est (partout dans le monde).  Nous avons 9 bureaux, 500 employés au total et environ un peu moins de la moitié d'entre eux sont des informaticiens.  Tout ce que nous faisons, tout ce sur quoi nous gagnons de l'argent, nous l'avons fait nous-mêmes. <br><br>  Nous avons tous nos produits (et nous en avons beaucoup - dans la gamme des grands produits informatiques, nous avons environ 16 composants différents), nous nous sommes écrits;  nous nous écrivons, nous nous développons.  Et en ce moment, nous effectuons environ un million de transactions par jour (des millions - il sera probablement juste de le dire).  Nous sommes une entreprise assez jeune - nous n'avons que six ans environ. <br><br>  Il y a 6 ans, c'était une telle startup lorsque les gars sont venus avec l'entreprise.  Ils étaient unis par une idée (il n'y avait rien d'autre qu'une idée), et nous avons couru.  Comme toute startup, nous avons couru plus vite ... Pour nous, la vitesse était plus importante que la qualité. <br><br>  À un moment donné, nous nous sommes arrêtés: nous avons réalisé que nous ne pouvions plus vivre à cette vitesse et avec cette qualité, et nous devions en premier lieu faire de la qualité.  À ce stade, nous avons décidé d'écrire une nouvelle plateforme qui sera juste, évolutive, fiable.  Ils ont commencé à écrire cette plate-forme (ils ont commencé à investir, à développer le développement, les tests), mais à un moment donné, ils ont réalisé que le développement et les tests ne permettaient pas d'atteindre un nouveau niveau de qualité de service. <br><br>  Vous fabriquez un nouveau produit, vous le mettez en production, mais quelque part, quelque chose ne va pas.  Et aujourd'hui, nous allons parler de la façon d'atteindre un nouveau niveau qualitatif (comment nous l'avons obtenu, de notre expérience), en retirant le développement et les tests de l'image;  nous allons parler de ce qui est disponible pour l'exploitation - ce que l'exploitation peut faire d'elle-même, ce qu'elle peut offrir des tests afin d'affecter la qualité. <br><br><h3>  Temps d'arrêt.  Les commandements de l'exploitation. </h3><br>  La principale pierre angulaire, dont nous allons réellement parler aujourd'hui, est toujours les temps d'arrêt.  Mot effrayant.  Si nous avions un temps d'arrêt, tout va mal avec nous.  Nous courons pour augmenter, les administrateurs tiennent le serveur - Dieu ne plaise, il ne tombe pas, comme dans cette chanson.  C’est ce dont nous allons parler aujourd’hui. <br><br><img src="https://habrastorage.org/webt/7w/nd/t8/7wndt8zz0lal9gvkglnu8zcc-fw.jpeg"><br><br>  Lorsque nous avons commencé à changer nos approches, nous avons formé 4 commandements.  Ils sont présentés sur mes slides: <br><br>  Ces commandements sont assez simples: <br><br><img src="https://habrastorage.org/webt/kr/vd/zr/krvdzr268yzpyvwaf3_4fgatwrg.jpeg"><br><br><ul><li>  Identifiez rapidement le problème. </li><li>  Débarrassez-vous encore plus rapidement. </li><li>  Aidez à comprendre la raison (plus tard, pour les développeurs). </li><li>  Et standardiser les approches. </li></ul><br>  J'attire votre attention sur le point numéro 2. Nous nous débarrassons du problème, mais ne le résolvons pas.  Décider est la deuxième fois.  La principale chose pour nous est que l'utilisateur est protégé contre ce problème.  Il existera dans un certain environnement isolé, mais cet environnement n'entrera pas en contact avec lui.  En fait, nous allons passer en revue ces quatre groupes de problèmes (pour certains plus en détail, pour certains moins en détail), je vais vous dire ce que nous utilisons, quel type d'expérience nous avons dans la résolution. <br><br><h3>  Dépannage: quand ils se produisent et que faire avec eux? </h3><br>  Mais nous allons commencer dans le désordre, nous commençons par le point numéro 2 - comment se débarrasser rapidement du problème?  Il y a un problème - nous devons le résoudre.  «Que devons-nous faire avec cela?» Est la question principale.  Et lorsque nous avons commencé à réfléchir à la façon de résoudre le problème, nous avons développé pour nous-mêmes certaines exigences que le dépannage devrait suivre. <br><br><img src="https://habrastorage.org/webt/oq/ch/1z/oqch1zstieolkejut_t01rbzokw.jpeg"><br><br>  Pour formuler ces exigences, nous avons décidé de nous poser la question: «Et quand avons-nous des problèmes»?  Et les problèmes, comme il s'est avéré, se trouvent dans quatre cas: <br><br><img src="https://habrastorage.org/webt/ks/kw/zm/kskwzmylqshsejm96u-bxngu1uq.jpeg"><br><br><ul><li>  Dysfonctionnement matériel. </li><li>  Défaillance des services externes. </li><li>  Changement de version logicielle (même déploiement). </li><li>  Croissance de la charge explosive. </li></ul><br>  Nous ne parlerons pas des deux premiers.  Un dysfonctionnement matériel est résolu tout simplement: vous devez tout faire dupliquer.  S'il s'agit de disques - les disques doivent être assemblés en RAID, s'il s'agit d'un serveur - le serveur doit être dupliqué, si vous avez une infrastructure réseau - vous devez mettre une deuxième copie de l'infrastructure réseau, c'est-à-dire que vous prenez et dupliquez.  Et si quelque chose échoue, vous passez à des capacités de réserve.  Il est difficile d'en dire plus ici. <br><br>  Le second est l'échec des services externes.  Pour la plupart, le système n'est pas du tout un problème, mais pas pour nous.  Étant donné que nous traitons les paiements, nous sommes un tel agrégateur qui se situe entre l'utilisateur (qui saisit les détails de sa carte) et les banques, les systèmes de paiement ("Visa", "MasterCard", "World" du même).  Nos services externes (systèmes de paiement, banques) ont tendance à échouer.  Ni nous ni vous (si vous avez de tels services) ne pouvons influencer cela. <br><br>  Que faire alors?  Il y a deux options.  Tout d'abord, si vous le pouvez, vous devez dupliquer ce service d'une manière ou d'une autre.  Par exemple, si nous le pouvons, nous transférons le trafic d'un service à un autre: nous traitons, par exemple, les cartes via Sberbank, Sberbank a des problèmes - nous transférons le trafic [conditionnellement] vers Raiffeisen.  La deuxième chose que nous pouvons faire est de constater rapidement l'échec des services externes, et nous parlerons donc de la vitesse de réaction dans la prochaine partie du rapport. <br><br>  En fait, de ces quatre, nous pouvons spécifiquement affecter le changement de versions logicielles - pour prendre des mesures qui mèneront à une amélioration dans le contexte des déploiements et dans le contexte de la croissance de la charge explosive.  En fait, nous l'avons fait.  Ici encore, une petite remarque ... <br><br>  Sur ces quatre problèmes, plusieurs sont résolus immédiatement si vous disposez d'un cloud.  Si vous êtes dans les nuages ​​Microsoft Azhur, Ozone, utilisez nos nuages, de Yandex ou Mail, alors au moins un dysfonctionnement matériel devient leur problème et tout devient immédiatement correct dans le contexte d'un dysfonctionnement matériel. <br><br>  Nous sommes une petite entreprise non standard.  Ici, tout le monde parle de Kubernets, de nuages ​​- nous n'avons ni Kubernets, ni nuages.  Mais nous avons des racks avec du fer dans de nombreux centres de données, et nous sommes obligés de vivre avec ce fer, nous sommes obligés de répondre de tout.  Par conséquent, dans ce contexte, nous parlerons.  Alors, sur les problèmes.  Les deux premiers sont hors crochets. <br><br><h3>  Changer la version du logiciel.  Bases </h3><br>  Nos développeurs n'ont pas accès à la production.  Pourquoi  Mais nous sommes simplement certifiés par PCI DSS, et nos développeurs n'ont tout simplement pas le droit de grimper dans le "prod".  Voilà, point final.  Absolument.  Par conséquent, la responsabilité du développement se termine exactement au moment où le développement a transmis la version à la version. <br><br><img src="https://habrastorage.org/webt/ze/bp/su/zebpsueilk7pvkhrsqwn-0nrfko.jpeg"><br><br>  Notre deuxième base, que nous avons, qui nous aide également beaucoup, est le manque de connaissances uniques et sans papiers.  J'espère que vous en ferez de même.  Parce que si ce n'est pas le cas, vous aurez des problèmes.  Des problèmes surgiront lorsque cette connaissance unique et non documentée n'est pas présente au bon moment au bon endroit.  Supposons que vous ayez une personne qui sache déployer un composant spécifique - il n'y a personne, il est en vacances ou est tombé malade - c'est tout, vous avez des problèmes. <br><br>  Et la troisième base à laquelle nous sommes arrivés.  Nous sommes venus à lui à travers la douleur, le sang, les larmes - nous sommes arrivés à la conclusion que n'importe quelle de nos versions contient des erreurs, même si elle est sans erreurs.  Nous avons décidé cela par nous-mêmes: lorsque nous déployons quelque chose, lorsque nous roulons quelque chose dans la prod - nous avons une construction avec des erreurs.  Nous avons formé les exigences que notre système doit satisfaire. <br><br><h3>  Exigences de changement de version du logiciel </h3><br>  Il existe trois de ces exigences: <br><br><img src="https://habrastorage.org/webt/ou/qm/ma/ouqmmajckkplivqpqoiuwsvs3hs.jpeg"><br><br><ul><li>  Nous devons rapidement annuler le déploiement. </li><li>  Nous devons minimiser l'impact d'un déploiement infructueux. </li><li>  Et nous devons pouvoir nous coincer rapidement en parallèle. <br>  Dans cet ordre!  Pourquoi?  Parce que, tout d'abord, lors du déploiement de la nouvelle version, la vitesse n'a pas d'importance, mais il est important pour vous, si quelque chose ne va pas, de revenir rapidement en arrière et d'avoir un impact minimal.  Mais si vous avez un ensemble de versions sur la production, pour lesquelles il s'est avéré qu'il y a une erreur (comme de la neige sur la tête, il n'y a pas eu de déploiement, mais l'erreur est contenue) - la vitesse du déploiement suivant est importante pour vous.  Qu'avons-nous fait pour répondre à ces exigences?  Nous avons recouru à une telle méthodologie: <br><br><img src="https://habrastorage.org/webt/bx/xn/9h/bxxn9hd10bckeqbycqanabweery.jpeg"><br><br>  C'est bien connu, nous n'avons pas inventé une seule fois - c'est le déploiement Blue / Green.  Qu'est ce que c'est  Vous devez avoir une copie pour chaque groupe de serveurs sur lesquels vos applications sont installées.  La copie est «chaude»: il n'y a pas de trafic dessus, mais à tout moment ce trafic peut être envoyé à cette copie.  Cette copie contient la version précédente.  Et au moment du déploiement, vous déployez le code sur une copie inactive.  Basculez ensuite une partie du trafic (ou la totalité) vers la nouvelle version.  Ainsi, pour changer le flux de trafic de l'ancienne version vers la nouvelle, vous n'avez qu'à effectuer une seule action: vous devez changer l'équilibreur en amont, changer la direction - d'une en amont à une autre.  Ceci est très pratique et résout le problème de la commutation rapide, de la restauration rapide. <br><br>  Ici, la solution à la deuxième question est la minimisation: vous ne pouvez mettre sur une nouvelle ligne, sur une ligne avec un nouveau code qu'une partie de votre trafic (soit, par exemple, 2%).  Et ces 2% - ils ne sont pas à 100%!  Si vous avez perdu 100% du trafic lors d'un déploiement infructueux - c'est effrayant, si vous avez perdu 2% du trafic - c'est désagréable, mais ce n'est pas effrayant.  De plus, les utilisateurs ne le remarqueront probablement même pas, car dans certains cas (pas tous) le même utilisateur, en appuyant sur F5, il sera redirigé vers une autre version de travail. <br><br><h3>  Déploiement bleu / vert.  Acheminement </h3><br>  De plus, tout n'est pas si simple «Blue / Green Deploy» ... Tous nos composants peuvent être divisés en trois groupes: <br><br><ul><li>  Il s'agit de l'interface (pages de paiement que nos clients voient); </li><li>  noyau de traitement; </li><li>  un adaptateur pour travailler avec les systèmes de paiement (banques, MasterCard, Visa ...). </li></ul><br>  Et il y a une nuance - la nuance est le routage entre les lignes.  Si vous changez simplement 100% du trafic, vous n'avez pas ces problèmes.  Mais si vous voulez changer de 2%, les questions commencent: "Comment faire?" La chose la plus simple sur le front: vous pouvez sélectionner au hasard Round Robin dans nginx, et il vous reste 2%, 98% - à droite.  Mais cela ne convient pas toujours. <br><br>  Ici, par exemple, l'utilisateur interagit avec le système dans plus d'une demande.  C'est normal: 2, 3, 4, 5 requêtes - vos systèmes peuvent être les mêmes.  Et s'il est important pour vous que toutes les demandes des utilisateurs arrivent sur la même ligne que la première demande, ou (deuxième moment) toutes les demandes des utilisateurs arrivent sur une nouvelle ligne après le changement (il pourrait commencer à travailler plus tôt avec le système, avant le changement), - alors cette distribution aléatoire ne vous convient pas.  Ensuite, il y a les options suivantes: <br><br><img src="https://habrastorage.org/webt/hs/3f/fq/hs3ffqgbcy8wu3lzopom58r6tlm.jpeg"><br><br>  La première option, la plus simple - basée sur les paramètres de base du client (IP Hash).  Vous avez une adresse IP et vous partagez de droite à gauche par IP.  Ensuite, le deuxième cas décrit par moi fonctionnera pour vous lorsqu'il y a eu un déploiement, l'utilisateur peut déjà commencer à travailler avec votre système, et à partir du moment du déploiement, toutes les demandes iront sur une nouvelle ligne (sur la même, disons). <br><br>  Si pour une raison quelconque, cela ne vous convient pas et que vous devez envoyer des demandes à la ligne où la demande principale et intime de l'utilisateur est arrivée, vous avez deux options ... <br>  La première option: vous pouvez prendre nginx + payé.  Il existe un mécanisme de sessions persistantes qui, à la demande initiale de l'utilisateur, expose une session à l'utilisateur et la lie à un amont en particulier.  Toutes les demandes d'utilisateurs ultérieures au cours de la durée de la session iront au même en amont où la session a été définie. <br><br>  Cela ne nous convenait pas, car nous avions déjà un nginx normal.  Changer de nginx + n'est pas que c'est cher, c'était juste un peu pénible pour nous et pas très juste.  Par exemple, «Sticks Sessions» n'a pas fonctionné pour nous pour la simple raison que «Sticks Sessions» ne donne pas la possibilité de suivre l'itinéraire sur la base de «Eli-or».  Vous pouvez y spécifier ce que nous faisons «Sticky Sessions», par exemple, par IP ou par IP et par cookie ou par paramètre de publication, mais «Eli-or» est déjà plus compliqué là-bas. <br><br>  Par conséquent, nous sommes arrivés à la quatrième option.  Nous avons pris nginx sur les "stéroïdes" (c'est openresty) - c'est le même nginx qui supporte en outre l'inclusion des derniers scripts.  Vous pouvez écrire un dernier script, glisser ce «ouvert», et ce dernier script sera exécuté quand une demande d'utilisateur arrivera. <br><br>  Et nous avons écrit, en fait, un tel script, nous nous sommes mis «openrest» et dans ce script, nous trions 6 paramètres différents pour la concaténation de «Or».  Selon la disponibilité de tel ou tel paramètre, on sait que l'utilisateur est venu sur une page ou sur une autre, sur une ligne ou sur une autre. <br><br><h3>  Déploiement bleu / vert.  Avantages et inconvénients </h3><br>  Bien sûr, nous pourrions probablement le rendre un peu plus facile (utiliser les mêmes «Sticky Sessions»), mais nous avons encore une telle nuance que non seulement l'utilisateur interagit avec nous dans le cadre d'un traitement d'une transaction ... Mais les systèmes de paiement interagissent également avec nous: nous, après avoir traité la transaction (en envoyant une demande au système de paiement), nous recevons un rappel. <br>  Et supposons que si à l'intérieur de notre circuit, nous pouvons exécuter l'adresse IP de l'utilisateur dans toutes les demandes et séparer les utilisateurs en fonction de l'adresse IP, alors nous ne dirons pas le même «Visa»: «Mec, nous sommes une telle entreprise rétro, nous sommes une sorte d'international (sur le site et dans De la Russie) ... Et s'il vous plaît donnez-nous un coup d'oeil à l'adresse IP de l'utilisateur dans un champ supplémentaire, votre protocole est standardisé! "  Des affaires claires, ils ne seront pas d'accord. <br><br><img src="https://habrastorage.org/webt/he/5o/-w/he5o-wivis5fucv4e7_1wn1qz3y.jpeg"><br><br>  Par conséquent, pour nous, cela ne convenait pas - nous avons fait ouvertement.  En conséquence, avec le routage, nous avons obtenu comme ceci: <br><br>  Le Blue / Green Deploy a, respectivement, les avantages dont j'ai parlé et les inconvénients. <br><br>  Inconvénient deux: <br><br><ul><li>  vous devez vous soucier du routage; </li><li>  le deuxième inconvénient principal est le coût. </li></ul><br>  Vous avez besoin de deux fois plus de serveurs, vous avez besoin de deux fois plus de ressources opérationnelles, vous devez dépenser deux fois plus d'efforts pour maintenir tout ce zoo. <br><br>  Soit dit en passant, parmi les avantages se trouve une autre chose que je n'ai pas mentionnée auparavant: vous avez une réserve en cas d'augmentation de la charge.  Si vous avez une croissance explosive de la charge, un grand nombre d'utilisateurs vous sont tombés dessus, alors vous incluez simplement la deuxième ligne dans la distribution de 50 à 50 - et vous avez immédiatement 2 serveurs dans votre cluster jusqu'à ce que vous résolviez le problème d'avoir des serveurs. <br><br><h3>  Comment faire un déploiement rapide? </h3><br>  Nous avons parlé de la façon de résoudre le problème de la minimisation et de la restauration rapide, mais la question demeure: "Comment déployer rapidement?" <br><br><img src="https://habrastorage.org/webt/vy/8l/xo/vy8lxokper6luvftog4okdvgbh4.jpeg"><br><br>  Voici bref et simple. <br><br><ul><li>  Vous devez avoir un système de CD (livraison continue) - sans lui, nulle part.  Si vous avez un serveur, vous pouvez vous retrouver avec des stylos.  Nous avons environ un millier et demi de serveurs et 1 500 poignées, bien sûr - nous pouvons planter un département de la taille de cette salle, uniquement pour le déployer. </li><li>  Le déploiement doit être parallèle.  Si vous avez un déploiement cohérent, alors tout va mal.  Un serveur est normal, vous déploierez un millier et demi de serveurs toute la journée. </li><li>  Encore une fois, pour accélérer, ce n'est plus nécessaire, probablement.  Lorsque desploey construire généralement le projet.  Vous avez un projet web, il y a une partie front-end (vous faites un pack web là-bas, npm collecte quelque chose comme ça), et ce processus, en principe, est de courte durée - 5 minutes, mais ces 5 minutes peuvent être critiques.  Par conséquent, par exemple, nous ne faisons pas cela: nous avons supprimé ces 5 minutes, nous déployons des artefacts. <br><br>  Qu'est-ce qu'un artefact?  Un artefact est une construction assemblée dans laquelle la totalité de la pièce d'assemblage est déjà terminée.  Nous stockons cet artefact dans le stockage d'artefacts.  Nous avons utilisé deux de ces stockages à la fois - c'était Nexus et maintenant jFrog Artifactory.) Nous avons d'abord utilisé le Nexus parce que nous avons commencé à pratiquer cette approche dans les applications java (cela lui convenait bien).  Ensuite, ils y ont mis la partie des applications écrites par PHP;  et le Nexus ne convenait plus, et nous avons donc choisi jFrog Artefactory, qui peut produire presque tout.  Nous sommes même venus au fait que dans ce stockage d'artefacts, nous stockons nos propres packages binaires, que nous collectons pour les serveurs. </li></ul><br><h3>  Croissance de la charge explosive </h3><br>  Nous avons parlé de changer la version du logiciel.  La prochaine chose que nous avons est une croissance explosive de la charge.  Ici, je comprends probablement que la croissance explosive de la charge n'est pas tout à fait la bonne chose ... <br><br>  Nous avons écrit un nouveau système - il est orienté services, à la mode, partout, les travailleurs, partout les files d'attente, partout l'asynchronie.  Et dans de tels systèmes, les données peuvent suivre un flux différent.  Pour la première transaction, le 1er, 3ème, 10ème travailleur peut être impliqué, pour la deuxième transaction - 2ème, 4ème, 5ème.  Et aujourd'hui, disons, le matin, vous avez un flux de données qui utilise les trois premiers travailleurs, et le soir, il change radicalement, et tout utilise les trois autres travailleurs. <br><br>  Et ici, il s'avère que vous devez en quelque sorte faire évoluer les travailleurs, vous devez en quelque sorte faire évoluer vos services, mais en même temps empêcher le gonflement des ressources. <br><br><img src="https://habrastorage.org/webt/wg/1t/kr/wg1tkrnswlv954eaws3dj1ije_a.jpeg"><br><br>  Nous avons déterminé les exigences pour nous-mêmes.    :    Service discovery,  –       ,    –   .  ,      ,    .   «»,   «»,    . <br><br>     ?    .       70  .      «»,  «» ,  ,        .    100   «»,        100     .         .  ,    –  24/7   ,      ,    ,  70   ,  . <br><br>     «»,     IP     Scale-Nomad – ScaleNo,    :                 .  ,  : «  ?»     –  ,   . <br><br>        ,       ,  ,     ,    ,       –  , .     3-5  –   . <br><br><img src="https://habrastorage.org/webt/8z/ja/m0/8zjam0uickgtjt67yl6grtzfmao.jpeg"><br><br>  Comment ça marche?  !  :       :   ,  –   ,   –  ,  –  . <br><br>  ,     .         45  –     .       2         ,     (    – ,   ).     –    ,  5-10 ,    . <br><br>     «»,      ,  «»      .  ,    ,    –       .     .    № 2 – «    ». <br><br><h3> .    ? </h3><br>    – «   ?» !      .      ? <br><br><img src="https://habrastorage.org/webt/md/xm/op/mdxmopdox-kznqvid9b4uesleeg.jpeg"><br><br>  ! <br><br><ul><li>           . </li><li>       ,   ,     . </li><li>   –   .      ,     ,   -  . </li></ul><br>  , ,     .   .  ,    .    « ».       : <br><br><img src="https://habrastorage.org/webt/8w/1z/w4/8w1zw4dq1rwsz7e7dg7tp53wbke.jpeg"><br><br>   «»    «»,     . «»     . «»  «»      ,      ,   –  «»  «»,  – «»  «»  Telegraf. <br><br>      New Relic.  ,   .     ,    .       1,5  ,    , : «     ».    ,  ,     .    «-» ,    15     «-».    . <br><br>    ,     –  Debugger.     «»,       ,  ,    «».  Qu'est ce que c'est  ,     15-30    ,  « » ,      . <br><br> ,    ( ) –      ,    .   ,    «» – ,   «» .       –     ,  ,  ,     . <br><br><h3>     ? </h3><br>     ?     ? <br><br><img src="https://habrastorage.org/webt/8c/qe/tn/8cqetn3kfyedayuv9fwc8qpx4vq.jpeg"><br><br><ul><li> Response time / RPS   –   .   ,    -  . </li><li>      . </li><li>  . </li><li>   . </li></ul><br>   – «», «» .       ,    - ,      .     –   (        ).    -    5-10-15  – ,     (  ). <br><br>      –     : <br><br><img src="https://habrastorage.org/webt/73/xa/jg/73xajgyfx9xahrr_9hl3ysaapgw.jpeg"><br><br>    – 6 ,     –       .    – RPS, RTS.  –    «».   «»     ,  -       …      ,    . <br><br> ,      –       .    OpenTracing – , , ,     ;    .  OpenTracing-   ,       .     ,       , .  ,      ,   . <br><br><img src="https://habrastorage.org/webt/42/nw/5h/42nw5hrsai8-i8t3bnsclajtklw.jpeg"><br><br>   ,         3  –    .     ,   ,    20-30 . <br><br>     ,   –   . <br><br>  ,  ,     ,        ,   .   ,    . <br><br><img src="https://habrastorage.org/webt/d8/pz/1v/d8pz1vfzv9otccv6dsa-crqiuuu.jpeg"><br><br>      ? ,  :     (,  «»);   , .         ,   ,  …      –        -.   ,   : «        »? <br><br>   …       -,   ( )    ,      .    :       – ,      ,     ( ).    ,    -        .     !      .         . <br><br>      ,    . <br><br><h3>     </h3><br>   ,    –   ,    ,  ,     ,      ,    -   . ,   ,   . <br><br><img src="https://habrastorage.org/webt/e2/kb/jz/e2kbjzy9w7wvv6kicbniocak4ac.jpeg"><br><br>      (  – ),       ELK Stack –    .  -, ,   ELK,      ,       ELK.    . <br><br><img src="https://habrastorage.org/webt/_f/8a/3i/_f8a3ibc2i7os5pp3xot6m9_gxo.jpeg"><br><br>   .  ,    ,  ,     ,   «»,   id-       ( ).        .  Pourquoi?    ,      ,      .      ,     –   OpenTracing,    . <br><br>     ,      ,      –  «» (Zipkin)  «» (Jaeger). «» –      ,   «».  «»  ,  ,     ,      ,   .  «»  . <br><br>   «»:   ,    Api ( Api  PHP   , ,    –   ,    ),     . «», –  ,    .    ?     : <br><br><img src="https://habrastorage.org/webt/uq/x2/mu/uqx2muumblbudpbjnuittfrsdkk.jpeg"><br><br>  «»     span'.  ,    ,           (1-2-3 –      ,   ).      ,        . ,          Error.     Error    ,      .    ,    span: <br><br><img src="https://habrastorage.org/webt/3e/is/fk/3eisfkpsc9mkuipyg-5iaob2d-y.jpeg"><br><br>     .       ,       ,   .        :    –  ,   ,            . <br><br> ,    .    ,    .      ,      «»   PHP –   , welcome to use,  : <br><br><img src="https://habrastorage.org/webt/q7/vi/pc/q7vipcgfujbggn_zt64r3h7foay.jpeg"><br><br>     –     OpenTracing Api,   php-extention,          .      .     ,   .   :     ,    extention up to you. <br><br><h3>   </h3><br>    .   –   .   ?    : <br><br><img src="https://habrastorage.org/webt/3h/ka/zo/3hkazonrypgjcuakfff1yrutxlc.jpeg"><br><br>    «»?        , !  «»       ,    ,        ,      .     ? <br><br><img src="https://habrastorage.org/webt/b7/h6/qa/b7h6qavqwtn9fm9bam0jbg07nym.jpeg"><br><br><ul><li>     .      ,  .    60   ,        .     , ,         – ,   . </li><li>    .          ,     ,        RnD-.       ,      (,    ) ,    ,   . </li><li>     ,   – ,     .       . </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous avons des tolérances. </font><font style="vertical-align: inherit;">Par exemple, nous ne considérons pas les temps d'arrêt si nous avons perdu 2% du trafic en deux minutes. </font><font style="vertical-align: inherit;">Cela, en principe, ne rentre pas dans nos statistiques. </font><font style="vertical-align: inherit;">Si plus en pourcentage ou en temps, on compte déjà.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Et nous écrivons toujours post-mortem. </font><font style="vertical-align: inherit;">Quoi qu'il nous arrive, toute situation où elle se comporte de manière inappropriée sur le site de production se reflétera dans le potsortem. </font><font style="vertical-align: inherit;">Un post-mortem est un document dans lequel vous écrivez ce qui vous est arrivé, le calendrier détaillé de ce que vous avez fait pour le réparer et (c'est un bloc obligatoire!) Ce que vous ferez pour éviter que cela ne se reproduise à l'avenir. </font><font style="vertical-align: inherit;">Cela est nécessaire, nécessaire pour une analyse ultérieure.</font></font></li></ul><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Que considérer les temps d'arrêt? </font></font></h3><br><img src="https://habrastorage.org/webt/ad/8v/ye/ad8vyesevuqquvkj4rtf15hggd8.jpeg"><br><br>  À quoi tout cela a-t-il conduit? <br><br>  Cela a conduit au fait que (nous avons eu certains problèmes de stabilité, cela ne nous convenait ni aux clients ni à nous) au cours des 6 derniers mois, notre indicateur de stabilité s'est élevé à 99,97.  On peut dire que ce n'est pas beaucoup.  Oui, nous avons quelque chose à rechercher.  Environ la moitié de cet indicateur est la stabilité, pour ainsi dire, pas la nôtre, mais notre pare-feu d'application Web, qui se tient devant nous et est utilisé comme service, mais cela n'a pas d'importance pour les clients. <br><br>  Nous avons appris à dormir la nuit.  Enfin!  Il y a six mois, nous ne savions pas comment.  Et sur cette note avec les résultats, je veux faire une remarque.  Hier soir, il y a eu un merveilleux rapport sur un système de contrôle de réacteur nucléaire.  Si les personnes qui ont écrit ce système m'entendent, veuillez oublier ce que j'ai dit à propos de «2% n'est pas un temps d'arrêt».  Pour vous, 2% est un temps d'arrêt, même si cela dure deux minutes "! <br><br>  C’est tout!  Vos questions. <br><br><img src="https://habrastorage.org/webt/us/ih/xg/usihxgshbsygnv59b5detm4js5m.jpeg"><br><br><h3>  À propos des équilibreurs et de la migration de base de données </h3><br>  Question du public (ci-après - B): - Bonsoir.  Merci beaucoup pour un tel rapport administrateur!  La question est courte au sujet de vos équilibreurs.  Vous avez mentionné que vous avez WAF, c'est-à-dire, si je comprends bien, vous utilisez une sorte d'équilibreur externe ... <br><br>  <b>:</b> - Non, nous utilisons nos services comme équilibreur.  Dans ce cas, WAF est pour nous uniquement un outil de protection DDoS. <br><br>  <b>Q:</b> - Pourriez-vous dire quelques mots sur les équilibreurs? <br><br>  <b>EK:</b> - Comme je l'ai dit, c'est un groupe de serveurs en openresty.  Nous avons maintenant 5 groupes de serveurs redondants qui répondent exclusivement ... c'est-à-dire, un serveur sur lequel est exclusivement ouvert, il ne fait que proxy du trafic.  Par conséquent, pour comprendre combien nous détenons: nous avons maintenant un flux de trafic régulier - c'est plusieurs centaines de mégabits.  Ils se débrouillent, ils se sentent bien, ils ne se fatiguent même pas. <br><br>  <b>Q:</b> - Aussi une question simple.  Il y a un déploiement bleu / vert.  Et que faites-vous, par exemple, avec les migrations à partir de la base de données? <br><br>  <b>EK:</b> - Bonne question!  Regardez, nous dans le déploiement bleu / vert avons des lignes distinctes pour chaque ligne.  Autrement dit, si nous parlons des lignes d'événements qui sont transmises du travailleur au travailleur, il existe des lignes distinctes pour la ligne bleue et la ligne verte.  Si nous parlons de la base de données elle-même, nous l'avons délibérément réduite, car nous pourrions tout mettre presque en ligne, nous n'avons qu'une pile de transactions dans la base de données.  Et nous avons une seule pile de transactions pour toutes les lignes.  Avec une base de données dans ce contexte: nous ne la partageons pas avec le bleu et le vert, car les deux versions du code devraient savoir ce qui se passe avec la transaction. <br><br>  Mes amis, j'ai encore un si petit prix pour vous stimuler - un livre.  Et je dois lui donner la meilleure question. <br><br>  <b>Q:</b> - Bonjour.  Merci pour le rapport.  La question est la suivante.  Vous surveillez les paiements, vous surveillez les services avec lesquels vous communiquez ... Mais comment surveillez-vous pour qu'une personne vienne d'une manière ou d'une autre sur votre page de paiement, effectue un paiement et que le projet lui attribue de l'argent?  Autrement dit, comment contrôlez-vous que le marchant est disponible et avez accepté votre rappel? <br><br>  <b>:</b> - «Marchand» pour nous dans ce cas est exactement le même service externe que le système de paiement.  Nous surveillons la vitesse de réponse du "marchand". <br><br><h3>  À propos du chiffrement de la base de données </h3><br>  <b>Q:</b> - Bonjour.  J'ai une petite question.  Vous disposez de données PCI DSS sensibles.  Je voulais savoir comment vous stockez des PAN dans des files d'attente dans lesquelles vous devez placer?  Utilisez-vous un cryptage?  Et à partir de là, la deuxième question suivante se pose: sur PCI DSS, il est nécessaire de rechiffrer périodiquement la base de données en cas de changements (licenciement des administrateurs, etc.) - comment cela se produit-il avec l'accessibilité? <br><br><img src="https://habrastorage.org/webt/0z/oh/29/0zoh293lif-ioxouzt79ui9j98a.jpeg"><br><br>  <b>EK:</b> - Magnifique question!  Premièrement, nous ne stockons pas de PAN dans les files d'attente.  Nous n'avons pas le droit de stocker PAN n'importe où en clair, donc en principe, nous utilisons un service spécial (nous l'appelons "Kademon") - c'est un service qui ne fait qu'une chose: il reçoit un message et envoie un message crypté.  Et nous stockons tout avec ce message crypté.  En conséquence, la longueur clé pour nous est inférieure à kilo-octets, de sorte qu'elle soit directe sérieusement et fiable. <br><br>  <b>Q:</b> - Avez-vous besoin de 2 kilo-octets maintenant? <br><br>  <b>EK:</b> - On dirait qu'hier c'était 256 ... Eh bien, où d'autre?! <br><br>  C'est donc le premier.  Et deuxièmement, la solution qui existe, elle prend en charge la procédure de recryptage - il y a deux paires de «gâteaux» (clés) qui donnent des «decks» qui cryptent (les clés sont des clés, dek sont des dérivés des clés qui cryptent).  Et dans le cas de l'initiation de la procédure (elle a lieu régulièrement, de 3 mois à ± certains), nous téléchargeons une nouvelle paire de «gâteaux», et nous faisons rechiffrer les données.  Nous avons des services séparés qui arrachent toutes les données, les cryptent d'une nouvelle manière;  les données sont stockées à côté de l'identifiant de clé avec lequel elles sont cryptées.  En conséquence, dès que nos données sont cryptées avec de nouvelles clés, nous supprimons l'ancienne clé. <br><br><h3>  Parfois, vous devez effectuer des paiements manuellement ... </h3><br>  <b>Q:</b> - Autrement dit, si un retour est venu pour une opération, alors le déchiffrer avec l'ancienne clé? <br><br>  <b>CE:</b> - Oui. <br><br>  <b>Q:</b> - Puis une autre petite question.  En cas d'échec, de chute, d'incident, il est nécessaire de pousser la transaction en mode manuel.  Il y a une telle situation. <br><br>  <b>EK:</b> - Oui, c'est vrai. <br><br>  <b>Q:</b> - Où obtenez-vous ces données?  Ou allez-vous vous-même avec des stylos dans ce magasin? <br><br>  <b>EK:</b> - Non, bien sûr - nous avons une sorte de système de back-office qui contient une interface pour notre support.  Si nous ne savons pas dans quel état se trouve la transaction (par exemple, alors que le système de paiement n'a pas répondu avec un délai), nous ne savons pas a priori, c'est-à-dire que nous attribuons le statut final uniquement en toute confiance.  Dans ce cas, nous transférons la transaction dans un statut spécial pour le traitement manuel.  Le matin, le lendemain, dès que le support reçoit des informations indiquant que de telles transactions restent dans le système de paiement, il les traite manuellement dans cette interface. <br><br><img src="https://habrastorage.org/webt/um/1e/qe/um1eqefsegdtcvv8gczvx2qe54o.jpeg"><br><br>  <b>Q:</b> - J'ai quelques questions.  L'un d'eux est la continuation de la zone PCI DSS: comment obtenir leurs journaux de boucle?  Une telle question car le développeur pourrait mettre n'importe quoi dans les journaux!  Deuxième question: comment déployer les correctifs?  Les stylos dans la base de données sont une option, mais il peut y avoir des correctifs logiciels gratuits - quelle est la procédure là-bas?  Et la troisième question est probablement liée à RTO, RPO.  Votre disponibilité était de 99,97, presque quatre neuf, mais si je comprends bien, vous avez un deuxième centre de données, un troisième centre de données et un cinquième centre de données ... Comment gérez-vous leur synchronisation, leur réplication, tout le reste? <br><br>  <b>EK:</b> - Commençons par le premier.  La première question sur les journaux était?  Lorsque nous écrivons des journaux, nous avons une couche qui masque toutes les données sensibles.  Elle regarde le masque et les champs supplémentaires.  En conséquence, nos journaux contiennent des données déjà masquées et une boucle PCI DSS.  C'est l'une des tâches régulières assignées au département de test.  Ils sont obligés de vérifier chaque tâche, y compris les journaux qu'ils écrivent, et c'est l'une des tâches régulières de la revue de code, afin de contrôler que le développeur n'a pas écrit quelque chose.  Une vérification ultérieure est effectuée régulièrement par le service de la sécurité de l'information environ une fois par semaine: les journaux sont pris de manière sélective pour le dernier jour, et ils sont exécutés à travers un analyseur-scanner spécial à partir de serveurs de test pour vérifier tout cela. <br>  À propos des correctifs.  Cela est inclus dans notre calendrier de déploiement.  Nous avons un élément distinct sur les correctifs.  Nous pensons que nous déployons des correctifs 24h / 24 lorsque nous en avons besoin.  Dès que la version est assemblée, dès qu'elle est exécutée, dès que nous avons l'artefact, nous obtenons l'administrateur système sur appel du support, et il le déploiera au moment où cela sera nécessaire. <br><br>  À propos des «quatre neuf».  Le nombre que nous avons maintenant, il a vraiment été atteint, et nous l'avons cherché dans un autre centre de données.  Nous avons maintenant un deuxième centre de données, et nous commençons à faire le trajet entre eux, et la question du centre de réplication inter-données est vraiment une question non triviale.  Nous avons essayé de le résoudre en temps voulu par différents moyens: nous avons essayé d'utiliser la même "Tarentule" - cela n'a pas fonctionné pour nous, je dis tout de suite.  Par conséquent, nous sommes arrivés au fait que nous faisons manuellement l'ordre de la "sensation".  Nous avons en effet toutes les applications en mode asynchrone des synchronisations nécessaires "change - done" entre les centres de données. <br><br>  <b>Q:</b> - Si vous en avez un deuxième, alors pourquoi pas un troisième?  Parce que personne n'a encore le cerveau divisé ... <br><br>  <b>:</b> - Et nous n'avons pas de cerveau divisé.  Étant donné que chaque application pilote un multimaître, peu importe le centre auquel la demande est adressée.  Nous sommes prêts pour le fait que, dans le cas où un centre de données tombe en panne (nous sommes sur lui) et au milieu de la demande d'un utilisateur transféré vers un deuxième centre de données, nous sommes prêts à perdre cet utilisateur, vraiment;  mais ce seront des unités, des unités absolues. <br><br>  <b>Q:</b> - Bonsoir.  Merci pour le rapport.  Vous avez parlé de votre débogueur, qui entraîne certaines transactions de test en production.  Mais parlez-nous des transactions de test!  Jusqu'où va-t-il? <br><br>  <b>EC:</b> - Il passe par le cycle complet de l'ensemble du composant.  Il n'y a aucune différence entre la transaction de test et celle de combat pour le composant.  Et du point de vue de la logique, ce n'est qu'un projet distinct dans le système, sur lequel seules les transactions de test sont poursuivies. <br><br>  <b>Q:</b> - Et où le coupez-vous?  Alors Core a envoyé ... <br><br>  <b>:</b> - Nous sommes derrière "Kor" dans ce cas pour les transactions de test ... Nous avons une chose telle que le routage: "Kor" sait à quel système de paiement envoyer - nous envoyons à un faux système de paiement, qui donne simplement une réponse http et c'est tout . <br><br>  <b>Q:</b> - Dites-moi s'il vous plaît, avez-vous écrit l'application dans un énorme monolithe, ou l'avez-vous coupé à certains services ou même microservices? <br><br>  <b>:</b> - Nous n'avons pas de monolithe, bien sûr, nous avons une application orientée services.  Nous avons une blague que nous avons un service de monolithes - ils sont vraiment assez grands.  Appeler des microservices dans ce langage ne dérive pas du tout du mot, mais ce sont les services au sein desquels travaillent les travailleurs de machines distribuées. <br><br><h3>  Si le service sur le serveur est compromis ... </h3><br>  <b>Q:</b> - Alors j'ai la question suivante.  Même s'il s'agissait d'un monolithe, vous avez quand même dit que vous avez beaucoup de ces serveurs instantanés, ils traitent tous les données en principe, et la question est: «Si l'un des serveurs instantanés ou de l'application, n'importe quel lien particulier est compromis Ont-ils un contrôle d'accès?  Lequel d'entre eux peut faire quoi?  Qui contacter, pour quelles données? <br><br><img src="https://habrastorage.org/webt/3j/qn/pt/3jqnpt1dfzhas9kn5de1qb6x1lq.jpeg"><br><br>  <b>EK:</b> - Oui, bien sûr.  Les exigences de sécurité sont assez sérieuses.  Premièrement, nous avons un trafic de données ouvert, et les ports ne sont que ceux sur lesquels nous anticipons le trafic à l'avance.  Si le composant communique avec la base de données (par exemple, «Muskul») sur 5-4-3-2, seuls 5-4-3-2 et d'autres ports seront ouverts pour lui, les autres directions de trafic ne seront pas disponibles.  De plus, nous devons comprendre qu'en production, nous avons environ 10 boucles de sécurité différentes.  Et même si l'application a été compromise d'une manière ou d'une autre, Dieu ne plaise, un attaquant ne pourra pas accéder à la console de gestion du serveur, car il s'agit d'une autre zone de sécurité réseau. <br><br>  <b>Q:</b> - Et dans ce contexte, je suis plus intéressé par le moment où vous avez des contrats avec des services - que peuvent-ils faire, par quelles «actions» ils peuvent se contacter ... Et dans le flux normal, certains services spécifiques demandent quels une série, une liste "d'action" sur une autre.  Ils ne semblent pas se tourner vers les autres dans une situation normale, et ils ont d'autres domaines de responsabilité.  Si l'un d'entre eux est compromis, pourra-t-il tirer "l'action" de ce service? .. <br><br>  <b>EK:</b> - Je comprends.  Si dans une situation normale avec un autre serveur, la communication était généralement autorisée, alors oui.  Dans le cadre du contrat SLA, nous ne contrôlons pas que vous n'êtes autorisé que les 3 premières «actions», et 4 «actions» ne vous sont pas autorisées.  C'est probablement redondant pour nous, car nous avons en principe un système de protection à 4 niveaux pour les circuits.  Nous préférons défendre avec des contours plutôt qu'au niveau de l'intérieur. <br><br><h3>  Comment fonctionnent Visa, MasterCard et Sberbank </h3><br>  <b>Q:</b> - Je veux clarifier un instant sur le passage d'un utilisateur d'un centre de données à un autre.  Pour autant que je sache, "Visa" et "MasterCard" fonctionnent sur le protocole synchrone binaire 8583, il existe des mixages.  Et je voulais savoir, maintenant je veux dire passer - est-ce directement «Visa» et «MasterCard» ou vers des systèmes de paiement, vers des traitements? <br><br>  <b>EK:</b> - C'est aux mixes.  Mélanges que nous avons dans un centre de données. <br><br>  <b>Q:</b> - En gros, avez-vous un point de connexion? <br><br>  <b>:</b> - "Vise" et "MasterCard" - oui.  Tout simplement parce que «Visa» et «MasterCard» nécessitent des investissements assez importants dans les infrastructures pour conclure des contrats séparés pour recevoir une deuxième paire de mixages, par exemple.  Ils sont réservés dans le cadre d'un centre de données, mais si, à Dieu ne plaise, le centre de données où les mélanges pour se connecter au "Visa" et "MasterCard" sont morts, alors nous aurons une connexion avec le "Visa" et "MasterCard" perdu ... <br><br>  <b>Q:</b> - Comment peuvent-ils être réservés?  Je sais que "Visa" ne permet en principe qu'une seule connexion! <br><br>  <b>EK:</b> - Ils fournissent eux-mêmes du matériel.  Dans tous les cas, nous avons reçu des équipements redondants en interne. <br><br>  <b>Q:</b> - Autrement dit, le rack de leur Connects Orange? .. <br><br>  <b>CE:</b> - Oui. <br><br>  <b>Q:</b> - Mais comme dans ce cas: si votre centre de données disparaît, devez-vous l'utiliser davantage?  Ou s'agit-il simplement d'un arrêt du trafic? <br><br>  <b>CE:</b> - Non.  Dans ce cas, nous transférons simplement le trafic vers un autre canal, qui, bien sûr, sera plus cher pour nous, plus cher pour les clients.  Mais le trafic ne passera pas par notre connexion directe à la "Visa", "MasterCard", mais par la "Sberbank" conventionnelle (très exagérée). <br><br>  Je suis extrêmement désolé si j'ai blessé des employés de Sberbank.  Mais selon nos statistiques, la Sberbank tombe le plus souvent des banques russes.  En moins d'un mois, quelque chose n'est pas tombé chez Sberbank. <br><br><img src="https://habrastorage.org/webt/u2/pm/rp/u2pmrpkbplsfx65dstp-lsstwcw.jpeg"><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6YB1kMnzyRs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Un peu de publicité :) </h3><br>  Merci de rester avec nous.  Aimez-vous nos articles?  Vous voulez voir des matériaux plus intéressants?  Soutenez-nous en passant une commande ou en recommandant à vos amis <a href="https://ua-hosting.company/cloudvps/nl">des VPS basés sur le cloud pour les développeurs à partir de 4,99 $</a> , un <b>analogue unique de serveurs d'entrée de gamme que nous avons inventés pour vous:</b> <a href="https://habr.com/company/ua-hosting/blog/347386/">Toute la vérité sur les VPS (KVM) E5-2697 v3 (6 cœurs) 10 Go DDR4 480 Go SSD 1 Gbit / s à partir de 19 $ ou comment diviser le serveur?</a>  (les options sont disponibles avec RAID1 et RAID10, jusqu'à 24 cœurs et jusqu'à 40 Go de DDR4). <br><br>  <b>Dell R730xd 2 fois moins cher au centre de données Equinix Tier IV à Amsterdam?</b>  Nous avons seulement <b><a href="https://ua-hosting.company/serversnl">2 x Intel TetraDeca-Core Xeon 2x E5-2697v3 2.6GHz 14C 64GB DDR4 4x960GB SSD 1Gbps 100 TV à partir de 199 $</a> aux Pays-Bas!</b>  <b><b>Dell R420 - 2x E5-2430 2.2Ghz 6C 128GB DDR3 2x960GB SSD 1Gbps 100TB - à partir de 99 $!</b></b>  Pour en savoir plus sur la <a href="https://habr.com/company/ua-hosting/blog/329618/">création d'un bâtiment d'infrastructure.</a>  <a href="https://habr.com/company/ua-hosting/blog/329618/">classe utilisant des serveurs Dell R730xd E5-2650 v4 coûtant 9 000 euros pour un sou?</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr484908/">https://habr.com/ru/post/fr484908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr484898/index.html">Une bonne raison de tester vos dépendances: édition AGPL</a></li>
<li><a href="../fr484900/index.html">Rendu de site Web 101</a></li>
<li><a href="../fr484902/index.html">Sur les équations de degrés supérieurs</a></li>
<li><a href="../fr484904/index.html">Une année sans Splunk - comment une entreprise américaine a changé le marché de l'analyse des données machine en Russie et qu'elle a laissé derrière</a></li>
<li><a href="../fr484906/index.html">Équipe distribuée et chef d'équipe à distance</a></li>
<li><a href="../fr484910/index.html">Paul Graham: Haters</a></li>
<li><a href="../fr484918/index.html">Processus d'annotation incrémentielle pour accélérer les constructions Gradle</a></li>
<li><a href="../fr484920/index.html">Comment comprendre que vous êtes opérateur de fraiseuse?</a></li>
<li><a href="../fr484930/index.html">Faisons du fastcode comme des professionnels</a></li>
<li><a href="../fr484932/index.html">La double nature des exigences logicielles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>