<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôçüèæ ü•á ü§úüèæ Cree un monorepository con espacios de trabajo de lerna e hilo ü§ôüèº ‚¨ÜÔ∏è üèÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En los √∫ltimos a√±os, el concepto de mono-repositorios se ha establecido con √©xito, ya que puede simplificar significativamente el proceso de desarroll...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cree un monorepository con espacios de trabajo de lerna e hilo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448766/"><img src="https://habrastorage.org/webt/ka/j9/hb/kaj9hbw5yqq7pouoa9ad-aqhdio.jpeg" alt="aprender e hilo"><br><br>  En los √∫ltimos a√±os, el concepto de <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mono-repositorios se ha</a></b> establecido <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">con</a></b> √©xito, ya que puede simplificar significativamente el proceso de desarrollo de proyectos de software modular, como las infraestructuras basadas en microservicios.  Las principales ventajas de este enfoque arquitect√≥nico son obvias en la pr√°ctica, por lo tanto, propongo crear su propio <b>mono-repositorio</b> de prueba desde cero, al mismo tiempo que comprende los matices de trabajar con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">espacios de trabajo de hilo</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lerna</a> .  Bueno, empecemos! <br><br>  Considere la estructura de nuestro proyecto, que ser√°n tres bibliotecas ubicadas en la carpeta <i>paquetes /</i> , as√≠ como <i>package.json</i> en el directorio ra√≠z. <br><br><pre><code class="bash hljs">‚îú‚îÄ‚îÄ package.json ‚îî‚îÄ‚îÄ packages ‚îú‚îÄ‚îÄ app ‚îÇ  ‚îú‚îÄ‚îÄ index.js ‚îÇ  ‚îî‚îÄ‚îÄ package.json ‚îú‚îÄ‚îÄ first ‚îÇ  ‚îú‚îÄ‚îÄ index.js ‚îÇ  ‚îî‚îÄ‚îÄ package.json ‚îî‚îÄ‚îÄ second ‚îú‚îÄ‚îÄ index.js ‚îî‚îÄ‚îÄ package.json</code> </pre> <br>  Se entiende que tenemos dos bibliotecas independientes <i>primero</i> y <i>segundo</i> , as√≠ como una biblioteca de <i>aplicaciones</i> que importar√° funciones de las dos primeras.  Por conveniencia, los tres paquetes se colocan en el directorio de <i>paquetes</i> .  Puede dejarlos en la carpeta ra√≠z o ponerlos en un directorio con cualquier otro nombre, pero para seguir las convenciones generalmente aceptadas, los colocaremos de esta manera. <br><a name="habracut"></a><br>  Las bibliotecas <i>primero</i> y <i>segundo</i> para simplificar el experimento contendr√°n solo una funci√≥n en <i>index.js</i> , cada una de las cuales devolver√° una cadena de saludo en nombre del m√≥dulo.  Para el <i>primer</i> ejemplo, se ver√° as√≠: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/first/index.js const first = () =&gt; 'Hi from the first module'; module.exports = first;</span></span></code> </pre> <br>  En el m√≥dulo de la <i>aplicaci√≥n</i> , mostraremos el mensaje <i>Hola desde la aplicaci√≥n</i> en la consola, as√≠ como saludos desde otros dos paquetes: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/app/index.js const first = require('@monorepo/first'); const second = require('@monorepo/second'); const app = () =&gt; 'Hi from the app'; const main = () =&gt; { console.log(app()); console.log(first()); console.log(second()); }; main(); module.exports = { app, main };</span></span></code> </pre> <br>  Para que el <i>primero</i> y el <i>segundo</i> est√©n disponibles en la <i>aplicaci√≥n</i> , los denotamos como dependencias en <i>dependencias</i> . <br><br>  Adem√°s, para cada biblioteca agregamos el prefijo <i>@ monorepo /</i> en el <i>nombre</i> del valor delante del nombre principal del paquete al paquete <i>local.json</i> . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/app/package.json { "name": "@monorepo/app", "version": "1.0.0", "main": "index.js", "license": "MIT", "dependencies": { "@monorepo/first": "^1.0.0", "@monorepo/second": "^1.0.0" } }</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">¬øPor qu√© necesito un prefijo con un icono de perro delante del nombre del paquete npm (@ monorepo /)?</b> <div class="spoiler_text">  Agregar un prefijo es opcional, pero esta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">es</a> exactamente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la convenci√≥n de</a> denominaci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de</a> paquetes a la que se adhieren muchos monorepositorios: <br>  <a href="">material ui</a> , <a href="">angular</a> y otros.  El hecho es que cada usuario u organizaci√≥n tiene su propio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">alcance</a> en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio</a> web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">npm</a> , por lo que hay una garant√≠a de que todos los m√≥dulos con <i>@ somescope /</i> postfix son creados por el equipo de <i>somescope</i> y no por los atacantes.  Adem√°s, se hace posible llamar a los nombres de m√≥dulos que ya est√°n en uso.  Por ejemplo, no puede simplemente tomar y crear su propio m√≥dulo de <i>utilidades</i> , porque esa biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ya existe</a> .  Sin embargo, agregando el postfix <i>@ myscopename /</i> podemos obtener nuestras <i>utilidades</i> ( <i>@ myscopename / utils</i> ) con blackjack y se√±oritas. <br></div></div><br>  Un an√°logo de la vida real para nuestro proyecto de prueba puede ser varias bibliotecas para trabajar con datos, herramientas de validaci√≥n, an√°lisis o simplemente un conjunto de componentes de la interfaz de usuario.  Si suponemos que vamos a desarrollar una aplicaci√≥n <i>web</i> y <i>m√≥vil</i> (por ejemplo, usando <i>React</i> y <i>React Native,</i> respectivamente), y tenemos parte de la l√≥gica reutilizada, puede valer la pena ponerla en componentes separados, para su uso posterior en otros proyectos.  Agregue a esto el servidor en <i>Node.js</i> y obtendr√° un caso muy real de la vida. <br><br><h3>  Espacios de trabajo de hilo </h3><br>  El toque final antes de crear un <b>repositorio mono</b> completo ser√° el dise√±o de <i>package.json</i> en la ra√≠z de nuestro repositorio.  Preste atenci√≥n a la propiedad de <i>espacios de trabajo</i> : especificamos el valor de los <i>paquetes / *</i> , que significa "todas las subclaves en la carpeta de <i>paquetes</i> ".  En nuestro caso, esta es la <i>aplicaci√≥n</i> , <i>primero</i> , <i>segundo</i> . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// package.json { "name": "monorepo", "version": "1.0.0", "main": "packages/app/index.js", "license": "MIT", "private": true, "workspaces": [ "packages/*" ] }</span></span></code> </pre> <br>  Adem√°s, <i>"private": true</i> debe especificarse en <i>package.json</i> , ya que los <i>espacios de trabajo</i> solo est√°n disponibles en proyectos privados. <br><br>  Para que todo despegue, ejecute el comando <i>yarn</i> (de forma an√°loga a <i>yarn install</i> o <i>npm install</i> ) desde el directorio ra√≠z.  Dado que las dependencias que existen en el m√≥dulo de la <i>aplicaci√≥n</i> se definen como <i>espacios</i> de <i>trabajo</i> en el <i>paquete ra√≠z.json</i> , de hecho, no descargaremos nada de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">npm-Registry</a> , sino que simplemente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enlazaremos</a> (" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enlazaremos</a> ") nuestros paquetes. <br><br><pre> <code class="bash hljs">yarn</code> </pre> <br><img src="https://habrastorage.org/webt/hp/sz/m6/hpszm6bs8xrdmb1fguwl9pzx4zg.png" alt="imagen"><br><br>  Ahora podemos ejecutar el comando del <i>nodo.</i>  desde el directorio ra√≠z que ejecutar√° el script desde el <i>archivo packages / app / index.js</i> . <br><br><pre> <code class="bash hljs">node .</code> </pre> <br><img src="https://habrastorage.org/webt/xe/xl/2c/xexl2cpgenqejsz7kbusvpsn0_i.png" alt="imagen"><br><br>  Veamos como funciona.  <i>Al</i> llamar a <i>yarn</i> , creamos enlaces simb√≥licos en <i>node_modules</i> a nuestros directorios en la carpeta de <i>paquetes</i> . <br><br><img src="https://habrastorage.org/webt/y2/y-/sj/y2y-sjr7-7blo6ddwgi41ijvvuq.png" alt="imagen"><br><br>  Debido a esta relaci√≥n en las dependencias, obtuvimos una gran ventaja: ahora, al cambiar en el <i>primer</i> y <i>segundo</i> m√≥dulo, nuestra <i>aplicaci√≥n</i> recibir√° la versi√≥n actual de estos paquetes sin reconstruirla.  En la pr√°ctica, es muy conveniente, porque  podemos llevar a cabo el desarrollo local de paquetes, a√∫n defini√©ndolos como dependencias de terceros (que eventualmente se convierten). <br><br>  La siguiente ventaja importante que puede obtener al trabajar con <i>espacios de trabajo de hilo</i> es la organizaci√≥n del almacenamiento de dependencias de terceros. <br><br><div class="spoiler">  <b class="spoiler_title">Obtenga m√°s informaci√≥n sobre el almacenamiento de dependencias en el nivel superior.</b> <div class="spoiler_text">  Supongamos que queremos usar la biblioteca <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lodash</a></i> en <i>primer</i> y <i>segundo lugar</i> .  <i>Al ejecutar el comando yarn add lodash</i> desde los directorios apropiados, recibiremos una actualizaci√≥n del <i>paquete local.json</i> : la versi√≥n actual del paquete aparecer√° en las <i>dependencias</i> . <br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lodash"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.17.11"</span></span> }</code> </pre> <br>  En cuanto al paquete <i>lodash en s√≠</i> , f√≠sicamente la biblioteca se instalar√° en <i>node_modules</i> en el nivel ra√≠z una vez. <br>  Si la versi√≥n requerida del paquete externo (en nuestro caso <i>lodash</i> ) es diferente para el <i>primero</i> y el segundo (por ejemplo, <i>primero</i> necesita <i>lodash v3.0.0</i> , y en el <i>segundo v4.0.0</i> ), entonces un paquete con una versi√≥n inferior ( <i>3.0.0</i> ) llegar√° a la ra√≠z <i>node_modules</i> , y la versi√≥n <i>lodash</i> para el <i>segundo</i> m√≥dulo se almacenar√° en <i>paquetes</i> locales <i>/ second / node_modules</i> . <br>  Adem√°s de las ventajas, este enfoque puede tener desventajas menores, que el <i>hilo</i> permite evitar con la ayuda de banderas adicionales.  Puede leer m√°s sobre tales matices en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n oficial</a> . <br></div></div><br><h2>  A√±adir Lerna </h2><br>  El primer paso para trabajar con <i>lerna</i> es instalar el paquete.  Por lo general, realizan una instalaci√≥n global ( <i>yarn global add lerna</i> o <i>npm i -g lerna</i> ), pero si no est√° seguro de si desea usar esta biblioteca, puede usar la llamada usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">npx</a> . <br><br>  Inicializaremos <i>lerna</i> desde el directorio ra√≠z: <br><br><pre> <code class="bash hljs">lerna init</code> </pre> <br><img src="https://habrastorage.org/webt/xx/0z/pe/xx0zpe3xfvy1msih3a63tjxiu5o.png" alt="imagen"><br><br>  De hecho, realizamos varias acciones a la vez con la ayuda de un comando: creamos un repositorio git (si no se hab√≠a inicializado antes), creamos un archivo <i>lerna.json</i> y actualizamos nuestro <i>paquete ra√≠z.json</i> . <br><br>  Ahora en el archivo <i>lerna.json</i> reci√©n creado <i>,</i> agregue dos l√≠neas: <i>‚ÄúnpmClient‚Äù: ‚Äúyarn‚Äù</i> y <i>‚ÄúuseWorkspaces‚Äù: true</i> .  La √∫ltima l√≠nea dice que ya usamos <i>espacios de trabajo de hilo</i> y no hay necesidad de crear la <i>carpeta app / node_modules</i> con enlaces simb√≥licos a <i>primero</i> y <i>segundo</i> . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// lerna.json { "npmClient": "yarn", "packages": [ "packages/*" ], "version": "1.0.0", "useWorkspaces": true }</span></span></code> </pre> <br><h3>  Pruebas con Lerna </h3><br>  Para mostrar la conveniencia de trabajar con <i>lerna,</i> agregue pruebas para nuestras bibliotecas. <br>  Desde el directorio ra√≠z, instalamos el paquete para probar - <i>jest</i> .  Ejecute el comando: <br><br><pre> <code class="bash hljs">yarn add -DW jest</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">¬øPor qu√© necesito la bandera -DW?</b> <div class="spoiler_text">  El indicador -D (- dev) es necesario para que el paquete <i>jest</i> se instale como una dependencia de desarrollo, y el indicador -W (- ignore-workspace-root-check) permite la instalaci√≥n en el nivel ra√≠z (que necesitamos). <br></div></div><br>  El siguiente paso es agregar un archivo de prueba a nuestro paquete.  Para la conveniencia de nuestro ejemplo, haremos todas las pruebas similares.  Para el <i>primer</i> ejemplo, el archivo de prueba se ver√° as√≠: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/first/test.js const first = require('.'); describe('first', () =&gt; { it('should return correct message', () =&gt; { const result = first(); expect(result).toBe('Hi from the first module'); }); });</span></span></code> </pre> <br>  Tambi√©n necesitamos agregar un script para ejecutar pruebas en <i>package.json de</i> cada una de nuestras bibliotecas: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/*/package.json ... "scripts": { "test": "../../node_modules/.bin/jest --colors" }, ...</span></span></code> </pre><br>  El toque final ser√° actualizar el <i>paquete ra√≠z.json</i> .  Agregue un script de <i>prueba</i> que llame a <i>lerna run test --stream</i> .  El par√°metro que sigue a <i>lerna run</i> define el comando que se llamar√° en cada uno de nuestros paquetes desde los <i>paquetes /</i> carpeta, y el indicador <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">--stream</a></i> nos permitir√° ver la salida de los resultados en el terminal. <br><br>  Como resultado, <i>package.json</i> del directorio ra√≠z se ver√° as√≠: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// package.json { "name": "monorepo", "version": "1.0.0", "main": "packages/app/index.js", "license": "MIT", "private": true, "workspaces": [ "packages/*" ], "scripts": { "test": "lerna run test --stream" }, "devDependencies": { "jest": "^24.7.1", "lerna": "^3.13.2" } }</span></span></code> </pre> <br>  Ahora, para ejecutar las pruebas, solo necesitamos ejecutar el comando desde la ra√≠z de nuestro proyecto: <br><br><pre> <code class="bash hljs">yarn <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/hs/8x/ti/hs8xtihl1ig7fkcxdgpum82otqy.png" alt="imagen"><br><br><h3>  Actualizaci√≥n de versi√≥n con Lerna </h3><br>  La pr√≥xima tarea popular, con la que <i>lerna</i> puede hacer frente a la calidad, ser√° actualizar las versiones del paquete.  Imagine que despu√©s de implementar las pruebas, decidimos actualizar nuestras bibliotecas de 1.0.0 a 2.0.0.  Para hacer esto, simplemente agregue la l√≠nea <i>"update: version": "lerna version --no-push"</i> al campo de <i>scripts</i> del <i>paquete ra√≠z.json</i> , y luego ejecute <i>yarn update: version</i> desde el directorio ra√≠z.  El indicador <i>--no-push</i> se agrega para que despu√©s de actualizar la versi√≥n los cambios no se env√≠en al repositorio remoto, lo que <i>lerna</i> hace por defecto (sin este indicador). <br><br>  Como resultado, nuestro <i>paquete ra√≠z.json</i> se ver√° as√≠: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// package.json { "name": "monorepo", "version": "1.0.0", "main": "packages/app/index.js", "license": "MIT", "private": true, "workspaces": [ "packages/*" ], "scripts": { "test": "lerna run test --stream", "update:version": "lerna version --no-push" }, "devDependencies": { "jest": "^24.7.1", "lerna": "^3.13.2" } }</span></span></code> </pre> <br>  Ejecute el script de actualizaci√≥n de versi√≥n: <br><br><pre> <code class="bash hljs">yarn update:version</code> </pre> <br>  A continuaci√≥n, se nos pedir√° que seleccionemos la versi√≥n a la que queremos cambiar: <br><br><img src="https://habrastorage.org/webt/yh/9u/_q/yh9u_q_xoiokycczph0iwzpzuqo.png" alt="imagen"><br><br>  Al hacer clic en <i>Entrar</i> , obtenemos una lista de paquetes en los que se actualiza la versi√≥n. <br><br><img src="https://habrastorage.org/webt/os/p4/2p/osp42ptsjd5vkf1wm_ja7nbb1lq.png" alt="imagen"><br><br>  Confirmamos la actualizaci√≥n ingresando <i>y</i> y recibimos un mensaje sobre la actualizaci√≥n exitosa. <br><br><img src="https://habrastorage.org/webt/5k/ll/6b/5kll6bkqmeejvzn9f6zzy4xopzs.png" alt="imagen"><br><br>  Si tratamos de ejecutar el comando <i>git status</i> , no recibimos <i>nada para confirmar, trabajando en √°rbol limpio</i> , porque  <i>La versi√≥n lerna</i> no solo actualiza las versiones del paquete, sino que tambi√©n crea un git commit y una etiqueta que indica la nueva versi√≥n (v2.0.0 en nuestro caso). <br><br><div class="spoiler">  <b class="spoiler_title">Caracter√≠sticas de trabajar con el equipo de la versi√≥n lerna</b> <div class="spoiler_text">  Si agrega la l√≠nea <i>"versi√≥n": "versi√≥n lerna --no-push" en</i> lugar de <i>"actualizaci√≥n: versi√≥n": "versi√≥n lerna --no-push"</i> en el campo de los <i>scripts</i> del <i>paquete ra√≠z.json</i> , lo m√°s probable es que encuentre un comportamiento inesperado y consola roja  El hecho es que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">npm-scripts</a> por defecto llama al comando de <i>versi√≥n</i> (script reservado) inmediatamente despu√©s de actualizar la versi√≥n del paquete, lo que conduce a una llamada recursiva a la <i>versi√≥n lerna</i> .  Para evitar esta situaci√≥n, es suficiente darle al script un nombre diferente, por ejemplo, <i>actualizaci√≥n: versi√≥n</i> , como se hizo en nuestro ejemplo. <br></div></div><br><h3>  Conclusi√≥n </h3><br>  Estos ejemplos muestran una cent√©sima parte de todas las posibilidades que <i>lerna</i> tiene en conjunci√≥n con <i>espacios de trabajo de hilo</i> .  Desafortunadamente, hasta ahora no he encontrado instrucciones detalladas para trabajar con monorepositorios en ruso, ¬°as√≠ que podemos suponer que se ha comenzado! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace</a> al repositorio del proyecto de prueba. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/448766/">https://habr.com/ru/post/448766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../448754/index.html">Qui√©n es qui√©n en c√≥digo abierto: biograf√≠as geek</a></li>
<li><a href="../448756/index.html">Antecedentes: por qu√© Apple y Qualcomm se pelearon y luego se reconciliaron</a></li>
<li><a href="../448758/index.html">Reloj inteligente con BASIC en 6502 f√≠sico</a></li>
<li><a href="../448762/index.html">Disturbios en el Picaba. Los usuarios van masivamente a Reddit</a></li>
<li><a href="../448764/index.html">Relojes en ATtiny13</a></li>
<li><a href="../448774/index.html">SQL a CSV usando DBMS_SQL</a></li>
<li><a href="../448776/index.html">RxVMS: una arquitectura pr√°ctica para aplicaciones de flutter</a></li>
<li><a href="../448778/index.html">Presentaci√≥n de la depuraci√≥n de viajes en el tiempo para Visual Studio Enterprise 2019</a></li>
<li><a href="../448792/index.html">Prueba de Python con pytest. Accesorios incorporados, Cap√≠tulo 4</a></li>
<li><a href="../448794/index.html">Prueba de Python con pytest. Complementos CAP√çTULO 5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>