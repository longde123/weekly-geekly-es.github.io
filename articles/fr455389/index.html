<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòû üöµüèæ üë©‚ÄçüöÄ Haxe 4: Quoi de neuf? üë©üèª‚Äç‚öïÔ∏è üèîÔ∏è üèùÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'attire votre attention sur une traduction du rapport d'Alexander Kuzmenko (depuis avril de cette ann√©e, il travaille officiellement en tant que d√©ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Haxe 4: Quoi de neuf?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455389/"><p>  J'attire votre attention sur une traduction du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rapport d'Alexander Kuzmenko</a> (depuis avril de cette ann√©e, il travaille officiellement en tant que d√©veloppeur du compilateur Haxe) sur les changements dans le langage Haxe qui se sont produits depuis la sortie de Haxe 3.4. </p><br><img src="https://habrastorage.org/webt/0m/0e/mw/0m0emw609dcl9ycql2oa069lzfu.jpeg" alt="image"><br><p>  Plus de deux ans et demi se sont √©coul√©s depuis la sortie de Haxe 3.4.  Pendant ce temps, 7 patchs, 5 versions de pr√©visualisation de Haxe 4 et 2 candidats √† la sortie de Haxe 4. Ce fut un long chemin vers la nouvelle version et elle est presque pr√™te ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">environ 20 probl√®mes</a> restent √† r√©soudre). </p><a name="habracut"></a><br><img src="https://habrastorage.org/webt/jh/wp/7_/jhwp7_vztjntd_31hhmpqqreabe.png" alt="Il y a longtemps ..."><br><p>  Alexander a remerci√© la communaut√© Haxe pour avoir signal√© des bugs, pour leur d√©sir de participer au d√©veloppement du langage.  Gr√¢ce <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">au projet haxe-evolution</a> , des choses comme les suivantes appara√Ætront dans Haxe 4: </p><br><ul><li>  balisage en ligne </li><li>  fonctions int√©gr√©es √† l'emplacement de l'appel </li><li>  fonctions fl√©ch√©es </li></ul><br><img src="https://habrastorage.org/webt/kn/qf/fu/knqffu_thrc2godjucb5t4izbt0.png" alt="image"><br><p>  En outre, dans le cadre de ce projet, des discussions sont en cours sur des innovations possibles telles que: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Promesses</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">polymorphic this</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">types</a> par d√©faut (param√®tres de type par d√©faut). </p><br><p>  Ensuite, Alexander a parl√© <b>des changements dans la syntaxe de la langue</b> . </p><br><img src="https://habrastorage.org/webt/pg/jn/sy/pgjnsymvkyhlespf0rcj-dw6j8s.png" alt="Nouvelle syntaxe pour d√©crire les types de fonctions"><br><p> Le premier est la nouvelle syntaxe pour d√©crire la syntaxe des types de fonction.  L'ancienne syntaxe √©tait un peu √©trange. <br>  Haxe est un langage de programmation multi-paradigmes, il a toujours pris en charge les fonctions de premi√®re classe, mais la syntaxe pour d√©crire les types de fonctions a √©t√© h√©rit√©e d'un langage fonctionnel (et diff√®re de celle adopt√©e dans d'autres paradigmes).  Et les programmeurs habitu√©s √† la programmation fonctionnelle attendent des fonctions avec cette syntaxe pour prendre en charge le curry automatique.  Mais √† Haxe, ce n'est pas le cas. <br>  Le principal inconv√©nient de l'ancienne syntaxe, selon Alexander, est l'incapacit√© √† d√©terminer les noms des arguments, c'est pourquoi vous devez √©crire de longs commentaires d'annotation avec une description des arguments. <br>  Mais nous avons maintenant une nouvelle syntaxe pour d√©crire les types de fonctions (qui, soit dit en passant, a √©t√© ajout√©e au langage dans le cadre de l'initiative haxe-evolution), o√π une telle opportunit√© existe (bien que ce soit facultatif, mais recommand√©).  La nouvelle syntaxe est plus facile √† lire et peut m√™me √™tre consid√©r√©e comme faisant partie de la documentation du code. <br>  Un autre inconv√©nient de l'ancienne syntaxe pour d√©crire les types de fonction √©tait son incoh√©rence - la n√©cessit√© de sp√©cifier le type d'arguments de la fonction m√™me lorsque la fonction n'accepte aucun argument: <code>Void-&gt;Void</code> (cette fonction ne prend aucun argument et ne renvoie rien). <br>  Dans la nouvelle syntaxe, cela est impl√©ment√© plus √©l√©gamment: <code>()-&gt;Void</code> </p><br><img src="https://habrastorage.org/webt/xv/nr/fq/xvnrfqcbcxakqrci6y_p1hibh_4.png" alt="Fonctions fl√©ch√©es"><br><p>  Le second est les fonctions fl√©ch√©es ou expressions lambda - une forme abr√©g√©e pour d√©crire les fonctions anonymes.  La communaut√© demande depuis longtemps de les ajouter √† la langue, et finalement c'est arriv√©! <br>  Dans ces fonctions, au lieu du mot-cl√© de <code>return</code> , la s√©quence de caract√®res <code>-&gt;</code> (d'o√π le nom de la syntaxe est "fonction fl√®che"). <br>  Dans la nouvelle syntaxe, il reste possible de d√©finir les types d'arguments (puisque le syst√®me d'inf√©rence de type automatique ne peut pas toujours le faire comme le veut le programmeur, par exemple, le compilateur peut d√©cider d'utiliser <code>Float</code> au lieu de <code>Int</code> ). <br>  La seule limitation de la nouvelle syntaxe est l'impossibilit√© de d√©finir explicitement le type de retour.  Si n√©cessaire, vous avez le choix d'utiliser l'ancienne syntaxe ou d'utiliser la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">syntaxe de type de contr√¥le</a> dans le corps de la fonction, qui indiquera au compilateur le type de retour. </p><br><img src="https://habrastorage.org/webt/wh/ri/-8/whri-8d5u0nvjgkiybnrjp1vrag.png" alt="Les fonctions fl√©ch√©es n'ont pas de repr√©sentation sp√©ciale dans l'arbre de syntaxe"><br><p>  Les fonctions fl√©ch√©es n'ont pas de repr√©sentation sp√©ciale dans l'arbre de syntaxe; elles sont trait√©es de la m√™me mani√®re que les fonctions anonymes classiques.  La s√©quence <code>-&gt;</code> est remplac√©e par le mot cl√© <code>return</code> . </p><br><img src="https://habrastorage.org/webt/nd/8c/kt/nd8cktem7lhra7ll-qao6hdatva.png" alt="final - est maintenant un mot-cl√©"><br><p>  Le troisi√®me changement - <code>final</code> maintenant devenu un mot-cl√© (dans Haxe 3, <code>final</code> √©tait l'une des balises META int√©gr√©es au compilateur). <br>  Si vous l'appliquez √† une classe, il en interdira l'h√©ritage, il en va de m√™me pour les interfaces.  L'application du qualificatif <code>final</code> √† une m√©thode de classe emp√™chera son remplacement dans les classes enfants. <br>  Cependant, dans Haxe, il y avait un moyen de contourner les restrictions impos√©es par le mot-cl√© <code>final</code> - vous pouvez utiliser la balise meta <code>@:hack</code> pour cela (mais cela ne devrait √™tre fait que si cela est absolument n√©cessaire). </p><br><img src="https://habrastorage.org/webt/ec/v3/mp/ecv3mpajsnrn6kxkrwx3rwkqlwe.png" alt="D√©claration de champs facultatifs dans des structures anonymes"><br><p>  Le quatri√®me changement est un moyen de d√©clarer des champs facultatifs dans des structures anonymes.  Auparavant, la balise Meta <code>@:optional</code> √©tait utilis√©e pour cela, il suffit maintenant d'ajouter un point d'interrogation devant le nom du champ. </p><br><img src="https://habrastorage.org/webt/r8/i3/qb/r8i3qbo2r2seeqtyns2yhsbr5r8.png" alt="Listes des r√©sum√©s"><br><p>  Cinqui√®mement, les √©num√©rations abstraites sont devenues un membre √† part enti√®re de la famille de types Haxe, et au lieu de la balise meta <code>@:enum</code> mot cl√© <code>@:enum</code> est maintenant utilis√© pour les d√©clarer. </p><br><img src="https://habrastorage.org/webt/ew/b3/xt/ewb3xtnkjr_fdk4jtcdj-ezboao.png" alt="Mot-cl√© extern"><br><p>  Une modification similaire a affect√© la balise <code>@:extern</code> . </p><br><img src="https://habrastorage.org/webt/pb/g3/ip/pbg3ipuxlefguxcw5m-2qybtuqq.png" alt="Nouvelle syntaxe pour l'union de type (intersection de type)"><br><p>  Septi√®me est une nouvelle syntaxe d'intersection de type qui refl√®te mieux l'essence des structures en expansion. <br>  La m√™me nouvelle syntaxe est utilis√©e pour limiter les contraintes des param√®tres de type; elle transmet plus pr√©cis√©ment les restrictions impos√©es √† un type.  Pour une personne qui ne conna√Æt pas Haxe, l'ancienne syntaxe <code>MyClass&lt;T:(Type1, Type2)&gt;</code> peut √™tre per√ßue comme une exigence pour que le type du param√®tre <code>T</code> soit <code>Type1</code> ou <code>Type2</code> .  La nouvelle syntaxe nous dit explicitement que <code>T</code> doit √™tre √† la fois <code>Type1</code> et <code>Type2</code> en m√™me temps. </p><br><img src="https://habrastorage.org/webt/e9/un/cj/e9uncj0a6tk4uh0keuuopuwokgy.png" alt="Syntaxe simplifi√©e pour d√©clarer un dictionnaire vide"><br><p>  Le huiti√®me est la possibilit√© d'utiliser <code>[]</code> pour d√©clarer un conteneur <code>Map</code> vide (cependant, si vous ne sp√©cifiez pas explicitement le type de la variable, le compilateur affichera le type sous forme de tableau dans ce cas). </p><br><p>  Apr√®s avoir parl√© des changements de syntaxe, passons √† la description des <b>nouvelles fonctions du langage</b> . <br>  Commen√ßons par les nouveaux it√©rateurs valeur-cl√© </p><br><img src="https://habrastorage.org/webt/gw/sg/3v/gwsg3vpv6qco2n61v4zxh0dfzvw.png" alt="It√©rateurs de valeur-cl√©"><br><p>  Une nouvelle syntaxe a √©t√© ajout√©e pour leur utilisation. <br>  Pour prendre en charge de tels it√©rateurs, le type doit impl√©menter la m√©thode <code>keyValueIterator():KeyValueIterator&lt;K, V&gt;</code> ou les m√©thodes <code>hasNext():Bool</code> et <code>next():{key:K, value:V}</code> .  Dans le m√™me temps, le type <code>KeyValueIterator&lt;K, V&gt;</code> est synonyme d'un it√©rateur r√©gulier dans la structure anonyme <code>Iterator&lt;{key:K, value:V}&gt;</code> . <br>  Les it√©rateurs de valeur-cl√© sont impl√©ment√©s pour certains types √† partir de la biblioth√®que standard Haxe ( <code>String</code> , <code>Map</code> , <code>DynamicAccess</code> ), et des travaux sont √©galement en cours pour les impl√©menter pour les tableaux. </p><br><img src="https://habrastorage.org/webt/67/-f/g0/67-fg0qimh9gu7b8qvkaazjf4ti.png" alt="Prix ‚Äã‚Äãen charge de nouveaux it√©rateurs pour les types int√©gr√©s"><br><p>  Pour les cha√Ænes, l'index de caract√®res dans la cha√Æne est utilis√© comme cl√© et le code de caract√®re √† l'index donn√© est utilis√© comme valeur (si le caract√®re lui-m√™me est n√©cessaire, alors la m√©thode <code>String.fromCharCode()</code> peut √™tre utilis√©e). <br>  Pour le conteneur <code>Map</code> , le nouvel it√©rateur fonctionne de la m√™me mani√®re que l'ancienne m√©thode d'it√©ration, c'est-√†-dire qu'il re√ßoit un tableau de cl√©s dans le conteneur et le traverse, en demandant des valeurs pour chacune des cl√©s. <br>  Pour <code>DynamicAccess</code> (un wrapper pour les objets anonymes), l'it√©rateur fonctionne en utilisant la r√©flexion (pour obtenir une liste des champs d'un objet √† l'aide de la m√©thode <code>Reflect.fields()</code> et pour obtenir les valeurs de champ par leurs noms √† l'aide de la m√©thode <code>Reflect.field()</code> ). </p><br><img src="https://habrastorage.org/webt/ml/u7/qj/mlu7qjpnq86muxduteld_riofzu.png" alt="Nouvel interpr√®te de macro"><br><p>  Haxe 4 utilise un nouvel interpr√©teur de macros, "eval".  Simon Krajewski, l'auteur de l'interpr√®te, l'a d√©crit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">en</a> d√©tail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dans le blog officiel de Haxe</a> , ainsi que dans son <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rapport d'avancement de l'ann√©e derni√®re</a> . <br>  Les principaux changements dans le travail de l'interpr√®te: </p><br><ul><li>  il est plusieurs fois plus rapide que l'ancien macro interpr√®te (4 fois en moyenne) </li><li>  prend en charge le d√©bogage interactif (auparavant, pour les macros, seule la sortie de la console pouvait √™tre utilis√©e) </li><li>  il est utilis√© pour ex√©cuter le compilateur en mode interpr√®te (auparavant neko √©tait utilis√© pour cela. Par ailleurs, eval surpasse √©galement neko en vitesse). </li></ul><br><img src="https://habrastorage.org/webt/f3/ef/e8/f3efe8ko9czu8tdyo5kzjswkfto.png" alt="Prise en charge unicode"><br><p>  La prise en charge Unicode pour toutes les plates-formes (√† l'exception de neko) est l'un des plus grands changements dans Haxe 4. Simon en a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parl√© en</a> d√©tail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'ann√©e derni√®re</a> .  Mais voici un bref aper√ßu de l'√©tat actuel de la prise en charge des cha√Ænes Unicode dans Haxe: </p><br><ul><li>  pour Lua, PHP, Python et eval (interpr√©teur de macros), la prise en charge unicode compl√®te est impl√©ment√©e (encodage UTF8) </li><li>  pour les autres plateformes (JavaScript, C #, Java, Flash, HashLink et C ++), le codage UTF16 est utilis√©. </li></ul><br><p>  Ainsi, les lignes dans Haxe fonctionnent de la m√™me mani√®re pour les caract√®res inclus dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plan multilingue principal</a> , mais pour les caract√®res en dehors de ce plan (par exemple, pour les emoji), le code de travail avec les lignes peut produire des r√©sultats diff√©rents selon la plate-forme (mais c'est encore mieux, que la situation que nous avons dans Haxe 3, lorsque chaque plate-forme avait son propre comportement). </p><br><img src="https://habrastorage.org/webt/5o/o2/fp/5oo2fp2s4h2t9rpqnvfyrbwb7gs.png" alt="Nouveaux it√©rateurs de cordes"><br><p>  Pour les cha√Ænes cod√©es Unicode (√† la fois en UTF8 et UTF16), des it√©rateurs sp√©ciaux ont √©t√© ajout√©s √† la biblioth√®que standard de Haxe qui fonctionnent √©galement sur TOUTES les plates-formes pour tous les caract√®res (√† la fois dans le plan principal multilingue et au-del√†): </p><br><pre> <code class="plaintext hljs">haxe.iterators.StringIteratorUnicode haxe.iterators.StringKeyValueIteratorUnicode</code> </pre> <br><img src="https://habrastorage.org/webt/3k/zv/xu/3kzvxup9p5crewap3u76tnfqhlg.png" alt="Fonctionnalit√©s de prise en charge unicode"><br><p>  √âtant donn√© que la mise en ≈ìuvre des cha√Ænes varie d'une plateforme √† l'autre, il est n√©cessaire de garder √† l'esprit certaines des nuances de leur travail.  En UTF16, chaque caract√®re prend 2 octets, donc l'acc√®s √† un caract√®re dans une cha√Æne par index est rapide, mais uniquement dans le plan principal multilingue.  En revanche, en UTF8, tous les caract√®res sont pris en charge, mais cela se fait au prix d'une recherche lente d'un caract√®re dans une cha√Æne (car les caract√®res peuvent occuper diff√©rents nombres d'octets en m√©moire, acc√©der √† un caract√®re par index n√©cessite une it√©ration √† travers la ligne √† chaque fois depuis le tout d√©but).  Par cons√©quent, lorsque vous travaillez avec de grandes cha√Ænes en Lua et PHP, vous devez garder √† l'esprit que l'acc√®s √† un caract√®re arbitraire fonctionne assez lentement (√©galement sur ces plateformes, la longueur de la cha√Æne est √† nouveau calcul√©e √† chaque fois). <br>  Cependant, bien que la prise en charge compl√®te d'Unicode soit d√©clar√©e pour Python, cette restriction ne s'applique pas car les lignes qu'il contient sont impl√©ment√©es de mani√®re l√©g√®rement diff√©rente: pour les caract√®res dans le plan multilingue principal, il utilise le codage UTF16 et pour les caract√®res plus larges (3 et plus d'octets) Python utilise UTF32. <br>  Des optimisations suppl√©mentaires sont impl√©ment√©es pour l'interpr√©teur de macros eval: la cha√Æne ¬´sait¬ª si elle contient des caract√®res Unicode.  Dans le cas o√π il ne contient pas de tels caract√®res, la cha√Æne est interpr√©t√©e comme constitu√©e de caract√®res ASCII (o√π chaque caract√®re prend 1 octet).  L'acc√®s s√©quentiel par index dans eval est √©galement optimis√©: la position du dernier caract√®re acc√©d√© est mise en cache dans la ligne.  Donc, si vous vous tournez d'abord vers le 10e caract√®re de la cha√Æne, puis lorsque vous vous tournerez vers le 20e caract√®re, eval le recherchera non pas au tout d√©but de la ligne, mais √† partir du 10e.  De plus, la longueur de cha√Æne dans eval est mise en cache, c'est-√†-dire qu'elle est calcul√©e uniquement lors de la premi√®re demande. </p><br><img src="https://habrastorage.org/webt/je/gi/ne/jegineguad8fp4dlqyhfbboxy8c.png" alt="Prix ‚Äã‚Äãen charge de l'espace de noms pour les drapeaux de compilation"><br><p>  Haxe 4 introduit la prise en charge des espaces de noms pour les drapeaux de compilation, qui peuvent √™tre utiles, par exemple, pour organiser le code lors de l'√©criture de biblioth√®ques personnalis√©es. <br>  En outre, un espace de noms r√©serv√© pour les indicateurs de compilation est apparu - <code>target</code> , qui est utilis√© par le compilateur pour d√©crire la plate-forme cible et son comportement: </p><br><ul><li>  <code>target.name</code> - nom de la plateforme (js, cpp, php, etc.) </li><li>  <code>target.utf16</code> - indique que le support Unicode est impl√©ment√© en utilisant UTF16 </li><li>  <code>target.sys</code> - indique si les classes du package sys sont disponibles (par exemple, pour travailler avec le syst√®me de fichiers) </li><li>  <code>target.static</code> - indique si la plate-forme est statique (sur les plates-formes statiques, les types de base <code>Int</code> , <code>Float</code> et <code>Bool</code> ne peuvent pas avoir la valeur <code>null</code> comme valeur) </li><li>  <code>target.threaded</code> - indique si la plateforme prend en charge le multithreading </li></ul><br><img src="https://habrastorage.org/webt/qt/ue/c_/qtuec_vbswkwgylwnidy9xuaeou.png" alt="Prix ‚Äã‚Äãen charge de l'espace de noms pour les balises META"><br><p>  De m√™me, le support d'espace de noms pour les balises META est apparu.  Jusqu'√† pr√©sent, il n'y a pas d'espaces de noms r√©serv√©s pour les balises META dans la langue, mais la situation pourrait changer √† l'avenir. </p><br><img src="https://habrastorage.org/webt/cc/yj/ye/ccyjyemwz1ti9vgddvccyu4iqeq.png" alt="Nouveau type - ReadOnlyArray"><br><p>  Le type <code>ReadOnlyArray</code> ajout√© √† la biblioth√®que standard Haxe - une abstraction sur un tableau normal, dans laquelle les m√©thodes ne sont disponibles que pour lire les donn√©es du tableau. </p><br><img src="https://habrastorage.org/webt/jr/ia/2o/jria2ovebta0bwm-lezr7jvv7ao.png" alt="Champs finaux et variables locales"><br><p>  Une autre innovation dans la langue concerne les champs finaux et les variables locales. <br>  Si <code>final</code> utilis√© √† la place du mot-cl√© <code>var</code> lors de la d√©claration d'un champ de classe ou d'une variable locale, cela signifie que le champ ou la variable donn√© ne peut pas √™tre r√©affect√© (si le compilateur essaie de le faire, il g√©n√©rera une erreur).  Mais en m√™me temps, son √©tat peut √™tre chang√©, donc le champ ou la variable finale n'est pas une constante. </p><br><img src="https://habrastorage.org/webt/j-/8u/f9/j-8uf9asp_ivqbxn8kypatexma0.png" alt="Le compilateur contr√¥le l'initialisation des champs finaux"><br><p>  Les valeurs des champs finaux doivent √™tre initialis√©es soit lors de leur d√©claration, soit dans le constructeur, sinon le compilateur l√®vera une erreur. </p><br><img src="https://habrastorage.org/webt/2h/yd/wi/2hydwitcbuwstefblzdr09sxqzk.png" alt="Hashlink"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HashLink</a> est une nouvelle plate-forme avec sa propre machine virtuelle, cr√©√©e sp√©cifiquement pour Haxe.  HashLink prend en charge la soi-disant ¬´double compilation¬ª - le code peut √™tre compil√© soit en bytecode (qui est tr√®s rapide, acc√©l√®re le processus de d√©bogage des applications d√©velopp√©es), soit en C-code (qui se caract√©rise par des performances accrues).  Nicholas a d√©di√© HashLink √† plusieurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">articles du blog Haxe</a> et a √©galement parl√© de lui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lors de la conf√©rence de</a> Seattle l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">an dernier</a> .  La technologie HashLink est utilis√©e dans des jeux populaires comme Dead Cells et Northgard. </p><br><img src="https://habrastorage.org/webt/zy/a4/eh/zya4eh5l7t3zqihviw5qvtcrsfc.png" alt="S√©curit√© nulle"><br><p>  Une autre nouvelle fonctionnalit√© int√©ressante de Haxe 4 est la s√©curit√© Null, qui est encore au stade exp√©rimental (en raison de faux positifs et de contr√¥les de s√©curit√© de code insuffisants). <br>  Qu'est-ce que la s√©curit√© nulle?  Si votre fonction ne d√©clare pas explicitement qu'elle peut accepter <code>null</code> comme valeurs de param√®tre, alors lorsque vous essayez de lui passer <code>null</code> , le compilateur l√®vera l'erreur correspondante.  De plus, pour les param√®tres de fonction qui peuvent prendre <code>null</code> comme valeur, le compilateur vous demandera d'√©crire du code suppl√©mentaire pour v√©rifier et g√©rer de tels cas. <br>  Cette fonctionnalit√© est d√©sactiv√©e par d√©faut, mais elle n'affecte pas la vitesse d'ex√©cution du code (si vous l'activez n√©anmoins), car les v√©rifications d√©crites ne sont effectu√©es qu'au stade de la compilation.  Il peut √™tre activ√© pour tout le code, ainsi que progressivement pour des champs, des classes et des packages individuels (fournissant ainsi une transition progressive vers un code plus s√©curis√©).  Vous pouvez utiliser des balises META et des macros sp√©ciales pour cela. <br>  Les modes dans lesquels la s√©curit√© Null peut fonctionner sont: <code>Strict</code> (le plus strict), <code>Loose</code> (le mode par d√©faut) et <code>Off</code> (utilis√© pour d√©sactiver les v√©rifications pour les packages et types individuels). </p><br><img src="https://habrastorage.org/webt/mn/9l/jh/mn9ljhu2_wwwonpjo7qhcoiasyw.png" alt="Mode de contr√¥le de s√©curit√© nul standard"><br><p>  Pour la fonction illustr√©e sur la diapositive, le contr√¥le de s√©curit√© Null est activ√©.  Nous voyons que cette fonction a un param√®tre facultatif <code>s</code> , c'est-√†-dire que nous pouvons lui passer <code>null</code> comme valeur de param√®tre.  Lorsque vous essayez de compiler du code avec une telle fonction, le compilateur produira un certain nombre d'erreurs: </p><br><ul><li>  en essayant d'acc√©der √† un champ de l'objet <code>s</code> (car il peut √™tre <code>null</code> ) </li><li>  lorsque vous essayez d'affecter une variable str, qui, comme nous le voyons, ne devrait pas √™tre <code>null</code> (sinon nous aurions d√ª la d√©clarer non pas comme <code>String</code> , mais comme <code>Null&lt;String&gt;</code> ) </li><li>  en essayant de renvoyer un objet <code>s</code> partir d'une fonction (puisque la fonction ne doit pas retourner <code>null</code> ) </li></ul><br><p>  Comment corriger ces erreurs? </p><br><img src="https://habrastorage.org/webt/ku/w-/l8/kuw-l8prqna5xq7c21ushemgtqs.png" alt="Correction de bugs de s√©curit√© nuls"><br><p>  Nous avons juste besoin d'ajouter la v√©rification <code>null</code> au code (√† l'int√©rieur du bloc avec la v√©rification <code>null</code> , le compilateur "sait" que <code>s</code> ne peut pas √™tre <code>null</code> et peut √™tre utilis√© en toute s√©curit√© avec lui), et aussi s'assurer que la fonction ne retourne pas <code>null</code> ! </p><br><img src="https://habrastorage.org/webt/x1/xj/jp/x1xjjpwn8ikrulbtulxj_iixlq4.png" alt="Lors de la v√©rification de la s√©curit√© Null, le compilateur prend en compte l'ordre d'ex√©cution du programme"><br><p>  De plus, lors de la v√©rification de la s√©curit√© Null, le compilateur prend en compte l'ordre dans lequel les programmes sont ex√©cut√©s.  Par exemple, si apr√®s avoir v√©rifi√© la valeur du param√®tre <code>s</code> √† null pour terminer la fonction (ou lever une exception), le compilateur ¬´saura¬ª qu'apr√®s une telle v√©rification, le param√®tre <code>s</code> ne peut plus √™tre <code>null</code> et qu'il peut √™tre utilis√© en toute s√©curit√©. </p><br><img src="https://habrastorage.org/webt/6f/vq/cj/6fvqcjbu-dixmrxcfuwtd8mskvk.png" alt="Mode strict pour effectuer des v√©rifications de s√©curit√© nulles"><br><p>  Si le compilateur active le mode strict de v√©rifications de la s√©curit√© Null, il n√©cessitera des v√©rifications suppl√©mentaires pour <code>null</code> dans les cas o√π entre la v√©rification initiale de la valeur pour <code>null</code> et une tentative d'acc√®s au champ de l'objet, tout code a √©t√© ex√©cut√© qui pourrait le mettre √† <code>null</code> . </p><br><img src="https://habrastorage.org/webt/ci/6m/u4/ci6mu4zsvkdjf33vvbetz30mf2m.png" alt="Mode l√¢che pour effectuer des v√©rifications de s√©curit√© nulles"><br><p>  En mode Loose (utilis√© par d√©faut), le compilateur n'exige pas de telles v√©rifications (au fait, ce comportement est √©galement utilis√© par d√©faut dans TypeScript). </p><br><img src="https://habrastorage.org/webt/je/wo/5q/jewo5qwzmavidsf-jss4bwug79i.png" alt="V√©rification de l'initialisation des champs lors de la v√©rification de la s√©curit√© nulle"><br><p>  En outre, lorsque les v√©rifications de la s√©curit√© Null sont activ√©es, le compilateur v√©rifie si les champs des classes sont initialis√©s (directement lorsqu'ils sont d√©clar√©s ou dans le constructeur).  Sinon, le compilateur g√©n√©rera des erreurs en essayant de passer un objet d'une telle classe, ainsi qu'en essayant d'appeler des m√©thodes sur de tels objets, jusqu'√† ce que tous les champs de l'objet soient initialis√©s.  Ces v√©rifications peuvent √™tre d√©sactiv√©es pour les champs individuels de la classe en les marquant avec la balise <code>@:nullSafety(Off)</code> <br>  Alexander a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parl√©</a> davantage de la s√©curit√© Null √† Haxe en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">octobre dernier</a> . </p><br><img src="https://habrastorage.org/webt/ui/f3/za/uif3zavird4vri76gqfiaukfsxo.png" alt="G√©n√©ration de classes ES6 pour JavaScript"><br><p>  Haxe 4 a introduit la possibilit√© de g√©n√©rer des classes ES6 pour JavaScript; il est activ√© en utilisant l'indicateur de compilation <code>js-es=6</code> . </p><br><img src="https://habrastorage.org/webt/z7/5c/ow/z75cowptrmqn5bxfa7oerxkxsro.png" alt="Fonctionnalit√© sur place"><br><p>  L'incorporation de fonctions √† l'endroit d'un appel (alignement du site d'appel) offre plus d'options pour contr√¥ler l'√©quilibre entre les performances et la taille du code.  Cette fonctionnalit√© est √©galement utilis√©e dans la biblioth√®que standard Haxe. <br>  Comment est-elle?  Il vous permet d'incorporer le corps de la fonction (√† l'aide du <code>inline</code> ) uniquement aux endroits o√π il est n√©cessaire d'assurer des performances √©lev√©es (par exemple, si n√©cessaire, appelez une m√©thode suffisamment volumineuse dans la boucle), tandis qu'√† d'autres endroits, le corps de la fonction n'est pas incorpor√©.  Par cons√©quent, la taille du code g√©n√©r√© sera l√©g√®rement augment√©e. </p><br><img src="https://habrastorage.org/webt/ke/0y/wf/ke0ywfco0j5pbynruiqr4mgqhxw.png" alt="Extensions automatiques pour les types"><br><p>  L'utilisation automatique (extensions automatiques pour les types) signifie que maintenant pour les types, vous pouvez d√©clarer des extensions statiques √† l'endroit de la d√©claration de type.  Cela √©limine le besoin d'utiliser la construction de <code>using type;</code> chaque fois <code>using type;</code>  dans chaque module o√π le type et les m√©thodes d'extension sont utilis√©s.  Pour le moment, ce type d'extension n'est impl√©ment√© que pour les transferts, mais dans la version finale (et dans les versions nocturnes), il peut √™tre utilis√© non seulement pour les transferts. </p><br><img src="https://habrastorage.org/webt/ru/ts/6s/ruts6snzqmgjdbx1g0kmjc92oxw.png" alt="Surcharger l'op√©rateur pour acc√©der aux champs d'un objet"><br><p>  Dans Haxe 4, il sera possible de red√©finir l'op√©rateur d'acc√®s aux champs d'un objet pour les types abstraits (uniquement pour les champs qui n'existent pas dans le type).  Pour ce faire, utilisez des m√©thodes marqu√©es avec la balise meta <code>@:op(ab)</code> . </p><br><img src="https://habrastorage.org/webt/qv/fu/fj/qvfufjhriheejf1q6i0epu82pw8.png" alt="Balisage int√©gr√©"><br><p>  Le balisage int√©gr√© est une autre fonctionnalit√© exp√©rimentale de Haxe.  Le code de balisage int√©gr√© n'est pas trait√© par le compilateur comme un document xml - le compilateur le voit comme une cha√Æne envelopp√©e dans la balise Meta <code>@:markup</code> .           . </p><br><img src="https://habrastorage.org/webt/ms/an/zi/msanzicye9bpsmkbw55m6zcs34a.png" alt="   "><br><p>    -,   - <code>@:markup</code>    ,     . </p><br><img src="https://habrastorage.org/webt/pg/ek/2w/pgek2wa4v-ocjxauyq6e9oopvfc.png" alt="      untyped-"><br><p>               (  <code>untyped</code> ).           . ,   ,  <code>Js.build()</code>     - <code>@:markup</code>     ,        <code>&lt;js&gt;</code> ,     js-. </p><br><img src="https://habrastorage.org/webt/gk/vd/1f/gkvd1f3duuldpzde1zmmgvwbkza.png" alt=" -  - "><br><p>  Haxe 4     -  - ,    ‚Äî       . </p><br><img src="https://habrastorage.org/webt/br/gp/0c/brgp0cim1eozg7jjcopjmtx1xys.png" alt="G√©n√©ration de valeur automatique pour les √©num√©rations abstraites"><br><p>       .  ,        .   ,   <code>Int</code> ,      ,    C. </p><br><img src="https://habrastorage.org/webt/cj/3g/lf/cj3glfbn9l5owjjunjtrsn2jzvw.png" alt="G√©n√©ration de valeur automatique pour les √©num√©rations abstraites"><br><p>         ‚Äî       . </p><br><p> <b>     :</b> </p><br><img src="https://habrastorage.org/webt/y4/hl/fw/y4hlfwwz_db02rgmsj4f1jgw6r8.png" alt="G√©n√©rez directement le bytecode JVM"><br><p>    JVM-   JDK,            Java-.    .         . </p><br><img src="https://habrastorage.org/webt/wj/ut/_z/wjut_zypg87r1f508zovsks2dio.png" alt="Coroutines"><br><p>      ,     <code>async</code> / <code>await</code>  <code>yield</code> .       (   C#,       ).  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a>     Haxe    github. </p><br><img src="https://habrastorage.org/webt/ou/7r/gh/ou7rghzmynbwwvah6l7rumqpl8i.png" alt="Fonctions disponibles au niveau du module"><br><p>  Haxe  <a href="">,    </a> .     ( )     .        ,    . </p><br><img src="https://habrastorage.org/webt/ty/y4/xw/tyy4xwdn9olejstawrdlqbux_tu.png" alt="API asynchrone pour travailler avec les ressources syst√®me"><br><p>       API     .     ,   ,    API    . </p><br><p>      Haxe 4  ! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr455389/">https://habr.com/ru/post/fr455389/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr455375/index.html">Ecrire UDR en Pascal</a></li>
<li><a href="../fr455377/index.html">Architecture IoT</a></li>
<li><a href="../fr455379/index.html">(Statique) S√©lection de conteneurs optimaux dans les programmes C ++</a></li>
<li><a href="../fr455381/index.html">Le support technique de 3CX r√©pond: capturez le trafic SIP sur le serveur PBX</a></li>
<li><a href="../fr455387/index.html">Comprendre l'apprentissage automatique dans Elastic Stack (aka Elasticsearch, aka ELK)</a></li>
<li><a href="../fr455391/index.html">Partie 1: RISC-V / RocketChip dans un habitat non naturel</a></li>
<li><a href="../fr455393/index.html">Sur l'utilisation des m√©thodes param√©triques d'estimation spectrale en radar - la m√©thode MUSIC. Ajout √† l'article</a></li>
<li><a href="../fr455397/index.html">Comment nous avons con√ßu et mis en ≈ìuvre le nouveau r√©seau sur Huawei dans le bureau de Moscou, partie 1</a></li>
<li><a href="../fr455401/index.html">Tcl pour Cisco IOS dans des exemples simples</a></li>
<li><a href="../fr455403/index.html">De cinq cents au jeu des divinit√©s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>