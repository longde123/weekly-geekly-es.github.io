<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèΩ ‚õîÔ∏è ü•Ä Como adicionar suporte para o per√≠odo de car√™ncia (per√≠odo de car√™ncia de cobran√ßa) no aplicativo iOS? üè≠ üç∑ üë≤üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em setembro, a Apple adicionou suporte para per√≠odos de car√™ncia (ou per√≠odos de car√™ncia) para assinaturas renov√°veis. Ele permite que os usu√°rios qu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como adicionar suporte para o per√≠odo de car√™ncia (per√≠odo de car√™ncia de cobran√ßa) no aplicativo iOS?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/apphud/blog/472452/"><p><img src="https://habrastorage.org/webt/wt/jh/ft/wtjhftdylfvhzqsa2t6sizqq8wy.png" alt="imagem"></p><br><p> Em setembro, a Apple adicionou suporte para per√≠odos de car√™ncia (ou per√≠odos de car√™ncia) para assinaturas renov√°veis.  Ele permite que os usu√°rios que se inscreveram tenham acesso a um servi√ßo pago, mesmo que n√£o possa ser renovado no prazo devido a problemas com o pagamento.  A assinatura ser√° retomada quando o usu√°rio atualizar o m√©todo de pagamento. <a name="habracut"></a></p><br><p>  A dura√ß√£o do per√≠odo de car√™ncia depende da dura√ß√£o da assinatura.  Para uma assinatura semanal, s√£o 6 dias, para todos os outros - 16 dias. </p><br><p>  Voc√™ pode ativar o Grace na App Store Connect, onde as compras no aplicativo est√£o configuradas.  Mas o suporte para o per√≠odo de car√™ncia no pr√≥prio aplicativo tamb√©m precisar√° ser implementado. </p><br><h2 id="kak-uznat-chto-polzovatel-nahoditsya-v-lgotnom-periode">  Como sei se um usu√°rio est√° em um per√≠odo de cortesia? </h2><br><p>  Isso exigir√° a valida√ß√£o da verifica√ß√£o da App Store para receber dados JSON.  Obviamente, √© melhor usar o servidor para validar as verifica√ß√µes, a fim de evitar ataques intermedi√°rios, como recomenda a Apple. </p><br><blockquote>  Valida√ß√µes A App Store verifica que dedicamos um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo separado</a> . </blockquote><p> Se ocorrer um problema com o pagamento quando o per√≠odo de car√™ncia estiver <code>pending_renewal_info</code> , um novo campo aparecer√° em <code>pending_renewal_info</code> JSON: <code>grace_period_expires_date</code> .  Essa data √© obtida adicionando 6 ou 16 dias √† data de vencimento da √∫ltima transa√ß√£o. </p><br><p>  Se a data atual estiver entre a data de vencimento da √∫ltima transa√ß√£o e a data de vencimento do per√≠odo de car√™ncia, o usu√°rio estar√° no per√≠odo de car√™ncia.  <code>expiration_intent</code> tamb√©m deve ser <code>2</code> . </p><br><p>  Se o usu√°rio atualizar os dados de pagamento, uma nova transa√ß√£o ser√° exibida na matriz <code>latest_receipt_info</code> e o campo <code>grace_period_expires_date</code> desaparecer√° de <code>pending_renewal_info</code> . </p><br><p>  E se o usu√°rio n√£o corrigir o problema, depois da cortesia, a assinatura deve ser considerada expirada e voc√™ deve impedir o usu√°rio de acessar os recursos premium. </p><br><h2 id="raznica-mezhdu-greys-periodom-i-is_in_billing_retry_period">  A diferen√ßa entre o per√≠odo de car√™ncia e <code>is_in_billing_retry_period</code> </h2><br><p>  Al√©m do campo do per√≠odo de car√™ncia, <code>is_in_billing_retry_period</code> permaneceu em <code>pending_renewal_info</code> .  Se o valor for <code>1</code> , o usu√°rio tem um problema com o pagamento e ele n√£o est√° no per√≠odo de car√™ncia.  Distinguir que aqui voc√™ decide se deseja dar funcionalidade paga ou n√£o.  Acontece que at√© esse momento, cada desenvolvedor escolheu o que fazer. </p><br><p>  Com o per√≠odo de cortesia ativado, a Apple obriga todos os desenvolvedores a dar pr√™mios. </p><br><h2 id="uvedomlyayte-polzovatelya-o-problemah-s-oplatoy-v-prilozhenii">  Notifique o usu√°rio sobre problemas com o pagamento no aplicativo </h2><br><p>  Nos dois casos, recomendamos que voc√™ notifique o usu√°rio sobre problemas diretamente no aplicativo e ofere√ßa a ele que atualize as informa√ß√µes de pagamento. </p><br><p>  Voc√™ pode exibir um banner ou tela cheia para o usu√°rio com uma solicita√ß√£o para atualizar as informa√ß√µes de pagamento e o bot√£o de transi√ß√£o: </p><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">// example of navigating user to account billing func handleOpenBilling(){ let urlString = "https://apps.apple.com/account/billing" if let url = URL(string: urlString), UIApplication.shared.canOpenURL(url){ UIApplication.shared.open(url) }</span></span></code> </pre> <br><h2 id="v-apphud-eto-uzhe-sdelano-za-vas">  Apphud j√° fez isso por voc√™. </h2><br><p>  Se houver um problema com o pagamento, o usu√°rio receber√° uma notifica√ß√£o por push solicitando que atualize suas informa√ß√µes de pagamento.  E se as notifica√ß√µes foram desativadas, a tela aparecer√° na pr√≥xima vez que o aplicativo for iniciado. </p><br><p><img src="https://habrastorage.org/webt/wl/wj/rm/wlwjrmw2dctts6wiazvzttljdum.png" alt="imagem"><br>  <em>Tela Atualiza√ß√£o de faturamento</em> </p><br><p>  E o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Apphud tamb√©m</a> leva em considera√ß√£o o per√≠odo de car√™ncia e retorna o status da assinatura como ativo.  Se voc√™ n√£o tiver tempo para implementar esse recurso, experimente nosso servi√ßo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><h2 id="uderzhivat-polzovateley-vazhno-kak-nikogda">  Manter os usu√°rios mais importantes do que nunca </h2><br><p>  Reduzir o n√∫mero de usu√°rios que cancelam a inscri√ß√£o e a reten√ß√£o tornou-se mais importante do que nunca.  Com o lan√ßamento do iOS 13, a Apple simplificou o mecanismo de cancelamento de assinatura: a oferta para cancelar a assinatura √© exibida quando o aplicativo √© desinstalado e a tela de configura√ß√µes se torna ainda mais acess√≠vel: </p><br><p><img src="https://habrastorage.org/webt/vr/go/pp/vrgopp6tvqfulv2w0wp1d5pmcn0.png" alt="imagem"><br>  <em>Configura√ß√µes de inscri√ß√£o no iOS 13</em> </p><br><p>  Isso significa que a convers√£o em assinaturas pagas diminuir√°, porque √© menos prov√°vel que os usu√°rios se esque√ßam de cancelar sua assinatura.  E voc√™ certamente estar√° procurando uma solu√ß√£o para aumentar os lucros dos usu√°rios atuais. </p><br><h2 id="pravila-v-apphud">  Regras Apphud </h2><br><p>  A mec√¢nica da solu√ß√£o de problemas de pagamento √© chamada de <em>"Regra"</em> .  Examinamos apenas uma das regras.  Temos outras regras que ajudar√£o voc√™ a aumentar lucros e reter usu√°rios.  Leia mais <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em nosso blog</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt472452/">https://habr.com/ru/post/pt472452/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt472440/index.html">Um dia no Joker 2019</a></li>
<li><a href="../pt472442/index.html">A situa√ß√£o: todo mundo est√° falando sobre o retorno de formatos de √°udio esquecidos - por que eles est√£o destinados a permanecer nichos</a></li>
<li><a href="../pt472444/index.html">Os melhores produtos partem de problemas reais: interfone sobre trabalhos a serem realizados. Parte 3 final</a></li>
<li><a href="../pt472446/index.html">Como fazer a cor correta do c√≥digo em "Habr√©" e por que √© t√£o dif√≠cil</a></li>
<li><a href="../pt472448/index.html">Temas da se√ß√£o Frontend no DUMP Kazan: ML para um desenvolvedor front-end, pixel magic, SvelteJS, risos, suor e l√°grimas</a></li>
<li><a href="../pt472454/index.html">Vis√£o geral de servidores VPS baratos</a></li>
<li><a href="../pt472462/index.html">iFest em N√≠jni Novgorod: TI √© impressionante</a></li>
<li><a href="../pt472464/index.html">5 maneiras de criar um servidor Python em um Raspberry Pi Parte 2</a></li>
<li><a href="../pt472466/index.html">Classificar por distribui√ß√£o</a></li>
<li><a href="../pt472468/index.html">ClusterJ - trabalhando com o MySQL NDB Cluster de Java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>