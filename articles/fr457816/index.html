<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚ÄçüöÄ ü•á üë©üèª‚Äçüé® Juju en un coup d'≈ìil üöó üíÖüèΩ üêøÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'autre jour, je suis tomb√© sur un outil Canonical Juju. 


 Les notes provenant d'Internet pr√©tendent qu'il s'agit d'un outil de gestion de configura...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Juju en un coup d'≈ìil</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457816/"><p>  L'autre jour, je suis tomb√© sur un outil Canonical Juju. </p><br><p>  Les notes provenant d'Internet pr√©tendent qu'il s'agit d'un outil de gestion de configuration comme Chef, Ansible ou Puppet. </p><br><p>  J'ai lu en oblique les quais dessus, j'ai regard√© dans les d√©p√¥ts avec des modules de charmes (analogiques des livres de cuisine ou des playbooks) et je soutiens que ce n'est pas le cas. </p><br><p>  Juju ressemble plus √† un orchestre VM-agnostique (comme Nomad ou Kubernetes).  Sur celui-ci, vous pouvez d√©crire de mani√®re d√©clarative la configuration de l'infrastructure de l'application: quelles applications nous ex√©cutons, sur quelles machines, en combien de copies, comment elles sont connect√©es √† d'autres services. <br>  Mais contrairement √† Kubernetes, il peut fonctionner non seulement avec Docker, mais aussi avec tout type de machines virtuelles. </p><a name="habracut"></a><br><p>  Ils disent que le noyau, l'agent et le client sont √©crits en Golang - et je ne les ai pas regard√©s. </p><br><p>  La partie li√©e √† la configuration elle-m√™me est g√©n√©ralement d√©crite en combinaison avec YAML et Python (les docks disent que vous pouvez utiliser d'autres langages en plus de python). </p><br><h2 id="kak-zhe-eto-vse-rabotaet">  Comment tout cela fonctionne-t-il? </h2><br><p>  <strong>Avertissement</strong> : cet article ne pr√©tend pas √™tre une description compl√®te et pr√©cise, je le vois plut√¥t comme un moyen d'abaisser le seuil d'entr√©e pour ceux qui veulent jeter un ≈ìil √† Juju et aider √† naviguer dans la documentation. </p><br><p> La documentation compl√®te est ici: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://docs.jujucharms.com/</a> </p><br><p>  Comme d√©j√† √©crit ci-dessus, √† Juju il y a plusieurs composants: </p><br><ul><li>  Le contr√¥leur est la partie serveur qui alloue les machines virtuelles.  Chaque fournisseur [cloud] a son propre contr√¥leur (y compris pour les fournisseurs pas tout √† fait cloud tels que LXD local ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Metal as a Service</a> ). <br>  Le contr√¥leur est une application monolithique √† partir d'un composant.  Au moins une copie du contr√¥leur doit √™tre ex√©cut√©e dans chaque fournisseur.  Il y a de l'AH, mais je n'y ai pas plong√©. </li><li>  Agent - installez chaque machine virtuelle.  Il existe deux types d'agents - pour la machine et pour l'unit√©.  Il semble que l'un d'eux soit plac√© sur la machine h√¥te, et l'un d'eux sur la machine virtuelle - je n'ai pas non plus explor√© cela en d√©tail. </li><li>  Le client est un outil CLI pour g√©rer toute cette √©conomie. </li><li>  GUI </li><li>  Une description d√©clarative de tous les composants utilisateurs (applications, machines, etc.) </li><li>  Code personnalis√© pour configurer une machine virtuelle distincte, il s'appelle Charms </li></ul><br><p>  (En fait, il y a un plus grand arbre de composants, mais pour cette histoire, nous allons le simplifier pour qu'il soit plus facile de comprendre ce qui est quoi) </p><br><p>  Sur une description d√©clarative, vous pouvez construire approximativement les structures de composants suivantes (les graphiques sont dessin√©s automatiquement par l'interface graphique): <br><img src="https://habrastorage.org/getpro/habr/post_images/7d0/ab7/053/7d0ab7053259a48f8a4cb48e9f5b50c0.png" alt="image"></p><br><p>  La partie serveur cr√©e en quelque sorte des machines virtuelles l√†-bas, tire des d√©pendances, √©tablit des relations entre elles, surveille les signaux qui se produisent - tout semble √™tre assez standard l√†-bas, comme pour d'autres orchestrateurs. </p><br><p>  Et voici les modules de configuration des machines virtuelles appel√©s charms (unit - charm), regardons de plus pr√®s. </p><br><p>  Il semblerait que je connaisse Chef, Ansible et Puppet, il n'y a probablement rien de nouveau ici, mais ce n'est pas le cas.  Les cr√©ateurs de Juju n'ont pas cr√©√© de DSL pour d√©crire de mani√®re d√©clarative les ressources du syst√®me.  Au lieu de cela, ils ont cr√©√© un cadre qui permettrait au code Python ou Bash compl√®tement normal d'√™tre idempotent et de l'associer √† un contr√¥leur Juju. </p><br><h2 id="ustroystvo-charm">  Dispositif de charme </h2><br><p>  Les charmes eux-m√™mes ne sont pas tr√®s simples.  Par complexit√© structurelle, ils rappellent les livres de cuisine du chef ou les r√¥les d'ansible.  Et en fait, ils sont plus probablement un analogue des ressources, plut√¥t que des livres de cuisine. </p><br><p>  Ils se composent de m√©tadonn√©es / partie d√©clarative, de crochets p√©remptoires (r√©action aux √©v√©nements) et de toutes sortes de fichiers de donn√©es tels que des scripts suppl√©mentaires, de la documentation ou des configurations typiques. </p><br><p> La partie d√©clarative d√©crit les interfaces de d√©pendance de charme (par exemple, le charme wordpress d√©pend de mysql, et le charme mysql fournit cette interface), la compatibilit√© du syst√®me, les balises, les param√®tres de configuration (tels que les attributs de cookie) et les couches de programme en fonction d'autres charmes ( par exemple, la plupart des charms incluent une <code>layer:basic</code> ). </p><br><p>  Dans les crochets imp√©ratifs, une r√©action √† toutes sortes d'√©v√©nements externes est d√©crite.  Par exemple, nous <code>install</code> package n√©cessaire sur l'√©v√©nement d' <code>install</code> , le <code>configure</code> sur l'√©v√©nement <code>configure</code> et <code>start</code> service sur l'√©v√©nement de <code>start</code> . </p><br><p>  Tout est √©crit sur un python ordinaire avec des d√©corateurs (quelque part, j'ai lu la d√©claration que vous pouvez √©crire sur n'importe quoi, m√™me sur un bash, mais je n'ai vu aucun exemple). </p><br><p>  Un exemple l√©ger classique est NTP: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://github.com/lampkicking/charm-ntp</a> </p><br><p>  Fait int√©ressant, apparemment, lors de la compilation du charme, une application compl√®tement autonome est obtenue qui peut √™tre ex√©cut√©e sur le serveur sans d√©pendances suppl√©mentaires - dans la version compil√©e, j'ai vu qu'elle incluait le contenu de toutes les couches utilis√©es, ainsi que les tarballs de tous les modules Python utilis√©s. </p><br><p>  Exemple pour NTP: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://jaas.ai/ntp/32</a> (voir la liste des fichiers sur le c√¥t√© droit de la page). </p><br><h2 id="rezyume">  R√©sum√© </h2><br><p>  Juju a une approche tr√®s int√©ressante et inhabituelle pour d√©crire et mettre en place l'infrastructure. </p><br><p>  Tr√®s probablement, le juju a un seuil d'entr√©e sup√©rieur √† celui du chef, les charmes sont probablement plus lents √† d√©velopper que les livres de cuisine et les livres de jeu et n√©cessitent plus de comp√©tences en programmation. </p><br><p>  D'un autre c√¥t√©, je suppose qu'un mod√®le avec des hooks d'√©v√©nements vous encourage √† √©crire du code plus correct. </p><br><p>  Il me semblait que Juju s'adresse davantage aux programmeurs d'infrastructure (ceux qui ont √©crit de nombreux outils CLI sur python sous Linux il y a 5-7 ans), qui doivent maintenant configurer les serveurs, tandis que Chef / Ansible - aux administrateurs, qui au lieu d'un -Deux maintenant vous devez configurer une centaine ou deux serveurs. </p><br><p>  Dois-je utiliser Juju en 2019? <br>  Pas s√ªr: </p><br><ul><li>  Vous allez envelopper de nouvelles applications (natives du cloud) dans docker dans docker et les lancer sur le cuber ou ECS </li><li>  Pour les "anciennes" applications, vous avez probablement d√©j√† des scripts de d√©ploiement √©crits sur l'ensemble ou le boss </li><li>  Pour de nouveaux projets avec une "ancienne" architecture - peut-√™tre.  <strong>MAIS</strong> : </li><li>  Presque personne ne conna√Æt Juju dans RuNet, c'est le premier article en russe qui d√©crit un peu ce que c'est </li></ul><br><p>  Si vous travaillez avec Juju, √©crivez dans les commentaires o√π j'ai fait une erreur - apr√®s tout, je n'y lis que les quais pendant 2-3 heures. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457816/">https://habr.com/ru/post/fr457816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr457804/index.html">ListenIt - Extension Google Chrome pour cr√©er automatiquement des versions audio d'articles</a></li>
<li><a href="../fr457808/index.html">Imageur thermique Seek Thermal Compact</a></li>
<li><a href="../fr457810/index.html">Approche d'ing√©nierie pour le d√©veloppement de logiciels</a></li>
<li><a href="../fr457812/index.html">¬´Attends! Qui vient? " Surveillance vid√©o sur le porche</a></li>
<li><a href="../fr457814/index.html">Prochaines √©tapes √† suivre 2</a></li>
<li><a href="../fr457820/index.html">Comment faire grandir un √©vang√©liste pour votre entreprise</a></li>
<li><a href="../fr457824/index.html">Stress infectieux: synchronisation intersp√©cifique des niveaux de cortisol sur l'exemple des chiens et de leurs propri√©taires</a></li>
<li><a href="../fr457826/index.html">LLVM pour Tensorflow, ou Law End Compiler de Moore</a></li>
<li><a href="../fr457830/index.html">Comment r√©parer une piscine d'arri√®re-cour en 7 heures en utilisant la m√©thode du chemin critique?</a></li>
<li><a href="../fr457836/index.html">Ce que j'ai appris en cr√©ant Dribbble</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>