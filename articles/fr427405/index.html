<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧘🏽 🚰 🏒 ES2018 - enfin promet méthode 🙎 🙎🏻 🐅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'auteur de la note, dont nous publions la traduction aujourd'hui, dit qu'il s'est à peine abstenu de ne pas l'appeler «Enfin - l'opportunité que tout...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ES2018 - enfin promet méthode</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/427405/">  L'auteur de la note, dont nous publions la traduction aujourd'hui, dit qu'il s'est à peine abstenu de ne pas l'appeler «Enfin - l'opportunité que tout le monde attendait» ou de plaisanter sur ce sujet.  En fin de compte, il a décidé de se passer de blagues et de simplement parler de la fonctionnalité vraiment importante et utile des objets Promise. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vx/we/c2/vxwec2slp-mndo8ep4anvgcykgg.png"></div><a name="habracut"></a><br>  Si vous commencez tout juste à apprendre JavaScript et n'êtes pas trop familier avec les promesses (parfois elles sont appelées «promesses», «résultats promis», «objets promis»), alors vous pourriez être intéressé par nos publications précédentes sur ce sujet: <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Promesses dans ES6: motifs et anti-motifs</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaScript: méthodes de programmation asynchrones</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaScript ES8 et transition vers async / attente</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Async / attente: 6 raisons d'oublier les promesses</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Échapper à l'enfer asynchrone / attendre</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaScript ES6: écrivez moins - faites plus</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Guide des promesses pour ceux qui veulent les trier</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conception JavaScript asynchrone / en attente: points forts, pièges et modèles d'utilisation</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Utilisation de promesses en JavaScript</a> <br><br><h2>  <font color="#3AC1EF">Promise.prototype.finally, méthode</font> </h2><br>  L'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">25.6.5.3 de</a> la norme ECMAScript 2018 est dédié à la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">méthode Promise.prototype.finally</a> . Selon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">caniuse.com</a> , le niveau de support pour cette méthode est d'environ 81%.  Cette méthode peut également être utilisée dans Node.js. <br><br>  La méthode de la promesse finale est l'une des innovations les plus importantes de la norme, qui vous permet de spécifier une fonction qui sera exécutée quel que soit le résultat de la promesse.  Une telle fonction sera remplie si la promesse est résolue avec succès et si elle est rejetée. <br>  Prenons un exemple: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> myPromise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'success!!!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">2000</span></span>); });</code> </pre> <br>  Il s'agit d'une promesse parfaitement courante qui se résout après 2000 millisecondes.  Si après cela, nous devons effectuer une action, nous aurons besoin d'un bloc <code>then</code> : <br><br><pre> <code class="hljs javascript">myPromise.then( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(result) }, failMessage =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(failMessage) } );</code> </pre> <br>  Deux fonctions anonymes sont passées à la méthode <code>then</code> .  Le premier sera exécuté si la promesse est résolue avec succès.  Le second, c'est quand il est rejeté.  Notre promesse se termine toujours avec succès, le message de <code>success!!!</code> sera toujours affiché dans la console <code>success!!!</code>  .  Tout cela est très bien, mais qu'en est-il s'il est nécessaire que certaines actions soient menées après le rejet de la promesse, et après l'achèvement réussi de son travail?  Ici, la méthode <code>finally</code> nous aidera: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> myPromise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'success!!!'</span></span>); }, <span class="hljs-number"><span class="hljs-number">2000</span></span>); }); myPromise.then( <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(result) }, failMessage =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(failMessage) } ).finally(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">finallyMessage</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'FINALLY!!'</span></span>)});</code> </pre> <br>  Quelle que soit la fin de la promesse, le texte sera <code>FINALLY!!</code> affiché en plus du message correspondant à la console <code>FINALLY!!</code>  , ce qui nous indique que la fonction de rappel passée à la méthode <code>finally</code> fonctionne quand même.  Afin de vérifier cela - vous pouvez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">expérimenter</a> . <br><br><h2>  <font color="#3AC1EF">Résumé</font> </h2><br>  Le fait que la méthode Promise.prototype.finally soit apparue dans ES2018 suggère qu'un niveau très élevé de prise en charge du navigateur peut être attendu dans un avenir prévisible.  Cela signifie que ce que vous aviez auparavant à utiliser des outils auxiliaires créés par des développeurs tiers peut désormais être implémenté à l'aide d'outils standard. <br><br>  Dans quelles situations la méthode <code>Promise.prototype.finally</code> peut- <code>Promise.prototype.finally</code> être utile?  Par exemple - si, lorsque vous démarrez la Promesse utilisée pour télécharger quelque chose, une animation commence à jouer, vous pouvez <code>finally</code> terminer cette animation.  Dans le bloc <code>finally</code> , vous pouvez, par exemple, fermer une certaine fenêtre modale.  En fait, il existe de nombreuses situations dans lesquelles la méthode <code>finally</code> peut être utile. <br><br>  <b>Chers lecteurs!</b>  Avez-vous utilisé des substituts à la méthode finalement promises avant ses implémentations standard? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr427405/">https://habr.com/ru/post/fr427405/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr427395/index.html">"Expliquons: ou pourquoi un programmeur mathématicien." Un livre sur la façon de ne pas manquer les cours de mathématiques</a></li>
<li><a href="../fr427397/index.html">Développement d'un ensemble de données acoustiques pour la formation d'un réseau neuronal</a></li>
<li><a href="../fr427399/index.html">Utilisation de données lors de la création d'une API basée sur GraphQL</a></li>
<li><a href="../fr427401/index.html">Shaders de dissolution et exploration du monde</a></li>
<li><a href="../fr427403/index.html">API ReportingObserver: un regard sur le code des pages web sous un nouvel angle</a></li>
<li><a href="../fr427407/index.html">Méta-clustering avec minimisation des erreurs, et pourquoi je pense que le cerveau fonctionne de cette façon</a></li>
<li><a href="../fr427409/index.html">Le livre "The Brilliant Agile. Gestion de projet flexible avec Agile, Scrum et Kanban »</a></li>
<li><a href="../fr427413/index.html">Lutter pour les ressources, partie 4: grand</a></li>
<li><a href="../fr427415/index.html">Nous utilisons Node.js pour travailler avec des fichiers volumineux et des ensembles de données brutes.</a></li>
<li><a href="../fr427417/index.html">Avec de l'humour sur des disquettes de 8 pouces (dans les années 70, il n'y en avait que)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>