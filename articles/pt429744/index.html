<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöµüèª üêØ üòÜ Aprenda o OpenGL. Li√ß√£o 6.4 - IBL. Exposi√ß√£o especular üç≠ üë®üèø‚Äçüîß ‚ÜòÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na li√ß√£o anterior, preparamos nosso modelo de PBR para trabalhar com o m√©todo IBL - para isso, precisamos preparar um mapa de irradia√ß√£o antecipadamen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aprenda o OpenGL. Li√ß√£o 6.4 - IBL. Exposi√ß√£o especular</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429744/"><img align="left" src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" width="300"><br>  Na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">li√ß√£o anterior,</a> preparamos nosso modelo de PBR para trabalhar com o m√©todo IBL - para isso, precisamos preparar um mapa de irradia√ß√£o antecipadamente que descreva a parte difusa da ilumina√ß√£o indireta.  Nesta li√ß√£o, prestaremos aten√ß√£o √† segunda parte da express√£o da refletividade - o espelho: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-msubsup" id="MJXp-Span-2"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-3" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-4" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-5" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">p</span><span class="MJXp-mo" id="MJXp-Span-7" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-8">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12">g</span><span class="MJXp-msubsup" id="MJXp-Span-13"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-15" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-16" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-18">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">t</span><span class="MJXp-mtext" id="MJXp-Span-22">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-27">t</span><span class="MJXp-msubsup" id="MJXp-Span-28"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-29" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-30" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-31">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36">a</span></span></span><span class="MJXp-mo" id="MJXp-Span-37" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-40" style="vertical-align: -0.4em;">d</span></span><span class="MJXp-mtext" id="MJXp-Span-41">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45">c</span><span class="MJXp-mrow" id="MJXp-Span-46"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">c</span></span><span class="MJXp-mrow" id="MJXp-Span-48"><span class="MJXp-mtext" id="MJXp-Span-49">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-50">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51">i</span></span><span class="MJXp-mo" id="MJXp-Span-52" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-53"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-55" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mtext" id="MJXp-Span-56">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">c</span><span class="MJXp-mrow" id="MJXp-Span-61"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">G</span></span><span class="MJXp-mrow" id="MJXp-Span-65"><span class="MJXp-mn" id="MJXp-Span-66">4</span><span class="MJXp-mo" id="MJXp-Span-67" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-68">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">g</span><span class="MJXp-msubsup" id="MJXp-Span-73"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-75" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-76">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-77">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">n</span><span class="MJXp-mo" id="MJXp-Span-82" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-83" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-84">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">g</span><span class="MJXp-msubsup" id="MJXp-Span-89"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-91" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-92">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-93">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">n</span><span class="MJXp-mo" id="MJXp-Span-98" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mo" id="MJXp-Span-99" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-100"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-102" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-103" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">p</span><span class="MJXp-mo" id="MJXp-Span-105" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-106">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">g</span><span class="MJXp-msubsup" id="MJXp-Span-111"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-113" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-114" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">n</span><span class="MJXp-mtext" id="MJXp-Span-116">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-119">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">t</span><span class="MJXp-mtext" id="MJXp-Span-121">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">g</span><span class="MJXp-msubsup" id="MJXp-Span-126"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-128" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">d</span><span class="MJXp-mtext" id="MJXp-Span-130">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">g</span><span class="MJXp-msubsup" id="MJXp-Span-135"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-137" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="133.846ex" height="2.78ex" viewBox="0 -832 57628 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="14781" y="0"></use><g transform="translate(15171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-66" x="16413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-72" x="16963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="17415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="17944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="18378" y="0"></use><g transform="translate(18811,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="753" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2B" x="20132" y="0"></use><g transform="translate(21133,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-73" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-66" x="22337" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-72" x="22887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="23339" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="23868" y="0"></use><g transform="translate(24302,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(26666,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="13946" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="41002" y="0"></use><g transform="translate(41392,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="42417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="42807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="43310" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="44006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="44491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="45370" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="45836" y="0"></use><g transform="translate(46317,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="47190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="47580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="48430" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="48864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="49387" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="49873" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="50484" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="50970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="51848" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="52315" y="0"></use><g transform="translate(52795,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="53669" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="54443" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="54928" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="55807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="56273" y="0"></use><g transform="translate(56754,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} (k_d \ frac {c} {\ pi} + k_s \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n )}) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Conte√∫do</b> <div class="spoiler_text">  Parte 1. Introdu√ß√£o <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cria√ß√£o de janela</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ol√° janela</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ol√° tri√¢ngulo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shaders</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Texturas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Transforma√ß√µes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sistemas de coordenadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Camera</a> </li></ol><br>  Parte 2. Ilumina√ß√£o b√°sica <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">No√ß√µes b√°sicas de ilumina√ß√£o</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Materiais</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapas de textura</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fontes de luz</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V√°rias fontes de ilumina√ß√£o</a> </li></ol><br>  Parte 3. Baixe modelos 3D <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Biblioteca Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Classe de pol√≠gono de malha</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Classe do modelo 3D</a> </li></ol><br>  Parte 4. Recursos avan√ßados do OpenGL <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teste de profundidade</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teste de est√™ncil</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mistura de cores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Faces de recorte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Buffer de quadros</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cart√µes c√∫bicos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Manipula√ß√£o avan√ßada de dados</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GLSL avan√ßado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Shader geom√©trico</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Instanciamento</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Suaviza√ß√£o</a> </li></ol><br>  Parte 5. Ilumina√ß√£o Avan√ßada <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Ilumina√ß√£o avan√ßada.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Modelo Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Corre√ß√£o gama</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cart√µes de sombra</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapas de sombra omnidirecionais</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapeamento normal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mapeamento de paralaxe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Renderiza√ß√£o adiada</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SSAO</a> </li></ol><br>  Parte 6. PBR <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Teoria</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fontes de luz anal√≠tica</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Irradia√ß√£o difusa.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Exposi√ß√£o no espelho.</a> </li></ol><br></div></div><br>  Voc√™ pode notar que o componente espelho Cook-Torrens (subexpress√£o com um fator <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-138"><span class="MJXp-msubsup" id="MJXp-Span-139"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-141" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.215ex" height="2.419ex" viewBox="0 -780.1 953.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-73" x="737" y="-213"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> k_s </script>  ) n√£o √© constante e depende da dire√ß√£o da luz incidente, <b>bem como</b> da dire√ß√£o da observa√ß√£o.  A solu√ß√£o dessa integral para todas as dire√ß√µes poss√≠veis de incid√™ncia da luz, juntamente com todas as dire√ß√µes poss√≠veis da observa√ß√£o em tempo real, simplesmente n√£o √© vi√°vel.  Portanto, os pesquisadores da Epic Games propuseram uma abordagem chamada <i>aproxima√ß√£o por soma dividida</i> , que permite preparar parcialmente os dados para o componente espelho antecipadamente, sujeito a determinadas condi√ß√µes. <br><br>  Nesta abordagem, o componente espelho da express√£o da refletividade √© dividido em duas partes, que podem ser pr√©-convolu√≠das separadamente e depois combinadas em um sombreador PBR, para uso como fonte de radia√ß√£o especular indireta.  Como na gera√ß√£o do mapa de irradia√ß√£o, o processo de convolu√ß√£o recebe um mapa do ambiente HDR em sua entrada. <br><br>  Para entender o m√©todo de aproxima√ß√£o de soma dividida, vejamos novamente a express√£o da refletividade, deixando apenas a subexpress√£o para o componente espelho (a parte difusa foi considerada separadamente na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">li√ß√£o anterior</a> ): <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-142"><span class="MJXp-msubsup" id="MJXp-Span-143"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-145" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-146" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">p</span><span class="MJXp-mo" id="MJXp-Span-148" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-149">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">g</span><span class="MJXp-msubsup" id="MJXp-Span-154"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-156" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-157" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-158" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-159">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">t</span><span class="MJXp-mtext" id="MJXp-Span-163">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">t</span><span class="MJXp-msubsup" id="MJXp-Span-169"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-171" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-172">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">a</span></span></span><span class="MJXp-mo" id="MJXp-Span-178" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-179"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-181" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mtext" id="MJXp-Span-182">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">c</span><span class="MJXp-mrow" id="MJXp-Span-187"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">G</span></span><span class="MJXp-mrow" id="MJXp-Span-191"><span class="MJXp-mn" id="MJXp-Span-192">4</span><span class="MJXp-mo" id="MJXp-Span-193" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-194">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">g</span><span class="MJXp-msubsup" id="MJXp-Span-199"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-201" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-202">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">n</span><span class="MJXp-mo" id="MJXp-Span-208" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-209" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-210">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">g</span><span class="MJXp-msubsup" id="MJXp-Span-215"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-217" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-218">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">n</span><span class="MJXp-mo" id="MJXp-Span-224" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-msubsup" id="MJXp-Span-225"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-227" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-228" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">p</span><span class="MJXp-mo" id="MJXp-Span-230" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-231">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-235">g</span><span class="MJXp-msubsup" id="MJXp-Span-236"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-238" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-239" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">n</span><span class="MJXp-mtext" id="MJXp-Span-241">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">t</span><span class="MJXp-mtext" id="MJXp-Span-246">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">g</span><span class="MJXp-msubsup" id="MJXp-Span-251"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-253" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">d</span><span class="MJXp-mtext" id="MJXp-Span-255">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-257">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">g</span><span class="MJXp-msubsup" id="MJXp-Span-260"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-262" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-263" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-264">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">t</span><span class="MJXp-mtext" id="MJXp-Span-268">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-270">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">i</span><span class="MJXp-msubsup" id="MJXp-Span-273"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-275" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-276">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">a</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-282"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-284" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-285" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">p</span><span class="MJXp-mo" id="MJXp-Span-287" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-288">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">g</span><span class="MJXp-msubsup" id="MJXp-Span-293"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-294" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-295" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-296" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-297">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301">g</span><span class="MJXp-msubsup" id="MJXp-Span-302"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-304" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-305" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-306"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-307" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-308" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-309" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">p</span><span class="MJXp-mo" id="MJXp-Span-311" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-312">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-316">g</span><span class="MJXp-msubsup" id="MJXp-Span-317"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-318" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-319" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-320" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-321">n</span><span class="MJXp-mtext" id="MJXp-Span-322">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">t</span><span class="MJXp-mtext" id="MJXp-Span-327">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">g</span><span class="MJXp-msubsup" id="MJXp-Span-332"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-334" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">d</span><span class="MJXp-mtext" id="MJXp-Span-336">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">g</span><span class="MJXp-msubsup" id="MJXp-Span-341"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-343" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="198.557ex" height="2.78ex" viewBox="0 -832 85489.7 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="14781" y="0"></use><g transform="translate(15171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-73" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-66" x="16374" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-72" x="16925" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="17376" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="17906" y="0"></use><g transform="translate(18339,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(20704,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="13946" y="0"></use></g><g transform="translate(35040,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="36066" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="36455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="36959" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="37654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="38139" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="39018" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="39484" y="0"></use><g transform="translate(39965,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="40839" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="41228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="42079" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="42512" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="43036" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="43521" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="44133" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="44618" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="45497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="45963" y="0"></use><g transform="translate(46444,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="47318" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="48091" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="48577" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="49455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="49922" y="0"></use><g transform="translate(50402,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-3D" x="51554" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="52860" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="53205" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="53806" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6C" x="54417" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="54716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="55061" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="55940" y="0"></use><g transform="translate(56285,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="2942" y="0"></use></g></g><g transform="translate(59202,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-72" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="60112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="60501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="61005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="61700" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="62186" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="63064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="63531" y="0"></use><g transform="translate(64011,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="64885" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="65580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="66065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="66944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="67410" y="0"></use><g transform="translate(67891,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="68864" y="0"></use><g transform="translate(69253,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="70279" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="70669" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="71172" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="71867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="72353" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="73231" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="73698" y="0"></use><g transform="translate(74178,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="75052" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="75442" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="76292" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="76726" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="77249" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="77735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="78346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="78832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="79710" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="80177" y="0"></use><g transform="translate(80657,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="81531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="82304" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="82790" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="83668" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="84135" y="0"></use><g transform="translate(84615,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} (k_s \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)} L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i = \ int \ limit _ {\ Omega} f_r (p, \ omega_i, \ omega_o) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br>  Assim como na prepara√ß√£o do mapa de irradia√ß√£o, essa integral n√£o √© poss√≠vel resolver em tempo real.  Portanto, √© desej√°vel calcular de maneira semelhante o mapa para o componente espelho da express√£o de refletividade e, no ciclo principal de renderiza√ß√£o, fa√ßa uma sele√ß√£o simples desse mapa com base no normal para a superf√≠cie.  No entanto, nem tudo √© t√£o simples: o mapa de irradia√ß√£o foi obtido com relativa facilidade devido ao fato de a integral depender apenas de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-344"><span class="MJXp-mtext" id="MJXp-Span-345">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">g</span><span class="MJXp-msubsup" id="MJXp-Span-350"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-352" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-4"> \ omega_i </script>  , e a subexpress√£o constante do componente difuso lambertiano pode ser retirada do sinal da integral.  Nesse caso, a integral depende n√£o apenas da <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-353"><span class="MJXp-mtext" id="MJXp-Span-354">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-358">g</span><span class="MJXp-msubsup" id="MJXp-Span-359"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-360" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-361" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-5"> \ omega_i </script>  isso √© f√°cil de entender a partir da f√≥rmula BRDF: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-362"><span class="MJXp-msubsup" id="MJXp-Span-363"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-364" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-365" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-366" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-367">p</span><span class="MJXp-mo" id="MJXp-Span-368" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-369"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-371" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-372" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-373"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374" style="margin-right: 0.05em;">w</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-375" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-376" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-377" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-378">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-380">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">c</span><span class="MJXp-mrow" id="MJXp-Span-383"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">F</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">G</span></span><span class="MJXp-mrow" id="MJXp-Span-387"><span class="MJXp-mn" id="MJXp-Span-388">4</span><span class="MJXp-mo" id="MJXp-Span-389" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-390">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394">g</span><span class="MJXp-msubsup" id="MJXp-Span-395"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-397" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mtext" id="MJXp-Span-398">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-399">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">n</span><span class="MJXp-mo" id="MJXp-Span-404" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-405" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-406">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-408">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">g</span><span class="MJXp-msubsup" id="MJXp-Span-411"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-413" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-414">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-415">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-416">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-417">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">n</span><span class="MJXp-mo" id="MJXp-Span-420" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="59.349ex" height="2.66ex" viewBox="0 -832 25552.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-72" x="693" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="1299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="1802" y="0"></use><g transform="translate(2247,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="3308" y="0"></use><g transform="translate(3753,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="1013" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="4913" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-3D" x="5580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-66" x="6887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-72" x="7437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="7889" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="8418" y="0"></use><g transform="translate(8852,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(11216,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="13946" y="0"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> f_r (p, w_i, w_o) = \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)} </script></p><br>  A express√£o sob a integral tamb√©m depende de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-421"><span class="MJXp-mtext" id="MJXp-Span-422">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-424">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">g</span><span class="MJXp-msubsup" id="MJXp-Span-427"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-429" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.208ex" height="1.817ex" viewBox="0 -520.7 3533.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-7"> \ omega_o </script>  - para dois vetores de dire√ß√£o, √© quase imposs√≠vel selecionar um mapa c√∫bico previamente preparado.  Posi√ß√£o do ponto <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-430"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">p</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-8"> p </script>  Nesse caso, voc√™ n√£o pode levar em considera√ß√£o - por que isso foi discutido na li√ß√£o anterior.  C√°lculo preliminar da integral para todas as combina√ß√µes poss√≠veis <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-432"><span class="MJXp-mtext" id="MJXp-Span-433">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-435">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">g</span><span class="MJXp-msubsup" id="MJXp-Span-438"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-440" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-9"> \ omega_i </script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-441"><span class="MJXp-mtext" id="MJXp-Span-442">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-444">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">g</span><span class="MJXp-msubsup" id="MJXp-Span-447"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-449" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.208ex" height="1.817ex" viewBox="0 -520.7 3533.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-10"> \ omega_o </script>  imposs√≠vel em tarefas em tempo real. <br><br>  O m√©todo de quantia dividida da Epic Games resolve esse problema dividindo o problema de c√°lculo preliminar em duas partes independentes, cujos resultados podem ser combinados posteriormente para obter o valor final calculado.  O m√©todo de soma dividida extrai duas integrais da express√£o original para o componente de espelho: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-450"><span class="MJXp-msubsup" id="MJXp-Span-451"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-452" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-453" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-454" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">p</span><span class="MJXp-mo" id="MJXp-Span-456" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-457">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461">g</span><span class="MJXp-msubsup" id="MJXp-Span-462"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-464" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-465" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-466" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-467">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-469">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">t</span><span class="MJXp-mtext" id="MJXp-Span-471">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-476">t</span><span class="MJXp-msubsup" id="MJXp-Span-477"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-479" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-480">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-485">a</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-486"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-487" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-488" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-489" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-490">p</span><span class="MJXp-mo" id="MJXp-Span-491" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-492">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-494">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-496">g</span><span class="MJXp-msubsup" id="MJXp-Span-497"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-498" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-499" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-500" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-501">d</span><span class="MJXp-mtext" id="MJXp-Span-502">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-504">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-506">g</span><span class="MJXp-msubsup" id="MJXp-Span-507"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-508" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-509" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-510" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mtext" id="MJXp-Span-511">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-512">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-513">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514">t</span><span class="MJXp-mtext" id="MJXp-Span-515">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-517">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-519">i</span><span class="MJXp-msubsup" id="MJXp-Span-520"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-522" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-523">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-528">a</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-529"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-530" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-531" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-532" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-533">p</span><span class="MJXp-mo" id="MJXp-Span-534" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-535">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-539">g</span><span class="MJXp-msubsup" id="MJXp-Span-540"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-541" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-542" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-543" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-544">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-545">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-547">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">g</span><span class="MJXp-msubsup" id="MJXp-Span-549"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-551" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-552" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553">n</span><span class="MJXp-mtext" id="MJXp-Span-554">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-555">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-556">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-557">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">t</span><span class="MJXp-mtext" id="MJXp-Span-559">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-561">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563">g</span><span class="MJXp-msubsup" id="MJXp-Span-564"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-566" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-567">d</span><span class="MJXp-mtext" id="MJXp-Span-568">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-569">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-572">g</span><span class="MJXp-msubsup" id="MJXp-Span-573"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-574" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-575" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="122.085ex" height="2.78ex" viewBox="0 -832 52564.4 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="2942" y="0"></use></g></g><g transform="translate(14781,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="15807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="16197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="16700" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="17395" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="17881" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="18759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="19226" y="0"></use><g transform="translate(19706,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="20580" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="20970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="21743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="22229" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="23107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="23574" y="0"></use><g transform="translate(24054,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2217" x="25150" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="26123" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="26468" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="27069" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6C" x="27680" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="27979" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="28324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="29203" y="0"></use><g transform="translate(29548,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="2942" y="0"></use></g></g><g transform="translate(32465,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-72" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="33375" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="33764" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="34268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="34963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="35449" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="36327" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="36794" y="0"></use><g transform="translate(37274,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="38148" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="38843" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="39328" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="40207" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="40673" y="0"></use><g transform="translate(41154,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="42127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="42516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="43367" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="43800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="44324" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="44809" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="45421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="45906" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="46785" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="47251" y="0"></use><g transform="translate(47732,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="48606" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="49379" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="49865" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="50743" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="51210" y="0"></use><g transform="translate(51690,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-11"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} L_i (p, \ omega_i) d \ omega_i * \ int \ limit _ {\ Omega} f_r (p, \ omega_i, \ omega_o) n \ cdot \ omega_i d \ omega_i </script></p><br>  O resultado do c√°lculo da primeira parte √© geralmente chamado de <i>mapa do ambiente pr√©-filtrado</i> ( <i>mapa do ambiente pr√©-filtrado</i> ) e √© um mapa do ambiente, sujeito ao processo de convolu√ß√£o especificado por esta express√£o.  Tudo isso √© semelhante ao processo de obten√ß√£o de um mapa de irradia√ß√£o, mas, neste caso, a convolu√ß√£o √© realizada considerando o valor da rugosidade.  Valores de rugosidade mais altos levam ao uso de vetores de amostragem mais d√≠spares no processo de convolu√ß√£o, o que resulta em resultados mais desfocados.  O resultado da convolu√ß√£o para cada pr√≥ximo n√≠vel de rugosidade selecionado √© armazenado no pr√≥ximo n√≠vel mip do mapa de ambiente preparado.  Por exemplo, um mapa de ambiente, convolvido para cinco n√≠veis diferentes de rugosidade, cont√©m cinco n√≠veis mip e se parece com isso: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ad/nt/vq/adntvqtgc_vkrufypnzxeoayx4m.png"></div><br>  Os vetores de amostra e sua dispers√£o s√£o determinados com base na fun√ß√£o de distribui√ß√£o normal ( <i>NDF</i> ) do modelo BRDF de Cook-Torrens.  Esta fun√ß√£o aceita o vetor normal e a dire√ß√£o da observa√ß√£o como par√¢metros de entrada.  Como a dire√ß√£o da observa√ß√£o n√£o √© conhecida com anteced√™ncia no momento do c√°lculo preliminar, os desenvolvedores da Epic Games tiveram que fazer mais uma suposi√ß√£o: a dire√ß√£o do olhar (e, portanto, a dire√ß√£o da reflex√£o especular) √© sempre id√™ntica √† dire√ß√£o de sa√≠da da amostra <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-576"><span class="MJXp-mtext" id="MJXp-Span-577">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-578">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-579">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-580">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-581">g</span><span class="MJXp-msubsup" id="MJXp-Span-582"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-584" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.208ex" height="1.817ex" viewBox="0 -520.7 3533.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-12"> \ omega_o </script>  .  Sob a forma de c√≥digo: <br><br><pre><code class="cpp hljs">vec3 N = normalize(w_o); vec3 R = N; vec3 V = R;</code> </pre> <br>  Nessas condi√ß√µes, a dire√ß√£o do olhar n√£o √© necess√°ria no processo de convolu√ß√£o do mapa do ambiente, o que viabiliza o c√°lculo em tempo real.  Mas, por outro lado, perdemos a distor√ß√£o caracter√≠stica das reflex√µes especulares quando observadas em um √¢ngulo agudo em rela√ß√£o √† superf√≠cie reflexiva, como pode ser visto na imagem abaixo (de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Moving Frostbite para PBR</a> ).  Em geral, esse compromisso √© considerado aceit√°vel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qw/qu/8y/qwqu8yar2slqk93dchfih4laxse.png"></div><br>  A segunda parte da express√£o de soma dividida cont√©m o BRDF da express√£o original para o componente de espelho.  Supondo que o brilho da energia recebida seja representado espectralmente por luz branca em todas as dire√ß√µes (ou seja, <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-585"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">L</span><span class="MJXp-mo" id="MJXp-Span-587" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-588">p</span><span class="MJXp-mo" id="MJXp-Span-589" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590">x</span><span class="MJXp-mo" id="MJXp-Span-591" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-592" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-593">1</span><span class="MJXp-mo" id="MJXp-Span-594" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-595">0</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.382ex" height="2.66ex" viewBox="0 -832 5761.9 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-28" x="681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-70" x="1071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="1574" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-78" x="2019" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-29" x="2592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-3D" x="3259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-31" x="4315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-2C" x="4816" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMAIN-30" x="5261" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-13"> L (p, x) = 1,0 </script>  ), √© poss√≠vel pr√©-calcular o valor para BRDF com os seguintes par√¢metros de entrada: rugosidade do material e o √¢ngulo entre o normal <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-596"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-597">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-14"> n </script>  e dire√ß√£o da luz <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-598"><span class="MJXp-mtext" id="MJXp-Span-599">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-601">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-602">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603">g</span><span class="MJXp-msubsup" id="MJXp-Span-604"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-605" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-606" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.978ex" height="1.817ex" viewBox="0 -520.7 3434.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="2080" y="0"></use><g transform="translate(2561,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-15"> \ omega_i </script>  (ou <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-607"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-608">n</span><span class="MJXp-mtext" id="MJXp-Span-609">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-610">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-611">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-612">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-613">t</span><span class="MJXp-mtext" id="MJXp-Span-614">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-615">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-617">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-618">g</span><span class="MJXp-msubsup" id="MJXp-Span-619"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-620" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-621" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.143ex" height="2.419ex" viewBox="0 -780.1 6089.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="1284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="1807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="2293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="2904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="3390" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="4268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="4735" y="0"></use><g transform="translate(5215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-16"> n \ cdot \ omega_i </script>  )  A abordagem da Epic Games envolve armazenar os resultados do c√°lculo do BRDF para cada combina√ß√£o de rugosidade e o √¢ngulo entre o normal e a dire√ß√£o da luz na forma de uma textura bidimensional conhecida como <i>mapa de integra√ß√£o</i> do <i>BRDF</i> , que mais tarde √© usada como uma <i>tabela de pesquisa</i> ( <i>LUT</i> ) .  Essa textura de refer√™ncia usa os canais de sa√≠da vermelho e verde para armazenar a escala e o deslocamento para calcular o coeficiente de Fresnel da superf√≠cie, o que finalmente nos permite resolver a segunda parte da express√£o para a soma separada: <br><br><img src="https://habrastorage.org/webt/5s/so/fw/5ssofwhkncncu263tegajwxm15k.png"><br>  Essa textura auxiliar √© criada da seguinte maneira: coordenadas de textura horizontal (variando de [0., 1.]) s√£o consideradas como valores de par√¢metro de entrada <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-622"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-623">n</span><span class="MJXp-mtext" id="MJXp-Span-624">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-625">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">t</span><span class="MJXp-mtext" id="MJXp-Span-629">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-630">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-631">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-632">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633">g</span><span class="MJXp-msubsup" id="MJXp-Span-634"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-636" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.143ex" height="2.419ex" viewBox="0 -780.1 6089.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-63" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-64" x="1284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="1807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-74" x="2293" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6F" x="2904" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-6D" x="3390" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-65" x="4268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-67" x="4735" y="0"></use><g transform="translate(5215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429744/&amp;usg=ALkJrhj5xhZTUyjejc_T6fcsBNcLJejTZQ#MJMATHI-69" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-17"> n \ cdot \ omega_i </script>  Fun√ß√µes BRDF;  as coordenadas verticais da textura s√£o consideradas como valores de rugosidade de entrada. <br><br>  Como resultado, tendo um mapa de integra√ß√£o e um mapa de ambiente pr√©-processado, √© poss√≠vel combinar as amostras deles para obter o valor final da express√£o integral do componente de espelho: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> lod = getMipLevelFromRoughness(roughness); vec3 prefilteredColor = textureCubeLod(PrefilteredEnvMap, refVec, lod); vec2 envBRDF = texture2D(BRDFIntegrationMap, vec2(NdotV, roughness)).xy; vec3 indirectSpecular = prefilteredColor * (F * envBRDF.x + envBRDF.y)</code> </pre><br>  Essa revis√£o do m√©todo de soma dividida da Epic Games deve ajudar a fornecer uma impress√£o do processo de aproxima√ß√£o da parte da express√£o de reflet√¢ncia respons√°vel pelo componente de espelho.  Agora vamos tentar preparar os dados do cart√£o. <br><br><h2>  Pr√©-filtrando o mapa do ambiente HDR </h2><br>  A pr√©-filtragem do mapa do ambiente √© semelhante ao que foi feito para obter um mapa de irradia√ß√£o.  A √∫nica diferen√ßa √© que agora levamos em conta a rugosidade e salvamos o resultado para cada n√≠vel de rugosidade no novo n√≠vel mip do mapa c√∫bico. <br><br>  Primeiro, voc√™ precisar√° criar um novo mapa c√∫bico que conter√° o resultado da pr√©-filtragem.  Para criar o n√∫mero necess√°rio de n√≠veis mip, simplesmente chamamos <i>glGenerateMipmaps ()</i> - a mem√≥ria necess√°ria ser√° alocada para a textura atual: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> prefilterMap; glGenTextures(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;prefilterMap); glBindTexture(GL_TEXTURE_CUBE_MAP, prefilterMap); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">6</span></span>; ++i) { glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, <span class="hljs-number"><span class="hljs-number">0</span></span>, GL_RGB16F, <span class="hljs-number"><span class="hljs-number">128</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, GL_RGB, GL_FLOAT, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>); } glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR); glGenerateMipmap(GL_TEXTURE_CUBE_MAP);</code> </pre><br>  Observe: como a sele√ß√£o do <i>prefilterMap</i> ser√° baseada na exist√™ncia de n√≠veis mip, √© necess√°rio definir o modo de filtro de redu√ß√£o como <i>GL_LINEAR_MIPMAP_LINEAR</i> para ativar a filtragem trilinear.  Imagens pr√©-processadas de imagens em espelho s√£o armazenadas em faces separadas do mapa c√∫bico com uma resolu√ß√£o no n√≠vel mip b√°sico de apenas 128x128 pixels.  Para a maioria dos materiais, isso √© suficiente, no entanto, se sua cena tiver um n√∫mero maior de superf√≠cies lisas e brilhantes (por exemplo, um carro novo), talvez seja necess√°rio aumentar esta resolu√ß√£o. <br><br>  Na li√ß√£o anterior, desenvolvemos o mapa do ambiente criando vetores de amostra que s√£o distribu√≠dos igualmente no hemisf√©rio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-637"><span class="MJXp-mtext" id="MJXp-Span-638">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-640">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-641">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-642">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-643">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> \ Omega </script>  usando coordenadas esf√©ricas.  Para obter irradia√ß√£o, esse m√©todo √© bastante eficaz, o que n√£o pode ser dito sobre os c√°lculos de reflex√µes especulares.  A f√≠sica dos destaques especulares nos diz que a dire√ß√£o da luz refletida especularmente √© adjacente ao vetor de reflex√£o <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-644"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-645">r</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> r </script>  para uma superf√≠cie normal <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-646"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-647">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> n </script>  mesmo se a rugosidade n√£o for zero: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mh/fx/xq/mhfxxqxaglsggbtfz_1klwkmbga.png"></div><br>  A forma generalizada de poss√≠veis dire√ß√µes de sa√≠da da reflex√£o √© chamada de <i>lobo especular</i> ( <i>l√≥bulo</i> <i>especular</i> ; "p√©tala de um padr√£o de radia√ß√£o espelhada" - talvez muito detalhada, <i>aprox. Per.</i> ).  Com o aumento da rugosidade, a p√©tala cresce e se expande.  Al√©m disso, sua forma muda dependendo da dire√ß√£o da incid√™ncia de luz.  Assim, a forma da p√©tala √© altamente dependente das propriedades do material. <br><br>  Voltando ao modelo de micro-superf√≠cies, podemos imaginar a forma do l√≥bulo do espelho como descrevendo a orienta√ß√£o da reflex√£o em rela√ß√£o ao vetor mediano das micro-superf√≠cies, levando em considera√ß√£o alguma dire√ß√£o dada √† incid√™ncia da luz.  Entendendo que a maioria dos raios de luz refletida est√° dentro de uma p√©tala de espelho orientada com base no vetor mediano, faz sentido criar vetores de amostra orientados de maneira semelhante.  Caso contr√°rio, muitos deles ser√£o in√∫teis.  Essa abordagem √© chamada de <i>amostragem importante</i> . <br><br><h4>  Integra√ß√£o Monte Carlo e amostragem de signific√¢ncia </h4><br>  Para entender completamente o significado da amostra em termos de signific√¢ncia, voc√™ primeiro ter√° que se familiarizar com um aparato matem√°tico como o m√©todo de integra√ß√£o de Monte Carlo.  Este m√©todo √© baseado em uma combina√ß√£o de estat√≠stica e teoria das probabilidades e ajuda a resolver numericamente um problema estat√≠stico em uma amostra grande, sem a necessidade de considerar <i>cada</i> elemento dessa amostra. <br><br>  Por exemplo, voc√™ deseja calcular o crescimento m√©dio da popula√ß√£o de um pa√≠s.  Para obter um resultado preciso e confi√°vel, seria necess√°rio medir o crescimento de <i>cada</i> cidad√£o e calcular a m√©dia do resultado.  No entanto, como a popula√ß√£o da maioria dos pa√≠ses √© bastante grande, essa abordagem √© praticamente irrealiz√°vel, pois requer muitos recursos para execu√ß√£o. <br>  Outra abordagem √© criar uma subamostra menor preenchida com elementos verdadeiramente aleat√≥rios (imparciais) da amostra original.  Em seguida, voc√™ tamb√©m mede o crescimento e calcula a m√©dia do resultado dessa subamostra.  Voc√™ pode pegar pelo menos cem pessoas e obter um resultado, embora n√£o seja absolutamente preciso, mas ainda bastante pr√≥ximo da situa√ß√£o real.  A explica√ß√£o para esse m√©todo est√° na considera√ß√£o da lei de grandes n√∫meros.  E sua ess√™ncia √© descrita desta maneira: o resultado de algumas medi√ß√µes em uma subamostra de tamanho menor <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-648"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-649">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> N </script>  , composto por elementos verdadeiramente aleat√≥rios do conjunto original, estar√° pr√≥ximo do resultado do controle das medi√ß√µes realizadas em todo o conjunto inicial.  Al√©m disso, o resultado aproximado tende a ser verdadeiro com o crescimento <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-650"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-651">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> N </script>  . <br>  A integra√ß√£o de Monte Carlo √© a aplica√ß√£o da lei de grandes n√∫meros para resolver integrais.  Em vez de resolver a integral, levando em considera√ß√£o todo o conjunto (possivelmente infinito) de valores <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-652"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653">x</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> x </script>  n√≥s usamos <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-654"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-655">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> N </script>  pontos de amostra aleat√≥rios e calcule a m√©dia do resultado.  Com crescimento <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-656"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-657">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> N </script>  o resultado aproximado √© garantido para chegar perto da solu√ß√£o exata da integral. <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-658"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659">O</span><span class="MJXp-mo" id="MJXp-Span-660" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-661">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-662">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-663">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-664">t</span><span class="MJXp-mtext" id="MJXp-Span-665">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-666">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-668">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-669">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">t</span><span class="MJXp-msubsup" id="MJXp-Span-671"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-672" style="margin-right: 0.05em;">s</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-675"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-676">b</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-673"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-674">a</span></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-677">f</span><span class="MJXp-mo" id="MJXp-Span-678" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">x</span><span class="MJXp-mo" id="MJXp-Span-680" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-681">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-682">x</span><span class="MJXp-mo" id="MJXp-Span-683" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-684">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-685">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-686">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-687">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-688">c</span><span class="MJXp-mrow" id="MJXp-Span-689"><span class="MJXp-mn" id="MJXp-Span-690">1</span></span><span class="MJXp-mrow" id="MJXp-Span-691"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-692">N</span></span><span class="MJXp-mtext" id="MJXp-Span-693">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">u</span><span class="MJXp-msubsup" id="MJXp-Span-696"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-697" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-702"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-703">N</span><span class="MJXp-mo" id="MJXp-Span-704">‚àí</span><span class="MJXp-mn" id="MJXp-Span-705">1</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-698"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-699">i</span><span class="MJXp-mo" id="MJXp-Span-700">=</span><span class="MJXp-mn" id="MJXp-Span-701">0</span></span></span></span></span></span></span><span class="MJXp-mtext" id="MJXp-Span-706">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-707">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-708">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-709">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-710">c</span><span class="MJXp-mrow" id="MJXp-Span-711"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-712">f</span><span class="MJXp-mo" id="MJXp-Span-713" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-714">x</span><span class="MJXp-mo" id="MJXp-Span-715" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mrow" id="MJXp-Span-716"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-718">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-719">f</span><span class="MJXp-mo" id="MJXp-Span-720" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-721">x</span><span class="MJXp-mo" id="MJXp-Span-722" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-26"> O = \ int \ limits_ {a} ^ {b} f (x) dx = \ frac {1} {N} \ sum_ {i = 0} ^ {N-1} \ frac {f (x)} { pdf (x)} </script></p><br>  Para resolver a integral, obtemos o valor do integrando para <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-723"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-724">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> N </script>  pontos aleat√≥rios da amostra em [a, b], os resultados s√£o resumidos e divididos pelo n√∫mero total de pontos obtidos para a m√©dia.  Item <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-725"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-726">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-727">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-728">f</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> pdf </script>  descreve <i>a</i> <i>fun√ß√£o de densidade de probabilidade</i> , que mostra a probabilidade com que cada valor selecionado ocorre na amostra original.  Por exemplo, esta fun√ß√£o para o crescimento dos cidad√£os seria algo como isto: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2j/yh/zd/2jyhzdv02d8-zu_5sjgop6aahac.png"></div><br>  Pode-se observar que, ao usar pontos de amostragem aleat√≥rios, temos uma chance muito maior de atingir um valor de crescimento de 170 cm do que algu√©m com um crescimento de 150 cm. <br><br>  √â claro que durante a integra√ß√£o de Monte Carlo, alguns pontos de amostra s√£o mais prov√°veis ‚Äã‚Äãde aparecer na sequ√™ncia do que outros.  Portanto, em qualquer express√£o para a estimativa de Monte Carlo, dividimos ou multiplicamos o valor selecionado pela probabilidade de sua ocorr√™ncia usando a fun√ß√£o de densidade de probabilidade.  No momento, ao avaliar a integral, criamos muitos pontos de amostra distribu√≠dos uniformemente: a chance de obter qualquer um deles era a mesma.  Assim, nossa estimativa foi <i>imparcial</i> , o que significa que, √† medida que o n√∫mero de pontos de amostra aumenta, nossa estimativa converge para a solu√ß√£o exata da integral. <br><br>  No entanto, existem fun√ß√µes de avalia√ß√£o <i>tendenciosas</i> , ou seja,  implicando a cria√ß√£o de pontos de amostragem n√£o de maneira verdadeiramente aleat√≥ria, mas com predomin√¢ncia de alguma magnitude ou dire√ß√£o.  Tais fun√ß√µes de avalia√ß√£o permitem que a estimativa de Monte Carlo converja para a solu√ß√£o exata <i>muito mais rapidamente</i> .  Por outro lado, devido ao vi√©s da fun√ß√£o de avalia√ß√£o, a solu√ß√£o pode nunca convergir.  No caso geral, isso √© considerado um compromisso aceit√°vel, especialmente em problemas de computa√ß√£o gr√°fica, uma vez que a estimativa √© muito pr√≥xima do resultado anal√≠tico e n√£o √© necess√°ria se seu efeito parecer visualmente bastante confi√°vel.  Como veremos em breve a amostra por signific√¢ncia (usar uma fun√ß√£o de estimativa tendenciosa) permite criar pontos de amostra inclinados em dire√ß√£o a uma determinada dire√ß√£o, que √© levada em considera√ß√£o multiplicando ou dividindo cada valor selecionado pelo valor correspondente da fun√ß√£o de densidade de probabilidade. <br><br>  A integra√ß√£o de Monte Carlo √© bastante comum em problemas de computa√ß√£o gr√°fica, pois √© um m√©todo bastante intuitivo para estimar o valor de integrais cont√≠nuas por um m√©todo num√©rico, o que √© bastante eficaz.  Basta ter alguma √°rea ou volume em que a amostra est√° sendo coletada (por exemplo, nosso hemisf√©rio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-729"><span class="MJXp-mtext" id="MJXp-Span-730">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-732">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-733">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-734">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-735">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> \ Omega </script>  ), crie <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-736"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-737">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> N </script>  pontos de amostragem aleat√≥rios localizados no interior e realizar um somat√≥rio ponderado dos valores obtidos. <br><br>  O m√©todo Monte Carlo √© um t√≥pico muito extenso de discuss√£o, e aqui n√£o vamos mais entrar em detalhes, mas h√° mais um detalhe importante: n√£o existe uma maneira de criar <i>amostras aleat√≥rias</i> .  Por padr√£o, cada ponto de amostra √© completamente aleat√≥rio (psvedo) - que √© o que esperamos.  Mas, usando certas propriedades de sequ√™ncias quase aleat√≥rias, √© poss√≠vel criar conjuntos de vetores que, embora aleat√≥rios, t√™m propriedades interessantes.  Por exemplo, ao criar amostras aleat√≥rias para o processo de integra√ß√£o, voc√™ pode usar as chamadas <i>sequ√™ncias de baixa discrep√¢ncia</i> , que garantem a aleatoriedade dos pontos de amostragem criados, mas no conjunto geral eles s√£o <i>distribu√≠dos de maneira</i> mais uniforme: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3v/wm/eq/3vwmeqom0d-sq_r0nqrobj0tspq.png"></div><br>  O uso de sequ√™ncias de baixa incompatibilidade para criar um conjunto de vetores de amostra para o processo de integra√ß√£o √© o <i>m√©todo de</i> <i>integra√ß√£o de Quasi-Monte Carlo</i> .  Os quase-m√©todos de Monte Carlo convergem muito mais rapidamente que a abordagem geral, que √© uma propriedade muito atraente para aplicativos com requisitos de alto desempenho. <br><br>  Portanto, conhecemos o m√©todo geral e quase-Monte Carlo, mas h√° mais um detalhe que fornecer√° uma taxa de converg√™ncia ainda maior: uma amostra por signific√¢ncia. <br>  Como j√° observado na li√ß√£o, para reflex√µes especulares, a dire√ß√£o da luz refletida √© encerrada em um l√≥bulo especular, cujo tamanho e formato dependem da rugosidade da superf√≠cie refletora.  Entendendo que quaisquer vetores de amostra aleat√≥rios (quase) que est√£o fora do l√≥bulo do espelho n√£o afetar√£o a express√£o integral do componente do espelho, ou seja,  in√∫til.  Faz sentido concentrar a gera√ß√£o de vetores de amostra na regi√£o do l√≥bulo do espelho usando a fun√ß√£o de estimativa tendenciosa para o m√©todo de Monte Carlo. <br><br>  Essa √© a ess√™ncia da amostragem por significado: a cria√ß√£o de vetores de amostragem √© encerrada em uma determinada √°rea orientada ao longo do vetor mediano das micro-superf√≠cies, cuja forma √© determinada pela rugosidade do material.  Utilizando uma combina√ß√£o do quase-m√©todo de Monte Carlo, sequ√™ncias de baixa incompatibilidade e vi√©s no processo de cria√ß√£o de vetores de amostra devido √† amostragem significativa, alcan√ßamos taxas de converg√™ncia muito altas.  Como a converg√™ncia para a solu√ß√£o √© r√°pida o suficiente, podemos usar um n√∫mero menor de vetores de amostra para obter uma estimativa aceit√°vel o suficiente.  A combina√ß√£o de m√©todos descrita, em princ√≠pio, permite que aplica√ß√µes gr√°ficas resolvam at√© a integral do componente espelho em tempo real, embora o c√°lculo preliminar ainda permane√ßa uma abordagem muito mais lucrativa. <br><br><h4>  Sequ√™ncia de baixa incompatibilidade </h4><br>  Nesta li√ß√£o, ainda usamos um c√°lculo preliminar do componente espelho da express√£o de reflet√¢ncia para radia√ß√£o indireta.  E usaremos uma amostra de signific√¢ncia usando uma sequ√™ncia aleat√≥ria de baixa incompatibilidade e o quase-m√©todo de Monte Carlo.  A sequ√™ncia usada √© conhecida como <i>sequ√™ncia de Hammersley</i> , cuja descri√ß√£o detalhada √© dada por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Holger Dammertz</a> .  Essa sequ√™ncia, por sua vez, √© baseada na <i>sequ√™ncia de van der Corput</i> , que usa uma transforma√ß√£o bin√°ria especial da fra√ß√£o decimal em rela√ß√£o ao ponto decimal. <br><br>  Usando truques aritm√©ticos bit a bit, voc√™ pode definir com efici√™ncia a sequ√™ncia de van der Corpute diretamente no shader e, com base nela, criar o i-√©simo elemento da sequ√™ncia de Hammersley a partir da sele√ß√£o em <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-738"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-739">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31"> N </script>  itens: <br><br><pre> <code class="plaintext hljs">float RadicalInverse_VdC(uint bits) { bits = (bits &lt;&lt; 16u) | (bits &gt;&gt; 16u); bits = ((bits &amp; 0x55555555u) &lt;&lt; 1u) | ((bits &amp; 0xAAAAAAAAu) &gt;&gt; 1u); bits = ((bits &amp; 0x33333333u) &lt;&lt; 2u) | ((bits &amp; 0xCCCCCCCCu) &gt;&gt; 2u); bits = ((bits &amp; 0x0F0F0F0Fu) &lt;&lt; 4u) | ((bits &amp; 0xF0F0F0F0u) &gt;&gt; 4u); bits = ((bits &amp; 0x00FF00FFu) &lt;&lt; 8u) | ((bits &amp; 0xFF00FF00u) &gt;&gt; 8u); return float(bits) * 2.3283064365386963e-10; // / 0x100000000 } // ---------------------------------------------------------------------------- vec2 Hammersley(uint i, uint N) { return vec2(float(i)/float(N), RadicalInverse_VdC(i)); }</code> </pre><br>  <i>Hammersley ()</i> retorna o i-√©simo elemento de uma sequ√™ncia de baixa incompatibilidade de amostras de v√°rios tamanhos <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-740"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-741">N</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> N </script>  . <br><blockquote>  Nem todos os drivers OpenGL suportam opera√ß√µes bit a bit (WebGL e OpenGL ES 2.0, por exemplo); portanto, em certos ambientes, uma implementa√ß√£o alternativa de seu uso pode ser necess√°ria: <br><br><pre> <code class="plaintext hljs">float VanDerCorpus(uint n, uint base) { float invBase = 1.0 / float(base); float denom = 1.0; float result = 0.0; for(uint i = 0u; i &lt; 32u; ++i) { if(n &gt; 0u) { denom = mod(float(n), 2.0); result += denom * invBase; invBase = invBase / 2.0; n = uint(float(n) / 2.0); } } return result; } // ---------------------------------------------------------------------------- vec2 HammersleyNoBitOps(uint i, uint N) { return vec2(float(i)/float(N), VanDerCorpus(i, 2u)); }</code> </pre> <br>  Observo que, devido a certas restri√ß√µes sobre os operadores de ciclo no hardware antigo, essa implementa√ß√£o passa por todos os 32 bits.  Como resultado, esta vers√£o n√£o √© t√£o produtiva quanto a primeira op√ß√£o - mas funciona em qualquer hardware e at√© na aus√™ncia de opera√ß√µes de bit. </blockquote><br><h4>  Amostra de import√¢ncia no modelo GGX </h4><br>  Em vez de uma distribui√ß√£o uniforme ou aleat√≥ria (Monte Carlo) dos vetores de amostra gerados no hemisf√©rio <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-742"><span class="MJXp-mtext" id="MJXp-Span-743">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-744">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-745">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-747">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-748">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> \ Omega </script>  , que aparece na integral que estamos resolvendo, tentaremos criar vetores para que eles gravitem na dire√ß√£o principal da reflex√£o da luz, caracterizada pelo vetor mediano das micro-superf√≠cies e dependendo da rugosidade da superf√≠cie.  O processo de amostragem em si ser√° semelhante ao considerado anteriormente: abra um ciclo com um n√∫mero suficientemente grande de itera√ß√µes, crie um elemento de uma sequ√™ncia de baixa incompatibilidade, com base nele, criamos um vetor de amostragem no espa√ßo tangente, transferimos esse vetor para coordenadas mundiais e usamos o brilho de energia da cena para amostrar.  Em princ√≠pio, as altera√ß√µes est√£o relacionadas apenas ao fato de que agora um elemento da sequ√™ncia de baixa incompatibilidade √© usado para especificar um novo vetor de amostra: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uint SAMPLE_COUNT = <span class="hljs-number"><span class="hljs-number">4096u</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(uint i = <span class="hljs-number"><span class="hljs-number">0u</span></span>; i &lt; SAMPLE_COUNT; ++i) { vec2 Xi = Hammersley(i, SAMPLE_COUNT);</code> </pre><br>  Al√©m disso, para a forma√ß√£o completa do vetor de amostra, ser√° necess√°rio orient√°-lo de alguma forma na dire√ß√£o do l√≥bulo do espelho correspondente a um determinado n√≠vel de rugosidade.  Voc√™ pode tirar o NDF (fun√ß√£o de distribui√ß√£o normal) de uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">li√ß√£o de</a> teoria e combinar com o GGX NDF para o m√©todo de especificar um vetor de amostra em uma esfera de autoria da Epic Games: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">vec3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ImportanceSampleGGX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec2 Xi, vec3 N, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> roughness)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> a = roughness*roughness; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> phi = <span class="hljs-number"><span class="hljs-number">2.0</span></span> * PI * Xi.x; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cosTheta = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>((<span class="hljs-number"><span class="hljs-number">1.0</span></span> - Xi.y) / (<span class="hljs-number"><span class="hljs-number">1.0</span></span> + (a*a - <span class="hljs-number"><span class="hljs-number">1.0</span></span>) * Xi.y)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sinTheta = <span class="hljs-built_in"><span class="hljs-built_in">sqrt</span></span>(<span class="hljs-number"><span class="hljs-number">1.0</span></span> - cosTheta*cosTheta); <span class="hljs-comment"><span class="hljs-comment">//       vec3 H; Hx = cos(phi) * sinTheta; Hy = sin(phi) * sinTheta; Hz = cosTheta; //        vec3 up = abs(Nz) &lt; 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0); vec3 tangent = normalize(cross(up, N)); vec3 bitangent = cross(N, tangent); vec3 sampleVec = tangent * Hx + bitangent * Hy + N * Hz; return normalize(sampleVec); }</span></span></code> </pre><br>  O resultado √© um vetor de amostra, aproximadamente orientado ao longo do vetor mediano das micro-superf√≠cies, para uma dada rugosidade e um elemento da sequ√™ncia de baixa incompatibilidade <i>Xi</i> .  Observe que a Epic Games usa o quadrado do valor da rugosidade para obter maior qualidade visual, com base no trabalho original da Disney no m√©todo PBR. <br><br>  Ap√≥s concluir a implementa√ß√£o da sequ√™ncia de Hammersley e o c√≥digo de gera√ß√£o de vetor de amostra, podemos fornecer o c√≥digo de sombreamento de pr√©-filtragem e convolu√ß√£o: <br><br><pre> <code class="plaintext hljs">#version 330 core out vec4 FragColor; in vec3 localPos; uniform samplerCube environmentMap; uniform float roughness; const float PI = 3.14159265359; float RadicalInverse_VdC(uint bits); vec2 Hammersley(uint i, uint N); vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness); void main() { vec3 N = normalize(localPos); vec3 R = N; vec3 V = R; const uint SAMPLE_COUNT = 1024u; float totalWeight = 0.0; vec3 prefilteredColor = vec3(0.0); for(uint i = 0u; i &lt; SAMPLE_COUNT; ++i) { vec2 Xi = Hammersley(i, SAMPLE_COUNT); vec3 H = ImportanceSampleGGX(Xi, N, roughness); vec3 L = normalize(2.0 * dot(V, H) * H - V); float NdotL = max(dot(N, L), 0.0); if(NdotL &gt; 0.0) { prefilteredColor += texture(environmentMap, L).rgb * NdotL; totalWeight += NdotL; } } prefilteredColor = prefilteredColor / totalWeight; FragColor = vec4(prefilteredColor, 1.0); }</code> </pre> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Realizamos a filtragem preliminar do mapa do ambiente com base em uma determinada rugosidade, cujo n√≠vel muda para cada n√≠vel mip do mapa c√∫bico resultante (de 0,0 a 1,0), e o resultado do filtro √© armazenado na vari√°vel </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pr√©-</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> filtradaColor </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Em seguida, a vari√°vel √© dividida pelo peso total de toda a amostra, e as amostras com menor contribui√ß√£o para o resultado final (com um valor </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NdotL</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menor </font><font style="vertical-align: inherit;">) tamb√©m aumentam menos o peso total.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Salvando dados de pr√©-filtragem em n√≠veis mip </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Resta escrever um c√≥digo que instrua diretamente o OpenGL a filtrar o mapa do ambiente com v√°rios n√≠veis de rugosidade e salvar os resultados em uma s√©rie de n√≠veis mip do mapa c√∫bico de destino. Aqui, o c√≥digo j√° preparado da li√ß√£o sobre o c√°lculo do mapa de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">irradia√ß√£o</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© √∫til </font><font style="vertical-align: inherit;">:</font></font><br><br><pre> <code class="cpp hljs">prefilterShader.use(); prefilterShader.setInt(<span class="hljs-string"><span class="hljs-string">"environmentMap"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); prefilterShader.setMat4(<span class="hljs-string"><span class="hljs-string">"projection"</span></span>, captureProjection); glActiveTexture(GL_TEXTURE0); glBindTexture(GL_TEXTURE_CUBE_MAP, envCubemap); glBindFramebuffer(GL_FRAMEBUFFER, captureFBO); <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxMipLevels = <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mip = <span class="hljs-number"><span class="hljs-number">0</span></span>; mip &lt; maxMipLevels; ++mip) { <span class="hljs-comment"><span class="hljs-comment">//        - unsigned int mipWidth = 128 * std::pow(0.5, mip); unsigned int mipHeight = 128 * std::pow(0.5, mip); glBindRenderbuffer(GL_RENDERBUFFER, captureRBO); glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24, mipWidth, mipHeight); glViewport(0, 0, mipWidth, mipHeight); float roughness = (float)mip / (float)(maxMipLevels - 1); prefilterShader.setFloat("roughness", roughness); for (unsigned int i = 0; i &lt; 6; ++i) { prefilterShader.setMat4("view", captureViews[i]); glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, prefilterMap, mip); glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); renderCube(); } } glBindFramebuffer(GL_FRAMEBUFFER, 0);</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O processo √© semelhante a uma convolu√ß√£o do mapa de irradia√ß√£o, mas desta vez voc√™ deve especificar o tamanho do buffer do quadro em cada etapa, reduzindo-o pela metade para corresponder aos n√≠veis de mip. </font><font style="vertical-align: inherit;">Al√©m disso, o n√≠vel mip no qual a renderiza√ß√£o ser√° executada no momento deve ser especificado como um par√¢metro para a fun√ß√£o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">glFramebufferTexture2D ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O resultado da execu√ß√£o desse c√≥digo deve ser um mapa c√∫bico contendo imagens cada vez mais borradas de reflex√µes em cada n√≠vel de mip subsequente. </font><font style="vertical-align: inherit;">Voc√™ pode usar um mapa c√∫bico como fonte de dados para o skybox e coletar uma amostra de qualquer n√≠vel mip abaixo de zero:</font></font><br><br><pre> <code class="cpp hljs">vec3 envColor = textureLod(environmentMap, WorldPos, <span class="hljs-number"><span class="hljs-number">1.2</span></span>).rgb;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O resultado desta a√ß√£o ser√° a seguinte imagem: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f7/la/6t/f7la6ts6ewslfr8fg2kfvtdzuly.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Parece um mapa do ambiente de origem muito desfocado. </font><font style="vertical-align: inherit;">Se o resultado for semelhante, o mais prov√°vel √© que o processo de filtragem preliminar do mapa do ambiente HDR seja executado corretamente. </font><font style="vertical-align: inherit;">Tente experimentar uma amostra de diferentes n√≠veis de mip e observe um aumento gradual no desfoque a cada pr√≥ximo n√≠vel.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Artefatos de convolu√ß√£o pr√©-filtro </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para a maioria das tarefas, a abordagem descrita funciona muito bem, mas mais cedo ou mais tarde voc√™ ter√° que encontrar v√°rios artefatos que o processo de pr√©-filtragem gera. </font><font style="vertical-align: inherit;">Aqui est√£o os m√©todos mais comuns de lidar com eles.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A manifesta√ß√£o das costuras do mapa c√∫bico </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A sele√ß√£o de valores do mapa em cubos processados ‚Äã‚Äãpelo filtro preliminar para superf√≠cies com alta rugosidade leva √† leitura de dados do n√≠vel mip em algum lugar mais pr√≥ximo do final de sua cadeia. </font><font style="vertical-align: inherit;">Ao amostrar a partir de um mapa c√∫bico, o OpenGL, por padr√£o, n√£o interpola linearmente entre as faces do mapa c√∫bico. </font><font style="vertical-align: inherit;">Como os altos n√≠veis de mip t√™m resolu√ß√£o mais baixa e o mapa do ambiente foi convocado levando em considera√ß√£o um l√≥bulo do espelho muito maior, a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aus√™ncia de filtragem de textura entre as faces</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> se torna √≥bvia:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mh/dk/dq/mhdkdq1uolf6wc2lzhhrtxxghsy.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Felizmente, o OpenGL tem a capacidade de ativar essa filtragem com um simples sinalizador: </font></font><br><br><pre> <code class="cpp hljs">glEnable(GL_TEXTURE_CUBE_MAP_SEAMLESS);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √â suficiente definir o sinalizador em algum lugar no c√≥digo de inicializa√ß√£o do aplicativo e esse artefato √© eliminado. </font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aparecem pontos brilhantes </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como as reflex√µes espelhadas no caso geral cont√™m detalhes de alta frequ√™ncia, bem como regi√µes com brilho muito diferente, sua convolu√ß√£o requer o uso de um grande n√∫mero de pontos de amostra para levar em conta corretamente a grande difus√£o de valores dentro das reflex√µes HDR do ambiente. No exemplo, j√° coletamos um n√∫mero bastante grande de amostras, mas para certas cenas e altos n√≠veis de rugosidade do material isso ainda n√£o ser√° suficiente, e voc√™ testemunhar√° o aparecimento de muitos pontos em torno de √°reas claras:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1e/av/eu/1eaveuoooowy4vsfibkyw_bwqos.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode aumentar ainda mais o n√∫mero de amostras, mas isso n√£o ser√° uma solu√ß√£o universal e, em algumas condi√ß√µes, ainda permitir√° um artefato. </font><font style="vertical-align: inherit;">Mas voc√™ pode recorrer ao m√©todo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Chetan Jags</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que permite reduzir a manifesta√ß√£o de um artefato. </font><font style="vertical-align: inherit;">Para fazer isso, no est√°gio da convolu√ß√£o preliminar, a sele√ß√£o no mapa do ambiente n√£o √© realizada diretamente, mas em um de seus n√≠veis mip, com base no valor obtido da fun√ß√£o de distribui√ß√£o de probabilidade do integrando e da rugosidade:</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> D = DistributionGGX(NdotH, roughness); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> pdf = (D * NdotH / (<span class="hljs-number"><span class="hljs-number">4.0</span></span> * HdotV)) + <span class="hljs-number"><span class="hljs-number">0.0001</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        float resolution = 512.0; float saTexel = 4.0 * PI / (6.0 * resolution * resolution); float saSample = 1.0 / (float(SAMPLE_COUNT) * pdf + 0.0001); float mipLevel = roughness == 0.0 ? 0.0 : 0.5 * log2(saSample / saTexel);</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lembre-se de ativar a filtragem trilinear para o mapa do ambiente para selecionar com √™xito nos n√≠veis mip: </font></font><br><br><pre> <code class="cpp hljs">glBindTexture(GL_TEXTURE_CUBE_MAP, envCubemap); glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Al√©m disso, n√£o esque√ßa de criar diretamente n√≠veis de mip para a textura usando o OpenGL, mas somente depois que o n√≠vel principal de mip estiver totalmente formado: </font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  HDR      ... [...] //  - glBindTexture(GL_TEXTURE_CUBE_MAP, envCubemap); glGenerateMipmap(GL_TEXTURE_CUBE_MAP);</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Esse m√©todo funciona surpreendentemente bem, removendo quase todos (e geralmente todos) os pontos do mapa filtrado, mesmo em altos n√≠veis de rugosidade. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√°lculo preliminar de BRDF </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, processamos com sucesso o mapa do ambiente com o filtro e agora podemos nos concentrar na segunda parte da aproxima√ß√£o na forma de uma soma separada representando o BRDF. </font><font style="vertical-align: inherit;">Para atualizar a mem√≥ria, verifique novamente o registro completo da solu√ß√£o aproximada:</font></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-749"><span class="MJXp-msubsup" id="MJXp-Span-750"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-751" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-752" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-753" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-754"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-755" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-756"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-757" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-758" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-759" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mo" id="MJXp-Span-760" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><span class="MJXp-munderover" id="MJXp-Span-761"><span class=""><span class="MJXp-mo" id="MJXp-Span-762" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚à´ </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-763" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-764"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohms</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-765"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-766" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> L </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-767" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-768" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-769"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-770" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-771"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-772" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-773" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-774" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-776"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-777" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-778" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-779" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> * </font></font></span><span class="MJXp-munderover" id="MJXp-Span-780"><span class=""><span class="MJXp-mo" id="MJXp-Span-781" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚à´ </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-782" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-783"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohms</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-784"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-785" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-786" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-787" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-788"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-789" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-790"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-791" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-792" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-793" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-794"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-795" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-796" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-797" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-798"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mo" id="MJXp-Span-799" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-800"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-801" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-802" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-803"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-804"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-805" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">co </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-806" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-34">L_o(p,\omega_o) = \int\limits_{\Omega} L_i(p,\omega_i) d\omega_i * \int\limits_{\Omega} f_r(p, \omega_i, \omega_o) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calculamos preliminarmente a parte esquerda da soma e registramos os resultados para v√°rios n√≠veis de rugosidade em um mapa c√∫bico separado. </font><font style="vertical-align: inherit;">O lado direito exigir√° a convolu√ß√£o da express√£o BDRF junto com os seguintes par√¢metros: angle</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-807"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-808"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n </font></font></span><span class="MJXp-mo" id="MJXp-Span-809" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-810"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-811" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-812" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , rugosidade da superf√≠cie e coeficiente de Fresnel</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35">n \cdot \omega_i</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-813"><span class="MJXp-msubsup" id="MJXp-Span-814"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-815" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-816" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36">F_0</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Um processo semelhante √† integra√ß√£o de um BRDF espelhado para um ambiente completamente branco ou com brilho de energia constante </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-817"><span class="MJXp-msubsup" id="MJXp-Span-818"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-819" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-820" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-821" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mn" id="MJXp-Span-822"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1,0</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37">L_i = 1.0</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A participa√ß√£o do BRDF para tr√™s vari√°veis ‚Äã‚Äãn√£o √© uma tarefa trivial, mas neste caso </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-823"><span class="MJXp-msubsup" id="MJXp-Span-824"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-825" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-826" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pode ser derivado da express√£o que descreve o espelho BRDF:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38">F_0</script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-827"><span class="MJXp-munderover" id="MJXp-Span-828"><span class=""><span class="MJXp-mo" id="MJXp-Span-829" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚à´ </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-830" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-831"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohms</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-832"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-833" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-834" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-835" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-836"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mo" id="MJXp-Span-837" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-838"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-839" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-840" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-841" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-842"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-843" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-844" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-845" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-846"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-847" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-848"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-849" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-850" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-851"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-852"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-853" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-854" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-855" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">=</font></font></span><span class="MJXp-munderover" id="MJXp-Span-856"><span class=""><span class="MJXp-mo" id="MJXp-Span-857" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚à´ </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-858" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-859"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohms</font></font></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-860"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-861" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> f</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-862" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-863" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-864"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mo" id="MJXp-Span-865" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-866"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-867" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-868" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-869" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-870"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-871" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-872" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-873" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mfrac" id="MJXp-Span-874" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-875"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> F </font></font></span><span class="MJXp-mo" id="MJXp-Span-876" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-877"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-878" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-879" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-880" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-881"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-882" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-883"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-884" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-885"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-886" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-887" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-888" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-889"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-890" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-891"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n</font></font></span><span class="MJXp-mo" id="MJXp-Span-892" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-893"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-894" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-895" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-896"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-897"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-898" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">co</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-899" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-39">\int\limits_{\Omega} f_r(p, \omega_i, \omega_o) n \cdot \omega_i d\omega_i = \int\limits_{\Omega} f_r(p, \omega_i, \omega_o) \frac{F(\omega_o, h)}{F(\omega_o, h)} n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aqui </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-900"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-901"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© uma fun√ß√£o que descreve o c√°lculo do conjunto de Fresnel. </font><font style="vertical-align: inherit;">Movendo o divisor para a express√£o do BRDF, voc√™ pode ir para a seguinte nota√ß√£o equivalente:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> F </script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-902"><span class="MJXp-munderover" id="MJXp-Span-903"><span class=""><span class="MJXp-mo" id="MJXp-Span-904" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚à´ </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-905" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-906"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohms </font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-907" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-908"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-909" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-910" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-911" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-912"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-913" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-914"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-915" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-916" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-917" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-918"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-919" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-920" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-921" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-922"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-923" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-924"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-925" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-926" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-927" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-928"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-929" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-930"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> F</font></font></span><span class="MJXp-mo" id="MJXp-Span-931" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-932"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-933" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-934" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-935" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-936"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></span><span class="MJXp-mo" id="MJXp-Span-937" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-938"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-939" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-940"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-941" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-942" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-943"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-944"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-945" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">co</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-946" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-41">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} F(\omega_o, h) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Substituindo a entrada direita </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-947"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-948"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na aproxima√ß√£o de Fresnel-Schlick, obtemos:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> F </script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-949"><span class="MJXp-munderover" id="MJXp-Span-950"><span class=""><span class="MJXp-mo" id="MJXp-Span-951" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚à´ </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-952" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-953"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohms </font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-954" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-955"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-956" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-957" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-958" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-959"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-960" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-961"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-962" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-963" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-964" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-965"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-966" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-967" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-968" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-969"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-970" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-971"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-972" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-973" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-974" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-975"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-976" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-977" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-978"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-979" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-980" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-981" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></span><span class="MJXp-mo" id="MJXp-Span-982" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mn" id="MJXp-Span-983"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span><span class="MJXp-mo" id="MJXp-Span-984" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-985"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-986" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-987" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-988" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-989"><span class="MJXp-mrow" id="MJXp-Span-990" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-991" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mn" id="MJXp-Span-992"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span><span class="MJXp-mo" id="MJXp-Span-993" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-994"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-995" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-996" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-997" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-998"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h</font></font></span><span class="MJXp-mo" id="MJXp-Span-999" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1000" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1001" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1002"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-1003" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1004"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1005" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1006" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1007"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1008"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1009" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1010" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-43">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 + (1 - F_0){(1 - \omega_o \cdot h)}^5) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Denotar a express√£o </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1011"><span class="MJXp-msubsup" id="MJXp-Span-1012"><span class="MJXp-mrow" id="MJXp-Span-1013" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-1014" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mn" id="MJXp-Span-1015"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-mo" id="MJXp-Span-1016" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1017"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1018" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1019" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1020" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ‚ãÖ </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1021"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-1022" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1023" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 5</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44">{(1 - \omega_o \cdot h)}^5</script>  como <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1024"><span class="MJXp-mrow" id="MJXp-Span-1025"><span class="MJXp-mo" id="MJXp-Span-1026" style="margin-left: 0.111em; margin-right: 0.111em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1027"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1028"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1029"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1030"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1031"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para simplificar a decis√£o sobre</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45">/alpha</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1032"><span class="MJXp-msubsup" id="MJXp-Span-1033"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1034" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1035" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-46">F_0</script>  : <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1036"><span class="MJXp-munderover" id="MJXp-Span-1037"><span class=""><span class="MJXp-mo" id="MJXp-Span-1038" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">‚à´</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1039" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1040">Œ©</span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1041" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1042"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1043" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1044" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1045" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1046">p</span><span class="MJXp-mo" id="MJXp-Span-1047" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1048"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1049" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1050" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1051" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1052"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1053" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1054" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1055" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1056">F</span><span class="MJXp-mo" id="MJXp-Span-1057" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1058"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1059" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1060" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1061" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1062">h</span><span class="MJXp-mo" id="MJXp-Span-1063" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1064" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1065"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1066" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1067" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1068" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mo" id="MJXp-Span-1069" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1070">1</span><span class="MJXp-mo" id="MJXp-Span-1071" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-1072"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1073" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1074" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1075" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1076">Œ±</span><span class="MJXp-mo" id="MJXp-Span-1077" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1078">n</span><span class="MJXp-mo" id="MJXp-Span-1079" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-msubsup" id="MJXp-Span-1080"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1081" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1082" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1083">d</span><span class="MJXp-msubsup" id="MJXp-Span-1084"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1085" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1086" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-47">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 + (1 - F_0)\alpha) n \cdot \omega_i d\omega_i</script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1087"><span class="MJXp-munderover" id="MJXp-Span-1088"><span class=""><span class="MJXp-mo" id="MJXp-Span-1089" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">‚à´</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1090" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1091">Œ©</span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1092" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1093"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1094" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1095" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1096" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1097">p</span><span class="MJXp-mo" id="MJXp-Span-1098" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1099"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1100" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1101" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1102" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1103"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1104" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1105" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1106" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1107">F</span><span class="MJXp-mo" id="MJXp-Span-1108" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1109"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1110" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1111" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1112" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1113">h</span><span class="MJXp-mo" id="MJXp-Span-1114" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1115" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1117" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1118" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1119" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1120">1</span><span class="MJXp-mo" id="MJXp-Span-1121" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1122">Œ±</span><span class="MJXp-mo" id="MJXp-Span-1123" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-1124"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1125" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1126" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-mo" id="MJXp-Span-1127" style="margin-left: 0.267em; margin-right: 0.267em;">‚àó</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1128">Œ±</span><span class="MJXp-mo" id="MJXp-Span-1129" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1130">n</span><span class="MJXp-mo" id="MJXp-Span-1131" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-msubsup" id="MJXp-Span-1132"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1133" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1134" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1135">d</span><span class="MJXp-msubsup" id="MJXp-Span-1136"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1137" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1138" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-48">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 + 1*\alpha - F_0*\alpha) n \cdot \omega_i d\omega_i</script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1139"><span class="MJXp-munderover" id="MJXp-Span-1140"><span class=""><span class="MJXp-mo" id="MJXp-Span-1141" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">‚à´</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1142" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1143">Œ©</span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1144" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1145"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1146" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1147" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1148" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1149">p</span><span class="MJXp-mo" id="MJXp-Span-1150" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1151"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1152" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1153" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1154" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1155"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1156" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1157" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1158" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1159"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-1160" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1161"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1162" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1163" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1164" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1165"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-1166" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1167" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1168"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1169" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1170" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1171" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></span><span class="MJXp-mo" id="MJXp-Span-1172" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mn" id="MJXp-Span-1173"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span><span class="MJXp-mo" id="MJXp-Span-1174" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1175"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ±</font></font></span><span class="MJXp-mo" id="MJXp-Span-1176" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mo" id="MJXp-Span-1177" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1178"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ±</font></font></span><span class="MJXp-mo" id="MJXp-Span-1179" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1180"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-1181" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1182"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1183" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1184" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1185"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1186"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1187" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">co</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1188" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-49">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 * (1 - \alpha) + \alpha) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pr√≥xima fun√ß√£o </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1189"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1190"><font style="vertical-align: inherit;"></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dividimos</font><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1189"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1190"><font style="vertical-align: inherit;"> F</font></span></span></span><font style="vertical-align: inherit;"> em duas integrais:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> F </script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1191"><span class="MJXp-munderover" id="MJXp-Span-1192"><span class=""><span class="MJXp-mo" id="MJXp-Span-1193" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚à´ </font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1194" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1195"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohms </font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1196" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1197"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1198" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1199" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1200" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1201"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-1202" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1203"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1204" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1205" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1206" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1207"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1208" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1209" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1210" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1211"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-1212" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1213"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1214" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1215" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1216" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1217"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-1218" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1219" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1220"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1221" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1222" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1223" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">*</font></font></span><span class="MJXp-mo" id="MJXp-Span-1224" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mn" id="MJXp-Span-1225"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></span><span class="MJXp-mo" id="MJXp-Span-1226" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1227"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ±</font></font></span><span class="MJXp-mo" id="MJXp-Span-1228" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mo" id="MJXp-Span-1229" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1230"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-1231" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1232"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1233" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1234" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1235"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1236"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1237" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">co</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1238" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1239" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+</font></font></span><span class="MJXp-munderover" id="MJXp-Span-1240"><span class=""><span class="MJXp-mo" id="MJXp-Span-1241" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚à´</font></font></span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1242" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1243"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ohms</font></font></span></span></span></span><span class="MJXp-mfrac" id="MJXp-Span-1244" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1245"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1246" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1247" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1248" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1249"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p</font></font></span><span class="MJXp-mo" id="MJXp-Span-1250" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1251"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1252" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1253" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1254" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1255"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1256" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1257" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1258" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1259"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mo" id="MJXp-Span-1260" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1261"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1262" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1263" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1264" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1265"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">h </font></font></span><span class="MJXp-mo" id="MJXp-Span-1266" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1267" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1268"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ±</font></font></span><span class="MJXp-mo" id="MJXp-Span-1269" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)</font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1270"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span><span class="MJXp-mo" id="MJXp-Span-1271" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ãÖ</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1272"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1273" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1274" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1275"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1276"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1277" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">co</font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1278" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-51">\int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (F_0 * (1 - \alpha)) n \cdot \omega_i d\omega_i + \int\limits_{\Omega} \frac{f_r(p, \omega_i, \omega_o)}{F(\omega_o, h)} (\alpha) n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Desta maneira </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1279"><span class="MJXp-msubsup" id="MJXp-Span-1280"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1281" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1282" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ser√° constante sob a integral, e podemos retir√°-la do sinal da integral. </font><font style="vertical-align: inherit;">A seguir, revelaremos</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52">F_0</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1283"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1284"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ±</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> na express√£o original e obtenha a entrada final para BRDF como uma soma separada:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53">\alpha</script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1285"><span class="MJXp-msubsup" id="MJXp-Span-1286"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1287" style="margin-right: 0.05em;">F</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1288" style="vertical-align: -0.4em;">0</span></span><span class="MJXp-munderover" id="MJXp-Span-1289"><span class=""><span class="MJXp-mo" id="MJXp-Span-1290" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">‚à´</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1291" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1292">Œ©</span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-1293"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1294" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1295" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1296" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1297">p</span><span class="MJXp-mo" id="MJXp-Span-1298" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1299"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1300" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1301" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1302" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1303"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1304" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1305" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1306" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1307" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1308">1</span><span class="MJXp-mo" id="MJXp-Span-1309" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-1310"><span class="MJXp-mrow" id="MJXp-Span-1311" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-1312" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1313">1</span><span class="MJXp-mo" id="MJXp-Span-1314" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-1315"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1316" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1317" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1318" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1319">h</span><span class="MJXp-mo" id="MJXp-Span-1320" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1321" style="vertical-align: 0.5em;">5</span></span><span class="MJXp-mo" id="MJXp-Span-1322" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1323">n</span><span class="MJXp-mo" id="MJXp-Span-1324" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-msubsup" id="MJXp-Span-1325"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1326" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1327" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1328">d</span><span class="MJXp-msubsup" id="MJXp-Span-1329"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1330" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1331" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1332" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-munderover" id="MJXp-Span-1333"><span class=""><span class="MJXp-mo" id="MJXp-Span-1334" style="margin-left: 0em; margin-right: 0.111em;"><span class="MJXp-largeop MJXp-int">‚à´</span></span></span><span class=" MJXp-script"><span class="MJXp-mrow" id="MJXp-Span-1335" style="margin-left: 0px;"><span class="MJXp-mi" id="MJXp-Span-1336">Œ©</span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-1337"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1338" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1339" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-1340" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1341">p</span><span class="MJXp-mo" id="MJXp-Span-1342" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1343"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1344" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1345" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-1346" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-1347"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1348" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1349" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1350" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-1351"><span class="MJXp-mrow" id="MJXp-Span-1352" style="margin-right: 0.05em;"><span class="MJXp-mo" id="MJXp-Span-1353" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-1354">1</span><span class="MJXp-mo" id="MJXp-Span-1355" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-msubsup" id="MJXp-Span-1356"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1357" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1358" style="vertical-align: -0.4em;">o</span></span><span class="MJXp-mo" id="MJXp-Span-1359" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1360">h</span><span class="MJXp-mo" id="MJXp-Span-1361" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1362" style="vertical-align: 0.5em;">5</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1363">n</span><span class="MJXp-mo" id="MJXp-Span-1364" style="margin-left: 0.267em; margin-right: 0.267em;">‚ãÖ</span><span class="MJXp-msubsup" id="MJXp-Span-1365"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1366" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1367" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1368">d</span><span class="MJXp-msubsup" id="MJXp-Span-1369"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1370" style="margin-right: 0.05em;">œâ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1371" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-54">F_0 \int\limits_{\Omega} f_r(p, \omega_i, \omega_o)(1 - {(1 - \omega_o \cdot h)}^5) n \cdot \omega_i d\omega_i + \int\limits_{\Omega} f_r(p, \omega_i, \omega_o) {(1 - \omega_o \cdot h)}^5 n \cdot \omega_i d\omega_i</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> As duas integrais resultantes representam a escala e o deslocamento para o valor </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1372"><span class="MJXp-msubsup" id="MJXp-Span-1373"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1374" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1375" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0,</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> respectivamente. </font><font style="vertical-align: inherit;">Note que</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55">F_0</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1376"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1377"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mo" id="MJXp-Span-1378" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1379"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-1380" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1381"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1382" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1383" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1384" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1385"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1386" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">œâ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1387" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-1388" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cont√©m uma ocorr√™ncia</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56">f(p, \omega_i, \omega_o)</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1389"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1390"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque essas ocorr√™ncias se cancelam e desaparecem da express√£o. </font><font style="vertical-align: inherit;">Usando a abordagem j√° desenvolvida, a convolu√ß√£o BRDF pode ser realizada juntamente com os dados de entrada: rugosidade e √¢ngulo entre vetores</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> F </script><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1391"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1392"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58">n</script>  e <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1393"><span class="MJXp-msubsup" id="MJXp-Span-1394"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1395" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">de w </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1396" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">o</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59">w_o</script>  .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Escrever o resultado na textura 2D - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cart√£o BRDF complexa√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BRDF mapa integra√ß√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), que servir√° de valores da tabela auxiliares para uso no shader final, que formar√£o o resultado final da ilumina√ß√£o especular indireta. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O sombreador de convolu√ß√£o BRDF trabalha no plano, usando diretamente coordenadas bidimensionais de textura como par√¢metros de entrada do processo de convolu√ß√£o ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NdotV</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rugosidade</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). O c√≥digo √© notavelmente semelhante a uma convolu√ß√£o da pr√©-filtragem, mas aqui o vetor de amostra √© processado levando em considera√ß√£o a fun√ß√£o geom√©trica BRDF e a express√£o de aproxima√ß√£o de Fresnel-Schlick:</font></font><br><br><pre> <code class="plaintext hljs">vec2 IntegrateBRDF(float NdotV, float roughness) { vec3 V; Vx = sqrt(1.0 - NdotV*NdotV); Vy = 0.0; Vz = NdotV; float A = 0.0; float B = 0.0; vec3 N = vec3(0.0, 0.0, 1.0); const uint SAMPLE_COUNT = 1024u; for(uint i = 0u; i &lt; SAMPLE_COUNT; ++i) { vec2 Xi = Hammersley(i, SAMPLE_COUNT); vec3 H = ImportanceSampleGGX(Xi, N, roughness); vec3 L = normalize(2.0 * dot(V, H) * H - V); float NdotL = max(Lz, 0.0); float NdotH = max(Hz, 0.0); float VdotH = max(dot(V, H), 0.0); if(NdotL &gt; 0.0) { float G = GeometrySmith(N, V, L, roughness); float G_Vis = (G * VdotH) / (NdotH * NdotV); float Fc = pow(1.0 - VdotH, 5.0); A += (1.0 - Fc) * G_Vis; B += Fc * G_Vis; } } A /= float(SAMPLE_COUNT); B /= float(SAMPLE_COUNT); return vec2(A, B); } // ---------------------------------------------------------------------------- void main() { vec2 integratedBRDF = IntegrateBRDF(TexCoords.x, TexCoords.y); FragColor = integratedBRDF; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como voc√™ pode ver, a convolu√ß√£o do BRDF √© implementada como um arranjo quase literal dos c√°lculos matem√°ticos acima. </font><font style="vertical-align: inherit;">Os par√¢metros de entrada de rugosidade e √¢ngulo s√£o obtidos.</font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1397"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1398"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ∏</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , um vetor de amostra √© formado com base na amostra por signific√¢ncia, processado usando a fun√ß√£o de geometria e a express√£o de Fresnel convertida para BRDF. </font><font style="vertical-align: inherit;">Como resultado, para cada amostra, a magnitude da escala e deslocamento do valor</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-60">\theta</script><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1399"><span class="MJXp-msubsup" id="MJXp-Span-1400"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1401" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1402" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , que no final s√£o calculados como m√©dia e retornados no formato</font><i><font style="vertical-align: inherit;">vec2</font></i><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Em uma</font><font style="vertical-align: inherit;">li√ß√£o</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">te√≥rica</font></a><font style="vertical-align: inherit;">, foi mencionado que o componente geom√©trico do BRDF √© ligeiramente diferente no caso do c√°lculo da IBL, uma vez que o coeficiente</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-61">F_0</script><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1403"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1404"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √© especificado de forma diferente:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-62"> k </script><font style="vertical-align: inherit;"></font><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1405"><span class="MJXp-msubsup" id="MJXp-Span-1406"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1407" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1408" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1409"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1410"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">i </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1411"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1412"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1413"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1414"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">t</font></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-1415" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mfrac" id="MJXp-Span-1416" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-mo" id="MJXp-Span-1417" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1418"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ± </font></font></span><span class="MJXp-mo" id="MJXp-Span-1419" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">+ </font></font></span><span class="MJXp-mn" id="MJXp-Span-1420"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-1421"><span class="MJXp-mo" id="MJXp-Span-1422" style="margin-left: 0em; margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1423" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-1424"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8</font></font></span></span></span></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-63">k_{direct} = \frac{(\alpha + 1)^2}{8}</script></p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1425"><span class="MJXp-msubsup" id="MJXp-Span-1426"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1427" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1428" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1429"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1430"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1431"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-1432" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font></font></span><span class="MJXp-mfrac" id="MJXp-Span-1433" style="vertical-align: 0.25em;"><span class="MJXp-box"><span class="MJXp-msubsup" id="MJXp-Span-1434"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1435" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Œ± </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1436" style="vertical-align: 0.5em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box"><span class="MJXp-mn" id="MJXp-Span-1437"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2</font></font></span></span></span></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-64">k_{IBL} = \frac{\alpha^2}{2}</script></p><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como a convolu√ß√£o BRDF faz parte da solu√ß√£o da integral no caso do c√°lculo do IBL, usaremos o coeficiente </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1438"><span class="MJXp-msubsup" id="MJXp-Span-1439"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1440" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k </font></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1441" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1442"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1443"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1444"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L</font></font></span></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para calcular a fun√ß√£o de geometria no modelo Schlick-GGX:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-65">k_{IBL}</script><font style="vertical-align: inherit;"></font><br><br><pre> <code class="plaintext hljs">float GeometrySchlickGGX(float NdotV, float roughness) { float a = roughness; float k = (a * a) / 2.0; float nom = NdotV; float denom = NdotV * (1.0 - k) + k; return nom / denom; } // ---------------------------------------------------------------------------- float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness) { float NdotV = max(dot(N, V), 0.0); float NdotL = max(dot(N, L), 0.0); float ggx2 = GeometrySchlickGGX(NdotV, roughness); float ggx1 = GeometrySchlickGGX(NdotL, roughness); return ggx1 * ggx2; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Observe que o coeficiente </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1445"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1446"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">k √©</font></font></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> calculado com base no par√¢metro</font><i><font style="vertical-align: inherit;">a</font></i><font style="vertical-align: inherit;">. Al√©m disso, nesse caso, o par√¢metro de</font><i><font style="vertical-align: inherit;">rugosidade</font></i><font style="vertical-align: inherit;">n√£o</font><font style="vertical-align: inherit;">√©</font><font style="vertical-align: inherit;">elevado ao quadrado ao descrever o par√¢metro</font><i><font style="vertical-align: inherit;">a</font></i><font style="vertical-align: inherit;">, o que foi feito em outros locais onde esse par√¢metro foi aplicado. N√£o sei ao certo onde est√° o problema: no trabalho da Epic Games ou no trabalho inicial da Disney, mas vale a pena dizer que √© precisamente essa atribui√ß√£o direta do valor da</font><i><font style="vertical-align: inherit;">rugosidade</font></i><font style="vertical-align: inherit;">ao</font><font style="vertical-align: inherit;">par√¢metro</font><i><font style="vertical-align: inherit;">a que</font></i><font style="vertical-align: inherit;">cria o mapa de integra√ß√£o BRDF id√™ntico, apresentado na publica√ß√£o da Epic Games.</font><font style="vertical-align: inherit;">Al√©m disso, os resultados da convolu√ß√£o do BRDF ser√£o salvos na forma de uma textura 2D do tamanho 512x512:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-66-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-66"> k </script><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> brdfLUTTexture; glGenTextures(<span class="hljs-number"><span class="hljs-number">1</span></span>, &amp;brdfLUTTexture); <span class="hljs-comment"><span class="hljs-comment">//   ,     glBindTexture(GL_TEXTURE_2D, brdfLUTTexture); glTexImage2D(GL_TEXTURE_2D, 0, GL_RG16F, 512, 512, 0, GL_RG, GL_FLOAT, 0); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conforme recomendado pela Epic Games, um formato de textura de ponto flutuante de 16 bits √© usado aqui. </font><font style="vertical-align: inherit;">Certifique-se de definir o modo de repeti√ß√£o como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GL_CLAMP_TO_EDGE</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para evitar a amostragem de artefatos da borda. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em seguida, usamos o mesmo objeto de buffer de quadro e executamos um sombreador na superf√≠cie de um quad de tela cheia:</font></font><br><br><pre> <code class="cpp hljs">glBindFramebuffer(GL_FRAMEBUFFER, captureFBO); glBindRenderbuffer(GL_RENDERBUFFER, captureRBO); glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24, <span class="hljs-number"><span class="hljs-number">512</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>); glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, brdfLUTTexture, <span class="hljs-number"><span class="hljs-number">0</span></span>); glViewport(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>, <span class="hljs-number"><span class="hljs-number">512</span></span>); brdfShader.use(); glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); RenderQuad(); glBindFramebuffer(GL_FRAMEBUFFER, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Como resultado, obtemos um mapa de textura que armazena o resultado da convolu√ß√£o da parte da express√£o do valor da divis√£o respons√°vel pelo BRDF: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5s/so/fw/5ssofwhkncncu263tegajwxm15k.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tendo em m√£os os resultados da filtragem preliminar do mapa do ambiente e a textura com os resultados da convolu√ß√£o BRDF, podemos restaurar o resultado do c√°lculo da integral para ilumina√ß√£o especular indireta com base na aproxima√ß√£o por uma soma separada. </font><font style="vertical-align: inherit;">O valor restaurado ser√° subsequentemente usado como radia√ß√£o especular indireta ou de fundo.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> C√°lculo final da reflet√¢ncia no modelo IBL </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, para obter um valor que descreva o componente espelho indireto na express√£o geral de refletividade, √© necess√°rio "colar" os componentes de aproxima√ß√£o calculados em um √∫nico todo como uma soma separada. </font><font style="vertical-align: inherit;">Primeiro, adicione os amostradores apropriados ao shader final para dados pr√©-calculados:</font></font><br><br><pre> <code class="cpp hljs">uniform samplerCube prefilterMap; uniform sampler2D brdfLUT;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primeiro, obtemos o valor da reflex√£o especular indireta na superf√≠cie por amostragem de um mapa de ambiente pr√©-processado com base no vetor de reflex√£o. </font><font style="vertical-align: inherit;">Observe que aqui a sele√ß√£o do n√≠vel mip para amostragem √© baseada na rugosidade da superf√≠cie. </font><font style="vertical-align: inherit;">Para superf√≠cies mais √°speras, o reflexo ser√° </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mais desfocado</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre> <code class="plaintext hljs">void main() { [...] vec3 R = reflect(-V, N); const float MAX_REFLECTION_LOD = 4.0; vec3 prefilteredColor = textureLod(prefilterMap, R, roughness * MAX_REFLECTION_LOD).rgb; [...] }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No est√°gio de convolu√ß√£o preliminar, preparamos apenas 5 n√≠veis de mip (de zero a quarto), a constante </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MAX_REFLECTION_LOD</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> serve para limitar a sele√ß√£o dos n√≠veis de mip gerados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em seguida, fazemos uma sele√ß√£o no mapa de integra√ß√£o do BRDF com base na rugosidade e √¢ngulo entre o normal e a dire√ß√£o da vista:</font></font><br><br><pre> <code class="cpp hljs">vec3 F = FresnelSchlickRoughness(max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), F0, roughness); vec2 envBRDF = texture(brdfLUT, vec2(max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), roughness)).rg; vec3 specular = prefilteredColor * (F * envBRDF.x + envBRDF.y);</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O valor obtido no mapa cont√©m os fatores de escala e deslocamento para o valor </font></font><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1447"><span class="MJXp-msubsup" id="MJXp-Span-1448"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1449" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1450" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0</font></font></span></span></span></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (aqui assumimos o valor</font><i><font style="vertical-align: inherit;">F</font></i><font style="vertical-align: inherit;">- coeficiente de Fresnel). O valor convertido</font><i><font style="vertical-align: inherit;">F √©</font></i><font style="vertical-align: inherit;">ent√£o combinado com o valor obtido no mapa de pr√©-filtragem para obter uma solu√ß√£o aproximada da express√£o integral original -</font><i><font style="vertical-align: inherit;">especular</font></i><font style="vertical-align: inherit;">.</font><font style="vertical-align: inherit;">Assim, obtemos uma solu√ß√£o para a parte da express√£o da refletividade, respons√°vel pela reflex√£o especular. Para obter uma solu√ß√£o completa do modelo PBR IBL, voc√™ precisa combinar esse valor com a solu√ß√£o da parte difusa da express√£o de reflet√¢ncia que recebemos na</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">√∫ltima</font></a><font style="vertical-align: inherit;">li√ß√£o:</font></font><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-67-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-67">F_0</script><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><br><pre> <code class="cpp hljs">vec3 F = FresnelSchlickRoughness(max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), F0, roughness); vec3 kS = F; vec3 kD = <span class="hljs-number"><span class="hljs-number">1.0</span></span> - kS; kD *= <span class="hljs-number"><span class="hljs-number">1.0</span></span> - metallic; vec3 irradiance = texture(irradianceMap, N).rgb; vec3 diffuse = irradiance * albedo; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> MAX_REFLECTION_LOD = <span class="hljs-number"><span class="hljs-number">4.0</span></span>; vec3 prefilteredColor = textureLod(prefilterMap, R, roughness * MAX_REFLECTION_LOD).rgb; vec2 envBRDF = texture(brdfLUT, vec2(max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), roughness)).rg; vec3 specular = prefilteredColor * (F * envBRDF.x + envBRDF.y); vec3 ambient = (kD * diffuse + specular) * ao;</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Noto que o valor </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">especular</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> n√£o </font><font style="vertical-align: inherit;">√© </font><font style="vertical-align: inherit;">multiplicado por </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kS</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pois j√° cont√©m um coeficiente de Fresnel. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vamos executar nosso aplicativo de teste com um conjunto familiar de esferas com caracter√≠sticas vari√°veis ‚Äã‚Äãde metalicidade e rugosidade e dar uma olhada em sua apar√™ncia no esplendor completo da PBR:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eb/wi/sm/ebwismvfoqyrfymot9i4ab1jtp0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode ir ainda mais longe e baixar um conjunto de texturas correspondentes ao modelo PBR e obter esferas de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">materiais reais</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dn/0c/0c/dn0c0ctjrjf1o3uzwl7b0eyinwm.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou mesmo fa√ßa o download de um modelo deslumbrante, juntamente com as texturas PBR preparadas de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andrew Maximov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/op/x7/22/opx722vdxpwml-woff07gtfn1rc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acho que voc√™ n√£o precisa convencer ningu√©m de que o atual modelo de ilumina√ß√£o parece muito mais convincente. Al√©m disso, a ilumina√ß√£o parece fisicamente correta, independentemente do mapa do ambiente. Abaixo, s√£o usados ‚Äã‚Äãv√°rios mapas de ambiente HDR completamente diferentes que alteram completamente a natureza da ilumina√ß√£o - mas todas as imagens parecem fisicamente confi√°veis, apesar do fato de voc√™ n√£o ter que ajustar nenhum par√¢metro no modelo! (Em princ√≠pio, essa simplifica√ß√£o do trabalho com materiais √© a principal vantagem do pipeline de PBR, e uma imagem melhor pode ser considerada uma consequ√™ncia agrad√°vel. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nota.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/76/wa/yd/76waydpu8cbudb6igel20llh3ig.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nossa viagem para a ess√™ncia do renderizador PBR √© bastante volumosa. Chegamos ao resultado atrav√©s de uma s√©rie de etapas e, √© claro, muita coisa pode dar errado nas primeiras abordagens. Portanto, para qualquer problema, recomendo que voc√™ compreenda cuidadosamente o c√≥digo de exemplo para </font><font style="vertical-align: inherit;">esferas </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">monocrom√°ticas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">texturizadas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (e o c√≥digo de sombreamento, √© claro!). Ou pe√ßa conselhos nos coment√°rios.</font></font><br><br><h2>  O que vem a seguir? </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espero que, lendo estas linhas, voc√™ j√° tenha desenvolvido um entendimento do trabalho do modelo de renderiza√ß√£o da PBR, bem como tenha descoberto e lan√ßado com √™xito um aplicativo de teste. Nestas li√ß√µes, calculamos todos os mapas auxiliares de textura necess√°rios para o modelo PBR em nosso aplicativo antes do ciclo de renderiza√ß√£o principal. Para tarefas de treinamento, essa abordagem √© adequada, mas n√£o para aplica√ß√£o pr√°tica. Em primeiro lugar, essa prepara√ß√£o preliminar deve ocorrer uma vez, e nem todo lan√ßamento de aplicativo. Em segundo lugar, se voc√™ decidir adicionar mais alguns mapas de ambiente, tamb√©m ser√° necess√°rio process√°-los na inicializa√ß√£o. E se mais alguns cart√µes forem adicionados? Bola de neve real.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â por isso que, no caso geral, um mapa de irradia√ß√£o e um mapa de ambiente pr√©-processado s√£o preparados uma vez e salvos no disco (o mapa de agrega√ß√£o BRDF n√£o depende do mapa do ambiente, para que geralmente possa ser calculado ou baixado uma vez). Daqui resulta que voc√™ precisar√° de um formato para armazenar cart√µes c√∫bicos HDR, incluindo seus n√≠veis mip. Bem, ou voc√™ pode armazen√°-los e carreg√°-los usando um dos formatos mais usados ‚Äã‚Äã(o </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.dds</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suporta a economia de n√≠veis de mip).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outro ponto importante: para fornecer um entendimento profundo do pipeline de PBR nessas li√ß√µes, descrevi o processo completo de prepara√ß√£o para a renderiza√ß√£o de PBR, incluindo c√°lculos preliminares de cart√µes auxiliares para IBL. No entanto, em sua pr√°tica, voc√™ tamb√©m pode usar um dos grandes utilit√°rios que preparam esses cart√µes para voc√™: por exemplo, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cmftStudio</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IBLBaker</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√≥s tamb√©m n√£o considerou o processo de prepara√ß√£o mapa cubo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">amostras reflex√µes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sondas de reflex√£o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) e os processos relacionados de interpola√ß√£o de mapas c√∫bicos e corre√ß√£o de paralaxe. Resumidamente, essa t√©cnica pode ser descrita da seguinte maneira: colocamos em nossa cena muitos objetos de amostras de reflex√£o, que formam uma imagem ambiental local na forma de um mapa c√∫bico e, em seguida, todos os mapas auxiliares necess√°rios para o modelo de IBL s√£o formados com base. Ao interpolar dados de v√°rias amostras com base na dist√¢ncia da c√¢mera, voc√™ pode obter uma ilumina√ß√£o altamente detalhada com base na imagem, cuja qualidade √© essencialmente limitada apenas pelo n√∫mero de amostras que estamos prontos para colocar na cena. Essa abordagem permite alterar corretamente a ilumina√ß√£o, por exemplo, ao passar de uma rua bem iluminada para o crep√∫sculo de uma determinada sala. Provavelmente vou escrever uma li√ß√£o sobre testes de reflex√£o no futuro,No entanto, no momento, s√≥ posso recomendar o artigo de Chetan Jags abaixo para revis√£o.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(A implementa√ß√£o de amostras e muito mais pode ser encontrada no mecanismo bruto do autor dos tutoriais </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aprox. Por.</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Materiais adicionais </font></font></h2><br><ol><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sombreamento real no Unreal Engine 4</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Uma explica√ß√£o da abordagem da Epic Games para aproximar a express√£o do componente espelho por uma soma dividida. </font><font style="vertical-align: inherit;">Com base neste artigo, o c√≥digo da li√ß√£o IBL PBR foi escrito.</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sombreamento com base f√≠sica e ilumina√ß√£o com base em imagem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Um excelente artigo que descreve o processo de inclus√£o do c√°lculo do componente espelho do IBL em um aplicativo de pipeline interativo PBR.</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ilumina√ß√£o baseada em imagem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : um post muito longo e detalhado sobre IBL especular e quest√µes relacionadas, incluindo o problema de interpola√ß√£o da sonda de luz.</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Moving Frostbite to PBR</a> :       ,     PBR     ¬´AAA¬ª. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Physically Based Rendering ‚Äì Part Three</a> :  ,  IBL  PBR   JMonkeyEngine. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Implementation Notes: Runtime Environment Map Filtering for Image Based Lighting</a> :       HDR  ,       . </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt429744/">https://habr.com/ru/post/pt429744/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt429728/index.html">Arquitetura moderna de MVI baseada em Kotlin</a></li>
<li><a href="../pt429732/index.html">Voc√™ vai odiar isso ou uma hist√≥ria sobre como o c√≥digo deve ficar bom</a></li>
<li><a href="../pt429734/index.html">O sonho de voar com um vi√©s el√©trico</a></li>
<li><a href="../pt429736/index.html">Hogweed de Sosnowski. Na MO introduziu multas por distribui√ß√£o</a></li>
<li><a href="../pt429738/index.html">Arranjo ideal de fragmentos no Elasticsearch Petabyte Cluster: Programa√ß√£o Linear</a></li>
<li><a href="../pt429750/index.html">Livro de receitas do desenvolvedor: DDD Recipes (Parte 3, Arquitetura de aplicativos)</a></li>
<li><a href="../pt429754/index.html">Erros fatais de integra√ß√£o de hardware</a></li>
<li><a href="../pt429756/index.html">Como configurar a instala√ß√£o das vari√°veis ‚Äã‚Äãde ambiente Nuxt.js em tempo de execu√ß√£o ou Como fazer tudo que n√£o √© de todo mundo e n√£o se arrepender</a></li>
<li><a href="../pt429758/index.html">Por que a documenta√ß√£o do SRE √© importante. Parte 1</a></li>
<li><a href="../pt429762/index.html">Fl√¢mula da c√¢mera de v√≠deo MiniDV</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>