<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî£ üöù ü¶í Media player do arm√°rio üåì üêë üñïüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Autor: Nikolai Khabarov Em
 
 uma boa noite de sexta-feira, decidi assistir a um filme em casa: liguei o laptop, liguei o cabo HDMI atrav√©s do adaptad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Media player do arm√°rio</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataart/blog/396967/"><img src="https://habrastorage.org/files/454/fd7/d95/454fd7d9552b452cb8cc2f285fdc88bc.png"><br>
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autor: Nikolai Khabarov Em</font></font></em><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
uma boa noite de sexta-feira, decidi assistir a um filme em casa: liguei o laptop, liguei o cabo HDMI atrav√©s do adaptador DisplayPort, peguei o controle remoto, liguei a TV e comecei a jogar no laptop. E percebi que o volume da TV n√£o era suficiente - tive que procurar pelo controle remoto novamente para aument√°-lo ... Ent√£o pensei: ‚ÄúEsse processo pode ser simplificado de alguma forma?‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A manh√£ de s√°bado foi extremamente proveitosa. Eu decidi fazer meu pr√≥prio player de multim√≠dia de rede, da maneira que eu imagino. Quase todos os detalhes foram retirados da despensa, o cora√ß√£o do jogador √© o Raspberry Pi. Para mais detalhes, o que h√° dentro e como montar um dispositivo semelhante, veja abaixo.</font></font><a name="habracut"></a><br>
<br>
<img src="https://habrastorage.org/files/a14/a2d/e46/a14a2de464df4a66bf1aa09eba6748ef.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como voc√™ pode ver na descri√ß√£o, meus requisitos para o player s√£o extremamente simples: capacidade de reproduzir conte√∫do da rede, armazenamento de v√°rias centenas de gigabytes, capacidade de controlar o mesmo controle remoto da TV; </font><font style="vertical-align: inherit;">uma porta USB √© desej√°vel, mas n√£o necess√°ria. </font><font style="vertical-align: inherit;">Os players comprados do Android desapareceram imediatamente, porque esses dispositivos s√£o principalmente China pura, no pior sentido da palavra, e eu n√£o tinha vontade de lutar com insetos dentro deles. </font><font style="vertical-align: inherit;">Al√©m disso, n√£o est√° claro como implementar o controle desse dispositivo a partir de um controle remoto de televis√£o. Al√©m disso, a interface gr√°fica do Android claramente n√£o se destina ao controle remoto em princ√≠pio. </font><font style="vertical-align: inherit;">Portanto, come√ßou a busca por lixo a partir do qual se pode fazer uma coisa.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selecionamos os detalhes</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Antes de mais, gostaria de tentar entender a viabilidade de fabricar o dispositivo final. Portanto, para come√ßar, teremos um m√≠nimo de detalhes e experimentaremos um potencial media player em opera√ß√£o. Vamos √† despensa e literalmente desenterramos os detalhes que precisamos: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Um computador com uma sa√≠da HDMI. O antigo Raspberry Pi 1 √© bastante adequado para nossos prop√≥sitos, voc√™ tamb√©m pode usar o Raspberry Pi 2. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Fonte de alimenta√ß√£o para a placa - o carregamento microUSB de um telefone antigo √© adequado. Voc√™ pode usar qualquer "tentar", mas √© aconselh√°vel usar uma fonte que forne√ßa uma corrente de sa√≠da de 1A (um ampere para os olhos √© suficiente para Pi 2, consulte os </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">requisitos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ); </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. cart√£o microSD com 4 GB ou mais.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Mouse e / ou teclado USB (pode ser usado o sistema sem fio) e, opcionalmente, o receptor de sinal infravermelho TSOP4836 ou similar. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Adaptador USB Wi-Fi ou a capacidade de conectar um cabo Ethernet √† Internet na placa.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Colocamos OpenElec, tentamos</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse ponto, executaremos o OpenElec da menor maneira poss√≠vel. Assim que pensei no software do meu reprodutor multim√≠dia, lembrei-me do XBMC, mais tarde renomeado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kodi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Mas n√£o havia desejo de instalar nenhum sistema operacional e, em seguida, configurar o Kodi. Ent√£o, decidi pesquisar no google e encontrei esse conjunto do sistema operacional GNU / Linux, sobre o qual o Kodi j√° est√° instalado. Esse assembly √© chamado OpenElec, √© um projeto de c√≥digo aberto. Seu site oficial √© </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">openelec.tv</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
, ent√£o </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;">baixamos</font></a><font style="vertical-align: inherit;"> a imagem de instala√ß√£o do </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oficial </font><font style="vertical-align: inherit;">. Selecionamos a vers√£o desejada e a plataforma na qual a rodaremos (no meu caso, a vers√£o est√°vel do Rasberry Pi) e baixamos o 'Diskimage' (arquivo com a extens√£o .img.gz). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desembale a imagem: </font><font style="vertical-align: inherit;">
e escreva no cart√£o de mem√≥ria:</font></font><br>
<code> $ gunzip -d &lt; &gt;.img.gz<br>
</code><br><font style="vertical-align: inherit;"></font><br>
 <code>$ sudo dd if= &lt; &gt;.img of=/dev/mmblck0 bs=4M<br>
</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Correto / dev / mmblck0 - se houver mais de um cart√£o de mem√≥ria no seu sistema. </font></font><br>
<br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aten√ß√£o! O conte√∫do do cart√£o de mem√≥ria ser√° completamente apagado.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Os usu√°rios do Windows podem usar o utilit√°rio gratuito </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Win32 Disk Imager</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . O utilit√°rio possui uma interface gr√°fica - selecione o arquivo, o cart√£o de mem√≥ria e pressione 'Write'. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora verifique se tudo est√° escrito no cart√£o com o comando</font></font><br>
<code>$ sync<br>
</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou simplesmente remova o cart√£o atrav√©s da remo√ß√£o segura do dispositivo na interface gr√°fica do sistema operacional. N√≥s o obtemos fisicamente e o colocamos no Raspberry Pi. Em seguida, conecte o cabo Ethernet √† Internet ou insira o adaptador Wi-Fi USB, conecte o mouse e o cabo HDMI √† TV. Se voc√™ quiser usar um controle remoto infravermelho, precisar√° conectar o receptor de infravermelho ao GPIO18 e a pot√™ncia do processador (3,3V). O diagrama final da conex√£o √© o seguinte: </font></font><br>
<img src="https://habrastorage.org/files/6d3/6bf/259/6d36bf259da347bcb0a1e6818b949c99.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ decidir usar um receptor infravermelho, tenha cuidado com ele </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
- verifique se o layout dos pinos do seu receptor est√° correto. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo, agora voc√™ pode olhar para o pr√≥prio ambiente. N√≥s alimentamos a placa a partir da fonte de energia. Ap√≥s o carregamento, o assistente de configura√ß√£o inicial aparece na tela:</font></font><br>
<img src="https://habrastorage.org/files/143/7e8/037/1437e803748c4fc3a275a1a5cacbc1bb.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Durante a instala√ß√£o, recomendo ativar imediatamente o acesso SSH. </font><font style="vertical-align: inherit;">Todas as outras perguntas s√£o triviais. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ pode jogar com o ambiente do futuro jogador usando o mouse e / ou o teclado. </font><font style="vertical-align: inherit;">Voc√™ pode tentar reproduzir o v√≠deo em v√°rios formatos (voc√™ pode conectar uma unidade flash USB para liberar portas) e geralmente entender o que √© o qu√™. </font><font style="vertical-align: inherit;">Existem v√°rios casos para a pr√≥pria placa Raspberry Pi; talvez algu√©m fique satisfeito com tudo de uma maneira t√£o minimalista; por exemplo, voc√™ pode conectar um mouse USB sem fio e usar o dispositivo. </font><font style="vertical-align: inherit;">Continuaremos a melhor√°-lo.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conecte o controle remoto IR</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ decidir n√£o conectar um receptor de infravermelho, pode simplesmente pular esta se√ß√£o. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para usar o controle remoto, precisamos configurar o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LIRC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Primeiro, vamos ligar o m√≥dulo, que funciona diretamente com o receptor atrav√©s da porta GPIO. Para fazer isso, adicione uma linha ao arquivo de configura√ß√£o do DeviceTree. Efetuamos login via SSH no seu dispositivo (voc√™ ativou o SSH durante a configura√ß√£o inicial? Caso contr√°rio, voc√™ pode fazer isso na interface gr√°fica do pr√≥prio sistema). </font><font style="vertical-align: inherit;">
A senha padr√£o √© openelec. Adicione a linha que precisamos ao arquivo: </font><font style="vertical-align: inherit;">
no final, adicionamos a linha e recarregamos: </font><font style="vertical-align: inherit;">
Agora precisamos garantir que tudo funcione e o LIRC possa receber comandos do controle remoto, para isso paramos o LIRC e tentamos obter dados do controle remoto:</font></font><br>
<code>$ ssh root@ip_address<br>
</code><br><font style="vertical-align: inherit;"></font><br>
<code># mount -o remount,rw /flash<br>
# nano /flash/config.txt<br>
</code><br><font style="vertical-align: inherit;"></font><br>
 <code> dtoverlay=lirc-rpi<br>
</code><br><font style="vertical-align: inherit;"></font><br>
 <code> # killall lircd<br>
 # mode2 -d /dev/lirc0<br>
</code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Clicamos em qualquer bot√£o do controle remoto e iluminamos o receptor - um texto descrevendo os pulsos recebidos deve ser executado no console. Agora estamos convencidos de que tudo funciona e podemos treinar o LIRC para usar seu controle remoto. Observe que o lircd deve ser interrompido durante o processo de configura√ß√£o; fizemos isso anteriormente usando o comando kill. H√° um registro de utilidade especial para treinamento, executamos os seguintes comandos para inici√°-lo: </font><font style="vertical-align: inherit;">
Em seguida, siga as instru√ß√µes na tela. No in√≠cio, o utilit√°rio solicitar√° que voc√™ pressione os v√°rios bot√µes do controle remoto at√© que os pontos na tela sejam preenchidos para aprender o padr√£o do seu controle remoto. Ent√£o voc√™ precisar√° indicar com o texto qual bot√£o voc√™ deseja ensinar o LIRC a usar e brilhar no receptor. </font><font style="vertical-align: inherit;">
Eu recomendo que voc√™ ensine pelo menos os seguintes bot√µes: </font><font style="vertical-align: inherit;">
KEY_UP </font><font style="vertical-align: inherit;">
KEY_DOWN</font></font><br>
<code># cd /storage/.config<br>
# irrecord -d /dev/lirc0 lircd.conf<br>
</code><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_LEFT </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_RIGHT </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_OK </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_PLAY </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_EXIT </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_STOP </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_INFO </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
KEY_EPG </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A lista inteira de bot√µes dispon√≠veis no sistema pode ser obtida pelo comando: </font><font style="vertical-align: inherit;">
No controle remoto, voc√™ pode escolher qualquer bot√£o que seja conveniente. Na maioria das TVs no modo HDMI, a maioria dos bot√µes n√£o faz nada, o que, √© claro, est√° √† m√£o. Como resultado, devemos obter o arquivo lircd.conf com os par√¢metros do seu controle remoto - reinicializamos a placa e tentamos us√°-lo. </font><font style="vertical-align: inherit;">
Voc√™ tamb√©m pode ligar / desligar o aparelho. Para fazer isso, conecte o receptor ao segundo pino do Raspberry PI GPIO1 para Raspberry PI 1 ou GPIO3 para Raspberry PI 2 - em ambas as placas, esses pinos est√£o localizados no mesmo local no conector da placa:</font></font><br>
<code> # irrecord -list namespace<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<img src="https://habrastorage.org/files/f81/505/c34/f81505c3453242c6afaaa75e72237b19.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ao conectar este pino ao terra, voc√™ pode ativar a placa no estado desligado. Com esta conex√£o, voc√™ pode programar o bot√£o KEY_POWER, e o player ser√° desligado quando voc√™ clicar nele, e ser√° ativado por qualquer sinal de qualquer controle remoto. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Coletamos o dispositivo mais a s√©rio</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eu queria criar um dispositivo mais completo com a apar√™ncia do dispositivo de f√°brica e adicionar um disco r√≠gido a ele. Olhei para a despensa e encontrei um velho receptor de sat√©lite. No interior, j√° existe uma fonte de alimenta√ß√£o suficiente para todos os componentes de energia, existe um receptor de sinal de IR, um interruptor de desligamento na parede traseira. H√° tamb√©m a oportunidade de fazer um rel√≥gio no painel frontal devido ao indicador de sete segmentos j√° instalado. E, claro, o caso em si √© √≥timo para nossos prop√≥sitos. O receptor de sat√©lite pode ser substitu√≠do por um DVD ou VHS antigo, mesmo quando n√£o est√° funcionando.</font></font><br>
<i>,         ‚Äî   ,        .    /     ‚Äî     ,       220 .</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abrimos o caso do receptor / videocassete. Para come√ßar, precisamos garantir que a fonte de alimenta√ß√£o tenha uma sa√≠da de 5V, que pode fornecer a energia necess√°ria. Para fazer isso, usando um mult√≠metro, verificamos a presen√ßa de energia de 5V e rastreamos atrav√©s de quais componentes esses 5Vs s√£o obtidos. Se a base do elemento do retificador e o di√¢metro do enrolamento do transformador da fonte de alimenta√ß√£o puder suportar 2-3 amperes, teremos sorte - existe uma fonte, caso contr√°rio, voc√™ ter√° que mudar a fonte no caso para uma mais potente. Depois, retiramos a placa principal / unidade de fita / unidade √≥ptica e a enviamos de volta √† despensa - ser√° √∫til. Dentro, deixamos apenas a placa PSU e a placa com um painel frontal no qual existe um receptor de infravermelho.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora escolha onde instalar o pr√≥prio Raspberry Pi. A escolha aqui √© bastante simples: o lado da placa com HDMI deve sair do gabinete, o lado com portas USB deve ser montado no interior para conectar componentes internos; al√©m disso, precisamos de pelo menos algum acesso ao cart√£o microSD, caso o firmware seja alterado. Existem aberturas para conectores RCA no gabinete do receptor, colocaremos a placa para que o conector HDMI fique o mais acess√≠vel poss√≠vel do lado de fora. Do mesmo lado, existem sa√≠das da placa de som e microUSB operando no modo perif√©rico. N√£o estamos interessados ‚Äã‚Äãnesses conectores; forneceremos energia do lado de fora atrav√©s do conector GPIO principal da placa. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Marcamos onde √© necess√°rio recortar um pouco para que o conector HDMI seja inserido livremente na placa pela parte externa do gabinete e destacamos quatro orif√≠cios para a instala√ß√£o da placa. Eu usei os seguintes racks:</font></font><br>
<img src="https://habrastorage.org/files/29f/6ab/6c5/29f6ab6c5f4b4e2daf092489d0ba57a7.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
As prateleiras da placa-m√£e interferiram e eu as removi com a ajuda de um alicate. As manipula√ß√µes devem ser realizadas com cuidado, com um movimento desajeitado, voc√™ pode facilmente dobrar a caixa. Furamos, vimos, prendemos o rack com parafusos adequados e a pr√≥pria placa a eles. </font></font><br>
<img src="https://habrastorage.org/files/2bf/30d/ec7/2bf30dec733c4c6ca8db3c46d4beb367.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ precisa encontrar um lugar para o disco r√≠gido. Aqui, o requisito √© bastante simples - voc√™ precisa deixar alguns cent√≠metros livres dentro do gabinete, na lateral do conector SATA, porque um adaptador ser√° inserido l√°. O disco r√≠gido possui roscas na superf√≠cie inferior e nas laterais do disco r√≠gido. Winchester precisa ser ligeiramente levantado para que n√£o fique sobre o metal. Resolvi o problema com muita simplicidade - peguei parafusos adequados para a rosca inferior, mas um pouco mais do que o necess√°rio, e estabeleci a dist√¢ncia entre a caixa e o disco r√≠gido com porcas maiores.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora precisamos encontrar um conversor USB SATA ou um recipiente antigo para HDD, de onde esse conversor possa ser extra√≠do. Eu tinha um cont√™iner, mas infelizmente ele ficou inoperante. Eu tive que correr para a loja para o conversor USB SATA. Vamos inserir o conector USB no Raspberry PI, mas para n√£o carregar a placa com correntes bastante s√©rias que o HDD exige, especialmente ao girar o eixo, voc√™ precisa conduzir energia adicional diretamente da PSU. No meu caso, o adaptador tinha um cabo com dois conectores USB; conectei um deles diretamente √† fonte de alimenta√ß√£o soldando o conector de resposta USB pr√≥ximo √† PSU.</font></font><br>
<img src="https://habrastorage.org/files/f53/06a/235/f5306a2353de423592d7e82a33878e1c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais duas coisas em que pensar imediatamente. A primeira √© onde e como a porta USB externa ser√° localizada. O segundo √© onde colocar o adaptador Wi-Fi ou, se voc√™ planeja implementar apenas uma conex√£o Ethernet, como colocar o conector Ethernet na parede do gabinete (se voc√™ colocar a placa com a borda desse conector no gabinete, n√£o poder√° conectar dispositivos USB por dentro). A Ethernet pode ser aumentada colocando uma tomada de parede convencional dentro do gabinete e prendendo um fio curto com um conector.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora s√£o vendidos min√∫sculos dongles Wi-Fi USB, mas voc√™ n√£o precisa coloc√°-los dentro de uma caixa de metal - o sinal pode passar mal. Voc√™ pode pegar um pequeno cabo de extens√£o USB, colocar o conector USB na parte traseira do gabinete e inseri-lo ali. Tamb√©m existem adaptadores USB com antenas remov√≠veis, voc√™ pode estender o conector RMA para a parte traseira do gabinete e parafusar a antena. Eu tinha um adaptador USB Wi-Fi bastante antigo e, como resultado, um grande USB com uma antena envolvente e entrada miniUSB. Eu n√£o tinha onde coloc√°-lo por causa do seu tamanho e decidi us√°-lo nos neg√≥cios. Ele removeu o estojo - seu formato n√£o permitia conectar a antena pelo lado de fora. A taxa era bastante alta e eu tive que pensar cuidadosamente sobre sua coloca√ß√£o. Felizmente, ficou muito fino e decidi coloc√°-lo sobre os conectores USB do Raspberry Pi. O conector RMA est√° foratorcido em uma porca e dentro do gabinete coloque uma prateleira alta para a placa. O acesso ao USB permaneceu e a antena foi levantada acima do gabinete. √ìtimo!</font></font><br>
<img src="https://habrastorage.org/files/c1d/ed1/7c7/c1ded17c77d24ba0b3f44aadb5e88ae9.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora voc√™ precisa, de alguma forma, fixar o cabo de extens√£o USB no painel frontal, certificando-se de que ele n√£o interfira em nada dentro do gabinete. No meu caso, o receptor tinha uma porta para cart√µes de acesso e eu decidi colocar um conector atr√°s dele - para n√£o acumular poeira! Portanto, n√£o a cortei com muito cuidado e a enchi com cola quente na parte de tr√°s.</font></font><br>
<img src="https://habrastorage.org/files/800/d2b/468/800d2b46858841028fdacbd45c9eee9a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A situa√ß√£o com a placa do painel frontal √© mais interessante - existem muitas op√ß√µes para o que consiste. Eu tive que implementar a indica√ß√£o din√¢mica de indicadores de sete segmentos usando o DMA (Direct Memory Access, a implementa√ß√£o direta de indica√ß√£o din√¢mica via portas GPIO consumiria muitos recursos da CPU e o brilho dos segmentos seria desigual devido √† atividade do sistema operacional). Mas este j√° √© um t√≥pico para um artigo separado e, al√©m disso, esses pain√©is podem diferir radicalmente; portanto, aqui forneceremos o direito de mostrar nosso potencial criativo ao leitor. Voc√™ pode estudar o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c√≥digo fonte da implementa√ß√£o para o meu quadro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">No caso mais simples, voc√™ pode simplesmente cortar as faixas que v√£o para o receptor de infravermelho e sold√°-lo diretamente com tr√™s fios. </font><font style="vertical-align: inherit;">Notei apenas que usei um cabo IDE para conectar ao conector GPIO da placa, ele se encaixa perfeitamente no conector Raspberry Pi e os fios podem ser soldados facilmente com outros componentes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No final, eu tenho um dispositivo assim:</font></font><br>
<img src="https://habrastorage.org/files/1fd/936/99e/1fd93699eee74e1888e1fd8476e10135.png"><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Personalizar</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se, ao ligar, voc√™ v√™ um quadrado colorido no canto superior direito da tela, isso significa que a energia do Raspberry Pi n√£o √© suficiente - uma fonte de alimenta√ß√£o fraca, fios muito finos ou perif√©ricos USB demoram muito. No primeiro caso, apenas substituir a PSU por uma mais poderosa ajudar√°. No segundo, o problema pode ser facilmente resolvido substituindo os fios por outros mais grossos ou usando v√°rios n√∫cleos em paralelo; no terceiro, o problema √© resolvido alimentando dispositivos USB diretamente da fonte de alimenta√ß√£o ou, por exemplo, instalando um hub USB com a capacidade de conectar uma fonte de energia externa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voc√™ provavelmente tamb√©m ver√° que seu HDD est√° conectado ao sistema como uma unidade flash externa. Vamos torn√°-lo o principal armazenamento no sistema operacional. Na primeira inicializa√ß√£o, o OpenElec inicia automaticamente o uso de todo o espa√ßo livre no cart√£o microSD para a se√ß√£o de dados, que √© montada como / storage. A decis√£o mais bem-sucedida me parece usar todo o disco r√≠gido como / armazenamento. Para fazer isso, formate o disco r√≠gido e crie uma parti√ß√£o nele com o sistema de arquivos ext3 / 4. Isso pode ser feito diretamente no reprodutor, usando os utilit√°rios parted e mkfs. Os comandos abaixo apagar√£o todo o conte√∫do do disco e criar√£o uma parti√ß√£o ext4: </font><font style="vertical-align: inherit;">
Para isso, ser√° necess√°rio efetuar login no reprodutor via SSH. Em seguida, monte a nova parti√ß√£o em algum lugar:</font></font><br>
<br>
<code># umount /dev/sda1<br>
 # parted /dev/sda<br>
 GNU Parted 3.2<br>
 Using /dev/sda<br>
 Welcome to GNU Parted! Type 'help' to view a list of commands.<br>
 (parted) mklabel GPT <br>
 mklabel GPT<br>
 Warning: The existing disk label on /dev/sda will be destroyed and all data on<br>
 this disk will be lost. Do you want to continue?<br>
 Yes/No? yes <br>
 yes<br>
 (parted) mkpart primary 2048s 100% <br>
 mkpart primary 2048s 100%<br>
 (parted) q <br>
 q<br>
 Information: You may need to update /etc/fstab.<br>
 # mkfs.ext4 /dev/sda1<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code># mkdir /tmp/hdd<br>
# mount /dev/sda1 /tmp/hdd<br>
</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Copie todo o conte√∫do de / storage para uma nova parti√ß√£o para manter o estado atual: </font><font style="vertical-align: inherit;">
Desmonte a parti√ß√£o e, se desejar, exclua a pasta: </font><font style="vertical-align: inherit;">
Agora voc√™ precisa especificar qual unidade precisamos montar no momento da inicializa√ß√£o. Voc√™ pode fazer isso ajustando a linha de comando dos par√¢metros do kernel, mas primeiro descobrimos o UUID da parti√ß√£o do disco r√≠gido: </font><font style="vertical-align: inherit;">
Copie o UUID da parti√ß√£o para a √°rea de transfer√™ncia. Agora remonte o sistema de arquivos com a configura√ß√£o do kernel para gravar e corrija-o: </font><font style="vertical-align: inherit;">
No arquivo, substitua o par√¢metro disk pelo UUID do nosso disco. O conte√∫do do arquivo deve se parecer com o seguinte: </font><font style="vertical-align: inherit;">
Ap√≥s a reinicializa√ß√£o, o player usar√° o disco r√≠gido como / storage e a se√ß√£o no cart√£o de mem√≥ria poder√° ser exclu√≠da para que n√£o seja montada automaticamente ao inicializar:</font></font><br>
 <code># cp -rf /storage/. /tmp/hdd<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
 <code># umount /dev/sda1<br>
# rmdir /tmp/hdd<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code># blkid /dev/sda1<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code># mount -o rw,remount /flash<br>
# nano /flash/cmdline.txt<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code>boot=/dev/mmcblk0p1 disk=UUID=95013338-89b1-43af-8471-9b30efc85d98 quiet<br>
</code><br>
<br><font style="vertical-align: inherit;"></font><br>
<code># parted -s /dev/mmcblk0 rm 2<br>
</code><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui est√° um fim de semana t√£o divertido que eu tive. </font><font style="vertical-align: inherit;">N√£o esque√ßa que o sistema operacional GNU / Linux est√° presente neste media player e voc√™ pode modific√°-lo / complement√°-lo como quiser. </font><font style="vertical-align: inherit;">Voc√™ tamb√©m pode resolver algumas tarefas de automa√ß√£o residencial, usando o mesmo dispositivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E, finalmente, um </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v√≠deo do discurso do</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> autor de um artigo falando sobre o dispositivo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tenha uma boa visualiza√ß√£o!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt396967/">https://habr.com/ru/post/pt396967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt396957/index.html">Compre de forma r√°pida e simples nos EUA com Pochtoy.com (+ presente para os leitores)</a></li>
<li><a href="../pt396959/index.html">F√≠sica no mundo animal: enguia el√©trica e sua "central el√©trica"</a></li>
<li><a href="../pt396961/index.html">Quem est√° construindo um reator de fus√£o</a></li>
<li><a href="../pt396963/index.html">Como comprar o iPhone usado</a></li>
<li><a href="../pt396965/index.html">Interceptando uma conversa no telefone ou como fazer um controle de r√°dio simples a 39 MHz</a></li>
<li><a href="../pt396969/index.html">Intel Agora irm√£o em ARMs</a></li>
<li><a href="../pt396971/index.html">Um √©ider sem asas √© proposto para ser revivido com a ajuda da engenharia gen√©tica.</a></li>
<li><a href="../pt396973/index.html">Os fabricantes nos Estados Unidos n√£o t√™m o direito de recusar uma garantia ap√≥s remover o adesivo da garantia. O que h√° na R√∫ssia?</a></li>
<li><a href="../pt396975/index.html">Computador no carro, ano de 2016</a></li>
<li><a href="../pt396977/index.html">Intelig√™ncia artificial tem problemas de linguagem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>