<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê≥ üë©üèø‚Äçü§ù‚Äçüë®üèª üßõüèæ Pourquoi Google avait-il besoin d'un graphique de connaissances? üßïüèº üõ∂ üíã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque je me pr√©sente et dis ce que fait notre startup, l'interlocuteur pose imm√©diatement la question: avez-vous d√©j√† travaill√© sur Facebook, ou vot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pourquoi Google avait-il besoin d'un graphique de connaissances?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440938/"><img src="https://habrastorage.org/webt/_b/5j/ed/_b5jedmpncy6tkfvqbhqc_jd6zi.png" align="left" width="280">  Lorsque je me pr√©sente et dis ce que fait notre startup, l'interlocuteur pose imm√©diatement la question: avez-vous d√©j√† travaill√© sur Facebook, ou votre d√©veloppement a-t-il √©t√© cr√©√© sous l'influence de Facebook?  Beaucoup sont conscients des efforts de Facebook pour maintenir son graphique social, car la soci√©t√© a publi√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plusieurs</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">articles</a> sur l'infrastructure de ce graphique, qu'elle a soigneusement con√ßue. <br><br>  Google a parl√© de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">son graphique de connaissances</a> , mais rien de l'infrastructure interne.  Cependant, la soci√©t√© dispose √©galement de sous-syst√®mes sp√©cialis√©s.  En fait, une grande attention est accord√©e au graphique des connaissances.  Personnellement, j'ai mis au moins deux de mes promotions sur ce cheval - et j'ai commenc√© √† travailler sur un nouveau graphique en 2010. <br><a name="habracut"></a><br>  <b>Google devait construire l'infrastructure</b> non seulement pour servir des relations complexes dans le Knowledge Graph, mais aussi pour prendre en charge tous les blocs th√©matiques <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OneBox</a> dans les r√©sultats de recherche qui ont acc√®s √† des donn√©es structur√©es.  L'infrastructure est n√©cessaire pour 1) un contournement de qualit√© des faits avec 2) une bande passante suffisamment √©lev√©e et 3) un d√©lai suffisamment faible pour parvenir √† acc√©der √† une bonne partie des requ√™tes de recherche sur le Web.  Il s'est av√©r√© qu'aucun syst√®me ou base de donn√©es disponible ne peut effectuer les trois actions. <br><br>  Maintenant que j'ai expliqu√© pourquoi une infrastructure est n√©cessaire, dans le reste de l'article, je parlerai de mon exp√©rience dans la cr√©ation de tels syst√®mes, y compris pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Knowledge Graph</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OneBox</a> . <br><br><h1>  Comment le sais-je? </h1><br>  Je vais me pr√©senter bri√®vement.  J'ai travaill√© chez Google de 2006 √† 2013.  D'abord en tant que stagiaire, puis en tant qu'ing√©nieur logiciel dans l'infrastructure de recherche Web.  Google a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">acquis Metaweb</a> en 2010 et mon √©quipe vient de lancer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Caffeine</a> .  Je voulais faire autre chose - et j'ai commenc√© √† travailler avec les gars de Metaweb (√† San Francisco), passant du temps √† voyager entre San Francisco et Mountain View.  Je voulais d√©couvrir comment utiliser le graphique des connaissances pour am√©liorer ma recherche sur le Web. <br><br>  Il y a eu de tels projets sur Google avant moi.  Il est √† noter que le projet appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Squared a √©t√©</a> cr√©√© dans un bureau de New York, et il a √©t√© question de Knowledge Cards.  Ensuite, il y a eu des efforts sporadiques d'individus / petites √©quipes, mais √† cette √©poque, il n'y avait pas de cha√Æne d'√©quipe √©tablie, ce qui m'a finalement forc√© √† quitter Google.  Mais nous y reviendrons plus tard ... <br><br><h1>  Histoire de Metaweb </h1><br>  Comme d√©j√† mentionn√©, Google a acquis Metaweb en 2010.  Metaweb a construit un graphique de connaissances de haute qualit√© en utilisant plusieurs m√©thodes, y compris l'exploration et l'analyse de Wikip√©dia, ainsi qu'un syst√®me d'√©dition de style wiki de crowdsourcing utilisant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Freebase</a> .  Tout cela a fonctionn√© sur la base de la propre base de donn√©es graphique de Graphd - le d√©mon graphique (maintenant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publi√©</a> sur GitHub). <br><br>  Graphd avait des propri√©t√©s assez typiques.  En tant que d√©mon, il fonctionnait sur un serveur, stockait toutes les donn√©es en m√©moire et pouvait √©mettre un site Freebase complet.  Apr√®s l'achat, Google a d√©fini l'une des t√¢ches pour continuer √† travailler avec Freebase. <br><br>  <b>Google a b√¢ti un empire sur du mat√©riel standard et des logiciels distribu√©s.</b>  Un SGBD c√¥t√© serveur ne serait jamais en mesure de servir les r√©sultats de l'exploration, de l'indexation et de la recherche.  D'abord cr√©√© SSTable, puis Bigtable, qui √©volue horizontalement sur des centaines ou des milliers de machines qui partagent des p√©taoctets de donn√©es.  Les machines sont attribu√©es par Borg ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">K8</a> est venu d'ici), elles communiquent via Stubby (gRPC est venu d'ici) avec la r√©solution des adresses IP via le service de nom Borg (BNC √† l'int√©rieur de K8) et stockent les donn√©es dans le syst√®me de fichiers Google ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GFS</a> , vous pouvez dire Hadoop FS).  <i>Les processus peuvent mourir, les machines peuvent se briser, mais le syst√®me dans son ensemble est indestructible et continuera de bourdonner.</i> <br><br>  Graphd est entr√© dans un tel environnement.  L'id√©e d'une base de donn√©es servant un site Web entier sur un serveur est √©trang√®re √† Google (y compris moi).  En particulier, Graphd avait besoin de 64 Go ou plus de m√©moire pour fonctionner.  S'il vous semble que c'est un peu, rappelez-vous: c'est 2010.  La plupart des serveurs Google √©taient √©quip√©s d'un maximum de 32 Go.  En fait, Google a d√ª acheter des machines sp√©ciales avec suffisamment de RAM pour servir Graphd dans sa forme actuelle. <br><br><h3>  Remplacement de graphd </h3><br>  Le brainstorming a commenc√© sur la fa√ßon de d√©placer les donn√©es Graphd ou de r√©√©crire le syst√®me pour qu'il fonctionne de mani√®re distribu√©e.  Mais, voyez-vous, les graphiques sont compliqu√©s.  Ce n'est pas une base de donn√©es de valeurs-cl√©s pour vous, o√π vous pouvez simplement prendre un √©l√©ment de donn√©es, le d√©placer vers un autre serveur et le publier lorsque vous demandez une cl√©.  Les graphiques effectuent des jointures et des solutions de contournement efficaces qui n√©cessitent que les logiciels fonctionnent de mani√®re sp√©cifique. <br><br>  Une id√©e √©tait d'utiliser un projet appel√© MindMeld (IIRC).  Il √©tait suppos√© que la m√©moire d'un autre serveur serait disponible beaucoup plus rapidement via l'√©quipement r√©seau.  Il aurait d√ª √™tre plus rapide que les RPC ordinaires, suffisamment rapide pour pseudo-r√©pliquer l'acc√®s direct √† la m√©moire requis par la base de donn√©es en m√©moire.  Mais l'id√©e n'est pas all√©e trop loin. <br><br>  Une autre id√©e qui est devenue un projet √©tait de cr√©er un syst√®me de service graphique vraiment distribu√©.  Quelque chose qui peut non seulement remplacer Graphd pour Freebase, mais aussi vraiment fonctionner en production.  <b>Elle s'appelait Dgraph - un graphe distribu√©, invers√© de Graphd (graph-daemon).</b> <br><br>  Si vous √™tes int√©ress√©, alors oui.  Ma startup, Dgraph Labs, la soci√©t√© et le projet open source Dgraph portent le nom de ce projet sur Google (remarque: Dgraph est une marque de commerce de Dgraph Labs; pour autant que je sache, Google ne publie pas de projets dont les noms correspondent aux noms internes). <br><br>  Dans presque tout le reste du texte, lorsque je mentionne Dgraph, je veux dire le projet Google interne, et non le projet open source que nous avons cr√©√©.  Mais plus √† <i>ce sujet</i> plus tard. <br><br><h1>  L'histoire de Cerebro: le moteur du savoir </h1><br>  <i>Cr√©ation d'une infrastructure par inadvertance pour les graphiques</i> <br><br>  Bien que je sache g√©n√©ralement que Dgraph essayait de remplacer Graphd, mon objectif √©tait de cr√©er quelque chose pour am√©liorer la recherche sur le Web.  Chez Metaweb, j'ai rencontr√© un ing√©nieur de recherche DH qui a cr√©√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cubed</a> . <br><br>  Comme je l'ai mentionn√©, un groupe h√©t√©roclite d'ing√©nieurs de la division de New York a d√©velopp√© Google <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Squared</a> .  Mais le syst√®me DH √©tait <i>bien</i> meilleur.  J'ai commenc√© √† penser comment l'impl√©menter sur Google.  Google avait des pi√®ces de puzzle que je pouvais facilement utiliser. <br><br>  La premi√®re partie du puzzle est le moteur de recherche.  C'est un moyen de d√©terminer avec pr√©cision quels mots sont li√©s les uns aux autres.  Par exemple, lorsque vous voyez une phrase comme [tom hanks films], cela peut vous dire que [tom] et [hanks] sont li√©s.  De m√™me, d'apr√®s [la m√©t√©o de san francisco], nous voyons une connexion entre [san] et [francisco].  Ce sont des choses √©videntes pour les gens, mais pas si √©videntes pour les voitures. <br><br>  La deuxi√®me partie du puzzle est de comprendre la grammaire.  Lorsque dans la requ√™te [livres d'auteurs fran√ßais], la machine peut interpr√©ter cela comme des [livres] de [auteurs fran√ßais], c'est-√†-dire des livres des auteurs fran√ßais.  Mais elle peut aussi interpr√©ter cela comme [des livres fran√ßais] de [auteurs], c'est-√†-dire des livres en fran√ßais de n'importe quel auteur.  J'ai utilis√© le tagger <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Part-Of-Speech</a> (POS) de l'Universit√© de Stanford pour mieux analyser la grammaire et construire l'arborescence. <br><br>  La troisi√®me partie du puzzle est de comprendre les entit√©s.  [fran√ßais] peut signifier beaucoup.  Il peut s'agir d'un pays (r√©gion), d'une nationalit√© (li√©e au peuple fran√ßais), d'une cuisine (li√©e √† la nourriture) ou d'une langue.  J'ai ensuite appliqu√© un autre syst√®me pour obtenir une liste d'entit√©s auxquelles un mot ou une phrase peut correspondre. <br><br>  La quatri√®me partie du puzzle √©tait de comprendre la relation entre les entit√©s.  Quand on sait comment connecter des mots en phrases, dans quel ordre les phrases doivent √™tre ex√©cut√©es, c'est-√†-dire leur grammaire, et √† quelles entit√©s elles peuvent correspondre, vous devez trouver la relation entre ces entit√©s afin de cr√©er des interpr√©tations de machine.  Par exemple, nous ex√©cutons la requ√™te [livres d'auteurs fran√ßais], et POS dit que c'est [livres] de [auteurs fran√ßais].  Nous avons plusieurs entit√©s pour [fran√ßais] et plusieurs pour [auteurs]: l'algorithme devrait d√©terminer comment elles sont li√©es.  Par exemple, ils peuvent √™tre li√©s par lieu de naissance, c'est-√†-dire par des auteurs n√©s en France (bien qu'ils puissent √©crire en anglais).  Ou il pourrait s'agir d'auteurs de nationalit√© fran√ßaise.  Soit des auteurs qui parlent ou √©crivent le fran√ßais (mais qui ne sont pas li√©s √† la France en tant que pays), ou des auteurs qui aiment simplement la cuisine fran√ßaise. <br><br><h1>  Syst√®me de graphe d'index de recherche </h1><br>  Pour d√©terminer s'il existe une connexion entre des objets et comment ils sont connect√©s, vous avez besoin d'un syst√®me de graphes.  Graphd n'allait jamais √©voluer au niveau de Google, mais vous pouviez utiliser la recherche elle-m√™me.  Les donn√©es du graphe de connaissances sont stock√©es au format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Triples</a> triples, c'est-√†-dire que chaque fait est repr√©sent√© par trois parties: sujet (entit√©), pr√©dicat (relation) et objet (autre entit√©).  Les demandes vont comme <code>[SP] ‚Üí [O]</code> ou <code>[PO] ‚Üí [S]</code> , et parfois <code>[SO] ‚Üí [P]</code> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/29f/324/29b/29f32429b78e9fc1387deda24e3fc986.png"><br><br>  <b>J'ai utilis√© l'index de recherche Google</b> , attribu√© un docid √† ‚Äã‚Äãchaque triple et cr√©√© trois index, un pour S, P et O.En outre, l'index est embo√Ætable, j'ai donc ajout√© des informations sur le type de chaque entit√© (c'est-√†-dire, acteur, livre, personne et etc.). <br><br>  <i>J'ai fait un tel syst√®me, bien que j'ai vu un probl√®me avec la profondeur des jointures (ce qui est expliqu√© ci-dessous) et il ne convient pas aux requ√™tes complexes.</i>  <i>En fait, lorsque quelqu'un de l'√©quipe Metaweb m'a demand√© de publier un syst√®me pour mes coll√®gues, j'ai refus√©.</i> <br><br>  Pour d√©terminer la relation, vous pouvez voir le nombre de r√©sultats fournis par chaque requ√™te.  Par exemple, combien de r√©sultats [fran√ßais] et [auteur] donnent-ils?  Nous prenons ces r√©sultats et voyons comment ils sont li√©s aux [livres], etc. Ainsi, de nombreuses interpr√©tations de la requ√™te par la machine sont apparues.  Par exemple, la requ√™te [films tom hanks] g√©n√®re une vari√©t√© d'interpr√©tations, comme [films r√©alis√©s par tom hanks], [films avec tom hanks], [films produits par tom hanks], mais rejette automatiquement les interpr√©tations comme [films nomm√©s tom hanks]. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/50b/a4a/424/50ba4a424adfac5ada59b3c9ea29a82c.png"><br>  Chaque interpr√©tation g√©n√®re une liste de r√©sultats - entit√©s valides sur le graphique - et renvoie √©galement leurs types (pr√©sents dans les pi√®ces jointes).  Cela s'est av√©r√© √™tre une fonction extr√™mement puissante car la compr√©hension du type de r√©sultats a ouvert des possibilit√©s telles que le filtrage, le tri ou l'expansion.  Vous pouvez trier les films avec l'ann√©e de sortie, la dur√©e du film (court, long), la langue, les r√©compenses re√ßues, etc. <br><br>  Le projet semblait si intelligent que nous (DH √©tait √©galement partiellement impliqu√© en tant qu'expert sur le graphe des connaissances) l'avons nomm√© Cerebro, en l'honneur de l'appareil du m√™me nom du film <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">"X-Men"</a> . <br><br>  <b>Cerebro a souvent r√©v√©l√© des faits tr√®s int√©ressants</b> qui n'√©taient pas √† l'origine dans la requ√™te de recherche.  Par exemple, √† la demande des [pr√©sidents am√©ricains], Cerebro se rendra compte que les pr√©sidents sont des personnes et que les gens ont une croissance.  Cela nous permet de trier les pr√©sidents par croissance et de montrer qu'Abraham Lincoln est le plus haut pr√©sident des √âtats-Unis.  De plus, les personnes peuvent √™tre filtr√©es par nationalit√©.  Dans ce cas, l'Am√©rique et le Royaume-Uni figurent sur la liste, car les √âtats-Unis avaient un pr√©sident britannique, √† savoir George Washington.  (Avertissement: les r√©sultats sont bas√©s sur l'√©tat du graphe des connaissances au moment de l'exp√©rience; je ne peux pas garantir leur exactitude). <br><br><h1>  Liens bleus contre connaissances </h1><br>  Cerebro a vraiment pu comprendre les demandes des utilisateurs.  Apr√®s avoir re√ßu des donn√©es pour l'ensemble du graphique, nous pourrions g√©n√©rer des interpr√©tations de la requ√™te par la machine, g√©n√©rer une liste de r√©sultats et comprendre beaucoup de ces r√©sultats pour une √©tude plus approfondie du graphique.  Cela a √©t√© expliqu√© ci-dessus: d√®s que le syst√®me comprend qu'il s'agit de films, de personnes ou de livres, etc., certains filtres et tris peuvent √™tre activ√©s.  Vous pouvez m√™me faire le tour des n≈ìuds et afficher des informations connexes: des [pr√©sidents am√©ricains] aux [√©coles o√π ils sont all√©s] ou [aux enfants dont ils sont les parents].  Voici quelques autres requ√™tes g√©n√©r√©es par le syst√®me lui-m√™me: [femmes politiciennes afro-am√©ricaines], [acteurs de Bollywood mari√©s √† des politiciens], [enfants de nous pr√©sidents], [films avec tom hanks sortis dans les ann√©es 90] <br><br>  DH a d√©montr√© cette opportunit√© de passer d'une liste √† une autre dans un autre projet appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Parallax</a> . <br><br>  Cerebro a montr√© un r√©sultat tr√®s impressionnant, et la direction de Metaweb l'a soutenu.  M√™me en termes d'infrastructure, il s'est av√©r√© efficace et fonctionnel.  Je l'ai appel√© <b>le moteur de connaissances</b> (comme un moteur de recherche).  Mais sur Google, personne n'a sp√©cifiquement abord√© ce sujet.  Elle int√©ressait peu mon responsable, ils m'ont conseill√© de parler avec une personne, puis avec une autre, et en cons√©quence j'ai eu la chance de d√©montrer le syst√®me √† un tr√®s haut responsable de recherche. <br><br>  <b>La r√©ponse n'√©tait pas celle que j'esp√©rais</b> .  Pour d√©montrer les r√©sultats du moteur de connaissance de [livres d'auteurs fran√ßais], il a lanc√© une recherche Google, a montr√© dix lignes avec des liens bleus et a d√©clar√© que Google pourrait faire de m√™me.  De plus, ils ne veulent pas prendre le trafic des sites, car ils se mettent en col√®re. <br><br>  <i>Si vous pensez qu'il a raison, pensez-y:</i> lorsque Google effectue une recherche sur Internet, il ne comprend vraiment pas la demande.  Le syst√®me recherche les bons mots dans la bonne position, en tenant compte du poids de la page, etc.  Il s'agit d'un syst√®me tr√®s complexe, mais il ne comprend ni la requ√™te ni les r√©sultats.  L'utilisateur fait lui-m√™me tout le travail: lire, analyser, extraire les informations n√©cessaires des r√©sultats et des recherches ult√©rieures, additionner une liste compl√®te des r√©sultats, etc. <br><br>  Par exemple, pour [les livres d'auteurs fran√ßais], une personne essaiera d'abord de trouver une liste exhaustive, bien qu'une page avec une telle liste puisse ne pas √™tre trouv√©e.  Triez ensuite ces livres par ann√©es de publication ou filtrez par √©diteurs, etc. - tout cela n√©cessite qu'une personne traite une grande quantit√© d'informations, de nombreuses recherches et traite les r√©sultats.  Cerebro est en mesure de r√©duire ces efforts et de rendre l'interaction utilisateur simple et sans faille. <br><br>  Mais alors, il n'y avait pas de compr√©hension compl√®te de l'importance du graphique des connaissances.  Le manuel n'√©tait pas s√ªr de son utilit√© ni de la mani√®re de le relier √† la recherche.  <b>Cette nouvelle approche de la connaissance n'est pas facile pour l'organisation qui a obtenu un tel succ√®s en fournissant aux utilisateurs des liens vers des pages Web.</b> <br><br>  Au cours de l'ann√©e, j'ai eu du mal √† comprendre les managers et j'ai finalement abandonn√©.  Un responsable du bureau de Shanghai s'est tourn√© vers moi et je lui ai remis le projet en juin 2011.  Il a mis sur lui une √©quipe de 15 ing√©nieurs.  J'ai pass√© une semaine √† Shanghai, transmettant aux ing√©nieurs tout ce que j'ai cr√©√© et appris.  DH √©tait √©galement impliqu√© dans cette entreprise et il a longtemps dirig√© l'√©quipe. <br><br><h1>  Probl√®me de profondeur de jointure </h1><br>  Dans le syst√®me graphique Cerebro, il y avait un probl√®me avec la profondeur de l'union.  La jointure est effectu√©e lorsque le r√©sultat d'une requ√™te pr√©coce est n√©cessaire pour terminer une requ√™te ult√©rieure.  Une union typique comprend certains <code>SELECT</code> , c'est-√†-dire un filtre dans certains r√©sultats d'un ensemble de donn√©es universel, puis ces r√©sultats sont utilis√©s pour filtrer par une autre partie de l'ensemble de donn√©es.  Je vais vous expliquer avec un exemple. <br><br>  Dites que vous voulez savoir [les gens de SF qui mangent des sushis].  Toutes les personnes se voient attribuer des donn√©es, y compris qui vit dans quelle ville et quel type de nourriture ils mangent. <br><br>  La requ√™te ci-dessus est une jointure √† un niveau.  Si l'application acc√®de √† la base de donn√©es, elle fera une demande pour la premi√®re √©tape.  Ensuite, quelques requ√™tes (une requ√™te pour chaque r√©sultat) pour d√©couvrir ce que chaque personne mange, en ne choisissant que ceux qui mangent des sushis. <br><br>  La deuxi√®me √©tape souffre du probl√®me de fan-out.  Si la premi√®re √©tape donne un million de r√©sultats (la population de San Francisco), alors la deuxi√®me √©tape devrait √™tre donn√©e sur demande √† tout le monde, en demandant leurs habitudes alimentaires, puis en appliquant un filtre. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76a/f20/f9e/76af20f9e21b097fed9420f4174ab8ae.png"><br><br>  Les ing√©nieurs syst√®me distribu√©s r√©solvent g√©n√©ralement ce probl√®me par <i>diffusion</i> , c'est-√†-dire par distribution omnipr√©sente.  Ils accumulent les r√©sultats correspondants, en faisant une demande √† chaque serveur du cluster.  Cela fournit une jointure, mais provoque des probl√®mes de latence de la demande. <br><br>  La diffusion ne fonctionne pas bien dans un syst√®me distribu√©.  Ce probl√®me est mieux expliqu√© par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Jeff Dean</a> de Google dans son discours "Atteindre une r√©ponse rapide dans les grands services en ligne" ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©os</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">diapositives</a> ).  Le retard total est toujours sup√©rieur au retard du composant le plus lent.  <b>De petits reflets sur des ordinateurs individuels entra√Ænent des retards, et l'inclusion de nombreux ordinateurs dans la requ√™te augmente consid√©rablement la probabilit√© de retards.</b> <br><br><blockquote>  Consid√©rons un serveur avec un retard de plus de 1 ms dans 50% des cas et de plus de 1 s dans 1% des cas.  Si la demande est envoy√©e √† un seul de ces serveurs, seulement 1% des r√©ponses d√©passent une seconde.  Mais si la demande va √† des centaines de ces serveurs, 63% des r√©ponses d√©passent une seconde. </blockquote><br>  Ainsi, la diffusion d'une demande augmente consid√©rablement le d√©lai.  Pensez maintenant, et si vous avez besoin de deux, trois ou plusieurs associations?  Il est trop lent √† ex√©cuter en temps r√©el. <br><br>  Le probl√®me du d√©ploiement des fans lorsque la demande de diffusion est inh√©rent √† la plupart des bases de donn√©es non natives de graphiques, y compris le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">graphique Janus</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Twitter FlockDB</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Facebook TAO</a> . <br><br>  Les associations distribu√©es sont un probl√®me complexe.  Les bases de donn√©es graphiques natives permettent d'√©viter ce probl√®me en stockant un ensemble de donn√©es universel sur un serveur (base de donn√©es autonome) et en effectuant toutes les jointures sans acc√©der √† d'autres serveurs.  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Neo4j</a> fait cela. <br><br><h1>  Dgraph: unions avec une profondeur arbitraire </h1><br>  Ayant termin√© les travaux sur Cerebro et ayant une exp√©rience dans la construction d'un syst√®me de gestion de graphes, j'ai particip√© au projet Dgraph, devenant l'un des trois chefs de projets techniques.  Nous avons appliqu√© des concepts innovants qui ont r√©solu le probl√®me de la profondeur de l'union. <br><br>  En particulier, Dgraph s√©pare les donn√©es du graphique afin que chaque jointure puisse √™tre enti√®rement effectu√©e par une machine.  En revenant √† l' <code>subject-predicate-object</code> (SPO), chaque instance de Dgraph contient tous les sujets et objets correspondant √† chaque pr√©dicat de cette instance.  Plusieurs pr√©dicats sont stock√©s dans une instance, chacun √©tant compl√®tement stock√©. <br><br>  <b>Cela nous a permis de r√©pondre aux demandes avec une profondeur arbitraire d'associations</b> , √©liminant ainsi le probl√®me du d√©ploiement des fans pendant la diffusion.  Par exemple, la requ√™te [les habitants de SF qui mangent des sushis] g√©n√©rera un <i>maximum de deux appels r√©seau</i> dans la base de donn√©es, quelle que soit la taille du cluster.  Le premier d√©fi va trouver toutes les personnes qui vivent √† San Francisco.  La deuxi√®me demande enverra cette liste pour croiser toutes les personnes qui mangent des sushis.  Ensuite, vous pouvez ajouter des restrictions ou des extensions suppl√©mentaires, chaque √©tape ne pr√©voit toujours pas plus d'un appel r√©seau. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/428/283/668/428283668a3ede1b3a7f3b142b648888.png"><br>  Cela cr√©e le probl√®me des tr√®s gros pr√©dicats sur le m√™me serveur, mais il peut √™tre r√©solu en divisant davantage les pr√©dicats entre deux ou plusieurs instances √† mesure que la taille augmente.  Dans le pire des cas, un pr√©dicat sera divis√© sur l'ensemble du cluster.  Mais cela ne se produira que dans une situation fantastique, lorsque toutes les donn√©es correspondent √† un seul pr√©dicat.  Dans d'autres cas, cette approche peut r√©duire consid√©rablement le retard des demandes dans les syst√®mes r√©els. <br><br>  Le sharding n'√©tait pas la seule innovation de Dgraph.  Tous les objets ont re√ßu des identifiants entiers, ils ont √©t√© tri√©s et enregistr√©s sous la forme d'une liste (liste de publication) pour traverser rapidement ces listes plus tard.  Cela vous permet de filtrer rapidement pendant la fusion, de trouver des liens communs, etc. Les id√©es des moteurs de recherche Google sont √©galement utiles ici. <br><br><h1>  Combiner tous les blocs OneBox via Plasma </h1><br>  <b>Le dgraph de Google n'√©tait pas une base de donn√©es</b> .  C'√©tait l'un des sous-syst√®mes, qui r√©pondait √©galement aux mises √† jour.  Elle avait donc besoin d'indexation.  J'ai une vaste exp√©rience de travail avec des syst√®mes d'indexation incr√©mentielle en temps r√©el fonctionnant sous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">caf√©ine</a> . <br><br>  J'ai commenc√© un projet d'unification de tous les OneBox dans ce syst√®me d'indexation de graphiques, y compris la m√©t√©o, les horaires de vol, les √©v√©nements, etc.  Vous ne connaissez peut-√™tre pas le terme OneBox, mais vous l'avez certainement vu - il s'agit d'une fen√™tre distincte qui appara√Æt lorsque certains types de requ√™tes sont ex√©cut√©es, o√π Google renvoie des informations plus riches.  Pour voir OneBox en action, essayez [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">m√©t√©o en sf</a> ]. <br><br>  Auparavant, chaque OneBox fonctionnait sur un backend autonome et √©tait soutenu par diff√©rents groupes de d√©veloppement.  <b>Il y avait un riche ensemble de donn√©es structur√©es, mais les unit√©s OneBox n'ont pas √©chang√© de donn√©es entre elles.</b>  Premi√®rement, diff√©rents backends ont augment√© les co√ªts de main-d'≈ìuvre √† plusieurs reprises.  Deuxi√®mement, le manque de partage d'informations a limit√© l'√©ventail des demandes auxquelles Google pouvait r√©pondre. <br><br>  Par exemple, [les √©v√©nements de SF] peuvent afficher des √©v√©nements et [la m√©t√©o de SF] peut afficher la m√©t√©o.  Mais si [les √©v√©nements de SF] comprenaient qu'il pleuvait maintenant, alors vous pourriez filtrer ou trier les √©v√©nements par type "√† l'int√©rieur" ou "√† l'ext√©rieur" ( <i>peut-√™tre vaut-il mieux aller au cin√©ma plut√¥t que le football sous une pluie battante)</i> ) <br><br>  Avec l'aide de l'√©quipe Metaweb, nous avons commenc√© √† convertir toutes ces donn√©es au format SPO et √† les indexer avec un seul syst√®me.  Je l'ai nomm√© <b>Plasma, un moteur d'indexation de graphiques en temps r√©el</b> pour servir Dgraph. <br><br><h1>  Gestion de Leapfrog </h1><br>  Comme Cerebro, le projet Plasma a re√ßu peu de ressources, mais a continu√© de gagner du terrain.  Finalement, lorsque la direction a r√©alis√© que les blocs OneBox faisaient in√©vitablement partie de notre projet, elle a imm√©diatement d√©cid√© de mettre les <i>¬´bonnes personnes¬ª</i> pour g√©rer le syst√®me graphique.  Au plus fort du jeu politique, trois dirigeants ont √©t√© remplac√©s, chacun n'ayant aucune exp√©rience de travail avec les graphiques. <br><br>  Pendant ce saut de Dgraph, les chefs de projet de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spanner</a> ont appel√© Dgraph <i>un</i> syst√®me <i>trop complexe</i> .  Pour r√©f√©rence, Spanner est une base de donn√©es SQL distribu√©e dans le monde entier qui a besoin de sa propre montre GPS pour garantir la coh√©rence globale.  <i>L'ironie de tout √ßa souffle encore sur mon toit.</i> <br><br>  Dgraph a √©t√© annul√©, Plasma a surv√©cu.  Et √† la t√™te du projet, ils ont mis une nouvelle √©quipe avec un nouveau leader, avec une hi√©rarchie claire et relevant du PDG.  La nouvelle √©quipe - avec une mauvaise compr√©hension des graphiques et des probl√®mes associ√©s - a d√©cid√© de cr√©er un sous-syst√®me d'infrastructure bas√© sur l'index de recherche Google existant (comme je l'ai fait pour Cerebro).  J'ai sugg√©r√© d'utiliser le syst√®me que j'avais d√©j√† fait pour Cerebro, mais il a √©t√© rejet√©.  J'ai modifi√© Plasma pour explorer et √©tendre chaque n≈ìud de connaissances en plusieurs niveaux afin que le syst√®me puisse le voir comme un document Web.  Ils ont appel√© ce syst√®me TS ( <i>abr√©viation</i> ). <br><br>  <b>Cela signifiait que le nouveau sous-syst√®me ne serait pas en mesure d'effectuer des associations profondes.</b>  Encore une fois, c'est une mal√©diction que je vois dans de nombreuses entreprises parce que les ing√©nieurs partent de la mauvaise id√©e que ¬´les graphiques sont un probl√®me simple qui peut √™tre r√©solu en construisant simplement une couche au-dessus d'un autre syst√®me¬ª. <br><br>  Quelques mois plus tard, en mai 2013, j'ai quitt√© Google apr√®s avoir travaill√© sur Dgraph / Plasma pendant environ deux ans. <br><br><h1>  Postface </h1><br><ul><li>  Quelques ann√©es plus tard, la section ¬´Internet Search Infrastructure¬ª a √©t√© renomm√©e ¬´Internet Search Infrastructure and Knowledge Graph¬ª, et le chef √† qui j'ai montr√© √† Cerebro a dirig√© la direction ¬´Knowledge Graph¬ª expliquant comment ils ont l'intention de remplacer les simples liens de connaissances bleus pour r√©pondre directement aux questions des utilisateurs aussi souvent que possible. <br></li><li>  Lorsque l'√©quipe de Shanghai travaillant sur Cerebro √©tait sur le point de le mettre en production, le projet leur a √©t√© retir√© et confi√© √† la division de New York.  Finalement, il a √©t√© lanc√© sous le nom de Knowledge Strip.  Si vous recherchez [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">films de tom hanks</a> ], vous le verrez en haut.  Il s'est un peu am√©lior√© depuis le premier lancement, mais ne prend toujours pas en charge le niveau de filtrage et de tri qui a √©t√© d√©fini dans Cerebro. <br></li><li>  Les trois responsables techniques qui ont travaill√© sur Dgraph (y compris moi-m√™me) ont finalement quitt√© Google.  Pour autant que je sache, les autres travaillent maintenant chez Microsoft et LinkedIn. <br></li><li>  J'ai r√©ussi √† obtenir deux promotions chez Google, et je devais en obtenir une troisi√®me lorsque j'ai quitt√© l'entreprise en tant qu'ing√©nieur logiciel senior (ing√©nieur logiciel senior). <br></li><li>  √Ä en juger par certaines rumeurs fragmentaires, la version actuelle de TS est en fait tr√®s proche de la conception du syst√®me de graphes de Cerebro, et chaque sujet, pr√©dicat et objet a un index.  <b>Par cons√©quent, elle souffre toujours du probl√®me de la profondeur de l'unification.</b> <br></li><li>  Le plasma a depuis √©t√© r√©√©crit et renomm√©, mais il continue de fonctionner comme un syst√®me d'indexation de graphiques en temps r√©el pour TS.  Ensemble, ils continuent de publier et de traiter toutes les donn√©es structur√©es sur Google, y compris le Knowledge Graph. <br></li><li>  <b>L'incapacit√© de Google √† r√©aliser des unions profondes est visible dans de nombreux endroits.</b>  Par exemple, nous ne voyons toujours pas l'√©change de donn√©es entre les blocs OneBox: [les villes les plus pluvieuses en Asie] ne donne pas une liste de villes, bien que toutes les donn√©es soient dans la colonne des connaissances (√† la place, la page Web est cit√©e dans les r√©sultats de la recherche);  [les √©v√©nements de SF] ne peuvent pas √™tre filtr√©s par la m√©t√©o;  Les r√©sultats des [pr√©sidents am√©ricains] ne sont pas tri√©s, filtr√©s ou d√©velopp√©s par d'autres faits: leurs enfants ou les √©coles o√π ils ont √©tudi√©.  Je crois que c'√©tait l'une des raisons de l'arr√™t du support <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Freebase</a> . </li></ul><br><h1>  Dgraph: Phoenix Bird </h1><br>  Deux ans apr√®s avoir quitt√© Google, j'ai d√©cid√© de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©velopper Dgraph</a> .  Dans d'autres entreprises, je vois la m√™me ind√©cision concernant les graphiques que dans Google.  Il y avait de nombreuses solutions inachev√©es dans l'espace graphique, en particulier, de nombreuses solutions personnalis√©es assembl√©es √† la h√¢te sur des bases de donn√©es relationnelles ou NoSQL, ou comme l'une des nombreuses fonctionnalit√©s des bases de donn√©es multimod√®les.  S'il existait une solution native, elle souffrait de probl√®mes d'√©volutivit√©. <br><br>  Rien de ce que j'ai vu avait une histoire coh√©rente avec un design productif et √©volutif.  <b>Construire une base de donn√©es graphique √©volutive horizontalement avec une faible latence et des jointures de profondeur arbitraires est une t√¢che extr√™mement difficile</b> , et je voulais m'assurer que nous avons construit le Dgraph correctement. <br><br>  L'√©quipe Dgraph a pass√© les trois derni√®res ann√©es non seulement √† √©tudier ma propre exp√©rience, mais aussi √† investir beaucoup de ses propres efforts dans la conception - la cr√©ation d'une base de donn√©es de graphiques qui n'a pas d'analogues sur le march√©.  Ainsi, les entreprises ont la possibilit√© d'utiliser une solution fiable, √©volutive et productive au lieu d'une autre solution semi-finie. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr440938/">https://habr.com/ru/post/fr440938/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr440922/index.html">Fonctionnement de Level Flow dans Uncharted 4 et The Last Of Us</a></li>
<li><a href="../fr440924/index.html">Historique de la deuxi√®me place de la Coupe AI russe 2018: CodeBall</a></li>
<li><a href="../fr440928/index.html">D√©terminez votre bio-√¢ge sur le profil</a></li>
<li><a href="../fr440930/index.html">J'ai men√© une centaine d'entretiens, refus√© √† des centaines de personnes - et c'est seulement alors que j'ai appris √† interviewer</a></li>
<li><a href="../fr440932/index.html">Un peu sur l'informatique d√©cisionnelle</a></li>
<li><a href="../fr440940/index.html">Redux - r√©vision de la logique et des actions du r√©ducteur</a></li>
<li><a href="../fr440942/index.html">BYD annonce une croissance des ventes de v√©hicules √©lectriques rechargeables</a></li>
<li><a href="../fr440944/index.html">Comment √©crire rapidement un site Web ou une application Web et ne pas se laisser prendre aux collectionneurs</a></li>
<li><a href="../fr440946/index.html">Rollup: vous pouvez d√©j√† cr√©er des applications</a></li>
<li><a href="../fr440948/index.html">Ne soyez pas intelligent avec les formulaires de connexion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>