<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§úüèø üèáüèΩ üìì Verifica√ß√£o do c√≥digo-fonte das bibliotecas .NET Core pelo analisador est√°tico PVS-Studio üíø üëàüèΩ üñêÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As bibliotecas do .NET Core s√£o um dos projetos C # mais populares no GitHub. N√£o √© de surpreender, dada a sua grande popularidade e usabilidade. √â ai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verifica√ß√£o do c√≥digo-fonte das bibliotecas .NET Core pelo analisador est√°tico PVS-Studio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/463537/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/-a/bm/pb/-abmpb2yelga7y1zu59bejm6vgo.png" alt="Quadro 19"></div><br>  As bibliotecas do .NET Core s√£o um dos projetos C # mais populares no GitHub.  N√£o √© de surpreender, dada a sua grande popularidade e usabilidade.  √â ainda mais interessante tentar descobrir quais cantos escuros podem ser encontrados no c√≥digo-fonte dessas bibliotecas, o que tentaremos fazer usando o analisador est√°tico PVS-Studio.  Voc√™ acha que conseguiu descobrir alguma coisa interessante no final? <br><a name="habracut"></a><br>  Fui a este artigo por mais de um ano e meio.  Em algum momento, pensei em que as bibliotecas do .NET Core s√£o um petisco, e dar uma olhada nelas ser√° interessante.  V√°rias vezes que verifiquei o projeto, o analisador encontrou lugares cada vez mais interessantes, mas n√£o foi al√©m de uma rolagem r√°pida pela lista de avisos.  E aqui est√° - pronto!  O projeto est√° marcado, o artigo est√° na sua frente. <br><br><h2>  Mais sobre o projeto e a an√°lise </h2><br>  Se voc√™ est√° ansioso para mergulhar na an√°lise do c√≥digo - voc√™ pode pular esta se√ß√£o, mas eu realmente gostaria que voc√™ o lesse - aqui eu falo um pouco mais sobre o projeto e o analisador, bem como sobre como eu analisei e reproduzi os erros. <br><br><h3>  Projeto Auditado </h3><br>  Provavelmente, seria poss√≠vel n√£o dizer o que s√£o CoreFX (bibliotecas do .NET Core), mas, se voc√™ n√£o ouviu, a descri√ß√£o est√° abaixo.  N√£o o reformulei e o tirei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">da p√°gina do projeto no GitHub</a> , onde voc√™ tamb√©m pode baixar os fontes. <br><br>  Descri√ß√£o: <i>este reposit√≥rio cont√©m a implementa√ß√£o da biblioteca (chamada "CoreFX") para o .NET Core.</i>  <i>Inclui System.Collections, System.IO, System.Xml e muitos outros componentes.</i>  <i>O reposit√≥rio correspondente do .NET Core Runtime (chamado "CoreCLR") cont√©m a implementa√ß√£o de tempo de execu√ß√£o do .NET Core.</i>  <i>Inclui RyuJIT, o .NET GC e muitos outros componentes.</i>  <i>O c√≥digo da biblioteca espec√≠fica do tempo de execu√ß√£o (System.Private.CoreLib) fica no reposit√≥rio CoreCLR.</i>  <i>Ele precisa ser constru√≠do e versionado em conjunto com o tempo de execu√ß√£o.</i>  <i>O restante do CoreFX √© independente da implementa√ß√£o do tempo de execu√ß√£o e pode ser executado em qualquer tempo de execu√ß√£o .NET compat√≠vel (por exemplo, CoreRT)</i> . <br><br><h3>  Analisador usado e m√©todo de an√°lise </h3><br>  Eu verifiquei o c√≥digo fonte usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">analisador est√°tico PVS-Studio</a> .  Em geral, o PVS-Studio pode analisar n√£o apenas o c√≥digo C #, mas tamb√©m C, C ++, Java.  At√© agora, a an√°lise do c√≥digo C # funciona apenas no Windows, enquanto o c√≥digo em C, C ++, Java voc√™ pode analisar no Windows, Linux e macOS. <br><br>  Normalmente, uso o plug-in PVS-Studio para o Visual Studio para testar projetos C # (vers√µes 2010-2019 s√£o suportadas), pois essa √© provavelmente a maneira mais f√°cil e conveniente de analisar: abra uma solu√ß√£o, inicie a an√°lise, trabalhe com uma lista de avisos.  Com o CoreFX, no entanto, as coisas ficaram um pouco mais complicadas. <br><br>  O fato √© que o projeto n√£o possui um √∫nico arquivo .sln, portanto, a abertura no Visual Studio e a realiza√ß√£o de uma an√°lise completa usando o plug-in PVS-Studio falhar√£o.  Provavelmente, √© bom - eu realmente n√£o sei como o Visual Studio lidaria com uma solu√ß√£o desse tamanho. <br><br>  No entanto, n√£o houve problemas com a an√°lise, pois o kit de distribui√ß√£o PVS-Studio inclui uma vers√£o em linha de comando do analisador para projetos MSBuild (e, de fato, .sln).  Tudo o que era necess√°rio para mim era escrever um pequeno script que executasse ‚ÄúPVS-Studio_Cmd.exe‚Äù para cada .sln no diret√≥rio CoreFX e coloque os resultados da an√°lise em um diret√≥rio separado (indicado pelo sinalizador de inicializa√ß√£o do analisador). <br><br>  Voila!  - na sa√≠da eu tenho um conjunto de logs, que tem muitas coisas interessantes.  Se desejado, os logs podem ser combinados usando o utilit√°rio PlogConverter, que acompanha o kit de distribui√ß√£o.  Mas era mais conveniente trabalhar com logs individuais, por isso n√£o comecei a combin√°-los. <br><br>  Ao descrever alguns erros, refiro-me √† documenta√ß√£o de docs.microsoft.com e aos pacotes NuGet dispon√≠veis para download em nuget.org.  Admito que o c√≥digo descrito na documenta√ß√£o / encontrado nos pacotes possa diferir ligeiramente do analisado.  No entanto, ser√° muito estranho se, por exemplo, a documenta√ß√£o n√£o contiver uma descri√ß√£o das exce√ß√µes geradas para v√°rios dados de entrada e elas aparecerem na nova vers√£o do pacote - concordar que isso ser√° uma surpresa duvidosa.  A reprodu√ß√£o de erros nos pacotes do NuGet nos mesmos dados de entrada usados ‚Äã‚Äãpara as bibliotecas de depura√ß√£o mostra que o problema n√£o √© novo e, mais importante, que pode ser "tocado" sem criar o projeto a partir da origem. <br><br>  Assim, assumindo a possibilidade de alguma sincronia te√≥rica do c√≥digo, acho permitido fazer refer√™ncia √† descri√ß√£o dos m√©todos correspondentes no docs.microsoft.com e √† reprodu√ß√£o de problemas nos pacotes do nuget.org. <br><br>  Tamb√©m observo que a descri√ß√£o dos links fornecidos, bem como as informa√ß√µes (coment√°rios) nos pacotes (em outras vers√µes) podem mudar durante a reda√ß√£o do artigo. <br><br><h3>  Outros projetos comprovados </h3><br>  A prop√≥sito, este n√£o √© um artigo √∫nico, escrevemos outros artigos sobre a verifica√ß√£o de projetos, cuja lista <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pode ser encontrada aqui</a> .  Al√©m disso, no site coletamos n√£o apenas artigos sobre a an√°lise de projetos, mas tamb√©m v√°rios artigos t√©cnicos sobre C, C ++, C #, Java, al√©m de apenas notas interessantes.  Voc√™ pode encontrar tudo isso no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">blog</a> . <br><br>  Meu colega testou anteriormente as bibliotecas do .NET Core em 2015.  Os resultados da an√°lise anterior podem ser encontrados no artigo correspondente: " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Verifica√ß√£o de ano novo das bibliotecas do .NET Core (CoreFX)</a> ". <br><br><h2>  Erros descobertos, lugares suspeitos e interessantes </h2><br>  Como sempre, para maior interesse, sugiro que voc√™ primeiro procure por erros nos fragmentos e s√≥ ent√£o leia o aviso do analisador e a descri√ß√£o do problema. <br><br>  Por conveni√™ncia, separei explicitamente os fragmentos em quest√£o usando r√≥tulos do formul√°rio <b>Problema N</b> - √© mais f√°cil entender onde termina a descri√ß√£o de um erro e come√ßa a an√°lise do outro.  Sim, e se referir a fragmentos espec√≠ficos tamb√©m √© mais f√°cil. <br><br>  <b>Edi√ß√£o 1</b> <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Principal</span></span> : <span class="hljs-title"><span class="hljs-title">IDisposable</span></span> { .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PrincipalContext context</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( context.ContextType == ContextType.Machine || _ctx.ContextType == ContextType.Machine) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidOperationException( SR.SaveToNotSupportedAgainstMachineStore); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Debug.Assert(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.unpersisted == <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidOperationException(SR.NullArguments); } .... } .... }</code> </pre> <br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> O objeto 'context' foi usado antes de ser verificado com rela√ß√£o a nulo.  Verifique as linhas: 340, 346. Principal.cs 340 <br><br>  Os desenvolvedores indicam explicitamente que o valor <i>nulo</i> do par√¢metro <i>context</i> n√£o √© v√°lido e desejam enfatizar isso com uma exce√ß√£o do tipo <i>InvalidOperationException</i> .  No entanto, um pouco mais alto, na condi√ß√£o anterior, h√° uma desreferencia√ß√£o incondicional do link de <i>contexto</i> - <i>context.ContextType</i> .  Como resultado, se o valor do <i>contexto</i> for <i>nulo</i> , uma exce√ß√£o do tipo <i>NullReferenceException</i> ser√° <i>lan√ßada em</i> vez da <i>InvalidOperationExcetion</i> esperada. <br><br>  Vamos tentar reproduzir o problema.  Conecte a biblioteca apropriada ( <i>System.DirectoryServices.AccountManagement</i> ) ao projeto e execute o seguinte c√≥digo: <br><br><pre> <code class="cs hljs">GroupPrincipal groupPrincipal = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GroupPrincipal(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PrincipalContext(ContextType.Machine)); groupPrincipal.Save(<span class="hljs-literal"><span class="hljs-literal">null</span></span>);</code> </pre> <br>  <i>GroupPrincipal</i> √© o sucessor da classe abstrata <i>Principal</i> , que cont√©m a implementa√ß√£o do m√©todo <i>Save de</i> que precisamos.  Executamos o c√≥digo para execu√ß√£o e vemos o que era necess√°rio para provar. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/290/09a/2cc/29009a2cc3a5408808b9814d48bb0dea.png" alt="Quadro 1"></div><br><br>  Por divers√£o, voc√™ pode tentar baixar o pacote apropriado do NuGet e tentar repetir o problema da mesma maneira.  Instalei a vers√£o do pacote 4.5.0 e obtive o resultado esperado. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3de/891/b4a/3de891b4a4ba8100bb63af19e4455842.png" alt="Quadro 2"></div><br><br>  <b>Edi√ß√£o 2</b> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> SearchResultCollection </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FindAll</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> findMoreThanOne</span></span></span><span class="hljs-function">)</span></span> { searchResult = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; DirectoryEntry clonedRoot = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_assertDefaultNamingContext == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { clonedRoot = SearchRoot.CloneBrowsable(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { clonedRoot = SearchRoot.CloneBrowsable(); } .... }</code> </pre> <br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3004</a> A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">instru√ß√£o</a> 'then' √© equivalente √† instru√ß√£o 'else'.  DirectorySearcher.cs 629 <br><br>  Independentemente da veracidade da condi√ß√£o <i>_assertDefaultNamingContext == null</i> , as mesmas a√ß√µes ser√£o executadas, desde <i>ent√£o</i> e <i>as</i> ramifica√ß√µes da <i>instru√ß√£o if</i> ter√£o os mesmos corpos.  Ou deve haver outra a√ß√£o em algum ramo, ou voc√™ pode omitir a <i>instru√ß√£o if</i> para n√£o confundir os programadores e o analisador. <br><br>  <b>Edi√ß√£o 3</b> <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">DirectoryEntry</span></span> : <span class="hljs-title"><span class="hljs-title">Component</span></span> { .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RefreshCache</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] propertyNames</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>[] names = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>[propertyNames.Length]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; propertyNames.Length; i++) names[i] = propertyNames[i]; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_propertyCollection != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; propertyNames != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) .... .... } .... }</code> </pre> <br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> O objeto 'propertyNames' foi usado antes de ser verificado com valor nulo.  Verifique as linhas: 990, 1004. DirectoryEntry.cs 990 <br><br>  Mais uma vez, vemos um procedimento estranho.  O m√©todo possui uma verifica√ß√£o <i>propertyNames! = Null</i> , ou seja,  os desenvolvedores garantem que o m√©todo retorne <i>nulo</i> .  Aqui est√£o logo acima, voc√™ pode observar v√°rios acessos a essa refer√™ncia potencialmente nula - <i>propertyNames.Length</i> e <i>propertyNames [i]</i> .  O resultado √© bastante previs√≠vel - uma exce√ß√£o do tipo <i>NullReferenceExcepption</i> ocorrer√° se uma refer√™ncia nula for passada para o m√©todo. <br><br>  Que coincid√™ncia o <i>RefreshCache</i> √© um m√©todo p√∫blico em uma classe p√∫blica.  Tente repetir o problema?  Para fazer isso, conecte ao projeto a biblioteca desejada - <i>System.DirectoryServices</i> - e escreva o c√≥digo assim: <br><br><pre> <code class="cs hljs">DirectoryEntry de = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DirectoryEntry(); de.RefreshCache(<span class="hljs-literal"><span class="hljs-literal">null</span></span>);</code> </pre> <br>  Execute o c√≥digo para execu√ß√£o e veja a imagem esperada. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2d9/040/d0a/2d9040d0ae8d91394c476d6788aa7275.png" alt="Quadro 3"></div><br><br>  Por divers√£o, voc√™ pode tentar reproduzir o problema na vers√£o do pacote NuGet.  Conectamos o pacote <i>System.DirectoryServices</i> ao projeto NuGet (usei a vers√£o 4.5.0) e executamos o c√≥digo j√° familiar para execu√ß√£o.  O resultado √© menor. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0d6/31e/309/0d631e3096fa8ba00b41fe10ad1001db.png" alt="Quadro 4"></div><br><br>  <b>Edi√ß√£o 4</b> <br><br>  Agora iremos do oposto - primeiro tente escrever o c√≥digo que usa uma inst√¢ncia da classe e depois olhe dentro.  Vejamos a estrutura de <i>System.Drawing.CharacterRange</i> da biblioteca <i>System.Drawing.Common</i> e o pacote NuGet com o mesmo nome. <br><br>  O c√≥digo usado ser√° o seguinte: <br><br><pre> <code class="cs hljs">CharacterRange range = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CharacterRange(); <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> eq = range.Equals(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); Console.WriteLine(eq);</code> </pre> <br>  Apenas para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">garantir</a> a atualiza√ß√£o da mem√≥ria, voltaremos para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">docs.microsoft.com</a> para lembrar qual valor de retorno √© esperado da express√£o <i>obj.Equals (null)</i> : <br><br>  <i>As instru√ß√µes a seguir devem ser verdadeiras para todas as implementa√ß√µes do m√©todo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>Equals (Object)</i></a> .</i>  <i>Na lista, x, ye z representam refer√™ncias a objetos que n√£o s√£o nulos.</i> <br><br>  <i>....</i> <br><br>  <b><i>x.Equals (null) retorna false.</i></b> <br><br>  Voc√™ acha que o texto "False" ser√° exibido no console?  Claro que n√£o, isso seria f√°cil demais.  :) Executamos o c√≥digo e olhamos para o resultado. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e87/159/8f6/e871598f6ca5dacdb4a4fae7b5776520.png" alt="Quadro 5"></div><br>  Esta foi a conclus√£o ao executar o c√≥digo acima usando o pacote NuGet <i>System.Drawing.Common</i> vers√£o 4.5.1.  Executamos o mesmo c√≥digo com a vers√£o de depura√ß√£o da biblioteca e vemos o seguinte: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e9/f27/f1a/6e9f27f1a78768078fdd940e0a4be0ad.png" alt="Quadro 6"></div><br><br>  Agora, vejamos o c√≥digo-fonte - a implementa√ß√£o do m√©todo <i>Equals</i> na estrutura <i>CharacterRange</i> e o aviso do analisador: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Equals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> obj</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (obj.GetType() != <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(CharacterRange)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; CharacterRange cr = (CharacterRange)obj; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((_first == cr.First) &amp;&amp; (_length == cr.Length)); }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aviso do</a> <b>PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3115 A</a> passagem de 'null' para o m√©todo 'Equals' n√£o deve resultar em 'NullReferenceException'.  CharacterRange.cs 56 <br><br>  Vemos o que precisamos provar - o par√¢metro <i>obj</i> √© processado incorretamente, por causa do qual uma exce√ß√£o do tipo <i>NullReferenceException</i> ocorre ao chamar o m√©todo de inst√¢ncia <i>GetType</i> na express√£o condicional. <br><br>  <b>Edi√ß√£o 5</b> <br><br>  Ao explorar esta biblioteca, considere outro lugar interessante - o m√©todo <i>Icon.Save</i> .  Antes do estudo, consulte a descri√ß√£o do m√©todo. <br><br>  N√£o h√° descri√ß√£o do m√©todo: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ffd/fef/402/ffdfef402f77c462c94b9ff284f42e0c.png" alt="Quadro 7"></div><br>  Passamos para docs.microsoft.com - " <a href="">M√©todo Icon.Save (Stream)</a> ".  No entanto, tamb√©m n√£o h√° restri√ß√µes nos valores de entrada e n√£o h√° informa√ß√µes sobre as exce√ß√µes geradas. <br><br>  Agora vamos para a pesquisa de c√≥digo. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Icon</span></span> : <span class="hljs-title"><span class="hljs-title">MarshalByRefObject</span></span>, <span class="hljs-title"><span class="hljs-title">ICloneable</span></span>, <span class="hljs-title"><span class="hljs-title">IDisposable</span></span>, <span class="hljs-title"><span class="hljs-title">ISerializable</span></span> { .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Save</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Stream outputStream</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_iconData != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { outputStream.Write(_iconData, <span class="hljs-number"><span class="hljs-number">0</span></span>, _iconData.Length); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (outputStream == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-string"><span class="hljs-string">"dataStream"</span></span>); .... } } .... }</code> </pre> <br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> O objeto ' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">outputStream</a> ' foi usado antes de ser verificado com valor nulo.  Verifique as linhas: 654, 672. Icon.Windows.cs 654 <br><br>  Novamente, a hist√≥ria que j√° conhecemos √© a poss√≠vel desreferencia√ß√£o de uma refer√™ncia nula, uma vez que o par√¢metro do m√©todo √© desreferenciado sem verificar se √© <i>nulo</i> .  Mais uma vez, uma boa combina√ß√£o de circunst√¢ncias - tanto a classe quanto o m√©todo - √© p√∫blica, o que significa que voc√™ pode tentar reproduzir o problema. <br><br>  A tarefa √© simples - trazer a execu√ß√£o do c√≥digo para a express√£o <i>outputStream.Write (_iconData, 0, _iconData.Length);</i>  enquanto mant√©m o valor da vari√°vel <i>outputStream</i> - <i>null</i> .  Para fazer isso, basta que a condi√ß√£o <i>_iconData! = Null seja</i> atendida. <br><br>  Vejamos o construtor p√∫blico mais simples: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Icon</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">this</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fileName, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br>  Ele simplesmente delega o trabalho para outro construtor.  Bem, olhe mais longe - o construtor usado aqui. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Icon</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> width, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> height</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">this</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (FileStream f = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read)) { Debug.Assert(f != <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"File.OpenRead returned null instead of throwing an exception"</span></span>); _iconData = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)f.Length]; f.Read(_iconData, <span class="hljs-number"><span class="hljs-number">0</span></span>, _iconData.Length); } Initialize(width, height); }</code> </pre> <br>  Aqui est√° o que voc√™ precisa.  Ap√≥s chamar este construtor, se lermos com √™xito os dados do arquivo e se n√£o ocorrerem falhas no m√©todo <i>Initialize</i> , o campo <i>_iconData</i> conter√° um link para algum objeto, e √© disso que precisamos. <br><br>  Acontece que, para reproduzir o problema, voc√™ precisa criar uma inst√¢ncia da classe <i>Icon</i> com o √≠cone real e, em seguida, chamar o m√©todo <i>Save</i> , passando <i>nulo</i> como argumento, o que faremos.  O c√≥digo pode parecer, por exemplo, o seguinte: <br><br><pre> <code class="cs hljs">Icon icon = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Icon(<span class="hljs-string"><span class="hljs-string">@"D:\document.ico"</span></span>); icon.Save(<span class="hljs-literal"><span class="hljs-literal">null</span></span>);</code> </pre> <br>  O resultado da execu√ß√£o √© esperado. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b37/fdb/dd1/b37fdbdd1288c054fdaaa0add0ffcfcf.png" alt="Quadro 8"></div><br>  <b>Edi√ß√£o 6</b> <br><br>  Continuamos a revis√£o e vamos para a biblioteca <i>System.Management</i> .  Tente encontrar tr√™s diferen√ßas entre as a√ß√µes executadas no <i>caso</i> <i>CimType.UInt32</i> e o restante do <i>caso</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConvertToNumericValueAndAddToArray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> retFunctionName = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; enumType = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(cimType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CimType.UInt8: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CimType.SInt8: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CimType.SInt16: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CimType.UInt16: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CimType.SInt32: arrayToAdd.Add(System.Convert.ToInt32( numericValue, (IFormatProvider)CultureInfo.InvariantCulture .GetFormat(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)))); retFunctionName = <span class="hljs-string"><span class="hljs-string">"ToInt32"</span></span>; enumType = <span class="hljs-string"><span class="hljs-string">"System.Int32"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> CimType.UInt32: arrayToAdd.Add(System.Convert.ToInt32( numericValue, (IFormatProvider)CultureInfo.InvariantCulture .GetFormat(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)))); retFunctionName = <span class="hljs-string"><span class="hljs-string">"ToInt32"</span></span>; enumType = <span class="hljs-string"><span class="hljs-string">"System.Int32"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> retFunctionName; }</code> </pre> <br>  Obviamente, n√£o h√° diferen√ßas sobre as quais o analisador alerta. <br><br>  <b>Aviso do PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3139</a> Dois ou mais ramifica√ß√µes de casos executam as mesmas a√ß√µes.  WMIGenerator.cs 5220 <br><br>  Esse estilo de c√≥digo n√£o √© muito claro para mim pessoalmente.  Se n√£o h√° erro aqui, acho que n√£o valia a pena espalhar a mesma l√≥gica em casos diferentes. <br><br>  <b>Edi√ß√£o 7</b> <br><br>  Biblioteca <i>Microsoft.CSharp</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> IList&lt;KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>&gt;&gt; QueryDynamicObject(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> obj) { .... List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; names = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(mo.GetDynamicMemberNames()); names.Sort(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (names != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { .... } .... }</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aviso do</a> <b>PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022 A</a> express√£o 'names! = Null' sempre √© verdadeira.  DynamicDebuggerProxy.cs 426 <br><br>  Provavelmente, eu poderia ignorar esse aviso junto com muitos semelhantes que foram emitidos pelos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">diagn√≥sticos V3022</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3063</a> .  Havia muitos (muito) cheques estranhos, mas isso de alguma forma afundou em minha alma.  √â poss√≠vel que, antes de comparar os <i>nomes de</i> vari√°veis ‚Äã‚Äãlocais com <i>nulos</i> a essa vari√°vel, al√©m de ser uma refer√™ncia ao objeto rec√©m-criado, ele tamb√©m chame o m√©todo de inst√¢ncia <i>Sort</i> .  Isso n√£o √© um erro, √© claro, mas o lugar √© interessante, quanto a mim. <br><br>  <b>Edi√ß√£o 8</b> <br><br>  Aqui est√° outro peda√ßo interessante de c√≥digo. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InsertChildNoGrow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Symbol child</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (sym?.nextSameName != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { sym = sym.nextSameName; } Debug.Assert(sym != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; sym.nextSameName == <span class="hljs-literal"><span class="hljs-literal">null</span></span>); sym.nextSameName = child; .... }</code> </pre> <br>  <b>Aviso do PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3042</a> NullReferenceException poss√≠vel.  O '?'  e '.'  operadores s√£o usados ‚Äã‚Äãpara acessar membros do objeto 'sym' SymbolStore.cs 56 <br><br>  Veja o que est√° acontecendo aqui.  O ciclo termina quando uma das duas condi√ß√µes √© atendida: <br><br><ul><li>  <i>sym == nulo</i> ; </li><li>  <i>sym.nextSameName == null</i> . </li></ul><br>  N√£o h√° problema com a segunda condi√ß√£o, o que n√£o pode ser dito sobre a primeira, pois abaixo √© uma chamada incondicional ao campo da inst√¢ncia <i>nextSameName</i> e, se <i>sym</i> for <i>nulo</i> , uma exce√ß√£o do tipo <i>NullReferenceException</i> ser√° lan√ßada <i>durante a chamada</i> . <br><br>  Voc√™ √© cego?  H√° tamb√©m uma chamada para <i>Debug.Assert</i> , onde √© verificado que <i>sym! = Null</i> "- algu√©m pode se opor.  Mas isso √© tudo sal!  Ao trabalhar na vers√£o do <i>Debug.Assert,</i> nada ajudar√° e, com o estado descrito acima, tudo o que obtemos √© uma <i>NullReferenceException</i> .  Al√©m disso, eu j√° vi um erro semelhante em outro projeto da Microsoft - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Roslyn</a> , onde havia uma situa√ß√£o muito semelhante com o <i>Debug.Assert</i> .  Um pouco distra√≠do por Roslyn com sua permiss√£o. <br><br>  O problema pode ser reproduzido usando <i>as</i> bibliotecas <i>Microsoft.CodeAnalysis</i> ou diretamente no Visual Studio usando o Syntax Visualizer.  No Visual Studio vers√£o 16.1.6 + Syntax Visualizer 1.0, esse problema ainda est√° sendo reproduzido. <br><br>  Para reproduzir, o seguinte c√≥digo √© suficiente: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">C1</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T1</span></span>, <span class="hljs-title"><span class="hljs-title">T2</span></span>&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { T1 val = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (val <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { } } }</code> </pre> <br>  Em seguida, no Syntax Visualizer, voc√™ precisa encontrar o n√≥ da √°rvore de sintaxe do tipo <i>ConstantPatternSyntax</i> , correspondente a <i>null</i> no c√≥digo, e solicitar <i>TypeSymbol</i> para ele. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/855/b9c/baa/855b9cbaa67c9a5909117d513e154293.png" alt="Quadro 9"></div><br>  Depois disso, o Visual Studio ser√° reiniciado.  Se formos ao Visualizador de Eventos, encontraremos informa√ß√µes sobre problemas nas bibliotecas: <br><br><pre> <code class="cs hljs">Application: devenv.exe Framework Version: v4<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.30319</span></span> Description: The process was terminated due to an unhandled exception. Exception Info: System.Resources.MissingManifestResourceException at System.Resources.ManifestBasedResourceGroveler .HandleResourceStreamMissing(System.String) at System.Resources.ManifestBasedResourceGroveler.GrovelForResourceSet( System.Globalization.CultureInfo, System.Collections.Generic.Dictionary<span class="hljs-string"><span class="hljs-string">'2 &lt;System.String,System.Resources.ResourceSet&gt;, Boolean, Boolean, System.Threading.StackCrawlMark ByRef) at System.Resources.ResourceManager.InternalGetResourceSet( System.Globalization.CultureInfo, Boolean, Boolean, System.Threading.StackCrawlMark ByRef) at System.Resources.ResourceManager.InternalGetResourceSet( System.Globalization.CultureInfo, Boolean, Boolean) at System.Resources.ResourceManager.GetString(System.String, System.Globalization.CultureInfo) at Roslyn.SyntaxVisualizer.DgmlHelper.My. Resources.Resources.get_SyntaxNodeLabel() ....</span></span></code> </pre> <br>  E sobre o problema com devenv.exe: <br><br><pre> <code class="cs hljs">Faulting application name: devenv.exe, version: <span class="hljs-number"><span class="hljs-number">16.1</span></span><span class="hljs-number"><span class="hljs-number">.29102</span></span><span class="hljs-number"><span class="hljs-number">.190</span></span>, time stamp: <span class="hljs-number"><span class="hljs-number">0x5d1c133b</span></span> Faulting module name: KERNELBASE.dll, version: <span class="hljs-number"><span class="hljs-number">10.0</span></span><span class="hljs-number"><span class="hljs-number">.18362</span></span><span class="hljs-number"><span class="hljs-number">.145</span></span>, time stamp: <span class="hljs-number"><span class="hljs-number">0xf5733ace</span></span> Exception code: <span class="hljs-number"><span class="hljs-number">0xe0434352</span></span> Fault offset: <span class="hljs-number"><span class="hljs-number">0x001133d2</span></span> ....</code> </pre> <br>  Tendo vers√µes de depura√ß√£o das bibliotecas Roslyn, voc√™ pode encontrar o local onde ocorreu a exce√ß√£o: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> Conversion </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ClassifyImplicitBuiltInConversionSlow</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> TypeSymbol source, TypeSymbol destination, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> HashSet&lt;DiagnosticInfo&gt; useSiteDiagnostics</span></span></span><span class="hljs-function">)</span></span> { Debug.Assert((<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>)source != <span class="hljs-literal"><span class="hljs-literal">null</span></span>); Debug.Assert((<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>)destination != <span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( source.SpecialType == SpecialType.System_Void || destination.SpecialType == SpecialType.System_Void) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Conversion.NoConversion; } .... }</code> </pre> <br>  Aqui, como no c√≥digo acima das bibliotecas do .NET Core, tamb√©m h√° uma verifica√ß√£o no <i>Debug.Assert</i> , que, no entanto, n√£o ajudou em nada ao usar as vers√µes de lan√ßamento das bibliotecas. <br><br>  <b>Edi√ß√£o 9</b> <br><br>  Distra√≠do um pouco - e basta, de volta √†s bibliotecas do .NET Core.  O pacote <i>System.IO.IsolatedStorage</i> cont√©m o seguinte c√≥digo interessante. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ContainsUnknownFiles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> directory</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (files.Length &gt; <span class="hljs-number"><span class="hljs-number">2</span></span> || ( (!IsIdFile(files[<span class="hljs-number"><span class="hljs-number">0</span></span>]) &amp;&amp; !IsInfoFile(files[<span class="hljs-number"><span class="hljs-number">0</span></span>]))) || (files.Length == <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; !IsIdFile(files[<span class="hljs-number"><span class="hljs-number">1</span></span>]) &amp;&amp; !IsInfoFile(files[<span class="hljs-number"><span class="hljs-number">1</span></span>])) ); }</code> </pre> <br>  <b>Aviso PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3088</a> A express√£o foi colocada entre par√™nteses duas vezes: ((express√£o)).  Um par de par√™nteses √© desnecess√°rio ou a impress√£o incorreta est√° presente.  IsolatedStorageFile.cs 839 <br><br>  Dizer que a formata√ß√£o do c√≥digo √© confusa √© n√£o dizer nada.  Olhando brevemente para este c√≥digo, eu diria que o operando esquerdo do primeiro operador ||  <i>&gt; files.Length&gt; 2</i> , o <i>caminho</i> certo √© entre par√™nteses.  Pelo menos o c√≥digo est√° formatado assim.  Olhando um pouco mais de perto, voc√™ pode entender que isso n√£o √© verdade.  De fato, o operando certo √© <i>((! IsIdFile (arquivos [0]) &amp;&amp;! IsInfoFile (arquivos [0])))</i> .  Na minha opini√£o, esse c√≥digo √© bastante confuso. <br><br>  <b>Edi√ß√£o 10</b> <br><br>  No release do PVS-Studio 7.03, foi adicionada a regra de diagn√≥stico V3138, que procura erros nas linhas interpoladas.  Mais precisamente, nas linhas com maior probabilidade de serem interpoladas, mas por causa do caractere <i>$</i> ausente, elas n√£o s√£o.  As bibliotecas <i>System.Net</i> encontraram v√°rias respostas interessantes a essa regra de diagn√≥stico. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CacheCredential</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SafeFreeCredentials newHandle</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { .... } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception e) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ExceptionCheck.IsFatal(e)) { NetEventSource.Fail(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">"Attempted to throw: {e}"</span></span>); } } }</code> </pre> <br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3138</a> O literal de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sequ√™ncia</a> cont√©m uma potencial express√£o interpolada.  Considere inspecionar: e.  SSPIHandleCache.cs 42 <br><br>  √â muito prov√°vel que o segundo argumento para o m√©todo <i>Fail</i> seja uma string interpolada, na qual a representa√ß√£o de string da exce√ß√£o <i>e</i> seja substitu√≠da.  No entanto, devido ao caractere <i>$</i> ausente, nenhuma representa√ß√£o de seq√º√™ncia da exce√ß√£o √© lan√ßada. <br><br>  <b>Edi√ß√£o 11</b> <br><br>  Eu conheci outro caso semelhante. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetDigestTokenForCredential</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (NetEventSource.IsEnabled) NetEventSource.Error(digestResponse, <span class="hljs-string"><span class="hljs-string">"Algorithm not supported: {algorithm}"</span></span>); .... }</code> </pre> <br>  <b>PVS-Studio Warning</b> : O literal da string <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3138</a> cont√©m uma express√£o interpolada em potencial.  Considere inspecionar: algoritmo.  AuthenticationHelper.Digest.cs 58 <br><br>  A situa√ß√£o √© semelhante √† descrita acima, o s√≠mbolo <i>$</i> √© pulado novamente - a linha errada vai para o m√©todo <i>Error</i> . <br><br>  <b>Edi√ß√£o 12</b> <br><br>  Pacote <i>System.Net.Mail</i> .  O m√©todo √© pequeno, vou traz√™-lo na √≠ntegra para que o erro seja um pouco mais interessante. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetContent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Stream stream</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (stream == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(stream)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_streamSet) { _stream.Close(); _stream = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; _streamSet = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } _stream = stream; _streamSet = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; _streamUsedOnce = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; TransferEncoding = TransferEncoding.Base64; }</code> </pre> <br>  <b>PVS-Studio Warning</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3008</a> A vari√°vel '_streamSet' recebe valores duas vezes sucessivamente.  Talvez isso seja um erro.  Verifique as linhas: 123, 119. MimePart.cs 123 <br><br>  A atribui√ß√£o dupla do valor da vari√°vel <i>_streamSet</i> parece estranha (a princ√≠pio - sob a condi√ß√£o; depois - fora).  A mesma hist√≥ria com zerar a vari√°vel <i>_stream</i> .  Como resultado, <i>_stream</i> ainda ser√° definido como <i>fluxo</i> e <i>_streamSet</i> como <i>true</i> . <br><br>  <b>Edi√ß√£o 13</b> <br><br>  Um local interessante da biblioteca <i>System.Linq.Expressions</i> , para a qual o analisador emitiu imediatamente 2 avisos.  Nesse caso, √© mais um recurso do que um bug, mas, no entanto, o m√©todo √© muito interessante ... <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// throws NRE when o is null protected static void NullCheck(object o) { if (o == null) { o.GetType(); } }</span></span></code> </pre> <br>  <b>Avisos do PVS-Studio</b> : <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3010</a> O valor de retorno da fun√ß√£o 'GetType' deve ser utilizado.  Instruction.cs 36 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3080</a> Poss√≠vel desrefer√™ncia nula.  Considere inspecionar 'o'.  Instruction.cs 36 </li></ul><br>  Provavelmente n√£o h√° nada para comentar. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5c9/a88/a22/5c9a88a221d4cd5ba5f4f1d9f74a346b.png" alt="Quadro 20"></div><br>  <b>Edi√ß√£o 14</b> <br><br>  Vejamos outro caso com o qual trabalharemos "de fora".  Primeiro, escreveremos o c√≥digo, identificaremos os problemas e depois examinaremos o interior.  Para estudar, pegue a biblioteca <i>System.Configuration.ConfigurationManager</i> e o pacote NuGet com o mesmo nome.  Eu usei a vers√£o do pacote 4.5.0.  Iremos trabalhar com a classe <i>System.Configuration.CommaDelimitedStringCollection</i> . <br><br>  Vamos fazer algo n√£o muito complicado.  Por exemplo, crie um objeto, extraia sua representa√ß√£o de string, obtenha o comprimento dessa string e imprima-a.  C√≥digo relevante: <br><br><pre> <code class="cs hljs">CommaDelimitedStringCollection collection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CommaDelimitedStringCollection(); Console.WriteLine(collection.ToString().Length);</code> </pre> <br>  Apenas no caso, veja a descri√ß√£o do m√©todo <i>ToString</i> : <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8dc/544/56d/8dc54456dd1296d89fbe447fac71ac17.png" alt="Quadro 11"></div><br>  Nada fora do comum - a representa√ß√£o em cadeia do objeto √© simplesmente retornada.  Apenas por precau√ß√£o, tamb√©m analiso docs.microsoft.com - " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">M√©todo CommaDelimitedStringCollection.ToString</a> ".  Parece n√£o ser nada de especial. <br><br>  Ok, execute o c√≥digo para execu√ß√£o, ii ... <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa5/89f/1af/fa589f1afc8ceb9415694e1261e59ab7.png" alt="Quadro 12"></div><br>  Hmm, inesperadamente.  Bem, vamos tentar adicionar um elemento √† cole√ß√£o e obter sua representa√ß√£o de string.  "Completamente por acidente", adicionaremos uma string vazia :).  O c√≥digo mudar√° e ficar√° assim: <br><br><pre> <code class="cs hljs">CommaDelimitedStringCollection collection = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CommaDelimitedStringCollection(); collection.Add(String.Empty); Console.WriteLine(collection.ToString().Length);</code> </pre> <br>  N√≥s lan√ßamos e vemos ... <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d37/4bc/d2e/d374bcd2ed23bd048276493ed19d30fe.png" alt="Quadro 13"></div><br>  O que, de novo ?!  Bem, vamos finalmente dar uma olhada na implementa√ß√£o do m√©todo <i>ToString</i> da classe <i>CommaDelimitedStringCollection</i> .  O c√≥digo √© apresentado abaixo: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Count &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; StringBuilder sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> str <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) { ThrowIfContainsDelimiter(str); <span class="hljs-comment"><span class="hljs-comment">// .... sb.Append(str.Trim()); sb.Append(','); } if (sb.Length &gt; 0) sb.Length = sb.Length - 1; return sb.Length == 0 ? null : sb.ToString(); }</span></span></code> </pre> <br>  <b>Avisos do PVS-Studio</b> : <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3108</a> N√£o √© recomend√°vel retornar 'null' do m√©todo 'ToSting ()'.  StringAttributeCollection.cs 57 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3108</a> N√£o √© recomend√°vel retornar 'null' do m√©todo 'ToSting ()'.  StringAttributeCollection.cs 71 </li></ul><br>  Aqui vemos dois lugares onde a implementa√ß√£o atual do <i>ToString</i> pode retornar <i>nula</i> .  Lembre-se do que a Microsoft recomenda ao implementar o m√©todo <i>ToString</i> , para o qual voltamos novamente a docs.microsoft.com - " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">M√©todo Object.ToString</a> ": <br><br>  <i>Notas para os herdeiros .... As substitui√ß√µes do m√©todo ToString () devem seguir estas diretrizes:</i> <ul><li>  <i>....</i> </li><li>  <i>Sua substitui√ß√£o ToString () n√£o deve retornar vazia ou uma</i> <i>seq√º√™ncia</i> <b><i>nula</i></b> <i>.</i> </li><li>  <i>....</i> </li></ul><br>  Na verdade, √© sobre isso que o PVS-Studio alerta.  Os dois trechos de c√≥digo acima que escrevemos para reproduzir o problema atingem diferentes pontos de sa√≠da - o primeiro e o segundo lugares onde retornos <i>nulos</i> , respectivamente.  Cavando um pouco mais fundo. <br><br>  O primeiro caso.  <i>Count</i> - uma propriedade da classe base <i>StringCollection</i> .  Como nenhum elemento foi adicionado, <i>Contagem == 0</i> , a condi√ß√£o <i>Contagem &lt;= 0</i> √© atendida, <i>nulo √©</i> retornado. <br><br>  No segundo caso, adicionamos um elemento usando o m√©todo de inst√¢ncia <i>CommaDelimitedStringCollection.Add</i> para isso. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> new </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { ThrowIfReadOnly(); ThrowIfContainsDelimiter(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); _modified = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Add(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Trim()); }</code> </pre> <br>  As verifica√ß√µes no m√©todo <i>ThrowIf ... passam com</i> √™xito e o item √© adicionado √† cole√ß√£o base.  Assim, o valor de <i>Count</i> se torna igual a 1. Agora, retornamos ao m√©todo <i>ToString</i> .  O valor da express√£o <i>Count &lt;= 0</i> √© <i>false</i> , portanto, n√£o h√° como sair do m√©todo e o c√≥digo continua sendo executado.  A travessia da cole√ß√£o interna come√ßa e 2 elementos s√£o adicionados ao <i>StringBuilder</i> - uma sequ√™ncia vazia e uma v√≠rgula.  Como resultado, verifica-se que <i>sb</i> cont√©m apenas uma v√≠rgula, o valor da propriedade <i>Length</i> , respectivamente, √© um.  O valor da express√£o <i>sb.Length&gt; 0</i> √© <i>verdadeiro</i> , subtra√ß√£o e grava√ß√£o para <i>sb.Length √© executado</i> , agora o valor de <i>sb.Length</i> √© 0. Isso leva ao fato de que o m√©todo retorna <i>nulo</i> novamente. <br><br>  <b>Edi√ß√£o 15</b> <br><br>  Inesperadamente, eu queria usar a classe <i>System.Configuration.ConfigurationProperty</i> .  Tome o construtor com mais par√¢metros: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigurationProperty</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name, Type type, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> defaultValue, TypeConverter typeConverter, ConfigurationValidatorBase validator, ConfigurationPropertyOptions options, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> description</span></span></span><span class="hljs-function">)</span></span>;</code> </pre> <br>  Vamos ver a descri√ß√£o do √∫ltimo par√¢metro: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// description: // The description of the configuration entity.</span></span></code> </pre> <br>  A descri√ß√£o do construtor em docs.microsoft.com diz a mesma coisa.  Bem, vamos dar uma olhada em como esse par√¢metro √© usado no corpo do construtor: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigurationProperty</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">...., </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> description</span></span></span><span class="hljs-function">)</span></span> { ConstructorInit(name, type, options, validator, typeConverter); SetDefaultValue(defaultValue); }</code> </pre> <br>  E o par√¢metro n√£o √© usado. <br><br>  <b>PVS-Studio Warning</b> : O par√¢metro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3117</a> 'description' do construtor n√£o √© usado.  ConfigurationProperty.cs 62 <br><br>  Eles provavelmente n√£o o usam de prop√≥sito, mas a descri√ß√£o do par√¢metro correspondente √© confusa. <br><br>  <b>Edi√ß√£o 16</b> <br><br>  Eu conheci outro lugar semelhante.  Tente encontrar o erro voc√™ mesmo, o c√≥digo do construtor est√° abaixo. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SectionXmlInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> configKey, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> definitionConfigPath, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> targetConfigPath, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> subPath, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> filename, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lineNumber, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> streamVersion, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> rawXml, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> configSource, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> configSourceStreamName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> configSourceStreamVersion, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> protectionProviderName, OverrideModeSetting overrideMode, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> skipInChildApps</span></span></span><span class="hljs-function">)</span></span> { ConfigKey = configKey; DefinitionConfigPath = definitionConfigPath; TargetConfigPath = targetConfigPath; SubPath = subPath; Filename = filename; LineNumber = lineNumber; StreamVersion = streamVersion; RawXml = rawXml; ConfigSource = configSource; ConfigSourceStreamName = configSourceStreamName; ProtectionProviderName = protectionProviderName; OverrideModeSetting = overrideMode; SkipInChildApps = skipInChildApps; }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3117</a> Constructor parameter 'configSourceStreamVersion' is not used. SectionXmlInfo.cs 16 <br><br>   ,     : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> ConfigSourceStreamVersion { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { } }</code> </pre> <br>  ,   . ,  /    ,     . <br><br> <b>Issue 17</b> <br><br> ,       <i>System.Runtime.WindowsRuntime.UI.Xaml</i>   NuGet . <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> RepeatBehavior : IFormattable { .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> InternalToString(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); } .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3108</a> It is not recommended to return 'null' from 'ToSting()' method. RepeatBehavior.cs 113 <br><br>  ,    ‚Äî  <i>ToString</i>    <i>null</i> . -    , ,  <i>RepeatBehavior.ToString</i>    ,  -     .    ,     Microsoft. <br><br> ,     ,  <i>ToString</i>   <i>null</i> ‚Äî        <i>InternalToString</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InternalToString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> format, IFormatProvider formatProvider</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (_Type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> RepeatBehaviorType.Forever: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Forever"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> RepeatBehaviorType.Count: StringBuilder sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); sb.AppendFormat( formatProvider, <span class="hljs-string"><span class="hljs-string">"{0:"</span></span> + format + <span class="hljs-string"><span class="hljs-string">"}x"</span></span>, _Count); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sb.ToString(); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> RepeatBehaviorType.Duration: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _Duration.ToString(); <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } }</code> </pre> <br>  ,   ,   <i>switch</i>  <i>default</i> , <i>InternalToString</i>   <i>null</i> , , <i>null</i>   <i>ToString</i> . <br><br> <i>RepeatBehavior</i> ‚Äî  ,  <i>ToString</i> ‚Äî  ,        .      <i>RepeatBehavior</i> ,     <i>ToString</i> ,     ,  <i>_Type</i>     <i>RepeatBehaviorType.Forever</i> , <i>RepeatBehaviorType.Count</i>  <i>RepeatBehaviorType.Duration</i> . <br><br> <i>_Type</i> ‚Äî  ,      : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> RepeatBehavior : IFormattable { .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> RepeatBehaviorType _Type; .... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> RepeatBehaviorType Type { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _Type; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _Type = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } .... }</code> </pre> <br>    .  ,  ,      <i>RepeatBehaviorType</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> RepeatBehaviorType { Count, Duration, Forever }</code> </pre> <br>  , <i>RepeatBehaviorType</i> ‚Äî ,    .           <i>switch</i> . , ,  ,  <i>default</i>  . <br><br>        <i>System.Runtime.WindowsRuntime.UI.Xaml</i> (   4.3.0)    . <br><br><pre> <code class="cs hljs">RepeatBehavior behavior = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RepeatBehavior() { Type = (RepeatBehaviorType)<span class="hljs-number"><span class="hljs-number">666</span></span> }; Console.WriteLine(behavior.ToString() <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>);</code> </pre> <br>      <i>True</i> ,    <i>ToString</i>  <i>null</i> , .. <i>_Type</i>         <i>case</i>       <i>default</i> .  , ,  . <br><br>   ,      ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">docs.microsoft.com</a> ,  ,      <i>null</i> . <br><br> <b>Issue 18</b> <br><br>      <i>System.Private.DataContractSerialization</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">CharType</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> None = <span class="hljs-number"><span class="hljs-number">0x00</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> FirstName = <span class="hljs-number"><span class="hljs-number">0x01</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> Name = <span class="hljs-number"><span class="hljs-number">0x02</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> Whitespace = <span class="hljs-number"><span class="hljs-number">0x04</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> Text = <span class="hljs-number"><span class="hljs-number">0x08</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> AttributeText = <span class="hljs-number"><span class="hljs-number">0x10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> SpecialWhitespace = <span class="hljs-number"><span class="hljs-number">0x20</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> Comment = <span class="hljs-number"><span class="hljs-number">0x40</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] s_charType = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[<span class="hljs-number"><span class="hljs-number">256</span></span>] { .... CharType.None, <span class="hljs-comment"><span class="hljs-comment">/* 9 (.) */</span></span> CharType.None| CharType.Comment| CharType.Comment| CharType.Whitespace| CharType.Text| CharType.SpecialWhitespace, <span class="hljs-comment"><span class="hljs-comment">/* A (.) */</span></span> CharType.None| CharType.Comment| CharType.Comment| CharType.Whitespace| CharType.Text| CharType.SpecialWhitespace, <span class="hljs-comment"><span class="hljs-comment">/* B (.) */</span></span> CharType.None, <span class="hljs-comment"><span class="hljs-comment">/* C (.) */</span></span> CharType.None, <span class="hljs-comment"><span class="hljs-comment">/* D (.) */</span></span> CharType.None| CharType.Comment| CharType.Comment| CharType.Whitespace, <span class="hljs-comment"><span class="hljs-comment">/* E (.) */</span></span> CharType.None, .... };</code> </pre> <br> <b> PVS-Studio</b> : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3001</a> There are identical sub-expressions 'CharType.Comment' to the left and to the right of the '|'  operador. XmlUTF8TextReader.cs 56 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3001</a> There are identical sub-expressions 'CharType.Comment' to the left and to the right of the '|'  operador. XmlUTF8TextReader.cs 58 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3001</a> There are identical sub-expressions 'CharType.Comment' to the left and to the right of the '|'  operador. XmlUTF8TextReader.cs 64 </li></ul><br>      <i>CharType.Comment| CharType.Comment</i> .   ,   <i>(CharType.Comment | CharType.Comment) == CharType.Comment</i> .     ,    <i>CharType.Comment</i> ,   . <br><br> <b>Issue 19</b> <br><br> .       <i>XmlBinaryWriterSession.TryAdd</i>      docs.microsoft.com ‚Äî " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">XmlBinaryWriterSession.TryAdd(XmlDictionaryString, Int32) Method</a> ": <i>Returns: true if the string could be added; otherwise, false.</i> <br><br>     : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryAdd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">XmlDictionaryString </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span> { IntArray keys; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> System.Runtime .Serialization .DiagnosticUtility .ExceptionUtility .ThrowHelperArgumentNull(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_maps.TryGetValue(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Dictionary, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> keys)) { key = (keys[<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.Key] - <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (key != <span class="hljs-number"><span class="hljs-number">-1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// If the key is already set, then something is wrong throw System.Runtime .Serialization .DiagnosticUtility .ExceptionUtility .ThrowHelperError( new InvalidOperationException( SR.XmlKeyAlreadyExists)); } key = Add(value.Value); keys[value.Key] = (key + 1); return true; } key = Add(value.Value); keys = AddKeys(value.Dictionary, value.Key + 1); keys[value.Key] = (key + 1); return true; }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3009</a> It's odd that this method always returns one and the same value of 'true'. XmlBinaryWriterSession.cs 29 <br><br>  ,     <i>true</i> ,   ,   <i>false</i>   . <br><br> <b>Issue 20</b> <br><br>     ,    ‚Äî    <i>false</i> : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnHandleReference</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (xmlWriter.depth &lt; depthToCheckCyclicReference) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (canContainCyclicReference) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_byValObjectsInScope.Contains(obj)) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ....; _byValObjectsInScope.Push(obj); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3009</a> It's odd that this method always returns one and the same value of 'false'. XmlObjectSerializerWriteContext.cs 415 <br><br> ,       ! ,   ,     ‚Äî  ,  ,   ,   ‚Ä¶ <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/008/d6a/92d/008d6a92d6f4cf4066e744e4c857b47d.png" alt="Quadro 21"></div><br> ,       ,   .  :) <br><br> <b>Issue 21</b> <br><br>      <i>System.Security.Cryptography.Algorithms</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">byte</span></span></span><span class="hljs-function">[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateMask</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] rgbSeed, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cbReturn</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (HashAlgorithm hasher = (HashAlgorithm)CryptoConfig.CreateFromName(_hashNameValue)) { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] rgbCounter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[<span class="hljs-number"><span class="hljs-number">4</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] rgbT = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[cbReturn]; <span class="hljs-keyword"><span class="hljs-keyword">uint</span></span> counter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ib = <span class="hljs-number"><span class="hljs-number">0</span></span>; ib &lt; rgbT.Length;) { <span class="hljs-comment"><span class="hljs-comment">// Increment counter -- up to 2^32 * sizeof(Hash) Helpers.ConvertIntToByteArray(counter++, rgbCounter); hasher.TransformBlock(rgbSeed, 0, rgbSeed.Length, rgbSeed, 0); hasher.TransformFinalBlock(rgbCounter, 0, 4); byte[] hash = hasher.Hash; hasher.Initialize(); Buffer.BlockCopy(hash, 0, rgbT, ib, Math.Min(rgbT.Length - ib, hash.Length)); ib += hasher.Hash.Length; } return rgbT; } }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3080</a> Possible null dereference. Consider inspecting 'hasher'. PKCS1MaskGenerationMethod.cs 37 <br><br>    ,     <i>hasher.TransformBlock</i>   <i>hasher</i>   <i>null</i> ,        <i>NullReferenceException</i> .        . <br><br> ,  ,   <i>hasher</i>      <i>null</i> ,     <i>CreateFromName</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateFromName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CreateFromName(name, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); }</code> </pre> <br>   ‚Äî  .    <i>CreateFromName</i>     ,    . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateFromName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> name, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (retvalType == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cons == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (candidates.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rci == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Delegate).IsAssignableFrom(rci.DeclaringType)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> retval; }</code> </pre> <br>  ,      ,     <i>null</i> . ,   ,    ,     ,     <i>NullReferenceException</i> . <br><br>  ‚Äî  ,       .            .     . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PKCS1MaskGenerationMethod</span></span> : .... <span class="hljs-comment"><span class="hljs-comment">// &lt;= 1 { .... public PKCS1MaskGenerationMethod() // &lt;= 2 { _hashNameValue = DefaultHash; } .... public override byte[] GenerateMask(byte[] rgbSeed, int cbReturn) // &lt;= 3 { using (HashAlgorithm hasher = (HashAlgorithm)CryptoConfig.CreateFromName(_hashNameValue)) // &lt;= 4 { byte[] rgbCounter = new byte[4]; byte[] rgbT = new byte[cbReturn]; // &lt;= 5 uint counter = 0; for (int ib = 0; ib &lt; rgbT.Length;) // &lt;= 6 { .... Helpers.ConvertIntToByteArray(counter++, rgbCounter); // &lt;= 7 hasher.TransformBlock(rgbSeed, 0, rgbSeed.Length, rgbSeed, 0); .... } .... } } }</span></span></code> </pre> <br>     : <br><br> <b>1, 3</b> .       <i>public</i> . ,       ‚Äî    . <br><br> <b>2</b> .  ‚Äî  ,    ‚Äî     ,     .        ,             . <br><br> <b>4</b> . <i>CreateFromName</i>         <i>null</i> ‚Äî   ,    . <br><br> <b>5, 6</b> .  <i>cbReturn</i>   &gt; 0 (, ,       ).   <i>cbReturn &gt; 0</i>      <i>ib &lt; rgbT.Length</i>     . <br><br> <b>7</b> . <i>Helpres.ConvertIntToByteArray</i>    . <br><br>   ,    ,     , : <br><br><ul><li> <i>rgbCeed</i> ‚Äî new byte[] { 0, 1, 2, 3 }; </li><li> <i>cbReturn</i> ‚Äî 42. </li></ul><br>  ,  ¬´¬ª  <i>CryptoConfig.CreateFromName</i> ,      <i>_hashNameValue</i> .    ,  ,      -   : <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> HashName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _hashNameValue; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _hashNameValue = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> ?? DefaultHash; } }</code> </pre> <br>  ''   <i>HashName</i> ( ‚Äî <i>_hashNameValue</i> ),    <i>null</i>   <i>CreateFromName</i>       .         (,    ),     . <br><br>   ,       <i>NullReferenceException</i> ,    : <br><br><pre> <code class="cs hljs">PKCS1MaskGenerationMethod tempObj = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PKCS1MaskGenerationMethod(); tempObj.HashName = <span class="hljs-string"><span class="hljs-string">"Dummy"</span></span>; tempObj.GenerateMask(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> }, <span class="hljs-number"><span class="hljs-number">42</span></span>);</code> </pre> <br>     ,     : <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ab/384/8e5/2ab3848e542172cd92a7e03f55bba9fe.png" alt="Quadro 10"></div><br><br>         NuGet   4.3.1. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b4/a94/766/7b4a947666444496ca077e7530415c76.png" alt="Quadro 14"></div><br><br>    ,       ,  docs.microsoft.com     ‚Äî " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PKCS1MaskGenerationMethod.GenerateMask(Byte[], Int32) Method</a> ". <br><br> ,             2  ¬´¬ª  : <br><br><ul><li>     <i>cbReturn</i>   ; </li><li>    <i>rgbSeed</i>  <i>null</i> . </li></ul><br>       <i>OutOfMemoryException</i> . <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c50/474/7f9/c504747f9a771843da10a128866811dd.png" alt="Quadro 15"></div><br>       <i>NullReferenceException</i>    <i>rgbSeed.Length</i> .    ,  <i>hasher</i>   ,       <i>rgbSeed.Length</i> . <br><br> <b>Issue 22</b> <br><br>     . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SignatureDescription</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> FormatterAlgorithm { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> DeformatterAlgorithm { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SignatureDescription</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> AsymmetricSignatureDeformatter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateDeformatter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> AsymmetricAlgorithm key</span></span></span><span class="hljs-function">)</span></span> { AsymmetricSignatureDeformatter item = (AsymmetricSignatureDeformatter) CryptoConfig.CreateFromName(DeformatterAlgorithm); item.SetKey(key); <span class="hljs-comment"><span class="hljs-comment">// &lt;= return item; } public virtual AsymmetricSignatureFormatter CreateFormatter( AsymmetricAlgorithm key) { AsymmetricSignatureFormatter item = (AsymmetricSignatureFormatter) CryptoConfig.CreateFromName(FormatterAlgorithm); item.SetKey(key); // &lt;= return item; } .... }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3080</a> Possible null dereference. Consider inspecting 'item'. SignatureDescription.cs 31 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3080</a> Possible null dereference. Consider inspecting 'item'. SignatureDescription.cs 38 </li></ul><br>  ,      <i>FormatterAlgorithm</i>  <i>DeformatterAlgorithm</i>  ,    <i>CryptoConfig.CreateFromName</i>   <i>null</i>   <i>CreateDeformatter</i>  <i>CreateFormatter</i> . ,     <i>SetKey</i>    <i>NullReferenceException</i> . ,  ,    : <br><br><pre> <code class="cs hljs">SignatureDescription signature = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SignatureDescription() { DeformatterAlgorithm = <span class="hljs-string"><span class="hljs-string">"Dummy"</span></span>, FormatterAlgorithm = <span class="hljs-string"><span class="hljs-string">"Dummy"</span></span> }; signature.CreateDeformatter(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-comment"><span class="hljs-comment">// NRE signature.CreateFormatter(null); // NRE</span></span></code> </pre> <br>       <i>CreateDeformatter</i> ,    <i>CreateFormatter</i>    <i>NullReferenceException</i> . <br><br> <b>Issue 23</b> <br><br>       <i>System.Private.Xml</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteBase64</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] buffer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_inAttr &amp;&amp; (_inCDataSection || StartCDataSection())) _wrapped.WriteBase64(buffer, index, count); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> _wrapped.WriteBase64(buffer, index, count); }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3004</a> The 'then' statement is equivalent to the 'else' statement. QueryOutputWriterV1.cs 242 <br><br>  ,  <i>then</i>  <i>else</i>   <i>if</i>      .   ,        ,   <i>if</i>  . <br><br> <b>Issue 24</b> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Depends</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">XmlSchemaObject item, ArrayList refs</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (content <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> XmlSchemaSimpleTypeRestriction) { baseType = ((XmlSchemaSimpleTypeRestriction)content).BaseType; baseName = ((XmlSchemaSimpleTypeRestriction)content).BaseTypeName; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (content <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> XmlSchemaSimpleTypeList) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (content <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> XmlSchemaSimpleTypeRestriction) { baseName = ((XmlSchemaSimpleTypeRestriction)content).BaseTypeName; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (t == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(XmlSchemaSimpleTypeUnion)) { .... } .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3003</a> The use of 'if (A) {...} else if (A) {...}' pattern was detected. There is a probability of logical error presence. Check lines: 381, 396. ImportContext.cs 381 <br><br>   <i>if-else-if</i>      ‚Äî <i>content is XmlSchemaSimpleTypeRestriction</i> .    ‚Äî  <i>then</i> -      .   ,       <i>then</i> - (   ),   ,  ,    . <br><br> <b>Issue 25</b> <br><br>        ,    . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MatchesXmlType</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IList&lt;XPathItem&gt; seq, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> indexType</span></span></span><span class="hljs-function">)</span></span> { XmlQueryType typBase = GetXmlType(indexType); XmlQueryCardinality card; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (seq.Count) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: card = XmlQueryCardinality.Zero; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: card = XmlQueryCardinality.One; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: card = XmlQueryCardinality.More; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(card &lt;= typBase.Cardinality)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; typBase = typBase.Prime; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; seq.Count; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!CreateXmlType(seq[<span class="hljs-number"><span class="hljs-number">0</span></span>]).IsSubtypeOf(typBase)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>   ‚Äî  ! <br>   ‚Äî  PVS-Studio : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3102</a> Suspicious access to element of 'seq' object by a constant index inside a loop. XmlQueryRuntime.cs 738 <br><br>   <i>for</i> ,        <i>i &lt; seq.Count</i> .     ,     <i>seq</i> .              ( <i>seq[i]</i> ),      ‚Äî  ( <i>seq[0]</i> ). <br><br> <b>Issue 26</b> <br><br>       ,       . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteValue</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { WriteValue(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3110</a> Possible infinite recursion inside 'WriteValue' method. XmlAttributeCache.cs 166 <br><br>    ,         . <br><br> <b>Issue 27</b> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IList&lt;XPathNavigator&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DocOrderDistinct</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IList&lt;XPathNavigator&gt; seq</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (seq.Count &lt;= <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> seq; XmlQueryNodeSequence nodeSeq = (XmlQueryNodeSequence)seq; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nodeSeq == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) nodeSeq = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> XmlQueryNodeSequence(seq); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> nodeSeq.DocOrderDistinct(_docOrderCmp); }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> The 'seq' object was used before it was verified against null. Check lines: 880, 884. XmlQueryRuntime.cs 880 <br><br>        <i>null</i> , -      <i>Count</i>     <i>NullReferenceException</i> .     <i>nodeSeq</i> ,      <i>seq</i> ,     ‚Äî   .   <i>seq</i> ‚Äî <i>null</i> ,        - .   <i>seq</i> ‚Äî  <i>null</i> , : <br><br><ul><li>     <i>InvalidCastException</i> ,     ; </li><li>    , <i>nodeSeq</i>   ,   <i>null</i> . </li></ul><br> <b>Issue 28</b> <br><br>  4 ,     . ,    ,          . <br><br> <b> PVS-Studio</b> : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3117</a> Constructor parameter 'securityUrl' is not used. XmlSecureResolver.cs 15 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3117</a> Constructor parameter 'strdata' is not used. XmlEntity.cs 18 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3117</a> Constructor parameter 'location' is not used. Compilation.cs 58 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3117</a> Constructor parameter 'access' is not used. XmlSerializationILGen.cs 38 </li></ul><br>     (  ,         ).  O que?  . , . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">XmlSecureResolver</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">XmlResolver resolver, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> securityUrl</span></span></span><span class="hljs-function">)</span></span> { _resolver = resolver; }</code> </pre> <br>    ,    docs.microsoft.com ‚Äî " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">XmlSecureResolver Constructors</a> "   <i>securityUrl</i> : <br><br> <i>The URL used to create the PermissionSet that will be applied to the underlying XmlResolver. The XmlSecureResolver calls PermitOnly() on the created PermissionSet before calling GetEntity(Uri, String, Type) on the underlying XmlResolver.</i> <br><br> <b>Issue 29</b> <br><br>   <i>System.Private.Uri</i>   ,        Microsoft    <i>ToString</i> .       " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Object.ToString Method</a> ": <b><i>Your ToString() override should not throw an exception</i></b> <i>.</i> <br><br>      : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_username.Length == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; _password.Length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UriFormatException(SR.net_uri_BadUserPassword); } .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3108</a> It is not recommended to throw exceptions from 'ToSting()' method. UriBuilder.cs 406 <br><br> ,     <i>UserName</i>  <i>Password</i>     <i>_username</i>     <i>_password</i> ,     <i>ToString</i> ,  .   : <br><br><pre> <code class="cs hljs">UriBuilder uriBuilder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UriBuilder() { UserName = String.Empty, Password = <span class="hljs-string"><span class="hljs-string">"Dummy"</span></span> }; String stringRepresentation = uriBuilder.ToString(); Console.WriteLine(stringRepresentation);</code> </pre> <br>         ,        ‚Äî       ,    docs.microsoft.com ‚Äî " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">UriBuilder.ToString Method</a> ". <br><br> <b>Issue 30</b> <br><br>   ,     <i>System.Data.Common</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ArrayList _tables; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> DataTable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> tableName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ns</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_tables.Count == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (DataTable)_tables[<span class="hljs-number"><span class="hljs-number">0</span></span>]; .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3106</a> Possibly index is out of bound. The '0' index is pointing beyond '_tables' bound. XMLDiffLoader.cs 277 <br><br>     ?   ,  ?      <i>ArgumentOutOfRangeException</i> ?    , ,  .  ,    . <br><br> <b>Issue 31</b> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> XmlNodeOrder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ComparePosition</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">XPathNodePointer other</span></span></span><span class="hljs-function">)</span></span> { RealFoliate(); other.RealFoliate(); Debug.Assert(other != <span class="hljs-literal"><span class="hljs-literal">null</span></span>); .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> The 'other' object was used before it was verified against null. Check lines: 1095, 1096. XPathNodePointer.cs 1095 <br><br>  <i>other != null</i>    <i>Debug.Assert</i>  ,      <i>ComparePosition</i>    <i>null</i> .   ,    .         <i>other</i>    <i>RealFoliate</i> .  ,  <i>other</i>   <i>null</i> ,     <i>NullReferenceException</i>    <i>Assert</i> . <br><br> <b>Issue 32</b> <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> PropertyDescriptorCollection </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetProperties</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Attribute[] attributes</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (Attribute attribute <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> attributes) { Attribute attr = property.Attributes[attribute.GetType()]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( (attr == <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; !attribute.IsDefaultAttribute()) || !attr.Match(attribute)) { match = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3080</a> Possible null dereference. Consider inspecting 'attr'. DbConnectionStringBuilder.cs 534 <br><br>    <i>if</i>   . <i>Match</i> ‚Äî  .    <i>attr == null</i> , <i>null</i> ‚Äî  ()    . ,         ||  ,  <i>attr</i> ‚Äî <i>null</i> ,    <i>NullReferenceException</i> . <br><br> ,    : <br><br><ol><li>  <i>attr</i> ‚Äî <i>null</i> .     &amp;&amp;. </li><li>  <i>!attribute.IsDefaultAttribute()</i> ‚Äî <i>false</i> .      &amp;&amp; ‚Äî <i>false</i> . </li><li>      ||   <i>false</i> ,   . </li><li>   <i>attr</i> ‚Äî <i>null</i> ,    <i>Match</i>  . </li></ol><br> <b>Issue 33</b> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReadOldRowData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> DataSet ds, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> DataTable table, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">ref</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> pos, XmlReader row</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (table == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { row.Skip(); <span class="hljs-comment"><span class="hljs-comment">// need to skip this element if we dont know about it, // before returning -1 return -1; } .... if (table == null) throw ExceptionBuilder.DiffgramMissingTable( XmlConvert.DecodeName(row.LocalName)); .... }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3021</a> There are two 'if' statements with identical conditional expressions. The first 'if' statement contains method return. This means that the second 'if' statement is senseless XMLDiffLoader.cs 301 <br><br>    <i>if</i> ,     ‚Äî <i>table == null</i> .   then-      ‚Äî          -1,   ‚Äî  .    <i>table</i>  .  ,     . <br><br> <b>Issue 34</b> <br><br>       <i>System.ComponentModel.TypeConverter</i> . ,      : <br><br> <i>Removes the last character from the formatted string. (Remove last character in virtual string). On exit the out param contains the position where the operation was actually performed. This position is relative to the test string. The MaskedTextResultHint out param gives more information about the operation result. Returns</i> <b><i>true</i></b> <i>on success,</i> <b><i>false</i></b> <i>otherwise.</i> <br><br>     :    ,   <i>true</i> ,  ‚Äî <i>false</i> . ,    . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Remove</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> testPosition, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> MaskedTextResultHint resultHint</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lastAssignedPos == INVALID_INDEX) { .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">// nothing to remove. } .... return true; }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3009</a> It's odd that this method always returns one and the same value of 'true'. MaskedTextProvider.cs 1529 <br><br>    ,      ‚Äî <i>true</i> . <br><br> <b>Issue 35</b> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Clear</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_table != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_table.fInitInProgress &amp;&amp; _delayLoadingConstraints != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { .... } .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3125</a> The '_table' object was used after it was verified against null. Check lines: 437, 423. ConstraintCollection.cs 437 <br><br>  <i>_table != null</i>     ‚Äî  <i>_table</i>    <i>null</i> .   ,    .        <i>_table</i>     <i>null</i> ‚Äî <i>_table .fInitInProgress</i> . <br><br> <b>Issue 36</b> <br><br>    ,     <i>System.Runtime.Serialization.Formatters</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Write</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (memberNameInfo != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { .... _serWriter.WriteObjectEnd(memberNameInfo, typeNameInfo); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((objectInfo._objectId == _topId) &amp;&amp; (_topName != <span class="hljs-literal"><span class="hljs-literal">null</span></span>)) { _serWriter.WriteObjectEnd(topNameInfo, typeNameInfo); .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ReferenceEquals(objectInfo._objectType, Converter.s_typeofString)) { _serWriter.WriteObjectEnd(typeNameInfo, typeNameInfo); } }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3038</a> The argument was passed to method several times. It is possible that other argument should be passed instead. BinaryObjectWriter.cs 262 <br><br>     <i>_serWriter.WriteObjectEnd</i>     ‚Äî <i>typeNameInfo</i> .     ,    .  ,       <i>WriteObjectEnd</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteObjectEnd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">NameInfo memberNameInfo, NameInfo typeNameInfo</span></span></span><span class="hljs-function">)</span></span> { }</code> </pre> <br>  ‚Ä¶  .  :) <br><br> <b>Issue 37</b> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteSerializationHeader</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> topId, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> headerId, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> minorVersion, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> majorVersion</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> record = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SerializationHeaderRecord( BinaryHeaderEnum.SerializedStreamHeader, topId, headerId, minorVersion, majorVersion); record.Write(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre> <br>    ,    ,       .      ,   . <br><br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3066</a> Possible incorrect order of arguments passed to 'SerializationHeaderRecord' constructor: 'minorVersion' and 'majorVersion'. BinaryFormatterWriter.cs 111 <br><br>      <i>SerializationHeaderRecord</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SerializationHeaderRecord</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> BinaryHeaderEnum binaryHeaderEnum, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> topId, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> headerId, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> majorVersion, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> minorVersion</span></span></span><span class="hljs-function">)</span></span> { _binaryHeaderEnum = binaryHeaderEnum; _topId = topId; _headerId = headerId; _majorVersion = majorVersion; _minorVersion = minorVersion; }</code> </pre> <br>  ,      <i>majorVersion</i> , <i>minorVersion</i> ;         <i>minorVersion</i> , <i>majorVersion</i> .   .       ( ?) ‚Äî ,     . <br><br> <b>Issue 38</b> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ObjectManager</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> ISurrogateSelector selector, StreamingContext context, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> checkSecurity, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isCrossAppDomain</span></span></span><span class="hljs-function">)</span></span> { _objects = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ObjectHolder[DefaultInitialSize]; _selector = selector; _context = context; _isCrossAppDomain = isCrossAppDomain; }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3117</a> Constructor parameter 'checkSecurity' is not used. ObjectManager.cs 33 <br><br>   <i>checkSecurity</i>   .    . ,     ,    ,           . <br><br> <b>Issue 39</b> <br><br>   ,   .   1  1               . : <br><br><ul><li>          ; </li><li>       copy-paste. </li></ul><br>  : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EnlargeArray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> newLength = _values.Length * <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newLength &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newLength == <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SerializationException(SR.Serialization_TooManyElements); } newLength = <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>.MaxValue; } FixupHolder[] temp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FixupHolder[newLength]; Array.Copy(_values, <span class="hljs-number"><span class="hljs-number">0</span></span>, temp, <span class="hljs-number"><span class="hljs-number">0</span></span>, _count); _values = temp; }</code> </pre> <br> <b> PVS-Studio</b> : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> Expression 'newLength == int.MaxValue' is always false. ObjectManager.cs 1423 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> Expression 'newLength == int.MaxValue' is always false. ObjectManager.cs 1511 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> Expression 'newLength == int.MaxValue' is always false. ObjectManager.cs 1558 </li></ul><br> ,      ‚Äî    <i>temp</i> ( <i>FixupHolder</i> ,  <i>long</i>  <i>object</i> ).      -   copy-paste‚Ä¶ <br><br> <b>Issue 40</b> <br><br>    <i>System.Data.Odbc</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnquoteIdentifier</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(quotePrefix) || quotePrefix != <span class="hljs-string"><span class="hljs-string">" "</span></span>) { .... } .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> Expression '!string.IsNullOrEmpty(quotePrefix) || quotePrefix != " "' is always true. OdbcCommandBuilder.cs 338 <br><br>  ,       <i>true</i> .    .  ,    <i>quotePrefix</i>   ‚Äî    .  . <br><br>   ||, ,    <i>true</i> ,     ( )     <i>true</i> .    .       ,     <i>false</i> . ,    ,      <i>true</i> ,    ‚Äî <i>false</i> ,      <i>true</i> . <br><br>     ,     ,    <i>string.IsNullOrEmpty(quotePrefix)</i> ‚Äî <i>true</i> , ,    : <br><br><ul><li> <i>quotePrefix == null</i> ; </li><li> <i>quotePrefix.Length == 0</i> . </li></ul><br>           <i>quotePrefix != " "</i> ,     . ,     ‚Äî <i>true</i> ,    <i>quotePrefix</i> . <br><br> <b>Issue 41</b> <br><br>        : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PendingGetConnection</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PendingGetConnection</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dueTime, DbConnection owner, TaskCompletionSource&lt;DbConnectionInternal&gt; completion, DbConnectionOptions userOptions</span></span></span><span class="hljs-function">)</span></span> { DueTime = dueTime; Owner = owner; Completion = completion; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> DueTime { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DbConnection Owner { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> TaskCompletionSource&lt;DbConnectionInternal&gt; Completion { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DbConnectionOptions UserOptions { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3117</a> Constructor parameter 'userOptions' is not used. DbConnectionPool.cs 26 <br><br>      ,        ‚Äî <i>userOptions</i> ,  ,       .  ,      . <br><br> <b>Issue 42</b> <br><br>   ,      2 .  . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> DataTable </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ExecuteCommand</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (DataRow row <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> schemaTable.Rows) { resultTable.Columns .Add(row[<span class="hljs-string"><span class="hljs-string">"ColumnName"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, (Type)row[<span class="hljs-string"><span class="hljs-string">"DataType"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Type); } .... }</code> </pre> <br> <b> PVS-Studio</b> : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3051</a> An excessive type cast. The object is already of the 'Type' type. DbMetaDataFactory.cs 176 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3051</a> An excessive type cast. The object is already of the 'Type' type. OdbcMetaDataFactory.cs 1109 </li></ul><br>    <i>(Type)row[¬´DataType¬ª] as Type</i> .     ,  ‚Äî    <i>as</i> .   <i>row[¬´DataType¬ª]</i> ‚Äî <i>null</i> ,   ''          <i>Add</i> .  <i>row[¬´DataType¬ª]</i>  ,       <i>Type</i> ,         <i>InvalidCastException</i> .  ,    ?  A quest√£o est√° aberta. <br><br> <b>Issue 43</b> <br><br>      <i>System.Runtime.InteropServices.RuntimeInformation</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> FrameworkDescription { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s_frameworkDescription == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> versionString = (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>)AppContext.GetData(<span class="hljs-string"><span class="hljs-string">"FX_PRODUCT_VERSION"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (versionString == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { .... versionString = <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>).Assembly .GetCustomAttribute&lt; AssemblyInformationalVersionAttribute&gt;() ?.InformationalVersion; .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> plusIndex = versionString.IndexOf(<span class="hljs-string"><span class="hljs-string">'+'</span></span>); .... } .... } .... } }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3105</a> The 'versionString' variable was used after it was assigned through null-conditional operator. NullReferenceException is possible. RuntimeInformation.cs 29 <br><br>        <i>NullReferenceException</i>    <i>IndexOf</i>   <i>versionString</i> .          '?.',     <i>NullReferenceException</i>     <i>InfromationalVersion</i> .   ,    <i>GetCustomAttribute&lt;...&gt;</i>  <i>null</i> ,     ,   ‚Äî    <i>IndexOf</i> ,   <i>versionString</i>    <i>null</i> . <br><br> <b>Issue 44</b> <br><br>    <i>System.ComponentModel.Composition</i>    .  2      : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CanSpecialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>[] genericParameterConstraints = ....; GenericParameterAttributes[] genericParameterAttributes = ....; <span class="hljs-comment"><span class="hljs-comment">// if no constraints and attributes been specifed, anything can be created if ((genericParameterConstraints == null) &amp;&amp; (genericParameterAttributes == null)) { return true; } if ((genericParameterConstraints != null) &amp;&amp; (genericParameterConstraints.Length != partArity)) { return false; } if ((genericParameterAttributes != null) &amp;&amp; (genericParameterAttributes.Length != partArity)) { return false; } for (int i = 0; i &lt; partArity; i++) { if (!GenericServices.CanSpecialize( specialization[i], (genericParameterConstraints[i] as Type[]). CreateTypeSpecializations(specialization), genericParameterAttributes[i])) { return false; } } return true; }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3125</a> The 'genericParameterConstraints' object was used after it was verified against null. Check lines: 603, 589. GenericSpecializationPartCreationInfo.cs 603 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3125</a> The 'genericParameterAttributes' object was used after it was verified against null. Check lines: 604, 594. GenericSpecializationPartCreationInfo.cs 604 </li></ul><br>     <i>genericParameterAttributes != null</i>  <i>genericParameterConstraints != null</i> . , <i>null</i> ‚Äî     , .      <i>null</i> ,    ‚Äî  .  ,  -   <i>null</i> ,         ?    ,       ,    <i>NullReferenceException</i> . <br><br> <b>Issue 45</b> <br><br>          .  ,    ‚Äî    ,     .     NuGet    prerelease  (    4.6.0-preview6.19303.8).   , , : <br><br><pre> <code class="cs hljs">LazyMemberInfo lazyMemberInfo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LazyMemberInfo(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> eq = lazyMemberInfo.Equals(<span class="hljs-literal"><span class="hljs-literal">null</span></span>); Console.WriteLine(eq);</code> </pre> <br>  <i>Equals</i>  ,  docs.microsoft.com        .NET Core,   .NET Framework.     (" <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LazyMemberInfo.Equals(Object) Method</a> ") ‚Äî     ‚Äî  <i>true</i>  <i>false</i> ,     . <br><br>      : <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8e5/8f7/aa4/8e58f7aa4e5a274751cde57da4d9497f.png" alt="Quadro 16"></div><br>   ,        : <br><br><pre> <code class="cs hljs">LazyMemberInfo lazyMemberInfo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LazyMemberInfo(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> eq = lazyMemberInfo.Equals(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(String)); Console.WriteLine(eq);</code> </pre> <br>   . <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e74/199/292/e74199292d39b2df8a7b205218c9c1fe.png" alt="Quadro 17"></div><br>  ,          .     <i>Equals</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Equals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> obj</span></span></span><span class="hljs-function">)</span></span> { LazyMemberInfo that = (LazyMemberInfo)obj; <span class="hljs-comment"><span class="hljs-comment">// Difefrent member types mean different members if (_memberType != that._memberType) { return false; } // if any of the lazy memebers create accessors in a delay-loaded fashion, // we simply compare the creators if ((_accessorsCreator != null) || (that._accessorsCreator != null)) { return object.Equals(_accessorsCreator, that._accessorsCreator); } // we are dealing with explicitly passed accessors in both cases if(_accessors == null || that._accessors == null) { throw new Exception(SR.Diagnostic_InternalExceptionMessage); } return _accessors.SequenceEqual(that._accessors); }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3115</a> Passing 'null' to 'Equals' method should not result in 'NullReferenceException'. LazyMemberInfo.cs 116 <br><br>   ,     ,       <i>that._memberType</i> . , ,   ‚Äî    <i>(LazyMemberInfo)obj</i> .    . <br><br>  <i>InvalidCastException</i> , ,  .   <i>NullReferenceException</i> ?   ,  <i>LazyMemberInfo</i> ‚Äî , ,  .    <i>null</i>         <i>NullReferenceException</i> .         ‚Äî    .          . <br><br> <b>Issue 46</b> <br><br> - , ,   <i>System.Drawing.Common</i> ,   <i>TriState</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Equals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> o</span></span></span><span class="hljs-function">)</span></span> { TriState state = (TriState)o; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _value == state._value; }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3115</a> Passing 'null' to 'Equals' method should not result in 'NullReferenceException'. TriState.cs 53 <br><br>   ,     . <br><br> <b>Issue 47</b> <br><br>     <i>System.Text.Json</i> . <br><br> ,    ,  <i>ToString</i>    <i>null</i> ? . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (TokenType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> JsonTokenType.None: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> JsonTokenType.Null: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> JsonTokenType.True: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>.TrueString; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> JsonTokenType.False: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>.FalseString; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> JsonTokenType.Number: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> JsonTokenType.StartArray: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> JsonTokenType.StartObject: { <span class="hljs-comment"><span class="hljs-comment">// null parent should have hit the None case Debug.Assert(_parent != null); return _parent.GetRawValueAsString(_idx); } case JsonTokenType.String: return GetString(); case JsonTokenType.Comment: case JsonTokenType.EndArray: case JsonTokenType.EndObject: default: Debug.Fail($"No handler for {nameof(JsonTokenType)}.{TokenType}"); return string.Empty; } }</span></span></code> </pre> <br>      <i>null</i>   ,    . <br><br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3108</a> It is not recommended to return 'null' from 'ToSting()' method. JsonElement.cs 1460 <br><br>        <i>GetString()</i> .   : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { CheckValidInstance(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _parent.GetString(_idx, JsonTokenType.String); }</code> </pre> <br>   ‚Äî     <i>GetString</i> : <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, JsonTokenType expectedType</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tokenType == JsonTokenType.Null) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } .... }</code> </pre> <br>     ,       <i>null</i> ‚Äî    ,      <i>ToString</i> . <br><br> <b>Issue 48</b> <br><br>    : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> JsonPropertyInfo </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreatePolymorphicProperty</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { JsonPropertyInfo runtimeProperty = CreateProperty(property.DeclaredPropertyType, runtimePropertyType, property.ImplementedPropertyType, property?.PropertyInfo, Type, options); property.CopyRuntimeSettingsTo(runtimeProperty); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> runtimeProperty; }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3042</a> Possible NullReferenceException. The '?.' and '.' operators are used for accessing members of the 'property' object JsonClassInfo.AddProperty.cs 179 <br><br>    <i>CreateProperty</i>        <i>property</i> : <i>property.DeclaredPropertyType</i> , <i>property.ImplementedPropertyType</i> , <i>property?.PropertyInfo</i> .  ,      '?.'.       <i>property</i>    <i>null</i> ,     ,          <i>NullReferenceException</i> . <br><br> <b>Issue 49</b> <br><br>        <i>System.Security.Cryptography.Xml</i>    ,         .     copy-paste,  . <br><br>  : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Write</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">StringBuilder strBuilder, DocPosition docPos, AncestralNamespaceContextManager anc</span></span></span><span class="hljs-function">)</span></span> { docPos = DocPosition.BeforeRootElement; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (XmlNode childNode <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ChildNodes) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (childNode.NodeType == XmlNodeType.Element) { CanonicalizationDispatcher.Write( childNode, strBuilder, DocPosition.InRootElement, anc); docPos = DocPosition.AfterRootElement; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { CanonicalizationDispatcher.Write(childNode, strBuilder, docPos, anc); } } }</code> </pre> <br>  : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteHash</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HashAlgorithm hash, DocPosition docPos, AncestralNamespaceContextManager anc</span></span></span><span class="hljs-function">)</span></span> { docPos = DocPosition.BeforeRootElement; <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (XmlNode childNode <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ChildNodes) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (childNode.NodeType == XmlNodeType.Element) { CanonicalizationDispatcher.WriteHash( childNode, hash, DocPosition.InRootElement, anc); docPos = DocPosition.AfterRootElement; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { CanonicalizationDispatcher.WriteHash(childNode, hash, docPos, anc); } } }</code> </pre> <br> <b> PVS-Studio</b> : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3061</a> Parameter 'docPos' is always rewritten in method body before being used. CanonicalXmlDocument.cs 37 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3061</a> Parameter 'docPos' is always rewritten in method body before being used. CanonicalXmlDocument.cs 54 </li></ul><br>      <i>docPos</i>   ,    , , ,     ,  . <br><br> <b>Issue 50</b> <br><br>       <i>System.Data.SqlClient</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsBOMNeeded</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">MetaType type, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type.NullableType == TdsEnums.SQLXMLTYPE) { Type currentType = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>.GetType(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentType == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(SqlString)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!((SqlString)<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>).IsNull &amp;&amp; ((((SqlString)<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>).Value).Length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((((SqlString)<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>).Value[<span class="hljs-number"><span class="hljs-number">0</span></span>] &amp; <span class="hljs-number"><span class="hljs-number">0xff</span></span>) != <span class="hljs-number"><span class="hljs-number">0xff</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((currentType == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>)) &amp;&amp; (((String)<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>).Length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) &amp;&amp; (((<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>] &amp; <span class="hljs-number"><span class="hljs-number">0xff</span></span>) != <span class="hljs-number"><span class="hljs-number">0xff</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentType == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(SqlXml)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!((SqlXml)<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>).IsNull) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentType == <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(XmlDataFeed)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Values will eventually converted to unicode string here } } return false; }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> The 'value' object was used before it was verified against null. Check lines: 8696, 8708. TdsParser.cs 8696 <br><br>    <i>value != null</i>    . ,       ,    <i>value</i>  .   <i>value</i>    <i>null</i> ‚Äî   . <br><br> <b>Issue 51</b> <br><br>    ,     ,      . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> TDSMessageCollection </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateQueryResponse</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( lowerBatchText.Contains(<span class="hljs-string"><span class="hljs-string">"name"</span></span>) &amp;&amp; lowerBatchText.Contains(<span class="hljs-string"><span class="hljs-string">"state"</span></span>) &amp;&amp; lowerBatchText.Contains(<span class="hljs-string"><span class="hljs-string">"databases"</span></span>) &amp;&amp; lowerBatchText.Contains(<span class="hljs-string"><span class="hljs-string">"db_name"</span></span>)) <span class="hljs-comment"><span class="hljs-comment">// SELECT [name], [state] FROM [sys].[databases] WHERE [name] = db_name() { // Delegate to current database response responseMessage = _PrepareDatabaseResponse(session); } .... }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3053</a> An excessive expression. Examine the substrings 'name' and 'db_name'. QueryEngine.cs 151 <br><br>   ,       <i>lowerBatchText.Contains(¬´name¬ª)</i>  <i>lowerBatchText.Contains(¬´db_name¬ª)</i>  .   ,      <i>¬´db_name¬ª</i> ,       <i>¬´name¬ª</i> .      <i>¬´name¬ª</i> ,   <i>¬´db_name¬ª</i>    .   ,   <i>lowerBatchText.Contains(¬´name¬ª)</i>  .        ,      <i>¬´name¬ª</i> . <br><br> <b>Issue 52</b> <br><br>      <i>System.Net.Requests</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> PipelineInstruction </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PipelineCallback</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> PipelineEntry entry, ResponseDescription response, ....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (NetEventSource.IsEnabled) NetEventSource.Info(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">$"Command:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{entry?.Command}</span></span></span><span class="hljs-string"> Description:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response?.StatusDescription}</span></span></span><span class="hljs-string">"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// null response is not expected if (response == null) return PipelineInstruction.Abort; .... if (entry.Command == "OPTS utf8 on\r\n") .... .... }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3125</a> The 'entry' object was used after it was verified against null. Check lines: 270, 227. FtpControlStream.cs 270 <br><br>       <i>entry?.Command</i>  <i>response?.Description</i> .   '.'  '?.',      <i>NullReferenceException</i> ,  -       <i>null</i> .      . ,    ,  <i>null</i>   <i>response</i>  (  ,  <i>response == null</i> ),    <i>entry</i>   .  ,  <i>entry</i> ‚Äî <i>null</i> , ,   <i>entry.Command</i> (   '.',   '?.')   . <br><br>        ,       ‚Äî  ,     ,        . <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56a/3fc/f07/56a3fcf075284f021a56249627e518bb.png" alt="Quadro 23"></div><br> ?  .  :) <br><br> <b>Issue 53</b> <br><br>    -    <i>System.Collections.Immutable</i> .        <i>System.Collections.Immutable.ImmutableArray&lt;T&gt;</i> .    <i>IStructuralEquatable.Equals</i>  <i>IStructuralComparable.CompareTo</i> . <br><br>    <i>IStructuralEquatable.Equals</i> .   ,    ,     : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IStructuralEquatable.Equals(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> other, IEqualityComparer comparer) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; Array otherArray = other <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Array; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (otherArray == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theirs = other <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> IImmutableArray; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (theirs != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { otherArray = theirs.Array; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (self.array == <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; otherArray == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (self.array == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } } } IStructuralEquatable ours = self.array; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ours.Equals(otherArray, comparer); }</code> </pre> <br> ?   ‚Äî  ,  .  :) <br><br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3125</a> The 'ours' object was used after it was verified against null. Check lines: 1212, 1204. ImmutableArray_1.cs 1212 <br><br>      <i>Equals</i>   <i>ours</i> ,     <i>return</i> ,    ,       <i>NullReferenceException</i> .       ?    ,       . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IStructuralEquatable.Equals(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> other, IEqualityComparer comparer) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (self.array == <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; otherArray == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (self.array == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { .... } } } IStructuralEquatable ours = self.array; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ours.Equals(otherArray, comparer); }</code> </pre> <br>     ,    <i>ours</i>   <i>self.array</i> .       <i>self.array == null</i> . , <i>self.array</i> ,    <i>ours</i> ,    <i>null</i> .   ,  .      ?   .           . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IStructuralEquatable.Equals(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> other, IEqualityComparer comparer) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= 1 Array otherArray = other as Array; if (otherArray == null) // &lt;= 2 { var theirs = other as IImmutableArray; if (theirs != null) // &lt;= 3 { otherArray = theirs.Array; if (self.array == null &amp;&amp; otherArray == null) { return true; } else if (self.array == null) // &lt;= 4 { return false; } } IStructuralEquatable ours = self.array; // &lt;= 5 return ours.Equals(otherArray, comparer); }</span></span></code> </pre> <br> <b>  1</b> . <i>self.array == this.array</i> (- <i>self = this</i> ). ,       <i>this.array == null</i> . <br><br> <b>  2</b> .     <i>if</i> ,       ,    .    <i>if</i> , ,    <i>other</i>   <i>Array</i>      <i>other</i>    <i>null</i> .     <i>as</i>  <i>otherArray</i>    ,      <i>if</i> . <br><br> <b>  3</b> .      .        <i>if</i> (,     <i>theirs != null</i> ).        <i>then</i> -,        5   <i>self.array == null</i>     4.  ,      <i>if</i>   3,     : <br><br><ul><li>   <i>other</i>  <i>null</i> ; </li><li>    <i>other</i>    <i>IImmutableArray</i> . </li></ul><br> <b>  5</b> .        <i>self.array == null</i> , ,    ,        <i>NullReferenceException</i> . <br><br>    ,     . <br><br> : <i>this.array ‚Äî null</i> . <br><br>  ‚Äî   : <br><br><ul><li> <i>other</i> ‚Äî <i>null</i> ; </li><li> <i>other</i>   <i>Array</i>    ; </li><li> <i>other</i>    <i>Array</i>    ,       <i>IImmutableArray</i> . </li></ul><br> <i>array</i> ‚Äî ,   : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> T[] array;</code> </pre> <br>   <i>ImmutableArray&lt;T&gt;</i> ‚Äî ,      ( ),      <i>array</i>    ,   ‚Äî <i>null</i> .   ,   . <br><br>    ,       , ,      . <br><br>       ,      .    ,  , , . <br><br> <b>  1</b> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> comparer = EqualityComparer&lt;String&gt;.Default; ImmutableArray&lt;String&gt; immutableArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImmutableArray&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); ((IStructuralEquatable)immutableArray).Equals(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, comparer);</code> </pre> <br> <b>  2</b> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> comparer = EqualityComparer&lt;String&gt;.Default; ImmutableArray&lt;String&gt; immutableArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImmutableArray&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); ((IStructuralEquatable)immutableArray).Equals(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>[] { }, comparer);</code> </pre> <br> <b>  3</b> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> comparer = EqualityComparer&lt;String&gt;.Default; ImmutableArray&lt;String&gt; immutableArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImmutableArray&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); ((IStructuralEquatable)immutableArray).Equals(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(Object), comparer);</code> </pre> <br>           ,             . <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/13a/a3b/e8a/13aa3be8a0b68a646aee130773f2c862.png" alt="Quadro 18"></div><br> <b>Issue 54</b> <br><br>    ,     ,    . :)          .  ,         . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> IStructuralComparable.CompareTo(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> other, IComparer comparer) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; Array otherArray = other <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Array; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (otherArray == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> theirs = other <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> IImmutableArray; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (theirs != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { otherArray = theirs.Array; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (self.array == <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; otherArray == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (self.array == <span class="hljs-literal"><span class="hljs-literal">null</span></span> ^ otherArray == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException( SR.ArrayInitializedStateNotEqual, <span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(other)); } } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (otherArray != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { IStructuralComparable ours = self.array; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ours.CompareTo(otherArray, comparer); <span class="hljs-comment"><span class="hljs-comment">// &lt;= } throw new ArgumentException(SR.ArrayLengthsNotEqual, nameof(other)); }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3125</a> The 'ours' object was used after it was verified against null. Check lines: 1265, 1251. ImmutableArray_1.cs 1265 <br><br>  ,       . <br><br>   : <br><br><pre> <code class="cs hljs">Object other = ....; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> comparer = Comparer&lt;String&gt;.Default; ImmutableArray&lt;String&gt; immutableArray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImmutableArray&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); ((IStructuralComparable)immutableArray).CompareTo(other, comparer);</code> </pre> <br>     ,   ,     <i>NullReferenceException</i> . <br><br> <b></b> : <i>other</i> ‚Äî <i>new String[]{ }</i> ; <br><br> : <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eef/d77/08a/eefd7708a187f5060f2074e642f18434.png" alt="Quadro 22"></div><br>  ,       ,      . <br><br> <b>Issue 55</b> <br><br>   <i>System.Net.HttpListener</i>   ,  ,  ,       .          copy-paste.    ,    ,      : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> IAsyncResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BeginRead</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] buffer, ....</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (NetEventSource.IsEnabled) { NetEventSource.Enter(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); NetEventSource.Info(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"buffer.Length:"</span></span> + buffer.Length + <span class="hljs-string"><span class="hljs-string">" size:"</span></span> + size + <span class="hljs-string"><span class="hljs-string">" offset:"</span></span> + offset); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(buffer)); } .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> The 'buffer' object was used before it was verified against null. Check lines: 51, 53. HttpRequestStream.cs 51 <br><br>    <i>ArgumentNullException</i>   <i>buffer == null</i>    ,  <i>null</i> ‚Äî     . ,    <i>NetEventSource.IsEnabled</i> ‚Äî <i>true</i> ,    <i>buffer</i> ‚Äî <i>null</i> ,     <i>NullReferenceException</i>    <i>buffer.Length</i> . ,   <i>buffer == null</i>       . <br><br>  PVS-Studio,         : <br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> The 'buffer' object was used before it was verified against null. Check lines: 49, 51. HttpResponseStream.cs 49 </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> The 'buffer' object was used before it was verified against null. Check lines: 74, 75. HttpResponseStream.cs 74 </li></ul><br> <b>Issue 56</b> <br><br>       <i>System.Transactions.Local</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EnterState</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">InternalTransaction tx</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tx._outcomeSource._isoLevel == IsolationLevel.Snapshot) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> TransactionException.CreateInvalidOperationException( TraceSourceType.TraceSourceLtm, SR.CannotPromoteSnapshot, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, tx == <span class="hljs-literal"><span class="hljs-literal">null</span></span> ? Guid.Empty : tx.DistributedTxId); } .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3095</a> The 'tx' object was used before it was verified against null. Check lines: 3282, 3285. TransactionState.cs 3282 <br><br>        <i>InvalidOperationException</i> .          <i>tx</i> ,       <i>null</i> ,      <i>NullReferenceException</i>    <i>tx.DistributedTxId</i> .   , ,  <i>tx</i> ‚Äî <i>null</i>    ,       <i>if</i>        <i>tx</i> ‚Äî <i>tx._outcomeSource._isoLevel</i> . <br><br> <b>Issue 57</b> <br><br>    <i>System.Runtime.Caching</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetLimit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cacheMemoryLimitMegabytes</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> cacheMemoryLimit = cacheMemoryLimitMegabytes; cacheMemoryLimit = cacheMemoryLimit &lt;&lt; MEGABYTE_SHIFT; _memoryLimit = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">// never override what the user specifies as the limit; // only call AutoPrivateBytesLimit when the user does not specify one. if (cacheMemoryLimit == 0 &amp;&amp; _memoryLimit == 0) { // Zero means we impose a limit _memoryLimit = EffectiveProcessMemoryLimit; } else if (cacheMemoryLimit != 0 &amp;&amp; _memoryLimit != 0) { // Take the min of "cache memory limit" and // the host's "process memory limit". _memoryLimit = Math.Min(_memoryLimit, cacheMemoryLimit); } else if (cacheMemoryLimit != 0) { // _memoryLimit is 0, but "cache memory limit" // is non-zero, so use it as the limit _memoryLimit = cacheMemoryLimit; } .... }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a> Expression 'cacheMemoryLimit != 0 &amp;&amp; _memoryLimit != 0' is always false. CacheMemoryMonitor.cs 250 <br><br>     ,  ,     ‚Äî <i>cacheMemoryLimit != 0 &amp;&amp; _memoryLimit != 0</i> ‚Äî     <i>false</i> .   <i>_memoryLimit</i>   0 (   <i>if</i> ),    &amp;&amp;   <i>false</i> , ,     <i>false</i> . <br><br> <b>Issue 58</b> <br><br>        <i>System.Diagnostics.TraceSource</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Pop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { StackNode n = _stack.Value; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Pop(); } _stack.Value = n.Prev; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n.Value; }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3125</a> The 'n' object was used after it was verified against null. Check lines: 115, 111. CorrelationManager.cs 115 <br><br>  . -  <i>n == null</i> ,  <i>null</i> ‚Äî      .    ‚Äî      <i>NullReferenceException</i>      ‚Äî <i>n.Prev</i> .  <i>n</i>        <i>null</i> ,   <i>base.Pop()</i>       . <br><br> <b>Issue 59</b> <br><br>      <i>System.Drawing.Primitives</i> .      .  : <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToHtml</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Color c</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> colorString = <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c.IsEmpty) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> colorString; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ColorUtil.IsSystemColor(c)) { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (c.ToKnownColor()) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ActiveBorder: colorString = <span class="hljs-string"><span class="hljs-string">"activeborder"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.GradientActiveCaption: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ActiveCaption: colorString = <span class="hljs-string"><span class="hljs-string">"activecaption"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.AppWorkspace: colorString = <span class="hljs-string"><span class="hljs-string">"appworkspace"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.Desktop: colorString = <span class="hljs-string"><span class="hljs-string">"background"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.Control: colorString = <span class="hljs-string"><span class="hljs-string">"buttonface"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ControlLight: colorString = <span class="hljs-string"><span class="hljs-string">"buttonface"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ControlDark: colorString = <span class="hljs-string"><span class="hljs-string">"buttonshadow"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ControlText: colorString = <span class="hljs-string"><span class="hljs-string">"buttontext"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ActiveCaptionText: colorString = <span class="hljs-string"><span class="hljs-string">"captiontext"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.GrayText: colorString = <span class="hljs-string"><span class="hljs-string">"graytext"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.HotTrack: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.Highlight: colorString = <span class="hljs-string"><span class="hljs-string">"highlight"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.MenuHighlight: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.HighlightText: colorString = <span class="hljs-string"><span class="hljs-string">"highlighttext"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.InactiveBorder: colorString = <span class="hljs-string"><span class="hljs-string">"inactiveborder"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.GradientInactiveCaption: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.InactiveCaption: colorString = <span class="hljs-string"><span class="hljs-string">"inactivecaption"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.InactiveCaptionText: colorString = <span class="hljs-string"><span class="hljs-string">"inactivecaptiontext"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.Info: colorString = <span class="hljs-string"><span class="hljs-string">"infobackground"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.InfoText: colorString = <span class="hljs-string"><span class="hljs-string">"infotext"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.MenuBar: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.Menu: colorString = <span class="hljs-string"><span class="hljs-string">"menu"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.MenuText: colorString = <span class="hljs-string"><span class="hljs-string">"menutext"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ScrollBar: colorString = <span class="hljs-string"><span class="hljs-string">"scrollbar"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ControlDarkDark: colorString = <span class="hljs-string"><span class="hljs-string">"threeddarkshadow"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ControlLightLight: colorString = <span class="hljs-string"><span class="hljs-string">"buttonhighlight"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.Window: colorString = <span class="hljs-string"><span class="hljs-string">"window"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.WindowFrame: colorString = <span class="hljs-string"><span class="hljs-string">"windowframe"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.WindowText: colorString = <span class="hljs-string"><span class="hljs-string">"windowtext"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c.IsNamedColor) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (c == Color.LightGray) { <span class="hljs-comment"><span class="hljs-comment">// special case due to mismatch between Html and enum spelling colorString = "LightGrey"; } else { colorString = c.Name; } } else { colorString = "#" + cRToString("X2", null) + cGToString("X2", null) + cBToString("X2", null); } return colorString; }</span></span></code> </pre> <br> -,    ‚Ä¶    ?   ,  ,     . <br><br>    : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (c.ToKnownColor()) { .... <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.Control: colorString = <span class="hljs-string"><span class="hljs-string">"buttonface"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KnownColor.ControlLight: colorString = <span class="hljs-string"><span class="hljs-string">"buttonface"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3139</a> Two or more case-branches perform the same actions. ColorTranslator.cs 302 <br><br>    ,  ,   - .   ,            ,   <i>case</i> ,    .    copy-paste   ,   . <br><br>    .       <i>ToHtml</i>  <i>¬´buttonface¬ª</i> ,         (): <br><br><ul><li> <i>SystemColors.Control</i> ; </li><li> <i>SystemColors.ControlLight</i> . </li></ul><br>         ARGB,   : <br><br><ul><li> <i>SystemColors.Control</i> ‚Äî <i>(255, 240, 240, 240)</i> ; </li><li> <i>SystemColors.ControlLight ‚Äî (255, 227, 227, 227)</i> . </li></ul><br>      ( <i>¬´buttonface¬ª</i> )    ‚Äî <i>FromHtml</i> ,   <i>Control (255, 240, 240, 240)</i> .     <i>FromHtml</i>  <i>ControlLight</i> ?  Sim      ,    (  )  .      : <br><br><pre> <code class="cs hljs">s_htmlSysColorTable[<span class="hljs-string"><span class="hljs-string">"threedhighlight"</span></span>] = ColorUtil.FromKnownColor(KnownColor.ControlLight);</code> </pre> <br> , <i>FromHtml</i>   <i>ControlLight (255, 227, 227, 227)</i>   <i>¬´threedhighlight¬ª</i> .  ,         <i>case KnownColor.ControlLight</i> . <br><br> <b>Issue 60</b> <br><br>        <i>System.Text.RegularExpressions</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TextposDescription</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sb = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> remaining; sb.Append(runtextpos); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sb.Length &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) sb.Append(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span> - sb.Length); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (runtextpos &gt; runtextbeg) sb.Append(RegexCharClass.CharDescription(runtext[runtextpos - <span class="hljs-number"><span class="hljs-number">1</span></span>])); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> sb.Append(<span class="hljs-string"><span class="hljs-string">'^'</span></span>); sb.Append(<span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>); remaining = runtextend - runtextpos; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = runtextpos; i &lt; runtextend; i++) { sb.Append(RegexCharClass.CharDescription(runtext[i])); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sb.Length &gt;= <span class="hljs-number"><span class="hljs-number">64</span></span>) { sb.Length = <span class="hljs-number"><span class="hljs-number">61</span></span>; sb.Append(<span class="hljs-string"><span class="hljs-string">"..."</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { sb.Append(<span class="hljs-string"><span class="hljs-string">'$'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sb.ToString(); }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3137</a> The 'remaining' variable is assigned but is not used by the end of the function. RegexRunner.cs 612 <br><br>    <i>remaining</i>  - ,        . , - ,  , ,     .          -  . <br><br> <b>Issue 61</b> <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddRange</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> first, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> last</span></span></span><span class="hljs-function">)</span></span> { _rangelist.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleRange(first, last)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_canonical &amp;&amp; _rangelist.Count &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; first &lt;= _rangelist[_rangelist.Count - <span class="hljs-number"><span class="hljs-number">1</span></span>].Last) { _canonical = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3063</a> A part of conditional expression is always true if it is evaluated: _rangelist.Count &gt; 0. RegexCharClass.cs 523 <br><br>   ,    ‚Äî <i>_rangelist.Count &gt; 0</i> ‚Äî     <i>true</i> ,     .   ,    <i>_rangelist</i> ,  ,    ‚Äî <i>_rangelist.Add(....)</i> ‚Äî     . <br><br> <b>Issue 62</b> <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3128</a>   <i>System.Drawing.Common</i>  <i>System.Transactions.Local</i> . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ArrayEnumerator</span></span> : <span class="hljs-title"><span class="hljs-title">IEnumerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>[] _array; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> _item; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _index; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _startIndex; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _endIndex; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ArrayEnumerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] array, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> startIndex, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> count</span></span></span><span class="hljs-function">)</span></span> { _array = array; _startIndex = startIndex; _endIndex = _index + count; _index = _startIndex; } .... }</code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3128</a> The '_index' field is used before it is initialized in constructor. PrinterSettings.Windows.cs 1679 <br><br>    <i>_endIndex</i>    ‚Äî <i>_index</i> ,        ‚Äî <i>default(int)</i> ,   <i>0</i> .   <i>_index</i>  .      ‚Äî  <i>_index</i>      ,     . <br><br> <b>Issue 63</b> <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TransactionTable</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _timerInterval; .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">internal</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TransactionTable</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Create a timer that is initially disabled by specifing // an Infinite time to the first interval _timer = new Timer(new TimerCallback(ThreadTimer), null, Timeout.Infinite, _timerInterval); .... // Store the timer interval _timerInterval = 1 &lt;&lt; TransactionTable.timerInternalExponent; .... } }</span></span></code> </pre> <br> <b> PVS-Studio</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3128</a> The '_timerInterval' field is used before it is initialized in constructor. TransactionTable.cs 151 <br><br>    .     <i>_timerInterval</i> (    <i>default(int)</i> )   <i>_timer</i> ,       <i>_timerInterval</i> . <br><br> <b>Issue 64</b> <br><br>      ,     .        ,          .      <i>copy-paste</i> ,        . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProcessNotifyConnection</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">....</span></span></span><span class="hljs-function">)</span></span> { .... WeakReference reference = (WeakReference)( LdapConnection.s_handleTable[referralFromConnection]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( reference != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; reference.IsAlive &amp;&amp; <span class="hljs-literal"><span class="hljs-literal">null</span></span> != ((LdapConnection)reference.Target)._ldapHandle) { .... } .... }</code> </pre> <br> <b> PVS-Studio ()</b> : VXXXX TODO_MESSAGE. LdapSessionOptions.cs 974 <br><br>     ,     <i>reference.IsAlive</i>         ,    <i>WeakReference</i> , <i>reference.Target</i>   <i>null</i> .   ‚Äî      <i>_ldapHandle</i>    <i>NullReferenceException</i> . ,      IsAlive    Microsoft.   docs.microsoft.com ‚Äî " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WeakReference.IsAlive Property</a> ": <i>Because an object could potentially be reclaimed for garbage collection immediately after the IsAlive property returns true, using this property is not recommended unless you are testing only for a false return value.</i> <br><br><h2>     </h2><br>       ,    ? , !    ,    .   ,       ,     ,   ,    ,     .     (  ),      ,    ,      - .  ,  , ,      . <br><br> ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3022</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3063</a> .  ,    : <br><br><pre> <code class="cs hljs">String str = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) ....</code> </pre> <br>   ,     ,   .        <i>lock statement</i>    <i>this</i>  .. ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3090</a> ;    ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3083</a> ;  ,    <i>IDisposable</i> ,      <i>Dispose</i> / <i>Close</i> ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">V3072</a>   ;   . <br><br>   (   ‚Äî ,   - )  ,   .   ,    ,     .        , -     . <br><br>  ,  ,   ‚Äî   <i>   </i>      . <br><br>     .   ‚Äî  ,     . ,   ,         . <br><br>   ‚Äî ,  ,      ,       . ,     ,     . <br><br> ,    ‚Äî      .      /  ,       .         ,       PVS-Studio. <br><br><h2>  Conclus√£o </h2><br>      ,    ‚Äî    ! ,            .       - ,        ‚Äî    . <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ef/dbc/f2d/6efdbcf2d984bef000cf44face04c6a4.png" alt="Quadro 24"></div><br>   ,      ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> PVS-Studio</a>     ,        .   -         ‚Äî    <a href="">support@viva64.com</a> .  :) <br><br>  ! <br><br><h2> PS     .NET Core </h2><br>    ,   !  ‚Äî  . ,       . ,         ,         ‚Äî       ,     ,      /   (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">    </a> ). <br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/898/3b6/5a7/8983b65a74adb29a2113eba12fbec3f1.png" align="left"></a> </p><br><br>        ,      : Sergey Vasiliev. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Checking the .NET Core Libraries Source Code by the PVS-Studio Static Analyzer</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt463537/">https://habr.com/ru/post/pt463537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt463515/index.html">Usando a API HTMS para trabalhar com um banco de dados de rede relacional</a></li>
<li><a href="../pt463525/index.html">Sel√™nio, Selen√≥ide, Selenide, Selendroid ... O que tudo isso significa?</a></li>
<li><a href="../pt463527/index.html">Pop up! Transcrito no iOS</a></li>
<li><a href="../pt463533/index.html">O que todo desenvolvedor deve saber desde o in√≠cio</a></li>
<li><a href="../pt463535/index.html">Verificando o c√≥digo-fonte das bibliotecas do .NET Core pelo analisador est√°tico PVS-Studio</a></li>
<li><a href="../pt463541/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 17. Resumo e roteiro do curso da CCNA</a></li>
<li><a href="../pt463551/index.html">Como se relacionar com os funcion√°rios e organizar o fluxo de trabalho em grandes empresas de TI</a></li>
<li><a href="../pt463553/index.html">"Voc√™ pesquisa no Google?" ou 5 coisas que fizemos ao contratar (mas n√£o mais)</a></li>
<li><a href="../pt463559/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 18. No√ß√µes b√°sicas de roteamento</a></li>
<li><a href="../pt463563/index.html">Treinamento Cisco 200-125 CCNA v3.0. Dia 19. Introdu√ß√£o aos roteadores</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>