<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîù üëºüèæ ü¶ì Comprador misterioso de CityMobile ‚òÅÔ∏è ‚úåÔ∏è ü§∂üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Mi nombre es Narek Markosyan y soy desarrollador de backend en Citimobil. Quiero contarles sobre nuestro bot cerrado de Telegram "Mystery shopper...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comprador misterioso de CityMobile</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/citymobil/blog/484728/">  Hola  Mi nombre es Narek Markosyan y soy desarrollador de backend en Citimobil.  Quiero contarles sobre nuestro <b>bot</b> cerrado de <b>Telegram "Mystery shopper"</b> . <br><br><h2>  Prologo </h2><br>  Nadie usa lentes rosas en CityMobile, entendemos bien que nuestro servicio no es perfecto, por lo tanto, siempre estamos trabajando para mejorarlo.  Los problemas del cliente pueden estar asociados con la aplicaci√≥n, con el c√°lculo del precio, pero con mayor frecuencia con el controlador. <br><br>  Amamos a nuestros conductores e intentamos que su trabajo sea m√°s agradable y rentable, pero debido a un conductor sin escr√∫pulos podemos perder varios clientes y privar a los conductores que honestamente hacen su trabajo. <br><br>  Por esta raz√≥n, decidimos desarrollar una herramienta para responder r√°pidamente a las quejas relacionadas con los conductores. <br><a name="habracut"></a><br><h2>  ¬øPor qu√© necesitamos un bot? </h2><br>  Absolutamente todas las quejas de nuestros clientes son consideradas por los empleados del departamento de soporte, pero no podemos confiar plenamente en las estad√≠sticas recibidas de los clientes por varias razones: <br><br><ul><li>  <b>no todos los clientes</b> dejan comentarios si algo sali√≥ mal; </li><li>  no siempre podemos estar seguros de la <b>objetividad de los</b> clientes; </li><li>  no queremos y no podemos hacer que los clientes tengan <b>muchas preguntas aclaratorias</b> para obtener una imagen completa. </li></ul><br>  Entonces que hacer?  ¬°Pide ayuda a nuestros colegas! <br><br><ul><li>  Es muy probable que los empleados <b>no se olviden</b> de informar un problema; </li><li>  Los empleados son m√°s <b>objetivos</b> .  No hasta el final, pero a√∫n as√≠ :) </li><li>  Puede ir a un colega y conocer todos los detalles necesarios. </li></ul><br>  Por supuesto, cuando surgen problemas, siempre puede llamar a la sala de despacho y prescindir de intermediarios, pero el bot le ayuda a realizar dos tareas importantes: le <b>recuerda</b> a qu√© debe prestar atenci√≥n y le permite informar un problema con solo hacer clic en <b>un bot√≥n</b> . <br><br><h2>  ¬øC√≥mo funciona el bot? </h2><br><img src="https://drive.google.com/uc?export=view&amp;id=1FkPW2NhEdc8Mi1c_n-Oxcjf2a7I46QEL" alt="imagen"><br><br>  El comprador misterioso es muy simple.  Consta de solo dos controladores: <br><br>  El primer controlador toma de nuestros viajes API que se han completado recientemente o est√°n en el estado de "En tr√°nsito", y env√≠a la pregunta del primer viaje al chat. <br><br>  El segundo controlador accede a la API de Telegram y recoge los mensajes no le√≠dos, revisa cada mensaje por turno y env√≠a una respuesta al chat. <br><br>  Por supuesto, fue posible hacer que nuestro servidor enviara autom√°ticamente mensajes al bot del viaje y las respuestas de los usuarios de Telegram no llegaron en lotes, sino al momento del env√≠o, pero despu√©s de las discusiones decidimos hacer el mecanismo descrito anteriormente.  Hubo varias razones para esto: <br><br><ul><li>  Con esta implementaci√≥n, el servicio est√° <b>completamente cerrado</b> para las solicitudes entrantes en todos los puertos, por lo que no podemos temer los intentos de pirater√≠a o los ataques DDOS; </li><li>  Si muchos mensajes provienen de los usuarios al mismo tiempo, Telegram no <b>nos bombardear√° con solicitudes</b> ; </li><li>  Si el bot se vuelve aburrido, <b>no afectar√° a</b> nuestro servidor principal y no afectar√° los procesos comerciales. </li></ul><br>  Elegimos MySQL como base para el bot.  Cualquier base de datos ser√≠a adecuada para nosotros, incluso noSQL, pero elegimos MySQL para facilitar que el departamento de an√°lisis procese los datos necesarios. <br><br>  En cuanto al lenguaje, aqu√≠ elegimos entre PHP y GoLang.  Nos detuvimos en PHP, porque "por qu√© no".  Con la implementaci√≥n que tenemos, no usar√≠amos las principales ventajas de Go, pero complicar√≠amos el desarrollo posterior, no todos nuestros desarrolladores escriben en Go.  Si tienes una idea de qu√© ser√≠a mejor que PHP en esta implementaci√≥n de Go, estar√© encantado de leer en los comentarios. <br><br><h2>  Mejoras </h2><br>  No ha habido muchas mejoras desde la primera versi√≥n.  Despu√©s del lanzamiento oficial, comenzamos a recopilar comentarios y, como resultado, solo encontramos dos problemas. <br><br>  <b>El primer problema es la poca memoria</b> .  En la primera implementaci√≥n, el bot comenz√≥ a interrogar al empleado 5 minutos despu√©s del viaje.  Result√≥ que durante este tiempo el pasajero logr√≥ olvidar algunos detalles, por ejemplo, el n√∫mero de registro del autom√≥vil.  Despu√©s del refinamiento, el bot comenz√≥ la encuesta un minuto despu√©s de que el pasajero se subiera al autom√≥vil.  El bot hizo preguntas, la respuesta a la cual ya se sabe con certeza (limpieza del autom√≥vil, si el autom√≥vil tiene los n√∫meros correctos, etc.).  Despu√©s del viaje, el bot regres√≥ con otro paquete de preguntas, cuyas respuestas se aclaran solo durante el viaje. <br><br>  <b>El segundo problema es que casi siempre todo est√° bien con nosotros</b> .  No importa cu√°n extra√±o pueda sonar, pero desde el punto de vista del bot, esto se ha convertido en un problema.  Nuestros colegas est√°n cansados ‚Äã‚Äãdespu√©s de cada viaje 10 veces para responder "todo est√° bien".  Resolvimos este problema agrupando preguntas: combinamos todas las preguntas que se hicieron durante el viaje y todas las preguntas que se hicieron despu√©s en dos preguntas id√©nticas: "¬øEst√° todo bien?" Con un conjunto diferente de respuestas. <br><br><img src="https://drive.google.com/uc?export=view&amp;id=1qi1ZO7J0HmygCH_lFMaBR_zKCfdSd-0q" alt="imagen"><br><br>  En un futuro cercano, planeamos aumentar el n√∫mero de clientes de confianza y, por lo tanto, hacer que el bot sea m√°s eficiente.  Para hacer esto, deber√° rehacer la autorizaci√≥n y agregar monitoreo a los eventos cr√≠ticos.  Si habr√° cambios interesantes, escribir√© un art√≠culo separado sobre ellos ... </div></div><p>Source: <a href="https://habr.com/ru/post/484728/">https://habr.com/ru/post/484728/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484716/index.html">Deja de llamar a todo AI</a></li>
<li><a href="../484718/index.html">Las impresoras modernas HP se niegan a trabajar sin suscripci√≥n de tinta</a></li>
<li><a href="../484720/index.html">Concierto para una ciudad con una orquesta: qui√©n y por qu√© graba los sonidos de la vida cotidiana</a></li>
<li><a href="../484722/index.html">Qu√© herramientas de desarrollo de Ruby on Rails se adaptan a su proyecto: las mejores gemas de Ruby on Rails para 2020</a></li>
<li><a href="../484724/index.html">Noticias del mundo de OpenStreetMap No. 494 (12.31.2019-06.01.2020)</a></li>
<li><a href="../484730/index.html">Dell Inspiron 7490: port√°til de metal ligero para todos los d√≠as con excelente autonom√≠a</a></li>
<li><a href="../484732/index.html">¬øQu√© es VMware y por qu√© es importante su compatibilidad con SSD?</a></li>
<li><a href="../484734/index.html">Lo que podr√≠a haberse presentado en el CES en los siglos XIX y XX.</a></li>
<li><a href="../484736/index.html">Linux: eliminar el grupo de bloqueo / dev / random</a></li>
<li><a href="../484738/index.html">Tutorial de integraci√≥n continua para Laravel 6 en Google Cloud Run</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>