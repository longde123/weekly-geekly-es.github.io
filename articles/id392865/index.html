<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‡ â™‰ï¸ ğŸ˜‚ FLProg + Hioni Selanjutnya. Pelajaran 3 ğŸ˜¸ ğŸ‘©ğŸ»â€ğŸ¤ ğŸ‘ŠğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dalam pelajaran sebelumnya ( pelajaran 1 , pelajaran 2 ), saya berbicara tentang cara menggambar antarmuka panel HMI Nextion, dan bagaimana mengontrol...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>FLProg + Hioni Selanjutnya. Pelajaran 3</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flprog/blog/392865/"><img src="https://habrastorage.org/files/221/5cc/315/2215cc315ef044008bfbc77b0a9b6a9a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam pelajaran sebelumnya ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pelajaran 1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pelajaran 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), saya berbicara tentang cara menggambar antarmuka panel HMI Nextion, dan bagaimana mengontrol panel menggunakan Arduino. Dalam tutorial ini, saya akan menunjukkan kepada Anda cara memecahkan masalah terbalik dengan mengendalikan papan Arduino menggunakan panel HMI Nextion. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam pelajaran, kita akan memperluas proyek dari pelajaran sebelumnya, menambahkan kontrol kipas, yang akan menyala ketika suhu naik di atas batas yang ditentukan, dan mati ketika suhu turun di bawah batas kedua. Pengaturan akan ditetapkan dari panel, dan disimpan dalam memori non-volatile controller Arduino. Selain itu, kami akan membuat sakelar lampu (on-off) pada panel dan tombol yang dengannya kami akan menyalakan senter (misalnya, untuk memberi sinyal alien).</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Skema yang dimodifikasi dari pelajaran terakhir. </font><font style="vertical-align: inherit;">Senter, cahaya, dan kipas akan mensimulasikan LED. </font></font><br>
<img src="https://habrastorage.org/files/108/887/fc9/108887fc97124f3aa2597671e1fc523c.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desain panel juga telah diselesaikan. </font><font style="vertical-align: inherit;">Dua halaman ditambahkan. </font><font style="vertical-align: inherit;">Selain itu, font yang dimuat di panel diganti. </font><font style="vertical-align: inherit;">Proyek untuk panel ada di arsip, tautan yang diberikan di akhir artikel. </font><font style="vertical-align: inherit;">Dalam komentar pada pelajaran terakhir, mereka benar mengkritik saya karena kurangnya bakat desainer. </font><font style="vertical-align: inherit;">Saya sepenuhnya setuju dengan ini, sehingga halaman baru tidak memiliki desain, fungsionalitas murni. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan halaman baru. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halaman manajemen ("halaman3", ID = 3). </font></font></b><br>
 <img src="https://habrastorage.org/files/f53/475/3e3/f534753e34d541b0a519e9d63ba3ca8a.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan elemen-elemen di halaman.</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hanya bidang teks. </font><font style="vertical-align: inherit;">Tidak ada yang menarik.</font></font></li>
<li>    .    ,       .    .       .  .<br>
<img src="https://habrastorage.org/files/413/8a4/81d/4138a481d6b34b849c9f1c3181800186.PNG"><br>
        ,    ( â€œvscopeâ€  â€œglobalâ€).           .    â€œTouch Press Eventâ€   .<br>
<img src="https://habrastorage.org/files/3d5/dec/ee6/3d5decee64374165a29854797e74f286.PNG"><br>
           4   .<br>
<pre><code class="hljs">page4.evtemp.txt=onV.txt</code></pre><br>
         4   ,   .<br>
<pre><code class="hljs scala">page4.varN.<span class="hljs-keyword"><span class="hljs-keyword">val</span></span>=<span class="hljs-number"><span class="hljs-number">0</span></span></code></pre><br>
      .<br>
<pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">page</span></span> page4</code></pre><br>
<br>
</li>
<li>    .    .  .<br>
<img src="https://habrastorage.org/files/b4a/e51/538/b4ae51538bef45bfb53ce2ae154a46ca.PNG"><br>
   â€œTouch Press Eventâ€.<br>
<img src="https://habrastorage.org/files/9ef/379/001/9ef379001eed40578b7c421a88f8993e.PNG"><br>
         .<br>
<pre><code class="hljs scala">page4.varN.<span class="hljs-keyword"><span class="hljs-keyword">val</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span></code></pre><br>
<br>
</li>
<li> .    .  .<br>
<img src="https://habrastorage.org/files/e89/e52/5af/e89e525af96248868f8506c259f05fec.PNG"><br>
   â€œTouch Press Eventâ€.<br>
<img src="https://habrastorage.org/files/72f/15a/e66/72f15ae66eac437e84eca112fc64e1b0.PNG"><br>
<br>
</li>
<li>    (â€œDual-state buttonâ€) â€“  . <br>
 .<br>
<img src="https://habrastorage.org/files/6c3/8a4/341/6c38a43413f4435a8292add512061f4f.PNG"><br>
       ,    ( â€œvscopeâ€  â€œglobalâ€).         ( â€œstaâ€  â€œimageâ€).     â€œpic0â€   0  â€œpic1â€   1.<br>
<br>
</li>
<li> (â€œButtonâ€) â€“  .  .<br>
<img src="https://habrastorage.org/files/8c5/5e3/e8b/8c55e3e8b7394171adb4436992cc2d2e.PNG"><br>
  .        ,   .  ,  Arduino        UART (  ,  ).              (7  8).      ,      ,    (     ).     (â€œTouch Press Eventâ€)   .<br>
<img src="https://habrastorage.org/files/68f/4e8/233/68f4e82332df4f54ab4a757174a78369.PNG"><br>
     (â€œTouch Release Eventâ€) .<br>
<img src="https://habrastorage.org/files/c04/25f/66d/c0425f66d38244288a707c3f47a0cd87.PNG"><br>
          FLProg.<br>
<br>
</li>
</ol><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jendela untuk mengedit nilai ("halaman4", ID = 4). </font></font></b><br>
<img src="https://habrastorage.org/files/93e/87e/629/93e87e629fd44572a6116bfa7549578c.PNG"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pertimbangkan apa yang termasuk di dalamnya.</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bidang nilai yang dapat diedit. </font><font style="vertical-align: inherit;">Parameter barang. </font></font><br>
<img src="https://habrastorage.org/files/cdc/34f/371/cdc34f3719d044ee9f4fc2e1bd69268d.PNG"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami akan membaca nilai bidang ini dari controller, masing-masing, membuatnya global (atribut "vscope" diatur ke "global").</font></font><br>
<br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tombol entri nilai. </font><font style="vertical-align: inherit;">Semua tombol ini hampir identik, dan berbeda dalam tulisan dan kode pada pengendali event "Touch Press Event". </font><font style="vertical-align: inherit;">Saat Anda mengklik salah satu tombol ini, simbol yang sesuai ditambahkan ke nilai saat ini dari bidang nilai yang diedit.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode dalam "Touch Press Event" untuk masing-masing tombol.</font></font></b><div class="spoiler_text">â€œ0â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"0"</span></span></code></pre><br>
â€œ1â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"1"</span></span></code></pre><br>
â€œ2â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"2"</span></span></code></pre><br>
â€œ3â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"3"</span></span></code></pre><br>
â€œ4â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"4"</span></span></code></pre><br>
â€œ5â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"5"</span></span></code></pre><br>
â€œ6â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"6"</span></span></code></pre><br>
â€œ7â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"7"</span></span></code></pre><br>
â€œ8â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"8"</span></span></code></pre><br>
â€œ9â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"9"</span></span></code></pre><br>
â€œ.â€ <br>
<pre><code class="hljs objectivec">evtemp.txt=evtemp.txt+<span class="hljs-string"><span class="hljs-string">"."</span></span></code></pre><br>
</div></div><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tombol untuk menghapus bidang. </font><font style="vertical-align: inherit;">Saat ditekan, nilai bidang dihapus. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode dalam "Acara Pers Sentuh"</font></font><br>
<pre><code class="hljs objectivec">evtemp.txt=<span class="hljs-string"><span class="hljs-string">""</span></span></code></pre><br>
</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tombol untuk menghapus karakter terakhir. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode dalam "Acara Pers Sentuh"</font></font><br>
<pre><code class="hljs powershell">evtemp.txt=evtemp.txt<span class="hljs-literal"><span class="hljs-literal">-1</span></span></code></pre><br>
   .      .          .             . <br>
<br>
</li>
<li>   .<br>
      ,        (â€œendPressâ€  â€œ endRelâ€)      .<br>
   â€œTouch Press Eventâ€ <br>
<pre><code class="hljs scala">page4.endPress.<span class="hljs-keyword"><span class="hljs-keyword">val</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span></code></pre><br>
   â€œTouch Release Eventâ€<br>
<pre><code class="hljs scala">page4.endRel.<span class="hljs-keyword"><span class="hljs-keyword">val</span></span>=<span class="hljs-number"><span class="hljs-number">1</span></span></code></pre><br>
<br>
</li>
<li>  .          .<br>
   â€œTouch Press Eventâ€ <br>
<pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">page</span></span> page3</code></pre><br>
<br>
</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah panel selesai, buka program FLProg. Ini juga menggunakan proyek dari pelajaran terakhir, sedikit dimodifikasi. File proyek ada di arsip, tautan yang diberikan di akhir posting. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seperti dalam pelajaran terakhir, saya akan menunjukkan papan sirkuit yang sudah jadi dan memberi tahu apa yang terjadi pada mereka. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Papan 7 - â€œManajemen Lenteraâ€</font></font></b><br>
<br>
<img src="https://habrastorage.org/files/20c/561/619/20c561619b51414fbb0c0fdb36da2d1b.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Semuanya sederhana di sini. Blok B46 - â€œPelacakan Klikâ€ (pustaka elemen, folder â€œPanel HMI Selanjutnyaâ€). Pada outputnya, ini sesuai dengan keadaan tombol yang dipantau atau elemen lain dari acara "Touch Press Event" dan "Touch Release Event" pada panel. Nilai ini langsung ditulis ke output yang diikat ke lampu. Blok ini diparameterisasi menggunakan editor blok.</font></font><br>
 <br>
<img src="https://habrastorage.org/files/082/eab/5de/082eab5dedc34570a35e925aa8993a55.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di editor blok, pilih panel, lalu buat halaman baru dan tulis elemen yang diperlukan di atasnya. Saya mengatakan bagaimana melakukan ini pada pelajaran sebelumnya. </font></font><br>
<br>
<img src="https://habrastorage.org/files/b3f/94f/ea2/b3f94fea2181418aa75de4462c9f4206.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gambar seperti itu seharusnya muncul. </font></font><br>
<br>
<img src="https://habrastorage.org/files/fbd/252/df3/fbd252df3fcb4f3c97317d06d8237a49.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai variabel penekan, kami memilih variabel tempat kami menulis unit di tombol "Touch Press Event", dan sebagai variabel rilis, variabel dari tombol "Touch Release Event". </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Papan 8 - "Kontrol Cahaya".</font></font></b><br>
<br>
<img src="https://habrastorage.org/files/884/fdb/e32/884fdbe3225b4449aca906a410ae234e.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Papan yang sangat sederhana. Di sini kita membaca posisi sakelar menggunakan blok B47 - â€œDapatkan parameterâ€ (pustaka elemen -&gt; folder â€œPanel HMI Selanjutnyaâ€ -&gt; folder â€œElemenâ€). Kemudian nilai ini dikirim langsung ke unit output, terpasang ke pencahayaan. Blok ini diparameterisasi menggunakan editor blok.</font></font><br>
<br>
<img src="https://habrastorage.org/files/210/53e/646/21053e6461ea4a86a2d518bfd0f8a3ba.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk mengurangi beban pada pengontrol, kami akan meminta status sakelar satu detik sekali. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Papan 9 - "Akhir dari parameter pengeditan."</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Di forum ini, kami akan memproses klik tombol "Selesai" pada halaman pengeditan parameter. </font></font><br>
<br>
<img src="https://habrastorage.org/files/848/9d8/c85/8489d8c852da426aa4f88e0fca493e44.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan blok B48 - "Pelacakan klik" (pustaka elemen, folder "Panel HMI Selanjutnya") kami menentukan momen penekanan. Di editor blok ini, kita akan membuat halaman 4 dan mengisinya dengan elemen-elemen yang menarik bagi kita. </font></font><br>
<br>
<img src="https://habrastorage.org/files/2f7/818/f29/2f7818f298d34f609971a64c09053c10.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan mengatur blok. </font></font><br>
<br>
<img src="https://habrastorage.org/files/379/1d2/3c6/3791d23c667f416d82bff16ca6c4f37a.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan blok B49 - â€œRtrigâ€ (pustaka elemen, folder â€œPemicuâ€), pilih tepi depan sinyal ketika tombol â€œSelesaiâ€ ditekan dan tuliskan ke dalam variabel â€œPengeditan akhirâ€.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga di bagian depan ini, kita akan membaca nilai variabel yang menyimpan pengidentifikasi bidang yang diedit menggunakan blok B54 - "Dapatkan Parameter" (pustaka elemen -&gt; folder "Panel HMI Berikutnya" -&gt; folder "Elemen"). Blokir pengaturan. </font></font><br>
<br>
<img src="https://habrastorage.org/files/bd2/bc1/c66/bd2bc1c66daf4ba19e8424d74648463b.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami menempatkan nilai yang diperoleh ke dalam variabel "Jumlah bidang yang diedit". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan dengan dorongan yang sama, kita akan langsung membaca nilai baru dari bidang teks menggunakan blok B50 - "Get Parameter" (elemen library -&gt; folder "Nextion HMI Panel" -&gt; folder "Elements"). Blokir pengaturan. </font></font><br>
<br>
<img src="https://habrastorage.org/files/b46/3a0/32b/b463a032bde0419da9d26ca913e8bc2c.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengubah nilai baru dari string menjadi angka dalam format Float menggunakan blok B51 - "Konversi string" (pustaka elemen, folder "Type Conversion"). Blokir pengaturan.</font></font><br>
 <br>
<img src="https://habrastorage.org/files/6a7/516/598/6a7516598acf4c6c83c8512b19841b5f.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengalikan angka dengan 10 menggunakan blok B52 - â€œMUL (*)â€ (pustaka elemen, folder â€œMatematikaâ€), mengubah tipe menjadi Integer menggunakan blok B53 - â€œMengubah Float ke Integerâ€ (pustaka elemen, folder â€œJenis Konversiâ€) dan dimasukkan ke dalam variabel "Nilai baru". </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Papan 10 - "Memproses hasil pengeditan nilai"</font></font></b><br>
<br>
<img src="https://habrastorage.org/files/1e9/970/39c/1e997039cc3c4537bbd4aefe2e5a8e87.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan B55 - blok "Pembanding" (perpustakaan elemen, folder "Perbandingan") kami menentukan bidang mana yang diedit, dan tergantung pada hasilnya, tulis nilai dari variabel "Nilai baru" dengan momentum di variabel "Akhir pengeditan" menjadi salah satu dari dua variabel, di "Setpoint untuk mematikan kipas x10" atau "Setpoint untuk mematikan kipas x10". Juga dengan dorongan yang sama kami memberikan perintah panel untuk pergi ke halaman kontrol menggunakan blok B58 - "Pergi ke halaman" (perpustakaan elemen, folder "Nextion HMI Panel" -&gt; "Halaman" folder). Blokir pengaturan. </font></font><br>
<br>
<img src="https://habrastorage.org/files/f67/1e9/03c/f671e903cfc34abcb725e0e241b3c797.PNG"><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dewan 11 - â€œNilai Pengaturan Penulisan untuk Panel dan EEPromâ€</font></font></b><br>
<br>
<img src="https://habrastorage.org/files/3f4/c77/146/3f4c77146fe9469bb9d6fdc7f7df14b6.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Menggunakan blok B59 - "Detektor untuk mengubah angka" (pustaka elemen, folder "Elemen dasar"), kami menentukan fakta perubahan nilai oleh variabel "Fan On Setpoint x10". Impuls pendek terbentuk pada blok keluaran pada saat mengubah nilai pada input "Nilai". Dengan pulsa ini, nilainya ditulis ke memori non-volatile controller. Ini dapat dilakukan dengan menggunakan blok B65 - "Menulis ke EEPROM" (perpustakaan elemen, folder "EEPROM"). Blok dikonfigurasi menggunakan editor blok. </font></font><br>
 <br>
<img src="https://habrastorage.org/files/2da/162/bf6/2da162bf62144c4a864c8aabd1ad309f.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebelum menulis variabel ke EEPROM, Anda harus membuatnya di sana. Untuk melakukan ini, klik tombol "Buat" di editor blok. Jendela untuk membuat variabel terbuka. </font></font><br>
<br>
<img src="https://habrastorage.org/files/755/94e/c4c/75594ec4cb8243b5a88a7eb857a4b1d6.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di dalamnya kita mengatur nama variabel dan jenisnya. Setelah mengklik tombol siap, blok akan dilampirkan ke variabel ini.</font></font><br>
<br>
<img src="https://habrastorage.org/files/e80/76c/4bd/e8076c4bd256488290502c409775024b.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga, oleh sinyal tentang perubahan variabel, nilainya dibagi dengan konstanta tipe Float sama dengan 10 menggunakan blok B61 - â€œDIV (/)â€ (pustaka elemen, folder â€œMatematikaâ€), berubah menjadi string menggunakan blok B62 - â€œKonversi stringâ€ (elemen library, folder â€œtype conversionâ€), dan dikirim ke panel di bidang yang sesuai menggunakan blok B63 - â€œSet Parameterâ€ (library elemen, folder â€œNextion HMI Panelâ€ -&gt; folder â€œElementsâ€). Pengaturan untuk blok ini. </font></font><br>
<br>
<img src="https://habrastorage.org/files/b4c/ee8/803/b4cee88034a54492a5441d394b2678d1.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Logika kendali oleh variabel â€œFan off setting x10â€ adalah sama, Block settings adalah sebagai berikut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blok B65. </font></font><br>
<br>
<img src="https://habrastorage.org/files/c1d/543/faf/c1d543faf0a0479eb0dea94b12b9e30d.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Blok B68.</font></font><br>
<br>
<img src="https://habrastorage.org/files/77d/c88/6c5/77dc886c54cb4c9981dfed2416a2a397.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang kami akan memastikan bahwa pengaturan dibaca dari EEPROM pada saat controller dimulai. Untuk melakukan ini, masukkan papan baru di bagian paling atas proyek sehingga sirkuit yang terletak di atasnya dijalankan terlebih dahulu. Untuk melakukan ini, pilih latar depan dan klik tombol "Masukkan kartu di depan yang dipilih". </font></font><br>
<br>
<img src="https://habrastorage.org/files/981/31f/ca6/98131fca63f940659d73bd8adf398b80.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beri nama papan baru "Membaca pengaturan dari EEPROM". </font><font style="vertical-align: inherit;">
Papan </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.</font></font></b><br>
<br>
<img src="https://habrastorage.org/files/141/f9d/23a/141f9d23ac12428397de261516f52fb2.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Menggunakan blok Â²72 - â€œRtrigâ€ (pustaka elemen, folder â€œPemicuâ€) kami membuat satu pulsa pendek ketika pengontrol dihidupkan. Menurut dorongan ini, nilai yang dibaca dari memori non-volatile dicatat dalam variabel â€œSetpoint untuk menyalakan kipas x10â€ dan â€œSetpoint untuk mematikan kipas x10â€. Ini terjadi menggunakan blok B71 dan B73 - "Membaca dari EEPROM" (perpustakaan elemen, folder "EEPROM"). Blok diberi parameter menggunakan editor blok.</font></font><br>
<br>
<img src="https://habrastorage.org/files/2da/48a/e59/2da48ae5964a45768b2983e24b7faf63.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parameter blok B71. </font></font><br>
<br>
<img src="https://habrastorage.org/files/377/ce7/122/377ce71220fd460982eea7fbbe704d7f.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Variabel baca dipilih dalam EEPROM dengan menekan tombol "Pilih". </font><font style="vertical-align: inherit;">Jendela pemilihan variabel terbuka. </font></font><br>
<br>
<img src="https://habrastorage.org/files/5d5/b01/d35/5d5b01d35ef74968a8a18367cb27548a.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Parameter blok B73. </font></font><br>
<br>
<img src="https://habrastorage.org/files/518/a99/862/518a998626ad4583ba0f6587a3d4b309.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nah, dewan terakhir dalam proyek ini. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Papan 12. "Kontrol kipas"</font></font></b><br>
<br>
<img src="https://habrastorage.org/files/336/979/a52/336979a526da49e7b457edfcb70c98a0.PNG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Jika suhu saat ini telah melebihi pengaturan "Kipas pada setpoint x10", ini akan dideteksi oleh unit perbandingan B69 dan atur pemicu B70 untuk menyatakan 1, dan ketika suhu turun di bawah pengaturan "Kipas x10 dari setpoint" itu akan dideteksi oleh blok B71, yang mengatur pemicu B70 ke status 0. Keadaan pemicu disediakan ke unit output yang terkait dengan kipas. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arsipkan dengan kode sumber proyek. </font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Demo video</font></font><br>
<br>
<iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://www.youtube.com/embed/j8ZimsAfq8k%3Ffeature%3Doembed&amp;usg=ALkJrhgZ9KwoK2xlJ6VCxBhmao6f-tXIzQ" frameborder="0" allowfullscreen=""></iframe></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id392865/">https://habr.com/ru/post/id392865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id392855/index.html">Ğ‘ÑƒĞ´ÑƒÑ‰ĞµĞµ ÑĞ¸ÑÑ‚ĞµĞ¼ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…</a></li>
<li><a href="../id392857/index.html">Mengubah saklar radio tombol menjadi sentuhan</a></li>
<li><a href="../id392859/index.html">Robot mencuri uang dari kartu bank Rusia</a></li>
<li><a href="../id392861/index.html">Kami menyeduh bir di pembuat kopi tetes</a></li>
<li><a href="../id392863/index.html">Rahasia kecil dari artis Alexei Leonov</a></li>
<li><a href="../id392867/index.html">Orang Cina mengedit DNA embrio manusia untuk kedua kalinya</a></li>
<li><a href="../id392869/index.html">Airbus dan Siemens akan membuat mesin pesawat terbang listrik dan hybrid</a></li>
<li><a href="../id392873/index.html">Detektor CO (karbon monoksida). Apa itu dan mengapa itu perlu?</a></li>
<li><a href="../id392875/index.html">Penemuan otomatis untuk domain publik</a></li>
<li><a href="../id392877/index.html">Perpisahan dengan blog FLProg (UPD - perpisahan dibatalkan, kami bekerja lebih lanjut)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>