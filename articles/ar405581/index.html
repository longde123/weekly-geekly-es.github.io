<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ต๐ฟ ๐๐ผ ๐บ ููุชุงุญ ููุงุฆู ุชููุงุฆู ูุน ุชุญูู MK ๐จ๐พโโ๏ธ ๐ฌ ๐จ๐ฟโ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ููุงุฑุณุฉ ุฑุงุฏูู ุงูููุงุฉ ุ ุฃุญูุงููุง ุชููู ููุงู ุญุงุฌุฉ ููููุงู ุจุดูุก ูุง ุนูู ูุญุฏุฉ ุงูุชุญูู ุงูุฏูููุฉ. ุฅุฐุง ููุช ูุง ุชูุนู ูุฐุง ุงูููุน ูู ุงูุญุฑู ุทูุงู ุงูููุช ุ ูุนููู ุงูุจุญุซ ูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุชุงุญ ููุงุฆู ุชููุงุฆู ูุน ุชุญูู MK</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/405581/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/web/263/1bc/d85/2631bcd85f59492fbe35cfccc226fb15.jpg" alt="ุงูุตูุฑุฉ"></div><br>  ูู ููุงุฑุณุฉ ุฑุงุฏูู ุงูููุงุฉ ุ ุฃุญูุงููุง ุชููู ููุงู ุญุงุฌุฉ ููููุงู ุจุดูุก ูุง ุนูู ูุญุฏุฉ ุงูุชุญูู ุงูุฏูููุฉ.  ุฅุฐุง ููุช ูุง ุชูุนู ูุฐุง ุงูููุน ูู ุงูุญุฑู ุทูุงู ุงูููุช ุ ูุนููู ุงูุจุญุซ ููุชุฑุฉ ุทูููุฉ ุนู ุญู ุงูุฏุงุฆุฑุฉ ุงูุถุฑูุฑู ูุงูููุชุจุงุช ุงูููุงุณุจุฉ ูู MK ุ ููุง ูุณูุญ ูู ุจุญู ุงููุดููุฉ ุจุณุฑุนุฉ.  ูู ุงูุขููุฉ ุงูุฃุฎูุฑุฉ ุ ุฃุฑุฏุช ุนูู ููุชุงุญ ููุงุฆู ุชููุงุฆู.  ูู ูุฐู ุงูุนูููุฉ ุ ูุงู ุนูู ุงุณุชุฎุฏุงู ุงูุนุฏูุฏ ูู ููุฒุงุช Atmega MK ูู ูุดุฑูุน ูุงุญุฏ ูุถุบูุท.  ูููู ูุฃููุฆู ุงูุฐูู ูุจุฏุฃูู ูู ุฏุฑุงุณุฉ AVR ุ ุฃู ุงูุชุจุฏูู ูู arduino ุฃู ุจุฑูุงูุฌ MK ุฃุญูุงููุง ุฃู ูููููุง ูุทุนูุง ูููุฏุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุงุณุชุฎุฏููุง ูู ุงููุดุฑูุน. <br><a name="habracut"></a><br>  ููุฑุช ูู ููุชุงุญ ุงูููุงุฆู ูุฌูุงุฒ ูุฑุจุท ุงูููุงุฆู ุชููุงุฆููุง ุจุฌูุงุฒ ุงูุฅุฑุณุงู ูุงูุงุณุชูุจุงู ุ ููู ุงูุฃูุณุจ ููุทุงู ุงูุนูู ูู ุงูููุฌุงุช ุงููุตูุฑุฉ.  ูุฏู ููุงุฆูุงู: V ุงูููููุจ ูุงูุทุงุฆุฑุฉ ุงูุฃุฑุถูุฉ ุ ูููุง ูุชุตูุงู ุจููุงูู ููุงุฆู MFJ ุ ุญูุซ ูููู ุชุจุฏููููุง ุนู ุจุนุฏ.  ููุงู ููุชุงุญ ูุฏูู ุฐู ุนูุงูุฉ ุชุฌุงุฑูุฉ MFJ ุ ูุงูุฐู ุฃุฑุฏุช ุงุณุชุจุฏุงูู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/web/b6e/63f/073/b6e63f07338f40babb1c1cfb06eed94f.gif" alt="ุงูุตูุฑุฉ"></div><br>  ููุชุจุฏูู ุงูุชุดุบููู ููููุงุฆูุงุช ุ ูุชู ุชูุตูู ุฒุฑ ูุงุญุฏ ุฅูู MK.  ููุฏ ููุช ุจุชููููู ูุชุฐูุฑ ุงูููุงุฆู ุงูููุถู ููู ูุทุงู: ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ ูุฃูุซุฑ ูู 3 ุซูุงูู ุ ูุชู ุชุฐูุฑ ุงูููุงุฆู ุงููุญุฏุฏ ูุชุญุฏูุฏู ุจุดูู ุตุญูุญ ุชููุงุฆููุง ุจุนุฏ ุงูุชุดุบูู ุงูุชุงูู ููุฌูุงุฒ.  ูุชู ุนุฑุถ ูุนูููุงุช ุญูู ุงููุทุงู ุงูุญุงูู ูุงูููุงุฆู ุงููุญุฏุฏ ูุญุงูุฉ ููุงููุชู ุนูู ุดุงุดุฉ LCD ุฃุญุงุฏูุฉ ุงูุฎุท. <br><br>  ููููู ูุนุฑูุฉ ุงููุทุงู ุงูุฐู ูุนูู ุนููู ุฌูุงุฒ ุงูุฅุฑุณุงู / ุงูุงุณุชูุจุงู ุจุทุฑู ูุฎุชููุฉ: ููููู ููุงุณ ุชุฑุฏุฏ ุงูุฅุดุงุฑุฉ ุ ูููููู ุชููู ุงูุจูุงูุงุช ุนุจุฑ ูุงุฌูุฉ CAT ุ ูููู ุฃุจุณุท ุดูุก ุจุงููุณุจุฉ ูู ูู ุงุณุชุฎุฏุงู ูุงุฌูุฉ ุฌูุงุฒ ุงูุฅุฑุณุงู ูุงูุงุณุชูุจุงู YAESU ูุชูุตูู ููุจุฑ ุตูุช ุฎุงุฑุฌู.  ูุญุชูู ุนูู 4 ุฎุทูุท ุฅุดุงุฑุฉ ุ ูู ุฑูุฒ ุซูุงุฆู ุ ุชุดูุฑ ุฅูู ุงููุทุงู ุงูุญุงูู.  ุฅููุง ุชุนุทู ุฅุดุงุฑุฉ ููุทููุฉ ูู 0 ุฅูู 5 ูููุช ููููู ุชูุตูููุง ุจุฃุฑุฌู MK ูู ุฎูุงู ุฒูุฌ ูู ุงูููุงููุงุช ุงูุทุฑููุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/web/85f/6b9/ebf/85f6b9ebf2aa4fe496fc48501171675e.jpg" alt="ุงูุตูุฑุฉ"></div><br>  ูุฐุง ููุณ ูู ุดูุก.  ูู ูุถุน ุงูุฅุฑุณุงู ุ ูุชู ุฅุฑุณุงู ุฅุดุงุฑุงุช PTT ู ALC ูู ุฎูุงู ููุณ ุงููุงุฌูุฉ.  ูุฐู ุฅุดุงุฑุฉ ููุทููุฉ ุญูู ุชุดุบูู ุฌูุงุฒ ุงูุฅุฑุณุงู (ูุชู ุณุญุจู ุฅูู ุงูุฃุฑุถ) ูุฅุดุงุฑุฉ ุชูุงุธุฑูุฉ ูู 0 ุฅูู -4 ูููุช ุญูู ุชุดุบูู ูุธุงู ุงูุชุญูู ุงูุชููุงุฆู ูู ุทุงูุฉ ุฌูุงุฒ ุงูุฅุฑุณุงู.  ููุฑุฑุช ุฃูุถูุง ููุงุณู ูุนุฑุถู ุนูู ุดุงุดุฉ LCD ูู ูุถุน ุงูุฅุฑุณุงู. <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูููู ุฃู ูุฑุณู ููุงูู MFJ ุฅุดุงุฑุงุช ุฅูู ุฌูุงุฒ ุงูุชุญูู ุนู ุจุนุฏ ูุชู ุถุจุทู ูุฃู ุงูููุงุฆู ูุถุจูุท.  ููููุงู ุจุฐูู ุ ุชุญุชูู ููุญุฉ ุชุญูู ุงูุดุฑูุฉ MFJ ุนูู ูุตุจุงุญู ุชุญูู.  ุจุฏูุงู ูู ูุตุงุจูุญ LED ุ ููุช ุจุชูุตูู ุฃุฌูุฒุฉ optocouplers ูุฃุฑุณูุช ูููุง ุฅุดุงุฑุฉ ุฅูู ุนุถู ุงููููุณุช ุ ุญุชู ุฃุชููู ูู ุฑุคูุฉ ุฌููุน ุงููุนูููุงุช ุนูู ุดุงุดุฉ ูุงุญุฏุฉ.  ูุจุฏู ุงูุฌูุงุฒ ุงูููุงุฆู ูุซู ูุฐุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/web/e33/38f/2f8/e3338f2f8fff4187b523c0adbdda2d23.jpg" alt="ุงูุตูุฑุฉ"></div><br>  ุจุงุฎุชุตุงุฑ ุญูู ูุญููุฉ ุงูุตูุน ูุซู ูู ุดูุก.  ุงูุขู ุนู ุฌุฒุก ุงูุจุฑูุงูุฌ.  ุงูุฑูุฒ ููุชูุจ ูู Atmel Studio (ุชูุฒูู ูุฌุงูู ูู ูููุน Atmel).  ููุถุญ ุงููุดุฑูุน ูููุจุชุฏุฆูู ุงูููุฒุงุช ุงูุชุงููุฉ ูุงุณุชุฎุฏุงู Atmega8 MK ุงูุดููุฑ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฒุฑ ุงูุงุชุตุงู </li><li style=";text-align:right;direction:rtl">  ุฑุจุท ุฅุฏุฎุงู ุงูุฎุท ููุฅุดุงุฑุฉ ุงูุฑูููุฉ ูู ุฌูุงุฒ ุงูุฅุฑุณุงู ูุงูุงุณุชูุจุงู ูุงูููุงูู </li><li style=";text-align:right;direction:rtl">  ุชูุตูู ุฎุฑุฌ ุงูุชุญูู ูู ูุฑุญู ุชุจุฏูู ุงูููุงุฆู </li><li style=";text-align:right;direction:rtl">  ุชูุตูู ุดุงุดุฉ LCD ุฐุงุช ุฎุท ูุงุญุฏ </li><li style=";text-align:right;direction:rtl">  ุงุชุตุงู ุงูุฌุฑุณ ูุฅุฎุฑุงุฌ ุงูุตูุช </li><li style=";text-align:right;direction:rtl">  ADC ุชูุตูู ุฎุท ุงูุฅุฏุฎุงู ุงูุชูุงุธุฑู ูููุงุณ ุงูุฌูุฏ </li><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุงูููุงุทุนุงุช </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ุงููุคูุช ูุญุณุงุจ ุงูููุช ุงูุฐู ูุชู ููู ุงูุถุบุท ุนูู ุฒุฑ </li><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุงูููุงูุฉ ุงูุฏูููุฉ ููุทุงูุฉ </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ุงูุฐุงูุฑุฉ ุบูุฑ ุงููุชุทุงูุฑุฉ ูุชุฎุฒูู ุงูููุงุฆูุงุช ุงููุญุฏุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู UART ูุทุจุงุนุฉ ุงูุชุตุญูุญ </li><li style=";text-align:right;direction:rtl">  ุชูููุฑ ุงูุทุงูุฉ ูู MK ุงูุฎุงูู </li></ol><br>  ูุฐูู ุฏุนููุง ูุจุฏุฃ.  ูู ุณูุงู ุงููุต ุ ุณูููู ููุงู ุฌููุน ุฃููุงุน ุฃุณูุงุก ุงูุชุณุฌููุงุช ูุงูุซูุงุจุช ุงูุชู ุชููุฒ MK ุงููุทุจู.  ูุฐุง ููุณ ุงุฑุฏูููู ุ ููุง ุ ูุณูุก ุงูุญุธ ุ ุนููู ูุฑุงุกุฉ ูุฑูุฉ ุงูุจูุงูุงุช ุนูู MK.  ุฎูุงู ุฐูู ุ ุฃูุช ูุง ุชููู ูุง ุชุนููู ูู ูุฐู ุงูุณุฌูุงุช ูููู ููููู ุชุบููุฑ ููููุง.  ููู ูููู ุงูุจุฑูุงูุฌ ููู ุณูุจูู ููุง ูู. <br><br><h3 style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูู ุจุชูุตูู ุงูุฒุฑ ุจู MK </h3><br>  ูุฐุง ูู ุงูุฃุจุณุท.  ูููู ุจุชูุตูู ุฌูุฉ ุงุชุตุงู ูุงุญุฏุฉ ุจูุฏู MK ุ ุฃูุง ุงูุฒุฑ ุงูุซุงูู ููุชุตู ุจุงูุฃุฑุถ.  ููู ูุนูู ุงูุฒุฑ ุ ุณุชุญุชุงุฌ ุฅูู ุชุดุบูู ุงูููุงูู ุงููุงุจู ููุณุญุจ ูู MK.  ุณูููู ุจุชูุตูู ุงูุฒุฑ ูู ุฎูุงู ุงูููุงููุฉ ูุญุงููุฉ + 5V.  ููููุงู ุจุฐูู ุฃูุฑ ุจุณูุท ููุบุงูุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs">PORTB |= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PB2); <span class="hljs-comment"><span class="hljs-comment">// pullup resistor  </span></span></code> </pre> <br>  ูุจุงููุซู ุ ูุชู ุณุญุจ ุฌููุน ุงููุฏุฎูุงุช ุงูุฑูููุฉ ุงูุชู ูุชู ุงูุชุญูู ูููุง ุจูุงุณุทุฉ ุฎุทุฃ ุฃุฑุถู (optocouplers ุ ุฎุทูุท ุงูุฅุดุงุฑุฉ ูู ุฌูุงุฒ ุงูุฅุฑุณุงู ูุงูุงุณุชูุจุงู ุ ุฅุดุงุฑุฉ PTT) ุฅูู ูุงูู + 5V.  ูู ุจุนุถ ุงูุฃุญูุงู ูููู ูู ุงูุฃูุถู ุงููุญุงู ุฌุณุฏููุง ููุซู ูุฐุง ุงูููุงูู ุงูุฃุตุบุฑ (ุนูู ุณุจูู ุงููุซุงู 10 ูููู) ุจูู ุฅุฏุฎุงู MK ูุญุงููุฉ + 5V ุ ูููู ููุงูุดุฉ ูุฐู ุงููุดููุฉ ุฎุงุฑุฌ ูุทุงู ุงูููุงูุฉ.  ูุธุฑูุง ูุฃู ุฌููุน ุฅุดุงุฑุงุช ุงูุฅุฏุฎุงู ูู ุงููุดุฑูุน ูุงุฏุฑูุง ูุง ุชุบูุฑ ุงูููู ุ ูุชู ุชุญููููุง ุฅูู ุงูุฃุฑุถ ุจูุงุณุทุฉ 10 ููุซูุงุช ูุงูููุงุฑุงุฏ ููุญูุงูุฉ ูู ุงูุชุฏุงุฎู. <br><br>  ุงูุขู ูุฏููุง ููุทูู 1 ุนูุฏ ุงูุฅุฏุฎุงู PB2 ุ ูุนูุฏูุง ุชุถุบุท ุนูู ุงูุฒุฑ ุ ุณูููู ููุทูููุง 0. ุนูุฏ ุงูุถุบุท ุนูู \ ุงูุถุบุท ุ ุชุญุชุงุฌ ุฅูู ุชุชุจุน ุงุฑุชุฏุงุฏ ุงูุงุชุตุงู ููุฒุฑ ุ ูุงูุชุญูู ูู ุฃู ูุณุชูู ุงูุฅุดุงุฑุฉ ูู ูุชุบูุฑ ุจูุฑูุฑ ุงูููุช ุ ุนูู ุณุจูู ุงููุซุงู 50 ูููู ุซุงููุฉ.  ูุชู ุฐูู ูู ุงูุจุฑูุงูุฌ ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!(PINB&amp;(<span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;PINB2)) &amp;&amp; !timer_on) { <span class="hljs-comment"><span class="hljs-comment">//    _delay_ms(50); if( !(PINB&amp;(1&lt;&lt;PINB2)) ) { //        -   passed_secs = 0; timer_on = 1; } }</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุงูุขู ูุตู squeaker </h3><br>  ุณูุนุทู ุฅุดุงุฑุฉ ุชุฃููุฏ ุงูุตูุช ุฃู ุงูููุงุฆู ูุณุฌู ูู ุฐุงูุฑุฉ MK.  ููุจุฑ ุงูุตูุช ูู ูุฌุฑุฏ ุนูุตุฑ ููุฑุถุบุทูุฉ.  ูุชู ุชูุตููู ูู ุฎูุงู ููุงููุฉ ุตุบูุฑุฉ ูููุฏู MK ุ ููู ุฎูุงู ุงุชุตุงู ุซุงูู ุฅูู + 5V.  ููู ูุนูู ูุฐุง ุงูุฌุฑุณ ุ ูุฌุจ ุนููู ุฃููุงู ุชูููู ูุฏู MK ูุฅุฎุฑุงุฌ ุงูุจูุงูุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_buzzer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ PORTB &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PB0); <span class="hljs-comment"><span class="hljs-comment">// buzzer DDRB |= (1 &lt;&lt; PB0); // output PORTB &amp;= ~(1 &lt;&lt; PB0); }</span></span></code> </pre><br>  ุงูุขู ูููู ุงุณุชุฎุฏุงูู.  ููููุงู ุจุฐูู ุ ูุชู ูุชุงุจุฉ ูุธููุฉ ุตุบูุฑุฉ ุชุณุชุฎุฏู ุงูุชุฃุฎูุฑ ุงูุฒููู ููุชุจุฏูู ุจูู ุฃุฑุฌู MK ูู 0 ุฅูู 1 ูุงูุนูุณ ุตุญูุญ.  ุงูุชุจุฏูู ูุน ุงูุชุฃุฎูุฑุงุช ุงููุงุฒูุฉ ูุฌุนู ูู ุงููููู ุชูููุฏ ุฅุดุงุฑุฉ ุตูุชูุฉ 4 ูููููุฑุชุฒ ููุฏุฉ ุญูุงูู ุฑุจุน ุซุงููุฉ ุนูุฏ ุฅุฎุฑุงุฌ MK ุ ููู ุตูุช ุงูุนูุตุฑ ุงูููุฑูุฅุฌูุงุฏู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buzz</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    4 0,25  for(int i=0; i&lt;1000; i++) { wdt_reset(); //    PORTB |= (1 &lt;&lt; PB0); _delay_us(125); PORTB &amp;= ~(1 &lt;&lt; PB0); _delay_us(125); } }</span></span></code> </pre><br>  ููู ุชุนูู ูุธุงุฆู ุงูุชุฃุฎูุฑ ุ ูุง ุชูุณู ุชุถููู ููู ุงูุฑุฃุณ ูุชุนููู ุณุฑุนุฉ ุงููุนุงูุฌ ุซุงุจุชุฉ.  ููู ูุณุงูู ุชุฑุฏุฏ ูุฑูุงู ุงูููุงุฑุชุฒ ุงููุชุตู ุจู MK.  ูู ุญุงูุชู ุ ูุงู ููุงู ููุงุฑุชุฒ 16 ููุฌุง ูุฑุชุฒ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> F_CPU # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> F_CPU 16000000UL #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;util/delay.h&gt;</span></span></span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ูููู ุจุชูุตูู ููุงุฆูุงุช ุชุจุฏูู ุงูุชุชุงุจุน MK </h3><br>  ููุง ุชุญุชุงุฌ ููุท ุฅูู ุชูููู ูุฏู MK ููุนูู ุนูู ุงูุฎุฑูุฌ.  ูุชู ุชูุตูู ูุฑุญู ุงููุตุจ ุจูุฐู ุงูุณุงู ูู ุฎูุงู ุชุฑุงูุฒุณุชูุฑ ูุถุฎู ุจุทุฑููุฉ ููุงุณูุฉ. <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_tuner_relay</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ PORTB &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PB1); <span class="hljs-comment"><span class="hljs-comment">// relay DDRB |= (1 &lt;&lt; PB1); // output PORTB &amp;= ~(1 &lt;&lt; PB1); }</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุงุชุตุงู ุงูุดุงุดุฉ </h3><br>  ุงุณุชุฎุฏูุช ุดุงุดุฉ LCD 1601 ุฃุญุงุฏูุฉ ุงูุฎุท ูุคููุฉ ูู 16 ุญุฑููุง ุ ูุณุชุฎุฑุฌุฉ ูู ุงูุฃุฌูุฒุฉ ุงููุฏููุฉ.  ููุณุชุฎุฏู ุฌูุงุฒ ุชุญูู HD44780 ุงููุนุฑูู ุ ูุฅุฏุงุฑุฉ ุงูุนุฏูุฏ ูู ุงูููุชุจุงุช ุงููุชุงุญุฉ ุนูู ุงูุดุจูุฉ.  ูุชุจ ุดุฎุต ุทูุจ ููุชุจุฉ ุฎูููุฉ ุงููุฒู ููุชุญูู ูู ุงูุนุฑุถ ุ ูุงูุชู ุงุณุชุฎุฏูุชูุง ูู ุงููุดุฑูุน.  ูุชู ุชูููู ุฅุนุฏุงุฏ ุงูููุชุจุฉ ููุฅุดุงุฑุฉ ูู ููู ุงูุฑุฃุณ HD44780_Config.h ุนุฏุฏ ุฃุฑุฌู MK ุงููุชุตูุฉ ุจุฏุจุงุจูุณ ุงูุนุฑุถ ุงููุทููุจุฉ.  ููุช ุจุชุทุจูู ุงุชุตุงู ุนุฑุถ ุนุจุฑ 4 ุฎุทูุท ุจูุงูุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> Data_Length 0 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> NumberOfLines 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> Font 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PORT_Strob_Signal_E PORTC #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIN_Strob_Signal_E 5 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PORT_Strob_Signal_RS PORTC #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIN_Strob_Signal_RS 4 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PORT_bus_4 PORTC #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIN_bus_4 0 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PORT_bus_5 PORTC #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIN_bus_5 1 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PORT_bus_6 PORTC #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIN_bus_6 2 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PORT_bus_7 PORTC #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIN_bus_7 3</span></span></code> </pre><br>  ูุงูุช ุฅุญุฏู ุณูุงุช ูุซูู ุงูุนุฑุถ ุงูุฎุงุต ุจู ุฃูู ุชู ุนุฑุถ ุณุทุฑ ูุงุญุฏ ุนูู ุงูุดุงุดุฉ ูุณุทุฑูู ูู 8 ุฃุญุฑู ุ ูุฐูู ุชู ุฅูุดุงุก ูุฎุฒู ูุคูุช ููุดุงุดุฉ ูู ุงูุจุฑูุงูุฌ ููุฒูุฏ ูู ุงูุนูู ุงููุฑูุญ ูุน ุงูุดุงุดุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init_display</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ PORTC &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PC0); <span class="hljs-comment"><span class="hljs-comment">// display DDRC |= (1 &lt;&lt; PC0); // output PORTC &amp;= ~(1 &lt;&lt; PC0); PORTC &amp;= ~(1 &lt;&lt; PC1); // display DDRC |= (1 &lt;&lt; PC1); // output PORTC &amp;= ~(1 &lt;&lt; PC1); PORTC &amp;= ~(1 &lt;&lt; PC2); // display DDRC |= (1 &lt;&lt; PC2); // output PORTC &amp;= ~(1 &lt;&lt; PC2); PORTC &amp;= ~(1 &lt;&lt; PC3); // display DDRC |= (1 &lt;&lt; PC3); // output PORTC &amp;= ~(1 &lt;&lt; PC3); PORTC &amp;= ~(1 &lt;&lt; PC4); // display DDRC |= (1 &lt;&lt; PC4); // output PORTC &amp;= ~(1 &lt;&lt; PC4); PORTC &amp;= ~(1 &lt;&lt; PC5); // display DDRC |= (1 &lt;&lt; PC5); // output PORTC &amp;= ~(1 &lt;&lt; PC5); LCD_Init(); LCD_DisplEnable_CursOnOffBlink(1,0,0); } /*   16  0-3   40M     4-8   A:GP  A:IV     9-15    : TUNING=, TUNED==, HI-SWR= */ uchar display_buffer[]={' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' '}; // 16    void update_display() { LCD_Init(); LCD_DisplEnable_CursOnOffBlink(1,0,0); //   16      8         LCD for (uchar i=0; i&lt;8; i++){ LCD_Show(display_buffer[i],1,i); LCD_Show(display_buffer[i+8],2,i); } }</span></span></code> </pre><br>  ุชุชูุญ ูุธููุฉ update_display () ุนุฑุถ ูุญุชููุงุช ุงููุฎุฒู ุงููุคูุช ุนูู ุงูุดุงุดุฉ.  ููู ุงูุจุงูุช ูู ุงููุฎุฒู ุงููุคูุช ูู ุฑููุฒ ASCII ูุฃุญุฑู ุงูุฅุฎุฑุงุฌ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุตุญูุญ ุฅุฎุฑุงุฌ ุงูุทุจุงุนุฉ ุฅูู ูููุฐ COM </h3><br>  MK ูุฏูู UART ูููุฏ ุงุณุชุฎุฏูุชู ูุชุตุญูุญ ุงูุจุฑูุงูุฌ.  ุนูุฏ ุชูุตูู MK ุจุงูููุจููุชุฑ ุ ูุง ุนููู ุณูู ุฃู ุชุชุฐูุฑ ุฃู ูุณุชููุงุช ุงูุฅุดุงุฑุฉ ุนูุฏ ุฅุฎุฑุงุฌ MK ุชููู ูู ูุนูุงุฑ TTL ูููุณ RS232 ุ ูุฐุง ูุฃูุช ุจุญุงุฌุฉ ุฅูู ูุญูู ุจุณูุท.  ููุฏ ุงุณุชุฎุฏูุช ูุญูู USB-Serial ุ ูุดุงุจู ุชูุงููุง ุนูู aliexpress.  ุฃู ุจุฑูุงูุฌ ุทุฑูู ุ ุนูู ุณุจูู ุงููุซุงู ูู ุงุฑุฏูููู ุ ููุงุณุจ ููุฑุงุกุฉ ุงูุจูุงูุงุช.  ุฑูุฒ ุฅุนุฏุงุฏ ูููุฐ UART: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> BAUD 9600 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;avr/io.h&gt; // UART      RS232 void uart_init( void ) { /* //   UBRRH = 0; UBRRL = 103; //9600   16  */ #include &lt;util/setbaud.h&gt; UBRRH = UBRRH_VALUE; UBRRL = UBRRL_VALUE; #if USE_2X UCSRA |= (1 &lt;&lt; U2X); #else UCSRA &amp;= ~(1 &lt;&lt; U2X); #endif //8  , 1  ,    UCSRC = ( 1 &lt;&lt; URSEL ) | ( 1 &lt;&lt; UCSZ1 ) | ( 1 &lt;&lt; UCSZ0 ); //     // UCSRB = ( 1 &lt;&lt; TXEN ) | ( 1 &lt;&lt;RXEN ); UCSRB = ( 1 &lt;&lt; TXEN ); } int uart_putc( char c, FILE *file ) { //     while( ( UCSRA &amp; ( 1 &lt;&lt; UDRE ) ) == 0 ); UDR = c; wdt_reset(); return 0; } FILE uart_stream = FDEV_SETUP_STREAM( uart_putc, NULL, _FDEV_SETUP_WRITE ); stdout = &amp;uart_stream;</span></span></span></span></code> </pre><br>  ุจุนุฏ ุฅุนุฏุงุฏ ุฏูู ุงูุฅุฎุฑุงุฌ ุ ููููู ุงุณุชุฎุฏุงู printf ุงููุนุชุงุฏ ููุทุจุงุนุฉ ุฅูู ุงููููุฐ: <br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">printf</span></span>( <span class="hljs-string"><span class="hljs-string">"Start flag after reset = %u\r\n"</span></span>, mcusr_mirror );</code> </pre> <br>  ูุณุชุฎุฏู ุงูุจุฑูุงูุฌ ุทุจุงุนุฉ ุฃุฑูุงู ุญููููุฉ.  ูุง ุชุฏุนู ุงูููุชุจุงุช ุงูุนุงุฏูุฉ ูุถุน ุงูุฅุฎุฑุงุฌ ูุฐุง ุ ูุฐูู ูุงู ุนูู ุชูุตูู ููุชุจุฉ ูุงููุฉ ุนูุฏ ุฑุจุท ูุดุฑูุน.  ุตุญูุญ ุ ุฅูู ูุฒูุฏ ุจุดูู ูุจูุฑ ูู ุญุฌู ุงูุดูุฑุฉ ุ ููู ูุงู ูุฏู ูุฏุฑ ูุจูุฑ ูู ุงูุฐุงูุฑุฉ ุ ูุฐูู ูุงู ุฐูู ุบูุฑ ููุฏู.  ูู ุฎูุงุฑุงุช ุงูุฑุงุจุท ุ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุงูุฎุท: <br><br> <code>-Wl,-u,vfprintf -lprintf_flt</code> <br> <br><h3 style=";text-align:right;direction:rtl">  ุงูุนูู ูุน ุงููููุช ูุงูููุงุทุนุงุช </h3><br>  ูุญุณุงุจ ุงููุชุฑุงุช ุงูุฒูููุฉ ูู ุงูุจุฑูุงูุฌ ุ ูู ุงูููู ุฃู ูููู ูุฏูู ุนุฏุงุฏ ููุช.  ููุงู ุญุงุฌุฉ ูุชุชุจุน ุงูุถุบุท ุนูู ุงูุฒุฑ ูุฃูุซุฑ ูู 3 ุซูุงู ุ ูุจุงูุชุงูู ุ ุชุญุชุงุฌ ุฅูู ุชุฐูุฑ ุงูุฅุนุฏุงุฏุงุช ุงูุฌุฏูุฏุฉ ูู ุงูุฐุงูุฑุฉ ุบูุฑ ุงููุชุทุงูุฑุฉ.  ูููุงุณ ุงูููุช ูู ููุท AVR ุ ุชุญุชุงุฌ ุฅูู ุชูููู ุนุฏุงุฏ ุงููุจุถ ููููุฏ ุงูุณุงุนุฉ ูุงูููุงุทุนุฉ ุงูุชู ุณูุชู ุชูููุฐูุง ุนูุฏูุง ูุตู ุงูุนุฏุงุฏ ุฅูู ุงููููุฉ ุงููุญุฏุฏุฉ.  ููุช ุจุชุนููู ุงููุคูุช ุจุญูุซ ููุชุฌ ููุงุทุนุฉ ุญูุงูู ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุซุงููุฉ.  ูุนุงูุฌ ุงูููุงุทุนุฉ ููุณู ูุญุณุจ ุนุฏุฏ ุงูุซูุงูู ุงููููุถูุฉ.  ูุชุญูู ุงููุชุบูุฑ timer_on ูู ุชุดุบูู / ุฅููุงู ุงููุคูุช.  ูู ุงูููู ุนุฏู ูุณูุงู ุฅุนูุงู ุฌููุน ุงููุชุบูุฑุงุช ุงูุชู ูุชู ุชุญุฏูุซูุง ูู ูุนุงูุฌ ุงูููุงุทุนุฉ ุนูู ุฃููุง ูุชุบูุฑุฉ ุ ูุฅูุง ูุฅู ุงููุชุฑุฌู ููููู "ุชุญุณูููุง" ููู ูุนูู ุงูุจุฑูุงูุฌ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   1    -     void timer1_init( void ) { TCCR1A = 0; //    1 -   /* 16000000 / 1024 = 15625 ,     15625      1  */ //  CTC, ICP1 interrupt sense (falling)(not used) + prescale /1024 +    (not used) TCCR1B = (0 &lt;&lt; WGM13) | (1 &lt;&lt; WGM12) | (0 &lt;&lt; ICES1) | ((1 &lt;&lt; CS12) | (0 &lt;&lt; CS11) | (1 &lt;&lt; CS10)) | (0 &lt;&lt; ICNC1); OCR1A = 15625; //  TIMSK |= (1 &lt;&lt; OCIE1A); } uchar timer_on = 0; volatile uchar passed_secs = 0; //      e ISR(TIMER1_COMPA_vect) { if (timer_on) passed_secs++; }</span></span></code> </pre><br>  ูุชู ุงูุชุญูู ูู ูููุฉ pass_secs ูู ุงูุญููุฉ ุงูุฑุฆูุณูุฉ ููุจุฑูุงูุฌ.  ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ ุ ูุจุฏุฃ ุงููุคูุช ุซู ูุชู ูุญุต ูููุฉ ุงููุคูุช ุฃุซูุงุก ุงูุถุบุท ุนูู ุงูุฒุฑ ูู ุฏูุฑุฉ ุงูุจุฑูุงูุฌ ุงูุฑุฆูุณูุฉ.  ุฅุฐุง ุชุฌุงูุฒุช ูุฐู ุงููููุฉ 3 ุซูุงูู ุ ูุณูุชู ูุชุงุจุฉ EEPROM ุ ููุชููู ุงููุคูุช. <br><br>  ุฃุฎูุฑูุง ูููุณ ุขุฎุฑูุง ุ ุจุนุฏ ูู ุงูุชููุฆุฉ ุ ุชุญุชุงุฌ ุฅูู ุชูููู ุงูููุงุทุนุงุช ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ sei (). <br><br><h3 style=";text-align:right;direction:rtl">  ููุงุณ ูุณุชูู ALC </h3><br>  ููู ูุตููุนุฉ ุจุงุณุชุฎุฏุงู ุงููุญูู ุงูุชูุงุธุฑู ุฅูู ุงูุฑููู ุงููุฏูุฌ (ADC).  ููุช ุจููุงุณ ุงูุฌูุฏ ุนูุฏ ูุฏุฎู ADC7.  ูุฌุจ ุฃู ูุชุฐูุฑ ุฃูู ููููู ููุงุณ ูููุฉ ูู 0 ุฅูู 2.5 ูููุช.  ููุงู ุฌูุฏ ุงูุฅุฏุฎุงู ุงูุฎุงุต ุจู ูู -4V ุฅูู 0V.  ูุฐูู ุ ููุช ุจุชูุตูู MK ูู ุฎูุงู ุฃุจุณุท ููุณู ููุฌูุฏ ุนูู ุงูููุงููุงุช ุ ุจุญูุซ ูููู ูุณุชูู ุงูุฌูุฏ ุนูุฏ ุฏุฎู MK ุนูุฏ ูุณุชูู ูุนูู.  ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุฃูู ุจุญุงุฌุฉ ุฅูู ุฏูุฉ ุนุงููุฉ ุ ูุฐูู ููุช ุจุชุทุจูู ุชุญููู 8 ุจุช (ูููู ูุฑุงุกุฉ ุงูุจูุงูุงุช ููุท ูู ุณุฌู ADCH).  ููุตุฏุฑ ูุฑุฌุนู ุ ุงุณุชุฎุฏูุช ุฃููููุง ุฏุงุฎูููุง ุนูุฏ 2.56 ูููุช ุ ููุฐุง ูุจุณุท ุงูุญุณุงุจุงุช ููููุงู.  ููู ูุนูู ADC ุ ุชุฃูุฏ ูู ุชูุตูู ููุซู 0.1 ยตF ุจูุฏู REF ุนูู ุงูุฃุฑุถ. <br><br>  ูุนูู ADC ูู ุญุงูุชู ุจุดูู ูุณุชูุฑ ุ ููุจูุบ ุนู ููุงูุฉ ุงูุชุญููู ูู ุฎูุงู ุงุณุชุฏุนุงุก ุงูููุงุทุนุฉ ADC_vect.  ูู ุงูุฌูุฏ ูุชูุณุท โโููู ุนุฏุฉ ุฏูุฑุงุช ุชุญููู ูุชูููู ุงูุฎุทุฃ.  ูู ุญุงูุชู ุ ุฃุณุชูุชุฌ ูุชูุณุท โโ2500 ุชุญููู.  ูุจุฏู ูู ุฑูุฒ ADC ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//        ALC #define SAMPLES 2500 //    #define REFERENCEV 2.56 //       #define DIVIDER 2.0 double realV = 0; //     ALC double current_realV = 0; volatile int sampleCount = 0; volatile unsigned long tempVoltage = 0; //     volatile unsigned long sumVoltage = 0; //         void ADC_init() // ADC7 { //   2,56, 8 bit  -   ADCH ADMUX = (1 &lt;&lt; REFS0) | (1 &lt;&lt; REFS1) | (1 &lt;&lt; ADLAR) | (0 &lt;&lt; MUX3) | (1 &lt;&lt; MUX2) | (1 &lt;&lt; MUX1) | (1 &lt;&lt; MUX0); // ADC7 // , free running,   ADCSRA = (1 &lt;&lt; ADEN) | (1 &lt;&lt; ADFR) | (1 &lt;&lt; ADIE) | (1 &lt;&lt; ADPS2) | (1 &lt;&lt; ADPS1) | (1 &lt;&lt; ADPS0); //  128 ADCSRA |= (1 &lt;&lt; ADSC); // Start ADC Conversion } ISR(ADC_vect) //     2500  { if (sampleCount++) //    tempVoltage += ADCH; if (sampleCount &gt;= SAMPLES) { sampleCount = 0; sumVoltage = tempVoltage; tempVoltage = 0; } ADCSRA |=(1 &lt;&lt; ADIF); // Acknowledge the ADC Interrupt Flag } realV = -1.0*(DIVIDER * ((sumVoltage * REFERENCEV) / 256) / SAMPLES - 5.0); //   ALC if (realV &lt; 0.0) realV = 0.0; printf("ALC= -%4.2f\r\n", realV); //     </span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู EEPROM </h3><br>  ูุฐู ุฐุงูุฑุฉ ุบูุฑ ูุชุทุงูุฑุฉ ูู MK.  ูู ุงูุณูู ุงุณุชุฎุฏุงูู ูุชุฎุฒูู ุฌููุน ุฃููุงุน ุงูุฅุนุฏุงุฏุงุช ูููู ุงูุชุตุญูุญ ููุง ุฅูู ุฐูู.  ูู ุญุงูุชูุง ุ ูุชู ุงุณุชุฎุฏุงูู ููุท ูุชุฎุฒูู ุงูููุงุฆู ุงููุญุฏุฏ ูููุฏู ุงููุทููุจ.  ููุฐุง ุงูุบุฑุถ ุ ูุชู ุชุฎุตูุต ุตููู 16 ุจุงูุช ูู EEPROM.  ูููู ููููู ุงููุตูู ุฅููู ูู ุฎูุงู ุงููุธุงุฆู ุงูุฎุงุตุฉ ุงููุญุฏุฏุฉ ูู ููู ุงูุฑุฃุณ avr / eeprom.h.  ุนูุฏ ุจุฏุก ุงูุชุดุบูู ุ ููุฑุฃ ุนุถู ุงููููุณุช ูุนูููุงุช ุญูู ุงูุฅุนุฏุงุฏุงุช ุงููุญููุธุฉ ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ููููู ุจุชุดุบูู ุงูููุงุฆู ุงููุทููุจ ุ ุงุนุชูุงุฏูุง ุนูู ุงููุทุงู ุงูุญุงูู.  ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ ููุชุฑุฉ ุทูููุฉ ุ ูุชู ุชุณุฌูู ูููุฉ ุฌุฏูุฏุฉ ูู ุงูุฐุงูุฑุฉ ุ ูุตุญูุจุฉ ุจุฅุดุงุฑุฉ ุตูุชูุฉ.  ุนูุฏ ุงููุชุงุจุฉ ุฅูู EEPROM ุ ูุชู ุชุนุทูู ุงูููุงุทุนุงุช ููุท ูู ุญุงูุฉ.  ููุฏ ุชููุฆุฉ ุงูุฐุงูุฑุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">EEMEM <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ee_bands[<span class="hljs-number"><span class="hljs-number">16</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//         unsigned char avr_bands[16]; void EEPROM_init(void) { for(int i=0; i&lt;16; i++) { avr_bands[i] = eeprom_read_byte(&amp;ee_bands[i]); if (avr_bands[i] &gt; 1) avr_bands[i] = ANT_IV; //    EEPROM   ,     FF } }</span></span></code> </pre><br>  ููุชุทู ูู ููุฏ ุงููุนุงูุฌุฉ ููุถุบุท ุนูู ุฒุฑ ููุฏุฉ 3 ุซูุงู ูุงููุชุงุจุฉ ุนูู ุงูุฐุงูุฑุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(PINB&amp;(<span class="hljs-number"><span class="hljs-number">1</span></span>&lt;&lt;PINB2)) &amp;&amp; passed_secs &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    3  timer_on = 0; //   read_ant = avr_bands[read_band]; //     cli(); EEPROM_init(); //          sei(); if (read_ant) { avr_bands[read_band] = ANT_GP; } else { avr_bands[read_band] = ANT_IV; } cli(); eeprom_write_byte(&amp;ee_bands[read_band], avr_bands[read_band]); //    EEPROM sei(); buzz(); }</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุงูููุงูุฉ ุงูุฏูููุฉ ููุทุงูุฉ </h3><br>  ููุณ ุณุฑุง ุฃูู ุชุญุช ุธุฑูู ุงูุชุฏุงุฎู ุงูููุฑููุบูุงุทูุณู ุงูููู ูููู ูู MK ุชุฌููุฏู.  ุนูุฏูุง ูููู ุงูุฑุงุฏูู ููุฏ ุงูุชุดุบูู ุ ููุงู ูุซู ูุฐุง ุงูุชุฏุงุฎู ุงูุฐู "ุชุจุฏุฃ ุงููููุงุฉ ุจุงูุญุฏูุซ" ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ุงูุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุดุบูู MK ุจุนูุงูุฉ ูู ุญุงูุฉ ุญุฏูุซ ุชุนููู.  ูุฎุฏู ุฌูุงุฒ ุชูููุช ูุฐุง ุงูุบุฑุถ.  ุงุณุชุฎุฏุงูู ุจุณูุท ููุบุงูุฉ.  ุฃููุงู ุ ูู ุจุชุถููู ููู ุฑุฃุณ avr / wdt.h ูู ุงููุดุฑูุน.  ูู ุจุฏุงูุฉ ุงูุจุฑูุงูุฌ ุ ุจุนุฏ ุฅููุงู ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุ ุชุญุชุงุฌ ุฅูู ุจุฏุก ุงููุคูุช ุนู ุทุฑูู ุงุณุชุฏุนุงุก ูุธููุฉ wdt_enable (WDTO_2S) ุ ุซู ุชุฐูุฑ ุฅุนุงุฏุฉ ุชุนููููุง ุจุดูู ุฏูุฑู ุนู ุทุฑูู ุงุณุชุฏุนุงุก wdt_reset () ุ ูุฅูุง ูุณูุชู ุฅุนุงุฏุฉ ุชุดุบูู MK ููุณู.  ูุชุตุญูุญ ุงูุฃุฎุทุงุก ููุนุฑูุฉ ุณุจุจ ุฅุนุงุฏุฉ ุชุดุบูู MK ุ ููููู ุงุณุชุฎุฏุงู ูููุฉ ุณุฌู MCUSR ุงูุฎุงุต ุ ูุงูุชู ูููู ุชุฐูุฑ ูููุชูุง ุซู ุฅุฎุฑุงุฌูุง ุฅูู ุทุจุงุนุฉ ุงูุชุตุญูุญ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//        //     uint8_t mcusr_mirror __attribute__ ((section (".noinit"))); void get_mcusr(void) \ __attribute__((naked)) \ __attribute__((section(".init3"))); void get_mcusr(void) { mcusr_mirror = MCUSR; MCUSR = 0; wdt_disable(); } printf( "Start flag after reset = %u\r\n", mcusr_mirror );</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุชูููุฑ ุงูุทุงูุฉ ูุนุดุงู ุงูุจูุฆุฉ </h3><br>  ูู ุญูู ุฃู ุนุถู ุงููููุณุช ููุณ ูุดุบููุงู ุจุฃู ุดูุก ุ ุฅูุง ุฃูู ูููู ุฃู ููุงู ูููุชุธุฑ ุงูููุงุทุนุฉ ุงูุชุงููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุชูููุฑ ุงููููู ูู ุงูุทุงูุฉ ุงูููุฑุจุงุฆูุฉ.  ุชุงูู ุ ูููู ููุงุฐุง ูุง ุชุณุชุฎุฏูู ูู ุงููุดุฑูุน.  ุนูุงูุฉ ุนูู ุฐูู ุ ุฅููุง ุจุณูุทุฉ ููุบุงูุฉ.  ูู ุจุชุถููู ููู ุฑุฃุณ avr / sleep.h.  ูุชููู ุฌุณู ุงูุจุฑูุงูุฌ ูู ุญููุฉ ูุงุญุฏุฉ ูุง ููุงุฆูุฉ ุชุญุชุงุฌ ูููุง ุฅูู ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ sleep_cpu () ุ ูุจุนุฏ ุฐูู ููุงู MC ููููุงู ุ ูุชุชููู ุงูุญููุฉ ุงูุฑุฆูุณูุฉ ุญุชู ุชุญุฏุซ ุงูููุงุทุนุฉ ุงูุชุงููุฉ.  ุชุญุฏุซ ุฃุซูุงุก ุชุดุบูู ุงููุคูุช ู ADC ุ ูุฐูู ูู ููุงู MK ููุชุฑุฉ ุทูููุฉ.  ูุชู ุชุญุฏูุฏ ูุถุน ุงูุฅุณุจุงุช ุนูุฏูุง ุชุชู ุชููุฆุฉ MK ุนู ุทุฑูู ุงุณุชุฏุนุงุก ูุธููุชูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> set_sleep_mode(SLEEP_MODE_IDLE); <span class="hljs-comment"><span class="hljs-comment">//     IDLE sleep_enable();</span></span></code> </pre><br>  ูุฐุง ูู ุดูุก ุงูุขู.  ููุฏ ููุช ุจุงูุชุจุฏูู ุ ูุนูู ุจูุฌุงุญ ูู ูุญุทุฉ ุฅุฐุงุนุฉ ุงูููุงุฉ ุจูุง ูุดู.  ุขูู ุฃู ุชููู ุงูููุงุฏ ุงูููุฏูุฉ ูููุฏุฉ ูููุจุชุฏุฆูู. <br><br>  73 ุฏู R2AJP </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar405581/">https://habr.com/ru/post/ar405581/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar405571/index.html">ุนูุงุตุฑ ูุธุงู ุงูุงุจุชูุงุฑ ุงููุทูู ุงูุฃูุฑููู ุ ุงูุฌุฒุก ุงูุฃูู: ุจูุฆุฉ ุงูุฃุนูุงู ูุงูุถุฑุงุฆุจ ูุงูุชุฌุงุฑุฉ ูุงูุณูุงุณุฉ ุงูุงูุชุตุงุฏูุฉ</a></li>
<li><a href="../ar405573/index.html">ูุธุงู ุงูุฅูุฐุงุฑ ุงูุขูู ูููุฌูู</a></li>
<li><a href="../ar405575/index.html">ูุฑุงุฌุนุฉ ุงููุงุชู ุงูุฐูู ASUS ZenFone 4 Max</a></li>
<li><a href="../ar405577/index.html">ูุธุงู ุงูุงุจุชูุงุฑ ุงููุทูู ุงูุฃูุฑููู</a></li>
<li><a href="../ar405579/index.html">"ุตุจุงุญ ุงูุฎูุฑ ููุชูุงู!": ููููุฉ ุจุฏุก ุชุดุบูู ุฑุงุฏูู ุงูุฅูุชุฑูุช ุงูุฎุงุต ุจู</a></li>
<li><a href="../ar405583/index.html">ุฑุฆูุณ ุงููุญูููุฉ Vibro PartyFon</a></li>
<li><a href="../ar405585/index.html">ุชููู ุดุฑูุฉ ูููููุฏ ูุงุฑุชู ุจุจูุงุก ูููุฐุฌ ุฃููู ุตุงูุญ ููุณูู ูููุณุงุญุฉ ุงูุนูููุฉ</a></li>
<li><a href="../ar405587/index.html">ูููู ููุฒูุงุก ุงูุฌุณููุงุช: 4) ุงูููุฌุงุช ุ ุงููุนุงุฏูุฉ ุงูููุงุณูููุฉ ููุญุฑูุฉ</a></li>
<li><a href="../ar405589/index.html">ุชุณุงุนุฏ Google ููุงุนูุงุช ุงูุงูุฏูุงุฌ ุนูู ุชุณุฎูู ุงูุจูุงุฒูุง ูู ุงูููุงุนู ุจุงุณุชุฎุฏุงู ุจุฑุงูุฌ ุฎุงุตุฉ</a></li>
<li><a href="../ar405591/index.html">ูุณุคููู FAS ูุฎุชุงุฑูู ูุดุบู ุงูุถุฑุงุฆุจ ููุณูุน ุงูุชู ุงุดุชุฑุงูุง ุงูุฑูุณ ูู ุงูุฎุงุฑุฌ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>