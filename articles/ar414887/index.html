<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ถ ๐ณ ๐ต ุฅูุดุงุก ุฎุทุงู ุงููุท ูู ุงููุญุฏุฉ. ุงูุฌุฒุก ุงูุฃูู ๐ ๐จ ๐จ๐ฟโ๐คโ๐จ๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชุถูู ุฎุทุงูุงุช ุงููุทุท ุขููุงุช ููุชุนุฉ ููุซูุฑุฉ ููุงูุชูุงู ููุนุจุฉ. ููููู ุงุณุชุฎุฏุงููุง ููุชุญุฑู ุนุจุฑ ุงููุณุชููุงุช ุ ูุงููุชุงู ูู ุงูุณุงุญุงุช ูุงูุญุตูู ุนูู ุงูุนูุงุตุฑ. ูููู ุนูู ุงูุฑุบู ูู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฅูุดุงุก ุฎุทุงู ุงููุท ูู ุงููุญุฏุฉ. ุงูุฌุฒุก ุงูุฃูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414887/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/348/a3e/e5d/348a3ee5d95a10273c8bc644e3dbc7d9.gif" alt="ุงูุตูุฑุฉ"></div><br>  ุชุถูู ุฎุทุงูุงุช ุงููุทุท ุขููุงุช ููุชุนุฉ ููุซูุฑุฉ ููุงูุชูุงู ููุนุจุฉ.  ููููู ุงุณุชุฎุฏุงููุง ููุชุญุฑู ุนุจุฑ ุงููุณุชููุงุช ุ ูุงููุชุงู ูู ุงูุณุงุญุงุช ูุงูุญุตูู ุนูู ุงูุนูุงุตุฑ.  ูููู ุนูู ุงูุฑุบู ูู ุงูุจุณุงุทุฉ ุงููุงุถุญุฉ ุ ูููู ุฃู ุชููู ููุฒูุงุก ุฅุฏุงุฑุฉ ุงูุญุจู ูุฎูู ุงูุณููู ุงููุงูุนู ุตุนุจุฉ! <br><br>  ูู ุงูุฌุฒุก ุงูุฃูู ูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุ ูููู ุจุชุทุจูู ูุธุงู ุงููุทุท ููู ุซูุงุฆู ุงูุฃุจุนุงุฏ ุงูุฎุงุต ุจูุง ููุชุนูู ูุง ููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุธุงู ุชุตููุจ. </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู ุฌูุงุฒ ุชูุฏูู ุงูุฎุทูุท ูููุตู ุงููุณุงูุฉ ูุฅูุดุงุก ุงูุญุจู. </li><li style=";text-align:right;direction:rtl">  ุณูู ูุนูู ุงูุญุจู ุฃู ููุชู ุญูู ุฃุดูุงุก ุงููุนุจุฉ. </li><li style=";text-align:right;direction:rtl">  ุงุญุณุจ ุฒุงููุฉ ุงูุชุฃุฑุฌุญ ุนูู ุงูุญุจู ูุฃุถู ุงูููุฉ ูู ูุฐุง ุงูุงุชุฌุงู. </li></ul><br><blockquote style=";text-align:right;direction:rtl">  <em>ููุงุญุธุฉ</em> : ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ูุฎุตุต ูููุณุชุฎุฏููู ุงููุชูุฏููู ูุฐูู ุงูุฎุจุฑุฉ ุ ููุง ูุบุทู ููุถูุนุงุช ูุซู ุฅุถุงูุฉ ุงูููููุงุช ุ ูุฅูุดุงุก ูุตูุต GameObject ุฌุฏูุฏุฉ ุ ูุจูุงุก ุงูุฌููุฉ C #.  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุชุญุณูู ููุงุฑุงุช Unity ุงูุฎุงุตุฉ ุจู ุ ูุฑุงุฌุน ุฏุฑูุณ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุดุฑูุน ูู ุงูุจุฏุก ูู Unity</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฏูุฉ ูู Unity Scripting</a> .  ูุธุฑูุง <em>ูุฃูู ูุชู</em> ุงุณุชุฎุฏุงู <em>DistanceJoint2D</em> ูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุ ูุฌุจ ุนููู ุฃูุถูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุงุทูุงุน ุนูู ูุตูุงุช ุงูููุฒูุงุก ูู Unity 2D</a> ุ ุซู ุงูุนูุฏุฉ ุฅูู ูุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ููุท. </blockquote><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ูููุตูู ุฅูู ุงูุนูู </h2><br>  ูู ุจุชูุฒูู <a href="">ุงููุณูุฏุฉ</a> ููุฐุง ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุซู ุงูุชุญูุง ูู ูุญุฑุฑ ุงููุญุฏุฉ.  ูุทููุจ ุงููุญุฏุฉ 2017.1 ุฃู ุฃุนูู ููุชุดุบูู. <br><br>  ุงูุชุญ ูุดูุฏ <em>ุงููุนุจุฉ</em> ูู ูุฌูุฏ <em>Scenes ูุดุงูุฏ ูู</em> ุฃูู ุณูุจุฏุฃ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/973/819/22f/97381922f527deb0b338346d13083c13.png"></div><br>  ูู ุงูููุช ุงูุญุงูู ุ ูุฏููุง ุดุฎุตูุฉ ูุงุนุจ ุจุณูุท (ุณุจููุฉ) ูุฃุญุฌุงุฑ ูุนููุฉ ูู ุงูููุงุก. <br><br>  ุงูููููุงุช ุงููููุฉ ูู GameObject <em>Player</em> ุญุชู ุงูุขู ูู ูุตุงุฏู ุงููุจุณููุงุช ูุงูุฌุณู ุงูุตูุจ ุ ููุง ูุณูุญ ููุง ุจุงูุชูุงุนู ูุน ุงูุฃุดูุงุก ุงููุงุฏูุฉ ุนูู ุงููุณุชูู.  ุฃูุถุง ุ ูุชู ุฅุฑูุงู ูุต ุจุณูุท ููุญุฑูุฉ ( <em>PlayerMovement</em> ) ุจุงูุดุฎุตูุฉ ุ ููุง ูุณูุญ ููุง ุจุงูุงูุฒูุงู ุนูู ุงูุฃุฑุถ ูุฃุฏุงุก ููุฒุงุช ุจุณูุทุฉ. <br><br>  ุงุถุบุท ุนูู ุฒุฑ ุงูุชุดุบูู ูุจุฏุก ุงููุนุจุฉ ุ ูุญุงูู ุงูุชุญูู ูู ุงูุดุฎุตูุฉ.  ุชุญุฑูู <em>A</em> ู <em>D</em> ูุณุงุฑูุง / ูููููุง ุ ูุนูุฏูุง ุชุถุบุท ุนูู <em>ููุชุงุญ ุงููุณุงูุฉ ุ</em> ูุฅููุง ุชููุฒ.  ุญุงูู ุนุฏู ุงูุงูุฒูุงู ูุงูุณููุท ูู ุงูุฌุฑู ุ ูุฅูุง ุณูู ุชููุช! <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/69a/8b5/841/69a8b58415940671c3519ceccfcf6ed7.png"></div><br>  ูุฏููุง ุจุงููุนู ุฃุณุงุณูุงุช ุงูุฅุฏุงุฑุฉ ุ ูููู ุงููุดููุฉ ุงูุฃูุจุฑ ุงูุขู ูู ุงูุงูุชูุงุฑ ุฅูู ุฎุทุงูุงุช ุงููุทุท. <br><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุฎุทุงูุงุช ูุญุจุงู </h2><br>  ูู ุงูุจุฏุงูุฉ ุ ูุจุฏู ูุธุงู ุฎุทุงู ุงููุทุท ุจุณูุทูุง ููุบุงูุฉ ุ ูููู ูู ุฃุฌู ุชูููุฐู ุนุงูู ุงูุฌูุฏุฉ ุ ูู ุงูุถุฑูุฑู ูุฑุงุนุงุฉ ุงูุนุฏูุฏ ูู ุงูุฌูุงูุจ.  ูููุง ููู ุจุนุถ ุงููุชุทูุจุงุช ููููุงููููุงุช ุงููุทุท ุซูุงุฆูุฉ ุงูุฃุจุนุงุฏ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฎุท ุงูุชูุฏูู ูุนุฑุถ ุงูุญุจู.  ุนูุฏูุง ููุชู ุงูุญุจู ุญูู ุงูุฃุดูุงุก ุ ูููููุง ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงููุทุน ุฅูู ุฌูุงุฒ ุชูุฏูู ุงูุฎุท ููุถุน ุงูููู ุนูุฏ ุงูููุงุท ุงูููุงุจูุฉ ูููุงุตู ุงูุญุจู. </li><li style=";text-align:right;direction:rtl">  ุงููุณุงูุฉ Joint2D.  ูููู ุงุณุชุฎุฏุงูู ูุฅุฑูุงู ููุทุฉ ุงูุชุซุจูุช ุงูุญุงููุฉ ูุฎุทุงู ุงููุทุท ุจุญูุซ ูููู ุฃู ุชุชุฃุฑุฌุญ ุณูุฌุชูุง.  ููุง ูุณูุญ ููุง ุจุชุนุฏูู ุงููุณุงูุฉ ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูุฅุทุงูุฉ ุงูุญุจู ูุชููููู. </li><li style=";text-align:right;direction:rtl">  Child GameObject ูุน RigidBody2D ุ ูุงูุชู ูููู ุชุญุฑูููุง ุงุนุชูุงุฏูุง ุนูู ุงููููุน ุงูุญุงูู ูููุทุฉ ุฑุจุท ุงูุฎุทุงู.  ูู ุงูุฌููุฑ ุ ุณุชููู ููุทุฉ ุชุนููู / ุฑุจุท ุงูุญุจู. </li><li style=";text-align:right;direction:rtl">  Raycast ูุฑูู ููู ูุฑุจุท ุงูุฃุดูุงุก. </li></ul><br>  ุญุฏุฏ ูุงุฆู <em>Player</em> ูู ุงูุชุณูุณู ุงููุฑูู ููู ุจุฅุถุงูุฉ GameObject ุชุงุจุน ุฌุฏูุฏ ุจุงุณู <em>RopeHingeAnchor ุฅููู</em> .  ุณูุชู ุงุณุชุฎุฏุงู GameObject ูุฐุง ูุชุญุฏูุฏ ููุถุน ุงูุชุนููู / ููุทุฉ ุฑุจุท ุฎุทุงู ุงููุท. <br><br>  ุฅุถุงูุฉ ููููุงุช <em>SpriteRenderer</em> ู <em>RigidBody2D</em> ุฅูู <em>RopeHingeAnchor</em> . <br><br>  ุจุงููุณุจุฉ ูู SpriteRenderer ุ ูู ุจุชุนููู ุฎุงุตูุฉ <em>Sprite</em> ูุงุณุชุฎุฏุงู ูููุฉ <em>UISprite</em> ูุชุบููุฑ <em>ุงูุชุฑุชูุจ ูู ุงูุทุจูุฉ</em> ุฅูู <em>2</em> .  ูู ุจุชุนุทูู ุงููููู <em>ุจุฅูุบุงุก ุชุญุฏูุฏ ุงููุฑุจุน</em> ุงููุฌุงูุฑ ูุงุณูู. <br><br>  ููููู <em>RigidBody2D ุ ูู</em> ุจุชุนููู ุฎุงุตูุฉ ููุน ุงูุฌุณู ุฅูู <em>Kinematic</em> .  ูู ูุชู ููู ูุฐู ุงูููุทุฉ ุจูุงุณุทุฉ ุงููุญุฑู ุงููุนูู ุ ูููู ุจูุงุณุทุฉ ุงูุฑูุฒ. <br><br>  ุญุฏุฏ ุทุจูุฉ <em>ุงูุญุจู</em> ูุงุถุจุท ููู ุงููููุงุณ X ู Y ูููููู Transform ุนูู <em>4</em> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e18/4aa/8e4/e184aa8e457a1e1d3928966b2ae3bca7.png"></div><br>  ุญุฏุฏ <em>Player</em> ูุฑุฉ ุฃุฎุฑู ููู ุจุฅุฑูุงู ูููู <em>DistanceJoint2D</em> ุงูุฌุฏูุฏ. <br><br>  ุงุณุญุจ <em>RopeHingeAnchor</em> ูู ุงูุชุณูุณู ุงููุฑูู ุฅูู ุฎุงุตูุฉ <em>ุงูุฌุณู ุงููุชุตู ุงููุชุตู</em> <em>ููููู DistanceJoint2D ูุฃููู</em> ุชุดุบูู <em>ุงููุณุงูุฉ</em> <em>ุงูุชููุงุฆูุฉ ููุชูููู</em> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e46/25b/b80/e4625bb804bb2ed2a0c5bee2aed0eade.gif"></div><br>  ูู ุจุฅูุดุงุก ุจุฑูุงูุฌ ูุตู C # ุฌุฏูุฏ ูุณูู <em>RopeSystem</em> ูู ูุฌูุฏ ูุดุฑูุน <em>ุงูุจุฑุงูุฌ ุงููุตูุฉ</em> ูุงูุชุญู ูู ูุญุฑุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. <br><br>  ูู ุจุฅุฒุงูุฉ ุทุฑููุฉ <code>Update</code> . <br><br>  ูู ุฃุนูู ุงููุต ุงูุจุฑูุฌู ุฏุงุฎู <code>RopeSystem</code> ูุฆุฉ <code>RopeSystem</code> ุฃุถู ูุชุบูุฑุงุช ุฌุฏูุฏุฉ ูุฃุณููุจ <code>Awake()</code> ูุฃุณููุจ <code>Update</code> ุงูุฌุฏูุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 public GameObject ropeHingeAnchor; public DistanceJoint2D ropeJoint; public Transform crosshair; public SpriteRenderer crosshairSprite; public PlayerMovement playerMovement; private bool ropeAttached; private Vector2 playerPosition; private Rigidbody2D ropeHingeAnchorRb; private SpriteRenderer ropeHingeAnchorSprite; void Awake() { // 2 ropeJoint.enabled = false; playerPosition = transform.position; ropeHingeAnchorRb = ropeHingeAnchor.GetComponent&lt;Rigidbody2D&gt;(); ropeHingeAnchorSprite = ropeHingeAnchor.GetComponent&lt;SpriteRenderer&gt;(); } void Update() { // 3 var worldMousePosition = Camera.main.ScreenToWorldPoint(new Vector3(Input.mousePosition.x, Input.mousePosition.y, 0f)); var facingDirection = worldMousePosition - transform.position; var aimAngle = Mathf.Atan2(facingDirection.y, facingDirection.x); if (aimAngle &lt; 0f) { aimAngle = Mathf.PI * 2 + aimAngle; } // 4 var aimDirection = Quaternion.Euler(0, 0, aimAngle * Mathf.Rad2Deg) * Vector2.right; // 5 playerPosition = transform.position; // 6 if (!ropeAttached) { } else { } }</span></span></code> </pre> <br>  ุฏุนููุง ูุญูู ูู ุฌุฒุก ุจุงูุชุฑุชูุจ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู ูุฐู ุงููุชุบูุฑุงุช ูุชุชุจุน ุงูููููุงุช ุงููุฎุชููุฉ ุงูุชู ุณูุชูุงุนู ูุนูุง ุงูุจุฑูุงูุฌ ุงููุตู RopeSystem. </li><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุฃุณููุจ <code>Awake</code> ูู ุจุฏุงูุฉ ุงููุนุจุฉ ููุนุทู <code>ropeJoint</code> (ูููู DistanceJoint2D).  ููุง ุฃูู ูุถุจุท <code>playerPosition</code> ุนูู ุงููุถุน ุงูุญุงูู ููุงุนุจ. </li><li style=";text-align:right;direction:rtl">  ูุฐุง ูู ุฃูู ุฌุฒุก ูู ุญููุฉ <code>Update()</code> ุงูุฑุฆูุณูุฉ.  ุฃููุงู ุ ูุญุตู ุนูู ูุถุน ูุคุดุฑ ุงููุงูุณ ูู ุงูุนุงูู ุจุงุณุชุฎุฏุงู <code>ScreenToWorldPoint</code> ุงููุงููุฑุง <code>ScreenToWorldPoint</code> .  ุซู ูุญุณุจ ุงุชุฌุงู ูุธุฑุชูุง ุจุทุฑุญ ููุถุน ุงููุงุนุจ ูู ููุถุน ุงููุงูุณ ูู ุงูุนุงูู.  ุซู ูุณุชุฎุฏูู ูุฅูุดุงุก <code>aimAngle</code> ุ ููู ุชูุซูู ูุฒุงููุฉ ุชูุฌูู ุงููุคุดุฑ.  ุชุฎุฒู ุงููููุฉ ูููุฉ ููุฌุจุฉ ูู ุงูุจูุงุก ุฅุฐุง. </li><li style=";text-align:right;direction:rtl">  <code>aimDirection</code> ูู ุชุทูุฑ ูุฃุชู ูู ููุช ูุงุญู.  ูุญู ููุชููู ููุท ุจูููุฉ Z ุ ูุธุฑูุง ูุฃููุง ูุณุชุฎุฏู ูุงููุฑุง ุซูุงุฆูุฉ ุงูุฃุจุนุงุฏ ุ ููุฐุง ูู ูุธุงู ุงูุชุดุบูู ุงูููุงุจู ุงููุญูุฏ.  ูููู ุจุชูุฑูุฑ <code>aimAngle * Mathf.Rad2Deg</code> ุ ุงูุฐู ูุญูู ุฒุงููุฉ ุงูุฑุงุฏูุงู ุฅูู ุฒุงููุฉ ุจุงูุฏุฑุฌุงุช. </li><li style=";text-align:right;direction:rtl">  ุชุชู ูุฑุงูุจุฉ ููุถุน ุงููุงุนุจ ุจุงุณุชุฎุฏุงู ูุชุบูุฑ ููุงุณุจ ูุณูุญ ูู ุจุนุฏู ุงูุฑุฌูุน ุจุงุณุชูุฑุงุฑ ุฅูู <code>transform.Position</code> . </li><li style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ูุฏููุง <code>if..else</code> ุจูุงุก ุ ูุงูุฐู <code>if..else</code> ูุฑูุจูุง ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุญุจู ูุฑุชุจุทูุง ุจููุทุฉ ุงูุฑุจุท. </li></ol><br>  ุงุญูุธ ุงููุต ุงูุจุฑูุฌู ูุงุฑุฌุน ุฅูู ุงููุญุฑุฑ. <br><br>  ูู ุจุฅุฑูุงู ูููู <em>RopeSystem</em> ุจูุงุฆู ุงููุดุบู ูุชุนููู ุงูููููุงุช ุงููุฎุชููุฉ ูู ุงูุญููู ุงูุนุงูุฉ ุงูุชู ุฃูุดุฃูุงูุง ูู ุงูุจุฑูุงูุฌ ุงููุตู <em>RopeSystem</em> .  ุงุณุญุจ <em>Player</em> ู <em>Crosshair</em> ู <em>RopeHingeAnchor</em> ุฅูู ุงูุญููู ุงูููุงุณุจุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <em>Rope Hinge Anchor</em> : RopeHingeAnchor </li><li style=";text-align:right;direction:rtl">  <em>ุญุจู ูุดุชุฑู</em> : ูุงุนุจ </li><li style=";text-align:right;direction:rtl">  <em>ุงูุชูุงุทุน</em> : ุงูุชูุงุทุน </li><li style=";text-align:right;direction:rtl">  <em>ุงูุชูุงุทุน ุงูุนูุฑูุช</em> : ุงูุชูุงุทุน </li><li style=";text-align:right;direction:rtl">  <em>ุญุฑูุฉ</em> ุงููุงุนุจ: ูุงุนุจ </li></ul><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/e97/9ca/d2e/e979cad2e2690cc65e9fe237a9f6c47a.gif"></div><br>  ูููู ุงูุขู ุจูู ูุฐู ุงูุญุณุงุจุงุช ุงููุนูุฏุฉ ุ ูููู ุญุชู ุงูุขู ูุง ููุฌุฏ ุชุตูุฑ ูููู ุฃู ูุธูุฑูุง ูู ุงูุนูู.  ููู ูุง ุชููู ุ ุณููุนู ุฐูู ูุฑูุจูุง. <br><br>  ุงูุชุญ ุงูุจุฑูุงูุฌ ุงููุตู <em>RopeSystem</em> ูุฃุถู ุทุฑููุฉ ุฌุฏูุฏุฉ ุฅููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetCrosshairPosition</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> aimAngle</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!crosshairSprite.enabled) { crosshairSprite.enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = transform.position.x + <span class="hljs-number"><span class="hljs-number">1f</span></span> * Mathf.Cos(aimAngle); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y = transform.position.y + <span class="hljs-number"><span class="hljs-number">1f</span></span> * Mathf.Sin(aimAngle); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> crossHairPosition = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(x, y, <span class="hljs-number"><span class="hljs-number">0</span></span>); crosshair.transform.position = crossHairPosition; }</code> </pre> <br>  ุชุถุน ูุฐู ุงูุทุฑููุฉ ุงูุจุตุฑ ุจูุงุกู ุนูู ุงููุฏู ุงููููููุฉ (ุงููููุฉ ุงูุนุงุฆูุฉ ุงูุชู ุญุณุจูุงูุง ูู <code>Update()</code> ) ุจุญูุซ ุชุฏูุฑ ุญูู ุงููุดุบู ูุน ูุตู ูุทุฑ 1 ูุญุฏุฉ.  ูููู ุฃูุถูุง ุจุชุถููู ูุทุงู ููุด ูุชุญุฑู ูู ุญุงูุฉ ุนุฏู ูุนู ุฐูู ุจุงููุนู. <br><p style=";text-align:right;direction:rtl">  ูู <code>Update()</code> ูููุง ุจุชุบููุฑ <code>!ropeAttached</code> ููุชุญูู <code>!ropeAttached</code> ุจุญูุซ ูุจุฏู ูุซู ูุฐุง: <br><br></p><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ropeAttached) { SetCrosshairPosition(aimAngle); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { crosshairSprite.enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br>  ูู ุจุญูุธ ุงูุจุฑูุงูุฌ ุงููุตู ูุชุดุบูู ุงููุนุจุฉ.  ุงูุขู ูุฌุจ ุฃู ูููู ุณุจููุฉูุง ูุงุฏุฑูุง ุนูู ุงูุชุตููุจ ุจููุธุฑ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/ffe/b1f/8ca/ffeb1f8ca53fbc0463aad677677fb837.gif"></div><br>  ุงูุฌุฒุก ุงูุชุงูู ูู ุงูููุทู ุงูุฐู ูุฌุจ ุชูููุฐู ูู ููุทุฉ ููู.  ููุฏ ุญุฏุฏูุง ุจุงููุนู ุงุชุฌุงู ุงูุชุตููุจ ุ ูุฐูู ูุญุชุงุฌ ุฅูู ุทุฑููุฉ ุณุชุณุชูุจููุง ููุนููุฉ. <br><br>  ุฃุถู ุงููุชุบูุฑุงุช ุงูุชุงููุฉ ุฃุณูู ุงููุชุบูุฑุงุช ูู ุงูุจุฑูุงูุฌ ุงููุตู <em>RopeSystem</em> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> LineRenderer ropeRenderer; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> LayerMask ropeLayerMask; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ropeMaxCastDistance = <span class="hljs-number"><span class="hljs-number">20f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;Vector2&gt; ropePositions = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Vector2&gt;();</code> </pre> <br>  <em>ุณูุญุชูู LineRenderer</em> ุนูู ุฑุงุจุท ุฅูู ุนุงุฑุถ ุงูุฎุท ุงูุฐู ูุฑุณู ุงูุญุจู.  ูุณูุญ ูู <em>LayerMask</em> ุจุชุฎุตูุต ุทุจูุงุช ุงูููุฒูุงุก ุงูุชู ูููู ุฃู ูุชูุงุนู ูุนูุง ุงูุฎุทุงู.  ุชุญุฏุฏ ูููุฉ <code>ropeMaxCastDistance</code> ุงูุญุฏ ุงูุฃูุตู ูููุณุงูุฉ ุงูุชู ูููู ูู raycast "ุงูุชูุงุทูุง". <br><br>  ุฃุฎูุฑูุง ุ ุณูุชู ุงุณุชุฎุฏุงู ูุงุฆูุฉ ููุงูู Vector2 ูุชุชุจุน ููุงุท ุงูุชูุงู ุงูุญุจู ุ ูุงูุชู ุณููุงูุดูุง ูุงุญููุง. <br><br>  ุฃุถู ุงูุทุฑู ุงูุฌุฏูุฏุฉ ุงูุชุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 private void HandleInput(Vector2 aimDirection) { if (Input.GetMouseButton(0)) { // 2 if (ropeAttached) return; ropeRenderer.enabled = true; var hit = Physics2D.Raycast(playerPosition, aimDirection, ropeMaxCastDistance, ropeLayerMask); // 3 if (hit.collider != null) { ropeAttached = true; if (!ropePositions.Contains(hit.point)) { // 4 //    ,    -  . transform.GetComponent&lt;Rigidbody2D&gt;().AddForce(new Vector2(0f, 2f), ForceMode2D.Impulse); ropePositions.Add(hit.point); ropeJoint.distance = Vector2.Distance(playerPosition, hit.point); ropeJoint.enabled = true; ropeHingeAnchorSprite.enabled = true; } } // 5 else { ropeRenderer.enabled = false; ropeAttached = false; ropeJoint.enabled = false; } } if (Input.GetMouseButton(1)) { ResetRope(); } } // 6 private void ResetRope() { ropeJoint.enabled = false; ropeAttached = false; playerMovement.isSwinging = false; ropeRenderer.positionCount = 2; ropeRenderer.SetPosition(0, transform.position); ropeRenderer.SetPosition(1, transform.position); ropePositions.Clear(); ropeHingeAnchorSprite.enabled = false; }</span></span></code> </pre> <br>  ุฅููู ูุง ููุนูู ุงูุฑูุฒ ุฃุนูุงู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุชู ุงุณุชุฏุนุงุก HandleInput ูู ุญููุฉ <code>Update()</code> ููุณุชูุตู ุจุจุณุงุทุฉ ุฅุฏุฎุงู ุฒุฑู ุงููุงูุณ ุงูุฃููู ูุงูุฃูุณุฑ. </li><li style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุชู ุชุณุฌูู ุงูููุฑ ุงูุฃูุณุฑ ุ ูุชู ุชุดุบูู ุฎุท ุงูุญุจู ููุชู ุฅุทูุงู ุฑุงุฏูู ุซูุงุฆู ุงูุฃุจุนุงุฏ ูู ููุถุน ุงููุงุนุจ ูู ุงุชุฌุงู ุงูุชุตููุจ.  ูุชู ุชุนููู ุงูุญุฏ ุงูุฃูุตู ูููุณุงูุฉ ุจุญูุซ ูุง ูููู ุฅุทูุงู ุงููุงุฑ ุนูู ุงููุท ููู ุนูู ูุณุงูุฉ ูุง ุญุตุฑ ููุง ุ ููุชู ุชุทุจูู ููุงุน ุจุญูุซ ูููู ุชุญุฏูุฏ ุทุจูุงุช ุงูููุฒูุงุก ุงูุชู ูููู ุฃู ูุตุทุฏู ุจูุง ุงูุฃุดุนุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุงููุดู ุนู ุฅุตุงุจุฉ ุดุนุงุนูุฉ ุ ูุฅู <code>ropeAttached</code> ูููู <code>true</code> ุ ููุชู ุงูุชุญูู ูู ูุงุฆูุฉ <code>ropeAttached</code> ุงูุญุจู ููุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ููุทุฉ ููุงู. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุงูุงุฎุชูุงุฑ ุตุญูุญูุง ุ ูุณูุชู ุฅุถุงูุฉ ุฏูุนุฉ ุตุบูุฑุฉ ูู ุงูููุฉ ุฅูู ุงูุจุฒุงูุฉ ุจุญูุซ ุชุฑุชุฏ ููู ุงูุฃุฑุถ ุ ูุชู ุชุดุบูู <code>ropeJoint</code> (DistanceJoint2D) ุ ูุงูุฐู ูุชู ุชุนูููู ุนูู ุงููุณุงูุฉ ุงูุชู ุชุณุงูู ุงููุณุงูุฉ ุจูู ุงูุจุฒุงู ูููุทุฉ ุถุฑุจ ุงูุฃุดุนุฉ.  ูุชู ุฃูุถูุง ุชุถููู ููุด ููุทุฉ ุฑุจุท. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ูุถุฑุจ raycast ุฃู ุดูุก ุ ูุณูุชู ุชุนุทูู ุนุงุฑุถ ุงูุฎุท ู ropeJoint ุ <code>ropeAttached</code> ุนูุงูุฉ <code>ropeAttached</code> ุฎุงุทุฆุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุงูุถุบุท ุนูู ุฒุฑ ุงููุงูุณ ุงูุฃููู ุ ูุชู <code>ResetRope()</code> ุฃุณููุจ <code>ResetRope()</code> ุ ูุงูุฐู ูุนุทู ููุนูุฏ ุชุนููู ุฌููุน ุงููุนููุงุช ุงููุชุนููุฉ ุจุงูุญุจู / ุงูุฎุทุงู ุฅูู ุงูููู ุงูุชู ูุฌุจ ุฃู ุชููู ุฅุฐุง ูู ูุชู ุงุณุชุฎุฏุงู ุงูุฎุทุงู. </li></ol><br>  ูู ุงูุฌุฒุก ุงูุณููู ูู ุทุฑููุฉ <code>Update</code> ุจูุง ุ ุฃุถู ููุงููุฉ ุฅูู ุทุฑููุฉ <code>HandleInput()</code> ุงูุฌุฏูุฏุฉ <code>HandleInput()</code> ุจุชูุฑูุฑ ูููุฉ <code>aimDirection</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">HandleInput(aimDirection);</code> </pre> <br>  ุงุญูุธ ุงูุชุบููุฑุงุช ุนูู <em>RopeSystem.cs</em> ูุงูุนูุฏุฉ ุฅูู ุงููุญุฑุฑ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุถููุง ุญุจู </h2><br>  ูู ูููู ุงูุจุฒุงูุฉ ุงูุฎุงุตุฉ ุจูุง ูุงุฏุฑุฉ ุนูู ุงูุทูุฑุงู ูู ุงูููุงุก ุจุฏูู ุญุจู ุ ูุฐุง ููุฏ ุญุงู ุงูููุช ูุฅุนุทุงุฆูุง ุดูุฆูุง ููุซู ุชูุซูููุง ุจุตุฑููุง ููุญุจู ููุฏูู ุงููุฏุฑุฉ ุนูู "ุงูุฏูุฑุงู" ุญูู ุงูุฒูุงูุง. <br><br>  ูุนุฏ ุนุงุฑุถ ุงูุฎุทูุท ูุซุงูููุง ููุฐุง ุ ูุฃูู ูุณูุญ ููุง ุจููู ุนุฏุฏ ุงูููุงุท ูููุถุนูุง ูู ูุณุงุญุฉ ุงูุนุงูู. <br><br>  ุงูููุฑุฉ ููุง ูู ุฃููุง ูููู ุฏุงุฆููุง ุจุชุฎุฒูู ุงูุฑุฃุณ ุงูุฃูู ููุญุจู (0) ูู ูุถุน ุงููุงุนุจ ุ ููุชู ูุถุน ุฌููุน ุงูููู ุงูุฃุฎุฑู ุฏููุงูููููุง ุนูุฏูุง ูุฌุจ ุฃู ููุชู ุงูุญุจู ุญูู ุดูุก ูุง ุ ุจูุง ูู ุฐูู ุงูููุถุน ุงูุญุงูู ููููุตูุฉ ุ ููู ุงูููุทุฉ ุงูุชุงููุฉ ุนูู ุทูู ุงูุญุจู ูู ุงููุงุนุจ. <br><br>  ุญุฏุฏ <em>Player</em> ูุฃุถู ูููู <em>LineRenderer</em> ุฅููู.  ุงุถุจุท <em>ุงูุนุฑุถ</em> ุนูู <em>0.075</em> .  ูู ุจุชูุณูุน ูุงุฆูุฉ <em>ุงูููุงุฏ</em> ู ุ ูุนูุตุฑ <em>0 ุ</em> ุญุฏุฏ ููุงุฏ <em>RopeMaterial</em> ุงูููุฌูุฏุฉ ูู ูุฌูุฏ <em>ุงูููุงุฏ</em> ุจุงููุดุฑูุน.  ุฃุฎูุฑูุง ุ ุจุงููุณุจุฉ ุฅูู Line Renderer ุ ููุถุน <em>Texture ุ</em> ุญุฏุฏ <em>Distribute Per Segment</em> . <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c80/6aa/59f/c806aa59f875ac106babef5a8b57a6fc.png"></div><br>  ุงุณุญุจ ูููู Line Renderer ุฅูู ุญูู <em>Render Renderer</em> ููููู <em>ูุธุงู ุงูุญุจู</em> . <br><br>  ุงููุฑ ุนูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ <em>ูููุงุน ุทุจูุฉ ุงูุญุจู</em> ูุญุฏุฏ ุทุจูุงุช ูููู ุฃู ูุชูุงุนู ูุนูุง ุดุนุงุน <em>ุงูุชุฑุงุถู ูุญุจู</em> ููุญูุฑ.  ููุชูุฌุฉ ูุฐูู ุ ุนูุฏ "ุชุตููุฑ" ุฃุดุนุฉ ุฑุงุฏูููุฉ ุ ูุฅููุง ุณุชุตุทุฏู ููุท ุจูุฐู ุงูุทุจูุงุช ุ ูููู ููุณ ูุน ุงููุงุฆูุงุช ุงูุฃุฎุฑู ุ ูุซู ุงููุดุบู. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/f9f/eab/2c3/f9feab2c30cc84b83c94d39ce74acdea.gif"></div><br>  ุฅุฐุง ุจุฏุฃุช ุงููุนุจุฉ ุงูุขู ุ ุณุชูุงุญุธ ุณููููุง ุบุฑูุจูุง.  ุนูุฏูุง ููุฏู ุฅูู ุญุฌุฑ ููู ุฑุฃุณ ุงูุจุฒุงู ููุทูู ุงููุงุฑ ุจุฎุทุงู ุ ูุญุตู ุนูู ููุฒุฉ ุตุบูุฑุฉ ูุฃุนูู ุ ูุจุนุฏ ุฐูู ูุจุฏุฃ ุตุฏูููุง ูู ุงูุชุตุฑู ุจุดูู ุนุดูุงุฆู ุฅูู ุญุฏ ูุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/815/abd/ae6/815abdae693911ed0ba56f14775e5488.gif"></div><br>  ูู ูุญุฏุฏ ุจุนุฏ ูุณุงูุฉ ููุตู ุงููุณุงูุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูู ูุชู ุชูููู ุฑุคูุณ ุชูุฏูู ุงูุฎุท.  ูุฐูู ุ ูุง ูุฑู ุงูุญุจู ุ ูุจูุง ุฃู ููุตู ุงููุณุงูุฉ ุฃุนูู ูุจุงุดุฑุฉ ูู ููุถุน ุณุจููุฉ ุ ูุฅู ุงููููุฉ ุงูุญุงููุฉ ููุณุงูุฉ ุงููุณุงูุฉ ุงููุดุชุฑูุฉ ุชุฏูุนู ุฅูู ุฃุณูู ุฅูู ุงูุฃุญุฌุงุฑ ุชุญุชู. <br><br>  ููู ูุง ุชููู ุ ุงูุขู ุณูุญู ูุฐู ุงููุดููุฉ. <br><br>  ูู ุงูุจุฑูุงูุฌ ุงููุตู <em>RopeSystem.cs ุ ูู</em> ุจุฅุถุงูุฉ ุนุงูู ุชุดุบูู ุฌุฏูุฏ ูู ุจุฏุงูุฉ ุงููุตู ุงูุฏุฑุงุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Linq;</code> </pre> <br>  ููุฐุง ูุณูุญ ููุง ุจุงุณุชุฎุฏุงู ุงุณุชุนูุงูุงุช LINQ ุ ูุงูุชู ุชุณูุญ ููุง ูู ุญุงูุชูุง ุจุงูุนุซูุฑ ุจุณูููุฉ ุนูู ุงูุนูุตุฑ ุงูุฃูู ุฃู ุงูุฃุฎูุฑ ูู ูุงุฆูุฉ <code>ropePositions</code> . <br><br><blockquote style=";text-align:right;direction:rtl">  <em>ููุงุญุธุฉ</em> : ุงุณุชุนูุงู ุงููุบุฉ ุงููุชูุงูู (LINQ) ูู ุงุณู ูุฌููุนุฉ ูู ุงูุชูููุงุช ุงูุชู ุชุนุชูุฏ ุนูู ุชุถููู ุฅููุงูุงุช ุงูุงุณุชุนูุงู ูุจุงุดุฑุฉ ูู C #.  ููููู ูุฑุงุกุฉ ุงููุฒูุฏ ุนููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> . </blockquote><br>  ูู ุจุฅุถุงูุฉ ูุชุบูุฑ ุฎุงุต ููุทูู ุฌุฏูุฏ ูุณูู <code>distanceSet</code> ุชุญุช ุงููุชุบูุฑุงุช ุงูุฃุฎุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> distanceSet;</code> </pre> <br>  ุณูุณุชุฎุฏู ูุฐุง ุงููุชุบูุฑ ูุนูู ุญุชู ูุชููู ุงูุจุฑูุงูุฌ ุงููุตู ูู ุงูุชุนุฑู ุนูู ุฃู ูุณุงูุฉ ุงูุญุจู (ููููุทุฉ ุจูู ุงููุงุนุจ ูุงูููุทุฉ ุงููุฑุฌุนูุฉ ุงูุญุงููุฉ ุญูุซ ูุชู ุฅุฑูุงู ุฎุทุงู ุงููุท) ุชู ุชุนููููุง ุจุดูู ุตุญูุญ. <br><br>  ุฃุถู ุงูุขู ุทุฑููุฉ ุฌุฏูุฏุฉ <code>ropePositions</code> ูุชุนููู ููุงุถุน ุฑุคูุณ ุงูููู ูุชูุฏูู ุงูุฎุท ูุชุญุฏูุฏ ูุณุงูุฉ ุงููุณุงูุฉ ุงููุดุชุฑูุฉ ูู ูุงุฆูุฉ ุงูููุงุถุน ุงููุฎุฒูุฉ ุจุงูุญุจู (ููุงูุน ุงูุญุจู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateRopePositions</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 if (!ropeAttached) { return; } // 2 ropeRenderer.positionCount = ropePositions.Count + 1; // 3 for (var i = ropeRenderer.positionCount - 1; i &gt;= 0; i--) { if (i != ropeRenderer.positionCount - 1) // if not the Last point of line renderer { ropeRenderer.SetPosition(i, ropePositions[i]); // 4 if (i == ropePositions.Count - 1 || ropePositions.Count == 1) { var ropePosition = ropePositions[ropePositions.Count - 1]; if (ropePositions.Count == 1) { ropeHingeAnchorRb.transform.position = ropePosition; if (!distanceSet) { ropeJoint.distance = Vector2.Distance(transform.position, ropePosition); distanceSet = true; } } else { ropeHingeAnchorRb.transform.position = ropePosition; if (!distanceSet) { ropeJoint.distance = Vector2.Distance(transform.position, ropePosition); distanceSet = true; } } } // 5 else if (i - 1 == ropePositions.IndexOf(ropePositions.Last())) { var ropePosition = ropePositions.Last(); ropeHingeAnchorRb.transform.position = ropePosition; if (!distanceSet) { ropeJoint.distance = Vector2.Distance(transform.position, ropePosition); distanceSet = true; } } } else { // 6 ropeRenderer.SetPosition(i, transform.position); } } }</span></span></code> </pre> <br>  ุงุดุฑุญ ุงูุฑูุฒ ุงูููุถุญ ุฃุนูุงู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงุฎุฑุฌ ูู ุงูุทุฑููุฉ ุฅุฐุง ูู ููู ุงูุญุจู ูุซุจุชูุง. </li><li style=";text-align:right;direction:rtl">  ูุญู ูุนูู ูููุฉ ููุงุท <code>ropePositions</code> ูุฎุท ุงูุญุจู ูุนุฏุฏ ุงูููุงุถุน ุงููุฎุฒูุฉ ูู ููุงูู <code>ropePositions</code> ุ ุจุงูุฅุถุงูุฉ ุฅูู 1 ุฃุฎุฑู (ููููู ุงููุงุนุจ). </li><li style=";text-align:right;direction:rtl">  ูุญู <code>ropePositions</code> ุญูู ูุงุฆูุฉ <code>ropePositions</code> ููู ููุถุน (ุจุงุณุชุซูุงุก ุงูุฃุฎูุฑ) ุ ููุนูู ููุถุน ููุฉ ุนุงุฑุถ ุงูุฎุท ุฅูู ูููุฉ ููุถุน Vector2 ุงููุฎุฒูุฉ ุจูุงุณุทุฉ ููุฑุณ ุงูุญููุฉ ูู ูุงุฆูุฉ <code>ropePositions</code> . </li><li style=";text-align:right;direction:rtl">  ูู ุจุชุนููู ููุทุฉ ุฑุจุท ุงูุญุจู ุงูุซุงููุฉ ูู ููุถุน ููุงูุฉ ุงูุญุจู ุ ุญูุซ ูุฌุจ ุฃู ุชููู ููุทุฉ ุงูููุตูุฉ / ููุทุฉ ุงูุฑุจุท ุงูุญุงููุฉ ุ ุฃู ุฅุฐุง ูุงู ูุฏููุง ููุถุน ูุงุญุฏ ููุท ููุญุจู ุ ูุงุฌุนููุง ููุทุฉ ุงูุฑุจุท.  ูุฐุง ูููุง ุจุชุนููู ุงููุณุงูุฉ ุจูู <code>ropeJoint</code> ูุงููุณุงูุฉ ุจูู ุงููุงุนุจ ูุงูููุถุน ุงูุญุงูู ููุญุจู ุ ูุงูุฐู ููุชูู <code>ropeJoint</code> ูู ุงูุญููุฉ. </li><li style=";text-align:right;direction:rtl">  ูุนุงูุฌ ุจูุงุก if ุงูุญุงูุฉ ุญูุซ ูููู ุงูููุถุน ุงูุญุงูู ููุญุจู ูู ุงูุญููุฉ ูู ุงูุซุงูู ูู ุงูููุงูุฉ ุ  ุฃู ุงูููุทุฉ ุงูุชู ูุชุตู ุนูุฏูุง ุงูุญุจู ุจุงูุฌุณู ุ ุฃู  ุงูููุตูุฉ ุงูุญุงููุฉ / ููุทุฉ ุงูุฑุจุท. </li><li style=";text-align:right;direction:rtl">  ูุนุงูุฌ ูุฐุง ุงููุชูุฉ <code>else</code> ุชุนููู ููุถุน ุงูุฑุฃุณ ุงูุฃุฎูุฑ ููุญุจู ุฅูู ูููุฉ ุงููุถุน ุงูุญุงูู ููุงุนุจ. </li></ol><br>  ุชุฐูุฑ ุฃู ุชุถูู ุงูููุงููุฉ <code>UpdateRopePositions()</code> ูู ููุงูุฉ <code>Update()</code> <code>UpdateRopePositions()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">UpdateRopePositions();</code> </pre> <br>  ุงุญูุธ ุงูุชุบููุฑุงุช ูู ุงูุจุฑูุงูุฌ ุงููุตู ูุฃุนุฏ ุชุดุบูู ุงููุนุจุฉ.  ุงุฌุนู "ูุณุงุญุฉ ุตุบูุฑุฉ" ููุฒุฉ ุตุบูุฑุฉ ูู ุฎูุงู ุงูุชุตููุจ ูุฅุทูุงู ุงููุงุฑ ุจุฎุทุงู ุนูู ุญุฌุฑ ููู ุงูุดุฎุตูุฉ.  ุงูุขู ููููู ุงูุงุณุชูุชุงุน ุจุซูุงุฑ ุนููู - ุชุชุฃุฑุฌุญ ุณุจููุฉ ุจูุฏูุก ููู ุงูุฃุญุฌุงุฑ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/b94/f87/d7c/b94f87d7c533fdae336e3818f7cf3908.gif"></div><br>  ุงูุขู ููููู ุงูุฐูุงุจ ุฅูู ูุงูุฐุฉ ุงููุดูุฏ ุ ุญุฏุฏ Player ุ ุงุณุชุฎุฏู ุฃุฏุงุฉ ุงูุชุญุฑูู (ุจุดูู ุงูุชุฑุงุถู ุ ููุชุงุญ <em>W</em> ) ูุชุญุฑูููุง ููุดุงูุฏุฉ ููู ูุชู ุชูุฏูู ุงูุฐุฑูุชูู ูุฎุท ุงูุญุจู ุจูููู ุงูุฎุทุงู ูููุถุน ุงููุงุนุจ ูุฑุณู ุงูุญุจู.  ุจุนุฏ ุชุญุฑูุฑ ุงููุดุบู ุ ูุญุณุจ DistanceJoint2D ุงููุณุงูุฉ ุจุดูู ุตุญูุญ ูุณูุณุชูุฑ ุงูุจุฒุงู ูู ุงูุชุฃุฑุฌุญ ุนูู ุงูููุตูุฉ ุงููุชุตูุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5e1/66e/18c/5e166e18ca7ff821025a920b1eaf849a.gif"></div><br><h2 style=";text-align:right;direction:rtl">  ูุนุงูุฌุฉ ููุงุท ุงูุงูุชูุงู </h2><br>  ูุง ูุนุฏ ุงููุนุจ ุจุงุณุชุฎุฏุงู ุณุจููุฉ ูุชุฃุฑุฌุญุฉ ูููุฏูุง ุฃูุซุฑ ูู ููุดูุฉ ุทุงุฑุฏุฉ ูููุงุก ุ ูุฐูู ูุญุชุงุฌ ุจุงูุชุฃููุฏ ุฅูู ุชูููููุง. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/6e9/3bd/43e/6e93bd43eb1ebff2241cb89af3b09f0a.png"></div><br>  ุงูุฎุจุฑ ุงูุณุงุฑ ูู ุฃู ุงูุทุฑููุฉ ุงููุถุงูุฉ ุญุฏูุซูุง ููุนุงูุฌุฉ ููุงูุน ุงูุญุจู ูููู ุงุณุชุฎุฏุงููุง ูู ุงููุณุชูุจู.  ุญุชู ุงูุขู ูุญู ูุณุชุฎุฏู ูููุนูู ุญุจู ููุท.  ุฃุญุฏููุง ูุชุตู ุจูููู ุงููุงุนุจ ุ ูุงูุซุงูู ุจุงูููุถุน ุงูุญุงูู ูููุทุฉ ุฑุจุท ุงูุฎุทุงู ุนูุฏ ุฅุทูุงู ุงููุงุฑ ุนููู. <br><br>  ุงููุดููุฉ ุงููุญูุฏุฉ ูู ุฃูู ุจูููุง ูุง ูุชุชุจุน ุฌููุน ุงูููุงูู ุงููุญุชููุฉ ููุญุจู ุ ููุฐุง ูุญุชุงุฌ ุฅูู ุงููููู ูู ุงูุนูู. <br><br>  ููุชุนุฑู ุนูู ุงูููุงุถุน ุนูู ุงูุฃุญุฌุงุฑ ุงูุชู ูุฌุจ ุฃู ููุชู ุญูููุง ุงูุญุจู ุ ุจุฅุถุงูุฉ ููุถุน ููุฉ ุฌุฏูุฏ ุฅูู ุนุงุฑุถ ุงูุฎุท ุ ูุญุชุงุฌ ุฅูู ูุธุงู ูุญุฏุฏ ูุง ุฅุฐุง ูุงูุช ููุทุฉ ููุฉ ุงููุตุงุฏู ุจูู ุงูุฎุท ุงููุณุชููู ุจูู ุงูููุถุน ุงูุญุงูู ููุณูุฎ ูููุทุฉ ุงูููุตูุฉ / ููุทุฉ ุงูุฑุจุท ุงูุญุงููุฉ ููุญุจู. <br><br>  ูุจุฏู ุฃู ูุฐุง ูู ุงูุนูู ูุฑุฉ ุฃุฎุฑู ูู ุฃุฌู raycast ูุฏูู ุฌูุฏ! <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/47a/52b/abe/47a52babe8fb16ef57a365b287dceb12.png"></div><br>  ุฃููุงู ุ ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุทุฑููุฉ ูููููุง ุงูุนุซูุฑ ุนูู ุฃูุฑุจ ููุทุฉ ูู ุงููุตุงุฏู ุงุณุชูุงุฏูุง ุฅูู ููุทุฉ ุฅุตุงุจุฉ raycast ูุญูุงู ุงููุตุงุฏู. <br><br>  ูู ุจุฅุถุงูุฉ ุทุฑููุฉ ุฌุฏูุฏุฉ ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู <em>RopeSystem.cs</em> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 private Vector2 GetClosestColliderPointFromRaycastHit(RaycastHit2D hit, PolygonCollider2D polyCollider) { // 2 var distanceDictionary = polyCollider.points.ToDictionary&lt;Vector2, float, Vector2&gt;( position =&gt; Vector2.Distance(hit.point, polyCollider.transform.TransformPoint(position)), position =&gt; polyCollider.transform.TransformPoint(position)); // 3 var orderedDictionary = distanceDictionary.OrderBy(e =&gt; e.Key); return orderedDictionary.Any() ? orderedDictionary.First().Value : Vector2.zero; }</span></span></code> </pre><br>  ุฅุฐุง ูู ุชูู ุนูู ุฏุฑุงูุฉ ุจุงุณุชุนูุงูุงุช LINQ ุ ููุฏ ูุจุฏู ูุฐุง ุงูุฑูุฒ ููุฃูู ููุน ูู ุงูุณุญุฑ ุงููุนูุฏ C #. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/9e8/0d6/c88/9e80d6c88df7182190a87a8ca54dcb70.png"></div><br>  ุฅุฐุง ูุงู ุงูุฃูุฑ ูุฐูู ุ ููุง ุชุฎู.  ุชููู LINQ ุจุนูู ูุซูุฑ ููุง: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุฃุฎุฐ ูุฐู ุงูุทุฑููุฉ ูุนููุชูู - ูุงุฆู <em>RaycastHit2D ููุงุฆู PolygonCollider2D</em> .  ุฌููุน ุงูุฃุญุฌุงุฑ ุนูู ุงููุณุชูู ููุง ูุตุงุฏูุงุช PolygonCollider2D ุ ูุฐูู ุฅุฐุง ุงุณุชุฎุฏููุง ุฏุงุฆููุง ุฃุดูุงู PolygonCollider2D ุ ูุณุชุนูู ุจุดูู ุฌูุฏ. </li><li style=";text-align:right;direction:rtl">  ููุง ูุจุฏุฃ ุณุญุฑ ุงูุงุณุชุนูุงู LINQ!  ููุง ูููู ุจุชุญููู ูุฌููุนุฉ ููุงุท ุงููุตุงุฏู ุงููุถูุน ุฅูู ูุงููุณ ุงูููุงุถุน <em>Vector2</em> (ูููุฉ ูู ุนูุตุฑ ูู ุนูุงุตุฑ ุงููุงููุณ ูู ุงูููุถุน ููุณู) ุ ููุชู ุชุนููู ููุชุงุญ ูู ุนูุตุฑ ูููุฉ ุงููุณุงูุฉ ูู ูุฐู ุงูููุทุฉ ุฅูู ูุดุบู ููุถุน ุงููุงุนุจ (ุงููููุฉ ุงูุนุงุฆูุฉ).  ูู ุจุนุถ ุงูุฃุญูุงู ูุญุฏุซ ุดูุก ุขุฎุฑ ููุง: ูุชู ุชุญููู ุงูููุถุน ุงููุงุชุฌ ุฅูู ุงููุถุงุก ุงูุนุงููู (ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุชุฎุฒูู ููุงุถุน ุฑุคูุณ ุงููุตุงุฏู ูู ุงููุถุงุก ุงููุญูู ุ ุฃู ุงููุญูู ุจุงููุณุจุฉ ูููุงุฆู ุงูุฐู ููุชูู ุฅููู ุงููุตุงุฏู ุ ููุญู ุจุญุงุฌุฉ ุฅูู ููุงูู ูู ุงููุถุงุก ุงูุนุงููู). </li><li style=";text-align:right;direction:rtl">  ูุชู ูุฑุฒ ุงููุงููุณ ุญุณุจ ุงูููุชุงุญ.  ุจุนุจุงุฑุฉ ุฃุฎุฑู ุ ุจุงููุณุงูุฉ ุงูุฃูุฑุจ ุฅูู ูููุน ุงููุงุนุจ ุงูุญุงูู.  ูุชู ุฅุฑุฌุงุน ุฃูุฑุจ ูุณุงูุฉ ุ ุฃู ุฃู ุฃู ููุทุฉ ูุชู ุฅุฑุฌุงุนูุง ุจูุฐู ุงูุทุฑููุฉ ูู ููุทุฉ ุงููุตุงุฏู ุจูู ุงููุงุนุจ ูุงูููุทุฉ ุงูุญุงููุฉ ูููุตูุฉ ุงูุญุจู! </li></ol><br>  ุฏุนูุง ูุนูุฏ ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู <em>RopeSystem.cs</em> ูุฅุถุงูุฉ ูุชุบูุฑ ุญูู ุฎุงุต ุฌุฏูุฏ ูู ุงูุฃุนูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Dictionary&lt;Vector2, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; wrapPointsLookup = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;Vector2, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;();</code> </pre> <br>  ุณูุณุชุฎุฏููุง ูุชุชุจุน ุงูููุงูู ุงูุชู ูููู ููุญุจู ุงูุงูุชูุงู ุญูููุง. <br><br>  ูู ููุงูุฉ ุทุฑููุฉ <code>Update()</code> ุ ุงุจุญุซ ุนู ุงูุจูุงุก <code>else</code> ุงูุฐู ูุญุชูู ุนูู <code>crosshairSprite.enabled = false;</code>  ููุถุงู ูุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// 1 if (ropePositions.Count &gt; 0) { // 2 var lastRopePoint = ropePositions.Last(); var playerToCurrentNextHit = Physics2D.Raycast(playerPosition, (lastRopePoint - playerPosition).normalized, Vector2.Distance(playerPosition, lastRopePoint) - 0.1f, ropeLayerMask); // 3 if (playerToCurrentNextHit) { var colliderWithVertices = playerToCurrentNextHit.collider as PolygonCollider2D; if (colliderWithVertices != null) { var closestPointToHit = GetClosestColliderPointFromRaycastHit(playerToCurrentNextHit, colliderWithVertices); // 4 if (wrapPointsLookup.ContainsKey(closestPointToHit)) { ResetRope(); return; } // 5 ropePositions.Add(closestPointToHit); wrapPointsLookup.Add(closestPointToHit, 0); distanceSet = false; } } }</span></span></code> </pre> <br>  ุงุดุฑุญ ูุฐุง ุงูุฌุฒุก ูู ุงูููุฏ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุชุฎุฒูู ุจุนุถ ุงูููุงูู ูู ูุงุฆูุฉ ุงูููุงูุน ุ ุซู ... </li><li style=";text-align:right;direction:rtl">  ูุทูู ุงููุงุฑ ูู ููุถุน ุงููุงุนุจ ูู ุงุชุฌุงู ุงููุงุนุจ ุงูุฐู ููุธุฑ ุฅูู ุงูููุถุน ุงูุฃุฎูุฑ ููุญุจู ูู ุงููุงุฆูุฉ - ููุทุฉ ุงูุฑุจุท ุงูุชู ูุชู ูููุง ุฑุจุท ุฎุทุงู ุงููุท ุจุงูุญุฌุฑ - ุจูุณุงูุฉ ุดุนุงุน ุชุณุงูู ุงููุณุงูุฉ ุจูู ุงููุงุนุจ ููููุน ููุทุฉ ุฑุจุท ุงูุญุจู. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุงุตุทุฏู raycast ุจุดูุก ูุง ุ ูุณูุชู ูุตุงุฏู ูุฐุง ุงููุงุฆู ุจุฃูุงู ุฅูู ููุน <em>PolygonCollider2D</em> .  ูู ุญูู ุฃูู PolygonCollider2D ุญูููู ุ ูุชู ุฅุฑุฌุงุน ุฃูุฑุจ ููุถุน ููุฉ ูููุตุงุฏู ุจุงุณุชุฎุฏุงู ุงูุทุฑููุฉ ุงูุชู <em>ูุชุจูุงูุง</em> ุณุงุจููุง ุจุงุณู <em>Vector2</em> . </li><li style=";text-align:right;direction:rtl">  ูุชู ูุญุตู ุจูุงุณุทุฉ <code>wrapPointsLookup</code> ููุชุฃูุฏ ูู ุฃูู ูู ูุชู ุงูุชุญูู ูู ููุณ ุงููุถุน ูุฑุฉ ุฃุฎุฑู.  ุฅุฐุง ุชู ูุญุตู ุ ูุฅููุง ูุชุฎูุต ูู ุงูุญุจู ูููุทุนู ุ ูุฃุณูุท ุงููุงุนุจ. </li><li style=";text-align:right;direction:rtl">  ุซู ูุชู <code>ropePositions</code> ูุงุฆูุฉ <code>ropePositions</code> : ูุชู ุฅุถุงูุฉ ุงูููุถุน ุงูุฐู ููุชู ุญููู ุงูุญุจู.  ูุชู ุชุญุฏูุซ ูุงููุณ <code>wrapPointsLookup</code> ุฃูุถูุง.  ุฃุฎูุฑูุง ุ ุชุชู ุฅุนุงุฏุฉ ุชุนููู ุนูุงูุฉ <code>distanceSet</code> ุจุญูุซ ูููู ููุฃุณููุจ <code>UpdateRopePositions()</code> ุฅุนุงุฏุฉ ุชุนุฑูู ูุณุงูุฉ ุงูุญุจู ุจุงูุทูู ุงูุฌุฏูุฏ ููุญุจู ูุงูููุงุทุน. </li></ol><br>  ูู <code>ResetRope()</code> ุฃุถู ุงูุณุทุฑ ุงูุชุงูู ุจุญูุซ <code>wrapPointsLookup</code> ูุณุญ ูุงููุณ <code>wrapPointsLookup</code> ูู ูุฑุฉ ูููู ูููุง ุงููุงุนุจ ุจูุทุน ุงูุญุจู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">wrapPointsLookup.Clear();</code> </pre> <br>  ุญูุธ ูุชุดุบูู ุงููุนุจุฉ.  ูู ุจุชุตููุฑ ุฎุทุงู ุงููุทุท ูู ุงูุญุฌุฑ ุฃุนูู ุงูุจุฒุงู ูุงุณุชุฎุฏู ุฃุฏุงุฉ ุงูุชุญุฑูู ูู ูุงูุฐุฉ ุงููุดูุฏ ูุชุญุฑูู ุงูุจุฒุงู ุนูู ุนุฏุฉ ุญูุงู ุญุฌุฑูุฉ. <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/c62/999/f50/c62999f50094252b3850b8b4c54e2cdc.gif"></div><br>  ููุฐุง ุนูููุง ุงูุญุจู ุฃู ููุชู ุญูู ุงูุฃุดูุงุก! <br><br><h2 style=";text-align:right;direction:rtl">  ุฃุถู ูุฏุฑุฉ ูุฒุงุฒ </h2><br>  ุณุจููุฉ ูุนููุฉ ุนูู ุงูุญุจู ุซุงุจุชุฉ ููุบุงูุฉ.  ูุฅุตูุงุญ ุฐูู ุ ูููููุง ุฅุถุงูุฉ ูุฏุฑุฉ ุงูุชุฃุฑุฌุญ. <br><br>  ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูู ูููู ุนููุฏู ุนูู ูููู ุงูุชุฃุฑุฌุญ ููุฃูุงู (ุฌุงูุจู) ุ ุจุบุถ ุงููุธุฑ ุนู ุงูุฒุงููุฉ ุงูุชู ููุธุฑ ุฅูููุง. <br><br>  ุงูุชุญ <em>PlayerMovement.cs</em> ูุฃุถู ุงููุชุบูุฑูู ุงูุนุงููู ุงูุชุงูููู ุฅูู ุฃุนูู ุงูุจุฑูุงูุฌ ุงููุตู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector2 ropeHook; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> swingForce = <span class="hljs-number"><span class="hljs-number">4f</span></span>;</code> </pre> <br>  ุณูุชู ุชุนููู ูุชุบูุฑ <code>ropeHook</code> ุฃู ููุถุน ููุฌุฏ ููู ุฎุทุงู ุงูุญุจู ุญุงูููุง ุ ู <code>swingForce</code> ูู ุงููููุฉ ุงูุชู ูุณุชุฎุฏููุง ูุฅุถุงูุฉ ุญุฑูุฉ ุงูุชุฃุฑุฌุญ. <br><br>  ุงุณุชุจุฏู ุทุฑููุฉ <code>FixedUpdate()</code> ุฌุฏูุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FixedUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (horizontalInput &lt; <span class="hljs-number"><span class="hljs-number">0f</span></span> || horizontalInput &gt; <span class="hljs-number"><span class="hljs-number">0f</span></span>) { animator.SetFloat(<span class="hljs-string"><span class="hljs-string">"Speed"</span></span>, Mathf.Abs(horizontalInput)); playerSprite.flipX = horizontalInput &lt; <span class="hljs-number"><span class="hljs-number">0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isSwinging) { animator.SetBool(<span class="hljs-string"><span class="hljs-string">"IsSwinging"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 1 -          var playerToHookDirection = (ropeHook - (Vector2)transform.position).normalized; // 2 -  ,     Vector2 perpendicularDirection; if (horizontalInput &lt; 0) { perpendicularDirection = new Vector2(-playerToHookDirection.y, playerToHookDirection.x); var leftPerpPos = (Vector2)transform.position - perpendicularDirection * -2f; Debug.DrawLine(transform.position, leftPerpPos, Color.green, 0f); } else { perpendicularDirection = new Vector2(playerToHookDirection.y, -playerToHookDirection.x); var rightPerpPos = (Vector2)transform.position + perpendicularDirection * 2f; Debug.DrawLine(transform.position, rightPerpPos, Color.green, 0f); } var force = perpendicularDirection * swingForce; rBody.AddForce(force, ForceMode2D.Force); } else { animator.SetBool("IsSwinging", false); if (groundCheck) { var groundForce = speed * 2f; rBody.AddForce(new Vector2((horizontalInput * groundForce - rBody.velocity.x) * groundForce, 0)); rBody.velocity = new Vector2(rBody.velocity.x, rBody.velocity.y); } } } else { animator.SetBool("IsSwinging", false); animator.SetFloat("Speed", 0f); } if (!isSwinging) { if (!groundCheck) return; isJumping = jumpInput &gt; 0f; if (isJumping) { rBody.velocity = new Vector2(rBody.velocity.x, jumpSpeed); } } }</span></span></code> </pre> <br>      ,     <code>isSwinging</code> ,         ,        ,          ,     . <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">          . </li><li style=";text-align:right;direction:rtl">    ,      ,      <code>playerToHookDirection</code> .     ,         . </li></ol><br>  <em>RopeSystem.cs</em>     <em> else</em>  <code>if(!ropeAttached)</code>  <code>Update()</code>  : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">playerMovement.isSwinging = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; playerMovement.ropeHook = ropePositions.Last();</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูุฉ if ูู</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุณ ุงูุชุตููู ุ </font></font><code>if(!ropeAttached)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ูุง ููู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">playerMovement.isSwinging = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ูุจูุบ ุงูุจุฑูุงูุฌ ุงููุตู PlayerMovement ุฃู ุงููุงุนุจ ูุชุฃุฑุฌุญ ุ ููุญุฏุฏ ุฃูุถูุง ุงููููู ุงูุฃุฎูุฑ (ุจุงุณุชุซูุงุก ููุถุน ุงููุงุนุจ) ููุญุจู - ุจุนุจุงุฑุฉ ุฃุฎุฑู ุ ููุทุฉ ุฑุจุท ุงูุญุจู. </font><font style="vertical-align: inherit;">ูุนุฏ ุฐูู ุถุฑูุฑููุง ูุญุณุงุจ ุงูุฒุงููุฉ ุงููุชุนุงูุฏุฉ ุงูุชู ุฃุถููุงูุง ููุชู ุฅูู ุงูุจุฑูุงูุฌ ุงููุตู PlayerMovement. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅููู ูุง ูุจุฏู ุฅุฐุง ููุช ุจุชุดุบูู ุงูุฃุฏุงุฉ ูู ูุนุจุฉ ุงูุฌุฑู ูุงุถุบุทุช A ุฃู D ููุชุฃุฑุฌุญ ูุณุงุฑูุง / ูููููุง:</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/5bd/6a5/4ed/5bd6a54ed3c8661e61b3bf765e50acfb.png"></div><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุถููุง ูุฒูู ุงูุญุจู </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจูููุง ููุณ ูุฏููุง ุงููุฏุฑุฉ ุนูู ุงูุชุญุฑู ุตุนูุฏุง ููุฒููุง ุนูู ุงูุญุจู. </font><font style="vertical-align: inherit;">ุนูู ุงูุฑุบู ูู ุฃูู ูู ุงูุญูุงุฉ ุงููุงูุนูุฉ ูุง ูููู ุฃู ูุฑุชูุน ุงูุจุฒุงู ููุณูุท ุจุณูููุฉ ุนูู ุทูู ุงูุญุจู ุ ูููู ูุฐู ูุนุจุฉ ูููู ุฃู ูุญุฏุซ ูููุง ุฃู ุดูุก ุ ุฃููุณ ูุฐููุ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฌุฒุก ุงูุนููู ูู ุงูุจุฑูุงูุฌ ุงููุตู </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RopeSystem ุ</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃุถู ูุชุบูุฑูู ุญูููู ุฌุฏูุฏูู:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> climbSpeed = <span class="hljs-number"><span class="hljs-number">3f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> isColliding;</code> </pre> <br> <code>climbSpeed</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูุญุฏุฏ ุงูุณุฑุนุฉ ุงูุชู ูููู ุฃู ูุชุญุฑู ุจูุง ุงูุจุฒุงู ูุฃุนูู ูุฃุณูู ุงูุญุจู ุ </font></font><code>isColliding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณูุชู ุงุณุชุฎุฏุงูู ูุนูู ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ูููู ุฒูุงุฏุฉ ุฃู ุชูููู ุฎุงุตูุฉ ูุตูุฉ ุงููุณุงูุฉ ูุญุจู ูุตูุฉ ุงููุณุงูุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุถู ูุฐู ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ:</font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HandleRopeLength</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// 1 if (Input.GetAxis("Vertical") &gt;= 1f &amp;&amp; ropeAttached &amp;&amp; !isColliding) { ropeJoint.distance -= Time.deltaTime * climbSpeed; } else if (Input.GetAxis("Vertical") &lt; 0f &amp;&amp; ropeAttached) { ropeJoint.distance += Time.deltaTime * climbSpeed; } }</span></span></code> </pre> <br>   <code>if..elseif</code>      (/  W/S  ),     <code>ropeAttached iscColliding</code>     <code>ropeJoint</code> ,      . <br><br>   ,      <code>Update()</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">HandleRopeLength();</code> </pre> <br>       <code>isColliding</code> . <br><br>        : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerStay2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D colliderStay</span></span></span><span class="hljs-function">)</span></span> { isColliding = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnTriggerExit2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collider2D colliderOnExit</span></span></span><span class="hljs-function">)</span></span> { isColliding = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุชุงู ุงูุทุฑููุชุงู ููุง ุทุฑููุชุงู ุฃุตููุชุงู ูููุฆุฉ ุงูุฃุณุงุณูุฉ ูู ูุตูุต MonoBehaviour. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงูุณ Collider ุญุงูููุง ูุงุฆููุง ูุงุฏููุง ุขุฎุฑ ูู ุงููุนุจุฉ ุ ูุณูุชู ุฅุทูุงู ุงูุทุฑููุฉ ุจุงุณุชูุฑุงุฑ </font></font><code>OnTriggerStay2D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุชุนููู </font></font><code>isColliding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุฉ </font><font style="vertical-align: inherit;">ููุนูู </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ูุนูู ุฃูู ุนูุฏูุง ูููุณ ุณุจููุฉ ุงูุญุฌุฑ ุ ูุชู ุชุนููู ุงูุนูู isColliding ูููุฉ </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู </font></font><code>OnTriggerExit2D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุดุบูู </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ุนูุฏูุง ูุบุงุฏุฑ ูุตุงุฏู ููุทูุฉ ูุตุงุฏู ุขุฎุฑ ุ ููุง ูุคุฏู ุฅูู ุชุนููู ุงูุนูู ุนูู false. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุถุน ูู ุงุนุชุจุงุฑู: </font></font><code>OnTriggerStay2D</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฏ ุชููู </font><font style="vertical-align: inherit;">ุงูุทุฑููุฉ </font><font style="vertical-align: inherit;">ููููุฉ ููุบุงูุฉ ูู ุงููุงุญูุฉ ุงูุญุณุงุจูุฉ ุ ูุฐุง ุงุณุชุฎุฏููุง ุจุนูุงูุฉ.</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฅูู ุฃูู ุฃุฐูุจ ุจุนุฏ ุฐููุ </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุจุฏุฃ ุงููุนุจุฉ ูุฑุฉ ุฃุฎุฑู ููุฐู ุงููุฑุฉ ุงุถุบุท ุนูู ููุงุชูุญ ุงูุฃุณูู ุฃู W / S ููุชุญุฑู ูุฃุนูู ูุฃุณูู ุงูุญุจู. </font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/348/a3e/e5d/348a3ee5d95a10273c8bc644e3dbc7d9.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุชูุฒูู ุงููุดุฑูุน ุงูููุงุฆู ููุฐุง ุงูุฌุฒุก ูู ุงูุจุฑูุงูุฌ ุงูุชุนูููู </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ูุทุนูุง ุดูุทูุง ุทูููุงู - ูู ุงูุฑุฎููุงุช ุบูุฑ ุงููุชุฃุฑุฌุญุฉ ุฅูู ุงูุฑุฎููุงุช ุงูุจูููุงููุฉ ุงูุฎุงููุฉ ูู ุงููุดุฑุฉ ุงูุจูููุงููุฉ! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุชุนููุช ููููุฉ ุฅูุดุงุก ูุธุงู ุชุตููุจ ููููู ุฅุทูุงู ุฎุทุงู ุงููุท ุนูู ุฃู ุดูุก ูุญุชูู ุนูู ูุตุงุฏู ุ ูุงูุชุดุจุซ ุจู ูุงูุชุฃุฑุฌุญ ุนููู ูู ููุณ ุงูููุช ุ ูุงุณุชุฏุงุฑุฉ ุญุจู ุฏููุงูููู ุญูู ุญูุงู ุงูุฃุดูุงุก! </font><font style="vertical-align: inherit;">ุนูู ุนุธูู.</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4dd/bb5/29d/4ddbb529d88b62441d7b2d91424bf906.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุน ุฐูู ุ ููุงู ูุธููุฉ ูููุฉ ููููุฏุฉ ููุง - ูุง ูููู ููุญุจู "ุงูุงุณุชุฑุฎุงุก" ุนูุฏ ุงูุถุฑูุฑุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฒุก ุงูุซุงูู ูู</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุณูููู ุจุญู ูุฐู ุงููุดููุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุฅุฐุง ููุช ุนูู ุงุณุชุนุฏุงุฏ ูุงุบุชูุงู ุงููุฑุตุฉ ุ ูููุงุฐุง ูุง ุชุญุงูู ุงูููุงู ุจุฐูู ุจููุณูุ </font><font style="vertical-align: inherit;">ููููู ุงุณุชุฎุฏุงู ูุงููุณ ููุฐุง </font></font><code>wrapPointsLookup</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar414887/">https://habr.com/ru/post/ar414887/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar414877/index.html">ุนุฏุณุฉ ุบูุฑ ุนุงุฏูุฉ ููุงููุฑุง ุนุงุฏูุฉ ุฃู ููููุฉ ุงูุชููู ุนู ุงูุชูููุฑ ูู ุงูุชุฑููุฒ</a></li>
<li><a href="../ar414879/index.html">ููุงุฐุง 2 ุจุซู ูู ุทุงุจุนุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏุ</a></li>
<li><a href="../ar414881/index.html">ููููุง ูู ูุฑุงุก ุงูููุงููุณ VK</a></li>
<li><a href="../ar414883/index.html">ุฏุงุฑุช ุงูุฐูุฑูุงุช ุจุทุฑููุฉ ุฌุฏูุฏุฉ: ูุงูุช BBC ุจุชุญุฏูุซ ุงูุฃุฑุดูู ุงูุตูุชู ููุดุฑูุน RemArc</a></li>
<li><a href="../ar414885/index.html">ูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ู "ุงูุนูุงุฒุงุช" ูู ุณุฌู ุงูุฏููุฉ ุงูููุญุฏ ููููุงูุงุช ุงููุงููููุฉ - ุณุฌู ุงูุฏููุฉ ููููุงูุงุช ุงููุงููููุฉ</a></li>
<li><a href="../ar414889/index.html">ุนูุฏูุง ุชุญุชุงุฌ ุงูููุงูุงุช ุงูุฑูููุฉ ุฅูู IaaS</a></li>
<li><a href="../ar414891/index.html">ุนุงุฏุงุช ุงููุทูุฑ</a></li>
<li><a href="../ar414893/index.html">Viber ู WhatsApp ู Telegram - ุฃูููุง ุฃูุถูุ</a></li>
<li><a href="../ar414895/index.html">ุจุงููุณุจุฉ ููุง ูู ุดูุก "ูุณุชููู" - DBMS Vertica</a></li>
<li><a href="../ar414897/index.html">ุงููุตูู ุฅูู ุงูุจูุงูุงุช ูู ุชุทุจููุงุช ูุชุนุฏุฏุฉ ุงููุณุชุฎุฏููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>