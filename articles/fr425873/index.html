<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≤üèæ üåÅ üîº [CppCon 2018] Herb Sutter: vers un C ++ plus simple et plus puissant üë©üèª‚Äçüî¨ üç° üì¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans son discours √† CppCon 2018, Herb Sutter a pr√©sent√© au public ses r√©alisations dans deux directions. Tout d'abord, c'est le contr√¥le de la dur√©e d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[CppCon 2018] Herb Sutter: vers un C ++ plus simple et plus puissant</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425873/"><iframe width="560" height="315" src="https://www.youtube.com/embed/80BZxujhY38" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p> Dans son discours √† CppCon 2018, Herb Sutter a pr√©sent√© au public ses r√©alisations dans deux directions.  Tout d'abord, c'est le <strong>contr√¥le de la dur√©e de vie des</strong> variables (Lifetime), qui permet de d√©tecter des classes enti√®res de bugs lors de la compilation.  Deuxi√®mement, il s'agit d'une proposition mise √† jour sur les <strong>m√©taclasses</strong> , qui permettra d'√©viter la duplication de code, d√©crivant une fois le comportement d'une cat√©gorie de classe, puis la connectant √† des classes sp√©cifiques avec une seule ligne. </p><a name="habracut"></a><br><h2 id="predislovie-bolshe--prosche">  Avant-propos: plus = plus facile?! </h2><br><p>  Des accusations C ++ sont entendues que la norme se d√©veloppe insens√©ment et sans piti√©.  Mais m√™me les conservateurs les plus ardents ne soutiendront pas que de nouvelles constructions comme range-for (cycle de collecte) et auto (au moins pour les it√©rateurs) rendent le code plus simple.  Vous pouvez d√©velopper des crit√®res approximatifs que (au moins un, id√©alement tous) les nouvelles extensions linguistiques doivent satisfaire afin de simplifier le code dans la pratique: </p><br><ol><li>  R√©duisez, simplifiez le code, supprimez le code en double (plage pour, auto, lambda, m√©taclasses) </li><li>  Rendre le code s√ªr plus facile √† √©crire, √©viter les erreurs et les cas sp√©ciaux (pointeurs intelligents, dur√©e de vie) </li><li>  Remplacer compl√®tement les anciennes fonctionnalit√©s moins fonctionnelles (typedef ‚Üí utilisation) </li></ol><br><p>  Herb Sutter identifie le ¬´C ++ moderne¬ª - un sous-ensemble de fonctionnalit√©s qui sont conformes aux normes de codage modernes (telles que les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">directives de base C ++</a> ), et consid√®re le standard complet comme un ¬´mode de compatibilit√©¬ª que tout le monde n'a pas besoin de conna√Ætre.  En cons√©quence, si le "C ++ moderne" ne se d√©veloppe pas, alors tout va bien. </p><br><h2 id="proverki-vremeni-zhizni-peremennyh-lifetime">  V√©rification de la dur√©e de vie des variables (dur√©e de vie) </h2><br><p>  Le nouveau groupe de v√©rification √† vie est d√©sormais disponible dans le cadre du Core Guidelines Checker pour Clang et Visual C ++.  Le but n'est pas d'atteindre une rigueur et une pr√©cision absolues, comme dans Rust, mais d'effectuer des v√©rifications simples et rapides dans les fonctions individuelles. </p><br><h3 id="osnovnye-principy-proverki">  Principes de base de la v√©rification </h3><br><p>  Du point de vue de l'analyse de la dur√©e de vie, les types sont divis√©s en 3 cat√©gories: </p><br><ul><li>  La valeur est ce √† quoi un pointeur peut pointer. </li><li> Pointeur - fait r√©f√©rence √† la valeur, mais ne contr√¥le pas sa dur√©e de vie.  Peut √™tre suspendu (pointeur suspendu).  Exemples: <code>T*</code> , <code>T&amp;</code> , it√©rateurs, <code>std::observer_ptr&lt;T&gt;</code> , <code>std::string_view</code> , <code>gsl::span&lt;T&gt;</code> </li><li>  Propri√©taire - contr√¥le la dur√©e de vie de la valeur.  Peut g√©n√©ralement supprimer sa valeur avant la date pr√©vue.  Exemples: <code>std::unique_ptr&lt;T&gt;</code> , <code>std::shared_ptr&lt;T&gt;</code> , <code>std::vector&lt;T&gt;</code> , <code>std::string</code> , <code>gsl::owner&lt;T*&gt;</code> </li></ul><br><p>  Un pointeur peut se trouver dans l'un des √©tats suivants: </p><br><ul><li>  Pointez sur une valeur stock√©e sur la pile </li><li>  Pointez sur une valeur contenue "√† l'int√©rieur" par un propri√©taire </li><li>  √ätre vide (null) </li><li>  Accrochez (invalide) </li></ul><br><h3 id="ukazateli-i-znacheniya">  Pointeurs et valeurs </h3><br><p>  Pour chaque pointeur <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> p </script>  est suivi <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.251ex" height="2.66ex" viewBox="-38.5 -832 3122 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-73" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-65" x="973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-74" x="1439" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMAIN-28" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="2190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMAIN-29" x="2694" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-2"> pset (p) </script>  - l'ensemble des valeurs auxquelles il peut indiquer.  Lors de la suppression d'une valeur, son occurrence dans tous <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi><mi>s</mi><mi>e</mi><mi>t</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.272ex" height="2.298ex" viewBox="-38.5 -728.2 1839.5 989.6" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-73" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-65" x="973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-74" x="1439" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mi>s</mi><mi>e</mi><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> pset </script>  remplac√© par <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi><mi>n</mi><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi><mi>e</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.35ex" height="2.057ex" viewBox="0 -780.1 3595 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-69" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-6E" x="345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-76" x="946" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-61" x="1431" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-6C" x="1961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-69" x="2259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-64" x="2605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-65" x="3128" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mi>n</mi><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi><mi>e</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> invalide </script>  .  Lors de l'acc√®s √† une valeur de pointeur <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> p </script>  tel que <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi><mi>n</mi><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi><mi>e</mi><mo>&amp;#x2208;</mo><mi>p</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.352ex" height="2.66ex" viewBox="0 -832 7901.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-69" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-6E" x="345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-76" x="946" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-61" x="1431" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-6C" x="1961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-69" x="2259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-64" x="2605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-65" x="3128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMAIN-2208" x="3872" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="4818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-73" x="5321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-65" x="5791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-74" x="6257" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMAIN-28" x="6619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="7008" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMAIN-29" x="7512" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mi>n</mi><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi><mi>e</mi><mo>‚àà</mo><mi>p</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-6"> invalide ‚àà pset (p) </script>  √©mettre une erreur. </p><br><pre> <code class="cpp hljs">string_view s; <span class="hljs-comment"><span class="hljs-comment">// pset(s) = {null} { char a[100]; s = a; // pset(s) = {a} cout &lt;&lt; s[0]; // OK } // pset(s) = {invalid} cout &lt;&lt; s[0]; // ERROR: invalid ‚àà pset(s)</span></span></code> </pre> <br><p>  √Ä l'aide d'annotations, vous pouvez configurer les op√©rations qui seront consid√©r√©es comme des op√©rations d'acc√®s √† la valeur.  Par d√©faut: <code>*</code> , <code>-&gt;</code> , <code>[]</code> , <code>begin()</code> , <code>end()</code> . </p><br><p>  Veuillez noter que l'avertissement n'est √©mis qu'au moment de l' <em>acc√®s</em> √† l'index invalide.  Si la valeur est supprim√©e, mais que personne n'acc√®de √† ce pointeur, tout est en ordre. </p><br><h3 id="ukazateli-i-vladelcy">  Panneaux et propri√©taires </h3><br><p>  Si pointeur <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> p </script>  indique une valeur contenue dans le propri√©taire <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>o</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.128ex" height="1.455ex" viewBox="0 -520.7 485.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-6F" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>o</mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> o </script>  alors √ßa <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msup><mi>o</mi><mo>&amp;#x2032;</mo></msup></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.162ex" height="2.66ex" viewBox="-38.5 -832 5236.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-73" x="503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-65" x="973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-74" x="1439" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMAIN-28" x="1801" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-70" x="2190" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMAIN-29" x="2694" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMAIN-3D" x="3361" y="0"></use><g transform="translate(4417,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-6F" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMAIN-2032" x="686" y="513"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><msup><mi>o</mi><mo>‚Ä≤</mo></msup></mrow></math></span></span><script type="math/tex" id="MathJax-Element-9"> pset (p) = {o '} </script>  . </p><br><p>  Les m√©thodes et fonctions qui prennent les propri√©taires, sont divis√©es en: </p><br><ul><li>  Op√©rations d'acc√®s √† la valeur propri√©taire.  Par d√©faut: <code>*</code> , <code>-&gt;</code> , <code>[]</code> , <code>begin()</code> , <code>end()</code> </li><li>  Op√©rations d'acc√®s au propri√©taire lui-m√™me, pointeurs <code>v.clear()</code> , comme <code>v.clear()</code> .  Par d√©faut, ce sont toutes les autres op√©rations non const </li><li>  Op√©rations d'acc√®s au propri√©taire lui-m√™me, pointeurs non invalidants, tels que <code>v.empty()</code> .  Par d√©faut, ce sont toutes des op√©rations const. </li></ul><br><p>  Annonce d'un ancien propri√©taire de contenu <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi><mi>n</mi><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi><mi>e</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.35ex" height="2.057ex" viewBox="0 -780.1 3595 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-69" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-6E" x="345" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-76" x="946" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-61" x="1431" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-6C" x="1961" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-69" x="2259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-64" x="2605" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/425873/&amp;usg=ALkJrhhCZFxYEk2r3xB_5wI-JyWblEV2NA#MJMATHI-65" x="3128" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mi>n</mi><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi><mi>e</mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> invalide </script>  lors de la r√©vocation du Propri√©taire ou lors de l'application d'op√©rations invalidantes. </p><br><p>  Ces r√®gles suffisent pour d√©tecter de nombreux bogues typiques dans le code C ++: </p><br><pre> <code class="cpp hljs">string_view s; <span class="hljs-comment"><span class="hljs-comment">// pset(s) = {null} string name = "foo"; s = name; // pset(s) = {name'} cout &lt;&lt; s[0]; // OK name = "bar"; // pset(s) = {invalid} cout &lt;&lt; s[0]; // ERROR</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v = get_ints(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>* p = &amp;v[<span class="hljs-number"><span class="hljs-number">5</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// pset(p) = {v'} v.push_back(42); // pset(p) = {invalid} cout &lt;&lt; *p; // ERROR</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::string_view s = <span class="hljs-string"><span class="hljs-string">"foo"</span></span>s; <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; s[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ERROR // :       std::string_view s = "foo"s // pset(s) = {"foo"s '} ; // pset(s) = {invalid}</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v = get_ints(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = v.begin(); i != v.end(); ++i) { <span class="hljs-comment"><span class="hljs-comment">// pset(i) = {v'} if (*i == 2) { v.erase(i); // pset(i) = {invalid} } // pset(i) = {v', invalid} } // ERROR: ++i for (auto i = v.begin(); i != v.end(); ) { if (*i == 2) i = v.erase(i); // OK else ++i; }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&gt; get_data(); <span class="hljs-comment"><span class="hljs-comment">//   ,  get_data() != nullopt for (int value : *get_data()) // ERROR cout &lt;&lt; value; // *get_data() ‚Äî     for (int value : std::vector&lt;int&gt;(*get_data())) // OK cout &lt;&lt; value;</span></span></code> </pre> <br><h3 id="otslezhivanie-vremeni-zhizni-parametrov-funkciy">  Suivi de la dur√©e de vie des param√®tres de fonction </h3><br><p>  Lorsque nous commen√ßons √† traiter des fonctions en C ++ qui renvoient des pointeurs, nous ne pouvons que deviner la relation entre la dur√©e de vie des param√®tres et la valeur de retour.  Si une fonction accepte et renvoie des pointeurs du m√™me type, alors une hypoth√®se est faite que la fonction "obtient" la valeur de retour √† partir d'un des param√®tres d'entr√©e: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">* p, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">* q)</span></span></span><span class="hljs-function"> -&gt; </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function">*</span></span>; <span class="hljs-comment"><span class="hljs-comment">// pset(ret) = {p', q'} auto g(std::string&amp; s) -&gt; char*; // pset(ret) = {s'}</span></span></code> </pre> <br><p>  Les fonctions suspectes sont facilement d√©tect√©es et ne produisent le r√©sultat de nulle part: </p><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::reference_wrapper&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; get_data() { <span class="hljs-comment"><span class="hljs-comment">//    int i = 3; return {i}; // pset(ret) = {i'} } // pset(ret) = {invalid}</span></span></code> </pre> <br><p>  Puisqu'il est possible de passer une valeur temporaire aux param√®tres <code>const T&amp;</code> , ils ne sont pas pris en compte, sauf si le r√©sultat n'est nulle part ailleurs √† prendre: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">min</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; y)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// pset(ret) = {x', y'} //    const T&amp;- //        auto x = 10, y = 2; auto&amp; bad = min(x, y + 1); // pset(bad) = {x, temp} // pset(bad) = {x, invalid} cout &lt;&lt; bad; // ERROR</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> K = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> V = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> V&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find_or_default</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;K, V&gt;&amp; m, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> K&amp; key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> V&amp; def)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// pset(ret) = {m', key', def'} std::map&lt;K, V&gt; map; K key = "foo"; const V&amp; s = find_or_default(map, key, "none"); // pset(s) = {map', key', temp} ‚áí pset(s) = {map', key', invalid} cout &lt;&lt; s; // ERROR</span></span></code> </pre> <br><p>  On pense √©galement que si une fonction accepte un pointeur (au lieu d'une r√©f√©rence), alors il peut √™tre nullptr, et ce pointeur ne peut pas √™tre utilis√© avant de le comparer avec nullptr. </p><br><h3 id="zaklyuchenie-po-kontrolyu-vremeni-zhizni">  Conclusion sur le contr√¥le de la dur√©e de vie </h3><br><p>  Je r√©p√®te que Lifetime n'est pas encore une proposition pour la norme C ++, mais une tentative audacieuse d'impl√©menter des v√©rifications de dur√©e de vie en C ++, o√π, contrairement √† Rust, par exemple, il n'y a jamais eu d'annotations correspondantes.  Au d√©but, il y aura beaucoup de faux positifs, mais au fil du temps, l'heuristique s'am√©liorera. </p><br><h3 id="voprosy-iz-zala">  Questions du public </h3><br><p>  <strong>Les v√©rifications de groupe √† vie fournissent-elles une garantie math√©matiquement pr√©cise de l'absence de pointeurs pendants?</strong> </p><br><p>  Th√©oriquement, il serait possible (dans le nouveau code) de bloquer un tas d'annotations sur les classes et les fonctions, et en retour le compilateur donnerait de telles garanties.  Mais ces v√©rifications ont √©t√© d√©velopp√©es selon le principe 80:20, c'est-√†-dire que vous pouvez d√©tecter la plupart des erreurs en utilisant un petit nombre de r√®gles et en appliquant un minimum d'annotations. </p><br><h2 id="metaklassy">  M√©taclasses </h2><br><p>  La m√©taclasse compl√®te en quelque sorte le code de la classe √† laquelle elle est appliqu√©e et sert √©galement de nom √† un groupe de classes qui remplissent certaines conditions.  Par exemple, comme illustr√© ci-dessous, la m√©taclasse d' <code>interface</code> rendra toutes les fonctions publiques et purement virtuelles pour vous. </p><br><p>  L'ann√©e derni√®re, Herb Sutter a r√©alis√© son premier projet de m√©taclasse ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">voir ici</a> ).  Depuis lors, la syntaxe actuellement propos√©e a chang√©. </p><br><p>  Pour commencer, la syntaxe d'utilisation des m√©taclasses a chang√©: </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  interface Shape { int area() const; void scale_by(double factor); }; //  class(interface) Shape { ‚Ä¶ }</span></span></code> </pre> <br><p>  Il est devenu plus long, mais il existe maintenant une syntaxe naturelle pour appliquer plusieurs m√©taclasses √† la fois: <code>class(meta1, meta2)</code> . </p><br><h3 id="opisanie-metaklassa">  Description de la m√©taclasse </h3><br><p>  Auparavant, une m√©taclasse √©tait un ensemble de r√®gles pour modifier une classe.  Maintenant, une m√©taclasse est une fonction constexpr qui prend une ancienne classe (d√©clar√©e dans le code) et en cr√©e une nouvelle. </p><br><p>  √Ä savoir, la fonction prend un param√®tre - des m√©ta-informations sur l'ancienne classe (le type de param√®tre d√©pend de l'impl√©mentation), cr√©e des √©l√©ments de classe (fragments), puis les ajoute au corps de la nouvelle classe √† l'aide de l'instruction <code>__generate</code> . </p><br><p>  Les fragments peuvent √™tre g√©n√©r√©s √† l'aide des constructions <code>__fragment</code> , <code>__inject</code> , <code>idexpr(‚Ä¶)</code> .  L'orateur a pr√©f√©r√© ne pas se concentrer sur son objectif, car cette partie sera encore modifi√©e avant d'√™tre soumise au comit√© de normalisation.  Les noms eux-m√™mes sont garantis d'√™tre chang√©s, un double soulignement a √©t√© ajout√© sp√©cifiquement pour clarifier cela.  Le rapport met l'accent sur des exemples qui vont plus loin. </p><br><h3 id="interface">  interface </h3><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">interface</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T source)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// source    //     .     //  ~X,  X ‚Äî   . __generate __fragment struct X { virtual ~X noexcept {} }; //    static_assert, compiler.require   //   constexpr-. //      . compiler.require(source.variables().empty(), "interfaces may not contain data members"); // member_functions(), ,  tuple&lt;‚Ä¶&gt;,   for... for... (auto f : source.member_functions()) { // ,   ‚Äî   / compiler.require(!f.is_copy() &amp;&amp; !f.is_move(), "interfaces may not copy or move; consider a virtual clone()"); //   public   if (!f.has_default_access()) f.make_public(); // (1) // ,       protected/private compiler.require(f.is_public(), "interface functions must be public"); //     f.make_pure_virtual(); // (2) //   f     __generate f; } }</span></span></code> </pre> <br><p>  Vous pourriez penser que sur les lignes (1) et (2) nous modifions la classe d'origine, mais non.  Veuillez noter que nous parcourons les fonctions de la classe d'origine avec la copie, modifions ces fonctions, puis les ins√©rons dans une nouvelle classe. </p><br><p>  Application de m√©taclasse: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shape</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">area</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale_by</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> factor)</span></span></span></span>; }; <span class="hljs-comment"><span class="hljs-comment">//  : class Shape { public: virtual ~Shape noexcept {} public: virtual int area() const = 0; public: virtual void scale_by(double factor) = 0; };</span></span></code> </pre> <br><h3 id="otladka-myuteksa">  D√©bogage Mutex </h3><br><p>  Supposons que nous ayons des donn√©es non thread-safe prot√©g√©es par un mutex.  Le d√©bogage peut √™tre facilit√© si, dans un assembly de d√©bogage, √† chaque appel, il est v√©rifi√© si le processus en cours a verrouill√© ce mutex.  Pour ce faire, une simple classe TestableMutex a √©t√© √©crite: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestableMutex</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lock</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ m.lock(); id = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::this_thread::get_id(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unlock</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ id = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id{}; m.unlock(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">is_held</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id == <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::this_thread::get_id(); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::mutex m; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::atomic&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id&gt; id; };</code> </pre> <br><p>  De plus, dans notre classe MyData, nous aimerions que chaque domaine public comme </p><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v;</code> </pre> <br><p>  Remplacez par + getter: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v_; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&amp; v() { assert(m_.is_held()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v_; }</code> </pre> <br><p>  Pour les fonctions, vous pouvez √©galement effectuer des transformations similaires. </p><br><p>  Ces t√¢ches sont r√©solues √† l'aide de macros et de la g√©n√©ration de code.  Herb Sutter a d√©clar√© la guerre aux macros: elles sont dangereuses, ignorent la s√©mantique, les espaces de noms, etc.  A quoi ressemble la solution sur les m√©taclasses: </p><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">constexpr</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">guarded_with_mutex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ __generate __fragment <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> {</span></span> TestableMutex m_; <span class="hljs-comment"><span class="hljs-comment">// lock, unlock } } template &lt;typename T, typename U&gt; constexpr void guarded_member(T type, U name) { auto field = ‚Ä¶; __generate field; auto getter = ‚Ä¶; __generate getter; } template &lt;typename T&gt; constexpr void guarded(T source) { guarded_with_mutex(); for... (auto o : source.member_variables()) { guarded_member(o.type(), o.name()); } }</span></span></code> </pre> <br><p>  Comment l'utiliser: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">guarded</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyData</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; v; Widget* w; }; MyData&amp; x = findData(<span class="hljs-string"><span class="hljs-string">"foo"</span></span>); xv().clear(); <span class="hljs-comment"><span class="hljs-comment">// assertion failed: m_.is_held()</span></span></code> </pre> <br><h3 id="actor">  acteur </h3><br><p>  Eh bien, m√™me si nous avons prot√©g√© un objet avec un mutex, maintenant tout est thread-safe, il n'y a aucune pr√©tention √† l'exactitude.  Mais si un objet est souvent accessible par de nombreux threads en parall√®le, le mutex sera surcharg√©, et il y aura une surcharge importante pour le prendre. </p><br><p>  La solution fondamentale au probl√®me des mutex buggy est le concept d'acteurs, lorsqu'un objet a une file d'attente de demande, tous les appels √† l'objet sont mis en file d'attente et ex√©cut√©s les uns apr√®s les autres dans un thread sp√©cial. </p><br><p>  Laissez la classe Active contenir une impl√©mentation de tout cela - en fait, un pool / ex√©cuteur de threads avec un seul thread.  Eh bien, les m√©taclasses aideront √† se d√©barrasser du code en double et √† mettre en file d'attente toutes les op√©rations: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">active</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageFilter</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ImageFilter(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::function&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(Buffer*)&gt; w) : work(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(w)) {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apply</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Buffer* b)</span></span></span><span class="hljs-function"> </span></span>{ work(b); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::function&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>(Buffer*)&gt; work; } <span class="hljs-comment"><span class="hljs-comment">//  : class ImageFilter { public: ImageFilter(std::function&lt;void(Buffer*)&gt; w) : work(std::move(w)) {} void apply(Buffer* b) { a.send([=] { work(b); }).join(); } private: std::function&lt;void(Buffer*)&gt; work; Active a; //   ,     work }</span></span></code> </pre> <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">active</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">log</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::fstream f; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">info</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(‚Ä¶)</span></span></span><span class="hljs-function"> </span></span>{ f &lt;&lt; ‚Ä¶; } };</code> </pre> <br><h3 id="property">  propri√©t√© </h3><br><p>  Il existe des propri√©t√©s dans presque tous les langages de programmation modernes, et quiconque ne les a tout simplement pas impl√©ment√©s sur la base de C ++: Qt, C ++ / CLI, toutes sortes de macros laides.  Cependant, ils ne seront jamais ajout√©s √† la norme C ++, car ils sont eux-m√™mes consid√©r√©s comme des fonctionnalit√©s trop √©troites, et il y avait toujours l'espoir qu'une proposition les impl√©menterait comme un cas sp√©cial.  Eh bien, ils peuvent √™tre impl√©ment√©s sur des m√©taclasses! </p><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  class X { public: class(property&lt;int&gt;) WidthClass { } width; }; //  class X { public: class WidthClass { int value; int get() const; void set(const int&amp; v); void set(int&amp;&amp; v); public: WidthClass(); WidthClass(const int&amp; v); WidthClass&amp; operator=(const int&amp; v); operator int() const; //   move! WidthClass(int&amp;&amp; v); WidthClass&amp; operator=(int&amp;&amp; v); } width; };</span></span></code> </pre> <br><p>  Vous pouvez d√©finir votre propre getter et setter: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Date</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class">&lt;int&gt;) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MonthClass</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> month; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> month; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> m)</span></span></span><span class="hljs-function"> </span></span>{ assert(m &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; m &lt; <span class="hljs-number"><span class="hljs-number">13</span></span>); month = m; } } month; }; Date date; date.month = <span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-comment"><span class="hljs-comment">// assertion failed</span></span></code> </pre> <br><p>  Id√©alement, je veux √©crire la <code>property int month { ‚Ä¶ }</code> , mais m√™me une telle impl√©mentation remplacera le zoo des extensions C ++ inventant des propri√©t√©s. </p><br><h3 id="zaklyuchenie-po-metaklassam">  Conclusion de la m√©taclasse </h3><br><p>  Les m√©taclasses sont une grande nouveaut√© pour un langage d√©j√† complexe.  Est-ce que √ßa vaut le coup?  Voici certains de leurs avantages: </p><br><ul><li>  Laissez les programmeurs exprimer plus clairement leurs intentions (je veux √©crire un acteur) </li><li>  R√©duisez la duplication de code et simplifiez le d√©veloppement et la maintenance du code qui suit certains mod√®les </li><li>  √âlimine certains groupes d'erreurs courantes (il suffira de s'occuper de toutes les subtilit√©s une fois) </li><li>  Permet de se d√©barrasser des macros?  (Herb Sutter est tr√®s belliqueux) </li></ul><br><h3 id="voprosy-iz-zala-1">  Questions du public </h3><br><p>  <strong>Comment d√©boguer des m√©taclasses?</strong> </p><br><p>  Au moins pour Clang, il existe une fonction intrins√®que qui, si elle est appel√©e, affichera le contenu r√©el de la classe au moment de la compilation, c'est-√†-dire ce qui est obtenu apr√®s l'application de toutes les m√©taclasses. </p><br><p>  <strong>On disait qu'il √©tait capable de d√©clarer des non-membres comme swap et hash dans les m√©taclasses.</strong>  <strong>O√π est-elle partie?</strong> </p><br><p>  La syntaxe sera d√©velopp√©e davantage. </p><br><p>  <strong>Pourquoi avons-nous besoin de m√©taclasses si des concepts ont d√©j√† √©t√© adopt√©s pour la normalisation?</strong> </p><br><p>  Ce sont des choses diff√©rentes.  Des m√©taclasses sont n√©cessaires pour d√©finir des parties d'une classe, et les concepts v√©rifient si une classe correspond √† un certain mod√®le √† l'aide d'exemples de classe.  En fait, les m√©taclasses et les concepts fonctionnent bien ensemble.  Par exemple, vous pouvez d√©finir le concept d'un it√©rateur et la m√©taclasse d'un ¬´it√©rateur typique¬ª qui d√©finit certaines op√©rations redondantes √† travers le reste. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425873/">https://habr.com/ru/post/fr425873/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425859/index.html">Les op√©rateurs r√©gionaux s'opposent √† l'annulation de l'itin√©rance</a></li>
<li><a href="../fr425861/index.html">Testez-vous: pouvez-vous prot√©ger l'entreprise contre les cyberattaques?</a></li>
<li><a href="../fr425867/index.html">Tests de performances des services Web dans le cadre de l'int√©gration continue. Exp√©rience Yandex</a></li>
<li><a href="../fr425869/index.html">iFixit: Apple n'a pas encore activ√© le blocage des MacBooks remis √† neuf</a></li>
<li><a href="../fr425871/index.html">Ekaterinbourg, 11 octobre - Atlassian rencontre le docker</a></li>
<li><a href="../fr425875/index.html">Mise √† niveau de la matrice des ordinateurs portables TN-> IPS ou comment obtenir un ordinateur portable plus avanc√© √† partir d'un ordinateur portable √©conomique</a></li>
<li><a href="../fr425877/index.html">Le PDG d'Apple affirme que les puces d'espionnage chinoises dans les serveurs Supermicro sont de la fiction</a></li>
<li><a href="../fr425879/index.html">Ce que Google a montr√© lors de sa pr√©sentation</a></li>
<li><a href="../fr425881/index.html">Tout ce que vous devez savoir sur l'alignement dans Flexbox</a></li>
<li><a href="../fr425883/index.html">√Ä plein temps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>