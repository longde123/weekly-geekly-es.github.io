<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖐🏽 🏵️ 👩🏿‍🍳 Symfony CLI - Neues lokales Entwicklungstool 👲🏿 ⛹🏼 👩‍🎤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im Dezember 2018 stellte Fabien Potansier - der Erfinder des Symfony-Frameworks - auf der SymfonyCon-Konferenz in Lissabon eine bestimmte symfony.phar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Symfony CLI - Neues lokales Entwicklungstool</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451138/"><p>  Im Dezember 2018 stellte Fabien Potansier - der Erfinder des Symfony-Frameworks - auf der SymfonyCon-Konferenz in Lissabon eine bestimmte symfony.phar vor - ein Tool zum schnellen Erstellen von Symfony-Anwendungen auf der Grundlage der offiziellen Projektvorlagen: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Skelett</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Website-Skelett</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Demo</a> .  Außerdem können Sie einen lokalen Webserver für die Entwicklung ausführen. </p><br><p>  Anschließend wurde das Tool in der Sprache Golang neu geschrieben, wodurch viele zusätzliche Funktionen implementiert werden konnten, z. B. die Unterstützung des https-Protokolls für den lokalen Webserver, die enge Integration in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SymfonyCloud</a> und vieles mehr!  Ich lade Sie, lieber Leser, ein, sich mit diesem Tool genauer vertraut zu machen, da es nicht nur im Kontext des Symfony-Frameworks funktioniert. <a name="habracut"></a></p><br><p>  <em>In diesem Artikel werden wir das Tool im Kontext der lokalen Entwicklung betrachten und die Integration in SymfonyCloud nicht beeinflussen.</em> </p><br><h2 id="sozdanie-proekta">  Projekterstellung </h2><br><p>  Um ein neues Symfony-Projekt basierend auf einer der offiziellen Vorlagen zu erstellen, müssen Sie den folgenden Befehl ausführen: </p><br><pre><code class="plaintext hljs">$ symfony new [--full | --demo] &lt;path-to-project&gt;</code> </pre> <br><p>  Standardmäßig wird die minimale <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Skelettvorlage</a> verwendet.  Um das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Website-Skelett</a> zu installieren, müssen Sie den Befehl mit der Option <code>--full</code> .  <code>--demo</code> das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Demo-</a> Projekt zu installieren, müssen Sie den Befehl mit der Option <code>--demo</code> . </p><br><p>  Unter der Haube führt <code>symfony new</code> den Befehl <code>composer create-project</code> des <code>composer create-project</code> , initialisiert dann ein neues Git-Repository und erstellt sofort ein Initial Commit. </p><br><p><img src="https://habrastorage.org/webt/jm/ba/ld/jmbaldu1ipohltzzpyknmptjjkm.png" alt="Symfonie neu"></p><br><h2 id="lokalnyy-server">  Lokaler Server </h2><br><p>  Führen Sie zum Starten des Servers einfach den Befehl im Stammverzeichnis der Anwendung aus </p><br><pre> <code class="plaintext hljs">$ symfony serve</code> </pre> <br><p><img src="https://habrastorage.org/webt/tj/ll/np/tjllnprnjec6yv2_oymkfjttf5c.png" alt="Symfonie dienen"></p><br><p>  Es analysiert die verfügbaren SAPIs auf dem verwendeten Computer und wählt die besten aus den vorhandenen aus, wobei die folgenden Prioritäten verwendet werden: Zuerst PHP FPM, dann PHP CGI und am Ende von PHP CLI.  Die Liste der verfügbaren SAPIs kann mit dem folgenden Befehl angezeigt werden: </p><br><pre> <code class="plaintext hljs">$ symfony local:php:list</code> </pre> <br><p><img src="https://habrastorage.org/webt/g6/sa/nt/g6santmo_udfma4qpzsueuovlno.png" alt="symfony local: php: list"></p><br><p>  Danach startet das Team den Server, der unter der Adresse <code>127.0.0.1</code> verfügbar ist, und wählt den freien Port ab <code>8000</code> . </p><br><p>  Standardmäßig startet der Server interaktiv.  Wir sehen sofort die Server- und Anwendungsprotokolle, aber unser Terminal ist blockiert.  Der Server kann im Daemon-Modus gestartet werden.  <code>symfony serve</code> die Option <code>-d</code> wenn Sie den Befehl <code>symfony serve</code> . </p><br><p>  Protokolle können durch Ausführen des Befehls angezeigt werden: </p><br><pre> <code class="plaintext hljs">$ symfony server:log</code> </pre> <br><p>  Sie können den Status des laufenden Servers auch mit dem folgenden Befehl anzeigen: </p><br><pre> <code class="plaintext hljs">$ symfony server:status</code> </pre> <br><p>  Verwenden Sie den folgenden Befehl, um den laufenden Server zu stoppen: </p><br><pre> <code class="plaintext hljs">$ symfony server:stop</code> </pre> <br><p>  UPD: Bisher haben wir das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Symfony / Web-Server-Bundle-</a> Paket verwendet, um den Server zu starten.  Mit dem Aufkommen der Symfony-CLI wird dieses Paket nicht mehr sehr relevant, da es den Server nur mit der PHP-CLI-SAPI starten kann und HTTPS, Domänennamen, PHP-FPM-SAPI und mehr nicht unterstützt. </p><br><h2 id="podderzhka-tls">  TLS-Unterstützung </h2><br><p>  Bei einigen Diensten oder Bibliotheken von Drittanbietern müssen Sie Anforderungen mithilfe des HTTPS-Protokolls senden.  Die Symfony-CLI bietet die Möglichkeit, die TLS-Unterstützung sehr einfach zu konfigurieren, indem zusätzliche Komponenten mit dem folgenden Befehl installiert werden: </p><br><pre> <code class="plaintext hljs">$ symfony server:ca:install</code> </pre> <br><p><img src="https://habrastorage.org/webt/mh/ot/hj/mhothjaz6wn4vlrm5jidxh794tm.png" alt="symfony server: ca: install"></p><br><p>  Dann starten Sie einfach Ihren Browser neu und voila - TLS-Unterstützung ist konfiguriert!  Starten Sie den Server mit dem Befehl <code>symfony serve</code> und Sie können mithilfe des HTTPS-Protokolls zur Site <code>symfony serve</code> . </p><br><p>  Ich möchte nicht wirklich alle Projekte unter <code>https://127.0.0.1:8000</code> oder <code>https://localhost:8000</code> öffnen, aber was ist mit Ihnen?  Dies bringt Unannehmlichkeiten mit sich: Wenn mehrere Projekte gleichzeitig ausgeführt werden, müssen Sie sich merken, an welchem ​​Port das Projekt arbeitet.  Wenn der Server neu gestartet wird, können sich die Ports usw. ändern. </p><br><p>  Symfony CLI löst auch dieses Problem!  Es bietet uns einen Proxyserver, mit dem Sie schöne Domainnamen erstellen können.  Binden Sie dazu den gewünschten Domainnamen mit dem folgenden Befehl an unser Projekt: </p><br><pre> <code class="plaintext hljs">$ symfony proxy:domain:attach &lt;domain-name&gt;</code> </pre> <br><p><img src="https://habrastorage.org/webt/jn/km/ie/jnkmiespott5emfipphx5rlp4n0.png" alt="Symfony-Proxy: Domäne: Anhängen"></p><br><p>  <code>demo-project.com</code> die Domäne <code>demo-project.com</code> an das Projektverzeichnis gebunden.  Als nächstes müssen wir den Proxyserver mit dem folgenden Befehl starten: </p><br><pre> <code class="plaintext hljs">$ symfony proxy:start</code> </pre> <br><p><img src="https://habrastorage.org/webt/ft/qr/ta/ftqrtajyu2q-e0onblnl0c0nqp4.png" alt="Symfony-Proxy: Start"></p><br><p>  Wir haben den Proxyserver im Daemon-Modus gestartet und er ist unter unserer Adresse <code>http://127.0.0.1:7080</code> verfügbar. Wir können ihn in einem Browser öffnen: </p><br><p><img src="https://habrastorage.org/webt/qc/dx/ka/qcdxkaa253fvipvnkph37htrvpc.png" alt="Symfony-Proxyserver"></p><br><p>  Hier sehen wir eine Liste der Domänen, Pfade zu Projekten im Dateisystem und den Serverstatus für jedes Projekt.  In diesem Screenshot sehen Sie, dass sich alle Server im Status "Gestoppt" befinden, <code>Stopped</code> noch nicht ausgeführt werden.  Im nächsten Schritt müssen wir diesen Proxyserver in den Betriebssystemeinstellungen hinzufügen </p><br><p><img src="https://habrastorage.org/webt/ih/ll/tx/ihlltxgvttuoph-qsoxnpkx37f0.png" alt="macOS Proxy Config"></p><br><p>  Damit ist die Einrichtung des Proxyservers abgeschlossen. Anschließend müssen Sie den Server mit dem bereits bekannten Befehl <code>symfony serve</code> .  Zusätzlich zur IP-Adresse mit dem Port sehen wir unseren Domainnamen, den wir im Browser verwenden können!  Das <strong>.wip-</strong> Postfix wird allen Domainnamen hinzugefügt. </p><br><p><img src="https://habrastorage.org/webt/b6/_j/5b/b6_j5b5zocuq1oqp--cjxikk9ng.png" alt="Symfonie dienen"></p><br><p>  Das heißt, bei Verwendung des Proxy-Server-Flows ändert sich der Start des Projekts geringfügig: </p><br><ol><li>  Wir starten den Proxyserver <br><pre> <code class="plaintext hljs">$ symfony proxy:start</code> </pre> </li><li>  Wir starten den Server für die Anwendung <br><pre> <code class="plaintext hljs">$ symfony serve</code> </pre> </li></ol><br><p>  Um die Arbeit mit dem Projekt abzuschließen, „spiegeln“ wir die oben beschriebenen Aktionen: </p><br><ol><li>  Wir stoppen den Server <br><pre> <code class="plaintext hljs">$ symfony server:stop</code> </pre> </li><li>  Stoppen Sie den Proxyserver <br><pre> <code class="plaintext hljs">$ symfony proxy:stop</code> </pre> </li></ol><br><p>  <em>Um diese Vorgänge zu vereinfachen, empfehle ich die Verwendung des Dienstprogramms GNU Make.</em> </p><br><h2 id="pereklyuchenie-versiy-php">  PHP-Versionswechsel </h2><br><p>  Wenn Sie in verschiedenen Projekten unterschiedliche Versionen von PHP verwenden, haben Sie wahrscheinlich das Problem, zwischen Versionen zu wechseln.  Es wäre großartig, ein automatisches Werkzeug dafür zu haben, oder?  Symfony CLI kann dieses Problem lösen!  Sie müssen nur die <code>.php-version</code> im Stammverzeichnis des Projekts erstellen und die gewünschte Version als Inhalt angeben. </p><br><pre> <code class="plaintext hljs">$ echo "7.2" &gt; .php-version</code> </pre> <br><p><img src="https://habrastorage.org/webt/fh/lk/fi/fhlkfipowhwlss3pmtodmb3izko.png" alt="PHP-Version"></p><br><p>  Wie Sie im obigen Screenshot sehen können, hat die Symfony-CLI die PHP-Versionsdatei gelesen und den Server mit der in dieser Datei angegebenen Version gestartet. </p><br><p>  Die Symfony-CLI bietet uns auch einen Wrapper über die PHP-CLI, der auch die in der PHP-Versionsdatei angegebene PHP-Version berücksichtigt.  Wenn Sie also Konsolenskripte aufrufen müssen, z. B. <code>bin/console</code> , verwenden Sie diese. </p><br><pre> <code class="plaintext hljs">$ symfony php</code> </pre> <br><p><img src="https://habrastorage.org/webt/fq/ic/w1/fqicw1fkufaijalvtqj0wznz4pi.png" alt="symfony php"></p><br><p>  Zur Vereinfachung können Sie einen Alias ​​für diesen Befehl erstellen, um Zeit zu sparen und Fehler beim Schreiben des Befehls zu vermeiden.  Zum Beispiel habe ich einen Alias <strong>sphp</strong> für mich erstellt: </p><br><pre> <code class="plaintext hljs">$ echo "alias sphp='symfony php'" &gt;&gt; ~/.bash_profile &amp;&amp; source ~/.bash_profile</code> </pre> <br><p>  Symfony CLI bietet einen ähnlichen Wrapper für Composer, sodass Sie auch keine Probleme damit haben.  Zur Vereinfachung können Sie einen Alias ​​für diesen Wrapper erstellen.  Ich habe diesen <strong>Scomposer</strong> : </p><br><pre> <code class="plaintext hljs">$ echo "alias scomposer='symfony composer'" &gt;&gt; ~/.bash_profile &amp;&amp; source ~/.bash_profile</code> </pre> <br><h2 id="proverka-na-uyazvimye-pakety">  Suchen Sie nach anfälligen Paketen </h2><br><p>  Als Bonus bietet die Symfony-CLI einen Befehl zum Suchen nach anfälligen Composer-Paketen in Ihrem Projekt.  Sie müssen die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Symfony Security Checker-</a> Abhängigkeit nicht mehr im Projekt installieren.  Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">offizielle Dokumentation</a> legt außerdem nahe, dass die in die Symfony-CLI integrierte Version besser funktioniert, da keine HTTP-Anforderungen für die offizielle API gestellt werden.  Sie können den Test mit dem folgenden Befehl ausführen: </p><br><pre> <code class="plaintext hljs">$ symfony security:check</code> </pre> <br><p><img src="https://habrastorage.org/webt/eg/3h/pd/eg3hpdet0zy88pflk9zzyalmvou.png" alt="Symfony-Sicherheit: überprüfen"></p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Symfony CLI ist eine recht praktische Komponente der lokalen Anwendungsinfrastruktur.  Er kann einen Webserver mit Unterstützung für das HTTPS-Protokoll ausführen, Domänennamen erstellen, das Umschalten der PHP-Version für jedes Projekt automatisieren und Abhängigkeiten auf Schwachstellen überprüfen. </p><br><p>  Die offizielle Dokumentation der Komponente finden Sie unter <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem Link</a> . <br>  Alle Fragen und Probleme können im offiziellen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Symfony / Cli-Repository</a> auf GitHub beschrieben werden. </p><br><p>  Teilen Sie Ihre Erfahrungen mit diesem Tool in den Kommentaren. </p><br><p>  Vielen Dank für Ihre Aufmerksamkeit! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de451138/">https://habr.com/ru/post/de451138/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de451124/index.html">Entwicklung von Proteinen in der Cloud mit Python und Transcriptic oder Wie man ein Protein für 360 US-Dollar erstellt</a></li>
<li><a href="../de451126/index.html">Toolbox für Forscher - Ausgabe 1: Selbstorganisation und Datenvisualisierung</a></li>
<li><a href="../de451130/index.html">Swift: ARC- und Speicherverwaltung</a></li>
<li><a href="../de451132/index.html">Consumer Driven Contracts oder Gitlab CI-eyed QA-Testautomatisierung</a></li>
<li><a href="../de451136/index.html">Eingeführt von .NET 5</a></li>
<li><a href="../de451144/index.html">Antiquitäten: Technik in der Fernsehwerbung</a></li>
<li><a href="../de451146/index.html">Beschleunigung der Erstellung von Webanwendungen mit Webpack</a></li>
<li><a href="../de451148/index.html">Objektorientierte Programmierung in Grafiksprachen</a></li>
<li><a href="../de451150/index.html">Fang mich, wenn du kannst. Manager-Version</a></li>
<li><a href="../de451152/index.html">Der Widerstand in der Gate-Schaltung oder wie man es richtig macht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>