<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЬЕ ЁЯО╜ ЁЯРО рд╣рдо рд╕рд╕реНрддреЗ рдореЗрдВ рдЗрдВрдЪ рдЕрдВрдзрд╛ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддреЗ рд╣реИрдВ ЁЯдЫЁЯП┐ ЁЯЪ▒ ЁЯУЮ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЧрд░реНрдорд┐рдпреЛрдВ рдореЗрдВ, рдЬрдм рдЪрдордХрджрд╛рд░ рд╕реВрд░рдЬ рдЪрдордХ рд░рд╣рд╛ рдерд╛, рддреЛ рдореИрдВ рдЗрд╕ gif рдкрд░ рдХрд╛рд░реНрдпрд╛рд▓рдп рдореЗрдВ рд╢рдЯрд░ рдХреЗ рд╢рдЯрд░ / рд╢рдЯрд░ рдШреБрдВрдбреА рдХреЛ рдореЛрдбрд╝рдХрд░ рдердХ рдЧрдпрд╛ рдерд╛ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдЪрд╛рд░...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╣рдо рд╕рд╕реНрддреЗ рдореЗрдВ рдЗрдВрдЪ рдЕрдВрдзрд╛ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рддреЗ рд╣реИрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/480690/"><p>  рдЧрд░реНрдорд┐рдпреЛрдВ рдореЗрдВ, рдЬрдм рдЪрдордХрджрд╛рд░ рд╕реВрд░рдЬ рдЪрдордХ рд░рд╣рд╛ рдерд╛, рддреЛ рдореИрдВ рдЗрд╕ gif рдкрд░ рдХрд╛рд░реНрдпрд╛рд▓рдп рдореЗрдВ рд╢рдЯрд░ рдХреЗ рд╢рдЯрд░ / рд╢рдЯрд░ рдШреБрдВрдбреА рдХреЛ рдореЛрдбрд╝рдХрд░ рдердХ рдЧрдпрд╛ рдерд╛ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдЪрд╛рд░ рдЖрдпрд╛ рдерд╛ред </p><br><p><img src="https://habrastorage.org/webt/s-/af/9n/s-af9ngu4pocqtawrfddz2u_uyi.gif"></p><br><p> <a href="https://perm.leroymerlin.ru/product/zhalyuzi-inspire-100h160-sm-alyuminiy-cvet-belyy-16262144/" rel="nofollow">рд▓реЗрд░реЙрдп рдорд░реНрд▓рд┐рди рд╕реЗ рдЕрдВрдзрд╛</a> рдЦрд░реАрджрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдореБрдЭреЗ рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рдкрд░реНрджреЗ рд▓рдЧрд╛рдиреЗ рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдерд╛, рд▓реЗрдХрд┐рди рдЙрдирдХреЗ рд▓рд┐рдП рдХрдИ рд╕рд╛рд▓ рдкрд╣рд▓реЗ рдХреАрдордд, рдЬрдм рдореИрдВрдиреЗ рдПрдХ рд╡рд┐рдХрд▓реНрдк рдмрдирд╛рдпрд╛ рдерд╛, рдмрд╣реБрдд рд╕реБрдВрджрд░ рдерд╛ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЦрд┐рдбрд╝рдХреА рдХреА рдКрдВрдЪрд╛рдИ рдФрд░ рдЪреМрдбрд╝рд╛рдИ рдХреЗ рдХрд╛рд░рдг, рдкрд░реНрджреЗ рдХрд╛ рдЖрдХрд╛рд░ рдЧреИрд░-рдорд╛рдирдХ рдирд┐рдХрд▓рд╛, рдЬрд┐рд╕рд╕реЗ рд▓рд╛рдЧрдд рдореЗрдВ рднреА рд╡реГрджреНрдзрд┐ рд╣реБрдИред <a name="habracut"></a></p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6jYhsuNkm_c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  рд▓реЗрд░реЙрдп рдорд░реНрд▓рд┐рди рд╕реЗ рдЕрдВрдзрд╛ рдХреЗ рд╕реНрд╡рдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдореЗрд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╣реИ </p><br><p>  рдЙрд╕рдХреЗ рдмрд╛рдж, рдХреБрдЫ рд╕рд╛рд▓ рдмреАрдд рдЧрдП рдФрд░ <a href="https://www.home-assistant.io/" rel="nofollow">рд╣реЛрдо рдЕрд╕рд┐рд╕реНрдЯреЗрдВрдЯ</a> рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдХрд╛рд░реНрдпрд╛рд▓рдп рдореЗрдВ "рд╕реНрдорд╛рд░реНрдЯ" рдЪреАрдЬреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдореИрдВ рдЕрдВрдзрд╛ рдХрд░ рджреЗрдиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рдЪрд╛рд░реЛрдВ рдкрд░ рд▓реМрдЯ рдЖрдпрд╛ред </p><br><p>  рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд╡рд┐рдХрд▓реНрдк рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рдереЗред  рдореИрдВрдиреЗ рджреЗрдЦрд╛ рдХрд┐ рд╕рднреА рдиреЗрддреНрд░рд╣реАрди рд╕реНрд╡рдЪрд╛рд▓рди рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдВ рджреЛ рдЗрдВрдЪ рдЕрдВрдзрд╛ рдХреЗ рд▓рд┐рдП рдереАрдВ, рдЬрдмрдХрд┐ рд░реВрд╕реА рд╕рдВрдШ рдореЗрдВ рдмреЗрдЪреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд▓рдЧрднрдЧ рд╕рднреА рдЕрдВрдзрд╛ рдПрдХ рдЗрдВрдЪ рдЪреМрдбрд╝реА рд╣реИрдВред </p><br><p><img src="https://habrastorage.org/webt/5m/-o/ga/5m-ogapelxc98rixmsho2p1wmgi.jpeg"><br>  рдПрдХ рдХрд╛рд░реНрдпрд╛рд▓рдп рдХреА рдЦрд┐рдбрд╝рдХреА рдкрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдВрдзрд╛ рдХрд░ рд░рд╣реА рд╣реИ </p><br><h2 id="1-vybor-dvigatelya-i-upravlyayuschego-mikrokontrollera">  1. рдореЛрдЯрд░ рдФрд░ рдирд┐рдпрдВрддреНрд░рдг рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреА рдкрд╕рдВрдж </h2><br><p>  рдкрд╣рд▓реЗ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рдерд╛ рдХрд┐ рдХрд╣рд╛рдВ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВред  рд╕реНрд╡рдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП, рдЕрдиреНрдп рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рдЕрдХреНрд╕рд░ рд▓рдЧрднрдЧ 130 рд░реВрдмрд▓ <a href="https://www.aliexpress.com/item/32896006818.html" rel="nofollow">рдПрдкреНрд▓рд╛рдЗрд╕</a> (рдЪреАрди рдореЗрдВ) рдХреЗ <a href="https://www.aliexpress.com/item/32896006818.html" rel="nofollow">рд▓рд┐рдП 28BYJ-48 рд╕реНрдЯреЗрдкрд░ рдореЛрдЯрд░ рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ <a href="https://www.aliexpress.com/item/32896006818.html" rel="nofollow">рд╣реИ</a> ред  рдореЗрд░реЗ рдкрд╛рд╕ рдирд┐рдпрдВрддреНрд░рдХ рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рд╕рд╛рде рдХреЛрдИ рдкреНрд░рд╢реНрди рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдореИрдВ рд▓рдЧрднрдЧ рд╣рд░ рдЬрдЧрд╣ <a href="https://www.aliexpress.com/item/32529101036.html" rel="nofollow">LOLIN (WEMOS) D1 рдорд┐рдиреА рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ <a href="https://www.aliexpress.com/item/32529101036.html" rel="nofollow">рд╣реВрдВ</a> ред </p><br><p><img src="https://habrastorage.org/webt/s_/zv/yc/s_zvycdv1q4dynrfm_sgaxx5wda.jpeg"><br>  рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдФрд░ рдорд╛рдирдХ рдЕрдВрдзрд╛: рд╢реАрд░реНрд╖ рджреГрд╢реНрдп </p><br><h2 id="2-proshivka-dlya-mikrokontrollera-esp8266-kitayskogo-proizvoditelya-espressif-systems">  2. рдЪреАрдиреА рдирд┐рд░реНрдорд╛рддрд╛ рдПрд╕реНрдкреНрд░реЗрд╕рд┐рдл рд╕рд┐рд╕реНрдЯрдореНрд╕ рдХреЗ рдИрдПрд╕рдкреА 8266 рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд▓рд┐рдП рдлрд░реНрдорд╡реЗрдпрд░ </h2><br><p>  рдЕрдЧрд▓реЗ рдЪрд░рдг рдореЗрдВ - рдлрд░реНрдорд╡реЗрдпрд░, рдореИрдВ рдЬрдЯрд┐рд▓ рдХреЛрдбрд┐рдВрдЧ рд╕реЗ рдкрд░реЗрд╢рд╛рди рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛, рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░ <a href="https://github.com/arendst/Tasmota" rel="nofollow">рдЯрд╕рдореЛрдЯрд╛</a> рдиреЗ рддреИрдпрд╛рд░ рдХрд┐рдП рдЧрдП рд╡рд┐рдХрд▓реНрдк рдирд╣реАрдВ рджрд┐рдПред  рдлрд┐рд░ рдореИрдВ <a href="https://esphome.io/index.html" rel="nofollow">ESPHome рдХреЗ</a> рд╕рд╛рде <a href="https://esphome.io/index.html" rel="nofollow">рдорд┐рд▓рд╛</a> - рдлрд░реНрдорд╡реЗрдпрд░ рдЬреЛ рдореВрд▓ рд░реВрдк рд╕реЗ рдФрд░ рдЧреГрд╣ рд╕рд╣рд╛рдпрдХ рджреНрд╡рд╛рд░рд╛ рд╕рдорд░реНрдерд┐рдд MQTT рдХреЗ рдмрд┐рдирд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/6m/u4/y4/6mu4y4zaeelfuxvwhqpanmyxwne.jpeg"><br>  рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдФрд░ рдорд╛рдирдХ рдЕрдВрдзрд╛: рд╕рд╛рдЗрдб рд╡реНрдпреВ </p><br><p>  ESPHome рдХрд╛ рдПрдХ рдЕрдЪреНрдЫрд╛ рдмреЛрдирд╕ рдпрд╣ рдерд╛ рдХрд┐ рдЗрд╕рдореЗрдВ <a href="https://esphome.io/components/stepper/index.html" rel="nofollow">рд╕реНрдЯреЗрдкрд░ рдореЛрдЯрд░реНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП</a> рдПрдХ <a href="https://esphome.io/components/stepper/index.html" rel="nofollow">рдШрдЯрдХ рд╣реИ</a> , рдЬреЛ рдЙрд▓рд╛рди 200 рдЪрд┐рдк рдХреЗ рд╕рд╛рде рдСрдкрд░реЗрд╢рди рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡рд┐рднрд┐рдиреНрди рд╕реНрдЯреЗрдкрд░ рдореЛрдЯрд░реНрд╕ рдХреЗ рдирд┐рдпрдВрддреНрд░рдг рд╕рд░реНрдХрд┐рдЯ рдореЗрдВ рд╡рд┐рджреНрдпреБрдд рдЪреБрдореНрдмрдХреАрдп рд░рд┐рд▓реЗ, рдбреАрд╕реА рдореЛрдЯрд░реНрд╕, рд╕реЛрд▓рд┐рдбреЛрдЗрдб рд╡рд╛рд▓реНрд╡ рд╕рд╣рд┐рдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╢рдХреНрддрд┐ рдХреЗ рднрд╛рд░ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрдВрдЬрдиред </p><br><p><img src="https://habrastorage.org/webt/9d/it/n9/9ditn9kzjwbviv_gm9f36cyqcbo.jpeg"><br>  рд░реАрдб рдмреНрд▓рд╛рдЗрдВрдбреНрд╕: рд╕рд╛рдЗрдб рд╡реНрдпреВ </p><br><p>  рдЪреВрдВрдХрд┐ рдореИрдВ <a href="https://www.home-assistant.io/hassio/" rel="nofollow">Hass.io рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ <a href="https://www.home-assistant.io/hassio/" rel="nofollow">рд╣реВрдВ</a> , рдЗрд╕рд▓рд┐рдП рдореИрдВрдиреЗ рдлрд░реНрдорд╡реЗрдпрд░ рдХреЗ рд▓рд┐рдП рд╕рдВрдХрд▓рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ - <a href="https://github.com/esphome/hassio" rel="nofollow">ESPHome Hass.io рдПрдб-рдСрди</a> ред <br>  рдЦрд┐рдбрд╝рдХреА рдкрд░ рддреАрди рдЕрдВрдзрд╛ рд╣реЛрддреЗ рд╣реИрдВ рдФрд░ рддреАрди рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддреЗ рд╣реИрдВред  рдпрд╣рд╛рдБ рдкрд░рд┐рдгрд╛рдореА рдлрд░реНрдорд╡реЗрдпрд░ рд╣реИрдВ: <br>  рдкрд░реАрдХреНрд╖рдг рдХреЗ рдмрд╛рдж, рдореИрдВрдиреЗ рдкрд╛рдпрд╛ рдХрд┐, рдЕрдВрдзрд╛ рдХреЗ рд╕рд╣реА рдЙрджреНрдШрд╛рдЯрди / рд╕рдорд╛рдкрди рдХреЗ рд▓рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рдЕрдВрдзреЗ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/i4/gr/ap/i4graptiht5ucu-4skpxegdqlyi.png"></p><br><div class="spoiler">  <b class="spoiler_title">window_1.yaml</b> <div class="spoiler_text"><pre><code class="plaintext hljs">substitutions: devicename: window_1 upper_devicename: Window 1 esphome: name: $devicename platform: ESP8266 board: d1_mini wifi: ssid: "xxx" password: "xxx" # Enable fallback hotspot (captive portal) in case wifi connection fails ap: ssid: "Window 1 Fallback Hotspot" password: "xxx" captive_portal: # web_server: # port: 80 # css_url: http://192.168.15.10:8123/local/webserver-v1.min.css # js_url: http://192.168.15.10:8123/local/webserver-v1.min.js # Enable Home Assistant API api: services: - service: control_stepper variables: target: int then: - stepper.set_target: id: my_stepper target: !lambda 'return target;' # Enable OTA Access ota: # Enable verbose logging over serial logger: # physical connection stepper: - platform: uln2003 id: my_stepper pin_a: D0 pin_b: D5 pin_c: D6 pin_d: D7 max_speed: 250 steps/s sleep_when_done: true acceleration: inf deceleration: inf i2c: cover: - platform: template name: "Zhaliuzi 1" id: window1 device_class: blind open_action: - stepper.report_position: id: my_stepper position: 0 - stepper.set_target: id: my_stepper target: -1550 close_action: - stepper.report_position: id: my_stepper position: 0 - stepper.set_target: id: my_stepper target: 1550 stop_action: - stepper.set_target: id: my_stepper target: !lambda return id(my_stepper).current_position; optimistic: true assumed_state: true sensor: - platform: bh1750 name: "Osveshchennost u okna" address: 0x23 update_interval: 40s # General device data - platform: uptime id: uptime_sec - platform: wifi_signal name: ${upper_devicename} WiFi Signal id: wifis_signal update_interval: 900s text_sensor: - platform: template name: ${upper_devicename} Uptime lambda: |- int seconds = (id(uptime_sec).state); int days = seconds / (24 * 3600); seconds = seconds % (24 * 3600); int hours = seconds / 3600; seconds = seconds % 3600; int minutes = seconds / 60; seconds = seconds % 60; return { (String(days) +"d " + String(hours) +"h " + String(minutes) +"m "+ String(seconds) +"s").c_str() }; icon: mdi:clock-start update_interval: 113s - platform: template name: ${upper_devicename} Wifi Strength icon: "mdi:wifi" lambda: |- if (id(wifis_signal).state &gt; -50 ) { return {"Excellent"}; } else if (id(wifis_signal).state &gt; -60) { return {"Good"}; } else if (id(wifis_signal).state &gt; -70) { return {"Fair"}; } else if (id(wifis_signal).state &lt; -70) { return {"Weak"}; } else { return {"None"}; } update_interval: 900s - platform: version name: ${upper_devicename} Version - platform: template name: ${upper_devicename} MAC Address lambda: 'return {WiFi.macAddress().c_str()};' icon: mdi:fingerprint update_interval: 1d switch: - platform: restart name: ${upper_devicename} Restart</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">window_2.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">substitutions: devicename: window_2 upper_devicename: Window 2 esphome: name: $devicename platform: ESP8266 board: d1_mini wifi: ssid: "xxx" password: "xxx" # Enable fallback hotspot (captive portal) in case wifi connection fails ap: ssid: "Window 2 Fallback Hotspot" password: "xxx" captive_portal: # web_server: # port: 80 # css_url: http://192.168.15.10:8123/local/webserver-v1.min.css # js_url: http://192.168.15.10:8123/local/webserver-v1.min.js # Enable Home Assistant API api: services: - service: control_stepper variables: target: int then: - stepper.set_target: id: my_stepper target: !lambda 'return target;' # Enable OTA Access ota: # Enable verbose logging over serial logger: # physical connection stepper: - platform: uln2003 id: my_stepper pin_a: D0 pin_b: D5 pin_c: D6 pin_d: D7 max_speed: 250 steps/s sleep_when_done: true acceleration: inf deceleration: inf cover: - platform: template name: "Zhaliuzi 2" id: window2 device_class: blind open_action: - stepper.report_position: id: my_stepper position: 0 - stepper.set_target: id: my_stepper target: -1800 close_action: - stepper.report_position: id: my_stepper position: 0 - stepper.set_target: id: my_stepper target: 1800 stop_action: - stepper.set_target: id: my_stepper target: !lambda return id(my_stepper).current_position; optimistic: true assumed_state: true # General device data sensor: - platform: uptime id: uptime_sec - platform: wifi_signal name: ${upper_devicename} WiFi Signal id: wifis_signal update_interval: 900s text_sensor: - platform: template name: ${upper_devicename} Uptime lambda: |- int seconds = (id(uptime_sec).state); int days = seconds / (24 * 3600); seconds = seconds % (24 * 3600); int hours = seconds / 3600; seconds = seconds % 3600; int minutes = seconds / 60; seconds = seconds % 60; return { (String(days) +"d " + String(hours) +"h " + String(minutes) +"m "+ String(seconds) +"s").c_str() }; icon: mdi:clock-start update_interval: 113s - platform: template name: ${upper_devicename} Wifi Strength icon: "mdi:wifi" lambda: |- if (id(wifis_signal).state &gt; -50 ) { return {"Excellent"}; } else if (id(wifis_signal).state &gt; -60) { return {"Good"}; } else if (id(wifis_signal).state &gt; -70) { return {"Fair"}; } else if (id(wifis_signal).state &lt; -70) { return {"Weak"}; } else { return {"None"}; } update_interval: 900s - platform: version name: ${upper_devicename} Version - platform: template name: ${upper_devicename} MAC Address lambda: 'return {WiFi.macAddress().c_str()};' icon: mdi:fingerprint update_interval: 1d switch: - platform: restart name: ${upper_devicename} Restart</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">window_3.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">substitutions: devicename: window_3 upper_devicename: Window 3 esphome: name: $devicename platform: ESP8266 board: d1_mini wifi: ssid: "xxx" password: "xxx" # Enable fallback hotspot (captive portal) in case wifi connection fails ap: ssid: "Window 3 Fallback Hotspot" password: "xxx" captive_portal: # web_server: # port: 80 # css_url: http://192.168.15.10:8123/local/webserver-v1.min.css # js_url: http://192.168.15.10:8123/local/webserver-v1.min.js # Enable Home Assistant API api: services: - service: control_stepper variables: target: int then: - stepper.set_target: id: my_stepper target: !lambda 'return target;' # Enable OTA Access ota: # Enable verbose logging over serial logger: # physical connection stepper: - platform: uln2003 id: my_stepper pin_a: D0 pin_b: D5 pin_c: D6 pin_d: D7 max_speed: 250 steps/s sleep_when_done: true acceleration: inf deceleration: inf cover: - platform: template name: "Zhaliuzi 3" id: window3 device_class: blind open_action: - stepper.report_position: id: my_stepper position: 0 - stepper.set_target: id: my_stepper target: -1600 close_action: - stepper.report_position: id: my_stepper position: 0 - stepper.set_target: id: my_stepper target: 1600 stop_action: - stepper.set_target: id: my_stepper target: !lambda return id(my_stepper).current_position; optimistic: true assumed_state: true # General device data sensor: - platform: uptime id: uptime_sec - platform: wifi_signal name: ${upper_devicename} WiFi Signal id: wifis_signal update_interval: 900s text_sensor: - platform: template name: ${upper_devicename} Uptime lambda: |- int seconds = (id(uptime_sec).state); int days = seconds / (24 * 3600); seconds = seconds % (24 * 3600); int hours = seconds / 3600; seconds = seconds % 3600; int minutes = seconds / 60; seconds = seconds % 60; return { (String(days) +"d " + String(hours) +"h " + String(minutes) +"m "+ String(seconds) +"s").c_str() }; icon: mdi:clock-start update_interval: 113s - platform: template name: ${upper_devicename} Wifi Strength icon: "mdi:wifi" lambda: |- if (id(wifis_signal).state &gt; -50 ) { return {"Excellent"}; } else if (id(wifis_signal).state &gt; -60) { return {"Good"}; } else if (id(wifis_signal).state &gt; -70) { return {"Fair"}; } else if (id(wifis_signal).state &lt; -70) { return {"Weak"}; } else { return {"None"}; } update_interval: 900s - platform: version name: ${upper_devicename} Version - platform: template name: ${upper_devicename} MAC Address lambda: 'return {WiFi.macAddress().c_str()};' icon: mdi:fingerprint update_interval: 1d switch: - platform: restart name: ${upper_devicename} Restart</code> </pre> </div></div><br><h2 id="3-ustanovka-privoda-v-zhalyuzi">  3. рдЕрдВрдзрд╛ рдореЗрдВ рдбреНрд░рд╛рдЗрд╡ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛ </h2><br><p>  рд╕реНрдЯреЗрдкрд░ рдореЛрдЯрд░ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдВрдзрд╛ рдореЗрдВ рдлрд┐рдЯ рдирд╣реАрдВ рд╣реБрдИ, рд▓реЗрдХрд┐рди рдЪреВрдВрдХрд┐ рдореЗрд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЙрдиреНрд╣реЗрдВ рджреАрд╡рд╛рд░ рдХреЗ рдЦрд┐рд▓рд╛рдл рджрдмрд╛рдпрд╛ рдирд╣реАрдВ рдЧрдпрд╛ рдерд╛, рдЗрд╕рд▓рд┐рдП рдЕрдВрдзрд╛ рдХреЗ рдкреАрдЫреЗ рд╕реЗ рд╕реНрд▓реЙрдЯ рдореЗрдВ рдореЛрдЯрд░ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рд╕рдВрднрд╡ рдерд╛ред </p><br><p><img src="https://habrastorage.org/webt/t2/27/tq/t227tqf5ntrwkhhifzlyamah7ag.jpeg"><br>  рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рд╡рд┐рдВрдбреЛ рд▓реЗрд░реЙрдп рдорд░реНрд▓рд┐рди рд╕реЗ рдорд┐рд▓рддреА рд╣реИ </p><br><h2 id="4-ustanovka-konstrukcii-na-okne">  4. рдЦрд┐рдбрд╝рдХреА рдкрд░ рд╕рдВрд░рдЪрдирд╛ рдХреА рд╕реНрдерд╛рдкрдирд╛ </h2><br><p>  рдЪреВрдВрдХрд┐ рдЕрдВрдзрд╛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмрд┐рд▓реНрдбрд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдореИрдВ рдХреЗрд╡рд▓ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд╕рд╛рде рдПрдХ рдмреЙрдХреНрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВ рдФрд░ рдЦрд┐рдбрд╝рдХреА рдХреЗ рдмрдЧрд▓ рдореЗрдВ <a href="https://www.aliexpress.com/item/32898716031.html" rel="nofollow">рдПрдХ рдмрд┐рдЬрд▓реА рдХреА рдЖрдкреВрд░реНрддрд┐</a> рдХрд░ рд╕рдХрддрд╛ рд╣реВрдВред  рдмрд┐рдЬрд▓реА рдХреА рдЖрдкреВрд░реНрддрд┐ рд╕рдмрд╕реЗ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╕реНрдЯреЗрдкрд░ рдореЛрдЯрд░реНрд╕ рдХреЛ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдореЗрдВ рд╕реНрд╡рд┐рдЪ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдкрд╣рд▓рд╛ рдкрд╣рд▓реЗ, рдлрд┐рд░ рджреВрд╕рд░рд╛, рдлрд┐рд░ рддреАрд╕рд░рд╛ред  рдХреБрд▓ рд░рди рд╕рдордп рд▓рдЧрднрдЧ 20 рд╕реЗрдХрдВрдб рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/ms/xe/qp/msxeqptaj8gcvse0bi-ufl-q1-m.jpeg"><br>  рддреАрди ESP8266 рдХреЗ рд╕рд╛рде рдмреЙрдХреНрд╕ рдФрд░ рдХрд╛рд░реНрдпрд╛рд▓рдп рдХреА рджреАрд╡рд╛рд░ рдкрд░ рдмрд┐рдЬрд▓реА рдХреА рдЖрдкреВрд░реНрддрд┐ </p><br><h2 id="5-pravila-dlya-avtomatizacii-zakrytiya-zhalyuzi-iz-home-assistant">  5. рдЧреГрд╣ рд╕рд╣рд╛рдпрдХ рд╕реЗ рдЕрдВрдзрд╛ рдХреЗ рд╕рдорд╛рдкрди рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рдирд┐рдпрдо </h2><br><p>  рдЬрдм рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕реАрдорд╛ рдкрд╛рд░ рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рдЕрдВрдзрд╛ 90 рдбрд┐рдЧреНрд░реА рдШреВрдорддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рдЙрд╕реА рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╡рд╛рдкрд╕ рд▓реМрдЯрддрд╛ рд╣реИред </p><br><div class="spoiler">  <b class="spoiler_title">automations.yaml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">- alias: Covers OPEN trigger: - platform: numeric_state entity_id: sensor.osveshchennost_u_okna above: 0 below: 2500 condition: - condition: state entity_id: cover.zhaliuzi_3 state: 'closed' - condition: state entity_id: cover.zhaliuzi_2 state: 'closed' - condition: state entity_id: cover.zhaliuzi_1 state: 'closed' action: - service: cover.open_cover data: entity_id: cover.zhaliuzi_3 - delay: '00:00:06' - service: cover.open_cover data: entity_id: cover.zhaliuzi_2 - delay: '00:00:06' - service: cover.open_cover data: entity_id: cover.zhaliuzi_1 - alias: Covers CLOSE trigger: - platform: numeric_state entity_id: sensor.osveshchennost_u_okna above: 2501 below: 50000 condition: - condition: state entity_id: cover.zhaliuzi_3 state: 'open' - condition: state entity_id: cover.zhaliuzi_2 state: 'open' - condition: state entity_id: cover.zhaliuzi_1 state: 'open' action: - service: cover.close_cover data: entity_id: cover.zhaliuzi_3 - delay: '00:00:06' - service: cover.close_cover data: entity_id: cover.zhaliuzi_2 - delay: '00:00:06' - service: cover.close_cover data: entity_id: cover.zhaliuzi_1</code> </pre> </div></div><br><h2 id="itog">  рдкрд░рд┐рдгрд╛рдо </h2><br><p>  рдпрд╣рд╛рдВ рдЕрдВрдзрд╛ рдХреЗ рд╕реНрд╡рдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдХреЗрд╡рд▓ рд╕рдордп рд▓реЗрдиреЗ рд╡рд╛рд▓реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдШрдЯрдХ рд╕реНрд╡рдпрдВ рд╕рд╕реНрддреА рд╣реИрдВред  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдХреБрдЫ рдлрд╛рдпрджреЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд▓рд╛рдн: рд╕рд╕реНрддрд╛рдкрдиред <br>  рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдиреБрдХрд╕рд╛рди рднреА рд╣реИрдВ - ESP8266 рдЕрдВрдзрд╛ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреЛ рдХрднреА рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИред  рдХрднреА-рдХрднреА, рдЬрдм, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╢рд╛рдлреНрдЯ рд╕реНрдХреНрд░реЙрд▓ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рд╣реЛрдо рд╕рд╣рд╛рдпрдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдПрдХ рдмрдЯрди рджрдмрд╛рдХрд░ рдЗрд╕реЗ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдЕрдкрдиреА рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><blockquote>  рдкреАрдПрд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХрд╛рдо рдЦрддреНрдо рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЙрдиреНрд╣реЛрдВрдиреЗ рдореБрдЭреЗ рдмрддрд╛рдпрд╛ рдХрд┐ рд╡рд┐рд╢реЗрд╖ рдХрдиреЗрдХреНрдЯрд┐рдВрдЧ рд╕реНрд▓реАрд╡реНрд╕ рд╣реИрдВ рдЬреЛ рдЖрдкрдХреЛ рдореЛрдЯрд░ рд╢рд╛рдлреНрдЯ рдФрд░ рдЕрдВрдзрд╛ рд╢рд╛рдлреНрдЯ рдХреЛ рд╕рдЦреНрддреА рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред  рдпрд╣ рдХрдиреЗрдХреНрдЯрд┐рдВрдЧ рдЯреНрдпреВрдм рдХреЗ рдЕрдкрд░реНрдпрд╛рдкреНрдд рдмрдиреНрдзрди рдХреЗ рдХрд╛рд░рдг рдореЗрд░реЗ рд╡рд░реНрддрдорд╛рди рдорд╛рдорд▓реЗ рдореЗрдВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╕реНрдХреНрд░реЙрд▓ рд╕реЗ рдмрдЪ рдЬрд╛рдПрдЧрд╛ред </blockquote><p>  рдЖрдЧреЗ рдХрд╛ рд╡рд┐рд╡рд░рдг <a href="https://github.com/empenoso/diy-cheap-automated-blinds" rel="nofollow">GitHub</a> рдкрд░ рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ <a href="https://github.com/empenoso/diy-cheap-automated-blinds" rel="nofollow">рд╣реИ</a> ред </p><br><p>  рдкреЛрд╕реНрдЯ рдХрд░рдиреЗрд╡рд╛рд▓реЗ: <a href="https://www.facebook.com/mikhail.shardin" rel="nofollow">рдорд┐рдЦрд╛рдЗрд▓ рд╢рд╛рд░реНрджрд┐рди</a> , <br>  17 рджрд┐рд╕рдВрдмрд░ 2019 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi480690/">https://habr.com/ru/post/hi480690/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi480680/index.html">NGINX рд░рдХреНрд╖рд╛ рд░рдгрдиреАрддрд┐ рдФрд░ рдЗрдЧреЛрд░ Sysoev рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз</a></li>
<li><a href="../hi480682/index.html">рдЗрдВрдЯреЗрд▓ RealSense LiDAR L515 - рдПрдХ рдФрд░ рдирдпрд╛ RealSense</a></li>
<li><a href="../hi480684/index.html">DIY StarWars рд╣рд┐рдордкрд╛рдд рдХрд╛ рдПрдХ рдЦрдВрдб (рдПрдкреАрдкреА 2019)</a></li>
<li><a href="../hi480686/index.html">рдХреНрдпреЛрдВ рдореИрдВрдиреЗ рдореЛрдмрд╛рдЗрд▓ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рдХреНрд░реЙрд╕-рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рд╕рдорд╛рдзрд╛рди рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛</a></li>
<li><a href="../hi480688/index.html">Mojibakes рдХрд╣рд╛рдБ рд╕реЗ рдЖрддреЗ рд╣реИрдВ? рдПрдирдХреЛрдбрд┐рдВрдЧ рдХреА рдЕрдирд┐рд╡рд╛рд░реНрдпрддрд╛</a></li>
<li><a href="../hi480692/index.html">MobX рдпрд╛ Redux: рдЬреЛ рд░рд┐рдПрдХреНрдЯ рд╕реНрдЯреЗрдЯ рдореИрдиреЗрдЬрдореЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдмреЗрд╣рддрд░ рд╣реИ?</a></li>
<li><a href="../hi480694/index.html">рдХреНрдпрд╛ рд╣рдо рдпреВрдПрдХреНрд╕ рдПрдХреНрд╕реЗрд╕рд┐рдмрд┐рд▓рд┐рдЯреА рдФрд░ рдпреВрдПрдмрд┐рд▓рд┐рдЯреА рдХреЛ рдХреЙрд▓ рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ?</a></li>
<li><a href="../hi480700/index.html">рд╣рдо Chrome рд╕реЗ рдХрдВрд╕реЛрд▓.рд▓реЙрдЧ () рдХрд╛ рдкреВрд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi480702/index.html">рдПрдЪрдЖрд░ рдФрд░ рдкреНрд░рддрд┐рднрд╛, рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдФрд░ рд░рдЪрдирд╛рддреНрдордХ: рдЖрдард╡рд╛рдВ рд╣реНрд░рд╛рдмреЗрд╕реЗрдорд┐рдирд╛рд░ рдХреИрд╕рд╛ рдерд╛</a></li>
<li><a href="../hi480708/index.html">рджрд╢рдХреЛрдВ рдХрд╛ рдЕрдВрдд рдЖ рд░рд╣рд╛ рд╣реИред рдкрд┐рдЫрд▓реЗ 10 рд╡рд░реНрд╖реЛрдВ рдореЗрдВ Google Play рдкрд░ рдХреМрди рд╕реЗ рдРрдкреНрд╕ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдП рдЧрдП?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>