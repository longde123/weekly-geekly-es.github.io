<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé§ üõãÔ∏è üë®üèæ Moteur collecteur + Digispark = 50 $ de v√©lo √©lectrique üç± ü¶ñ üâê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="L'id√©e de l'e-led me g√™ne depuis une dizaine d'ann√©es, je m'en suis rendu compte tout √† l'heure! 


 Spoiler 


 Le montant indiqu√© est des fonds pour...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Moteur collecteur + Digispark = 50 $ de v√©lo √©lectrique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415497/"><p><img src="https://habrastorage.org/getpro/habr/post_images/ad8/405/6ef/ad84056effdda1847397c99228ad1bbb.jpg" alt="Tout ne fait que commencer."></p><br><p>  L'id√©e de l'e-led me g√™ne depuis une dizaine d'ann√©es, je m'en suis rendu compte tout √† l'heure! </p><br><p>  <strong>Spoiler</strong> </p><br><p> Le montant indiqu√© est des fonds pour la motorisation d'un v√©lo ordinaire, batteries comprises. </p><br><p>  La t√¢che consiste √† maintenir la vitesse sur une section horizontale d'asphalte de 20 km / h et √† aider dans d'autres cas. </p><br><p>  R√©serve de marche - ~ 30 minutes </p><a name="habracut"></a><br><p>  <strong>Commen√ßons</strong> </p><br><p>  Pour commencer, je vais expliquer pourquoi 50 $ - la limite du co√ªt du travail fait maison - est le prix d'une tron√ßonneuse chinoise, √† partir de laquelle vous pouvez tromper le moteur, et 200 $ est d√©j√† une Honda Dio27. </p><br><p>  <strong>L'introduction √©tait la suivante:</strong> </p><br><ol><li>  Sur un tron√ßon horizontal d'asphalte, un cycliste d√©pense 100 W pour maintenir une vitesse de 20 km / h. </li><li>  Beaucoup de puissance n'est n√©cessaire que bri√®vement sur l'acc√©l√©ration / le soul√®vement. </li><li>  La tension d'une batterie au plomb (12V) sous une charge chute consid√©rablement, en ondes √©lectroniques jusqu'√† 10V (et la puissance est proportionnelle au carr√© de la tension - elle diminue de moiti√© (contre 14V!) </li></ol><br><p>  <strong>Autrement dit, pour un cyclage normal, la puissance nominale de 100 W est suffisante pour le moteur - il vous suffit de vous d√©barrasser de la chute de tension!</strong> </p><br><p>  <strong>Ceci est mis en ≈ìuvre par le contr√¥le PWM d'un moteur 12 volts √† partir d'une batterie 24 V, et il devient possible de mettre en ≈ìuvre une postcombustion √† court terme.</strong> </p><br><p>  En cons√©quence, le moteur de radiateur de refroidissement General Motors (Daewoo AKA Opel Kadett) ~ 150W a √©t√© pris (consommation - la sortie est juste sup√©rieure √† 100W et il y a) -13 $. </p><br><p>  Et les deux batteries les plus populaires pour les alimentations sans coupure sont AGM, 12 volts, 7 amp√®res-heures chacune, pour 10 $. </p><br><p>  Si vous prenez le prix Digispark - 2 $ </p><br><p>  En g√©n√©ral, plus 1 $ - transistors (2pcs - IRLZ44NPBF) - j'ai obtenu 36 $, mais disons que quelqu'un n'a pas de contreplaqu√©, une cartouche d'un vieux foret et des fils de cuivre d'une section de 2,5 carr√©s. </p><br><p>  Tout cela est achet√© sur le march√© "aux puces", et vous pouvez utiliser d'autres composants - moteur, batteries. </p><br><p>  Je me suis promis qu'au d√©but de l'√©t√©, tout irait - mais je n'avais pas le temps, j'ai paniqu√© - et √ßa a quand m√™me march√©! </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f0e/b2e/c78/f0eb2ec78f82e446ab547efd24787089.jpg" alt="E-led sur des b√©quilles"></p><br><p>  Au d√©but, m√™me sans contr√¥leur, les batteries sont charg√©es avec un courant de ~ 7,5% - 0,5A chacune, sont parall√©lis√©es et sont connect√©es au moteur via un interrupteur conventionnel. </p><br><p>  Oui, oui, je sais - f√©roce <del>  ferme collective </del>  , mais vous deviez commencer quelque part, et vous pouvez le finir et le peigner √† l'infini. </p><br><p>  La base est le Auchanbike tu√© sur des roues de 24 "(il y aura Kama / Desna / Salute), eh bien, ou les roues d'eux sur ce cadre. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/e39/25a/98a/e3925a98a5147272a38e191509451493.jpg" alt="Liens en plastique - ils r√®gnent!"></p><br><p>  Ruban √©lectrique bleu - NOTRE TOUT (bien s√ªr pas du tout pareil)! </p><br><p>  Il a scell√© les trous de ventilation, et il avait raison - la poussi√®re repose sur le moteur une couche d'un doigt d'√©paisseur! </p><br><p>  Le support moteur est en bois delta (contreplaqu√© bak√©lite) et un coin de construction en m√©tal. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0fb/12f/26c/0fb12f26c06ad66436e62c8fff87e8b6.jpg" alt="Rapide, bon march√© et joyeux"></p><br><p>  Conduisez - directement sur le pneu. </p><br><p>  Compte tenu de la vitesse sous une charge de 2400 tr / min, pour 20 km / h le diam√®tre du rouleau doit √™tre de ~ 40 mm (cartouche ordinaire de forage).  Mais - le village, l'amorce, √©tait limit√© √† vingt millim√®tres.  Oui, et dans cette version, m√™me au sol, la vitesse maintenue (~ 10km / h), on ne parle pas d'acc√©l√©ration. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/23c/af6/ab2/23caf6ab2debdf72172e12fafb987369.jpg" alt="C'est ce que signifie l'entra√Ænement direct, et non le v√¥tre, les roues motrices!"></p><br><p>  <strong>En g√©n√©ral, le parcours d'essai des dix premiers kilom√®tres a montr√© la PREMI√àRE n√©cessit√© d'augmenter la puissance du moteur au moins √† la puissance nominale.</strong> </p><br><p>  Je ne parle pas de l'efficacit√© de transfert vers le pneu - 70% au saut. </p><br><p>  Donc, le sch√©ma de connexion du contr√¥leur Digispark (que le lecteur me pardonne de dessiner au crayon sur papier). </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/b53/42a/7c5/b5342a7c59b1df1e44001498bebe2b90.jpg" alt="Je sais, visualisation - old school"></p><br><p><del>  Je peux imaginer ce qui se passe sur le chapeau de raisin </del>  Oui, oui, oui - je sais que je n'ai pas mis de r√©sistance de traction sur les boutons. <del>  Il y avait des d√©mons </del>  r√©sistances, mais elles s'autod√©truisent) </p><br><p>  Le fait est que, comme il s'est av√©r√©, toutes les entr√©es Digispark n'acceptent pas un z√©ro logique, les autres se rapportent √©galement √† une unit√© logique. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/524/e3f/448/524e3f448d2ac1ef39bd89eeb1ec9a33.jpg" alt="Tout n'est pas comme ils peignent"></p><br><p>  Sch√©matiquement, tout est simple - broches d'E / S num√©riques - n'importe lequel, un 0 logique au 5 r√©initialise le contr√¥leur.  La r√©alit√© s'est av√©r√©e beaucoup plus confuse - j'ai d√ª la ramasser en tapant - √† la fin j'ai mordu les r√©sistances de pull-up, connect√©es pour le faire fonctionner. </p><br><p>  Pour mettre en place l'appareil, j'ai sci√© un morceau de la planche √† pain 10x18 trous (3x5cm). </p><br><p>  Encore besoin de deux boutons pour trois modes: </p><br><ol><li>  Le bouton 1 est enfonc√© - mode correspondant √† 12V - 100% - conduire jusqu'√† ce que les piles soient faibles. </li><li>  Le bouton 2 - 15V - 156% est enfonc√© - en principe, une telle tension est dans le r√©seau de bord de la voiture, mais il est pr√©f√©rable de ne pas l'utiliser pendant plus de 15 minutes. </li><li>  Deux boutons √† la fois - FORCER!  256% - pour branler d'un feu de circulation / d'un chien en col√®re, en mont√©e, en moins de temps - mieux (sinon les enroulements br√ªl√©s sont garantis). </li></ol><br><p>  Ce dernier n'a pas encore √©t√© impl√©ment√© - j'ai peur des brosses et enroulements de collecteur - ils obtiennent m√™me une surintensit√© en mode 1. </p><br><p>  Le reste est constitu√© de r√©sistances - 2pcs - 10K (portance z√©ro sur les portes des transistors). <br>  3K et 330R - diviseur de tension vers l'entr√©e analogique P2 (en cas de chute √† 18v - la charge est coup√©e). <br>  2x100R - transistors de contr√¥le de limitation de courant avec sortie PWM P0. </p><br><p>  Et enfin, le 330R sur Vin est le limiteur de courant du r√©gulateur de tension Digispark (pour ne pas br√ªler le r√©gulateur de tension). </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/924/b7b/bb8/924b7bbb88168724827b2294e62ac7c4.jpg" alt="Donc √ßa ressemble √† la vie"></p><br><p>  En g√©n√©ral, dans le mat√©riel, tout ressemblait √† ceci: j'ai mont√© des transistors de puissance sur un radiateur √† partir d'un processeur 70x60x40mm. </p><br><p>  Le drain de l'IRLZ44 est connect√© √† la plaque du dissipateur de chaleur, afin de supprimer la n√©cessit√© d'isoler les jambes √† proximit√©, le moteur a √©t√© connect√© ici (fil marron). </p><br><p>  Quelques mots sur les transistors - champ, 5√®me g√©n√©ration, avec une diode inverse interne (il est important de connecter une charge inductive, telle que: moteur). </p><br><p>  Le courant maximum est de 47 A, la tension est de 55 V, Rds (√† 5 V √† la grille et le courant de 25 A) est de 0,025 ohm. </p><br><p>  Vous pouvez choisir n'importe quel autre champ puissant avec une faible r√©sistance de transition. </p><br><p>  De plus, afin de ne pas utiliser le pilote de contr√¥le, il DOIT √™tre avec un contr√¥le de niveau logique (L dans le nom). </p><br><p>  Pourquoi y en a-t-il deux?  Les caract√©ristiques nominales de la m√™me r√©sistance sont indiqu√©es pour 25 degr√©s Celsius et les courants √† 20-25A, avec un chauffage et un courant plus important, ce sera pire. </p><br><p>  Et oui, 1 logique n'est pas toujours exactement 5 volts, le transistor 4V lui-m√™me n'est pas ouvert sur la grille, Rds est d√©j√† 0,035 Ohm √† un courant de 21A. </p><br><p>  L'alimentation doit √™tre au moins double - et √† travers le moteur, prenant jusqu'√† 14 amp√®res √† 12 volts, 28A peuvent passer √† travers 24V! </p><br><p>  Et en plus, j‚Äôen ai environ une douzaine en stock - il vaut mieux en mettre un couple tout de suite que de le souder un √† la fois. </p><br><p>  J'ai compl√®tement oubli√©, Digispark est branch√© sur mes connecteurs (PBS PBD). </p><br><p>  <strong>Maintenant un croquis:</strong> </p><br><pre><code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/  Digispark (Attiny85) /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ -    byte voltage1=0; byte pwm0=0; void setup() { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  MOSFET pinMode(0, OUTPUT); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/       pinMode(2, INPUT); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      pinMode(1, INPUT); pinMode(3, INPUT); } void loop() { analogWrite(0,0); delay(1); voltage1 = analogRead(1)*62/</span></span><span class="hljs-number"><span class="hljs-number">1023</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    -    <span class="hljs-number"><span class="hljs-number">18</span></span> -    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( voltage1&lt;<span class="hljs-number"><span class="hljs-number">18</span></span> ) { goto lowvoltage1; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( digitalRead(<span class="hljs-number"><span class="hljs-number">3</span></span>) ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( digitalRead(<span class="hljs-number"><span class="hljs-number">1</span></span>) ) { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>       -   <span class="hljs-number"><span class="hljs-number">12</span></span> pwm<span class="hljs-number"><span class="hljs-number">0</span></span>=(<span class="hljs-number"><span class="hljs-number">12</span></span>^<span class="hljs-number"><span class="hljs-number">2</span></span>/voltage1^<span class="hljs-number"><span class="hljs-number">2</span></span>)*<span class="hljs-number"><span class="hljs-number">255</span></span>; analogWrite(<span class="hljs-number"><span class="hljs-number">0</span></span>,pwm<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">100</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>       -   <span class="hljs-number"><span class="hljs-number">15</span></span> pwm<span class="hljs-number"><span class="hljs-number">0</span></span>=(<span class="hljs-number"><span class="hljs-number">15</span></span>^<span class="hljs-number"><span class="hljs-number">2</span></span>/voltage1^<span class="hljs-number"><span class="hljs-number">2</span></span>)*<span class="hljs-number"><span class="hljs-number">255</span></span>; analogWrite(<span class="hljs-number"><span class="hljs-number">0</span></span>,pwm<span class="hljs-number"><span class="hljs-number">0</span></span>); delay(<span class="hljs-number"><span class="hljs-number">100</span></span>); } <span class="hljs-symbol"><span class="hljs-symbol">lowvoltage1:</span></span> ; }</code> </pre> <br><p>  <strong>Que peut-on changer dans le circuit et les composants?</strong> </p><br><ol><li><p>  Moteur - initialement destin√© √† utiliser le ME-272 (VAZ), mais le cor√©en √©tait plus abordable, si vous d√©montez le moteur, vous pouvez √©conomiser sur les batteries suppl√©mentaires. </p><br></li><li><p>  Les batteries - en termes de rapport prix-capacit√© (en amp√®res-heures) 12 volts √† 7A-h - sont optimales, 2 batteries √† 10A-h co√ªteront quatre CINQ sept!  Si vous devez augmenter le kilom√©trage - connectez-les en paires en parall√®le!  Et oui - pas de gel - seulement AGM! </p><br></li></ol><br><p>  <strong>Impressions</strong> </p><br><p>  Un essai du premier kilom√®tre dans un mode plus puissant a montr√© l'absence de surchauffe du moteur (jusqu'√† 40 degr√©s Celsius) et d'un radiateur √† transistor l√©g√®rement chaud - cela signifie que le circuit fonctionne correctement. </p><br><p>  Au repos - la consommation - 30mA - est du pur Digispark, il n'y a aucune fuite √† travers le MOSFET. </p><br><p>  Des pneus slicks sont n√©cessaires pour le type d'entra√Ænement s√©lectionn√©. </p><br><p>  Mais m√™me dans de tels cas, le moteur tire beaucoup plus de plaisir que directement des batteries parall√®les - le long de la section d'asphalte, m√™me avec une "brise". </p><br><p>  En g√©n√©ral, l'id√©e du contr√¥le PWM d'un moteur 12 volts √† partir d'une source 24V a fait ses preuves! </p><br><p>  <em>Andrey √©tait avec vous, jusqu'√† ce que nous nous revoyions sur Habr√©!</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr415497/">https://habr.com/ru/post/fr415497/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr415483/index.html">7 erreurs courantes lors de la comparaison de vos serveurs avec le cloud</a></li>
<li><a href="../fr415485/index.html">Drive Kingston A1000 - une ambulance pour l'ordinateur portable?</a></li>
<li><a href="../fr415487/index.html">Pages de l'histoire d'Intel. Premi√®re puce, Intel 3101</a></li>
<li><a href="../fr415489/index.html">Facebook cl√¥ture un projet de distribution d'Internet au moyen de drones sur l'√©nergie solaire</a></li>
<li><a href="../fr415493/index.html">Un nouveau calcul par la formule de Drake a montr√©: l'humanit√© est seule dans sa galaxie avec une probabilit√© de 53‚Äì99,6%</a></li>
<li><a href="../fr415499/index.html">Comment arr√™ter d'avoir peur du progr√®s et commencer √† vivre</a></li>
<li><a href="../fr415503/index.html">Interface utilisateur NetScaler SD-WAN</a></li>
<li><a href="../fr415505/index.html">Fonctionnement de JS: stockage</a></li>
<li><a href="../fr415509/index.html">Deep learning en programmation: quoi, pourquoi et comment</a></li>
<li><a href="../fr415527/index.html">Conf√©rence DUMP 2018: vid√©o de tous les rapports et pr√©sentations</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>