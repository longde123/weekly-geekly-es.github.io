<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìì üçº üßòüèª NB-IoT: como funciona? Parte 2 üó®Ô∏è üôåüèª ‚ÜòÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na √∫ltima vez, falamos sobre os recursos do novo padr√£o NB-IoT em termos de arquitetura da rede de acesso por r√°dio. Hoje discutiremos o que mudou na ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>NB-IoT: como funciona? Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ru_mts/blog/431648/">  <b>Na √∫ltima vez, falamos sobre os recursos do novo padr√£o NB-IoT em termos de arquitetura da rede de acesso por r√°dio.</b>  <b>Hoje discutiremos o que mudou na rede principal (Rede Principal) com o NB-IoT.</b>  <b>Ent√£o vamos l√°.</b> <b><br></b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8bd/02e/574/8bd02e574b24c9955dc693bb5a5f3642.jpg" alt="imagem"><br><br>  Mudan√ßas significativas ocorreram no n√∫cleo da rede.  Para come√ßar, apareceu um novo elemento, bem como v√°rios mecanismos definidos pelo padr√£o como "Otimiza√ß√£o do CIoT EPS" ou otimiza√ß√£o da rede principal para a Internet celular das coisas. <br><br>  Como voc√™ sabe, nas redes m√≥veis, existem dois canais de comunica√ß√£o principais chamados Control Plane (CP) e User Plane (UP).  O Control Plane foi projetado para a troca de mensagens de servi√ßo entre v√°rios elementos da rede e serve para fornecer dispositivos de mobilidade (Gerenciamento de mobilidade) (UE) e estabelecer / manter uma sess√£o de transfer√™ncia de dados (Gerenciamento de sess√£o).  O User Plane √©, de fato, um canal para transmitir tr√°fego de usu√°rios.  No LTE cl√°ssico, a distribui√ß√£o de CP e UP nas interfaces √© a seguinte: <a name="habracut"></a><br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6a/f57/257/e6af5725701496cca134e7fde45de5d5.png" alt="imagem"><br><br>  Os mecanismos de otimiza√ß√£o de CP e UP para NB-IoT s√£o implementados nos n√≥s MME, SGW e PGW, que s√£o combinados condicionalmente em um √∫nico elemento chamado C-SGN (N√≥ de gateway de servidor de IoT celular).  Al√©m disso, o padr√£o pressup√µe o surgimento de um novo elemento de rede - SCEF (Service Capability Exposure Function).  A interface entre o MME e o SCEF √© chamada T6a e √© implementada com base no protocolo DIAMETER.  Apesar do DIAMETER ser um protocolo de sinaliza√ß√£o, o NB-IoT √© adaptado para a transfer√™ncia de pequenas quantidades de dados n√£o IP. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d9/a36/d53/7d9a36d53e5fa359b1e7d02da98a0cfc.png" alt="imagem"><br><br>  Com base no nome, o SCEF √© um site para expor recursos de servi√ßo.  Em outras palavras, o SCEF oculta a complexidade da rede da operadora e tamb√©m elimina a necessidade de identifica√ß√£o e autentica√ß√£o de dispositivos m√≥veis (UE) dos desenvolvedores de aplicativos, permitindo que os servidores de aplicativos (Application Server, AS a seguir) recebam dados e gerenciem dispositivos por meio de uma √∫nica API. <br><br>  O identificador do UE n√£o √© um n√∫mero de telefone (MSISDN) ou endere√ßo IP, como era na rede 2G / 3G / LTE cl√°ssica, mas o chamado "ID externo", definido pelo padr√£o no formato &lt;Identificador Local&gt; @ &lt;Dom√≠nio familiar aos desenvolvedores de aplicativos Identificador&gt; ".  Este √© um grande t√≥pico separado, que merece material separado; portanto, n√£o falaremos sobre isso em detalhes agora. <br><br>  Agora vamos lidar com as inova√ß√µes mais significativas.  ‚ÄúCIoT EPS Optimization‚Äù √© uma otimiza√ß√£o de mecanismos de transfer√™ncia de tr√°fego e gerenciamento de sess√µes de assinantes.  Aqui est√£o os principais: <br><br><ul><li>  DoNAS </li><li>  Nidd </li><li>  Mecanismos de economia de energia PSM e eDRX </li><li>  Hlcom </li></ul><br>  <b>DoNAS (dados sobre NAS):</b> <br><br>  Este √© um mecanismo projetado para otimizar a transfer√™ncia de pequenas quantidades de dados. <br><br>  No LTE cl√°ssico, uma unidade de assinante, ao se registrar na rede, estabelece uma conex√£o PDN (doravante PDN) via eNodeB para MME-SGW-PGW.  A conex√£o UE-eNodeB-MME √© o chamado "Portador de R√°dio de Sinaliza√ß√£o" (SRB).  Se for necess√°rio transmitir / receber dados, o UE estabelece outra conex√£o com o eNodeB - "Data Radio Bearer" (DRB), para transmitir o tr√°fego do usu√°rio para a SGW e depois para a PGW (interfaces S1-U e S5, respectivamente).  No final da troca e na aus√™ncia de tr√°fego por algum tempo (geralmente de 5 a 20 segundos), essas conex√µes s√£o desconectadas e o dispositivo entra no modo de espera ou "Modo inativo".  Se necess√°rio, a troca de um novo dado SRB e DRB √© reinstalada. <br><br>  No NB-IoT, o tr√°fego do usu√°rio pode ser transmitido atrav√©s de um canal de sinaliza√ß√£o (SRB) nas mensagens do protocolo NAS ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http://www.3gpp.org/more/96-nas</a> ).  A instala√ß√£o do DRB n√£o √© mais necess√°ria.  Isso reduz significativamente a carga do sinal, economiza recursos de r√°dio da rede e, mais importante, aumenta a vida √∫til da bateria do dispositivo. <br><br>  Na se√ß√£o eNodeB - MME, os dados do usu√°rio come√ßam a ser transmitidos pela interface S1-MME, o que n√£o era o caso da tecnologia LTE cl√°ssica, e o protocolo NAS √© usado para isso, no qual o "cont√™iner de dados do usu√°rio" aparece. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b38/3ca/091/b383ca091aff5634b77f798c124ea537.png" alt="imagem"><br><br>  Para transferir o "User Plane" do MME para o SGW, uma nova interface S11-U √© exibida, projetada para transferir pequenos volumes de dados de usu√°rios de mel√£o.  O protocolo S11-U √© baseado no GTP-U v1, usado para transmitir o User Plane em outras interfaces da rede de arquitetura 3GPP. <br><img src="https://habrastorage.org/getpro/habr/post_images/291/414/312/2914143120918a42d83230b40eb7f4e1.png" alt="imagem"><br>  <b>NIDD (entrega de dados n√£o IP):</b> <br><br>  Como parte da otimiza√ß√£o adicional dos mecanismos de transfer√™ncia de pequenas quantidades de dados, al√©m dos tipos de PDNs existentes, como IPv4, IPv6 e IPv4v6, outro tipo apareceu - n√£o IP.  Neste caso, o UE n√£o recebe um endere√ßo IP e os dados s√£o transmitidos sem o uso do protocolo IP.  Existem v√°rias raz√µes para isso: <br><br><ol><li>  Os dispositivos de IoT, como sensores, podem transmitir quantidades muito pequenas de dados, 20 bytes ou at√© menos.  Dado que o tamanho m√≠nimo de um cabe√ßalho IP √© de 20 bytes, o encapsulamento no IP √†s vezes pode ser bastante caro; </li><li>  N√£o h√° necessidade de implementar uma pilha IP no chip, o que leva √† sua redu√ß√£o de custos (quest√£o para discuss√£o nos coment√°rios). </li></ol><br>  Em geral, os dispositivos IoT precisam de um endere√ßo IP para transmitir dados pela Internet.  No conceito de NB-IoT, o SCEF atua como um √∫nico ponto de conex√£o para o AS, e a troca de dados entre dispositivos e servidores de aplicativos ocorre atrav√©s da API.  Na aus√™ncia de dados n√£o IP do SCEF, o AS pode ser transmitido atrav√©s do t√∫nel ponto a ponto (PtP) do PGW e o encapsulamento no IP j√° ser√° realizado nele. <br><br>  Tudo isso se encaixa no paradigma NB-IoT - a m√°xima simplifica√ß√£o e baixo custo dos dispositivos. <br><br>  <b>Mecanismos de economia de energia PSM e eDRX:</b> <br><br>  Um dos principais benef√≠cios das redes LPWAN √© a efici√™ncia energ√©tica.  Declara at√© 10 anos de dura√ß√£o da bateria em uma √∫nica bateria.  Vamos ver como esses valores s√£o alcan√ßados. <br><br>  Quando um dispositivo consome menos energia?  Corrija quando estiver desligado.  E se for imposs√≠vel desenergizar completamente o dispositivo, desenergize o m√≥dulo de r√°dio, enquanto ele n√£o for necess√°rio.  Somente primeiro voc√™ precisa coordenar isso com a rede. <br><br>  <b>PSM (modo de economia de energia):</b> <br><br>  O modo de economia de energia PSM permite que o dispositivo desligue o m√≥dulo de r√°dio por um longo tempo, enquanto permanece registrado na rede, e n√£o reinstale o PDN toda vez que precisar transferir dados. <br><br>  Para que a rede saiba que o dispositivo ainda est√° dispon√≠vel, inicia periodicamente o procedimento de atualiza√ß√£o - Atualiza√ß√£o da √Årea de Rastreamento (TAU).  A frequ√™ncia deste procedimento √© definida pela rede usando o timer T3412, cujo valor √© transmitido ao dispositivo durante o procedimento de conex√£o ou a pr√≥xima TAU.  No LTE cl√°ssico, o valor padr√£o desse timer √© 54 minutos e o m√°ximo √© 186 minutos.  No entanto, para garantir alta efici√™ncia energ√©tica, a necessidade de ir ao ar a cada 186 minutos √© um prazer muito caro.  Para resolver esse problema, o mecanismo PSM foi desenvolvido. <br><br>  O dispositivo ativa o modo PSM transmitindo os valores dos dois temporizadores T3324 e T3412-Extended nas mensagens ‚ÄúAttach Request‚Äù ou ‚ÄúTracking Area Request‚Äù.  O primeiro determina o tempo que o dispositivo estar√° dispon√≠vel ap√≥s alternar para o "Modo ocioso".  O segundo √© o tempo ap√≥s o qual a TAU deve ser produzida, mas agora seu valor pode chegar a 35712000 segundos ou 413 dias.  Dependendo das configura√ß√µes, o MME pode aceitar os valores do timer recebidos do dispositivo ou alter√°-los enviando novos valores nas mensagens ‚ÄúAnexar Aceitar‚Äù ou ‚ÄúRastrear Atualiza√ß√£o da √Årea Aceitar‚Äù.  Agora, o dispositivo pode n√£o ligar o m√≥dulo de r√°dio por 413 dias e permanecer registrado na rede.  Como resultado, obtemos enormes economias em recursos de rede e efici√™ncia energ√©tica do dispositivo! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/454/acd/f5b/454acdf5be7596292b607513eeacaac7.png" alt="imagem"><br><br>  No entanto, nesse modo, o dispositivo n√£o est√° dispon√≠vel apenas para comunica√ß√µes recebidas.  Se necess√°rio, transfira algo para o lado do servidor de aplicativos, o dispositivo pode sair do PSM a qualquer momento e enviar os dados, ap√≥s o que permanece ativo para o timer T3324 receber mensagens de informa√ß√µes do AS (se houver). <br><br>  <b>eDRX (recep√ß√£o descont√≠nua prolongada):</b> <br><br>  eDRX, recep√ß√£o intermitente avan√ßada.  Para transferir dados para um dispositivo que est√° no "modo de espera", a rede executa um procedimento de notifica√ß√£o - "Pagina√ß√£o".  Ap√≥s o recebimento do dispositivo de pagina√ß√£o, inicia-se o estabelecimento do SRB para posterior comunica√ß√£o com a rede.  Mas, para n√£o perder a mensagem de Paging endere√ßada a ele, o dispositivo deve monitorar constantemente a transmiss√£o de r√°dio, que tamb√©m consome bastante energia. <br><br>  O eDRX √© um modo no qual o dispositivo recebe mensagens da rede n√£o constantemente, mas periodicamente.  Durante os procedimentos de conex√£o ou TAU, o dispositivo negocia com a rede os intervalos de tempo durante os quais ‚Äúescuta‚Äù o ar.  Por conseguinte, o procedimento de pagina√ß√£o ser√° realizado nos mesmos intervalos.  No modo eDRX, o dispositivo √© dividido em ciclos (ciclo eDRX).  No in√≠cio de cada ciclo est√° a chamada "Janela de tempo de pagina√ß√£o" (PTW) - este √© o tempo que o dispositivo escuta o canal de r√°dio.  No final do PTW, o dispositivo desliga o m√≥dulo de r√°dio at√© o final do ciclo. <br><img src="https://habrastorage.org/getpro/habr/post_images/6db/904/b06/6db904b06c01b940885b43683cc8c905.png" alt="imagem"><br>  <b>HLCOM (comunica√ß√£o de alta lat√™ncia):</b> <br><br>  Se for necess√°rio transferir dados para o Uplink, o dispositivo poder√° sair de qualquer um desses dois modos de economia de energia sem aguardar o final do ciclo PSM ou eDRX.  Mas aqui √© poss√≠vel transferir dados para o dispositivo apenas quando estiver ativo. <br><br>  A funcionalidade HLCOM ou comunica√ß√£o com alta lat√™ncia √© o buffer dos pacotes de Downlink no SGW enquanto o dispositivo est√° no modo de economia de energia e n√£o est√° acess√≠vel para comunica√ß√£o.  Pacotes em buffer ser√£o entregues assim que o dispositivo sair do PSM, criando um TAU ou transmitindo tr√°fego de uplink ou quando o PTW chegar. <br><br>  Obviamente, isso requer conscientiza√ß√£o por parte dos desenvolvedores de produtos de IoT, pois a comunica√ß√£o com o dispositivo n√£o √© obtida em tempo real e requer uma certa abordagem para projetar a l√≥gica de neg√≥cios para aplicativos. <br><br>  Concluindo, digamos: a introdu√ß√£o do novo √© sempre empolgante, e agora estamos lidando com um padr√£o que ainda n√£o foi totalmente testado pelos ‚Äúbis√µes‚Äù mundiais como Vodafone e Telefonica - portanto, √© duplamente empolgante.  Nossa apresenta√ß√£o do material n√£o reivindica integridade absoluta, mas esperamos que ele forne√ßa um entendimento suficiente da tecnologia.  O feedback seria apreciado. <br><br>  <i>Autor: Alexey Lapshin, especialista em solu√ß√µes convergentes e servi√ßos de multim√≠dia</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt431648/">https://habr.com/ru/post/pt431648/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt431636/index.html">Como comemorar o dia da seguran√ßa da informa√ß√£o</a></li>
<li><a href="../pt431638/index.html">Como entramos no departamento de seguran√ßa da informa√ß√£o de uma grande empresa e come√ßamos a trabalhar nele. Di√°rio de dois jovens e promissores especialistas</a></li>
<li><a href="../pt431642/index.html">Apicultores versus microcontroladores ou os benef√≠cios de erros</a></li>
<li><a href="../pt431644/index.html">Linha reta com TM. v4.0</a></li>
<li><a href="../pt431646/index.html">DataGrip 2018.3: Suporte ao Cassandra, gerando arquivos SQL a partir de objetos, muitas melhorias no preenchimento autom√°tico e muito mais</a></li>
<li><a href="../pt431650/index.html">Lat√™ncia de aprendizado: teoria das filas</a></li>
<li><a href="../pt431652/index.html">Algoritmo de amostragem de reservat√≥rio</a></li>
<li><a href="../pt431654/index.html">Tend√™ncias nas linguagens de programa√ß√£o 2019</a></li>
<li><a href="../pt431656/index.html">CraSSh: quebrando todos os navegadores modernos com c√°lculos de CSS</a></li>
<li><a href="../pt431660/index.html">Recursos do jogo usando o ECS: adicione kit de primeiros socorros ao atirador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>