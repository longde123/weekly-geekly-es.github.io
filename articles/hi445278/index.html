<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯдж ЁЯд╖ЁЯП╝ ЁЯТВ рдЕрдЧрд░ рдЖрдк рдХрднреА рдХрд▓рд╛рдХрд╛рд░ рдирд╣реАрдВ рд╣реИрдВ рддреЛ рдЧреЗрдо рдХреИрд╕реЗ рдмрдирд╛рдПрдВ ЁЯСиЁЯП╜тАНЁЯОУ ЁЯзЧЁЯП╗ ЁЯШг</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╣рд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рдЬреАрд╡рди рдореЗрдВ рдХреБрдЫ рдРрд╕реЗ рдкрд▓ рдЖрдП рдЬрдм рдЙрд╕рдиреЗ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдЦреЗрд▓ рдмрдирд╛рдиреЗ рдХрд╛ рд╕рдкрдирд╛ рджреЗрдЦрд╛ред рдХрдИ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдЗрди рд╕рдкрдиреЛрдВ рдХреЛ рдорд╣рд╕реВрд╕ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рдлрд▓рддрд╛рдкреВрд░реН...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЕрдЧрд░ рдЖрдк рдХрднреА рдХрд▓рд╛рдХрд╛рд░ рдирд╣реАрдВ рд╣реИрдВ рддреЛ рдЧреЗрдо рдХреИрд╕реЗ рдмрдирд╛рдПрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445278/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/96/hp/x0/96hpx0qpk4w0_hmjm3csu0lj92o.png"></div><br>  рд╣рд░ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рдЬреАрд╡рди рдореЗрдВ рдХреБрдЫ рдРрд╕реЗ рдкрд▓ рдЖрдП рдЬрдм рдЙрд╕рдиреЗ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдЦреЗрд▓ рдмрдирд╛рдиреЗ рдХрд╛ рд╕рдкрдирд╛ рджреЗрдЦрд╛ред  рдХрдИ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдЗрди рд╕рдкрдиреЛрдВ рдХреЛ рдорд╣рд╕реВрд╕ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ, рд▓реЗрдХрд┐рди рдпрд╣ рдЙрдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рд╣реИред  рдпрд╣ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИ рдЬреЛ рдЦреЗрд▓ рдЦреЗрд▓рдирд╛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ (рдЬреНрдЮрд╛рди рдФрд░ рдЕрдиреБрднрд╡ рдХреЗ рдмрд┐рдирд╛ рднреА) рдЙрдиреНрд╣реЗрдВ рдПрдХ рдмрд╛рд░ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА, рдЬреЛ рджреБрдирд┐рдпрд╛ рднрд░ рдореЗрдВ рдкреНрд░рд╕рд┐рджреНрдзрд┐ (рдФрд░ рднрд╛рд░реА рдореБрдирд╛рдлрд╛) рд╣рд╛рд╕рд┐рд▓ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдЕрдХреЗрд▓реЗ рдирд╛рдпрдХреЛрдВ рдХреЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рд╕реЗ рдкреНрд░реЗрд░рд┐рдд рд╣реИ, рд▓реЗрдХрд┐рди рдЧрд╣рд░рд╛рдИ рд╕реЗ рд╕рдордЭ рдореЗрдВ рдЖрдпрд╛ рдЧреБрд░реБ igrostroya рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛ рд╡рд╣ рдмрд░реНрджрд╛рд╢реНрдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред <br><br>  рдФрд░ рдирд╣реАрдВ ... <br><a name="habracut"></a><br><h2>  рдЫреЛрдЯрд╛ рд╕рд╛ рдкрд░рд┐рдЪрдп </h2><br>  рдореИрдВ рддреБрд░рдВрдд рдЖрд░рдХреНрд╖рдг рдХрд░реВрдВрдЧрд╛: рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рдкреИрд╕рд╛ рдХрдорд╛рдирд╛ рдирд╣реАрдВ рд╣реИ - рд╣реИрдмреЗ рдкрд░ рдЗрд╕ рд╡рд┐рд╖рдп рдкрд░ рдмрд╣реБрдд рд╕рд╛рд░реЗ рд▓реЗрдЦ рд╣реИрдВред  рдирд╣реАрдВ, рд╣рдо рдПрдХ рд╕рдкрдиреЗ рдХрд╛ рдЦреЗрд▓ рдмрдирд╛рдПрдВрдЧреЗред <br><br><div class="spoiler">  <b class="spoiler_title">рд╕рдкрдиреЛрдВ рдХреЗ рдЦреЗрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЧреЗрдп рд╡рд┐рд╖рдпрд╛рдВрддрд░</b> <div class="spoiler_text">  рдореИрдВрдиреЗ рдПрдХрд▓ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдФрд░ рдЫреЛрдЯреЗ рд╕реНрдЯреВрдбрд┐рдпреЛ рд╕реЗ рдЗрд╕ рд╢рдмреНрдж рдХреЛ рдХрд┐рддрдиреА рдмрд╛рд░ рд╕реБрдирд╛ рд╣реИред  рдЬрд╣рд╛рдБ рднреА рдЖрдк рджреЗрдЦрддреЗ рд╣реИрдВ, рд╕рднреА рдиреМрд╕рд┐рдЦрд┐рдпрд╛ рдЗрдЧреНрд░реЛрдбреЗрд▓реЛрд╡ рдЕрдкрдиреЗ рд╕рдкрдиреЛрдВ рдФрд░ "рд╕рд╣реА рджреГрд╖реНрдЯрд┐" рдХреЛ рджреБрдирд┐рдпрд╛ рдХреЗ рд╕рд╛рдордиреЗ рдкреНрд░рдХрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджреМрдбрд╝рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдЕрдкрдиреЗ рд╡реАрд░ рдкреНрд░рдпрд╛рд╕реЛрдВ, рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛, рдЕрдкрд░рд┐рд╣рд╛рд░реНрдп рд╡рд┐рддреНрддреАрдп рдХрдард┐рдирд╛рдЗрдпреЛрдВ, рдкреНрд░рдХрд╛рд╢рдХреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛рдУрдВ рдФрд░ рдЖрдо рддреМрд░ рдкрд░ "рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ-рдХреГрддрдШреНрди-рдХреБрддреНрддреЛрдВ- im- рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рдВрдмреЗ рд▓реЗрдЦ рд▓рд┐рдЦрддреЗ рд╣реИрдВред рджреЗ-рдЧреНрд░рд╛рдл-рдПрдВрдб-рд╕рд┐рдХреНрдХреЛрдВ рдПрдВрдб-рдСрд▓-рдлреНрд░реА-рдПрдВрдб-рдПрдВрдб-рдСрдлрд╝-рдбреВ-рдЯреВ-рдбреВ-рдП-рдЧреЗрдо-рдП-рдЧреЗрдо-рдкрд╛рдЗрд░реЗрдЯреНрд╕-рдПрдВрдб-рд╡реА-рд╣реИ-рд▓реЙ-рдкреНрд░реЙрдлрд┐рдЯ-рдСрдлрд╝-рд╣рд┐рдпрд░-рдСрдлрд╝-рд╣рд┐рдпрд░-рдСрдлрд╝-рд╣рд┐рдпрд░ред " <br><br>  рд▓реЛрдЧ, рдореВрд░реНрдЦ рдордд рдмрдиреЛред  рдЖрдк рдПрдХ рд╕рдкрдиреЗ рдХрд╛ рдЦреЗрд▓ рдирд╣реАрдВ рдмрдирд╛ рд░рд╣реЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдПрдХ рдЦреЗрд▓ рдЬреЛ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдмреЗрдЪ рджреЗрдЧрд╛ - рдпреЗ рджреЛ рдЕрд▓рдЧ рдЪреАрдЬреЗрдВ рд╣реИрдВред  рдЦрд┐рд▓рд╛рдбрд╝реА (рдФрд░ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдкрд░рд┐рд╖реНрдХреГрдд) рдЖрдкрдХреЗ рд╕рдкрдиреЗ рдХреА рдкрд░рд╡рд╛рд╣ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╡реЗ рдЗрд╕рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред  рдпрджрд┐ рдЖрдк рд▓рд╛рдн рдЪрд╛рд╣рддреЗ рд╣реИрдВ - рдЕрдзреНрдпрдпрди рдХреЗ рд░реБрдЭрд╛рди, рджреЗрдЦреЗрдВ рдХрд┐ рдЕрдм рдХреНрдпрд╛ рд▓реЛрдХрдкреНрд░рд┐рдп рд╣реИ, рдХреБрдЫ рдЕрдиреЛрдЦрд╛ рдХрд░реЗрдВ, рдмреЗрд╣рддрд░ рдХрд░реЗрдВ, рджреВрд╕рд░реЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рдЕрд╕рд╛рдорд╛рдиреНрдп, рд▓реЗрдЦ рдкрдврд╝реЗрдВ (рдХрдИ рд╣реИрдВ), рдкреНрд░рдХрд╛рд╢рдХреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░реЗрдВ - рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ, рдЕрдВрдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд╕рдкрдиреЛрдВ рдХрд╛ рдПрд╣рд╕рд╛рд╕ рдХрд░реЗрдВ, рдЖрдкрдХрд╛ рдирд╣реАрдВред <br><br>  рдпрджрд┐ рдЖрдк рдЕрднреА рддрдХ рднрд╛рдЧ рдирд╣реАрдВ рдЧрдП рд╣реИрдВ рдФрд░ рдЕрднреА рднреА рдЕрдкрдиреЗ рд╕рдкрдиреЗ рдХреЗ рдЦреЗрд▓ рдХреЛ рдорд╣рд╕реВрд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдкрд╣рд▓реЗ рд╕реЗ рд▓рд╛рдн рдЫреЛрдбрд╝ рджреЗрдВред  рдЕрдкрдиреЗ рд╕рдкрдиреЗ рдХреЛ рдмрд┐рд▓реНрдХреБрд▓ рднреА рди рдмреЗрдЪреЗрдВ - рдореБрдлреНрдд рдореЗрдВ рдмрд╛рдВрдЯреЗрдВред  рд▓реЛрдЧреЛрдВ рдХреЛ рдЕрдкрдирд╛ рд╕рдкрдирд╛ рджреЗрдВ, рдЙрдиреНрд╣реЗрдВ рдЗрд╕рдХреЗ рд▓рд┐рдП рд▓рд╛рдПрдВ, рдФрд░ рдЕрдЧрд░ рдЖрдкрдХрд╛ рд╕рдкрдирд╛ рдХреБрдЫ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реИ, рддреЛ рдЖрдк рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВрдЧреЗ, рдпрджрд┐ рдкреИрд╕рд╛ рдирд╣реАрдВ, рд▓реЗрдХрд┐рди рдкреНрдпрд╛рд░ рдФрд░ рдорд╛рдиреНрдпрддрд╛ред  рдпрд╣ рдХрднреА-рдХрднреА рдмрд╣реБрдд рдЕрдзрд┐рдХ рдореВрд▓реНрдпрд╡рд╛рди рд╣реЛрддрд╛ рд╣реИред <br></div></div><br>  рдмрд╣реБрдд рд╕реЗ рд▓реЛрдЧ рд╕реЛрдЪрддреЗ рд╣реИрдВ рдХрд┐ рдЦреЗрд▓ рд╕рдордп рдФрд░ рдКрд░реНрдЬрд╛ рдХреА рдмрд░реНрдмрд╛рджреА рд╣реИ, рдФрд░ рдЧрдВрднреАрд░ рд▓реЛрдЧреЛрдВ рдХреЛ рдЗрд╕ рд╡рд┐рд╖рдп рдкрд░ рдмрд╛рдд рдирд╣реАрдВ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдПред  рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдПрдХрддреНрд░ рд╣реБрдП рд▓реЛрдЧ рдЧрдВрднреАрд░ рдирд╣реАрдВ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдХреЗрд╡рд▓ рднрд╛рдЧ рдореЗрдВ рд╕рд╣рдордд рд╣реИрдВ - рдпрджрд┐ рдЖрдк рдЙрдиреНрд╣реЗрдВ рдЦреЗрд▓рддреЗ рд╣реИрдВ рддреЛ рдЦреЗрд▓ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдмрд╣реБрдд рд╕рдордп рд▓реЗрддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЦреЗрд▓реЛрдВ рдХрд╛ рд╡рд┐рдХрд╛рд╕, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЗрд╕рдореЗрдВ рдХрдИ рдЧреБрдирд╛ рдЕрдзрд┐рдХ рд╕рдордп рд▓рдЧрддрд╛ рд╣реИ, рдмрд╣реБрдд рд╕рд╛рд░реЗ рд▓рд╛рдн рд▓рд╛ рд╕рдХрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣ рдЖрдкрдХреЛ рдЙрди рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ, рджреГрд╖реНрдЯрд┐рдХреЛрдгреЛрдВ рдФрд░ рдПрд▓реНрдЧреЛрд░рд┐рджрдо рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реЛрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдЬреЛ рдЧреИрд░-рдЧреЗрдорд┐рдВрдЧ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рдирд╣реАрдВ рдкрд╛рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдпрд╛ рдЦреБрдж рдХреЗ рдФрдЬрд╛рд░реЛрдВ рдХреЗ рдХреМрд╢рд▓ рдХреЛ рдЧрд╣рд░рд╛ рдХрд░реЗрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛), рдХреБрдЫ рдЕрд╕рд╛рдорд╛рдиреНрдп рдФрд░ рд░реЛрдорд╛рдВрдЪрдХ рдХрд╛рдо рдХрд░рдирд╛ред  рдЕрдкрдиреЗ рджрдо рдкрд░ рдореИрдВ рдЬреЛрдбрд╝ рд╕рдХрддрд╛ рд╣реВрдВ (рдФрд░ рдмрд╣реБрдд рд╕реЗ рд╕рд╣рдордд рд╣реЛрдВрдЧреЗ) рдХрд┐ рдЦреЗрд▓ рд╡рд┐рдХрд╛рд╕ (рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрд╕рдлрд▓) рд╣рдореЗрд╢рд╛ рдПрдХ рд╡рд┐рд╢реЗрд╖, рдЕрддреБрд▓рдиреАрдп рдЕрдиреБрднрд╡ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдЖрдк рдлрд┐рд░ рд╕реЗ рд╡рд┐рд░рдХреНрддрд┐ рдФрд░ рдкреНрд░реЗрдо рдХреЗ рд╕рд╛рде рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕реЗ рдореИрдВ рдЕрдкрдиреЗ рдЬреАрд╡рди рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдПрдХ рдмрд╛рд░ рд╣рд░ рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд▓рд┐рдП рдЕрдиреБрднрд╡ рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред <br><br>  рд╣рдо рдирдП-рдкреНрд░рдХрд╛рд░ рдХреЗ рдЧреЗрдо рдЗрдВрдЬрди, рдлреНрд░реЗрдорд╡рд░реНрдХ, рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ - рд╣рдо рдЧреЗрдордкреНрд▓реЗ рдХреЗ рдмрд╣реБрдд рд╕рд╛рд░ рдХреЛ рджреЗрдЦреЗрдВрдЧреЗ рдФрд░ рдЗрд╕реЗ рдЕрдВрджрд░ рд╕реЗ рдорд╣рд╕реВрд╕ рдХрд░реЗрдВрдЧреЗред  рд╣рдо рд▓рдЪреАрд▓реА рд╡рд┐рдХрд╛рд╕ рдкрджреНрдзрддрд┐рдпреЛрдВ рдХреЛ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ (рдХреЗрд╡рд▓ рдПрдХ рд╡реНрдпрдХреНрддрд┐ рдХреЗ рдХрд╛рдо рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╕реЗ рдХрд╛рд░реНрдп рд╕рд░рд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ)ред  рд╣рдо рдзреНрд╡рдирд┐ рдореЗрдВ рдбрд┐рдЬрд╛рдЗрдирд░реЛрдВ, рдХрд▓рд╛рдХрд╛рд░реЛрдВ, рд╕рдВрдЧреАрддрдХрд╛рд░реЛрдВ рдФрд░ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮреЛрдВ рдХреЗ рд▓рд┐рдП рдЦреЛрдЬ рдХрд░рдиреЗ рдореЗрдВ рд╕рдордп рдФрд░ рдКрд░реНрдЬрд╛ рдЦрд░реНрдЪ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ - рд╣рдо рд╕рдм рдХреБрдЫ рдЦреБрдж рдХрд░реЗрдВрдЧреЗ рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рд▓реЗрдХрд┐рди рд╕рд╛рде рд╣реА рд╣рдо рд╕рдм рдХреБрдЫ рдмреБрджреНрдзрд┐рдорд╛рдиреА рд╕реЗ рдХрд░реЗрдВрдЧреЗ - рдЕрдЧрд░ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЕрдЪрд╛рдирдХ рдПрдХ рдХрд▓рд╛рдХрд╛рд░ рд╣реИ, рддреЛ рд╣рдо рдлреИрд╢рдиреЗрдмрд▓ рдХреЛ рдЬрдХрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдкреНрд░рдпрд╛рд╕ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред рддреИрдпрд╛рд░ рдлреНрд░реЗрдо рдкрд░ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕)ред  рдЕрдВрдд рдореЗрдВ, рд╣рдордиреЗ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЯреВрд▓ рдХрд╛ рдЕрдзреНрдпрдпрди рднреА рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИ рдФрд░ рд╕рд╣реА рдХреЛ рдЪреБрдирд╛ рд╣реИ - рд╣рдо рдЗрд╕реЗ рдЙрд╕реА рдкрд░ рдХрд░реЗрдВрдЧреЗ рдЬрд┐рд╕реЗ рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЬрд╛рдирддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЬрд╛рд╡рд╛ рдореЗрдВ, рддрд╛рдХрд┐ рдмрд╛рдж рдореЗрдВ, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдЗрд╕реЗ рдПрдВрдбреНрд░реЙрдЗрдб (рдпрд╛ рдПрдХ рдХреЙрдлреА рдирд┐рд░реНрдорд╛рддрд╛) рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВред <br><br>  <i>тАЬрдЖрд╣ !!!</i>  <i>рдЖрддрдВрдХ!</i>  <i>рдПрдХ рдмреБрд░рд╛ рд╕рдкрдирд╛!</i>  <i>рдРрд╕реЗ рдмрдХрд╡рд╛рд╕ рдкрд░ рдЖрдк рдХреИрд╕реЗ рд╕рдордп рдмрд┐рддрд╛ рд╕рдХрддреЗ рд╣реИрдВ!</i>  <i>рдпрд╣рд╛рдБ рд╕реЗ рдЪрд▓реЗ рдЬрд╛рдУ, рдореИрдВ рдХреБрдЫ рдФрд░ рджрд┐рд▓рдЪрд╕реНрдк рдкрдврд╝рдиреЗ рдЬрд╛рдКрдБрдЧрд╛! "</i> <br><br>  рдРрд╕рд╛ рдХреНрдпреЛрдВ?  рдореЗрд░рд╛ рдорддрд▓рдм рд╣реИ, рдкрд╣рд┐рдпрд╛ рдХреЛ рд╕реБрджреГрдврд╝ рдХрд░реЗрдВ?  рд░реЗрдбреАрдореЗрдб рдЧреЗрдо рдЗрдВрдЬрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ?  рдЗрд╕рдХрд╛ рдЙрддреНрддрд░ рд╕рд░рд▓ рд╣реИ: рд╣рдо рдЙрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдо рдЕрдм рдЦреЗрд▓ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдФрд╕рдд рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреА рдорд╛рдирд╕рд┐рдХрддрд╛ рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ: тАЬрдореИрдВ рдПрдХ рдЦреЗрд▓ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдБ!  рдорд╛рдВрд╕, рдФрд░ рд╡рд┐рд╕реНрдлреЛрдЯ, рдФрд░ рдкрдВрдкрд┐рдВрдЧ рд╣реЛрдВрдЧреЗ, <s>рдФрд░ рдЖрдк рдПрдХ рдХреЛрд░реЛрд╡рди рд▓реВрдЯ рд╕рдХрддреЗ рд╣реИрдВ</s> , рдФрд░ рд╕рд╛рдЬрд┐рд╢ рдмрдордмрд╛рд░реА рдХрд░ рд░рд╣реА рд╣реИ, рдФрд░ рдпрд╣ рдХрд╣реАрдВ рдФрд░ рдХрднреА рдирд╣реАрдВ рд╣реБрдЖ рд╣реИ!  рдореИрдВ рдЕрднреА рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд░реВрдБрдЧрд╛! .. рдФрд░ рдХрд┐рд╕ рдкрд░?  рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рдЕрдм рд╣рдорд╛рд░реЗ рд╕рд╛рде рдХреНрдпрд╛ рд▓реЛрдХрдкреНрд░рд┐рдп рд╣реИ ... рд╣рд╛рдБ, рдПрдХреНрд╕, рд╡рд╛рдИ рдФрд░ рдЬреЗрдбред рдЪрд▓реЛ рдЬреЗрдб рд▓реЗрддреЗ рд╣реИрдВ, рдЕрдм рд╣рд░ рдХреЛрдИ рдЗрд╕ рдкрд░ рд▓рд┐рдЦрддрд╛ рд╣реИ ... "ред  рдФрд░ рдЗрдВрдЬрди рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддрд╛ рд╣реИред  рдФрд░ рд╡рд╣ рд╡рд┐рдЪрд╛рд░ рдлреЗрдВрдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкрд░реНрдпрд╛рдкреНрдд рд╕рдордп рдирд╣реАрдВ рд╣реИред  рдлрд┐рдиред  рдпрд╛, рдареАрдХ рд╣реИ, рдпрд╣ рд╣рд╛рд░ рдирд╣реАрдВ рдорд╛рдирддрд╛, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрдВрдЬрди рдХреЛ рд╕реАрдЦреЗ рдмрд┐рдирд╛, рдпрд╣ рдЦреЗрд▓рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддрд╛ рд╣реИред  рдареАрдХ рд╣реИ, рдЕрдЧрд░ рддрдм рд╡рд╣ рдХрд┐рд╕реА рдХреЛ рдЕрдкрдирд╛ рдкрд╣рд▓рд╛ "рд╢рд┐рд▓реНрдк" рдирд╣реАрдВ рджрд┐рдЦрд╛рдиреЗ рдХрд╛ рд╡рд┐рд╡реЗрдХ рд░рдЦрддрд╛ рд╣реИред  рдЖрдорддреМрд░ рдкрд░ рдирд╣реАрдВ (рдХрд┐рд╕реА рднреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реНрдЯреЛрд░ рдкрд░ рдЬрд╛рдПрдВ, рдЕрдкрдиреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ) - рдареАрдХ рд╣реИ, рдареАрдХ рд╣реИ, рдореБрдЭреЗ рдореБрдирд╛рдлрд╛ рдЪрд╛рд╣рд┐рдП, рд╕рд╣рди рдХрд░рдиреЗ рдХреА рддрд╛рдХрдд рдирд╣реАрдВред  рдПрдХ рдмрд╛рд░ рдЦреЗрд▓реЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдореЗрдВ рдЙрддреНрд╕рд╛рд╣реА рд░рдЪрдирд╛рддреНрдордХ рд▓реЛрдЧреЛрдВ рдХреА рдмрд╣реБрдд рдХрдореА рдереАред  рдХрд╛рд╢, рдЗрд╕ рд╕рдордп рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкрд╛рд░рд┐рдд рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ - рдЕрдм рдЦреЗрд▓ рдореЗрдВ рдореБрдЦреНрдп рдЪреАрдЬ рдЖрддреНрдорд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╡реНрдпрд╡рд╕рд╛рдп рдореЙрдбрд▓ (рдХрдо рд╕реЗ рдХрдо рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ)ред  рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рд╕рд░рд▓ рд╣реИ: рд╣рдо рдЖрддреНрдорд╛ рдХреЗ рд╕рд╛рде рдЦреЗрд▓ рдмрдирд╛рдПрдВрдЧреЗред  рдЗрд╕рд▓рд┐рдП, рд╣рдо рдЙрдкрдХрд░рдг рд╕реЗ рд╕рд╛рд░ рдХрд░рддреЗ рд╣реИрдВ (рдХреЛрдИ рднреА рдХрд░реЗрдЧрд╛) рдФрд░ рдХрд╛рд░реНрдп рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рддреЛ, рдЪрд▓реЛ рдЬрд╛рд░реА рд░рдЦреЗрдВред <br>  рдореИрдВ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдХрдбрд╝рд╡реЗ рдЕрдиреБрднрд╡ рдХреЗ рд╡рд┐рд╡рд░рдг рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдКрдВрдЧрд╛, рд▓реЗрдХрд┐рди рдореИрдВ рдХрд╣реВрдВрдЧрд╛ рдХрд┐ рдЧреЗрдо рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рд▓рд┐рдП рдореБрдЦреНрдп рд╕рдорд╕реНрдпрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рд╣реИред  рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдЖрдорддреМрд░ рдкрд░ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рдирд╛ рдирд╣реАрдВ рдЬрд╛рдирддреЗ (рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЕрдкрд╡рд╛рдж рд╣реИрдВ), рдФрд░ рдХрд▓рд╛рдХрд╛рд░реЛрдВ рдХреЛ рдЖрдорддреМрд░ рдкрд░ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдХреИрд╕реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░рдирд╛ рд╣реИ (рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЕрдкрд╡рд╛рдж рд╣реИрдВ)ред  рдФрд░ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдХреЗ рдмрд┐рдирд╛, рдЖрдкрдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдПрдХ рджреБрд░реНрд▓рдн рдЧреЗрдо рдмрд╛рдИрдкрд╛рд╕ рд╣реИред  рдХреНрдпрд╛ рдХрд░реЗрдВ? <br><br>  рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ: <br><br><div class="spoiler">  <b class="spoiler_title">1. рдПрдХ рд╕рд░рд▓ рдЪрд┐рддреНрд░рдордп рд╕рдВрдкрд╛рджрдХ рдореЗрдВ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рд╕рдм рдХреБрдЫ рдбреНрд░рд╛ рдХрд░реЗрдВ</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/5b/no/-o/5bno-orbfc3-ov3esi3ld_ezdqs.png"></a> <br>  <i>рдЦреЗрд▓ рдХрд╛ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ "рдЙрд╕реЗ рдорд╛рд░ рдбрд╛рд▓реЛ", 2003</i> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">2. рдПрдХ рд╡реЗрдХреНрдЯрд░ рдореЗрдВ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рд╕рдм рдХреБрдЫ рдбреНрд░рд╛ рдХрд░реЗрдВ</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/46/dj/u8/46dju8rama3wvfx2fzopin-yfiw.png"></a> <br>  <i>рдЦреЗрд▓ "рд░реЗрд╡реЗрди", 2001 рдХреЗ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/jn/mm/vz/jnmmvzujgfsziasffz8m6sitmi0.png"></a> <br>  <i>рдЦреЗрд▓ рдХрд╛ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ "рдЗрдиреНрдлрд░реНрдиреЛ", 2002</i> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">3. рдПрдХ рдРрд╕реЗ рднрд╛рдИ рд╕реЗ рдкреВрдЫрд┐рдП рдЬреЛ рдпрд╣ рднреА рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдХрд┐ рдХреИрд╕реЗ рдЖрдХрд░реНрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдП (рд▓реЗрдХрд┐рди рдпрд╣ рдереЛрдбрд╝рд╛ рдмреЗрд╣рддрд░ рд╣реИ)</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/tf/tx/jc/tftxjcy5luf045ehrm5_kdb5fzy.png"></a> <br>  <i>рдЦреЗрд▓ рдХрд╛ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ "рдХрдордмрдЦреНрдд", 2004</i> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">4. 3D-рдореЙрдбрд▓рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рд╡рд╣рд╛рдВ рд╕реЗ рд╕рдВрдкрддреНрддрд┐ рдЦреАрдВрдЪреЗрдВ</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/k9/nj/o6/k9njo6wryhhmaiagpool44qt5ua.jpeg"></a> <br>  <i>рдЦреЗрд▓ рдХрд╛ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ "рдХрдордмрдЦреНрдд 2. рдбреЗрдореЛ", 2006</i> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">5. рд╣рддрд╛рд╢рд╛ рдореЗрдВ, рд╕рд┐рд░ рдкрд░ рдмрд╛рд▓ рдлрд╛рдбрд╝рдХрд░</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/3p/fw/01/3pfw013bspmxrjyyewsnsgqobma.png"></a> <br> <a href=""><img src="https://habrastorage.org/webt/oa/gx/go/oagxgo1wmfykrll-ji-qwyrsv7e.png"></a> <br>  <i>рдЦреЗрд▓ рдХрд╛ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ "рдХрдордмрдЦреНрдд", 2004</i> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">6. рдЫрджреНрдо рд╡рд┐рдЬреНрдЮрд╛рди (ASCII) рдореЗрдВ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рд╕рдм рдХреБрдЫ рдбреНрд░рд╛ рдХрд░реЗрдВ</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/db/ht/s5/dbhts5ryeccznntuaiiwjmx32fo.png"></a> <br>  <i>рдЦреЗрд▓ рдХрд╛ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ "рдлреАрдлрд╛", 2000</i> <br><br> <a href=""><img src="https://habrastorage.org/webt/q0/u-/vu/q0u-vuxozevapmdwswaygicakgg.png"></a> <br>  <i>рдЦреЗрд▓ "рд╕реВрдореЛ", 1998 рдХрд╛ тАЛтАЛрд╕реНрдХреНрд░реАрдирд╢реЙрдЯ</i> <br></div></div><br>  рд╣рдореЗрдВ рдмрд╛рдж рд╡рд╛рд▓реЗ рдкрд░ рднрд╛рдЧ рджреЗрдВ (рднрд╛рдЧ рдореЗрдВ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдмрд╛рдХреА рдХреА рддрд░рд╣ рдирд┐рд░рд╛рд╢рд╛рдЬрдирдХ рдирд╣реАрдВ рджрд┐рдЦрддрд╛ рд╣реИ)ред  рдХрдИ рдЕрдиреБрднрд╡рд╣реАрди рдЧреЗрдорд░реНрд╕ рдХрд╛ рдорд╛рдирдирд╛ тАЛтАЛрд╣реИ рдХрд┐ рд╢рд╛рдВрдд рдЖрдзреБрдирд┐рдХ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдХреЗ рдмрд┐рдирд╛ рдЧреЗрдо рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдХрд╛ рджрд┐рд▓ рдЬреАрддрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реИрдВ - рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЧреЗрдо рдХрд╛ рдирд╛рдо рднреА рдЙрдиреНрд╣реЗрдВ рдЧреЗрдо рдореЗрдВ рдирд╣реАрдВ рдмрджрд▓рддрд╛ рд╣реИред  <i>ADOM</i> , <i>NetHack</i> рдФрд░ <i>рдмреМрдиреЗ рдХрд┐рд▓реЗ</i> рдЬреИрд╕реА рдЙрддреНрдХреГрд╖реНрдЯ рдХреГрддрд┐рдпреЛрдВ рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЗрд╕ рддрд░рд╣ рдХреЗ рддрд░реНрдХреЛрдВ рдкрд░ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЖрдкрддреНрддрд┐ рдХрд░рддреЗ рд╣реИрдВред  рдЙрдкрд╕реНрдерд┐рддрд┐ рд╣рдореЗрд╢рд╛ рдирд┐рд░реНрдгрд╛рдпрдХ рдХрд╛рд░рдХ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, <abbr title="рд╕реВрдЪрдирд╛ рдХреЗ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХреЗ рд▓рд┐рдП рдЕрдореЗрд░рд┐рдХреА рдорд╛рдирдХ рдХреЛрдб">ASCII</abbr> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреБрдЫ рджрд┐рд▓рдЪрд╕реНрдк рдлрд╛рдпрджреЗ рджреЗрддрд╛ рд╣реИ: <br><br><ul><li>  рд╡рд┐рдХрд╛рд╕ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдЧреЗрдордкреНрд▓реЗ, рдЧреЗрдо рдореИрдХреЗрдирд┐рдХреНрд╕, рдкреНрд▓реЙрдЯ рдШрдЯрдХ рдФрд░ рдЕрдзрд┐рдХ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдмрд┐рдирд╛ рдорд╛рдореВрд▓реА рдЪреАрдЬреЛрдВ рд╕реЗ рд╡рд┐рдЪрд▓рд┐рдд рд╣реБрдП; </li><li>  рдПрдХ рдЧреНрд░рд╛рдлрд┐рдХ рдШрдЯрдХ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕рдордп рдирд╣реАрдВ рд▓рдЧрддрд╛ рд╣реИ - рдПрдХ рдХрд╛рдордХрд╛рдЬреА рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк (рдпрд╛рдиреА, рдПрдХ рдРрд╕рд╛ рд╕рдВрд╕реНрдХрд░рдг рдЬрд┐рд╕реЗ рдЖрдк рд╕рдордЭ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд╛рдпрдХ рд╣реИ) рдмрд╣реБрдд рдкрд╣рд▓реЗ рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рдПрдЧрд╛; </li><li>  рдлреНрд░реЗрдорд╡рд░реНрдХ рдФрд░ рдЧреНрд░рд╛рдлрд┐рдХ рдЗрдВрдЬрди рд╕реАрдЦрдиреЗ рдХреА рдХреЛрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ; </li><li>  рдЖрдкрдХреЗ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдкрд╛рдВрдЪ рд╕рд╛рд▓ рдореЗрдВ рдЕрдкреНрд░рдЪрд▓рд┐рдд рдирд╣реАрдВ рд╣реЛрдВрдЧреЗ рдХрд┐ рдЖрдк рдЦреЗрд▓ рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░реЗрдВрдЧреЗ; </li><li>  рдХрдЯреНрдЯрд░ рдХрд╛рд░реНрдпрдХрд░реНрддрд╛ рдЖрдкрдХреЗ рдЙрддреНрдкрд╛рдж рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдЙрди рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдкрд░ рднреА рдХрд░ рд╕рдХреЗрдВрдЧреЗ, рдЬрд┐рдирдореЗрдВ рдЧреНрд░рд╛рдлрд┐рдХрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рдирд╣реАрдВ рд╣реИ; </li><li>  рдпрджрд┐ рд╕рдм рдХреБрдЫ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╢рд╛рдВрдд рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдХреЛ рдмрд╛рдж рдореЗрдВ, рдмрд╛рдж рдореЗрдВ рдЙрдкрд╡рд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </li></ul><br>  рдЙрдкрд░реЛрдХреНрдд рд▓рдВрдмреЗ рдкрд░рд┐рдЪрдп рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдиреМрд╕рд┐рдЦрд┐рдпрд╛ рдЗрдЧреНрд░реЛрдбреЗрд▓реЛрд╡ рдХреЛ рдЖрд╢рдВрдХрд╛рдУрдВ рдФрд░ рдкреВрд░реНрд╡рд╛рдЧреНрд░рд╣реЛрдВ рдХреЛ рджреВрд░ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рдирд╛ рдерд╛, рдЪрд┐рдВрддрд╛ рдХрд░рдирд╛ рдмрдВрдж рдХрд░реЛ рдФрд░ рдлрд┐рд░ рднреА рдРрд╕рд╛ рдХреБрдЫ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЛред  рдХреНрдпрд╛ рдЖрдк рддреИрдпрд╛рд░ рд╣реИрдВ?  рддреЛ рдЪрд▓рд┐рдП рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред <br><br><h2>  <font color="#0474a0">рдкрд╣рд▓рд╛ рдХрджрдоред</font>  <font color="#0474a0">рд╡рд┐рдЪрд╛рд░</font> </h2><br>  рдХреИрд╕реЗ?  рдЕрднреА рднреА рдХреЛрдИ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ? <br><br>  рдХрдВрдкреНрдпреВрдЯрд░ рдмрдВрдж рдХрд░реЗрдВ, рдЦрд╛рдПрдВ, рдЪрд▓реЗрдВ, рд╡реНрдпрд╛рдпрд╛рдо рдХрд░реЗрдВред  рдпрд╛ рд╕реЛ рдЬрд╛рдУ, рд╕рдмрд╕реЗ рдЦрд░рд╛рдм рдкрд░ред  рдПрдХ рдЦреЗрд▓ рдХреЗ рд╕рд╛рде рдЖрдиреЗ рдХреЗ рд▓рд┐рдП рдЦрд┐рдбрд╝рдХрд┐рдпреЛрдВ рдХреЛ рдзреЛрдирд╛ рдирд╣реАрдВ рд╣реИ - рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЕрдВрддрд░реНрджреГрд╖реНрдЯрд┐ рдирд╣реАрдВ рдЖрддреА рд╣реИред  рдЖрдорддреМрд░ рдкрд░ рдПрдХ рдЦреЗрд▓ рдХрд╛ рд╡рд┐рдЪрд╛рд░ рдЕрдЪрд╛рдирдХ, рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд░реВрдк рд╕реЗ рдкреИрджрд╛ рд╣реЛрддрд╛ рд╣реИ, рдЬрдм рдЖрдк рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд┐рд▓реНрдХреБрд▓ рдирд╣реАрдВ рд╕реЛрдЪрддреЗ рд╣реИрдВред  рдпрджрд┐ рдпрд╣ рдЕрдЪрд╛рдирдХ рд╣реБрдЖ, рддреЛ рдПрдХ рдкреЗрдВрд╕рд┐рд▓ рдХреЛ рддреЗрдЬреА рд╕реЗ рдкрдХрдбрд╝реЗрдВ рдФрд░ рддрдм рддрдХ рд▓рд┐рдЦ рджреЗрдВ рдЬрдм рддрдХ рд╡рд┐рдЪрд╛рд░ рдЙрдбрд╝ рди рдЬрд╛рдПред  рдХрд┐рд╕реА рднреА рд░рдЪрдирд╛рддреНрдордХ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдФрд░ рдЖрдк рдЕрдиреНрдп рд▓реЛрдЧреЛрдВ рдХреЗ рдЦреЗрд▓ рдХреА рдирдХрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЦреИрд░, рдирдХрд▓ред  рдмреЗрд╢рдХ, рдмреЗрд╢рд░реНрдореА рд╕реЗ рдЖрдВрд╕реВ рди рдмрд╣рд╛рдПрдВ, рд╣рд░ рдХреЛрдиреЗ рдкрд░ рдмрддрд╛рдПрдВ рдХрд┐ рдЖрдк рдХрд┐рддрдиреЗ рд╕реНрдорд╛рд░реНрдЯ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдкрдиреЗ рдЙрддреНрдкрд╛рдж рдореЗрдВ рджреВрд╕рд░реЛрдВ рдХреЗ рдЕрдиреБрднрд╡ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред  рдпрд╣ рдЖрдкрдХреЗ рд╕рдкрдиреЗ рд╕реЗ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдХрд┐рддрдирд╛ рдЕрд▓рдЧ рд░рд╣реЗрдЧрд╛, рдпрд╣ рдПрдХ рдЧреМрдг рдкреНрд░рд╢реНрди рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдХреНрд╕рд░ рдЧреЗрдорд░реНрд╕ рдХреЗ рдкрд╛рд╕ рдпрд╣ рд╣реЛрддрд╛ рд╣реИ: рд╡реЗ рдЦреЗрд▓ рдореЗрдВ рд╕рдм рдХреБрдЫ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ, рдХреБрдЫ рджреЛ рдпрд╛ рддреАрди рдХрд╖реНрдЯрдкреНрд░рдж рдЪреАрдЬреЛрдВ рдХреЛ рдЫреЛрдбрд╝рдХрд░, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдпрд╣ рдЕрд▓рдЧ рддрд░рд╣ рд╕реЗ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛ ... рдХреМрди рдЬрд╛рдирддрд╛ рд╣реИ рд╢рд╛рдпрдж рдХрд┐рд╕реА рдХреЗ рдЕрдЪреНрдЫреЗ рд╡рд┐рдЪрд╛рд░ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд▓рд╛рдирд╛ рдЖрдкрдХрд╛ рд╕рдкрдирд╛ рд╣реИред <br><br>  рд▓реЗрдХрд┐рди рд╣рдо рд╕рд░рд▓ рддрд░реАрдХреЗ рд╕реЗ рдЬрд╛рдПрдВрдЧреЗ - рдорд╛рди рд▓реЗрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рд╡рд┐рдЪрд╛рд░ рд╣реИ, рдФрд░ рд╣рдордиреЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рд╕реЛрдЪрд╛ рд╣реИред  рд╣рдорд╛рд░реА рдкрд╣рд▓реА рднрд╡реНрдп рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд░реВрдк рдореЗрдВ, рд╣рдо рдУрдмреНрд╕реАрдбрд┐рдпрди - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд╛рдердлрд╛рдЗрдВрдбрд░ рдПрдбрд╡реЗрдВрдЪрд░реНрд╕</a> рд╕реЗ рдПрдХ рдЕрдЪреНрдЫреЗ рдЦреЗрд▓ рдХрд╛ рдПрдХ рдХреНрд▓реЛрди рдмрдирд╛рдПрдВрдЧреЗред <br><br>  <i>тАЬрдпрд╣ рдХреНрдпрд╛ рдореБрд╕реАрдмрдд рд╣реИ!</i>  <i>рдХреЛрдИ рдЯреЗрдмрд▓? тАЭ</i> <br><br>  рдЬреИрд╕рд╛ рдХрд┐ рд╡реЗ рдХрд╣рддреЗ рд╣реИрдВ, <i>рдкреАрдХреНрд╡рд╛рдпреЛрдИ рдкреЗрд╕?</i>  рд╣рдореЗрдВ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреВрд░реНрд╡рд╛рдЧреНрд░рд╣реЛрдВ рдХреЛ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдЗрд╕рд▓рд┐рдП рд╣рдо рд╕рд╛рд╣рд╕рдкреВрд░реНрд╡рдХ рд╡рд┐рдЪрд╛рд░ рдХреЛ рдкрд░рд┐рд╖реНрдХреГрдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред  рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ, рд╣рдо рдЦреЗрд▓ рдХреЛ рдПрдХ рд╕реЗ рдПрдХ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рд╣рдо рдмреБрдирд┐рдпрд╛рджреА рдпрд╛рдВрддреНрд░рд┐рдХреА рдХреЛ рдЙрдзрд╛рд░ рд▓реЗрдВрдЧреЗред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рдмрд╛рд░реА рдЖрдзрд╛рд░рд┐рдд рдмреЛрд░реНрдб рд╕рд╣рдХрд╛рд░реА рдЦреЗрд▓ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рдЕрдкрдиреЗ рдлрд╛рдпрджреЗ рд╣реИрдВ: <br><br><ul><li>  рдпрд╣ рдЪрд░рдг-рджрд░-рдЪрд░рдг рд╣реИ - рдпрд╣ рдЖрдкрдХреЛ рдЯрд╛рдЗрдорд░, рддреБрд▓реНрдпрдХрд╛рд▓рди, рдЕрдиреБрдХреВрд▓рди, рдПрдлрдкреАрдПрд╕ рдФрд░ рдЕрдиреНрдп рд╕реБрдирд╕рд╛рди рдЪреАрдЬреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИ; </li><li>  рдпрд╣ рд╕рд╣рдХрд╛рд░реА рд╣реИ, рдЕрд░реНрдерд╛рдд, рдЦрд┐рд▓рд╛рдбрд╝реА рдпрд╛ рдЦрд┐рд▓рд╛рдбрд╝реА рдПрдХ-рджреВрд╕рд░реЗ рдХреЗ рдЦрд┐рд▓рд╛рдл рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзрд╛ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдирд┐рд░реНрдзрд╛рд░рдХ рдирд┐рдпрдореЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЦреЗрд▓рдиреЗ рд╡рд╛рд▓реЗ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд "рдкрд░реНрдпрд╛рд╡рд░рдг" рдХреЗ рдЦрд┐рд▓рд╛рдл - рдпрд╣ <abbr title="рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐">рдПрдЖрдИ</abbr> ( <abbr title="рдЖрд░реНрдЯрд┐рдлрд┐рд╢рд┐рдпрд▓ рдЗрдВрдЯреЗрд▓рд┐рдЬреЗрдВрд╕">рдПрдЖрдИ</abbr> ) рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ - рдЦреЗрд▓ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд╕рдмрд╕реЗ рдХрдард┐рди рдЪрд░рдгреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ; </li><li>  рдпрд╣ рд╕рд╛рд░реНрдердХ рд╣реИ - рдЯреЗрдмрд▓рдЯреЙрдк рдЖрдо рддреМрд░ рдкрд░ рд╕рдирдХреА рд▓реЛрдЧ рд╣реИрдВ, рд╡реЗ рдХреБрдЫ рднреА рдирд╣реАрдВ рдЦреЗрд▓рддреЗ рд╣реИрдВ: рдЙрдиреНрд╣реЗрдВ рд╡рд┐рдЪрд╛рд░рд╢реАрд▓ рдпрд╛рдВрддреНрд░рд┐рдХреА рдФрд░ рджрд┐рд▓рдЪрд╕реНрдк рдЧреЗрдордкреНрд▓реЗ рджреЗрдВ - рдЖрдк рдПрдХ рд╕реБрдВрджрд░ рддрд╕реНрд╡реАрд░ рдореЗрдВ рдмрд╛рд╣рд░ рдирд╣реАрдВ рдирд┐рдХрд▓реЗрдВрдЧреЗ (рдпрд╣ рджреЛрд╕реНрддреЛрдВ рдХреЛ рдХреБрдЫ рджреЗрддрд╛ рд╣реИ, рдареАрдХ рд╣реИ?)ред </li><li>  рдпрд╣ рдХрдерд╛рдирдХ рдХреЗ рд╕рд╛рде рд╣реИ - рдХрдИ рдИ-рдЦрд┐рд▓рд╛рдбрд╝реА рд╕рд╣рдордд рдирд╣реАрдВ рд╣реЛрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдореЗрд░реЗ рд▓рд┐рдП рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рдЦреЗрд▓ рдХреЛ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдХрд╣рд╛рдиреА рдмрддрд╛рдиреА рдЪрд╛рд╣рд┐рдП - рдПрдХ рдХрд┐рддрд╛рдм рдХреА рддрд░рд╣, рдХреЗрд╡рд▓ рдЕрдкрдиреЗ рд╡рд┐рд╢реЗрд╖ рдХрд▓рд╛рддреНрдордХ рд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред </li><li>  рд╡рд╣ рдордиреЛрд░рдВрдЬрдХ рд╣реИ, рдЬреЛ рд╣рд░ рдХрд┐рд╕реА рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рд╣реИ - рд╡рд░реНрдгрд┐рдд рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд┐рд╕реА рднреА рдмрд╛рдж рдХреЗ рд╕рдкрдиреЗ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЪрд╛рд╣реЗ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХрд┐рддрдирд╛ рднреА рд╣реЛред </li></ul><br><div class="spoiler">  <b class="spoiler_title">рдирд┐рдпрдореЛрдВ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рдирд╣реАрдВ рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП, рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдкрд░рд┐рдЪрдп:</b> <div class="spoiler_text">  <b>рдкрд╛рдердлрд╛рдЗрдВрдбрд░ рдПрдбрд╡реЗрдВрдЪрд░реНрд╕</b> рдПрдХ рдмреЛрд░реНрдб рдХрд╛рд░реНрдб рдЧреЗрдо рдХрд╛ рдПрдХ рдбрд┐рдЬрд┐рдЯрд▓ рд╕рдВрд╕реНрдХрд░рдг рд╣реИ рдЬреЛ рдПрдХ рдмреЛрд░реНрдб рд░реЛрд▓-рдкреНрд▓реЗрдЗрдВрдЧ рдЧреЗрдо (рдпрд╛ рдмрд▓реНрдХрд┐, рдПрдХ рд╕рдВрдкреВрд░реНрдг рд░реЛрд▓-рдкреНрд▓реЗрдЗрдВрдЧ рд╕рд┐рд╕реНрдЯрдо) рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЦрд┐рд▓рд╛рдбрд╝реА (1 рд╕реЗ 6 рдХреА рд░рд╛рд╢рд┐ рдореЗрдВ) рдЕрдкрдиреЗ рд▓рд┐рдП рдПрдХ рдЪрд░рд┐рддреНрд░ рдЪреБрдирддреЗ рд╣реИрдВ рдФрд░, рдЙрд╕рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░, рдПрдХ рд╕рд╛рд╣рд╕рд┐рдХ рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВ, рдЬрд┐рд╕реЗ рдХрдИ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдкрд╛рддреНрд░ рдХреЗ рдкрд╛рд╕ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░реЛрдВ (рдЬреИрд╕реЗ: рд╣рдерд┐рдпрд╛рд░, рдХрд╡рдЪ, рдордВрддреНрд░, рд╕рд╣рдпреЛрдЧреА, рд╡рд╕реНрддреБрдПрдВ, рдЖрджрд┐) рдХреЗ рдирд┐рдкрдЯрд╛рди рдХрд╛рд░реНрдб рд╣реЛрддреЗ рд╣реИрдВ, рдЬрд┐рдирдХреА рд╕рд╣рд╛рдпрддрд╛ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдкрд░рд┐рджреГрд╢реНрдп рдореЗрдВ рдЙрд╕реЗ рд╕реНрдХреИрдВрдбрд▓рд░ рдХреЛ рдвреВрдВрдврдирд╛ рдФрд░ рдХреНрд░реВрд░рддрд╛рдкреВрд░реНрд╡рдХ рджрдВрдбрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП - рд╡рд┐рд╢реЗрд╖ рдЧреБрдгреЛрдВ рд╡рд╛рд▓рд╛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░реНрдбред <br><br>  рдкреНрд░рддреНрдпреЗрдХ рдкрд░рд┐рджреГрд╢реНрдп рдХрдИ рд╕реНрдерд╛рди рдпрд╛ рд╕реНрдерд╛рди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ (рдЙрдирдХреА рд╕рдВрдЦреНрдпрд╛ рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреА рд╣реИ) рдЬрд┐рд╕реЗ рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЛ рджреЗрдЦрдиреЗ рдФрд░ рддрд▓рд╛рд╢рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рд╕реНрдерд╛рди рдкрд░ рдХрд╛рд░реНрдбреЛрдВ рдХрд╛ рдПрдХ рдбреЗрдХ рд▓рдЧрд╛ рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдкрд╛рддреНрд░ рдЕрдкрдиреА рдмрд╛рд░реА рдореЗрдВ рдЦреЛрдЬрддреЗ рд╣реИрдВ - рдЕрд░реНрдерд╛рддреН, рд╡реЗ рд╢реАрд░реНрд╖ рдХрд╛рд░реНрдб рдХреЛ рдЦреЛрд▓рддреЗ рд╣реИрдВ рдФрд░ рд╕рдВрдмрдВрдзрд┐рдд рдирд┐рдпрдореЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЗрд╕реЗ рджреВрд░ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВред  рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рдбреЗрдХ рдХреЛ рдмрджрд▓рдиреЗ рд╡рд╛рд▓реЗ рд╣рд╛рдирд┐рд░рд╣рд┐рдд рдХрд╛рд░реНрдбреЛрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрди рдбреЗрдХ рдореЗрдВ рдмреБрд░реЗ рджреБрд╢реНрдорди рдФрд░ рдмрд╛рдзрд╛рдПрдВ рднреА рд╣реЛрддреА рд╣реИрдВ - рдЙрдиреНрд╣реЗрдВ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░рд╛рдЬрд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╕реНрдХреИрдВрдбрд░ рдХрд╛рд░реНрдб рднреА рдбреЗрдХ рдореЗрдВ рд╕реЗ рдПрдХ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИ, рд▓реЗрдХрд┐рди рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЛ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдХреМрди рд╕рд╛ - рдЗрд╕реЗ рдЦреЛрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br>  рдХрд╛рд░реНрдбреНрд╕ рдХреЛ рд╣рд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП (рдФрд░ рдирдП рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП), рдкрд╛рддреНрд░реЛрдВ рдХреЛ рдЕрдкрдиреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдкрд╛рд╕ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ (рдорд░рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ, рдЖрд░рдкреАрдЬреА, рд╢рдХреНрддрд┐, рдирд┐рдкреБрдгрддрд╛, рдЬреНрдЮрд╛рди, рдЖрджрд┐) рдХреЗ рдорд╛рдирдХ рдХреЛ рдорд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕реА рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рдорд╛рди рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (d4 рд╕реЗ d12 рддрдХ), рд╕рдВрд╢реЛрдзрдХ (рдкрд░рд┐рднрд╛рд╖рд┐рдд) рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реБрдП рдирд┐рдпрдо рдФрд░ рдЪрд░рд┐рддреНрд░ рд╡рд┐рдХрд╛рд╕ рдХрд╛ рд╕реНрддрд░) рдФрд░ рд╣рд╛рде рд╕реЗ рдЙрдкрдпреБрдХреНрдд рдХрд╛рд░реНрдб рдХреЗ рдкреНрд░рднрд╛рд╡ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЦреЗрд▓ рд░рд╣реЗ рд╣реИрдВред  рдЬреАрдд рдХреЗ рдмрд╛рдж, рдореЗрдЯ рдХрд╛рд░реНрдб рдХреЛ рдпрд╛ рддреЛ рдЧреЗрдо рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдпрджрд┐ рдпрд╣ рдПрдХ рджреБрд╢реНрдорди рд╣реИ) рдпрд╛ рдХрд┐рд╕реА рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рд╣рд╛рде (рдпрджрд┐ рдпрд╣ рдПрдХ рдЖрдЗрдЯрдо рд╣реИ) рдХреА рднрд░рдкрд╛рдИ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЪрд╛рд▓ рджреВрд╕рд░реЗ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рдкрд╛рд╕ рдЪрд▓реА рдЬрд╛рддреА рд╣реИред  рд╣рд╛рд░рдиреЗ рдкрд░, рдЪрд░рд┐рддреНрд░ рдЕрдХреНрд╕рд░ рдХреНрд╖рддрд┐рдЧреНрд░рд╕реНрдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд╡рд╣ рдЕрдкрдиреЗ рд╣рд╛рде рд╕реЗ рдХрд╛рд░реНрдб рдЫреЛрдбрд╝ рджреЗрддрд╛ рд╣реИред  рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдореИрдХреЗрдирд┐рдХ рдпрд╣ рд╣реИ рдХрд┐ рдЪрд░рд┐рддреНрд░ рдХрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдЙрд╕рдХреЗ рдбреЗрдХ рдореЗрдВ рдХрд╛рд░реНрдб рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ - рдЬреИрд╕реЗ рд╣реА рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдбреЗрдХ рд╕реЗ рдХрд╛рд░реНрдб рдЦреАрдВрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рд╡реЗ рд╡рд╣рд╛рдВ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдЙрдирдХрд╛ рдЪрд░рд┐рддреНрд░ рдорд░ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рд▓рдХреНрд╖реНрдп, рд╕реНрдерд╛рди рдХреЗ рдирдХреНрд╢реЗ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЕрдкрдирд╛ рд░рд╛рд╕реНрддрд╛ рдмрдирд╛ рд▓рд┐рдпрд╛ рд╣реИ, рдмрджрдорд╛рд╢ рдХреЛ рдЦреЛрдЬрдиреЗ рдФрд░ рдЙрд╕реЗ рд╣рд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдкрд╣рд▓реЗ рд╕реЗ рдкреАрдЫреЗ рд╣рдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рд░рд╛рд╕реНрддрд╛ рдЕрд╡рд░реБрджреНрдз рдХрд░ рджрд┐рдпрд╛ рд╣реИ (рдЖрдк рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдмрд╣реБрдд рдХреБрдЫ рдЬрд╛рди рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдирд┐рдпрдореЛрдВ рдХреЛ рдкрдврд╝рдХрд░ рдмрд╣реБрдд рдХреБрдЫ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ)ред  рдпрд╣ рдХреБрдЫ рд╕рдордп рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬреЛ рдХрд┐ рдЦреЗрд▓ рдХреА рдореБрдЦреНрдп рдХрдард┐рдирд╛рдИ рд╣реИред  рдЪрд╛рд▓реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕рдЦреНрддреА рд╕реЗ рд╕реАрдорд┐рдд рд╣реИ рдФрд░ рд╕рднреА рдЙрдкрд▓рдмреНрдз рдХрд╛рд░реНрдбреЛрдВ рдХрд╛ рдПрдХ рд╕рд░рд▓ рдЬреНрдЮрд╛рди рд▓рдХреНрд╖реНрдп рддрдХ рдирд╣реАрдВ рдкрд╣реБрдВрдЪрддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЖрдкрдХреЛ рд╡рд┐рднрд┐рдиреНрди рдЯреНрд░рд┐рдХреНрд╕ рдФрд░ рдЪрддреБрд░ рддрдХрдиреАрдХреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред <br><br>  рдЬреИрд╕реЗ-рдЬреИрд╕реЗ рдкрд░рд┐рджреГрд╢реНрдп рдкреВрд░реЗ рд╣реЛрддреЗ рд╣реИрдВ, рдкрд╛рддреНрд░ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрдВрдЧреЗ рдФрд░ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрдВрдЧреЗ, рдЙрдирдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдирдП рдЙрдкрдпреЛрдЧреА рдХреМрд╢рд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВрдЧреЗред  рдбреЗрдХ рдХрд╛ рдкреНрд░рдмрдВрдзрди рднреА рдЦреЗрд▓ рдХрд╛ рдПрдХ рдмрд╣реБрдд рд╣реА рдорд╣рддреНрд╡рдкреВрд░реНрдг рддрддреНрд╡ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкрд░рд┐рджреГрд╢реНрдп рдХреЗ рдкрд░рд┐рдгрд╛рдо (рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдмрд╛рдж рдХреЗ рдЪрд░рдгреЛрдВ рдореЗрдВ) рдЖрдорддреМрд░ рдкрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЪрдпрдирд┐рдд рдХрд╛рд░реНрдб (рдФрд░ рдмрд╣реБрдд рднрд╛рдЧреНрдп рдкрд░, рд▓реЗрдХрд┐рди рдЖрдк рдкрд╛рд╕рд╛ рдХреЗ рд╕рд╛рде рдЦреЗрд▓ рд╕реЗ рдХреНрдпрд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?) рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред </div></div><br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЦреЗрд▓ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ, рдпреЛрдЧреНрдп рд╣реИ, рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ, рдФрд░, рдЬреЛ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рдХрд╛рдлреА рдЬрдЯрд┐рд▓ рд╣реИ (рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдореИрдВ "рдореБрд╢реНрдХрд┐рд▓" рдХреЗ рдЕрд░реНрде рдореЗрдВ "рдореБрд╢реНрдХрд┐рд▓" рдХрд╣рддрд╛ рд╣реВрдВ) рдЗрд╕рдХреЗ рдХреНрд▓реЛрди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджрд┐рд▓рдЪрд╕реНрдк рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдПред <br><br>  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдПрдХ рд╡реИрд╢реНрд╡рд┐рдХ рд╡реИрдЪрд╛рд░рд┐рдХ рдкрд░рд┐рд╡рд░реНрддрди рдХрд░реЗрдВрдЧреЗ - рд╣рдо рдХрд╛рд░реНрдб рдЫреЛрдбрд╝ рджреЗрдВрдЧреЗред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╣рдордиреЗ рдмрд┐рд▓реНрдХреБрд▓ рднреА рдордирд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рд╣рдо рдХрд╛рд░реНрдбреНрд╕ рдХреЛ рдХреНрдпреВрдмреНрд╕ рд╕реЗ рдмрджрд▓ рджреЗрдВрдЧреЗ, рдлрд┐рд░ рднреА рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЖрдХрд╛рд░ рдФрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд░рдВрдЧреЛрдВ рдХреЗ (рддрдХрдиреАрдХреА рд░реВрдк рд╕реЗ, рдпрд╣ рдЙрдирдХреЗ "рдХреНрдпреВрдмреНрд╕" рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд┐рд▓реНрдХреБрд▓ рд╕рд╣реА рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╕рд╣реА рд╣реЗрдХреНрд╕рд╛рдЧреЛрди рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдЕрдиреНрдп рдЖрдХрд╛рд░ рднреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рдореЗрд░реЗ рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ "рд╣рдбреНрдбрд┐рдпреЛрдВ" рдХрд╣рдирд╛ рдЕрд╕рд╛рдорд╛рдиреНрдп рд╣реИ) рдФрд░ рдпрд╣ рдЕрдкреНрд░рд┐рдп рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдореЗрд░рд┐рдХреА рдбреЗрдЬрд╝реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЦрд░рд╛рдм рд╕реНрд╡рд╛рдж рдХрд╛ рд╕рдВрдХреЗрдд рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рд╡реИрд╕реЗ рд╣реА рдЫреЛрдбрд╝ рджреЗрдВ)ред  рдЕрдм рдбреЗрдХ рдХреЗ рдмрдЬрд╛рдп рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЗ рдмреИрдЧ рд╣реЛрдВрдЧреЗред  рдФрд░ рд╕реНрдерд╛рдиреЛрдВ рдореЗрдВ рдмреИрдЧ рднреА рд╣реЛрдВрдЧреЗ, рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдЕрдиреБрд╕рдВрдзрд╛рди рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЦрд┐рд▓рд╛рдбрд╝реА рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рдХреНрдпреВрдмреНрд╕ рдЦреАрдВрдЪреЗрдВрдЧреЗред  рдШрди рдХрд╛ рд░рдВрдЧ рдЗрд╕рдХреЗ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░реЗрдЧрд╛ рдФрд░, рддрджрдиреБрд╕рд╛рд░, рдкрд░реАрдХреНрд╖рдг рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдпрдоред  рдЪрд░рд┐рддреНрд░ рдХреА рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ (рд╢рдХреНрддрд┐, рдирд┐рдкреБрдгрддрд╛, рдЖрджрд┐), рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рд╕рдорд╛рдкреНрдд рд╣реЛ рдЬрд╛рдПрдЧреА, рд▓реЗрдХрд┐рди рдирдП рджрд┐рд▓рдЪрд╕реНрдк рдпрд╛рдВрддреНрд░рд┐рдХреА рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗ (рдЬрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдж рдореЗрдВ)ред <br><br>  рдХреНрдпрд╛ рдпрд╣ рдЦреЗрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬреЗрджрд╛рд░ рд╣реЛрдЧрд╛?  рдореЗрд░реЗ рдкрд╛рд╕ рдХреЛрдИ рд╡рд┐рдЪрд╛рд░ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЬрдм рддрдХ рдПрдХ рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рддреИрдпрд╛рд░ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддрдм рддрдХ рдХреЛрдИ рднреА рдЗрд╕реЗ рд╕рдордЭ рдирд╣реАрдВ рд╕рдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╣рдо рдЦреЗрд▓ рдХрд╛ рдЖрдирдВрдж рдирд╣реАрдВ рд▓реЗрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╡рд┐рдХрд╛рд╕, рд╕рд╣реА рд╣реИ?  рдЗрд╕рд▓рд┐рдП, рд╕рдлрд▓рддрд╛ рдХрд╛ рдХреЛрдИ рд╕рдВрджреЗрд╣ рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><h2>  <font color="#0474a0">рдЪрд░рдг рджреЛ</font>  <font color="#0474a0">рдбрд┐рдЬрд╝рд╛рдЗрди</font> </h2><br>  рдПрдХ рд╡рд┐рдЪрд╛рд░ рдХреЗ рдмрд╛рдж рдХрд╣рд╛рдиреА рдХрд╛ рдХреЗрд╡рд▓ рдПрдХ рддрд┐рд╣рд╛рдИ рд╣реИред  рдЕрдм рдЗрд╕ рд╡рд┐рдЪрд╛рд░ рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред  рдпрд╣реА рд╣реИ, рдкрд╛рд░реНрдХ рдореЗрдВ рдЯрд╣рд▓реЗрдВ рдпрд╛ рд╕реНрдЯреАрдо рдмрд╛рде рди рд▓реЗрдВ, рдмрд▓реНрдХрд┐ рдЯреЗрдмрд▓ рдкрд░ рдмреИрдареЗрдВ, рдкреЗрди рд╕реЗ рдкреЗрдкрд░ рд▓реЗрдВ (рдпрд╛ рдЕрдкрдирд╛ рдкрд╕рдВрджреАрджрд╛ рдЯреЗрдХреНрд╕реНрдЯ рдПрдбрд┐рдЯрд░ рдЦреЛрд▓реЗрдВ) рдФрд░ рдзреНрдпрд╛рди рд╕реЗ рдПрдХ рдбрд┐рдЬрд╝рд╛рдЗрди рдбреЙрдХреНрдпреВрдореЗрдВрдЯ рд▓рд┐рдЦреЗрдВ, рдЬрд┐рд╕рдореЗрдВ рдЧреЗрдо рдореИрдХреЗрдирд┐рдХреНрд╕ рдХреЗ рд╣рд░ рдкрд╣рд▓реВ рдкрд░ рдзреНрдпрд╛рди рд╕реЗ рдХрд╛рдо рдХрд┐рдпрд╛ рдЬрд╛рдПред  рдЗрд╕рдХреЗ рд▓рд┐рдП рд╕рдордп рдПрдХ рд╕рдлрд▓рддрд╛ рд▓реЗ рдЬрд╛рдПрдЧрд╛, рдЗрд╕рд▓рд┐рдП рдПрдХ рдмреИрдардХ рдореЗрдВ рд▓реЗрдЦрди рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рди рдХрд░реЗрдВред  рдФрд░ рдПрдХ рдмрд╛рд░ рдореЗрдВ рд╕рдм рдХреБрдЫ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЛрдЪрдиреЗ рдХреА рднреА рдЙрдореНрдореАрдж рди рдХрд░реЗрдВ - рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЖрдк рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдФрд░ рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рджреЗрдЦреЗрдВрдЧреЗ (рдФрд░ рдХрднреА-рдХрднреА рд╡рд┐рд╢реНрд╡ рд╕реНрддрд░ рдкрд░ рдХрд┐рд╕реА рдЪреАрдЬ рдХреЛ рдлрд┐рд░ рд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ), рд▓реЗрдХрд┐рди рд╡рд┐рдХрд╛рд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдХреБрдЫ рдЖрдзрд╛рд░ рдореМрдЬреВрдж рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><div class="spoiler">  <b class="spoiler_title">рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХрд╛ рдбрд┐рдЬрд╝рд╛рдЗрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/oi/qw/fp/oiqwfpjf6vasnpmy6ucqglbnwy8.jpeg"></a> <br><br> <a href=""><img src="https://habrastorage.org/webt/ff/gu/7q/ffgu7qx80qefetycgrmdraoetv8.jpeg"></a> <br></div></div><br>  рдФрд░ рдХреЗрд╡рд▓ рднрд╡реНрдп рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреА рдкрд╣рд▓реА рд▓рд╣рд░ рдХреЗ рд╕рд╛рде рдореБрдХрд╛рдмрд▓рд╛ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рд╕рд┐рд░ рдЙрдард╛рддреЗ рд╣реИрдВ, рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреА рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде рд╡реНрдпрд╡рд╕реНрдерд┐рдд рд░реВрдк рд╕реЗ рднрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ (рд╣рд░ рд╕реЗрдХрдВрдб рдХреА рдЬрд╛рдВрдЪ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдЬреЛ рдЕрдирд╛рд╡рд╢реНрдпрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдФрд░ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╡рд┐рд░реЛрдзрд╛рднрд╛рд╕реЛрдВ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд▓рд┐рдЦреЗ рдЧрдП рд╣реИрдВ)ред  рдзреАрд░реЗ-рдзреАрд░реЗ, рдХрджрдо рд╕реЗ рдХрджрдо, рдЖрдкрдХреЛ рдХреБрдЫ рд╕рд╛рд░реНрдердХ рдФрд░ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдорд┐рд▓рддрд╛ рд╣реИ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЬреИрд╕реЗ</a> ред <br><br>  рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╕рдордп, рдЙрд╕ рднрд╛рд╖рд╛ рдХреЛ рдЪреБрдиреЗрдВ рдЬрд┐рд╕рдореЗрдВ рдЖрдкрдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рд╡реНрдпрдХреНрдд рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛрддрд╛ рд╣реИ, рдЦрд╛рд╕рдХрд░ рдпрджрд┐ рдЖрдк рдЕрдХреЗрд▓реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред  рдпрджрд┐ рдЖрдкрдХреЛ рдХрднреА рднреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рддреАрд╕рд░реЗ рдкрдХреНрд╖ рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╡реЗ рдЖрдкрдХреЗ рд╕рд┐рд░ рдкрд░ рдЪрд▓ рд░рд╣реЗ рд╕рднреА рд░рдЪрдирд╛рддреНрдордХ рдмрдХрд╡рд╛рд╕ рдХреЛ рд╕рдордЭрддреЗ рд╣реИрдВред <br><br>  рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ рджреГрдврд╝рддрд╛ рд╕реЗ рдЕрдиреБрд╢рдВрд╕рд╛ рдХрд░рддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдЙрджреНрдзреГрдд рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдХрдо рд╕реЗ рдХрдо рддрд┐рд░рдЫреЗ рдврдВрдЧ рд╕реЗ рдкрдврд╝рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдореИрдВ рдЙрдирдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛ рдкрд░ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдирд┐рд╡рд╛рд╕ рдХрд┐рдП рдмрд┐рдирд╛, рд╡рд╣рд╛рдБ рдкреНрд░рд╕реНрддреБрдд рд╢рд░реНрддреЛрдВ рдФрд░ рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░реВрдВрдЧрд╛ред <br><br>  <i>тАЬрд▓реЗрдЦрдХ, рдЦреБрдж рдХреЛ рджреАрд╡рд╛рд░ рдХреЗ рдЦрд┐рд▓рд╛рдл рдорд╛рд░ рд▓реЛред</i>  <i>рдмрд╣реБрдд рд╕рд╛рд░реЗ рдкрддреНрд░ред тАЭ</i> <br><br><h2>  <font color="#0474a0">рдЪрд░рдг рддреАрди</font>  <font color="#0474a0">рдореЛрдбрд▓рд┐рдВрдЧ</font> </h2><br>  рдпрд╣реА рд╣реИ, рд╕рднреА рдПрдХ рд╣реА рдбрд┐рдЬрд╛рдЗрди, рдХреЗрд╡рд▓ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддреГрддред <br>  рдореБрдЭреЗ рдкрддрд╛ рд╣реИ рдХрд┐ рдХрдИ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдЖрдИрдбреАрдИ рдЦреЛрд▓рдиреЗ рдФрд░ рдХреЛрдбрд┐рдВрдЧ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрддреНрд╕реБрдХ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдереЛрдбрд╝рд╛ рдФрд░ рдзреИрд░реНрдп рд░рдЦреЗрдВред  рдЬрдм рд╡рд┐рдЪрд╛рд░ рд╣рдорд╛рд░реЗ рд╕рд┐рд░ рдкрд░ рд╣рд╛рд╡реА рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рд╣рдореЗрдВ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рд╣рдореЗрдВ рдХреЗрд╡рд▓ рдХреАрдмреЛрд░реНрдб рдХреЛ рдЫреВрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ рдФрд░ рд╣рдорд╛рд░реЗ рд╣рд╛рде рдЖрдХрд╛рд╢-рдЙрдЪреНрдЪ рджреВрд░реА рдкрд░ рдкрд╣реБрдВрдЪреЗрдВрдЧреЗ - рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдХреЙрдлреА рдХреЛ рд╕реНрдЯреЛрд╡ рдкрд░ рдЙрдмрд╛рд▓рдиреЗ рдХрд╛ рд╕рдордп рд╣реЛ, рдЬрдм рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рдХрд╛рд░реНрдпрд╢реАрд▓ рд╕рдВрд╕реНрдХрд░рдг рддреИрдпрд╛рд░ рд╣реИ ... рдХреВрдбрд╝реЗрджрд╛рди рдореЗрдВ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдПред  рдПрдХ рд╣реА рдЪреАрдЬрд╝ рдХреЛ рдХрдИ рдмрд╛рд░ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ (рдФрд░ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рддреАрди рдШрдВрдЯреЗ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рдмрд╛рдж рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд▓реЗрдЖрдЙрдЯ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рд╣реИ рдФрд░ рдирдП рд╕рд┐рд░реЗ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ), рдореЗрд░рд╛ рд╕реБрдЭрд╛рд╡ рд╣реИ рдХрд┐ рдЖрдк рдкрд╣рд▓реЗ рдЖрд╡реЗрджрди рдХреА рдореБрдЦреНрдп рд╕рдВрд░рдЪрдирд╛ (рдФрд░ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝) рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред <br><br>  рдЪреВрдВрдХрд┐ рд╣рдо, рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд░реВрдк рдореЗрдВ, рдСрдмреНрдЬреЗрдХреНрдЯ-рдУрд░рд┐рдПрдВрдЯреЗрдб рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ (рдУрдУрдкреА) рд╕реЗ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реИрдВ, рд╣рдо рдЕрдкрдиреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдЗрд╕рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрддреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред  рд▓реЗрдХрд┐рди рдУрдУрдкреА рдХреЗ рд▓рд┐рдП рдмреЛрд░рд┐рдВрдЧ рдпреВрдПрдордПрд▓ рдЖрд░реЗрдЦреЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЗ рд╕рд╛рде рд╡рд┐рдХрд╛рд╕ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдЕрдзрд┐рдХ рдХреБрдЫ рдирд╣реАрдВ рд╣реИред  (рдЖрдк рдирд╣реАрдВ рдЬрд╛рдирддреЗ рдХрд┐ <abbr title="рдПрдХреАрдХреГрдд рдореЙрдбрд▓рд┐рдВрдЧ рднрд╛рд╖рд╛">рдпреВрдПрдордПрд▓</abbr> рдХреНрдпрд╛ <abbr title="рдПрдХреАрдХреГрдд рдореЙрдбрд▓рд┐рдВрдЧ рднрд╛рд╖рд╛">рд╣реИ</abbr> ? рдореИрдВ рднреА рд▓рдЧрднрдЧ рднреВрд▓ рдЧрдпрд╛ рд╣реВрдВ, рд▓реЗрдХрд┐рди рдореИрдВ рдЗрд╕реЗ рдЦреБрд╢реА рдХреЗ рд╕рд╛рде рдпрд╛рдж рдХрд░реВрдВрдЧрд╛ - рдмрд╕ рдпрд╣ рджрд┐рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдореИрдВ рдХрд┐рддрдирд╛ рдореЗрд╣рдирддреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд╣реВрдВ, рд╡рд╣ рд╣реВрдВред) <br><br>  рдЪрд▓реЛ рдЙрдкрдпреЛрдЧ-рдХреЗрд╕ рдЖрд░реЗрдЦ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред  рд╣рдо рдЗрд╕реЗ рдЙрди рддрд░реАрдХреЛрдВ рдкрд░ рдЪрд┐рддреНрд░рд┐рдд рдХрд░реЗрдВрдЧреЗ рдЬрд┐рдирдореЗрдВ рд╣рдорд╛рд░реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ (рдЦрд┐рд▓рд╛рдбрд╝реА) рднрд╡рд┐рд╖реНрдп рдХреА рдкреНрд░рдгрд╛рд▓реА рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рддреЗ рд╣реИрдВ: <br><br><div class="spoiler">  <b class="spoiler_title">рдорд╛рдорд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/rt/ph/st/rtphstumyokd9_gnpgzoewpaux8.png"></a> <br></div></div><br>  <i>"рдЙрд╣ ... рдпрд╣ рд╕рдм рдХреНрдпрд╛ рд╣реИ?"</i> <br><br>  рдмрд╕ рдордЬрд╛рдХ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдмрд╕ рдордЬрд╛рдХ рдХрд░ рд░рд╣реЗ рд╣реИрдВ ... рдФрд░, рд╢рд╛рдпрдж, рдореИрдВ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдордЬрд╛рдХ рдХрд░рдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реВрдВ - рдпрд╣ рдПрдХ рдЧрдВрднреАрд░ рдорд╛рдорд▓рд╛ рд╣реИ (рдПрдХ рд╕рдкрдирд╛, рд╕рдм рдХреЗ рдмрд╛рдж)ред  рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЛрдВ рдХреЗ рдЖрд░реЗрдЦ рдкрд░, рдЙрди рд╕рдВрднрд╛рд╡рдирд╛рдУрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдЬреЛ рд╕рд┐рд╕реНрдЯрдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рд╡рд┐рд╡рд░рдг рдореЗрдВред  рд▓реЗрдХрд┐рди рдРрд╕рд╛ рдРрддрд┐рд╣рд╛рд╕рд┐рдХ рд░реВрдк рд╕реЗ рд╣реБрдЖ рдХрд┐ рдпрд╣ рд╡рд┐рд╢реЗрд╖ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдЪрд┐рддреНрд░ рдореЗрд░реЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдмреБрд░рд╛ рд╣реИ - рдзреИрд░реНрдп рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ, рдЬрд╛рд╣рд┐рд░рд╛ рддреМрд░ рдкрд░ред  рдФрд░ рдЖрдкрдХреЛ рдореБрдЭреЗ рдЗрд╕ рддрд░рд╣ рдирд╣реАрдВ рджреЗрдЦрдирд╛ рд╣реИ - рд╣рдо рдбрд┐рдкреНрд▓реЛрдорд╛ рдХреА рд░рдХреНрд╖рд╛ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рд╢реНрд╡рд╡рд┐рджреНрдпрд╛рд▓рдп рдореЗрдВ рдирд╣реАрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдо рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдЖрдирдВрдж рд▓реЗрддреЗ рд╣реИрдВред  рдФрд░ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЗ рдЗрддрдиреЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИрдВред  рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рд╕реНрд╡рддрдВрддреНрд░ рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рдЕрд░реНрдерд╛рддреН, рдЧреЗрдо рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рд▓рд╛рдЧреВ рдХрд░реЗрдВ рдХрд┐ рджреГрд╢реНрдп рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рдЧреЗрдо рдореИрдХреЗрдирд┐рдХреНрд╕ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рди рдХрд░реЗрдВ, рдФрд░ рдпрджрд┐ рд╡рд╛рдВрдЫрд┐рдд рд╣реЛ рддреЛ рдЧреНрд░рд╛рдлрд┐рдХ рдШрдЯрдХ рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЗрд╕ рдмрд┐рдВрджреБ рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдШрдЯрдХреЛрдВ рдХреЗ рдЖрд░реЗрдЦ рдореЗрдВ рд╡рд┐рд╕реНрддреГрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><div class="spoiler">  <b class="spoiler_title">рд╕рд┐рд╕реНрдЯрдо рдШрдЯрдХ</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/lm/br/br/lmbrbrdoyppboylxuoopjr--d5u.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрдк-рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреА рдкрд╣рдЪрд╛рди рдХреА рд╣реИ рдЬреЛ рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИрдВ рдФрд░, рдЬреИрд╕рд╛ рдХрд┐ рдмрд╛рдж рдореЗрдВ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд╡реЗ рд╕рднреА рдПрдХ-рджреВрд╕рд░реЗ рд╕реЗ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрдВрдЧреЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рд╣реА рдЪрд░рдг рдореЗрдВ, рд╣рдо рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдПрдВрдЧреЗ рдХрд┐ рдореБрдЦреНрдп рдЦреЗрд▓ рдЪрдХреНрд░ рдХреИрд╕рд╛ рджрд┐рдЦреЗрдЧрд╛ (рдпрд╛ рдмрд▓реНрдХрд┐, рдЗрд╕рдХрд╛ рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рд╣рд┐рд╕реНрд╕рд╛ рд╡рд╣ рд╣реИ рдЬреЛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рд╡рд░реНрдгреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рд▓рд┐рдП, рдПрдХ рдЧрддрд┐рд╡рд┐рдзрд┐ рдЖрд░реЗрдЦ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдЧрд░ рдЖрдк рдЦрдбрд╝реЗ рд╣реИрдВ, рддреЛ рдмреИрда рдЬрд╛рдЗрдП</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/o-/f6/ev/o-f6evthl0hpqu0rhwlejbxyhty.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ рдЕрдВрдд рдореЗрдВ, рдПрдХ рдЗрдирдкреБрдЯ-рдЖрдЙрдЯрдкреБрдЯ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рд╛рдорд╛рдиреНрдп рд╢рдмреНрджреЛрдВ рдореЗрдВ рдЧреЗрдо рдЗрдВрдЬрди рдХреЗ рд╕рд╛рде рдЕрдВрддрд┐рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдмрд╛рддрдЪреАрдд рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ред </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реЙрд╕</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/hs/jo/_d/hsjo_dinyd5genlr77jrgz0ouys.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рд╛рдд рд▓рдВрдмреА рд╣реИ, рд╕реБрдмрд╣ рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗред </font><font style="vertical-align: inherit;">рдЯреЗрдмрд▓ рдкрд░ рдмреИрдардиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдЕрдиреНрдп рджреЛ рджрд░реНрдЬрди рдЖрд░реЗрдЦреЛрдВ рдХреЛ рд╢рд╛рдВрддрд┐ рд╕реЗ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░реЗрдВрдЧреЗ - рдореЗрд░рд╛ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░реЛ, рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЙрдирдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдЖрдкрдХреЛ рдЪреБрдиреЗ рд╣реБрдП рдорд╛рд░реНрдЧ рдкрд░ рдмрдиреЗ рд░рд╣рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдЧреА, рдЕрдкрдиреЗ рдЖрддреНрдорд╕рдореНрдорд╛рди рдХреЛ рдмрдврд╝рд╛рдПрдЧреА, рдХрдорд░реЗ рдХреЗ рдЗрдВрдЯреАрд░рд┐рдпрд░ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдЧреА, рд░рдВрдЧреАрди рдкреЛрд╕реНрдЯрд░реЛрдВ рдХреЗ рд╕рд╛рде рд╡реЙрд▓рдкреЗрдкрд░ рд▓рдЯрдХрд╛рдПрдЧреА, рд╕рд╛рде рд╣реА рд╕рд╛рде рдЕрдкрдиреА рджреГрд╖реНрдЯрд┐ рдХреЛ рд╕рд░рд▓ рд╢рдмреНрджреЛрдВ рдореЗрдВ рдмрддрд╛рдПрдЧреАред рд╕рд╛рдереА рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЬреЛ рдЬрд▓реНрдж рд╣реА рдбреНрд░рдо рдореЗрдВ рдЖрдкрдХреЗ рдирдП рд╕реНрдЯреВрдбрд┐рдпреЛ рдХреЗ рджрд░рд╡рд╛рдЬреЗ рдкрд░ рднрд╛рдЧреЗрдВрдЧреЗ (рд╣рдо рд╕рдлрд▓рддрд╛ рдХреЗ рд▓рд┐рдП рд▓рдХреНрд╖реНрдп рдирд╣реАрдВ рд╣реИрдВ, рдпрд╛рдж рд░рдЦреЗрдВ?)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдм рддрдХ рд╣рдо рд╡рд░реНрдЧ рдЖрд░реЗрдЦреЛрдВ (рд╡рд░реНрдЧ) рдХрд╛ рд╣рд╡рд╛рд▓рд╛ рдирд╣реАрдВ рджреЗ рд░рд╣реЗ рд╣реИрдВ, рдЬрд┐рдирд╕реЗ рд╣рдо рд╕рднреА рдкреНрдпрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ - рдХрдХреНрд╖рд╛рдУрдВ рд╕реЗ </font><font style="vertical-align: inherit;">рдмрд╣реБрдд рдХреБрдЫ </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреВрдЯрдиреЗ рдХреА</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдореНрдореАрдж рд╣реИ </font><font style="vertical-align: inherit;">рдФрд░ рдкрд╣рд▓реА рдмрд╛рд░ рдореЗрдВ рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЗ рддреАрди рд╕реНрдХреНрд░реАрди рдореЗрдВ рдЪрд┐рддреНрд░ рдирд╣реАрдВ рдЬреБрдбрд╝реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдЙрдЪрд┐рдд рдЙрдкрддрдВрддреНрд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдкрд░ рдЗрд╕реЗ рдЯреБрдХрдбрд╝реЛрдВ рдореЗрдВ рддреЛрдбрд╝рдирд╛ рдФрд░ рдзреАрд░реЗ-рдзреАрд░реЗ рдЗрд╕реЗ рдмрд╛рд╣рд░ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реЛрддрд╛ рд╣реИред</font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рдЪрд╛рд░ </font><font style="vertical-align: inherit;">рдЙрдкрдХрд░рдг рдЪрдпрди</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рд╣реА рд╕рд╣рдорддрд┐ рд╣реИ, рд╣рдо рдПрдХ рдХреНрд░реЙрд╕-рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдХрд╕рд┐рдд рдХрд░реЗрдВрдЧреЗ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдФрд░ рдореЛрдмрд╛рдЗрд▓ рдЙрдкрдХрд░рдгреЛрдВ рдкрд░ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдбреЗрд╕реНрдХрдЯреЙрдк рдкрд░ рджреЛрдиреЛрдВ рдЪрд▓рддрд╛ рд╣реИред рд╣рдо рдЬрд╛рд╡рд╛ рдХреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЪреБрдиреЗрдВрдЧреЗ, рдФрд░ рдХреЛрдЯрд▓рд┐рди рдФрд░ рднреА рдмреЗрд╣рддрд░ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЙрддреНрддрд░рд╛рд░реНрджреНрдз рдирдпрд╛ рдФрд░ рдирдпрд╛ рд╣реИ, рдФрд░ рдЕрднреА рддрдХ рдЙрд╕ рдЖрдХреНрд░реЛрд╢ рдХреА рд▓рд╣рд░реЛрдВ рдореЗрдВ рддреИрд░рдиреЗ рдХрд╛ рд╕рдордп рдирд╣реАрдВ рд╣реИ, рдЬрд┐рд╕рдиреЗ рдЕрдкрдиреЗ рдкреВрд░реНрд╡рд╡рд░реНрддреА рдХреЛ рдЕрдкрдиреЗ рд╕рд┐рд░ рдХреЗ рд╕рд╛рде рдмрд╣ рджрд┐рдпрд╛ рд╣реИ (рдЙрд╕реА рд╕рдордп рдЖрдк рдЗрд╕реЗ рдкреНрд░рд╢рд┐рдХреНрд╖рд┐рдд рдХрд░реЗрдВрдЧреЗ рдпрджрд┐ рдХреЛрдИ рдЕрдиреНрдп рд╡реНрдпрдХреНрддрд┐ рдирд╣реАрдВ рд╣реИ)ред </font></font><abbr title="Java Virtual Machine"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЗрд╡реАрдПрдо</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, рд╣рд░ рдЬрдЧрд╣ рдЙрдкрд▓рдмреНрдз рд╣реИ (рддреАрди рдмрд┐рд▓рд┐рдпрди рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░, рд╣реЗ), рд╣рдо рд╡рд┐рдВрдбреЛрдЬ рдФрд░ рдпреВрдирд┐рдХреНрд╕ рджреЛрдиреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░реЗрдВрдЧреЗ, рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ рджреВрд░рд╕реНрде рд╕рд░реНрд╡рд░ рдкрд░ рд╣рдо рдПрд╕рдПрд╕рдПрдЪ рдХрдиреЗрдХреНрд╢рди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЦреЗрд▓ рд╕рдХрддреЗ рд╣реИрдВ (рдпрд╣ рдХрд┐рд╕реА рдХреЗ рд▓рд┐рдП рднреА рдЕрдЬреНрдЮрд╛рдд рд╣реИ, рдЬрд┐рд╕реЗ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдо рдРрд╕рд╛ рдЕрд╡рд╕рд░ рдкреНрд░рджрд╛рди рдХрд░реЗрдВрдЧреЗ)ред рдЕрдореАрд░ рд╣реЛрдиреЗ рдФрд░ рдХрд▓рд╛рдХрд╛рд░ рдХреЛ рдирд┐рдпреБрдХреНрдд рдХрд░рдиреЗ рдкрд░ рд╣рдо рдЗрд╕реЗ рдПрдВрдбреНрд░реЙрдЗрдб рдкрд░ рднреА рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рджреЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдмрд╛рдж рдореЗрдВ рдФрд░ рдЕрдзрд┐рдХред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреБрд╕реНрддрдХрд╛рд▓рдп (рд╣рдо рдЙрдирдХреЗ рдмрд┐рдирд╛ рдХрд╣реАрдВ рднреА рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ) рд╣рдо рдЕрдкрдиреА рдХреНрд░реЙрд╕-рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЪреБрдиреЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд╣рдо рдорд╛рд╡реЗрди рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдкреНрд░рдгрд╛рд▓реА рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдпрд╛ рдЧреНрд░реЗрдбрд▓ред </font><font style="vertical-align: inherit;">рдпрд╛ рд╕рднреА рдПрдХ рд╣реА, рдорд╛рд╡реЗрди, рдЪрд▓реЛ рдЗрд╕рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рддреБрд░рдВрдд рдореИрдВ рдЖрдкрдХреЛ рдПрдХ рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рдгрд╛рд▓реА рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ (рдЬреЛ рднреА рдЖрдк рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ), рддрд╛рдХрд┐ рдХрдИ рд╡рд░реНрд╖реЛрдВ рдХреЗ рдмрд╛рдж рдЙрджрд╛рд╕реАрди рднрд╛рд╡рдирд╛рдУрдВ рдХреЗ рд╕рд╛рде рдпрд╛рдж рдХрд░рдирд╛ рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рдП рдХрд┐ рдпрд╣ рдХрд┐рддрдирд╛ рдорд╣рд╛рди рдерд╛ред </font><font style="vertical-align: inherit;">IDE рдкрд░рд┐рдЪрд┐рдд, рдкрд╕рдВрджреАрджрд╛ рдФрд░ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рднреА рдЪреБрдирддреЗ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджрд░рдЕрд╕рд▓, рд╣рдореЗрдВ рдХрд┐рд╕реА рдФрд░ рдЪреАрдЬ рдХреА рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдЖрдк рд╡рд┐рдХрд╛рд╕ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред</font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рдкрд╛рдБрдЪ </font><font style="vertical-align: inherit;">рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдирд╛ рдФрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдирд╛</font></font></font> </h2><br>  рдпрджрд┐ рдЖрдк рдПрдХ рдЖрдИрдбреАрдИ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдмрдирд╛рдирд╛ рддреБрдЪреНрдЫ рд╣реИред  рдЖрдкрдХреЛ рдмрд╕ рд╣рдорд╛рд░реА рднрд╡рд┐рд╖реНрдп рдХреА рдХреГрддрд┐ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╕реЛрдиреЛрд░рд╕ рдирд╛рдо (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <b>рдкрд╛рд╕рд╛</b> ) рдЪреБрдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ рдорд╛рд╡реЗрди рд╕рдорд░реНрдерди рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордд рднреВрд▓рдирд╛, рдФрд░ рдЖрд╡рд╢реНрдпрдХ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛рдУрдВ рдХреЛ <code>pom.xml</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд┐рдЦреЗрдВ: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>my.company<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>dice<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  рдХреЛрдЯрд▓рд┐рди рд╕рдорд░реНрдерди рднреА рдЬреЛрдбрд╝реЗрдВ, рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЧрд╛рдпрдм рд╣реИ: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  рдФрд░ рдХреБрдЫ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдЬреЛ рд╣рдо рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдирд╣реАрдВ рдмрддрд╛рдПрдВрдЧреЗ: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">рд╣рд╛рдЗрдмреНрд░рд┐рдб рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ рдереЛрдбрд╝реА рдЬрд╛рдирдХрд╛рд░реА</b> <div class="spoiler_text">  рдпрджрд┐ рдЖрдк рдЕрдкрдиреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдЬрд╛рд╡рд╛ рдФрд░ рдХреЛрдЯрд▓рд┐рди рджреЛрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ <code>src/main/kotlin</code> , рдЖрдкрдХреЗ рдкрд╛рд╕ <code>src/main/java</code> рдлрд╝реЛрд▓реНрдбрд░ рднреА рд╣реЛрдЧрд╛ред  рдХреЛрдЯрд▓рд┐рди рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХрд╛ рджрд╛рд╡рд╛ рд╣реИ рдХрд┐ рдкрд╣рд▓реЗ рдлрд╝реЛрд▓реНрдбрд░ ( <code>*.kt</code> ) рд╕реЗ рд╕реНрд░реЛрдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рджреВрд╕рд░реЗ рдлрд╝реЛрд▓реНрдбрд░ ( <code>*.java</code> ) рд╕реЗ рд╕реНрд░реЛрдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдкрд╣рд▓реЗ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдЗрд╕рд▓рд┐рдП рджреГрдврд╝рддрд╛ рд╕реЗ рдЕрдиреБрд╢рдВрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдк рдорд╛рдирдХ рдорд╛рд╡реЗрди рд▓рдХреНрд╖реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдмрджрд▓ рджреЗрдВ: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-maven-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>process-sources<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/main/kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/main/java<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>test-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>test-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/test/kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span>${project.basedir}/src/test/java<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDir</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.maven.plugins<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-compiler-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>3.5.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Replacing default-compile --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>default-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>none<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- Replacing default-testCompile --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>default-testCompile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>none<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>java-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>java-test-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>test-compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>testCompile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  рдореИрдВ рдпрд╣ рдирд╣реАрдВ рдХрд╣ рд╕рдХрддрд╛ рдХрд┐ рдпрд╣ рдХрд┐рддрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ - рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдВ рдЗрд╕ рд╢реАрдЯ рдХреЗ рдмрд┐рдирд╛ рдХрд╛рдлреА рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЪрд▓ рд░рд╣реА рд╣реИрдВред  рд▓реЗрдХрд┐рди рд╕рд┐рд░реНрдл рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдкрдХреЛ рдЪреЗрддрд╛рд╡рдиреА рджреА рдЬрд╛рддреА рд╣реИред <br></div></div><br>  рдЖрдЗрдП рдПрдХ рд╣реА рдмрд╛рд░ рдореЗрдВ рддреАрди рдкреИрдХреЗрдЬ рдмрдирд╛рдПрдВ (рдХреНрдпреЛрдВ рдХреБрдЫ рдХреЛ рд░реМрдВрджреЗрдВ?): <br><br><ul><li>  <code>model</code> - рдЙрди рд╡рд░реНрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдЬреЛ рдЦреЗрд▓ рдХреА рджреБрдирд┐рдпрд╛ рдХреА рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВ; </li><li>  <code>game</code> - рдЧреЗрдордкреНрд▓реЗ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рд╡рд╛рд▓реА рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рд▓рд┐рдП; </li><li>  <code>ui</code> - рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрд╛рддрдЪреАрдд рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╡рд░реНрдЧреЛрдВ рдХреЗ рд▓рд┐рдПред </li></ul><br>  рдЙрддреНрддрд░рд╛рд░реНрджреНрдз рдореЗрдВ рдХреЗрд╡рд▓ рдЗрдВрдЯрд░рдлреЗрд╕ рд╣реЛрдВрдЧреЗ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рд╣рдо рдЗрдирдкреБрдЯ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдбреЗрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред  рд╣рдо рдПрдХ рдЕрд▓рдЧ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░реЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдмрд╛рдж рдореЗрдВ рдЙрд╕ рдкрд░ рдФрд░ рдЕрдзрд┐рдХред  рдЗрд╕ рдмреАрдЪ, рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕реНрдкреНрд░реЗ рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдЗрди рд╡рд░реНрдЧреЛрдВ рдХреЛ рдпрд╣рд╛рдВ рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗ, рдХрдВрдзреЗ рд╕реЗ рдХрдВрдзрд╛ рдорд┐рд▓рд╛рдХрд░ред <br><br>  рддреБрд░рдВрдд рдЗрд╕реЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рди рдХрд░реЗрдВ: рдкреИрдХреЗрдЬ рдХреЗ рдирд╛рдореЛрдВ, рдЗрдВрдЯрд░рдлреЗрд╕, рдХрдХреНрд╖рд╛рдУрдВ рдФрд░ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рд╡рд┐рд╡рд░рдг рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЛрдЪреЗрдВ;  рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЖрдкрд╕ рдореЗрдВ рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рдкрд░рд╕реНрдкрд░ рд╕рдВрдкрд░реНрдХ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ - рдпрд╣ рд╕рдм рдмрджрд▓ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдПрдХ рджрд░реНрдЬрди рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ред  рдЬреИрд╕реЗ-рдЬреИрд╕реЗ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛрддреА рд╣реИ, рдЖрдкрдХреЛ рдмрд╣реБрдд рд╕реА рдЪреАрдЬреЗрдВ рдмрджрд╕реВрд░рдд, рднрд╛рд░реА рд▓рдЧрдиреЗ рд▓рдЧреЗрдВрдЧреА, рдЖрдк рдХреЗ рд▓рд┐рдП рдЕрдкреНрд░рднрд╛рд╡реА рдФрд░ рдЬреИрд╕реЗ - рдЙрдиреНрд╣реЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рдорд╣рд╕реВрд╕ рдХрд░реЗрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЖрдзреБрдирд┐рдХ рдЖрдИрдбреАрдИ рдореЗрдВ рд░рд┐рдлреИрдХреНрдЯрд┐рдВрдЧ рдПрдХ рдмрд╣реБрдд рд╣реА рд╕рд╕реНрддрд╛ рдСрдкрд░реЗрд╢рди рд╣реИред <br><br>  рд╣рдо <code>main</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд░реНрдЧ рднреА рдмрдирд╛рдПрдВрдЧреЗ рдФрд░ рд╣рдо рдорд╣рд╛рди рдЙрдкрд▓рдмреНрдзрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВред  рдЖрдк рд▓реЙрдиреНрдЪ рдХреЗ рд▓рд┐рдП рдЦреБрдж рдЖрдИрдбреАрдИ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдмрд╛рдж рдореЗрдВ рджреЗрдЦреЗрдВрдЧреЗ, рдпрд╣ рд╡рд┐рдзрд┐ рд╣рдорд╛рд░реЗ рдЙрджреНрджреЗрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИ (рдорд╛рдирдХ рдЖрдИрдбреАрдИ рдХрдВрд╕реЛрд▓ рд╣рдорд╛рд░реЗ рдЧреНрд░рд╛рдлрд┐рдХрд▓ рдирд┐рд╖реНрдХрд░реНрд╖реЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП), рдЗрд╕рд▓рд┐рдП рд╣рдо рдмреИрдЪ (рдпрд╛ рдпреВрдирд┐рдХреНрд╕ рд╕рд┐рд╕реНрдЯрдо рдкрд░ рд╢реЗрд▓) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓реЙрдиреНрдЪ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВрдЧреЗред рдлрд╝рд╛рдЗрд▓ред  рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдХреБрдЫ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реЗрдЯрд┐рдВрдЧ рдХрд░реЗрдВрдЧреЗред <br><br>  <code>mvn package</code> рдСрдкрд░реЗрд╢рди рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдореЗрдВ рд╕рднреА рд╕рдВрдХрд▓рд┐рдд рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рд╕рд╛рде JAR рдЖрд░реНрдХрд╛рдЗрд╡ рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ рдорд┐рд▓рддрд╛ рд╣реИред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдЗрд╕ рд╕рдВрдЧреНрд░рд╣ рдореЗрдВ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдирд┐рд░реНрднрд░рддрд╛ рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реИ (рдЕрдм рддрдХ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЙрдирдХреЗ рдкрд╛рд╕ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╡реЗ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗ)ред  рджреВрд╕рд░реЗ, <code>main</code> рд╡рд┐рдзрд┐ рд╕реЗ рдпреБрдХреНрдд рдореБрдЦреНрдп рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП рдкрде рд╕рдВрдЧреНрд░рд╣ рдореЗрдирд┐рдлрд╝реЗрд╕реНрдЯ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо <code>java -jar dice-1.0.jar</code> рд╕рд╛рде рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╢реБрд░реВ <code>java -jar dice-1.0.jar</code> рдирд╣реАрдВ рд╣реЛрдВрдЧреЗред  <code>pom.xml</code> рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдЬреЛрдбрд╝рдХрд░ рдЗрд╕реЗ рдареАрдХ рдХрд░реЗрдВ: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-assembly-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>single<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRefs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRef</span></span></span><span class="hljs-tag">&gt;</span></span>jar-with-dependencies<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRef</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRefs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mainClass</span></span></span><span class="hljs-tag">&gt;</span></span>my.company.dice.MainKt<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mainClass</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  рдореБрдЦреНрдп рд╡рд░реНрдЧ рдХреЗ рдирд╛рдо рдкрд░ рдзреНрдпрд╛рди рджреЗрдВред  рдХреЛрдЯрд▓рд┐рди рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рдмрд╛рд╣рд░ рдирд┐рд╣рд┐рдд (рдЬреИрд╕реЗ <code>main</code> рдХрд╛рд░реНрдп), рдХрдХреНрд╖рд╛рдПрдВ рд╡реИрд╕реЗ рднреА рд╕рдВрдХрд▓рди рдХреЗ рджреМрд░рд╛рди рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИрдВ (рдХреНрдпреЛрдВрдХрд┐ рдЬреЗрд╡реАрдПрдо рдХреБрдЫ рднреА рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рд╣реИ рдФрд░ рдЬрд╛рдирдирд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддрд╛ рд╣реИ)ред  рдЗрд╕ рд╡рд░реНрдЧ рдХрд╛ рдирд╛рдо <code>Kt</code> рд╕рд╛рде рдлрд╛рдЗрд▓ рдХрд╛ рдирд╛рдо рд╣реИред  рдпрд╣реА рд╣реИ, рдЕрдЧрд░ рдЖрдкрдиреЗ рдореБрдЦреНрдп рд╡рд░реНрдЧ рдХрд╛ рдирд╛рдо рдореЗрди рд░рдЦрд╛ рд╣реИ, рддреЛ рдЗрд╕реЗ <code>MainKt.class</code> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдпрд╣ рдкрд┐рдЫрд▓реЗ рдПрдХ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдореЗрдВ рдЬрд╛рд░ рдлрд╝рд╛рдЗрд▓ рдХреЗ рдкреНрд░рдХрдЯ рд╣реЛрдиреЗ рдореЗрдВ рдЗрдВрдЧрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рдЕрдм, рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рддреЗ рд╕рдордп, рд╣рдореЗрдВ рдЖрдЙрдЯрдкреБрдЯ рдкрд░ рджреЛ рдЬрд╛рд░ рдлрд╛рдЗрд▓реЗрдВ <code>dice-1.0.jar</code> : <code>dice-1.0.jar</code> рдФрд░ <code>dice-1.0-jar-with-dependencies.jar</code> ред  рд╣рдо рджреВрд╕рд░реЗ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВред  рд╣рдо рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рд▓реЙрдиреНрдЪ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦреЗрдВрдЧреЗред <br><br>  <b>dice.bat</b> (рд╡рд┐рдВрдбреЛрдЬ рдХреЗ рд▓рд┐рдП) <br><br><pre> <code class="dos hljs">@<span class="hljs-built_in"><span class="hljs-built_in">ECHO</span></span> OFF <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span> Compiling <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> "path_to_maven\mvn.bat" -f "path_to_project\Dice\pom.xml" package <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">errorlevel</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> Project compilation failed! &amp; <span class="hljs-built_in"><span class="hljs-built_in">pause</span></span> &amp; <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :EOF <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span> Running java -jar path_to_project\Dice\target\dice-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-jar-with-dependencies.jar <span class="hljs-built_in"><span class="hljs-built_in">pause</span></span></code> </pre><br>  <b>dice.sh</b> (UNIX рдХреЗ рд▓рд┐рдП) <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # Compiling mvn -f "path_to_project/Dice/pom.xml" package if [[ "$?" -ne 0 ]] ; then echo 'Project compilation failed!'; exit $rc fi # Running java -jar path_to_project/Dice/target/dice-1.0-jar-with-dependencies.jar</span></span></code> </pre><br>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдпрджрд┐ рд╕рдВрдХрд▓рди рд╡рд┐рдлрд▓ рд░рд╣рддрд╛ рд╣реИ, рддреЛ рд╣рдо рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдмрд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рд╣реИрдВред  рдЕрдиреНрдпрдерд╛, рдЕрдВрддрд┐рдо рд╡реАрдгрд╛ рдХреЛ рд▓реЙрдиреНрдЪ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдкрд┐рдЫрд▓реА рд╕рдлрд▓ рдЕрд╕реЗрдВрдмрд▓реА рд╕реЗ рдмрдЪреА рд╣реБрдИ рдлрд╝рд╛рдЗрд▓ (рдХрднреА-рдХрднреА рд╣рдореЗрдВ рдЕрдВрддрд░ рднреА рдкрддрд╛ рдирд╣реАрдВ рдЪрд▓рддрд╛)ред  рдЕрдХреНрд╕рд░, рдбреЗрд╡рд▓рдкрд░ рдкрд╣рд▓реЗ рд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП <code>mvn clean package</code> рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдкреВрд░реА рд╕рдВрдХрд▓рди рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣рдореЗрд╢рд╛ рдмрд╣реБрдд рд╢реБрд░реБрдЖрдд рд╕реЗ рд╢реБрд░реВ рд╣реЛрдЧреА (рднрд▓реЗ рд╣реА рд╕реНрд░реЛрдд рдХреЛрдб рдирд╣реАрдВ рдмрджрд▓рд╛ рдЧрдпрд╛ рд╣реЛ), рдЬрд┐рд╕рдореЗрдВ рдмрд╣реБрдд рд╕рдордп рд▓рдЧреЗрдЧрд╛ред  рд▓реЗрдХрд┐рди рд╣рдо рдЗрдВрддрдЬрд╛рд░ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ - рд╣рдореЗрдВ рдПрдХ рдЦреЗрд▓ рдмрдирд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред <br><br>  рддреЛ, рдкрд░рд┐рдпреЛрдЬрдирд╛ рдареАрдХ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рдХреБрдЫ рднреА рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдЪрд┐рдВрддрд╛ рди рдХрд░реЗрдВ, рд╣рдо рдЗрд╕реЗ рдЬрд▓реНрдж рд╣реА рдареАрдХ рдХрд░ рд▓реЗрдВрдЧреЗред <br><br><h2>  <font color="#0474a0">рдЪрд░рдг рдЫрд╣</font>  <font color="#0474a0">рдореБрдЦреНрдп рд╡рд╕реНрддреБрдПрдВ</font> </h2><br>  рдзреАрд░реЗ-рдзреАрд░реЗ, рд╣рдо рдЧреЗрдордкреНрд▓реЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рд╕рд╛рде <code>model</code> рдкреИрдХреЗрдЬ рднрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдВрдЧреЗред <br><br><div class="spoiler">  <b class="spoiler_title">рд╡рд░реНрдЧ рдЖрд░реЗрдЦ</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/lv/de/4t/lvde4t7282puwgyjgl6qrooazka.png"></a> <br></div></div><br>  рдХреНрдпреВрдмреНрд╕ рд╣рдорд╛рд░реЗ рд╕рдм рдХреБрдЫ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдкрд╣рд▓реЗ рдЬреЛрдбрд╝реЗрдВред  рдкреНрд░рддреНрдпреЗрдХ рдбрд╛рдИ ( <code>Die</code> рд╡рд░реНрдЧ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг) рдЗрд╕рдХреЗ рдкреНрд░рдХрд╛рд░ (рд░рдВрдЧ) рдФрд░ рдЖрдХрд╛рд░ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИред  рдХреНрдпреВрдм рдХреЗ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рдЕрд▓рдЧ рдПрдиреНрдпреВрдорд░реЗрд╢рди ( <code>Die.Type</code> ) <code>Die.Type</code> , 4 рд╕реЗ 12 рддрдХ рдкреВрд░реНрдгрд╛рдВрдХ рдХреЗ рд╕рд╛рде рдЖрдХрд╛рд░ рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдВрдЧреЗред рд╣рдо <code>roll()</code> рд╡рд┐рдзрд┐ рдХреЛ рднреА рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рдХреНрдпреВрдм (1 рд╕реЗ рдЖрдХрд╛рд░ рдорд╛рди рд╕рдорд╛рд╡реЗрд╢реА) рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╕реАрдорд╛ рд╕реЗ рдПрдХ рдордирдорд╛рдирд╛, рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╡рд┐рддрд░рд┐рдд рд╕рдВрдЦреНрдпрд╛ рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░реЗрдЧрд╛ред <br><br>  рд╡рд░реНрдЧ <code>Comparable</code> рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ <code>Comparable</code> рдХреНрдпреВрдмреНрд╕ рдХреА рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рддреБрд▓рдирд╛ рдХреА рдЬрд╛ рд╕рдХреЗ (рдЙрдкрдпреЛрдЧреА рдмрд╛рдж рдореЗрдВ рдЬрдм рд╣рдо рдПрдХ рдЖрджреЗрд╢рд┐рдд рдкрдВрдХреНрддрд┐ рдореЗрдВ рдХрдИ рдХреНрдпреВрдмреНрд╕ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВрдЧреЗ)ред  рдмрдбрд╝реЗ рдХреНрдпреВрдмреНрд╕ рдХреЛ рдкрд╣рд▓реЗ рд░рдЦрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Die</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Type, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> size: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>) : Comparable&lt;Die&gt; { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span></span>{ PHYSICAL, <span class="hljs-comment"><span class="hljs-comment">//Blue SOMATIC, //Green MENTAL, //Purple VERBAL, //Yellow DIVINE, //Cyan WOUND, //Gray ENEMY, //Red VILLAIN, //Orange OBSTACLE, //Brown ALLY //White } fun roll() = (1.. size).random() override fun toString() = "d$size" override fun compareTo(other: Die): Int { return compareValuesBy(this, other, Die::type, { -it.size }) } }</span></span></code> </pre><br>  рдзреВрд▓ рдЗрдХрдЯреНрдард╛ рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХреНрдпреВрдмреНрд╕ рдХреЛ рд╣реИрдВрдбрдмреИрдЧ ( <code>Bag</code> рдХреНрд▓рд╛рд╕ рдХреА рдкреНрд░рддрд┐рдпрд╛рдВ) рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдХреЛрдИ рдХреЗрд╡рд▓ рдЕрдиреБрдорд╛рди рд▓рдЧрд╛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдмреИрдЧ рдХреЗ рдЕрдВрджрд░ рдХреНрдпрд╛ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП, рдпрд╣ рдПрдХ рд╕рдВрдЧреНрд░рд╣ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред  рд▓рдЧрддрд╛ рд╣реИред  рд╕реЗрдЯ (рд╕реЗрдЯ) рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЙрд╕ рд╡рд┐рдЪрд╛рд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХреА рд╣рдореЗрдВ рдЬрд╝рд░реВрд░рдд рд╣реИ, рд▓реЗрдХрд┐рди рджреЛ рдХрд╛рд░рдгреЛрдВ рд╕реЗ рдлрд┐рдЯ рдирд╣реАрдВ рд╣реИред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдЖрдкрдХреЛ <code>equals()</code> рдФрд░ <code>hashCode()</code> рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдФрд░ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рдХрд┐, рдХреНрдпреВрдмреНрд╕ рдХреЗ рдкреНрд░рдХрд╛рд░ рдФрд░ рдЖрдХрд╛рд░ рдХреА рддреБрд▓рдирд╛ рдХрд░рдирд╛ рдЧрд▓рдд рд╣реИ - рд╣рдорд╛рд░реЗ рд╕реЗрдЯ рдореЗрдВ рдХрд┐рд╕реА рднреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╕рдорд╛рди рдХреНрдпреВрдмреНрд╕ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рджреВрд╕рд░реЗ, рдХреНрдпреВрдм рдХреЛ рдмреИрдЧ рд╕реЗ рдмрд╛рд╣рд░ рдЦреАрдВрдЪрдХрд░, рд╣рдо рдЙрдореНрдореАрдж рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╣рд░ рдмрд╛рд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдиреЙрди-рдбрд┐рд╕реЗрдВрдЯрд┐рд╡ рди рд╣реЛ, рдмрд▓реНрдХрд┐ рд░реИрдВрдбрдо рд╣реЛред  рдЗрд╕рд▓рд┐рдП, рдореИрдВ рдЖрдкрдХреЛ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдПрдХ рдЖрджреЗрд╢рд┐рдд рд╕рдВрдЧреНрд░рд╣ (рд╕реВрдЪреА) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдФрд░ рд╣рд░ рдмрд╛рд░ рдЬрдм рдЖрдк рдХреЛрдИ рдирдпрд╛ рддрддреНрд╡ ( <code>put()</code> рд╡рд┐рдзрд┐) рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рдпрд╛ рдЬрд╛рд░реА рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ ( <code>draw()</code> рд╡рд┐рдзрд┐) рдореЗрдВ рдлреЗрд░рдмрджрд▓ рдХрд░рддреЗ рд╣реИрдВред <br><br>  <code>examine()</code> рд╡рд┐рдзрд┐ рдЙрди рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ рдЬрдм рдЕрдирд┐рд╢реНрдЪрд┐рддрддрд╛ рд╕реЗ рдердХрд╛ рд╣реБрдЖ рдЦрд┐рд▓рд╛рдбрд╝реА рджрд┐рд▓реЛрдВ рдореЗрдВ рдореЗрдЬ рдкрд░ рдмреИрдЧ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рд╣рд┐рд▓рд╛рддрд╛ рд╣реИ (рдЫрдВрдЯрд╛рдИ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ), рдФрд░ <code>clear()</code> рд╡рд┐рдзрд┐ - рдЕрдЧрд░ рд╣рд┐рд▓рд╛рдиреЗ рд╡рд╛рд▓реЗ рдХреНрдпреВрдмреНрд╕ рдмреИрдЧ рдореЗрдВ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдЖрддреЗ рд╣реИрдВред <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bag</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dice = LinkedList&lt;Die&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> size <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = dice.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">put</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">vararg</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dice: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { dice.forEach(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dice::addLast) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.dice.shuffle() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">draw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Die = dice.pollFirst() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = dice.clear() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">examine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = dice.sorted().toList() }</code> </pre><br>  рдХреНрдпреВрдмреНрд╕ рдХреЗ рд╕рд╛рде рдмреИрдЧ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдкрдХреЛ рдХреНрдпреВрдмреНрд╕ ( <code>Pile</code> рдХреНрд▓рд╛рд╕ рдХреЗ рдЙрджрд╛рд╣рд░рдг) рдХреЗ рд╕рд╛рде рдвреЗрд░ рднреА рдЪрд╛рд╣рд┐рдПред  рдкрд╣рд▓реЗ рд╕реЗ, рджреВрд╕рд░реЗ рд╡рд╛рд▓реЗ рдЕрд▓рдЧ рд╣реИрдВ рдХрд┐ рдЙрдирдХреА рд╕рд╛рдордЧреНрд░реА рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЛ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИ, рдФрд░ рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдвреЗрд░ рд╕реЗ рдПрдХ рдбрд╛рдИ рд╣рдЯрд╛ рджреЗрдВ, рдЦрд┐рд▓рд╛рдбрд╝реА рдмреНрдпрд╛рдЬ рдХреА рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд╡реГрддреНрддрд┐ рдХрд╛ рдЪрдпрди рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рд╣рдо рдЗрд╕ рд╡рд┐рдЪрд╛рд░ рдХреЛ <code>removeDie()</code> рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВред <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Pile</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bag</span></span></span></span>() { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeDie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = dice.remove(die) }</code> </pre><br>  рдЕрдм рд╣рдо рдЕрдкрдиреЗ рдореБрдЦреНрдп рдкрд╛рддреНрд░реЛрдВ - рдирд╛рдпрдХреЛрдВ рдХреА рдУрд░ рдореБрдбрд╝рддреЗ рд╣реИрдВред  рдпрд╣реА рд╣реИ, рдРрд╕реЗ рдЪрд░рд┐рддреНрд░ рдЬрд┐рдиреНрд╣реЗрдВ рд╣рдо рдЕрдм рдирд╛рдпрдХ рдХрд╣реЗрдВрдЧреЗ (рдЬрд╛рд╡рд╛ рдореЗрдВ <code>Character</code> рдирд╛рдо рдХреЗ рд╕рд╛рде рдЖрдкрдХреА рдХрдХреНрд╖рд╛ рдХреЛ рдирд╣реАрдВ рдмреБрд▓рд╛рдиреЗ рдХрд╛ рдПрдХ рдЕрдЪреНрдЫрд╛ рдХрд╛рд░рдг рд╣реИ)ред  рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рд╡рд░реНрдг рд╣реИрдВ (рдЗрд╕реЗ рдХрдХреНрд╖рд╛рдУрдВ рдореЗрдВ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рд╢рдмреНрдж <code>class</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИ), рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдХрд╛рдордХрд╛рдЬреА рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдХреЗ рд▓рд┐рдП рд╣рдореЗрдВ рдХреЗрд╡рд▓ рджреЛ рд▓реЗрдиреЗ рд╣реЛрдВрдЧреЗ: <i>рдмреНрд░реЙрд▓рд░</i> (рдЬреЛ рдХрд┐ рддрд╛рдХрдд рдФрд░ рддрд╛рдХрдд рдкрд░ рдЬреЛрд░ рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рд▓рдбрд╝рд╛рдХреВ рд╣реИ) рдФрд░ <i>рд╣рдВрдЯрд░</i> (рдЙрд░реНрдл рд░реЗрдВрдЬрд░ / рдЪреЛрд░, рдЬреЛрд░ рдХреЗ рд╕рд╛рде) рдирд┐рдкреБрдгрддрд╛ рдФрд░ рдЪреБрдкрдХреЗ)ред  рдирд╛рдпрдХ рдХрд╛ рд╡рд░реНрдЧ рдЙрд╕рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ, рдХреМрд╢рд▓ рдФрд░ рдХреНрдпреВрдмреНрд╕ рдХреЗ рд╢реБрд░реБрдЖрддреА рд╕реЗрдЯ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЬреИрд╕рд╛ рдХрд┐ рдмрд╛рдж рдореЗрдВ рджреЗрдЦрд╛ рдЬрд╛рдПрдЧрд╛, рдирд╛рдпрдХреЛрдВ рдХреЛ рдХрдбрд╝рд╛рдИ рд╕реЗ рдХрдХреНрд╖рд╛рдУрдВ рдореЗрдВ рдмрд╛рдВрдзрд╛ рдирд╣реАрдВ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдЗрд╕рд▓рд┐рдП рдЙрдирдХреА рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдПрдХ рд╣реА рд╕реНрдерд╛рди рдкрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рд╣рдо рдбрд┐рдЬрд╛рдЗрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдирд╛рдпрдХ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдЧреБрдг рдЬреЛрдбрд╝реЗрдВрдЧреЗ: рдирд╛рдо, рдкрд╕рдВрджреАрджрд╛ рдкреНрд░рдХрд╛рд░ рдХреЗ рдХреНрдпреВрдм, рдХреНрдпреВрдм рд╕реАрдорд╛рдПрдВ, рдХреМрд╢рд▓ рд╕реАрдЦрд╛ рдФрд░ рдмрд┐рдирд╛ рдкрдврд╝реЗ, рд╣рд╛рде, рдмреИрдЧ рдФрд░ рд░реАрд╕реЗрдЯ рдХреЗ рд▓рд┐рдП рдвреЗрд░ред  рд╕рдВрдЧреНрд░рд╣ рдЧреБрдгреЛрдВ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреА рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВред  рд╕рднреНрдп рджреБрдирд┐рдпрд╛ рднрд░ рдореЗрдВ, рд╡рд╕реНрддреБ рдХреЗ рдЕрдВрджрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рд╕рдВрдЧреНрд░рд╣реЛрдВ рдХреЗ рд▓рд┐рдП рдЖрдЙрдЯрд╡рд░реНрдб рдПрдХреНрд╕реЗрд╕ (рдПрдХ рдЧреЗрдЯреНрдЯрд░ рдХреА рдорджрдж рд╕реЗ) рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рдмреБрд░рд╛ рд░реВрдк рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ - рдмреЗрдИрдорд╛рди рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд╡рд░реНрдЧ рдХреЗ рдЬреНрдЮрд╛рди рдХреЗ рдмрд┐рдирд╛ рдЗрди рд╕рдВрдЧреНрд░рд╣реЛрдВ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдмрджрд▓рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдВрдЧреЗред  рдЗрд╕рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рддрддреНрд╡реЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдФрд░ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реИ, рдЙрдирдХреА рд╕рдВрдЦреНрдпрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдФрд░ рд╕реВрдЪрдХрд╛рдВрдХ рджреНрд╡рд╛рд░рд╛ рдПрдХреНрд╕реЗрд╕ рдХрд░рдирд╛ рд╣реИред  рдЖрдк рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреЛ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рд╕рдВрдЧреНрд░рд╣ рдХреЛ рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреА рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ - рддрддреНрд╡реЛрдВ рдХреА рдПрдХ рдЫреЛрдЯреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рдпрд╣ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдХреЗрд╡рд▓ рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд░рд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИред <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hero</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Type) { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span></span>{ BRAWLER HUNTER } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isAlive = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> favoredDieType: Die.Type = Die.Type.ALLY <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> hand = Hand(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bag: Bag = Bag() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> discardPile: Pile = Pile() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> diceLimits = mutableListOf&lt;DiceLimit&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> skills = mutableListOf&lt;Skill&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dormantSkills = mutableListOf&lt;Skill&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addDiceLimit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(limit: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DiceLimit</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = diceLimits.add(limit) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiceLimits</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;DiceLimit&gt; = Collections.unmodifiableList(diceLimits) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(skill: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Skill</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = skills.add(skill) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSkills</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Skill&gt; = Collections.unmodifiableList(skills) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addDormantSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(skill: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Skill</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = dormantSkills.add(skill) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDormantSkills</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Skill&gt; = Collections.unmodifiableList(dormantSkills) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">increaseDiceLimit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { diceLimits.find { it.type == type }?.let { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { it.current &lt; it.maximal -&gt; it.current++ <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Already at maximum"</span></span>) } } ?: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Incorrect type specified"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hideDieFromHand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { bag.put(die) hand.removeDie(die) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">discardDieFromHand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { discardPile.put(die) hand.removeDie(die) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Skill</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = skills.any { it.type == type } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">improveSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Skill</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { dormantSkills .find { it.type == type } ?.let { skills.add(it) dormantSkills.remove(it) } skills .find { it.type == type } ?.let { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { it.level &lt; it.maxLevel -&gt; it.level += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Skill already maxed out"</span></span>) } } ?: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Skill not found"</span></span>) } }</code> </pre><br>  рдирд╛рдпрдХ рдХреЗ рд╣рд╛рде (рдЙрд╕ рд╕рдордп рдЙрд╕рдХреЗ рдкрд╛рд╕ рдЬреЛ рдХреНрдпреВрдмреНрд╕ рд╣реИрдВ) рдПрдХ рдЕрд▓рдЧ рд╡рд╕реНрддреБ ( <code>Hand</code> рдХреНрд▓рд╛рд╕) рджреНрд╡рд╛рд░рд╛ рд╡рд░реНрдгрд┐рдд рд╣реИред  рдореБрдЦреНрдп рд╣рд╛рде рд╕реЗ рд╕рдВрдмрджреНрдз рдХреНрдпреВрдмреНрд╕ рдХреЛ рдЕрд▓рдЧ рд░рдЦрдиреЗ рдХрд╛ рдбрд┐рдЬрд╝рд╛рдЗрди рдирд┐рд░реНрдгрдп рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рджрд┐рдорд╛рдЧ рдореЗрдВ рдЖрдпрд╛ рдерд╛ред  рдкрд╣рд▓реЗ рддреЛ рдпрд╣ рдПрдХ рд╕реБрдкрд░-рдХреВрд▓ рдлреАрдЪрд░ рдХреА рддрд░рд╣ рд▓рдЧ рд░рд╣рд╛ рдерд╛, рд▓реЗрдХрд┐рди рдмрд╛рдж рдореЗрдВ рдЗрд╕рдиреЗ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╕рдорд╕реНрдпрд╛рдПрдВ рдФрд░ рдЕрд╕реБрд╡рд┐рдзрд╛рдПрдБ рдЙрддреНрдкрдиреНрди рдХреАрдВред  рдлрд┐рд░ рднреА, рд╣рдо рдЖрд╕рд╛рди рддрд░реАрдХреЛрдВ рдХреА рддрд▓рд╛рд╢ рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдФрд░ рдЗрд╕рд▓рд┐рдП <code>dice</code> рдФрд░ <code>allies</code> рд╕реВрдЪрд┐рдпрд╛рдВ рд╣рдорд╛рд░реА рд╕реЗрд╡рд╛ рдореЗрдВ рд╣реИрдВ, рдЙрди рд╕рднреА рддрд░реАрдХреЛрдВ рдХреЗ рд╕рд╛рде рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдкрдХреЛ рдЬреЛрдбрд╝рдиреЗ, рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдФрд░ рд╣рдЯрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдЙрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рд╕рдордЭрджрд╛рд░реА рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рджреЛрдиреЛрдВ рд╕реВрдЪрд┐рдпреЛрдВ рдореЗрдВ рд╕реЗ рдХрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИ)ред  рдЬрдм рдЖрдк рдЕрдкрдиреЗ рд╣рд╛рде рд╕реЗ рдПрдХ рдХреНрдпреВрдм рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВ, рддреЛ рдмрд╛рдж рдХреЗ рд╕рднреА рдХреНрдпреВрдмреНрд╕ рд╕реВрдЪреА рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рдЪрд▓реЗ рдЬрд╛рдПрдВрдЧреЗ, рд░рд┐рдХреНрдд рд╕реНрдерд╛рди рдХреЛ рднрд░рддреЗ рд╣реБрдП - рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдпрд╣ рдЦреЛрдЬ рдХреЛ рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдмрдирд╛рдПрдЧрд╛ ( <code>null</code> рд╕рд╛рде рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдХреЛрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ)ред <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hand</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> capacity: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dice = LinkedList&lt;Die&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allies = LinkedList&lt;Die&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = dice.size <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allyDieCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = allies.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dieAt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { (index <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> until dieCount) -&gt; dice[index] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allyDieAt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { (index <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> until allyDieCount) -&gt; allies[index] <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addDie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { die.type == Die.Type.ALLY -&gt; allies.addLast(die) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; dice.addLast(die) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeDie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { die.type == Die.Type.ALLY -&gt; allies.remove(die) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; dice.remove(die) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findDieOfType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Die? = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (type) { Die.Type.ALLY -&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (allies.isNotEmpty()) allies.first <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; dice.firstOrNull { it.type == type } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">examine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Die&gt; = (dice + allies).sorted() }</code> </pre><br>  <code>DiceLimit</code> рд╡рд░реНрдЧ рдХреА рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рд╕рдВрдЧреНрд░рд╣ рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХрд╛рд░ рдХреЗ рдХреНрдпреВрдмреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рд╕реАрдорд╛ <code>DiceLimit</code> рд╣реИ рдЬреЛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдирд╛рдпрдХ рдХреЗ рдкрд╛рд╕ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдХрд╣рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рд╡рд┐рд╢реЗрд╖ рдирд╣реАрдВ рд╣реИ, рд╣рдо рд╢реБрд░реВ рдореЗрдВ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХрд╛рд░ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХрддрдо рдФрд░ рд╡рд░реНрддрдорд╛рди рдорд╛рдиред <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiceLimit</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Die.Type, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initial: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> maximal: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> current: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>)</code> </pre><br>  рд▓реЗрдХрд┐рди рдХреМрд╢рд▓ рдХреЗ рд╕рд╛рде рдпрд╣ рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИред  рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ (рдЬрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдж рдореЗрдВ) рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рд╣рдо рдХреЗрд╡рд▓ рджреЛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ: <i>рд╣рд┐рдЯ</i> рдФрд░ <i>рд╢реВрдЯ</i> (рдХреНрд░рдорд╢рдГ рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ)ред  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рд╕реЗ рдЕрдзрд┐рдХрддрдо рд╕реНрддрд░ рддрдХ рдХреМрд╢рд▓ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ ("рдкрдВрдк"), рдЬреЛ рдЕрдХреНрд╕рд░ рдкрд╛рд╕рд╛ рдХреЗ рд░реЛрд▓ рдореЗрдВ рдЬреЛрдбрд╝реЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрд╢реЛрдзрдХ рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдЧреБрдг <code>level</code> , <code>maxLevel</code> <code>level</code> , <code>modifier1</code> рдФрд░ <code>modifier2</code> рдореЗрдВ <code>maxLevel</code> рд╣реИред <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Skill</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Type) { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//Brawler HIT, //Hunter SHOOT, } var level = 1 var maxLevel = 3 var isActive = true var modifier1 = 0 var modifier2 = 0 }</span></span></code> </pre><br>  <code>Hero</code> рд╡рд░реНрдЧ рдХреЗ рд╕рд╣рд╛рдпрдХ рддрд░реАрдХреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ, рдЬреЛ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рд╣рд╛рде рд╕реЗ рдорд░рдиреЗ рдХреЛ рдЫрд┐рдкрд╛рдиреЗ рдпрд╛ рд░реЛрд▓ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдХреНрдпрд╛ рдирд╛рдпрдХ рдХреЗ рдкрд╛рд╕ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдХреМрд╢рд▓ рд╣реИ, рдФрд░ рд╕реАрдЦрд╛ рдХреМрд╢рд▓ рдХреЗ рд╕реНрддрд░ рдХреЛ рдмрдврд╝рд╛рдПрдВ рдпрд╛ рдПрдХ рдирдпрд╛ рд╕реАрдЦреЗрдВред  рдЗрди рд╕рднреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЬрд▓реНрдж рдпрд╛ рдмрд╛рдж рдореЗрдВ рд╣реЛрдЧреА, рд▓реЗрдХрд┐рди рдЕрдм рд╣рдо рдЙрди рдкрд░ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдзреНрдпрд╛рди рдирд╣реАрдВ рджреЗрдВрдЧреЗред <br><br>  рдХреГрдкрдпрд╛ рдЙрди рд╡рд░реНрдЧреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕реЗ рдбрд░реЛ рдордд, рдЬрд┐рдиреНрд╣реЗрдВ рд╣рдореЗрдВ рдмрдирд╛рдирд╛ рд╣реИред  рдЗрд╕ рдЬрдЯрд┐рд▓рддрд╛ рдХреА рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП, рдХрдИ рд╕реМ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдмрд╛рдд рд╣реИред  рдпрд╣рд╛рдВ, рдХрд┐рд╕реА рднреА рдЧрдВрднреАрд░ рд╡реНрдпрд╡рд╕рд╛рдп рдХреЗ рд░реВрдк рдореЗрдВ - рд╣рдо рдЫреЛрдЯреЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рдзреАрд░реЗ-рдзреАрд░реЗ рдЧрддрд┐ рдмрдврд╝рд╛рддреЗ рд╣реИрдВ, рдПрдХ рдорд╣реАрдиреЗ рдореЗрдВ рд╣рдо рджрд╛рдпрд░реЗ рд╕реЗ рдШрдмрд░рд╛ рдЬрд╛рддреЗ рд╣реИрдВред  рдордд рднреВрд▓реЛ, рд╣рдо рдЕрднреА рднреА рдПрдХ рд╡реНрдпрдХреНрддрд┐ рдХреЗ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рд╕реНрдЯреВрдбрд┐рдпреЛ рд╣реИрдВ - рд╣рдо рднрд╛рд░реА рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рд╕рд╛рдордирд╛ рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВред <br><br>  <i>тАЬрдореБрдЭреЗ рдХреБрдЫ рдмреАрдорд╛рд░ рд╣реЛ рдЧрдпрд╛ред</i>  <i>рдореБрдЭреЗ рдзреВрдореНрд░рдкрд╛рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдпрд╛ рдХреБрдЫ рдФрд░ ... "</i> <br><br>  рдФрд░ рд╣рдо рдЬрд╛рд░реА рд░рдЦреЗрдВрдЧреЗред <br>  рдорд╣рд╛рди рдФрд░ рднрдпрд╛рдирдХ рдЧреЗрдо рдореИрдХреЗрдирд┐рдХреНрд╕ - рдирд╛рдпрдХреЛрдВ рдФрд░ рдЙрдирдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдпрд╣ рд╡рд┐рд░реЛрдзреА рддрд╛рдХрддреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдХрд╛ рд╕рдордп рд╣реИред  рдпрд╛ рдпреЛрдВ рдХрд╣реЗрдВ, рдЬрд┐рди рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд╕рд╛рде рд╣рдорд╛рд░реЗ рдирд╛рдпрдХреЛрдВ рдХреЛ рдмрд╛рддрдЪреАрдд рдХрд░рдиреА рд╣реЛрддреА рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдПрдХ рдФрд░ рд╡рд░реНрдЧ рдЖрд░реЗрдЦ</b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/bq/7k/iq/bq7kiq7fcsqbhrf61f9g1bh-9e8.png"></a> <br></div></div><br>  рд╣рдорд╛рд░реЗ рдмрд╣рд╛рджреБрд░ рдирд╛рдпрдХ рддреАрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдХреНрдпреВрдмреНрд╕ рдФрд░ рдХрд╛рд░реНрдб рдХреЗ рд╕рд╛рде рд╕рд╛рдордирд╛ рдХрд░реЗрдВрдЧреЗ: рдЦрд▓рдирд╛рдпрдХ ( <code>Villain</code> рд╡рд░реНрдЧ), рджреБрд╢реНрдорди ( <code>Enemy</code> рд╡рд░реНрдЧ) рдФрд░ рдмрд╛рдзрд╛рдПрдВ ( <code>Obstacle</code> рд╡рд░реНрдЧ), рд╕рд╛рдорд╛рдиреНрдп рд╢рдмреНрдж "рдЦрддрд░реЛрдВ" рдХреЗ рддрд╣рдд рдПрдХрдЬреБрдЯ рд╣реЛрддреЗ рд╣реИрдВ ( <code>Threat</code> рдПрдХ рдЕрдореВрд░реНрдд "рд▓реЙрдХ" рд╡рд░реНрдЧ рд╣реИ, рдЗрд╕рдХреЗ рд╕рдВрднрд╛рд╡рд┐рдд рд╡рд╛рд░рд┐рд╕реЛрдВ рдХреА рд╕реВрдЪреА рд╕рдЦреНрддреА рд╕реЗ рд╣реИред рд╕реАрдорд┐рдд)ред  рдкреНрд░рддреНрдпреЗрдХ рдЦрддрд░реЗ рдореЗрдВ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ ( <code>Trait</code> ) рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдЗрд╕ рддрд░рд╣ рдХреЗ рдЦрддрд░реЗ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдиреЗ рдкрд░ рд╡реНрдпрд╡рд╣рд╛рд░ рдХреЗ рд╡рд┐рд╢реЗрд╖ рдирд┐рдпрдореЛрдВ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЧреЗрдордкреНрд▓реЗ рдореЗрдВ рд╡рд┐рд╡рд┐рдзрддрд╛ рдЬреЛрдбрд╝рддрд╛ рд╣реИред <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Threat</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name: String = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> description: String = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits = mutableListOf&lt;Trait&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTrait</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">trait</span></span></span></span><span class="hljs-function"><span class="hljs-params">: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Trait</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = traits.add(<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fun</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">getTraits</span></span></span></span>(): List&lt;Trait&gt; = traits } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Obstacle</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> tier: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">vararg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieTypes: Die.Type) : Threat() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Villain</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Threat</span></span></span></span>() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Enemy</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Threat</span></span></span></span>() <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Trait</span></span></span><span class="hljs-class"> </span></span>{ MODIFIER_PLUS_ONE, <span class="hljs-comment"><span class="hljs-comment">//Add +1 modifier MODIFIER_PLUS_TWO, //Add +2 modifier }</span></span></code> </pre><br>  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ <code>Trait</code> рд╡рд░реНрдЧ рдХреА рд╡рд╕реНрддреБрдУрдВ рдХреА рд╕реВрдЪреА рдХреЛ рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрд┐рдд ( <code>MutableList</code> ) рдХреЗ рд░реВрдк рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕реЗ рдПрдХ рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп <code>List</code> рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрджреНрдпрдкрд┐ рдпрд╣ рдХреЛрдЯрд▓рд┐рди рдореЗрдВ рдХрд╛рдо рдХрд░реЗрдЧрд╛, рд▓реЗрдХрд┐рди рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдкрд░рд┐рдгрд╛рдореА рд╕реВрдЪреА рдХреЛ рдПрдХ рдкрд░рд┐рд╡рд░реНрддрдирд╢реАрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдиреЗ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рд╕рдВрд╢реЛрдзрдиреЛрдВ рдХреЛ рдмрдирд╛рдиреЗ рд╕реЗ рдХреБрдЫ рднреА рдирд╣реАрдВ рд░реЛрдХ рд░рд╣рд╛ рд╣реИ - рдпрджрд┐ рдЖрдк рдЬрд╛рд╡рд╛ рдХреЛрдб рд╕реЗ рд╡рд░реНрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдХрд░рдирд╛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЖрд╕рд╛рди рд╣реИ (рдЬрд╣рд╛рдВ <code>List</code> рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкрд░рд┐рд╡рд░реНрддрдирд╢реАрд▓ рд╣реИ)ред  рдЕрдкрдиреЗ рд╕рдВрдЧреНрд░рд╣ рдХреА рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рд╡рд┐рдЪрд┐рддреНрд░ рддрд░реАрдХрд╛ рдХреБрдЫ рдРрд╕рд╛ рдХрд░рдирд╛ рд╣реИ: <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTraits</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;Trait&gt; = Collections.unmodifiableList(traits)</code> </pre> <br>  рд▓реЗрдХрд┐рди рд╣рдо рдЗрд╕ рдореБрджреНрджреЗ рдкрд░ рд╕рдВрдкрд░реНрдХ рдХрд░рдиреЗ рдореЗрдВ рдЗрддрдиреЗ рд▓рд╛рдкрд░рд╡рд╛рд╣ рдирд╣реАрдВ рд╣реЛрдВрдЧреЗ (рдЖрдк, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЪреЗрддрд╛рд╡рдиреА рджреА рдЧрдИ рд╣реИ)ред <br><br>  рдЦреЗрд▓ рдпрд╛рдВрддреНрд░рд┐рдХреА рдХреА рдЦрд╝рд╛рд╕рд┐рдпрдд рдХреЗ рдХрд╛рд░рдг, <code>Obstacle</code> рдХреНрд╖реЗрддреНрд░ рдЕрддрд┐рд░рд┐рдХреНрдд рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЕрдкрдиреЗ рд╕рдордХрдХреНрд╖реЛрдВ рд╕реЗ рднрд┐рдиреНрди рд╣реЛрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдо рдЙрди рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред <br><br>  рдзрдордХреА рдХрд╛рд░реНрдб (рдФрд░ рдпрджрд┐ рдЖрдк рдзреНрдпрд╛рди рд╕реЗ рдбрд┐рдЬрд╛рдЗрди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкрдврд╝рддреЗ рд╣реИрдВ, рддреЛ рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рдпреЗ рдХрд╛рд░реНрдб рд╣реИрдВ) <code>Deck</code> рд╡рд░реНрдЧ рджреНрд╡рд╛рд░рд╛ рджрд░реНрд╢рд╛рдП рдЧрдП рдбреЗрдХ рдореЗрдВ рд╕рдВрдпреБрдХреНрдд рд╣реИрдВ: <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Deck</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">E: Threat</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> cards = LinkedList&lt;E&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> size <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = cards.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addToTop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(card: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">E</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = cards.addFirst(card) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addToBottom</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(card: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">E</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = cards.addLast(card) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">revealTop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: E = cards.first <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawFromTop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: E = cards.removeFirst() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shuffle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = cards.shuffle() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = cards.clear() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">examine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = cards.toList() }</code> </pre><br>  рдпрд╣рд╛рдВ рдХреБрдЫ рднреА рдЕрд╕рд╛рдорд╛рдиреНрдп рдирд╣реАрдВ рд╣реИ, рд╕рд┐рд╡рд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рдХрдХреНрд╖рд╛ рдХреЛ рдорд╛рдирдХреАрдХреГрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рдПрдХ рдЖрджреЗрд╢рд┐рдд рд╕реВрдЪреА (рдпрд╛ рдмрд▓реНрдХрд┐ рджреЛ-рддрд░рдлрд╛ рдХрддрд╛рд░) рд╢рд╛рдорд┐рд▓ рд╣реИ, рдЬрд┐рд╕реЗ рдЙрдкрдпреБрдХреНрдд рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдорд┐рд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд╢рддреНрд░реБрдУрдВ рдФрд░ рдмрд╛рдзрд╛рдУрдВ рдХреА рдбреЗрдХ рдХреЛ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдПрдХ рд╕реЗрдХрдВрдб рдореЗрдВ рд╢рд╛рдмреНрджрд┐рдХ рд░реВрдк рд╕реЗ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рдЬрдм рд╣рдо рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП ... <br><br>  ... <code>Location</code> рд╡рд░реНрдЧ рдореЗрдВ, рдЬрд┐рд╕рдХрд╛ рдкреНрд░рддреНрдпреЗрдХ рдЙрджрд╛рд╣рд░рдг рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдЗрд▓рд╛рдХреЗ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдорд╛рд░реЗ рдирд╛рдпрдХреЛрдВ рдХреЛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рднрд╛рдЧ рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрдирд╛ рд╣реЛрдЧрд╛ред <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Location</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name: String = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> description: String = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isOpen = <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> closingDifficulty = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bag: Bag <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> villain: Villain? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> enemies: Deck&lt;Enemy&gt; <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obstacles: Deck&lt;Obstacle&gt; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules = mutableListOf&lt;SpecialRule&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addSpecialRule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rule: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SpecialRule</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = specialRules.add(rule) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSpecialRules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = specialRules }</code> </pre><br>  рдкреНрд░рддреНрдпреЗрдХ рдЗрд▓рд╛рдХреЗ рдХрд╛ рдирд╛рдо, рд╡рд┐рд╡рд░рдг, рдмрдВрдж рд╣реЛрдиреЗ рдХреА рдХрдард┐рдирд╛рдИ рдФрд░ "рдЦреБрд▓рд╛ / рдмрдВрдж" рдХрд╛ рд╕рдВрдХреЗрдд рд╣реИред  рдХрд╣реАрдВ рди рдХрд╣реАрдВ рдЦрд▓рдирд╛рдпрдХ рджреБрдмрдХрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ (рдпрд╛ рдпрд╣ рдЧреБрдкреНрдд рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк <code>villain</code> рд╕рдВрдкрддреНрддрд┐ <code>null</code> рд╣реЛ рд╕рдХрддреА рд╣реИ)ред  рдкреНрд░рддреНрдпреЗрдХ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдХреНрдпреВрдмреНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рдмреИрдЧ рдФрд░ рдЦрддрд░реЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рд░реНрдб рдХрд╛ рдПрдХ рдбреЗрдХ рд╣реИред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдХреНрд╖реЗрддреНрд░ рдХреА рдЕрдкрдиреА рдЕрдиреВрдареА рдЧреЗрдо рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ (рд╡рд┐рд╢реЗрд╖ <code>SpecialRule</code> ) рд╣реЛ рд╕рдХрддреА рд╣реИрдВ, рдЬреЛ рдЦрддрд░реЛрдВ рдХреЗ рдЧреБрдгреЛрдВ рдХреА рддрд░рд╣, рдЧреЗрдордкреНрд▓реЗ рдореЗрдВ рд╡рд┐рд╡рд┐рдзрддрд╛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рдо рднрд╡рд┐рд╖реНрдп рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рд▓рд┐рдП рдиреАрдВрд╡ рд░рдЦ рд░рд╣реЗ рд╣реИрдВ, рднрд▓реЗ рд╣реА рд╣рдо рдЗрд╕реЗ рдирд┐рдХрдЯ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рди рдХрд░реЗрдВ (рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╣рдореЗрдВ рдореЙрдбрд▓рд┐рдВрдЧ рдЪрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ)ред <br><br>  рдЕрдВрдд рдореЗрдВ, рдпрд╣ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдиреА рд╣реБрдИ рд╣реИ ( <code>Scenario</code> рд╡рд░реНрдЧ): <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Scenario</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> description = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> level = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> initialTimer = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allySkills = mutableListOf&lt;AllySkill&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules = mutableListOf&lt;SpecialRule&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAllySkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(skill: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AllySkill</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = allySkills.add(skill) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAllySkills</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;AllySkill&gt; = Collections.unmodifiableList(allySkills) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addSpecialRule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(rule: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SpecialRule</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = specialRules.add(rule) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSpecialRules</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: List&lt;SpecialRule&gt; = Collections.unmodifiableList(specialRules) }</code> </pre><br>  рдкреНрд░рддреНрдпреЗрдХ рдкрд░рд┐рджреГрд╢реНрдп рдХреЛ рдЯрд╛рдЗрдорд░ рдХреЗ рд╕реНрддрд░ рдФрд░ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореВрд▓реНрдп рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИред  рдЬреИрд╕рд╛ рдкрд╣рд▓реЗ рджреЗрдЦрд╛ рдЧрдпрд╛ рдерд╛, <code>specialRules</code> (рд╡рд┐рд╢реЗрд╖ рдирд┐рдпрдо) рдФрд░ рд╕рд╣рдпреЛрдЧрд┐рдпреЛрдВ рдХреЗ рдХреМрд╢рд▓ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ (рд╣рдо рд╡рд┐рдЪрд╛рд░ рд╕реЗ рдЪреВрдХ рдЬрд╛рдПрдВрдЧреЗ)ред  рдЖрдк рд╕реЛрдЪ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рд╕реНрдерд╛рдиреЛрдВ ( <code>Location</code> рд╡рд░реНрдЧ рдХреА рд╡рд╕реНрддреБрдУрдВ) рдХреА рдПрдХ рд╕реВрдЪреА рднреА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рдФрд░, рддрд╛рд░реНрдХрд┐рдХ рд░реВрдк рд╕реЗ, рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдРрд╕рд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЬреИрд╕рд╛ рдХрд┐ рдмрд╛рдж рдореЗрдВ рджреЗрдЦрд╛ рдЬрд╛рдПрдЧрд╛, рд╣рдо рдХрд╣реАрдВ рднреА рдЗрд╕ рддрд░рд╣ рдХреЗ рдХрдиреЗрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдпрд╣ рдХреЛрдИ рддрдХрдиреАрдХреА рд▓рд╛рдн рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред <br><br>  рдореИрдВ рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реВрдВ рдХрд┐ рдЕрдм рддрдХ рдорд╛рдирд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд╕рднреА рд╡рд░реНрдЧ <code>model</code> рдкреИрдХреЗрдЬ рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИрдВ - рд╣рдо, рдПрдХ рдмрдЪреНрдЪреЗ рдХреЗ рд░реВрдк рдореЗрдВ, рдПрдХ рдорд╣рд╛рдХрд╛рд╡реНрдп рдЦрд┐рд▓реМрдирд╛ рд▓рдбрд╝рд╛рдИ рдХреА рдкреНрд░рддреНрдпрд╛рд╢рд╛ рдореЗрдВ, рдореЗрдЬ рдХреА рд╕рддрд╣ рдкрд░ рд╕реИрдирд┐рдХреЛрдВ рдХреЛ рд░рдЦрд╛ред<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЕрдм, рдХреБрдЫ рджрд░реНрджрдирд╛рдХ рдХреНрд╖рдгреЛрдВ рдХреЗ рдмрд╛рдж, рдХрдорд╛рдВрдбрд░-рдЗрди-рдЪреАрдл рдХреЗ рд╕рдВрдХреЗрдд рдкрд░, рд╣рдо рдЕрдкрдиреЗ рдЦрд┐рд▓реМрдиреЛрдВ рдХреЛ рдПрдХ рд╕рд╛рде рдзрдХреЗрд▓рдиреЗ рдФрд░ рдЧреЗрдордкреНрд▓реЗ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХрд╛ рдЖрдирдВрдж рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рд▓рдбрд╝рд╛рдИ рдореЗрдВ рднрд╛рдЧ рд▓реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ, рд╡реНрдпрд╡рд╕реНрдерд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рд╕рд╛ред </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ ..."</font></font></i> <br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рддрд╡рд╛рдБ рдЪрд░рдгред </font><font style="vertical-align: inherit;">рдкреИрдЯрд░реНрди рдФрд░ рдЬреЗрдирд░реЗрдЯрд░</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЗрдП рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд▓рд┐рдП рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдкрд╣рд▓реЗ рд╕реЗ рдорд╛рдиреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдХрд┐рд╕реА рднреА рд╡рд╕реНрддреБ рдХреЛ рдмрдирд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреНрдпрд╛ рд╣реЛрдЧреА, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕реНрдерд╛рди (рдЗрд▓рд╛рдХрд╝рд╛)ред </font><font style="vertical-align: inherit;">рд╣рдореЗрдВ рд╡рд░реНрдЧ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдмрдирд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ </font></font><code>Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЗрд╕рдХреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЛ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рдЖрд░рдВрдн рдХрд░реЗрдВ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рдЗрд▓рд╛рдХреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рд╕реЗ рд╣рдо рдЦреЗрд▓ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВ: рдкреНрд░рддреНрдпреЗрдХ рд╕реНрдерд╛рди рдкрд░ рдПрдХ рдмреИрдЧ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрд┐рд╕реЗ рднреА рдЙрддреНрдкрдиреНрди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдФрд░ рдмреИрдЧ рдореЗрдВ рдХреНрдпреВрдмреНрд╕ рд╣реЛрддреЗ рд╣реИрдВ - рдпреЗ рднреА рдЗрд╕реА рд╡рд░реНрдЧ ( </font></font><code>Die</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдХреЗ </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рд╣реИрдВ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдпрд╣ рдореИрдВ рджреБрд╢реНрдордиреЛрдВ рдФрд░ рдмрд╛рдзрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ - рдЙрдиреНрд╣реЗрдВ рдЖрдорддреМрд░ рдкрд░ рдбреЗрдХ рдореЗрдВ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдЦрд▓рдирд╛рдпрдХ рдЦреБрдж рдЗрд▓рд╛рдХреЗ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рд╕реНрддрд░ рдкрд░ рд╕реНрдерд┐рдд рдкрд░рд┐рджреГрд╢реНрдп рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВред </font><font style="vertical-align: inherit;">рдЦреИрд░, рдЖрдк рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЙрдкрд░реЛрдХреНрдд рдХреЗ рд▓рд┐рдП рд╕реНрд░реЛрдд рдХреЛрдб рдЗрд╕ рддрд░рд╣ рджрд┐рдЦ рд╕рдХрддрд╛ рд╣реИ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> location = Location().apply { name = <span class="hljs-string"><span class="hljs-string">"Some location"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some description"</span></span> isOpen = <span class="hljs-literal"><span class="hljs-literal">true</span></span> closingDifficulty = <span class="hljs-number"><span class="hljs-number">4</span></span> bag = Bag().apply { put(Die(Die.Type.PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>)) put(Die(Die.Type.SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>)) put(Die(Die.Type.MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>)) put(Die(Die.Type.ENEMY, <span class="hljs-number"><span class="hljs-number">6</span></span>)) put(Die(Die.Type.OBSTACLE, <span class="hljs-number"><span class="hljs-number">6</span></span>)) put(Die(Die.Type.VILLAIN, <span class="hljs-number"><span class="hljs-number">6</span></span>)) } villain = Villain().apply { name = <span class="hljs-string"><span class="hljs-string">"Some villain"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some description"</span></span> addTrait(Trait.MODIFIER_PLUS_ONE) } enemies = Deck&lt;Enemy&gt;().apply { addToTop(Enemy().apply { name = <span class="hljs-string"><span class="hljs-string">"Some enemy"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some description"</span></span> }) addToTop(Enemy().apply { name = <span class="hljs-string"><span class="hljs-string">"Other enemy"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some description"</span></span> }) shuffle() } obstacles = Deck&lt;Obstacle&gt;().apply { addToTop(Obstacle(<span class="hljs-number"><span class="hljs-number">1</span></span>, Die.Type.PHYSICAL, Die.Type.VERBAL).apply { name = <span class="hljs-string"><span class="hljs-string">"Some obstacle"</span></span> description = <span class="hljs-string"><span class="hljs-string">"Some Description"</span></span> }) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдХреЛрдЯрд▓рд┐рди рднрд╛рд╖рд╛ рдФрд░ рдбрд┐рдЬрд╛рдЗрди рдХреЗ рд▓рд┐рдП рднреА рдзрдиреНрдпрд╡рд╛рдж рд╣реИ </font></font><code>apply{}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдЬрд╛рд╡рд╛ рдореЗрдВ, рдХреЛрдб рджреБрдЧреБрдирд╛ рд╣реЛрдЧрд╛ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдХрдИ рд╕реНрдерд╛рди рд╣реЛрдВрдЧреЗ, рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рдХрд╣рд╛, рдФрд░ рдЙрдирдХреЗ рдЕрд▓рд╛рд╡рд╛ рдкрд░рд┐рджреГрд╢реНрдп, рд░реЛрдорд╛рдВрдЪ рдФрд░ рдирд╛рдпрдХ рднреА рд╣реИрдВ рдЬрд┐рдирдХреЗ рдХреМрд╢рд▓ рдФрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд╕рд╛рде - рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЧреЗрдо рдбрд┐рдЬрд╛рдЗрдирд░ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдХрд░рдирд╛ рд╣реИред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдЧреЗрдо рдбрд┐рдЬрд╝рд╛рдЗрдирд░ рдХреЛрдб рдирд╣реАрдВ рд▓рд┐рдЦреЗрдВрдЧреЗ, рдФрд░ рдпрд╣ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЦреЗрд▓ рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ рдорд╛рдореВрд▓реА рдмрджрд▓рд╛рд╡ рдкрд░ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ, рдХреЛрдИ рднреА рд╕рдХреНрд╖рдо рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдЗрд╕ рдмрд╛рдд рдкрд░ рдЖрдкрддреНрддрд┐ рдХрд░реЗрдЧрд╛ рдХрд┐ рдХреНрд▓рд╛рд╕ рдХреЛрдб рд╕реЗ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд╡рд┐рд╡рд░рдг рдХреЛ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП - рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ, рддрд╛рдХрд┐ рдмрд╛рдж рдХреЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдкреВрд░реНрд╡ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЖрд╡рд╢реНрдпрдХ рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛рдП, рдЬреИрд╕реЗ рдХрд┐ рдПрдХ рдбреНрд░рд╛рдЗрдВрдЧ рдкреНрд▓рд╛рдВрдЯ рд╕реЗ рдПрдХ рд╣рд┐рд╕реНрд╕рд╛ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдо рдЗрд╕ рддрд░рд╣ рдХреЗ рдЪрд┐рддреНрд░ рднреА рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ, рд╣рдо рдХреЗрд╡рд▓ рдЙрдиреНрд╣реЗрдВ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╣рддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╡рд░реНрдЧ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдирдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдРрд╕реЗ рдкреИрдЯрд░реНрди рд╣реЛрдиреЗ рд╕реЗ, рдПрдХ рд╡рд┐рд╢реЗрд╖ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛрдб (рдЬрдирд░реЗрдЯрд░) рдкрд╣рд▓реЗ рд╡рд░реНрдгрд┐рдд рдореЙрдбрд▓ рд╕реЗ рдЕрдВрддрд┐рдо рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдЧрд╛ред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд┐рд╕реА рдЯреЗрдореНрдкреНрд▓реЗрдЯ рд╕реЗ рдСрдмреНрдЬреЗрдХреНрдЯ рдЬреЗрдирд░реЗрдЯ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/lj/cn/hb/ljcnhbcwls0jogmaxfbncrek6gc.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░, рд╣рдорд╛рд░реА рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП, рджреЛ рдирдИ рд╕рдВрд╕реНрдерд╛рдУрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП: рдЯреЗрдореНрдкрд▓реЗрдЯ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдФрд░ рдЬрдирд░реЗрдЯрд░ рд╡рд░реНрдЧред </font><font style="vertical-align: inherit;">рдФрд░ рдЬрдм рд╕реЗ рд╡рд╕реНрддреБрдУрдВ рдХреА рдПрдХ рд╕рднреНрдп рд░рд╛рд╢рд┐ рдЬрдорд╛ рд╣реБрдИ рд╣реИ, рддреЛ рдХрдИ рд╕рдВрд╕реНрдерд╛рдПрдВ рднреА рд╣реЛрдВрдЧреА ... рдЕрд╢реЛрднрдиреАрдп:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрдЧ рдЖрд░реЗрдЦ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/ef/hu/4k/efhu4kgepx97_87cnpis8ranl0c.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреГрдкрдпрд╛ рдЧрд╣рд░реА рд╕рд╛рдВрд╕ рд▓реЗрдВ, рдзреНрдпрд╛рди рд╕реЗ рд╕реБрдиреЗрдВ рдФрд░ рд╡рд┐рдЪрд▓рд┐рдд рди рд╣реЛрдВред рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрд░реЗрдЦ рдЧреЗрдо рдХреА рджреБрдирд┐рдпрд╛ рдХреА рд╕рднреА рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдирд╣реАрдВ рджрд┐рдЦрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдореБрдЦреНрдп рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рдкрд╣рд▓реЗ рдмрд┐рдирд╛ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред рджреВрд╕рд░реЗ, рдЕрдирд╛рд╡рд╢реНрдпрдХ рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЗ рд╕рд╛рде рд╕рд░реНрдХрд┐рдЯ рдХреЛ рдЕрдзрд┐рднрд╛рд░ рдирд╣реАрдВ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЕрдиреНрдп рдЖрд░реЗрдЦреЛрдВ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдХреБрдЫ рдХрдиреЗрдХреНрд╢рдиреЛрдВ рдХреЛ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЗрдП рдХреБрдЫ рд╕рд░рд▓ - рдЙрддреНрдкрд╛рджрдХ рдХреНрдпреВрдмреНрд╕ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░реЗрдВред "рдХреИрд╕реЗ? - рдЖрдк рдХрд╣рддреЗ рд╣реИрдВред - рдХреНрдпрд╛ рд╣рдо рдкрд░реНрдпрд╛рдкреНрдд рдирд┐рд░реНрдорд╛рддрд╛ рдирд╣реАрдВ рд╣реИрдВ? рд╣рд╛рдБ, рдпрд╣ рдПрдХ рдкреНрд░рдХрд╛рд░ рдФрд░ рдЖрдХрд╛рд░ рдХреЗ рд╕рд╛рде рд╣реИред тАЭ рдирд╣реАрдВ, рдореИрдВ рдЬрд╡рд╛рдм рдирд╣реАрдВ рджреВрдВрдЧрд╛, рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИред рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдХрдИ рдорд╛рдорд▓реЛрдВ рдореЗрдВ (рдирд┐рдпрдореЛрдВ рдХреЛ рдкрдврд╝реЗрдВ), рдХреНрдпреВрдмреНрд╕ рдХреЛ рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рд░рд╛рд╢рд┐ рдореЗрдВ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: "рдпрд╛ рддреЛ рдиреАрд▓реЗ рдпрд╛ рд╣рд░реЗ рд░рдВрдЧ рдХреЗ рдПрдХ рд╕реЗ рддреАрди рдХреНрдпреВрдмреНрд╕ рд╕реЗ")ред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдХрд╛рд░ рдХреЛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреА рдЬрдЯрд┐рд▓рддрд╛ рдХреЗ рд╕реНрддрд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЪреБрдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдЗрд╕рд▓рд┐рдП, рд╣рдо рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкреЗрд╢ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>DieTypeFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DieTypeFilter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдпрд╣ рдЬрд╛рдВрдЪреЗрдВрдЧреЗ рдХрд┐ рдХреНрдпрд╛ рдХреНрдпреВрдм рдкреНрд░рдХрд╛рд░ рдирд┐рдпрдореЛрдВ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╕реЗрдЯреЛрдВ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ (рдХреЛрдИ рднреА рдЬреЛ рдХреЗрд╡рд▓ рджрд┐рдорд╛рдЧ рдореЗрдВ рдЖрддрд╛ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЪрд╛рд╣реЗ рдкреНрд░рдХрд╛рд░ рдХрдбрд╝рд╛рдИ рд╕реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдореВрд▓реНрдп ("рдиреАрд▓рд╛") рдпрд╛ рдореВрд▓реНрдпреЛрдВ рдХреА рд╢реНрд░реЗрдгреА ("рдиреАрд▓рд╛, рдкреАрд▓рд╛ рдпрд╛ рд╣рд░рд╛") рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реЛ; </font><font style="vertical-align: inherit;">рдпрд╛, рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рджрд┐рдП рдЧрдП рдПрдХ рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдХрд┐рд╕реА рднреА рдкреНрд░рдХрд╛рд░ рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИ ("рдпрджрд┐ рдпрд╣ рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ рдХреЗрд╡рд▓ рд╕рдлреЗрдж рдирд╣реАрдВ рд╣реИ" - рдХреБрдЫ рднреА, рдмрд╕ рдРрд╕рд╛ рдирд╣реАрдВ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЧрд░ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпрд╛ рд╣реИ, рддреЛ рдЗрд╕рд╕реЗ рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ - рдЙрдиреНрд╣реЗрдВ рдмрд╛рдж рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд╕рд┐рд╕реНрдЯрдо рдЗрд╕ рд╕реЗ рдирд╣реАрдВ рдЯреВрдЯреЗрдЧрд╛ (рдмрд╣реБрд░реВрдкрддрд╛, рдпрд╛рдж рд░рдЦреЗрдВ?)ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SingleDieTypeFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Die.Type): DieTypeFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type == type) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InvertedSingleDieTypeFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Die.Type): DieTypeFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type != type) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MultipleDieTypeFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">vararg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types: Die.Type): DieTypeFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InvertedMultipleDieTypeFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">vararg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types: Die.Type): DieTypeFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (type !<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрдпреВрдм рдХрд╛ рдЖрдХрд╛рд░ рднреА рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдмрд╛рдж рдореЗрдВ рдЙрд╕ рдкрд░ рдФрд░ рдЕрдзрд┐рдХред </font><font style="vertical-align: inherit;">рдЗрд╕ рдмреАрдЪ, рд╣рдо рдПрдХ рдХреНрдпреВрдмреНрд╕ рдЬрдирд░реЗрдЯрд░ ( </font></font><code>DieGenerator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рд▓рд┐рдЦреЗрдВрдЧреЗ </font><font style="vertical-align: inherit;">, рдЬреЛ рдХрд┐ рдХреНрд▓рд╛рд╕ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдХреЗ рд╡рд┐рдкрд░реАрдд </font></font><code>Die</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдХреНрдпреВрдм рдХреЗ рд╕реНрдкрд╖реНрдЯ рдкреНрд░рдХрд╛рд░ рдФрд░ рдЖрдХрд╛рд░ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рд▓реЗрдХрд┐рди рдлрд╝рд┐рд▓реНрдЯрд░ рдФрд░ рдЬрдЯрд┐рд▓рддрд╛ рдХрд╛ рд╕реНрддрд░ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> DISTRIBUTION_LEVEL1 = intArrayOf(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> DISTRIBUTION_LEVEL2 = intArrayOf(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> DISTRIBUTION_LEVEL3 = intArrayOf(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> DISTRIBUTIONS = arrayOf( intArrayOf(<span class="hljs-number"><span class="hljs-number">4</span></span>), DISTRIBUTION_LEVEL1, DISTRIBUTION_LEVEL2, DISTRIBUTION_LEVEL3 ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMaxLevel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = DISTRIBUTIONS.size - <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateDie</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filter: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieTypeFilter</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Die(generateDieType(filter), generateDieSize(level)) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateDieType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filter: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieTypeFilter</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Die.Type { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> type: Die.Type <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { type = Die.Type.values().random() } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!filter.test(type)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> type } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateDieSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = DISTRIBUTIONS[<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (level &lt; <span class="hljs-number"><span class="hljs-number">1</span></span> || level &gt; getMaxLevel()) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> level].random()</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╛рд╡рд╛ рдореЗрдВ, рдпреЗ рд╡рд┐рдзрд┐рдпрд╛рдВ рд╕реНрдерд┐рд░ рд╣реЛрдВрдЧреА, рд▓реЗрдХрд┐рди рдЪреВрдВрдХрд┐ рд╣рдо рдХреЛрдЯрд▓рд┐рди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдХрдХреНрд╖рд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЬреЛ рдиреАрдЪреЗ рдЪрд░реНрдЪрд╛ рдХрд┐рдП рдЧрдП рдЕрдиреНрдп рдЬрдирд░реЗрдЯрд░ рдХреЗ рд▓рд┐рдП рднреА рд╕рд╣реА рд╣реИ (рдлрд┐рд░ рднреА, рддрд╛рд░реНрдХрд┐рдХ рд╕реНрддрд░ рдкрд░, рд╣рдо рдЕрднреА рднреА рдХрдХреНрд╖рд╛ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреЛ рдирд┐рдЬреА рддрд░реАрдХреЗ рдЕрд▓рдЧ рд╕реЗ рдХреНрдпреВрдм рдХреЗ рдкреНрд░рдХрд╛рд░ рдФрд░ рдЖрдХрд╛рд░ рдЙрддреНрдкрдиреНрди рдХрд░рддреЗ рд╣реИрдВ - рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рджрд┐рд▓рдЪрд╕реНрдк рдХрд╣рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рд╡рд┐рдзрд┐ </font></font><code>generateDieType()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛ рдПрдХ рдЗрдирдкреБрдЯ рдлрд╝рд┐рд▓реНрдЯрд░ рдХреЗ рд╕рд╛рде рдкрд╛рд╕ рдХрд░рдХреЗ рдЕрдирдВрдд рд▓реВрдк рдореЗрдВ рд╕рдВрдЪрд╛рд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(filter: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieTypeFilter</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рд▓реЗрдЦрдХреЛрдВ рдХрд╛ рджреГрдврд╝ рд╡рд┐рд╢реНрд╡рд╛рд╕ рд╣реИ рдХрд┐ рддрд╛рд░реНрдХрд┐рдХ рд╡рд┐рд╕рдВрдЧрддрд┐рдпреЛрдВ рдФрд░ рдХрдерд╛рдирдХ рдХреЗ рдЫрд┐рджреНрд░реЛрдВ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓ рд╕рдХрддреЗ рд╣реИрдВ рдпрджрд┐ рдкрд╛рддреНрд░ рд╕реНрд╡рдпрдВ рдЙрдиреНрд╣реЗрдВ рдХрд╣рд╛рдиреА рдХреЗ рджреМрд░рд╛рди рджрд░реНрд╢рдХреЛрдВ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ)ред рд╡рд┐рдзрд┐ </font></font><code>generateDieSize()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╕рд░рдгреА (рдкреНрд░рддреНрдпреЗрдХ рд╕реНрддрд░ рдХреЗ рд▓рд┐рдП рдПрдХ) рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╡рд┐рддрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдПрдХ рдЫрджреНрдо рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдЖрдХрд╛рд░ рдЙрддреНрдкрдиреНрди рдХрд░рддреА рд╣реИред рдЬрдм рдореЗрд░реЗ рдмреБрдврд╝рд╛рдкреЗ рдореЗрдВ рдореИрдВ рдЕрдореАрд░ рд╣реЛ рдЬрд╛рддрд╛ рд╣реВрдВ рдФрд░ рдмрд╣реБрд░рдВрдЧреА рдЦреЗрд▓ рдЦреЗрд▓рдиреЗ рд╡рд╛рд▓реЗ рдХреНрдпреВрдмреНрд╕ рдХрд╛ рдПрдХ рдкреИрдХреЗрдЯ рдЦрд░реАрджрддрд╛ рд╣реВрдВ, рддреЛ рдореИрдВ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╛рд╕рд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдирд╣реАрдВ рдЦреЗрд▓ рдкрд╛рдКрдВрдЧрд╛ </font><font style="vertical-align: inherit;">, рдХреНрдпреЛрдВрдХрд┐ рдореБрдЭреЗ рдирд╣реАрдВ рдкрддрд╛ рдХрд┐ рдореИрдВ рдЙрдирд╕реЗ рдмреЗрддрд░рддреАрдм рдврдВрдЧ рд╕реЗ рдПрдХ рдмреИрдЧ рдХреИрд╕реЗ рдЗрдХрдЯреНрдард╛ рдХрд░реВрдВ (рдкрдбрд╝реЛрд╕реА рд╕реЗ рдкреВрдЫрдиреЗ рдФрд░ рдЗрд╕ рд╕рдордп рдХреЛ рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рдЕрд▓рд╛рд╡рд╛)ред рдпрд╣ рдХрд╛рд░реНрдб рдХрд╛ рдПрдХ рдбреЗрдХ рдирд╣реАрдВ рд╣реИ рдЬрд┐рд╕реЗ рдЙрд▓реНрдЯрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рддрдВрддреНрд░ рдФрд░ рдЙрдкрдХрд░рдгреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред рдпрджрд┐ рдХрд┐рд╕реА рдХреЗ рдкрд╛рд╕ рд╡рд┐рдЪрд╛рд░ рд╣реИрдВ (рдФрд░ рдЙрд╕реЗ рдЗрд╕ рд╕реНрдерд╛рди рдкрд░ рдкрдврд╝рдиреЗ рдХрд╛ рдзреИрд░реНрдп рдерд╛), рдХреГрдкрдпрд╛ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЬрдм рд╕реЗ рд╣рдо рдмреИрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рд╣рдо рдЙрдирдХреЗ рд▓рд┐рдП рдПрдХ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╡рд┐рдХрд╕рд┐рдд рдХрд░реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдЖрдкрдХреЗ рд╕рд╛рдерд┐рдпреЛрдВ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдпрд╣ рдЯреЗрдореНрдкрд▓реЗрдЯ ( </font></font><code>BagTemplate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд░реНрдЧ рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕рдореЗрдВ рдЕрдиреНрдп рдЯреЗрдореНрдкрд▓реЗрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ - рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдирд┐рдпрдореЛрдВ (рдпрд╛ </font></font><code>Plan</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдХрд╛ </font><font style="vertical-align: inherit;">рд╡рд░реНрдгрди рдХрд░рддрд╛ </font><font style="vertical-align: inherit;">рд╣реИ рдЬрд┐рд╕рдХреЗ рджреНрд╡рд╛рд░рд╛ рдПрдХ рдпрд╛ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдХреНрдпреВрдмреНрд╕ (рдкрд╣рд▓реЗ рдХреА рдЧрдИ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдпрд╛рдж рд░рдЦреЗрдВ?) рдмреИрдЧ рдореЗрдВ рдЬреЛрдбрд╝реЗ рдЬрд╛рддреЗ рд╣реИрдВред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BagTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Plan</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> minQuantity: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> maxQuantity: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> filter: DieTypeFilter) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> plans = mutableListOf&lt;Plan&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addPlan</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(minQuantity: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, maxQuantity: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, filter: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieTypeFilter</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { plans.add(Plan(minQuantity, maxQuantity, filter)) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдпреЛрдЬрдирд╛ рдХреНрдпреВрдмреНрд╕ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреИрдЯрд░реНрди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреА рд╣реИ, рд╕рд╛рде рд╣реА рдХреНрдпреВрдмреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ (рдиреНрдпреВрдирддрдо рдФрд░ рдЕрдзрд┐рдХрддрдо) рдЬреЛ рдЗрд╕ рдкреИрдЯрд░реНрди рдХреЛ рд╕рдВрддреБрд╖реНрдЯ рдХрд░рддреА рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдЖрдк рд╡рд┐рдЪрд┐рддреНрд░ рдирд┐рдпрдореЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдмреИрдЧ рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдФрд░ рдореИрдВ рдлрд┐рд░ рд╕реЗ рдмреБрдврд╝рд╛рдкреЗ рдХреЗ рд▓рд┐рдП рдлреВрдЯ рдлреВрдЯ рдХрд░ рд░реЛрддрд╛ рд╣реВрдВ, рдХреНрдпреЛрдВрдХрд┐ рдореЗрд░реЗ рдкрдбрд╝реЛрд╕реА рдиреЗ рдореЗрд░реА рдорджрдж рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдХреБрдЫ рдЗрд╕ рддрд░рд╣:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">realizePlan</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(plan: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">BagTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Plan</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Array&lt;Die&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> count = (plan.minQuantity..plan.maxQuantity).shuffled().last() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>..count).map { generateDie(plan.filter, level) }.toTypedArray() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateBag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">BagTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Bag { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> template.plans.asSequence() .map { realizePlan(it, level) } .fold(Bag()) { b, d -&gt; b.put(*d); b } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк, рдореЗрд░реА рддрд░рд╣, рдпрд╣ рд╕рдм рдХрд╛рд░реНрдпрд╛рддреНрдордХрддрд╛ рд╕реЗ рдердХ рдЧрдП рд╣реИрдВ, рддреЛ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдЬрдХрдбрд╝реЗрдВ - рдпрд╣ рдХреЗрд╡рд▓ рдмрджрддрд░ рд╣реЛ рдЬрд╛рдПрдЧрд╛ред рд▓реЗрдХрд┐рди рдлрд┐рд░, рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдХрдИ рдЕрдкреНрд░рддреНрдпрдХреНрд╖ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдХреЗ рд╡рд┐рдкрд░реАрдд, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ, рд╕рдордЭрдиреЗ рдпреЛрдЧреНрдп рд╡рд┐рд╖рдп рдХреНрд╖реЗрддреНрд░ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдЪрддреБрд░ рддрд░реАрдХреЛрдВ рдХреЗ рдЙрдкрдпреЛрдЧ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрдиреЗ рдЖрдк рд╕реЗ, рдмреИрдЧ рдореИрджрд╛рди рдкрд░ рдЭреВрда рдирд╣реАрдВ рдмреЛрд▓реЗрдВрдЧреЗ - рдЖрдкрдХреЛ рдЙрдиреНрд╣реЗрдВ рдирд╛рдпрдХреЛрдВ рдФрд░ рд╕реНрдерд╛рдиреЛрдВ рдХреЛ рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдЙрддреНрддрд░рд╛рд░реНрджреНрдз рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocationTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bagTemplate: BagTemplate <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> basicClosingDifficulty: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardsCount: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardsCount: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardPool: Collection&lt;EnemyTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardPool: Collection&lt;ObstacleTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules: List&lt;SpecialRule&gt; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрдЯрд▓рд┐рди рднрд╛рд╖рд╛ рдореЗрдВ, рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рдмрдЬрд╛рдп, </font></font><code>get()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдЧреБрдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ - рдпрд╣ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╣реИред рд╣рдо рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдмреИрдЧ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╕реЗ рдкрд░рд┐рдЪрд┐рдд рд╣реИрдВ, рд╢реЗрд╖ рд╡рд┐рдзрд┐рдпреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред рд╕рдВрдкрддреНрддрд┐ </font></font><code>basicClosingDifficulty</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд▓рд╛рдХреЗ рдХреЛ рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪреЗрдХ рдХреА рдореВрд▓ рдЬрдЯрд┐рд▓рддрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдЧреАред рдпрд╣рд╛рдВ "рдореВрд▓" рд╢рдмреНрдж рдХрд╛ рдЕрд░реНрде рдХреЗрд╡рд▓ рдпрд╣ рд╣реИ рдХрд┐ рдЕрдВрддрд┐рдо рдЬрдЯрд┐рд▓рддрд╛ рдкрд░рд┐рджреГрд╢реНрдп рдХреЗ рд╕реНрддрд░ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░реЗрдЧреА рдФрд░ рдЗрд╕ рд╕реНрддрд░ рдкрд░ рдЕрд╕реНрдкрд╖реНрдЯ рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдореЗрдВ рджреБрд╢реНрдордиреЛрдВ рдФрд░ рдмрд╛рдзрд╛рдУрдВ (рдФрд░ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдЦрд▓рдирд╛рдпрдХ) рдХреЗ рд▓рд┐рдП рдкреИрдЯрд░реНрди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЯреЗрдореНрдкрд▓реЗрдЯ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рджреБрд╢реНрдордиреЛрдВ рдФрд░ рдмрд╛рдзрд╛рдУрдВ рдХреА рд╡рд┐рд╡рд┐рдзрддрд╛ рд╕реЗ, рд╕рднреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдПрдХ рд╕реАрдорд┐рдд рд╕рдВрдЦреНрдпрд╛ (рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдореВрд▓реНрдп рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП)ред рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреНрд╖реЗрддреНрд░ рдХреЗ рд╡рд┐рд╢реЗрд╖ рдирд┐рдпрдо ( </font></font><code>SpecialRule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдПрдХ рд╕рд░рд▓ рдЧрдгрдирд╛ ( </font></font><code>enum class</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рджреНрд╡рд╛рд░рд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">, рдФрд░ рдЗрд╕рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рдЕрд▓рдЧ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EnemyTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits: List&lt;Trait&gt; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ObstacleTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> tier: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieTypes: Array&lt;Die.Type&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits: List&lt;Trait&gt; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VillainTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits: List&lt;Trait&gt; }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ рдЬрдирд░реЗрдЯрд░ рдХреЛ рди рдХреЗрд╡рд▓ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдмрдирд╛рдиреЗ рджреЗрдВ, рдмрд▓реНрдХрд┐ рдЙрдирдХреЗ рд╕рд╛рде рдкреВрд░реЗ рдбреЗрдХ рднреАред </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateVillain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">VillainTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Villain().apply { name = template.name description = template.description template.traits.forEach { addTrait(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateEnemy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">EnemyTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Enemy().apply { name = template.name description = template.description template.traits.forEach { addTrait(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateObstacle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ObstacleTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Obstacle(template.tier, *template.dieTypes).apply { name = template.name description = template.description template.traits.forEach { addTrait(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateEnemyDeck</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(types: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Collection</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">EnemyTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;, limit: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: Deck&lt;Enemy&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deck = types .map { generateEnemy(it) } .shuffled() .fold(Deck&lt;Enemy&gt;()) { d, c -&gt; d.addToTop(c); d } limit?.let { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (deck.size &gt; it) deck.drawFromTop() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> deck } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateObstacleDeck</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(templates: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Collection</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ObstacleTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;, limit: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: Deck&lt;Obstacle&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deck = templates .map { generateObstacle(it) } .shuffled() .fold(Deck&lt;Obstacle&gt;()) { d, c -&gt; d.addToTop(c); d } limit?.let { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (deck.size &gt; it) deck.drawFromTop() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> deck }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рд╣рдорд╛рд░реА рдЖрд╡рд╢реНрдпрдХрддрд╛ (рдкреИрд░рд╛рдореАрдЯрд░ </font></font><code>limit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдбреЗрдХ рдореЗрдВ рдЕрдзрд┐рдХ рдХрд╛рд░реНрдб рд╣реИрдВ </font><font style="vertical-align: inherit;">, рддреЛ рд╣рдо рдЙрдиреНрд╣реЗрдВ рд╡рд╣рд╛рдВ рд╕реЗ рд╣рдЯрд╛ рджреЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдХреНрдпреВрдмреНрд╕ рдФрд░ рдХрд╛рд░реНрдб рдХреЗ рдкреИрдХ рдХреЗ рд╕рд╛рде рдмреИрдЧ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдиреЗ рдХреЗ рдирд╛рддреЗ, рд╣рдо рдЕрдВрдд рдореЗрдВ рдЗрд▓рд╛рдХреЗ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">LocationTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Location().apply { name = template.name description = template.description bag = generateBag(template.bagTemplate, level) closingDifficulty = template.basicClosingDifficulty + level * <span class="hljs-number"><span class="hljs-number">2</span></span> enemies = generateEnemyDeck(template.enemyCardPool, template.enemyCardsCount) obstacles = generateObstacleDeck(template.obstacleCardPool, template.obstacleCardsCount) template.specialRules.forEach { addSpecialRule(it) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдзреНрдпрд╛рдп рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╣рдо рдЬрд┐рд╕ рдЗрд▓рд╛рдХреЗ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдХреЛрдб рдореЗрдВ рд╕реЗрдЯ рдХрд░рддреЗ рд╣реИрдВ, рд╡рд╣ рдЕрдм рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрд▓рдЧ рд░реВрдк рд▓реЗрдЧрд╛: </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeLocationTemplate</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LocationTemplate { override val name = "Some location" override val description = "Some description" override val bagTemplate = BagTemplate</span></span></span></span>().apply { addPlan(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SingleDieTypeFilter(Die.Type.PHYSICAL)) addPlan(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, SingleDieTypeFilter(Die.Type.SOMATIC)) addPlan(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.MENTAL)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, MultipleDieTypeFilter(Die.Type.ENEMY, Die.Type.OBSTACLE)) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> basicClosingDifficulty = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardsCount = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardsCount = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardPool = listOf( SomeEnemyTemplate(), OtherEnemyTemplate() ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardPool = listOf( SomeObstacleTemplate() ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules = emptyList&lt;SpecialRule&gt;() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeEnemyTemplate</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">EnemyTemplate { override val name = "Some enemy" override val description = "Some description" override val traits = emptyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Trait</span></span></span><span class="hljs-class">&gt;</span></span>() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">OtherEnemyTemplate</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">EnemyTemplate { override val name = "Other enemy" override val description = "Some description" override val traits = emptyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Trait</span></span></span><span class="hljs-class">&gt;</span></span>() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeObstacleTemplate</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ObstacleTemplate { override val name = "Some obstacle" override val description = "Some description" override val traits = emptyList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Trait</span></span></span><span class="hljs-class">&gt;</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> tier = <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieTypes = arrayOf( Die.Type.PHYSICAL, Die.Type.VERBAL ) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> location = generateLocation(SomeLocationTemplate(), <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░рд┐рджреГрд╢реНрдп рдкреАрдврд╝реА рдПрдХ рд╕рдорд╛рди рддрд░реАрдХреЗ рд╕реЗ рдШрдЯрд┐рдд рд╣реЛрдЧреАред </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ScenarioTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> description: String <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialTimer: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> staticLocations: List&lt;LocationTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dynamicLocationsPool: List&lt;LocationTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> villains: List&lt;VillainTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules: List&lt;SpecialRule&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateDynamicLocationsCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(numberOfHeroes: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = numberOfHeroes + <span class="hljs-number"><span class="hljs-number">2</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рдпрдореЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдЙрддреНрдкрдиреНрди рд╕реНрдерд╛рдиреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдирд╛рдпрдХреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддреА рд╣реИред </font><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдПрдХ рдорд╛рдирдХ рдЧрдгрдирд╛ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдпрджрд┐ рд╡рд╛рдВрдЫрд┐рдд рд╣реИ, рддреЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдореЗрдВ рдкреБрдирд░реНрдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ, рдкрд░рд┐рджреГрд╢реНрдп рдЬрдирд░реЗрдЯрд░ рдЗрди рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рднреВ-рднрд╛рдЧ рднреА рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛ - рдЙрд╕реА рд╕реНрдерд╛рди рдкрд░ рдЦрд▓рдирд╛рдпрдХ рдмреЗрддрд░рддреАрдм рдврдВрдЧ рд╕реЗ рдЗрд▓рд╛рдХреЛрдВ рдХреЗ рдмреАрдЪ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateScenario</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ScenarioTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Scenario().apply { name =template.name description = template.description <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.level = level initialTimer = template.initialTimer template.specialRules.forEach { addSpecialRule(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateLocations</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ScenarioTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, level: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, numberOfHeroes: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: List&lt;Location&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> locations = template.staticLocations.map { generateLocation(it, level) } + template.dynamicLocationsPool .map { generateLocation(it, level) } .shuffled() .take(template.calculateDynamicLocationsCount(numberOfHeroes)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> villains = template.villains .map(::generateVillain) .shuffled() locations.forEachIndexed { index, location -&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (index &lt; villains.size) { location.villain = villains[index] location.bag.put(generateDie(SingleDieTypeFilter(Die.Type.VILLAIN), level)) } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> locations }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдИ рдЪреМрдХрд╕ рдкрд╛рдардХ рдЗрд╕ рдмрд╛рдд рдкрд░ рдЖрдкрддреНрддрд┐ рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдХреЛ рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдХреБрдЫ рдкрд╛рда рдлрд╝рд╛рдЗрд▓реЛрдВ (рд▓рд┐рдкрд┐рдпреЛрдВ) рдореЗрдВ, рддрд╛рдХрд┐ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╕реЗ рджреВрд░ рд░рд╣рдиреЗ рд╡рд╛рд▓реЗ рднреА рдЙрдиреНрд╣реЗрдВ рдмрдирд╛ рдФрд░ рдмрдирд╛рдП рд░рдЦ рд╕рдХреЗрдВред </font><font style="vertical-align: inherit;">рдореИрдВ рд╕рд╣рдордд рд╣реВрдВ, рдореИрдВ рдЕрдкрдиреА рдЯреЛрдкреА рдЙрддрд╛рд░рддрд╛ рд╣реВрдВ, рд▓реЗрдХрд┐рди рдореИрдВ рдЕрдкрдиреЗ рд╕рд┐рд░ рдкрд░ рд░рд╛рдЦ рдЫрд┐рдбрд╝рдХрддрд╛ рдирд╣реАрдВ рд╣реВрдВ - рдХреНрдпреЛрдВрдХрд┐ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рд╣рд╕реНрддрдХреНрд╖реЗрдк рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдмрд╕ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЗ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░реЗрдВ, рдЬрд┐рд╕рдХреЗ рдЧреБрдг рдорд╛рди рдмрд╛рд╣рд░реА рдлрд╝рд╛рдЗрд▓ рд╕реЗ рд▓реЛрдб рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдкреАрдврд╝реА рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЗрд╕рдореЗрдВ рд╕реЗ рдПрдХ iota рдХреЛ рдирд╣реАрдВ рдмрджрд▓реЗрдЧреАред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреИрд░, рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рд╡реЗ рдХреБрдЫ рднреА рднреВрд▓ рдирд╣реАрдВ рдЧрдП рд╣реИрдВ ... рдУрд╣ рд╣рд╛рдБ, рдирд╛рдпрдХреЛрдВ - рдЙрдиреНрд╣реЗрдВ рднреА рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ рдХреБрдЫ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HeroTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Hero.Type <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialHandCapacity: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> favoredDieType: Die.Type <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialDice: Collection&lt;Die&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialSkills: List&lt;SkillTemplate&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dormantSkills: List&lt;SkillTemplate&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiceCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Pair&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;? }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рддреБрд░рдВрдд рд╣рдо рджреЛ рд╡рд┐рд╖рдорддрд╛рдУрдВ рдХреЛ рдиреЛрдЯрд┐рд╕ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдЙрдирдореЗрдВ рдмреИрдЧ рдФрд░ рдХреНрдпреВрдмреНрд╕ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред</font></font> рдХреНрдпреЛрдВ?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд╛рдВ, рдХреНрдпреЛрдВрдХрд┐ рдирд╛рдпрдХреЛрдВ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХрд╛рд░ (рд╡рд░реНрдЧ) рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдХреНрдпреВрдмреНрд╕ рдХреА рд╕реВрдЪреА рдХреЛ рд╕рдЦреНрддреА рд╕реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ - рдпрд╣ рдЙрдиреНрд╣реЗрдВ рдмрдирд╛рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЬрдЯрд┐рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рджреВрд╕рд░реА рдмрд╛рдд, </font></font><code>getDiceCount()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдпреЗ рдХрд┐рд╕ рддрд░рд╣ рдХреА рдбрдЧрд░ рд╣реИ ??? </font><font style="vertical-align: inherit;">рд╢рд╛рдВрдд рд╣реЛ рдЬрд╛рдУ, рдпреЗ рд╡рд╣реА рд╣реИрдВ </font></font><code>DiceLimit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЛ рдХреНрдпреВрдмреНрд╕ рдкрд░ рдкреНрд░рддрд┐рдмрдВрдз рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдФрд░ рдЙрдирдХреЗ рд▓рд┐рдП рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рдРрд╕реЗ рд╡рд┐рдЪрд┐рддреНрд░ рд░реВрдк рдореЗрдВ рдЪреБрдирд╛ рдЧрдпрд╛ рдерд╛ рдХрд┐ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдореВрд▓реНрдп рдЕрдзрд┐рдХ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рджрд░реНрдЬ рдХрд┐рдП рдЧрдП рдереЗред </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдЦреБрдж рджреЗрдЦреЗрдВ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BrawlerHeroTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HeroTemplate { override val type = Hero.Type.BRAWLER override val favoredDieType = PHYSICAL override val initialHandCapacity = 4 override val initialDice = listOf</span></span></span></span>( Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(VERBAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(VERBAL, <span class="hljs-number"><span class="hljs-number">4</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiceCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (type) { PHYSICAL -&gt; <span class="hljs-number"><span class="hljs-number">8</span></span> to <span class="hljs-number"><span class="hljs-number">12</span></span> SOMATIC -&gt; <span class="hljs-number"><span class="hljs-number">4</span></span> to <span class="hljs-number"><span class="hljs-number">7</span></span> MENTAL -&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> to <span class="hljs-number"><span class="hljs-number">2</span></span> VERBAL -&gt; <span class="hljs-number"><span class="hljs-number">2</span></span> to <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialSkills = listOf( HitSkillTemplate() ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dormantSkills = listOf&lt;SkillTemplate&gt;() } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HunterHeroTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">HeroTemplate { override val type = Hero.Type.HUNTER override val favoredDieType = SOMATIC override val initialHandCapacity = 5 override val initialDice = listOf</span></span></span></span>( Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(SOMATIC, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">6</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(MENTAL, <span class="hljs-number"><span class="hljs-number">4</span></span>), Die(VERBAL, <span class="hljs-number"><span class="hljs-number">4</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDiceCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (type) { PHYSICAL -&gt; <span class="hljs-number"><span class="hljs-number">3</span></span> to <span class="hljs-number"><span class="hljs-number">5</span></span> SOMATIC -&gt; <span class="hljs-number"><span class="hljs-number">7</span></span> to <span class="hljs-number"><span class="hljs-number">11</span></span> MENTAL -&gt; <span class="hljs-number"><span class="hljs-number">4</span></span> to <span class="hljs-number"><span class="hljs-number">7</span></span> VERBAL -&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> to <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> initialSkills = listOf( ShootSkillTemplate() ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dormantSkills = listOf&lt;SkillTemplate&gt;() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд▓реЗрдХрд┐рди рдПрдХ рдЬрдирд░реЗрдЯрд░ рд▓рд┐рдЦрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдХреМрд╢рд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВред </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SkillTemplate</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Skill.Type <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> maxLevel: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> modifier1: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> modifier2: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> isActive <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HitSkillTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SkillTemplate { override val type = Skill.Type.HIT override val maxLevel = 3 override val modifier1 = +1 override val modifier2 = +3 } class ShootSkillTemplate : SkillTemplate { override val type = Skill.Type.SHOOT override val maxLevel = 3 override val modifier1 = +0 override val modifier2 = +2 }</span></span></span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рд╣рдо рд╢рддреНрд░реБрдУрдВ рдФрд░ рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЗ рд╕рдорд╛рди рдмреИрдЪреЛрдВ рдореЗрдВ рдХреМрд╢рд▓ рдХреЛ рд░рд┐рд╡рд╛рдЗрд╡ рдХрд░рдиреЗ рдореЗрдВ рд╕рдлрд▓ рдирд╣реАрдВ рд╣реЛрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдирдП рдХреМрд╢рд▓ рдореЗрдВ рдЦреЗрд▓ рдпрд╛рдВрддреНрд░рд┐рдХреА рдХреЗ рд╡рд┐рд╕реНрддрд╛рд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЦреЗрд▓ рдЗрдВрдЬрди рдореЗрдВ рдПрдХ рдирдпрд╛ рдХреЛрдб рдЬреЛрдбрд╝рдирд╛ - рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЗрд╕ рд╕рдВрдмрдВрдз рдореЗрдВ рдирд╛рдпрдХреЛрдВ рдХреЗ рд╕рд╛рде рднреА рдЖрд╕рд╛рди рд╣реИред </font><font style="vertical-align: inherit;">рд╢рд╛рдпрдж рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдореВрд░реНрдд рд╣реЛ рд╕рдХрддреА рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рдЕрднреА рддрдХ рдПрдХ рддрд░рд╣ рд╕реЗ рдирд╣реАрдВ рдЖрдпрд╛ рд╣реВрдВред </font><font style="vertical-align: inherit;">рд╣рд╛рдБ, рдФрд░ рдИрдорд╛рдирджрд╛рд░ рд╣реЛрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рднреА рдирд╣реАрдВ рдХреАред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateSkill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SkillTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">, initialLevel: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Skill { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> skill = Skill(template.type) skill.isActive = template.isActive skill.level = initialLevel skill.maxLevel = template.maxLevel skill.modifier1 = template.modifier1 skill.modifier2 = template.modifier2 <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> skill } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateHero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">, name: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">""</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Hero { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (type) { BRAWLER -&gt; BrawlerHeroTemplate() HUNTER -&gt; HunterHeroTemplate() } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> hero = Hero(type) hero.name = name hero.isAlive = <span class="hljs-literal"><span class="hljs-literal">true</span></span> hero.favoredDieType = template.favoredDieType hero.hand.capacity = template.initialHandCapacity template.initialDice.forEach { hero.bag.put(it) } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ((t, l) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Die.Type.values().map { it to template.getDiceCount(it) }) { l?.let { hero.addDiceLimit(DiceLimit(t, it.first, it.second, it.first)) } } template.initialSkills .map { generateSkill(it) } .forEach { hero.addSkill(it) } template.dormantSkills .map { generateSkill(it, <span class="hljs-number"><span class="hljs-number">0</span></span>) } .forEach { hero.addDormantSkill(it) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hero }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╕ рдХреБрдЫ рд╣реА рдХреНрд╖рдг рд╣рдбрд╝рддрд╛рд▓реА рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдкреАрдврд╝реА рд╡рд┐рдзрд┐ рдЦреБрдж рдирд╛рдпрдХ рдХреЗ рд╡рд░реНрдЧ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╡рд╛рдВрдЫрд┐рдд рдЯреЗрдореНрдкрд▓реЗрдЯ рдХрд╛ рдЪрдпрди рдХрд░рддреА рд╣реИред </font><font style="vertical-align: inherit;">рджреВрд╕рд░реЗ, рддреБрд░рдВрдд рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ (рдХрднреА-рдХрднреА рдкреАрдврд╝реА рд╕реНрддрд░ рдкрд░ рд╣рдо рдЕрднреА рддрдХ рдЗрд╕реЗ рдирд╣реАрдВ рдЬрд╛рди рдкрд╛рдПрдВрдЧреЗ)ред </font><font style="vertical-align: inherit;">рддреАрд╕рд░рд╛, рдХреЛрдЯрд▓рд┐рди рдПрдХ рдЕрднреВрддрдкреВрд░реНрд╡ рдорд╛рддреНрд░рд╛ рдореЗрдВ рд╕рд┐рдВрдереИрдЯрд┐рдХ рд╢реБрдЧрд░ рд▓реЗ рдЖрдпрд╛, рдЬрд┐рд╕реЗ рдХреБрдЫ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЕрдиреБрдЪрд┐рдд рд░реВрдк рд╕реЗ рджреБрд░реБрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдФрд░ рдЬрд░рд╛ рднреА рд╢рд░реНрдо рдирд╣реАрдВ рдЖрдИред</font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдард╡рд╛рдВ рдЪрд░рдгред </font><font style="vertical-align: inherit;">рдЦреЗрд▓ рдЪрдХреНрд░</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдд рдореЗрдВ, рд╣рдо рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛ рдЧрдП - рдЦреЗрд▓ рдЪрдХреНрд░ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрдиред </font><font style="vertical-align: inherit;">рд╕рд░рд▓ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рд╡реЗ "рдЦреЗрд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП" рд╢реБрд░реВ рд╣реБрдПред </font><font style="vertical-align: inherit;">рдХрдИ рд╢реБрд░реБрдЖрдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдЕрдХреНрд╕рд░ рдЦреЗрд▓ рдмрдирд╛рдиреЗ, рд╕рдм рдХреБрдЫ рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдЗрд╕ рдЪрд░рдг рд╕реЗ рд╕рдЯреАрдХ рд╢реБрд░реБрдЖрдд рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреА рдЕрд░реНрдерд╣реАрди рдЫреЛрдЯреА рдпреЛрдЬрдирд╛рдПрдБ рдЦреАрдВрдЪрдирд╛, рдкреАрдПрдлрдПрдл ... рд▓реЗрдХрд┐рди рд╣рдо рдЬрд▓реНрджрдмрд╛рдЬрд╝реА рдирд╣реАрдВ рдХрд░рддреЗ (рдпрд╣ рдЕрднреА рднреА рд╕реБрдмрд╣ рд╕реЗ рджреВрд░ рд╣реИ), рдФрд░ рдЗрд╕рд▓рд┐рдП рдереЛрдбрд╝рд╛ рдФрд░ рдореЙрдбрд▓рд┐рдВрдЧред </font><font style="vertical-align: inherit;">рд╣рд╛рдБ, рдлрд┐рд░ рд╕реЗред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧрддрд┐рд╡рд┐рдзрд┐ рдЪрд╛рд░реНрдЯ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/up/tm/6t/uptm6t8obpw80m3_cr1i6b9q62e.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЦреЗрд▓ рдЪрдХреНрд░ рдХрд╛ рджрд┐рдпрд╛ рд╣реБрдЖ рдЯреБрдХрдбрд╝рд╛, рдЬреЛ рд╣рдордиреЗ рдКрдкрд░ рдЙрджреНрдзреГрдд рдХрд┐рдпрд╛ рд╣реИ, рдЙрд╕рд╕реЗ рдХрдо рдкрд░рд┐рдорд╛рдг рдХрд╛ рдПрдХ рдХреНрд░рдо рд╣реИред рд╣рдо рдХреЗрд╡рд▓ рдкрд╛рдареНрдпрдХреНрд░рдо рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ, рдЗрд▓рд╛рдХреЗ рдХреА рдЦреЛрдЬ рдХрд░реЗрдВрдЧреЗ (рдФрд░ рд╣рдо рдХреЗрд╡рд▓ рджреЛ рдкреНрд░рдХрд╛рд░ рдХреЗ рдХреНрдпреВрдмреНрд╕ рдХреЗ рд╕рд╛рде рдмреИрдардХ рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВрдЧреЗ) рдФрд░ рдореЛрдбрд╝ рдХреЗ рдЕрдВрдд рдореЗрдВ рдХреНрдпреВрдмреНрд╕ рдХреЛ рдЫреЛрдбрд╝ рджреЗрдВрдЧреЗред рдФрд░ рдПрдХ рдиреБрдХрд╕рд╛рди рдХреЗ рд╕рд╛рде рдкрд░рд┐рджреГрд╢реНрдп рдХреЛ рдкреВрд░рд╛ рдХрд░рдирд╛ (рд╣рд╛рдБ, рд╣рдо рдЕрднреА рддрдХ рдЕрдкрдирд╛ рдЧреЗрдо рдЬреАрддрдиреЗ рдореЗрдВ рд╕рдлрд▓ рдирд╣реАрдВ рд╣реБрдП рд╣реИрдВ) - рд▓реЗрдХрд┐рди рдЖрдк рдХреИрд╕реЗ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ? рдЯрд╛рдЗрдорд░ рд╣рд░ рдореЛрдбрд╝ рдореЗрдВ рдХрдореА рдХрд░реЗрдЧрд╛, рдФрд░ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдкрд░, рдХреБрдЫ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдВ рдФрд░ рдЦреЗрд▓ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ - рд╕рдм рдХреБрдЫ рд╡реИрд╕рд╛ рд╣реА рд╣реЛ рдЬреИрд╕рд╛ рдХрд┐ рдирд┐рдпрдореЛрдВ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИред рдирд╛рдпрдХреЛрдВ рдХреА рдореМрдд рдкрд░ рдПрдХ рдФрд░ рдЦреЗрд▓ рдкреВрд░рд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдХреЛрдИ рднреА рдЙрдиреНрд╣реЗрдВ рдиреБрдХрд╕рд╛рди рдирд╣реАрдВ рдкрд╣реБрдВрдЪрд╛рдПрдЧрд╛, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЗрд╕реЗ рдЫреЛрдбрд╝ рджреЗрдВрдЧреЗред рдЬреАрддрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕рднреА рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЛ рдмрдВрдж рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ рдХреЗрд╡рд▓ рдПрдХ рд╣реА рд╣реЛрдиреЗ рдкрд░ рднреА рдореБрд╢реНрдХрд┐рд▓ рд╣реИред рдЗрд╕рд▓рд┐рдП, рдЗрд╕ рдХреНрд╖рдг рдХреЛ рдЫреЛрдбрд╝ рджреЗрдВред рдпрд╣ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕реНрдкреНрд░реЗ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИ - рдпрд╣ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рд╕рд╛рд░ рдХреЛ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рдФрд░ рдмрд╛рдХреА рдХреЛ рдмрд╛рдж рдореЗрдВ рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореЗрд░реЗ рдЦрд╛рд▓реА рд╕рдордп рдореЗрдВ (рдпрд╛ рдмрд▓реНрдХрд┐, рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП)рдФрд░ рддреБрдо - рдПрдХ рдЦреЗрд▓ рд▓рд┐рдЦреЛ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрдиреЗ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рдкрдиреЛрдВ рдХрд╛)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддреЛ, рдкрд╣рд▓реА рдмрд╛рдд рдпрд╣ рддрдп рдХрд░рдирд╛ рд╣реИ рдХрд┐ рд╣рдореЗрдВ рдХрд┐рди рд╡рд╕реНрддреБрдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реАрд░реЛрдЬред рд▓рд┐рдкрд┐ред рд╕реНрдерд╛рдиред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рдЙрдирдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХреА рд╣реИ - рд╣рдо рдЗрд╕реЗ рджреЛрд╣рд░рд╛рдПрдВрдЧреЗ рдирд╣реАрдВред рд╣рдо рдХреЗрд╡рд▓ рдЙрди рдЗрд▓рд╛рдХреЛрдВ рдХреЗ рдкреИрдЯрд░реНрди рдкрд░ рдзреНрдпрд╛рди рджреЗрддреЗ рд╣реИрдВ, рдЬрд┐рдирдХрд╛ рдЙрдкрдпреЛрдЧ рд╣рдо рдЕрдкрдиреЗ рдЫреЛрдЯреЗ рд╕реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдХрд░реЗрдВрдЧреЗред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestLocationTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">LocationTemplate { override val name = "Test" override val description = "Some Description" override val basicClosingDifficulty = 0 override val enemyCardsCount = 0 override val obstacleCardsCount = 0 override val bagTemplate = BagTemplate</span></span></span></span>().apply { addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.PHYSICAL)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.SOMATIC)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.MENTAL)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.VERBAL)) addPlan(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, SingleDieTypeFilter(Die.Type.DIVINE)) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyCardPool = emptyList&lt;EnemyTemplate&gt;() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> obstacleCardPool = emptyList&lt;ObstacleTemplate&gt;() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> specialRules = emptyList&lt;SpecialRule&gt;() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдмреИрдЧ рдореЗрдВ рдХреЗрд╡рд▓ "рд╕рдХрд╛рд░рд╛рддреНрдордХ" рдХреНрдпреВрдмреНрд╕ рд╣реИрдВ - рдиреАрд▓реЗ, рд╣рд░реЗ, рдмреИрдВрдЧрдиреА, рдкреАрд▓реЗ рдФрд░ рдиреАрд▓реЗред рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдХреЛрдИ рджреБрд╢реНрдорди рдФрд░ рдмрд╛рдзрд╛рдПрдВ рдирд╣реАрдВ рд╣реИрдВ, рдЦрд▓рдирд╛рдпрдХ рдФрд░ рдШрд╛рд╡ рдирд╣реАрдВ рдкрд╛рдП рдЬрд╛рддреЗ рд╣реИрдВред рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдирд┐рдпрдо рднреА рдирд╣реАрдВ рд╣реИрдВ - рдЙрдирдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдмрд╣реБрдд рдЧреМрдг рд╣реИред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд░рдХрд░рд╛рд░ рдХреНрдпреВрдмреНрд╕ рдХреЗ рд▓рд┐рдП рдвреЗрд░ред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╛ рдПрдХ рдирд┐рд╡рд╛рд░рдХ рдвреЗрд░ред рдЪреВрдВрдХрд┐ рд╣рдо рдЗрд▓рд╛рдХреЗ рдХреЗ рдмреИрдЧ рдореЗрдВ рдиреАрд▓реЗ рдХреНрдпреВрдмреНрд╕ рдбрд╛рд▓рддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдЬрд╛рдВрдЪ рдореЗрдВ рдФрд░ рдЙрдкрдпреЛрдЧ рдХреЗ рдмрд╛рдж, рдПрдХ рд╡рд┐рд╢реЗрд╖ рдвреЗрд░ рдореЗрдВ рд░рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рд╡рд░реНрдЧ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЗрд╕рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИ </font></font><code>Pile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдВрд╢реЛрдзрдХред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╣реА рд╣реИ, рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рдорд╛рди рдЬрд┐рдиреНрд╣реЗрдВ рдбрд╛рдИ рд░реЛрд▓ рдХреЗ рдкрд░рд┐рдгрд╛рдо рд╕реЗ рдЬреЛрдбрд╝рд╛ рдпрд╛ рдШрдЯрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рдХреНрдпреВрдм рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реИрд╢реНрд╡рд┐рдХ рд╕рдВрд╢реЛрдзрдХ рдпрд╛ рдПрдХ рдЕрд▓рдЧ рд╕рдВрд╢реЛрдзрдХ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╣рдо рджреВрд╕рд░рд╛ рд╡рд┐рдХрд▓реНрдк (рдФрд░ рдЕрдзрд┐рдХ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ) рдЪреБрдиреЗрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдПрдХ рд╕рд╛рдзрд╛рд░рдг рд╡рд░реНрдЧ рдмрдирд╛рдПрдВрдЧреЗ </font></font><code>DiePair</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiePair</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> die: Die, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> modifier: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд╡рд░реНрдгреЛрдВ рдХрд╛ рд╕реНрдерд╛рдиред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рдЕрдЪреНрдЫреЗ рддрд░реАрдХреЗ рд╕реЗ, рдЗрд╕ рдХреНрд╖рдг рдХреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЯреНрд░реИрдХ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрд╕ рд╕реНрдерд╛рди рдХреЗ рдирдХреНрд╢реЗ </font></font><code>Map&lt;Location, List&lt;Hero&gt;&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╣рд╛рдВ рдкреНрд░рддреНрдпреЗрдХ рдЗрд▓рд╛рдХреЗ рдореЗрдВ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдирд╛рдпрдХреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реЛрдЧреА (рд╕рд╛рде рд╣реА рд╡рд┐рдкрд░реАрдд рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рдзрд┐ - рдЙрд╕ рдЗрд▓рд╛рдХреЗ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдЬрд┐рд╕рдореЗрдВ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдирд╛рдпрдХ рд╕реНрдерд┐рдд рд╣реИ)ред рдпрджрд┐ рдЖрдк рдЗрд╕ рдорд╛рд░реНрдЧ рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓реЗрддреЗ рд╣реИрдВ, рддреЛ </font></font><code>Location</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди </font><font style="vertical-align: inherit;">рд╡рд░реНрдЧ рдореЗрдВ </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ </font><font style="vertical-align: inherit;">рдЬреЛрдбрд╝рдирд╛ рди рднреВрд▓реЗрдВ </font></font><code>equals()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>hashCode()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдореБрдЭреЗ рдЖрд╢рд╛ рд╣реИ, рдпрд╣ рд╕рдордЭрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдХреНрдпреЛрдВред рд╣рдо рдЗрд╕ рдкрд░ рд╕рдордп рдмрд░реНрдмрд╛рдж рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ, рдХреНрдпреЛрдВрдХрд┐ рдХреНрд╖реЗрддреНрд░ рдХреЗрд╡рд▓ рдПрдХ рд╣реИ рдФрд░ рдирд╛рдпрдХ рдЗрд╕реЗ рдХрд╣реАрдВ рднреА рдирд╣реАрдВ рдЫреЛрдбрд╝рддреЗ рд╣реИрдВред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд╛рдпрдХ рдХреЗ рд╣рд╛рде рдХреА рдЬрд╛рдБрдЪред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреЗрд▓ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рдирд╛рдпрдХреЛрдВ рдХреЛ рд▓рдЧрд╛рддрд╛рд░ рдЪреЗрдХ (рдЬреЛ рдиреАрдЪреЗ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ) рд╕реЗ рдЧреБрдЬрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рддреН, рд╣рд╛рде рд╕реЗ рдХреНрдпреВрдмреНрд╕ рд▓реЗрддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдлреЗрдВрдХрддреЗ рд╣реИрдВ (рд╕рдВрд╢реЛрдзрдХ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ), рдкрд░рд┐рдгрд╛рдо рдХреЛ рд╕рдореЗрдХрд┐рдд рдХрд░реЗрдВ рдпрджрд┐ рдХрдИ рдХреНрдпреВрдмреНрд╕ рд╣реИрдВ (рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдЕрдзрд┐рдХрддрдо / рдиреНрдпреВрдирддрдо, рдФрд╕рдд, рдЖрджрд┐), рдЙрдиреНрд╣реЗрдВ рдлреЗрдВрдХ рдХреЗ рд╕рд╛рде рддреБрд▓рдирд╛ рдХрд░реЗрдВред рдПрдХ рдФрд░ рдШрди (рдПрдХ рдЬрд┐рд╕реЗ рдХреНрд╖реЗрддреНрд░ рдХреЗ рдмреИрдЧ рд╕реЗ рдирд┐рдХрд╛рд▓ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ) рдФрд░, рдкрд░рд┐рдгрд╛рдо рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреНрд░рд┐рдпрд╛рдПрдВ рдХрд░рддреЗ рд╣реИрдВред рд▓реЗрдХрд┐рди рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рд╕рдордЭрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдирд╛рдпрдХ рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ рдкрд░реАрдХреНрд╖рдг рдкрд╛рд╕ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реИ, рдЕрд░реНрдерд╛рдд, рдЙрд╕рдХреЗ рд╣рд╛рде рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдХреНрдпреВрдмреНрд╕ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВред рдЗрд╕рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рд╕рд░рд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ </font></font><code>HandFilter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HandFilter</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(hand: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hand</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЗрдирдкреБрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдирд╛рдпрдХ рдХреЗ рд╣рд╛рде (рдХреНрд▓рд╛рд╕ рдСрдмреНрдЬреЗрдХреНрдЯ </font></font><code>Hand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХреЛ рд▓реЗрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">рдФрд░ </font><font style="vertical-align: inherit;">рдЪреЗрдХ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ </font><font style="vertical-align: inherit;">рд╡рд╛рдкрд╕ рд▓реМрдЯрддреЗ </font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реИрдВ </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдЦреЗрд▓ рдХреЗ рд╣рдорд╛рд░реЗ рдЯреБрдХрдбрд╝реЗ рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рд╣реА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: рдпрджрд┐ рдиреАрд▓рд╛, рд╣рд░рд╛, рдмреИрдВрдЧрдиреА рдпрд╛ рдкреАрд▓рд╛ рдШрди рдорд┐рд▓рддрд╛ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдирд╛рдпрдХ рдХреЗ рд╣рд╛рде рдореЗрдВ рдПрдХ рд╣реА рд░рдВрдЧ рдХрд╛ рдШрди рд╣реИ рдпрд╛ рдирд╣реАрдВред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SingleDieHandFilter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">vararg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types: Die.Type) : HandFilter { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(hand: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hand</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (<span class="hljs-number"><span class="hljs-number">0</span></span> until hand.dieCount).mapNotNull { hand.dieAt(it) }.any { it.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types } || (Die.Type.ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types &amp;&amp; hand.allyDieCount &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд╛рдБ, рдлрд┐рд░ рд╕реЗ рдХрд╛рд░реНрдпрд╛рддреНрдордХрддрд╛ред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдХреНрд░рд┐рдп / рдЪрдпрдирд┐рдд рдЖрдЗрдЯрдоред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдм рдЬрдм рд╣рдордиреЗ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ рдХрд┐ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд╛рдпрдХ рдХрд╛ рд╣рд╛рде рдЙрдкрдпреБрдХреНрдд рд╣реИ, рддреЛ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рд╡рд╣ рдЙрд╕ рдкрд╛рд╕реЗ (рдпрд╛ рдХреНрдпреВрдмреНрд╕) рдХреЛ рдЪреБрдиреЗ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╡рд╣ рдЗрд╕ рдкрд░реАрдХреНрд╖рд╛ рдХреЛ рдкрд╛рд╕ рдХрд░реЗрдЧрд╛ред рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рдЙрдкрдпреБрдХреНрдд рдкрджреЛрдВ (рдЬрд┐рд╕рдореЗрдВ рд╡рд╛рдВрдЫрд┐рдд рдкреНрд░рдХрд╛рд░ рдХреЗ рдХреНрдпреВрдмреНрд╕ рд╣реИрдВ) рдХреЛ рдЙрдЬрд╛рдЧрд░ (рд╣рд╛рдЗрд▓рд╛рдЗрдЯ) рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рджреВрд╕рд░реЗ, рдЖрдкрдХреЛ рдХрд┐рд╕реА рддрд░рд╣ рдЪрдпрдирд┐рдд рдХреНрдпреВрдмреНрд╕ рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдЗрди рджреЛрдиреЛрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП, рдПрдХ рд╡рд░реНрдЧ рдЙрдкрдпреБрдХреНрдд рд╣реИ </font></font><code>HandMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдкреВрд░реНрдгрд╛рдВрдХ (рдЪрдпрдирд┐рдд рдкрджреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛) рдФрд░ рдЙрдиреНрд╣реЗрдВ рдЬреЛрдбрд╝рдиреЗ рдФрд░ рд╣рдЯрд╛рдиреЗ рдХреЗ рддрд░реАрдХреЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HandMask</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> positions = mutableSetOf&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allyPositions = mutableSetOf&lt;<span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> positionCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = positions.size <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allyPositionCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = allyPositions.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = positions.add(position) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removePosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = positions.remove(position) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAllyPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = allyPositions.add(position) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeAllyPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = allyPositions.remove(position) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = position <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> positions <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkAllyPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = position <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> allyPositions <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!removePosition(position)) { addPosition(position) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">switchAllyPosition</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!removeAllyPosition(position)) { addAllyPosition(position) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { positions.clear() allyPositions.clear() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореИрдВрдиреЗ рдкрд╣рд▓реЗ рд╣реА рдХрд╣рд╛ рд╣реИ рдХрд┐ рдореИрдВ рдПрдХ рдЕрд▓рдЧ рд╣рд╛рде рдореЗрдВ рд╕рдлреЗрдж рдХреНрдпреВрдмреНрд╕ рдХреЗ рднрдВрдбрд╛рд░рдг рдХреЗ "рд╕рд░рд▓" рд╡рд┐рдЪрд╛рд░ рд╕реЗ рдХреИрд╕реЗ рдкреАрдбрд╝рд┐рдд рд╣реВрдВ? рдЗрд╕ рдореВрд░реНрдЦрддрд╛ рдХреЗ рдХрд╛рд░рдг, рдЖрдкрдХреЛ рджреЛ рд╕реЗрдЯреЛрдВ рд╕реЗ рдирд┐рдкрдЯрдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдкреНрд░рд╕реНрддреБрдд рдХрд┐рдП рдЧрдП рдкреНрд░рддреНрдпреЗрдХ рддрд░реАрдХреЗ рдХреА рдирдХрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдпрджрд┐ рдХрд┐рд╕реА рдХреЗ рдкрд╛рд╕ рдЗрд╕ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рдЪрд╛рд░ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рд▓реЗрдХрд┐рди рд╕рдлреЗрдж рдХреНрдпреВрдмреНрд╕ рдХреЗ рд▓рд┐рдП рд╕реВрдЪрдХрд╛рдВрдХ рд╕реМ рд╕реЗ рд╢реБрд░реВ рд╣реЛрддреЗ рд╣реИрдВ - рдпрд╛ рдХреБрдЫ рдФрд░ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдЕрд╕реНрдкрд╖реНрдЯ) - рдЙрдиреНрд╣реЗрдВ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд╕рд╛рдЭрд╛ рдХрд░реЗрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡реИрд╕реЗ, рдвреЗрд░ ( </font></font><code>PileMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рд╕реЗ рдХреНрдпреВрдмреНрд╕ рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдорд╛рди рд╡рд░реНрдЧ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рдпрд╣ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдХреЗ рджрд╛рдпрд░реЗ рд╕реЗ рдмрд╛рд╣рд░ рд╣реИред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд╛рде рд╕реЗ рдХреНрдпреВрдмреНрд╕ рдХреА рдкрд╕рдВрджред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рд╕реНрд╡реАрдХрд╛рд░реНрдп рд╕реНрдерд┐рддрд┐ рдХреЛ "рд╣рд╛рдЗрд▓рд╛рдЗрдЯ" рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ, рдХреНрдпреВрдмреНрд╕ рдЪреБрдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рдЗрд╕ "рд╣рд╛рдЗрд▓рд╛рдЗрдЯ" рдХреЛ рдмрджрд▓рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред рдпрд╣реА рд╣реИ, рдпрджрд┐ рдХрд┐рд╕реА рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдЕрдкрдиреЗ рд╣рд╛рде рд╕реЗ рдХреЗрд╡рд▓ рдПрдХ рдорд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рддреЛ рдЗрд╕ рдорд░ рдХреЛ рдЪреБрдирддреЗ рд╕рдордп, рдЕрдиреНрдп рд╕рднреА рдкрджреЛрдВ рдХреЛ рджреБрд░реНрдЧрдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдг рдореЗрдВ, рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЗ рд▓рдХреНрд╖реНрдп рдХреА рдкреВрд░реНрддрд┐ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ - рдЕрд░реНрдерд╛рдд, рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдЪрдпрдирд┐рдд рдХреНрдпреВрдмреНрд╕ рдПрдХ рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рдкрд░реАрдХреНрд╖рд╛ рдХреЛ рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИрдВ рдпрд╛ рдирд╣реАрдВред рдЗрд╕ рддрд░рд╣ рдХреЗ рдХрдард┐рди рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдПрдХ рдЬрдЯрд┐рд▓ рд╡рд░реНрдЧ рдХреЗ рдЬрдЯрд┐рд▓ рдЙрджрд╛рд╣рд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HandMaskRule</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> hand: Hand) { <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAllyPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCheckedDice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: List&lt;Die&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((<span class="hljs-number"><span class="hljs-number">0</span></span> until hand.dieCount).filter(mask::checkPosition).map(hand::dieAt)) .plus((<span class="hljs-number"><span class="hljs-number">0</span></span> until hand.allyDieCount).filter(mask::checkAllyPosition).map(hand::allyDieAt)) .filterNotNull() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╛рдлреА рдЬрдЯрд┐рд▓ рддрд░реНрдХ, рдореИрдВ рд╕рдордЭреВрдВрдЧрд╛ рдФрд░ рдорд╛рдл рдХрд░ рджреВрдВрдЧрд╛ рдЕрдЧрд░ рдпрд╣ рд╡рд░реНрдЧ рдЖрдкрдХреЗ рд▓рд┐рдП рд╕рдордЭ рд╕реЗ рдмрд╛рд╣рд░ рд╣реИред рдФрд░ рдлрд┐рд░ рднреА рд╕рдордЭрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕ рд╡рд░реНрдЧ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣рдореЗрд╢рд╛ рд╣рд╛рде (рд╡рд╕реНрддреБ </font></font><code>Hand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдХреЗ </font><font style="vertical-align: inherit;">рд╕рдВрджрд░реНрдн рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд </font><font style="vertical-align: inherit;">рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╡реЗ рдирд┐рдкрдЯреЗрдВрдЧреЗред рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рдзрд┐ рдПрдХ рдореБрдЦреМрдЯрд╛ ( </font></font><code>HandMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдкреНрд░рд╛рдкреНрдд рдХрд░рддреА рд╣реИ </font><font style="vertical-align: inherit;">, рдЬреЛ рдЪрдпрди рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИ (рдХреМрди рд╕реЗ рдкрдж рдЦрд┐рд▓рд╛рдбрд╝реА рджреНрд╡рд╛рд░рд╛ рдЪреБрдиреЗ рдЧрдП рд╣реИрдВ рдФрд░ рдЬреЛ рдирд╣реАрдВ рд╣реИрдВ)ред рд╡рд┐рдзрд┐ </font></font><code>checkMask()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рд┐рдкреЛрд░реНрдЯ рдХрд░рддреА рд╣реИ рдХрд┐ рдЪрдпрдирд┐рдд рдХреНрдпреВрдмреНрд╕ рдкрд░реАрдХреНрд╖рдг рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИрдВ рдпрд╛ рдирд╣реАрдВред рд╡рд┐рдзрд┐ </font></font><code>isPositionActive()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╣рддреА рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реНрдерд┐рддрд┐ рдХреЛ рдЙрдЬрд╛рдЧрд░ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ - рдХреНрдпрд╛ рдкрд░реАрдХреНрд╖рдг рдХреЗ рд▓рд┐рдП рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдШрди рдЬреЛрдбрд╝рдирд╛ рд╕рдВрднрд╡ рд╣реИ (рдпрд╛ рдкрд╣рд▓реЗ рд╕реЗ рдЪрдпрдирд┐рдд рдПрдХ рдШрди рдХреЛ рд╣рдЯрд╛ рджреЗрдВ)ред </font></font><code>isAllyPositionActive()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдлреЗрдж рдкрд╛рд╕рд╛ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">рд╕рдорд╛рди рд╣реИ (рд╣рд╛рдВ, рдореБрдЭреЗ рдкрддрд╛ рд╣реИ, рдореИрдВ рдПрдХ рдмреЗрд╡рдХреВрдл рд╣реВрдВ)ред рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдФрд░ рд╕рд╣рд╛рдпрдХ рд╡рд┐рдзрд┐</font></font><code>getCheckedDice()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдмрд╕ рдорд╛рд╕реНрдХ рдХреЗ рдЕрдиреБрд░реВрдк рд╣рд╛рде рд╕реЗ рд╕рднреА рдХреНрдпреВрдмреНрд╕ рдХреА рдПрдХ рд╕реВрдЪреА рджреЗрддрд╛ рд╣реИ - рдпрд╣ рдЙрди рд╕рднреА рдХреЛ рдПрдХ рдмрд╛рд░ рдореЗрдВ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдЙрдиреНрд╣реЗрдВ рдореЗрдЬ рдкрд░ рдлреЗрдВрдХ рджреЗрдВ рдФрд░ рдордЬрд╝реЗрджрд╛рд░ рджрд╕реНрддрдХ рдХрд╛ рдЖрдирдВрдж рд▓реЗрдВ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╡реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рджрд┐рд╢рд╛рдУрдВ рдореЗрдВ рдмрд┐рдЦреЗрд░рддреЗ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдореЗрдВ рдЗрд╕ рд╕рд╛рд░ рд╡рд░реНрдЧ (рдЖрд╢реНрдЪрд░реНрдп, рдЖрд╢реНрдЪрд░реНрдп!) рдХреЗ рджреЛ рдЕрд╣рд╕рд╛рд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред рдкрд╣рд▓рд╛ рдкрд░реАрдХреНрд╖рдг рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдирдпрд╛ рдХреНрдпреВрдм (рд╕рдлреЗрдж рдирд╣реАрдВ) рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдкрд░ рдкрд░реАрдХреНрд╖рдг рдкрд╛рд╕ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред рдЬреИрд╕рд╛ рдХрд┐ рдЖрдкрдХреЛ рдпрд╛рдж рд╣реИ, рдЗрд╕ рддрд░рд╣ рдХреЗ рдЪреЗрдХ рдореЗрдВ рдХрд┐рд╕реА рднреА рдиреАрд▓реЗ рдХреНрдпреВрдмреНрд╕ рдХреЛ рдЬреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatDieAcquireHandMaskRule</span></span></span></span>(hand: Hand, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> requiredType: Die.Type) : HandMaskRule(hand) { <span class="hljs-comment"><span class="hljs-comment">/** * Define how many dice of specified type are currently checked */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkedDieCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (<span class="hljs-number"><span class="hljs-number">0</span></span> until hand.dieCount) .filter(mask::checkPosition) .mapNotNull(hand::dieAt) .count { it.type === requiredType } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (mask.allyPositionCount == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; checkedDieCount(mask) == <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = with(hand.dieAt(position)) { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { mask.checkPosition(position) -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == <span class="hljs-literal"><span class="hljs-literal">null</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type === Die.Type.DIVINE -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type === requiredType &amp;&amp; checkedDieCount(mask) &lt; <span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAllyPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>   .        .     .           (capacity),            ( ).     ,      (   ,  ).         . <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiscardExtraDiceHandMaskRule</span></span></span></span>(hand: Hand) : HandMaskRule(hand) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> minDiceToDiscard = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hand.dieCount &gt; hand.capacity) min(hand.dieCount - hand.woundCount, hand.dieCount - hand.capacity) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> maxDiceToDiscard = hand.dieCount - hand.woundCount <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = (mask.positionCount <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> minDiceToDiscard..maxDiceToDiscard) &amp;&amp; (mask.allyPositionCount <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..hand.allyDieCount) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { mask.checkPosition(position) -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> hand.dieAt(position) == <span class="hljs-literal"><span class="hljs-literal">null</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> hand.dieAt(position)!!.type == Die.Type.WOUND -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> mask.positionCount &lt; maxDiceToDiscard -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAllyPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = hand.allyDieAt(position) != <span class="hljs-literal"><span class="hljs-literal">null</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nezhdanchik: </font></font><code>Hand</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╕рдВрдкрддреНрддрд┐ рдЕрдЪрд╛рдирдХ </font><font style="vertical-align: inherit;">рдЙрд╕ рд╡рд░реНрдЧ рдореЗрдВ </font><font style="vertical-align: inherit;">рджрд┐рдЦрд╛рдИ рджреА </font><font style="vertical-align: inherit;">рдЬреЛ </font></font><code>woundCount</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рдореМрдЬреВрдж рдирд╣реАрдВ рдереАред рдЖрдк рдЗрд╕рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реНрд╡рдпрдВ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рдЖрд╕рд╛рди рд╣реИред рдЙрд╕реА рд╕рдордп рдЕрднреНрдпрд╛рд╕ рдХрд░реЗрдВред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╛рд╕рд┐рдВрдЧ рдЪреЗрдХред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдВрдд рдореЗрдВ рдЙрдиреНрд╣реЗрдВ рдорд┐рд▓ рдЧрдпрд╛ред рдЬрдм рдкрд╛рд╕рд╛ рд╣рд╛рде рд╕реЗ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрдиреНрд╣реЗрдВ рдлреЗрдВрдХрдиреЗ рдХрд╛ рд╕рдордп рдЖ рдЧрдпрд╛ рд╣реИред рдкреНрд░рддреНрдпреЗрдХ рдХреНрдпреВрдм рдХреЗ рд▓рд┐рдП рдпрд╣ рд╡рд┐рдЪрд╛рд░ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ: рдЗрд╕рдХрд╛ рдЖрдХрд╛рд░, рдЗрд╕рдХреЗ рд╕рдВрд╢реЛрдзрдХ, рдЗрд╕рдХреЗ рдлреЗрдВрдХрдиреЗ рдХрд╛ рдкрд░рд┐рдгрд╛рдоред рд╣рд╛рд▓рд╛рдБрдХрд┐ рдПрдХ рдмрд╛рд░ рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рдХреНрдпреВрдм рдХреЛ рдмреИрдЧ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рд░реЛрд▓ рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдПрдХрддреНрд░ рдХрд░рддреЗ рд╣реБрдП, рдЗрд╕рдХреЗ рдЦрд┐рд▓рд╛рдл рдХрдИ рдкрд╛рд╕рд╛ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЪрд▓реЛ рдкрд╛рд╕рд╛ рд╕реЗ рдЕрдореВрд░реНрдд рд╣реИ рдФрд░ рдпреБрджреНрдз рдХреЗ рдореИрджрд╛рди рдкрд░ рд╕реИрдирд┐рдХреЛрдВ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреЗ рд╣реИрдВред рдПрдХ рдУрд░, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рджреБрд╢реНрдорди рд╣реИ - рд╡рд╣ рдХреЗрд╡рд▓ рдПрдХ рд╣реИ, рд▓реЗрдХрд┐рди рд╡рд╣ рдордЬрдмреВрдд рдФрд░ рдХреНрд░реВрд░ рд╣реИред рджреВрд╕рд░реА рдУрд░, рдПрдХ рдкреНрд░рддрд┐рджреНрд╡рдВрджреНрд╡реА рдЙрд╕рдХреЗ рдмрд░рд╛рдмрд░ рддрд╛рдХрдд рдореЗрдВ, рд▓реЗрдХрд┐рди рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рдеред рд▓рдбрд╝рд╛рдИ рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдПрдХ рдЫреЛрдЯреА рдЭрдбрд╝рдк рдореЗрдВ рддрдп рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рд╡рд┐рдЬреЗрддрд╛ рдХреЗрд╡рд▓ рдПрдХ рд╣реА рд╣реЛ рд╕рдХрддрд╛ рд╣реИ ...</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд╖рдорд╛ рдХрд░реЗрдВ, рджреВрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ред рдЕрдкрдиреА рд╕рд╛рдорд╛рдиреНрдп рд▓рдбрд╝рд╛рдИ рдХреЛ рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╡рд░реНрдЧ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DieBattleCheck</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> method: Method, opponent: DiePair? = <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Method</span></span></span><span class="hljs-class"> </span></span>{ SUM, AVG_UP, AVG_DOWN, MAX, MIN } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrap</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pair: DiePair, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> roll: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> DiePair.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">with</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(roll: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Wrap(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, roll) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> opponent: Wrap? = opponent?.with(<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroics = ArrayList&lt;Wrap&gt;() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isRolled = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroPairCount <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = heroics.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOpponentPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = opponent?.pair <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOpponentResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { isRolled -&gt; opponent?.roll ?: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Not rolled yet"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addHeroPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pair: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DiePair</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (method == Method.SUM &amp;&amp; heroics.size &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { pair.modifier = <span class="hljs-number"><span class="hljs-number">0</span></span> } heroics.add(pair with <span class="hljs-number"><span class="hljs-number">0</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addHeroPair</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(die: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Die</span></span></span></span><span class="hljs-function"><span class="hljs-params">, modifier: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = addHeroPair(DiePair(die, modifier)) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearHeroPairs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = heroics.clear() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHeroPairAt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = heroics[index].pair <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getHeroResultAt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { isRolled -&gt; <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { (index <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> until heroics.size) -&gt; heroics[index].roll <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-number"><span class="hljs-number">0</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Not rolled yet"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">roll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">roll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(wrap: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Wrap</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { wrap.roll = wrap.pair.die.roll() } isRolled = <span class="hljs-literal"><span class="hljs-literal">true</span></span> opponent?.let { roll(it) } heroics.forEach { roll(it) } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isRolled) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Not rolled yet"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> opponentResult = opponent?.let { it.roll + it.pair.modifier } ?: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> stats = heroics.map { it.roll + it.pair.modifier } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroResult = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (method) { DieBattleCheck.Method.SUM -&gt; stats.sum() DieBattleCheck.Method.AVG_UP -&gt; ceil(stats.average()).toInt() DieBattleCheck.Method.AVG_DOWN -&gt; floor(stats.average()).toInt() DieBattleCheck.Method.MAX -&gt; stats.max() ?: <span class="hljs-number"><span class="hljs-number">0</span></span> DieBattleCheck.Method.MIN -&gt; stats.min() ?: <span class="hljs-number"><span class="hljs-number">0</span></span> } result = heroResult - opponentResult } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреВрдВрдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдХреНрдпреВрдм рдореЗрдВ рдПрдХ рд╕рдВрд╢реЛрдзрдХ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд╣рдо рдбреЗрдЯрд╛ рдХреЛ рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░реЗрдВрдЧреЗ </font></font><code>DiePair</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рд▓рдЧрддрд╛ рд╣реИред рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдирд╣реАрдВ, рдХреНрдпреЛрдВрдХрд┐ рдШрди рдФрд░ рд╕рдВрд╢реЛрдзрдХ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдкрдХреЛ рдЗрд╕рдХреЗ рдлреЗрдВрдХ рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рднреА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ (рдпрд╛рдж рд░рдЦреЗрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдШрди рд╕реНрд╡рдпрдВ рдЗрд╕ рдореВрд▓реНрдп рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рдЗрд╕реЗ рдЗрд╕рдХреЗ рдЧреБрдгреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдВрдЧреНрд░рд╣реАрдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ)ред рдЗрд╕рд▓рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рдЬреЛрдбрд╝реА рдХреЛ рдПрдХ рдЖрд╡рд░рдг ( </font></font><code>Wrap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдореЗрдВ рд▓рдкреЗрдЯреЗрдВ </font><font style="vertical-align: inherit;">ред рдЗрдиреНрдлрд┐рдХреНрд╕ рд╡рд┐рдзрд┐ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ </font></font><code>with</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд╣реЗрд╣ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд▓рд╛рд╕ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдПрдХрддреНрд░реАрдХрд░рдг рд╡рд┐рдзрд┐ (рдЖрдВрддрд░рд┐рдХ рдЧрдгрди рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг </font></font><code>Method</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдФрд░ рдкреНрд░рддрд┐рджреНрд╡рдВрджреНрд╡реА (рдЬреЛ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ) </font><font style="vertical-align: inherit;">рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рдЙрдкрдпреБрдХреНрдд рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣реАрд░реЛ рдХреНрдпреВрдмреНрд╕ рдХреА рд╕реВрдЪреА рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИред рдпрд╣ рдЬреЛрдбрд╝реЗ рдХреЛ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддрд░реАрдХреЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдЙрдирдХреЗ рдлреЗрдВрдХрддрд╛ рдХреЗ рдкрд░рд┐рдгрд╛рдо (рдпрджрд┐ рдХреЛрдИ рд╣реЛ)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐</font></font><code>roll()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдХреНрдпреВрдм рдХреЗ рд╕рдорд╛рди рдирд╛рдо рдХреА рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ, рдордзреНрдпрд╡рд░реНрддреА рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдмрдЪрд╛рддрд╛ рд╣реИ рдФрд░ рдПрдХ рдзреНрд╡рдЬ рдХреЗ рд╕рд╛рде рдЗрд╕рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рддрдереНрдп рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рддрд╛ рд╣реИ </font></font><code>isRolled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдлреЗрдВрдХ рдХрд╛ рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдо рддреБрд░рдВрдд рдЧрдгрдирд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╡рд┐рдзрд┐ рд╣реИ </font></font><code>calculateResult()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬрд┐рд╕рдХрд╛ рдкрд░рд┐рдгрд╛рдо рд╕рдВрдкрддреНрддрд┐ рдХреЗ рд▓рд┐рдП рдЕрдВрддрд┐рдо рдореВрд▓реНрдп рд▓рд┐рдЦрдирд╛ рд╣реИ </font></font><code>result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ? рдПрдХ рдирд╛рдЯрдХреАрдп рдкреНрд░рднрд╛рд╡ рдХреЗ рд▓рд┐рдПред рд╡рд┐рдзрд┐ </font></font><code>roll()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдИ рдмрд╛рд░ рдЪрд▓рд╛рдИ рдЬрд╛рдПрдЧреА, рд╣рд░ рдмрд╛рд░ рдХреНрдпреВрдмреНрд╕ рдХреЗ рдЪреЗрд╣рд░реЗ рдкрд░ рд╡рд┐рднрд┐рдиреНрди рдореВрд▓реНрдпреЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ (рдареАрдХ рдЙрд╕реА рддрд░рд╣ рдЬреИрд╕реЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЬреАрд╡рди рдореЗрдВ)ред рдФрд░ рдХреЗрд╡рд▓ рдЬрдм рдХреНрдпреВрдмреНрд╕ рдЯреЗрдмрд▓ рдкрд░ рд╢рд╛рдВрдд рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрдиреЗ рднрд╛рдЧреНрдп рдХреЛ</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдо (рдирд╛рдпрдХ рдХреЗ рдХреНрдпреВрдмреНрд╕ рдФрд░ рдкреНрд░рддрд┐рджреНрд╡рдВрджреНрд╡реА рдХреЗ рдХреНрдпреВрдмреНрд╕ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЗ рдмреАрдЪ рдХрд╛ рдЕрдВрддрд░) </font><font style="vertical-align: inherit;">рд╕реАрдЦрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред рддрдирд╛рд╡ рдХреЛ рджреВрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореИрдВ рдХрд╣реВрдВрдЧрд╛ рдХрд┐ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0 рдХрд╛</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░рд┐рдгрд╛рдо </font><font style="vertical-align: inherit;">рдкрд░реАрдХреНрд╖рдг рдХрд╛ рдПрдХ рд╕рдлрд▓ рдкрд╛рд╕ рдорд╛рдирд╛ рдЬрд╛рдПрдЧрд╛ред</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреЗрд▓ рдЗрдВрдЬрди рдХреА рд╕реНрдерд┐рддрд┐ред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░рд┐рд╖реНрдХреГрдд рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдЫрд╛рдВрдЯрд╛ рдЧрдпрд╛, рдЕрдм рдЪреАрдЬреЗрдВ рд╕рд░рд▓ рд╣реИрдВред рдпрд╣ рдХрд╣рдирд╛ рдПрдХ рдорд╣рд╛рди рдЦреЛрдЬ рдирд╣реАрдВ рд╣реЛрдЧреА рдХрд┐ рд╣рдореЗрдВ рдЦреЗрд▓ рдЗрдВрдЬрди рдХреЗ рд╡рд░реНрддрдорд╛рди "рдкреНрд░рдЧрддрд┐" рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд╡рд╣ рдЪрд░рдг рдпрд╛ рдЪрд░рдг рдЬрд┐рд╕рдореЗрдВ рд╡рд╣ рд╕реНрдерд┐рдд рд╣реИред рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЧрдгрдирд╛ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GamePhase</span></span></span><span class="hljs-class"> </span></span>{ SCENARIO_START, HERO_TURN_START, HERO_TURN_END, LOCATION_BEFORE_EXPLORATION, LOCATION_ENCOUNTER_STAT, LOCATION_ENCOUNTER_DIVINE, LOCATION_AFTER_EXPLORATION, GAME_LOSS }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдФрд░ рднреА рдЪрд░рдг рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдордиреЗ рдХреЗрд╡рд▓ рдЙрдиреНрд╣реАрдВ рдХрд╛ рдЪрдпрди рдХрд┐рдпрд╛ рд╣реИ рдЬреЛ рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред рдЧреЗрдо рдЗрдВрдЬрди рдХреЗ рдЪрд░рдг рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ </font></font><code>changePhaseX()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬрд╣рд╛рдВ </font></font><code>X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрд░реЛрдХреНрдд рд╕реВрдЪреА рд╕реЗ рдореВрд▓реНрдп рд╣реИред рдЗрди рд╡рд┐рдзрд┐рдпреЛрдВ рдореЗрдВ, рдЗрдВрдЬрди рдХреЗ рд╕рднреА рдЖрдВрддрд░рд┐рдХ рдЪрд░ рд╕рдВрдмрдВрдзрд┐рдд рдЪрд░рдг рдХреА рд╢реБрд░реБрдЖрдд рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдорд╛рдиреЛрдВ рддрдХ рдХрдо рд╣реЛ рдЬрд╛рдПрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдмрд╛рдж рдореЗрдВ рдЙрд╕ рдкрд░ рдЕрдзрд┐рдХред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреЛрд╕реНрдЯред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЦреЗрд▓ рдЗрдВрдЬрди рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ рдмрдирд╛рдП рд░рдЦрдирд╛ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИред рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдХрд┐рд╕реА рддрд░рд╣ рдЙрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░рдирд╛ рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ - рдЕрдиреНрдпрдерд╛ рдмрд╛рдж рд╡рд╛рд▓реЗ рдХреЛ рдХреИрд╕реЗ рдкрддрд╛ рдЪрд▓реЗрдЧрд╛ рдХрд┐ рдЙрд╕рдХреА рд╕реНрдХреНрд░реАрди рдкрд░ рдХреНрдпрд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИ? рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рдПрдХ рдФрд░ рд▓рд┐рд╕реНрдЯрд┐рдВрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StatusMessage</span></span></span><span class="hljs-class"> </span></span>{ EMPTY, CHOOSE_DICE_PERFORM_CHECK, END_OF_TURN_DISCARD_EXTRA, END_OF_TURN_DISCARD_OPTIONAL, CHOOSE_ACTION_BEFORE_EXPLORATION, CHOOSE_ACTION_AFTER_EXPLORATION, ENCOUNTER_PHYSICAL, ENCOUNTER_SOMATIC, ENCOUNTER_MENTAL, ENCOUNTER_VERBAL, ENCOUNTER_DIVINE, DIE_ACQUIRE_SUCCESS, DIE_ACQUIRE_FAILURE, GAME_LOSS_OUT_OF_TIME }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рд╕реЗ рд╕рднреА рд╕рдВрднрд╛рд╡рд┐рдд рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдЗрд╕ рдЧрдгрдирд╛ рдХреЗ рдореВрд▓реНрдпреЛрдВ рджреНрд╡рд╛рд░рд╛ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЗ рд▓рд┐рдП, рдПрдХ рдкрд╛рда рд▓рд╛рдЗрди рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИ, рдЬрд┐рд╕реЗ рд╕реНрдХреНрд░реАрди рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ (рдЫреЛрдбрд╝рдХрд░ </font></font><code>EMPTY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдпрд╣ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЕрд░реНрде рд╣реИ), рд▓реЗрдХрд┐рди рд╣рдо рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж рд╕реАрдЦреЗрдВрдЧреЗред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд░рд┐рдпрд╛ред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдЧреЗрдо рдЗрдВрдЬрди рдХреЗ рдмреАрдЪ рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП, рд╕рд░рд▓ рд╕рдВрджреЗрд╢ рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИрдВред рдпрд╣ рдЙрди рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдкрд╣рд▓реЗ рд╕реВрдЪрд┐рдд рдХрд░рдирд╛ рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдЬреЛ рд╡рд╣ рдЗрд╕ рд╕рдордп рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВ (рд╢реЛрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдмреНрд▓реЙрдХреЛрдВ рдХреЛ рдкрд╛рд╕ рдХрд░рдирд╛, рдЗрд╕ рдХрджрдо рдХреЛ рдкреВрд░рд╛ рдХрд░рдирд╛ - рдпрд╣ рд╕рдм рдЕрдЪреНрдЫрд╛ рд╣реИ)ред рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╡рд░реНрдЧ рд╡рд┐рдХрд╕рд┐рдд рдХрд░реЗрдВрдЧреЗред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Action</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type: Type, <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isEnabled: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span> ) { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Type</span></span></span><span class="hljs-class"> </span></span>{ NONE, <span class="hljs-comment"><span class="hljs-comment">//Blank type CONFIRM, //Confirm some action CANCEL, //Cancel action HAND_POSITION, //Some position in hand HAND_ALLY_POSITION, //Some ally position in hand EXPLORE_LOCATION, //Explore current location FINISH_TURN, //Finish current turn ACQUIRE, //Acquire (DIVINE) die FORFEIT, //Remove die from game HIDE, //Put die into bag DISCARD, //Put die to discard pile } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдЖрдВрддрд░рд┐рдХ рдЧрдгрди </font></font><code>Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд░рд┐рдпрд╛ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИред </font></font><code>isEnabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рд╖реНрдХреНрд░рд┐рдп рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдХреНрд╖реЗрддреНрд░ </font><font style="vertical-align: inherit;">рдЖрд╡рд╢реНрдпрдХ рд╣реИред рдпрд╣реА рд╣реИ, рдпрд╣ рд░рд┐рдкреЛрд░реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдпрд╣ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдЖрдорддреМрд░ рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИ, рд▓реЗрдХрд┐рди рдХрд┐рд╕реА рдХрд╛рд░рдг рдХреЗ рд▓рд┐рдП рдлрд┐рд▓рд╣рд╛рд▓ рдкреНрд░рджрд░реНрд╢рди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ (рдЬрдм рдХрд╛рд░реНрд░рд╡рд╛рдИ рдмрд┐рд▓реНрдХреБрд▓ рднреА рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ рддреЛ рдРрд╕рд╛ рдкреНрд░рджрд░реНрд╢рди рдмрд╣реБрдд рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реАрдкреВрд░реНрдг рд╣реЛрддрд╛ рд╣реИ)ред рд╕рдВрдкрддреНрддрд┐ </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреА рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ) рдПрдХ рд╡рд┐рд╢реЗрд╖ рдореВрд▓реНрдп рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреА рд╣реИ рдЬреЛ рдХреБрдЫ рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд┐рд╡рд░рдг (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рджреНрд╡рд╛рд░рд╛ рдЪрдпрдирд┐рдд рд╕реНрдерд┐рддрд┐ рдХрд╛ рд╕реВрдЪрдХрд╛рдВрдХ рдпрд╛ рд╕реВрдЪреА рд╕реЗ рдЪрдпрдирд┐рдд рдЖрдЗрдЯрдо рдХреА рд╕рдВрдЦреНрдпрд╛) рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреА рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klas</font></font><code>Action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреЗрд▓ рдЗрдВрдЬрди рдФрд░ рдЗрдирдкреБрдЯ-рдЖрдЙрдЯрдкреБрдЯ рд╕рд┐рд╕реНрдЯрдо (рдЬрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдиреАрдЪреЗ) рдХреЗ рдмреАрдЪ рдореБрдЦреНрдп "рдЗрдВрдЯрд░рдлрд╝реЗрд╕" рд╣реИред </font><font style="vertical-align: inherit;">рдЪреВрдВрдХрд┐ рдЕрдХреНрд╕рд░ рдХрдИ рдХреНрд░рд┐рдпрд╛рдПрдВ рд╣реЛрддреА рд╣реИрдВ (рдЕрдиреНрдпрдерд╛, рдлрд┐рд░ рдХреНрдпреЛрдВ рдЪреБрдиреЗрдВ?), рдЙрдиреНрд╣реЗрдВ рд╕рдореВрд╣реЛрдВ (рд╕реВрдЪрд┐рдпреЛрдВ) рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ред </font><font style="vertical-align: inherit;">рдорд╛рдирдХ рд╕рдВрдЧреНрд░рд╣ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рд╣рдо рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХреЛ рд▓рд┐рдЦреЗрдВрдЧреЗред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionList</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Action</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> actions = mutableListOf&lt;Action&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> size <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = actions.size <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ActionList { actions.add(action) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">, enabled: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ActionList { add(Action(type, enabled)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ActionList { actions.forEach { add(it) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ActionList { actions.removeIf { it.type == type } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(index: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = actions[index] <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(type: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">.</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Type</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = actions.find { it.type == type } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">iterator</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Iterator&lt;Action&gt; = ActionListIterator() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActionListIterator</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Iterator</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Action</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> position = -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = (actions.size &gt; position + <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">next</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = actions[++position] } <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> EMPTY <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = ActionList() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрдЧ рдореЗрдВ рд╕реВрдЪреА рд╕реЗ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдФрд░ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рд┐рдзрд┐рдпрд╛рдБ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ (рдЬрд┐рдиреНрд╣реЗрдВ рдПрдХ рд╕рд╛рде рдЬрдВрдЬреАрд░ рдореЗрдВ рдбрд╛рд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ), рд╕рд╛рде рд╣реА рд╕реВрдЪрдХрд╛рдВрдХ рдФрд░ рдкреНрд░рдХрд╛рд░ рджреЛрдиреЛрдВ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ (рдзреНрдпрд╛рди рджреЗрдВ "рдЕрдзрд┐рднрд╛рд░" </font></font><code>get()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рд╡рд░реНрдЧ рдмреНрд░реИрдХреЗрдЯ рдСрдкрд░реЗрдЯрд░ рд╣рдорд╛рд░реА рд╕реВрдЪреА рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди </font></font><code>Iterator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдореЗрдВ рдЕрдкрдиреЗ </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рдкрд╛рдЧрд▓ рдЧрдВрджрдЧреА</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡рд░реНрдЧ рдХреЗ рд╕рд╛рде </font><font style="vertical-align: inherit;">рд╡рд┐рднрд┐рдиреНрди рдзрд╛рд░рд╛ рдЬреЛрдбрд╝рддреЛрдбрд╝ (рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛, рдПрдПрдЪрдП) </font><font style="vertical-align: inherit;">рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЦрд╛рд▓реА рд╕реВрдЪреА рдЬрд▓реНрджреА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдИрдПрдордкреАрдЯреАрд╡рд╛рдИ рдореВрд▓реНрдп рднреА рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдХреНрд░реАрдиред</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдд рдореЗрдВ, рдПрдХ рдЕрдиреНрдп рд╕реВрдЪреА рдЬреЛ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХреА рдЬрд╛ рд░рд╣реА рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреА рд╕рд╛рдордЧреНрд░реА рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреА рд╣реИ ... рдЖрдк рдореБрдЭреЗ рджреЗрдЦрддреЗ рд╣реИрдВ рдФрд░ рдЕрдкрдиреА рдЖрдБрдЦреЗрдВ рдЭрдкрдХрд╛рддреЗ рд╣реИрдВ, рдореБрдЭреЗ рдкрддрд╛ рд╣реИред рдЬрдм рдореИрдВрдиреЗ рдпрд╣ рд╕реЛрдЪрдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдХрд┐ рдЗрд╕ рд╡рд░реНрдЧ рдХрд╛ рдЕрдзрд┐рдХ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╡рд░реНрдгрди рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рдП, рддреЛ рдореИрдВрдиреЗ рдЕрдкрдирд╛ рд╕рд┐рд░ рдореЗрдЬ рдкрд░ рдорд╛рд░ рджрд┐рдпрд╛, рдХреНрдпреЛрдВрдХрд┐ рдореИрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреБрдЫ рднреА рд╕рдордЭ рдирд╣реАрдВ рдкрд╛рдпрд╛ред рдЕрдкрдиреЗ рдЖрдк рдХреЛ рд╕рдордЭреЛ, рдореБрдЭреЗ рдЖрд╢рд╛ рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameScreen</span></span></span><span class="hljs-class"> </span></span>{ HERO_TURN_START, LOCATION_INTERIOR, GAME_LOSS }</code> </pre><br>   ,    .         тАж    . <br><br> <b>┬л┬╗  ┬л┬╗.</b> <br>          тАФ      ().        ,    ,           .      -    . , . <br><br>  , <code>GameRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд╕реНрдХреНрд░реАрди рдкрд░ рдЪрд┐рддреНрд░реЛрдВ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдореИрдВ рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реВрдВ рдХрд┐ рд╣рдо рд╕реНрдХреНрд░реАрди рдХреЗ рдЖрдХрд╛рд░ рд╕реЗ, рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЧреНрд░рд╛рдлрд┐рдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЖрджрд┐ рд╕реЗ рдЕрдореВрд░реНрдд рд╣реИрдВред рд╣рдо рдмрд╕ рдХрдорд╛рдВрдб рднреЗрдЬрддреЗ рд╣реИрдВ: "рдореБрдЭреЗ рдпрд╣ рдбреНрд░рд╛ рдХрд░реЗрдВ" - рдФрд░ рдЖрдк рдореЗрдВ рд╕реЗ рдЬреЛ рд▓реЛрдЧ рд╕реНрдХреНрд░реАрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣рдорд╛рд░реА рдмрд╛рддрдЪреАрдд рдХреЛ рд╕рдордЭ рдЪреБрдХреЗ рд╣реИрдВ, рд╡реЗ рдкрд╣рд▓реЗ рд╣реА рдЕрдиреБрдорд╛рди рд▓рдЧрд╛ рдЪреБрдХреЗ рд╣реИрдВ рдХрд┐ рдЗрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рд╕реНрдХреНрд░реАрди рдХрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рднреАрддрд░ рдЕрдкрдирд╛ рддрд░реАрдХрд╛ рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameRenderer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawHeroTurnStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(hero: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawLocationInteriorScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( location: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Location</span></span></span></span><span class="hljs-function"><span class="hljs-params">, heroesAtLocation: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">List</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;, timer: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, currentHero: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">, battleCheck: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DieBattleCheck</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, encounteredDie: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">DiePair</span></span></span></span><span class="hljs-function"><span class="hljs-params">?, pickedDice: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, activePositions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, statusMessage: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">StatusMessage</span></span></span></span><span class="hljs-function"><span class="hljs-params">, actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawGameLoss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(message: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">StatusMessage</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдпрд╣рд╛рдВ рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реНрдкрд╖реНрдЯреАрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рд╕рднреА рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп рдкрд░ рдКрдкрд░ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЪрд░реНрдЪрд╛ рдХреА рдЧрдИ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рдЕрд▓рдЧ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ - </font></font><code>GameInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рд╣рд╛рдВ, рд╡рд░реНрддрдиреА-рдЬрд╛рдВрдЪ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣рдореЗрд╢рд╛ рдЗрд╕ рд╢рдмреНрдж рдкрд░ рдЬреЛрд░ рджреЗрдЧреА, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рдкреНрд░рддреАрдд рд╣реЛрдЧрд╛ ...)ред рдЙрдирдХреЗ рддрд░реАрдХреЗ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рд╡рд┐рднрд┐рдиреНрди рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдЖрджреЗрд╢реЛрдВ рдХреЗ рд▓рд┐рдП рдХрд╣реЗрдВрдЧреЗ: рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд▓реЛрдЧреЛрдВ рдХреА рд╕реВрдЪреА рд╕реЗ рдПрдХ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ, рд╕реВрдЪреА рд╕реЗ рдПрдХ рддрддреНрд╡ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ, рд╣рд╛рде рд╕реЗ рдХреНрдпреВрдмреНрд╕ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ, рдмрд╕ рдХрдо рд╕реЗ рдХрдо рдХреБрдЫ рджрдмрд╛рдПрдВ, рдЖрджрд┐ред рдпрд╣ рддреБрд░рдВрдд рдиреЛрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдЗрдирдкреБрдЯ рд╕рдордХрд╛рд▓рд┐рдХ рд░реВрдк рд╕реЗ рд╣реЛрддрд╛ рд╣реИ (рдЧреЗрдо рд╕реНрдЯреЗрдк-рдмрд╛рдп-рд╕реНрдЯреЗрдк рд╣реИ), рдЕрд░реНрдерд╛рдд, рдЧреЗрдо рд▓реВрдк рдХрд╛ рдирд┐рд╖реНрдкрд╛рджрди рддрдм рддрдХ рдирд┐рд▓рдВрдмрд┐рдд рд░рд╣рддрд╛ рд╣реИ рдЬрдм рддрдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрд░реЛрдз рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рджреЗрддрд╛ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GameInteractor</span></span></span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickDiceFromHand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(activePositions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрддрд┐рдо рд╡рд┐рдзрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рдФрд░ред </font><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдирд╛рдо рдХрд╛ рдЕрд░реНрде рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╣рд╛рде рд╕реЗ рдХреНрдпреВрдмреНрд╕ рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдордВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдПрдХ рд╡рд╕реНрддреБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ </font></font><code>HandMask</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рд╕рдХреНрд░рд┐рдп рдкрджреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ред </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ рдХрд╛ рдирд┐рд╖реНрдкрд╛рджрди рддрдм рддрдХ рдЬрд╛рд░реА рд░рд╣реЗрдЧрд╛ рдЬрдм рддрдХ рдХрд┐ рдЙрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рдХрд╛ рдЪрдпрди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЪрдпрдирд┐рдд рд╕реНрдерд┐рддрд┐ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде </font><font style="vertical-align: inherit;">рдкреНрд░рдХрд╛рд░ </font></font><code>HAND_POSITION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдпрд╛ </font></font><code>HAND_ALLY_POSITION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдПрдордбреАрдП) </font><font style="vertical-align: inherit;">рдХреА рдХрд╛рд░реНрд░рд╡рд╛рдИ </font><font style="vertical-align: inherit;">рд▓реМрдЯрд╛рдПрдЧреА </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, </font><font style="vertical-align: inherit;">рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реЗ </font><font style="vertical-align: inherit;">рдПрдХ рдФрд░ рдХрд╛рд░реНрд░рд╡рд╛рдИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, </font></font><code>CONFIRM</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╛ </font></font><code>CANCEL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ </font></font><code>ActionList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЗрдирдкреБрдЯ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдЙрди рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрдм рдХреНрд╖реЗрддреНрд░ </font><font style="vertical-align: inherit;">рдРрд╕реА рдХрд╛рд░реНрд░рд╡рд╛рдЗрдпреЛрдВ рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ </font></font><code>isEnabled</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛ рд╕реЗрдЯ </font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЕрдирджреЗрдЦрд╛ рдХрд░рддрд╛ рд╣реИред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреЗрд▓ рдЗрдВрдЬрди рд╡рд░реНрдЧред </font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдордиреЗ рдХрд╛рдо рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕рднреА рдЪреАрдЬреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХреА, рд╕рдордп рдЖ рдЧрдпрд╛ рд╣реИ рдФрд░ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдВрдЬрдиред </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд░реНрдЧ рдмрдирд╛рдПрдБ</font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рд╛рдордЧреНрд░реА рдХреЗ рд╕рд╛рде: </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд╖рдорд╛ рдХрд░реЗрдВ, рдпрд╣ рдкреНрд░рднрд╛рд╡рд╢рд╛рд▓реА рд▓реЛрдЧреЛрдВ рдХреЛ рдирд╣реАрдВ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред</font></font></b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Game</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> renderer: GameRenderer, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> interactor: GameInteractor, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> scenario: Scenario, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> locations: List&lt;Location&gt;, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroes: List&lt;Hero&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timer = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentHeroIndex = -<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentHero: Hero <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentLocation: Location <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> deterrentPile = Pile() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> encounteredDie: DiePair? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> battleCheck: DieBattleCheck? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> activeHandPositions = HandMask() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> pickedHandPositions = HandMask() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> phase: GamePhase = GamePhase.SCENARIO_START <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> screen = GameScreen.SCENARIO_INTRO <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> statusMessage = StatusMessage.EMPTY <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actions: ActionList = ActionList.EMPTY <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (heroes.isEmpty()) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Heroes list is empty!"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (locations.isEmpty()) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Location list is empty!"</span></span>) heroes.forEach { it.isAlive = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } timer = scenario.initialTimer <span class="hljs-comment"><span class="hljs-comment">//Draw initial hand for each hero heroes.forEach(::drawInitialHand) //First hero turn currentHeroIndex = -1 changePhaseHeroTurnStart() processCycle() } private fun drawInitialHand(hero: Hero) { val hand = hero.hand val favoredDie = hero.bag.drawOfType(hero.favoredDieType) hand.addDie(favoredDie!!) refillHeroHand(hero, false) } private fun refillHeroHand(hero: Hero, redrawScreen: Boolean = true) { val hand = hero.hand while (hand.dieCount &lt; hand.capacity &amp;&amp; hero.bag.size &gt; 0) { val die = hero.bag.draw() hand.addDie(die) if (redrawScreen) { Audio.playSound(Sound.DIE_DRAW) drawScreen() Thread.sleep(500) } } } private fun changePhaseHeroTurnEnd() { battleCheck = null encounteredDie = null phase = GamePhase.HERO_TURN_END //Discard extra dice (or optional dice) val hand = currentHero.hand pickedHandPositions.clear() activeHandPositions.clear() val allowCancel = if (hand.dieCount &gt; hand.capacity) { statusMessage = StatusMessage.END_OF_TURN_DISCARD_EXTRA false } else { statusMessage = StatusMessage.END_OF_TURN_DISCARD_OPTIONAL true } val result = pickDiceFromHand(DiscardExtraDiceHandMaskRule(hand), allowCancel) statusMessage = StatusMessage.EMPTY actions = ActionList.EMPTY if (result) { val discardDice = collectPickedDice(hand) val discardAllyDice = collectPickedAllyDice(hand) pickedHandPositions.clear() (discardDice + discardAllyDice).forEach { die -&gt; Audio.playSound(Sound.DIE_DISCARD) currentHero.discardDieFromHand(die) drawScreen() Thread.sleep(500) } } pickedHandPositions.clear() //Replenish hand refillHeroHand(currentHero) changePhaseHeroTurnStart() } private fun changePhaseHeroTurnStart() { phase = GamePhase.HERO_TURN_START screen = GameScreen.HERO_TURN_START //Tick timer timer-- if (timer &lt; 0) { changePhaseGameLost(StatusMessage.GAME_LOSS_OUT_OF_TIME) return } //Pick next hero do { currentHeroIndex = ++currentHeroIndex % heroes.size currentHero = heroes[currentHeroIndex] } while (!currentHero.isAlive) currentLocation = locations[0] //Setup Audio.playMusic(Music.SCENARIO_MUSIC_1) Audio.playSound(Sound.TURN_START) } private fun changePhaseLocationBeforeExploration() { phase = GamePhase.LOCATION_BEFORE_EXPLORATION screen = GameScreen.LOCATION_INTERIOR encounteredDie = null battleCheck = null pickedHandPositions.clear() activeHandPositions.clear() statusMessage = StatusMessage.CHOOSE_ACTION_BEFORE_EXPLORATION actions = ActionList() actions.add(Action.Type.EXPLORE_LOCATION, checkLocationCanBeExplored(currentLocation)) actions.add(Action.Type.FINISH_TURN) } private fun changePhaseLocationEncounterStatDie() { Audio.playSound(Sound.ENCOUNTER_STAT) phase = GamePhase.LOCATION_ENCOUNTER_STAT screen = GameScreen.LOCATION_INTERIOR battleCheck = null pickedHandPositions.clear() activeHandPositions.clear() statusMessage = when (encounteredDie!!.die.type) { Die.Type.PHYSICAL -&gt; StatusMessage.ENCOUNTER_PHYSICAL Die.Type.SOMATIC -&gt; StatusMessage.ENCOUNTER_SOMATIC Die.Type.MENTAL -&gt; StatusMessage.ENCOUNTER_MENTAL Die.Type.VERBAL -&gt; StatusMessage.ENCOUNTER_VERBAL else -&gt; throw AssertionError("Should not happen") } val canAttemptCheck = checkHeroCanAttemptStatCheck(currentHero, encounteredDie!!.die.type) actions = ActionList() actions.add(Action.Type.HIDE, canAttemptCheck) actions.add(Action.Type.DISCARD, canAttemptCheck) actions.add(Action.Type.FORFEIT) } private fun changePhaseLocationEncounterDivineDie() { Audio.playSound(Sound.ENCOUNTER_DIVINE) phase = GamePhase.LOCATION_ENCOUNTER_DIVINE screen = GameScreen.LOCATION_INTERIOR battleCheck = null pickedHandPositions.clear() activeHandPositions.clear() statusMessage = StatusMessage.ENCOUNTER_DIVINE actions = ActionList() actions.add(Action.Type.ACQUIRE, checkHeroCanAcquireDie(currentHero, Die.Type.DIVINE)) actions.add(Action.Type.FORFEIT) } private fun changePhaseLocationAfterExploration() { phase = GamePhase.LOCATION_AFTER_EXPLORATION screen = GameScreen.LOCATION_INTERIOR encounteredDie = null battleCheck = null pickedHandPositions.clear() activeHandPositions.clear() statusMessage = StatusMessage.CHOOSE_ACTION_AFTER_EXPLORATION actions = ActionList() actions.add(Action.Type.FINISH_TURN) } private fun changePhaseGameLost(message: StatusMessage) { Audio.stopMusic() Audio.playSound(Sound.GAME_LOSS) phase = GamePhase.GAME_LOSS screen = GameScreen.GAME_LOSS statusMessage = message } private fun pickDiceFromHand(rule: HandMaskRule, allowCancel: Boolean = true, onEachLoop: (() -&gt; Unit)? = null): Boolean { //Preparations pickedHandPositions.clear() actions = ActionList().add(Action.Type.CONFIRM, false) if (allowCancel) { actions.add(Action.Type.CANCEL) } val hand = rule.hand while (true) { //Recurring action onEachLoop?.invoke() //Define success condition val canProceed = rule.checkMask(pickedHandPositions) actions[Action.Type.CONFIRM]?.isEnabled = canProceed //Prepare active hand commands activeHandPositions.clear() (0 until hand.dieCount) .filter { rule.isPositionActive(pickedHandPositions, it) } .forEach { activeHandPositions.addPosition(it) } (0 until hand.allyDieCount) .filter { rule.isAllyPositionActive(pickedHandPositions, it) } .forEach { activeHandPositions.addAllyPosition(it) } //Draw current phase drawScreen() //Process interaction result val result = interactor.pickDiceFromHand(activeHandPositions, actions) when (result.type) { Action.Type.CONFIRM -&gt; if (canProceed) { activeHandPositions.clear() return true } Action.Type.CANCEL -&gt; if (allowCancel) { activeHandPositions.clear() pickedHandPositions.clear() return false } Action.Type.HAND_POSITION -&gt; { Audio.playSound(Sound.DIE_PICK) pickedHandPositions.switchPosition(result.data) } Action.Type.HAND_ALLY_POSITION -&gt; { Audio.playSound(Sound.DIE_PICK) pickedHandPositions.switchAllyPosition(result.data) } else -&gt; throw AssertionError("Should not happen") } } } private fun collectPickedDice(hand: Hand) = (0 until hand.dieCount) .filter(pickedHandPositions::checkPosition) .mapNotNull(hand::dieAt) private fun collectPickedAllyDice(hand: Hand) = (0 until hand.allyDieCount) .filter(pickedHandPositions::checkAllyPosition) .mapNotNull(hand::allyDieAt) private fun performStatDieAcquireCheck(shouldDiscard: Boolean): Boolean { //Prepare check battleCheck = DieBattleCheck(DieBattleCheck.Method.SUM, encounteredDie) pickedHandPositions.clear() statusMessage = StatusMessage.CHOOSE_DICE_PERFORM_CHECK val hand = currentHero.hand //Try to pick dice from performer's hand if (!pickDiceFromHand(StatDieAcquireHandMaskRule(currentHero.hand, encounteredDie!!.die.type), true) { battleCheck!!.clearHeroPairs() (collectPickedDice(hand) + collectPickedAllyDice(hand)) .map { DiePair(it, if (shouldDiscard) 1 else 0) } .forEach(battleCheck!!::addHeroPair) }) { battleCheck = null pickedHandPositions.clear() return false } //Remove dice from hand collectPickedDice(hand).forEach { hand.removeDie(it) } collectPickedAllyDice(hand).forEach { hand.removeDie(it) } pickedHandPositions.clear() //Perform check Audio.playSound(Sound.BATTLE_CHECK_ROLL) for (i in 0..7) { battleCheck!!.roll() drawScreen() Thread.sleep(100) } battleCheck!!.calculateResult() val result = battleCheck?.result ?: -1 val success = result &gt;= 0 //Process dice which participated in the check (0 until battleCheck!!.heroPairCount) .map(battleCheck!!::getHeroPairAt) .map(DiePair::die) .forEach { d -&gt; if (d.type === Die.Type.DIVINE) { currentHero.hand.removeDie(d) deterrentPile.put(d) } else { if (shouldDiscard) { currentHero.discardDieFromHand(d) } else { currentHero.hideDieFromHand(d) } } } //Show message to user Audio.playSound(if (success) Sound.BATTLE_CHECK_SUCCESS else Sound.BATTLE_CHECK_FAILURE) statusMessage = if (success) StatusMessage.DIE_ACQUIRE_SUCCESS else StatusMessage.DIE_ACQUIRE_FAILURE actions = ActionList.EMPTY drawScreen() interactor.anyInput() //Clean up battleCheck = null //Resolve consequences of the check if (success) { Audio.playSound(Sound.DIE_DRAW) currentHero.hand.addDie(encounteredDie!!.die) } return true } private fun processCycle() { while (true) { drawScreen() when (phase) { GamePhase.HERO_TURN_START -&gt; { interactor.anyInput() changePhaseLocationBeforeExploration() } GamePhase.GAME_LOSS -&gt; { interactor.anyInput() return } GamePhase.LOCATION_BEFORE_EXPLORATION -&gt; when (interactor.pickAction(actions).type) { Action.Type.EXPLORE_LOCATION -&gt; { val die = currentLocation.bag.draw() encounteredDie = DiePair(die, 0) when (die.type) { Die.Type.PHYSICAL, Die.Type.SOMATIC, Die.Type.MENTAL, Die.Type.VERBAL -&gt; changePhaseLocationEncounterStatDie() Die.Type.DIVINE -&gt; changePhaseLocationEncounterDivineDie() else -&gt; TODO("Others") } } Action.Type.FINISH_TURN -&gt; changePhaseHeroTurnEnd() else -&gt; throw AssertionError("Should not happen") } GamePhase.LOCATION_ENCOUNTER_STAT -&gt; { val type = interactor.pickAction(actions).type when (type) { Action.Type.DISCARD, Action.Type.HIDE -&gt; { performStatDieAcquireCheck(type === Action.Type.DISCARD) changePhaseLocationAfterExploration() } Action.Type.FORFEIT -&gt; { Audio.playSound(Sound.DIE_REMOVE) changePhaseLocationAfterExploration() } else -&gt; throw AssertionError("Should not happen") } } GamePhase.LOCATION_ENCOUNTER_DIVINE -&gt; when (interactor.pickAction(actions).type) { Action.Type.ACQUIRE -&gt; { Audio.playSound(Sound.DIE_DRAW) currentHero.hand.addDie(encounteredDie!!.die) changePhaseLocationAfterExploration() } Action.Type.FORFEIT -&gt; { Audio.playSound(Sound.DIE_REMOVE) changePhaseLocationAfterExploration() } else -&gt; throw AssertionError("Should not happen") } GamePhase.LOCATION_AFTER_EXPLORATION -&gt; when (interactor.pickAction(actions).type) { Action.Type.FINISH_TURN -&gt; changePhaseHeroTurnEnd() else -&gt; throw AssertionError("Should not happen") } else -&gt; throw AssertionError("Should not happen") } } } private fun drawScreen() { when (screen) { GameScreen.HERO_TURN_START -&gt; renderer.drawHeroTurnStart(currentHero) GameScreen.LOCATION_INTERIOR -&gt; renderer.drawLocationInteriorScreen(currentLocation, heroes, timer, currentHero, battleCheck, encounteredDie, null, pickedHandPositions, activeHandPositions, statusMessage, actions) GameScreen.GAME_LOSS -&gt; renderer.drawGameLoss(statusMessage) } } private fun checkLocationCanBeExplored(location: Location) = location.isOpen &amp;&amp; location.bag.size &gt; 0 private fun checkHeroCanAttemptStatCheck(hero: Hero, type: Die.Type): Boolean { return hero.isAlive &amp;&amp; SingleDieHandFilter(type).test(hero.hand) } private fun checkHeroCanAcquireDie(hero: Hero, type: Die.Type): Boolean { if (!hero.isAlive) { return false } return when (type) { Die.Type.ALLY -&gt; hero.hand.allyDieCount &lt; MAX_HAND_ALLY_SIZE else -&gt; hero.hand.dieCount &lt; MAX_HAND_SIZE } } }</span></span></code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font></font><code>start()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдЦреЗрд▓ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ рдЪрд░реЛрдВ рдХреЛ рдЖрд░рдВрднреАрдХреГрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдирд╛рдпрдХреЛрдВ рдХреЛ рддреМрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╣рд╛рдереЛрдВ рдХреЛ рдХреНрдпреВрдмреНрд╕ рд╕реЗ рднрд░рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рд╕рднреА рддрд░рдл рд╕реЗ рдХреИрдорд░реЛрдВ рд╕реЗ рд░рд┐рдкреЛрд░реНрдЯрд░ рдЪрдордХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдореБрдЦреНрдп рдЪрдХреНрд░ рдХрд┐рд╕реА рднреА рдорд┐рдирдЯ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдЗрд╕реЗ рд░реЛрдХрд╛ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font></font><code>drawInitialHand()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреБрдж рдХреЗ рд▓рд┐рдП рдмреЛрд▓рддреА рд╣реИ (рд╣рдо </font></font><code>drawOfType()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрдЧ </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ рдХреЗ рдХреЛрдб рдкрд░ рд╡рд┐рдЪрд╛рд░ рдирд╣реАрдВ рдХрд░рддреЗ рдереЗ </font></font><code>Bag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рдПрдХ рд╕рд╛рде рдЗрддрдиреЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдЗрд╕ рдХреЛрдб рдХреЛ рдЦреБрдж рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ)ред </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ рдХреЗ </font></font><code>refillHeroHand()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╛рд╕ рджреЛ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ (рддрд░реНрдХ рдХреЗ рдореВрд▓реНрдп рдХреЗ рдЖрдзрд╛рд░ рдкрд░ </font></font><code>redrawScreen</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">): рддреЗрдЬ рдФрд░ рд╢рд╛рдВрдд (рдЬрдм рдЖрдкрдХреЛ рдЦреЗрд▓ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рд╕рднреА рдирд╛рдпрдХреЛрдВ рдХреЗ рд╣рд╛рдереЛрдВ рдХреЛ рднрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ), рдФрд░ рдЬреЛрд░ рд╕реЗ рдкреИрдереЛрд╕ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛, рдЬрдм рдЗрд╕ рдХрджрдо рдХреЗ рдЕрдВрдд рдореЗрдВ рдЖрдкрдХреЛ рдмреИрдЧ рд╕реЗ рдХреНрдпреВрдмреНрд╕ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рд╣рд╛рде рдХреЛ рд╕рд╣реА рдЖрдХрд╛рд░ рдореЗрдВ рд▓рд╛рддреЗ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд╛рдо рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рддрд░реАрдХреЛрдВ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛</font></font><code>changePhase</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, - рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рдХрд╣рд╛ рдерд╛, рд╡реЗ рд╡рд░реНрддрдорд╛рди рдЧреЗрдо рдЪрд░рдг рдХреЛ рдмрджрд▓рдиреЗ рдХреА рд╕реЗрд╡рд╛ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЧреЗрдо рдЪрд░ рдХреЗ рд╕рдВрдмрдВрдзрд┐рдд рдореВрд▓реНрдпреЛрдВ рдХреЗ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдореЗрдВ рд▓рдЧреЗ рд╣реБрдП рд╣реИрдВред рдпрд╣рд╛рдВ, рдПрдХ рд╕реВрдЪреА рдмрдирд╛рдИ рдЧрдИ рд╣реИ, </font></font><code>actions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╣рд╛рдВ рдЗрд╕ рдЪрд░рдг рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдПрдХ рд╕рд╛рдорд╛рдиреНрдпреАрдХреГрдд рд░реВрдк рдореЗрдВ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╡рд┐рдзрд┐ </font></font><code>pickDiceFromHand()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд╛рде рд╕реЗ рдХреНрдпреВрдмреНрд╕ рдХреЗ рдЪрдпрди рдореЗрдВ рд▓рдЧреА рд╣реБрдИ рд╣реИред </font></font><code>HandMaskRule</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрдпрди рдирд┐рдпрдореЛрдВ </font><font style="vertical-align: inherit;">рдХреЛ </font><font style="vertical-align: inherit;">рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ </font><font style="vertical-align: inherit;">рдПрдХ рдкрд░рд┐рдЪрд┐рдд рд╡рд░реНрдЧ рдХреА рдПрдХ рд╡рд╕реНрддреБ рдпрд╣рд╛рдВ рдкрд╛рд░рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ </font><font style="vertical-align: inherit;">ред рдпрд╣ рдЪрдпрди рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХреЛ рднреА рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ ( </font></font><code>allowCancel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), рд╕рд╛рде рд╣реА рдПрдХ рдлрд╝рдВрдХреНрд╢рди </font></font><code>onEachLoop</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд┐рд╕рдХрд╛ рдХреЛрдб рд╣рд░ рдмрд╛рд░ рдЪрдпрдирд┐рдд рдХреНрдпреВрдмреНрд╕ рдХреА рд╕реВрдЪреА рдХреЛ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП (рдЖрдорддреМрд░ рдкрд░ рдПрдХ рд╕реНрдХреНрд░реАрди redraw)ред рдЗрд╕ рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рдЪрдпрдирд┐рдд рдХреНрдпреВрдмреНрд╕ рдХреЛ рд╣рд╛рде рд╕реЗ </font></font><code>collectPickedDice()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрдХрдЯреНрдард╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </font></font><code>collectPickedAllyDice()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдФрд░ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╡рд┐рдзрд┐</font></font><code>performStatDieAcquireCheck()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдПрдХ рдирдП рдШрди рдХреЗ рдЕрдзрд┐рдЧреНрд░рд╣рдг рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг рдкрд╛рд╕ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдирд╛рдпрдХ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИред рдЗрд╕ рд╡рд┐рдзрд┐ рдореЗрдВ рдХреЗрдВрджреНрд░реАрдп рднреВрдорд┐рдХрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рджреНрд╡рд╛рд░рд╛ рдирд┐рднрд╛рдИ рдЬрд╛рддреА рд╣реИ </font></font><code>DieBattleCheck</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рдХреНрдпреВрдмреНрд╕ рдХреЗ рдЪрдпрди рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ </font></font><code>pickDiceFromHand()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдг рдореЗрдВ "рдкреНрд░рддрд┐рднрд╛рдЧрд┐рдпреЛрдВ" рдХреА рд╕реВрдЪреА рдЕрдкрдбреЗрдЯ рдХреА рдЬрд╛рддреА рд╣реИ </font></font><code>DieBattleCheck</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)ред рдЪрдпрдирд┐рдд рдХреНрдпреВрдмреНрд╕ рдХреЛ рд╣рд╛рде рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдПрдХ "рд░реЛрд▓" рд╣реЛрддрд╛ рд╣реИ - рдкреНрд░рддреНрдпреЗрдХ рдбрд╛рдИ рдЕрдкрдиреЗ рдореВрд▓реНрдп рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддрд╛ рд╣реИ (рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдЖрда рдмрд╛рд░), рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдкрд░рд┐рдгрд╛рдо рдХреА рдЧрдгрдирд╛ рдФрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред рдПрдХ рд╕рдлрд▓ рд░реЛрд▓ рдкрд░, рдПрдХ рдирдпрд╛ рдирд╛рдпрдХ рдирд╛рдпрдХ рдХреЗ рд╣рд╛рде рдореЗрдВ рдЖ рдЬрд╛рддрд╛ рд╣реИред рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рднрд╛рдЧ рд▓реЗрдиреЗ рд╡рд╛рд▓реЗ рдХреНрдпреВрдмреНрд╕ рдпрд╛ рддреЛ рдЖрдпреЛрдЬрд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ (рдпрджрд┐ рд╡реЗ рдиреАрд▓реЗ рд╣реИрдВ), рдпрд╛ рддреНрдпрд╛рдЧ рджрд┐рдП рдЧрдП рд╣реИрдВ (рдпрджрд┐ </font></font><code>shouldDiscard = true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), рдпрд╛ рдмреИрдЧ рдореЗрдВ рдЫрд┐рдкреЗ рд╣реБрдП рд╣реИрдВ (рдпрджрд┐ </font></font><code>shouldDiscard = false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЦреНрдп рд╡рд┐рдзрд┐</font></font><code>processCycle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдЕрдирдВрдд рд▓реВрдк рд╣реЛрддрд╛ рд╣реИ (рдореИрдВ рдмреЗрд╣реЛрд╢реА рдХреЗ рдмрд┐рдирд╛ рдкреВрдЫрддрд╛ рд╣реВрдВ) рдЬрд┐рд╕рдореЗрдВ рд╕реНрдХреНрд░реАрди рдкрд╣рд▓реЗ рдЦреАрдВрдЪреА рдЬрд╛рддреА рд╣реИ, рдлрд┐рд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП рд╕рдВрдХреЗрдд рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдлрд┐рд░ рдЗрд╕ рдЗрдирдкреБрдЯ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рд╕рднреА рдЖрдЧрд╛рдореА рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рд╕рд╛рдеред </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font></font><code>drawScreen()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╛рдВрдЫрд┐рдд рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╡рд┐рдзрд┐ </font></font><code>GameRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рд╡рд░реНрддрдорд╛рди рдореВрд▓реНрдп рдХреЗ рдЖрдзрд╛рд░ рдкрд░ </font></font><code>screen</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдХреЛ </font><font style="vertical-align: inherit;">рдХреЙрд▓ рдХрд░рддреА рд╣реИ </font><font style="vertical-align: inherit;">, рдЗрд╕реЗ рдЖрд╡рд╢реНрдпрдХ рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдЗрдирдкреБрдЯ рдореЗрдВ рдкрд╛рд╕ рдХрд░рддреА рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡рд░реНрдЧ рдХрдИ рд╕рд╣рд╛рдпрдХ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: </font></font><code>checkLocationCanBeExplored()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>checkHeroCanAttemptStatCheck()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>checkHeroCanAcquireDie()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЙрдирдХреЗ рдирд╛рдо рдЕрдкрдиреЗ рд▓рд┐рдП рдмреЛрд▓рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЙрди рдкрд░ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдзреНрдпрд╛рди рдирд╣реАрдВ рджреЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдФрд░ рдПрдХ рд╡рд░реНрдЧ рд╡рд┐рдзрд┐ рдХреЙрд▓ рднреА рд╣реИрдВ </font></font><code>Audio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬреЛ рдПрдХ рд▓рд╛рд▓ рд▓рд╣рд░рджрд╛рд░ рд░реЗрдЦрд╛ рджреНрд╡рд╛рд░рд╛ рд░реЗрдЦрд╛рдВрдХрд┐рдд рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╕рдордп рдХреЗ рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рдЯрд┐рдкреНрдкрдгреА рдХрд░реЗрдВ - рд╣рдо рдмрд╛рдж рдореЗрдВ рдЙрдирдХреЗ рдЙрджреНрджреЗрд╢реНрдп рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд┐рд╕реЗ рдХреБрдЫ рднреА рд╕рдордЭ рдореЗрдВ рдирд╣реАрдВ рдЖрддрд╛ рд╣реИ, рдпрд╣рд╛рдБ рдПрдХ рдЖрд░реЗрдЦ рд╣реИ (рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП, рдЗрд╕рд▓рд┐рдП рдмреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП):</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/j3/hl/so/j3hlsov7ev0lducteyrvthdwkge.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╕ рдЗрддрдирд╛ рд╣реА, рдЦреЗрд▓ рддреИрдпрд╛рд░ рд╣реИ (рд╣реЗрд╣реЗ)ред </font><font style="vertical-align: inherit;">рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЫреЛрдЯреА рдЪреАрдЬреЗрдВ рдереАрдВ, рдЙрдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдиреАрдЪреЗред</font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рдиреМред </font><font style="vertical-align: inherit;">рдкреНрд░рджрд░реНрд╢рди рдЫрд╡рд┐</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддреЛ рд╣рдо рдЖрдЬ рдХреА рдмрд╛рддрдЪреАрдд рдХреЗ рдореБрдЦреНрдп рд╡рд┐рд╖рдп рдкрд░ рдЖрддреЗ рд╣реИрдВ - рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрд╛ рдЧреНрд░рд╛рдлрд┐рдХ рдШрдЯрдХред </font><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдЖрдкрдХреЛ рдпрд╛рдж рд╣реИ, рд╣рдорд╛рд░рд╛ рдХрд╛рдо рдЗрдВрдЯрд░рдлрд╝реЗрд╕ </font></font><code>GameRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЙрд╕рдХреЗ рддреАрди рддрд░реАрдХреЛрдВ </font><font style="vertical-align: inherit;">рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реИ </font><font style="vertical-align: inherit;">, рдФрд░ рдЪреВрдВрдХрд┐ рд╣рдорд╛рд░реА рдЯреАрдо рдореЗрдВ рдЕрднреА рднреА рдХреЛрдИ рдкреНрд░рддрд┐рднрд╛рд╢рд╛рд▓реА рдХрд▓рд╛рдХрд╛рд░ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЫрджреНрдо рд╡рд┐рдЬреНрдЮрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдЦреБрдж рдРрд╕рд╛ рдХрд░реЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╣ рд╕рдордЭрдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ рдХрд┐ рд╣рдо рдЖрдо рддреМрд░ рдкрд░ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рдкрд░ рдХреНрдпрд╛ рджреЗрдЦрдиреЗ рдХреА рдЙрдореНрдореАрдж рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдФрд░ рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рд╛рдордЧреНрд░реА рдХреЗ рддреАрди рд╕реНрдХреНрд░реАрди рджреЗрдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдХреНрд░реАрди 1. рдкреНрд▓реЗрдпрд░ рдЯрд░реНрди рдЖрдИрдбреА</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/ey/kv/ro/eykvrovfqckvawmiylrmb03gx70.png"></a> <br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдХреНрд░реАрди 2. рдХреНрд╖реЗрддреНрд░ рдФрд░ рд╡рд░реНрддрдорд╛рди рдирд╛рдпрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/5v/xd/ad/5vxdadvii-aunblqcdkxs4h8jrs.png"></a> <br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдХреНрд░реАрди 3. рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣рд╛рдирд┐ рд╕рдВрджреЗрд╢</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/ry/l1/6y/ryl16yvaas4njnnu5mxginmvsm0.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдмрд╣реБрдордд рдиреЗ рдкрд╣рд▓реЗ рд╣реА рдорд╣рд╕реВрд╕ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИ рдХрд┐ рдкреНрд░рд╕реНрддреБрдд рдЫрд╡рд┐рдпрд╛рдВ рдЙрди рд╕рднреА рдЪреАрдЬреЛрдВ рд╕реЗ рдЕрд▓рдЧ рд╣реИрдВ рдЬреЛ рдЖрдорддреМрд░ рдкрд░ рдЬрд╛рд╡рд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рдХрдВрд╕реЛрд▓ рдореЗрдВ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИрдВ, рдФрд░ рдпрд╣ рдХрд┐ рд╕рд╛рдорд╛рдиреНрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ </font></font><code>prinltn()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛрдВрдЧреАред рдореИрдВ рд╕реНрдХреНрд░реАрди рдкрд░ рдордирдорд╛рдиреЗ рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рдХреВрджрдиреЗ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рд░рдВрдЧреЛрдВ рдореЗрдВ рдкреНрд░рддреАрдХреЛрдВ рдХреЛ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ред </font><s><font style="vertical-align: inherit;">рдЪрд┐рдк рдФрд░ рдбреЗрд▓ </font></s><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">ANSI рдХреЛрдб</font></a></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдорд╛рд░реА рд╕рд╣рд╛рдпрддрд╛ рдХреЗ рд▓рд┐рдП рднрд╛рдЧрддреЗ рд╣реИрдВ</font></font><s><font style="vertical-align: inherit;"></font></s> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рд╡рд░реНрдгреЛрдВ рдХреЗ рд╡рд┐рдЪрд┐рддреНрд░ рдХреНрд░рдореЛрдВ рдХреЛ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рднреЗрдЬрдХрд░, рдЖрдк рдХреЛрдИ рдХрдо рд╡рд┐рдЪрд┐рддреНрд░ рдкреНрд░рднрд╛рд╡ рдирд╣реАрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: рдкрд╛рда / рдкреГрд╖реНрдарднреВрдорд┐ рдХрд╛ рд░рдВрдЧ рдмрджрд▓рдирд╛, рд╡рд░реНрдгреЛрдВ рдХреЛ рдЦреАрдВрдЪрдирд╛, рд╕реНрдХреНрд░реАрди рдкрд░ рдХрд░реНрд╕рд░ рдХреА рд╕реНрдерд┐рддрд┐ рдФрд░ рдмрд╣реБрдд рдХреБрдЫред рдмреЗрд╢рдХ, рд╣рдо рдЙрдиреНрд╣реЗрдВ рдЙрдирдХреЗ рд╢реБрджреНрдз рд░реВрдк рдореЗрдВ рдкреЗрд╢ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ - рд╣рдо рд╡рд░реНрдЧ рдХреЗ рддрд░реАрдХреЛрдВ рдХреЗ рдкреАрдЫреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдЫрд┐рдкрд╛рдПрдВрдЧреЗред рдФрд░ рд╣рдо рдХрдХреНрд╖рд╛ рдХреЛ рдЦрд░реЛрдВрдЪ рд╕реЗ рдирд╣реАрдВ рд▓рд┐рдЦреЗрдВрдЧреЗ - рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рд╕реНрдорд╛рд░реНрдЯ рд▓реЛрдЧреЛрдВ рдиреЗ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдХрд┐рдпрд╛ред рд╣рдореЗрдВ рдмрд╕ рдХреБрдЫ рд╣рд▓реНрдХреА рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jansi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.fusesource.jansi<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jansi<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.17.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЖрдк рдмрдирд╛рдирд╛ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрд╣ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╣рдореЗрдВ </font><font style="vertical-align: inherit;">рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрд░реАрдХреЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЗ </font><font style="vertical-align: inherit;">рд╕рд╛рде рдПрдХ рдХреНрд▓рд╛рд╕ рдСрдмреНрдЬреЗрдХреНрдЯ </font></font><code>Ansi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рд╕реНрдерд┐рд░ рдХреЙрд▓ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдкреНрд░рд╛рдкреНрдд </font></font><code>Ansi.ansi()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЬрдВрдЬреАрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ </font></font><code>StringBuilder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'a' </font><font style="vertical-align: inherit;">рдХреЗ рд╕рд┐рджреНрдзрд╛рдВрдд рдкрд░ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, </font><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рд╣рдо рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рддреЗ рд╣реИрдВ, рдлрд┐рд░ рдЗрд╕реЗ рдкреНрд░рд┐рдВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреЗрдЬрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧреА рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рд╣рдо рдЙрдкрдпреЛрдЧреА рдкрд╛рдПрдВрдЧреЗ:</font></font><br><br><ul><li> <code>a()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рд╡рд░реНрдг рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП; </font></font></li><li> <code>cursor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рд╕реНрдХреНрд░реАрди рдкрд░ рдХрд░реНрд╕рд░ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП; </font></font></li><li> <code>eraseLine()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рдЬреИрд╕реЗ рдХрд┐ рдЦреБрдж рдХреЗ рд▓рд┐рдП рдмреЛрд▓рддрд╛ рд╣реИ; </font></font></li><li> <code>eraseScreen()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рдЗрд╕реА рддрд░рд╣; </font></font></li><li> <code>fg(), bg(), fgBright(), bgBright()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рдкрд╛рда рдФрд░ рдкреГрд╖реНрдарднреВрдорд┐ рдХреЗ рд░рдВрдЧреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрд░реАрдХреЗ - рд╣рдо рдЕрдкрдиреЗ рдЦреБрдж рдХреЗ, рдЕрдзрд┐рдХ рд╕реБрдЦрдж рдмрдирд╛ рджреЗрдВрдЧреЗ; </font></font></li><li> <code>reset()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - рд╕реЗрдЯ рд░рдВрдЧ рд╕реЗрдЯрд┐рдВрдЧреНрд╕, рдЭрд┐рд▓рдорд┐рд▓рд╛рд╣рдЯ, рдЖрджрд┐ рдХреЛ рд░реАрд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдПред </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЗрдП </font></font><code>ConsoleRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрд┐рддрд╛ рдХреЗ рддрд░реАрдХреЛрдВ рдХреЗ рд╕рд╛рде </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд░реНрдЧ рдмрдирд╛рдПрдВ рдЬреЛ </font><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рдХрд╛рдо рдореЗрдВ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧреА рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдкрд╣рд▓рд╛ рд╕рдВрд╕реНрдХрд░рдг рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦреЗрдЧрд╛:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleRenderer</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ansi: Ansi <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { AnsiConsole.systemInstall() clearScreen() resetAnsi() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resetAnsi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ansi = Ansi.ansi() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { print(Ansi.ansi().eraseScreen(Ansi.Erase.ALL).cursor(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { print(ansi.toString()) resetAnsi() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font></font><code>resetAnsi()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдирдИ (рдЦрд╛рд▓реА) рд╡рд╕реНрддреБ рдмрдирд╛рддреА рд╣реИ </font></font><code>Ansi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬреЛ рдЖрд╡рд╢реНрдпрдХ рдХрдорд╛рдВрдб (рдЪрд╛рд▓, рдЖрдЙрдЯрдкреБрдЯ, рдЖрджрд┐) рд╕реЗ рднрд░реА рдЬрд╛рдПрдЧреАред </font><font style="vertical-align: inherit;">рднрд░рдиреЗ рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдкрд░, рдЙрддреНрдкрдиреНрди рд╡рд╕реНрддреБ рдХреЛ рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рдореБрджреНрд░рдг рдХреЗ рд▓рд┐рдП рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>render()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдФрд░ рдЪрд░ рдХреЛ рдПрдХ рдирдИ рд╡рд╕реНрддреБ рдХреЗ рд╕рд╛рде рдЖрд░рдореНрдн рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЕрднреА рдХреБрдЫ рднреА рдЬрдЯрд┐рд▓ рдирд╣реАрдВ рд╣реИ, рд╣реИ рдирд╛? </font><font style="vertical-align: inherit;">рдФрд░ рдпрджрд┐ рдРрд╕рд╛ рд╣реИ, рддреЛ рд╣рдо рдЗрд╕ рд╡рд░реНрдЧ рдХреЛ рдЕрдиреНрдп рдЙрдкрдпреЛрдЧреА рддрд░реАрдХреЛрдВ рд╕реЗ рднрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдВрдЧреЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдХрд╛рд░ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЕрдзрд┐рдХрд╛рдВрд╢ рдЯрд░реНрдорд┐рдирд▓реЛрдВ рдХрд╛ рдорд╛рдирдХ рдХрдВрд╕реЛрд▓ рдЖрдХрд╛рд░ рдореЗрдВ 80x24 рд╣реИред </font><font style="vertical-align: inherit;">рд╣рдо рдЗрд╕ рддрдереНрдп рдХреЛ рджреЛ рд╕реНрдерд┐рд░рд╛рдВрдХ рдХреЗ рд╕рд╛рде рдиреЛрдЯ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>CONSOLE_WIDTH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>CONSOLE_HEIGHT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд╣рдо рд╡рд┐рд╢рд┐рд╖реНрдЯ рдореВрд▓реНрдпреЛрдВ рд╕реЗ рдЬреБрдбрд╝реЗ рдирд╣реАрдВ рд╣реЛрдВрдЧреЗ рдФрд░ рдбрд┐рдЬрд╛рдЗрди рдХреЛ рдпрдерд╛рд╕рдВрднрд╡ рд░рдмрд░ рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВрдЧреЗ (рдЬреИрд╕реЗ рд╡реЗрдм рдкрд░)ред </font><font style="vertical-align: inherit;">рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреА рд╕рдВрдЦреНрдпрд╛ рдПрдХ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ, рдкрд╣рд▓рд╛ рд╕рдордиреНрд╡рдп рдПрдХ рдкрдВрдХреНрддрд┐ рд╣реИ, рджреВрд╕рд░рд╛ рдПрдХ рд╕реНрддрдВрдн рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рдм рдЬрд╛рдирддреЗ рд╣реБрдП, рд╣рдо рдПрдХ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╡рд┐рдзрд┐ рд▓рд┐рдЦрддреЗ рд╣реИрдВ</font></font><code>drawHorizontalLine()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЪрд░рд┐рддреНрд░ рдХреЗ рд╕рд╛рде рдирд┐рд░реНрджрд┐рд╖реНрдЯ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рднрд░рдиреЗ рдХреЗ рд▓рд┐рдПред </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawHorizontalLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, filler: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Char</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-number"><span class="hljs-number">1</span></span>..CONSOLE_WIDTH).forEach { ansi.a(filler) } <span class="hljs-comment"><span class="hljs-comment">//for (i in 1..CONSOLE_WIDTH) { ansi.a(filler) } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдмрд╛рд░ рдлрд┐рд░, рдореИрдВ рдЖрдкрдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рддрд╛ рд╣реВрдВ рдХрд┐ рдХрдорд╛рдВрдб рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ </font></font><code>a()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╛ </font></font><code>cursor()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд┐рд╕реА рддрд╛рддреНрдХрд╛рд▓рд┐рдХ рдкреНрд░рднрд╛рд╡ рдХреЗ рд▓рд┐рдП рдиреЗрддреГрддреНрд╡ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ </font></font><code>Ansi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдорд╛рдВрдб </font><font style="vertical-align: inherit;">рдХреЗ </font><font style="vertical-align: inherit;">рд╕рдВрдмрдВрдзрд┐рдд рдЕрдиреБрдХреНрд░рдо </font><font style="vertical-align: inherit;">рдХреЛ рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рдЬрдм рдЗрди рджреГрд╢реНрдпреЛрдВ рдХреЛ рдкреНрд░рд┐рдВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛, рддрднреА рд╣рдо рдЙрдиреНрд╣реЗрдВ рд╕реНрдХреНрд░реАрди рдкрд░ рджреЗрдЦреЗрдВрдЧреЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╢рд╛рд╕реНрддреНрд░реАрдп рдЪрдХреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЗрд╕рдХреЗ рд╕рд╛рде рдХрд╛рд░реНрдпрд╛рддреНрдордХ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ </font><font style="vertical-align: inherit;">рдмреАрдЪ </font><font style="vertical-align: inherit;">рдХреЛрдИ рдмреБрдирд┐рдпрд╛рджреА рдЕрдВрддрд░ рдирд╣реАрдВ рд╣реИ - </font></font><code>ClosedRange</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>forEach{}</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдбреЗрд╡рд▓рдкрд░ рдЕрдкрдиреЗ рд▓рд┐рдП рдирд┐рд░реНрдгрдп рд▓реЗрддрд╛ рд╣реИ рдХрд┐ рдЙрд╕рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рдЕрдзрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдореИрдВ рдЖрдкрдХреЗ рд╕рд┐рд░ рдХреЛ рдХрд╛рд░реНрдпрд╛рддреНрдордХрддрд╛ рдХреЗ рд╕рд╛рде рдореВрд░реНрдЦ рдмрдирд╛рдирд╛ рдЬрд╛рд░реА рд░рдЦреВрдВрдЧрд╛, рдмрд╕ рдЗрд╕рд▓рд┐рдП рдХрд┐ </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореИрдВ рдПрдХ рдмрдВрджрд░ рд╣реВрдВ рдЬреЛ рд╕рдм рдХреБрдЫ рдирдпрд╛ рдкреНрдпрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЪрдордХрджрд╛рд░</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЛрд╖реНрдардХ рдПрдХ рдирдИ рд░реЗрдЦрд╛ рд╕реЗ рд▓рд┐рдкрдЯрд╛ рдирд╣реАрдВ рд╣реИ рдФрд░ рдХреЛрдб рдЕрдзрд┐рдХ рдХреЙрдореНрдкреИрдХреНрдЯ рджрд┐рдЦрддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдПрдХ рдФрд░ рдЙрдкрдпреЛрдЧрд┐рддрд╛ рд╡рд┐рдзрд┐ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>drawBlankLine()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЛ рдХрд┐ рдЬреИрд╕рд╛ рдХрд╛рдо рдХрд░рддреА рд╣реИ</font></font><code>drawHorizontalLine(offsetY, ' ')</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдХреЗрд╡рд▓ рд╡рд┐рд╕реНрддрд╛рд░ рдХреЗ рд╕рд╛рдеред </font><font style="vertical-align: inherit;">рдХрднреА-рдХрднреА рд╣рдореЗрдВ рд▓рд╛рдЗрди рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЦрд╛рд▓реА рдирд╣реАрдВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рд▓реЗрдХрд┐рди рд╢реБрд░реБрдЖрдд рдФрд░ рдЕрдВрдд (рдлреНрд░реЗрдо, рд╣рд╛рдБ) рдкрд░ рдПрдХ рдКрд░реНрдзреНрд╡рд╛рдзрд░ рд░реЗрдЦрд╛ рдЫреЛрдбрд╝ рджреЗрдВред </font><font style="vertical-align: inherit;">рдХреЛрдб рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦреЗрдЧрд╛:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawBlankLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) { ansi.a(<span class="hljs-string"><span class="hljs-string">'тФВ'</span></span>) (<span class="hljs-number"><span class="hljs-number">2</span></span> until CONSOLE_WIDTH).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.a(<span class="hljs-string"><span class="hljs-string">'тФВ'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { ansi.eraseLine(Ansi.Erase.ALL) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреИрд╕реЗ, рдЖрдкрдиреЗ рдЫрджреНрдо рд╡рд┐рдЬреНрдЮрд╛рди рд╕реЗ рдлрд╝реНрд░реЗрдо рдХреЛ рдХрднреА рдирд╣реАрдВ рдЦреАрдВрдЪрд╛? </font><font style="vertical-align: inherit;">рдкреНрд░рддреАрдХреЛрдВ рдХреЛ рд╕реАрдзреЗ рд╕реНрд░реЛрдд рдХреЛрдб рдореЗрдВ рдбрд╛рд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">Alt рдХреБрдВрдЬреА рджрдмрд╛рдП рд░рдЦреЗрдВ рдФрд░ рд╕рдВрдЦреНрдпрд╛рддреНрдордХ рдХреАрдкреИрдб рдкрд░ рд╡рд░реНрдг рдХреЛрдб рдЯрд╛рдЗрдк рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рддреЛ рдЬрд╛рдиреЗ рджреЛред </font><font style="vertical-align: inherit;">рдХрд┐рд╕реА рднреА рдПрдиреНрдХреЛрдбрд┐рдВрдЧ рдореЗрдВ рд╣рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ ASCII рдХреЛрдб рд╕рдорд╛рди рд╣реИрдВ, рдпрд╣рд╛рдБ рдиреНрдпреВрдирддрдо рд╕рдЬреНрдЬрди рд╕реЗрдЯ рд╣реИ:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6u/0y/js/6u0yjs19ntz1fue2wgkichhvnfo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдлрд┐рд░, Minecraft рдХреА рддрд░рд╣, рд╕рдВрднрд╛рд╡рдирд╛рдПрдВ рдХреЗрд╡рд▓ рдЖрдкрдХреА рдХрд▓реНрдкрдирд╛ рдХреА рд╕реАрдорд╛рдУрдВ рддрдХ рд╕реАрдорд┐рдд рд╣реИрдВред </font><font style="vertical-align: inherit;">рдФрд░ рд╕реНрдХреНрд░реАрди рдХрд╛ рдЖрдХрд╛рд░ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawCenteredCaption</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, text: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, color: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Color</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> center = (CONSOLE_WIDTH - text.length) / <span class="hljs-number"><span class="hljs-number">2</span></span> ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) ansi.a(<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) <span class="hljs-string"><span class="hljs-string">'тФВ'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>) (<span class="hljs-number"><span class="hljs-number">2</span></span> until center).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.color(color).a(text).reset() (text.length + center until CONSOLE_WIDTH).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.a(<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) <span class="hljs-string"><span class="hljs-string">'тФВ'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд▓реЛ рдлреВрд▓реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝реА рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВред рдХрдХреНрд╖рд╛ </font></font><code>Ansi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрдВ </font></font><code>Color</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрда рдкреНрд░рд╛рдердорд┐рдХ рд░рдВрдЧреЛрдВ (рдХрд╛рд▓рд╛, рдиреАрд▓рд╛, рд╣рд░рд╛, рд╕рд┐рдпрд╛рди, рд▓рд╛рд▓, рдмреИрдВрдЧрдиреА, рдкреАрд▓рд╛, рдЧреНрд░реЗ) рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рд╕реНрдерд┐рд░рд╛рдВрдХ рд╣реЛрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">, рдЬрд┐рдиреНрд╣реЗрдВ </font></font><code>fg()/bg()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдзреЗрд░реЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдпрд╛ </font></font><code>fgBright()/bgBright()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рдХрд╛рд╢ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рддрд░реАрдХреЛрдВ рдХреЗ рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬреЛ рдХрд░рдиреЗ рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдмрд╣реБрдд рдЕрд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд░рдВрдЧ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдирд╛ рд╡реИрд╕реЗ, рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдПрдХ рдореВрд▓реНрдп рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реИ - рд╣рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рджреЛ (рд░рдВрдЧ рдФрд░ рдЪрдордХ) рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдЗрд╕рд▓рд┐рдП, рд╣рдо рд╕реНрдерд┐рд░рд╛рдВрдХ рдФрд░ рд╣рдорд╛рд░реЗ рд╡рд┐рд╕реНрддрд╛рд░ рдХреЗ рддрд░реАрдХреЛрдВ (рд╕рд╛рде рд╣реА рд╕рд╛рде рдХреНрдпреВрдмреНрд╕ рдФрд░ рдирд╛рдпрдХреЛрдВ рдХреЗ рд╡рд░реНрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдореИрдк-рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рд░рдВрдЧ) рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдВрдЧреЗ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Color</span></span></span><span class="hljs-class"> </span></span>{ BLACK, DARK_BLUE, DARK_GREEN, DARK_CYAN, DARK_RED, DARK_MAGENTA, DARK_YELLOW, LIGHT_GRAY, DARK_GRAY, LIGHT_BLUE, LIGHT_GREEN, LIGHT_CYAN, LIGHT_RED, LIGHT_MAGENTA, LIGHT_YELLOW, WHITE } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> Ansi.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">color</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(color: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Color</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: Ansi = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (color) { Color.BLACK -&gt; fgBlack() Color.DARK_BLUE -&gt; fgBlue() Color.DARK_GREEN -&gt; fgGreen() Color.DARK_CYAN -&gt; fgCyan() Color.DARK_RED -&gt; fgRed() Color.DARK_MAGENTA -&gt; fgMagenta() Color.DARK_YELLOW -&gt; fgYellow() Color.LIGHT_GRAY -&gt; fg(Ansi.Color.WHITE) Color.DARK_GRAY -&gt; fgBrightBlack() Color.LIGHT_BLUE -&gt; fgBrightBlue() Color.LIGHT_GREEN -&gt; fgBrightGreen() Color.LIGHT_CYAN -&gt; fgBrightCyan() Color.LIGHT_RED -&gt; fgBrightRed() Color.LIGHT_MAGENTA -&gt; fgBrightMagenta() Color.LIGHT_YELLOW -&gt; fgBrightYellow() Color.WHITE -&gt; fgBright(Ansi.Color.WHITE) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> Ansi.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">background</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(color: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Color</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: Ansi = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (color) { Color.BLACK -&gt; ansi.bg(Ansi.Color.BLACK) Color.DARK_BLUE -&gt; ansi.bg(Ansi.Color.BLUE) Color.DARK_GREEN -&gt; ansi.bgGreen() Color.DARK_CYAN -&gt; ansi.bg(Ansi.Color.CYAN) Color.DARK_RED -&gt; ansi.bgRed() Color.DARK_MAGENTA -&gt; ansi.bgMagenta() Color.DARK_YELLOW -&gt; ansi.bgYellow() Color.LIGHT_GRAY -&gt; ansi.bg(Ansi.Color.WHITE) Color.DARK_GRAY -&gt; ansi.bgBright(Ansi.Color.BLACK) Color.LIGHT_BLUE -&gt; ansi.bgBright(Ansi.Color.BLUE) Color.LIGHT_GREEN -&gt; ansi.bgBrightGreen() Color.LIGHT_CYAN -&gt; ansi.bgBright(Ansi.Color.CYAN) Color.LIGHT_RED -&gt; ansi.bgBrightRed() Color.LIGHT_MAGENTA -&gt; ansi.bgBright(Ansi.Color.MAGENTA) Color.LIGHT_YELLOW -&gt; ansi.bgBrightYellow() Color.WHITE -&gt; ansi.bgBright(Ansi.Color.WHITE) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> dieColors = mapOf( Die.Type.PHYSICAL to Color.LIGHT_BLUE, Die.Type.SOMATIC to Color.LIGHT_GREEN, Die.Type.MENTAL to Color.LIGHT_MAGENTA, Die.Type.VERBAL to Color.LIGHT_YELLOW, Die.Type.DIVINE to Color.LIGHT_CYAN, Die.Type.WOUND to Color.DARK_GRAY, Die.Type.ENEMY to Color.DARK_RED, Die.Type.VILLAIN to Color.LIGHT_RED, Die.Type.OBSTACLE to Color.DARK_YELLOW, Die.Type.ALLY to Color.WHITE ) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroColors = mapOf( Hero.Type.BRAWLER to Color.LIGHT_BLUE, Hero.Type.HUNTER to Color.LIGHT_GREEN )</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдм, 16 рдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдЙрдкрд▓рдмреНрдз рд░рдВрдЧ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░реВрдк рд╕реЗ рдПрдХ рдПрдХрд▓ рд╕реНрдерд┐рд░рд╛рдВрдХ рджреНрд╡рд╛рд░рд╛ рдкрд╣рдЪрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред рд╣рдо рдХреБрдЫ рдФрд░ рдЙрдкрдпреЛрдЧреА рддрд░реАрдХреЗ рд▓рд┐рдЦреЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рд╣рдо рдПрдХ рдФрд░ рдмрд╛рдд рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдБ: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╛рда рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЗ рд▓рд┐рдП рд╕реНрдерд┐рд░рд╛рдВрдХ рдХрд╣рд╛рдБ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░реЗрдВ? </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реНрдерд┐рд░рд╛рдВрдХ рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдирд┐рдХрд╛рд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рддрд╛рдХрд┐ рд╡реЗ рд╕рднреА рдПрдХ рд╣реА рд╕реНрдерд╛рди рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реЛрдВ - рдЗрд╕рд╕реЗ рдЙрдиреНрд╣реЗрдВ рдмрдирд╛рдП рд░рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред рдФрд░ рдпрд╣ рд╕реНрдерд╛рдиреАрдпрдХрд░рдг рдХреЗ рд▓рд┐рдП рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ ... "</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реНрдерд┐рд░рд╛рдВрдХ рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ ... рдареАрдХ рд╣реИ, рд╣рд╛рдБред рд╣рдо рд╕рд╣реЗрдВрдЧреЗред рдЗрд╕ рддрд░рд╣ рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ рдЬрд╛рд╡рд╛ рддрдВрддреНрд░ рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реИ </font></font><code>java.util.ResourceBundle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЛ рдлрд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ </font></font><code>.properties</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдпрд╣рд╛рдБ рд╣рдо рдРрд╕реА рдлрд╛рдЗрд▓ рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ:</font></font><br><br><pre> <code class="plaintext hljs"># Game status messages choose_dice_perform_check=Choose dice to perform check: end_of_turn_discard_extra=END OF TURN: Discard extra dice: end_of_turn_discard_optional=END OF TURN: Discard any dice, if needed: choose_action_before_exploration=Choose your action: choose_action_after_exploration=Already explored this turn. Choose what to do now: encounter_physical=Encountered PHYSICAL die. Need to pass respective check or lose this die. encounter_somatic=Encountered SOMATIC die. Need to pass respective check or lose this die. encounter_mental=Encountered MENTAL die. Need to pass respective check or lose this die. encounter_verbal=Encountered VERBAL die. Need to pass respective check or lose this die. encounter_divine=Encountered DIVINE die. Can be acquired automatically (no checks needed): die_acquire_success=You have acquired the die! die_acquire_failure=You have failed to acquire the die. game_loss_out_of_time=You ran out of time # Die types physical=PHYSICAL somatic=SOMATIC mental=MENTAL verbal=VERBAL divine=DIVINE ally=ALLY wound=WOUND enemy=ENEMY villain=VILLAIN obstacle=OBSTACLE # Hero types and descriptions brawler=Brawler hunter=Hunter # Various labels avg=avg bag=Bag bag_size=Bag size class=Class closed=Closed discard=Discard empty=Empty encountered=Encountered fail=Fail hand=Hand heros_turn=%s's turn max=max min=min perform_check=Perform check: pile=Pile received_new_die=Received new die result=Result success=Success sum=sum time=Time total=Total # Action names and descriptions action_confirm_key=ENTER action_confirm_name=Confirm action_cancel_key=ESC action_cancel_name=Cancel action_explore_location_key=E action_explore_location_name=xplore action_finish_turn_key=F action_finish_turn_name=inish action_hide_key=H action_hide_name=ide action_discard_key=D action_discard_name=iscard action_acquire_key=A action_acquire_name=cquire action_leave_key=L action_leave_name=eave action_forfeit_key=F action_forfeit_name=orfeit</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреНрд░рддреНрдпреЗрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдПрдХ рдХреБрдВрдЬреА-рдорд╛рди рдпреБрдЧреНрдо рд╣реЛрддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдПрдХ рд╡рд░реНрдг рджреНрд╡рд╛рд░рд╛ рдЕрд▓рдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЖрдк рдлрд╝рд╛рдЗрд▓ рдХреЛ рдХрд╣реАрдВ рднреА рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ - рдореБрдЦреНрдп рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЗрд╕рдХреЗ рд▓рд┐рдП рд░рд╛рд╕реНрддрд╛ рд╡рд░реНрдЧрдкрде рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдкрд╛рда рдореЗрдВ рджреЛ рднрд╛рдЧ рд╣реЛрддреЗ рд╣реИрдВ: рдкрд╣рд▓рд╛ рдЕрдХреНрд╖рд░ рд╕реНрдХреНрд░реАрди рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрдиреЗ рдкрд░ рди рдХреЗрд╡рд▓ рдкреАрд▓реЗ рд░рдВрдЧ рдореЗрдВ рд╣рд╛рдЗрд▓рд╛рдЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдмрд▓реНрдХрд┐ рд╡рд╣ рдХреБрдВрдЬреА рднреА рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдЗрд╕ рдХреНрд░рд┐рдпрд╛ рдХреЛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджрдмрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдЙрдиреНрд╣реЗрдВ рдЕрд▓рдЧ рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдирд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдЕрдореВрд░реНрдд рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рд╛рд░реВрдк рд╕реЗ (рдПрдВрдбреНрд░реЙрдЗрдб рдореЗрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рддрд╛рд░ рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ) рдФрд░ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringLoader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреБрдВрдЬреА рдЗрдирдкреБрдЯ рдореЗрдВ рдкреНрд░реЗрд╖рд┐рдд рд╣реЛрддреА рд╣реИ, рдЖрдЙрдЯрдкреБрдЯ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░реЗрдЦрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рд╕рдорд╛рди рд╕рд░рд▓ рд╣реИ (рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдлрд╝рд╛рдЗрд▓ рдкрде рдХреЗ рд╕рд╛рде рд╕реНрдерд┐рдд рд╣реИ </font></font><code>src/main/resources/text/strings.properties</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertiesStringLoader</span></span></span></span>() : StringLoader { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> properties = ResourceBundle.getBundle(<span class="hljs-string"><span class="hljs-string">"text.strings"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = properties.getString(key) ?: <span class="hljs-string"><span class="hljs-string">""</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдм </font></font><code>drawStatusMessage()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдХреНрд░реАрди рдкрд░ рдЦреЗрд▓ рдЗрдВрдЬрди рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ ( </font></font><code>StatusMessage</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рдзрд┐ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ </font><font style="vertical-align: inherit;">рдФрд░ </font></font><code>drawActionList()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрд▓рдмреНрдз рдХрд╛рд░реНрдпреЛрдВ рдХреА рд╕реВрдЪреА рдкреНрд░рджрд░реНрд╢рд┐рдд </font><font style="vertical-align: inherit;">рдХрд░рдиреЗ рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">( </font><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реЛрдЧрд╛ </font></font><code>ActionList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд╕рд╛рде рд╣реА рдЕрдиреНрдп рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╡рд┐рдзрд┐рдпрд╛рдВ рдЬреЛ рдХреЗрд╡рд▓ рдЖрддреНрдорд╛ рдХреА рдЗрдЪреНрдЫрд╛ рд╣реИред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХреЛрдб рд╣реИрдВ, рдЗрд╕рдХрд╛ рдПрдХ рд╣рд┐рд╕реНрд╕рд╛ рд╣рдо рдкрд╣рд▓реЗ рд╣реА рджреЗрдЦ рдЪреБрдХреЗ рд╣реИрдВ ... рдЗрд╕рд▓рд┐рдП рдпрд╣рд╛рдВ рдЖрдкрдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдкреЙрдЗрд▓рд░ рд╣реИ</font></font></b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleRenderer</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> strings: StringLoader) { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ansi: Ansi <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { AnsiConsole.systemInstall() clearScreen() resetAnsi() } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = strings.loadString(key) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resetAnsi</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ansi = Ansi.ansi() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { print(Ansi.ansi().eraseScreen(Ansi.Erase.ALL).cursor(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)) } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ansi.cursor(CONSOLE_HEIGHT, CONSOLE_WIDTH) System.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.print(ansi.toString()) resetAnsi() } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawBigNumber</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetX: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, number: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> = with(ansi) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentX = offsetX cursor(offsetY, currentX) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> text = number.toString() text.forEach { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (it) { <span class="hljs-string"><span class="hljs-string">'0'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'1'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИтЦИ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'2'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИтЦИ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'3'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'4'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'5'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'6'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'7'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИтЦИтЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'8'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) } <span class="hljs-string"><span class="hljs-string">'9'</span></span> -&gt; { cursor(offsetY, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">1</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">"тЦИ тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">2</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИтЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">3</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИ "</span></span>) cursor(offsetY + <span class="hljs-number"><span class="hljs-number">4</span></span>, currentX) a(<span class="hljs-string"><span class="hljs-string">" тЦИтЦИтЦИ "</span></span>) } } currentX += <span class="hljs-number"><span class="hljs-number">6</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawHorizontalLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, filler: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Char</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) (<span class="hljs-number"><span class="hljs-number">1</span></span>..CONSOLE_WIDTH).forEach { ansi.a(filler) } } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawBlankLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) { ansi.a(<span class="hljs-string"><span class="hljs-string">'тФВ'</span></span>) (<span class="hljs-number"><span class="hljs-number">2</span></span> until CONSOLE_WIDTH).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.a(<span class="hljs-string"><span class="hljs-string">'тФВ'</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { ansi.eraseLine(Ansi.Erase.ALL) } } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawCenteredCaption</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, text: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, color: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Color</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> center = (CONSOLE_WIDTH - text.length) / <span class="hljs-number"><span class="hljs-number">2</span></span> ansi.cursor(offsetY, <span class="hljs-number"><span class="hljs-number">1</span></span>) ansi.a(<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) <span class="hljs-string"><span class="hljs-string">'тФВ'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>) (<span class="hljs-number"><span class="hljs-number">2</span></span> until center).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.color(color).a(text).reset() (text.length + center until CONSOLE_WIDTH).forEach { ansi.a(<span class="hljs-string"><span class="hljs-string">' '</span></span>) } ansi.a(<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawBorders) <span class="hljs-string"><span class="hljs-string">'тФВ'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">' '</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawStatusMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(offsetY: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, message: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">StatusMessage</span></span></span></span><span class="hljs-function"><span class="hljs-params">, drawBorders: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//Setup val messageText = loadString(message.toString().toLowerCase()) var currentX = 1 val rightBorder = CONSOLE_WIDTH - if (drawBorders) 1 else 0 //Left border ansi.cursor(offsetY, 1) if (drawBorders) { ansi.a('тФВ') currentX++ } ansi.a(' ') currentX++ //Text ansi.a(messageText) currentX += messageText.length //Right border (currentX..rightBorder).forEach { ansi.a(' ') } if (drawBorders) { ansi.a('тФВ') } } protected fun drawActionList(offsetY: Int, actions: ActionList, drawBorders: Boolean = true) { val rightBorder = CONSOLE_WIDTH - if (drawBorders) 1 else 0 var currentX = 1 //Left border ansi.cursor(offsetY, 1) if (drawBorders) { ansi.a('тФВ') currentX++ } ansi.a(' ') currentX++ //List of actions actions.forEach { action -&gt; val key = loadString("action_${action.toString().toLowerCase()}_key") val name = loadString("action_${action.toString().toLowerCase()}_name") val length = key.length + 2 + name.length if (currentX + length &gt;= rightBorder) { (currentX..rightBorder).forEach { ansi.a(' ') } if (drawBorders) { ansi.a('тФВ') } ansi.cursor(offsetY + 1, 1) currentX = 1 if (drawBorders) { ansi.a('тФВ') currentX++ } ansi.a(' ') currentX++ } if (action.isEnabled) { ansi.color(Color.LIGHT_YELLOW) } ansi.a('(').a(key).a(')').reset() ansi.a(name) ansi.a(" ") currentX += length + 2 } //Right border (currentX..rightBorder).forEach { ansi.a(' ') } if (drawBorders) { ansi.a('тФВ') } } protected enum class Color { BLACK, DARK_BLUE, DARK_GREEN, DARK_CYAN, DARK_RED, DARK_MAGENTA, DARK_YELLOW, LIGHT_GRAY, DARK_GRAY, LIGHT_BLUE, LIGHT_GREEN, LIGHT_CYAN, LIGHT_RED, LIGHT_MAGENTA, LIGHT_YELLOW, WHITE } protected fun Ansi.color(color: Color?): Ansi = when (color) { Color.BLACK -&gt; fgBlack() Color.DARK_BLUE -&gt; fgBlue() Color.DARK_GREEN -&gt; fgGreen() Color.DARK_CYAN -&gt; fgCyan() Color.DARK_RED -&gt; fgRed() Color.DARK_MAGENTA -&gt; fgMagenta() Color.DARK_YELLOW -&gt; fgYellow() Color.LIGHT_GRAY -&gt; fg(Ansi.Color.WHITE) Color.DARK_GRAY -&gt; fgBrightBlack() Color.LIGHT_BLUE -&gt; fgBrightBlue() Color.LIGHT_GREEN -&gt; fgBrightGreen() Color.LIGHT_CYAN -&gt; fgBrightCyan() Color.LIGHT_RED -&gt; fgBrightRed() Color.LIGHT_MAGENTA -&gt; fgBrightMagenta() Color.LIGHT_YELLOW -&gt; fgBrightYellow() Color.WHITE -&gt; fgBright(Ansi.Color.WHITE) else -&gt; this } protected fun Ansi.background(color: Color?): Ansi = when (color) { Color.BLACK -&gt; ansi.bg(Ansi.Color.BLACK) Color.DARK_BLUE -&gt; ansi.bg(Ansi.Color.BLUE) Color.DARK_GREEN -&gt; ansi.bgGreen() Color.DARK_CYAN -&gt; ansi.bg(Ansi.Color.CYAN) Color.DARK_RED -&gt; ansi.bgRed() Color.DARK_MAGENTA -&gt; ansi.bgMagenta() Color.DARK_YELLOW -&gt; ansi.bgYellow() Color.LIGHT_GRAY -&gt; ansi.bg(Ansi.Color.WHITE) Color.DARK_GRAY -&gt; ansi.bgBright(Ansi.Color.BLACK) Color.LIGHT_BLUE -&gt; ansi.bgBright(Ansi.Color.BLUE) Color.LIGHT_GREEN -&gt; ansi.bgBrightGreen() Color.LIGHT_CYAN -&gt; ansi.bgBright(Ansi.Color.CYAN) Color.LIGHT_RED -&gt; ansi.bgBrightRed() Color.LIGHT_MAGENTA -&gt; ansi.bgBright(Ansi.Color.MAGENTA) Color.LIGHT_YELLOW -&gt; ansi.bgBrightYellow() Color.WHITE -&gt; ansi.bgBright(Ansi.Color.WHITE) else -&gt; this } protected val dieColors = mapOf( Die.Type.PHYSICAL to Color.LIGHT_BLUE, Die.Type.SOMATIC to Color.LIGHT_GREEN, Die.Type.MENTAL to Color.LIGHT_MAGENTA, Die.Type.VERBAL to Color.LIGHT_YELLOW, Die.Type.DIVINE to Color.LIGHT_CYAN, Die.Type.WOUND to Color.DARK_GRAY, Die.Type.ENEMY to Color.DARK_RED, Die.Type.VILLAIN to Color.LIGHT_RED, Die.Type.OBSTACLE to Color.DARK_YELLOW, Die.Type.ALLY to Color.WHITE ) protected val heroColors = mapOf( Hero.Type.BRAWLER to Color.LIGHT_BLUE, Hero.Type.HUNTER to Color.LIGHT_GREEN ) protected open fun shortcut(index: Int) = "1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ"[index] }</span></span></code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдордиреЗ рдпрд╣ рд╕рдм рдХреНрдпреЛрдВ рдХрд┐рдпрд╛, рдЖрдк рдкреВрдЫреЗрдВ? </font><font style="vertical-align: inherit;">рд╣рд╛рдВ, рдЗрд╕ рдЕрджреНрднреБрдд рд╡рд░реНрдЧ рд╕реЗ рд╣рдорд╛рд░реЗ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП </font></font><code>GameRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрдЧ рдЖрд░реЗрдЦ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/tn/00/fj/tn00fjvlnpga4zqm1p-ojveq7nm.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╣ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ рдХрд┐ рдкрд╣рд▓реЗ, рд╕рдмрд╕реЗ рд╕рд░рд▓ рд╡рд┐рдзрд┐ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реЛрдЧрд╛: </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawGameLoss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(message: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">StatusMessage</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> centerY = CONSOLE_HEIGHT / <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> until centerY).forEach { drawBlankLine(it, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = loadString(message.toString().toLowerCase()).toUpperCase() drawCenteredCaption(centerY, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>, LIGHT_RED, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) (centerY + <span class="hljs-number"><span class="hljs-number">1</span></span>..CONSOLE_HEIGHT).forEach { drawBlankLine(it, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) } render() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрд▓реМрдХрд┐рдХ рдХреБрдЫ рднреА рдирд╣реАрдВ, </font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдХреНрд░реАрди рдХреЗ рдХреЗрдВрджреНрд░ рдореЗрдВ рд▓рд╛рд▓ рд░рдВрдЧ рдореЗрдВ рдЦреАрдВрдЪреА рдЧрдИ </font><font style="vertical-align: inherit;">рд╕рд┐рд░реНрдл рдПрдХ рдЯреЗрдХреНрд╕реНрдЯ рд▓рд╛рдЗрди </font><font style="vertical-align: inherit;">( </font></font><code>drawCenteredCaption()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)ред рд╢реЗрд╖ рдХреЛрдб рд░рд┐рдХреНрдд рд▓рд╛рдЗрдиреЛрдВ рдХреЗ рд╕рд╛рде рд╢реЗрд╖ рд╕реНрдХреНрд░реАрди рдХреЛ рднрд░рддрд╛ рд╣реИред рд╢рд╛рдпрдж рдХреЛрдИ рдкреВрдЫреЗрдЧрд╛ рдХрд┐ рдпрд╣ рдХреНрдпреЛрдВ рдЖрд╡рд╢реНрдпрдХ рд╣реИ - рдЖрдЦрд┐рд░рдХрд╛рд░ </font></font><code>clearScreen()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рдзрд┐ рд╣реИ </font><font style="vertical-align: inherit;">, рдпрд╣ </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдЗрд╕реЗ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рд╕реНрдХреНрд░реАрди рдХреЛ рд╕рд╛рдлрд╝ рдХрд░реЗрдВ, рдФрд░ рдлрд┐рд░ рд╡рд╛рдВрдЫрд┐рдд рдкрд╛рда рдЖрдХрд░реНрд╖рд┐рдд рдХрд░реЗрдВред рдХрд╛рд╢, рдпрд╣ рдПрдХ рдЖрд▓рд╕реА рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╣реИ рдЬрд┐рд╕рдХрд╛ рд╣рдо рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред рдХрд╛рд░рдг рдмрд╣реБрдд рд╕рд░рд▓ рд╣реИ: рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд╕рд╛рде, рд╕реНрдХреНрд░реАрди рдкрд░ рдХреБрдЫ рдкрджреЛрдВ рдХреЛ рджреЛ рдмрд╛рд░ рдЦреАрдВрдЪрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдЭрд┐рд▓рдорд┐рд▓рд╛рд╣рдЯ рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИ, рдЦрд╛рд╕рдХрд░ рдЬрдм рд╕реНрдХреНрд░реАрди рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдХрдИ рдмрд╛рд░ рдЦреАрдВрдЪреА рдЬрд╛рддреА рд╣реИ (рдПрдирд┐рдореЗрд╢рди рдХреЗ рджреМрд░рд╛рди)ред рдЗрд╕рд▓рд┐рдП, рд╣рдорд╛рд░рд╛ рдХрд╛рдо рдХреЗрд╡рд▓ рд╕рд╣реА рдкрд╛рддреНрд░реЛрдВ рдХреЛ рд╕рд╣реА рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рдЦреАрдВрдЪрдирд╛ рдирд╣реАрдВ рд╣реИ, рдмрд▓реНрдХрд┐ </font><b><font style="vertical-align: inherit;">рдкреВрд░реЗ</font></b><font style="vertical-align: inherit;"> рдХреЛ рднрд░рдирд╛ рд╣реИ</font></font><b><font style="vertical-align: inherit;"></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦрд╛рд▓реА рдкрд╛рддреНрд░реЛрдВ рдХреЗ рд╕рд╛рде рд╕реНрдХреНрд░реАрди рдХреЗ рдмрд╛рдХреА (рддрд╛рдХрд┐ рдЕрдиреНрдп рд░реЗрдВрдбрд░рд┐рдВрдЧ рд╕реЗ рдХрд▓рд╛рдХреГрддрд┐рдпрд╛рдВ рдЙрд╕ рдкрд░ рди рд░рд╣реЗрдВ)ред рдФрд░ рдпрд╣ рдХрд╛рд░реНрдп рдЗрддрдирд╛ рд╕рд░рд▓ рдирд╣реАрдВ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд┐рдореНрди рд╡рд┐рдзрд┐ рдЗрд╕ рд╕рд┐рджреНрдзрд╛рдВрдд рдХрд╛ рдЕрдиреБрд╕рд░рдг рдХрд░рддреА рд╣реИ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawHeroTurnStart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(hero: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> centerY = (CONSOLE_HEIGHT - <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">2</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> until centerY).forEach { drawBlankLine(it, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) } ansi.color(heroColors[hero.type]) drawHorizontalLine(centerY, <span class="hljs-string"><span class="hljs-string">'тФА'</span></span>) drawHorizontalLine(centerY + <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">'тФА'</span></span>) ansi.reset() ansi.cursor(centerY + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).eraseLine() ansi.cursor(centerY + <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>).eraseLine() ansi.cursor(centerY + <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> text = String.format(loadString(<span class="hljs-string"><span class="hljs-string">"heros_turn"</span></span>), hero.name.toUpperCase()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> index = text.indexOf(hero.name.toUpperCase()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> center = (CONSOLE_WIDTH - text.length) / <span class="hljs-number"><span class="hljs-number">2</span></span> ansi.cursor(centerY + <span class="hljs-number"><span class="hljs-number">2</span></span>, center) ansi.eraseLine(Ansi.Erase.BACKWARD) ansi.a(text.substring(<span class="hljs-number"><span class="hljs-number">0</span></span>, index)) ansi.color(heroColors[hero.type]).a(hero.name.toUpperCase()).reset() ansi.a(text.substring(index + hero.name.length)) ansi.eraseLine(Ansi.Erase.FORWARD) (centerY + <span class="hljs-number"><span class="hljs-number">5</span></span>..CONSOLE_HEIGHT).forEach { drawBlankLine(it, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) } render() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ, рдХреЗрдВрджреНрд░рд┐рдд рдкрд╛рда рдХреЗ рдЕрд▓рд╛рд╡рд╛, рджреЛ рдХреНрд╖реИрддрд┐рдЬ рд░реЗрдЦрд╛рдПрдВ рднреА рд╣реИрдВ (рдКрдкрд░ рд╕реНрдХреНрд░реАрдирд╢реЙрдЯ рджреЗрдЦреЗрдВ)ред </font><font style="vertical-align: inherit;">рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдХреЗрдВрджреНрд░ рдЕрдХреНрд╖рд░ рджреЛ рд░рдВрдЧреЛрдВ рдореЗрдВ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдпрд╣ рднреА рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рд╕реНрдХреВрд▓ рдореЗрдВ рдЧрдгрд┐рдд рд╕реАрдЦрдирд╛ рдЕрднреА рднреА рдЙрдкрдпреЛрдЧреА рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреИрд░, рд╣рдордиреЗ рд╕рдмрд╕реЗ рд╕рд░рд▓ рддрд░реАрдХреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдФрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдЬрд╛рдирдиреЗ рдХрд╛ рд╕рдордп рдЖ рдЧрдпрд╛ рд╣реИ </font></font><code>drawLocationInteriorScreen()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рд╕реНрд╡рдпрдВ рд╕рдордЭрддреЗ рд╣реИрдВ, рдпрд╣рд╛рдБ рдЕрдзрд┐рдХ рдкрд░рд┐рдорд╛рдг рдХрд╛ рдХреНрд░рдо рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ рд╕реНрдХреНрд░реАрди рдХреА рд╕рд╛рдордЧреНрд░реА рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдмрджрд▓ рдЬрд╛рдПрдЧреА рдФрд░ рдЗрд╕реЗ рд▓рдЧрд╛рддрд╛рд░ рдкреБрди: рддреИрдпрд╛рд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ (рдХрднреА-рдХрднреА рдПрдиреАрдореЗрд╢рди рдХреЗ рд╕рд╛рде)ред </font><font style="vertical-align: inherit;">рдЦреИрд░, рдЕрдВрдд рдореЗрдВ рдЖрдкрдХреЛ рдЦрддреНрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдКрдкрд░ рджреА рдЧрдИ рд╕реНрдХреНрд░реАрди рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕ рдкрджреНрдзрддрд┐ рдХреЗ рдврд╛рдВрдЪреЗ рдореЗрдВ, рддреАрди рдФрд░ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. рдмреИрдЧ рд╕реЗ рд╣рдЯрд╛рдП рдЧрдП рдХреНрдпреВрдм рдХреЗ рд╕рд╛рде рдмреИрдардХ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/8x/lx/h9/8xlxh9h-ulu0efaigsnnfuo6nsq.png"></a> <br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. рдкрд░реАрдХреНрд╖рдг рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╛рд╕рд╛ рдХрд╛ рдЪрдпрди рдХрд░рдирд╛</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/cd/iw/2e/cdiw2e0fxlfdsjeijyxwauzth-m.png"></a> <br></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. рдкрд░реАрдХреНрд╖рдг рдХреЗ рдкрд░рд┐рдгрд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/t3/-w/7r/t3-w7rfvplkfeywr9_5accvkada.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдЖрдкрдХреЗ рд▓рд┐рдП рдореЗрд░реА рдмрд╣реБрдд рдЕрдЪреНрдЫреА рд╕рд▓рд╛рд╣ рд╣реИ: рд╕рднреА рдХреЛрдб рдХреЛ рдПрдХ рд╡рд┐рдзрд┐ рд╕реЗ рдЕрд▓рдЧ рди рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдХрдИ рддрд░реАрдХреЛрдВ рд╕реЗ рддреЛрдбрд╝реЗрдВ (рднрд▓реЗ рд╣реА рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреЛ рдХреЗрд╡рд▓ рдПрдХ рдмрд╛рд░ рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛)ред </font><font style="vertical-align: inherit;">рдЦреИрд░, "рд░рдмрд░" рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдордд рднреВрд▓рдирд╛ред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдЧрд░ рдпрд╣ рдЖрдкрдХреА рдЖрдВрдЦреЛрдВ рдореЗрдВ рдЭреБрдирдЭреБрдиреА рд╢реБрд░реВ рдХрд░ рджреЗрддрд╛ рд╣реИ, рддреЛ рдХреБрдЫ рд╕реЗрдХрдВрдб рдХреЗ рд▓рд┐рдП рдЭрдкрдХреА рд▓реЗрдВ - рдпрд╣ рдорджрдж рдХрд░рдиреА рдЪрд╛рд╣рд┐рдП</font></font></b> <div class="spoiler_text"><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleGameRenderer</span></span></span></span>(loader: StringLoader) : ConsoleRenderer(loader), GameRenderer { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawLocationTopPanel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(location: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Location</span></span></span></span><span class="hljs-function"><span class="hljs-params">, heroesAtLocation: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">List</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;, currentHero: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Hero</span></span></span></span><span class="hljs-function"><span class="hljs-params">, timer: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> closedString = loadString(<span class="hljs-string"><span class="hljs-string">"closed"</span></span>).toLowerCase() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> timeString = loadString(<span class="hljs-string"><span class="hljs-string">"time"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> locationName = location.name.toString().toUpperCase() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> separatorX1 = locationName.length + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (location.isOpen) { <span class="hljs-number"><span class="hljs-number">6</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (location.bag.size &gt;= <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { closedString.length + <span class="hljs-number"><span class="hljs-number">7</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> separatorX2 = CONSOLE_WIDTH - timeString.length - <span class="hljs-number"><span class="hljs-number">6</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timer &gt;= <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-comment"><span class="hljs-comment">//Top border ansi.cursor(1, 1) ansi.a('тФМ') (2 until CONSOLE_WIDTH).forEach { ansi.a(if (it == separatorX1 || it == separatorX2) 'тФм' else 'тФА') } ansi.a('тФР') //Center row ansi.cursor(2, 1) ansi.a("тФВ ") if (location.isOpen) { ansi.color(WHITE).a(locationName).reset() ansi.a(": ").a(location.bag.size) } else { ansi.a(locationName).reset() ansi.color(DARK_GRAY).a(" (").a(closedString).a(')').reset() } ansi.a(" тФВ") var currentX = separatorX1 + 2 heroesAtLocation.forEach { hero -&gt; ansi.a(' ') ansi.color(heroColors[hero.type]) ansi.a(if (hero === currentHero) 'тШ╗' else '').reset() currentX += 2 } (currentX..separatorX2).forEach { ansi.a(' ') } ansi.a("тФВ ").a(timeString).a(": ") when { timer &lt;= 5 -&gt; ansi.color(LIGHT_RED) timer &lt;= 15 -&gt; ansi.color(LIGHT_YELLOW) else -&gt; ansi.color(LIGHT_GREEN) } ansi.bold().a(timer).reset().a(" тФВ") //Bottom border ansi.cursor(3, 1) ansi.a('тФЬ') (2 until CONSOLE_WIDTH).forEach { ansi.a(if (it == separatorX1 || it == separatorX2) 'тФ┤' else 'тФА') } ansi.a('тФд') } private fun drawLocationHeroPanel(offsetY: Int, hero: Hero) { val bagString = loadString("bag").toUpperCase() val discardString = loadString("discard").toUpperCase() val separatorX1 = hero.name.length + 4 val separatorX3 = CONSOLE_WIDTH - discardString.length - 6 - if (hero.discardPile.size &gt;= 10) 1 else 0 val separatorX2 = separatorX3 - bagString.length - 6 - if (hero.bag.size &gt;= 10) 1 else 0 //Top border ansi.cursor(offsetY, 1) ansi.a('тФЬ') (2 until CONSOLE_WIDTH).forEach { ansi.a(if (it == separatorX1 || it == separatorX2 || it == separatorX3) 'тФм' else 'тФА') } ansi.a('тФд') //Center row ansi.cursor(offsetY + 1, 1) ansi.a("тФВ ") ansi.color(heroColors[hero.type]).a(hero.name.toUpperCase()).reset() ansi.a(" тФВ") val currentX = separatorX1 + 1 (currentX until separatorX2).forEach { ansi.a(' ') } ansi.a("тФВ ").a(bagString).a(": ") when { hero.bag.size &lt;= hero.hand.capacity -&gt; ansi.color(LIGHT_RED) else -&gt; ansi.color(LIGHT_YELLOW) } ansi.a(hero.bag.size).reset() ansi.a(" тФВ ").a(discardString).a(": ") ansi.a(hero.discardPile.size) ansi.a(" тФВ") //Bottom border ansi.cursor(offsetY + 2, 1) ansi.a('тФЬ') (2 until CONSOLE_WIDTH).forEach { ansi.a(if (it == separatorX1 || it == separatorX2 || it == separatorX3) 'тФ┤' else 'тФА') } ansi.a('тФд') } private fun drawDieSize(die: Die, checked: Boolean = false) { when { checked -&gt; ansi.background(dieColors[die.type]).color(BLACK) else -&gt; ansi.color(dieColors[die.type]) } ansi.a(die.toString()).reset() } private fun drawDieFrameSmall(offsetX: Int, offsetY: Int, longDieSize: Boolean) { //Top border ansi.cursor(offsetY, offsetX) ansi.a('тХФ') (0 until if (longDieSize) 5 else 4).forEach { ansi.a('тХР') } ansi.a('тХЧ') //Left border ansi.cursor(offsetY + 1, offsetX) ansi.a("тХС ") //Bottom border ansi.cursor(offsetY + 2, offsetX) ansi.a("тХЪ") (0 until if (longDieSize) 5 else 4).forEach { ansi.a('тХР') } ansi.a('тХЭ') //Right border ansi.cursor(offsetY + 1, offsetX + if (longDieSize) 6 else 5) ansi.a('тХС') } private fun drawDieSmall(offsetX: Int, offsetY: Int, pair: DiePair, rollResult: Int? = null) { ansi.color(dieColors[pair.die.type]) val longDieSize = pair.die.size &gt;= 10 drawDieFrameSmall(offsetX, offsetY, longDieSize) //Roll result or die size ansi.cursor(offsetY + 1, offsetX + 1) if (rollResult != null) { ansi.a(String.format(" %2d %s", rollResult, if (longDieSize) " " else "")) } else { ansi.a(' ').a(pair.die.toString()).a(' ') } //Draw modifier ansi.cursor(offsetY + 3, offsetX) val modString = if (pair.modifier == 0) "" else String.format("%+d", pair.modifier) val frameLength = 4 + if (longDieSize) 3 else 2 var spaces = (frameLength - modString.length) / 2 (0 until spaces).forEach { ansi.a(' ') } ansi.a(modString) spaces = frameLength - spaces - modString.length (0 until spaces).forEach { ansi.a(' ') } ansi.reset() } private fun drawDieFrameBig(offsetX: Int, offsetY: Int, longDieSize: Boolean) { //Top border ansi.cursor(offsetY, offsetX) ansi.a('тХФ') (0 until if (longDieSize) 3 else 2).forEach { ansi.a("тХРтХРтХРтХРтХРтХР") } ansi.a("тХРтХЧ") //Left border (1..5).forEach { ansi.cursor(offsetY + it, offsetX) ansi.a('тХС') } //Bottom border ansi.cursor(offsetY + 6, offsetX) ansi.a('тХЪ') (0 until if (longDieSize) 3 else 2).forEach { ansi.a("тХРтХРтХРтХРтХРтХР") } ansi.a("тХРтХЭ") //Right border val currentX = offsetX + if (longDieSize) 20 else 14 (1..5).forEach { ansi.cursor(offsetY + it, currentX) ansi.a('тХС') } } private fun drawDieSizeBig(offsetX: Int, offsetY: Int, pair: DiePair) { ansi.color(dieColors[pair.die.type]) val longDieSize = pair.die.size &gt;= 10 drawDieFrameBig(offsetX, offsetY, longDieSize) //Die size ansi.cursor(offsetY + 1, offsetX + 1) ansi.a(" тЦИтЦИтЦИтЦИ ") ansi.cursor(offsetY + 2, offsetX + 1) ansi.a(" тЦИ тЦИ ") ansi.cursor(offsetY + 3, offsetX + 1) ansi.a(" тЦИ тЦИ ") ansi.cursor(offsetY + 4, offsetX + 1) ansi.a(" тЦИ тЦИ ") ansi.cursor(offsetY + 5, offsetX + 1) ansi.a(" тЦИтЦИтЦИтЦИ ") drawBigNumber(offsetX + 8, offsetY + 1, pair.die.size) //Draw modifier ansi.cursor(offsetY + 7, offsetX) val modString = if (pair.modifier == 0) "" else String.format("%+d", pair.modifier) val frameLength = 4 + 6 * if (longDieSize) 3 else 2 var spaces = (frameLength - modString.length) / 2 (0 until spaces).forEach { ansi.a(' ') } ansi.a(modString) spaces = frameLength - spaces - modString.length - 1 (0 until spaces).forEach { ansi.a(' ') } ansi.reset() } private fun drawBattleCheck(offsetY: Int, battleCheck: DieBattleCheck) { val performCheck = loadString("perform_check") var currentX = 4 var currentY = offsetY //Top message ansi.cursor(offsetY, 1) ansi.a("тФВ ").a(performCheck) (performCheck.length + 4 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') //Left border (1..4).forEach { ansi.cursor(offsetY + it, 1) ansi.a("тФВ ") } //Opponent var opponentWidth = 0 var vsWidth = 0 (battleCheck.getOpponentPair())?.let { //Die if (battleCheck.isRolled) { drawDieSmall(4, offsetY + 1, it, battleCheck.getOpponentResult()) } else { drawDieSmall(4, offsetY + 1, it) } opponentWidth = 4 + if (it.die.size &gt;= 10) 3 else 2 currentX += opponentWidth //VS ansi.cursor(currentY + 1, currentX) ansi.a(" ") ansi.cursor(currentY + 2, currentX) ansi.color(LIGHT_YELLOW).a(" VS ").reset() ansi.cursor(currentY + 3, currentX) ansi.a(" ") ansi.cursor(currentY + 4, currentX) ansi.a(" ") vsWidth = 4 currentX += vsWidth } //Clear below for (row in currentY + 5..currentY + 8) { ansi.cursor(row, 1) ansi.a('тФВ') (2 until currentX).forEach { ansi.a(' ') } } //Dice for (index in 0 until battleCheck.heroPairCount) { if (index &gt; 0) { ansi.cursor(currentY + 1, currentX) ansi.a(" ") ansi.cursor(currentY + 2, currentX) ansi.a(if (battleCheck.method == DieBattleCheck.Method.SUM) " + " else " / ").reset() ansi.cursor(currentY + 3, currentX) ansi.a(" ") ansi.cursor(currentY + 4, currentX) ansi.a(" ") currentX += 3 } val pair = battleCheck.getHeroPairAt(index) val width = 4 + if (pair.die.size &gt;= 10) 3 else 2 if (currentX + width + 3 &gt; CONSOLE_WIDTH) { //Out of space for (row in currentY + 1..currentY + 4) { ansi.cursor(row, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') } currentY += 4 currentX = 4 + vsWidth + opponentWidth } if (battleCheck.isRolled) { drawDieSmall(currentX, currentY + 1, pair, battleCheck.getHeroResultAt(index)) } else { drawDieSmall(currentX, currentY + 1, pair) } currentX += width } //Clear the rest (currentY + 1..currentY + 4).forEach { row -&gt; ansi.cursor(row, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') } if (currentY == offsetY) { //Still on the first line currentX = 4 + vsWidth + opponentWidth (currentY + 5..currentY + 8).forEach { row -&gt; ansi.cursor(row, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') } } //Draw result (battleCheck.result)?.let { r -&gt; val frameTopY = offsetY + 5 val result = String.format("%+d", r) val message = loadString(if (r &gt;= 0) "success" else "fail").toUpperCase() val color = if (r &gt;= 0) DARK_GREEN else DARK_RED //Frame ansi.color(color) drawHorizontalLine(frameTopY, 'тЦТ') drawHorizontalLine(frameTopY + 3, 'тЦТ') ansi.cursor(frameTopY + 1, 1).a("тЦТтЦТ") ansi.cursor(frameTopY + 1, CONSOLE_WIDTH - 1).a("тЦТтЦТ") ansi.cursor(frameTopY + 2, 1).a("тЦТтЦТ") ansi.cursor(frameTopY + 2, CONSOLE_WIDTH - 1).a("тЦТтЦТ") ansi.reset() //Top message val resultString = loadString("result") var center = (CONSOLE_WIDTH - result.length - resultString.length - 2) / 2 ansi.cursor(frameTopY + 1, 3) (3 until center).forEach { ansi.a(' ') } ansi.a(resultString).a(": ") ansi.color(color).a(result).reset() (center + result.length + resultString.length + 2 until CONSOLE_WIDTH - 1).forEach { ansi.a(' ') } //Bottom message center = (CONSOLE_WIDTH - message.length) / 2 ansi.cursor(frameTopY + 2, 3) (3 until center).forEach { ansi.a(' ') } ansi.color(color).a(message).reset() (center + message.length until CONSOLE_WIDTH - 1).forEach { ansi.a(' ') } } } private fun drawExplorationResult(offsetY: Int, pair: DiePair) { val encountered = loadString("encountered") ansi.cursor(offsetY, 1) ansi.a("тФВ ").a(encountered).a(':') (encountered.length + 5 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') val dieFrameWidth = 3 + 6 * if (pair.die.size &gt;= 10) 3 else 2 for (row in 1..8) { ansi.cursor(offsetY + row, 1) ansi.a("тФВ ") ansi.cursor(offsetY + row, dieFrameWidth + 4) (dieFrameWidth + 4 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') } drawDieSizeBig(4, offsetY + 1, pair) } private fun drawHand(offsetY: Int, hand: Hand, checkedDice: HandMask, activePositions: HandMask) { val handString = loadString("hand").toUpperCase() val alliesString = loadString("allies").toUpperCase() val capacity = hand.capacity val size = hand.dieCount val slots = max(size, capacity) val alliesSize = hand.allyDieCount var currentY = offsetY var currentX = 1 //Hand title ansi.cursor(currentY, currentX) ansi.a("тФВ ").a(handString) //Left border currentY += 1 currentX = 1 ansi.cursor(currentY, currentX) ansi.a("тФВ тХФ") ansi.cursor(currentY + 1, currentX) ansi.a("тФВ тХС") ansi.cursor(currentY + 2, currentX) ansi.a("тФВ тХЪ") ansi.cursor(currentY + 3, currentX) ansi.a("тФВ ") currentX += 3 //Main hand for (i in 0 until min(slots, MAX_HAND_SIZE)) { val die = hand.dieAt(i) val longDieName = die != null &amp;&amp; die.size &gt;= 10 //Top border ansi.cursor(currentY, currentX) if (i &lt; capacity) { ansi.a("тХРтХРтХРтХР").a(if (longDieName) "тХР" else "") } else { ansi.a("тФАтФАтФАтФА").a(if (longDieName) "тФА" else "") } ansi.a(if (i &lt; capacity - 1) 'тХд' else if (i == capacity - 1) 'тХЧ' else if (i &lt; size - 1) 'тФм' else 'тФР') //Center row ansi.cursor(currentY + 1, currentX) ansi.a(' ') if (die != null) { drawDieSize(die, checkedDice.checkPosition(i)) } else { ansi.a(" ") } ansi.a(' ') ansi.a(if (i &lt; capacity - 1) 'тФВ' else if (i == capacity - 1) 'тХС' else 'тФВ') //Bottom border ansi.cursor(currentY + 2, currentX) if (i &lt; capacity) { ansi.a("тХРтХРтХРтХР").a(if (longDieName) 'тХР' else "") } else { ansi.a("тФАтФАтФАтФА").a(if (longDieName) 'тФА' else "") } ansi.a(if (i &lt; capacity - 1) 'тХз' else if (i == capacity - 1) 'тХЭ' else if (i &lt; size - 1) 'тФ┤' else 'тФШ') //Die number ansi.cursor(currentY + 3, currentX) if (activePositions.checkPosition(i)) { ansi.color(LIGHT_YELLOW) } ansi.a(String.format(" (%s) %s", shortcut(i), if (longDieName) " " else "")) ansi.reset() currentX += 5 + if (longDieName) 1 else 0 } //Ally subhand if (alliesSize &gt; 0) { currentY = offsetY //Ally title ansi.cursor(currentY, handString.length + 5) (handString.length + 5 until currentX).forEach { ansi.a(' ') } ansi.a(" ").a(alliesString) (currentX + alliesString.length + 5 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') //Left border currentY += 1 ansi.cursor(currentY, currentX) ansi.a(" тФМ") ansi.cursor(currentY + 1, currentX) ansi.a(" тФВ") ansi.cursor(currentY + 2, currentX) ansi.a(" тФФ") ansi.cursor(currentY + 3, currentX) ansi.a(" ") currentX += 4 //Ally slots for (i in 0 until min(alliesSize, MAX_HAND_ALLY_SIZE)) { val allyDie = hand.allyDieAt(i)!! val longDieName = allyDie.size &gt;= 10 //Top border ansi.cursor(currentY, currentX) ansi.a("тФАтФАтФАтФА").a(if (longDieName) "тФА" else "") ansi.a(if (i &lt; alliesSize - 1) 'тФм' else 'тФР') //Center row ansi.cursor(currentY + 1, currentX) ansi.a(' ') drawDieSize(allyDie, checkedDice.checkAllyPosition(i)) ansi.a(" тФВ") //Bottom border ansi.cursor(currentY + 2, currentX) ansi.a("тФАтФАтФАтФА").a(if (longDieName) "тФА" else "") ansi.a(if (i &lt; alliesSize - 1) 'тФ┤' else 'тФШ') //Die number ansi.cursor(currentY + 3, currentX) if (activePositions.checkAllyPosition(i)) { ansi.color(LIGHT_YELLOW) } ansi.a(String.format(" (%s) %s", shortcut(i + 10), if (longDieName) " " else "")).reset() currentX += 5 + if (longDieName) 1 else 0 } } else { ansi.cursor(offsetY, 9) (9 until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') ansi.cursor(offsetY + 4, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') } //Clear the end of the line (0..3).forEach { row -&gt; ansi.cursor(currentY + row, currentX) (currentX until CONSOLE_WIDTH).forEach { ansi.a(' ') } ansi.a('тФВ') } } override fun drawHeroTurnStart(hero: Hero) { val centerY = (CONSOLE_HEIGHT - 5) / 2 (1 until centerY).forEach { drawBlankLine(it, false) } ansi.color(heroColors[hero.type]) drawHorizontalLine(centerY, 'тФА') drawHorizontalLine(centerY + 4, 'тФА') ansi.reset() ansi.cursor(centerY + 1, 1).eraseLine() ansi.cursor(centerY + 3, 1).eraseLine() ansi.cursor(centerY + 2, 1) val text = String.format(loadString("heros_turn"), hero.name.toUpperCase()) val index = text.indexOf(hero.name.toUpperCase()) val center = (CONSOLE_WIDTH - text.length) / 2 ansi.cursor(centerY + 2, center) ansi.eraseLine(Ansi.Erase.BACKWARD) ansi.a(text.substring(0, index)) ansi.color(heroColors[hero.type]).a(hero.name.toUpperCase()).reset() ansi.a(text.substring(index + hero.name.length)) ansi.eraseLine(Ansi.Erase.FORWARD) (centerY + 5..CONSOLE_HEIGHT).forEach { drawBlankLine(it, false) } render() } override fun drawLocationInteriorScreen( location: Location, heroesAtLocation: List&lt;Hero&gt;, timer: Int, currentHero: Hero, battleCheck: DieBattleCheck?, encounteredDie: DiePair?, pickedDice: HandMask, activePositions: HandMask, statusMessage: StatusMessage, actions: ActionList) { //Top panel drawLocationTopPanel(location, heroesAtLocation, currentHero, timer) //Encounter info when { battleCheck != null -&gt; drawBattleCheck(4, battleCheck) encounteredDie != null -&gt; drawExplorationResult(4, encounteredDie) else -&gt; (4..12).forEach { drawBlankLine(it) } } //Fill blank space val bottomHalfTop = CONSOLE_HEIGHT - 11 (13 until bottomHalfTop).forEach { drawBlankLine(it) } //Hero-specific info drawLocationHeroPanel(bottomHalfTop, currentHero) drawHand(bottomHalfTop + 3, currentHero.hand, pickedDice, activePositions) //Separator ansi.cursor(bottomHalfTop + 8, 1) ansi.a('тФЬ') (2 until CONSOLE_WIDTH).forEach { ansi.a('тФА') } ansi.a('тФд') //Status and actions drawStatusMessage(bottomHalfTop + 9, statusMessage) drawActionList(bottomHalfTop + 10, actions) //Bottom border ansi.cursor(CONSOLE_HEIGHT, 1) ansi.a('тФФ') (2 until CONSOLE_WIDTH).forEach { ansi.a('тФА') } ansi.a('тФШ') //Finalize render() } override fun drawGameLoss(message: StatusMessage) { val centerY = CONSOLE_HEIGHT / 2 (1 until centerY).forEach { drawBlankLine(it, false) } val data = loadString(message.toString().toLowerCase()).toUpperCase() drawCenteredCaption(centerY, data, LIGHT_RED, false) (centerY + 1..CONSOLE_HEIGHT).forEach { drawBlankLine(it, false) } render() } }</span></span></code> </pre></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рд╕рднреА рдХреЛрдб рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреА рдЬрд╛рдВрдЪ рд╕реЗ рдЬреБрдбрд╝реА рдПрдХ рдЫреЛрдЯреА рд╕рдорд╕реНрдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЪреВрдВрдХрд┐ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдЖрдИрдбреАрдИ рдХрдВрд╕реЛрд▓ рдПрдПрдирдПрд╕рдЖрдИ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рдХреНрд░рдо рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рдмрд╛рд╣рд░реА рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдЖрд╡реЗрджрди рд╢реБрд░реВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ (рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рдЗрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд▓рд┐рдЦреА рдереА)ред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдПрдирдПрд╕рдЖрдИ рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде, рд╡рд┐рдВрдбреЛрдЬ рдореЗрдВ рд╕рдм рдХреБрдЫ рдареАрдХ рдирд╣реАрдВ рд╣реИ - рдЬрд╣рд╛рдВ рддрдХ тАЛтАЛрдореБрдЭреЗ рдкрддрд╛ рд╣реИ, рдХреЗрд╡рд▓ 10 рд╡реЗрдВ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рдорд╛рдирдХ cmd.exe рд╣рдореЗрдВ рдЙрдЪреНрдЪ-рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд╛рд▓реЗ рдкреНрд░рджрд░реНрд╢рди (рдФрд░ рдХреБрдЫ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рд╕рд╛рде, рдЬреЛ рд╣рдо рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ) рдХреЗ рд╕рд╛рде рдЦреБрд╢ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдФрд░ PowerShell рдиреЗ рддреБрд░рдВрдд рджреГрд╢реНрдпреЛрдВ рдХреЛ рдкрд╣рдЪрд╛рдирдирд╛ рдирд╣реАрдВ рд╕реАрдЦрд╛ (рд╡рд░реНрддрдорд╛рди рдорд╛рдВрдЧ рдХреЗ рдмрд╛рд╡рдЬреВрдж)ред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдЕрд╢реБрдн рд╣реИрдВ, рддреЛ рдирд┐рд░рд╛рд╢ рдордд рд╣реЛ - рд╣рдореЗрд╢рд╛ рд╡реИрдХрд▓реНрдкрд┐рдХ рд╕рдорд╛рдзрд╛рди рд╣реЛрддреЗ рд╣реИрдВ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )ред </font><font style="vertical-align: inherit;">рдФрд░ рд╣рдо рдЖрдЧреЗ рдмрдврд╝рддреЗ рд╣реИрдВред</font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рджрд╕ </font><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдХреНрд░реАрди рдкрд░ рдЫрд╡рд┐ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛ рдЕрднреА рднреА рдЖрдзреА рд▓рдбрд╝рд╛рдИ рд╣реИред рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдирд┐рдпрдВрддреНрд░рдг рдЖрджреЗрд╢реЛрдВ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рднреА рдЙрддрдирд╛ рд╣реА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред рдФрд░ рдпрд╣ рдХрд╛рд░реНрдп, рдореИрдВ рдЖрдкрдХреЛ рдмрддрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ, рдкрд┐рдЫрд▓реЗ рд╕рднреА рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рддрдХрдиреАрдХреА рд░реВрдк рд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЕрдзрд┐рдХ рдХрдард┐рди рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рдмрд╛рддреЗрдВ рдкрд╣рд▓реЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВ, рд╣рдореЗрдВ рд╡рд░реНрдЧ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рддрд╛ рд╣реИ </font></font><code>GameInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдЙрдирдореЗрдВ рд╕реЗ рдХреЗрд╡рд▓ рддреАрди рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рд╡рд┐рд╢реЗрд╖ рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рдиред рдЦреЗрд▓ рдЗрдВрдЬрди рдХреЛ рддрдм рддрдХ рдирд┐рд▓рдВрдмрд┐рдд рд░рдЦрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрдм рддрдХ рдЦрд┐рд▓рд╛рдбрд╝реА рдПрдХ рдХреБрдВрдЬреА рджрдмрд╛рддрд╛ рд╣реИред рджреВрд╕рд░реЗ, рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдорд╛рдирдХ рдХрдХреНрд╖рд╛рдУрдВ рдХреА рдХреНрд╖рдорддрд╛ </font></font><code>Reader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Scanner</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Console</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд╣реАрдВ рдкрд░реНрдпрд╛рдкреНрдд рдЗрди рд╕рдмрд╕реЗ рдЕрд╣рдо рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИ: рд╣рдо рдкреНрд░реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдкреНрд░рддреНрдпреЗрдХ рдЖрджреЗрд╢ рдХреЗ рдмрд╛рдж ENTERред рд╣рдореЗрдВ рдХреБрдЫ рдРрд╕рд╛ рдЪрд╛рд╣рд┐рдП</font></font><code>KeyListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди, рд▓реЗрдХрд┐рди рдпрд╣ рдХрд╕рдХрд░ рд╕реНрд╡рд┐рдВрдЧрд┐рдВрдЧ рдврд╛рдВрдЪреЗ рд╕реЗ рдмрдВрдзрд╛ рд╣реБрдЖ рд╣реИ, рдФрд░ рд╣рдорд╛рд░рд╛ рдХрдВрд╕реЛрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЗрд╕ рд╕рднреА рдЧреНрд░рд╛рдлрд┐рдХ рдЯрд┐рдирд╕реЗрд▓ рдХреЗ рдмрд┐рдирд╛ рд╣реИред</font></font><br><br>  рдХреНрдпрд╛ рдХрд░реЗрдВ?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХреА рдЦреЛрдЬ рдХрд░рдирд╛, рдЬрд╝рд╛рд╣рд┐рд░ рд╣реИ, рдФрд░ рдЗрд╕ рдмрд╛рд░ рдЙрдирдХрд╛ рдХрд╛рдо рдкреВрд░реА рддрд░рд╣ рд╕реЗ рджреЗрд╢реА рдХреЛрдб рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░реЗрдЧрд╛ред рдЗрд╕рдХрд╛ рдХреНрдпрд╛ рдорддрд▓рдм рд╣реИ "рдЕрд▓рд╡рд┐рджрд╛, рдХреНрд░реЙрд╕-рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо" ... рдпрд╛ рдирд╣реАрдВ? рдХрд╛рд╢, рдореИрдВ рдЕрднреА рддрдХ рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╣реИ рдХрд┐ рдПрдХ рд╣рд▓реНрдХреЗ, рдордВрдЪ-рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рдореЗрдВ рд╕рд░рд▓ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред рдЗрд╕ рдмреАрдЪ, рдЖрдЗрдП рд░рд╛рдХреНрд╖рд╕ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЗрд▓рд╛рдЗрди рдкрд░</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдзреНрдпрд╛рди </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">рджреЗрдВ</font></a><font style="vertical-align: inherit;"> , рдЬреЛ рдЙрдиреНрдирдд рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлреЗрд╕ (рдХрдВрд╕реЛрд▓ рдореЗрдВ) рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд╣рд╛рд░рд╡реЗрд╕реНрдЯрд░ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИред рд╣рд╛рдВ, рдЗрд╕рдХрд╛ рдореВрд▓ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╣реИ, рд╣рд╛рдВ, рдпрд╣ рд╡рд┐рдВрдбреЛрдЬ рдФрд░ рд▓рд┐рдирдХреНрд╕ / рдпреВрдирд┐рдХреНрд╕ (рдЙрдкрдпреБрдХреНрдд рдкреБрд╕реНрддрдХрд╛рд▓рдп рдкреНрд░рджрд╛рди рдХрд░рдХреЗ) рджреЛрдиреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред рдФрд░ рд╣рд╛рдБ, рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдкрдиреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рдЕрдзрд┐рдХрд╛рдВрд╢, рд╣рдо рдПрдХ рд╕реМ рд╕рд╛рд▓ рдХреА рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реИред рд╕рднреА рдХреА рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ рдПрдХ рдЫреЛрдЯрд╛, рдЦрд░рд╛рдм рджрд╕реНрддрд╛рд╡реЗрдЬ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдХрд╛рдо рдХрд╛ рд╣рдо рдЕрдм рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВрдЧреЗред</font></font><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>jline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.14.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╣рдореЗрдВ рддреАрд╕рд░реЗ, рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рджреВрд╕рд░рд╛, рдЬрд╣рд╛рдВ </font></font><code>ConsoleReader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рдзрд┐ рдХреЗ рд╕рд╛рде рдПрдХ </font><font style="vertical-align: inherit;">рд╡рд░реНрдЧ рд╣реИ </font></font><code>readCharacter()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдЬреИрд╕рд╛ рдХрд┐ рдирд╛рдо рдХрд╛ рдЕрд░реНрде рд╣реИ, рдпрд╣ рд╡рд┐рдзрд┐ рдХреАрдмреЛрд░реНрдб рдкрд░ рджрдмрд╛рдП рдЧрдП рд╡рд░реНрдг рдХрд╛ рдХреЛрдб рд▓реМрдЯрд╛рддрд╛ рд╣реИ (рдЬрдмрдХрд┐ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝ рдХрд░рддреЗ рд╣реБрдП, рдЬреЛ рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдП)ред рдмрд╛рдХреА рдПрдХ рддрдХрдиреАрдХреА рдорд╛рдорд▓рд╛ рд╣реИ: рдкреНрд░рддреАрдХреЛрдВ рдФрд░ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рдкреНрд░рдХрд╛рд░ ( </font></font><code>Action.Type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) рдХреЗ </font><font style="vertical-align: inherit;">рдмреАрдЪ рдкрддреНрд░рд╛рдЪрд╛рд░ рдХреА рдПрдХ рддрд╛рд▓рд┐рдХрд╛ рд╕рдВрдХрд▓рд┐рдд рдХрд░реЗрдВ </font><font style="vertical-align: inherit;">рдФрд░, рдПрдХ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░рдХреЗ, рджреВрд╕рд░реЗ рдХреЛ рд▓реМрдЯрд╛рдПрдВред </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдХреНрдпрд╛ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдХреАрдмреЛрд░реНрдб рдХреА рд╕рднреА рдХреБрдВрдЬрд┐рдпреЛрдВ рдХреЛ рдПрдХ рд╡рд░реНрдг рдХреЗ рд╕рд╛рде рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ? рдХрдИ рдЪрд╛рдмрд┐рдпрд╛рдБ рджреЛ, рддреАрди, рдЪрд╛рд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкрд╛рддреНрд░реЛрдВ рдХреЗ рднрд╛рдЧрдиреЗ рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИрдВред рдЙрдирдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рд░рд╣реЗрдВ? тАЭ</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдЗрдирдкреБрдЯ рдХрд╛рд░реНрдп рдЬрдЯрд┐рд▓ рд╣реИ рдпрджрд┐ рд╣рдо "рдЧреИрд░-рдЪрд░рд┐рддреНрд░ рдХреБрдВрдЬрд┐рдпреЛрдВ" рдХреЛ рдкрд╣рдЪрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ: рддреАрд░, рдПрдл-рдХреА, рд╣реЛрдо, рдЗрдВрд╕рд░реНрдЯ, PgUp / Dn, рдПрдВрдб, рдбрд┐рд▓реАрдЯ, рд╕рдВрдЦреНрдпрд╛-рдкреИрдб рдФрд░ рдЕрдиреНрдпред </font><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рд╣рдо рдирд╣реАрдВ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЬрд╛рд░реА рд░рдЦреЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдЖрдЗрдП </font></font><code>ConsoleInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрд╡рд╢реНрдпрдХ рд╕реЗрд╡рд╛ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд░реНрдЧ рдмрдирд╛рдПрдВ </font><font style="vertical-align: inherit;">ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleInteractor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> reader = ConsoleReader() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mapper = mapOf( CONFIRM to <span class="hljs-number"><span class="hljs-number">13</span></span>.toChar(), CANCEL to <span class="hljs-number"><span class="hljs-number">27</span></span>.toChar(), EXPLORE_LOCATION to <span class="hljs-string"><span class="hljs-string">'e'</span></span>, FINISH_TURN to <span class="hljs-string"><span class="hljs-string">'f'</span></span>, ACQUIRE to <span class="hljs-string"><span class="hljs-string">'a'</span></span>, LEAVE to <span class="hljs-string"><span class="hljs-string">'l'</span></span>, FORFEIT to <span class="hljs-string"><span class="hljs-string">'f'</span></span>, HIDE to <span class="hljs-string"><span class="hljs-string">'h'</span></span>, DISCARD to <span class="hljs-string"><span class="hljs-string">'d'</span></span>, ) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = reader.readCharacter().toChar() <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getIndexForKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Char</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-string"><span class="hljs-string">"1234567890abcdefghijklmnopqrstuvw"</span></span>.indexOf(key) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирдХреНрд╢рд╛ </font></font><code>mapper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рд╡рд┐рдзрд┐ </font><font style="vertical-align: inherit;">рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ </font></font><code>read()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдЙрди </font></font><code>getIndexForKey()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА </font><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рдзрд┐ рдкреНрд░рджрд╛рди рдХрд░реЗрдВрдЧреЗ, </font><font style="vertical-align: inherit;">рдЬрд╣рд╛рдБ рд╣рдореЗрдВ рдХрд┐рд╕реА рд╕реВрдЪреА рдпрд╛ рдХреНрдпреВрдмреНрд╕ рд╕реЗ рдХрд┐рд╕реА рд╡рд╕реНрддреБ рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рдЗрд╕ рд╡рд░реНрдЧ рд╕реЗ рд╣рдорд╛рд░реЗ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╣реИ </font></font><code>GameInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрдЧ рдЖрд░реЗрдЦ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/hv/oh/h_/hvohh_s5evuqa4kwwwhtvvfbsmw.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдХреЛрдб: </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConsoleGameInteractor</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ConsoleInteractor</span></span></span></span>(), GameInteractor { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { read() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> key = read() list .filter(Action::isEnabled) .find { mapper[it.type] == key } ?.let { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it } } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickDiceFromHand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(activePositions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> : Action { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> key = read() actions.forEach { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mapper[it.type] == key &amp;&amp; it.isEnabled) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it } <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (key) { <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">'1'</span></span>..<span class="hljs-string"><span class="hljs-string">'9'</span></span> -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> index = key - <span class="hljs-string"><span class="hljs-string">'1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (activePositions.checkPosition(index)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Action(HAND_POSITION, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = index) } } <span class="hljs-string"><span class="hljs-string">'0'</span></span> -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (activePositions.checkPosition(<span class="hljs-number"><span class="hljs-number">9</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Action(HAND_POSITION, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = <span class="hljs-number"><span class="hljs-number">9</span></span>) } } <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">'a'</span></span>..<span class="hljs-string"><span class="hljs-string">'f'</span></span> -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> allyIndex = key - <span class="hljs-string"><span class="hljs-string">'a'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (activePositions.checkAllyPosition(allyIndex)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Action(HAND_ALLY_POSITION, <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> = allyIndex) } } } } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рддрд░реАрдХреЛрдВ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛рдлреА рд╡рд┐рдирдореНрд░ рдФрд░ рд╕реБрд╡реНрдпрд╡рд╕реНрдерд┐рдд рд╣реИ рддрд╛рдХрд┐ рд╡рд┐рднрд┐рдиреНрди рдЕрдкрд░реНрдпрд╛рдкреНрдд рдмрдХрд╡рд╛рд╕реЛрдВ рдХреЛ рдмрд╛рд╣рд░ рди рд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред </font><font style="vertical-align: inherit;">рд╡реЗ рд╕реНрд╡рдпрдВ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЪрдпрдирд┐рдд рдХреНрд░рд┐рдпрд╛ рд╕рдХреНрд░рд┐рдп рд╣реИ, рдФрд░ рдЪрдпрдирд┐рдд рд╣рд╛рде рдХреА рд╕реНрдерд┐рддрд┐ рд╡реИрдз рдХреЗ рд╕реЗрдЯ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдореИрдВ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рд╣рдо рд╕рднреА рдЕрдкрдиреЗ рдЖрд╕рдкрд╛рд╕ рдХреЗ рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рдирдореНрд░ рд░рд╣реЗрдВред</font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреНрдпрд╛рд░рд╣ рдХрджрдоред </font><font style="vertical-align: inherit;">рд▓рдЧрддрд╛ рд╣реИ рдФрд░ рд╕рдВрдЧреАрдд</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓реЗрдХрд┐рди рдпрд╣ рдЙрдирдХреЗ рдмрд┐рдирд╛ рдХреИрд╕реЗ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ? рдпрджрд┐ рдЖрдкрдиреЗ рдХрднреА рдзреНрд╡рдирд┐ рдХреЛ рдмрдВрдж рдХрд░рдиреЗ рдХреЗ рд╕рд╛рде рдЧреЗрдо рдЦреЗрд▓рд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрд╡рд░ рдХреЗ рдиреАрдЪреЗ рдПрдХ рдЯреИрдмрд▓реЗрдЯ рдХреЗ рд╕рд╛рде рдЬрдмрдХрд┐ рдШрд░ рдкрд░ рдХреЛрдИ рдирд╣реАрдВ рджреЗрдЦрддрд╛ рд╣реИ), рддреЛ рдЖрдк рдорд╣рд╕реВрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЖрдк рдХрд┐рддрдирд╛ рдЦреЛ рд░рд╣реЗ рд╣реИрдВред рдпрд╣ рдХреЗрд╡рд▓ рдЖрдзрд╛ рдЦреЗрд▓ рдЦреЗрд▓рдиреЗ рдЬреИрд╕рд╛ рд╣реИред рдзреНрд╡рдирд┐ рд╕рдВрдЧрддрддрд╛ рдХреЗ рдмрд┐рдирд╛ рдХрдИ рдЦреЗрд▓реЛрдВ рдХреА рдХрд▓реНрдкрдирд╛ рдирд╣реАрдВ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ, рдХрдИ рдХреЗ рд▓рд┐рдП рдпрд╣ рдПрдХ рдЕрдирд┐рд╡рд╛рд░реНрдп рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд░рд┐рд╡рд░реНрд╕ рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпрд╛рдВ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЬрдм рд╕рд┐рджреНрдзрд╛рдВрдд рдореЗрдВ рдХреЛрдИ рдЖрд╡рд╛рдЬрд╝ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдпрд╛ рд╡реЗ рдЗрддрдиреА рджрдпрдиреАрдп рд╣реИрдВ рдХрд┐ рдпрд╣ рдЙрдирдХреЗ рдмрд┐рдирд╛ рдмреЗрд╣рддрд░ рд╣реЛрдЧрд╛)ред рдПрдХ рдЕрдЪреНрдЫрд╛ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЙрддрдирд╛ рдЖрд╕рд╛рди рдирд╣реАрдВ рд╣реИ рдЬрд┐рддрдирд╛ рдкрд╣рд▓реА рдирдЬрд╝рд░ рдореЗрдВ рд▓рдЧрддрд╛ рд╣реИ (рдмрд┐рдирд╛ рдХрд┐рд╕реА рдХрд╛рд░рдг рдХреЗ рдЙрдЪреНрдЪ рдпреЛрдЧреНрдпрддрд╛ рд╡рд╛рд▓реЗ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдмрдбрд╝реЗ рд╕реНрдЯреВрдбрд┐рдпреЛ рдореЗрдВ рдРрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВ), рд▓реЗрдХрд┐рди рдпрд╣ рд╣реИ рдХрд┐ рдЬреИрд╕рд╛ рдХрд┐ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЬреНрдпрд╛рджрд╛рддрд░ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЖрдкрдХреЗ рдЦреЗрд▓ рдореЗрдВ рдСрдбрд┐рдпреЛ рдШрдЯрдХ (рдХрдо рд╕реЗ рдХрдо рдХреБрдЫ) рд╣реЛрдирд╛ рдмрд╣реБрдд рдмреЗрд╣рддрд░ рд╣реИред рдЙрд╕рдХреЗ рдкрд╛рд╕ рдирд╣реАрдВ рд╣реЛрдиреЗ рд╕реЗред рдЕрдВрддрд┐рдо рдЙрдкрд╛рдп рдХреЗ рд░реВрдк рдореЗрдВ, рдзреНрд╡рдирд┐ рдХреА рдЧреБрдгрд╡рддреНрддрд╛ рдореЗрдВ рдмрд╛рдж рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ,рдЬрдм рд╕рдордп рдФрд░ рдореВрдб рдХреА рдЕрдиреБрдорддрд┐ рд╣реИред</font></font><br><br>   ,         тАФ        ,     .    ,              .   ,        .      ,      .       ,    ,    тАФ     ,   тАФ       ,        .   ,      :  ,  ,       тАФ        ,       .    ,   тАФ            ,         тАФ     .    ?   ,     .          ,        ( , ,     ). <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд┐рджреНрдзрд╛рдВрдд рдХреЗ рд╕рд╛рде, рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ, рдЗрд╕реЗ рд╣рд▓ рдХрд░ рджрд┐рдпрд╛, рдЕрдм рдЕрднреНрдпрд╛рд╕ рдкрд░ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдХрд╛ рд╕рдордп рд╣реИред рдФрд░ рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рдПрдХ рд╕рд╡рд╛рд▓ рдкреВрдЫрдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ: рдЬрд╣рд╛рдВ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЧреЗрдо рдлрд╛рдЗрд▓реЗрдВ рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП? рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рддрд░реАрдХрд╛ рд╣реИ - рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдмрджрд╕реВрд░рдд рдЧреБрдгрд╡рддреНрддрд╛ рдореЗрдВ рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреБрд░рд╛рдиреЗ рдорд╛рдЗрдХреНрд░реЛрдлреЛрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдпрд╛ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдлреЛрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред рдЗрдВрдЯрд░рдиреЗрдЯ рд╡реАрдбрд┐рдпреЛ рд╕реЗ рднрд░рд╛ рд╣реИ рдХрд┐ рдЕрдирд╛рдирд╛рд╕ рдХреЗ рд╢реАрд░реНрд╖ рдХреЛ рдХреИрд╕реЗ рд╣рдЯрд╛рдПрдВ рдпрд╛ рдПрдХ рдмреВрдЯ рдХреЗ рд╕рд╛рде рдмрд░реНрдл рдХреЛ рддреЛрдбрд╝рдиреЗ рд╕реЗ рдХреБрдЪрд▓ рд╣рдбреНрдбрд┐рдпреЛрдВ рдФрд░ рдПрдХ рдЦрд╕реНрддрд╛ рд░реАрдврд╝ рдХреЗ рдкреНрд░рднрд╛рд╡ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдпрджрд┐ рдЖрдк рдЕрддрд┐рдпрдерд╛рд░реНрдерд╡рд╛рдж рдХреЗ рд╕реМрдВрджрд░реНрдпрд╢рд╛рд╕реНрддреНрд░ рдХреЗ рд▓рд┐рдП рд╡рд┐рджреЗрд╢реА рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рдЖрдк рдЕрдкрдиреА рдЖрд╡рд╛рдЬрд╝ рдпрд╛ рд░рд╕реЛрдИ рдХреЗ рдмрд░реНрддрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдХ рд╕рдВрдЧреАрдд рд╡рд╛рджреНрдпрдпрдВрддреНрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рд╣реИрдВ - рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рдлрд▓ рд╡рд╛рд▓реЗ - рдЬрд╣рд╛рдВ рдпрд╣ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛)ред рдпрд╛ рдЖрдк </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;">freesound.org рдкрд░</font></a><font style="vertical-align: inherit;"> рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╣рд╛рдБ рд╕реМ рдЕрдиреНрдп рд▓реЛрдЧреЛрдВ рдиреЗ рдЖрдкрдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕рдордп рдкрд╣рд▓реЗ рдРрд╕рд╛ рдХрд┐рдпрд╛ рдерд╛ред </font><font style="vertical-align: inherit;">рдХреЗрд╡рд▓ рд▓рд╛рдЗрд╕реЗрдВрд╕ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ: рдХрдИ рд▓реЗрдЦрдХ рдЕрдкрдиреА рдЬрд╝реЛрд░ рдХреА рдЦрд╛рдБрд╕реА рдпрд╛ рдлрд░реНрд╢ рдкрд░ рдлреЗрдВрдХреЗ рдЧрдП рд╕рд┐рдХреНрдХреЛрдВ рдХреА рдСрдбрд┐рдпреЛ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕рдВрд╡реЗрджрдирд╢реАрд▓ рд╣реЛрддреЗ рд╣реИрдВ - рдЖрдк рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рдореВрд▓ рдирд┐рд░реНрдорд╛рддрд╛ рдХреЛ рднреБрдЧрддрд╛рди рдХрд┐рдП рдмрд┐рдирд╛ рдпрд╛ рдЕрдкрдиреЗ рд░рдЪрдирд╛рддреНрдордХ рдЫрджреНрдо рдирд╛рдо (рдХрднреА-рдХрднреА рдмрд╣реБрдд рд╡рд┐рдЪрд┐рддреНрд░) рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдирд╣реАрдВ рдХрд░рдиреЗ рдХреЗ рдмрд┐рдирд╛ рдЕрдкрдиреЗ рдордЬрджреВрд░реЛрдВ рдХреЗ рдлрд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрдиреА рдкрд╕рдВрдж рдХреА рдлрд╛рдЗрд▓реЗрдВ рдЦреАрдВрдЪреЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдХреНрд▓рд╛рд╕рдкрд╛рде рдореЗрдВ рдХрд╣реАрдВ рд░рдЦ рджреЗрдВред </font><font style="vertical-align: inherit;">рдЙрдирдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдиреНрдпреВрдорд░реЗрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ, рдЬрд╣рд╛рдВ рдкреНрд░рддреНрдпреЗрдХ рдЙрджрд╛рд╣рд░рдг рдПрдХ рдзреНрд╡рдирд┐ рдкреНрд░рднрд╛рд╡ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sound</span></span></span><span class="hljs-class"> </span></span>{ TURN_START, <span class="hljs-comment"><span class="hljs-comment">//Hero starts the turn BATTLE_CHECK_ROLL, //Perform check, type BATTLE_CHECK_SUCCESS, //Check was successful BATTLE_CHECK_FAILURE, //Check failed DIE_DRAW, //Draw die from bag DIE_HIDE, //Remove die to bag DIE_DISCARD, //Remove die to pile DIE_REMOVE, //Remove die entirely DIE_PICK, //Check/uncheck the die TRAVEL, //Move hero to another location ENCOUNTER_STAT, //Hero encounters STAT die ENCOUNTER_DIVINE, //Hero encounters DIVINE die ENCOUNTER_ALLY, //Hero encounters ALLY die ENCOUNTER_WOUND, //Hero encounters WOUND die ENCOUNTER_OBSTACLE, //Hero encounters OBSTACLE die ENCOUNTER_ENEMY, //Hero encounters ENEMY die ENCOUNTER_VILLAIN, //Hero encounters VILLAIN die DEFEAT_OBSTACLE, //Hero defeats OBSTACLE die DEFEAT_ENEMY, //Hero defeats ENEMY die DEFEAT_VILLAIN, //Hero defeats VILLAIN die TAKE_DAMAGE, //Hero takes damage HERO_DEATH, //Hero death CLOSE_LOCATION, //Location closed GAME_VICTORY, //Scenario completed GAME_LOSS, //Scenario failed ERROR, //When something unexpected happens }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреВрдВрдХрд┐ рдзреНрд╡рдирд┐рдпреЛрдВ рдХреЛ рдкреБрди: рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреА рд╡рд┐рдзрд┐ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣реЛрдЧреА, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реЗ рдЕрд▓рдЧ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣ рдПрдХ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SoundPlayer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sound: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Sound</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рдЪрд░реНрдЪрд╛ рдХрд┐рдП рдЧрдП рдЗрдВрдЯрд░рдлреЗрд╕ рдХреА рддрд░рд╣ </font></font><code>GameRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>GameInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЗрд╕рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рднреА рдЗрдирдкреБрдЯ рдХреЗ рд▓рд┐рдП рдХрдХреНрд╖рд╛ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рд╢реБрд░реБрдЖрдд рдХреЗ рд▓рд┐рдП, рдПрдХ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЗрд╕ рддрд░рд╣ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MuteSoundPlayer</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SoundPlayer { override fun play</span></span></span></span>(sound: Sound) { <span class="hljs-comment"><span class="hljs-comment">//Do nothing } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╛рдж рдореЗрдВ, рд╣рдо рдФрд░ рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдЕрдм рд╣рдо рд╕рдВрдЧреАрдд рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рддреЗ рд╣реИрдВред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдзреНрд╡рдирд┐ рдкреНрд░рднрд╛рд╡реЛрдВ рдХреА рддрд░рд╣, рдпрд╣ рдЦреЗрд▓ рдХреЗ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЛ рдмрдирд╛рдиреЗ рдореЗрдВ рдмрд╣реБрдд рдмрдбрд╝реА рднреВрдорд┐рдХрд╛ рдирд┐рднрд╛рддрд╛ рд╣реИ, рдФрд░ рдЙрд╕реА рддрд░рд╣, рдПрдХ рдЙрддреНрдХреГрд╖реНрдЯ рдЦреЗрд▓ рдХреЛ рдЕрдиреБрдкрдпреБрдХреНрдд рд╕рдВрдЧреАрдд рдХреЗ рд╕рд╛рде рдмрд░реНрдмрд╛рдж рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдзреНрд╡рдирд┐рдпреЛрдВ рдХреА рддрд░рд╣, рд╕рдВрдЧреАрдд рд╡рд┐рдиреАрдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рд╕рд╛рдордиреЗ рдирд╣реАрдВ рдЖрдирд╛ (рд╕рд┐рд╡рд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рдЬрдм рдХреЛрдИ рдХрд▓рд╛рддреНрдордХ рдкреНрд░рднрд╛рд╡ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛ) рдФрд░ рдкрд░реНрдпрд╛рдкреНрдд рд░реВрдк рд╕реЗ рд╕реНрдХреНрд░реАрди рдкрд░ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рдЕрдиреБрд░реВрдк рд╣реЛ (рдЖрд╢рд╛ рди рдХрд░реЗрдВ рдХрд┐ рдХрд┐рд╕реА рдиреЗ рдЧрдВрднреАрд░рддрд╛ рд╕реЗ рдШрд╛рдд рд▓рдЧрд╛рдП рдФрд░ рдирд┐рд░реНрджрдпрддрд╛ рд╕реЗ рдорд╛рд░ рдбрд╛рд▓рд╛ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рдирд╛рдпрдХ, рдЕрдЧрд░ рдЙрд╕рдХреА рддреНрд░рд╛рд╕рдж рдореГрддреНрдпреБ рдХрд╛ рджреГрд╢реНрдп рдмрдЪреНрдЪреЛрдВ рдХреЗ рдЧреАрдд рдХреЗ рдордЬрд╝реЗрджрд╛рд░ рд╕рдВрдЧреАрдд рдХреЗ рд╕рд╛рде рд╣реЛрдЧрд╛)ред рдпрд╣ рд╣рд╛рд╕рд┐рд▓ рдХрд░рдирд╛ рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдкреНрд░рд╢рд┐рдХреНрд╖рд┐рдд рд▓реЛрдЧ рдРрд╕реЗ рдореБрджреНрджреЛрдВ рд╕реЗ рдирд┐рдкрдЯрддреЗ рд╣реИрдВ (рд╣рдо рдЙрдирдХреЗ рд╕рд╛рде рдЕрдкрд░рд┐рдЪрд┐рдд рд╣реИрдВ), рд▓реЗрдХрд┐рди рд╣рдо, рдЧреЗрдордмрд┐рд▓рд┐рдВрдЧ рдЬреАрдирд┐рдпрд╕ рдХреЗ рд╢реБрд░реБрдЖрддреА рдХреЗ рд░реВрдк рдореЗрдВ, рдХреБрдЫ рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрд╣реАрдВ рдкрд░ рдЬрд╛рдПрдВ</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">freemusicarchive.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╛ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soundcloud.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (рдпрд╛ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ YouTube) рдФрд░ рдЕрдкрдиреА рдкрд╕рдВрдж рдХреЗ рд╣рд┐рд╕рд╛рдм рд╕реЗ рдХреБрдЫ рдвреВрдВрдвреЗрдВред </font><font style="vertical-align: inherit;">рдбреЗрд╕реНрдХрдЯреЙрдк рдХреЗ рд▓рд┐рдП, рдкрд░рд┐рд╡реЗрд╢ рдПрдХ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдХрд▓реНрдк рд╣реИ - рдПрдХ рд╕реНрдкрд╖реНрдЯ рд░рд╛рдЧ рдХреЗ рдмрд┐рдирд╛ рд╢рд╛рдВрдд, рдЪрд┐рдХрдирд╛ рд╕рдВрдЧреАрдд, рдПрдХ рдкреГрд╖реНрдарднреВрдорд┐ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЕрдиреБрдХреВрд▓ рд╣реИред </font><font style="vertical-align: inherit;">рд▓рд╛рдЗрд╕реЗрдВрд╕ рдкрд░ рдбрдмрд▓ рдзреНрдпрд╛рди рджреЗрдВ: рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдирд┐: рд╢реБрд▓реНрдХ рд╕рдВрдЧреАрдд рдХрднреА-рдХрднреА рдкреНрд░рддрд┐рднрд╛рд╢рд╛рд▓реА рд╕рдВрдЧреАрддрдХрд╛рд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рд▓рд╛рдпрдХ рд╣реИрдВ, рдпрджрд┐ рдореМрджреНрд░рд┐рдХ рдЗрдирд╛рдо рдирд╣реАрдВ рд╣реИ, рддреЛ рдХрдо рд╕реЗ рдХрдо рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рдорд╛рдиреНрдпрддрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЗрдП рдПрдХ рдФрд░ рдЧрдгрдирд╛ рдмрдирд╛рдПрдВ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Music</span></span></span><span class="hljs-class"> </span></span>{ SCENARIO_MUSIC_1, SCENARIO_MUSIC_2, SCENARIO_MUSIC_3, }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЗрд╕реА рддрд░рд╣, рд╣рдо рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдФрд░ рдЗрд╕рдХреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВред </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MusicPlayer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(music: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Music</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MuteMusicPlayer</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MusicPlayer { override fun play</span></span></span></span>(music: Music) { <span class="hljs-comment"><span class="hljs-comment">//Do nothing } override fun stop() { //Do nothing } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рджреЛ рддрд░реАрдХреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: рдПрдХ рдкреНрд▓реЗрдмреИрдХ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рджреВрд╕рд░рд╛ рдЗрд╕реЗ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдПред </font><font style="vertical-align: inherit;">рдпрд╣ рднреА рдмрд╣реБрдд рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЕрддрд┐рд░рд┐рдХреНрдд рддрд░реАрдХреЗ (рд░реЛрдХреЗрдВ / рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ, рд░рд┐рд╡рд╛рдЗрдВрдб, рдЖрджрд┐) рдХрд╛рдо рдореЗрдВ рдЖрдПрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдЕрднреА рддрдХ рдпреЗ рджреЛрдиреЛрдВ рдкрд░реНрдпрд╛рдкреНрдд рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рд░ рдмрд╛рд░ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рдмреАрдЪ рдЦрд┐рд▓рд╛рдбрд╝реА рд╡рд░реНрдЧреЛрдВ рдХреЗ рд╕рдВрджрд░реНрднреЛрдВ рдХреЛ рдкрд╛рд╕ рдХрд░рдирд╛ рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╕рдорд╛рдзрд╛рди рдХреА рддрд░рд╣ рдкреНрд░рддреАрдд рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдПрдХ рд╕рдордп рдореЗрдВ, рд╣рдо рдХреЗрд╡рд▓ рдПрдХ ekzepmlyar рдЦрд┐рд▓рд╛рдбрд╝реА рдХреА рдЬрд░реВрд░рдд рд╣реИ рдЗрд╕рд▓рд┐рдП рдореИрдВ рд╕рднреА рдПрдХ рдЕрд▓рдЧ рд╡рд╕реНрддреБ рдореЗрдВ рд▓рдЧрддрд╛ рд╣реИ рдФрд░ рд╕рдВрдЧреАрдд рддрд░реАрдХреЛрдВ рдЦреЗрд▓рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реБрдЭрд╛рд╡ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрджреНрдпрдо рд╣реЛрдЧрд╛ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдЕрдХреЗрд▓реЗ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (рд╕рд┐рдВрдЧрд▓рдЯрди)ред </font><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЬрд┐рдореНрдореЗрджрд╛рд░ рдСрдбрд┐рдпреЛ рд╕рдмрд╕рд┐рд╕реНрдЯрдо рд╣рдореЗрд╢рд╛ рдПрдХ рд╣реА рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдВрдХ рдХреЛ рд▓рдЧрд╛рддрд╛рд░ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд┐рдП рдмрд┐рдирд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдХрд╣реАрдВ рд╕реЗ рднреА рд╣рдореЗрд╢рд╛ рдЙрдкрд▓рдмреНрдз рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦреЗрдЧрд╛:</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдСрдбрд┐рдпреЛ рдкреНрд▓реЗрдмреИрдХ рд╕рд┐рд╕реНрдЯрдо рдХреНрд▓рд╛рд╕ рдЖрд░реЗрдЦ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/ie/jf/86/iejf862lemxbjw9vm5ozkq7ow4k.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд▓рд╛рд╕ </font></font><code>Audio</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдорд╛рд░рд╛ рд╕рд┐рдВрдЧрд▓рдЯрди рд╣реИред </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рдмрд╕рд┐рд╕реНрдЯрдо рдХреЛ рдПрдХ рдирдпрд╛ рдореБрдЦреМрдЯрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ ... рд╡реИрд╕реЗ, рдпрд╣рд╛рдБ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЦреМрдЯрд╛</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (рдореБрдЦреМрдЯрд╛) рд╣реИ - рдПрдХ рдФрд░ рдбрд┐рдЬрд╛рдЗрди рдкреИрдЯрд░реНрди, рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд┐рдпрд╛ рдФрд░ рдЗрди рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдмрд╛рд░-рдмрд╛рд░ рд╡рд░реНрдгрд┐рдд (рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рд╕рд╛рде)ред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкреАрдЫреЗ рдХреА рдкрдВрдХреНрддрд┐рдпреЛрдВ рд╕реЗ рдЕрд╕рдВрддреБрд╖реНрдЯ рдЪреАрдЦреЗрдВ рд╕реБрдирддреЗ рд╣реБрдП, рдореИрдВ рд▓рдВрдмреЗ рд╕рдордп рд╕реЗ рдЬреНрдЮрд╛рдд рдЪреАрдЬреЛрдВ рдХреЛ рд╕рдордЭрд╛рдирд╛ рдмрдВрдж рдХрд░ рджреЗрддрд╛ рд╣реВрдВ рдФрд░ рдЖрдЧреЗ рдмрдврд╝рддрд╛ рд╣реВрдВред </font><font style="vertical-align: inherit;">рдХреЛрдб рд╣реИ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">object</span></span> Audio { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> soundPlayer: SoundPlayer = MuteSoundPlayer() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> musicPlayer: MusicPlayer = MuteMusicPlayer() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(soundPlayer: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SoundPlayer</span></span></span></span><span class="hljs-function"><span class="hljs-params">, musicPlayer: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MusicPlayer</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.soundPlayer = soundPlayer <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.musicPlayer = musicPlayer } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playSound</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sound: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Sound</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.soundPlayer.play(sound) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">playMusic</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(music: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Music</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.musicPlayer.play(music) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stopMusic</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.musicPlayer.stop() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ </font></font><code>init()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗрд╡рд▓ рдПрдХ рдмрд╛рд░ рдХреЗрд╡рд▓ рд╢реБрд░реБрдЖрдд рдореЗрдВ рдХрд╣реАрдВ рдкрд░ </font><font style="vertical-align: inherit;">рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ </font><font style="vertical-align: inherit;">(рдЖрд╡рд╢реНрдпрдХ рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд╕рд╛рде рдЗрд╕реЗ рд╢реБрд░реВ рдХрд░рдХреЗ) рдФрд░ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╡рд┐рд╡рд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреВрд▓ рдЬрд╛рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЧрд░ рдЖрдк рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЪрд┐рдВрддрд╛ рди рдХрд░реЗрдВ, рд╕рд┐рд╕реНрдЯрдо рдорд░ рдЬрд╛рдПрдЧрд╛ - рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХрдХреНрд╖рд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдЖрд░рдВрдн рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред</font></font><br><br>  рд╡рд╣ рд╕рдм рд╣реИред<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкреНрд▓реЗрдмреИрдХ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдмрдиреА рд╣реБрдИ рд╣реИред рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдЦреЗрд▓рдиреЗ рдХреЗ рд▓рд┐рдП (рдпрд╛, рдЬреИрд╕рд╛ рдХрд┐ рд╕реНрдорд╛рд░реНрдЯ рд▓реЛрдЧ рдХрд╣рддреЗ рд╣реИрдВ, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирдореВрдиреЗ рд╣реИрдВ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), рдЬрд╛рд╡рд╛ рдореЗрдВ рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╡рд░реНрдЧ </font></font><code>AudioSystem</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╣реИ </font></font><code>Clip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рд╣рдореЗрдВ рдХреЗрд╡рд▓ рдСрдбрд┐рдпреЛ рдлрд╝рд╛рдЗрд▓ (рдЬреЛ рд╣рдорд╛рд░реЗ рдХреНрд▓рд╛рд╕рдкреИрде рдореЗрдВ рд╣реИ, рдпрд╛рдж рд╣реИ?) рдХреЛ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ?</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.sound.sampled.AudioSystem <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BasicSoundPlayer</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SoundPlayer { private fun pathToFile</span></span></span></span>(sound: Sound) = <span class="hljs-string"><span class="hljs-string">"/sound/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${sound.toString().toLowerCase()}</span></span></span><span class="hljs-string">.wav"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sound: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Sound</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> url = javaClass.getResource(pathToFile(sound)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> audioIn = AudioSystem.getAudioInputStream(url) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> clip = AudioSystem.getClip() clip.<span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(audioIn) clip.start() } }</code> </pre><br>  <code>open()</code>   <code>IOException</code> (   -     тАФ        -  ),        <code>try-catch</code> ,         ,          . <br><br> <i>┬л   ,  ...┬╗</i> <br><br>      .   ,      (,   mp3)  Java ,          (  ).       ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">JLayer</a> .    : <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.googlecode.soundlibs<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jlayer<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.1.4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>       . <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BasicMusicPlayer</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MusicPlayer { private var currentMusic: Music? = null private var thread: PlayerThread? = null private fun pathToFile</span></span></span></span>(music: Music) = <span class="hljs-string"><span class="hljs-string">"/music/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${music.toString().toLowerCase()}</span></span></span><span class="hljs-string">.mp3"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(music: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Music</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentMusic == music) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } currentMusic = music thread?.finish() Thread.yield() thread = PlayerThread(pathToFile(music)) thread?.start() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { currentMusic = <span class="hljs-literal"><span class="hljs-literal">null</span></span> thread?.finish() } <span class="hljs-comment"><span class="hljs-comment">// Thread responsible for playback private inner class PlayerThread(private val musicPath: String) : Thread() { private lateinit var player: Player private var isLoaded = false private var isFinished = false init { isDaemon = true } override fun run() { loop@ while (!isFinished) { try { player = Player(javaClass.getResource(musicPath).openConnection().apply { useCaches = false }.getInputStream()) isLoaded = true player.play() } catch (ex: Exception) { finish() break@loop } player.close() } } fun finish() { isFinished = true this.interrupt() if (isLoaded) { player.close() } } } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдпрд╣ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкреНрд▓реЗрдмреИрдХ рдХреЛ рд╕рд┐рдВрдХреНрд░реЛрдирд╛рдЗрдЬрд╝ рдХрд░рддреА рд╣реИ, рдлрд╛рдЗрд▓ рдХреЗ рдЕрдВрдд рддрдХ рдореБрдЦреНрдп рд╕реНрдЯреНрд░реАрдо рдХреЛ рдмреНрд▓реЙрдХ рдХрд░рддреА рд╣реИред рдЗрд╕рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рдереНрд░реЗрдб ( </font></font><code>PlayerThread</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП </font><font style="vertical-align: inherit;">, рдФрд░ рдЗрд╕реЗ "рд╡реИрдХрд▓реНрдкрд┐рдХ" (рдбреЗрдореЙрди) рдмрдирд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рддрд╛рдХрд┐ рдХрд┐рд╕реА рднреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдпрд╣ рдЬрд▓реНрджреА рд╕рдорд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡реЗрджрди рдореЗрдВ рд╣рд╕реНрддрдХреНрд╖реЗрдк рди рдХрд░реЗред рджреВрд╕рд░реЗ, рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдкреНрд▓реЗрдЗрдВрдЧ рдореНрдпреВрдЬрд┐рдХ рдлрд╝рд╛рдЗрд▓ ( </font></font><code>currentMusic</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХреА рдкрд╣рдЪрд╛рди рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛрдб рдореЗрдВ рд╣реЛрддреА рд╣реИ </font><font style="vertical-align: inherit;">ред рдпрджрд┐ рдХреЛрдИ рджреВрд╕рд░рд╛ рдХрдорд╛рдВрдб рдЕрдЪрд╛рдирдХ рдЗрд╕реЗ рдЦреЗрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрддрд╛ рд╣реИ, рддреЛ рд╣рдо рд╢реБрд░реБрдЖрдд рд╕реЗ рд╣реА рдкреНрд▓реЗрдмреИрдХ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗред рддреАрд╕рд░рд╛, рд╕рдВрдЧреАрдд рдлрд╝рд╛рдЗрд▓ рдХреЗ рдЕрдВрдд рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдкрд░, рдЗрд╕рдХрд╛ рдкреНрд▓реЗрдмреИрдХ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рд╣реЛрдЧрд╛ - рдФрд░ рддрдм рддрдХ рдЬрдм рддрдХ рдХрд┐ рдХрдорд╛рдВрдб рджреНрд╡рд╛рд░рд╛ рд╕реНрдЯреНрд░реАрдо рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдмрдВрдж рди рд╣реЛ рдЬрд╛рдП</font></font><code>finish()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдпрд╛ рдЬрдм рддрдХ рдЕрдиреНрдп рдзрд╛рдЧреЗ рдкреВрд░реЗ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддреЗ, рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдЪреМрдерд╛, рдпрджреНрдпрдкрд┐ рдЙрдкрд░реЛрдХреНрдд рдХреЛрдб рдЕрдирд╛рд╡рд╢реНрдпрдХ рд░реВрдк рд╕реЗ рдЭрдВрдбреЗ рдФрд░ рдЖрджреЗрд╢реЛрдВ рд╕реЗ рднрд░рд╛ рд╣реБрдЖ рд╣реИ, рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдбрд┐рдмрдЧ рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ - рдЦрд┐рд▓рд╛рдбрд╝реА рдЕрдкреЗрдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдзреАрдорд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЕрдЪрд╛рдирдХ рдЖрдзреЗ рд░рд╛рд╕реНрддреЗ рдореЗрдВ рдмрд╛рдзрд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдореЗрдореЛрд░реА рд▓реАрдХ рдХреА рдУрд░ рдирд╣реАрдВ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдЖрдиреБрд╡рдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рд╕рдВрд╢реЛрдзрд┐рдд рдСрдмреНрдЬреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдЪрдордХрддрд╛ рд╣реИ рддрд╛рдЬрдЧреА рдФрд░ рдкрд╡рд┐рддреНрд░рддрд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕реЗ рд▓реЗрдВ рдФрд░ рдЕрдкрдиреА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рд╕рд╛рд╣рд╕рдкреВрд░реНрд╡рдХ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред</font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рдмрд╛рд░рд╣ред </font><font style="vertical-align: inherit;">рд╕реНрдерд╛рдиреАрдпрдХрд░рдг</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдорд╛рд░рд╛ рдЦреЗрд▓ рд▓рдЧрднрдЧ рддреИрдпрд╛рд░ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЛрдИ рднреА рдЗрд╕реЗ рдирд╣реАрдВ рдЦреЗрд▓реЗрдЧрд╛ред </font></font> рдХреНрдпреЛрдВ? <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдХреЛрдИ рд░реВрд╕реА рдирд╣реАрдВ рд╣реИ! .. рдХреЛрдИ рд░реВрд╕реА рдирд╣реАрдВ рд╣реИ! .. рд░реВрд╕реА рднрд╛рд╖рд╛ рдЬреЛрдбрд╝реЗрдВ! .. рдХреБрддреНрддреЛрдВ рджреНрд╡рд╛рд░рд╛ рд╡рд┐рдХрд╕рд┐рдд!" </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдЯреЛрд░ рдХреА рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкрд░ рдХрд┐рд╕реА рднреА рджрд┐рд▓рдЪрд╕реНрдк рдХрд╣рд╛рдиреА рдЧреЗрдо (рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдореЛрдмрд╛рдЗрд▓) рдХрд╛ рдкреГрд╖реНрда рдЦреЛрд▓реЗрдВ рдФрд░ рд╕рдореАрдХреНрд╖рд╛ рдкрдврд╝реЗрдВред </font><font style="vertical-align: inherit;">рдХреНрдпрд╛ рд╡реЗ рдЕрджреНрднреБрдд, рд╣рд╛рде рд╕реЗ рддреИрдпрд╛рд░ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдХреА рдкреНрд░рд╢рдВрд╕рд╛ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдВрдЧреЗ? </font><font style="vertical-align: inherit;">рдпрд╛ рд╡рд╛рдпреБрдордВрдбрд▓реАрдп рдзреНрд╡рдирд┐ рдкрд░ рдЕрдЪрдВрднрд╛? </font><font style="vertical-align: inherit;">рдпрд╛ рдПрдХ рд░реЛрдорд╛рдВрдЪрдХ рдХрд╣рд╛рдиреА рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░реЗрдВ рдЬреЛ рдкрд╣рд▓реЗ рдорд┐рдирдЯ рд╕реЗ рдирд╢реЗ рдХреА рд▓рдд рд╣реИ рдФрд░ рдмрд╣реБрдд рдЕрдВрдд рддрдХ рдЬрд╛рдиреЗ рдирд╣реАрдВ рджреЗрддреА рд╣реИ?</font></font><br><br>  рдирд╣реАрдВред<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрд╕рдВрддреБрд╖реНрдЯ "рдЦрд┐рд▓рд╛рдбрд╝реА" рдЗрдХрд╛рдЗрдпреЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЛ рдирд┐рд░реНрджреЗрд╢ рджреЗрдЧрд╛ рдФрд░ рдЖрдо рддреМрд░ рдкрд░ рдЦреЗрд▓ рдХреЛ рд╣рдЯрд╛ рджреЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рдФрд░ рдлрд┐рд░ рдЙрдиреНрд╣реЗрдВ рдкреИрд╕реЗ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА - рдФрд░ рдпрд╣ рд╕рдм рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдХрд╛рд░рдг рдХреЗ рд▓рд┐рдПред </font><font style="vertical-align: inherit;">рд╣рд╛рдВ, рдЖрдк рдЕрдкрдиреА рдЙрддреНрдХреГрд╖реНрдЯ рдХреГрддрд┐ рдХреЛ рд╕рднреА 95 рд╡рд┐рд╢реНрд╡ рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд░рдирд╛ рднреВрд▓ рдЧрдПред </font><font style="vertical-align: inherit;">рдпрд╛ рдпреЛрдВ рдХрд╣реЗрдВ, рдЬрд┐рдирдХреЗ рд╡рд╛рд╣рдХ рдЬреЛрд░ рд╕реЗ рдЪрд┐рд▓реНрд▓рд╛рддреЗ рд╣реИрдВред</font></font> рдФрд░ рдпрд╣ рдмрд╛рдд рд╣реИ!  рдХреНрдпрд╛ рдЖрдк рд╕рдордЭрддреЗ рд╣реИрдВ?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╣реАрдиреЛрдВ рдХреА рдореЗрд╣рдирдд, рд▓рдВрдмреА рдиреАрдВрдж рдХреА рд░рд╛рддреЗрдВ, рд▓рдЧрд╛рддрд╛рд░ рдирд░реНрд╡рд╕ рдмреНрд░реЗрдХрдбрд╛рдЙрди - рдпрд╣ рд╕рдм рдкреВрдВрдЫ рдХреЗ рдиреАрдЪреЗ рдПрдХ рд╣рдореНрд╕рдЯрд░ рд╣реИред рдЖрдкрдиреЗ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдЦрд┐рд▓рд╛рдбрд╝рд┐рдпреЛрдВ рдХреЛ рдЦреЛ рджрд┐рдпрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдареАрдХ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рддреЛ рдЖрдЧреЗ рд╕реЛрдЪрд┐рдпреЗред рдЕрдкрдиреЗ рд▓рдХреНрд╖рд┐рдд рджрд░реНрд╢рдХреЛрдВ рдкрд░ рдирд┐рд░реНрдгрдп рд▓реЗрдВ, рдХрдИ рдкреНрд░рдореБрдЦ рднрд╛рд╖рд╛рдУрдВ рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ, рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛рдУрдВ рдХрд╛ рдЖрджреЗрд╢ рджреЗрдВ ... рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЙрди рд╕рднреА рдЪреАрдЬреЛрдВ рдХреЛ рдХрд░реЗрдВ рдЬреЛ рдЕрдиреНрдп рд▓реЛрдЧреЛрдВ рдиреЗ рд╡рд┐рд╖рдпрдЧрдд рд▓реЗрдЦреЛрдВ рдореЗрдВ рдПрдХ рдмрд╛рд░ рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд░ рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рд╣реИ (рдореБрдЭрд╕реЗ рдЕрдзрд┐рдХ рд╣реЛрд╢рд┐рдпрд╛рд░)ред рд╣рдо рдЗрд╕ рдореБрджреНрджреЗ рдХреЗ рддрдХрдиреАрдХреА рдкрдХреНрд╖ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реЗрдВрдЧреЗ рдФрд░ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░реЗрдВрдЧреЗ рдХрд┐ рд╣рдорд╛рд░реЗ рдЙрддреНрдкрд╛рдж рдХреЛ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдХреИрд╕реЗ рджрд░реНрдж рд░рд╣рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рд╣рдо рдЯреЗрдореНрдкреНрд▓реЗрдЯ рдореЗрдВ рдЖрддреЗ рд╣реИрдВред рдпрд╛рдж рд░рдЦреЗрдВ, рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдирд╛рдо рдФрд░ рд╡рд┐рд╡рд░рдг рд╕рд░рд▓ рд░реВрдк рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдереЗ </font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? рдЕрдм рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред рдбрд┐рдлрд╝реЙрд▓реНрдЯ рднрд╛рд╖рд╛ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЖрдкрдХреЛ рдЙрди рд╕рднреА рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рднреА рдЕрдиреБрд╡рд╛рдж рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬрд┐рдирдХреА рдЖрдк рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛ рд░рд╣реЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЗрд╕ рддрд░рд╣:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestEnemyTemplate</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">EnemyTemplate { override val name = "Test enemy" override val description = "Some enemy standing in your way." override val nameLocalizations = mapOf</span></span></span></span>( <span class="hljs-string"><span class="hljs-string">"ru"</span></span> to <span class="hljs-string"><span class="hljs-string">" -"</span></span>, <span class="hljs-string"><span class="hljs-string">"ar"</span></span> to <span class="hljs-string"><span class="hljs-string">"╪и╪╣╪╢ ╪з┘Д╪╣╪п┘И"</span></span>, <span class="hljs-string"><span class="hljs-string">"iw"</span></span> to <span class="hljs-string"><span class="hljs-string">"╫Р╫Щ╫Ц╫Ф ╫Р╫Х╫Щ╫С"</span></span>, <span class="hljs-string"><span class="hljs-string">"zh"</span></span> to <span class="hljs-string"><span class="hljs-string">"ф╕Аф║ЫцХ╡ф║║"</span></span>, <span class="hljs-string"><span class="hljs-string">"ua"</span></span> to <span class="hljs-string"><span class="hljs-string">"╤Ц "</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> descriptionLocalizations = mapOf( <span class="hljs-string"><span class="hljs-string">"ru"</span></span> to <span class="hljs-string"><span class="hljs-string">" - ."</span></span>, <span class="hljs-string"><span class="hljs-string">"ar"</span></span> to <span class="hljs-string"><span class="hljs-string">"┘И╪╡┘Б ╪з┘Д╪╣╪п┘И"</span></span>, <span class="hljs-string"><span class="hljs-string">"iw"</span></span> to <span class="hljs-string"><span class="hljs-string">"╫к╫Щ╫Р╫Х╫и ╫Ф╫Р╫Х╫Щ╫С"</span></span>, <span class="hljs-string"><span class="hljs-string">"zh"</span></span> to <span class="hljs-string"><span class="hljs-string">"ф╕Аф║ЫцХ╡ф║║чЪДцППш┐░"</span></span>, <span class="hljs-string"><span class="hljs-string">"ua"</span></span> to <span class="hljs-string"><span class="hljs-string">" ╤Ч ╤Ц   ."</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> traits = listOf&lt;Trait&gt;() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдХреЗ рд▓рд┐рдП, рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛рдлреА рдЙрдкрдпреБрдХреНрдд рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рднреА рднрд╛рд╖рд╛ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд╡рд╛рдж рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ - рд╣рдореЗрд╢рд╛ рдПрдХ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдВрддрд┐рдо рд╡рд╕реНрддреБрдУрдВ рдореЗрдВ, рдореИрдВ рдХрдИ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдирд╣реАрдВ рдлреИрд▓рд╛рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рд╣рдо рдПрдХ рдХреЛ рдЫреЛрдбрд╝ рджреЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рдЗрд╕рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рдмрджрд▓ рджреЗрдВрдЧреЗред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocalizedString</span></span></span></span>(defaultValue: String, localizations: Map&lt;String, String&gt;) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: String = defaultValue <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> values: Map&lt;String, String&gt; = localizations.toMap() <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(lang: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = values.getOrDefault(lang, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(other: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Any</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> = <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> === other -&gt; <span class="hljs-literal"><span class="hljs-literal">true</span></span> other !<span class="hljs-keyword"><span class="hljs-keyword">is</span></span> LocalizedString -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> == other.<span class="hljs-keyword"><span class="hljs-keyword">default</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.hashCode() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ рдЙрд╕рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЬрдирд░реЗрдЯрд░ рдХреЛрдб рдХреЛ рд╕рд╣реА рдХрд░реЗрдВред </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generateEnemy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(template: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">EnemyTemplate</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Enemy().apply { name = LocalizedString(template.name, template.nameLocalizations) description = LocalizedString(template.description, template.descriptionLocalizations) template.traits.forEach { addTrait(it) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ, рдПрдХ рд╣реА рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЛ рд╢реЗрд╖ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рдЬрдм рдкрд░рд┐рд╡рд░реНрддрди рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрдард┐рдирд╛рдИ рдХреЗ рдмрд┐рдирд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> language = Locale.getDefault().language <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enemyName = enemy.name[language]</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╣рдордиреЗ рд╕реНрдерд╛рдиреАрдпрдХрд░рдг рдХрд╛ рдПрдХ рд╕рд░рд▓реАрдХреГрдд рд╕рдВрд╕реНрдХрд░рдг рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рд╣реИ, рдЬрд╣рд╛рдВ рдХреЗрд╡рд▓ рднрд╛рд╖рд╛ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдХреНрд▓рд╛рд╕ рдСрдмреНрдЬреЗрдХреНрдЯ </font></font><code>Locale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреЗрд╢ рдФрд░ рдХреНрд╖реЗрддреНрд░ рдХреЛ рднреА рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВред рдпрджрд┐ рдЖрдкрдХреЗ рдЖрд╡реЗрджрди рдореЗрдВ рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рддреЛ рдЖрдкрдХрд╛ рд╕реНрд╡рднрд╛рд╡ </font></font><code>LocalizedString</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдереЛрдбрд╝рд╛ рдЕрд▓рдЧ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛, рд▓реЗрдХрд┐рди рд╣рдо рд╡реИрд╕реЗ рднреА рдЦреБрд╢ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдЯреЗрдореНрдкреНрд▓реЗрдЯ рд╕реЗ рдирд┐рдкрдЯрддреЗ рд╣реИрдВ, рдпрд╣ рд╣рдорд╛рд░реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕реЗрд╡рд╛ рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рд╕реНрдерд╛рдиреАрдп рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд░рд╣рддрд╛ рд╣реИред рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдЗрд╕рдореЗрдВ </font></font><code>ResourceBundle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рддрдВрддреНрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рдХреЗрд╡рд▓ рдЕрдиреБрд╡рд╛рдж рдХреЗ рд╕рд╛рде рдлрд╛рдЗрд▓реЗрдВ рддреИрдпрд╛рд░ рдХрд░рдирд╛ рдФрд░ рдЙрдирдХреЗ рдбрд╛рдЙрдирд▓реЛрдб рд╣реЛрдиреЗ рдХреЗ рддрд░реАрдХреЗ рдХреЛ рдмрджрд▓рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред</font></font><br><br><pre> <code class="plaintext hljs"># Game status messages choose_dice_perform_check=    : end_of_turn_discard_extra= :   : end_of_turn_discard_optional= :    : choose_action_before_exploration=,  : choose_action_after_exploration= .   ? encounter_physical=  .   . encounter_somatic=  .   . encounter_mental=  .   . encounter_verbal=  .   . encounter_divine=  .    : die_acquire_success=   ! die_acquire_failure=    . game_loss_out_of_time=    # Die types physical= somatic= mental= verbal= divine= ally= wound= enemy= villain= obstacle= # Hero types and descriptions brawler= hunter= # Various labels avg= bag= bag_size=  class= closed= discard= empty= encountered=  fail= hand= heros_turn= %s max= min= perform_check= : pile= received_new_die=   result= success= sum= time= total= # Action names and descriptions action_confirm_key=ENTER action_confirm_name= action_cancel_key=ESC action_cancel_name= action_explore_location_key=E action_explore_location_name= action_finish_turn_key=F action_finish_turn_name=  action_hide_key=H action_bag_name= action_discard_key=D action_discard_name= action_acquire_key=A action_acquire_name= action_leave_key=L action_leave_name= action_forfeit_key=F action_forfeit_name=</code> </pre><br>    :       ,   .             (     ),       ,  -,  ,  -,     ,     .   ,       тАФ -         ,      (, ,         ,       тАФ     ). <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertiesStringLoader</span></span></span></span>(locale: Locale) : StringLoader { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> properties = ResourceBundle.getBundle(<span class="hljs-string"><span class="hljs-string">"text.strings"</span></span>, locale) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = properties.getString(key) ?: <span class="hljs-string"><span class="hljs-string">""</span></span> }</code> </pre>  ред <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рд╣реА рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, </font></font><code>ResourceBundle</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╣ рдЦреБрдж рд╕реНрдерд╛рдиреАрдпрдХрд░рдг рдлрд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдЦреЛрдЬрдиреЗ рдХреА рдЬрд┐рдореНрдореЗрджрд╛рд░реА рд▓реЗрдЧрд╛ рдЬреЛ рд╡рд░реНрддрдорд╛рди рд▓реЛрдХреЗрд▓ рд╕реЗ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдирд┐рдХрдЯрддрд╛ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдЕрдЧрд░ рд╡рд╣ рдирд╣реАрдВ рдорд┐рд▓рд╛, рддреЛ рд╡рд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдлрд╝рд╛рдЗрд▓ ( </font></font><code>string.properties</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рд▓реЗрдЧрд╛ </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдФрд░ рд╕рдм рдареАрдХ рд╣реЛ рдЬрд╛рдПрдЧрд╛ ...</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрд╣рд╛! </font><font style="vertical-align: inherit;">рд╡рд╣рд╛рдБ рдпрд╣ рдерд╛!</font></font></b> <div class="spoiler_text"> ,  Unicode   <code>.properties</code>     Java 9.       ISO-8859-1 тАФ <code>ResourceBundle</code>     .  ,     ,           тАФ     .       Unicode- тАФ ,  ,   : <code>'\uXXXX'</code> .    ,      ,   Java       <b>native2ascii</b> ,        .         : <br><br><pre> <code class="plaintext hljs"># Game status messages choose_dice_perform_check=\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0443\u0431\u0438\u043a\u0438 \u0434\u043b\u044f \u043f\u0440\u043e\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438: end_of_turn_discard_extra=\u041a\u041e\u041d\u0415\u0426 \u0425\u041e\u0414\u0410: \u0421\u0431\u0440\u043e\u0441\u044c\u0442\u0435 \u043b\u0438\u0448\u043d\u0438\u0435 \u043a\u0443\u0431\u0438\u043a\u0438: end_of_turn_discard_optional=\u041a\u041e\u041d\u0415\u0426 \u0425\u041e\u0414\u0410: \u0421\u0431\u0440\u043e\u0441\u044c\u0442\u0435 \u043a\u0443\u0431\u0438\u043a\u0438 \u043f\u043e \u0436\u0435\u043b\u0430\u043d\u0438\u044e: choose_action_before_exploration=\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c: choose_action_after_exploration=\u0418\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e. \u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0434\u0430\u043b\u044c\u0448\u0435? encounter_physical=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u0424\u0418\u0417\u0418\u0427\u0415\u0421\u041a\u0418\u0419 \u043a\u0443\u0431\u0438\u043a. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443. encounter_somatic=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u0421\u041e\u041c\u0410\u0422\u0418\u0427\u0415\u0421\u041a\u0418\u0419 \u043a\u0443\u0431\u0438\u043a. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443. encounter_mental=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u041c\u0415\u041d\u0422\u0410\u041b\u042c\u041d\u042b\u0419 \u043a\u0443\u0431\u0438\u043a. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443. encounter_verbal=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u0412\u0415\u0420\u0411\u0410\u041b\u042c\u041d\u042b\u0419 \u043a\u0443\u0431\u0438\u043a. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443. encounter_divine=\u0412\u0441\u0442\u0440\u0435\u0447\u0435\u043d \u0411\u041e\u0416\u0415\u0421\u0422\u0412\u0415\u041d\u041d\u042b\u0419 \u043a\u0443\u0431\u0438\u043a. \u041c\u043e\u0436\u043d\u043e \u0432\u0437\u044f\u0442\u044c \u0431\u0435\u0437 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438: die_acquire_success=\u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u043d\u043e\u0432\u044b\u0439 \u043a\u0443\u0431\u0438\u043a! die_acquire_failure=\u0412\u0430\u043c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043a\u0443\u0431\u0438\u043a. game_loss_out_of_time=\u0423 \u0432\u0430\u0441 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u043e\u0441\u044c \u0432\u0440\u0435\u043c\u044f</code> </pre><br>           .     тАФ  .    тАФ  .  ,  IDE    ( )  ┬л ┬╗,       тАФ            -  (  ),    IDE,    . <br><br>  ,  .  <code>getBundle()</code> ,    ,   ,      <code>ResourceBundle.Control</code> тАФ -         . <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PropertiesStringLoader</span></span></span></span>(locale: Locale) : StringLoader { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> properties = ResourceBundle.getBundle( <span class="hljs-string"><span class="hljs-string">"text.strings"</span></span>, locale, Utf8ResourceBundleControl()) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = properties.getString(key) ?: <span class="hljs-string"><span class="hljs-string">""</span></span> }</code> </pre><br> , ,  : <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Utf8ResourceBundleControl</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ResourceBundle.Control</span></span></span></span>() { <span class="hljs-meta"><span class="hljs-meta">@Throws(IllegalAccessException::class, InstantiationException::class, IOException::class)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newBundle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(baseName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, locale: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Locale</span></span></span></span><span class="hljs-function"><span class="hljs-params">, format: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, loader: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ClassLoader</span></span></span></span><span class="hljs-function"><span class="hljs-params">, reload: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: ResourceBundle? { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> bundleName = toBundleName(baseName, locale) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (format) { <span class="hljs-string"><span class="hljs-string">"java.class"</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.newBundle(baseName, locale, format, loader, reload) <span class="hljs-string"><span class="hljs-string">"java.properties"</span></span> -&gt; with((<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"://"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bundleName) <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> toResourceName(bundleName, <span class="hljs-string"><span class="hljs-string">"properties"</span></span>)) ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> { reload -&gt; reload(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, loader) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; loader.getResourceAsStream(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) }?.let { stream -&gt; InputStreamReader(stream, <span class="hljs-string"><span class="hljs-string">"UTF-8"</span></span>).use { r -&gt; PropertyResourceBundle(r) } } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Unknown format: </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$format</span></span></span><span class="hljs-string">"</span></span>) } } <span class="hljs-meta"><span class="hljs-meta">@Throws(IOException::class)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reload</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(resourceName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, classLoader: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ClassLoader</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: InputStream { classLoader.getResource(resourceName)?.let { url -&gt; url.openConnection().let { connection -&gt; connection.useCaches = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> connection.getInputStream() } } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> IOException(<span class="hljs-string"><span class="hljs-string">"Unable to load data!"</span></span>) } }</code> </pre><br>    ,   тАж ,  ( ) тАФ   (  Kotlin    ).    тАФ ,       <code>.properties</code>   UTF-8  - . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡рд┐рднрд┐рдиреНрди рднрд╛рд╖рд╛рдУрдВ рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдмрджрд▓рдирд╛ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ - рдХреЗрд╡рд▓ JRE рд╢реБрд░реВ рдХрд░рддреЗ рд╕рдордп рдЖрд╡рд╢реНрдпрдХ рднрд╛рд╖рд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ: </font></font><br><br><pre> <code class="dos hljs">java -Duser.language=ru -jar path_to_project\Dice\target\dice-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-jar-with-dependencies.jar</code> </pre><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдЕрднреА рднреА рд╡рд┐рдВрдбреЛрдЬ рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреА рдЕрдкреЗрдХреНрд╖рд╛ рдХрд░реЗрдВ</font></font></b> <div class="spoiler_text">  ,   Windows (cmd.exe)     437 (   DOSLatinUS),     тАФ      .  , UTF-8 ,        : <br><br><pre> <code class="dos hljs"><span class="hljs-built_in"><span class="hljs-built_in">chcp</span></span> <span class="hljs-number"><span class="hljs-number">65001</span></span></code> </pre> <br>    Java  ,    ,       .     : <br><br><pre> <code class="dos hljs">java -Dfile.encoding=UTF-<span class="hljs-number"><span class="hljs-number">8</span></span> -Duser.language=ru -jar path_to_project\Dice\target\dice-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-jar-with-dependencies.jar</code> </pre><br>   ,      ,  Unicode- (, Lucida Console) <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рдорд╛рд░реЗ рд╕рднреА рд░реЛрдорд╛рдВрдЪрдХ рдХрд╛рд░рдирд╛рдореЛрдВ рдХреЗ рдмрд╛рдж, рдкрд░рд┐рдгрд╛рдо рдХреЛ рдЧрд░реНрд╡ рд╕реЗ рдЖрдо рдЬрдирддрд╛ рдХреЗ рд╕рд╛рдордиреЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЬреЛрд░ рд╕реЗ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: "рд╣рдо рдХреБрддреНрддреЗ рдирд╣реАрдВ рд╣реИрдВ!" </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдирд╕реНрд▓реАрдп рдЖрд╕реНрдерд╛ рд╡рд┐рдХрд▓реНрдк</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/ap/92/qd/ap92qdlfulptfgjg_-ms3ejqddm.png"></a> <br></div></div><br>  рдФрд░ рд╡рд╣ рдЕрдЪреНрдЫрд╛ рд╣реИред <br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рддреЗрд░рд╣ </font><font style="vertical-align: inherit;">рдпрд╣ рд╕рдм рдПрдХ рд╕рд╛рде рд░рдЦрдирд╛</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪреМрдХрд╕ рдкрд╛рдардХреЛрдВ рдиреЗ рджреЗрдЦрд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдореИрдВрдиреЗ рдХреЗрд╡рд▓ рдПрдХ рдмрд╛рд░ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреИрдХреЗрдЬреЛрдВ рдХреЗ рдирд╛рдореЛрдВ рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рд╣реИ рдФрд░ рдХрднреА рднреА рдЙрдирдХреЗ рдкрд╛рд╕ рдирд╣реАрдВ рд▓реМрдЯрд╛ред рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдкреНрд░рддреНрдпреЗрдХ рдбреЗрд╡рд▓рдкрд░ рдХреЗ рдЕрдкрдиреЗ рд╡рд┐рдЪрд╛рд░ рд╣реЛрддреЗ рд╣реИрдВ рдХрд┐ рдХрд┐рд╕ рдкреИрдХреЗрдЬ рдореЗрдВ рдХреМрди рд╕реА рдХрдХреНрд╖рд╛ рд╕реНрдерд┐рдд рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред рджреВрд╕рд░реЗ, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд░ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдЕрдзрд┐рдХ рд╕реЗ рдЕрдзрд┐рдХ рдирдИ рдХрдХреНрд╖рд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд╕рд╛рде, рдЖрдкрдХреЗ рд╡рд┐рдЪрд╛рд░ рдмрджрд▓ рдЬрд╛рдПрдВрдЧреЗред рддреАрд╕рд░рд╛, рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рд╕рдВрд░рдЪрдирд╛ рдХреЛ рдмрджрд▓рдирд╛ рд╕рд░рд▓ рдФрд░ рд╕рд╕реНрддрд╛ рд╣реИ (рдФрд░ рдЖрдзреБрдирд┐рдХ рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рдгрд╛рд▓реА рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдЧреА, рдЗрд╕рд▓рд┐рдП рдЖрдк рдЗрддрд┐рд╣рд╛рд╕ рдирд╣реАрдВ рдЦреЛ рд╕рдХрддреЗ рд╣реИрдВ), рдЗрд╕рд▓рд┐рдП рдХреНрд▓рд╛рд╕реЗрд╕, рдкреИрдХреЗрдЬ, рд╡рд┐рдзрд┐рдпреЛрдВ рдФрд░ рдЪрд░ рдХреЗ рдирд╛рдо рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рдорд╣рд╕реВрд╕ рдХрд░реЗрдВ - рдХреЗрд╡рд▓ рджрд╕реНрддрд╛рд╡реЗрдЬ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рди рднреВрд▓реЗрдВ (рдЖрдк рдЗрд╕реЗ рдмрдирд╛рдП рд░рдЦреЗрдВ) , рд╣реИ рдирд╛?)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЬреЛ рдХреБрдЫ рднреА рдмрдЪрд╛ рд╣реБрдЖ рд╣реИ, рд╡рд╣ рд╣реИ рд╣рдорд╛рд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рдПрдХ рд╕рд╛рде рд░рдЦрдирд╛ рдФрд░ рд▓реЙрдиреНрдЪ рдХрд░рдирд╛ред рдЬреИрд╕рд╛ рдХрд┐ рдЖрдкрдХреЛ рдпрд╛рдж рд╣реИ, </font></font><code>main()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рдПрдХ </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ рдмрдирд╛ рд▓реА рд╣реИ </font><font style="vertical-align: inherit;">, рдЕрдм рд╣рдо рдЗрд╕реЗ рд╕рд╛рдордЧреНрд░реА рд╕реЗ рднрд░ рджреЗрдВрдЧреЗред</font></font> рд╣рдореЗрдВ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА: <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдФрд░ рдЗрд▓рд╛рдХреЗ; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдирд╛рдпрдХреЛрдВ; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди </font></font><code>GameInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди </font></font><code>GameRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>StringLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди </font></font><code>SoundPlayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>MusicPlayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрдЧ рд╡рд╕реНрддреБ </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╢реИрдореНрдкреЗрди рдХреА рдПрдХ рдмреЛрддрд▓ред </font></font></li></ul><br>  рдЪрд▓реЛ рдЪрд▓рддреЗ рд╣реИрдВ! <br><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Array</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;</span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;)</span></span></span></span> { Audio.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(BasicSoundPlayer(), BasicMusicPlayer()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> loader = PropertiesStringLoader(Locale.getDefault()) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> renderer = ConsoleGameRenderer(loader) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> interactor = ConsoleGameInteractor() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> template = TestScenarioTemplate() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> scenario = generateScenario(template, <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> locations = generateLocations(template, <span class="hljs-number"><span class="hljs-number">1</span></span>, heroes.size) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> heroes = listOf( generateHero(Hero.Type.BRAWLER, <span class="hljs-string"><span class="hljs-string">"Brawler"</span></span>), generateHero(Hero.Type.HUNTER, <span class="hljs-string"><span class="hljs-string">"Hunter"</span></span>) ) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> game = Game(renderer, interactor, scenario, locations, heroes) game.start() }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдкрд╣рд▓реЗ рдХрд╛рд░реНрдпрд╢реАрд▓ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдХреЛ рд▓реЙрдиреНрдЪ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕рдХрд╛ рдЖрдирдВрдж рд▓реЗрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╡рд╣рд╛рдВ рддреБрдо рдЬрд╛рдУред</font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рдЪреМрджрд╣ред </font><font style="vertical-align: inherit;">рдЦреЗрд▓ рд╕рдВрддреБрд▓рди</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрдореНрдореНрдореНрдотАж </font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рдкрдВрджреНрд░рд╣ред </font><font style="vertical-align: inherit;">рдкрд░реАрдХреНрд╖рдг</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдм рдЬрдм рдкрд╣рд▓реЗ рдХрд╛рд░реНрдпрд╢реАрд▓ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдХреЗ рд▓рд┐рдП рдХреЛрдб рдХрд╛ рдереЛрдХ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рдПрдХ рдЬреЛрдбрд╝реЗ рдХреЛ рдЬреЛрдбрд╝рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ ... </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдХреИрд╕реЗ? </font><font style="vertical-align: inherit;">рдЕрднреА рдЕрднреА? </font><font style="vertical-align: inherit;">рд╣рд╛рдБ, рдкрд░реАрдХреНрд╖рдг рдмрд╣реБрдд рд╢реБрд░реБрдЖрдд рдореЗрдВ рд▓рд┐рдЦреЗ рдЬрд╛рдиреЗ рдереЗ, рдФрд░ рдлрд┐рд░ рдХреЛрдб! " </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдИ рдкрд╛рдардХреЛрдВ рдиреЗ рдареАрдХ рд╣реА рдиреЛрдЯрд┐рд╕ рдХрд┐рдпрд╛ рд╣реИ рдХрд┐ рдпреВрдирд┐рдЯ рдЯреЗрд╕реНрдЯ рд▓рд┐рдЦрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╡рд░реНрдХрд┐рдВрдЧ рдХреЛрдб ( </font><abbr title="Test-Driven Development"><font style="vertical-align: inherit;">рдЯреАрдбреАрдбреА)</font></abbr><font style="vertical-align: inherit;"> рдХрд╛ рд╡рд┐рдХрд╛рд╕ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП</font></font><abbr title="Test-Driven Development"><font style="vertical-align: inherit;"></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЕрдиреНрдп рдлреИрд╢рдиреЗрдмрд▓ рддрд░реАрдХреЗ)ред рджреВрд╕рд░реЛрдВ рдХреЛ рдирд╛рд░рд╛рдЬ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛: рд▓реЛрдЧреЛрдВ рдХреЗ рдкрд╛рд╕ рдЕрдкрдиреЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рд╕рд╛рде рдЕрдкрдиреЗ рджрд┐рдорд╛рдЧ рдХреЛ рдореВрд░реНрдЦ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реИ, рднрд▓реЗ рд╣реА рдХрдо рд╕реЗ рдХрдо рд╡реЗ рдХреБрдЫ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдВ, рдЕрдиреНрдпрдерд╛ рд╕рднреА рдкреНрд░реЗрд░рдгрд╛ рдЦреЛ рдЬрд╛рдПрдЧреАред рдПрдХ рдФрд░ рдпреБрдЧрд▓ рдмреЗрд╕рдмреЛрд░реНрдб рдореЗрдВ рдЧреИрдк рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдЧрд╛ рдФрд░ рд╕рдордпрдмрджреНрдз рд░реВрдк рд╕реЗ рдХрд╣реЗрдЧрд╛: "рдореБрдЭреЗ рд╕рдордЭ рдореЗрдВ рдирд╣реАрдВ рдЖрддрд╛ рдХрд┐ рдЗрди рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ - рдореЗрд░реЗ рд▓рд┐рдП рд╕рдм рдХреБрдЫ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ" ... рдлрд┐рд░ рдЙрдиреНрд╣реЗрдВ рдПрдХ рдмреВрдЯ рдХреЗ рд╕рд╛рде рдЪреЗрд╣рд░реЗ рдореЗрдВ рдзрдХреЗрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЬрд▓реНрджреА рд╕реЗ рдкреАрдЫреЗ рдзрдХреЗрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдореИрдВ рд╡реИрдЪрд╛рд░рд┐рдХ рдЯрдХрд░рд╛рд╡ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛ (рд╡реЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рднрд░реЗ рд╣реБрдП рд╣реИрдВ), рдФрд░ рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рд╕рднреА рдХреЗ рд▓рд┐рдП рд╕рд╣рдордд рд╣реВрдВред рд╣рд╛рдВ, рдкрд░реАрдХреНрд╖рдг рдХрднреА-рдХрднреА рдЙрдкрдпреЛрдЧреА рд╣реЛрддреЗ рд╣реИрдВ (рд╡рд┐рд╢реЗрд╖рдХрд░ рдХреЛрдб рдореЗрдВ рдЬреЛ рдЕрдХреНрд╕рд░ рдмрджрд▓рддреЗ рд╣реИрдВ рдпрд╛ рдЬрдЯрд┐рд▓ рдЧрдгрдирд╛рдУрдВ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВ), рд╣рд╛рдВ, рдЗрдХрд╛рдИ рдкрд░реАрдХреНрд╖рдг рд╕рднреА рдХреЛрдб рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдпрд╛ рдмрд╛рд╣рд░реА рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХреЛ рдХрд╡рд░ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ), рд╣рд╛рдБ, рдпреВрдирд┐рдЯ рдкрд░реАрдХреНрд╖рдг рд╕реЗ рдЕрдзрд┐рдХ рд╣реИ рдЗрд╕рдХреЗ рдХрдИ рдЕрдиреНрдп рдкреНрд░рдХрд╛рд░ (рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ, рдХрдо рд╕реЗ рдХрдо рдкрд╛рдВрдЪ рдХрд╛ рдирд╛рдо рдерд╛),рдФрд░ рд╣рд╛рдВ, рд╣рдо рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдиреЗ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ - рд╣рдорд╛рд░рд╛ рд▓реЗрдЦ рдХреБрдЫ рдФрд░ рд╣реИред</font></font><br><br>  :   ( )  .    ,       . ,             (  ),      ,         .    ,      <code>Renderer</code> тАФ     .       ,       . <br><br> , .  .     :    ,      .    ,       . ,  : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DieGeneratorTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testGetMaxLevel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ assertEquals(<span class="hljs-string"><span class="hljs-string">"Max level should be 3"</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, DieGeneratorKt.getMaxLevel()); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testDieGenerationSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ DieTypeFilter filter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.ALLY); List&lt;? extends List&lt;Integer&gt;&gt; allowedSizes = Arrays.asList( <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>, Arrays.asList(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>), Arrays.asList(<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>), Arrays.asList(<span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>) ); IntStream.rangeClosed(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>).forEach(level -&gt; { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> size = DieGeneratorKt.generateDie(filter, level).getSize(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect level of die generated: "</span></span> + size, allowedSizes.get(level).contains(size)); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die size: "</span></span> + size, size &gt;= <span class="hljs-number"><span class="hljs-number">4</span></span>); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die size: "</span></span> + size, size &lt;= <span class="hljs-number"><span class="hljs-number">12</span></span>); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die size: "</span></span> + size, size % <span class="hljs-number"><span class="hljs-number">2</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span>); } }); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testDieGenerationType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ List&lt;Die.Type&gt; allowedTypes1 = Arrays.asList(Die.Type.PHYSICAL); List&lt;Die.Type&gt; allowedTypes2 = Arrays.asList(Die.Type.PHYSICAL, Die.Type.SOMATIC, Die.Type.MENTAL, Die.Type.VERBAL); List&lt;Die.Type&gt; allowedTypes3 = Arrays.asList(Die.Type.ALLY, Die.Type.VILLAIN, Die.Type.ENEMY); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { Die.Type type1 = DieGeneratorKt.generateDie(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.PHYSICAL), <span class="hljs-number"><span class="hljs-number">1</span></span>).getType(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die type: "</span></span> + type1, allowedTypes1.contains(type1)); Die.Type type2 = DieGeneratorKt.generateDie(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StatsDieTypeFilter(), <span class="hljs-number"><span class="hljs-number">1</span></span>).getType(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die type: "</span></span> + type2, allowedTypes2.contains(type2)); Die.Type type3 = DieGeneratorKt.generateDie(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MultipleDieTypeFilter(Die.Type.ALLY, Die.Type.VILLAIN, Die.Type.ENEMY), <span class="hljs-number"><span class="hljs-number">1</span></span>).getType(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect die type: "</span></span> + type3, allowedTypes3.contains(type3)); } } }</code> </pre><br>  рдпрд╛ рддреЛ: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BagGeneratorTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testGenerateBag</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ BagTemplate template1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BagTemplate(); template1.addPlan(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.PHYSICAL)); template1.addPlan(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.SOMATIC)); template1.setFixedDieCount(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); BagTemplate template2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BagTemplate(); template2.addPlan(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.DIVINE)); template2.setFixedDieCount(<span class="hljs-number"><span class="hljs-number">5</span></span>); BagTemplate template3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BagTemplate(); template3.addPlan(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SingleDieTypeFilter(Die.Type.ALLY)); template3.setFixedDieCount(<span class="hljs-number"><span class="hljs-number">50</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; i++) { Bag bag1 = BagGeneratorKt.generateBag(template1, <span class="hljs-number"><span class="hljs-number">1</span></span>); assertTrue(<span class="hljs-string"><span class="hljs-string">"Incorrect bag size: "</span></span> + bag1.getSize(), bag1.getSize() &gt;= <span class="hljs-number"><span class="hljs-number">5</span></span> &amp;&amp; bag1.getSize() &lt;= <span class="hljs-number"><span class="hljs-number">15</span></span>); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect number of SOMATIC dice"</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, bag1.examine().stream().filter(d -&gt; d.getType() == Die.Type.SOMATIC).count()); Bag bag2 = BagGeneratorKt.generateBag(template2, <span class="hljs-number"><span class="hljs-number">1</span></span>); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect bag size"</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, bag2.getSize()); Bag bag3 = BagGeneratorKt.generateBag(template3, <span class="hljs-number"><span class="hljs-number">1</span></span>); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect bag size"</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>, bag3.getSize()); List&lt;Die.Type&gt; dieTypes3 = bag3.examine().stream().map(Die::getType).distinct().collect(Collectors.toList()); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect die types"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, dieTypes3.size()); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect die types"</span></span>, Die.Type.ALLY, dieTypes3.get(<span class="hljs-number"><span class="hljs-number">0</span></span>)); } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╛ рдЗрд╕ рддрд░рд╣ рднреА: </font></font><br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LocationGeneratorTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testLocationGeneration</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String name, LocationTemplate template)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Template: "</span></span> + template.getName()); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect template type"</span></span>, name, template.getName()); IntStream.rangeClosed(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>).forEach(level -&gt; { Location location = LocationGeneratorKt.generateLocation(template, level); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect location type"</span></span>, name, location.getName().get(<span class="hljs-string"><span class="hljs-string">""</span></span>)); assertTrue(<span class="hljs-string"><span class="hljs-string">"Location not open by default"</span></span>, location.isOpen()); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> closingDifficulty = location.getClosingDifficulty(); assertTrue(<span class="hljs-string"><span class="hljs-string">"Closing difficulty too small"</span></span>, closingDifficulty &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect closing difficulty"</span></span>, closingDifficulty, template.getBasicClosingDifficulty() + level * <span class="hljs-number"><span class="hljs-number">2</span></span>); Bag bag = location.getBag(); assertNotNull(<span class="hljs-string"><span class="hljs-string">"Bag is null"</span></span>, bag); assertTrue(<span class="hljs-string"><span class="hljs-string">"Bag is empty"</span></span>, location.getBag().getSize() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); Deck&lt;Enemy&gt; enemies = location.getEnemies(); assertNotNull(<span class="hljs-string"><span class="hljs-string">"Enemies are null"</span></span>, enemies); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect enemy threat count"</span></span>, enemies.getSize(), template.getEnemyCardsCount()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (bag.drawOfType(Die.Type.ENEMY) != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { assertTrue(<span class="hljs-string"><span class="hljs-string">"Enemy cards not specified"</span></span>, enemies.getSize() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); } Deck&lt;Obstacle&gt; obstacles = location.getObstacles(); assertNotNull(<span class="hljs-string"><span class="hljs-string">"Obstacles are null"</span></span>, obstacles); assertEquals(<span class="hljs-string"><span class="hljs-string">"Incorrect obstacle threat count"</span></span>, obstacles.getSize(), template.getObstacleCardsCount()); List&lt;SpecialRule&gt; specialRules = location.getSpecialRules(); assertNotNull(<span class="hljs-string"><span class="hljs-string">"SpecialRules are null"</span></span>, specialRules); }); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testGenerateLocation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ testLocationGeneration(<span class="hljs-string"><span class="hljs-string">"Test Location"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestLocationTemplate()); testLocationGeneration(<span class="hljs-string"><span class="hljs-string">"Test Location 2"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestLocationTemplate2()); } }</code> </pre><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рд░реЛрдХреЛ, рд░реЛрдХреЛ, рд░реЛрдХреЛ!" </font><font style="vertical-align: inherit;">рдпрд╣ рдХреНрдпрд╛ рд╣реИ? </font><font style="vertical-align: inherit;">рдЬрд╛рд╡рд╛ ??? " </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдкрдХреЛ рдорд┐рд▓ рдЧрдпрд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╢реБрд░реБрдЖрдд рдореЗрдВ рдЗрд╕ рддрд░рд╣ рдХреЗ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реИ, рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдЖрдк рдЬрдирд░реЗрдЯрд░ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдмреЗрд╢рдХ, рдкрд░реАрдХреНрд╖рдг рдХреЗ рддрд╣рдд рдХреЛрдб рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ рдФрд░ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рд╡рд┐рдзрд┐ рдкрд╣рд▓реА рдмрд╛рд░ рдФрд░ рдмрд┐рдирд╛ рдХрд┐рд╕реА рдкрд░реАрдХреНрд╖рдг рдХреЗ рдХрд╛рдо рдХрд░реЗрдЧреА, рд▓реЗрдХрд┐рди рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд╛рдж рдЖрдк </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕реЗ рд╣рдореЗрд╢рд╛ рдХреЗ рд▓рд┐рдП рднреВрд▓ рдЬрд╛рдПрдВрдЧреЗ</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдХрд┐рд╕реА рднреА рд╕рдВрднрд╛рд╡рд┐рдд рд╕рдорд╕реНрдпрд╛рдУрдВ рд╕реЗ рдЦреБрдж рдХреЛ рдмрдЪрд╛рдПрдВрдЧреЗ (рдЬрд┐рдирдореЗрдВ рд╕реЗ рд╕рдорд╛рдзрд╛рди рдореЗрдВ рдмрд╣реБрдд рд╕рдордп рд▓рдЧрддрд╛ рд╣реИ, рдЦрд╛рд╕рдХрд░ рдЬрдм рд╡рд┐рдХрд╛рд╕ рдХреЗ рдХреНрд╖рдг рд╕реЗред рдкрд╛рдВрдЪ рд╕рд╛рд▓ рдмреАрдд рдЪреБрдХреЗ рд╣реИрдВ рдФрд░ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рднреВрд▓ рдЧрдП рдХрд┐ рд╡рд┐рдзрд┐ рдХреЗ рдЕрдВрджрд░ рд╕рдм рдХреБрдЫ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдФрд░ рдЕрдЧрд░ рдЕрдЪрд╛рдирдХ рдПрдХ рджрд┐рди рдЖрдкрдХреА рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╡рд┐рдлрд▓ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреЗ рдХрд╛рд░рдг рдПрдХрддреНрд░рд┐рдд рд╣реЛрдирд╛ рдмрдВрдж рдХрд░ рджреЗрддреА рд╣реИ, рддреЛ рдЖрдк рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдХрд╛рд░рдг рдЬрд╛рдиреЗрдВрдЧреЗ: рд╕рд┐рд╕реНрдЯрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рдмрджрд▓ рдЧрдИ рд╣реИрдВ рдФрд░ рдЖрдкрдХреЗ рдкреБрд░рд╛рдиреЗ рдкрд░реАрдХреНрд╖рдг рдЕрдм рдЙрдиреНрд╣реЗрдВ рд╕рдВрддреБрд╖реНрдЯ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ (рдЖрдкрдиреЗ рдХреНрдпрд╛ рд╕реЛрдЪрд╛ рдерд╛?)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдПрдХ рдмрд╛рддред </font><font style="vertical-align: inherit;">рдХреНрд▓рд╛рд╕ рдпрд╛рдж рд╣реИ</font></font><code>HandMaskRule</code>   ?   ,   -           ,        (, ┬л    ,   ,  тАФ ,   ,   тАФ   ┬╗ тАФ  ?).     ? тАж         . , ,      ( ),       , , ,    .   ? ? ?   - ?   .         тАФ   ,    .     тАж    ,   : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TripleDieHandMaskRuleTest</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Hand hand; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ hand = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Hand(<span class="hljs-number"><span class="hljs-number">10</span></span>); hand.addDie(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Die(Die.Type.PHYSICAL, <span class="hljs-number"><span class="hljs-number">4</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//0 hand.addDie(new Die(Die.Type.PHYSICAL, 4)); //1 hand.addDie(new Die(Die.Type.SOMATIC, 4)); //2 hand.addDie(new Die(Die.Type.SOMATIC, 4)); //3 hand.addDie(new Die(Die.Type.MENTAL, 4)); //4 hand.addDie(new Die(Die.Type.MENTAL, 4)); //5 hand.addDie(new Die(Die.Type.VERBAL, 4)); //6 hand.addDie(new Die(Die.Type.VERBAL, 4)); //7 hand.addDie(new Die(Die.Type.DIVINE, 4)); //8 hand.addDie(new Die(Die.Type.DIVINE, 4)); //9 hand.addDie(new Die(Die.Type.ALLY, 4)); //A (0) hand.addDie(new Die(Die.Type.ALLY, 4)); //B (1) } @Test public void testRule1() { HandMaskRule rule = new TripleDieHandMaskRule( hand, new Die.Type[]{Die.Type.PHYSICAL, Die.Type.SOMATIC}, new Die.Type[]{Die.Type.MENTAL, Die.Type.VERBAL}, new Die.Type[]{Die.Type.PHYSICAL, Die.Type.ALLY} ); HandMask mask = new HandMask(); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertTrue("Should be on", rule.isPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 2)); assertTrue("Should be on", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertTrue("Should be on", rule.isPositionActive(mask, 5)); assertTrue("Should be on", rule.isPositionActive(mask, 6)); assertTrue("Should be on", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertFalse("Rule should not be met yet", rule.checkMask(mask)); mask.addPosition(0); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertTrue("Should be on", rule.isPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 2)); assertTrue("Should be on", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertTrue("Should be on", rule.isPositionActive(mask, 5)); assertTrue("Should be on", rule.isPositionActive(mask, 6)); assertTrue("Should be on", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertFalse("Rule should not be met yet", rule.checkMask(mask)); mask.addPosition(4); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertTrue("Should be on", rule.isPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 2)); assertTrue("Should be on", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertFalse("Should be off", rule.isPositionActive(mask, 5)); assertFalse("Should be off", rule.isPositionActive(mask, 6)); assertFalse("Should be off", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertFalse("Rule should not be met yet", rule.checkMask(mask)); mask.addAllyPosition(0); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertFalse("Ally should be off", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertFalse("Should be off", rule.isPositionActive(mask, 1)); assertFalse("Should be off", rule.isPositionActive(mask, 2)); assertFalse("Should be off", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertFalse("Should be off", rule.isPositionActive(mask, 5)); assertFalse("Should be off", rule.isPositionActive(mask, 6)); assertFalse("Should be off", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertTrue("Rule should be met", rule.checkMask(mask)); mask.removePosition(0); assertTrue("Ally should be on", rule.isAllyPositionActive(mask, 0)); assertFalse("Ally should be off", rule.isAllyPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 0)); assertTrue("Should be on", rule.isPositionActive(mask, 1)); assertTrue("Should be on", rule.isPositionActive(mask, 2)); assertTrue("Should be on", rule.isPositionActive(mask, 3)); assertTrue("Should be on", rule.isPositionActive(mask, 4)); assertFalse("Should be off", rule.isPositionActive(mask, 5)); assertFalse("Should be off", rule.isPositionActive(mask, 6)); assertFalse("Should be off", rule.isPositionActive(mask, 7)); assertFalse("Should be off", rule.isPositionActive(mask, 8)); assertFalse("Should be off", rule.isPositionActive(mask, 9)); assertFalse("Rule should not be met again", rule.checkMask(mask)); } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдердХрд╛ рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЙрддрдирд╛ рдирд╣реАрдВ рдЬрд┐рддрдирд╛ рдпрд╣ рд▓рдЧрддрд╛ рд╣реИ, рдЬрдм рддрдХ рдЖрдк рд╢реБрд░реВ рдирд╣реАрдВ рдХрд░рддреЗ (рдХреБрдЫ рдмрд┐рдВрджреБ рдкрд░ рдпрд╣ рдФрд░ рднреА рдордЬреЗрджрд╛рд░ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ)ред рд▓реЗрдХрд┐рди рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдкрд░реАрдХреНрд╖рдг (рдФрд░ рдХреБрдЫ рдЕрд╡рд╕рд░реЛрдВ рдХреЗ рд▓рд┐рдП рджреВрд╕рд░реЛрдВ рдХреЗ рдПрдХ рдЬреЛрдбрд╝реЗ) рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдЕрдЪрд╛рдирдХ рд╢рд╛рдВрдд рдФрд░ рдЖрддреНрдорд╡рд┐рд╢реНрд╡рд╛рд╕ рдорд╣рд╕реВрд╕ рдХрд░реЗрдВрдЧреЗред рдЕрдм, рдХреЛрдИ рднреА рдЫреЛрдЯрд╛ рдЯрд╛рдЗрдкреЛ рдЖрдкрдХреЗ рддрд░реАрдХреЗ рдХреЛ рдЦрд░рд╛рдм рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ рдФрд░ рдЕрдкреНрд░рд┐рдп рдЖрд╢реНрдЪрд░реНрдп рдкреИрджрд╛ рдХрд░реЗрдЧрд╛ рдЬреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рдХрдард┐рди рд╣реИред рдереЛрдбрд╝рд╛-рдереЛрдбрд╝рд╛ рдХрд░рдХреЗ, рдзреАрд░реЗ-рдзреАрд░реЗ, рд╣рдо рдХрдХреНрд╖рд╛ рдХреЗ рдЖрд╡рд╢реНрдпрдХ рддрд░реАрдХреЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред рдФрд░ рдЕрдВрдд рдореЗрдВ рд╣рдо рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реАрдХреНрд╖рдг рдЪрд▓рд╛рддреЗ рд╣реИрдВ рдХрд┐ рдХрд╣реАрдВ рди рдХрд╣реАрдВ рд╣рдорд╕реЗ рдЧрд▓рддреА рд╣реЛ рдЧрдИред рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╕реНрдерд╛рди рдЦреЛрдЬреЗрдВ рдФрд░ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦреЗрдВред рддрдм рддрдХ рджреЛрд╣рд░рд╛рдПрдВред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TripleDieHandMaskRule</span></span></span></span>( hand: Hand, types1: Array&lt;Die.Type&gt;, types2: Array&lt;Die.Type&gt;, types3: Array&lt;Die.Type&gt;) : HandMaskRule(hand) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types1 = types1.toSet() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types2 = types2.toSet() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> types3 = types3.toSet() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mask.positionCount + mask.allyPositionCount != <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getCheckedDice(mask).asSequence() .filter { it.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 } .any { d1 -&gt; getCheckedDice(mask) .filter { d2 -&gt; d2 !== d1 } .filter { it.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 } .any { d2 -&gt; getCheckedDice(mask) .filter { d3 -&gt; d3 !== d1 } .filter { d3 -&gt; d3 !== d2 } .any { it.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 } } } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mask.checkPosition(position)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> die = hand.dieAt(position) ?: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (mask.positionCount + mask.allyPositionCount) { <span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 <span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; with(getCheckedDice(mask).first()) { (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; (die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3)) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; (die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3)) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; (die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2)) } <span class="hljs-number"><span class="hljs-number">2</span></span>-&gt; with(getCheckedDice(mask)) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> d1 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> d2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3) || (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2) || (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; die.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1) } <span class="hljs-number"><span class="hljs-number">3</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isAllyPositionActive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mask: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">HandMask</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mask.checkAllyPosition(position)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hand.allyDieAt(position) == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (mask.positionCount + mask.allyPositionCount) { <span class="hljs-number"><span class="hljs-number">0</span></span> -&gt; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 <span class="hljs-number"><span class="hljs-number">1</span></span> -&gt; with(getCheckedDice(mask).first()) { (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; (ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3)) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; (ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3)) || (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; (ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 || ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2)) } <span class="hljs-number"><span class="hljs-number">2</span></span>-&gt; with(getCheckedDice(mask)) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> d1 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> d2 = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3) || (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2) || (d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1) || (d2.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types2 &amp;&amp; d1.type <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types3 &amp;&amp; ALLY <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> types1) } <span class="hljs-number"><span class="hljs-number">3</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-literal"><span class="hljs-literal">false</span></span> } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЗрд╕ рддрд░рд╣ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЛ рдЕрдзрд┐рдХ рдЖрд╕рд╛рдиреА рд╕реЗ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рдЪрд╛рд░ рд╣реИрдВ, рддреЛ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИред </font><font style="vertical-align: inherit;">рдФрд░ рдореБрдЭреЗ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд░реВрдк рд╕реЗ рдЦреБрд╢реА рд╣реБрдИ рдХрд┐ рдореИрдВ рдЗрд╕ рдХрдХреНрд╖рд╛ рдХреЛ рдПрдХ рдкрд░реАрдХреНрд╖рдг рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рд╛рде рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╕реНрдорд╛рд░реНрдЯ рдерд╛ред </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдФрд░ рдореИрдВ &lt;...&gt; рднреА &lt;...&gt; рдмрд╣реБрдд &lt;...&gt; рдЦреБрд╢реА &lt;...&gt; рд╣реВрдВред </font><font style="vertical-align: inherit;">рдЕрдВрджрд░ рдЬрд╛рдУ! </font><font style="vertical-align: inherit;">&lt;...&gt; рд╡рд╛рдкрд╕! </font><font style="vertical-align: inherit;">&lt;...&gt; рдЕрдВрддрд░ рдореЗрдВ! "</font></font></i> <br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рд╕реЛрд▓рд╣ред </font><font style="vertical-align: inherit;">рдкреНрд░рддрд┐рд░реВрдкрдХрддрд╛</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдЕрдкреЗрдХреНрд╖рд┐рдд рдерд╛, рдкрд░рд┐рдкрдХреНрд╡ рдмрдЪреНрдЪреЗ рдЕрдкрдиреЗ рдЬреАрд╡рди рднрд░ рдорд╛рддрд╛-рдкрд┐рддрд╛ рдХреА рд╢рд░рдг рдореЗрдВ рдирд╣реАрдВ рд░рд╣ рд╕рдХрддреЗ рд╣реИрдВ - рдЬрд┐рддрдиреА рдЬрд▓реНрджреА рдпрд╛ рдмрд╛рдж рдореЗрдВ рдЙрдиреНрд╣реЗрдВ рдЕрдкрдирд╛ рд░рд╛рд╕реНрддрд╛ рдЪреБрдирдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдХрдард┐рдирд╛рдЗрдпреЛрдВ рдФрд░ рдмрд╛рдзрд╛рдУрдВ рдХреЛ рдкрд╛рд░ рдХрд░рддреЗ рд╣реБрдП рд╕рд╛рд╣рд╕рдкреВрд░реНрд╡рдХ рдЙрд╕рдХрд╛ рдкрд╛рд▓рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдП рдЧрдП рдШрдЯрдХ рдЗрддрдиреЗ рдкрд░рд┐рдкрдХреНрд╡ рд╣реЛ рдЧрдП рдХрд┐ рд╡реЗ рдПрдХ рд╣реА рдЫрдд рдХреЗ рдиреАрдЪреЗ рдХреНрд░реИрдореНрдк рд╣реЛ рдЧрдПред </font><font style="vertical-align: inherit;">рдЙрдиреНрд╣реЗрдВ рдХрдИ рднрд╛рдЧреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдЖ рдЧрдпрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдПрдХ рдирд╣реАрдВ рдмрд▓реНрдХрд┐ рддреБрдЪреНрдЫ рдХрд╛рд░реНрдп рдХреЗ рд╕рд╛рде рд╕рд╛рдордирд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рддреАрди рд╕рдореВрд╣реЛрдВ рдореЗрдВ рдЕрдм рддрдХ рдмрдирд╛рдИ рдЧрдИ рд╕рднреА рдХрдХреНрд╖рд╛рдУрдВ рдХреЛ рддреЛрдбрд╝рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреБрдирд┐рдпрд╛рджреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛: рдореЙрдбреНрдпреВрд▓, рдЦреЗрд▓ рдЗрдВрдЬрди, рдХрдиреЗрдХреНрдЯрд░ рдЗрдВрдЯрд░рдлреЗрд╕ рдФрд░ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо-рд╕реНрд╡рддрдВрддреНрд░ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрд░</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> );</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рджреГрд╢реНрдп, рдЗрд▓рд╛рдХреЗ, рджреБрд╢реНрдордиреЛрдВ рдФрд░ рдмрд╛рдзрд╛рдУрдВ рдХреЗ рдЯреЗрдореНрдкрд▓реЗрдЯреНрд╕ - рддрдерд╛рдХрдерд┐рдд "рд╕рд╛рд╣рд╕рд┐рдХ" ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рд╣рд╕рд┐рдХ</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) рдХреЗ </font><font style="vertical-align: inherit;">рдШрдЯрдХ </font><font style="vertical-align: inherit;">;</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд┐рд╕реА рд╡рд┐рд╢реЗрд╖ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди: рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рдХрдВрд╕реЛрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди ( </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cli</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )ред</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЗрд╕ рдкреГрдердХреНрдХрд░рдг рдХрд╛ рдкрд░рд┐рдгрд╛рдо рдЕрдВрддрддрдГ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЖрд░реЗрдЦ рдХреА рддрд░рд╣ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛: </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╢реЛ рдХреЗ рдЕрдВрдд рдореЗрдВ рдЕрднрд┐рдиреЗрддрд╛рдУрдВ рдХреА рддрд░рд╣, рд╣рдорд╛рд░реЗ рдЖрдЬ рдХреЗ рдирд╛рдпрдХ рдкреВрд░реА рддрд╛рдХрдд рд╕реЗ рджреГрд╢реНрдп рдореЗрдВ рдлрд┐рд░ рд╕реЗ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╣реИрдВ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/ci/t5/gm/cit5gmpnmhdsrzoprl0fagpzpw8.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрддрд┐рд░рд┐рдХреНрдд рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ рдФрд░ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд░реНрдЧ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░реЗрдВред </font><font style="vertical-align: inherit;">рдФрд░ рд╣рдореЗрдВ рдмрд╕ рдЖрдкрд╕ рдореЗрдВ рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдХреА рдмрд╛рддрдЪреАрдд рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрд░</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкрд░рд┐рдпреЛрдЬрдирд╛ рдпрд╣ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдПрдХ рд╢реБрджреНрдз рдЗрдВрдЬрди рд╣реИред </font><font style="vertical-align: inherit;">рд╕рднреА рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╡рд░реНрдЧреЛрдВ рдХреЛ рдЕрдиреНрдп рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ - рдХреЗрд╡рд▓ рдореВрд▓ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛, рдХреЛрд░, рдмрдиреЗ рд░рд╣реЗред </font><font style="vertical-align: inherit;">рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЕрдЧрд░ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">рдЕрдм рд▓реЙрдиреНрдЪрд┐рдВрдЧ рдХреНрд▓рд╛рд╕ рдирд╣реАрдВ рд╣реИ, рдкреИрдХреЗрдЬ рдмрдирд╛рдиреЗ рдХреА рднреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд╡рд┐рдзрд╛рдирд╕рднрд╛рдУрдВ рдХреЛ рд╕реНрдерд╛рдиреАрдп рдорд╛рд╡реЗрди рднрдВрдбрд╛рд░ (рдмрд╛рдж рдореЗрдВ рдЙрд╕ рдкрд░ рдЕрдзрд┐рдХ) рдореЗрдВ рд╣реЛрд╕реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЕрдиреНрдп рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд╝рд╛рдЗрд▓ </font></font><code>pom.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ:</font></font><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>my.company<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>dice-core<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>junit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>junit-dep<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>4.8.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>test<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- other Kotlin setup --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдм рд╕реЗ рд╣рдо рдЗрд╕реЗ рдЗрд╕ рддрд░рд╣ рдПрдХрддреНрд░рд┐рдд рдХрд░реЗрдВрдЧреЗ: </font></font><br><br><pre> <code class="bash hljs">mvn -f <span class="hljs-string"><span class="hljs-string">"path_to_project/DiceCore/pom.xml"</span></span> install</code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cli рдкрд░рд┐рдпреЛрдЬрдирд╛</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╣рд╛рдВ рдЖрд╡реЗрджрди рдХреЗ рд▓рд┐рдП рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рд╣реИ - рдпрд╣ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд╕рд╛рде рд╣реИ рдХрд┐ рдЕрдВрддрд┐рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрд╛рддрдЪреАрдд рдХрд░реЗрдЧрд╛ред </font><font style="vertical-align: inherit;">рдХрд░реНрдиреЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд┐рд░реНрднрд░рддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЪреВрдВрдХрд┐ рд╣рдорд╛рд░реЗ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рд╣рдо рдХрдВрд╕реЛрд▓ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдЗрд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдХрдХреНрд╖рд╛рдПрдВ рд╣реЛрдВрдЧреА (рдпрджрд┐ рд╣рдо рдЕрдЪрд╛рдирдХ рдХреЙрдлреА рдирд┐рд░реНрдорд╛рддрд╛ рдкрд░ рдЧреЗрдо рд╢реБрд░реВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдмрд╕ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдЗрд╕реА рддрд░рд╣ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд╕рд╛рде рдмрджрд▓рддреЗ рд╣реИрдВ)ред </font><font style="vertical-align: inherit;">рд╣рдо рддреБрд░рдВрдд рд╕рдВрд╕рд╛рдзрди (рд▓рд╛рдЗрдиреЗрдВ, рдСрдбрд┐рдпреЛ рдлрд╝рд╛рдЗрд▓реЗрдВ, рдЖрджрд┐) рдЬреЛрдбрд╝ рджреЗрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдмрд╛рд╣рд░реА рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдлрд╝рд╛рдЗрд▓ рдореЗрдВ </font></font><code>pom.xml</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХреА рдЬрд╛рдПрдЧреА:</font></font><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>my.company<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>dice-cli<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>jar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>kotlin-stdlib<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${kotlin.version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>my.company<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>dice-core<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.fusesource.jansi<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jansi<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.17.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>jline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jline<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.14.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.googlecode.soundlibs<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jlayer<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.1.4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span>compile<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">scope</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.jetbrains.kotlin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- other Kotlin setup --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>maven-assembly-plugin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.6<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>package<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span>single<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goals</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">executions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRefs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRef</span></span></span><span class="hljs-tag">&gt;</span></span>jar-with-dependencies<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRef</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">descriptorRefs</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mainClass</span></span></span><span class="hljs-tag">&gt;</span></span>my.company.dice.MainKt<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mainClass</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">archive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">maven.compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span>1.3.20<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">kotlin.compiler.incremental</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдордиреЗ рдЗрд╕ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рдмрдирд╛рдиреЗ рдФрд░ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╣реА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рджреЗрдЦ рд▓реА рд╣реИ - рд╣рдордиреЗ рдЗрд╕реЗ рджреЛрд╣рд░рд╛рдирд╛ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рд╣реИред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░реЛрдорд╛рдВрдЪ</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреИрд░, рдЖрдЦрд┐рд░рдХрд╛рд░, рдПрдХ рдЕрд▓рдЧ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рд╣рдо рдкреНрд▓реЙрдЯ рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВред рдпрд╣реА рд╣реИ, рд╕рднреА рдкрд░рд┐рджреГрд╢реНрдп, рдЗрд▓рд╛рдХреЗ, рджреБрд╢реНрдорди рдФрд░ рдЦреЗрд▓ рдХреА рджреБрдирд┐рдпрд╛ рдХреА рдЕрдиреНрдп рдЕрдиреЛрдЦреА рд╡рд╕реНрддреБрдПрдВ рдЬреЛ рдЖрдкрдХреА рдХрдВрдкрдиреА рдХреЗ рдкрд░рд┐рджреГрд╢реНрдп рд╡рд┐рднрд╛рдЧ рдХреЗ рдХрд░реНрдордЪрд╛рд░реА рдХрд▓реНрдкрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ, рдпрд╛ рдЕрдм рддрдХ рдХреЗрд╡рд▓ рд╣рдорд╛рд░реА рдЦреБрдж рдХреА рдмреАрдорд╛рд░ рдХрд▓реНрдкрдирд╛ - рд╣рдо рдЕрднреА рднреА рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдХреЗрд╡рд▓ рдЧреЗрдо рдбрд┐рдЬрд╛рдЗрдирд░ рд╣реИрдВ)ред рдпрд╣ рд╡рд┐рдЪрд╛рд░ рд╣реИ рдХрд┐ рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЛ рд╕реЗрдЯ (рд░реЛрдорд╛рдВрдЪ) рдореЗрдВ рд╕рдореВрд╣рд┐рдд рдХрд░реЗрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рд╕реЗрдЯ рдХреЛ рдПрдХ рдЕрд▓рдЧ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рд╡рд┐рддрд░рд┐рдд рдХрд░реЗрдВ (рдмреЛрд░реНрдб рдФрд░ рд╡реАрдбрд┐рдпреЛ рдЧреЗрдо рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ рдпрд╣ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ)ред рдпрд╣реА рд╣реИ, рдЬрд╛рд░ рдЕрднрд┐рд▓реЗрдЦрд╛рдЧрд╛рд░ рдЗрдХрдЯреНрдард╛ рдХрд░реЗрдВ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдПрдХ рдЕрд▓рдЧ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдбрд╛рд▓реЗрдВ рддрд╛рдХрд┐ рдЧреЗрдо рдЗрдВрдЬрди рдЗрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ рд╕реНрдХреИрди рдХрд░реЗ рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╡рд╣рд╛рдВ рдореМрдЬреВрдж рд╕рднреА рд░реЛрдорд╛рдВрдЪ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рддрдХрдиреАрдХреА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рднрд╛рд░реА рдХрдард┐рдирд╛рдЗрдпреЛрдВ рд╕реЗ рднрд░рд╛ рд╣реБрдЖ рд╣реИред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд╣рд╛рдБ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ? рдЦреИрд░, рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЗрд╕ рддрдереНрдп рд╕реЗ рдХрд┐ рд╣рдо рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЬрд╛рд╡рд╛ рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдЯреЗрдореНрдкрд▓реЗрдЯ рд╡рд┐рддрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ (рд╣рд╛рдВ, рдореБрдЭреЗ рд╣рд░рд╛рдПрдВ рдФрд░ рдореБрдЭреЗ рдбрд╛рдВрдЯреЗрдВ - рдореИрдВ рдпрд╣ foresaw рдХрд░рддрд╛ рд╣реВрдВ)ред рдФрд░ рдпрджрд┐ рдРрд╕рд╛ рд╣реИ, рддреЛ рдЗрди рдХрдХреНрд╖рд╛рдУрдВ рдХреЛ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдкрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдХреНрд▓рд╛рд╕рдкрд╛рде рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдЗрд╕ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рдирд╣реАрдВ рд╣реИ - рдЖрдк рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЕрдкрдиреА рдЬрд╛рд░ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЙрдкрдпреБрдХреНрдд рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдореЗрдВ рдкрдВрдЬреАрдХреГрдд рдХрд░рддреЗ рд╣реИрдВ (рдЬрд╛рд╡рд╛ 6 рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░, рдЖрдк * - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╛рдЗрд▓реНрдбрдХрд╛рд░реНрдб</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) </font><font style="vertical-align: inherit;">рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">ред</font></font><br><br><pre> <code class="bash hljs">java -classpath <span class="hljs-string"><span class="hljs-string">"path_to_project/DiceCli/target/adventures/*"</span></span> -jar path_to_project/DiceCli/target/dice-1.0-jar-with-dependencies.jar</code> </pre><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">тАЬрдореВрд░реНрдЦ, рдпрд╛ рдХреНрдпрд╛? -Jar рд╕реНрд╡рд┐рдЪ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, -classpath рд╕реНрд╡рд┐рдЪ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ! "</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп рдЬрд╛рд░ рдЕрднрд┐рд▓реЗрдЦрд╛рдЧрд╛рд░ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд╛рд╕рдкрд╛рде рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЖрдВрддрд░рд┐рдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </font></font><code>META-INF/MANIFEST.MF</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдЕрдиреБрднрд╛рдЧ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ - </font></font><code>Claspath:</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">)ред рдпрд╣ рдареАрдХ рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рдкреНрд▓рдЧрдЗрдиреНрд╕ рднреА рд╣реИрдВ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рд╡реЗрди-рдХрдВрдкрд╛рдЗрд▓рд░-рдкреНрд▓рдЧрдЗрди</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╛, рд╕рдмрд╕реЗ рдЦрд░рд╛рдм, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдорд╛рд╡реЗрди-рдЕрд╕реЗрдВрдмрд▓реА-рдкреНрд▓рдЧрдЗрди</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )ред рд▓реЗрдХрд┐рди рдореИрдирд┐рдлрд╝реЗрд╕реНрдЯ, рдПрд▓рд╛рд╕ рдореЗрдВ рд╡рд╛рдЗрд▓реНрдбрдХрд╛рд░реНрдб рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ - рдЖрдкрдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдирд┐рд░реНрднрд░ рдЬрд╛рд░-рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рдирд╛рдо рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдиреЗ рд╣реЛрдВрдЧреЗред рдпрд╣реА рд╣реИ, рдЙрдиреНрд╣реЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рдЬрд╛рдирдирд╛, рдЬреЛ рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рд╕рдорд╕реНрдпрд╛рдЧреНрд░рд╕реНрдд рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рд╡реИрд╕реЗ рднреА, рдореИрдВ рдРрд╕рд╛ рдирд╣реАрдВ рдЪрд╛рд╣рддрд╛ рдерд╛ред рдореИрдВ рдЪрд╛рд╣рддрд╛ рдерд╛ рдХрд┐ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд░рдирд╛ рдкрдбрд╝реЗред рдлреЛрд▓реНрдбрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП</font></font><code>adventures/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдк рдХрд┐рд╕реА рднреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд░реЛрдорд╛рдВрдЪ рдлреЗрдВрдХ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдХрд┐ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рджреМрд░рд╛рди рд╡реЗ рд╕рднреА рдЧреЗрдо рдЗрдВрдЬрди рдХреЛ рджрд┐рдЦрд╛рдИ рджреЗ рд░рд╣реЗ рдереЗред </font><font style="vertical-align: inherit;">рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдкреНрд░рддреАрдд рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рд╕реНрдкрд╖реНрдЯ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЬрд╛рд╡рд╛ рджреБрдирд┐рдпрд╛ рдХреЗ рдорд╛рдирдХ рдЕрднреНрдпрд╛рд╡реЗрджрди рд╕реЗ рдкрд░реЗ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕рд▓рд┐рдП, рдпрд╣ рд╕реНрд╡рд╛рдЧрдд рдпреЛрдЧреНрдп рдирд╣реАрдВ рд╣реИред </font><font style="vertical-align: inherit;">рд╕реНрд╡рддрдВрддреНрд░ рд░реЛрдорд╛рдВрдЪ рдлреИрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЕрдкрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдХреМрди рд╕рд╛? </font><font style="vertical-align: inherit;">рдореБрдЭреЗ рдирд╣реАрдВ рдкрддрд╛, рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд▓рд┐рдЦреЗрдВ - рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдХрд┐рд╕реА рдХреЗ рдкрд╛рд╕ рд╕реНрдорд╛рд░реНрдЯ рд╡рд┐рдЪрд╛рд░ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдмреАрдЪ, рдХреЛрдИ рд╡рд┐рдЪрд╛рд░ рдирд╣реАрдВ рд╣реИрдВ, рдпрд╣рд╛рдВ рдПрдХ рдЫреЛрдЯреА (рдпрд╛ рдмрдбрд╝реА, рдЖрдк рдХреИрд╕реЗ рджрд┐рдЦрддреЗ рд╣реИрдВ рдЗрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░) рдЪрд╛рд▓ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдЙрдирдХреЗ рдирд╛рдо рдХреЛ рдЬрд╛рдирдиреЗ рдХреЗ рдмрд┐рдирд╛ рдФрд░ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд┐рдП рдмрд┐рдирд╛ рдХреНрд▓рд╛рд╕рдкреИрде рдореЗрдВ рдирд┐рд░реНрднрд░рддрд╛ рдЬреЛрдбрд╝рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдВрдбреЛрдЬ рдореЗрдВ:</font></font><br><br><pre> <code class="dos hljs">@<span class="hljs-built_in"><span class="hljs-built_in">ECHO</span></span> OFF <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> "path_to_maven\mvn.bat" -f "path_to_project\DiceCore\pom.xml" install <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> "path_to_maven\mvn.bat" -f "path_to_project\DiceCli\pom.xml" package <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> "path_to_maven\mvn.bat" -f "path_to_project\TestAdventure\pom.xml" package <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> path_to_project\DiceCli\target\adventures <span class="hljs-built_in"><span class="hljs-built_in">copy</span></span> "path_to_project\TestAdventure\target\test-adventure-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.jar" path_to_project\DiceCli\target\adventures\ <span class="hljs-built_in"><span class="hljs-built_in">chcp</span></span> <span class="hljs-number"><span class="hljs-number">65001</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> path_to_project\DiceCli\target\ java -Dfile.encoding=UTF-<span class="hljs-number"><span class="hljs-number">8</span></span> -cp "dice-cli-<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>-jar-with-dependencies.jar;adventures\*" my.company.dice.MainKt <span class="hljs-built_in"><span class="hljs-built_in">pause</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдФрд░ рдпреВрдирд┐рдХреНрд╕ рдкрд░: </font></font><br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh mvn -f "path_to_project/DiceCore/pom.xml" install mvn -f "path_to_project/DiceCli/pom.xml" package mvn -f "path_to_project/TestAdventure/pom.xml" package mkdir path_to_project/DiceCli/target/adventures cp path_to_project/TestAdventure/target/test-adventure-1.0.jar path_to_project/DiceCli/target/adventures/ cd path_to_project/DiceCli/target/ java -cp "dice-cli-1.0-jar-with-dependencies.jar:adventures/*" my.company.dice.MainKt</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдпрд╣рд╛рдБ рдЪрд╛рд▓ рд╣реИред </font><font style="vertical-align: inherit;">рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп, </font></font><code>-jar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд▓реА</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░реЛрдЬреЗрдХреНрдЯ </font><font style="vertical-align: inherit;">рдХреЛ рдХреНрд▓рд╛рд╕рдкрд╛рде рдореЗрдВ </font><font style="vertical-align: inherit;">рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">рдФрд░ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрд╕рдХреЗ рднреАрддрд░ рдирд┐рд╣рд┐рдд рд╡рд░реНрдЧ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>MainKt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рд╕рд╛рде рд╣реА рдпрд╣рд╛рдБ рд╣рдо рдлреЛрд▓реНрдбрд░ рд╕реЗ рд╕рднреА рдЖрд░реНрдХрд╛рдЗрд╡ рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>adventures/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдмрд╛рд░ рдлрд┐рд░ рд╕реЗ рдпрд╣ рдмрддрд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реИ рдХрд┐ рдпрд╣ рдХрд┐рддрдирд╛ рдЯреЗрдврд╝рд╛ рдлреИрд╕рд▓рд╛ рд╣реИ - рдореИрдВ рдЦреБрдж рдЬрд╛рдирддрд╛ рд╣реВрдВ, рдзрдиреНрдпрд╡рд╛рджред </font><font style="vertical-align: inherit;">рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рдЕрдкрдиреЗ рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рдмреЗрд╣рддрд░ рдврдВрдЧ рд╕реЗ рд╕реБрдЭрд╛рдПрдВред </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреГрдкрдпрд╛</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ред </font><font style="vertical-align: inherit;">(р▓ея╣Пр▓е)</font></font><br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд░рдг рд╕рддреНрд░рд╣ред </font><font style="vertical-align: inherit;">рдХрд╣рд╛рдиреА</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧрд╛рдиреЗ рдХреЗ рдмреЛрд▓ред </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдорд╛рд░рд╛ рд▓реЗрдЦ рд╡рд░реНрдХрдлрд╝реНрд▓реЛ рдХреЗ рддрдХрдиреАрдХреА рдкрдХреНрд╖ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЧреЗрдо рдХреЗрд╡рд▓ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЛрдб рдирд╣реАрдВ рд╣реИрдВред рдпреЗ рджрд┐рд▓рдЪрд╕реНрдк рдШрдЯрдирд╛рдУрдВ рдФрд░ рдЬреАрд╡рдВрдд рдкрд╛рддреНрд░реЛрдВ рдХреЗ рд╕рд╛рде рд░реЛрдорд╛рдВрдЪрдХ рджреБрдирд┐рдпрд╛ рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рд╡рд╛рд╕реНрддрд╡рд┐рдХ рджреБрдирд┐рдпрд╛ рдХрд╛ рддреНрдпрд╛рдЧ рдХрд░рддреЗ рд╣реБрдП рдЕрдкрдиреЗ рд╕рд┐рд░ рдХреЗ рд╕рд╛рде рдбреБрдмрдХреА рд▓рдЧрд╛рддреЗ рд╣реИрдВред рдРрд╕реА рдкреНрд░рддреНрдпреЗрдХ рджреБрдирд┐рдпрд╛ рдЕрдкрдиреЗ рддрд░реАрдХреЗ рд╕реЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рд╣реИ рдФрд░ рдЕрдкрдиреЗ рддрд░реАрдХреЗ рд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдХрдИ рдЖрдк рдЕрднреА рднреА рдХрдИ рд╡рд░реНрд╖реЛрдВ рдХреЗ рдмрд╛рдж рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВред рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреА рджреБрдирд┐рдпрд╛ рдХреЛ рдЧрд░реНрдо рднрд╛рд╡рдирд╛рдУрдВ рдХреЗ рд╕рд╛рде рднреА рдпрд╛рдж рдХрд┐рдпрд╛ рдЬрд╛рдП, рддреЛ рдЗрд╕реЗ рдЕрд╕рд╛рдорд╛рдиреНрдп рдФрд░ рджрд┐рд▓рдЪрд╕реНрдк рдмрдирд╛рдПрдВред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЭреЗ рдкрддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдпрд╣рд╛рдВ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рд╣реИрдВ, рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд░рд╛рдЗрдЯрд░ рдирд╣реАрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЧреЗрдо рд╢реИрд▓реА (рдЕрдиреБрднрд╡ рдХреЗ рд╕рд╛рде рдЧреЗрдорд░реНрд╕, рд░рд╛рдЗрдЯ?) рдХреЗ рдХрдерд╛ рдШрдЯрдХ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдмреБрдирд┐рдпрд╛рджреА рд╡рд┐рдЪрд╛рд░ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдХрд┐рд╕реА рднреА рдкреБрд╕реНрддрдХ рдХреА рддрд░рд╣, рдХрд╣рд╛рдиреА рдореЗрдВ рдПрдХ рдЖрдВрдЦ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП (рдЬрд┐рд╕рдореЗрдВ рд╣рдо рдзреАрд░реЗ-рдзреАрд░реЗ рдирд╛рдпрдХреЛрдВ рдХреЗ рд╕рд╛рдордиреЗ рдЖрдиреЗ рд╡рд╛рд▓реА рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддреЗ рд╣реИрдВ), рд╡рд┐рдХрд╛рд╕, рджреЛ рдпрд╛ рддреАрди рджрд┐рд▓рдЪрд╕реНрдк рдореЛрдбрд╝, рдПрдХ рдЪрд░рдореЛрддреНрдХрд░реНрд╖ (рдХрдерд╛рдирдХ рдХрд╛ рд╕рдмрд╕реЗ рддреАрд╡реНрд░ рдХреНрд╖рдг, рдЬрдм рдкрд╛рдардХ рдЙрддреНрддреЗрдЬрдирд╛ рдореЗрдВ рдЬрдо рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рд╕рд╛рдВрд╕ рд▓реЗрдирд╛ рднреВрд▓ рдЬрд╛рддреЗ рд╣реИрдВ) рдФрд░ рдЗрдирдХрд╛рд░ ( рдХреМрди рд╕реА рдШрдЯрдирд╛рдПрдВ рдзреАрд░реЗ-рдзреАрд░реЗ рдЕрдкрдиреЗ рддрд╛рд░реНрдХрд┐рдХ рдирд┐рд╖реНрдХрд░реНрд╖ рдкрд░ рдЖрддреА рд╣реИрдВ)ред </font><font style="vertical-align: inherit;">рд╕рдордЭ рд╕реЗ рдмрдЪреЗрдВ, рддрд╛рд░реНрдХрд┐рдХ рдЖрдзрд╛рд░рд╣реАрдирддрд╛ рдФрд░ рд╕рд╛рдЬрд┐рд╢ рдХреЗ рдЫреЗрдж - рд╕рднреА рд╢реБрд░реВ рдХреА рдЧрдИ рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдкрд░реНрдпрд╛рдкреНрдд рдирд┐рд╖реНрдХрд░реНрд╖ рдкрд░ рдЖрдирд╛ рдЪрд╛рд╣рд┐рдПред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдареАрдХ рд╣реИ, рдЪрд▓реЛ рд╣рдорд╛рд░реА рдХрд╣рд╛рдиреА рджреВрд╕рд░реЛрдВ рдХреЛ рдкрдврд╝рддреЗ рд╣реИрдВ - рдкрдХреНрд╖ рд╕реЗ рдПрдХ рдирд┐рд╖реНрдкрдХреНрд╖ рджреЗрдЦреЛ рдмрд╣реБрдд рдмрд╛рд░ рдХрд┐рдП рдЧрдП рджреЛрд╖реЛрдВ рдХреЛ рд╕рдордЭрдиреЗ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╕рдордп рдкрд░ рдареАрдХ рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреЗрд▓ рдХреА рд╕рд╛рдЬрд┐рд╢</font></font></b> <div class="spoiler_text">         ,    ,      .      ,     :  ( )   ( ),   .       ,     . <br><br>   тАФ   ,              .     ,                  ,     . <br><br> ,  ,  - . ,    ,  ,           ,     .       . <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдореИрдВ рдЯреЛрд▓реНрдХрд┐рди рдирд╣реАрдВ рд╣реВрдВ, рдореИрдВрдиреЗ рдЦреЗрд▓ рдХреА рджреБрдирд┐рдпрд╛ рдореЗрдВ рдмрд╣реБрдд рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рдореИрдВрдиреЗ рдЗрд╕реЗ рдХрд╛рдлреА рджрд┐рд▓рдЪрд╕реНрдк рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреА рдФрд░ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд, рддрд╛рд░реНрдХрд┐рдХ рд░реВрдк рд╕реЗ рдЙрдЪрд┐рдд рднреАред рдЙрд╕реА рд╕рдордп, рдЙрдиреНрд╣реЛрдВрдиреЗ рдЦреБрдж рдХреЛ рдХреБрдЫ рдЕрд╕реНрдкрд╖реНрдЯрддрд╛рдУрдВ рдХреЛ рдкреЗрд╢ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреА, рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рдЦрд┐рд▓рд╛рдбрд╝реА рдЕрдкрдиреЗ рддрд░реАрдХреЗ рд╕реЗ рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрдиреНрд╣реЛрдВрдиреЗ рдХрд╣реАрдВ рднреА рд╡рд░реНрдгрд┐рдд рджреБрдирд┐рдпрд╛ рдХреЗ рддрдХрдиреАрдХреА рд╡рд┐рдХрд╛рд╕ рдХреЗ рд╕реНрддрд░ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛: рд╕рд╛рдордВрддреА рд╡реНрдпрд╡рд╕реНрдерд╛ рдФрд░ рдЖрдзреБрдирд┐рдХ рд▓реЛрдХрддрд╛рдВрддреНрд░рд┐рдХ рд╕рдВрд╕реНрдерд╛рдПрдВ, рджреБрд╖реНрдЯ рдЕрддреНрдпрд╛рдЪрд╛рд░реА рдФрд░ рд╕рдВрдЧрдард┐рдд рдЖрдкрд░рд╛рдзрд┐рдХ рд╕рдореВрд╣, рдЙрдЪреНрдЪрддрдо рд▓рдХреНрд╖реНрдп рдФрд░ рднреЛрдЬ рдореЗрдВ рдЬреАрд╡рд┐рдд, рдмрд╕ рдореЗрдВ рд╕рд╡рд╛рд░реА рдФрд░ рдЭрдЧрдбрд╝реЗ - рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╡рд░реНрдг рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ рд╢реВрдЯ рд╣реЛрддреЗ рд╣реИрдВ: рдзрдиреБрд╖ / рдХреНрд░реЙрд╕рдмреЛ рд╕реЗ, рдпрд╛ рдЕрд╕реЙрд▓реНрдЯ рд░рд╛рдЗрдлрд▓ рд╕реЗред рджреБрдирд┐рдпрд╛ рдореЗрдВ рдЬрд╛рджреВ рдХреА рдПрдХ рдЭрд▓рдХ рд╣реИ (рдЗрд╕рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рд╕рд╛рдорд░рд┐рдХ рдХреНрд╖рдорддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдЧреЗрдордкреНрд▓реЗ рдХреЛ рдЬреЛрдбрд╝рддреА рд╣реИ) рдФрд░ рд░рд╣рд╕реНрдпрд╡рд╛рдж рдХреЗ рддрддреНрд╡ (рдмрд╕ рд╣реЛрдиреЗ рдХреЗ рд▓рд┐рдП)ред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореИрдВ рдкреНрд▓реЙрдЯ рдХреНрд▓рд┐рдЪ рдФрд░ рдлрдВрддрд╛рд╕реА рдЙрдкрднреЛрдХреНрддрд╛ рд╡рд╕реНрддреБрдУрдВ рд╕реЗ рджреВрд░ рдЬрд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ - рдпреЗ рд╕рднреА рдХрд▓реНрдкрд┐рдд рдмреМрдиреЗ, рдбреНрд░реЗрдЧрди, рдмреНрд▓реИрдХ рд▓реЙрд░реНрдбреНрд╕ рдФрд░ рдкреВрд░реНрдг рд╡рд┐рд╢реНрд╡ рдмреБрд░рд╛рдИ (рд╕рд╛рде рд╣реА: рдЪрдпрдирд┐рдд рдирд╛рдпрдХ, рдкреНрд░рд╛рдЪреАрди рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгрд┐рдпрд╛рдВ, рд╕реБрдкрд░-рдХрд▓рд╛рдХреГрддрд┐рдпрд╛рдВ, рдорд╣рд╛рдХрд╛рд╡реНрдп рд▓рдбрд╝рд╛рдИ ... рд╣рд╛рд▓рд╛рдВрдХрд┐ рдмрд╛рдж рдореЗрдВ рдЫреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ)ред рдореИрдВ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рджреБрдирд┐рдпрд╛ рдХреЛ рдЬреАрд╡рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛, рддрд╛рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рд┐рддреНрд░ рдХреЛ рдорд┐рд▓реЗ (рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ рдЫреЛрдЯреА рд╕реА рднреА) рдХреА рдЕрдкрдиреА рдХрд╣рд╛рдиреА рдФрд░ рдкреНрд░реЗрд░рдгрд╛ рдереА, рдХрд┐ рдЦреЗрд▓ рдпрд╛рдВрддреНрд░рд┐рдХреА рдХреЗ рддрддреНрд╡ рджреБрдирд┐рдпрд╛ рдХреЗ рдирд┐рдпрдореЛрдВ рдореЗрдВ рдлрд┐рдЯ рд╣реЛрддреЗ рд╣реИрдВ, рдХрд┐ рдирд╛рдпрдХреЛрдВ рдХрд╛ рд╡рд┐рдХрд╛рд╕ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рд╣реБрдЖ, рдХрд┐ рд╕реНрдерд╛рдиреЛрдВ рдореЗрдВ рджреБрд╢реНрдордиреЛрдВ рдФрд░ рдмрд╛рдзрд╛рдУрдВ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рддрд╛рд░реНрдХрд┐рдХ рд░реВрдк рд╕реЗ рд╕реНрдерд╛рди рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рд╣реА рдЙрдЪрд┐рдд рдереАред ... рдФрд░ рдЗрд╕реА рддрд░рд╣ред рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдЗрд╕ рдЗрдЪреНрдЫрд╛ рдиреЗ рдПрдХ рдХреНрд░реВрд░ рдордЬрд╛рдХ рдЦреЗрд▓рд╛, рд╡рд┐рдХрд╛рд╕ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдмрд╣реБрдд рдзреАрдорд╛ рдХрд░ рджрд┐рдпрд╛, рдФрд░ рдЧреЗрдорд┐рдВрдЧ рд╕рдореНрдореЗрд▓рдиреЛрдВ рд╕реЗ рдкреНрд░рд╕реНрдерд╛рди рдХрд░рдирд╛ рд╣рдореЗрд╢рд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рдерд╛ред рдлрд┐рд░ рднреА, рдЕрдВрддрд┐рдо рдЙрддреНрдкрд╛рдж рд╕реЗ рд╕рдВрддреБрд╖реНрдЯрд┐ рдЕрдзрд┐рдХ рдкрд░рд┐рдорд╛рдг рдХрд╛ рдПрдХ рдЖрджреЗрд╢ рдирд┐рдХрд▓рд╛ред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рд╕рдмрдХреЗ рд╕рд╛рде рдореИрдВ рдХреНрдпрд╛ рдХрд╣рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ? рдПрдХ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕реЛрдЪрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рджрд┐рд▓рдЪрд╕реНрдк рдХрдерд╛рдирдХ рдЗрддрдирд╛ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЖрдкрдХрд╛ рдЦреЗрд▓ рдЗрд╕рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рд╕реЗ рдкреАрдбрд╝рд┐рдд рдирд╣реАрдВ рд╣реЛрдЧрд╛: рд╕рдмрд╕реЗ рдЕрдЪреНрдЫреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдЦрд┐рд▓рд╛рдбрд╝реА рдЗрд╕рдХрд╛ рдЖрдирдВрдж рд▓реЗрдВрдЧреЗ, рд╕рдмрд╕реЗ рдЦрд░рд╛рдм рд░реВрдк рд╕реЗ рд╡реЗ рдмрд╕ рдЗрд╕реЗ рдЕрдирджреЗрдЦрд╛ рдХрд░реЗрдВрдЧреЗред рдФрд░ рдЬреЛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрддреНрд╕рд╛рд╣реА рд╣реИрдВ рд╡реЗ рдЖрдкрдХреЗ рдЦреЗрд▓ рдХреЛ рдХреБрдЫ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдЦрд╛рдорд┐рдпреЛрдВ рдХреЛ рднреА рдорд╛рдл рдХрд░ рджреЗрдВрдЧреЗ, рдмрд╕ рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХрд╣рд╛рдиреА рдХреИрд╕реЗ рд╕рдорд╛рдкреНрдд рд╣реЛрддреА рд╣реИред</font></font><br><br><h2>  рдЖрдЧреЗ рдХреНрдпрд╛ рд╣реИ? </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЧреЗ рдХреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд╕рдорд╛рдкреНрдд рд╣реЛрддреА рд╣реИ рдФрд░ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЧреЗрдо рдбрд┐рдЬрд╝рд╛рдЗрди</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ </font><font style="vertical-align: inherit;">ред рдЕрдм рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдХрд╛ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ, рд╕реНрдерд╛рдиреЛрдВ, рджреБрд╢реНрдордиреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЛрдЪрдиреЗ рдХрд╛ рд╕рдордп рд╣реИ - рдЖрдк рд╕рдордЭрддреЗ рд╣реИрдВ, рдпрд╣ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЦрд░рд╛рдм рд╣реИред рдпрджрд┐ рдЖрдк рдЕрднреА рднреА рдЕрдХреЗрд▓реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдореИрдВ рдЖрдкрдХреЛ рдмрдзрд╛рдИ рджреЗрддрд╛ рд╣реВрдВ - рдЖрдк рдЙрд╕ рдордВрдЪ рдкрд░ рдкрд╣реБрдВрдЪ рдЧрдП рд╣реИрдВ, рдЬрд┐рд╕ рдкрд░ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЦреЗрд▓ рдкрд░рд┐рдпреЛрдЬрдирд╛рдПрдВ рджреМрдбрд╝рддреА рд╣реИрдВред рдмрдбрд╝реЗ рдПрдПрдП рд╕реНрдЯреВрдбрд┐рдпреЛ рдореЗрдВ, рд╡рд┐рд╢реЗрд╖ рд▓реЛрдЧ рдбрд┐рдЬрд╛рдЗрдирд░реЛрдВ рдФрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд░рд╛рдЗрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рдЗрд╕рдХреЗ рд▓рд┐рдП рдкреИрд╕рд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ - рдЙрдирдХреЗ рдкрд╛рд╕ рдмрд╕ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣реАрдВ рдирд╣реАрдВ рд╣реИред рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдмрд╣реБрдд рд╕рд╛рд░реЗ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВ: рдЯрд╣рд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рдЦрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╕рд╛рдорд╛рдиреНрдп рддрд░реАрдХреЗ рд╕реЗ рд╕реЛрдиреЗ рдХреЗ рд▓рд┐рдП - рд▓реЗрдХрд┐рди рдпрд╣ рдХреНрдпрд╛ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рдВрдЪрд┐рдд рдЕрдиреБрднрд╡ рдФрд░ рдЬреНрдЮрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдирдИ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреАред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдЕрднреА рднреА рдпрд╣рд╛рдВ рд╣реИрдВ рдФрд░ рд╣рд░ рдХреАрдордд рдкрд░ рдЬрд╛рд░реА рд░рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдХрдард┐рдирд╛рдЗрдпреЛрдВ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд░рд╣реЗрдВред рд╕рдордп рдХреА рдХрдореА, рдЖрд▓рд╕реНрдп, рд░рдЪрдирд╛рддреНрдордХ рдкреНрд░реЗрд░рдгрд╛ рдХреА рдХрдореА - рдХреБрдЫ рд▓рдЧрд╛рддрд╛рд░ рдЖрдкрдХреЛ рд╡рд┐рдЪрд▓рд┐рдд рдХрд░ рджреЗрдЧрд╛ред рдЗрди рд╕рднреА рдмрд╛рдзрд╛рдУрдВ рдХреЛ рджреВрд░ рдХрд░рдирд╛ рдЖрд╕рд╛рди рдирд╣реАрдВ рд╣реИ (рдлрд┐рд░ рд╕реЗ, рдЗрд╕ рд╡рд┐рд╖рдп рдкрд░ рдХрдИ рд▓реЗрдЦ рд▓рд┐рдЦреЗ рдЧрдП рд╣реИрдВ), рд▓реЗрдХрд┐рди рдпрд╣ рд╕рдВрднрд╡ рд╣реИред рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдореИрдВ рдЖрдкрдХреЛ рд╕рд▓рд╛рд╣ рджреЗрддрд╛ рд╣реВрдВ рдХрд┐ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдЖрдЧреЗ рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреА рд╕рд╛рд╡рдзрд╛рдиреАрдкреВрд░реНрд╡рдХ рдпреЛрдЬрдирд╛ рдмрдирд╛рдПрдВред рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рд╣рдо рдЕрдкрдиреА рдЦреБрд╢реА рдХреЗ рд▓рд┐рдП рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдкреНрд░рдХрд╛рд╢рдХ рд╣рдореЗрдВ рдзрдХреНрдХрд╛ рдирд╣реАрдВ рджреЗрддреЗ рд╣реИрдВ, рдХреЛрдИ рднреА рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдордп рд╕реАрдорд╛ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреА рдорд╛рдВрдЧ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ - рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдмрд╣реБрдд рдЬрд▓реНрджрдмрд╛рдЬреА рдХреЗ рдмрд┐рдирд╛ рд╡реНрдпрд╛рдкрд╛рд░ рдХрд░рдиреЗ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИред рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ "рд░реЛрдбрдореИрдк" рдмрдирд╛рдПрдВ, рдореБрдЦреНрдп рдЪрд░рдгреЛрдВ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░реЗрдВ рдФрд░ (рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╕рд╛рд╣рд╕ рд╣реИ) рдЙрдирдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рд▓рд┐рдП рдЕрдиреБрдорд╛рдирд┐рдд рд╢рдмреНрджред рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдПрдХ рдиреЛрдЯрдмреБрдХ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ (рдЖрдк рдЗрд▓реЗрдХреНрдЯреНрд░реЙрдирд┐рдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ) рдФрд░ рдЗрд╕рдореЗрдВ рдЙрдардиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рдЪрд╛рд░реЛрдВ рдХреЛ рд▓рдЧрд╛рддрд╛рд░ рд▓рд┐рдЦреЗрдВ (рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЪрд╛рдирдХ рд░рд╛рдд рдХреЗ рдмреАрдЪ рдореЗрдВ рдЬрд╛рдЧрдирд╛)редрдЯреЗрдмрд▓ рдХреЗ рд╕рд╛рде рдЕрдкрдиреА рдкреНрд░рдЧрддрд┐ рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░реЗрдВ (</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдРрд╕реЗ</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) рдпрд╛ рдЕрдиреНрдп рд╕рд╣рд╛рдпрдХ рдЙрдкрдХрд░рдгред рдкреНрд░рд▓реЗрдЦрди рд╢реБрд░реВ рдХрд░реЗрдВ: рджреЛрдиреЛрдВ рдмрд╛рд╣рд░реА, рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рд╡рд┐рдХреА</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), рдкреНрд░рд╢рдВрд╕рдХреЛрдВ рдХреЗ рднрд╡рд┐рд╖реНрдп рдХреЗ рд╡рд┐рд╢рд╛рд▓ рд╕рдореБрджрд╛рдп рдХреЗ рд▓рд┐рдП, рдФрд░ рдЖрдВрддрд░рд┐рдХ, рдЦреБрдж рдХреЗ рд▓рд┐рдП (рдореИрдВ рд▓рд┐рдВрдХ рд╕рд╛рдЭрд╛ рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛) - рдореЗрд░рд╛ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХрд░реЛ, рдПрдХ рдорд╣реАрдиреЗ рдХреЗ рдмреНрд░реЗрдХ рдХреЗ рдмрд╛рдж рдЗрд╕рдХреЗ рдмрд┐рдирд╛, рдЖрдкрдХреЛ рдпрд╣ рдпрд╛рдж рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рдФрд░ рдХреИрд╕реЗ рдХрд┐рдпрд╛ред рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЕрдкрдиреЗ рдЦреЗрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рд╕реЗ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде рд▓рд┐рдЦреЗрдВ, рдмрд╕ рдЦреЗрд▓ рдХреЛ рд▓рд┐рдЦрдирд╛ рдпрд╛рдж рд░рдЦреЗрдВред рдореИрдВрдиреЗ рдмреБрдирд┐рдпрд╛рджреА рд╡рд┐рдХрд▓реНрдк рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рдХрд┐рдП, рд▓реЗрдХрд┐рди рдореИрдВ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рд▓рд╛рд╣ рдирд╣реАрдВ рджреЗрддрд╛ - рдкреНрд░рддреНрдпреЗрдХ рд╡реНрдпрдХреНрддрд┐ рдЕрдкрдиреЗ рд▓рд┐рдП рдирд┐рд░реНрдгрдп рд▓реЗрддрд╛ рд╣реИ рдХрд┐ рдЙрд╕рдХреА рдХрд╛рд░реНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рдирд╛ рдЙрд╕рдХреЗ рд▓рд┐рдП рдХрд┐рддрдирд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА, рдЖрдк рдЦреЗрд▓ рд╕рдВрддреБрд▓рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?"</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рддрдереНрдп рдХреЗ рд▓рд┐рдП рдЦреБрдж рдХреЛ рддреБрд░рдВрдд рддреИрдпрд╛рд░ рдХрд░реЗрдВ рдХрд┐ рдкрд╣рд▓реА рдмрд╛рд░ рд╕рд╣реА рдЧреЗрдо рдмрдирд╛рдиреЗ рд╕реЗ рдХрд╛рдо рдирд╣реАрдВ рдЪрд▓реЗрдЧрд╛ред рдПрдХ рдХрд╛рдордХрд╛рдЬреА рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдЕрдЪреНрдЫрд╛ рд╣реИ - рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдпрд╣ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд╡реНрдпрд╡рд╣рд╛рд░реНрдпрддрд╛ рдХреЛ рджрд┐рдЦрд╛рдПрдЧрд╛, рдЖрдкрдХреЛ рдЖрд╢реНрд╡рд╕реНрдд рдпрд╛ рдирд┐рд░рд╛рд╢ рдХрд░реЗрдЧрд╛ рдФрд░ рдПрдХ рдмрд╣реБрдд рд╣реА рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкреНрд░рд╢реНрди рдХрд╛ рдЙрддреНрддрд░ рджреЗрдЧрд╛: "рдХреНрдпрд╛ рдпрд╣ рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ?"ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╡рд╣ рдХрдИ рдЕрдиреНрдп рд╕рд╡рд╛рд▓реЛрдВ рдХреЗ рдЬрд╡рд╛рдм рдирд╣реАрдВ рджреЗрдВрдЧреЗ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдореБрдЦреНрдп рдПрдХ рд╣реИ, рд╢рд╛рдпрдж: "рдХреНрдпрд╛ рд▓рдВрдмреА рдЕрд╡рдзрд┐ рдореЗрдВ рдореЗрд░рд╛ рдЦреЗрд▓ рдЦреЗрд▓рдирд╛ рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛрдЧрд╛?" рдЗрд╕ рд╡рд┐рд╖рдп рдкрд░ рд╕рд┐рджреНрдзрд╛рдВрдд рдФрд░ рд▓реЗрдЦ (рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ, рдлрд┐рд░ рд╕реЗ) рдХреА рдПрдХ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рд╣реИред рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдЦреЗрд▓ рдордзреНрдпрдо рд░реВрдк рд╕реЗ рдХрдард┐рди рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдПрдХ рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рдЦреЗрд▓ рдЦрд┐рд▓рд╛рдбрд╝реА рдХреЛ рдЪреБрдиреМрддреА рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред рджреВрд╕рд░реА рдУрд░, рдпрджрд┐ рдЬрдЯрд┐рд▓рддрд╛ рдирд┐рд╖реЗрдзрд╛рддреНрдордХ рд╣реИ, рддреЛ рдХреЗрд╡рд▓ рдХрдЯреНрдЯрд░ рдХрдЯреНрдЯрд░ рдЦрд┐рд▓рд╛рдбрд╝реА рдпрд╛ рдРрд╕реЗ рд▓реЛрдЧ рдЬреЛ рдХрд┐рд╕реА рдХреЛ рдХреБрдЫ рд╕рд╛рдмрд┐рдд рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЦреЗрд▓ рджрд░реНрд╢рдХреЛрдВ рд╕реЗ рдмрдиреЗ рд░рд╣реЗрдВрдЧреЗред рдЦреЗрд▓ рдХрд╛рдлреА рд╡рд┐рд╡рд┐рдз рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ - рд▓рдХреНрд╖реНрдп рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рд╡рд┐рдХрд▓реНрдк рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ,рддрд╛рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдЦрд┐рд▓рд╛рдбрд╝реА рдЕрдкрдиреА рдкрд╕рдВрдж рдХреЗ рд╣рд┐рд╕рд╛рдм рд╕реЗ рдПрдХ рд╡рд┐рдХрд▓реНрдк рдЪреБрди рд▓реЗред рдкрд╛рд╕рд┐рдВрдЧ рдХреА рдПрдХ рд░рдгрдиреАрддрд┐ рдмрд╛рдХреА рдкрд░ рд╣рд╛рд╡реА рдирд╣реАрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП, рдЕрдиреНрдпрдерд╛ рд╡реЗ рдХреЗрд╡рд▓ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ ... рдФрд░ рдЗрд╕реА рддрд░рд╣ред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рдЦреЗрд▓ рдХреЛ рд╕рдВрддреБрд▓рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдпрд╣ рдмреЛрд░реНрдб рдЧреЗрдо рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕рдЪ рд╣реИ, рдЬрд╣рд╛рдВ рдирд┐рдпрдореЛрдВ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдФрдкрдЪрд╛рд░рд┐рдХ рд░реВрдк рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдпрд╣ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИ? рдореБрдЭреЗ рдХреЛрдИ рдкрддрд╛ рдирд╣реАрдВ рд╣реИред рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ рдЧрдгрд┐рдд рдорд┐рддреНрд░ рдирд╣реАрдВ рд╣реИ рдЬреЛ рдПрдХ рдЧрдгрд┐рддреАрдп рдореЙрдбрд▓ рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИ (рдореИрдВрдиреЗ рдЗрд╕реЗ рджреЗрдЦрд╛ рд╣реИ, рддреЛ рд╡реЗ рдРрд╕рд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВ) рдФрд░ рдЖрдк рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╕рдордЭрддреЗ рд╣реИрдВ (рд▓реЗрдХрд┐рди рд╣рдо рд╕рдордЭ рдирд╣реАрдВ рдкрд╛рддреЗ рд╣реИрдВ), рддреЛ рдПрдХрдорд╛рддреНрд░ рддрд░реАрдХрд╛ рдпрд╣ </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реИ рдХрд┐ </font></font></s> <font style="vertical-align: inherit;"><i><font style="vertical-align: inherit;">рдЦреЗрд▓рдиреЗ </font></i><s><font style="vertical-align: inherit;">рдХреЗ рдЕрдВрддрд░реНрдЬреНрдЮрд╛рди рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░реЗрдВред</font></s></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдкрд╣рд▓реЗ рдЧреЗрдо рдЦреБрдж рдЦреЗрд▓рд┐рдПред рдЬрдм рдЖрдк рдердХ рдЬрд╛рддреЗ рд╣реИрдВ - рдЕрдкрдиреА рдкрддреНрдиреА рдХреЛ рдЦреЗрд▓рдиреЗ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рджреЗрдВред рддрд▓рд╛рдХ рдХреЗ рдмрд╛рдж, рд╕рдбрд╝рдХ рдкрд░ рдЕрдиреНрдп рд░рд┐рд╢реНрддреЗрджрд╛рд░реЛрдВ, рджреЛрд╕реНрддреЛрдВ, рдкрд░рд┐рдЪрд┐рддреЛрдВ, рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рд▓реЛрдЧреЛрдВ рдХреЛ рдЦреЗрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдордВрддреНрд░рд┐рдд рдХрд░реЗрдВред рдЬрдм рдЖрдк рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдХреЗрд▓реЗ рд░рд╣ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╡рд┐рдзрд╛рдирд╕рднрд╛ рдХреЛ рдЗрдВрдЯрд░рдиреЗрдЯ рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВред рд▓реЛрдЧ рд░реБрдЪрд┐ рд▓реЗрдВрдЧреЗ, рдЦреЗрд▓рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдФрд░ рдЖрдк рдЙрдиреНрд╣реЗрдВ рдЬрд╡рд╛рдм рджреЗрдВрдЧреЗ: "рдЖрдк рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛!"ред рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдХреЛрдИ рдЖрдкрдХреЗ рд╕рдкрдиреЗ рдХреЛ рдЙрд╕реА рддрд░рд╣ рд╕реЗ рдкрд╕рдВрдж рдХрд░реЗрдЧрд╛ рдЬреЛ рдЖрдк рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЖрдкрдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ - рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЖрдкрдХреЛ рд╕рдорд╛рди рд╡рд┐рдЪрд╛рд░ рд╡рд╛рд▓реЗ рд▓реЛрдЧ рдпрд╛ рдХрдо рд╕реЗ рдХрдо рдПрдХ рд╕рд╣рд╛рдпрддрд╛ рд╕рдореВрд╣ рдорд┐рд▓реЗрдЧрд╛ (рдЖрдкрдХреЛ рдХреНрдпрд╛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдореИрдВрдиреЗ рдпрд╣ рд▓реЗрдЦ рдХреНрдпреЛрдВ рд▓рд┐рдЦрд╛ рд╣реИ?) (рд╣реЗрд╣реЗ)ред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рддрд░рдл рдордЬрд╛рдХ рдХрд░рддреЗ рд╣реБрдП, рдореИрдВ рд╣рдорд╛рд░реА рдХрд╛рдордирд╛ рдХрд░рддрд╛ рд╣реВрдВ ... рдЖрдк рд╕рднреА рд╕рдлрд▓ рд╣реЛрдВред </font><font style="vertical-align: inherit;">рдФрд░ рдкрдврд╝реЗрдВ (рдХрд┐рд╕рдиреЗ рд╕реЛрдЪрд╛ рд╣реЛрдЧрд╛!) - рдЧреЗрдо рдбрд┐рдЬрд╝рд╛рдЗрди рдФрд░ рдмрд╣реБрдд рдХреБрдЫ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВред </font><font style="vertical-align: inherit;">рд╣рдордиреЗ рдЬрд┐рди рдореБрджреНрджреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХреА рд╣реИ, рд╡реЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рддрд░рд╣ рд╕реЗ рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рд▓реЗрдЦ рдФрд░ рд╕рд╛рд╣рд┐рддреНрдп рдореЗрдВ рдХрд╡рд░ рдХрд┐рдП рдЧрдП рд╣реИрдВ (рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрджрд┐ рдЖрдк рдЕрднреА рднреА рдпрд╣рд╛рдВ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдЧреНрд░рд╣ рдХрд░рдирд╛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЕрдирд╛рд╡рд╢реНрдпрдХ рд╣реИ)ред </font><font style="vertical-align: inherit;">рдЕрдкрдиреЗ рдЗрдВрдкреНрд░реЗрд╢рди рд╕рд╛рдЭрд╛ рдХрд░реЗрдВ, рдордВрдЪреЛрдВ рдкрд░ рд╕рдВрд╡рд╛рдж рдХрд░реЗрдВ - рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдореБрдЭреЗ рдмреЗрд╣рддрд░ рдФрд░ рдмреЗрд╣рддрд░ рдЬрд╛рдирддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЖрд▓рд╕реА рдордд рдмрдиреЛ рдФрд░ рдЖрдк рд╕рдлрд▓ рд╣реЛрдВрдЧреЗред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдЖрд╢рд╛рд╡рд╛рджреА рдиреЛрдЯ рдкрд░, рдореБрдЭреЗ рдЖрдкрдХреА рдЫреБрдЯреНрдЯреА рд▓реЗрдиреА рдЪрд╛рд╣рд┐рдПред </font><font style="vertical-align: inherit;">рдзреНрдпрд╛рди рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рд╕рднреА рдХрд╛ рдзрдиреНрдпрд╡рд╛рджред </font><font style="vertical-align: inherit;">рдЬрд▓реНрдж рдорд┐рд▓рддреЗ рд╣реИрдВ! </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"рдИ! </font><font style="vertical-align: inherit;">рдЬреЛ рдЖрдк рджреЗрдЦрддреЗ рд╣реИрдВ? </font><font style="vertical-align: inherit;">рдЕрдм рдпрд╣ рд╕рдм рдореЛрдмрд╛рдЗрд▓ рдлреЛрди рдкрд░ рдХреИрд╕реЗ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛рдП? </font><font style="vertical-align: inherit;">рдХреНрдпрд╛ рдореИрдВрдиреЗ рд╡реНрдпрд░реНрде рдкреНрд░рддреАрдХреНрд╖рд╛ рдХреА, рдпрд╛ рдХреНрдпрд╛? "</font></font></i> <br><br><h2> <font color="#0474a0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрд╕рдВрд╣рд╛рд░ред </font><font style="vertical-align: inherit;">рдПрдВрдбреНрд░реЙрдпрдб</font></font></font> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдВрдбреНрд░реЙрдЗрдб рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХреЗ рд╕рд╛рде рд╣рдорд╛рд░реЗ рдЧреЗрдо рдЗрдВрдЬрди рдХреЗ рдПрдХреАрдХрд░рдг рдХрд╛ рд╡рд░реНрдгрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрдХреНрд╖рд╛ рдХреЛ рдЕрдХреЗрд▓рд╛ рдЫреЛрдбрд╝ рджреЗрдВ </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдПрдХ рд╕рдорд╛рди, рд▓реЗрдХрд┐рди рдмрд╣реБрдд рд╕рд░рд▓ рд╡рд░реНрдЧ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ </font></font><code>MainMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдирд╛рдо рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ, рдпрд╣ рдЖрд╡реЗрджрди рдХреЗ рдореБрдЦреНрдп рдореЗрдиреВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХрд╛ рдЗрд░рд╛рджрд╛ рд╣реИ рдФрд░ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдкрд╣рд▓реА рдХрдХреНрд╖рд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрд╛рддрдЪреАрдд рдХрд░ рд░рд╣рд╛ рд╣реИред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдВрд╕реЛрд▓ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ, рдпрд╣ рдРрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/fx/ov/q7/fxovq7xubhonlcjjwziyvhfl_6g.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдХрдХреНрд╖рд╛ рдХреА рддрд░рд╣ </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдпрд╣ рдПрдХ рдЕрдирдВрдд рд▓реВрдк рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдкрд░ рдПрдХ рд╕реНрдХреНрд░реАрди рдЦреАрдВрдЪреА рдЬрд╛рддреА рд╣реИ рдФрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдПрдХ рдЖрджреЗрд╢ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдХреЗрд╡рд▓ рдпрд╣рд╛рдБ рдХреЛрдИ рдЬрдЯрд┐рд▓ рддрд░реНрдХ рдирд╣реАрдВ рд╣реИ рдФрд░ рдпреЗ рдЖрджреЗрд╢ рдмрд╣реБрдд рдЫреЛрдЯреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╣рдо рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рдПрдХ рдЪреАрдЬ рдХреЛ рд▓рд╛рдЧреВ рдХрд░ рд░рд╣реЗ рд╣реИрдВ - "рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВ"ред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЦреНрдп рдореЗрдиреВ рдХреЗ рд▓рд┐рдП рдЧрддрд┐рд╡рд┐рдзрд┐ рдЪрд╛рд░реНрдЯ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/0_/xq/b5/0_xqb5sblm16brzqyrpibavvxco.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЖрд╕рд╛рди рд╣реИ, рд╣реИ рдирд╛? </font></font> рдЙрд╕ рдФрд░ рднрд╛рд╖рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВред<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХреЛрдб рднреА рдкрд░рд┐рдорд╛рдг рд╕рд░рд▓ рдХрд╛ рдПрдХ рдЖрджреЗрд╢ рд╣реИред </font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainMenu</span></span></span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> renderer: MenuRenderer, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> interactor: MenuInteractor ) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actions = ActionList.EMPTY <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">start</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Audio.playMusic(Music.MENU_MAIN) actions = ActionList() actions.add(Action.Type.NEW_ADVENTURE) actions.add(Action.Type.CONTINUE_ADVENTURE, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) actions.add(Action.Type.MANUAL, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) actions.add(Action.Type.EXIT) processCycle() } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processCycle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { renderer.drawMainMenu(actions) <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (interactor.pickAction(actions).type) { Action.Type.NEW_ADVENTURE -&gt; TODO() Action.Type.CONTINUE_ADVENTURE -&gt; TODO() Action.Type.MANUAL -&gt; TODO() Action.Type.EXIT -&gt; { Audio.stopMusic() Audio.playSound(Sound.LEAVE) renderer.clearScreen() Thread.sleep(<span class="hljs-number"><span class="hljs-number">500</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> AssertionError(<span class="hljs-string"><span class="hljs-string">"Should not happen"</span></span>) } } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрд╢рди рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </font></font><code>MenuRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>MenuInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЛ рдкрд╣рд▓реЗ рджреЗрдЦрд╛ рдЧрдпрд╛ рдерд╛, рдЙрд╕реА рддрд░рд╣ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MenuRenderer</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Renderer { fun drawMainMenu</span></span></span></span>(actions: ActionList) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Interactor</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╣реА рд╕рдордЭ рдЪреБрдХреЗ рд╣реИрдВ, рд╣рдордиреЗ рдЬрд╛рдирдмреВрдЭрдХрд░ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реЗ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЛ рдЕрд▓рдЧ рдХрд░ рджрд┐рдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЕрдм рд╣рдореЗрдВ рдмрд╕ рдЬрд░реВрд░рдд рд╣реИ рдХрд┐ рд╣рдо </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cli</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рдПрдХ рдирдП рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд╕рд╛рде </font><font style="vertical-align: inherit;">рдмрджрд▓реЗрдВ </font><font style="vertical-align: inherit;">(рдЗрд╕реЗ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Droid</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрд╣рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">), </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Core</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Project рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реБрдП </font><font style="vertical-align: inherit;">ред </font><font style="vertical-align: inherit;">рдЪрд▓реЛ рдХрд░рддреЗ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░рди рдПрдВрдбреНрд░реЙрдЗрдб рд╕реНрдЯреВрдбрд┐рдпреЛ (рдЖрдорддреМрд░ рдкрд░ рдПрдВрдбреНрд░реЙрдЗрдб рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЗрд╕рдореЗрдВ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ), рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ, рд╕рднреА рдЕрдирд╛рд╡рд╢реНрдпрдХ рдорд╛рдирдХ рдЯрд┐рдирд╕реЗрд▓ рдХреЛ рд╣рдЯрд╛ рджреЗрдВ рдФрд░ рдХреЛрдЯрд▓рд┐рди рднрд╛рд╖рд╛ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рд╕рдорд░реНрдерди рдЫреЛрдбрд╝ рджреЗрдВред </font><font style="vertical-align: inherit;">рд╣рдо </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрд░</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ рднреА рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">, рдЬреЛ рд╣рдорд╛рд░реА рдорд╢реАрди рдХреЗ рд╕реНрдерд╛рдиреАрдп рдорд╛рд╡реЗрди рднрдВрдбрд╛рд░ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИред</font></font><br><br><pre> <code class="lua hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'com.android.application'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> android { compileSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> defaultConfig { applicationId <span class="hljs-string"><span class="hljs-string">"my.company.dice"</span></span> minSdkVersion <span class="hljs-number"><span class="hljs-number">14</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">28</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName <span class="hljs-string"><span class="hljs-string">"1.0"</span></span> } } dependencies { implementation <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"</span></span> implementation <span class="hljs-string"><span class="hljs-string">"my.company:dice-core:1.0"</span></span> }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдХреЛрдИ рднреА рд╣рдорд╛рд░реА рдирд┐рд░реНрднрд░рддрд╛ рдирд╣реАрдВ рджреЗрдЦреЗрдЧрд╛ - рдЖрдкрдХреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рддреЗ рд╕рдордп рд╕реНрдерд╛рдиреАрдп рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА (mavenLocal) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЗрдВрдЧрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред</font></font><br><br><pre> <code class="lua hljs">buildscript { ext.kotlin_version = <span class="hljs-string"><span class="hljs-string">'1.3.20'</span></span> repositories { google() jcenter() mavenLocal() } dependencies { classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:3.3.0'</span></span> classpath <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"</span></span> } } allprojects { repositories { google() jcenter() mavenLocal() } }</code> </pre><br>  ,        ,   тАФ  .  ,   ,    : <code>SoundPlayer</code> , <code>MusicPlayer</code> , <code>MenuInteractor</code> ( <code>GameInteractor</code> ), <code>MenuRenderer</code> ( <code>GameRenderer</code> )  <code>StringLoader</code> ,    ,    .    ,          . <br><br>           (, ,    ) Android тАФ      <code>Canvas</code> .      -   <code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдпрд╣ рд╣рдорд╛рд░рд╛ "рдХреИрдирд╡рд╛рд╕" рд╣реЛрдЧрд╛ред </font><font style="vertical-align: inherit;">рдЗрдирдкреБрдЯ рдХреЗ рд╕рд╛рде, рдпрд╣ рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреАрдмреЛрд░реНрдб рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рд╕реНрдХреНрд░реАрди рдХреЗ рдХреБрдЫ рд╣рд┐рд╕реНрд╕реЛрдВ рдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдирдкреБрдЯ рдХреЛ рдХрдорд╛рдВрдб рдХрд╛ рдЗрдирдкреБрдЯ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рд╣реА рд╡рд╛рд░рд┐рд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдЗрд╕ рддрд░рд╣, рд╡рд╣ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдФрд░ рдЧреЗрдо рдЗрдВрдЬрди рдХреЗ рдмреАрдЪ рдордзреНрдпрд╕реНрде рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░реЗрдЧрд╛ (рд╕рд┐рд╕реНрдЯрдо рдХрдВрд╕реЛрд▓ рдЗрд╕ рддрд░рд╣ рдХреЗ рдордзреНрдпрд╕реНрде рдХреЗ рд░реВрдк рдореЗрдВ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ) рдХреЗ рд╕рдорд╛рдиред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЗрдП рд╣рдорд╛рд░реЗ рджреГрд╢реНрдп рдХреЗ рд▓рд┐рдП рдореБрдЦреНрдп рдЧрддрд┐рд╡рд┐рдзрд┐ рдмрдирд╛рдПрдВ рдФрд░ рдЗрд╕реЗ рдШреЛрд╖рдгрд╛рдкрддреНрд░ рдореЗрдВ рд▓рд┐рдЦреЗрдВред</font></font><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my.company.dice"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:icon</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@mipmap/ic_launcher"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:label</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@string/app_name"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:theme</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@style/AppTheme"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">".ui.MainActivity"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:screenOrientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sensorLandscape"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:configChanges</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"orientation|keyboardHidden|screenSize"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.LAUNCHER"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.MAIN"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">activity</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">application</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">manifest</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдкрд░рд┐рджреГрд╢реНрдп рдЕрднрд┐рд╡рд┐рдиреНрдпрд╛рд╕ рдореЗрдВ рдЧрддрд┐рд╡рд┐рдзрд┐ рдХреЛ рдареАрдХ рдХрд░рддреЗ рд╣реИрдВ - рдЬреИрд╕рд╛ рдХрд┐ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЕрдиреНрдп рдЦреЗрд▓реЛрдВ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдЪрд┐рддреНрд░ рдмрдирд╛рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдирд╣реАрдВ рд╣реЛрдВрдЧреЗред </font><font style="vertical-align: inherit;">рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдЗрд╕реЗ рдореБрдЦреНрдп рд╡рд┐рд╖рдп рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реБрдП, рдбрд┐рд╡рд╛рдЗрд╕ рдХреА рд╕рдВрдкреВрд░реНрдг рд╕реНрдХреНрд░реАрди рддрдХ рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд░реЗрдВрдЧреЗред</font></font><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AppTheme"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">parent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android:Theme.Black.NoTitleBar.Fullscreen"</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдЬрдм рд╕реЗ рд╣рдо рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реБрдП рд╣реИрдВ, рд╣рдо </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд▓реА</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗ </font><font style="vertical-align: inherit;">рд╕реНрдерд╛рдиреАрдп рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЛ </font><font style="vertical-align: inherit;">рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ </font><font style="vertical-align: inherit;">, рдЙрдиреНрд╣реЗрдВ рд╡рд╛рдВрдЫрд┐рдд рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд▓рд╛рддреЗ рд╣реИрдВ:</font></font><br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_new_adventure_key"</span></span></span><span class="hljs-tag">&gt;</span></span>N<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_new_adventure_name"</span></span></span><span class="hljs-tag">&gt;</span></span>ew adventure<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_continue_adventure_key"</span></span></span><span class="hljs-tag">&gt;</span></span>C<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_continue_adventure_name"</span></span></span><span class="hljs-tag">&gt;</span></span>ontinue adventure<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_manual_key"</span></span></span><span class="hljs-tag">&gt;</span></span>M<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_manual_name"</span></span></span><span class="hljs-tag">&gt;</span></span>anual<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_exit_key"</span></span></span><span class="hljs-tag">&gt;</span></span>X<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"action_exit_name"</span></span></span><span class="hljs-tag">&gt;</span></span>Exit<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╛рде рд╣реА рдореБрдЦреНрдп рдореЗрдиреВ рдореЗрдВ рдкреНрд░рдпреБрдХреНрдд рдзреНрд╡рдирд┐рдпреЛрдВ рдФрд░ рд╕рдВрдЧреАрдд рдХреА рдлрд╛рдЗрд▓реЗрдВ (рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рдХрд╛рд░ рдХреА) </font></font><code>/assets/sound/leave.wav</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>/assets/music/menu_main.mp3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд░рдорд╢рдГ </font><font style="vertical-align: inherit;">рдЙрдиреНрд╣реЗрдВ рдЕрдВрджрд░ рд░рдЦрдХрд░ </font><font style="vertical-align: inherit;">ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рд╣рдордиреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреА рдЫрдВрдЯрдиреА рдХреА, рддреЛ рдбрд┐рдЬрд╛рдЗрди рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЙрддрд░рдиреЗ рдХрд╛ рд╕рдордп рдерд╛ (рд╣рд╛рдБ, рдлрд┐рд░ рд╕реЗ)ред </font><font style="vertical-align: inherit;">рдХрдВрд╕реЛрд▓ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдПрдВрдбреНрд░реЙрдЗрдб рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреА рдЕрдкрдиреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ, рдЬреЛ рд╣рдореЗрдВ рд╡рд┐рд╢рд┐рд╖реНрдЯ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдФрд░ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░рддреА рд╣реИрдВред</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрдХреНрд╖рд╛ рдФрд░ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдЖрд░реЗрдЦ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/xb/m4/uc/xbm4ucar6ewumegpof3hr53c0a4.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд░реБрдХреЛ, рдмреЗрд╣реЛрд╢ рдордд рдХрд░реЛ, рдЕрдм рдореИрдВ рд╕рдм рдХреБрдЫ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдмрддрд╛рдКрдВрдЧрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рд╢реБрд░реВ рдХрд░реЗрдВрдЧреЗ, рд╢рд╛рдпрдж, рд╕рдмрд╕реЗ рдЬрдЯрд┐рд▓ рдПрдХ рдХреЗ рд╕рд╛рде - рд╡рд░реНрдЧ </font></font><code>DiceSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдмрд╣реБрдд рд╡рд╛рд░рд┐рд╕ </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд┐рд╕реЗ рд╣рдорд╛рд░реЗ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕реНрд╡рддрдВрддреНрд░ рднрд╛рдЧреЛрдВ рдХреЛ рдПрдХ рд╕рд╛рде рдмрд╛рдВрдзрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ (рдпрджрд┐ рдЖрдк рдЪрд╛рд╣реЗрдВ, рддреЛ рдЖрдк рдЗрд╕реЗ рдХрдХреНрд╖рд╛ рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </font></font><code>SurfaceView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдпрд╛ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ </font></font><code>GlSurfaceView</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдФрд░ рдПрдХ рдЕрд▓рдЧ рдзрд╛рдЧреЗ рдореЗрдВ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдмрд╛рд░реА-рдЖрдзрд╛рд░рд┐рдд рдЧреЗрдо рд╣реИ, рдПрдиреАрдореЗрд╢рди рдореЗрдВ рдЦрд░рд╛рдм рд╣реИ) , рдЬрд┐рд╕реЗ рдЬрдЯрд┐рд▓ рдЧреНрд░рд╛рдлрд┐рдХ рдЖрдЙрдЯрдкреБрдЯ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдЗрд╕реЗ рдЬрдЯрд┐рд▓ рдирд╣реАрдВ рдХрд░реЗрдВрдЧреЗ)ред рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╕реЗ рджреЛ рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣рд▓ рд╣реЛ рдЬрд╛рдПрдВрдЧреА: рдЫрд╡рд┐ рдЖрдЙрдЯрдкреБрдЯ рдФрд░ рдХреНрд▓рд┐рдХ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдХреА рдЕрдкрдиреА рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рдХрдард┐рдирд╛рдЗрдпрд╛рдВ рд╣реИрдВред рдЖрдЗрдП рдЙрди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрдм рд╣рдо рдХрдВрд╕реЛрд▓ рдкрд░ рдкреЗрдВрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╣рдорд╛рд░реЗ рд░реЗрдВрдбрд░рд░ рдиреЗ рдЖрдЙрдЯрдкреБрдЯ рдХрдорд╛рдВрдб рднреЗрдЬреЗ рдФрд░ рд╕реНрдХреНрд░реАрди рдкрд░ рдПрдХ рдЫрд╡рд┐ рдмрдирд╛рдИред рдПрдВрдбреНрд░реЙрдЗрдб рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╕реНрдерд┐рддрд┐ рд╡рд┐рдкрд░реАрдд рд╣реИ - рдкреНрд░рддрд┐рдкрд╛рджрди рдХреЛ рд╡реНрдпреВ рджреНрд╡рд╛рд░рд╛ рд╣реА рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕ рд╕рдордп рддрдХ рд╡рд┐рдзрд┐ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрддреА </font></font><code>onDraw()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣реИ, </font><font style="vertical-align: inherit;">рдЙрд╕реЗ </font><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдХреНрдпрд╛, рдХреИрд╕реЗ рдФрд░ рдХрд╣рд╛рдВ рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рдирд╛ рд╣реИред рд▓реЗрдХрд┐рди </font></font><code>drawMainMenu()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрдВрдЯрд░рдлрд╝реЗрд╕ </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ </font></font><code>MainMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">? рдХреНрдпрд╛ рд╡рд╣ рдЕрдм рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЗрдП рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреА рдорджрдж рд╕реЗ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред рдХрдХреНрд╖рд╛ </font></font><code>DiceSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЗрдВ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реЛрдЧрд╛ </font></font><code>instructions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдХреЛрдб рдХрд╛ рдПрдХ рдмреНрд▓реЙрдХ рдЬрд┐рд╕реЗ рд╣рд░ рдмрд╛рд░ рд╡рд┐рдзрд┐ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП </font></font><code>onDraw()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рд░реЗрдВрдбрд░рд░, рдПрдХ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдкрджреНрдзрддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдпрд╣ рдЗрдВрдЧрд┐рдд рдХрд░реЗрдЧрд╛ рдХрд┐ рдХрд┐рди рд╡рд┐рд╢рд┐рд╖реНрдЯ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдпрджрд┐ рдХрд┐рд╕реА рдХреЛ рджрд┐рд▓рдЪрд╕реНрдкреА рд╣реИ, рддреЛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкреИрдЯрд░реНрди рдХреЛ </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд░рдгрдиреАрддрд┐ </font><font style="vertical-align: inherit;">рдХрд╣рд╛ рдЬрд╛рддрд╛ </font><i><font style="vertical-align: inherit;">рд╣реИ</font></i><font style="vertical-align: inherit;"> ред рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> RenderInstructions = (Canvas, Paint) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiceSurface</span></span></span></span>(context: Context) : View(context) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> instructions: RenderInstructions = { _, _ -&gt; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> paint = Paint().apply { color = Color.YELLOW style = Paint.Style.STROKE isAntiAlias = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateInstructions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(instructions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">RenderInstructions</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.instructions = instructions <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.postInvalidate() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDraw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(canvas: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Canvas</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onDraw(canvas) canvas.drawColor(Color.BLACK) <span class="hljs-comment"><span class="hljs-comment">//Fill background with black color instructions.invoke(canvas, paint) //Execute current render instructions } } class DroidMenuRenderer(private val surface: DiceSurface): MenuRenderer { override fun clearScreen() { surface.updateInstructions { _, _ -&gt; } } override fun drawMainMenu(actions: ActionList) { surface.updateInstructions { c, p -&gt; val canvasWidth = c.width val canvasHeight = c.height //Draw title text p.textSize = canvasHeight / 3f p.strokeWidth = 0f p.color = Color.parseColor("#ff808000") c.drawText( "DICE", (canvasWidth - p.measureText("DICE")) / 2f, (buttonTop - p.ascent() - p.descent()) / 2f, p ) //Other instructions... } } }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣реА рд╣реИ, рд╕рднреА рдЪрд┐рддреНрд░рдордп рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдЕрднреА рднреА рд░реЗрдВрдбрд░рд░ рд╡рд░реНрдЧ рдореЗрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рдмрд╛рд░ рд╣рдо рд╕реАрдзреЗ рдХрдорд╛рдВрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рджреГрд╢реНрдп рджреНрд╡рд╛рд░рд╛ рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рддреИрдпрд╛рд░ рдХрд░рддреЗ рд╣реИрдВред рд╕рдВрдкрддреНрддрд┐ рдХреЗ рдкреНрд░рдХрд╛рд░ рдкрд░ рдзреНрдпрд╛рди рджреЗрдВ </font></font><code>instructions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдЖрдк рдПрдХ рдЕрд▓рдЧ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХреА рдПрдХрдорд╛рддреНрд░ рд╡рд┐рдзрд┐ рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХреЛрдЯрд▓рд┐рди рдХреЛрдб рдХреА рдорд╛рддреНрд░рд╛ рдХреЛ рдХрд╛рдлреА рдХрдо рдХрд░ рд╕рдХрддрд╛ рд╣реИред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдм рдЗрдВрдЯрд░реЗрдХреНрдЯрд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВред рдкрд╣рд▓реЗ, рдбреЗрдЯрд╛ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рд╕рдордХрд╛рд▓рд┐рдХ рд░реВрдк рд╕реЗ рд╣реБрдИ: рдЬрдм рд╣рдордиреЗ рдХрдВрд╕реЛрд▓ (рдХреАрдмреЛрд░реНрдб) рд╕реЗ рдбреЗрдЯрд╛ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛, рддрдм рддрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди (рдЪрдХреНрд░) рдХреЛ рд░реЛрдХ рджрд┐рдпрд╛ рдЧрдпрд╛ рдЬрдм рддрдХ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рдХреБрдВрдЬреА рджрдмрд╛рдП рдирд╣реАрдВред рдПрдВрдбреНрд░реЙрдЗрдб рдХреЗ рд╕рд╛рде, рдРрд╕реА рдЪрд╛рд▓ рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧреА - рдЗрд╕рдХрд╛ рдЕрдкрдирд╛ рд▓реВрдкрд░ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдХрд╛рдо рд╣рдореЗрдВ рдХрд┐рд╕реА рднреА рдорд╛рдорд▓реЗ рдореЗрдВ рдмрд╛рдзрд┐рдд рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЗрдирдкреБрдЯ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред рдпрд╣реА рд╣реИ, рдЗрдВрдЯрд░реЗрдХреНрдЯрд░ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХреЗ рддрд░реАрдХреЗ рдЕрднреА рднреА рдЗрдВрдЬрди рдХреЛ рд░реЛрдХрддреЗ рд╣реИрдВ рдФрд░ рдХрдорд╛рдВрдбреНрд╕ рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ, рдЬрдмрдХрд┐ рдПрдХреНрдЯрд┐рд╡рд┐рдЯреА рдФрд░ рдЗрд╕рдХреЗ рд╕рднреА рд╡реНрдпреВ рдЬрд▓реНрдж рд╣реА рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ рдпрд╛ рдмрд╛рдж рдореЗрдВ рд╡реЗ рдЗрд╕ рдХрдорд╛рдВрдб рдХреЛ рднреЗрдЬрддреЗ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдорд╛рдирдХ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ </font></font><code>BlockingQueue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдХрдХреНрд╖рд╛ </font></font><code>DroidMenuInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ рдХрд╣реЗрдЧрд╛</font></font><code>take()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдЬреЛ рдЦреЗрд▓ рдХреА рдзрд╛рд░рд╛ рдХреЗ рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рдирд┐рд▓рдВрдмрд┐рдд рдХрд░ рджреЗрдЧрд╛ рдЬрдм рддрдХ рдХрд┐ рдХрддрд╛рд░ (рдкрд░рд┐рдЪрд┐рдд рд╡рд░реНрдЧ рдХреЗ рдЙрджрд╛рд╣рд░рдг </font></font><code>Action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХрддрд╛рд░ рдореЗрдВ рджрд┐рдЦрд╛рдИ рди рджреЗрдВ </font><font style="vertical-align: inherit;">ред </font></font><code>DiceSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, рдмрджрд▓реЗ рдореЗрдВ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреНрд▓рд┐рдХ (рдорд╛рдирдХ </font></font><code>onTouchEvent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрдЧ </font><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font></font><code>View</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдХреЛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░реЗрдЧрд╛ </font><font style="vertical-align: inherit;">, рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╡рд┐рдзрд┐ рджреНрд╡рд╛рд░рд╛ рдХрддрд╛рд░ рдореЗрдВ рдЬреЛрдбрд╝ рджреЗрдЧрд╛ </font></font><code>offer()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдпрд╣ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦреЗрдЧрд╛:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiceSurface</span></span></span></span>(context: Context) : View(context) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> actionQueue: BlockingQueue&lt;Action&gt; = LinkedBlockingQueue&lt;Action&gt;() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">awaitAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Action = actionQueue.take() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTouchEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MotionEvent</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.action == MotionEvent.ACTION_UP) { actionQueue.offer(Action(Action.Type.NONE), <span class="hljs-number"><span class="hljs-number">200</span></span>, TimeUnit.MILLISECONDS) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DroidMenuInteractor</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> surface: DiceSurface) : Interactor { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">anyInput</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { surface.awaitAction() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pickAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(list: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: Action { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> type = surface.awaitAction().type list .filter(Action::isEnabled) .find { it.type == type } ?.let { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it } } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣реА рд╣реИ, рдЗрдВрдЯрд░реЗрдХреНрдЯрд░ рд╡рд┐рдзрд┐ рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ </font></font><code>awaitAction()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ рдпрджрд┐ рдХрддрд╛рд░ рдореЗрдВ рдХреБрдЫ рд╣реИ, рддреЛ рдпрд╣ рдкреНрд░рд╛рдкреНрдд рдХрдорд╛рдВрдб рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИред рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЯреАрдореЛрдВ рдХреЛ рдХрддрд╛рд░ рдореЗрдВ рдХреИрд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИред рдЪреВрдВрдХрд┐ рдпреВрдЖрдИ рд╕реНрдЯреНрд░реАрдо рд▓рдЧрд╛рддрд╛рд░ рдЪрд▓рддреА рд╣реИ, рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдХрдИ рдмрд╛рд░ рд╕реНрдХреНрд░реАрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЧрддрд┐рд╡рд┐рдзрд┐ рдореЗрдВ рдПрдХ рдлреНрд░реАрдЬ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдЦрд╛рд╕рдХрд░ рдЕрдЧрд░ рдЧреЗрдо рдЗрдВрдЬрди рдХрдорд╛рдВрдб рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдирд╣реАрдВ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдирд┐рдореЗрд╢рди рдХреЗ рджреМрд░рд╛рди)ред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХрддрд╛рд░ рдХреА рдХреНрд╖рдорддрд╛ рдмрдврд╝рд╛рдиреЗ рдФрд░ / рдпрд╛ рдЯрд╛рдЗрдордЖрдЙрдЯ рдореВрд▓реНрдп рдХреЛ рдХрдо рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдорд┐рд▓реЗрдЧреАред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмреЗрд╢рдХ, рд╣рдо рдЖрджреЗрд╢реЛрдВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдФрд░ рдХреЗрд╡рд▓ рдПрдХ рд╣реАред рд╣рдореЗрдВ рджрдмрд╛рдиреЗ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рдмреАрдЪ рдЕрдВрддрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдЙрдирдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдЗрд╕ рдпрд╛ рдЙрд╕ рдЖрджреЗрд╢ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдПрдХ рдмреБрд░реА рдХрд┐рд╕реНрдордд рд╣реИ - рдЗрдВрдЯрд░реЗрдХреНрдЯрд░ рдХреЛ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╕реНрдХреНрд░реАрди рдкрд░ рдХрд┐рд╕ рдЬрдЧрд╣ рдкрд░ рд╕рдХреНрд░рд┐рдп рдмрдЯрди рдЦреАрдВрдЪреЗ рдЧрдП рд╣реИрдВ - рд░реЗрдВрдбрд░рд░ рд░реЗрдВрдбрд░рд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред рд╣рдо рдЙрдирдХреА рдмрд╛рддрдЪреАрдд рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВрдЧреЗред рд╡рд░реНрдЧ </font></font><code>DiceSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╕рдВрдЧреНрд░рд╣ - рд╕рдХреНрд░рд┐рдп рдЖрдпрддреЛрдВ (рдпрд╛ рдЕрдиреНрдп рдЖрдХреГрддрд┐рдпреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА, рдЕрдЧрд░ рд╣рдо рдХрднреА рдЗрд╕ рдмрд┐рдВрджреБ рддрдХ рдкрд╣реБрдБрдЪрддреЗ рд╣реИрдВ) рдХреЛ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░реЗрдВрдЧреЗред рдЗрд╕ рддрд░рд╣ рдХреЗ рдЖрдпрддреЛрдВ рдореЗрдВ рдХреЛрдиреЗ рдФрд░ рдмрд╛рдЙрдВрдб рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рд╣реЛрддреЗ рд╣реИрдВ </font></font><code>Action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рд░реЗрдВрдбрд░рд░ рдЗрди рдЖрдпрддреЛрдВ рдХреЛ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдЧрд╛ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╕реВрдЪреА рдореЗрдВ рдЬреЛрдбрд╝реЗрдЧрд╛, рд╡рд┐рдзрд┐ </font></font><code>onTouchEvent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдЧреА рдХрд┐ рдЖрдпрддреЛрдВ рдореЗрдВ рд╕реЗ рдХреМрди рд╕рд╛ рджрдмрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рдЗрд╕реА рдХреЛ рдХрддрд╛рд░ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ </font></font><code>Action</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveRect</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> action: Action, left: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>, top: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>, right: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>, bottom: <span class="hljs-built_in"><span class="hljs-built_in">Float</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rect = RectF(left, top, right, bottom) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">check</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, y: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, w: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, h: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = rect.contains(x / w, y / h) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд┐рдзрд┐ </font></font><code>check()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬрд╛рдБрдЪ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ рдХрд┐ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдЖрдпрдд рдХреЗ рдЕрдВрджрд░ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВред рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд░реЗрдВрдбрд░рд░ рдХреЗ рдХрд╛рдо рдХреЗ рдЪрд░рдг рдореЗрдВ (рдФрд░ рдпрд╣ рдареАрдХ рдЙрд╕реА рдХреНрд╖рдг рд╣реИ рдЬрдм рдЖрдпрддрд╛рдХрд╛рд░ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ) рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреИрдирд╡рд╛рд╕ рдХреЗ рдЖрдХрд╛рд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рд╕рд╛ рднреА рд╡рд┐рдЪрд╛рд░ рдирд╣реАрдВ рд╣реИред рдЗрд╕рд▓рд┐рдП, рд╣рдореЗрдВ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЛ 0 рд╕реЗ 1 рддрдХ рдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЗ рд╕рд╛рде рд╕рд╛рдкреЗрдХреНрд╖ рдореВрд▓реНрдпреЛрдВ (рд╕реНрдХреНрд░реАрди рдХреА рдЪреМрдбрд╝рд╛рдИ рдпрд╛ рдКрдВрдЪрд╛рдИ рдХрд╛ рдкреНрд░рддрд┐рд╢рдд) рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рджрдмрд╛рдиреЗ рдХреЗ рд╕рдордп рдкрд░ рдкреБрдирд░рд╛рд╡реГрддреНрддрд┐ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рд╣реА рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкрд╣рд▓реВ рдЕрдиреБрдкрд╛рдд рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рдирд╣реАрдВ рд░рдЦрддрд╛ рд╣реИ - рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╣рдорд╛рд░реЗ рд╢реИрдХреНрд╖рд┐рдХ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдпрд╣ рдХрд░реЗрдЧрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╣рдо рдХрдХреНрд╖рд╛ рдореЗрдВ </font></font><code>DiceSurface</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдлрд╝реАрд▓реНрдб </font><font style="vertical-align: inherit;">рд▓рд╛рдЧреВ рдХрд░реЗрдВрдЧреЗ </font><font style="vertical-align: inherit;">, </font><font style="vertical-align: inherit;">рдЗрд╕реЗ рдмрд╛рд╣рд░ рд╕реЗ (рд░реЗрдВрдбрд░рд░ рдХреА рддрд░рдл рд╕реЗ) рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП рджреЛ рд╡рд┐рдзрд┐рдпрд╛рдБ ( </font></font><code>addRectangle()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>clearRectangles()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) </font><font style="vertical-align: inherit;">рдЬреЛрдбрд╝реЗрдВрдЧреЗ </font><font style="vertical-align: inherit;">, рдФрд░ </font></font><code>onTouchEvent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдпрддреЛрдВ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдХрд░ рдЗрд╕рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░реЗрдВрдЧреЗред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DiceSurface</span></span></span></span>(context: Context) : View(context) { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> actionQueue: BlockingQueue&lt;Action&gt; = LinkedBlockingQueue&lt;Action&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rectangles: MutableSet&lt;ActiveRect&gt; = Collections.newSetFromMap(ConcurrentHashMap&lt;ActiveRect, <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>&gt;()) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> instructions: RenderInstructions = { _, _ -&gt; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> paint = Paint().apply { color = Color.YELLOW style = Paint.Style.STROKE isAntiAlias = <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateInstructions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(instructions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">RenderInstructions</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.instructions = instructions <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.postInvalidate() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearRectangles</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { rectangles.clear() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addRectangle</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Action</span></span></span></span><span class="hljs-function"><span class="hljs-params">, left: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, top: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, right: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">, bottom: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Float</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { rectangles.add(ActiveRect(action, left, top, right, bottom)) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">awaitAction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: Action = actionQueue.take() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTouchEvent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(event: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MotionEvent</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.action == MotionEvent.ACTION_UP) { with(rectangles.firstOrNull { it.check(event.x, event.y, width.toFloat(), height.toFloat()) }) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { actionQueue.put(action) } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { actionQueue.offer(Action(Action.Type.NONE), <span class="hljs-number"><span class="hljs-number">200</span></span>, TimeUnit.MILLISECONDS) } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDraw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(canvas: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Canvas</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onDraw(canvas) canvas.drawColor(Color.BLACK) instructions(canvas, paint) } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдпрддреЛрдВ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреНрд░рддрд┐рд╕реНрдкрд░реНрдзреА рд╕рдВрдЧреНрд░рд╣ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдпрд╣ рдШрдЯрдирд╛ рд╕реЗ рдмрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ </font></font><code>ConcurrentModificationException</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рд╕реЗрдЯ рдХреЛ рдПрдХ рд╕рд╛рде рдЕрджреНрдпрддрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рд╡рд╛рд╣ рджреНрд╡рд╛рд░рд╛ рд╕реЙрд░реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЬреЛ рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рд╣реЛрдЧрд╛)ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд░реНрдЧ рдХреЛрдб </font></font><code>DroidMenuInteractor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рд░рд╣реЗрдЧрд╛, рд▓реЗрдХрд┐рди рдпрд╣ </font></font><code>DroidMenuRenderer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрджрд▓ рдЬрд╛рдПрдЧрд╛ред рдкреНрд░рддреНрдпреЗрдХ рдЖрдЗрдЯрдо рдХреЗ рд▓рд┐рдП рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рдЪрд╛рд░ рдмрдЯрди рдЬреЛрдбрд╝реЗрдВ </font></font><code>ActionList</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдЙрдиреНрд╣реЗрдВ рд╢реАрд░реНрд╖рдХ DICE рдХреЗ рдиреАрдЪреЗ рд░рдЦреЗрдВ, рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╕реНрдХреНрд░реАрди рдХреА рдЪреМрдбрд╝рд╛рдИ рдореЗрдВ рд╡рд┐рддрд░рд┐рдд рдХрд░реЗрдВред рдЦреИрд░, рдЪрд▓реЛ рд╕рдХреНрд░рд┐рдп рдЖрдпрддреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдордд рднреВрд▓рдирд╛ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DroidMenuRenderer</span></span></span><span class="hljs-class"> </span></span>( <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> surface: DiceSurface, <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> loader: StringLoader ) : MenuRenderer { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> helper = StringLoadHelper(loader) <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearScreen</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { surface.clearRectangles() surface.updateInstructions { _, _ -&gt; } } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawMainMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(actions: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ActionList</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//Prepare rectangles surface.clearRectangles() val percentage = 1.0f / actions.size actions.forEachIndexed { i, a -&gt; surface.addRectangle(a, i * percentage, 0.45f, i * percentage + percentage, 1f) } //Prepare instructions surface.updateInstructions { c, p -&gt; val canvasWidth = c.width val canvasHeight = c.height val buttonTop = canvasHeight * 0.45f val buttonWidth = canvasWidth / actions.size val padding = canvasHeight / 144f //Draw title text p.textSize = canvasHeight / 3f p.strokeWidth = 0f p.color = Color.parseColor("#ff808000") p.isFakeBoldText = true c.drawText( "DICE", (canvasWidth - p.measureText("DICE")) / 2f, (buttonTop - p.ascent() - p.descent()) / 2f, p ) p.isFakeBoldText = false //Draw action buttons p.textSize = canvasHeight / 24f actions.forEachIndexed { i, a -&gt; p.color = if (a.isEnabled) Color.YELLOW else Color.LTGRAY p.strokeWidth = canvasHeight / 240f c.drawRect( i * buttonWidth + padding, buttonTop + padding, i * buttonWidth + buttonWidth - padding, canvasHeight - padding, p ) val name = mergeActionData(helper.loadActionData(a)) p.strokeWidth = 0f c.drawText( name, i * buttonWidth + (buttonWidth - p.measureText(name)) / 2f, (canvasHeight + buttonTop - p.ascent() - p.descent()) / 2f, p ) } } } private fun mergeActionData(data: Array&lt;String&gt;) = if (data.size &gt; 1) { if (data[1].first().isLowerCase()) data[0] + data[1] else data[1] } else data.getOrNull(0) ?: "" }</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдВ рд╣рдо рдлрд┐рд░ </font></font><code>StringLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕реЗ рд╕рд╣рд╛рдпрдХ рд╡рд░реНрдЧ </font><font style="vertical-align: inherit;">рдХреЗ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ </font><font style="vertical-align: inherit;">рдФрд░ рдХреНрд╖рдорддрд╛рдУрдВ рдкрд░ </font><font style="vertical-align: inherit;">рд▓реМрдЯ рдЖрдП </font></font><code>StringLoadHelper</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдЪрд┐рддреНрд░ рдореЗрдВ рдирд╣реАрдВ рджрд┐рдЦрд╛рдП рдЧрдП)ред </font><font style="vertical-align: inherit;">рдкрд╣рд▓реЗ рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд╛ рдПрдХ рдирд╛рдо рд╣реИ </font></font><code>ResourceStringLoader</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ (рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ) рдЖрд╡реЗрджрди рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╕реЗ рд╕реНрдерд╛рдиреАрдпрдХреГрдд рддрд╛рд░реЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдореЗрдВ рд▓рдЧрд╛ рд╣реБрдЖ рд╣реИред </font><font style="vertical-align: inherit;">рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдХрд░рддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рд╕рдВрд╕рд╛рдзрди рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛рдУрдВ рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ - рд╣рдо рдЬрд╛рдиреЗ рдкрд░ рдЙрдиреНрд╣реЗрдВ рдирд┐рд░реНрдорд╛рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рд╣реИрдВред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ResourceStringLoader</span></span></span></span>(context: Context) : StringLoader { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> packageName = context.packageName <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> resources = context.resources <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(key: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: String = resources.getString(resources.getIdentifier(key, <span class="hljs-string"><span class="hljs-string">"string"</span></span>, packageName)) }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдзреНрд╡рдирд┐рдпреЛрдВ рдФрд░ рд╕рдВрдЧреАрдд рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдиреА рд╣реБрдИ рд╣реИред </font><font style="vertical-align: inherit;">Android рдореЗрдВ рдПрдХ рдЕрджреНрднреБрдд рд╡рд░реНрдЧ рд╣реИ </font></font><code>MediaPlayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЬреЛ рдЗрди рдЪреАрдЬреЛрдВ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реИред </font><font style="vertical-align: inherit;">рд╕рдВрдЧреАрдд рдмрдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдмреЗрд╣рддрд░ рдХреБрдЫ рдирд╣реАрдВ рд╣реИ:</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DroidMusicPlayer</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> context: Context): MusicPlayer { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentMusic: Music? = <span class="hljs-literal"><span class="hljs-literal">null</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> player = MediaPlayer() <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(music: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Music</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentMusic == music) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } currentMusic = music player.setAudioStreamType(AudioManager.STREAM_MUSIC) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> afd = context.assets.openFd(<span class="hljs-string"><span class="hljs-string">"music/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${music.toString().toLowerCase()}</span></span></span><span class="hljs-string">.mp3"</span></span>) player.setDataSource(afd.fileDescriptor, afd.startOffset, afd.length) player.setOnCompletionListener { it.seekTo(<span class="hljs-number"><span class="hljs-number">0</span></span>) it.start() } player.prepare() player.start() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { currentMusic = <span class="hljs-literal"><span class="hljs-literal">null</span></span> player.release() } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджреЛ рдЕрдВрдХред рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╡рд┐рдзрд┐ </font></font><code>prepare()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдПрдХ рдмрдбрд╝реЗ рдлрд╝рд╛рдЗрд▓ рдЖрдХрд╛рд░ (рдмрдлрд░рд┐рдВрдЧ рдХреЗ рдХрд╛рд░рдг) рдХреЗ рд╕рд╛рде рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдирд┐рд▓рдВрдмрд┐рдд рдХрд░реЗрдЧрд╛ред рдпрд╣ рдЕрдиреБрд╢рдВрд╕рд╛ рдХреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдЖрдк рдЗрд╕реЗ рдпрд╛ рддреЛ рдПрдХ рдЕрд▓рдЧ рдереНрд░реЗрдб рдореЗрдВ рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рдпрд╛ рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>prepareAsync()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдФрд░ </font></font><code>OnPreparedListener</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рджреВрд╕рд░реА рдмрд╛рдд, рдкреНрд▓реЗрдмреИрдХ рдХреЛ рдПрдХреНрдЯрд┐рд╡рд┐рдЯреА рд▓рд╛рдЗрдл рд╕рд╛рдЗрдХрд▓ рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝рдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ (рдЬрдм рдпреВрдЬрд░ рдХрдо рд╕реЗ рдХрдо рдЖрд╡реЗрджрди рдХрд░реЗ рдФрд░ рд░рд┐рдХрд╡рд░ рд╣реЛрдиреЗ рдкрд░ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рд╣реЛ), рд▓реЗрдХрд┐рди рд╣рдордиреЗ рдРрд╕рд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ред рдР-рдР-рдР ... </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣ рдзреНрд╡рдирд┐рдпреЛрдВ </font></font><code>MediaPlayer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЗ </font><font style="vertical-align: inherit;">рд▓рд┐рдП </font><font style="vertical-align: inherit;">рднреА рдЙрдкрдпреБрдХреНрдд </font><font style="vertical-align: inherit;">рд╣реИ </font><font style="vertical-align: inherit;">, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╡реЗ рдХреБрдЫ рдФрд░ рд╕рд░рд▓ рд╣реИрдВ (рдЬреИрд╕рд╛ рдХрд┐ рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ), рдпрд╣ рдХрд░реЗрдЧрд╛ </font></font><code>SoundPool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред рдЗрд╕рдХрд╛ рд▓рд╛рдн рдпрд╣ рд╣реИ рдХрд┐ рдЬрдм рдзреНрд╡рдирд┐ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдореЗрдореЛрд░реА рдореЗрдВ рд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрдирдХрд╛ рдкреНрд▓реЗрдмреИрдХ рддреБрд░рдВрдд рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред рдиреБрдХрд╕рд╛рди рд╕реНрдкрд╖реНрдЯ рд╣реИ - рдкрд░реНрдпрд╛рдкреНрдд рд╕реНрдореГрддрд┐ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИ (рд▓реЗрдХрд┐рди рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд╣реИ, рд╣рдо рдорд╛рдореВрд▓реА рд╣реИрдВ)ред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DroidSoundPlayer</span></span></span></span>(context: Context) : SoundPlayer { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> soundPool: SoundPool = SoundPool(<span class="hljs-number"><span class="hljs-number">2</span></span>, AudioManager.STREAM_MUSIC, <span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> sounds = mutableMapOf&lt;Sound, <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>&gt;() <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> rate = <span class="hljs-number"><span class="hljs-number">1f</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> lock = ReentrantReadWriteLock() <span class="hljs-keyword"><span class="hljs-keyword">init</span></span> { Thread(SoundLoader(context)).start() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">play</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sound: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Sound</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lock.readLock().tryLock()) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { sounds[sound]?.let { s -&gt; soundPool.play(s, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">1f</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, rate) } } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { lock.readLock().unlock() } } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SoundLoader</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> context: Context) : Runnable { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> assets = context.assets lock.writeLock().lock() <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Sound.values().forEach { s -&gt; sounds[s] = soundPool.load( assets.openFd(<span class="hljs-string"><span class="hljs-string">"sound/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${s.toString().toLowerCase()}</span></span></span><span class="hljs-string">.wav"</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span> ) } } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { lock.writeLock().unlock() } } } }</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдХреНрд▓рд╛рд╕ рдмрдирд╛рддреЗ рд╕рдордп, рдПрдиреНрдпреВрдорд░реЗрд╢рди рд╕реЗ рд╕рднреА рдзреНрд╡рдирд┐рдпреЛрдВ рдХреЛ </font></font><code>Sound</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рдЕрд▓рдЧ рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд▓реЛрдб рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЗрд╕ рдмрд╛рд░ рд╣рдо рдПрдХ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд┐рдП рдЧрдП рд╕рдВрдЧреНрд░рд╣ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рд╣рдо рдорд╛рдирдХ рд╡рд░реНрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдореНрдпреВрдЯреЗрдХреНрд╕ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ </font></font><code>ReentrantReadWriteLock</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдм, рдЖрдЦрд┐рд░рдХрд╛рд░, рд╣рдо рдЕрдкрдиреЗ рдЕрдВрджрд░ рдХреЗ рд╕рднреА рдШрдЯрдХреЛрдВ рдХреЛ рдПрдХ рд╕рд╛рде рдЕрдВрдзрд╛ рдХрд░ рджреЗрддреЗ рд╣реИрдВ </font></font><code>MainActivity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рднреВрд▓ рдЧрдП? </font><font style="vertical-align: inherit;">рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ </font></font><code>MainMenu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(рдФрд░ </font></font><code>Game</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдмрд╛рдж рдореЗрдВ) рдПрдХ рдЕрд▓рдЧ рдереНрд░реЗрдб рдореЗрдВ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред</font></font><br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Activity</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) Audio.<span class="hljs-keyword"><span class="hljs-keyword">init</span></span>(DroidSoundPlayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>), DroidMusicPlayer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> surface = DiceSurface(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> renderer = DroidMenuRenderer(surface) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> interactor = DroidMenuInteractor(surface, ResourceStringLoader(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)) setContentView(surface) Thread { MainMenu(renderer, interactor).start() finish() }.start() } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onBackPressed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { } }</code> </pre><br>  рд╡рд╣, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╕рдм рд╣реИред<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╕рднреА рдкреАрдбрд╝рд╛ рдХреЗ рдмрд╛рдж, рд╣рдорд╛рд░реЗ рдЖрд╡реЗрджрди рдХреА рдореБрдЦреНрдп рд╕реНрдХреНрд░реАрди рдмрд╕ рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд▓рдЧрддреА рд╣реИ: </font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореЛрдмрд╛рдЗрд▓ рд╕реНрдХреНрд░реАрди рдХреА рдкреВрд░реА рдЪреМрдбрд╝рд╛рдИ рдореЗрдВ рдореБрдЦреНрдп рдореЗрдиреВ</font></font></b> <div class="spoiler_text"> <a href=""><img src="https://habrastorage.org/webt/m0/u7/-7/m0u7-7lcjmuttu9rerrvirhfgyy.png"></a> <br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдареАрдХ рд╣реИ, рдЕрд░реНрдерд╛рддреН, рдпрд╣ рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд▓рдЧреЗрдЧрд╛ рдЬрдм рдПрдХ рдмреБрджреНрдзрд┐рдорд╛рди рдХрд▓рд╛рдХрд╛рд░ рд╣рдорд╛рд░реЗ рд░реИрдВрдХреЛрдВ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдЧрд╛, рдФрд░ рдЙрд╕рдХреА рдорджрдж рд╕реЗ рдпрд╣ рд╕реНрдХреНрд╡реЗрд▓рд░ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкреБрдирд░реНрд╡рд┐рддрд░рд┐рдд рд╣реЛрдЧрд╛ред </font></font><br><br><h2>  рдЙрдкрдпреЛрдЧреА рд▓рд┐рдВрдХ </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЭреЗ рдкрддрд╛ рд╣реИ, рдХрдИ рд▓реЛрдЧ рдЗрд╕ рдмрд┐рдВрджреБ рдкрд░ рд╕реАрдзреЗ рд╕реНрдХреНрд░реЙрд▓ рдХрд░рддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдпрд╣ рдареАрдХ рд╣реИ - рдЕрдзрд┐рдХрд╛рдВрд╢ рдкрд╛рдардХреЛрдВ рдиреЗ рдЯреИрдм рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдмрдВрдж рдХрд░ рджрд┐рдпрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдЙрди рдЗрдХрд╛рдЗрдпреЛрдВ рдХреЛ рдЬреЛ рдлрд┐рд░ рднреА рдЕрд╕рдВрдЧрдд рдмрдХрдмрдХ рдХреА рдЗрд╕ рдзрд╛рд░рд╛ рдХреЛ рдкреАрдЫреЗ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ - </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рдореНрдорд╛рди рдФрд░ рд╕рдореНрдорд╛рди,</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрд╕реАрдо рдкреНрдпрд╛рд░ рдФрд░ рдЖрднрд╛рд░ред </font><font style="vertical-align: inherit;">рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдФрд░ рд▓рд┐рдВрдХ, рдЬрд╝рд╛рд╣рд┐рд░ рд╣реИ, рдЬрд╣рд╛рдВ рдЙрдирдХреЗ рдмрд┐рдирд╛ред </font><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЗ рд╕реНрд░реЛрдд рдХреЛрдб рддрдХ (рдпрд╣ рдзреНрдпрд╛рди рд░рдЦреЗрдВ рдХрд┐ рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рд▓реЗрдЦ рдореЗрдВ рдорд╛рдирд╛ рдЧрдпрд╛ рд╣реИ) рд╕реЗ рдмрд╣реБрдд рдЖрдЧреЗ рдирд┐рдХрд▓ рдЧрдИ рд╣реИ:</font></font><br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рдпреЛрдЬрдирд╛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреЛрд░</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрд▓реА</font></font></b></a><font style="vertical-align: inherit;"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"> рдкреНрд░реЛрдЬреЗрдХреНрдЯ</font></a><font style="vertical-align: inherit;"> ;</font></font></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд░рд┐рдпреЛрдЬрдирд╛ </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Droid</font></font></b></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЦреИрд░, рдЕрдЪрд╛рдирдХ, рдХрд┐рд╕реА рдХреЛ рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдФрд░ рджреЗрдЦрдиреЗ рдХреА рдЗрдЪреНрдЫрд╛ рд╣реЛрдЧреА, рдФрд░ рдЕрдкрдиреЗ рдЖрдк рдкрд░ рдЖрд▓рд╕реНрдп рдЗрдХрдЯреНрдард╛ рдХрд░реЗрдВрдЧреЗ, рдпрд╣рд╛рдВ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рд┐рдВрдХ рд╣реИ: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рд┐рдВрдХ!</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдпрд╣рд╛рдВ, рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд▓рд╛рдВрдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдЖрдк рдЗрд╕рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рд▓реЗрдЦ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ)ред рдпрд╣ JavaFX рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рд▓рд┐рдП OpenJDK (рд░рд╛рдЗрдЯ рдПрдВрдб рд╣реЗрд▓реНрдк) рдХреЗ рд╕рд╛рде рдорд╢реАрдиреЛрдВ рдкрд░ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХрдо рд╕реЗ рдХрдо рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдлрд╛рдЗрд▓ рдкрде рд░рдЬрд┐рд╕реНрдЯрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред рд╕реНрдерд╛рдкрдирд╛ рдорджрдж readme.txt рдлрд╝рд╛рдЗрд▓ (рдЙрди рдпрд╛рдж рд╣реИ?) рдореЗрдВ рдирд┐рд╣рд┐рдд рд╣реИред рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ, рджреЗрдЦреЗрдВ, рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдФрд░ рдЕрдВрдд рдореЗрдВ рдореИрдВ рдЪреБрдк рд╣реВрдВред</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рдпрд╛ рдПрдХ рдЙрдкрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╛ рдпрд╛рдВрддреНрд░рд┐рдХреА, рдпрд╛ рдХреБрдЫ рджрд┐рд▓рдЪрд╕реНрдк рд╕рдорд╛рдзрд╛рди, рдпрд╛, рдореБрдЭреЗ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ, рд╡рд┐рджреНрдпрд╛ рдХреЗ рдЦреЗрд▓, рдЖрдк рдЗрд╕реЗ рдПрдХ рдЕрд▓рдЧ рд▓реЗрдЦ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЬрд╛рдВрдЪ рд╕рдХрддреЗ рд╣реИрдВред </font><font style="vertical-align: inherit;">рдЕрдЧрд░ рддреБрдо рдЪрд╛рд╣реЛ </font><font style="vertical-align: inherit;">рдФрд░ рдЕрдЧрд░ рдЖрдк рдирд╣реАрдВ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдмрд╕ рдЯрд┐рдкреНрдкрдгреА, рдкрдЫрддрд╛рд╡рд╛ рдФрд░ рд╕реБрдЭрд╛рд╡ рднреЗрдЬреЗрдВред </font><font style="vertical-align: inherit;">рдореБрдЭреЗ рдмрд╛рдд рдХрд░рдиреЗ рдореЗрдВ рдЦреБрд╢реА рд╣реЛрдЧреАред</font></font><br><br>  рдСрд▓ рдж рдмреЗрд╕реНрдЯред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi445278/">https://habr.com/ru/post/hi445278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi445268/index.html">GraphQL рд╡рд┐рд╡рд░рдг: рдХреНрдпрд╛, рдХреИрд╕реЗ, рдФрд░ рдХреНрдпреЛрдВ</a></li>
<li><a href="../hi445270/index.html">[рдмреБрдХрдорд╛рд░реНрдХ] рд╢реБрд░реБрдЖрддреА рдХреЗ рд▓рд┐рдП рдмреИрд╢: реирез рдЙрдкрдпреЛрдЧреА рдХрдорд╛рдВрдб</a></li>
<li><a href="../hi445272/index.html">рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╢реБрд░реБрдЖрддреА рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЕрдЪреНрдЫреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рд╣реИред рддреЛ рдпрд╣ рд╣реИ рдпрд╛ рдирд╣реАрдВ?</a></li>
<li><a href="../hi445274/index.html">рдЬрдм "Zo├л"! == "Zo├л", рдпрд╛ рдЖрдкрдХреЛ рдпреВрдирд┐рдХреЛрдб рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЛ рд╕рд╛рдорд╛рдиреНрдп рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ</a></li>
<li><a href="../hi445276/index.html">рдкреВрд░реНрдг рдЙрдкрдпреЛрдЧ рдЧрд╛рдЗрдб</a></li>
<li><a href="../hi445280/index.html">рд╕рд╛рдЗрдЯреЛрдВ рдФрд░ рд╕реЗрд╡рд╛рдУрдВ рдХреА рд▓рд╛рднрдкреНрд░рджрддрд╛</a></li>
<li><a href="../hi445284/index.html">ClickHouse рдЙрддреНрдкрд╛рдж рд╡рд┐рд╢реНрд▓реЗрд╖рд┐рдХреА VKontakte</a></li>
<li><a href="../hi445286/index.html">рдорд╕реНрддрд┐рд╖реНрдХ рдХреЗ рд▓рд┐рдП Footrest: Hedera Hashgraph рд╡рд┐рддрд░рд┐рдд рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо</a></li>
<li><a href="../hi445288/index.html">рдЖрдкрдХреЗ рд╕рднреА рдЙрдкрднреЛрдХреНрддрд╛ рдЛрдг рдФрд░ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдбреЗрдЯрд╛ "рдПрдХ рд╣реА рд╕реНрдерд╛рди рдкрд░" ...</a></li>
<li><a href="../hi445290/index.html">рдХрдВрдкрдиреА рдХреА рд╕рднреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рдПрдХреАрдХреГрдд рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рдП?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>