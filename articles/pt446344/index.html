<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üóìÔ∏è üèÅ üë©‚Äçüî¨ Blocos de constru√ß√£o de aplicativos distribu√≠dos. Segunda aproxima√ß√£o üò© üë©üèª‚Äçü§ù‚Äçüë®üèø üßùüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An√∫ncio 


 Colegas, no meio do ver√£o, planejo lan√ßar outra s√©rie de artigos sobre o design de sistemas de filas: ‚ÄúVTrade Experiment‚Äù - uma tentativa ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Blocos de constru√ß√£o de aplicativos distribu√≠dos. Segunda aproxima√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/446344/"><p>  <strong>An√∫ncio</strong> </p><br><p>  <em>Colegas, no meio do ver√£o, planejo lan√ßar outra s√©rie de artigos sobre o design de sistemas de filas: ‚ÄúVTrade Experiment‚Äù - uma tentativa de escrever uma estrutura para sistemas de negocia√ß√£o.</em>  <em>O ciclo analisar√° a teoria e a pr√°tica de constru√ß√£o de uma troca, leil√£o e loja.</em>  <em>No final do artigo, proponho votar nos t√≥picos que mais lhe interessam.</em> <em><br></em> </p><br><p><img src="https://habrastorage.org/webt/ee/vo/mu/eevomuwv9mtkcyoawxhqzjjj9iu.jpeg"></p><br><p> Este √© o artigo final do ciclo de aplicativos reativos distribu√≠dos Erlang / Elixir.  No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">primeiro artigo,</a> voc√™ encontra os fundamentos te√≥ricos da arquitetura reativa.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O segundo artigo</a> ilustra os padr√µes e mecanismos b√°sicos para a constru√ß√£o de tais sistemas. </p><br><p>  Hoje, levantaremos quest√µes sobre o desenvolvimento da base de c√≥digo e dos projetos em geral. </p><a name="habracut"></a><br><h2 id="organizaciya-servisov">  Organiza√ß√£o de Servi√ßo </h2><br><p>  Na vida real, ao desenvolver um servi√ßo, voc√™ geralmente precisa combinar v√°rios padr√µes de intera√ß√£o em um controlador.  Por exemplo, o servi√ßo de usu√°rios, que resolve as tarefas de gerenciamento de perfis de usu√°rio para um projeto, deve responder a solicita√ß√µes de solicita√ß√£o de solicita√ß√£o e relatar atualiza√ß√µes de perfil por meio de pub-sub.  Este caso √© bastante simples: por tr√°s das mensagens, h√° um controlador que implementa a l√≥gica do servi√ßo e publica atualiza√ß√µes. </p><br><p>  A situa√ß√£o √© complicada quando precisamos implementar um servi√ßo distribu√≠do tolerante a falhas.  Suponha que os requisitos dos usu√°rios tenham mudado: </p><br><ol><li>  agora o servi√ßo deve processar solicita√ß√µes em 5 n√≥s do cluster, </li><li>  ser capaz de executar tarefas de processamento em segundo plano, </li><li>  e poder gerenciar dinamicamente suas listas de assinaturas de atualiza√ß√£o de perfil. </li></ol><br><p>  <em>Nota:</em> N√£o consideramos a quest√£o do armazenamento e replica√ß√£o consistentes de dados.  Suponha que esses problemas tenham sido resolvidos anteriormente e que o sistema j√° tenha uma camada de armazenamento confi√°vel e escal√°vel, e os manipuladores tenham mecanismos para interagir com ele. </p><br><p>  A descri√ß√£o formal do servi√ßo de usu√°rios tornou-se mais complicada.  Do ponto de vista de um programador, o uso de altera√ß√µes nas mensagens √© m√≠nimo.  Para satisfazer o primeiro requisito, precisamos ajustar o equil√≠brio no ponto de troca req-resp. </p><br><p>  O requisito para lidar com tarefas em segundo plano geralmente surge.  Nos usu√°rios, isso pode ser verificar documentos do usu√°rio, processar multim√≠dia baixada ou sincronizar dados com servi√ßos sociais.  redes.  Essas tarefas precisam ser distribu√≠das de alguma forma no cluster e controlar o progresso.  Portanto, temos duas solu√ß√µes: use o modelo de distribui√ß√£o de tarefas do artigo anterior ou, se n√£o couber, escreva um agendador de tarefas personalizado que ser√° necess√°rio para gerenciarmos o conjunto de manipuladores. </p><br><p>  O ponto 3 requer uma extens√£o para o modelo pub-sub.  E para implementa√ß√£o, depois de criar o ponto de troca pub-sub, precisamos iniciar adicionalmente o controlador desse ponto como parte de nosso servi√ßo.  Assim, parecemos levar a l√≥gica do processamento de assinaturas e cancelamentos de assinatura da camada de mensagens para a implementa√ß√£o dos usu√°rios. </p><br><p>  Como resultado, a decomposi√ß√£o da tarefa mostrou que, para atender aos requisitos, precisamos executar 5 inst√¢ncias de servi√ßo em n√≥s diferentes e criar uma entidade adicional - o controlador pub-sub respons√°vel pela assinatura. <br>  Para executar 5 manipuladores, voc√™ n√£o precisa alterar o c√≥digo de servi√ßo.  A √∫nica a√ß√£o adicional √© configurar regras de balanceamento no ponto de troca, sobre as quais falaremos mais adiante. <br>  Tamb√©m havia complexidade adicional: o controlador pub-sub e o planejador de tarefas personalizado devem funcionar em uma √∫nica c√≥pia.  Novamente, o servi√ßo de mensagens, como fundamental, deve fornecer um mecanismo para selecionar um l√≠der. </p><br><h3 id="vybor-lidera">  Escolha do L√≠der </h3><br><p>  Em sistemas distribu√≠dos, a escolha de um l√≠der √© o processo de nomear o √∫nico processo respons√°vel pelo planejamento do processamento distribu√≠do de uma carga. </p><br><p>  Em sistemas que n√£o s√£o propensos √† centraliza√ß√£o, s√£o utilizados algoritmos de consenso universal, como paxos ou jangada. <br>  Como o sistema de mensagens √© um corretor e um elemento central, ele conhece todos os controladores de servi√ßo - candidatos √† lideran√ßa.  As mensagens podem nomear um l√≠der sem voto. </p><br><p> Ap√≥s iniciar e conectar-se ao ponto de troca, todos os servi√ßos recebem a mensagem do sistema <code>#'$leader'{exchange = ?EXCHANGE, pid = LeaderPid, servers = Servers}</code> .  Se o <code>LeaderPid</code> corresponder ao <code>pid</code> processo atual, ele ser√° atribu√≠do como l√≠der e a lista <code>Servers</code> incluir√° todos os n√≥s e seus par√¢metros. <br>  Quando um novo n√≥ de cluster aparece e √© desconectado, todos os controladores de servi√ßo recebem <code>#'$slave_up'{exchange = ?EXCHANGE, pid = SlavePid, options = SlaveOpts}</code> e <code>#'$slave_down'{exchange = ?EXCHANGE, pid = SlavePid, options = SlaveOpts}</code> respectivamente. </p><br><p>  Assim, todos os componentes est√£o cientes de todas as altera√ß√µes e no cluster, a qualquer momento, um l√≠der √© garantido. </p><br><h2 id="posredniki">  Intermedi√°rios </h2><br><p>  Para a implementa√ß√£o de processos complexos de processamento distribu√≠do, bem como para a otimiza√ß√£o de uma arquitetura existente, √© conveniente usar intermedi√°rios. <br>  Para n√£o alterar o c√≥digo dos servi√ßos e resolver, por exemplo, as tarefas de processamento adicional, roteamento ou registro de mensagens, voc√™ pode ativar um processador proxy antes do servi√ßo, que executar√° todo o trabalho adicional. </p><br><p>  Um exemplo cl√°ssico de otimiza√ß√£o pub-sub √© um aplicativo distribu√≠do com um kernel de neg√≥cios que gera eventos de atualiza√ß√£o, por exemplo, uma altera√ß√£o no pre√ßo de mercado e uma camada de acesso - servidores N que fornecem APIs de soquete da web para clientes da web. <br>  Se voc√™ decidir "testa", o atendimento ao cliente ser√° o seguinte: </p><br><ul><li>  o cliente estabelece conex√µes com a plataforma.  No lado do servidor, encerrando o tr√°fego, o processo que atende a essa conex√£o √© iniciado. </li><li>  No contexto do processo do servi√ßo, ocorre a autoriza√ß√£o e a assinatura das atualiza√ß√µes.  O processo chama o m√©todo de inscri√ß√£o para t√≥picos. </li><li>  depois que o evento √© gerado no kernel, ele √© entregue aos processos que atendem √†s conex√µes. </li></ul><br><p>  Imagine que temos 50.000 assinantes do t√≥pico "not√≠cias".  Os assinantes s√£o distribu√≠dos igualmente por 5 servidores.  Como resultado, cada atualiza√ß√£o, chegando ao ponto de troca, ser√° replicada 50.000 vezes: 10.000 vezes para cada servidor, de acordo com o n√∫mero de assinantes.  N√£o √© um esquema muito eficaz, √©? <br>  Para melhorar a situa√ß√£o, introduzimos um proxy com o mesmo nome com o ponto de troca.  O registrador global de nomes deve poder retornar o processo mais pr√≥ximo pelo nome, isso √© importante. </p><br><p>  Execute esse proxy nos servidores da camada de acesso e todos os nossos processos que atendem √† API do soquete da Web se inscrever√£o nele, e n√£o no ponto de troca pub-sub original no kernel.  O proxy assina o kernel apenas no caso de uma assinatura exclusiva e replica a mensagem recebida para todos os seus assinantes. <br>  Como resultado, 5 mensagens ser√£o enviadas entre o kernel e os servidores de acesso, em vez de 50.000. </p><br><h2 id="marshrutizaciya-i-balansirovka">  Roteamento e balanceamento </h2><br><h3 id="req-resp">  Req-resp </h3><br><p>  Na implementa√ß√£o atual do sistema de mensagens, existem 7 estrat√©gias de distribui√ß√£o de consultas: </p><br><ul><li>  <code>default</code> .  A solicita√ß√£o √© passada para todos os controladores. </li><li>  <code>round-robin</code> .  Repete e distribui ciclicamente solicita√ß√µes entre controladores. </li><li>  <code>consensus</code> .  Os controladores que servem o servi√ßo s√£o divididos em l√≠deres e seguidores.  As solicita√ß√µes s√£o passadas apenas ao l√≠der. </li><li>  <code>consensus &amp; round-robin</code> .  H√° um l√≠der no grupo, mas os pedidos s√£o distribu√≠dos entre todos os membros. </li><li>  <code>sticky</code> .  A fun√ß√£o hash √© calculada e atribu√≠da a um manipulador espec√≠fico.  Solicita√ß√µes subsequentes com esta assinatura v√£o para o mesmo manipulador. </li><li>  <code>sticky-fun</code> .  Quando o ponto de troca √© inicializado, a fun√ß√£o de c√°lculo de hash para balanceamento de <code>sticky</code> √© transferida adicionalmente. </li><li>  <code>fun</code> .  √â semelhante ao pegajoso, mas al√©m disso, voc√™ pode redirecionar, rejeitar ou pr√©-process√°-lo. </li></ul><br><p>  A estrat√©gia de distribui√ß√£o √© definida quando o ponto de troca √© inicializado. </p><br><p>  Al√©m do balanceamento de mensagens, voc√™ pode marcar entidades.  Considere os tipos de tags no sistema: </p><br><ul><li>  Etiqueta de conex√£o.  Permite que voc√™ entenda por qual conex√£o os eventos vieram.  Usado quando o processo do controlador se conecta ao mesmo ponto de troca, mas com chaves de roteamento diferentes. </li><li>  Etiqueta de servi√ßo.  Permite que um √∫nico servi√ßo agrupe processadores e expanda os recursos de roteamento e balanceamento.  Para o padr√£o req-resp, o roteamento √© linear.  Enviamos uma solicita√ß√£o ao ponto de troca e depois a envia ao servi√ßo.  Por√©m, se precisarmos dividir os manipuladores em grupos l√≥gicos, a divis√£o ser√° realizada usando tags.  Ao especificar um tag, a solicita√ß√£o ser√° direcionada para um grupo espec√≠fico de controladores. </li><li>  Solicitar tag.  Permite distinguir respostas.  Como nosso sistema √© ass√≠ncrono, para processar respostas de servi√ßo, voc√™ deve poder especificar uma RequestTag ao enviar uma solicita√ß√£o.  A partir dele, podemos entender a resposta para a qual o pedido chegou at√© n√≥s. </li></ul><br><h3 id="pub-sub">  Pub sub </h3><br><p>  Para pub-sub, as coisas s√£o um pouco mais f√°ceis.  Temos um ponto de troca para o qual as mensagens s√£o publicadas.  O ponto de troca distribui mensagens entre os assinantes que assinam as chaves de roteamento de que precisam (podemos dizer que isso √© an√°logo a elas). </p><br><h2 id="masshtabiruemost-i-otkazoustoychivost">  Escalabilidade e resili√™ncia </h2><br><p>  A escalabilidade do sistema como um todo depende do grau de escalabilidade das camadas e componentes do sistema: </p><br><ul><li>  Os servi√ßos s√£o dimensionados adicionando n√≥s adicionais ao cluster com manipuladores para este servi√ßo.  Durante a opera√ß√£o de teste, voc√™ pode escolher a pol√≠tica de balanceamento ideal. </li><li>  O pr√≥prio servi√ßo de mensagens, em um √∫nico cluster, geralmente √© escalado movendo pontos de troca especialmente carregados para n√≥s de cluster individuais ou adicionando processos de proxy a zonas especialmente carregadas do cluster. </li><li>  A escalabilidade de todo o sistema como uma caracter√≠stica depende da flexibilidade da arquitetura e da possibilidade de combinar clusters individuais em uma entidade l√≥gica comum. </li></ul><br><p>  A simplicidade e a velocidade do dimensionamento geralmente determinam o sucesso de um projeto.  As mensagens em seu desempenho atual aumentam com o aplicativo.  Mesmo se n√£o tivermos um grupo de 50 a 60 carros, podemos recorrer √† federa√ß√£o.  Infelizmente, o t√≥pico da federa√ß√£o est√° al√©m do escopo deste artigo. </p><br><h2 id="rezervirovanie">  Reserva </h2><br><p>  Na an√°lise do balanceamento de carga, j√° discutimos a reserva de controladores de servi√ßo.  No entanto, as mensagens tamb√©m devem ser reservadas.  No caso de uma falha no n√≥ ou na m√°quina, as mensagens devem se recuperar automaticamente e o mais r√°pido poss√≠vel. </p><br><p>  Nos meus projetos, uso n√≥s adicionais que captam a carga em caso de queda.  Erlang possui uma implementa√ß√£o de modo distribu√≠do padr√£o para aplicativos OTP.  O modo distribu√≠do, de fato, executa a recupera√ß√£o no caso de uma falha iniciando o aplicativo com falha em outro n√≥ iniciado anteriormente.  O processo √© transparente, ap√≥s uma falha, o aplicativo se move automaticamente para o n√≥ de failover.  Voc√™ pode ler mais sobre esta funcionalidade <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . </p><br><h2 id="proizvoditelnost">  Desempenho </h2><br><p>  Vamos tentar comparar pelo menos aproximadamente o desempenho do rabbitmq e nossas mensagens personalizadas. <br>  Encontrei os resultados <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">oficiais do</a> teste rabbitmq da equipe openstack. </p><br><p>  Na cl√°usula 6.14.1.2.1.2.2.  O documento original apresenta o resultado do RPC CAST: <br><img src="https://habrastorage.org/webt/bz/qq/us/bzqqussv9flqi-wvzhgj8i43wcw.png"></p><br><p>  Anteriormente, n√£o far√≠amos nenhuma configura√ß√£o adicional no kernel do SO ou na VM erlang.  Condi√ß√µes de teste: </p><br><ul><li>  erl opta: + A1 + sbtu. </li><li>  O teste em um √∫nico n√≥ erlang √© executado em um laptop com um i7 antigo em desempenho m√≥vel. </li><li>  Os testes de cluster s√£o realizados em servidores com uma rede 10G. </li><li>  O c√≥digo funciona em cont√™ineres de janela de encaixe.  Rede no modo NAT. </li></ul><br><p>  C√≥digo do teste: </p><br><pre> <code class="erlang hljs"><span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">req_resp_bench</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_)</span></span></span><span class="hljs-function"> -&gt;</span></span> W = perftest:comprehensive(<span class="hljs-number"><span class="hljs-number">10000</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">fun</span></span>() -&gt; messaging:request(?EXCHANGE, default, ping, self()), <span class="hljs-keyword"><span class="hljs-keyword">receive</span></span> #'$msg'{message = pong} -&gt; ok <span class="hljs-keyword"><span class="hljs-keyword">after</span></span> <span class="hljs-number"><span class="hljs-number">5000</span></span> -&gt; throw(timeout) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> ), <span class="hljs-literal"><span class="hljs-literal">true</span></span> = lists:any(<span class="hljs-keyword"><span class="hljs-keyword">fun</span></span>(E) -&gt; E &gt;= <span class="hljs-number"><span class="hljs-number">30000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, W), ok.</code> </pre> <br><p>  <em>Cen√°rio 1:</em> O teste √© executado em um laptop com uma execu√ß√£o m√≥vel antiga do i7.  Teste, sistema de mensagens e servi√ßo s√£o executados em um n√≥ em um cont√™iner de docker: </p><br><pre> <code class="plaintext hljs">Sequential 10000 cycles in ~0 seconds (26987 cycles/s) Sequential 20000 cycles in ~1 seconds (26915 cycles/s) Sequential 100000 cycles in ~4 seconds (26957 cycles/s) Parallel 2 100000 cycles in ~2 seconds (44240 cycles/s) Parallel 4 100000 cycles in ~2 seconds (53459 cycles/s) Parallel 10 100000 cycles in ~2 seconds (52283 cycles/s) Parallel 100 100000 cycles in ~3 seconds (49317 cycles/s)</code> </pre> <br><p>  <em>Cen√°rio 2</em> : 3 n√≥s em execu√ß√£o em m√°quinas diferentes sob a janela de encaixe (NAT). </p><br><pre> <code class="plaintext hljs">Sequential 10000 cycles in ~1 seconds (8684 cycles/s) Sequential 20000 cycles in ~2 seconds (8424 cycles/s) Sequential 100000 cycles in ~12 seconds (8655 cycles/s) Parallel 2 100000 cycles in ~7 seconds (15160 cycles/s) Parallel 4 100000 cycles in ~5 seconds (19133 cycles/s) Parallel 10 100000 cycles in ~4 seconds (24399 cycles/s) Parallel 100 100000 cycles in ~3 seconds (34517 cycles/s)</code> </pre> <br><p>  Em todos os casos, a utiliza√ß√£o da CPU n√£o excedeu 250% </p><br><h2 id="itogi">  Sum√°rio </h2><br><p>  Espero que esse ciclo n√£o pare√ßa um despejo de consci√™ncia e minha experi√™ncia traga benef√≠cios reais tanto para pesquisadores de sistemas distribu√≠dos quanto para profissionais que est√£o no come√ßo do caminho de constru√ß√£o de arquiteturas distribu√≠das para seus sistemas de neg√≥cios e que olham para Erlang / Elixir com interesse, mas duvidam. vale a pena ... </p><br><p>  Foto por <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">@chuttersnap</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt446344/">https://habr.com/ru/post/pt446344/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt446334/index.html">Reflex√µes sobre uma carreira em TI e dicas para iniciantes</a></li>
<li><a href="../pt446336/index.html">Como banir senhas padr√£o e fazer com que todos te odeiem</a></li>
<li><a href="../pt446338/index.html">SVG 3D: criar, girar e animar</a></li>
<li><a href="../pt446340/index.html">Sistemas operacionais: tr√™s pe√ßas f√°ceis. Parte 1: Introdu√ß√£o (tradu√ß√£o)</a></li>
<li><a href="../pt446342/index.html">O impacto de p√°ginas grandes e transparentes no desempenho do sistema</a></li>
<li><a href="../pt446346/index.html">Desenvolver aplicativos para Android √© como ser um YouTube (desmonetizado)</a></li>
<li><a href="../pt446348/index.html">API simples do tipo JSON-RPC em PHP</a></li>
<li><a href="../pt446350/index.html">O que acabou matando o AirPower</a></li>
<li><a href="../pt446352/index.html">Prote√ß√£o sem prote√ß√£o</a></li>
<li><a href="../pt446354/index.html">Semana 14 de Seguran√ßa: ShadowHammer e cadeia de suprimentos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>