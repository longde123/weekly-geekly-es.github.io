<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§í üë©üèø‚Äç‚öñÔ∏è ü•Ñ Migration de Cassandra vers Kubernetes: fonctionnalit√©s et solutions üë®‚Äçüëß‚Äçüë¶ ‚ôªÔ∏è üëèüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous rencontrons r√©guli√®rement la base de donn√©es Apache Cassandra et la n√©cessit√© de l'exploiter dans le cadre de l'infrastructure bas√©e sur Kubernet...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Migration de Cassandra vers Kubernetes: fonctionnalit√©s et solutions</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/475036/"><img src="https://habrastorage.org/webt/5a/mf/ts/5amftsu06d04r-vmvx9to725ss0.png"><br><br>  Nous rencontrons r√©guli√®rement la base de donn√©es Apache Cassandra et la n√©cessit√© de l'exploiter dans le cadre de l'infrastructure bas√©e sur Kubernetes.  Dans cet article, nous partagerons notre vision des √©tapes n√©cessaires, des crit√®res et des solutions existantes (y compris un aper√ßu des op√©rateurs) pour la migration de Cassandra vers les K8. <a name="habracut"></a><br><br><h2>  ¬´Qui peut contr√¥ler une femme fera face √† l'√âtat¬ª </h2><br>  Qui est Cassandra?  Il s'agit d'un syst√®me de stockage distribu√© con√ßu pour g√©rer de grandes quantit√©s de donn√©es tout en offrant une haute disponibilit√© sans un seul point de d√©faillance.  Le projet n'a gu√®re besoin d'une longue introduction, donc je ne donnerai que les principales caract√©ristiques de Cassandra, qui seront pertinentes dans le contexte d'un article sp√©cifique: <br><br><ul><li>  Cassandra est √©crite en Java. </li><li>  La topologie Cassandra comprend plusieurs niveaux: <ul><li>  Node - une instance d√©ploy√©e de Cassandra; </li><li>  Rack - un groupe d'instances Cassandra, unies par n'importe quel attribut, situ√©es dans un centre de donn√©es; </li><li>  Datacenter - la totalit√© de tous les groupes d'instances Cassandra situ√©s dans un centre de donn√©es; </li><li>  Cluster - une collection de tous les centres de donn√©es. </li></ul></li><li>  Cassandra utilise une adresse IP pour identifier l'h√¥te. </li><li>  Pour la vitesse des op√©rations de lecture et d'√©criture, Cassandra stocke une partie des donn√©es dans la RAM. </li></ul><br>  Maintenant, pour le d√©placement potentiel r√©el vers Kubernetes. <br><br><h2>  Liste de contr√¥le pour la migration </h2><br>  En parlant de la migration de Cassandra vers Kubernetes, nous esp√©rons qu'il deviendra plus pratique de la g√©rer avec le d√©m√©nagement.  Qu'est-ce qui sera n√©cessaire pour cela, qu'est-ce qui vous aidera? <br><br><h3>  1. Stockage des donn√©es </h3><br>  Comme d√©j√† sp√©cifi√©, une partie des donn√©es que Cassanda stocke dans la RAM - dans <i>Memtable</i> .  Mais il existe un autre √©l√©ment de donn√©es qui est enregistr√© sur le disque - sous la forme de <i>SSTable</i> .  √Ä ces donn√©es s'ajoute le <i>journal de</i> l'entit√© - les enregistrements de toutes les transactions qui sont √©galement enregistr√©es sur le disque. <br><br><img src="https://habrastorage.org/webt/2g/2e/ck/2g2eck2szmozuahdx4oinucww9o.png"><br>  <i>Sch√©ma de transaction d'√©criture Cassandra</i> <br><br>  Dans Kubernetes, nous pouvons utiliser PersistentVolume pour stocker des donn√©es.  Gr√¢ce √† des m√©canismes bien d√©velopp√©s, l'utilisation des donn√©es dans Kubernetes devient plus facile chaque ann√©e. <br><br><img src="https://habrastorage.org/webt/3f/_6/eh/3f_6eh1n50l6dofpd9pds9s4ewg.png"><br>  <i>Pour chaque pod avec Cassandra, nous allouerons notre volume persistant</i> <br><br>  Il est important de noter que Cassandra elle-m√™me implique la r√©plication des donn√©es, offrant des m√©canismes int√©gr√©s pour cela.  Par cons√©quent, si vous cr√©ez un cluster Cassandra √† partir d'un grand nombre de n≈ìuds, il n'est pas n√©cessaire d'utiliser des syst√®mes distribu√©s tels que Ceph ou GlusterFS pour stocker des donn√©es.  Dans ce cas, il sera logique de stocker des donn√©es sur le disque h√¥te en utilisant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des disques persistants locaux</a> ou en montant <code>hostPath</code> . <br><br>  Une autre question est de savoir si vous souhaitez cr√©er un environnement de d√©veloppement distinct pour chaque branche de fonctionnalit√©.  Dans ce cas, l'approche correcte serait de soulever un n≈ìud Cassandra et de stocker les donn√©es dans un stockage distribu√©, c'est-√†-dire  Ceph et GlusterFS mentionn√©s seront votre option.  Le d√©veloppeur sera alors s√ªr de ne pas perdre de donn√©es de test m√™me si l'un des n≈ìuds du cluster Kuberntes est perdu. <br><br><h3>  2. Suivi </h3><br>  Prometheus est un choix pratiquement non alternatif pour la surveillance dans Kubernetes <i>(nous en avons parl√© en d√©tail dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rapport correspondant</a> )</i> .  Comment Cassandra s'en sort-elle avec les exportateurs de m√©triques pour Prometheus?  Et qu'est-ce qui est encore plus important en quelque sorte, avec des tableaux de bord qui leur conviennent pour Grafana? <br><br><img src="https://habrastorage.org/webt/g0/vq/et/g0vqetugsowufigbskokdr74_2q.png"><br>  <i>Un exemple de l'apparition de graphiques dans Grafana pour Cassandra</i> <br><br>  Il n'y a que deux exportateurs: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">jmx_exporter</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cassandra_exporter</a> . <br><br>  Nous avons choisi le premier pour nous, car: <br><br><ol><li>  JMX Exporter se d√©veloppe et se d√©veloppe, tandis que Cassandra Exporter n'a pas pu obtenir le soutien appropri√© de la communaut√©.  Cassandra Exporter ne prend toujours pas en charge la plupart des versions de Cassandra. </li><li>  Vous pouvez l'ex√©cuter en tant que javaagent en ajoutant l'indicateur <code>-javaagent:&lt;plugin-dir-name&gt;/cassandra-exporter.jar=--listen=:9180</code> . </li><li>  Pour lui, il existe un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tableau de bord ad√©quat</a> qui est incompatible avec Cassandra Exporter. </li></ol><br><h3>  3. S√©lection des primitives Kubernetes </h3><br>  Selon la structure ci-dessus du cluster Cassandra, nous essaierons de traduire tout ce qui y est d√©crit dans la terminologie Kubernetes: <br><br><ul><li>  Noeud Cassandra ‚Üí Pod </li><li>  Cassandra Rack ‚Üí StatefulSet </li><li>  Cassandra Datacenter ‚Üí pool de StatefulSets </li><li>  Cluster Cassandra ‚Üí ??? </li></ul><br>  Il s'av√®re qu'il manque une entit√© suppl√©mentaire pour g√©rer l'ensemble du cluster Cassandra √† la fois.  Mais si quelque chose n'est pas l√†, nous pouvons le cr√©er!  Kubernetes dispose d'un moteur de d√©finition de ressources d√©di√© appel√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">D√©finitions de ressources personnalis√©es</a> . <br><br><img src="https://habrastorage.org/webt/pt/ob/st/ptobst6r86hra1aakwvpcypws8e.png"><br>  <i>Annonce de ressources suppl√©mentaires pour les journaux et les alertes</i> <br><br>  Mais Custom Resource seul ne veut rien dire: vous avez besoin d'un <b>contr√¥leur</b> pour cela.  Vous devrez peut-√™tre recourir √† l'aide d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">op√©rateur Kubernetes</a> ... <br><br><h3>  4. Identification des gousses </h3><br>  Le point ci-dessus, nous avons convenu qu'un n≈ìud Cassandra √©quivaudrait √† un pod dans Kubernetes.  Mais les adresses IP du pod seront diff√©rentes √† chaque fois.  Et l'identification du n≈ìud dans Cassandra se produit pr√©cis√©ment sur la base de l'adresse IP ... Il s'av√®re qu'apr√®s chaque retrait du pod, le cluster Cassandra ajoutera un nouveau n≈ìud. <br><br>  Il existe une issue, pas m√™me une: <br><br><ol><li>  Nous pouvons conserver des enregistrements par des identifiants d'h√¥te (UUID qui identifient de mani√®re unique les instances de Cassandra) ou par des adresses IP et enregistrer tout cela dans certaines structures / tableaux.  La m√©thode pr√©sente deux inconv√©nients principaux: <br><br><ul><li>  Le risque d'une condition de concurrence lorsque deux n≈ìuds tombent √† la fois.  Apr√®s la mise √† niveau, les n≈ìuds Cassandra iront simultan√©ment demander une adresse IP pour eux-m√™mes √† partir de la table et rivaliser pour la m√™me ressource. </li><li>  Si le n≈ìud Cassandra a perdu ses donn√©es, nous ne pourrons plus l'identifier. </li></ul></li><li>  La deuxi√®me solution semble √™tre un petit hack, mais n√©anmoins: nous pouvons cr√©er un service avec ClusterIP pour chaque n≈ìud Cassandra.  Probl√®mes avec cette impl√©mentation: <br><br><ul><li>  S'il y a beaucoup de n≈ìuds dans un cluster Cassandra, nous devrons cr√©er beaucoup de services. </li><li>  La fonctionnalit√© ClusterIP est impl√©ment√©e via iptables.  Cela peut √™tre un probl√®me si le cluster Cassandra a plusieurs (1000 ... ou m√™me 100?) N≈ìuds.  Bien que l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©quilibrage bas√© sur IPVS</a> puisse r√©soudre ce probl√®me. </li></ul></li><li>  La troisi√®me solution consiste √† utiliser un r√©seau de n≈ìuds pour les n≈ìuds Cassandra au lieu d'un r√©seau de pod d√©di√© en activant le <code>hostNetwork: true</code> .  Cette m√©thode impose certaines restrictions: <br><br><ul><li>  Pour remplacer les n≈ìuds.  Il est n√©cessaire que le nouvel h√¥te doit avoir la m√™me adresse IP que le pr√©c√©dent (dans les nuages ‚Äã‚Äãcomme AWS, GCP, c'est presque impossible √† faire); </li><li>  En utilisant le r√©seau de n≈ìuds de cluster, nous commen√ßons √† rivaliser pour les ressources r√©seau.  Par cons√©quent, mettre sur un n≈ìud de cluster plus d'un pod avec Cassandra sera probl√©matique. </li></ul></li></ol><br><h3>  5. Sauvegardes </h3><br>  Nous voulons garder la version compl√®te des donn√©es pour un n≈ìud Cassandra sur un calendrier.  Kubernetes offre une opportunit√© pratique en utilisant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CronJob</a> , mais ici Cassandra ins√®re les b√¢tons dans les roues. <br><br>  Permettez-moi de vous rappeler qu'une partie des donn√©es que Cassandra stocke en m√©moire.  Pour effectuer une sauvegarde compl√®te, vous devez transf√©rer les donn√©es de la m√©moire ( <i>Memtables</i> ) vers le disque ( <i>SSTables</i> ).  √Ä ce stade, le n≈ìud Cassandra cesse d'accepter les connexions, s'arr√™tant compl√®tement √† partir du cluster. <br><br>  Apr√®s cela, une sauvegarde ( <i>instantan√©</i> ) est supprim√©e et le sch√©ma ( <i>espace de cl√©s</i> ) est <i>enregistr√©</i> .  Et puis il s'av√®re que juste une sauvegarde ne nous donne rien: vous devez enregistrer les identifiants de donn√©es dont le n≈ìud Cassandra √©tait responsable - ce sont des jetons sp√©ciaux. <br><br><img src="https://habrastorage.org/webt/ve/el/00/veel00wgdubtmtyhjn2gh9kx4rw.png"><br>  <i>Distribution de jetons pour identifier les donn√©es responsables des n≈ìuds Cassandra</i> <br><br>  Un exemple de script pour supprimer Cassandra de Google dans Kubernetes peut √™tre trouv√© sur <a href="">ce lien</a> .  Le seul point que le script ne prend pas en compte est le vidage des donn√©es sur le n≈ìud avant de supprimer l'instantan√©.  Autrement dit, la sauvegarde n'est pas effectu√©e pour l'√©tat actuel, mais pour l'√©tat un peu plus t√¥t.  Mais cela aide √† ne pas mettre le n≈ìud hors de travail, ce qui semble tr√®s logique. <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">set</span></span> -eu <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ -z <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$1</span></span></span><span class="hljs-string">"</span></span> ]]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> info <span class="hljs-string"><span class="hljs-string">"Please provide a keyspace"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 1 <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> KEYSPACE=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$1</span></span></span><span class="hljs-string">"</span></span> result=$(nodetool snapshot <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${KEYSPACE}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [[ $? -ne 0 ]]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Error while making snapshot"</span></span> <span class="hljs-built_in"><span class="hljs-built_in">exit</span></span> 1 <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> timestamp=$(<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$result</span></span></span><span class="hljs-string">"</span></span> | awk <span class="hljs-string"><span class="hljs-string">'/Snapshot directory: / { print $3 }'</span></span>) mkdir -p /tmp/backup <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> path <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $(find <span class="hljs-string"><span class="hljs-string">"/var/lib/cassandra/data/</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${KEYSPACE}</span></span></span><span class="hljs-string">"</span></span> -name <span class="hljs-variable"><span class="hljs-variable">$timestamp</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> table=$(<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${path}</span></span></span><span class="hljs-string">"</span></span> | awk -F <span class="hljs-string"><span class="hljs-string">"[/-]"</span></span> <span class="hljs-string"><span class="hljs-string">'{print $7}'</span></span>) mkdir /tmp/backup/<span class="hljs-variable"><span class="hljs-variable">$table</span></span> mv <span class="hljs-variable"><span class="hljs-variable">$path</span></span> /tmp/backup/<span class="hljs-variable"><span class="hljs-variable">$table</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> tar -zcf /tmp/backup.tar.gz -C /tmp/backup . nodetool clearsnapshot <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${KEYSPACE}</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br>  <i>Exemple de script bash pour supprimer la sauvegarde d'un seul n≈ìud Cassandra</i> <br><br><h2>  Solutions pr√™tes √† l'emploi pour Cassandra √† Kubernetes </h2><br>  Que utilisent-ils actuellement pour d√©ployer Cassandra dans Kubernetes, et lequel est le plus adapt√© aux exigences donn√©es? <br><br><h3>  1. Solutions StatefulSet ou Helm Chart </h3><br>  L'utilisation des StatefulSets de base pour d√©marrer un cluster Cassandra est une bonne option.  En utilisant le mod√®le Helm chart et Go, vous pouvez fournir √† l'utilisateur une interface flexible pour d√©ployer Cassandra. <br><br>  Habituellement, cela fonctionne bien ... jusqu'√† ce que quelque chose d'inattendu se produise - par exemple, un n≈ìud tombe en panne.  Les outils Kubernetes standard ne peuvent tout simplement pas prendre en compte toutes les fonctionnalit√©s ci-dessus.  De plus, cette approche est tr√®s limit√©e dans la fa√ßon dont elle peut √™tre √©tendue pour une utilisation plus complexe: remplacement de n≈ìud, sauvegarde, restauration, surveillance, etc. <br><br>  Repr√©sentants: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Graphique du r√©f√©rentiel Helm principal</a> ; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Graphique de bitnami</a> . </li></ul><br>  Les deux graphiques sont √©galement bons, mais sont sujets aux probl√®mes d√©crits ci-dessus. <br><br><h3>  2. Solutions bas√©es sur Kubernetes Operator </h3><br>  Ces options sont plus int√©ressantes car elles offrent des capacit√©s de gestion de cluster √©tendues.  Pour concevoir une instruction Cassandra, comme toute autre base de donn√©es, un bon mod√®le ressemble √† Sidecar &lt;-&gt; Controller &lt;-&gt; CRD: <br><br><img src="https://habrastorage.org/webt/4y/3b/ac/4y3bacrtm3apdyirfanehdzf82w.png"><br>  <i>Diagramme de gestion des n≈ìuds dans une instruction Cassandra correctement con√ßue</i> <br><br>  Consid√©rez les op√©rateurs existants. <br><br><h4>  1. Cassandra-operator par instaclustr </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> </li><li>  Volont√©: Alpha </li><li>  Licence: Apache 2.0 </li><li>  Impl√©ment√© en: Java </li></ul><br>  Il s'agit en effet d'un projet tr√®s prometteur et en d√©veloppement rapide d'une entreprise qui propose des d√©ploiements g√©r√©s par Cassandra.  Il, comme d√©crit ci-dessus, utilise un conteneur sidecar qui accepte les commandes via HTTP.  Il est √©crit en Java, donc il lui manque parfois la fonctionnalit√© de biblioth√®que client-go plus avanc√©e.  En outre, l'op√©rateur ne prend pas en charge diff√©rents racks pour un centre de donn√©es. <br><br>  Mais l'op√©rateur a des avantages tels que la prise en charge de la surveillance, la gestion de cluster de haut niveau √† l'aide de CRD et m√™me la documentation sur la suppression des sauvegardes. <br><br><h4>  2. Navigator par Jetstack </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> </li><li>  Volont√©: Alpha </li><li>  Licence: Apache 2.0 </li><li>  Mis en ≈ìuvre en: Golang </li></ul><br>  Une d√©claration pour le d√©ploiement de DB-as-a-Service.  Prend actuellement en charge deux bases de donn√©es: Elasticsearch et Cassandra.  Il a des solutions int√©ressantes comme le contr√¥le d'acc√®s √† la base de donn√©es via RBAC (pour cela, son propre navigateur-apiserver distinct est lev√©).  Un projet int√©ressant, qui m√©riterait un examen plus approfondi, mais le dernier engagement a √©t√© pris il y a un an et demi, ce qui r√©duit clairement son potentiel. <br><br><h4>  3. Cassandra-op√©rateur de vgkowski </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> </li><li>  Volont√©: Alpha </li><li>  Licence: Apache 2.0 </li><li>  Mis en ≈ìuvre en: Golang </li></ul><br>  Ils ne l'ont pas consid√©r√© ¬´s√©rieusement¬ª, car le dernier commit sur le r√©f√©rentiel remonte √† plus d'un an.  Le d√©veloppement des op√©rateurs est abandonn√©: la derni√®re version de Kubernetes, d√©clar√©e prise en charge, est la 1.9. <br><br><h4>  4. Cassandra-op√©rateur de Rook </h4><br><ul><li>  <a href="">Github</a> </li><li>  Volont√©: Alpha </li><li>  Licence: Apache 2.0 </li><li>  Mis en ≈ìuvre en: Golang </li></ul><br>  Un op√©rateur dont le d√©veloppement ne va pas aussi vite que nous le souhaiterions.  Il a une structure CRD bien pens√©e pour g√©rer le cluster, r√©sout le probl√®me de l'identification des n≈ìuds en utilisant Service avec ClusterIP (le m√™me "hack") ... mais pour l'instant c'est tout.  Il n'y a pas de surveillance et de sauvegardes pr√™tes √† l'emploi pour l'instant (au fait, nous avons <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">commenc√© √† nous</a> surveiller).  Un point int√©ressant est qu'en utilisant cet op√©rateur, vous pouvez √©galement d√©ployer ScyllaDB. <br><br>  <i>NB: Nous avons utilis√© cet op√©rateur avec des modifications mineures dans l'un de nos projets.</i>  <i>Il n'y a eu aucun probl√®me dans le travail de l'op√©rateur pendant toute l'op√©ration (~ 4 mois de fonctionnement).</i> <br><br><h4>  5. CassKop par Orange </h4><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Github</a> </li><li>  Volont√©: Alpha </li><li>  Licence: Apache 2.0 </li><li>  Mis en ≈ìuvre en: Golang </li></ul><br>  Le plus jeune op√©rateur de la liste: le premier commit a √©t√© effectu√© le 23 mai 2019.  D√©j√†, il a dans son arsenal un grand nombre de fonctionnalit√©s de notre liste, dont plus de d√©tails peuvent √™tre trouv√©s dans le r√©f√©rentiel du projet.  L'op√©rateur est bas√© sur le populaire operator-sdk.  Prend en charge la surveillance pr√™te √† l'emploi.  La principale diff√©rence avec les autres op√©rateurs est l'utilisation du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plugin CassKop</a> , impl√©ment√© en Python et utilis√© pour la communication entre les n≈ìuds Cassandra. <br><br><h2>  Conclusions </h2><br>  Le nombre d'approches et d'options possibles pour porter Cassandra vers Kubernetes parle de lui-m√™me: le sujet est en demande. <br><br>  √Ä ce stade, vous pouvez essayer l'une des solutions ci-dessus √† vos risques et p√©rils: aucun des d√©veloppeurs ne garantit le travail √† 100% de leur solution dans l'environnement de production.  Mais maintenant, de nombreux produits semblent prometteurs d'essayer de les utiliser dans les stands de d√©veloppement. <br><br>  Je pense qu'√† l'avenir, cette femme sur le navire devra partir! <br><br><h2>  PS </h2><br>  Lisez aussi dans notre blog: <br><br><ul><li>  ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Migration sans entrave de MongoDB vers Kubernetes</a> ¬ª; </li><li>  ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Migration sans obstacle de RabbitMQ vers Kubernetes</a> ¬ª; </li><li>  ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bases de donn√©es et Kubernetes (revue et reportage vid√©o)</a> ¬ª; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">K8s trucs et astuces: Acc√©l√©rer le bootstrap de grandes bases de donn√©es.</a> " </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475036/">https://habr.com/ru/post/fr475036/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475024/index.html">La course √† pied est un sport id√©al pour un travailleur √† distance. Partie 1: le chemin vers la premi√®re course d'une centaine de kilom√®tres</a></li>
<li><a href="../fr475026/index.html">3 histoires de crash de Kubernetes en production: anti-affinit√©, arr√™t gracieux, webhook</a></li>
<li><a href="../fr475028/index.html">Observations sur l'application du ML en affaires sur les actions ≈ΩijemeIT</a></li>
<li><a href="../fr475032/index.html">Gartner Hype Cycle 2019: d√©briefing</a></li>
<li><a href="../fr475034/index.html">Graphique dans le navigateur pour Arduino et STM32</a></li>
<li><a href="../fr475038/index.html">La premi√®re s√©rie de "Math√©matiques appliqu√©es et informatique" au HSE de Saint-P√©tersbourg: qui sont-ils et comment travailler avec eux?</a></li>
<li><a href="../fr475044/index.html">Construire votre propre serveur sans serveur bas√© sur Fn</a></li>
<li><a href="../fr475046/index.html">La fin justifie-t-elle les moyens? (!) SEO noir et gris</a></li>
<li><a href="../fr475048/index.html">Explication intuitive du test d'hypoth√®se et valeur de p</a></li>
<li><a href="../fr475050/index.html">ESports - jouer, s'engager</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>