<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚴🏾 🤬 📙 ESP8266 Wo soll ich anfangen oder erste Erfahrungen machen? 👨🏿‍🏫 🎥 ❄️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In diesem Artikel möchte ich meine Erfahrungen darüber mitteilen, was zu tun ist, wenn die ESP8266-Schals zum ersten Mal in meine Hände fallen. Machen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ESP8266 Wo soll ich anfangen oder erste Erfahrungen machen?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/394535/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Artikel möchte ich meine Erfahrungen darüber mitteilen, was zu tun ist, wenn die ESP8266-Schals zum ersten Mal in meine Hände fallen. </font><font style="vertical-align: inherit;">Machen Sie sofort eine Reservierung, dass das Pflücken solcher Eisenstücke sowie das Programmieren mein Hobby für mein Geld und in meiner Freizeit von meiner Haupttätigkeit ist. </font><font style="vertical-align: inherit;">Bitte behandeln Sie den Grad der Kritik an diesem Material mit einem gewissen Rabatt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Warum habe ich beschlossen, dies zu schreiben? </font><font style="vertical-align: inherit;">Es ist ganz einfach: Ich habe 3 Wochen getötet, um herauszufinden, wo ich anfangen soll und wie es funktioniert. </font><font style="vertical-align: inherit;">Außerdem werde ich versuchen, einen kleinen Katalog mit Links für die Arbeit mit ESP8266 zu sammeln. </font><font style="vertical-align: inherit;">Ich hoffe, dass Sie mit diesen Informationen mindestens einen Bruchteil der Zeit sparen. </font></font><br>
<br>
<img src="https://habrastorage.org/files/4ee/3f5/d03/4ee3f5d03937417fb3e6615740e7d527.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Also fangen wir an!</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe 3 Board-Optionen für mich auf einer berühmten chinesischen Website bestellt:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266 WIFI Serial Wireless Dev Test Board basierend auf ESP-12 (im Folgenden „Yellow Board“) (3,12 USD)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266 ESP-07 zusammen mit Adapterplatte für ESP8266 (im Folgenden ESP-07) (2,30 USD)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LoLin V3 NodeMcu Lua basierend auf ESP-12 (im Folgenden als "Lolin" bezeichnet) ($ 3,12)</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Gründe, warum ich so einen Zoo genommen habe:</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das gelbe Board verfügt bereits über eingebaute LEDs, die Sie sofort blinken können. Für die Stromversorgung können Sie nicht fabelhafte 3,3 V verwenden, die Sie irgendwie benötigen, sondern 3 AA-Batterien oder durch Anschließen von 4,5 V (was ich getan habe).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LoLing bestach mich durch die Tatsache, dass es über ein Micro-USB-Kabel angeschlossen ist und sie keine UART-Konverter benötigt - es ist sofort in das chinesische CH340-Chip integriert, für das Sie problemlos Treiber sowohl für win7x64 als auch für win10x64 (meine Fälle) finden können. wieder mit einem normalen Adapter mit USB-Ausgang und nicht mit einem hoch entwickelten 3,3-V-Strom versorgt.</font></font></li>
<li>  ESP-07    . -  ,   ,         .      Adapter Plate —    20 ,    .</li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zunächst - Überprüfung der Module. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In allen Startanweisungen steht, dass das Gerät funktioniert, wenn Sie die Stromversorgung angeschlossen haben und das AI-THINKER xxxxxxx WiFi-Netzwerk angezeigt wurde. </font><font style="vertical-align: inherit;">Es passierte mit meinen Geräten - sie alle haben ein WiFi-Netzwerk erstellt, mit dem Sie eine Verbindung herstellen können. </font><font style="vertical-align: inherit;">Hurra! </font><font style="vertical-align: inherit;">Verdient! </font><font style="vertical-align: inherit;">Ich war begeistert, aber früh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zunächst habe ich mich entschlossen, mit dem Gelben Brett zu experimentieren. </font><font style="vertical-align: inherit;">Der Verkäufer mit dem besten Preisindikator in der Produktbeschreibung hatte nur Bilder. </font><font style="vertical-align: inherit;">Und kein Wort der Beschreibung. </font><font style="vertical-align: inherit;">In russischsprachigen Quellen gab es Verweise auf diese Boards, aber ich fand keine Einzelheiten dazu. </font><font style="vertical-align: inherit;">Bei einigen Verkäufern habe ich diese Anweisung gesehen:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yellow Board Anweisung</font></font></b><div class="spoiler_text">1. Android phone installation IOT.APK, IOS client be released later<br>
2. shorting cap connected to the power to enter the programming mode, enter the normal operating state removed<br>
3. Replace the battery, mobile search network «AI-THINKER» router<br>
4. join the router (the router module form) password is: ai-thinker<br>
5. after the success can be added directly to the control module of the mobile phone.<br>
6. Enter the home router «SSID» and «Password» in the «Configure Device», then click on the icon at the top of the router, wait a few moments after the jump to join the router, connect the phone router WiFi, again «discovered device» to achieve control in the LAN.<br>
<br>
  :<br>
<br>
1.    Wi-Fi     (    5.0  !)  IOT.APK,   IOS   <br>
2.     ,   .<br>
3.   (   )        Wi-Fi  «AI-THINKER»<br>
4.       «ai-thinker»<br>
5.      IOT    .    .    ,       .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Inkonsistenz bestand darin, dass mein AI-THINKER xxxxxxxxxx-Netzwerk nicht nach einem Passwort fragte, sondern sofort das daran angeschlossene Telefon. Und der Anwendungspunkt leer hat das ESP nach dem Herstellen der Verbindung nicht "gesehen". Die RGB-LED leuchtete blau mit installiertem Jumper oder grün ohne. </font></font><br>
<br>
<img src="https://habrastorage.org/files/96d/58f/698/96d58f69805f4f078768b03f4d17800e.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich vermutete, dass die Chinesen vielleicht löten - sie löten, aber sie vergaßen zu blinken (oder krumm zu blinken). Deshalb habe ich beschlossen, mich zu nähen. Für die Firmware habe ich ESP8266 Flasher verwendet. Und dann kam eine zweite Überraschung heraus: Kein Programm erkannte das Board, reagierte nicht auf Befehle, die Firmware flutete nicht. Verbunden über Arduino und über den UART-Konverter - nichts. Die beiden anderen Platinen wurden bereits neu geflasht und mit einer LED geblinkt, aber hier ist es langweilig. Bis ich vermutete, die Kontakte anzurufen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dieser Karte werden drei Kontakte für die Firmware separat angezeigt: TX, RX, GND. Es stellte sich also heraus, dass TX auf dem RX des ESP-12 selbst gezüchtet wurde, RX - auf dem TX. Das heißt, Es mussten nur zwei Drähte ausgetauscht werden: Wir schließen einen UART-Konverter gemäß dem Schema an: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TX-TX </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RX-RX </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GND-GND </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
oder Arduino: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
TX-RX </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
RX-TX </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
GND-GND </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Öffnen wurde das Modul zum Leben erweckt, das ursprüngliche wurde gefunden Firmware zum Blinken von LEDs (AI-THINKER-IOT-2014-10-17 165528.bin) und wird weiterhin mit demselben ESP8266 Flasher geflasht. Das Passwort für den Zugangspunkt wurde angezeigt, und die Anwendung sah sofort die Gelbe Karte. Die einzige Einschränkung: Zum Blinken muss ein Jumper installiert werden, in allen anderen Fällen muss er entfernt werden. Vergessen Sie nicht, das Gerät nach dem Flashen neu zu starten.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266 ESP-07 mit Adapterplatte</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anleitung zum Anschließen von ESP-07 (ESP-12) über einen UART-Konverter:</font></font><br>
<br>
<img src="https://habrastorage.org/files/5c9/768/30c/5c976830ca6e43b89442587c8c791fce.jpg" alt="Bild"><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rot - Leistung 3,3 V;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schwarz - GND;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gelb - auf der ESP8266-Seite - RX, auf der USB-TTL-Seite - TX;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grün - auf der ESP8266-Seite - TX, auf der USB-TTL-Seite - RX;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Orange - CH_PD (CHIP ENABLE) - sollte immer an die Stromversorgung gezogen werden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Blau - GPIO0 - ist über den Schalter mit Masse verbunden, um den Blinkmodus des Moduls zu aktivieren. </font><font style="vertical-align: inherit;">Für den üblichen Start des GPIO0-Moduls können Sie die Verbindung nicht herstellen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grau - GPIO15 (MTDO, HSPICS) Dieser Stift muss zu Boden gezogen werden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie eine Verbindung zu Arduino herstellen, dann RX-RX und TX-TX.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter Verwendung eines Lötkolbens wurden ESP-07 und Adapter kombiniert. </font><font style="vertical-align: inherit;">Ich empfehle den Adapter, da er die Verbindung durch ein lötfreies Verfahren mit einem Steckbrett und Drähten weiter erleichtert. </font><font style="vertical-align: inherit;">In diesem Fall habe ich einen Abwärts-DC / DC-Wandler aus China für die Stromversorgung verwendet. </font><font style="vertical-align: inherit;">DS18B20-Sensoren waren verfügbar, und es wurde beschlossen, sie anzuschließen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich wollte HomesSmart nicht sofort installieren, und die Wahl fiel auf ein </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">solches Beispiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ich werde die Schaltung und den Code nicht erneut eingeben - sie sind fast gleich. </font><font style="vertical-align: inherit;">Es hat nicht sofort funktioniert, aber mit Google und einem Tamburin wurden die Daten zur Personenüberwachung gestartet und flogen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe das Skript über </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESplorer heruntergeladen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es war auf Arduino</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/158/a33/c8d/158a33c8dddc4271a1b8f80ba22afa57.jpg" alt="image"><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wurde auf ESP8266</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/9ca/1eb/f11/9ca1ebf115164f109917b3656383d7f5.jpg" alt="image"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich warte auf das kompakte 220AC - 3.3DC Netzteilmodul, um die Anzahl der Drähte zu optimieren.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LoLin V3 NodeMcu (Lolin)</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Diesem Board wurde empfohlen, die NodeMcu-Firmware sofort zu flashen, was über das NodeMcu-Flasher-Programm erfolgt. </font><font style="vertical-align: inherit;">Die Firmware selbst wird vom Designer zusammengestellt, sodass Sie nur das Notwendigste einbinden können. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Außerdem sollte es ein 2-Kanal-Relais anschließen und steuern und zwei Wandlampen im Schlafzimmer steuern. </font><font style="vertical-align: inherit;">Hier möchte ich auf eine Sache eingehen. </font><font style="vertical-align: inherit;">Die chinesische Version eines solchen Relais hat einen Jumper JD-VCC - VCC - GND. </font><font style="vertical-align: inherit;">Standardmäßig ist es auf den JD-VCC - VCC - Pins installiert. </font></font><br>
<br>
<img src="https://habrastorage.org/files/ec3/cb2/515/ec3cb25158934ab0b80f743fb9fc6aa4.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Jumper kann also niemals auf VCC - GND installiert werden - einen Kurzschluss verursachen! </font><font style="vertical-align: inherit;">Diese drei Kontakte werden verwendet, um das Relais zusätzlich mit Strom zu versorgen, wenn die Steuerung möglicherweise nicht ausreicht, um das Relais zu betreiben. </font><font style="vertical-align: inherit;">Das Vorhandensein eines Jumpers zeigt an, dass die Stromversorgung über die "Steuer" -Kontakte erfolgt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Skript wurde wie folgt verwendet:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skripttext</font></font></b><div class="spoiler_text"><pre><code class="lua hljs">#================= init.lua =================
<span class="hljs-comment"><span class="hljs-comment">--      </span></span>
ssid,pass = <span class="hljs-string"><span class="hljs-string">"SSID"</span></span>,<span class="hljs-string"><span class="hljs-string">"PASSWORD"</span></span>;<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (file.<span class="hljs-built_in"><span class="hljs-built_in">open</span></span>(<span class="hljs-string"><span class="hljs-string">'wificonf'</span></span>) == <span class="hljs-literal"><span class="hljs-literal">true</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>
   ssid = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">gsub</span></span>(file.readline(), <span class="hljs-string"><span class="hljs-string">"\n"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>);<font></font>
   pass = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">gsub</span></span>(file.readline(), <span class="hljs-string"><span class="hljs-string">"\n"</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>);<font></font>
   file.<span class="hljs-built_in"><span class="hljs-built_in">close</span></span>();
<span class="hljs-keyword"><span class="hljs-keyword">end</span></span><font></font>
<font></font>
wifi.setmode(wifi.STATION)<font></font>
wifi.sta.<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>(ssid,pass)<font></font>
wifi.sta.autoconnect(<span class="hljs-number"><span class="hljs-number">1</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">'IP:'</span></span>,wifi.sta.getip());
<span class="hljs-comment"><span class="hljs-comment">--print('MAC:',wifi.sta.getmac());</span></span><font></font>
<font></font>
led1 = <span class="hljs-number"><span class="hljs-number">3</span></span>
led2 = <span class="hljs-number"><span class="hljs-number">4</span></span><font></font>
gpio.mode(led1, gpio.OUTPUT)<font></font>
gpio.mode(led2, gpio.OUTPUT)<font></font>
restart=<span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
gpio.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(led1, gpio.HIGH);<font></font>
gpio.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(led2, gpio.HIGH);<font></font>
<font></font>
<font></font>
t=<span class="hljs-number"><span class="hljs-number">0</span></span>
tmr.alarm(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> t=t+<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> t&gt;<span class="hljs-number"><span class="hljs-number">999</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> t=<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>)<font></font>
<font></font>
srv=net.createServer(net.TCP, <span class="hljs-number"><span class="hljs-number">1000</span></span>)<font></font>
srv:listen(<span class="hljs-number"><span class="hljs-number">80</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(conn)</span></span></span></span>
    conn:on(<span class="hljs-string"><span class="hljs-string">"receive"</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(client,request)</span></span></span></span>
    <span class="hljs-comment"><span class="hljs-comment">--      _GET</span></span>
            <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> buf = <span class="hljs-string"><span class="hljs-string">""</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> _, _, method, <span class="hljs-built_in"><span class="hljs-built_in">path</span></span>, vars = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">find</span></span>(request, <span class="hljs-string"><span class="hljs-string">"([A-Z]+) (.+)?(.+) HTTP"</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(method == <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>
            _, _, method, <span class="hljs-built_in"><span class="hljs-built_in">path</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">find</span></span>(request, <span class="hljs-string"><span class="hljs-string">"([A-Z]+) (.+) HTTP"</span></span>);
        <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> _GET = {}
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (vars ~= <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>
            <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k, v <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">gmatch</span></span>(vars, <span class="hljs-string"><span class="hljs-string">"(%w+)=(%w+)&amp;*"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span><font></font>
                _GET[k] = v<font></font>
            <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>
    <span class="hljs-comment"><span class="hljs-comment">--    </span></span>
       <span class="hljs-comment"><span class="hljs-comment">--    &lt;html&gt;&lt;body&gt;,      \</span></span>
   <span class="hljs-comment"><span class="hljs-comment">--        \,  &lt;/body&gt;&lt;/html&gt;</span></span>
    conn:send(<span class="hljs-string"><span class="hljs-string">'HTTP/1.1 200 OK\r\nConnection: keep-alive\r\nCache-Control: private, no-store\r\n\r\n\
   &lt;!DOCTYPE HTML&gt;\
&lt;html&gt;\
 &lt;head&gt;\
        &lt;meta charset="UTF-8" /&gt;\
        &lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt; \
        &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt; \
        &lt;title&gt;My control&lt;/title&gt;\
   &lt;/head&gt;&lt;body&gt;\
        &lt;div class="container"&gt;\
            &lt;section class="color-1"&gt;\
                &lt;p&gt;\
                    &lt;a href=\"?pin=ON1\"&gt;&lt;button class="btn btn-4 btn-4a"&gt;Back ON&lt;/button&gt;&lt;/a&gt;\
                    &lt;a href=\"?pin=ON2\"&gt;&lt;button class="btn btn-4 btn-4a"&gt;Bra ON&lt;/button&gt;&lt;/a&gt;\
                &lt;/p&gt;\
                &lt;p&gt;\
                    &lt;a href=\"?pin=OFF1\"&gt;&lt;button class="btn btn-5 btn-5a"&gt;Back OFF&lt;/button&gt;&lt;/a&gt;\
                    &lt;a href=\"?pin=OFF2\"&gt;&lt;button class="btn btn-5 btn-5a"&gt;Bra OFF&lt;/button&gt;&lt;/a&gt;\
                &lt;/p&gt;\
            &lt;/section&gt;\
        &lt;/div&gt;\
&lt;/body&gt;&lt;/html&gt;'</span></span>)
    <span class="hljs-comment"><span class="hljs-comment">--  </span></span>
    <span class="hljs-comment"><span class="hljs-comment">--    </span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> _on,_off = <span class="hljs-string"><span class="hljs-string">""</span></span>,<span class="hljs-string"><span class="hljs-string">""</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(_GET.pin == <span class="hljs-string"><span class="hljs-string">"ON1"</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>
              gpio.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(led1, gpio.LOW);
        <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span>(_GET.pin == <span class="hljs-string"><span class="hljs-string">"OFF1"</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>
              gpio.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(led1, gpio.HIGH);
        <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span>(_GET.pin == <span class="hljs-string"><span class="hljs-string">"ON2"</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>
              gpio.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(led2, gpio.LOW);
        <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span>(_GET.pin == <span class="hljs-string"><span class="hljs-string">"OFF2"</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">then</span></span>
              gpio.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(led2, gpio.HIGH);
        <span class="hljs-keyword"><span class="hljs-keyword">end</span></span><font></font>
        <font></font>
  <font></font>
              <font></font>
    conn:on(<span class="hljs-string"><span class="hljs-string">"sent"</span></span>,<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(conn)</span></span></span></span> conn:<span class="hljs-built_in"><span class="hljs-built_in">close</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>)
    <span class="hljs-built_in"><span class="hljs-built_in">collectgarbage</span></span>();<font></font>
<font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>)<font></font>
    <font></font>
<span class="hljs-keyword"><span class="hljs-keyword">end</span></span>)<font></font>
<font></font>
#========================================<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich konnte den Link zur Quelle nicht wiederfinden. </font><font style="vertical-align: inherit;">Das Schema ist jedoch einfach: An Lolin schließen wir Relais 1 und Relais 2 an die Ausgänge D3 und D4 an ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LED1 = 3 LED2 = 4</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Dann gehen wir zu der von unserem Router ausgegebenen IP-Adresse und sehen uns die Seite an: </font></font><br>
<br>
<img src="https://habrastorage.org/files/ad8/e8b/2f5/ad8e8b2f561146fa89068727784382eb.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu meinem großen Bedauern habe ich noch nicht herausgefunden, wie man Schönheit bringt, um beispielsweise eine Datei im CSS-Stil zu verbinden. </font><font style="vertical-align: inherit;">Die Frage betrifft die Verwendung einzelner Dateien beim Anzeigen der Seite und nicht das Festlegen des Stils. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich hoffe wirklich, dass diese Informationen für mindestens eine Person nützlich sind. </font><font style="vertical-align: inherit;">Und urteilen Sie nicht streng nach dem ersten Artikel.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referenzen</font></font></h4><br>
<ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">esp8266.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - eine sehr umfangreiche Ressource zu ESP8266</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NodeMcu-Blinker (ESP8266-Blinker)</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NodeMcu-Konstruktor</font></font></a></li>
<li><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CH340-Treiber</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (für Windows)</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artikel " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266 - Firmware anschließen und aktualisieren</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AI-THINKER-IOT-2014-10-17 165528.bin</a> —    </li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ESplorer</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    DS18B20   </a></li>
<li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">homes-smart</a></li>
</ul></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de394535/">https://habr.com/ru/post/de394535/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de394519/index.html">Android erkennt den Besitzer anhand biometrischer Daten anstelle von Passwörtern</a></li>
<li><a href="../de394521/index.html">Autonome Lastwagen zerschlagen unsere Gesellschaft auf Asphalt</a></li>
<li><a href="../de394523/index.html">In diesem Sommer werden die Vereinigten Staaten Marinetests der Railgun durchführen</a></li>
<li><a href="../de394529/index.html">Der Stadtscanner Half-Life 2 ist Realität geworden</a></li>
<li><a href="../de394531/index.html">Noch einmal über das Zeichnen auf dem Oszilloskopbildschirm</a></li>
<li><a href="../de394537/index.html">Wir stellen eine dreiachsige numerische Fräsmaschine her</a></li>
<li><a href="../de394539/index.html">Bedrohung durch das Internet: Warum Wall Street-Analysten Airbnb als „Killer“ des Hotelgeschäfts betrachten</a></li>
<li><a href="../de394541/index.html">Mehr DIY zu den Göttern DIY</a></li>
<li><a href="../de394543/index.html">Wenn es auf die Größe ankommt: Mi Max und andere neue Produkte von XIAOMI</a></li>
<li><a href="../de394545/index.html">Rudolf Svorenu - 89! Wie das Buch "Elektronik Schritt für Schritt" das Leben der Menschen verändert hat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>