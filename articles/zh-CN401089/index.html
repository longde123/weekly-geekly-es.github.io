<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛁 😟 👶🏼 Raspberry Pi仿真扩展板 📤 🧚🏽 🤽🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="长期以来，Raspberry Pi微型计算机已进入极客，系统管理员，程序员和电子工程师的生活。相对便宜，相对同类产品而言功能强大，具有内置的I / O端口，它可以应付各种任务并满足用户需求。买了Raspberry Pi之后，我想要一些东西来打开，测量和管理外部设备。当前正在出售大量扩展卡，例如此处，...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Raspberry Pi仿真扩展板</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/401089/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">长期以来，Raspberry Pi微型计算机已进入极客，系统管理员，程序员和电子工程师的生活。</font><font style="vertical-align: inherit;">相对便宜，相对同类产品而言功能强大，具有内置的I / O端口，它可以应付各种任务并满足用户需求。</font><font style="vertical-align: inherit;">买了Raspberry Pi之后，我想要一些东西来打开，测量和管理外部设备。</font><font style="vertical-align: inherit;">当前正在出售大量扩展卡，</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您可以使用带有电线的面包板进行快速原型制作，但是我更愿意自己制作设备来完成特定任务。</font><font style="vertical-align: inherit;">第一次，我没有为所有输出使用两排梳，而是将自己限制在几个I / O端口，SPI，I2C和UART总线上。</font><font style="vertical-align: inherit;">我将Raspberry Pi与目标导线相连，以制作“ mom-mom”原型。</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/eef/18f/ae2/eef18fae242d47dab3f10bb6a4cfb21b.jpg" alt="图片"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在这方面，开发了一系列的三个原型开发板，其中一个是我将在本文中讨论的最简单的一个。</font></font><a name="habracut"></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所以我需要什么：</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用带有输入和输出的GPIO； </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">负载管理； </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在1-Wire总线上连接温度传感器； </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">电压测量 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实时时钟； </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 通过RS485总线监视和控制外部设备； </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 扩展卡的独立电源； </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
根据上述清单，已开发出</font><a href=""><font style="vertical-align: inherit;">一种电路</font></a><font style="vertical-align: inherit;">：</font></font><br>
<img src="https://habrastorage.org/files/cc4/136/432/cc41364328f3449094dc0b05a940a987.jpg" alt="图片"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
→ </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高分辨率存储</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
电路该电路使用具有两个输出绕组的变压器电源。第一绕组在具有5V输出的线性稳压器上运行，以为RS485驱动器芯片和实时时钟供电。第二个绕组用于为电磁继电器供电，并与达林顿晶体管组装。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DS18B20温度传感器由Raspberry Pi板上的+ 3.3V供电，该板上具有用于连接外部DS18B20传感器的连接器，ADC所用的电压相同，并且与实时时钟相匹配。该电路使用四个按钮S1-S4来控制以低逻辑电平运行的任何动作。为了控制负载，使用了带有内置保护二极管的晶体管组件DD1 ULN2003。继电器K1和K2连接到晶体管组件的针脚16、15，用于指示的LED连接到针脚14-12，针脚11、10设计为根据方案通过一个公共集电极连接到外部设备，或者具有+ 12V绕组电压的其他继电器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了测量电压，使用了带SPI接口，输入低通滤波器的10位ADC DD3 MCP3008的两个通道。模拟节点最初是出于学术目的或快速调试而制作的。如果对模拟信号的定性测量产生疑问，则必须将数字地与模拟地去耦，使用外部参考电压源。或者，可以通过以下方式完成模拟部分：</font></font><br>
<br>
<img src="https://habrastorage.org/files/d8d/148/dee/d8d148deee074957a46ab433620aea05.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
仅需要在SPI总线上使用TTL→LVTTL电平转换器。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
实时时钟DD4在DS1307芯片上制成，并且使用32.768 kHz的石英谐振器Q1进行计时。一块焊接在板上的3伏锂电池用于为时钟的RAM芯片供电。该微电路通过I2C总线（在MOS晶体管VT2，VT3上使用的5V-3.3V电平转换器）通过I2C总线连接到Raspberry Pi（CAD使用的是直接连接到线路，无显式连接）。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
DD2 ST485芯片用作UART→RS485驱动器。使用晶体管VT1的电路解决方案允许放弃单独的输出以控制收发器。仅当UART正在发送数据时，它才切换到发送模式，其余时间ST485处于接收模式。从晶体管VT1的集电极中去除收发器控制命令。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了转换接口之外，该方案还执行使UART Raspberry Pi接口的LVTTL电平与ST485驱动器的TTL电平匹配的功能。</font><font style="vertical-align: inherit;">从晶体管VT1的集电极获取的信号将DI输入端的电平拉至5V，电阻器R16和齐纳二极管VD8将输出R0的电平限制为3.3V。</font><font style="vertical-align: inherit;">不要注意电阻R11，它在调试过程中仍留在电路中。</font><font style="vertical-align: inherit;">RS485已通过ModBus RTU协议在115200波特下进行了测试。</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
因此，进一步开发了电路板：</font></font><br>
<br>
<img src="https://habrastorage.org/files/2ca/501/7a8/2ca5017a8cba4f22b49cb6c8ea588855.png"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">印刷电路板的3D模型</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/0d3/058/62d/0d305862d003420aa0dfaa41f5a57d78.png"><br>
<img src="https://habrastorage.org/files/cbc/3d6/3b3/cbc3d63b39b44d2aa22887874155660c.bmp"><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成品设备的照片以及与扩展板一起使用的照片：</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/files/e60/3b4/9d7/e603b49d769b4fc1888d7350b9dbe63f.jpg"><br>
<br>
<img src="https://habrastorage.org/files/2fb/710/6e3/2fb7106e3cec47ea9de5b947ebc091ed.jpg"><br>
<br>
<img src="https://habrastorage.org/files/132/e3e/4d0/132e3e4d025a47ebb5a982e69ed7c213.jpg"><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与外部设备的连接方案的变体：</font></font><br>
<img src="https://habrastorage.org/files/4bb/b2f/c3c/4bbb2fc3c13849398f32165e87ce506f.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了检查扩展板的节点，我使用了python中的几个脚本（我不知道这种语言，是通过反复试验编写的，并遵循专家的代码）。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要测量来自连接到ADC通道的电位计的电压，我编写了一个简单的脚本：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MCP3008 python源</font></font></b><div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment"># Example program to read data from MCP3008 10 bit ADC</span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> spidev
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os<font></font>
 <font></font>
<span class="hljs-comment"><span class="hljs-comment"># Open SPI bus</span></span><font></font>
spi = spidev.SpiDev()<font></font>
spi.open(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>)<font></font>
 <font></font>
<span class="hljs-comment"><span class="hljs-comment"># Function to read SPI data from MCP3008 chip</span></span>
<span class="hljs-comment"><span class="hljs-comment"># Channel must be an integer 0-7</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ReadChannel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(channel)</span></span></span><span class="hljs-function">:</span></span>
  adc = spi.xfer2([<span class="hljs-number"><span class="hljs-number">1</span></span>,(<span class="hljs-number"><span class="hljs-number">8</span></span>+channel)&lt;&lt;<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>])<font></font>
  data = ((adc[<span class="hljs-number"><span class="hljs-number">1</span></span>]&amp;<span class="hljs-number"><span class="hljs-number">3</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) + adc[<span class="hljs-number"><span class="hljs-number">2</span></span>]
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> data<font></font>
 <font></font>
<span class="hljs-comment"><span class="hljs-comment"># Function to convert data to voltage level,</span></span>
<span class="hljs-comment"><span class="hljs-comment"># rounded to specified number of decimal places.</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConvertVolts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data,places)</span></span></span><span class="hljs-function">:</span></span>
  volts = (data * <span class="hljs-number"><span class="hljs-number">3.3</span></span>) / float(<span class="hljs-number"><span class="hljs-number">1023</span></span>)<font></font>
  volts = round(volts,places)<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> volts<font></font>
 <font></font>
<span class="hljs-comment"><span class="hljs-comment"># Define sensor channels</span></span>
first_channel = <span class="hljs-number"><span class="hljs-number">0</span></span>
second_channel  = <span class="hljs-number"><span class="hljs-number">1</span></span><font></font>
 <font></font>
<span class="hljs-comment"><span class="hljs-comment"># Define delay between readings</span></span>
delay = <span class="hljs-number"><span class="hljs-number">5</span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"------------------------------------------------------"</span></span><font></font>
 <font></font>
<span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>:<font></font>
 <font></font>
  <span class="hljs-comment"><span class="hljs-comment"># Read the first channel data</span></span><font></font>
  first_level = ReadChannel(first_channel)<font></font>
  first_channel_volts = ConvertVolts(first_level,<span class="hljs-number"><span class="hljs-number">2</span></span>)<font></font>
 <font></font>
  <span class="hljs-comment"><span class="hljs-comment"># Read the second channel data</span></span><font></font>
  second_level = ReadChannel(second_channel)<font></font>
  second_channel_volts = ConvertVolts(second_level,<span class="hljs-number"><span class="hljs-number">2</span></span>)<font></font>
  <font></font>
 <font></font>
  <span class="hljs-comment"><span class="hljs-comment"># Print out results</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"------------------------------------------------------"</span></span>
  print(<span class="hljs-string"><span class="hljs-string">"First ADC channel: {} ({}V)"</span></span>.format(first_level,first_channel_volts))<font></font>
  print(<span class="hljs-string"><span class="hljs-string">"Second ADC channel : {} ({}V)"</span></span>.format(second_level,second_channel_volts))<font></font>
 <font></font>
  <span class="hljs-comment"><span class="hljs-comment"># Wait before repeating loop</span></span><font></font>
  time.sleep(delay)<font></font>
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以下脚本用于DS18B20温度计：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DS18B20 python源</font></font></b><div class="spoiler_text">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a><br>
<pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># Example program to read data from DS18B20</span></span>
<span class="hljs-comment"><span class="hljs-comment"># This code taken from</span></span>
<span class="hljs-comment"><span class="hljs-comment"># https://kropochev.com/?go=all/raspberry-pi-and-onewire-sensor/</span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> glob
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> time<font></font>
<font></font>
os.system(<span class="hljs-string"><span class="hljs-string">'modprobe w1-gpio'</span></span>)<font></font>
os.system(<span class="hljs-string"><span class="hljs-string">'modprobe w1-therm'</span></span>)<font></font>
<font></font>
base_dir = <span class="hljs-string"><span class="hljs-string">'/sys/bus/w1/devices/'</span></span>
device_folder = glob.glob(base_dir + <span class="hljs-string"><span class="hljs-string">'10*'</span></span>)[<span class="hljs-number"><span class="hljs-number">0</span></span>]<font></font>
device_file = device_folder + <span class="hljs-string"><span class="hljs-string">'/w1_slave'</span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read_temp_raw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span>
    f = open(device_file, <span class="hljs-string"><span class="hljs-string">'r'</span></span>)<font></font>
    lines = f.readlines()<font></font>
    f.close()<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lines<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read_temp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span><font></font>
    lines = read_temp_raw()<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> lines[<span class="hljs-number"><span class="hljs-number">0</span></span>].strip()[<span class="hljs-number"><span class="hljs-number">-3</span></span>:] != <span class="hljs-string"><span class="hljs-string">'YES'</span></span>:<font></font>
        time.sleep(<span class="hljs-number"><span class="hljs-number">0.2</span></span>)<font></font>
        lines = read_temp_raw()<font></font>
    equals_pos = lines[<span class="hljs-number"><span class="hljs-number">1</span></span>].find(<span class="hljs-string"><span class="hljs-string">'t='</span></span>)
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> equals_pos != <span class="hljs-number"><span class="hljs-number">-1</span></span>:<font></font>
        temp_string = lines[<span class="hljs-number"><span class="hljs-number">1</span></span>][equals_pos+<span class="hljs-number"><span class="hljs-number">2</span></span>:]<font></font>
        temp_c = float(temp_string) / <span class="hljs-number"><span class="hljs-number">1000.0</span></span>
        temp_f = temp_c * <span class="hljs-number"><span class="hljs-number">9.0</span></span> / <span class="hljs-number"><span class="hljs-number">5.0</span></span> + <span class="hljs-number"><span class="hljs-number">32.0</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> temp_c, temp_f<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>:<font></font>
    print(read_temp())<font></font>
    time.sleep(<span class="hljs-number"><span class="hljs-number">1</span></span>)
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我还记录了Raspbian中的设置：</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置设备</font></font></b><div class="spoiler_text"><blockquote> — 1 Wire settings:<br>
 — Raspbian wheezy<br>
<br>
Enter command in console:<br>
pi@raspberrypi~$ sudo modprobe w1-gpio<br>
pi@raspberrypi~$ sudo modprobe w1_therm<br>
<br>
Then check sensor in system:<br>
pi@raspberrypi ~ $ sudo ls /sys/bus/w1/devices/w1_bus_master1/<br>
<br>
You can see the tabel below entered comman and<br>
there you should find HEX like 28-000002da8328; <br>
This is DS18B20 address;<br>
<br>
Next read the data from DS18B20 sensor using command:<br>
pi@raspberrypi ~ $ cat /sys/bus/w1/devices/w1_bus_master1/28-000002da8328/w1_sla <br>
<br>
And you are going see temperature in console like:<br>
6f 01 4b 46 7f ff 01 10 67: crc=67 YES<br>
6f 01 4b 46 7f ff 01 10 67 t=22937<br>
<br>
t=22937 — you should divide this number on 1000 and you will have temperature in Celsius;<br>
<br>
 — Raspbian Jezzy<br>
<br>
Enter command:<br>
pi@raspberrypi~$ sudo nano /boot/config.txt<br>
<br>
On next step you should write in config file <br>
dtoverlay=w1-gpio,gpiopin=4 <br>
dtoverlay=w1-gpio-pullup<br>
<br>
Then you should reboot your raspberry Pi;<br>
<br>
 — I2C Real Time Clock settings:<br>
 — Update your system if it needed and install i2c-tools:<br>
pi@raspberrypi~$ sudo apt-get update<br>
pi@raspberrypi~$ sudo apt-get -y upgrade<br>
pi@raspberrypi~$ sudo apt-get i2c-tools:<br>
<br>
Enter command:<br>
pi@raspberrypi~$ sudo nano /etc/modules<br>
Add these lines:<br>
i2c-bcm2708<br>
i2c-dev<br>
rtc_ds1307<br>
 <br>
Comment one line in file:<br>
pi@raspberrypi~$ sudo nano /etc/modprobe.d/raspi-blacklist.conf<br>
Add # Symbol in beginning of line<br>
<br>
blacklist i2c-bcm2708<br>
________________________________________________________<br>
Reboot system;<br>
Enter command:<br>
pi@raspberrypi~$ sudo lsmod<br>
<br>
You will see lines like:<br>
rtc_ds1307 7715 0<br>
i2c_dev 5277 0 <br>
i2c_bcm2708 4719 0<br>
________________________________________________________<br>
<br>
Get DS1307 address:<br>
pi@raspberrypi~$ sudo i2cdetect -y 1<br>
<br>
You will see table in console:<br>
<br>
0 1 2 3 4 5 6 7 8 9 a b c d e f<br>
00: — -- — -- — -- — -- — -- — -- — 10: — -- — -- — -- — -- — -- — -- — -- — --<br>
20: — -- — -- — -- — -- — -- — -- — -- — --<br>
30: — -- — -- — -- — -- — -- — UU — -- — --<br>
40: — -- — -- — -- — -- — -- — -- — -- — --<br>
50: — -- — -- — -- — -- — -- — -- — -- — --<br>
60: — -- — -- — -- — -- 68 — -- — -- — -- — 70: — -- — -- — -- — --<br>
 <br>
In address 0x3b some device without driver and 0x68 perhaps DS1307 clock address. <br>
<br>
Enter command:<br>
echo ds1307 0x68 &gt; /sys/class/i2c-adapter/i2c-1/new_device<br>
<br>
Read clock:<br>
pi@raspberrypi~$ sudo hwclock -r<br>
<br>
Set time:<br>
pi@raspberrypi~$ sudo hwclock -w<br>
Set system time from RTC:<br>
pi@raspberrypi~$ sudo hwclock -s<br>
<br>
Automatic RTC start;<br>
Add lines in /etc/rc.local file<br>
<br>
echo ds1307 0x68 &gt; /sys/class/i2c-adapter/i2c-1/new_device<br>
sudo hwclock -s<br>
Before last line in file looks like:<br>
<br>
exit 0<br>
 — Uart settings:<br>
 — Back up files:<br>
cp /boot/cmdline.txt /boot/cmdline.bak<br>
cp /etc/inittab /etc/inittab.bak<br>
<br>
Delete «console=ttyAMA0,115200»  «kgdboc=ttyAMA0,115200» lines from configuration file:<br>
pi@raspberrypi~$ nano /boot/cmdline.txt<br>
<br>
Comment last line looks like «T0:23:respawn:/sbin/getty -L ttyAMA0 115200 vt100: in /etc/inittab file: using # symbol:<br>
pi@raspberrypi~$ nano /etc/inittab<br>
</blockquote><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
急需电路板，因此我自己使用LUT技术和几个小时的空闲时间来制作电路板。</font><font style="vertical-align: inherit;">为了方便工作并节省时间，电路板的一侧制成了MGShV 0.5的跳线。</font><font style="vertical-align: inherit;">DipTrace电路和PCB设计，测试源代码，组件列表以及在</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储库中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置命令的教程</font><font style="vertical-align: inherit;">。</font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS：</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在下面的视频中，使用了第一个仿真板，在20分钟内将其组装在带有按钮和LED的面包板上，并基于以下版本出现：</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/5uCV_gNWw2Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN401089/">https://habr.com/ru/post/zh-CN401089/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN401077/index.html">中国将在云层上投资1.68亿美元，使该国西北部降雨更多</a></li>
<li><a href="../zh-CN401079/index.html">显而易见：浴室照明的自动控制</a></li>
<li><a href="../zh-CN401083/index.html">逆时钟：如果旧铁被液氮和氦“裂解”会怎样？</a></li>
<li><a href="../zh-CN401085/index.html">Lakhta Terra Incognita：摩天大楼可持续发展之战</a></li>
<li><a href="../zh-CN401087/index.html">ИИ: блеф, отъем денег у населения и победа над неопределенностью</a></li>
<li><a href="../zh-CN401091/index.html">2017年有7种台式机数字产品爆裂</a></li>
<li><a href="../zh-CN401093/index.html">Sony Xperia Ear Xea10: голосовые помощники забрались в уши</a></li>
<li><a href="../zh-CN401095/index.html">我该给你什么，亲爱的男人？</a></li>
<li><a href="../zh-CN401097/index.html">认识新的光谱</a></li>
<li><a href="../zh-CN401101/index.html">删除的文件开始返回到Dropbox文件夹。错误修复</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>