<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòã üôèüèø üîú Python-Abh√§ngigkeitschaos ü•å üå∫ üîé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kennen Sie die Geschichte der Python-Verpackung? Navigieren Sie in Paketformaten? Wissen Sie, dass Sie das Gewirr der Abh√§ngigkeiten aufl√∂sen m√ºssen, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Python-Abh√§ngigkeitschaos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/483920/"> Kennen Sie die Geschichte der Python-Verpackung?  Navigieren Sie in Paketformaten?  Wissen Sie, dass Sie das Gewirr der Abh√§ngigkeiten aufl√∂sen m√ºssen, auch wenn es so aussieht, als w√§re es ein Wunder - eine Null-Abh√§ngigkeit?  Ich bin mir sicher, dass sie damit nicht so vertraut sind wie der Autor der DepHell-Bibliothek. <br><br><img src="https://habrastorage.org/webt/zp/dv/ao/zpdvaohc2qflukqaxxduyl7rxmu.png"><br><br>  Ich habe es geschafft, mit <b>Nikita Voronov</b> , besser bekannt als Gram oder <a href="https://habr.com/ru/users/orsinium/" class="user_link">Orsinium</a> , zu sprechen und ihn nach dem Thema eines zuk√ºnftigen Berichts, den Schmerzen von L√∂sungen zur Aufl√∂sung von Abh√§ngigkeiten, DepHell, Pip, dem ersten Match-Wins-Prinzip, Guido, Pipfile, der inkrementellen Python-Entwicklung und der Zukunft des √ñkosystems zu fragen. <br><a name="habracut"></a><br>  <b>- In Moscow Python Conf ++ werden Sie √ºber Abh√§ngigkeiten und alles, was sich neben ihnen befindet, sprechen.</b>  <b>Warum haben Sie gerade ein solches Thema f√ºr den Bericht ausgew√§hlt?</b> <br><br>  Weil diese Frage alle meine Erfahrungen mit Python durchl√§uft.  Als ich mein erstes Paket erstellt und den ersten Code geschrieben habe, habe ich dar√ºber nachgedacht, wie ich anderen helfen kann, damit sie es installieren k√∂nnen, und habe setup.py ausgef√ºhrt.  Dann arbeitete er in einer Firma, in einer anderen, in einer dritten, die Aufgabe war kompliziert und entwickelt.  Zuerst gab es nur eine Requirements.txt-Datei, dann erkannte ich, dass ich die Abh√§ngigkeiten beheben musste, Pip-Tools, eine Sperrdatei erschien.  Sp√§ter bekamen wir Pipenv und dann Poetry. <br><br>  Nach und nach √∂ffneten sich immer mehr Probleme, ich versank tiefer in dieses Chaos.  Infolgedessen habe ich begonnen, <a href="https://github.com/dephell/dephell">DepHell zu</a> implementieren, ein Projekt zum Verwalten von Abh√§ngigkeiten, mit dem Abh√§ngigkeiten in einem anderen Format aufgel√∂st und gelesen werden k√∂nnen.  W√§hrend ich mit allen Arten von Formaten gearbeitet habe, hatte ich genug von ihrem Inneren gesehen und jetzt wei√ü ich, wie viel darin angeordnet ist, aber ich lerne jeden Tag etwas Neues.  Daher kann ich Ihnen viele interessante Dinge √ºber Schmerzen und schlechte Entscheidungen erz√§hlen. <br><br>  <b>- Schmerz ist immer interessant.</b>  <b>Was denken Sie, sind die Probleme, die derzeit in diesem Teil von Python auftreten?</b> <br><br>  JS verf√ºgt √ºber ein <code>node_modules</code> Verzeichnis, in dem f√ºr jede Abh√§ngigkeit eigene Abh√§ngigkeiten gestapelt sind.  In Python ist dies nicht der Fall.  Beispielsweise wird ein Paket in derselben Umgebung installiert und alle Pakete, die es verwenden, verwenden dieselbe Version dieses Pakets.  Dazu m√ºssen Sie die Abh√§ngigkeiten korrekt aufl√∂sen - w√§hlen Sie die Version dieses Pakets aus, die im Allgemeinen allen Paketen in dieser Umgebung entspricht.  Die Aufgabe ist nicht trivial: Pakete h√§ngen voneinander ab, alles ist miteinander verflochten und das Aufl√∂sen von Abh√§ngigkeiten ist schwierig.  In Python gibt es praktisch keine Resolver.  Clever Resolver gibt es nur in Poetry und DepHell. <br><br>  All dies wird sehr kompliziert durch die Tatsache, dass pypi.org h√§ufig keine Informationen √ºber Paketabh√§ngigkeiten bereitstellt, da diese Informationen vom Client angegeben werden m√ºssen und der PyPI-Server sie nicht selbst herausfinden kann.  Wenn PyPI angibt, dass das Paket keine Abh√§ngigkeiten aufweist, k√∂nnen Sie ihm daher nicht vertrauen.  Sie m√ºssen die gesamte Version herunterladen, die Paketabh√§ngigkeiten entpacken und analysieren von setup.py.  Dies ist ein langer Prozess, daher kann Resolver in Python nicht schnell sein. <br><br><blockquote>  Es gibt nicht nur wenige Resolver in Python, sie sind auch von Natur aus langsam. </blockquote><br>  In meinem <a href="https://conf.python.ru/moscow/2020/abstracts/6254">Bericht</a> m√∂chte ich erl√§utern, wie die Aufl√∂sung von DepHell funktioniert: Wie ein Abh√§ngigkeitsdiagramm erstellt wird, wie dieses Diagramm aussieht, warum die meisten wissenschaftlichen Artikel sich mit dem Aufl√∂sen von Abh√§ngigkeiten und der Arbeit mit diesem Diagramm befassen.  Nat√ºrlich gibt es Whitepapers, wie das alles funktionieren sollte.  Kluge K√∂pfe haben Artikel mit Algorithmen geschrieben, aber meistens funktionieren sie nicht f√ºr Python.  Daher beschreibe ich in DepHell, wie ich in der Praxis mit der Abh√§ngigkeitsaufl√∂sung arbeite. <br><br>  <b>- Ich h√∂re oft von Programmierern, dass sie pip verwenden und alles gut f√ºr sie funktioniert.</b>  <b>Was machen sie falsch?</b> <br><br>  Sie haben Gl√ºck und sto√üen nicht auf einen Abh√§ngigkeitskonflikt.  Obwohl das Problem auftreten kann, wenn Sie nur zwei Pakete in einer sauberen Umgebung ablegen.  K√ºrzlich gab es ein Release des Coverage 5.0-Pakets, und wenn Sie nur <code>pip install pytest-cov coveralls</code> angeben, wird <code>pip install pytest-cov coveralls</code> Reihenfolge ausgef√ºhrt und f√ºr das erste Paket wird die neueste Version des Coverages ausgew√§hlt, n√§mlich 5.0.  Das Prinzip von <b>First Match Wins</b> funktioniert in Pip. Selbst wenn die Version nicht mit dem zweiten Paket kompatibel ist, wird sie bereits f√ºr das erste Paket behoben.  Oft funktioniert dieser Ansatz, aber nicht immer. <br><br>  Dar√ºber hinaus gibt es eine Frage mit reproduzierbaren Umgebungen.  Da pip immer die neueste Version verwendet, k√∂nnen die Versionen in der lokalen Umgebung und in der Produktion abweichen.  Um dieses Problem zu l√∂sen, ist es √ºblich, die Abh√§ngigkeiten zu beheben.  Und wenn die Abh√§ngigkeiten bereits behoben sind, werden die spezifischen Versionen angezeigt, die pip installieren soll. Dann funktioniert pip bereits einwandfrei.  Pip hat keinen Resolver, aber es ist m√∂glich, wenn jemand anderes Abh√§ngigkeiten daf√ºr aufl√∂st, wie z. B. DepHell oder Poetry. <br><br>  <b>- Warum gewinnt dieses Thema jetzt so an Relevanz, wie Sie denken?</b>  <b>Warum ist vorher nichts passiert, aber jetzt ist es weg und sogar in verschiedene Richtungen?</b> <br><br>  Erstens w√§chst das Python-√ñkosystem.  Es gibt mehr Pakete, sie m√ºssen mehr installiert werden und es treten viel mehr Probleme auf.  Zweitens gibt es schon lange Probleme mit Dateiformaten, die schon lange diskutiert werden. <br><br>  Setup.py kann in der Regel nicht analysiert, sondern nur ausgef√ºhrt werden.  Wenn wir zum Beispiel einen Server in Go schreiben m√∂chten, um Pakete f√ºr Python schnell zu verteilen, k√∂nnen wir setup.py nicht einfach abrufen und lesen, da es sich um eine ausf√ºhrbare Datei handelt.  Dementsprechend ben√∂tigen Sie f√ºr die Ausf√ºhrung Python und eine vollst√§ndige Umgebung, und h√§ufig auch, damit das gesamte Projekt in der N√§he liegt und einige spezifische Abh√§ngigkeiten installiert werden.  Abgesehen von all diesen Schwierigkeiten kann die Ausf√ºhrung von setup.py gef√§hrlich sein, da auf Ihrem Computer ein anderer Code ausgef√ºhrt wird.  Es ist sogar be√§ngstigend, Code unter dem aktuellen Benutzer auszuf√ºhren, denn wenn er beispielsweise meinen privaten SSH-Schl√ºssel empf√§ngt und irgendwohin sendet, ist dies eine gro√üe Trag√∂die. <br><br>  Die zweite Option zum Definieren von Abh√§ngigkeiten, die es schon lange gibt und mit denen jeder arbeitet, ist die Datei requirements.txt.  Es ist auch fast unm√∂glich, auf die gleiche Weise zu analysieren.  Pip kann, aber es macht es sehr, sehr schwierig: Die Funktionen, die die Funktionen aufrufen, Iteratoren, alles ist gemischt.  Au√üerdem kann pip einige seiner Schl√ºssel aus der Datei requirements.txt lesen, beispielsweise kann ein Index zum Herunterladen angegeben werden.  Dies funktioniert jedoch nicht mit allen Schl√ºsseln. <br><br>  Um die Datei requirements.txt zu analysieren, m√ºssen Sie entweder pip oder eine Drittanbieterl√∂sung verwenden.  Bei allen L√∂sungen von Drittanbietern handelt es sich im Wesentlichen um Gabeln, bei denen Annahmen √ºber die Datei getroffen werden.  Nicht jede knifflige Requirements.txt-Datei, die Pip lesen kann, kann diese Gabeln lesen. <br><br>  Pip selbst ist nicht als Bibliothek gedacht.  Dies ist ein exklusives CLI-Tool, das nur von der Konsole aus verwendet werden kann.  Der gesamte Pip-Quellcode ist hinter <code>_internal</code> verborgen, und die Entwickler sagen direkt: "Verwenden Sie dies nicht!".  Und jede Ver√∂ffentlichung bricht die Abw√§rtskompatibilit√§t.  Sie garantieren ehrlich gesagt keine Kompatibilit√§t und k√∂nnen jederzeit etwas √§ndern.  Und genau das passiert - jedes Mal, wenn ein neues Release mit pip kommt, erfahre ich davon von einem kaputten CI in DepHell. <br><br>  <b>- Wie w√§re es in anderen Sprachen?</b>  <b>Ist es dort genauso schlimm oder werden all diese Probleme irgendwo gel√∂st?</b> <br><br>  <b>Guido van Rossum</b> wurde <b>k√ºrzlich</b> mit dem Dijkstra-Preis ausgezeichnet.  Ich besuchte seine Vorlesungen und fragte ihn nach Python-Abh√§ngigkeiten.  Guido sagte, dass Sucht in allen Sprachen Chaos ist, er versucht, nicht hineinzukommen und vertraut der Gemeinschaft, um dieses Problem zu l√∂sen. <br><br>  Daher wird die Arbeit mit Abh√§ngigkeiten in Python nach und nach von der Community organisiert.  Es entstehen neue L√∂sungen.  Als Distutils in Python gebaut wurde, stellten die Leute fest, dass es viele Probleme gab, Add-On-Setuptools.  <code>easy_Install</code> wurde sp√§ter entwickelt, um Pakete zu installieren, hatte aber auch Probleme.  Um sie zu l√∂sen, erstellt pip.  Jetzt hat pip viele Probleme.  Seine Quellen √§ndern sich st√§ndig, es gibt keine Architektur, es gibt √ºberhaupt keine Schnittstelle. <br><br>  Die Community versucht, sich etwas auszudenken.  Zum Beispiel gab es eine lange Diskussion √ºber das Thema Anforderungen 2.0, bei dem es darum ging, Anforderungen sowohl f√ºr Benutzer (hier ist die Version, hier sind Markierungen) als auch f√ºr Programmierer aus anderen Sprachen verst√§ndlich zu machen. <br><br><blockquote>  Sie haben ein Pipfile erstellt, aber da pip sehr verwirrend ist, konnten sie keine Pipfile-Unterst√ºtzung hinzuf√ºgen. </blockquote><br>  Entwickler m√∂chten dies nat√ºrlich tun.  H√∂chstwahrscheinlich werden sie eines Tages in der Lage sein, aber Pip kann Pipfile bisher nicht unterst√ºtzen.  Deshalb haben wir pipenv f√ºr die Arbeit mit Pipfile und der virtuellen Umgebung entwickelt, einige andere Wrapper f√ºr die Umgebung.  Aber auch in Pipenv ist alles durcheinander und verwirrt. <br><br>  F√ºr andere Sprachen gef√§llt mir, wie das Abh√§ngigkeitsmanagement in Go implementiert ist.  Bisher gab es keine Versionierung, es wurde <code>go get</code> , in der Sie angeben, aus welchem ‚Äã‚ÄãRepository welches Paket heruntergeladen werden soll.  Aus Einsteigersicht ist dies praktisch: Sie schreiben einfach <code>go get</code> und das Paket ist bereits im System.  Und wenn Sie anfangen, mit Python zu arbeiten, bricht sofort ein ganzer Haufen von allem zusammen: einige Versionen, PyPI, pip, requirements.txt, setup.py, jetzt Pipfile, Poetry, <code>__pymodules__</code> usw. <br><br>  W√§hrend sich Python schrittweise und mithilfe der Community weiterentwickelt, wird das Erbe im √ñkosystem aufgebaut.  Los war nur <code>go get</code> , aber wieder trat das Problem auf, dass Abh√§ngigkeiten behoben werden mussten, damit insbesondere die Umgebung reproduzierbar war. <br><br>  Eine abspielbare Umgebung kann mithilfe eines Docker-Containers erstellt werden, in dem alle Abh√§ngigkeiten installiert sind.  Manchmal m√ºssen Sie jedoch einzelne Abh√§ngigkeiten aktualisieren.  Zum Beispiel sind wir m√∂glicherweise nicht bereit, alles zu aktualisieren, da das Projekt nicht √ºber gen√ºgend Tests verf√ºgt, um zu beweisen, dass nach dem Update alles noch funktioniert.  M√∂glicherweise muss jedoch eine bestimmte Abh√§ngigkeit aktualisiert werden, da beispielsweise eine Sicherheitsl√ºcke gefunden wurde.  Zu diesem Zweck ist es besser, kein Docker-Image zu haben, sondern eine Datei mit der Aufschrift "Eine bestimmte Version eines bestimmten Pakets installieren". <br><br>  In Go gab es so etwas nicht, und es wurde eine Vendorisierung durchgef√ºhrt: Alle Abh√§ngigkeiten wurden nur genommen und in ein Verzeichnis gestellt.  Dies ist eine <code>node_modules</code> L√∂sung, √§hnlich wie <code>node_modules</code> , die in Go seit einiger Zeit mithilfe von L√∂sungen von Drittanbietern implementiert wird.  In Python wird dieser Ansatz auch verwendet, z. B. hat pip ein <code>vendor</code> .  Wenn Sie pip installieren, werden keine Abh√§ngigkeiten hergestellt, und Sie k√∂nnten denken, dass alles sehr cool ist und es √ºberhaupt keine Abh√§ngigkeiten gibt, aber tats√§chlich sind sie alle innerhalb des <code>vendor</code> . <br><br>  Vor ungef√§hr einem Jahr erschien go.mod (Go Modules) in Go.  Dies ist ein neues integriertes Tool, aber <code>go get</code> auch unterst√ºtzt.  Das Projekt enth√§lt zwei Dateien: <br><br><ul><li>  man beschreibt die Abh√§ngigkeiten, mit denen das Projekt direkt arbeitet; </li><li>  Die andere ist eine Sperrdatei, die absolut alle Abh√§ngigkeiten und ihre spezifischen Versionen beschreibt. </li></ul><br>  Dies ist eine coole zentralisierte L√∂sung. <br><br>  Was wichtig ist, bestehen sie darauf, dass bestimmte Dinge auf eine bestimmte Weise aussehen sollten.  In Go sollte die Version beispielsweise eine semantische Version sein. <br><br>  Python hat auch eine Spezifikation, wie die Version aussehen soll.  Daf√ºr gibt es PEP 440. Aber zum einen ist die Spezifikation sehr kompliziert: Es gibt nicht nur drei Versionskomponenten (Nummern), sondern auch Vorabversion, Post-Release und √Ñra (wenn sich die Art der Versionierung √§ndert).  Zweitens wurde PEP 440 nicht sofort akzeptiert, sondern es wurde auch inkrementell darauf zugegriffen. Daher wird die √§ltere Version unterst√ºtzt, was bedeutet, dass alles als Version verwendet werden kann - jede Zeile wie ‚ÄûHallo Welt!‚Äú. <br><br>  <b>- Sie sagten, dass die Community die Sprache inkrementell entwickelt, sodass es eine Vielzahl von L√∂sungen gibt.</b>  <b>Aber warum nicht den ganzen M√ºll loswerden?</b>  <b>Warum nicht die Distutils wegwerfen, das alte und unn√∂tige, das niemand benutzt, aufgeben und stattdessen aktiv neue Praktiken und Werkzeuge einf√ºhren?</b> <br><br>  All dies beizubehalten ist sinnvoll, damit Sie die alten Pakete trotzdem installieren k√∂nnen.  Es ist unm√∂glich darauf zu bestehen, dass es notwendig ist, genau das zu tun, und nicht anders, weil die Entscheidung von der Gemeinschaft getroffen wird.  Keiner der Core Python-Entwickler kommt und sagt: "Das war's, wir machen jetzt alles und keine N√§gel." <br><br>  Go hat alles, was Sie brauchen, um mit Abh√§ngigkeiten sofort zu arbeiten.  In Python m√ºssen Sie alles von au√üen neu installieren, und Sie m√ºssen immer noch verstehen, was genau.  Meistens reicht pip aus, aber jetzt werden andere Optionen angezeigt. <br><br>  Auf der Site mit offiziellen Paketempfehlungen der Python Packaging Authority, der Gruppe, die pip, pipenv und PyPI herstellt, ist die Verwendung von pipenv vorgesehen.  Mit pipenv ist eine andere Geschichte.  Erstens hat es eine schlechte Aufl√∂sung.  Zweitens gab es lange Zeit keine Ver√∂ffentlichungen und die Community wartet bereits darauf, dass die Macher ehrlich zugeben, dass dieses Projekt tot ist.  Das dritte Problem mit pipenv ist, dass es nur f√ºr Projekte geeignet ist, nicht jedoch f√ºr Pakete: Sie k√∂nnen Projektabh√§ngigkeiten in pipenv angeben, aber Sie k√∂nnen den Namen und die Version nicht angeben und es dementsprechend in ein Paket zum Herunterladen in PyPI einf√ºgen.  Es stellt sich heraus, dass es immer noch nicht ausreicht, den Empfehlungen der Python Packaging Authority zu folgen und pipenv zu verwenden, um dies herauszufinden. <br><br>  Die Poesie versucht, revolution√§r zu sein.  Die Datei setup.py wird im Grunde genommen nicht generiert, was aus Gr√ºnden der Abw√§rtskompatibilit√§t n√ºtzlich w√§re, da Poetry das neue und einzige Format f√ºr alles sein m√∂chte.  Er wei√ü, wie man Pakete sammelt, und er hat eine Sperrdatei, die f√ºr Projekte ben√∂tigt wird.  Trotzdem hat Poetry eine Menge seltsamer Dinge, viele bekannte Funktionen werden nicht unterst√ºtzt. <br><br>  <b>- Wie sehen Sie die Zukunft des √ñkosystems im Umgang mit Abh√§ngigkeiten?</b>  <b>Deine Vorhersage.</b> <br><br>  Alles wird mehr oder weniger besser.  Ich habe zum Beispiel eine Stelle in pip gesehen, und einem Entwickler, der sie in Ordnung bringt, wird viel Geld versprochen.  Vielleicht wird pip eine universellere L√∂sung.  Aber Sie brauchen jemanden, der es ernst nimmt: Kommen Sie und sagen Sie, dass wir es so machen, jetzt folgen wir einem strengeren PEP und werden darauf bestehen (weil PEP nur eine Empfehlung ist, die niemand wirklich tut nicht erforderlich zu folgen). <br><br>  Zum Beispiel hatten wir eine solche Geschichte: Eine bestimmte Version von PyYAML wurde in der Sperrdatei gesperrt.  Eines Tages werden die Tests f√ºr CI bestanden, wir stellen sie f√ºr die Produktion bereit, und alles f√§llt dort ab, weil die PyYAML-Version nicht gefunden wurde.  Die Sache war, dass die gesperrte Version von pypi.org gel√∂scht wurde.  Alle waren emp√∂rt, aktualisierten die Sperrdatei, √ºberlebten irgendwie, aber das Sediment blieb. <br><br>  Vor nicht allzu langer Zeit ist PEP 592 erschienen, es wurde bereits √ºbernommen und wird in pip gepflegt, in dem ruckartige Releases erschienen sind.  Yank bedeutet, dass die Ver√∂ffentlichung noch nicht vollst√§ndig von pypi.org entfernt wurde - sie ist versteckt.  Wenn Sie also angeben, dass Sie beispielsweise eine PyYAML-Version gr√∂√üer als 3.0 ben√∂tigen, √ºberspringt pip die ausgelassenen Versionen und installiert die neueste verf√ºgbare Version.  Wenn jedoch in der Sperrdatei eine bestimmte Version angegeben ist und diese Version "yank" ist, wird sie von pip trotzdem installiert.  Auf diese Weise werden Sperrdateien und die Bereitstellung nicht unterbrochen, aber wenn m√∂glich, wird die alte Version nicht verwendet. <br><br>  Das zweite interessante ist PEP f√ºr <code>__pymodules__</code> .  Hierbei handelt es sich <code>pip install</code> schlanke virtuelle Umgebungen: Sie √∂ffnen das Projektverzeichnis, schreiben die <code>pip install</code> PyYAML und PyYAML wird nicht global installiert, sondern im Verzeichnis <code>__pymodules__</code> .  Wenn Python in diesem Verzeichnis gestartet wird, importiert es PyYAML nicht global, sondern aus diesem Verzeichnis. <br><br>  Ich nenne es zumindest virtuelle Umgebungen, weil es weniger Isolation gibt.  Beispielsweise gibt es keinen Zugriff auf Bin√§rdateien.  Wenn eine virtuelle Umgebung mit installiertem pytest aktiviert ist, kann sie von der Konsole aus verwendet werden: Schreiben Sie einfach pytest und f√ºhren Sie eine Aktion aus.  Mit <code>__pymodules__</code> importiert werden, jedoch keine Bin√§rdateien, da diese nicht installiert werden. <br><br>  Dieses PEP wurde entwickelt, um es Anf√§ngern leicht zu machen.  Damit sie sich nicht mit den Feinheiten virtueller Umgebungen befassen m√ºssen, sondern einfach alles installieren, was Sie f√ºr <code>__pymodules__</code> per Pip-Installation ben√∂tigen. <br><br>  <b>- Nun, die Zukunft in Ihrer Prognose ist heller als jetzt.</b> <br><br>  Ja, aber wie gesagt, wenn niemand kommt und sagt, dass wir das Erbe wiederholen und versuchen, es wegzuwerfen, bleiben die Probleme bestehen.  Jetzt h√§ufen wir und h√§ufen Werkzeuge an, und es wird in naher Zukunft unm√∂glich sein, sie vollst√§ndig loszuwerden. <br><br>  <b>- Was denken Sie, warum keiner der Entwickler Abh√§ngigkeiten aktualisieren kann? Fast √ºberall - weder in Unternehmen noch in Open Source - wurde der Prozess der Arbeit mit Sicherheitsreleases im Prinzip mit neuen Neben- oder Hauptreleases aufgebaut.</b>  <b>Wo sehen Sie die Probleme hier?</b> <br><br>  Zumindest, wenn Sie Abh√§ngigkeiten aktualisieren m√∂chten, ist es be√§ngstigend, alle Abh√§ngigkeiten zu aktualisieren, da es nicht so ist, dass alles funktioniert, selbst wenn Sie die Tests bestehen.  Beispielsweise tritt diese Situation h√§ufig bei Sellerie auf, da Sellerie in Tests nicht vollst√§ndig getestet werden kann.  Sie k√∂nnen etwas sperren, etwas vereinfachen, aber die Tatsache, dass die Mitarbeiter ausgef√ºhrt werden, kann nicht √ºberpr√ºft werden. <br><br>  Die Arbeit mit Tests ist gut implementiert. Selbst in Lernprogrammen zu Go Modules wird beschrieben, wie Abh√§ngigkeiten aktualisiert werden: Sie aktualisieren bestimmte Abh√§ngigkeiten und f√ºhren Tests aus.  Dar√ºber hinaus laufen die Tests nicht nur bei Ihnen, sondern auch in dieser Abh√§ngigkeit. <br><br>  Ein interessanter Aspekt ist noch zu erw√§hnen: Sollen Tests in Paketen in Python sein?  Sollten beim Herunterladen eines Pakets von pypi.org Tests durchgef√ºhrt werden?  Theoretisch sollten sie und haben sogar einen Mechanismus, um sie auszuf√ºhren: In setup.py k√∂nnen Sie angeben, wie Tests ausgef√ºhrt werden und welche Abh√§ngigkeiten sie haben. <br><br>  Aber erstens wissen viele Leute nicht, wie man sie ausf√ºhrt, und f√ºhren keine Tests durch, die abh√§ngig sind.  Daher werden sie oft nicht ben√∂tigt.  Zweitens haben diese Tests h√§ufig sehr schwierige Vorrichtungen, und daher bedeutet das Einschlie√üen von Tests in eine Packung, die Packung 6 bis 10 mal gr√∂√üer zu machen. <br><br>  Es w√§re toll, ein Paket mit und ohne Tests herunterladen zu k√∂nnen.  Aber jetzt gibt es keine solche M√∂glichkeit, sodass sich Tests in Paketen oft nicht summieren.  Es herrscht Chaos und ich wei√ü nicht einmal, ob es m√∂glich ist, diese Abh√§ngigkeiten beim Aktualisieren von Abh√§ngigkeiten zu testen. <br><br>  Dieser Aspekt scheint meistens √ºbersehen zu werden.  Insbesondere in einigen anderen Sprachen wird Go als bew√§hrte Methode angesehen. Aktualisieren Sie ein Paket in der Umgebung, und f√ºhren Sie sofort Tests durch, um sicherzustellen, dass dieses Paket in dieser Umgebung einwandfrei funktioniert. <br><br>  <b>- Warum sind Ihrer Meinung nach in Python Werkzeuge f√ºr die automatische semantische Versionierung nicht beliebt?</b> <br><br>  Ich denke eines der Probleme ist, dass die Version an vielen Stellen beschrieben werden kann.  Am h√§ufigsten gibt es drei davon: das Format der Projekt-Metadatenbeschreibung (pypi.org, poety, setup.py usw.), innerhalb des Projekts selbst und in der Dokumentation.  Ein Upgrade einer Version an drei Stellen ist nicht sehr schwierig, aber leicht zu vergessen. <br><br>  DepHell hat ein Team f√ºr Versions-Upgrades.  DepHell      , ,        .    semantic version, compatible version  ..  <a href="https://dephell.readthedocs.io/cmd-project-bump.html"></a> ,    ,    . <br><br>      Flit. Flit ‚Äî          ,      .    : <code>init</code> , <code>build</code> , <code>publish</code>  <code>install</code> .     ,  ,   PyPI     ‚Äî   .  Flit      ,        .       docstring  .       ,    . <br><br> DepHell     Flit   .        description,   ,   ,       . <br><br><blockquote>  ,      . </blockquote><br>  DepHell      <code>import</code> ,   ,   , ,        .           ,    ,    . <br><br><blockquote>    ,      <a href="https://conf.python.ru/moscow/2020">Moscow Python Conf++</a> 27 .  DepHell    backend, web,    , AI/ML, , DevOps,  , IoT, infosec      . , <a href="http://conf.ontico.ru/conference/join/mpc2020.html"> </a> ,   Moscow Python Conf++. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de483920/">https://habr.com/ru/post/de483920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de483910/index.html">Visuelle Informationstheorie (Teil 1)</a></li>
<li><a href="../de483912/index.html">Was erwartet Sie 2020 von YouTrack?</a></li>
<li><a href="../de483914/index.html">Wir laden Sie zu DINS JavaScript EVENING ein: Wir sprechen √ºber das Design der API und l√∂sen Probleme mit algebraischen Datentypen</a></li>
<li><a href="../de483916/index.html">DJI kann seit einem Monat keine DJI Fly-Apps f√ºr Android 10 patchen</a></li>
<li><a href="../de483918/index.html">Corporate Training: F√ºhrungskr√§fte unterrichten F√ºhrungskr√§fte</a></li>
<li><a href="../de483926/index.html">Three.js und Geometrie</a></li>
<li><a href="../de483930/index.html">6 GitHub-Webentwicklungsprojekte, die einen Blick wert sind</a></li>
<li><a href="../de483934/index.html">Linux-Dateiberechtigungen</a></li>
<li><a href="../de483936/index.html">Spielentwicklungsvorlesung</a></li>
<li><a href="../de483938/index.html">Nakamichi: √ºber die G√∂tter der Kassettenzeit und die Zeiten, in denen die aufgehende Sonne heller schien</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>