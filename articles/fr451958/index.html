<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏦 👰🏿 💃🏿 Nous regardons des torrents sur smart TV sans SMS ni inscription 👨🏼‍⚕️ 🤠 🎅🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr. 

 J'ai décidé de partager l'une des façons dont vous pouvez regarder votre film / série préféré en haute qualité sans visiter de sites...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous regardons des torrents sur smart TV sans SMS ni inscription</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451958/">  Bonjour, Habr. <br><br>  J'ai décidé de partager l'une des façons dont vous pouvez regarder votre film / série préféré en haute qualité sans visiter de sites stupides qui souhaitent que vous jouiez au casino. <br><br>  Faites immédiatement une réservation, je ne vous invite en aucun cas à utiliser du contenu piraté.  Le piratage est mauvais.  Achetez toujours du contenu sous licence. <br><br>  Eh bien, pour ceux qui veulent regarder le torrent, qui n'est pas protégé par le droit d'auteur, sur leur smart TV, sans attendre le téléchargement, voici une façon intéressante. <br><a name="habracut"></a><br>  J'ai un téléviseur intelligent Samsung, sur lequel j'ai essayé de regarder un film de différentes manières. <br><br>  J'ai essayé d'installer minidlna sur Ubuntu.  Jusqu'à un certain temps, cela fonctionnait très bien, mais un jour, l'application sur le téléviseur a commencé à voler périodiquement.  Je n'ai toujours pas compris à quoi cela est lié, une mise à jour infructueuse est peut-être arrivée.  Dans tous les cas, vous ne pouviez regarder que du contenu entièrement téléchargé, ce qui n'était pas très intéressant. <br><br>  J'ai essayé à l'ancienne de télécharger des films sur un disque dur externe et de le brancher sur un téléviseur.  Après quelques fois, cela m'a dérangé. <br><br>  En conséquence, pendant longtemps, j'ai simplement regardé le navigateur intégré au téléviseur.  Après un certain temps, cette méthode est devenue terriblement trop. <br><br>  Je voulais quelque chose de pratique et de simple, et pour ne pas attendre immédiatement que tout le contenu soit chargé. <br><br>  Vous dites qu'il existe un Chromecast.  Mais je voulais tout faire sans appareils supplémentaires chez moi. <br><br>  Il s'est avéré que le navigateur intégré (contrairement au chrome de bureau) prend en charge HLS.  Eh bien, pourquoi ne pas simplement récupérer le flux hls sur l'ordinateur portable et regarder à travers le navigateur. <br><br>  Et c'est parti. <br><br><h3>  1. Nous mettons un client torrent </h3><br>  Il y a un paquet npm très cool appelé torrent.  Tout irait bien, mais il ne sait pas comment sélectionner un fichier et une liste à télécharger et limiter la vitesse de téléchargement.  C'est très important.  Mais il est minimaliste, prend les fêtes très rapidement et le secoue parfaitement en mode séquentiel, ce dont nous avons besoin. <br><br>  J'ai dû fouiller dans les tripes et ajouter les fonctionnalités nécessaires.  Et nous avons donc mis torrent d'une fourche <br><br><pre><code class="plaintext hljs">npm install 'https://github.com/zim32/torrent.git#master' -g</code> </pre> <br>  Téléchargez un fichier torrent ou un lien magnétique. <br><br>  Pour obtenir une liste de fichiers, vous devez exécuter la commande info <br><br><pre> <code class="plaintext hljs">torrent info some.torrent | less</code> </pre> <br>  Trouvez le nom de fichier dont nous avons besoin (pas le chemin) et exécutez la commande <br><br><pre> <code class="plaintext hljs">torrent some.torrent --select 'FILE_NAME' --downloadLimit 1000000</code> </pre> <br>  Si tout va bien, vous verrez des statistiques de téléchargement, le nombre de pairs, etc.  Les fichiers seront ajoutés au répertoire actuel.  Limite de vitesse en octets / s. <br><br>  La restriction est nécessaire, car dans mon cas, le torrent obstrue toute la chaîne, le routeur devient mauvais et d'autres freins se produisent entre l'ordinateur portable et la Smart TV.  L'essentiel est que la vitesse soit supérieure au débit binaire du flux, sinon il y aura des charges et des tampons. <br><br><h3>  Création de flux HLS </h3><br>  Installez ffmpeg.  Dans mon cas, tout a fonctionné avec le ffmpeg habituel du référentiel. <br><br><pre> <code class="plaintext hljs">apt install ffmpeg</code> </pre> <br>  Nous créons un répertoire public où ira notre flux. <br><br>  De plus, plusieurs options sont possibles.  Si dans le fichier source la vidéo est au format h264 et que l'audio est AAC, vous pouvez essayer de ne pas transcoder le flux.  Dans ce cas, exécutez le flux de cette manière <br><br><pre> <code class="plaintext hljs">ffmpeg -re -i 'torrent_dir/movie.mkv' -codec copy -map 0:0 -map 0:1 -map_chapters -1 -movflags default_base_moof+frag_keyframe -f hls -hls_playlist_type event ~/www/player/out.m3u8</code> </pre> <br>  Si les codecs sont différents, vous devrez transcoder à la volée.  Sur mon ordinateur portable, ffmpeg a suivi le flux. <br><br><pre> <code class="plaintext hljs">ffmpeg -re -i 'torrent_dir/movie.avi' -c:v libx264 -preset slow -r 24 -x264opts fps=24:bitrate=2000:pass=1:vbv-maxrate=4000:vbv-bufsize=8000:keyint=24:min-keyint=24:scenecut=0:no-scenecut -c:a aac -b:a 256k -map 0:0 -map 0:1 -map_chapters -1 -movflags default_base_moof+frag_keyframe -f hls -hls_playlist_type event ~/www/player/out.m3u8</code> </pre> <br>  Avec les options -map 0: 0 et -map 0: 1, nous faisons vibrer les canaux souhaités.  Vidéo et piste russe.  L'option -map_chapters -1 supprime toutes les ordures au cas où sous la forme d'informations de chapitre, etc. <br><br>  Vous pouvez regarder les chaînes disponibles avec la commande ffprobe movie.mkv <br><br><h3>  Créer un serveur </h3><br>  Dans le même dossier où va le flux, vous devez placer le fichier index.html avec le contenu suivant <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Title<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"out.m3u8"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">controls</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">video</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Installez un simple serveur http. <br><br><pre> <code class="plaintext hljs">npm i http-server -g</code> </pre> <br>  Nous démarrons le serveur <br><br><pre> <code class="plaintext hljs">http-server -a 0.0.0.0 -c-1</code> </pre> <br><h3>  Regarder un film </h3><br>  Maintenant, sur le téléviseur, il suffit d'ouvrir un navigateur avec l'adresse de votre ordinateur portable, par exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">192.168.1.200</a> : 8080 et d'en profiter. <br><br>  Merci à tous pour votre attention. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr451958/">https://habr.com/ru/post/fr451958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr451944/index.html">2019: année de DEX (échanges décentralisés)</a></li>
<li><a href="../fr451948/index.html">L'histoire des trois cartouches</a></li>
<li><a href="../fr451950/index.html">Centrales virtuelles. Est-il possible de gérer les sources d'énergie "verte"?</a></li>
<li><a href="../fr451954/index.html">Plus de télégrammes secrets</a></li>
<li><a href="../fr451956/index.html">Utilisation d'AppDynamics avec Red Hat OpenShift v3</a></li>
<li><a href="../fr451960/index.html">90 vulnérabilités d'exécution de code à distance dans la mise à jour de mai mardi</a></li>
<li><a href="../fr451962/index.html">Créer des outils dans des projets d'apprentissage automatique, un aperçu</a></li>
<li><a href="../fr451966/index.html">Les périphériques d'E / S modernes sont plus rapides que les processeurs. Présentation de l'article</a></li>
<li><a href="../fr451968/index.html">Top 3D Academy - formation aux technologies additives dans les principales entreprises russes</a></li>
<li><a href="../fr451970/index.html">Thrangrycat: une vulnérabilité critique dans le micrologiciel des périphériques Cisco permet aux pirates informatiques d'y installer des portes dérobées</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>