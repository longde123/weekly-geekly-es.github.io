<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèôÔ∏è üèÅ ü§¶üèΩ xonsh - Python als Shell-Ersatz ü•ì üë©üèø‚Äçüíº üë©üèº‚ÄçüöÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="√úberraschenderweise gibt es auf dem Hub immer noch keinen Beitrag √ºber einen so sehr interessanten Shell-Ersatz wie xonsh ( github ). Aus meiner Sicht...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>xonsh - Python als Shell-Ersatz</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429892/"><p>  √úberraschenderweise gibt es auf dem Hub immer noch keinen Beitrag √ºber einen so sehr interessanten Shell-Ersatz wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">xonsh</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">github</a> ). Aus meiner Sicht ist die Syntax aller Shells schrecklich und ich sehe keinen Grund, sie im 21. Jahrhundert zu speichern, und Python in meinem Es hat eine ausgezeichnete Syntax und viele andere Vorteile, daher sollte es meiner Meinung nach die Standard-Automatisierungssprache sein, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">was xonsh erreichen m√∂chte</a> . </p><br><p>  Ich benutze xonsh seit einiger Zeit, daher denke ich, dass ich genug dar√ºber sprechen kann, um es zu verwenden. </p><a name="habracut"></a><br><p>  Reservierungen: </p><br><ul><li>  Bei xonsh geht es nur um Python 3, aber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das ist die Norm</a> . </li><li>  xonsh wurde noch nicht ver√∂ffentlicht (Version 0.8.3 zum Zeitpunkt des Schreibens), anscheinend wurden nach Angaben der Entwickler noch nicht alle gew√ºnschten Funktionen implementiert, aber meiner Meinung nach funktioniert alles (wenn Sie sich die Unterschiede ansehen, √ºber die unten). </li></ul><br><p>  Das Hauptmerkmal von xonsh ist, dass es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"magisch"</a> err√§t, was Sie eingegeben haben - ein Python- oder Shell-Befehl, und dies funktioniert recht gut. </p><br><p> Sie k√∂nnen Python-Code mit einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hund</a> in Shell-Befehle einf√ºgen. </p><br><p>  Ich werde nicht n√§her auf die Funktionen in xonsh eingehen. Dies wird in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> und in allen Arten von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikeln</a> klar und grafisch beschrieben. Aus meiner Sicht reicht es aus, dass Sie die normale Schleifensyntax in der Shell erhalten: </p><br><pre><code class="plaintext hljs">worldmind@x ~ $ for i in range(3): ............... echo $SHELL</code> </pre> <br><p>  Daher werde ich versuchen, mich auf das zu konzentrieren, was nicht oder schlecht beschrieben wird. </p><br><h2 id="ustanovka">  Installation </h2><br><p>  Ich werde die Installation (f√ºr Debian / Ubuntu) beschreiben, f√ºr die keine Superuser-Berechtigungen erforderlich sind. Obwohl ich erst k√ºrzlich zu einem solchen Schema gewechselt bin, habe ich es zuvor in die Systemordner gestellt, in <code>/etc/shells</code> und die Shell mit dem <code>chsh</code> ge√§ndert, aber auf den ersten Blick funktioniert alles Auch mit der neuen Methode, und es scheint mir korrekter, m√∂chte ich das System nicht mit Paketen verstopfen, die nicht aus den Repositorys stammen, aber hier entscheidet jeder f√ºr sich. </p><br><p>  Wir setzen pip wenn nicht schon: </p><br><pre> <code class="plaintext hljs">sudo apt-get install python3-pip</code> </pre> <br><p>  Wir setzen xonsh (ohne sudo), ich gebe einen Befehl, der alle optionalen Abh√§ngigkeiten installiert, um alle von den Autoren konzipierten Br√∂tchen zu erhalten. Wenn jemand eine minimale Installation w√ºnscht, k√∂nnen Sie die eckigen Klammern mit dem Inhalt entfernen: </p><br><pre> <code class="plaintext hljs">pip3 install --user xonsh[ptk,pygments,proctitle,linux]</code> </pre> <br><p>  H√∂chstwahrscheinlich haben Sie bereits irgendwo im <code>.profile</code> in PATH die Pfade zum lokalen Ordner mit den Bin√§rdateien <code>$HOME/.local/bin</code> hinzugef√ºgt, aber sie werden nur hinzugef√ºgt, wenn sie vorhanden sind. Daher m√ºssen Sie das Terminal neu starten, damit dieser Code funktioniert und die xonsh-Bin√§rdatei musste rennen und sehen. <br>  Update ist Standard: </p><br><pre> <code class="plaintext hljs">pip3 install --user xonsh --upgrade</code> </pre> <br><h3 id="venv">  venv </h3><br><p>  Wir setzen venv, wenn wir die entsprechende Funktionalit√§t nutzen wollen (siehe weiter unten auf vox): </p><br><pre> <code class="plaintext hljs">sudo apt-get install python3-venv</code> </pre> <br><p>  Alle Venvs sind f√ºr bestimmte Shells gesch√§rft, daher bietet xonsh einen eigenen Wrapper namens <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vox an</a> . F√ºr eine komfortable Verwendung lohnt es sich jedoch, die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">avox-</a> Erweiterung zu installieren: </p><br><pre> <code class="plaintext hljs">pip3 install --user xontrib-avox</code> </pre> <br><h3 id="ustanovka-pyenv">  Pyenv-Installation </h3><br><p>  Wenn virtuelle Umgebungen mit einer beliebigen Version von Python ben√∂tigt werden, m√ºssen Sie pyenv klonen, indem Sie zuerst <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Abh√§ngigkeiten zum</a> Erstellen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Python installieren</a> : </p><br><pre> <code class="plaintext hljs">git clone https://github.com/pyenv/pyenv.git ~/.pyenv</code> </pre> <br><p>  Weiter in der Beispielkonfiguration sehen Sie die Installation eines Paares von Umgebungsvariablen zur Verwendung von pyenv. </p><br><h3 id="zapusk">  Starten </h3><br><p>  Jetzt haben wir alles installiert und es bleibt √ºbrig, xonsh zu einer Shell zu machen. Um nichts au√üerhalb des Benutzerordners zu √§ndern, verwende ich den folgenden Code (basierend auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SO</a> ) f√ºr die Bash (wenn Sie eine andere Shell haben, wissen Sie, was zu tun ist, verwenden aber kein .profile da xonsh es auch liest) hinzugef√ºgt zu <code>.bashrc</code> : </p><br><pre> <code class="plaintext hljs"># set default shell without editing /etc/shells if [ "${XONSH_VERSION:-unset}" = "unset" ] ; then export SHELL=$HOME/.local/bin/xonsh exec $HOME/.local/bin/xonsh -l fi</code> </pre> <br><p>  Wir starten die Shell neu und wenn alles gut gegangen ist, befinden Sie sich bereits in xonsh, d. H.  Im Wesentlichen in der Python-Konsole, und Sie k√∂nnen beispielsweise Berechnungen direkt √ºber die Befehlszeile ausf√ºhren, um beispielsweise herauszufinden, wie viel <code>2+2</code> wird. </p><br><h2 id="nastroyka">  Anpassung </h2><br><p>  Bevor Sie es verwenden, sollten Sie eine <code>.xonshrc</code> Konfigurationsdatei erstellen: </p><br><pre> <code class="plaintext hljs">aliases['g'] = 'git' import os local_bin = '{}/.local/bin'.format($HOME) if os.path.isdir(local_bin): $PATH.append(local_bin) $PYENV_ROOT = '%s/.pyenv' % $HOME $PATH.insert(0, '%s/bin' % $PYENV_ROOT) xontrib load vox $PROJECT_DIRS = ["~/projects"] xontrib load avox</code> </pre> <br><p>  Startet die Shell neu, um die neuen Einstellungen zu √ºbernehmen. </p><br><p>  Es lohnt sich, auf das menschliche Datenmodell zu achten - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aliase</a> sind ein W√∂rterbuch, Wege sind eine Liste, es scheint offensichtlich, aber aus irgendeinem Grund ist es nicht immer so. <br>  Au√üerdem haben wir das <code>os</code> Modul in die Konfiguration importiert, was bedeutet, dass es bereits in unserer Shell verf√ºgbar ist, sodass Sie die erforderlichen Module importieren und Ihre eigene, komfortable Umgebung erhalten k√∂nnen. </p><br><p>  Der Anfang der obigen Datei dient eher der Veranschaulichung der Funktionen. In den letzten drei Zeilen k√∂nnen Sie jedoch bequem virtuelle Umgebungen verwenden, von denen ein Beispiel sp√§ter verwendet wird. </p><br><h2 id="ispolzovanie-virtualnyh-okruzheniy">  Virtuelle Umgebungen verwenden </h2><br><p>  Erstellen Sie einen Projektordner (avox erwartet, dass sich alle Projekte in <code>$PROJECT_DIRS</code> ): </p><br><pre> <code class="plaintext hljs">mkdir -p projects/test</code> </pre> <br><p>  Erstellen Sie eine virtuelle Umgebung f√ºr dieses Projekt: </p><br><pre> <code class="plaintext hljs">vox new test</code> </pre> <br><p>  Dank des konfigurierten <code>avox</code> Add- <code>avox</code> m√ºssen wir nur zum Projektordner gehen, um die virtuelle Umgebung zu aktivieren. <code>source ./bin/activate</code> m√ºssen keine seltsame <code>source ./bin/activate</code> : </p><br><pre> <code class="plaintext hljs">worldmind@x ~ $ cd projects/test/ (test) worldmind@x ~/projects/test $ pip install see ... (test) worldmind@x ~/projects/test $ python -c 'import see'</code> </pre> <br><p>  Beim Verlassen des Ordners wird die virtuelle Umgebung deaktiviert: </p><br><pre> <code class="plaintext hljs">(test) worldmind@x ~/projects/test $ cd worldmind@x ~ $ python3 -c 'import see' err&gt;out | fgrep 'NotFound' ModuleNotFoundError: No module named 'see'</code> </pre> <br><p>  Gleichzeitig k√∂nnen Sie mehr menschliche Arbeit mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Umleitung von E / A-Streams sehen</a> , die nie vergessen haben, wie dies bei allen Arten von Bashs zu tun ist. Lassen Sie sie die Ersten sein, die Kommentare auf mich werfen. </p><br><p><del>  Der Vollst√§ndigkeit halber m√∂chte ich, dass es in diesen virtuellen Umgebungen m√∂glich w√§re, eine beliebige Version von Python zu verwenden, die beispielsweise √ºber Pyenv installiert wurde, aber bisher <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">nicht zusammengewachsen</a> ist und die H√§nde nicht zum Aush√§rten gelangt sind. </del><br>  UPD: Vor nicht allzu langer Zeit wurde xonsh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">beigebracht,</a> eine beliebige Version von Python in virtuellen Umgebungen zu verwenden. <br>  Installieren Sie die gew√ºnschte Version von Python (Liste der verf√ºgbaren <code>pyenv install --list</code> ): </p><br><pre> <code class="plaintext hljs">pyenv install 3.7.2</code> </pre> <br><p>  Erstellen Sie mit ihr eine virtuelle Umgebung: </p><br><pre> <code class="plaintext hljs">mkdir projects/projectwith3.7 vox new -p $PYENV_ROOT/versions/3.7.2/bin/python projectwith3.7</code> </pre> <br><p>  Wir pr√ºfen: </p><br><pre> <code class="plaintext hljs">(projectwith3.7) worldmind@x ~/projects/projectwith3.7 $ python --version Python 3.7.2</code> </pre> <br><h2 id="grabli">  Rechen </h2><br><p>  Das einzige, was ich mir ausgedacht habe, sind die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unterschiede bei der Flucht</a> : </p><br><pre> <code class="plaintext hljs">find . -name data.txt -exec echo {} \;</code> </pre> <br><p>  funktioniert nicht, da das Escape-Backslash in xonsh nicht funktioniert und geschweifte Klammern eine besondere Bedeutung haben. Sie m√ºssen beispielsweise Anf√ºhrungszeichen verwenden: </p><br><pre> <code class="plaintext hljs">find . -name .xonshrc -exec echo '{}' ';'</code> </pre> <br><p>  Einige Unterschiede zu Bash bestehen in Form einer Tabelle in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> . </p><br><h2 id="vyvod">  Fazit </h2><br><p>  Es scheint mir, dass xonsh ein guter Anw√§rter auf die normale H√ºlle der Zukunft f√ºr alle ist, und insbesondere sollte es Pythonisten ansprechen.  Beginnen Sie mit der Verwendung (Installation ohne sudo erleichtert das Zur√ºcksetzen, Sie k√∂nnen den Ordner einfach l√∂schen), um zu verstehen, ob alles f√ºr Sie pers√∂nlich da ist. Vielleicht haben Sie danach gesucht, hatten aber Angst, es zu installieren. </p><br><h2 id="dopolneniya-v-kommentariyah">  Erg√§nzungen in den Kommentaren </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Festlegen von Umgebungsvariablen f√ºr Ordner</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Aktivierungs-Hooks f√ºr die virtuelle Umgebung</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de429892/">https://habr.com/ru/post/de429892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de429880/index.html">Pix4D - von Fotos bis zu Messungen</a></li>
<li><a href="../de429882/index.html">Steuerung von RGB-LEDs √ºber Cypress UDB Microcontroller PSoC</a></li>
<li><a href="../de429884/index.html">PROSTOR 2018 Konferenz: Fragen und Antworten zur Zukunft der Speicherung</a></li>
<li><a href="../de429888/index.html">Stapelbasierter Taschenrechner auf der Cyclone IV FPGA-Karte</a></li>
<li><a href="../de429890/index.html">Offenes Webinar "Generative gegnerische Netzwerke"</a></li>
<li><a href="../de429894/index.html">Verwenden eines Fischauges auf einem Raspberry Pi 3 mit ROS - Teil 2</a></li>
<li><a href="../de429898/index.html">DMS (Dealership Management System) - Implementierung von Information EcoSystems f√ºr das Dealer Network Management</a></li>
<li><a href="../de429902/index.html">Seitenrang im Web 2.0-Zeitalter - Teil 1</a></li>
<li><a href="../de429904/index.html">Lustige und traurige Geschichten √ºber die Entwicklung von Computerspielen</a></li>
<li><a href="../de429908/index.html">Wie man Coroutinen in Lebensmitteln verwendet und nachts ruhig schl√§ft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>