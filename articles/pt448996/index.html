<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî∏ üë©üèΩ‚Äçüöí ‚ò†Ô∏è Criando uma pol√≠tica de senha no Linux üêΩ üïã üòù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√° novamente! As aulas come√ßar√£o amanh√£ no novo grupo do curso Administrador Linux , e nesse sentido publicamos um artigo √∫til sobre o assunto. 



 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criando uma pol√≠tica de senha no Linux</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/448996/"> Ol√° novamente!  As aulas come√ßar√£o amanh√£ no novo grupo do curso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Administrador Linux</a> , e nesse sentido publicamos um artigo √∫til sobre o assunto. <br><br><img src="https://habrastorage.org/webt/91/09/oo/9109oomfqbvlyjurdgyq0wkkpw4.png"><br><br>  No √∫ltimo tutorial, falamos sobre como usar o <code>pam_cracklib</code> para complicar senhas nos sistemas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Red Hat 6</a> ou CentOS.  No Red Hat 7, <code>pam_pwquality</code> substituiu <code>cracklib</code> como o m√≥dulo <code>pam</code> para verifica√ß√£o de senha.  O m√≥dulo <code>pam_pwquality</code> tamb√©m <code>pam_pwquality</code> suportado no Ubuntu e CentOS, bem como em muitos outros sistemas operacionais.  Este m√≥dulo facilita a cria√ß√£o de pol√≠ticas de senha para garantir que os usu√°rios aceitem seus padr√µes de complexidade de senha. <a name="habracut"></a><br><br>  Por um longo tempo, a abordagem usual das senhas era for√ßar o usu√°rio a usar caracteres mai√∫sculos e min√∫sculos, n√∫meros ou outros caracteres neles.  Essas regras b√°sicas de complexidade de senha foram promovidas ativamente nos √∫ltimos dez anos.  Houve muita discuss√£o sobre se isso √© uma boa pr√°tica ou n√£o.  O principal argumento contra a defini√ß√£o de condi√ß√µes t√£o dif√≠ceis foi que os usu√°rios escrevessem senhas no papel e as armazenassem de maneira insegura. <br><br>  Outra pol√≠tica que foi recentemente questionada obriga os usu√°rios a alterar suas senhas a cada x dias.  V√°rios estudos foram realizados que mostraram que isso tamb√©m √© prejudicial √† seguran√ßa. <br><br>  Muitos artigos foram escritos sobre o t√≥pico dessas discuss√µes que justificam esse ou aquele ponto de vista.  Mas n√£o √© isso que discutiremos neste artigo.  Este artigo mostrar√° como definir corretamente a complexidade da senha e n√£o gerenciar a pol√≠tica de seguran√ßa. <br><br>  <b>Configura√ß√µes de diretiva de senha</b> <br><br>  Abaixo, voc√™ ver√° as configura√ß√µes da pol√≠tica de senha e uma breve descri√ß√£o de cada uma delas.  Muitos deles s√£o semelhantes aos par√¢metros no m√≥dulo <code>cracklib</code> .  Essa abordagem facilita a porta de suas pol√≠ticas do sistema antigo. <br><br><ul><li>  <b>difok</b> - O n√∫mero de caracteres na sua nova senha que N√ÉO deve estar presente na sua senha antiga.  (O padr√£o √© 5) </li><li>  <b>minlen</b> - O tamanho m√≠nimo da senha.  (O padr√£o √© 9) </li><li>  <b>ucredit</b> - O n√∫mero m√°ximo de cr√©ditos para o uso de caracteres mai√∫sculos (se o par√¢metro&gt; 0) ou o n√∫mero m√≠nimo necess√°rio de caracteres mai√∫sculos (se o par√¢metro &lt;0).  O padr√£o √© 1. </li><li>  <b>lcredit</b> - O n√∫mero m√°ximo de cr√©ditos para o uso de caracteres min√∫sculos (se o par√¢metro&gt; 0) ou o n√∫mero m√≠nimo necess√°rio de caracteres min√∫sculos (se o par√¢metro &lt;0).  O padr√£o √© 1. </li><li>  <b>dcredit</b> - O n√∫mero m√°ximo de cr√©ditos para o uso de d√≠gitos (se o par√¢metro&gt; 0) ou o n√∫mero m√≠nimo necess√°rio de d√≠gitos (se o par√¢metro &lt;0).  O padr√£o √© 1. </li><li>  <b>ocredit</b> - O n√∫mero m√°ximo de cr√©ditos pelo uso de outros s√≠mbolos (se par√¢metro&gt; 0) ou o n√∫mero m√≠nimo necess√°rio de outros s√≠mbolos (se par√¢metro &lt;0).  O padr√£o √© 1. </li><li>  <b>minclass</b> - Define o n√∫mero de classes necess√°rias.  As classes incluem os par√¢metros acima (mai√∫sculas, min√∫sculas, n√∫meros, outros caracteres).  O padr√£o √© 0. </li><li>  <b>maxrepeat</b> - O n√∫mero m√°ximo de <b>vezes que um caractere</b> √© repetido em uma senha.  O padr√£o √© 0. </li><li>  <b>maxclassrepeat</b> - O n√∫mero m√°ximo de caracteres consecutivos em uma √∫nica classe.  O padr√£o √© 0. </li><li>  <b>gecoscheck</b> - Verifica se a senha cont√©m alguma palavra das linhas GECOS do usu√°rio.  (Informa√ß√µes do usu√°rio, por exemplo, nome real, local etc.) Padr√£o 0 (desativado). </li><li>  <b>dictpath</b> - Permite desabilitar dicion√°rios. </li><li>  <b>badwords</b> - palavras <b>separadas por espa√ßo</b> que s√£o proibidas em senhas (nome da empresa, palavra "senha" etc.). </li></ul><br>  Se o conceito de empr√©stimos parecer estranho, tudo bem, tudo bem.  Falaremos sobre isso em mais detalhes nas pr√≥ximas se√ß√µes. <br><br>  <b>Configura√ß√£o da Pol√≠tica de Senha</b> <br><br>  Antes de come√ßar a editar arquivos de configura√ß√£o, √© uma boa pr√°tica pr√©-escrever a pol√≠tica de senha b√°sica.  Por exemplo, usaremos as seguintes regras de complexidade: <br><br><ul><li>  A senha deve ter um comprimento m√≠nimo de 15 caracteres. </li><li>  Na senha, o mesmo caractere n√£o deve ser repetido mais de duas vezes. </li><li>  Em uma senha, as classes de caracteres podem ser repetidas at√© quatro vezes. </li><li>  A senha deve conter caracteres de cada classe. </li><li>  A nova senha deve ter 5 novos caracteres em compara√ß√£o com a antiga. </li><li>  Habilite a valida√ß√£o GECOS. </li><li>  Negue as palavras "senha, senha, palavra, put√≥rio" </li></ul><br>  Agora, assim que definimos a pol√≠tica, podemos editar o arquivo <code>/etc/security/pwquality.conf</code> para refor√ßar os requisitos de complexidade da senha.  Abaixo est√° um exemplo de arquivo de coment√°rio para melhor compreens√£o. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Make sure 5 characters in new password are new compared to old password difok = 5 # Set the minimum length acceptable for new passwords minlen = 15 # Require at least 2 digits dcredit = -2 # Require at least 2 upper case letters ucredit = -2 # Require at least 2 lower case letters lcredit = -2 # Require at least 2 special characters (non-alphanumeric) ocredit = -2 # Require a character from every class (upper, lower, digit, other) minclass = 4 # Only allow each character to be repeated twice, avoid things like LLL maxrepeat = 2 # Only allow a class to be repeated 4 times maxclassrepeat = 4 # Check user information (Real name, etc) to ensure it is not used in password gecoscheck = 1 # Leave default dictionary path dictpath = # Forbid the following words in passwords badwords = password pass word putorius</span></span></code> </pre> <br>  Como voc√™ deve ter notado, alguns par√¢metros em nosso arquivo s√£o redundantes.  Por exemplo, o par√¢metro <code>minclass</code> redundante, pois j√° usamos pelo menos dois caracteres da classe usando os campos de <code>[u,l,d,o]credit</code> .  Nossa lista de palavras que n√£o podem ser usadas tamb√©m √© redundante, pois proibimos a repeti√ß√£o de qualquer classe 4 vezes (todas as palavras da nossa lista s√£o escritas em letras min√∫sculas).  Eu inclu√≠ essas op√ß√µes apenas para demonstrar como us√°-las para configurar uma pol√≠tica de senha. <br>  Depois de criar sua pol√≠tica, voc√™ pode for√ßar os usu√°rios a alterar suas senhas na pr√≥xima vez que efetuarem login. <br><br>  Outra coisa estranha que voc√™ deve ter notado √© que os campos <code>[u,l,d,o]credit</code> cont√™m um n√∫mero negativo.  Isso ocorre porque n√∫meros maiores ou iguais a 0 dar√£o cr√©dito pelo uso do caractere em sua senha.  Se o campo contiver um n√∫mero negativo, significa que √© necess√°ria uma certa quantia. <br><br>  <b>O que s√£o empr√©stimos?</b> <br><br>  Eu os chamo de empr√©stimos, porque transmite com precis√£o seu objetivo.  Se o valor do par√¢metro for maior que 0, adicione o n√∫mero de "cr√©ditos por caracteres" igual a "x" ao comprimento da senha.  Por exemplo, se todos os par√¢metros <code>(u,l,d,o)credit</code> definidos como 1 e o comprimento da senha necess√°rio for 6, ser√£o necess√°rios 6 caracteres para atender ao requisito de comprimento, porque cada caractere √© mai√∫sculo, min√∫sculo, d√≠gito ou outro caractere lhe dar√° um empr√©stimo. <br><br>  Se voc√™ definir <code>dcredit</code> como 2, teoricamente poder√° usar uma senha de 9 caracteres e obter 2 cr√©ditos por caracteres para n√∫meros, e a senha j√° poder√° ser 10. <br><br>  D√™ uma olhada neste exemplo.  Defino o tamanho da senha como 13, defino dcredit como 2 e todo o resto como 0. <br><br><pre> <code class="bash hljs">$ pwscore Thisistwelve Password quality check failed: The password is shorter than 13 characters $ pwscore Th1sistwelve 18</code> </pre> <br>  Minha primeira verifica√ß√£o falhou porque a senha tinha menos de 13 caracteres.  Na pr√≥xima vez, mudei a letra ‚ÄúI‚Äù para o n√∫mero ‚Äú1‚Äù e recebi dois cr√©ditos pelos n√∫meros, o que equivalia √† senha como 13. <br><br>  <b>Teste de senha</b> <br><br>  O pacote <code>libpwquality</code> fornece a funcionalidade descrita no artigo.  Ele tamb√©m vem com o programa <code>pwscore</code> , projetado para verificar a senha quanto √† complexidade.  Usamos isso acima para verificar empr√©stimos. <br><br>  O utilit√°rio <code>pwscore</code> l√™ a partir de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">stdin</a> .  Basta executar o utilit√°rio e escrever sua senha, isso dar√° um erro ou um valor de 0 a 100. <br><br>  O √≠ndice de qualidade da senha est√° relacionado ao par√¢metro <code>minlen</code> no arquivo de configura√ß√£o.  Em geral, um indicador menor que 50 √© considerado como uma "senha normal" e acima como uma "senha forte".  Qualquer senha que passe nas verifica√ß√µes de qualidade (especialmente <code>cracklib</code> verifica√ß√µes for√ßadas por <code>cracklib</code> ) deve suportar ataques de dicion√°rio, e uma senha com pontua√ß√£o maior que 50 com a configura√ß√£o padr√£o de <code>minlen</code> at√© um <code>brute force</code> . <br><br>  <b>Conclus√£o</b> <br><br>  A configura√ß√£o do <code>pwquality</code> √© <code>pwquality</code> e f√°cil em compara√ß√£o com a inconveni√™ncia de usar o <code>cracklib</code> com a edi√ß√£o direta de arquivos <code>pam</code> .  Neste guia, abordamos tudo o que voc√™ precisa para configurar pol√≠ticas de senha nos sistemas Red Hat 7, CentOS 7 e at√© Ubuntu.  Tamb√©m conversamos sobre o conceito de empr√©stimos, que raramente s√£o escritos em detalhes; portanto, esse t√≥pico geralmente permanece incompreens√≠vel para quem nunca o havia encontrado antes. <br><br>  <b>Fontes:</b> <br><br>  <a href="">p√°gina do manual pwquality</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">P√°gina do manual pam_pwquality</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">p√°gina de manual do pwscore</a> <br><br>  <b>Links √∫teis:</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Escolhendo senhas seguras - Bruce Schneier</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Lorrie Faith Cranor discute seus estudos de senha na CMU</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O infame desenho animado xkcd na Entropy</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt448996/">https://habr.com/ru/post/pt448996/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt448980/index.html">Nosso primeiro almo√ßo juntos: por que e como passamos o dia do teste</a></li>
<li><a href="../pt448982/index.html">CMS sem cabe√ßa. Por que estou escrevendo o meu</a></li>
<li><a href="../pt448986/index.html">Engenharia reversa 3D com digitaliza√ß√£o 3D</a></li>
<li><a href="../pt448992/index.html">Hash vers√°til e perfeito</a></li>
<li><a href="../pt448994/index.html">√â t√£o dif√≠cil iniciar o caminho de um recrutador de TI?</a></li>
<li><a href="../pt448998/index.html">Se a conex√£o √© apenas estanque, √© necess√°rio enterr√°-la</a></li>
<li><a href="../pt449000/index.html">O Deno √© o novo Node.js?</a></li>
<li><a href="../pt449002/index.html">Verifica√ß√£o formal do exemplo do problema do lobo, cabra e couve</a></li>
<li><a href="../pt449004/index.html">Novo na certifica√ß√£o de seguran√ßa da informa√ß√£o</a></li>
<li><a href="../pt449006/index.html">A complexidade oculta dos slots de videogame</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>