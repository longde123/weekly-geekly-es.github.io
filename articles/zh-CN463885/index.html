<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐭 😪 ◼️ 在具有16MB FLASH的路由器上更新MikroTik RouterOS的问题 👛 🏩 🦕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="最近，来自MikroTik的家伙搞砸了（还是？），而我最喜欢的“ hAP lite”停止了更新。 从版本6.45.1到6.45.2，它没有更新，他写道，空间不足。 人们注意到了该门框，在SMIPS体系结构的6.45.3版本中，它们通过将“多余” 丢弃掉来减小了数据包的大小（ smips-减小了Rou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>在具有16MB FLASH的路由器上更新MikroTik RouterOS的问题</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463885/"><img src="https://habrastorage.org/webt/rx/_7/pa/rx_7paqmrywn1hefmvoxoxoc9o0.jpeg"><br><br> 最近，来自MikroTik的家伙搞砸了（还是？），而我最喜欢的“ hAP lite”停止了更新。 从版本6.45.1到6.45.2，它没有更新，他写道，空间不足。 人们注意到了该门框，在SMIPS体系结构的6.45.3版本中，它们通过将“多余” <i>丢弃</i>掉来减小了数据包的大小（ <i>smips-减小了RouterOS主程序包的大小（禁用了LTE调制解调器，dot1x和SwOS支持</i> ）。 现在已经下载了软件包，有足够的空间供您使用，但是...重新启动后，该版本仍为6.45.1，并且在日志中，我们看到消息“没有足够的空间用于升级”。  <i>骗子喝醉了，把戏失败了。</i> <br><a name="habracut"></a><br>  <i>好的，谷歌，mikrotik没有足够的升级空间</i> <br> 在forum.mikrotik.com上，我们发现问题很旧，根据版本6.40.4在2017年首次提及。 遗憾的是，该公司似乎在测试方面遇到了问题。 <br> 我们发现使用<a href="">fix_space.npk</a>的建议，下载后， <a href="">将其拖放</a>到路由器上，重新启动，然后...对我没有帮助。 <br><br> 此外，最后，我们找到了有用的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文章</a> 。 简而言之： <br><br><ul><li> 更新捆绑在一起 </li><li> 默认情况下，数据包是从元包继承的（在我的情况下为“ routeros-smips”） </li><li> 您不能删除（卸载）继承的软件包，因为有关它们的信息包含在元软件包中 </li><li> 更新时，将更新元软件包及其继承人，甚至禁用的继承人 </li><li> 路由器的恒定内存分为多个部分-隐藏的系统，用户可以访问 </li><li> 要进行更新，必须将必要的软件包/元软件包放入用户部分并重新启动 </li><li> 如果从winbox，Web界面或终端进行更新，则必要的元软件包会自动下载到用户部分，路由器会重新启动 </li><li> 重新引导后，如果用户分区中有软件包，则将<b>从系统分区中删除所有已安装的软件包</b> ，并<b>安装</b>用户分区中的软件包，然后<b>从用户分区中将</b>其删除。 </li></ul><br> 从上面可以看出，如果仅在用户部分上放置必需的软件包并重新启动，则将删除具有所有继承人的meta软件包，仅交付必需的软件包，由于删除了不必要的软件包，将释放少量空间，这对于后续更新是必需的。 让我们来看看。 <br><br><img src="https://habrastorage.org/webt/rm/ko/cg/rmkocgi0tp3qdu7cx0yclezdnga.png"><br><br> 路由器是廉价的，因此它主要用于家庭或小型办公室，这意味着我们几乎不需要高级工具，热点，ipv6，mpls，路由软件包。 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">官方Wiki</a>上了解有关软件包的更多信息，选择所需的软件包和不需要的软件包。 例如，在此路由器上禁用了ipv6，但我在家使用它。 请注意，如果您忘记放置正确的包装，则<i>更新远程路由器将是一个漫长的旅程</i> 。 <br><br><img src="https://habrastorage.org/webt/t9/k0/0p/t9k00plocwiczrilkcd_kxcphny.png"><br><br> 如您所见，用户部分为空，只有8.5MB <br><br><img src="https://habrastorage.org/webt/e-/um/o8/e-umo8inqnlhywxobvj_w9imhfg.png"><br><br> 尝试更新时，请发誓空间不足。 实际上，屏幕截图是“绘制”的，在6.45.2版上是诅咒的，而在6.45.3版上，有足够的加载空间，因此我们不得不作弊，但是在这种情况下，我们只是模拟了类似的情况。 <br><br><img src="https://habrastorage.org/webt/dt/ud/7a/dtud7ajduj0eabwg71bxhgh3h4q.png"><br><br> 我们从<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">场外</a>下载用于SMIPS所需架构的Extra软件包，因为问题似乎仅在于此。 我们将必要的包装打开包装并放入用户部分。 重新启动。 <br><br><img src="https://habrastorage.org/webt/gw/bc/1o/gwbc1or1c8myttkuoc1lv9kixrg.png"><br><br><img src="https://habrastorage.org/webt/9c/le/pm/9clepmyomfuhhu4d-_26wxxbxww.png"><br><br> 瞧！ 更新成功，带有所有继承人的元软件包被删除，仅安装了必要的软件包。 <br><br><img src="https://habrastorage.org/webt/i2/ju/vc/i2juvck3gg0yvdwzxlednsa8nac.png"><br><br> 用户部分为空，仅占用8MB，即  0.5MB我们已发布。 <br><br> 自动更新现在可以使用吗？ 会的。 要检查，在另一台路由器上，我手动更新到版本6.45.2，然后自动更新到6.45.3 <br><br> 来自MikroTik的家伙希望更专心，但并非没有罪。 <br>  <sub>我在PM中询问的错误和评论</sub> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN463885/">https://habr.com/ru/post/zh-CN463885/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN463873/index.html">去世的诺贝尔奖获得者凯里·穆利斯（Carey Mullis）-DNA聚合酶链反应的发明者</a></li>
<li><a href="../zh-CN463875/index.html">英特尔冰湖。 10 nm-对大众</a></li>
<li><a href="../zh-CN463877/index.html">当我们正在寻找MS Word的替代品时，而是引入了新的文档管理流程</a></li>
<li><a href="../zh-CN463879/index.html">Yandex的Bootcamp：开发人员如何选择团队</a></li>
<li><a href="../zh-CN463881/index.html">照片被劫为人质。 通过WiFi（PTP / IP协议）首次入侵数码相机</a></li>
<li><a href="../zh-CN463889/index.html">如何为残障人士手机申请</a></li>
<li><a href="../zh-CN463891/index.html">信息安全中的人工免疫系统</a></li>
<li><a href="../zh-CN463895/index.html">进入紧凑型投影仪的货架：Epson EF-100-一系列明亮的便携式激光投影仪中的第一只燕子</a></li>
<li><a href="../zh-CN463897/index.html">MCS云平台安全审核</a></li>
<li><a href="../zh-CN463899/index.html">为什么我们一直在等自行车的发明这么久？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>