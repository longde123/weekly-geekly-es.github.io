<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⭐️ 🙋🏾 🚐 “爱丽丝，开灯。” 基于openHAB的智能家居的语音控制。 无需编程和短信 🛃 👸🏼 🤹🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="2017年11月，日历上显示了数字11。 Aliexpress的销售如火如荼，他的手抓了一些东西要买。 选择落在“ Mi-light RGBW LED灯AC86-265V远程控制智能照明”上 。 结果，购买了两个最大功率为9瓦的副本和一个MiLight WiFi iBox集线器控制器。 来自中国的交...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>“爱丽丝，开灯。” 基于openHAB的智能家居的语音控制。 无需编程和短信</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412261/"><iframe width="560" height="315" src="https://www.youtube.com/embed/bTpH3pVVMG4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  2017年11月，日历上显示了数字11。  Aliexpress的销售如火如荼，他的手抓了一些东西要买。 选择落在“ <i>Mi-light RGBW LED灯AC86-265V远程控制智能照明”上</i> 。 结果，购买了两个最大功率为9瓦的副本和一个MiLight WiFi iBox集线器控制器。 来自中国的交付很快就到了，四个月后的2018年3月13日， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Yandex.Dialogs平台开放</a> （该平台允许第三方开发人员向语音助手Alice添加技能）。 接下来，爱丽丝（Alice）将学习控制（不仅限于）您公寓中的照明，并且我们将分阶段，无需一行代码地为她提供帮助。 <br><a name="habracut"></a><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">小米智能灯设置</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">安装openHAB</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">通过openHAB进行灯光控制</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">外部访问openHAB</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">国际金融贸易展览会</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">爱丽丝</a> </li></ol><br><a name="xiaomi"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/n8/ev/wx/n8evwxli9dh4en3ahsny_kmzn-e.jpeg"></div><br><h3>  1.设置小米的智能灯。 </h3><br> 要做的第一件事是至少使用小米的应用程序来设置灯控制。 如果您已通过此阶段，请随时进行进一步的设置，以建立智能家庭服务器，甚至直接进行Alice和openHAB的集成。 但是，首先是第一件事。 灯本身不会连接到家庭路由器，为此，您需要一个iBox集线器，它最多可以控制四组光源。 您需要将其连接到网络，然后将灯连接到网络。 <br><br><ol><li> 我们通过USB将<b>iBox</b>连接到电话，为<b>iBox</b>供电。 </li><li> 首次连接时，您需要重置集线器，因此请按<b>RST</b> 。 </li><li> 接下来，在手机上从适用于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">iOS</a>或<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Android的</a> <b>Xiaomi</b>安装该应用程序。 确保电话已连接到家庭Wi-Fi网络。 </li><li> 打开<b>Mi-Light 3.0</b>应用程序，单击<b>+</b> 。 在这里，我们对“ <b>智能链接”</b>选项卡感兴趣。 </li><li> 输入电话已连接并计划连接<b>iBox</b>的家庭Wi-Fi网络的名称和密码。 </li><li> 现在，您的<b>iBox</b>应该已连接到网络，并且<b>SYS</b>和<b>LINK</b>指示灯应分别缓慢，快速闪烁。 如果不是，请再次按<b>RST</b> 。 </li><li> 如果指示灯闪烁，请在“ <b>开始配置”</b>应用程序中单击，然后<b>开始</b>建立集线器连接的过程。 </li><li> 大约十秒钟后，闪烁将停止，然后<b>SYS</b>将再次开始缓慢闪烁，并且<b>LINK</b>将保持打开状态。 应用程序显示“已<b>配置”</b> 。 集线器已连接到网络。 如果它不在“ <b>设备列表”中</b> ，则只需单击“ <b>搜索设备”</b> 。 </li></ol><br> 您已经可以控制iBox本身的颜色和亮度，但是我们需要连接灯。 为此，请将灯绑定到集线器可用于控制的四个区域之一。 <br><br><ol><li> 我们从中心<b>Mi-Light</b>的列表中打开应用程序<b>Mi-Light 3.0</b> 。 转到<b>颜色</b>部分。 </li><li> 在屏幕顶部，选择一个区域，将其设为<b>Zone1</b> 。 然后点击右上角的设备配对图标。  <b>出现</b>带有说明的<b>LINK / UNLINK屏幕</b> 。 </li><li> 现在，我们配置了要绑定到<b>Zone1的</b>那些灯，以后它们的管理将同步进行。 要分别控制每个灯的亮度和颜色，必须将它们分配到单独的区域。 因此，打开灯，在前三秒钟内，单击“ <b>链接”</b>应用程序。 如果指示灯闪烁三下，则一切正常，同步成功。 您可以控制灯泡。 </li></ol><br><div style="text-align:center;"><img height="400" src="https://habrastorage.org/webt/bj/gf/lj/bjgflj6c_5paymroxvyojr-7qpw.jpeg"></div><br> 基本上，在此阶段，您已经有一个用于控制灯光的遥控器。 此外，您可以编写自己的照明控制系统，因为与集线器通信的协议早就为人所知（它曾经在<i>limitlessled.com/dev上</i>可用）。 在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">php</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">javascript</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">python中</a>有现成的库。 但是只能从本地网络进行管理，这对于Alice显然是不够的。 让我们尝试解决这个问题。 <br><br><a name="openhab"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/t3/5x/hvt35xyvexl22gkkyvfpef3_muw.jpeg"></div><br><h3>  2.安装openHAB </h3><br> 简要地说，什么是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">openHab</a> 。 这是一个开源的智能家居管理服务器。 由社区开发，支持对大量设备的管理。 有一个移动客户端，可以管理来自亚马逊的Alexa和来自Google的助手。 基于Java的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Eclipse SmartHome</a>框架。 因此它甚至可以安装在冰箱上，主要是Java虚拟机在此冰箱上运行。 安装说明适用于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Linux</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Windows</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Mac OS</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Raspberry Pi</a> ，以及各种网络存储<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Synology</a>和<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">QNAP</a> 。 快速浏览第一个选项。 <br><br><ol><li> 添加存储库密钥： <br><br><pre><code class="bash hljs">wget -qO - <span class="hljs-string"><span class="hljs-string">'https://bintray.com/user/downloadSubjectPublicKey?username=openhab'</span></span> | sudo apt-key add - sudo apt-get install apt-transport-https</code> </pre> </li><li> 添加存储库本身： <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'deb https://dl.bintray.com/openhab/apt-repo2 stable main'</span></span> | sudo tee /etc/apt/sources.list.d/openhab2.list</code> </pre> </li><li> 我们将更新和安装服务器以及附加组件： <br><br><pre> <code class="bash hljs">sudo apt-get update sudo apt-get install openhab2 sudo apt-get install openhab2-addons sudo apt-get install openhab2-addons-legacy</code> </pre> </li><li> 我们在重启设备后设置服务的自动启动并启动它： <br><br><pre> <code class="bash hljs">sudo systemctl start openhab2.service sudo systemctl status openhab2.service sudo systemctl daemon-reload sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> openhab2.service</code> </pre> </li><li> 现在，我们等待的<b>时间大约</b>为<b>15-20分钟</b> （这并不夸张，这是一个关于Java速度的笑话，这是一个残酷的现实），同时它正在<code>http://openhab-device:8080</code> Web接口出现在地址<code>http://openhab-device:8080</code> 。 </li><li> 在此页面上，我们对<b>Paper UI</b>项目感兴趣。 将来，我们将使用这种类型的界面。 </li></ol><br><img src="https://habrastorage.org/webt/t7/7t/4n/t77t4n7ug5blggwf7yyfstz-wd0.png"><br><br><a name="binding"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/t3/5x/hvt35xyvexl22gkkyvfpef3_muw.jpeg"></div><br><h3>  3.通过openHAB进行灯光控制 </h3><br> 因此，我们有一个工作正常的智能家居服务器和小米的灯具，可以进行远程控制。 有必要将它们连接起来。  openHAB支持许多设备（包括这些灯）的活页夹（控制连接的电子设备的说明）。 <br><br><ol><li> 转到<b>附件</b> → <b>绑定</b> 。 </li><li> 安装<b>Milight绑定</b> 。 </li><li> 要添加我们的设备，请在<b>Configuration</b> → <b>Things</b>部分中单击<b>+</b> 。 </li><li> 我们选择<b>Milight Binding</b> ，开始自动搜索设备。 </li><li> 我没有自动找到任何东西，因此我手动添加了“ <b>手动添加内容</b> ”。 </li><li> 我们选择要添加的<b>iBox / iBox2</b>集线器。 </li><li> 在打开的页面上，您需要填写<b>IP</b>和<b>网桥ID</b>字段（所连接设备的MAC地址），例如，在路由器的控制面板中找到它们（我的集线器已在网络中注册，其中使用了HF-LPB100模块的名称）。 添加。 </li><li> 太好了， <b>iBox / iBox2</b>现在出现在带有“ <i>Online</i> ”字样的设备列表中。 </li><li> 再次<b>单击</b> <b>+</b>并选择<b>Milight Binding</b> ，这次直接添加灯。 </li><li> 现在，您无需手动添加任何东西，只需从列表中选择一组灯（在我的情况下，这是<b>Rgbww颜色（第1区）</b>项）。 </li><li> 所选项目应出现在带有“ <i>Online</i> ”字样的事物列表中。 <br><br><img src="https://habrastorage.org/webt/lo/1u/pf/lo1upfvlh54rsjnxqbgcuxu389i.png"></li><li> 设备已配置，现在您需要向它们添加控件。 为此，请单击新添加的项目。 </li><li> 可以远程控制的灯参数列表将打开。 单击蓝色圆圈<b>亮度</b> 。 </li><li> 接下来，选择我们要与之关联的设备参数的控件，因为 我们还没有它们，请点击<b>创建新项目</b> 。 </li><li> 设置一个任意名称，例如<b>Light_Switcher</b> ，并将类型从<b>Dimmer</b>更改为<b>Switch</b> ，因为 我不必调节灯的亮度，我只想打开和关闭它。 我们只需将类别更改为<b>光，</b>以便控件在“ <b>控件”</b>部分显示带有图标。 点击<b>链接</b> 。 </li><li> 转到“ <b>控制”</b>部分，享受设备上<b>亮度</b>开关的操作。 </li></ol><br><br><a name="myopenhab"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/hv/t3/5x/hvt35xyvexl22gkkyvfpef3_muw.jpeg"></div><br><h3>  4.外部访问openHAB </h3><br> 出于安全原因，在上述操作之后，仅可以从本地网络管理智能家居服务器。 这显然不足以完成我们的任务。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">有几个配置选项</a> ：配置VPN以从Internet访问本地网络，配置反向代理，或将服务器连接到myopenHAB.org上的myopenHAB Cloud服务。 由于在俄罗斯，Roskomnadzor的员工人数与VPN和代理服务器用户的人数成正比，因此我们将使用后者。 <br><blockquote> 不要不必要地乘法 </blockquote><br><ol><li> 我们在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">myopenHAB</a>网站上注册，登录并访问<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://myopenhab.org/account</a> 。 在此页面上，我们对两个字段感兴趣： <b>openHAB UUID</b>和<b>openHAB Secret</b> 。 它们允许您组织服务器连接。 让我们弄清楚从哪里得到它们。 </li><li> 我们转到<b>PaperUI openHAB</b>控制面板。 </li><li> 打开“ <b>配置”</b> →“ <b>附加组件”</b> →“ <b>杂项”部分</b> 。 </li><li> 安装<b>openHAB Cloud Connector</b> 。 </li><li> 在<b>配置</b> → <b>服务中</b> ，应显示带有“ <i>通知和远程访问</i> ”模式的<b>openHAB Cloud</b>模块。 </li><li> 在<b>配置</b> → <b>系统</b> → <b>附加管理中，</b>必须激活“ <i>访问远程存储库</i> ”开关。 </li><li> 安装插件后，我们要<b>查找</b>的数据将位于文件<b>/ var / lib / openhab2 / uuid</b>和<b>/ var / lib / openhab2 / openhabcloud / secret</b> （如果未从软件包中<i>安装</i> ，则为<i>userdata / uuid</i>和<i>userdata / openhabcloud / secret</i> ）。 我们在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">myopenHAB</a>的帐户设置中输入它们，然后单击<b>Update</b> 。 如果一切配置正确，则邮件地址左侧应显示“ <i>在线</i> ”字样。 这表明可以从Internet访问您的智能家居，但是<b>Alice</b>将无法立即使用它。 首先，您需要从外部访问以前配置的设备。 </li><li> 转到<b>配置</b> → <b>服务</b> → <b>openHAB云</b> → <b>配置</b> 。 </li><li> 在<i>IFTTT等公开给应用程序</i>的<i>项目</i>列表中<i>，</i>激活亮度控件的复选框，然后单击<b>保存</b> 。 </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">稍后</a> ，我们确认<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">myopenhab.org/items</a>页面上列出的所选项目的状态为“ <i>ON</i> ”。 </li></ol><br><img src="https://habrastorage.org/webt/tf/-a/3g/tf-a3gan7vajtb4qjy_urvu0nim.png"><br><br> 现在可以通过支持OAuth2授权的openHAB Cloud API从Internet进行灯控制。 但是，不幸的是，客户是预先确定的，这些客户包括Alexa，Google Assistant和IFTTT服务。 爱丽丝不在此列表中。 但这不是问题！ <br><br><a name="ifttt"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/3w/q5/0d/3wq50dhkw-rwzok-o3nghgq9ioe.jpeg"></div><br><h3>  5. IFTTT </h3><br><blockquote> 如果是的话。 </blockquote><br> 一种服务，使您可以从多个服务构建一系列操作。 如果另一个服务中的事件触发器已起作用，则有条件地以一个服务中的操作进行响应。  IFTTT支持大量服务，包括令我们感兴趣的myopenHAB。 但是不支持爱丽丝。 通常，任何人都可以在那里为他们的服务创建模块，首先，您需要联系销售部门并找出支持IFTTT的年付款额。 我们的目标是免费使用该服务，以便能够将请求从Alice重定向到openHAB。 <br><br><ol><li> 我们在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ifttt.com</a>网站上注册，然后转到<b>Applets</b> → <b>New Applet</b> 。 </li><li> 单击<b>+此之后</b> ，您需要选择事件将在其中触发的服务。 因为  <b>爱丽丝的</b>服务<b>不在</b>清单中，我们需要选择可以接收她命令的物品。 这是一个<b>Webhooks</b>服务。 单击<b>连接</b> 。 </li><li> 接下来，从列表中选择一项“ <i>接收Web请求</i> ”触发器。 </li><li> 指定事件的名称，例如<b>light_on</b> ，然后单击<b>Create</b> 。 </li><li> 现在我们需要选择响应，单击<b>+ that</b> 。 我们选择的<b>openHAB</b> ，即插即用。 </li><li> 在打开的窗口中，前面提到的OAuth2授权，点击<b>允许</b> 。 </li><li> 唯一的<i>发送命令</i>响应可用。 </li><li> 从下拉列表中，选择灯控件（例如Light_Switcher），然后将单词“ <i>ON</i> ”指定为light on命令。 我们创造。 </li></ol><br> 要进行检查，我们需要在Webhooks服务上调用触发器。 怎么做？ 发送POST请求。 <br><br><ol><li> 我们在<b>IFTTT</b> <b>网站</b>上<b>查找Webhooks</b>服务，然后转到与之相关的文档。 </li><li> 在打开的页面上，我们需要执行一个命令，将<b>{event}</b>替换为<b>light_on</b> 。 </li><li> 单击“ <b>测试”</b>后，您的灯应亮起。 </li></ol><br> 仍然需要为light_off事件创建类似的配方，该配方会将OFF命令发送到灯光控件。 然后教爱丽丝根据我们的要求调用这些触发器。 <br><br><img src="https://habrastorage.org/webt/ky/z8/yw/kyz8ywf2mn07hfnfjpzj4jy26i4.png"><br><br><a name="alice"></a><div style="text-align:center;"><img src="https://habrastorage.org/webt/ba/ta/tn/batatn8tse9dchznkvkvxqgn98s.jpeg"></div><br><h3>  6.爱丽丝 </h3><br> 按照我的意愿，如果您使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Yandex.Dialogs</a>平台，Alice将<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">打开灯</a> 。 该平台于今年3月开放，允许任何人通过编写适当的代码来向Alice添加技能。 目前， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">目录</a>中已经介绍了大量技能。 技能的发展是有关哈布雷的另一篇文章的主题，在这里，我们“ <i>没有一行代码”</i> 。 因此，我们将使用可用的开发。 <br><br><ol><li> 我们安装了<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Yandex搜索应用程序</a>的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Beta版</a> ，仅当前支持<b>用户技能</b> 。 </li><li> 我们说<b>爱丽丝</b> “ <i>打开魔法咒语”</i> 。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><b>魔术</b> / <b>魔术</b></a>的能力使我们能够执行对<b>IFTTT</b>服务器的POST请求。 </li><li> 单击<b>添加，</b>然后指定地址以打开该表单： <br><br><pre> <code class="bash hljs">https://maker.ifttt.com/trigger/light_on/with/key/{user_id}</code> </pre> </li><li> 下一步是说出某个词组或单词，爱丽丝将通过在指定地址处完成请求来响应（我的爱丽丝回答“开灯”）。 </li></ol><br> 如果现在单击相应的按钮或表达建议，则Yandex服务器的请求将转到技能服务器，从那里到IFTTT，再到myopenHAB，myopenHAB会将数据传输到您的本地实例，并直接访问灯毂，灯将打开。 我们将立即添加类似的命令以关闭照明。 <br><br><div style="text-align:center;"><img height="400" src="https://habrastorage.org/webt/xr/5e/nb/xr5enbudszmydm0msmidvavxl_g.jpeg"></div><br> 您需要了解，仅打开Alice并说“ <i>打开灯</i> ”是不够的。  Yandex对我们的智能家居团队一无所知，有关它们的数据存储在“ <i>魔术</i> ”技能数据库中。 因此，您首先需要通过说“ <i>打开魔术咒语</i> ”来调用该技能，然后才可以用声音打开和关闭灯光。 <br><br><h3> 聚苯乙烯 </h3><br> 通过IFTTT集成Alice和openHAB的方法不会限制您的想象力。 您可以使用“ <i>魔术</i> ”功能来控制智能家居语音中的任何内容。 例如，openHAB具有Samsung SmartTV的活页夹，使您可以控制电视的声音和频道。  Alice和Webhooks的交互是对所有IFTTT服务的语音接口的实现，“ <i>魔术</i> ”允许您执行其中任何一个的命令。 或者，您根本不使用Alice，而是编写您的前端，例如，一个移动应用程序将通过所有相同的Webhooks执行IFTTT请求。 是的，并且不必使用IFTTT，以此类推，您可以配置“ <i>魔术</i> ”来满足对服务器的请求。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN412261/">https://habr.com/ru/post/zh-CN412261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN412249/index.html">科学工作已经过时； 接下来等着我们</a></li>
<li><a href="../zh-CN412251/index.html">从地狱逃脱。 俘虏飞行员德维亚佳耶夫从德国火箭兵的鼻子下面劫持了一架飞机</a></li>
<li><a href="../zh-CN412253/index.html">通过Vk.com保护程序</a></li>
<li><a href="../zh-CN412255/index.html">作为新款Honor 10的照片，与华为P20和iPhone 7 Plus进行比较</a></li>
<li><a href="../zh-CN412259/index.html">在美国将经历一种新的死亡方法：吸入氮气</a></li>
<li><a href="../zh-CN412263/index.html">中国公民评等制度的运作方式：犯罪与惩罚</a></li>
<li><a href="../zh-CN412265/index.html">《战车世界》 VR是如何创建的，以及为什么它是完全不同的游戏</a></li>
<li><a href="../zh-CN412267/index.html">被遗忘的苹果游戏机</a></li>
<li><a href="../zh-CN412269/index.html">亚马逊Echo Dot vs. Google Home Mini-哪个助手更好？</a></li>
<li><a href="../zh-CN412271/index.html">“暴风雪”的胜利与悲剧</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>