<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüöí üõå üôÅ Estilo fuzzing 1989 üë©üèæ‚Äçüöí üõ∂ üîØ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Com o in√≠cio de 2019, √© bom lembrar o passado e pensar no futuro. Vamos relembrar 30 anos e refletir sobre os primeiros artigos cient√≠ficos sobre fuzz...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estilo fuzzing 1989</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435484/">  Com o in√≠cio de 2019, √© bom lembrar o passado e pensar no futuro.  Vamos relembrar 30 anos e refletir sobre os primeiros artigos cient√≠ficos sobre fuzzing: <a href="">"Um estudo emp√≠rico da confiabilidade dos utilit√°rios UNIX"</a> e o trabalho subsequente de 1995 <a href="">"Revis√£o de fuzzing",</a> do mesmo autor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Barton Miller</a> . <br><br>  Neste artigo, tentaremos encontrar bugs nas vers√µes modernas do Ubuntu Linux usando <b>as mesmas ferramentas</b> dos trabalhos de difus√£o originais.  Voc√™ deve ler os documentos originais, n√£o apenas pelo contexto, mas tamb√©m pelo entendimento.  Eles se mostraram muito prof√©ticos em rela√ß√£o a vulnerabilidades e fa√ßanhas nas pr√≥ximas d√©cadas.  Os leitores atentos poder√£o notar a data de publica√ß√£o do artigo original: 1990.  Ainda mais atento notar√° os direitos autorais nos coment√°rios da fonte: 1989. <br><a name="habracut"></a><br>
<h1>  Breve revis√£o </h1><br>  Para quem n√£o leu os documentos (embora isso realmente deva ser feito), esta se√ß√£o cont√©m um breve resumo e algumas cita√ß√µes selecionadas. <br><br>  <a href="">O programa de difus√£o</a> gera fluxos aleat√≥rios de caracteres, com a capacidade de gerar apenas caracteres imprim√≠veis ou n√£o imprim√≠veis.  Ele usa um certo valor inicial (semente), garantindo resultados reproduz√≠veis, dos quais os difusores modernos geralmente n√£o t√™m.  Um conjunto de scripts √© executado nos programas testados e verifica a presen√ßa de despejos b√°sicos.  Trava s√£o detectados manualmente.  Os adaptadores fornecem entrada aleat√≥ria para programas interativos (artigo de 1990), servi√ßos de rede (1995) e aplicativos gr√°ficos X (1995). <br><br>  Um artigo de 1990 testou quatro arquiteturas de processador (i386, CVAX, Sparc, 68020) e cinco sistemas operacionais (4,3 BSD, SunOS, AIX, Xenix, Dynix).  Em um artigo de 1995, uma escolha similar de plataformas.  No primeiro artigo, 25-33% dos utilit√°rios falham, dependendo da plataforma.  Em um artigo subsequente, esses n√∫meros variam de 9% a 33%, com GNU (no SunOS) e Linux com a menor taxa de falhas. <br><br>  Um artigo de 1990 concluiu que 1) os programadores n√£o verificam os limites da matriz ou os c√≥digos de erro, 2) as macros dificultam a leitura e o c√≥digo de depura√ß√£o e 3) C √© muito inseguro.  A fun√ß√£o <code>gets</code> extremamente insegura e o sistema de tipos C. foi especialmente mencionado. Durante o teste, os autores encontraram vulnerabilidades no Format String anos antes de sua explora√ß√£o em massa.  O artigo conclui com uma pesquisa de usu√°rios sobre a frequ√™ncia com que eles corrigem bugs ou os relatam.  Aconteceu que relatar bugs era dif√≠cil e havia pouco interesse em corrigi-los. <br><br>  Um artigo de 1995 menciona o software de c√≥digo aberto e discute por que ele tem menos erros.  Cita√ß√£o: <br><br><blockquote>  Quando investigamos as causas das falhas, um fen√¥meno perturbador apareceu: muitos dos bugs (cerca de 40%) relatados em 1990 ainda est√£o presentes em sua forma exata em 1995.  ... <br><br>  Os m√©todos usados ‚Äã‚Äãaqui s√£o simples e principalmente automatizados.  √â dif√≠cil entender por que os desenvolvedores n√£o usam essa fonte f√°cil e gratuita para aumentar a confiabilidade. </blockquote><br>  Somente em 15 a 20 anos a t√©cnica de difus√£o se tornar√° uma pr√°tica padr√£o para grandes fornecedores. <br><br>  Parece-me tamb√©m que esta declara√ß√£o de 1990 prev√™ eventos futuros: <br><br><blockquote>  Freq√ºentemente, o estilo lac√¥nico de programa√ß√£o C √© levado ao extremo, a forma prevalece sobre a fun√ß√£o correta.  A possibilidade de um estouro no buffer de entrada √© uma falha de seguran√ßa em potencial, como mostrou o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">recente worm da Internet</a> . </blockquote><br><h1>  Metodologia de teste </h1><br>  Felizmente, 30 anos depois, o Dr. Barton ainda fornece o <a href="">c√≥digo-fonte completo, scripts e dados para reproduzir suas descobertas</a> : um exemplo louv√°vel que outros pesquisadores devem seguir.  Os scripts funcionam sem problemas, e a ferramenta de difus√£o requer apenas pequenas altera√ß√µes para compilar e executar. <br><br>  Para esses testes, usamos <a href="">scripts e entradas do reposit√≥rio fuzz-1995-basic</a> , porque h√° a lista mais recente de <a href="">aplicativos testados</a> .  De acordo com o <a href="">README</a> , aqui est√£o as mesmas entradas aleat√≥rias do estudo original.  Os resultados abaixo para o Linux moderno s√£o obtidos <b>exatamente no mesmo c√≥digo de difus√£o e dados de entrada</b> que nos artigos originais.  Somente a lista de utilit√°rios para teste foi alterada. <br><br><h1>  Altera√ß√µes de utilidade ao longo de 30 anos </h1><br>  Obviamente, houve algumas mudan√ßas nos pacotes de software Linux nos √∫ltimos 30 anos, embora algumas utilidades comprovadas continuem com seu pedigree por d√©cadas.  Sempre que poss√≠vel, utilizamos vers√µes modernas dos mesmos programas em um artigo de 1995.  Alguns programas n√£o est√£o mais dispon√≠veis, n√≥s os substitu√≠mos.  Justifica√ß√£o para todas as substitui√ß√µes: <br><br><ul><li>  <code>cfe</code> ‚á® <code>cc1</code> : Equivalente ao pr√©-processador C do artigo de 1995. </li><li>  <code>dbx</code> ‚á® <code>gdb</code> : Equivalente ao depurador de 1995. </li><li>  <code>ditroff</code> ‚á® <code>groff</code> : o <code>ditroff</code> n√£o <code>ditroff</code> mais dispon√≠vel. </li><li>  <code>dtbl</code> ‚á® <code>gtbl</code> : Equivalente ao GNU Troff do antigo utilit√°rio <code>dtbl</code> . </li><li>  <code>lisp</code> ‚á® <code>clisp</code> : A implementa√ß√£o padr√£o do lisp. </li><li>  <code>more</code> <code>less</code> : menos √© mais! </li><li>  <code>prolog</code> <code>swipl</code> : Existem duas op√ß√µes para o pr√≥logo: SWI Prolog e GNU Prolog.  O SWI Prolog √© prefer√≠vel porque √© uma implementa√ß√£o mais antiga e completa. </li><li>  <code>awk</code> ‚á® <code>gawk</code> : vers√£o GNU do <code>awk</code> . </li><li>  <code>cc</code> ‚á® <code>gcc</code> : O compilador C padr√£o. </li><li>  <code>compress</code> ‚á® <code>gzip</code> : GZip √© o descendente conceitual do antigo utilit√°rio <code>compress</code> Unix. </li><li>  <code>lint</code> : <code>lint</code> reescrito sob a GPL. </li><li>  <code>/bin/mail</code> ‚á® <code>/usr/bin/mail</code> : Utilit√°rio equivalente de uma maneira diferente. </li><li>  <code>f77</code> ‚á® <code>fort77</code> : Existem duas varia√ß√µes do compilador Fortan77: GNU Fortran e Fort77.  O primeiro √© recomendado para o Fortran 90 e o segundo para o suporte do Fortran77.  O programa <code>f2c</code> apoiado ativamente; sua lista de altera√ß√µes √© mantida desde 1989. </li></ul><br><h1>  Resultados </h1><br>  A t√©cnica de difus√£o de 1989 ainda encontra erros em 2018.  Mas h√° algum progresso. <br><br>  Para medir o progresso, voc√™ precisa de alguma base.  Felizmente, essa estrutura existe para utilit√°rios Linux.  Embora o Linux n√£o existisse na √©poca do artigo original em 1990, um segundo teste em 1995 lan√ßou o mesmo c√≥digo difuso nos utilit√°rios da distribui√ß√£o Slackware 2.1.0 de 1995.  Os resultados correspondentes s√£o apresentados na <a href="">tabela 3 do artigo de 1995 (p. 7-9)</a> .  Comparado aos concorrentes comerciais, o GNU / Linux parece muito bom: <br><br><blockquote>  A porcentagem de falhas no utilit√°rio na vers√£o Linux gratuita do UNIX foi a segunda mais alta: 9%. </blockquote><br>  Ent√£o, vamos comparar os utilit√°rios Linux de 1995 e 2018 com as ferramentas de difus√£o de 1989: <br><br><table><tbody><tr><th></th><th>  Ubuntu 18.10 (2018) </th><th>  Ubuntu 18.04 (2018) </th><th>  Ubuntu 16.04 (2016) </th><th>  Ubuntu 14.04 (2014) </th><th>  Slackware 2.1.0 (1995) </th></tr><tr><td>  Crashes </td><td>  1 (f77) </td><td>  1 (f77) </td><td>  2 (f77, ul) </td><td>  2 (swipl, f77) </td><td>  4 (ul, flex, travess√£o, gdb) </td></tr><tr><td>  Congela </td><td>  1 (feiti√ßo) </td><td>  1 (feiti√ßo) </td><td>  1 (feiti√ßo) </td><td>  2 (feiti√ßo, unidades) </td><td>  1 (ctags) </td></tr><tr><td>  Total testado </td><td>  81 </td><td>  81 </td><td>  81 </td><td>  81 </td><td>  55 </td></tr><tr><td>  Falhas / congelamentos,% </td><td>  2% </td><td>  2% </td><td>  4% </td><td>  5% </td><td>  9% </td></tr></tbody></table><br>  Surpreendentemente, o n√∫mero de travamentos e congelamentos do Linux ainda √© maior que zero, mesmo na vers√£o mais recente do Ubuntu.  Portanto, o <code>f77</code> chama o programa <code>f2c</code> com um erro de segmenta√ß√£o e o programa <code>spell</code> fica <code>f2c</code> em duas vers√µes da entrada de teste. <br><br><h1>  Quais erros? </h1><br>  Consegui descobrir manualmente a causa raiz de alguns erros.  Alguns resultados, como um erro na glibc, foram inesperados, enquanto outros, como sprintf com um tamanho de buffer fixo, eram previs√≠veis. <br><br><h3>  Ul falha </h3><br>  O erro no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ul</a> √© realmente um erro no glibc.  Em particular, foi relatado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> (outra pessoa encontrou em <code>ul</code> ) em 2016.  De acordo com o rastreador de erros, o erro ainda n√£o foi corrigido.  Como o bug n√£o pode ser reproduzido no Ubuntu 18.04 e posterior, ele √© corrigido no n√≠vel de distribui√ß√£o.  A julgar pelos coment√°rios no rastreador de erros, o principal problema pode ser muito s√©rio. <br><br><h3>  Crash f77 </h3><br>  O programa <code>f77</code> vem no pacote fort77, que √© um script de shell em torno de <code>f2c</code> , o tradutor de origem do Fortran77 para C. A depura√ß√£o do <code>f2c</code> mostra que ocorre uma falha quando a fun√ß√£o <code>errstr</code> imprime uma mensagem de erro muito longa.  O <a href="">c√≥digo-fonte f2c</a> mostra que a fun√ß√£o sprintf √© usada para gravar uma cadeia de comprimento vari√°vel em um buffer de tamanho fixo: <br><br><pre> <code class="plaintext hljs">errstr(const char *s, const char *t) #endif { char buff[100]; sprintf(buff, s, t); err(buff); }</code> </pre> <br>  Parece que esse c√≥digo foi preservado desde a cria√ß√£o do <code>f2c</code> .  O programa tem um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">hist√≥rico de mudan√ßas</a> desde pelo menos 1989.  Em 1995, quando re-difundindo, o compilador Fortran77 n√£o foi testado, caso contr√°rio, o problema teria sido encontrado anteriormente. <br><br><h3>  Congelar feiti√ßo </h3><br>  Um √≥timo exemplo de impasse cl√°ssico.  <code>spell</code> delega a <code>ispell</code> <code>spell</code> atrav√©s de um cano.  <code>spell</code> l√™ o texto linha por linha e produz um registro de bloqueio do tamanho da linha em <code>ispell</code> .  No entanto, o <code>ispell</code> l√™ no m√°ximo <code>BUFSIZ/2</code> bytes por vez (4096 bytes no meu sistema) e emite um registro de bloqueio para garantir que o cliente tenha recebido dados de valida√ß√£o que foram processados ‚Äã‚Äãat√© o momento.  Duas entradas de teste diferentes for√ßaram a <code>spell</code> a escrever uma sequ√™ncia de mais de 4096 caracteres para <code>ispell</code> , o que resultou em um impasse: a <code>spell</code> aguarda que a <code>ispell</code> leia a sequ√™ncia inteira, enquanto a <code>ispell</code> aguarda a <code>spell</code> confirmar que leu as corre√ß√µes ortogr√°ficas originais. <br><br><h3>  Pendurar unidades </h3><br>  √Ä primeira vista, parece que h√° uma condi√ß√£o de loop infinito.  O travar parece estar em <code>libreadline</code> e n√£o em <code>units</code> , embora as vers√µes mais recentes das <code>units</code> n√£o sofram esse erro.  O log de altera√ß√µes indica que foi adicionada a filtragem de entrada que pode corrigir acidentalmente esse problema.  No entanto, uma investiga√ß√£o completa dos motivos est√° al√©m do escopo deste blog.  Talvez a maneira de travar a <code>libreadline</code> ainda <code>libreadline</code> l√°. <br><br><h3>  Swipl crash </h3><br>  Por uma quest√£o de completude, quero mencionar a falha <code>swipl</code> , embora n√£o a tenha estudado com cuidado, pois o bug foi corrigido h√° muito tempo e parece ter uma qualidade bastante alta.  Falha √©, na verdade, uma declara√ß√£o (isto √©, que nunca deve acontecer) que √© chamada ao converter caracteres: <br><br> <code>[Thread 1] pl-fli.c:2495: codeToAtom: Assertion failed: chrcode &gt;= 0 <br> C-stack trace labeled "crash": <br> [0] __assert_fail+0x41 <br> [1] PL_put_term+0x18e <br> [2] PL_unify_text+0x1c4 <br> ‚Ä¶</code> <br> <br>  O travamento √© sempre ruim, mas pelo menos aqui o programa pode relatar um erro, travando cedo e em voz alta. <br><br><h1>  Conclus√£o </h1><br>  Nos √∫ltimos 30 anos, a difus√£o permaneceu uma maneira simples e confi√°vel de encontrar bugs.  Embora <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">a pesquisa ativa esteja</a> em andamento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nessa √°rea</a> , mesmo o fuzzer de 30 anos atr√°s encontra erros nos utilit√°rios modernos do Linux. <br><br>  O autor dos artigos originais previu os problemas de seguran√ßa que C causaria nas pr√≥ximas d√©cadas.  Ele argumenta de forma convincente que c√≥digo inseguro √© muito f√°cil de escrever em C e deve ser evitado, se poss√≠vel.  Em particular, os artigos demonstram que os erros aparecem mesmo com as fases mais simples e esses testes devem ser inclu√≠dos na pr√°tica padr√£o de desenvolvimento de software.  Infelizmente, esse conselho n√£o √© seguido h√° d√©cadas. <br><br>  Espero que voc√™ tenha gostado desta retrospectiva de 30 anos.  Aguarde o pr√≥ximo artigo ‚ÄúFuzzing in 2000‚Äù, onde examinaremos o qu√£o robustos os aplicativos Windows 10 s√£o comparados <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aos seus equivalentes Windows NT / 2000 quando testados com fuzzer</a> .  Eu acho que a resposta √© previs√≠vel. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt435484/">https://habr.com/ru/post/pt435484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt435468/index.html">Tutorial Reagir Parte 7: Estilos embutidos</a></li>
<li><a href="../pt435470/index.html">Tutorial React, Parte 8: Continuando o trabalho em um aplicativo TODO, apresentando propriedades de componentes</a></li>
<li><a href="../pt435476/index.html">Mkcert: certificados HTTPS v√°lidos para localhost</a></li>
<li><a href="../pt435480/index.html">Microsoft e Kroger v√£o dar √† Amazon uma briga no campo ... com√©rcio de alimentos</a></li>
<li><a href="../pt435482/index.html">Destaque em zirc√£o: vDSO (objeto din√¢mico compartilhado virtual)</a></li>
<li><a href="../pt435488/index.html">Zombarias, stubs e espi√µes no Spock Framework</a></li>
<li><a href="../pt435490/index.html">Altera√ß√µes fiscais do Google em 2019</a></li>
<li><a href="../pt435494/index.html">Servidor de cliente sem costura</a></li>
<li><a href="../pt435496/index.html">Tesla processada por um acidente em que o motorista e o passageiro do modelo S morreram</a></li>
<li><a href="../pt435498/index.html">vCloud Director Extender: Migra√ß√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>