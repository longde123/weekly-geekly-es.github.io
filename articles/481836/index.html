<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê£ üïê üë®üèø‚Äçüöí Pizza como servicio: como Amazon migr√≥ a Redshift ü§ôüèΩ üçã ü§µüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola, me llamo Victoria y soy responsable de la comercializaci√≥n en CROC Cloud Services. Ahora habitualmente alojamos mitaps en la nube. Recientemente...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pizza como servicio: como Amazon migr√≥ a Redshift</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croccloudteam/blog/481836/"><img src="https://habrastorage.org/webt/tw/0x/54/tw0x54qsqbcfuvhg9kcizl-1ey4.png"><br><br>  Hola, me llamo Victoria y soy responsable de la comercializaci√≥n en CROC Cloud Services.  Ahora habitualmente alojamos mitaps en la nube.  Recientemente obtuve el mejor desempe√±o de Dmitry Anoshin, quien ahora trabaja en Amazon, y quiero compartirlo. <br><br>  Ten√≠a la fuerte sensaci√≥n de que las grandes empresas comerciales decidieron recopilar en general todos los datos posibles en el mundo que pudieran alcanzar.  Por un lado, esto se traduce en an√°lisis avanzados, mayores ventas y atractivo de productos.  Por otro lado, los datos se han vuelto tan audaces y completos que las bromas sobre camiones con CD-ROM han sido comunes durante mucho tiempo. <br><br>  Veamos por qu√© podr√≠a ser necesario migrar a la nube y qu√© obtuvo Amazon al mover la infraestructura interna a Redshift y NoSQL DynamoDB.  Analicemos la diferencia entre los conceptos de SMP y MPP, ETL y ELT e intentemos entender por qu√© se necesitan nubes para grandes datos. <br><br>  Bueno, si est√° al tanto de lo que ha estado sucediendo en la industria en los √∫ltimos a√±os, busque inmediatamente un caso espec√≠fico.  Ven debajo del corte, prepar√© un resumen de los puntos principales de la actuaci√≥n. <a name="habracut"></a><br><br><h3>  Telemetr√≠a desde cada bombilla </h3><br><img src="https://habrastorage.org/webt/ed/0z/mg/ed0zmggfmkqdyztlsti6ejouwms.png"><br><br>  Las grandes empresas tienen una tendencia muy notable hacia la formaci√≥n de ecosistemas integrados alrededor de sus usuarios.  Es decir, te despertaste, fuiste a lavarte los dientes y al mismo tiempo miraste las noticias en un espejo multimedia.  La columna de Alexa incluye m√∫sica alegre por la ma√±ana y recuerda las reuniones de hoy.  Aqu√≠ puede pedir caf√© reci√©n hecho a domicilio, ya que el anterior ya se est√° agotando.  Entras en el autom√≥vil, y luego otra vez Alexa, que est√° integrada con el sistema multimedia del autom√≥vil y contin√∫a acompa√±ando en el camino.  Adem√°s de una pulsera inteligente, auriculares, aplicaciones en el tel√©fono y miles de otras fuentes de informaci√≥n. <br><br>  Este es al mismo tiempo un futuro ligeramente aterrador que viene r√°pidamente de todas las direcciones, un intento de crear valor adicional para el consumidor final de las empresas.  Debe aceptar que es genial cuando, por ejemplo, de acuerdo con el programa Amazon Key In-Car, sus compras se enviar√°n directamente a la cajuela del autom√≥vil en el estacionamiento.  Ahora vivo en Canad√°, y esas integraciones hacen la vida mucho m√°s c√≥moda.  Para la empresa, estos tambi√©n son datos muy valiosos en t√©rminos de orientaci√≥n de ventas, previsi√≥n de demanda, optimizaci√≥n de log√≠stica y m√°s.  Ganar-ganar <br><br>  Un problema  Como ya dije, existe la fuerte sensaci√≥n de que las empresas a menudo recopilan datos en una escala excesiva con la esperanza de monetizarlos en el futuro.  Y estos son terabytes.  En realidad, terabytes de informaci√≥n mal estructurada que fluye continuamente a los servidores de la compa√±√≠a, devorando los recursos de red, inform√°tica y almacenamiento.  Por eso es tan importante el problema de la utilizaci√≥n √≥ptima de los recursos y garantizar la velocidad de la inform√°tica.  Y tambi√©n debe proporcionar a los analistas de negocios una interfaz normal que no requiera que tengan conocimientos expertos en la construcci√≥n de infraestructura en la nube.  Por lo tanto, muchas grandes empresas se han movido hacia las nubes. <br><br><h3>  No hay nube </h3><br><img src="https://habrastorage.org/webt/gt/sz/fo/gtszfohyn6xitfdhd1lqswhiq2i.png"><br><br>  La tecnolog√≠a en la nube es la palabra de moda que pr√°cticamente atrap√≥ a todos.  No, sin duda, se ve s√≥lido en los estados financieros de la compa√±√≠a y en las presentaciones oficiales.  Sin embargo, a nivel de hierro, todos estos son los mismos servidores viejos y buenos ubicados en centros de datos de todo el mundo.  Sin embargo, la computaci√≥n en la nube necesita m√°s que solo una conveniente consola de virtualizaci√≥n.  La caracter√≠stica principal de las nubes es la gesti√≥n totalmente din√°mica de los recursos y su escala autom√°tica cuando es necesario: <br><br><ul><li>  El calculo. </li><li>  Almacenamiento. </li><li>  Recursos de red y transporte. </li><li>  La base de datos </li></ul><br>  Cuando tenga una infraestructura de este tipo, utilizar√° sus recursos de manera mucho m√°s completa, lo que con casos comerciales a gran escala puede generar ahorros significativos. <br><br>  Para las peque√±as empresas, este enfoque tambi√©n puede ser muy atractivo.  Imagine que planea comprar hierro nuevo para su infraestructura el pr√≥ximo a√±o.  Al mismo tiempo, es muy dif√≠cil para usted predecir la carga exacta, que puede variar de muchos factores.  Por ejemplo, su producto se vuelve muy popular repentinamente debido a una publicaci√≥n exitosa en Habr√©, una multitud de clientes se apresuran hacia usted y lo decepcionan enormemente porque no plane√≥ tales cargas m√°ximas.  Y puede haber una situaci√≥n inversa cuando se sobreestima la demanda, se compra un exceso de capacidad y finalmente se obtiene un equipo inactivo, lo que en realidad elimina el dinero que tanto se necesita de la facturaci√≥n de la compa√±√≠a.  Una apuesta √∫nicamente en la compra de capacidades de hierro es casi siempre un proceso extremadamente inerte, y ciertamente pierde adaptabilidad en un mercado que cambia r√°pidamente. <br><br>  La migraci√≥n particular o completa a la nube es adecuada para tales situaciones, que sirve como un tipo de condensador que suaviza los picos de consumo m√°ximo.  O incluso le proporciona completamente la infraestructura. <br><br><h3>  Tipos de nubes </h3><br><img src="https://habrastorage.org/webt/fi/ud/aa/fiudaauofik83yn_crcsrrlyuhy.png"><br><br>  De hecho, dependiendo de su modelo de negocio, las empresas suelen idear una de las tres formas de construir sistemas en la nube.  Una peque√±a empresa generalmente usa nubes p√∫blicas y ahorra en los especialistas apropiados, centr√°ndose en su producto.  Los particularmente grandes en s√≠ mismos son similares a muchas compa√±√≠as separadas conectadas por un objetivo y marca comunes.  Por lo tanto, a menudo construyen nubes privadas, logrando una utilizaci√≥n √≥ptima de los recursos.  Part utiliza modelos h√≠bridos, que le permiten procesar datos particularmente sensibles, protegidos legalmente localmente y transferir tareas menores a nubes externas.  Pizza como servicio: <br><br><img src="https://habrastorage.org/webt/yg/qy/kh/ygqykhvfyxnwvvngifel3imhxms.png"><br><br>  Siempre me gust√≥ esta ilustraci√≥n, que muestra bien el grado de delegaci√≥n de las tareas de infraestructura de su empresa al proveedor. <br><br>  La opci√≥n tradicional en el local es ir a comprar comida, precalentar el horno y cocinar pizza usted mismo.  Perfecto!  Pero necesitas tener todo el equipo, ingredientes y m√°s. <br><br>  IaaS es una opci√≥n de alquiler de infraestructura.  Alquil√≥ una cocina con todo el equipamiento, trajo sus productos y cocin√≥ una gran pizza.  Las personas especialmente capacitadas lavar√°n el horno de la grasa, y no necesita preocuparse por la nitidez de los cuchillos y otras bagatelas. <br><br>  PaaS es una plataforma como servicio.  El servicio le proporciona algunas ventajas adicionales adem√°s de la infraestructura b√°sica.  Por ejemplo, Amazon Redshift, como un almac√©n de datos, que le permite ahorrar en DBA y centrarse en el producto.  En nuestro ejemplo de pizza, puede ser, por ejemplo, una masa con forma preparada que solo se puede descongelar, untar con salsa arom√°tica, espolvorear con champi√±ones, rebanadas de tocino tierno y parmesano rallado. <br><br>  La √∫ltima opci√≥n es SaaS.  En este caso, obtiene el producto m√°s terminado sobre la base del cual construye su negocio.  Por ejemplo, ejecute un blog basado en la plataforma p√∫blica de otra persona.  En nuestro ejemplo, esta ser√° la opci√≥n m√°s cara pero simple para pedir pizza preparada en casa. <br><br><h3>  Datos de camiones.  Nieve m√≥vil </h3><br>  Hay una vieja an√©cdota barbuda de la √©poca de los a√±os "cero": "Un equipo de camioneros pudo entregar 100,000 CD de Odessa a Kiev durante la noche.  Por lo tanto, alcanzaron una velocidad de transferencia de datos de 2,43 terabytes por segundo en una distancia de m√°s de 500 km sin el uso de cables caros ". <br><br><img src="https://habrastorage.org/webt/sk/x0/ma/skx0maq-oa7sluhcjpnkklbg1qa.png"><br><br>  En ese momento era solo una broma.  Sin embargo, con los vol√∫menes modernos de un flujo continuo de fotos desde cada tel√©fono m√≥vil, audio, video y otra telemetr√≠a, se vuelve completamente inamovible y se convierte en un problema real.  Cuando no tiene un enlace √≥ptico grueso alquilado directamente al centro de datos, mover grandes cantidades de datos a la nube puede ser un gran problema.  Servicios como el Snowball de Amazon vienen al rescate. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/thq3NNc28fI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Le brindan un estuche protegido tan brutal lleno de 50 terabytes de discos de alta velocidad e interfaces de red de 10 gigabits.  Luego, lo conecta directamente a su tienda y combina todos los datos a la m√°xima velocidad.  En caso de robo u otros problemas, los datos salen de la sala de servidores solo en forma cifrada.  Hay un m√≥dulo TPM en el caso, y las claves de cifrado se administran mediante el Servicio de administraci√≥n de claves (KMS) de AWS.  Las claves de cifrado no se almacenan en el propio dispositivo. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/8vQmTZTq7nw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  En casos especialmente avanzados, puede llamar a Snowball Truck, un centro de datos m√≥vil con una capacidad de 100 petabytes.  Cuando la escala de datos se aproxima a los exabytes, una conexi√≥n t√≠pica de 10 gigabits requerir√° 26 a√±os para la transferencia de datos.  Y estos camiones blancos podr√°n arrastrar y soltar datos durante seis meses. <br><br><h3>  Amazon migrando de Oracle a Redshift </h3><br><img src="https://habrastorage.org/webt/kg/lt/er/kglterzd9piau7cbure_2bnszsc.png"><br>  <i>Lo que tuvimos</i> <br><br>  Te contar√© un poco sobre el caso con el que trabaj√© en Amazon.  Las principales plataformas comerciales como Amazon tienen un trabajo muy doloroso: Prime Days.  Estas son las ventas pico del Viernes Negro y las ventas de Navidad.  En este punto, los servidores se est√°n derritiendo bajo carga, los almacenes est√°n llenos de cargadores y la log√≠stica se est√° ahogando bajo un flujo continuo de mercanc√≠as.  Este es un momento muy importante desde el punto de vista de las ventas, y cada hora de inactividad o inaccesibilidad del servicio cuesta una gran cantidad de p√©rdidas. <br><br>  El problema vino de Oracle DB.  La base de datos simplemente dej√≥ de exportar ese volumen de consultas simult√°neas, experimentando problemas con el escalado.  El sitio casi se desarroll√≥ bajo la avalancha de clientes, y la base de datos se convirti√≥ en un problema en t√©rminos de escala. <br><br>  Despu√©s de un an√°lisis cuidadoso, llegaron a la conclusi√≥n de que las bases de datos SQL tradicionales no son adecuadas como backend para una plataforma comercial de esta magnitud.  Adem√°s, Oracle tambi√©n es extremadamente costoso en t√©rminos de licencias y soporte.  Como resultado, se decidi√≥ migrar a su plataforma en la nube, que estaba basada en Redshift y NoSQL DynamoDB. <br><br>  DynamoDB fue un desarrollo interno con replicaci√≥n sincr√≥nica entre centros de datos y un mecanismo extremadamente efectivo para reducir la redundancia de datos, lo que permiti√≥ ahorrar significativamente en su almacenamiento.  Una caracter√≠stica muy importante fue Auto Scaling: escala din√°mica de base de datos para la cantidad de datos requerida.  Tambi√©n se ha resuelto una gran integraci√≥n con Hadoop. <br><br>  ¬øCu√°l es el principal problema de una base de datos tradicional? <br><br><img src="https://habrastorage.org/webt/ea/vi/xv/eavixvpu7fbgvnxdxf-hjothyki.png"><br><br>  El problema es que la versi√≥n anterior con Oracle se refiere a la arquitectura SMP, que solo implica escala vertical.  Es decir, tiene una m√°quina potente con cierta memoria, un mont√≥n de almacenamiento r√°pido y todas las solicitudes fluyen de una forma u otra.  Este es un modelo cl√°sico de Oracle que se centra en ofrecer sus potentes servidores independientes.  Al mismo tiempo, la compa√±√≠a no cre√≠a particularmente en las nubes, y la computaci√≥n paralela no se consideraba una soluci√≥n prometedora.  Y necesit√°bamos MPP, una arquitectura paralela que le permite difuminar una solicitud de muchas m√°quinas separadas y procesar datos m√°s r√°pido. <br><br>  Hay otro punto importante: el enfoque ETL vs ELT para ingresar datos en la base de datos. <br><br>  ETL - Extracto -&gt; Transformar -&gt; Cargar.  Es decir, primero recibimos datos de nuestras fuentes, los estructuramos cuidadosamente y solo luego los llenamos en nuestro almac√©n.  El enfoque ELT implica llenar datos ruidosos sin procesar en el almacenamiento y el procesamiento ya est√° de su lado.  En principio, RedShift admite ambos enfoques, pero ETL tiene una ventaja: el acceso a los datos filtrados es m√°s r√°pido y f√°cil de manipular.  Aunque al mismo tiempo se gastan m√°s recursos en el an√°lisis inicial de la informaci√≥n en bruto.  Hay un momento m√°s obvio.  ETL reduce los riesgos en t√©rminos de GDPR en la legislaci√≥n europea al filtrar informaci√≥n confidencial por adelantado antes de que llegue al repositorio general.  Esto reduce el riesgo de acceso no autorizado a los datos.  La herramienta principal para el procesamiento de datos primarios en la nueva arquitectura fue Matillion.  Ya hay una buena GUI all√≠, es altamente configurable y ya viene en una opci√≥n adaptada a Amazon RedShift.  Gracias a √©l, result√≥ bajar el umbral de entrada.  Ahora los gerentes de producto pueden configurar flujos de datos entrantes en forma de un dise√±ador visual sin la ayuda de nuestros ingenieros de datos. <br><br><img src="https://habrastorage.org/webt/m_/og/xq/m_ogxqotr6mdk3flxnd0yfwn7k8.png"><br><br>  Como resultado, obtuvimos la flexibilidad, escala y suavizaci√≥n de las cargas m√°ximas que necesit√°bamos.  Por ejemplo, pudieron resolver el problema de acumular 50 GB de registros de servidores web por d√≠a para predecir el comportamiento de los visitantes. <br><br><img src="https://habrastorage.org/webt/hk/hi/ki/hkhiki3rlxm9f9khuc6f59rfg9k.png"><br><br>  Tambi√©n presentamos Tableau, que nos permiti√≥ cambiar de tablas mal conectadas en Excel a paneles √∫nicos, conveniente para la administraci√≥n. <br><br>  Y lo explicar√© por si acaso: hay un Oracle OLTP (back-end) en la tienda, hay Oracle DW, un almac√©n de datos anal√≠ticos.  El proyecto estaba dirigido a ambas cosas, ¬°pero estoy hablando espec√≠ficamente de Oracle DW!  Es decir, el diagrama y la descripci√≥n que se dan son locales, solo conciernen al equipo de Amazon.  Lo mismo vale para Tableau.  Cuando digo "hemos implementado el marcador", me refiero al proyecto local, ya que en Amazon todo est√° dividido en equipos, y todos eligen qu√© hacer y qu√© implementar y usar. <br><br>  Las nubes, a pesar de la exageraci√≥n poco saludable que las rodea, ya son la realidad actual.  Lo m√°s probable es que la mayor√≠a de los proyectos empresariales se construyan de alguna manera alrededor de dicha infraestructura.  S√≠, tal vez no todas las empresas tengan tales soluciones.  Pero vale la pena planificar un mayor desarrollo ahora, de lo contrario ser√° dif√≠cil responder r√°pidamente a los par√°metros del mercado que cambian r√°pidamente y a la feroz competencia. <br><br>  Si alguien est√° interesado en el tema de an√°lisis de nube y soluciones modernas, <a href="https://t.me/rockyourdata">vaya aqu√≠</a> .  Dejo caer contenido √∫til all√≠. <br><br><h3>  Ven a nuestra reuni√≥n </h3><br><img src="https://habrastorage.org/webt/j1/oq/gg/j1oqgguccxszeac3r3mqhacfmgi.jpeg"><br><br>  CROC Cloud Services ya ha aprobado una serie de discursos de excelentes oradores, por ejemplo, el tema de un mitap fue el uso pr√°ctico de los servicios de AWS en la vida.  El a√±o que viene hemos planeado varios eventos m√°s, hablaremos de ellos en detalle.  Sigue los eventos. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/481836/">https://habr.com/ru/post/481836/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../481818/index.html">Migrar un servidor en ejecuci√≥n a RAID</a></li>
<li><a href="../481820/index.html">PocketBook: resultados del a√±o, o Novedades e Importantes sucedieron en 2019</a></li>
<li><a href="../481822/index.html">Una historia breve y 146% precisa de lenguajes de programaci√≥n</a></li>
<li><a href="../481824/index.html">B√∫squeda r√°pida de la fuente de mutaciones no deseadas de una propiedad de objeto</a></li>
<li><a href="../481828/index.html">La historia del software educativo: sistemas de gesti√≥n del aprendizaje y el auge de la educaci√≥n en l√≠nea.</a></li>
<li><a href="../481838/index.html">WireGuard, configurando m√∫ltiples clientes para NAT, y ¬øa d√≥nde va STUN?</a></li>
<li><a href="../481840/index.html">Proteja su API GraphQL de vulnerabilidades</a></li>
<li><a href="../481842/index.html">Mudarse al almacenamiento puro: nuestro nuevo almacenamiento</a></li>
<li><a href="../481844/index.html">7 a√±os de exageraci√≥n de redes neuronales en gr√°ficos y perspectivas inspiradoras de Deep Learning 2020</a></li>
<li><a href="../481846/index.html">Uso de GitHub CI para proyectos de elixir</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>