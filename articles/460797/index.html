<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üÜñ üõ´ üôçüèΩ Desarrollo responsable de JavaScript, parte 2 üõÄüèø üèä üí£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En abril de este a√±o, publicamos una traducci√≥n del primer material de una serie dedicada a un enfoque responsable para el desarrollo de JavaScript. A...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desarrollo responsable de JavaScript, parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/460797/">  En abril de este a√±o, publicamos una traducci√≥n del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primer material</a> de una serie dedicada a un enfoque responsable para el desarrollo de JavaScript.  All√≠, el autor reflexion√≥ sobre las tecnolog√≠as web modernas y su uso racional.  Ahora le ofrecemos una traducci√≥n del segundo art√≠culo de esta serie.  Est√° dedicado a algunos detalles t√©cnicos sobre el dise√±o de proyectos web. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/fu/0j/zo/fu0jzokbsmkz97fxen8dedmtg9e.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Tener una idea</font> </h2><br>  Usted y su equipo promovieron con entusiasmo la idea de una revisi√≥n completa del antiguo sitio web de la compa√±√≠a.  Sus solicitudes llegaron al liderazgo, incluso llegaron a la vista de aquellos en la cima.  Te dieron luz verde.  Su equipo se puso a trabajar con entusiasmo, atrayendo dise√±adores, redactores y otros especialistas.  Pronto lanzaste un nuevo c√≥digo. <br><br>  El trabajo comenz√≥ inocentemente.  El <code>npm install</code> est√° aqu√≠, el <code>npm install</code> est√° all√≠.  Tan pronto como mir√≥ a su alrededor, las dependencias de producci√≥n ya se estaban estableciendo como si el desarrollo del proyecto fuera una bebida salvaje, y usted fuera el que no se preocupaba en absoluto por lo que ser√≠a ma√±ana por la ma√±ana. <br><br>  Entonces empezaste. <br><br>  Pero, a diferencia de las consecuencias de la fiesta de bebidas m√°s loca, lo terrible no comenz√≥ a la ma√±ana siguiente.  Lamentablemente, no a la ma√±ana siguiente.  El c√°lculo lleg√≥ en meses.  Tom√≥ la forma desagradable de n√°useas leves y dolor de cabeza para los due√±os de empresas y gerentes intermedios que se preguntaban por qu√©, despu√©s del lanzamiento del nuevo sitio, las conversiones y los ingresos cayeron.  Entonces el desastre gan√≥ impulso.  Esto sucedi√≥ cuando el director t√©cnico regres√≥ del fin de semana, que pas√≥ en alg√∫n lugar fuera de la ciudad.  Se pregunt√≥ por qu√© el sitio web de la compa√±√≠a se cargaba tan lentamente (si es que lo hizo) en su tel√©fono. <br><br>  Sol√≠a ‚Äã‚Äãser bueno para todos.  Ahora han llegado otros tiempos oscuros.  Conoce tu primera resaca despu√©s de consumir una gran dosis de JavaScript. <br><br><h2>  <font color="#3AC1EF">Esto no es tu culpa.</font> </h2><br>  Mientras intentabas hacer frente a una resaca infernal, palabras como "te lo dije" sonar√≠an como una merecida reprimenda para ti.  Y si pudieras pelear en ese momento, podr√≠an servir como una ocasi√≥n para pelear. <br><br>  Cuando se trata de las consecuencias del uso imprudente de JavaScript, puede culpar a todo y a todos.  Pero buscar al culpable es una p√©rdida de tiempo.  El dispositivo web moderno requiere que las compa√±√≠as resuelvan los problemas m√°s r√°pido que sus competidores.  Tal presi√≥n significa que nosotros, esforz√°ndonos por aumentar nuestra productividad tanto como sea posible, es probable que agarremos cualquier cosa.  Esto significa que nosotros, con un alto grado de probabilidad (aunque esto no se puede llamar inevitable), crearemos aplicaciones en las que habr√° muchos excesos y, muy probablemente, usaremos patrones que perjudiquen el rendimiento y la disponibilidad de las aplicaciones. <br><br>  El desarrollo web no es una tarea f√°cil.  Este es un trabajo largo.  Raramente se realiza bien en el primer intento.  Sin embargo, lo mejor de este trabajo es que no tenemos que hacer todo perfectamente desde el principio.  Podemos realizar mejoras en los proyectos despu√©s de su lanzamiento y, de hecho, este material est√° dedicado a esto, el segundo de una serie de art√≠culos sobre un enfoque responsable para el desarrollo de JS.  La perfecci√≥n es un objetivo muy lejano.  Mientras tanto, lidiemos con la resaca de JavaScript mejorando, por as√≠ decirlo, las <i>secuencias de comandos</i> <br>  en el sitio en un futuro cercano. <br><br><h2>  <font color="#3AC1EF">Nos ocupamos de problemas comunes</font> </h2><br>  Esto puede parecer un enfoque mec√°nico para resolver problemas, pero primero revise una lista de problemas t√≠picos y formas de tratarlos.  En grandes equipos de desarrollo, estas cosas a menudo se olvidan.  Esto es especialmente cierto para aquellos equipos que trabajan con m√∫ltiples repositorios o no usan una plantilla optimizada para sus proyectos. <br><br><h3>  <font color="#3AC1EF">‚ñç Aplicar algoritmo de sacudida de √°rbol</font> </h3><br>  Primero, verifique si sus herramientas est√°n configuradas para implementar el algoritmo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sacudimiento de √°rbol</a> .  Si no se ha encontrado con este concepto antes, eche un vistazo a este material <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√≠o</a> escrito el a√±o pasado.  Si explicamos el funcionamiento de este algoritmo en pocas palabras, podemos decir que debido a su uso en los ensambles de producci√≥n de la aplicaci√≥n no incluye aquellos paquetes que, aunque importados al proyecto, no se usan en √©l. <br><br>  La implementaci√≥n del algoritmo de agitaci√≥n de √°rbol es una caracter√≠stica est√°ndar de los paquetes modernos como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">webpack</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Rollup</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parcel</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Grunt</a> o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">trago</a> son administradores de tareas.  Ellos no hacen esto.  El administrador de tareas, a diferencia del agrupador, no crea un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">gr√°fico de dependencia</a> .  El administrador de tareas participa, utilizando los complementos necesarios, realizando manipulaciones separadas en los archivos que se le transfieren.  La funcionalidad de los administradores de tareas se puede ampliar usando complementos, d√°ndoles la capacidad de procesar JavaScript usando paquetes.  Si ampliar las capacidades del administrador de tareas en esta direcci√≥n parece ser un problema, entonces probablemente deba verificar manualmente la base del c√≥digo y eliminar el c√≥digo no utilizado. <br><br>  Para que el algoritmo de vibraci√≥n de √°rbol funcione de manera eficiente, se deben cumplir las siguientes condiciones: <br><br><ol><li>  El c√≥digo de aplicaci√≥n y los paquetes instalados deben presentarse como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√≥dulos ES6</a> .  Usar el algoritmo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">vibraci√≥n de</a> √°rbol para m√≥dulos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">CommonJS</a> es casi imposible. </li><li>  Su paquete no debe transformar los m√≥dulos ES6 en m√≥dulos de alg√∫n otro formato durante la compilaci√≥n del proyecto.  Si esto sucede en la cadena de herramientas que usa Babel, entonces <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@ Babel / present-env</a> debe tener los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">m√≥dulos:</a> configuraci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">falsa</a> .  Esto har√° que el c√≥digo ES6 no se convierta en c√≥digo que use CommonJS. </li></ol><br>  Si de repente, al construir su proyecto, el algoritmo de sacudida del √°rbol no se aplica, la inclusi√≥n de este mecanismo puede mejorar la situaci√≥n.  Por supuesto, la efectividad de este algoritmo var√≠a de un proyecto a otro.  Adem√°s, la posibilidad de su uso depende de si los m√≥dulos importados tienen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">efectos secundarios</a> .  Esto puede afectar la capacidad del agrupador para deshacerse de la inclusi√≥n de m√≥dulos importados innecesarios en el ensamblaje. <br><br><h3>  <font color="#3AC1EF">‚ñçDividir el c√≥digo en partes</font> </h3><br>  Es muy probable que ya est√© utilizando alguna forma de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">separaci√≥n</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c√≥digo</a> .  Sin embargo, debe verificar c√≥mo se hace esto.  Independientemente de c√≥mo separe el c√≥digo, quiero ofrecerle que se haga las siguientes dos preguntas muy valiosas: <br><br><ol><li>  ¬øElimina el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">c√≥digo duplicado</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">los puntos de entrada</a> ? </li><li>  ¬øCarga perezosamente todo lo que se puede cargar de esta manera con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">importaciones din√°micas</a> ? </li></ol><br>  Estos problemas son importantes porque reducir la cantidad de c√≥digo redundante es un elemento de rendimiento crucial.  La carga lenta del c√≥digo tambi√©n mejora el rendimiento al reducir la cantidad de c√≥digo JavaScript que forma parte de la p√°gina y se carga cuando se carga.  Si hablamos sobre el an√°lisis del proyecto para detectar la presencia de c√≥digo redundante en √©l, entonces para esto puede usar alg√∫n tipo de herramienta como Bundle Buddy.  Si su proyecto tiene un problema con esto, esta herramienta le informar√° al respecto. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37f/e95/0f3/37fe950f3567d6e53c77969632713df8.png"></div><br>  <i><font color="#999999">La herramienta Bundle Buddy puede verificar la informaci√≥n de compilaci√≥n del paquete web y descubrir cu√°nto se usa el mismo c√≥digo en sus paquetes</font></i> <br><br>  Si hablamos de carga diferida de materiales, descubrir d√≥nde buscar oportunidades para aplicar esta optimizaci√≥n puede ser de cierta dificultad.  Cuando investigo un proyecto existente para la posibilidad de usar carga diferida, busco en la base del c√≥digo aquellos lugares que involucran interacciones del usuario con el c√≥digo.  Puede ser, por ejemplo, controladores de eventos de mouse o teclado, as√≠ como otras cosas similares.  Cualquier c√≥digo que requiera alguna acci√≥n del usuario para ejecutarse es un buen candidato para aplicarle el comando din√°mico <code>import()</code> . <br><br>  Por supuesto, cargar scripts a pedido conlleva el riesgo de retrasos notables al mover el sistema al modo interactivo.  De hecho, antes de que el programa pueda interactuar con el usuario de manera interactiva, debe descargar el script apropiado.  Si la cantidad de datos transferidos no le molesta, considere usar la sugerencia de recurso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">rel = prefetch</a> para cargar scripts de baja prioridad.  Dichos recursos no competir√°n por el ancho de banda con recursos cr√≠ticos.  Si el navegador del usuario <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">admite</a> <code>rel=prefetch</code> , usar esta informaci√≥n sobre herramientas solo ser√° beneficioso.  De lo contrario, no pasar√° nada malo, ya que los navegadores simplemente ignoran el marcado que no entienden. <br><br><h3>  <font color="#3AC1EF">‚ñçUtilice la opci√≥n externa del paquete web para marcar recursos ubicados en servidores extranjeros</font> </h3><br>  Idealmente, debe alojar tantas dependencias de su sitio en sus propios servidores como sea posible.  Si por alguna raz√≥n usted, sin opciones, tiene que descargar dependencias de los servidores de otras personas, col√≥quelas en el bloque <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">externo</a> en la configuraci√≥n del paquete web.  Si no se hace esto, esto puede significar que los visitantes de su sitio descargar√°n tanto el c√≥digo que aloja como el mismo c√≥digo de los servidores de otras personas. <br><br>  Eche un vistazo a una situaci√≥n hipot√©tica en la que algo como esto podr√≠a da√±ar su recurso.  Suponga que su sitio descarga la biblioteca Lodash de un recurso p√∫blico de CDN.  Tambi√©n instal√≥ Lodash en el proyecto para fines de desarrollo local.  Sin embargo, si no especifica en la configuraci√≥n del paquete web que Lodash es una dependencia externa, su c√≥digo de producci√≥n cargar√° la biblioteca desde el CDN, pero al mismo tiempo se incluir√° en el paquete que est√° alojado en su servidor. <br><br>  Si conoce bien los paquetes, entonces todo esto puede parecerle verdades comunes.  Pero vi c√≥mo estas cosas no est√°n prestando atenci√≥n.  Por lo tanto, no se tome el tiempo de verificar dos veces su proyecto por los problemas anteriores. <br><br>  Si no considera necesario alojar sus dependencias creadas por desarrolladores de terceros usted mismo, entonces considere usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">dns-prefetch</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">preconnect</a> o quiz√°s incluso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">precargue</a> sugerencias con ellos.  Esto puede reducir el puntaje de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">TTI</a> (Time To Interactive, tiempo del sitio hasta la primera interactividad).  Y si se requieren capacidades de JavaScript para mostrar el contenido del sitio, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tambi√©n se</a> necesita el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">√çndice de velocidad</a> del sitio. <br><br><h2>  <font color="#3AC1EF">Bibliotecas alternativas m√°s peque√±as y gastos generales reducidos en los sistemas de usuario.</font> </h2><br>  Lo que se llama " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Userland JavaScript</a> " (bibliotecas JS desarrolladas por el usuario) parece una enorme tienda de dulces obscena.  Toda esta magnificencia y variedad de c√≥digo abierto nos inspira, desarrolladores, con asombro.  Los marcos y las bibliotecas nos permiten expandir nuestras aplicaciones, equip√°ndolas r√°pidamente con funciones que ayudan a resolver una variedad de problemas.  Si tuvi√©ramos que implementar la misma funcionalidad por nuestra cuenta, tomar√≠a mucho tiempo y energ√≠a. <br><br>  Aunque personalmente defiendo la minimizaci√≥n agresiva del uso de marcos de clientes y bibliotecas en mis proyectos, no puedo dejar de reconocer su enorme valor y utilidad.  Pero, a pesar de esto, cuando se trata de instalar nuevas dependencias en el proyecto, debemos tratar a cada uno de ellos con bastante sospecha.  Si ya hemos creado y lanzado algo, cuya operaci√≥n depende de muchas dependencias instaladas, esto significa que soportamos la carga adicional en el sistema que todo esto crea.  Es probable que solo los desarrolladores de paquetes puedan resolver este problema optimizando su desarrollo.  Es asi? <br><br>  Quiz√°s esto sea as√≠, pero quiz√°s no.  Depende de las dependencias utilizadas.  Por ejemplo, React es una biblioteca extremadamente popular.  Pero <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Preact</a> es una alternativa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">muy peque√±a</a> a React, que le da al desarrollador casi las mismas API y sigue siendo compatible con muchos complementos de React.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Luxon</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">date-fns</a> son alternativas a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">moment.js</a> , mucho m√°s compactas que esta biblioteca, que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">no</a> es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tan peque√±a</a> . <br><br>  En bibliotecas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Lodash,</a> puede encontrar muchos m√©todos √∫tiles.  Pero algunos de ellos son f√°ciles de reemplazar con los m√©todos est√°ndar de ES6.  Por ejemplo, el m√©todo <a href="">compacto</a> Lodash se puede reemplazar con el m√©todo est√°ndar de matrices de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">filtros</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Muchos</a> otros m√©todos de Lodash tambi√©n se pueden reemplazar de forma segura por otros est√°ndar.  La ventaja de este reemplazo es que obtenemos las mismas caracter√≠sticas que al usar la biblioteca, pero eliminamos una dependencia bastante grande. <br><br>  Independientemente de lo que use, la idea general sigue siendo la misma: pregunte si su elecci√≥n tiene alternativas m√°s compactas.  Averig√ºe si puede resolver los mismos problemas con las herramientas de lenguaje est√°ndar.  Quiz√°s se sorprender√° gratamente de lo poco que tiene que hacer para reducir seriamente el tama√±o de la aplicaci√≥n y la cantidad de carga innecesaria que ejerce sobre los sistemas del usuario. <br><br><h2>  <font color="#3AC1EF">Usar tecnolog√≠as de carga diferencial de script</font> </h2><br>  Lo m√°s probable es que Babel est√© en tu cadena de herramientas.  Esta herramienta se utiliza para transformar el c√≥digo fuente compatible con ES6 en c√≥digo que los navegadores heredados pueden ejecutar.  ¬øSignifica esto que estamos condenados a dar grandes paquetes incluso a los navegadores que no los necesitan, hasta que todos los navegadores antiguos simplemente desaparezcan?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Por supuesto que no</a> !  La carga diferencial de recursos ayuda a evitar este problema al crear dos ensamblajes diferentes basados ‚Äã‚Äãen el c√≥digo ES6: <br><br><ul><li>  El primer ensamblaje incluye todas las conversiones de c√≥digo y polyfill necesarios para que su sitio funcione en navegadores heredados.  Probablemente ahora le est√° dando a los clientes esta asamblea particular. </li><li>  El segundo ensamblaje contiene un m√≠nimo de conversiones de c√≥digo y polyfill, o no tiene ninguna.  Est√° dise√±ado para navegadores modernos.  Esta es una asamblea que quiz√°s no tengas.  Al menos todav√≠a no. </li></ul><br>  Para utilizar la tecnolog√≠a de carga diferencial de conjuntos, debe trabajar un poco.  No entrar√© en detalles aqu√≠. Dar√© un mejor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enlace</a> a mi material, que analiza una de las formas de implementar esta tecnolog√≠a.  La esencia de todo esto es que puede modificar su configuraci√≥n de compilaci√≥n para que durante la compilaci√≥n del proyecto se cree una versi√≥n adicional del paquete JS de su sitio.  Este paquete adicional ser√° m√°s peque√±o que el principal.  Estar√° destinado solo a los navegadores modernos.  La mejor parte es que este enfoque le permite optimizar el tama√±o del paquete y, al mismo tiempo, no sacrificar absolutamente nada de las capacidades del proyecto.  Dependiendo del c√≥digo de la aplicaci√≥n, ahorrar en el tama√±o del paquete puede ser bastante significativo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58a/fa7/803/58afa780391bbe685486a4a55f99b76b.jpg"></div><br>  <i><font color="#999999">An√°lisis de paquetes para navegadores heredados (izquierda) y paquetes para nuevos navegadores (derecha).</font></i>  <i><font color="#999999">El estudio de paquete se realiz√≥ utilizando webpack-bundle-analyzer.</font></i>  <i><font color="#999999"><a href="">Aqu√≠ est√° la</a> versi√≥n a tama√±o completo de esta imagen.</font></i> <br><br>  Es m√°s f√°cil dar diferentes paquetes a diferentes navegadores utilizando el siguiente truco.  Funciona bien en los navegadores modernos: <br><br><pre> <code class="javascript hljs">&lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.mjs"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">nomodule</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Desafortunadamente, este enfoque tiene desventajas.  Los navegadores obsoletos como IE11, e incluso los relativamente modernos, como las versiones Edge 15-18, cargar√°n ambos paquetes.  Si est√° listo para soportarlo, utilice esta t√©cnica y no se preocupe por nada. <br><br>  Por otro lado, debe encontrar algo en caso de que le preocupe el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">impacto</a> en el rendimiento de su aplicaci√≥n del hecho de que los navegadores m√°s antiguos tienen que descargar ambos paquetes.  Aqu√≠ hay una posible soluci√≥n a este problema que utiliza la inyecci√≥n de script (en lugar de la etiqueta <code>&lt;script&gt;</code> que usamos anteriormente).  Evita la carga doble de paquetes por los navegadores apropiados.  Esto es de lo que estamos hablando: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scriptEl = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"script"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"noModule"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> scriptEl) {  <span class="hljs-comment"><span class="hljs-comment">//     scriptEl.src = "/js/app.mjs";  scriptEl.type = "module"; } else {  //     scriptEl.src = "/js/app.js";  scriptEl.defer = true; // type="module"   ,    . } //  ! document.body.appendChild(scriptEl);</span></span></code> </pre> <br>  Este script asume que si el navegador admite el atributo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nomodule</a> en el elemento del <code>script</code> , entonces comprende la construcci√≥n <code>type="module"</code> .  Esto garantiza que los navegadores heredados solo recibir√°n scripts dise√±ados para ellos, y los modernos recibir√°n scripts dise√±ados para ellos.  Sin embargo, tenga en cuenta que las secuencias de comandos incrustadas din√°micamente se cargan de forma asincr√≥nica de forma predeterminada.  Por lo tanto, si el orden de carga de las dependencias es importante para usted, establezca el atributo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">as√≠ncrono</a> en <code>false</code> . <br><br><h2>  <font color="#3AC1EF">Transmitir menos</font> </h2><br>  No voy a atacar a Babel aqu√≠.  Esta herramienta es necesaria en el desarrollo web moderno, pero es una entidad muy descarriada.  Babel agrega muchas cosas al c√≥digo que genera, que el desarrollador puede no conocer.  Por lo tanto, no te arrepentir√°s si miras las entra√±as de Babel y descubres exactamente lo que est√° haciendo.  En particular, el conocimiento de los mecanismos internos de Babel deja en claro que peque√±os cambios en la forma en que alguien escribe el c√≥digo pueden tener un efecto positivo en lo que genera Babel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ff/159/898/6ff159898be42a49a07d2990071d1b37.png"></div><br>  <i><font color="#999999"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Transmitir menos</a></font></i> <br><br>  Es decir, de eso estamos hablando.  Por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">las opciones predeterminadas</a> son una caracter√≠stica muy √∫til de ES6 que ya puede estar usando: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message, level = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"log"</span></span></span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  Aqu√≠ vale la pena prestar atenci√≥n al par√°metro de <code>level</code> , cuyo valor predeterminado es el <code>log</code> cadena.  Esto significa que si queremos llamar a <code>console.log</code> usando la funci√≥n de contenedor <code>logger</code> , entonces no necesitamos pasar de <code>level</code> a esta funci√≥n.  Conveniente, ¬øverdad?  Todo esto es bueno, excepto por el c√≥digo que obtiene Babel al transformar esta funci√≥n: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> level = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> ? <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] : <span class="hljs-string"><span class="hljs-string">"log"</span></span>;  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  Este es un ejemplo de c√≥mo, a pesar del hecho de que somos guiados por buenas intenciones, las comodidades que brinda Babel pueden tener consecuencias negativas.  Lo que eran solo unos pocos caracteres en el c√≥digo fuente se convirti√≥ en una construcci√≥n mucho m√°s larga en la versi√≥n de producci√≥n del programa.       - ,      ,     <code>arguments</code>  . <br><br> ,    ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> ?  ,   Babel      : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   function logger(...args) {  const [level, message] = args;  console[level](message); } //   Babel function logger() {  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key &lt; _len; _key++) {    args[_key] = arguments[_key];  }  const level = args[0],        message = args[1];  console[level](message); }</span></span></code> </pre> <br>     ,  Babel         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@babel/preset-env</a> ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> .  , ,     , ,    ,        !       ‚Äî    ¬´¬ª   (  <code>true</code>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">loose</a> ).  ‚Äî  ,   ,     ,     ,  ,     .   ¬´¬ª       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>   ,     Babel   ,    . <br><br>    ,    ¬´¬ª   ,         ,     Babel   : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Babel      function logger(message, level) {  console[level || "log"](message); }</span></span></code> </pre> <br> ,    ‚Äî      JavaScript,       ,    .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> spread</a> ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> . <br><br>          ‚Äî              : <br><br><ol><li>     ‚Äî    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@babel/runtime</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@babel/plugin-transform-runtime</a>  ,      ,  Babel    . </li><li>        ,       .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@babel/polyfill</a> .   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">babel</a> /preset-env <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">useBuiltins</a>   <code>usage</code> . </li></ol><br>      ,    ,   ,   ,    ,      .    ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">JSX</a> ,      ,       ,       .        ,          ,          . ,   ,  .     ,     Babel       ‚Äî         .       ,  Babel.  ,             . <br><br><h2> <font color="#3AC1EF">:   ‚Äî   </font> </h2><br>   ,    . ,    JavaScript-,       ,     .      ,      ,       .  -       .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a> .  ,           ,   ,  ,    ,   ,  ,    . <br><br>   ,  ,    ,      ,   ,    ,   ,  . - ‚Äî  . ,    ,  ,            .    .   ,  ,  ,    ,    .      ,      ,   ,          . <br><br>  <b>Estimados lectores!</b>         JS-? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/460797/">https://habr.com/ru/post/460797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../460783/index.html">Consenso sobre la reputaci√≥n del nodo. ¬øEs necesario?</a></li>
<li><a href="../460785/index.html">Aplicaciones para libros electr√≥nicos en el sistema operativo Android. Parte 1. Introducci√≥n y aplicaciones de oficina.</a></li>
<li><a href="../460789/index.html">Finalmente, el rejuvenecimiento es una cosa.</a></li>
<li><a href="../460793/index.html">Estructurar React Aplicaciones</a></li>
<li><a href="../460795/index.html">12 consejos para mejorar el rendimiento de la aplicaci√≥n JavaScript</a></li>
<li><a href="../460799/index.html">Solicitud de pago de API de navegador est√°ndar</a></li>
<li><a href="../460801/index.html">27 incre√≠bles herramientas VS Code para desarrolladores modernos de JavaScript</a></li>
<li><a href="../460803/index.html">Lectura para el verano: libros para t√©cnicos</a></li>
<li><a href="../460805/index.html">C√≥mo transferir datos entre microcontroladores a 100 Mbps</a></li>
<li><a href="../460807/index.html">Mida siete veces, una vez que implemente la herramienta de BI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>