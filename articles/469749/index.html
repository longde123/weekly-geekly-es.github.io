<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👂🏻 🏵️ 🤹🏾 Mejorando UX con la tecla Tab 🦓 🧒🏿 👨🏾‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Al desarrollar aplicaciones, los proveedores de front-end rara vez prestan atención a cómo usará el usuario las funciones del teclado proporcionadas p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mejorando UX con la tecla Tab</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469749/"> Al desarrollar aplicaciones, los proveedores de front-end rara vez prestan atención a cómo usará el usuario las funciones del teclado proporcionadas por el navegador.  No soy una excepción, pero un día me dieron una tarea sobre UX y transiciones presionando "Tab" y "Shift + Tab". <br><br>  La esencia de la tarea es transparente y limpia: hay una interfaz, cuyo diseño se muestra a continuación.  Conceptualmente, 1 página puede contener 2 formularios diferentes y el requisito era que "ejecutar con pestañas no va de un formulario a otro". <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/ib/qu/nh/ibqunhjdv7de_jfxdhveksjdva0.jpeg" alt="imagen"><br><br>  Todo estaría bien si el navegador supiera cómo bloquear de forma "nativa" el enfoque en los formularios.  En la figura siguiente se presenta un ejemplo, donde el "borde" naranja marca el elemento actual y el gris, el anterior. <br>  ￼ <br><img src="https://habrastorage.org/webt/iv/kl/in/ivklinjbqstknf8mpmxum7oihpi.jpeg" alt="imagen"><br><br>  Como puede ver, el comportamiento "nativo" no cumple los requisitos.  Entonces, resolvamos este problema.  La solución no es complicada, así que considérelo. <br><br>  Sería ideal si hubiera algunas "compuertas" que evitarían "saltar" fuera del foco desde el último elemento (con "Tab") o el primer elemento (con "Shift + Tab") con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"tabindex"</a> o foco de apoyo por defecto.  Entonces, la esencia es simple: nuestras "puertas" son "elementos de entrada" ocultos, que reciben un evento de "evento" como argumento durante el evento "onFocus" y devuelven el foco al elemento del que proviene.  Ilustración a continuación. <br><br><img src="https://habrastorage.org/webt/04/wl/gm/04wlgmoafcxeq0tbqcr2fmx4f0o.jpeg" alt="imagen"><br><br>  Obtener el elemento anterior es factible utilizando la propiedad "relatedTarget" del objeto "event".  Visualización de la solución a continuación. <br><br>  ￼ <img src="https://habrastorage.org/webt/np/fx/gh/npfxghjxsiagblvvxd35xbh4soc.jpeg" alt="imagen"><br><br>  Y aquí está el código en sí.  Vale la pena señalar que no hay una sintaxis "ES6 +", ya que la idea de admitir el código con diferentes navegadores sin conectar varios "transpiladores" como Babel es fundamental. <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getGateInput</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">handleTabOut</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> input = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"input"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// not visibiliy:hidden or display:none as need to focus on this element var hiddingStyle = "opacity: 0;cursor: none;position: absolute;top: -10px;left: -10px;"; input.setAttribute("style", hiddingStyle); input.addEventListener("focus", handleTabOut); return input; }</span></span></code> </pre> <br>  No hay nada complicado: se crea una "entrada", se establecen estilos que "ocultan" nuestras "puertas".  Aquí, "display: none" no se usa, ya que el navegador no enfoca "Tabs" en tales elementos.  Debido a este comportamiento, es necesario hacer que el elemento sea transparente y moverlo fuera de la ventana del navegador. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTabOutHandler</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">element, GATES</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> relatedTarget = event.relatedTarget || event.fromElement; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> target = event.target; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> gatesTrapped = target === GATES[<span class="hljs-number"><span class="hljs-number">0</span></span>] || target === GATES[<span class="hljs-number"><span class="hljs-number">1</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gatesTrapped &amp;&amp; isChild(relatedTarget, element)) { event.preventDefault(); relatedTarget.focus(); } }; }</code> </pre> <br>  Para devolver el foco al elemento anterior, use getTabOutHandler.  Este es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el HOC</a> .  Su primer argumento es nuestro contenedor (alrededor del cual configuramos la "puerta"), y el segundo espera una matriz de "puertas" que creamos usando getGateInput.  Esta función devuelve un controlador de eventos que funciona de acuerdo con el principio descrito anteriormente. <br><br>  Para que el foco entre en el contenedor, necesitamos abrir y cerrar la "puerta".  Haremos esto configurando el atributo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"tabindex"</a> .  (-1 - no enfocar con pestañas, 0 - enfocar según la secuencia) <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">moveGates</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">open, GATES</span></span></span><span class="hljs-function">) </span></span>{ GATES[<span class="hljs-number"><span class="hljs-number">0</span></span>].setAttribute(<span class="hljs-string"><span class="hljs-string">"tabindex"</span></span>, open ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>); GATES[<span class="hljs-number"><span class="hljs-number">1</span></span>].setAttribute(<span class="hljs-string"><span class="hljs-string">"tabindex"</span></span>, open ? <span class="hljs-number"><span class="hljs-number">-1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>); }</code> </pre> <br>  Para controlar las puertas, configuraremos un controlador que "escuchará" presionar Tab (código 9) y si el elemento enfocado (activeElement) está dentro del contenedor, entonces cierre la "puerta", de lo contrario ábralo. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">"keydown"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (event.keyCode === <span class="hljs-number"><span class="hljs-number">9</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isChild(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.activeElement, element)) { moveGates(<span class="hljs-literal"><span class="hljs-literal">false</span></span>, GATES); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { moveGates(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, GATES); } } });</code> </pre> <br><h3>  Total </h3><br>  Se consideró un método para bloquear el foco en un formulario, que consiste en devolver el foco a un elemento enfocado anterior.  Para "captar" el foco, utilizamos "elementos de entrada" ocultos, cuyo foco se controlaba utilizando el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"índice tabin"</a> .  El código anterior es parte de la biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tab-out-catcher</a> que escribí para resolver mi problema.  Ejemplos de uso se pueden encontrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí</a> .  También hay una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">solución</a> para las aplicaciones React. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/469749/">https://habr.com/ru/post/469749/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../469739/index.html">Juguetes de madera, parte seis - 1992</a></li>
<li><a href="../469741/index.html">Celestia: las aventuras de Bugs en el espacio</a></li>
<li><a href="../469743/index.html">Celestia: las aventuras de los insectos en el espacio</a></li>
<li><a href="../469745/index.html">14-15 de octubre: Bootcamp del proyecto global blockchain Hyperledger por primera vez en Moscú</a></li>
<li><a href="../469747/index.html">Resumen de eventos de TI de octubre (primera parte)</a></li>
<li><a href="../469753/index.html">Los 9 mejores hallazgos de código abierto para septiembre de 2019</a></li>
<li><a href="../469755/index.html">Cómo ser un buen programador</a></li>
<li><a href="../469757/index.html">Tecnología AR al servicio de la pintura.</a></li>
<li><a href="../469761/index.html">¿Cómo implementar análisis y no romper la aplicación?</a></li>
<li><a href="../469765/index.html">Los elogios se relajan y la crítica ofende: cómo evaluar el trabajo de otra persona, para que todos estén bien</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>