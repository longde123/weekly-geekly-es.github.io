<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍🚒 🧜🏼 🚷 Muster für Tester. Proxy (alternativ) 🚺 🍙 🤛🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bevor es soweit ist 
 Hallo. Ich bin Dima und kenne die Muster nicht. Was den Tester betrifft, um nicht zu sagen, dass er problematisch ist. Wie für e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Muster für Tester. Proxy (alternativ)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414253/"><h2>  Bevor es soweit ist </h2><br>  Hallo.  Ich bin Dima und kenne die Muster nicht.  Was den Tester betrifft, um nicht zu sagen, dass er problematisch ist.  Wie für einen Automator ..?  Nun, seien wir ehrlich, du kannst auch leben. <br><br>  Aus Chatrooms, Konferenzen und der Kommunikation mit Kollegen wird deutlich: Das Hauptmuster - PageObject - wird gelernt, was wird noch benötigt? <br><br>  Und hier war ein so großer Teil der Gedanken darüber, warum wir Designmuster nicht wirklich verwenden: Kennen wir sie nicht oder ist es ohne sie gut?  Es gab auch Vertiefungen in der Geschichte, dass Muster nicht für Sie sind, sondern seit Jahrzehnten bewährte Kenntnisse und Techniken, Argumente für und Erwähnung von bekannten Genossen, die dagegen sind. <br><br>  Aber letztendlich wird es definitiv nicht schaden, die Muster zu kennen. <br><br>  Ich fordere Sie also keineswegs auf, Vorlagen überall in Code umzuwandeln, und beginne, eine Reihe von Artikeln über Muster zu veröffentlichen. <br><br><h4>  Ein bisschen mehr über das Format und los geht's </h4><br>  Die Artikel / Bücher / Videokurse über Muster selbst sind ziemlich anständig.  Und ich bin sicher, Sie können leicht eine Ressource mit einer kompetenten Erklärung, Beispielen für Ihre Lieblings-YP, E-Mails usw. finden. <br><br>  Die Aufgabe dieses und nachfolgender Artikel ist es, mit denen über Muster zu sprechen, die bereits mit dem Code arbeiten, aber keine gute theoretische Grundlage haben.  Diese Artikel sind also vielleicht in erster Linie für mich. <br><br>  Nun, da ich selbst ein Tester bin und es selbst in meinem Freundeskreis viele der gleichen gibt, werden die Geschichten zur Testautomatisierung neigen. <br><br>  Einige der Muster scheinen seltsam und nicht sehr nützlich zu sein.  Und bei einigen werden Sie im Gegenteil feststellen, dass Sie so etwas schon lange implementiert haben. Sie wussten einfach nicht, dass es so heißt. <br>  Auf jeden Fall hoffe ich, dass Sie etwas Nützliches für sich finden. <br><br>  Und ja, ich freue mich sehr über konstruktive Kritik in den Kommentaren. <br><br>  Hier. <br><br><ul><li>  zu mir selbst - erzählt </li><li>  was wird erzählt </li><li>  warum - erzählt </li><li>  für wen und wie - erzählt </li></ul><br>  Du kannst anfangen. <br><a name="habracut"></a><br><hr><br><h2>  Proxy - Proxy - Stellvertreter </h2><br><h3>  Theorie (ein bisschen) </h3><br>  Proxy-Muster (in russischen Ausgaben, <i>Deputy</i> ).  Die Idee ist, für die Arbeit kein reales Objekt auszugeben, sondern eine Substitution, die die Methoden des Objekts + unsere Logik verwendet, falls wir eine hinzugefügt haben.  Das ist alles. <br><br>  Wie es geht: <br><br>  1. Erstellen Sie eine Schnittstelle mit öffentlichen Methoden des Objekts, das wir ersetzen möchten <br>  2. Erstellen Sie eine Klasse, die <br>  - implementiert diese Schnittstelle <br>  - hat Zugriff auf das ursprüngliche Objekt, um seine Methoden aufzurufen <br>  3. Fügen Sie Ihre Logik zu den Methoden der erstellten Klasse hinzu <br><br><h3>  Übe </h3><br>  In der Praxis sollte es klarer sein. <br><br>  <b>Dano:</b> Wir haben einen WebDriver.  Und er hat eine Methode findElements (By by); <br><br>  <b>Aufgabe:</b> Ich muss wirklich protokollieren, wie viele Elemente vom Selektor gefunden wurden. <br>  Jedes Mal, wenn ich eine Methode aufrufe <br><br><pre><code class="java hljs">driver.findElements(By.cssSelector(<span class="hljs-string"><span class="hljs-string">".item"</span></span>));</code> </pre> <br>  Ich möchte einen Datensatz in den Protokollen sehen - wie viele Elemente gefunden wurden <br><br>  <b>Lösung 1.</b> Auf der Stirn.  Was ist da: Ich habe es benutzt. <br>  Wir nehmen es einfach und schreiben bei jedem Anruf, wie viele gefunden wurden: <br><br><pre> <code class="java hljs">List&lt;WebElement&gt; items = driver.findElements(By.cssSelector(<span class="hljs-string"><span class="hljs-string">".item"</span></span>)); logger.info(<span class="hljs-string"><span class="hljs-string">"Found {} items"</span></span>, items.size());</code> </pre><br>  Die Option ist normal, während solche Aufrufe beispielsweise 7 sind. Obwohl die Nachteile dieses Ansatzes bereits für jeden offensichtlich sind, der mindestens einmal „seinen Code geringfügig geändert“ hat. <br><br>  <b>Lösung 2.</b> Wir verwenden einen Proxy. <br>  WebDriver ist eine Schnittstelle.  Methoden deklariert, aber keine Implementierung.  Zu den Implementierungen gehören ChromeWebDriver, FirefoxWebDriver usw. <br><br>  In Tests müssen wir nicht mit einer bestimmten Klasse für Chrom oder Safari arbeiten.  Die Klasse muss nur die WebDriver-Schnittstelle implementieren.  Wir werden dies tun: <br><br><ol><li><blockquote>  Wir erstellen eine Schnittstelle mit den öffentlichen Methoden des Objekts, das wir ersetzen möchten </blockquote>  In unserem Beispiel gibt es bereits eine solche Schnittstelle - WebDriver. <br></li><li><blockquote>  Erstellen Sie eine Klasse, die <br>  - implementiert diese Schnittstelle <br>  - hat Zugriff auf das ursprüngliche Objekt, um seine Methoden aufzurufen </blockquote><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoggerWebDriver</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebDriver</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> WebDriver driver; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String s)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;WebElement&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findElements</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(By by)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> WebElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findElement</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(By by)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } <span class="hljs-comment"><span class="hljs-comment">//     }</span></span></code> </pre></li><li><blockquote>  Fügen Sie Ihre Logik zu den Methoden der erstellten Klasse hinzu </blockquote><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoggerWebDriver</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebDriver</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> WebDriver driver; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger logger = LogManager.getLogger(LoggerWebDriver.class); LoggerWebDriver() { <span class="hljs-comment"><span class="hljs-comment">//    . // , ()     this.driver = new ChromeDriver(); } public void get(String var1) { driver.get(var1); } public List&lt;WebElement&gt; findElements(By var1) { List&lt;WebElement&gt; items = driver.findElements(var1); logger.info("Selector {}. Found {} elements", var1.toString(), items.size()); return items; } public WebElement findElement(By var1) { return driver.findElement(var1); } //     }</span></span></code> </pre> </li></ol><br>  <b>Was ist passiert?</b> <br><br>  Zur Klasse hinzugefügt <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> WebDriver driver;</code> </pre> <br>  Dies ist das gleiche Objekt, das wir ersetzen möchten.  Es sind seine Methoden, die wir weiter nennen werden. <br><br>  Jetzt können Sie sich beispielsweise die Methode ansehen <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String var1)</span></span></span><span class="hljs-function"> </span></span>{ driver.get(var1); }</code> </pre> <br>  Die Methode ruft lediglich get () für den realen Treiber auf. <br><br>  Und hier ist die Methode <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;WebElement&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findElements</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(By var1)</span></span></span><span class="hljs-function"> </span></span>{ List&lt;WebElement&gt; items = driver.findElements(var1); logger.info(<span class="hljs-string"><span class="hljs-string">"Selector {}. Found {} elements"</span></span>, var1.toString(), items.size()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items; }</code> </pre> <br>  Wir haben uns entsprechend unserer Aufgabe erweitert. <br><br>  Das ist alles, was Sie in Tests verwenden können: <br><br><pre> <code class="java hljs">WebDriver driver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoggerWebDriver(); driver.get(<span class="hljs-string"><span class="hljs-string">"http://google.com"</span></span>); List&lt;WebElement&gt; items = driver.findElements(By.cssSelector(<span class="hljs-string"><span class="hljs-string">"a"</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; Selector By.cssSelector: a. Found 48 elements</span></span></code> </pre> <br><hr><br>  Hier.  Das Muster ist gut, wenn Sie Protokollierung, Caching, verzögerte Initialisierung und Zugriffskontrolle auf Methoden auflegen müssen.  Wenn Sie Code schreiben und wirklich eine Art Zwischenschicht mit Ihren Funktionen haben möchten, ist eine der Optionen im Allgemeinen ein Proxy. <br><br>  Jetzt, da wir noch ein Muster kennen, möchte ich Sie daran erinnern, dass, wenn ein Hammer in Ihrer Hand ist, alles um uns herum Nägel zu sein scheinen.  Denken Sie daran. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de414253/">https://habr.com/ru/post/de414253/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de414239/index.html">Windows und Dateisystem mit Groß- und Kleinschreibung</a></li>
<li><a href="../de414243/index.html">Kostenloses Werk über Einstellungen, Interviews und Müll auf dem Markt für IT-Personal</a></li>
<li><a href="../de414245/index.html">Polynom-Regressionsmodell</a></li>
<li><a href="../de414249/index.html">Public-Key-Infrastruktur: GCrypt-Bibliothek als Alternative zu OpenSSL mit Unterstützung für russische Kryptografie</a></li>
<li><a href="../de414251/index.html">Entwicklung ohne Programmierung: Immerhin Life Hack?</a></li>
<li><a href="../de414255/index.html">Patentierter Traum des Programmierers - Teil II</a></li>
<li><a href="../de414261/index.html">Wo speichern Sie die Daten?</a></li>
<li><a href="../de414263/index.html">Gibt es Leben außerhalb von Roscosmos? Überblick über die Erforschung des russischen Privatraums</a></li>
<li><a href="../de414265/index.html">Richard Hamming: Kapitel 7. Künstliche Intelligenz - II</a></li>
<li><a href="../de414267/index.html">Wie ersetze ich einen Buchhalter durch einen Roboter?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>