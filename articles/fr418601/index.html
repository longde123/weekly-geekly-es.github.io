<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•å üòâ üë©üèΩ‚Äçü§ù‚Äçüë®üèø Toute la v√©rit√© sur RTOS. Article # 7. Nucleus SE: Introduction ü§≥üèΩ ü§üüèΩ üßí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le reste de la s√©rie ¬´Toute la v√©rit√© sur RTOS¬ª, nous examinerons en d√©tail comment le RTOS est mis en ≈ìuvre et d√©ploy√©. Pour ce faire, nous cons...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Toute la v√©rit√© sur RTOS. Article # 7. Nucleus SE: Introduction</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418601/"><img src="https://habrastorage.org/webt/s_/59/bp/s_59bpqram112a5-md1svupxnmo.jpeg"><br><br>  Dans le reste de la s√©rie ¬´Toute la v√©rit√© sur RTOS¬ª, nous examinerons en d√©tail comment le RTOS est mis en ≈ìuvre et d√©ploy√©.  Pour ce faire, nous consid√©rerons un RTOS sp√©cifique: Nucleus SE.  M√™me si vous n'utilisez pas ce noyau particulier ou d'autres noyaux qui lui sont li√©s, comprendre comment il fonctionne fournira une bonne base pour travailler avec n'importe quel RTOS. <br><a name="habracut"></a><br>  Pour comprendre pourquoi Nucleus SE a √©t√© con√ßu de cette mani√®re, il est important de mettre en √©vidence les t√¢ches et les objectifs principaux que j'ai suivis au d√©but de ce projet. <br><br>  Articles pr√©c√©dents de la s√©rie: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Autres services RTOS</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Interaction et synchronisation des t√¢ches</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">T√¢ches, changement de contexte et interruptions</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">T√¢ches et planification</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RTOS: Structure et mode temps r√©el</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RTOS: introduction.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a> <br><br>  <b>Simplicit√©</b> <br><br>  Le code du noyau doit √™tre simple, direct, bien comment√© et document√©.  Nucleus SE est principalement destin√© √† un usage √©ducatif. <br><br>  <b>La taille</b> <br><br>  Cela devrait √™tre un petit noyau bien √©volutif (car la m√©moire, en particulier la m√©moire op√©rationnelle (RAM), peut √™tre insuffisante). <br><br>  <b>Fonctionnalit√©</b> <br><br>  Le noyau doit avoir un niveau √©lev√© de fonctionnalit√©s qui prend en charge les services RTOS standard. <br><br>  <b>Prise en charge 8/16 bits</b> <br><br>  Il doit prendre en charge les architectures 8 et 16 bits: dans la mesure du possible, utilisez des donn√©es de la taille d'un octet;  les structures de donn√©es ne devraient pas n√©cessiter de m√©thodes d'adressage exotiques;  les donn√©es persistantes ne doivent pas √™tre copi√©es dans la RAM inutilement. <br><br>  <b>Le futur</b> <br><br>  Il doit y avoir un chemin de d√©veloppement de Nucleus SE vers Nucleus RTOS.  Les utilisateurs devraient pouvoir transf√©rer facilement le code entre les c≈ìurs.  Plus important encore, leurs connaissances doivent √©galement √™tre transf√©r√©es.  L'API Nucleus SE impl√©mente efficacement un sous-ensemble de l'API RTOS Nucleus. <br><br>  <b>Co√ªt</b> <br><br>  Le mod√®le d'entreprise devrait √™tre attrayant pour tous les utilisateurs potentiels: les d√©veloppeurs d'appareils 8/16 bits, ceux qui utilisent d'abord le RTOS et ceux qui √©tudient simplement la technologie elle-m√™me.  Ainsi, Nucleus SE est disponible gratuitement, absolument gratuit √† des fins commerciales et √©ducatives;  le code peut √™tre utilis√© et modifi√©. <br><br>  <b>Public cible Nucleus SE</b> <br><br>  Le r√©sultat de cette approche est un noyau qui peut √™tre utile pour trois types de d√©veloppeurs: <br><br><ul><li>  Programmeurs d'appareils 8/16 bits qui n√©cessitent un simple noyau ou planificateur de t√¢ches.  Cela est particuli√®rement int√©ressant si les d√©veloppeurs souhaitent acqu√©rir certaines comp√©tences pour utiliser RTOS ou d√©velopper un syst√®me qui utilise d'autres appareils 32 bits o√π Nucleus RTOS peut √™tre un bon choix. </li><li>  D√©veloppeurs d'applications embarqu√©s utilisant des appareils 32 bits o√π la complexit√© logicielle ne vaut pas le co√ªt d'un RTOS commercial traditionnel.  L'utilisation de Nucleus SE peut √™tre utile et permettra le d√©veloppement (jusqu'√† Nucleus RTOS) si la complexit√© de l'application augmente. </li><li>  Les √©tudiants dans le processus d'apprentissage peuvent utiliser Nucleus SE comme base d'apprentissage RTOS.  Les comp√©tences acquises seront utiles plus tard quand elles commenceront √† travailler. </li></ul><br>  <b>D√©cisions de conception et compromis</b> <br><br>  Afin d'atteindre les objectifs ci-dessus, plusieurs d√©cisions de conception soigneusement pens√©es ont d√ª √™tre prises.  Les d√©tails seront d√©crits plus tard lorsque nous consid√©rerons des fonctions sp√©cifiques, mais voici un bref r√©sum√© des points cl√©s. <br><br>  <b>Configuration statique</b> <br><br>  Nucleus SE est un RTOS statique, ce qui signifie que toutes les d√©cisions de configuration sont prises au moment de la construction, et non dynamiquement au moment de l'ex√©cution.  Cela pr√©sente de nombreux avantages, notamment la simplification de la structure des donn√©es et la r√©duction de la taille du code, il n'est donc pas n√©cessaire d'appeler les fonctions de cr√©ation et de suppression d'API.  Pour la plupart des applications, la cr√©ation d'objet dynamique n'est pas requise. <br><br>  <b>Nombre d'objets</b> <br><br>  Le nombre d'objets de chaque type est limit√© dans une application bas√©e sur Nucleus SE.  Il peut s'agir d'une √† seize t√¢ches et de z√©ro √† seize types diff√©rents d'objet noyau.  Cela simplifie l'adressage des objets (voir ci-dessous).  Cette restriction n'est pas difficile pour les petites applications auxquelles le noyau est destin√©. <br><br>  <b>Adressage d'objets</b> <br><br>  Les objets sont adress√©s √† l'aide d'un ¬´index¬ª, qui peut aller de z√©ro √† quinze.  Par rapport √† l'utilisation habituelle des pointeurs, cela peut √™tre plus efficace sur des processeurs plus petits et permettre moins de m√©moire: l'index ne n√©cessite que 4 bits de m√©moire;  L'adresse est de 16 √† 32 bits. <br><br>  <b>Planificateur</b> <br><br>  L'ordonnanceur appartenait au domaine de l'architecture du noyau qui √©tait simplifi√©.  Au lieu de fournir un m√©canisme flexible avec diff√©rentes politiques de planification, quatre types de planificateurs distincts sont disponibles dans le noyau;  le planificateur sp√©cifique pour l'application est s√©lectionn√© lors de la configuration. <br><br>  <b>Fonctionnalit√© limit√©e</b> <br><br>  Certaines fonctionnalit√©s disponibles dans Nucleus RTOS ne sont pas impl√©ment√©es dans Nucleus SE.  Dans certains cas, cela est fait par souci de simplicit√©.  Dans d'autres cas, une l√©g√®re perte de fonctionnalit√© dans un domaine facilite la mise en ≈ìuvre de l'autre fonctionnalit√©.  Ces incompatibilit√©s sont mises en √©vidence dans les articles pertinents de la s√©rie. <br><br>  <b>Utilisation de la m√©moire</b> <br><br>  √âtant donn√© que Nucleus SE doit prendre en charge des applications de m√©moire limit√©es, une attention particuli√®re a √©t√© accord√©e √† l'utilisation de la m√©moire.  Il √©tait cens√© utiliser la ROM et la RAM "classiques": la ROM √©tait utilis√©e pour le code et les donn√©es persistantes;  RAM - pour stocker des variables, une pile, etc. Bien qu'une cible sp√©cifique puisse avoir un sch√©ma diff√©rent, le code Nucleus SE est assez flexible;  les d√©finitions (#defines) de ROM et RAM sont utilis√©es pour pr√©fixer toutes les structures de variables et de donn√©es pour indiquer leur emplacement.  Cela peut √™tre r√©alis√© √† l'aide d'outils. <br><br>  La principale exigence √©tait d'√©viter la copie inutile des donn√©es de la ROM vers la RAM, car la RAM peut ne pas √™tre suffisante.  Le m√©canisme par lequel cela est r√©alis√© est d√©crit dans la section Structures de donn√©es de l'article suivant. <br><br>  <b>Impl√©mentation d'API</b> <br><br>  L'API pour Nucleus SE est impl√©ment√©e de mani√®re traditionnelle: la fonction de langage C impl√©mente chaque appel d'API.  Ces appels sont regroup√©s logiquement.  Bien que les appels d'API dans Nucleus SE ne soient pas tout √† fait les m√™mes que dans Nucleus RTOS, la fonctionnalit√© globale est simul√©e et le mappage entre les API est facile.  Les d√©tails de l'API RTOS Nucleus seront inclus. <br><br>  <b>Sections critiques</b> <br><br>  Le code de nombreux appels de fonction API comprend des s√©quences d'instructions qui manipulent les donn√©es du noyau.  G√©n√©ralement, les donn√©es peuvent √™tre dans un √©tat invalide lors de l'ex√©cution de ces instructions, il faut donc veiller √† √©viter toute interruption.  Ou, il peut √™tre interdit d'ex√©cuter du code √† partir d'une autre t√¢che ou d'interrompre le gestionnaire s'il peut acc√©der √† ces donn√©es (actuellement non valides).  Ces s√©quences d'instructions sont appel√©es sections critiques. <br><br>  Une paire de macros est d√©finie appel√©e NUSE_CS_Enter () et NUSE_CS_Exit ().  Tous les codes des fonctions de l'API Nucleus SE les utilisent pour couvrir la section critique, ainsi: <br><br>  NUSE_CS_Enter (); <br>  &lt;code non interruptible&gt; <br>  NUSE_CS_Exit (); <br><br>  En r√®gle g√©n√©rale, ces macros seront d√©velopp√©es respectivement en instructions de d√©sactivation des instructions d'interruption et en instructions d'activation d'interruption.  Cela devra √™tre v√©rifi√© si Nucleus SE est impl√©ment√© sur une architecture de processeur diff√©rente.  Plus d'informations sur le portage de Nucleus SE seront d√©crites dans le prochain article. <br><br>  <b>√âvolutivit√©</b> <br><br>  Comme tous les RTOS modernes, Nucleus SE est √©volutif.  Pour vous assurer que seuls les composants RTOS utilis√©s sont inclus, toutes les fonctions API sont pr√©sent√©es sous la forme d'une biblioth√®que.  Ainsi, lors de la liaison, les fonctions r√©f√©renc√©es sont extraites et incluses dans l'image finale de l'application.  Nucleus RTOS utilise cette approche pour le noyau et tous les autres composants du syst√®me d'exploitation.  Nucleus SE utilise une technique diff√©rente. <br><br>  Au lieu de s'appuyer sur la biblioth√®que de la bo√Æte √† outils s√©lectionn√©e, tous les fichiers source de la distribution Nucleus SE contiennent des directives de compilation conditionnelle.  Pour configurer Nucleus SE pour le programme, le d√©veloppeur doit installer plusieurs caract√®res #define (plus √† ce sujet dans le prochain article).  Cela d√©termine quelles fonctions API sont compil√©es et donc incluses dans le programme. <br><br>  Nucleus SE am√©liore cette approche en proposant un objet que j'appelle ¬´une √©volutivit√© extr√™me¬ª.  Plusieurs aspects de la fonctionnalit√© du noyau peuvent √™tre activ√©s et d√©sactiv√©s, ou configur√©s d'autres mani√®res en utilisant des caract√®res #define similaires.  Ainsi, le d√©veloppeur a un contr√¥le ponctuel sur l'utilisation de la m√©moire. <br><br>  <b>Quelle API?</b> <br><br>  Nucleus SE poss√®de sa propre API, qui sera d√©crite en d√©tail dans les prochains articles.  Pour de nombreux utilisateurs, le simple fait d'inclure ces appels aux fonctions API dans le code sera suffisant. <br><br>  Certains utilisateurs peuvent pr√©f√©rer utiliser une autre API: standard ou famili√®re.  L'API Nucleus SE est assez flexible et vous permet de cr√©er un wrapper qui transforme une interface en une autre API. <br><br>  L'un des principaux objectifs du d√©veloppement de Nucleus SE est un degr√© √©lev√© de compatibilit√© au niveau de l'utilisateur avec Nucleus RTOS.  Bien que les API soient diff√©rentes, elles sont con√ßues pour √™tre faciles √† associer.  Un wrapper sera disponible pour faciliter l'utilisation de l'API RTOS Nucleus sur Nucleus SE. <br><br>  Dans le prochain article, nous continuerons √† examiner Nucleus SE et √† nous concentrer sur la structure interne et le d√©ploiement de RTOS. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr418601/">https://habr.com/ru/post/fr418601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr418589/index.html">Le condens√© de mati√®res fra√Æches du monde du front-end de la derni√®re semaine n ¬∞ 324 (23-29 juillet 2018)</a></li>
<li><a href="../fr418591/index.html">Bug Bounty Kyivstar: r√©compense pour l'acc√®s administrateur √† Jira, AWS, Apple, Google Developer, Bitbucket services - 50 $</a></li>
<li><a href="../fr418593/index.html">Tous les √©couteurs sans fil ne sont pas aussi utiles ou quelques mots sur le probl√®me du codec</a></li>
<li><a href="../fr418597/index.html">Fonctions de documentation des bases de donn√©es PostgreSQL. Troisi√®me partie</a></li>
<li><a href="../fr418599/index.html">5 sources de donn√©es qui transforment les donn√©es APM en analyses de performances des applications</a></li>
<li><a href="../fr418603/index.html">Montre intelligente Matrix PowerWatch qui n'a jamais besoin d'√™tre charg√©e</a></li>
<li><a href="../fr418605/index.html">Analystes: la capitalisation de Microsoft pourrait atteindre 1 billion de dollars</a></li>
<li><a href="../fr418607/index.html">Choisir un fournisseur de Wi-Fi d'entreprise</a></li>
<li><a href="../fr418609/index.html">120 kW d'√©nergie de r√©serve ou Comment alimenter le domaine √† partir de l'√©nergie du soleil</a></li>
<li><a href="../fr418611/index.html">Calcul de la pizzeria: Papa Jones, qui ne se soucie pas de la s√©curit√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>