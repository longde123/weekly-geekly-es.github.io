<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üìß üôÜüèæ ü¶Ä √Ä propos de la connexion et de l'utilisation des √©crans OLED texte Winstar üîó üíÉüèΩ üßíüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les affichages de ligne (ou de texte) sont destin√©s √† la fourniture d'informations textuelles sous forme de lignes. Ils sont de plusieurs types (tout ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>√Ä propos de la connexion et de l'utilisation des √©crans OLED texte Winstar</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400833/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les affichages de ligne (ou de texte) sont destin√©s √† la fourniture d'informations textuelles sous forme de lignes. </font><font style="vertical-align: inherit;">Ils sont de plusieurs types (tout d'abord, LCD ou OLED auto-lumineux), et g√©n√©ralement dans leur marquage, il y a des num√©ros 1202, 1602, 1204 ou similaires, indiquant le nombre de lignes (dans les exemples 2 ou 4) et les caract√®res de chaque ligne (12 et 16) . </font><font style="vertical-align: inherit;">Il existe des affichages sur une seule ligne de ce type, mais dans la pr√©sentation suivante, nous nous concentrons sur les affichages sur deux lignes les plus couramment utilis√©s.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La majorit√© de ces √©crans sont compatibles avec le contr√¥leur HD44780 (Hitachi). Les pr√©sentoirs les plus populaires (au moins dans notre pays) de cette vari√©t√© sont produits par Winstar. De plus, les vari√©t√©s LCD (le nom commence par les lettres WH, par exemple WH1602) sont compatibles individuellement avec le syst√®me de commande HD44780, et les types OLED (le nom commence par WEH, par exemple WEH001602) ont un contr√¥leur WS0010 am√©lior√©. Malheureusement, ou heureusement, nous allons traiter maintenant.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Contrairement aux </font><font style="vertical-align: inherit;">affichages graphiques que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nous avons examin√©s pr√©c√©demment</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur la base du contr√¥leur ks0108, le g√©n√©rateur de caract√®res dans les affichages en minuscules est int√©gr√©. </font><font style="vertical-align: inherit;">De plus, pour nous, la principale diff√©rence entre le WS0010 et le HD44780 standard est la pr√©sence de plusieurs (quatre) tables de codes pour l'affichage de texte multilingue. </font><font style="vertical-align: inherit;">Le HD44780 n'a qu'une seule table de ce type, c'est pourquoi les entreprises doivent vendre un type d'affichage distinct dans chaque r√©gion. </font><font style="vertical-align: inherit;">Les √©crans OLED bas√©s sur WS0010 ne n√©cessitent pas de pannes r√©gionales, ce qui est beaucoup plus pratique. </font><font style="vertical-align: inherit;">Mais pas √† l'utilisateur: par d√©faut, la table ENGLISH_JAPANESE est activ√©e dans les √©crans WEH, et pour activer les caract√®res russes, vous devez la basculer sur ENGLISH_RUSSIAN.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En savoir plus sur la table ENGLISH_RUSSIAN.</font></font></b><div class="spoiler_text">     :    (.    )     ,     .      ,    ,   ‚Äî -   -8,          (. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> 19768-93</a>).       -, , ,     EBCDIC,       ,     ( 127 )    ASCII.    ,  ,    ,    ASCII      .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La biblioth√®que LiquidCrystal standard (fournie avec l'IDE Arduino), bien s√ªr, ne sait rien des quatre tables et n√©cessite donc un redressement, au moins √† cet √©gard. </font><font style="vertical-align: inherit;">Mais pas seulement: au final, ce serait possible avec la langue anglaise. </font><font style="vertical-align: inherit;">Cependant, la proc√©dure d'initialisation est sensiblement diff√©rente pour le WS0010, et si elle n'est pas corrig√©e, l'√©cran affichera cela √† chaque d√©marrage.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Autres fonctionnalit√©s</font></font></b><div class="spoiler_text"> ,  OLED- Winstar   ,       ( ,    ).  ,   ,     . ,  ,     WEH   SPI (, ¬´ SPI¬ª),    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>,   ,      (  3) ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a>.           :         ,         .       ,       I2C    (. ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">  </a>).<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour une raison quelconque, les √©crans Winstar ont un grand d√©ficit en termes de documentation intelligible (comme vous l'avez peut-√™tre remarqu√©, c'est g√©n√©ralement une caract√©ristique des produits chinois). </font><font style="vertical-align: inherit;">Il convient de pr√©ciser o√π vous pouvez t√©l√©charger une documentation plus ou moins compl√®te sans erreur: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici sur l'√©cran LCD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WH1602) avec un contr√¥leur HD44780, ici sur les </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©crans OLED</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (WEH1602), ici sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contr√¥leur WS0010 s√©par√©ment</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (nous y ferons r√©f√©rence plus tard) . </font><font style="vertical-align: inherit;">Et ici, si vous √™tes int√©ress√©, il y a une </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">description d√©taill√©e du contr√¥leur HD44780</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en russe.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Niveler la biblioth√®que LiquidCrystal</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour contr√¥ler les affichages en minuscules sur le HD44780 et ses analogues, la biblioth√®que LiquidCrystal standard, qui est traditionnellement incluse dans l'IDE Arduino de toutes les versions, est tout √† fait appropri√©e. Pour afficher le texte russe, il y a sa version de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , qui fonctionne √©tonnamment bien dans toutes les versions modernes de l'IDE Arduino (il dit que l'auteur a correctement abord√© la conversion des caract√®res UTF-8). Mais pour s'adapter aux √©crans OLED sur le contr√¥leur WS0010, vous devez toujours apporter des corrections. √Ä l'avenir, nous nous moquerons de cette biblioth√®que et donc nous la renommerons LiquidCrystalRus_OLED, afin de ne pas la confondre avec celle habituelle. Pour simplifier la t√¢che, nous ne renommerons pas les fonctions, car l'initialisation sera la m√™me que pour le LiquidCrystalRus d'origine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les changements sont les suivants: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Depuis</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">le tableau russe-anglais</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans WS0010 (voir page 9 pour la fiche technique sur WS0010 en utilisant le lien ci-dessus) est le num√©ro 2, puis pour y basculer, vous devez d√©finir les deux bits les moins significatifs FT1 et FT0 dans la commande FUNCTION SET pour le mettre √† l'√©tat 10 (0x02). (Dans les √©crans LCD avec une table de codes, ces bits, en passant, ne sont pas du tout utilis√©s). Pour ce faire, dans le fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><i><font style="vertical-align: inherit;">recherchez l'</font></i><font style="vertical-align: inherit;"> emplacement (ligne 96 du fichier) o√π la valeur de la variable </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">_displayfunction</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> est </font><i><font style="vertical-align: inherit;">d√©finie</font></i><font style="vertical-align: inherit;"> . Dans les deux lignes de son initialisation (lignes 97 et 99), ajoutez un ajout " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">| = 0x02</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Ensuite, vous devez corriger le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©lai d'initialisation</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> apr√®s la mise sous tension. Pour HD44780, elle ne devrait pas d√©passer 40 ms (voir la documentation sur les liens ci-dessus). La biblioth√®que utilise la fonction pour cela.</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">delayMicroseconds (50000)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (ligne 120 du fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Pour le contr√¥leur WS0010, vous devez avoir un retard dix fois plus long - au moins 500 ms (voir la derni√®re page de la fiche technique sur le lien ci-dessus). Cette exigence est si soigneusement cach√©e (les fichiers avec la documentation en anglais sur Winstar affichent ¬´perdu la police¬ª dans cette partie pr√©cis√©ment), qu'il semble que peu de gens y aient pens√© jusqu'√† pr√©sent. Par cons√©quent, nous rempla√ßons cette ligne par 32 r√©p√©titions de retard de 16 ms chacune:</font></font><br>
<br>
<pre><code class="hljs matlab"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (int <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> &lt;=<span class="hljs-number"><span class="hljs-number">31</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>++) delayMicroseconds(<span class="hljs-number"><span class="hljs-number">16000</span></span>);</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3. En plus de cela (voir √©galement cette derni√®re page de la fiche technique), apr√®s ce d√©lai, lors de l'activation de quatre fils, vous devez </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">envoyer une commande vide cinq fois de suite</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (0x00). √âtant donn√© que l'Arduino est nettement plus rapide que le contr√¥leur d'affichage, les commandes doivent √™tre donn√©es avec un retard interm√©diaire. Ils doivent √™tre ins√©r√©s un peu plus loin dans le texte de la fonction begin, o√π il s'agit sp√©cifiquement de l'inclusion 4 bits (ligne 147 du fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4. Mais ce n'est pas la fin. La table originale ENGLISH_RUSSIAN a une </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ic√¥ne de degr√©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(code 0xEF). L'option est extr√™mement mal ex√©cut√©e graphiquement (trop grande), donc je pr√©f√®re utiliser un point sup√©rieur en gras (code 0xDF) - cela ressemble beaucoup plus √† un degr√© dans le style habituel. Il pourrait √™tre entr√© sous la forme d'un code (meilleur que l'octal "\ 337"), mais le probl√®me est - en essayant de simplifier la fonction de remplacement des codes des lettres russes par des codes dans la table du g√©n√©rateur de caract√®res, l'auteur de la biblioth√®que, bas√© sur l'encodage UTF-8 (voir l' </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article pr√©c√©dent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), introduit une condition de remplacement pour tout code sup√©rieur √† 0x80 (fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus :: write</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Puisque notre 0xDF est clairement sup√©rieur √† 0x80, lorsque vous sp√©cifiez le caract√®re "\ 337" dans la ligne de code, un espace vide sera affich√© √† la place, car il ne correspond √† aucune lettre russe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Malheureusement, la fonction standard </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">createChar ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lorsque j'ai essay√© de l'utiliser pour cr√©er ma propre ic√¥ne de dipl√¥me, je suis entr√© dans l'affichage dans une stupeur compl√®te, dont il ne pouvait √™tre supprim√© qu'en rechargeant le programme. Ce que je dois faire en plus et je serai reconnaissant si quelqu'un me dit quel est le probl√®me. Le g√©n√©rateur de caract√®res ne peut donc pas √™tre modifi√© dans nos capacit√©s, mais nous pouvons exclure le caract√®re 0xDF dont nous avons besoin de la condition. Pour ce faire, remplacez la </font><font style="vertical-align: inherit;">condition </font><font style="vertical-align: inherit;">existante (voir le texte de la fonction d' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©criture</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) par ce qui suit:</font></font><br>
<br>
<pre><code class="hljs lisp">if ((<span class="hljs-name"><span class="hljs-name">value&gt;=0x80</span></span>)<span class="hljs-symbol"><span class="hljs-symbol">&amp;&amp;</span></span>(<span class="hljs-name"><span class="hljs-name">value!=0xdf</span></span>))</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5. Enfin, le </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">z√©ro barr√©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sur cet √©cran n'est pas aussi frappant que sur les √©crans LCD graphiques. </font><font style="vertical-align: inherit;">N√©anmoins, dans la m√™me fonction d' </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©criture</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">j'ai introduit le remplacement du code z√©ro (0x30) par le code de la lettre ¬´O¬ª (0x4f). </font><font style="vertical-align: inherit;">Ceux qui le souhaitent peuvent retourner le z√©ro barr√© en supprimant ou en commentant simplement la ligne de remplacement (ligne 308 du fichier </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LiquidCrystalRus_OLED.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> modifi√© </font><font style="vertical-align: inherit;">). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La biblioth√®que mise √† jour peut √™tre t√©l√©charg√©e √† partir du lien √† la fin de l'article.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connexion</font></font></h3> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, tout semble √™tre modifi√©, vous pouvez vous connecter. </font><font style="vertical-align: inherit;">La connexion de l'√©cran WEH001602BG (16 caract√®res, longueur d'√©cran 100 mm) √† l'Arduino est illustr√©e dans la figure suivante: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/a58/0b4/c91/a580b4c91cf235bbb5b698986b4fdcfc.png" width="600" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les broches Arduino auxquelles les broches d'affichage RS, E, DB4-DB7 sont connect√©es doivent √™tre indiqu√©es lors de l'initialisation de l'affichage:</font></font><br>
<br>
<pre><code class="hljs cs"><span class="hljs-comment"><span class="hljs-comment">// RS, E, DB4, DB5, DB6, DB7</span></span>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OLED1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span></span><span class="hljs-function">)</span></span>;</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous le souhaitez, vous pouvez connecter deux ou plusieurs √©crans dans n'importe quelle option d'interface (huit ou quatre fils). Dans ce cas, les lignes de donn√©es et RS peuvent √™tre partag√©es. Le choix entre les √©crans dans ce cas se fait via la borne E, qui pour diff√©rents √©crans est connect√©e √† diff√©rentes bornes Arduino (les lignes de connexion du deuxi√®me √©cran sont repr√©sent√©es en gris sur le sch√©ma, la borne E du deuxi√®me √©cran est ici connect√©e √† la broche 6 de l'Arduino). Bien s√ªr, dans ce cas, vous devez cr√©er deux copies de la biblioth√®que (par exemple, OLED1 et OLED2), dans lesquelles toutes les sorties sont les m√™mes, sauf pour E. De plus, les √©crans peuvent √™tre de diff√©rentes configurations et tailles (8x2, 16x2, 12x2, 12x4, etc. .). Cela s'applique √©galement aux √©crans LCD conventionnels du HD44780.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et pourquoi y a-t-il un relais de puissance? Le principal inconv√©nient du WS0010 est le manque de mat√©riel "rezet". Dans HD44780, le rezet int√©gr√© peut √™tre justifi√© - l'auteur n'a pas suffisamment d'exp√©rience avec les √©crans LCD pour le dire avec certitude. Mais Winstar, essayant de suivre la norme dans son d√©veloppement, ne pouvait clairement pas faire face √† cette t√¢che. Le red√©marrage du contr√¥leur sans couper l'alimentation entra√Æne l'apparition de toute turbidit√© sur l'√©cran, et vous ne pouvez vous en d√©barrasser qu'en jonglant avec la puissance de l'ensemble du circuit et en initialisant l'affichage √† partir de z√©ro.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De plus, l'affichage lors de la mise hors / sous tension peut perturber les lignes par endroits. Les gens affirment qu'une inclusion compl√®te sur 8 bits (au lieu de 4 bits) aide, mais cela a encore pire fonctionn√© pour moi. Ils insistent √©galement sur le fait que dans de "nouveaux lots" hypoth√©tiques, tout cela a d√©j√† √©t√© corrig√©, mais il est difficile de croire (de quel type de "nouveaux" lots parlons-nous lorsque Winstar a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publi√© des</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©crans OLED </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">depuis 2008</font></a><font style="vertical-align: inherit;"> , et j'avais des √©crans de 13 et 14 ans lib√©ration?).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Relayer et r√©gler pour r√©initialiser artificiellement l'affichage lors du red√©marrage de l'Arduino sans couper l'alimentation. Cela √©limine de mani√®re fiable les d√©chets sur l'√©cran. L'alimentation du ou des √©crans est mise sous tension s√©par√©ment via ce relais, qui est allum√© √† partir de la broche Arduino libre (dans ce cas, la broche 4) au d√©but de la proc√©dure de configuration, lorsque le contr√¥leur fonctionne d√©j√† de mani√®re stable. Et avant d'activer le relais, il est agr√©able de donner un d√©lai suppl√©mentaire de 1000 ms (voir croquis ci-dessous). Le relais indiqu√© EDR202A05 est un relais reed, le courant d'enroulement est de 10 mA, il est donc contr√¥l√© silencieusement √† partir de la sortie Arduino.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quant √† la confusion entre les lignes une fois allum√©es, en plus des changements ci-dessus dans la proc√©dure d'initialisation, cet effet lib√®re parfaitement la puissance de tout le circuit d'une source externe suffisamment puissante (au moins 1-2 A) avec une tension stable sous charge d'au moins 7,5 volt. </font><font style="vertical-align: inherit;">Cette d√©pendance √† la nutrition est, √©videmment, une source de divergences dans de nombreuses publications, o√π de nombreux auteurs affirment que tout fonctionne bien pour eux. </font><font style="vertical-align: inherit;">Dans ce cas, l'√©cran (ou les √©crans) peut √™tre connect√© via le stabilisateur interne Arduino (broche 5V de la carte), ou via un stabilisateur s√©par√©, mais l'essentiel est que la tension d'entr√©e du stabilisateur doit √™tre suffisamment stable quelle que soit la surtension au moment de la mise sous tension.</font></font><br>
 <br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√©rifier</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour v√©rifier, j'ai envoy√© un croquis de d√©monstration, </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proba_Rus_Liquid_Crystal_OLED</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , simulant un affichage de l'horloge du calendrier avec un capteur de temp√©rature externe:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exemple d'affichage WEH1602</font></font></b><div class="spoiler_text"><pre><code class="hljs cpp"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LiquidCrystalRus_OLED.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// initialize the library with the numbers of the interface pins</span></span>
<span class="hljs-comment"><span class="hljs-comment">// RS, E, DB4, DB5, DB6, DB7</span></span>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OLED1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">3</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">5</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">7</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">8</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">9</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>;
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> RelayPin 4 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// 4 -  </span></span></span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
delay (<span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
pinMode(RelayPin, OUTPUT);<font></font>
digitalWrite(RelayPin, HIGH); <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
delay (<span class="hljs-number"><span class="hljs-number">500</span></span>);<font></font>
  OLED1.begin(<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">//16  2 </span></span><font></font>
  OLED1.clear();<font></font>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ,  </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"-22,3\337C"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//10  </span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">11</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// , 11 </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"10:22"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
  OLED1.print(<span class="hljs-string"><span class="hljs-string">"16.01.17 "</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 16  </span></span>
  OLED1.setCursor(<span class="hljs-number"><span class="hljs-number">13</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// , 13  ":"</span></span>
  OLED1.blink(); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
   delay(<span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{
<span class="hljs-comment"><span class="hljs-comment">/*        
        13,0 
    blink
*/</span></span><font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tous les changements caract√©ristiques de la biblioth√®que mentionn√©s ci-dessus sont appliqu√©s ici. </font><font style="vertical-align: inherit;">Le programme montre √©galement comment faire clignoter le c√¥lon en heures: minutes en utilisant la fonction </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blink ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Notez qu'une nouvelle sortie dans la m√™me position d√©truit le clignotement de familiarit√©, et lors de la mise √† jour, vous devez la reprendre √† nouveau, apr√®s avoir pr√©c√©demment plac√© le curseur invisible √† la m√™me position 13 sur la ligne z√©ro. </font><font style="vertical-align: inherit;">Avec une v√©ritable mise √† jour de l'horloge, il peut √™tre plus facile de ne mettre √† jour que les nombres aux positions 11-12 et 14-15, en laissant intact le c√¥lon clignotant. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les r√©sultats de la sortie de l'exemple sont montr√©s sur la photo:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/4e1/a88/249/4e1a8824925e055d968ab80e68f52229.jpg" width="500" alt="image"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il convient de noter que la photo ne transmet pas la lueur de l'√©cran OLED vert (dans ce cas). En fait, c'est une couleur vert fonc√©, avec une longueur d'onde plus courte que les 568 nm habituels dans les √©crans LED (sept segments ou matrice). Pourquoi ces derniers dans le contexte de l'OLED semblent-ils "fan√©s" et leur application combin√©e est difficile. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le WS0010 a un mode graphique et les √©crans OLED graphiques Winstar (tels que WEG010016) ont √©galement ce contr√¥leur. Quelqu'un a remarqu√© qu'ils avaient m√™me la m√™me matrice. √Ä mon avis, essayer d'appliquer un mode graphique sur un affichage de ligne de texte est plut√¥t inutile: l'affichage de ligne a des espaces sombres d√©finis par le mat√©riel entre les caract√®res et les lignes qui rendent l'image extr√™mement inesth√©tique (voir de </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nombreux exemples de</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> telles tentatives).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une derni√®re remarque: sur la durabilit√© des OLED Winstar. </font><font style="vertical-align: inherit;">Dans les fiches techniques, le temps est indiqu√© 100 000 heures, soit 11 ans. </font><font style="vertical-align: inherit;">N√©anmoins, l'un des affichages de la 13e ann√©e de lib√©ration (lueur jaune) √† l'instant pr√©sent (hiver du 16e) a fortement perdu en moi la luminosit√©. </font><font style="vertical-align: inherit;">C'est dr√¥le que le reste de la m√™me f√™te (verte) et plus tard (jaune et verte de 14 ans) ne montre aucun signe de mort. </font><font style="vertical-align: inherit;">Par cons√©quent, avec certitude, je ne pr√©tends rien dire, mais juste au cas o√π, je vous conseille de ne pas souder les √©crans dans la carte, mais de les installer sur les connecteurs, de sorte que dans le cas o√π ils pourraient √™tre remplac√©s sans probl√®me. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez t√©l√©charger l'archive avec une biblioth√®que gratuite et un exemple </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d'ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
UPD: il y avait une solution au probl√®me d'un d√©marrage stable sans manipuler la puissance: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://geektimes.ru/post/287234/</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr400833/">https://habr.com/ru/post/fr400833/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr400823/index.html">Attaques sur la grille: le saboteur le plus dangereux est l'√©cureuil</a></li>
<li><a href="../fr400825/index.html">Google est de nouveau accus√© de promouvoir ses produits dans son propre moteur de recherche</a></li>
<li><a href="../fr400827/index.html">ASUS Tinker Board: un autre concurrent de RPi</a></li>
<li><a href="../fr400829/index.html">Mythe √©ternel: pourquoi les patients appellent le temps la cause des douleurs articulaires</a></li>
<li><a href="../fr400831/index.html">Quelque chose n'a pas de chance pour les simples fus√©es ultra-l√©g√®res</a></li>
<li><a href="../fr400835/index.html">R√©action inattendue: la Croix-Rouge doit retirer son symbolisme du jeu Prison Architect</a></li>
<li><a href="../fr400837/index.html">Le c√¥ne de photons de Mach a √©t√© film√© pour la premi√®re fois. Le cerveau est √† c√¥t√©</a></li>
<li><a href="../fr400839/index.html">Wi-Fi synchrone: l'Alliance se pr√©pare √† certifier la technologie TimeSync</a></li>
<li><a href="../fr400841/index.html">Oui, pour que vous viviez avec 80 Go dans votre t√™te! Comment Hollywood transforme la technologie en moquerie</a></li>
<li><a href="../fr400843/index.html">Demandez √† Ethan: Quelle √©tait la taille de l'Univers nouveau-n√©?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>