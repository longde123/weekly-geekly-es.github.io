<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßö ü§πüèΩ üß¶ Erstellen Sie ein privates Netzwerk mit Ethereum Geth in Docker-Containern üëåüèª ü§¥üèø üë®‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn Sie ein privates Ethereum-Netzwerk basierend auf Geth bereitstellen m√ºssen, k√∂nnen Sie dazu beispielsweise Netzwerkknoten auf physischen Servern ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen Sie ein privates Netzwerk mit Ethereum Geth in Docker-Containern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481052/"><img src="https://habrastorage.org/webt/bg/f3/as/bgf3asaindlkt8bxyfvzbrkwjl4.jpeg"><br><br>  Wenn Sie ein privates Ethereum-Netzwerk basierend auf Geth bereitstellen m√ºssen, k√∂nnen Sie dazu beispielsweise Netzwerkknoten auf physischen Servern oder virtuellen Maschinen erstellen.  Es ist jedoch viel einfacher, Geth-Container aus dem Docker-Hub-Repository zu verwenden.  In diesem Fall k√∂nnen Sie ein ganzes Netzwerk von Knoten sogar auf einer virtuellen Maschine oder auf einem physischen Server installieren. <br><br>  In diesem Artikel erfahren Sie, wie Sie Docker auf einem Server installieren, auf dem Debian 9 (virtuell oder physisch) ausgef√ºhrt wird, wie Sie mit Geth mehrere Container erstellen und in ein privates Netzwerk integrieren.  Wir werden ein Beispielskript f√ºr Node.js geben, das auf Geth-Knoten zugreift, die in Containern arbeiten. <br><a name="habracut"></a><br><h2>  Installieren Sie Docker </h2><br>  Die Installation von Docker wird auf der offiziellen Website beschrieben.  F√ºr Debian 9 und 10 finden Sie detaillierte Anweisungen unter <a href="https://docs.docker.com/install/linux/docker-ce/debian/" rel="nofollow">https://docs.docker.com/install/linux/docker-ce/debian/</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Installieren Sie Docker</b> <div class="spoiler_text"> Aktualisieren Sie zun√§chst die Pakete: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get update</span></span></code> </pre> <br>  Installieren Sie als N√§chstes die erforderlichen Pakete mit dem folgenden Befehl: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common</span></span></code> </pre> <br>  F√ºgen Sie den offiziellen GPG-Schl√ºssel hinzu: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -</span></span></code> </pre> <br>  Stellen Sie sicher, dass Sie den Schl√ºssel mit dem Fingerabdruck 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 erhalten: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-key fingerprint 0EBFCD88 pub 4096R/0EBFCD88 2017-02-22 Key fingerprint = 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 uid Docker Release (CE deb) docker@docker.com sub 4096R/F273FCD8 2017-02-22</span></span></code> </pre><br>  F√ºgen Sie ein stabiles Docker-Repository hinzu: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/debian $(lsb_release -cs) stable"</span></span></code> </pre><br>  Aktualisieren Sie die Pakete und installieren Sie Docker: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get update # apt-get install docker-ce docker-ce-cli containerd.io</span></span></code> </pre> <br>  Jetzt muss nur noch √ºberpr√ºft werden, ob alles richtig gemacht wurde.  F√ºhren Sie dazu das (Image) Hallo-Welt-Image aus: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker run hello-world</span></span></code> </pre> <br>  Dieser Befehl l√§dt das gew√ºnschte Image herunter und f√ºhrt es zur Ausf√ºhrung aus.  Wie zu erwarten, wird auf der Konsole die Meldung "Hallo von Docker!" Angezeigt. <br><br>  Wie Sie sehen, nichts kompliziertes!  Jetzt k√∂nnen Sie ein privates Geth-Netzwerk mit Knoten erstellen, die in Containern ausgef√ºhrt werden. <br></div></div><br><h2>  Erstellen Sie Benutzer, Verzeichnisse und Dateien </h2><br>  Erstellen Sie ein Buch auf dem Server des Benutzers und in den folgenden Unterverzeichnissen in seinem Basisverzeichnis: <br><br><pre> <code class="plaintext hljs">/home/book/dock-test /home/book/dock-test/distr</code> </pre><br>  Als n√§chstes erstellen Sie im Verzeichnis / home / book / dock-test eine Docker-Datei: <br><br><div class="spoiler">  <b class="spoiler_title">Listing 1. Datei / home / book / dock-test / Dockerfile</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">FROM ubuntu:16.04 LABEL version="1.0" LABEL maintainer="alexandre@frolov.pp.ru" ENV DEBIAN_FRONTEND=noninteractive RUN apt-get update &amp;&amp; apt-get install --yes software-properties-common RUN add-apt-repository ppa:ethereum/ethereum RUN apt-get update &amp;&amp; apt-get install --yes geth RUN adduser --disabled-login --gecos "" eth_book COPY distr /home/eth_book/distr RUN chown -R eth_book:eth_book /home/eth_book/distr USER eth_book WORKDIR /home/eth_book RUN geth --nousb init distr/genesis.json ENTRYPOINT bash</code> </pre><br></div></div><br>  Diese Datei wird beim Erstellen von Docker-Containern verwendet. <br><br>  Sie m√ºssen auch die Datei /home/book/dock-test/distr/genesis.json erstellen, die zum Initialisieren der Ethereum-Netzwerkknoten erforderlich ist: <br><br><div class="spoiler">  <b class="spoiler_title">Listing 2. Datei /home/book/dock-test/distr/genesis.json</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">{ "config": { "chainId": 98760, "homesteadBlock": 0, "eip150Block": 0, "eip155Block": 0, "eip158Block": 0 }, "difficulty": "10", "gasLimit": "5100000", "alloc": {} }</code> </pre> <br></div></div><br>  Hier setzen wir die Kennung unseres privaten Netzwerks auf 98760. Um das Mining zu vereinfachen, haben wir im Schwierigkeitsgrad den Wert 10 angegeben, damit wir auf virtuellen Maschinen mit relativ wenig Arbeitsspeicher (z. B. 4 GB) arbeiten k√∂nnen. <br><br><h2>  Erstellen Sie ein Netzwerk und Container </h2><br>  Damit unsere Knoten Daten miteinander austauschen k√∂nnen, erstellen wir ein Netzwerk zwischen Containern: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker network create PRIVATENET</span></span></code> </pre> <br>  Als n√§chstes m√ºssen Sie das aktuelle Verzeichnis / home / book / dock-test erstellen, in dem sich die Docker-Datei befindet.  Erstellen Sie dann die erforderliche Anzahl von Containern, z. B. drei: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker build -t node01 . # docker build -t node02 . # docker build -t node03 .</span></span></code> </pre> <br>  Das Erstellen des ersten Containers dauert relativ lange, weil  Sie m√ºssen die erforderlichen Bilder herunterladen.  Die folgenden Container werden jedoch fast augenblicklich erstellt - verglichen mit der Geschwindigkeit, mit der virtuelle Maschinen erstellt werden, selbst durch das Klonen. <br><br>  √ñffnen Sie nun die vier Konsolenfenster.  In drei F√§llen werden wir mit Containern arbeiten, und im vierten Fall erhalten wir die Daten, die wir √ºber Container und das Netzwerk ben√∂tigen. <br><br>  Geben Sie im ersten Konsolenfenster den folgenden Befehl ein: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker run --rm -it -p 8545:8545 --net=PRIVATENET node01</span></span></code> </pre> <br>  Sie sehen eine Eingabeaufforderung wie: <br><br><pre> <code class="bash hljs">eth_book@304bf4f09063:~$</code> </pre> <br>  Geben Sie im zweiten und dritten Konsolenfenster die folgenden Befehle ein: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker run --rm -it -p 8546:8546 --net=PRIVATENET node02 # docker run --rm -it -p 8547:8547 --net=PRIVATENET node03</span></span></code> </pre><br><h2>  Erstellen von privaten Ethereum-Netzwerkknoten und -Konten </h2><br>  Im Moment haben wir drei Container mit Geth.  Erstellen wir in jedem von ihnen den Knoten unseres privaten Ethereum-Netzwerks und -Kontos. <br><br>  Geben Sie den Befehl in den ersten drei Konsolenfenstern ein: <br><br><pre> <code class="bash hljs">$ geth account new</code> </pre> <br>  Sie m√ºssen ein Passwort eingeben.  Verwenden Sie zum Testen der Einfachheit halber auf jedem Knoten dasselbe Kennwort, notieren Sie es sich jedoch irgendwo.  Wenn Sie das Kennwort vergessen, funktioniert die Wiederherstellung in keiner Weise. <br><br>  Nach dem Erstellen der Konten in der Konsole werden √∂ffentliche Schl√ºsseladressen angezeigt, die diesen √§hnlich sind: <br><br><pre> <code class="plaintext hljs">Public address of the key: 0xc5Df10a76Bb559332c385F8cA789C0F37dD77A54 Public address of the key: 0x0C976006a5762779bA36AC590D1D8Ebac1Ca2981 Public address of the key: 0xaB627feab4e962222a3333F3b09182dF68bB9422</code> </pre><br>  Speichern Sie die Adressen (Sie werden andere haben) als  Wir brauchen sie, um die Knoten laufen zu lassen. <br><br>  Jetzt m√ºssen Sie die Initialisierung der Knoten starten.  Dies geschieht mit dem Befehl: <br><br><pre> <code class="bash hljs">$ geth --nousb init distr/genesis.json</code> </pre> <br>  Geben Sie diesen Befehl in alle Konsolenfenster unserer Container ein.  Die Option --nousb deaktiviert die gesamte Kommunikation mit USB-Ger√§ten. <br><br><h2>  Geth-Knoten ausf√ºhren </h2><br>  √ñffnen Sie nun nacheinander die einzelnen Konsolenfenster und f√ºhren Sie dort Geth mit den folgenden Befehlen aus. <br><br>  Erstes Fenster: <br><br><pre> <code class="bash hljs">$ geth --identity=<span class="hljs-string"><span class="hljs-string">"Node01"</span></span> --etherbase <span class="hljs-string"><span class="hljs-string">"0xc5Df10a76Bb559332c385F8cA789C0F37dD77A54"</span></span> --mine --minerthreads 1 --verbosity 3 --networkid 98760 --rpc --rpcaddr 127.0.0.1 --nousb --rpcapi=<span class="hljs-string"><span class="hljs-string">"db,eth,net,web3,personal,web3"</span></span> console</code> </pre><br>  Zweites Fenster: <br><br><pre> <code class="bash hljs">$ geth --identity=<span class="hljs-string"><span class="hljs-string">"Node02"</span></span> --etherbase <span class="hljs-string"><span class="hljs-string">"0x0C976006a5762779bA36AC590D1D8Ebac1Ca2981"</span></span> --mine --minerthreads 1 --verbosity 3 --networkid 98760 --rpc --rpcaddr 127.0.0.1 --rpcport=8546 --nousb --rpcapi=<span class="hljs-string"><span class="hljs-string">"db,eth,net,web3,personal,web3"</span></span> console</code> </pre><br>  Drittes Fenster: <br><br><pre> <code class="bash hljs">$ geth --identity=<span class="hljs-string"><span class="hljs-string">"Node03"</span></span> --etherbase <span class="hljs-string"><span class="hljs-string">"0xaB627feab4e962222a3333F3b09182dF68bB9422"</span></span> --mine --minerthreads 1 --verbosity 3 --networkid 98760 --rpc --rpcaddr 127.0.0.1 --rpcport=8547 --nousb --rpcapi=<span class="hljs-string"><span class="hljs-string">"db,eth,net,web3,personal,web3"</span></span> console</code> </pre> <br>  In jedem der ge√∂ffneten Fenster werden Meldungen zur DAG-Generierung angezeigt: <br><br><pre> <code class="plaintext hljs">‚Ä¶ INFO [12-19|17:57:44.072] Generating DAG in progress epoch=0 percentage=34 elapsed=29.740s INFO [12-19|17:57:44.898] Generating DAG in progress epoch=0 percentage=35 elapsed=30.566s INFO [12-19|17:57:45.671] Generating DAG in progress epoch=0 percentage=36 elapsed=31.339s ‚Ä¶</code> </pre><br>  Warten Sie, bis die Generierung abgeschlossen ist.  Danach unterscheiden sich eth.hashrate und eth.blockNumber von 0: <br><br><pre> <code class="plaintext hljs">&gt; eth.hashrate 4 &gt; eth.blockNumber 2</code> </pre><br>  Sie k√∂nnen den aktuellen Kontostand wie folgt √ºberpr√ºfen: <br><br><pre> <code class="plaintext hljs">&gt; web3.fromWei( eth.getBalance(eth.coinbase) )</code> </pre> <br>  Beenden Sie Geth mit dem Befehl exit und starten Sie das Programm mit dem auf 1 gesetzten Parameter verbosity erneut, damit Sie sich nicht um Nachrichten √ºber das Erstellen neuer Bl√∂cke und anderer Nachrichten in Konsolenfenstern k√ºmmern. <br><br><h2>  Netzwerkknoten </h2><br>  Zun√§chst sehen wir uns die Liste der laufenden Container an.  Geben Sie im vierten Konsolenfenster den folgenden Befehl ein: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES fa70a5418618 node03 "/bin/sh -c bash" 2 hours ago Up 2 hours 0.0.0.0:8547-&gt;8547/tcp gifted_curran 49a028744b4b node02 "/bin/sh -c bash" 2 hours ago Up 2 hours 0.0.0.0:8546-&gt;8546/tcp reverent_wescoff 5a9ade2947eb node01 "/bin/sh -c bash" 2 hours ago Up 2 hours 0.0.0.0:8545-&gt;8545/tcp clever_ellis</span></span></code> </pre><br>  Hier werden f√ºr jeden Container die ID, der Bildname, der Containername und andere Informationen angezeigt. <br><br>  Um Container in ein Netzwerk einzubinden, ben√∂tigen Sie die IP-Adressen der Container in unserem privaten PRIVATENET-Netzwerk.  Sie k√∂nnen diese Adressen beispielsweise wie folgt √ºber die Container-ID abrufen: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># docker inspect 5a9ade2947eb | grep IPAddress "SecondaryIPAddresses": null, "IPAddress": "", "IPAddress": "172.21.0.2",</span></span></code> </pre> <br>  Sie k√∂nnen auch den Docker-Befehl network inspect PRIVATENET verwenden: <br><br><div class="spoiler">  <b class="spoiler_title">Docker-Netzwerk inspizieren PRIVATENET</b> <div class="spoiler_text"><pre> <code class="xml hljs">[ { "Name": "PRIVATENET", "Id": "576ec7edba5b4c228740deaf7fabb5e2ba003d310086153dd7f15e2c7de0c1b2", "Created": "2019-12-20T11:52:07.90695857+03:00", "Scope": "local", "Driver": "bridge", "EnableIPv6": false, "IPAM": { "Driver": "default", "Options": {}, "Config": [ { "Subnet": "172.21.0.0/16", "Gateway": "172.21.0.1" } ] }, "Internal": false, "Attachable": false, "Ingress": false, "ConfigFrom": { "Network": "" }, "ConfigOnly": false, "Containers": { "49a028744b4b6073f6dbca23e78625bc58fc0cdacadec7cded4bb0e888c7e37b": { "Name": "reverent_wescoff", "EndpointID": "11006b596b5a46df9bf9f95a9456784795d333a3e6901b15bd2db746fd4b5513", "MacAddress": "02:42:ac:15:00:03", "IPv4Address": "172.21.0.3/16", "IPv6Address": "" }, "5a9ade2947ebd8e55594ede9763aac71f5e6529c03e762ef723adb2c592c5ccd": { "Name": "clever_ellis", "EndpointID": "41ef69a0a93b5b1de495836028bac1742c303de92ffe42a0855ed32c93c28953", "MacAddress": "02:42:ac:15:00:02", "IPv4Address": "172.21.0.2/16", "IPv6Address": "" }, "fa70a54186185de01db3647e7333bf6c71250162fafefb78dbe9998e5ac93f34": { "Name": "gifted_curran", "EndpointID": "d368c032bc0886c27ad4895d1856e4f00cf1b25ce040f3b42393dbff778c18e5", "MacAddress": "02:42:ac:15:00:04", "IPv4Address": "172.21.0.4/16", "IPv6Address": "" } }, "Options": {}, "Labels": {} } ]</code> </pre></div></div><br>  Wenn wir die von diesen Befehlen empfangenen Daten vergleichen, erstellen wir eine Liste mit IP-Adressen f√ºr unsere Container: <br><br><pre> <code class="plaintext hljs">node01 - 172.21.0.2 node02 - 172.21.0.3 node03 - 172.21.0.4</code> </pre><br>  Nat√ºrlich haben Sie eine andere Liste, und wenn Sie die Container neu starten, k√∂nnen sich diese Adressen √§ndern. <br><br>  Starten Sie geth in allen Containern neu, nachdem Sie die Liste der Adressen erhalten haben, und geben Sie die Adresse Ihres Containers im Parameter --rpcaddr an.  Sie k√∂nnen nat√ºrlich die Adresse 0.0.0.0 einstellen, aber dies ist aus Sicherheitsgr√ºnden schlecht - jeder oder alles kann sich mit dem Knoten verbinden.  Es k√∂nnen zum Beispiel Bots sein, die versuchen, alle Gelder von diesen Knoten abzuheben und darauf warten, dass der Knoten entsperrt wird. <br><br>  Um die Knoten zusammenzuf√ºhren, m√ºssen Sie den Befehl admin.addPeer verwenden.  Als Parameter f√ºr diesen Befehl m√ºssen Sie die URL im Enode-Format √ºbergeben.  Rufen Sie diese URL f√ºr jeden Container mit dem Befehl admin.nodeInfo.enode ab: <br><br><pre> <code class="plaintext hljs">&gt; admin.nodeInfo.enode "enode://0a84e562c9b22e43269b7dca215cf2ed8c20bbf35da67bae8d5ee81b36d8bbb69e3ec704b9b6f7501059fe861843a836b2fbab641f36616cdd77365b1a522d5b@62.152.63.28:30303?discport=1350" "enode://ee49f69e25c068e006fec4a8d74370370b1d2be9715b86eddd99f97a3a5a9c692a265ab7d01fb36410d59c3f6e2b253a22f652ecbf1941eef0b3f1d30b19a535@62.152.63.28:30303?discport=1345" "enode://156d43648b47078439c7481e54f697bbf1c6b6e762029ba2969f1556ceb94e51ad03f8bd2bed35f466073165810600f52925d155f0fceef832ae86fc39a8c135@62.152.63.28:30303?discport=1348"</code> </pre><br>  Empfangene Adressen speichern. <br><br>  Um einen Knoten mit einem anderen zu verbinden, √∂ffnen Sie das Konsolenfenster des ersten Knotens und geben Sie dort den folgenden Befehl ein: <br><br><pre> <code class="plaintext hljs">&gt; admin.addPeer( "enode://0a84e562c9b22e43269b7dca215cf2ed8c20bbf35da67bae8d5ee81b36d8bbb69e3ec704b9b6f7501059fe861843a836b2fbab641f36616cdd77365b1a522d5b@172.21.0.3:30303")</code> </pre><br>  Hier haben wir die URL-Adresse √ºbergeben, in der die IP-Adresse des verbundenen Hosts angegeben ist.  Befolgen Sie das gleiche Verfahren auf anderen Netzwerkknoten. <br><br>  Verwenden Sie den Befehl admin.peers, um zu √ºberpr√ºfen, ob die Verbindung hergestellt wurde.  Wenn keine Verbindungen bestehen, gibt der Befehl ein leeres Ergebnis zur√ºck: <br><br><pre> <code class="xml hljs">&gt; admin.peers []</code> </pre><br>  In unserem Fall zeigt der Befehl, dass der erste Knoten mit der Adresse 172.21.0.2 mit den Knoten mit den Adressen 172.21.0.3 und 172.21.0.4 verbunden ist: <br><br><div class="spoiler">  <b class="spoiler_title">Zeigen Sie das Ergebnis an, wenn Verbindungen bestehen</b> <div class="spoiler_text"><pre> <code class="xml hljs">&gt; admin.peers [{ caps: ["eth/63", "eth/64"], enode: "enode://156d43648b47078439c7481e54f697bbf1c6b6e762029ba2969f1556ceb94e51ad03f8bd2bed35f466073165810600f52925d155f0fceef832ae86fc39a8c135@172.21.0.4:30303", id: "4dac1d10cb6ae8bfc1fdebd3f5334b24ee62ec38a50bc92c89104cfc3251b5fc", name: "Geth/Node03/v1.9.9-stable-01744997/linux-amd64/go1.13.4", network: { inbound: false, localAddress: "172.21.0.2:40652", remoteAddress: "172.21.0.4:30303", static: true, trusted: false }, protocols: { eth: { difficulty: 98414119, head: "0x6b31a5bb9cde06fab5a8cc1ae9b18bada30de0d1b76cb3286c1081e76dbf5b83", version: 64 } } }, { caps: ["eth/63", "eth/64"], enode: "enode://ee49f69e25c068e006fec4a8d74370370b1d2be9715b86eddd99f97a3a5a9c692a265ab7d01fb36410d59c3f6e2b253a22f652ecbf1941eef0b3f1d30b19a535@172.21.0.3:30303", id: "b74277d278c15317fa7f7fa492daca60492ea22053bfc53281dd0071eba1c16b", name: "Geth/Node02/v1.9.9-stable-01744997/linux-amd64/go1.13.4", network: { inbound: false, localAddress: "172.21.0.2:42576", remoteAddress: "172.21.0.3:30303", static: true, trusted: false }, protocols: { eth: { difficulty: 99041423, head: "0x0ec44735bbb425cb8db96103f52300dfaae1147ba0e03aa4892d041250ce4408", version: 64 } } }]</code> </pre></div></div><br>  Beachten Sie, dass der Befehl eth.blockNumber nach dem erfolgreichen Kombinieren und Synchronisieren der Knoten denselben Wert zur√ºckgibt, wenn er in einem unserer drei Container gestartet wird. <br><br>  Der Befehl web3.fromWei (eth.getBalance (eth.coinbase)) hingegen zeigt auf verschiedenen Knoten ein unterschiedliches Gleichgewicht, weil  Jeder Knoten hat ein eigenes Konto. <br><br><h2>  Arbeiten Sie mit Hosts mithilfe von Node.js </h2><br>  In Listing 3 haben wir ein einfaches Skript vorgestellt, in dem Node.js ausgef√ºhrt wird. Auf der Konsole wird eine Liste der Konten f√ºr den angegebenen Knoten und deren Saldo angezeigt: <br><br><div class="spoiler">  <b class="spoiler_title">Listing 3. Datei / home / book / list_accounts.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Web3 = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'web3'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> web3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Web3.providers.HttpProvider(<span class="hljs-string"><span class="hljs-string">"http://172.21.0.2:8545"</span></span>)); web3.eth.getAccounts() .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">accList</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> accList; }) .then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">accounts</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> balancePromeses = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; accounts.length; i++) { balancePromeses[i] = web3.eth.getBalance(accounts[i]); } <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all(balancePromeses).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">values</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; values.length; i++) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Account: '</span></span>, accounts[i], <span class="hljs-string"><span class="hljs-string">'balance: '</span></span>, values[i], <span class="hljs-string"><span class="hljs-string">'wei, '</span></span>, web3.utils.fromWei(values[i], <span class="hljs-string"><span class="hljs-string">'ether'</span></span>), <span class="hljs-string"><span class="hljs-string">'ether'</span></span>); } }); }) .catch(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(error); });</code> </pre> <br></div></div><br>  Sie k√∂nnen dieses Skript in einem separaten Fenster ausf√ºhren, z. B. im vierten Konsolenfenster: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># node list_accounts.js Account: 0x0C976006a5762779bA36AC590D1D8Ebac1Ca2981 balance: 3350000000000000000000 wei, 3350 ether</span></span></code> </pre><br><h2>  Was weiter </h2><br>  Das Thema der Softwareentwicklung f√ºr Kryptow√§hrungen im Allgemeinen und f√ºr Ethereum im Besonderen ist ziemlich faszinierend.  Wenn Sie nach dem Lesen dieses Artikels Fragen haben und mehr erfahren m√∂chten, lesen Sie mein Buch <a href="https://habr.com/ru/post/467347/">‚ÄûErstellen von Solidity-Smart-Vertr√§gen f√ºr die Ethereum-Blockchain.</a>  <a href="https://habr.com/ru/post/467347/">Practical Guide ‚Äú</a> , das im <a href="https://www.litres.ru/aleksandr-frolov-198/sozdanie-smart-kontraktov-solidity-dlya-blokcheyna-et/" rel="nofollow">Liters</a> Publishing House ver√∂ffentlicht wurde. <br><br>  M√∂glicherweise ben√∂tigen Sie auch einen guten <a href="https://habr.com/ru/company/flant/blog/336654/">Docker-Spickzettel</a> . <br><br>  F√ºr Kommentare und Erg√§nzungen zum Artikel und zum Buch w√§re ich dankbar! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481052/">https://habr.com/ru/post/de481052/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481036/index.html">30 Dienstprogramme f√ºr Firefox Developer Tools</a></li>
<li><a href="../de481038/index.html">Gest√§ndnis eines Design-S√ºchtigen. Wie wir das Spiel "IT Alchemy" in einem Monat gemacht haben</a></li>
<li><a href="../de481042/index.html">Der Geschmack von uns Django regt an und zieht an</a></li>
<li><a href="../de481044/index.html">Was f√ºr 2020 zu pr√§sentieren: Neujahrsf√ºhrer Madrobots</a></li>
<li><a href="../de481048/index.html">Erkennung von digitalen Schaltkreisen. Verallgemeinertes C-Element</a></li>
<li><a href="../de481054/index.html">YouTrack 2019.3: aktualisierte Aufgabenliste und vieles mehr</a></li>
<li><a href="../de481056/index.html">Die Haupttechnologien des Jahrzehnts laut Habr</a></li>
<li><a href="../de481058/index.html">Auf die Frage nach dem Merkw√ºrdigen (wieder) und der Wahl der Transistoren</a></li>
<li><a href="../de481066/index.html">Verwenden des Fischauges auf dem Raspberry Pi 3: Einf√ºhrung vorgefertigter DL-Modelle f√ºr die Bildverarbeitung</a></li>
<li><a href="../de481070/index.html">Rust 1.40.0 Release: # [nicht ersch√∂pfend], Makro-Verbesserungen und andere Verbesserungen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>