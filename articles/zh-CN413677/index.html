<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🤝‍👩🏻 🌐 🥙 ROS在EduMIP自平衡机器人上启动 🖐🏼 🐨 📏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="引言 
 本出版物提供了有关在EduMIP移动机器人上安装和运行机器人操作系统（ROS）的说明。 EduMiP是围绕BeagleBone Black构建的自平衡机器人，带有机载微处理器和James Strawson和Thomas Bewley教授与UCSD协调机器人实验室及其工作人员合作开发的Bea...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ROS在EduMIP自平衡机器人上启动</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413677/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/8h/nj/tt/8hnjttadeo1bqubidyjqbs__zta.jpeg" width="300"></div><h4> 引言 </h4><br> 本出版物提供了有关在EduMIP移动机器人上安装和运行机器人操作系统（ROS）的说明。  EduMiP是围绕BeagleBone Black构建的自平衡机器人，带有机载微处理器和James Strawson和Thomas Bewley教授与UCSD协调机器人实验室及其工作人员合作开发的Beaglebone Black机器人披风。  BeagleBone Blue，最近于2017年中期发布，将BeagleBone Black和Robotics Cape的功能整合在一块板上。  Bewley教授在其MAE144课程中使用了该机器人-UCSD机械与航空航天工程系的嵌入式控制与机器人。 <br> 我在评论中回答问题。 <br><a name="habracut"></a><br><h4> 组件清单 </h4><br> 请注意，您需要一个Baglebone Blue或Beaglebone Black和Robotics Cape的每个。 <br><br><ul><li>  <b>Beaglebone Blue（BBBL）</b> ：最近于2017年中发布，在单板计算机上结合了BeagleBone Black和Robotics Cape的功能。 <br><br><img src="https://habrastorage.org/webt/tj/1p/_z/tj1p_zumabntnzh4jqyoy4w3huy.png"></li><li>  <b>Beaglebone Black（BBB）</b> ：面向开发人员和业余爱好者的低成本社区支持平台，配备AM335x 1 GHz ARM Cortex处理器，512 MB DDR3 RAM，板上4 GB 8位emmc。 </li><li>  <b>Robotics Cape（BBB-RC）</b> ：Beaglebone Black Robotics Cape是Beaglebone Black的I / O板，它提供多个传感器和丰富的硬件支持，其中包括： <br><br><ul><li> 传感器： <br><br><ul><li>  9轴IMU </li><li> 气压计 </li></ul></li><li>  I / O： <br><br><ul><li>  4个二次编码器 </li><li>  4个H桥电机驱动器 </li><li>  8个伺服/ ESC输出 </li><li> 标准DSM RC无线电接口 </li><li>  I2C UART ADC SPI GPIO PWM </li><li> 锂聚合物电池充电控制器 </li></ul></li></ul></li></ul><br><ul><li>  <b>EduMIP套件</b> ：该套件包括直流电动机，齿轮，编码器，车轮，塑料零件，电线和紧固件。 <br><img src="https://habrastorage.org/webt/x2/4z/se/x24zseh1x6idjkg-ytpfd684w-c.jpeg"></li><li>  <b>微型SD卡</b> ：大小至少为8GB的微型SD卡。 </li><li>  <b>BeagleBone Black and Blue的Ubuntu 16.04 LTS图像</b> ：j图像由Robert Nelson，Jeff O'Brian提供。 该图像包含带有预装ROS的ROS Kinetic，例如带有基本ros EduMIP软件包和预装ros的ros catkin工作站。 这是两个Ubuntu映像，请确保使用正确的映像： <br><br><ul><li> 将此图像用于BragleBonbne Blue： <br><br>  2018_02_03_beaglebone_blue_16p04_Ubuntu_LTS_EduMIP_ROS.img.zip </li><li> 将此图像用于BeagleBone Black Wireless + Robotics Cape： <br><br>  2018_02_03_beaglebone_black_wireless_16p04_Ubuntu_LTS_EduMIP_ROS.img.zip </li></ul><br> 将8 GB的映像压缩为2.5 GB的zip文件。 您不需要解压缩ZIP文件。 该程序（Etcher）可以即时解压缩。 </li><li>  <b>USB记忆棒</b> ：对于机器人系统编程课程中的教程很有用。 罗技Gamepad F310是一款不错的廉价机型 </li></ul><br><h4>  EduMIP套件的组装和测试（机器人系统＃3编程课程的一部分） </h4><br> 如下构建和测试EduMIP。 小心点 温柔一点 <br><br>  1. <b>EduMIP构建</b> ：请按照<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>提供的分步EduMIP构建说明进行操作。 <br><br> 观看我的俄语视频： <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/3dvmGL0Sdj4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  2. <b>一些附加说明：</b> <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>提供其他文档<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">。</a> </li><li>  <b>如果您正在使用BEAGLEBONE BLACK + ROBOTIC CAPE，请不要混合电源+ 5V和+ 9V：</b> BBB的电源接口为+ 5V。  Robotics Cape具有用于+ 9V的相同Ballel电源连接器。 地狱 </li><li> 请勿将+ 9V电源直接插入BBB上的+ 5V连接器，结果BBB将失效。 </li><li>  <b>不使用机器人</b>时请<b>关闭电源：</b>不使用EduMIP或给电池充电时： <br><br> 从EduMIP断开12V充电电缆 <br> 运输机器人之前，请从机器人斗篷上断开电池的连接。 </li><li>  <b>请勿损坏电机和ENCODER</b>接头<b>：</b> Robotics用于编码器和电机的Cape接头非常小。 </li></ul><br><h4> 配置Beaglebone Black / Blue和EduMIP（ROS＃3课程分配的一部分） </h4><br> 如下配置要在EduMIP中使用的Beaglebone Blue。 <br><br>  1. <b>检查您的BeagleBone Blue / Black板：</b>在组装edumip之前，请测试您的beaglebone蓝板—它在4GB内部闪存驱动器中安装了Debian Jessie。 <br><br><ol><li> 请按照<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>的说明进行操作。 在Linux PC上安装udev规则。 仅使用此页面来了解如何保护LINUX PC上的UDEV规则，而忽略其他所有内容。 </li><li> 在Linux计算机上安装适当的udev规则后，它将通过usb0虚拟以太网适配器通过USB连接建立与BBB的以太网连接。 您的主机将位于IP地址192.167.7.1，BBB将位于192.168.7.2。 从主机到BB的SSH“ ssh debian@192.168.7.2”。  “ debian”的默认密码是“ temppwd”。 </li><li> 每当您完成使用BBBL的操作并准备将其关闭时，请勿仅将其关闭-运行“ sudo poweroff”命令以关闭Linux并关闭电路板的电源。 板上的所有指示灯熄灭后，断开USB电缆的连接是正常的。 </li></ol><br>  2. <b>在您的BBBL上安装并测试具有ROS和BBBL / EduMIP支持的8gb Ubuntu 16.04 LTS Linux映像</b> ：我们创建了一个具有ros dynamic和BBBL支持的8gb Ubuntu映像。 您的EduMIP套件有一块空白的32GB或64GB Micro-SD卡。 <br><br><ol><li> 下载：用于ARM支持BBBL和ROS的Ubuntu 16.04现成映像，请参见上面的说明，标题为“ beaglebone黑色和蓝色的Ubuntu 16.04 LTS映像”。 </li><li> 您无需解压缩存档的图像。 </li><li> 下载Etcher：使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">etcher.io</a>下载并在您的计算机上安装Etcher <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-io</a> -Etcher是用于将磁盘映像写入SD卡的程序。 </li><li> 将磁盘映像刻录到micro-SD卡。 </li><li> 小心插入Micro SD卡：将Micro SD卡插入Micro SD卡插槽和beaglebone。 请勿替换它；它只是安装时的温和提示。 </li><li> 下载吧！ 通过使用USB电缆将BBBL连接到计算机，从Micro-SD卡映像下载BBBL。 <br><ol><li> 如果Micro-SD卡包含启动映像，则BBBL将从其启动，而不是从其内置闪存驱动器启动。 </li><li> 在BBBL（“ ssh ubuntu@192.168.7.2”，密码为“ temppwd”）上进行SSH，并确保您实际上在32GB映像中工作。  df -h命令应显示至少2 GB的可用空间，而htop命令应显示1 GB的活动页面文件。 </li></ol></li></ol><br>  3. <b>EduMIP测试</b> ：通过以ubuntu用户身份使用密码“ temppwd”登录来检查EduMIP，如下所示： <br><br><ol><li>  <b>关于错误消息的注释</b> ：下载到我们使用的Ubuntu映像的roboticscape库的最新版本具有一些PRU错误，这些错误在调用roboticscape库以访问硬件时显示错误消息<b>“ ERROR：pru-rproc driver missing”</b> BBBL 我们可以忽略此警告，它将在以后的版本中修复。 运行诸如rc_balance，rc_test_encoders，edumip_balance_ros等程序时，期望看到这些警告之一。 <br><br> 这是此错误消息的示例： <br><br><pre><code class="hljs powershell">ubuntu@arm:~<span class="hljs-variable"><span class="hljs-variable">$</span></span> rc_test_imu ERROR: pru<span class="hljs-literal"><span class="hljs-literal">-rproc</span></span> driver missing <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> <span class="hljs-string"><span class="hljs-string">'test_imu -h'</span></span> to see other options Accel XYZ(m/s^<span class="hljs-number"><span class="hljs-number">2</span></span>) | Gyro XYZ (rad/s) | Mag Field XYZ(uT) | Temp (C) <span class="hljs-number"><span class="hljs-number">0.23</span></span> <span class="hljs-literal"><span class="hljs-literal">-3</span></span>.<span class="hljs-number"><span class="hljs-number">06</span></span> <span class="hljs-number"><span class="hljs-number">9.72</span></span> | <span class="hljs-number"><span class="hljs-number">0.0</span></span> <span class="hljs-literal"><span class="hljs-literal">-0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-literal"><span class="hljs-literal">-0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> | <span class="hljs-number"><span class="hljs-number">22.9</span></span> <span class="hljs-literal"><span class="hljs-literal">-4</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-literal"><span class="hljs-literal">-54</span></span>.<span class="hljs-number"><span class="hljs-number">9</span></span> | <span class="hljs-number"><span class="hljs-number">37.9</span></span></code> </pre> </li><li>  <b>编码器测试</b> ：运行rc_test_encoders命令并稍微转动轮子-您将看到E2和E3编码器显示了转数的变化。 </li><li>  <b>发动机测试</b> ：运行命令“ rc_test_motors-D 0.1”-抬起EduMIP时，两个车轮应朝相反的方向旋转。 </li><li>  <b>陀螺仪校准</b> ：将EduMIP静止放置在桌子上，然后运行rc_calibrate_gyro命令并按照说明进行操作。 该校准程序将陀螺仪校准写入/var/lib/roboticscape/gyro.cal </li><li>  <b>陀螺仪测试</b> ：运行命令“ rc_test_imu”，并确保数据“ Gyro XYZ（rad / s）”等于零（或几乎为零）。 </li><li>  <b>磁力计的校准</b> ：运行命令“ rc_calibrate_mag”并按照说明进行操作-将要求您将EduMIP握在手中，并沿所有方向旋转（“旋转”）。 该校准程序写入磁力计校准文件/var/lib/roboticscape/mag.cal </li><li>  <b>磁力计测试</b> ：运行rc_test_imu命令并验证XY Z磁场（uT）数据是否为非零。 在巴尔的摩和伍兹霍尔，地球磁场矢量的大小约为52uT，但是不用担心磁力计似乎有点偏离。 <br><br> 您可以通过在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此网页上</a>输入邮政编码来查找巴尔的摩的纬度，经度和磁场强度。 </li><li>  <b>EduMIP平衡测试</b> ：运行“ rc_balance”命令，然后启动机器人。 您的机器人必须保持平衡。 <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Vp46u8LSqu4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://www.youtube.com/embed/zPuyzaUQ4kU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></li></ol><br>  4. <b>BBBL上的ROS测试</b> <br><br><ol><li> 检查.bashrc文件。 最后，该文件应按以下顺序具有以下命令： <br> 首先，使用命令“ source /opt/ros/kinetic/setup.bash”配置ROS环境变量。 <br> 其次，使用命令“ source〜/ catkin_ws / devel / setup.bash”将本地catkin工作区添加到ROS环境中（这称为“工作区覆盖”）。 </li><li> 运行命令“ source .bashrc”以配置ROS环境变量。 使用printenv / grep ROS命令将其签出。 </li><li> 确保您可以运行roscore和其他ROS实用程序。 </li><li> 确保可以在BBBL ROS工作区中运行“ catkin_make”。 </li><li> 图片已验证 </li></ol><br>  5. <b>更新和测试ROS EduMip余额计划</b> ： <br><br><ol><li> 如果尚未这样做，请在机器人仍在桌子上时使用“ rc_calibrate_gyro”命令校准EduMIP陀螺仪。 </li><li> 使用用户名“ ubuntu”和密码“ temppwd”登录到EduMIP。 </li><li> 在EduMIP上配置Wi-Fi：配置Wi-Fi，以便您可以从我们的git存储库中克隆ROS数据包。 </li><li> 如果您如上所述安装了预装的Ubuntu 16.04映像，则您将在catkin worskace的源目录中拥有“ edumip_msgs”和“ edumip_ros_balance”软件包，即〜/ catkin_ws / src / edumip_msgs和〜/ catkin_ws / src / edumip_balance_ros。 使用命令“ cd〜/ catkin_ws / src / edumip_balance_ros”和“ git pull” <b>更新</b> edumip_balance_ros <b>软件包</b> ，以下载该软件包的最新代码。 如果收到错误消息“错误：您对以下文件的本地更改将被合并覆盖： <br><br>  src / edumip_balance_ros.cpp请先提交您的更改或将其隐藏起来，然后再合并。”，然后删除干扰的src / edumip_balance_ros.cpp文件，并再次进行“ git pull”。 </li><li> 如果您的<b>edumip_msgs</b>和<b>edumip_balance_ros</b>尚未位于EduMIP的catkin工作区的<b>src</b>目录中（应该为<b>〜/ catkin_ws / src</b> ），则将这两个ROS软件包克隆到<b>〜/ catkin_ws / src</b> ）： <br><ol><li>  <b>edumip_msg</b>包为<b>EduMIP</b>定义了自定义消息类型edumip_msf / EduMipState。 该软件包不包含源代码，仅包含消息和通信CMakeLists.txt和package.xml的定义。 如果您的计算机需要访问此类消息，则还必须在计算机上克隆项目。 该软件包独立于体系结构。  git可以从此<a href="">公共URL</a>克隆此软件包。 </li><li>  <b>edumip_balance_ros</b>软件包包含edumip_ros_node C ++节点ROS.cpp，它是ROS标准化程序rc_balance的版本。 我们为您提供的linux映像已经安装了Robotics Cape和ROS驱动程序。  git可以从此<a href="">公共URL</a>克隆此软件包。 </li></ol></li><li> 使用catkin工作区主目录中的catkin_make命令创建这两个软件包。 </li><li> 验证ROS现在使用以下命令了解edumip_msgs软件包中定义的用户消息：rosmsg show edumip_msgs / EduMipState </li><li> 在EduMIP上打开两个远程ssh会话： <br><br> 首先，在第一个shell中运行“ roslaunch edumip_balance_ros edumip_balance_ros” <br> 其次，在第二个shell中，请参阅主题ros和print主题/ edumip / state。 <br> 放好机器人，它必须保持平衡。 </li></ol><br>  6. <b>正确关闭BBBL</b> ：完成并准备关闭BBBL时，不要只是将其关闭-运行“ sudo poweroff”命令以关闭Linux并关闭电路板的电源。 板上所有指示灯熄灭后，您可以断开USB电缆的连接。 <br><br><h4> 有关BBB和BBBL的一些有用的Linux注释 </h4><br><ul><li>  emacs和nano编辑器已经安装在本教程提供的BBB linux映像上。 </li><li> 缺省情况下，未安装linux实用程序“ locate”，但您可以使用“ sudo apt-get installlocate”进行安装，并使用命令“ sudo Updatedb”初始化locate数据库（需要几分钟）。 </li><li>  NTP时间服务器已安装在本课程提供的BBB linux映像上，但是仅当BBB具有到Internet的路由时（例如，当您打开WIFi时），它将被同步。 默认情况下，与计算机的网络连接USB不会路由到Internet。 您可以使用ntpq-p命令检查ntp的状态。 </li></ul><br><h4> 关于使用Ununtu 16.04和ROS设置BeagleBone Black（BBB）和beaglebone Blue（BBBL）的说明 </h4><br>  （它们在此处列出仅供参考，不应成为完成任务3所必需的步骤）。 <br><br>  <b>通过USB将PC连接到BBB</b> <br><br><ul><li> 请按照<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>的说明进行操作<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">。</a> </li><li> 在主机上安装适当的驱动程序或udev规则后，它将通过usb0虚拟以太网适配器通过USB连接与BBB建立以太网连接。 您的主机将位于IP地址192.167.7.1，BBB将为192.168.7.2。 从主机到BBB的SSH“ ssh ubuntu@192.168.7.2”。  ubuntu的默认密码是temppwd。 </li></ul><br>  <b>如何与DNS建立以太网连接以及到外部Internet的路由</b> <br>  WiFi（BBBL，BBB Wireless，BBB Classic + USB WiFi适配器）： <br><br><ul><li>  <b>轻描淡写地使用</b> <b>WiFi</b> ：遵循/ etc / network / interfaces文件的注释中列出的<b>connmanctl</b>说明。 要阅读注释，请使用命令cat / etc / network / interfaces。 </li><li>  <b>注意</b> ： <b>connmanctl</b>不支持诸如<b>Hopkins之类的</b>公司网络，但它支持WPA / WPA2网络。 </li><li>  <b>注意</b> ：加载BBBL WiFi适配器时并不总是正确的。 如果在ifconfig命令的输出中没有看到“ wlan0”，请尝试使用“ ifconfig wlan0 up”命令将BBBL手动启用为wlan0接口。 然后，您应该在ifconfig命令的输出中看到wlan0。 </li><li>  <b>Ifconfig</b> ：使用ifconfig命令查看计算机上所有已配置的网络接口（LAN，WiFi，USB等）。 </li><li>  <b>Iwconfig</b> ：使用“ iwconfig”命令查看计算机上所有已配置的WiFi网络接口。 </li><li>  <b>我是谁啊</b> 确定Linux机器IP地址的最简单方法是登录并使用ifconfig命令。 </li><li>  <b>Wifi土拨鼠日！</b> 不幸的是，BBBL当前不记得WiFi设置。 </li></ul><br> 首选的WiFi连接应类似于BBBL，并且您的计算机已连接到同一Wi-Fi接入点，因此您可以从计算机中进入BBBL，并且BBBL可以访问git repos等。 <br><br> 您还可以通过将计算机连接到BeagleBone-XXXX Wi-Fi网络（其中XXXX是BBBL所独有的）来将其直接用作BBBL的Wi-Fi接入点。  WiFi密码为“ BeagleBone”，这是一个简单的连接，但是BBBL和您的计算机都无法访问git repos等。连接后，您的计算机的IP地址为192.168.XXX.XXX BBBL IP地址将为192.168.XXX.1 <br><br>  <b>更新您的BBBL Ubuntu发行版</b> <br><br> 在BBB上，运行Linux sudo apt update和sudo apt dist-upgrade Linux命令 <br><br>  <b>在BBBL上安装Robotics Cape软件</b> <br><br><ul><li> 在上述针对BBBL的预配置Ubuntu映像中，已经提供了Robotics Cape / BBBL支持，您无需重新安装它。 </li><li> 在ARM上的Ubuntu 16.04下进行二进制安装：“ sudo apt-get install roboticscape” </li><li> 从源安装 </li></ul><br> 您想要在BBB上安装机器人斗篷源代码和示例代码的副本。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在这里</a>可用。 在主目录中安装副本： <br><br>  “镉〜” <br>  “ Git克隆<a href="">github.com/StrawsonDesign/Robotics_Cape_Installer.git</a> ” <br><br> 现在，您可以查看机械手斗篷的源代码，并按照说明编译和安装机械手斗篷库和示例程序。 <br><br>  <b>为EduMIP安装基本的ROS软件包</b> <br><br> 将这两个git仓库克隆到〜/ catkin_ws / src目录中： <br><br><ul><li>  <a href="">git.lcsr.jhu.edu/lwhitco1/edumip_msgs.git</a> </li><li>  <a href="">git.lcsr.jhu.edu/lwhitco1/edumip_balance_ros.git</a> </li></ul><br>  cd到〜/ catkin_ws并收集“ catkin_make”包。 <br><br> 要运行edumip_balance_ros节点，该程序需要root特权。 也许最简单的方法是在编译后，使用以下两个命令（按此顺序）更改已编译二进制文件的权限和所有权： <br><br><ul><li>  sudo chown root：根〜/ catkin_ws / devel / lib / edumip_balance_ros </li><li> 须藤chmod u + s〜/ catkin_ws / devel / lib / edumip_balance_ros </li></ul><br> 运行ROS节点edumip_balance_ros“ <b>roslaunch edumip_balance_ros edumip_balance_ros.launch</b> ”。 机器人将进行平衡，接收来自主题/ edumip / cmd命令的扭转速度消息，并将其状态发布到主题/ edumip / state ROS主题 <br><br> 如果在〜/ catkin_ws / src / edumip_balance_ros / launch目录中找不到<b>edumip_balance_ros.launch</b>启动<b>文件</b> ，则如上所述，您需要“ git pull”该软件包的最新版本，然后使用“ catkin_make”重新编译源代码。 <br><br> 有关使用这些ROS支持的更多信息，请参见本课程网页上的第3周作业：机器人系统编程第3周作业 <br><br><h4> 关于使用ROS启动EduMIP的说明 </h4><br>  <b>为什么在运行edumip_balance_ros时出现权限错误，该如何解决？</b> <br> 如果遇到诸如“无法打开： <br><br>  / sys /设备/平台/ ocp / ocp：H18_pinmux /状态 <br>  Pinmux：运行edumip_balance_ros时权限被拒绝。 <br><br> 使用catkin_make在edumip上编译edumip_balance_ros项目时，请编译可执行文件： <br><br>  “〜/ catkin_ws / devel / lib / edumip_balance_ros / edumip_balance_ros” <br><blockquote>  ubuntu @ arm：〜/ catkin_ws $ ls -l devel / lib / edumip_balance_ros / <br> 总计272 <br>  -rwxrwxr-x 1 ubuntu ubuntu 278292 2月18日18:48 edumip_balance_ros </blockquote><br> 请注意，文件的所有者和组是ubuntu：ubuntu，并且是可执行文件（“ -rwxrwxr-x”）。 <br><br><div class="spoiler">  <b class="spoiler_title">当您尝试运行此最近编译的文件时，将出现权限错误，如下所示：</b> <div class="spoiler_text"><blockquote>  ubuntu @ arm：〜/ catkin_ws $ roslaunch edumip_balance_ros edumip_balance_ros.launch <br>  ...登录到/home/ubuntu/.ros/log/a271dd92-14dc-11e8-b293-dc5360d671c6/roslaunch-arm-2845.log <br> 检查日志目录中的磁盘使用情况。 这可能需要一段时间。 <br> 按Ctrl-C中断 <br> 完成检查日志文件磁盘使用情况。 用量小于1GB。 <br><br> 启动roslaunch服务器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">192.168.10.102：37365</a> / <br><br> 总结 <br>  ======== <br><br> 参数 <br>  * / rosdistro：动力学 <br>  * / rosversion：12.1.12 <br><br> 节点 <br>  / <br>  edumip_balance_ros_node（edumip_balance_ros / edumip_balance_ros） <br><br>  ROS_MASTER_URI = http：//192.168.10.101：11311 <br><br> 进程[edumip_balance_ros_node-1]：从pid [2874]开始 <br>  [INFO] [1518979862.674565427]：文件/home/ubuntu/catkin_ws/src/edumip_balance_ros/src/edumip_balance_ros.cpp于2018年2月3日19:38:02编译。 <br> 无法打开：/ sys /设备/平台/ ocp / ocp：H18_pinmux /状态 <br>  Pinmux：权限被拒绝 <br> 无法打开：/ sys /设备/平台/ ocp / ocp：C18_pinmux /状态 <br>  Pinmux：权限被拒绝 <br> 无法打开：/ sys /设备/平台/ ocp / ocp：U16_pinmux /状态 <br>  Pinmux：权限被拒绝 <br> 无法打开：/ sys /设备/平台/ ocp / ocp：D13_pinmux /状态 <br>  Pinmux：权限被拒绝 <br> 无法打开：/ sys /设备/平台/ ocp / ocp：J15_pinmux /状态 <br>  Pinmux：权限被拒绝 <br> 无法打开：/ sys /设备/平台/ ocp / ocp：H17_pinmux /状态 <br>  Pinmux：权限被拒绝 <br> 警告：缺少PINMUX驱动程序 <br> 您可能只需要更新的内核 <br> 无法打开/开发/内存 <br>  mmap_gpio_adc.c无法初始化gpio <br>  [INFO] [1518979862.806645002]：错误：无法初始化海角。 <br>  [edumip_balance_ros_node-1]进程已终止[pid 2874，退出代码255，cmd / home / ubuntu / catkin_ws / devel / lib / edumip_balance_ros / edumip_balance_ros __name：= edumip_balance_ros_node __log：= / home / ubuntu / dd。 14dc-11e8-b293-dc5360d671c6 / edumip_balance_ros_node-1.log]。 <br> 日志文件：/home/ubuntu/.ros/log/a271dd92-14dc-11e8-b293-dc5360d671c6/edumip_balance_ros_node-1*.log <br> 机器上的所有进程均已终止，roslaunch将退出 <br> 关闭处理监视器... <br>  ...关闭处理监视器完成 <br> 做完了 </blockquote></div></div><br> 这里的问题是，您的可执行文件必须以root身份而不是常规用户身份运行，才能访问BeagleBone硬件寄存器。 <br><br> 编译edumip_ros_balance之后，可以通过运行以下脚本来更改可执行文件的根权限（sudo chown root：root &lt;文件名&gt;）并设置其粘性位（sudo chmod u + s &lt;文件名&gt;）： <br><br>  “〜/ catkin_ws / src / edumip_balance_ros /脚本/ edumip_change_perms.sh” <br><br> 如果看一下这个shell脚本，您将看到它执行以下两个命令： <br><blockquote>  sudo chown root：根〜/ catkin_ws / devel / lib / edumip_balance_ros / edumip_balance_ros <br> 须藤chmod u + s〜/ catkin_ws / devel / lib / edumip_balance_ros / edumip_balance_ros </blockquote><br> 运行此脚本后（它将要求您提供sudo密码），可执行文件的权限和组将从ubuntu：ubuntu更改为root：root，并将安装其粘性位（权限以前是“-rwxrwxr-x”，后来变成了“-rwsrwxr”） -x“）： <br><blockquote>  ubuntu @ arm：〜/ catkin_ws $ ls -l devel / lib / edumip_balance_ros / <br> 总计272 <br>  -rwsrwxr-x 1根278292 2月18日18:48 edumip_balance_ros </blockquote><br> 现在，当您运行edumip_balance_ros时，它应该可以正常工作，如下所示： <br><br><div class="spoiler">  <b class="spoiler_title">ubuntu @ arm：〜$ roslaunch edumip_balance_ros edumip_balance_ros.launch</b> <div class="spoiler_text"><blockquote>  ubuntu @ arm：〜$ roslaunch edumip_balance_ros edumip_balance_ros.launch <br>  ...登录到/home/ubuntu/.ros/log/a271dd92-14dc-11e8-b293-dc5360d671c6/roslaunch-arm-2099.log <br> 检查日志目录中的磁盘使用情况。 这可能需要一段时间。 <br> 按Ctrl-C中断 <br> 完成检查日志文件磁盘使用情况。 用量小于1GB。 <br><br> 启动roslaunch服务器<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">192.168.10.102：34253</a> / <br><br> 总结 <br>  ======== <br><br> 参数 <br>  * / rosdistro：动力学 <br>  * / rosversion：12.1.12 <br><br> 节点 <br>  / <br>  edumip_balance_ros_node（edumip_balance_ros / edumip_balance_ros） <br><br>  ROS_MASTER_URI = http：//192.168.10.101：11311 <br><br> 进程[edumip_balance_ros_node-1]：从pid [2108]开始 <br>  [INFO] [1518981653.978399507]：文件/home/ubuntu/catkin_ws/src/edumip_balance_ros/src/edumip_balance_ros.cpp于2018年2月3日19:38:02编译。 <br> 错误：缺少pru-rproc驱动程序 <br>  [INFO] [1518981654.104574860]：内环控制器D1： <br><br> 顺序：2 <br> 时差dt：0.0100 <br>  -4.9450z²+ 8.8620z + -3.9670 <br>  -1.0000z²+ -1.4810z + 0.4812 <br>  [INFO] [1518981654.107474727]： <br> 外环控制器D2： <br><br> 顺序：2 <br> 时差dt：0.0100 <br>  0.1886z²+ -0.3721z + 0.1835 <br>  -1.0000z²+ -1.8605z + 0.8605 <br>  [INFO] [1518981654.573431369]： <br> 保持MIP直立，开始平衡 </blockquote></div></div><br>  <b>ROS找不到我的ROS包</b> <br><br> 如果在ROS环境中不能理解catkin_ws / src中有新软件包，请尝试使用rospack profile命令更新rospack配置文件，并使用rosdep update命令更新rosdep缓存。 <br><br>  <b>编译并绑定到Robotics Cape“ C”库</b> <br><br>  Robotics Cape库已预装在Ubuntu 16.04映像上，可从本页前面的链接中获得。 它是使用sudo apt-get install roboticscape命令安装的。 <br><br> 机械手海角库和相关头文件已安装在EduMIP上。 链接到/usr/lib/libroboticscape.so库，以及两个顶级头文件rc_usefulincludes.h和roboticscape.h。 <br><br> 您可以参考<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">edumip_balance_ros</a>项目，以了解如何在C ++ ROS节点中使用机械手披风C头文件和C链接库。 <br><br> 请参阅edumip_balance_ros / src / edumip_balance_ros.cpp，以了解如何使用extern“ C”指令在C ++程序中包括C头文件。 <br><br> 有关如何将程序链接到roboticscape C库的信息，请参见edumip_balance_ros / CMakeLists.txt。 <br><br>  <b>Edumip_balance_ros软件包</b> <br><br><ul><li> 要编译<a href="">edumip_balance_ros</a>软件包， <a href="">您</a>还必须安装<a href="">edumip_msgs</a>软件包。 </li><li>  edumip_balance_ros软件包将不会在您的计算机上编译，仅用于在EduMIP上进行编译。 </li></ul><br>  <b>水平配置EduMIP</b> <br><br> 几个学生团队在带有脚轮的水平配置中使用了EduMIP。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ww/bq/yw/wwbqywxez62plhzy1rjeu0p-s_8.jpeg"></div><br> 为此，您将需要用自己的新代码替换“ edumip_balance_ros”项目，以控制车轮电机，以及读取和发布车轮编码器。 昨天我在教室里检查了可能的软件包之一，可以使用differential_drive ROS软件包（http://wiki.ros.org/differential_drive）。 要使用differential_drive软件包，您需要为edumip编写一个新的C ++节点，该节点（a）读取车轮编码器并按主题发布它们，并且（b）订阅车轮电机的电动机命令和电压命令的主题。 <br><br><img src="https://habrastorage.org/webt/kv/zb/et/kvzbetynezcub7sclpdf5bq9kdu.jpeg"><br><br><img src="https://habrastorage.org/webt/ay/on/vb/ayonvbvtzgmccqeyu5rlmp604xm.jpeg"><br><br><img src="https://habrastorage.org/webt/vd/zt/gu/vdztguslq4mgpabge6ffbdbj-yu.jpeg"><br><br>  <b>串口设备</b> <br><br> 为了与串行端口上的传感器（例如在课堂上演示的USB超声波传感器）进行交互，您将需要能够通过串行端口打开，读取和发送。 <br><br><img src="https://habrastorage.org/webt/ol/et/8g/olet8g926448yknxtl4zvn-bsiy.jpeg"><img src="https://habrastorage.org/webt/g4/y-/do/g4y-dov8fy2n99k2b1flozwbj0u.jpeg"><br><img src="https://habrastorage.org/webt/xt/b_/zu/xtb_zuhwmwpzfasvxwlilxrw3pa.jpeg"><br><br> 此<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ROS串行软件包的</a>好<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">软件包</a> 。 您可以将其安装为“ sudo apt-get install ros-kinetic-serial”。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里</a>简单的例子 <br><br> 可以使用git clone <a href="">github.com/wjwwood/serial.git</a>命令将src的副本克隆到ROS工作区，并使用catkin_make进行编译。  examples目录包含将串行端口与串行软件包一起使用的更复杂的示例。 <br><br> 请注意，此名为“ serial”的ros软件包不是“ rosserial”的软件包。  “串行”包是一个轻量级的通用库，用于在串行端口上读取和发送数据。  “ Rosserial”是一个用于随节点增长而配对诸如Arduino之类的小型设备的软件包。 <br><br>  <b>译者的补充：</b> <br><br> 我在文章中添加了照片和视频，以及学生作品的照片。 通常，仅此指令就足以运行，只希望至少具有最少的Linux命令行经验和对ROS体系结构的基本了解。 机器人的脚本用C编写。 <br><br> 您可以在评论中提出问题，我已阅读并回答。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN413677/">https://habr.com/ru/post/zh-CN413677/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN413665/index.html">如何确定您的日志量？</a></li>
<li><a href="../zh-CN413667/index.html">Kaggle：来自太空的亚马逊-训练神经网络的技巧和技巧</a></li>
<li><a href="../zh-CN413669/index.html">三星IT学校：教学生如何开发移动应用程序</a></li>
<li><a href="../zh-CN413673/index.html">关于节点新旧版本的性能问题</a></li>
<li><a href="../zh-CN413675/index.html">小丑2018：匿名Java开发人员俱乐部</a></li>
<li><a href="../zh-CN413679/index.html">角度6。 PWA。 延迟加载模块。 在Firebase中自动部署</a></li>
<li><a href="../zh-CN413681/index.html">在Go上开发高度可靠的服务器的技术</a></li>
<li><a href="../zh-CN413683/index.html">ILV已解锁700万个IP地址。 保持锁定400万</a></li>
<li><a href="../zh-CN413689/index.html">Debian + Postfix + Dovecot +多域+ SSL + IPv6 + OpenVPN +多接口+ SpamAssassin-learn +绑定</a></li>
<li><a href="../zh-CN413691/index.html">开始</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>