<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÖüèº üïí üë∂üèΩ Manuten√ß√£o da posi√ß√£o no servoconversor: controle subordinado vs modo step üë®‚Äçüë©‚Äçüëß üë®üèΩ‚Äç‚úàÔ∏è üõÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Depois que os artigos anteriores sobre controle vetorial de motores el√©tricos apareceram, surgiram muitas quest√µes sobre o acionamento posicional - co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Manuten√ß√£o da posi√ß√£o no servoconversor: controle subordinado vs modo step</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/npf_vektor/blog/392837/"><img src="https://habrastorage.org/files/1a0/030/245/1a0030245bd548439397f1be298b8b76.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depois que os artigos anteriores sobre controle vetorial de motores el√©tricos apareceram, surgiram muitas quest√µes sobre o acionamento posicional - como elaborar uma determinada posi√ß√£o com um acionamento? </font><font style="vertical-align: inherit;">Como um servoconversor funciona em m√°quinas modernas, como usar um sinal de um sensor de posi√ß√£o, como um acionamento por etapas difere de um servoconversor com regula√ß√£o subordinada? </font><font style="vertical-align: inherit;">Vamos mostrar tudo na forma de fotos e v√≠deos.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ent√£o, o que √© um servo com um loop de posi√ß√£o? </font><font style="vertical-align: inherit;">Para come√ßar, veja isso. </font><font style="vertical-align: inherit;">Para ver os gr√°ficos em segundo plano, aconselho a assistir no modo de tela cheia.</font></font><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.youtube.com/embed/QZCzQNvbjIc%3Ffeature%3Doembed&amp;usg=ALkJrhj42tsXPGKMa4iJ2CwN1zdoHjK2EA" frameborder="0" allowfullscreen=""></iframe><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estrutura de controle de tr√™s la√ßos</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O sistema de controle procura manter uma determinada posi√ß√£o do eixo do rotor. Fa√ßo um efeito perturbador, afasto o rotor da posi√ß√£o definida, mas depois de liberar o eixo, ele volta instantaneamente √† tarefa. Mesmo se voc√™ girar algumas voltas, o sistema de controle desaparafusar√° algumas voltas e com uma din√¢mica muito boa - de modo que o movimento nem sequer tenha tempo para entrar nos quadros do v√≠deo. Em segundo plano, a programa√ß√£o de opera√ß√£o do inversor √© vis√≠vel: a corrente do motor √© mostrada em vermelho (proporcional ao momento), a posi√ß√£o atual do eixo do rotor √© exibida em verde e a configura√ß√£o da posi√ß√£o √© amarela. O momento m√°ximo permitido (corrente) do motor neste experimento foi limitado a tr√™s vezes o m√°ximo, por completo, eu n√£o seria capaz de segur√°-lo com tanta facilidade.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como esse sistema de controle funciona? </font><font style="vertical-align: inherit;">Este √© um sistema cl√°ssico de controle escravo de tr√™s la√ßos com corre√ß√£o sequencial, mostrado na Fig. 1.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/eb8/c49/210/eb8c492102b24bce8658e6cc4ad62317.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Figura 1. Sistema de tr√™s circuitos de regula√ß√£o subordinada</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Por que um subordinado? </font><font style="vertical-align: inherit;">Porque cada circuito fechado √© "subordinado" √† tarefa do superior. </font><font style="vertical-align: inherit;">Existem tr√™s circuitos no sistema, listo a partir do interior: circuitos de corrente (torque), circuito de velocidade (velocidade), loop de posi√ß√£o. </font><font style="vertical-align: inherit;">Consequentemente, cada circuito com seu pr√≥prio regulador mant√©m seu valor em um determinado n√≠vel. </font><font style="vertical-align: inherit;">Nesse caso, foram utilizados o controlador PI para correntes, o controlador P para velocidade e o controlador PID para posi√ß√£o. </font><font style="vertical-align: inherit;">Nenhuma m√°gica como l√≥gica difusa, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">controles linear-quadr√°ticos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e muito mais.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por que exatamente tr√™s circuitos e exatamente isso? Vou tentar explicar, como sempre, "nos dedos". Se quisermos ajustar a posi√ß√£o, o melhor que podemos controlar √© a velocidade (velocidade), porque √© a velocidade que afeta diretamente a mudan√ßa de posi√ß√£o (a velocidade √© uma derivada da posi√ß√£o) e todas as outras quantidades (corrente, tens√£o e outro) afetam a situa√ß√£o de uma maneira mais complexa, mais dif√≠cil de regular. Al√©m disso, se agora queremos regular a velocidade, o melhor que podemos controlar √© o momento do motor, j√° que o momento determina a acelera√ß√£o do inversor e tamb√©m √© conectado √† velocidade com a lei matem√°tica mais simples. Como para um motor o momento √© atual (para um motor CC, isso √© verdade explicitamente,e para motores CA √© v√°lido para a corrente geradora de torque no controle vetorial), para controlar o momento em que √© necess√°rio controlar a tens√£o no inversor do conversor, porque a corrente e a tens√£o tamb√©m s√£o conectadas a uma primeira aproxima√ß√£o atrav√©s de uma equa√ß√£o diferencial simples.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ omitir qualquer circuito interno, ent√£o ... a posi√ß√£o ser√° regulada, mas ser√° mal regulada, n√£o com a mesma velocidade que em um sistema de tr√™s circuitos. </font><font style="vertical-align: inherit;">Se voc√™ jogar fora, por exemplo, o circuito de corrente, for√ßando o controlador de velocidade a afetar diretamente a tens√£o do inversor, o momento do acionamento (corrente) permanecer√° descontrolado - ele mudar√° conforme desejado, os transientes ser√£o deixados ao acaso. </font><font style="vertical-align: inherit;">Infelizmente, alguns arduinovides fazem a estrutura mostrada na Fig. 2.</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/45b/09d/e57/45b09de57dd6467097e427f24776c694.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 2. </font><font style="vertical-align: inherit;">A maneira como voc√™ n√£o precisa ajustar a posi√ß√£o da unidade. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essa estrutura funciona nojenta (lentamente e oscila), embora de alguma forma funcione - o controlador PI far√° tudo isso.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Corrente direta e alternada: qual a diferen√ßa para o loop de posi√ß√£o?</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qual √© a diferen√ßa no controle de posi√ß√£o para motores de corrente cont√≠nua e motores de corrente alternada? No caminho de manter o momento. Em um motor CC, basta colocar um regulador de corrente que afeta a tens√£o do enrolamento da armadura - voc√™ obter√° o controle de torque. Nos motores CA (por exemplo, uma m√°quina s√≠ncrona com √≠m√£ permanente e um motor ass√≠ncrono), o controle vetorial dever√° ser aplicado. O que √© e como funciona j√° foi discutido em detalhes nos artigos </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle vetorial nos dedos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle vetorial para um motor ass√≠ncrono nos dedos</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Assim como para um motor CC, o controle vetorial permite ajustar o torque no motor. </font><font style="vertical-align: inherit;">Al√©m disso, os mesmos controladores de velocidade e posi√ß√£o s√£o ‚Äúsuspensos‚Äù por cima. </font><font style="vertical-align: inherit;">A operacionalidade final do loop de posi√ß√£o n√£o depende do tipo de motor (apenas pequenas nuances mudam).</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modo passo</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para m√°quinas s√≠ncronas com √≠m√£s permanentes, existe outra op√ß√£o para resolver a situa√ß√£o - o chamado modo de opera√ß√£o em "etapas". Motores otimizados para isso, respectivamente, s√£o chamados de stepper. Nem todos os motores de passo s√£o m√°quinas s√≠ncronas com √≠m√£s, mas a maioria √© exatamente isso (ainda existem etapas do tipo indutor do tipo passo). Como isso funciona? O motor simplesmente fornece corrente cont√≠nua √†s fases necess√°rias. E √© isso. O rotor sob a influ√™ncia da "mola magn√©tica" se eleva na posi√ß√£o correspondente √† corrente. Se voc√™ precisar alterar a posi√ß√£o do eixo, o vetor atual deve ser girado - depende suave ou discretamente do "acionador" do motor de passo (com ou sem micro passo). Sobre como o motor s√≠ncrono funciona e onde h√° uma mola magn√©tica j√° foi descrita no </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artigo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O modo step √© bom porque, al√©m do loop de corrente, ele n√£o precisa de nada - nem um sensor de posi√ß√£o, nem mesmo um microcontrolador. O sistema de controle para este modo √© montado a partir de tr√™s microcircuitos e meio e √© usado em todas as m√°quinas CNC do n√≠vel amador (e n√£o √© o caso). Quais s√£o as desvantagens? A posi√ß√£o tamb√©m √© nojenta. Manter a posi√ß√£o nesse modo √© o pr√≥prio motor - uma corrente constante √© fornecida ao estator e o rotor tende a permanecer na posi√ß√£o correspondente. Pode-se imaginar dois √≠m√£s retangulares em um eixo passando pelo meio (Fig. 3). Controlamos um √≠m√£ (corrente do estator) e o segundo - o rotor oscila por si s√≥ e tende a girar de acordo com o primeiro, paralelo a ele.</font></font><br>
 <div style="text-align:center;"><img src="https://habrastorage.org/files/75f/1c8/e19/75f1c8e196174a51abe0db7eb60863a4.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">3. Modo de opera√ß√£o passo a passo de uma m√°quina s√≠ncrona</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O momento no rotor neste modo muda de acordo com a lei do seno do √¢ngulo de incompatibilidade entre os dois √≠m√£s. </font><font style="vertical-align: inherit;">Na posi√ß√£o coordenada, o momento √© zero (a carga n√£o atua no rotor), a 90 graus (os √≠m√£s s√£o perpendiculares), o momento do motor √© m√°ximo e tende a girar o rotor para a posi√ß√£o coordenada. </font><font style="vertical-align: inherit;">E a amplitude desse seno da mudan√ßa de momento depende da magnitude da corrente fornecida.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O n√∫mero de pares de p√≥los</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Para melhorar a precis√£o de manter a posi√ß√£o no modo passo, o n√∫mero de pares de polos no motor √© estruturalmente aumentado. </font><font style="vertical-align: inherit;">Se houver um par de p√≥los, o motor corresponder√° a esses dois √≠m√£s na fig. </font><font style="vertical-align: inherit;">3 - o rotor pode pendurar at√© um quarto de revolu√ß√£o para frente e para tr√°s a partir de uma determinada posi√ß√£o. </font><font style="vertical-align: inherit;">Quando o n√∫mero de pares de polos aumenta, o n√∫mero de alterna√ß√µes norte-sul aumenta, tanto nos √≠m√£s do rotor quanto nos enrolamentos do estator. </font><font style="vertical-align: inherit;">Aqui est√° uma foto mostrando um motor com um par de p√≥los e dois:</font></font><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/e53/7b0/fa2/e537b0fa20974453b51b3f85cdde1b9a.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 4. </font><font style="vertical-align: inherit;">Um par de p√≥los vs dois pares de p√≥los.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se voc√™ tentar acionar esse motor com dois pares de p√≥los com a corrente cont√≠nua fornecida em fases, o momento no rotor aumentar√° para um m√°ximo n√£o em um quarto de revolu√ß√£o (90 graus, como em um par de p√≥los), mas em um oitavo de revolu√ß√£o (45 graus mec√¢nicos). O motor ter√° duas posi√ß√µes est√°veis ‚Äã‚Äãdo rotor em uma revolu√ß√£o mec√¢nica. Para a conveni√™ncia de descrever os processos no motor, √© introduzido o conceito de "revolu√ß√£o el√©trica" ‚Äã‚Äã- quanto o rotor precisa ser girado para que os √≠m√£s do rotor de um polo caiam no lugar do mesmo do outro polo, ou seja, dar um "passo". Dizem ent√£o que o rotor girou 360 graus e, para traduzir isso em mec√¢nico, √© necess√°rio dividir pelo n√∫mero de pares de p√≥los. Na revolu√ß√£o el√©trica, o comportamento de todos os motores em termos de controle √© o mesmo, independentemente do n√∫mero de pares de polos.Um aumento no n√∫mero de pares de p√≥los cria apenas um tipo de "caixa de velocidades el√©trica" ‚Äã‚Äã- voc√™ pode pegar um carro com um par de p√≥los e usar uma engrenagem de redu√ß√£o qu√°drupla, ou voc√™ pode pegar um carro com quatro pares de p√≥los e obter, grosso modo, a mesma coisa.</font></font><br>
<br>
<h2>  vs  : </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para motores de passo, o n√∫mero de pares de polos √© muito grande - 50, 100 ou mais. Nesse caso, a capacidade natural de manter a posi√ß√£o √© muito boa - se voc√™ garantir que o momento da carga nunca exceda o torque m√°ximo do motor, a posi√ß√£o sem nenhum sensor de posi√ß√£o ser√° mantida com uma precis√£o de (¬± 360 / (n√∫mero de pares de p√≥los * 4)) de graus mec√¢nicos. √â verdade que o pre√ßo disso √© uma forte deteriora√ß√£o no desempenho do motor em termos de peso, tamanho e efici√™ncia. Se compararmos a pot√™ncia de um motor de passo com cem pares de p√≥los e o motor s√≠ncrono do mesmo tamanho com um pequeno n√∫mero de pares de p√≥los, a pot√™ncia admiss√≠vel de um shagovik ser√° v√°rias vezes menor. E tamb√©m por causa do aumento no n√∫mero de pares de p√≥los, os shagoviks t√™m um problema em trabalhar em alta velocidade.A frequ√™ncia da corrente neles deve ser fornecida com o n√∫mero de pares de p√≥los t√£o grande quanto em uma m√°quina s√≠ncrona "normal", que fornece frequ√™ncias de corrente da ordem de kilohertz ou mais - h√° enormes perdas na invers√£o de magnetiza√ß√£o do ferro, e nem todo sistema de controle pode.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, o shagoviki n√£o fornece boas din√¢micas de acelera√ß√£o e frenagem, pois durante a acelera√ß√£o o motor deve superar dois pontos: o momento da carga, bem como o momento din√¢mico para acelerar a massa do volante e o corpo de trabalho. E se a soma de todos os momentos exceder o torque m√°ximo do motor, ele pular√° uma etapa, o que √© inaceit√°vel para o CNC. Portanto, as minhocas aceleram e freiam necessariamente suavemente, com uma grande margem entre o momento total no eixo e o torque m√°ximo do motor, para n√£o pular etapas.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tamb√©m √© importante notar que, no modo passo a passo, quando uma carga √© aplicada ao rotor, ela sempre cede e se desvia da posi√ß√£o definida por um determinado √¢ngulo, qualquer que seja a corrente fornecida ao motor. Al√©m disso, com uma perda acentuada de carga, s√£o poss√≠veis flutua√ß√µes - o rotor em uma mola magn√©tica oscila para frente e para tr√°s. Se a carga n√£o tiver sorte e for pulsada, ela poder√° coincidir com a frequ√™ncia interna do rotor, gir√°-la e, depois disso, o rotor sair√° da sincronicidade - o motor ‚Äúpular√° um passo‚Äù.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que fazer se, para resolver o problema, voc√™ precisar manter uma boa posi√ß√£o e obter uma condu√ß√£o din√¢mica e de alta velocidade? N√£o use stephops! E use uma m√°quina s√≠ncrona ‚Äúregular‚Äù com um pequeno n√∫mero de pares de p√≥los como servomotor, instale um sensor de posi√ß√£o e construa um sistema de controle de tr√™s la√ßos. N√£o h√° "etapas" no sistema de controle de vetores - n√£o h√° nada a perder. No modo passo, sempre √© necess√°ria uma corrente grande para passar pelo motor e, no modo vetorial com uma estrutura de controle de tr√™s voltas, a corrente flui somente quando uma carga √© aplicada ao eixo. A precis√£o de manter a posi√ß√£o no sistema de regula√ß√£o subordinada √© geralmente determinada pela precis√£o do sensor de posi√ß√£o do rotor. Quanto mais preciso o sensor, melhor o trabalho do loop de posi√ß√£o.E os sensores de posi√ß√£o modernos s√£o muito precisos - centenas de milhares de tags por revolu√ß√£o mec√¢nica. Essa √© uma ordem de magnitude melhor do que os motores de passo com a etapa de britagem mais forte.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modo passo vs regula√ß√£o subordinada: pr√°tica</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
E agora vamos ver na pr√°tica todas as op√ß√µes acima. </font><font style="vertical-align: inherit;">√â necess√°rio descrever a posi√ß√£o com a qual trabalho. </font><font style="vertical-align: inherit;">H√° muita informa√ß√£o t√©cnica, vou escond√™-la embaixo do spoiler.</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Banco de ensaio</font></font></b><div class="spoiler_text">   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VectorCARD 192101</a>,   ,      ,       .<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/b5a/024/f76/b5a024f76a824688b4feb1f58b939a3c.jpg"></div><br>
<i>. 5.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">VectorCARD 192101</a></i><br>
<br>
 ‚Äì Leadshine ACM601V36-1000.        100, 4  ,   36,   4,  11.   ‚Äì     1000    (,    , 4000  ()    A  B ).<br>
 ‚Äì        DRV8301-HC-EVM Texas Instruments.<br>
 ‚Äì   VectorCARD 192101    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">192101  ¬´¬ª (ARM Cortex-M4F, 100)</a>.<br>
     ,  ,   . 6.<br>
<img src="https://habrastorage.org/files/d05/d0f/4a8/d05d0f4a82954836aef62a8300ceab35.png"><br>
<i>. 6.       :   (), , .</i><br>
<br>
 -    ,  ,            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   ¬´ ¬ª</a>.          . 1.<br>
     20,     (  ) ‚Äì 10.   ‚Äì  ,      .        ,   .<br>
</div></div><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modo passo vs controle escravo: compara√ß√£o no modo est√°tico</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Primeiro, comparamos o modo de opera√ß√£o passo a passo e o sistema de regula√ß√£o subordinada de tr√™s ciclos com o controle vetorial "em est√°tica". Definimos a mesma posi√ß√£o do rotor e aumentamos gradualmente o momento de carga no eixo. No modo de opera√ß√£o passo a passo, fornecemos uma corrente nominal de 4A e, no modo vetorial de opera√ß√£o, definimos uma limita√ß√£o de corrente de 4A. O que esperamos ver? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No modo de opera√ß√£o passo a passo, a corrente ser√° constante tanto em fase quanto em amplitude, e a posi√ß√£o do rotor deve "dobrar" a mola magn√©tica sob carga. Como o n√∫mero de pares de polos √© 4, o torque m√°ximo deve ser alcan√ßado com um desvio de 360/4/4 = 22,5 graus mec√¢nicos da posi√ß√£o original acordada.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que acontecer√° no sistema de controle de tr√™s circuitos? O controlador de posi√ß√£o neste experimento √© o PID (proporcional - integral - diferencial). A letra principal aqui √© "AND" - ela tem um componente integral. Isso significa que, desde que haja pelo menos alguma incompatibilidade entre a posi√ß√£o especificada e a atual, o integrador do regulador integrar√° e aumentar√° sua sa√≠da at√© que o erro chegue a zero. Isso significa que, se voc√™ carregar o eixo lentamente, para que o integrador tenha tempo para integrar e compensar o erro (ou seja, no modo est√°tico), o eixo permanecer√° na mesma posi√ß√£o "morta". Mas quando a margem de corrente (torque) do inversor estiver esgotada (a refer√™ncia atual atingir√° o limite de 4A), o inversor imediatamente sucumbir√° e se desviar√° da refer√™ncia (no entanto, ele puxar√° com o torque m√°ximo em dire√ß√£o √† refer√™ncia o tempo todo).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para rastrear a posi√ß√£o atual do eixo do rotor, √© conveniente observar o sinal de erro do sensor de posi√ß√£o (a diferen√ßa entre a refer√™ncia e a posi√ß√£o atual), bem como a corrente do estator. </font><font style="vertical-align: inherit;">Durante o experimento, um oscilograma com esses dados ser√° vis√≠vel em segundo plano. </font><font style="vertical-align: inherit;">Para observar o momento atual da carga no experimento, foi utilizado um dinam√¥metro especializado de alta precis√£o, que tirei da gaveta da mesa da cozinha. </font><font style="vertical-align: inherit;">Aqui, de fato, a pr√≥pria experi√™ncia (para tornar algo vis√≠vel - tela cheia!):</font></font><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.youtube.com/embed/xTaPFB7K92E%3Ffeature%3Doembed&amp;usg=ALkJrhiNgXU5Uw7iNbO8eaIS3NFjnd0iFA" frameborder="0" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O v√≠deo confirma o que foi dito. </font><font style="vertical-align: inherit;">No sistema de controle vetorial de tr√™s la√ßos, o rotor permaneceu im√≥vel at√© eu "selecionar" a corrente 4A dispon√≠vel e, em seguida, o rotor come√ßou a se desviar. </font><font style="vertical-align: inherit;">Em uma estrutura aberta em corrente cont√≠nua com corrente cont√≠nua, o rotor sucumbiu facilmente a um momento externo. </font><font style="vertical-align: inherit;">Como o n√∫mero de pares de polos deste motor √© 4, o rotor se desvia mais de 20 graus da refer√™ncia.</font></font><br>
<br>
<h3>  vs  :   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tudo se torna mais interessante na din√¢mica. E se uma carga de choque pulsada for aplicada? Isso resulta em uma competi√ß√£o entre dois sistemas fundamentalmente diferentes. Em um sistema de controle vetorial, a velocidade depende diretamente da velocidade da estrutura de controle de tr√™s la√ßos. Quanto mais rigidamente os reguladores s√£o ajustados, mais r√°pida √© a frequ√™ncia de c√°lculo da estrutura, mais precisos e mais r√°pidos s√£o os sensores, melhor a resposta √† perturba√ß√£o na din√¢mica. No modo de opera√ß√£o passo a passo, o sistema de controle "descansa". Ela criou um vetor atual - √© tudo o que precisa. Toda a rea√ß√£o √† perturba√ß√£o √© fornecida pelo pr√≥prio motor. O momento no eixo em que o eixo do rotor √© desviado ocorre "instantaneamente", pois essa √©, de fato, a intera√ß√£o de dois √≠m√£s. Mas o momento aumenta em propor√ß√£o ao seno do √¢ngulo de deflex√£o el√©trica, o que significa que esse sistema ter√° uma certa rigidez.Em geral, essa √© uma "mola magn√©tica" comum. A compara√ß√£o em din√¢mica √© uma experi√™ncia demonstrativa muito boa para um sistema de controle de tr√™s circuitos. Se estiver lento, n√£o poder√° mostrar um resultado melhor do que uma estrutura aberta. Sim, na estat√≠stica, a estrutura de tr√™s circuitos pode escolher um erro posicionando para zerar a parte integrante do regulador, mas na din√¢mica tamb√©m pode "ceder" mais do que o modo de opera√ß√£o passo a passo usual. Confira?</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para realizar esse experimento, usei uma carga medida, que encontrei em meu gabinete com ferramentas, al√©m de uma rosca amarrada a uma haste, que possui uma montagem em consola no acoplamento do motor. Ao baixar a carga de uma altura fixa, obtemos uma carga de impulso de impacto no eixo do rotor. Voc√™ pode observar o quanto o eixo do rotor se desvia do trabalho no momento do impacto. Aqui est√° um v√≠deo do experimento:</font></font><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.youtube.com/embed/ZjgNBDkpYVM%3Ffeature%3Doembed&amp;usg=ALkJrhj-pqr1omDHn40Xv6UU_brQlMg2aw" frameborder="0" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Inicialmente, um modo de opera√ß√£o em etapas com um vetor de corrente fixo √© ativado. Mostro como o rotor se dobra sob a influ√™ncia do momento da carga, como, ap√≥s dominar o momento da carga, voc√™ pode pular para outra posi√ß√£o fixa. Depois, conduzo um experimento para despejar a carga. Al√©m disso, o mesmo para a estrutura de controle de tr√™s la√ßos. Voc√™ notou quanto menos o eixo do rotor se desvia no v√≠deo no sistema de controle de tr√™s la√ßos? Ou talvez mais? Eu n√£o </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Se um v√≠deo semelhante fosse filmado pelo Discovery Channel, eles certamente teriam instalado uma c√¢mera de alta velocidade para obter belas imagens comparativas. No entanto, temos uma ferramenta mais precisa - um sensor de posi√ß√£o do rotor e um microcontrolador. Voc√™ s√≥ precisa remover o erro da forma de onda, calculando a posi√ß√£o no momento da aplica√ß√£o da carga de pulso. Como isso √© feito √© descrito em detalhes no artigo.</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todos para depurar software de microcontrolador em uma unidade el√©trica</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Em resumo, o microcontrolador registra os pontos da forma de onda em uma matriz para um evento espec√≠fico e, em seguida, a forma de onda √© baixada no computador e exibida. No software do controlador, defino o gatilho para bater a forma de onda quando o erro de posi√ß√£o for maior que uma determinada configura√ß√£o, inserindo algumas linhas de c√≥digo C para isso. Ent√£o, no computador, obtive um oscilograma para o modo de opera√ß√£o em etapas com uma corrente de 5A:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/79e/abc/6f2/79eabc6f28ad4103ada8cf08c5b3cf59.png"></div><br>
<i>. 7.        ¬´¬ª   ‚Äì         .           (      4),     ,  ‚Äì   .       21 .</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adicionei tr√™s vari√°veis ‚Äã‚Äãdo sistema de controle ao oscilosc√≥pio: erro de posi√ß√£o, corrente do estator, velocidade do eixo. O oscilograma mostra que a corrente do estator permaneceu constante e igual a 5A, a carga de choque introduziu apenas uma pequena perturba√ß√£o (devido √† EMF de um motor em rota√ß√£o). Mas a situa√ß√£o saltou fortemente. O desvio m√°ximo da posi√ß√£o do eixo em rela√ß√£o √† refer√™ncia foi de 36 graus el√©tricos (ou 9 mec√¢nicos). Existe um modo oscilat√≥rio amortecido do rotor ap√≥s o impacto. Realizei v√°rias experi√™ncias, certificando-se de repetibilidade. Todos os oscilogramas se mostraram semelhantes - √© bom que, se voc√™ tiver as ferramentas necess√°rias, o tempo para realizar um experimento e obter um oscilograma (conforme inserido no artigo) seja de 5 a 10 segundos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Agora vamos ver o que a estrutura de controle de tr√™s circuitos mostrar√° (Fig. 8). </font><font style="vertical-align: inherit;">Anteriormente, coloquei todos os reguladores para ela em velocidade m√©dia.</font></font><br>
 <div style="text-align:center;"><img src="https://habrastorage.org/files/bba/5df/f95/bba5dff95d8b496fa0771b4defbe2a84.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">8. O oscilograma da rea√ß√£o a um surto de carga pulsada com um sistema de tr√™s ciclos de regula√ß√£o subordinada. </font><font style="vertical-align: inherit;">Violeta mostra o desvio do rotor da posi√ß√£o definida em graus el√©tricos (dividido por 4 para mudar para mec√¢nico), azul mostra a corrente do estator de corrente ao longo do eixo q (corrente de momento), azul indica sua tarefa e vermelho indica a frequ√™ncia de rota√ß√£o atual. </font><font style="vertical-align: inherit;">Em uma c√©lula, o eixo do tempo √© de 21 milissegundos.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O processo √© mais interessante aqui. Al√©m da situa√ß√£o, de fato, adicionei ao oscilosc√≥pio todo tipo de quantidade, que mostra o trabalho de regula√ß√£o subordinada. No momento inicial, ainda √© zero: o erro √© zero, velocidade, corrente do estator e sua tarefa. Nenhuma for√ßa atua no rotor; ele repousa devido √† sua for√ßa de atrito. Mas a fita el√©trica naquele momento j√° est√° inexoravelmente voando, a corda est√° desenrolando ... Em um determinado momento, o comprimento da rosca √© selecionado, a carga atinge o eixo, a posi√ß√£o come√ßa a mudar, o erro (feedback do controlador de posi√ß√£o) dispara, juntamente com a velocidade do eixo. Em resposta a isso, o sistema de tr√™s circuitos aumenta drasticamente o momento no inversor, tentando devolv√™-lo √† sua posi√ß√£o original. Cinco milissegundos ap√≥s o impacto, o momento no motor atinge o m√°ximo permitido (corrente 5A),ap√≥s o que a posi√ß√£o relutantemente come√ßa a mudar na dire√ß√£o oposta, a velocidade muda de sinal. Tendo sobrevoado o ponto zero e efetuado algumas oscila√ß√µes, o sistema chega √† tarefa.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pode-se ver como a tarefa da corrente do estator (azul) est√° um pouco √† frente do valor atual (azul), mas o atraso √© menor que um milissegundo, o que indica uma alta velocidade do loop de corrente. No entanto, algumas ‚Äúfluffiness‚Äù e ‚Äúagulhas‚Äù s√£o vis√≠veis na tarefa atual, especialmente no final do processo de transi√ß√£o. O que √© e de onde √©? Vejamos o que o controlador de posi√ß√£o fornece nesse processo - a sa√≠da de seus componentes proporcionais, integrais e diferenciais. Largo a fita novamente, aqui est√£o elas:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/80d/3a6/300/80d3a63001de435d86bc94f2c7e1efb7.png"></div><br>
<i>. 9.           .           (      4),  ‚Äì      ,  ‚Äì ,  ‚Äì  .       21 .</i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Veja como as tr√™s partes do controlador PID calculam o transiente. A forma de onda √© como em um livro did√°tico, mas este √© ao vivo, real e atual, apenas a partir do mecanismo. A sa√≠da da parte proporcional √© diretamente proporcional ao erro. A parte integral √© a integral do erro, veja como ela se integrou "para baixo" desde a primeira grande flutua√ß√£o e depois, com relut√¢ncia, chega a zero. A parte diferencial √© uma derivada de um erro. Por√©m, como o sensor de posi√ß√£o √© incremental e tem apenas 1000 marcas, uma altera√ß√£o em cada marca √© um evento. Portanto, a posi√ß√£o do sistema de controle muda discretamente, irregularmente, o que significa que o derivado dessa altera√ß√£o ser√° "parecido com uma agulha". Ou mesmo impulso, retangular, barulhento - o que vemos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas espere ... A derivada da posi√ß√£o √© a mesma velocidade! Role para cima at√© a fig. 8 e compare esse gr√°fico de velocidade com o gr√°fico da parte diferencial da Fig. 9. A mesma coisa, mas sem barulho! Como a velocidade de rota√ß√£o do m√≥dulo de processamento incremental do codificador √© determinada com mais compet√™ncia - o hardware do microcontrolador, que rastreia o tempo entre as marcas do sensor. A mesma "derivada" da posi√ß√£o, mas mais corretamente medida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Qual √© a moral? Nem todos os componentes do controlador s√£o igualmente √∫teis. O que o componente diferencial do controlador de posi√ß√£o faz √©, teoricamente, ser feito pelo loop de velocidade a jusante. Como eu precisava dele para uma melhor sintonia, isso significa apenas que n√£o ajustei o loop de velocidade intermedi√°ria.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ah sim. Por onde come√ßamos por a√≠? Com erro de posi√ß√£o. No modo de opera√ß√£o em malha aberta, o erro foi de 36 graus el√©tricos (9 mec√¢nicos) e, em um sistema de tr√™s regula√ß√µes subordinadas com essa configura√ß√£o de reguladores, s√£o 21 graus el√©tricos (5,2 mec√¢nicas). Melhor sim. √â ainda melhor? Vamos pegar outros coeficientes do controlador de posi√ß√£o. Eu aumento tudo - Kp, Ki, Kd vezes uma vez e meia. N√≥s olhamos:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/aca/b11/286/acab11286c4e4184b10855dec87b5150.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 10. O oscilograma da rea√ß√£o a um surto de carga pulsada com um sistema de tr√™s ciclos de regula√ß√£o subordinada. Os coeficientes do controlador de posi√ß√£o s√£o aumentados uma vez e meia.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O erro diminuiu, sim ... 18 graus el√©tricos. Mas o que vemos? O sistema de controle quase imediatamente se deparou com a limita√ß√£o atual. Ela gostaria de aplicar uma corrente maior que 5A, mas eu defini o limite para 5. Por que? Para comparar honestamente com um sistema de controle aberto, que tamb√©m tinha uma corrente de 5A. Mas foi desonesto: o sistema de controle vetorial cria corrente apenas quando √© necess√°rio (quando √© necess√°rio realizar o momento), e um sistema aberto sempre aciona a corrente definida. Do ponto de vista de aquecimento e perdas, o sistema de controle vetorial √© muito mais prefer√≠vel para o motor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Deixe o sistema vetorial "desistir" da corrente? </font><font style="vertical-align: inherit;">Pelo menos por um curto per√≠odo de tempo. </font><font style="vertical-align: inherit;">De acordo com o passaporte, o motor permite 11A. </font><font style="vertical-align: inherit;">Resolva 7A para avaliar o resultado.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/3a5/b59/90d/3a5b5990dbf34173bf953dd2930f9eac.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. </font><font style="vertical-align: inherit;">11. O oscilograma da rea√ß√£o a um surto de carga pulsada com um sistema de tr√™s subordinados de regula√ß√£o subordinada. </font><font style="vertical-align: inherit;">Limite de corrente aumentado de 5A para 7A. </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O erro √© de apenas 15 graus el√©tricos! </font><font style="vertical-align: inherit;">Isso √© 2,5 vezes menor do que no sistema de controle de malha aberta. </font><font style="vertical-align: inherit;">Mas veja, o que h√° no final do cronograma? </font><font style="vertical-align: inherit;">"Agulhas" na tarefa da corrente ... e eles continuam e continuam, o que eu ou√ßo acusticamente - o motor "toca". </font><font style="vertical-align: inherit;">Isso se chama auto-oscila√ß√£o - puxou demais os coeficientes do regulador.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Circuitos fechados e seu ru√≠do</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Ent√£o, chegamos √† quest√£o espec√≠fica da qualidade de qualquer sistema de controle, que √†s vezes n√£o √© menos importante que a precis√£o de manter o pr√≥prio par√¢metro ajust√°vel - o ru√≠do. √â permitido que o motor "fa√ßa barulho" em um sistema de controle de circuito fechado? Depende de quanto faz barulho e o que faz. Eu preparei um v√≠deo que mostra os v√°rios ru√≠dos que podem nascer em v√°rios contornos do sistema de regula√ß√£o subordinado. Para fazer isso, fixei o microfone em contato direto com o motor - a uma dist√¢ncia do motor, o som √© quase inaud√≠vel. Embora dependa do mecanismo, diferentes mecanismos ‚Äúsoam‚Äù de maneira diferente.</font></font><br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.youtube.com/embed/MNZu3JD6y3w%3Ffeature%3Doembed&amp;usg=ALkJrhgZjrRw7apNIcqtcIw7EDd1s_v0Gw" frameborder="0" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No in√≠cio do v√≠deo, o ru√≠do do loop atual √© mostrado. Somente o loop de corrente com dois reguladores de corrente foi ativado. Um barulho apareceu no motor, que meu colega comparou com o barulho de um cano atrav√©s do qual a √°gua flui. Parece um ru√≠do "branco". Esse ru√≠do √© gerado devido ao ru√≠do das medi√ß√µes de corrente de fase. Devido ao componente proporcional relativamente grande (necess√°rio para a velocidade requerida), os reguladores de corrente captam todas as pequenas flutua√ß√µes na medi√ß√£o de corrente e as amplificam, transmitindo a tens√£o do inversor para a tarefa. I.e. Inicialmente, a corrente no motor √© suave e n√£o produz ru√≠do, mas sua medi√ß√£o √© barulhenta, os reguladores de corrente tentam compens√°-lo, "puxam" a tens√£o do inversor, fazendo com que a corrente real no motor realmente "fa√ßa ru√≠do". Na forma de onda, voc√™ pode v√™-lo assim:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/f6e/3af/3a8/f6e3af3a825347168aca72d2657f4673.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 12. Oscilograma do transit√≥rio do salto na tarefa (1A) dos reguladores de corrente e seu subsequente ‚Äúru√≠do‚Äù. O feedback sobre os reguladores de corrente (sinal do ADC) e a sa√≠da dos reguladores alimentados no inversor s√£o mostrados. Em uma c√©lula ao longo do eixo do tempo 4.2ms.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
O oscilograma mostra n√£o apenas o ru√≠do, mas tamb√©m o processo transit√≥rio dos reguladores de corrente quando ligado. A corrente √© calculada em menos de 1ms, e o transit√≥rio est√° pr√≥ximo de ser ajustado para um √≥timo t√©cnico. O ru√≠do na medi√ß√£o de corrente na ordem de + -0,02A leva a uma altera√ß√£o na tens√£o de sa√≠da em 20% da corrente, que √© ouvida como ru√≠do. Se voc√™ diminuir a velocidade dos reguladores 10 vezes, poder√° obter a seguinte imagem:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/68d/112/db7/68d112db768a4cdfa435395fa6512316.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 13. O oscilograma do processo transit√≥rio do salto na tarefa (1A) dos reguladores de corrente com 10 Kp e Ki subestimados em rela√ß√£o √† configura√ß√£o t√©cnica ideal. Em uma c√©lula ao longo do eixo do tempo 4.2ms.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Os controladores atuais ficaram macios e silenciosos, como o algod√£o, e n√£o est√£o absolutamente interessados ‚Äã‚Äãem responder a algum ru√≠do no canal anal√≥gico - bem como em suas pr√≥prias tarefas ... </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Al√©m disso, o v√≠deo mostra v√°rios sons do controlador de posi√ß√£o. Existem muitas experi√™ncias l√°, mostrarei o √∫ltimo caso - auto-oscila√ß√µes com um controlador de posi√ß√£o Kp excessivamente alto. Como o sensor de posi√ß√£o √© incremental, com um KP grande, uma mudan√ßa de posi√ß√£o em apenas uma marca deixa o controlador "louco" muito nervoso, jogando a tarefa no loop de velocidade e, consequentemente, na corrente. Algo assim:</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/83a/3d2/55e/83a3d255e2e14c15af0ffb7d4fac0c10.png"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 14. Auto-oscila√ß√µes do contorno da posi√ß√£o com Kp excessivamente alto. Violeta e vermelho indicam a corrente do estator em forma√ß√£o de momento (refer√™ncia e atual), azul - posi√ß√£o do codificador em marcas (incrementos), azul - sa√≠da do controlador de posi√ß√£o (refer√™ncia ao loop de velocidade).</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Pode-se observar que, ao alterar a posi√ß√£o por apenas uma marca (uma ‚Äúmarca‚Äù do sensor de posi√ß√£o), o sistema de controle lan√ßa a refer√™ncia atual em 0,3A. Este √© um ponto consider√°vel, dada a classifica√ß√£o do motor de 5A, que leva ao in√≠cio do movimento e, consequentemente, a flutua√ß√µes. O v√≠deo mostra como soam as oscila√ß√µes ‚Äúassustadoras‚Äù, embora a posi√ß√£o salte uma marca inofensiva para frente e para tr√°s.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nesse sentido, surge uma quest√£o filos√≥fica: quais vibra√ß√µes e ru√≠dos s√£o terr√≠veis e quais n√£o valem a pena prestar aten√ß√£o? Tudo depende do objeto - onde o servo √© usado. Se esta √© uma m√°quina de tr√™s coordenadas com uma caixa de marchas e folgas, um bra√ßo manipulador para soldagem ou um servo acionamento de alta velocidade de algum mecanismo de dire√ß√£o, ent√£o o ‚Äútoque‚Äù n√£o √© t√£o terr√≠vel l√°. Nessas aplica√ß√µes, √© apenas o ru√≠do ac√∫stico que pode causar insatisfa√ß√£o, mas quase nada mostrado no v√≠deo afetar√° o processo t√©cnico. Mas se for um acionamento direto para posicionar qualquer substrato em uma f√°brica de sil√≠cio ou se for um acionamento direto para um microsc√≥pio, n√£o haver√° ru√≠do da palavra. N√£o apenas os rangidos do loop de posi√ß√£o do codificador, mas mesmo esse ru√≠do quase inaud√≠vel do loop atual j√° pode ser um problema.Porque tudo isso √© transmitido ao corpo de trabalho e levar√° a uma viola√ß√£o da tecnologia do processo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sim, devo dizer que todos os sons mostrados no v√≠deo n√£o s√£o apenas sons. Se voc√™ agarrar o eixo, todos sentir√£o e muito bem. Os dedos humanos s√£o muito sens√≠veis - muito melhores do que muitos sensores. Mesmo esse ru√≠do de "√°gua corrente" dos reguladores atuais √© sentido. Assim como em um cano de √°gua. Portanto, para tarefas servo que interagem com seres humanos, ru√≠dos e vibra√ß√µes tamb√©m s√£o indesej√°veis. Imagine um simulador de avi√£o com um cockpit inclinado, onde as unidades embaixo dele esmagam e gemem.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como lidar com o barulho? Bem, com o contorno da posi√ß√£o mais ou menos claro - voc√™ precisa colocar um sensor mais preciso. O codificador dessas experi√™ncias com 1000 tags √© o sensor "galinhas para rir" no campo de servo de alta precis√£o. Se eles colocarem um codificador, ent√£o cerca de cem mil marcas. E, mais frequentemente, eles colocam um sensor de posi√ß√£o anal√≥gico, que fornece um sinal seno / cosseno. Usando um bom ADC e superamostragem (medindo com muito mais frequ√™ncia do que o necess√°rio e, em seguida, calculando a m√©dia do resultado), voc√™ pode obter uma ordem de magnitude de precis√£o maior que o codificador.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O que fazer com o ru√≠do ADC no loop atual? Primeiro, procure uma fonte de ru√≠do. Neste inversor, foi encontrada uma fonte de ru√≠do - isto √© DC / DC, tornando o instrumento 5V a partir da fonte de alimenta√ß√£o de entrada e montado na placa do inversor. A fia√ß√£o da placa n√£o √© totalmente bem-sucedida e o DC / DC "fonit" para todas as faixas da placa que passam. O ADC do microcontrolador em si √© muito menos barulhento que o ru√≠do deste DC / DC. Em segundo lugar, a mesma superamostra pode ser usada se o desempenho do ADC permitir isso. Em terceiro lugar, voc√™ precisa escolher a faixa de medi√ß√£o correta. Trabalhei com um motor 5A a partir de um conversor 60A. Consequentemente, toda a gama do ADC para medir corrente tamb√©m √© pr√≥xima de 60A. Se o alcance fosse 20A, o mesmo ru√≠do no canal anal√≥gico ap√≥s a convers√£o para amp√®res seria tr√™s vezes menor.</font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas o barulho do ADC n√£o √© tudo. N√£o mostrei no v√≠deo um dos ru√≠dos principais que n√£o √© aud√≠vel - o ru√≠do do PWM. A frequ√™ncia do PWM nessas experi√™ncias foi definida como igual a 20 kHz - na fronteira da audibilidade. Mas isso n√£o significa que essas vibra√ß√µes n√£o sejam transmitidas ao eixo do rotor. √â necess√°rio medir a ondula√ß√£o da corrente no motor causada por uma determinada frequ√™ncia PWM, recalcul√°-la no momento e, em seguida, j√° √© poss√≠vel avaliar se ela ‚Äúpassar√°‚Äù para o eixo ou n√£o. A Figura 15 mostra a corrente de ondula√ß√£o na fase do motor, medida por um sensor externo e um oscilosc√≥pio.</font></font><br>
 <br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7c0/d4d/ef6/7c0d4def6a0d4996b64edbb744a9822b.jpg"></div><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fig. 15. Ondula√ß√£o de corrente na fase do motor a uma frequ√™ncia PWM de 20 kHz. A magnitude da ondula√ß√£o √© de 0,3A.</font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
A ondula√ß√£o atual em 0.3A √© bastante significativa. Em vez disso, seria significativo se posicion√°ssemos substratos de sil√≠cio na f√°brica da Intel com esta unidade. Felizmente, isso n√£o brilha especificamente para esses tipos de motores e voc√™ pode esquecer o problema. Mas e se voc√™ precisar fazer um passeio mais s√©rio? Para iniciantes, voc√™ pode aumentar a frequ√™ncia do PWM. Os transistores modernos de efeito de campo de pot√™ncia podem fornecer uma frequ√™ncia de comuta√ß√£o de at√© 500 kHz. No entanto, existem ... tr√™s problemas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O primeiro problema √© que, com o aumento da frequ√™ncia PWM, a influ√™ncia do chamado ‚Äútempo morto‚Äù aumenta (alguns chamam de pausa do tempo morto, mas isso est√° errado - a corrente flui para l√°). Este √© o momento em que o transistor inferior do inversor j√° foi desligado e o superior ainda n√£o foi ligado (e vice-versa). Esse tempo √© o mesmo para um tipo de transistor e, como porcentagem do per√≠odo PWM, torna-se cada vez mais com o aumento da frequ√™ncia do PWM. O tempo morto distorce a tens√£o de sa√≠da do inversor, adicionando n√£o linearidade aos reguladores de corrente do inversor.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O segundo problema √© que, com o aumento da frequ√™ncia PWM, fica cada vez mais dif√≠cil gerar esse mesmo microcontrolador PWM. O microcontrolador faz o PWM usando um timer de hardware que marca por unidade a cada ciclo de clock do microcontrolador. Ao definir a compara√ß√£o com o timer, o programador escolhe a que horas abrir a tecla. O que acontecer√° em um sistema com um microcontrolador a 100 MHz e uma frequ√™ncia PWM de 500 kHz? Dividimos um pelo outro, obtemos 200 quanta (discretos) de definir o ponto definido. As configura√ß√µes de 200 voltagens para o PWM n√£o s√£o adequadas "da palavra". Um servo precisa de pelo menos duas ordens de magnitude a mais. Para isso, alguns fabricantes de microcontroladores integram o chamado PWM de alta resolu√ß√£o em seus produtos - eles permitem contar o tempo de abertura principal com uma resolu√ß√£o de tempo v√°rias vezes melhor do que um √∫nico ciclo de rel√≥gio de microcontrolador.Existe essa possibilidade neste microcontrolador, no entanto, o terceiro problema impede a inclus√£o de PWM de alta resolu√ß√£o.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O terceiro problema s√£o os sensores de corrente. No inversor utilizado, s√£o do tipo shunt e est√£o em s√©rie com as teclas inferiores do inversor. E isso significa que √© poss√≠vel medir a corrente em fase apenas no momento em que a tecla inferior estiver aberta. E isso significa que a inicializa√ß√£o do ADC deve ser sincronizada com a opera√ß√£o do PWM e a medi√ß√£o deve ser realizada exatamente no momento em que a tecla inferior √© aberta. O problema √© que os transientes nos circuitos anal√≥gicos n√£o t√™m tempo para terminar, se a frequ√™ncia PWM for muito alta - a corrente come√ßa a ser medida com um erro. Em geral, tudo √© complicado ...</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Existe uma maneira fundamentalmente diferente - alguns fabricantes de servoconversores geralmente recusam o PWM e fazem um loop de corrente de hardware no FPGA ou em amplificadores operacionais operando no modo linear e dissipando todo o excesso de energia que o PWM foi projetado para economizar. </font><font style="vertical-align: inherit;">Mas esta √© uma hist√≥ria muito, muito diferente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclus√µes</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Os requisitos para os servos s√£o muito diferentes - algu√©m precisa de um modo de controle passo a passo para uma simples m√°quina CNC lenta (o pre√ßo de emiss√£o √© de motorista + motor alguns milhares de rublos), algu√©m precisa de tal qualidade para manter a posi√ß√£o que at√© o ru√≠do do circuito atual se torna um problema. </font><font style="vertical-align: inherit;">Este artigo ‚Äúno topo‚Äù fala sobre alguns aspectos do trabalho do sistema de regula√ß√£o subordinada e a qualidade do trabalho do loop de posi√ß√£o, a fim de apresentar ao leitor algo diferente dos conhecidos ‚Äústepmen‚Äù. </font><font style="vertical-align: inherit;">A qualidade do servoconversor mostrada nessas experi√™ncias √©, de fato, muito med√≠ocre, principalmente devido √† baixa resolu√ß√£o do sensor de posi√ß√£o do rotor. </font><font style="vertical-align: inherit;">Ao usar um sensor com boa resolu√ß√£o, a qualidade da regula√ß√£o aumenta acentuadamente.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Publicidade</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Essas experi√™ncias foram realizadas no kit de depura√ß√£o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VectorCARD K1921BK01T</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da NPF Vektor LLC, constru√≠do com base no microcontrolador dom√©stico K1921BK01T </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">do NIIET OJSC (ARM Cortex-M4F, 100 MHz)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">O kit de depura√ß√£o inclui todo o equipamento mostrado no artigo em v√≠deo, incluindo o software do microcontrolador nos c√≥digos-fonte com este sistema de regula√ß√£o subordinada de tr√™s ciclos, bem como o software para observa√ß√£o de oscilogramas de quaisquer vari√°veis ‚Äã‚Äãdo sistema de controle.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Links relacionados aos meus outros artigos</font></font></h2><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controle vetorial do motor el√©trico ‚Äúon finger‚Äù </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todos para depura√ß√£o de software de microcontroladores em uma unidade el√©trica </font></font></a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Novo microcontrolador dom√©stico de controle de motor K1921VK01T do OJSC ‚ÄúNIIET‚Äù</font></font></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V√≠deo b√¥nus</font></font></b><div class="spoiler_text">         :<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.youtube.com/embed/LxRMKj_8Bcg%3Ffeature%3Doembed&amp;usg=ALkJrhi-anhnK8xW1CYN-DcsTS5tE4cOhg" frameborder="0" allowfullscreen=""></iframe></div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt392837/">https://habr.com/ru/post/pt392837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../In146151/index.html">‡§è‡§ú‡§æ‡§á‡§≤ ‡§°‡§æ‡§á‡§µ ‡§°‡•á‡§™‡•ç‡§•: ‡§è‡§ú‡§æ‡§á‡§≤ ‡§á‡§µ‡•à‡§≤‡•ç‡§Ø‡•Ç‡§è‡§∂‡§® ‡§´‡•ç‡§∞‡•á‡§Æ‡§µ‡§∞‡•ç‡§ï</a></li>
<li><a href="../In146152/index.html">‡§ü‡•à‡§≤‡•á‡§Ç‡§ü ‡§Æ‡•à‡§™ ‡§∞‡§ø‡§ú‡•ç‡§Ø‡•Ç‡§Æ‡•á ‡§µ‡§ø‡§ú‡§º‡•Å‡§Ö‡§≤‡§æ‡§á‡§ú‡§º‡§∞ - ‡§∞‡§ø‡§≤‡•Ä‡§ú‡§º ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§∞‡§æ‡§∏‡•ç‡§§‡•á ‡§™‡§∞ ‡§è‡§°‡§µ‡•á‡§Ç‡§ö‡§∞‡•ç‡§∏</a></li>
<li><a href="../pt392829/index.html">PO2RT: coworking em altura</a></li>
<li><a href="../pt392831/index.html">Esta√ß√£o meteorol√≥gica m√≥vel no Arduino</a></li>
<li><a href="../pt392833/index.html">Adaptador de programa√ß√£o sem fio Arduino ou AVR com carregador ESP8266</a></li>
<li><a href="../pt392839/index.html">M√≥dulo controlador universal para a Internet das coisas</a></li>
<li><a href="../pt392841/index.html">Projetores Epson e apresenta√ß√µes m√≥veis - Dicas para projetores</a></li>
<li><a href="../pt392843/index.html">Que dist√¢ncia um carro aut√¥nomo tem que percorrer para provar sua confiabilidade</a></li>
<li><a href="../pt392845/index.html">A SpaceX enviou fotos do lan√ßamento mais bem sucedido da sonda Falcon 9 em sua hist√≥ria</a></li>
<li><a href="../pt392849/index.html">Espumas met√°licas podem proteger v√°rios tipos de radia√ß√£o e at√© parar balas perfurantes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>