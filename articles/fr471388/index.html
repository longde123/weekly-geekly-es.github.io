<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ¿â€ğŸ’» ğŸ”„ ğŸ‘©ğŸ¿â€ğŸ­ Quelques fonctionnalitÃ©s du dÃ©veloppement des compÃ©tences pour Alice ğŸ§• ğŸ‰ ğŸ‘©â€ğŸš€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous vivez Ã  Moscou et conduisez votre voiture? Si oui, comment payez-vous le stationnement? Envoyer des SMS? Payer via l'application Moscow Parking? ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Quelques fonctionnalitÃ©s du dÃ©veloppement des compÃ©tences pour Alice</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471388/"><img src="https://habrastorage.org/webt/lh/sw/na/lhswnatvipaiuqcpqxd0_a-jm1y.png"><br><br>  Vous vivez Ã  Moscou et conduisez votre voiture?  Si oui, comment payez-vous le stationnement?  Envoyer des SMS?  Payer via l'application Moscow Parking?  Utilisez le bot dans Telegram?  Â«Tout cela est inconfortableÂ», ai-je dÃ©cidÃ©, et j'ai crÃ©Ã© mon habiletÃ© pour Alice de payer pour le stationnement par la voix.  De plus, Alice est dÃ©jÃ  intÃ©grÃ©e Ã  Yandex.Navigator.  Maintenant, vous pouvez simplement dire au navigateur quelque chose comme "Alice, demandez Ã  <i>Moscow Parking de</i> <i>payer le parking 3209 pendant 30 minutes</i> ". <br><br>  Qu'est-ce que j'ai rencontrÃ© lors du dÃ©veloppement d'une compÃ©tence? <br><a name="habracut"></a><br><h2>  La session </h2><br>  Pour dÃ©marrer la compÃ©tence Ã  partir d'un dÃ©veloppeur tiers, Alice doit dire "Alice, lance la compÃ©tence telle ou telle chose".  C'est bon et pratique si vous avez une longue communication avec la compÃ©tence - par exemple, le jeu dÃ©marre.  Si vous avez besoin de dire une phrase, dâ€™obtenir une rÃ©ponse et câ€™est tout, alors Â«saisir une compÃ©tenceÂ» nâ€™est pas pratique - avec cette entrÃ©e, lorsque vous aurez fini de travailler avec une compÃ©tence, vous devrez la Â«quitterÂ». <br><br>  Pour une phrase, il y a une solution des dÃ©veloppeurs d'Alice - vous devez dire: Â«Alice demande la compÃ©tence pour <i>faire telle ou telle chose</i> Â».  Cependant, l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemple python</a> des dÃ©veloppeurs d'Alice ne prend pas en charge un tel lancement de compÃ©tence: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req[<span class="hljs-string"><span class="hljs-string">'session'</span></span>][<span class="hljs-string"><span class="hljs-string">'new'</span></span>]: <span class="hljs-comment"><span class="hljs-comment"># -  return</span></span></code> </pre> <br>  Chaque fois qu'une compÃ©tence est lancÃ©e, incl.  et avec la commande "Alice demande une <i>compÃ©tence</i> ...", la valeur de <i>session.new</i> est <i>True</i> .  Par consÃ©quent, tous les codes de traitement ultÃ©rieurs ne seront pas exÃ©cutÃ©s.  La solution consiste Ã  vÃ©rifier le texte de <i>session.command</i> - il doit Ãªtre vide. <br><br>  Soit dit en passant, si vous avez Â«entrÃ©Â» une compÃ©tence, puis par dÃ©faut pour toutes les compÃ©tences, Alice prend en charge les phrases de sortie - Â«Alice, arrÃªtez-laÂ» et Â«Alice, revenezÂ».  Si vous souhaitez terminer la session avec force avec la compÃ©tence, vous devez transmettre <i>end_session</i> Ã©gal Ã  <i>True</i> dans la rÃ©ponse.  Mais cela ne fonctionne qu'avec Yandex.Station - sur d'autres appareils, la sortie de la compÃ©tence dans ce cas ne fonctionne pas. <br><br><h2>  Travailler avec des nombres </h2><br>  Ma compÃ©tence consiste Ã  travailler avec des chiffres - d'abord reconnaÃ®tre le numÃ©ro de tÃ©lÃ©phone de l'utilisateur, puis reconnaÃ®tre le numÃ©ro de stationnement. <br><br>  Dans l'exemple ci-dessus de Yandex utilisÃ© <br><br><pre> <code class="python hljs">req[<span class="hljs-string"><span class="hljs-string">'request'</span></span>][<span class="hljs-string"><span class="hljs-string">'original_utterance'</span></span>].lower()</code> </pre> <br>  pour travailler avec une demande de l'utilisateur.  Tout d'abord, j'ai utilisÃ© ce champ de la demande.  Afin de reconnaÃ®tre le numÃ©ro de tÃ©lÃ©phone de l'utilisateur, j'ai dÃ» lui demander de nommer chaque chiffre du numÃ©ro sÃ©parÃ©ment - par exemple, Â«neuf un six un deux trois quatre cinq six septÂ».  Et dans le code - remplacez les valeurs de texte ("neuf") par numÃ©rique (9).  Il s'est avÃ©rÃ© encore plus drÃ´le avec le code de stationnement - j'appelle le code "3209" comme "trente-deux zÃ©ro neuf", il y avait beaucoup de remplacements dans le code comme <br><br><pre> <code class="python hljs">s.replace(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'32'</span></span>).replace(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'31'</span></span>).replace(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span>)</code> </pre> <br>  Ã‰tant donnÃ© que sur la base du texte de la demande dans le code de compÃ©tence, j'ai essayÃ© de comprendre ce que l'utilisateur veut (la machine d'Ã©tat n'est pas utilisÃ©e dans la compÃ©tence), j'ai dÃ» faire cette conversion avec presque toutes les (!) Demandes d'utilisateurs. <br><br>  Il s'est avÃ©rÃ© que les serveurs d'Alice font dÃ©jÃ  tout pour vous (et mÃªme plus).  Juste au lieu de <i>request.original_utterance,</i> vous devez utiliser <i>request.command</i> .  Oui, cela est indiquÃ© dans la documentation.  Dans l'info-bulle de l'exemple de rÃ©ponse. <br><blockquote>  Champ de service: demande utilisateur convertie pour le traitement interne d'Alice.  Pendant la conversion, le texte, en particulier, est effacÃ© des signes de ponctuation et les chiffres sont convertis en nombres. </blockquote>  Il est Ã©trange que dans l'exemple des dÃ©veloppeurs d'Alice (lien ci-dessus) le texte original soit utilisÃ© ( <i>request.original_utterance</i> ).  En fait, encore plus est fait dans <i>request.command</i> (qui n'est pas dÃ©crit dans la documentation).  Par exemple, un numÃ©ro de tÃ©lÃ©phone est converti au format <i>(916) 123-45-67</i> - maintenant l'utilisateur de ma compÃ©tence peut appeler le tÃ©lÃ©phone dans n'importe quel format qui lui convient.  De plus, les phrases Â«Alice, demandez telle ou telle compÃ©tenceÂ», les messages Â«AliceÂ» sont supprimÃ©s, les fautes de frappe sont corrigÃ©es. <br><br>  Du cÃ´tÃ© d'Alice, des parties individuelles des demandes (numÃ©ros, noms, adresses, dates) peuvent Ãªtre converties en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">entitÃ©s nommÃ©es</a> .  Mais Ã§a marche bizarre.  Demande <i>79161234567 1234</i> , en entitÃ©s nommÃ©es converties en deux nombres - <i>791612345 <b>70</b></i> et <i>1234</i> .  Pourquoi le premier numÃ©ro s'avÃ¨re diffÃ©rent, il n'a pas Ã©tÃ© possible de le savoir - ceux-lÃ .  Le support Yandex.Dialog rÃ©flÃ©chit toujours Ã  la rÃ©ponse. <br><br><h2>  Temps de rÃ©ponse des compÃ©tences </h2><br>  Alice attend une rÃ©ponse de la compÃ©tence dans les 3 secondes (Google a cette limite - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">5/10 secondes</a> ).  Ma compÃ©tence consiste Ã  accÃ©der Ã  des serveurs tiers pour dÃ©marrer et terminer le stationnement.  Ils rÃ©pondent lentement.  Parfois, en 3 secondes, ma compÃ©tence n'a pas le temps de rÃ©pondre.  Individuellement, il n'a pas Ã©tÃ© possible d'augmenter le temps de rÃ©ponse de la compÃ©tence.  Par consÃ©quent, dans certains cas, il a fallu sacrifier la commoditÃ© - par exemple, au dÃ©but du stationnement, la compÃ©tence ne demande pas la voiture rÃ©elle spÃ©cifiÃ©e dans le profil de l'application Parking Moscou, mais utilise celle qu'elle a conservÃ©e lors de l'autorisation de l'utilisateur. <br><br>  Eh bien, sur les droits de "je suis PR";) - </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr471388/">https://habr.com/ru/post/fr471388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr471372/index.html">Pourquoi les entreprises devraient-elles gÃ©rer les smartphones des employÃ©s?</a></li>
<li><a href="../fr471374/index.html">Nous vous invitons Ã  NIXMultiConf # 3 Ã  Kharkov</a></li>
<li><a href="../fr471378/index.html">OÃ¹ commence la programmation?</a></li>
<li><a href="../fr471380/index.html">Les pentesters Ã  la pointe de la cybersÃ©curitÃ©</a></li>
<li><a href="../fr471384/index.html">Ligue d'Internet gratuit</a></li>
<li><a href="../fr471394/index.html">Habr Weekly # 22 / Comment communiquer en Ã©quipe, nouvelles taxes pour les mÃ©ga-corporations, TON sur les doigts, Amazon copie les produits</a></li>
<li><a href="../fr471396/index.html">Comment la grille CSS modifie la structure du contenu</a></li>
<li><a href="../fr471402/index.html">Iptables et filtrage du trafic des dissidents pauvres et paresseux</a></li>
<li><a href="../fr471404/index.html">Est-il possible de gagner plus en travaillant comme ingÃ©nieur dans un autre pays?</a></li>
<li><a href="../fr471408/index.html">Une alternative aux onduleurs Ã  phase vibrante: les lignes de transmission (TQWT, ALT)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>