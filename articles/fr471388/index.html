<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍💻 🔄 👩🏿‍🏭 Quelques fonctionnalités du développement des compétences pour Alice 🧕 🎉 👩‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vous vivez à Moscou et conduisez votre voiture? Si oui, comment payez-vous le stationnement? Envoyer des SMS? Payer via l'application Moscow Parking? ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Quelques fonctionnalités du développement des compétences pour Alice</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471388/"><img src="https://habrastorage.org/webt/lh/sw/na/lhswnatvipaiuqcpqxd0_a-jm1y.png"><br><br>  Vous vivez à Moscou et conduisez votre voiture?  Si oui, comment payez-vous le stationnement?  Envoyer des SMS?  Payer via l'application Moscow Parking?  Utilisez le bot dans Telegram?  «Tout cela est inconfortable», ai-je décidé, et j'ai créé mon habileté pour Alice de payer pour le stationnement par la voix.  De plus, Alice est déjà intégrée à Yandex.Navigator.  Maintenant, vous pouvez simplement dire au navigateur quelque chose comme "Alice, demandez à <i>Moscow Parking de</i> <i>payer le parking 3209 pendant 30 minutes</i> ". <br><br>  Qu'est-ce que j'ai rencontré lors du développement d'une compétence? <br><a name="habracut"></a><br><h2>  La session </h2><br>  Pour démarrer la compétence à partir d'un développeur tiers, Alice doit dire "Alice, lance la compétence telle ou telle chose".  C'est bon et pratique si vous avez une longue communication avec la compétence - par exemple, le jeu démarre.  Si vous avez besoin de dire une phrase, d’obtenir une réponse et c’est tout, alors «saisir une compétence» n’est pas pratique - avec cette entrée, lorsque vous aurez fini de travailler avec une compétence, vous devrez la «quitter». <br><br>  Pour une phrase, il y a une solution des développeurs d'Alice - vous devez dire: «Alice demande la compétence pour <i>faire telle ou telle chose</i> ».  Cependant, l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemple python</a> des développeurs d'Alice ne prend pas en charge un tel lancement de compétence: <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> req[<span class="hljs-string"><span class="hljs-string">'session'</span></span>][<span class="hljs-string"><span class="hljs-string">'new'</span></span>]: <span class="hljs-comment"><span class="hljs-comment"># -  return</span></span></code> </pre> <br>  Chaque fois qu'une compétence est lancée, incl.  et avec la commande "Alice demande une <i>compétence</i> ...", la valeur de <i>session.new</i> est <i>True</i> .  Par conséquent, tous les codes de traitement ultérieurs ne seront pas exécutés.  La solution consiste à vérifier le texte de <i>session.command</i> - il doit être vide. <br><br>  Soit dit en passant, si vous avez «entré» une compétence, puis par défaut pour toutes les compétences, Alice prend en charge les phrases de sortie - «Alice, arrêtez-la» et «Alice, revenez».  Si vous souhaitez terminer la session avec force avec la compétence, vous devez transmettre <i>end_session</i> égal à <i>True</i> dans la réponse.  Mais cela ne fonctionne qu'avec Yandex.Station - sur d'autres appareils, la sortie de la compétence dans ce cas ne fonctionne pas. <br><br><h2>  Travailler avec des nombres </h2><br>  Ma compétence consiste à travailler avec des chiffres - d'abord reconnaître le numéro de téléphone de l'utilisateur, puis reconnaître le numéro de stationnement. <br><br>  Dans l'exemple ci-dessus de Yandex utilisé <br><br><pre> <code class="python hljs">req[<span class="hljs-string"><span class="hljs-string">'request'</span></span>][<span class="hljs-string"><span class="hljs-string">'original_utterance'</span></span>].lower()</code> </pre> <br>  pour travailler avec une demande de l'utilisateur.  Tout d'abord, j'ai utilisé ce champ de la demande.  Afin de reconnaître le numéro de téléphone de l'utilisateur, j'ai dû lui demander de nommer chaque chiffre du numéro séparément - par exemple, «neuf un six un deux trois quatre cinq six sept».  Et dans le code - remplacez les valeurs de texte ("neuf") par numérique (9).  Il s'est avéré encore plus drôle avec le code de stationnement - j'appelle le code "3209" comme "trente-deux zéro neuf", il y avait beaucoup de remplacements dans le code comme <br><br><pre> <code class="python hljs">s.replace(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'32'</span></span>).replace(<span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'31'</span></span>).replace(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'0'</span></span>)</code> </pre> <br>  Étant donné que sur la base du texte de la demande dans le code de compétence, j'ai essayé de comprendre ce que l'utilisateur veut (la machine d'état n'est pas utilisée dans la compétence), j'ai dû faire cette conversion avec presque toutes les (!) Demandes d'utilisateurs. <br><br>  Il s'est avéré que les serveurs d'Alice font déjà tout pour vous (et même plus).  Juste au lieu de <i>request.original_utterance,</i> vous devez utiliser <i>request.command</i> .  Oui, cela est indiqué dans la documentation.  Dans l'info-bulle de l'exemple de réponse. <br><blockquote>  Champ de service: demande utilisateur convertie pour le traitement interne d'Alice.  Pendant la conversion, le texte, en particulier, est effacé des signes de ponctuation et les chiffres sont convertis en nombres. </blockquote>  Il est étrange que dans l'exemple des développeurs d'Alice (lien ci-dessus) le texte original soit utilisé ( <i>request.original_utterance</i> ).  En fait, encore plus est fait dans <i>request.command</i> (qui n'est pas décrit dans la documentation).  Par exemple, un numéro de téléphone est converti au format <i>(916) 123-45-67</i> - maintenant l'utilisateur de ma compétence peut appeler le téléphone dans n'importe quel format qui lui convient.  De plus, les phrases «Alice, demandez telle ou telle compétence», les messages «Alice» sont supprimés, les fautes de frappe sont corrigées. <br><br>  Du côté d'Alice, des parties individuelles des demandes (numéros, noms, adresses, dates) peuvent être converties en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">entités nommées</a> .  Mais ça marche bizarre.  Demande <i>79161234567 1234</i> , en entités nommées converties en deux nombres - <i>791612345 <b>70</b></i> et <i>1234</i> .  Pourquoi le premier numéro s'avère différent, il n'a pas été possible de le savoir - ceux-là.  Le support Yandex.Dialog réfléchit toujours à la réponse. <br><br><h2>  Temps de réponse des compétences </h2><br>  Alice attend une réponse de la compétence dans les 3 secondes (Google a cette limite - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">5/10 secondes</a> ).  Ma compétence consiste à accéder à des serveurs tiers pour démarrer et terminer le stationnement.  Ils répondent lentement.  Parfois, en 3 secondes, ma compétence n'a pas le temps de répondre.  Individuellement, il n'a pas été possible d'augmenter le temps de réponse de la compétence.  Par conséquent, dans certains cas, il a fallu sacrifier la commodité - par exemple, au début du stationnement, la compétence ne demande pas la voiture réelle spécifiée dans le profil de l'application Parking Moscou, mais utilise celle qu'elle a conservée lors de l'autorisation de l'utilisateur. <br><br>  Eh bien, sur les droits de "je suis PR";) - </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr471388/">https://habr.com/ru/post/fr471388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr471372/index.html">Pourquoi les entreprises devraient-elles gérer les smartphones des employés?</a></li>
<li><a href="../fr471374/index.html">Nous vous invitons à NIXMultiConf # 3 à Kharkov</a></li>
<li><a href="../fr471378/index.html">Où commence la programmation?</a></li>
<li><a href="../fr471380/index.html">Les pentesters à la pointe de la cybersécurité</a></li>
<li><a href="../fr471384/index.html">Ligue d'Internet gratuit</a></li>
<li><a href="../fr471394/index.html">Habr Weekly # 22 / Comment communiquer en équipe, nouvelles taxes pour les méga-corporations, TON sur les doigts, Amazon copie les produits</a></li>
<li><a href="../fr471396/index.html">Comment la grille CSS modifie la structure du contenu</a></li>
<li><a href="../fr471402/index.html">Iptables et filtrage du trafic des dissidents pauvres et paresseux</a></li>
<li><a href="../fr471404/index.html">Est-il possible de gagner plus en travaillant comme ingénieur dans un autre pays?</a></li>
<li><a href="../fr471408/index.html">Une alternative aux onduleurs à phase vibrante: les lignes de transmission (TQWT, ALT)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>