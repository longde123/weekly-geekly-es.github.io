<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙌 👊 🎅🏾 Installer ROS sur un Raspberry Pi 🧖🏼 🙆🏼 🖖🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'ai déjà écrit plus tôt sur l'installation de rosserial_arduino pour l'interaction du microcontrôleur Arduino avec la plate-forme robotique ROS dans ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Installer ROS sur un Raspberry Pi</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/385493/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'ai déjà écrit plus tôt sur l'installation de rosserial_arduino pour l'interaction du microcontrôleur Arduino avec la plate-forme robotique ROS dans un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">article précédent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">rosserial_arduino est un package de la pile rosserial conçu pour la plate-forme ROS et «transforme» la carte Arduino en un nœud ROS autonome avec lequel d'autres composants du système peuvent interagir. </font><font style="vertical-align: inherit;">Lors de l'utilisation d'Arduino pour des projets robotiques, il y a une limitation importante: Arduino ne peut pas être utilisé comme un nœud informatique à part entière qui peut gérer toutes les opérations nécessaires au fonctionnement normal du robot. </font><font style="vertical-align: inherit;">Par exemple, vous ne pouvez pas exécuter de scripts OpenCV dessus pour des tâches de vision par ordinateur. </font><font style="vertical-align: inherit;">Dans cet article, je veux parler de mon expérience de l'installation d'un système ROS et de la connexion d'un Arduino à un micro-ordinateur Raspberry Pi à l'aide du package rosserial_arduino déjà familier.</font></font><br>
<br>
<img src="https://habrastorage.org/files/90a/722/adb/90a722adbfe44d879f3d1fd7cd317952.JPG" alt="image"><br>
<br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Motivation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir découvert la plate-forme rosserial_arduino, j'avais une question: puis-je utiliser Arduino en conjonction avec un micro-ordinateur plus puissant de manière à rendre le robot plus indépendant de l'ordinateur portable. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, j'ai eu l'idée d'essayer ROS sur un micro-ordinateur Raspberry Pi. Le Raspberry Pi est un mini-ordinateur autonome sur la carte. Il a une puce CPU, une puce graphique, un slot pour carte SD, une entrée Ethernet, plusieurs interfaces USB et une sortie vidéo HDMI pour connecter un moniteur. Vous pouvez connecter une souris, un clavier et un disque dur externe aux entrées USB. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La combinaison du Raspberry Pi et de l'Arduino est très prometteuse et a été utilisée à plusieurs reprises dans des projets robotiques.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Raspberry Pi vous permet également de connecter une caméra (webcam ou caméra spéciale RPi Board). </font><font style="vertical-align: inherit;">Un simple robot à roues sur une carte Arduino Uno modifiée est tombé entre mes mains il y a un an. </font><font style="vertical-align: inherit;">Tout à l'heure, entre mes mains était le Raspberry Pi Model B.</font></font><br>
<br>
<img src="https://habrastorage.org/files/56f/faa/000/56ffaa0003b94e6e82cf6402d210ab1f.JPG" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installation du système d'exploitation sur le Raspberry Pi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez d'abord installer la distribution Linux sur la "framboise". </font><font style="vertical-align: inherit;">La façon la plus simple de le faire est d'utiliser le gestionnaire d'installation de NOOBS OS. </font><font style="vertical-align: inherit;">La procédure à suivre peut être lue dans ce manuel sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">portail officiel Raspberry Pi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai choisi d'installer Raspbian, une distribution Debian modifiée spécialement conçue pour Raspberry. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Remarque: lors de la connexion d'un moniteur, il y a souvent des problèmes d'affichage d'une image, en particulier, cela se produit avec des moniteurs plus anciens qui n'ont pas d'entrée HDMI. </font><font style="vertical-align: inherit;">Ici, le fichier config.txt vient à notre aide - le fichier de configuration Raspberry pour les paramètres du moniteur. </font><font style="vertical-align: inherit;">Dans certains cas, il est déjà dans l'archive d'images système (Raspbian), dans le cas de NOOBS, il doit être créé à la racine de la carte SD. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insérez les lignes suivantes dans le fichier:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment"># For more options and information see</span><font></font>
<span class="hljs-comment"># http://www.raspberrypi.org/documentation/configuration/config-txt.md</span><font></font>
<span class="hljs-comment"># Some settings may impact device functionality. See link above for details</span><font></font>
 <font></font>
<span class="hljs-comment"># uncomment if you get no picture on HDMI for a default "safe" mode</span><font></font>
hdmi_safe=1<font></font>
 <font></font>
<span class="hljs-comment"># uncomment this if your display has a black border of unused pixels visible</span><font></font>
<span class="hljs-comment"># and your display can output without overscan</span><font></font>
<span class="hljs-comment">#disable_overscan=1</span><font></font>
 <font></font>
<span class="hljs-comment"># uncomment the following to adjust overscan. Use positive numbers if console</span><font></font>
<span class="hljs-comment"># goes off screen, and negative if there is too much border</span><font></font>
<span class="hljs-comment">#overscan_left=16</span><font></font>
<span class="hljs-comment">#overscan_right=16</span><font></font>
<span class="hljs-comment">#overscan_top=16</span><font></font>
<span class="hljs-comment">#overscan_bottom=16</span><font></font>
 <font></font>
<span class="hljs-comment"># uncomment to force a console size. By default it will be display's size minus</span><font></font>
<span class="hljs-comment"># overscan.</span><font></font>
<span class="hljs-comment">#framebuffer_width=1280</span><font></font>
<span class="hljs-comment">#framebuffer_height=720</span><font></font>
 <font></font>
<span class="hljs-comment"># uncomment if hdmi display is not detected and composite is being output</span><font></font>
hdmi_force_hotplug=1<font></font>
 <font></font>
<span class="hljs-comment"># uncomment to force a specific HDMI mode (this will force VGA)</span><font></font>
<span class="hljs-comment">#hdmi_group=1</span><font></font>
<span class="hljs-comment">#hdmi_mode=1</span><font></font>
 <font></font>
<span class="hljs-comment"># uncomment to force a HDMI mode rather than DVI. This can make audio work in</span><font></font>
<span class="hljs-comment"># DMT (computer monitor) modes</span><font></font>
<span class="hljs-comment">#hdmi_drive=2</span><font></font>
 <font></font>
<span class="hljs-comment"># uncomment to increase signal to HDMI, if you have interference, blanking, or</span><font></font>
<span class="hljs-comment"># no display</span><font></font>
config_hdmi_boost=4<font></font>
 <font></font>
<span class="hljs-comment"># uncomment for composite PAL</span><font></font>
<span class="hljs-comment">#sdtv_mode=2</span><font></font>
 <font></font>
<span class="hljs-comment">#uncomment to overclock the arm. 700 MHz is the default.</span><font></font>
<span class="hljs-comment">#arm_freq=800</span><font></font>
<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans ce cas, les lignes importantes sont:</font></font><br>
<br>
<pre><code class="bash hljs">hdmi_safe=1<font></font>
…<font></font>
hdmi_force_hotplug=1<font></font>
…<font></font>
config_hdmi_boost=4<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans mon cas, ces paramètres ont permis d'obtenir l'image correcte sur un moniteur avec une entrée VGA.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurer l'accès à distance au Raspberry Pi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez vous connecter à la carte Raspberry Pi via le réseau via SSH. </font><font style="vertical-align: inherit;">Pour ce faire, le Raspberry Pi doit être connecté au réseau soit via un câble Ethernet (il y a une entrée spéciale sur la carte pour cela) soit via un adaptateur Wi-Fi connecté à un port USB. </font><font style="vertical-align: inherit;">Lorsque vous connectez un câble Ethernet, Raspberry reçoit automatiquement une adresse IP sur le réseau et devient immédiatement disponible. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous utilisez un adaptateur, vous devez effectuer un certain nombre de procédures simples. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai utilisé l'adaptateur Wi-Fi TPLINK suivant: </font></font><br>
<br>
<img src="https://habrastorage.org/files/952/ec9/f72/952ec9f7266249dfb27c147e747a06df.JPG" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
connectez l'adaptateur au port USB et vérifiez si le périphérique du système est détecté par la commande</font></font><br>
<br>
<pre><code class="bash hljs">$ iwconfig
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous analysons maintenant l'espace pour rechercher les réseaux sans fil disponibles:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo iwlist wlan0 scan
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le champ ESSID dans la sortie de la commande indique le nom du point d'accès. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Connectez-vous maintenant au point d'accès pour le chiffrement WPA à l'aide de l'utilitaire wpa_supplicant. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En utilisant l'utilitaire wpa_passphrase, qui fait partie du package wpa_supplicant, nous générons un mot de passe basé sur la clé d'accès:</font></font><br>
<br>
<pre><code class="bash hljs">$ wpa_passphrase &lt;hotspot_name&gt; &lt;hotspot_access_key&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
où hotspot_name et hotspot_access_key sont le nom du point d'accès et de la clé d'accès, respectivement. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'utilitaire renvoie la chaîne psk générée. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, le bloc réseau entier, contenant le ssid du réseau et la ligne psk, est inséré à la fin du fichier de configuration /etc/wpa_supplicant/wpa_supplicant.conf et enregistré. </font><font style="vertical-align: inherit;">Enfin, nous redémarrons notre Raspberry Pi et vérifions la connexion réseau. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour vous connecter via SSH dans le terminal de l'ordinateur, vous devez exécuter la commande:</font></font><br>
<br>
<pre><code class="bash hljs">$ ssh pi@&lt;raspi_ip&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
où &lt;raspi_ip&gt; est l'adresse IP de framboise, qui peut être reconnue par la commande ifconfig exécutée directement dans le terminal de framboise. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour vous connecter via SSH avec la possibilité d'exécuter des applications graphiques, utilisez la commande:</font></font><br>
<br>
<pre><code class="bash hljs">$ ssh -X pi@&lt;raspi_ip&gt;
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez vous connecter au «Malinka» en mode Bureau à distance à l'aide du programme Virtual Network Computing (VNC). </font><font style="vertical-align: inherit;">La gestion s'effectue en transmettant les frappes sur les mouvements du clavier et de la souris d'un ordinateur à un autre et en relayant le contenu de l'écran via un réseau informatique. </font><font style="vertical-align: inherit;">Le système VNC est indépendant de la plate-forme. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout d'abord, installez le serveur VNC sur le Raspberry Pi à l'aide de la commande dans le terminal:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo apt-get install tightvncserver
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois l'installation terminée, exécutez la commande:</font></font><br>
<br>
<pre><code class="bash hljs">$ vncserver :1 -geometry 1280x800 -depth 16
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cette commande démarre le serveur VNC. </font><font style="vertical-align: inherit;">Dans ce cas, cela signifie qu'une X-session virtuelle est en cours d'exécution (présentation virtuelle du bureau Raspberry Pi). </font><font style="vertical-align: inherit;">Maintenant, après avoir démarré le client VNC et vous y être connecté, vous serez connecté à ce bureau virtuel. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Paramètre: 1 définit le numéro de port sur lequel le processus VNC s'exécutera. </font><font style="vertical-align: inherit;">Le paramètre de géométrie définit la résolution (dans ce cas, la taille) du bureau virtuel. </font><font style="vertical-align: inherit;">Le paramètre de profondeur détermine la profondeur de couleur de l'affichage du bureau en bits (8, 16 et 24, la valeur par défaut est 16). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au premier démarrage, le serveur VNC vous demandera de saisir un mot de passe, qui vous sera demandé lors de la connexion au bureau distant. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez maintenant le client VNC sur un ordinateur de bureau:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo apt-get install xtightvncviewer
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous sommes prêts à nous connecter au bureau à distance «Malinka»:</font></font><br>
<br>
<pre><code class="bash hljs">$ vncviewer &lt;raspi_ip&gt;:1
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et entrez le mot de passe. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fenêtre s'ouvre avec une image de bureau similaire à celle-ci: </font></font><br>
<br>
<img src="https://habrastorage.org/files/d95/11e/dc4/d9511edc43df42b8b9a49a8ea88f5669.png" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
il convient de noter que chaque fois que vous redémarrez une framboise, le serveur VNC doit être redémarré.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connectez Arduino à Raspberry Pi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'Arduino peut être connecté au Raspberry Pi aussi facilement qu'à un ordinateur ordinaire. </font><font style="vertical-align: inherit;">Pour commencer, installez l'IDE Arduino sur le Raspberry Pi:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo apt-get update<font></font>
$ sudo apt-get install arduino<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lancez la commande Arduino IDE:</font></font><br>
<br>
<pre><code class="bash hljs">$ arduino
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'Arduino IDE se connecte au Raspberry Pi via son câble de programmation USB. </font><font style="vertical-align: inherit;">Une telle connexion nécessite que la console série soit déconnectée. </font><font style="vertical-align: inherit;">Par défaut, le Raspberry Pi configure le port série (GPIO14-GPIO15) pour fournir des informations de démarrage. </font><font style="vertical-align: inherit;">Il vous permet également de vous connecter à votre Raspberry Pi via un appareil connecté. </font><font style="vertical-align: inherit;">Pour pouvoir programmer Arduino, vous devez désactiver cette option par défaut. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour désactiver l'autorisation, modifiez le fichier système inittab:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo nano /etc/inittab
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trouvez la ligne:</font></font><br>
<br>
<pre><code class="bash hljs">T0:23:respawn:/sbin/getty -L ttyAMA0 115200 vt100
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
commentez-le:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-comment">#T0:23:respawn:/sbin/getty -L ttyAMA0 115200 vt100</span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après cela, enregistrez et fermez le fichier. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors du démarrage, le Raspberry Pi envoie des messages de débogage au port série. </font><font style="vertical-align: inherit;">Cela peut être utile dans certains cas, mais nous devons maintenant désactiver cette fonctionnalité. </font><font style="vertical-align: inherit;">Pour ce faire, modifiez le fichier système cmdline.txt:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo nano /boot/cmdline.txt
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trouvez la ligne:</font></font><br>
<br>
<pre><code class="bash hljs">dwc_otg.lpm_enable=0 console=ttyAMA0,115200 kgdboc=ttyAMA0,115200 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline rootwait
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et supprimez le bloc de paramètres de la console pour obtenir une ligne comme celle-ci:</font></font><br>
<br>
<pre><code class="bash hljs">dwc_otg.lpm_enable=0 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline rootwait
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enregistrez et fermez le fichier. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour que les modifications soient appliquées par le système, vous devez redémarrer le Raspberry Pi:</font></font><br>
<br>
<pre><code class="bash hljs">$ sudo reboot
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez maintenant connecter la carte Arduino au port USB du Raspberry Pi, configurer l'IDE Arduino pour votre modèle de carte Arduino et y télécharger l'esquisse.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Définition de ROS et de rosserial_arduino</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai choisi d'installer ROS Indigo. </font><font style="vertical-align: inherit;">Les instructions d'installation de ROS Indigo sont décrites en détail sur la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">page officielle</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je recommande d'installer l'option d'installation ROS-Comm. </font><font style="vertical-align: inherit;">D'après ma propre expérience, je peux dire que l'installation de l'option Bureau peut prendre très longtemps de l'ordre de midi. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après avoir installé ROS et résolu toutes les dépendances avec l'utilitaire rosdep, nous compilons simplement catkin_workspace:</font></font><br>
<br>
<pre><code class="bash hljs">$ catkin_make<font></font>
$ catkin_make install<font></font>
</code></pre><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Exécution de croquis rosserial_arduino sur Raspberry Pi</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous avons installé rosserial_arduino et nous pouvons l'exécuter:</font></font><br>
<br>
<pre><code class="bash hljs">$ roslaunch rosserial_python serial_node.py /de/ttyACM0
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors du démarrage du serveur rosserial, une erreur peut se produire: aucun module nommé diagnostic_msgs.msg. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour résoudre le problème, vous devez télécharger à partir du </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">référentiel ROS officiel la</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> source des messages </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">ROS</font></a><font style="vertical-align: inherit;"> - common_msgs qui ne sont pas dans l'installation, et le charger dans le dossier du package rosserial dans le dossier de l'espace de travail, puis compiler ROS:</font></font><br>
<br>
<pre><code class="bash hljs">$ catkin_make install
</code></pre><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Commentaire! </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lors du chargement de croquis dans l'IDE Arduino, une erreur «erreur fatale: chaîne: aucune compilation de fichiers ou de répertoires terminée» peut se produire. </font><font style="vertical-align: inherit;">Cela signifie que nous avons des types de messages ROS dans ros_lib, mais ils doivent également être compilés dans les types correspondants pour Arduino. </font><font style="vertical-align: inherit;">Vous devez les compiler de cette façon:</font></font><br>
<br>
<pre><code class="bash hljs">$ <span class="hljs-built_in">cd</span> &lt;sketchbook&gt;/libraries<font></font>
$ rm -rf ros_lib<font></font>
$ rosrun rosserial_python make_libraries.py .<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez maintenant travailler avec rosserial_arduino sur le Raspberry Pi de la même manière que sur un ordinateur ordinaire: créer des nœuds, vous abonner à des sujets, publier sur des sujets, etc. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez connecter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">une caméra RPi Board</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> au Raspberry Pi </font><font style="vertical-align: inherit;">et utiliser le package cv_bridge ROS (l'interface ROS pour interagir avec OpenCV, la description peut être trouvée </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) pour effectuer des tâches de vision par ordinateur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au fait, mon robot est complètement armé:</font></font><br>
<br>
<img src="https://habrastorage.org/files/ceb/c98/e8b/cebc98e8b13640138361a5f683bd85fd.JPG" alt="image"><br>
<br>
<img src="https://habrastorage.org/files/0ac/9e4/c98/0ac9e4c987c64bbcb3c0d9f83d0654ad.JPG" alt="image"><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Conclusion</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'espère que cet article sera une bonne entrée pour commencer à travailler avec ROS sur le Raspberry Pi et vous aurez vos propres idées pour utiliser le Raspberry Pi en conjonction avec Arduino ou d'autres microcontrôleurs de ce type. </font><font style="vertical-align: inherit;">Je vous souhaite bonne chance dans vos expériences et projets et j'espère que je partagerai bientôt mes nouvelles idées dans les articles suivants! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS: Certaines instructions sont tirées du livre de V. Petin, «Electronics. </font><font style="vertical-align: inherit;">Micro-ordinateurs Raspberry Pi. </font><font style="vertical-align: inherit;">Guide pratique. "</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr385493/">https://habr.com/ru/post/fr385493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr385479/index.html">USPS cesse de suivre le courrier international enregistré</a></li>
<li><a href="../fr385481/index.html">Маленькие автомобили, большое сердце</a></li>
<li><a href="../fr385483/index.html">Montée des machines: des bouilloires et des fers Internet intelligents arrivent</a></li>
<li><a href="../fr385485/index.html">Aujourd'hui, Marty McFly est arrivé dans le futur</a></li>
<li><a href="../fr385491/index.html">Énergie solaire: comment compter?</a></li>
<li><a href="../fr385497/index.html">«Кванты» здесь и сейчас (часть 2)</a></li>
<li><a href="../fr385501/index.html">Build 10572 disponible pour les initiés Windows mobiles</a></li>
<li><a href="../fr385505/index.html">Comment la Russie s'est réunie le 21 octobre 2015 (article mis à jour)</a></li>
<li><a href="../fr385507/index.html">17-летний подросток построил реалистичный симулятор самолёта у себя дома</a></li>
<li><a href="../fr385509/index.html">Google investit dans le plus grand parc éolien d'Afrique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>