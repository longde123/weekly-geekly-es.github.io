<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéç ‚õπüèø ü§öüèæ Wie wir die Navigation von Jetpack in eine Kampfanwendung implementiert haben. Yandex.Food Report ‚òùüèæ ü§õüèΩ üßñüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mobile Anwendungen verwenden zunehmend Deep Links. Dies sind Links, mit denen Sie nicht nur von au√üen zur Anwendung gelangen, sondern auch zu einem be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir die Navigation von Jetpack in eine Kampfanwendung implementiert haben. Yandex.Food Report</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/455479/">  Mobile Anwendungen verwenden zunehmend Deep Links.  Dies sind Links, mit denen Sie nicht nur von au√üen zur Anwendung gelangen, sondern auch zu einem bestimmten Bildschirm gelangen.  Vladislav Kozhushko, ein Android-Entwickler von Yandex.Food, erkl√§rte, warum wir die Navigation von Jetpack implementiert haben, um Deep Links zu implementieren, auf welche Probleme wir gesto√üen sind, wie sie gel√∂st wurden und was am Ende passiert ist. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/5uKceY3fZbo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Hallo allerseits!  Ich hei√üe Vlad.  Ich interessiere mich seit 2013 f√ºr Android-Entwicklung und arbeite seit letztem Sommer in Yandex.Ed.  Ich werde Ihnen erz√§hlen, wie wir die Bibliothek der Navigationskomponenten in eine Kampfanwendung einf√ºhren k√∂nnen. <br><br><a name="habracut"></a>  Alles begann damit, dass wir die technische Aufgabe hatten, die Navigation umzugestalten.  Dann kamen Produktmanager zu uns und sagten, wir w√ºrden Deeplinks machen, es w√ºrde viele von ihnen geben, sie w√ºrden zu verschiedenen Bildschirmen f√ºhren. <br><br>  Und hier dachten wir uns - die in Google I / O 2018 pr√§sentierte Navigation eignet sich sehr gut f√ºr die Implementierung von Aufgaben auf Deeplinks.  Wir beschlie√üen zu sehen, was passiert.  Unsere Kollegen mit iOS in Xcode verf√ºgen √ºber einen praktischen grafischen Editor, in dem sie mit der Maus das gesamte Layout der Bildschirme anzeigen und √úberg√§nge zwischen den Bildschirmen festlegen k√∂nnen.  Jetzt haben wir auch die M√∂glichkeit, mit der Maus √úberg√§nge festzulegen, Links zu Bildschirmen zu entfernen und sie mit Fragmenten zu verkn√ºpfen.  Au√üerdem k√∂nnen wir Argumente auf dem Bildschirm festlegen. <br><br><img src="https://habrastorage.org/webt/x_/az/di/x_azdiz_lzuq41qa1em7im23l7k.jpeg"><br><br>  Das hei√üt, die Argumente m√ºssen entweder in einem UI-Editor stecken bleiben oder in XML geschrieben sein.  Zus√§tzlich zum Wechseln zwischen Bildschirmen wurde ein Aktions-Tag angezeigt, in dem wir die ID und den Bildschirm angeben, zu dem wir wechseln m√ºssen. <br><br><img src="https://habrastorage.org/webt/7k/sf/s7/7ksfs7qzvn4tqxkxxfzziaw-d_y.jpeg"><br><br>  Wir haben auch den Deeplink angegeben, mit dem wir den Bildschirm √∂ffnen m√∂chten.  In diesem Fall gibt es einen itemId-Parameter. Wenn wir einen Parameter dieses Typs √ºbergeben und dieser zu einem Fragment f√ºhrt, wird der Wert dieses Parameters an die Fragmentargumente √ºbergeben, und wir k√∂nnen ihn mit dem itemId-Schl√ºssel abrufen und verwenden.  Die Bibliothek unterst√ºtzt auch Uplinks.  Wenn wir den Uplink einrichten, z. B. navdemo.ru/start/{itemId}, m√ºssen wir uns nicht mehr um die Registrierung von http / https-Schemata zum √ñffnen solcher Diplinks k√ºmmern.  Die Bibliothek wird alles f√ºr uns tun. <br><br>  Lassen Sie uns nun √ºber die Argumente sprechen.  Wir haben zwei Argumente hinzugef√ºgt, Integer und Boolean, und ihnen auch Standardwerte gegeben. <br><br><img src="https://habrastorage.org/webt/wt/fc/xx/wtfcxx7fsl5z7vjgb6x0tbr6-u0.jpeg"><br><br>  Danach haben wir beim Zusammenstellen des Fragments die NextFragmentArgs-Klasse.  Es hat einen Builder, mit dem Sie die ben√∂tigten Argumente zusammenstellen und festlegen k√∂nnen.  Es gibt auch Getter in der NextFragmentArgs-Klasse, um unsere Argumente abzurufen.  Sie k√∂nnen NextFragmentArgs aus dem Bundle sammeln und das Bundle konvertieren, was sehr praktisch ist. <br><br><img src="https://habrastorage.org/webt/ti/qb/a7/tiqba7tr-2zbzaryvnwmllffqrs.jpeg"><br><br>  √úber die Hauptfunktionen der Bibliothek.  Sie hat einen praktischen UI-Editor, in dem wir die gesamte Navigation durchf√ºhren k√∂nnen.  Wir erhalten lesbares XML-Markup, das sich auf die gleiche Weise wie Ansichten aufbl√§st.  Und wir haben keine solchen Schmerzen wie iOS-Entwickler, als sie etwas im Grafikeditor korrigierten, und viele Dinge haben sich ge√§ndert. <br><br>  Deeplinks k√∂nnen sowohl mit Fragmenten als auch mit Activity arbeiten. Dazu m√ºssen Sie keine gro√üe Menge von IntentFilter im Manifest registrieren.  Wir unterst√ºtzen auch Uplinks und mit Android 6 k√∂nnen Sie die automatische √úberpr√ºfung zur √úberpr√ºfung aktivieren.  Dar√ºber hinaus erfolgt beim Zusammenstellen von Projekten die Codegenerierung mit Argumenten f√ºr den gew√ºnschten Bildschirm.  Die Navigation unterst√ºtzt verschachtelte Diagramme und verschachtelte Navigation, sodass Sie die gesamte Navigation logisch in separate Unterkomponenten zerlegen k√∂nnen. <br><br><img src="https://habrastorage.org/webt/bv/5o/ct/bv5oct566mctqouri8o483_b91k.jpeg"><br><br>  Jetzt werden wir √ºber unseren Weg sprechen, den wir gegangen sind, und die Bibliothek vorstellen.  Alles begann mit Alpha Version 3. Wir haben alles implementiert, wir haben die gesamte Navigation durch Navigationskomponenten ersetzt, alles ist super, alles funktioniert, Diplinks offen, aber es sind Probleme aufgetreten. <br><br><img src="https://habrastorage.org/webt/nj/zz/f7/njzzf7kherhavxsfdwqkdicnrtq.jpeg"><br><br>  Das erste Problem ist eine IllegalArgumentException.  Es trat in zwei F√§llen auf: Die Inkonsistenz des Diagramms, da die Darstellung des Diagramms und der Fragmente auf dem Stapel desynchronisiert wurde, gab es aus diesem Grund eine Ausnahme.  Das zweite Problem sind Doppelklicks.  Wenn wir den ersten Klick gemacht haben, navigieren wir.  Wechselt zum n√§chsten Bildschirm und der Status des Diagramms √§ndert sich.  Wenn wir den zweiten Klick machen, befindet sich das Diagramm bereits in einem neuen Zustand und es wird versucht, den alten √úbergang herzustellen, der nicht mehr existiert, sodass diese Ausnahme auftritt.  In dieser Version wurden keine Diplinks ge√∂ffnet, deren Schema einen Punkt enth√§lt, z. B. project.company.  Dies wurde in zuk√ºnftigen Versionen der Bibliothek entschieden, und in der stabilen Version funktioniert alles gut. <br><br>  Auch gemeinsam genutzte Elemente werden nicht unterst√ºtzt.  Sie haben wahrscheinlich gesehen, wie Google Play funktioniert: Es gibt eine Liste von Anwendungen, Sie klicken auf die Anwendung, Ihr Bildschirm wird ge√∂ffnet und eine sch√∂ne Animation zum Verschieben des Symbols wird angezeigt.  Wir haben dies auch in der Anwendung auf der Liste der Restaurants, aber wir brauchten Unterst√ºtzung f√ºr gemeinsame Elemente.  Au√üerdem hat SafeArgs bei uns nicht funktioniert, also haben wir ohne sie gelebt. <br><br><img src="https://habrastorage.org/webt/me/kw/kg/mekwkgnoug7sm5mq1wkxybu7d8g.jpeg"><br><br>  Es war einfach, den Deeplink zu reparieren.  Es war notwendig, das in der Bibliothek befindliche Schema durch ein eigenes Schema zu ersetzen, das den Punkt unterst√ºtzt.  Mit Hilfe der Reflexion klopfen wir an die Klasse, √§ndern den Wert von Regex und alles funktioniert. <br><br><img src="https://habrastorage.org/webt/cm/mm/po/cmmmpoanuuvi0e7zjxjnwrfnmcg.jpeg"><br><br>  Um einen Doppelklick zu korrigieren, haben wir die folgende Methode verwendet.  Wir haben Erweiterungsfunktionen, um Klicks in der Navigation festzulegen.  Nachdem Sie auf eine Schaltfl√§che oder ein anderes Element geklickt haben, aktualisieren wir den ClickListener und f√ºhren die Navigation durch, um einen doppelten √úbergang zu vermeiden.  Wenn Sie RxJava in Ihrem Projekt haben, empfehle ich die Verwendung der RxBindingsgs-Bibliothek von Jake Worton, mit der Sie Ereignisse aus View in einem reaktiven Stil mit den uns zur Verf√ºgung stehenden Operatoren verarbeiten k√∂nnen. <br><br><img src="https://habrastorage.org/webt/cg/_y/fh/cg_yfhpc4uvios5bvpqy5q2rwg8.jpeg"><br><br>  Lassen Sie uns √ºber gemeinsame Elemente sprechen.  Da sie etwas sp√§ter erschienen, haben wir beschlossen, den Navigator zu beenden und ihm die Navigation hinzuzuf√ºgen.  Wir sind Programmierer, warum nicht? <br><br><img src="https://habrastorage.org/webt/8f/in/sb/8finsbjtbk0uckv15eid7gqxfec.jpeg"><br><br>  Die Verfeinerung war wie folgt: Wir erben unseren Navigator vom Navigator, der sich in der Bibliothek befindet.  Hier wird nicht der gesamte Code vorgestellt, aber dies ist der Hauptteil, den wir fertiggestellt haben.  Ich m√∂chte darauf hinweisen, dass vor der Navigation der Status des FragmentManager √ºberpr√ºft wird.  Wenn es gerettet wurde, verlieren wir unsere Teams.  Meiner Meinung nach ist dies ein Fehler. <br><br>  Wenn wir eine Fragmenttransaktion starten, erstellen wir eine Transaktion und legen alle unsere Ansichten fest, die durchsucht werden m√ºssen.  Aber die Frage ist, was f√ºr eine Klasse ist diese TransitionDestination?  Dies ist unsere benutzerdefinierte Klasse, in der Ansichten festgelegt werden k√∂nnen.  Wir erben es von Destination und erweitern die Funktionalit√§t.  Wir legen Ansichten fest und unser Ziel ist bereit, diese zu teilen. <br><br><img src="https://habrastorage.org/webt/cu/do/qh/cudoqhbr1telv86fghwc4hf61mw.jpeg"><br><br>  Der n√§chste Teil - wir m√ºssen die Navigation machen.  Wenn wir auf die Schaltfl√§che klicken, suchen wir nach dem ID-Ziel und ziehen den oberen Rand des Diagramms heraus, zu dem wir gehen m√ºssen.  Danach werden wir es in unser TransitionDestination umwandeln, in dem wir Ansichten haben.  Als N√§chstes stellen wir alle unsere Ansichten so ein, dass √úberg√§nge animiert werden, und f√ºhren die Navigation durch.  Alles funktioniert, alles ist super.  Aber dann erschien alpha06. <br><br>  Dies bedeutet nicht, dass wir zwischen den Versionen gesprungen sind.  Wir haben versucht, die Bibliotheken nach Bedarf zu aktualisieren, aber vielleicht sind dies die grundlegendsten √Ñnderungen, auf die wir gesto√üen sind. <br><br>  Es gab Probleme mit alpha06.  Da es sich um eine Alpha-Version der Bibliothek handelte, gab es st√§ndige √Ñnderungen im Zusammenhang mit Umbenennungsmethoden, R√ºckrufen und Schnittstellen, ganz zu schweigen von der Tatsache, dass Parameter zu den Methoden hinzugef√ºgt und daraus entfernt wurden.  Da wir unseren eigenen Navigator geschrieben haben, mussten wir den Bibliotheksnavigatorcode mit unserem synchronisieren, um auch Fehlerkorrekturen und neue Funktionen einzuf√ºgen. <br><br>  Auch in der Bibliothek selbst hat sich das Verhalten ge√§ndert, als wir von den fr√ºhen Alpha-Versionen zu stabilen Versionen wechseln. Einige Funktionen wurden entfernt.  Fr√ºher gab es ein launchDocument-Flag, das jedoch nie verwendet wurde. Dann wurde es entfernt. <br><br><img src="https://habrastorage.org/webt/lk/27/e8/lk27e8i0ha-eeysxxbgarfiy2bc.jpeg"><br><br>  Zum Beispiel gab es eine √Ñnderung, bei der die Entwickler sagten, dass die navigateUp () -Methode, die mit DrawerLayout funktioniert, veraltet ist. Verwenden Sie eine andere, bei der die Parameter einfach ausgetauscht werden. <br><br><img src="https://habrastorage.org/webt/1z/-u/-4/1z-u-4ub3ofpcvgz2dgknqlomhs.jpeg"><br><br><img src="https://habrastorage.org/webt/tt/ls/bs/ttlsbse7jt_q_dok28qtuzinama.jpeg"><br><br>  Unsere n√§chste gro√üe Migration war bei alpha11.  Hier wurden die Hauptprobleme bei der Navigation bei der Arbeit mit dem Diagramm behoben.  Wir haben endlich unseren dotierten Controller entfernt und alles verwendet, was im Lieferumfang enthalten war.  Sichere Argumente funktionierten bei uns immer noch nicht und wir waren ver√§rgert. <br><br>  Dann wurde beta01 ver√∂ffentlicht, und in dieser Version √§nderte sich praktisch nichts, als sich die Navigation verhielt, aber das folgende Problem trat auf: Wenn eine bestimmte Anzahl von Bildschirmen in der Anwendung ge√∂ffnet ist, m√ºssen wir den Stapel l√∂schen, bevor wir unseren Diplink √∂ffnen.  Dieses Verhalten passte nicht zu uns.  Sichere Argumente funktionierten immer noch nicht. <br><br><img src="https://habrastorage.org/webt/lo/tw/9j/lotw9jlnmyrsnhx95etgnrs3ink.jpeg"><br><br>  Wir haben ein Problem bei Google geschrieben, bei dem uns mitgeteilt wurde, dass alle Regeln urspr√ºnglich konzipiert wurden. Im Code selbst war dies darauf zur√ºckzuf√ºhren, dass wir vor dem Wechsel zum Deeplink mit der ID des Diagramms, das im Stamm liegt, zum Stammfragment zur√ºckgekehrt sind.  Und auch in der setPopUpTo () -Methode wird das True-Flag √ºbergeben, das besagt, dass wir nach der R√ºckkehr zu diesem Bildschirm es auch vom Stapel l√∂schen m√ºssen. <br><br><img src="https://habrastorage.org/webt/br/qa/mq/brqamqzlwzsg-muws3e0ss_ptyq.jpeg"><br><br>  Wir haben uns entschlossen, unseren dotierten Navigator zur√ºckzugeben und das zu beheben, was wir f√ºr falsch halten. <br><br><img src="https://habrastorage.org/webt/mn/fa/qr/mnfaqrgvrtsox_awvaq_axr6ewq.jpeg"><br><br>  Hier ist es das urspr√ºngliche Problem, das dazu f√ºhrte, dass der Stapel gel√∂scht wurde.  Wir haben es wie folgt gel√∂st.  Wir pr√ºfen, ob startDestination gleich Null ist, der Startbildschirm, dann verwenden wir ihn und nehmen als Kennung die Kennung des Diagramms.  Wenn unsere startDestination-ID nicht Null ist, nehmen wir diese ID aus dem Diagramm, wodurch wir den Stapel nicht l√∂schen und den Diplink √ºber dem vorhandenen Inhalt √∂ffnen k√∂nnen.  Optional k√∂nnen Sie auch das Popup true in den Navigationsoptionen entfernen.  Theoretisch sollte auch alles funktionieren. <br><br>  Und schlie√ülich kommt eine stabile Version heraus.  Wir waren froh, wir dachten, dass alles in Ordnung war, aber in der stabilen Version √§nderte sich das Verhalten im Gro√üen und Ganzen nicht.  Sie haben es gerade fertiggestellt.  Wir haben endlich sichere Argumente zum Laufen gebracht, also haben wir begonnen, Argumente aktiv auf unseren Bildschirmen hinzuzuf√ºgen und sie √ºberall im Code zu verwenden.  Wir haben auch festgestellt, dass die Navigation mit DialogFragments nicht funktioniert.  Da wir √ºber DialogFragments verf√ºgten, wollten wir alle in ein Diagramm in XML √ºbertragen und die √úberg√§nge zwischen ihnen beschreiben.  Aber wir haben es nicht geschafft. <br><br><img src="https://habrastorage.org/webt/1f/nd/kg/1fndkgqleynvgu0vno1xf_p9ux0.jpeg"><br><br>  Doppelte √ñffnung.  Wir hatten auch ein Problem, das uns von der ersten Version an heimgesucht hat - das doppelte √ñffnen von Activity w√§hrend eines Kaltstarts der Anwendung. <br><br><img src="https://habrastorage.org/webt/k6/y6/fm/k6y6fm59psyrtdsaqv47hfdl_cm.jpeg"><br><br>  Es passiert wie folgt.  Es gibt eine wunderbare Handle-Deeplink-Methode, die wir aus unserem Code aufrufen k√∂nnen, wenn wir beispielsweise in Aktivit√§t onNewIntent () erhalten, um einen Deeplink abzufangen.  Hier wird das ACTIVITY_NEW_TASK-Flag auf Intent gesetzt, wenn die Anwendung √ºber den Deeplink gestartet wird. Folgendes geschieht also: Eine neue Aktivit√§t wird gestartet, und wenn eine aktuelle Aktivit√§t vorhanden ist, wird sie beendet.  Wenn wir die Anwendung starten, wird der wei√üe Bildschirm zuerst gestartet, dann verschwindet er, ein weiterer Bildschirm wird angezeigt und sie sehen sehr sch√∂n aus. <br><br>  Durch die Einf√ºhrung dieser Bibliothek haben wir die folgenden Vorteile erhalten. <br><br><img src="https://habrastorage.org/webt/ip/x2/dv/ipx2dv_nu1w0-8erk2de8buctsm.jpeg"><br><br>  Wir haben eine Dokumentation f√ºr unsere Navigation sowie eine grafische Darstellung der √úberg√§nge zwischen Bildschirmen. Wenn eine Person in einem Projekt zu uns kommt, versteht sie dies schnell, indem sie sich die Grafik ansieht und ihre Pr√§sentation im Studio √∂ffnet. <br><br>  Wir haben SingleActivity.  Alle Bildschirme werden auf Fragmenten erstellt, alle Diplinks f√ºhren zu Fragmenten, und ich denke, das ist praktisch. <br><br>  Das Ergebnis war eine einfache Verkn√ºpfung des Deeplinks mit Fragmenten. F√ºgen Sie einfach das Deeplink-Tag zum Fragment hinzu, und die Bibliothek erledigt alles f√ºr uns.  Wir haben unsere Navigation auch in verschachtelte Untergraphen unterteilt und eine verschachtelte Navigation erstellt.  Das sind verschiedene Dinge.  Tats√§chlich handelt es sich nur um ein verschachteltes Diagramm, das in das Diagramm aufgenommen wird. Bei verschachtelter Navigation wird ein separater Navigator verwendet, um die Bildschirme zu durchlaufen. <br><br>  Wir √§ndern das Diagramm auch dynamisch im Code, wir k√∂nnen Scheitelpunkte hinzuf√ºgen, wir k√∂nnen Scheitelpunkte l√∂schen, wir k√∂nnen den Startbildschirm √§ndern - alles funktioniert. <br><br>  Wir haben fast vergessen, wie man mit dem FragmentManager arbeitet, da die gesamte Logik der Arbeit mit ihm in der Bibliothek enthalten ist und die Bibliothek die ganze Magie f√ºr uns erledigt.  Die Bibliothek funktioniert auch mit DrawerLayout. Wenn Sie ein Root-Fragment festgelegt haben, zeichnet die Bibliothek selbst einen Hamburger darauf. Wenn Sie zu den n√§chsten Bildschirmen wechseln, zeichnet sie einen Pfeil und f√ºhrt dies animiert aus, wenn Sie vom vorletzten Fragment zur√ºckkehren. <br><br>  Wir haben auch alle Argumente, die meisten davon, an SafeArgs √ºbertragen, und alles wird beim Erstellen des Projekts erstellt.  Dar√ºber hinaus haben wir alle Probleme bew√§ltigt, die uns plagten, und die Bibliothek an unsere Bed√ºrfnisse angepasst. <br><br>  SafeArgs kann Kotlin-Code generieren, hierf√ºr wird ein separates Plugin verwendet. <br><br><img src="https://habrastorage.org/webt/kr/gw/lo/krgwloyigbrzjumonwtftiygi7w.jpeg"><br><br>  Dar√ºber hinaus hat die Bibliothek Nachteile.  Das erste ist, dass die Bereinigung des Stapels an die stabile Version geliefert wurde.  Ich wei√ü nicht, warum dies getan wurde, vielleicht ist es f√ºr jemanden so praktisch, aber im Fall unserer Anwendung m√∂chten wir Deeplinks √ºber den vorhandenen Inhalt hinaus √∂ffnen. <br><br>  Fragmente selbst werden vom Navigatorfragment erstellt und durch Reflexion erstellt.  Ich denke nicht, dass dies ein Plus bei der Implementierung ist.  Die Bedingung f√ºr Deeplink wird nicht unterst√ºtzt.  Ihre Anwendung verf√ºgt m√∂glicherweise √ºber geheime Bildschirme, die nur autorisierten Benutzern zur Verf√ºgung stehen.  Und um Deeplinks nach Bedingungen zu √∂ffnen, m√ºssen Sie daf√ºr Kr√ºcken schreiben, da Sie keinen Deeplink-Prozessor einstellen k√∂nnen, in dem wir die Kontrolle erhalten und sagen, was zu tun ist. √ñffnen Sie entweder den Bildschirm √ºber den Deeplink oder √∂ffnen Sie einen anderen Bildschirm. <br><br>  Au√üerdem gehen die √úbergangsbefehle verloren, weil das Fragment des Navigators den Status √ºberpr√ºft, ob er gespeichert ist oder nicht. Wenn er gespeichert wird, tun wir einfach nichts. <br><br>  Wir mussten auch die Bibliothek mit einer Datei √§ndern, dies ist kein Plus.  Und noch ein wesentlicher Nachteil: Wir haben nicht die M√∂glichkeit, eine Kette von Bildschirmen vor dem Deeplink zu √∂ffnen.  Im Falle unserer Bewerbung m√∂chten wir einen Deeplink zum Warenkorb erstellen, vor dem wir alle vorherigen Bildschirme √∂ffnen: Restaurants, ein bestimmtes Restaurant und erst danach den Warenkorb. <br><br>  Um mit der Navigation arbeiten zu k√∂nnen, ben√∂tigen Sie au√üerdem eine View-Instanz.  Um einen Navigator zu erhalten, m√ºssen Sie sich der Ansicht zuwenden - die Navigationsbibliothek selbst kontaktiert die Eltern dieser Ansicht - und versuchen, den Navigator darin zu finden.  Wenn sie es findet, geht der Bildschirm zu dem Bildschirm, den wir brauchen. <br><br>  Aber es stellt sich die Frage: Lohnt es sich, die Bibliothek im Kampf zu nutzen?  Ich werde ja sagen, wenn: <br><br><img src="https://habrastorage.org/webt/ao/nv/th/aonvthsqh1m-ompt19yxq30ofug.jpeg"><br><br>  Wenn wir ein schnelles Ergebnis erzielen m√ºssen.  Die Bibliothek ist sehr schnell implementiert, sie kann in ca. 20 Minuten in das Projekt eingef√ºgt werden, alle √úberg√§nge werden mit der Maus gestochen, all dies ist praktisch.  Es ist auch schnell in XML geschrieben, schnell zusammengestellt und funktioniert schnell.  Alles super. <br><br>  Wenn Sie in der Anwendung viele Bildschirme ben√∂tigen, die mit Deeplinks arbeiten, und es keine Bedingungen gibt, unter denen sie ge√∂ffnet werden sollten. <br><br>  Keine einzelne Aktivit√§t.  Hier meine ich nicht nur einzelne Aktivit√§t.  Wir k√∂nnen sowohl f√ºr Fragmente mit einer Aktivit√§t als auch f√ºr eine Mischung aus Fragmenten und Aktivit√§t navigieren. In der Grafik k√∂nnen Sie auch die Aktivit√§t beschreiben.  Hierzu wird im Navigator ein Provider verwendet, in dem sich zwei Navigationsimplementierungen befinden.  Die zweite Implementierung ist ein Fragmentnavigator, der intern mit einem Fragmentmanager zusammenarbeitet. Dabei werden Absichten erstellt, um zu den gew√ºnschten Aktivit√§ten zu gelangen. <br><br>  Wenn Sie keine komplexe Logik zum Umschalten zwischen Bildschirmen haben.  Jede Anwendung ist auf ihre Weise einzigartig. Wenn es eine komplexe Logik zum √ñffnen von Bildschirmen gibt, ist diese Bibliothek nichts f√ºr Sie. <br><br>  Sie sind bereit, in die Quelle zu gehen und sie wie wir zu √§ndern.  Das ist eigentlich sehr interessant. <br><br><img src="https://habrastorage.org/webt/x5/hb/gh/x5hbghbpwhocquyhtflyjth2xka.jpeg"><br><br>  Ich werde nein sagen, wenn die Anwendung eine komplizierte Navigationslogik hat, wenn Sie eine Reihe von Bildschirmen vor dem Deeplink √∂ffnen m√ºssen, wenn Sie schwierige Bedingungen ben√∂tigen, um die Bildschirme √ºber den Deeplink zu √∂ffnen.  Im Prinzip kann dies mit dem Autorisierungsbeispiel erfolgen, der ben√∂tigte Bildschirm wird einfach ge√∂ffnet und dar√ºber befindet sich der Autorisierungsbildschirm.  Wenn sich der Benutzer nicht anmeldet, werden Sie auf den Stapel zum vorherigen Bildschirm verschoben, vor dem der geheime Bildschirm ge√∂ffnet wurde.  Eine solche Kr√ºckenentscheidung. <br><br>  Der Verlust von Teams ist f√ºr Sie von entscheidender Bedeutung.  Derselbe Cicerone kann Befehle im Puffer speichern, und wenn der Navigator verf√ºgbar wird, f√ºhrt er sie aus. <br><br>  Wenn Sie den Code nicht fertigstellen m√∂chten, bedeutet dies nicht, dass Sie als Entwickler nichts tun m√∂chten.  Angenommen, Sie haben eine Frist. Produktmanager sagen Ihnen, dass Sie Features k√ºrzen m√ºssen und ein Unternehmen Features einf√ºhren m√∂chte.  Sie ben√∂tigen eine schl√ºsselfertige L√∂sung, die sofort funktioniert.  Bei Navigationskomponenten geht es nicht um diesen Fall. <br><br>  Eine weitere wichtige Sache - DialogFragments werden nicht unterst√ºtzt.  Ein Navigator, der mit ihnen funktioniert, k√∂nnte hinzugef√ºgt werden, aber aus irgendeinem Grund wurden sie nicht hinzugef√ºgt.  Das Problem ist, dass sie sich selbst als gew√∂hnliche Fragmente √∂ffnen.  Das Kontrollk√§stchen f√ºr isShowing ist nicht aktiviert und dementsprechend wird der DialogFragments-Lebenszyklus zum Erstellen eines Dialogfelds nicht ausgef√ºhrt.  Tats√§chlich √∂ffnet DialogFragment als regul√§res Fragment den gesamten Bildschirm, ohne ein Fenster zu erstellen. <br><br>  Das ist alles f√ºr mich.  Grabe die Quelle, das ist wirklich interessant und aufregend.  Hier finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">n√ºtzliche Materialien</a> f√ºr diejenigen, die an der Arbeit mit der Navigationsbibliothek interessiert sind.  Vielen Dank f√ºr Ihre Aufmerksamkeit. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de455479/">https://habr.com/ru/post/de455479/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de455469/index.html">Ein voller Stapel sein und nicht sein</a></li>
<li><a href="../de455471/index.html">√úbersetzung der Verwendung von Google Analytics mit R (Michal Brys)</a></li>
<li><a href="../de455473/index.html">Generika in TypeScript: Zusammenkommen</a></li>
<li><a href="../de455475/index.html">Food Design Digest, Mai 2019</a></li>
<li><a href="../de455477/index.html">Singleton platziert Objekte im ROM und statische Variablen (C ++ am Beispiel des Cortex M4-Mikrocontrollers)</a></li>
<li><a href="../de455481/index.html">Drei Geschichten √ºber wilde Jagd</a></li>
<li><a href="../de455483/index.html">Ai-Da-K√ºnstler: Humanoider Roboter bereitet sich auf seine erste Einzelausstellung vor</a></li>
<li><a href="../de455485/index.html">Pr√ºfpunktskripte - F√ºhren Sie Skripte direkt von der Smart Console aus</a></li>
<li><a href="../de455487/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 10. Betriebsarten des Ports wechseln</a></li>
<li><a href="../de455489/index.html">Verbinden von Audio- und Videol√∂sungen von Drittanbietern mit Microsoft-Teams</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>