<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì£ üíΩ üíáüèº Cribble Crabble Gradle: Auto-Build Magic üï∫üèº üßî üë±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les d√©veloppeurs facilitent la vie des gens, tandis que Gradle le facilite pour les d√©veloppeurs. Si vous √©crivez sur Android, cet article est fait po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cribble Crabble Gradle: Auto-Build Magic</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473642/"><p>  Les d√©veloppeurs facilitent la vie des gens, tandis que Gradle le facilite pour les d√©veloppeurs.  Si vous √©crivez sur Android, cet article est fait pour vous.  D√©couvrez quel genre de b√™te ce Gradle (spoiler: c'est un √©l√©phant), ainsi que comment travailler avec lui. </p><br><p>  Gradle est un syst√®me de construction automatique qui est utilis√© pour simplifier le travail avec Java.  En utilisant des outils standardis√©s (conditionnellement), il aide les d√©veloppeurs √† cr√©er le bon produit sans perdre son caract√®re unique.  Apr√®s tout, le processus de travail avec Gradle n'est pas seulement un choix de mod√®le.  Mais tout d'abord. </p><br><p><img src="https://habrastorage.org/webt/s7/dh/wn/s7dhwnguygfdrlmftsuuoxeicau.png" alt="image"></p><a name="habracut"></a><br><h2 id="gde-skachat-gradle">  O√π t√©l√©charger Gradle </h2><br><p> Vous pouvez t√©l√©charger Gradle sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site officiel</a> .  Nous vous recommandons de t√©l√©charger et d'installer tout manuellement (pour que la vie ne semble pas framboise).  Pour obtenir des instructions et tous les liens n√©cessaires, voir Installation de Gradle&gt; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Installation manuelle</a> .  Au fait, nous vous recommandons de tout lire.  C'est tout.  S√©rieusement. </p><br><p>  Sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette page,</a> vous devez s√©lectionner la version du syst√®me et cliquer sur "binaire uniquement".  Ensuite - d√©compressez l'archive zip et d√©finissez la variable d'environnement PATH comme d√©crit dans les instructions.  Si tout est fait correctement, apr√®s l'installation, la commande gradle -v devrait afficher la version du syst√®me s√©lectionn√©. </p><br><p>  Parfois, il s'av√®re que lors de la d√©finition, le syst√®me trouve Gradle dans un endroit inattendu.  Sous Windows, cela est r√©solu comme suit: <br>  pour% i in (gradle.bat) font <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">√©cho</a> .  % ~ $ CHEMIN: i </p><br><h2 id="kak-rabotat-s-gradle">  Comment travailler avec Gradle </h2><br><p>  Gradle n'est pas sp√©cifique √† la plateforme.  De plus, le syst√®me utilise diff√©rents langages de programmation.  Les plus populaires sont Groovy DSL et Kotlin (mais vous pouvez √©crire sur d'autres).  La premi√®re option sera utilis√©e dans l'article, car il s'agit du langage de description de t√¢che standard dans Gradle. </p><br><p>  Avant de commencer, faites √† nouveau attention aux termes: "t√¢che" et "plug-in".  Apr√®s tout, tout le travail avec le syst√®me repose sur eux.  Les plugins fournissent et cr√©ent des t√¢ches.  Les t√¢ches sont les actions qui doivent √™tre effectu√©es.  Tout est tr√®s simple. </p><br><p>  Vous pouvez en savoir plus √† ce sujet dans les instructions pour les plug-ins: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">JavaCompile</a> (ajouter de nouvelles t√¢ches), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SourceSet</a> (ajouter de nouveaux objets de domaine).  Les plugins fonctionnent √©galement avec les conventions et √©tendent les objets.  Par exemple, en utilisant le plugin, vous pouvez ajouter de nouveaux √©l√©ments DSL et / ou les configurer. </p><br><p>  L'ensemble "Core Plugins" est automatiquement cr√©√© lorsque vous installez Gradle.  Lors des premi√®res √©tapes, il est recommand√© d'utiliser la cat√©gorie "Utility", √† savoir le plugin "Build Init Plugin".  Il fournit des t√¢ches pour initialiser un projet dans le syst√®me.  Vous pouvez s√©lectionner le type de projet dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">liste</a> du site. </p><br><p>  Que ce soit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">java-application</a> . <br>  T√¢che: gradle init --type java-application </p><br><p>  Apr√®s cela, de nouveaux fichiers appara√Ætront dans le dossier.  Parmi eux: </p><br><ul><li>  le dossier gradle (attention, pas .gradle) et le fichier gradlew.bat sont des wrappers, wrappers; </li><li>  fichier build.gradle - un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">script</a> o√π les biblioth√®ques, les frameworks, les plugins et les t√¢ches d'un projet sp√©cifique sont indiqu√©s. </li></ul><br><p>  Le dernier fichier affichera la section plugin.  Ce plugin a d√©j√† des t√¢ches qui lui sont attach√©es.  Leur liste peut √™tre consult√©e √† l'aide de la commande Gradle T√¢ches. </p><br><h2 id="zadachi">  Les t√¢ches </h2><br><p>  Montr√© en blocs par leurs fonctions.  Chacun est donn√© une br√®ve description.  La compr√©hension n√©cessite une connaissance de l'anglais au niveau de base.  Si vous n'√™tes pas dans ce groupe, n'importe quel traducteur fera l'affaire.  Il n'y a pas de constructions de langage complexes dans build.gradle. </p><br><p>  Apr√®s avoir s√©lectionn√© une t√¢che et sa r√©ussite, vous verrez une inscription verte "BUILD SUCCESSFUL" en bas.  Cela signifie que (vous avez de la chance) tout s'est bien pass√©.  √âgalement au bas du syst√®me donnera un bref rapport. </p><br><p>  Si le statut est "ex√©cut√©" - la t√¢che est vraiment termin√©e.  Si "√† jour" - non.  Cela ne signifie pas qu'une sorte d'√©chec s'est produit.  Dans le cas d'un tel statut, la t√¢che ne n√©cessite pas de solution de principe, c'est-√†-dire que son objet est d√©j√† √† jour. </p><br><p>  Cela s'est produit parce que Gradle a g√©n√©r√© automatiquement des ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">contr√¥les √† jour</a> ¬ª - une construction incr√©mentielle dont le but est d'optimiser le syst√®me.  Par cons√©quent, les t√¢ches qui sont d√©j√† termin√©es ou ne n√©cessitent aucune action ne sont pas √©labor√©es. </p><br><p>  Vous pouvez d√©sactiver cette version.  Manuellement.  Pour ce faire, vous devez terminer la t√¢che avec l'indicateur --rerun-tasks.  Si tout est fait correctement, le statut de toutes les t√¢ches passera √† "ex√©cut√©". </p><br><p>  Gradle vous permet √©galement d'afficher les journaux √† diff√©rents niveaux.  Par exemple, la commande gradle run -i vous permettra de lire des messages d'information sur le fonctionnement du syst√®me, la commande run -q activera le mode silence, run -d affichera tous les messages de journal, etc. Une liste compl√®te des journaux et des informations suppl√©mentaires sur le syst√®me de journalisation <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peuvent √™tre trouv√©es ici</a> . </p><br><h2 id="zavisimosti">  D√©pendances </h2><br><p>  Gestion des d√©pendances - Sp√©cifie les biblioth√®ques ou les infrastructures dont le projet a besoin.  Gradle doit inclure ces d√©pendances √† un moment donn√© afin de construire l'application correctement (ou en g√©n√©ral) √† la fin.  La commande gradle init pour java-application dans le script de construction appelle automatiquement des informations sur 2 configurations. </p><br><p>  L'impl√©mentation est responsable de la transitivit√©: ses d√©pendances seront invisibles pour les utilisateurs.  TestImplementation √©tend la configuration pr√©c√©dente.  Ainsi, ils travaillent conjointement. </p><br><p>  Pour mieux comprendre les d√©pendances et comment les utiliser, lisez le chapitre " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Gestion des configurations de d√©pendances</a> " du manuel officiel.  Soit dit en passant, la ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©paration API et impl√©mentation</a> ¬ª explique en d√©tail l'API et l'impl√©mentation, ainsi que la diff√©rence entre les deux. </p><br><p>  Si vous devez inclure la d√©pendance dans l'artefact final, vous devez sp√©cifier toutes les informations n√©cessaires au manifeste du fichier jar dans les param√®tres de la t√¢che jar.  Comment le faire correctement, vous pouvez voir, par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </p><br><p>  Ensuite, vous devez inclure les d√©pendances dans le bocal.  Ceci est n√©cessaire pour la compilation. <br>  Trop compliqu√©?  Utilisez le " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Gradle Shadow Plugin</a> ". </p><br><p>  La commande gradle --console plain dependencies affiche une liste de toutes les configurations et leurs d√©pendances dans une liste.  Le syst√®me offre √©galement aux d√©veloppeurs un filtre qui exclut les d√©pendances de la liste (gradle - d√©pendances simples de la console | trouver "-") - certaines sont plus pratiques. </p><br><p>  Les types de d√©pendances les plus courants: </p><br><ul><li>  externe - charg√© √† partir de r√©f√©rentiels externes; </li><li>  conception - d√©pend du module dans un projet sp√©cifique; </li><li>  fichier - sont connect√©s en tant qu'archives jar ou aar. </li></ul><br><p>  Lequel de ces √©l√©ments √† utiliser, le d√©veloppeur d√©cide. <br>  Pour Java, tout est bien d√©fini dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gestion des d√©pendances</a> . </p><br><h2 id="layfhaki">  Astuces de vie </h2><br><p>  Malgr√© le fait que Gradle est un syst√®me populaire et pertinent d'assemblage automatique, de nombreuses personnes ont des probl√®mes avec lui.  Voici quelques suggestions qui peuvent faciliter la vie d'un d√©veloppeur Android: </p><br><ol><li><p>  Utilisez la console.  La recherche de commandes est parfois probl√©matique et lorsque vous modifiez build.gradle, le syst√®me peut se bloquer ou, en g√©n√©ral, recharger le projet.  Par cons√©quent, les experts recommandent d'appeler Gradle directement √† partir de la console. <br><br>  Vrapper accompagne g√©n√©ralement le projet.  Linux et macOS sont accessibles directement.  Sous Windows, appelez un fichier bat au lieu d'un wrapper. </p><br></li><li><p>  Gradle stocke le cache pendant 1 jour.  Cela peut √™tre reconfigur√©.  Vous devez modifier le code: <br><br></p><br><pre><code class="plaintext hljs">// build.gradle configurations.all { resolutionStrategy.cacheChangingModulesFor -  , 'hours' resolutionStrategy.cacheDynamicVersionsFor -  , 'minutes' }</code> </pre> <br></li><li><p>  - ‚Äìrefresh-dependencies - une commande utile qui commencera √† mettre √† jour toutes les d√©pendances dans Gradle.  Cela peut √™tre utile si certaines donn√©es du cache sont corrompues, comme il le v√©rifie.  Il est pratique √† utiliser si les donn√©es du cache sont endommag√©es, car elles sont v√©rifi√©es et mises √† jour (si diff√©rentes). </p><br></li><li><p>  Utilisez CI (int√©gration continue) lorsque vous travaillez avec un syst√®me de g√©n√©ration automatique.  Laissez les tests unitaires s'ex√©cuter pour toutes les validations.  De plus, les experts recommandent de connecter les tests unitaires.  Cela peut √™tre fait dans Android Studio. <br><br>  Cette combinaison d√©tectera les erreurs plus t√¥t.  Et m√™me si cela ralentira le processus de d√©marrage, le d√©veloppeur pourra se d√©tendre √† l'avenir.  Alors hack de vie pour l'avenir. </p><br></li><li><p>  Essayez encore.  Effrayant  (Nous aussi) En fait, la synchronisation n'a pas toujours besoin d'√™tre red√©marr√©e imm√©diatement.  Tout d'abord, les experts recommandent de v√©rifier le syst√®me dans son ensemble.  Par exemple, en utilisant n'importe quelle commande simple - cela vous aidera √† comprendre quelles sont les chances de r√©ussite de la prochaine synchronisation. </p><br></li><li><p>  Configurez votre environnement de d√©veloppement IntelliJ IDEA avec Gradle.  Cela permettra d'optimiser le processus de travail, ainsi que d'utiliser la liste magique. </p><br></li><li><p>  Astuce pour ceux qui travaillent avec Gradle √† partir de la ligne de commande d'Android Studio.  V√©rifiez l'erreur "D√©marrage d'un d√©mon Gradle, 1 incompatible n'a pas pu √™tre r√©utilis√©" (# 68374709).  Il s'agit d'un fl√©au d'un syst√®me que les d√©veloppeurs n'ont pas encore corrig√©. </p><br></li></ol><br><p>  L'un des principaux probl√®mes de Gradle est "La construction de Gradle a √©chou√©".  Nous pouvons nous passer de mots inutiles si vous le savez d√©j√†.  Sinon, bonne chance. </p><br><p><img src="https://habrastorage.org/webt/bf/ot/4a/bfot4adickxxhqjm0rnbuz4fuy4.png" alt="image"></p><br><p>  Cependant, le principal probl√®me de Gradle est diff√©rent.  Le temps n√©cessaire √† la construction du syst√®me est depuis longtemps une l√©gende (tr√®s triste) dans les milieux sp√©cialis√©s.  Il est impossible d'acc√©l√©rer le travail, du moins pas de mani√®re significative. </p><br><p>  Il faut donc attendre quand m√™me. </p><br><p>  Vous pouvez, par exemple, voler quelque part dans l'espace, comme dans Interstellar. </p><br><p><img src="https://habrastorage.org/webt/gd/p1/t6/gdp1t61pbey5box6qwv1f2zuuqw.jpeg" alt="image"></p><br><h2 id="vyvod">  Conclusion </h2><br><p>  Gradle est une bonne solution, malgr√© tous les inconv√©nients.  L'assemblage automatique vous fera gagner du temps et de l'√©nergie (quelle que soit l'ironie du son apr√®s le paragraphe pr√©c√©dent).  Et aussi - pour rendre votre application plus propre.  Le syst√®me remarquera toute erreur et ne vous permettra pas de terminer le travail jusqu'√† ce qu'il soit r√©par√© (√† tout prix). </p><br><img src="https://habrastorage.org/webt/kp/vu/ew/kpvuewmjo5z4oeaogzzvoedttrq.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr473642/">https://habr.com/ru/post/fr473642/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr473632/index.html">Nous avons vu un article sur Habr</a></li>
<li><a href="../fr473634/index.html">Les lobbies de Comcast interdisent le cryptage DNS</a></li>
<li><a href="../fr473636/index.html">T√©l√©charger 16 Go de torrent via tablette avec 4 Go d'espace libre</a></li>
<li><a href="../fr473638/index.html">Shader n'est pas magique. √âcriture de shaders dans Unity. Pr√©sentation</a></li>
<li><a href="../fr473640/index.html">Coucher de soleil Big Data</a></li>
<li><a href="../fr473646/index.html">Hackathon dans une petite entreprise: comment organiser sans vider un train de ressources</a></li>
<li><a href="../fr473648/index.html">Le cheval est mort - Cri: transition du tslint au eslint</a></li>
<li><a href="../fr473652/index.html">Cr√©ation d'une API REST avec Node.js et une base de donn√©es Oracle. Partie 5</a></li>
<li><a href="../fr473654/index.html">Compositeur PHP: corriger les d√©pendances sans douleur</a></li>
<li><a href="../fr473656/index.html">Exp√©rience de g√©n√©rateur de site statique Hugo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>