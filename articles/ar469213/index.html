<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ถ๐ฝ โ๐ป ๐ฆ ุงุณุชูุดุงู ูุญูู ุงูุฏูุงุฌู ูุน ุงูุตุฏุฃ ๐ด๓ง๓ข๓ท๓ฌ๓ณ๓ฟ ๐๐ฝ ๐ฌ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ! ุฃูุฏู ููู ุชุฑุฌูุฉ ุงูููุงู "Learning Combinators Parser With Rust" . 


 ูุฐุง ุงูููุงู ูุนูู ุฃุณุงุณูุงุช ุงููุญูููู ุงูุชูุงููููู ููุฃุดุฎุงุต ุงูุฐูู ูู ุจุงููุนู ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงุณุชูุดุงู ูุญูู ุงูุฏูุงุฌู ูุน ุงูุตุฏุฃ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469213/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฑุญุจุง ูุง ูุจุฑ!  ุฃูุฏู ููู ุชุฑุฌูุฉ ุงูููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"Learning Combinators Parser With Rust"</a> . </p><br><p style=";text-align:right;direction:rtl">  <em>ูุฐุง ุงูููุงู ูุนูู ุฃุณุงุณูุงุช ุงููุญูููู ุงูุชูุงููููู ููุฃุดุฎุงุต ุงูุฐูู ูู ุจุงููุนู ุนูู ุฏุฑุงูุฉ ุงูุตุฏุฃ.</em>  <em>ูู ุงูููุชุฑุถ ุฃูู ููุณุช ููุงู ุญุงุฌุฉ ุฅูู ูุนุฑูุฉ ุฃุฎุฑู ุ ูุณูุชู ุดุฑุญ ูู ูุง ูุง ูุฑุชุจุท ูุจุงุดุฑุฉ ุจุงูุตุฏุฃ ุ ููุฐูู ุจุนุถ ุงูุฌูุงูุจ ุบูุฑ ุงููุชููุนุฉ ูู ุงุณุชุฎุฏุงูู.</em>  <em>ูู ุชุณุงุนุฏู ูุฐู ุงูููุงูุฉ ุนูู ุชุนูู "ุงูุตุฏุฃ" ุฅุฐุง ูู ุชูู ุชุนุฑููุง ุจุงููุนู ุ ููู ูุฐู ุงูุญุงูุฉ ุ ูู ุงููุฑุฌุญ ุฃูู ูู ุชููู ุฌูุฏูุง ุงููุบูููู.</em>  <em>ุฅุฐุง ููุช ุชุฑูุฏ ุฃู ุชุชุนูู ุงูุตุฏุฃ ุ ูุฅููู ุฃูุตู ุจูุชุงุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ูุบุฉ ุจุฑูุฌุฉ ุงูุตุฏุฃ"</a> .</em> </p><a name="habracut"></a><br><h3 id="s-tochki-zreniya-novichka" style=";text-align:right;direction:rtl">  ูู ูุฌูุฉ ูุธุฑ ุงููุจุชุฏุฆูู </h3><br><p style=";text-align:right;direction:rtl">  ูู ุญูุงุฉ ูู ูุจุฑูุฌ ุ ูุฃุชู ููุช ูุญุชุงุฌ ููู ุฅูู ูุญูู. </p><br><p style=";text-align:right;direction:rtl">  ุณูู ูุณุฃู ูุจุฑูุฌ ูุจุชุฏุฆ: "ูุง ูู ุงููุญูู ุงููุบููุ" </p><br><p style=";text-align:right;direction:rtl">  ุณูููู ูุจุฑูุฌ ุงููุณุชูู ุงููุชูุณุท: "ุงูุฃูุฑ ุจุณูุท ุ ุณุฃูุชุจ ุชุนุจูุฑูุง ููุชุธููุง." </p><br><p style=";text-align:right;direction:rtl">  ุณูููู ุงููุจุฑูุฌ ุงูุฑุฆูุณู: "ุงุจุชุนุฏ ุ ุฃุนุฑู lex ู yacc". </p><br><p style=";text-align:right;direction:rtl">  ูุจุชุฏุฆ ูููุฑ ุฃูุถู ูู ูู ุดูุก. </p><br><p style=";text-align:right;direction:rtl">  ููุณ ูุฐุง ุงูุชุนุจูุฑุงุช ุงูุนุงุฏูุฉ ุณูุฆุฉ.  (ููู ูู ูุถูู ุ ูุง ุชุญุงูู ูุชุงุจุฉ ูุญูู ูุนูุฏ ูุชุนุจูุฑ ุนุงุฏู.) ูุง ููุฌุฏ ุฃู ูุฑุญ ูู ุงุณุชุฎุฏุงู ุฃุฏูุงุช ูููุฉ ูุซู ุงููููุฏุงุช ุงููุบููุฉ ูุงููุญูู ุงูุฐู ุชู ุชูุฑููู ุนูู ูุญู ูุซุงูู ูุขูุงู ุงูุณููู.  ููู ุชุนูู ุฃุณุงุณูุงุช ุงููุญูููู ูู <em>ูุชุนุฉ</em> .  ูุฐุง ุฃูุถูุง ูุง ุณุชูุชูุฏู ุฅุฐุง ุดุนุฑุช ุจุงูููุน ุนูุฏ ุงุณุชุฎุฏุงู ุงูุชุนุจูุฑุงุช ุงููุนุชุงุฏุฉ ุฃู ุงููููุฏุงุช ุงููุบููุฉ ุ ูููุงููุง ูุฌุฑุฏ ุฃููุงุฑ ุชุฌุฑูุฏูุฉ ูู ุงููุดููุฉ ุงูุญููููุฉ.  ูู ุฐูู ุงููุจุชุฏุฆูู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง ูุงู ุงูุฑุฌู</a> ุ ููุงู ุงูุนุฏูุฏ ูู ุงูุงุญุชูุงูุงุช.  ูููุง ููุฎุจูุฑ ุ ููุงู ุฎูุงุฑ ูุงุญุฏ ุตุญูุญ ููุท. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูููุงูุฉ ุ ุณูู ูุชุนูู ููููุฉ ุจูุงุก ุงููุญูู ุงููุบูู ูู ุงูุจุฏุงูุฉ ูุน <br>  ุจุงุณุชุฎุฏุงู ุทุฑููุฉ ุดุงุฆุนุฉ ูู ูุบุงุช ุงูุจุฑูุฌุฉ ุงููุธูููุฉ ุงููุนุฑููุฉ ุจุงุณู <em>ุงููุญูู ุงููุบูู</em> .  ูุชูุชุนูู ุจููุฒุฉ ููููู ุฃูููุงุก ุจุดูู ูุฏูุด ุจูุฌุฑุฏ ููููู ูููุฑุชูู ุงูุฃุณุงุณูุฉ ุ ุจูููุง ูุธููู ูุฑูุจูู ุฌุฏูุง ูู ุงููุจุฏุฃ ุงูุฃุณุงุณู.  ูุฃู ุงูุชุฌุฑูุฏุงุช ุงููุญูุฏุฉ ููุง ูู ุชูู ุงูุชู ุชูุดุฆูุง ุจููุณู.  ุงููุฌูุนุงุช ุงูุฑุฆูุณูุฉ ุงูุชู ุณุชุณุชุฎุฏููุง ููุง ุณูู ุชุจูู ููุณู. </p><br><h3 id="kak-rabotat-s-etoy-statyoy" style=";text-align:right;direction:rtl">  ููููุฉ ุงูุนูู ูุน ูุฐู ุงููุงุฏุฉ </h3><br><p style=";text-align:right;direction:rtl"> ููุตู ุจุดุฏุฉ ุฃู ุชุจุฏุฃ ุจูุดุฑูุน Rust ุฌุฏูุฏ ูุฃู ุชูุชุจ ููุชุทูุงุช ุจุฑูุฌูุฉ ุจู <code>src/lib.rs</code> ุฃุซูุงุก ูุฑุงุกุชูุง (ููููู ูุตููุง ูุจุงุดุฑุฉู ูู ุงูุตูุญุฉ ุ ูููู ุฅุฏุฎุงููุง ุจุดูู ุฃูุถู ุ ูุฃู ูุฐุง ูุถูู ูู ุชููุงุฆููุง ูุฑุงุกุชูุง ุจุงููุงูู).  ูุชู ุชุฑุชูุจ ุฌููุน ุฃุฌุฒุงุก ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุชู ุชุญุชุงุฌูุง ุจุงูุชุฑุชูุจ ูู ุงูููุงูุฉ.  ุถุน ูู ุงุนุชุจุงุฑู ุฃูู ูู ุจุนุถ ุงูุฃุญูุงู ูุชู ุชูุฏูู ุฅุตุฏุงุฑุงุช <em>ูุนุฏูุฉ</em> ูู ุงููุธุงุฆู ุงูุชู ูุชุจุชูุง ุณุงุจููุง ุ ููู ูุฐู ุงูุญุงูุงุช ูุฌุจ ุงุณุชุจุฏุงู ุงูุฅุตุฏุงุฑ ุงููุฏูู ุจุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ. </p><br><p style=";text-align:right;direction:rtl">  ุชูุช ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุฅุตุฏุงุฑ rustc 1.34.0 ุจุงุณุชุฎุฏุงู ุฅุตุฏุงุฑ ุงููุบุฉ <code>2018</code> .  ููููู ุงุณุชุฎุฏุงู ุฃู ุฅุตุฏุงุฑ ูู ุงููุญูู ุงูุจุฑูุฌู ุ ุชุฃูุฏ ูู ุฃูู ุชุณุชุฎุฏู ุฅุตุฏุงุฑูุง ูุฏุนู ุฅุตุฏุงุฑ <code>2018</code> (ุชุฃูุฏ ูู ุฃู <code>Cargo.toml</code> ูุญุชูู ุนูู <code>edition = "2018"</code> ).  ูุฐุง ุงููุดุฑูุน ูุง ูุญุชุงุฌ ุงูุชุจุนูุงุช ุงูุฎุงุฑุฌูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑุงุช ุงูููุฏูุฉ ูู ุงูููุงูุฉ ุ ููุง ูู ูุชููุน ุ <code>cargo test</code> . </p><br><h3 id="xcruciating-yazyk-razmetki" style=";text-align:right;direction:rtl">  ูุบุฉ ุงูุชุฑููุฒ </h3><br><p style=";text-align:right;direction:rtl">  ุณูููู ุจูุชุงุจุฉ ูุญูู ูุฅุตุฏุงุฑ ูุจุณุท ูู XML.  ูุจุฏู ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">parent-element</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">single-element</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">attribute</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"value"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">parent-element</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ูุชุญ ุนูุงุตุฑ XML ูุน <code>&lt;</code> ุญุฑู ููุนุฑู ูุชููู ูู ุญุฑู ูุชุจูุนูุง ุจุฃู ุนุฏุฏ ูู ุงูุฃุญุฑู ูุงูุฃุฑูุงู ู <code>-</code> .  ูุชุจุน ุฐูู ูุณุงูุงุช ููุงุฆูุฉ ุงุฎุชูุงุฑูุฉ ูู ุฃุฒูุงุฌ ุงูุณูุงุช: ูุนุฑู ุขุฎุฑ ููุง ูู ูุญุฏุฏ ูุณุจููุง ุ ูุชุจูุนูุง ุจุนูุงูุฉ <code>=</code> ูุณูุณูุฉ ูู ุนูุงูุงุช ุงูุชุจุงุณ ูุฒุฏูุฌุฉ.  ุฃุฎูุฑูุง ุ ููุฌุฏ ุฅูุง ุฑูุฒ ุฅุบูุงู <code>/&gt;</code> ููุฅุดุงุฑุฉ ุฅูู ุนูุตุฑ ูุงุญุฏ ุจุฏูู ุฃุทูุงู ุ ุฃู <code>&gt;</code> ููุฅุดุงุฑุฉ ุฅูู ูุฌูุฏ ุงูุณูุณูุฉ ุงูุชุงููุฉ ูู ุงูุนูุงุตุฑ ุงููุฑุนูุฉ ุ ูุนูุงูุฉ ุฅุบูุงู ุชุจุฏุฃ ุจู <code>&lt;/</code> ุ ูุชุจูุนุฉ ุจูุนุฑู ูุฌุจ ุฃู ูุชุทุงุจู ูุน ุนูุงูุฉ ุงููุชุญ ุ ูุฑูุฒ ุฅุบูุงู <code>&gt;</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ูู ูู ูุง ุณูุฏุนูู.  ูู ูููู ููุงู ูุณุงุญุงุช ุฃุณูุงุก ุ ููุง ุชูุฌุฏ ููุงุท ูุตูุฉ ุ <em>ูุจุงูุชุฃููุฏ</em> ูู ูููู ููุงู ูุญุต ูุฎุทุท.  ูุง ุฏุงุนู ููููู ุญุชู ูู ุงููุฑุงุฑ ูู ุนูุงูุงุช ุงูุชุจุงุณ ููุณูุงุณู - ููู ุชุจุฏุฃ ูุน ุฃูู ุงูุชุจุงุณ ูุฒุฏูุฌ ุ ูุชูุชูู ุจุงูุฑูู ุงูุชุงูู ุ ููุฐุง ูู ุดูุก. </p><br><p style=";text-align:right;direction:rtl">  ุณูููู ุจุชุญููู ูุฐู ุงูุนูุงุตุฑ ุฅูู ูููู ูุดุจู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[derive(Clone, Debug, PartialEq, Eq)]</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Element</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, attributes: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt;, children: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;Element&gt;, }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ุชูุฌุฏ ุฃููุงุน ูุงุฎุฑุฉ ุ ูุฌุฑุฏ ุณูุณูุฉ ููุงุณู (ูุฐุง ูู ุงููุนุฑู ูู ุจุฏุงูุฉ ูู ุนูุงูุฉ) ุ ูุณูุงุช ูู ุดูู ุฃุฒูุงุฌ ูู ุงูุณูุงุณู (ุงููุนุฑูู ูุงููููุฉ) ููุงุฆูุฉ ุจุงูุฃุทูุงู ุงูุฐูู ูุดุจููู ุงูุฃุตู ุชูุงููุง. </p><br><p style=";text-align:right;direction:rtl">  (ุฅุฐุง ููุช ุชุทุจุน ุ ูุชุฃูุฏ ูู ุชุถููู ูุณู <code>derive</code> . ุณุชุญุชุงุฌ ุฅููู ูุงุญููุง.) </p><br><h3 id="opredelenie-parsera" style=";text-align:right;direction:rtl">  ุชุนุฑูู ุงููุญูู </h3><br><p style=";text-align:right;direction:rtl">  ุญุณููุง ุ ููุฏ ุญุงู ุงูููุช ููุชุงุจุฉ ุงููุญูู ุงููุบูู. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุญููู ูู ุนูููุฉ ุงูุญุตูู ุนูู ุจูุงูุงุช ููุธูุฉ ูู ุฏูู ุงููุนูููุงุช.  ุงููุญูู ุงููุบูู ูู ูุง ูุจุฑุฒ ูุฐุง ุงููููู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุงูุถุจุงุท ุงูุฐู ุณูุณุชูุดูู ุ ุงููุญูู ุงููุบูู ุ ูู ุฃุจุณุท ุฃุดูุงูู ุ ูู ูุธููุฉ ุชุฃุฎุฐ ุจุนุถ ุงููุฏุฎูุงุช ูุชูุฑุฌุน ุฅูุง ุงููุฎุฑุฌุงุช ุงูุชู ุชู ุชุญููููุง ุฌูุจูุง ุฅูู ุฌูุจ ูุน ุจููุฉ ุงููุฏุฎูุงุช ุ ุฃู ุฎุทุฃู ูููู "ูุง ูููููู ุชุญููู ุฐูู". </p><br><p style=";text-align:right;direction:rtl">  ุงููุญูู ุงููุบูู ูุจุญุซ ุฃูุถูุง ูู ุฃุดูุงูู ุงูุฃูุซุฑ ุชุนููุฏูุง.  ููููู ุชุนููุฏ ูุนูู ุงูุฅุฏุฎุงู ูุงูุฅุฎุฑุงุฌ ูุงูุฎุทุฃ ุ ูุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุฑุณุงุฆู ุฎุทุฃ ุฌูุฏุฉ ุชุญุชุงุฌูุง ุ ุฅูุง ุฃู ุงููุญูู ุงููุบูู ูุธู ููุง ูู: ุดูุก ูุณุชููู ุงููุฏุฎูุงุช ูููุชุฌ ููุนูุง ูู ุงูุฅุฎุฑุงุฌ ุงููุญูู ูุน ูุง ูุชุจูู ูู ุงููุฏุฎูุงุช ุฃู ูุชูุญ ูู ูุนุฑูุฉ ุฃูู ูุง ูููู ุชุญููู ุงูุฅุฏุฎุงู ุฅูู ุงูุฅุฎุฑุงุฌ. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ุงูุชุจูุง ูููุน ูู ุงููุธููุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(Input) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(Input, Output), Error&gt;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุดูู ุฃูุซุฑ ุชุญุฏูุฏูุง: ูู ุญุงูุชูุง ุ ูุฑูุฏ ููุก ุงูุฃููุงุน ูุงูุญุตูู ุนูู ูุธููุฉ ููุงุซูุฉ ููุฐู ุงููุธููุฉ.  ูู ูุง ุณูููู ุจู ูู ุชุญููู ุงูุณูุณูุฉ ุฅูู ุจููุฉ <code>Element</code> .  ูู ุงูููุช ุงูุญุงูู ุ ูุง ูุฑูุฏ ุงูุฏุฎูู ูู ุชูุงุตูู ุฑุณุงุฆู ุงูุฎุทุฃ ุ ูุง ุนููู ุณูู ุฅุฑุฌุงุน ุฌุฒุก ุงูุณุทุฑ ุงูุฐู ูู ูุชููู ูู ุชุญูููู.  ูุชูุฌุฉ ูุฐูู ุ ุณุชุจุฏู ูุธููุชูุง ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, Element), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญู ูุณุชุฎุฏู ุดุฑูุญุฉ ุงูุณูุณูุฉ ูุฃููุง ูุคุดุฑ ูุนุงู ูุฌุฒุก ูู ุงูุณูุณูุฉ ุ ููู ุซู ูููููุง ูุตููุง ููุง ูุญุจ ูู ุฎูุงู "ุงุณุชููุงู" ุจูุงูุงุช ุงูุฅุฏุฎุงู ุ ูุงุณุชุจุนุงุฏ ุงูุฌุฒุก ุงูุฐู ุชู ุชุญูููู ูุฅุฑุฌุงุน ุงูุจุงูู ูุน ุงููุชูุฌุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฏ ูููู ูู <code>&amp;[u8]</code> ุงุณุชุฎุฏุงู <code>&amp;[u8]</code> (ุดุฑูุญุฉ ูู ุงูุจุงูุชุงุช ุชุชุทุงุจู ูุน ุฃุญุฑู ASCII) ูููุน ุฅุฏุฎุงู ุ ุฎุงุตุฉ ูุฃู ุดุฑุงุฆุญ ุงูุณูุณูุฉ ุชุชุตุฑู ุจุดูู ูุฎุชูู ููููุงู ุนู ูุนุธู ุงูุดุฑุงุฆุญ - ุฎุงุตุฉ ูุฃูู ูุง ุชุณุชุทูุน ููุฑุณุชูุง ุจูุงุญุฏ <code>input[0]</code> ุงูุฃุฑูุงู <code>input[0]</code> ุ ูุฌุจ ุนููู ุงุณุชุฎุฏุงู ุฌุฒุก <code>input[0..1]</code> .  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุฏููู ุงูุนุฏูุฏ ูู ุงูุทุฑู ุงููููุฏุฉ ูุชุญููู ุงูุณูุงุณู ุงูุชู ูุง ุชุญุชูู ุนูู ุดุฑุงุฆุญ ุจุงูุช. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ุณูู ูุนุชูุฏ ุนูู ุงูุฃุณุงููุจ ุ ูููุณ ุงุณุชุฎุฏุงู ููุงุฑุณ ุงูุญุฑูู ุ ูุฃู ููููููุฏ.  ูู UTF-8 ุ ูุฌููุน ุณูุงุณู Rust ูู ุณูุงุณู UTF-8 ุตุงูุญุฉ ุ ูุฐู ุงููุคุดุฑุงุช ูุง ุชุชูุงูู ุฏุงุฆููุง ูุน ุงูุฃุญุฑู ุงููุฑุฏูุฉ ุ ููู ุงูุฃูุถู ูุฌููุน ุงูุฃุทุฑุงู ุงูููุชูุฉ ุฃู ุชุทูุจ ูู ุงูููุชุจุฉ ุงูููุงุณูุฉ ุงูุนูู ูุนูุง ูู ุฃุฌููุง. </p><br><h3 id="nash-pervyy-parser" style=";text-align:right;direction:rtl">  ุฃูู ูุญูู ูุฏููุง </h3><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ูุญุงูู ูุชุงุจุฉ ูุญูู ูุจุญุซ ููุท ุนู ุงูุญุฑู ุงูุฃูู ูู ุงูุณูุณูุฉ <br>  ูุชูุฑุฑ ูุง ุฅุฐุง ูุงูุช ุงูุฑุณุงูุฉ <code>a</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">the_letter_a</span></span></span></span>(input: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, ()), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> input.chars().next() { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(<span class="hljs-string"><span class="hljs-string">'a'</span></span>) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[<span class="hljs-string"><span class="hljs-string">'a'</span></span>.len_utf8()..], ())), _ =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุฃููุงุน ุงููุฏุฎูุงุช ูุงููุฎุฑุฌุงุช: ูุฃุฎุฐ ุดุฑูุญุฉ ุณูุณูุฉ ููุฏุฎูุงุช <code>Result</code> ูุน <code>(&amp;str, ())</code> ุ ุฃู ุฎุทุฃ ูุน <code>&amp;str</code> .  ุงูุฒูุฌ <code>(&amp;str, ())</code> ูู ููุทุฉ ูุซูุฑุฉ ููุงูุชูุงู: ููุง ูููุง ุฃูู ูุฌุจ ุนูููุง ุฅุฑุฌุงุน ูุฌููุนุฉ ูู ุงููุญุชูู ุงูุชุงูู ุ <br>  ุชุญููู ุงููุชูุฌุฉ ูุจููุฉ ุงููุฏุฎูุงุช.  <code>&amp;str</code> ูู ุงูุฅุฏุฎุงู ุงูุชุงูู ุ ูุงููุชูุฌุฉ ูู ูุฌุฑุฏ ููุน ูุชูุฉ <code>()</code> ุ ูุฃูู ุฅุฐุง ูุงู ูุฐุง ุงููุญูู ูุนูู ุจูุฌุงุญ ุ ููููู ุฃู ูููู ูู ูุชูุฌุฉ ูุงุญุฏุฉ ููุท (ูุฌุฏูุง ุงูุญุฑู <code>a</code> ) ุ ููุญู ูุณูุง ุจุญุงุฌุฉ ุญููุง ุฅูู ุงูุนูุฏุฉ <br>  ุงูุฑุณุงูุฉ <code>a</code> ูู ูุฐู ุงูุญุงูุฉ ูุญุชุงุฌ ููุท ุฅูู ุงูุฅุดุงุฑุฉ ุฅูู ุฃููุง ุชูููุง ูู ุงูุนุซูุฑ ุนูููุง. </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ุฏุนููุง ููุธุฑ ุฅูู ุฑูุฒ ุงููุญูู ุงููุบูู ููุณู.  ูู ููู ููุชูู ุจุงูุงุนุชูุงุฏ ุนูู ุงูููุชุจุฉ ุงูููุงุณูุฉ ุ ููููููุง ุชุฌูุจ ุงูุตุฏุงุน ุจุงุณุชุฎุฏุงู Unicode: ูุญุตู ุนูู ููุฑุฑ ุนูู ุฃุญุฑู ุงูุณูุณูุฉ ุจุงุณุชุฎุฏุงู ุทุฑููุฉ <code>chars()</code> ููุฃุฎุฐ ุงูุญุฑู ุงูุฃูู ูููุง.  ุณูููู ูุฐุง ุนูุตุฑูุง ูู ุงูููุน <code>char</code> ููููููุง ูู <code>Option</code> ุ ูุงูุฐู <code>None</code> ูุนูู ููู ูุฌูุฏ ุฃููุง ูุญุงูู ุณุญุจ <code>char</code> ูู ุณูุณูุฉ ูุงุฑุบุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููุง ุฒุงุฏ ุงูุทูู ุจูุฉ ุ <code>char</code> ููุณ ุจุงูุถุฑูุฑุฉ ูุง ุชููุฑ ููู ูุญุฑู ููููููุฏ.  ูู ุงููุญุชูู ุฃู ูููู ูุฐุง ูู ูุง ูุณููู Unicode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ูุฌููุนุฉ grapheme"</a> ุ ูุงูุชู ูููู ุฃู ุชุชููู ูู ุนุฏุฉ ุฃุญุฑู <code>char</code> ุ ูุงูุชู ูู ูู ุงููุงูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ููู ุนุฏุฏูุฉ"</a> ุ ูุงูุชู ูู ูุณุชูููู ุฃุฏูู ูู ูุฌููุนุงุช grapheme.  ููุน ุฐูู ุ ูุคุฏู ูุฐุง ุงููุณุงุฑ ุฅูู ุงูุฌููู ุ ููุฃุบุฑุงุถูุง ุ ูู ุบูุฑ ุงููุฑุฌุญ ุฃู ูุฑู <code>chars</code> ุฎุงุฑุฌ <code>chars</code> ASCII ุ ูุฐูู ุฏุนููุง ูุชููู ุนูุฏ ูุฐุง ุงูุญุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุจุงูุชุนููู ุนูู ููุท <code>Some('a')</code> ุ ููู ุงููุชูุฌุฉ ุงููุญุฏุฏุฉ ุงูุชู ูุจุญุซ ุนููุง ุ ูุฅุฐุง ุชุทุงุจู ุฐูู ุ ูุฑุฌุน ูููุฉ ูุฌุงุญูุง: <br>  <code>Ok((&amp;input['a'.len_utf8()..], ()))</code> .  ููุฐุง ูุนูู ุฃููุง ูุฒูู ุงูุฌุฒุก ุงูุฐู ูููุง ุจุชุญูููู ( <code>'a'</code> ) ูู ุดุฑูุญุฉ ุงูุณุทุฑ ููุนูุฏ ุงูุจุงูู ุฅูู ุฌุงูุจ ููููุง ุงูุชู ุชู ุชุญููููุง ุ ูุงูุชู ุชููู ุฎุงููุฉ ููุท <br>  <code>()</code> .  ุชุฐูุฑ ุฏุงุฆููุง ูุญุด Unicode ุ ูุจู ุงููุทุน ุ ุงูุชุดููุง ุงูุทูู ูู UTF-8 ููุดุฎุตูุฉ <code>'a'</code> ุฎูุงู ุงูููุชุจุฉ ุงูููุงุณูุฉ - ุฅููุง 1 (ููู ูุง ุชูุณู ูุญุด Unicode). </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุญุตููุง ุนูู <code>Some(char)</code> ุงูุฃุฎุฑู <code>Some(char)</code> ุ ุฃู ุฅุฐุง ุญุตููุง ุนูู <code>None</code> ุ ูุฅููุง ูุฑุฌุน ุฎุทุฃู.  ููุง ุชุชุฐูุฑ ุ ูุฏููุง ููุน ูู ุงูุฎุทุฃ ูู ูุฌุฑุฏ ุดุฑูุญุฉ ุณูุณูุฉ ุ ูุงูุชู ูุฑุฑูุง ุจูุง <code>input</code> ูุงูุชู ูุง ูููู ุชุญููููุง.  ูู ุชุจุฏุฃ ุจู ุ ูุฐูู ูุฐุง ุฎุทุฃูุง.  ูุฐุง ููุณ ุฎุทุฃู ูุจูุฑุงู ุ ูููู ุนูู ุงูุฃูู ุฃูุถู ููููุงู ูู ูุฌุฑุฏ "ุดูุก ูุง ุฎุทุฃ ูู ููุงู ูุง." </p><br><p style=";text-align:right;direction:rtl">  ูุง ูุญุชุงุฌ ุญููุง ุฅูู ูุฐุง ุงููุญูู ุงููุบูู ูุชุญููู XML ุ ูููู ุฃูู ุดูุก ูุชุนูู ุนูููุง ูุนูู ูู ุงูุนุซูุฑ ุนูู ุงูุญุฑู ุงูุงูุชุชุงุญู ุ ูุฐูู ูุญู ุจุญุงุฌุฉ ุฅูู ุดูุก ูุดุงุจู ุฌุฏูุง.  ุณูุญุชุงุฌ ุฃูุถูุง ุฅูู ุชุญููู <code>&gt;</code> ู <code>/</code> ู <code>=</code> ูุฌู ุงูุชุญุฏูุฏ ุ ูุฐูู ุฑุจูุง ูููููุง ุฅูุดุงุก ุฏุงูุฉ ุชููู ุจุฅูุดุงุก ุงููุญูู ุงููุบูู ููุดุฎุตูุฉ ุงูุชู ูุฑูุฏูุงุ </p><br><h3 id="sozdanie-parsera" style=";text-align:right;direction:rtl">  ุฎูู ูุญูู </h3><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูููุฑ ูู ูุฐุง ุงูุฃูุฑ: ุณูููู ุจูุชุงุจุฉ ุฏุงูุฉ ุชููู ุจุฅูุดุงุก ูุญูู ูุณูุณูุฉ ุซุงุจุชุฉ ูู <em>ุฃู ุทูู</em> ุ ูููุณ ูุฌุฑุฏ ุญุฑู ูุงุญุฏ.  ูุฐุง ุฃุจุณุท ูุฃู ุฌุฒุก ุงูุฎุท ูู ุจุงููุนู ุดุฑูุญุฉ ุณุทุฑ UTF-8 ุตุงูุญุฉ ุ ููุญู ูุณูุง ุจุญุงุฌุฉ ููุชูููุฑ ูู ูุญุด ููููููุฏ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">match_literal</span></span></span></span>(expected: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, ()), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> input.get(<span class="hljs-number"><span class="hljs-number">0</span></span>..expected.len()) { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next == expected =&gt; { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[expected.len()..], ())) } _ =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุจุฏู ูุฎุชููุง ุจุนุถ ุงูุดูุก. </p><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุฏุนููุง ููุธุฑ ุฅูู ุงูุฃููุงุน.  ุงูุขู ุชุฃุฎุฐ <code>expected</code> ุงูุณูุณูุฉ <code>expected</code> ููุณูุทุฉ <em>ูุชุนูุฏ</em> ุดูุฆูุง ูุดุงุจููุง ูููุญูู ุ ุจุฏูุงู ูู ุฃู ุชููู ูุญูููุง ููุณู.  ูุฐู ุฏุงูุฉ ุชููู ุจุฅุฑุฌุงุน <em>ุฏุงูุฉ ุฐุงุช ุชุฑุชูุจ ุฃุนูู</em> .  ูู ุงูุฃุณุงุณ ุ ููุชุจ ูุธููุฉ <em>ุชุฌุนู</em> ูุธููุฉ ูุดุงุจูุฉ ููุธููุฉ <code>the_letter_a</code> ุงูุณุงุจูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ุจุฏูุงู ูู ุฃุฏุงุก ุงูุนูู ูู ูุต ุงููุธููุฉ ุ ูุฑุฌุน ุงูุฅุบูุงู ุงูุฐู ูุคุฏู ูุฐุง ุงูุนูู ูุงูุฐู ูุชูุงูู ูุน ุชูููุน ููุนูุง ูููุญูู ูู ุงูุณุงุจู. </p><br><p style=";text-align:right;direction:rtl">  ุชุจุฏู ูุทุงุจูุฉ ุงูุฃููุงุท ููุง ูู ุ ุจุงุณุชุซูุงุก ุฃูู ูุง ูููููุง ูุทุงุจูุฉ ุณูุณูุฉ ุญุฑูููุง ุจุดูู ูุจุงุดุฑ ุ ูุฃููุง ูุง ูุนุฑู ุจุงูุถุจุท ุ ูุฐูู ูุณุชุฎุฏู ุดุฑุท ุงููุทุงุจูุฉ <code>if next == expected</code> .  ุฎูุงู ุฐูู ุ ูู ุจุงูุถุจุท ููุณ ุงูุดูุก ููุง ูุงู ูู ูุจู ุ ููุท ุฏุงุฎู ุฌุณู ุงูุฏุงุฆุฑุฉ. </p><br><h3 id="testirovanie-nashego-parsera" style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ูุญูู ูุฏููุง </h3><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุชุจ ุงุฎุชุจุงุฑูุง ููุฐุง ููุชุฃูุฏ ูู ุญุตูููุง ุนููู ุจุดูู ุตุญูุญ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">literal_parser</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parse_joe = match_literal(<span class="hljs-string"><span class="hljs-string">"Hello Joe!"</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, ())), parse_joe(<span class="hljs-string"><span class="hljs-string">"Hello Joe!"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">" Hello Robert!"</span></span>, ())), parse_joe(<span class="hljs-string"><span class="hljs-string">"Hello Joe! Hello Robert!"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"Hello Mike!"</span></span>), parse_joe(<span class="hljs-string"><span class="hljs-string">"Hello Mike!"</span></span>) ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃููุงู ูููู ุจุฅูุดุงุก ูุญูู: <code>match_literal("Hello Joe!")</code> .  ูุฌุจ ุฃู ุชุณุชููู ุงูุณูุณูุฉ <code>"Hello Joe!"</code>  ูุฅุฑุฌุงุน ุจููุฉ ุงูุณูุณูุฉ ุ ุฃู ูุดู ูุฅุฑุฌุงุน ุงูุณูุณูุฉ ุจุฃููููุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุญุงูุฉ ุงูุฃููู ุ ููุฑุฑูุง ุจุงูุตู ุงูุฏููู ุงูุฐู ูุชููุนู ุ ููุฑู ุฃูู ูุนุฑุถ ุณูุณูุฉ ูุงุฑุบุฉ ูุงููููุฉ <code>()</code> ุ ููุง ูุนูู "ููุฏ ูููุง ุจุชุญููู ุงูุณูุณูุฉ ุงููุชููุนุฉ ุ ููุง ุชุญุชุงุฌ ุฅูู ุฅุฑุฌุงุนูุง." </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุฌููุนุฉ ุงูุซุงููุฉ ุ ูุทุนู ุงูุณูุณูุฉ <code>"Hello Joe! Hello Robert!"</code>  ููุญู ูุฑู ุฃูู ูุณุชุฎุฏู ุญููุง ุงูุณูุณูุฉ <code>"Hello Joe!"</code>  ูุฅุฑุฌุงุน ูุง ุชุจูู ูู ุงููุฏุฎูุงุช: <code>" Hello Robert!"</code>  (ุงููุณุงูุฉ ุงูุฑุงุฆุฏุฉ ููู ุดูุก ุขุฎุฑ). </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุซุงูุซ ุ ูุฏุฎู ุงูุฅุฏุฎุงู ุงูุฎุงุทุฆ: <code>"Hello Mike!"</code>  ููุงุญุธ ุฃูู ูุฑูุถ ุญูุง ุงูุฅุฏุฎุงู ูุน ูุฌูุฏ ุฎุทุฃ.  ููุณ ุฃู <code>Mike</code> ูุฎุทุฆ ุ ุนุงุฏุฉ ููุณ ููุท ูุง ูุงู ูุจุญุซ ุนูู ุงููุญูู ุงููุบูู. </p><br><h3 id="parser-dlya-chego-to-menee-specifichnogo" style=";text-align:right;direction:rtl">  ูุญูู ูุดูุก ุฃูู ุชุญุฏูุฏุง </h3><br><p style=";text-align:right;direction:rtl">  ููุฐุง ูุชูุญ ููุง ุชุญููู <code>&lt;</code> ุ <code>&gt;</code> ุ <code>=</code> ูุญุชู <code>&lt;/</code> ู <code>/&gt;</code> .  ููุฏ ุงูุชูููุง ุชูุฑูุจุง! </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุงูู ุจุนุฏ ุญุฑู ุงููุชุญ <code>&lt;</code> ูู ุงุณู ุงูุนูุตุฑ.  ูุง ูููููุง ุงูููุงู ุจุฐูู ุจููุงุฑูุฉ ุณูุณูุฉ ุจุณูุทุฉ.  ูููู ูููููุง <em>ุฃู</em> ููุนู ุฐูู ูุน ุฑููุณ ... </p><br><p style=";text-align:right;direction:rtl">  ... ูููู ุฏุนูุง ููู.  ุณูููู ูุฐุง ุชุนุจูุฑูุง ุนุงุฏููุง ุณูููู ูู ุงูุณูู ุฌุฏูุง ูุณุฎู ูู ุฑูุฒ ุจุณูุท ุ ูููุฐุง ูุง ูุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุญุฒูุฉ <code>regex</code> .  ุฏุนููุง ูุฑู ูุง ุฅุฐุง ูุงู ุจุฅููุงููุง ูุชุงุจุฉ ูุญูู ุงููุบุฉ ุงูุฎุงุต ุจูุง ููุฐุง ุงูุบุฑุถ ุ ูุฐูู ุจุงุณุชุฎุฏุงู ููุชุจุฉ Rust ุงูููุงุณูุฉ ููุท. </p><br><p style=";text-align:right;direction:rtl">  ุงุณุชุฑุฌุน ุงููุงุนุฏุฉ ุงูุฎุงุตุฉ ุจูุนุฑู ุงุณู ุงูุนูุตุฑ ุ ุชุจุฏู ููุง ููู: ุญุฑู ุฃุจุฌุฏู ูุงุญุฏ ุ ูุชุจูุนูุง ุจุตูุฑ ุฃู ุฃูุซุฑ ูู ุฃู ุฑูุฒ ุฃุจุฌุฏู ุ <br>  ุญุฑู ุฃู ุฑูู ุฃู ุงูุฏูุงุนุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">identifier</span></span></span></span>(input: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> matched = <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>::new(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> chars = input.chars(); <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> chars.next() { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next.is_alphabetic() =&gt; matched.push(next), _ =&gt; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) = chars.next() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next.is_alphanumeric() || next == <span class="hljs-string"><span class="hljs-string">'-'</span></span> { matched.push(next); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> next_index = matched.len(); <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[next_index..], matched)) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ููุธุฑ ุฃููุงู ุฅูู ุงูููุน.  ูุฐู ุงููุฑุฉ ูุง ููุชุจ ูุธููุฉ ูุฅูุดุงุก ูุญูู ุ ูุญู ููุท ููุชุจ ุงููุญูู ุงููุบูู ููุณู ุ ููุง ูู ุงููุฑุฉ ุงูุฃููู.  ุงููุฑู ุงูููุญูุธ ููุง ูู ุฃูู ุจุฏูุงู ูู ููุน ุงููุชูุฌุฉ <code>()</code> ูููู ุจุฅุฑุฌุงุน <code>String</code> ูู ุงููุฌููุนุฉ ูุน ุงููุฏุฎูุงุช ุงููุชุจููุฉ.  ุณูู ุชุญุชูู ูุฐู <code>String</code> ุนูู ุงููุนุฑู ุงูุฐู ูููุง ุจุชุญูููู ููุชู. </p><br><p style=";text-align:right;direction:rtl">  ูุน ูุถุน ุฐูู ูู ุงูุงุนุชุจุงุฑ ุ ูููู ุฃููุงู ุจุฅูุดุงุก <code>String</code> ูุงุฑุบุฉ ูุณูููุง <code>matched</code> .  ุณุชููู ูุฐู ุงููุชูุฌุฉ.  ูุญุตู ุฃูุถูุง ุนูู ููุฑุฑ ููุฃุญุฑู ูู <code>input</code> ุ ูุงูุชู ุณูุจุฏุฃ ูู ุชูุณูููุง. </p><br><p style=";text-align:right;direction:rtl">  ุงูุฎุทูุฉ ุงูุฃููู ูู ูุนุฑูุฉ ูุง ุฅุฐุง ูุงู ููุงู ุฑูุฒ ูู ุงูุจุฏุงูุฉ.  ูููู ุจุณุญุจ ุงูุญุฑู ุงูุฃูู ูู ุงูุชูุฑุงุฑ ูุงูุชุญูู ููุง ุฅุฐุง ูุงู ุญุฑููุง: <code>next.is_alphabetic()</code> .  ุจุทุจูุนุฉ ุงูุญุงู ุ ูุฅู ููุชุจุฉ Rust ุงูููุงุณูุฉ ุ ุณุชุณุงุนุฏูุง ูู Unicode - ููู ุชุชูุงูู ูุน ุงูุฃุญุฑู ูู ุฃู ุญุฑูู ุฃุจุฌุฏูุฉ ุ ูููุณ ููุท ูู ASCII.  ุฅุฐุง ูุงู ุฎุทุงุจูุง ุ ูุณูุถุนู ูู ุณูุณูุชูุง ูู ุงููุชุบูุฑ <code>matched</code> ุ ูุฅุฐุง ูู ููู ุงูุฃูุฑ ูุฐูู ุ ููุญู ูุง ููุธุฑ ุฅูู ูุนุฑู ุงูุนูุตุฑ ููุฑุฌุน ููุฑูุง ูุน ูุฌูุฏ ุฎุทุฃ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฎุทูุฉ ุงูุซุงููุฉ ุ ูุณุชูุฑ ูู ุณุญุจ ุงูุฃุญุฑู ูู ุงูุชูุฑุงุฑ ุ ูุฅุฑุณุงููุง ุฅูู ุงูุณุทุฑ ุงูุฐู <code>is_alphanumeric()</code> ุญุชู <code>is_alphanumeric()</code> ุญุฑููุง ูุง ููู <code>is_alphanumeric()</code> ูุดุจู <code>is_alphabetic()</code> ุจุงุณุชุซูุงุก ุฃูู ูุชุถูู ุฃูุถูุง ุฃุฑูุงููุง ูู ุฃู ุฃุจุฌุฏูุฉ) ุฃู ุงูุฏูุงุนุฉ <code>'-'</code> . </p><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุฑู ูุฃูู ูุฑุฉ ุดูุฆูุง ูุง ููุจู ูุฐู ุงููุนุงููุฑ ุ ูุฅููุง ูููู ุงูุชุญููู ูููุณุฑ ุงูุญููุฉ <code>String</code> ุ ููุชุฐูุฑ ุฃู ููุทุน ุงูุฌุฒุก ุงูุฐู ุงุณุชุฎุฏููุงู ูู <code>input</code> .  ูุจุงููุซู ุ ุฅุฐุง ุงูุชูุช ุงูุฃุญุฑู ูู ููุฑุฑ ุ ููุฐุง ูุนูู ุฃููุง ูุตููุง ุฅูู ููุงูุฉ ุงูุฅุฏุฎุงู. </p><br><p style=";text-align:right;direction:rtl">  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃููุง ูุง ูุฑุฌุน ุฎุทุฃู ุนูุฏูุง ูุฑู ุดูุฆูุง ููุณ ุฃุจุฌุฏููุง ุฃู ุดุฑุทููุง.  ูุฏููุง ุจุงููุนู ูุง ูููู ูุฅูุดุงุก ูุนุฑูู ุตุงูุญ ุจุนุฏ ุฃู ูุทุงุจู ูุฐู ุงูุญุฑู ุงูุฃูู ุ ููู ุงูุทุจูุนู ุชูุงููุง ุฃูู ุจุนุฏ ุชุญููู ูุนุฑููุง ุ ุณูููู ููุงู ุงููุฒูุฏ ูู ุงูุนูุงุตุฑ ูู ุณุทุฑ ุงูุฅุฏุฎุงู ููุชุญููู ุ ูุฐูู ูููู ุงูุชุญููู ููุนูุฏ ูุชูุฌุชูุง.  ููุท ุฅุฐุง ูู ูุชููู ูู ุงูุนุซูุฑ ุญุชู ุนูู ูุฐู ุงูุฑุณุงูุฉ ุงูุฃููู ุ ููุญู ูุฑุฌุน ุฎุทุฃ ุจุงููุนู ุ ูุฃูู ูู ูุฐู ุงูุญุงูุฉ ูุง ููุฌุฏ ุจุงูุชุฃููุฏ ูุนุฑู. </p><br><p style=";text-align:right;direction:rtl">  ุชุฐูุฑ ุฃู ุจููุฉ <code>Element</code> ูู ูุง ุณูููู ุจุชุญููู ูุณุชูุฏ XML ุงูุฎุงุต ุจู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Element</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, attributes: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt;, children: <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;Element&gt;, }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ููุฏ ุงูุชูููุง ููุชู ูู ูุญูู ุงูุฌุฒุก ุงูุฃูู ุ ุญูู <code>name</code> .  <code>String</code> ุงูุชู ุชุฑุฌุน ุงููุญูู ุงููุบูู ูุฏููุง ุชุฐูุจ ูุจุงุดุฑุฉ ุฅูู ููุงู.  ููู ุฃูุถูุง ุงููุญูู ุงููุบูู ุงูุตุญูุญ ููุฌุฒุก ุงูุฃูู ูู ูู <code>attribute</code> . </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ุงูุชุญูู ูู ุฐูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">identifier_parser</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"i-am-an-identifier"</span></span>.to_string())), identifier(<span class="hljs-string"><span class="hljs-string">"i-am-an-identifier"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">" entirely an identifier"</span></span>, <span class="hljs-string"><span class="hljs-string">"not"</span></span>.to_string())), identifier(<span class="hljs-string"><span class="hljs-string">"not entirely an identifier"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"!not at all an identifier"</span></span>), identifier(<span class="hljs-string"><span class="hljs-string">"!not at all an identifier"</span></span>) ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฑู ุฃูู ูู ุงูุญุงูุฉ ุงูุฃููู ุ <code>"i-am-an-identifier"</code> ุชุญููู ุงูุณูุณูุฉ <code>"i-am-an-identifier"</code> ุชูุงููุง ุ ููุง ุชุชุฑู ุณูู ุณูุณูุฉ ูุงุฑุบุฉ.  ูู ุงูุญุงูุฉ ุงูุซุงููุฉ ุ ูููู ุงููุญูู ุจุฅุฑุฌุงุน <code>"not"</code> ููุนุฑู ุ ููุชู ุฅุฑุฌุงุน ุจููุฉ ุงูุณูุณูุฉ ููุฏุฎูุงุช ูุชุจููุฉ.  ูู ุงูุญุงูุฉ ุงูุซุงูุซุฉ ุ ููุดู ุงููุญูู ุงููุบูู ุนูู ุงูููุฑ ุ ูุฃู ุงูุญุฑู ุงูุฃูู ุงูุฐู ูุนุซุฑ ุนููู ููุณ ุญุฑููุง. </p><br><h3 id="kombinatory" style=";text-align:right;direction:rtl">  combinators </h3><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููููุง ุชุญููู ุงูุญุฑู ุงูุงูุชุชุงุญู <code>&lt;</code> ุ ููููููุง ุชุญููู ุงููุนุฑู ุงูุชุงูู ุ ููููุง ุจุญุงุฌุฉ ุฅูู ุชุญููู <em>ูููููุง</em> .  ูุฐูู ุ ูุฅู ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ูุชุงุจุฉ ุฏุงูุฉ ูุญูู ุงูุฏูุงุฌู ุฃุฎุฑู ุ ูููู ูุงุญุฏุฉ ุชุฃุฎุฐ <em>ูุญููุชูู</em> ููุฏุฎูุงุช ูุฅุฑุฌุงุน <em>ูุญูู</em> ุฌุฏูุฏ ููุฒุนููุง ุจุงูุชุฑุชูุจ.  ุจูุนูู ุขุฎุฑ ุ <em>ุฃุฏุงุฉ ุงูุฌูุน</em> ุจูู ุงููุญูู ุงููุบูู ูุฃูู ูุฌูุน ุจูู ุงููุบุชูู ูู ูุงุญุฏุฉ ุฌุฏูุฏุฉ.  ุฏุนููุง ูุฑู ูุง ุงุฐุง ููุง ูุณุชุทูุน ุงูููุงู ุจุฐูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair</span></span></span></span>&lt;P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, (R1, R2)), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, R1), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;, P2: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, R2), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser1(input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, result1)) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser2(next_input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((final_input, result2)) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((final_input, (result1, result2))), <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), }, <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุตุจุญ ุงูุฃูุฑ ุฃูุซุฑ ุตุนูุจุฉ ุจุนุถ ุงูุดูุก ููุง ุ ูููู ุชุนุฑู ูุง ูุฌุจ ูุนูู: ุงุจุฏุฃ ุจุงููุธุฑ ูู ุงูุฃููุงุน. </p><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุฏููุง ุฃุฑุจุนุฉ ุฃููุงุน ูู ุงููุชุบูุฑุงุช: <code>P1</code> ุ <code>P2</code> ุ <code>R1</code> ู <code>R2</code> .  ูุฐู ูู <code>Parser 1</code> ุ <code>Parser 2</code> ุ <code>Result 1</code> <code>Result 2</code> .  <code>P1</code> ู <code>P2</code> ูู ูุธุงุฆู ุ ูุณุชูุงุญุธ ุฃููุง ุชุชุจุน ููุทูุง ุซุงุจุชูุง ูู ูุธุงุฆู ุงููุญูู ุงููุบูู: ุชูุงููุง ูุซู ูููุฉ ุงูุฅุฑุฌุงุน ุ ูุฅููุง ุชุฃุฎุฐ <code>&amp;str</code> ููุฏุฎูุงุช ูุฅุฑุฌุงุน. ููุชุฌ <code>Result</code> ุฒูุฌ ุงููุฏุฎูุงุช <code>Result</code> ุงููุชุจููุฉ ุ ุฃู ุฎุทุฃ. </p><br><p style=";text-align:right;direction:rtl">  ููู ุงูุธุฑ ุฅูู ุฃููุงุน ูุชุงุฆุฌ ูู ูุธููุฉ: <code>P1</code> ูู ุงููุญูู ุงููุบูู ุงูุฐู ูุนุทู <code>R1</code> ุฅุฐุง ูุฌุญ ุ ู <code>P2</code> ูุนุทู <code>R2</code> ุฃูุถูุง.  ูุชููู ูุชูุฌุฉ ุงููุญูู ุงููุบูู ุงูุฃุฎูุฑ ุงูุฐู ุชู ุฅุฑุฌุงุนู ูู <code>(R1, R2)</code> .  ูุจุงูุชุงูู ุ ูุฅู ูููุฉ ูุฐุง ุงููุญูู ูู ุฃููุงู ุจุฏุก ุชุดุบูู ุงููุญูู <code>P1</code> ุนูุฏ ุงูุฅุฏุฎุงู ุ ูุญูุธ ูุชูุฌุชู ุ ุซู ุชุดุบูู <code>P2</code> ุนูุฏ ุงูุฅุฏุฎุงู ุงูุฐู ุฃุนุงุฏ <code>P1</code> ุ ูุฅุฐุง <code>P1</code> ููุงููุง ุ ูุฅููุง ูุฌูุน ุจูู ุงููุชูุฌุชูู ูู tuple <code>(R1, R2)</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุธูุฑ ุงูุฑูุฒ ุฃู ูุฐุง ูู ุจุงูุถุจุท ูุง ููุนูู.  ูุจุฏุฃ ุจุจุฏุก ุฃูู ูุญูู ุนูุฏ ุงููุฏุฎูุงุช ุ ุซู ุจุนุฏ ุฐูู ูุญูู ุงูุซุงูู ุ ุซู ูุฌูุน ุจูู ุงููุชูุฌุชูู ูู tuple ููุนูุฏู.  ุฅุฐุง ูุดู ุฃู ูู ูุฐู ุงููุญูููู ุ ูุณูู ูุนูุฏ ุนูู ุงูููุฑ ูุน ุงูุฎุทุฃ ุงูุฐู ุฃุตุฏุฑู. </p><br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ูุฌุจ ุฃู ูููู ูุงุฏุฑูู ุนูู ุงูุฌูุน ุจูู <code>match_literal</code> ุ <code>match_literal</code> ุ ูู ุฃุฌู <code>match_literal</code> ุงูุฃูู ูู ุนูุงูุฉ XML ุงูุฃููู.  ุฏุนูุง ููุชุจ ุงุฎุชุจุงุฑ ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ูุนูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tag_opener = pair(match_literal(<span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>), identifier); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">"/&gt;"</span></span>, ((), <span class="hljs-string"><span class="hljs-string">"my-first-element"</span></span>.to_string()))), tag_opener(<span class="hljs-string"><span class="hljs-string">"&lt;my-first-element/&gt;"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"oops"</span></span>), tag_opener(<span class="hljs-string"><span class="hljs-string">"oops"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"!oops"</span></span>), tag_opener(<span class="hljs-string"><span class="hljs-string">"&lt;!oops"</span></span>)); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุฃู ุงูุนูู!  ููู ุงูุธุฑ ุฅูู ูุฐุง ุงูููุน ูู ุงููุชุงุฆุฌ: <code>((), String)</code> .  ูู ุงููุงุถุญ ุฃููุง ููุชููู ููุท ุจุงููููุฉ ุงูุตุญูุญุฉ ุ <code>String</code> .  ุณูู ูุญุฏุซ ูุฐุง ุบุงูุจูุง - ุชุชุทุงุจู ุจุนุถ ุฃุฏูุงุช ุชุญููููุง ูุน ุงูุฃููุงุท ูู ุงูุฅุฏุฎุงู ุฏูู ุฅูุชุงุฌ ููู ุ ูุจุงูุชุงูู ูููู ุชุฌุงูู ุฅูุชุงุฌูุง ุจุฃูุงู.  ููุชููู ูุน ูุฐุง ุงูููุท ุ ุณูุณุชุฎุฏู ุฃุฏุงุฉ ุฏูุฌ <code>pair</code> ุจูุง ููุชุงุจุฉ ูุฌูุนูู ุขุฎุฑูู: <code>left</code> ุ ูุงูุฐู ูุชุฌุงูู ูุชูุฌุฉ ุงููุญูู ุงููุบูู ุงูุฃูู ููุนูุฏ ููุท ุงูุซุงูู ุ ูุงูุนูุณ <code>right</code> .  ุงุณุชุฎุฏููุง ุงููุญูู ุงููุบูู ูู ุงุฎุชุจุงุฑูุง ุฃุนูุงู ุ ูุงูุฐู ูุชุฌุงูู ุงูุฌุฒุก ุงูุฃูุณุฑ ููุญูุธ ููุท <code>String</code> ูุฏููุง ุ ุจุฏูุงู ูู <code>pair</code> . </p><br><h3 id="vvedenie-v-funktor" style=";text-align:right;direction:rtl">  ููุฏูุฉ Functor </h3><br><p style=";text-align:right;direction:rtl">  ูููู ูุจู ุฃู ูุฐูุจ ุฅูู ูุฐุง ุงูุญุฏ ุ ุฏุนูุง ููุฏู ููุฒุฌูุง ุขุฎุฑ ูู ุดุฃูู ุชุจุณูุท ูุชุงุจุฉ ูุฐูู ุงูุฃูุฑูู: <code>map</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ูุฐุง ุงูููุญุฏ ุนูู ูููุฉ ูุงุญุฏุฉ: ูุชุบููุฑ ููุน ุงููุชูุฌุฉ.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงู ุ ุฏุนูุง ูููู ุฃู ูุฏูู ูุญูููุง ููุฑุฌุน </font></font><code>((), String)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุฑุบุจ ูู ุชุบููุฑู ุจุญูุซ ูุนูุฏ ุนูู ุณุจูู ุงููุซุงู ููุท </font></font><code>String</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></p><br><p style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุงู ุจุฐูู ุ ูููู ุจุชูุฑูุฑูุง ูุธููุฉ ุชุนุฑู ููููุฉ ุชุญููู ุงูููุน ุงูุฃุตูู ุฅูู ููุน ุฌุฏูุฏ. </font><font style="vertical-align: inherit;">ูู ูุซุงููุงุ ูู ุจุณูุท: </font></font><code>|(_left, right)| right</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุดูู ุฃุนู ุ ุณูุจุฏู </font></font><code>Fn(A) -&gt; B</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูููุงู </font></font><code>A</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ูุชูุฌุฉ ุงูููุน ุงูุฃุตูู ูููุญูู - ูุงูููุน </font></font><code>B</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฌุฏูุฏ.</font></font></p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span></span>&lt;P, F, A, B&gt;(parser: P, map_fn: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, B), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, A), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(A) -&gt; B, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser(input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, result)) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, map_fn(result))), <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), } }</code> </pre> <br><p style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงุฐุง ุชููู ุงูุฃููุงุนุ </font></font><code>P</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- ุงููุญูู ุงููุบูู ูุฏููุง. </font><font style="vertical-align: inherit;">ุนูุงุฆุฏ </font></font><code>A</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุฌุงุญ. </font></font><code>F</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุธููุฉ ุณูู ูุณุชุฎุฏููุง ูุนุฑุถูุง </font></font><code>P</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููุฉ ุฅุฑุฌุงุน ูุฏููุง ุ ูุงูุชู ุชุจุฏู ููุง ูู </font></font><code>P</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุน ุงุณุชุซูุงุก ุฃู ููุน ุงููุชูุฌุฉ ุงูุฎุงุต ุจูุง </font></font><code>B</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุฏูุงู ูู ุฐูู</font></font><code>A</code> </p><br><p style=";text-align:right;direction:rtl">     <code>parser(input)</code> ,   ,   <code>result</code>       <code>map_fn(result)</code> ,  <code>A</code>  <code>B</code> ,     . </p><br><p style=";text-align:right;direction:rtl">   ,        ,    <code>map</code>   ,    <code>Result</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span></span>&lt;P, F, A, B&gt;(parser: P, map_fn: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, B), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, A), &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(A) -&gt; B, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| parser(input) .map(|(next_input, result)| (next_input, map_fn(result))) }</code> </pre> <br><p style=";text-align:right;direction:rtl">   โ ,   ยซยป  Haskell    ,  .        <code>A</code> ,       <code>map</code> ,      <code>A</code>  <code>B</code>       ,    <code>B</code>  ,  .        Rust,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Option</code></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Result</code></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Iterator</code></a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>Future</code></a> ,     .     :    -         Rust,         ,    ,    ,   ,       <code>map</code> . </p><br><h3 id="vremya-dlya-tipazha" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl"> ,   ,         : <code>Fn(&amp;str) -&gt; Result&lt;(&amp;str, Output), &amp;str&gt;</code> . ,    ,    ,  ,   ,   ,     ,              . </p><br><p style=";text-align:right;direction:rtl">         ,    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ParseResult</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; = <span class="hljs-built_in"><span class="hljs-built_in">Result</span></span>&lt;(&amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>, Output), &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>&gt;;</code> </pre> <br><p style=";text-align:right;direction:rtl">   ,  ,     ,     <code>ParseResult&lt;String&gt;</code>  .     ,      ,      Rust       .      ,   <code>rustc</code> ,     ,   . </p><br><p style=";text-align:right;direction:rtl">   <code>'a</code> ,   ,      <em> </em> . </p><br><p style=";text-align:right;direction:rtl">  .       ,       ,      .    ,     . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parser</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt;; }</code> </pre> <br><p style=";text-align:right;direction:rtl">         :  <code>parse()</code> ,    :   ,   ,   . </p><br><p style=";text-align:right;direction:rtl">     ,        ,    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, F, Output&gt; Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> F <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;Output&gt;, { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>(input) } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,        ,   ,      <code>Parser</code> ,          . </p><br><p style=";text-align:right;direction:rtl"> ,   ,          .    <code>map</code>  ,   . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, F, A, B&gt;(parser: P, map_fn: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, B&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(A) -&gt; B, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| parser.parse(input) .map(|(next_input, result)| (next_input, map_fn(result))) }</code> </pre> <br><p style=";text-align:right;direction:rtl">      :       ,      <code>parser.parse(input)</code> ,     ,    <code>P</code> ,   ,    <code>Parser</code> ,      ,   <code>Parser</code> .         ,     .      <code>'a'</code> ,    ,       . </p><br><p style=";text-align:right;direction:rtl">     <code>pair</code>   ,     : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (R1, R2)&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser1.parse(input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, result1)) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser2.parse(next_input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((final_input, result2)) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((final_input, (result1, result2))), <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), }, <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), } }</code> </pre> <br><p style=";text-align:right;direction:rtl">     :            <code>parser.parse(input)</code>  <code>parser(input)</code> . </p><br><p style=";text-align:right;direction:rtl">   ,       <code>pair</code> ,       <code>map</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (R1, R2)&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| { parser1.parse(input).and_then(|(next_input, result1)| { parser2.parse(next_input) .map(|(last_input, result2)| (last_input, (result1, result2))) }) } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>and_then</code>  <code>Result</code>   <code>map</code> ,   ,        <code>Result</code> ,    <code>Result</code> .             <code>match</code> .  <code>and_then</code>   ,  ,        <code>map</code> ,    <code>left</code>  <code>right</code> . </p><br><h3 id="left-i-right" style=";text-align:right;direction:rtl"> Left  Right </h3><br><p style=";text-align:right;direction:rtl">  <code>pair</code>  <code>map</code>  ,    <code>left</code>  <code>right</code>  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">left</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt;, { map(pair(parser1, parser2), |(left, _right)| left) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">right</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt;, { map(pair(parser1, parser2), |(_left, right)| right) }</code> </pre><br><p style=";text-align:right;direction:rtl">    <code>pair</code> ,          ,      <code>map</code>      ,    . </p><br><p style=";text-align:right;direction:rtl">          ,     ,            . </p><br><p style=";text-align:right;direction:rtl">      ,    <code>Parser</code>  <code>ParseResult</code> . <code>match_literal</code>   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">match_literal</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;(expected: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, ()&gt; { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> input.get(<span class="hljs-number"><span class="hljs-number">0</span></span>..expected.len()) { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> next == expected =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[expected.len()..], ())), _ =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } }</code> </pre> <br><p style=";text-align:right;direction:rtl">       ,    ,       โ <code>&amp;'a str</code> ,  <code>rustc</code> . </p><br><p style=";text-align:right;direction:rtl">  <code>identifier</code> ,     ,   ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">identifier</span></span></span></span>(input: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; {</code> </pre> <br><p style=";text-align:right;direction:rtl">   . <code>()</code>   .    . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">right_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> tag_opener = right(match_literal(<span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>), identifier); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">"/&gt;"</span></span>, <span class="hljs-string"><span class="hljs-string">"my-first-element"</span></span>.to_string())), tag_opener.parse(<span class="hljs-string"><span class="hljs-string">"&lt;my-first-element/&gt;"</span></span>) ); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"oops"</span></span>), tag_opener.parse(<span class="hljs-string"><span class="hljs-string">"oops"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"!oops"</span></span>), tag_opener.parse(<span class="hljs-string"><span class="hljs-string">"&lt;!oops"</span></span>)); }</code> </pre> <br><h3 id="odin-ili-bolshe" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">      .      <code>&lt;</code>     .  ?       . </p><br><p style=";text-align:right;direction:rtl"> ,   ,     .       ,    . </p><br><p style=";text-align:right;direction:rtl"> , ,         - , <em> </em>       : . </p><br><p style=";text-align:right;direction:rtl">          (  )  .      . </p><br><p style=";text-align:right;direction:rtl">    โ      <em>   </em> ,   <code>&lt;element attribute="value"/&gt;</code>   ,      .       ,     ,   <em>  </em>  . </p><br><p style=";text-align:right;direction:rtl">          <code>identifier</code> ,      .  ,          . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_or_more</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;A&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> input| { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result = <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>::new(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, first_item)) = parser.parse(input) { input = next_input; result.push(first_item); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, next_item)) = parser.parse(input) { input = next_input; result.push(next_item); } <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((input, result)) } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,    ,    ,  <code>A</code> ,        <code>Vec&lt;A&gt;</code> โ   <code>A</code> . </p><br><p style=";text-align:right;direction:rtl">      <code>identifier</code> .     ,     ,    .       ,      ,           . </p><br><p style=";text-align:right;direction:rtl">    ,  :         <em></em>  ?       : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zero_or_more</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;A&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> input| { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> result = <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>::new(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, next_item)) = parser.parse(input) { input = next_input; result.push(next_item); } <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((input, result)) } }</code> </pre> <br><p style=";text-align:right;direction:rtl">    ,  ,     . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_or_more_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parser = one_or_more(match_literal(<span class="hljs-string"><span class="hljs-string">"ha"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(), (), ()])), parser.parse(<span class="hljs-string"><span class="hljs-string">"hahaha"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"ahah"</span></span>), parser.parse(<span class="hljs-string"><span class="hljs-string">"ahah"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>), parser.parse(<span class="hljs-string"><span class="hljs-string">""</span></span>)); } <span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zero_or_more_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parser = zero_or_more(match_literal(<span class="hljs-string"><span class="hljs-string">"ha"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(), (), ()])), parser.parse(<span class="hljs-string"><span class="hljs-string">"hahaha"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">"ahah"</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[])), parser.parse(<span class="hljs-string"><span class="hljs-string">"ahah"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[])), parser.parse(<span class="hljs-string"><span class="hljs-string">""</span></span>)); }</code> </pre> <br><p style=";text-align:right;direction:rtl">      :  <code>one_or_more</code>     ,             ,   <code>zero_or_more</code>      ,    . </p><br><p style=";text-align:right;direction:rtl">            ,       ,     .     <code>one_or_more</code>   <code>zero_or_more</code> , -  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">one_or_more</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;A&gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { map(pair(parser, zero_or_more(parser)), |(head, <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> tail)| { tail.insert(<span class="hljs-number"><span class="hljs-number">0</span></span>, head); tail }) }</code> </pre> <br><p style=";text-align:right;direction:rtl">      Rust,           <code>cons</code>  <code>Vec</code> ,   ,     Lisp,    ,   . ,   :  . </p><br><p style=";text-align:right;direction:rtl">    ,          :    ,       .  :                (       ).       ,      ,   <code>Clone</code> ,      ,     ,          . </p><br><p style=";text-align:right;direction:rtl">    <em></em> .  ,      <code>one_or_more</code>   ,  ,       ,      ,        ,     -  ,    ,   <code>RangeBound</code>            : <code>range(0..)</code>  <code>zero_or_more</code> , <code>range(1..)</code>  <code>one_or_more</code> , <code>range(5..=6)</code>     ,    . </p><br><p style=";text-align:right;direction:rtl">       .           <code>zero_or_more</code>  <code>one_or_more</code> . </p><br><p style=";text-align:right;direction:rtl">      ,        โ  ,    <code>Rc</code>    ? </p><br><h3 id="predikatnyy-kombinator" style=";text-align:right;direction:rtl">   </h3><br><p style=";text-align:right;direction:rtl">      ,         <code>one_or_more</code>      <code>zero_or_more</code> . </p><br><p style=";text-align:right;direction:rtl">   ,  .     ,  <em></em>  .     ,    ,     ,       <code>&gt;</code>  <code>/&gt;</code> .    ,  <em></em>  .    ,   ,       ,        <em>  </em>  <em>  </em> ,    . </p><br><p style=";text-align:right;direction:rtl">       .       . </p><br><p style=";text-align:right;direction:rtl"> -.         <code>match_literal</code>  ,    .   ?   -    ,       Unicode,    .        Rust,  ,  <code>char</code>   <code>is_whitespace</code> ,    <code>is_alphabetic</code>  <code>is_alphanumeric</code> . </p><br><p style=";text-align:right;direction:rtl"> -.     ,      ,   <code>is_whitespace</code> ,     <code>identifier</code> . </p><br><p style=";text-align:right;direction:rtl"> -.    ,     .      <code>any_char</code> ,    <code>char</code>   ,      ,   <code>pred</code> ,       ,    : <code>pred(any_char, |c| c.is_whitespace())</code> .    ,      ,    :      . </p><br><p style=";text-align:right;direction:rtl">  <code>any_char</code> ,   ,       UTF-8. </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">any_char</span></span></span></span>(input: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-built_in"><span class="hljs-built_in">char</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> input.chars().next() { <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(next) =&gt; <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((&amp;input[next.len_utf8()..], next)), _ =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input), } }</code> </pre> <br><p style=";text-align:right;direction:rtl">   <code>pred</code>     ,   , .    ,       .     ,      <code>true</code> ,    .       ,    . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pred</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A, F&gt;(parser: P, predicate: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;A) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span>, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, value)) = parser.parse(input) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> predicate(&amp;value) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, value)); } } <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(input) } }</code> </pre> <br><p style=";text-align:right;direction:rtl">   ,  ,    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">predicate_combinator</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parser = pred(any_char, |c| *c == <span class="hljs-string"><span class="hljs-string">'o'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">"mg"</span></span>, <span class="hljs-string"><span class="hljs-string">'o'</span></span>)), parser.parse(<span class="hljs-string"><span class="hljs-string">"omg"</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"lol"</span></span>), parser.parse(<span class="hljs-string"><span class="hljs-string">"lol"</span></span>)); }</code> </pre> <br><p style=";text-align:right;direction:rtl">     ,     <code>whitespace_char</code>    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">whitespace_char</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">char</span></span>&gt; { pred(any_char, |c| c.is_whitespace()) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,     <code>whitespace_char</code> ,     ,    , <em>   </em> ,    , <em>   </em> .        <code>space1</code>  <code>space0</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">space1</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">char</span></span>&gt;&gt; { one_or_more(whitespace_char()) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">space0</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">char</span></span>&gt;&gt; { zero_or_more(whitespace_char()) }</code> </pre> <br><h3 id="citiruemye-stroki" style=";text-align:right;direction:rtl">   </h3><br><p style=";text-align:right;direction:rtl">          ? ,    ,          .     <code>identifier</code>    (  ,      <code>any_char</code>  <code>pred</code>   <code>*_or_more</code> ). <code>match_literal("=")</code>   <code>=</code> .         ,     .  ,      ,     . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quoted_string</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; { map( right( match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), left( zero_or_more(pred(any_char, |c| *c != <span class="hljs-string"><span class="hljs-string">'"'</span></span>)), match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), ), ), |chars| chars.into_iter().collect(), ) }</code> </pre> <br><p style=";text-align:right;direction:rtl">       ,     ,    ,      ,   . </p><br><p style=";text-align:right;direction:rtl">     <code>map</code> -   ,    ,    ,     ,    ,    :   .  <code>map</code>  <code>right</code> ,    <code>right</code> โ  ,   : <code>match_literal("\"")</code> .     . </p><br><p style=";text-align:right;direction:rtl">    <code>right</code> โ   .      <code>left</code> ,    ,  <em></em>   <code>left</code> , ,   ,   <code>match_literal("\"")</code> โ  .  ,   โ    . </p><br><p style=";text-align:right;direction:rtl">     <code>pred</code>  <code>any_char</code> ,   ,    <em>   </em> ,      <code>zero_or_more</code> ,   : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">   </li><li style=";text-align:right;direction:rtl">       ,  <em></em>    </li><li style=";text-align:right;direction:rtl">    </li></ul><br><p style=";text-align:right;direction:rtl">   <code>right</code>  <code>left</code>          . </p><br><p style=";text-align:right;direction:rtl">  ,   . ,   <code>zero_or_more</code> ? <code>Vec&lt;A&gt;</code>      <code>A</code> .  <code>any_char</code>  <code>char</code> .  ,    ,  <code>Vec&lt;char&gt;</code> .     <code>map</code> :   ,   <code>Vec&lt;char&gt;</code>  <code>String</code> ,   ,     <code>String</code>  <code>Iterator&lt;Item = char&gt;</code> ,      <code>vec_of_chars.into_iter().collect()</code>     ,    <code>String</code> . </p><br><p style=";text-align:right;direction:rtl">     ,  ,    ,    ,  ,     ,   ,  ,            . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quoted_string_parser</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"Hello Joe!"</span></span>.to_string())), quoted_string().parse(<span class="hljs-string"><span class="hljs-string">"\"Hello Joe!\""</span></span>) ); }</code> </pre> <br><p style=";text-align:right;direction:rtl"> , , ,  ,    . </p><br><h3 id="nakonec-atributy-razbora" style=";text-align:right;direction:rtl"> ,   </h3><br><p style=";text-align:right;direction:rtl">     , ,  <code>=</code>    .   ,      . </p><br><p style=";text-align:right;direction:rtl">      .   ,      <code>Vec&lt;(String, String)&gt;</code> ,      <code>(String, String)</code> ,       <code>zero_or_more</code> . ,     . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attribute_pair</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt; { pair(identifier, right(match_literal(<span class="hljs-string"><span class="hljs-string">"="</span></span>), quoted_string())) }</code> </pre> <br><p style=";text-align:right;direction:rtl">   !  :           <code>pair</code> ,       <code>identifier</code> ,    <code>String</code> ,  <code>right</code>   <code>=</code> ,      ,    <code>quoted_string</code> ,     <code>String</code> . </p><br><p style=";text-align:right;direction:rtl">      <code>zero_or_more</code> ,   ,        . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attributes</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt;&gt; { zero_or_more(right(space1(), attribute_pair())) }</code> </pre> <br><p style=";text-align:right;direction:rtl">    :     , <br>   .   <code>right</code>       . </p><br><p style=";text-align:right;direction:rtl">   . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">attribute_parser</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(( <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[ (<span class="hljs-string"><span class="hljs-string">"one"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"1"</span></span>.to_string()), (<span class="hljs-string"><span class="hljs-string">"two"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"2"</span></span>.to_string()) ] )), attributes().parse(<span class="hljs-string"><span class="hljs-string">" one=\"1\" two=\"2\""</span></span>) ); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  !  ! </p><br><p style=";text-align:right;direction:rtl">   , ,      rustc ,      ,          .  ,              .  ,    rustc,  ,   ,    <code>#![type_length_limit = "โฆsome big numberโฆ"]</code>   ,      .   ,    <code>#![type_length_limit = "16777216"]</code> ,          . ,   ! </p><br><h3 id="tak-teper-zavershenie" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">   , ,      ,    ,        NP-.        element:        ,   ,    ,        <code>zero_or_more</code> , ? </p><br><p style=";text-align:right;direction:rtl"> ,     ,     . ,   ,      ,    :   <code>&lt;</code> ,    .  ,       <code>(String, Vec&lt;(String, String)&gt;)</code>   . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">element_start</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Vec</span></span>&lt;(<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>)&gt;)&gt; { right(match_literal(<span class="hljs-string"><span class="hljs-string">"&lt;"</span></span>), pair(identifier, attributes())) }</code> </pre> <br><p style=";text-align:right;direction:rtl">    ,        ,       . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">single_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { map( left(element_start(), match_literal(<span class="hljs-string"><span class="hljs-string">"/&gt;"</span></span>)), |(name, attributes)| Element { name, attributes, children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }, ) }</code> </pre> <br><p style=";text-align:right;direction:rtl"> ,  ,      โ     <code>Element</code> ! </p><br><p style=";text-align:right;direction:rtl">      . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">single_element_parser</span></span></span></span>() { <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>( <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(( <span class="hljs-string"><span class="hljs-string">""</span></span>, Element { name: <span class="hljs-string"><span class="hljs-string">"div"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(<span class="hljs-string"><span class="hljs-string">"class"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"float"</span></span>.to_string())], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[] } )), single_element().parse(<span class="hljs-string"><span class="hljs-string">"&lt;div class=\"float\"/&gt;"</span></span>) ); }</code> </pre> <br><p style=";text-align:right;direction:rtl"> โฆ   ,       . </p><br><p style=";text-align:right;direction:rtl">    <code>single_element</code>  ,          ,    ,    . ,        ,       ,       โ ,       โ   . </p><br><p style=";text-align:right;direction:rtl">   ,        ,      ... </p><br><h3 id="beskonechnost-ne-predel" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">   -      Rust, , ,      . </p><br><p style=";text-align:right;direction:rtl">        .  ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span></span>&lt;A&gt; { Cons(A, List&lt;A&gt;), Nil, }</code> </pre> <br><p style=";text-align:right;direction:rtl">   rustc    ,     <code>List&lt;A&gt;</code>   ,     <code>List::&lt;A&gt;::Cons</code>    <code>List&lt;A&gt;</code> ,      .   rustc,      ,   ,     <em></em>  . </p><br><p style=";text-align:right;direction:rtl">             ,       Rust.    ,   Rust,   ,     <em></em>     ,     <em></em>  ,    .    ,      . </p><br><p style=";text-align:right;direction:rtl">    ,    .  ,   <code>List::Cons</code>   <code>A</code>   <em></em> <code>A</code> ,     <code>A</code>  <em></em>   <code>A</code> .    ,   ,   ,    ,    <code>List::Cons</code>      ,    .    ,           Rust โ  <code>Box</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span></span>&lt;A&gt; { Cons(A, <span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>&lt;List&lt;A&gt;&gt;), Nil, }</code> </pre> <br><p style=";text-align:right;direction:rtl">     <code>Box</code>   ,       .  ,          ,            <code>Box&lt;dyn Parser&lt;'a, A&gt;&gt;</code> . </p><br><p style=";text-align:right;direction:rtl">   .  ?  ,        -    ,    ,          .       :   .      .  ,      ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  SIMD</a> (     ). </p><br><p style=";text-align:right;direction:rtl"> ,     <code>Parser</code>     <em>Box</em>     ,      . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BoxedParser</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { parser: <span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>&lt;dyn Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;, } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span></span>&lt;P&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">Self</span></span> <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { BoxedParser { parser: <span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>::new(parser), } } } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.parser.parse(input) } }</code> </pre> <br><p style=";text-align:right;direction:rtl"> ,  ,    <code>BoxedParser</code>    <code>box</code> .    <code>BoxedParser</code>       (  <code>BoxedParser</code> ,      ),    <code>BoxedParser::new(parser)</code> ,    ,      <code>Box</code>    . ,   <code>Parser</code>  ,         . </p><br><p style=";text-align:right;direction:rtl">          <code>Box</code> ,  <code>BoxedParser</code>    <code>Parser</code>  ,   . ,   ,  ,           ,    ,     <em>  </em> ,  , ,   <em> </em> .        . </p><br><h3 id="vozmozhnost-predstavlyaet-sebya" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl"> ,  ,       ,     . </p><br><p style=";text-align:right;direction:rtl">    ,   ?      ,       ,       .    <code>quoted_string</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quoted_string</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; { map( right( match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), left( zero_or_more(pred(any_char, |c| *c != <span class="hljs-string"><span class="hljs-string">'"'</span></span>)), match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), ), ), |chars| chars.into_iter().collect(), ) }</code> </pre> <br><p style=";text-align:right;direction:rtl">     ,             .             <code>Parser</code> ? </p><br><p style=";text-align:right;direction:rtl">   ,     ,     <code>impl Trait</code>     ,   <code>impl Trait</code>     . </p><br><p style=";text-align:right;direction:rtl"> โฆ      <code>BoxedParser</code> .       ,   <code>impl Parser&lt;'a, A&gt;</code> ,    <em></em>  ,   <code>BoxedParser&lt;'a, A&gt;</code> . </p><br><p style=";text-align:right;direction:rtl">   ,          ,           ,   <code>Parser</code> . </p><br><p style=";text-align:right;direction:rtl">     <code>map</code> ,    <code>Parser</code>  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Parser</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, input: &amp;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> <span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; ParseResult&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt;; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">map</span></span></span></span>&lt;F, NewOutput&gt;(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, map_fn: F) -&gt; BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Self</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Sized</span></span> + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(Output) -&gt; NewOutput + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { BoxedParser::new(map(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, map_fn)) } }</code> </pre> <br><p style=";text-align:right;direction:rtl">   <code>'a</code> , ,    .  ,            โ     ,          ,       <code>impl Trait</code> . </p><br><p style=";text-align:right;direction:rtl">       <code>quoted_string</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quoted_string</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; { right( match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), left( zero_or_more(pred(any_char, |c| *c != <span class="hljs-string"><span class="hljs-string">'"'</span></span>)), match_literal(<span class="hljs-string"><span class="hljs-string">"\""</span></span>), ), ) .map(|chars| chars.into_iter().collect()) }</code> </pre> <br><p style=";text-align:right;direction:rtl">   ,   ,  <code>.map()</code>    <code>right()</code> . </p><br><p style=";text-align:right;direction:rtl">         <code>pair</code> , <code>left</code>  <code>right</code> ,       ,    ,    ,        <code>pair</code> .    ,       ,     <code>map</code> ,         . </p><br><p style=";text-align:right;direction:rtl">    โ <code>pred</code> .        <code>Parser</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pred</span></span></span></span>&lt;F&gt;(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, pred_fn: F) -&gt; BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Self</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Sized</span></span> + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(&amp;Output) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">bool</span></span> + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { BoxedParser::new(pred(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, pred_fn)) }</code> </pre> <br><p style=";text-align:right;direction:rtl">       <code>quoted_string</code>   <code>pred</code> ,   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs">zero_or_more(any_char.pred(|c| *c != <span class="hljs-string"><span class="hljs-string">'"'</span></span>)),</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,     ,   ,     <code>zero_or_more</code>   โ    ยซ    <code>any_char</code>    ยป,    .  ,        <code>zero_or_more</code>  <code>one_or_more</code>  . </p><br><p style=";text-align:right;direction:rtl">     <code>quoted_string</code> ,    <code>map</code>  <code>single_element</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">single_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { left(element_start(), match_literal(<span class="hljs-string"><span class="hljs-string">"/&gt;"</span></span>)).map(|(name, attributes)| Element { name, attributes, children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }) }</code> </pre> <br><p style=";text-align:right;direction:rtl">      <code>element_start</code>  ,    ,  ,   .          ... </p><br><p style=";text-align:right;direction:rtl"> โฆ  ,       .             ,     . </p><br><p style=";text-align:right;direction:rtl">    <code>map</code>  <code>pred</code>  <code>Box</code> โ <em></em>     ! </p><br><h3 id="obrabotka-detey-elementa" style=";text-align:right;direction:rtl">    </h3><br><p style=";text-align:right;direction:rtl">         .    <code>single_element</code> ,   ,     <code>&gt;</code> ,    <code>/&gt;</code> .            ,        ,     . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">open_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { left(element_start(), match_literal(<span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>)).map(|(name, attributes)| Element { name, attributes, children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }) }</code> </pre> <br><p style=";text-align:right;direction:rtl"> ,     ?     ,    ,      ,         <code>zero_or_more</code> ,     ?  ,      , โ      : ,   <em></em>  , <em></em>  . </p><br><p style=";text-align:right;direction:rtl">   ,   ,      :     ,  ,      .    ,  ,   ,     <em>   </em> .   , ,   ,    ,   ,        ,    . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">either</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, A&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser1.parse(input) { ok @ <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>(_) =&gt; ok, <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(_) =&gt; parser2.parse(input), } }</code> </pre> <br><p style=";text-align:right;direction:rtl">       <code>element</code> ,     ,    (     <code>open_element</code>   ,       <code>element</code> ). </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { either(single_element(), open_element()) }</code> </pre> <br><p style=";text-align:right;direction:rtl">       .         ,  ,    ,    .      , ? </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;(expected_name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; { right(match_literal(<span class="hljs-string"><span class="hljs-string">"&lt;/"</span></span>), left(identifier, match_literal(<span class="hljs-string"><span class="hljs-string">"&gt;"</span></span>))) .pred(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |name| name == &amp;expected_name) }</code> </pre> <br><p style=";text-align:right;direction:rtl">   <code>pred</code>   ,   ? </p><br><p style=";text-align:right;direction:rtl">           ,   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parent_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { pair( open_element(), left(zero_or_more(element()), close_element(โฆoops)), ) }</code> </pre> <br><p style=";text-align:right;direction:rtl">        <code>close_element</code> ?  ,      . </p><br><p style=";text-align:right;direction:rtl">   .       ,   <code>parent_element</code> ,     <code>open_element</code>   <code>element</code>   <code>parent_element</code> ,  ,       XML. </p><br><p style=";text-align:right;direction:rtl"> ,  ,     <code>and_then</code> ? ,  .    <code>and_then</code> :   -,   ,  ,       <em></em> ,    .     <code>pair</code> ,   ,   ,       ,     .  , <code>and_then</code>   <code>Result</code>  <code>Option</code> ,   ,      ,   <code>Result</code>  <code>Option</code>      <em></em> ,   ,     ( ,    )). </p><br><p style=";text-align:right;direction:rtl"> ,      . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">and_then</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, F, A, B, NextP&gt;(parser: P, f: F) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, B&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, NextP: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, B&gt;, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(A) -&gt; NextP, { <span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |input| <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> parser.parse(input) { <span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((next_input, result)) =&gt; f(result).parse(next_input), <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err) =&gt; <span class="hljs-literal"><span class="hljs-literal">Err</span></span>(err), } }</code> </pre> <br><p style=";text-align:right;direction:rtl">   ,    ,    <code>P</code> ,   ,     <code>A</code> .    <code>F</code> ,  <code>map</code>    <code>A</code>  <code>B</code> ,     ,  <code>and_then</code>    <code>A</code>  <em>  </em> <code>NextP</code> ,     <code>B</code> .    โ <code>B</code> ,    ,  ,     <code>NextP</code>   . </p><br><p style=";text-align:right;direction:rtl">    :        ,     ,  ,     ,      <code>f</code>   ( <code>A</code> ),  ,    <code>f(result)</code> ,       <code>B</code> .   <em></em>          .    ,        ,    ,       <code>B</code> </p><br><p style=";text-align:right;direction:rtl">  :        <code>P</code> ,    ,    <code>f</code>     <code>P</code> ,        <code>NextP</code> ,    ,    . </p><br><p style=";text-align:right;direction:rtl">        <code>Parser</code> ,    <code>map</code> ,    . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">and_then</span></span></span></span>&lt;F, NextParser, NewOutput&gt;(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, f: F) -&gt; BoxedParser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Self</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Sized</span></span> + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Output: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NextParser: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, NewOutput&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, F: <span class="hljs-built_in"><span class="hljs-built_in">Fn</span></span>(Output) -&gt; NextParser + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { BoxedParser::new(and_then(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, f)) }</code> </pre> <br><p style=";text-align:right;direction:rtl"> , ,    ? </p><br><p style=";text-align:right;direction:rtl">  ,   <em></em>  <code>pair</code>  : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pair</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P1, P2, R1, R2&gt;(parser1: P1, parser2: P2) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, (R1, R2)&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P1: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P2: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R2&gt; + <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, R1: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Clone</span></span>, R2: <span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, { parser1.and_then(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |result1| parser2.map(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |result2| (result1.clone(), result2))) }</code> </pre> <br><p style=";text-align:right;direction:rtl">    ,   : <code>parser2.map()</code>  <code>parser2</code>     ,    <code>Fn</code> ,   <code>FnOnce</code> ,     <code>parser2</code> ,     .  ,  Rust.     ,      ,        <code>pair</code> . </p><br><p style=";text-align:right;direction:rtl"> ,         Rust,            <code>close_element</code> ,   ,         . </p><br><p style=";text-align:right;direction:rtl">    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parent_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { pair( open_element(), left(zero_or_more(element()), close_element(โฆoops)), ) }</code> </pre> <br><p style=";text-align:right;direction:rtl"> ,   <code>and_then</code> ,            <code>close_element</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parent_element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { open_element().and_then(|el| { left(zero_or_more(element()), close_element(el.name.clone())).map(<span class="hljs-keyword"><span class="hljs-keyword">move</span></span> |children| { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> el = el.clone(); el.children = children; el }) }) }</code> </pre> <br><p style=";text-align:right;direction:rtl">     ,   <code>and_then</code>    <code>open_element()</code> ,    ,    <code>close_element</code> .  ,       <code>open_element</code>      <code>and_then</code> .  ,         <code>Element</code>  <code>open_element</code> , ,   ,      . </p><br><p style=";text-align:right;direction:rtl">  ,  <code>map</code>    ,    <code>Element</code> ( <code>el</code> )   .    <code>clone()</code> ,      <code>Fn</code>       .       ( <code>Vec&lt;Element&gt;</code> )       <code>Element</code> ,        . </p><br><p style=";text-align:right;direction:rtl"> ,     ,      <code>element</code>  ,    <code>open_element</code>  <code>parent_element</code> ,      ,     ,   ,   ! </p><br><h3 id="sobiraetes-li-vy-skazat-slovo-m-ili-dolzhen-ya" style=";text-align:right;direction:rtl">      ""   ? </h3><br><p style=";text-align:right;direction:rtl"> ,    ,   <code>map</code>  ยซยป   Haskell? </p><br><p style=";text-align:right;direction:rtl"> <code>and_then</code> โ    ,     Rust,      ,   <code>map</code> .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>flat_map</code></a>  <code>Iterator</code> ,     ,   . </p><br><p style=";text-align:right;direction:rtl">     โ "".     <code>Thing&lt;A&gt;</code> ,      <code>and_then</code> ,        <code>A</code>  <code>Thing&lt;B&gt;</code> ,        <code>Thing&lt;B&gt;</code> โ  . </p><br><p style=";text-align:right;direction:rtl">     , ,     <code>Option&lt;A&gt;</code> ,   ,    <code>Some(A)</code>  <code>None</code> ,     ,   <code>Some(A)</code> ,   <code>Some(B)</code> </p><br><p style=";text-align:right;direction:rtl">     . ,     <code>Future&lt;A&gt;</code>     ,  <code>and_then</code>      <code>Future&lt;B&gt;</code> ,      <code>Future&lt;B&gt;</code>    <code>Future&lt;A&gt;</code>  ,     <code>Future&lt;A&gt;</code> .        <code>Future&lt;A&gt;</code> ,   โ   <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1</a></sup> ,   <code>Future&lt;B&gt;</code> .  ,   <code>Future</code>     ,    <code>and_then</code>   <em>  </em> ,       <code>Future</code> ,  .     ,     <em></em> <code>Future</code> ,       . </p><br><p style=";text-align:right;direction:rtl">      ,   Rust       ,   ,     ,  ,  ,       ,    ,    .  . </p><br><h3 id="probely-redux" style=";text-align:right;direction:rtl"> , Redux </h3><br><p style=";text-align:right;direction:rtl">   . </p><br><p style=";text-align:right;direction:rtl">      ,    XML,      .       ,              (  ,        ,  <code>&lt; div / &gt;</code> ,    ). </p><br><p style=";text-align:right;direction:rtl">               . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">whitespace_wrap</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, P, A&gt;(parser: P) -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt; <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> P: Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, A&gt;, { right(space0(), left(parser, space0())) }</code> </pre> <br><p style=";text-align:right;direction:rtl">    <code>element</code>  ,          <code>element</code> ,  ,          ,   . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">element</span></span></span></span>&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>&gt;() -&gt; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Parser&lt;<span class="hljs-symbol"><span class="hljs-symbol">'a</span></span>, Element&gt; { whitespace_wrap(either(single_element(), parent_element())) }</code> </pre> <br><h3 id="my-na-finishnoy-pryamoy" style=";text-align:right;direction:rtl">    ! </h3><br><p style=";text-align:right;direction:rtl">  ,    !    ,  . </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">xml_parser</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> doc = <span class="hljs-string"><span class="hljs-string">r#" &lt;top label="Top"&gt; &lt;semi-bottom label="Bottom"/&gt; &lt;middle&gt; &lt;bottom label="Another bottom"/&gt; &lt;/middle&gt; &lt;/top&gt;"#</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> parsed_doc = Element { name: <span class="hljs-string"><span class="hljs-string">"top"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(<span class="hljs-string"><span class="hljs-string">"label"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"Top"</span></span>.to_string())], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[ Element { name: <span class="hljs-string"><span class="hljs-string">"semi-bottom"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(<span class="hljs-string"><span class="hljs-string">"label"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"Bottom"</span></span>.to_string())], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }, Element { name: <span class="hljs-string"><span class="hljs-string">"middle"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[Element { name: <span class="hljs-string"><span class="hljs-string">"bottom"</span></span>.to_string(), attributes: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[(<span class="hljs-string"><span class="hljs-string">"label"</span></span>.to_string(), <span class="hljs-string"><span class="hljs-string">"Another bottom"</span></span>.to_string())], children: <span class="hljs-built_in"><span class="hljs-built_in">vec!</span></span>[], }], }, ], }; <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Ok</span></span>((<span class="hljs-string"><span class="hljs-string">""</span></span>, parsed_doc)), element().parse(doc)); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ,    -   ,   ,      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="rust hljs"><span class="hljs-meta"><span class="hljs-meta">#[test]</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mismatched_closing_tag</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> doc = <span class="hljs-string"><span class="hljs-string">r#" &lt;top&gt; &lt;bottom/&gt; &lt;/middle&gt;"#</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(<span class="hljs-literal"><span class="hljs-literal">Err</span></span>(<span class="hljs-string"><span class="hljs-string">"&lt;/middle&gt;"</span></span>), element().parse(doc)); }</code> </pre> <br><p style=";text-align:right;direction:rtl">    ,        .     ,      <em></em>  ,       ,  , <em></em> .  ,  , ,  ,          .     ,       ,    , ,   ,    . </p><br><p style=";text-align:right;direction:rtl">     :     ,   !  ,      ,  ,               <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">2</a></sup> . </p><br><p style=";text-align:right;direction:rtl">  ,   ,       .      ! </p><br><h3 id="dopolnitelnye-resursy" style=";text-align:right;direction:rtl">   </h3><br><p style=";text-align:right;direction:rtl">  ,    ,       Rust ,   ,        - ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  </a> ,       ,       . </p><br><p style=";text-align:right;direction:rtl">        ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>pom</code></a> ,           ,    . </p><br><p style=";text-align:right;direction:rtl">       Rust  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>nom</code></a>   ,    <code>pom</code>    (    ,  ),          ,     . </p><br><p style=";text-align:right;direction:rtl">        Rust  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>combine</code></a> ,    . </p><br><p style=";text-align:right;direction:rtl">       Haskell  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Parsec</a> . </p><br><p style=";text-align:right;direction:rtl"> ,            <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><em>ยซ  Haskellยป</em></a> ,          ,      Haskell. </p><br><h2 id="licenziya" style=";text-align:right;direction:rtl">  ุฑุฎุตุฉ </h2><br><p style=";text-align:right;direction:rtl">      Bodil Stokke        Creative Commons Attribution-NonCommercial-ShareAlike 4.0.     ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://creativecommons.org/licenses/by-nc-sa/4.0/</a> . </p><br><h2 id="snoski" style=";text-align:right;direction:rtl">  </h2><br><p style=";text-align:right;direction:rtl"> 1:       . </p><br><p style=";text-align:right;direction:rtl"> 2: ,      . </p><br><h2 id="ot-perevodchikov" style=";text-align:right;direction:rtl">   </h2><br><p style=";text-align:right;direction:rtl">      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">andreevlex</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">funkill</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar469213/">https://habr.com/ru/post/ar469213/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar469195/index.html">DevOpsProdigy KubeGraf v1.1.0</a></li>
<li><a href="../ar469203/index.html">"ูุงู" ููู ููุฅูุทุงุฑ ู ุงูุงุฎุชุฑุงูุงุช: ููุงุฐุง ูู ููู ูุชุทููุฑ ูุฌุชูุน ุนูู ุงูุจูุงูุงุช</a></li>
<li><a href="../ar469205/index.html">ูุชุญู DataArt. ูู ุจูู "Electronics MS 0511"</a></li>
<li><a href="../ar469209/index.html">ููู ุฑุฎูุตุฉ ูุตุงุจูุญ LED ููููุจุณ ุชุฎุชูู ุนู ุชูู ุจุงูุธุฉ ุงูุซูู</a></li>
<li><a href="../ar469211/index.html">ููู ุชููู ICD ุจุชุทููุฑ ูุธุงู ุจูุฆู ูุนููุงุก ุงูุจููู</a></li>
<li><a href="../ar469215/index.html">ุงูุนูู ูุน ุงูุชูุงุฑูุฎ ูู ูุบุฉ R (ุงูููุฒุงุช ุงูุฃุณุงุณูุฉ ุ ููุฐูู ุญุฒู lubridate ู timeperiodsR)</a></li>
<li><a href="../ar469217/index.html">IMHO Saint TeamLead Conf 2019</a></li>
<li><a href="../ar469219/index.html">ุฃูุถู 20 ููุฒุฉ ููุชููู ูู IntelliJ IDEA. ุงูุฌุฒุก 2</a></li>
<li><a href="../ar469221/index.html">Cascadeur: ุชููุน ุธููุฑ ุดุฎุตูุฉ ูู ุณุช ููุงุท</a></li>
<li><a href="../ar469223/index.html">ุงูุฅุถุงุกุฉ ุงูุฎูููุฉ LED ุจูุซุงุจุฉ ูุณุชุชุฑ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>