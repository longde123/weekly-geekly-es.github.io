<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßòüèΩ üêù ü•Å Comment cr√©er un th√®me sombre sans casser les choses: apprendre avec l'√©quipe Yandex Mail üë©üèæ‚Äçüíº üöá üëçüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je m'appelle Vladimir et je d√©veloppe un front-end mobile pour Yandex Mail. Nos applications ont un th√®me sombre depuis un moment, mais il √©tait incom...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment cr√©er un th√®me sombre sans casser les choses: apprendre avec l'√©quipe Yandex Mail</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/450032/"><p><img src="https://habrastorage.org/webt/ji/4q/pr/ji4qprfkpuotssmzabus4cjflrq.png"></p><br><p>  Je m'appelle Vladimir et je d√©veloppe un front-end mobile pour Yandex Mail.  Nos applications ont un th√®me sombre depuis un moment, mais il √©tait incomplet: seule l'interface et les e-mails en clair √©taient sombres.  Les messages avec un formatage personnalis√© sont rest√©s l√©gers et se sont d√©tach√©s de l'interface sombre, blessant les yeux de nos utilisateurs la nuit. </p><br><p>  Aujourd'hui, je vais vous expliquer comment nous avons r√©solu ce probl√®me.  Vous d√©couvrirez deux techniques simples qui n'ont pas fonctionn√© pour nous et la m√©thode qui a finalement fait l'affaire - la recoloration adaptative des pages.  Je partagerai √©galement quelques id√©es sur l'adaptation d'images √† un th√®me sombre.  Pour √™tre honn√™te, assombrir les pages avec du CSS personnalis√© est une t√¢che assez particuli√®re, mais je pense que certains d'entre vous peuvent trouver notre exp√©rience utile. </p><a name="habracut"></a><br><h2 id="simple-methods">  Des m√©thodes simples </h2><br><p>  Avant de choisir notre technique magique de cintrage des couleurs, nous avons essay√© deux options vraiment basiques: appliquer un style sombre suppl√©mentaire ou un filtre CSS aux √©l√©ments.  Aucune des deux options ne fonctionnait pour nous, mais elles pourraient √™tre plus adapt√©es dans d'autres cas (simple, c'est cool, non?). </p><br><h3 id="overriding-styles">  Remplacement des styles </h3><br><p>  Il s'agit d'une option simple, qui √©tend logiquement le propre th√®me CSS sombre de l'application.  Vous venez de mettre des styles sombres suppl√©mentaires sur un conteneur de courrier √©lectronique (ou, en g√©n√©ral, sur un conteneur pour que le contenu g√©n√©r√© par l'utilisateur s'assombrisse): </p><br><pre><code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.message--dark</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: black; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: white; }</code> </pre> <br><p>  Cependant, tous les styles sur les √©l√©ments √† l'int√©rieur de l'e-mail remplaceront notre style racine.  Et non <code>!important</code> n'aide pas ici.  L'id√©e peut √™tre pouss√©e plus loin en emp√™chant l'h√©ritage: </p><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.message--dark</span></span> * { <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: black <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: white <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">border-color</span></span>: <span class="hljs-number"><span class="hljs-number">#333</span></span> <span class="hljs-meta"><span class="hljs-meta">!important</span></span>; }</code> </pre> <br><p>  Dans ce cas, vous ne pouvez pas vous en passer <code>!important</code> , car le s√©lecteur lui-m√™me n'est pas tr√®s sp√©cifique.  Cela arrive √©galement √† remplacer la plupart des styles en ligne (ceux avec en ligne <code>!important</code> sera toujours trouv√©, et vous ne pouvez pas faire grand-chose √† ce sujet). </p><br><p>  Notre style peint avec passion tout de la m√™me couleur, introduisant ainsi un autre probl√®me.  Il y a une chance que le designer veuille dire quelque chose avec la fa√ßon dont il a arrang√© les couleurs (vous savez, les priorit√©s, les appariements, tous ces trucs de designer), et nous avons juste pris leur id√©e et l'avons jet√©e par la fen√™tre.  Ce n'est pas une bonne chose √† faire. </p><br><p><img src="https://habrastorage.org/webt/cu/-1/ka/cu-1kav8ydvyjxlobshlklgio9u.png"></p><br><p>  Si vous ne respectez pas les concepteurs autant que moi et d√©cidez d'utiliser cette m√©thode, n'oubliez pas de g√©rer les choses pas si √©videntes: </p><br><ul><li>  <code>box-shadow</code> .  Cependant, vous ne pourrez pas remplacer uniquement la couleur.  Soit vous d√©barrasser compl√®tement des ombres ou faire la paix avec les plus l√©g√®res. </li><li>  Les couleurs des √©l√©ments s√©mantiques, tels que les liens ou les entr√©es. </li><li>  SVG en ligne.  Utilisez le <code>fill</code> au lieu de l' <code>background</code> - <code>background</code> et le <code>stroke</code> au lieu de la <code>color</code> , mais vous ne pouvez jamais en √™tre s√ªr, ce pourrait √™tre l'inverse. </li></ul><br><p>  D'un point de vue technique, c'est une m√©thode solide: il faut trois lignes de code (OK, trente pour une version pr√™te √† la production avec tous les cas de bord pris en charge), il est compatible avec tous les navigateurs du monde, il fonctionne sur des pages dynamiques pr√™tes √† l'emploi, et la fa√ßon dont CSS est attach√© au document est compl√®tement hors de propos.  Il y a aussi un joli bonus: vous pouvez facilement modifier les couleurs dans le style pour correspondre aux couleurs principales de l'application (par exemple, faire l'arri√®re-plan <code>#bbbbb8</code> au lieu du noir). </p><br><p>  Au fait, c'est ainsi que nous avions l'habitude d'assombrir les e-mails auparavant.  Si un e-mail avait ses propres styles, nous abandonnerions et laisserions la lumi√®re au cas o√π. </p><br><h3 id="using-a-css-filter">  Utiliser un filtre CSS </h3><br><p>  Il s'agit d'une m√©thode intelligente et √©l√©gante.  Vous pouvez assombrir une page √† l'aide d'un filtre CSS: </p><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.message--dark</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">filter</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">invert</span></span>(100) <span class="hljs-built_in"><span class="hljs-built_in">hue-rotate</span></span>(180deg); <span class="hljs-comment"><span class="hljs-comment">/* hue-rotate    */</span></span> }</code> </pre> <br><p>  Les images deviennent effrayantes, mais nous pouvons facilement r√©soudre ce probl√®me: </p><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.message-dark</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">img</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">filter</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">invert</span></span>(100) <span class="hljs-built_in"><span class="hljs-built_in">hue-rotate</span></span>(180deg); }</code> </pre> <br><p><img src="https://habrastorage.org/webt/dr/3a/ix/dr3aix8opihd2nlq6oqzjfbdtvs.png"></p><br><p>  Cependant, cela ne r√©sout pas le probl√®me des images de contenu attach√©es via la propri√©t√© background (bien s√ªr, c'est pratique pour ajuster le rapport d'aspect, mais qu'en est-il de la s√©mantique?).  OK, supposons que nous puissions trouver tous ces √©l√©ments, les marquer explicitement et changer leurs couleurs √©galement. </p><br><p>  La bonne chose √† propos de cette m√©thode est qu'elle pr√©serve la luminosit√© et le contraste d'origine.  D'un autre c√¥t√©, c'est plein de probl√®mes qui l'emportent sur les avantages: </p><br><p><img src="https://habrastorage.org/webt/ed/qe/h1/edqeh1dpkqv-w2gydobzojuaia0.png" width="300"></p><br><ol><li>  Les pages sombres deviennent claires. </li><li>  Vous ne pouvez pas contr√¥ler les couleurs finales.  Quel filtre appliquez-vous √† l'arri√®re-plan pour qu'il corresponde √† votre marque <code>#bbbbb8</code> ?  C'est un vrai gratte-t√™te. </li><li>  La double inversion rend les images fan√©es. </li><li>  Les performances sont lentes, en particulier sur les appareils mobiles - il est logique, au lieu de simplement rendre la page, le navigateur ex√©cute des transformations de Fourier √† chaque tirage. </li></ol><br><p>  Cette m√©thode fonctionnerait pour les e-mails avec du texte de couleur neutre, mais je n'ai jamais rencontr√© personne avec une bo√Æte de r√©ception remplie d'un tel contenu.  D'un autre c√¥t√©, les filtres sont le seul moyen d'assombrir les √©l√©ments sans acc√©der √† leur contenu - cadres, composants Web ou images. </p><br><h2 id="adaptive-dark-theme">  Th√®me sombre adaptatif </h2><br><p>  Et maintenant, il est temps pour la magie!  Sur la base des inconv√©nients des deux premi√®res approches, nous avons fait une liste de contr√¥le de ce que nous devons prendre en charge: </p><br><ol><li>  Rendre l'arri√®re-plan sombre, le texte clair et les bordures quelque part entre les deux. </li><li>  D√©tectez les pages sombres et conservez leurs couleurs. </li><li>  Conservez l'√©quilibre original de luminosit√© et de contraste. </li><li>  Contr√¥lez les couleurs r√©sultantes. </li><li>  Laissez les teintes inchang√©es. </li></ol><br><p>  Vous devez donc modifier les couleurs des styles pour assombrir l'arri√®re-plan.  Pourquoi ne pas faire √ßa litt√©ralement?  Prenez tous les styles, extrayez les r√®gles li√©es aux <code>color</code> ( <code>color</code> , <code>background</code> - <code>background</code> , <code>border</code> , <code>box-shadow</code> et leurs sous-propri√©t√©s) et remplacez-les par leurs versions "assombries": assombrissez l'arri√®re-plan et les bordures (mais pas autant que le arri√®re-plan), √©claircir le texte, etc. </p><br><p>  Cette m√©thode a un avantage incroyable qui r√©chauffera le c≈ìur de tout d√©veloppeur.  Vous pouvez configurer des r√®gles de conversion des couleurs pour chaque propri√©t√© - oui, en utilisant du code!  Avec un peu d'imagination, vous pouvez adapter les couleurs √† n'importe quel th√®me externe, effectuer la correction des couleurs de votre choix (par exemple, faire un th√®me clair au lieu d'un sombre, ou un th√®me de n'importe quelle couleur que vous aimez), et m√™me ajouter un peu de contextualit√© - par exemple, traiter diff√©remment les fronti√®res larges et √©troites. </p><br><p>  Les inconv√©nients sont ce que vous attendez d'une approche ¬´tout en un¬ª.  Nous ex√©cutons des scripts, encapsulons les styles et g√¢chons CSS avec regex.  Ce dernier, cependant, n'est pas aussi humiliant qu'avec HTML, car la grammaire CSS est r√©guli√®re (au moins au niveau avec lequel nous travaillons). </p><br><p>  Voici notre plan sombre: </p><br><ol><li>  Normalisez les propri√©t√©s de style h√©rit√©es ( <code>bgcolor</code> et autres) et d√©placez-les dans <code>style="..."</code> . </li><li>  Trouvez tous les styles en ligne. </li><li>  Trouvez toutes les r√®gles li√©es aux couleurs dans chaque style ( <code>background-color</code> , <code>color</code> , <code>box-shadow</code> et autres). </li><li>  Prenez les couleurs des propri√©t√©s li√©es aux couleurs et faites-les correspondre avec le bon convertisseur (assombrissez l'arri√®re-plan, √©claircissez le texte). </li><li>  Appelez le convertisseur. </li><li>  Remettez les propri√©t√©s converties dans le CSS. </li></ol><br><p>  Le code wrapper - normalisation, localisation des styles, analyse - est assez trivial.  Voyons comment fonctionne exactement notre convertisseur magique. </p><br><h3 id="hsl-conversions">  Conversions HSL </h3><br><p>  Assombrir une couleur n'est pas aussi simple qu'il y para√Æt, surtout si vous souhaitez conserver la teinte (par exemple, transformer le bleu en bleu fonc√©, pas orange).  Vous pouvez le faire en RVB ordinaire, mais c'est probl√©matique.  Si vous √™tes dans la conception algorithmique, vous savez qu'en RVB, m√™me les d√©grad√©s sont cass√©s.  Pendant ce temps, travailler avec des couleurs en HSL est un vrai r√©gal: au lieu du rouge, du vert et du bleu, dont vous ne savez pas quoi faire, vous avez les trois canaux suivants: </p><br><ul><li>  Hue - la chose que nous cherchons √† pr√©server. </li><li>  La saturation, ce qui n'est pas tr√®s important pour nous en ce moment. </li><li>  L√©g√®ret√©, que nous allons changer. </li></ul><br><p>  Vous pouvez le voir comme un cylindre.  Nous devons renverser ce cylindre.  La correction des couleurs fait quelque chose comme ceci: <code>(h, s, l) =&gt; [h, s, 1-l]</code> . </p><br><h3 id="colors-that-are-already-ok">  Couleurs d√©j√† OK </h3><br><p>  Parfois, nous avons de la chance et la conception personnalis√©e de l'e-mail (ou d'une partie de celui-ci) est d√©j√† sombre.  Cela signifie que nous n'avons rien √† changer - le concepteur a probablement fait un meilleur travail de s√©lection des couleurs que notre algorithme n'aurait jamais pu r√™ver.  Dans HSL, il vous suffit de consid√©rer la L - L√©g√®ret√©.  Si sa valeur est sup√©rieure ou inf√©rieure (pour le texte et l'arri√®re-plan, respectivement) au seuil (que vous pouvez d√©finir), laissez-le tranquille. </p><br><h3 id="dynamic-circus">  Cirque dynamique </h3><br><p>  M√™me si nous n'avions pas besoin de tout cela (merci beaucoup, d√©sinfectant, vous avez sauv√© ma journ√©e ici), je vais √©num√©rer les fonctionnalit√©s suppl√©mentaires dont un th√®me adaptatif a besoin pour assombrir des pages enti√®res et pas seulement des e-mails statiques maladroits des ann√©es 90.  Juste avertissement: cette t√¢che n'est pas pour tout le monde. </p><br><h4 id="dynamic-inline-styles">  Styles en ligne dynamiques </h4><br><p>  Changer les styles en ligne est le cas le plus simple qui g√¢che nos pages sombres.  C'est courant, mais il existe une solution simple: ajoutez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>MutationObserver</code></a> et corrigez les styles en ligne d√®s que les modifications se produisent. </p><br><h4 id="external-styles">  Styles externes </h4><br><p>  Travailler avec des styles r√©f√©renc√©s par un √©l√©ment <code>&lt;link&gt;</code> √† l'int√©rieur de la page peut √™tre angoissant en raison des instructions asynchronicity et <code>@import</code> .  Et CORS n'am√©liore pas les choses.  Il semble que ce probl√®me puisse √™tre r√©solu assez √©l√©gamment avec un travailleur Web (en procurant tous les <code>*.css</code> ). </p><br><h4 id="dynamic-styles">  Styles dynamiques </h4><br><p>  Pour aggraver les choses, les scripts peuvent ajouter, supprimer ou r√©organiser les √©l√©ments <code>&lt;style&gt;</code> et <code>&lt;link&gt;</code> comme ils le souhaitent, et m√™me changer les r√®gles dans <code>&lt;style&gt;</code> .  Ici, vous devrez √©galement utiliser <code>MutationObserver</code> , mais chaque modification entra√Ænera davantage de traitement. </p><br><h4 id="css-variables">  Variables CSS </h4><br><p>  Les choses deviennent vraiment folles lorsque des variables CSS entrent en jeu.  Vous ne pouvez pas assombrir les variables: m√™me si vous supposez qu'une variable contient une couleur bas√©e sur son format (bien que je d√©conseille cela), vous ne savez toujours pas quel est son r√¥le - arri√®re-plan, texte, bordure ou tout √† la fois?  De plus, les valeurs des variables CSS sont h√©rit√©es, vous devez donc suivre non seulement les styles, mais les √©l√©ments auxquels ils sont appliqu√©s, et cela d√©g√©n√®re rapidement hors de contr√¥le. </p><br><p>  Une fois que les variables CSS arrivent dans le courant dominant, nous avons des probl√®mes.  En revanche, <code>color()</code> sera support√© d'ici l√†, nous permettant de remplacer toutes nos conversions JS par une <code>color(var(--bg) lightness(-50%))</code> . </p><br><h3 id="summary">  R√©sum√© </h3><br><p><img src="https://habrastorage.org/webt/46/rl/mz/46rlmzxvgus52n7_77t3ydz2ms0.png"></p><br><p>  Dans notre cas, lorsque le d√©sinfectant ne laisse que des styles en ligne, l'assombrissement adaptatif au niveau CSS fonctionne comme un charme: il donne un assombrissement de meilleure qualit√©, ne perturbe pas la structure d'origine et est relativement simple et rapide.  L'extension pour s'attaquer aux pages dynamiques ne vaut probablement pas la peine, cependant.  Heureusement, si vous travaillez avec du contenu g√©n√©r√© par les utilisateurs et que vous ne d√©veloppez pas de navigateur, votre d√©sinfectant fonctionne probablement de la m√™me mani√®re. </p><br><p>  En pratique, le mode adaptatif doit √™tre associ√© √† des remplacements de style, car les √©l√©ments standard comme <code>&lt;input&gt;</code> ou <code>&lt;a&gt;</code> utilisent souvent les styles d'√©clairage par d√©faut. </p><br><h2 id="how-to-darken-images">  Comment assombrir les images </h2><br><p>  L'assombrissement de l'image est un probl√®me distinct qui me d√©range personnellement.  C'est difficile, et cela me donne une excuse pour enfin utiliser l'expression "analyse spectrale".  Il y a plusieurs probl√®mes typiques avec des images dans un th√®me sombre. </p><br><p>  Certaines images sont tout simplement trop lumineuses.  Cela nous donne le m√™me probl√®me que les courriels brillants avec lesquels nous avons commenc√© notre qu√™te.  Ce probl√®me se pose souvent sur les photos ordinaires, mais ce n'est pas exclusif √† celles-ci.  √âtant donn√© que l'√©criture de CSS de newsletter n'est pas tr√®s amusante, certains gars aiment sauter les coins en ins√©rant une mise en page complexe en tant qu'image, ce qui emp√™che l'assombrissement.  Quand je vois cela, mon perfectionniste int√©rieur g√©mit de frustration.  Ces images doivent √™tre gris√©es, mais pas invers√©es, sauf si vous voulez effrayer vos utilisateurs. </p><br><p><img src="https://habrastorage.org/webt/6-/zz/nx/6-zznxvkap9ywdvgjpglm5v6wqc.png"></p><br><p>  Ensuite, il y a des images sombres avec une r√©elle transparence.  C'est un probl√®me typique avec les logos - ils sont con√ßus avec un fond clair √† l'esprit, et lorsque nous le rempla√ßons par un fond sombre, le logo dispara√Æt.  Ces images doivent √™tre invers√©es. </p><br><p><img src="https://habrastorage.org/webt/xo/at/cc/xoatcc7dg3nhb_ufdoyye4hxsoo.png"></p><br><p>  Quelque part entre les deux se trouvent des images qui utilisent un fond blanc cens√© repr√©senter la transparence.  Dans le th√®me sombre, ils se retrouvent simplement dans un triangle blanc √©trange.  Dans un monde parfait, nous pourrions changer le fond blanc en fond transparent, mais si vous avez d√©j√† utilis√© un outil de baguette magique, vous savez combien il est difficile de le faire automatiquement. </p><br><p><img src="https://habrastorage.org/webt/fi/o4/v9/fio4v9n1lcpve_wa1jhj5usj4yo.png"></p><br><p>  Il est int√©ressant de noter que certaines images n'ont aucune signification.  Ce sont g√©n√©ralement des pixels de suivi ou des ¬´supports de format¬ª dans des mises en page particuli√®rement bizzare.  Vous pouvez les rendre invisibles en toute s√©curit√© (disons, avec l' <code>opacity: 0</code> ). </p><br><p><img src="https://habrastorage.org/webt/5y/ba/tu/5ybatucrfhczsgc_aqykbgtnop0.png"></p><br><h3 id="analyzing-whats-inside">  Analyser ce qu'il y a √† l'int√©rieur </h3><br><p>  Pour comprendre comment ajuster une image pour un th√®me sombre, nous devons regarder √† l'int√©rieur et analyser son contenu, de pr√©f√©rence avec une m√©thode simple et rapide.  Voici la premi√®re version d'un algorithme qui r√©sout ce probl√®me. </p><br><p>  Comptez d'abord les pixels sombres, clairs et transparents de l'image.  Comme optimisation √©vidente, seul un petit sous-ensemble de pixels peut √™tre consid√©r√©.  Ensuite, d√©terminez la luminosit√© globale de l'image (claire, sombre ou moyenne) et s'il y a de la transparence.  Inversez les images sombres avec transparence, les images lumineuses opaques sombres et laissez le reste inchang√©. </p><br><p>  J'√©tais vraiment contente de cette d√©couverte jusqu'√† ce que je tombe sur un bulletin de charit√© avec une photo d'une le√ßon dans une √©cole africaine.  Le designer l'a centr√©e en ajoutant des pixels transparents sur les c√¥t√©s.  Nous ne voulions pas nous impliquer dans une histoire sur la reconnaissance d'images offensive, nous avons donc d√©cid√© de laisser la manipulation d'images hors de notre premi√®re it√©ration. </p><br><p>  √Ä l'avenir, nous pouvons √©viter de tels probl√®mes en employant cette heuristique que j'appelle "l'analyse spectrale".  C'est-√†-dire, compter le nombre de teintes diff√©rentes dans l'image et inverser uniquement s'il n'y en a pas trop.  Vous pouvez utiliser la m√™me m√©thode pour reconna√Ætre les images fragmentaires lumineuses et les inverser √©galement. </p><br><p><img src="https://habrastorage.org/webt/sj/c1/di/sjc1diiz68fpljjzii64f9j7nrq.png"></p><br><h2 id="conclusion">  Conclusion </h2><br><p>  Pour concevoir un th√®me sombre √† part enti√®re, nous avons d√ª trouver un moyen d'assombrir les e-mails contenant un formatage personnalis√© - et nous l'avons fait.  Tout d'abord, nous avons essay√© deux solutions CSS simples et pures - remplacer les styles et utiliser un filtre CSS.  Aucun d'eux n'a atteint le but: le premier √©tait trop dur avec le design original, et l'autre ne fonctionnait tout simplement pas bien.  Finalement, nous avons d√©cid√© d'utiliser l'assombrissement adaptatif.  Nous d√©montons les styles, rempla√ßons les couleurs et les assemblons.  Nous travaillons actuellement sur l'application du th√®me sombre aux images.  Pour ce faire, nous devons analyser leur contenu et ensuite ajuster seulement certains d'entre eux. </p><br><p>  Si vous devez changer la couleur des extraits HTML personnalis√©s pour l'adapter √† un th√®me sombre, gardez √† l'esprit trois m√©thodes: </p><br><ul><li>  Remplacement des styles.  C'est une m√©thode simple et sans probl√®me, et vous en aurez de toute fa√ßon besoin pour votre application.  La mauvaise nouvelle est qu'elle d√©truit toutes les couleurs d'origine. </li><li>  Filtre CSS.  C'est amusant mais laisse beaucoup √† d√©sirer.  R√©servez-le aux √©l√©ments qui ne sont pas faciles d'acc√®s, comme les cadres ou les composants Web. </li><li>  R√©√©criture de style.  Cette m√©thode fait un excellent travail pour assombrir, mais elle est plus complexe. </li></ul><br><p>  M√™me si vous n'essayez jamais de tout cela, j'esp√®re que vous avez pass√© un bon moment √† lire cet article! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr450032/">https://habr.com/ru/post/fr450032/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr450020/index.html">La Silicon Valley est venue aux √©coliers du Kansas. Cela a conduit √† des protestations.</a></li>
<li><a href="../fr450024/index.html">√Ä propos des impl√©mentations open source de la fonction de hachage GOST R 34.11-2012 et leur impact sur la signature √©lectronique de GOST R 34.10-2012</a></li>
<li><a href="../fr450026/index.html">Chiffrement d'acc√©l√©ration: nous √©tudions l'acc√©l√©rom√®tre d'un appareil Android √† l'aide de l'exemple de la t√¢che NeoQUEST-2019</a></li>
<li><a href="../fr450028/index.html">Construire une architecture orient√©e services sur Rails + Kafka</a></li>
<li><a href="../fr450030/index.html">Je ne peux pas utiliser Rift S et vous ne r√©ussirez pas non plus</a></li>
<li><a href="../fr450034/index.html">Pourquoi vous devriez participer aux hackathons</a></li>
<li><a href="../fr450036/index.html">Summ3r 0f h4ck: stage Digital Security 2019</a></li>
<li><a href="../fr450040/index.html">Une nouvelle soci√©t√© prendra en charge OpenJDK 8 et 11 - nous comprenons la situation</a></li>
<li><a href="../fr450042/index.html">Disposition du clavier √©tendu russe</a></li>
<li><a href="../fr450044/index.html">Recherche d'un probl√®me au mauvais endroit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>