<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📎 🦗 👨🏼‍🎓 Préparation à la certification professionnelle du printemps. Sécurité printanière 🚘 👩‍🏫 👩🏿‍🤝‍👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article est une traduction de l'article de préparation à la certification Spring Professional . 


 Il couvrira le sujet de Spring Security et les...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Préparation à la certification professionnelle du printemps. Sécurité printanière</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/470786/"><p>  Cet article est une traduction de l'article de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">préparation à la certification Spring Professional</a> . </p><br><p>  Il couvrira le sujet de Spring Security et les principales questions à ce sujet. </p><br><p>  Il peut également être utilisé pour préparer un entretien. </p><br><p>  ↓ D'autres articles sont disponibles sur les liens de la table des matières ↓ </p><br><div class="spoiler">  <b class="spoiler_title">Table des matières</b> <div class="spoiler_text"><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Injection de dépendance, conteneur, IoC, haricots</a> </li><li>  AOP (programmation orientée aspect) </li><li>  JDBC, transactions, JPA, données de printemps </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Botte de printemps</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Spring mvc</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sécurité printanière</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">REPOS</a> </li><li>  Test </li></ol></div></div><br><p><img src="https://habrastorage.org/webt/q7/qy/qq/q7qyqqemf0oh1lsftat7d44gvo0.png"></p><br><hr><a name="habracut"></a><br><p>  Questions elles-mêmes: </p><br><div class="spoiler">  <b class="spoiler_title">Qu'est-ce que l'authentification et l'autorisation?</b> <div class="spoiler_text"><p>  L'authentification est le processus de vérification de l'utilisateur d'un système informatique. <br>  Voici comment cela se passe au printemps: </p><br><ol><li> Le mot de passe et le nom d'utilisateur résultants sont convertis en une instance de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UsernamePasswordAuthenticationToken</a> .  Il implémente l'interface d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">authentification</a> . </li><li> Le jeton est transmis à l'objet <code>AuthenticationManager</code> pour vérification </li><li>  En cas de succès, AM renvoie un objet d' <code>Authentication</code> rempli </li><li>  Le contexte de sécurité est défini en appelant <code>SecurityContextHolder.getContext().setAuthentication(...)</code> </li></ol><br><p>  L'autorisation est le processus de vérification que l'utilisateur a le rôle requis pour entreprendre une action.  Lors de l'autorisation, il est vérifié si vous disposez des droits appropriés pour accéder à la ressource. </p><br><p>  Processus: </p><br><ol><li>  Par le principal (principal) de l'utilisateur, son rôle est affiché </li><li>  Rôle utilisateur comparé au rôle de ressource </li></ol><br><p>  D'abord, l'authentification a lieu, puis l'authentification. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Comment fonctionne la sécurité en interne?</b> <div class="spoiler_text"><ul><li><p>  Utilisation de proxys Spring AOP héritant de la classe AbstractSecurityInterceptor. </p><br><p>  Il est utilisé pour les méthodes qui appellent l'autorisation. </p><br></li><li><p>  L'infrastructure Web de sécurité est basée sur des filtres de servlet. </p><br></li></ul><br><p>  La première étape consiste à configurer le filtre <code>DelegatingFilterProxy</code> .  Il délègue la demande à <code>FilterChainProxy</code> . </p><br><p>  <code>FilterChainProxy</code> est un bean qui accepte un ou plusieurs <code>SecurityFilterChain</code> dans le constructeur. </p><br><p>  <code>SeccurityFilterChain</code> compare l'URL dans la demande avec une liste de filtres. </p><br><p><img src="https://habrastorage.org/webt/kd/dq/ue/kddquemwaqzt7fflstsye9-3lwg.png"></p></div></div><br><div class="spoiler">  <b class="spoiler_title">Fonctionnalités clés impliquées dans Spring Security</b> <div class="spoiler_text"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>SecurityContextHolder</code></a> - contient et fournit l'accès au SecurityContext dans l'application. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>SecurityContext</code></a> - l'implémentation par défaut de Spring Security contenant l'objet Authentication. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>Authentication</code></a> - fournit un jeton pour une demande d'authentification ou pour un principal qui s'est authentifié.  Il contient également une liste des pouvoirs auxquels le mandant a accès. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>GrantedAuthority</code></a> - Contient l'autorité accordée au principal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>GrantedAuthority</code></a> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>UserDetails</code></a> - contient des informations sur l'utilisateur: mot de passe, connexion, autorisations.  Ces informations sont utilisées pour créer un objet d'authentification après une authentification réussie. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>UserDetailsService</code></a> - ce service récupère les informations sur l'utilisateur dans le référentiel (mémoire programme, base de données, etc.) et les place dans UserDetails. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Qu'est-ce qu'un filtre proxy délégué?</b> <div class="spoiler_text"><p>  La classe <code>DelegatingFilterProxy</code> est une classe qui implémente l'interface <code>javax.Servlet.Filter</code> . </p><br><p>  Il s'agit d'un filtre spécial qui délègue le travail à d'autres beans, qui sont également des filtres. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Qu'est-ce que la chaîne de filtres de sécurité?</b> <div class="spoiler_text"><p>  La chaîne de filtres implémente l'interface <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>SecurityFilterChain</code></a> .  L'implémentation fournie par Spring Security est DefaultSecurityFilterChain. </p><br><p>  Le constructeur DSFC accepte plusieurs paramètres.  Le premier paramètre est l'appariement des requêtes.  Les paramètres restants sont des filtres qui implémentent l'interface servlet.Filter.  Voici tous les filtres acceptés par DSFC: </p><br><ul><li> <code>ChannelProcessingFilter</code> </li> <li> <code>SecurityContextPersistenceFilter</code> </li> <li> <code>ConcurrentSessionFilter</code> </li> <li>  Tout auth.  filtre: <code>UserNamePasswordAuthenticationFilter</code> / <code>CasAythenticationFilter</code> / <code>BasicAuthenticationFilter</code> </li><li> <code>SecurityContextHolderAwareRequestFilter</code> </li> <li> <code>JaasApiIntegrationFilter</code> </li> <li> <code>RemeberMeAuthenticationFilter</code> </li> <li> <code>AnonymusAuthenticationFilter</code> </li> <li> <code>ExceptionTranslationFilter</code> </li> <li> <code>FilterSecurityInterceptor</code> </li> </ul></div></div><br><div class="spoiler">  <b class="spoiler_title">Qu'est-ce qu'un contexte de sécurité?</b> <div class="spoiler_text"><p>  L'objet principal est un <code>SecurityContextHolder</code> .  Il s'agit de l'emplacement où les détails sur le contexte de sécurité actuel sont stockés, par exemple, les détails du principal qui utilise actuellement l'application.  Par défaut, <code>ThreadLocal</code> utilisé pour le stockage. </p><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// SecurityContext SecurityHolderContext.getContext()</span></span></code> </pre> <br><p>  L'objet renvoyé par la méthode <code>getContext()</code> est <code>SecurityContext</code> .  Il vous permet de recevoir et de configurer un objet d' <code>Authentication</code> . </p><br><p>  <code>Authentication</code> représente les propriétés suivantes: </p><br><ul><li>  La collecte des pouvoirs accordés au mandant </li><li>  Données d'identification de l'utilisateur (login, mot de passe) </li><li>  Détails - ajouter.  si nécessaire.  Peut être nul </li><li>  Directeur </li><li>  Indicateur d'authentification - variable booléenne qui indique si le principal a réussi le test </li></ul></div></div><br><div class="spoiler">  <b class="spoiler_title">Comment définir une interception de clics utilisateur sur des URL spécifiques?</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configure</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpSecurity http)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ http.authorizeRequests() <span class="hljs-comment"><span class="hljs-comment">//    /resources .antMatchers("/resources/**").permitAll() //      2  .antMatchers("/").hasAnyRole("ANONYMOUS", "USER") .antMatchers("/login)*").hasAnyRole("ANONYMOUS", "USER") .antMatchers("/logoutr").hasAnyRole("ANONYMOUS", "USER") //      ADMIN .antMatchers("iadmin/*").hasRole("ADMIN") .antMatchers("/events/").hasRole("ADMIN") }</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Que signifie * dans les méthodes antMatchers et mvcMatchers ()?</b> <div class="spoiler_text"><p>  Cette expression signifie «tout». </p><br><p>  Il existe 2 types: </p><br><ul><li><p>  <code>*</code> - intercepte uniquement au niveau auquel il est utilisé. </p><br><p>  Par exemple, le modèle «/ commandes / *» vérifiera les droits de l'utilisateur si l'utilisateur suit </p><br><p>  / commandes / étrangers ou / commandes / 1, mais pas / commandes / étrangers / 1. </p><br></li><li><p>  <code>**</code> - intercepte à tous les niveaux. <br>  Toutes les demandes seront vérifiées, / commandes / étrangers, / commandes / 1, / commandes / étrangers / 1. </p><br></li></ul></div></div><br><div class="spoiler">  <b class="spoiler_title">Pourquoi mvcMatcher est-il plus sûr qu'antMatcher?</b> <div class="spoiler_text"><p>  Parce que <code>antMatcher(“/service”)</code> mappe le chemin de demande uniquement vers <code>“/service”</code> , tandis que <code>mvcMatcher(“/service”)</code> mappe vers <code>“/service”</code> , <code>“/service.html”</code> , «/service.abc» . </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Spring prend-il en charge le hachage de mot de passe?</b>  <b class="spoiler_title">Qu'est-ce que le sel?</b> <div class="spoiler_text"><p>  Oui, c'est vrai.  Il existe une interface <code>PasswordEncoder</code> pour le hachage, qui ne contient qu'une seule méthode: </p><br><p>  <code>static PasswordEncoder createDelegatingPasswordEncoder()</code> , qui renvoie le <code>DelegatePasswordEncoder</code> par défaut. </p><br><p>  Salt est utilisé pour calculer la valeur de hachage du mot de passe.  Il s'agit d'une séquence de nombres aléatoires qui sont utilisés pour convertir un mot de passe texte en hachage.  Le sel est stocké sous forme claire à côté du mot de passe de hachage et peut être utilisé plus tard lors de la conversion d'un mot de passe propre en hachage avec une nouvelle connexion utilisateur. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Pourquoi avez-vous besoin d'une protection pour les méthodes?</b>  <b class="spoiler_title">Comment l'installer?</b> <div class="spoiler_text"><p>  Spring Security prend en charge la protection des méthodes individuelles dans les beans (par exemple, dans les contrôleurs).  Il s'agit d'une couche de protection supplémentaire pour l'application. </p><br><p>  Il doit être spécifié explicitement à l'aide de l'annotation <code>@EnableGlobalMethodSecurity</code> . </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Que fait l'annotation @RolesAllowed?</b> <div class="spoiler_text"><p>  Cette annotation est basée sur le JSR-250. <br>  <code>@RolesAllowed</code> vous permet de configurer l'accès aux méthodes (par exemple, dans la classe de contrôleur) à l'aide de rôles. <br>  Exemple: <code>@RolesAllowed(“ADMIN”)</code> n'autorisera que les utilisateurs avec le rôle <code>ADMIN</code> </p><br><p>  Pour l'utiliser, vous devez définir <code>@EnableGlobalMethodSecurity(jsr250Enabled=true)</code> sur la classe @Configuration + vous avez besoin que cette annotation soit dans le chemin de classe. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Parlez-nous de @PreAuthorize</b> <div class="spoiler_text"><p>  <code>@PreAuthorize</code> vous permet de configurer l'accès à la méthode à l'aide de SpEL. <br>  Pour l'utiliser, vous devez définir <code>@EnableGlobalMethodSecurity(prePostEnabled=true)</code> </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Comment toutes ces annotations sont-elles mises en œuvre?</b> <div class="spoiler_text"><p>  La fonctionnalité de bout en bout est utilisée à l'aide de Spring AOP (objets proxy). </p></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr470786/">https://habr.com/ru/post/fr470786/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr470774/index.html">Nouvelles annotations de type dans Python 3.8 (protocole, final, TypedDict, littéral)</a></li>
<li><a href="../fr470778/index.html">Revue du disque Seagate ST2000DM008: «deux» rapides sans surprix</a></li>
<li><a href="../fr470780/index.html">La barre est prise - la nouvelle de Seagate pour le stockage</a></li>
<li><a href="../fr470782/index.html">Les données à la frontière: comment créer une nouvelle architecture informatique</a></li>
<li><a href="../fr470784/index.html">La conception des couleurs des mondes mystérieux de Dead Cells</a></li>
<li><a href="../fr470790/index.html">Nous résolvons les tâches Yandex.Interview dans un style fonctionnel</a></li>
<li><a href="../fr470792/index.html">Entretien avec l'un des créateurs de Untitled Goose Game</a></li>
<li><a href="../fr470794/index.html">Laravel: expliquer les concepts de base. Première partie: théorie</a></li>
<li><a href="../fr470800/index.html">P - anticipation, ainsi que le programme préliminaire DUMP de Kazan. Voir les rapports qui ont passé la sélection du hachoir à viande</a></li>
<li><a href="../fr470802/index.html">Sauvegarde, partie 6: comparaison des outils de sauvegarde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>