<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🍳 💻 🏇🏾 1. Basé sur Meyers «c ++ efficace et moderne» - inférence de type de modèle 👩🏻‍🚀 ⛰️ 😲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, cher lecteur! 


 Cet article est le premier d'une série d'articles abstraits que j'écrirai en lisant le livre de Scott Meyers, Effective and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>1. Basé sur Meyers «c ++ efficace et moderne» - inférence de type de modèle</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414233/"><h4 id="dobryy-den-dorogoy-chitatel">  Bonjour, cher lecteur! </h4><br><p>  Cet article est le premier d'une série d'articles abstraits que j'écrirai en lisant le livre de Scott Meyers, Effective and Modern c ++.  Chacun de ces articles aura un répertoire distinct dans <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un projet spécialement mis en place sur github.com</a></strong> avec des exemples d'utilisation des fonctionnalités et techniques décrites. </p><a name="habracut"></a><br><h1 id="vyvod-tipa-shablona">  Inférence de type de modèle </h1><br><p>  <strong>Une conception réussie,</strong> c'est lorsque le consommateur ne sait pas comment fonctionne l'appareil, mais que tout lui convient. </p><br><p>  <strong>La conclusion du type de modèle</strong> est lorsqu'il existe une fonction de modèle, par exemple, et qu'elle est appelée sans modèle ni parenthèses angulaires.  En même temps, le compilateur devine quel type il devra utiliser dans un objet particulier de la fonction. </p><br><p> Meyers divise le <strong>type - "T"</strong> , qui est affiché et le <strong>type - "ParamType"</strong> , qui est prescrit par le programmeur dans la définition du paramètre. </p><br><h3 id="1-vid-parametra---ssylka-ili-ukazatel">  1. Vue des paramètres - lien ou pointeur </h3><br><p>  Afin de comprendre rapidement la règle de dérivation, je vais la refléter sous la forme d'un modèle: </p><br><p>  <strong>type d'entrée</strong> -&gt; <strong>type, paramètre</strong> -&gt; <strong>type de sortie</strong> [, <strong>type final de paramètre</strong> ] </p><br><h4 id="primer-so-ssylkoy">  Exemple avec un lien: </h4><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;typename T&gt; //   T <span class="hljs-type"><span class="hljs-type">void</span></span> func(T&amp; param) //   - T&amp; <span class="hljs-type"><span class="hljs-type">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; //   <span class="hljs-type"><span class="hljs-type">int</span></span> func(x);</code> </pre> <br><p>  Lorsque le type <strong>T est</strong> dérivé, la référentialité (*, &amp;) est rejetée car elle est déjà indiquée lors de la définition de la fonction, comme si cela signifie "vous passez quoi que ce soit là, nous supposerons que ce n'est pas un lien, car la référentialité est déjà ajoutée sur le lieu de consommation - dans notre fonction f " </p><br><p>  Selon le même principe, la constance est ignorée si elle est spécifiée dans le paramètre de fonction.  Sur les liens, pointeurs, constance, pour ainsi dire, un masque exclusif est imposé. </p><br><h4 id="shema-vyvedeniya">  Schéma de retrait </h4><br><pre> <code class="hljs pgsql">//   <span class="hljs-type"><span class="hljs-type">int</span></span> —&gt; (T &amp; param) —&gt; <span class="hljs-type"><span class="hljs-type">int</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> —&gt; (T &amp; param) —&gt; const <span class="hljs-type"><span class="hljs-type">int</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> &amp; —&gt; (T &amp; param) —&gt; const <span class="hljs-type"><span class="hljs-type">int</span></span> //   <span class="hljs-type"><span class="hljs-type">int</span></span> —&gt; (const T &amp; param) —&gt; <span class="hljs-type"><span class="hljs-type">int</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> —&gt; (const T &amp; param) —&gt; <span class="hljs-type"><span class="hljs-type">int</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> &amp; —&gt; (const T &amp; param) —&gt; <span class="hljs-type"><span class="hljs-type">int</span></span>; //   <span class="hljs-type"><span class="hljs-type">int</span></span> * —&gt; (T * param) —&gt; <span class="hljs-type"><span class="hljs-type">int</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> —&gt; (T * param) —&gt; const <span class="hljs-type"><span class="hljs-type">int</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> * —&gt; (T * param) —&gt; const <span class="hljs-type"><span class="hljs-type">int</span></span>; //   <span class="hljs-type"><span class="hljs-type">int</span></span> * —&gt; (const T * param) —&gt; <span class="hljs-type"><span class="hljs-type">int</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> —&gt; (const T * param) —&gt; <span class="hljs-type"><span class="hljs-type">int</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> * —&gt; (const T * param) —&gt; <span class="hljs-type"><span class="hljs-type">int</span></span>;</code> </pre> <br><h3 id="2-tip-argumenta---universalnaya-ssylka">  2. Type d'argument - référence universelle </h3><br><p>  Scott mentionne que les liens universels seront examinés plus tard, donc les règles pour les paramètres qu'il divise ici en rvalue et lvalue doivent juste être rappelées avec peu de réflexion. </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp;&amp; param)</span></span></span></span></code> </pre> <br><h4 id="pravila-vyvoda-dlya-lvalue">  Règles d'inférence pour lvalue </h4><br><p>  Selon Scott, c'est le seul cas où T est sorti comme référence. <br>  Dans les exemples suivants, le type du paramètre dans la description de la fonction est une <strong>référence lvalue universelle</strong> .  On peut voir que T est affiché sous forme de lien ou de lien constant, selon <br>  à partir de l'argument d'entrée, le type du paramètre param lui-même est également une référence dans ce cas. </p><br><pre> <code class="hljs objectivec">lvalue <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> —&gt; (T &amp;&amp;param) —&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;, param - <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp; lvalue <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> —&gt; (T &amp;&amp;param) —&gt; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;, param - <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp; lvalue <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp; —&gt; (T &amp;&amp;param) —&gt; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp;, param - <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp;</code> </pre> <br><p>  Le type du paramètre lui-même est également remplacé.  Je pense que cela est dû au fait que le langage ne peut pas considérer une variable de valeur allouée quelque part au-dessus de celle qui peut être déplacée plus loin.  Nous le découvrirons plus tard lorsque nous arriverons aux liens universels. <br>  Pour vérifier que <strong>T</strong> est vraiment un type de référence, j'ai écrit <strong>T myVar</strong> dans le corps de la fonction de modèle, que ce T a à la fois affiché et a attendu un message - <strong>"déclaré comme référence mais non initialisé"</strong> - le lien :) </p><br><h4 id="pravila-vyvoda-dlya-rvalue">  Règles d'inférence pour rvalue </h4><br><p>  Les règles «normales» du paragraphe 1 s'appliquent. </p><br><pre> <code class="hljs objectivec">rvalue <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> —&gt; (T &amp;&amp;param) —&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, param - <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&amp;&amp;</code> </pre> <br><p>  Il est déjà évident que les références universelles ne sont «incluses» que pour les objets temporaires rvalue, dans d'autres cas, lorsque l'argument n'est pas une référence universelle, rvalue, lvalue n'est pas distingué </p><br><h3 id="3-peredacha-po-znacheniyu-kak-est">  3. Passez par valeur (tel quel) </h3><br><p>  Lors du passage par valeur, la constance et la référentialité de l'argument d'origine sont rejetées comme inutiles car ce sont des objets indépendants complètement nouveaux, pourquoi ont-ils besoin de qualificatifs avec lesquels ils ne sont pas connectés? </p><br><pre> <code class="hljs objectivec"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> —&gt; (T param) —&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> —&gt; (T param) —&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> &amp; —&gt; (T param) —&gt; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-comment"><span class="hljs-comment">//       ,     const char * const —&gt; (T param) —&gt; const char *</span></span></code> </pre> <br><h4 id="predpolozhu-chto-drugie-bezumnye-i-nelogichnye-sochetaniya-vyzovut-oshibki-kompilyacii-pochti-vsegda-okazyvaetsya-rabota-kompilyatora-obyasnima-nado-tolko-eti-obyasneniya-odin-raz-vyslushat">  Je suppose que d'autres combinaisons folles et illogiques provoqueront des erreurs de compilation, presque toujours, il s'avère, le travail du compilateur est compréhensible, vous n'avez besoin d'écouter ces explications qu'une seule fois. </h4></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414233/">https://habr.com/ru/post/fr414233/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414223/index.html">C #: compatibilité descendante et surcharge</a></li>
<li><a href="../fr414225/index.html">Création de votre propre réseau d'appareils faits maison basés sur Arduino (partie 1)</a></li>
<li><a href="../fr414227/index.html">Une nouvelle étude des indicateurs Telegram après blocage: les abonnés augmentent, la couverture diminue</a></li>
<li><a href="../fr414229/index.html">Analyse de différentes méthodes de formation informatique</a></li>
<li><a href="../fr414231/index.html">Comment j'ai fait un ordinateur complètement silencieux</a></li>
<li><a href="../fr414235/index.html">L'histoire mystérieuse d'un schizophrène et d'un chaman</a></li>
<li><a href="../fr414237/index.html">Maquillage pour cyber cendrillon. Projet de week-end Arduino. Cils LED</a></li>
<li><a href="../fr414239/index.html">Windows et système de fichiers sensible à la casse</a></li>
<li><a href="../fr414243/index.html">Opus gratuit sur l'embauche, les interviews et les déchets sur le marché du personnel informatique</a></li>
<li><a href="../fr414245/index.html">Modèle de régression polynomiale</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>