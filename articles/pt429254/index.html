<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏿‍🎤 📱 🗡️ Nas curvas de Bezier e na velocidade do Arduino, parte dois 👎🏼 🤽🏽 🖨️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Passaremos por - e além 


 No meu post anterior, mostrei como você pode melhorar a velocidade dos pontos de cálculo em uma curva de Bezier (KB): 



...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nas curvas de Bezier e na velocidade do Arduino, parte dois</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429254/"><h3>  Passaremos por - e além </h3><br><img src="https://habrastorage.org/webt/hx/vp/j2/hxvpj2li3y68iwtzbikjgddqauy.jpeg"><br><br>  No meu post anterior, mostrei como você pode melhorar a velocidade dos pontos de cálculo em uma curva de Bezier (KB): <br><br><ol><li>  Transformações de fórmulas de cálculo - aceleração ~ 3 vezes. </li><li>  Quase não há aceleração de PT para FT - mas permite 3. </li><li>  A operação de substituição da divisão por multiplicação e deslocamento é uma aceleração de outros 40%. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Triste retiro</b> <div class="spoiler_text">  - Cometi um erro na última fórmula, foi possível acelerar um pouco mais os cálculos dobrando outra expressão constante e, excluindo a multiplicação, em vez de 502 obter 410 ciclos de relógio por ciclo de cálculo.  Infelizmente, nenhum dos leitores do post anterior apontou para mim nos comentários ... mas eu estava esperando por isso, o que significa que não poderia interessar aos meus leitores o suficiente para que eles corretamente (ou seja, com cuidado) lessem minhas opus.  Ok, tente novamente. </div></div><br><a name="habracut"></a><br>  No final do post mencionado, eu disse que os cálculos podem ser feitos ainda mais rapidamente, mas o que "o garoto disse - o garoto fez". <br><br>  Deixe-me lembrá-lo mais uma vez da fórmula obtida para calcular o ponto no KB <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mo>=</mo><mo stretchy=&quot;false&quot;>(</mo><mi>A</mi><mn>1</mn><mo>&amp;#x2217;</mo><mi>e</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2217;</mo><mi>e</mi><mo>+</mo><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mo>=&amp;gt;</mo><mn>2</mn><mo>&amp;#x2217;</mo><mn>2</mn><mo>+</mo><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="38.887ex" height="2.66ex" viewBox="0 -832 16743.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-28" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-41" x="2475" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-31" x="3225" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2217" x="3948" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-65" x="4671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2B" x="5359" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-42" x="6360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-31" x="7119" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-29" x="7620" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2217" x="8232" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-65" x="8954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2B" x="9643" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-43" x="10644" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-28" x="11404" y="0"></use><g transform="translate(11794,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-3D"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-3E" x="778" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-32" x="13629" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2217" x="14351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-32" x="15074" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2B" x="15575" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-29" x="16353" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo>=</mo><mo stretchy="false">(</mo><mi>A</mi><mn>1</mn><mo>∗</mo><mi>e</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><mi>e</mi><mo>+</mo><mi>C</mi><mo stretchy="false">(</mo><mo>=&gt;</mo><mn>2</mn><mo>∗</mo><mn>2</mn><mo>+</mo><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> P = (A1 * e + B1) * e + C (=> 2 * 2 +) </script></p>  O próximo aumento de velocidade está relacionado à peculiaridade do problema - precisamos não apenas calcular o valor de KB em diferentes valores do parâmetro “e”, mas encontrar uma série de valores ao alterar (neste caso, aumentar) esse parâmetro por um valor fixo conhecido (além disso). caso), que permite usar a técnica descrita abaixo.  No meu tempo, isso foi chamado de método de cálculo da diferença (se a memória me serve bem, pelo menos era o que era chamado em palestras), toda a Internet está à sua disposição, talvez (mesmo com certeza), haja outro nome. <br><br>  Consideramos o caso P = A * e (=&gt; 1 *) e supomos que conhecemos o valor de P0 com algum argumento u0.  Então o valor com o próximo argumento u0 + 1 pode ser calculado como P = A * (u0 + 1) = A * u0 + A = P0 + A (=&gt; 1+).  Sem perder precisão, fomos capazes de substituir a operação de multiplicação pela operação de adição, que é muito mais rápida. <br><br>  Agora, um exemplo mais complexo P = A * e * e (=&gt; 2 *), consideramos por analogia P = A * (e + 1) * (e + 1) = A * (e * e + 2 * e + 1) = A * e * e + 2 * A * e + A = P0 + 2 * A * e + A (=&gt; 2 * 2 +).  À primeira vista, não ganhamos nada, mas se calcularmos A '= 2 * A antecipadamente, obtemos (=&gt; 1 * 2 +), uma vitória é bem possível.  Mas não vamos parar no que foi alcançado com a expressão obtida A '* e aplicar a técnica já conhecida por nós, então obteremos duas operações em duas variáveis: P = P + A' + A;  A '= A' + A (=&gt; 3+).  Se levarmos em conta que o valor inicial de A 'pode ser feito mais por A, em geral, existem apenas duas adições em vez de duas multiplicações.  Sim, tivemos que obter duas variáveis ​​adicionais, mas essa é uma troca clássica - pagamos com memória pelo tempo. <br><br>  Resta apenas calcular os valores iniciais corretos, mas isso é feito apenas uma vez no início das iterações e, se o valor inicial do parâmetro for u = 0, geralmente será trivial P = 0, A '= A.  Testaremos nosso método em várias iterações (isso é completamente desnecessário, a matemática aplicada corretamente não pode dar a resposta errada), mas nos permitirá entender melhor o que está acontecendo.  Então <br>  iteração 0: e = 0;  P = 0 (verdadeiro);  A '= A;  A '' = 2 * A; <br>  iteração 1: e = 1;  P = 0 + A '= 0 + A = A (verdadeiro);  A '= A' + A '' = A + 2 * A = 3 * A; <br>  iteração 2: e = 2;  P = A + 3 * A = 4 * A (verdadeiro);  A '= 3 * A + 2 * A = 5 * A; <br>  iteração 3: e = 3;  P = 9 * A (verdadeiro);  A '= 7 * A e assim por diante. <br><br>  Observamos a conexão entre as fórmulas obtidas e o método de Newton para calcular o valor de uma função na vizinhança de um ponto com um valor conhecido.  Além disso, como nossa função é de segunda ordem e todas as derivadas, começando na terceira, são iguais a zero, podemos substituir com segurança o sinal de igual aproximado pelo exato.  A única diferença desse método é que movemos constantemente o ponto em relação ao qual estamos construindo uma nova vizinhança, a fim de evitar a execução de operações de multiplicação na formulação original. <br><br>  Reescreva nossa expressão original para KB em formato expandido <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>P</mi><mo>=</mo><mi>A</mi><mn>1</mn><mo>&amp;#x2217;</mo><mi>e</mi><mo>&amp;#x2217;</mo><mi>e</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo>&amp;#x2217;</mo><mi>e</mi><mo>+</mo><mi>C</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="27.958ex" height="2.178ex" viewBox="0 -780.1 12037.3 937.7" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-3D" x="1029" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-41" x="2085" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-31" x="2836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2217" x="3558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-65" x="4281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2217" x="4970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-65" x="5692" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2B" x="6381" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-42" x="7382" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-31" x="8141" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2217" x="8864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-65" x="9587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMAIN-2B" x="10276" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/429254/&amp;usg=ALkJrhhpEKpbW4tcO1M2Lmg1cUTi5apgXA#MJMATHI-43" x="11276" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo>=</mo><mi>A</mi><mn>1</mn><mo>∗</mo><mi>e</mi><mo>∗</mo><mi>e</mi><mo>+</mo><mi>B</mi><mn>1</mn><mo>∗</mo><mi>e</mi><mo>+</mo><mi>C</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> P = A1 * e * e + B1 * e + C </script></p>  então, para o cálculo usando este método, precisamos de 2+ para o primeiro termo (e duas variáveis), 1+ para o segundo termo (e uma variável) e 2+ para adicionar tudo (=&gt; 5+).  Pode-se esperar que mesmo essa abordagem (incorreta) traga um ganho em comparação com 2 * 2 +, mas tudo está muito melhor.  Obviamente, a operação de adição é aditiva (obrigado, capitão), para que você possa agrupar os termos e substituir os termos constantes por novas expressões, o que fornece o seguinte algoritmo: <br><br>  1. Os valores iniciais de P = C;  A '= A1 + B1;  A '' = 2 * A1; <br>  2. no próximo passo P = P + A ';  A '= A' + A '' (=&gt; 2+), que é sem dúvida mais rápido que o esquema de Horner. <br><br>  Implementamos nosso algoritmo na forma de um programa (isso não é tão trivial quanto parece, pois por simplicidade eu esqueci a necessidade de mudanças, mas não é muito difícil ... por 20 minutos), obtemos a complexidade computacional (=&gt; 2 + 1 &gt;&gt;) e medimos velocidade - resultou em 140 (aumento de velocidade em mais 3 vezes) ciclos por ciclo, mas esse é um resultado quase ideal.  O que precisamos fazer para obter a opção ideal (em certo sentido) é prestar atenção à dimensão dos operandos nas fórmulas.  Agora, realizamos todas as operações em números inteiros longos (32 bits), e isso pode ser desnecessário em alguns lugares.  Se reduzirmos a capacidade dos operandos ao mínimo necessário, obteremos um ganho de 20 a 25%, mas isso exigirá que troquemos para o montador (C não possui os meios adequados para essas operações) e analisemos cuidadosamente os dados do problema original.  Se cabe ao leitor decidir se deve ou não fazê-lo, já aceleramos os cálculos mais de 1900/140 = 13 vezes em comparação com a abordagem "ingênua". <br><br>  A última observação sobre a implementação do algoritmo é que ainda excluímos a operação de divisão, alterando-a por multiplicação constante, que levamos em consideração ao gerar os dados iniciais e deslocando-os por um múltiplo constante de 8. Isso pode ser feito de várias maneiras com tempos de execução ligeiramente diferentes, deixando esses experimentos à atenção de um leitor curioso . <br><br>  No entanto, um problema surgiu completamente inesperadamente - vemos claramente duas operações de adição em números de 32 bits, que devem levar 4 + 4 = 8 ciclos de relógio, colocar outros 8 * 3 * 2 = 48 ciclos de relógio para enviar operandos, 4 ciclos de relógio para receber o resultado do turno, 4 um ciclo de relógio para chamar o procedimento de cálculo e retorno e 4 ciclos de relógio para organizar o ciclo - de onde outros 60 ciclos de relógio não são claros.  Anteriormente, simplesmente não percebíamos isso no contexto de centenas de ciclos de relógio, mas agora você pode prestar atenção.  Medidas excessivas foram facilmente encontradas - no ciclo, houve operações de depuração desnecessárias; se você limpar tudo com cuidado, restarão apenas 120 medidas e o objetivo de cada uma será bastante compreensível (bem, não tão claro, mas ainda assim).  Em seguida, descobrimos o tempo de execução do ciclo vazio - 22 medidas, imagino o que eles estão fazendo lá o tempo todo, mas tudo bem, e limpamos o tempo de cálculo real, que será de 98 ciclos.  Observe que a estimativa da aceleração do trabalho obtida muda: em vez de 1900/140 = 13, obtemos (1900-50) / (140-40) = 19 vezes, o que não faz sentido prático, pois o ciclo ainda é necessário, mas permite aumentá-lo ainda mais auto-estima. <br><br>  E a última observação - como é fácil ver, começamos a procurar e eliminar pulgas apenas quando lidamos com grandes besouros de veados e sua existência (pulgas) tornou-se óbvia e, além disso, significativa.  Eu recomendo exatamente essa abordagem (e não estou sozinho nessa recomendação) ao otimizar os programas em termos de desempenho. <br><br>  Bem, em conclusão, sobre a nota "em certo sentido" - se estamos falando sobre o cálculo seqüencial das coordenadas do próximo ponto no KB ao alterar o parâmetro (representando o tempo), então o algoritmo proposto (depois de todas as otimizações) não é mais possível melhorar.  Mas se você reformular a tarefa e, por exemplo, definir o objetivo de simplesmente criar uma agência de design na tela (sem referência ao tempo), haverá um método muito promissor, a palavra-chave "Brezenheim", mas "esta é uma história completamente diferente", que vou dedicar em outro post (talvez um dia se a irmã mais velha não se importar). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt429254/">https://habr.com/ru/post/pt429254/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt429244/index.html">Gnomo ganancioso: Como escrevi análises de mercado no Lineage 2</a></li>
<li><a href="../pt429246/index.html">Estágio de verão na Mars IS: uma visão interna</a></li>
<li><a href="../pt429248/index.html">Dicas poliglotas: como aprender qualquer idioma sem lágrimas e maldições</a></li>
<li><a href="../pt429250/index.html">Cem receitas digitais da contabilidade</a></li>
<li><a href="../pt429252/index.html">Análise estática de aplicativos móveis</a></li>
<li><a href="../pt429256/index.html">Como cultivar uma floresta no Actionscript3 / Flash em algumas * linhas de código</a></li>
<li><a href="../pt429258/index.html">Como criar mecânica de jogo confiável usando apenas o Excel: modelagem e otimização de soluções</a></li>
<li><a href="../pt429260/index.html">Nosso caminho para o armazenamento centralizado de logs</a></li>
<li><a href="../pt429262/index.html">Bem-vindo ao outono DIYouDIE Meetup 17 de novembro</a></li>
<li><a href="../pt429264/index.html">Tempo de UPS de íon de lítio: risco de incêndio ou passo seguro para o futuro?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>