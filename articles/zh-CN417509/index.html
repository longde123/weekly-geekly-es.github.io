<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜¹ ğŸ‘©ğŸ½â€ğŸ“ ğŸš¾ KubernetesæŠ€å·§ä¸çªé—¨ï¼šåŠ é€Ÿå¤§å‹æ•°æ®åº“çš„å¼•å¯¼ ğŸ‘¨ğŸ»â€ğŸ³ ğŸ¤ ğŸš</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ‰“å¼€äº†ä¸€ç³»åˆ—å‡ºç‰ˆç‰©ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³å¦‚ä½•ä½¿è‡ªå·±ï¼ˆæ“ä½œï¼‰å’Œå¼€å‘äººå‘˜åœ¨å„ç§æƒ…å†µä¸‹æ¯å¤©éƒ½ä¼šå‘ç”Ÿçš„ç”Ÿæ´»å˜å¾—æ›´åŠ è½»æ¾çš„å®ç”¨è¯´æ˜ã€‚ æ‰€æœ‰è¿™äº›éƒ½æ˜¯ä»è§£å†³å®¢æˆ·é—®é¢˜çš„å®é™…ç»éªŒä¸­æ”¶é›†çš„ï¼Œå¹¶ä¸”éšç€æ—¶é—´çš„æµé€æœ‰æ‰€æ”¹å–„ï¼Œä½†ä»ç„¶ä¸èƒ½è¯´æ˜¯ç†æƒ³çš„-è¯·å°†å®ƒä»¬æ›´å¤šåœ°è§†ä¸ºæƒ³æ³•å’Œç©ºç™½ã€‚ 

 æˆ‘å°†ä»¥â€œæŠ€å·§â€å¼€å§‹ï¼Œå‡†å¤‡åƒMySQL...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>KubernetesæŠ€å·§ä¸çªé—¨ï¼šåŠ é€Ÿå¤§å‹æ•°æ®åº“çš„å¼•å¯¼</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/417509/"> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æ‰“å¼€äº†ä¸€ç³»åˆ—å‡ºç‰ˆç‰©ï¼Œå…¶ä¸­åŒ…å«æœ‰å…³å¦‚ä½•ä½¿è‡ªå·±ï¼ˆæ“ä½œï¼‰å’Œå¼€å‘äººå‘˜åœ¨å„ç§æƒ…å†µä¸‹æ¯å¤©éƒ½ä¼šå‘ç”Ÿçš„ç”Ÿæ´»å˜å¾—æ›´åŠ è½»æ¾çš„å®ç”¨è¯´æ˜ã€‚ æ‰€æœ‰è¿™äº›éƒ½æ˜¯ä»è§£å†³å®¢æˆ·é—®é¢˜çš„å®é™…ç»éªŒä¸­æ”¶é›†çš„ï¼Œå¹¶ä¸”éšç€æ—¶é—´çš„æµé€æœ‰æ‰€æ”¹å–„ï¼Œä½†ä»ç„¶ä¸èƒ½è¯´æ˜¯ç†æƒ³çš„-è¯·å°†å®ƒä»¬æ›´å¤šåœ°è§†ä¸ºæƒ³æ³•å’Œç©ºç™½ã€‚ <br><br> æˆ‘å°†ä»¥â€œæŠ€å·§â€å¼€å§‹ï¼Œå‡†å¤‡åƒMySQLå’ŒPostgreSQLè¿™æ ·çš„å¤§å‹æ•°æ®åº“è½¬å‚¨ï¼Œä»¥é’ˆå¯¹å„ç§éœ€æ±‚å¿«é€Ÿéƒ¨ç½²å®ƒä»¬-é¦–å…ˆï¼Œåœ¨å¼€å‘äººå‘˜çš„å¹³å°ä¸Šã€‚ ä¸‹è¿°æ“ä½œçš„ä¸Šä¸‹æ–‡æ˜¯æˆ‘ä»¬çš„å…¸å‹ç¯å¢ƒï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªå¯æ­£å¸¸å·¥ä½œçš„Kubernetesé›†ç¾¤ï¼Œä»¥åŠç”¨äºCI / CDçš„GitLabï¼ˆå’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">dapp</a> ï¼‰ã€‚ èµ°å§ <br><br><img src="https://habrastorage.org/webt/6j/2l/4z/6j2l4z7lqghreoy3nykvws5x2u0.jpeg"><a name="habracut"></a><br><br> å½“ä½¿ç”¨åŠŸèƒ½åˆ†æ”¯æ—¶ï¼ŒKubernetesçš„ä¸»è¦ç—›è‹¦æ˜¯å¤§å‹æ•°æ®åº“ï¼Œå½“å¼€å‘äººå‘˜æƒ³è¦åœ¨ç”Ÿäº§çš„å®Œæ•´ï¼ˆæˆ–å‡ ä¹å®Œæ•´ï¼‰æ•°æ®åº“ä¸Šæµ‹è¯•/æ¼”ç¤ºå…¶æ›´æ”¹æ—¶ã€‚ ä¾‹å¦‚ï¼š <br><br><ul><li>  MySQLä¸­æœ‰ä¸€ä¸ªå…·æœ‰1 TBæ•°æ®åº“çš„åº”ç”¨ç¨‹åºï¼Œæœ‰10ä¸ªå¼€å‘äººå‘˜å¼€å‘äº†è‡ªå·±çš„åŠŸèƒ½ã€‚ </li><li> å¼€å‘äººå‘˜éœ€è¦å•ç‹¬çš„æµ‹è¯•å¾ªç¯ï¼Œä»¥åŠä¸€äº›ç”¨äºæµ‹è¯•å’Œ/æˆ–æ¼”ç¤ºçš„æ›´å…·ä½“çš„å¾ªç¯ã€‚ </li><li> å¦å¤–ï¼Œéœ€è¦åœ¨ç”Ÿäº§ç”µè·¯çš„æµ‹è¯•ç”µè·¯ä¸­æ¢å¤ç”Ÿäº§åŸºåœ°çš„å¤œé—´ç»´æŠ¤ï¼Œä»¥ä¿æŒæ­£å¸¸çš„æ—¶é—´-ä»¥é‡ç°å®¢æˆ·æˆ–bugçš„é—®é¢˜ã€‚ </li><li> æœ€åï¼Œå¯ä»¥å‡å°‘è‡³å°‘150 GBçš„æ•°æ®åº“å¤§å°-ä¸ç®—å¤šï¼Œä½†ä»å¯ä»¥èŠ‚çœç©ºé—´ã€‚ å³ æˆ‘ä»¬ä»ç„¶éœ€è¦ä»¥æŸç§æ–¹å¼å‡†å¤‡è½¬å‚¨ã€‚ </li></ul><br>  <i><b>æ³¨æ„</b> ï¼šé€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨Perconaçš„innobackupexå¤‡ä»½MySQLæ•°æ®åº“ï¼Œè¿™ä½¿æˆ‘ä»¬å¯ä»¥ä¿å­˜æ‰€æœ‰æ•°æ®åº“å’Œç”¨æˆ·...-ç®€è€Œè¨€ä¹‹ï¼Œå¯èƒ½éœ€è¦åšçš„ä¸€åˆ‡ã€‚</i>  <i>å°½ç®¡åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¦‚ä½•è¿›è¡Œå¤‡ä»½å¹¶ä¸é‡è¦ï¼Œä½†æœ¬æ–‡å°†è¿›ä¸€æ­¥è€ƒè™‘è¿™ç§ç¤ºä¾‹ã€‚</i> <br><br> å› æ­¤ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°æ®åº“å¤‡ä»½ã€‚ æ¥ä¸‹æ¥è¦åšä»€ä¹ˆï¼Ÿ <br><br><h2> æ­¥éª¤1ï¼šä»è½¬å‚¨ä¸­å‡†å¤‡æ–°æ•°æ®åº“ </h2><br> é¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨Kubernetes <i>Deploymentä¸­</i>åˆ›å»ºå®ƒï¼Œå®ƒç”±ä¸¤ä¸ªinitå®¹å™¨<i>ï¼ˆå³åœ¨åº”ç”¨ç¨‹åºç‚‰å‰è¿è¡Œå¹¶å…è®¸æ‚¨æ‰§è¡Œé¢„é…ç½®çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç‰¹æ®Šå®¹å™¨</a> ï¼‰</i>å’Œä¸€ä¸ªç‚‰åºŠç»„æˆã€‚ <br><br> ä½†æ˜¯åœ¨å“ªé‡Œæ”¾ç½®å‘¢ï¼Ÿ æˆ‘ä»¬æœ‰ä¸€ä¸ªå¤§å‹æ•°æ®åº“ï¼ˆ1 TBï¼‰ï¼Œæˆ‘ä»¬æƒ³å¢åŠ å…¶åä¸ªå®ä¾‹-æˆ‘ä»¬éœ€è¦ä¸€å°å…·æœ‰å¤§ç£ç›˜ï¼ˆ10+ TBï¼‰çš„æœåŠ¡å™¨ã€‚ æˆ‘ä»¬ä¸ºæ­¤ä»»åŠ¡å•ç‹¬è®¢è´­å®ƒï¼Œå¹¶ç”¨<code>dedicated: non-prod-db</code>çš„ä¸“ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ ‡ç­¾</a> <code>dedicated: non-prod-db</code>åœ¨è¯¥æœåŠ¡å™¨ä¸Šæ ‡è®°è¯¥èŠ‚ç‚¹ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨åŒä¹‰çš„taintï¼ŒKubernetesä¼šè¯´è¿™ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><i>å¼‚å‘³</i></a>æ˜¯åªæœ‰å¯¹å®ƒæœ‰æŠµæŠ—åŠ›ï¼ˆå…·æœ‰<i>å®¹å¿åº¦</i> ï¼‰çš„åº”ç”¨ç¨‹åºæ‰èƒ½æ»šåŠ¨åˆ°è¯¥èŠ‚ç‚¹ï¼Œå³å°†Kubernetesè½¬æ¢ä¸º<code>dedicated Equal non-prod-db</code> ã€‚ <br><br> ä½¿ç”¨<code>nodeSelector</code>å’Œ<code>nodeSelector</code> <code>tolerations</code>é€‰æ‹©æ‰€éœ€çš„èŠ‚ç‚¹ï¼ˆä½äºå…·æœ‰å¤§ç£ç›˜çš„æœåŠ¡å™¨ä¸Šï¼‰ï¼š <br><br><pre> <code class="plaintext hljs"> nodeSelector: dedicated: non-prod-db tolerations: - key: "dedicated" operator: "Equal" value: "non-prod-db" effect: "NoExecute"</code> </pre> <br>  ...ï¼Œå¹¶å¯¹è¯¥èŠ‚ç‚¹çš„å†…å®¹è¿›è¡Œæè¿°ã€‚ <br><br><h3> åˆå§‹åŒ–å®¹å™¨ï¼šget-bindump </h3><br> æˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªåˆå§‹åŒ–å®¹å™¨ç§°ä¸º<code>get-bindump</code> ã€‚ å®ƒæŒ‚è½½<code>emptyDir</code> ï¼ˆåœ¨<code>/var/lib/mysql</code> ï¼‰ï¼Œå°†ä»å¤‡ä»½æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ•°æ®åº“è½¬å‚¨æ·»åŠ åˆ°è¯¥ç›®å½•ä¸­ã€‚ ä¸ºæ­¤ï¼Œå®¹å™¨æä¾›äº†æ‚¨æ‰€éœ€çš„ä¸€åˆ‡ï¼šSSHå¯†é’¥ï¼Œå¤‡ä»½æœåŠ¡å™¨åœ°å€ã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œæ­¤é˜¶æ®µå¤§çº¦éœ€è¦2ä¸ªå°æ—¶ã€‚ <br><br>  <i>éƒ¨ç½²</i>ä¸­å¯¹æ­¤å®¹å™¨çš„æè¿°å¦‚ä¸‹ï¼š <br><br><pre> <code class="plaintext hljs"> - name: get-bindump image: db-dumps imagePullPolicy: Always command: [ "/bin/sh", "-c", "/get_bindump.sh" ] resources: limits: memory: "5000Mi" cpu: "1" requests: memory: "5000Mi" cpu: "1" volumeMounts: - name: dump mountPath: /dump - name: mysqlbindir mountPath: /var/lib/mysql - name: id-rsa mountPath: /root/.ssh</code> </pre> <br> å®¹å™¨ä¸­ä½¿ç”¨çš„<code>get_bindump.sh</code>è„šæœ¬ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash date if [ -f /dump/version.txt ]; then echo "Dump file already exists." exit 0 fi rm -rf /var/lib/mysql/* borg extract --stdout user@your.server.net:somedb-mysql::${lastdump} stdin | xbstream -x -C /var/lib/mysql/ echo $lastdump &gt; /dump/version.txt</span></span></code> </pre> <br><h3> åˆå§‹åŒ–å®¹å™¨ï¼šprepare-bindump </h3><br> ä¸‹è½½å¤‡ä»½åï¼Œå¯åŠ¨ç¬¬äºŒä¸ªåˆå§‹åŒ–å®¹å™¨<code>prepare-bindump</code> ã€‚ å®ƒæ‰§è¡Œ<code>innobackupex --apply-log</code> ï¼ˆå› ä¸ºæ–‡ä»¶å·²ç»åœ¨<code>/var/lib/mysql</code>å¯ç”¨-æ„Ÿè°¢<code>get-bindump</code> ï¼‰ï¼Œç„¶åMySQLæœåŠ¡å™¨å¯åŠ¨ã€‚ <br><br> æ­£æ˜¯åœ¨æ­¤initå®¹å™¨ä¸­ï¼Œæˆ‘ä»¬å¯¹æ•°æ®åº“è¿›è¡Œäº†æ‰€æœ‰å¿…è¦çš„è½¬æ¢ï¼Œä¸ºé€‰å®šçš„åº”ç”¨ç¨‹åºåšå¥½å‡†å¤‡ï¼šæˆ‘ä»¬æ¸…é™¤å…è®¸ä½¿ç”¨çš„è¡¨ï¼Œæ›´æ”¹æ•°æ®åº“å†…éƒ¨çš„è®¿é—®æƒé™ï¼Œç­‰ç­‰ã€‚ ç„¶åï¼Œæˆ‘ä»¬å…³é—­MySQLæœåŠ¡å™¨ï¼Œåªéœ€å°†æ•´ä¸ª<code>/var/lib/mysql</code>å­˜æ¡£åˆ°tar.gzæ–‡ä»¶ä¸­ã€‚ ç»“æœï¼Œè½¬å‚¨å¯å®¹çº³100 GBçš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å·²ç»æ¯”åŸå§‹1 TBå°ä¸€ä¸ªæ•°é‡çº§ã€‚ æ­¤é˜¶æ®µå¤§çº¦éœ€è¦5ä¸ªå°æ—¶ã€‚ <br><br>  <i>Deploymentä¸­</i>ç¬¬äºŒä¸ªåˆå§‹åŒ–å®¹å™¨çš„æè¿°ï¼š <br><br><pre> <code class="plaintext hljs"> - name: prepare-bindump image: db-dumps imagePullPolicy: Always command: [ "/bin/sh", "-c", "/prepare_bindump.sh" ] resources: limits: memory: "5000Mi" cpu: "1" requests: memory: "5000Mi" cpu: "1" volumeMounts: - name: dump mountPath: /dump - name: mysqlbindir mountPath: /var/lib/mysql - name: debian-cnf mountPath: /etc/mysql/debian.cnf subPath: debian.cnf</code> </pre> <br> å…¶ä¸­ä½¿ç”¨çš„<code>prepare_bindump.sh</code>è„šæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash date if [ -f /dump/healthz ]; then echo "Dump file already exists." exit 0 fi innobackupex --apply-log /var/lib/mysql/ chown -R mysql:mysql /var/lib/mysql chown -R mysql:mysql /var/log/mysql echo "`date`: Starting mysql" /usr/sbin/mysqld --character-set-server=utf8 --collation-server=utf8_general_ci --innodb-data-file-path=ibdata1:200M:autoextend --user=root --skip-grant-tables &amp; sleep 200 echo "`date`: Creating mysql root user" echo "update mysql.user set Password=PASSWORD('password') WHERE user='root';" | mysql -uroot -h 127.0.0.1 echo "delete from mysql.user where USER like '';" | mysql -uroot -h 127.0.0.1 echo "delete from mysql.user where user = 'root' and host NOT IN ('127.0.0.1', 'localhost');" | mysql -uroot -h 127.0.0.1 echo "FLUSH PRIVILEGES;" | mysql -uroot -h 127.0.0.1 echo "truncate somedb.somedb_table_one;" | mysql -uroot -h 127.0.0.1 -ppassword somedb /usr/bin/mysqladmin shutdown -uroot -ppassword cd /var/lib/mysql/ tar -czf /dump/mysql_bindump.tar.gz ./* touch /dump/healthz rm -rf /var/lib/mysql/*</span></span></code> </pre> <br><h3> ä¸‹ </h3><br> æœ€åä¸€ä¸ªå’Œå¼¦æ˜¯ä¸»ç‚‰è†›çš„å¯åŠ¨ï¼Œè¿™æ˜¯åœ¨æ‰§è¡Œåˆå§‹åŒ–å®¹å™¨ä¹‹åå‘ç”Ÿçš„ã€‚ åœ¨podä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„nginxï¼Œå¹¶é€šè¿‡<code>emtpyDir</code>å‹ç¼©å’Œè£å‰ªçš„100 GBè½¬å‚¨ã€‚ è¿™ä¸ªnginxçš„åŠŸèƒ½æ˜¯ç»™è¿™ä¸ªè½¬å‚¨ã€‚ <br><br> ç‚‰è†›é…ç½®ï¼š <br><br><pre> <code class="plaintext hljs"> - name: nginx image: nginx:alpine resources: requests: memory: "1500Mi" cpu: "400m" lifecycle: preStop: exec: command: ["/usr/sbin/nginx", "-s", "quit"] livenessProbe: httpGet: path: /healthz port: 80 scheme: HTTP timeoutSeconds: 7 failureThreshold: 5 volumeMounts: - name: dump mountPath: /usr/share/nginx/html - name: nginx-config mountPath: /etc/nginx/nginx.conf subPath: nginx.conf readOnly: false volumes: - name: dump emptyDir: {} - name: mysqlbindir emptyDir: {}</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">è¿™å°±æ˜¯æ•´ä¸ªéƒ¨ç½²åŠå…¶initContainersçš„å¤–è§‚...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">--- apiVersion: apps/v1beta1 kind: Deployment metadata: name: db-dumps spec: strategy: rollingUpdate: maxUnavailable: 0 revisionHistoryLimit: 2 template: metadata: labels: app: db-dumps spec: imagePullSecrets: - name: regsecret nodeSelector: dedicated: non-prod-db tolerations: - key: "dedicated" operator: "Equal" value: "non-prod-db" effect: "NoExecute" initContainers: - name: get-bindump image: db-dumps imagePullPolicy: Always command: [ "/bin/sh", "-c", "/get_bindump.sh" ] resources: limits: memory: "5000Mi" cpu: "1" requests: memory: "5000Mi" cpu: "1" volumeMounts: - name: dump mountPath: /dump - name: mysqlbindir mountPath: /var/lib/mysql - name: id-rsa mountPath: /root/.ssh - name: prepare-bindump image: db-dumps imagePullPolicy: Always command: [ "/bin/sh", "-c", "/prepare_bindump.sh" ] resources: limits: memory: "5000Mi" cpu: "1" requests: memory: "5000Mi" cpu: "1" volumeMounts: - name: dump mountPath: /dump - name: mysqlbindir mountPath: /var/lib/mysql - name: log mountPath: /var/log/mysql - name: debian-cnf mountPath: /etc/mysql/debian.cnf subPath: debian.cnf containers: - name: nginx image: nginx:alpine resources: requests: memory: "1500Mi" cpu: "400m" lifecycle: preStop: exec: command: ["/usr/sbin/nginx", "-s", "quit"] livenessProbe: httpGet: path: /healthz port: 80 scheme: HTTP timeoutSeconds: 7 failureThreshold: 5 volumeMounts: - name: dump mountPath: /usr/share/nginx/html - name: nginx-config mountPath: /etc/nginx/nginx.conf subPath: nginx.conf readOnly: false volumes: - name: dump emptyDir: {} - name: mysqlbindir emptyDir: {} - name: log emptyDir: {} - name: id-rsa secret: defaultMode: 0600 secretName: somedb-id-rsa - name: nginx-config configMap: name: somedb-nginx-config - name: debian-cnf configMap: name: somedb-debian-cnf --- apiVersion: v1 kind: Service metadata: name: somedb-db-dump spec: clusterIP: None selector: app: db-dumps ports: - name: http port: 80</code> </pre> </div></div><br> é™„åŠ è¯´æ˜ï¼š <br><br><ol><li> å°±æˆ‘ä»¬è€Œè¨€ï¼Œæˆ‘ä»¬<b>æ¯æ™š</b>ä½¿ç”¨GitLabä¸­çš„é¢„å®šä½œä¸šå‡†å¤‡ä¸€ä¸ªæ–°çš„è½¬å‚¨ã€‚ å³ æ¯å¤©æ™šä¸Šï¼Œæ­¤<i>éƒ¨ç½²éƒ½ä¼š</i>è‡ªåŠ¨æ¨å‡ºï¼Œä»è€Œäº§ç”Ÿä¸€ä¸ªæ–°çš„è½¬å‚¨ï¼Œå¹¶å‡†å¤‡å°†å…¶åˆ†å‘ç»™æ‰€æœ‰æµ‹è¯•å¼€å‘äººå‘˜ç¯å¢ƒã€‚ </li><li> ä¸ºä»€ä¹ˆè¿˜è¦å°†volume <code>/dump</code>æ‰”åˆ°initå®¹å™¨ä¸­ï¼ˆå¹¶ä¸”åœ¨è„šæœ¬ä¸­æ£€æŸ¥<code>/dump/version.txt</code>çš„å­˜åœ¨ï¼‰ï¼Ÿ å¦‚æœåœ¨å…¶ä¸‹è¿è¡Œçš„æœåŠ¡å™¨é‡æ–°å¯åŠ¨ï¼Œåˆ™å¯ä»¥è¿™æ ·åšã€‚ å®¹å™¨å°†é‡æ–°å¼€å§‹ï¼Œå¹¶ä¸”æ²¡æœ‰è¿›è¡Œæ­¤æ£€æŸ¥ï¼Œè½¬å‚¨å°†å†æ¬¡å¼€å§‹ä¸‹è½½ã€‚ å¦‚æœæˆ‘ä»¬å·²ç»å‡†å¤‡å¥½ä¸€æ¬¡è½¬å‚¨ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€æ¬¡å¯åŠ¨æ—¶ï¼ˆå¦‚æœæœåŠ¡å™¨é‡æ–°å¯åŠ¨ï¼‰ï¼Œ/ <code>/dump/version.txt</code>æ ‡å¿—<code>/dump/version.txt</code>å°†æä¾›æœ‰å…³æ­¤ä¿¡æ¯ã€‚ </li><li> ä»€ä¹ˆæ˜¯<code>db-dumps</code> ï¼Ÿ æˆ‘ä»¬ä½¿ç”¨dappæ”¶é›†å®ƒï¼Œå…¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><code>Dappfile</code></a>å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="plaintext hljs">dimg: "db-dumps" from: "ubuntu:16.04" docker: ENV: TERM: xterm ansible: beforeInstall: - name: "Install percona repositories" apt: deb: https://repo.percona.com/apt/percona-release_0.1-4.xenial_all.deb - name: "Add repository for borgbackup" apt_repository: repo="ppa:costamagnagianfranco/borgbackup" codename="xenial" update_cache=yes - name: "Add repository for mysql 5.6" apt_repository: repo: deb http://archive.ubuntu.com/ubuntu trusty universe state: present update_cache: yes - name: "Install packages" apt: name: "{{`{{ item }}`}}" state: present with_items: - openssh-client - mysql-server-5.6 - mysql-client-5.6 - borgbackup - percona-xtrabackup-24 setup: - name: "Add get_bindump.sh" copy: content: | {{ .Files.Get ".dappfiles/get_bindump.sh" | indent 8 }} dest: /get_bindump.sh mode: 0755 - name: "Add prepare_bindump.sh" copy: content: | {{ .Files.Get ".dappfiles/prepare_bindump.sh" | indent 8 }} dest: /prepare_bindump.sh mode: 0755</code> </pre> </li></ol><br><h2> æ­¥éª¤2ï¼šåœ¨å¼€å‘äººå‘˜ç¯å¢ƒä¸­å¯åŠ¨æ•°æ®åº“ </h2><br> åœ¨å¼€å‘äººå‘˜çš„æµ‹è¯•ç¯å¢ƒä¸­æ¨å‡ºMySQLæ•°æ®åº“æ—¶ï¼Œå®ƒåœ¨GitLabä¸­å…·æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œè¯¥æŒ‰é’®é€šè¿‡<code>RollingUpdate.maxUnavailable: 0</code>ç­–ç•¥ä½¿ç”¨MySQLå¯åŠ¨<i>éƒ¨ç½²çš„</i>é‡æ–°éƒ¨ç½²ï¼š <br><br><img src="https://habrastorage.org/webt/up/bv/j8/upbvj8ouflxbxyemaok3llra03a.png"><br><br><div class="spoiler">  <b class="spoiler_title">å¦‚ä½•å®æ–½ï¼Ÿ</b> <div class="spoiler_text"> åœ¨GitLabä¸­ï¼Œå½“æ‚¨å•å‡»<i>reload dbæ—¶</i> ï¼Œå°†<i>éƒ¨ç½²</i>å…·æœ‰ä»¥ä¸‹è§„èŒƒçš„éƒ¨ç½²ï¼š <br><br><pre> <code class="plaintext hljs">spec: strategy: rollingUpdate: maxUnavailable: 0</code> </pre> <br> å³ æˆ‘ä»¬å‘Šè¯‰Kubernetesæ›´æ–°<i>Deployment</i> ï¼ˆåœ¨ä¸‹é¢åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼‰ï¼Œå¹¶ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªå¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ ç”±äºåˆ›å»ºæ–°å£ç‚‰æ—¶ï¼Œå®ƒåœ¨å·¥ä½œæ—¶å…·æœ‰åˆå§‹åŒ–å®¹å™¨ï¼Œå› æ­¤æ–°å®¹å™¨<b>ä¸ä¼š</b>è¿›å…¥<i>è¿è¡Œ</i>çŠ¶æ€ï¼Œè¿™æ„å‘³ç€æ—§å®¹å™¨ä¼šç»§ç»­å·¥ä½œã€‚ è€Œä¸”åªæœ‰åœ¨MySQLæœ¬èº«å¯åŠ¨ï¼ˆå¹¶ä¸”å°±ç»ªæ¢æµ‹å™¨å·¥ä½œï¼‰çš„é‚£ä¸€åˆ»ï¼Œæµé‡æ‰åˆ‡æ¢åˆ°å®ƒï¼Œå¹¶ä¸”æ—§çš„ï¼ˆå¸¦æœ‰æ—§çš„æ•°æ®åº“ï¼‰æ‰è¢«åˆ é™¤ã€‚ <br><br> æœ‰å…³æ­¤æ–¹æ¡ˆçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ä»¥ä¸‹ææ–™ï¼š <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‰§è¡Œæ»šåŠ¨æ›´æ–°</a> <i>ï¼ˆKubernetesæ–‡æ¡£ï¼‰</i> ï¼› </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kuberneteséƒ¨ç½²çš„æ»šåŠ¨æ›´æ–°ï¼ˆé™ˆå¤§åº†</a> <i>ï¼‰</i> ï¼› </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kuberneteséƒ¨ç½²ç­–ç•¥</a> <i>ï¼ˆå®¹å™¨è§£å†³æ–¹æ¡ˆï¼‰</i> ã€‚ </li></ul></div></div><br> é€‰æ‹©çš„æ–¹æ³•ä½¿æˆ‘ä»¬èƒ½å¤Ÿç­‰å¾…ï¼Œç›´åˆ°ä¸‹è½½ï¼Œè§£å‹ç¼©å¹¶å¯åŠ¨æ–°çš„è½¬å‚¨ä¸ºæ­¢ï¼Œåªæœ‰åœ¨æ­¤ä¹‹åï¼Œæ—§çš„è½¬å‚¨æ‰ä¼šä»MySQLä¸­åˆ é™¤ã€‚ å› æ­¤ï¼Œå½“æˆ‘ä»¬å‡†å¤‡ä¸€ä¸ªæ–°çš„è½¬å‚¨æ—¶ï¼Œæˆ‘ä»¬æ­£åœ¨ä¸æ—§çš„åŸºåœ°å®‰é™åœ°å·¥ä½œã€‚ <br><br> æ­¤<i>éƒ¨ç½²</i>çš„initå®¹å™¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š <br><br><pre> <code class="bash hljs">curl <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$DUMP_URL</span></span></span><span class="hljs-string">"</span></span> | tar -C /var/lib/mysql/ -xvz</code> </pre> <br> å³ æˆ‘ä»¬ä¸‹è½½åœ¨æ­¥éª¤1ä¸­å‡†å¤‡çš„å‹ç¼©æ•°æ®åº“è½¬å‚¨ï¼Œå°†å…¶è§£å‹ç¼©åˆ°<code>/var/lib/mysql</code> ï¼Œç„¶ååœ¨<i>Deployment</i>ä¸‹å¯åŠ¨ï¼Œåœ¨è¯¥<i>éƒ¨ç½²</i>ä¸­ï¼ŒMySQLå°†ä½¿ç”¨å·²å‡†å¤‡å¥½çš„æ•°æ®å¯åŠ¨ã€‚ æ‰€æœ‰è¿™äº›å¤§çº¦éœ€è¦2ä¸ªå°æ—¶ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">éƒ¨ç½²å¦‚ä¸‹...</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">apiVersion: apps/v1beta1 kind: Deployment metadata: name: mysql spec: strategy: rollingUpdate: maxUnavailable: 0 template: metadata: labels: service: mysql spec: imagePullSecrets: - name: regsecret nodeSelector: dedicated: non-prod-db tolerations: - key: "dedicated" operator: "Equal" value: "non-prod-db" effect: "NoExecute" initContainers: - name: getdump image: mysql-with-getdump command: ["/usr/local/bin/getdump.sh"] resources: limits: memory: "6000Mi" cpu: "1.5" requests: memory: "6000Mi" cpu: "1.5" volumeMounts: - mountPath: /var/lib/mysql name: datadir - mountPath: /etc/mysql/debian.cnf name: debian-cnf subPath: debian.cnf env: - name: DUMP_URL value: "http://somedb-db-dump.infra-db.svc.cluster.local/mysql_bindump.tar.gz" containers: - name: mysql image: mysql:5.6 resources: limits: memory: "1024Mi" cpu: "1" requests: memory: "1024Mi" cpu: "1" lifecycle: preStop: exec: command: ["/etc/init.d/mysql", "stop"] ports: - containerPort: 3306 name: mysql protocol: TCP volumeMounts: - mountPath: /var/lib/mysql name: datadir - mountPath: /etc/mysql/debian.cnf name: debian-cnf subPath: debian.cnf env: - name: MYSQL_ROOT_PASSWORD value: "password" volumes: - name: datadir emptyDir: {} - name: debian-cnf configMap: name: somedb-debian-cnf --- apiVersion: v1 kind: Service metadata: name: mysql spec: clusterIP: None selector: service: mysql ports: - name: mysql port: 3306 protocol: TCP --- apiVersion: v1 kind: ConfigMap metadata: name: somedb-debian-cnf data: debian.cnf: | [client] host = localhost user = debian-sys-maint password = password socket = /var/run/mysqld/mysqld.sock [mysql_upgrade] host = localhost user = debian-sys-maint password = password socket = /var/run/mysqld/mysqld.sock</code> </pre> </div></div><br><h2> æ€»ç»“ </h2><br> äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬å§‹ç»ˆæœ‰<i>Deployment</i> ï¼Œå®ƒæ¯å¤©æ™šä¸Šæ¨å‡ºå¹¶æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š <br><br><ul><li> è·å–æ–°çš„æ•°æ®åº“è½¬å‚¨ </li><li> ä»¥æŸç§æ–¹å¼ä¸ºæµ‹è¯•ç¯å¢ƒä¸­çš„æ­£ç¡®æ“ä½œåšå¥½å‡†å¤‡ï¼ˆä¾‹å¦‚ï¼Œå¯¹æŸäº›è¡¨è¿›è¡Œtrankeytitï¼Œæ›¿æ¢å®é™…ç”¨æˆ·æ•°æ®ï¼Œåˆ›å»ºå¿…è¦çš„ç”¨æˆ·ç­‰ï¼‰ï¼› </li><li> é€šè¿‡æŒ‰CIä¸­çš„æŒ‰é’®ï¼Œæ¯ä¸ªå¼€å‘äººå‘˜éƒ½æœ‰æœºä¼šå°†è¿™æ ·ä¸€ä¸ªå‡†å¤‡å¥½çš„æ•°æ®åº“æ¨å‡ºåˆ°<i>Deploymentä¸­</i>çš„åç§°ç©ºé—´-ç”±äºå…¶ä¸­æä¾›äº†<i>Service</i> ï¼Œå› æ­¤æ•°æ®åº“å°†åœ¨<code>mysql</code>ä¸Šå¯ç”¨ï¼ˆä¾‹å¦‚ï¼Œå®ƒå¯èƒ½æ˜¯åç§°ç©ºé—´ä¸­æœåŠ¡çš„åç§°ï¼‰ã€‚ </li></ul><br> å¯¹äºæˆ‘ä»¬ç ”ç©¶çš„ç¤ºä¾‹ï¼Œä»çœŸå®å‰¯æœ¬åˆ›å»ºè½¬å‚¨å¤§çº¦éœ€è¦6ä¸ªå°æ—¶ï¼Œå‡†å¤‡â€œåŸºæœ¬æ˜ åƒâ€éœ€è¦7ä¸ªå°æ—¶ï¼Œè€Œåœ¨å¼€å‘äººå‘˜ç¯å¢ƒä¸­æ›´æ–°æ•°æ®åº“åˆ™éœ€è¦2ä¸ªå°æ—¶ã€‚ ç”±äºå‰ä¸¤ä¸ªåŠ¨ä½œæ˜¯â€œåœ¨åå°â€æ‰§è¡Œçš„ï¼Œå¹¶ä¸”å¯¹äºå¼€å‘äººå‘˜æ˜¯ä¸å¯è§çš„ï¼Œå› æ­¤å®é™…ä¸Šï¼Œä»–ä»¬å¯ä»¥<b>åœ¨ç›¸åŒçš„2ä¸ªå°æ—¶å†…</b>éƒ¨ç½²æ•°æ®åº“çš„ç”Ÿäº§ç‰ˆæœ¬ï¼ˆå¤§å°ä¸º1 TBï¼‰ã€‚ <br><br> è¯„è®ºä¸­æ¬¢è¿å¯¹æ‹Ÿè®®çš„è®¡åˆ’åŠå…¶ç»„æˆéƒ¨åˆ†æå‡ºç–‘é—®ï¼Œæ‰¹è¯„å’Œæ›´æ­£ï¼ <br><br>  PSå½“ç„¶ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨ä½¿ç”¨VMwareå’Œå…¶ä»–å·¥å…·çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥åˆ›å»ºè™šæ‹Ÿæœºå¿«ç…§å¹¶ä»å¿«ç…§å¯åŠ¨æ–°çš„virusalkaï¼ˆè¿™ç”šè‡³æ›´å¿«ï¼‰ï¼Œä½†æ˜¯æ­¤é€‰é¡¹ä¸åŒ…æ‹¬å‡†å¤‡åŸºç¡€ï¼Œä½†è¦è€ƒè™‘åˆ°ç»“æœä¼šç›¸åŒæ—¶é—´...æ›´ä¸ç”¨è¯´å¹¶éæ¯ä¸ªäººéƒ½æœ‰æœºä¼šæˆ–æ¸´æœ›ä½¿ç”¨å•†ä¸šäº§å“çš„äº‹å®ã€‚ <br><br><h2>  PPS </h2><br>  K8sæç¤ºå’ŒæŠ€å·§å‘¨æœŸä¸­çš„å…¶ä»–å†…å®¹ï¼š <br><br><ul><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NGINX Ingressä¸­çš„ä¸ªæ€§åŒ–é”™è¯¯é¡µé¢</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å°†é›†ç¾¤ä¸­å·¥ä½œçš„èµ„æºè½¬ç§»ç»™Helm 2ç®¡ç†äººå‘˜</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…³äºèŠ‚ç‚¹çš„åˆ†é…å’ŒWebåº”ç”¨ç¨‹åºä¸Šçš„è´Ÿè½½</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è®¿é—®å¼€å‘äººå‘˜ç«™ç‚¹</a> ã€‚â€ </li></ul><br> å¦è¯·å‚é˜…æˆ‘ä»¬çš„åšå®¢ï¼š <br><br><ul><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨dappå’ŒGitLab CIåœ¨Kubernetesä¸­æ„å»ºå’Œå®‰è£…åº”ç”¨ç¨‹åº</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»ƒä¹ dappã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬1éƒ¨åˆ†ï¼šæ„å»ºç®€å•çš„åº”ç”¨ç¨‹åº</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»ƒä¹ dappã€‚</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬2éƒ¨åˆ†ã€‚ä½¿ç”¨Helmåœ¨Kubernetesä¸­éƒ¨ç½²Dockeræ˜ åƒ</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetesä¸­çš„CockroachDB DBMSç¼–æ’</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘ä»¬åœ¨å°å‹é¡¹ç›®ä¸­ä½¿ç”¨Kubernetesçš„ç»éªŒ</a> â€ <i>ï¼ˆè§†é¢‘æŠ¥å‘Šï¼Œå…¶ä¸­åŒ…æ‹¬Kubernetesçš„æŠ€æœ¯è®¾å¤‡ä»‹ç»ï¼‰ï¼›</i> </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Kubernetesä¸€èµ·ä½¿ç”¨æ—¶æœ‰ç”¨çš„å®ç”¨ç¨‹åº</a> ã€‚â€ </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN417509/">https://habr.com/ru/post/zh-CN417509/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN417497/index.html">Schibsted Media Groupçš„æ•°æ®ç§‘å­¦ä¸“ä¸š4å¹´</a></li>
<li><a href="../zh-CN417501/index.html">Lifehacksåˆ¶é€ ä¸¤å±‚æ¿ï¼ˆLUTï¼‰</a></li>
<li><a href="../zh-CN417503/index.html">Webå¼€å‘äººå‘˜å¿…é¡»è®°ä½è¦åšSEO-Feng Shui</a></li>
<li><a href="../zh-CN417505/index.html">è‹±ç‰¹å°”å‘å¸ƒæ–°çš„MEå›ºä»¶æ¼æ´è¡¥ä¸</a></li>
<li><a href="../zh-CN417507/index.html">é“¾æ¥å’Œä¸‹è½½Mach-Oæ–‡ä»¶çš„æŠ€å·§</a></li>
<li><a href="../zh-CN417511/index.html">è‹±ç‰¹å°”æ”¶è´­eASIC-ç»“æ„åŒ–ASICå¼€å‘äººå‘˜</a></li>
<li><a href="../zh-CN417513/index.html">Pythonå’ŒJavaScriptä¸­çš„ç±»ä¼¼ç‰©ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN417515/index.html">æˆ‘åœ¨5å¹´å†…åˆ›é€ äº†100æ¬¾æ¸¸æˆæ‰€å­¦åˆ°çš„ä¸œè¥¿</a></li>
<li><a href="../zh-CN417517/index.html">è‹±ç‰¹å°”å†å²é¡µé¢ã€‚ ç…§ç‰‡çºªäº‹å’Œæµ‹éªŒ</a></li>
<li><a href="../zh-CN417521/index.html">æŸ¥çœ‹SSLè¯ä¹¦ä»¥ä½œåºŸ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>