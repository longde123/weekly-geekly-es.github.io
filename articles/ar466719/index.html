<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐น๏ธ ๐ฎ ๐ Superlight Profiling speed: ุงููุธุฑูุฉ ูุงูุชุทุจูู. ุงูุฌุฒุก 1 ๐ ๐ต๐ป โ๐ฝ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชุญูุฉ! ูู ุงูุนููุงู ุ ููุฏ ูููุช ุจุงููุนู ูุง ุณุฃุชุญุฏุซ ุนูู. ุณูููู ููุงู ุงููุซูุฑ ูู ุงููุชุดุฏุฏูู: 
 ุณููุงูุด Java ุ C ุ C ++ ุ ุงููุฌููุน ุ ููููุงู ูู Linux ุ ููููุงู ูู ููุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Superlight Profiling speed: ุงููุธุฑูุฉ ูุงูุชุทุจูู. ุงูุฌุฒุก 1</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/466719/" style=";text-align:right;direction:rtl">  ุชุญูุฉ!  ูู ุงูุนููุงู ุ ููุฏ ูููุช ุจุงููุนู ูุง ุณุฃุชุญุฏุซ ุนูู.  ุณูููู ููุงู ุงููุซูุฑ ูู ุงููุชุดุฏุฏูู: <br>  ุณููุงูุด Java ุ C ุ C ++ ุ ุงููุฌููุน ุ ููููุงู ูู Linux ุ ููููุงู ูู ููุงุฉ ูุธุงู ุงูุชุดุบูู.  ุณูููู ุฃูุถูุง ุจุชุญููู ุญุงูุฉ ุนูููุฉ ุ ูุฐูู ุณุชููู ุงูููุงูุฉ ูู ุซูุงุซุฉ ุฃุฌุฒุงุก ูุจูุฑุฉ (ุถุฎูุฉ ุฌุฏูุง). <br><br><img src="https://habrastorage.org/webt/mp/cl/er/mpclerfppp9jx5ciuziyfv-n8oa.png"><br><br>  ูู ุงูุจุฏุงูุฉ ุ ุณูุญุงูู ุฅุฎุฑุงุฌ ูู ุดูุก ูู ุงููููุงุช ุงูุชุนุฑูููุฉ ุงูุญุงููุฉ. <br>  ูู ุงูุฌุฒุก ุงูุซุงูู ุ ุณูููู ุจุฅูุดุงุก ููู ุชุนุฑูู ุตุบูุฑ ุฎุงุต ุจูุง ุ ูุณูุฑู ูู ุงูุฌุฒุก ุงูุซุงูุซ ููููุฉ ุชุญุฏูุฏ ูุง ูู ุบูุฑ ูุฃููู ูู ุงูููู ุงูุดุฎุตู ุ ูุฃู ุงูุฃุฏูุงุช ุงูุญุงููุฉ ููุณุช ููุงุณุจุฉ ุฌุฏูุง ููุฐุง ุงูุบุฑุถ.  ุฅุฐุง ููุช ุนูู ุงุณุชุนุฏุงุฏ ููุฐูุงุจ ุจูุฐู ุงูุทุฑููุฉ - ุฃูุง ูู ุงูุชุธุงุฑูู ุชุญุช ุฎูุถ :) <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ูุญุชูู </h3><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุช ููุณุงุฆู ุงูููู - ุงูุชุนุฑูู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููู ุชุนูู ุนููุงุช ุงููุญูููู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููู ูุบุงูุจุง ูุง ูุญุชุงุฌ ุฅูู ุนููุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงุฎุชูุงุฑ ููุดุฆ ูููุงุช ุงูุชุนุฑูู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนูู perf ูุจูุงุก ููู ุชุนุฑูู ุชุทุจูู Java.</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฒูุงุฏุฉ ูุนุฏู ุฃุฎุฐ ุงูุนููุงุช perf</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุชุฎุฏู (ุตุฑุงุญุฉ) ุงูุฃุญุฏุงุซ PMU / PEBS ุงูุฃุฌูุฒุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฎุต ูุตูุฑ</a> </li></ul><br><a name="1"></a><h3 style=";text-align:right;direction:rtl">  ุงูููุช ููุณุงุฆู ุงูููู - ุงูุชุนุฑูู </h3><br>  ูู ูุฌูุฉ ุงููุธุฑ ุงูููููุฉ ุ 1 ุซุงููุฉ ุตุบูุฑุฉ ุฌุฏูุง.  ููููุง ูุนูู ุฃู ุงูุซุงููุฉ ูู ูููุงุฑ ูุงูู ุซุงููุฉ ูุงููุฉ.  ูุฏุน ุงูุฃูุฑ ูุณุชุบุฑู ุญูุงูู 4 ุฏูุฑุงุช ูููุนุงูุฌุงุช ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ ููุท ูู ุงูุซุงููุฉ ุ ููู ุบุถูู ุซุงููุฉ ูุงุญุฏุฉ ุ ูุชู ุฅุฌุฑุงุก ุงููุซูุฑ ูู ุงูุฃุดูุงุก ูู ุงูููุจููุชุฑ ูุงูุชู ูููู ุฃู ุชุญุณู ุฃู ุชุฒูุฏ ูู ุณูุก ุญูุงุชูุง. <br><br>  ูููุชุฑุถ ุฃููุง ูููู ุจุชุทููุฑ ุชุทุจูู ูู ุญุฏ ุฐุงุชู ููู ุจูุง ููู ุงูููุงูุฉ ููุณุฑุนุฉ ุ ูุจุงููุณุจุฉ ูุจุนุถ ุฃุฌุฒุงุก ุงูููุฏ ุ ูุนุฏ ูุฐุง ุฃูุฑูุง ุจุงูุบ ุงูุฃูููุฉ ุจูุฌู ุนุงู.  ูุชู ุชูููุฐ ูุฐู ุงููุทุน ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฆุงุช ูู ูุงููุฑูุซุงููุฉ - ุจุณุฑุนุฉ ูุงููุฉ ุ ููููุง [ <i>ุฃูุณุงู ุงูููุฏ</i> ] ุชุคุซุฑ ุจุดูู ูุจุงุดุฑ ุนูู ูุฌุงุญ ุทูุจูุง ูููุฏุงุฑ ุงูุฃููุงู ุงูููุชุณุจุฉ ุฃู ุงูููููุฏุฉ.  ุนูู ุณุจูู ุงููุซุงู <br>  ุนูุฏ ุฅุฑุณุงู ุฃูุงูุฑ ูุฅุจุฑุงู ูุนุงููุงุช ุงูุตุฑู ุ ูุฏ ูููู ุชุฃุฎูุฑ 100 ูููุฑูุซุงููุฉ ุงูุชุจุงุฏู ููููู ุฑูุจู ุฃู ุฃูุซุฑ ุนูู ูู ูุนุงููุฉ ุ ูุงูุชู ุชูุชูู ุจูุงุญุฏ ุ ูุง ุงุซููู ุ ุฃู ุญุชู ูุง ูุงุฆุฉ. <br><br>  ูุชู ุชุนููู <b>ุงููููุฉ</b> ูู: ูู ูุงุญูุฉ ุ ุชุญุชุงุฌ ุฅูู ุฅุฑุณุงู ุฌููุน ุงูุทูุจุงุช ูู ููุณ ุงูููุช ุ ููู ูุงุญูุฉ ุฃุฎุฑู ุ ุฃุฑุณููุง ุญุชู ูููู ุงูุชุจุงูู ุจูู ุงูุฃูู ูุงูุฃุฎูุฑ ุถุฆููุงู.  ุฃู ุฃูู ูุงู ูู ุงูุถุฑูุฑู ุชุญุฏูุฏ ูุธููุฉ ุชุฑุณู ุฃูุงูุฑ ุฅูู ุงูุจูุฑุตุฉ.  ูููุฉ ูููุฐุฌูุฉ ุ ุจุงุณุชุซูุงุก ูุงุฑู ุจุณูุท ูุงุญุฏ: ููุช ุงูุชูููุฐ ุงููููุฒ ููุฐู ุงููุธููุฉ <i>ุฃูู ุจูุซูุฑ ูู 100 ูููุฑูู</i> . <br><br>  ุฏุนูุง ูููุฑ ูู ููููุฉ ุชุนุฑูููุง ููุงุฆุฉ ูุณุฎุฉ ูู ุฃุฌู ููู ูุง ูุญุฏุซ ูู ุงูุฏุงุฎู. <br>  ูุง ูุฌุจ ูุฑุงุนุงุชู ุนูุฏ ุงุฎุชูุงุฑ ูุฐู ุงูุฃุฏุงุฉุ <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงุฏุฑุงู ูุง ูุชู ุชูููุฐ ูุณู ุงูููุฏ ุงูุฐู ููููุง ุ ุฃู 100 ูููุฑูุซุงููุฉ ูุชู ุชูููุฐูุง ูู ููุงู ูุง ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุซุงููุฉ.  ููุฐุง ูู ููุนุฏ ุงูุงุฎุชุจุงุฑ ุ ููู ุงูุฅูุชุงุฌ ุฃูู ูู ุฐูู. </li><li style=";text-align:right;direction:rtl">  ุณูููู ูู ุงูุตุนุจ ุนุฒู ูุฐุง ุงูุฌุฒุก ูู ุงูุดูุฑุฉ ูู ุนูุงูุฉ microbenchmark ุ ูุฃูู ูุคุซุฑ ุนูู ุฌุฒุก ูุจูุฑ ูู ุงููุดุฑูุน ุ ูุญุชู ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุนุจุฑ ุงูุดุจูุฉ. </li><li style=";text-align:right;direction:rtl">  ูุฃุฎูุฑุงู ุ ูุงูุฃูู ูู ุฐูู ุ ุฃุฑูุฏ ุฃู ูุชูุงูู ููู ุงูุชุนุฑูู ุงููุงุชุฌ ูุน ุงูุณููู ุงูุฐู ุณูููู ุนูู ุฎูุงุฏู ุงูุฅูุชุงุฌ ูุฏููุง. </li></ol><br>  ููู ูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ูู ูุฐู ุงููุฑูู ุงูุฏูููุฉ ูุชุนุฑู ุจุทุฑููุฉ ุตุญูุญุฉ ุนูู ุทุฑููุฉ ุงููุงุฆุฏุฉุ <br><br>  ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูููู ุชูุณูู ุฌููุน ูููุงุช ุงูุชุนุฑูู ุฅูู ูุฌููุนุชูู ูู <i>ุฃุฏูุงุช ุงูููุงุณ</i> ุฃู <i>ุฃุฎุฐ ุงูุนููุงุช</i> .  ุฏุนููุง ูููุฑ ูู ูู ูุฌููุนุฉ ุนูู ุญุฏุฉ. <br><br>  ุชุณุงูู <b>ูููุงุช ุชุนุฑูู ุงูุฃุฏูุงุช</b> ูู ุงููุซูุฑ ูู ุงููููุงุช ุงูุนุงูุฉ ูุฃููุง ุชุนุฏู ุฑูุฒูุง ุงูุซุงููู ูุชุถูู ุณุฌู ุชูููุช ููู.  ููู ููุง ูุฅู ุงูุนุงุฆู ุงูุฑุฆูุณู ููุซู ูุฐู ุงูููุงูุญ: ูููู ุฃู ุชุคุซุฑ ุจุดูู ูุจูุฑ ุนูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุงุจูุฉ ููุชูููุฐ.  ูุชูุฌุฉ ูุฐูู ุ ุณูููู ูู ุงูุตุนุจ ุชุญุฏูุฏ ููุฏุงุฑ ุชุทุงุจู ููู ุงูุชุนุฑูู ุงููุงุชุฌ ูุน ุงูุณููู ุนูู ุฎูุงุฏู ุงูุฅูุชุงุฌ: ูุฏ ุชุนูู ุจุนุถ ุงูุชุญุณููุงุช ุจุดูู ูุฎุชูู ุ ูุจุนุถูุง ูุญุฏุซ ุ ูุงูุจุนุถ ุงูุขุฎุฑ ูุง ูุนูู.  ุฑุจูุง ุ ุนูู ูุทุงูุงุช ุฒูููุฉ ุฃุฎุฑู - ุงูุซูุงูู ูุงูุฏูุงุฆู ูุงูุณุงุนุงุช - ุณูู ูุญุตู ุนูู ุจูุงูุงุช ุชูุซูููุฉ.  ููู ุนูู ูุทุงู 100 ฮผs ุ ูููู ุฃู ูุคุฏู ุงูุชุญุณูู ุงูููุดูุบููู ุฃู ุงููุงุดู ุฅูู ุฃู ูููู ุงูููู ุงูุดุฎุตู ุบูุฑ ููุซู ุชูุงููุง.  ูุฐูู ุฏุนููุง ูููู ูุธุฑุฉ ูุงุญุตุฉ ุนูู ูุฌููุนุฉ ุฃุฎุฑู ูู ุงููุญูููู. <br><br>  ุชุณุงูู <b>ูููุงุช ุชุฎุตูุต ุงูุนููุงุช</b> ุฅูุง ูู ุงูุญุฏ ุงูุฃุฏูู ุฃู ุงููุชูุณุท.  ูุง ุชุคุซุฑ ูุฐู ุงูุฃุฏูุงุช ุจุดูู ูุจุงุดุฑ ุนูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุงุจูุฉ ููุชูููุฐ ุ ููุชุทูุจ ุงุณุชุฎุฏุงููุง ูุฒูุฏูุง ูู ุงูุงูุชูุงู ููู.  ูุฐูู ุ ุณูู ูุชุทุฑู ุฅูู ุงููุญูููู.  ุฏุนููุง ูุฑู ูุง ูู ุงูุจูุงูุงุช ูุจุฃู ุดูู ุณูุชููู ูููู. <br><br><a name="2"></a><h3 style=";text-align:right;direction:rtl">  ููู ูุนูู ุงููุญูููู ูุฃุฎุฐ ุงูุนููุงุชุ </h3><br>  ูููู ููู ูุนูู ููุดุฆ ูููุงุช ุงูุชุนุฑูู ุฃุฎุฐ ุงูุนููุงุช ุ ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ุงููุซุงู ุงูุชุงูู - <b>ุงุณุชุฏุนุงุก</b> ุงูุฃุณููุจ <b>sendToMoex</b> ุนุฏุฉ ุทุฑู ุฃุฎุฑู.  ูุญู ููุธุฑ: <br><br><pre style=";text-align:right;direction:rtl"><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> sendToMoex() { a.qqq(); b.doo(); c.ccc() } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> doo() { da(); db(); }</code> </pre> <br>  ุฅุฐุง ุฑุงูุจูุง ุญุงูุฉ ููุฏุณ ุงูุงุณุชุฏุนุงุกุงุช ููุช ุชูููุฐ ูุฐุง ุงููุณู ูู ุงูุจุฑูุงูุฌ ููููุง ุจุชุณุฌููู ุจุดูู ุฏูุฑู ุ ูุณูุญุตู ุนูู ุงููุนูููุงุช ูู ุงููููุฐุฌ ุงูุชุงูู ุชูุฑูุจูุง: <br><br><img src="https://habrastorage.org/webt/gl/je/y5/gljey5esfyih7lqm1yjvpaxfese.png"><br><br>  ูุฐู ูุฌููุนุฉ ูู ููุฏุณุงุช ุงูุงุชุตุงู.  ุจุงูุชุฑุงุถ ุฃู ุงูุนููุงุช ููุฒุนุฉ ุจุงูุชุณุงูู ุ ูุดูุฑ ุนุฏุฏ ุงูููุฏุณุงุช ุงููุชุทุงุจูุฉ ุฅูู ููุช ุงูุชูููุฐ ุงููุณุจู ููุทุฑููุฉ ุงูุชู ุชูุฌุฏ ุฃุนูู ุงูุฑุตุฉ. <br><br>  ูู ูุฐุง ุงููุซุงู ุ ุชู ุชูููุฐ ุทุฑููุฉ Da ุจูุฏุฑ ุทุฑููุฉ C.ccc ุ ููุฐุง ูุฒูุฏ ูุฑุชูู ุนู ุทุฑููุฉ Db. ููุน ุฐูู ุ ูุฏ ูุง ูููู ุงูุงูุชุฑุงุถ ุจุฃู ุชูุฒูุน ุงูุนููุงุช ุตุญูุญูุง ุชูุงููุง ุ ููู ุซู ุณูููู ุชูุฏูุฑ ููุช ุงูุชูููุฐ ุบูุฑ ุตุญูุญ. <br><br><a name="3"></a><h3 style=";text-align:right;direction:rtl">  ูู ูุฑุฉ ูุญุชุงุฌ ุฅูู ุฃุฎุฐ ุนููุงุชุ </h3><br>  ูููุชุฑุถ ุฃููุง ูุฑูุฏ ุฃู ูุฃุฎุฐ 1000 ุนููุฉ ูู 100 ูููุฑูุซุงููุฉ ูููู ูุง ุชู ูุนุจู ุจุงูุฏุงุฎู.  ุจุนุฏ ุฐูู ุ ูุญุณุจ ุจูุณุจ ุจุณูุทุฉ ุฃููุง ุฅุฐุง ููุง ุจุญุงุฌุฉ ุฅูู ุฅุฌุฑุงุก 1000 ุนููุฉ ูู 100 ุs ุ ูุณุชููู 10 ููุงููู ุนููุฉ ูู ุซุงููุฉ ูุงุญุฏุฉ ุฃู 1000000 ุนููุฉ / ุซุงููุฉ. <br><br><img src="https://habrastorage.org/webt/x6/rw/2j/x6rw2jbbfxfouax9ncy8hkfn3nq.png"><br><br>  ุฅุฐุง ุฃุฎุฐูุง ุนููุงุช ุจูุฐู ุงูุณุฑุนุฉ ุ ูุนูุฏ ุชูููุฐ ุงูููุฏ ุณูุฌูุน 1000 ุนููุฉ ููุฌูุน ููููู ูุง ูุฌุญ ุจุณุฑุนุฉ ุฃู ุจุจุทุก.  ุจุนุฏ ุฐูู ุ ุณูู ูููู ุจุชุญููู ุงูุฃุฏุงุก ูุถุจุท ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. <br><br>  ููุน ุฐูู ุ ูุฅู ุชุฑุฏุฏ 10 ููููู ุนููุฉ ูู ุงูุซุงููุฉ ูู ุงููุซูุฑ.  ูุฅุฐุง ูุดููุง ูู ุชุญููู ูุซู ูุฐู ุงูุณุฑุนุฉ ูู ุงูุชูููุท ูู ุงูุจุฏุงูุฉุ  ุงูุชุฑุถ ุฃููุง ุฌูุนูุง 10 ุนููุงุช ููุท ูู 10 ุนููุงุช ุ ูููุณ 1000. ูู ูุฐู ุงูุญุงูุฉ ุ ูุญุชุงุฌ ุฅูู ุงูุชุธุงุฑ ุงูุชูููุฐ ุงูุชุงูู ูุฑูุฒ ุงูููู ุงูุชุนุฑููู ุ ูุงูุฐู ุณูุญุฏุซ ุจุนุฏ ุซุงููุฉ ูุงุญุฏุฉ (ุจุนุฏ ูู ุดูุก ุ ูุชู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููููุฒุฉ ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุซุงููุฉ).  ูุฐูู ุณูู ูููู ุจุฌูุน 10 ุนููุงุช ุฃุฎุฑู.  ูุธุฑูุง ูุชูุฒูุนูุง ุจุงูุชุณุงูู ูุนูุง ุ ูููู ุฏูุฌูุง ูู ูุฌููุนุฉ ูุดุชุฑูุฉ.  ูููู ุงูุงูุชุธุงุฑ ุญุชู ูุชู ุชูููุฐ ุงูููุฏ ุงูุฌุงูุจู 1000/10 = 100 ูุฑุฉ ุ ูุณูููู ุจุฌูุน 1000 ุนููุฉ ูุทููุจุฉ (10 ุนููุงุช ููู ูููุง 100 ูุฑุฉ). <br><br><a name="4"></a><h3 style=";text-align:right;direction:rtl">  ุงุฎุชูุงุฑ ููุดุฆ ูููุงุช ุงูุชุนุฑูู </h3><br>  ูุณูุญูู ุจูุฐู ุงููุนุฑูุฉ ุงููุธุฑูุฉ ุ ุฏุนูุง ููุชูู ุฅูู ุงูููุงุฑุณุฉ. <br><br>  ุฎุฐ <b>ููุดุฆ ูููุงุช ุงูุชุนุฑูู.</b>  ุฃุฏุงุฉ ุฑุงุฆุนุฉ (ุชุณุชุฎุฏู ุงุณุชุฏุนุงุก ุงูุฌูุงุฒ ุงูุธุงูุฑู AsyncGetCallTrace) ุงูุชู ุชุฌูุน ููุฏุณ ุงูุงุณุชุฏุนุงุกุงุช ุญุชู ุชุนูููุฉ ุฑูุฒ ุงูุจุงูุช ูุฌูุงุฒ Java ุงูุธุงูุฑู.  ูุนุฏู ุฃุฎุฐ ุงูุนููุงุช ุงููุชุฒุงูู ุงูุฃุตูู ูู <i>1000 ุนููุฉ ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ</i> . <br><br>  ุณูุญู ูุณุจุฉ ุจุณูุทุฉ: 1000000 ุนููุฉ / ุซุงููุฉ - 1 ุซุงููุฉ ุ 1000 ุนููุฉ / ุซุงููุฉ - X ุซุงููุฉ. <br>  ููุฏ ุญุตููุง ุนูู ุฐูู ูู ุงูุชูุฑุงุฑ ุงูููุงุณู ูุฃุฎุฐ ุงูุนููุงุช ูู async-profiler ุ ูุณูู ูุณุชุบุฑู ุงูุชูููุท ุญูุงูู 3 ุณุงุนุงุช.  ูุฐุง ููุช ุทููู  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ุฃุฑุบุจ ูู ุชุฌููุน ููู ุงูุชุนุฑูู ูู ุฃุณุฑุน ููุช ูููู ุ ูุจุงุดุฑุฉ ุจุณุฑุนุฉ ูุงุฆูุฉ. <br><br>  ุฏุนููุง ูุญุงูู ุฑูุน ุชุฑุฏุฏ ุงูุชุดุบูู <b>Async-profiler</b> .  ููููุงู ุจุฐูู ุ ูู ุงูููู ุงูุชูููุฏู ุ ูุฌุฏ ุงูุนูุงูุฉ <code>-i</code> ุ ุงูุชู ุชุญุฏุฏ ุงููุงุตู ุงูุฒููู ูุฃุฎุฐ ุงูุนููุงุช.  ุฏุนูุง ูุญุงูู ุชุนููู ุนูุงูุฉ <code>-i1</code> (1 ูุงููุซุงููุฉ) ุ ุฃู <code>-i0</code> ุจุดูู ุนุงู ุ ุจุญูุซ ุนููุงุช ููุดุฆ ูููุงุช ุงูุชุนุฑูู ุฏูู ุชููู.  ุญุตูุช ุนูู ุชุฑุฏุฏ ุญูุงูู 2.5 ุฃูู ุนููุฉ ูู ุงูุซุงููุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชููู ุงููุฏุฉ ุงูุฅุฌูุงููุฉ ููุชูุตูู ุญูุงูู ุณุงุนุฉ ูุงุญุฏุฉ.  ุจุงูุทุจุน ุ ููุณ 3 ุณุงุนุงุช ุ ูููู ุฃูุถุง ููุณุช ุณุฑูุนุฉ ุฌุฏุง.  ูุจุฏู ุฃูู ูู ุฃุฌู ุชุญููู ุณุฑุนุงุช ุงูุชูููุท ุงููุทููุจุฉ ุ ุชุญุชุงุฌ ุฅูู ุงูููุงู ุจุดูุก ูุฎุชูู ููุนููุง ุ ูููุตูู ุฅูู ูุณุชูู ุฌุฏูุฏ. <br><br>  ูุชุญููู ุชุฑุฏุฏุงุช ุฃุนูู ุจุดูู ููุญูุธ ุ ูุฌุจ ุนููู ุงูุชุฎูู ุนู ุงุณุชุฏุนุงุก AsyncGetCallTrace ูุงุณุชุฎุฏุงู <b>perf</b> ุ ููู ุจุฑููุงูู Linux ุงููุชูุฑุบ ุงูููุฌูุฏ ูู ูู ุชูุฒูุน ููุธุงู Linux.  ููุน ุฐูู ุ ูุง ูุนุฑู perf ุดูุฆูุง ุนู Java ุ ููุง ูุฒุงู ูุชุนูู ุนูููุง ุชุฏุฑูุจ perf ููุนูู ูุน Java.  ูู ุบุถูู ุฐูู ุ ุฏุนููุง ูุญุงูู ุงูุฑูุถ ุนูู ูุฐุง ุงููุญู ุงููุฎูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">$ perf record โF <span class="hljs-number"><span class="hljs-number">10000</span></span> -p PID -g -- sleep <span class="hljs-number"><span class="hljs-number">1</span></span> [ perf record: Woken up <span class="hljs-number"><span class="hljs-number">1</span></span> times to write data ] [ perf record: .. <span class="hljs-number"><span class="hljs-number">0.215</span></span> MB perf.data (<span class="hljs-number"><span class="hljs-number">4032</span></span> samples) ]</code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงููุฒูุฏ ุนู ุงูุชุฏููู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <i>ุณุฌู perf</i> ูุนูู ุฃููุง ูุฑูุฏ ุชุณุฌูู ููู ุชุนุฑูู. </li><li style=";text-align:right;direction:rtl">  ุนูุงูุฉ <code>-F</code> ู ุงููุณูุทุฉ 10ุ000 ูู ูุนุฏู ุฃุฎุฐ ุงูุนููุงุช. </li><li style=";text-align:right;direction:rtl">  ุชุดูุฑ ุนูุงูุฉ <code>-p</code> ุฅูู ุฃููุง ูุฑูุฏ ููู ุชุนุฑูู PID ุงููุญุฏุฏ ูุนูููุฉ Java ุงูุฎุงุตุฉ ุจูุง ููุท. </li><li style=";text-align:right;direction:rtl">  ุนูุงูุฉ <code>-g</code> ูุณุคููุฉ ุนู ุฌูุน ููุฏุณุงุช ุงูููุงููุงุช. </li><li style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ูู ุญุงูุฉ <i>ุงูููู 1 ุ</i> ููุตุฑ ุฅุฏุฎุงู ููู ุงูุชุนุฑูู ุนูู ุซุงููุฉ ูุงุญุฏุฉ. </li></ul></div></div><br>  ููุงุฐุง ูุญุชุงุฌ ุฅูู ุฌูุน ููุฏุณุงุช ุงูููุงููุงุชุ  ูุญู ูุญุฏุฏ ูู ุดูุก ุนูู ุงูุชูุงูู ุ ุซู ูู ุงูุจูุงูุงุช ุงูุชู ุชู ุฌูุนูุง ูุณุชุฎุฑุฌ ุงูุฌุฒุก ุงูุฐู ููููุง (ุงูุทุฑููุฉ ุงููุณุคููุฉ ุนู ุชุดููู ูุฅุฑุณุงู ุงูุทูุจุงุช).  ุนูุงูุฉ ุฃู ุงูุนููุฉ ุงูุชู ุชู ุฌูุนูุง ุชูุชูู ุฅูู ุงูุจูุงูุงุช ุงูุชู ููุชู ุจูุง ูู ูุฌูุฏ ุฅุทุงุฑ ููุฏุณ <b>ุงุณุชุฏุนุงุก</b> ุงูุฃุณููุจ <b>sendToMoex</b> . <br><br><a name="5"></a><h3 style=";text-align:right;direction:rtl">  ุชุนูู perf ูุจูุงุก ููู ุชุนุฑูู ุชุทุจูู Java. </h3><br>  ูููู ุจุชูููุฐ ุงูุฃูุฑ perf record ... ุ ุงูุชุธุฑ 1 ุซุงููุฉ ุ ููู ุจุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู perf ููุนุฑูุฉ ูุง ุชู ููุญุฉ ุนููุ  ูุณูุฑู ุดูุฆูุง ุบูุฑ ูุงุถุญ ุฌุฏูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">$ perf script java <span class="hljs-number"><span class="hljs-number">8079</span></span> <span class="hljs-number"><span class="hljs-number">2008793.746571</span></span>: <span class="hljs-number"><span class="hljs-number">3745505</span></span> cycles:uppp: <span class="hljs-number"><span class="hljs-number">7</span></span>fa1e88b53f8 [unknown] (<span class="hljs-regexp"><span class="hljs-regexp">/tmp/</span></span>perf<span class="hljs-number"><span class="hljs-number">-11038.</span></span>map) java <span class="hljs-number"><span class="hljs-number">8079</span></span> <span class="hljs-number"><span class="hljs-number">2008793.747565</span></span>: <span class="hljs-number"><span class="hljs-number">3728336</span></span> cycles:uppp: <span class="hljs-number"><span class="hljs-number">7</span></span>fa1e88b5372 [unknown] (<span class="hljs-regexp"><span class="hljs-regexp">/tmp/</span></span>perf<span class="hljs-number"><span class="hljs-number">-11038.</span></span>map) java <span class="hljs-number"><span class="hljs-number">8079</span></span> <span class="hljs-number"><span class="hljs-number">2008793.748613</span></span>: <span class="hljs-number"><span class="hljs-number">3731147</span></span> cycles:uppp: <span class="hljs-number"><span class="hljs-number">7</span></span>fa1e88b53ef [unknown] (<span class="hljs-regexp"><span class="hljs-regexp">/tmp/</span></span>perf<span class="hljs-number"><span class="hljs-number">-11038.</span></span>map)</code> </pre><br>  ูุจุฏู ุฃููุง ุนูุงููู ุ ููู ูุง ุชูุฌุฏ ุฃุณูุงุก ูุฃุณุงููุจ Java.  ูุฐูู ุ ุชุญุชุงุฌ ุฅูู ุชุนููู perf ููุทุงุจูุฉ ูุฐู ุงูุนูุงููู ูุน ุฃุณูุงุก ุงูุทุฑู. <br><br>  ูู ุนุงูู C ู C ++ ุ ูุชู ุงุณุชุฎุฏุงู ูุนูููุงุช ุชุตุญูุญ ุงูุฃุฎุทุงุก ุงููุฒุนููุฉ ููุทุงุจูุฉ ุงูุนูุงููู ูุฃุณูุงุก ุงููุธุงุฆู.  ูุชู ุชุฎุฒูู ุงููุฑุงุณูุงุช ูู ูุณู ุฎุงุต ูู ุงูููู ุงููุงุจู ููุชูููุฐ: ุทุฑููุฉ ูุงุญุฏุฉ ุชููู ูู ูุซู ูุฐู ุงูุนูุงููู ุ ุทุฑููุฉ ุฃุฎุฑู ุชููู ูู ุนูุงููู ุฃุฎุฑู.  Perf ูุณุญุจ ูุฐู ุงููุนูููุงุช ููููู ุจุฅุฌุฑุงุก ุชุนููู. <br><br>  ูู ุงููุงุถุญ ุฃู ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู JIT ููุฌูุงุฒ ุงูุธุงูุฑู ูุง ูููุดุฆ ูุนูููุงุช ุชุตุญูุญ ุงูุฃุฎุทุงุก ุจูุฐุง ุงูุชูุณูู.  ูุง ูุฒุงู ุฃูุงููุง ุทุฑููุฉ ุฃุฎุฑู - ูุชุงุจุฉ ุงูุจูุงูุงุช ุนูู ุงููุฑุงุณูุงุช ุงูุฎุงุตุฉ ุจุงูุนูุงููู ูุฃุณูุงุก ุงูุทุฑู ูู ููู ุฎุฑูุทุฉ perf ุฎุงุต ุ ูุงูุฐู ุณูุนุงููู perf ูุฅุถุงูุฉ ุฅูู ูุนูููุงุช ุชุตุญูุญ ุงูุฃุฎุทุงุก ุงูููุฑูุกุฉ.  ูุฌุจ ุฃู ูููู ููู perf-map ูุฐุง ูู ูุฌูุฏ tmp ูุฃู ูุญุชูู ุนูู ุจููุฉ ุงูุจูุงูุงุช ุงูุชุงููุฉ: <br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><tbody><tr><th>  ุทุฑููุฉ ุฑูุฒ ุจุฏุงูุฉ ุงูุนููุงู </th><th>  ุทูู ุงูููุฏ </th><th>  ุงุณู ุงูุทุฑููุฉ </th></tr><tr><td>  7f99a911d600 </td><td>  120 </td><td>  java.util.AbstractCollection. &lt;init&gt; </td></tr><tr><td>  7f99a911d9c0 </td><td>  180 </td><td>  java.util.AbstractList. &lt;init&gt; </td></tr><tr><td>  7f99a911de80 </td><td>  5c0 </td><td>  java.util.Arrays.copyOf </td></tr><tr><td>  7f99a911ed40 </td><td>  140 </td><td>  java.util.ArrayList $ Itr.hasNext </td></tr><tr><td>  7f99a911f200 </td><td>  3e0 </td><td>  java.util.ArrayList $ Itr.next <br></td></tr></tbody></table></div><br>  ุงูุนููุฏ ุงูุฃูู ูู ุนููุงู ุจุฏุงูุฉ ุฑูุฒ ุงูุทุฑููุฉ ุ ูุงูุซุงูู ูู ุทููู ุ ูุงูุนููุฏ ุงูุซุงูุซ ูู ุงุณู ุงูุทุฑููุฉ. <br><br>  ูุฐูู ุ ูุญู ุจุญุงุฌุฉ ุฅูู ุฅูุดุงุก ููู ููุงุซู.  ูู ุงููุงุถุญ ุฃู ูุฐุง ูุง ูููู ุงูููุงู ุจู ูุฏูููุง (ููู ูุนุฑู ูู ุนูุงููู ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู JIT ุงูุฐู ุณูุถุน ุงูููุฏ) ุ ูุฐูู ุณูู ูุณุชุฎุฏู ุงูุจุฑูุงูุฌ ุงููุตู create-java-perf-map.sh ูู ูุดุฑูุน perf-map-agent ุ ูุชูุฑูุฑู ูู PID ูุนูููุฉ Java ุงูุฎุงุตุฉ ุจูุง .  ุงูููู ุฌุงูุฒ ุ ูุงูุชุญูู ูู ูุญุชููุงุชู ุ ูุชุดุบูู perf-script ูุฑุฉ ุฃุฎุฑู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">$ perf script java <span class="hljs-number"><span class="hljs-number">8080</span></span> <span class="hljs-number"><span class="hljs-number">1895245.867498</span></span>: cycles:uppp: <span class="hljs-number"><span class="hljs-number">7</span></span>fb2dd10f527 Loop3.doRecursiveCall (<span class="hljs-regexp"><span class="hljs-regexp">/tmp/</span></span>perf<span class="hljs-number"><span class="hljs-number">-8079.</span></span>map) java <span class="hljs-number"><span class="hljs-number">8080</span></span> <span class="hljs-number"><span class="hljs-number">1895245.868176</span></span>: <span class="hljs-number"><span class="hljs-number">2127960</span></span> cycles:uppp: <span class="hljs-number"><span class="hljs-number">7</span></span>fb2dd10f57f Loop3.doRecursiveCall (<span class="hljs-regexp"><span class="hljs-regexp">/tmp/</span></span>perf<span class="hljs-number"><span class="hljs-number">-8079.</span></span>map) java <span class="hljs-number"><span class="hljs-number">8080</span></span> <span class="hljs-number"><span class="hljs-number">1895245.868737</span></span>: <span class="hljs-number"><span class="hljs-number">1959990</span></span> cycles:uppp: <span class="hljs-number"><span class="hljs-number">7</span></span>fb2dd10f627 Loop3.doRecursiveCall (<span class="hljs-regexp"><span class="hljs-regexp">/tmp/</span></span>perf<span class="hljs-number"><span class="hljs-number">-8079.</span></span>map)</code> </pre> <br>  ููููุง!  ูุฑู ุฃุณูุงุก ุฃุณุงููุจ ุฌุงูุง!  ูุง ุญุฏุซ ููุชู: ูููุง ุจุชุฏุฑูุณ ููู ุงูุชุนุฑูู perf ุ ุงูุฐู ูุง ูุนุฑู ุดูุฆูุง ุนู Java ุ ูููู ุชุนุฑูู ุชุทุจูู Java ุนุงุฏู ููุดุงูุฏุฉ ุทุฑู ุฌุงูุง ุงูุณุงุฎูุฉ ููุฐุง ุงูุชุทุจูู! <br><br>  ููุน ุฐูู ุ ูุชุญููู ุฃุฏุงุก ุฌุฒุก ุงูุจุฑูุงูุฌ ุงูุฐู ูููู ุจุงุณุชุฌูุงุจู ุ ููุณ ูุฏููุง ูุง ูููู ูู ููุฏุณ ุงูุงุณุชุฏุนุงุกุงุช ูุชุตููุฉ ุงูุจูุงูุงุช ุงููููุฉ ูู ุฌููุน ุงูุนููุงุช ุงูุชู ุชู ุฌูุนูุง. <br><br>  <b>ููููุฉ ุงูุญุตูู ุนูู ููุฏุณ ููุงููุฉุ</b> <br><br>  ุฃูุช ุงูุขู ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุดูุก ุขุฎุฑ ุจุงุณุชุฎุฏุงู perf ุฃู ุฌูุงุฒ ุงูุชุฑุงุถู ููุญุตูู ุนูู ููุฏุณุงุช ุงูููุงููุงุช.  ูููู ูุง ูุฌุจ ุงูููุงู ุจู ุ ุฏุนูุง ูุชุฑุงุฌุน ููุฑู ููู ุชุนูู ุงูููุฏุณ ุจุดูู ุนุงู.  ุชุฎูู ุฃู ูุฏููุง ุซูุงุซ ูุธุงุฆู f1 ุ f2 ุ f3.  ุนูุงูุฉ ุนูู ุฐูู ุ ุชุณุชุฏุนู f1 f2 ุ ู f2 ุชุณุชุฏุนู f3. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> f1() { f2(); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> f2() { f3(); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> f3() { ... }</code> </pre> <br>  ูู ุงูููุช ุงูุฐู <code>f3</code> ุชูููุฐ ุงููุธููุฉ <code>f3</code> ุ ุฏุนูุง ูุฑู ุญุงูุฉ ุงูููุฏุณ ูู.  ูุฑู ุณุฌู <code>rsp</code> ุ ูุงูุฐู ูุดูุฑ ุฅูู ุงูุฌุฒุก ุงูุนููู ูู ุงูููุฏุณ.  ูุนูู ุฃูุถูุง ุฃู ุงูุฑุตุฉ ููุง ุนููุงู ุฅุทุงุฑ ุงูุฑุตุฉ ุงูุณุงุจู.  ูููู ูููููู ุงูุญุตูู ุนูู ููุฏุณ ุงุณุชุฏุนุงุกุ <br><br>  ุฅุฐุง ุงุณุชุทุนูุง ุจุทุฑููุฉ ูุง ุงูุญุตูู ุนูู ุนููุงู ูุฐู ุงูููุทูุฉ ุ ูุนูุฏุฆุฐ ูููููุง ุฃู ูุชุฎูู ุงูููุฏุณ ููุงุฆูุฉ ูุชุตูุฉ ุจุจุณุงุทุฉ ูููู ุชุณูุณู ุงูููุงููุงุช ุงูุชู ุฃูุตูุชูุง ุฅูู ููุทุฉ ุงูุชูููุฐ ุงูุญุงููุฉ. <br><br>  ูุงุฐุง ูุญุชุงุฌ ููุฐุงุ  ูุญุชุงุฌ ุฅูู ุณุฌู rbp ุฅุถุงูู ุณูู ูุดูุฑ ุฅูู ุงูููุทูุฉ ุงูุตูุฑุงุก.  ุงุชุถุญ ุฃู ุณุฌู rbp ูุณูุญ ูู perf ุจุงูุญุตูู ุนูู ููุฏุณ ุงูุงุชุตุงู ุ ูููู ุงูุชุณูุณู ุงูุฐู ุฃูุตููุง ุฅูู ุงูููุทุฉ ุงูุญุงููุฉ.  ุฃูุตู ุจูุฑุงุกุฉ ูุฐู ุงูุชูุงุตูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฌูุฉ ุงููุธุงู ุงูุซูุงุฆูุฉ ููุชุทุจูู V.</a>  ูุตู ููู ูุชู ุงุณุชุฏุนุงุก ุงูุฃุณุงููุจ ูู Linux. <br><br><img src="https://habrastorage.org/webt/0m/0w/vx/0m0wvx8wcaplslb7k5illbb4hbm.png"><br><br>  ููุฏ ููููุง ูุดููุชูุง.  ูุญุชุงุฌ ุฅูู ุฅุฌุจุงุฑ ุงูุฌูุงุฒ ุงูุธุงูุฑู ุนูู ุงุณุชุฎุฏุงู ุณุฌู rbp ูุบุฑุถู ุงูุฃุตูู - ููุคุดุฑ ุฅูู ุจุฏุงูุฉ ุฅุทุงุฑ ุงูููุฏุณ.  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ูุฌุจ ุฃู ุชุณุชุฎุฏู ุจุฑูุงูุฌ ุงูุชุญููู ุงูุจุฑูุฌู JIT ุณุฌู rbp.  ููุงู ุฅุดุงุฑุฉ PreserveFramePointer ูู ุงูุฌูุงุฒ ุงูุธุงูุฑู ููุฐุง.  ุนูุฏ ุชูุฑูุฑ ูุฐู ุงูุนูุงูุฉ ุฅูู ุงูุฌูุงุฒ ุงูุธุงูุฑู ุ ุณูุจุฏุฃ ุงูุฌูุงุฒ ุงูุธุงูุฑู ูู ุงุณุชุฎุฏุงู ุณุฌู rbp ูุบุฑุถู ุงูุชูููุฏู.  ุซู ูููู ุฃู ุชุฏูุฑ Perf ุงูููุฏุณ.  ูุญุตููุง ุนูู ููุฏุณ ููุงููุฉ ุญููููุฉ ูู ุงูููู ุงูุดุฎุตู.  ุณุงูู ุงูุนูู ูู ูุจู ุจุฑููุฏุงู ุฌุฑูุฌ ุณูุฆุฉ ุงูุณูุนุฉ ูู JDK8u60 ููุท. <br><br>  ูุจุฏุฃ ุงูุฌูุงุฒ ุงูุธุงูุฑู ูุน ุงูุนูู ุงูุฌุฏูุฏ.  ูู ุจุชุดุบูู <code>create-java-perf-map</code> ุ ุซู <code>perf record</code> <code>perf script</code> .  ุงูุขู ูููููุง ุฅูุดุงุก ููู ุชุนุฑูู ุฏููู ูุน ููุฏุณุงุช ุงูููุงููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">$ perf script java <span class="hljs-number"><span class="hljs-number">18657</span></span> <span class="hljs-number"><span class="hljs-number">1901247.601878</span></span>: <span class="hljs-number"><span class="hljs-number">979583</span></span> cycles:uppp: <span class="hljs-number"><span class="hljs-number">7</span></span>fbfd1101edc Loop3.doRecursiveCall (...) <span class="hljs-number"><span class="hljs-number">7</span></span>fbfd1101edc Loop3.doRecursiveCall (...) <span class="hljs-number"><span class="hljs-number">7</span></span>fbfd1101edc Loop3.doRecursiveCall (...) <span class="hljs-number"><span class="hljs-number">7</span></span>fbfd1101edc Loop3.doRecursiveCall (...) <span class="hljs-number"><span class="hljs-number">7</span></span>f285d007b10 Interpreter (...) <span class="hljs-number"><span class="hljs-number">7</span></span>f285d0004e7 call_stub (...) <span class="hljs-number"><span class="hljs-number">67</span></span>d0db [unknown] (... libjvm.so) ... <span class="hljs-number"><span class="hljs-number">708</span></span>c start_thread (... libpthread<span class="hljs-number"><span class="hljs-number">-2.26</span></span>.so)</code> </pre><br>  ุนูููุง ููุดุฆ ูููุงุช ุงูุชุนุฑูู perf ุ ุงููุถููู ูู ูุนุธู ุชูุฒูุนุงุช Linux ุ ุงูุนูู ูุน ุชุทุจููุงุช Java.  ูุฐูู ุ ูุง ูููููุง ุงูุขู ุฑุคูุฉ ุงูุฃูุณุงู ุงูุณุงุฎูุฉ ูู ุงูุดูุฑุฉ ูุญุณุจ ุ ูููู ุฃูุถูุง ุชุณูุณู ุงูููุงููุงุช ุงูุชู ุฃุฏุช ุฅูู ุงูููุทุฉ ุงูุณุงุฎูุฉ ุงูุญุงููุฉ.  ุฅูุฌุงุฒ ุฑุงุฆุน ุ ุจุงููุธุฑ ุฅูู ุฃู profiler perf ูุง ูุนุฑู ุดูุฆูุง ุนู java.  ูุญู ููุท ุนูููุง ูู ูุฐุง! <br><br><a name="7"></a><h3 style=";text-align:right;direction:rtl">  ุฒูุงุฏุฉ ูุนุฏู ุฃุฎุฐ ุงูุนููุงุช perf </h3><br>  ุฏุนููุง ูุญุงูู ุฑูุน ุชุฑุฏุฏ ุงูุชุดุบูู ุฅูู 10 ููููู ุนููุฉ ูู ุงูุซุงููุฉ.  ุงูุขู ูุฏููุง ุชุฑุฏุฏ ุฃูู ุจูุซูุฑ. <br><br>  ูุฃุชูุชุฉ ุฌููุน ุงูููุงู ุงูุชู ูููุง ุจูุง ููุชู ุ ููููู ุงุณุชุฎุฏุงู ุงูุจุฑูุงูุฌ ุงููุตู <code>perf-java-record-stack</code> ูู ูุดุฑูุน perf-map-agent.  ูุฏูู ููู ุฑุงุฆุน - ูุชุบูุฑ ุงูุจูุฆุฉ <code>perf_record-freq</code> ุ ุญูุซ ููููู ุถุจุท ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช.  ุฃููุงู ุ ุฏุนููุง ูุถุน 100 ุฃูู ุนููุฉ ูู ุงูุซุงููุฉ ููุญุงูู ุชุดุบูููุง.  ุชุธูุฑ ุฑุณุงูุฉ ูุธูุนุฉ ูู ูุญุฏุฉ ุงูุชุญูู ุจุฃููุง ุชุฌุงูุฒูุง ุงูุญุฏ ุงูุฃูุตู ุงููุณููุญ ุจู ูุชูุฑุงุฑ ุฃุฎุฐ ุงูุนููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">$ PERF_RECORD_FREQ=<span class="hljs-number"><span class="hljs-number">100000</span></span> ./bin/perf-java-record-stack PID ... Maximum frequency rate (<span class="hljs-number"><span class="hljs-number">30000</span></span>) reached. Please use -F freq option <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> lower value or consider tweaking /proc/sys/kernel/perf_event_max_sample_rate. ...</code> </pre><br>  ูู ุญุงูุชู ุ ูุงู ุงูุญุฏ 30 ุฃูู ุนููุฉ ูู ุงูุซุงููุฉ.  ูููู Perf ุนูู ุงูููุฑ ุฃู ูุณูุทุฉ kernel ุชุญุชุงุฌ ุฅูู ุฅุตูุงุญ ุ ูุงูุชู <code>sysctl</code> ุฅูุง ุจุงุณุชุฎุฏุงู echo sudo tee ุฅูู ุงูููู ุงููุทููุจ ุ ุฃู ูุจุงุดุฑุฉ ูู ุฎูุงู <code>sysctl</code> .  ูุฐูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">$ echo <span class="hljs-string"><span class="hljs-string">'1000000'</span></span> | sudo tee /proc/sys/kernel/perf_event_max_sample_rate</code> </pre> <br>  ุงู ูุญู ุฐูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">$ sudo sysctl kernel.perf_event_max_sample_rate=<span class="hljs-number"><span class="hljs-number">1000000</span></span></code> </pre><br>  ุงูุขู ูุญู ูููู ููููุงุฉ ุฃู ุงูุญุฏ ุงูุฃูุตู ููุชุฑุฏุฏ ูู ุงูุขู ููููู ุนููุฉ ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ.  ูุจุฏุฃ ููุดุฆ ูููุงุช ุงูุชุนุฑูู ูุฑุฉ ุฃุฎุฑู ููุดูุฑ ุฅูู ุชูุฑุงุฑ 200 ุฃูู ุนููุฉ ูู ุงูุซุงููุฉ.  ุณูุนูู ุงูููู ุงูุชุนุฑููู ููุฏุฉ 15 ุซุงููุฉ ููููุญูุง ููููู ุนููุฉ.  ูุจุฏู ุฃู ูู ุดูุก ุนูู ูุง ูุฑุงู.  ุนูู ุงูุฃูู ูุง ุชูุฌุฏ ุฑุณุงุฆู ุฎุทุฃ ูุงุฆูุฉ.  ูููู ูุง ูู ุงูุชุฑุฏุฏ ุงูุฐู ุญุตููุง ุนููู ุจุงููุนูุ  ุงุชุถุญ ุฃู ููุท 70 ุฃูู ุนููุฉ ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ.  ูุง ุงูุฎุทุฃ ุงูุฐู ุญุฏุซุ <br><br>  ุฏุนูุง ูุฑู ุฅุฎุฑุงุฌ <code>dmesg</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">84430.412898</span></span>] perf: interrupt took too long (<span class="hljs-number"><span class="hljs-number">1783</span></span> &gt; <span class="hljs-number"><span class="hljs-number">200</span></span>), lowering kernel.perf_event_max_sample_rate to <span class="hljs-number"><span class="hljs-number">89700</span></span> ... [<span class="hljs-number"><span class="hljs-number">84431.618452</span></span>] perf: interrupt took too long (<span class="hljs-number"><span class="hljs-number">2229</span></span> &gt; <span class="hljs-number"><span class="hljs-number">2228</span></span>), lowering kernel.perf_event_max_sample_rate to <span class="hljs-number"><span class="hljs-number">71700</span></span></code> </pre><br>  ูุฐุง ูู ูุงุชุฌ ููุงุฉ ููููุณ.  ููุฏ ุฃุฏุฑููุง ุฃููุง ูุฃุฎุฐ ุนููุงุช ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุ ููุณุชุบุฑู ุงููุซูุฑ ูู ุงูููุช ุ ูุจุงูุชุงูู ูุฅู ุงูููุงุฉ ุชุฎูุถ ุงูุชุฑุฏุฏ.  ุงุชุถุญ ุฃููุง ูุญุชุงุฌ ุฅูู ูู ููุจุถ ุขุฎุฑ ูู kernel - ูุทูู ุนููู <code>kernel.perf_cpu_time_max_percent</code> ููุชุญูู ูู ููุฏุงุฑ ุงูููุช ุงูุฐู ูููู ุฃู ุชูููู kernel ุนูู ุงูููุงุทุนุงุช ูู perf. <br><br>  ุณูู ูุทูุจ ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ูู 200 ุฃูู ุนููุฉ ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ.  ูุจุนุฏ 15 ุซุงููุฉ ูุญุตู ุนูู 3 ููุงููู ุนููุฉ - 200 ุฃูู ุนููุฉ ูู ุงูุซุงููุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">$ PERF_RECORD_FREQ=<span class="hljs-number"><span class="hljs-number">200000</span></span> ./bin/perf-java-record-stack PID Recording events <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> seconds ... ... [ perf record: Captured ... (<span class="hljs-number"><span class="hljs-number">2.961</span></span><span class="hljs-number"><span class="hljs-number">.252</span></span> samples) ]</code> </pre><br>  ุงูุขู ุฏุนููุง ูุฑู ุงูููู ุงูุดุฎุตู.  ุชุดุบูู <code>perf script</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">$ perf script ... java ... native_write_msr (<span class="hljs-regexp"><span class="hljs-regexp">/.../</span></span>vmlinux) java ... Loop2.main (<span class="hljs-regexp"><span class="hljs-regexp">/tmp/</span></span>perf<span class="hljs-number"><span class="hljs-number">-29621.</span></span>map) java ... native_write_msr (<span class="hljs-regexp"><span class="hljs-regexp">/.../</span></span>vmlinux) ...</code> </pre><br>  ูุฑู ูุธุงุฆู ุบุฑูุจุฉ ูุงููุญุฏุฉ ุงููุงุจูุฉ ููุชูููุฐ vmlinux - ููุงุฉ ููููุณ.  ูุฐุง ุจุงูุชุฃููุฏ ููุณ ุฑูุฒูุง.  ูุงุฐุง ุญุฏุซุ  ุชุจูู ุฃู ุงูุชุฑุฏุฏ ูุงู ูุฑุชูุนูุง ูุฏุฑุฌุฉ ุฃู ููุฏ ุงูููุงุฉ ุจุฏุฃ ูุณูุท ูู ุงูุนููุงุช.  ุฃู ุฃูู ูููุง ุฒุงุฏ ุงูุชุฑุฏุฏ ุ ูููุง ูุงูุช ููุงู ุนููุงุช ูุง ุชุชุนูู ุจุดูุฑุชูุง ุ ุจู ุจููุงุฉ Linux. <br><br>  ุทุฑูู ูุณุฏูุฏ. <br><br><a name="8"></a><h3 style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู (ุตุฑุงุญุฉ) ุงูุฃุญุฏุงุซ PMU / PEBS ุงูุฃุฌูุฒุฉ </h3><br>  ุซู ูุฑุฑุช ุชุฌุฑุจุฉ ุงุณุชุฎุฏุงู ุชูููุฉ ุฃุฌูุฒุฉ PMU / PEBS - ูุญุฏุฉ ูุฑุงูุจุฉ ุงูุฃุฏุงุก ุ ุฃุฎุฐ ุงูุนููุงุช ููููุง ูุฃุญุฏุงุซ ุฏูููุฉ.  ูุณูุญ ูู ุจุชููู ุฅุนูุงูุงุช ุจุฃู ุญุฏุซูุง ูุฏ ุญุฏุซ ุจุนุฏุฏ ูุนูู ูู ุงููุฑุงุช.  ููุฐุง ูุง ูุณูู "ุงููุชุฑุฉ".  ุนูู ุณุจูู ุงููุซุงู ุ ูุฏ ูุชููู ุฅุนูุงูุงุช ุญูู ุชูููุฐ ุงููุนุงูุฌ ููู ุชุนูููุงุช ุงูุนุดุฑูู.  ููููู ูุธุฑุฉ ุนูู ูุซุงู.  ุงุณูุญ ุจุชุทุจูู xor ุงูุขู ุ ูุงูุญุตูู ุนูู ุนุฏุงุฏ PMU ุงููููุฉ 18 ุ  ุซู ุชุฃุชู ุงูุชุนูููุงุช mov - ุงูุนุฏุงุฏ 19ุ  ูุงูุชุนูููุงุช ุงูุชุงููุฉ ุ <b>ุฅุถุงูุฉูช r14 ุูช r13</b> ุ ุณุชุธูุฑ ูุญุฏุฉ ุฅุฏุงุฑุฉ ุงููุดุฑูุน ูู "ุณุงุฎู". <br><br>  ุซู ุชุจุฏุฃ ุฏูุฑุฉ ุฌุฏูุฏุฉ: ูุชู ุชูููุฐ <code>inc</code> - ุชุชู ุฅุนุงุฏุฉ ุชุนููู ูุญุฏุฉ ุฅุฏุงุฑุฉ ุงููุดุฑูุน ุฅูู 1. ูุชูุฑุงุฑุงุช ููููุฉ ููุฏูุฑุฉ ุชูุฑ.  ูู ุงูููุงูุฉ ุ ูุชููู ุนูุฏ ุชุนูููุงุช <code>mov</code> ุ ุชุณุชุฌูุน ูุญุฏุฉ ุฅุฏุงุฑุฉ ุงููุดุฑูุน 19. ุจูุงู ุงูุฅุถุงูุฉ ุงูุชุงูู ุ ููุฑุฉ โโุฃุฎุฑู ูุญุชูู ุจู.  ุงูุธุฑ ุงููุงุฆูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">mov aaa, bbbb xor %rdx, %rdx L_START: mov $0x0(%rbx, %rdx),%r14 add %r14, %r13 ; (PMU       "") cmp %rdx,100000000 jne L_START</code> </pre> <br>  ูุง ุชูุงุญุธ ุงูุดุฐูุฐุ  ุฏูุฑุฉ ูู ุฎูุณ ุชุนูููุงุช ุ ูููู ูู ูู ูุฑุฉ ูุญุชูู ุจููุณ ุงูุชุนูููุงุช ุจุฃููุง ุณุงุฎูุฉ.  ูู ุงููุงุถุญ ุฃู ูุฐุง ุบูุฑ ุตุญูุญ: ููู ุงูุชุนูููุงุช "ุณุงุฎูุฉ".  ุฅููู ููุถูู ุงูููุช ุฃูุถูุง ุ ููุญู ูุญุชูู ุจูุงุญุฏ ููุท.  ูุงูุญูููุฉ ูู ุฃูู ุจูู ุงููุชุฑุฉ ูุงูุนุฏุงุฏ ูุนุฏุฏ ุงูุฅุฑุดุงุฏุงุช ูู ุงูุชูุฑุงุฑ ูุฏููุง ุนุงูู ูุดุชุฑู 4. ูุชุถุญ ุฃูู ูู ูู ุชูุฑุงุฑ ุฑุงุจุน ุณูุถุน ููุณ ุงูุชุนูููุงุช ูู "ุณุงุฎู".  ูุชุฌูุจ ูุฐุง ุงูุณููู ุ ุชุญุชุงุฌ ุฅูู ุงุฎุชูุงุฑ ุฑูู ููุชุฑุฉ ูุชู ูููุง ุชูููู ุงุญุชูุงู ุญุฏูุซ ููุณูู ูุดุชุฑู ุจูู ุนุฏุฏ ุงูุชูุฑุงุฑุงุช ูู ุงูุญููุฉ ูุงูุนุฏุงุฏ ููุณู.  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ููุจุบู ุฃู ุชููู ุงููุชุฑุฉ ุฃูููุฉ ุ ุฃู  ูุดุงุฑูุฉ ููุท ุนูู ููุณู ูุนูู ุงููุญุฏุฉ.  ุนูู ุณุจูู ุงููุซุงู ุฃุนูุงู: ูุฌุจ ุนููู ุงุฎุชูุงุฑ ูุชุฑุฉ ุชุณุงูู 23. ุซู ุณูุถุน ุนูุงูุฉ ุจุงูุชุณุงูู ุนูู ุฌููุน ุงูุชุนูููุงุช ูู ูุฐู ุงูุฏูุฑุฉ ุจุฃููุง "ุณุงุฎูุฉ". <br><br>  ุชู ุฏุนู ุชูููุฉ PMU / PEBS ูู ุดูููุง ุงูุญุฏูุซ ููุฐ ุนุงู 2009 ุนูู ุงูุฃูู ุ ุฃู ุฃููุง ูุชููุฑุฉ ุนูู ุฃู ููุจููุชุฑ ุชูุฑูุจูุง.  ูุชุทุจููู ุจุดูู ุตุฑูุญ ุ ุฏุนูุง <code>perf-java-record-stack</code> ุจุชุนุฏูู ุงูุจุฑูุงูุฌ ุงููุตู <code>perf-java-record-stack</code> .  ุงุณุชุจุฏู ุนูุงูุฉ <code>-F</code> ุจู <code>-e</code> ุ ุงูุชู ุชุญุฏุฏ ุจุดูู ุตุฑูุญ ุงุณุชุฎุฏุงู PMU / PEBS. <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">... sudo perf record -F $PERF_RECORD_FREQ ... ...</code> </pre> <br>  ุชุญููู ุงูุจุฑูุงูุฌ ุงููุตู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">... sudo perf record -e cycles โc <span class="hljs-number"><span class="hljs-number">10007</span></span> ... ...</code> </pre> <br>  ุฃูุช ุชุนุฑู ุจุงููุนู ูุง ูู ุงูุฎุตุงุฆุต ุงูุชู ูุฌุจ ุฃู ุชูุชูููุง ุฃู ูุชุฑุฉ - ูุญุชุงุฌ ุฅูู ุฑูู ุฃููู.  ุจุงููุณุจุฉ ูุญุงูุชูุง ุ ุณุชููู ุงููุชุฑุฉ 10007. <br><br>  ุฃุทูููุง ุงููุต ุงููุนุฏู ุงููุนุฏู ูู java-record-stack ูุญุตููุง ุนูู 4.5 ููููู ุนููุฉ ูู 15 ุซุงููุฉ - ูุง ููุฑุจ ูู 300 ุฃูู ุนููุฉ ูู ุงูุซุงููุฉ ุงููุงุญุฏุฉ ุ ุนููุฉ ูุงุญุฏุฉ ูู 3 ูููุฑูุซุงููุฉ.  ููุฐุง ูู ุ ูุชูููุฐ ูุงุญุฏ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุฏููุง ููุญุฉ ุ ู 100 wes ุณูู ูุฌูุน 33 ุนููุงุช.  ูู ูุฐุง ุงูุชุฑุฏุฏ ุ ูุจูุบ ุฅุฌูุงูู ููุช ุฌูุน ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ 30 ุซุงููุฉ ููุท.  ูุง ุชุดุฑุจ ุญุชู ููุจ ูู ุงููููุฉ!  ูู ุงููุงูุน ุ ูู ุดูุก ุฃูุซุฑ ุชุนููุฏูุง ุจูููู.  ูุงุฐุง ูุญุฏุซ ุฅุฐุง ุจุฏุฃ ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุฏููุง ููุณ ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุซุงููุฉ ุ ูููู ูุฑุฉ ูุงุญุฏุฉ ูู 5 ุซูุงูุ  ุนูุฏูุง ุณุชููู ูุฏุฉ ุงูุชูุตูู ุฅูู 2.5 ุฏูููุฉ ุ ููู ุฃูุถูุง ูุชูุฌุฉ ุฌูุฏุฉ. <br><br>  ูุฐูู ุ ูู 30 ุซุงููุฉ ุ ููููู ุงูุญุตูู ุนูู ููู ุชุนุฑูู ูุบุทู ุฌููุน ุงุญุชูุงุฌุงุช ุจุญุซูุง ุจุงููุงูู.  ุงูููุฒุ <br><br>  ููู ุดุนูุฑ ุจุนุถ ุงูุฎุฏุนุฉ ุงููุฐุฑุฉ ูู ูุชุฑููู.  ููุนุฏ ุฅูู ุงููููู ุงูุฐู ูุชู ููู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจูุง ูู 5 ุซูุงูู.  ุจุนุฏ ุฐูู ุ ูุณุชุบุฑู ุงูุชูููุท 150 ุซุงููุฉ ุ ุณูุฌูุน ุฎูุงููุง ุญูุงูู 45 ููููู ุนููุฉ.  ูู ุจูู ูุคูุงุก ุ ูุญุชุงุฌ ุฅูู 1000 ููุท ุ ุฃู 0.002ูช ูู ุงูุจูุงูุงุช ุงูุชู ุชู ุฌูุนูุง.  ูู ุดูุก ุขุฎุฑ ูู ุงูููุงูุฉ ุ ุงูุชู ุชุจุทุฆ ุนูู ุงูุฃุฏูุงุช ุงูุฃุฎุฑู ูุชุถูู ุงููููุงุช ุงูุนุงูุฉ.  ูุนู ุ ุชู ุญู ุงููุดููุฉ ุ ูููู ุชู ุญููุง ูู ุงูุฌุจูุฉ ุ ูููุฉ ุ ููููุฉ ุญุงุฏุฉ. <br><br>  ููู ุฐูู ุงููุณุงุก ุ ุนูุฏูุง ุญุตูุช ุนูู ููู ุชุนุฑูู ุชูุตููู ูุฃูู ูุฑุฉ ุจูุณุงุนุฏุฉ perf ุ ูุงู ูุฏู ุญูู.  ููุช ุฐุงูุจุฉ ุฅูู ุงูููุฒู ูู ุงูุนูู ูุงูุชูููุฑ ุ ููู ุณูููู ูู ุงูุฑุงุฆุน ุฃู ุชุชููู ุงููููุงุฉ ูู ุชุฌููุน ุงูููู ุงูุดุฎุตู ููุณู ูุญุชู ุฏูุฉ ุงููุฌูุฑูุฉ ูุงูุซุงููุฉ ุ ูุณูููู ุจุชุญููู ุงููุชุงุฆุฌ ููุท.  ูู ูุชุญูู ุญูููุ  ูุง ุฑุงูู <br><br><a name="9"></a><h3 style=";text-align:right;direction:rtl">  ููุฎุต ูุตูุฑ: </h3><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฅูุดุงุก ููู ุชุนุฑูู ูุชุทุจูู Java ุจุงุณุชุฎุฏุงู perf ุ ุชุญุชุงุฌ ุฅูู ุฅูุดุงุก ููู ูุญุชูู ุนูู ูุนูููุงุช ุญูู ุงูุฑููุฒ ุจุงุณุชุฎุฏุงู ุจุฑุงูุฌ ูุตูุฉ ูู ูุดุฑูุน perf-map-agent </li><li style=";text-align:right;direction:rtl">  ูุฌูุน ูุนูููุงุช ููุณ ููุท ุญูู ููุงุทุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุณุงุฎูุฉ ุ ูููู ุฃูุถูุง ุนู ุงูููุฏุณุงุช ุ ุชุญุชุงุฌ ุฅูู ุชุดุบูู ุฌูุงุฒ ุธุงูุฑู ุจุงุณุชุฎุฏุงู ุนูุงูุฉ -XX: + ุนูุงูุฉ PreserveFramePointer </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุฑุบุจ ูู ุฒูุงุฏุฉ ูุนุฏู ุฃุฎุฐ ุงูุนููุงุช ุ ูุฌุจ ุงูุงูุชุจุงู ุฅูู sysctl'and kernel.perf_cpu_time_max_percent ู kernel.perf_event_max_sample_rate. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุจุฏุฃุช ุนููุงุช ูู ุงูููุงุฉ ุบูุฑ ุงููุฑุชุจุทุฉ ุจุงูุชุทุจูู ูู ุงูุฏุฎูู ุฅูู ุงูููู ุงูุดุฎุตู ุ ูุฌุจ ุฃู ุชููุฑ ูู ุชุญุฏูุฏ ูุชุฑุฉ PMU / PEBS ุตุฑุงุญุฉ. </li></ul><br>  ูุฐู ุงูููุงูุฉ (ูุฃุฌุฒุงุฆูุง ุงูุชุงููุฉ) ูู ูุณุฎุฉ ูู ุงูุชูุฑูุฑ ุ ููุชุจุณุฉ ูู ุดูู ูุต.  ุฅุฐุง ููุช ูุง ุชุฑุบุจ ูู ุงููุฑุงุกุฉ ููุท ุ ูููู ุฃูุถูุง ุงูุงุณุชูุงุน ุฅูู ุงูุชูุตููุงุช ุ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุดุงุฑุฉ</a> ุฅูู ุงูุนุฑุถ ุงูุชูุฏููู. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar466719/">https://habr.com/ru/post/ar466719/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar466701/index.html">ุฏุนููุง ุชุดููุฑ ูุฎุฏู ูุง ููุฑุจ ูู 30 ูช ูู ุงููุฌุงูุงุช</a></li>
<li><a href="../ar466705/index.html">ูููุงูุฏู ุจูุชุง ูุงูุฑูุจูุช - ูุชุตูุญ ุญูููู</a></li>
<li><a href="../ar466709/index.html">ุชุทููุฑ ูุธุงู ุชุดุบูู ูุชูุงุซู ูุดุจู ูุธุงู ุงูุชุดุบูู - ููุชุจุฉ C (2)</a></li>
<li><a href="../ar466711/index.html">ููุงุท ุงูุถุนู DaOffice ุงููุณููุญ ุจูุง ูุฅุฒุงูุฉ ุฃู ูุณุชุฎุฏู ูู ุงูุดุจูุฉ ุงูุงุฌุชูุงุนูุฉ</a></li>
<li><a href="../ar466713/index.html">ูู ูู ุงููููู ูู 1C ุนุฏู ูุฑุงูุจุฉ ุชูููููุฌูุง ุงูููููุงุช ุงูุฎุงุฑุฌูุฉุ ุฃู ููู ูููุฆ ุงูุฒููุงุก ุจุงุณุชุฎุฏุงู 1Cุ</a></li>
<li><a href="../ar466721/index.html">[ุฅููุงุชุฑููุจุฑุบ ุ ุฅุนูุงู] java.ural.Meetup @ 3 - ุงูุฅุนูุงู ุนู ุชูุงุฑูุฑ ููุฏูู Java mitap + ุงูุซุงูุซุฉ ูู java.ural.Meetup @ 2</a></li>
<li><a href="../ar466723/index.html">Apple Text Broadcast - 10 ุณุจุชูุจุฑ ุ 2019</a></li>
<li><a href="../ar466725/index.html">ุฎูุฌุฑ 2 ูู ุงูุงุจุชุฏุงุฆูุฉ (ุงูุฌุฒุก 1)</a></li>
<li><a href="../ar466727/index.html">ุชุฑููุฉ ูุณูู: ููู ูุญุณู PostgreSQL 12 ุงูุฃุฏุงุก</a></li>
<li><a href="../ar466729/index.html">ูุชุงุจ "ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช. ุงุณุชุฑุฌุงุน ุงููุนูููุงุช ูู Facebook ู Twitter ู LinkedIn ู Instagram ู GitHub ยป</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>