<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåØ üíñ ‚ñ™Ô∏è Apple File System (APFS) üèí üîé üè¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="64-Bit-Inodes, atomare Transaktionen, Zeitstempel in Nanosekunden, Klonen von Verzeichnissen, integrierte Verschl√ºsselung
 Bei der gestrigen WWDC 2016...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apple File System (APFS)</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395253/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64-Bit-Inodes, atomare Transaktionen, Zeitstempel in Nanosekunden, Klonen von Verzeichnissen, integrierte Verschl√ºsselung</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bei der gestrigen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WWDC 2016-Pr√§sentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zeigte Apple neue Versionen von macOS (Sierra) 10.12, iOS 10, tvOS 10, watchOS 3-Betriebssystemen, eine Swift Playgrounds-App zum Unterrichten von Kinderprogrammierung und neue Emojis. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es scheint nichts interessantes. Apple hat jedoch noch etwas Grundlegendes eingef√ºhrt. Die bedeutendste Entwicklung von allen, die in der Pr√§sentation erw√§hnt wurde, ist das Dateisystem der neuen Generation Apple File System (APFS) im Betriebssystem macOS (Sierra) 10.12. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf der Website f√ºr Entwickler wurde kurz nach der Pr√§sentation eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mit den Hauptmerkmalen und einer Beschreibung des Dateisystems ver√∂ffentlicht, die die einzelnen Funktionen des leistungsstarken kostenlosen ZFS-Dateisystems wiederholt.</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apple-Computer verwenden jetzt das HFS + -Dateisystem, eine erweiterte Version des HFS (Hierarchical File System, erstellt vor √ºber 30 Jahren). Wie sein Vorg√§nger verwendet HFS + eine Baumstruktur namens B * -Baum, um die meisten Metadaten zu speichern. Daher der Name "hierarchisches Dateisystem". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die offizielle Einf√ºhrung von HFS + erfolgte am 19. Januar 1998 zusammen mit MacOS 8.1. Seit 2002 implementiert das System Journaling, um die Zuverl√§ssigkeit der Informationsspeicherung zu erh√∂hen. Da OS X 10.3 die Protokollierung standardm√§√üig aktiviert ist, kann jetzt zwischen Gro√ü- und Kleinschreibung unterschieden werden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bis OS X 10.7 haben die Entwickler HFS + weiterentwickelt und neue Funktionen f√ºr OS X auf Dateisystemebene implementiert. Fakt bleibt jedoch: HFS wurde urspr√ºnglich w√§hrend Disketten und rotierenden Festplatten entwickelt, als die Dateigr√∂√üe in Kilobyte oder Megabyte gemessen wurde. Heutzutage arbeiten viele mit SSD-Laufwerken, auf denen Millionen von Dateien gespeichert sind - Gigabyte oder Terabyte an Daten. Das Dateisystem hat v√∂llig andere Anforderungen. Anstatt den alten Code fertigzustellen, beschloss Apple schlie√ülich, ein neues Dateisystem von Grund auf neu zu schreiben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das APFS-Dateisystem der n√§chsten Generation befindet sich noch in der </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwicklervorschau</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das hei√üt, es ist nicht geplant, in naher Zukunft den Masseneinsatz zu erm√∂glichen. Sie k√∂nnen das APFS-Volume derzeit weder als Startdiskette noch im Time Machine-Sicherungssystem, in Fusion Drive oder mit File Vault-Verschl√ºsselung verwenden. Es ist jedoch f√ºr ein regul√§res Nicht-Boot-Volume m√∂glich. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt noch eine lange Verfeinerung und Pr√ºfung, aber erst dann wird APFS f√ºr Jahrzehnte das Hauptdateisystem von Apple. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Gegensatz zu HFS + unterscheidet APFS zun√§chst die Gro√ü- und Kleinschreibung von Zeichen in den Namen von Dateien und Ordnern. Diese Funktion kann nicht deaktiviert werden. Dies sollte von jedem ber√ºcksichtigt werden, der sich f√ºr die Verwendung von APFS entscheidet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Prinzip empfiehlt Apple, zun√§chst mit APFS auf einem externen Laufwerk zu experimentieren, auf dem nichts Wichtiges gespeichert ist. Hierzu wird vorgeschlagen, das Dienstprogramm zu verwenden</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hdiutil</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hauptmerkmale</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
In der offiziellen Dokumentation sind die </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">allgemeinen Merkmale</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des APFS-Dateisystems im Vergleich zu HFS + aufgef√ºhrt.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Container und B√§nde</font></font></h3><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Container</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ist das prim√§re Objekt zum Speichern von Daten in APFS. </font><font style="vertical-align: inherit;">Container sind normalerweise genau die gleichen wie die GPU-Eintr√§ge (GUID Partition Table). Sie verf√ºgen √ºber ein eigenes Absturzschutz- und Speicherplatzzuweisungsschema. </font><font style="vertical-align: inherit;">Jeder Container enth√§lt ein oder mehrere </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Volumes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> oder Dateisysteme, von denen jedes einen eigenen </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Namespace hat</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><i><font style="vertical-align: inherit;">dh</font></i><font style="vertical-align: inherit;"> eine Reihe von Dateien und Verzeichnissen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APFS unterst√ºtzt Software-RAID nicht direkt, kann jedoch mit Apple RAID-Volumes verwendet werden, um Striping (RAID 0), Mirroring (RAID 1) und Verkettung (JBOD) zu unterst√ºtzen.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">64-Bit-Inodes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
64-Bit-Inodes erh√∂hen den Namespace im Vergleich zu 32-Bit-Bezeichnern in HFS + erheblich. </font><font style="vertical-align: inherit;">Das 64-Bit-APFS-Dateisystem unterst√ºtzt √ºber 9 Billionen Dateien auf jedem Volume. </font><font style="vertical-align: inherit;">Das sollte f√ºr alle reichen, wie Bill Gates sagte.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nanosekunden-Zeitstempel</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APFS hat die Genauigkeit von Zeitstempeln (Zeitstempeln) signifikant erh√∂ht. </font><font style="vertical-align: inherit;">APFS unterst√ºtzt zeitstempelgenaues Zeitstempeln. </font><font style="vertical-align: inherit;">Zum Vergleich wurden in HFS + Zeitstempel auf die n√§chste Sekunde gesetzt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nanosekunden-Zeitstempel sind in modernen Dateisystemen sehr wichtig, da sie bei der Implementierung von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atomizit√§t</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und atomaren Transaktionen </font><font style="vertical-align: inherit;">helfen </font><font style="vertical-align: inherit;">- eine der wichtigsten ACID-Anforderungen f√ºr ein Transaktionssystem (z. B. ein DBMS). </font><font style="vertical-align: inherit;">Atomicity stellt sicher, dass keine Transaktion teilweise an das System gebunden wird. </font><font style="vertical-align: inherit;">Entweder werden alle ihre Unteroperationen abgeschlossen sein oder keine wird abgeschlossen sein.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Absturzsicherung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APFS implementiert ein innovatives Metadatenschema zum Kopieren beim Schreiben, das Apple als "Crash Protection" bezeichnet. </font><font style="vertical-align: inherit;">Es stellt sicher, dass √Ñnderungen am Dateisystem und an der Protokollierung synchron gehalten werden, wenn w√§hrend der Aufzeichnung etwas passiert - beispielsweise geht die Stromversorgung verloren. </font></font><br>
<br>
<img src="https://habrastorage.org/files/036/c0f/7e1/036c0f7e1f9447a5af5ea02b717588c2.png"><br>
<i><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZFS-Copy-on-Write-Schema</font></font></sup></i><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sparse Dateien</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine Datei mit dem Attribut "sparse" nimmt den Inhalt von Bl√∂cken mit null Byte an, die nicht auf dem Laufwerk gespeichert, sondern impliziert sind. </font><font style="vertical-align: inherit;">HFS + hatte keine Unterst√ºtzung f√ºr Dateien mit geringer Dichte.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erweiterte Attribute</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
APFS verf√ºgt √ºber eine integrierte Unterst√ºtzung f√ºr erweiterte Dateiattribute, die in HFS + √ºber die Attributdatei, dh √ºber den B-Baum, implementiert wurden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verschl√ºsselung</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apple behauptet, Verschl√ºsselung sei eine grundlegende Eigenschaft, die auf Dateisystemebene in APFS integriert ist. </font><font style="vertical-align: inherit;">F√ºr jedes Volume im APFS-Container wird eines der Verschl√ºsselungsmodelle installiert: ohne Verschl√ºsselung, Verschl√ºsselung mit einem Schl√ºssel, Verschl√ºsselung mit mehreren Schl√ºsseln. </font><font style="vertical-align: inherit;">Im letzteren Fall werden einzelne Schl√ºssel zum Verschl√ºsseln von Dateien und Metadaten verwendet. </font><font style="vertical-align: inherit;">Je nach Hardware verwendet APFS den AES-XTS- oder AES-CBC-Verschl√ºsselungsmodus.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Klonen von Dateien und Verzeichnissen</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Klonen - fast sofortiges Kopieren einer Datei oder eines Verzeichnisses, f√ºr das kein zus√§tzlicher Speicherplatz f√ºr die Datenspeicherung erforderlich ist. </font><font style="vertical-align: inherit;">Wenn ein Klon ge√§ndert wird, zeichnet das Dateisystem nur Daten√§nderungen auf. </font><font style="vertical-align: inherit;">Somit kann das neue Dateisystem viele Versionen gro√üer Dateien speichern, wodurch weniger Speicherplatz ben√∂tigt wird.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schnappsch√ºsse</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Snapshots - schreibgesch√ºtzte "Snapshots" des Dateisystems im Volume. Das Betriebssystem kann Snapshots f√ºr ein effizienteres Sicherungsverfahren verwenden. Das hei√üt, endlich wird Time Machine gut (schnell) funktionieren.</font></font><br>
<br>
<hr><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nat√ºrlich ist APFS in seinen Funktionen dem 128-Bit- </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZFS-Dateisystem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das von Linux, FreeBSD und anderen freien Betriebssystemen unterst√ºtzt </font><font style="vertical-align: inherit;">wird, deutlich unterlegen </font><font style="vertical-align: inherit;">, aber seitens Apple ist dies ein Schritt in die richtige Richtung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist seltsam, dass in der vorl√§ufigen Dokumentation die von HFS + unterst√ºtzte Komprimierungsfunktion nicht erw√§hnt wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apple hatte lange versucht, ZFS auf OS X zu portieren. Es gab eine aktive Diskussion √ºber die ZFS-Mailinglisten. Vorl√§ufige Snapshots wurden f√ºr die n√§chste Version von OS X ver√∂ffentlicht. Sp√§ter wurde </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenZFS f√ºr OS X</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (O3X) und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MacZFX implementiert</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das ZFS-Dateisystem ist Open Source, und Apple k√∂nnte einige Ideen f√ºr das APFS-Dateisystem ausleihen. </font><font style="vertical-align: inherit;">Die Open Source-Implementierung f√ºr APFS ist noch nicht fertig. Apple plant, das dokumentierte und das APFS-Format 2017 zu ver√∂ffentlichen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die erste formelle Sitzung findet heute Abend auf der WWDC statt, wo den Entwicklern die neuen Funktionen von APFS genauer gezeigt werden.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de395253/">https://habr.com/ru/post/de395253/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de395243/index.html">KI erzeugt realistische Ger√§usche im Filmmaterial</a></li>
<li><a href="../de395245/index.html">No Man's Sky-Spieleentwickler verteidigen den Namen vor Sky</a></li>
<li><a href="../de395247/index.html">Talkshow: Wie Podcasts erstellen, entwickeln und anh√∂ren</a></li>
<li><a href="../de395249/index.html">Sommer Mobilization GearBest</a></li>
<li><a href="../de395251/index.html">Aftershokz bluez 2 Knochenleitungs-Headset und h√∂rgesch√§digt</a></li>
<li><a href="../de395255/index.html">Erstellen eines 3D-Druckers durch einen jungen Ingenieur - was ist das?</a></li>
<li><a href="../de395257/index.html">Das virtuelle Trainingsgel√§nde von Synthia wird die Effektivit√§t des Trainings von KI-Robomobilen qualitativ ver√§ndern</a></li>
<li><a href="../de395259/index.html">Verwendung des DVR: Eine weitere ausf√ºhrliche FAQ im Internet</a></li>
<li><a href="../de395261/index.html">Dell Project Triton-Server und ihre K√ºhlsysteme</a></li>
<li><a href="../de395263/index.html">Yuneec Typhoon Q500 4k</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>