<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👌🏼 📧 👨🏼‍🏭 Entwicklung dynamischer Baumdiagramme mit SVG und Vue.js. 🚴 🔽 🌓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Material, dessen Übersetzung wir heute veröffentlichen, ist dem Prozess der Entwicklung eines Visualisierungssystems für dynamische Baumdiagramme ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entwicklung dynamischer Baumdiagramme mit SVG und Vue.js.</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/463329/">  Das Material, dessen Übersetzung wir heute veröffentlichen, ist dem Prozess der Entwicklung eines Visualisierungssystems für dynamische Baumdiagramme gewidmet.  Zum Zeichnen kubischer Bezier-Kurven wird hier die SVG-Technologie (Scalable Vector Graphics, Scalable Vector Graphics) verwendet.  Die reaktive Arbeit mit Daten wird von Vue.js organisiert. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist eine</a> Demoversion des Systems, mit der Sie experimentieren können. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/917/18f/9bb/91718f9bbe30a79beeeb537f7b49b07e.png"></div><br>  <i><font color="#999999">Interaktives Baumdiagramm</font></i> <br><a name="habracut"></a><br>  Durch die Kombination der leistungsstarken Funktionen von SVG und dem Vue.js-Framework konnten wir ein System zum Erstellen von Diagrammen erstellen, die datenbasiert, interaktiv und anpassbar sind. <br><br>  Ein Diagramm ist eine Sammlung kubischer Bezier-Kurven, die an einem Punkt beginnen.  Die Kurven enden an verschiedenen Punkten in gleichem Abstand voneinander.  Ihre endgültige Position hängt von den vom Benutzer eingegebenen Daten ab.  Dadurch kann das Diagramm reaktiv auf Datenänderungen reagieren. <br><br>  Zuerst werden wir darüber sprechen, wie Bezier-Kubikkurven gebildet werden, dann werden wir herausfinden, wie sie im Koordinatensystem des <code>&lt;svg&gt;</code> -Elements dargestellt werden, und über das Erstellen von Masken für Bilder sprechen. <br><br>  Die Autorin des Materials sagt, dass sie viele Illustrationen für ihn vorbereitet hat, um ihn verständlich und interessant zu machen.  Der Zweck des Materials ist es, jedem zu helfen, das Wissen und die Fähigkeiten zu erwerben, die für die Entwicklung seiner eigenen Diagrammsysteme erforderlich sind. <br><br><h2>  <font color="#3AC1EF">Svg</font> </h2><br><h3>  <font color="#3AC1EF">▍ Wie entstehen kubische Bezier-Kurven?</font> </h3><br>  Die in diesem Projekt verwendeten Kurven werden als Cubic Bezier Curve bezeichnet.  Die folgende Abbildung zeigt die Schlüsselelemente dieser Kurven. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6f5/36f/6b1/6f536f6b1bf9ce9198e78640a17e49e6.png"></div><br>  <i><font color="#999999">Schlüsselelemente einer Bezier-Kubikkurve</font></i> <br><br>  Die Kurve wird durch vier Koordinatenpaare beschrieben.  Das erste Paar <code>(x0, y0)</code> ist der <code>(x0, y0)</code> der Kurve.  Das letzte Koordinatenpaar <code>(x3, y3)</code> ist der letzte Bezugspunkt. <br><br>  Zwischen diesen Punkten sehen Sie die sogenannten Kontrollpunkte.  Dies ist der Punkt <code>(x1, y1)</code> und der Punkt <code>(x2, y2)</code> . <br><br>  Die Position der Kontrollpunkte in Bezug auf die Kontrollpunkte bestimmt die Form der Kurve.  Wenn die Kurve nur durch den Start- und Endpunkt, die Koordinaten <code>(x0, y0)</code> und <code>(x3, y3)</code> , würde diese Kurve wie ein diagonal angeordnetes gerades Segment aussehen. <br><br>  Jetzt werden wir die Koordinaten der vier oben beschriebenen Punkte verwenden, um die Kurve mit dem SVG <code>&lt;path&gt;</code> -Element zu zeichnen.  Hier ist die Syntax, die im <code>&lt;path&gt;</code> -Element zum Erstellen kubischer Bezier-Kurven verwendet wird: <br><br><pre> <code class="javascript hljs">&lt;path D=<span class="hljs-string"><span class="hljs-string">"M x0,y0 C x1,y1 x2,y2 x3,y3"</span></span> /&gt;</code> </pre> <br>  Der Buchstabe <code></code> , der im Code zu sehen ist, ist eine Abkürzung für Cubic Bezier Curve.  Kleinbuchstabe ( <code>c</code> ) bedeutet die Verwendung relativer Werte, Großbuchstabe ( <code>C</code> ) bedeutet die Verwendung absoluter Werte.  Ich verwende absolute Werte, um das Diagramm zu erstellen. Dies wird durch den im Beispiel verwendeten Großbuchstaben angezeigt. <br><br><h3>  <font color="#3AC1EF">▍Erstellen eines symmetrischen Diagramms</font> </h3><br>  Symmetrie ist ein zentraler Aspekt dieses Projekts.  Um ein symmetrisches Diagramm zu erstellen, habe ich nur eine Variable verwendet, die auf ihrer Grundlage Werte wie Höhe, Breite oder Koordinaten der Mitte eines bestimmten Objekts empfängt. <br><br>  Nennen wir diese variable <code>size</code> .  Da das Diagramm horizontal ausgerichtet ist, kann die Größenvariable als der gesamte horizontale Raum betrachtet werden, der dem Diagramm zur Verfügung steht. <br><br>  Weisen Sie dieser Variablen einen realistischen Wert zu.  Wir werden diesen Wert verwenden, um die Koordinaten der Diagrammelemente zu berechnen. <br><br><pre> <code class="javascript hljs">size = <span class="hljs-number"><span class="hljs-number">1000</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Ermitteln der Koordinaten von Diagrammelementen</font> </h2><br>  Bevor wir die Koordinaten finden können, die zum Erstellen des Diagramms erforderlich sind, müssen wir uns mit dem SVG-Koordinatensystem befassen. <br><br><h3>  <font color="#3AC1EF">▍Koordinatensystem und Ansichtsfeld</font> </h3><br>  Das Attribut des <code>&lt;svg&gt; viewBox</code> in unserem Projekt sehr wichtig.  Tatsache ist, dass es das Benutzerkoordinatensystem des SVG-Bildes beschreibt.  Einfach ausgedrückt, bestimmt die <code>viewBox</code> die Position und Größe des <code>viewBox</code> , in dem das auf dem Bildschirm sichtbare SVG-Bild erstellt wird. <br><br>  Das <code>viewBox</code> Attribut besteht aus vier Zahlen, die die Parameter des Koordinatensystems und die folgenden in dieser Reihenfolge angeben: <code>min-x</code> , <code>min-y</code> , <code>width</code> , <code>height</code> .  Die Parameter <code>min-x</code> und <code>min-y</code> legen den Ursprung des Benutzerkoordinatensystems fest, die Parameter <code>width</code> und <code>height</code> legen die Breite und Höhe des angezeigten Bildes fest.  So könnte das <code>viewBox</code> Attribut aussehen: <br><br><pre> <code class="javascript hljs">&lt;svg viewBox=<span class="hljs-string"><span class="hljs-string">"min-x min-y width height"</span></span>&gt;...&lt;<span class="hljs-regexp"><span class="hljs-regexp">/svg&gt;</span></span></code> </pre> <br>  Die oben beschriebene Größenvariable wird verwendet, um die <code>width</code> und Höhenparameter dieses Koordinatensystems zu steuern. <br><br>  Später im Abschnitt auf <code>viewBox</code> binden wir die <code>viewBox</code> an eine berechnete Eigenschaft, um die Werte für <code>width</code> und <code>height</code> anzugeben.  Darüber hinaus werden in unserem Projekt die Eigenschaften <code>min-x</code> und <code>min-y</code> immer auf 0 gesetzt. <br><br>  Beachten Sie, dass wir die Attribute <code>height</code> und <code>width</code> des <code>&lt;svg&gt;</code> -Elements selbst nicht verwenden.  Wir werden sie mit CSS auf <code>width: 100%</code> und <code>height: 100%</code> einstellen.  Auf diese Weise können wir ein SVG-Bild erstellen, das sich flexibel an die Seitengröße anpasst. <br><br>  Nachdem das Benutzerkoordinatensystem nun zum Zeichnen eines Diagramms bereit ist, wird die Größenvariable zur Berechnung der Koordinaten der Diagrammelemente verwendet. <br><br><h3>  <font color="#3AC1EF">▍ Unveränderliche und dynamische Koordinaten</font> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efc/a82/d19/efca82d1952a08d5c3582acf7fcab49e.png"></div><br>  <i><font color="#999999">Diagrammkonzept</font></i> <br><br>  Der Kreis, in dem die Zeichnung angezeigt wird, ist Teil des Diagramms.  Deshalb ist es wichtig, es von Anfang an in die Berechnungen einzubeziehen.  Lassen Sie uns anhand der obigen Abbildung die Koordinaten für den Kreis und für eine experimentelle Kurve herausfinden. <br><br>  Die Höhe des Diagramms ist in zwei Teile unterteilt.  Dies sind <code>topHeight</code> (20% der <code>size</code> ) und <code>bottomHeight</code> (die restlichen 80% der <code>size</code> ).  Die Gesamtbreite des Diagramms ist in zwei Teile unterteilt - die Länge jedes einzelnen beträgt 50% der <code>size</code> . <br><br>  Dies macht die Schlussfolgerung der <code>halfSize</code> nicht besonders erklärungsbedürftig (hier werden die Indikatoren <code>halfSize</code> und <code>topHeight</code> verwendet).  Der Parameter <code>radius</code> wird auf die Hälfte des Werts von <code>topHeight</code> .  Dank dessen passt der Kreis perfekt in den verfügbaren Raum. <br><br>  Schauen wir uns nun die Koordinaten der Kurven an. <br><br><ul><li>  Die Koordinaten <code>(x0, y0)</code> definieren den <code>(x0, y0)</code> der Kurve.  Diese Koordinaten bleiben ständig konstant.  Die <code>x0</code> Koordinate ist der Mittelpunkt des Diagramms (halbe <code>size</code> ), und <code>y0</code> ist die Koordinate, an der der untere Rand des Kreises endet.  Daher wird in der Formel zur Berechnung dieser Koordinate der Radius des Kreises verwendet.  Infolgedessen können die Koordinaten dieses Punktes durch die folgende Formel ermittelt werden <code>: (50% size, 20% size + radius)</code> . </li><li>  Die Koordinaten <code>(x1, y1)</code> sind der erste Kontrollpunkt der Kurve.  Es bleibt auch für alle Kurven unverändert.  Wenn wir nicht vergessen, dass die Kurven symmetrisch sein sollten, stellt sich heraus, dass die Werte von <code>x1</code> und <code>y1</code> immer halb so <code>size</code> wie die <code>size</code> .  Daher die Formel für ihre Berechnung: <code>(50% size, 50% size)</code> . </li><li>  Die Koordinaten <code>(x2, y2)</code> repräsentieren den zweiten Kontrollpunkt der Bezier-Kurve.  Hier gibt <code>x2</code> an, welche Form die Kurve haben soll.  Dieser Indikator wird für jede Kurve dynamisch berechnet.  Und der Indikator <code>y2</code> wird nach wie vor halb so <code>size</code> .  Daher die folgende Formel zur Berechnung dieser Koordinaten: <code>(x2, 50% size)</code> . </li><li>  Die Koordinaten <code>(x3, y3)</code> sind der <code>(x3, y3)</code> der Kurve.  Diese Koordinate gibt an, wo Sie das Zeichnen der Linie beenden möchten.  Hier wird der Wert von <code>x3</code> wie <code>x2</code> dynamisch berechnet.  Und <code>y3</code> nimmt einen Wert an, der 80% der <code>size</code> .  Als Ergebnis erhalten wir die folgende Formel: <code>(x3, 80% size)</code> . </li></ul><br>  Wir schreiben den Code für das <code>&lt;path&gt;</code> -Element allgemein neu und berücksichtigen dabei die soeben abgeleiteten Formeln.  Die oben verwendeten Prozentsätze werden hier dargestellt, indem sie durch 100 geteilt werden. <br><br><pre> <code class="javascript hljs">&lt;path d=<span class="hljs-string"><span class="hljs-string">"M size*0.5, (size*0.2) + radius          C size*0.5, size*0.5           x2,    size*0.5           x3,    size*0.8"</span></span> &gt;</code> </pre> <br>  Bitte beachten Sie, dass die Verwendung von Prozentsätzen in unseren Formeln auf den ersten Blick optional erscheint, nur aufgrund meiner eigenen Meinung.  Diese Werte werden jedoch nicht aus einer Laune heraus angewendet, sondern weil ihre Verwendung dazu beiträgt, Symmetrie und die richtigen Proportionen des Diagramms zu erreichen.  Nachdem Sie ihre Rolle beim Diagramm gespürt haben, können Sie Ihre eigenen Prozentwerte ausprobieren und die Ergebnisse untersuchen, die durch Anwenden dieser Werte erzielt wurden. <br><br>  Lassen Sie uns nun darüber sprechen, wie wir nach den Koordinaten <code>x2</code> und <code>x3</code> suchen werden.  Mit ihnen können Sie dynamisch viele Kurven basierend auf dem <code>index</code> Elemente im entsprechenden Array erstellen. <br><br>  Die Aufteilung des verfügbaren horizontalen Raums des Diagramms in gleiche Teile basiert auf der Anzahl der Elemente im Array.  Infolgedessen erhält jedes Teil den gleichen Abstand entlang der x-Achse. <br><br>  Die Formel, die wir ableiten, sollte anschließend mit einer beliebigen Anzahl von Elementen funktionieren.  Aber hier werden wir mit einem Array experimentieren, das 5 Elemente enthält: <code>[0,1,2,3,4]</code> .  Die Visualisierung eines solchen Arrays bedeutet, dass 5 Kurven gezeichnet werden müssen. <br><br><h3>  <font color="#3AC1EF">▍Finden dynamischer Koordinaten (x2 und x3)</font> </h3><br>  Zuerst habe ich die <code>size</code> durch die Anzahl der Elemente geteilt, dh durch die Länge des Arrays.  Ich habe diese variable <code>distance</code> .  Es repräsentiert den Abstand zwischen zwei Elementen. <br><br><pre> <code class="javascript hljs">distance = size/arrayLength <span class="hljs-comment"><span class="hljs-comment">// distance = 1000/5 = 200</span></span></code> </pre> <br>  Dann ging ich um das Array herum und multiplizierte den Index jedes seiner Elemente ( <code>index</code> ) mit der <code>distance</code> .  Der Einfachheit halber rufe ich einfach <code>x</code> sowohl den <code>x2</code> Parameter als auch den <code>x3</code> Parameter auf. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  x2  x3 x = index * distance</span></span></code> </pre> <br>  Wenn Sie die erhaltenen Werte beim Erstellen des Diagramms anwenden, dh den oben berechneten <code>x</code> Wert sowohl für <code>x2</code> als auch für <code>x3</code> , sieht dies etwas seltsam aus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/311/f53/1c6/311f531c60f80f01f519f0a128cfc164.png"></div><br>  <i><font color="#999999">Das Diagramm ist asymmetrisch</font></i> <br><br>  Wie Sie sehen können, befinden sich die Elemente in dem Bereich, in dem sie sich befinden sollten, aber das Diagramm hat sich als asymmetrisch herausgestellt.  Es scheint, dass es im linken Teil mehr Elemente gibt als im rechten. <br><br>  Jetzt muss der <code>x3</code> Wert in der Mitte der entsprechenden Segmente liegen, deren Länge mithilfe der <code>distance</code> wird. <br><br>  Um das Diagramm in die von mir benötigte Form zu bringen, habe ich einfach <code>x</code> Hälfte des <code>distance</code> addiert. <br><br><pre> <code class="javascript hljs">x = index * distance + (distance * <span class="hljs-number"><span class="hljs-number">0.5</span></span>)</code> </pre> <br>  Als Ergebnis fand ich den Mittelpunkt des <code>distance</code> und platzierte die <code>x3</code> Koordinate darin.  Außerdem habe ich zu der Form gebracht, dass wir die <code>x2</code> Koordinate für Kurve Nr. 2 benötigen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e80/f69/f9d/e80f69f9d18b790c7634a9b12b2afc53.png"></div><br>  <i><font color="#999999">Symmetrisches Diagramm</font></i> <br><br>  Durch Hinzufügen des halben <code>distance</code> zu den Koordinaten <code>x2</code> und <code>x3</code> eignet sich die Berechnungsformel für diese Koordinaten zur Visualisierung von Arrays mit einer geraden und einer ungeraden Anzahl von Elementen. <br><br><h3>  <font color="#3AC1EF">▍ Bildmaskierung</font> </h3><br>  Wir brauchen ein bestimmtes Bild, das oben im Diagramm innerhalb des Kreises angezeigt wird.  Um dieses Problem zu lösen, habe ich eine Schnittmaske erstellt, die einen Kreis enthält. <br><br><pre> <code class="javascript hljs">&lt;defs&gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">mask</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"svg-mask"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">     </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">circle</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:r</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"radius"</span></span></span></span><span class="xml"><span class="hljs-tag">             </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:cx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"halfSize"</span></span></span></span><span class="xml"><span class="hljs-tag">             </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:cy</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"topHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">             </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"white"</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">mask</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">defs</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Dann habe ich das Bild mit dem <code>&lt;image&gt;</code> -Tag des <code>&lt;image&gt;</code> <code>&lt;svg&gt;</code> <code>&lt;image&gt;</code> -Elements zum Anzeigen des Bildes mit dem oben erstellten <code>&lt;mask&gt;</code> -Element verknüpft, indem ich das <code>mask</code> Attribut des <code>&lt;image&gt;</code> -Elements verwendet habe. <br><br><pre> <code class="javascript hljs">&lt;image mask=<span class="hljs-string"><span class="hljs-string">"url(#svg-mask)"</span></span>      :x=<span class="hljs-string"><span class="hljs-string">"(halfSize-radius)"</span></span>      :y=<span class="hljs-string"><span class="hljs-string">"(topHeight-radius)"</span></span> ... &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">image</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Da wir versuchen, ein quadratisches Bild in ein rundes „Fenster“ einzupassen, habe ich die Position des Elements angepasst, indem ich den <code>radius</code> von den entsprechenden Parametern subtrahiert habe.  Infolgedessen ist das Bild durch eine Maske in Form eines Kreises sichtbar. <br><br>  Sammeln wir alles, worüber wir gesprochen haben, in einer Zeichnung.  Dies wird uns helfen, das Gesamtbild des Arbeitsfortschritts zu sehen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/38b/27e/37f/38b27e37ff2a7da017e0f67b7ac68b7e.png"></div><br>  <i><font color="#999999">Daten zur Berechnung der Diagrammparameter</font></i> <br><br><h2>  <font color="#3AC1EF">Erstellen eines dynamischen SVG-Bildes mit Vue.js.</font> </h2><br>  Zu diesem Zeitpunkt haben wir die kubischen Bezier-Kurven herausgefunden und die zur Erstellung des Diagramms erforderlichen Berechnungen durchgeführt.  Als Ergebnis können wir jetzt statische SVG-Diagramme erstellen.  Wenn wir die Funktionen von SVG und Vue.js kombinieren, können wir Diagramme erstellen, die von Daten gesteuert werden.  Statische Diagramme werden dynamisch. <br><br>  In diesem Abschnitt überarbeiten wir das SVG-Diagramm und präsentieren es als eine Reihe von Vue-Komponenten.  Wir werden auch SVG-Attribute an berechnete Eigenschaften anhängen und das Diagramm auf Datenänderungen reagieren lassen. <br><br>  Darüber hinaus erstellen wir am Ende des Projekts eine Komponente, die ein Konfigurationsfenster ist.  Diese Komponente wird verwendet, um Daten einzugeben, die an das Diagramm übertragen werden. <br><br><h3>  <font color="#3AC1EF">▍Binden von Daten an viewBox-Parameter</font> </h3><br>  Beginnen wir mit der Anpassung des Koordinatensystems.  Ohne dies können wir keine SVG-Bilder zeichnen.  Die berechnete <code>viewbox</code> Eigenschaft gibt mithilfe der <code>viewbox</code> das zurück, was wir benötigen.  Es gibt vier durch Leerzeichen getrennte Werte.  All dies wird zum Wert des <code>viewBox</code> Attributs des <code>&lt;svg&gt;</code> -Elements. <br><br><pre> <code class="javascript hljs">viewbox() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"0 0 "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size + <span class="hljs-string"><span class="hljs-string">" "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.size; }</code> </pre> <br>  In SVG ist der Name des <code>viewBox</code> Attributs bereits im <code>viewBox</code> geschrieben. <br><br><pre> <code class="javascript hljs">&lt;svg viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 1000 1000"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Um dieses Attribut korrekt an die berechnete Eigenschaft zu binden, habe ich den Attributnamen im Kebab-Stil <code>.camel</code> und den Modifikator <code>.camel</code> danach <code>.camel</code> .  Mit diesem Ansatz ist es möglich, HTML zu "tricksen" und die Attributbindung korrekt zu implementieren. <br><br><pre> <code class="javascript hljs">&lt;svg :view-box.camel=<span class="hljs-string"><span class="hljs-string">"viewbox"</span></span>&gt;   ... &lt;<span class="hljs-regexp"><span class="hljs-regexp">/svg&gt;</span></span></code> </pre> <br>  Wenn Sie nun die <code>size</code> ändern <code>size</code> Diagramm unabhängig neu konfiguriert.  Wir müssen das Layout nicht manuell ändern. <br><br><h3>  <font color="#3AC1EF">▍Berechnung von Kurvenparametern</font> </h3><br>  Da die meisten Werte, die zum Erstellen der Kurven benötigt werden, auf der Grundlage einer einzelnen Variablen ( <code>size</code> ) berechnet werden, habe ich alle festen Koordinaten anhand der berechneten Eigenschaften ermittelt.  Was wir hier "feste Koordinaten" nennen, wird auf der Grundlage der <code>size</code> berechnet und ändert sich danach nicht mehr und hängt nicht davon ab, wie viele Kurven das Diagramm enthalten wird. <br><br>  Wenn Sie die <code>size</code> ändern, werden "feste Koordinaten" nachgezählt.  Danach ändern sie sich erst bei der nächsten <code>size</code> .  Vor diesem Hintergrund sind hier fünf Werte, die wir zum Zeichnen von Bezier-Kurven benötigen: <br><br><ul><li> <code>topHeight — size * 0.2</code> </li> <li> <code>bottomHeight — size * 0.8</code> </li> <li> <code>width — size</code> </li> <li> <code>halfSize — size * 0.5</code> </li> <li> <code>distance — size/arrayLength</code> </li> </ul><br>  Jetzt haben wir nur noch zwei unbekannte Werte - <code>x2</code> und <code>x3</code> .  Die Formel zu ihrer Berechnung haben wir bereits abgeleitet: <br><br><pre> <code class="javascript hljs">x = index * distance + (distance * <span class="hljs-number"><span class="hljs-number">0.5</span></span>)</code> </pre> <br>  Um bestimmte Werte zu finden, müssen wir die Indizes der Array-Elemente in dieser Formel ersetzen. <br><br>  Fragen wir uns nun, ob die berechnete Eigenschaft für uns richtig ist, um <code>x</code> zu finden.  Beantworten Sie diese Frage kurz - nein, das reicht nicht. <br><br>  Der berechneten Eigenschaft können keine Parameter übergeben werden.  Tatsache ist, dass dies eine Eigenschaft ist, keine Funktion.  Darüber hinaus bedeutet die Notwendigkeit, einen Parameter zu verwenden, um etwas zu berechnen, dass es keinen greifbaren Vorteil gibt, berechnete Eigenschaften in Bezug auf das Caching zu verwenden. <br><br>  Bitte beachten Sie, dass es eine Ausnahme bezüglich des oben genannten Prinzips gibt.  Es geht um Vuex.  Wenn Sie Vuex-Getter verwenden, die Funktionen zurückgeben, können Sie ihnen Parameter übergeben. <br><br>  In diesem Fall verwenden wir Vuex nicht.  Aber auch in dieser Situation haben wir einige Möglichkeiten, dieses Problem zu lösen. <br><br><h3>  <font color="#3AC1EF">▍ Option Nummer 1</font> </h3><br>  Sie können eine Funktion deklarieren, an die der <code>index</code> als Argument übergeben wird und die das benötigte Ergebnis zurückgibt.  Dieser Ansatz sieht sauberer aus, wenn wir den von einer ähnlichen Funktion zurückgegebenen Wert an mehreren Stellen in der Vorlage verwenden. <br><br><pre> <code class="javascript hljs">&lt;g v-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"(item, i) in itemArray"</span></span>&gt;  <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">path</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"'M' + halfSize + ','     + (topHeight+r) +' '+            'C' + halfSize + ','     + halfSize +' '+                     calculateXPos(i) + ',' + halfSize +' '+                  calculateXPos(i) + ',' + bottomHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">  /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Die Methode <code>calculateXPos()</code> führt bei jedem Aufruf Berechnungen durch.  Diese Methode verwendet als Argument den Index des Elements - <code>i</code> . <br><br><pre> <code class="javascript hljs">&lt;script&gt;  methods: {    calculateXPos (i)    {      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> distance * i + (distance * <span class="hljs-number"><span class="hljs-number">0.5</span></span>)    }  } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/script&gt;</span></span></code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist</a> ein Beispiel für CodePen, das diese Lösung verwendet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/28e/dd6/b8c/28edd6b8cb97d3352108946cfb50a9cd.png"></div><br>  <i><font color="#999999">Bildschirm für die erste Anwendungsvariante</font></i> <br><br><h3>  <font color="#3AC1EF">▍ Option Nummer 2</font> </h3><br>  Diese Option ist besser als die erste.  Wir können das kleine SVG-Markup extrahieren, das zum Erstellen der Kurve in eine separate kleine untergeordnete Komponente erforderlich ist, und den <code>index</code> als eine der Eigenschaften an diese übergeben. <br><br>  Mit diesem Ansatz können Sie sogar die berechnete Eigenschaft verwenden, um <code>x2</code> und <code>x3</code> zu finden. <br><br><pre> <code class="javascript hljs">&lt;g v-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>=<span class="hljs-string"><span class="hljs-string">"(item, i) in items"</span></span>&gt;    <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">cubic-bezier</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:index</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"i"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:half-size</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"halfSize"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:top-height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"topHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:bottom-height</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"bottomHeight"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:r</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"radius"</span></span></span></span><span class="xml"><span class="hljs-tag">                   </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:d</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"distance"</span></span></span></span><span class="xml"><span class="hljs-tag">     &gt;</span></span></span><span class="xml">     </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">cubic-bezier</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">g</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Diese Option gibt uns die Möglichkeit, den Code besser zu organisieren.  Beispielsweise können wir eine weitere untergeordnete Komponente für die Maske erstellen: <br><br><pre> <code class="javascript hljs">&lt;clip-mask :title=<span class="hljs-string"><span class="hljs-string">"title"</span></span>           :half-size=<span class="hljs-string"><span class="hljs-string">"halfSize"</span></span>           :top-height=<span class="hljs-string"><span class="hljs-string">"topHeight"</span></span>                               :r=<span class="hljs-string"><span class="hljs-string">"radius"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">clip-mask</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><h3>  <font color="#3AC1EF">▍Konfigurationsfenster</font> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d04/7e6/54f/d047e654fc2c1cda88bb618db3668fda.png"></div><br>  <i><font color="#999999">Konfigurationsfenster</font></i> <br><br>  Sie haben wahrscheinlich bereits das Konfigurationsfenster gesehen, das über die Schaltfläche in der oberen linken Ecke des Bildschirms des obigen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beispiels</a> aufgerufen wird.  In diesem Bereich können Sie dem Array auf einfache Weise Elemente hinzufügen und daraus entfernen.  Gemäß den im Abschnitt "Option 2" beschriebenen Ideen habe ich eine untergeordnete Komponente für das Konfigurationsfenster erstellt.  Dank dessen ist die Komponente der obersten Ebene sauber und gut lesbar.  Infolgedessen sieht unser kleiner schöner Baum mit Vue-Komponenten ungefähr so ​​aus wie der folgende. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5af/fe8/172/5affe817227430e34e81425910a2b525.png"></div><br>  <i><font color="#999999">Projektkomponentenbaum</font></i> <br><br>  Möchten Sie einen Blick auf den Code werfen, der diese Version des Projekts implementiert?  Wenn ja, schauen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4e/f1a/18b/e4ef1a18b00c15730adfc48077994608.png"></div><br>  <i><font color="#999999">Bildschirm für die zweite Anwendungsvariante</font></i> <br><br><h2>  <font color="#3AC1EF">Projekt-Repository</font> </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist</a> das GitHub-Repository des Projekts ("Option 2" ist hier implementiert).  Ich glaube, es wird nützlich sein, wenn Sie es sich ansehen, bevor Sie mit dem nächsten Abschnitt fortfahren. <br><br><h2>  <font color="#3AC1EF">Hausaufgaben</font> </h2><br>  Versuchen Sie, dasselbe Diagramm zu erstellen, das wir hier beschrieben haben, aber richten Sie es vertikal aus.  Nutzen Sie die in diesem Artikel beschriebenen Ideen. <br><br>  Wenn Sie der Meinung sind, dass dies eine einfache Aufgabe ist und es zum Erstellen eines solchen Diagramms ausreicht, die <code>x</code> und <code>y</code> Koordinaten zu vertauschen, haben Sie Recht.  Da das hier betrachtete Projekt nicht als universell erstellt wurde, müssen Sie nach dem Ändern der Koordinaten an der gewünschten Stelle auch den Code bearbeiten, indem Sie einige Variablen und Methoden umbenennen. <br><br>  Dank Vue.js kann unser einfaches Diagramm mit zusätzlichen Funktionen ausgestattet werden.  Zum Beispiel Folgendes: <br><br><ul><li>  Sie können einen Mechanismus erstellen, mit dem Sie zwischen horizontalem und vertikalem Diagrammmodus wechseln können. </li><li>  Kurven können versuchen zu animieren.  Zum Beispiel mit GSAP. </li><li>  Sie können die Eigenschaften der Kurven (z. B. Farbe und Linienbreite) im Konfigurationsfenster anpassen. </li><li>  Sie können eine externe Bibliothek verwenden, um das Speichern von Diagrammen in einem beliebigen Grafikformat oder als PDF-Datei zu organisieren.  Diese Materialien können für diejenigen heruntergeladen werden, die mit der Tabelle arbeiten. </li></ul><br>  Versuchen Sie diese Hausaufgaben.  Und wenn Sie irgendwelche Probleme haben - unten erhalten Sie einen Link zu seiner Lösung. <br><br><h2>  <font color="#3AC1EF">Zusammenfassung</font> </h2><br>  Das <code>&lt;path&gt;</code> -Element ist eine der leistungsstarken Funktionen von SVG.  Mit diesem Element können Sie verschiedene Bilder mit hoher Genauigkeit erstellen.  Hier haben wir herausgefunden, wie Bezier-Kurven strukturiert sind und wie sie in die Praxis umgesetzt werden können, um eigene Diagramme zu erstellen. <br><br>       ,  ,   JavaScript-.  Vue.js     .  ,   ,         , ,    DOM.        ,  —        . <br><br> ,    ,   ,  ,   ,      Vue.js  SVG.      —   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> ,      Vue.js.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="></a> —   . <br><br>   ,       - ,   ,        ,   — . <br><br>  <b>Liebe Leser!</b>      ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463329/">https://habr.com/ru/post/de463329/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463313/index.html">Ein alternativer Ansatz zum Abonnieren von Ereignissen, oder ist EventObject wirklich notwendig?</a></li>
<li><a href="../de463317/index.html">Technische Details zum Hacken der Capital One Bank auf AWS</a></li>
<li><a href="../de463321/index.html">Usability-Körbe und Kassen: Analyse der 20 besten russischen Nischen-Online-Shops</a></li>
<li><a href="../de463325/index.html">Game Designer Reflection: Charaktere für ein Spiel, das nicht herausgekommen ist</a></li>
<li><a href="../de463327/index.html">Vue.js: 3 Anti-Patterns</a></li>
<li><a href="../de463331/index.html">Apollo Client. Jetzt mit React Hooks</a></li>
<li><a href="../de463333/index.html">Wahl eines Testmanagementsystems im Jahr 2019</a></li>
<li><a href="../de463335/index.html">Verwendung des statischen Analysators PVS-Studio in der Entwicklung für eingebettete Systeme in C und C ++</a></li>
<li><a href="../de463337/index.html">Verwenden von Immer zum Verwalten des Anwendungsstatus</a></li>
<li><a href="../de463347/index.html">Eröffnung einer Reihe gemeinsamer Schulungen von Group-IB und Belkasoft in Computerforensik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>