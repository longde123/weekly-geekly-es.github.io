<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯЪ╝ тП▒я╕П тП░ рд▓реЗрдХрд┐рди рдЖрдк рдХрд╣рддреЗ рд╣реИрдВ рдХрд┐ рд╕рд┐рдл ... рдХреНрдпрд╛ рд╡рд╣ рдЗрддрдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реИ? ЁЯЪ╣ ЁЯЧДя╕П ЁЯШм</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдореБрдЭреЗ рд╕реЗрдл рд╕реЗ рдкреНрдпрд╛рд░ рд╣реИред рдореИрдВ рдЙрд╕рдХреЗ рд╕рд╛рде 4 рд╕рд╛рд▓ рд╕реЗ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реВрдВ (0.80.x -  12.2.6  , 12.2.5)ред рдХрднреА-рдХрднреА рдореИрдВ рдЙрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЗрддрдирд╛ рднрд╛рд╡реБрдХ рд╣реЛ рдЬрд╛рддрд╛ рд╣реВрдВ рдХрд┐ рдореИрдВ рдЙрд╕рдХреА ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд▓реЗрдХрд┐рди рдЖрдк рдХрд╣рддреЗ рд╣реИрдВ рдХрд┐ рд╕рд┐рдл ... рдХреНрдпрд╛ рд╡рд╣ рдЗрддрдирд╛ рдЕрдЪреНрдЫрд╛ рд╣реИ?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croccloudteam/blog/422905/"><p><img src="https://habrastorage.org/webt/fm/pp/3b/fmpp3bma4xf_j2pxwystnjgezc0.png"></p><br><p>  рдореБрдЭреЗ рд╕реЗрдл рд╕реЗ рдкреНрдпрд╛рд░ рд╣реИред  рдореИрдВ рдЙрд╕рдХреЗ рд╕рд╛рде 4 рд╕рд╛рд▓ рд╕реЗ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реВрдВ (0.80.x - <del>  12.2.6 </del> , 12.2.5)ред  рдХрднреА-рдХрднреА рдореИрдВ рдЙрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЗрддрдирд╛ рднрд╛рд╡реБрдХ рд╣реЛ рдЬрд╛рддрд╛ рд╣реВрдВ рдХрд┐ рдореИрдВ рдЙрд╕рдХреА рдХрдВрдкрдиреА рдореЗрдВ рд╢рд╛рдо рдФрд░ рд░рд╛рддреЗрдВ рдмрд┐рддрд╛рддрд╛ рд╣реВрдВ, рди рдХрд┐ рдЕрдкрдиреА рдкреНрд░реЗрдорд┐рдХрд╛ рдХреЗ рд╕рд╛рдеред  рдореБрдЭреЗ рдЗрд╕ рдЙрддреНрдкрд╛рдж рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╕рд╛рдордирд╛ рдХрд░рдирд╛ рдкрдбрд╝рд╛ рд╣реИ, рдФрд░ рдореИрдВ рдЖрдЬ рднреА рдХреБрдЫ рд▓реЛрдЧреЛрдВ рдХреЗ рд╕рд╛рде рд░рд╣рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред  рдХрднреА-рдХрднреА рдореИрдВ рдЖрд╕рд╛рди рдлреИрд╕рд▓реЛрдВ рдкрд░ рд╣рд░реНрд╖рд┐рдд рд╣реЛрддрд╛ рд╣реВрдВ, рдФрд░ рдХрднреА-рдХрднреА рдореИрдВ рдЕрдкрдиреЗ рдЖрдХреНрд░реЛрд╢ рдХреЛ рд╡реНрдпрдХреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рд╕рд╛рде рдорд┐рд▓рдиреЗ рдХрд╛ рд╕рдкрдирд╛ рджреЗрдЦрддрд╛ рд╣реВрдВред  рд▓реЗрдХрд┐рди рд╕рд┐рдл рдХреЛ рдЕрднреА рднреА рд╣рдорд╛рд░реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдпрд╣ рд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдирдП рдХрд╛рд░реНрдпреЛрдВ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдХрдо рд╕реЗ рдХрдо рдореЗрд░реЗ рджреНрд╡рд╛рд░рд╛ред  рдЗрд╕ рдХрд╣рд╛рдиреА рдореЗрдВ, рдореИрдВ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рдл рдХреЗ рдЕрдкрдиреЗ рдЕрдиреБрднрд╡ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд░реВрдВрдЧрд╛, рдХрд┐рд╕реА рддрд░рд╣ рдореИрдВ рдЗрд╕ рд╡рд┐рд╖рдп рдкрд░ рдЦреБрдж рдХреЛ рд╡реНрдпрдХреНрдд рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдореБрдЭреЗ рдЗрд╕ рд╕рдорд╛рдзрд╛рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рдкрд╕рдВрдж рдирд╣реАрдВ рд╣реИ рдФрд░ рд╢рд╛рдпрдж рдЙрди рд▓реЛрдЧреЛрдВ рдХреА рдорджрдж рдХрд░реЗрдВ рдЬреЛ рдЗрд╕реЗ рджреЗрдЦ рд░рд╣реЗ рд╣реИрдВред  рд▓рдЧрднрдЧ рдПрдХ рд╕рд╛рд▓ рдкрд╣рд▓реЗ рд╢реБрд░реВ рд╣реБрдИ рдШрдЯрдирд╛рдУрдВ рдХреЛ рдЬрдм рдореИрдВ рдбреЗрд▓ рдИрдПрдорд╕реА рд╕реНрдХреЗрд▓рд┐рдпреЛ рд▓рд╛рдпрд╛ рдерд╛, рдЬрд┐рд╕реЗ рдЕрдм рдбреЗрд▓ рдИрдПрдорд╕реА рд╡реАрдПрдХреНрд╕рдлрд╝реНрд▓реЗрдХреНрд╕ рдУрдПрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдЬрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдиреЗ рдореБрдЭреЗ рдЗрд╕ рд▓реЗрдЦ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░реЗрд░рд┐рдд рдХрд┐рдпрд╛ред </p><br><p>  рдпрд╣ рдбреЗрд▓ EMC рдпрд╛ рдЙрдирдХреЗ рдЙрддреНрдкрд╛рдж рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИ!  рдирд┐рдЬреА рддреМрд░ рдкрд░, рдореИрдВ рдмрдбрд╝реЗ рдирд┐рдЧрдореЛрдВ рдХреЗ рд╕рд╛рде рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рд╣реВрдВ, рдФрд░ рд╡реАрдПрдХреНрд╕рдлрд╝реНрд▓реЗрдХреНрд╕ рдУрдПрд╕ рдХреА рддрд░рд╣ рдХрд╛рд▓реЗ рдмрдХреНрд╕реЗред  рд▓реЗрдХрд┐рди рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, рджреБрдирд┐рдпрд╛ рдореЗрдВ рд╕рдм рдХреБрдЫ рд╕рд╛рдкреЗрдХреНрд╖ рд╣реИ рдФрд░ VxFlex OS рдХреЗ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдпрд╣ рджрд┐рдЦрд╛рдирд╛ рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ рдХрд┐ рд╕реЗрдл рдСрдкрд░реЗрд╢рди рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдХреНрдпрд╛ рд╣реИ, рдФрд░ рдореИрдВ рдЗрд╕реЗ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ред <a name="habracut"></a></p><br><h2 id="parametry-rech-idet-o-4-znachnyh-chislah">  рд╡рд┐рдХрд▓реНрдкред  рдпрд╣ 4 рдЕрдВрдХреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИ! </h2><br><p>  рд╕реЗрдл рд╕реЗрд╡рд╛рдПрдВ рдЬреИрд╕реЗ рдореЙрди, рдУрдПрд╕рдбреА рдЖрджрд┐ред  рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рдмрд╕рд┐рд╕реНрдЯрдо рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВред  рдкреИрд░рд╛рдореАрдЯрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕реЗрдЯ рдХрд┐рдП рдЧрдП рд╣реИрдВ, рд▓реЙрдиреНрдЪ рдХреЗ рд╕рдордп рдбреЗрдореЙрди рдЙрдиреНрд╣реЗрдВ рдкрдврд╝рддреЗ рд╣реИрдВред  "рдЗрдВрдЬреЗрдХреНрд╢рди" рддрдВрддреНрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдордХреНрдЦреА рдкрд░ рдХреБрдЫ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рдиреАрдЪреЗ рд╡рд░реНрдгрд┐рдд рд╣реИред  рд╕рдм рдХреБрдЫ рд▓рдЧрднрдЧ рд╕реБрдкрд░ рд╣реИ, рдпрджрд┐ рдЖрдк рдЙрд╕ рдХреНрд╖рдг рдХреЛ рдЫреЛрдбрд╝ рджреЗрддреЗ рд╣реИрдВ рдЬрд┐рд╕рдореЗрдВ рд╕реИрдХрдбрд╝реЛрдВ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВ: <br><br>  рд╣рдереМрдбрд╝рд╛: </p><br><pre><code class="html hljs xml">&gt; ceph daemon mon.a config show | wc -l 863</code> </pre> <br><p>  рдЪрдордХрджрд╛рд░: </p><br><pre> <code class="html hljs xml">&gt; ceph daemon mon.a config show | wc -l 1401</code> </pre> <br><p>  рдпрд╣ рджреЛ рд╡рд░реНрд╖реЛрдВ рдореЗрдВ ~ 500 рдирдП рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рджрд░реНрд╢рд╛рддрд╛ рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдкреИрд░рд╛рдореАрдЯрд░рд╛рдЗрдЬрд╝реЗрд╢рди рд╢рд╛рдВрдд рд╣реЛрддрд╛ рд╣реИ, рдпрд╣ рдардВрдбрд╛ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рд╕реВрдЪреА рдХреЗ 80% рдХреЛ рд╕рдордЭрдиреЗ рдореЗрдВ рдХрдард┐рдирд╛рдЗрдпрд╛рдВ рд╣реЛрддреА рд╣реИрдВред  рдкреНрд░рд▓реЗрдЦрди рдореЗрд░реЗ рдЕрдиреБрдорд╛рдиреЛрдВ рд╕реЗ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИ ~ 20% рдФрд░ рдХреБрдЫ рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рдЕрд╕реНрдкрд╖реНрдЯ рд╣реИред  рдЕрдзрд┐рдХрд╛рдВрд╢ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдЕрд░реНрде рдХреА рд╕рдордЭ рдХреЛ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдЧрд┐рдЯрдм рдпрд╛ рдореЗрд▓рд┐рдВрдЧ рд╕реВрдЪрд┐рдпреЛрдВ рдореЗрдВ рдкрд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдпрд╣ рд╣рдореЗрд╢рд╛ рдорджрдж рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдпрд╣рд╛рдБ рдХрдИ рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ рдЬреЛ рдореБрдЭреЗ рдЕрднреА рд╣рд╛рд▓ рд╣реА рдореЗрдВ рджрд┐рд▓рдЪрд╕реНрдкреА рдереА, рдореИрдВрдиреЗ рдЙрдиреНрд╣реЗрдВ рдПрдХ рд╕реЗрдлрд╝-рдЧреЗрджрдлреНрд▓рд╛рдИ рдХреЗ рдмреНрд▓реЙрдЧ рдореЗрдВ рдкрд╛рдпрд╛: </p><br><pre> <code class="html hljs xml">throttler_perf_counter = false // enable/disable throttler perf counter osd_enable_op_tracker = false // enable/disable OSD op tracking</code> </pre> <br><p>  рд╕рд░реНрд╡реЛрддреНрддрдо рдкреНрд░рдерд╛рдУрдВ рдХреА рднрд╛рд╡рдирд╛ рдореЗрдВ рдХреЛрдб рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБред  рдЬреИрд╕реЗ рдХрд┐, рдореИрдВ рд╢рдмреНрджреЛрдВ рдХреЛ рд╕рдордЭрддрд╛ рд╣реВрдВ рдФрд░ рдореЛрдЯреЗ рддреМрд░ рдкрд░ рднреА рдХрд┐ рд╡реЗ рдХрд┐рд╕ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдореБрдЭреЗ рдХреНрдпрд╛ рджреЗрдЧрд╛, рдпрд╣ рдирд╣реАрдВ рд╣реИред </p><br><p>  рдпрд╛ рдпрд╣рд╛рдБ: <strong>Luminous</strong> рдореЗрдВ <strong>osd_op_threads</strong> рдЪрд▓рд╛ рдЧрдпрд╛ рдФрд░ рдХреЗрд╡рд▓ рд╕реНрд░реЛрддреЛрдВ рдиреЗ рдирдпрд╛ рдирд╛рдо рдЦреЛрдЬрдиреЗ рдореЗрдВ рдорджрдж рдХреА: <strong>osd_peering_wq рдереНрд░реЗрдб</strong> </p><br><p>  рдореБрдЭреЗ рдпрд╣ рднреА рдкрд╕рдВрдж рд╣реИ рдХрд┐ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕рдордЧреНрд░ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВред  рдпрд╣рд╛рдБ рджреЛрд╕реНрдд рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ <strong>rgw_num _rados_handles</strong> рдмрдврд╝рд╛рдирд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдЪреНрдЫрд╛ рд╣реИ</a> : </p><br><p>  рдФрд░ рджреВрд╕рд░рд╛ рджреЛрд╕реНрдд рд╕реЛрдЪрддрд╛ рд╣реИ рдХрд┐&gt; 1 рдЕрд╕рдВрднрд╡ рд╣реИ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЦрддрд░рдирд╛рдХ</a> рднреАред </p><br><p>  рдФрд░ рдореЗрд░реА рдкрд╕рдВрджреАрджрд╛ рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЬрдм рд╢реБрд░реБрдЖрдд рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдЕрдкрдиреЗ рдмреНрд▓реЙрдЧ рдкреЛрд╕реНрдЯреЛрдВ рдореЗрдВ рдПрдХ рдХреЙрдиреНрдлрд┐рдЧ рдХрд╛ рдЙрджрд╛рд╣рд░рдг рджреЗрддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ рд╕рднреА рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдПрдХ рд╣реА рддрд░рд╣ рдХреЗ рджреВрд╕рд░реЗ рдмреНрд▓реЙрдЧ рд╕реЗ рдХреЙрдкреА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдФрд░ рдореБрдЭреЗ рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реИ), рдФрд░ рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рдПрдХ рдРрд╕рд╛ рдЧреБрдЪреНрдЫрд╛, рдЬрд┐рд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреЛрдб рдХреЗ рд▓реЗрдЦрдХ рдХреЛ рдЫреЛрдбрд╝рдХрд░ рдХреЛрдИ рдирд╣реАрдВ рдЬрд╛рдирддрд╛ред рд╡рд┐рдиреНрдпрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рдиреНрдпрд╛рд╕ред </p><br><p>  рдореИрдВ рднреА рдХреЗрд╡рд▓ рд▓реБрдорд┐рдирд╕ рдореЗрдВ рдЙрдиреНрд╣реЛрдВрдиреЗ рдЬреЛ рдХрд┐рдпрд╛ рдЙрд╕рд╕реЗ рдмреЗрддрд╣рд╛рд╢рд╛ рдЬрд▓рддреЗ рд╣реИрдВред  рдПрдХ рд╕реБрдкрд░ рдХреВрд▓ рдлреАрдЪрд░ рд╣реИ- рдлрд╝реНрд▓рд╛рдЗрдЯ рдкрд░ рдмрджрд▓рддреЗ рд╣реБрдП рдкреИрд░рд╛рдореАрдЯрд░реНрд╕, рдмрд┐рдирд╛ рд░реАрд╕реНрдЯрд╛рд░реНрдЯрд┐рдВрдЧ рдкреНрд░реЛрд╕реЗрд╕ рдХреЗред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ OSD рдХреЗ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЛ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="html hljs xml">&gt; ceph tell osd.12 injectargs '--filestore_fd_cache_size=512'</code> </pre> <br><p>  рдпрд╛ 12 рдХреЗ рдмрдЬрд╛рдп '*' рдбрд╛рд▓реЗрдВ рдФрд░ рд╕рднреА OSD рдкрд░ рдорд╛рди рдмрджрд▓ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИред  рд▓реЗрдХрд┐рди, рд╕рд┐рдл рдореЗрдВ рдмрд╣реБрдд рдХреБрдЫ, рдпрд╣ рдмрд╛рдПрдВ рдкреИрд░ рдХреЗ рд╕рд╛рде рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдлреНрд▓рд╛рдИ рдкрд░ рд╕рднреА рдбрд┐рдЬрд╝рд╛рдЗрди рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗред  рдЕрдзрд┐рдХ рд╕рдЯреАрдХ рд░реВрдк рд╕реЗ, рдЙрдиреНрд╣реЗрдВ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рд╡реЗ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рджрд┐рдЦрд╛рдИ рджреЗрдВрдЧреЗ, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдХреБрдЫ рд╣реА рдлрд┐рд░ рд╕реЗ рдкрдврд╝реЗ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдлрд┐рд░ рд╕реЗ рд▓рд╛рдЧреВ рд╣реЛрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд┐рдП рдмрд┐рдирд╛ рдереНрд░реЗрдб рдкреВрд▓ рдХрд╛ рдЖрдХрд╛рд░ рдирд╣реАрдВ рдмрджрд▓ рд╕рдХрддреЗред  рддрд╛рдХрд┐ рдЯреАрдо рдХреЗ рдирд┐рд╖реНрдкрд╛рджрдХ рдпрд╣ рд╕рдордЭреЗрдВ рдХрд┐ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдкреИрд░рд╛рдореАрдЯрд░ рдмрджрд▓рдирд╛ рдмреЗрдХрд╛рд░ рд╣реИ - рдЙрдиреНрд╣реЛрдВрдиреЗ рдПрдХ рд╕рдВрджреЗрд╢ рдкреНрд░рд┐рдВрдЯ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред  рд╕рдордЭрджрд╛рд░реА рд╕реЗред </p><br><p>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: </p><br><pre> <code class="html hljs xml">&gt; ceph tell mon.* injectargs '--mon_allow_pool_delete=true' mon.c: injectargs:mon_allow_pool_delete = 'true' (not observed, change may require restart) mon.a: injectargs:mon_allow_pool_delete = 'true' (not observed, change may require restart) mon.b: injectargs:mon_allow_pool_delete = 'true' (not observed, change may require restart)</code> </pre> <br><p>  рдЕрд╕реНрдкрд╖реНрдЯред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЗ рдмрд╛рдж рдкреВрд▓ рдХреЛ рд╣рдЯрд╛рдирд╛ рд╕рдВрднрд╡ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣реА рд╣реИ, рдпрд╣ рдЪреЗрддрд╛рд╡рдиреА рдЗрд╕ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдирд╣реАрдВ рд╣реИред  рдареАрдХ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрднреА рднреА рд╕реИрдХрдбрд╝реЛрдВ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рдмрд╣реБрдд рдЙрдкрдпреЛрдЧреА рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рдПрдХ рдЪреЗрддрд╛рд╡рдиреА рднреА рд╣реИ рдФрд░ рдЙрдирдХреА рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкреНрд░рдпреЛрдЬреНрдпрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИред  рдлрд┐рд▓рд╣рд╛рд▓, рдореИрдВ рдЙрд╕ рдХреЛрдб рд╕реЗ рднреА рдирд╣реАрдВ рд╕рдордЭ рд╕рдХрддрд╛ рдХрд┐ рдХреМрди рд╕реЗ рдкреИрд░рд╛рдореАрдЯрд░ рдЗрдВрдЬреЗрдХреНрд╢рди рдХреЗ рдмрд╛рдж рд▓рдЧрд╛рдП рдЧрдП рд╣реИрдВ рдФрд░ рдХреМрди рд╕реЗ рдирд╣реАрдВ рд╣реИрдВред  рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдкреБрдирд░рд╛рд░рдВрдн рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдпрд╣, рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, infuriatesред  рдмрдврд╝ рдЬрд╛рддреА рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдореБрдЭреЗ рдкрддрд╛ рд╣реИ рдХрд┐ рдПрдХ рдЗрдВрдЬреЗрдХреНрд╢рди рддрдВрддреНрд░ рд╣реИред </p><br><p>  VxFlex OS рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛?  рд╕реЛрдо (рд╡реАрдПрдХреНрд╕рдлрд╝реНрд▓реЗрдХреНрд╕ рдореЗрдВ рдпрд╣ рдПрдордбреАрдПрдо рд╣реИ) рдЬреИрд╕реА рд╕рдорд╛рди рдкреНрд░рдХреНрд░рд┐рдпрд╛рдПрдВ, рдУрдПрд╕рдбреА (рд╡реАрдПрдХреНрд╕рдлрд╝реНрд▓реЗрдХреНрд╕ рдореЗрдВ рдПрд╕рдбреАрдПрд╕) рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╛рдЗрд▓реЗрдВ рднреА рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рд╕рднреА рдХреЗ рд▓рд┐рдП рджрд░реНрдЬрдиреЛрдВ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВред  рд╕рдЪ рд╣реИ, рдЙрдирдХреЗ рдирд╛рдо рднреА рдХреБрдЫ рдирд╣реАрдВ рдХрд╣рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдЪреНрдЫреА рдЦрдмрд░ рдпрд╣ рд╣реИ рдХрд┐ рд╣рдордиреЗ рдХрднреА рднреА рд╕рд┐рдл рдХреЗ рд╕рд╛рде рдЬрд┐рддрдирд╛ рдЬрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдирдХрд╛ рд╕рд╣рд╛рд░рд╛ рдирд╣реАрдВ рд▓рд┐рдпрд╛ред </p><br><h2 id="tehnicheskiy-dolg">  рддрдХрдиреАрдХреА рдЛрдг </h2><br><p>  рдЬрдм рдЖрдк рдЕрдкрдиреЗ рдкрд░рд┐рдЪрд┐рдд рдХреЛ рд╕рд┐рдл рдХреЗ рд╕рд╛рде рдЖрдЬ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╕рдм рдХреБрдЫ рдареАрдХ рд▓рдЧрддрд╛ рд╣реИ, рдФрд░ рдЖрдк рдПрдХ рд╕рдХрд╛рд░рд╛рддреНрдордХ рд▓реЗрдЦ рд▓рд┐рдЦрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдЬрдм рдЖрдк рд╕рдВрд╕реНрдХрд░рдг 0.80 рд╕реЗ рдареЗрд╕ рдореЗрдВ рдЙрд╕рдХреЗ рд╕рд╛рде рд░рд╣рддреЗ рд╣реИрдВ, рддреЛ рд╕рдм рдХреБрдЫ рдЗрддрдирд╛ рд░рд╕рдкреВрд░реНрдг рдирд╣реАрдВ рджрд┐рдЦрддрд╛ рд╣реИред </p><br><p>  рдЧрд╣рдирд╛ рд╕реЗ рдкрд╣рд▓реЗ, рд╕рд┐рдл рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЛ рдЬрдбрд╝ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд▓рд╛рдпрд╛ рдЧрдпрд╛ред  рдЧрд╣рдирд╛ рдиреЗ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдХрд┐ рдЙрдиреНрд╣реЗрдВ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ 'рд╕реЗрдл' рд╕реЗ рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдЙрди рд╕рднреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЗ рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ рд╕рд┐рдл рд╕реЗрд╡рд╛рдУрдВ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИрдВред  рдРрд╕рд╛ рд▓рдЧрддрд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдпрд╣?  рдПрдХ рдУрдПрд╕рдбреА рдХреА рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдЬреЛ рдПрдХ 2 рдЯреАрдмреА рдкреВрд░реНрдг рдХреНрд╖рдорддрд╛ SATA рдЪреБрдВрдмрдХреАрдп рдбрд┐рд╕реНрдХ рдХреА рд╕реЗрд╡рд╛ рдХрд░рддрд╛ рд╣реИред  рддреЛ, рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рдбрд┐рд╕реНрдХ рдХрд╛ рдЧрд▓рд╛, рдкреВрд░реНрдг рдбрд┐рд╕реНрдХ рдЙрдкрдпреЛрдЧ рдХреЗ рд╕рд╛рде рд╕рдорд╛рдирд╛рдВрддрд░ рдореЗрдВ (рд╡рд┐рднрд┐рдиреНрди рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП) 3-4 рдШрдВрдЯреЗ рд▓рдЧрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдРрд╕реЗ рд╕реИрдХрдбрд╝реЛрдВ рдбрд┐рд╕реНрдХ рд╣реИрдВред  рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЧрд░ рдЖрдк рдиреЛрдбреНрд╕ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддреЗ рд╣реИрдВ (рддреБрд░рдВрдд 8-12 рдбрд┐рд╕реНрдХреНрд╕ рдЪрд╛рдВрд╕), рддреЛ рдЖрдкрдХреЛ рдПрдХ рд▓рдВрдмрд╛ рдЕрдкрдбреЗрдЯ рдорд┐рд▓рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХрд╛ рдУрдПрд╕рдбреА рд╣реЛрдЧрд╛ рдФрд░ рд╕рд░реНрд╡рд░ рдЕрдкрдбреЗрдЯ рд╣реЛрдиреЗ рдХреЗ рд╕рдордп рдбреЗрдЯрд╛ рдХреА рдПрдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХрдо рд╣реЛрддреА рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╣рдордиреЗ рд╕реЛрдЪрд╛ рдХрд┐ рдпрд╣ рдмреЗрддреБрдХрд╛ рдерд╛, рд╕реЗрдл рдкреИрдХреЗрдЬ рдХреЛ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдФрд░ рдУрдПрд╕рдбреА рдХреЛ рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ред  рд╣рдордиреЗ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рдХрд┐ рдЬреИрд╕реЗ рд╣реА рд╣рдо рдУрдПрд╕рдбреА рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░реЗрдВрдЧреЗ рдпрд╛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВрдЧреЗ, рд╣рдо рдЙрдиреНрд╣реЗрдВ рдПрдХ рдирдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рджреЗрдВрдЧреЗред  рдЕрдм рд╣рдо рдкреНрд░рддрд┐ рдорд╛рд╣ 2-3 рдбреНрд░рд╛рдЗрд╡ рдмрджрд▓ рд░рд╣реЗ рд╣реИрдВ рдФрд░ 1-2 рдЬреЛрдбрд╝ рд░рд╣реЗ рд╣реИрдВ, рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдЗрд╕реЗ 2022 рддрдХ рд╕рдВрднрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВ)ред </p><br><p>  CRUSH рдЯреНрдпреВрдирдмрд▓реНрд╕ </p><br><p>  <strong>CRUSH рд╕рд┐рдл</strong> рдХрд╛ рджрд┐рд▓ рд╣реИ, рд╕рдм рдХреБрдЫ рдЗрд╕рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдШреВрдорддрд╛ рд╣реИред  рдпрд╣ рд╡рд╣ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рд╣реИ рдЬрд┐рд╕рдХреЗ рджреНрд╡рд╛рд░рд╛, рдЫрджреНрдо рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рддрд░реАрдХреЗ рд╕реЗ, рдбреЗрдЯрд╛ рд╕реНрдерд╛рди рдХрд╛ рдЪрдпрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдзрдиреНрдпрд╡рд╛рдж рдЬрд┐рд╕рдХреЗ рд▓рд┐рдП RADOS рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдЧреНрд░рд╛рд╣рдХ рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛ рд▓реЗрдВрдЧреЗ рдХрд┐ рдЬрд┐рд╕ рдУрдПрд╕рдбреА рдХреЗ рдбреЗрдЯрд╛ (рдСрдмреНрдЬреЗрдХреНрдЯ) рдЙрдирдХреА рдЬрд╝рд░реВрд░рдд рд╣реИ, рд╡реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИрдВред  CRUSH рдХреА рдкреНрд░рдореБрдЦ рд╡рд┐рд╢реЗрд╖рддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдХрд┐рд╕реА рднреА рдореЗрдЯрд╛рдбреЗрдЯрд╛ рд╕рд░реНрд╡рд░ рдХреА рдЬрд░реВрд░рдд рдирд╣реАрдВ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ Luster рдпрд╛ IBM GPFS (рдЕрдм рд╕реНрдкреЗрдХреНрдЯреНрд░рдо рд╕реНрдХреЗрд▓)ред  CRUSH рдЧреНрд░рд╛рд╣рдХреЛрдВ рдФрд░ OSD рдХреЛ рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рд╕реАрдзреЗ рдмрд╛рддрдЪреАрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ, рдЖрджрд┐рдо RADOS рдСрдмреНрдЬреЗрдХреНрдЯ рднрдВрдбрд╛рд░рдг рдФрд░ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреА рддреБрд▓рдирд╛ рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рдЬреЛ рдореИрдВрдиреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ рджрд┐рдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рд╡рд┐рдЪрд╛рд░ рд╕реНрдкрд╖реНрдЯ рд╣реИред </p><br><p>  CRUSH рдЯреНрдпреВрдирдмрд▓, рдмрджрд▓реЗ рдореЗрдВ, рдкреИрд░рд╛рдореАрдЯрд░ / рдЭрдВрдбреЗ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд╣реИ рдЬреЛ CRUSH рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЛ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕реЗ рдХрдо рд╕реЗ рдХрдо рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ рдЕрдзрд┐рдХ рдХреБрд╢рд▓ рдмрдирд╛рддреЗ рд╣реИрдВред </p><br><p>  рдЗрд╕рд▓рд┐рдП, рдЬрдм рд╣реИрдорд░ рд╕реЗ рдЧрд╣рдирд╛ (рдкреНрд░рд╛рдХреГрддрд┐рдХ рд░реВрдк рд╕реЗ рдкрд░реАрдХреНрд╖рдг) рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд┐рдпрд╛ рдЧрдпрд╛, рддреЛ рдПрдХ рдЪреЗрддрд╛рд╡рдиреА рджрд┐рдЦрд╛рдИ рджреА, рдЬрд┐рд╕рдореЗрдВ рдХрд╣рд╛ рдЧрдпрд╛ рдерд╛ рдХрд┐ рдЯреНрдпреВрдирдмрд▓реНрд╕ рдкреНрд░реЛрдлрд╛рдЗрд▓ рдореЗрдВ рдРрд╕реЗ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВ рдЬреЛ рд╡рд░реНрддрдорд╛рди рд╕рдВрд╕реНрдХрд░рдг (рдЧрд╣рдирд╛) рдХреЗ рд▓рд┐рдП рдЗрд╖реНрдЯрддрдо рдирд╣реАрдВ рд╣реИрдВ рдФрд░ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рдЗрд╖реНрдЯрддрдо рдПрдХ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЧрдИ рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╕рдм рдХреБрдЫ рд╕реНрдкрд╖реНрдЯ рд╣реИред  рдбреЙрдХ рдХрд╣рддрд╛ рд╣реИ рдХрд┐ рдпрд╣ рдмрд╣реБрдд рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдФрд░ рдпрд╣ рд╕рд╣реА рддрд░реАрдХрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рднреА рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдбреЗрдЯрд╛ рд╕реНрд╡рд┐рдЪрд┐рдВрдЧ рдХреЗ рдмрд╛рдж 10% рдбреЗрдЯрд╛ рдХрд╛ рд╡рд┐рджреНрд░реЛрд╣ рд╣реЛрдЧрд╛ред  10% - рдпрд╣ рдбрд░рд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдордиреЗ рдЗрд╕рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ рд╣реИред  рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдПрдХ рдареЗрд╕ рд╕реЗ рд▓рдЧрднрдЧ 10 рдЧреБрдирд╛ рдХрдо рд╣реИ, рдкреНрд░рддрд┐ рдУрдПрд╕рдбреА рдкреАрдЬреА рдХреА рд╕рдорд╛рди рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде, рдкрд░реАрдХреНрд╖рдг рдбреЗрдЯрд╛ рд╕реЗ рднрд░рд╛, рд╣рдореЗрдВ 60% рдХрд╛ рд╡рд┐рджреНрд░реЛрд╣ рдорд┐рд▓рд╛!  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, 100TB рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, 60TB OSDs рдХреЗ рдмреАрдЪ рдЬрд╛рдирд╛ рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрд╣ рдирд┐рд░рдВрддрд░ рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЗ рд╕рд╛рде рдХреНрд▓рд╛рдЗрдВрдЯ рд▓реЛрдб рдХреЗ рд╕рд╛рде рд╣реИ!  рдпрджрд┐ рдореИрдВрдиреЗ рдЕрднреА рддрдХ рдирд╣реАрдВ рдХрд╣рд╛ рд╣реИ, рддреЛ рд╣рдо s3 рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд░рд╛рдд рдореЗрдВ рднреА rgw рдкрд░ рдмрд╣реБрдд рдХрдо рд▓реЛрдб рдирд╣реАрдВ рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ 8 рдФрд░ 4 рд╕реНрдереИрддрд┐рдХ рд╡реЗрдмрд╕рд╛рдЗрдЯреЛрдВ рдХреЗ рдЕрдВрддрд░реНрдЧрдд рд╣реИрдВред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╣рдордиреЗ рддрдп рдХрд┐рдпрд╛ рдХрд┐ рдпрд╣ рд╣рдорд╛рд░рд╛ рддрд░реАрдХрд╛ рдирд╣реАрдВ рдерд╛, рдЦрд╛рд╕рдХрд░ рдирдП рд╕рдВрд╕реНрдХрд░рдг рдкрд░ рдРрд╕рд╛ рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╣рдордиреЗ рдареЗрд╕ рдореЗрдВ рдХрд╛рдо рдирд╣реАрдВ рдХрд┐рдпрд╛ рдерд╛, рдХрдо рд╕реЗ рдХрдо рдмрд╣реБрдд рдЖрд╢рд╛рд╡рд╛рджреА рдерд╛ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдмрдбрд╝реЗ рдмрд╛рд▓реНрдЯреА рдЗрдВрдбреЗрдХреНрд╕ рдереЗ рдЬреЛ рдмрд╣реБрдд рдЦрд░рд╛рдм рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рдпрд╣ рднреА рд╕реНрд╡рд┐рдЪрд┐рдВрдЧ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдореЗрдВ рджреЗрд░реА рдХрд╛ рдХрд╛рд░рдг рдерд╛ред  рд╕реВрдЪрдХрд╛рдВрдХреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрд▓рдЧ рд╕реЗ рдереЛрдбрд╝рд╛ рдХрдо рд╣реЛрдЧрд╛ред  рдЕрдВрдд рдореЗрдВ, рд╣рдордиреЗ рдмрд╕ рдЪреЗрддрд╛рд╡рдиреА рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдФрд░ рдмрд╛рдж рдореЗрдВ рдЗрд╕ рдкрд░ рд▓реМрдЯрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред </p><br><p>  рдФрд░ рдЬрдм рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рдкрд░реАрдХреНрд╖рдг рдореЗрдВ рдмрджрд▓ рд░рд╣рд╛ рд╣реИ, рддреЛ cephfs- рдХреНрд▓рд╛рдЗрдВрдЯ рдЬреЛ рдХрд┐ CentOS 7.2 kernels рдореЗрдВ рд╣реИрдВ, рдмрдВрдж рд╣реЛ рдЧрдП рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдирдИ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЗ рдирдП рд╣реИрд╢рд┐рдВрдЧ рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд╕рдХреЗред  рд╣рдо рдЙрддреНрдкрд╛рджреЛрдВ рдореЗрдВ cephfs рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╣рдо рдХрд░рддреЗ рдереЗ, рддреЛ рдпрд╣ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕реНрд╡рд┐рдЪ рди рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдФрд░ рдХрд╛рд░рдг рд╣реЛрдЧрд╛ред </p><br><p>  рд╡реИрд╕реЗ, рдЧреЛрджреА рдХрд╛ рдХрд╣рдирд╛ рд╣реИ рдХрд┐ рдЕрдЧрд░ рд╡рд┐рджреНрд░реЛрд╣ рдХреЗ рджреМрд░рд╛рди рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдЖрдкрдХреЗ рдЕрдиреБрд░реВрдк рдирд╣реАрдВ рд╣реИ, рдЖрдк рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рд╡рд╛рдкрд╕ рд░реЛрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рд╣реИрдорд░ рд╕рдВрд╕реНрдХрд░рдг рдХреА рдПрдХ рд╕рд╛рдл рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдЧрд╣рдирд╛ рдореЗрдВ рдЕрдкрдЧреНрд░реЗрдб рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрд╛рдИ рджреЗрддреА рд╣реИ: </p><br><pre> <code class="html hljs xml">&gt; ceph osd crush show-tunables { ... "straw_calc_version": 1, "allowed_bucket_algs": 22, "profile": "unknown", "optimal_tunables": 0, ... }</code> </pre> <br><p>  рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдпрд╣ "рдЕрдЬреНрдЮрд╛рдд" рд╣реИ рдФрд░ рдпрджрд┐ рдЖрдк рдЗрд╕реЗ "рд╡рд┐рд░рд╛рд╕рдд" (рдЧреЛрджреА рдореЗрдВ рдмрддрд╛рдП рдЧрдП) рдпрд╛ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ "рд╣рдереМрдбрд╝рд╛" рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдХреЗ рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рдХреЛ рд░реЛрдХрдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд╡рд┐рджреНрд░реЛрд╣ рдмрдВрдж рдирд╣реАрдВ рд╣реЛрдЧрд╛, рдпрд╣ рд╕рд┐рд░реНрдл рдЕрдиреНрдп рдЯреНрдпреВрдирдмрд▓реЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЬрд╛рд░реА рд░рд╣реЗрдЧрд╛, рдФрд░ рдирд╣реАрдВ " рдЗрд╖реНрдЯрддрдоред "  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╕рдм рдХреБрдЫ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЬрд╛рдВрдЪрдиреЗ рдФрд░ рдбрдмрд▓-рдЪреЗрдХ рдХрд┐рдП рдЬрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рд╕реЗрдл рдкрд░ рднрд░реЛрд╕рд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  CRUSH рд╡реНрдпрд╛рдкрд╛рд░-рдХрд╛ </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, рдЗрд╕ рджреБрдирд┐рдпрд╛ рдореЗрдВ рд╕рдм рдХреБрдЫ рд╕рдВрддреБрд▓рд┐рдд рд╣реИ рдФрд░ рдиреБрдХрд╕рд╛рди рд╕рднреА рдлрд╛рдпрджреЗ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддреЗ рд╣реИрдВред  CRUSH рдХрд╛ рдиреБрдХрд╕рд╛рди рдпрд╣ рд╣реИ рдХрд┐ рдкреАрдЬреА рдХреЛ рдмрд╛рдж рдХреЗ рд╕рдорд╛рди рд╡рдЬрди рдХреЗ рд╕рд╛рде рдЕрд▓рдЧ-рдЕрд▓рдЧ OSDs рдореЗрдВ рдЕрд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕рд╛рде рд╣реА, рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреАрдЬреА рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЧрддрд┐ рд╕реЗ рдмрдврд╝рдиреЗ рд╕реЗ рд░реЛрдХрддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рд╣реИрд╢ рдлрд╝рдВрдХреНрд╢рди рдЧрд┐рд░ рдЬрд╛рдПрдЧрд╛ред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ 48-84% рдХреЗ рдУрдПрд╕рдбреА рдЙрдкрдпреЛрдЧ рдХреА рдПрдХ рд╕реАрдорд╛ рд╣реИ, рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рд╡рдЬреВрдж рдХрд┐ рдЙрдирдХрд╛ рдЖрдХрд╛рд░ рд╕рдорд╛рди рд╣реИ рдФрд░, рддрджрдиреБрд╕рд╛рд░, рд╡рдЬрдиред  рд╣рдо рд╕рд░реНрд╡рд░ рдХреЛ рд╡рдЬрди рдХреЗ рдмрд░рд╛рдмрд░ рдмрдирд╛рдиреЗ рдХреА рднреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдРрд╕рд╛ рд╕рд┐рд░реНрдл рд╣рдорд╛рд░реА рдкреВрд░реНрдгрддрд╛рд╡рд╛рдж рдХреЗ рд▓рд┐рдП рд╣реИред  рдФрд░ рдЗрд╕ рддрдереНрдп рдХреЗ рд╕рд╛рде рдХрд┐ рдЕрдВрдЬреАрд░ рдХреЛ рдбрд┐рд╕реНрдХ рдореЗрдВ рдЕрд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╕рдмрд╕реЗ рдмреБрд░реА рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рдЬрдм рдЖрдк рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдХрдо рд╕реЗ рдХрдо рдПрдХ рдУрдПрд╕рдбреА рдХреА рдкреВрд░реНрдг рд╕реНрдерд┐рддрд┐ (95%) рддрдХ рдкрд╣реБрдВрдЪрддреЗ рд╣реИрдВ, рддреЛ рдкреВрд░реА рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдмрдВрдж рд╣реЛ рдЬрд╛рддреА рд╣реИ рдФрд░ рдХреНрд▓рд╕реНрдЯрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рдЪрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдкреВрд░рд╛ рдХреНрд▓рд╕реНрдЯрд░!  рдФрд░ рдЗрд╕рд╕реЗ рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рдХреНрд▓рд╕реНрдЯрд░ рдЕрднреА рднреА рдЕрдВрддрд░рд┐рдХреНрд╖ рд╕реЗ рднрд░рд╛ рд╣реИред  рд╕рдм рдХреБрдЫ, рдлрд╛рдЗрдирд▓, рдмрд╛рд╣рд░ рдЖрдУ!  рдпрд╣ CRUSH рдХреА рдПрдХ рд╡рд╛рд╕реНрддреБрд╢рд┐рд▓реНрдк рд╡рд┐рд╢реЗрд╖рддрд╛ рд╣реИред  рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП рдХрд┐ рдЖрдк рдЫреБрдЯреНрдЯреА рдкрд░ рд╣реИрдВ, рдХреБрдЫ рдУрдПрд╕рдбреА рдиреЗ 85% (рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдкрд╣рд▓реА рдЪреЗрддрд╛рд╡рдиреА) рдХреЗ рдирд┐рд╢рд╛рди рдХреЛ рддреЛрдбрд╝ рджрд┐рдпрд╛, рдФрд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреЙрдХ рдореЗрдВ 10% рд╣реИред  рдФрд░ рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЗ рд╕рд╛рде 10% рдЗрддрдирд╛ / рд▓рдВрдмрд╛ рдирд╣реАрдВ рд╣реИред  рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ, рдЗрд╕ рддрд░рд╣ рдХреЗ рдбрд┐рдЬрд╛рдЗрди рдХреЗ рд╕рд╛рде, рд╕реЗрдл рдХреЛ рдПрдХ рдРрд╕реЗ рд╡реНрдпрдХреНрддрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬреЛ рдРрд╕реЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рддреИрдпрд╛рд░ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдЗрд╕рд▓рд┐рдП, рд╣рдордиреЗ рддрдп рдХрд┐рдпрд╛ рдХрд┐ рдЗрд╕рдХрд╛ рдорддрд▓рдм рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдбреЗрдЯрд╛ рдХреЛ рдЕрд╕рдВрддреБрд▓рд┐рдд рдХрд░рдирд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рдХрдИ OSD рдирдЬрд╝рджреАрдХреА рдирд┐рд╢рд╛рди (85%) рдХреЗ рдХрд░реАрдм рдереЗред </p><br><p>  рдХрдИ рддрд░реАрдХреЗ рд╣реИрдВ: </p><br><ul><li>  рдбреНрд░рд╛рдЗрд╡ рдЬреЛрдбрд╝реЗрдВ </li></ul><br><p>  рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ рдереЛрдбрд╝рд╛ рдмреЗрдХрд╛рд░ рд╣реИ рдФрд░ рдмрд╣реБрдд рдкреНрд░рднрд╛рд╡реА рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  рдбреЗрдЯрд╛ рд╕реНрд╡рдпрдВ рднреАрдбрд╝ рдУрдПрд╕рдбреА рд╕реЗ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдпрд╛ рдЖрдВрджреЛрд▓рди рдирдЧрдгреНрдп рд╣реЛрдЧрд╛ред </p><br><ul><li>  рдУрдПрд╕рдбреА (рд╡рдЬрди) рдХрд╛ рд╕реНрдерд╛рдпреА рд╡рдЬрди рдмрджрд▓реЗрдВ </li></ul><br><p>  рдЗрд╕рд╕реЗ рд╕рднреА рдЙрдЪреНрдЪ рдмрд╛рд▓реНрдЯреА (CRUSH рд╢рдмреНрджрд╛рд╡рд▓реА) рдкрджрд╛рдиреБрдХреНрд░рдо, OSD рд╕рд░реНрд╡рд░, рдбреЗрдЯрд╛ рдХреЗрдВрджреНрд░, рдЖрджрд┐ рдХреЗ рд╡рдЬрди рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрддрд╛ рд╣реИред  рдФрд░, рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдЙрди рдУрдПрд╕рдбреА рд╕реЗ рдирд╣реАрдВ, рдЬрд┐рдирдореЗрдВ рд╕реЗ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рд╕рд╣рд┐рдд рдбреЗрдЯрд╛ рдХреЗ рдЖрдВрджреЛрд▓рди рдХреЗ рд▓рд┐рдПред <br>  рд╣рдордиреЗ рдХреЛрд╢рд┐рд╢ рдХреА, рдПрдХ рдУрдПрд╕рдбреА рдХреЗ рд╡рдЬрди рдХреЛ рдХрдо рдХрд┐рдпрд╛, рдПрдХ рдФрд░ рдбреЗрдЯрд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рднрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдордиреЗ рдЗрд╕реЗ рдХрдо рдХрд░ рджрд┐рдпрд╛, рдлрд┐рд░ рддреАрд╕рд░рд╛ рдФрд░ рд╣рдордиреЗ рдорд╣рд╕реВрд╕ рдХрд┐рдпрд╛ рдХрд┐ рд╣рдо рдЗрд╕реЗ рд▓рдВрдмреЗ рд╕рдордп рддрдХ рдЦреЗрд▓реЗрдВрдЧреЗред </p><br><ul><li>  рдЧреИрд░-рд╕реНрдерд╛рдпреА OSD рд╡рдЬрди рдмрджрд▓реЗрдВ (REWEIGHT) </li></ul><br><p>  рдпрд╣ рд╡рд╣реА рд╣реИ рдЬрд┐рд╕реЗ 'рд╕реЗрдл рдСрд╢ рд░рд┐-рд╡реЗрдЯ-рдмрд╛рдп-рдпреВрдЬрд╝рд▓рд╛рдЗрдЬрд╝реЗрд╢рди' рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рддрдерд╛рдХрдерд┐рдд рдУрдПрд╕рдбреА рд╕рдорд╛рдпреЛрдЬрди рд╡рдЬрди рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХреА рдУрд░ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЙрдЪреНрдЪ рдмрд╛рд▓реНрдЯреА рдХрд╛ рд╡рдЬрди рдирд╣реАрдВ рдмрджрд▓рддрд╛ рд╣реИред  рдирддреАрдЬрддрди, рдбреЗрдЯрд╛ рдПрдХ рд╕рд░реНрд╡рд░ рдХреЗ рд╡рд┐рднрд┐рдиреНрди рдУрдПрд╕рдбреА рдХреЗ рдмреАрдЪ рд╕рдВрддреБрд▓рд┐рдд рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рд╕реАрдЖрд░рдпреВрдПрд╕рд╕реА рдмрд╛рд▓реНрдЯреА рдХреА рд╕реАрдорд╛рдУрдВ рд╕реЗ рдкрд░реЗ рдЬрд╛рдиреЗ рдХреЗ рдмрд┐рдирд╛, рдпрд╣ рдерд╛ред  рд╣рдо рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЛ рдкрд╕рдВрдж рдХрд░рддреЗ рд╣реИрдВ, рд╣рдордиреЗ рд╕реВрдЦреЗ рд░рди рдкрд░ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдХрд┐ рдХреНрдпрд╛ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрдЧрд╛ рдФрд░ рдареЗрд╕ рдкрд░ рдкреНрд░рджрд░реНрд╢рди рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдЬрдм рддрдХ рд╡рд┐рджреНрд░реЛрд╣реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдмреАрдЪ рдореЗрдВ рд╣рд┐рд╕реНрд╕реЗрджрд╛рд░реА рдирд╣реАрдВ рдорд┐рд▓реА рддрдм рддрдХ рд╕рдм рдХреБрдЫ рдареАрдХ рдерд╛ред  рдлрд┐рд░ рд╕реЗ googling, рд╕рдорд╛рдЪрд╛рд░ рдкрддреНрд░ рдкрдврд╝рдирд╛, рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╕рд╛рде рдкреНрд░рдпреЛрдЧ рдХрд░рдирд╛, рдФрд░ рдЕрдВрдд рдореЗрдВ рдпрд╣ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рд╕реНрдЯреЙрдк рдКрдкрд░ рдЙрд▓реНрд▓рд┐рдЦрд┐рдд рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХреБрдЫ рдЯреНрдпреВрдирдмрд▓реНрд╕ рдХреА рдХрдореА рдХреЗ рдХрд╛рд░рдг рдерд╛ред  рдлрд┐рд░ рд╕реЗ рд╣рдо рддрдХрдиреАрдХреА рдЛрдг рдореЗрдВ рдлрдВрд╕ рдЧрдПред  рдирддреАрдЬрддрди, рд╣рдо рдбрд┐рд╕реНрдХ рдФрд░ рд╕рдмрд╕реЗ рдЕрдкреНрд░рднрд╛рд╡реА рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд░рд╛рд╕реНрддреЗ рдкрд░ рдЪрд▓реЗ рдЧрдПред  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рд╣рдореЗрдВ рдЕрднреА рднреА рдРрд╕рд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА  рдпрд╣ рдХреНрд╖рдорддрд╛ рдореЗрдВ рдкрд░реНрдпрд╛рдкреНрдд рдорд╛рд░реНрдЬрд┐рди рдХреЗ рд╕рд╛рде CRUSH рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдХреЛ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рдИ рдЧрдИ рдереАред </p><br><p>  рд╣рд╛рдВ, рд╣рдо рдмреИрд▓реЗрдВрд╕рд░ (рд▓реНрдпреВрдорд┐рдирд╕ рдФрд░ рдЙрдЪреНрдЪрддрд░) рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирддреЗ рд╣реИрдВ, рдЬреЛ рдПрдордЖрд░рдЬреА рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдУрдПрд╕рдбреА рдХреЗ рдмреАрдЪ рдкреАрдЬреА рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдХреЗ рдбреЗрдЯрд╛ рдХреЗ рдЕрд╕рдорд╛рди рд╡рд┐рддрд░рдг рдХреА рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд░рд╛рдд рдореЗрдВред  рд▓реЗрдХрд┐рди рдореИрдВрдиреЗ рдЕрднреА рддрдХ рдЙрдирдХреЗ рдХрд╛рдо рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдХрд╛рд░рд╛рддреНрдордХ рд╕рдореАрдХреНрд╖рд╛ рдирд╣реАрдВ рд╕реБрдиреА рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╡рд░реНрддрдорд╛рди рдорд┐рдорд┐рдХ рдореЗрдВ рднреАред </p><br><p>  рдЖрдк рд╢рд╛рдпрдж рдХрд╣реЗрдВрдЧреЗ рдХрд┐ рддрдХрдиреАрдХреА рдЛрдг рд╡рд┐рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рд╣рдорд╛рд░реА рд╕рдорд╕реНрдпрд╛ рд╣реИ рдФрд░ рдореИрдВ рд╢рд╛рдпрдж рд╕рд╣рдордд рд╣реЛрдКрдВрдЧрд╛ред  рд▓реЗрдХрд┐рди рд╕рд┐рдл рдореЗрдВ рдареЗрд╕ рдХреЗ рд╕рд╛рде рдЪрд╛рд░ рд╕рд╛рд▓ рдХреЗ рд▓рд┐рдП, рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдХреЗрд╡рд▓ рдПрдХ рдбрд╛рдЙрдирдЯрд╛рдЗрдо рдПрд╕ 3 рджрд░реНрдЬ рдерд╛, рдЬреЛ рдкреВрд░реЗ 1 рдШрдВрдЯреЗ рддрдХ рдЪрд▓рд╛ред  рдФрд░ рдлрд┐рд░, рд╕рдорд╕реНрдпрд╛ RADOS рдореЗрдВ рдирд╣реАрдВ рдереА, рд▓реЗрдХрд┐рди RGW рдореЗрдВ, рдЬрд┐рд╕рдиреЗ рдЕрдкрдиреЗ рдбрд┐рдлрд╝реЙрд▓реНрдЯ 100 рдзрд╛рдЧреЗ рдЯрд╛рдЗрдк рдХрд┐рдП, рддрдВрдЧ рддрдВрдЧ рдХрд┐рдпрд╛ рдФрд░ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдиреЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдкреВрд░рд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ред  рдпрд╣ рдЕрднреА рднреА рд╣реИрдорд░ рдкрд░ рдерд╛ред  рдореЗрд░реА рд░рд╛рдп рдореЗрдВ, рдпрд╣ рдПрдХ рдЕрдЪреНрдЫрд╛ рд╕рдВрдХреЗрддрдХ рд╣реИ рдФрд░ рдпрд╣ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╣рд╛рд╕рд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдЕрдЪрд╛рдирдХ рдЖрдВрджреЛрд▓рди рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╕рд┐рдл рдкрд░ рд╕рдм рдХреБрдЫ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕рдВрджреЗрд╣ рдХрд░рддреЗ рд╣реИрдВред </p><br><h2 id="dikiy-gc">  рдЬрдВрдЧрд▓реА рдЬреА.рд╕реА. </h2><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, рдбрд┐рд╕реНрдХ рд╕реЗ рдбреЗрдЯрд╛ рд╣рдЯрд╛рдирд╛ рд╕реАрдзреЗ рдХрд╛рдо рдХреА рдорд╛рдВрдЧ рд╣реИ рдФрд░ рдЙрдиреНрдирдд рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдореЗрдВ, рд╣рдЯрд╛рдиреЗ рдореЗрдВ рджреЗрд░реА рд╣реЛ рд░рд╣реА рд╣реИ рдпрд╛ рдмрд┐рд▓реНрдХреБрд▓ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рд╕рд┐рдл рднреА рдПрдХ рдЙрдиреНрдирдд рдкреНрд░рдгрд╛рд▓реА рд╣реИ, рдФрд░ рдЖрд░рдЬреАрдбрдмреНрд▓реНрдпреВ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЬрдм рдПрдХ рдПрд╕ 3 рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕реА RADOS рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдбрд┐рд╕реНрдХ рд╕реЗ рддреБрд░рдВрдд рд╣рдЯрд╛ рдирд╣реАрдВ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  RGW s3 рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рд╣рдЯрд╛рдП рдЧрдП рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдПрдХ рдЕрд▓рдЧ рдЬреАрд╕реА-рд╕реНрдЯреНрд░реАрдо рд╕реАрдзреЗ RADOS рдкреВрд▓ рд╕реЗ рдСрдмреНрдЬреЗрдХреНрдЯ рд╣рдЯрд╛рддрд╛ рд╣реИ рдФрд░ рддрджрдиреБрд╕рд╛рд░, рдбрд┐рд╕реНрдХ рд╕реЗ рд╕реНрдердЧрд┐рдд рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд▓реНрдпреВрдорд┐рдирд╕ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЬреАрд╕реА рдХреЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдмрджрд▓рд╛рд╡ рдЖрдпрд╛, рдпрд╣ рдЕрдзрд┐рдХ рдЖрдХреНрд░рд╛рдордХ рддрд░реАрдХреЗ рд╕реЗ рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдЬреАрд╕реА рдкреИрд░рд╛рдореАрдЯрд░ рд╕рдорд╛рди рд░рд╣реЗред  рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ, рдореЗрд░рд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╣рдордиреЗ рдЬреАрд╕реА рдХреЛ рд╡рд┐рд▓рдВрдмрддрд╛ рдХреВрджрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реЗрд╡рд╛ рдХреА рдмрд╛рд╣рд░реА рдирд┐рдЧрд░рд╛рдиреА рдкрд░ рдХрд╛рдо рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛ред  рдпрд╣ rgw.gc. рдкреВрд▓ рдореЗрдВ рдПрдХ рдЙрдЪреНрдЪ IO рдХреЗ рд╕рд╛рде рдерд╛  рд▓реЗрдХрд┐рди рдЬрд┐рд╕ рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╣рдо рд╕рд╛рдордирд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рд╡рд╣ рд╕рд┐рд░реНрдл IO рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдорд╣рд╛рдХрд╛рд╡реНрдп рд╣реИред  рдЬрдм рдЬреАрд╕реА рдЪрд▓ рд░рд╣рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдлреЙрд░реНрдо рдХреЗ рдмрд╣реБрдд рд╕рд╛рд░реЗ рд▓реЙрдЧ рдЙрддреНрдкрдиреНрди рд╣реЛрддреЗ рд╣реИрдВ: </p><br><pre> <code class="html hljs xml">0 <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">cls</span></span></span><span class="hljs-tag">&gt;</span></span> /builddir/build/BUILD/ceph-12.2.5/src/cls/rgw/cls_rgw.cc:3284: gc_iterate_entries end_key=1_01530264199.726582828</code> </pre> <br><p>  рдЬрд╣рд╛рдВ рд╢реБрд░реБрдЖрдд рдореЗрдВ 0 рд▓реЙрдЧрд┐рдВрдЧ рд╕реНрддрд░ рд╣реИ рдЬрд┐рд╕ рдкрд░ рдпрд╣ рд╕рдВрджреЗрд╢ рдЫрдкрд╛ рд╣реИред  рдЬреИрд╕рд╛ рдХрд┐ рдпрд╣ рдерд╛, рд╢реВрдиреНрдп рд╕реЗ рдиреАрдЪреЗ рдХрдо рд▓реЙрдЧрд┐рдВрдЧ рдХрд╣реАрдВ рдирд╣реАрдВ рд╣реИред  рдирддреАрдЬрддрди, ~ 1 рдЬреАрдмреА рд▓реЙрдЧ рдПрдХ рдШрдВрдЯреЗ рдореЗрдВ рдПрдХ рдУрдПрд╕рдбреА рджреНрд╡рд╛рд░рд╛ рдЙрддреНрдкрдиреНрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рдФрд░ рд╕рдм рдХреБрдЫ рдареАрдХ рд╣реЛ рдЬрд╛рддрд╛ рдерд╛ рдпрджрд┐ рд╕реЗрдл рдиреЛрдбреНрд╕ рдбрд┐рд╕реНрдХ рд░рд╣рд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рдереЗ ... рд╣рдо рдУрдПрд╕ рдХреЛ рдкреАрдПрдХреНрд╕рдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реАрдзреЗ рдореЗрдореЛрд░реА рдореЗрдВ рд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╕рд┐рд╕реНрдЯрдо рд╡рд┐рднрд╛рдЬрди рдХреЗ рд▓рд┐рдП рд╕реНрдерд╛рдиреАрдп рдбрд┐рд╕реНрдХ рдпрд╛ рдПрдирдПрдлрдПрд╕, рдПрдирдмреАрдбреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред (/)ред  рдпрд╣ рд╕реНрдЯреЗрдЯрд▓реЗрд╕ рд╕рд░реНрд╡рд░ рдХреЛ рдмрджрд▓ рджреЗрддрд╛ рд╣реИред  рд░рд┐рдмреВрдЯ рдХреЗ рдмрд╛рдж, рдкреВрд░реЗ рд░рд╛рдЬреНрдп рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рди рджреНрд╡рд╛рд░рд╛ рд▓реБрдврд╝рдХрд╛ рд╣реБрдЖ рд╣реИред  рдпрд╣ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдореИрдВ рдХрд┐рд╕реА рддрд░рд╣ рдПрдХ рдЕрд▓рдЧ рд▓реЗрдЦ рдореЗрдВ рд╡рд░реНрдгрди рдХрд░реВрдВрдЧрд╛, рдЕрдм рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ 6 рдЬреАрдмреА рдореЗрдореЛрд░реА "/" рдХреЗ рд▓рд┐рдП рдЖрд╡рдВрдЯрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИ, рдЬрд┐рдирдореЗрдВ рд╕реЗ ~ 4 рдЖрдорддреМрд░ рдкрд░ рдореБрдлреНрдд рд╣реИред  рд╣рдо рд╕рднреА рд▓реЙрдЧ рдЧреНрд░реЗрдЧрд▓ рдореЗрдВ рднреЗрдЬрддреЗ рд╣реИрдВ рдФрд░ рдПрдХ рдЖрдХреНрд░рд╛рдордХ рд▓реЙрдЧ рд░реЛрдЯреЗрд╢рди рдкреЙрд▓рд┐рд╕реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЖрдорддреМрд░ рдкрд░ рдбрд┐рд╕реНрдХ / рд░реИрдо рдУрд╡рд░рдлреНрд▓реЛ рдХреЗ рд╕рд╛рде рдХрд┐рд╕реА рднреА рд╕рдорд╕реНрдпрд╛ рдХрд╛ рдЕрдиреБрднрд╡ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рд╣рдо рдЗрд╕рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рдирд╣реАрдВ рдереЗ, 12 рдУрдПрд╕рдбреА рдХреЗ рд╕рд╛рде, "/" рд╕рд░реНрд╡рд░ рдмрд╣реБрдд рдЬрд▓реНрджреА рд╕реЗ рднрд░ рдЧрдпрд╛, рд╕рдордп рдкрд░ рдЙрдкрд╕реНрдерд┐рдд рд▓реЛрдЧреЛрдВ рдиреЗ рдЬрд╝реИрдмрд┐рдХреНрд╕ рдореЗрдВ рдЯреНрд░рд┐рдЧрд░ рдХрд╛ рдЬрд╡рд╛рдм рдирд╣реАрдВ рджрд┐рдпрд╛ рдФрд░ рдУрдПрд╕рдбреА рдмрд╕ рдПрдХ рд▓реЙрдЧ рд▓рд┐рдЦрдиреЗ рдореЗрдВ рдЕрд╕рдорд░реНрдерддрд╛ рдХреЗ рдХрд╛рд░рдг рдмрдВрдж рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджрд┐рдпрд╛ред  рдирддреАрдЬрддрди, рд╣рдордиреЗ рдЬреАрд╕реА рдХреА рддреАрд╡реНрд░рддрд╛ рдХрдо рдХрд░ рджреА, рдХреНрдпреЛрдВрдХрд┐ рдЯрд┐рдХрдЯ рд╢реБрд░реВ рдирд╣реАрдВ рд╣реБрдЖ рдерд╛  рдпрд╣ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдерд╛, рдФрд░ рд╣рдордиреЗ рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдХреНрд░реЛрди рдореЗрдВ рдЬреЛрдбрд╝рд╛, рдЬрд┐рд╕рдореЗрдВ рд╣рдо рдУрдПрд╕рдбреА рд▓реЙрдЧреНрд╕ рдХреЛ рдерд░рдерд░рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдХрд░рддреЗ рд╣реИрдВ рдЬрдм рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд░рд╛рд╢рд┐ рдХреЛ рд▓реЙрдЧреЛрдЯреЗрдЯ рдХреЗ рдЗрдВрддрдЬрд╛рд░ рдХреЗ рдмрд┐рдирд╛ рдкрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╡реИрд╕реЗ, рд▓реЙрдЧрд┐рдВрдЧ рдХрд╛ рд╕реНрддрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмрдврд╝рд╛ рд╣реБрдЖ</a> рдерд╛ред </p><br><h2 id="placement-groups-i-hvalyonaya-masshtabiruemost">  рдкреНрд▓реЗрд╕рдореЗрдВрдЯ рд╕рдореВрд╣ рдФрд░ рдкреНрд░рд╢рдВрд╕рдиреАрдп рд╕реНрдХреЗрд▓реЗрдмрд┐рд▓рд┐рдЯреА </h2><br><p>  рдореЗрд░реА рд░рд╛рдп рдореЗрдВ, рдкреАрдЬреА рдХреЛ рд╕рдордЭрдирд╛ рд╕рдмрд╕реЗ рдХрдард┐рди рдЕрдореВрд░реНрддрддрд╛ рд╣реИред  CRUSH рдХреЛ рдЕрдзрд┐рдХ рдкреНрд░рднрд╛рд╡реА рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП PG рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдкреАрдЬреА рдХрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢реНрдп рд╕рдВрд╕рд╛рдзрди рдХреА рдЦрдкрдд рдХреЛ рдХрдо рдХрд░рдиреЗ, рдЙрддреНрдкрд╛рджрдХрддрд╛ рдФрд░ рдорд╛рдкрдиреАрдпрддрд╛ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдореВрд╣ рдХреА рд╡рд╕реНрддреБрдУрдВ рдХреЛ рджреЗрдирд╛ рд╣реИред  рд╡рд╕реНрддреБрдУрдВ рдХреЛ рд╕реАрдзреЗ, рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рд╕рдВрдмреЛрдзрд┐рдд рдХрд░рдирд╛, рдЙрдиреНрд╣реЗрдВ рдкреАрдЬреА рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдХрд┐рдП рдмрд┐рдирд╛ рдмрд╣реБрдд рдорд╣рдВрдЧрд╛ рд╣реЛрдЧрд╛ред </p><br><p>  рдкреАрдЬреА рдХреА рдореБрдЦреНрдп рд╕рдорд╕реНрдпрд╛ рдПрдХ рдирдП рдкреВрд▓ рдХреЗ рд▓рд┐рдП рдЙрдирдХреА рд╕рдВрдЦреНрдпрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░ рд░рд╣реА рд╣реИред  рд╕рд┐рдл рдмреНрд▓реЙрдЧ рд╕реЗ: </p><br><blockquote>  "рдЕрдкрдиреЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдкреАрдЬреА рдХреА рд╕рд╣реА рд╕рдВрдЦреНрдпрд╛ рдЪреБрдирдирд╛ рдереЛрдбрд╝реА рдХрд╛рд▓реА рдХрд▓рд╛ рд╣реИ-рдФрд░ рдПрдХ рджреБрдГрд╕реНрд╡рдкреНрди рд╣реИред" </blockquote><p>  рдпрд╣ рд╣рдореЗрд╢рд╛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИ рдФрд░ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╡рд┐рдЪрд╛рд░ рдФрд░ рдЧрдгрдирд╛ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </p><br><p>  рдореБрдЦреНрдп рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ: </p><br><ul><li>  рдУрдПрд╕рдбреА рдкрд░ рдмрд╣реБрдд рд╕рд╛рд░реЗ рдкреАрдЬреА рдЦрд░рд╛рдм рд╣реИрдВ, рдЙрдирдХреЗ рд░рдЦрд░рдЦрд╛рд╡ рдФрд░ рдмреНрд░реЗрдХ рдХреЗ рд▓рд┐рдП рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХрд╛ рдУрд╡рд░рд╕реНрдкреАрдбрд┐рдВрдЧ рд╣реЛрдЧрд╛ / рд░рд┐рдмреИрд▓реЗрдВрд╕ / рд░рд┐рдХрд╡рд░реА рдХреЗ рджреМрд░рд╛рдиред </li><li>  OSD рдкрд░ рдХреБрдЫ PG рдЦрд░рд╛рдм рд╣реИрдВ, рдкрд░рдлреЙрд░реНрдореЗрдВрд╕ рдЦрд░рд╛рдм рд╣реЛрдЧреА рдФрд░ OSD рдЕрд╕рдорд╛рди рд░реВрдк рд╕реЗ рдЖрдмрд╛рдж рд╣реЛ рдЬрд╛рдПрдВрдЧреЗред </li><li>  рдкреАрдЬреА рдХреА рд╕рдВрдЦреНрдпрд╛ 2 рдбрд┐рдЧреНрд░реА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред рдЗрд╕рд╕реЗ "CRUSH рдХреА рд╢рдХреНрддрд┐" рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдорд┐рд▓реЗрдЧреАред </li></ul><br><p>  рдФрд░ рдпрд╣рд╛рдБ рдпрд╣ рдореЗрд░реЗ рд╕рд╛рде рдЬрд▓рддрд╛ рд╣реИред  рдкреАрдЬреА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдпрд╛ рд╡рд╕реНрддреБрдУрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╕реАрдорд┐рдд рдирд╣реАрдВ рд╣реИрдВред  рдПрдХ рдкреАрдЬреА рдХреА рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдХрд┐рддрдиреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ (рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ) рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ?  рдХреНрдпрд╛ рдпрд╣ рдЙрд╕рдХреЗ рдЖрдХрд╛рд░ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ?  рдХреНрдпрд╛ рдпрд╣ рдЗрд╕ рдкреАрдЬреА рдХреЗ рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ?  рдЕрдЧрд░ рдореБрдЭреЗ рдкрд░реНрдпрд╛рдкреНрдд рдореЗрдореЛрд░реА, рддреЗрдЬ рд╕реАрдкреАрдпреВ рдФрд░ рдПрдХ рдЕрдЪреНрдЫрд╛ рдиреЗрдЯрд╡рд░реНрдХ рд╣реИ рддреЛ рдХреНрдпрд╛ рдореБрдЭреЗ рд╕реНрдЯреАрдо рдмрд╛рде рд▓реЗрдирд╛ рдЪрд╛рд╣рд┐рдП? <br>  рдФрд░ рдЖрдкрдХреЛ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рднрд╡рд┐рд╖реНрдп рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднреА рд╕реЛрдЪрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред  рдкреАрдЬреА рдирдВрдмрд░ рдХрдо рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ - рдХреЗрд╡рд▓ рд╡реГрджреНрдзрд┐ рд╣реБрдИ рд╣реИред  рдЗрд╕реА рд╕рдордп, рдЗрд╕реЗ рдХрд░рдиреЗ рдХреА рдЕрдиреБрд╢рдВрд╕рд╛ рдирд╣реАрдВ рдХреА рдЬрд╛рддреА рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдкреАрдЬреА рдореЗрдВ, рдирдП рдФрд░ рдЬрдВрдЧрд▓реА рдкреБрдирд░реНрдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд╛рдЬрди рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реЛрдЧрд╛ред </p><br><blockquote>  "рдПрдХ рдкреВрд▓ рдХреЗ рдкреАрдЬреА рдХрд╛рдЙрдВрдЯ рдХреЛ рдмрдврд╝рд╛рдирд╛ рд╕реАрдлрд╝ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╕рдмрд╕реЗ рдкреНрд░рднрд╛рд╡реА рдШрдЯрдирд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИ, рдФрд░ рдпрджрд┐ рд╕рдВрднрд╡ рд╣реЛ рддреЛ рдЙрддреНрдкрд╛рджрди рд╕рдореВрд╣реЛрдВ рдХреЗ рд▓рд┐рдП рдмрдЪрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред" </blockquote><p>  рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рд╕рдВрднрд╡ рд╣реЛ, рддреЛ рдЖрдкрдХреЛ рднрд╡рд┐рд╖реНрдп рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рддреБрд░рдВрдд рд╕реЛрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЙрджрд╛рд╣рд░рдгред </p><br><p>  14x2 рдЯреАрдмреА рдУрдПрд╕рдбреА рдХреЗ рд╕рд╛рде 3 рд╕рд░реНрд╡рд░реЛрдВ рдХрд╛ рдПрдХ рд╕рдореВрд╣, рдХреБрд▓ 42 рдУрдПрд╕рдбреАред  рдкреНрд░рддрд┐рдХреГрддрд┐ 3, рдЙрдкрдпреЛрдЧреА рд╕реНрдерд╛рди ~ 28 рдЯреАрдмреАред  S3 рдХреЗ рддрд╣рдд рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдбреЗрдЯрд╛ рдкреВрд▓ рдФрд░ рдЗрдВрдбреЗрдХреНрд╕ рдкреВрд▓ рдХреЗ рд▓рд┐рдП PG рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЖрд░рдЬреАрдбрдмреНрд▓реНрдпреВ рдЕрдзрд┐рдХ рдкреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рджреЛрдиреЛрдВ рдкреНрд░рд╛рдердорд┐рдХ рд╣реИрдВред </p><br><p>  рд╣рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреАрдЬреА рдХреИрд▓рдХреБрд▓реЗрдЯрд░ рдореЗрдВ рдЬрд╛рддреЗ рд╣реИрдВ</a> (рдРрд╕рд╛ рдХреИрд▓рдХреБрд▓реЗрдЯрд░ рд╣реИ), рд╣рдо рдУрдПрд╕рдбреА рдкрд░ рдЕрдиреБрд╢рдВрд╕рд┐рдд 100 рдкреАрдЬреА рдХреЗ рд╕рд╛рде рд╡рд┐рдЪрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ, рд╣рдореЗрдВ рдХреЗрд╡рд▓ 1312 рдкреАрдЬреА рдорд┐рд▓рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рд╕рдм рдХреБрдЫ рдЗрддрдирд╛ рд╕рд░рд▓ рдирд╣реАрдВ рд╣реИ: рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдкрд░рд┐рдЪрдпрд╛рддреНрдордХ рд╣реИ - рдХреНрд▓рд╕реНрдЯрд░ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рдПрдХ рд╡рд░реНрд╖ рдХреЗ рднреАрддрд░ рддреАрди рдмрд╛рд░ рдмрдврд╝реЗрдЧрд╛, рд▓реЗрдХрд┐рди рд▓реЛрд╣реЗ рдХреЛ рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж рдЦрд░реАрджрд╛ рдЬрд╛рдПрдЧрд╛ред  рд╣рдо "рд▓рдХреНрд╖реНрдп рдкреАрдЬреА рдкреНрд░рддрд┐ рдУрдПрд╕рдбреА" рдХреЛ рддреАрди рдЧреБрдирд╛ рдмрдврд╝рд╛рдХрд░ 300 рдХрд░ рджреЗрддреЗ рд╣реИрдВ рдФрд░ рд╣рдореЗрдВ 4480 рдкреАрдЬреА рдорд┐рд▓рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/ce/o3/bo/ceo3boailgnmcx_2_w6un6_covi.png"></p><br><p>  рд╕рдВрдмрдВрдзрд┐рдд рдкреВрд▓ рдХреЗ рд▓рд┐рдП PGs рдХреА рд╕рдВрдЦреНрдпрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ - рд╣рдореЗрдВ рдПрдХ рдЪреЗрддрд╛рд╡рдиреА рдорд┐рд▓рддреА рд╣реИ: рдмрд╣реБрдд рд╕рд╛рд░реЗ PG рдкреНрд░рддрд┐ OSD ... рдкрд╣реБрдВрдЪреЗред  200 (Luminous) рдХреА рд╕реАрдорд╛ рдХреЗ рд╕рд╛рде OSD рдкрд░ ~ 300 PG рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ред  рд╡реИрд╕реЗ рдпрд╣ 300 рд╣реБрдЖ рдХрд░рддрд╛ рдерд╛ред  рдФрд░ рд╕рдмрд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╕рднреА рдЕрдирд╛рд╡рд╢реНрдпрдХ рдкреАрдЬреА рдХреЛ рдкрд┐рдпрд░рд┐рдВрдЧ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИ, рдЕрд░реНрдерд╛рдд рдпрд╣ рдХреЗрд╡рд▓ рдПрдХ рдЪреЗрддрд╛рд╡рдиреА рдирд╣реАрдВ рд╣реИред  рдирддреАрдЬрддрди, рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рд╣рдо рд╕рдм рдХреБрдЫ рд╕рд╣реА рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рд╕реАрдорд╛рдПрдВ рдмрдврд╝рд╛ рд░рд╣реЗ рд╣реИрдВ, рдЪреЗрддрд╛рд╡рдиреА рдХреЛ рдмрдВрдж рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдФрд░ рдЖрдЧреЗ рдмрдврд╝ рд░рд╣реЗ рд╣реИрдВред </p><br><p>  рдПрдХ рдФрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЙрджрд╛рд╣рд░рдг рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИред </p><br><p>  рдПрд╕ 3, 152 рдЯреАрдмреА рдкреНрд░рдпреЛрдЧ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рдорд╛рддреНрд░рд╛, 1.81 рдЯреАрдмреА рдкрд░ 252 рдУрдПрд╕рдбреА, рдУрдПрд╕рдбреА рдкрд░ ~ 105 рдкреАрдЬреАред  рдХреНрд▓рд╕реНрдЯрд░ рдзреАрд░реЗ-рдзреАрд░реЗ рдмрдврд╝рддрд╛ рдЧрдпрд╛, рд╣рдорд╛рд░реЗ рджреЗрд╢ рдореЗрдВ рдирдП рдХрд╛рдиреВрдиреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдм рдХреБрдЫ рдареАрдХ рдерд╛ рдЬрдм рддрдХ рдХрд┐ 1 рдкреАрдмреА, рдпрд╛рдиреА + ~ 850 рдЯреАрдмреА рдХреЗ рд╡рд┐рдХрд╛рд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА, рдФрд░ рд╕рд╛рде рд╣реА рдЖрдкрдХреЛ рдкреНрд░рджрд░реНрд╢рди рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдереА, рдЬреЛ рдЕрдм рдПрд╕ 3 рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╣реИред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдо 6 (5.7 рд╡рд╛рд╕реНрддрд╡рд┐рдХ) рдЯреАрдмреА рдХреЗ рдбрд┐рд╕реНрдХ рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ 3 рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рд╣рдо + 447 рдУрдПрд╕рдбреА рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред  рд╡рд░реНрддрдорд╛рди рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, рд╣рдо 37 рдкреАрдЬреА рдХреЗ рд╕рд╛рде 699 рдУрдПрд╕рдбреА рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдпрджрд┐ рд╣рдо рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╡рдЬрдиреЛрдВ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рдкреБрд░рд╛рдиреЗ рдУрдПрд╕рдбреА рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рджрд░реНрдЬрди рдкреАрдЬреА рд╣реИрдВред  рддреЛ рдЖрдк рдореБрдЭреЗ рдмрддрд╛рдЗрдП рдХрд┐ рдпрд╣ рдХрд┐рддрдиреЗ рдзреАрд░рдЬ рд╕реЗ рдХрд╛рдо рдХрд░реЗрдЧрд╛?  рдкреАрдЬреА рдХреА рдПрдХ рдЕрд▓рдЧ рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХреГрддреНрд░рд┐рдо рд░реВрдк рд╕реЗ рдорд╛рдкрдирд╛ рдХрд╛рдлреА рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВрдиреЗ рдЬреЛ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдП, рд╡реЗ рдмрддрд╛рддреЗ рд╣реИрдВ рдХрд┐ рдЗрд╖реНрдЯрддрдо рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП рдпрд╣ 50 рдкреАрдЬреА рд╕реЗ 2 рдЯреАрдмреА рдУрдПрд╕рдбреА рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдФрд░ рдЖрдЧреЗ рдХреА рд╡реГрджреНрдзрд┐ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛?  рдкреАрдЬреА рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐ рдХреЗ рдмрд┐рдирд╛, рдЖрдк рдкреАрдЬреА рдХреА рдореИрдкрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдУрдПрд╕рдбреА 1: 1 рдкрд░ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рд╢рд╛рдпрдж рдореБрдЭреЗ рдХреБрдЫ рд╕рдордЭ рдореЗрдВ рдирд╣реАрдВ рдЖ рд░рд╣рд╛ рд╣реИ? </p><br><p>  рд╣рд╛рдВ, рдЖрдк рд╡рд╛рдВрдЫрд┐рдд рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдкреАрдЬреА рдХреЗ рд╕рд╛рде рдЖрд░рдЬреАрдбрдмреНрд▓реНрдпреВ рдХреЗ рд▓рд┐рдП рдПрдХ рдирдпрд╛ рдкреВрд▓ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдПрд╕ 3 рдХреНрд╖реЗрддреНрд░ рдХрд╛ рдирдХреНрд╢рд╛ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╛ рдкрд╛рд╕ рдореЗрдВ рдПрдХ рдирдпрд╛ рдХреНрд▓рд╕реНрдЯрд░ рднреА рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рдорд╛рдирдирд╛ тАЛтАЛрд╣реЛрдЧрд╛ рдХрд┐ рдпреЗ рд╕рднреА рдмреИрд╕рд╛рдЦреА рд╣реИрдВред  рдФрд░ рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдпрд╣ рдЕрдкрдиреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рдХрд╛рд░рдг рдПрдХ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╕реЗрдл рдХреА рддрд░рд╣ рд▓рдЧрддрд╛ рд╣реИ, рдЖрд░рдХреНрд╖рдг рдХреЗ рд╕рд╛рде рдкреАрдЬреА рддрд░рд╛рдЬреВред  рдЖрдкрдХреЛ рдпрд╛ рддреЛ рд╡рд┐рдХрд╛рд╕ рдХреА рддреИрдпрд╛рд░реА рдореЗрдВ рдЕрдХреНрд╖рдо vorings рдХреЗ рд╕рд╛рде рд░рд╣рдирд╛ рд╣реЛрдЧрд╛, рдпрд╛ рдХреБрдЫ рдмрд┐рдВрджреБ рдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╕рднреА рдбреЗрдЯрд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛, рдпрд╛ рдкреНрд░рджрд░реНрд╢рди рдкрд░ рд╕реНрдХреЛрд░ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдФрд░ рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдХреЗ рд╕рд╛рде рд░рд╣рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╛ рдпрд╣ рд╕рдм рдХрд░рдХреЗ рдЬрд╛рдирд╛ред </p><br><p>  рдореБрдЭреЗ рдЦреБрд╢реА рд╣реИ рдХрд┐ рд╕реЗрдл рдХреЗ рдбреЗрд╡рд▓рдкрд░реНрд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдордЭрддреЗ рд╣реИрдВ</a> рдХрд┐ рдкреАрдЬреА рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рдЬрдЯрд┐рд▓ рдФрд░ рдЕрддрд┐рд╢реНрдпреЛрдХреНрддрд┐рдкреВрд░реНрдг рдЕрдореВрд░реНрддрддрд╛ рд╣реИ рдФрд░ рд╡рд╣ рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛рдирдирд╛ рдмреЗрд╣рддрд░ рд╣реИред </p><br><blockquote>  "рдЪрдордХрджрд╛рд░ рдореЗрдВ рд╣рдордиреЗ рдЕрдкрдиреЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдбреНрд░рд╛рдЗрд╡ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдВрдд рдореЗрдВ рд╕рдмрд╕реЗ рдЖрдо рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреЛ рдЦрддреНрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдбрд╝реЗ рдХрджрдо рдЙрдард╛рдП рд╣реИрдВ, рдФрд░ рдЖрдЧреЗ рджреЗрдЦрддреЗ рд╣реБрдП рд╣рдо рдЕрдВрддрддрдГ рдкреАрдЬреА рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЫрд┐рдкрд╛рдиреЗ рдХрд╛ рд▓рдХреНрд╖реНрдп рд░рдЦрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рд╡реЗ рдХреБрдЫ рдРрд╕рд╛ рди рдХрд░реЗрдВ рдЬреЛ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ рдХрднреА рднреА рдЬрд╛рдирдирд╛ рд╣реЛрдЧрд╛ рдпрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪреЛ тАЭред </blockquote><p>  VxFlex рдореЗрдВ рдкреАрдЬреА рдпрд╛ рдХрд┐рд╕реА рднреА рдПрдирд╛рд▓реЙрдЧ рдХреА рдХреЛрдИ рдЕрд╡рдзрд╛рд░рдгрд╛ рдирд╣реАрдВ рд╣реИред  рдЖрдк рдкреВрд▓ рдореЗрдВ рдбрд┐рд╕реНрдХ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рдФрд░ рдпрд╣ рд╣реИред  рдФрд░ рдЗрд╕рд▓рд┐рдП 16 рдкреАрдмреА рддрдХред  рдХрд▓реНрдкрдирд╛ рдХреАрдЬрд┐рдП, рдХреБрдЫ рднреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдЗрди PGs рдХреА рд╕реНрдерд┐рддрд┐ рдХреЗ рдвреЗрд░ рдирд╣реАрдВ рд╣реИрдВ, рдбрд┐рд╕реНрдХ рдкреВрд░реЗ рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдирд┐рдкрдЯрд╛рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдХреНрдпреЛрдВрдХрд┐  рдбрд┐рд╕реНрдХ рдПрдХ рдкреВрд░реЗ рдХреЗ рд░реВрдк рдореЗрдВ vxFlex рдХреЛ рджреА рдЬрд╛рддреА рд╣реИ (рдЙрдирдХреЗ рдКрдкрд░ рдХреЛрдИ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдирд╣реАрдВ рд╣реИ) рдкреВрд░реНрдгрддрд╛ рдХрд╛ рдЖрдХрд▓рди рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИ рдФрд░ рдРрд╕реА рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИред  рдореБрдЭреЗ рдпрд╣ рднреА рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдпрд╣ рдмрддрд╛рдирд╛ рдХрд┐рддрдирд╛ рд╕реБрдЦрдж рд╣реИред </p><br><h2 id="nuzhno-zhdat-sp1">  "SP1 рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ" </h2><br><p>  "рд╕рдлрд▓рддрд╛" рдХреА рдПрдХ рдФрд░ рдХрд╣рд╛рдиреАред  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ, RADOS рд╕рдмрд╕реЗ рдкреНрд░рдореБрдЦ рдХреА-рд╡реИрд▓реНрдпреВ рд╕реНрдЯреЛрд░реЗрдЬ рд╣реИред  S3, RADOS рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдпрд╣ рднреА рдЖрджрд┐рдо рд╣реИ, рд▓реЗрдХрд┐рди рдЕрднреА рднреА рдереЛрдбрд╝рд╛ рдЕрдзрд┐рдХ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рд╣реИред ,  S3      .  ,   , RGW       .   тАФ  RADOS-,      OSD.         .   ,               . OSD            down.   ,      ,   .  ,   scrub'          .      ,    -  503,      . </p><br><p> <strong>Bucket Index resharding</strong> тАФ  ,       (RADOS-) , ,    OSD,         . </p><br><p> ,  ,        Jewel        !  Hammer,      ..    -.       ? </p><br><p>  Hammer       20+  ,       ,     OSD     Graylog ,    .     , ..   IO   .    Luminous, ..         .    Luminous,    , .   ,      . IO    index-,   ,         .    ,  IO     ,      . ,     тАж   ; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> : </p><br><p>  ,      .       , ..           ,   . </p><br><p> ,  Hammer-&gt;Jewel   -   . OSD     -  .        ,    OSD       . </p><br><p>    тАФ   ,     ,       .   Hammer    s3,   .      ,  .       ,    ,      etag,   body,     .           .      ,     . Suspend    .   ""           .            ,        . </p><br><h2 id="holivary-na-temu-chisla-replik">      </h2><br><p>       ,    2 тАФ  ,         Cloudmouse. ,    Ceph, , . </p><br><p>  vxFlex OS   2    . ,             .       ,    .           ,         .        ,    ,    ,     Dell EMC. </p><br><h2 id="proizvoditelnost">  </h2><br><p>    .       ,       ?  . ,      .   ,     Ceph, vxFlex          .       -  .        ,               . </p><br><p>   9   ceph-devel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> : ,     CPU  (  Xeon'  !)   IOPS  All-NVMe   Ceph 12.2.7  bluestore. </p><br><p> ,       ,  "" Ceph    .    (  Hammer)         Ceph    ,        s3     .  ,  ScaleIO  Ceph RBD   .   Ceph,     тАФ      CPU.       RDMA  InfiniBand, jemalloc   . ,    10-20 ,       iops,      io, Ceph      . vxFlex          .    тАФ  Ceph  system time,  scaleio тАФ io wait. ,    bluestore,      ,    ,         -, ,     Ceph.    ScaleIO  .  ,      , Ceph           Dell EMC. </p><br><p> ,       ,         PG.        (),     IO. -   PG       IO,     ,      . ,               nearfull.       ,    . </p><br><p>  vxFlex     -   ,      .       (   ceph-volume),         ,     . </p><br><h2 id="scrub"> Scrub </h2><br><p> , .  , ,      Ceph. </p><br><p>             ,      . " "    тАФ   -    ,    . ,      2 TB     &gt;50%,       Ceph,     .            .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="></a> ,       . </p><br><p>  vxFlex OS         ,    ,     .        тАФ bandwidth  .            .         ,        . </p><br><p> ,  , vxFlex     scrub-error. Ceph      2   . </p><br><h2 id="monitoring">  </h2><br><p> Luminous тАФ     .        .    MGR-     Zabbix              (3 ).       .   ,   ,  -         IO  ,     gc, .   тАФ   RGW . </p><br><p><img src="https://habrastorage.org/webt/ys/ya/xq/ysyaxqffjukjtgkv3ecnu0_q2ro.png"></p><br><p>       .     . <br>      S3,    "" : </p><br><p><img src="https://habrastorage.org/webt/ax/ge/u5/axgeu5iyyjami3qszjo97akj6oc.png"></p><br><p>   Ceph  , ,   ,       ,    . </p><br><p>  ,   eph   Graylog   GELF    .  , ,  OSD down, out, failed  .          , ,   OSD    down  ,     . </p><br><p><img src="https://habrastorage.org/webt/sd/hz/av/sdhzavl-jyjrmajz5zlsjamujzo.png"></p><br><p> - ,    OSD       heartbeat      failed (.  ).    <code>vm.zone_reclaim_mode=1</code>     NUMA. </p><br><p>     Ceph.  c vxFlex   .       : </p><br><p><img src="https://habrastorage.org/webt/hu/nz/e2/hunze2e6ucygc4anzyep2wku050.png"></p><br><p>     : </p><br><p><img src="https://habrastorage.org/webt/jv/fa/ey/jvfaeyd7ql3kalcrcabrckekuqg.png"></p><br><p>  IO    : </p><br><p><img src="https://habrastorage.org/webt/sy/vp/lq/syvplqbfmjtek_wii033vszoq9s.png"></p><br><p>              IO,      Ceph. </p><br><p>    : </p><br><p><img src="https://habrastorage.org/webt/h2/8j/ff/h28jff_jzpstuucf5wfx8vrrmay.png"></p><br><p>   Ceph,    Luminous     .   2.0,    Mimic  ,      . </p><br><h2 id="vxflex-tozhe-ne-idealen"> vxFlex    </h2><br><p>     <strong>Degraded state</strong> ,          . </p><br><p>  vxFlex тАФ        RH   .   7.5  , .  Ceph   RBD  cephfs тАФ          . </p><br><p> vxFlex       Ceph. vxFlex тАФ    ,   , , . </p><br><p>     16 PB,     .  eph     2 PB тАж </p><br><h2 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br><p>  ,  Ceph       ,     ,      ,      Ceph тАФ .      . </p><br><p>       ,  Ceph       " ".       ,  "  ,   ,     R&amp;D,  - ".    .       " ",  Ceph      ,    ,     . </p><br><p>      Ceph  2k18  ,    .      24/7       ( S3, ,  EBS),             ,   Ceph    .  ,    .        тАФ       .         /     maintenance        backfilling  ,  c Ceph   , ,       . </p><br><p>      Ceph    ?  , "     ".      Ceph.    .      ,         ,   ,  ,    тАж <br>    ! <br>  HEALTH_OK! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi422905/">https://habr.com/ru/post/hi422905/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi422895/index.html">Google URL рдХреЛ рдорд╛рд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИ</a></li>
<li><a href="../hi422897/index.html">рдмреБрд░рд╛, рд▓реЗрдХрд┐рди рдореЗрд░рд╛: рдХреИрд╕реЗ рд╕рдЪ рдореЗрдВ рднрдпрд╛рдирдХ рд╕реАрдПрд╕рдПрд╕ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../hi422899/index.html">рд╕рддрд░реНрдХ рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рддрд╣рдд: рд╣реЙрд╕реНрдЯрд▓ рдЯреИрд░рд┐рдл рдХреА рдирд┐рдЧрд░рд╛рдиреА рдХреИрд╕реЗ рдХрд░реЗрдВ рдФрд░ рд╡реАрдкреАрдПрд╕ рдХреИрдЯрд▓реЙрдЧ рдХреЛ рдЕрджреНрдпрддрд┐рдд рд░рдЦреЗрдВ</a></li>
<li><a href="../hi422901/index.html">рдкреБрддрд┐рди рдХреЗ рд▓рд┐рдП рдПрдХ рджрд┐рд▓ рдХреА рджрд░ рдХреА рдирд┐рдЧрд░рд╛рдиреА, тАЛтАЛрдпрд╛ рдПрдХ Ritmer рдХреНрдпрд╛ рд╣реИ</a></li>
<li><a href="../hi422903/index.html">рд╣рдордиреЗ 1C: Enterprise: Java, PostgreSQL, рд╣реЗрдЬрд╝реЗрд▓рдХрд╛рд╕реНрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрддреНрдпрдзрд┐рдХ рднрд░реА рд╣реБрдИ рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╕реЗрд╡рд╛ рдХреИрд╕реЗ рдФрд░ рдХреНрдпреЛрдВ рд▓рд┐рдЦреА</a></li>
<li><a href="../hi422907/index.html">2018 рд░реЛрдмреЛрдЯ рд╡реИрдХреНрдпреВрдо рдХреНрд▓реАрдирд░ рддреНрд╡рд░рд┐рдд рд╕рдВрджрд░реНрдн</a></li>
<li><a href="../hi422909/index.html">10 рд╕рдмрд╕реЗ рд▓реЛрдХрдкреНрд░рд┐рдп 404 рдорд╣реЛрддреНрд╕рд╡ рд░реЗрдЯреНрд░реЛ рдЯреЙрдХ рд╡реАрдбрд┐рдпреЛ</a></li>
<li><a href="../hi422915/index.html">рдореИрдВ рдПрдХ рдХрд╛рд░реНрдпрд╛рд▓рдп рдФрд░ рдХреБрдХреАрдЬрд╝ рдХреЗ рдмрд┐рдирд╛ рдПрдХ рд╡рд░рд┐рд╖реНрда рдХреА рддрд▓рд╛рд╢ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ: рд╣рдордиреЗ рдЙрди рдХрд░реНрдордЪрд╛рд░рд┐рдпреЛрдВ рдХреА рдЦреЛрдЬ рдХреИрд╕реЗ рдЖрдпреЛрдЬрд┐рдд рдХреА рд╣реИ рдЬреЛ 100% рджреВрд░рд╕реНрде рд╣реИрдВ</a></li>
<li><a href="../hi422917/index.html">рдореЗрд░реЗ рдкрд╛рд╕ рдХреЛрдИ рдореБрдВрд╣ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдореБрдЭреЗ рдЪреАрдЦрдирд╛ рдкрдбрд╝рддрд╛ рд╣реИред рдПрдЖрдИ рдФрд░ рдиреИрддрд┐рдХрддрд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░</a></li>
<li><a href="../hi422919/index.html">рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рдмрд╛рдЗрдХ рдПрд╕рдЖрдИрдкреА рдФрд░ рдХреНрд▓рд╛рдЙрдб рдЯреЗрд▓реАрдлреЛрдиреА рдмрд╛рддрдЪреАрдд</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>