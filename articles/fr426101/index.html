<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¥ ğŸ‘©ğŸ¼â€âœˆï¸ ğŸ›£ï¸ IntÃ©gritÃ© des donnÃ©es dans une architecture de microservices - comment la garantir sans transactions distribuÃ©es et connectivitÃ© Ã©troite ğŸ‘¨ğŸ¾â€ğŸ¤â€ğŸ‘¨ğŸ½ â›°ï¸ ğŸšµğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour Ã  tous. Comme vous le savez peut-Ãªtre, j'avais l'habitude d' Ã©crire et de parler davantage du stockage, de Vertica, du stockage de Big Data et...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IntÃ©gritÃ© des donnÃ©es dans une architecture de microservices - comment la garantir sans transactions distribuÃ©es et connectivitÃ© Ã©troite</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/426101/"><p>  Bonjour Ã  tous.  Comme vous le savez peut-Ãªtre, j'avais l'habitude d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ã©crire</a> et de parler davantage du stockage, de Vertica, du stockage de Big Data et d'autres choses analytiques.  DÃ©sormais, toutes les autres bases de donnÃ©es, non seulement analytiques, mais aussi OLTP (PostgreSQL) et NOSQL (MongoDB, Redis, Tarantool) sont Ã©galement tombÃ©es dans mon domaine de responsabilitÃ©. </p><br><p>  Cette situation m'a permis de considÃ©rer une organisation qui a plusieurs bases de donnÃ©es comme une organisation qui a une base de donnÃ©es hÃ©tÃ©rogÃ¨ne (hÃ©tÃ©rogÃ¨ne) distribuÃ©e.  Une seule base de donnÃ©es hÃ©tÃ©rogÃ¨ne distribuÃ©e, constituÃ©e d'un tas de PostgreSQL, Redis et Mong ... Et, Ã©ventuellement, d'une ou deux bases de donnÃ©es Vertica. </p><br><p> Le travail de cette base distribuÃ©e unique gÃ©nÃ¨re un tas de tÃ¢ches intÃ©ressantes.  Tout d'abord, du point de vue des affaires, il est important que tout soit normal avec des donnÃ©es se dÃ©plaÃ§ant le long d'une telle base.  Je n'utilise pas spÃ©cifiquement le terme intÃ©gritÃ©, cohÃ©rence, car  le terme est complexe, et dans diffÃ©rentes nuances de considÃ©rer un SGBD (thÃ©orÃ¨me A <strong>C</strong> ID et <strong>C</strong> AP), il a une signification diffÃ©rente. </p><br><p>  La situation avec une base distribuÃ©e est aggravÃ©e si une entreprise essaie de passer Ã  une architecture de microservice.  Sous le chat, je parle de la faÃ§on d'assurer l'intÃ©gritÃ© des donnÃ©es dans une architecture de microservice sans transactions distribuÃ©es et connectivitÃ© Ã©troite.  (Et Ã  la fin j'explique pourquoi j'ai choisi cette illustration pour l'article). </p><br><p><img src="https://habrastorage.org/webt/br/li/ui/brliuiadpszbdp6shhwg-a7agpu.png"></p><a name="habracut"></a><br><p>  Selon Chris Richardson (l'un des Ã©vangÃ©listes les plus cÃ©lÃ¨bres de l'architecture de microservices), cette architecture a deux approches pour travailler avec des bases de donnÃ©es: base de donnÃ©es partagÃ©e et base de donnÃ©es par service. </p><br><p><img src="https://habrastorage.org/webt/ry/jh/xk/ryjhxkec5ilup0adwjqav-aoikg.png"></p><br><p>  La base de donnÃ©es partagÃ©e est une bonne premiÃ¨re Ã©tape, une excellente solution pour une petite entreprise sans plans de croissance ambitieux.  De plus, ce modÃ¨le est en soi un anti-modÃ¨le du point de vue de l'architecture de microservices, comme  deux services partageant une base commune ne peuvent pas Ãªtre testÃ©s et mis Ã  l'Ã©chelle indÃ©pendamment.  C'est-Ã -dire  ces services sont plutÃ´t un service qui tend Ã  devenir un monolithe. </p><br><p>  Le modÃ¨le de base de donnÃ©es par service suppose que chaque service possÃ¨de sa propre base de donnÃ©es.  Un service ne peut accÃ©der aux donnÃ©es d'un autre service que via l'API (au sens large), sans connexion directe Ã  sa base de donnÃ©es. </p><br><p>  Le modÃ¨le de base de donnÃ©es par service permet aux Ã©quipes des services correspondants de sÃ©lectionner les bases de donnÃ©es Ã  leur guise.  Quelqu'un est capable dans MongoDB, quelqu'un croit en PostgreSQL, quelqu'un a besoin de Redis (le risque de perte de donnÃ©es lors de l'arrÃªt est acceptable pour ce service), et quelqu'un stocke gÃ©nÃ©ralement les donnÃ©es dans des fichiers CSV sur disque (et pourquoi, en fait , et non?). </p><br><p><img src="https://habrastorage.org/webt/8y/uf/ln/8yuflnhn4nzbfso12xm39_6_p9u.png"></p><br><p>  Travailler avec un tel Â«zooÂ» de bases de donnÃ©es soulÃ¨ve la tÃ¢che de restaurer l'ordre dans les donnÃ©es Ã  un tout nouveau niveau de complexitÃ©. </p><br><h1 id="acid-i-mikroservisnaya-arhitektura">  Architecture ACID et microservice </h1><br><p>  Examinons la tÃ¢che de mettre les choses en ordre Ã  travers le prisme de l'ensemble d'exigences ACID basÃ© sur un SGBD classique: nous allons dÃ©velopper l'essence de chaque lettre de l'abrÃ©viation et illustrer les difficultÃ©s de cette lettre dans l'architecture de microservices. </p><br><p>  <strong>(A) CID - AtomicitÃ©.</strong>  <strong>AtomicitÃ© - tout ou rien.</strong> </p><br><p>  Selon l'exigence d'atomicitÃ©, il est impÃ©ratif de terminer toutes les Ã©tapes (avec des rÃ©pÃ©titions possibles), si une Ã©tape importante Ã©choue, annuler les Ã©tapes terminÃ©es. </p><br><p>  L'illustration ci-dessus illustre le processus de test d'achat d'un service VIP: l'argent est rÃ©servÃ© dans la facturation (1), un service bonus est activÃ© pour un utilisateur (2), le type d'utilisateur est changÃ© en Pro (3), l'argent rÃ©servÃ© dans la facturation est dÃ©bitÃ© (4).  Les quatre Ã©tapes doivent Ãªtre terminÃ©es ou non. </p><br><p><img src="https://habrastorage.org/webt/ag/gt/cx/aggtcxiv5ip-anc82hoivfcpxyg.png"></p><br><p>  Dans ce cas, vous ne pouvez pas bloquer au milieu du processus, par consÃ©quent, l'asynchronie est prÃ©fÃ©rable, dans les cas extrÃªmes, le synchronisme avec le dÃ©lai d'expiration intÃ©grÃ©. </p><br><p>  <strong>A (C) ID - CohÃ©rence.</strong>  <strong>CohÃ©rence - chaque Ã©tape ne doit pas contredire les conditions aux limites.</strong> </p><br><p>  Exemples classiques de conditions pour, par exemple, envoyer de l'argent du client A dans le service 1 au client B dans le service 2: Ã  la suite d'un tel envoi d'argent ne devrait pas devenir moins (l'argent ne devrait pas Ãªtre perdu pendant le transfert) ou plus (il est inacceptable d'envoyer le mÃªme argent Ã  deux utilisateurs en mÃªme temps).  Pour se conformer Ã  cette exigence, vous devez coder les conditions quelque part et vÃ©rifier les donnÃ©es pour les conditions (idÃ©alement, sans appels supplÃ©mentaires). </p><br><p><img src="https://habrastorage.org/webt/hz/ha/zn/hzhazn63hlnpo7hojezmf5gmuyw.png"></p><br><p>  <strong>ACI (D) - DurabilitÃ©.</strong>  <strong>L'exigence de durabilitÃ© signifie que les effets des opÃ©rations ne disparaissent pas.</strong> </p><br><p>  Dans les conditions de persistance de Polyglot, un service peut fonctionner sur une base de donnÃ©es qui peut rÃ©guliÃ¨rement Â«perdreÂ» les donnÃ©es qui y sont enregistrÃ©es.  Une astuce similaire peut Ãªtre obtenue mÃªme Ã  partir de bases de donnÃ©es solides comme PostgreSQL, si la rÃ©plication asynchrone y est activÃ©e.  L'illustration montre comment les modifications enregistrÃ©es dans Master, mais qui n'ont pas atteint Slave via la rÃ©plication asynchrone, peuvent Ãªtre dÃ©truites en brÃ»lant le serveur Master.  Pour garantir les exigences de durabilitÃ©, il est nÃ©cessaire de pouvoir diagnostiquer et rÃ©cupÃ©rer correctement ces pertes. </p><br><p><img src="https://habrastorage.org/webt/du/y0/fv/duy0fv-a9l8auvniphyeguskx_g.png"></p><br><p>  <strong>Et oÃ¹ suis-je, demandez-vous?</strong> </p><br><p>  Et nulle part.  L'isolement dans un environnement de plusieurs services asynchrones indÃ©pendants est une exigence technique.  La recherche moderne a montrÃ© que de vrais processus commerciaux peuvent Ãªtre mis en Å“uvre sans isolement.  L'isolement simplifie la rÃ©flexion en minimisant la concurrence (le dÃ©veloppement de l'informatique parallÃ¨le est plus difficile pour un programmeur), mais l'architecture des microservices est intrinsÃ¨quement massive-parallÃ¨le, l'isolement dans un tel environnement est redondant. </p><br><p>  Il existe de nombreuses approches pour se conformer aux exigences ci-dessus.  L'algorithme de transactions distribuÃ©es le plus connu fourni par ce que l'on appelle la validation en deux phases (2PC).  Malheureusement, la mise en Å“uvre de validations en deux phases nÃ©cessite la rÃ©Ã©criture de tous les services impliquÃ©s.  Et le plus grave: cet algorithme n'est pas trÃ¨s productif.  Les illustrations issues d'Ã©tudes rÃ©centes montrent que cet algorithme montre une certaine performance sur une base distribuÃ©e de deux serveurs, mais avec une augmentation du nombre de serveurs, la productivitÃ© ne croÃ®t pas linÃ©airement ... Ou plutÃ´t, elle ne croÃ®t pas du tout. </p><br><p><img src="https://habrastorage.org/webt/2t/eh/c6/2tehc6ckxsixeoqru14yp75pfy0.png"></p><br><p>  L'un des principaux avantages de l'architecture de microservices est la possibilitÃ© d'augmenter linÃ©airement les performances en ajoutant simplement de plus en plus de serveurs.  Il s'avÃ¨re que si nous utilisons un commit en deux phases pour garantir l'intÃ©gritÃ© distribuÃ©e, ce processus deviendra un goulot d'Ã©tranglement, un frein Ã  la croissance de la productivitÃ©, malgrÃ© l'augmentation du nombre de serveurs. </p><br><p>  Comment garantir l'intÃ©gritÃ© distribuÃ©e (exigences ACiD) sans commits en deux phases, avec la possibilitÃ© d'Ã©voluer de maniÃ¨re linÃ©aire dans les performances? </p><br><p>  La recherche moderne (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">An Evaluation of Distributed Concurrency Control. VLDB 2017</a> ) soutient que la soi-disant Â«approche optimisteÂ» peut aider.  La diffÃ©rence entre l'engagement en deux phases et Â«l'approche optimisteÂ» gÃ©nÃ©ralisÃ©e peut Ãªtre illustrÃ©e par la diffÃ©rence entre l'ancien magasin soviÃ©tique (avec un comptoir) et un supermarchÃ© moderne comme Auchan.  Dans un magasin avec un comptoir, chaque client est considÃ©rÃ© comme suspect et reÃ§oit un contrÃ´le maximal.  D'oÃ¹ les lignes et les conflits.  Et au supermarchÃ©, l'acheteur est considÃ©rÃ© comme honnÃªte par dÃ©faut, ils lui donnent la possibilitÃ© de s'approcher des Ã©tagÃ¨res et de remplir les chariots.  Bien sÃ»r, il existe des outils de surveillance pour attraper les escrocs (camÃ©ras, sÃ©curitÃ©), mais la plupart des acheteurs n'ont jamais Ã  s'en occuper. </p><br><p>  Par consÃ©quent, le supermarchÃ© peut Ãªtre agrandi, agrandi, simplement en plaÃ§ant plus de caisses.  Il en va de mÃªme avec l'architecture de microservices: si l'intÃ©gritÃ© distribuÃ©e est assurÃ©e par une Â«approche optimisteÂ», lorsque seuls les processus oÃ¹ quelque chose s'est mal passÃ© sont en outre chargÃ©s de vÃ©rifications.  Et les processus normaux passent sans vÃ©rifications supplÃ©mentaires. </p><br><p>  C'est important.  L 'Â«approche optimisteÂ» comprend plusieurs algorithmes.  Je voudrais vous parler de la saga - l'algorithme pour maintenir l'intÃ©gritÃ© distribuÃ©e, recommandÃ© par Chris Richardson. </p><br><h1 id="sagi--elementy-algoritma">  Sagas - Ã©lÃ©ments de l'algorithme </h1><br><p>  L'algorithme d'affaissement a deux options.  Par consÃ©quent, dans un premier temps, je voudrais dÃ©crire universellement les Ã©lÃ©ments requis de l'algorithme afin que la description soit adaptÃ©e aux deux options. </p><br><p>  <strong>Ã‰lÃ©ment 1.</strong> Canal fiable et persistant de livraison d'Ã©vÃ©nements entre les services, garantissant "au moins une livraison".  C'est-Ã -dire  si l'Ã©tape 2 du processus s'est terminÃ©e avec succÃ¨s, une notification (Ã©vÃ©nement) Ã  ce sujet doit atteindre l'Ã©tape 3 au moins une fois, les livraisons rÃ©pÃ©tÃ©es sont acceptables, mais rien ne doit Ãªtre perdu.  "Persistant" signifie que le canal doit stocker les notifications pendant un certain temps (2-3 jours, une semaine) afin qu'un service qui a perdu les derniÃ¨res modifications en raison de la perte de la base de donnÃ©es (voir l'exemple de durabilitÃ©, dans l'illustration c'est l'Ã©tape 2), puisse restaurer ces changements en rejouant les Ã©vÃ©nements de la chaÃ®ne. </p><br><p><img src="https://habrastorage.org/webt/du/kr/sy/dukrsykrnmfcf4u6srrgffx4f5a.png"></p><br><p>  <strong>Ã‰lÃ©ment 2.</strong> Idempotence des appels de service grÃ¢ce Ã  l'utilisation d'une clÃ© d'idempotence unique.  Imaginez que moi (l'utilisateur) lance le processus d'achat d'un package VIP (voir l'exemple pour Atomicity).  Au dÃ©but du processus, on me donne une clÃ© unique, la clÃ© d'idempotence, par exemple, 42. Ensuite, l'appel Ã  chacune des Ã©tapes (1 â†’ 2 â†’ 3 â†’ 4) doit Ãªtre effectuÃ© avec la clÃ© d'idempotence indiquÃ©e.  Dans le paragraphe ci-dessus, la possibilitÃ© de l'arrivÃ©e rÃ©pÃ©tÃ©e du mÃªme message au service (Ã  l'Ã©tape) est Ã©voquÃ©e.  Le service (Ã©tape) doit automatiquement pouvoir ignorer l'arrivÃ©e rÃ©pÃ©tÃ©e de l'Ã©vÃ©nement traitÃ©, en vÃ©rifiant la rÃ©pÃ©tition par la clÃ© idempotency.  Autrement dit, si tous les services (Ã©tapes de processus) sont idempotents, afin de rÃ©pondre aux exigences d'atomicitÃ© et de durabilitÃ©, il suffit de rediriger vers les Ã©tapes correspondant aux Ã©vÃ©nements des canaux.  Les Ã©tapes qui ont ignorÃ© les Ã©vÃ©nements les exÃ©cuteront et les Ã©tapes qui ont dÃ©jÃ  terminÃ© les Ã©vÃ©nements les ignoreront en raison de l'idempotency. </p><br><p><img src="https://habrastorage.org/webt/1u/5i/0e/1u5i0epymw6_tmvodacj2yeirra.png"></p><br><p>  <strong>Ã‰lÃ©ment 3.</strong> Annulation des appels de service (Ã©tapes) par clÃ© idempotency. </p><br><p>  Pour garantir l'atomicitÃ© (voir l'exemple), si le processus avec la clÃ© idempotency 42, par exemple, s'est arrÃªtÃ© / est tombÃ© Ã  l'Ã©tape 3, il est alors nÃ©cessaire d'annuler l'exÃ©cution rÃ©ussie des Ã©tapes 1 et 2 pour la clÃ© 42. Pour cela, chaque Ã©tape de processus obligatoire doit avoir une Ã©tape de Â«compensationÂ» , Une mÃ©thode API qui annule l'exÃ©cution de l'Ã©tape requise pour la clÃ© d'idempotence spÃ©cifiÃ©e (42).  L'implÃ©mentation des appels compensatoires est un Ã©lÃ©ment difficile mais nÃ©cessaire au raffinement des services dans le cadre de l'implÃ©mentation de l'algorithme d'affaissement. </p><br><p><img src="https://habrastorage.org/webt/rp/oc/pb/rpocpblpnxfk5uw6mk6-2cvywdi.png"></p><br><p>  Les trois Ã©lÃ©ments Ã©numÃ©rÃ©s ci-dessus sont pertinents pour les deux versions de la mise en Å“uvre de la Â«sagÂ»: orchestrÃ©e et chorÃ©graphique. </p><br><h1 id="orkestriruemye-sagi">  Sagas orchestrÃ©es </h1><br><p>  L'algorithme plus simple et plus Ã©vident pour les sagas orchestrÃ©es est plus facile Ã  comprendre et Ã  mettre en Å“uvre.  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">excellent article,</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">kevteev a</a> dÃ©crit l'algorithme et le processus de mise en Å“uvre du mÃ©canisme des sagas orchestrÃ©es dans Avito.  Leur algorithme suppose l'existence d'un service de contrÃ´le, "orchestrant" les appels de service dans le cadre de processus mÃ©tier desservis.  Le mÃªme service de surveillance peut avoir sa propre base de donnÃ©es (par exemple, PostgreSQL), qui agit comme un canal fiable de livraison d'Ã©vÃ©nements persistants (Ã©lÃ©ment 1). </p><br><h1 id="horeograficheskie-sagi">  Sagas chorÃ©graphiques </h1><br><p>  La saga chorÃ©graphique est plus dÃ©licate.  Ici, un bus de donnÃ©es qui met en Å“uvre les exigences suivantes doit agir comme un canal persistant fiable: publication de type "ignorer", livraison d'Ã©vÃ©nements de publication-abonnement, au moins une fois de livraison.  C'est-Ã -dire  chaque Ã©tape de chaque processus doit recevoir une commande pour fonctionner Ã  partir du bus et y envoyer le message de rÃ©ussite, sur le dÃ©but de l'Ã©tape suivante, afin qu'il le lise Ã©galement sur le bus et poursuive le processus.  De plus, pour chaque message, il peut y avoir plusieurs abonnÃ©s. </p><br><p>  La saga chorÃ©graphique devrait Ã©galement avoir un service de contrÃ´le, un service de sagas, mais beaucoup plus Â«lÃ©gerÂ».  Le service doit connaÃ®tre les processus mÃ©tier enregistrÃ©s dans le systÃ¨me, la composition des Ã©tapes incluses dans chaque processus.  Il doit Ã©galement Ã©couter le bus, surveiller l'exÃ©cution de chaque processus (chaque clÃ© d'idempotence), et seulement si quelque chose s'est mal passÃ©, soit lancer des Â«rÃ©pÃ©titionsÂ» d'Ã©tapes spÃ©cifiques, soit lancer des Â«annulationsÂ», des Â«compensationsÂ» pour les Ã©tapes suivies. </p><br><h1 id="nyuansy">  Nuances </h1><br><p>  L'une des nuances les plus importantes des sagas qui les distinguent des transactions classiques est un Ã©cart par rapport Ã  la linÃ©aritÃ©, la sÃ©quence et l'obligation de chaque Ã©tape.  Une saga n'est pas nÃ©cessairement une chaÃ®ne linÃ©aire d'Ã©vÃ©nements, elle peut Ãªtre un graphique dirigÃ©: un nouvel Ã©vÃ©nement d'enregistrement d'utilisateur peut engendrer plusieurs Ã©tapes en parallÃ¨le (envoi de SMS, enregistrement d'une connexion, gÃ©nÃ©ration d'un mot de passe, envoi d'un e-mail), dont certaines peuvent Ãªtre facultatives.  Dans une premiÃ¨re approximation, il semble que dans une telle saga "ramifiÃ©e" avec des Ã©tapes facultatives, il est difficile de dÃ©terminer l'achÃ¨vement de la saga (processus), mais, en fait, tout est simple: la saga (processus) est terminÃ©e lorsque toutes les Ã©tapes requises sont terminÃ©es, dans n'importe quel ordre. </p><br><p><img src="https://habrastorage.org/webt/ta/ff/rz/taffrzux1gpdt5c_-dtqilxmqh4.png"></p><br><p>  La deuxiÃ¨me nuance, plus typique des sagas chorÃ©graphiques, mais Ã©galement possible pour les sagas orchestrÃ©es, est de choisir une approche pour l'enregistrement des processus mÃ©tier, types de sagas dans le service sagas.  L'exemple d'atomicitÃ© dÃ©crit un processus de quatre Ã©tapes obligatoires consÃ©cutives. </p><br><p>  Qui a enregistrÃ© ce processus, indiquÃ© toutes les Ã©tapes, placÃ© les dÃ©pendances et les Ã©tapes obligatoires?  La rÃ©ponse Ã©vidente mais dÃ©modÃ©e est que l'enregistrement du processus doit Ãªtre effectuÃ© de maniÃ¨re centralisÃ©e dans le service d'affaissement.  Mais cette rÃ©ponse n'est pas trÃ¨s cohÃ©rente avec l'architecture de microservices.  Dans l'architecture de microservices, il est plus prometteur, plus productif et plus rapide d'enregistrer des processus ascendants.  C'est-Ã -dire  de ne pas noter toutes les nuances du processus dans le service sag, mais de permettre aux services individuels de Â«s'intÃ©grerÂ» dans les processus existants par eux-mÃªmes, en indiquant leur nature contraignante / facultative et leurs prÃ©dÃ©cesseurs obligatoires. </p><br><p>  C'est-Ã -dire  le processus d'enregistrement d'un utilisateur dans le service d'affaissement peut initialement comprendre trois Ã©tapes, puis, pendant le dÃ©veloppement du systÃ¨me, sept autres Ã©tapes y seront intÃ©grÃ©es, et une Ã©tape sera Ã©crite, et il y en aura neuf.  Un tel schÃ©ma Â«anarchisteÂ» et Â«dÃ©centralisÃ©Â» est difficile Ã  tester, Ã  mettre en Å“uvre un processus strict et coordonnÃ©, mais il est beaucoup plus pratique pour les Ã©quipes Agiles, pour une Ã©volution produit multidirectionnelle continue. </p><br><p>  En fait, ici.  Avec une prÃ©sentation sÃ©rieuse, je pense qu'il vaut la peine de terminer, sinon l'article s'est avÃ©rÃ© trop volumineux. </p><br><hr><br><p>  Voici un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien vers la prÃ©sentation de</a> ce matÃ©riel, j'ai fait un reportage sur ce sujet Ã  Highload Siberia 2018. <br>  UPD - et vidÃ©o de la confÃ©rence: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6HvSpqBc8fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><hr><br><h1 id="epilog">  Ã‰pilogue </h1><br><p>  En fin de compte, je voudrais essayer d'expliquer tout ce qui prÃ©cÃ¨de dans un langage plus figuratif. <br>  AprÃ¨s tout, qu'est-ce qu'une saga depuis le dÃ©but?  Cette intrigue, cette aventure du Moyen Ã‚ge ... Ou du Game of Thrones.  Un Ã©vÃ©nement a lieu (une bataille, un mariage, quelqu'un meurt), la nouvelle s'envole Ã  travers le monde Ã  travers des messagers, des pigeons voyageurs, des marchands.  Lorsque les informations parviennent aux intÃ©ressÃ©s (dans une semaine, un mois, un an), ils rÃ©agissent: ils envoient des armÃ©es, dÃ©clarent la guerre, exÃ©cutent quelqu'un et de nouveaux messages volent. </p><br><p>  Aucun organisme de rÃ©glementation ne surveille la sÃ©quence des actions.  Aucune transaction, aucun retour en arriÃ¨re, dans le sens d'annuler l'action, comme si elle n'avait jamais Ã©tÃ©.  De maniÃ¨re adulte, chaque action se dÃ©roule pour toujours.  Il peut Ãªtre indemnisÃ©, mais c'est prÃ©cisÃ©ment l'action (meurtre) et l'indemnisation (salaire pour la tÃªte, vira), et non l'abolition de la mort. </p><br><p>  Les Ã©vÃ©nements prennent beaucoup de temps, proviennent de diffÃ©rentes sources, les actions se dÃ©roulent en parallÃ¨le et pas strictement sÃ©quentiellement.  Et assez souvent, de nouveaux participants apparaissent soudainement dans l'intrigue, qui dÃ©cident de participer (les dragons arrivent;)) ... et certains des anciens participants meurent soudainement. </p><br><p>  De telles choses.  Cela semble Ãªtre un gÃ¢chis et un chaos, mais tout fonctionne, la coordination interne du monde n'est pas rompue, l'intrigue se dÃ©veloppe et est cohÃ©rente ... Bien que parfois imprÃ©visible. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr426101/">https://habr.com/ru/post/fr426101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr426091/index.html">8 analyseurs de journaux cloud pour Ã©valuer l'environnement de travail</a></li>
<li><a href="../fr426093/index.html">MonÃ©tisation des donnÃ©es des utilisateurs par rapport Ã  la publicitÃ© intÃ©grÃ©e: avantages et inconvÃ©nients</a></li>
<li><a href="../fr426095/index.html">Webinaire ouvert Â«Comment ne pas Ã©crire en PythonÂ»</a></li>
<li><a href="../fr426097/index.html">Arduino Projet "RoboCar4W Robot Machine"</a></li>
<li><a href="../fr426099/index.html">Typegram News</a></li>
<li><a href="../fr426103/index.html">Webinaire Â«Avez-vous besoin de KubernetesÂ» le 15 octobre Ã  19h00</a></li>
<li><a href="../fr426105/index.html">Ma prise en une semaine</a></li>
<li><a href="../fr426111/index.html">Google va toujours lancer un service de recherche censurÃ© en Chine</a></li>
<li><a href="../fr426113/index.html">Google ActualitÃ©s et Leo Tolstoy: Visualisation des reprÃ©sentations vectorielles des mots avec t-SNE</a></li>
<li><a href="../fr426115/index.html">La pratique de l'utilisation du modÃ¨le d'acteur dans la plateforme backend de Quake Champions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>