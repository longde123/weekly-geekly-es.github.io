<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ–²ï¸ âœ‹ğŸ¾ ğŸ¤ŸğŸ¾ Kelas PHP untuk mengunduh dan mengunggah file ke server ğŸ¥— ğŸ‘°ğŸ¾ ğŸ”·</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata Pengantar 
 Saya tidak memikirkan hal ini sebelumnya dan menggunakan solusi yang sudah jadi seperti Drupal untuk mengunggah file, dan saya tidak ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kelas PHP untuk mengunduh dan mengunggah file ke server</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484492/"><p><img align="left" src="https://habrastorage.org/webt/qu/9b/ic/qu9bicztga_xfajiltnqeb43iys.png"></p><h3>  Kata Pengantar </h3><br>  Saya tidak memikirkan hal ini sebelumnya dan menggunakan solusi yang sudah jadi seperti Drupal untuk mengunggah file, dan saya tidak perlu lagi.  Sampai beberapa bulan yang lalu saya memiliki kebutuhan mendesak tidak hanya untuk memberikan file. <br><p>  Ada banyak informasi di Internet tentang cara mengunduh file dari server dan mengunggah file ke server, serta antar server.  Tetapi tidak ada solusi sederhana yang akan lebih atau kurang universal. </p><br><p>  Saya membunuh beberapa hari untuk mempelajari semua jenis header dan variasi penggunaan cUrl, tetapi menyatukan semuanya tidak berhasil.  Saya melihat banyak kelas serupa yang berbeda, tetapi di mana-mana ada solusi parsial, atau sangat membingungkan, atau keduanya. </p><br><p>  Dan hanya berkat artikel tunggal, potongan-potongan informasi dari forum dan segala macam komentar, kami berhasil menyusun puzzle.  Saya tidak mengklaim bahwa solusi saya sepenuhnya universal, tetapi sangat nyaman dalam banyak kasus, meskipun terserah Anda. </p><br><p>  Jika ada yang memiliki keinginan untuk meningkatkan solusi saya untuk masalah ini dan tidak memiliki pengetahuan dalam arah ini, maka saya akan senang jika Anda membuat perbaikan atau penambahan pada kode yang tersedia untuk umum di <a href="https://github.com/borivit/CargaDes" rel="nofollow">GitHub</a> . </p><a name="habracut"></a><br><p>  <strong>Dan sekarang to the point, fungsi dari kelas CargaDes:</strong> </p><br><ol><li>  Unggah file melalui browser tanpa menunjukkan lokasi penyimpanannya dan dengan kemungkinan melanjutkan kembali; </li><li>  Mengunggah file ke server melalui browser dengan indikator kemajuan; </li><li>  Mengunduh file dari server jarak jauh ke server Anda dengan indikator kemajuan; </li><li>  Unggah file dari server Anda ke server jarak jauh dengan indikator kemajuan. </li></ol><br><p>  <strong>Pertama, Anda perlu <a href="https://github.com/borivit/CargaDes" rel="nofollow">mengunduh</a> dan menghubungkan kelas CargaDes:</strong> </p><br><h3 id="1-otdacha-fayla-cherez-brauzer-bez-pokaza-ego-mesta-hraneniya-s-vozmozhnostyu-dokachki-i-regulirovaniya-skorosti">  1. Unggah file melalui browser tanpa menunjukkan lokasi penyimpanannya dengan kemampuan untuk melanjutkan dan mengontrol kecepatan </h3><br><pre><code class="php hljs">$realFilePath = dirname( <span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span> ) . <span class="hljs-string"><span class="hljs-string">'/file.zip'</span></span>;<span class="hljs-comment"><span class="hljs-comment">//    </span></span></code> </pre> <br><p>  Metode ini sangat mirip dengan Drupal dan sejenisnya: </p><br><pre> <code class="php hljs">$CargaDes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CargaDes; $client_d = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClientD($realFilePath); <span class="hljs-comment"><span class="hljs-comment">//   $client_d-&gt;erroff = false;//True    $client_d-&gt;lang = 'ru'; $client_d-&gt;speed = 25;//     kB,  0   ;</span></span></code> </pre> <br><p>  Saya menambahkan lebih banyak kickback dengan Apache, tetapi direktif XSendFile On harus diaktifkan </p><br><pre> <code class="php hljs">$client_d-&gt;apache = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>;<span class="hljs-comment"><span class="hljs-comment">//True    Apache(           ) //  $CargaDes-&gt;setOnStart(new Exe($client_d)); echo $CargaDes-&gt;Start();</span></span></code> </pre> <br><p>  Segera setelah menjalankan metode, browser akan menampilkan jendela untuk menyimpan file </p><br><h3 id="2-zagruzka-faylaov-na-server-cherez-brauzer-s-indikatorom-progressa">  2. Unggah file ke server melalui browser dengan indikator kemajuan </h3><br><pre> <code class="php hljs">$url_server = <span class="hljs-string"><span class="hljs-string">"http://_.com/upload.php"</span></span>;<span class="hljs-comment"><span class="hljs-comment">//     . $multiple = 0;//True   , False     $CargaDes = new CargaDes; $client_u = new ClientU($url_server, $multiple); //   $client_u-&gt;param = 0;//       param -   param=&gt;array( ) $client_u-&gt;ajaxParam = '';//    - data.append("key", "val"); $client_u-&gt;returns = '';//    ajax $client_u-&gt;err_file_zero;//     $client_u-&gt;allowed_ext = 'gif,jpg,png,jpe,jpeg,zip,rar,exe,doc,pdf,swf,flv,avi,mp4,mp3';//   $client_u-&gt;err_file_ext;//       $client_u-&gt;max_file_size = 0;//      ,    $client_u-&gt;err_file_size;//       $client_u-&gt;max_file_count = 0;//    ,    $client_u-&gt;btn_input;//    $client_u-&gt;btn_enviar;//    $client_u-&gt;btn_del;//      $client_u-&gt;color;//    $client_u-&gt;css;//    $server-&gt;lang = 'ru'; //   $CargaDes-&gt;setOnStart(new Exe($client_u, 'p' )); echo $CargaDes-&gt;Start();</span></span></code> </pre> <br><p>  Setelah metode ini dijalankan, tombol untuk memilih file dan tombol untuk mengunduh file akan muncul.  Indikator akan muncul untuk setiap file yang dipilih secara individual. </p><br><p><img src="https://habrastorage.org/webt/n2/je/az/n2jeazizdeqoek4mf4ffurfbt4u.png"></p><br><h3 id="3-skachivanie-faylov-s-udalennogo-servera-na-svoy-server">  3. Mengunduh file dari server jarak jauh ke server Anda </h3><br><pre> <code class="php hljs">$CargaDes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CargaDes; $server = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Server(); <span class="hljs-comment"><span class="hljs-comment">//  $CargaDes-&gt;setOnStart(new Exe($server, 'p')); echo $CargaDes-&gt;Start(); $server-&gt;remoteUrl = 'http://.com/test/file.zip'; $server-&gt;realFilePath = dirname( __FILE__ ) . '/file.zip'; //   $server-&gt;progress = 1;///  $server-&gt;speed = 0;//  $server-&gt;style;//  $server-&gt;color;//    $server-&gt;erroff = false;//   $server-&gt;debug = false;// $server-&gt;login = 0;//   ,     .htaccess $server-&gt;pass = 0;//   ,     .htaccess $server-&gt;lang = 'ru'; //  $CargaDes-&gt;setOnStart(new Exe($server, 's')); $r = $CargaDes-&gt;Start(); //  if( $r['test'] == false ) {echo $r['result'];}</span></span></code> </pre> <br><h3 id="4-otdaem-fayl-na-udalennyy-server-so-svoego-servera">  4. Kami memberikan file ke server jauh dari server kami </h3><br><pre> <code class="php hljs">$CargaDes = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CargaDes; $server = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Server(); <span class="hljs-comment"><span class="hljs-comment">//  $CargaDes-&gt;setOnStart(new Exe($server, 'p')); echo $CargaDes-&gt;Start(); $server-&gt;remoteUrl = 'http://.com/test/priem.php'; $server-&gt;realFilePath = dirname( __FILE__ ) . file.zip;//    //   $server-&gt;post = array( 'login' =&gt; 'test', 'pass' =&gt; '12345' );//        $server-&gt;progress = 1;///  $server-&gt;speed = 0;//  $server-&gt;style;//  $server-&gt;color;//    $server-&gt;erroff = false;//   $server-&gt;debug = false;// $server-&gt;login = 0;//   ,     .htaccess $server-&gt;pass = 0;//   ,     .htaccess $server-&gt;lang = 'ru'; //  $CargaDes-&gt;setOnStart(new Exe($server, 'u')); $r = $CargaDes-&gt;Start(); //  if( $r['test'] == false ) {echo $r['result'];}</span></span></code> </pre> <br><h3 id="po-itogu-hochu-skazat">  Sebagai hasilnya, saya ingin mengatakan </h3><br><p>  Jika kelas ini membantu setidaknya satu orang, saya akan sangat senang karenanya.  Seperti yang saya katakan di awal, saya akan dengan senang hati memberikan kritik dan tambahan yang membangun yang dapat meningkatkan kelas.  <a href="https://github.com/borivit/CargaDes" rel="nofollow">Tautan ke CargaDes.class</a> . </p><br><hr><br><p>  Mengubah metode penggunaan kelas dalam artikel.  Dan dia menambahkan deskripsi tentang apa yang telah berubah di kelas. </p><br><p>  Itu selesai bekerja pada kesalahan, kalau boleh saya sebut itu. </p><br><p>  Apa yang telah dilakukan: </p><br><ol><li>  Dia membawa kode ke satu gaya menggunakan PHPSTORM dan mencoba untuk mematuhi PSR; </li><li>  Menghapus garis bawah dari nama fungsi; </li><li>  Benar-benar dikecualikan jQuery; </li><li>  Menghapus semua metode statis; </li><li>  Dibuat kelas sebagai paket komposer; </li><li>  cUrl membuat alas kaki dengan metode terpisah; </li><li>  Saya mencoba untuk mematuhi SRP; </li><li>  Membuat pengecualian dan sedikit mengubah output kesalahan; </li><li>  Memperbaiki badan konstruktor; </li><li>  Mencoba untuk memperbaiki konstruksi if-else; </li><li>  Mengambil js dan html di luar kelas; </li><li>  Menghapus tag penutup?&gt;; </li><li>  Menambahkan kemampuan untuk menerjemahkan pesan; </li><li>  Menambahkan folder dengan contoh yang dapat dieksekusi. </li></ol><br><p>  Apa yang belum dilakukan: </p><br><ol><li>  Terjemahan komentar ke dalam bahasa Inggris (jika semua ini tidak perlu bagi siapa pun, lalu mengapa membuang waktu); </li><li>  Saya tidak mengubah nama fungsi menjadi yang lebih mudah dimengerti (tidak jelas bagi saya yang, jika bahasa Inggris, lihat pada titik N1); </li><li>  Saya menonton autotests, tapi sangat bagus.  sulit dilakukan secara universal sejak itu  masing-masing memiliki skenario tindakannya sendiri, meskipun mungkin saya salah, maka jika Anda menganggapnya perlu di kelas yang tidak diperlukan, Anda memiliki kesempatan untuk membantu saya dalam hal ini; </li><li>  Sesuatu yang lain adalah mungkin, tetapi saya belum tahu apa yang Anda punya kesempatan untuk katakan kepada saya tentang hal itu. </li></ol><br><p>  Secara umum, saya mencoba memperbaikinya, apa yang dikatakan dalam komentar, jika ada kekurangan atau kesalahan lain ditemukan - tulis, saya akan mencoba memperbaikinya. </p><br><p>  Terima kasih atas kritik konstruktif dari <strong><em>webdevium</em></strong> dan <strong><em>alutskevich</em></strong> , jika saya bisa, maka saya pasti akan plus Anda. </p><br><p>  Saya juga berterima kasih kepada semua orang karena  Saya memahami kesalahan utama saya dan lahirlah beberapa ide. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id484492/">https://habr.com/ru/post/id484492/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id484480/index.html">Kapitalisasi 5 perusahaan teknologi AS terbesar melebihi $ 5 triliun</a></li>
<li><a href="../id484482/index.html">Program pendidikan kecil tentang pengolahan air</a></li>
<li><a href="../id484484/index.html">Ubuntu bukan desktop Linux terbaik</a></li>
<li><a href="../id484486/index.html">Komputer yang menolak mati</a></li>
<li><a href="../id484488/index.html">Seberapa membingungkan sistem kuantum? Jawabannya mungkin tidak bisa dihitung.</a></li>
<li><a href="../id484496/index.html">Menggunakan Cura pada Printer 3D SLA Photon</a></li>
<li><a href="../id484498/index.html">Sistem AI memperingatkan pejalan kaki di headphone tentang mobil yang mendekat</a></li>
<li><a href="../id484500/index.html">Script untuk menambahkan server dari Google Cloud ke config ssh</a></li>
<li><a href="../id484502/index.html">Facebook memaksa moderator untuk mendokumentasikan jam kerja mereka hingga detik - bahkan pergi ke toilet</a></li>
<li><a href="../id484504/index.html">Membuat ionizer udara kurang dari $ 10</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>