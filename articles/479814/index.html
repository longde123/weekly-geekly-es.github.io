<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï° üíô üë®üèø‚Äçü§ù‚Äçüë®üèæ Problema de privacidad de datos de Active Directory ü§ûüèº ü§≤üèΩ üë∏üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hice pruebas de penetraci√≥n usando PowerView y lo us√© para recuperar informaci√≥n de usuario de Active Directory (en lo sucesivo, AD). En ese momento, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Problema de privacidad de datos de Active Directory</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/varonis/blog/479814/"><img src="https://habrastorage.org/webt/v0/e8/hf/v0e8hfhhlkc-riyxghgiqbcsk2o.jpeg"><br><br>  Hice pruebas de penetraci√≥n usando <a href="https://www.varonis.com/blog/powerview-for-penetration-testing/">PowerView</a> y lo us√© para recuperar informaci√≥n de usuario de Active Directory (en lo sucesivo, AD).  En ese momento, me concentr√© en recopilar informaci√≥n sobre la membres√≠a en grupos de seguridad, y luego us√© esta informaci√≥n para navegar por la red.  En cualquier caso, AD contiene datos confidenciales sobre los empleados, algunos de ellos realmente no deber√≠an ser accesibles para todos en la organizaci√≥n.  De hecho, en los sistemas de archivos de Windows hay un <a href="https://www.varonis.com/blog/3-deadly-file-permissions-mistakes/">problema</a> equivalente para <a href="https://www.varonis.com/blog/3-deadly-file-permissions-mistakes/">Todos</a> , que tambi√©n puede ser explotado por atacantes internos y externos. <br><br>  Pero antes de hablar sobre problemas de privacidad y c√≥mo solucionarlos, echemos un vistazo a los datos almacenados en AD. <br><a name="habracut"></a><br><h2>  <font color="#D21927">Active Directory es Facebook corporativo</font> </h2><br>  Pero en este caso, ¬°ya te has hecho amigo de todos!  Es posible que no descubra las pel√≠culas, libros y restaurantes favoritos de sus colegas, pero AD contiene contactos confidenciales. <br>  datos y otros campos que pueden ser utilizados por piratas inform√°ticos e incluso expertos internos sin habilidades t√©cnicas especiales. <br><br>  Los administradores del sistema, por supuesto, est√°n familiarizados con la siguiente captura de pantalla.  Esta es la interfaz de Usuarios y equipos de Active Directory (ADUC), donde instalan y editan la informaci√≥n del usuario y asignan usuarios a los grupos apropiados. <br><br><img src="https://habrastorage.org/webt/tk/sk/8g/tksk8gyjhubwdglxgagnnawa0_0.jpeg"><br><br>  AD contiene campos con el nombre del empleado, direcci√≥n y n√∫mero de tel√©fono, por lo que parece un directorio telef√≥nico.  ¬°Pero hay mucho m√°s!  Otras pesta√±as tambi√©n tienen una direcci√≥n de correo electr√≥nico y una direcci√≥n web, un supervisor inmediato y notas. <br><br>  ¬øTodos los miembros de la organizaci√≥n deber√≠an ver esta informaci√≥n, especialmente en la era <a href="https://www.varonis.com/blog/we-know-about-your-companys-data-osint-lessons-for-c-levels/">OSINT</a> , cuando cada parte nueva facilita a√∫n m√°s la b√∫squeda de informaci√≥n adicional? <br><br>  Por supuesto que no!  El problema se exacerba cuando los datos de la alta gerencia est√°n disponibles para todos los empleados. <br><br><h2>  <font color="#D21927">PowerView para todos</font> </h2><br>  Aqu√≠ es donde entra en juego PowerView.  Proporciona una interfaz de PowerShell muy conveniente para las funciones subyacentes (y confusas) de Win32 que acceden a AD.  En resumen: <br>  esto hace que obtener campos AD sea tan f√°cil como ingresar un cmdlet muy corto. <br><br>  Tomemos un ejemplo de recopilaci√≥n de informaci√≥n sobre un empleado de Cruella Deville, quien es uno de los l√≠deres de la empresa.  Para hacer esto, use el cmdlet PowerView get-NetUser: <br><br><img src="https://habrastorage.org/webt/q2/aa/4v/q2aa4vxypirpcl_qfkqnbmvz1o4.jpeg"><br><br>  La instalaci√≥n de PowerView no es un problema grave; <a href="https://github.com/PowerShellMafia/PowerSploit/tree/master/Recon">compru√©belo</a> usted mismo en la p√°gina de <a href="https://github.com/PowerShellMafia/PowerSploit/tree/master/Recon">github</a> .  Y lo que es m√°s importante, no necesita privilegios elevados para ejecutar muchos comandos de PowerView, como get-NetUser.  Por lo tanto, un empleado motivado, pero no muy experto en tecnolog√≠a, puede comenzar a hurgar en AD sin mucho esfuerzo. <br><br>  De la captura de pantalla anterior, se puede ver que la informaci√≥n privilegiada puede aprender r√°pidamente mucho sobre Cruella.  ¬øNot√≥ tambi√©n que el campo "informaci√≥n" muestra informaci√≥n sobre los h√°bitos personales y la contrase√±a del usuario? <br><br>  Esta no es una probabilidad te√≥rica.  De los <a href="https://info.varonis.com/recorded-webinar/basic-pen-testing-techniques-en">di√°logos con otros pentesters,</a> aprend√≠ que escanean AD para buscar contrase√±as sin cifrar, y a menudo estos intentos, desafortunadamente, son exitosos.  Saben que las empresas no se preocupan por la informaci√≥n en AD, y generalmente no saben sobre el siguiente tema: los permisos en AD. <br><br><h2>  <font color="#D21927">Active Directory tiene sus propias ACL</font> </h2><br>  La interfaz de usuarios y equipos de AD le permite establecer permisos para objetos de AD.  Hay ACL en AD, y los administradores pueden asignar o denegar el acceso a trav√©s de ellas.  Debe hacer clic en "Avanzado" en el men√∫ Ver de ADUC y luego, cuando abra el usuario, ver√° la pesta√±a "Seguridad" en la que configura la ACL. <br><br>  En mi secuencia de comandos con Cruella, no quer√≠a que todos los usuarios autenticados pudieran ver su informaci√≥n personal, as√≠ que les denegu√© el acceso de lectura: <br><br><img src="https://habrastorage.org/webt/oa/he/06/oahe06ch770xrz7u53d29ynru7m.jpeg"><br><br>  Y ahora un usuario normal ver√° esto si intenta Get-NetUser en PowerView: <br><br><img src="https://habrastorage.org/webt/gi/qj/fq/giqjfq5cxwd5414qeqguygz2kma.jpeg"><br><br>  Logr√© ocultar informaci√≥n √∫til a sabiendas de miradas indiscretas.  Para mantenerlo accesible a los usuarios relevantes, cre√© otra ACL para permitir que los miembros VIP (Cruella y otros colegas de alto nivel) accedan a estos datos confidenciales.  En otras palabras, implement√© permisos de AD basados ‚Äã‚Äãen el modelo a seguir, lo que hizo que los datos confidenciales fueran inaccesibles para la mayor√≠a de los empleados, incluidos los de adentro. <br><br>  Sin embargo, puede hacer que la pertenencia a grupos sea invisible para los usuarios configurando la ACL apropiada para el objeto de grupo en AD.  Esto ayudar√° en t√©rminos de privacidad y seguridad. <br><br>  En mi <a href="https://www.varonis.com/blog/powerview-for-penetration-testing/">serie de pentests √©picos,</a> mostr√© c√≥mo puedes navegar por el sistema explorando las membres√≠as de grupos usando PowerViews Get-NetGroupMember.  En mi caso, restring√≠ el acceso de lectura a la membres√≠a en un grupo en particular.  Ver√° el resultado del comando antes y despu√©s de los cambios: <br><br><img src="https://habrastorage.org/webt/13/wi/mq/13wimqvqgqq2gval5k-kq998bwa.jpeg"><br><br>  Logr√© ocultar la membres√≠a de Cruella y Monty Burns en el grupo VIP, lo que complic√≥ la exploraci√≥n de la infraestructura por piratas inform√°ticos y expertos. <br><br>  Esta publicaci√≥n ten√≠a la intenci√≥n de motivarte a estudiar los campos m√°s de cerca. <br>  AD y permisos relacionados.  AD es un gran recurso, pero piense c√≥mo lo har√≠a <br>  quer√≠a compartir informaci√≥n confidencial y datos personales, especialmente <br>  cuando se trata de las primeras personas de su organizaci√≥n. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/479814/">https://habr.com/ru/post/479814/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../479794/index.html">Combinamos el microcontrolador "infantil" y los juegos de mesa</a></li>
<li><a href="../479796/index.html">Amenaza de nivel de Kingston Thanos</a></li>
<li><a href="../479800/index.html">Estoy escribiendo en C # para que el front-end sea m√°s f√°cil</a></li>
<li><a href="../479802/index.html">C ++ vtables. Parte 1 (conceptos b√°sicos + herencia m√∫ltiple)</a></li>
<li><a href="../479810/index.html">C√≥mo publiqu√© un art√≠culo cient√≠fico en Nature</a></li>
<li><a href="../479816/index.html">Combinatoria en Python</a></li>
<li><a href="../479818/index.html">C√≥mo evaluar el dominio del ingl√©s</a></li>
<li><a href="../479820/index.html">¬øQu√© poner debajo de un √°rbol de TI? Reloj binario</a></li>
<li><a href="../479822/index.html">Gatos en cajas o estructuras de datos compactas</a></li>
<li><a href="../479824/index.html">Atributos y protocolo de manejo en Python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>