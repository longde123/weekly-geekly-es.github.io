<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶Ä üéüÔ∏è üéΩ Lidando com backups do Dell EMC UnityVSA ü§ò üéóÔ∏è ü§•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando n√£o h√° dinheiro para armazenamento de ferro de um fornecedor renomado, ou h√° dinheiro, mas n√£o h√° lugar para se levar ferro para testes, o Virt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lidando com backups do Dell EMC UnityVSA</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/veeam/blog/471126/"><p><img src="https://habrastorage.org/webt/oy/ha/fm/oyhafmrrxviinait3ligqh7ued4.png"></p><br><p>  Quando n√£o h√° dinheiro para armazenamento de ferro de um fornecedor renomado, ou h√° dinheiro, mas n√£o h√° lugar para se levar ferro para testes, o Virtual Storage Appliance, ou VSA, abreviadamente, ajuda-nos.  Um controlador virtualizado de um reposit√≥rio t√£o cobi√ßado, que permite que voc√™ obtenha quase todas as fun√ß√µes do seu irm√£o de ferro, exceto as muito ex√≥ticas e implementadas apenas em hardware f√≠sico.  Quase todos (ou talvez todos) t√™m VSAs para fornecedores de armazenamento cl√°ssicos: HPE, Dell EMC, NetApp, IBM etc.  Existem situa√ß√µes inversas, como Nutanix e StarWind, mas hoje n√£o √© sobre elas.  Por uma quest√£o de ordem, n√£o esqueceremos o desenvolvimento de c√≥digo aberto liderado pelo FreeNAS, cuja funcionalidade √© respeitada. </p><br><p>  Outro recurso do VSA, do qual, por defini√ß√£o, os irm√£os de ferro s√£o privados, √© a disponibilidade de funcionalidade gratuita, geralmente limitada pelo tamanho de armazenamento aceit√°vel e suporte a protocolos "corporativos" como o FC.  (Embora muitas vezes existam vers√µes de avalia√ß√£o por um per√≠odo de tempo, mas isso n√£o √© sobre isso agora.) </p><br><p>  Hoje, trabalharemos com o Dell EMC UnityVSA, come√ßando com as primeiras etapas de implanta√ß√£o, incluindo a cria√ß√£o de um sistema de arquivos, a configura√ß√£o do NAS e NDMP e a integra√ß√£o com o Veeam Backup &amp; Replication.  Por que esse VSA em particular?  S√≥ porque n√£o encontrei esses materiais em Habr√© e decidi eliminar essa injusti√ßa. </p><a name="habracut"></a><br><h4 id="kratkoe-vstuplenie">  Breve introdu√ß√£o </h4><br><p>  O Dell EMC UnityVSA ou, como est√° na moda, o Armazenamento definido pelo software (SDS) permite manter v√°rios tipos diferentes de armazenamento operando em diferentes protocolos no mesmo sistema.  Ele vem em duas formas: a Community Edition gratuita, com um limite de 4 TB, e a vers√£o Professional paga.  Todas as etapas a seguir foram feitas no Community Edition e n√£o devem contradizer a vers√£o Professional ou mesmo coincidir completamente com ela. <br>  O UnityVSA permite criar reposit√≥rios de todos os tipos b√°sicos, suporta muitos protocolos, n√£o h√° nada de interessante aqui.  A parte importante para n√≥s √© a integra√ß√£o com o VMware vSphere, o que significa que podemos obter instant√¢neos de volume com todas as vantagens seguintes, desde backups r√°pidos, suporte a valores ideais de RTO e RPO, at√© outra barreira √† prote√ß√£o contra perda de dados. </p><br><h4 id="razvertyvanie">  Implanta√ß√£o </h4><br><p>  O UnityVSA √© fornecido como um arquivo OVA padr√£o e n√£o faz perguntas desnecess√°rias durante a instala√ß√£o. <br>  O que voc√™ deve prestar aten√ß√£o: </p><br><ul><li>  Para instalar um √∫nico n√≥, s√£o necess√°rios 18 GB de RAM.  No modo HA, j√° existem todos os 30 GB de RAM.  Voc√™ pode apert√°-lo ap√≥s a instala√ß√£o, mas isso pode afetar o desempenho, por sua conta e risco. </li><li>  Os aplicativos precisar√£o de 4 placas de rede.  √â bom (mas n√£o necess√°rio) se tiver 10 GbE.  Um √© para gerenciar o pr√≥prio VSA, o outro √© para receber e transmitir dados do armazenamento.  Ent√£o voc√™ pode adicionar mais livremente. </li><li>  Por tradi√ß√£o, √© recomend√°vel usar IPs est√°ticos e criar os registros DNS (A) e PTR apropriados para resolver o FQDN. </li><li>  A m√°quina √© implantada com um conjunto padr√£o de discos; portanto, se voc√™ planeja usar discos virtuais como o pr√≥prio armazenamento, poder√° adicion√°-los antes do primeiro in√≠cio. </li></ul><br><h4 id="pervyy-zapusk">  Primeiro lan√ßamento </h4><br><p>  Ap√≥s o carregamento (e a primeira vez que ele carrega muito rapidamente), enfrentaremos a escolha de uma ferramenta para a configura√ß√£o inicial.  Obviamente, voc√™ pode fazer tudo √† moda antiga no console ou usar a interface da Web muito conveniente que funciona atrav√©s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Unisphere</a> .  Aqui est√° uma lista das primeiras vantagens da segunda abordagem que v√™m √† mente: </p><br><ul><li>  Console √∫nico para gerenciar v√°rios dispositivos </li><li>  Como resultado: existem fun√ß√µes como a capacidade de criar r√©plicas para sites remotos </li><li>  H√° integra√ß√£o com a API do VMware vCenter </li><li>  Iron Dell Unity tamb√©m trabalha com ele </li></ul><br><p>  A prop√≥sito, h√° uma nuance n√£o √≥bvia sobre o console: os cr√©ditos padr√£o da documenta√ß√£o admin / Password123 # s√£o adequados apenas para a WebGUI.  Para o console, use service / Password123 #. </p><br><p>  Portanto, abra a interface da web e entre no assistente de configura√ß√£o inicial.  √â uma ideia estranha descrever cada etapa, mas voc√™ pode parar na etapa <strong>Pools</strong> .  Aqui, combinamos as unidades conectadas em uma entidade virtual, que apresentaremos no futuro para os subsistemas de armazenamento. </p><br><p><img src="https://habrastorage.org/webt/w-/ca/4o/w-ca4opuv7wojt38qc6z7ypc_e8.png"></p><br><p>  Cada disco deve ser imediatamente colocado no n√≠vel.  Como em outros lugares, a id√©ia de sua exist√™ncia √© o compartilhamento de cargas.  <em>Extreme √©</em> bom para SSDs r√°pidos, <em>Perfomance para</em> SATA h√≠brido com cache SSD e <em>capacidade para</em> todo o resto.  O UnityVSA possui um mecanismo FAST VP integrado que monitora de maneira inteligente a frequ√™ncia de uso de blocos de dados e os move entre camadas. </p><br><p><img src="https://habrastorage.org/webt/2w/cw/wn/2wcwwnoxbbisp4pzweqinbmlwc8.png"></p><br><p>  Tamb√©m n√£o se esque√ßa de criar v√°rias interfaces iSCSI.  Como eles pediram quatro placas de rede, deixe todos funcionarem =) </p><br><p><img src="https://habrastorage.org/webt/ja/0a/kf/ja0akfbqu-svw-attgw8nzke3rm.png"></p><br><h4 id="nas">  NAS </h4><br><p>  O Dell EMC UnityVSA suporta tr√™s tipos de armazenamento: arquivo, bloco e VMware (comercializando esse marketing).  Entre eles, o NAS √© o mais f√°cil de configurar.  Ent√£o, vamos ver como eles s√£o criados. </p><br><p>  Vamos para <strong>Armazenamento&gt; Arquivo&gt; Servidores NAS</strong> , clique em <strong>+</strong> e percorremos todas as etapas do assistente, onde a coisa mais dif√≠cil √© selecionar os protocolos suportados e atribuir um endere√ßo IP. <br>  Bem no assistente, voc√™ pode associar um futuro NAS ao Active Directory, o que √© muito conveniente.  E voc√™ pode escolher se o servidor aparece na lista de m√°quinas como uma m√°quina Windows normal ou em algum tipo de UO personalizada.  Muito confort√°vel ao quadrado.  Se voc√™ tiver dois NASs implantados nesta plataforma, poder√° configurar imediatamente a replica√ß√£o m√∫tua e a replica√ß√£o unidirecional. </p><br><p><img src="https://habrastorage.org/webt/mv/bx/dx/mvbxdxyx5-odqnqay2xjxumzr6s.png"></p><br><p>  Ap√≥s a conclus√£o do assistente, estamos prontos para criar o sistema de arquivos e as pr√≥prias esferas.  O Unisphere permite criar v√°rios FS com configura√ß√µes diferentes ao mesmo tempo, e √© um pecado n√£o us√°-lo.  Vamos pensar sobre o porqu√™: </p><br><ul><li>  Uso eficiente do espa√ßo e controle de carga.  √Ä maneira dos discos virtuais, cada sistema pode ser fino ou grosso.  Todos os encantos e defici√™ncias de ambas as abordagens j√° foram mencionados antes de n√≥s, portanto n√£o iremos mais fundo. </li><li>  Instant√¢neos.  Voc√™ n√£o acredita, mas o imediato vem com uma programa√ß√£o de instant√¢neos personalizada que fornece recupera√ß√£o granular.  Voc√™ apenas precisa ativar o script desejado.  E, √© claro, voc√™ pode personalizar sua programa√ß√£o. </li><li>  VAP R√ÅPIDO.  A fun√ß√£o da migra√ß√£o autom√°tica de dados entre as camadas de armazenamento j√° mencionadas acima. </li><li>  Replica√ß√£o.  Ter a capacidade de ativar a replica√ß√£o de dados s√≠ncrona ou ass√≠ncrona √© uma vantagem muito grande.  A replica√ß√£o pode ser configurada usando o assistente e at√© mesmo controlar o volume de tr√°fego. </li></ul><br><p>  Para criar um sistema de arquivos, v√° para a se√ß√£o <strong>Sistemas de Arquivos</strong> e inicie o pr√≥ximo assistente. </p><br><p>  Selecionamos o protocolo, inserimos o nome e vamos para a etapa <strong>Reten√ß√£o de n√≠vel de arquivo (FLR)</strong> .  Isso nos permite implementar a estrat√©gia WORM: todos os arquivos gravados n√£o estar√£o dispon√≠veis para edi√ß√£o por um per√≠odo especificado. </p><br><p>  Funciona de dois modos: no primeiro, os usu√°rios n√£o podem alterar as informa√ß√µes; no segundo, ningu√©m, nem mesmo os administradores.  Isso √© feito para cumprir a lei.  √â importante lembrar que, depois de ativar esta fun√ß√£o, voc√™ n√£o poder√° desativ√°-la. </p><br><p><img src="https://habrastorage.org/webt/9h/ql/an/9hqlannoo9uj-ndr8xh2bicdvhs.png"></p><br><p>  Nas pr√≥ximas etapas do assistente, voc√™ pode criar imediatamente uma bola SMB e n√£o vejo motivo para n√£o usar esta oportunidade.  Al√©m das configura√ß√µes gerais, tamb√©m ser√° proposto incluir um dos agendamentos de cria√ß√£o de instant√¢neos para seguran√ßa dos dados.  Posteriormente, outras esferas SMB podem ser criadas no mesmo sistema de arquivos. </p><br><h4 id="ndmp">  Ndmp </h4><br><p>  O principal objetivo deste protocolo √© garantir a transfer√™ncia de dados entre o NAS e outro armazenamento diretamente.  Quanto menos processamento no caminho de dados, maior a velocidade de transfer√™ncia.  Inicialmente, esse protocolo foi desenvolvido pela NetApp, mas, gra√ßas √†s complexidades do destino, acabou sendo na EMC.  O suporte ao protocolo √© implementado em quase todos os softwares de backup; portanto, √© estritamente necess√°rio habilit√°-lo. </p><br><p>  Ele √© ativado no est√°gio de cria√ß√£o do servidor NAS, mas se voc√™ perdeu a marca de sele√ß√£o necess√°ria, sempre pode acompanhar as configura√ß√µes na guia <strong>Prote√ß√£o e Eventos</strong> . </p><br><p><img src="https://habrastorage.org/webt/fh/i8/7l/fhi87l8zsfg523k91hrf5gzmdpe.png"></p><br><p>  Quando o protocolo √© ativado, um novo usu√°rio ser√° criado com permiss√µes de leitura e grava√ß√£o, que ser√£o usadas para backups e recupera√ß√£o.  Portanto, n√£o negligencie a complexidade da senha, embora o Unity n√£o permita que voc√™ crie senhas simples. </p><br><h4 id="podklyuchaem-esxi">  Conecte o ESXi </h4><br><p>  Agora, vamos descobrir que tipos de armazenamento o Dell EMC UnityVSA pode fornecer para uso com o VMware ESXi. </p><br><p>  Se olharmos superficialmente, o UnityVSA √© um SDS com todas as vantagens na forma de flexibilidade de configura√ß√µes, capacidade de fornecer acesso a sites remotos, aloca√ß√£o de "caixas de prote√ß√£o" para desenvolvedores, testadores etc. </p><br><p>  Se voc√™ olhar para a documenta√ß√£o, haver√° quase todas as op√ß√µes para armazenamento de blocos e arquivos. Portanto, √© mais dif√≠cil encontrar que tipo de armazenamento n√£o √© poss√≠vel do que tentar listar todos os suportados. <br>  Mas, como falamos sobre o ambiente VMware, VMFS, NFS e VVol est√£o em melhor forma aqui.  iSCSI e FC para armazenamento em bloco s√£o obviamente fornecidos. </p><br><p>  O processo de configura√ß√£o √© o mesmo das melhores casas da Europa: alocamos espa√ßo de armazenamento, denotamos LUNs (opcional), conectamos ao vCenter.  Todas as opera√ß√µes necess√°rias ser√£o realizadas automaticamente durante a conex√£o, incluindo a capacidade de registrar e verificar automaticamente o armazenamento. <br>  Mas isso √© letra.  De muito maior interesse √© a integra√ß√£o com o VAAI (vStorage API para Array Integration) e o VASA (vStorage API para Storage Awareness). </p><br><p>  <strong>VAAI:</strong> √© uma API que permite executar v√°rias opera√ß√µes com dados diretamente no cent√©simo, removendo a carga do host.  Opera√ß√µes como clonagem, c√≥pia, cria√ß√£o de um instant√¢neo, reescrita com zeros, etc.  ser√° executado sem carga no host pelo pr√≥prio Processo de Armazenamento.  Al√©m de reduzir a carga, tamb√©m aumentar√° a velocidade de sua execu√ß√£o. </p><br><p>  <strong>VASA:</strong> - Uma API que permite ao vCenter entender melhor o estado e os recursos de armazenamento.  Um tipo de monitoramento avan√ßado que permite configurar pol√≠ticas de maneira mais precisa para o uso de centenas.  √â verdade que h√° uma limita√ß√£o: se voc√™ conectar v√°rios vCenter'ov, poder√° usar o VASA com apenas um deles. </p><br><p>  √â hora de seguir em frente.  Primeiro de tudo, voc√™ deve permitir o acesso no lado do UnityVSA.  V√° para <strong>ACCESS&gt; VMware</strong> e, na guia <strong>vCenter,</strong> execute o assistente de conex√£o.  Preencha todos os campos, clique em <strong>Localizar</strong> e verifique se o nosso vCenter com todos os hosts no status <em>Pode ser importado</em> . </p><br><p><img src="https://habrastorage.org/webt/mi/8k/qi/mi8kqi7gepypstem2niabdw3cpe.png"></p><br><p>  Na pr√≥xima guia, habilite com ousadia o uso de um provedor VASA.  Para fazer isso, voc√™ precisa especificar a conta do administrador do UnityVSA ou igual a ela.  O processo de registro ser√° iniciado em todos os hosts do par√°grafo anterior. </p><br><p><img src="https://habrastorage.org/webt/sq/7m/w8/sq7mw8xk7co_fgy03pkjr0qimd4.png"></p><br><p>  Na √∫ltima etapa, verifique se tudo est√° correto e clique em <strong>Concluir</strong> . </p><br><p><img src="https://habrastorage.org/webt/uq/g0/69/uqg069xvkwmok-9lg9m7kqugygm.png"></p><br><p>  Se tudo for bem-sucedido (mas pode n√£o ser bem-sucedido aqui, apenas se tiverem sido selados em cr√©ditos), na guia <strong>Hosts</strong> do <strong>ESXi</strong> , haver√° algo parecido com isto. </p><br><p><img src="https://habrastorage.org/webt/e9/i_/o0/e9i_o0zpi4i_sgu5hzzqgi9lsk4.png"></p><br><h4 id="podklyuchaem-k-vcenter">  Conecte-se ao vCenter </h4><br><p>  Est√° na hora de criar armazenamento VMFS e conect√°-lo √† nossa infraestrutura! <br>  V√° para <strong>Armazenamento&gt; VMware</strong> e inicie o assistente para criar um novo armazenamento.  No meu exemplo, vou criar um bloco de armazenamento VMFS. </p><br><p><img src="https://habrastorage.org/webt/qj/kw/fm/qjkwfmhr0vqpxl49we0bstye82w.png"></p><br><p>  Nas pr√≥ximas etapas, especifique o nome, o tamanho e indique de qual pool obter discos.  Como lembramos, o UnityVSA pode determinar os tipos de discos e atribuir a eles a camada correspondente.  Aqui voc√™ pode definir o limite de E / S. </p><br><p><img src="https://habrastorage.org/webt/pl/sm/g6/plsmg66-bj_6y2rssj_vfvyypxs.png"></p><br><p>  Na guia <strong>Acesso</strong> , especifique quais hosts ter√£o acesso ao nosso armazenamento e por qual protocolo.  Geralmente, √© melhor escolher tudo de uma vez, para n√£o ter problemas com o vMotion no futuro, mas isso j√° depende da sua infraestrutura espec√≠fica.  Voc√™ tamb√©m pode atribuir um ID de LUN aqui. </p><br><p><img src="https://habrastorage.org/webt/ny/zn/a2/nyzna2gcb7rchqogi4dnhh3qkgc.png"></p><br><p>  As guias <strong>Instant√¢neo</strong> e <strong>Replica√ß√£o</strong> atribuem fun√ß√µes √≥bvias para proteger os dados.  O esquema para criar snapshots pode ser alterado por conta pr√≥pria, mas para replica√ß√£o s√≠ncrona, voc√™ precisar√° de instala√ß√£o adicional de outro UnityVSA. </p><br><p><img src="https://habrastorage.org/webt/8t/1k/72/8t1k72lzj4c-3a9_rjlhumwx0b0.png"></p><br><p>  Ap√≥s alguns segundos, o armazenamento ser√° criado e voc√™ poder√° assisti-los na interface do VMware vCenter. </p><br><p><img src="https://habrastorage.org/webt/uo/vv/mf/uovvmfxbfwdxusolm0xhlurkcrc.png"></p><br><h4 id="integraciya-s-veeam">  Integra√ß√£o com Veeam </h4><br><p>  Apesar de todas as possibilidades de salvar dados que o UnityVSA nos fornece imediatamente, ele n√£o sabe como fazer backups completos, portanto, √© necess√°rio um software externo aqui.  E de prefer√™ncia com suporte de integra√ß√£o para reduzir a carga na produ√ß√£o. </p><br><p>  O Veeam Backup &amp; Replication suporta a API do Dell EMC para comunica√ß√£o direta com o Unity Storage Array.  Isso permite criar instant√¢neos da m√°quina virtual no n√≠vel de armazenamento.  J√° discutimos suas vantagens muitas vezes, por isso n√£o iremos nos aprofundar nelas em detalhes, mas simplesmente listarei as mais √≥bvias: </p><br><ul><li>  Minimize a carga do host </li><li>  Cria√ß√£o r√°pida de snapshots e tempo de trabalho curto, o que √© muito importante para m√°quinas pesadas </li><li>  Possibilidade de recupera√ß√£o granular diretamente do instant√¢neo para o armazenamento </li></ul><br><p>  Abordaremos como conectar o UnityVSA ao Veeam e configurar o Veeam Backup Proxy para funcionar corretamente. </p><br><p>  Na guia <strong>Infraestrutura de armazenamento</strong> , inicie o assistente para adicionar novo armazenamento e selecione <em>Dell EMC</em> . </p><br><p><img src="https://habrastorage.org/webt/nt/hq/om/nthqomons0fgriglqhshkjhdemu.png"></p><br><p>  O Veeam suporta v√°rios modelos, ent√£o escolha <em>Unity</em> . </p><br><p><img src="https://habrastorage.org/webt/ba/2w/wv/ba2wwvy_f3epjufbgbcindqmvts.png"></p><br><p>  Em seguida, especifique o FQDN ou IP e crie uma conta.  Se voc√™ usar um certificado autoassinado, receber√° um aviso e a verifica√ß√£o da conta come√ßar√°. </p><br><p><img src="https://habrastorage.org/webt/rt/hr/n5/rthrn5kbb4rw8isleqgcnt78r5i.png"></p><br><p>  Se tudo estiver bem, o pr√≥ximo passo √© escolher quais protocolos podem se comunicar com seu reposit√≥rio.  O Fibre Channel n√£o faz parte da Licen√ßa da comunidade Dell, portanto voc√™ pode desativ√°-lo.  (E voc√™ pode deix√°-lo, no futuro, ele ser√° desligado automaticamente.) <br>  Por padr√£o, a Veeam tentar√° escolher o proxy mais adequado da lista de dispon√≠veis, mas aconselho a todos que especifiquem um proxy espec√≠fico para obter um resultado garantido.  Al√©m disso, se um proxy espec√≠fico for especificado, o restante n√£o ter√° acesso ao reposit√≥rio.  Na mesma etapa, voc√™ pode escolher quais volumes a Veeam deve processar (se voc√™ tiver v√°rios). </p><br><p><img src="https://habrastorage.org/webt/yg/ly/hu/yglyhu3mqku7owuxtxkoxhfxeys.png"></p><br><p>  Ap√≥s concluir todos os pontos do assistente, o processo de digitaliza√ß√£o do armazenamento ser√° iniciado e estar√° dispon√≠vel na interface da Veeam. </p><br><p><img src="https://habrastorage.org/webt/oj/lo/sv/ojlosvrnxro80ef7ryu4yj1k3lu.png"></p><br><p>  Agora, volte ao console do Unity para permitir o acesso ao Veeam Backup Proxy.  Para fazer isso, v√° para a guia <strong>Acesso&gt; Hosts</strong> e execute o assistente para adicionar um novo host. </p><br><p><img src="https://habrastorage.org/webt/gc/0z/ea/gc0zea8q2cx0vg1ac313kuknmzg.png"></p><br><p>  Na pr√≥xima etapa, √© importante nomear o iniciador iSCSI se o UnityVSA n√£o o detectar automaticamente (o que √© normal).  Voc√™ pode criar v√°rios de uma vez para obter o MPIO.  E um pequeno capit√£o: se o iniciador iSCSI n√£o estiver configurado no seu proxy, agora √© a hora de ativ√°-lo e configur√°-lo. </p><br><p><img src="https://habrastorage.org/webt/cs/bi/zd/csbizdl7x56iv1bisg8yu63uqm8.png"></p><br><p>  Analisamos o assistente at√© o final e obtemos um certificado da adi√ß√£o bem-sucedida de um novo host. </p><br><p><img src="https://habrastorage.org/webt/9i/yu/vd/9iyuvd857qkge6lx-jcjyzx9f3m.png"></p><br><p>  Agora crie uma tarefa de backup.  No caso geral, n√£o difere do padr√£o, portanto, nos concentraremos apenas nos pontos mais importantes. <br>  Neste exemplo, adicionarei √† tarefa apenas as m√°quinas que est√£o no UnityVSA.  Tecnicamente, voc√™ pode adicionar carros com hist√≥rias comuns, isso exigir√° mais um tique, sobre o qual falaremos mais adiante. </p><br><p><img src="https://habrastorage.org/webt/8_/db/dg/8_dbdgcbxsxzp5-mdylq6i9ojui.png"></p><br><p>  Na etapa <strong>Armazenamento</strong> : </p><br><ul><li>  Se voc√™ tiver todas as m√°quinas no mesmo armazenamento na tarefa, √© melhor escolher o mesmo proxy que tem acesso ao armazenamento. </li><li>  Se as m√°quinas estiverem diferentes, voc√™ poder√° deixar a detec√ß√£o autom√°tica, se n√£o desejar conduzir todos os dados atrav√©s de um proxy. </li></ul><br><p><img src="https://habrastorage.org/webt/xx/2q/wo/xx2qwoa5vf7ypl3yzrluvczfxwm.png"></p><br><p>  Em seguida, v√° para <strong>Avan√ßado</strong> e abra a guia <strong>Integra√ß√£o</strong> .  √â aqui que a marca de sele√ß√£o mais importante est√° localizada - <strong>Habilite o backup a partir de instant√¢neos de armazenamento</strong> , gra√ßas ao qual a Veeam usar√° a API de armazenamento.  Aqui voc√™ pode limitar o n√∫mero de carros que ser√£o simultaneamente no instant√¢neo.  Esse √© um recurso √∫til para propriet√°rios de instala√ß√µes muito grandes e sistemas carregados. <br>  E a segunda marca de sele√ß√£o importante √© <strong>Failover para backup padr√£o</strong> .  Se a tarefa contiver m√°quinas em armazenamentos que n√£o suportam snapshots, a Veeam funcionar√° com o snapshot do hipervisor padr√£o; caso contr√°rio, a tarefa ser√° conclu√≠da imediatamente com um erro. </p><br><p><img src="https://habrastorage.org/webt/7z/mo/ak/7zmoakyc0nrnpyxsvt5n3j2ofd4.png"></p><br><p>  Voc√™ n√£o precisa configurar mais nada.  Passamos o assistente para o final e executamos o backup.  Se tudo estiver configurado corretamente, a linha no log de tarefas ser√° a linha <em>Criando uma captura instant√¢nea de armazenamento</em> e, no log de cada m√°quina, voc√™ notar√° que imediatamente ap√≥s criar a captura instant√¢nea e coletar informa√ß√µes sobre os discos, a captura instant√¢nea no hipervisor foi exclu√≠da.  No meu caso, o carro trabalhou em um instant√¢neo em apenas 7 segundos. </p><br><p><img src="https://habrastorage.org/webt/k6/wq/7l/k6wq7l8bvo_npo4qv0zu3hxgbgo.png"></p><br><p>  √ìtimo resultado, parece-me. </p><br><p>  E leia o t√≥pico: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Use a Veeam na configura√ß√£o de backups com instant√¢neos de armazenamento</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pr√°ticas recomendadas para usar o Dell EMC Unity</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a documenta√ß√£o atual do produto Veeam</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt471126/">https://habr.com/ru/post/pt471126/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt471112/index.html">Raz√£o est√∫pida por que seu aplicativo de vis√£o de m√°quina astuto n√£o funciona: orienta√ß√£o em EXIF</a></li>
<li><a href="../pt471116/index.html">5 dispositivos de tecnologia de alimentos e um rob√¥ com tomates</a></li>
<li><a href="../pt471118/index.html">Como apresentar sua organiza√ß√£o ao OpenStack</a></li>
<li><a href="../pt471120/index.html">Como resolver problemas atuais de TI no gerenciamento de reparos de equipamentos</a></li>
<li><a href="../pt471122/index.html">Not√≠cias do mundo do OpenStreetMap n¬∫ 480 (24.09.2019 - 09.09.2019)</a></li>
<li><a href="../pt471128/index.html">Projeto Colagem: Como combater a censura na Internet com conte√∫do personalizado</a></li>
<li><a href="../pt471130/index.html">Eventos digitais em Moscou, de 14 a 20 de outubro</a></li>
<li><a href="../pt471132/index.html">Esgotamento profissional de especialistas em TI: 15 respostas do psiquiatra Maxim Malyavin</a></li>
<li><a href="../pt471134/index.html">Python vs JavaScript: Qual deles pode te beneficiar mais?</a></li>
<li><a href="../pt471136/index.html">A primeira grande reuni√£o de tubos da comunidade Scala na R√∫ssia - como foi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>