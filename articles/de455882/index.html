<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👇🏻 👀 👨🏾‍🤝‍👨🏻 Network Factory für Cisco ACI Data Center - Admin-Hilfe 👩🏿‍🤝‍👨🏽 👶🏻 👨🏿‍🤝‍👨🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mit diesem magischen Teil des Cisco ACI-Skripts können Sie Ihr Netzwerk schnell konfigurieren. 

 Die Netzwerkfabrik für das Cisco ACI-Rechenzentrum b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Network Factory für Cisco ACI Data Center - Admin-Hilfe</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croc/blog/455882/"><img src="https://habrastorage.org/webt/sy/ml/l2/symll2m6gww_cyira-8xkwg5i3a.jpeg"><br>  <i>Mit diesem magischen Teil des Cisco ACI-Skripts können Sie Ihr Netzwerk schnell konfigurieren.</i> <br><br>  Die Netzwerkfabrik für das Cisco ACI-Rechenzentrum besteht seit fünf Jahren, aber bei Habr wurde nichts darüber gesagt, daher habe ich beschlossen, das Problem ein wenig zu beheben.  Ich werde Ihnen aus eigener Erfahrung sagen, was es ist, was es nützt und wo es einen Rechen hat. <br><br><h3>  Was ist das und woher kommt es? </h3><br>  Zum Zeitpunkt der Ankündigung von ACI (Application Centric Infrastructure) im Jahr 2013 griffen Wettbewerber traditionelle Ansätze für Rechenzentrumsnetzwerke auf drei Seiten gleichzeitig an. <br><br>  Einerseits versprachen die auf OpenFlow basierenden SDN-Lösungen der ersten Generation, Netzwerke flexibler und gleichzeitig billiger zu machen.  Die Idee war, Entscheidungen zu treffen, die traditionell von der proprietären Software der Switches auf der zentralen Steuerung durchgeführt werden. <br><br>  Dieser Controller hätte eine einzige Vision von allem, was geschah, und würde auf dieser Grundlage die Hardware aller Switches auf der Ebene der Regeln für die Verarbeitung bestimmter Flows programmieren. <a name="habracut"></a><br>  Auf der anderen Seite ermöglichten Overlay-Netzwerklösungen die Implementierung der erforderlichen Konnektivitäts- und Sicherheitsrichtlinien ohne Änderungen am physischen Netzwerk, wodurch Softwaretunnel zwischen virtualisierten Hosts erstellt wurden.  Das bekannteste Beispiel für diesen Ansatz war die Entscheidung von Nicira, die zu diesem Zeitpunkt bereits von VMWare für 1,26 Milliarden US-Dollar übernommen worden war und die aktuelle VMWare NSX hervorbrachte.  Nicira wurde von denselben Leuten mitbegründet, die zuvor an den Ursprüngen von OpenFlow standen, und sagte nun, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OpenFlow sei nicht</a> für den Bau einer Rechenzentrumsfabrik <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">geeignet</a> . <br><br>  Und schließlich haben die auf dem freien Markt erhältlichen Switching-Chips (sogenanntes Merchant-Silizium) einen Reifegrad erreicht, bei dem sie zu einer echten Bedrohung für traditionelle Switch-Hersteller geworden sind.  Früher hat jeder Anbieter selbst Chips für seine Switches entwickelt, aber im Laufe der Zeit haben Chips von Drittherstellern, hauptsächlich von Bradcom, begonnen, den Abstand zu den Anbieterchips in Bezug auf Funktionen und Preis-Leistungs-Verhältnis zu verringern.  Daher glaubten viele, dass die Tage der Schalter auf Chips ihres eigenen Designs gezählt sind. <br><br>  ACI war die „asymmetrische Antwort“ von Cisco (oder besser gesagt Insieme, das von seinen ehemaligen Mitarbeitern gegründet wurde) auf all das oben Genannte. <br><br><h3>  Was ist der Unterschied zu OpenFlow? </h3><br>  In Bezug auf die Verteilung der Funktionen ist ACI das Gegenteil von OpenFlow. <br>  In der OpenFlow-Architektur ist der Controller für die Vorgabe detaillierter Regeln (Flows) verantwortlich. <br>  In der Hardware aller Switches, dh in einem großen Netzwerk, kann es für die Wartung und vor allem das Ändern von mehreren zehn Millionen Datensätzen an Hunderten von Punkten im Netzwerk verantwortlich sein. Daher wird seine Leistung und Zuverlässigkeit bei der Implementierung in großem Maßstab zu einem Engpass. <br><br>  ACI verwendet den umgekehrten Ansatz: Der Controller ist natürlich auch vorhanden, aber die Switches erhalten deklarative Richtlinien auf hoher Ebene, und der Switch selbst rendert sie in die Details bestimmter Einstellungen in der Hardware.  Der Controller kann neu gestartet oder ganz ausgeschaltet werden, und dem Netzwerk passiert nichts Schlimmes, außer natürlich dem Mangel an Kontrolle in diesem Moment.  Interessanterweise gibt es Situationen in ACI, in denen OpenFlow weiterhin verwendet wird, jedoch lokal innerhalb des Hosts zum Programmieren von Open vSwitch. <br><br>  ACI basiert vollständig auf Overlay-Transporten auf Basis von VXLAN, umfasst jedoch gleichzeitig den zugrunde liegenden IP-Transport als Teil einer einzigen Lösung.  Cisco nannte dies den Begriff "integriertes Overlay".  Als Endpunkt für Überlagerungen in ACI werden in den meisten Fällen Werksschalter verwendet (dies geschieht mit der Kanalgeschwindigkeit).  Hosts müssen nichts über die Factory, Kapselungen usw. wissen. In einigen Fällen (z. B. zum Verbinden von OpenStack-Hosts) kann jedoch auch VXLAN-Datenverkehr zu ihnen geleitet werden. <br><br>  Overlays werden in ACI nicht nur verwendet, um eine flexible Konnektivität über das Transportnetzwerk bereitzustellen, sondern auch um Metainformationen zu übertragen (sie werden beispielsweise zum Anwenden von Sicherheitsrichtlinien verwendet). <br><br>  Die Chips von Broadcom wurden zuvor von Cisco in der Switches der Nexus 3000-Serie verwendet. Die Nexus 9000-Familie, die speziell zur Unterstützung von ACI veröffentlicht wurde, implementierte zunächst ein Hybridmodell namens Merchant +.  Der Switch verwendete gleichzeitig den neuen Broadcom Trident 2-Chip und den Cisco-Entwicklungschip, der ihn ergänzt und die Magie von ACI verwirklicht.  Dies ermöglichte es offenbar, die Produktion des Produkts zu beschleunigen und den Preis des Schalters auf ein Niveau zu senken, das nur für Trident 2 nahe an den Modellen liegt. Dieser Ansatz reichte für die ersten zwei bis drei Jahre der ACI-Versorgung aus.  In dieser Zeit entwickelte und brachte Cisco das Nexus 9000 der nächsten Generation auf eigenen Chips mit mehr Leistung und Funktionen bei gleichem Preisniveau auf den Markt.  Externe Spezifikationen für die Interaktion im Werk bleiben vollständig erhalten.  Gleichzeitig hat sich die Innenfüllung komplett verändert: so etwas wie Refactoring, aber für Eisen. <br><br><h3>  Funktionsweise der Cisco ACI-Architektur </h3><br>  Im einfachsten Fall basiert ACI auf der Topologie des Clos-Netzwerks oder, wie oft gesagt wird, auf Spine-Leaf.  Wirbelsäulenschalter können von zwei (oder eins, wenn uns die Fehlertoleranz nicht wichtig ist) bis sechs sein.  Je mehr vorhanden sind, desto höher ist dementsprechend die Fehlertoleranz (weniger Reduzierung der Bandbreite und Zuverlässigkeit bei einem Unfall oder der Wartung eines Wirbels) und die Gesamtleistung.  Alle externen Verbindungen gehen zu Switches auf Blattebene: Dies sind die Server, die über L2 oder L3 eine Verbindung zu externen Netzwerken herstellen und APIC-Controller verbinden.  Im Allgemeinen erfolgt bei ACI nicht nur die Konfiguration, sondern auch die Erfassung von Statistiken, die Fehlerüberwachung usw. über die Schnittstelle von Controllern, bei denen es sich um drei Implementierungen in Standardgröße handelt. <br><br>  Sie müssen nie mit der Konsole eine Verbindung zu den Switches herstellen, auch nicht, um das Netzwerk zu starten: Der Controller selbst erkennt die Switches und sammelt die Werkseinstellungen, einschließlich der Einstellungen aller Serviceprotokolle. Daher ist es übrigens sehr wichtig, die Seriennummern der installierten Geräte während der Installation aufzuzeichnen, damit Sie nicht erraten müssen, welche Switches eingeschaltet sind welches Rack befindet sich.  Zur Fehlerbehebung können Sie bei Bedarf eine Verbindung zu den Switches über SSH herstellen: Sie verwenden die üblichen Cisco-Show-Befehle ziemlich sorgfältig. <br><br>  In der Fabrik wird IP-Transport verwendet, sodass es keinen Spanning Tree und andere Schrecken der Vergangenheit gibt: Alle Verbindungen sind beteiligt, und die Konvergenz bei Fehlern ist sehr schnell.  Der Werksverkehr wird über VXLAN-Tunnel übertragen.  Genauer gesagt nennt Cisco selbst das Kapselungs-iVXLAN und unterscheidet sich vom üblichen VXLAN darin, dass die reservierten Felder im Netzwerkheader zur Übertragung von Overhead-Informationen verwendet werden, hauptsächlich über das Verhältnis des Datenverkehrs zur EPG-Gruppe.  Auf diese Weise können Sie die Interaktionsregeln zwischen Gruppen in den Geräten implementieren und deren Nummern auf dieselbe Weise verwenden, wie Adressen in normalen Zugriffslisten verwendet werden. <br><br>  Mit Tunneln können Sie sich durch die internen IP-Transport- und L2-Segmente sowie durch L3 (d. H. VRF) erstrecken.  In diesem Fall wird das Standard-Gateway verteilt.  Dies bedeutet, dass jeder Switch an der Weiterleitung des in die Fabrik eintretenden Datenverkehrs beteiligt ist.  In Bezug auf die Verkehrsübertragungslogik ähnelt ACI einer auf VXLAN / EVPN basierenden Factory. <br><br><h3>  Wenn ja, was sind die Unterschiede?  Für den Rest! </h3><br>  Der größte Unterschied bei ACI besteht darin, wie die Server mit dem Netzwerk verbunden sind.  In herkömmlichen Netzwerken werden sowohl physische Server als auch virtuelle Maschinen in VLANs integriert, und alles andere wird von diesen getanzt: Konnektivität, Sicherheit usw. Die ACI verwendet ein Design, das Cisco EPG (End-Point Group) nennt, von dem es keinen Ort gibt wegkommen.  Ist es möglich, es mit einem VLAN gleichzusetzen?  Ja, aber in diesem Fall besteht die Möglichkeit, dass Sie das meiste verlieren, was ACI bietet. <br><br>  In Bezug auf den EPG werden alle Zugriffsregeln formuliert, und das Prinzip der „Whitelist“ wird in der ACI standardmäßig verwendet, dh es ist nur Datenverkehr zulässig, dessen Übertragung ausdrücklich zulässig ist.  Das heißt, wir können die EPG-Gruppen "Web" und "MySQL" erstellen und eine Regel definieren, die die Interaktion zwischen ihnen nur auf Port 3306 erlaubt. Dies funktioniert ohne Bezugnahme auf Netzwerkadressen und sogar innerhalb desselben Subnetzes! <br><br>  Wir haben Kunden, die sich genau wegen dieser Funktion für ACI entschieden haben, da Sie damit den Zugriff zwischen Servern (virtuell oder physisch - es spielt keine Rolle) einschränken können, ohne sie zwischen Subnetzen zu ziehen und daher die Adressierung nicht zu berühren.  Ja, ja, wir wissen, dass niemand IP-Adressen in Anwendungskonfigurationen mit den Händen vorschreibt, oder? <br><br>  ACI-Verkehrsregeln werden als Verträge bezeichnet.  In einem solchen Vertrag werden eine oder mehrere Gruppen oder Ebenen in einer mehrschichtigen Anwendung zu einem Dienstanbieter (z. B. einem Datenbankdienst), andere zu Verbrauchern.  Ein Vertrag kann einfach den Datenverkehr überspringen oder etwas Schwierigeres tun, z. B. ihn an eine Firewall oder einen Balancer weiterleiten und auch den QoS-Wert ändern. <br><br>  Wie kommen Server in diese Gruppen?  Wenn es sich um physische Server oder um etwas handelt, das mit dem vorhandenen Netzwerk verbunden ist, in dem wir den VLAN-Trunk erstellt haben, müssen Sie zum Platzieren im EPG auf den Switch-Port und das darauf verwendete VLAN verweisen.  Wie Sie sehen, werden VLANs dort angezeigt, wo Sie nicht ohne sie auskommen können. <br><br>  Wenn es sich bei den Servern um virtuelle Maschinen handelt, reicht es aus, auf die verbundene Virtualisierungsumgebung zu verweisen, und dann geschieht alles von selbst: Eine Portgruppe (in Bezug auf VMWare) wird erstellt, um die VM zu verbinden, die erforderlichen VLANs oder VXLANs werden zugewiesen, sie werden an den erforderlichen Switch-Ports registriert usw. Obwohl ACI auf einem physischen Netzwerk basiert, sehen Verbindungen für virtuelle Server viel einfacher aus als für physische.  ACI verfügt bereits über ein Bundle mit VMWare und MS Hyper-V sowie Unterstützung für OpenStack und RedHat Virtualization.  Irgendwann gab es auch eine integrierte Unterstützung für Containerplattformen: Kubernetes, OpenShift, Cloud Foundry, und dies gilt auch für Richtlinien und Überwachung, dh der Netzwerkadministrator kann sofort sehen, welche Hosts funktionieren und zu welchen Gruppen sie gehören. <br><br>  Virtuelle Server sind nicht nur in einer bestimmten Portgruppe enthalten, sondern verfügen auch über zusätzliche Eigenschaften: Name, Attribute usw., die als Kriterien für die Übertragung an eine andere Gruppe verwendet werden können, z. B. beim Umbenennen einer VM oder wenn sie über ein zusätzliches Tag verfügt.  Cisco nennt diese Mikrosegmentierungsgruppen, obwohl im Großen und Ganzen das Design selbst mit der Fähigkeit, viele Sicherheitssegmente in Form von EPG im selben Subnetz zu erstellen, auch Mikrosegmentierung ist.  Nun, der Verkäufer weiß es besser. <br><br>  EPGs selbst sind rein logische Konstruktionen, die nicht an bestimmte Switches, Server usw. gebunden sind, sodass Sie mit ihnen und darauf basierenden Konstruktionen (Anwendungen und Mandanten) Dinge tun können, die in normalen Netzwerken schwierig sind, z. B. Klonen.  Nehmen wir an, es ist sehr einfach, einen Klon einer produktiven Umgebung zu erstellen, um eine Testumgebung zu erhalten, die garantiert mit der produktiven identisch ist.  Dies kann manuell erfolgen, ist jedoch besser (und einfacher) - über die API. <br><br>  Im Allgemeinen unterscheidet sich die Steuerlogik in ACI grundlegend von der, auf die Sie normalerweise stoßen <br>  In herkömmlichen Netzwerken von demselben Cisco: Die Softwareschnittstelle ist primär und die GUI oder CLI sind sekundär, da sie über dieselbe API arbeiten.  Daher beginnt fast jeder, der sich mit ACI befasst, nach einer Weile, das für die Verwaltung verwendete Objektmodell zu navigieren und etwas für seine Bedürfnisse zu automatisieren.  Der einfachste Weg, dies zu tun, ist von Python: Es gibt praktische vorgefertigte Werkzeuge dafür. <br><br><h3>  Versprochener Rechen </h3><br>  Das Hauptproblem ist, dass viele Dinge in ACI anders gemacht werden.  Um normal mit ihr arbeiten zu können, müssen Sie neu lernen.  Dies gilt insbesondere für Netzwerkbetriebsteams bei Großkunden, bei denen Ingenieure seit Jahren VLANs für Anwendungen vorschreiben.  Die Tatsache, dass VLANs jetzt keine VLANs mehr sind und Sie neue Netzwerke in virtualisierte Hosts einbinden müssen, müssen Sie VLANs überhaupt nicht mehr mit Ihren Händen erstellen. Dadurch werden die traditionellen Netzwerker vollständig „umgehauen“ und müssen sich an vertraute Ansätze halten.  Es ist zu beachten, dass Cisco versucht hat, die Pille leicht zu versüßen, und dem Controller eine „NXOS-ähnliche“ CLI hinzugefügt hat, mit der Sie über eine Schnittstelle konfigurieren können, die herkömmlichen Switches ähnelt.  Um ACI normal verwenden zu können, müssen Sie jedoch verstehen, wie es funktioniert. <br><br>  Unter dem Gesichtspunkt des Preises in großen und mittleren ACI-Netzwerken unterscheidet es sich praktisch nicht von herkömmlichen Netzwerken in Cisco-Geräten, da dieselben Switches zum Erstellen verwendet werden (das Nexus 9000 kann sowohl im ACI- als auch im herkömmlichen Modus und jetzt arbeiten das Haupt "Arbeitstier" für neue Rechenzentrumsprojekte).  Bei Rechenzentren mit zwei Switches machen sich natürlich die Verfügbarkeit von Controllern und die Spine-Leaf-Architektur bemerkbar.  Kürzlich ist eine Mini-ACI-Fabrik erschienen, in der zwei der drei Controller durch virtuelle Maschinen ersetzt werden.  Auf diese Weise können Sie den Kostenunterschied verringern, der jedoch weiterhin besteht.  Für den Kunden hängt die Wahl davon ab, wie sehr er an Sicherheitsfunktionen, der Integration in die Virtualisierung, einem einzigen Verwaltungspunkt und vielem mehr interessiert ist. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de455882/">https://habr.com/ru/post/de455882/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de455868/index.html">Moores Gesetz überwinden: Transistortechnologien der Zukunft</a></li>
<li><a href="../de455872/index.html">Welche Wetten hat Bezos 1997 abgeschlossen, sodass Amazon nun 50% des E-Commerce-Marktes in den USA und 14% der Welt hält?</a></li>
<li><a href="../de455874/index.html">Benachrichtigungsverfahren für Elektronenanwendungen für macOS 10.14.5</a></li>
<li><a href="../de455878/index.html">Szenarien für den Einsatz von Videoanalysen im Einzelhandel. Auf den Spuren von Video Analytics im Einzelhandel</a></li>
<li><a href="../de455880/index.html">In Java wird möglicherweise eine neue Serialisierung angezeigt</a></li>
<li><a href="../de455884/index.html">VS Code Extension - Snippets - Ich werde sagen, wie man Zeit spart</a></li>
<li><a href="../de455886/index.html">Geben Sie dem Stern und dem Exoplaneten im HAT-P-3-System einen Namen</a></li>
<li><a href="../de455888/index.html">Internet für den Sommerbewohner. Teil 3. Die Russen kommen</a></li>
<li><a href="../de455890/index.html">Die Wahrheit über kontaktloses Bezahlen in Fitnessarmbändern</a></li>
<li><a href="../de455892/index.html">Wie kann ein Programmierer in die Niederlande ziehen?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>