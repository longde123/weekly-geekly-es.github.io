<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆎 👎🏼 🍩 Détails 👩‍👩‍👦‍👦 🎱 🕵🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="À quelle fréquence obtenez-vous 404 pages? Habituellement, ils ne sont pas stylisés et restent par défaut. Récemment, j'ai trouvé test.do.am quel pers...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Détails</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443720/"> À quelle fréquence obtenez-vous 404 pages?  Habituellement, ils ne sont pas stylisés et restent par défaut.  Récemment, j'ai trouvé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">test.do.am</a> quel personnage interactif attire l'attention et anime la page d'erreur. <br><br>  Probablement, il n'y avait qu'une photo de chat, puis ils ont pensé au mouvement des yeux et le développeur a mis en œuvre l'idée. <img src="https://habrastorage.org/webt/b9/ac/cn/b9accnbv6mfn6iopfvyz8tkzr_s.png" alt="image">  Maintenant, l'utilisateur visite la page et vérifie l'effet.  C'est une petite fonctionnalité cool et agréable, elle attrape, puis l'utilisateur en discute avec des collègues ou des amis et répète même la fonctionnalité.  Cela pourrait être aussi simple, sinon: <a name="habracut"></a><br><br><ol><li>  Le point central n'est pas renouvelé lorsque l'utilisateur redimensionne la fenêtre.  Ouvrez la fenêtre du navigateur avec une fenêtre de petite largeur et redimensionnez en plein écran, le chat ne regarde pas le curseur. </li><li>  Le point central est placé sur l'œil gauche, pas au centre binoculaire du cercle. </li><li>  Lorsque l'utilisateur passe le curseur entre les yeux, les pommes des yeux ne se rejoignent pas et ne se concentrent pas.  Les yeux sont tournés vers l'infini, c'est pourquoi le chat ne regarde pas l'utilisateur, il regarde à travers lui. </li><li>  Les mouvements des yeux sont immédiats, ils doivent être lisses. </li><li>  Les mouvements des pommes se produisent en raison du changement de marge gauche / marge supérieure.  C'est incorrect, trouvez l'explication ci-dessous. </li><li>  Les yeux ne bougent pas si le curseur est sous le pied de page. </li></ol><br>  <b>Ce que je propose</b> <br><br>  Pour commencer, implémentons un mouvement des yeux sans faille. <br><br>  1. Préparez le balisage <br><br><pre><code class="javascript hljs">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"cat"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"cat__eye _left"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"cat__eye _right"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;</span></span></code> </pre> <br>  2. Obtenez des liens vers les éléments des yeux <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cat = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'.cat'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> eyes = cat.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'.cat__eye'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> eye_left = eyes[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> eye_right = eyes[<span class="hljs-number"><span class="hljs-number">1</span></span>];</code> </pre> <br>  3. Enregistrez l'écouteur d'événement mousemove et obtenez les coordonnées du curseur: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mouseX; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mouseY; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'mousemove'</span></span>, e =&gt; { mouseX = e.clientX; mouseY = e.clientY; })</code> </pre><br>  J'ajoute l'écouteur mousemove sur l'objet fenêtre, pas sur le corps du document, car j'ai besoin d'utiliser tout l'écran pour obtenir les coordonnées de la souris. <br><br>  4. Mouvement <br>  Comme je vais lisser les mouvements, je ne peux pas les gérer dans le gestionnaire de déplacement de souris. <br><br>  Ajoutez une méthode de mise à jour qui sera récupérée par requestAnimationFrame qui est synchronisée avec le renouvellement du navigateur.  Habituellement, les renouvellements se produisent 60 fois par seconde, donc nous voyons 60 photos par seconde toutes les 16,6 ms. <br><br>  Si le développeur suppose que le navigateur de l'utilisateur ne peut pas prendre en charge requestAnimationFrame, le développeur peut utiliser le repli setTimeout ou un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">polyfill</a> prêt à l'emploi <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestAnimationFrame = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.requestAnimationFrame || <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.webkitRequestAnimationFrame || <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.mozRequestAnimationFrame || <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.setTimeout(callback, <span class="hljs-number"><span class="hljs-number">1000</span></span> / <span class="hljs-number"><span class="hljs-number">60</span></span>); }; })();</code> </pre> <br>  Afin de renouveler ou de récupérer la mise à jour dans le temps, j'enregistre la variable démarrée <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> started = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mouseX; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> mouseY; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'mousemove'</span></span>, e =&gt; { mouseX = e.clientX; mouseY = e.clientY; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!started){ started = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; update(); } }) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Here comes eyes movement magic requestAnimationFrame(update); }</span></span></code> </pre> <br>  De cette façon, je récupérais constamment la méthode de mise à jour et les coordonnées du curseur.  Ensuite, j'ai besoin d'obtenir des valeurs de mouvements de pommes dans les yeux. <br><br>  J'essaye de bouger les deux yeux comme un seul élément <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dx = mouseX - eyesCenterX; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dy = mouseY - eyesCenterY; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> angle = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.atan2(dy, dx); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> distance = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sqrt(dx * dx + dy * dy); distance = distance &gt; EYES_RADIUS ? EYES_RADIUS : distance; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.cos(angle) * distance; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> y = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin(angle) * distance; eye_left.style.transform = <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + x + <span class="hljs-string"><span class="hljs-string">'px,'</span></span> + y + <span class="hljs-string"><span class="hljs-string">'px)'</span></span>; eye_right.style.transform = <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + x + <span class="hljs-string"><span class="hljs-string">'px,'</span></span> + y + <span class="hljs-string"><span class="hljs-string">'px)'</span></span>;</code> </pre> <br>  Assez simple: trouver dx et dy, qui sont la différence de coordonnées entre le centre des yeux et la souris, trouver l'angle du centre au curseur, en utilisant les méthodes Math.cos et Math.sin, obtenez la valeur de mouvement pour l'horizontale et la verticale.  Utilisez un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">opérateur ternaire</a> et limitez la zone de mouvement des yeux. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/michaelchistyakov/embed/preview/mazqQd" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  La valeur Y est donnée en premier pour la méthode Math.atan2, puis la valeur x.  En conséquence, l'utilisateur remarque des mouvements des yeux non naturels et aucune mise au point. <br><br>  Faites bouger et regarder chaque œil sans référence l'un à l'autre. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// left eye let left_dx = mouseX - eyesCenterX + 48; let left_dy = mouseY - eyesCenterY; let left_angle = Math.atan2(left_dy, left_dx); let left_distance = Math.sqrt(left_dx * left_dx + left_dy * left_dy); left_distance = left_distance &gt; EYES_RADIUS ? EYES_RADIUS : left_distance; let left_x = Math.cos(left_angle) * left_distance; let left_y = Math.sin(left_angle) * left_distance; eye_left.style.transform = 'translate(' + left_x + 'px,' + left_y + 'px)'; // right eye let right_dx = mouseX - eyesCenterX - 48; let right_dy = mouseY - eyesCenterY; let right_angle = Math.atan2(right_dy, right_dx); let right_distance = Math.sqrt(right_dx * right_dx + right_dy * right_dy); right_distance = right_distance &gt; EYES_RADIUS ? EYES_RADIUS : right_distance; let right_x = Math.cos(right_angle) * right_distance; let right_y = Math.sin(right_angle) * right_distance; eye_right.style.transform = 'translate(' + right_x + 'px,' + right_y + 'px)';</span></span></code> </pre> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/michaelchistyakov/embed/preview/BvvoKM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Intéressant mais pire que le résultat précédent, les yeux montent et descendent indépendamment.  J'ai donc utilisé la première démo comme un mécanisme de base pour faire du mouvement et faire se rapprocher les pommes des yeux lorsque le curseur se trouve au centre du personnage. <br><br>  Je ne décrirai pas tout le code, veuillez trouver ci-dessous un résultat: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/michaelchistyakov/embed/preview/ebbpgd" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Par essais et erreurs, j'ai fait correspondre les paramètres nécessaires pour le mouvement des yeux et la mise au point.  Alors maintenant, j'ai besoin de lissage. <br><br>  <b>Lissage</b> <br><br>  Lier la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bibliothèque TweenMax</a> et coder quelque chose comme ça? <br><br><pre> <code class="javascript hljs">TweenMax.to( eye, <span class="hljs-number"><span class="hljs-number">0.15</span></span>, {<span class="hljs-attr"><span class="hljs-attr">x</span></span>: x, <span class="hljs-attr"><span class="hljs-attr">y</span></span>: y});</code> </pre> <br>  Lier une bibliothèque entière pour une tâche simple n'a pas de sens, donc je fais du lissage à partir de zéro. <br><br>  Mettez le cas qu'il n'y a qu'un seul élément d'oeil sur la page et sa zone de déplacement n'est pas du tout limitée.  Pour lisser les coordonnées des souris, j'utilise cette mécanique: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SMOOTHING = <span class="hljs-number"><span class="hljs-number">10</span></span>; x += (needX - x) / SMOOTHING; y += (needY - y) / SMOOTHING; eye.style.transform = <span class="hljs-string"><span class="hljs-string">'translate3d('</span></span> + x + <span class="hljs-string"><span class="hljs-string">'px,'</span></span> + y + <span class="hljs-string"><span class="hljs-string">'px,0)'</span></span>;</code> </pre> <br>  J'utilise translate3d pour séparer les yeux d'un autre flux de rendu et les accélérer. <br><br>  L'astuce est que toutes les 16,6 ms (60 photos par seconde) les variables x et y ont tendance à prendre les valeurs nécessaires.  Chaque renouvellement ferme la valeur à sa valeur nécessaire pour 1/10 de différence. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> needX = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> SMOOTHING = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ x += (needX - x) / SMOOTHING; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x); }</code> </pre> <br>  Ensuite, tous les 16,6 ms renouvelés, nous obtenons un lissage simple et les valeurs x suivantes (environ): <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">50</span></span> <span class="hljs-number"><span class="hljs-number">75</span></span> <span class="hljs-number"><span class="hljs-number">87.5</span></span> <span class="hljs-number"><span class="hljs-number">93.75</span></span> <span class="hljs-number"><span class="hljs-number">96.875</span></span> <span class="hljs-number"><span class="hljs-number">98.4375</span></span> <span class="hljs-number"><span class="hljs-number">99.21875</span></span> <span class="hljs-number"><span class="hljs-number">99.609375</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre> <br>  Quelques astuces plus évidentes: <br><br>  - Commencez cet examen pour optimiser la charge de travail <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x != needX || y != needY){ eye.style.transform = <span class="hljs-string"><span class="hljs-string">'translate3d('</span></span> + x + <span class="hljs-string"><span class="hljs-string">'px,'</span></span> + y + <span class="hljs-string"><span class="hljs-string">'px,0)'</span></span>; }</code> </pre> <br>  Mais vous devez assimiler x à needX quand ils sont aussi proches que les yeux sont presque les mêmes <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(x - needX) &lt; <span class="hljs-number"><span class="hljs-number">0.25</span></span>){ x = needX; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(y - needY) &lt; <span class="hljs-number"><span class="hljs-number">0.25</span></span>){ y = needY; }</code> </pre> <br>  Sinon, les valeurs x et y atteindront needX et needY trop longtemps;  il n'y aura pas de différences visuelles, mais chaque changement d'écran affectera le style des yeux.  Btw vous pouvez jouer avec vous-même. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> needX = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> smoothing = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ x += (needX - x) / smoothing; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>( <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.abs(x - needX) &gt; <span class="hljs-number"><span class="hljs-number">0.25</span></span> ){ <span class="hljs-comment"><span class="hljs-comment">// replace 0.25 with anything else and check number of x renewals. window.requestAnimationFrame(update); } else { x = needX; } console.log( x.toString(10) ); } update();</span></span></code> </pre> <br>  - Si la mécanique ci-dessus est claire, vous pouvez créer des effets plus complexes, par exemple le ressort.  Le lissage et l'approximation du curseur les plus simples ressemblent à ceci: <br><br><pre> <code class="javascript hljs">x += (mouseX - x) / smoothing; y += (mouseY - y) / smoothing;</code> </pre><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/michaelchistyakov/embed/preview/eQXvvq" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Ajoutez un lissage de la différence entre les valeurs de coordonnées nécessaires et actuelles. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/michaelchistyakov/embed/preview/NEJpeJ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Parfois, la limitation d'approximation est logique.  Il y a un exemple ci-dessus où la valeur passe de 0 à 100, donc dans la 1ère valeur d'itération atteint "50", c'est un chiffre assez énorme pour 1 étape.  Cette mécanique rappelle un peu le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">paradoxe d'Achille et de la tortue</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a> <br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://codepen.io/michaelchistyakov/embed/preview/PVYKRK" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Un clin d'oeil</b> <br><br>  Cachez et montrez les pommes des yeux toutes les 2-3 secondes.  La méthode la plus banale est «display: none;», «transform: scaleY (N)» avec une valeur dynamique d'échelle y est un peu plus complexe. <br><br>  Créer 2 consts <br><br>  const BLINK_COUNTER_LIMIT = 180;  - nombre de renouvellements avant le début du clignotement, <br>  const BLINKED_COUNTER_LIMIT = 6;  - nombre de renouvellements en un clin d'œil. <br><br>  Et 2 variables, dont les valeurs changeront à chaque renouvellement. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blinkCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blinkedCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre><br>  Code de clignotement <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blinkTransform = <span class="hljs-string"><span class="hljs-string">''</span></span>; blinkCounter++; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(blinkCounter &gt; BLINK_COUNTER_LIMIT){ blinkedCounter++ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(blinkedCounter &gt; BLINKED_COUNTER_LIMIT){ blinkCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { blinkTransform = <span class="hljs-string"><span class="hljs-string">' scaleY('</span></span> + (blinkedCounter / BLINKED_COUNTER_LIMIT) + <span class="hljs-string"><span class="hljs-string">')'</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { blinkedCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>  BlinkTransform est une variable de trait qui a une valeur vide entre le clignotement et les suivants pendant le clignotement <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">' scaleY(0.17)'</span></span> <span class="hljs-string"><span class="hljs-string">' scaleY(0.33)'</span></span> <span class="hljs-string"><span class="hljs-string">' scaleY(0.50)'</span></span> <span class="hljs-string"><span class="hljs-string">' scaleY(0.67)'</span></span> <span class="hljs-string"><span class="hljs-string">' scaleY(0.83)'</span></span> <span class="hljs-string"><span class="hljs-string">' scaleY(1.00)'</span></span></code> </pre> <br>  Tous les calculs donnent une transformation de clignotement variable, dont la valeur doit être ajoutée au code CSS de la transformation de position des yeux.  Ainsi, une chaîne vide est ajoutée en cas de temps d'arrêt de 3 secondes et cela n'affecte pas l'échelle des yeux, la valeur CSS est ajoutée pendant le clignotement. <br><br><pre> <code class="javascript hljs">eye_left.style.transform = <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + xLeft + <span class="hljs-string"><span class="hljs-string">'px,'</span></span> + y + <span class="hljs-string"><span class="hljs-string">'px)'</span></span> + blinkTransform; eye_right.style.transform = <span class="hljs-string"><span class="hljs-string">'translate('</span></span> + xRight + <span class="hljs-string"><span class="hljs-string">'px,'</span></span> + y + <span class="hljs-string"><span class="hljs-string">'px)'</span></span> + blinkTransform;</code> </pre><br>  <b>Leçon de l'histoire</b> <br><br>  Chaque jour, nous rencontrons des choses qui semblent simples et évidentes et nous ne comprenons même pas que cette simplicité externe cache une quantité colossale de questions et d'améliorations.  À mon avis, le diable est dans les détails qui forment l'ensemble du résultat final.  Muhammad Ali le meilleur boxeur du 20e siècle a soulevé le talon du pied arrière au moment du coup de poing droit.  Cette manœuvre a augmenté la distance de coup efficace et lui a donné plus de chances de gagner.  Cela a toujours fonctionné. <br><br>  <i>PS Je n'ai aucune incidence sur le site Web et j'espère que ses propriétaires ne s'en voudront pas à mes commentaires.</i>  <i>Pour plus de commodité, j'ai nommé pomme de l'œil = œil dans le code.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443720/">https://habr.com/ru/post/fr443720/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443708/index.html">La mission Chang'e 4 est le troisième jour lunaire. Rover "Yutu-2" à la recherche de ... pierres</a></li>
<li><a href="../fr443710/index.html">Java Challengers # 4: Comparaison d'objets avec equals () et hashCode ()</a></li>
<li><a href="../fr443714/index.html">ControlValueAccessor et contenteditable dans Angular</a></li>
<li><a href="../fr443716/index.html">"J'ai une sauvegarde sur ma bande." Histoire à la première personne</a></li>
<li><a href="../fr443718/index.html">Jeu fantastique avec 300 mille courses</a></li>
<li><a href="../fr443722/index.html">Conception et dénomination des files d'attente</a></li>
<li><a href="../fr443724/index.html">AMD Radeon VII: puce haut de gamme (partie 1)</a></li>
<li><a href="../fr443726/index.html">Caractéristiques de configuration de Palo Alto Networks: VPN SSL</a></li>
<li><a href="../fr443728/index.html">Google Plus cesse de fonctionner. Et alors?</a></li>
<li><a href="../fr443730/index.html">Ctrl-Alt-Del: obsolescence programmée des programmeurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>