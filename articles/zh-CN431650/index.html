<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕴🏼 👈🏼 👨‍👩‍👦‍👦 学习潜伏期：排队论 🤞🏾 🎖️ 🙈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="随着时间的推移，延迟的主题不仅在Yandex中的不同系统中变得有趣。 当任何服务担保出现在这些系统中时，就会发生这种情况。 显然，事实是，重要的是不仅要向用户保证一定的机会，而且要保证在合理的响应时间内收到它。 对于不同的系统，响应时间的“合理性”当然会有很大的不同，但是在所有系统中表现出延迟的基本...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>学习潜伏期：排队论</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/431650/"> 随着时间的推移，延迟的主题不仅在Yandex中的不同系统中变得有趣。 当任何服务担保出现在这些系统中时，就会发生这种情况。 显然，事实是，重要的是不仅要向用户保证一定的机会，而且要保证在合理的响应时间内收到它。 对于不同的系统，响应时间的“合理性”当然会有很大的不同，但是在所有系统中表现出延迟的基本原理是很普遍的，可以将它们与具体情况分开考虑。 <br><br> 我叫Sergey Trifonov，我在Yandex中的Real-Time Map Reduce团队工作。 我们正在开发一个实时数据流处理平台，具有秒和亚秒级的响应时间。 该平台可供内部用户使用，并允许他们在不断传入的数据流上执行应用程序代码。 在过去的一百多年中，我将尝试简要介绍人类有关延迟分析的基本概念，现在，我们将尝试了解使用排队论可以确切地了解延迟。 <br><a name="habracut"></a><br> 据我所知，与排队系统（电话通信网络）的出现有关，已经开始系统地研究等待时间现象。 排队理论始于1909年A.K. Erlang的工作，其中他证明了泊松分布适用于随机电话业务。  Erlang开发了一种已经用于设计电话网络数十年的理论。 该理论使我们能够确定拒绝服务的可能性。 对于具有电路交换通道的电话网络，如果所有通道都忙并且无法进行呼叫，则会发生故障。 此事件的可能性必须加以控制。 我想保证，例如，将处理所有呼叫的95％。 如果知道呼叫的持续时间和数量，则使用Erlang的公式可以确定需要多少台服务器才能实现此保证。 实际上，这项任务只是关于质量保证，如今人们仍在解决类似的问题。 但是系统已经变得更加复杂。 排队理论的主要问题是，在大多数机构中，它都不被教，很少有人理解通常的M / M / 1队列之外的问题（请参阅<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">下面</a>的表示法），但是众所周知，生活比这个系统复杂得多。 因此，我建议绕过M / M / 1，立即转到最有趣的地方。 <br><br><h2> 平均值 </h2><br> 如果您不试图获得有关系统中概率分布的完整知识，而是专注于更简单的问题，则可以获得有趣且有用的结果。 当然，其中最著名的是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">利特尔定理</a> 。 它适用于具有任何输入流，任何复杂性的内部设备以及内部具有任意调度程序的系统。 唯一的要求是系统必须稳定：平均响应时间和队列长度必须存在，然后通过简单表达式将它们连接起来 <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mo" id="MJXp-Span-3" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">= </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5"><font style="vertical-align: inherit;">l </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;">b </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;">d </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11"><font style="vertical-align: inherit;">W</font></span></font><span class="MJXp-mtext" id="MJXp-Span-4">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11"><font style="vertical-align: inherit;"></font></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.104ex" height="2.057ex" viewBox="0 -780.1 6503.1 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMAIN-3D" x="959" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-6C" x="2265" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-61" x="2564" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-6D" x="3093" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-62" x="3972" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-64" x="4401" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-61" x="4925" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-57" x="5454" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> L = \ lambda W </script></p> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-12"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大号</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-4C" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> L </script>  -系统所考虑部分中请求的平均时间[pcs]， <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-14"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w ^</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.435ex" height="2.057ex" viewBox="0 -780.1 1048.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-57" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> W </script>  -请求通过系统此部分的平均时间， <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-16"><span class="MJXp-mtext" id="MJXp-Span-17">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">l </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">m </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">b </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">a</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.987ex" height="2.057ex" viewBox="0 -780.1 3439 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-61" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-6D" x="1078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-62" x="1956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-64" x="2386" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/yandex/blog/431650/&amp;usg=ALkJrhjxouvXlL7XiDrL6gtCtmvwd1eu9w#MJMATHI-61" x="2909" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> \ lambda </script>  -接收系统请求的速度[pcs / s]。 该定理的优势在于它可以应用于系统的任何部分：队列，执行程序，队列+执行程序或整个网络。 通常，该定理的用法大致如下：“ 1Gbit / s的数据流涌向我们，我们测量了平均响应时间，它是10毫秒，因此，我们平均有1.25 MB的传输空间。” 因此，这种计算是不正确的。 更准确地说，只有所有请求的字节大小都相同时，才成立。 利特尔定理将查询按片段而不是字节进行计数。 <br><br><h3> 如何使用利特尔定理 </h3><br><img align="right" src="https://habrastorage.org/webt/zo/os/ls/zooslslr9rwcrzt9mp8dsrokhcu.png"> 在数学中，通常需要研究证据以获得真正的见解。 就是这种情况。 利特尔定理是如此之好，我在这里给出了证明的草图。 传入流量由功能描述 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-24"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A </font></font></span><span class="MJXp-mrow" id="MJXp-Span-26"><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></span></span><span class="MJXp-mrow" id="MJXp-Span-28"><span class="MJXp-mo" id="MJXp-Span-29" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">吨</font></font></span></span><span class="MJXp-mrow" id="MJXp-Span-30"><span class="MJXp-mo" id="MJXp-Span-31" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-5"> A（吨）</script>  -当时登录的请求数 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-32"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-33"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ť</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-6"> t </script>  。 相似地 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-34"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D </font></font></span><span class="MJXp-mrow" id="MJXp-Span-36"><span class="MJXp-mo" id="MJXp-Span-37" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></span></span><span class="MJXp-mrow" id="MJXp-Span-38"><span class="MJXp-mo" id="MJXp-Span-39" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">吨</font></font></span></span><span class="MJXp-mrow" id="MJXp-Span-40"><span class="MJXp-mo" id="MJXp-Span-41" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-7"> D（吨）</script>  -当时已注销的请求数 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-42"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-43"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ť</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8"> t </script>  。 请求的进入（退出）时刻被视为其最后一个字节的接收（传输）时刻。 系统的边界仅由这些时刻决定；因此，该定理可广泛应用。 如果在同一轴上绘制这些函数的图形，则很容易看到 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-44"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">甲</font></font></span><span class="MJXp-mrow" id="MJXp-Span-46"><span class="MJXp-mo" id="MJXp-Span-47" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">吨</font></font></span><span class="MJXp-mrow" id="MJXp-Span-49"><span class="MJXp-mo" id="MJXp-Span-50" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d </font></font></span><span class="MJXp-mrow" id="MJXp-Span-53"><span class="MJXp-mo" id="MJXp-Span-54" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">吨</font></font></span><span class="MJXp-mrow" id="MJXp-Span-56"><span class="MJXp-mo" id="MJXp-Span-57" style="margin-left: 0.278em; margin-right: 0.278em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> A（t）-D（t）</script> 是系统在时间t的请求数，并且 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-58"><span class="MJXp-msubsup" id="MJXp-Span-59"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">w ^ </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-61" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ñ</font></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-10"> W_n </script>  -第n个请求的响应时间。 <br><br> 该定理仅在1961年得到正式<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">证明</a> ，尽管该关系本身在此之前就已为人所知。 <br><br> 实际上，如果可以在系统中对请求进行重新排序，那么一切都会有些复杂，因此为简单起见，我们将假定这种情况不会发生。 尽管该定理在这种情况下也是正确的。 现在让我们计算图表之间的面积。 有两种方法可以做到这一点。 首先，根据列-作为积分通常认为。 在这种情况下，事实证明，整数就是队列的大小。 其次，逐行-简单地增加所有请求的延迟。 显然，两个计算得出的面积相同，因此它们是相等的。 如果相等的两个部分都除以我们计算面积的时间Δt，那么在左侧，我们将获得平均队列长度 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-62"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大号</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-11"> L </script>  （根据平均值的定义）。 右边有些棘手。 我们需要向分子和分母添加另一个请求数N，然后我们将成功 <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-64"><span class="MJXp-mtext" id="MJXp-Span-65">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69">c</span><span class="MJXp-mrow" id="MJXp-Span-70"><span class="MJXp-mtext" id="MJXp-Span-71">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74">m</span><span class="MJXp-msubsup" id="MJXp-Span-75"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76" style="margin-right: 0.05em;">W</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-77" style="vertical-align: -0.4em;">i</span></span></span><span class="MJXp-mrow" id="MJXp-Span-78"><span class="MJXp-mtext" id="MJXp-Span-79">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85">t</span></span><span class="MJXp-mo" id="MJXp-Span-86" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-87">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91">c</span><span class="MJXp-mrow" id="MJXp-Span-92"><span class="MJXp-mtext" id="MJXp-Span-93">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-94">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">m</span><span class="MJXp-msubsup" id="MJXp-Span-97"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98" style="margin-right: 0.05em;">W</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-99" style="vertical-align: -0.4em;">i</span></span></span><span class="MJXp-mrow" id="MJXp-Span-100"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">N</span></span><span class="MJXp-mtext" id="MJXp-Span-102">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">c</span><span class="MJXp-mrow" id="MJXp-Span-107"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">N</span></span><span class="MJXp-mrow" id="MJXp-Span-109"><span class="MJXp-mtext" id="MJXp-Span-110">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">D</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">t</span></span><span class="MJXp-mo" id="MJXp-Span-117" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">W</span><span class="MJXp-mtext" id="MJXp-Span-119">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125">a</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-12"> \ frac {\ sum W_i} {\ Delta t} = \ frac {\ sum W_i} {N} \ frac {N} {\ Delta t} = W \ lambda </script></p> 如果我们考虑足够大的Δt或一个雇用期，则可以消除边缘的问题，并可以证明定理成立。 <br><br> 重要的是要说证明中我们没有使用任何概率的分布。 实际上，利特尔定理是确定性定律！ 这样的定律在操作法排队理论中被称为。 它们可以应用于系统的任何部分以及各种随机变量的任何分布。 这些定律构成了一个构造函数，可以成功地用于分析网络中的平均值。 缺点是它们都仅适用于平均值，并且不提供有关分布的任何知识。 <br><br> 回到为什么Little定理不能应用于字节的问题，假设 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-126"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">A</span><span class="MJXp-mrow" id="MJXp-Span-128"><span class="MJXp-mo" id="MJXp-Span-129" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mrow" id="MJXp-Span-130"><span class="MJXp-mo" id="MJXp-Span-131" style="margin-left: 0.278em; margin-right: 0.278em;">吨</span></span><span class="MJXp-mrow" id="MJXp-Span-132"><span class="MJXp-mo" id="MJXp-Span-133" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> A（吨）</script> 和 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-134"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135">D</span><span class="MJXp-mrow" id="MJXp-Span-136"><span class="MJXp-mo" id="MJXp-Span-137" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mrow" id="MJXp-Span-138"><span class="MJXp-mo" id="MJXp-Span-139" style="margin-left: 0.278em; margin-right: 0.278em;">吨</span></span><span class="MJXp-mrow" id="MJXp-Span-140"><span class="MJXp-mo" id="MJXp-Span-141" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-14"> D（吨）</script> 现在，它们的度量单位不是字节，而是字节。 然后，进行类似的论证，我们得到 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-142"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">W</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> W </script> 奇怪的是面积除以字节总数。 仍然是几秒钟，但这只是加权平均延迟，较大的请求获得更大的加权。 这个值可以称为字节的平均延迟-通常，这是合乎逻辑的，因为我们用字节替换了片段-但不是请求的延迟。 <br><br> 利特尔定理说，对于特定的请求流，响应时间与系统中的请求数量成比例。 如果所有请求看起来都一样，则不增加功率就无法减少平均响应时间。 如果我们事先知道查询的大小，则可以尝试在内部重新排序，以减小 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-144"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-145">A</span><span class="MJXp-mrow" id="MJXp-Span-146"><span class="MJXp-mo" id="MJXp-Span-147" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mrow" id="MJXp-Span-148"><span class="MJXp-mo" id="MJXp-Span-149" style="margin-left: 0.278em; margin-right: 0.278em;">吨</span></span><span class="MJXp-mrow" id="MJXp-Span-150"><span class="MJXp-mo" id="MJXp-Span-151" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> A（吨）</script> 和 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-152"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">D</span><span class="MJXp-mrow" id="MJXp-Span-154"><span class="MJXp-mo" id="MJXp-Span-155" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mrow" id="MJXp-Span-156"><span class="MJXp-mo" id="MJXp-Span-157" style="margin-left: 0.278em; margin-right: 0.278em;">吨</span></span><span class="MJXp-mrow" id="MJXp-Span-158"><span class="MJXp-mo" id="MJXp-Span-159" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> D（吨）</script> 因此，平均系统响应时间。 继续这个想法，我们可以证明最短处理时间算法和最短剩余处理时间算法分别为一台服务器提供了最小的平均响应时间，而不会挤满它。 但是有一个副作用-可能不会无限期地处理大型请求。 这种现象被称为“饥饿”，并且与计划的公平性概念密切相关，可以从以前的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">计划</a>工作岗位上学到<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">：神话与现实</a> 。 <br><br> 理解利特尔定律还有另一个常见的陷阱。 有一个单线程服务器可以处理用户请求。 假设我们以某种方式测量了L-该服务器在队列中的平均请求数，S-服务器处理一个请求的平均时间。 现在考虑一个新的传入请求。 平均而言，他看到L在他前面询问。 服务每个人平均需要S秒。 原来，平均等待时间 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-160"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">W</span><span class="MJXp-mo" id="MJXp-Span-162" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">L</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-164">S</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> W = L S </script>  。 但是根据定理，事实证明 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-165"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">W</span><span class="MJXp-mo" id="MJXp-Span-167" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">L</span><span class="MJXp-mrow" id="MJXp-Span-169"><span class="MJXp-mo" id="MJXp-Span-170" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-171">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> W = L / \ lambda </script>  。 如果我们将表达式等式，那么我们会看到废话： <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-178"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">S</span><span class="MJXp-mo" id="MJXp-Span-180" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-181">1</span><span class="MJXp-mrow" id="MJXp-Span-182"><span class="MJXp-mo" id="MJXp-Span-183" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-184">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> S = 1 / \ lambda </script>  。 这种推理有什么问题？ <br><br><ol><li> 引起您注意的第一件事：定理的响应时间不取决于S。实际上，它确实取决于S。 只是平均队列长度已经考虑了这一点：服务器越快，队列长度越短，响应时间越短。 </li><li> 我们考虑的系统中，队列不会永远累积，而是会定期重置。 这意味着服务器利用率低于100％，并且我们跳过所有传入请求，并且以这些请求到达的平均速度相同，这意味着平均处理单个请求不会花费S秒，而是会花费更多 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-191"><span class="MJXp-mn" id="MJXp-Span-192">1</span><span class="MJXp-mrow" id="MJXp-Span-193"><span class="MJXp-mo" id="MJXp-Span-194" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-195">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-197">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> 1 / \ lambda </script> 秒，仅仅是因为有时我们不处理任何请求。 事实是，在没有损失的任何稳定的开放系统中，吞吐量不取决于服务器的速度，它仅由输入流确定。 </li><li> 传入请求在系统中看到的是时间平均请求数的假设并不总是正确的。 反例：传入的请求定期发送，我们设法在下一个请求到达之前处理每个请求。 实时系统的典型图片。 传入的请求在系统中始终会看到零个请求，但是平均而言，系统显然拥有多于零个请求。 如果请求是完全随机的，那么它们实际上是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">“看到请求的平均数量”</a> 。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ic/f2/10/icf210vybpp_wuwzbe4vh2xlkmw.png"></div></li><li> 我们没有考虑到服务器中可能已经有一个请求需要“扩展”的可能性。 在一般情况下，“售后服务”的平均时间与最初的服务时间有所不同，有时反而可能会更长。 当我们讨论微爆时，我们将在最后讨论这个问题，敬请期待。 </li></ol><br> 因此，利特尔定理可以应用于大型和小型系统，队列，服务器以及单个处理线程。 但是在所有这些情况下，请求通常以一种或另一种方式进行分类。 不同用户的请求，不同优先级的请求，来自不同位置的请求或不同类型的请求。 在这种情况下，按类汇总的信息就没有意义。 是的，混合请求的平均数量和所有请求的平均响应时间再次成比例。 但是，如果我们想知道某类请求的平均响应时间怎么办？ 令人惊讶的是，利特尔定理可以应用于特定类别的查询。 在这种情况下，您需要 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-202"><span class="MJXp-mtext" id="MJXp-Span-203">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> \ lambda </script> 此类请求的速率，不是全部。 作为一个 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-210"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">L</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> L </script> 和 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-212"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">W</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> W </script>  -在系统的调查部分中此类请求的数量和停留时间的平均值。 <br><br><h3> 开放式和封闭式系统 </h3><br><img align="right" src="https://habrastorage.org/webt/qf/kt/nx/qfktnxdcrkxahfeyooqy2hb47au.png"> 值得注意的是，对于封闭系统，“错误”的推理路线可以得出结论 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-214"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">S</span><span class="MJXp-mo" id="MJXp-Span-216" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-217">1</span><span class="MJXp-mrow" id="MJXp-Span-218"><span class="MJXp-mo" id="MJXp-Span-219" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-220">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-224">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-25"> S = 1 / \ lambda </script> 原来是真的。 封闭系统是这样的系统，其中请求不是来自外部，也不是外部，而是在内部循环。 或者，否则，是反馈系统：一旦请求离开系统，就会有一个新的请求代替。 这些系统也很重要，因为任何开放系统都可以视为浸入封闭系统中。 例如，您可以将网站视为开放系统，在其中不断请求，处理和撤回请求，或者相反，将其与网站的整个受众一起视为封闭系统。 然后，他们通常会说用户数量是固定的，他们要么等待请求的响应，要么“想”：他们收到了他们的页面，但还没有单击链接。 如果认为时间始终为零，则该系统也称为批处理系统。 <br><br> 如果外部到达的速度，则密闭系统的小定律是有效的 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-227"><span class="MJXp-mtext" id="MJXp-Span-228">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-233">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> \ lambda </script>  （它们不在封闭的系统中）替换为系统带宽。 如果我们将上述讨论的单线程服务器包装在批处理系统中，则会得到 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-235"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">S</span><span class="MJXp-mo" id="MJXp-Span-237" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-238">1</span><span class="MJXp-mrow" id="MJXp-Span-239"><span class="MJXp-mo" id="MJXp-Span-240" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-241">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-242">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-247">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> S = 1 / \ lambda </script> 和100％回收。 通常，对系统的这种查看会带来意想不到的结果。 在90年代，正是互联网与用户作为单一系统的这种观点<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">推动</a>了对指数分布以外的分布的研究。 我们将进一步讨论分布，但是在这里我们注意到，那时几乎所有事物和地方都被认为是指数式的，甚至找到了一些理由，而不仅仅是“否则太复杂”精神的借口。 然而，事实证明并非所有实用上重要的分布都具有同样长的尾巴，因此可以尝试了解分布尾巴。 但是现在，让我们回到平均值。 <br><br><h3> 相对论效应 </h3><br> 假设我们有一个开放的系统：一个复杂的网络或一个简单的单线程服务器-没关系。 如果我们将请求的到达速度加倍并将处理速度提高一半（例如，通过将所有系统组件的容量增加一倍），将会发生什么变化？ 利用率，吞吐量，系统中平均请求数和平均响应时间将如何变化？ 对于单线程服务器，您可以尝试采用公式，在“额头上”应用公式并获得结果，但是如何处理任意网络？ 直观的解决方案如下。 假设时间加倍，那么在我们的“加速参考系统”中，服务器的速度和请求流似乎没有变化； 因此，加速时间中的所有参数都具有与以前相同的值。 换句话说，任何系统的所有“运动部件”的加速度等于时钟的加速度。 现在，我们将这些值转换为具有正常时间的系统。 无量纲数量（利用率和平均请求数）将保持不变。 其维包括一阶时间因子的值成比例地变化。  [requests / s]的吞吐量将加倍，并且响应和等待时间[s]将减半。 <br><br> 可以用两种方式解释此结果： <br><br><ol><li> 以k倍加速的系统可以以k倍多的速度消化任务流，而以k倍的平均响应时间来消化任务流。 </li><li> 可以说，能力没有改变，只是任务的大小减少了k倍。 事实证明，我们向系统发送了相同的负载，但被分割成较小的部分。 还有……哦，一个奇迹！ 平均响应时间减少了！ </li></ol><br> 再一次，我注意到，这适用于各种系统，而不仅仅是简单的服务器。 从实际的角度来看，只有两个问题： <br><br><ol><li> 并非系统的所有部分都可以轻松加速。 我们根本不能影响某些人。 例如，光速。 </li><li> 并非所有任务都可以无限地划分为越来越小的任务，因为还没有学会将信息传输到少于1位的部分。 </li></ol><br> 考虑通过极限。 假设在同一个开放系统中，解释号为2。我们将每个传入请求均分为两半。 响应时间也减半。 重复除法多次。 而且，我们甚至不需要更改系统中的任何内容。 事实证明，只需将传入的请求分成足够多的部分，就可以使响应时间任意缩短。 在极限范围内，我们可以说不是查询而是“查询流体”，它由服务器过滤。 这就是所谓的流体模型，它是简化分析的非常方便的工具。 但是为什么响应时间为零？ 怎么了？ 我们在哪里不考虑延迟？ 事实证明，我们不仅仅考虑光速，还不能将其提高一倍。 网络通道中的传播时间无法更改，只能忍受。 实际上，通过网络的传输包括两个部分：传输时间和传播时间。 第一个可以通过增加功率（通道宽度）或减小数据包的大小来加速，第二个很难影响。 在我们的“液体模型”中，没有用于储存液体的容器-具有非零且恒定传播时间的网络通道。 顺便说一句，如果我们将它们添加到“液体模型”中，则延迟将由传播时间的总和确定，并且节点中的队列仍将为空。 队列仅取决于数据包大小和输入流的可变性（读取突发）。 <br><br> 随之而来的是，在延迟方面，您无法进行流量计算，甚至回收设备也无法解决所有问题。 有必要考虑到请求的大小，不要忘记分发时间，尽管在计算中添加它并不困难，但在排队论中通常会忽略它。 <br><br><h2> 发行版 </h2><br> 排队的原因是什么？ 显然，系统没有足够的容量，并且过多的请求正在累积吗？ 不对！ 在有足够资源的系统中也会出现队列。 如果没有足够的容量，那么该系统就如理论家所说的那样不稳定。 排队的主要原因有两个：请求的不规则性和请求大小的可变性。 我们已经研究了消除这两个原因的示例：一个实时系统，其中相同大小的请求严格周期性地发出。 队列永远不会形成。 队列中的平均等待时间为零。 ,      ,   ,    .      ,           . <br><br><img align="right" src="https://habrastorage.org/webt/i2/7m/an/i27man45re8dartbkru28x4mntc.png">      <a name="Kendall"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a> A/S/k/K,  A —    , S —   , k —  , K —        (,   ). ,   M/M/1  :  M (Markovian  Memoryless) ,         . :           <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-248"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">λ</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28">\lambda</script>    —      — ,  :        .  M ,             μ   .  ,    ,     .   ,   4-   . ,     ,   : G —   (,  ,     ), D — deterministic. C   — D/D/1.     ,     1909 ., — M/D/1.       — M/G/k  k&gt;1,    M/G/1    1930-. <br><br><h3>    ? </h3><br><img align="right" src="https://habrastorage.org/webt/zu/qk/yn/zuqkynemodd0x-8szhlclg3ltby.png">    ,         , ,    ,     ,       .        ,      .        ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">failure rate</a> . ,     ,          :        ,             .         failure rate function,      .  ,  «»     ,      .       ,   :      ,      . ,  failure rate — ,          ,       - ,      — .   ,  ,   ,   ,      ,           .    « ». <br><br><h3>     </h3><br> Failure rate     .     —     . Failure rate ,      ,   ,    .     failure rate,     ,   ,    .     failure rate,     ,   ,      .   ,          ,    ,   software  hardware?  :    ?    .      ,    ,   -   .         ?     ,   —  .       ( failure rate)       .   « » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>     . <br><br> ,        ,    failure rate,    , ,      unix-     .    ,     . <br><br> RTMR       ,      .   LWTrace     -   .       .     ,                    .     ,     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-250"><span class="MJXp-mrow" id="MJXp-Span-251"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-252">P</span></span><span class="MJXp-mo" id="MJXp-Span-253" style="margin-left: 0em; margin-right: 0em;">{</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">S</span><span class="MJXp-mo" id="MJXp-Span-255" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">x</span><span class="MJXp-mo" id="MJXp-Span-257" style="margin-left: 0em; margin-right: 0em;">}</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29">\mathbf{P}\{S>x\}</script>    .  ,    failure rate   ,       ,       :    . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/d6/ij/bk/d6ijbk59mdiphlalbk_4zwysv1i.png"></div><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> </a>    <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-258"><span class="MJXp-mrow" id="MJXp-Span-259"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-260">P</span></span><span class="MJXp-mo" id="MJXp-Span-261" style="margin-left: 0em; margin-right: 0em;">{</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">S</span><span class="MJXp-mo" id="MJXp-Span-263" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">x</span><span class="MJXp-mo" id="MJXp-Span-265" style="margin-left: 0em; margin-right: 0em;">}</span><span class="MJXp-mo" id="MJXp-Span-266" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-267"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268" style="margin-right: 0.05em;">x</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-269" style="vertical-align: 0.5em;"><span class="MJXp-mo" id="MJXp-Span-270">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">a</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30">\mathbf{P}\{S>x\} = x^{-a}</script> ,       —   .    ,     « »,  80/20:    ,      . .        ,       .  ,  RTMR   -,    ,   .  <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-272"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">a</span><span class="MJXp-mo" id="MJXp-Span-274" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-275">1.16</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-31">a=1.16</script> ,    80/20:  20%   80% . <br><br><h3>   </h3><br><img align="right" src="https://habrastorage.org/webt/wz/gx/vf/wzgxvfrwv40djjn8xm6fi73yilg.png">       ,   .           .   ,  ,    ,         -  .      ,   —     .  « »     ,   « » — . :  ,      ? ,      ( ,  ),           .    ,   0  .        , ,     <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-276"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-277">μ</span><span class="MJXp-msubsup" id="MJXp-Span-278"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279" style="margin-right: 0.05em;">N</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-280" style="vertical-align: -0.4em;">1</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32">\mu N_1</script>        <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-281"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">λ</span><span class="MJXp-msubsup" id="MJXp-Span-283"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284" style="margin-right: 0.05em;">N</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-285" style="vertical-align: -0.4em;">0</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33">\lambda N_0</script>  。  ,     ,    —   .         .       ,        .      M/M/1   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-286"><span class="MJXp-mrow" id="MJXp-Span-287"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-288">P</span></span><span class="MJXp-mo" id="MJXp-Span-289" style="margin-left: 0em; margin-right: 0em;">{</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">Q</span><span class="MJXp-mo" id="MJXp-Span-291" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">i</span><span class="MJXp-mo" id="MJXp-Span-293" style="margin-left: 0em; margin-right: 0em;">}</span><span class="MJXp-mo" id="MJXp-Span-294" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mo" id="MJXp-Span-295" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-296">1</span><span class="MJXp-mo" id="MJXp-Span-297" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">ρ</span><span class="MJXp-mo" id="MJXp-Span-299" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-msubsup" id="MJXp-Span-300"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-301" style="margin-right: 0.05em;">ρ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-302" style="vertical-align: 0.5em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34">\mathbf{P}\{Q=i\} = (1 - \rho) \rho^i</script> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-303"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">ρ</span><span class="MJXp-mo" id="MJXp-Span-305" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-306">λ</span><span class="MJXp-mrow" id="MJXp-Span-307"><span class="MJXp-mo" id="MJXp-Span-308" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">μ</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35">\rho = \lambda / \mu</script>  -这是服务器利用率。 故事的结尾。 在介绍的过程中，我错过了大量的假设，并做了一些概念上的替换，但我希望本质不会受到影响。 <br><br> 重要的是要了解，这种方法仅在机器的当前状态完全确定其进一步行为的情况下才有效，并且关于如何进入此状态的故事并不重要。 对于每天对有限状态机的理解，这毋庸置疑-毕竟这是一个条件。 但是对于一个随机过程，由此得出的结论是，所有分布都必须是指数分布的，因为只有它们没有内存-它们具有恒定的故障率。 <br><br><img width="400" align="right" src="https://habrastorage.org/webt/fo/ug/wo/fougwontl8vtxbrameivs1lware.png"> 同样重要的是，如果我们知道平衡分布，则很容易获得有关系统的所有其他信息。 系统中的平均查询数量是该分布的平均值。 为了找出平均响应时间，我们将利特尔定理应用于查询数量。 响应时间的分布较难找到，但是通过一些操作，您可以发现 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-310"><span class="noError" id="MJXp-Span-311" style="display: inline-block;">\&nbsp;mathbf&nbsp;{P}&nbsp;\&nbsp;{响应\&nbsp;_time&gt;&nbsp;t&nbsp;\}&nbsp;=&nbsp;e&nbsp;^&nbsp;{-（\&nbsp;mu-&nbsp;\&nbsp;lambda）t}</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> \ mathbf {P} \ {响应\ _time> t \} = e ^ {-（\ mu- \ lambda）t} </script> 什么是平均响应时间 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-312"><span class="MJXp-mn" id="MJXp-Span-313">1</span><span class="MJXp-mrow" id="MJXp-Span-314"><span class="MJXp-mo" id="MJXp-Span-315" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mrow" id="MJXp-Span-316"><span class="MJXp-mo" id="MJXp-Span-317" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mtext" id="MJXp-Span-318">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-320">u</span><span class="MJXp-mo" id="MJXp-Span-321" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mtext" id="MJXp-Span-322">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-324">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-326">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">a</span><span class="MJXp-mrow" id="MJXp-Span-329"><span class="MJXp-mo" id="MJXp-Span-330" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> 1 /（\ mu- \ lambda）</script>  。 <br><br><h3> 无限的响应时间 </h3><br> 从这个分布中，您可以找到响应时间的任何百分位数，结果表明百分位数等于无穷大。 换句话说，最坏的响应时间不受上面的限制。 一般来说，这并不奇怪，因为我们使用了泊松流。 但是实际上，这种行为是永远无法实现的。 显然，到服务器的请求输入流至少受到到该服务器的网络通道的宽度的限制，并且队列长度受此服务器上的内存的限制。 相反，泊松流具有非零的概率，保证了任意大突发的发生。 因此，如果您对高百分位数感兴趣并且系统负载非常高，那么在设计系统时，我不建议您从泊松输入流的假设出发。 最好使用其他流量模型，这将在我谈论网络演算时再讨论。 <br><br><h3> 缩放和保修 </h3><br><img align="right" src="https://habrastorage.org/webt/y_/vj/hb/y_vjhby6djhmqoazxqa4cfjvzvc.png"> 既然我们已经拥有足够强大的方法来分析系统，那么我们可以尝试将其应用于不同的任务并获得收益。 这就是大众服务理论在二十世纪下半叶发展起来的方式。 让我们尝试了解所取得的成就。 首先，让我们回到Erlang解决的任务。 这些是任务M / M / k / k和M / M / k，在其中我们要限制失败的可能性。 事实证明，构建马尔可夫链并不困难。 不同之处在于，随着任务的添加，反向转移的可能性增加，因为任务开始并行处理，但是当任务数等于服务器数时，就会发生饱和。 此外，对于M / M / k / k，网络结束，自动机实际上是有限的，并且所有到达最后一个状态的请求都被拒绝。 此事件的概率仅等于我们处于最后状态的概率。 <br><br><img align="left" src="https://habrastorage.org/webt/2v/oe/qi/2voeqidu00er2j-58c-q-egkmws.png"> 对于M / M / k，情况更加复杂，请求排队，出现新状态，但是反向转换的可能性并未增加-所有服务器都已在工作。 对于M / M / 1，网络变得无限。 顺便说一句，如果系统中的请求数量受到限制，那么链将始终具有有限数量的状态，并且将解决一种或另一种状态，这对于循环链来说是无法说的。 在封闭系统中，链始终是有限的。 求解描述的M / M / k / k和M / M / k的电路，我们分别得出<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">公式B</a>和Erlang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">公式C。</a> 它们相当笨重，我不会给他们，但是在它们的帮助下，您可以为直觉的发展获得有趣的结果，这称为平方根人员编制规则。 假设有一个M / M / k系统，每秒有一些给定的请求输入流λ。 假设到明天负荷应该增加一倍。 问题是：如何增加服务器数量，以使响应时间保持不变？ 服务器数量需要加倍，对吗？ 事实证明一点也不。 回想一下，我们已经看到：如果将时间（服务器和登录）速度缩短一半，那么平均响应时间将减少一半。 几台慢速服务器和一台快速服务器不是一回事，但是计算能力却是相同的。 特别是对于M / M / 1，响应时间与“自由容量”的数量成反比 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-331"><span class="MJXp-mtext" id="MJXp-Span-332" style="color: red;">\亩</span><span class="MJXp-mo" id="MJXp-Span-333" style="margin-left: 0em; margin-right: 0.111em;">−</span><span class="MJXp-mtext" id="MJXp-Span-334">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-337">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-339">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-38"> \亩-\ lambda </script> 并且仅由该体积决定。 当流量和处理能力加倍时，系统的可用容量将增加一倍： <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-341"><span class="MJXp-mn" id="MJXp-Span-342">2</span><span class="MJXp-mtext" id="MJXp-Span-343" style="color: red;">\亩</span><span class="MJXp-mo" id="MJXp-Span-344" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-345">2</span><span class="MJXp-mtext" id="MJXp-Span-346">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-350">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-352">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> 2 \亩-2 \ lambda </script>  。 似乎要解决该问题，您只需要节省可用容量，但是响应时间（M / M / k）已经由更复杂的Erlang公式确定。 事实证明，必须与“繁忙服务器”数量的平方根成比例地维护可用容量，以保持相同的响应时间。  “繁忙服务器”的数量是指服务器总数乘以利用率：这是稳定运行所需的最小服务器数量。 <br><br> 有时，他们使用此规则尝试证明如何使用服务器扩展群集。 但是不要以为任何集群都是M / M / k系统都是一种幻想。 例如，如果您在输入端有一个平衡器，该平衡器将队列中的请求发送到服务器，则不再是M / M / k，因为M / M / k表示一个公共队列，服务器在释放请求时从该队列中提取请求。 但是此模型适用于例如具有公共FIFO队列的线程池。 但是，即使在这种情况下，也要记住，该规则是线程很多的情况的近似值。 实际上，如果您有10个以上的线程，则可以放心地假设其中有很多线程。 好吧，不要忘了普遍存在的指数分布：如果不假设所有分布的指数性，该规则也不起作用。 <br><br><h3> 网络响应时间 </h3><br> 最终，由于我们创建了分布式系统，因此有趣的是至少一个链状连接的M / M / k网络。 为了研究网络，我想要一个构造函数：将已知元素连接到块中的简单明了规则。 例如，在控制理论中，传递函数可以理解为与串行或并行连接相结合。 在这里，任何节点的输出流都有非常复杂的分布，M / M / k除外，根据众所周知的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Burke定理，</a> M / M / k会产生独立的泊松流。 您可能会猜到，该例外主要被使用。 <br><br> 两个泊松流的连接是泊松流。 泊松流一分为二的概率再次给出了两个泊松流。 所有这些导致这样一个事实，即系统中的所有队列似乎都是独立的，并且您可以用正式语言获得所谓的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">产品形式解决方案</a> 。 也就是说，队列长度的联合分布只是所有队列长度分布的乘积，单独考虑-这就是概率论中表示独立性的方式。 我们只是找到流向所有节点的输入流，并分别对每个节点使用公式。 有许多限制： <br><br><ol><li> 概率路由算法。 节点服务的请求以已知的概率随机选择下一个。 这并不像看起来那样糟糕，因为可以使用“请求类”：说所有Vasya的请求先到达1号服务器，然后到达2号服务器，然后出网络，然后Petya的请求到达2号服务器。 ，然后以相同的概率访问1号或3号服务器并退出。 也就是说，并非所有过渡都必须是随机的，某些甚至所有过渡都可能具有100％的概率。 </li><li> 假设克莱因洛克（Kleinrock）的独立性。 请求处理时间不能取决于请求的历史记录或类别，而仅由服务器确定，并且当请求再次通过同一服务器时，每次都会对其进行随机选择。 实际上，无法设置将在不同服务器中使用的请求的大小，并且服务时间仅由服务器本身确定。 您也可以尝试解决此限制。 为此，通常使用概率路由，并进行循环以一定概率返回到同一服务器-就像它们重新启动请求一样。 我认为这是一个很奇怪的技巧，因为这样的请求会重新进入队列，并且不会立即执行，但是对于某些任务来说，这并不重要。 </li><li> 泊松输入所有节点上的流量和指数服务时间。 </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i-/tt/tu/i-tttuambmtnx24ekbohhqo0kew.png"></div> 杰克逊网络示例。 <br><br> 值得注意的是，在存在反馈的情况下，由于流动是相互依赖的，因此无法获得泊松流。 在反馈节点的输出处，还获得非泊松流，结果，所有流都变为非泊松流。 但是，令人惊讶的是，如果满足上述限制，所有这些非泊松流的行为与泊松流完全相同（哦，这是概率论）。 然后我们再次获得产品形式的解决方案。 这种网络称为<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Jackson网络</a> ，它们可以提供反馈，因此可以多次访问任何服务器。 还有其他的网络允许更多的自由，但是结果，关于网络的排队论的所有重要分析成果都在投入和产品形式解决方案中涉及了泊松流，这成为对此理论的批评对象，并在90年代导致其他理论的发展，以及实际需要什么分布以及如何使用它们的研究。 <br><br> 整个杰克逊网络理论的重要应用是IP网络和ATM网络中的数据包建模。 该模型非常合适：数据包大小变化不大，也不取决于数据包本身，仅取决于信道宽度，因为服务时间对应于数据包发送到信道的时间。 随机发送时间虽然听起来很疯狂，但实际上并没有很大的可变性。 此外，事实证明，在具有确定的服务时间的网络中，延迟不能大于类似的Jackson网络中的​​延迟，因此可以安全地使用此类网络从上方估计响应时间。 <br><br><h2> 非指数分布 </h2><br> 我讨论的所有结果都与指数分布有关，但我也提到实际分布是​​不同的。 感觉整个理论是完全没有用的。 这并非完全正确。 此外，有一种方法可以将其他分布集成到此数学设备中，几乎可以将任何分布都集成到其中，但这将使我们付出一些代价。 除了一些有趣的情况外，失去了以显式形式获得解决方案的机会，产品形式的解决方案以及构造函数都失去了：每个问题都必须使用马尔可夫链完全从头解决。 从理论上讲，这是一个大问题，但在实践中，它仅意味着数值方法的应用，并有可能解决更为复杂和接近现实的问题。 <br><br><h3> 相法 </h3><br> 这个想法很简单。 马尔可夫链不允许我们在一个状态内拥有记忆，因此所有过渡都应该是随机的，并且两个过渡之间的时间呈指数分布。 但是，如果将状态划分为几个子状态怎么办？ 如果我们希望整个结构保持马尔可夫链，并且我们确实希望这样做，则子状态之间的过渡必须仍然具有指数分布，因为我们知道如何求解此类链。 如果子状态是串联排列的，则通常将其称为相，并且将分区过程称为相方法。 <br><br> 最简单的例子。 请求的处理分为多个阶段：例如，首先，我们从数据库中读取必要的数据，然后执行一些计算，然后将结果写入数据库。 假设所有这三个阶段都具有相同的时间指数分布。 所有三个阶段的渡越时间在一起是什么分布？ 这是Erlang的发行版本。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gi/sn/ox/gisnoxcl23umxemita-xn7_oyis.png"></div><br><br> 但是，如果您进行了很多很多相同的简短阶段，该怎么办？ 在极限条件下，我们获得确定性分布。 也就是说，通过构建一条链，可以减少分布的可变性。 <br><br> 是否可以增加可变性？ 很简单 我们使用替代类别，而不是阶段链，随机选择其中一个。 一个例子。 几乎所有请求都可以快速执行，但是，一个巨大的请求到来的可能性很小，这需要很长时间。 这样的分布将降低故障率。 我们等待的时间越长，请求就越有可能属于第二类。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jp/09/vb/jp09vbkqf-nrvxlkhrbf7i6mygg.png"></div><br><br> 不断开发阶段方法，理论家发现，存在一类分布，您可以使用该分布精确地求解任意非负分布！ 考克斯的分配是通过阶段法建立的，仅不需要我们经历所有阶段，在每个阶段之后都有完成的可能性。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dx/ve/ti/dxvetidgigjolzluic7soljyrsi.png"></div><br><br> 这种分布既可以用于生成非泊松输入流，也可以用于创建非指数服务时间。 例如，这里是M / E2 / 1系统的马尔可夫链，具有服务时间的Erlang分布。 状态由一对数字（n，s）确定，其中n是队列的长度，而s是服务器所在的阶段的编号：第一或第二。  n和s的所有组合都是可能的。 传入消息仅更改n，并且在阶段完成后，它们交替出现并在第二阶段完成后减小队列的长度。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/br/dj/hu/brdjhuu3t0-ariyfqazvgkf54ky.png"></div><br><br><h3> 你有爆裂！ </h3><br> 加载一半容量的系统能否减慢速度？ 作为第一个测试对象，我们准备M / G / 1。 给出：入口处的泊松流和任意分配的使用时间。 考虑单个请求在整个系统中的路径。 随机传入的请求在自己前面的队列中看到请求的平均时间数 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-353"><span class="MJXp-mtext" id="MJXp-Span-354">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-358">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-360">f</span><span class="MJXp-mrow" id="MJXp-Span-361"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-362">E</span></span><span class="MJXp-mo" id="MJXp-Span-363" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-364"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-365" style="margin-right: 0.05em;">N</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-366" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-367" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> \ mathbf {E} [N_Q] </script>  。 他们每个人的平均处理时间 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-368"><span class="MJXp-mtext" id="MJXp-Span-369">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-371">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-373">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-374">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-375">f</span><span class="MJXp-mrow" id="MJXp-Span-376"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">E</span></span><span class="MJXp-mo" id="MJXp-Span-378" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">S</span><span class="MJXp-mo" id="MJXp-Span-380" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-41"> \ mathbf {E} [S] </script>  。 等于处置的概率 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-381"><span class="MJXp-mtext" id="MJXp-Span-382">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">o</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-42"> \ rho </script>  ，服务器中还有另一个请求，必须首先及时“服务” <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-386"><span class="MJXp-mtext" id="MJXp-Span-387">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-388">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-389">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-391">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393">f</span><span class="MJXp-mrow" id="MJXp-Span-394"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395">E</span></span><span class="MJXp-mo" id="MJXp-Span-396" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-397"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-399" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-400" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43"> \ mathbf {E} [S_e] </script>  。 总结一下，我们得出队列中的总等待时间 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-401"><span class="MJXp-mtext" id="MJXp-Span-402">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-405">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-408">f</span><span class="MJXp-mrow" id="MJXp-Span-409"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410">E</span></span><span class="MJXp-mo" id="MJXp-Span-411" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-412"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-413" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-414" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-415" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-416" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-417">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-419">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-420">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423">f</span><span class="MJXp-mrow" id="MJXp-Span-424"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-425">E</span></span><span class="MJXp-mo" id="MJXp-Span-426" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-427"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-428" style="margin-right: 0.05em;">N</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-429" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-430" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mtext" id="MJXp-Span-431">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-432">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-434">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-435">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-437">f</span><span class="MJXp-mrow" id="MJXp-Span-438"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-439">E</span></span><span class="MJXp-mo" id="MJXp-Span-440" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-441">S</span><span class="MJXp-mo" id="MJXp-Span-442" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-443" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-444">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-446">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-448">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-449">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-451">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-452">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453">f</span><span class="MJXp-mrow" id="MJXp-Span-454"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-455">E</span></span><span class="MJXp-mo" id="MJXp-Span-456" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-457"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-459" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-460" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> \ mathbf {E} [T_Q] = \ mathbf {E} [N_Q] \ mathbf {E} [S] + \ rho mathbf {E} [S_e] </script>  。 利特定理 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-461"><span class="MJXp-mtext" id="MJXp-Span-462">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-464">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-466">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468">f</span><span class="MJXp-mrow" id="MJXp-Span-469"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-470">E</span></span><span class="MJXp-mo" id="MJXp-Span-471" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-472"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-473" style="margin-right: 0.05em;">N</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-474" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-475" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-476" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-477">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-480">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-481">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">a</span><span class="MJXp-mtext" id="MJXp-Span-484">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-485">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-486">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-487">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-489">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-490">f</span><span class="MJXp-mrow" id="MJXp-Span-491"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">E</span></span><span class="MJXp-mo" id="MJXp-Span-493" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-494"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-496" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-497" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45"> \ mathbf {E} [N_Q] = \ lambda \ mathbf {E} [T_Q] </script>  ; 结合起来，我们得到： <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-498"><span class="MJXp-mtext" id="MJXp-Span-499">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-500">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-501">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-502">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-504">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505">f</span><span class="MJXp-mrow" id="MJXp-Span-506"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-507">E</span></span><span class="MJXp-mo" id="MJXp-Span-508" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-509"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-511" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-512" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-513" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-514">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-517">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-518">c</span><span class="MJXp-mrow" id="MJXp-Span-519"><span class="MJXp-mtext" id="MJXp-Span-520">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-522">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-523">o</span></span><span class="MJXp-mrow" id="MJXp-Span-524"><span class="MJXp-mn" id="MJXp-Span-525">1</span><span class="MJXp-mo" id="MJXp-Span-526" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mtext" id="MJXp-Span-527">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-528">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-530">o</span></span><span class="MJXp-mtext" id="MJXp-Span-531">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-532">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-533">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-534">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-535">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537">f</span><span class="MJXp-mrow" id="MJXp-Span-538"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-539">E</span></span><span class="MJXp-mo" id="MJXp-Span-540" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-541"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-542" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-543" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-544" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-46"> \ mathbf {E} [T_Q] = \ frac {\ rho} {1- \ rho} \ mathbf {E} [S_e] </script></p> 即，队列中的等待时间由两个因素确定。 第一个是服务器利用率的影响，第二个是平均售后服务时间。 考虑第二个因素。 请求到达某个点 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-545"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546">t</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-47"> t </script>  ，看到善后需要时间 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-547"><span class="MJXp-msubsup" id="MJXp-Span-548"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-549" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-550" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mrow" id="MJXp-Span-551"><span class="MJXp-mo" id="MJXp-Span-552" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-553">t</span><span class="MJXp-mrow" id="MJXp-Span-554"><span class="MJXp-mo" id="MJXp-Span-555" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-48"> S_e（t）</script>  。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xt/ak/d0/xtakd0ypobod5ijatuasexj1t6w.png"></div><br><br> 平均时间 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-556"><span class="MJXp-mtext" id="MJXp-Span-557">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-561">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563">f</span><span class="MJXp-mrow" id="MJXp-Span-564"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">E</span></span><span class="MJXp-mo" id="MJXp-Span-566" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-567"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-568" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-569" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-570" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-49"> \ mathbf {E} [S_e] </script> 由函数的平均值确定 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-571"><span class="MJXp-msubsup" id="MJXp-Span-572"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-573" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-574" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mrow" id="MJXp-Span-575"><span class="MJXp-mo" id="MJXp-Span-576" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-577">t</span><span class="MJXp-mrow" id="MJXp-Span-578"><span class="MJXp-mo" id="MJXp-Span-579" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> S_e（t）</script>  ，即三角形的面积除以总时间。 显然，我们可以将自己限制在一个“中间”三角形，然后 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-580"><span class="MJXp-mtext" id="MJXp-Span-581">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-584">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-587">f</span><span class="MJXp-mrow" id="MJXp-Span-588"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-589">E</span></span><span class="MJXp-mo" id="MJXp-Span-590" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-591"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-592" style="margin-right: 0.05em;">S</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-593" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-594" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-595" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-596">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-597">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-598">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-599">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-601">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-602">f</span><span class="MJXp-mrow" id="MJXp-Span-603"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-604">E</span></span><span class="MJXp-mo" id="MJXp-Span-605" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-606"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-607" style="margin-right: 0.05em;">S</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-608" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-609" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mrow" id="MJXp-Span-610"><span class="MJXp-mo" id="MJXp-Span-611" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-612">2</span><span class="MJXp-mtext" id="MJXp-Span-613">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-614">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-615">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-617">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-618">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">f</span><span class="MJXp-mrow" id="MJXp-Span-620"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-621">E</span></span><span class="MJXp-mo" id="MJXp-Span-622" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-623">S</span><span class="MJXp-mo" id="MJXp-Span-624" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-51"> \ mathbf {E} [S_e] = \ mathbf {E} [S ^ 2] / 2 \ mathbf {E} [S] </script>  。 这真是出乎意料。 我们已经收到，售后服务时间不仅取决于服务时间的平均值，还取决于其可变性。 解释很简单。 掉入长时间间隔的可能性 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-625"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">S</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52"> S </script> 此外，它实际上与该间隔的持续时间S成正比。 这解释了著名的“等待时间悖论”或“检查悖论”。 但回到M / G / 1。 如果您结合我们获得的所有内容并使用可变性进行重写 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-627"><span class="MJXp-msubsup" id="MJXp-Span-628"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-629" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-631">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-630">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-632" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-633">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-634">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-636">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-637">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-638">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-639">f</span><span class="MJXp-mrow" id="MJXp-Span-640"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-641">E</span></span><span class="MJXp-mo" id="MJXp-Span-642" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-643">S</span><span class="MJXp-mo" id="MJXp-Span-644" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mrow" id="MJXp-Span-645"><span class="MJXp-mo" id="MJXp-Span-646" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mtext" id="MJXp-Span-647">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-648">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-649">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-650">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-651">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-652">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653">f</span><span class="MJXp-mrow" id="MJXp-Span-654"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-655">E</span></span><span class="MJXp-mo" id="MJXp-Span-656" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-657">S</span><span class="MJXp-msubsup" id="MJXp-Span-658"><span class="MJXp-mo" id="MJXp-Span-659" style="margin-left: 0em; margin-right: 0.05em;">]</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-660" style="vertical-align: 0.5em;">2</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53"> C ^ 2_S = \ mathbf {E} [S] / \ mathbf {E} [S] ^ 2 </script> 得到著名的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pollaczek-Khinchine公式</a> ： <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-661"><span class="MJXp-mtext" id="MJXp-Span-662">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-663">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-664">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-665">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-666">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-667">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-668">f</span><span class="MJXp-mrow" id="MJXp-Span-669"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">E</span></span><span class="MJXp-mo" id="MJXp-Span-671" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-672"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-673" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-674" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-675" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-676" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-677">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-678">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-681">c</span><span class="MJXp-mrow" id="MJXp-Span-682"><span class="MJXp-mtext" id="MJXp-Span-683">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-684">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-685">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-686">o</span></span><span class="MJXp-mrow" id="MJXp-Span-687"><span class="MJXp-mn" id="MJXp-Span-688">1</span><span class="MJXp-mo" id="MJXp-Span-689" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mtext" id="MJXp-Span-690">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-691">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-692">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-693">o</span></span><span class="MJXp-mtext" id="MJXp-Span-694">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-696">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-697">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-698">c</span><span class="MJXp-mrow" id="MJXp-Span-699"><span class="MJXp-mtext" id="MJXp-Span-700">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-701">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-702">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-703">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-704">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-705">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-706">f</span><span class="MJXp-mrow" id="MJXp-Span-707"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-708">E</span></span><span class="MJXp-mo" id="MJXp-Span-709" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-710">S</span><span class="MJXp-mo" id="MJXp-Span-711" style="margin-left: 0em; margin-right: 0em;">]</span></span><span class="MJXp-mrow" id="MJXp-Span-712"><span class="MJXp-mn" id="MJXp-Span-713">2</span></span><span class="MJXp-mrow" id="MJXp-Span-714"><span class="MJXp-mo" id="MJXp-Span-715" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-msubsup" id="MJXp-Span-716"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-719">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-718">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-720" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-721">1</span><span class="MJXp-mrow" id="MJXp-Span-722"><span class="MJXp-mo" id="MJXp-Span-723" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-54"> \ mathbf {E} [T_Q] = \ frac {\ rho} {1- \ rho} \ frac {\ mathbf {E} [S]} {2}（C ^ 2_S + 1）</script></p> 如果证明让您感到厌烦，我希望它能使实际应用的结果满意。 我们已经在RTMR中检查了服务时间数据。 长长的尾巴变化很大，在这种情况下 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-724"><span class="MJXp-msubsup" id="MJXp-Span-725"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-726" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-728">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-727">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-729" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-730">381</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55"> C ^ 2_S = 381 </script>  。 您所看到的不仅仅是 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-731"><span class="MJXp-msubsup" id="MJXp-Span-732"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-733" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-735">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-734">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-736" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-737">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56"> C ^ 2_S = 1 </script> 用于指数分布。 平均而言，一切都非常快： <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-738"><span class="MJXp-mtext" id="MJXp-Span-739">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-740">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-741">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-742">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-743">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-744">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-745">f</span><span class="MJXp-mrow" id="MJXp-Span-746"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-747">E</span></span><span class="MJXp-mo" id="MJXp-Span-748" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-749">S</span><span class="MJXp-mo" id="MJXp-Span-750" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-751" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-752">263.792</span><span class="MJXp-mrow" id="MJXp-Span-753"><span class="MJXp-mo" id="MJXp-Span-754" style="margin-left: 0em; margin-right: 0em;">μ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-755">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> \ mathbf {E} [S] = 263.792μs</script>  。 现在假设RTMR是由M / G / 1系统建模的，并且让系统不被重载，丢弃 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-756"><span class="MJXp-mtext" id="MJXp-Span-757">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-758">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-759">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-760">o</span><span class="MJXp-mo" id="MJXp-Span-761" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-762">0.5</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-58"> \ rho = 0.5 </script>  。 代入公式，我们得到 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-763"><span class="MJXp-mtext" id="MJXp-Span-764">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-765">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-766">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-767">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-768">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-769">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-770">f</span><span class="MJXp-mrow" id="MJXp-Span-771"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-772">E</span></span><span class="MJXp-mo" id="MJXp-Span-773" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-774"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-776" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-mo" id="MJXp-Span-777" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-778" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-779">1</span><span class="MJXp-mo" id="MJXp-Span-780" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mrow" id="MJXp-Span-781"><span class="MJXp-mo" id="MJXp-Span-782" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-mn" id="MJXp-Span-783">381</span><span class="MJXp-mo" id="MJXp-Span-784" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-785">1</span><span class="MJXp-mrow" id="MJXp-Span-786"><span class="MJXp-mo" id="MJXp-Span-787" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mrow" id="MJXp-Span-788"><span class="MJXp-mo" id="MJXp-Span-789" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-790">2</span><span class="MJXp-mo" id="MJXp-Span-791" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mn" id="MJXp-Span-792">263.792</span><span class="MJXp-mrow" id="MJXp-Span-793"><span class="MJXp-mo" id="MJXp-Span-794" style="margin-left: 0em; margin-right: 0em;">μ</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-795">s</span><span class="MJXp-mo" id="MJXp-Span-796" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-797">50</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-798">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-799">s</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-59"> \ mathbf {E} [T_Q] = 1 *（381 + 1）/ 2 * 263.792μs= 50 ms </script>  。 由于微爆，即使是这样一种快速且未充分利用的系统，平均而言也可以变成令人作呕的系统。 在50毫秒内，您可以访问硬盘驱动器6次，或者，如果幸运的话，甚至可以访问另一大洲的数据中心！ 顺便说一下，对于G / G / 1，有一个<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">近似值</a>考虑了传入流量的可变性：它看起来完全一样，只是相反 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-800"><span class="MJXp-msubsup" id="MJXp-Span-801"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-802" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-804">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-803">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-805" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-806">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-60-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-60"> C ^ 2_S + 1 </script> 这是两个品种的总和 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-807"><span class="MJXp-msubsup" id="MJXp-Span-808"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-809" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-811">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-810">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-812" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-813"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-814" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-816">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-815">A</span></span></span></span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-61-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-61"> C ^ 2_S + C ^ 2_A </script>  。 对于多台服务器，情况会更好，但是多台服务器的效果仅影响第一个因素。 可变性的影响仍然存在： <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-817"><span class="MJXp-mtext" id="MJXp-Span-818">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-819">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-820">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-821">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-822">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-823">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-824">f</span><span class="MJXp-mrow" id="MJXp-Span-825"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-826">E</span></span><span class="MJXp-mo" id="MJXp-Span-827" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-828"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-829" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-830" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-msubsup" id="MJXp-Span-831"><span class="MJXp-mo" id="MJXp-Span-832" style="margin-left: 0em; margin-right: 0.05em;">]</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-833" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-834">G</span><span class="MJXp-mrow" id="MJXp-Span-835"><span class="MJXp-mo" id="MJXp-Span-836">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-837">G</span><span class="MJXp-mrow" id="MJXp-Span-838"><span class="MJXp-mo" id="MJXp-Span-839">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-840">k</span></span></span><span class="MJXp-mo" id="MJXp-Span-841" style="margin-left: 0.333em; margin-right: 0.333em;">≈</span><span class="MJXp-mtext" id="MJXp-Span-842">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-843">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-844">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-845">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-846">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-847">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-848">f</span><span class="MJXp-mrow" id="MJXp-Span-849"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-850">E</span></span><span class="MJXp-mo" id="MJXp-Span-851" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-852"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-853" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-854" style="vertical-align: -0.4em;">Q</span></span><span class="MJXp-msubsup" id="MJXp-Span-855"><span class="MJXp-mo" id="MJXp-Span-856" style="margin-left: 0em; margin-right: 0.05em;">]</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-857" style="vertical-align: 0.5em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-858">M</span><span class="MJXp-mrow" id="MJXp-Span-859"><span class="MJXp-mo" id="MJXp-Span-860">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-861">M</span><span class="MJXp-mrow" id="MJXp-Span-862"><span class="MJXp-mo" id="MJXp-Span-863">/</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-864">k</span></span></span><span class="MJXp-mrow" id="MJXp-Span-865"><span class="MJXp-mo" id="MJXp-Span-866" style="margin-left: 0.278em; margin-right: 0.278em;">（</span></span><span class="MJXp-msubsup" id="MJXp-Span-867"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-868" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-870">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-869">S</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-871" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-msubsup" id="MJXp-Span-872"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-873" style="margin-right: 0.05em;">C</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mn" id="MJXp-Span-875">2</span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-874">A</span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-876"><span class="MJXp-mo" id="MJXp-Span-877" style="margin-left: 0.278em; margin-right: 0.278em;">）</span></span><span class="MJXp-mrow" id="MJXp-Span-878"><span class="MJXp-mo" id="MJXp-Span-879" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-880">2</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-62-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-62"> \ mathbf {E} [T_Q] ^ {G / G / k}≈\ mathbf {E} [T_Q] ^ {M / M / k}（C ^ 2_S + C ^ 2_A）/ 2 </script>  。 <br><br> 微爆发看起来像什么？ 关于线程池，这些任务的服务速度足够快，以至于在回收计划中不可见，而速度又很慢，足以在它们自己后面创建队列并影响池响应时间。 从理论上讲，这些都是从分布的尾部开始的巨大查询。 假设您有一个包含10个线程的池，然后查看基于运行时间和停机时间的指标的回收计划，该指标每15秒收集一次。 首先，您可能根本没有注意到一个线程正在挂起，或者所有10个线程同时执行大型任务一秒钟，然后在14秒钟内什么也不做。  15秒的分辨率不允许看到高达100％的利用率跃升至0％的跃迁，并且响应时间受到影响。 ,    ,    15     6 ,      . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8v/19/8r/8v198rjsunpavjnp12kadqnk1as.gif"></div><br><br>      ,    (   )     . <br><br>      ,  RTMR   SelfPing,    ( 10 ),         —     .   ,      10        15 .  ,          . ,      ,     10 ,       ,    —    .    self-ping-     CPU.   ,     :      ,   ,    . :    ,     ,     .       :       .     ,      15-  , —     . <br><br> ,   ,  SelfPing ,    ?   ?     ,   LWTrace.         ,             .    -100  .     .       :       ;     —     ,          ,    ;    perf  ,       ,     . <br><br><h3>      </h3><br><img align="right" src="https://habrastorage.org/webt/1w/3r/yl/1w3ryloyjmzbo6r6di9fj0xsiz0.png">      « »,       .       ,    ,      .    FIFO-.    ,       ,       latency ( SPT  SRPT).   —        . ,          ,    ,              .   ,       «  »,        . <br><br>         ,  -   product-form solution       .     M/ <b>Cox</b> /1/ <b>PS</b> .    ,    (Coxian distribution)      (Processor Sharing),    ,   ,     .     ? ,         .     ,    ,    (.   )     ,  ,         M/ <b>M</b> /1/ <b>FIFO</b> ,         ,   . <br><br>   !   ,       ,          ,     !       insensitivity property.     ,   ,        ,      ,   .       — M/M/∞.     ,     .          ,    product-form solution      — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="> BCMP</a> . <br><br><img align="left" src="https://habrastorage.org/webt/6e/ak/13/6eak136q6prunjzlpkeucra2isk.png">      .  ,      (,   ),     ,    , ó      .     . 解决方法。 <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-881"><span class="MJXp-mrow" id="MJXp-Span-882"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-883">E</span></span><span class="MJXp-mo" id="MJXp-Span-884" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-885">T</span><span class="MJXp-mo" id="MJXp-Span-886" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-887" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-888">1</span><span class="MJXp-mrow" id="MJXp-Span-889"><span class="MJXp-mo" id="MJXp-Span-890" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-891">3</span><span class="MJXp-mrow" id="MJXp-Span-892"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-893">E</span></span><span class="MJXp-mo" id="MJXp-Span-894" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-895"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-896" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-897" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-898" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-899" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-900">2</span><span class="MJXp-mrow" id="MJXp-Span-901"><span class="MJXp-mo" id="MJXp-Span-902" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-903">3</span><span class="MJXp-mrow" id="MJXp-Span-904"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-905">E</span></span><span class="MJXp-mo" id="MJXp-Span-906" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-907"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-908" style="margin-right: 0.05em;">T</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-909" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-910" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-63-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-63">\mathbf{E}[T] = 1/3 \mathbf{E}[T_1] + 2/3 \mathbf{E}[T_2]</script>  。    <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-911"><span class="MJXp-mrow" id="MJXp-Span-912"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-913">E</span></span><span class="MJXp-mo" id="MJXp-Span-914" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-msubsup" id="MJXp-Span-915"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-916" style="margin-right: 0.05em;">T</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-917" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-918" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-919" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-920">1</span><span class="MJXp-mrow" id="MJXp-Span-921"><span class="MJXp-mo" id="MJXp-Span-922" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mo" id="MJXp-Span-923" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-924"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-925" style="margin-right: 0.05em;">μ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-926" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-927" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-msubsup" id="MJXp-Span-928"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-929" style="margin-right: 0.05em;">λ</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-930" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-931" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-64-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-64">\mathbf{E}[T_i] = 1/(\mu_i - \lambda_i)</script>     M/M/1/FCFS   <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-932"><span class="MJXp-mrow" id="MJXp-Span-933"><span class="MJXp-mi MJXp-bold" id="MJXp-Span-934">E</span></span><span class="MJXp-mo" id="MJXp-Span-935" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-936">T</span><span class="MJXp-mo" id="MJXp-Span-937" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-938" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-939">1</span><span class="MJXp-mrow" id="MJXp-Span-940"><span class="MJXp-mo" id="MJXp-Span-941" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-942">3</span><span class="MJXp-mo" id="MJXp-Span-943" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mn" id="MJXp-Span-944">1</span><span class="MJXp-mrow" id="MJXp-Span-945"><span class="MJXp-mo" id="MJXp-Span-946" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mo" id="MJXp-Span-947" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-948">3</span><span class="MJXp-mo" id="MJXp-Span-949" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-950">3</span><span class="MJXp-mo" id="MJXp-Span-951" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mn" id="MJXp-Span-952">1</span><span class="MJXp-mrow" id="MJXp-Span-953"><span class="MJXp-mo" id="MJXp-Span-954" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-955">3</span><span class="MJXp-mo" id="MJXp-Span-956" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-957" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-958">2</span><span class="MJXp-mrow" id="MJXp-Span-959"><span class="MJXp-mo" id="MJXp-Span-960" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-961">3</span><span class="MJXp-mo" id="MJXp-Span-962" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mn" id="MJXp-Span-963">1</span><span class="MJXp-mrow" id="MJXp-Span-964"><span class="MJXp-mo" id="MJXp-Span-965" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mo" id="MJXp-Span-966" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mn" id="MJXp-Span-967">4</span><span class="MJXp-mo" id="MJXp-Span-968" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-969">3</span><span class="MJXp-mo" id="MJXp-Span-970" style="margin-left: 0.267em; margin-right: 0.267em;">∗</span><span class="MJXp-mn" id="MJXp-Span-971">2</span><span class="MJXp-mrow" id="MJXp-Span-972"><span class="MJXp-mo" id="MJXp-Span-973" style="margin-left: 0.111em; margin-right: 0.111em;">/</span></span><span class="MJXp-mn" id="MJXp-Span-974">3</span><span class="MJXp-mo" id="MJXp-Span-975" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-976" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-977">0.5</span><span class="MJXp-mrow" id="MJXp-Span-978"><span class="MJXp-mo" id="MJXp-Span-979" style="margin-left: 0.278em; margin-right: 0.278em;"></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-65-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-65">\mathbf{E}[T] = 1/3 * 1/(3 - 3 * 1/3) + 2/3 * 1/(4 - 3*2/3) = 0.5 </script>  。 <br><br>  ,    ,  .     ,              . <br><br><h2>     </h2><br><ol><li>         ,   ,  ,      computer science,     .    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Performance Modeling and Design of Computer Systems: Queueing Theory in Action</a> (2013).  -  ,       . ó    —    . </li><li>  ,      ,   ,    ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>  Robert B. Cooper.           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="></a>  ,     . </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN431650/">https://habr.com/ru/post/zh-CN431650/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN431638/index.html">我们如何进入一家大公司的信息安全部门并开始工作的。 两位年轻有为的专家的日记</a></li>
<li><a href="../zh-CN431642/index.html">养蜂人与微控制器或错误的好处</a></li>
<li><a href="../zh-CN431644/index.html">与TM的直线。 v4.0</a></li>
<li><a href="../zh-CN431646/index.html">DataGrip 2018.3：支持Cassandra，从对象生成SQL文件，对自动完成功能进行了许多改进等</a></li>
<li><a href="../zh-CN431648/index.html">NB-IoT：它如何工作？ 第二部分</a></li>
<li><a href="../zh-CN431652/index.html">储层采样算法</a></li>
<li><a href="../zh-CN431654/index.html">编程语言趋势2019</a></li>
<li><a href="../zh-CN431656/index.html">CraSSh：使用CSS计算打破所有现代浏览器</a></li>
<li><a href="../zh-CN431660/index.html">使用ECS的游戏功能：向射手添加急救箱</a></li>
<li><a href="../zh-CN431664/index.html">天线相位中心（FCA）及其在Ansys HFSS中的搜索</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>