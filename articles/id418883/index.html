<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèΩ‚Äçüé® üïµüèº üßïüèΩ GitLab di NAS üôèüèæ üë©üèº‚Äçüíª üë©üèº‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Jika Anda memiliki NAS yang berfungsi dengan buruh pelabuhan , menginstal Gitlab tidak terlalu sulit. 


 Artikel ini hanyalah contoh yang bagus dalam...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>GitLab di NAS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418883/"><p><img src="https://habrastorage.org/webt/lc/ds/go/lcdsgoqvkupc9ywr3m-83iqu-sy.jpeg"></p><br><p>  Jika Anda memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NAS yang berfungsi dengan buruh pelabuhan</a> , menginstal Gitlab tidak terlalu sulit. </p><a name="habracut"></a><br><p>  Artikel ini hanyalah contoh yang bagus dalam siklus pro NAS.  Dan itu menunjukkan betapa mudahnya memanipulasi layanan pada platform yang sudah selesai, bahkan dibangun secara mandiri, tanpa tim pengembangan, OS yang dirancang khusus dan toko aplikasi. </p><br><h2 id="pochemu-gitlab">  Kenapa gitlab? </h2><br><p>  Ada beberapa sistem untuk mengelola repositori Git. </p><br><div class="spoiler">  <b class="spoiler_title">Dari jumlah tersebut, cukup dewasa adalah ...</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bitbucket</a> adalah sistem berbayar dan tertutup, meskipun populer di sektor korporasi.  Ini mengasumsikan integrasi dengan produk Atlassian lain yang tidak saya gunakan.  Diimplementasikan di Jawa.  Bukan solusi yang sangat cocok, terutama mengingat kebijakan bahwa Anda harus membayar semuanya, bahkan untuk plugin (walaupun ada juga yang gratis). </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Gogs</a> adalah sistem yang mirip dengan Gitlab.  Diimplementasikan saat Go.  Ketika saya terakhir melihat kemampuannya, tidak ada kemungkinan peninjauan kode.  Ya, dan secara umum ia tertinggal fungsi Gitlab, karena  sistemnya jauh lebih baru: <br><ul><li>  Ringan </li><li>  Antarmukanya mirip dengan Github. </li><li>  Manajemen pengguna. </li><li>  Pelacak bug. </li><li>  Wiki </li><li>  <strong>Tidak ada review kode.</strong> </li><li>  Dukungan untuk kait git. </li><li>  Akses melalui HTTPS / SSH. </li><li>  Diimplementasikan saat Go. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ada garpu Gitea</a> . </li><li>  Ada plugin LDAP. </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Gitea</a> - garpu Gogs.  Memiliki apa yang hilang di Gogs: <br><ul><li>  Ulasan kode. </li><li>  Penyimpanan untuk file besar. </li><li>  Tag. </li><li>  Pencarian yang disempurnakan. </li><li>  Tugas kemajuan dengan kotak centang. </li><li>  LDAP juga didukung. </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kallithea</a> - fork dari RhodeCode. <br><ul><li>  Manajemen pengguna dan grup yang sangat canggih. </li><li>  Sinkronisasi dengan repositori jarak jauh. </li><li>  Pelacak bug. </li><li>  Wiki </li><li>  Ada ulasan kode. </li><li>  Dukungan untuk kait git. </li><li>  Akses melalui HTTPS / SSH. </li><li>  Diimplementasikan dengan Python. </li><li>  Terintegrasi dengan LDAP. </li><li>  Ada gambar Docker. </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Phacility</a> adalah sistem dari Facebook.  Fungsionalitasnya luas, tidak hanya ada ulasan, tetapi bahkan tugas dan sistem manajemen proyek.  Saya tidak mempertimbangkannya secara rinci. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Gerrit</a> - dirancang terutama untuk diskusi dan tinjauan kode, dengan beberapa fungsi untuk mengelola repositori. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sr.ht</a> - direkomendasikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dalam komentar</a> .  Ternyata, fungsinya cukup luas.  Namun sistem ini masih dalam pengembangan aktif. </li></ul></div></div><br><p>  Saya bekerja dengan Gitlab sebelum itu, di samping itu, ia memiliki fungsi CI bawaan, yang akan berguna di masa depan.  Sistem ini matang, ada banyak dokumentasi di dalamnya, dan selama bertahun-tahun pengembangan, Gitlab telah memperoleh banyak peluang.  Karena itu, saya memilihnya. </p><br><h2 id="obschie-nastroyki">  Pengaturan umum </h2><br><p> Saya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gambar Gitlab dari sameersbn</a> . <br>  Di <a href=""><code>docker-compose.yml</code></a> (file ini juga terdaftar di akhir artikel), Anda perlu mengubah variabel berikut: </p><br><ul><li>  <code>DB_PASS</code> - kata sandi untuk basis data Gitlab.  Harus cocok dengan kata sandi dalam wadah <code>postgresql</code> . </li><li>  <code>GITLAB_SECRETS_DB_KEY_BASE</code> , <code>GITLAB_SECRETS_SECRET_KEY_BASE</code> , <code>GITLAB_SECRETS_OTP_KEY_BASE</code> - nilai-nilai dasar untuk menghasilkan kunci. </li><li>  <code>GITLAB_ROOT_EMAIL</code> - email administrator. </li><li>  <code>GITLAB_ROOT_PASSWORD</code> - kata sandi administrator default, yang nantinya dapat diubah dari antarmuka Web. </li><li>  <code>GITLAB_EMAIL</code> , <code>GITLAB_EMAIL_REPLY_TO</code> , <code>GITLAB_INCOMING_EMAIL_ADDRESS</code> - alamat untuk peringatan email. </li><li>  <code>SMTP_HOST</code> , <code>SMTP_PORT</code> , <code>SMTP_USER</code> , <code>SMTP_PASS</code> - Pengaturan SMTP untuk peringatan email. </li><li>  <code>IMAP_HOST</code> , <code>IMAP_PORT</code> , <code>IMAP_USER</code> , <code>IMAP_PASS</code> - Gitlab tidak hanya dapat mengirim email, tetapi juga mengambil melalui IMAP.  Mungkin baginya untuk membuat permintaan melalui email. </li></ul><br><h2 id="nastroyka-ldap">  Penyiapan LDAP </h2><br><p>  Agar pengguna NAS dapat masuk ke Gitlab, mereka harus diberi server LDAP sebagai penyedia otorisasi. </p><br><p>  Perhatikan bahwa ketika LDAP dikonfigurasikan, akan ada dua tab saat memasuki Gitlab: LDAP dan Standar. </p><br><p>  Administrator akan dapat masuk hanya pada tab Standar, karena ia terdaftar secara lokal, dan pengguna hanya pada tab LDAP. </p><br><p>  Registrasi administrator lokal berguna jika koneksi dengan server LDAP terputus. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/c6/yp/ea/c6ypeavhmm3okm_fwgzrpofdzi0.png" alt="Login Gitlab"></a> </p><br><p>  Ini mudah dilakukan dengan mengatur variabel di file konfigurasi docker-compose: </p><br><ul><li>  <code>LDAP_ENABLED=true</code> - aktifkan otorisasi LDAP. </li><li>  <code>LDAP_HOST=172.21.0.1</code> - alamat server LDAP. </li><li>  <code>LDAP_PORT=389</code> - port. </li><li>  <code>LDAP_METHOD=plain</code> metode akses <code>LDAP_METHOD=plain</code> tanpa enkripsi, karena  Server LDAP di dalam jaringan host.  Dimungkinkan juga untuk menggunakan StartTLS. </li><li>  <code>LDAP_UID=uid</code> - bidang UID pengguna.  Dalam kasus OpenLDAP, konfigurasi yang dikonfigurasikan adalah <code>uid</code> . </li><li>  <code>LDAP_BIND_DN=cn=admin,dc=nas,dc=nas</code> - pengguna dan domain tempat Gitlab diotorisasi di server LDAP. </li><li>  <code>LDAP_PASS=&lt;LDAP_PASSWORD&gt;</code> - kata sandi untuk pengguna LDAP, di mana Gitlab diotorisasi di server LDAP. </li><li>  <code>LDAP_BLOCK_AUTO_CREATED_USERS=false</code> - pengguna LDAP akan muncul di Gitlab setelah login pertamanya.  Jika <code>true</code> disetel di sini, itu akan diblokir.  Administrator akan dapat membukanya. </li><li>  <code>LDAP_BASE=ou=users,dc=nas,dc=nas</code> adalah alamat dasar tempat akun pengguna berada. </li><li>  <code>LDAP_USER_FILTER=memberOf=cn=users_code,ou=groups,dc=nas,dc=nas</code> -filter.  Ini menunjukkan bahwa saya hanya ingin menerima anggota grup <code>users_code</code> . </li><li>  <code>LDAP_ALLOW_USERNAME_OR_EMAIL_LOGIN=true</code> - memungkinkan pengguna untuk masuk tidak hanya oleh UID, tetapi juga melalui email. </li></ul><br><p>  Perhatikan parameter <code>LDAP_USER_FILTER</code> .  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya</a> , grup pengguna diperkenalkan di LDAP, dan opsi ini hanya memungkinkan pengguna dalam grup users_code untuk <code>users_code</code> . </p><br><h2 id="gitlab-ci">  Gitlab ci </h2><br><p>  Mengkonfigurasi CI telah dijelaskan secara rinci dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi Gitlab</a> .  Tidak ada gunanya mengulangi. </p><br><p>  Singkatnya, semua yang perlu Anda lakukan: </p><br><ul><li>  Buka halaman build agent: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://git.NAS.cloudns.cc/admin/runners</a> dan salin: <br><ul><li>  Alamat ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://git.NAS.cloudns.cc/</a> ). </li><li>  Token. </li></ul></li><li>  Daftarkan agen.  Dia akan meminta alamat dan token selama proses pendaftaran. </li></ul><br><br><p>  Pendaftaran dilakukan dengan perintah berikut: </p><br><pre> <code class="plaintext hljs">docker-compose exec gitlab-runner /entrypoint register</code> </pre> <br><p>  Tentang agen apa yang ada di Gitlab, Anda dapat membaca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">di dokumentasi</a> . </p><br><p>  Saya tidak mengaktifkan Docker Registry, karena saya tidak membutuhkannya.  Baca tentang apa itu dan mengapa Anda membutuhkannya di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web Gitlab</a> . </p><br><p>  Di bawah spoiler adalah file konfigurasi untuk Gitlab, yang juga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tersedia di repositori</a> . </p><br><div class="spoiler">  <b class="spoiler_title">/tank0/docker/services/gitlab/docker-compose.yml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"># https://github.com/sameersbn/docker-gitlab version: '2' networks: gitlab: docker0: external: name: docker0 services: redis: restart: always image: sameersbn/redis:latest command: - --loglevel warning networks: - gitlab volumes: - /tank0/apps/gitlab/redis:/var/lib/redis:Z postgresql: restart: always image: sameersbn/postgresql:9.6-2 volumes: - /tank0/apps/gitlab/postgresql:/var/lib/postgresql:Z networks: - gitlab environment: - DB_USER=gitlab - DB_PASS=&lt;DB_PASSWORD&gt; - DB_NAME=gitlabhq_production - DB_EXTENSION=pg_trgm # plantuml: # restart: always # image: plantuml/plantuml-server # image: plantuml/plantuml-server:jetty # ports: # - "127.0.0.1:9542:8080" # ports: # - "plantuml:8080:8080" # expose: # - 8080 # networks: # - gitlab gitlab: restart: always image: sameersbn/gitlab:10.6.3 depends_on: - redis - postgresql ports: - "11022:22" expose: - 443 - 80 - 22 volumes: - /tank0/apps/repos:/home/git/data/repositories:Z - /tank0/apps/repos/system/backup:/home/git/data/backups:Z - /tank0/apps/repos/system/builds:/home/git/data/builds:Z - /tank0/apps/repos/system/lfs-objects:/home/git/data/shared/lfs-objects:Z - /tank0/apps/repos/system/public:/uploads/-/system:Z - /tank0/apps/gitlab/logs:/var/log/gitlab - /tank0/apps/gitlab/gitlab:/home/git/data:Z networks: - gitlab - docker0 environment: - "VIRTUAL_HOST=git.*,gitlab.*" - VIRTUAL_PORT=443 - VIRTUAL_PROTO=https - CERT_NAME=NAS.cloudns.cc - DEBUG=false # Default: 1 - NGINX_WORKERS=2 # Default: 3 - UNICORN_WORKERS=3 # Default: 25 - SIDEKIQ_CONCURRENCY=10 - DB_ADAPTER=postgresql - DB_HOST=postgresql - DB_PORT=5432 - DB_USER=gitlab - DB_PASS=&lt;DB_PASS&gt; - DB_NAME=gitlabhq_production - REDIS_HOST=redis - REDIS_PORT=6379 - TZ=Europe/Moscow - GITLAB_TIMEZONE=Moscow - GITLAB_HTTPS=true - SSL_SELF_SIGNED=true #- SSL_VERIFY_CLIENT=true - NGINX_HSTS_MAXAGE=2592000 - GITLAB_HOST=git.NAS.cloudns.cc #- GITLAB_PORT=11443 - GITLAB_SSH_PORT=11022 - GITLAB_RELATIVE_URL_ROOT= - GITLAB_SECRETS_DB_KEY_BASE=&lt;DB_KEY_BASE&gt; - GITLAB_SECRETS_SECRET_KEY_BASE=&lt;SC_KEY_BASE&gt; - GITLAB_SECRETS_OTP_KEY_BASE=&lt;OTP_KEY_BASE&gt; - GITLAB_SIGNUP_ENABLED=false # Defaults to 5iveL!fe. - GITLAB_ROOT_PASSWORD= - GITLAB_ROOT_EMAIL=root@gmail.com - GITLAB_NOTIFY_ON_BROKEN_BUILDS=true - GITLAB_NOTIFY_PUSHER=false - GITLAB_EMAIL=GITLAB@yandex.ru - GITLAB_EMAIL_REPLY_TO=noreply@yandex.ru - GITLAB_INCOMING_EMAIL_ADDRESS=GITLAB@yandex.ru - GITLAB_BACKUP_SCHEDULE=daily - GITLAB_BACKUP_TIME=01:00 - GITLAB_MATTERMOST_ENABLED=true - GITLAB_MATTERMOST_URL="" - SMTP_ENABLED=true - SMTP_DOMAIN=www.example.com - SMTP_HOST=smtp.yandex.ru - SMTP_PORT=25 - SMTP_USER=GITLAB@yandex.ru - SMTP_PASS=&lt;SMTP_PASSWORD&gt; - SMTP_STARTTLS=true - SMTP_AUTHENTICATION=login - IMAP_ENABLED=true - IMAP_HOST=imap.yandex.ru - IMAP_PORT=993 - IMAP_USER=GITLAB@yandex.ru - IMAP_PASS=&lt;IMAP_PASSWORD&gt; - IMAP_SSL=true - IMAP_STARTTLS=false - OAUTH_ENABLED=false - OAUTH_AUTO_SIGN_IN_WITH_PROVIDER= - OAUTH_ALLOW_SSO= - OAUTH_BLOCK_AUTO_CREATED_USERS=true - OAUTH_AUTO_LINK_LDAP_USER=false - OAUTH_AUTO_LINK_SAML_USER=false - OAUTH_EXTERNAL_PROVIDERS= - OAUTH_CAS3_LABEL=cas3 - OAUTH_CAS3_SERVER= - OAUTH_CAS3_DISABLE_SSL_VERIFICATION=false - OAUTH_CAS3_LOGIN_URL=/cas/login - OAUTH_CAS3_VALIDATE_URL=/cas/p3/serviceValidate - OAUTH_CAS3_LOGOUT_URL=/cas/logout - OAUTH_GOOGLE_API_KEY= - OAUTH_GOOGLE_APP_SECRET= - OAUTH_GOOGLE_RESTRICT_DOMAIN= - OAUTH_FACEBOOK_API_KEY= - OAUTH_FACEBOOK_APP_SECRET= - OAUTH_TWITTER_API_KEY= - OAUTH_TWITTER_APP_SECRET= - OAUTH_GITHUB_API_KEY= - OAUTH_GITHUB_APP_SECRET= - OAUTH_GITHUB_URL= - OAUTH_GITHUB_VERIFY_SSL= - OAUTH_GITLAB_API_KEY= - OAUTH_GITLAB_APP_SECRET= - OAUTH_BITBUCKET_API_KEY= - OAUTH_BITBUCKET_APP_SECRET= - OAUTH_SAML_ASSERTION_CONSUMER_SERVICE_URL= - OAUTH_SAML_IDP_CERT_FINGERPRINT= - OAUTH_SAML_IDP_SSO_TARGET_URL= - OAUTH_SAML_ISSUER= - OAUTH_SAML_LABEL="Our SAML Provider" - OAUTH_SAML_NAME_IDENTIFIER_FORMAT=urn:oasis:names:tc:SAML:2.0:nameid-format:transient - OAUTH_SAML_GROUPS_ATTRIBUTE= - OAUTH_SAML_EXTERNAL_GROUPS= - OAUTH_SAML_ATTRIBUTE_STATEMENTS_EMAIL= - OAUTH_SAML_ATTRIBUTE_STATEMENTS_NAME= - OAUTH_SAML_ATTRIBUTE_STATEMENTS_FIRST_NAME= - OAUTH_SAML_ATTRIBUTE_STATEMENTS_LAST_NAME= - OAUTH_CROWD_SERVER_URL= - OAUTH_CROWD_APP_NAME= - OAUTH_CROWD_APP_PASSWORD= - OAUTH_AUTH0_CLIENT_ID= - OAUTH_AUTH0_CLIENT_SECRET= - OAUTH_AUTH0_DOMAIN= - OAUTH_AZURE_API_KEY= - OAUTH_AZURE_API_SECRET= - OAUTH_AZURE_TENANT_ID= - LDAP_ENABLED=true #- LDAP_LABEL=nas - LDAP_HOST=172.21.0.1 - LDAP_PORT=389 #- LDAP_METHOD=start_tls - LDAP_METHOD=plain - LDAP_UID=uid - LDAP_BIND_DN=cn=admin,dc=nas,dc=nas - LDAP_PASS=&lt;LDAP_PASSWORD&gt; #- LDAP_CA_FILE= # Default: false. #- LDAP_BLOCK_AUTO_CREATED_USERS=true - LDAP_BASE=ou=users,dc=nas,dc=nas - LDAP_ACTIVE_DIRECTORY=false #- LDAP_USER_FILTER=(givenName=) - LDAP_USER_FILTER=memberOf=cn=users_code,ou=groups,dc=nas,dc=nas - LDAP_ALLOW_USERNAME_OR_EMAIL_LOGIN=true gitlab-runner: container_name: gitlab-runner image: gitlab/gitlab-runner:latest networks: - gitlab volumes: - /tank0/apps/gitlab/gitlab-runner/data:/home/gitlab_ci_multi_runner/data - /tank0/apps/gitlab/gitlab-runner/config:/etc/gitlab-runner environment: - CI_SERVER_URL=https://gitlab.NAS.cloudns.cc restart: always # registry: # container_name: docker-registry # restart: always # image: registry:2.4.1 # volumes: # - /srv/gitlab/shared/registry:/registry # - /srv/certs:/certs # environment: # - REGISTRY_LOG_LEVEL=info # - REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY=/registry # - REGISTRY_AUTH_TOKEN_REALM=http://git.labs.lc:10080/jwt/auth # - REGISTRY_AUTH_TOKEN_SERVICE=container_registry # - REGISTRY_AUTH_TOKEN_ISSUER=gitlab-issuer # - REGISTRY_AUTH_TOKEN_ROOTCERTBUNDLE=/certs/registry-auth.crt # - REGISTRY_STORAGE_DELETE_ENABLED=true # - REGISTRY_HTTP_TLS_CERTIFICATE=/certs/registry.crt # - REGISTRY_HTTP_TLS_KEY=/certs/registry.key # ports: # - "0.0.0.0:5000:5000" # networks: # mynet: # aliases: # - registry.git.labs.lc #</code> </pre> </div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id418883/">https://habr.com/ru/post/id418883/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id418871/index.html">Kegel Elvie Smart Trainer untuk Memperkuat Otot Intim - Mengapa Anda Membutuhkannya</a></li>
<li><a href="../id418873/index.html">Hampir rumit. Bagian 3, kami terus membuat "rumah pintar" nirkabel. Berdasarkan pada teknologi Z-Wave dan perangkat lunak MajorDoMo</a></li>
<li><a href="../id418875/index.html">HP membayar hingga $ 10.000 untuk bug di printer, peretas diberi akses jarak jauh</a></li>
<li><a href="../id418877/index.html">Peran layanan dukungan dalam pengembangan game dan interaksinya dengan departemen lain</a></li>
<li><a href="../id418879/index.html">Metode pengujian pertukaran crypto dan dompet crypto</a></li>
<li><a href="../id418885/index.html">Crispr dapat mempercepat proses alami dan mengubah cara makanan ditanam</a></li>
<li><a href="../id418887/index.html">Seberapa cepat alam semesta mengembang?</a></li>
<li><a href="../id418889/index.html">Panduan Pengujian Aplikasi Manual: Manfaat, Langkah, dan Metodologi</a></li>
<li><a href="../id418891/index.html">Kami memeriksa kode sumber Android menggunakan PVS-Studio, atau tidak ada yang sempurna</a></li>
<li><a href="../id418897/index.html">CRDT: Jenis Data Replikasi yang bebas konflik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>