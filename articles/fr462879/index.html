<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎚️ 🧑🏾‍🤝‍🧑🏼 👴🏻 Slurm DevOps: de Git à SRE avec tous les arrêts ✊🏼 👇🏿 ⤵️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Du 4 au 6 septembre, à Saint-Pétersbourg, dans la salle de conférence Selectel, un DevOps Slurm de trois jours aura lieu. 





 Nous avons construit ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Slurm DevOps: de Git à SRE avec tous les arrêts</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/462879/"><p>  Du 4 au 6 septembre, à Saint-Pétersbourg, dans la salle de conférence Selectel, un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DevOps Slurm de</a> trois jours aura lieu. </p><br><p><img src="https://habrastorage.org/webt/ms/gc/ei/msgcei-qr0axhrbkyegsc1nvc0m.jpeg"></p><br><p>  Nous avons construit le programme sur la base de l'idée que tout le monde peut lire les travaux théoriques sur DevOps, comme les manuels des outils, indépendamment.  Seules l'expérience et la pratique sont intéressantes: une explication sur la façon de le faire est nécessaire et non nécessaire, et une histoire sur la façon dont nous le faisons. </p><br><p>  Chaque entreprise, chaque administrateur ou développeur a son propre niveau DevOps.  Certains abusent de Git, d'autres mettent en œuvre SRE.  Le cours est organisé de telle sorte que chacun trouve quelque chose de pertinent qui peut être mis en œuvre ici et maintenant. </p><br><p>  Nous commençons par Git, puis examinons le développement d'applications, l'interaction du code et de l'infrastructure, construisons CI / CD, décrivons l'infrastructure comme du code (IaC), testons la solution résultante, configurons la surveillance, collectons et étudions les journaux, et enfin arrivons à SRE: tournez la fiabilité dans une histoire mesurable et gérable. </p><a name="habracut"></a><br><h2 id="git">  Git </h2><br><p>  Maintenant, Geet n'est pas utilisé uniquement par celui qui a acheté le premier ordinateur portable hier.  Il s'agit d'un outil trivial et omniprésent, et néanmoins, nous rencontrons souvent son utilisation abusive: de la poussée forcée vers le maître, et se terminant par la copie de fichiers de Gita vers le serveur via Ctrl-C, Ctrl-V. </p><br><p>  Nous vous disons comment faire ce n'est pas nécessaire, comment le faire, comment le faire à Southbridge. <br>  On passe la pratique: les bases de la Gita, le travail d'équipe. </p><br><p>  <strong>Sujet n ° 1: Git Basics</strong> </p><br><ul><li>  Commandes de base git init, commit, add, diff, log, status, pull, push </li><li>  Git flow, branches et tags, stratégies de fusion </li><li>  Travailler avec plusieurs repo à distance </li></ul><br><p>  <strong>Sujet n ° 2: Travail d'équipe avec Git</strong> </p><br><ul><li>  Flux Github </li><li>  Fourche, télécommande, traction </li><li>  Conflits, sorties, encore une fois sur Gitflow et autres flux en relation avec les équipes </li></ul><br><p>  Le matériel est organisé de manière à ce que les administrateurs et les développeurs puissent immédiatement mettre en œuvre toutes les pratiques du travail. </p><br><p>  Du point de vue de DevOps, un bon travail avec Git organise et automatise les processus de développement et d'administration, élimine un certain nombre de problèmes récurrents et améliore la productivité du travail. </p><br><h2 id="devops-razrabotchika">  Développeur DevOps </h2><br><p>  Nous regardons DevOps à travers les yeux du développeur: nous lançons l'environnement local, écrivons une application, configurons sa surveillance et sa journalisation, le testons localement, organisons le stockage des variables / secrets et la découverte de service, et surveillons le traçage (opentracing). </p><br><p>  <strong>Thème №3: Travailler avec l'application d'un point de vue de développement</strong> </p><br><ul><li>  Configuration de votre environnement local: meilleures pratiques </li><li>  Nous écrivons un microservice en Python (y compris les tests) </li><li>  Utilisation de docker-compose en développement </li></ul><br><p>  <strong>Thème n ° 4: Interopérabilité du code et de l'infrastructure</strong> </p><br><ul><li>  Pratique de configuration </li></ul><br><p>  En conséquence, les développeurs verront comment le code doit envoyer des journaux, comment le tester, comment il sera débogué à l'avenir.  Les administrateurs comprendront les besoins des développeurs: quelles erreurs se produisent dans le code, comment organiser les tests pour les développeurs et comment tester le projet vous-même. </p><br><p>  À ce stade, la tâche principale de DevOps est résolue: la compréhension mutuelle et la collaboration entre les vierges et les ops sont construites.  Il s'agit d'une étape clé pour passer du déploiement des tâches à un engagement responsable. </p><br><p>  En conséquence, la vitesse et la qualité du travail augmentent. </p><br><h2 id="cicd">  CI / CD </h2><br><p>  L'automatisation moderne implique CI / CD.  Nous commencerons par regarder l'automatisation manuelle: makefiles, githukes, scripts.  Nous analyserons quand ces outils sont toujours pertinents et quand ils ne devraient pas être utilisés. </p><br><p>  Examinons ensuite les meilleures pratiques du CI moderne en utilisant l'exemple de Gitlab. </p><br><p>  <strong>Sujet n ° 5: CI / CD Introduction à l'automatisation</strong> </p><br><ul><li>  Introduction à l'automatisation </li><li>  Outils (bash, make, gradle) </li><li>  Utilisation de git-hooks pour automatiser les processus </li><li> Lignes d'assemblage de convoyeurs d'usine et leur application en informatique </li><li>  Un exemple de construction d'un pipeline «commun» </li><li>  Logiciel CI / CD moderne: Drone CI, BitBucket Pipelines, Travis, etc. </li></ul><br><p>  <strong>Sujet n ° 6: CI / CD: Travailler avec Gitlab</strong> </p><br><ul><li>  Gitlab CI - Général </li><li>  Gitlab Runner, leurs types et leur application </li><li>  Gitlab CI, fonctionnalités de personnalisation, meilleures pratiques </li><li>  Étapes Gitlab CI </li><li>  Variables CI Gitlab </li><li>  Assemblage, test, déploiement </li><li>  Restrictions de contrôle et d'exécution: uniquement, lorsque </li><li>  Travailler avec des artefacts </li><li>  Modèles à l'intérieur de .gitlab-ci.yml, réutilisant des actions sur différentes parties du pipeline </li><li>  Inclure - sections </li><li>  Gestion centralisée de gitlab-ci.yml (un fichier et push automatique vers d'autres référentiels) </li></ul><br><p>  Le travail conjoint des administrateurs et des développeurs passe à un nouveau niveau: l'administrateur écrit le modèle de CI et les développeurs le corrigent en construisant leur CI indépendamment de l'administrateur. </p><br><p>  La dépendance des développeurs vis-à-vis des administrateurs est réduite, la quantité de travail manuel est réduite, le problème de "la seule personne qui sait travailler avec le fichier de maquillage" est éliminé.  Les déploiements se produisent de manière fiable et rapide. </p><br><h2 id="iac">  IaC </h2><br><p>  Le sujet d'Infrastructure as Code sur l'exemple de Terraform le dira à l'administrateur du cloud Selectel Alexei Stepanenko.  Il montrera comment déployer et mettre à l'échelle des serveurs rapidement et automatiquement, comment emballer automatiquement des images, comment utiliser des modèles de configuration pour recevoir immédiatement des machines personnalisées. </p><br><p>  La personne qui a créé des milliers de solutions IaC vous dira comment bien faire et comment le faire. </p><br><p>  La solution Cloud Selectel Minimal Edit est adaptée aux clouds Google et Amazon. </p><br><p>  Un employé de Southbridge, Nikolai Mesropyan, utilisera Ansible comme exemple pour montrer comment déployer une application fonctionnelle sans interruption et tester ses fonctionnalités. </p><br><p>  Si vous gérez l'infrastructure à la main (configurez les serveurs, installez les bibliothèques, les packages selon les besoins), lorsque vous essayez de générer une copie de l'environnement, vous devrez vous souvenir et reproduire toutes vos actions.  Cette tâche prend facilement 3-5 jours.  Travailler avec l'infrastructure en tant que code garantit que vous disposez d'une description à jour de l'environnement qui peut être déployé en quelques minutes. </p><br><p>  Nikolay vous dira comment écrire des playbooks, quelles erreurs se produisent, pourquoi parfois les playbooks fonctionnent lentement ou pas comme prévu.  C'est l'expérience de nombreuses années d'utilisation d'IaC à Southbridge. </p><br><p>  <strong>Sujet n ° 7: Infrastructure en tant que code</strong> </p><br><ul><li>  IaC: une approche de l'infrastructure en tant que code </li><li>  Fournisseurs de cloud en tant que fournisseurs d'infrastructure </li><li>  Outils d'initialisation du système, assemblage d'images (packer) </li><li>  IaC sur l'exemple de Terraform </li><li>  Stockage de configuration, collaboration, automatisation des applications </li><li>  Entraînez-vous à créer des livres de jeu ansibles </li><li>  Idempotence, déclarativité </li><li>  IaC Ansible </li><li>  Base de données en tant que basculement Code / PostgreSQL </li></ul><br><p>  L'infrastructure devient déclarative et idempotente. <br>  L'administrateur apprend à gérer une infrastructure complexe: créer rapidement de nouveaux environnements, maintenir l'unité de tous les environnements, voir l'historique des changements, ce qui est critique lorsque plusieurs équipes travaillent sur un projet. <br>  Le développeur peut étudier l'infrastructure, déployer indépendamment son environnement. </p><br><p>  Bonus de section - création et configuration d'un cluster de bases de données PostgreSQL tolérant aux pannes.  Nous donnerons le playbook fini que nous utilisons à Southbridge, vous déploierez un cluster sur le stand de formation et vous pourrez utiliser cette solution dans votre entreprise. </p><br><h2 id="testirovanie-infrastruktury-i-monitoring">  Tests et surveillance des infrastructures </h2><br><p>  L'automatisation vous permet de déployer l'erreur immédiatement sur un millier de serveurs.  Chaque changement nécessite des tests.  D'un autre côté, le test manuel prend tellement de temps qu'il annule les avantages de l'automatisation. </p><br><p>  Nous montrerons en pratique comment écrire des tests de rôle.  En conséquence, vous pouvez écrire des tests pour votre entreprise.  Vous n'avez plus besoin de vous souvenir des réglages effectués, de les décrire dans des tests et de vérifier automatiquement que toutes les décisions et béquilles passées sont en place. </p><br><p>  Nous apprendrons ensuite à ajouter automatiquement tous les nouveaux serveurs à la surveillance.  Envisagez de surveiller séparément l'infrastructure et les applications.  Nous montrons de mauvaises et bonnes pratiques. </p><br><p>  <strong>Sujet n ° 8: tester l'infrastructure</strong> </p><br><ul><li>  Test et intégration continue avec Molecule et Gitlab CI </li><li>  Application vagabonde </li></ul><br><p>  <strong>Sujet n ° 9: Surveillance de l'infrastructure avec Prometheus</strong> </p><br><ul><li>  Pourquoi la surveillance est nécessaire </li><li>  Types de surveillance </li><li>  Notifications dans le système de surveillance </li><li>  Comment construire un système de surveillance sain </li><li>  Des avis lisibles par l'homme, pour tous </li><li>  Bilan de santé: que rechercher </li><li>  Automatisation basée sur les données de surveillance </li></ul><br><p>  Une mauvaise surveillance est le manque de surveillance.  Peu importe pour les entreprises que la page principale d'une boutique en ligne soit disponible si le mode de paiement donne une erreur. </p><br><p>  Les développeurs et les administrateurs sont également impliqués dans la configuration de la surveillance et du dépannage.  De plus, traditionnellement, les tâches de surveillance incombent aux administrateurs.  Notre cours montrera aux développeurs le rôle qu'ils jouent dans la création d'une surveillance efficace.  Les administrateurs recevront les meilleures pratiques de Southbridge.  En conséquence, le nombre de pertes causées par des plantages et des freins du site ou de l'application diminuera rapidement. </p><br><p>  Bonus de section: automatisation basée sur la surveillance.  Par exemple, la surveillance signale qu'une charge est arrivée sur le site et la mise à l'échelle des serveurs Web démarre automatiquement. </p><br><h2 id="logirovanie">  Journalisation </h2><br><p>  La principale erreur en travaillant avec les journaux est que les administrateurs et les développeurs les regardent directement sur les serveurs.  Si vous avez plus d'un serveur, c'est long.  Ce n'est pas laïque: le développeur entre sur le serveur où il ne devrait pas être. </p><br><p>  DevOps nécessite une collecte, un traitement et une analyse centralisés des journaux. </p><br><p>  <strong>Sujet n ° 10: Journalisation des applications avec ELK</strong> </p><br><ul><li>  Les principales applications et fonctionnalités d'Elastic (recherche, stockage, fonctionnalités de mise à l'échelle, flexibilité de configuration) </li><li>  Présentation de kibana (fonctionnalités principales, langage de requête, gestion de tableau de bord, cartographie) </li><li>  Aperçu des produits élastiques et de leur application </li><li>  Collecte de métriques dans APM (traçage d'application) </li><li>  Extras: Nouvelle revue de produit - SIEM </li></ul><br><p>  La mise en œuvre de cette approche fera des journaux un outil simple et compréhensible pour l'analyse, la configuration et l'ajustement des applications et de l'infrastructure. </p><br><h2 id="sre">  SRE </h2><br><p>  Et nous arrivons au sujet que Southbridge est en train de regarder et pour lequel d'autres orateurs veulent rester le dernier jour de Slurm.  Nous sommes ravis qu'Ivan Kruglov de Booking.com ait accepté de le lire. </p><br><p>  Un projet vit dans le monde réel, où la fiabilité n'est jamais absolue, et chaque solution coûte de l'argent. </p><br><p>  Qu'est-ce qu'un SLA pour un projet complexe?  Disons comment évaluer que le site est disponible, mais les images sont chargées avec un retard.  Quelles sont les métriques SLA, où les filmer, comment les filmer? </p><br><p>  Comment installer SLA?  Comment leur résister? </p><br><p>  <strong>Thème # 11: SRE</strong> <br>  Définition de SLA, SLO, Error Budget et autres termes effrayants du monde SRE <br>  SRE: S'entraîner à surveiller SLI et SLO <br>  SRE: erreur de pratique budgétaire <br>  SRE: Gestion des interruptions et de la charge opérationnelle (apigateway, service mesh, bracket brackets) <br>  Les entreprises veulent le SRE.  Au moins au niveau le plus simple: prendre un serveur de sauvegarde ou augmenter à partir de la sauvegarde?  Une base de données ou un cluster?  La protection DDoS est-elle proactive ou uniquement au moment de l'attaque? </p><br><p>  Les administrateurs ne sont pas satisfaits de l'histoire selon laquelle le «site fonctionne» lorsqu'un client l'appelle et informe que le bon de commande ne s'ouvre pas. </p><br><p>  Par conséquent, il est important pour un ingénieur DevOps de comprendre au moins superficiellement le SRE afin de parler adéquatement avec l'entreprise de ses besoins. </p><br><h2 id="itog">  Résumé </h2><br><p>  Pendant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Slurm DevOps, les</a> administrateurs et les développeurs apprendront: <br>  - fonctionner correctement avec Git; <br>  - organiser le développement local; <br>  - configurer (administrateurs) et utiliser (développeurs) CI / CD; <br>  - travailler avec l'infrastructure comme un code; <br>  - tester l'infrastructure; <br>  - surveiller l'infrastructure et l'application; <br>  - configurer la journalisation; <br>  - comprendre, et idéalement - utiliser SRE. </p><br><p>  Pour les lecteurs attentifs - avec le code promo habrapost, une remise de 15%. </p><br><p>  Pour tous les points, nous préparons des pratiques et des outils.  Ainsi, chaque participant à son retour de Slurm pourra amener son entreprise au niveau supérieur de DevOps. </p><br><p>  Pour les entreprises, cela signifie une administration et un développement moins chers, des temps d'arrêt réduits, une fiabilité accrue, une livraison plus rapide des fonctionnalités et l'élimination des bogues. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462879/">https://habr.com/ru/post/fr462879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462863/index.html">21 août a diffusé le Meetup Zabbix Moscou # 5</a></li>
<li><a href="../fr462867/index.html">Choisir un schéma de couleurs pour votre application: comment le rendre simple?</a></li>
<li><a href="../fr462869/index.html">Système de gestion de projet Agilean</a></li>
<li><a href="../fr462875/index.html">Comment réduire les coûts et fournir une assistance informatique optimale pour le modèle d'entreprise. Nous recherchons la «voie médiane du salut»</a></li>
<li><a href="../fr462877/index.html">Verrous dans PostgreSQL: 1. Verrous de relation</a></li>
<li><a href="../fr462881/index.html">Pourquoi est-il si difficile de choisir le film à regarder (et ce qui pourrait être fait)</a></li>
<li><a href="../fr462883/index.html">Conception d'une boutique en ligne pour le référencement: (théorie + liste de contrôle)</a></li>
<li><a href="../fr462885/index.html">Réseau IPoE tolérant aux pannes à portée de main</a></li>
<li><a href="../fr462887/index.html">L'expérience de la personnalisation d'une boutique en ligne à l'aide de l'exemple d'une recommandation dynamique</a></li>
<li><a href="../fr462889/index.html">Continuation Story: le propre compilateur de Pascal pour Windows à partir de zéro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>