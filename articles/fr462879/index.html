<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéöÔ∏è üßëüèæ‚Äçü§ù‚Äçüßëüèº üë¥üèª Slurm DevOps: de Git √† SRE avec tous les arr√™ts ‚úäüèº üëáüèø ‚§µÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Du 4 au 6 septembre, √† Saint-P√©tersbourg, dans la salle de conf√©rence Selectel, un DevOps Slurm de trois jours aura lieu. 





 Nous avons construit ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Slurm DevOps: de Git √† SRE avec tous les arr√™ts</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/462879/"><p>  Du 4 au 6 septembre, √† Saint-P√©tersbourg, dans la salle de conf√©rence Selectel, un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DevOps Slurm de</a> trois jours aura lieu. </p><br><p><img src="https://habrastorage.org/webt/ms/gc/ei/msgcei-qr0axhrbkyegsc1nvc0m.jpeg"></p><br><p>  Nous avons construit le programme sur la base de l'id√©e que tout le monde peut lire les travaux th√©oriques sur DevOps, comme les manuels des outils, ind√©pendamment.  Seules l'exp√©rience et la pratique sont int√©ressantes: une explication sur la fa√ßon de le faire est n√©cessaire et non n√©cessaire, et une histoire sur la fa√ßon dont nous le faisons. </p><br><p>  Chaque entreprise, chaque administrateur ou d√©veloppeur a son propre niveau DevOps.  Certains abusent de Git, d'autres mettent en ≈ìuvre SRE.  Le cours est organis√© de telle sorte que chacun trouve quelque chose de pertinent qui peut √™tre mis en ≈ìuvre ici et maintenant. </p><br><p>  Nous commen√ßons par Git, puis examinons le d√©veloppement d'applications, l'interaction du code et de l'infrastructure, construisons CI / CD, d√©crivons l'infrastructure comme du code (IaC), testons la solution r√©sultante, configurons la surveillance, collectons et √©tudions les journaux, et enfin arrivons √† SRE: tournez la fiabilit√© dans une histoire mesurable et g√©rable. </p><a name="habracut"></a><br><h2 id="git">  Git </h2><br><p>  Maintenant, Geet n'est pas utilis√© uniquement par celui qui a achet√© le premier ordinateur portable hier.  Il s'agit d'un outil trivial et omnipr√©sent, et n√©anmoins, nous rencontrons souvent son utilisation abusive: de la pouss√©e forc√©e vers le ma√Ætre, et se terminant par la copie de fichiers de Gita vers le serveur via Ctrl-C, Ctrl-V. </p><br><p>  Nous vous disons comment faire ce n'est pas n√©cessaire, comment le faire, comment le faire √† Southbridge. <br>  On passe la pratique: les bases de la Gita, le travail d'√©quipe. </p><br><p>  <strong>Sujet n ¬∞ 1: Git Basics</strong> </p><br><ul><li>  Commandes de base git init, commit, add, diff, log, status, pull, push </li><li>  Git flow, branches et tags, strat√©gies de fusion </li><li>  Travailler avec plusieurs repo √† distance </li></ul><br><p>  <strong>Sujet n ¬∞ 2: Travail d'√©quipe avec Git</strong> </p><br><ul><li>  Flux Github </li><li>  Fourche, t√©l√©commande, traction </li><li>  Conflits, sorties, encore une fois sur Gitflow et autres flux en relation avec les √©quipes </li></ul><br><p>  Le mat√©riel est organis√© de mani√®re √† ce que les administrateurs et les d√©veloppeurs puissent imm√©diatement mettre en ≈ìuvre toutes les pratiques du travail. </p><br><p>  Du point de vue de DevOps, un bon travail avec Git organise et automatise les processus de d√©veloppement et d'administration, √©limine un certain nombre de probl√®mes r√©currents et am√©liore la productivit√© du travail. </p><br><h2 id="devops-razrabotchika">  D√©veloppeur DevOps </h2><br><p>  Nous regardons DevOps √† travers les yeux du d√©veloppeur: nous lan√ßons l'environnement local, √©crivons une application, configurons sa surveillance et sa journalisation, le testons localement, organisons le stockage des variables / secrets et la d√©couverte de service, et surveillons le tra√ßage (opentracing). </p><br><p>  <strong>Th√®me ‚Ññ3: Travailler avec l'application d'un point de vue de d√©veloppement</strong> </p><br><ul><li>  Configuration de votre environnement local: meilleures pratiques </li><li>  Nous √©crivons un microservice en Python (y compris les tests) </li><li>  Utilisation de docker-compose en d√©veloppement </li></ul><br><p>  <strong>Th√®me n ¬∞ 4: Interop√©rabilit√© du code et de l'infrastructure</strong> </p><br><ul><li>  Pratique de configuration </li></ul><br><p>  En cons√©quence, les d√©veloppeurs verront comment le code doit envoyer des journaux, comment le tester, comment il sera d√©bogu√© √† l'avenir.  Les administrateurs comprendront les besoins des d√©veloppeurs: quelles erreurs se produisent dans le code, comment organiser les tests pour les d√©veloppeurs et comment tester le projet vous-m√™me. </p><br><p>  √Ä ce stade, la t√¢che principale de DevOps est r√©solue: la compr√©hension mutuelle et la collaboration entre les vierges et les ops sont construites.  Il s'agit d'une √©tape cl√© pour passer du d√©ploiement des t√¢ches √† un engagement responsable. </p><br><p>  En cons√©quence, la vitesse et la qualit√© du travail augmentent. </p><br><h2 id="cicd">  CI / CD </h2><br><p>  L'automatisation moderne implique CI / CD.  Nous commencerons par regarder l'automatisation manuelle: makefiles, githukes, scripts.  Nous analyserons quand ces outils sont toujours pertinents et quand ils ne devraient pas √™tre utilis√©s. </p><br><p>  Examinons ensuite les meilleures pratiques du CI moderne en utilisant l'exemple de Gitlab. </p><br><p>  <strong>Sujet n ¬∞ 5: CI / CD Introduction √† l'automatisation</strong> </p><br><ul><li>  Introduction √† l'automatisation </li><li>  Outils (bash, make, gradle) </li><li>  Utilisation de git-hooks pour automatiser les processus </li><li> Lignes d'assemblage de convoyeurs d'usine et leur application en informatique </li><li>  Un exemple de construction d'un pipeline ¬´commun¬ª </li><li>  Logiciel CI / CD moderne: Drone CI, BitBucket Pipelines, Travis, etc. </li></ul><br><p>  <strong>Sujet n ¬∞ 6: CI / CD: Travailler avec Gitlab</strong> </p><br><ul><li>  Gitlab CI - G√©n√©ral </li><li>  Gitlab Runner, leurs types et leur application </li><li>  Gitlab CI, fonctionnalit√©s de personnalisation, meilleures pratiques </li><li>  √âtapes Gitlab CI </li><li>  Variables CI Gitlab </li><li>  Assemblage, test, d√©ploiement </li><li>  Restrictions de contr√¥le et d'ex√©cution: uniquement, lorsque </li><li>  Travailler avec des artefacts </li><li>  Mod√®les √† l'int√©rieur de .gitlab-ci.yml, r√©utilisant des actions sur diff√©rentes parties du pipeline </li><li>  Inclure - sections </li><li>  Gestion centralis√©e de gitlab-ci.yml (un fichier et push automatique vers d'autres r√©f√©rentiels) </li></ul><br><p>  Le travail conjoint des administrateurs et des d√©veloppeurs passe √† un nouveau niveau: l'administrateur √©crit le mod√®le de CI et les d√©veloppeurs le corrigent en construisant leur CI ind√©pendamment de l'administrateur. </p><br><p>  La d√©pendance des d√©veloppeurs vis-√†-vis des administrateurs est r√©duite, la quantit√© de travail manuel est r√©duite, le probl√®me de "la seule personne qui sait travailler avec le fichier de maquillage" est √©limin√©.  Les d√©ploiements se produisent de mani√®re fiable et rapide. </p><br><h2 id="iac">  IaC </h2><br><p>  Le sujet d'Infrastructure as Code sur l'exemple de Terraform le dira √† l'administrateur du cloud Selectel Alexei Stepanenko.  Il montrera comment d√©ployer et mettre √† l'√©chelle des serveurs rapidement et automatiquement, comment emballer automatiquement des images, comment utiliser des mod√®les de configuration pour recevoir imm√©diatement des machines personnalis√©es. </p><br><p>  La personne qui a cr√©√© des milliers de solutions IaC vous dira comment bien faire et comment le faire. </p><br><p>  La solution Cloud Selectel Minimal Edit est adapt√©e aux clouds Google et Amazon. </p><br><p>  Un employ√© de Southbridge, Nikolai Mesropyan, utilisera Ansible comme exemple pour montrer comment d√©ployer une application fonctionnelle sans interruption et tester ses fonctionnalit√©s. </p><br><p>  Si vous g√©rez l'infrastructure √† la main (configurez les serveurs, installez les biblioth√®ques, les packages selon les besoins), lorsque vous essayez de g√©n√©rer une copie de l'environnement, vous devrez vous souvenir et reproduire toutes vos actions.  Cette t√¢che prend facilement 3-5 jours.  Travailler avec l'infrastructure en tant que code garantit que vous disposez d'une description √† jour de l'environnement qui peut √™tre d√©ploy√© en quelques minutes. </p><br><p>  Nikolay vous dira comment √©crire des playbooks, quelles erreurs se produisent, pourquoi parfois les playbooks fonctionnent lentement ou pas comme pr√©vu.  C'est l'exp√©rience de nombreuses ann√©es d'utilisation d'IaC √† Southbridge. </p><br><p>  <strong>Sujet n ¬∞ 7: Infrastructure en tant que code</strong> </p><br><ul><li>  IaC: une approche de l'infrastructure en tant que code </li><li>  Fournisseurs de cloud en tant que fournisseurs d'infrastructure </li><li>  Outils d'initialisation du syst√®me, assemblage d'images (packer) </li><li>  IaC sur l'exemple de Terraform </li><li>  Stockage de configuration, collaboration, automatisation des applications </li><li>  Entra√Ænez-vous √† cr√©er des livres de jeu ansibles </li><li>  Idempotence, d√©clarativit√© </li><li>  IaC Ansible </li><li>  Base de donn√©es en tant que basculement Code / PostgreSQL </li></ul><br><p>  L'infrastructure devient d√©clarative et idempotente. <br>  L'administrateur apprend √† g√©rer une infrastructure complexe: cr√©er rapidement de nouveaux environnements, maintenir l'unit√© de tous les environnements, voir l'historique des changements, ce qui est critique lorsque plusieurs √©quipes travaillent sur un projet. <br>  Le d√©veloppeur peut √©tudier l'infrastructure, d√©ployer ind√©pendamment son environnement. </p><br><p>  Bonus de section - cr√©ation et configuration d'un cluster de bases de donn√©es PostgreSQL tol√©rant aux pannes.  Nous donnerons le playbook fini que nous utilisons √† Southbridge, vous d√©ploierez un cluster sur le stand de formation et vous pourrez utiliser cette solution dans votre entreprise. </p><br><h2 id="testirovanie-infrastruktury-i-monitoring">  Tests et surveillance des infrastructures </h2><br><p>  L'automatisation vous permet de d√©ployer l'erreur imm√©diatement sur un millier de serveurs.  Chaque changement n√©cessite des tests.  D'un autre c√¥t√©, le test manuel prend tellement de temps qu'il annule les avantages de l'automatisation. </p><br><p>  Nous montrerons en pratique comment √©crire des tests de r√¥le.  En cons√©quence, vous pouvez √©crire des tests pour votre entreprise.  Vous n'avez plus besoin de vous souvenir des r√©glages effectu√©s, de les d√©crire dans des tests et de v√©rifier automatiquement que toutes les d√©cisions et b√©quilles pass√©es sont en place. </p><br><p>  Nous apprendrons ensuite √† ajouter automatiquement tous les nouveaux serveurs √† la surveillance.  Envisagez de surveiller s√©par√©ment l'infrastructure et les applications.  Nous montrons de mauvaises et bonnes pratiques. </p><br><p>  <strong>Sujet n ¬∞ 8: tester l'infrastructure</strong> </p><br><ul><li>  Test et int√©gration continue avec Molecule et Gitlab CI </li><li>  Application vagabonde </li></ul><br><p>  <strong>Sujet n ¬∞ 9: Surveillance de l'infrastructure avec Prometheus</strong> </p><br><ul><li>  Pourquoi la surveillance est n√©cessaire </li><li>  Types de surveillance </li><li>  Notifications dans le syst√®me de surveillance </li><li>  Comment construire un syst√®me de surveillance sain </li><li>  Des avis lisibles par l'homme, pour tous </li><li>  Bilan de sant√©: que rechercher </li><li>  Automatisation bas√©e sur les donn√©es de surveillance </li></ul><br><p>  Une mauvaise surveillance est le manque de surveillance.  Peu importe pour les entreprises que la page principale d'une boutique en ligne soit disponible si le mode de paiement donne une erreur. </p><br><p>  Les d√©veloppeurs et les administrateurs sont √©galement impliqu√©s dans la configuration de la surveillance et du d√©pannage.  De plus, traditionnellement, les t√¢ches de surveillance incombent aux administrateurs.  Notre cours montrera aux d√©veloppeurs le r√¥le qu'ils jouent dans la cr√©ation d'une surveillance efficace.  Les administrateurs recevront les meilleures pratiques de Southbridge.  En cons√©quence, le nombre de pertes caus√©es par des plantages et des freins du site ou de l'application diminuera rapidement. </p><br><p>  Bonus de section: automatisation bas√©e sur la surveillance.  Par exemple, la surveillance signale qu'une charge est arriv√©e sur le site et la mise √† l'√©chelle des serveurs Web d√©marre automatiquement. </p><br><h2 id="logirovanie">  Journalisation </h2><br><p>  La principale erreur en travaillant avec les journaux est que les administrateurs et les d√©veloppeurs les regardent directement sur les serveurs.  Si vous avez plus d'un serveur, c'est long.  Ce n'est pas la√Øque: le d√©veloppeur entre sur le serveur o√π il ne devrait pas √™tre. </p><br><p>  DevOps n√©cessite une collecte, un traitement et une analyse centralis√©s des journaux. </p><br><p>  <strong>Sujet n ¬∞ 10: Journalisation des applications avec ELK</strong> </p><br><ul><li>  Les principales applications et fonctionnalit√©s d'Elastic (recherche, stockage, fonctionnalit√©s de mise √† l'√©chelle, flexibilit√© de configuration) </li><li>  Pr√©sentation de kibana (fonctionnalit√©s principales, langage de requ√™te, gestion de tableau de bord, cartographie) </li><li>  Aper√ßu des produits √©lastiques et de leur application </li><li>  Collecte de m√©triques dans APM (tra√ßage d'application) </li><li>  Extras: Nouvelle revue de produit - SIEM </li></ul><br><p>  La mise en ≈ìuvre de cette approche fera des journaux un outil simple et compr√©hensible pour l'analyse, la configuration et l'ajustement des applications et de l'infrastructure. </p><br><h2 id="sre">  SRE </h2><br><p>  Et nous arrivons au sujet que Southbridge est en train de regarder et pour lequel d'autres orateurs veulent rester le dernier jour de Slurm.  Nous sommes ravis qu'Ivan Kruglov de Booking.com ait accept√© de le lire. </p><br><p>  Un projet vit dans le monde r√©el, o√π la fiabilit√© n'est jamais absolue, et chaque solution co√ªte de l'argent. </p><br><p>  Qu'est-ce qu'un SLA pour un projet complexe?  Disons comment √©valuer que le site est disponible, mais les images sont charg√©es avec un retard.  Quelles sont les m√©triques SLA, o√π les filmer, comment les filmer? </p><br><p>  Comment installer SLA?  Comment leur r√©sister? </p><br><p>  <strong>Th√®me # 11: SRE</strong> <br>  D√©finition de SLA, SLO, Error Budget et autres termes effrayants du monde SRE <br>  SRE: S'entra√Æner √† surveiller SLI et SLO <br>  SRE: erreur de pratique budg√©taire <br>  SRE: Gestion des interruptions et de la charge op√©rationnelle (apigateway, service mesh, bracket brackets) <br>  Les entreprises veulent le SRE.  Au moins au niveau le plus simple: prendre un serveur de sauvegarde ou augmenter √† partir de la sauvegarde?  Une base de donn√©es ou un cluster?  La protection DDoS est-elle proactive ou uniquement au moment de l'attaque? </p><br><p>  Les administrateurs ne sont pas satisfaits de l'histoire selon laquelle le ¬´site fonctionne¬ª lorsqu'un client l'appelle et informe que le bon de commande ne s'ouvre pas. </p><br><p>  Par cons√©quent, il est important pour un ing√©nieur DevOps de comprendre au moins superficiellement le SRE afin de parler ad√©quatement avec l'entreprise de ses besoins. </p><br><h2 id="itog">  R√©sum√© </h2><br><p>  Pendant <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Slurm DevOps, les</a> administrateurs et les d√©veloppeurs apprendront: <br>  - fonctionner correctement avec Git; <br>  - organiser le d√©veloppement local; <br>  - configurer (administrateurs) et utiliser (d√©veloppeurs) CI / CD; <br>  - travailler avec l'infrastructure comme un code; <br>  - tester l'infrastructure; <br>  - surveiller l'infrastructure et l'application; <br>  - configurer la journalisation; <br>  - comprendre, et id√©alement - utiliser SRE. </p><br><p>  Pour les lecteurs attentifs - avec le code promo habrapost, une remise de 15%. </p><br><p>  Pour tous les points, nous pr√©parons des pratiques et des outils.  Ainsi, chaque participant √† son retour de Slurm pourra amener son entreprise au niveau sup√©rieur de DevOps. </p><br><p>  Pour les entreprises, cela signifie une administration et un d√©veloppement moins chers, des temps d'arr√™t r√©duits, une fiabilit√© accrue, une livraison plus rapide des fonctionnalit√©s et l'√©limination des bogues. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462879/">https://habr.com/ru/post/fr462879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462863/index.html">21 ao√ªt a diffus√© le Meetup Zabbix Moscou # 5</a></li>
<li><a href="../fr462867/index.html">Choisir un sch√©ma de couleurs pour votre application: comment le rendre simple?</a></li>
<li><a href="../fr462869/index.html">Syst√®me de gestion de projet Agilean</a></li>
<li><a href="../fr462875/index.html">Comment r√©duire les co√ªts et fournir une assistance informatique optimale pour le mod√®le d'entreprise. Nous recherchons la ¬´voie m√©diane du salut¬ª</a></li>
<li><a href="../fr462877/index.html">Verrous dans PostgreSQL: 1. Verrous de relation</a></li>
<li><a href="../fr462881/index.html">Pourquoi est-il si difficile de choisir le film √† regarder (et ce qui pourrait √™tre fait)</a></li>
<li><a href="../fr462883/index.html">Conception d'une boutique en ligne pour le r√©f√©rencement: (th√©orie + liste de contr√¥le)</a></li>
<li><a href="../fr462885/index.html">R√©seau IPoE tol√©rant aux pannes √† port√©e de main</a></li>
<li><a href="../fr462887/index.html">L'exp√©rience de la personnalisation d'une boutique en ligne √† l'aide de l'exemple d'une recommandation dynamique</a></li>
<li><a href="../fr462889/index.html">Continuation Story: le propre compilateur de Pascal pour Windows √† partir de z√©ro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>