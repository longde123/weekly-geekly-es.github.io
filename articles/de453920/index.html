<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖐🏿 🏥 👃🏿 So übernehmen Sie die Kontrolle über Ihre Netzwerkinfrastruktur. Kapitel vier Automatisierung Vorlagen 🏡 🧑🏿‍🤝‍🧑🏽 👫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel ist der sechste in einer Reihe von Artikeln mit dem Titel „So nehmen Sie die Netzwerkinfrastruktur unter Ihre Kontrolle“. Den Inhalt al...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So übernehmen Sie die Kontrolle über Ihre Netzwerkinfrastruktur. Kapitel vier Automatisierung Vorlagen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453920/">  <i>Dieser Artikel ist der sechste in einer Reihe von Artikeln mit dem Titel „So nehmen Sie die Netzwerkinfrastruktur unter Ihre Kontrolle“.</i>  <i>Den Inhalt aller Artikel der Reihe und Links finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a></i> . <br><br>  Nachdem ich einige Themen hinter mir gelassen hatte, beschloss ich, ein neues Kapitel zu beginnen. <br><br>  Ich werde etwas später wieder in Sicherheit sein.  Hier möchte ich einen einfachen, aber effektiven Ansatz diskutieren, der in der einen oder anderen Form sicher für viele nützlich sein kann.  Es ist eher eine kurze Geschichte darüber, wie Automatisierung das Leben eines Ingenieurs verändern kann.  Es wird um die Verwendung von Temlaten gehen.  Am Ende finden Sie eine Liste meiner Projekte, in der Sie sehen können, wie alles hier beschriebene funktioniert. <br><br><h2>  DevOps für das Web </h2><br>  Erstellen einer Konfiguration mit einem Skript, Verwenden von GIT zur Steuerung von Änderungen in der IT-Infrastruktur, Remote "Fill" - diese Ideen stehen an erster Stelle, wenn Sie über die technische Implementierung des DevOps-Ansatzes nachdenken.  Die Pluspunkte liegen auf der Hand.  Aber es gibt leider auch Nachteile. <br><br>  Als vor mehr als 5 Jahren unsere Entwickler zu uns kamen, zu Netzwerkern, waren wir mit diesen Angeboten nicht begeistert. <br><a name="habracut"></a><br>  Ich muss sagen, dass wir ein ziemlich buntes Netzwerk geerbt haben, das aus der Ausrüstung von ungefähr 10 verschiedenen Anbietern besteht.  Etwas war bequem über unsere Lieblings-CLI zu konfigurieren, aber irgendwo haben wir es vorgezogen, die GUI zu verwenden.  Darüber hinaus wurde der Echtzeitsteuerung lange Arbeit an "Live" -Ausrüstungen beigebracht.  Wenn ich zum Beispiel Änderungen vornehme, fühle ich mich viel wohler, wenn ich direkt über cli arbeite.  So kann ich schnell erkennen, dass etwas schief gelaufen ist, und die Änderungen rückgängig machen.  All dies stand im Widerspruch zu ihren Vorstellungen. <br><br>  Andere Fragen stellen sich beispielsweise von Version zu Softwareversion. Die Benutzeroberfläche kann geringfügig variieren.  Dies führt letztendlich dazu, dass Ihr Skript die falsche "Konfiguration" erstellt.  Ich würde die Produktion nicht für einen Einbruch nutzen wollen. <br><br>  Oder wie kann man verstehen, dass die Konfigurationsbefehle korrekt angewendet wurden und was im Fehlerfall zu tun ist? <br><br>  Ich möchte nicht sagen, dass all diese Probleme unlösbar sind.  Wenn Sie nur "A" sagen, ist es wahrscheinlich ratsam, "B" zu sagen. Wenn Sie dieselben Prozesse für die Änderungskontrolle wie in der Entwicklung verwenden möchten, müssen Sie neben der Produktion auch Entwicklungs- und Staging-Umgebungen haben.  Dann scheint dieser Ansatz vollständig zu sein.  Aber wie viel kostet es? <br><br>  Aber es gibt eine Situation, in der die Nachteile fast ausgeglichen sind und nur die Vorteile übrig bleiben.  Ich spreche von Designarbeit. <br><br><h2>  Projekt </h2><br>  In den letzten zwei Jahren habe ich an einem Projekt zum Aufbau eines Rechenzentrums für einen großen Anbieter teilgenommen.  Ich bin für den F5 und Palo Alto in diesem Projekt verantwortlich.  Aus Sicht von Cisco handelt es sich um die "Geräte von Drittanbietern". <br><br>  Für mich persönlich gibt es zwei verschiedene Phasen in diesem Projekt. <br><br><h3>  Erste Stufe </h3><br>  Im ersten Jahr, in dem ich unendlich beschäftigt war, arbeitete ich nachts und am Wochenende.  Ich konnte meinen Kopf nicht heben.  Der Druck des Managements und des Kunden war stark und kontinuierlich.  In einer ständigen Routine konnte ich nicht einmal versuchen, den Prozess zu optimieren.  Es ging nicht nur und weniger um die Konfiguration der Ausrüstung als vielmehr um die Erstellung der Konstruktionsdokumentation. <br><br>  Also begannen die ersten Tests und ich würde erstaunt sein, wie viele kleinere Fehler und Ungenauigkeiten gemacht wurden.  Natürlich hat alles funktioniert, aber der Buchstabe im Namen fehlte, die Zeile im Team fehlte hier ... Die Tests wurden fortgesetzt und fortgesetzt, und ich war bereits in einem ständigen täglichen Kampf mit Fehlern, Tests und Dokumentation. <br><br>  Das dauerte ein Jahr.  Das Projekt war meines Wissens nicht für alle einfach, aber nach und nach wurde der Kunde immer zufriedener, und dies ermöglichte es, zusätzliche Ingenieure einzustellen, die in der Lage waren, einen Teil der Routine zu übernehmen. <br><br>  Jetzt konnte man sich ein wenig umsehen. <br>  Und das war der Beginn der zweiten Stufe. <br><br><h3>  Zweite Stufe </h3><br>  Ich habe beschlossen, den Prozess zu automatisieren. <br><br>  Was ich aus der damaligen Kommunikation mit den Entwicklern verstanden habe (und wir müssen Tribut zollen, wir hatten ein starkes Team), ist, dass das Textformat, obwohl es auf den ersten Blick etwas aus der Welt des DOS-Betriebssystems zu sein scheint, eine Reihe wertvoller Eigenschaften hat . <br>  Ein Textformat ist beispielsweise hilfreich, wenn Sie GIT und alle seine Derivate optimal nutzen möchten.  Ich wollte. <br><br>  Nun, es scheint, dass Sie nur eine Konfiguration oder eine Liste von Befehlen speichern können, aber Änderungen vorzunehmen ist ziemlich unpraktisch.  Darüber hinaus gibt es beim Entwerfen eine weitere wichtige Aufgabe.  Sie müssen über eine Dokumentation verfügen, die Ihr Gesamtdesign (Low Level Design) und Ihre spezifische Implementierung (Netzwerkimplementierungsplan) beschreibt.  In diesem Fall scheint die Verwendung von Vorlagen eine sehr geeignete Option zu sein. <br><br>  Wenn Sie also YAML und Jinja2 verwenden, erfüllt eine YAML-Datei mit Konfigurationsparametern wie IP-Adressen, BGP-AS-Nummern ... die Rolle von NIP perfekt, während Jinja2-Vorlagen eine dem Design entsprechende Syntax enthalten, das heißt, sie spiegelt tatsächlich LLD wider. <br><br>  Es dauerte zwei Tage, um die Sprachen YAML und Jinja2 zu lernen.  Ein paar gute Beispiele reichen aus, um zu verstehen, wie dies funktioniert.  Dann dauerte es ungefähr zwei Wochen, um alle Vorlagen zu erstellen, die zu unserem Design passen: eine Woche für Palo Alto und eine weitere Woche für F5.  All dies wurde auf Corporate Githab veröffentlicht. <br><br>  Nun war der Änderungsprozess wie folgt: <br><br><ul><li>  yaml Datei geändert </li><li>  hat eine Konfigurationsdatei mit einer Vorlage erstellt (Jinja2) </li><li>  in einem Remote-Repository gespeichert </li><li>  hat die erstellte Konfiguration auf das Gerät hochgeladen </li><li>  sah einen Fehler </li><li>  geänderte YAML-Datei oder Jinja2-Vorlage </li><li>  hat eine Konfigurationsdatei mit einer Vorlage erstellt (Jinja2) </li><li>  ... </li></ul><br>  Es ist klar, dass zunächst viel Zeit für die Bearbeitung aufgewendet wurde, aber nach ein oder zwei Wochen war dies bereits eine Seltenheit. <br><br>  Ein guter Test und die Möglichkeit, alles zu debuggen, war der Wunsch des Kunden, die Namenskonvention zu ändern.  Wer mit F5 gearbeitet hat, versteht die Pikantheit der Situation.  Aber für mich war es ziemlich einfach.  Ich habe die Namen in der YAML-Datei geändert, die gesamte Konfiguration vom Gerät gelöscht, eine neue generiert und hochgeladen.  Alles, unter Berücksichtigung von Fehlerkorrekturen, dauerte 4 Tage: zwei Tage für jede Technologie.  Danach war ich bereit für den nächsten Schritt, nämlich die Erstellung von DEV- und Staging-Rechenzentren. <br><br><h3>  Entwicklung und Inszenierung </h3><br>  Die Inszenierung wiederholt die Produktion tatsächlich vollständig.  Dev ist eine stark reduzierte Kopie, die hauptsächlich auf virtueller Hardware basiert.  Ideale Situation für einen neuen Ansatz.  Wenn ich die Zeit, die ich verbracht habe, vom allgemeinen Prozess isoliere, hat die Arbeit, glaube ich, nicht länger als 2 Wochen gedauert.  Die Hauptzeit ist die Wartezeit der anderen Seite und eine gemeinsame Suche nach Problemen.  Die Implementierung des Dritten war für andere nahezu unsichtbar.  Es war sogar Zeit, etwas zu unterrichten und ein paar Artikel über Habré zu schreiben :) <br><br><h2>  Zusammenfassend </h2><br>  Was habe ich also unter dem Strich? <br><br><ul><li>  Zum Ändern der Konfiguration muss ich lediglich eine einfache, klar strukturierte YAML-Datei mit Konfigurationsparametern ändern.  Ich ändere nie das Python-Skript und sehr selten (nur wenn es einen Fehler gibt) ändere ich Jinja2 </li><li>  Aus dokumentarischer Sicht ergibt sich eine nahezu ideale Situation.  Sie ändern die Dokumentation (YAML-Dateien fungieren als NIP) und laden diese Konfiguration auf das Gerät hoch.  Somit ist Ihre Dokumentation immer auf dem neuesten Stand. </li></ul><br>  All dies führte dazu, dass <br><br><ul><li>  Der Prozentsatz der Fehler verringerte sich auf fast 0 </li><li>  Es dauerte 90 Prozent der Routine </li><li>  Die Implementierungsgeschwindigkeit hat erheblich zugenommen </li></ul><br><h2>  ZAHLEN, F5Y, ACY </h2><br>  Ich sagte, ein paar Beispiele reichen aus, um zu verstehen, wie das funktioniert. <br>  Hier ist eine kurze (und natürlich modifizierte) Version dessen, was im Verlauf meiner Arbeit erstellt wurde. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PAY</a> = Einsatz <b>P</b> alo <b>A</b> lto von <b>Y</b> aml = Palo Alto von Yaml <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">F5Y</a> = Bereitstellung <b>F5</b> von <b>Y</b> aml = <b>F5</b> von <b>Y</b> aml (in Kürze) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ACY</a> = Bereitstellung <b>AC</b> i von <b>Y</b> aml = <b>F5</b> von <b>Y</b> aml <br><br>  Ich werde ein paar Worte über ACY hinzufügen (nicht zu verwechseln mit ACI). <br><br>  Diejenigen, die mit ACI gearbeitet haben, wissen, dass dieses Wunder (und auf gute Weise auch) nicht von Netzwerkern geschaffen wurde :).  Vergessen Sie alles, was Sie über das Netzwerk wussten - es wird Ihnen nicht nützlich sein! <br>  Es ist etwas übertrieben, vermittelt aber ungefähr das Gefühl, das ich seit 3 ​​Jahren bei der Arbeit mit ACI ständig erlebe. <br><br>  In diesem Fall bietet ACY nicht nur die Möglichkeit, einen Änderungskontrollprozess zu erstellen (was besonders bei ACI wichtig ist, da davon ausgegangen wird, dass dies der zentrale und kritischste Teil Ihres Rechenzentrums ist), sondern bietet Ihnen auch eine benutzerfreundliche Oberfläche zum Erstellen einer Konfiguration. <br><br>  Die Ingenieure in diesem Projekt verwenden Excel, um ACI anstelle von YAML für genau denselben Zweck zu verwenden.  Die Verwendung von Excel bietet natürlich einige Vorteile: <br><br><ul><li>  Ihr Nip in einer Datei </li><li>  schöne Zeichen, die der Kunde gerne sieht </li><li>  Sie können einige Excel-Tools verwenden </li></ul><br>  Aber es gibt einen Nachteil, und meiner Meinung nach überwiegt er die Profis.  Das Kontrollieren von Änderungen und das Koordinieren der Teamarbeit wird viel schwieriger. <br><br>  ACY wendet tatsächlich dieselben Ansätze an, die ich für die Konfiguration von ACI durch Dritte verwendet habe. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de453920/">https://habr.com/ru/post/de453920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de453904/index.html">Befreien Sie sich von "vk.com/away.php" oder folgen Sie den Links einer gesunden Person</a></li>
<li><a href="../de453906/index.html">Was ist ein "Domain-Modell"?</a></li>
<li><a href="../de453908/index.html">RTOS Neutrino in Industriecomputern</a></li>
<li><a href="../de453914/index.html">Installationsanweisungen für den TON Test Client</a></li>
<li><a href="../de453916/index.html">So schützen Sie sich vor mobilen Betrügern</a></li>
<li><a href="../de453926/index.html">Wie Carsharing-Service funktioniert und funktioniert</a></li>
<li><a href="../de453930/index.html">Vergleich und Auswahl von Datenmigrationssystemen</a></li>
<li><a href="../de453932/index.html">Ein paar Worte zur Verteidigung des Monolithen</a></li>
<li><a href="../de453934/index.html">11 Fragen, die vor Arbeitsbeginn zu besprechen sind</a></li>
<li><a href="../de453938/index.html">NB-IoT Stolen Bike Tracking</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>