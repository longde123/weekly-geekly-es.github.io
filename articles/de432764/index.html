<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💩 👵🏽 👨🏿‍🎨 UDB. Was ist das 👐🏻 👩‍👩‍👧‍👧 🤷🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In den Kommentaren zu meinem Artikel über die Steuerung von RGB-LEDs mit dem UDB-Mikrocontroller-Block PSoC von Cypress wurde vorgeschlagen, am Anfang...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UDB. Was ist das</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432764/"><img src="https://habrastorage.org/webt/-g/uu/1k/-guu1klnqoqlqkjqj0jhxdp87o0.jpeg"><br><br>  In den Kommentaren zu meinem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel über die Steuerung von RGB-LEDs mit dem UDB-Mikrocontroller-Block PSoC von Cypress</a> wurde vorgeschlagen, am Anfang des Artikels kurz zu erläutern, was UDB ist.  Wie ich bereits in diesem Artikel erwähnt habe, kann ich nicht kurz über UDB schreiben, aber Sie können einfach die Unternehmensdokumentation darauf übertragen, um den inländischen Leser mit einem so leistungsstarken Tool zur Implementierung von Firmware-Funktionen vertraut zu machen. <br><a name="habracut"></a><br><br>  Aber zuerst schauen wir uns an, worum es bei PSoC geht.  PSoC ist eine Cypress-Familie von Chipsätzen zur Implementierung von On-Chip-Systemen.  Verschiedene Familien haben einen unterschiedlichen Prozessorkern (für PSoC 3 ist es MCS-51, für PSoC 4 ist es Cortex M0, für PSoC 5LP ist es Cortex M3 und für PSoC 6 sind es zwei gleichzeitig: Cortex M0 + und Cortex M4) und einen Satz programmierbarer Logik.  Darüber hinaus ist diese Logik nicht rein digital, es gibt dort analoge Dinge.  Neben verschiedenen ADCs gibt es auch analoge Schalter.  Sie können die Beine sogar programmgesteuert über analoge Schaltkreise verbinden. Der Widerstand des Schaltkreises wird jedoch in Kilogramm gemessen.  In PSoC gibt es Operationsverstärker, die programmgesteuert geschaltet werden können. Dies bedeutet, dass Sie verschiedene analoge Blöcke darauf aufbauen können. <br><br>  PSoCs können übrigens mit jeder Spannung von 2,7 bis 5,5 Volt betrieben werden.  Das heißt, Sie müssen weder mit Batteriestrom noch mit USB-Strom an Stabilisatoren denken. <br><br>  Aber ich habe über analoge Dinge nur für ein rotes Wort geschrieben.  Jetzt konzentrieren wir uns auf digitale Dinge.  Die meisten modernen Steuerungen verfügen über leistungsstarke Peripheriegeräte, die eine Vielzahl von Funktionen bieten.  In der Praxis werden diese Blöcke jedoch in jeder spezifischen Softwareentwicklung nicht vollständig, sondern nur teilweise verwendet.  Und in PSoC wird anstelle einer Menge guter Programmlogik implementiert, ähnlich der Logik klassischer FPGAs.  Dementsprechend ist es möglich, genau die Blöcke zu implementieren, die darauf benötigt werden, indem sie in die erforderlichen Modi aufgenommen werden.  Und Ressourcen sollten nicht für nicht verwendete Modi ausgegeben werden, sondern für die Implementierung eigener Dinge. <br><br>  Und hier kommt es oft zu Missverständnissen.  Viele Entwickler sind daran gewöhnt, dass es zwei Arten von programmierbaren integrierten Logikschaltungen (FPGAs) gibt: CPLD und FPGA.  Daher glauben viele, die von PSoC gehört haben, dass es eine Art CPLD-Box gibt, die in Veriolg programmiert werden kann.  In der Tat ja und nein.  Eine bestimmte Anzahl von PLDs (ohne "C", nur PLDs) sind wirklich vorhanden, und Sie können sie wirklich auf Verilog programmieren.  Aber wirklich, diese PLDs sind Teil von UDB-Blöcken.  Und es ist UDB, die das Hauptelement der in PSoC implementierten programmierbaren Logik ist.  Dieser Block ist äußerst originell und bietet dem Entwickler einfach die breitesten Möglichkeiten.  Betrachten Sie die Abbildung aus der proprietären Dokumentation, in der das Wesentliche der Verwendung von UDB-Blöcken erläutert wird. <br><br><img src="https://habrastorage.org/webt/ge/96/v7/ge96v7q6f8qwol5v38hqy1qfook.png"><br><br>  Da ich alles am Beispiel der PSoC 5LP-Familie studiert habe, werde ich die Dokumentation darauf übersetzen.  Bevor Sie beginnen, möchte ich noch einige Worte zum Preis dieser Controller sagen.  Wenn Sie zu Ali Express gehen und nach dem Steckbrett suchen, bekommen Sie ein trauriges Gefühl.  Ehrlich gesagt sind sie im Vergleich zu STM32-DISCOVERY immer noch nichts, aber im Vergleich zu den Prototypen STM32F103C8T6 sind sie etwas teuer.  Dies ist vor allem darauf zurückzuführen, dass Unternehmensmodelle immer nicht einen, sondern zwei solcher Controller haben.  JTAG-Funktionen sind auf dem PSoC 5LP implementiert, auch wenn der Zielcontroller und PSoC 4 (letzterer hat normalerweise keinen USB-Anschluss). <br><br>  Wenn wir den Preis durch zwei teilen, stellen wir immer noch fest, dass er höher ist als der des STM32F103, der im Prozessorkern ähnlich ist.  Wenn wir jedoch von außen dem einfachsten STM32 selbst die einfachste CPLD hinzufügen, wird der Gesamtpreis zugunsten von PSoC ausfallen.  Und wir werden die verlorenen Beine zur Verbindung dieser beiden Fälle hinzufügen (PSoC hat alle Verbindungen im Inneren).  Und auch der Preis von Quadratzentimetern der Platte.  Es stellt sich also heraus, dass PSoC wirklich nicht erforderlich ist, wenn Sie nur mit dem Prozessorkern arbeiten müssen.  Wenn Sie einige Funktionen auf Firmware- oder Hardwareebene bringen möchten, benötigen Sie PSoC.  Darauf wird das System billiger und einfacher herauskommen. <br><br>  Tatsächlich habe ich eine manische Idee, Hardware-Unterstützung für den Kernel unseres RTOS MAX bereitzustellen.  Zu diesem Zweck habe ich die Methodik für die Entwicklung von Bare-Metal-Anwendungen für Altera V SoC untersucht (leider stellte sich heraus, dass die Architekturfunktion dort so ist, dass das Betriebssystem verlangsamt werden kann, aber nicht beschleunigt werden kann - einzelne Anforderungen an die Hardware sind mit einer verrückten Latenz verbunden).  Dafür begann ich PSoC zu beherrschen.  Ich habe das Übertakten des Kernels nicht erreicht (es gibt nur allgemeine Gedanken), aber die Idee der UDB-Programmierung hat mir sehr gut gefallen.  Natürlich bin ich jetzt daran interessiert, diese Idee auf die maximale Anzahl inländischer Programmierer zu übertragen.  Daher fahren wir mit der Übersetzung des entsprechenden Teils der Cypress-eigenen Dokumentation zu UDB fort.  Die Nummerierung der Kapitel und Abbildungen erfolgt gemäß Originaldokument. <br><br>  Der allgemeine Inhalt des Zyklus „UDB.  Was ist das? " <br>  Teil 1. Einführung.  Pld.  (Aktueller Artikel) <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 2. Datenpfad.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 3. Datenpfad-FIFO.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 4. Datenpfad ALU.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 5. Datenpfad.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Nützliche Kleinigkeiten.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 6. Management- und Statusmodul.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 7. Steuermodul für Timing und Reset</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Teil 8. Adressierung von UDB</a> <br><br><h1>  UDB.  Was ist das  Teil 1 </h1><br><h2>  21. Universelle digitale Blöcke </h2><br>  In diesem Kapitel werden wir untersuchen, wie Universal Digital Blocks (UDBs) die Entwicklung programmierbarer digitaler Peripheriefunktionen ermöglichen.  Die UDB-Architektur schafft ein Gleichgewicht zwischen Granularität der Konfiguration und effizienter Implementierung.  UDBs bestehen aus einer Kombination von nicht kommutierter Logik ähnlich einer programmierbaren Logikmatrix (PLM, englische PLD), strukturierter Logik (Betriebsmaschinen, im Folgenden als Datenpfad bezeichnet) und einem flexiblen Verfolgungsschema. <br><br><h3>  21.1 Funktionen </h3><br><ul><li>  Für eine optimale Flexibilität enthält jede UDB die folgenden Komponenten: <br>  • 8-Bit-Datenpfad basierend auf ALU (Arithmetic and Logic Unit, ALU) mit 8-Befehls-Befehls-Repository, mehreren Registern und FIFO-Puffern; <br>  • zwei PLDs mit jeweils 12 Eingängen, acht konjunktiven Begriffen (Product Terms, PT) und vier Makrozellenausgängen; <br>  • Verwaltungs- und Statusregister; <br>  • Module takten und zurücksetzen. </li><li>  PSoC 5LP enthält ein Array mit einer Größe von bis zu 24 UDB. </li><li>  Flexible Ablaufverfolgung zwischen UDB-Array-Elementen. </li><li>  UDB-Elemente können geteilt oder verkettet werden, um größere Funktionen zu erstellen. </li><li>  Flexible Implementierung einer Reihe digitaler Funktionen, einschließlich Timer, Zähler, Impulsbreitenmodulatoren (einschließlich PWM mit Totbandgenerator), UART, I2C-Bus, SPI-Bus und CRC-Verifizierung / -Erzeugung. </li></ul><br><h3>  21.2 Blockschaltbild </h3><br>  Abbildung 21-1 zeigt die UDB als Konstrukt, das zwei grundlegende logische Blöcke enthält: PLD, Datenpfad sowie die Steuerungs-, Status-, Takt- und Rücksetzfunktionen. <br><br><img src="https://habrastorage.org/webt/fo/zu/co/fozucosb4fhjohp6uuhbi1-onzq.png"><br>  <i>Abbildung 21-1.</i>  <i>Blockschaltbild der UDB.</i> <br><br><h3>  21.3 Wie es funktioniert </h3><br>  Die Hauptkomponenten von UDB sind: <br><br><ul><li>  PLD (2).  Daten von Trace-Ressourcen werden den Eingängen dieser Blöcke zugeführt.  Sie implementieren kombinatorische Logik und Datenfang, mit denen Sie Finite-State-Maschinen implementieren, die Operationen des Datenpfadblocks steuern, Eingabebedingungen konfigurieren und Ausgänge steuern können. </li><li>  Datenpfad.  Dieser Block enthält eine dynamisch programmierbare ALU, vier Register, zwei FIFO-Puffer, Komparatoren und eine Bedingungserzeugung. </li><li>  Management und Status (Status und Kontrolle).  Diese Module bieten einen Mechanismus für die Interaktion der Mikroprogramme des Zentralprozessors (CPU) und die Synchronisation mit UDB-Operationen.  Steuerregister wirken auf interne Elemente und Statusregister lesen den Status externer Elemente. </li><li>  Clock and Reset Control  Diese Module bieten eine Auswahl und Aktivierung des Timings sowie eine Auswahl zum Zurücksetzen innerhalb der UDB. </li><li>  Verkettungssignale.  PLD und Datapath verfügen über Signale, mit denen Sie benachbarte Blöcke in einer Kette verketten können, um Funktionen mit höheren Bits zu erstellen. </li><li>  Kanal verfolgen  UDBs sind über programmierbare Schaltmatrizen mit dem Trace-Kanal verbunden, um zwischen Blöcken innerhalb derselben UDB zu kommunizieren und mit anderen UDBs im Array zu kommunizieren. </li><li>  Systembusschnittstelle (Systembusschnittstelle).  Alle Register und RAMs in jeder UDB werden auf den Systemadressraum projiziert, und der Zugriff auf sie kann über den Zentralprozessor oder über direkten Speicherzugriff (English Direct Memory Access, DMA) in Form von 8-Bit und 16-Bit erfolgen Daten. </li></ul><br><h4>  21.3.1.  Pld </h4><br>  Jede UDB verfügt über zwei 12C4-PLDs.  Mit den in Abbildung 21-1 gezeigten PLD-Blöcken können Zustandsmaschinen implementiert, E / A-Daten verarbeitet und Tabellenlogik erstellt werden (Eng. Lookup Table, LUT).  Darüber hinaus kann PLD so konfiguriert werden, dass arithmetische Funktionen ausgeführt, die Datenpfadsequenz festgelegt und der Status generiert werden.  Allgemeine Logik kann synthetisiert und auf PLD-Blöcke projiziert werden.  Dieser Abschnitt bietet einen Überblick über die PLD-Architektur. <br><br>  PLD verfügt über 12 Eingänge, die Informationen in 8 Konjunktivtermen in einem UND-Array übertragen.  In jedem Konjunktivterm können Sie eine direkte (true, T) oder inverse (Komplement, C) Eingabe wählen.  Die Ausgabe von Konjunktivtermen geht an die Eingabe des ODER-Arrays.  Der Buchstabe 'C' in 12C4 zeigt an, dass die ODER-Terme für alle Eingaben konstant sind und jeder ODER-Eingang programmgesteuerten Zugriff auf jeden konjunktiven Term erhalten kann.  Diese Struktur bietet maximale Flexibilität und stellt sicher, dass alle Ein- und Ausgänge verschoben werden können. <br><br><img src="https://habrastorage.org/webt/j8/f9/c7/j8f9c7wdwgm9s5gedhb7swc8i08.png"><br>  <i>Abbildung 21-2.</i>  <i>Die Struktur von PLD 12C4.</i> <br><br><h4>  21.3.1.1 Makro-PLD </h4><br>  Die Architektur der Makrozellen ist in Abbildung 21-3 dargestellt.  Die Ausgabe steuert das Trace-Array und kann zwischengespeichert oder Raman sein.  Zum Verriegeln wird ein D-Trigger mit direktem oder inversem Eingang oder ein T-Trigger mit hohem oder niedrigem Eingangspegel verwendet.  Der Ausgangstrigger kann während der Initialisierung oder asynchron während des normalen Betriebs durch ein externes Signal vom Trace-Kanal gesetzt oder zurückgesetzt werden. <br><br><img src="https://habrastorage.org/webt/fo/rg/1w/forg1w4bmsa7n4mjt27c5mucwss.png"><br>  <i>Abbildung 21-3.</i>  <i>Macrocell-Architektur.</i> <br><br>  <b>Schreibgeschütztes PLD-Makrozellenregister</b> <br>  Zusätzlich zur Steuerung des Trace-Arrays werden die Makrozellenausgänge beider PLDs in Form eines schreibgeschützten 8-Bit-Registers auf den Adressraum projiziert, auf das über die CPU oder DMA zugegriffen werden kann. <br><br><img src="https://habrastorage.org/webt/a5/oc/zc/a5oczcwt1zvvzivxmrgbcc_opju.png"><br>  <i>Abbildung 21-4.</i>  <i>Das schreibgeschützte PLD-Makrozellenregister.</i> <br><br><h4>  21.3.1.2 Silbentrennungskette PLD </h4><br>  PLDs werden in der UDB-Adressierung miteinander verknüpft.  Wie in Abbildung 21-5 gezeigt, wird der Eingang der Selin-Übertragskette von der vorherigen UDB über jede Makrozelle in beiden PLDs an die Schaltung weitergeleitet und dann als Ausgang der Selout-Übertragskette an die nächste UDB weitergeleitet.  Um die effiziente Platzierung von arithmetischen Funktionen zu unterstützen, werden spezielle Konjunktivterme (PT) generiert, die in Makrozellen zusammen mit einer Silbentrennungskette verwendet werden. <br><br><img src="https://habrastorage.org/webt/ms/fi/ai/msfiaihduu5-28whmd5iethri9y.png"><br>  <i>Abbildung 21-5.</i>  <i>PLD-Silbentrennungskette und spezielle konjunktive Termeingaben.</i> <br><br><h4>  21.3.1.3 PLD-Konfiguration </h4><br>  Jede PLD erscheint vor der CPU oder dem DMA in Form eines RAM mit 16-Bit-Zugriff.  Das UND-Array hat 12 × 8 × 2 Bits oder 24 Bytes zum Programmieren, und das ODER-Array hat 4 × 8 Bits oder 4 Bytes zum Programmieren.  Zusätzlich hat jede Makrozelle ein Konfigurationsbyte, insgesamt 32 Konfigurationsbytes pro PLD.  Da jede UDB 2 PLDs hat, beträgt die Gesamtkonfiguration jeder UDB 64 Bytes. <br><br>  Das nächste Mal werden wir Operational Automata (Datenpfade) betrachten. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de432764/">https://habr.com/ru/post/de432764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de432752/index.html">Ameisenhügel oder Festung? Ich baue ein Haus zum Preis einer Wohnung. 3 Teil. Stromversorgung</a></li>
<li><a href="../de432754/index.html">Datenspeicherung In-Memory und On-Disk werden der Öffentlichkeit zugänglich gemacht</a></li>
<li><a href="../de432756/index.html">Wir implementieren Barrierefreiheitsunterstützung, ohne die visuelle Komponente der mobilen Anwendung zu ändern</a></li>
<li><a href="../de432760/index.html">Vektorproduktansichten oder eine andere Verwendung des Word2Vec-Modells</a></li>
<li><a href="../de432762/index.html">Ein KI-Lügendetektor kann erkennen, wann eine Person liegt</a></li>
<li><a href="../de432766/index.html">So codieren Sie eine geheime Nachricht in einen Fingerabdruck</a></li>
<li><a href="../de432768/index.html">Drahtlose Kopfhörer für "Serienmarathons": In Dolby werden sie für 599 US-Dollar angeboten</a></li>
<li><a href="../de432770/index.html">Botnets und ihre Typen: Was ist 2018 bekannt?</a></li>
<li><a href="../de432772/index.html">Wie wir einen Werbekampagnen-Service erstellt haben, der der DSGVO entspricht</a></li>
<li><a href="../de432774/index.html">Frontend DevDay. Berichtsaufzeichnung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>