<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“ƒ ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿ ğŸ© æ¯å‘¨æ—¶é—´è¡¨ç¼–è¾‘å™¨ ğŸ‘¨ğŸ¼â€ğŸ­ âŒ¨ï¸ ğŸ•¶ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æˆ‘å†™è¿™å°ä¿¡æ˜¯å› ä¸ºæˆ‘ä¸€å¹´ä¸­ç¬¬ä¸‰æ¬¡é‡åˆ°è¿™é¡¹ä»»åŠ¡ã€‚ æ¯æ¬¡ï¼Œå®ƒéƒ½å§‹äºä¸€ä¸ªä»¤äººæƒŠå¥‡çš„åˆ›æ„è§£å†³æ–¹æ¡ˆï¼Œå˜å¾—æ›´å®¹æ˜“ï¼Œæœ€åæ˜¯æˆ‘å°†è¦è®¨è®ºçš„ç³»ç»Ÿã€‚ 

 ç›®æ ‡æ˜¯åˆ›å»ºå’Œç»´æŠ¤æ¯å‘¨æ—¶é—´è¡¨ï¼Œä¾‹å¦‚å­¦æ ¡è¯¾ç¨‹æ—¶é—´è¡¨æˆ–åŒ»ç”Ÿå’Œå®˜å‘˜æ—¶é—´è¡¨ã€‚ æœ‰ä¸€ç»„æ’æ§½ï¼Œæ¯ä¸ªæ’æ§½æ˜¯æ¯å‘¨è®¡åˆ’ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œå¸¦æœ‰å„ç§å…¶ä»–å‚æ•°ï¼Œä¾‹å¦‚æœºæŸœå·ï¼Œå‘˜å·¥å§“åã€‚ éœ€è¦æ„å»ºä¸€ä¸ªå…·...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æ¯å‘¨æ—¶é—´è¡¨ç¼–è¾‘å™¨</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412665/">æˆ‘å†™è¿™å°ä¿¡æ˜¯å› ä¸ºæˆ‘ä¸€å¹´ä¸­ç¬¬ä¸‰æ¬¡é‡åˆ°è¿™é¡¹ä»»åŠ¡ã€‚ æ¯æ¬¡ï¼Œå®ƒéƒ½å§‹äºä¸€ä¸ªä»¤äººæƒŠå¥‡çš„åˆ›æ„è§£å†³æ–¹æ¡ˆï¼Œå˜å¾—æ›´å®¹æ˜“ï¼Œæœ€åæ˜¯æˆ‘å°†è¦è®¨è®ºçš„ç³»ç»Ÿã€‚ <br><br> ç›®æ ‡æ˜¯åˆ›å»ºå’Œç»´æŠ¤æ¯å‘¨æ—¶é—´è¡¨ï¼Œä¾‹å¦‚å­¦æ ¡è¯¾ç¨‹æ—¶é—´è¡¨æˆ–åŒ»ç”Ÿå’Œå®˜å‘˜æ—¶é—´è¡¨ã€‚ æœ‰ä¸€ç»„æ’æ§½ï¼Œæ¯ä¸ªæ’æ§½æ˜¯æ¯å‘¨è®¡åˆ’ä¸­çš„ä¸€ä¸ªä½ç½®ï¼Œå¸¦æœ‰å„ç§å…¶ä»–å‚æ•°ï¼Œä¾‹å¦‚æœºæŸœå·ï¼Œå‘˜å·¥å§“åã€‚ éœ€è¦æ„å»ºä¸€ä¸ªå…·æœ‰å®Œæ•´å†å²è®°å½•çš„çµæ´»ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿå¯ä»¥è§£å†³ä»¥ä¸‹é—®é¢˜ï¼šä»æš‘å‡å¼€å§‹åˆ›å»ºä¸åŒçš„æ—¶é—´è¡¨ï¼Œåœ¨æ¥ä¸‹æ¥çš„ä¸‰å‘¨å†…æ›´æ¢è€å¸ˆï¼Œç”±äºå‡æœŸè€Œå°†æ—¶é—´è¡¨ä»æ˜ŸæœŸäº”ç§»è‡³æ˜ŸæœŸå…­ã€‚ <br><br> æˆ‘å°†å†™å‡ºä»–ä»¬é€šå¸¸ä¼šé‡åˆ°çš„é—®é¢˜ä»¥åŠå¦‚ä½•è§£å†³çš„é—®é¢˜ï¼Œæˆ‘å°†è§£å†³ç»˜åˆ¶æ¡å¸¦çš„é—®é¢˜ï¼Œç„¶åæˆ‘å°†åœ¨node / sequelizeä¸Šç»™å‡ºä¸€ä¸ªç®€å•åç«¯çš„ç¤ºä¾‹ï¼Œå¹¶åœ¨vue / vuex / vuetify / nuxtä¸Šç»™å‡ºä¸€ä¸ªç®€å•çš„å‰ç«¯ï¼Œåœ¨è¿™é‡Œæ‚¨å¯ä»¥ç”¨é¼ æ ‡å°†å…¶å…¨éƒ¨æ‹–åŠ¨å¹¶æŸ¥çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ <br><br> è¿™äº›ä»£ç å‘å¸ƒåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">githubä¸Š</a> ï¼Œå¹¶åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>éƒ¨ç½²ã€‚ <br><br><img src="https://habrastorage.org/webt/6d/kv/7m/6dkv7mn28thsjpj3zkb7zy8asey.png"><br><a name="habracut"></a><br><h2> é¢—ç²’çŠ¶å˜åŒ– </h2><br> æ•°æ®åº“ä¸­ä»¥æŸç§æ–¹å¼æä¾›äº†ä¸€ä¸ªæ’æ§½ã€‚ éœ€è¦ç¼–è¾‘ã€‚ å› æ­¤ï¼Œæ‚¨éœ€è¦ç»˜åˆ¶ä¸€äº›å¸¦æœ‰å­—æ®µçš„è¡¨æ ¼ï¼Œå¹¶åœ¨â€œä¿å­˜â€æŒ‰é’®ä¸‹æ–¹ã€‚ æ¯•ç«Ÿï¼Œé€šå¸¸æƒ…å†µéƒ½æ˜¯è¿™æ ·å®‰æ’çš„ã€‚ ä½†æ˜¯ï¼Œä¸æ˜¯è¿™ç§æƒ…å†µã€‚ è€ƒè™‘ä»¥ä¸‹å½¢å¼ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/py/bs/b9/pybsb9deiukwlb27ezwm0lhw84w.png"></div><br> ä¿å­˜æ—¶ï¼Œæ’æ§½çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šæ›´æ–°ï¼Œå†å²è®°å½•å°†ä¸¢å¤±ã€‚ è®©æˆ‘ä»¬å°è¯•æ·»åŠ è¿™æ ·çš„å…ƒç´ ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wf/cd/wq/wfcdwq2crgge9obkl9cb61tbolw.png"></div><br> å†æ¥ä¸€æ¬¡ã€‚ ä¾‹å¦‚ï¼Œåœ¨6æœˆ4æ—¥ï¼Œæ˜ŸæœŸä¸€ï¼Œè®°å½•äº†ä»ç¬¬ä¸€ä¸ªåŠå…¬å®¤åˆ°ç¬¬äºŒä¸ªåŠå…¬å®¤ä¸€å¤©çš„ç­çº§è½¬ç§»ã€‚ ç„¶åå‡ºç°äº†æ–°çš„éœ€æ±‚-ä»5æœˆ28æ—¥èµ·ï¼Œè¯¥è¯¾ç¨‹å°†å§‹ç»ˆåœ¨20:00è€Œä¸æ˜¯19:00å¼€å§‹ã€‚ æˆ‘ä»¬æ‰“å¼€è¡¨æ ¼ï¼Œæ›´æ”¹æ—¶é—´ï¼ŒæŒ‡ç¤ºä»28æ—¥å¼€å§‹çš„æ—¥æœŸï¼Œç›´åˆ°æ°¸è¿œï¼Œç„¶å...æ‰€æœ‰å­—æ®µä»¥åŠæœºæŸœå·è¿›å…¥æœåŠ¡å™¨ã€‚  6æœˆ4æ—¥çš„ä¸´æ—¶æ›´æ”¹å·²è¢«è¦†ç›–ã€‚ ä½¿ç”¨è¿™ç§å½¢å¼ï¼Œå› ä¸ºæ‰€æœ‰å­—æ®µéƒ½å·²å‘é€ï¼Œæ‰€ä»¥æ— æ³•ç¡®å®šç”¨æˆ·è¦æ›´æ”¹é—´éš”çš„å­—æ®µã€‚ <br><br> å…¶æ€æƒ³æ˜¯ï¼Œæ¯ä¸ªè§„åˆ™ä»¥å…¶è‡ªå·±çš„é—´éš”ç‹¬ç«‹äºå…¶ä»–è§„åˆ™è€Œå˜åŒ–ã€‚ æ’æ§½ç”±ä¸€ç»„ä¸€ç»´å‚æ•°å®šä¹‰ï¼Œæ¯ä¸ªå‚æ•°éƒ½æœ‰ç”±ä¸€ç»„è§„åˆ™å®šä¹‰çš„æ›´â€‹â€‹æ”¹å†å²è®°å½•ã€‚ æ¯ä¸ªè§„åˆ™éƒ½åŒ…å«ä¸€ä¸ªå€¼ï¼Œå¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸã€‚ ç”±äºè¿™æ˜¯æ¯å‘¨æ—¥å†ï¼Œå› æ­¤æ—¥æœŸè¶³ä»¥è¡¨ç¤ºæœ€å¤šä¸€å‘¨ï¼Œå³YYYYWWã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vd/sq/pc/vdsqpci_tcxsbarhm1hqdgocecy.jpeg"></div><br> ç°åœ¨çœ‹æ¥ï¼Œç¼–è¾‘å¹¿å‘Šä½éå¸¸å¤æ‚-è¦æ›´æ”¹å¤šä¸ªå­—æ®µï¼Œæ‚¨éœ€è¦é€‰æ‹©æ¯ä¸ªå­—æ®µï¼Œæ‰“å¼€è¡¨å•ï¼Œè¾“å…¥ä¸€ä¸ªå€¼å’Œä¸€ä¸ªé—´éš”ã€‚ ä½†æ˜¯ï¼Œåœ¨å®è·µä¸­ï¼Œäº‹å®è¯æ˜ï¼Œæ”¹å˜å‡ ä¸ªé¢†åŸŸæ˜¯ä¸€ç§ç½•è§çš„æƒ…å†µã€‚ ä¸€æ¬¡æ›´æ–°å¤šä¸ªæ’æ§½çš„é¢‘ç‡æ›´é«˜ã€‚ ä¾‹å¦‚ï¼Œè¦å¹³æ¯å› ç—…ç¼ºå¸­çš„æ•™å¸ˆï¼Œæ‚¨éœ€è¦é€‰æ‹©å…¶æ‰€æœ‰èŒä½ï¼Œå°†å·¥ä½œäººå‘˜åˆ†é…çŠ¶æ€è®¾ä¸ºç—…å‡ï¼Œç„¶åä¸ºç›¸åŒçš„èŒä½é€‰æ‹©æ›¿ä»£è€å¸ˆã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»…2ä¸ªåŠ¨ä½œè€Œä¸æ˜¯nä¸ªæ’æ§½çš„nä¸ªåŠ¨ä½œï¼Œå°±å¥½åƒå®ƒä»¬æ˜¯é€šè¿‡ä¼ ç»Ÿå½¢å¼æŒ‡å®šçš„ä¸€æ ·ã€‚ åœ¨æˆ‘å½“å‰æ­£åœ¨ä½¿ç”¨çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">StarBright.com</a>ç³»ç»Ÿä¸Šï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sf/0y/in/sf0yin4ge2b-pign5bfjmkmjimc.gif"></div><br><h2> ç”»æ¡çš„ä»»åŠ¡ </h2><br> è€ƒè™‘ä¸€æ¡ç”±æ¶‚æœ‰ä¸åŒé¢œè‰²çš„å•å…ƒæ ¼ç»„æˆçš„æ¡ã€‚ æ¯ä¸ªå•å…ƒæ ¼æ˜¯ä¸€ä¸ªæ˜ŸæœŸï¼Œæ¯ç§é¢œè‰²æ˜¯ä¸€ç§å«ä¹‰ã€‚ ä¸€ç§æ–°çš„é¢œè‰²å‡ºç°äº†ï¼Œå¹¶ä¸”é—´éš”äº†ä¸€æ®µæ—¶é—´ï¼Œä»–ä»¬éœ€è¦é‡æ–°æ¶‚ä¸Šæ–°çš„é¢œè‰²ã€‚ åœ¨æ•°æ®çº§åˆ«ï¼Œè¿™æ„å‘³ç€æ‚¨éœ€è¦åˆ é™¤å®Œå…¨é‡å çš„é—´éš”ï¼Œæ›´æ”¹éƒ¨åˆ†é‡å çš„é—´éš”ï¼Œæ·»åŠ æ–°çš„é—´éš”ï¼Œå¹¶å°†ç›¸é‚»çš„ä¸€ç§é¢œè‰²é—´éš”åˆå¹¶ä¸ºä¸€ä¸ªã€‚ æœ€ç»ˆç»“æœåº”åŒ…å«ä¸é‡å çš„é—´éš”ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yy/ve/ya/yyveyanr3v1zo9tt_y9zsioid34.png"></div><br>  <i>ç»“æœï¼š[{deleteï¼Œidï¼š2}ï¼Œ{updateï¼Œidï¼š1ï¼Œæ•°æ®ï¼š{toï¼š5}}ï¼Œ{updateï¼Œidï¼š3ï¼Œæ•°æ®ï¼š{fromï¼š16}}ï¼Œ{insertï¼Œdataï¼š{from ï¼š6ï¼Œè‡³ï¼š15ï¼Œå€¼ï¼šæ˜ŸæœŸä¸‰}}]</i> <br><br> è¿™æ˜¯ä¸€é¡¹ç®€å•çš„ä»»åŠ¡ï¼Œä½†åœ¨è¿™é‡Œå¾ˆå®¹æ˜“å¿½ç•¥ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™</a>æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­˜å‚¨åº“ï¼Œå…¶ä¸­åŒ…å«è§£å†³æ–¹æ¡ˆå’Œæµ‹è¯•ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://timeblock-rules.rag.lt-</a>åœ¨è¿™é‡Œæ‚¨å¯ä»¥æ£€æŸ¥å®ƒçš„å·¥ä½œæ–¹å¼å¹¶ä½¿ç”¨é˜´å½±æ’­æ”¾ã€‚ <br><br><h2> åç«¯ </h2><br> è§„åˆ™ä¸é‡å ï¼Œå› æ­¤æœ€ç®€å•çš„ä»è§„åˆ™ä¸­é€‰æ‹©select * from &lt;=ï¼šweek andï¼ˆtoä¸ºnullæˆ–to&gt; =ï¼šweekï¼‰è¶³ä»¥é€‰æ‹©æŒ‡å®šæ˜ŸæœŸçš„å¿…è¦è§„åˆ™ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™</a>æ˜¯èŠ‚ç‚¹/ sequelizeä¸Šçš„ä¸€ä¸ªç®€å•ç¤ºä¾‹åç«¯ã€‚ å®ƒä½¿ç”¨äº†c promiseå’Œasync / awaitçš„ç»„åˆæ ·å¼ï¼Œæ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ä¸­</a>äº†è§£åˆ°ã€‚ <br><br> è¿™æ˜¯ä¸ºæŒ‡å®šæ˜ŸæœŸé€‰æ‹©è§„åˆ™çš„æ“ä½œï¼š <br><pre><code class="javascript hljs">routes.get(<span class="hljs-string"><span class="hljs-string">'/timeblocks'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ... validation ... await Rule .findAll({ <span class="hljs-attr"><span class="hljs-attr">where</span></span>: { <span class="hljs-attr"><span class="hljs-attr">from</span></span>: {<span class="hljs-attr"><span class="hljs-attr">$or</span></span>: [{<span class="hljs-attr"><span class="hljs-attr">$lte</span></span>: req.query.week}, <span class="hljs-literal"><span class="hljs-literal">null</span></span>]}, <span class="hljs-attr"><span class="hljs-attr">to</span></span>: {<span class="hljs-attr"><span class="hljs-attr">$or</span></span>: [{<span class="hljs-attr"><span class="hljs-attr">$gte</span></span>: req.query.week}, <span class="hljs-literal"><span class="hljs-literal">null</span></span>]} } }) .then( sendSuccess(res, <span class="hljs-string"><span class="hljs-string">'Calendar data extracted.'</span></span>), throwError(<span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-string"><span class="hljs-string">'sequelize error'</span></span>) ) } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) { catchError(res, error) } })</code> </pre> <br><br> è¿™æ˜¯æ›´æ”¹è§„åˆ™é›†çš„PATCHï¼š <br><pre> <code class="javascript hljs">routes.patch(<span class="hljs-string"><span class="hljs-string">'/timeblocks/:id(\\d+)'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> (req, res) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { ... validation ... const initialRules = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Rule .findAll({ <span class="hljs-attr"><span class="hljs-attr">where</span></span>: { <span class="hljs-attr"><span class="hljs-attr">timeblock_id</span></span>: req.params.id, <span class="hljs-attr"><span class="hljs-attr">type</span></span>: {<span class="hljs-attr"><span class="hljs-attr">$in</span></span>: req.params.rules.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rule</span></span></span><span class="hljs-function"> =&gt;</span></span> rule.type)} } }).catch(throwError(<span class="hljs-number"><span class="hljs-number">500</span></span>, <span class="hljs-string"><span class="hljs-string">'sequelize error'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promises = [] req.params.rules.forEach(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rule</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">// This function defined in stripe coloring repo, https://github.com/Kasheftin/timeblock-rules/blob/master/src/fn/rules.js; const actions = processNewRule(rule, initialRules[rule.type] || []) actions.forEach(action =&gt; { if (action.type === 'delete') { promises.push(Rule.destroy({where: {id: action.id}})) } else if (action.type === 'update') { promises.push(Rule.update(action.data, {where: {id: action.id}})) } else if (action.type === 'insert') { promises.push(Rule.build({...action.data, timeblock_id: rule.timeblock_id, type: rule.type}).save()) } }) }) Promise.all(promises).then( result =&gt; sendSuccess(res, 'Timeblock rules updated.')() ) } catch (error) { catchError(res, error) } })</span></span></code> </pre><br><br> è¿™æ˜¯åç«¯æœ€å›°éš¾çš„æ„è¯†å½¢æ€éƒ¨åˆ†ï¼Œå…¶ä½™çš„ç”šè‡³æ›´ç®€å•ã€‚ <br><br> é—®é¢˜æ˜¯å¦‚ä½•åˆ é™¤æ’æ§½ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†å­˜å‚¨å®Œæ•´çš„å†å²è®°å½•ï¼Œè€Œä¸ä¼šåˆ é™¤ä»»ä½•å†…å®¹ã€‚ æœ‰ä¸€ä¸ªçŠ¶æ€å­—æ®µï¼Œå¯ä»¥æ‰“å¼€ï¼Œæš‚æ—¶å…³é—­å’Œå…³é—­ã€‚ è®¿å®¢çœ‹åˆ°æ´»åŠ¨çš„æ’æ§½ï¼Œè€Œæš‚æ—¶ä¸æ´»åŠ¨ï¼Œåœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œç®¡ç†å‘˜é€šå¸¸ä¼šå†™è¯„è®ºä¸ºä»€ä¹ˆæ²¡æœ‰æ´»åŠ¨ã€‚ éšç€æ—¶é—´çš„æµé€ï¼Œæœ‰å¾ˆå¤šå°é—­çš„æ—¶é—´æ®µï¼Œä¸ºäº†ç®€åŒ–è¿™ç§æƒ…å†µï¼Œå¼•å…¥å¦ä¸€ä¸ªå±æ€§ï¼ˆä¾‹å¦‚å­¦å¹´ï¼‰å¹¶åœ¨ç¼–è¾‘æ—¶é—´æ®µæ—¶ä»…æ˜¾ç¤ºå½“å‰çš„å­¦å¹´å¾ˆæœ‰ç”¨ã€‚ <br><br><h2> å‰ç«¯ </h2><br> ä»£ç åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å­˜å‚¨åº“ä¸­</a> ï¼Œå®ƒæ˜¯nuxtä¸Šä¸€ä¸ªç®€å•çš„ä¸€é¡µç«™ç‚¹ã€‚ å®é™…ä¸Šï¼Œssrä¼šé‡åˆ°ä¸€äº›éº»çƒ¦ï¼ˆä¾‹å¦‚ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æˆ‘</a>è¯¦ç»†åˆ†æäº†å¦‚ä½•åœ¨nuxtä¸Šç¼–å†™èº«ä»½éªŒè¯ï¼‰ï¼Œä½†æ˜¯ç®€å•çš„åº”ç”¨ç¨‹åºå¯ä»¥å¾ˆå¿«å†™åœ¨ä¸Šé¢ã€‚ <br><br> è¿™æ˜¯å•ä¸ªé¡µé¢çš„ä»£ç ï¼š <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { <span class="hljs-attr"><span class="hljs-attr">components</span></span>: {...}, fetch ({app, route, redirect, store}) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!route.query.week) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> newRoute = app.router.resolve({<span class="hljs-attr"><span class="hljs-attr">query</span></span>: {...route.query, <span class="hljs-attr"><span class="hljs-attr">week</span></span>: moment().format(<span class="hljs-string"><span class="hljs-string">'YYYYWW'</span></span>)}}, route) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> redirect(newRoute.href) } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve() .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> store.dispatch(<span class="hljs-string"><span class="hljs-string">'calendar/set'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">week</span></span>: route.query.week})) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> store.dispatch(<span class="hljs-string"><span class="hljs-string">'calendar/fetch'</span></span>)) }, <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: { week () { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$store.state.calendar.week } }, <span class="hljs-attr"><span class="hljs-attr">watch</span></span>: { week (week) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$router.push({ <span class="hljs-attr"><span class="hljs-attr">query</span></span>: { ...this.$route.query, week } }) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.$store.dispatch(<span class="hljs-string"><span class="hljs-string">'calendar/fetch'</span></span>) } } }</code> </pre><br><br>  fetchæ–¹æ³•å¯åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¸Šä½¿ç”¨ï¼Œé‡å®šå‘åˆ°å½“å‰æ˜ŸæœŸå¹¶è¯·æ±‚æ—¥å†ã€‚ å½“æ˜ŸæœŸæ›´æ”¹æ—¶ï¼Œå°†é‡æ–°è¯·æ±‚æ•°æ®ã€‚ <br><br> æ’æ§½é‡å æ€ä¹ˆåŠï¼Ÿ ç­”æ¡ˆå–å†³äºä¸šåŠ¡é€»è¾‘ï¼Œä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½éœ€è¦ç¦æ­¢é‡å çš„æœåŠ¡å™¨éªŒè¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå…è®¸è¦†ç›–ï¼Œå¹¶ä¸”ä¸ºäº†è·å¾—æ¼‚äº®çš„å›¾ç‰‡ï¼Œå°†è¿™äº›ç‹­ç¼ç»˜åˆ¶ä¸ºå½¼æ­¤ç›¸é‚»çš„ä¸€åŠå®½åº¦ã€‚ æ·»åŠ å¸ƒå±€å¹¶è·å¾—ä»¥ä¸‹å¤–è§‚ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6d/kv/7m/6dkv7mn28thsjpj3zkb7zy8asey.png"></div><br><br> å…¶ä»–æ‰€æœ‰å†…å®¹éƒ½æ˜¯çº¯JavaScriptï¼Œæ²¡æœ‰ç‰¹æ®Šæç¤ºã€‚ é€šè¿‡åœ¨å—ä¸Šå•å‡»é¼ æ ‡ï¼Œå¼€å§‹æ‹–æ”¾ã€‚  mousemoveå’Œmouseupäº‹ä»¶æŒ‚åœ¨æ•´ä¸ªçª—å£ä¸Šã€‚ æ‹–æ”¾ä»200æ¯«ç§’çš„å»¶è¿Ÿå¼€å§‹ï¼Œä»¥åŒºåˆ†æ‹–åŠ¨å’Œç‚¹å‡»ã€‚ è·Ÿè¸ªä¸‹è½çš„å®¹å™¨çš„å‚æ•°æ˜¯é¢„å…ˆè®¡ç®—çš„ï¼Œå› ä¸ºgetBoundingClientRectçš„æ“ä½œè¿‡äºç¹çï¼Œæ— æ³•æ¯æ¬¡é¼ æ ‡ç§»åŠ¨ã€‚ æˆ‘å¿…é¡»åšä¸¤ç§å½¢å¼-ä¸€ç§ç”¨äºåˆ›å»ºï¼ˆä»æœ¬å‘¨å¼€å§‹ä¸€æ¬¡è®¾ç½®æ‰€æœ‰è§„åˆ™ï¼‰ï¼Œå¦ä¸€ç§ç”¨äºå¯¹å¹¿å‘Šä½è¿›è¡Œç»†åŒ–æ›´æ”¹ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://calendar.rag.lt-</a>åœ¨è¿™é‡Œæ‚¨å¯ä»¥æ£€æŸ¥æ‰€æœ‰å·¥ä½œæ–¹å¼ã€‚ <br><br><h2> é“¾æ¥åˆ°æ–‡ç«  </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http</a> ://calendar.rag.lt-å·²éƒ¨ç½²çš„nuxtåº”ç”¨ç¨‹åºï¼› </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http://calendar-api.rag.lt-</a>è¯¦ç»†çš„åç«¯ï¼› </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">http</a> ://timeblock-rules.rag.lt-å¡«å……æµ‹è¯•æ¡çš„è¯¦ç»†æµ‹è¯•ï¼› </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/Kasheftin/calendar-demo-frontend-</a>å‰ç«¯èµ„æºï¼› </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/Kasheftin/calendar-demo-backend-</a>åç«¯æ¥æº </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://github.com/Kasheftin/timeblock-rules-</a>ä»»åŠ¡çš„æºä»£ç ï¼› </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://codeburst.io/nuxt-authentication-from-scratch-a7a024c7201b-</a>ä»é›¶å¼€å§‹æœ‰å…³nuxtçš„æˆæƒæ•™ç¨‹; </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://codeburst.io/node-express-async-code-and-error-handling-121b1f0e44ba-</a>èŠ‚ç‚¹/ expressä¸Šçš„å¼‚æ­¥åç«¯ä»£ç ä¸­çš„é”™è¯¯å¤„ç†ï¼› </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://codeburst.io/weekly-schedule-editor-concept-8df79ab83305-</a>åŒä¸€ç¯‡è‹±æ–‡æ–‡ç« ã€‚ </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN412665/">https://habr.com/ru/post/zh-CN412665/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN412653/index.html">ç«æªæ‰‹ä¸å†æ˜¯åŒä¸€ä¸ªäººï¼Œæˆ–è€…ç­‰å¾…äº†é˜¿ç´¢æ–¯ï¼Œä½†æ³¢æ‰˜æ–¯åˆ°è¾¾äº†</a></li>
<li><a href="../zh-CN412655/index.html">å¤šç­¾åé’±åŒ…å±‚æ¬¡ç»“æ„ï¼ˆä¿¡ä»»ç³»ç»Ÿï¼‰</a></li>
<li><a href="../zh-CN412657/index.html">å®ç”¨ä»£å¸æˆ–è‚¡ç¥¨ï¼šICOçš„æœªæ¥å°†æ˜¯ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN412661/index.html">åœ¨å›½å¤–å¸‚åœºå·¥ä½œçš„è‹±è¯­ï¼šæ•™ç§‘ä¹¦ä¸è®²ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN412663/index.html">AIå‡ºå”®æ¯”è¨é¥¼æˆ–Voximplantå¦‚ä½•ä¸Dialogflowäº¤æœ‹å‹</a></li>
<li><a href="../zh-CN412667/index.html">Cyberâ€‹â€‹group Turlaåœ¨ç­èšŠè¿åŠ¨ä¸­ä½¿ç”¨Metasploit</a></li>
<li><a href="../zh-CN412669/index.html">æ—¶é—´ç®¡ç†å¹¶ä¸å¯æ€•ï¼šå¦‚ä½•åšå¾—æ›´å¤š</a></li>
<li><a href="../zh-CN412671/index.html">BLEæ§åˆ¶å°ï¼šä¸BLEè®¾å¤‡äº¤äº’çš„å…¨æ–°æ–¹æ³•</a></li>
<li><a href="../zh-CN412675/index.html">æ¯”ç‰¹å¸å’Œä»¥å¤ªåŠä¸­çš„Multisigåˆçº¦å’Œåœ°å€</a></li>
<li><a href="../zh-CN412677/index.html">è¿½æº¯çŸ©é˜µ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>