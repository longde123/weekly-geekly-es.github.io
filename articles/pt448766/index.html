<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñêÔ∏è ‚òëÔ∏è ‚ÅâÔ∏è Criar um monoreposit√≥rio com √°reas de trabalho lerna e fios üë®üèΩ‚Äç‚úàÔ∏è üî£ ‚öíÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nos √∫ltimos anos, o conceito de mono-reposit√≥rios se estabeleceu com sucesso, pois pode simplificar significativamente o processo de desenvolvimento d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Criar um monoreposit√≥rio com √°reas de trabalho lerna e fios</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448766/"><img src="https://habrastorage.org/webt/ka/j9/hb/kaj9hbw5yqq7pouoa9ad-aqhdio.jpeg" alt="aprender-e-fios"><br><br>  Nos √∫ltimos anos, o conceito de <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mono-reposit√≥rios se</a></b> estabeleceu com sucesso, pois pode simplificar significativamente o processo de desenvolvimento de projetos de software modulares, como infraestruturas baseadas em microsservi√ßos.  As principais vantagens dessa abordagem arquitet√¥nica s√£o √≥bvias na pr√°tica; portanto, proponho criar seu pr√≥prio <b>reposit√≥rio</b> de teste <b>a</b> partir do zero, entendendo simultaneamente as nuances de trabalhar com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√°reas de trabalho de fios</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lerna</a> .  Bem, vamos come√ßar! <br><br>  Considere a estrutura do nosso projeto, que ser√° tr√™s bibliotecas localizadas na pasta <i>packages /</i> , bem como <i>package.json</i> no diret√≥rio raiz. <br><br><pre><code class="bash hljs">‚îú‚îÄ‚îÄ package.json ‚îî‚îÄ‚îÄ packages ‚îú‚îÄ‚îÄ app ‚îÇ  ‚îú‚îÄ‚îÄ index.js ‚îÇ  ‚îî‚îÄ‚îÄ package.json ‚îú‚îÄ‚îÄ first ‚îÇ  ‚îú‚îÄ‚îÄ index.js ‚îÇ  ‚îî‚îÄ‚îÄ package.json ‚îî‚îÄ‚îÄ second ‚îú‚îÄ‚îÄ index.js ‚îî‚îÄ‚îÄ package.json</code> </pre> <br>  Entende-se que temos duas bibliotecas independentes <i>primeiro</i> e <i>segundo</i> , al√©m de uma biblioteca de <i>aplicativos</i> que importar√° fun√ß√µes das duas primeiras.  Por conveni√™ncia, todos os tr√™s pacotes s√£o colocados no diret√≥rio <i>packages</i> .  Voc√™ pode deix√°-los na pasta raiz ou coloc√°-los em um diret√≥rio com qualquer outro nome, mas, para seguir as conven√ß√µes geralmente aceitas, as colocaremos dessa maneira. <br><a name="habracut"></a><br>  As bibliotecas <i>primeiro</i> e <i>segundo</i> por simplicidade do experimento conter√£o apenas uma fun√ß√£o no <i>index.js</i> , cada uma das quais retornar√° uma sequ√™ncia de hello em nome do m√≥dulo.  Para o <i>primeiro</i> exemplo, ficar√° assim: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/first/index.js const first = () =&gt; 'Hi from the first module'; module.exports = first;</span></span></code> </pre> <br>  No m√≥dulo do <i>aplicativo</i> , exibiremos a mensagem <i>Oi do aplicativo</i> no console, al√©m de cumprimentos de dois outros pacotes: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/app/index.js const first = require('@monorepo/first'); const second = require('@monorepo/second'); const app = () =&gt; 'Hi from the app'; const main = () =&gt; { console.log(app()); console.log(first()); console.log(second()); }; main(); module.exports = { app, main };</span></span></code> </pre> <br>  Para que o <i>primeiro</i> e o <i>segundo</i> estejam dispon√≠veis no <i>aplicativo</i> , os denotamos como depend√™ncias nas <i>depend√™ncias</i> . <br><br>  Al√©m disso, para cada biblioteca, adicionamos o prefixo <i>@ monorepo /</i> no <i>nome</i> do valor na frente do nome principal do pacote ao <i>package.json</i> local. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/app/package.json { "name": "@monorepo/app", "version": "1.0.0", "main": "index.js", "license": "MIT", "dependencies": { "@monorepo/first": "^1.0.0", "@monorepo/second": "^1.0.0" } }</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Por que preciso de um prefixo com um √≠cone de cachorro na frente do nome do pacote npm (@ monorepo /)?</b> <div class="spoiler_text">  A adi√ß√£o de um prefixo √© opcional, mas esse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">√©</a> exatamente o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tipo de</a> conven√ß√£o de nomenclatura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">de</a> pacotes a que muitos monoreposit√≥rios aderem: <a href="">babel</a> , <br>  <a href="">interface do usu√°rio material</a> , <a href="">angular</a> e outros.  O fato √© que cada usu√°rio ou organiza√ß√£o tem seu pr√≥prio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">escopo</a> no site <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npm</a> , portanto, h√° uma garantia de que todos os m√≥dulos com o <i>@ somescope /</i> postfix s√£o criados pela equipe do <i>somescope</i> e n√£o pelos atacantes.  Al√©m disso, torna-se poss√≠vel chamar nomes de m√≥dulos que j√° foram utilizados.  Por exemplo, voc√™ n√£o pode simplesmente criar e criar seu pr√≥prio m√≥dulo de <i>utilit√°rios</i> , porque essa biblioteca <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">j√° existe</a> .  No entanto, adicionando o postfix <i>@ myscopename /</i> , podemos obter nossos utils ( <i>@ myscopename / utils</i> ) com blackjack e jovens senhoras. <br></div></div><br>  Um an√°logo da vida real para o nosso projeto de teste pode ser v√°rias bibliotecas para trabalhar com dados, ferramentas de valida√ß√£o, an√°lise ou apenas um conjunto de componentes da interface do usu√°rio.  Se assumirmos que vamos desenvolver um aplicativo <i>Web</i> e <i>m√≥vel</i> (por exemplo, usando <i>React</i> e <i>React Native,</i> respectivamente), e tivermos parte da l√≥gica reutilizada, pode valer a pena coloc√°-lo em componentes separados, para uso posterior em outros projetos.  Adicione a isso o servidor no <i>Node.js</i> e voc√™ ter√° um caso muito real da vida. <br><br><h3>  √Åreas de trabalho de fios </h3><br>  O toque final antes de criar um <b>reposit√≥rio mono</b> completo ser√° o design do <i>package.json</i> na raiz do nosso reposit√≥rio.  Preste aten√ß√£o √† propriedade de <i>√°reas de trabalho</i> - especificamos o valor de <i>packages / *</i> , que significa "todas as subchaves na pasta <i>packages</i> ".  No nosso caso, este √© um <i>aplicativo</i> , <i>primeiro</i> , <i>segundo</i> . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// package.json { "name": "monorepo", "version": "1.0.0", "main": "packages/app/index.js", "license": "MIT", "private": true, "workspaces": [ "packages/*" ] }</span></span></code> </pre> <br>  Al√©m disso, <i>‚Äúprivate‚Äù: true</i> deve ser especificado em <i>package.json</i> , pois os <i>espa√ßos de trabalho</i> est√£o dispon√≠veis apenas em projetos privados. <br><br>  Para que tudo decole, execute o comando <i>yarn</i> (an√°logo ao <i>yarn install</i> ou <i>npm install</i> ) no diret√≥rio raiz.  Como as depend√™ncias existentes no m√≥dulo de <i>aplicativo</i> s√£o definidas como <i>√°reas de trabalho</i> no <i>pacote raiz.json</i> , na verdade, n√£o faremos download de nada do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npm-registry</a> , mas simplesmente vincularemos ("vincularemos") nossos pacotes. <br><br><pre> <code class="bash hljs">yarn</code> </pre> <br><img src="https://habrastorage.org/webt/hp/sz/m6/hpszm6bs8xrdmb1fguwl9pzx4zg.png" alt="imagem"><br><br>  Agora podemos executar o comando do <i>n√≥.</i>  no diret√≥rio raiz que executar√° o script no <i>arquivo packages / app / index.js</i> . <br><br><pre> <code class="bash hljs">node .</code> </pre> <br><img src="https://habrastorage.org/webt/xe/xl/2c/xexl2cpgenqejsz7kbusvpsn0_i.png" alt="imagem"><br><br>  Vamos ver como isso funciona.  <i>Ao</i> chamar <i>yarn</i> , criamos links simb√≥licos em <i>node_modules</i> para nossos diret√≥rios na pasta <i>packages</i> . <br><br><img src="https://habrastorage.org/webt/y2/y-/sj/y2y-sjr7-7blo6ddwgi41ijvvuq.png" alt="imagem"><br><br>  Devido a esse relacionamento nas depend√™ncias, tivemos uma grande vantagem - agora, ao mudar no <i>primeiro</i> e no <i>segundo</i> m√≥dulos, nosso <i>aplicativo</i> receber√° a vers√£o atual desses pacotes sem reconstruir.  Na pr√°tica, √© muito conveniente, porque  podemos conduzir o desenvolvimento local de pacotes, ainda os definindo como depend√™ncias de terceiros (que acabam se tornando). <br><br>  A pr√≥xima vantagem importante que voc√™ pode obter ao trabalhar com <i>√°reas de trabalho de fios</i> √© a organiza√ß√£o do armazenamento de depend√™ncias de terceiros. <br><br><div class="spoiler">  <b class="spoiler_title">Saiba mais sobre o armazenamento de depend√™ncias no n√≠vel superior.</b> <div class="spoiler_text">  Suponha que <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">desej√°ssemos</a></i> usar a biblioteca <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lodash</a></i> no <i>primeiro</i> e no <i>segundo</i> .  <i>Ao executar o comando yarn add lodash a</i> partir dos diret√≥rios apropriados, receberemos uma atualiza√ß√£o para o <i>package.json</i> local - a vers√£o atual do pacote aparecer√° em <i>depend√™ncias</i> . <br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"lodash"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.17.11"</span></span> }</code> </pre> <br>  Quanto ao <i>pr√≥prio</i> pacote <i>lodash</i> - fisicamente, a biblioteca ser√° instalada no <i>node_modules</i> no n√≠vel raiz uma vez. <br>  Se a vers√£o exigida do pacote externo (no nosso caso, <i>lodash</i> ) for diferente para o <i>primeiro</i> e o segundo (por exemplo, <i>primeiro voc√™</i> precisar√° do <i>lodash v3.0.0</i> e no <i>segundo v4.0.0</i> ), um pacote com uma vers√£o inferior ( <i>3.0.0</i> ) chegar√° ao <i>n√≥ node_modules</i> raiz , e a vers√£o <i>lodash</i> para o <i>segundo</i> m√≥dulo ser√° armazenada em <i>pacotes</i> locais <i>/ second / node_modules</i> . <br>  Al√©m das vantagens, essa abordagem pode ter pequenas desvantagens, que o <i>fio</i> permite ignorar com a ajuda de sinalizadores adicionais.  Voc√™ pode ler mais sobre essas nuances na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o oficial</a> . <br></div></div><br><h2>  Adicionar Lerna </h2><br>  O primeiro passo para trabalhar com o <i>lerna</i> √© instalar o pacote.  Geralmente eles executam uma instala√ß√£o global ( <i>yarn global add lerna</i> ou <i>npm i -g lerna</i> ), mas se voc√™ n√£o tiver certeza se deseja usar esta biblioteca, poder√° usar a chamada usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npx</a> . <br><br>  Inicializaremos o <i>lerna a</i> partir do diret√≥rio raiz: <br><br><pre> <code class="bash hljs">lerna init</code> </pre> <br><img src="https://habrastorage.org/webt/xx/0z/pe/xx0zpe3xfvy1msih3a63tjxiu5o.png" alt="imagem"><br><br>  De fato, realizamos v√°rias a√ß√µes ao mesmo tempo com a ajuda de um comando: criamos um reposit√≥rio git (se n√£o tivesse sido inicializado antes disso), criamos um arquivo <i>lerna.json</i> e atualizamos nosso <i>pacote</i> <i>raiz.json</i> . <br><br>  Agora, no rec√©m-criado arquivo <i>lerna.json,</i> adicione duas linhas - <i>‚ÄúnpmClient‚Äù: ‚Äúyarn‚Äù</i> e <i>‚ÄúuseWorkspaces‚Äù: true</i> .  A √∫ltima linha diz que j√° usamos <i>√°reas de trabalho de fios</i> e n√£o h√° necessidade de criar a <i>pasta app / node_modules</i> com links simb√≥licos para o <i>primeiro</i> e o <i>segundo</i> . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// lerna.json { "npmClient": "yarn", "packages": [ "packages/*" ], "version": "1.0.0", "useWorkspaces": true }</span></span></code> </pre> <br><h3>  Testes com Lerna </h3><br>  Para mostrar a conveni√™ncia de trabalhar com o <i>lerna,</i> adicione testes para nossas bibliotecas. <br>  No diret√≥rio raiz, instalamos o pacote para testing - <i>jest</i> .  Execute o comando: <br><br><pre> <code class="bash hljs">yarn add -DW jest</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Por que preciso do sinalizador -DW?</b> <div class="spoiler_text">  O sinalizador -D (- dev) √© necess√°rio para que o pacote <i>jest</i> seja instalado como uma depend√™ncia do desenvolvedor, e o sinalizador -W (- ignore-workspace-root-check) permite a instala√ß√£o no n√≠vel raiz (o que precisamos). <br></div></div><br>  O pr√≥ximo passo √© adicionar um arquivo de teste ao nosso pacote.  Para a conveni√™ncia do nosso exemplo, faremos todos os testes semelhantes.  Para o <i>primeiro</i> exemplo, o arquivo de teste ter√° a seguinte apar√™ncia: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/first/test.js const first = require('.'); describe('first', () =&gt; { it('should return correct message', () =&gt; { const result = first(); expect(result).toBe('Hi from the first module'); }); });</span></span></code> </pre> <br>  Tamb√©m precisamos adicionar um script para executar testes no <i>package.json de</i> cada uma de nossas bibliotecas: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// packages/*/package.json ... "scripts": { "test": "../../node_modules/.bin/jest --colors" }, ...</span></span></code> </pre><br>  O toque final ser√° atualizar o <i>pacote root.json</i> .  Adicione um script de <i>teste</i> que chamar√° <i>lerna run test --stream</i> .  O par√¢metro ap√≥s <i>lerna run</i> define o comando que ser√° chamado em cada um de nossos pacotes a partir da pasta <i>packages /</i> , e o sinalizador <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">--stream</a></i> nos permitir√° ver a sa√≠da dos resultados no terminal. <br><br>  Como resultado, o <i>package.json</i> do diret√≥rio raiz ficar√° assim: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// package.json { "name": "monorepo", "version": "1.0.0", "main": "packages/app/index.js", "license": "MIT", "private": true, "workspaces": [ "packages/*" ], "scripts": { "test": "lerna run test --stream" }, "devDependencies": { "jest": "^24.7.1", "lerna": "^3.13.2" } }</span></span></code> </pre> <br>  Agora, para executar os testes, precisamos apenas executar o comando a partir da raiz do nosso projeto: <br><br><pre> <code class="bash hljs">yarn <span class="hljs-built_in"><span class="hljs-built_in">test</span></span></code> </pre> <br><img src="https://habrastorage.org/webt/hs/8x/ti/hs8xtihl1ig7fkcxdgpum82otqy.png" alt="imagem"><br><br><h3>  Atualiza√ß√£o de vers√£o com Lerna </h3><br>  A pr√≥xima tarefa popular, com a qual o <i>lerna</i> pode lidar com a qualidade, ser√° atualizar as vers√µes dos pacotes.  Imagine que, ap√≥s a implementa√ß√£o dos testes, decidimos atualizar nossas bibliotecas da 1.0.0 para a 2.0.0.  Para fazer isso, basta adicionar a linha <i>‚Äúupdate: version‚Äù: ‚Äúlerna version --no-push‚Äù</i> ao campo de <i>scripts</i> do root <i>package.json</i> e, em seguida, execute <i>yarn update: version</i> no diret√≥rio raiz.  O sinalizador <i>--no-push</i> √© adicionado para que, ap√≥s a atualiza√ß√£o da vers√£o, as altera√ß√µes n√£o sejam enviadas para o reposit√≥rio remoto, o que o <i>lerna</i> faz por padr√£o (sem esse sinalizador). <br><br>  Como resultado, nosso root <i>package.json</i> ficar√° assim: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// package.json { "name": "monorepo", "version": "1.0.0", "main": "packages/app/index.js", "license": "MIT", "private": true, "workspaces": [ "packages/*" ], "scripts": { "test": "lerna run test --stream", "update:version": "lerna version --no-push" }, "devDependencies": { "jest": "^24.7.1", "lerna": "^3.13.2" } }</span></span></code> </pre> <br>  Execute o script de atualiza√ß√£o da vers√£o: <br><br><pre> <code class="bash hljs">yarn update:version</code> </pre> <br>  Em seguida, seremos solicitados a selecionar a vers√£o para a qual queremos mudar: <br><br><img src="https://habrastorage.org/webt/yh/9u/_q/yh9u_q_xoiokycczph0iwzpzuqo.png" alt="imagem"><br><br>  Ao clicar em <i>Enter</i> , obtemos uma lista de pacotes nos quais a vers√£o √© atualizada. <br><br><img src="https://habrastorage.org/webt/os/p4/2p/osp42ptsjd5vkf1wm_ja7nbb1lq.png" alt="imagem"><br><br>  Confirmamos a atualiza√ß√£o digitando <i>y</i> e recebemos uma mensagem sobre a atualiza√ß√£o bem-sucedida. <br><br><img src="https://habrastorage.org/webt/5k/ll/6b/5kll6bkqmeejvzn9f6zzy4xopzs.png" alt="imagem"><br><br>  Se tentarmos executar o comando <i>git status</i> , n√£o receberemos a mensagem <i>para confirmar, trabalhando em uma √°rvore limpa</i> , porque  <i>A vers√£o lerna</i> n√£o apenas atualiza as vers√µes dos pacotes, mas tamb√©m cria um commit e uma tag git indicando a nova vers√£o (v2.0.0 no nosso caso). <br><br><div class="spoiler">  <b class="spoiler_title">Recursos de trabalho com a equipe da vers√£o lerna</b> <div class="spoiler_text">  Se voc√™ adicionar a linha <i>"version": "lerna version --no-push" em</i> vez de <i>"update: version": "lerna version --no-push"</i> no campo de <i>scripts</i> do root <i>package.json</i> , √© poss√≠vel que encontre comportamentos inesperados e console vermelho.  O fato √© que o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npm-scripts</a> chama o comando <i>version</i> (script reservado) imediatamente ap√≥s atualizar a vers√£o do pacote, o que leva a uma chamada recursiva para a <i>vers√£o lerna</i> .  Para evitar essa situa√ß√£o, basta atribuir um nome diferente ao script, por exemplo, <i>update: version</i> , como foi feito em nosso exemplo. <br></div></div><br><h3>  Conclus√£o </h3><br>  Esses exemplos mostram um cent√©simo de todas as possibilidades que a <i>lerna</i> possui em conjunto com os <i>espa√ßos de trabalho de fios</i> .  Infelizmente, at√© agora n√£o encontrei instru√ß√µes detalhadas para trabalhar com monoreposit√≥rios em russo, para que possamos assumir que o come√ßo foi feito! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> para o reposit√≥rio do projeto de teste. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt448766/">https://habr.com/ru/post/pt448766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt448756/index.html">Hist√≥rico: por que a Apple e a Qualcomm brigaram e depois se reconciliaram</a></li>
<li><a href="../pt448758/index.html">Rel√≥gio inteligente com BASIC no 6502 f√≠sico</a></li>
<li><a href="../pt448760/index.html">Desenvolvimento na nuvem, seguran√ßa da informa√ß√£o e dados pessoais: resumo para leitura nos fins de semana da 1cloud</a></li>
<li><a href="../pt448762/index.html">Revolta no Picaba. Os usu√°rios acessam massivamente o Reddit</a></li>
<li><a href="../pt448764/index.html">Rel√≥gios na ATtiny13</a></li>
<li><a href="../pt448768/index.html">Controle de ilumina√ß√£o em v√°rios n√≠veis: resili√™ncia de solu√ß√µes e produtos</a></li>
<li><a href="../pt448774/index.html">SQL para CSV usando DBMS_SQL</a></li>
<li><a href="../pt448776/index.html">RxVMS - Uma Arquitetura Pr√°tica para Aplica√ß√µes de Flutter</a></li>
<li><a href="../pt448782/index.html">Teste de Python com pytest. Introdu√ß√£o ao pytest, Cap√≠tulo 1</a></li>
<li><a href="../pt448784/index.html">Novos recursos para autores de extens√£o no Visual Studio 2019 vers√£o 16.1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>