<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§õüèæ üíÜüèΩ üç™ Comment rendre les r√©visions de code plus rapides et plus efficaces ‚öóÔ∏è üë®üèª‚Äçüöí ‚óªÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comment se d√©roule g√©n√©ralement une r√©vision de code? Vous envoyez une demande de pool, obtenez des commentaires, apportez des corrections, envoyez de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment rendre les r√©visions de code plus rapides et plus efficaces</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skyeng/blog/443402/"><img src="https://habrastorage.org/webt/gt/ju/n7/gtjun7gekpsrao-jtxcywmayajg.jpeg" alt="image"><br><br>  Comment se d√©roule g√©n√©ralement une r√©vision de code?  Vous envoyez une demande de pool, obtenez des commentaires, apportez des corrections, envoyez des correctifs pour un deuxi√®me examen, puis obtenez l'approbation et la fusion se produit.  Cela semble simple, mais en r√©alit√©, le processus d'examen peut prendre beaucoup de temps. <br><br>  Imaginez que vous ayez une demande de pool avec des centaines de lignes de changement.  Le r√©viseur doit consacrer beaucoup de temps √† lire enti√®rement le code et √† comprendre les modifications propos√©es.  Par cons√©quent, l'ensemble du processus, de la cr√©ation d'une demande de pool √† son approbation, peut prendre plusieurs jours - ce qui n'est pas tr√®s agr√©able pour le r√©viseur et l'auteur des modifications.  Et les chances sont bonnes qu'en fin de compte, le critique manque encore quelque chose.  Ou le contr√¥le peut √™tre trop superficiel et, dans le pire des cas, la demande de pool peut √™tre rejet√©e imm√©diatement. <br><br>  Il s'av√®re que plus la demande de pool est grande, moins il sera avantageux de la v√©rifier. <br><a name="habracut"></a><br>  Comment √©viter de telles situations?  Comment rendre la demande de pool plus facile et plus compr√©hensible pour le r√©viseur et optimiser l'ensemble du processus? <br><br>  <i>Nous traduisons un article de notre d√©veloppeur principal Sergey Zhuk sur le fonctionnement du processus de r√©vision du code de l'√©quipe de l'application mobile Skyeng.</i> <i><br></i> <br><h2>  Modifier les cat√©gories </h2><br>  Imaginons que vous ayez une t√¢che: impl√©menter de nouvelles fonctionnalit√©s dans le projet.  La demande de pool sur laquelle vous travaillez peut contenir diff√©rentes cat√©gories de modifications.  Bien s√ªr, il y aura du nouveau code dedans.  Mais au cours du travail, vous remarquerez peut-√™tre que certains codes doivent √™tre refactoris√©s au pr√©alable afin de contribuer √† l'ajout de nouvelles fonctionnalit√©s.  Ou avec cette nouvelle fonctionnalit√©, la duplication est apparue dans le code que vous souhaitez √©liminer.  Ou vous avez soudainement trouv√© une erreur et souhaitez la corriger.  √Ä quoi devrait ressembler la demande de pool finale? <br><br>  Voyons d'abord quelles cat√©gories de modifications peuvent se produire avec le code. <br><br><ol><li>  Changements fonctionnels. </li><li>  Refactoring structurel - changements de classes, interfaces, m√©thodes, mouvement entre classes. </li><li>  Refactorisation simple - peut √™tre effectu√©e √† l'aide de l'EDI (par exemple, extraction de variables / m√©thodes / constantes, simplification des conditions). </li><li>  Renommer et d√©placer des classes - r√©organiser l'espace de noms. </li><li>  Suppression du code inutilis√© (mort). </li><li>  Corrections de style de code. </li></ol><br><h2>  Examen de la strat√©gie </h2><br>  Il est tr√®s important de comprendre que chacune de ces cat√©gories est examin√©e diff√©remment et lorsque vous les examinez, l'examinateur doit se concentrer sur des choses diff√©rentes.  On peut dire que chaque cat√©gorie de changement implique sa propre strat√©gie d'examen. <br><br><ol><li>  <b>Changement fonctionnel:</b> r√©solution de probl√®mes commerciaux et conception de syst√®mes. </li><li>  <b>Refactoring structurel:</b> r√©trocompatibilit√© et am√©lioration de la conception. </li><li>  <b>Refactoring primitif:</b> lisibilit√© am√©lior√©e.  Ces modifications peuvent √™tre principalement effectu√©es √† l'aide de l'EDI (par exemple, extraire des variables / m√©thodes / constantes, etc.). </li><li>  <b>Renommer / d√©placer des classes: la</b> structure de <b>l'</b> espace de noms s'est-elle am√©lior√©e? </li><li>  <b>Suppression du code inutilis√©:</b> r√©trocompatible. </li><li>  <b>Corrections de style de code: le</b> plus souvent, la demande de fusion de pool se produit imm√©diatement. </li></ol><br>  Diff√©rentes approches sont utilis√©es pour v√©rifier les changements dans diff√©rentes cat√©gories, par cons√©quent, le temps et les efforts consacr√©s √† leur examen varient √©galement. <br><br>  <b>Changements fonctionnels.</b>  Il s'agit du processus le plus long car il implique de modifier la logique du domaine.  Le r√©viseur cherche √† voir si le probl√®me est r√©solu et v√©rifie si la solution propos√©e est la plus appropri√©e ou peut √™tre am√©lior√©e. <br><br>  <b>Refactoring structurel.</b>  Ce processus n√©cessite beaucoup moins de temps que les changements fonctionnels.  Mais il peut y avoir des suggestions et des d√©saccords sur l'organisation exacte du code. <br><br>  Lors de la v√©rification des cat√©gories restantes dans 99% des cas, la fusion se produit imm√©diatement. <br><br><ol><li>  Refactoring simple.  Le code est-il devenu plus lisible?  - merzhim. </li><li>  Renommer / d√©placer des classes.  La classe a-t-elle √©t√© d√©plac√©e vers un meilleur espace de noms? - Merzh. </li><li>  La suppression du code inutilis√© (mort) est merzhim. </li><li>  Corrections du style de code ou de la mise en forme - merzh.  Vos coll√®gues ne devraient pas v√©rifier cela pendant la r√©vision du code, c'est la t√¢che du linter. </li></ol><br><h2>  Pourquoi les changements devraient-ils √™tre class√©s? </h2><br>  Nous avons d√©j√† expliqu√© que diff√©rentes cat√©gories de changements sont r√©vis√©es diff√©remment.  Par exemple, nous v√©rifions les changements fonctionnels en fonction des besoins de l'entreprise, et dans le refactoring structurel, nous v√©rifions la compatibilit√© descendante.  Et si nous m√©langeons plusieurs cat√©gories, il sera difficile pour le r√©viseur de garder √† l'esprit plusieurs strat√©gies de r√©vision en m√™me temps.  Et, tr√®s probablement, le r√©viseur passera plus de temps sur la demande de pool que n√©cessaire, et √† cause de cela, il peut manquer quelque chose.  De plus, si la demande de pool contient diff√©rents types de changements, avec toute correction, le r√©viseur devra r√©viser √† nouveau toutes ces cat√©gories.  Par exemple, vous avez m√©lang√© le refactoring structurel et les changements fonctionnels.  M√™me si le refactoring est bien effectu√©, mais qu'il y a un probl√®me avec la mise en ≈ìuvre de la fonctionnalit√©, apr√®s les corrections, le r√©viseur devra examiner la demande de pool enti√®re d√®s le d√©but.  Autrement dit, rev√©rifiez √† la fois le refactoring et les modifications fonctionnelles.  Le r√©viseur passe donc plus de temps sur la demande de pool.  Au lieu d'envisager imm√©diatement une demande de pool s√©par√©e avec refactoring, le r√©viseur devrait √† nouveau revoir le code entier. <br><br><h2>  Ce qui ne vaut pas la peine d'√™tre m√©lang√© </h2><br>  <b>Renommer / supprimer une classe et sa refactorisation.</b>  Nous rencontrons ici Git, qui ne comprend pas toujours correctement ces changements.  Je veux dire des changements √† grande √©chelle lorsque de nombreuses lignes changent.  Lorsque vous refactorisez une classe et que vous la d√©placez quelque part, Git ne la per√ßoit pas comme se d√©pla√ßant.  Au lieu de cela, Git interpr√®te ces changements comme supprimant une classe et en cr√©ant une autre.  Cela conduit √† un tas de questions lors de la r√©vision du code.  Et on demande √† l'auteur du code pourquoi il a √©crit ce code laid, bien qu'en fait ce code ait √©t√© simplement d√©plac√© d'un endroit √† un autre avec des changements mineurs. <br><br>  <b>Tout changement fonctionnel + tout refactoring.</b>  Nous avons d√©j√† discut√© de ce cas ci-dessus.  Cela permet au r√©viseur de garder √† l'esprit deux strat√©gies de r√©vision √† la fois.  M√™me si le refactoring est bien fait, nous ne pourrons pas retarder ces modifications tant que les modifications fonctionnelles ne seront pas approuv√©es. <br><br>  <b>Toute modification m√©canique + toute modification apport√©e par l'homme.</b>  Par ¬´changements m√©caniques¬ª, j'entends tout formatage effectu√© √† l'aide de l'IDE ou de la g√©n√©ration de code.  Par exemple, nous appliquons le nouveau style de code et obtenons 3000 modifications de ligne.  Et si nous m√©langeons ces modifications avec toute modification fonctionnelle ou toute autre modification apport√©e par une personne, nous obligerons le r√©viseur √† classer mentalement ces modifications et la raison: il s'agit d'une modification effectu√©e par un ordinateur - elle peut √™tre ignor√©e, et cette modification apport√©e par une personne est n√©cessaire v√©rifier.  L'√©valuateur passe donc beaucoup de temps √† v√©rifier. <br><br><h2>  Exemple </h2><br>  Voici une demande de pool avec une fonction de m√©thode qui ferme doucement la connexion client √† Memcached: <br><br><img src="https://habrastorage.org/webt/wp/wl/yd/wpwlydfdjopmq-u3bmqz4ied0yg.gif" alt="image"><br><br>  M√™me si la demande de pool est petite et ne contient qu'une centaine de lignes de code, elle est toujours difficile √† v√©rifier.  Comme vous pouvez le voir dans les commits, il contient diff√©rentes cat√©gories de modifications: <br><br><ul><li>  fonctionnel (nouveau code), </li><li>  refactoring (cr√©ation / d√©placement de classes), </li><li>  corrections de style de code (suppression des blocs de quai en exc√®s). </li></ul><br>  En m√™me temps, la nouvelle fonctionnalit√© elle-m√™me n'est que de 10 lignes: <br><br><img src="https://habrastorage.org/webt/o9/-u/ab/o9-uabrrduisot1lhx4irj0wiue.png" alt="image"><br><br>  Par cons√©quent, le r√©viseur doit revoir l'int√©gralit√© du code et <br><br><ul><li>  V√©rifiez que le refactoring est OK. </li><li>  v√©rifier si la nouvelle fonctionnalit√© est correctement impl√©ment√©e; </li><li>  d√©terminer si cette modification a √©t√© g√©n√©r√©e automatiquement par l'IDE ou par la personne. </li></ul><br>  Par cons√©quent, une telle demande de pool est difficile √† examiner.  Pour corriger la situation, vous pouvez diviser ces validations en branches distinctes et cr√©er un pool de demandes pour chacune d'entre elles. <br><br><h3>  1. Refactoring: extraction de classe </h3><br><img src="https://habrastorage.org/webt/7y/ai/j5/7yaij5qwqbtplzc69gyygb6pegc.gif" alt="image"><br><br>  Il n'y a que deux fichiers.  Le r√©viseur ne doit v√©rifier que le nouveau design.  Si tout est en ordre - merzhim. <br><br><h3>  2. L'√©tape suivante consiste √©galement √† refactoriser, nous d√©pla√ßons simplement les deux classes vers un nouvel espace de noms </h3><br><img src="https://habrastorage.org/webt/ts/oz/wc/tsozwcmiscduh_kuxl0faixxa_c.gif" alt="image"><br><br>  Une telle demande de pool est assez simple √† v√©rifier, elle peut √™tre instanci√©e imm√©diatement. <br><br><h3>  3. Retrait des blocs de quai en exc√®s </h3><br><img src="https://habrastorage.org/webt/hb/gb/-q/hbgb-qzdyajjvwh0pb2ifizephq.gif" alt="image"><br><br>  Rien d'int√©ressant ici.  Merzhim. <br><br><h3>  4. La fonctionnelle elle-m√™me </h3><br><img src="https://habrastorage.org/webt/mj/32/i_/mj32i_k_kskqinnkqyngw1rzzck.gif" alt="image"><br><br>  Et maintenant, la demande de pool avec des modifications fonctionnelles ne contient que le code souhait√©.  Votre r√©viseur ne peut donc se concentrer que sur cette t√¢che.  La demande de piscine est petite et facile √† v√©rifier. <br><br><h2>  Conclusion </h2><br>  <b>R√®gle g√©n√©rale:</b> <br><blockquote>  Ne cr√©ez pas d'√©normes demandes de pool avec des cat√©gories mixtes de modifications. </blockquote>  Plus la demande de pool est grande, plus il est difficile pour le r√©viseur de comprendre les changements que vous avez propos√©s.  Tr√®s probablement, une √©norme demande de pool avec des centaines de lignes de code sera rejet√©e.  Au lieu de cela, divisez-le en petites parties logiques.  Si votre refactoring est en ordre, mais que les modifications fonctionnelles contiennent des erreurs, le refactoring peut √™tre facilement retenu, et vous et votre r√©viseur pouvez donc vous concentrer sur la fonctionnalit√© sans regarder tout le code depuis le tout d√©but. <br><br>  Et suivez toujours ces √©tapes avant d'envoyer la demande de pool: <br><br><ul><li>  Optimisez votre code pour la lecture.  Le code est beaucoup plus lisible qu'√©crit; </li><li>  D√©crire les changements propos√©s afin de fournir le contexte n√©cessaire √† leur compr√©hension; </li><li>  v√©rifiez toujours votre code avant de cr√©er une demande de pool.  Et faites-le comme si c'√©tait le code de quelqu'un d'autre.  Parfois, il est utile de trouver quelque chose que vous avez manqu√©.  Cela r√©duira la probabilit√© de rejet de votre demande de pool et le nombre de corrections. </li></ul><br>  Mon coll√®gue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Oleg Antonevich</a> m'a parl√© de l'id√©e de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">diviser</a> les changements en cat√©gories. <br><br>  <i>De l'√©diteur: Sergey √©crit beaucoup de choses int√©ressantes sur la programmation et PHP, et parfois nous traduisons quelque chose: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un serveur vid√©o en streaming</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">rendant des fichiers HTML</a> .</i>  <i>N'h√©sitez pas √† lui poser des questions dans les commentaires de cet article - il vous r√©pondra!</i> <i><br><br></i>  <i>Eh bien, rappelez-vous √©galement que nous avons toujours <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">beaucoup de postes vacants int√©ressants</a> pour les d√©veloppeurs!</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443402/">https://habr.com/ru/post/fr443402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443392/index.html">Historique de sauvegarde du jeu: des mots de passe sur papier aux nuages</a></li>
<li><a href="../fr443394/index.html">La version exp√©rimentale de Blazor 0.9.0 est maintenant disponible</a></li>
<li><a href="../fr443396/index.html">Impression 3D et airsoft: comment j'ai imprim√© ¬´drive¬ª</a></li>
<li><a href="../fr443398/index.html">Impl√©mentation de l'ERP dans les entreprises industrielles: Alevtina Svetozarovna et Excel contre les architectes s√©v√®res et l'usine anglaise</a></li>
<li><a href="../fr443400/index.html">Compter les bogues dans la calculatrice Windows</a></li>
<li><a href="../fr443404/index.html">Nouvel objectif de la NASA pour la recherche de civilisations extraterrestres: les signes technologiques</a></li>
<li><a href="../fr443406/index.html">Les 20 principales erreurs lors de l'utilisation du multithreading en C ++ et les moyens de les √©viter</a></li>
<li><a href="../fr443408/index.html">Photons, quanta et √©tat de Fock: manipulations au niveau quantique avec un r√©sonateur radiofr√©quence</a></li>
<li><a href="../fr443412/index.html">Pourquoi les programmeurs continuent d'utiliser Java verbeux, bien qu'il existe un Python concis</a></li>
<li><a href="../fr443414/index.html">Panneau: quand les points d'arr√™t ne suffisent pas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>