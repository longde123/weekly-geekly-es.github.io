<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéÖüèª ‚ôëÔ∏è ‚ò∫Ô∏è Uso de Golang para crear microservicios en The Economist: una retrospectiva üèúÔ∏è üöµüèæ üßóüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! Ya el 28 de mayo, estamos lanzando el primer grupo en el curso para desarrolladores de Golang . Y hoy compartimos con ustedes la primera...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Uso de Golang para crear microservicios en The Economist: una retrospectiva</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/451760/">  Hola a todos!  Ya el 28 de mayo, estamos lanzando el primer grupo en el curso para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">desarrolladores de Golang</a> .  Y hoy compartimos con ustedes la primera publicaci√≥n dedicada al lanzamiento de este curso.  Vamos <br><br><img src="https://habrastorage.org/webt/3r/wa/jy/3rwajyps3se5vmahtiv_ioninq0.png"><br><br>  <b>Extractos clave</b> <br><br><ul><li>  The Economist necesitaba m√°s flexibilidad para distribuir contenido a un canal digital cada vez m√°s diverso.  Para lograr este objetivo y mantener un alto nivel de rendimiento y fiabilidad, la plataforma ha pasado de una arquitectura monol√≠tica a una de microservicio. </li><li>  Las herramientas escritas en Go fueron un componente clave del nuevo sistema que permiti√≥ a The Economist proporcionar servicios escalables de alto rendimiento y crear r√°pidamente nuevos productos. </li><li>  Go, dirigido a la concurrencia y el soporte API, junto con su construcci√≥n de un lenguaje compilado est√°tico, facilit√≥ el desarrollo de sistemas de procesamiento de eventos distribuidos que podr√≠an escalar.  El soporte de prueba tambi√©n fue una ventaja. </li><li>  En general, la experiencia del equipo de The Economist con Go fue positiva, y este fue uno de los factores decisivos que ayud√≥ a escalar la Plataforma de contenido. </li><li>  Ir no siempre ser√° una herramienta adecuada, y esto es normal.  The Economist tiene una plataforma pol√≠glota y usa diferentes idiomas donde tiene sentido. </li></ul><a name="habracut"></a><br>  Me un√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">al</a> equipo de desarrollo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">The Economist</a> como desarrollador de Drupal.  Sin embargo, mi verdadera tarea era participar en un proyecto que cambiar√≠a fundamentalmente la tecnolog√≠a de entrega de contenido de Economist.  Los primeros meses que pas√© estudiando Go, varios meses trabajando con un consultor externo para crear un MVP (producto m√≠nimo viable), y luego me un√≠ al equipo nuevamente para supervisar su inmersi√≥n en Go. <br>  Este cambio en la tecnolog√≠a fue provocado por la misi√≥n de The Economist de expandir su audiencia digital, ya que el consumo de noticias se alej√≥ de los medios impresos.  The Economist necesitaba m√°s flexibilidad para entregar contenido a canales digitales cada vez m√°s diversos.  Para lograr este objetivo y mantener un alto nivel de rendimiento y fiabilidad, la plataforma ha pasado de una arquitectura monol√≠tica a una de microservicio.  Las herramientas escritas en Go fueron un componente clave del nuevo sistema, que permiti√≥ a The Economist proporcionar servicios escalables de alto rendimiento y crear r√°pidamente nuevos productos. <br><br>  Implementaci√≥n de Go in The Economist: <br><br><ul><li>  Permiti√≥ a los ingenieros desarrollar e implementar r√°pidamente nuevas funcionalidades. </li><li>  Mejores pr√°cticas aprobadas para servicios que fallan r√°pidamente con manejo inteligente de errores. </li><li>  Proporcion√≥ soporte confiable para concurrencia y operaci√≥n de red en un sistema distribuido. </li><li>  Mostr√≥ una falta de madurez y apoyo en algunas √°reas necesarias para el contenido y los medios. </li><li>  Facilit√≥ una plataforma que podr√≠a escalar para la publicaci√≥n digital. </li></ul><br>  <b>¬øPor qu√© The Economist eligi√≥ Go?</b> <br><br>  Para responder a esta pregunta, ser√° √∫til resaltar la arquitectura general de la nueva plataforma.  La plataforma, denominada Plataforma de contenido, es un sistema de manejo de eventos.  Responde a eventos de diferentes plataformas de creaci√≥n de contenido y lanza una secuencia de procesos ejecutados en microservicios que funcionan por separado.  Estos servicios realizan funciones como estandarizar datos, analizar etiquetas sem√°nticas, indexar en ElasticSearch y enviar contenido a plataformas externas como Apple News o Facebook.  La plataforma tambi√©n tiene una API RESTful, que en combinaci√≥n con GraphQL es el principal punto de entrada para clientes y productos front-end. <br><br>  Al desarrollar una arquitectura com√∫n, el equipo investig√≥ qu√© idiomas ser√≠an apropiados para la plataforma.  Go ha sido comparado con Python, Ruby, Node, PHP y Java.  Si bien cada idioma tiene sus propias fortalezas, Go se adapta mejor a la arquitectura de la plataforma.  Go, dirigido a la concurrencia y el soporte API, junto con su construcci√≥n de un lenguaje compilado est√°tico, facilit√≥ el desarrollo de sistemas de procesamiento de eventos distribuidos que podr√≠an escalar.  Adem√°s, la sintaxis relativamente simple de Go facilit√≥ involucrarse en el desarrollo y comenzar a escribir c√≥digo de trabajo, lo que prometi√≥ beneficios inmediatos para un equipo que experimenta una transici√≥n tecnol√≥gica tan grande.  En general, se determin√≥ que Go es el lenguaje m√°s adecuado para la usabilidad y eficiencia en un sistema de nube distribuida. <br><br>  <b>Tres a√±os despu√©s: ¬øGo encaj√≥ con estos ambiciosos objetivos?</b> <br><br>  Algunos elementos de dise√±o de la plataforma estaban bien alineados con el lenguaje Go.  Failing Fast fue una parte cr√≠tica del sistema porque consist√≠a en servicios independientes distribuidos.  De acuerdo con los principios de la aplicaci√≥n Twelve-Factor ("aplicaci√≥n de 12 factores"), la aplicaci√≥n tuvo que iniciarse r√°pida y r√°pidamente (falla r√°pida).  El dise√±o de Go como lenguaje compilado est√°tico proporciona tiempos de inicio r√°pidos, y el rendimiento del compilador mejora constantemente y nunca ha sido un problema para el dise√±o o la implementaci√≥n.  Adem√°s, el dise√±o de manejo de errores de Go permiti√≥ que las aplicaciones fallaran no solo m√°s r√°pido, sino tambi√©n de manera m√°s inteligente. <br><br>  <b>Manejo de errores</b> <br><br>  Una caracter√≠stica que los ingenieros notan r√°pidamente en Go es que es del tipo Error en lugar de un sistema de excepci√≥n.  En Go, todos los errores son valores.  El tipo de error est√° predefinido y es una interfaz.  Una interfaz en Go es esencialmente una colecci√≥n con nombre de m√©todos, y cualquier otro tipo de usuario puede satisfacer una interfaz si tiene los mismos m√©todos.  El tipo de error es una interfaz que puede describirse como una cadena. <br><br><pre><code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> error <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Error() <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> }</code> </pre> <br>  Esto brinda a los ingenieros m√°s control y funcionalidad en el manejo de errores.  Al agregar un m√©todo de error que devuelve una cadena en cualquier m√≥dulo de usuario, puede crear sus propios errores y generarlos, por ejemplo, utilizando la funci√≥n Nueva a continuaci√≥n, que proviene del paquete Errores. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> errorString <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { s <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e *errorString)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> es }</code> </pre> <br>  ¬øQu√© significa esto en la pr√°ctica?  En Go, las funciones permiten m√∫ltiples valores de retorno, por lo que si su funci√≥n puede no funcionar, lo m√°s probable es que devuelva un valor de error.  El lenguaje lo alienta a verificar expl√≠citamente los errores donde ocurren (en lugar de lanzar y atrapar una excepci√≥n), por lo que su c√≥digo generalmente debe incluir una marca "if err!  = Cero ".  Al principio, este frecuente manejo de errores puede parecer mon√≥tono.  Sin embargo, error como valor le permite usar Error para simplificar el manejo de errores.  Por ejemplo, en un sistema distribuido, puede implementar f√°cilmente intentos de reintentar consultas envolviendo errores. <br><br>  Los problemas de red siempre ocurrir√°n en el sistema, ya sea enviando datos a otros servicios internos o transfiri√©ndolos a herramientas de terceros.  Este ejemplo de paquete de red muestra c√≥mo puede usar el error como un tipo para distinguir los errores temporales de la red de los errores permanentes.  El equipo de The Economist utiliz√≥ un contenedor de errores similar para crear reintentos incrementales al enviar contenido a API externas. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> net <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Error <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { error Timeout() <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> <span class="hljs-comment"><span class="hljs-comment">// Is the error a timeout? Temporary() bool // Is the error temporary? } if nerr, ok := err.(net.Error); ok &amp;&amp; nerr.Temporary() { time.Sleep(1e9) continue } if err != nil { log.Fatal(err) }</span></span></code> </pre> <br>  Los autores de Go creen que no todas las excepciones son excepcionales.  Es m√°s probable que los ingenieros se recuperen de manera inteligente de los errores que bloqueen la aplicaci√≥n.  Adem√°s, el manejo de errores Go le permite controlar mejor los errores, lo que puede mejorar aspectos como la depuraci√≥n o la usabilidad de los errores.  Dentro de la Plataforma de contenido, esta caracter√≠stica de dise√±o de Go permiti√≥ a los desarrolladores tomar decisiones informadas con respecto a los errores, lo que condujo a un aumento en la confiabilidad del sistema en su conjunto. <br><br>  <b>Consistencia de datos</b> <br><br>  La consistencia de los datos es un factor cr√≠tico en la plataforma de contenido.  En The Economist, el contenido es la base del negocio, y el objetivo de la Plataforma de contenido es garantizar que el contenido se pueda publicar una vez y est√© disponible en todas partes.  Por lo tanto, es importante que cada producto y consumidor tenga consistencia de datos con la API de plataforma de contenido.  Los productos utilizan principalmente GraphQL para solicitudes de API, lo que requiere un esquema est√°tico, que sirve como una especie de contrato entre los consumidores y la plataforma.  El contenido procesado por la Plataforma debe ser coherente con este esquema.  El lenguaje est√°tico ayud√≥ a implementar esto y facilit√≥ la consistencia de los datos. <br><br>  <b>Prueba con Go</b> <br><br>  Otra caracter√≠stica que promueve la coherencia es el conjunto de pruebas Go.  El r√°pido tiempo de compilaci√≥n de Go, combinado con pruebas de primera clase como una caracter√≠stica del lenguaje, permiti√≥ al equipo incorporar m√©todos de prueba efectivos en los flujos de trabajo de dise√±o y fallas r√°pidas en las tuber√≠as de ensamblaje.  Las herramientas de prueba de Go facilitan la configuraci√≥n y la ejecuci√≥n.  La ejecuci√≥n de "ir a prueba" ejecutar√° todas las pruebas en el directorio actual, y el comando de prueba tiene varios indicadores √∫tiles.  La bandera de portada proporciona un informe detallado de cobertura de c√≥digo.  La prueba de banco ejecuta pruebas de referencia, que se indican ejecutando el nombre de la funci√≥n de prueba con la palabra "Banco" en lugar de "Prueba".  La funci√≥n TestMain proporciona m√©todos para la configuraci√≥n de prueba adicional, como un servidor de autenticaci√≥n ficticio. <br><br>  Adem√°s, Go tiene la capacidad de crear pruebas tabulares con estructuras an√≥nimas y ap√©ndices con interfaces, mejorando la cobertura de las pruebas.  Aunque las pruebas no son nuevas en t√©rminos de caracter√≠sticas del lenguaje, Go facilita la creaci√≥n de pruebas robustas y las integra f√°cilmente en los flujos de trabajo.  Desde el principio, los ingenieros de The Economist pudieron ejecutar pruebas como parte de las tuber√≠as de ensamblaje sin una configuraci√≥n especial, e incluso agregaron Git Hooks para ejecutar pruebas antes de insertar c√≥digo en Github. <br><br>  Sin embargo, el proyecto no estuvo exento de esfuerzos para lograr la coherencia de los datos.  El primer problema importante para la plataforma fue administrar el contenido din√°mico de backends impredecibles.  La plataforma consume contenido de los sistemas CMS originales principalmente a trav√©s de puntos finales JSON, donde la estructura y los tipos de datos no est√°n garantizados.  Esto significa que la plataforma no puede usar el paquete Go est√°ndar para interpretar json, que admite la deserializaci√≥n de JSON en estructuras, pero suena una alarma si los tipos de los campos de estructura y datos de entrada no coinciden. <br><br>  Para superar este problema, se requer√≠a un m√©todo especial para asignar la parte del servidor al formato est√°ndar.  Despu√©s de varias iteraciones del enfoque elegido, el equipo introdujo su propio proceso de deserializaci√≥n.  Aunque este enfoque fue un poco como reelaborar un paquete de biblioteca est√°ndar, les dio a los ingenieros un control completo sobre el procesamiento de los datos de origen. <br><br>  <b>Soporte de red</b> <br><br>  La escalabilidad estuvo a la vanguardia de la nueva plataforma, y ‚Äã‚Äãesto fue proporcionado por las bibliotecas est√°ndar de Go para redes y API.  En Go, puede implementar r√°pidamente puntos finales HTTP escalables sin la necesidad de marcos.  En el siguiente ejemplo, el paquete de biblioteca est√°ndar net / http se usa para configurar un controlador que acepte un escritor de solicitud y respuesta.  Cuando la API de la plataforma de contenido se implement√≥ por primera vez, utiliz√≥ el marco de la API.  Finalmente fue reemplazado por una biblioteca est√°ndar, ya que el equipo reconoci√≥ que satisface todas sus necesidades de red sin compromisos adicionales innecesarios.  Los manejadores HTTP de Golang se escalan porque cada solicitud al manejador se ejecuta en paralelo en Goroutine, un hilo ligero sin necesidad de personalizaci√≥n. <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"net/http"</span></span> ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handler</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span></span> { fmt.Fprintf(w, <span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { http.HandleFunc(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, handler) log.Fatal(http.ListenAndServe(<span class="hljs-string"><span class="hljs-string">":8080"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>)) }</code> </pre> <br>  <b>Modelo de concurrencia</b> <br><br>  El modelo de concurrencia Go ha proporcionado m√∫ltiples beneficios para mejorar el rendimiento en toda la plataforma.  Trabajar con datos distribuidos implica quejarse con las garant√≠as prometidas a los consumidores.  Seg√∫n el teorema de CAP, no es posible proporcionar m√°s de dos de las siguientes tres garant√≠as al mismo tiempo: Consistencia de datos.  Disponibilidad  Resistente a la separaci√≥n.  En la plataforma Economist, la coherencia se adopt√≥ en √∫ltima instancia, lo que significa que la lectura de las fuentes de datos ser√° en √∫ltima instancia coherente, y son aceptables retrasos moderados en todas las fuentes de datos que alcanzan un estado coherente.  Una forma de minimizar esta brecha es usar Goroutines. <br><br>  Las goroutines son subprocesos livianos administrados por el tiempo de ejecuci√≥n Go para evitar que se queden sin subprocesos.  Goroutines permiti√≥ optimizar tareas asincr√≥nicas en la plataforma.  Por ejemplo, uno de los almacenes de datos de la Plataforma es Elasticsearch.  Cuando el contenido se actualiza en el sistema, el contenido que hace referencia a este elemento en Elasticsearch se actualiza y reindexa.  Gracias a la implementaci√≥n de Goroutines, se redujo el tiempo de procesamiento, lo que garantiz√≥ la r√°pida consistencia de los elementos.  Este ejemplo muestra c√≥mo los elementos que son adecuados para el reprocesamiento se reprocesan en Goroutine. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reprocess</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(searchResult *http.Response)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { responses := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>([]response, <span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(searchResult.Hits)) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wg sync.WaitGroup wg.Add(<span class="hljs-built_in"><span class="hljs-built_in">len</span></span>(responses)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i, hit := <span class="hljs-keyword"><span class="hljs-keyword">range</span></span> searchResult.Hits { wg.Add(<span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">go</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">, item elastic.SearchHit)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">defer</span></span> wg.Done() code, err := reprocessItem(item) responses[i].code = code responses[i].err = err }(i, *hit) } wg.Wait <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> http.StatusOK, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br>  Dise√±ar sistemas es m√°s que solo programar.  Los ingenieros necesitan comprender qu√© herramientas, d√≥nde y cu√°ndo son apropiadas.  Si bien Go era una herramienta poderosa para la mayor√≠a de las necesidades de la plataforma de contenido de The Economist, algunas limitaciones requer√≠an otras soluciones. <br><br>  <b>Gesti√≥n de dependencias</b> <br><br>  Cuando se lanz√≥ Go, no ten√≠a un sistema de gesti√≥n de dependencias.  Dentro de la comunidad, se han desarrollado varias herramientas para satisfacer esta necesidad.  The Economist us√≥ subm√≥dulos Git, lo que ten√≠a sentido en un momento en que la comunidad promov√≠a activamente una herramienta est√°ndar de gesti√≥n de dependencias.  Hoy, aunque la comunidad ya est√° mucho m√°s cerca de un enfoque coherente para la gesti√≥n de la dependencia, no est√° all√≠.  El enfoque de The Economist usando subm√≥dulos no plante√≥ problemas serios, pero fue dif√≠cil para otros desarrolladores de Go, y esto debe tenerse en cuenta al cambiar a Go. <br><br>  Tambi√©n hab√≠a requisitos de plataforma para los cuales las caracter√≠sticas o el dise√±o de Go no eran la mejor soluci√≥n.  Debido a que la plataforma agreg√≥ soporte para el procesamiento de audio, las herramientas de Go para extraer metadatos eran limitadas en ese momento, por lo que el equipo eligi√≥ Exiftool Python.  Los servicios de plataforma funcionan en contenedores acoplables, lo que permiti√≥ instalar Exiftool y ejecutarlo desde la aplicaci√≥n Go. <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runExif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args []</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([]</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params">, error)</span></span></span></span> { cmdOut, err := exec.Command(<span class="hljs-string"><span class="hljs-string">"exiftool"</span></span>, args...).Output() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> err != <span class="hljs-literal"><span class="hljs-literal">nil</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, err } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cmdOut, <span class="hljs-literal"><span class="hljs-literal">nil</span></span> }</code> </pre> <br>  Otro escenario com√∫n para la plataforma es la recepci√≥n de c√≥digo HTML que no funciona desde los sistemas de CMS de origen, el an√°lisis del c√≥digo HTML para la correcci√≥n y la sanci√≥n del c√≥digo HTML.  Inicialmente, Go se us√≥ para este proceso, pero como la biblioteca HTML est√°ndar de Go requiere HTML correcto, requer√≠a una gran cantidad de c√≥digo personalizado para analizar HTML antes de procesarlo.  Este c√≥digo r√°pidamente se volvi√≥ fr√°gil y perdi√≥ casos l√≠mite, por lo que se implement√≥ una nueva soluci√≥n en Javascript.  Javascript ha proporcionado una gran flexibilidad y adaptabilidad para controlar el proceso de verificaci√≥n y desinfecci√≥n de HTML. <br><br>  Javascript tambi√©n ha sido una opci√≥n com√∫n para filtrar y enrutar eventos en la Plataforma.  Los eventos se filtran con AWS Lambdas, que son funciones livianas que solo se ejecutan cuando se llama.  Un caso de uso es el filtrado de eventos en diferentes bandas, como r√°pido y lento.  Este filtrado se basa en un √∫nico campo de metadatos en el objeto JSON del shell del controlador de eventos.  La implementaci√≥n de filtrado utiliz√≥ un paquete de puntero Javascript JSON para capturar un elemento en un objeto JSON.  Este enfoque fue mucho m√°s eficiente en comparaci√≥n con desmontar completamente el JSON que Go necesitar√≠a.  Si bien se pod√≠a lograr una funcionalidad de este tipo con Go, usar Javascript fue m√°s f√°cil para los ingenieros y proporcion√≥ lambdas m√°s simples. <br><br>  <b>Ir retrospectiva</b> <br><br>  Despu√©s de implementar la Plataforma de contacto y apoyarla en la producci√≥n, si tuviera que realizar una retrospectiva de Go y la Plataforma de contenido, mis comentarios ser√≠an los siguientes: <br><br>  ¬øQu√© es bueno ya? <br><br><ul><li>  Elementos de dise√±o de lenguaje clave para sistemas distribuidos. </li><li>  Un modelo de concurrencia que es relativamente f√°cil de implementar. </li><li>  Buena codificaci√≥n y comunidad divertida. </li></ul><br>  ¬øQu√© se puede mejorar? <br><br><ul><li>  Mayor avance en los est√°ndares de control de versiones y venta. </li><li>  Falta de madurez en algunas √°reas. </li><li>  Detalles para casos de usuarios espec√≠ficos. </li></ul><br>  En general, fue una experiencia positiva, y Go es uno de los elementos m√°s importantes que permiti√≥ escalar la Plataforma de contenido.  Ir no siempre ser√° una herramienta adecuada, y esto es normal.  The Economist tiene una plataforma pol√≠glota y usa diferentes idiomas donde tiene sentido.  Ir probablemente nunca ser√° la mejor opci√≥n cuando necesite meterse con objetos de texto y contenido din√°mico, por lo que Javascript todav√≠a est√° en la caja de herramientas.  Sin embargo, las fortalezas de Go son la base que permite que el sistema escale y crezca. <br>  Al considerar si Go es adecuado para usted, tenga en cuenta las cuestiones clave del dise√±o del sistema: <br><br><ul><li>  ¬øCu√°les son las tareas de su sistema? </li><li>  ¬øQu√© garant√≠as ofrecen a sus consumidores? </li><li>  ¬øQu√© arquitectura y patrones son apropiados para su sistema? </li><li>  ¬øC√≥mo deber√≠a escalar su sistema? </li></ul><br>  Si est√° desarrollando un sistema que aborde los desaf√≠os de los datos distribuidos, los flujos de trabajo as√≠ncronos y el alto rendimiento y la escalabilidad, le recomiendo que considere Go y sus capacidades para acelerar los objetivos de su sistema. <br><br>  Amigos, estamos esperando sus comentarios e invitamos a todos al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">seminario web abierto</a> , que tendr√° lugar el d√≠a 16 el desarrollador senior de Yandex y, en combinaci√≥n, nuestro maestro es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dmitry Smal</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/451760/">https://habr.com/ru/post/451760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../451748/index.html">Supervisi√≥n del estado de SSD en matrices Qsan</a></li>
<li><a href="../451750/index.html">Libro "Elasticsearch, Kibana, Logstash y los motores de b√∫squeda de la pr√≥xima generaci√≥n"</a></li>
<li><a href="../451752/index.html">30 aniversario de la inseguridad desenfrenada</a></li>
<li><a href="../451754/index.html">C√≥mo encontramos expresiones lambda en IntelliJ IDEA</a></li>
<li><a href="../451758/index.html">Enlaces adicionales en la arquitectura l√≥gica del sistema Intel C620</a></li>
<li><a href="../451766/index.html">Heisenbug 2019 Piter: lo que suceder√° en la transmisi√≥n gratuita y qu√© solo en el evento</a></li>
<li><a href="../451768/index.html">Mejorando el trabajo de Wi-Fi. Principios generales y cosas √∫tiles.</a></li>
<li><a href="../451770/index.html">Veeam Backup & Replication: consejos √∫tiles para hacer viables las copias de seguridad y r√©plicas</a></li>
<li><a href="../451772/index.html">¬øQu√© tiene de especial Cloudera y c√≥mo cocinarlo?</a></li>
<li><a href="../451776/index.html">¬øC√≥mo programo motores de juego de roles en Hojas de c√°lculo de Google</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>