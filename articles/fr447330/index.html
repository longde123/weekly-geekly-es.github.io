<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📞 🧑🏽‍🤝‍🧑🏽 🐋 C'était le soir, il n'y avait rien à faire, ni comment installer Gentoo sans clavier 👇 👩🏼‍🤝‍👨🏽 🔇</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Une histoire humoristique basée sur des événements réels. 





 Ce fut une soirée ennuyeuse. Ma femme n'est pas à la maison, l'alcool est fini, DotA ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C'était le soir, il n'y avait rien à faire, ni comment installer Gentoo sans clavier</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447330/"><p>  <i>Une histoire humoristique basée sur des événements réels.</i> </p><br><p><img src="https://habrastorage.org/webt/3w/qm/rs/3wqmrsuo0rbna6-uptn-ps4suqa.jpeg" alt="Installer Gentoo"></p><br><p>  Ce fut une soirée ennuyeuse.  Ma femme n'est pas à la maison, l'alcool est fini, DotA n'est pas connecté.  Que faire dans cette situation?  Bien sûr, récupérez Gentoo !!! </p><br><p>  Commençons donc! </p><a name="habracut"></a><br><p>  Éléments fournis <b>: un</b> ancien serveur avec 2 Go de RAM, AMD Athlon Dual, deux disques durs de 250 Go, l'un d'eux a un système et une batterie BIOS qui ne fonctionne pas.  Également Sony Bravia TV avec entrée VGA et souris.  Ainsi qu'un routeur Wi-Fi et un ordinateur portable fonctionnel avec Manjaro Arch Linux et l'environnement i3. </p><br><p>  <b>Requiert:</b> installez Gentoo. </p><br><p>  <b>Jour 1</b> </p><br><p>  <b>21:00 Je</b> sors du placard un vieux servachek poussiéreux.  De là, je reçois une boîte avec des fils et d'autres déchets et une vieille télé (une armoire dans le couloir est grande, tout y va exactement).  Je fouille dans une boîte, démêle les fils, récupère un cordon de raccordement, un câble VGA, une souris, un câble d'alimentation et un jeu de tournevis (j'en ai soudainement besoin). </p><br><p>  <b>21:15</b> Je commence à regarder tout cela et à réfléchir à la question: "Comment faire cela?"  Après tout, l'attribut principal pour installer Gentoo - le clavier, je ne l'avais pas! </p><br><p>  <b>21:20</b> Je pense: «Et si vous retirez la vis du serveur, la branchez sur le port USB et déployez le système dessus?  Pas casher, il faut récupérer le core sur le même matériel ... ".  Pendant que je pensais à cette option, j'ai réussi à retirer la vis et à la mettre dans le support, mais quand j'ai tordu le dernier boulon dans la boîte, j'ai décidé que cela ne marcherait pas! </p><br><p>  <b>21:30</b> J'ai dévissé les boulons, mis la vis en place dans le serveur.  Je réfléchis plus loin: «Il n'y a qu'une seule option - l'accès SSH.  Peut-être existe-t-il un tel LiveUSB avec sshd déjà en cours d'exécution? » </p><br><p>  <b>21:35 Je</b> vais sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site officiel de Gentoo</a> .  Je télécharge l'habitude «CD d'installation minimale».  Je l'annule.  Sans clavier, c'est un nombre mort!  Vous trouverez ci-dessous un lien vers l'ISO hybride (LiveDVD).  Ouais, je pense, tout y est!  Je télécharge et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">déploie sur une clé USB</a> . </p><br><p>  <b>21:50 J'apporte</b> le serveur, la télé, les fils, la souris de la cuisine, où mes pensées et mes préparatifs ont eu lieu, dans une pièce d'angle éloignée.  Le serveur est bruyant comme un aspirateur industriel, donc le policier viendrait certainement le visiter!  Tous connectés et ont démarré la voiture. </p><br><p>  <b>22:00</b> L'OS précédent est en cours de chargement!  J'éteins le serveur et commence à penser: "La batterie est morte, vous n'avez pas besoin d'aller dans le BIOS (il n'y a pas de clavier), mais vous devez démarrer à partir du lecteur flash à tout prix!"  Je démonte le serveur, désactive une vis.  Je démarre.  L'OS précédent est en cours de chargement!  Revissez la vis, éteignez l'autre!  Ça marche! </p><br><p>  <b>22:10</b> Et voici l'écran tant attendu pour choisir l'option de démarrage à partir de LiveUSB!  Le temps restant jusqu'à la sélection automatique de la première option de démarrage s'exécute, "Maintenant, tout sera, il suffit d'attendre un peu", je me réjouis!  Les précieuses 30 secondes passent, l'écran devient vierge et rien ne se passe.  "D'accord, pendant que je charge, je vais fumer ...", décida de faire une pause et de faire une pause de ce bruit. </p><br><p>  <b>22:15 Je</b> rentre dans la "salle du bruit".  L'écran est noir et rien ne se passe non plus!  "Étrange ...", pensai-je, "En tout cas, il aurait déjà été chargé!".  Soit dit en passant, tout est aggravé par le fait que ma télé ne montre pas toujours ce qui se passe à l'écran, elle ne perçoit pas certains modes et refuse de diffuser une image de ce qui se passe ... Je redémarre le serveur.  Je suis assis, à regarder ... Encore un écran noir, tout de même.  Eh bien, j'ai paniqué et j'ai commencé à piquer sur les boutons de la souris ... Et, oh mon Dieu, il s'est allumé et le téléchargement s'est poursuivi.  Plus tard, j'ai découvert que le téléchargement ne se poursuit qu'après avoir cliqué sur le petit bouton de cette souris miracle!  Ne soyez pas ce bouton, Dieu sait comment se terminerait cette soirée!?  Après tout, l'objectif est fixé et nous devons l'atteindre de toute façon! <br><br></p><div class="spoiler">  <b class="spoiler_title">Photo de souris</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/a_/7s/ip/a_7sip3elz7_mefafsfyviemfdo.jpeg" alt="la souris"></div></div><br><p>  <b>22:20</b> Ça résonne dans mes oreilles, mais je continue d'aller vers mon objectif!  Gentoo a démarré!  Les couleurs sont agréables à l'oeil!  Une souris marche autour de l'écran!  Et ci-dessous, il dit "Aucun mot de passe nécessaire pour la connexion", c'est juste bien, car je n'ai pas de clavier!  Il y a deux champs à l'écran: le choix de l'environnement de travail et du mot de passe, enfin, et le bouton de connexion.  Le LiveDVD de Gentoo offre une sélection assez étendue d'environnements, notamment Fluxbox, Openbox, rat (xfce), plasma, etc.  Option avec le choix du "rat", il me semblait, un excellent choix!  J'entre dans l'environnement de travail du "rat".  Super!  Il y a un terminal, mais pourquoi en ai-je besoin, je n'ai pas de clavier! <br><br></p><div class="spoiler">  <b class="spoiler_title">Écran de connexion</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/37/f2/-z/37f2-ztfk37073tz0wjxidonmv8.jpeg" alt="Écran de connexion"><img src="https://habrastorage.org/webt/n4/7b/tq/n47btq6mm-fwpqhzlxgfhlr7fus.jpeg" alt="Choix de l'environnement"></div></div><br><p>  <b>22:25</b> Je commence à chercher une sorte de clavier à l'écran ou quelque chose.  Trouvé uniquement "Carte des personnages".  "Eh bien, génial, ici, c'est ma sortie!" J'ai pensé.  Mais ça y était!  Vous pouvez coller le texte, copier, coller, mais comment appuyer sur <b>Entrée</b> !?  Permettez-moi de vous rappeler que la tâche consiste à démarrer sshd, ce qui revient à taper dans le terminal " <i>sudo /etc/init.d/sshd start</i> " et à appuyer sur le bouton <b>Entrée</b> , ce que je n'ai pas!  Que faire?  Mais il y a un moyen! </p><br><p>  <b>22:30</b> Temps de repos du bruit.  Je vais dans la cuisine et m'assois devant l'ordinateur portable.  Tous les terminaux, si vous collez le texte copié avec un saut de ligne, exécuteront la commande, car  percevoir le saut de ligne comme <b>Entrée</b> .  Alors, la solution est trouvée!  Vous devez télécharger la page HTML avec la commande et le fil de ligne sur Internet.  C'est du HTML, car, simple fichier texte, le navigateur s'ouvrira sur une seule ligne, "dévorant" toutes les transitions vers une nouvelle ligne.  Donc ma page ressemble à ceci: <br><br></p><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span>sudo /etc/init.d/sshd start<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  "1" est nécessaire pour que vous puissiez copier la transition vers une nouvelle ligne, sinon une seule ligne est copiée, combien de "br" ne sont pas définis.  Je télécharge le fichier sur un certain site en utilisant le lien " <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mydomen.ru/1.htm</a></i> ". <br><p>  <b>22:40 Je</b> rentre dans la "salle du bruit".  L'essentiel est d'avoir le temps de revenir avant d'activer l'économiseur d'écran qui, lorsque vous quittez, indique qu'il ne laissera pas l'ancienne version dans le système avec un mot de passe vide!  J'ouvre avec impatience le succès du navigateur et de la table des symboles!  Je tape " <i>mondomaine</i> ".  Vous cherchez un point ... </p><br><p>  <b>22:50 J'ai</b> trouvé un point!  Vous devez sélectionner le mode d'affichage "By Unicode Block".  Je compose l'adresse plus loin, l'avantage de «/» et les numéros ont été trouvés avec un point!  Je copie le texte, le colle dans la barre d'adresse, clique sur go.  En raison de la batterie morte du BIOS, l'heure dans le système est réglée sur "01.01.2002", et dans ces conditions, les certificats SSL ne fonctionnent pas! <br><br></p><div class="spoiler">  <b class="spoiler_title">Table de caractères</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/rr/7v/53/rr7v53bmdkemyj5ysl2e9zi5zla.jpeg" alt="Menu du mode d'affichage"><img src="https://habrastorage.org/webt/tz/id/mn/tzidmnqlvvmxwv-zvl5xvkh5fzi.jpeg" alt="Table de caractères"></div></div><br><p>  <b>23:00</b> Je suis dans la cuisine, au repos du bruit.  L'essentiel est de ne pas se reposer longtemps, sinon l'économiseur d'écran s'allumera!  Je configure NGINX pour télécharger mon fichier sans HTTPS à l'adresse " <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mydomain.ru/2.htm</a></i> ", car  l'ancienne adresse a été redirigée et mise en cache par le navigateur. </p><br><p>  <b>23:05</b> Je me repose un peu du bruit et dans l'attente du succès, je retaper le lien, car le bouton <b>Retour arrière</b> ne peut pas être émulé!  Eh bien, c'est pour rire, mais en fait je viens d'appuyer sur la table des symboles "2", sélectionnez, copiez et remplacez dans la barre d'adresse.  Allez!  "Vraiment!" J'ai pensé.  Avec fierté, je copie deux lignes de la page et les mets dans le terminal.  Le serveur SSH est en cours d'exécution, il est temps d'essayer de vous connecter en regardant l'adresse IP dans l'interface de gestion Web sur un routeur Wi-Fi!  En fait, non, c'est trop tôt!  Dommage, je ne l'ai pas compris tout de suite ... </p><br><p>  <b>23:15 Je</b> reviens à la "souris", en ajoutant une ligne à ce <br><br></p><pre> <code class="xml hljs">sudo passwd<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span>123<span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span>1</code> </pre> <br>  et mettre à jour le fichier HTML sur le serveur.  Heureusement, rien de plus pour entrer!  Je mets à jour la page.  Eh bien, selon l'ancien schéma, je copie les lignes sur le terminal pour exécuter « <i>sudo passwd</i> » et séparément deux fois pour entrer et répéter le mot de passe. <br><p>  <b>23:17</b> Connecté!  Maintenant, je n'ai pas peur de l'économiseur d'écran et du bruit! </p><br><p>  <b>01:00 A</b> propos du processus que j'ai suivi depuis le moment où la connexion ssh a été établie et jusqu'à présent, il existe une description détaillée dans de nombreuses sources, la plus complète est présentée dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">manuel Gentoo</a> .  J'ai compilé le noyau, installé grub et le noyau assemblé dedans.  Configurez le réseau et SSH sur le nouveau système.  Terminé, <i>redémarrez</i> ! </p><br><p>  <b>Jour 2 - jour de congé</b> </p><br><p>  <b>10:00 Je suis</b> retourné à ma tâche.  Allumé le serveur.  Rien ne se passe à l'écran, il n'y a pas de serveur sur le réseau!  Pensé des problèmes de réseau.  Après avoir démarré à partir de LiveDVD, j'ai configuré le réseau, mais cela n'a pas aidé ... </p><div class="spoiler">  <b class="spoiler_title">Lors du démarrage du serveur, sur mon ancien téléviseur</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/bv/m-/0i/bvm-0iobgk9n1q3tpvrmkhryaw0.jpeg" alt="image"></div></div><br><p>  <b>10h30</b> Décidé qu'il serait bien d'étudier les journaux de téléchargement.  Il n'y a pas de journaux!  "Ouais, alors il n’a pas fallu charger le système!  Mais qu'est-ce qui est écrit sur l'écran? »Ai-je pensé.  Après avoir réfléchi un peu aux raisons pour lesquelles le téléviseur n'affiche rien, émettez l'hypothèse qu'il ne peut pas afficher la résolution dans laquelle se trouve la sortie de la console.  Sur l'écran, en effet, il est écrit ... </p><br><p>  <b>11:00</b> J'ai changé les paramètres de GRUB en sortie 640x480.  Ça a aidé.  Il dit "Chargement de Linux 4.19.27-gentoo-r1 ...".  Il s'est avéré qu'il a foiré lors de l'assemblage du noyau. </p><br><p>  <b>11:30</b> Je mets genkernel, avec un réglage manuel du noyau que j'expérimenterai plus tard.  Pas réglé!  Il s'avère un jambage avec une date.  Il est préférable de le mettre à jour à chaque démarrage, cela dépend beaucoup de cette date.  Je le mettrais dans le BIOS, mais pour cela, j'ai besoin d'un clavier ... Je change la date pour la date actuelle. </p><br><p>  <b>14:00</b> Hourra!  Le noyau a compilé!  Rempli le noyau dans le chargeur de démarrage, redémarré.  Enfin ça a marché! </p><br><p>  Le premier objectif est atteint! </p><br><p>  De plus, je vais mettre le deuxième disque dur CentOS également sans clavier, mais déjà d'un gentil!  Mais j'écrirai à ce sujet dans la deuxième partie.  Dans la troisième partie, je vais effectuer des tests de charge d'un serveur Web avec une application simple sur ces deux systèmes et comparer RPS. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447330/">https://habr.com/ru/post/fr447330/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447318/index.html">Gadgets d'un marché aux puces: pourquoi acheter un ordinateur portable Packard Bell de 20 ans pour 10 euros</a></li>
<li><a href="../fr447322/index.html">Principes de construction d'une API REST JSON</a></li>
<li><a href="../fr447324/index.html">Comment l'ordinateur fonctionne à l'intérieur de Hayabusa-2, qui a largué une bombe sur Ryuga. Et des photos de ses développeurs</a></li>
<li><a href="../fr447326/index.html">Fractales en nombre irrationnel. 2e partie</a></li>
<li><a href="../fr447328/index.html">Habro suicide. La douleur de la planification en 1C</a></li>
<li><a href="../fr447334/index.html">Un exemple de stratégie de contenu pour la promotion d'un magasin de pièces d'armes en ligne</a></li>
<li><a href="../fr447336/index.html">Surveillance des ressources du cluster Kubernetes</a></li>
<li><a href="../fr447338/index.html">Stage d'été Intel 0x7E3 en attente des étudiants</a></li>
<li><a href="../fr447342/index.html">Pyramides non-Mars: étude de la forme des amas nanocristallins sous une couche de graphène</a></li>
<li><a href="../fr447344/index.html">Nouvelles fonctionnalités dans Webmaster</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>