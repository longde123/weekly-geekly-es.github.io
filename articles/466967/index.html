<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüé® üîá ‚ò¶Ô∏è Adivina si puedes: predecir la calificaci√≥n de una pel√≠cula antes de su lanzamiento üë©üèΩ‚Äçüíº üë©üèº‚Äçüî¨ ü•ö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recientemente me encontr√© con un conjunto de datos de Kaggle con datos sobre 45 mil pel√≠culas de Full MovieLens Dataset. Los datos conten√≠an no solo i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Adivina si puedes: predecir la calificaci√≥n de una pel√≠cula antes de su lanzamiento</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466967/"> Recientemente me encontr√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">con un conjunto</a> de datos de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Kaggle</a> con datos sobre 45 mil pel√≠culas de Full MovieLens Dataset.  Los datos conten√≠an no solo informaci√≥n sobre los actores, el equipo de filmaci√≥n, la trama, etc., sino tambi√©n las calificaciones presentadas por los usuarios de las pel√≠culas para pel√≠culas (26 millones de calificaciones de 270 mil usuarios). <br><br>  Una tarea est√°ndar para tales datos es un sistema de recomendaci√≥n.  Pero por alguna raz√≥n, se me ocurri√≥ <b>predecir la calificaci√≥n de una pel√≠cula en funci√≥n de la informaci√≥n disponible antes de su lanzamiento</b> .  No soy un gran conocedor del cine y, por lo tanto, generalmente me concentro en las cr√≠ticas, eligiendo qu√© ver en las noticias.  Pero los cr√≠ticos tambi√©n est√°n algo sesgados: ven muchas m√°s pel√≠culas diferentes que el espectador promedio.  Por lo tanto, parec√≠a interesante predecir c√≥mo la pel√≠cula ser√≠a apreciada por el p√∫blico en general. <a name="habracut"></a><br><br>  Entonces, el conjunto de datos contiene la siguiente informaci√≥n: <br><br><ul><li>  Informaci√≥n sobre la pel√≠cula: tiempo de estreno, presupuesto, idioma, empresa y pa√≠s de origen, etc.  Adem√°s de la calificaci√≥n promedio (y la pronosticaremos) </li><li>  Palabras clave (etiquetas) sobre la trama </li><li>  Nombres de actores y tripulantes </li><li>  Actualmente clasificaciones (estimaciones) </li></ul><br>  El c√≥digo utilizado en el art√≠culo (python) est√° disponible en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> . <br><br><h3>  Prefiltrado de datos </h3><br>  La matriz completa contiene datos sobre m√°s de 45 mil pel√≠culas, pero dado que la tarea es predecir la calificaci√≥n, debe asegurarse de que las calificaciones de una pel√≠cula en particular sean objetivas.  Por ejemplo, en el hecho de que mucha gente lo aprecia. <br><br>  La mayor√≠a de las pel√≠culas tienen muy pocas calificaciones: <br><br><img src="https://habrastorage.org/webt/zw/lt/df/zwltdfd2zu6q5a6i755zwybgs40.png" alt="imagen"><br><br>  Por cierto, la pel√≠cula con el mayor n√∫mero de clasificaciones (14075) me sorprendi√≥: esto es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Inception"</a> .  Pero los tres siguientes: "The Dark Knight", "Avatar" y "Avengers" parecen bastante l√≥gicos. <br><br>  Se espera que el n√∫mero de calificaciones y el presupuesto de la pel√≠cula est√©n interconectados (presupuesto m√°s bajo - calificaciones m√°s bajas).  Por lo tanto, la eliminaci√≥n de pel√≠culas con un peque√±o n√∫mero de clasificaciones hace que el modelo sesgado hacia pel√≠culas m√°s caras: <br><br><img src="https://habrastorage.org/webt/nr/cj/lx/nrcjlxju9-w96xuzpi6huitamei.png" alt="imagen"><br><br>  Dejamos para el an√°lisis de pel√≠culas con m√°s de 50 clasificaciones. <br><br>  Adem√°s, eliminaremos las pel√≠culas lanzadas antes del inicio del servicio de calificaci√≥n (1996).  Aqu√≠ el problema es que las pel√≠culas modernas se clasifican en promedio peor que las antiguas, simplemente porque entre las pel√≠culas antiguas ven y eval√∫an lo mejor, y entre las modernas es todo. <br><br>  Como resultado, la matriz final contiene alrededor de 6 mil pel√≠culas. <br><br><h3>  Caracter√≠sticas usadas </h3><br>  Utilizaremos varios grupos de caracter√≠sticas: <br><br><ul><li>  <b>Metadatos de</b> la pel√≠cula <b>:</b> si la pel√≠cula pertenece a la "colecci√≥n" (serie de pel√≠culas), pa√≠s de lanzamiento, compa√±√≠a fabricante, idioma de la pel√≠cula, presupuesto, g√©nero, a√±o y mes de lanzamiento de la pel√≠cula, su duraci√≥n </li><li>  <b>Palabras clave:</b> para cada pel√≠cula hay una lista de etiquetas que describen su trama.  Como hay muchas palabras, se procesaron de la siguiente manera: agrupadas en grupos de similitud (por ejemplo, accidente y accidente automovil√≠stico), en funci√≥n de estos grupos y palabras individuales, se realiz√≥ un an√°lisis de PCA y se seleccionaron los componentes m√°s importantes de sus resultados.  Esto redujo la dimensi√≥n del espacio de caracter√≠sticas. </li><li>  <b>"M√©ritos" anteriores de los actores que protagonizaron la pel√≠cula.</b>  Para cada actor, se form√≥ una lista de pel√≠culas en las que protagoniz√≥ anteriormente y se calcul√≥ la calificaci√≥n de estas pel√≠culas.  Entonces, para cada pel√≠cula se ha formado un indicador que agrega el √©xito de las pel√≠culas en las que los actores protagonizaron antes. </li><li>  <b>Oscar</b>  Si los actores, director, productor, guionista o camar√≥grafo participaron previamente en la pel√≠cula, que fue nominada o recibi√≥ un Oscar por la mejor pel√≠cula, direcci√≥n o gui√≥n, esto se tuvo en cuenta en el modelo.  Adem√°s, si los actores fueron nominados o ganadores del Premio de la Academia al Mejor Actor de Reparto o Rol de Reparto, esto tambi√©n se tuvo en cuenta.  Informaci√≥n sobre los Oscar recibida de Wikipedia. </li></ul><br><h4>  Algunas estad√≠sticas interesantes </h4><br>  <b>Las pel√≠culas documentales reciben las calificaciones m√°s altas.</b>  Esta es una buena raz√≥n para notar que diferentes pel√≠culas son evaluadas por diferentes personas, y si los documentales fueron calificados por aficionados a la acci√≥n, entonces los resultados podr√≠an ser diferentes.  Es decir, las estimaciones est√°n sesgadas debido a las preferencias iniciales del p√∫blico.  Pero para nuestra tarea esto no es importante, ya que queremos predecir una evaluaci√≥n no condicionalmente objetiva (como si cada espectador hubiera visto todas las pel√≠culas), es decir, la que el p√∫blico le dar√° a la pel√≠cula. <br><br>  Por cierto, es interesante que las pel√≠culas hist√≥ricas tengan una calificaci√≥n mucho m√°s baja que los documentales. <br><br><img src="https://habrastorage.org/webt/in/uh/v8/inuhv8hltyvmys4uqxpeec21540.png" alt="imagen"><br><br>  <b>Las calificaciones m√°s altas se otorgan a las pel√≠culas lanzadas en diciembre, septiembre y mayo.</b> <br><br>  Esto probablemente puede explicarse de la siguiente manera: <br><br><ul><li>  en diciembre, las compa√±√≠as lanzan las mejores pel√≠culas para recaudar taquilla durante las vacaciones de Navidad </li><li>  en septiembre, se estrenar√°n pel√≠culas que participar√°n en la lucha por el Oscar </li><li>  Mayo es el tiempo de lanzamiento de los √©xitos de taquilla de verano. </li></ul><br><img src="https://habrastorage.org/webt/2b/2c/yc/2b2cycuspiakfgv7ft3kvrdjjcg.png" alt="imagen"><br><br>  <b>La calificaci√≥n de la pel√≠cula depende poco del presupuesto</b> <br><br><img src="https://habrastorage.org/webt/9s/7q/2q/9s7q2qo7c1noal7j1lpoynwax8k.png" alt="imagen"><br>  Presupuesto cero para algunas pel√≠culas, probablemente sin datos <br><br>  <b>Las pel√≠culas m√°s cortas y m√°s largas mejor valoradas</b> <br><br><img src="https://habrastorage.org/webt/zl/gl/8u/zlgl8uepsad2ej3s8xubwlect68.png" alt="imagen"><br>  Para algunas pel√≠culas, se indica la duraci√≥n cero, probablemente sin datos <br><br><h3>  Resultados en diferentes conjuntos de caracter√≠sticas </h3><br>  Nuestra tarea - pronosticar la calificaci√≥n - la tarea de regresi√≥n.  Probaremos tres modelos: regresi√≥n lineal (como l√≠nea de base), SVM y XGB.  Como m√©trica de calidad, elegimos RMSE.  El gr√°fico a continuaci√≥n muestra los valores RMSE en el conjunto de validaci√≥n para diferentes modelos y diferentes conjuntos de caracter√≠sticas (quer√≠a entender si val√≠a la pena jugar con las palabras clave y con los Oscar).  Todos los modelos est√°n construidos con hiperpar√°metros b√°sicos. <br><br>  Como puede ver, XGB tiene el mejor resultado con un conjunto completo de caracter√≠sticas (metadatos de pel√≠cula + palabras clave + Oscar). <br><br><img src="https://habrastorage.org/webt/37/cj/fe/37cjfe-vet9nmvjcdzgtpsbfnjs.png" alt="imagen"><br><br>  Al ajustar los hiperpar√°metros, fue posible reducir el RMSE de 0.708 a 0.706 <br><br><h3>  An√°lisis de errores y comentarios finales. </h3><br>  Suponemos que los errores de menos del 5% son peque√±os (aproximadamente un tercio) y los errores de m√°s del 20% son grandes (aproximadamente el 10%).  En otros casos (un poco m√°s de la mitad) consideraremos el promedio de error. <br><br>  Curiosamente, el tama√±o del error y la calificaci√≥n de la pel√≠cula est√°n relacionados: <b>es menos probable que</b> el <b>modelo cometa errores en las pel√≠culas buenas y m√°s a menudo en las malas.</b>  Parece l√≥gico: las buenas pel√≠culas, como cualquier otro trabajo, son hechas por personas m√°s experimentadas y profesionales.  Sobre la pel√≠cula de Tarantino con la participaci√≥n de Brad Pitt, se puede decir de antemano que lo m√°s probable es que resulte bueno.  Al mismo tiempo, una pel√≠cula de bajo presupuesto con actores poco conocidos puede ser buena y mala, y es dif√≠cil juzgarla sin verla. <br><br><img src="https://habrastorage.org/webt/jg/pv/ic/jgpvick-5luxle1syvo2eskzztm.png" alt="imagen"><br><br>  Estas son las caracter√≠sticas m√°s importantes del modelo (las variables PCA se refieren a palabras clave procesadas que describen la trama de la pel√≠cula): <br><br><img src="https://habrastorage.org/webt/mp/jo/df/mpjodfpgjy6b8wf5jgpezb0lbzg.png" alt="imagen"><br><br>  Dos de estas caracter√≠sticas pertenecen a los Oscar, que fueron nominados previamente por miembros del equipo (director, productor, guionista, camar√≥grafo) o pel√≠culas en las que protagonizaron los actores.  Como se mencion√≥ anteriormente, el error de pron√≥stico est√° asociado con la evaluaci√≥n de la pel√≠cula, y en este sentido, las nominaciones previas para los Oscar pueden ser un buen delimitador para el modelo.  De hecho, las pel√≠culas que tienen al menos una nominaci√≥n al Oscar (entre actores o equipos) tienen un error de pron√≥stico promedio de 8.3%, y las que no tienen tales nominaciones - 9.8%.  De las 10 caracter√≠sticas principales utilizadas en el modelo, son las nominaciones al Oscar las que dan la mejor conexi√≥n con el tama√±o del error. <br><br>  Por lo tanto, surgi√≥ la idea de construir dos modelos separados: uno para pel√≠culas en las que los actores o el equipo fueron nominados para un Oscar, y el segundo para el resto.  La idea era que esto podr√≠a reducir el error general.  Sin embargo, el experimento fall√≥: el modelo general dio RMSE 0.706, y dos separados dieron 0.715. <br><br>  Por lo tanto, dejaremos el modelo original.  Los resultados de su precisi√≥n son los siguientes: RMSE en la muestra de entrenamiento - 0.688, en la muestra de validaci√≥n - 0.706, y en la muestra de prueba - 0.732. <br><br>  Es decir, hay algo de sobreajuste.  Los par√°metros de regularizaci√≥n ya se han establecido en el modelo mismo.  Otra forma de reducir el sobreajuste podr√≠a ser recopilar m√°s datos.  Para comprender si esto ayudar√°, construiremos un gr√°fico de errores para diferentes tama√±os de la muestra de entrenamiento, desde 100 hasta el m√°ximo disponible de 3 mil. El gr√°fico muestra que a partir de aproximadamente 2.5 mil puntos en el conjunto de entrenamiento, errores en el entrenamiento, validaci√≥n y cambio del conjunto de prueba peque√±o, es decir, un aumento en la muestra no tendr√° un efecto significativo. <br><br><img src="https://habrastorage.org/webt/uf/_9/jp/uf_9jpmxsjiylo6fd4d9lqt281i.png" alt="imagen"><br><br>  <b>¬øQu√© m√°s puedes intentar para refinar el modelo?</b> <br><br><ul><li>  Inicialmente, las pel√≠culas se seleccionan de manera diferente (l√≠mite diferente en el n√∫mero de votos, l√≠mites adicionales en otras variables) </li><li>  No todas las calificaciones se utilizan para calcular la calificaci√≥n: es posible seleccionar usuarios m√°s activos o eliminar a aquellos que solo dan calificaciones malas </li><li>  Pruebe diferentes formas de reemplazar los datos faltantes </li></ul><br>  Curiosamente, la pel√≠cula de 1997 "Batman y Robin" tuvo el mayor error de pron√≥stico (7 puntos de pron√≥stico en lugar de 4.2 puntos reales).  La pel√≠cula con Arnold Schwarzenegger, George Clooney y Uma Thurman recibi√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">11 nominaciones (y una victoria)</a> para el Premio Golden Raspberry, encabez√≥ la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lista de las 50 peores pel√≠culas de la historia de Empire,</a> y condujo a la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cancelaci√≥n de la secuela y al reinicio de toda la serie</a> .  Bueno, aqu√≠ el modelo, tal vez, se equivoc√≥ como un hombre :) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/466967/">https://habr.com/ru/post/466967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../466949/index.html">Perspectivas para las redes cu√°nticas: qui√©n participa en ellas y por qu√©</a></li>
<li><a href="../466955/index.html">Adivinanzas del curr√≠culum. Parte 3. El velo de los secretos quitados</a></li>
<li><a href="../466957/index.html">iPhone 11, el nuevo iPad, TV +, Arcade y m√°s. Lo que Apple mostr√≥ hoy</a></li>
<li><a href="../466963/index.html">Habrastatistics: c√≥mo vive Habr sin geektime</a></li>
<li><a href="../466965/index.html">Presentaci√≥n de Apple 10 de septiembre de 2019</a></li>
<li><a href="../466973/index.html">Leisya, Fanta: una nueva t√°ctica para un viejo troyano de Android</a></li>
<li><a href="../466979/index.html">Renombrar archivos con variables - Visual Studio Code</a></li>
<li><a href="../466983/index.html">¬øPor qu√© nadie puede vencer la carrera de Tesla?</a></li>
<li><a href="../466985/index.html">Sobre los nuevos est√°ndares C ++</a></li>
<li><a href="../466987/index.html">El at√≠pico "ls" o c√≥mo se entretienen los linuxoides</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>