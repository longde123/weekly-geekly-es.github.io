<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐พ ๐๐ฝ ๐คณ๐ป ุฃุณูู ุญูุฑุฉ ุงูุฃุฑูุจ: ูุตุฉ ุฎุทุฃ ูุงุญุฏ ูู ุงููุฑููุด - ุงูุฌุฒุก ุงูุฃูู ๐ฉ๐ฝโโ๏ธ โ ๐ฉ๐พโ๐ณ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุจุนุฏ ุถุฑุจ ุฃุฒุฑุงุฑ ููุญุฉ ุงูููุงุชูุญ ุฎูุงู ุงูุนุดุฑูู ุฏูููุฉ ุงููุงุถูุฉ ุ ููุง ูู ูุงู ููุชุจ ูู ุฃุฌู ุญูุงุชู ุ ููุฌุฃ ghostinushanka ุฅููู ุจูุธุฑุฉ ุบูุฑ ูุฌูููุฉ ูู ุนูููู ูุงุจุชุณุงูุฉ ุฎุจ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฃุณูู ุญูุฑุฉ ุงูุฃุฑูุจ: ูุตุฉ ุฎุทุฃ ูุงุญุฏ ูู ุงููุฑููุด - ุงูุฌุฒุก ุงูุฃูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475698/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> ุจุนุฏ ุถุฑุจ ุฃุฒุฑุงุฑ ููุญุฉ ุงูููุงุชูุญ ุฎูุงู ุงูุนุดุฑูู ุฏูููุฉ ุงููุงุถูุฉ ุ ููุง ูู ูุงู ููุชุจ ูู ุฃุฌู ุญูุงุชู ุ ููุฌุฃ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">ghostinushanka</a> ุฅููู ุจูุธุฑุฉ ุบูุฑ ูุฌูููุฉ ูู ุนูููู ูุงุจุชุณุงูุฉ ุฎุจูุซุฉ ุ "ูุง ุตุฏูู ุ ุฃุนุชูุฏ ุฃููู ุญุตูุช ุนูููุง. </p><br><p style=";text-align:right;direction:rtl"> ุงูุธุฑ ุฅูู ูุฐุง "- ูุฃูู ูุดูุฑ ุฅูู ุฅุญุฏู ุงูุดุฎุตูุงุช ุงูุชู ุชุธูุฑ ุนูู ุงูุดุงุดุฉ -" ุฃุฑุงูู ูุจุนุชู ุงูุญูุฑุงุก ุฃูู ุฅุฐุง ุฃุถููุง ูุง ุฃุฑุณูุชู ููุชู ููุง "- ูุฃูู ูุดูุฑ ุฅูู ููุงู ุขุฎุฑ ูู ุงูููุฏ -" ุณูููู ููุงู ูุง ุฎุทุฃ ุจุนุฏ ุงูุขู. " <br>  ูู ุญูุฑุฉ ููููุง ููุชุนุจ ุฃููู ุจุชุนุฏูู ุงูุชุนุจูุฑ sed ุงูุฐู ููุง <code>systemctl varnish reload</code> ููุฐ ุจุนุถ ุงูููุช ุงูุขู ุ ุงุญูุธ ุงูููู <code>systemctl varnish reload</code> .  ุงูุชูุช ุฑุณุงูุฉ ุงูุฎุทุฃ ... </p><br><p style=";text-align:right;direction:rtl">  "ูุฐู ุงูุฑุณุงุฆู ุงูุฅููุชุฑูููุฉ ุงูุชู ุชุจุงุฏูุชูุง ูุน ุงููุฑุดุญ ุ" ููุงุตู ุฒูููู ุ ูุน ุชุบูุฑ ุงุจุชุณุงูุชู ุฅูู ุงุจุชุณุงูุฉ ุนุฑูุถุฉ ูุญููููุฉ ุ "ููุฏ ุฃุฏูุดูู ูุฌุฃุฉ ุฃู ูุฐู ูู ุงููุดููุฉ ุจุงูุถุจุท ุฐุงุชูุง!" </p><a name="habracut"></a><br><h3 id="how-it-all-began" style=";text-align:right;direction:rtl">  ููู ุจุฏุฃ ูู ุดูุก </h3><br><p style=";text-align:right;direction:rtl">  <em>ุชูุชุฑุถ ูุฐู ุงูููุงูุฉ ุจุนุถ ุงูุฃููุฉ ูุน bash ู awk ู systemd.</em>  <em>ุจุนุถ ุงููุนุฑูุฉ ุจุงููุฑููุด ูููุฏ ุ ููู ุบูุฑ ูุทููุจ.</em> <em><br></em>  <em>ุชู ุชูููุญ ุงูุทูุงุจุน ุงูุฒูููุฉ ูู ูุซุงู ุงูููุชุทูุงุช.</em> <em><br></em>  <em>ุดุงุฑู ูู ุชุฃูููู ูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">ghostinushanka</a> .</em> </p><br><p style=";text-align:right;direction:rtl">  ุชุดุฑู ุงูุดูุณ ูู ุฎูุงู ุงูููุงูุฐ ุฐุงุช ุงูุญุฌู ุนูู ุงูุญุงุฆุท ูู ุตุจุงุญ ุฎุฑูู ุฏุงูุฆ ุขุฎุฑ ุ ููุฌุงู ูู ุงูุณุงุฆู ุงูุทุงุฒุฌ ุงููุญุชูู ุนูู ุงููุงูููู ูุฌูุณ ุนูู ุฌุงูุจ ููุญุฉ ุงูููุงุชูุญ ุ ูุชุบูู ุณูุงุนุงุช ุงูุฑุฃุณ ุนู ุงูุณูููููุฉ ุงููุญุจุจุฉ ููุฃุตูุงุช ุงูุชู ุชุบุทู ุญููู ููุญุงุช ุงูููุงุชูุญ ุงููููุงููููุฉ ุญูููุง ูุฃูู ุฅุฏุฎุงู ููุชุฑุงูู ุนูู kanban ูุนุฑุถ ูุฒูู ุนููุงู ุงูุชุฐูุฑุฉ ุงููุตูุฑูุฉ "Investigate varnishreload <code>sh: echo: I/O error</code> in staging".  ุนูุฏูุง ูุชุนูู ุงูุฃูุฑ ุจุงููุฑููุด ุ ูุง ููุฌุฏ ูุฌุงู ููุฎุทุฃ (ุงูุฃุฎุทุงุก) ุ ุนูู ุงูุฑุบู ูู ุฃู ูุฐุง ุงูุฎุทุฃ ุจุงูุฐุงุช ูุง ูุจุฏู ุฃูู ูุณุจุจ ุฃู ูุดุงูู ูุนููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ูุฃููุฆู ูููู ุบูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุทูุนูู ุนูู ุงููุฑููุด</a> ุ ุฅูู ูุฌุฑุฏ ุจุฑูุงูุฌ ูุตู ูุณุชุฎุฏู ูุฅุนุงุฏุฉ ุชุญููู ุงูุชูููู - ููุทูู ุนููู ุฃูุถูุง ุงุณู VCL - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฎุงุฏู ุงูุชุฎุฒูู ุงููุคูุช ูููุฑููุด</a> . </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุนููุงู ุงูุจุทุงูุฉ ูุดูุฑ ุฅูู ุฃู ุงูุฎุทุฃ ูุฏ ุชูุช ูุตุงุฏูุชู ุนูู ุฅุญุฏู ูุงูููุงุช ุงูุชุฏุฑูุฌ ูููุช ูุชุฃูุฏุงู ูู ุฃู ุชูุฌูู ุงููุฑููุด ูุนูู ูู ุจูุฆุฉ ุงูุชุฏุฑูุฌ ุ ูุฐูู ูุงู ูู ุงูููุชุฑุถ ุฃู ุชููู ูุฐู ูุดููุฉ ุจุณูุทุฉ.  ูุฌุฑุฏ ุฑุณุงูุฉ ุฅุฎุฑุงุฌ ุณููุฉ ุงูุงุณุชุฎุฏุงู ููุชูุจุฉ ุนูู ุฏูู ูุบูู.  ุฃุญุตู ุนูู ุงูุชุฐูุฑุฉ ุ ูุฃุนุชูุฏ ุงุนุชูุงุฏุง ุฑุงุณุฎุง ุฃููู ุณุฃููู ูุงุฏุฑุง ุนูู ูุถุน ุนูุงูุฉ ุนูู ุญููุง ูู ุฃูู ูู 30 ุฏูููุฉ ุ ูุฅููุงุก ูุธุฑุฉ ุนูู ููุณู ููุณุญ ูููุฉ ุฏููููุฉ ุฃุฎุฑู ูุงูุนูุฏุฉ ุฅูู ุฃุดูุงุก ุฃูุซุฑ ุฃูููุฉ. </p><br><h3 id="hitting-the-wall-at-200kph" style=";text-align:right;direction:rtl">  ุถุฑุจ ุงูุญุงุฆุท ูู 200kph </h3><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ูุชุญ ููู <code>varnishreload</code> ุนูู ุฃุญุฏ ุงูุฎูุงุฏู ุงููุชุฃุซุฑุฉ ุงูุชู ุชุนูู ุนูู ุงูุชุฏุงุฏ Debian ุ ุฃุฌุฏ <code>varnishreload</code> ุฃูู ูู 200 ุณุทุฑ.  ูู ุฎูุงู ุงููุฑุงุกุฉ ููุชุฑุฉ ูุฌูุฒุฉ ุ ูุง ุฃุฑู ุดูุฆูุง ุฎุทูุฑูุง ูููุนูู ูู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ูู ุงููุญุทุฉ ูุฑุงุฑูุง ูุชูุฑุงุฑูุง.  ุจุนุฏ ูู ุดูุก ุ ูุฐุง ุงูุทูุงู ุ ุญุชู ูู ุงููุงุฑ ุ ูู ูุดุชูู ุฃุญุฏ ุ ุญุณููุง ... ููุณ ูุซูุฑูุง ุ ูุฐุง ูู ุงูุญุงู.  ุฃููู ุจุชุดุบูู ุงูุจุฑูุงูุฌ ุงููุตู ููุงุญุธ ุ ููุท ููุนุฑูุฉ ุฃูู ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูููู ุฑุคูุชูุง.  ูุชู ุชุดุบูู ุนุฏุฉ ูุฑุงุช ูุชูุฑุฑุฉ ููุชุฃูุฏ ุจุดููู ูุนููู ูู ุฃููู ูุง ุฃุณุชุทูุน ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงูุฎุทุฃ ุฏูู ุจุฐู ุฃู ุฌูุฏ ุฅุถุงูู ูุฃุจุฏุฃ ูู ูุถุน ุฎุทุท ูุชุนุฏูู ุจูุฆุฉ ุงูุจุฑูุงูุฌ ุงููุตู ูุซูููุง.  ูู ุฅุบูุงู STDOUT ูููุต ุงูุจุฑูุฌู ุจุงููุงูู (ูุน <code>&gt; &amp;-</code> ) ูุณุงุนุฏ ุฃู ุดูุกุ  ุฃู stderrุ  ูุง ูุนูุช. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุถุญ ุฃู systemd ูุดูู ุงูุจูุฆุฉ ุจุทุฑููุฉ ูุง ุ ููู ููู ู ... ููุงุฐุงุ  ุฃุทูู ุงููุงุฑ ุนูู vim ูุชุนุฏูู <code>varnishreload</code> ุงูุฎุงุต <code>varnishreload</code> ุ ูุถูููุง <code>set -x</code> ูุจุงุดุฑุฉ ุฃุณูู shebang ุ ุขูููุง ุฃู <code>varnishreload</code> ุฅุฎุฑุงุฌ ุงูุจุฑูุงูุฌ ุงููุตู ุงูููุตู ุจุนุถ ุงูุถูุก. </p><br><p style=";text-align:right;direction:rtl">  ุงูููู ููุฑูููุน ุ ูุฐุง ุฃุนุฏ ุชุญููู ุงููุฑููุด ุ ููุท ูุฃุฑู ุฃู ุงูุชุบููุฑ ูุฏ ูุณุฑ ุงููุต ุงูุจุฑูุฌู ุจุงููุงูู ... ุงูุฅุฎุฑุงุฌ ุนุจุงุฑุฉ ุนู ููุถู ูุงููุฉ ุชุนุฑุถ ุฃุทูุงููุง ูู ุงูููุฏ ุนูู ุงูููุท C ูุฃู ุงููุฎุฒู ุงููุคูุช ุงูุงูุชุฑุงุถู ููุฑุฌูุน ูุง ูููู ููุนุซูุฑ ุนูู ูุตุฏุฑู.  ุงุดุนุฑ ุจุงูุงุฑุชุจุงู  ูู ูููู ุฃู ูุคุฏู ุชุนููู ุฎูุงุฑ ุชุตุญูุญ ุงูุจุฑูุงูุฌ ุงููุตู shell ุฅูู ูุณุฑ ุงูุจุฑูุงูุฌ ุงูุฐู ูุฏุนู ุฅูููุ  ูุง ุ ูุง ูููู ุฃู ูููู.  ุญุดุฑุฉ ูู ุงูุตุฏูุฉุ  ุณููุงุฑูููุงุช ูุชุนุฏุฏุฉ ููููุฉ ุชุนูู ุจุนูู ูู ุงุชุฌุงูุงุช ูุฎุชููุฉ ูู ุฐููู.  ุงูุชูู ุนูู ุงูููุฑ ููุจ ูู ุงููุดุฑูุจุงุช ุงูุชู ุชุญุชูู ุนูู ุงููุงูููู ุ ุฑุญูุฉ ุณุฑูุนุฉ ุฅูู ุงููุทุจุฎ ูุฅุนุงุฏุฉ ุงูููุก ูููุง ูุฐูุจ ูุฑุฉ ุฃุฎุฑู.  ุฃูุชุญ ุงูููู ูููุธุฑ ุนู ูุซุจ ุฅูู shebang: <code>#!/bin/sh</code> . </p><br><p style=";text-align:right;direction:rtl">  ููู <code>/bin/sh</code> ูู ุจุงูุชุฃููุฏ ุฑุงุจุท ุฅูู bash ุ ุจุญูุซ ูุชู ุชูุณูุฑ ุงูุจุฑูุงูุฌ ุงููุตู ูู ูุถุน ูุชูุงูู ูุน POSIX ุ ุฃููุณ ูุฐููุ  ! ุงูุฎุทุฃ  ุงููุดุฑุฉ ุงูุงูุชุฑุงุถูุฉ ุบูุฑ ุงูุชูุงุนููุฉ ุนูู ุฏุจูุงู ูู ุดุฑุทุฉ ุ ููุฐุง ุจุงูุถุจุท ูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุดูุฑ</a> ุฅููู <code>/bin/sh</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># ls -l /bin/sh lrwxrwxrwx 1 root root 4 Jan 24 2017 /bin/sh -&gt; dash</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุท ูุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ููุช ุจุชุบููุฑ shebang ุฅูู <code>#!/bin/bash</code> ุ ูููุช ุจุฅุฒุงูุฉ <code>set -x</code> ูุญุงููุช ูุฑุฉ ุฃุฎุฑู.  ุฃุฎูุฑูุง ุ ูุงุชุฌ ุฎุทุฃ ูุนููู ูู ุฅุนุงุฏุฉ ุชุญููู ุงููุฑููุด ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">Jan 01 12:00:00 hostname varnishreload[32604]: /usr/sbin/varnishreload: line 124: <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span>: write error: Broken pipe Jan 01 12:00:00 hostname varnishreload[32604]: VCL <span class="hljs-string"><span class="hljs-string">'reload_20190101_120000_32604'</span></span> compiled</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุณุทุฑ 124 ุ ุงูุขู ูุญู ูุชุญุฏุซ! </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">114 <span class="hljs-function"><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find_vcl_file</span></span></span></span>() { 115 VCL_SHOW=$(varnishadm vcl.show -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VCL_NAME</span></span></span><span class="hljs-string">"</span></span> 2&gt;&amp;1) || : 116 VCL_FILE=$( 117 <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VCL_SHOW</span></span></span><span class="hljs-string">"</span></span> | 118 awk <span class="hljs-string"><span class="hljs-string">'$1 == "//" &amp;&amp; $2 == "VCL.SHOW" {print; exit}'</span></span> | { 119 <span class="hljs-comment"><span class="hljs-comment"># all this ceremony to handle blanks in FILE 120 read -r DELIM VCL_SHOW INDEX SIZE FILE 121 echo "$FILE" 122 } 123 ) || : 124 125 if [ -z "$VCL_FILE" ] 126 then 127 echo "$VCL_SHOW" &gt;&amp;2 128 fail "failed to get the VCL file name" 129 fi 130 131 echo "$VCL_FILE" 132 }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ููุง ุงุชุถุญ ุ ูุฅู ุงูุฎุท 124 ุบูุฑ ูุงุฏุฆ.  ูุง ูููููู ุฅูุง ุฃู ุฃุธู ุฃู ุงูุฎุทุฃ ูุฏ ุชู ุฅูุชุงุฌู ูุฌุฒุก ูู ุชูููุฐ ุฃูุฑ ูุชุนุฏุฏ ุงูุฎุทูุท ูู ุงูุณุทุฑ 116. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐู ูุง ุงูุฐู ููุชุฌ ุนูู ุงูุฌุฒุก ุงููุฑุนู ุฃุนูุงู ููุชุฎุฒูู ูู ุงููุชุบูุฑ <code>VCL_FILE</code> ุ  ูู ุงูุฌุฒุก ุงูุฃูู ุ ูุฑุณู ูุญุชููุงุช ูุชุบูุฑ <code>VCL_SHOW</code> ุชู ุฅูุดุงุคู ุนูู ุงูุณุทุฑ 115 ูู ุงูุฃูุจูุจ.  ูุงุฐุง ูุญุฏุซ ููุงู ุ ุฅุฐูุ </p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูุณุชุฎุฏู <code>varnishadm</code> ุ ููู ุฌุฒุก ููุงุณู ูู ุชุซุจูุช ุงููุฑููุด ุงููุณุชุฎุฏู ูุชูููู ุงููุฑููุด ุฏูู ุงูุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุชุดุบููู.  ูุชู ุงุณุชุฎุฏุงู ุงูุฃูุฑ ุงููุฑุนู <code>vcl.show -v</code> ูุทุจุงุนุฉ ุชูููู VCL ุจุงููุงูู ุงููุญุฏุฏ ุจูุงุณุทุฉ <code>${VCL_NAME}</code> ุฅูู STDOUT. </p><br><p style=";text-align:right;direction:rtl">  ูุนุฑุถ ุชูููู VCL ุงููุดุท ุงูุญุงูู ุจุงูุฅุถุงูุฉ ุฅูู ุงูุนุฏูุฏ ูู ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ ูู ุชูุฌูู ุงููุฑููุด ุงูุชู ูุง ุชุฒุงู ูู ุงูุฐุงูุฑุฉ ุ ููููู ุงุณุชุฎุฏุงู <code>varnishadm vcl.list</code> ุ ูุงูุฐู ุณูููู ุฅูุชุงุฌู ูุดุงุจููุง ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">discarded cold/busy 1 reload_20190101_120000_11903 discarded cold/busy 2 reload_20190101_120000_12068 discarded cold/busy 16 reload_20190101_120000_12259 discarded cold/busy 16 reload_20190101_120000_12299 discarded cold/busy 28 reload_20190101_120000_12357 active auto/warm 32 reload_20190101_120000_12397 available auto/warm 0 reload_20190101_120000_12587</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุชุนููู ุงููุชุบูุฑ <code>${VCL_NAME}</code> ูู ููุงู ุขุฎุฑ ูู ุงูุจุฑูุงูุฌ ุงููุตู <code>varnishreload</code> ุฅูู ุงุณู VCL ุงููุดุท ุญุงูููุง ุ ุฅู ูุฌุฏ.  ูู ูุฐู ุงูุญุงูุฉ ุ ุณูููู ุฐูู "reload_20190101_120000_12397". </p><br><p style=";text-align:right;direction:rtl">  ุฑุงุฆุน ุ ูุฐุง <code>${VCL_SHOW}</code> ูุญุชูู ุงูุขู ุนูู ุชููุฆุฉ ูุงููุฉ <code>${VCL_SHOW}</code> ุ ููู ุณูู ุจุฏุฑุฌุฉ ูุงููุฉ ุญุชู ุงูุขู.  ุงูุขู ูููุช ุฃุฎูุฑูุง ุงูุณุจุจ ูู ุฃู ูุงุชุฌ <code>set -x</code> ูุน <code>set -x</code> ุจุฏุง ุฃูู ููุณูุฑ ููุบุงูุฉ - ููุฏ ุชุถูู ูุญุชููุงุช ุชูููู ุงููุฑููุด ุงููุงุชุฌ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุดูุก ุงูููู ููุง ูู ุฃู ุชูููู VCL ุงููุงูู ูุฏ ูุชู ุฑุจุทู ูุนูุง ูู ูุซูุฑ ูู ุงูุฃุญูุงู ูู ูููุงุช ูุชุนุฏุฏุฉ.  ุชูุณุชุฎุฏู ุงูุชุนูููุงุช ุฐุงุช ุงูููุท C ูุชุญุฏูุฏ ุงูููุงู ุงูุฐู ุชู ููู ุชุถููู ูููุงุช ุงูุชูููู ูู ูููุงุช ุงูุชูููู ุงูุฃุฎุฑู ุ ููู ุจุงูุถุจุท ูุง ูุฏูุฑ ุญููู ุงูุณุทุฑ ุงูุชุงูู ูู ููุชุทู ุงูุดูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุจูุงุก ุฌููุฉ ุงูุชุนูููุงุช ุงููุญุฏุฏุฉ ููููู ุนูู ุงูุชูุณูู ุงูุชุงูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// VCL.SHOW &lt;NUM&gt; &lt;NUM&gt; &lt;FILENAME&gt;</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุฃุฑูุงู ููุณุช ูููุฉ ููุง ุ ูุง ููููุง ูู ุงุณู ุงูููู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐู ูุง ุงูุฐู ูุญุฏุซ ูู ุงูุนุงูู ูู ุนุฏุฏ ูุจูุฑ ูู ุงูุฃูุงูุฑ ุงูุชู ุชุจุฏุฃ ุนูู ุงูุฎุท 116ุ <br>  ุฏุนููุง ููุชูุทูุง. <br>  ููุงู ุฃุฑุจุนุฉ ุฃุฌุฒุงุก ููุฃูุฑ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <code>echo</code> ุจุณูุท ูุทุจุน ูููุฉ <code>${VCL_SHOW}</code> <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$VCL_SHOW</span></span></span><span class="hljs-string">"</span></span></code> </pre> </li><li style=";text-align:right;direction:rtl">  <code>awk</code> ุงูุฐู ูุจุญุซ ุนู ุฎุท (ุณุฌู) ุญูุซ ุงูุญูู ุงูุฃูู ูู "//" ูุงูุซุงูู ูู "VCL.SHOW". <br>  ููุทูุจ ูู Awk ุทุจุงุนุฉ ุงูุณุทุฑ ุงูุฃูู ุงููุทุงุจู ููุฐู ุงูุฃููุงุท ุซู ุฅููุงู ุงููุนุงูุฌุฉ ููุฑูุง. <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">awk <span class="hljs-string"><span class="hljs-string">'$1 == "//" &amp;&amp; $2 == "VCL.SHOW" {print; exit}'</span></span></code> </pre> </li><li style=";text-align:right;direction:rtl">  ูุชูุฉ ุชุนูููุงุช ุจุฑูุฌูุฉ ุชููุฑุฃ ูู ุงูุญููู ุฐุงุช ุงููุณุงูุงุช ุงูุจูุถุงุก ุฅูู ุฎูุณุฉ ูุชุบูุฑุงุช.  ูุญุตู ุงููุชุบูุฑ ุงูุฎุงูุณ FILE ุนูู ุจููุฉ ุงูุณุทุฑ.  ุฃุฎูุฑูุง ุ ูููู ุตุฏู ุขุฎุฑ ุจุทุจุงุนุฉ ูุญุชููุงุช ุงููุชุบูุฑ <code>${FILE}</code> . <br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">{ <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> -r DELIM VCL_SHOW INDEX SIZE FILE; <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$FILE</span></span></span><span class="hljs-string">"</span></span> }.</code> </pre> </li><li style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุฌููุน ุงูุฎุทูุงุช ูู 1 ุฅูู 3 ูุบุทุงุฉ ูู ูุฌูุฏ ูุฑุนู ุ ุณููุชูู ุฅุฎุฑุงุฌ <code>$FILE</code> ูู ุงููุชุบูุฑ <code>VCL_FILE</code> . </li></ol><br><p style=";text-align:right;direction:rtl">  ููุง ููุญู ุงูุชุนููู ุนูู ุงูุณุทุฑ 119 ุ ูุฅู ุทุฑููุฉ ุนูู ุงูุฃุดูุงุก ูุฐู ุชุฎุฏู ุบุฑุถูุง ูุงุญุฏูุง: ุงูุชุนุงูู ุจุดูู ููุซูู ูุน ุงูุญุงูุฉ ุงูุชู ูููู ูููุง VCL ูุดูุฑ ุฅูู ุฃุณูุงุก ุงููููุงุช ุจูุณุงูุงุช. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุนููุช ุจููุทู ุงููุนุงูุฌุฉ ุงูุฃุตูู ูู <code>${VCL_FILE}</code> ูุญุงููุช ุชุนุฏูู ุณูุณูุฉ ุงูุฃูุงูุฑ ูููู ุจุฏูู ุญุฏ ูุนููู.  ูู ุดูุก ูุนูู ูู ุตุฏูู ูููู ุฃุจุฏุง ุนูุฏูุง ุชุนูู ูุฎุฏูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุฃู ุงูุฎุทุฃ ููุณ ูุงุจูุงู ููุชูุฑุงุฑ ุนูู ุงูุฅุทูุงู ุนูุฏูุง ุฃุฏูุฑู - ูู ุบุถูู ุฐูู ุ ูุฑุช 30 ุฏูููุฉ ุชูุฑูุจูุง ุณุช ูุฑุงุช ููููุฉ ุฌุฏูุฏุฉ ุฐุงุช ุฃููููุฉ ุนููุง ุชุถุน ูู ุดูุก ุฌุงูุจุงู.  ูุงูุช ุจููุฉ ุงูุฃุณุจูุน ูููุฆุฉ ุจููุงู ูุฎุชููุฉ ุ ูุงูุงุณุชุซูุงุกุงู ููุง ุญุฏูุซ ุฏุงุฎูู ููุฑูููุง ุญูู ุงุณุชุฎุฏุงู <code>sed</code> ูููุงุจูุฉ ูุน ูุฑุดุญ ูุงุนุฏ.  ุงููุดููุฉ ูุน ุฌุนู ุงูุฎุทุฃ <code>varnishreload</code> ุชุฎุชูู ุชูุงูุง ูุฑูุงู ุงูููุช. </p><br><h3 id="your-so-called-sed-fu-is-really-quite-pathetic" style=";text-align:right;direction:rtl">  ุงูุฎุงุต ุจู ูุง ูุณูู ูู ูู ... ูู ุญูุง ... ูุซูุฑ ููุดููุฉ ุฌุฏุง </h3><br><p style=";text-align:right;direction:rtl">  ุฃุญุฏ ุฃูุงู ุงูุฃุณุจูุน ุงูุฐู ุชูุง ุฐูู ูุงู ูุฌุงูููุง ุฌุฏูุง ุ ูุฐุง ููุช ุจุงููููุฉ ูุฑุฉ ุฃุฎุฑู.  ููุช ุขูู ุฃูู ุฑุจูุง ูุงูุช ุจุนุถ ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ ูู ุฐููู ูุง ุฒุงูุช ุชูุถู ุนูู ุงููุดููุฉ ูุณุฃุชููู ุฃุฎูุฑูุง ูู ุงูุชุบูุจ ุนูููุง. </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃู ุซูู ุงูุฑูุฒ ูู ุงููุฑุฉ ุงูุฃุฎูุฑุฉ ูู ูุณุงุนุฏ ุ ููุฏ ุงุฎุชุฑุช ููุท ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูุณุทุฑ 116. ููุงู ุงูุฑูุฒ ุงูุญุงูู ูุฌููููุง ุ ุนูู ุฃู ุญุงู.  ููุณุช ููุงู ุญุงุฌุฉ ูุทูููุง ูุงุณุชุฎุฏุงู <code>read</code> ููุง. </p><br><p style=";text-align:right;direction:rtl">  ุงููุธุฑ ูู ุงูุฎุทุฃ ูุฑุฉ ุฃุฎุฑู: <br>  <code>sh: echo: broken pipe</code> - echo ููุฌูุฏ ูู ููุงููู ูู ูุฐุง ุงูุฃูุฑ ุ ููููู ุฃุธู ุฃู ุฃูู ูุงุญุฏ ูููู ุฃูุซุฑ ุฌูุฑูุงุก (ุฃู ุดุฑูู).  Awk ูุง ููุญู ุจุงูุซูุฉ ุฃูุถุง.  ุญุณููุง ุ ูู ุญุงู ูุงู ุงูุฃูุฑ ุญููุง <code>awk | {read; echo}</code> <code>awk | {read; echo}</code>  <code>awk | {read; echo}</code> ุจูุงุก ูุณุจุจ ูู ูุฐู ุงููุดุงูู ุ ููุงุฐุง ูุง ุชุณุชุฎุฏู ุฃู ุดูุก ุขุฎุฑุ  ูุง ุชุณุชุฎุฏู Awk ุญููุง ููุฏุฑุงุชูุง ุงููุงููุฉ ุนูู ูุฐุง ุงูุฎุท ุงูููุฑุฏ ูุจุนุฏ ุฐูู ููุงู <code>read</code> ูุงุฆุถุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ุฑุฃููุง ุญุฏูุซูุง ุฏุงุฎูููุง ุญูู <code>sed</code> ูู ุงูุฃุณุจูุน ุงูุขุฎุฑ ุ ุฃุฑุฏุช ุชุฌุฑุจุฉ ููุงุฑุงุชู ุงูููุชุณุจุฉ ุญุฏูุซูุง ูุชุญุณูู <code>echo | awk | { read; echo }</code> <code>echo | awk | { read; echo }</code>  <code>echo | awk | { read; echo }</code> ูู <code>echo | sed</code> ุฃุจุณุท <code>echo | sed</code>  <code>echo | sed</code> .  ุนูู ุงูุฑุบู ูู ุฃู ูุฐู ููุณุช ุจุงูุชุฃููุฏ ุงูุทุฑููุฉ ุงูุตุญูุญุฉ ููุชุนุงูู ูุน ุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ุฅูุง ุฃููู ุงุนุชูุฏุช ุฃููู ุนูู ุงูุฃูู ุณุฃุญุงูู ุชุฌุฑุจุฉ ุงุณุชุฎุฏุงู ุฌูุงุฒ sed-fu ูุฑุจูุง ุฃุชุนูู ุดูุฆูุง ุฌุฏูุฏูุง ุญูู ุงููุดููุฉ ูู ุงูุนูููุฉ.  ูู ูุฐู ุงูุนูููุฉ ุ ุทูุจุช ูู ุฒูููู - ูุคูู ุฎุทุงุจ sed - ูุณุงุนุฏุชู ูู ุงูุชูุตู ุฅูู ุฃูุฑ sed ุฃูุซุฑ ููุงุกุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุฃูููุช <code>varnishadm vcl.show -v "$VCL_NAME"</code> ูู ููู ุ ูุฐูู ูููููู ุงูุชุฑููุฒ ุนูู ูุชุงุจุฉ sed ุจุฏูู ูู ุงููุชุงุนุจ ุญูู ุฅุนุงุฏุฉ ุชุญููู ุงูุฎุฏูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุงูุนุซูุฑ ุนูู ูุชุงุจ ุชูููุฏู ูุตูุฑ ุญูู ููููุฉ ุฅุฏุฎุงู ุนูููุงุช sed ุจุงูุถุจุท ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฏููู ุฌูู ุงูุฎุงุต ุจูุง</a> .  ูู ูุตุงุฏุฑ ุงููุตุงุฏุฑ ุ ูุชู ุชุญุฏูุฏ ุงูุญุฑู <code>\n</code> ุจุดูู ุตุฑูุญ ุจุงุนุชุจุงุฑู ูุงุตู ุงูุฃุณุทุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุนุฏุฉ ุชูุฑุงุฑุงุช ููุฏุฎูุงุช ูู ุฒูููู ุ ูููุง ุจุตูุงุบุฉ ุชุนุจูุฑ sed ุงูุฐู ุฃูุชุฌ ููุณ ุงููุชูุฌุฉ ุชูุงููุง ูุซู ุงูุณุทุฑ ุงูุฃุตูู 116. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุจุฅูุดุงุก ููู ุฅุฏุฎุงู ูููุฐุฌ ููุง ุ </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">&gt; cat vcl-example.vcl Text // VCL.SHOW 0 1578 file with 3 spaces.vcl More text // VCL.SHOW 0 1578 file.vcl Even more text // VCL.SHOW 0 1578 file with TWOspaces.vcl Final text</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏ ูุง ูููู ุฐูู ูุงุถุญูุง ูู ุงููุตู ุฃุนูุงู ุ ููููุง ููุชููู ููุท <code>// VCL.SHOW</code> ุงูุฃูู ุ ููุฏ ูููู ููุงู ุงูุนุฏูุฏ ูู ุงููุฏุฎูุงุช.  ูุฐุง ูู ุจุงูุถุจุท ุณุจุจ ุงุณุชูุงูุฉ awk ุจุนุฏ ุงููุจุงุฑุงุฉ ุงูุฃููู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># step 1, capture just the comment lines # using sed capability to specify delimiter character with '\#' instead of the commonly used '/' so there is no need to escape slashes themselves # and the โaddressโ capability defined as regex โ// VCL.SHOWโ to search for lines with specific pattern # -n flag makes sure that the sed does not print all as it does by default (see above link) # -E switches to the extended regex &gt; cat vcl-processor-1.sed \#// VCL.SHOW#p &gt; sed -En -f vcl-processor-1.sed vcl-example.vcl // VCL.SHOW 0 1578 file with 3 spaces.vcl // VCL.SHOW 0 1578 file.vcl // VCL.SHOW 0 1578 file with TWOspaces.vcl # step 2, only print out the file name # using the โsubstituteโ command with regex capture groups to print just that group # and this is done only for the matches of the previous search &gt; cat vcl-processor-2.sed \#// VCL.SHOW# { s#.* [0-9]+ [0-9]+ (.*)$#\1# p } &gt; sed -En -f vcl-processor-2.sed vcl-example.vcl file with 3 spaces.vcl file.vcl file with TWOspaces.vcl # step 3, make sure to only get the first result # same as with the awk before, add an immediate exit after the first processed match is printed &gt; cat vcl-processor-3.sed \#// VCL.SHOW# { s#.* [0-9]+ [0-9]+ (.*)$#\1# p q } &gt; sed -En -f vcl-processor-3.sed vcl-example.vcl file with 3 spaces.vcl # step 4, wrap it up into a one-liner using the colon to separate commands &gt; sed -En -e '\#// VCL.SHOW#{s#.* [0-9]+ [0-9]+ (.*)$#\1#p;q;}' vcl-example.vcl file with 3 spaces.vcl</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ูุฅู ูุญุชููุงุช ุงูุจุฑูุงูุฌ ุงููุตู varnishreload ุณุชุจุฏู ูุซู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">VCL_FILE=<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(echo "$VCL_SHOW" | sed -En '\#// VCL.SHOW#{s#.*[0-9]+ [0-9]+ (.*)</span></span></span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$#</span></span></span><span class="hljs-string">\1#p;q;};')"</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุงูุชุนุจูุฑ ุนู ุงูููุทู ุฃุนูุงู ุจุฅูุฌุงุฒ ุจูุงุณุทุฉ: <br>  ุฅุฐุง ูุงู ุณุทุฑ ูุง ูุทุงุจู regex <code>// VCL.SHOW</code> ุ <code>// VCL.SHOW</code> ุจูุทุงุจูุฉ ุงููุต <code>// VCL.SHOW</code> ุจูุง ูู ุฐูู ุงูุฑููุงู ุนูู ุฐูู ุงูุณุทุฑ ูุงูุชูุงุท ุฃู ุดูุก ูุฃุชู ุจุนุฏ ุฐูู.  ุชูุจุนุซ ูู ุงููุจุถ ุนูู ูุฅููุงุก. </p><br><p style=";text-align:right;direction:rtl">  ุจุณูุท ุ ุฃููุณ ูุฐููุ </p><br><p style=";text-align:right;direction:rtl">  ููุง ุณุนุฏุงุก ุจุงูุจุฑูุงูุฌ ุงููุตู sed ุ <code>varnishreload</code> ุนูู ุงูุฑูุฒ ุงูุฃุตูู ุงูุฐู ูุญู ูุญูู ุ ูู ุงุฎุชุจุงุฑุงุช ุงูุชุดุบูู ุงูุชู ุฃุฌุฑูุชูุง ุฃูุชุฌุช ุงููุชุงุฆุฌ ุงููุฑุฌูุฉ ุ ูุฐูู ููุช ุจุชุนุฏูู <code>varnishreload</code> ุนูู ุงูุฎุงุฏู ูุฃุทููุช <code>systemctl reload varnish</code> ูุฑุฉ ุฃุฎุฑู.  <code>echo: write error: Broken pipe</code> ุงููุนูู <code>echo: write error: Broken pipe</code> ูุงู ูุจุชุณู ูู ูุฌูููุง.  ููุชุธุฑ ุงููุคุดุฑ ุงููุงูุถ ุฅุฏุฎุงู ุฃูุฑ ุฌุฏูุฏ ูู ุงููุฑุงุบ ุงููุธูู ูู ุงูุฌูุงุฒ ... </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar475698/">https://habr.com/ru/post/ar475698/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar475684/index.html">Pythonetc compilation ุ ุฃูุชูุจุฑ 2019</a></li>
<li><a href="../ar475686/index.html">ูุตุงุฆุญ ูุญูู ูู my Telegram-channelpythonetc ุ ุฃูุชูุจุฑ 2019</a></li>
<li><a href="../ar475688/index.html">ูู ูู ุงูุฐู ูู ุชูููููุฌูุง ุงููุนูููุงุชุ</a></li>
<li><a href="../ar475694/index.html">ุฃุฎุทุงุก ูู ุงููุชุจ ุงููุฏุฑุณูุฉ ููุถูู ุงูุฏุฑุงุณุฉ</a></li>
<li><a href="../ar475696/index.html">Samodelkin - ุงูุฌูุฑุฌูุฉ ุฃู ุงูุฑูุณูุฉุ</a></li>
<li><a href="../ar475702/index.html">ุณุฌูุงุช ุงูุชูุงุฑูุฑ ุชูุฑูุจูุง ุงูุชูููุฉ: ุดุฑุญ ุงูุจูุงูุงุช ุฑูู 3</a></li>
<li><a href="../ar475708/index.html">ุงูุฐูุงุก ุงูุงุตุทูุงุนู - ูุชุฑุฌู ูุบุฉ</a></li>
<li><a href="../ar475712/index.html">ุชุณููู ุจุฏูู ุงูููุฑ ู ูู SERP SEO: ููููุฉ ุงููุตูู ุฅูู ุงูููุถุน ุตูุฑ ูู Yandex ู Google</a></li>
<li><a href="../ar475720/index.html">8 ุฃูุถู ุงุชุฌุงูุงุช ุงููุคุชูุฑ ุงูุฏููู ูุชูุซูู ุงูุชุนูู (ICLR) 2019</a></li>
<li><a href="../ar475728/index.html">ูุง ูู ุงูุนุถู ุงูุชุงูู ...ุ - ูุญู ูุจุญุซ ุนู ุตูุบุฉ ูููุตุทูุญ ุงูุชุงุณุน ูู ุงูุชุณูุณู ุ ูุธุงุฆู ุชูููุฏ ูุชุญููู Z</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>