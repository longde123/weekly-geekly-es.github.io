<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐ฝ ๐ ๐ง๐ผโ๐คโ๐ง๐ป ESP32 + Arduino Core + FreeRTOS + Blynk = ููุฒู ุจุฏุงูุงุช ุงูุนูู ๐ ๐จ๐ฟโ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฃูุฏุงู ุงููุดุฑูุน 


 ุจุทุฑููุฉ ูุง ุงุชุถุญ ุฃููู ุจููุช ููุฒูู ุ ูููู ุนุธูู. ูู ุฃููู ุงููุงุฎุฑุฉ ูุง ููุฌุฏ ุบุงุฒ ูููุณ ูู ุงููุชููุน ูู ุงููุณุชูุจู ุงููุฑูุจ ุ ูููุฐุง ุงุฎุชุฑุช ููููุงู ุนุธูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ESP32 + Arduino Core + FreeRTOS + Blynk = ููุฒู ุจุฏุงูุงุช ุงูุนูู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479156/" style=";text-align:right;direction:rtl"><h2 id="celi-proekta" style=";text-align:right;direction:rtl">  ุฃูุฏุงู ุงููุดุฑูุน </h2><br><p style=";text-align:right;direction:rtl"> ุจุทุฑููุฉ ูุง ุงุชุถุญ ุฃููู ุจููุช ููุฒูู ุ ูููู ุนุธูู.  ูู ุฃููู ุงููุงุฎุฑุฉ ูุง ููุฌุฏ ุบุงุฒ ูููุณ ูู ุงููุชููุน ูู ุงููุณุชูุจู ุงููุฑูุจ ุ ูููุฐุง ุงุฎุชุฑุช ููููุงู ุนุธูููุง - ูู ุดูุก ุขุฎุฑ ุ ุจุงููุณุจุฉ ูู ุ ุณูููู ุบุงูููุง ุฌุฏูุง ููุชุฏูุฆุฉ ุจุงุณุชุฎุฏุงู ุงูููุฑุจุงุก.  ุญุณููุง ุ ูุฃููุง ุฃูุถูุง ูุงุญุฏุฉ ูู ุฃุฑุฎุต ุงูุชูููุงุช. <br>  ุญุณูุงู ุ ููุฏ ุฃูููุช ุงูุฃูุงุจูุจ ูู ุฌููุน ุฃูุญุงุก ุงูููุฒู ุ ูุนููุช ุงูุจุทุงุฑูุงุช ุ ูุงููุฑุงุฌู ุ ุจุฏุง ุงูุฃูุฑ ุฏุงูุฆูุง ุ ููู ููุงู ุฎุทุฃ ูุง. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฃู ุงุณุชูุนุช ุฅูู ููุณู ุ ุฃุฏุฑูุช ุฃู ูุฐุง ุงูุถูุฏุน ูุง ูุนุฌุจูู ุ ูุฃููู ุจูููุง ุฃูุง ูุณุช ูู ุงูููุฒู (12-16 ุณุงุนุฉ ูู ุงูููู) ุ ุชุนูู ุงูุชุฏูุฆุฉ.  ูุฏ ูุง ูุนูู ุ ูู ุจุชุดุบููู ููุท ูุจู ุงููุตูู ุ ูุฃู ุงููููู ุงูุนุธูู ูุฏูู ูุตูุฑ ุทููู ููุณูุญ ูู ุจุฑูุน ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุจุณุฑุนุฉ.  ููุณ ุงููุถุน ุนูุฏ ููุงู ูุง ููุชุฑุฉ ุทูููุฉ ููุบุงุฏุฑุฉ ุงูููุฒู.  ุญุณููุง ุ ุจุดูู ุนุงู ุ ุงูุฌุฑู ุ ุฅู ุชุฏููุฑ ููุจุถ ุงููุฑุฌู ูุน ุชุบูุฑุงุช ูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูู ุงูุดุงุฑุน ููุณ ุจุทุฑููุฉ ูุง ููุดูุฑ. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ุฃุตุจุญ ูู ุงููุงุถุญ ุฃูู ุจุฏูู ุงูุชุดุบูู ุงูุขูู ุ ูู ุฃู ููุงู ุ ูููู ุงููุฑุฌู ูู ุงูุฃุจุณุท ุ ูููู ูุฏูู ุฌูุงุช ุงุชุตุงู ูุชูุตูู ูุฑุญู ุงูุชุญูู ุงูุฎุงุฑุฌู.  ุจุงูุทุจุน ุ ููููู ุดุฑุงุก ุบูุงูุฉ ุนูู ุงูููุฑ ุจุฌููุน ุงููุธุงุฆู ุงูุถุฑูุฑูุฉ ุ ููู ุจุงููุณุจุฉ ูู ุ ูุฅู ูุฐู ุงูุบูุงูุงุช ุบูุฑ ุฅูุณุงููุฉ ุฅูู ุญุฏ ูุง.  ุจุงูุฅุถุงูุฉ ุฅูู ุฃููู ููุช ุฃุฑุบุจ ูู ุงููุฑูุตุงุก ูุน ุงูุนููู ุ ูุงูุชุฃูู ูู ุดูุก ูู ุฃุฌู ุงูุฑูุญ ุ ูุชุนูู ุงููููู ูู C ุ ูุฅู ูุงู ุฐูู ูู ูุณุฎุฉ ุงุฑุฏูููู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุญูู ุงููุชุทูุจุงุช: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุถุจุท ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ setpoint </li><li style=";text-align:right;direction:rtl">  ุงูุชุญูู ูู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุณุงุฆู ุงูุชุจุฑูุฏ ุงุนุชูุงุฏูุง ุนูู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูู ุงูููุงุก ุงูุทูู ุฃู ูุฏูููุง </li><li style=";text-align:right;direction:rtl">  ุงูููุงุทู ุงูุฒูููุฉ ูุน ุฅุนุฏุงุฏุงุช ูุฎุชููุฉ ุ ุจุฑูุฏุฉ ูู ุงูููุงุฑ ุ ูุฃูุซุฑ ุณุฎููุฉ ูููุง </li><li style=";text-align:right;direction:rtl">  ุงููุถุน ุงูุชููุงุฆู ุ ูุน ุงูุงูุชูุงู ุงูุชููุงุฆู ูููุง ูููุงุฑุง </li><li style=";text-align:right;direction:rtl">  ุงููุถุน ุงููุฏูู ุ ูุง ุงูุชุญููุงุช ุงูุณูุงุฑุงุช ุ ูุนุทูุฉ ููุงูุฉ ุงูุฃุณุจูุน </li><li style=";text-align:right;direction:rtl">  ุงููุถุน ุบูุฑ ุงูุชููุงุฆู ุ ุญูุซ ููููู ุถุจุท ุฃู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุณุงุฆู ุงูุชุจุฑูุฏ ูุฏูููุง ูุชุดุบูู / ุฅููุงู ุชุดุบูู ุงููุฑุฌู </li><li style=";text-align:right;direction:rtl">  ุงูุชุญูู ูู ุงูุชุณุฎูู ูุญูููุง ุ ูู ุงูุฃุฒุฑุงุฑ ูุงูุดุงุดุฉ ููู ุฎูุงู ูููุน ุงูููุจ / ุชุทุจูู ุงููุงุชู ุงููุญููู </li></ul><br><p style=";text-align:right;direction:rtl">  ูุงู ุฐูู ูู ุงูุจุฏุงูุฉ ุ ุซู ุนุงููุช ูุฃุถุงู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชุญูู ูู ูุตุจุงุญ ุงูุดุงุฑุน (ุฃุถูุงุก ูุงุดูุฉ LED) </li><li style=";text-align:right;direction:rtl">  ูุธุงู ุงูุฅูุฐุงุฑ ุนูู ุฃุณุงุณ ุงุณุชุดุนุงุฑ ุงูุญุฑูุฉ ุ ูุตูุงุฑุงุช ุงูุฅูุฐุงุฑ ููุตุจุงุญ ุงูุดุงุฑุน </li><li style=";text-align:right;direction:rtl">  ููุงุณ ุงูุทุงูุฉ ุงูุชู ูุณุชููููุง ุงููุฑุฌู ูู ุงูููู / ุงูุดูุฑ / ุงูุณูุฉ + ููู ุดูุฑ ูู ุงูุนุงู </li><li style=";text-align:right;direction:rtl">  ูุถุน ุงูุชูุจูู ููุท ุนู ุทุฑูู ุงูููุนุงู ุงูุจุทูุก ูููุตุจุงุญ </li><li style=";text-align:right;direction:rtl">  ูุถุน ุงูุฅุดุงุฑุฉ ุนู ุทุฑูู ูููุถ ุณุฑูุน ููุตุจุงุญ ูุตูุงุฑุงุช ูุตูุฑุฉ ูู ุตูุงุฑุงุช ุงูุฅูุฐุงุฑ </li><li style=";text-align:right;direction:rtl">  ูุถุน ุงูุฅุดุงุฑุฉ ุนู ุทุฑูู ูููุถ ุณุฑูุน ูููุตุจุงุญ ูุนููู ูุณุชูุฑ ูู ุตูุงุฑุงุช ุงูุฅูุฐุงุฑ </li></ul><br><p style=";text-align:right;direction:rtl">  ุงูุบุฑุถ ูู ูุฐุง ุงูููุงู ูู ุชุจุงุฏู ุงูุฎุจุฑุงุช ุ ููุตู ุดูุก ุจุงููุบุฉ ุงูุฑูุณูุฉ ูู ุฃุฌุฏู ุนูู ุงูุฅูุชุฑูุช.  ุฃุนุชูุฏ ุฃู ูุฐู ุงูููุงูุฉ ุณุชููู ูููุฏุฉ ูููุจุชุฏุฆูู Arduino ุงูุนู ุฐูู ุจููุณูู ุงูุฐูู ูู ุจุงููุนู ุนูู ุฏุฑุงูุฉ ุจุงูุจุฑูุฌุฉ ุ  ุฃุดูุงุก ุฃุณุงุณูุฉ ููุบุงูุฉ ูู ุฃุตููุง.  ุญุงููุช ุฃู ุฃูุชุจ ุงูููุฏ ุจูุถูุญ ูุฏุฑ ุงูุฅููุงู ุ ูุขูู ุฃู ุฃููู ูุฏ ูุฌุญุช. </p><br><h2 id="chto-bylo-v-nachale" style=";text-align:right;direction:rtl">  ูุง ูุงู ูู ุงูุจุฏุงูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ูู ุงูุจุฏุงูุฉ ุ ุชู ุชูููุฐ ุงููุดุฑูุน ุนูู ูุฌููุนุฉ ูุจูุฑุฉ ูู Arduino Nano + ESP8266 ุ ูููู ESP ููุณ ูุฏุฑุน ุ ูููู ูุฌูุงุฒ ูููุตู.  ููุงุฐุง ูุฐุง  ูุนู ุ ูุฃููู ุญุตูุช ุจุงููุนู ุนูู ูู ูุฐุง ุ ููู ูู ููู ููุงู ูุงู ูู ุงููููุฉ ุนูู ุงูุฅุทูุงู ุ ูุฐูู ูู ุฃูู ุฃุฑูุฏ ุดุฑุงุก ุญุฏูุฏ ุฌุฏูุฏ ูู ุญูุซ ุงููุจุฏุฃ.  ููุงุฐุง ESP ููุณ ูุซู ุงูุฏุฑุนุ  ุงูุขู ุฃูุง ูุง ุฃุชุฐูุฑ ุฐูู. </p><br><p style=";text-align:right;direction:rtl">  ูุงุฏ Arduino ุฌููุน ุงูุนูููุงุช ูุฃูู ูุญุชูู ุนูู ุงููููุฉ ุงููุทููุจุฉ ูู GPIO ุ ูุฃุฑุณู ESP ุฌููุน ุงูุจูุงูุงุช ุฅูู ุฎุงุฏู Blynk ุ ูุฃูู ูุงู ูุนุฑู ุงูุฅูุชุฑูุช ููู ููู ูุฏูู GPIO ูุงูููุง.  ุฑุจุทูุง ุฃููุณูู ูู ุฎูุงู UART ุ ูุฃุฑุณููุง JSON ูุน ุงูุจูุงูุงุช ูุจุนุถูู ุงูุจุนุถ.  ุงููุฎุทุท ุบูุฑ ุนุงุฏู ุ ูููู ูุฌุญ ููุฏุฉ ุนุงู ูุน ุนุฏู ูุฌูุฏ ุฃู ุดูุงูู ุชูุฑูุจูุง.  ูููู <a href="https://github.com/abashind/HomeHeater">ูุฃู ุดุฎุต</a> ููุชู ุฑุคูุฉ <a href="https://github.com/abashind/HomeHeater">ุจุฑูุงูุฌ ุงูุชุฑููุฒ</a> . </p><br><p style=";text-align:right;direction:rtl">  ุณูู ุฃุจุฏู ุชุญูุธูุง ุนูู ุงูููุฑ ุ ูู ุฃูู ูุงูุฑุฉ ุฌุฏูุง ูู ุฐูู ุงูููุช (ูุญุชู ุงูุขู ุฃุฑุบุจ ูู ุงูููุงู ุจุฐูู ุจุดูู ุฃูุถู) ุ ูุฐูู ูู ุงูุฃูุถู ุฃูุง ุชุฑุงูุจ ุงููุณุงุก ุงูุญูุงูู ูุงูุฃุทูุงู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชู ูุชุงุจุฉ ูู ุดูุก ูู Arduino IDE ุ ููู ูุชู ุชุฐูุฑู ููููุง ุ ูุงูุฐู ูุงู ูุญุฏูุฏูุง ุฌุฏูุง ูู ุญูุซ ุฅุนุงุฏุฉ ุงูุชูุทูู ุ ููู ุดูุก ุจุฏุงุฆู ููุบุงูุฉ ููุงู. </p><br><h2 id="zhelezo" style=";text-align:right;direction:rtl">  ุญุฏูุฏ </h2><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ููุฏ ูุฑ ุนุงู ุ ูุชูููุช ุงูููุงุฑุฏ ุงููุงููุฉ ูู ุดุฑุงุก ESP32 devkit v1 ุ ุงูุชู ุชุญุชูู ุนูู ูุง ูููู ูู GPIO ุ ูู ุงููุตูู ุฅูู ุงูุฅูุชุฑูุช ูุจุดูู ุนุงู ูุญุฏุฉ ุชุญูู ูุงุฆูุฉ.  ุจุงูุฅุถุงูุฉ ุฅูู ุงูููุงุช ุ ุฃุญุจุจุชูุง ูุซูุฑูุง ูู ููุงูุฉ ุงูุนูู. </p><br><p style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงูุญุฏูุฏ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ESP32 devkit v1 noname ุงูุตูู </li><li style=";text-align:right;direction:rtl">  3 ุฃุฌูุฒุฉ ุงุณุชุดุนุงุฑ ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ DS18B20 ุ ูุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุฏุงุฎู ุงูููุฒู ุ ูู ุงูุฎุงุฑุฌ ูุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงููุจุฑุฏ ูู ุงูุฃูุงุจูุจ </li><li style=";text-align:right;direction:rtl">  ูุชูุฉ ูู 4 ุงูุชุจุฏููุงุช </li><li style=";text-align:right;direction:rtl">  ุฌูุงุฒ ุงุณุชุดุนุงุฑ ุงูุจูุฑ HC-SR501 </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุฃุฑุณู ูุฎุทุทูุง ุ ุฃุนุชูุฏ ุฃู ูู ุดูุก ุณูููู ูุงุถุญูุง ูู ูุญุฏุงุช ุงููุงูุฑู ุจุฃุณูุงุก ุงููุณุงููุฑ. </p><br><h2 id="pochemu-freertos-i-arduino-core" style=";text-align:right;direction:rtl">  ููุงุฐุง FreeRTOS ูุงุฑุฏูููู ููุฑ </h2><br><p style=";text-align:right;direction:rtl">  ูุฌููุนุฉ ูู ุงูููุชุจุงุช ููุชูุจุฉ ุนูู Arduino ุ ุนูู ูุฌู ุงูุฎุตูุต ุ Blynk ููุณู ุ ูุฐูู ูู ุชููุช ูู Arduino Core. </p><br><p style=";text-align:right;direction:rtl">  FreeRTOS ูุฃูู ูุณูุญ ูู ุจุชูุธูู ุนูู ูุทุนุฉ ุตุบูุฑุฉ ูู ุงูุญุฏูุฏ ููุงุซูุฉ ูุนูู ูุญุฏุฉ ุชุญูู ุตูุงุนูุฉ ูุงููุฉ.  ูููู ููู ูู ูููุฉ ุฅูู ูููุชูุง ุงูุฎุงุตุฉ ุ ุฃู ุฅููุงููุง ุ ุฃู ุชุดุบูููุง ุ ุฃู ุฅูุดุงุคูุง ุ ุนูุฏ ุงูุถุฑูุฑุฉ ุ ุญุฐููุง - ูู ูุฐุง ุฃูุซุฑ ูุฑููุฉ ุจูุซูุฑ ูู ูุชุงุจุฉ ุญูุงูุฉ ุทูููุฉ ูู ููุฏ Arduino ุ ุนูุฏูุง ูุชู ูู ุดูุก ูู ุงูููุงูุฉ ุจุฏูุฑู ูู ูุธููุฉ ุงูุญููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุงุณุชุฎุฏุงู FreeRTOS ุ ุณูุชู ุชูููุฐ ูู ูููุฉ ูู ููุช ูุญุฏุฏ ุจุฏูุฉ ุ ุฅุฐุง ูุงูุช ุทุงูุฉ ุงููุนุงูุฌ ูุงููุฉ ููุท.  ุนูู ุงูุนูุณ ูู ุฐูู ุ ูู Arduino ูุชู ุชูููุฐ ุฌููุน ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ูุธููุฉ ูุงุญุฏุฉ ุ ูู ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ ุ ุฅุฐุง ุชุจุงุทุฃ ุดูุก ุ ุณูุชู ุชูููุฐ ุจููุฉ ุงูููุงู ูุน ุชุฃุฎูุฑ.  ูุฐุง ููุญูุธ ุจุดูู ุฎุงุต ุนูุฏ ุฅุฏุงุฑุฉ ุงูุนูููุงุช ุงูุณุฑูุนุฉ ุ ูู ูุฐุง ุงููุดุฑูุน ุณูู ููุงูุด ูุฐุง ูููุถ ุงููุตุจุงุญ ูุตููุฑ ุงูุฅูุฐุงุฑ ุฃุฏูุงู. </p><br><h2 id="pro-logiku" style=";text-align:right;direction:rtl">  ุนู ุงูููุทู </h2><br><h3 id="pro-freertos-taski" style=";text-align:right;direction:rtl">  ุญูู ููุงู FreeRTOS </h3><br><p style=";text-align:right;direction:rtl">  โ ุชุตู ุฅูู <a href="https://github.com/abashind/home_auto_2019">ูุงูู ุงูุชุฑููุฒ ูููุดุฑูุน</a> </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ุนูุฏ ุงุณุชุฎุฏุงู FreeRTOS ุ ุชูุนุจ ูุธููุฉ ุงูุฅุนุฏุงุฏ ุฏูุฑ ุงููุธููุฉ ุงูุฑุฆูุณูุฉ ุ ูููุทุฉ ุงูุฏุฎูู ุฅูู ุงูุชุทุจูู ุ ููุชู ุฅูุดุงุก ููุงู FreeRTOS (ุงููุดุงุฑ ุฅูููุง ูููุง ููู ุจุงูููุงู) ุ ูุง ูููู ุงุณุชุฎุฏุงู ูุธููุฉ ุงูุญููุฉ ุนูู ุงูุฅุทูุงู. </p><br><p style=";text-align:right;direction:rtl">  ููุฑ ูู ูููุฉ ุตุบูุฑุฉ ูุญุณุงุจ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุณุงุฆู ุงูุชุจุฑูุฏ: </p><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculate_water_temp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *pvParameters)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (heating_mode == <span class="hljs-number"><span class="hljs-number">3</span></span>) {} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp_outside &gt; <span class="hljs-number"><span class="hljs-number">-20</span></span>) max_water_temp = <span class="hljs-number"><span class="hljs-number">60</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp_outside &lt;= <span class="hljs-number"><span class="hljs-number">-20</span></span> &amp;&amp; temp_outside &gt; <span class="hljs-number"><span class="hljs-number">-25</span></span>) max_water_temp = <span class="hljs-number"><span class="hljs-number">65</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp_outside &lt;= <span class="hljs-number"><span class="hljs-number">-25</span></span> &amp;&amp; temp_outside &gt; <span class="hljs-number"><span class="hljs-number">-30</span></span>) max_water_temp = <span class="hljs-number"><span class="hljs-number">70</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (temp_outside &lt;= <span class="hljs-number"><span class="hljs-number">-30</span></span>) max_water_temp = <span class="hljs-number"><span class="hljs-number">85</span></span>; } vTaskDelay(<span class="hljs-number"><span class="hljs-number">1000</span></span> / portTICK_RATE_MS); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชู ุฅุนูุงููุง ูุฏุงูุฉ ูุฌุจ ุฃู ุชุฃุฎุฐ pvParameters <code>pvParameters</code> ุ ููุชู ุชูุธูู ุญููุฉ ูุง ููุงูุฉ ููุง ุฏุงุฎู ุงููุธููุฉ ุ ูุฃูุง ุงุณุชุฎุฏููุง <code>while (true)</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุชู <code>vTaskDelay(1000 / portTICK_RATE_MS)</code> ุญุณุงุจูุฉ ุจุณูุทุฉ ูุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ (ุฅุฐุง ูุงู ูุถุน ุงูุชุดุบูู ูุณูุญ ุจุฐูู) ุซู ูุชู <code>vTaskDelay(1000 / portTICK_RATE_MS)</code> ูู ุงููููุฉ ุจูุงุณุทุฉ <code>vTaskDelay(1000 / portTICK_RATE_MS)</code> ููุฏุฉ ุซุงููุฉ ูุงุญุฏุฉ.  ูู ูุฐุง ุงููุถุน ุ ูุง ูุณุชููู ููุช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุ ููุชู ุชุฎุฒูู ุงููุชุบูุฑุงุช ุงูุชู ุนููุช ุจูุง ุงููููุฉ ุ ูุจูุนูู ุขุฎุฑ ุ ุงูุณูุงู ุ ุนูู ุงูููุฏุณ ูุฅุฎุฑุงุฌูุง ูู ููุงู ุนูุฏูุง ูุญูู ุงูููุช. </p><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฅูุดุงุก ุงููููุฉ ุงูุชุงููุฉ ูู ุงูุฅุนุฏุงุฏ.  ูุชู ุฐูู ุนู ุทุฑูู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ <code>xTaskCreate</code> : </p><br><p style=";text-align:right;direction:rtl"> <code>xTaskCreate(calculate_water_temp, "calculate_water_temp", 2048, NULL, 1, NULL);</code> </p> <br><p style=";text-align:right;direction:rtl">  ููุงู ุงูุนุฏูุฏ ูู ุงููุณุงุฆุท ุ ูููู ุจุงููุณุจุฉ ููุง ุ ุชุนุชุจุฑ <em>calculate_water_temp</em> ูููุฉ - ุงุณู ุงูุฏุงูุฉ ุงูุชู ุชุญุชูู ุนูู ุฑูุฒ ุงููููุฉ ู 2048 ูู ุญุฌู ุงูููุฏุณ ุจุงูุจุงูุช. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุจุฏุงูุฉ ูุงู ุญุฌู ุงูุฑุตุฉ ูุถุจุท ุงูุฌููุน ุนูู 1024 ุจุงูุช ุ ุซู ููุช ุจุญุณุงุจ ุงูุทุฑููุฉ ุงููุทููุจุฉ ุนู ุทุฑูู ุงููุชุงุจุฉ ุ ุฅุฐุง ุจุฏุฃุช ูุญุฏุฉ ุงูุชุญูู ูู ุงูุณููุท ูุน ุชุฌุงูุฒ ุณุนุฉ ููุฏุณ (ููุง ูููู ุฑุคูุชู ูู ุงูุฅุฎุฑุงุฌ ูู uart) ุ ููุฏ ููุช ุจุฒูุงุฏุฉ ุญุฌู ุงูุฑุตุฉ ุจููุฏุงุฑ 2 ูุฑุงุช ุ ุฅุฐุง ูู ูุณุงุนุฏ ุ ุจููุฏุงุฑ ูุฑุชูู ููุง ุฅูู ุฐูู ุญุชู ูุนูู.  ุจุงูุทุจุน ุ ูุฐุง ูุง ูุญูุธ ุงูุฐุงูุฑุฉ ุฃูุซุฑ ูู ุงููุงุฒู ุ ูููู ESP32 ูุฏูู ูุง ูููู ูููุง ุ ูู ุญุงูุชู ุ ูุง ููููู ุฃู ุชูุชู ุจูุฐุง. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุฃูุถูุง ุชุญุฏูุฏ ูุคุดุฑ ูููููุฉ - ููุจุถ ููููู ูู ุฎูุงูู ุงูุชุญูู ูู ุงููููุฉ ุจุนุฏ ุงูุฅูุดุงุก ุ ุนูู ุณุจูู ุงููุซุงู - ุญุฐู.  ูุฐุง ูู NULL ุงูุฃุฎูุฑ ูู ุงููุซุงู.  ูุชู ุฅูุดุงุก ููุจุถ ูุซู ูุฐุง: </p><br><p style=";text-align:right;direction:rtl"> <code>TaskHandle_t slow_blink_handle;</code> </p> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุนูุฏ ุฅูุดุงุก ูููุฉ ุ <code>xTaskCreate</code> ุชูุฑูุฑ ูุคุดุฑ ุฅูู ุงููุคุดุฑ ุฅูู ุงููุนููุฉ xTaskCreate: </p><br><p style=";text-align:right;direction:rtl"> <code>xTaskCreate(outside_lamp_blinks, "outside_lamp_blynk", 10000, (void *)1000, 1, &amp;slow_blink_handle);</code> </p> <br><p style=";text-align:right;direction:rtl">  ูุฅุฐุง ุฃุฑุฏูุง ุฅุฒุงูุฉ ุงููููุฉ ุ ููุญู ููุนู ุฐูู: </p><br><p style=";text-align:right;direction:rtl"> <code>vTaskDelete(slow_blink_handle);</code> </p> <br><p style=";text-align:right;direction:rtl">  ูููู ุฑุคูุฉ ููููุฉ ุงุณุชุฎุฏุงู ุฐูู ูู ุฑูุฒ <code>panic_control</code> panic_control. </p><br><h3 id="pro-freertos-myuteksy" style=";text-align:right;direction:rtl">  FreeRTOS ุงูุงูุฌุงุจูุงุช </h3><br><p style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู Mutex ูุฅุฒุงูุฉ ุงูุชุนุงุฑุถุงุช ุจูู ุงูููุงู ุนูุฏ ุงููุตูู ุฅูู ุงูููุงุฑุฏ ูุซู uart ุ wifi ุ ุฅูุฎ.  ูู ุญุงูุชู ุ ููุช ุจุญุงุฌุฉ ุฅูู mutexes ูููุงู ูุงู ูุงููุตูู ุฅูู ุฐุงูุฑุฉ ููุงุด. </p><br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุฑุงุจุท ุฅูู mutex: </p><br><p style=";text-align:right;direction:rtl"> <code>SemaphoreHandle_t wifi_mutex;</code> </p> <br><p style=";text-align:right;direction:rtl">  ูู <code>setup</code> ุจุฅูุดุงุก ูุฒุงููุฉ: </p><br><p style=";text-align:right;direction:rtl"> <code>wifi_mutex = xSemaphoreCreateMutex();</code> </p> <br><p style=";text-align:right;direction:rtl">  ุนูุงูุฉ ุนูู ุฐูู ุ ุนูุฏูุง ูุญุชุงุฌ ุฅูู ุงููุตูู ุฅูู ููุฑุฏ ุงููููุฉ ุ ูุฅูู ูุชุทูุจ ุงูุฃูุฑ mutex ุ ููุง ูุชูุญ ูุจููุฉ ุงูููุงู ูุนุฑูุฉ ุฃู ุงูููุฑุฏ ูุดุบูู ููุฌุจ ุฃูุง ูุญุงูู ุงูุชุนุงูู ูุนู: </p><br><p style=";text-align:right;direction:rtl"> <code>xSemaphoreTake(wifi_mutex, portMAX_DELAY);</code> </p> <br><p style=";text-align:right;direction:rtl">  <code>portMAX_DELAY</code> - ุงูุชุธุฑ ุฅูู ุฃุฌู ุบูุฑ ูุณูู ุญุชู ูุชู ุชุญุฑูุฑ ุงูููุฑุฏ ู mutex ูู ูุจู ููุงู ุฃุฎุฑู ุ ูู ูุฐุง ุงูููุช ุณูู ุชูุงู ุงููููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุงูุนูู ูุน ุงูููุฑุฏ ุ ูุนุทู mutex ุจุญูุซ ูููู ููุขุฎุฑูู ุงุณุชุฎุฏุงูู: </p><br><p style=";text-align:right;direction:rtl"> <code>xSemaphoreGive(wifi_mutex);</code> </p> <br><p style=";text-align:right;direction:rtl">  ููููู ุฑุคูุฉ ุงูููุฏ ุจูุฒูุฏ ูู <code>send_data_to_blynk</code> ูู <code>send_data_to_blynk</code> send_data_to_blynk. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุงู ุนุฏู ุงุณุชุฎุฏุงู mutexes ุบูุฑ ููุญูุธ ุฃุซูุงุก ุชุดุบูู ูุญุฏุฉ ุงูุชุญูู ุ ูููู ุฃุซูุงุก ุชุตุญูุญ JTAG ุ ุงุฎุชูุช ุงูุฃุฎุทุงุก ุจุงุณุชูุฑุงุฑ ูุงูุชู ุงุฎุชูุช ุจุนุฏ ุงุณุชุฎุฏุงู mutexes. </p><br><h3 id="kratkoe-opisanie-tasok" style=";text-align:right;direction:rtl">  ูุตู ูุตูุฑ ูู tasok </h3><br><p style=";text-align:right;direction:rtl">  <code>get_temps</code> - ุชููู ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูู ุฃุฌูุฒุฉ ุงูุงุณุชุดุนุงุฑ ุ ูู 30 ุซุงููุฉ ุ ูู ูุซูุฑ ูู ุงูุฃุญูุงู ููุณ ูู ุงูุถุฑูุฑู. <br>  <code>get_time_task</code> - ุงุญุตู ุนูู ุงูููุช ูู ุฎูุงุฏู NTP.  ูู ุงูุณุงุจู ุ ูุงู ุงูููุช ูุฏ ุญุงู ูู ูุญุฏุฉ RTC DS3231 ุ ููููุง ุจุฏุฃุช ุจุงููุดู ุจุนุฏ ุนุงู ูู ุงูุนูู ุ ูุฐูู ูุฑุฑุช ุงูุชุฎูุต ููู ุนูู ุงูุฅุทูุงู.  ูุฑุฑุช ุฃู ูุฐุง ููุณ ูู ุฃู ุชุจุนุงุช ุฎุงุตุฉ ุจุงููุณุจุฉ ูู ุ ุญูุซ ูุคุซุฑ ุงูููุช ุจุดูู ุฑุฆูุณู ุนูู ุชุจุฏูู ุงูููุทูุฉ ุงูุฒูููุฉ ููุชุฏูุฆุฉ - ูููุง ุฃู ููุงุฑุง.  ุฅุฐุง ุงุฎุชูู ุงูุฅูุชุฑูุช ุฃุซูุงุก ุชุดุบูู ูุญุฏุฉ ุงูุชุญูู ุ ูุณูู ูุชุฌูุฏ ุงูููุช ุจุจุณุงุทุฉ ุ ูุณุชุธู ุงูููุทูุฉ ุงูุฒูููุฉ ููุง ูู.  ุฅุฐุง ูุงูุช ูุญุฏุฉ ุงูุชุญูู ูุชูููุฉ ุนู ุงูุชุดุบูู ูุจุนุฏ ุงูุชุดุบูู ุ ูุง ููุฌุฏ ุฅูุชุฑูุช ุ ูุณูููู ุงูููุช ุฏุงุฆููุง 0:00:00 - ูุถุน ุงูุชุณุฎูู ูู ุงูููู. <br>  <code>calculate_water_temp</code> - ุงููุฐููุฑุฉ ุฃุนูุงู. <br>  <code>detect_pir_move</code> - ุชููู ุฅุดุงุฑุฉ ุญุฑูุฉ ูู ุฌูุงุฒ ุงุณุชุดุนุงุฑ HC-SR501.  ูุดูู ุงููุณุชุดุนุฑ ูุญุฏุฉ ููุทููุฉ + 3.3 <code>digitalRead</code> ุนูุฏ ุงูุชุดุงู ุงูุญุฑูุฉ ุ ูุงูุชู ูุชู ุงูุชุดุงููุง ุจุงุณุชุฎุฏุงู <code>digitalRead</code> ุ ุจุงูููุงุณุจุฉ ุ ูุฌุจ ุณุญุจ ุฏุจูุณ ุงูุชุดุงู ูุฐุง ุงููุณุชุดุนุฑ ุฅูู GND - <code>pinMode(pir_pin, INPUT_PULLDOWN);</code> <br>  <code>heating_control</code> - ุชุจุฏูู ุฃูุถุงุน ุงูุชุฏูุฆุฉ. <br>  <code>out_lamp_control</code> - ุงูุชุญูู ูู ูุตุจุงุญ ุงูุดุงุฑุน. <br>  <code>panic_control</code> - ุงูุชุญูู ูู ุตูุงุฑุงุช ุงูุฅูุฐุงุฑ ูุฃุถูุงุก ูุงุดูุฉ ุนูุฏ ุงูุชุดุงู ุงูุญุฑูุฉ.  ูุฅูุดุงุก ุชุฃุซูุฑ ุตูุงุฑุงุช ุงูุฅูุฐุงุฑ ูุงููุตุงุจูุญ ุงููุงูุถุฉ ุ ูุชู ุงุณุชุฎุฏุงู ููุงู ูููุตูุฉ ู <code>siren_beeps</code> ู <code>siren_beeps</code> .  ุนูุฏ ุงุณุชุฎุฏุงู FreeRTOS ุ ูุฅู ุงููููุถ ูุงูุตููุฑ ูุนููุงู ุชูุงููุง ุชูุงููุง ุ ุชูุงููุง ุนูู ุงูููุงุตู ุงูุฒูููุฉ ุงููุญุฏุฏุฉ ุ ูุง ุชุคุซุฑ ุงูููุงู ุงูุฃุฎุฑู ุนูู ุนููููุง ุ ูุฃู  ุงููู ูุนูุดูู ูู ุชูุงุฑุงุช ูููุตูุฉ.  ูุถูู FreeRTOS ุฃู ูุชู ุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุงููููุฉ ูู ุงูููุช ุงููุญุฏุฏ.  ุนูุฏ ุชูููุฐ ูุฐู ุงููุธุงุฆู ูู <code>loop</code> ูู ุดูุก ูุนูู ุจุดูู ุณูุณ ุ ูุฃูู  ุชุชุฃุซุฑ ุจุชูููุฐ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฃุฎุฑู. <br>  <code>guard_control</code> - ุงูุชุญูู ูู ุฃูุถุงุน ุงูุญุฑุงุณุฉ. <br>  <code>send_data_to_blynk</code> - ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุชุทุจูู Blynk. <br>  <code>run_blynk</code> - ูููุฉ ูุชุดุบูู <code>Blynk.run()</code> ููุง ูู ูุทููุจ ุจูุงุณุทุฉ ุฏููู ุงุณุชุฎุฏุงู Blynk.  ููุง ุฃููููุง ุ ูุฐุง ูุทููุจ ููุญุตูู ุนูู ุงูุจูุงูุงุช ูู ุงูุชุทุจูู ุฅูู ูุญุฏุฉ ุงูุชุญูู.  ุจุดูู ุนุงู ุ ูุฌุจ ุฃู ูููู <code>Blynk.run()</code> ูู <code>loop</code> ุ ููููู ูู ุงูุฃุณุงุณ ูุง ุฃุฑูุฏ ูุถุน ุฃู ุดูุก ููุงู ูุฌุนูู ูููุฉ ูููุตูุฉ. <br>  <code>write_setting_to_pref</code> - ุฅุนุฏุงุฏุงุช ุงูุชุณุฌูู ูุฃููุงุท ุงูุชุดุบูู ูู ุฃุฌู ุงูุชูุงุทูุง ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู.  ุญูู ููุตููุฉ ูุณูุชู ูุตู ุฃุฏูุงู. <br>  <code>count_heated_hours</code> - ุญุณุงุจ ููุช ุชุดุบูู ุงููุฑุฌู.  ููุฏ ููุช ุจุฐูู ุจุจุณุงุทุฉ ุ ุฅุฐุง ุชู ุชุดุบูู ุงููุฑุฌู ูู ูุญุธุฉ ุจุฏุก ุงููููุฉ (ูุฑุฉ ูุงุญุฏุฉ ูู 30 ุซุงููุฉ) ุ ูู ุฐุงูุฑุฉ ุงูููุงุด ุ ุชุฒุฏุงุฏ ูููุฉ ุงูููุชุงุญ ุงููุทููุจ ุจููุฏุงุฑ ูุงุญุฏ. <br>  <code>send_heated_hours_to_app</code> - ูู ูุฐู ุงููููุฉ ุ ูุชู ุงุณุชุฎุฑุงุฌ ุงูููู ูุถุฑุจูุง ูู 0.00833 (1/120 ุณุงุนุฉ) ุ ููุชู ุฅุฑุณุงู ุณุงุนุงุช ุชุดุบูู ุงููุฑุฌู ุงููุณุชููุฉ ุฅูู ุชุทุจูู Blynk. <br>  <code>feed_watchdog</code> - ุชุบุฐูุฉ ุงูููุงูุฉ ุงูุฏูููุฉ ููุทุงูุฉ.  ุงุถุทุฑุฑุช ุฅูู ูุชุงุจุฉ ุงูููุงูุฉ ุงูุฏูููุฉ ููุทุงูุฉ ุ ูุฃูู  ูุฑุฉ ูุงุญุฏุฉ ูู ุจุถุนุฉ ุฃูุงู ูุญุฏุฉ ุชุญูู ูููู ุชุฌููุฏ.  ูุง ูู ูุชุตู ุจู ุบูุฑ ูุงุถุญ ุ ูุฏ ูููู ููุงู ููุน ูู ุงูุชุฏุงุฎู ูู ุฅูุฏุงุฏุงุช ุงูุทุงูุฉ ุ ูููู ุงุณุชุฎุฏุงู ุงูููุงูุฉ ุงูุฏูููุฉ ููุทุงูุฉ ูุญู ูุฐู ุงููุดููุฉ.  ูุคูุช ุงูููุงูุฉ ุงูุฏูููุฉ ููุทุงูุฉ 10 ุซูุงู ุ ูุง ุจุฃุณ ุฅุฐุง ูู ููู ุฌูุงุฒ ุงูุชุญูู ูุชุงุญูุง ููุฏุฉ 10 ุซูุงูู. <br>  <code>heart_beat</code> - ูููุฉ ูุน ุงููุจุถ.  ุนูุฏ ุชูุฑูุฑ ูุญุฏุฉ ุงูุชุญูู ุ ุฃุฑูุฏ ุฃู ุฃุนุฑู ุฃูู ูุนูู ุจุดูู ุฌูุฏ.  ูุฃู  ุนูู <code>Serial.begin(9600);</code> ูุง ููุฌุฏ LED ูุถูู ุ ุงุถุทุฑุฑุช ุฅูู ุงุณุชุฎุฏุงู UART LED - ุชุซุจูุช <code>Serial.begin(9600);</code>  ูุงูุชุจ ุณูุณูุฉ ุทูููุฉ ูู UART.  ุงููุง ุชุนูู ุจุดูู ุฌูุฏ ุฌุฏุง. </p><br><h3 id="esp32-nvs-wear-leveling" style=";text-align:right;direction:rtl">  ESP32 NVS ุงุฑุชุฏุงุก ุงูุชุณููุฉ </h3><br><p style=";text-align:right;direction:rtl">  <em>ุงูุฃูุตุงู ุงูุชุงููุฉ ุบูุฑ ูุงุถุญุฉ ุฅูู ุญุฏ ูุง ุ ุญุฑูููุง ุนูู ุงูุฃุตุงุจุน ุ ููุท ูููู ุฌููุฑ ุงููุดููุฉ.</em>  <em><a href="https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/storage/nvs_flash.html">ูุฒูุฏ ูู ุงูุชูุงุตูู</a></em> </p><br><p style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู Arduino ุฐุงูุฑุฉ EEPROM ูุชุฎุฒูู ุงูุจูุงูุงุช ูู ุฐุงูุฑุฉ ุบูุฑ ูุชููุจุฉ.  ูุฐู ูู ุฐุงูุฑุฉ ุตุบูุฑุฉ ูููู ูููุง ูุชุงุจุฉ ูู ุจุงูุช ููุณุญูุง ุจุดูู ูููุตู ุ ุจูููุง ูุชู ูุณุญ ุฐุงูุฑุฉ ุงูููุงุด ููุท ุญุณุจ ุงููุทุงุนุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูุง ุชูุฌุฏ EEPROM ูู ESP32 ุ ูููู ุชูุฌุฏ ุนุงุฏุฉ ุฐุงูุฑุฉ ููุงุด ุจุณุนุฉ 4 ููุฌุงุจุงูุช ููููู ูู ุฎูุงููุง ุฅูุดุงุก ุฃูุณุงู ูุจุฑุงูุฌ ุงูุชุญูู ุงูุซุงุจุชุฉ ุฃู ูุชุฎุฒูู ุจูุงูุงุช ุงููุณุชุฎุฏู.  ุฃูุณุงู ูุจูุงูุงุช ุงููุณุชุฎุฏู ูู ุนุฏุฉ ุฃููุงุน - NVS ุ FATFS ุ SPIFFS.  ูุฌุจ ุงุฎุชูุงุฑู ุจูุงุกู ุนูู ููุน ุงูุจูุงูุงุช ุงููุนุฏุฉ ููุชุณุฌูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฃู  ุฌููุน ุงูุจูุงูุงุช ุงูุชู ุชุชู ูุชุงุจุชูุง ูู ูุฐุง ุงููุดุฑูุน ูู ูู ุงูููุน Int ุ ููุฏ ุงุฎุชุฑุช NVS - ุงูุชุฎุฒูู ุจุฏูู Volitile.  ูุฐุง ุงูููุน ูู ุงูุชูุณูู ููุงุณุจ ุชูุงููุง ูุชุฎุฒูู ุงูุจูุงูุงุช ุงูุตุบูุฑุฉ ุงูุชู ุบุงูุจุงู ูุง ุชููู ูุงุจูุฉ ูููุชุงุจุฉ.  ูููู ุงูุณุจุจ ุ ูุฌุจ ุฃู ุชุชุนูู ูู ุชูุธูู NVS. </p><br><p style=";text-align:right;direction:rtl">  ูุซู EEPROM ู FLASH ุ ููุงู ูููุฏ ุนูู ุจูุงูุงุช ุงููุชุงุจุฉ ุ ูููู ุงููุชุงุจุฉ ููู ูุญุฏุงุช ุงูุจุงูุช ูู EEPROM ูู 100ุ000 ุฅูู 1ุ000ุ000 ูุฑุฉ ุ ููุทุงุน FLASH ูู ููุณู.  ุฅุฐุง ูุชุจูุง ุงูุจูุงูุงุช ูุฑุฉ ูุงุญุฏุฉ ูู ุงูุซุงููุฉ ุ ูุณูุญุตู ุนูู 60 ุซุงููุฉ ร 60 ุฏูููุฉ ร 24 ุณุงุนุฉ = 86400 ูุฑุฉ / ููู.  ูุฐุง ูู ุ ูู ูุฐุง ุงููุถุน ุ ุณุชุณุชูุฑ ุงูุจุงูุชุฉ 11 ููููุง ุ ููู ูููู.  ูุจุนุฏูุง ูู ุชููู ุงูุจุงูุช ูุชุงุญุฉ ูููุชุงุจุฉ ูุงููุฑุงุกุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุชุฎููู ูุฐู ุงููุดููุฉ ุ ุชููู ูุธููุฉ <code>update()</code> <code>put()</code> ุงูุฎุงุตุฉ ุจููุชุจุฉ Arduino EEPROM ุจูุชุงุจุฉ ุงูุจูุงูุงุช ููุท ุนูุฏูุง ุชุชุบูุฑ.  ุจูุนูู ุฃูู ููููู ูุชุงุจุฉ ูู ุซุงููุฉ ุจุนุถ ุงูุฅุนุฏุงุฏุงุช ูุฑููุฒ ุงููุถุน ุงูุชู ูุงุฏุฑุงู ูุง ุชุชุบูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู NVS ุทุฑููุฉ ูุฎุชููุฉ ููุชุญูู ูู ุชุณููุฉ ุงูุชุขูู.  ููุง ุฐูุฑ ุฃุนูุงู ุ ูููู ูุชุงุจุฉ ุงูุจูุงูุงุช ูู ูุทุงุน ุงูููุงุด ูู ุฃุฌุฒุงุก ุ ูููู ูููู ูุณุญ ุงููุทุงุน ุจุฃูููู ููุท.  ูุฐูู ุ ูุชู ุชุณุฌูู ุงูุจูุงูุงุช ูู NVS ูู ููุน ูู ุงููุฌูุฉ ุ ูุชููุณู ูุฐู ุงููุฌูุฉ ุฅูู ุตูุญุงุช ุ ูุชู ูุถุนูุง ูู ูุทุงุน ูุงุญุฏ ูู ุฐุงูุฑุฉ ุงูููุงุด.  ุชุชู ูุชุงุจุฉ ุงูุจูุงูุงุช ูู ุฃุฒูุงุฌ ูู ุงูููุชุงุญ: ุงููููุฉ.  ูู ุงููุงูุน ุ ุฅูู ุฃุณูู ูู EEPROM ุ ูุฃู  ุงูุนูู ุจุงุณุชุฎุฏุงู ุงุณู ูููุฏ ุฃุณูู ูู ุงูุนูู ุจุงุณุชุฎุฏุงู ุนููุงู ูู ุงูุฐุงูุฑุฉ.  <strong>ุงูุชุญุฏูุซุงุช:</strong> ุทูู ุงูููุชุงุญ ูุง ูุฒูุฏ ุนู 15 ุญุฑููุง! </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุฃููุงู ุจูุชุงุจุฉ ุงููููุฉ <code>1</code> ุฅูู ููุชุงุญ ูุง ุ ุซู ูุชุจุช ุงููููุฉ <code>2</code> ุฅูู ููุณ ุงูููุชุงุญ ุ ููู ูุชู ุญุฐู ุงููููุฉ ุงูุฃููู ุ ูุณูุชู ุชุนููููุง ููุท ุนูู ุฃููุง ูุญุฐููุฉ (ุณุชุชู ูุญููุง) ุ ูุณุชุชู ุฅุถุงูุฉ ุฅุฏุฎุงู ุฌุฏูุฏ ุฅูู ุงูุณุฌู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/pw/ri/of/pwriofnineuwy7bmctgzcngiqrk.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุญุงููุช ูุฑุงุกุฉ ุงูุจูุงูุงุช ุจูุงุณุทุฉ ููุชุงุญ ูุง ุ ูุณูุชู ุฅุฑุฌุงุน ุงููููุฉ ุงูุฃุฎูุฑุฉ ููุฐุง ุงูููุชุงุญ.  ูุฃู  ูุธุฑูุง ูุฃู ุงูุณุฌู ุดุงุฆุน ุ ูุชู ุชุฎุฒูู ููู ุงูููุงุชูุญ ุงููุฎุชููุฉ ุจุฌุงูุจ ุจุนุถูุง ุงูุจุนุถ ุฃุซูุงุก ูุชุงุจุชูุง. </p><br><p style=";text-align:right;direction:rtl">  ุชุญุชูู ุงูุตูุญุฉ ุนูู ุญุงูุฉ ุ ูุงุฑุบุฉ - ุฎุงููุฉ ุ ุจุฏูู ุฅุฏุฎุงูุงุช ุ ูุดุทุฉ - ุชุชู ุญุงูููุง ูุชุงุจุฉ ุงูุจูุงูุงุช ุฅูููุง ุ ููุชูุฆุฉ - ููุชูุฆุฉ ุ ูุง ููููู ุงููุชุงุจุฉ ุฅูููุง.  ุจูุฌุฑุฏ ููุงุฏ ุงูุตูุญุฉ ุ ููู ูู <br>  ูุดุท ูุฐูุจ ุฅูู ูุงูู ุ ูุชุตุจุญ ุงูุตูุญุฉ ุงููุงุฑุบุฉ ุงูุชุงููุฉ ูุดุทุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/6q/lz/ym/6qlzymofwdhy9ah2x-ekgpd23tq.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุจูุฏุฑ ูุง ูููุช ูู ุงููุซุงุฆู ุงูููุฌูุฏุฉ ุนูู ูููุน Espressif ุนูู ุงูููุจ ูุงูููุชุฏูุงุช ุงููุฎุชููุฉ ุ ูุจุฏุฃ ุชูุธูู ุงูุตูุญุฉ ุนูุฏูุง ุชูุชูู ุงูุตูุญุงุช ุงููุฌุงููุฉ.  ููู ุชููู ุฃูุซุฑ ุฏูุฉ ุ ููููุง <a href="">ููุฐุง</a> ุ ุณูุญุฏุซ ุงููุณุญ ุนูุฏูุง ุชุจูู ุตูุญุฉ ูุงุญุฏุฉ ููุท ูุฌุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ููุงู ุญุงุฌุฉ ุฅูู ูุณุญ ุงูุตูุญุฉ ุ ูุณูุชู ููู ุงูุณุฌูุงุช ุงูุญุงููุฉ (ุบูุฑ ุงูููุญุงุฉ) ุฅูู ุตูุญุฉ ุฃุฎุฑู ุ ูุชุชู ุงููุชุงุจุฉ ููู ุงูุตูุญุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ูุฅู ุนูููุฉ ูุญู ุงููุชุงุจุฉ ููู ุตูุญุฉ ูุนููุฉ ูุงุฏุฑุฉ ุฌุฏูุง ุ ููููุง ุฒุงุฏ ุนุฏุฏ ุงูุตูุญุงุช - ูููุง ูุงู ุฐูู ุฃูู.  ุจูุงุกู ุนูู ุฐูู ุ ููุช ุจุฒูุงุฏุฉ ุญุฌู ูุณู NVS ุฅูู 1 ููุบุงุจุงูุช ุ ููุฐุง ุจูุนุฏู ุชุณุฌููู ูููู ููุฏุฉ 170 ุนุงููุง ุ ููู ูุง ูููู ุจุดูู ุนุงู.  ุญูู ุชุบููุฑ ุญุฌู ูุณู NVS ุณูููู ุงูุชุงูู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฃุฌู ุงูุนูู ุงููุฑูุญ ูุน NVS ุ ููุฌุฏ ESP32 ูู Arduino Core ููุชุจุฉ ูููุฏุฉ ูู ุงูุชูุถููุงุช ููุชูุจุฉ ุ ูููููุฉ ุงูุชุนุงูู ูุนูุง ููุชูุจุฉ <a href="">ููุง</a> . </p><br><h3 id="nemnogo-o-visualgdb" style=";text-align:right;direction:rtl">  ููููุง ุนู VisualGDB </h3><br><p style=";text-align:right;direction:rtl">  ุจูุฌุฑุฏ ุฃู ุจุฏุฃุช ุงูุนูู ูุน Arduino IDE ุ ููุฌุฆุช ุนูู ุงูููุฑ ุจุงููุธุงุฆู ุงูุจุงุฆุณุฉ ููุงุฑูุฉู ุจู Visual Studio.  ูููููู ุฃู VS ููุณ ูุงููุฑุฉ ุ ุฑุบู ุฃูู ููุงุณุจูู ุ ููู ูุชุงุจุฉ ูุง ูุฒูุฏ ุนู 50 ุณุทุฑูุง ูู Arduino IDE ูุคููุฉ ููุคููุฉ.  ูููุฐุง ุ ูุฅู ุงูุณุคุงู ุงูุฐู ูุทุฑุญ ููุณู ูู ุงุฎุชูุงุฑ IDE ููุชูููุฉ.  ูุฃู  ุฃูุง ุนูู ุฏุฑุงูุฉ VS ุ ุฃูุง ุงุณุชูุฑ ุนูู <a href="https://visualgdb.com/tutorials/arduino/esp32/">VisualGDB</a> . </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชุทููุฑ Arduino IDE ุ ูุนุฏ ุชุทููุฑ ESP32 ูุฌุฑุฏ ููุงุฐ ุขูู.  ูุง ูู ุงูุงูุชูุงู ุฅูู ุงูุชุนุฑูู ุ ูุงูุจุญุซ ุนู ุงูููุงููุงุช ูู ุงููุดุฑูุน ูุงููุฏุฑุฉ ุนูู ุฅุนุงุฏุฉ ุชุณููุฉ ุงููุชุบูุฑ. </p><br><h3 id="izmenenie-tablicy-razdelov-esp32-pri-rabote-s-visualgdb" style=";text-align:right;direction:rtl">  ุชุบููุฑ ุฌุฏูู ูุณู ESP32 ุจุงุณุชุฎุฏุงู VisualGDB </h3><br><p style=";text-align:right;direction:rtl">  ููุง ุฐูุฑ ุฃุนูุงู ุ ูููู ุชุบููุฑ ุงูุฌุฏูู ุจุงุณุชุฎุฏุงู ูุณู ESP32 ุ ูุณููุธุฑ ูู ููููุฉ ุงูููุงู ุจุฐูู. <br>  ูุชู ุชุญุฑูุฑ ุงูุฌุฏูู ูููู CSV ุ ุจุดูู ุงูุชุฑุงุถู VisualGDB ููุชุจ ุงูุฌุฏูู ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Name, Type, SubType, Offset, Size, Flags nvs, data, nvs, 0x9000, 0x5000, otadata, data, ota, 0xe000, 0x2000, app0, app, ota_0, 0x10000, 0x140000, app1, app, ota_1, 0x150000,0x140000, spiffs, data, spiffs, 0x290000,0x170000,</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ูุฑู ูุณููุง ุชุญุช NVS ุ ูุณููู ููุชุทุจููุงุช ุ ูุนุฏุฏ ูููู ูู ุงูุฃูุณุงู ุงูุฃุฎุฑู.  ูู ุงููุฑูู ุงูุฏูููุฉ ุ ูููู ููุงุญุธุฉ ุฃูู ูุฌุจ ุฏุงุฆููุง ูุชุงุจุฉ app0 (ุงูุชุทุจูู ุงูุฎุงุต ุจู) ูู ุงูุฅุฒุงุญุฉ 0x10000 ุ ุจุฏุกูุง ูู ุงูุตูุฑ ุ ูุฅูุง ููู ููุชุดู ูุญูู ุงูุฅููุงุน ุฐูู.  ุฃูุถูุง ุ ูุฌุจ ุชุญุฏูุฏ ุงูุฅุฒุงุญุงุช ุจุญูุซ ูุง "ุชุชุฏุงุฎู" ุงูุฃูุณุงู ูุน ุจุนุถูุง ุงูุจุนุถ.  ูุชู ูุชุงุจุฉ ุฌุฏูู ุงููุณู ููุณู ุนูุฏ ุงูุฅุฒุงุญุฉ 0x8000.  ููุง ุชุฑูู ุ ุญุฌู NVS ูู ูุฐู ุงูุญุงูุฉ ูู 0x5000 - 20KB ุ ููู ููุณ ูุซูุฑูุง. </p><br><p style=";text-align:right;direction:rtl">  ููุช ุจุชุนุฏูู ุฌุฏูู ุงููุณู ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Name, Type, SubType, Offset, Size, Flags app0, app, ota_0, 0x10000, 0x140000, nvs, data, nvs, , 1M, otadata, data, ota, , 0x2000, spiffs, data, spiffs, , 0x170000,</code> </pre><br><p style=";text-align:right;direction:rtl">  ูุง ุชูุณ ุฅุถุงูุฉ ุดุจูุฉ ูุจู ุงูุงุณู ุ ุฅุฐุง ููุช ุชุณุชุฎุฏู ูุฐุง ุงูุฌุฏูู ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงุนุชุจุงุฑ ูุฐุง ุงูุณุทุฑ ุชุนููููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ุ ูุชู ุฒูุงุฏุฉ ุญุฌู NVS ุฅูู 1 ููุบุงุจุงูุช.  ุฅุฐุง ูู ุชุญุฏุฏ ุงูุฅุฒุงุญุฉ ุ ูุณูุจุฏุฃ ุงููุณู ููุฑูุง ุจุนุฏ ุงููุณู ุงูุณุงุจู ุ ูุฐูู ูููู ุงูุฅุดุงุฑุฉ ุฅูู ุงูุฅุฒุงุญุฉ ููุท ููุชุทุจูู 0.  ูููู ุชุญุฑูุฑ ูููุงุช CSV ูู ุงููููุฑุฉ ูู txt ุซู ูู ุจุชุบููุฑ ุฅุฐู ููู CSV ููููู ุงููุญููุธ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ูุฌุจ ุชุญููู ุฌุฏูู ุงููุณู ุฅูู ุซูุงุฆู ุ ูุฃู  ูุฏุฎู ูุญุฏุฉ ุงูุชุญูู ูู ูุฐุง ุงููููุฐุฌ.  ููููุงู ุจุฐูู ุ ูู ุจุชุดุบูู ุงููุญูู: <br>  <code>c:\Users\userName\Documents\ArduinoData\packages\esp32\hardware\esp32\1.0.3\tools\gen_esp32part.exe part_table_name.csv part_table_name.bin</code> .  ุงููุนููุฉ ุงูุฃููู ูู CSV ุ ูุงููุนููุฉ ุงูุซุงููุฉ ูู ุงููุฎุฑุฌุงุช ุงูุซูุงุฆูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ูุถุน ุงูุซูุงุฆู ุงููุงุชุฌ ูู <code>c:\Users\userName\Documents\ArduinoData\packages\esp32\hardware\esp32\1.0.3\tools\partitions\part_table_name.csv</code> ุ ูุจุนุฏ ุฐูู ูู ุงูุถุฑูุฑู ุชุญุฏูุฏ ุฃูู ูู ุงูุฐู ุชู ุงุชุฎุงุฐู ูุจูุงุก ุงูุญู ุ ู ูุง ููุฌุฏ ุฌุฏูู ุงูุชูุณูู ุงูุงูุชุฑุงุถู.  ููููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ูุชุงุจุฉ ุงุณู ุงูุฌุฏูู ุงูุฎุงุต ุจู ูู ุงูููู <code>c:\Users\userName\Documents\ArduinoData\packages\esp32\hardware\esp32\1.0.3\boards.txt</code> .  ูู ุญุงูุชู ุ ูุฐุง ูู <code>esp32doit-devkit-v1.build.partitions=part_table_name</code> <br>  ุจุนุฏ ูุฐู ุงููุนุงูุฌุฉ ุ ุณูุฃุฎุฐ VisualGDB ุนูุฏ ุฅูุดุงุก ุงูุชุทุจูู ุฌุฏูู ุงููุณู ุงูุฎุงุต ุจู ููุถุนู ูู ูุถุนู ุงูุตุญูุญ <br>  <code>~project_folder_path\Output\board_name\Debug\project_name.ino.partitions.bin</code> ุ ูู ุญูุซ ุณูุชู ุณูุจู ุจุงููุนู ูู ุงูููุญุฉ. </p><br><h3 id="jtag-otladchik-cjmc-ft232h" style=";text-align:right;direction:rtl">  JTAG ูุตุญุญ ุงูุฃุฎุทุงุก CJMC-FT232H </h3><br><p style=";text-align:right;direction:rtl">  ุจูุฏุฑ ูุง ุฃุนุฑู ุ ูุฐุง ูู ุฃุฑุฎุต ูุตุญุญ ุฃุฎุทุงุก ููููู ุงูุนูู ูุน ESP32 ุ ููุฏ ููููู ุญูุงูู 600 ุฑูุจู ุ ูููุงู ุงููุซูุฑ ูููู ุนูู Aliexpress. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/gn/cu/gm/gncugmqpjnb1hbmj630nnegxjgq.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุชูุตูู ุงููุตุญุญ ุ ูููู Windows ุจุชุซุจูุช ุจุฑุงูุฌ ุงูุชุดุบูู ุบูุฑ ุงูููุงุณุจุฉ ุงูุชู ูุฌุจ ุชุบููุฑูุง ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ Zadig ุ ูู ุดูุก ุจุณูุท ููุงู ุ ูู ุฃุตู ุฐูู. </p><br><p style=";text-align:right;direction:rtl">  ูุชุตู ESP32 devkit-v1 ุจุงูุทุฑููุฉ ุงูุชุงููุฉ: <br>  FT232H - ESP32 <br>  AD0 - GPIO13 <br>  AD1 - GPIO12 <br>  AD2 - GPIO15 <br>  AD3 - GPIO14 <br>  ุจุนุฏ ุฐูู ุ ูู <code>Project -&gt; VisualGDB Project Properties</code> ุชุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุงูุฅุนุฏุงุฏุงุช ุงูุชุงููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/eg/oi/7b/egoi7bhrpkjaprfvyz-jd9puccw.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุซู ุงููุฑ ููู ุงุฎุชุจุงุฑ.  ูู ุจุนุถ ุงูุฃุญูุงู ูุญุฏุซ ุฃู ุงูุงุชุตุงู ูู ูุชู ุชุฃุณูุณู ูุฃูู ูุฑุฉ ุ ููุจุฏู ุฃู ุงูุนูููุฉ ุชุชุฌูุฏ ุ ุซู ุชุญุชุงุฌ ุฅูู ููุงุทุนุฉ ูุชูุฑุงุฑ ุงุฎุชุจุงุฑ.  ุฅุฐุง ูุงู ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ูุฅู ุนูููุฉ ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุชุณุชุบุฑู ุญูุงูู 5 ุซูุงู. </p><br><p style=";text-align:right;direction:rtl">  ุนุงุฏุฉู ูุง ุฃููู ุจุชุฌููุน ุงููุดุฑูุน ูุชุญูููู ุนุจุฑ USB ุฅูู ESP32 ููุณู (ูููุณ ุนุจุฑ ูุตุญุญ ุงูุฃุฎุทุงุก) ุ ูุจุนุฏ ุฐูู ุจุฏุฃุช ูู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุจุงุณุชุฎุฏุงู <code>Debug -&gt; Attach to Running Embedded Firmware</code> .  ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ููููู ุชุนููู ููุงุท ุงูุชููู ูุฅููุงุก ูุธุฑุฉ ุนูู ููู ุงููุชุบูุฑุงุช ูู ููุช ุงูุชุนุทู ููู ูุงูุฐุฉ <code>Debug -&gt; Windows -&gt; Threads</code> ุงูุชุฑุงุจุท ุงูุชู ููููู ูู ุฎูุงููุง ูุนุฑูุฉ ูููุฉ FreeRTOS ุงูุชู ุฃูููุชูุง ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ููู ุฃูุฑ ูููุฏ ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ุฃุซูุงุก ุชุตุญูุญ ุงูุฃุฎุทุงุก.  ูุงูุช ูุฐู ุงููุธุงุฆู ูู ูุตุญุญ ุงูุฃุฎุทุงุก ูุงููุฉ ุจุงููุณุจุฉ ูู ููุนูู ุจุดูู ูุฑูุญ. <br>  ุนูุฏูุง ุจุฏุฃุช ุงูุนูู ูุน NVS ุ ุชูุช ููุงุทุนุฉ ุชุตุญูุญ ุงูุฃุฎุทุงุก ุจุงุณุชูุฑุงุฑ ุจุณุจุจ ุงูุฃุฎุทุงุก ุงูุบุงูุถุฉ.  ููุง ุฃููููุง ุ ููุฐุง ูุฃู ูุตุญุญ ุงูุฃุฎุทุงุก ูุญุชุงุฌ ุฅูู ุฅูุดุงุก ุดูุก ูุซู ุชูุฑูุบ ูู ูุณู NVS ุงูุงูุชุฑุงุถู ุ ูููู ูู ูุฐุง ุงูููุช ูุชู ุงุณุชุฎุฏุงู NVS ุจุงููุนู ุจูุงุณุทุฉ ูุญุฏุฉ ุงูุชุญูู.  ุจุงูุทุจุน ุ ูููู ุงูุชุญุงูู ุนูู ุฐูู ูู ุฎูุงู ุฅูุดุงุก ูุณููู ูู NVS ุ ุฃุญุฏููุง ูุญูู ุงูุงุณู ุงูุงูุชุฑุงุถู ูุชุตุญูุญ ุงูุฃุฎุทุงุก ูุงูุขุฎุฑ ูุงุญุชูุงุฌุงุชู ุงูุฎุงุตุฉ.  ููู ูู ููู ููุงู ุดูุก ูุนูุฏ ุ ูู ุงูููุฏ ุงููุถุงู ุ ูุงู ูุนูู ูู ุงููุฑุฉ ุงูุฃููู ุ ูุฐูู ูู ุฃุชุญูู ููู. </p><br><h3 id="glyuki-esp32" style=";text-align:right;direction:rtl">  ููุงุทู ุงูุฎูู ESP32 </h3><br><p style=";text-align:right;direction:rtl">  ูุซู ุฃู ุฌูุงุฒ ูุน Aliexpress ุ ูุงู ููุญู ESP32 ุงูุฎุงุต ุจู ุฎูู ุบูุฑ ููุตูู ูู ุฃู ููุงู.  ุนูุฏูุง ูุตูุช ุ ุฃุทุนูุช ุจุนุถ ุงูุฃุฌูุฒุฉ ุงูุทุฑููุฉ ุงูุชู ุนููุช ุนูู I2C ูู ุงูููุญุฉ ุ ูููู ุจุนุฏ ูุฑูุฑ ุจุนุถ ุงูููุช ุ ุจุฏุฃุช ุงูููุญุฉ ูู ุฅุนุงุฏุฉ ุงูุชุดุบูู ุฅุฐุง ูุงูุช ููุงู ุฃู ูุนุฏุงุช ูุณุชูููุฉ ุฃู ุญุชู ูุฌุฑุฏ ููุซู ูุซุจุชูุง ุนูู ุงูุณุงู + 5V.  ููุงุฐุง ูุฐุง ุบูุฑ ูููููุฉ ุชูุงูุง. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููููู ุชุดุบูู ุงูููุญุฉ ูู ุงูุดุญูุฉ ุงูุตูููุฉ 0.7A ุ ูุฃุฌูุฒุฉ ุงุณุชุดุนุงุฑ ds18b20 ูู ุณูุญ ููุญุฉ 3.3V ุ ููุณุชุดุนุฑ ุงูุชุฑุญูู ูุงูุญุฑูุฉ ูู ุดุญูุฉ ุฃุฎุฑู ุชุจูุบ 2A.  ูุจุทุจูุนุฉ ุงูุญุงู ุ ูุฅู ูุฏู GND ูููุญุฉ ูุชุตู ุจุฏุจุงุจูุณ GND ูุจููุฉ ุงูุญุฏูุฏ.  ุฑุฎูุตุฉ ูุงูุจูุฌุฉ ูู ุฎูุงุฑูุง. </p><br><h3 id="o-rezultatah-proekta" style=";text-align:right;direction:rtl">  ุนู ูุชุงุฆุฌ ุงููุดุฑูุน </h3><br><p style=";text-align:right;direction:rtl">  ุญุตูุช ุนูู ูุฑุตุฉ ููุณูุทุฑุฉ ุจูุฑููุฉ ุนูู ุงูุชุฏูุฆุฉ ูู ุงูููุฒู ุ ูุชูููุฑ ุงููุงู ูุงูุนุฑู ุงูููุชุณุจุฉ.  ูู ุงูููุช ุงูุญุงูู ุ ุฅุฐุง ูุงู ุงูุชุฏูุฆุฉ ูุญุชูุธ ุจู 23 ุฏุฑุฌุฉ ุทูุงู ุงูููู ุนูุฏ -5 - -7 ุจุงูุฎุงุฑุฌ ุ ููู ูู ููุงู ูุง ุญูุงูู 11 ุณุงุนุฉ ูู ุชุดุบูู ุงูุบูุงูุฉ.  ุฅุฐุง ุญุงูุธุช ุฎูุงู ุงูููู ุนูู 20 ุฏุฑุฌุฉ ูุฏุงูุฆุฉ ุฅูู 23 ููุท ูู ุงููุณุงุก ุ ููุฐุง ุจุงููุนู 9 ุณุงุนุงุช ูู ุชุดุบูู ุงูุบูุงูุฉ.  ุชุจูุบ ุณุนุฉ ุงูุบูุงูุฉ 6 ูููู ูุงุช ุ ููุจูุบ ุงูุณุนุฑ ุงูุญุงูู ูููููููุงุช 2.2 ุฑูุจู ุ ุฃู ุญูุงูู 26.4 ุฑูุจู ูููููุง.  ูุฏุฉ ููุณู ุงูุชุฏูุฆุฉ ูู ููุทูุชูุง ูู 200 ููู ุ ููุชูุณุท โโุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูู ููุณู ุงูุชุฏูุฆุฉ ุญูุงูู -5 ุฏุฑุฌุฉ ููุท.  ูุจุงูุชุงูู ุ ูุญุตู ุนูู ุญูุงูู 5000r ูููุฑุงุช ูููุณู ุงูุชุฏูุฆุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุง ุชุชุนุฏู ุชูููุฉ ุงููุนุฏุงุช 2000 ุฑูุงู ุ ุฃู ุฃู ุงูุชูุงููู ุณูุชู ุตุฏูุง ูู ุบุถูู ุจุถุนุฉ ุฃุดูุฑ ุ ูุงููู ุนู ุญูููุฉ ุฃู ูุธุงู ุฌุงูุฒ ููุซู ูุฐู ุงูุฃุชูุชุฉ ุณูููู 20000 ุฑูุงู ุนูู ุงูุฃูู.  ุดูุก ุขุฎุฑ ูู ุฃููู ูุถูุช ุญูุงูู ุฃุณุจูุน ูู ููุช ุงูุนูู ุงูุฎุงูุต ูู ูุชุงุจุฉ ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ ูุชุตุญูุญ ุงูุฃุฎุทุงุก ุ ูููู ูู ุฃุซูุงุก ุงูุนูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฃุฏุฑูุช ุฃุฎูุฑูุง ูุง ูู ุงููุคุดุฑุงุช ูู C ++ ูุญุตูุช ุนูู ุงููุซูุฑ ูู ุงูุฎุจุฑุฉ ุงูุฃุฎุฑู (ุนูู ุณุจูู ุงููุซุงู ุ ุชุฌุฑุจุฉ ุณุงุนุงุช ุทูููุฉ ูู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุบูุฑ ุงููููููุฉ).  ูุงูุฎุจุฑุฉ ุ ููุง ุชุนูููู ุ ูุตุนุจ ุงููุจุงูุบุฉ ูู ุชูุฏูุฑูุง. </p><br><p style=";text-align:right;direction:rtl">  ููุทุงุช ูู ุชุทุจูู Blynk ูููุงุชู ุงููุญููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/f8/a-/57/f8a-57tioype-tcgmjmodpagpwa.jpeg"></p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ez/3a/o3/ez3ao3_ht2lgjsbf9jvv_xcoksc.jpeg"></p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xi/xv/f-/xixvf-6pvrnw-2trm_toszimwrm.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุจุงูุทุจุน ุ ุงูููุฏ ุงูููุฌูุฏ ูู ุงููุดุฑูุน ููุณ ุชุญูุฉ ูููุฉ ุ ููููู ูุชุจุชู ูู ุธุฑูู ููุฉ ุงูููุช ูุงูุชุฑููุฒ ุจุดูู ุฃุณุงุณู ุนูู ูุงุจููุฉ ุงููุฑุงุกุฉ.  ุจุจุณุงุทุฉ ูุง ููุฌุฏ ููุช ู refactor.  ุจุดูู ุนุงู ุ ูุฏู ุงููุซูุฑ ูู ุงูุฃุนุฐุงุฑ ุงูุชู ุชุฌุนู ุงูููุฏ ุงูุฎุงุต ุจู ูุฎูููุง ููุบุงูุฉ ุ ููู ูุฐุง ูู ุงูููุถู ูุฏู ุ ูุฐูู ุณุฃุชุทุฑู ููู ุ ููู ุฃุทูุฑ ุงูููุถูุน ุฃูุซุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุณุงุนุฏุช ุฎุฑุจุดุฉ ุดุฎุต ูุง ุ ุณุฃููู ุณุนูุฏูุง ููุบุงูุฉ.  ุณุฃููู ุณุนูุฏูุง ุจุฃู ุชุนูููุงุช ุฃู ุงูุชุฑุงุญุงุช. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฆูุฉ ุงููุฑุงุฌุน</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="http://microsin.net/programming/ARM/freertos-part1.html">http://microsin.net/programming/ARM/freertos-part1.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/storage/nvs_flash.html">https://docs.espressif.com/projects/esp-idf/en/latest/api-reference/storage/nvs_flash.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://docs.espressif.com/projects/esp-idf/en/latest/api-guides/partition-tables.html">https://docs.espressif.com/projects/esp-idf/en/latest/api-guides/partition-tables.html</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://docs.blynk.cc/">https://docs.blynk.cc/</a> </li></ol><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar479156/">https://habr.com/ru/post/ar479156/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar479144/index.html">ูู ุฃุญุชุงุฌ ุฅูู ุชุณุฌูู ุนูุงูุชู ุงูุชุฌุงุฑูุฉุ</a></li>
<li><a href="../ar479146/index.html">ููุงุฑูุฉ ุฃุฏูุงุช ุงูุงูุชูุงููุฉ \ VPN</a></li>
<li><a href="../ar479150/index.html">ุงูุฑูุจูุชุงุช ุงูุฒุฑุงุนูุฉ ุชุชูุฏู</a></li>
<li><a href="../ar479152/index.html">ุชุชูุงุนู ู vue ุฏูู npm ู ูุจูู</a></li>
<li><a href="../ar479154/index.html">ูุง ูุฒุงู ูุชุงู ุฃู ููููุ</a></li>
<li><a href="../ar479158/index.html">7 ุงููุจุงุฏุฆ ุงูุฃุณุงุณูุฉ ู ITIL</a></li>
<li><a href="../ar479162/index.html">ุงูุดูู ุนูู ููุงูุจ ุงููุธุงู ุงูุดูุณู</a></li>
<li><a href="../ar479164/index.html">ูุง ูู ุงูุชุฎุทูุท ุงูุฏูุงุบู ูููุงุฐุง ูู ูุทููุจ</a></li>
<li><a href="../ar479166/index.html">ูุชุงุจุฉ ุงูุฎุงุต ุจู ุชูุฌ ุงูุชูุงุก ูุญุฏุฉ ููุทูุฉ ูู tarantool</a></li>
<li><a href="../ar479168/index.html">ููููุฉ ุฅูุดุงุก ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช RESTful ุนูู ุงููุธุงู ุงูุฃุณุงุณู ูู Symfony 5 + API ููุดุฑูุน MODX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>