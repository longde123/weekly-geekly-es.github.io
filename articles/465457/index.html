<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòÅ üòä üé¢ Sobre PBR en los dedos üëÇüèª üë∑ üíâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En este texto, hablar√© un poco sobre PBR, un concepto de renderizado basado en principios f√≠sicos. El PBR se usa en gr√°ficos de computadora modernos, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sobre PBR en los dedos</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/465457/"><p><img src="https://habrastorage.org/webt/p7/wx/7w/p7wx7wdov7bj2wuvrn-tezyyani.png"></p><br><p>  En este texto, hablar√© un poco sobre PBR, un concepto de renderizado basado en principios f√≠sicos.  El PBR se usa en gr√°ficos de computadora modernos, y hablaremos sobre qu√© es y c√≥mo est√° preparado, y qu√© cosas importantes vale la pena saber para aquellos que van o ya se est√°n ocupando de la preparaci√≥n de materiales.  El √©nfasis se desplaza m√°s hacia los juegos y los motores de juegos, donde este concepto ahora se usa ampliamente. </p><a name="habracut"></a><br><p>  Antes de pasar a detalles, algunas palabras para "cubrir la parte trasera". </p><br><p> Cada motor y render tiene su propia tuber√≠a de desarrollo, que a menudo es √∫nica, como un copo de nieve, y no se cruza completamente con los dem√°s.  Esto se debe, entre otras cosas, al hecho de que PBR es una metodolog√≠a relativamente joven, y podemos decir que estamos viendo la primera generaci√≥n de tales motores, los est√°ndares reci√©n comienzan a surgir, por lo que hay una diferencia y matices en diferentes implementaciones.  Y tambi√©n porque PBR no es un conjunto estricto de requisitos, sino m√°s bien una direcci√≥n general de desarrollo. </p><br><p>  Al escribir este texto, me bas√© en mi propia experiencia m√°s la teor√≠a con respecto a varios paquetes: Unreal Engine 4, Marmoset Toolbag 3, Substance Painter.  Por lo tanto, algunas cosas en otros paquetes se ver√°n diferentes, pero en general la teor√≠a es universal. </p><br><p>  Con m√°s detalle describir√© las cosas m√°s importantes, y al final, por el principio residual, mencionar√© que en PBR se usa, pero no es tan importante o complicado en el dispositivo. </p><br><p>  Intencionalmente utilizo los t√©rminos en una forma no traducida, porque las fuentes de informaci√≥n m√°s actuales y completas siempre est√°n en ingl√©s, y si alguien se sienta y espera una traducci√≥n, autom√°ticamente cae en aquellos que est√°n rezagados y dependen de √©l.  En mi opini√≥n, es correcto recordar de inmediato los t√©rminos que se utilizan en la industria.  Y google, por supuesto. </p><br><p>  <em>El material fue preparado con la participaci√≥n de la comunidad Maya3D Telegram.</em> </p><br><h2>  Sobre lo b√°sico </h2><br><p>  Primero, profundicemos un poco m√°s en la historia.  La experiencia sugiere que es mejor explicar el significado de los t√©rminos y conceptos b√°sicos de inmediato, pero si ya los conoce, puede saltarse esta secci√≥n de manera segura. </p><br><blockquote>  Adem√°s, notar√° que PBR toma prestados t√©rminos de cualquier parte, cambi√°ndolos un poco, y eso est√° bien. </blockquote><p>  PBR es una abreviatura de <em>representaci√≥n basada f√≠sicamente</em> , lo que significa aproximadamente <em>una visualizaci√≥n f√≠sicamente correcta</em> , y estas palabras hablan por s√≠ mismas.  A veces se usa el t√©rmino PBS (aqu√≠ se <em>muestran los</em> cambios en el <em>sombreador</em> ), en algunos lugares hay incluso PBT (y aqu√≠ aparece la <em>textura</em> ).  Sin embargo, la diferencia es m√≠nima: es una cuesti√≥n de tradici√≥n, y el t√©rmino PBR se usa tradicionalmente con m√°s frecuencia. </p><br><p>  Los √∫ltimos a√±os han sido la corriente principal de los sistemas de renderizado modernos, desde tiempo real y juegos hasta los denominados renderings sin conexi√≥n.  El nombre implica una cierta adherencia a las leyes de la f√≠sica, las leyes del mundo real, y esta aclaraci√≥n, por as√≠ decirlo, nos dice: antes no era as√≠.  Veamos c√≥mo fue y c√≥mo se convirti√≥, y de qu√© lado se nos ocurri√≥ todo. </p><br><p>  En los gr√°ficos tridimensionales, desde el comienzo de su vida, se implementaron una variedad de enfoques para mostrar en la pantalla, hasta que qued√≥ claro que reproducir los mecanismos de la realidad da resultados m√°s realistas, por as√≠ decirlo. </p><br><blockquote>  Aproximadamente la misma historia sucedi√≥ con la animaci√≥n esquel√©tica de los personajes, que "enterraron" el v√©rtice. </blockquote><p>  Si modelamos la realidad, entonces usemos sus leyes y arquitectura, automatizando constantes y cambiando parte del trabajo al software.  Los renderizados se esfuerzan cada vez m√°s por trabajar de la manera en que funciona nuestra realidad, con cada generaci√≥n de hierro introduciendo nuevos enfoques que le permiten abandonar las falsificaciones. </p><br><blockquote>  Los renders sin conexi√≥n son renders que no funcionan en tiempo real, por ejemplo, Vray o Arnold. </blockquote><p>  Por alguna raz√≥n, probablemente, reduce el vuelo de la fantas√≠a y corta los brotes de estilizaci√≥n, pero eso es <em>probablemente</em> lo que. </p><br><p>  Por otro lado, los trucos y las falsificaciones se est√°n moviendo a un nuevo nivel, que tambi√©n es progreso. </p><br><p>  En el mundo real que nos rodea, el campo electromagn√©tico es la base para la interacci√≥n en una escala m√°s alta que la at√≥mica y m√°s baja que la planetaria.  Todo lo que vemos y podemos tocar es accesible para nosotros gracias a √©l.  El hombre es un ser imperfecto, no podemos ver la mayor parte del espectro electromagn√©tico, pero con √©l hay muchas sutilezas que utilizamos en virtud de la comprensi√≥n.  Todo lo que vemos a nuestro alrededor es luz y sus caprichos.  Buena entrada, y lo m√°s importante, obvio, ¬øverdad? </p><br><blockquote>  La gran mayor√≠a de las personas son tricromatos, pero hay un peque√±o porcentaje de mutantes tetracrom√°ticos que distinguen m√°s sombras y ven el mundo m√°s diverso.  Y m√°s a menudo son mujeres. </blockquote><p>  En PBR, la luz se ha vuelto menos convencional que antes.  BxDF describe no solo c√≥mo alcanza la superficie, sino tambi√©n c√≥mo se refleja desde ella, dadas las caracter√≠sticas de los materiales.  Esto le permite describir con mayor precisi√≥n la escena y transmitir el resultado, lo m√°s cerca posible de la realidad. <br>  Uno de los cambios clave que ha tra√≠do PBR es la versatilidad de los materiales en cualquier iluminaci√≥n.  Los materiales configurados correctamente siempre se ver√°n correctos en cualquier escena. </p><br><p>  En la generaci√≥n anterior de renders, la micro-superficie y la naturaleza de la antorcha, los tipos de materiales conductores / aislantes no fueron tomados en cuenta;  la reflexi√≥n difusa llevaba sombra parcial e incluso deslumbramiento pintado;  no hab√≠a valores de reflexi√≥n del mundo real;  Los materiales no eran universales para ninguna escena e iluminaci√≥n. </p><br><h2>  Sobre la sustancia </h2><br><p>  Hay dos tipos: </p><br><ul><li>  conductores o metales - <em>conductores</em> ; </li><li>  aislantes o diel√©ctricos, es decir, no metales - <em>aislantes</em> . </li></ul><br><p>  La clasificaci√≥n se toma del mundo real (con simplificaciones) e intenta seguir el nombre. <br>  Los conductores conducen corriente el√©ctrica, tienen una red cristalina y otras "alegr√≠as" del curso de f√≠sica de la escuela.  No tienen reflejo difuso y dispersi√≥n subsuperficial, su superficie no dispersa la luz, es impermeable a ella, pero absorbe parte de ella, reflejando ondas de longitudes espec√≠ficas, un resplandor de color. </p><br><blockquote>  Sin embargo, la corriente no es importante para PBR.  La piel tambi√©n conduce corriente, pero en PBR no es metal, lo que significa que no es un conductor. </blockquote><p>  Los aisladores dispersan la luz, penetra su superficie;  tienen reflejo difuso y dispersi√≥n subsuperficial, resplandor con luz blanca. <br>  Ambos tipos de materiales tienen un efecto Fresnel. </p><br><h2>  Sobre las tuber√≠as </h2><br><p>  Tradicionalmente, tenemos dos tuber√≠as para materiales y su preparaci√≥n: <em>especular</em> y <em>metal</em> .  Por lo general, se entiende que en <em>especular</em> hay un mapa de imagen espejo correspondiente, mientras que en <em>metalicidad</em> no lo es, pero hay una m√°scara de metalicidad, y esto se puede hacer. </p><br><p>  Por supuesto, no todo es tan simple aqu√≠. </p><br><p>  La tuber√≠a <em>especular</em> realmente tiene un mapa <em>especular</em> , que controla la intensidad y el color del brillo en <em>F0</em> , cuyos valores est√°n completamente en manos del artista, y no tiene constantes incorporadas en el sombreador.  Fresnel a veces se controla por separado, <em>albedo</em> controla solo el color, el <em>brillo / la rugosidad</em> controla la naturaleza de los reflejos, todo es simple aqu√≠. </p><br><p>  <em>Metalness</em> no tiene un mapa de intensidad de brillo separado; estos valores se cosen en sombreadores dentro de 2-5% para diel√©ctricos y 70-100% para conductores.  La relaci√≥n de las tarjetas aqu√≠ es ligeramente mayor: el <em>albedo</em> , la <em>metalicidad</em> y la <em>aspereza de las</em> tarjetas afectan el color, la intensidad y la naturaleza del reflejo especular en total.  Hay una tarjeta menos en esta tuber√≠a, y teniendo en cuenta la posibilidad de empacar tarjetas en escala de grises en un RGB, dichos materiales ocupan menos memoria del sistema. </p><br><p>  La elecci√≥n de las representaciones modernas recay√≥ casi por completo en la <em>metalicidad</em> en vista de su eficiencia y mayor automatizaci√≥n, porque tales sombreadores se encargan de los c√°lculos correctos de Fresnel.  Aunque el <em>especular</em> brinda m√°s control, este control a menudo es redundante y requiere m√°s tiempo y esfuerzo con resultados similares.  Por lo tanto, hablaremos espec√≠ficamente sobre la tuber√≠a de <em>metalness</em> en general. </p><br><p><img src="https://habrastorage.org/webt/4y/nx/vn/4ynxvnwcpw7607fqx4hb4zl0q1c.png"><br>  <em>Diferencias en tuber√≠as y mapas.</em>  <em>Wes McDermott y Allegorithmic.</em> </p><br><h2>  Sobre BRDF y GGX </h2><br><p>  La base de la diferencia entre PBR de la generaci√≥n anterior en el cambio de BxDF.  BxDF es una <em>funci√≥n de distribuci√≥n X bidireccional</em> , que suena m√°s o menos como una <em>funci√≥n de habilidad X de dos haces</em> .  Y esta familia de funciones tiene varias habilidades: es al menos <em>reflectancia</em> , <em>transmisi√≥n</em> y <em>dispersi√≥n</em> : reflexi√≥n, transmisi√≥n y dispersi√≥n, respectivamente (en la literatura especializada y en los art√≠culos, el artista se encuentra con mayor frecuencia con la variante BRDF). </p><br><p>  Estas funciones describen el comportamiento del haz cuando interact√∫a con la superficie: c√≥mo se dispersa (es decir, penetra en la capa superior y regresa), se refleja o pasa a trav√©s de un material transparente. </p><br><p>  En nuestra historia, BxDF est√° estrechamente relacionado con la <em>teor√≠a de las microfacetas</em> , que tambi√©n tiene muchas implementaciones, a menudo nombradas por los nombres de los autores: Cook-Torrance, Ashikhmin-Shirley, GGX, etc.  GGX es solo una de las implementaciones de la <em>teor√≠a</em> de las <em>microfacetas</em> : la teor√≠a de las micro superficies, que se usa en casi todas partes.  Presenta un modelo simplificado de la micro-superficie, que junto con BxDF imita la reacci√≥n a la luz para todo tipo de interacci√≥n. </p><br><blockquote>  Faceta tambi√©n se puede traducir como una "cara", lo que tambi√©n tiene sentido.  En una teor√≠a simplificada, una superficie es una colecci√≥n de caras peque√±as. </blockquote><p>  GGX no est√° descifrado en absoluto, el conjunto de letras se toma de las variables utilizadas en las f√≥rmulas (o el apellido de alguien est√° abarrotado, la historia lo oculta).  Los artistas pueden ver este t√©rmino en la configuraci√≥n de los par√°metros de <em>rugosidad / brillo</em> . </p><br><blockquote>  Por ejemplo, uno de G es la funci√≥n de enmascaramiento de sombreado bidireccional, una funci√≥n de enmascaramiento / sombreado autom√°tico de dos haces. </blockquote><p><img src="https://habrastorage.org/webt/_f/fj/gc/_ffjgcfumvsq6sgwhssekpffawa.png"><br>  <em>Micro-superficie y su efecto en la reflexi√≥n especular.</em>  <em>Wes McDermott y Allegorithmic.</em> </p><br><h2>  Conservaci√≥n de energ√≠a </h2><br><p>  <em>La conservaci√≥n de energ√≠a</em> tambi√©n es una de las constantes fundamentales de PBR y significa que la superficie no puede devolver m√°s luz de la que recibe.  En particular, el <em>albedo</em> y <em>la reflexi√≥n especular se</em> suman, y si la <em>especular es</em> m√°s brillante, el <em>albedo es</em> menos brillante y viceversa.  En general, esto es algo automatizado en los motores, a veces es posible encenderlo y apagarlo, por ejemplo, en el Marmoset Toolbag. </p><br><h2>  Sobre Fresnel </h2><br><p>  Augustin-Jean Fresnel (Augustin-Jean Fresnel), un f√≠sico franc√©s del siglo XIX, creador de la teor√≠a ondulatoria de la luz y los montones de otras cosas geniales, describi√≥ el efecto del nombre en s√≠, que consiste en el hecho de que el nivel de luz reflejada desde una superficie depende directamente del √°ngulo de visi√≥n de esta superficie.  En un √°ngulo recto, es decir, <em>F0</em> , obtenemos el nivel m√≠nimo de luz reflejada especularmente que est√° disponible para el material.  Y cuanto mayor sea el √°ngulo, m√°s luz atraparemos, acerc√°ndonos al 100%. </p><br><p>  De acuerdo con este efecto, cualquier material tiene un resplandor, en principio, todo brilla, solo necesita encontrar el √°ngulo correcto. </p><br><p>  Cuando hablamos de la intensidad del brillo en general, siempre nos referimos al brillo en <em>F0</em> : esto es lo que controla el artista a trav√©s de los par√°metros <em>albedo / rugosidad / metalidad</em> . <br><img src="https://habrastorage.org/webt/qb/mc/3d/qbmc3dtizu2o3dtyaeadoaknoh8.png"><br>  <em>Esquema del efecto Fresnel.</em>  <em>Wes McDermott y Allegorithmic.</em> </p><br><h2>  Sobre la reflexi√≥n difusa </h2><br><h3>  Albedo  Difuso  Color base </h3><br><p><img src="https://habrastorage.org/webt/o_/1b/qd/o_1bqdvlsufu0sjpawl6jvswr_s.png"><br>  <em>Esquema de interacci√≥n en reflexi√≥n difusa.</em>  <em>Wes McDermott y Allegorithmic.</em> </p><br><p>  Esta es la luz que cae sobre la superficie y es parcialmente absorbida por ella, y parcialmente reflejada, dispers√°ndose aleatoriamente en las capas superiores y devolviendo al observador el color de esta misma superficie.  A veces, en este caso, dicen que est√° pintado en el color de la superficie, pero estamos hablando de la correcci√≥n f√≠sica, por lo que vale la pena repetirlo: la luz no pinta, la parte del espectro que no se ha absorbido y no se pierde vuelve a nosotros.  La parte de la luz visible que es absorbida por la superficie en el mundo real pasa a la energ√≠a t√©rmica, y en PBR esto tambi√©n puede tenerse en cuenta, pero depende mucho del sombreador utilizado y en este caso es secundario. </p><br><p><img src="https://habrastorage.org/webt/8m/az/h6/8mazh6-uv3x5_ygatmtgar0tyta.png"><br>  <em>Absorci√≥n de luz y retorno al observador de solo ondas no absorbidas.</em>  <em>Wes McDermott y Allegorithmic.</em> </p><br><p>  El comportamiento del material durante la reflexi√≥n difusa est√° determinado por el mapa <em>albedo</em> , o el <em>color base</em> , o incluso <em>difuso en</em> algunos lugares.  La diferencia en estos nombres proviene de la tradici√≥n y las diferentes l√≠neas de desarrollo de motores, pero el comportamiento es el mismo en todas partes, en cualquier caso, deber√≠a serlo.  El color debe capturarse en el mapa de albedo, c√≥mo se ver√≠a en √°ngulo recto con la superficie de la c√°mara y con una iluminaci√≥n 100% blanca.  Sin sombras, penumbra, resplandor y todo lo que no se exprime en la definici√≥n de "color puro".  Esta es la diferencia clave entre la reflexi√≥n difusa actual en PBR y la generaci√≥n anterior de renderizadores, donde tambi√©n se usa el t√©rmino <em>difuso</em> , pero de una manera ligeramente diferente. </p><br><blockquote>  Una fotograf√≠a de un objeto con un filtro de polarizaci√≥n bajo iluminaci√≥n directa captura su <em>albedo</em> , por ejemplo.  La polarizaci√≥n elimina el deslumbramiento. </blockquote><p>  Parece que no hay nada m√°s que decir sobre el color, pero todav√≠a hay sutilezas. </p><br><p>  El mapa de reflexi√≥n difusa afecta la representaci√≥n de metales puros en la tuber√≠a de metalidad, manchando el resaltado en el color correspondiente.  Adem√°s, el mapa de <em>albedo</em> afecta directamente <em>la reflectancia especular</em> para metales, lo que le permite <em>variarlo</em> en combinaci√≥n con una tarjeta de <em>metalidad</em> .  Este es un dise√±o bastante complicado, pero en general se ve as√≠: cuando hacemos el material del aislante, dibujamos una m√°scara de <em>metalidad</em> negra y el sombreador asigna un brillo a <em>F0</em> del 4%.  Cuando hacemos transiciones en <em>metalidad</em> hasta el blanco, es decir, metal puro, el brillo en el mapa <em>albedo</em> afecta la intensidad de su brillo.  Cuanto m√°s brillante es el color en el <em>albedo</em> , m√°s intenso es el brillo, que se aproxima a un valor del 100%.  No tenemos control sobre el nivel de brillo del aislante.  Se supone que la diferencia del 2-4% no es cr√≠tica y se enmascara a trav√©s de la <em>aspereza</em> , o se ajusta a trav√©s de <em>la reflectancia especular</em> , si es necesario y posible. </p><br><blockquote>  Este ejemplo se describe teniendo en cuenta los sombreadores UE4, Marmoset Toolbag y los productos Substance.  Pero en general funciona en todas partes. </blockquote><p>  El efecto art√≠stico del color de la superficie no puede subestimarse.  A menudo, esto escapa a la atenci√≥n de los artistas, y hacen pl√°stico negro negro para que sea "como en la vida".  Pero generalmente no hay colores monol√≠ticos en la realidad, y las variaciones de color casi siempre est√°n presentes en el material, esto debe entenderse y usarse. </p><br><p>  La reflexi√≥n difusa se describe mediante una tarjeta RGB, o en t√©rminos de motores, mediante una matriz de Vector3, lo cual es l√≥gico, estamos hablando de color. </p><br><h3>  Validaci√≥n PBR </h3><br><p>  Dado que PBR se esfuerza por obtener par√°metros y caracter√≠sticas reales, los valores para el brillo del <em>albedo</em> deben validarse y reducirse a rangos de valores reales, pero no pueden caer por debajo de 30-50 sRGB y subir por encima de 240 para diel√©ctricos.  En el caso de metales puros, el valor de 240 puede aumentar a 255, porque este no es el valor de la reflexi√≥n difusa, sino el valor de <em>la reflectancia especular</em> . </p><br><p>  Pero, por supuesto, hay sutilezas aqu√≠. </p><br><p>  Por ejemplo, una de las sustancias m√°s oscuras del mundo ordinario es el carb√≥n.  El valor de brillo del <em>albedo</em> , traducido a sRGB, es 50, y esto est√° cerca del l√≠mite del m√≠nimo que PBR puede pagar por diel√©ctricos.  Los valores a continuaci√≥n son demasiado oscuros y pueden no verse bien en diferentes condiciones de iluminaci√≥n. </p><br><blockquote>  No hace mucho tiempo, algunas personas se tensaron y crearon un material que absorbe el 99% de la luz y parece un agujero negro en el espacio. </blockquote><p>  ¬øPor qu√© es esto importante? </p><br><p>  Porque las reflexiones difusas y especulares funcionan en pares.  Los valores de <em>albedo</em> demasiado oscuros afectar√°n la diferencia entre el <em>albedo en</em> s√≠ y <em>la reflectancia especular</em> , y los artistas tendr√°n que "torcer" la luz para normalizar el deslumbramiento en <em>F0</em> y la reflexi√≥n difusa, lo que conllevar√° una sobreexposici√≥n de toda la escena, y los materiales eventualmente se volver√°n no universales y se aplicar√°n solo a un espec√≠fico iluminaci√≥n </p><br><p>  ¬øPor qu√© podr√≠a no importar esto? </p><br><p>  Porque depende de la composici√≥n.  Si se presenta la presentaci√≥n de un modelo separado, y no hay iluminaci√≥n global y reflexi√≥n reflejada en la escena, pero hay iluminaci√≥n HDR, entonces, en general, puede hacer valores fuera de 30-50 sRGB.  Y tambi√©n hay una bestia semim√≠tica "arte".  "Lo que m√°s importa no es la correcci√≥n f√≠sica", dice, "sino la percepci√≥n".  Y aqu√≠ es posible ya veces necesario violar las leyes que son dif√≠ciles de establecer. </p><br><blockquote>  Es un tema muy controvertido con respecto a la admisibilidad de violar las leyes PBR y la realidad correspondiente.  En alg√∫n lugar juega en manos de la percepci√≥n, y en alg√∫n lugar es necesario mantener todos los est√°ndares.  Los ejemplos y la discusi√≥n est√°n m√°s all√° del alcance de este texto. </blockquote><p>  En general, mantener el l√≠mite de brillo del <em>albedo</em> permanece en la conciencia del artista o su l√≠der de arte, y una gran parte del trabajo en PBR que existe hoy en d√≠a no pasa esta validaci√≥n en el l√≠mite inferior, lo que no les impide ser cualitativos y correctos en un aspecto inexperto.  La diferencia se hace visible solo si verifica los valores y sube al l√≠mite inferior, o si un modelo ejecutado por separado se coloca en una escena con la iluminaci√≥n correcta. </p><br><p>  Pero incluso si no nos molestamos con la validaci√≥n, no use color negro puro a 0 sRGB para diel√©ctricos. </p><br><p>  La validaci√≥n de PBR es proporcionada por varias herramientas en motores y editores.  Por ejemplo, en Substance Painter hay un filtro que funciona en la parte superior de la pila completa de capas, verificando los valores. </p><br><p><img src="https://habrastorage.org/webt/vt/7l/sk/vt7lsk-qarr0_h1xcytgync8-yk.png"><br>  <em>Validaci√≥n de PBR en Substance Painter.</em>  <em>Wes McDermott y Allegorithmic.</em> </p><br><p><img src="https://habrastorage.org/webt/8_/c_/fc/8_c_fcnsy5-zl9aw4tedt-d0pgg.png"><br>  <em>Gr√°fica de valores de intensidad para algunos materiales.</em>  <em>Datos tomados de S√©bastien Lagarde y DONTDNOD.</em> </p><br><h2>  Sobre el reflejo del espejo </h2><br><h3>  Reflectancia especular </h3><br><blockquote>  Especular es una palabra latina que se traduce como "espejo". </blockquote><p><img src="https://habrastorage.org/webt/ts/ot/d6/tsotd6j2ix5xr3jp4btcb_v2b6c.png"><br>  <em>Esquema de la interacci√≥n de la luz en la reflexi√≥n especular.</em>  <em>Wes McDermott y Allegorithmic.</em> </p><br><p>  Esto se refiere a la parte del flujo de luz que se refleja desde la superficie de acuerdo con la ley del √°ngulo de incidencia y vuelve al observador en su totalidad.  <em>La reflectancia especular</em> , o la reflexi√≥n especular, es deslumbramiento, y est√° muy relacionada con las caracter√≠sticas de la micro-superficie.  Se encuentra en ambas tuber√≠as, pero se controla directamente en la tuber√≠a <em>especular</em> e indirectamente en la <em>metalicidad</em> . </p><br><p>  El hecho es que el control directo del brillo es algo muy vil.  Recordamos a los conductores y aislantes, pero pocos artistas sin una mesa ante sus ojos recordar√°n los valores exactos de intensidad, y tambi√©n hay excepciones en forma de piedras preciosas.  Al tener acceso a esta configuraci√≥n de sombreador, es muy f√°cil alejarse de los valores f√≠sicamente correctos en alg√∫n lugar del plano astral, rompiendo todo el rango visual e incluso preparando materiales en nuestros hombros y la memoria de la tarjeta de video es otra tarjeta. </p><br><p>  Adem√°s, las mediciones de los valores del mundo real se ajustan a un peque√±o marco que puede automatizarse, que es lo que hicieron en <em>metalness</em> , habiendo seleccionado el control directo y la necesidad de pensar en esto tambi√©n. </p><br><p>  En una tuber√≠a <em>especular</em> , el par√°metro <em>especular</em> se controla mediante un mapa en escala de grises en valores 0-255, un color lineal o un par√°metro escalar. </p><br><blockquote>  El par√°metro escalar aqu√≠ es el valor que se establece para el espacio bidimensional que se proyecta en el modelo.  En otras palabras, cuando mueve el control deslizante en Marmoset para especular, este es el par√°metro escalar. </blockquote><p>  En una tuber√≠a de <em>metalness</em> , generalmente no hay un control directo de la intensidad del brillo a trav√©s del par√°metro especular.          F0: 4-5%    80-100%   ,     .            ,         <em>roughness</em>  <em>albedo</em> . </p><br><h3> Cavity </h3><br><p>  <em>specular reflectance</em>     ,    ,      ,     ,     ,   .      ,       ,     .      <em>cavity</em> ;     ,     .  UE4, ,   specular  ,       ,   ,      <em>specular</em> ,   ,     <em>cavity</em>      0-4%.      Substance-   .         ,           .    . </p><br><p><img src="https://habrastorage.org/webt/if/aa/3l/ifaa3lo0zh7jbqeg9xh9kbjefyq.jpeg"></p><br><p><img src="https://habrastorage.org/webt/dc/yd/8n/dcyd8nfosw2l6ublorhoy1qptve.jpeg"><br> <em>  cavity  specular reflectance.              .        cavity         ,      .   Marmoset Toolbag 3</em> </p><br><h2>   </h2><br><h3> Metalness </h3><br><p>   PBR   ,      -    .         ,      ‚Äî       -  .    2-5%  ,  ‚Äî 70-100%,        . </p><br><p>  ,     ,             , ,       ,       -  <em>metalness</em> .      ,       .                 ,     UE4      Unity.    ( ¬´  ¬ª) ‚Äî       :   <em>texel density</em>      . </p><br><blockquote>   /    specular-,       ,   . </blockquote><p><img src="https://habrastorage.org/webt/yy/u5/_3/yyu5_3xbui07l_eya7jpeweb1tq.png"><br> <em>  /. Wes McDermott  Allegorithmic.</em> </p><br><p>   PBR,      .       ,    ,    -   ,  ,       .    <em>specular</em> -       RGB-   <em>specular</em> ,     ,   <em>metalness</em>      <em>albedo</em> . ,   <em>metalness</em> ,    ,     ,  ,  . . </p><br><p> ,     ‚Äî  ,    .     ,       ,   . </p><br><p>  ,       .           <em>albedo</em>  , ,  Substance Painter,   ,  .    ,   : <em>albedo</em>          . </p><br><p>   -  0-255          . </p><br><h2>   </h2><br><h3> Roughness. Glossiness. Smoothness. </h3><br><p>         ,     ,  ,     .   ,    ,     ,     .  PBR     <em>microfacet theory</em>    BRDF,            ,     <em>roughness</em> ,  <em>gloss</em> ,   <em>smoothness</em> -. </p><br><blockquote>   ‚Äî     roughness    .       . </blockquote><p>       ,   roughness   ‚Äî   ,            ,   ‚Äî ,       ,    ,   .   <em>gloss</em>   . </p><br><p>  specular    (    <em>metalness</em> ),      .          ,     ,           ,   ,      . <br> <em>Roughness</em>      ,     ,      ,      ‚Äî    , ,  . </p><br><p>   grayscale-  0-255,    . </p><br><p><img src="https://habrastorage.org/webt/mn/fw/0p/mnfw0pktzv7wrjsq340sbxzmb1o.png"><br> <em>Roughness-   . Wes McDermott  Allegorithmic.</em> </p><br><h2>   </h2><br><h3> Normal bump </h3><br><p>  ,    ,       .  ‚Äî  ,   ,        . </p><br><blockquote>       ,   . </blockquote><p>       : <em>vertex normal</em>  <em>face normal</em> , ,     .       ,     <em>hard edges</em> . </p><br><blockquote> , Zbrush      ,        .      ,     . <br><br>  <em>hard/soft edges</em>    ,    ,  <em>hard edges</em>       -   .      UV,    .  PBR   ,       -. </blockquote><p>         .  <em></em>      .        ¬´¬ª,      ‚Äî   ,      3+n .     <em>face</em>    . <em>Face normal</em>    ‚Äî  . </p><br><blockquote>   ,    3+n     . </blockquote><p>     ,   ,     .      ,     ¬´¬ª         .        ,     ,       .  ,      ,   ( <em>tangent space</em> ,  )   ( <em>object space</em> ,  ) ,       ,  . </p><br><p>    ( <em>bump</em> )  ,     ,        .        ,    ‚Äî <em>normal bump</em>     bump.      ‚Äî  .        ,   <em>bump</em> ,  , .           ,  ,     Mikk,       (  Y,     ). <br> <em>Normal bump</em>    PBR-,   ,        ‚Äî ,   .   ,        .             ,      .    ,    ¬´ ¬ª;  ,   ,               .      Rockstar   RAGE ‚Äî  GTAIV/V, RDR1/2,   Star Citizen   CryEngine/Lambeyard.   ,   , ,     ,              . </p><br><p> PBR     . </p><br><h2>    </h2><br><h3> Subsurface scattering, SSS. </h3><br><p>  ,    ,           : ,    .       ,    ,       ,    . </p><br><p>    , SSS,  ,    :   (      )       RGB-.      . </p><br><p><img src="https://habrastorage.org/webt/jc/ai/8f/jcai8frgs4rpzcqduwvnwedw988.png"><br> <em>  SSS.    .</em> </p><br><h2>   </h2><br><h3> Translucency </h3><br><p>  ,      SSS,        . <em>Translucency</em> ‚Äî   ,       . <em>Translucency</em>  -    . </p><br><p><img src="https://habrastorage.org/webt/8q/-d/ww/8q-dww9kndq-jhkolumjyqgjk5q.png"><br> <em>        :  ,    .    .</em> </p><br><h2>    </h2><br><h3> Ambient occlusion </h3><br><p>    <em>ambient occlusion</em> ‚Äî    ,        .       <em>  </em> ,      . AO ‚Äî             ,     .    <em>cavity</em>  PBR-,      .     PBR-    ,     .     AO,               .  ,  SSAO ( <em>screen space ambient occlusion</em> ), HBAO ( <em>horizon based ambient occlusion</em> )    ,     .    ,       ‚Äî    <em>deferred rendering</em> . </p><br><p>    , -   PBR     ,           ,  <em>roughness</em> ,       . </p><br><p><img src="https://habrastorage.org/webt/ad/lv/gw/adlvgwyydcpwgxm_8_uv9vcfsty.png"><br> <em>  ,     ,   . : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://www.gamingscan.com/what-is-ambient-occlusion/</a></em> </p><br><p> ,   RTX        GI      ,       . </p><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Que leer </font></font></h2><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dado que este art√≠culo no es una gu√≠a o manual detallado, sino m√°s bien una nota, para un estudio detallado del tema, puede familiarizarse con los materiales en los enlaces a continuaci√≥n. </font></font></p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Presentaci√≥n de GGX, un mont√≥n de teor√≠a y matem√°tica</a> </p><br><p>  Gu√≠as aleg√≥ricas de PBR: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://academy.substance3d.com/courses/the-pbr-guide-part-1</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://academy.substance3d.com/courses/the-pbr-guide-part-2</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Teor√≠a de Marmoset</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Teor√≠a del motor de filamentos</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Descripci√≥n e implementaci√≥n de PBR en 3dCoat</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Documentaci√≥n UE4</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Presentaci√≥n de Sebastien Lagarde</a> </p><br><p>  Si no est√° claro qui√©n es Sebastian Lagarde, aqu√≠ hay <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una extensa presentaci√≥n sobre Frostbite</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Documentaci√≥n de unidad</a> </p><br><p>  <em>Introducci√≥n fija, gracias por la sugerencia a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">zhovner</a> .</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465457/">https://habr.com/ru/post/465457/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465441/index.html">LuaVela: implementaci√≥n de Lua 5.1 basada en LuaJIT 2.0</a></li>
<li><a href="../465445/index.html">Notas del proveedor de IoT. Maldici√≥n de salida de impulso</a></li>
<li><a href="../465449/index.html">C√≥mo se forjaron los problemas de Mail.ru y el FSB por la reputaci√≥n de Pavel Durov y la fe en Telegram</a></li>
<li><a href="../465453/index.html">3 de septiembre - D√≠a de la CTO en San Petersburgo</a></li>
<li><a href="../465455/index.html">Trabaje con incidentes, mejorando la respuesta a incidentes y el valor t√©cnico de la deuda. Backend United 4 materiales de mitap: Okroshka</a></li>
<li><a href="../465459/index.html">Una breve historia de la videoconferencia: desde el comienzo hasta el uso comercial completo</a></li>
<li><a href="../465461/index.html">Escritura est√°tica en una aplicaci√≥n React</a></li>
<li><a href="../465463/index.html">Lo bueno nunca es barato. Pero es gratis</a></li>
<li><a href="../465467/index.html">Toda la verdad sobre RTOS. Art√≠culo # 32. Nucleus SE Migration: caracter√≠sticas no realizadas y compatibilidad</a></li>
<li><a href="../465471/index.html">¬øHas intentado registrar tu sitio como una publicaci√≥n de red en Roskomnadzor?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>