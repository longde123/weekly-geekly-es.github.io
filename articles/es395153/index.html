<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🆚 👩🏽‍🤝‍👩🏼 🙍🏼 Agregar Furigan a la macro Kanji Python para LibreOffice ⏹️ 🍵 🙎🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Damas y caballeros, el plan es este:
 
 

- todo lo que querías saber sobre la escritura japonesa, pero tenías miedo de preguntar
- ¿Qué es el texto r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Agregar Furigan a la macro Kanji Python para LibreOffice</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395153/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Damas y caballeros, el plan es este:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> todo lo que querías saber sobre la escritura japonesa, pero tenías miedo de preguntar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¿Qué es el texto ruby? </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cómo escribir complementos para libreoffice en python</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> cómo generar lectura para kanzi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¡Poniendo todo junto en un furiganizador!</font></font></li>
</ul><br>
<img src="https://habrastorage.org/files/cc5/24f/513/cc524f513715442397b9e3abaff3612f.png"><br>
<br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El japonés moderno utiliza principalmente tres sistemas de escritura. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En primer lugar, estos son alfabetos de dos sílabas: hiragana y katakana. Hiragana es más redondeado, se ve más o menos así: こ れ は ひ ら が な で す y es, por así decirlo, el alfabeto principal. Además, llamaremos a todo esto simplemente "kana". "Alfabeto silábico" significa que en lugar de nuestras vocales y consonantes "a", "b" y "c", solo sílabas enteras como "ka", "sa" y "eso". Sin embargo, también hay vocales, hay cinco piezas (“a”, “y”, “y”, “e”, “o” + “i”, “u” y “e”) y solo una consonante “n” en orden de excepción</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es por eso que es muy difícil para los japoneses pronunciar palabras con consonantes sucesivas, simplemente no están acostumbradas, pero esto no es importante para nosotros ahora. Con una cana, en principio, puedes escribir cualquier frase en japonés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Otro sistema son los caracteres prestados de China, que seguiremos llamando </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kanji</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , y luego se llaman así. Después de pedir prestado, el japonés, sí, el sobsno y el chino también, los kanji han cambiado significativamente, y ahora son bastante diferentes, aunque, por supuesto, son muy similares. Digamos que mirando un texto en chino, un japonés puede entender más o menos de qué está hablando. Los kanji se parecen a esto: 友 達 、 日本 酒 、 世界。 Sí, en japonés es un punto redondo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí hay un punto clave para comprender: el japonés y el chino a nivel gramatical generalmente no están relacionados en absoluto. Así que, así, era imposible tomar caracteres chinos y comenzar a escribirlos. En realidad, con la ayuda de kanji, puedes escribir palabras individuales, incluso los conceptos básicos de las palabras, y kana todavía se usa para indicar formas gramaticales y la conexión de palabras entre ellas. Se parece a esto: 送 り が な は と っ て も 便利 で す. Si observa de cerca, puede ver que el primer personaje es kanji, seguido de varios signos de kana, etc. Este truco hace que sea fácil distinguir visualmente entre el texto japonés y el chino, que se ven gráficamente más "densos" porque solo hay kanji. Este kana, que se adjunta al kanji para indicar forma gramatical, se llama "okurigan".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí, y finalmente ... El número de kanji es bastante grande, y si no eres un robot, entonces recordar todo es difícil. Si la palabra está escrita por kanji, a menudo no es obvio cómo leerla en persona, a pesar del hecho de que en el lenguaje hablado la palabra bien se puede encontrar y la persona lo sabe. Para ayudar en esta situación, especialmente para kanji raros o cuando el texto está destinado a niños, extranjeros u otras categorías de ciudadanos con limitaciones mentales, la lectura de un kanji se firma desde arriba con un kana. Esto se llama la " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">furigana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". Se ve como en la imagen al comienzo de la publicación. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fuh, pasa al siguiente elemento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para agregar anotaciones sobre el texto, se utiliza el llamado rubí. No tiene nada que ver con el lenguaje de programación. Como acabo de aprender de Wikipedia, en ruso se llama </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ágata"</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El soporte de Ruby está disponible en html usando la etiqueta ruby:</font></font><br>
<pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ruby</span></span></span><span class="hljs-tag">&gt;</span></span><font></font>
 <font></font>
 <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rt</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rt</span></span></span><span class="hljs-tag">&gt;</span></span>
<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ruby</span></span></span><span class="hljs-tag">&gt;</span></span>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero ahora estamos interesados ​​en LibreOffice. </font><font style="vertical-align: inherit;">En modo manual, puede agregar anotaciones de rubí al texto a través del menú Formato -&gt; Guía fonética asiática. </font><font style="vertical-align: inherit;">Esto es algo extraño, porque puede usar el campo de fricción no solo para fonética, sino también con ellos. </font><font style="vertical-align: inherit;">Si no está en el menú, puede intentar agregar soporte para idiomas asiáticos en Herramientas -&gt; Opciones -&gt; Configuración de idioma. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuación, queremos hacer esto automáticamente para el texto seleccionado. </font><font style="vertical-align: inherit;">LibreOffice es maravilloso porque puedes escribir macros en Python en él. </font><font style="vertical-align: inherit;">Para hacer esto, se debe instalar el módulo libreoffice-script-provider-python (instalado a través de apt-get), que no vale la pena por defecto. </font><font style="vertical-align: inherit;">Ah, sí, hago todo en Ubuntu, si tienes un sistema operativo diferente, puedes compartir la receta en los comentarios :)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La macro en sí misma se escribe como una función regular en un Python. El documento es visible a través de una variable global con una instancia de la clase correspondiente y, de hecho, en él todos los métodos necesarios. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aquí hay un ejemplo simple:</font></font><br>
 <pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HelloWorldPython</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span><font></font>
    desktop = XSCRIPTCONTEXT.getDesktop()<font></font>
    model = desktop.getCurrentComponent()<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(model, <span class="hljs-string"><span class="hljs-string">"Text"</span></span>):<font></font>
        model = desktop.loadComponentFromURL(<span class="hljs-string"><span class="hljs-string">"private:factory/swriter"</span></span>,<span class="hljs-string"><span class="hljs-string">"_blank"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, () )<font></font>
    text = model.Text<font></font>
    tRange = text.End<font></font>
    tRange.String = <span class="hljs-string"><span class="hljs-string">"Hello World (in Python)"</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span><font></font>
g_exportedScripts = HelloWorldPython,<font></font>
</code></pre> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Guardamos en un archivo, lo ponemos o hacemos un enlace simbólico en la carpeta en la que LibreOffice contiene scripts. En mi caso es "~ / .config / libreoffice / 4 / user / Scripts / python". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abra LibreOffice Writer (OpenOffice también debería funcionar), vaya a Herramientas -&gt; Macros -&gt; Ejecutar macro y vea nuestro script allí, si todo funcionó. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Queda por escribir un guión que tome kanji del documento y agregue sus lecturas en rublos de los caracteres correspondientes. Todo es simple: hay programas especiales para la generación de lectura, simplemente los ejecutamos desde nuestro script macro, a través de la entrada-salida estándar, ejecutamos texto en japonés e insertamos la salida en el documento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un programa llamado kakasi toma texto en japonés y da una lectura completa, pero esto no es exactamente lo que necesita, porque </font><font style="vertical-align: inherit;">Quiero distribuir fragmentos de pistas fonéticas entre los campos de rubí de los caracteres correspondientes. </font><font style="vertical-align: inherit;">Para hacer esto, usando mecab, puede tokenizar el texto japonés y, por lo tanto, alimentarlo con kakasi en partes. </font><font style="vertical-align: inherit;">De hecho, la precisión de la generación de lectura a partir de esto se está deteriorando ligeramente, pero el diseño del documento está mejorando. </font><font style="vertical-align: inherit;">Algunas fallas pueden ser reparadas manualmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eso no es nada y eso es todo, pon apt-get install kakasi, mecab, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ve a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/undertherain/furiganize</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , descarga el torpe guión que escribí desde allí y qué sollozos lo hacen todo. </font><font style="vertical-align: inherit;">Póngalo en la carpeta deseada y disfrute. </font><font style="vertical-align: inherit;">Si alguien comparte su experiencia con otros sistemas operativos, generalmente será maravilloso.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es395153/">https://habr.com/ru/post/es395153/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es395143/index.html">¿Es posible introducir la ética en el algoritmo de los robomobiles?</a></li>
<li><a href="../es395145/index.html">Pregúntele a Ethan No. 59: ¿Qué es la energía oscura?</a></li>
<li><a href="../es395147/index.html">Mitsubishi Outlander SUV se rompe fácilmente a través de Wi-Fi</a></li>
<li><a href="../es395149/index.html">Una nueva explicación del principio del motor "imposible" EmDrive: todos estos son fotones</a></li>
<li><a href="../es395151/index.html">Climático en tu hogar. Anuncio de TION MagicAir</a></li>
<li><a href="../es395155/index.html">Luz inteligente: características de control de iluminación</a></li>
<li><a href="../es395157/index.html">Progreso de los DVR de automóviles y comparación con cámaras de acción.</a></li>
<li><a href="../es395159/index.html">Proyecto especial: estación de energía solar en una caravana. Parte 1</a></li>
<li><a href="../es395161/index.html">Los robots de Amazon hacen su trabajo 4 veces más rápido que los humanos</a></li>
<li><a href="../es395163/index.html">Selección: más de 50 materiales para comprender el mercado de valores</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>