<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍👦‍👦 🔏 🖤 我们如何在SAP HCM中进行薪资回归测试 🤾🏽 ◼️ 📔</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SAP HCM中的薪资引擎是可靠且灵活的工具。 使用此工具，您可以考虑员工薪酬领域中法律和当地法规的任何要求。 然而，这种通用性的另一面是对设置变化的复杂性和高度敏感性。 


 例如，上图显示了设置工资类型的视图。 一个错误设置的参数或复选框将导致错误的计算。 

 此外，错误的代价在金钱和声誉方...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我们如何在SAP HCM中进行薪资回归测试</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/X5RetailGroup/blog/474770/">  SAP HCM中的薪资引擎是可靠且灵活的工具。 使用此工具，您可以考虑员工薪酬领域中法律和当地法规的任何要求。 然而，这种通用性的另一面是对设置变化的复杂性和高度敏感性。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/c0/on/sg/c0onsgt9om9oa8z2-kbcbpsqumw.png"></div><a name="habracut"></a><br> 例如，上图显示了设置工资类型的视图。 一个错误设置的参数或复选框将导致错误的计算。 <br><br> 此外，错误的代价在金钱和声誉方面都可能很高。 <br><br> 还值得注意的是，该错误可能不会立即发生，而只会在计算后的几个月内发生。 在这种情况下，可能有必要重新计算几个月的工资，或创建特殊的校正计算方案。 这两种情况都非常耗时且有风险，因此只能视为万不得已。 <br><br> 这些错误从何而来？ 人力资源功能在不断发展；法律要求和业务要求正在变化。 为了满足这些要求，您必须定期更改SAP HCM设置。 在我们公司中，所有更改都在每月发布中实施。  SAP的标准更新也大约每月发布一次，并随发行版一起安装。 <br><br> 供应商的更新是包含说明和程序和设置更改的说明的软件包。 该图显示了服务包SAPK-60866INEAHRCRU的组成，其中包含四个针对俄罗斯的工资单。 <br><br><img src="https://habrastorage.org/webt/wf/5x/jg/wf5xjgoy339lwyvpjb6piqiriii.png"><br><br> 安装您自己的开发产品\设置和标准Service Pack可能会更改当前设置并导致错误的系统操作。 <br><br><h3> 回归测试 </h3><br> 如何确定现有功能不受标准SAP更新和我自己的新开发/设置的影响？ <br><br> 您当然可以分析所有更改，所有标准注释。 为他们创建示例并进行功能测试。 <br><br> 但是在此必须牢记，音符的数量可能在数十个之内，并且它们可能会影响附带的功能。 如果加上我们公司的规模（SAP HR中计算有270,000多名员工），那么可能的案例数将超过合理的数量。 <br><br> 为了解决这个问题，我们“业务应用SAP HR管理”部门的员工开发了一种用于工资回归测试的机制。 <br> 这种机制的本质非常简单。 首先，通过在原始系统上计算工资来创建标准。 <br><br> 然后将更新安装在系统上，并进行新的工资核算。 结果保存为发布数据。 <br><br> 在最后阶段，将标准与发布数据进行核对。 <br> 测试是在全部人员数量上进行的。 <br> 现在让我们更详细地讨论这一点。 <br><br> 我们的SAP HCM具有经典的3系统格局。 开发系统（简称为HRD），测试系统（HRT）和生产系统（HRP）。 所有改进都必须在HRT中进行测试，而测试系统的技术特征却接近生产性特征。 <br><br> 回归测试分为以下几个阶段： <br><br><ul><li>  HRT系统准备 </li><li> 测试数据准备 </li><li> 删除标准 </li><li> 发布发布 </li><li> 结果核对 </li></ul><br><h4>  HRT测试系统准备阶段 </h4><br> 在此阶段，基础专家正在准备HRT系统。  HRT是在特定日期从生产系统的备份中还原的。 即  HRP和HRT中的数据相同。 <br><br><h4> 测试数据准备阶段 </h4><br> 尽管生产系统和测试系统之间的数据是一致的，但是工资测试必须在尚未计算的时期内进行。 为此，请准备测试数据： <br><br><ul><li> 时间戳生成 </li></ul><br> 由于我们要计算一个新的期间，因此我们需要为积极注册的员工生成时间戳。 为此，使用开发的程序，从IT0007中的员工计划中生成IT2011到达/离开的时间戳。 <br><br><img src="https://habrastorage.org/webt/5z/-m/bw/5z-mbwnqewotvn2z0o7btebelri.png"><br><br><ul><li> 数据维护IT0027成本分摊 </li></ul><br> 对于积极注册的员工，请使用专门设计的程序从IT1018复制数据来填写0027IT成本分摊。 <br><br><ul><li> 维护数据以进行预付款计算 </li></ul><br> 使用分配给每个计算单元的人员编号完整准备测试数据。 为此，请使用事务HRUU0267填写IT267周期外付款。 <br><br> 为了计算假期，奖金，裁员和各种类型的病假，将为约20名员工创建测试数据。 <br><br> 启动所有测试数据后，将执行HRT系统的备份。 <br><br><h4> 删除标准的阶段 </h4><br> 此阶段包括： <br><br><ul><li> 时间评估 </li></ul><br> 为此，在pt60时间评估事务中创建了一个变体，该变体在RPCS0000程序中进一步使用。 标准程序RPCS0000用于人员组并行进行运行时间评估。 使用RPCS0000可以大大减少时间评估时间。 <br><br><img src="https://habrastorage.org/webt/xn/9q/ta/xn9qtavvl2droxpzjtudti9qgzo.png"><br><br><ul><li> 保存时间评估结果的基准 </li></ul><br> 完成时间评估后，必须保存结果。 为此，创建了一个特殊程序，将评估结果（表ZES和ZL）存储在文本文件中： <br><br><img src="https://habrastorage.org/webt/jb/me/kr/jbmekrhqosu4qlbrlwt2fyef0cm.png"><br><br> 创建的时间评估标准文件的一部分： <br><br><img src="https://habrastorage.org/webt/7u/i2/e9/7ui2e9zzpztebhfzwvkzilwiztk.png"><br><br><ul><li> 进行工资核算（定期和结算间付款） </li></ul><br> 通过标准方式（HRCUCLACM程序和交易PUST）对人员总数进行计算。 <br><br><ul><li> 保存计算结果以供以后对帐 </li></ul><br> 为此，在工资类型PC00_M99_CWTR的标准报告中，我们保存了用于查看必要计算（正常或间期结算）的选项。 为了将计算数据保存在HRD开发系统中，开发了一个用户程序。 该程序的输入参数之一是报告PC00_M99_CWTR的生成版本： <br><br><img src="https://habrastorage.org/webt/sq/kf/as/sqkfasgh1zkdjo9eycdbb0wnioy.png"><br><br> 在HRD开发系统中制定了该程序之后，将保存工资核算的参考结果： <br><br><img src="https://habrastorage.org/webt/rm/1m/9m/rm1m9m0lzvcqs4hiot-goz9xoh4.png"><br><br><ul><li> 过帐 </li></ul><br> 在HRT测试系统中，将高效地过帐到测试财务系统。 之后，使用专门设计的程序，将过帐数据上载到HRD开发系统，以作为将来对帐的参考。 <br><br><img src="https://habrastorage.org/webt/ly/wm/gn/lywmgnsdsxqcjij6vbpofzqecjc.png"><br><br> 完成此程序后，财务系统过帐的参考结果将保存在HRD开发系统中： <br><br><img src="https://habrastorage.org/webt/rr/la/ke/rrlakerjyhndywewkfioat8lzv8.png"><br><br><ul><li> 成立转让登记册 </li></ul><br> 在计算完薪水之后，我们形成了一个调职登记册。 使用开发的用户程序，这些注册表也存储在文本文件中作为参考。 <br><br><img src="https://habrastorage.org/webt/bp/t6/dd/bpt6ddu8nigqa0vmolmd5bcrgue.png"><br><br> 工资转移注册表标准文件的一个片段： <br><br><img src="https://habrastorage.org/webt/uu/cn/_l/uucn_lpfuiz1mwp1u101acct5i4.png"><br><br><ul><li> 税务申报 </li></ul><br> 使用标准报告RPCPAYRU_6NDFL和HRULNDFL分别生成6-NDFL和2-NDFL税收报告。 为了满足测试需求，已对它们进行了逻辑扩展，以将结果存储在透明表中。 在测试环境中生成税收报告后，这些结果将通过用户程序传输到开发系统。 <br><br><img src="https://habrastorage.org/webt/rc/ot/gr/rcotgr4lzj-jk9pnudc57copn40.png"><br><br> 收到的税收数据标准： <br><br><img src="https://habrastorage.org/webt/nw/go/gq/nwgogqazzfq5akv025rays4_nbm.png"><br><br><h4> 发布发布阶段 </h4><br> 删除标准后，有必要从准备测试数据阶段之后的备份中恢复测试系统。 即 我们得到的系统带有完整的测试数据，但没有计算。 所有更新都安装在此系统上-SAP专有开发和标准Service Pack。 此后，将执行定期和结算间薪资计算，过帐和其他操作，类似于删除标准时的操作。 <br><br><h4> 和解阶段 </h4><br> 删除标准并发布之后，对帐阶段就到了。 在这个阶段 <br> 我们将安装更新之前收到的数据与更新系统上的数据进行比较。 并且基于对差异的分析，我们得出有关已安装更新中是否存在错误的结论。 <br><br><ul><li> 时间评估结果的核对 </li></ul><br> 为此，我们以“标准与发布比较”模式启动用于自动验证计算结果的程序。 作为参数之一，我们指示保存时间评估标准文件的目录。 <br><br><img src="https://habrastorage.org/webt/se/p0/lt/sep0lt04p7igob2-fxugf_1dpas.png"><br><br> 如果标准数据和发布数据之间存在差异，则此报告将显示它。 <br><br><img src="https://habrastorage.org/webt/qb/zx/fy/qbzxfynypuauwem7z0wttbz386c.png"><br><br><ul><li> 过帐对帐 </li></ul><br> 从版本和基准发布数据已经在开发系统中。 为了进行验证，使用了一个用户报告，其中我们将发布日期和标准指定为参数： <br><br><img src="https://habrastorage.org/webt/ri/om/kh/riomkhx5betrvurxy04-oqfjvla.png"><br><br> 如果标准数据和发布数据之间存在差异，则此报告将显示它。 <br><br><img src="https://habrastorage.org/webt/dv/to/wm/dvtowmgce5h0qc1dffa3kf6mxwe.png"><br><br><ul><li> 税收报告的对帐 </li></ul><br> 在删除标准和发布阶段，将具有生成2-NDFL和6-NDFL报告的结果的数据传输到HRD开发系统。 用户报告用于验证数据。 输入的参数是标准\版本的删除日期以及进行这些删除的用户： <br><br><img src="https://habrastorage.org/webt/p2/4o/ev/p24oevfz0cnlj27juvzy6gczgbo.png"><br><br> 如果数据存在差异，则会显示它们。 <br><br><img src="https://habrastorage.org/webt/p8/fz/tl/p8fztloafhwrlgfanya96zsi9eq.png"><br><br><ul><li> 工资核对 </li></ul><br> 在标准的制定和发布阶段，在定期计算工资的过程中获得的数据，以及测试系统中的各种不同解决方案，被转移到开发系统中。 现在，在开发系统中，使用已开发的用户程序对标准数据进行了验证并发布： <br><br><img src="https://habrastorage.org/webt/mi/kf/v7/mikfv7lxs5tk1lvc99bao4fr84k.png"><br><br> 报告中提供了所有收到的差异。 <br><br><img src="https://habrastorage.org/webt/bf/bp/mk/bfbpmkrx2zwdmytsslfeefhvnuw.png"><br><br><ul><li> 调和注册管理机构 </li></ul><br> 在发布发布的阶段，生成了带有注册表数据以供列出的文本文件。 我们将这些参考数据与安装更新后创建的列表注册表进行比较。 <br><br><img src="https://habrastorage.org/webt/ug/w9/on/ugw9onqpixpcoxvdodxg2ft9qo4.png"><br><br> 如有差异，它们将显示在报告中。 <br><br><img src="https://habrastorage.org/webt/pb/wx/x9/pbwxx92tha-y0nucxl9iuuiq1so.png"><br><br>  SAP HCM支持部门的专家会分析所有获得的差异。 如果差异的原因是设置/设计中的错误，则在下一个迭代中对其进行更正和测试。 即 建立测试数据后，将再次从备份中恢复测试系统，安装带有错误修复程序的更新，并重新执行删除发布和对帐的步骤。 <br><br> 这种方法允许对诸如工资单之类的关键过程进行非常高质量的测试，不仅用于测试每月的发布/更新，而且还用于项目活动。 因此，仅在今年，它已成功应用于两个大型项目-重组法人实体和将SAP HCM系统更新到增强级别8。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN474770/">https://habr.com/ru/post/zh-CN474770/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN474754/index.html">PHP安全性：密码存储位置和方式。 第一部分</a></li>
<li><a href="../zh-CN474756/index.html">VMworld Europe 2019：传奇背包的重要公告和包装</a></li>
<li><a href="../zh-CN474760/index.html">我们将ngx-translate固定在Angular应用程序中。 实用演练</a></li>
<li><a href="../zh-CN474762/index.html">研讨会：面向企业的混合IT解决方案。 11月14日，莫斯科</a></li>
<li><a href="../zh-CN474768/index.html">大厅HighLoad ++ 2019的公开广播</a></li>
<li><a href="../zh-CN474772/index.html">一家使用AI在21天内开发出治愈方法的初创公司</a></li>
<li><a href="../zh-CN474776/index.html">虚拟化的一般理论和考古学x86</a></li>
<li><a href="../zh-CN474782/index.html">语音合成技术概述</a></li>
<li><a href="../zh-CN474784/index.html">街机游戏故事</a></li>
<li><a href="../zh-CN474788/index.html">在拉拉韦尔组织路线</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>