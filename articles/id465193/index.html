<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸšŠ ğŸ§” ğŸ¤¸ğŸ¿ Membangun proyek Android dalam wadah buruh pelabuhan ğŸš™ ğŸ‘ŠğŸ½ ğŸ™ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ketika mengembangkan proyek untuk platform Android, bahkan yang terkecil, cepat atau lambat, harus berurusan dengan lingkungan pengembangan. Selain An...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membangun proyek Android dalam wadah buruh pelabuhan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465193/"> Ketika mengembangkan proyek untuk platform Android, bahkan yang terkecil, cepat atau lambat, harus berurusan dengan lingkungan pengembangan.  Selain Android SDK, Anda memerlukan versi terbaru Kotlin, Gradle, platform-tools, build-tools.  Dan jika pada mesin pengembang semua dependensi ini diselesaikan sebagian besar menggunakan Android Studio IDE, maka pada server CI / CD setiap pembaruan dapat berubah menjadi sakit kepala.  Dan jika dalam pengembangan web, Docker menjadi solusi standar untuk masalah lingkungan, lalu mengapa tidak mencoba untuk memecahkan masalah serupa dengan itu dalam pengembangan Android ... <br><a name="habracut"></a><br>  Bagi mereka yang tidak tahu apa itu Docker - jika itu cukup sederhana, maka ini adalah alat yang disebut-buat  â€œContainersâ€ di mana kernel OS minimum dan set perangkat lunak yang diperlukan terkandung, yang dapat kami sebarkan di mana pun kami inginkan, sambil menjaga lingkungan.  Apa tepatnya yang akan ada dalam wadah kami didefinisikan dalam Dockerfile, yang kemudian dirakit menjadi gambar yang diluncurkan di mana saja dan memiliki properti idempotensi. <br><br>  Proses instalasi dan dasar-dasar Docker dijelaskan dengan sempurna di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs resminya</a> .  Oleh karena itu, berjalan sedikit di depan, di sini kita memiliki Dockerfile <br><br><pre><code class="plaintext hljs"># ..     Android-  Gradle, #        Docker- #            Gradle FROM gradle:5.4.1-jdk8 #       Android SDK  #     ENV SDK_URL="https://dl.google.com/android/repository/sdk-tools-linux-3859397.zip" \ ANDROID_HOME="/usr/local/android-sdk" \ ANDROID_VERSION=28 \ ANDROID_BUILD_TOOLS_VERSION=28.0.3 #  ,   SDK   , #     RUN mkdir "$ANDROID_HOME" .android \ &amp;&amp; cd "$ANDROID_HOME" \ &amp;&amp; curl -o sdk.zip $SDK_URL \ &amp;&amp; unzip sdk.zip \ &amp;&amp; rm sdk.zip \ #          #  .  .  Android    #          #      #    &amp;&amp; mkdir "$ANDROID_HOME/licenses" || true \ &amp;&amp; echo "24333f8a63b6825ea9c5514f83c2829b004d1" &gt; "$ANDROID_HOME/licenses/android-sdk-license" \ &amp;&amp; echo "84831b9409646a918e30573bab4c9c91346d8" &gt; "$ANDROID_HOME/licenses/android-sdk-preview-license" #   SDK   build-tools, platform-tools RUN $ANDROID_HOME/tools/bin/sdkmanager --update RUN $ANDROID_HOME/tools/bin/sdkmanager "build-tools;${ANDROID_BUILD_TOOLS_VERSION}" \ "platforms;android-${ANDROID_VERSION}" \ "platform-tools"</code> </pre> <br>  Kami menyimpannya di folder dengan proyek Android kami dan memulai perakitan wadah dengan perintah <br><br><pre> <code class="bash hljs">docker build -t android-build:5.4-28-27 .</code> </pre> <br>  <i>Opsi -t</i> menentukan tag atau nama kontainer kami, yang biasanya terdiri dari nama dan versinya.  Dalam kasus kami, kami menyebutnya android-build, dan dalam versi tersebut kami menentukan satu set versi gradle, android-SDK dan platform-tools.  Di masa mendatang, akan lebih mudah bagi kita untuk mencari gambar yang kita butuhkan dengan nama menggunakan "versi" ini. <br><br>  Setelah perakitan berlalu, kita dapat menggunakan gambar kita secara lokal, kita dapat mengunggahnya dengan <i>perintah push docker</i> ke repositori gambar publik atau pribadi untuk mengunduhnya ke mesin lain. <br><br>  Sebagai contoh, kami mengumpulkan proyek secara lokal.  Untuk melakukan ini, jalankan perintah di folder proyek <br><br><pre> <code class="bash hljs">docker run --rm -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PWD</span></span></span><span class="hljs-string">"</span></span>:/home/gradle/ -w /home/gradle android-build:5.4.1-28-27 gradle assembleDebug</code> </pre> <br>  Mari kita lihat apa artinya: <br><br>  <i>docker run</i> - perintah peluncuran gambar itu sendiri <br>  <i>-rm</i> - berarti setelah menghentikan wadah, ia menghilangkan semua yang diciptakan dalam proses kehidupannya <br>  <i>-v "$ PWD": / home / gradle /</i> - <i>me</i> -mount folder saat ini dengan proyek Android kami ke folder internal wadah / home / gradle / <br>  <i>-w / home / gradle</i> - mengatur direktori kerja container <br>  <i>android-build: 5.4.1-28-27</i> - nama wadah kami yang kami kumpulkan <br>  <i>gradle assembleDebug</i> - sebenarnya tim pembangun yang membangun proyek kami <br><br>  Jika semuanya berjalan dengan baik, maka setelah beberapa detik / menit Anda akan melihat sesuatu di layar seperti <b>BUILD SUCCESSFUL dalam 8m 3s</b> !  Dan di folder aplikasi / build / output / apk akan menjadi aplikasi yang dirakit. <br><br>  Dengan cara yang sama, Anda dapat melakukan tugas gradle lainnya - periksa proyek, jalankan tes, dll.  Keuntungan utama adalah bahwa jika Anda perlu membangun proyek di mesin lain, kami tidak perlu khawatir tentang menginstal seluruh lingkungan dan itu akan cukup untuk mengunduh gambar yang diperlukan dan menjalankan perakitan di dalamnya. <br><br>  Kontainer tidak menyimpan perubahan apa pun, dan setiap perakitan dimulai dari awal, yang di satu sisi menjamin identitas perakitan terlepas dari di mana diluncurkan, di sisi lain, setiap kali Anda harus mengunduh semua dependensi dan mengkompilasi semua kode lagi, dan ini kadang-kadang bisa memakan waktu yang cukup lama.  Oleh karena itu, selain start "dingin" yang biasa, kami memiliki opsi untuk memulai perakitan sambil mempertahankan yang disebut.  "Cache", tempat kita menyimpan folder ~ / .gradle hanya dengan menyalinnya ke folder kerja proyek, dan di awal bangunan selanjutnya kita mengembalikannya.  Kami menempatkan semua prosedur penyalinan ke dalam skrip terpisah dan perintah peluncuran itu sendiri mulai terlihat seperti ini <br><br><pre> <code class="bash hljs">docker run --rm -v <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PWD</span></span></span><span class="hljs-string">"</span></span>:/home/gradle/ -w /home/gradle android-build:5.4.1-28-27 /bin/bash -c <span class="hljs-string"><span class="hljs-string">"./pre.sh; gradle assembleDebug; ./post.sh"</span></span></code> </pre> <br>  Akibatnya, waktu perakitan proyek rata-rata untuk kami berkurang beberapa kali (tergantung pada jumlah dependensi pada proyek, tetapi proyek rata-rata dengan demikian mulai berkumpul dalam 1 menit, bukannya 5 menit). <br><br>  Semua ini dengan sendirinya masuk akal hanya jika Anda memiliki server CI / CD internal Anda sendiri, yang mana Anda sendiri terlibat.  Tetapi sekarang ada banyak layanan cloud di mana semua masalah ini telah diselesaikan dan Anda tidak perlu khawatir tentang hal ini dan Anda juga dapat menentukan properti perakitan yang diperlukan dalam pengaturan proyek. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id465193/">https://habr.com/ru/post/id465193/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id465181/index.html">Tempat licin di C ++ 17</a></li>
<li><a href="../id465185/index.html">Standar pengawasan video baru: warna pada malam hari, anti noise, ePoE</a></li>
<li><a href="../id465187/index.html">6 frase bahasa Inggris yang dapat digunakan dalam negosiasi gaji dengan perusahaan asing</a></li>
<li><a href="../id465189/index.html">Workflow Satu Tim Pengembangan Sprint</a></li>
<li><a href="../id465191/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 25. Studi mendalam tentang IPv6</a></li>
<li><a href="../id465203/index.html">Gajah perusahaan</a></li>
<li><a href="../id465209/index.html">Kami mempelajari data paspor seseorang berdasarkan nama (jika ada jaminan)</a></li>
<li><a href="../id465211/index.html">Melarikan Diri dari Tes: Membangun Jalan Pintas dari Fixture ke Pernyataan</a></li>
<li><a href="../id465215/index.html">Apa yang harus dibaca pemimpin tim dan stasiun layanan: pilihan 50 buku dengan nilai dan banyak lagi</a></li>
<li><a href="../id465217/index.html">Acronis True Image 2020: Skema Replikasi Baru dan Perlindungan yang Ditingkatkan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>