<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úåÔ∏è üôÉ üë©‚Äçüë©‚Äçüëß‚Äçüëß Java 14: vista previa de registros üëãüèª üîû üßëüèø‚Äçü§ù‚Äçüßëüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pronto, aparecer√° una nueva caracter√≠stica de sintaxis en los pr√≥ximos registros de Java 14 . Despu√©s de estudiar la vista previa , que describe breve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Java 14: vista previa de registros</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484700/"><p>  Pronto, aparecer√° una nueva caracter√≠stica de sintaxis en los <a href="https://openjdk.java.net/projects/jdk/14/">pr√≥ximos</a> registros de <a href="https://openjdk.java.net/projects/jdk/14/">Java 14</a> .  Despu√©s de estudiar la <a href="https://openjdk.java.net/jeps/359">vista previa</a> , que describe brevemente c√≥mo se ven las grabaciones y con "lo que comen", me atrev√≠ a adaptar el documento al ruso para Habr.  A qui√©n le importa, bienvenido a cat. </p><a name="habracut"></a><br><h3>  Resumen </h3><br>  Las entradas le permiten ampliar las capacidades de Java.  Proporcionan una sintaxis concisa para declarar clases que son simples portadoras de conjuntos de datos persistentes e inmutables. <br><br><h3>  Razones y objetivos </h3><br>  Las quejas de que "Java es demasiado detallado" y que necesita "ceremonia" con √©l son bastante comunes.  La raz√≥n de esto son las clases que est√°n dise√±adas solo para almacenar un determinado conjunto de datos.  Para escribir correctamente una clase de este tipo, debe escribir una gran cantidad de c√≥digo formal, repetitivo y propenso a errores: constructores, captadores y establecedores, equals (), hashCode (), toString (), etc.  Los desarrolladores a veces hacen trampa y no anulan equals () y hashCode (), lo que a su vez puede conducir a un comportamiento inusual o problemas con la depuraci√≥n.  O, cuando los desarrolladores no desean declarar otra clase m√°s, prescriben una alternativa, pero no del todo adecuada, simplemente porque tiene la "forma correcta". <br><br>  Los entornos de desarrollo ayudar√°n a registrar la mayor parte del c√≥digo en la clase, pero no ayudar√°n al desarrollador a leer este c√≥digo para navegar r√°pidamente entre docenas de l√≠neas de c√≥digo repetitivo y comprender que esta clase es un soporte de datos ordinario.  Los conjuntos de datos est√°ndar de modelado de c√≥digo Java deben ser simples de escribir, comprender y validar. <br><br>  A primera vista, puede parecer que los registros est√°n destinados a reducir el c√≥digo de la plantilla.  Ponemos el objetivo sem√°ntico en ellos: <i>"modelar datos como datos"</i> (modelar datos como datos).  Si la sem√°ntica es correcta, el c√≥digo de la plantilla har√° todo por s√≠ mismo sin la participaci√≥n del desarrollador.  Despu√©s de todo, declarar conjuntos de datos persistentes debe ser f√°cil, claro y conciso. <br><br><h3>  Metas que no fueron </h3><br>  No nos propusimos el objetivo de "declarar la guerra" en el c√≥digo repetitivo.  En particular, no ten√≠amos la intenci√≥n de resolver el problema de las clases mutables utilizando la convenci√≥n de nomenclatura de componentes JavaBean.  Aunque las propiedades, la metaprogramaci√≥n y la generaci√≥n de c√≥digo basada en anotaciones a menudo se sugieren como "soluciones" a este problema, agregar estas caracter√≠sticas tampoco era nuestro objetivo. <br><br><h3>  Descripci√≥n </h3><br>  Las entradas son un nuevo tipo de declaraci√≥n de tipo en Java.  Al igual que enum, la escritura es una clase funcionalmente limitada.  Anuncia su vista y proporciona una API que se basa en esa vista.  Las entradas no separan la API de la presentaci√≥n y, a su vez, son concisas. <br><br>  La entrada contiene un nombre y una descripci√≥n del estado.  La descripci√≥n del estado declara los componentes de este registro.  Opcionalmente, el registro puede tener un cuerpo.  Por ejemplo: <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-function">record </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Point</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y)</span></span></span><span class="hljs-function"> </span></span>{ }</code> </pre> <br>  Dado que los registros sem√°nticos son portadores de datos simples, reciben autom√°ticamente elementos est√°ndar: <br><br><ul><li>  Campo final privado para cada componente del estado; </li><li>  Un m√©todo de lectura p√∫blica para cada componente de estado con el mismo nombre y tipo que el componente; </li><li>  Un constructor p√∫blico que coincida con la firma del registro;  inicializa cada campo desde el argumento correspondiente; </li><li>  Implementaciones de equals () y hashCode (), que dicen que dos registros son iguales si son del mismo tipo y contienen el mismo estado; </li><li>  Una implementaci√≥n de toString (), que incluye una representaci√≥n de cadena de todos los componentes de grabaci√≥n con sus nombres. </li></ul><br>  En otras palabras, la presentaci√≥n del registro se basa completamente en una descripci√≥n del estado.  Adem√°s, seg√∫n el estado del registro, se produce la formaci√≥n de equals (), hashCode () y toString (). <br><br><h3>  Limitaciones </h3><br>  Los registros no pueden heredar ninguna otra clase y no pueden declarar campos de objeto, excepto los campos finales privados que corresponden a componentes de estado.  Cualquier otro campo declarado debe ser est√°tico.  Estas limitaciones aseguran que la descripci√≥n del estado en s√≠ mismo defina la vista. <br><br>  Las entradas son finales y no pueden ser abstractas.  Estas restricciones indican que la API de registro se define solo por una descripci√≥n de estado y no se puede extender m√°s tarde con otra clase o registro. <br><br>  Los componentes de grabaci√≥n son finales.  Esta restricci√≥n implementa el principio de "sin cambios por defecto", que se usa ampliamente para conjuntos de datos. <br><br>  Adem√°s de las limitaciones mencionadas anteriormente, los registros se comportan como clases ordinarias: pueden declararse como de nivel superior o anidados, pueden ser gen√©ricos, pueden implementar interfaces.  Los registros se crean llamando al nuevo operador.  El cuerpo de escritura puede declarar m√©todos est√°ticos, campos est√°ticos, bloques de inicializaci√≥n est√°tica, constructores, m√©todos de instancia, bloques de inicializaci√≥n de instancia y tipos anidados.  Se pueden anotar un registro y componentes de estado individuales.  Si el registro est√° anidado, entonces es est√°tico;  Esto elimina la situaci√≥n con instancias anidadas que podr√≠an agregar autom√°ticamente estado al registro. <br><br><h3>  Entradas declaradas expl√≠citamente </h3><br>  Aunque la implementaci√≥n est√°ndar de getters, as√≠ como los m√©todos equals (), hashCode () y toString (), son aceptables para la mayor√≠a de los casos de uso, el desarrollador tiene la opci√≥n de anular la implementaci√≥n est√°ndar.  Sin embargo, debe tener especial cuidado al anular los m√©todos equals / hashCode. <br><br>  Se presta especial atenci√≥n a la declaraci√≥n expl√≠cita del constructor can√≥nico, cuya firma coincide con la descripci√≥n del estado del registro.  Se puede declarar un constructor sin una lista formal de par√°metros: en este caso, se supone que coincide con la descripci√≥n del estado, y cualquier campo de registro se inicializa impl√≠citamente al cerrar el cuerpo del constructor de los par√°metros formales correspondientes (esto. X = x) en la salida.  Esto permite que el constructor can√≥nico solo verifique y ajuste sus par√°metros, as√≠ como omitir la inicializaci√≥n de campo expl√≠cito.  Por ejemplo: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">record </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Range</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> lo, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> hi)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Range { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lo &gt; hi) <span class="hljs-comment"><span class="hljs-comment">/* referring here to the implicit constructor parameters */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException(String.format(<span class="hljs-string"><span class="hljs-string">"(%d,%d)"</span></span>, lo, hi)); } }</code> </pre> <br><h3>  Gram√°tica </h3><br><pre> <code class="java hljs">RecordDeclaration: {ClassModifier} record TypeIdentifier [TypeParameters] (RecordComponents) [SuperInterfaces] [RecordBody] RecordComponents: {RecordComponent {, RecordComponent}} RecordComponent: {Annotation} UnannType Identifier RecordBody: { {RecordBodyDeclaration} } RecordBodyDeclaration: ClassBodyDeclaration RecordConstructorDeclaration RecordConstructorDeclaration: {Annotation} {ConstructorModifier} [TypeParameters] SimpleTypeName [Throws] ConstructorBody</code> </pre><br><h3>  Anotaciones para componentes de grabaci√≥n </h3><br>  Las anotaciones de anotaci√≥n se pueden aplicar a componentes de grabaci√≥n si se aplican a componentes, par√°metros, campos o m√©todos.  Las anotaciones de anuncios que se aplican a cualquiera de estos componentes se aplican a las declaraciones impl√≠citas de cualquier elemento requerido. <br><br>  Las anotaciones de tipo que cambian los tipos de componentes de registro se extienden a tipos en declaraciones impl√≠citas de elementos requeridos (por ejemplo, par√°metros de constructor, declaraciones de campo y m√©todos).  Las declaraciones expl√≠citas de los elementos necesarios deben coincidir exactamente con el tipo del componente correspondiente del registro, sin incluir anotaciones de tipo. <br><br><h3>  API de reflexi√≥n </h3><br>  Los siguientes m√©todos p√∫blicos se agregar√°n a <i>java.lang.Class</i> : <br><br><ul><li>  <i>RecordComponent [] getRecordComponents ()</i> </li><li>  <i>boolean isRecord ()</i> </li></ul><br>  El <i>m√©todo getRecordComponents ()</i> devuelve una matriz <i>java.lang.reflect.RecordComponent</i> , donde <i>java.lang.reflect.RecordComponent</i> es una nueva clase. <br><br>  Los elementos de esta matriz corresponden a los componentes del registro y van en el mismo orden en que se declaran en el registro.  Se puede extraer informaci√≥n adicional de cada <i>RecordComponent</i> en la matriz, incluyendo nombre, tipo, gen√©rico, as√≠ como su valor. <br><br>  El m√©todo <i>isRecord ()</i> devuelve <i>verdadero</i> si esta clase se declara como un registro.  (Similar al m√©todo <i>isEnum ()</i> ). <br><br><h3>  Alternativas </h3><br>  Los registros se pueden definir como la forma condicional de tuplas.  En lugar de registros, podemos usar tuplas estructurales.  Aunque las tuplas ofrecen formas m√°s ligeras de expresar algunos conjuntos de datos, el resultado suele ser menos informativo: <br><br><ul><li>  El principio principal de la filosof√≠a Java es que los <b>nombres son importantes</b> .  Las clases y sus elementos llevan nombres que son relevantes para su contenido, mientras que las tuplas y sus componentes no.  Es decir, la clase <i>Person</i> con las <i>propiedades firstName</i> y <i>lastName</i> es m√°s comprensible y confiable que la tupla an√≥nima de <i>String</i> y <i>String</i> . </li><li>  Las clases admiten validaci√≥n de estado a trav√©s de sus constructores, las tuplas no.  Algunos conjuntos de datos, como los rangos num√©ricos, tienen invariantes a los que luego se puede hacer referencia si el constructor los utiliza; </li><li>  Las clases pueden tener un comportamiento basado en su estado;  La combinaci√≥n de estado y comportamiento hace que el comportamiento en s√≠ sea m√°s expl√≠cito y accesible.  Las tuplas, al ser solo un conjunto de datos, no ofrecen esa oportunidad. </li></ul><br><h3>  Dependencias </h3><br>  Los registros van bien con <a href="https://openjdk.java.net/jeps/360">los tipos aislados (JEP 360)</a> ;  Junto con los tipos aislados, los registros forman una construcci√≥n, a menudo llamados <a href="https://en.wikipedia.org/wiki/Algebraic_data_type">tipos de datos algebraicos.</a>  Adem√°s, las entradas mismas permiten <a href="https://cr.openjdk.java.net/~briangoetz/amber/pattern-match.html">la coincidencia de patrones</a> .  Debido a que los registros asocian sus API con descripciones de estado, en √∫ltima instancia, tambi√©n podemos obtener patrones de deconstrucci√≥n para registros y usar la informaci√≥n de clases aisladas en una <i>declaraci√≥n de cambio</i> . </div></div><p>Source: <a href="https://habr.com/ru/post/484700/">https://habr.com/ru/post/484700/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../484680/index.html">Traducci√≥n del libro de Andrew Un, Pasi√≥n por el aprendizaje autom√°tico, Cap√≠tulo 33</a></li>
<li><a href="../484686/index.html">¬øPor qu√© las resistencias se indican por color?</a></li>
<li><a href="../484688/index.html">Nos estamos acercando al l√≠mite de la potencia inform√°tica: necesitamos nuevos programadores</a></li>
<li><a href="../484690/index.html">Seminario, conferencia, mitap: estudio de las estad√≠sticas de 18,000 eventos.</a></li>
<li><a href="../484692/index.html">Vitamina C: ¬ønecesito tomar suplementos o es una medida comercial?</a></li>
<li><a href="../484702/index.html">Alternativas de Prestashop en 2020: principales plataformas de comercio electr√≥nico</a></li>
<li><a href="../484706/index.html">Practica trabajando con neum√°ticos personalizados del complejo Redd</a></li>
<li><a href="../484708/index.html">Richard Hamming "Cap√≠tulo inexistente": ¬øC√≥mo sabemos lo que sabemos (versi√≥n completa)</a></li>
<li><a href="../484710/index.html">Romper las reglas de la recolecci√≥n de basura de Unity</a></li>
<li><a href="../484712/index.html">Compatibilidad binaria reactiva: c√≥mo la proporcionamos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>