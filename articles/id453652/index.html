<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“§ ğŸ‘• ğŸ¤œğŸ¼ LogRock: Menguji melalui Logging ğŸ“¦ ğŸ‘¨ğŸ¿â€âœˆï¸ ğŸ¤¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="LogRock: Menguji melalui Logging 
 Selama lebih dari 2 tahun kami telah mengerjakan proyek Cleverbrush kami. Ini adalah perangkat lunak untuk bekerja ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>LogRock: Menguji melalui Logging</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453652/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0a0/8fe/e87/0a08fee87984969110aef2080f4687ae.png" alt="Logrock"></div><br><h2>  LogRock: Menguji melalui Logging </h2><br>  Selama lebih dari 2 tahun kami telah mengerjakan proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cleverbrush</a> kami.  Ini adalah perangkat lunak untuk bekerja dengan grafik vektor.  Bekerja dengan editor grafis menyiratkan sejumlah besar kasus penggunaan aplikasi.  Kami berusaha menghemat uang dan waktu, jadi kami mengoptimalkan semuanya, termasuk pengujian.  Menutupi kasus uji dengan setiap opsi terlalu mahal dan tidak rasional, terutama karena tidak mungkin untuk menutup semua opsi. <br><br>  Selama pengembangan, modul untuk aplikasi React JS telah dibuat - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">LogRock (github)</a> . <br><br>  Modul ini memungkinkan Anda untuk mengatur aplikasi logging modern.  Berdasarkan log, kami melakukan pengujian.  Pada artikel ini saya akan memberi tahu Anda tentang seluk-beluk penggunaan modul ini dan cara mengatur pengujian melalui pencatatan. <br><a name="habracut"></a><br><h2>  Apa masalahnya? </h2><br>  Jika Anda membandingkan program dengan organisme hidup, maka bug di dalamnya adalah penyakit.  Penyebab "penyakit" ini mungkin sejumlah faktor, termasuk lingkungan pengguna tertentu.  Ini terutama benar jika kita mempertimbangkan platform web.  Terkadang hubungan sebab akibat sangat kompleks, dan bug yang ditemukan selama pengujian adalah hasil dari sejumlah peristiwa. <br><br>  Seperti halnya penyakit manusia, tidak ada yang akan menjelaskan gejalanya lebih baik daripada pasien, tidak ada penguji yang dapat mengetahui apa yang terjadi, lebih baik daripada program itu sendiri. <br><br><h2>  Apa yang harus dilakukan </h2><br>  Untuk memahami apa yang terjadi, kita perlu daftar tindakan yang dilakukan pengguna dalam aplikasi kita. <br><br>  Agar program kami sendiri dapat memberi tahu kami apa yang â€œmenyakitkanâ€, kami akan mengambil modul <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">LogRock (github)</a> dan menghubungkannya dengan ElasticSearch, LogStash, dan Kibana. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d4/1d6/7ea/6d41d67ea5bd247827fd03948fc8b0dd.png" alt="gambar"></div><br>  <b>ElasticSearch</b> adalah mesin pencari teks lengkap yang kuat.  Anda dapat menonton tutorial ElasticSearch di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br>  <b>LogStash</b> adalah sistem untuk mengumpulkan log dari berbagai sumber, yang dapat mengirim log, termasuk ke ElasticSearch. <br>  <b>Kibana</b> adalah antarmuka web ke ElasticSearch dengan banyak add-on. <br><br><h2>  Bagaimana cara kerjanya? </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dcf/06e/706/dcf06e706a5ae052a2f15eaf09e45c93.png" alt="gambar"></div><br>  Jika terjadi kesalahan (atau hanya sesuai permintaan), aplikasi mengirimkan log ke server tempat mereka disimpan ke file.  Logstash secara bertahap menyimpan data dalam ElasticSearch - ke basis data.  Pengguna login ke Kibana dan melihat log yang disimpan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e19/0b0/244/e190b0244b22db314385b5156e5c56cd.png" alt="gambar"></div><br>  Sepertinya Kibana yang telah disetel dengan baik.  Ini menampilkan data dari ElasticSearch.  Kibana dapat menampilkan data dalam bentuk tabel, grafik, peta, dll., Yang sangat nyaman untuk menganalisis dan memahami apa yang terjadi dengan aplikasi kita. <br><br>  <b><u>Pada artikel ini, saya TIDAK akan membahas pengaturan ElasticStack!</u></b> <br><br><h2>  Menciptakan sistem logging </h2><br>  Sebagai contoh, kami akan mengintegrasikan sistem logging dalam aplikasi JS satu halaman yang ditulis dalam Bereaksi.  Tidak masalah kerangka mana aplikasi Anda akan ditulis.  Saya akan mencoba menggambarkan pendekatan membangun sistem log itu sendiri. <br><br><h3>  1. Pelanggan </h3><br><h4>  1.0 LogRock.  Instalasi </h4><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan ke LogRock</a> <br><br>  Untuk menginstal, Anda harus melakukan: <br><br><pre><code class="bash hljs">npm install logrock  yarn add logrock</code> </pre> <br><h4>  1.1 LogRock.  Pengaturan aplikasi </h4><br>  Untuk memulai, bungkus aplikasi kami dalam sebuah komponen <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { LoggerContainer } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"logrock"</span></span>; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  LoggerContainer adalah komponen yang merespons kesalahan aplikasi Anda dan membentuk tumpukan. <br><br>  Tumpukan adalah objek dengan informasi tentang sistem operasi pengguna, browser, yang ditekan tombol mouse atau keyboard dan, tentu saja, tindakan subarray, di mana semua tindakan pengguna yang ia lakukan dalam sistem kami direkam. <br><br>  LoggerContainer memiliki sejumlah pengaturan, pertimbangkan beberapa di antaranya <br><br><pre> <code class="javascript hljs">&lt;LoggerContainer active={<span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>} limit={<span class="hljs-number"><span class="hljs-number">20</span></span>} onError={stack =&gt; { sendToServer(stack); }} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  aktif - aktifkan atau nonaktifkan logger <br><br>  limit - menetapkan batas jumlah tindakan terbaru yang disimpan oleh pengguna.  Jika pengguna melakukan 21 tindakan, yang pertama dalam larik ini akan secara otomatis dihapus.  Dengan demikian, kita akan memiliki 20 tindakan terakhir yang mendahului kesalahan. <br><br>  onError - panggilan balik yang dipanggil saat terjadi kesalahan.  Objek Stack masuk ke dalamnya, di mana semua informasi tentang lingkungan, tindakan pengguna, dll disimpan.  Dari callback inilah kita perlu mengirim data ini ke ElasticSearch atau backend, atau menyimpannya ke file untuk analisis dan pemantauan lebih lanjut. <br><br><h4>  1.2 LogRock.  Penebangan </h4><br>  Untuk membuat pencatatan tindakan pengguna yang berkualitas tinggi, kita harus menutup kode kita dengan panggilan log. <br><br>  Modul LogRock dilengkapi dengan logger yang dikaitkan dengan LoggerContainer <br><br>  Misalkan kita memiliki komponen <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Toggle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [toggleState, setToggleState] = useState(<span class="hljs-string"><span class="hljs-string">"off"</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toggle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ setToggleState(toggleState === <span class="hljs-string"><span class="hljs-string">"off"</span></span> ? <span class="hljs-string"><span class="hljs-string">"on"</span></span> : <span class="hljs-string"><span class="hljs-string">"off"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{</span></span></span></span><span class="xml"><span class="hljs-tag">`</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">switch</span></span></span></span><span class="xml"><span class="hljs-tag"> ${</span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">toggleState</span></span></span></span><span class="xml"><span class="hljs-tag">}`} </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onClick</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{toggle}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml">; }</span></span></code> </pre> <br>  Untuk menutupnya dengan log, kita perlu memodifikasi metode sakelar <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toggle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> state = toggleState === <span class="hljs-string"><span class="hljs-string">"off"</span></span> ? <span class="hljs-string"><span class="hljs-string">"on"</span></span> : <span class="hljs-string"><span class="hljs-string">"off"</span></span>; logger.info(<span class="hljs-string"><span class="hljs-string">`React.Toggle|Toggle component changed state </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${state}</span></span></span><span class="hljs-string">`</span></span>); setToggleState(state); }</code> </pre> <br>  Kami telah menambahkan logger di mana informasi dibagi menjadi 2 bagian.  React.Toggle menunjukkan kepada kita bahwa tindakan ini terjadi pada tingkat Bereaksi, komponen Toggle, dan kemudian kita memiliki penjelasan verbal tentang tindakan dan keadaan saat ini yang masuk ke komponen ini.  Pemisahan seperti itu ke level tidak perlu, tetapi dengan pendekatan ini akan lebih jelas di mana tepatnya kode kita dieksekusi. <br><br>  Kita juga bisa menggunakan metode "componentDidCatch", yang diperkenalkan di React versi 16, jika terjadi kesalahan. <br><br><h4>  2. Interaksi server </h4><br>  Perhatikan contoh berikut. <br><br>  Misalkan kita memiliki metode yang mengumpulkan data pengguna dari backend.  Metode ini tidak sinkron, bagian dari logika disembunyikan di backend.  Bagaimana cara mencatat kode ini dengan benar? <br><br>  Pertama, karena kami memiliki aplikasi klien, semua permintaan pergi ke server akan melalui sesi pengguna tunggal, tanpa memuat ulang halaman.  Untuk mengaitkan tindakan pada klien dengan tindakan di server, kita harus membuat SessionID global dan menambahkannya ke header untuk setiap permintaan ke server.  Di server, kita bisa menggunakan logger apa pun yang akan mencakup logika kita seperti contoh dari frontend, dan jika terjadi kesalahan kirim data ini dengan sessionID terlampir di Elastic ke pelat Backend. <br><br>  1. Kami menghasilkan SessionID pada klien <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.SESSION_ID = <span class="hljs-string"><span class="hljs-string">`sessionid-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">Math</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.random().toString(</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">36</span></span></span></span><span class="hljs-string"><span class="hljs-subst">).substr(</span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">3</span></span></span></span><span class="hljs-string"><span class="hljs-subst">, </span></span><span class="hljs-number"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-number">9</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string">`</span></span>;</code> </pre> <br>  2. Kita harus mengatur SessionID untuk semua permintaan ke server.  Jika kami menggunakan pustaka untuk kueri, ini sangat sederhana dengan mendeklarasikan SessionID untuk semua kueri. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> fetch = axios.create({...}); fetch.defaults.headers.common.sessionId = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.SESSION_ID;</code> </pre> <br>  3. Di LoggerContainer ada bidang khusus untuk SessionID <br><br><pre> <code class="javascript hljs">&lt;LoggerContainer active={<span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>} sessionID={<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.SESSION_ID} limit={<span class="hljs-number"><span class="hljs-number">20</span></span>} onError={stack =&gt; { sendToServer(stack); }} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  4. Permintaan itu sendiri (pada klien) akan terlihat seperti ini: <br><br><pre> <code class="javascript hljs">logger.info(<span class="hljs-string"><span class="hljs-string">`store.getData|User is ready for loading... User ID is </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${id}</span></span></span><span class="hljs-string">`</span></span>); getData(<span class="hljs-string"><span class="hljs-string">'/api/v1/user'</span></span>, { id }) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">userData</span></span></span><span class="hljs-function"> =&gt;</span></span> { logger.info(<span class="hljs-string"><span class="hljs-string">`store.getData|User have already loaded. User count is </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-built_in">JSON</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.stringify(userData)}</span></span></span><span class="hljs-string">`</span></span>); }) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> { logger.error(<span class="hljs-string"><span class="hljs-string">`store.getData|User loaded fail </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${err.message}</span></span></span><span class="hljs-string">`</span></span>); });</code> </pre> <br>  Bagaimana cara kerjanya: kita mencatat log, sebelum permintaan pada klien.  Menurut kode kami, kami melihat bahwa memuat data dari server sekarang akan dimulai.  Kami telah melampirkan SessionID ke permintaan.  Jika backend kami ditutupi dengan log dengan penambahan SessionID ini dan permintaan gagal, maka kita dapat melihat apa yang terjadi di backend. <br><br>  Dengan demikian, kami memantau seluruh siklus aplikasi kami, tidak hanya pada klien, tetapi juga pada backend. <br><br><h4>  3. Penguji </h4><br>  Bekerja dengan tester layak mendapatkan deskripsi terpisah dari proses tersebut. <br><br>  Karena kami memiliki startup, kami tidak memiliki persyaratan formal dan terkadang semuanya tidak logis dalam pekerjaan. <br><br>  Jika penguji tidak memahami perilaku, ini adalah kasus yang setidaknya perlu dipertimbangkan.  Juga, seringkali, seorang tester tidak dapat mengulangi satu situasi dua kali.  Karena langkah-langkah yang mengarah ke perilaku yang salah bisa banyak dan tidak sepele.  Selain itu, tidak semua kesalahan mengarah pada konsekuensi kritis, seperti Pengecualian.  Beberapa dari mereka hanya dapat mengubah perilaku aplikasi, tetapi tidak dapat ditafsirkan oleh sistem sebagai kesalahan.  Untuk keperluan ini, pada pementasan, Anda dapat menambahkan tombol di header aplikasi untuk memaksa pengiriman log.  Penguji melihat bahwa ada sesuatu yang tidak berfungsi dengan benar, mengklik tombol dan mengirim tumpukan dengan tindakan ke ElasticSearch. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/553/154/7f0/5531547f03a044eda98449e829d67839.png" alt="gambar"></div><br><br>  Namun, jika kesalahan kritis telah terjadi, kita harus memblokir antarmuka sehingga tester tidak mengklik lebih lanjut dan tidak menemui jalan buntu. <br><br>  Untuk tujuan ini, kami menampilkan layar biru kematian. <br><br>  Kita melihat di bagian atas teks dengan tumpukan kesalahan kritis ini, dan di bawah ini - tindakan yang mendahuluinya.  Kami juga mendapatkan ID kesalahan, itu cukup bagi tester untuk memilihnya dan melampirkannya pada tiket.  Nantinya kesalahan ini dapat dengan mudah ditemukan di Kibana oleh ID ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f3/5b8/4b7/7f35b84b746e584111ce64e6416e1f36.png" alt="gambar"></div><br>  Untuk tujuan ini, LoggerContainer memiliki propertinya sendiri. <br><br><pre> <code class="javascript hljs">&lt;LoggerContainer active={<span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>} limit={<span class="hljs-number"><span class="hljs-number">20</span></span>} bsodActive={<span class="hljs-literal"><span class="hljs-literal">true</span></span>} bsod={BSOD} onError={stack =&gt; { sendToServer(stack); }} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  bsodActive - mengaktifkan / menonaktifkan BSOD (menonaktifkan BSOD berlaku untuk kode produksi) <br><br>  bsod adalah komponen.  Secara default, sepertinya screenshot di atas. <br><br>  Untuk menampilkan tombol di UI LoggerContainer, kita dapat menggunakannya dalam konteks <br><br><pre> <code class="javascript hljs">context.logger.onError(context.logger.getStackData());</code> </pre> <br><h4>  4. LogRock.  Interaksi pengguna </h4><br>  Anda dapat menampilkan log ke konsol atau menunjukkannya kepada pengguna, untuk ini Anda perlu menggunakan metode stdout: <br><br><pre> <code class="javascript hljs">&lt;LoggerContainer active={<span class="hljs-literal"><span class="hljs-literal">true</span></span>|<span class="hljs-literal"><span class="hljs-literal">false</span></span>} limit={<span class="hljs-number"><span class="hljs-number">20</span></span>} bsodActive={<span class="hljs-literal"><span class="hljs-literal">true</span></span>} bsod={BSOD} onError={stack =&gt; { sendToServer(stack); }} stdout={(level, message, important) =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (important) { alert(message); } }} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">LoggerContainer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  stdout adalah metode yang bertanggung jawab untuk menampilkan pesan. <br><br>  Agar pesan menjadi penting, cukup untuk mengirimkan parameter kedua true ke logger.  Dengan demikian, pesan ini dapat ditampilkan kepada pengguna di jendela sembulan, misalnya, jika pemuatan data gagal, kami dapat menampilkan pesan kesalahan. <br><br><pre> <code class="javascript hljs">logger.log(<span class="hljs-string"><span class="hljs-string">'Something was wrong'</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre> <br><h3>  Pencatatan tingkat lanjut </h3><br>  Jika Anda menggunakan Redux, atau solusi serupa dengan satu Store, Anda dapat menempatkan logger di Middleware yang memproses Tindakan Anda, dengan demikian, semua tindakan signifikan akan dilakukan melalui sistem kami. <br><br>  Untuk pencatatan yang efektif, Anda bisa membungkus data Anda dalam objek proxy, dan menempatkan penebang pada semua tindakan dengan objek. <br><br>  Untuk mencakup metode pihak ketiga dengan pendataan (metode pustaka, metode kode lama), Anda dapat menggunakan dekorator - â€œ@â€. <br><br><h3>  Kiat </h3><br>  Log aplikasi, termasuk pada produksi, karena lebih baik daripada pengguna nyata, tidak ada tester yang akan menemukan hambatan. <br><br>  Jangan lupa untuk menunjukkan pengumpulan log dalam perjanjian lisensi. <br><br>  <b>JANGAN mencatat kata sandi, detail bank, dan informasi pribadi lainnya!</b> <br><br>  Redundansi log juga buruk, buat tanda tangan sejelas mungkin. <br><br><h3>  Alternatif </h3><br>  Sebagai pendekatan alternatif, saya menyoroti: <br><br><ul><li>  Rollbar sangat dapat disesuaikan.  Memungkinkan Anda mencatat 500 ribu kesalahan dengan $ 150 per bulan.  Saya sarankan menggunakannya jika Anda sedang mengembangkan aplikasi dari awal. </li><li>  Sentry lebih mudah diintegrasikan, tetapi kurang dapat disesuaikan.  Memungkinkan Anda mencatat 1 juta peristiwa dengan $ 200 per bulan. </li></ul><br>  Kedua layanan memungkinkan Anda untuk melakukan hal yang hampir sama dan berintegrasi ke dalam backend. <br><br><h3>  Apa selanjutnya </h3><br>  Logging tidak hanya mencari kesalahan, tetapi juga memonitor tindakan pengguna, pengumpulan data.  Logging bisa menjadi pelengkap yang baik untuk pengujian Google Analytics dan Pengalaman Pengguna. <br><br><h3>  Kesimpulan </h3><br>  Ketika Anda merilis aplikasi, hidup baru saja dimulai untuknya.  Bertanggung jawab atas gagasan Anda, dapatkan umpan balik, pantau log, dan perbaiki.  Menulis perangkat lunak berkualitas tinggi dan makmur :) <br><br>  PS Jika Anda ingin membantu pengembangan modul untuk Angular, Vue, dll.  Saya akan dengan senang hati menarik permintaan - di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id453652/">https://habr.com/ru/post/id453652/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id453634/index.html">Alfa Bank School of System Analysis</a></li>
<li><a href="../id453642/index.html">Parser cerdas untuk nomor yang ditulis dengan kata-kata</a></li>
<li><a href="../id453644/index.html">Wawancara - 10 pertanyaan tentang Swift. Bagian 3</a></li>
<li><a href="../id453646/index.html">Normalisasi data dalam database terdistribusi, layanan mikro dan ERP</a></li>
<li><a href="../id453650/index.html">Inti perangkat lunak dari infrastruktur cyber on-board pemogokan pemogokan terpadu F-35</a></li>
<li><a href="../id453656/index.html">Web statis: kembali ke dasar?</a></li>
<li><a href="../id453660/index.html">Intel menunjukkan prosesor i9-9900KS baru dengan frekuensi Turbo 5 GHz per inti</a></li>
<li><a href="../id453662/index.html">Mars - bahkan lebih banyak es di Kutub Utara, tetapi dalam</a></li>
<li><a href="../id453664/index.html">Spring Boot - OAuth2 dan JWT</a></li>
<li><a href="../id453666/index.html">Bagaimana saya mengendarai taksi tak berawak</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>