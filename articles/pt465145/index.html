<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßóüèø üòÉ üêæ Reconhecimento facial no n√≠vel aplicado no joelho üõ∏ üò∏ üìã</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Em geral, o reconhecimento facial e a identifica√ß√£o das pessoas de acordo com os resultados parecem sexo adolescente para idosos - todo mundo fala mui...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reconhecimento facial no n√≠vel aplicado no joelho</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465145/"> Em geral, o reconhecimento facial e a identifica√ß√£o das pessoas de acordo com os resultados parecem sexo adolescente para idosos - todo mundo fala muito sobre ele, mas pouca pr√°tica.  √â claro que n√£o estamos mais surpresos que, ap√≥s baixar fotos de encontros amig√°veis, o Facebook / VK sugere marcar as pessoas encontradas na imagem, mas aqui sabemos intuitivamente que as redes sociais t√™m uma boa ajuda na forma de gr√°fico de conex√µes de uma pessoa.  E se n√£o houver esse gr√°fico?  No entanto, vamos come√ßar em ordem. <br><br><img src="https://habrastorage.org/webt/m9/y6/h4/m9y6h4ogtivd9hcrktofvqcqzue.jpeg" alt="Alguma coisa est√° escondida na porta com uma caixa"><br><a name="habracut"></a><br>  Inicialmente, o reconhecimento de rosto e a identifica√ß√£o de "amigo / inimigo" cresceram devido √†s necessidades dom√©sticas - os toxicodependentes entraram na porta de um colega, monitoraram constantemente a imagem da c√¢mera de v√≠deo instalada e at√© desmontaram onde o vizinho e o estrangeiro n√£o desejavam n√£o <br><br>  Portanto, em apenas uma semana, um prot√≥tipo foi montado no joelho, consistindo em uma c√¢mera IP, um dispositivo de placa √∫nica, um sensor de movimento e a biblioteca de reconhecimento de reconhecimento facial face_recognition Python.  Como a biblioteca python estava em um hardware √∫nico e bastante poderoso ... digamos com cuidado, n√£o muito r√°pido, decidimos criar o processo de processamento da seguinte maneira: <br><ul><li>  o sensor de movimento determina se h√° movimento na √°rea de espa√ßo confiada a ele e sinaliza sua presen√ßa; </li><li>  um servi√ßo escrito baseado no gstreamer, que recebe constantemente um fluxo de uma c√¢mera IP, corta 5 segundos antes e 10 segundos ap√≥s a detec√ß√£o e o envia √† biblioteca de reconhecimento para an√°lise; </li><li>  ela, por sua vez, assiste ao v√≠deo, encontra rostos l√°, compara-os com amostras conhecidas e, se desconhecido, entrega o v√≠deo ao canal do Telegram, depois deveria ser controlado no mesmo local para eliminar imediatamente os falsos positivos - por exemplo, quando um vizinho virou-se para a c√¢mera do lado errado das amostras. </li></ul><br>  Todo o processo foi colado pelo nosso amado Erlang e, no processo de teste em colegas, ele provou sua capacidade m√≠nima de trabalho. <br><br>  No entanto, o modelo montado n√£o encontrou aplica√ß√£o na vida real - n√£o por causa de sua imperfei√ß√£o t√©cnica, o que sem d√∫vida foi - como mostra a experi√™ncia, coletada no joelho em escrit√≥rios com efeito de estufa tem uma tend√™ncia muito ruim a entrar em campo e no momento da demonstra√ß√£o ao cliente , e por causa dos organizacionais, os moradores da entrada recusaram a maioria de qualquer videovigil√¢ncia. <br><br>  O projeto foi para a prateleira e periodicamente cutucou com um palito para demonstra√ß√µes durante as vendas e o desejo de reencarnar na casa pessoal. <br><br>  Tudo mudou desde o momento em que tivemos um projeto mais espec√≠fico e bastante comercial sobre o mesmo t√≥pico.  Como n√£o seria poss√≠vel cortar cantos usando um sensor de movimento diretamente da declara√ß√£o do problema, tive que me aprofundar nas nuances de busca e reconhecimento de rostos em tr√™s cabe√ßas (ok, duas e meia, se voc√™ contar a minha) diretamente no fluxo.  E ent√£o uma revela√ß√£o aconteceu. <br><br>  O problema √© que a maioria das descobertas sobre esse assunto s√£o esbo√ßos puramente acad√™micos sobre o tema: "Eu tive que escrever um artigo em uma revista sobre um tema da moda e obter uma marca para publicar".  N√£o deprecio os m√©ritos dos cientistas - entre os artigos que achei √∫teis e interessantes, mas, infelizmente, tenho que admitir que a reprodutibilidade do trabalho de seu c√≥digo publicado no Github deixa muito a desejar ou parece um empreendimento d√∫bio com o tempo perdido no final. <br><br>  Muitas estruturas para redes neurais e aprendizado de m√°quina eram muitas vezes dif√≠ceis de levantar - o reconhecimento de face era uma tarefa estreita e separada para eles, desinteressante em uma ampla gama de problemas que eles resolveram.  Em outras palavras, pegar um exemplo pronto e execut√°-lo no hardware de destino apenas para verificar como funciona e se funciona, n√£o funcionou.  Esse n√£o foi um exemplo; a necessidade de obt√™-lo sugeriu uma busca azeda do conjunto de determinadas bibliotecas de determinadas vers√µes para sistemas operacionais estritamente definidos.  I.e.  para pegar e voar em movimento - literalmente migalhas como o reconhecimento facial mencionado anteriormente, que usamos para os trabalhos anteriores. <br><br>  As grandes empresas, como sempre, nos salvaram.  A Intel e a Nvidia h√° muito sentem o impulso crescente e a atratividade comercial dessa classe de tarefas, mas como fornecedores de equipamentos, eles distribuem suas estruturas para resolver problemas espec√≠ficos de aplicativos gratuitamente. <br><br>  Nosso projeto provavelmente n√£o era de pesquisa, mas de natureza experimental; portanto, n√£o analisamos e comparamos as solu√ß√µes de fornecedores individuais, mas simplesmente pegamos o primeiro com o objetivo de coletar um prot√≥tipo pronto e test√°-lo em batalha, enquanto receb√≠amos a resposta mais r√°pida poss√≠vel.  Portanto, a escolha caiu muito rapidamente no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Intel OpenVINO</a> - uma biblioteca para a aplica√ß√£o pr√°tica de aprendizado de m√°quina em tarefas aplicadas. <br><br>  Para come√ßar, montamos um suporte, que tradicionalmente √© um conjunto de nettop com um processador Intel Core i3 e c√¢meras IP de fornecedores chineses no mercado.  A c√¢mera foi conectada diretamente ao nettop e forneceu um fluxo RTSP com um FPS n√£o muito grande, com base no pressuposto de que as pessoas ainda n√£o corriam na frente dela, como nas competi√ß√µes.  A velocidade de processamento de um quadro (busca e reconhecimento de rostos) flutuou na regi√£o de dezenas a centenas de milissegundos, o que foi suficiente para incorporar o mecanismo de busca de pessoas que usam amostras existentes.  Al√©m disso, tamb√©m t√≠nhamos um plano de backup - a Intel possui um coprocessador especial para acelerar os c√°lculos das redes neurais do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Neural Compute Stick 2</a> , que poder√≠amos usar se n√£o tiv√©ssemos um processador de uso geral.  Mas - at√© agora nada aconteceu. <br><br>  Ap√≥s concluir a montagem e verificar a funcionalidade dos exemplos b√°sicos - um recurso distinto do Intel SDK estava em um guia passo a passo e muito detalhado - come√ßamos a construir o software. <br><br>  A principal tarefa que enfrentamos era procurar uma pessoa no campo de vis√£o da c√¢mera, sua identifica√ß√£o e notifica√ß√£o oportuna de sua presen√ßa.  Assim, al√©m de reconhecer rostos e compar√°-los com padr√µes (como fazer isso, naquele momento, causava menos perguntas do que tudo o resto), precis√°vamos fornecer coisas secund√°rias ao plano de interface.  Ou seja, devemos receber quadros com os rostos das pessoas necess√°rias da mesma c√¢mera para sua identifica√ß√£o subseq√ºente.  Por que, a partir da mesma c√¢mera, tamb√©m acho bastante √≥bvio - o ponto de instala√ß√£o da c√¢mera no objeto e a √≥tica da lente introduz certas distor√ß√µes, que, presumivelmente, podem afetar a qualidade do reconhecimento, usamos uma fonte diferente de dados de origem que uma ferramenta de rastreamento. <br><br>  I.e.  Al√©m do pr√≥prio manipulador de fluxo, precisamos de pelo menos um arquivo de v√≠deo e um analisador de arquivo de v√≠deo que isolem todos os rostos detectados da grava√ß√£o e salvem os mais adequados como refer√™ncia. <br><br>  Como sempre, tomamos o familiar Erlang e PostgreSQL como cola entre ffmpeg, aplicativos na OpenVINO e Telegram Bot API para alertas.  Al√©m disso, precis√°vamos de uma interface da web para fornecer o conjunto m√≠nimo de procedimentos para gerenciar o complexo, que nosso colega de front-end havia carregado no VueJS. <br><br>  A l√≥gica do trabalho era a seguinte: <br><ul><li>  sob controle de um plano de controle (em Erlang), o ffmpeg grava um fluxo da c√¢mera para o v√≠deo em fatias de cinco minutos, um processo separado garante que os registros sejam armazenados em um volume estritamente especificado e limpa o mais antigo quando esse limite for atingido; </li><li>  atrav√©s da interface do usu√°rio da web, √© poss√≠vel visualizar qualquer registro, eles s√£o organizados em ordem cronol√≥gica, o que, embora n√£o sem dificuldade, permite isolar o fragmento desejado e envi√°-lo para processamento; </li><li>  o processamento consiste em analisar o v√≠deo e extrair quadros com rostos detectados, apenas o software baseado no OpenVINO (devo dizer, aqui conseguimos reduzir um pouco o √¢ngulo - o software para analisar o fluxo e analisar arquivos √© quase id√™ntico, e √© por isso que a maioria foi para uma biblioteca compartilhada, e os pr√≥prios utilit√°rios diferem apenas na cadeia de processamento no m√≥dulo modular).  O processamento ocorre no v√≠deo, isolando as faces encontradas usando uma rede neural especialmente treinada.  Os fragmentos resultantes do quadro que cont√©m faces caem em outra rede neural, que forma um vetor de 256 elementos, que s√£o, de fato, as coordenadas dos pontos de refer√™ncia do rosto de uma pessoa.  Esse vetor, o quadro detectado e as coordenadas do ret√¢ngulo da face encontrada s√£o armazenados no banco de dados; </li><li>  al√©m disso, ap√≥s a conclus√£o do processamento, o operador abre a variedade de quadros desenhados, fica horrorizado com o n√∫mero e passa a procurar pessoas-alvo.  As amostras selecionadas podem ser adicionadas a uma pessoa existente ou criar uma nova.  Ap√≥s a conclus√£o do processamento da tarefa, os resultados da an√°lise s√£o exclu√≠dos, com exce√ß√£o dos vetores armazenados mapeados para os registros de observ√°veis; </li><li>  consequentemente, podemos examinar os quadros e os vetores de detec√ß√£o a qualquer momento e editar, excluindo amostras sem √™xito; </li><li>  paralelo ao ciclo de detec√ß√£o em segundo plano, o servi√ßo de an√°lise de fluxo sempre funciona, o que faz a mesma coisa, mas com o fluxo da c√¢mera.  Ele seleciona faces no fluxo observado e as compara com amostras do banco de dados, que se baseia na simples suposi√ß√£o de que os vetores de uma pessoa estar√£o mais pr√≥ximos um do outro do que todos os outros vetores.  Um c√°lculo em pares da dist√¢ncia entre os vetores ocorre, quando o limite √© atingido, um registro de detec√ß√£o e um quadro s√£o colocados no banco de dados.  Al√©m disso, uma pessoa √© adicionada √† lista de paradas em um futuro pr√≥ximo, o que evita v√°rias notifica√ß√µes sobre a mesma pessoa; </li><li>  o plano de controle verifica periodicamente o registro de detec√ß√£o e, no caso de novas entradas, notifica com uma mensagem com a foto anexada e destacando o rosto atrav√©s do bot para aqueles que s√£o permitidos de acordo com as configura√ß√µes. </li></ul><br><br>  Parece algo como isto: <br><br><img src="https://habrastorage.org/webt/vc/jo/_h/vcjo_haxpwhnxoe1-37sozet9gs.jpeg" alt="Para que possamos entrar no arquivo"><br>  <i>Ver arquivo</i> <br><br><img src="https://habrastorage.org/webt/07/dq/x8/07dqx8o9vmcavh7qxj7rnduca8m.jpeg" alt="E ent√£o - cutucar as canecas acesas no v√≠deo"><br>  <i>Resultados da an√°lise de v√≠deo</i> <br><br><img src="https://habrastorage.org/webt/fp/ky/ct/fpkyctbrq3slopbowp5wurzoaug.jpeg" alt="E aqui est√£o eles, esses caras!"><br>  <i>Lista de personalidades observadas</i> <br><br>  A solu√ß√£o resultante √©, de muitas maneiras, controversa e, √†s vezes, nem ideal, tanto em termos de produtividade quanto em termos de redu√ß√£o do tempo de rea√ß√£o.  Mas, repito, n√£o t√≠nhamos o objetivo de obter um sistema eficaz imediatamente, mas simplesmente seguir esse caminho e preencher o n√∫mero m√°ximo de cones, identificar caminhos estreitos e poss√≠veis problemas n√£o √≥bvios. <br><br>  O sistema montado foi testado em condi√ß√µes de estufa por uma semana.  Durante esse per√≠odo, foram observadas as seguintes observa√ß√µes: <br><ul><li>  existe uma clara depend√™ncia da qualidade do reconhecimento da qualidade das amostras originais.  Se a pessoa observada passar pela zona de observa√ß√£o muito rapidamente, com um alto grau de probabilidade, ela n√£o deixar√° os dados para amostragem e n√£o ser√° reconhecida.  No entanto, acho que √© uma quest√£o de ajustar o sistema, incluindo par√¢metros de ilumina√ß√£o e de fluxo de v√≠deo; </li><li>  como o sistema opera com o reconhecimento de elementos do rosto (olhos, nariz, boca, sobrancelhas etc.), √© f√°cil enganar colocando um obst√°culo visual entre o rosto e a c√¢mera (cabelos, √≥culos escuros, capuz etc.) - o rosto, provavelmente, ser√° encontrado, mas a compara√ß√£o com as amostras n√£o funcionar√° devido √† forte discrep√¢ncia entre os vetores de detec√ß√£o e as amostras; </li><li>  √≥culos comuns n√£o afetam muito - tivemos exemplos de respostas positivas em pessoas com √≥culos e respostas falso-negativas em pessoas que usam √≥culos para testes; </li><li>  se a barba estava nas amostras originais e desapareceu, o n√∫mero de opera√ß√µes √© reduzido (o autor dessas linhas reduziu a barba para 2 mm e o n√∫mero de opera√ß√µes foi reduzido pela metade); </li><li>  tamb√©m ocorreram falsos positivos, √© uma ocasi√£o para imers√£o adicional na matem√°tica da quest√£o e, possivelmente, uma solu√ß√£o para a quest√£o da correspond√™ncia parcial dos vetores e o m√©todo ideal para calcular a dist√¢ncia entre eles.  No entanto, os testes de campo devem revelar ainda mais problemas a esse respeito. </li></ul><br>  O que est√° por vir?  Verificando o sistema em batalha, otimizando o ciclo de processamento de detec√ß√£o, simplificando o procedimento de busca de eventos no arquivo de v√≠deo, adicionando mais dados √† an√°lise (idade, sexo, emo√ß√µes) e outras 100.500 tarefas pequenas e n√£o t√£o necess√°rias que ainda precisam ser realizadas.  Mas o primeiro passo no caminho de mil passos que j√° demos.  Se algu√©m compartilhar sua experi√™ncia na solu√ß√£o de tais problemas ou fornecer links interessantes sobre esse assunto, ficarei muito agradecido. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt465145/">https://habr.com/ru/post/pt465145/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt465135/index.html">Telefonia DECT em edif√≠cios</a></li>
<li><a href="../pt465137/index.html">Infraestrutura como c√≥digo: primeiro conhecido</a></li>
<li><a href="../pt465139/index.html">Como fazer: Fatores importantes a serem revisados ‚Äã‚Äãao escolher uma VPN gratuita para navega√ß√£o na Web</a></li>
<li><a href="../pt465141/index.html">33+ Ferramentas de Seguran√ßa Kubernetes</a></li>
<li><a href="../pt465143/index.html">Como encontrar a melhor localiza√ß√£o para as empresas? Life hack sem registro e SMS</a></li>
<li><a href="../pt465149/index.html">'Ol√° Mundo' para voc√™ na nuvem</a></li>
<li><a href="../pt465151/index.html">Instale o Apache Cassandra no Windows</a></li>
<li><a href="../pt465153/index.html">A vis√£o computacional v√™ emo√ß√µes, pulsa√ß√£o, respira√ß√£o e mentiras - mas como construir uma startup nisso. Conversa com o Neurodata Lab</a></li>
<li><a href="../pt465155/index.html">Duas entidades de programa√ß√£o neurolingu√≠stica</a></li>
<li><a href="../pt465161/index.html">Modelo de dados do quinteto e centenas de gigabytes de dados</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>