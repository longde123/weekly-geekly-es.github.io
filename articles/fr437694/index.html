<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∂üèø üòè üí™ Analyse de l'utilitaire Files.walkFileTree (); üé± üëêüèº üë®üèª‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="N'ayant trouv√© nulle part une description explicative en russe, quel genre de b√™te Files.walkFileTree () , et l'ayant ma√Ætris√© avec un grincement, com...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Analyse de l'utilitaire Files.walkFileTree ();</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437694/">  N'ayant trouv√© nulle part une description explicative en russe, quel <b>genre de</b> b√™te <b>Files.walkFileTree ()</b> , et l'ayant ma√Ætris√© avec un grincement, comme il s'est av√©r√© plus tard, une fonctionnalit√© simple, j'ai d√©cid√© de partager le mat√©riel avec des exemples dans le cadre de l'√©pinglage, ce qui m'a vraiment manqu√©. <br><br>  La m√©thode walkFileTree () vous permet de contourner l'arborescence des fichiers et sous-r√©pertoires qui lui sont pass√©s en tant que param√®tre de l'√©l√©ment Path ... <br><a name="habracut"></a><br>  <b>Deux signatures de m√©thode</b> <br><br><pre><code class="java hljs">Files.walkFileTree(Path start, FileVisitor&lt;? <span class="hljs-keyword"><span class="hljs-keyword">super</span></span> Path&gt; visitor); Files.walkFileTree(Path start, Set&lt;FileVisitOption&gt; options, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxDepth, FileVisitor&lt;? <span class="hljs-keyword"><span class="hljs-keyword">super</span></span> Path&gt; visitor);</code> </pre> <br>  O Where <br>  Chemin de d√©part - le r√©pertoire dont le contenu doit √™tre contourn√©, <br>  Visiteur FileVisitor - une instance d'une classe impl√©mentant l'interface FileVisitor, ou h√©ritant de SimpleFileVisitor ().  Ce dernier, √† mon avis, est plus pratique √† utiliser lorsque vous n'avez pas besoin de red√©finir toutes les m√©thodes FileVisitor (), qui seront discut√©es un peu plus tard (mais cela d√©pend de la situation), <br>  D√©finir les options &lt;\ FileVisitOption&gt; - un ensemble d'options qui d√©terminent le comportement lors de l'exploration, <br>  maxDepth - profondeur de passage des sous-r√©pertoires. <br><br>  <b>Tout d'abord, sur les param√®tres qui vous seront utiles t√¥t ou tard.</b> <br><br>  <i>maxDepth</i> - profondeur de travers√©e.  A = 0, l'entr√©e dans le r√©pertoire ne sera pas effectu√©e, √† = MAX_VALUE le r√©pertoire sera examin√© √† la profondeur maximale, respectivement, avec maxDepth = 3, le passage s'effectuera dans 3 sous-r√©pertoires "down". <br><br>  <i>FileVisitOption</i> - enum est un ensemble qui d√©termine si le programme doit suivre les liens symboliques lors de l'analyse (dans ce cas, la valeur FileVisitOption.FOLLOW_LINKS est sp√©cifi√©e). <br><br>  <b>FileVisitor</b> - une interface qui a 4 m√©thodes: <br><br>  <b>1)</b> <i>FileVisitResult preVisitDirectory (T dir, BasicFileAttributes attrs) l√®ve IOException;</i> <br>  inclut un ensemble de m√©thodes √† suivre avant de visiter le sous-r√©pertoire courant.  Par exemple, gr√¢ce √† attrs, vous pouvez obtenir des donn√©es telles que: <br>  lastModifiedTime (), <br>  lastAccessTime (), <br>  creationTime (), <br>  isRegularFile () - true si nous avons un fichier devant nous, <br>  isDirectory () - vrai si nous avons un r√©pertoire <br>  isSymbolicLink () - true si l'objet est un lien, <br>  isOther () - true si l'objet en question n'est ni un fichier, ni un r√©pertoire, ni un lien, <br>  size () - renvoie la taille de l'objet et <br>  fileKey () - renvoie une cl√© de fichier ou null; <br><br>  Si vous pr√©voyez de compter le nombre de r√©pertoires lors de l'analyse, n'oubliez pas que le r√©pertoire de d√©marrage sera √©galement pris en compte dans le montant total. <br><br>  <b>2)</b> <i>FileVisitResult visitFile (fichier T, attr BasicFileAttributes) l√®ve IOException;</i> <br>  un ensemble de m√©thodes √† suivre lors de la visite du fichier en cours (par exemple, vous pouvez parcourir son contenu et rechercher les occurrences de la cha√Æne de recherche, ou encore rechercher la date de la derni√®re visite, modifier le fichier ou ajouter la taille de tous les fichiers √† analyser pour obtenir la taille du r√©pertoire) <br><br>  <b>Exemple</b> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFileVisitor</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SimpleFileVisitor</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Path</span></span></span><span class="hljs-class">&gt; </span></span>{ String partOfName; String partOfContent; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> FileVisitResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visitFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Path file, BasicFileAttributes attrs)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> containsName = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(partOfName!=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; !file.getFileName().toString().contains(partOfName)) containsName = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; String content = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> String(Files.readAllBytes(file)); <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> containsContent = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(partOfContent!=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; !content.contains(partOfContent)) containsContent = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(containsName &amp;&amp; containsContent) foundFiles.add(file); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FileVisitResult.CONTINUE; }</code> </pre> <br>  Dans cet exemple, lors de la travers√©e de l'arborescence de fichiers, chaque fichier est v√©rifi√© pour l'ex√©cution simultan√©e de 2 √©v√©nements - si le nom de fichier contient l'entr√©e souhait√©e et si le fichier contient des entr√©es de la cha√Æne requise.  Lorsque les deux conditions sont remplies, le fichier est ajout√© √† la feuille r√©sultante, apr√®s quoi l'analyse continue; <br><br>  Ou un autre <b>exemple de la</b> surcharge de la m√©thode visitFile <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> FileVisitResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visitFile</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Path path, BasicFileAttributes attrs)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(path.toString().endsWith(<span class="hljs-string"><span class="hljs-string">".rar"</span></span>) || path.toString().endsWith(<span class="hljs-string"><span class="hljs-string">".zip"</span></span>)) archived.add(path.toString()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FileVisitResult.CONTINUE; }</code> </pre> <br>  Le programme lors d'une travers√©e d'arbre lors de la visite d'un fichier, dans le cas o√π il s'agit d'une archive zip ou rar, ajoute son adresse (chemin) sous forme de cha√Æne √† la liste des fichiers d'archive; <br><br>  <b>3)</b> <i>FileVisitResult visitFileFailed (fichier T, IOException exc) l√®ve IOException;</i> <br>  Cette m√©thode peut s'av√©rer utile lorsque l'acc√®s √† un fichier √©choue + il "est capable" de lever une exception.  Le reste peut √™tre appris via l'annotation Override.  Par exemple, calculez le nombre de fichiers inaccessibles; <br><br>  <b>Exemple</b> <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> FileVisitResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">visitFileFailed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Path path, IOException exc)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ failed.add(path.toString()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FileVisitResult.SKIP_SUBTREE; }</code> </pre> <br>  Dans le cas d'une tentative infructueuse d'acc√®s au chemin, ce chemin est ajout√© en tant que cha√Æne √† la liste des √©checs similaires, et le programme continue de contourner sans visiter son sous-r√©pertoire; <br><br>  <b>4)</b> <i>FileVisitResult postVisitDirectory (T dir, IOException exc) l√®ve IOException;</i> <br>  tout ce qui doit √™tre fait apr√®s avoir visit√© le r√©pertoire doit √™tre r√©pertori√© dans le cadre de la surcharge de cette m√©thode.  Par exemple, en parcourant un r√©pertoire et en d√©truisant tous les fichiers qu'il contient, cette m√©thode peut √©galement le d√©truire lui-m√™me (nous nous souvenons que Files.delete (Path dir) ne supprime le r√©pertoire que s'il est vide et ne contient pas de fichiers). <br><br>  <b>Exemple</b> <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> FileVisitResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postVisitDirectory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Path path, IOException exc)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ Files.delete(path); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FileVisitResult.CONTINUE; }</code> </pre> <br>  Toutes les m√©thodes d√©crites ci-dessus sont compl√©t√©es en renvoyant les ¬´r√©sultats de la visite¬ª (FileVisitResult) de l'objet qui appartiennent √† l'ensemble d'√©num√©rations et peuvent prendre les valeurs suivantes: <br><br><ol><li>  <code>CONTINUE</code> - continue de parcourir l'arbre; </li><li>  <code>TERMINATE</code> - termine la travers√©e de l'arbre; </li><li>  <code>SKIP_SUBTREE</code> - continue de contourner, sans aller dans ce r√©pertoire; </li><li>  <code>SKIP_SIBLINGS</code> - exclut de l'exploration des "parents" de ce fichier ou r√©pertoire; </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437694/">https://habr.com/ru/post/fr437694/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437680/index.html">Ma collection de bricolage sur Youtube</a></li>
<li><a href="../fr437682/index.html">√âcriture d'un autre outil de cr√©ation de mod√®les Kubernetes</a></li>
<li><a href="../fr437684/index.html">Algorithme supr√™me - Compendium biais√©</a></li>
<li><a href="../fr437686/index.html">Learning Go: √©crire un messager p2p avec un cryptage de bout en bout</a></li>
<li><a href="../fr437688/index.html">OpenSceneGraph: Techniques de programmation de base</a></li>
<li><a href="../fr437696/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 283 (du 21 au 27 janvier)</a></li>
<li><a href="../fr437698/index.html">Service de traduction de brevets de l'OMPI Translate - Mes exp√©riences</a></li>
<li><a href="../fr437702/index.html">Analyse des entrevues d'emploi Google: requ√™tes synonymes</a></li>
<li><a href="../fr437704/index.html">Excellente connaissance du programme scolaire en tant qu'indicateur d'une intelligence pas la plus √©lev√©e</a></li>
<li><a href="../fr437706/index.html">Ann√©e avec Tesla</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>