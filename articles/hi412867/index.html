<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯзЫЁЯП╝ ЁЯХ┤ЁЯП╝ ЁЯЪл рдЬреАрд╕реАрд╕реА рдХрдВрдкрд╛рдЗрд▓рд░ рджреНрд╡рд╛рд░рд╛ рдбреЙрд╕ рдХреЙрдо рдлрд╛рдЗрд▓ рдХреИрд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдХрд░реЗрдВ ЁЯСйЁЯП┐тАНЁЯдЭтАНЁЯСиЁЯП╗ ЁЯд╢ЁЯП┐ ЁЯд╕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="9 рджрд┐рд╕рдВрдмрд░ 2014 рдХреЛ рдкреНрд░рдХрд╛рд╢рд┐рдд рд▓реЗрдЦ 
 2018 рдХреЗ рд▓рд┐рдП рдЕрдкрдбреЗрдЯ: Ren├йRebe рдиреЗ рдЗрд╕ рд▓реЗрдЦ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рд╡реАрдбрд┐рдпреЛ рдмрдирд╛рдпрд╛ ( рднрд╛рдЧ 2 ) 

 рдкрд┐рдЫрд▓реЗ рд╕рдкреНрддрд╛рд╣рд╛рдВрдд рдореЗрдВ рдореИрдВрдиреЗ рд▓реБрдбрдо рдбреЗ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЬреАрд╕реАрд╕реА рдХрдВрдкрд╛рдЗрд▓рд░ рджреНрд╡рд╛рд░рд╛ рдбреЙрд╕ рдХреЙрдо рдлрд╛рдЗрд▓ рдХреИрд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдХрд░реЗрдВ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412867/"> <font color="gray">9 рджрд┐рд╕рдВрдмрд░ 2014 рдХреЛ рдкреНрд░рдХрд╛рд╢рд┐рдд рд▓реЗрдЦ</font> <br>  <i>2018 рдХреЗ рд▓рд┐рдП рдЕрдкрдбреЗрдЯ: Ren├йRebe рдиреЗ рдЗрд╕ рд▓реЗрдЦ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджрд┐рд▓рдЪрд╕реНрдк рд╡реАрдбрд┐рдпреЛ</a> рдмрдирд╛рдпрд╛ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 2</a> )</i> <br><br>  рдкрд┐рдЫрд▓реЗ рд╕рдкреНрддрд╛рд╣рд╛рдВрдд рдореЗрдВ рдореИрдВрдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реБрдбрдо рдбреЗрдпрд░ # 31</a> рдореЗрдВ рднрд╛рдЧ рд▓рд┐рдпрд╛ред  рд▓реЗрдХрд┐рди рд╕рдореНрдореЗрд▓рди рдХреА рдШреЛрд╖рдгрд╛ рд╣реЛрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реА,</a> рдореЗрд░реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣рд╛рд▓рд┐рдпрд╛ рд╢реМрдХ рдХреЗ рдХрд╛рд░рдг,</a> рдореИрдВ рдбреЙрд╕ рдХреЗ рддрд╣рдд рдПрдХ рдкреБрд░рд╛рдиреЗ рд╕реНрдХреВрд▓ рдХрд╛ рдЦреЗрд▓ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛ред  рд▓рдХреНрд╖реНрдп рдордВрдЪ DOSBox рд╣реИред  рдпрд╣ рдбреЙрд╕ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рддрд░реАрдХрд╛ рд╣реИ, рдЗрд╕ рддрдереНрдп рдХреЗ рдмрд╛рд╡рдЬреВрдж рдХрд┐ рд╕рднреА рдЖрдзреБрдирд┐рдХ x86 рдкреНрд░реЛрд╕реЗрд╕рд░ рдкреБрд░рд╛рдиреЗ рд╡рд╛рд▓реЗ рдХреЗ рд╕рд╛рде рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдкрд┐рдЫрдбрд╝реЗ рд╣реБрдП рд╣реИрдВ, 16-рдмрд┐рдЯ 8086 рддрдХред <br><br>  рдореИрдВрдиреЗ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕рдореНрдореЗрд▓рди рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЙрд╕ рдбрд┐рдлреЗрдВрдбрд░</a> рдЧреЗрдо рдмрдирд╛рдпрд╛ рдФрд░ рджрд┐рдЦрд╛рдпрд╛ред  рдХрд╛рд░реНрдпрдХреНрд░рдо 32-рдмрд┐рдЯ 80386 рдХреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореЛрдб рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред рд╕рднреА рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рдирд┐рд╖реНрдкрд╛рджрди рдпреЛрдЧреНрдп COM-рдлрд╝рд╛рдЗрд▓, рдХрд┐рд╕реА рдмрд╛рд╣рд░реА рдирд┐рд░реНрднрд░рддрд╛ рдореЗрдВ рдирд╣реАрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдкреВрд░реЗ рдЦреЗрд▓ рдХреЛ 10 рдХрд┐рд▓реЛрдмрд╛рдЗрдЯ рдмрд╛рдЗрдирд░реА рдореЗрдВ рдкреИрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/skeeto/dosdefender-ld31</a> </li><li>  <a href="">DOSDEF.COM</a> (10 KB, v1.1.0, DOSBox рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ) </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ay/na/qs/aynaqsaenvt32x5oa8y7z4fmnfy.gif"></div><a name="habracut"></a><br>  рдЖрдкрдХреЛ рдЦреЗрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЬреЙрдпрд╕реНрдЯрд┐рдХ рдпрд╛ рдЧреЗрдордкреИрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  рдореИрдВрдиреЗ рдкреНрд░рд╕реНрддреБрддрд┐ рдХреЗ рд▓рд┐рдП рд▓реБрдбреБрдо рдбреЗрдпрд░ рдХреЗ рд▓рд┐рдП рд░рд┐рд▓реАрдЬрд╝ рдореЗрдВ рдорд╛рдЙрд╕ рд╕рдорд░реНрдерди рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рдлрд┐рд░ рдЗрд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рдерд╛ред <br><br>  рд╕рдмрд╕реЗ рддрдХрдиреАрдХреА рд░реВрдк рд╕реЗ рджрд┐рд▓рдЪрд╕реНрдк рд╣рд┐рд╕реНрд╕рд╛ рдпрд╣ рд╣реИ рдХрд┐ <b>рдЧреЗрдо рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП <i>рдХрд┐рд╕реА рднреА</i> рдбреЙрд╕ рд╡рд┐рдХрд╛рд╕ рдЙрдкрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рдереА</b> !  рдореИрдВрдиреЗ рдХреЗрд╡рд▓ рдирд┐рдпрдорд┐рдд рд▓рд┐рдирдХреНрд╕ рд╕реА рдХрдВрдкрд╛рдЗрд▓рд░ (рдЬреАрд╕реАрд╕реА) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдЖрдк рдбреЙрд╕ рдХреЗ рд▓рд┐рдП рдбреЙрд╕ рдбрд┐рдлреЗрдВрдбрд░ рднреА рдирд╣реАрдВ рдмрдирд╛ рд╕рдХрддреЗред  рдореИрдВ DOS рдХреЛ рдХреЗрд╡рд▓ рдПрдХ рдПрдореНрдмреЗрдбреЗрдб рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦрддрд╛ рд╣реВрдВ, рдЬреЛ рдПрдХрдорд╛рддреНрд░ рдРрд╕рд╛ рд░реВрдк рд╣реИ рдЬрд┐рд╕рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">DOS рдЖрдЬ рднреА рдореМрдЬреВрдж рд╣реИ</a> ред  DOSBox рдФрд░ DOSEMU рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░, рдпрд╣ рдЯреВрд▓ рдХрд╛ рдПрдХ рдХрд╛рдлреА рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╕реЗрдЯ рд╣реИред <br><br>  рдпрджрд┐ рдЖрдк рдХреЗрд╡рд▓ рд╡рд┐рдХрд╛рд╕ рдХреЗ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рднрд╛рдЧ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВ, рддреЛ "рдЬреАрд╕реАрд╕реА рдкрд░ рдзреЛрдЦрд╛" рдЕрдиреБрднрд╛рдЧ рдкрд░ рдЬрд╛рдПрдВ, рдЬрд╣рд╛рдВ рд╣рдо рдЬреАрд╕реАрд╕реА рд▓рд┐рдирдХреНрд╕ рдХреЗ рд╕рд╛рде рдбреЙрд╕ рдХреЙрдо рдХрд╛рд░реНрдпрдХреНрд░рдо "рд╣реИрд▓реЛ, рд╡рд░реНрд▓реНрдб" рд▓рд┐рдЦреЗрдВрдЧреЗред <br><br><h1>  рд╕рд╣реА рдЙрдкрдХрд░рдг рдвреВрдБрдврдирд╛ </h1><br>  рдЬрдм рдореИрдВрдиреЗ рдпрд╣ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╢реБрд░реВ рдХрд┐рдпрд╛, рддреЛ рдореИрдВрдиреЗ рдЬреАрд╕реАрд╕реА рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд╣реАрдВ рд╕реЛрдЪрд╛ рдерд╛ред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдореИрдВ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдЪрд▓рд╛ рдЧрдпрд╛ рдЬрдм рдореИрдВрдиреЗ рдбреЗрдмрд┐рдпрди рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмреАрд╕реАрд╕реА</a> рдкреИрдХреЗрдЬ (рдмреНрд░реВрд╕ рд╕реА рдХрдВрдкрд╛рдЗрд▓рд░) рдХреА рдЦреЛрдЬ рдХреА, рдЬреЛ 8086 рдХреЗ рд▓рд┐рдП 16-рдмрд┐рдЯ рдмрд╛рдпрдиреЗрд░рд┐рдЬрд╝ рд╕рдВрдХрд▓рд┐рдд рдХрд░рддрд╛ рд╣реИред рдпрд╣ x86 рдмреВрдЯ рд▓реЛрдбрд░ рдФрд░ рдЕрдиреНрдп рдЪреАрдЬреЛрдВ рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдмреАрдУрдПрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЙрд╕ рдХреЙрдо рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕рдиреЗ рдореБрдЭреЗ рджрд┐рд▓рдЪрд╕реНрдкреА рджреАред <br><br>  рд╕рдВрджрд░реНрдн рдХреЗ рд▓рд┐рдП: рдЗрдВрдЯреЗрд▓ 8086 16-рдмрд┐рдЯ рдорд╛рдЗрдХреНрд░реЛрдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЛ 1978 рдореЗрдВ рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдЗрд╕рдореЗрдВ рдЖрдзреБрдирд┐рдХ рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреА рдХреЛрдИ рд╡рд┐рдЪрд┐рддреНрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рдирд╣реАрдВ рдереАрдВ: рдХреЛрдИ рд╕реНрдореГрддрд┐ рд╕реБрд░рдХреНрд╖рд╛, рдХреЛрдИ рдлрд╝реНрд▓реЛрдЯрд┐рдВрдЧ рдкреЙрдЗрдВрдЯ рдирд┐рд░реНрджреЗрд╢, рдФрд░ рдХреЗрд╡рд▓ 1 рдПрдордмреА рдкрддрд╛ рдпреЛрдЧреНрдп рд░реИрдоред  рд╕рднреА рдЖрдзреБрдирд┐рдХ x86 рдбреЗрд╕реНрдХрдЯреЙрдк рдФрд░ рд▓реИрдкрдЯреЙрдк рдЕрднреА рднреА рдЗрд╕ 16-рдмрд┐рдЯ рдкреНрд░реЛрд╕реЗрд╕рд░ 8086 рдЪрд╛рд▓реАрд╕ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдПрдХ рд╣реА рд╕реАрдорд┐рдд рдкрддреЗ рдФрд░ рд╕рднреА рдХреЗ рд╕рд╛рде рд╣реЛрдиреЗ рдХрд╛ рджрд┐рдЦрд╛рд╡рд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдПрдХ рдмрд╣реБрдд рдкрд┐рдЫрдбрд╝реА рд╕рдВрдЧрддрддрд╛ рд╣реИред  рдРрд╕реЗ рдлрд╝рдВрдХреНрд╢рди рдХреЛ <i>рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореЛрдб</i> рдХрд╣рд╛ рдЬрд╛рддрд╛ <i>рд╣реИ</i> ред  рдпрд╣ рд╡рд╣ рдореЛрдб рд╣реИ рдЬрд┐рд╕рдореЗрдВ рд╕рднреА x86 рдХрдВрдкреНрдпреВрдЯрд░ рдмреВрдЯ рд╣реЛрддреЗ рд╣реИрдВред  рдЖрдзреБрдирд┐рдХ рдУрдПрд╕ рддреБрд░рдВрдд рд╡рд░реНрдЪреБрдЕрд▓ рдПрдбреНрд░реЗрд╕рд┐рдВрдЧ рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рдорд▓реНрдЯреАрдЯрд╛рд╕реНрдХрд┐рдВрдЧ рдХреЗ рд╕рд╛рде <i>рд╕рдВрд░рдХреНрд╖рд┐рдд рдореЛрдб рдореЗрдВ</i> рдЪрд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВред  рдбреЙрд╕ рдиреЗ рдРрд╕рд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ред <br><br>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, bcc рдПрдХ ANSI C рд╕рдВрдХрд▓рдХ рдирд╣реАрдВ рд╣реИред рдпрд╣ K &amp; R C рдХреЗ рдЙрдкрд╕рдореВрд╣ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рдмрд┐рд▓реНрдЯ-рдЗрди x86 рдХреЛрдбрд╛рдВрддрд░рдХ рдХреЛрдб рднреАред  рдЕрдиреНрдп 8086 рд╕реА рдХрдВрдкрд╛рдЗрд▓рд░реЛрдВ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдЗрд╕рдореЗрдВ "рджреВрд░" рдпрд╛ "рд▓рдВрдмреЗ" рдкреЙрдЗрдВрдЯрд░реНрд╕ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдиреНрдп рдореЗрдореЛрд░реА рд╕реЗрдЧрдореЗрдВрдЯ</a> (рд╡реАрдЬреАрдП, рдШрдбрд╝рд┐рдпреЛрдВ, рдЖрджрд┐) рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХреЛрдбрд╛рдВрддрд░рдХ рдХреЛрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдиреЛрдЯ: рдЗрди "рд▓реЙрдиреНрдЧ рдкреЙрдЗрдВрдЯрд░реНрд╕" 8086 рдХреЗ рдЕрд╡рд╢реЗрд╖ рдЕрднреА рднреА Win32 API рдореЗрдВ рд╕рдВрд░рдХреНрд╖рд┐рдд рд╣реИрдВ: <code>LPSTR</code> , <code>LPWORD</code> , <code>LPDWORD</code> , рдЖрджрд┐ рдЬреЛ рдмрд┐рд▓реНрдЯ-рдЗрди рдЕрд╕реЗрдВрдмрд▓рд░ рдореЗрдВ рдмрд┐рд▓реНрдЯ-рдЗрди <code>LPDWORD</code> рд╕рд╛рде рддреБрд▓рдирд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдХреЛрдбрд╛рдВрддрд░рдХ рдореЗрдВ, рдЖрдкрдХреЛ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рд╕реНрдЯреИрдХ рд╕реЗ рдЪрд░ рд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдФрд░ рдЪреВрдВрдХрд┐ рдмреАрд╕реАрд╕реА рджреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдХреЙрд▓рд┐рдВрдЧ рд╕рдореНрдореЗрд▓рдиреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдХреЛрдб рдореЗрдВ рдЪрд░ рдПрдХ рдпрд╛ рджреВрд╕рд░реЗ рд╕рдореНрдореЗрд▓рди рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд╣рд╛рд░реНрдб-рдХреЛрдбрд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рдЗрди рд╕реАрдорд╛рдУрдВ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рдореИрдВрдиреЗ рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреА рддрд▓рд╛рд╢ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ред <br><br><h1>  DJGPP </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреАрдЬреЗрдЬреАрдкреАрдкреА</a> - рдбреЙрд╕ рдХреЗ рддрд╣рдд рдЬреАрд╕реАрд╕реА рдкреЛрд░реНрдЯред  рдПрдХ рдмрд╣реБрдд рд╣реА рдкреНрд░рднрд╛рд╡рд╢рд╛рд▓реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдЬреЛ рд▓рдЧрднрдЧ рд╕рдВрдкреВрд░реНрдг POSIX рдХреЛ DOS рдХреЗ рддрд╣рдд рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреА рд╣реИред  рдХрдИ рдбреЙрд╕-рдкреЛрд░реНрдЯреЗрдб рдкреНрд░реЛрдЧреНрд░рд╛рдо рдбреАрдЬреЗрдЬреАрдкреАрдкреА рдкрд░ рдмрдиреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рд╡рд╣ рдХреЗрд╡рд▓ рд╕рдВрд░рдХреНрд╖рд┐рдд рдореЛрдб рдХреЗ рд▓рд┐рдП 32-рдмрд┐рдЯ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдмрдирд╛рддрд╛ рд╣реИред  рдпрджрд┐ рд╕рдВрд░рдХреНрд╖рд┐рдд рдореЛрдб рдореЗрдВ рдЖрдкрдХреЛ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╡реАрдЬреАрдП) рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЙрд╕ рд╕рдВрд░рдХреНрд╖рд┐рдд рдореЛрдб рдЗрдВрдЯрд░рдлреЗрд╕</a> (DPMI) рдХреА рд╕реЗрд╡рд╛ рдХреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд┐рдП</a> рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред  рдЕрдЧрд░ рдореИрдВрдиреЗ рдбреАрдЬреЗрдЬреАрдкреАрдкреА рд▓рд┐рдпрд╛, рддреЛ рдореИрдВ рдЦреБрдж рдХреЛ рдПрдХ рд╕рд┐рдВрдЧрд▓ рд╕реНрдЯреИрдВрдбрдЕрд▓реЛрди рдмрд╛рдЗрдирд░реА рддрдХ рд╕реАрдорд┐рдд рдирд╣реАрдВ рд░рдЦ рд╕рдХрддрд╛ рдерд╛, рдХреНрдпреЛрдВрдХрд┐ рдореЗрд░реЗ рдкрд╛рд╕ рдПрдХ рдбреАрдкреАрдПрдордЖрдИ рд╕рд░реНрд╡рд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдкреНрд░рджрд░реНрд╢рди DPMI рдХреЗ рдЕрдиреБрд░реЛрдзреЛрдВ рд╕реЗ рднреА рдЧреНрд░рд╕реНрдд рд╣реИред <br><br>  рдбреАрдЬреЗрдЬреАрдкреАрдкреА рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдЙрдкрдХрд░рдг рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рдХрдо рд╕реЗ рдХрдо рдХрд╣рдиреЗ рдХреЗ рд▓рд┐рдПред  рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдореБрдЭреЗ рдПрдХ рдЙрдкрдпреЛрдЧреА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмрд┐рд▓реНрдб-рдбреАрдЬрдЧрдк</a> рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдорд┐рд▓рд╛ рдЬреЛ рдХрдо рд╕реЗ рдХрдо рд▓рд┐рдирдХреНрд╕ рдкрд░ рд╕рдм рдХреБрдЫ рдЪрд▓рд╛рддрд╛ рд╣реИред <br><br>  рдпрд╛ рддреЛ рдПрдХ рдЧрдВрднреАрд░ рдЧрд▓рддреА рдереА, рдпрд╛ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдбреАрдЬреЗрдЬреАрдкреАрдкреА рдмрд╛рдпрдиреЗрд░рд┐рдЬрд╝ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдлрд┐рд░ рд╕реЗ рд╡рд╛рдпрд░рд╕ рд╕реЗ рд╕рдВрдХреНрд░рдорд┐рдд</a> рдереЗ, рд▓реЗрдХрд┐рди рдЬрдм рдореИрдВрдиреЗ рдбреЙрд╕рдмреЙрдХреНрд╕ рдореЗрдВ рдЕрдкрдиреЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╢реБрд░реВ рдХрд┐рдП, рддреЛ рддреНрд░реБрдЯрд┐ "рд╡рд╛рдпрд░рд╕ рдирд╣реАрдВ: рд╡рд╛рдпрд░рд╕ рдХреА рдЬрд╛рдВрдЪ" рд▓рдЧрд╛рддрд╛рд░ рджрд┐рдЦрд╛рдИ рджреАред  рдпрд╣ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╡рд╛рдпрд░рд╕ рдореЗрд░реА рдорд╢реАрди рдкрд░ рдирд╣реАрдВ рд╣реИрдВ, рдореИрдВрдиреЗ рдЕрдкрдиреЗ рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ рдкрд░ рдбреАрдЬреЗрдЬреАрдкреАрдкреА рд╡рд╛рддрд╛рд╡рд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛, рдЬреЛ рдПрдХ рд╕рд╛рдл рдХрдорд░реЗ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИред  рдпрд╣ ARM- рдЖрдзрд╛рд░рд┐рдд рдбрд┐рд╡рд╛рдЗрд╕ x86 рд╡рд╛рдпрд░рд╕ рд╕реЗ рд╕рдВрдХреНрд░рдорд┐рдд рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдФрд░ рдлрд┐рд░ рднреА рд╡рд╣реА рд╕рдорд╕реНрдпрд╛ рдЙрддреНрдкрдиреНрди рд╣реБрдИ, рдФрд░ рд╕рднреА рдмрд╛рдЗрдирд░реА рд╣реИрд╢ рдорд╢реАрдиреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдорд╛рди рдереЗ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдореЗрд░реА рдЧрд▓рддреА рдирд╣реАрдВ рд╣реИред <br><br>  рддреЛ рдпрд╣ рдФрд░ DPMI рд╕рдорд╕реНрдпрд╛ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рдореИрдВрдиреЗ рдЖрдЧреЗ рджреЗрдЦрдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛ред <br><br><h1>  рдлреБрд▓рд┐рдВрдЧ рдЬреАрд╕реАрд╕реА </h1><br>  рдореИрдВ рдЖрдЦрд┐рд░рдХрд╛рд░ рдЬрд┐рд╕ рдкрд░ рдмрд╕ рдЧрдпрд╛ рд╡рд╣ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореЛрдб рдореЗрдВ рдбреЙрд╕ рдХреЙрдо рдлрд╛рдЗрд▓реЛрдВ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд▓рд┐рдП "рдзреЛрдЦрд╛" рдЬреАрд╕реАрд╕реА рдХреА рдореБрд╢реНрдХрд┐рд▓ рдЪрд╛рд▓ рдереАред  рдпрд╣ рдЯреНрд░рд┐рдХ 80386 рддрдХ рдХрд╛рдо рдХрд░рддреА рд╣реИ (рдЬреЛ рдХрд┐ рдЖрдорддреМрд░ рдкрд░ рдЖрдкрдХреЛ рдЪрд╛рд╣рд┐рдП рд╣реЛрддреА рд╣реИ)ред  80386 рдкреНрд░реЛрд╕реЗрд╕рд░ 1985 рдореЗрдВ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ рдФрд░ рдпрд╣ рдкрд╣рд▓рд╛ 32-рдмрд┐рдЯ x86 рдорд╛рдЗрдХреНрд░реЛрдкреНрд░реЛрд╕реЗрд╕рд░ рдмрди рдЧрдпрд╛ред  рдЬреАрд╕реАрд╕реА рдЕрднреА рднреА рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХреЗ рдЗрд╕ рд╕реЗрдЯ рдХрд╛ рдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ x86-64 рд╡рд╛рддрд╛рд╡рд░рдг рдкрд░ рднреАред  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдЬреАрд╕реАрд╕реА рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ 16-рдмрд┐рдЯ рдХреЛрдб рдХрд╛ рдЙрддреНрдкрд╛рджрди рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореБрдЭреЗ 8086 рдХреЗ рд▓рд┐рдП рдЧреЗрдо рдмрдирд╛рдиреЗ рдХреЗ рдореВрд▓ рд▓рдХреНрд╖реНрдп рдХреЛ рдЫреЛрдбрд╝рдирд╛ рдкрдбрд╝рд╛ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛, рдХреНрдпреЛрдВрдХрд┐ рд▓рдХреНрд╖реНрдп DOSBox рдордВрдЪ рдЕрдирд┐рд╡рд╛рд░реНрдп рд░реВрдк рд╕реЗ рдПрдХ 80386 рдПрдореБрд▓реЗрдЯрд░ рд╣реИред <br><br>  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдЯреНрд░рд┐рдХ рдХреЛ рдорд┐рдирдЧрд╡ рдХрдВрдкрд╛рдЗрд▓рд░ рдореЗрдВ рднреА рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдПрдХ рджреАрд░реНрдШрдХрд╛рд▓рд┐рдХ рддреНрд░реБрдЯрд┐ рд╣реИ рдЬреЛ рдЗрд╕реЗ рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рд╕реЗ рд░реЛрдХрддреА рд╣реИ ("рдЧреИрд░ рдкреАрдИ рдЖрдЙрдЯрдкреБрдЯ рдлрд╝рд╛рдЗрд▓ рдкрд░ рдкреАрдИ рдСрдкрд░реЗрд╢рди рдирд╣реАрдВ рдХрд░ рд╕рдХрддреА")ред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЗрд╕реЗ рдмрд╛рдпрдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдореИрдВрдиреЗ рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рдХрд┐рдпрд╛ рдерд╛: рдЖрдкрдХреЛ <code>OUTPUT_FORMAT</code> рдирд┐рд░реНрджреЗрд╢ рдирд┐рдХрд╛рд▓рдирд╛ рдЪрд╛рд╣рд┐рдП рдФрд░ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд <code>objcopy</code> рдЪрд░рдг ( <code>objcopy -O binary</code> ) рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br><h3>  рдирдорд╕реНрддреЗ рд╡рд┐рд╢реНрд╡ рдбреЙрд╕ рдкрд░ </h3><br>  рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП, рд╣рдо рд▓рд┐рдирдХреНрд╕ рдкрд░ рдЬреАрд╕реАрд╕реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЙрд╕ рдХреЙрдо рдХрд╛рд░реНрдпрдХреНрд░рдо "рд╣реИрд▓реЛ, рд╡рд░реНрд▓реНрдб" рдмрдирд╛рдПрдВрдЧреЗред <br><br>  рдЗрд╕ рдкрджреНрдзрддрд┐ рдореЗрдВ рдПрдХ рдкреНрд░рдореБрдЦ рдФрд░ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдзрд╛ рд╣реИ: <b>рдХреЛрдИ рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдирд╣реАрдВ рд╣реЛрдЧрд╛</b> ред  рдпрд╣ рдЦрд░реЛрдВрдЪ рд╕реЗ рдПрдХ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рд▓рд┐рдЦрдиреЗ рдЬреИрд╕рд╛ рд╣реИ, рдХреБрдЫ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдЕрдкрд╡рд╛рдж рдХреЗ рд╕рд╛рде рдЬреЛ рдбреЙрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдХреЛрдИ <code>printf()</code> рдпрд╛ рдкрд╕рдВрдж рдирд╣реАрдВред  рдЗрд╕рдХреЗ рдмрдЬрд╛рдп, рд╣рдо рдХрдВрд╕реЛрд▓ рдХреЛ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд┐рдВрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбреЙрд╕ рд╕реЗ рдкреВрдЫрддреЗ рд╣реИрдВред  DOS рдЕрдиреБрд░реЛрдз рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реНрдпрд╡рдзрд╛рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рдЗрдирд▓рд╛рдЗрди рдХреЛрдбрд╛рдВрддрд░рдХ рдХреЛрдб! <br><br>  рдбреЙрд╕ рдХреЗ рдиреМ рдЗрдВрдЯрд░рдкреНрдЯ рд╣реИрдВ: 0x20, 0x21, 0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x2Fред  рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╣рдорд╛рд░реА рд░реБрдЪрд┐ 0x21 рд╣реИ, рдлрд╝рдВрдХреНрд╢рди 0x09 (рдПрдХ рд▓рд╛рдЗрди рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдВ)ред  рдбреЙрд╕ рдФрд░ BIOS рдХреЗ рдмреАрдЪ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕ рдкреИрдЯрд░реНрди рдХреЗ рдирд╛рдо рдкрд░ рд╣рдЬрд╛рд░реЛрдВ рдлрд╝рдВрдХреНрд╢рди рд╣реИрдВ</a> ред  рдореИрдВ x86 рдЕрд╕реЗрдВрдмрд▓рд░ рдХреЛ рд╕рдордЭрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдирд╣реАрдВ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ, рд▓реЗрдХрд┐рди рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдлрд╝рдВрдХреНрд╢рди рд╕рдВрдЦреНрдпрд╛ <code>ah</code> рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ рдлрдВрд╕ рдЬрд╛рддреА рд╣реИ - рдФрд░ 0x21 рдЗрдВрдЯрд░рдкреНрдЯ рдлрд╛рдпрд░ред  рдлрдВрдХреНрд╢рди 0x09 рдПрдХ рддрд░реНрдХ рднреА рд▓реЗрддрд╛ рд╣реИ - рдкреНрд░рд┐рдВрдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдПрдХ рд▓рд╛рдЗрди рдХреЗ рд▓рд┐рдП рдПрдХ рдкреЙрдЗрдВрдЯрд░, рдЬреЛ <code>dx</code> рдФрд░ <code>ds</code> рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдореЗрдВ рдкрд╛рд╕ рд╣реЛрддрд╛ рд╣реИред <br><br>  рдпрд╣рд╛рдБ GCC рдЗрдирд▓рд╛рдЗрди рдЕрд╕реЗрдВрдмрд▓рд░ рдХрд╛ <code>print()</code> рдлрд╝рдВрдХреНрд╢рди рд╣реИред  рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рджреА рдЧрдИ рд▓рд╛рдЗрдиреЗрдВ $ рд╡рд░реНрдг рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред  рдХреНрдпреЛрдВ?  рдХреНрдпреЛрдВрдХрд┐ рдбреА.рдУ.рдПрд╕. <br><br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">asm</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volatile</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"mov $0x09, %%ah\n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"int $0x21\n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* no output */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"d"</span></span></span></span><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">) : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ah"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; }</code> </pre> <br>  рдХреЛрдб рдХреЛ <code>volatile</code> рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ рд╕рд╛рдЗрдб рдЗрдлреЗрдХреНрдЯ (рд▓рд╛рдЗрди рдкреНрд░рд┐рдВрдЯ) рд╣реЛрддрд╛ рд╣реИред  рдЬреАрд╕реАрд╕реА рдХреЗ рд▓рд┐рдП, рдХреЛрдбрд╛рдВрддрд░рдХ рдХреЛрдб рдЕрдкрд╛рд░рджрд░реНрд╢реА рд╣реИ, рдФрд░ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░ рдЖрдЙрдЯрдкреБрдЯ / рдЗрдирдкреБрдЯ / рдХреНрд▓реЙрдмрд░ рдкреНрд░рддрд┐рдмрдВрдз (рдЕрдВрддрд┐рдо рддреАрди рд▓рд╛рдЗрдиреЗрдВ) рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред  рдРрд╕реЗ рдбреЙрд╕ рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЗ рд▓рд┐рдП, рдХрд┐рд╕реА рднреА рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХреЛрдбрдХ рдХреЗ рджреБрд╖реНрдкреНрд░рднрд╛рд╡ рд╣реЛрдВрдЧреЗред  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЕрдиреБрдХреВрд▓рди рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдФрд░ рдбреЙрд╕ рддрдХ рдкрд╣реБрдВрдЪ рдХреЗ рд▓рд┐рдП рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ - рд╕рд░рд▓ рд╕реА рдХреЗ рд▓рд┐рдП рджреБрд░реНрдЧрдо рдЪреАрдЬреЗрдВред <br><br>  рдЖрдкрдХреЛ рдХреЙрд▓рд┐рдВрдЧ рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдХрд╛ рднреА рдзреНрдпрд╛рди рд░рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐ рдЬреАрд╕реАрд╕реА рдХреЛ рдкрддрд╛ рдирд╣реАрдВ рд╣реИ рдХрд┐ <code>string</code> рджреНрд╡рд╛рд░рд╛ рдмрддрд╛рдИ рдЧрдИ рдореЗрдореЛрд░реА рдХрднреА рдкрдврд╝реА рдЧрдИ рд╣реИред  рдпрд╣ рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИ рдХрд┐ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдПрдХ рд╕рд░рдгреА рдХреЛ рднреА <code>volatile</code> рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдпрд╣ рд╕рдм рдЕрдкрд░рд┐рд╣рд╛рд░реНрдп рдХреЛ рдЪрд┐рддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИ: рдРрд╕реЗ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдХреЛрдИ рднреА рдХрд╛рд░реНрд░рд╡рд╛рдИ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░ рдХреЗ рд╕рд╛рде рдПрдХ рдЕрдВрддрд╣реАрди рд╕рдВрдШрд░реНрд╖ рдореЗрдВ рдмрджрд▓ рдЬрд╛рддреА рд╣реИред  рдЗрди рд╕рднреА рд▓рдбрд╝рд╛рдИрдпреЛрдВ рдХреЛ рдирд╣реАрдВ рдЬреАрддрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЕрдм рдореБрдЦреНрдп рд╕рдорд╛рд░реЛрд╣ рдХреЗ рд▓рд┐рдПред  рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ рдЗрд╕рдХрд╛ рдирд╛рдо рдорд╣рддреНрд╡рдкреВрд░реНрдг рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдореИрдВ рдЗрд╕реЗ <code>main()</code> рдХрд╣рдиреЗ рд╕реЗ рдмрдЪрддрд╛ рд╣реВрдВ <code>main()</code> , рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рдкрд╛рддреНрд░реЛрдВ рдХреЛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдорд┐рдирдЬреАрдбрдмреНрд▓реНрдпреВ рдХреЗ рдкрд╛рд╕ рдордЬреЗрджрд╛рд░ рд╡рд┐рдЪрд╛рд░ рд╣реИрдВ, рднрд▓реЗ рд╣реА рд╡реЗ рдЙрд╕рд╕реЗ рдирд╣реАрдВ рдкреВрдЫреЗрдВред <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dosmain</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span></span><span class="hljs-function">)</span></span> { print(<span class="hljs-string"><span class="hljs-string">"Hello, World!\n$"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>  COM рдлрд╛рдЗрд▓реЗрдВ рдЖрдХрд╛рд░ рдореЗрдВ 65279 рдмрд╛рдЗрдЯреНрд╕ рддрдХ рд╕реАрдорд┐рдд рд╣реИрдВред  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ x86 рдореЗрдореЛрд░реА рд╕реЗрдЧрдореЗрдВрдЯ 64 KB рд╣реИ, рдФрд░ DOS рдХреЗрд╡рд▓ COM рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ 0x0100 рд╕реЗрдЧрдореЗрдВрдЯ рдкрддреЗ рдкрд░ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рддрд╛ рд╣реИ рдФрд░ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рддрд╛ рд╣реИред  рдХреЛрдИ рд╢реАрд░реНрд╖рд╛рд╕рди рдирд╣реАрдВ, рдмрд╕ рдПрдХ рд╕реНрд╡рдЪреНрдЫ рдмрд╛рдЗрдирд░реАред  рдЪреВрдВрдХрд┐ COM рдкреНрд░реЛрдЧреНрд░рд╛рдо, рд╕рд┐рджреНрдзрд╛рдВрдд рд░реВрдк рдореЗрдВ, рдПрдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЖрдХрд╛рд░ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рддреЛ рдХреЛрдИ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд▓реЗрдЖрдЙрдЯ (рдлреНрд░реАрд╕реНрдЯреИрдВрдбрд┐рдВрдЧ) рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдкреВрд░реА рдЪреАрдЬ рдХреЛ рдПрдХрд▓ рдЕрдиреБрд╡рд╛рдж рдЗрдХрд╛рдИ рдХреЗ рд░реВрдк рдореЗрдВ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрд╣ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЗ рд╕рд╛рде рдПрдХ рдЬреАрд╕реАрд╕реА рдХреЙрд▓ рд╣реЛрдЧрд╛ред <br><br><h3>  рд╕рдВрдХрд▓рдХ рд╡рд┐рдХрд▓реНрдк </h3><br>  рдпрд╣рд╛рдБ рдореБрдЦреНрдп рд╕рдВрдХрд▓рдХ рд╡рд┐рдХрд▓реНрдк рд╣реИрдВред <br><br> <code>-std=gnu99 -Os -nostdlib -m32 -march=i386 -ffreestanding</code> <br> <br>  рдЪреВрдВрдХрд┐ рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП gnu99 рдФрд░ c99 рдХреЗ рдмреАрдЪ рдПрдХрдорд╛рддреНрд░ рдЕрдВрддрд░ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдЯреНрд░рд┐рдЧреНрд░рд╛рдл (рдЬреИрд╕рд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП) рд╣реИ, рдФрд░ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХреЛрдбрд╛рдВрддрд░рдХ рдХреЛ <code>__asm__</code> рдмрдЬрд╛рдп <code>asm</code> рд▓рд┐рдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдиреНрдпреВрдЯрди рдХрд╛ рдмрд┐рди рдирд╣реАрдВ рд╣реИред  рдпрд╣ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдЬреАрд╕реАрд╕реА рд╕реЗ рдЗрддрдиреА рдирд┐рдХрдЯрддрд╛ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╣реЛрдЧреА рдХрд┐ рдореБрдЭреЗ рдЕрднреА рднреА рдЬреАрд╕реАрд╕реА рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдирд╣реАрдВ рд╣реИред <br><br>  <code>-Os</code> рд╡рд┐рдХрд▓реНрдк рдЬрд┐рддрдирд╛ рд╕рдВрднрд╡ рд╣реЛ рдЙрддрдирд╛ рд╕рдВрдХрд▓рди рдкрд░рд┐рдгрд╛рдо рдХреЛ рдХрдо рдХрд░рддрд╛ рд╣реИред  рддреЛ рдХрд╛рд░реНрдпрдХреНрд░рдо рддреЗрдЬреА рд╕реЗ рдХрд╛рдо рдХрд░реЗрдЧрд╛ред  рдпрд╣ рдбреЙрд╕рдмреЙрдХреНрд╕ рдкрд░ рдирдЬрд╝рд░ рд░рдЦрдиреЗ рдХреЗ рд╕рд╛рде рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдПрдореБрд▓реЗрдЯрд░ 80 рдХреЗ рджрд╢рдХ рдХреА рдорд╢реАрди рдХреА рддрд░рд╣ рдзреАрд░реЗ-рдзреАрд░реЗ рдЪрд▓рддрд╛ рд╣реИред  рдореИрдВ рдЗрд╕ рд╕реАрдорд╛ рдореЗрдВ рдлрд┐рдЯ рд╣реЛрдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВред  рдпрджрд┐ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░ рд╕рдорд╕реНрдпрд╛рдПрдБ рдкреИрджрд╛ рдХрд░ рд░рд╣рд╛ рд╣реИ, рддреЛ рдЕрд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ <code>-O0</code> рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдЖрдкрдХреА рддреНрд░реБрдЯрд┐ рдпрд╛ рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░ рдпрд╣рд╛рдБ рд╣реИред <br><br>  рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдСрдкреНрдЯрд┐рдорд╛рдЗрдЬрд╝рд░ рдпрд╣ рдирд╣реАрдВ рд╕рдордЭ рдкрд╛рддрд╛ рд╣реИ рдХрд┐ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╕рдВрдмрдВрдзрд┐рдд рдПрдбреНрд░реЗрд╕рд┐рдВрдЧ рдкреНрд░рддрд┐рдмрдВрдзреЛрдВ рдХреЗ рд╕рд╛рде рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореЛрдб рдореЗрдВ рдХрд╛рдо рдХрд░реЗрдЧрд╛ред  <b>рдпрд╣ рд╕рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рдЕрдорд╛рдиреНрдп рдЕрдиреБрдХреВрд▓рди рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЗ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╡реИрдз рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЛ рддреЛрдбрд╝рддреЗ рд╣реИрдВред</b>  рдпрд╣ рдЬреАрд╕реАрд╕реА рдмрдЧ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдЦреБрдж рдпрд╣рд╛рдВ рдкрд╛рдЧрд▓ рдЪреАрдЬреЗрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдореБрдЭреЗ рдЖрд╢рд╛рд╡рд╛рджреА рдХреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЛ рддреЛрдбрд╝рдиреЗ рд╕реЗ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдмрд╛рд░ рдХреЛрдб рдХреЛ рдлрд┐рд░ рд╕реЗ рдХрд░рдирд╛ рдкрдбрд╝рд╛ред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдЬрдЯрд┐рд▓ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рдХрд╛рд░реНрдпреЛрдВ рд╕реЗ рд▓реМрдЯрдиреЗ рд╕реЗ рдмрдЪрдирд╛ рдерд╛ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдХрднреА-рдХрднреА рдХрдЪрд░реЗ рд╕реЗ рднрд░реЗ рд╣реЛрддреЗ рдереЗред  рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЦрддрд░рд╛ рдпрд╣ рд╣реИ рдХрд┐ рдЬреАрд╕реАрд╕реА рдХрд╛ рднрд╡рд┐рд╖реНрдп рдХрд╛ рд╕рдВрд╕реНрдХрд░рдг рдФрд░ рднреА рд╕реНрдорд╛рд░реНрдЯ рд╣реЛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЗрд╕рд╕реЗ рднреА рдЕрдзрд┐рдХ рдХреЛрдб рдЯреВрдЯ рдЬрд╛рдПрдЧрд╛ред  рдпрд╣рд╛рдВ рдЖрдкрдХрд╛ рдорд┐рддреНрд░ <code>volatile</code> ред <br><br>  рдЕрдЧрд▓рд╛ рдкреИрд░рд╛рдореАрдЯрд░ <code>-nostdlib</code> , рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдХрд┐рд╕реА рднреА рдорд╛рдиреНрдп рдкреБрд╕реНрддрдХрд╛рд▓рдпреЛрдВ рд╕реЗ рд▓рд┐рдВрдХ рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдВрдЧреЗ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рд╕рд╛рдВрдЦреНрдпрд┐рдХреАрдп рд░реВрдк рд╕реЗ рднреАред <br><br>  Parameters <code>-m32-march=i386</code> рд╕рдВрдХрд▓рдХ рдХреЛ 80386 рдХреЛрдб рдЬрд╛рд░реА рдХрд░рдиреЗ рдХрд╛ <code>-m32-march=i386</code> рдЕрдЧрд░ рдореИрдВрдиреЗ рдЖрдзреБрдирд┐рдХ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рд▓рд┐рдП рдмреВрдЯрд▓реЛрдбрд░ рд▓рд┐рдЦрд╛ рд╣реИ, рддреЛ 80686 рдкрд░ рджреГрд╖реНрдЯрд┐ рднреА рд╕рд╛рдорд╛рдиреНрдп рд╣реЛрдЧреА, рд▓реЗрдХрд┐рди DOSBox 80386 рд╣реИред <br><br>  <code>-ffreestanding</code> рддрд░реНрдХ рдХреЗ рд▓рд┐рдП GCC рдХреЛ рдХреЛрдб рдЬрд╛рд░реА рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдЬреЛ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЗ рд╕рд╣рд╛рдпрдХ рдХрд╛рд░реНрдпреЛрдВ рдХреЛ рдПрдХреНрд╕реЗрд╕ рдХрд░рддрд╛ рд╣реИред  рдХрднреА-рдХрднреА, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХреЛрдб рдХреЗ рдмрдЬрд╛рдп, рдпрд╣ рдПрдХ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЛрдб рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░рддрд╛ рд╣реИ, рдЦрд╛рд╕рдХрд░ рдЧрдгрд┐рддреАрдп рдСрдкрд░реЗрдЯрд░реЛрдВ рдХреЗ рд╕рд╛рдеред  рдореБрдЭреЗ bcc рдХреЗ рд╕рд╛рде рдПрдХ рдореБрдЦреНрдп рд╕рдорд╕реНрдпрд╛ рдереА, рдЬрд╣рд╛рдБ рдпрд╣ рд╡реНрдпрд╡рд╣рд╛рд░ рдЕрдХреНрд╖рдо рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рдерд╛ред  рдмреВрдЯ рд▓реЛрдбрд░ рдФрд░ OS рдХрд░реНрдиреЗрд▓ рд▓рд┐рдЦрддреЗ рд╕рдордп рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХрд╛ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдФрд░ рдЕрдм рдбреЙрд╕ .com рдлрд╛рдЗрд▓реЗрдВред <br><br><h3>  рд▓рд┐рдВрдХрд░ рд╡рд┐рдХрд▓реНрдк </h3><br>  <code>-Wl</code> рдЙрдкрдпреЛрдЧ рд▓рд┐рдВрдХрд░ ( <code>ld</code> ) рдореЗрдВ рддрд░реНрдХ рдкрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╣рдореЗрдВ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдЬреАрд╕реАрд╕реА рдореЗрдВ рдПрдХ рдХреЙрд▓ рдореЗрдВ рд╕рдм рдХреБрдЫ рдХрд░рддреЗ рд╣реИрдВред <br><br><pre> <code class="hljs powershell"><span class="hljs-literal"><span class="hljs-literal">-Wl</span></span>,-<span class="hljs-literal"><span class="hljs-literal">-nmagic</span></span>,-<span class="hljs-literal"><span class="hljs-literal">-script</span></span>=com.ld</code> </pre> <br>  <code>--nmagic</code> рдЕрдиреБрднрд╛рдЧ рдкреГрд╖реНрда рд╕рдВрд░реЗрдЦрдг рдХреЛ рдЕрдХреНрд╖рдо рдХрд░рддрд╛ рд╣реИред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдореЗрдВ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рджреВрд╕рд░реЗ, рдпрд╣ рдХреАрдорддреА рдЬрдЧрд╣ рдмрд░реНрдмрд╛рдж рдХрд░рддрд╛ рд╣реИред  рдореЗрд░реЗ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдореЗрдВ, рдпрд╣ рдПрдХ рдЖрд╡рд╢реНрдпрдХ рдЙрдкрд╛рдп рдирд╣реАрдВ рд▓рдЧрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд┐рд░реНрдл рдорд╛рдорд▓реЗ рдореЗрдВ, рдореИрдВ рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХреЛ рдЫреЛрдбрд╝ рджреЗрддрд╛ рд╣реВрдВред <br><br>  <code>--script</code> рдкреИрд░рд╛рдореАрдЯрд░ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рд╣рдо рдПрдХ рд╡рд┐рд╢реЗрд╖ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд┐рдВрдХрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдпрд╣ рдЖрдкрдХреЛ рд╣рдорд╛рд░реЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рд╕реЗрдХреНрд╢рди ( <code>text</code> , <code>data</code> , <code>bss</code> , <code>rodata</code> ) рдХреЛ рд╕рд╣реА рдЬрдЧрд╣ рд▓рдЧрд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдпрд╣рд╛рдБ <code>com.ld</code> ред <code>com.ld</code> рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИред <br><br><pre> <code class="hljs haskell"><span class="hljs-type"><span class="hljs-type">OUTPUT_FORMAT</span></span>(binary) <span class="hljs-type"><span class="hljs-type">SECTIONS</span></span> { . = <span class="hljs-number"><span class="hljs-number">0x0100</span></span>; .text : { *(.text); } .<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> : { *(.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">data</span></span></span><span class="hljs-class">); *(.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bss</span></span></span><span class="hljs-class">); *(.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rodata</span></span></span><span class="hljs-class">); } _heap = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ALIGN</span></span></span><span class="hljs-class">(4); }</span></span></code> </pre> <br>  <code>OUTPUT_FORMAT(binary)</code> рдЖрдкрдХреЛ рдИрдПрд▓рдПрдл рдлрд╝рд╛рдЗрд▓ (рдпрд╛ рдкреАрдИ, рдЖрджрд┐) рдореЗрдВ рдЗрд╕реЗ рдирд╣реАрдВ рдбрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рддрд╛ рд╣реИред  рд▓рд┐рдВрдХрд░ рдХреЛ рдХреЗрд╡рд▓ рд╕реНрд╡рдЪреНрдЫ рдХреЛрдб рд░реАрд╕реЗрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдПрдХ COM рдлрд╛рдЗрд▓ рд╕рд┐рд░реНрдл рдХреНрд▓реАрди рдХреЛрдб рд╣реИ, рдпрд╛рдиреА рд╣рдо рд▓рд┐рдВрдХрд░ рдХреЛ COM рдлрд╛рдЗрд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рджреЗрддреЗ рд╣реИрдВ! <br><br>  рдореИрдВрдиреЗ рдХрд╣рд╛ рдХрд┐ COM рдлрд╛рдЗрд▓реЗрдВ <code>0x0100</code> рдЕрдкрд▓реЛрдб рдХреА <code>0x0100</code> ред  рдЪреМрдереА рдкрдВрдХреНрддрд┐ рдмрд╛рдЗрдирд░реА рдХреЛ рд╡рд╣рд╛рдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреА рд╣реИред  COM рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдкрд╣рд▓рд╛ рдмрд╛рдЗрдЯ рдЕрднреА рднреА рдХреЛрдб рдХрд╛ рдкрд╣рд▓рд╛ рдмрд╛рдЗрдЯ рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕ рдореЗрдореЛрд░реА рдСрдлрд╝рд╕реЗрдЯ рд╕реЗ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдлрд┐рд░ рд╕рднреА рдЕрдиреБрднрд╛рдЧ рдЕрдиреБрд╕рд░рдг рдХрд░рддреЗ рд╣реИрдВ: <code>text</code> (рдХрд╛рд░реНрдпрдХреНрд░рдо), <code>data</code> (рд╕реНрдереИрддрд┐рдХ рдбреЗрдЯрд╛), <code>bss</code> (рд╢реВрдиреНрдп рдЖрд░рдВрднреАрдХрд░рдг рдХреЗ рд╕рд╛рде рдбреЗрдЯрд╛), <code>rodata</code> (рддрд╛рд░)ред  рдЕрдВрдд рдореЗрдВ, рдореИрдВ <code>_heap</code> рдкреНрд░рддреАрдХ рдХреЗ рд╕рд╛рде рдмрд╛рдЗрдирд░реА рдХреЗ рдЕрдВрдд рдХреЛ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рддрд╛ рд╣реВрдВред  рдпрд╣ рдмрд╛рдж рдореЗрдВ рдХрд╛рдо рдЖрдПрдЧрд╛ рдЬрдм <code>sbrk()</code> рдЬрдм рд╣рдо тАЬHello, WorldтАЭ рдХреЗ рд╕рд╛рде рд╣реЛрдВрдЧреЗред  рдореИрдВрдиреЗ 4 рдмрд╛рдЗрдЯреНрд╕ рдХреЗ рд╕рд╛рде <code>_heap</code> рдХреЛ рд╕рдВрд░реЗрдЦрд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдВрдХреЗрдд рджрд┐рдпрд╛ред <br><br>  рд▓рдЧрднрдЧ рдХрд┐рдпрд╛ рд╣реБрдЖред <br><br><h3>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдХрд╛ рд╢реБрднрд╛рд░рдВрдн </h3><br>  рд▓рд┐рдВрдХрд░ рдЖрдорддреМрд░ рдкрд░ рд╣рдорд╛рд░реЗ рдкреНрд░рд╡реЗрд╢ рдмрд┐рдВрджреБ ( <code>main</code> ) рдХреЛ рдЬрд╛рдирддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЬрдм рд╕реЗ рд╣рдордиреЗ "рдмрд╛рдЗрдирд░реА" рдореБрджреНрджреЗ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рдкрддрд╛ рд▓рдЧрд╛рдирд╛ рд╣реЛрдЧрд╛ред  рдпрджрд┐ <code>print()</code> рдлрд╝рдВрдХреНрд╢рди рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдЪрд▓рддрд╛ рд╣реИ, рддреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдЙрд╕реА рд╕реЗ рд╢реБрд░реВ рд╣реЛрдЧрд╛, рдЬреЛ рдЧрд▓рдд рд╣реИред  рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЛ рдЖрд░рдВрдн рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдЫреЛрдЯреЗ рд╢реАрд░реНрд╖рдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред <br><br>  рдЗрд╕ рддрд░рд╣ рдХреА рдЪреАрдЬреЛрдВ рдХреЗ рд▓рд┐рдП рд▓рд┐рдВрдХрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдПрдХ <code>STARTUP</code> рд╡рд┐рдХрд▓реНрдк рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд╛рджрдЧреА рдХреЗ рд▓рд┐рдП рд╣рдо рдЗрд╕реЗ рд╕реАрдзреЗ рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рд▓рд╛рдЧреВ рдХрд░реЗрдВрдЧреЗред  рдЖрдорддреМрд░ рдкрд░ рдРрд╕реА рдЪреАрдЬреЛрдВ рдХреЛ <code>crt0.o</code> рдпрд╛ <code>Boot.o</code> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрджрд┐ рдЖрдк рдЙрди рдкрд░ рдХрд╣реАрдВ рдареЛрдХрд░ рдЦрд╛рддреЗ рд╣реИрдВред  рд╣рдорд╛рд░реЗ рдХреЛрдб <i>рдХреЛ</i> рдЗрд╕ рдЕрдВрддрд░реНрдирд┐рд░реНрдорд┐рдд рдХреЛрдбрд╛рдВрддрд░рдХ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ <i>рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП</i> , рдХрд┐рд╕реА рднреА рдирд┐рд╖реНрдХрд░реНрд╖ рдФрд░ рдкрд╕рдВрдж рд╕реЗ рдкрд╣рд▓реЗред  рдбреЙрд╕ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЬреНрдпрд╛рджрд╛рддрд░ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдХрд░реЗрдЧрд╛, рд╣рдореЗрдВ рдмрд╕ рдПрдВрдЯреНрд░реА рдкреЙрдЗрдВрдЯ рдкрд░ рдЬрд╛рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред <br><br><pre> <code class="hljs perl">asm (<span class="hljs-string"><span class="hljs-string">".code16gcc\n"</span></span> <span class="hljs-string"><span class="hljs-string">"call dosmain\n"</span></span> <span class="hljs-string"><span class="hljs-string">"mov $0x4C, %ah\n"</span></span> <span class="hljs-string"><span class="hljs-string">"int $0x21\n"</span></span>);</code> </pre> <br>  <code>.code16gcc</code> рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рд╣рдо рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореЛрдб рдореЗрдВ рдХрд╛рдо рдХрд░рдиреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ, рддрд╛рдХрд┐ рдпрд╣ рд╕рд╣реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХрд░ рд╕рдХреЗред  рдирд╛рдо рдХреЗ рдмрд╛рд╡рдЬреВрдж, рдпрд╣ 16-рдмрд┐рдЯ рдХреЛрдб рдХрд╛ рдЙрддреНрдкрд╛рджрди <i>рдирд╣реАрдВ</i> рдХрд░реЗрдЧрд╛!  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <code>dosmain</code> рдлрд╝рдВрдХреНрд╢рди, рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд▓рд┐рдЦрд╛ рдерд╛, рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╡рд╣ рдлрд┐рд░ 0x4C рдлрд╝рдВрдХреНрд╢рди ("рд░рд┐рдЯрд░реНрди рдХреЛрдб рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд") рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбреЙрд╕ рдХреЛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рд╣рдо 1-рдмрд╛рдЗрдЯ <code>al</code> рд░рдЬрд┐рд╕реНрдЯрд░ (рдкрд╣рд▓реЗ рд╕реЗ <code>dosmain</code> рджреНрд╡рд╛рд░рд╛ <code>dosmain</code> ) рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓рдиреЗ рд╡рд╛рд▓реЗ рдХреЛрдб рдХреЛ рдкрд╛рд░рд┐рдд рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдХреЛрдбрдХ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ <code>volatile</code> рдХреНрдпреЛрдВрдХрд┐ рдЗрд╕рдореЗрдВ рдХреЛрдИ рдЗрдирдкреБрдЯ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдирд╣реАрдВ рд╣реИред <br><br><h3>  рд╕рдм рдПрдХ рд╕рд╛рде </h3><br>  рдпрд╣рд╛рдБ C рдореЗрдВ рдкреВрд░рд╛ рдХрд╛рд░реНрдпрдХреНрд░рдо рд╣реИред <br><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">asm</span></span> (<span class="hljs-string"><span class="hljs-string">".code16gcc\n"</span></span> <span class="hljs-string"><span class="hljs-string">"call dosmain\n"</span></span> <span class="hljs-string"><span class="hljs-string">"mov $0x4C,%ah\n"</span></span> <span class="hljs-string"><span class="hljs-string">"int $0x21\n"</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">asm</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volatile</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"mov $0x09, %%ah\n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"int $0x21\n"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/* no output */</span></span></span></span><span class="hljs-function"><span class="hljs-params"> : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"d"</span></span></span></span><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">) : </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ah"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dosmain</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ print(<span class="hljs-string"><span class="hljs-string">"Hello, World!\n$"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br>  рдореИрдВ рдирд╣реАрдВ рджреЛрд╣рд░рд╛рдКрдВрдЧрд╛ред <code>com.ld</code>  рдпрд╣рд╛рдВ рдЬреАрд╕реАрд╕реА рдЪреБрдиреМрддреА рд╣реИред <br><br><pre> <code class="hljs powershell">gcc <span class="hljs-literal"><span class="hljs-literal">-std</span></span>=gnu99 <span class="hljs-literal"><span class="hljs-literal">-Os</span></span> <span class="hljs-literal"><span class="hljs-literal">-nostdlib</span></span> <span class="hljs-literal"><span class="hljs-literal">-m32</span></span> <span class="hljs-literal"><span class="hljs-literal">-march</span></span>=i386 <span class="hljs-literal"><span class="hljs-literal">-ffreestanding</span></span> \ <span class="hljs-literal"><span class="hljs-literal">-o</span></span> hello.com <span class="hljs-literal"><span class="hljs-literal">-Wl</span></span>,-<span class="hljs-literal"><span class="hljs-literal">-nmagic</span></span>,-<span class="hljs-literal"><span class="hljs-literal">-script</span></span>=com.ld hello.c</code> </pre> <br>  рдФрд░ DOSBox рдореЗрдВ рдЙрд╕рдХрд╛ рдкрд░реАрдХреНрд╖рдг: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c5/478/358/4c5478358be0cdd9cc05eafd66bd44d2.png"><br><br>  рдлрд┐рд░ рдпрджрд┐ рдЖрдк рд╕реБрдВрджрд░ рдЧреНрд░рд╛рдлрд┐рдХреНрд╕ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдПрдХрдорд╛рддреНрд░ рд╕рд╡рд╛рд▓ рд░реБрдХрд╛рд╡рдЯ рдХреЛ рдХреЙрд▓ рдХрд░рдирд╛ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡реАрдЬреАрдП рдореЗрдореЛрд░реА рдореЗрдВ рд▓рд┐рдЦрдирд╛ рд╣реИ</a> ред  рдпрджрд┐ рдЖрдк рдзреНрд╡рдирд┐ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдкреАрд╕реА рд╕реНрдкреАрдХрд░ рдЗрдВрдЯрд░рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред  рдореБрдЭреЗ рдпрд╣ рдкрддрд╛ рдирд╣реАрдВ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рд╕рд╛рдЙрдВрдб рдмреНрд▓рд╛рд╕реНрдЯрд░ рдХреЛ рдХреИрд╕реЗ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рдПред  рдЙрд╕ рдкрд▓ рд╕реЗ, рдбреЙрд╕ рдбрд┐рдлреЗрдВрдбрд░ рдмрдбрд╝рд╛ рд╣реБрдЖред <br><br><h1>  рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрди </h1><br>  рдХрд┐рд╕реА рдЕрдиреНрдп рд╡рд┐рд╖рдп рдХреЛ рдХрд╡рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ <code>_heap</code> ?  рд╣рдо рдЗрд╕реЗ <code>sbrk()</code> рдХреЛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рдореБрдЦреНрдп рднрд╛рдЧ рдореЗрдВ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдореЛрдб рд╣реИ рдФрд░ рдХреЛрдИ рд╡рд░реНрдЪреБрдЕрд▓ рдореЗрдореЛрд░реА рдирд╣реАрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╣рдо рдХрд┐рд╕реА рднреА рдореЗрдореЛрд░реА рдХреЛ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рд╣рдо рдХрд┐рд╕реА рднреА рд╕рдордп рдПрдХреНрд╕реЗрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдХреБрдЫ рдХреНрд╖реЗрддреНрд░ рдЙрдкрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЖрд░рдХреНрд╖рд┐рдд рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдирд┐рдЪрд▓реА рдФрд░ рдКрдкрд░реА рдореЗрдореЛрд░реА)ред  рдЗрд╕рд▓рд┐рдП sbrk () рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдХреЛрдИ <i>рд╡рд╛рд╕реНрддрд╡рд┐рдХ</i> рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХреЛрд╢рд┐рд╢ рдХрд░рдирд╛ рджрд┐рд▓рдЪрд╕реНрдк рд╣реИред <br><br>  X86 рдкрд░ рд╣рдореЗрд╢рд╛ рдХреА рддрд░рд╣, рдЖрдкрдХрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдФрд░ рд╡рд┐рднрд╛рдЬрди рдХрдо рдореЗрдореЛрд░реА (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ 0x0100) рдореЗрдВ рд╣реИ, рдФрд░ рд╕реНрдЯреИрдХ рдКрдкрд░реА рдореЗрдореЛрд░реА рдореЗрдВ рд╣реИ (рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, 0xffff рдХреНрд╖реЗрддреНрд░ рдореЗрдВ)ред  рдпреВрдирд┐рдХреНрд╕ рдЬреИрд╕реА рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдкрд░, <code>sbrk()</code> рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдИ рдЧрдИ рдореЗрдореЛрд░реА рджреЛ рд╕реНрдерд╛рдиреЛрдВ рд╕реЗ рдЖрддреА рд╣реИ: <code>sbrk()</code> рдФрд░ <code>mmap()</code> ред  рдХреНрдпрд╛ <code>sbrk()</code> рдкреНрд░реЛрдЧреНрд░рд╛рдо / рдбреЗрдЯрд╛ рд╕реЗрдЧрдореЗрдВрдЯ рдХреЗ рдареАрдХ рдКрдкрд░ рдореЗрдореЛрд░реА рдЖрд╡рдВрдЯрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рд╕реНрдЯреИрдХ рдХреА рдУрд░ "рдЕрдк" рдмрдврд╝рд╛рддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдХреЙрд▓ <code>sbrk()</code> рдЗрд╕ рд╕реНрдерд╛рди рдХреЛ рдмрдврд╝рд╛рдПрдЧрд╛ (рдпрд╛ рдЗрд╕реЗ рдмрд┐рд▓реНрдХреБрд▓ рдЙрд╕реА рддрд░рд╣ рдЫреЛрдбрд╝ рджреЗрдЧрд╛)ред  рдпрд╣ рдореЗрдореЛрд░реА <code>malloc()</code> рдФрд░ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдкреНрд░рдмрдВрдзрд┐рдд рдХреА рдЬрд╛рдПрдЧреАред <br><br>  COM рдкреНрд░реЛрдЧреНрд░рд╛рдо рдореЗрдВ <code>sbrk()</code> рдХреЛ рдХреИрд╕реЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ <code>sbrk()</code> рдпрд╣рд╛рдВ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ <code>size_t</code> рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдПрдХ рдорд╛рдирдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдирд╣реАрдВ рд╣реИред <br><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> _heap; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *hbreak = &amp;_heap; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sbrk</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *ptr = hbreak; hbreak += size; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ptr; }</code> </pre> <br>  рдпрд╣ рдмрд╕ рдкреЙрдЗрдВрдЯрд░ рдХреЛ <code>_heap</code> рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рдЗрд╕реЗ рдмрдврд╝рд╛рддрд╛ рд╣реИред  рдереЛрдбрд╝рд╛ рдЪрд╛рд▓рд╛рдХ <code>sbrk()</code> рднреА рд╕рдВрд░реЗрдЦрдг рдХреЗ рд╕рд╛рде рд╕рд╛рд╡рдзрд╛рди рд░рд╣рдирд╛ рд╣реЛрдЧрд╛ред <br><br>  рдбреЙрд╕ рдбрд┐рдлреЗрдВрдбрд░ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рджреМрд░рд╛рди рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рдмрд╛рдд рд╣реБрдИред  рдореИрдВрдиреЗ (рдЧрд▓рдд рддрд░реАрдХреЗ рд╕реЗ) рдорд╛рдирд╛ рдХрд┐ рдореЗрд░реЗ <code>sbrk()</code> рд╕реЗ рдореЗрдореЛрд░реА рд░реАрд╕реЗрдЯ рд╣реЛ рдЧрдИ рдереАред  рддреЛ рдпрд╣ рдкрд╣рд▓реЗ рдЧреЗрдо рдХреЗ рдмрд╛рдж рдерд╛ред  рд╣рд╛рд▓рд╛рдБрдХрд┐, DOS рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХреЗ рдмреАрдЪ рдЗрд╕ рдореЗрдореЛрд░реА рдХреЛ рд░реАрд╕реЗрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдЬрдм рдореИрдВрдиреЗ рдлрд┐рд░ рд╕реЗ рдЦреЗрд▓ рд╢реБрд░реВ рдХрд┐рдпрд╛, рддреЛ <i>рдпрд╣ рдареАрдХ рдЙрд╕реА рддрд░рд╣ рд╕реЗ рдЬрд╛рд░реА рд░рд╣рд╛</i> , <i>рдЬрд╣рд╛рдВ рдореИрдВ рд░реБрдХрд╛ рдерд╛</i> , рдХреНрдпреЛрдВрдХрд┐ рд╕рдорд╛рди рд╕рд╛рдордЧреНрд░рд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдорд╛рди рдбреЗрдЯрд╛ рд╕рдВрд░рдЪрдирд╛рдПрдВ рдЬрдЧрд╣ рдореЗрдВ рднрд░реА рд╣реБрдИ рдереАрдВред  рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рд╕рдВрдпреЛрдЧ!  рдпрд╣ рдЗрд╕ рдПрдореНрдмреЗрдбреЗрдб рдкреНрд▓реЗрдЯрдлреЙрд░реНрдо рдХреЛ рдордЬрд╝реЗрджрд╛рд░ рдмрдирд╛рддрд╛ рд╣реИред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi412867/">https://habr.com/ru/post/hi412867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi412855/index.html">CSRF рднреЗрджреНрдпрддрд╛рдПрдБ рдЕрднреА рднреА рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╣реИрдВ</a></li>
<li><a href="../hi412859/index.html">рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдкреНрд░рд╛рдзрд┐рдХрд╛рд░реА рдФрд░ рдбреЛрдореЗрди рдХреЗ рдмрд┐рдирд╛ рд╡рд┐рдВрдбреЛрдЬ рдФрд░ рдбреЗрдЯрд╛ рдПрдиреНрдХреНрд░рд┐рдкреНрд╢рди рдореЗрдВ рджреЛ-рдХрд╛рд░рдХ рдкреНрд░рдорд╛рдгреАрдХрд░рдг</a></li>
<li><a href="../hi412861/index.html">рдбрдореА рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрде рдорд╛рдирдЪрд┐рддреНрд░ рдмрдирд╛рдирд╛</a></li>
<li><a href="../hi412863/index.html">рдбрд╛рдпрд▓реЙрдЧрдлреНрд▓реЙрд╡рд░ - рдпреИрдВрдбреЗрдХреНрд╕ рдРрд▓рд┐рд╕ рдХреЗ рд▓рд┐рдП Google рдбрд╛рдпрд▓реЙрдЧрдлрд╝реНрд▓реЛ</a></li>
<li><a href="../hi412865/index.html">Sony Xperia XZ2 рдореЗрдВ рдореЛрд╢рди рдЖрдИ рдХреИрдорд░рд╛ рдХреИрд╕реЗ рд╢реВрдЯ рдХрд░реЗрдВ</a></li>
<li><a href="../hi412869/index.html">рдЯрд┐рд╢реВ рдЗрдВрдЬреАрдирд┐рдпрд░рд┐рдВрдЧ рдФрд░ рдкреБрдирд░реНрдпреЛрдЬреА рдЪрд┐рдХрд┐рддреНрд╕рд╛ рдореЗрдВ рдПрдХ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдХреЗ рд╕рд╛рде рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░, рдкреНрд░реЛрдлреЗрд╕рд░ рддрд╛рд▓ рддрд╛рд▓ рджрд╡рд┐рд░</a></li>
<li><a href="../hi412871/index.html">рдПрдХреНрд▓реЗрдпрд░ - рдЬрд╛рд╡рд╛ рд╕реНрдкреНрд░рд┐рдВрдЧ рдбрд┐рдХреНрд▓реЗрд░реЗрд╢рди рд▓реЙрдЧрд┐рдВрдЧ рд▓рд╛рдЗрдмреНрд░реЗрд░реА</a></li>
<li><a href="../hi412873/index.html">рд╕рд╛рдзрд╛рд░рдг рд▓реИрдкрдЯреЙрдк рд╕реНрдкреАрдХрд░ рд╕реЗ рдзреНрд╡рдирд┐ рджреНрд╡рд╛рд░рд╛ рдЦрд░рд╛рдм рдХрд┐рдП рдЧрдП рд╣рд╛рд░реНрдб рдбреНрд░рд╛рдЗрд╡</a></li>
<li><a href="../hi412877/index.html">рд░реВрдереЗрдирд┐рдпрдо (рдЖрд░рдпреВ) - рдХрдорд░реЗ рдХреЗ рддрд╛рдкрдорд╛рди рдкрд░ рдлреЗрд░реЛрдореИрдЧреНрдиреЗрдЯрд┐рдХ рдЧреБрдгреЛрдВ рд╡рд╛рд▓рд╛ рдЪреМрдерд╛ рддрддреНрд╡</a></li>
<li><a href="../hi412879/index.html">рдЕрдВрдХ # 24: рдЖрдИрдЯреА рдкреНрд░рд╢рд┐рдХреНрд╖рдг - рдкреНрд░рдореБрдЦ рдХрдВрдкрдирд┐рдпреЛрдВ рд╕реЗ рд╡рд░реНрддрдорд╛рди рдореБрджреНрджреЗ рдФрд░ рдЪреБрдиреМрддрд┐рдпрд╛рдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>