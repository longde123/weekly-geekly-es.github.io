<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÉüèΩ üßöüèª üë®üèæ‚Äçü§ù‚Äçüë®üèº G√©n√©rateur de code ABAP en ligne ‚õπüèø üë¶üèº üß¢</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Souvent, lors du codage ABAP, une t√¢che typique survient - initialiser d'autres champs par les valeurs de certains champs de la table interne (s√©lecti...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>G√©n√©rateur de code ABAP en ligne</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426967/"> Souvent, lors du codage ABAP, une t√¢che typique survient - initialiser d'autres champs par les valeurs de certains champs de la table interne (s√©lectionner dans la table de base de donn√©es, en appelant FM, sous-routines).  Et le code dans ce cas est tr√®s simple en termes d'algorithme, mais c'est beaucoup.  J'ai toujours voulu r√©duire le temps consacr√© √† ces op√©rations de routine.  Et il a m√™me √©crit une m√©thode bas√©e sur la cr√©ation dynamique de programmes pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">s√©lectionner les valeurs de r√©f√©rence par leurs cl√©s dans les tables de la base de donn√©es</a> . <br><br>  Dans les commentaires signal√©s <br><br>  " <b>illisibilit√© du code</b> " est votre micro-langage que vous devez apprendre. <br>  " <b>appels dynamiques</b> " - <b>les appels dynamiques</b> ne sont pas les bienvenus, y compris dans ce cas le journal d'utilisation ne trouve pas de place pour utiliser les tables / champs correspondants. <br><br>  Comme alternative, je proposais toujours une option avec la g√©n√©ration automatique de code, mais seulement maintenant, j'ai apport√© cette chose √† un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">outil fini</a> .  Peu importe, s'il vous pla√Æt, sous le chat. <br><a name="habracut"></a><br>  L'id√©e est simple: il existe un ensemble de param√®tres par lesquels un code ABAP est g√©n√©r√© selon un mod√®le donn√©. <br><br>  Prenons un exemple simple: dans la table interne, mettez le nom du champ  par la valeur du champ .  Parlant dans le langage technique du d√©veloppeur: <i>dans la table interne, par la valeur du champ <b>BUKRS,</b> mettez la valeur du champ <b>BUTXT selon</b> la table de base de donn√©es <b>T001</b></i> . <br><br>  D√©claration simple en une seule phrase.  Mais pour r√©aliser cela, vous devez soit faire LOOP sur la table interne et SELECT SINGLE dans une boucle (ce qui est rapide, mais du point de vue de la vitesse, ce n'est pas tr√®s bienvenu, surtout s'il y a beaucoup de lignes dans la table interne), ou s√©lectionner des valeurs BUKRS uniques, une requ√™te dans la table de base de donn√©es T001, puis nous notons les valeurs correspondantes du champ BUTXT via READ TABLE.  Dans ce cas, le code sera plus optimal, mais son √©criture n'est pas si rapide, car ce code est d√©j√† beaucoup.  De plus, il n'y a rien de compliqu√© - un travail presque simple de "singe" sur la dactylographie. <br><br>  Et ici, un g√©n√©rateur automatique vient √† la rescousse, car un tel code a une forme passe-partout, ce qui signifie que son √©criture peut √™tre automatis√©e. <br><br>  Sp√©cifiez les param√®tres suivants: <br><br>  Table DB: <b>T001</b> <br>  domaines de communication: <b>BUKRS</b> <br>  champs initialis√©s: <b>BUTXT</b> <br><br><div class="spoiler">  <b class="spoiler_title">et obtenez le code g√©n√©r√© suivant</b> <div class="spoiler_text"><pre><code class="hljs xml">*--      T001 FORM values_from_tab_T001 USING "-- ()  uv_in_BUKRS TYPE any "--   uv_out_BUTXT TYPE any CHANGING "--    ct_table TYPE ANY TABLE . "--    ? CHECK NOT ( ct_table[] IS INITIAL ). "--     TYPES: BEGIN OF lty_item, BUKRS TYPE T001-BUKRS, BUTXT TYPE T001-BUTXT, END OF lty_item. DATA ls_item TYPE lty_item. DATA lt_item LIKE TABLE OF ls_item. FIELD-SYMBOLS <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ls_item</span></span></span><span class="hljs-tag">&gt;</span></span> LIKE LINE OF lt_item. FIELD-SYMBOLS <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ls_table</span></span></span><span class="hljs-tag">&gt;</span></span> TYPE any. FIELD-SYMBOLS <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUKRS</span></span></span><span class="hljs-tag">&gt;</span></span> TYPE any. FIELD-SYMBOLS <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUTXT</span></span></span><span class="hljs-tag">&gt;</span></span> TYPE any. "--    LOOP AT ct_table ASSIGNING <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ls_table</span></span></span><span class="hljs-tag">&gt;</span></span>. CLEAR ls_item. ASSIGN COMPONENT uv_in_BUKRS OF STRUCTURE <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ls_table</span></span></span><span class="hljs-tag">&gt;</span></span> TO <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUKRS</span></span></span><span class="hljs-tag">&gt;</span></span>. ls_item-BUKRS = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUKRS</span></span></span><span class="hljs-tag">&gt;</span></span>. APPEND ls_item TO lt_item. ENDLOOP. "--     SORT lt_item BY BUKRS. DELETE ADJACENT DUPLICATES FROM lt_item COMPARING BUKRS. "--     SELECT BUKRS BUTXT FROM T001 INTO TABLE lt_item FOR ALL ENTRIES IN lt_item WHERE BUKRS = lt_item-BUKRS . "--     SORT lt_item BY BUKRS. "--     LOOP AT ct_table ASSIGNING <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ls_table</span></span></span><span class="hljs-tag">&gt;</span></span>. "--    ASSIGN COMPONENT uv_in_BUKRS OF STRUCTURE <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ls_table</span></span></span><span class="hljs-tag">&gt;</span></span> TO <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUKRS</span></span></span><span class="hljs-tag">&gt;</span></span>. ls_item-BUKRS = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUKRS</span></span></span><span class="hljs-tag">&gt;</span></span>. "--    ASSIGN COMPONENT uv_out_BUTXT OF STRUCTURE <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ls_table</span></span></span><span class="hljs-tag">&gt;</span></span> TO <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUTXT</span></span></span><span class="hljs-tag">&gt;</span></span>. "--      READ TABLE lt_item ASSIGNING <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ls_item</span></span></span><span class="hljs-tag">&gt;</span></span> WITH KEY BUKRS = ls_item-BUKRS BINARY SEARCH. IF sy-subrc = 0. IF <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUTXT</span></span></span><span class="hljs-tag">&gt;</span></span> IS ASSIGNED. <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUTXT</span></span></span><span class="hljs-tag">&gt;</span></span> = <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ls_item</span></span></span><span class="hljs-tag">&gt;</span></span>-BUTXT. ENDIF. ELSE. IF <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUTXT</span></span></span><span class="hljs-tag">&gt;</span></span> IS ASSIGNED. CLEAR <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">lv_BUTXT</span></span></span><span class="hljs-tag">&gt;</span></span>. ENDIF. ENDIF. ENDLOOP. ENDFORM.</code> </pre> </div></div><br>  Il suffit maintenant d'appeler le sous-programme g√©n√©r√© dans votre programme <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">PERFORM</span></span> values_from_tab_T001 <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> <span class="hljs-string"><span class="hljs-string">'BUKRS'</span></span> <span class="hljs-string"><span class="hljs-string">'BUTXT'</span></span> CHANGING lt_TABLE.</code> </pre><br>  Consultez le code sur le site Web du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">g√©n√©rateur ABAP</a> <br>  Les noms des champs de la table interne et de la table interne elle-m√™me sont pass√©s en tant que param√®tres au sous-programme.  Apr√®s l'appel, le champ BUTXT aura la valeur souhait√©e. <br><br>  Les noms des champs de la table interne sont faits sous forme de param√®tres afin que le m√™me sous-programme puisse √™tre appel√© pour diff√©rents champs.  C'est-√†-dire  si vous avez deux champs BE dans la table interne (par exemple, BUKRS1 et BUKRS2), il vous suffit de g√©n√©rer un sous-programme et de l'appeler deux fois <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">PERFORM</span></span> values_from_tab_T001 <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> <span class="hljs-string"><span class="hljs-string">'BUKRS1'</span></span> <span class="hljs-string"><span class="hljs-string">'BUTXT1'</span></span> CHANGING lt_TABLE. <span class="hljs-keyword"><span class="hljs-keyword">PERFORM</span></span> values_from_tab_T001 <span class="hljs-keyword"><span class="hljs-keyword">USING</span></span> <span class="hljs-string"><span class="hljs-string">'BUKRS2'</span></span> <span class="hljs-string"><span class="hljs-string">'BUTXT1'</span></span> CHANGING lt_TABLE.</code> </pre><br>  Dans ce cas, la ¬´non-optimalit√©¬ª appara√Æt, car il y aura deux SELECT dans la table de base de donn√©es T001, bien que dans le cas id√©al, vous pouvez tout faire √† travers un seul.  Mais c'est le co√ªt de l'automatisation.  Il est peu probable que cela ralentisse consid√©rablement l'ex√©cution du programme, mais si n√©cessaire, vous pouvez toujours ¬´terminer¬ª le sous-programme pour vos besoins priv√©s. <br><br>  Vous pouvez initialiser plusieurs champs √† la fois, et dans certaines conditions, sp√©cifier des constantes (par exemple sy-langu, qui est souvent utilis√© lors du choix des textes).  Dans l'exemple standard, les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">noms</a> de l'UE sont s√©lectionn√©s conform√©ment au tableau T006A. <br><br>  Lors de la g√©n√©ration du code, un lien est √©galement cr√©√© par lequel l'exemple cr√©√© peut √™tre ouvert dans le navigateur. <br><br>  Actuellement, il existe plusieurs mod√®les dans le g√©n√©rateur: <br><br><ol><li>  <b>D√©finissez la structure [+ type de table]</b> - d√©finissez la structure + type de table + table de ce type + espace de travail de table + symbole de champ de la table.  Ce n'est pas toujours n√©cessaire, mais il est plus facile de supprimer celui g√©n√©r√© que de le taper manuellement </li><li>  <b>La suppression d'enregistrements en double de la table interne par champs</b> est un g√©n√©rateur tr√®s simple et en g√©n√©ral, un tel code peut √™tre √©crit manuellement, mais s'il y a beaucoup de champs, alors, √† mon avis, il est pr√©f√©rable d'utiliser ce mod√®le </li><li>  <b>S√©lectionnez des valeurs de r√©f√©rence dans la table de base de donn√©es</b> - le mod√®le d√©crit ci-dessus </li><li>  <b>S√©lectionnez des valeurs de r√©f√©rence</b> - le mod√®le vous permet de d√©finir des valeurs de champ via un appel √† FM, sous-programmes.  Dans ce cas, les appels sont mis en cache. </li><li>  <b>S√©lectionnez des valeurs de r√©f√©rence dans le domaine</b> - ce mod√®le n'a pas de param√®tres et a √©t√© ajout√© pour pouvoir simplement copier ce code dans votre programme </li></ol><br>  Je pense qu'une description d√©taill√©e du fonctionnement de chaque mod√®le n'a pas de sens, car il est plus facile de voir le r√©sultat de son travail sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site</a> .  Chaque mod√®le a des valeurs par d√©faut pour ses param√®tres et si vous √™tes un d√©veloppeur abap, vous comprendrez rapidement le code. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr426967/">https://habr.com/ru/post/fr426967/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr426957/index.html">Introduction aux serveurs WSGI: premi√®re partie</a></li>
<li><a href="../fr426959/index.html">Installer kubernetes via kubespray (stockage local, installer Elasticsearch + Fluentd + Kibana, prometheus)</a></li>
<li><a href="../fr426961/index.html">Comment Microsoft a r√©√©crit le compilateur C # en C # et l'a ouvert</a></li>
<li><a href="../fr426963/index.html">Les applications Flutter r√™vent-elles de widgets bas√©s sur une plateforme?</a></li>
<li><a href="../fr426965/index.html">Qu'adviendra-t-il de la gestion des erreurs en C ++ 2a</a></li>
<li><a href="../fr426969/index.html">Vigilant Lida: automatisation des tests de s√©curit√©</a></li>
<li><a href="../fr426971/index.html">Fatalisme dans la gestion des erreurs</a></li>
<li><a href="../fr426973/index.html">Sandwichs d'entreprise</a></li>
<li><a href="../fr426975/index.html">Joker 2018: l'impossible est possible</a></li>
<li><a href="../fr426977/index.html">LibreOffice: le cauchemar d'un comptable</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>