<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😕 🕔 🤽🏾 Mejora del rendimiento del sistema de videovigilancia y prevención de accidentes. 🕴🏼 🎅🏿 🚶🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Obviamente, es mejor prevenir la enfermedad que tratarla más tarde. 

 Con la construcción de sistemas de video, todo es exactamente igual. En lugar d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mejora del rendimiento del sistema de videovigilancia y prevención de accidentes.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/macroscop/blog/412791/"> Obviamente, es mejor prevenir la enfermedad que tratarla más tarde. <br><br>  Con la construcción de sistemas de video, todo es exactamente igual.  En lugar de buscar razones y resolver problemas con la visualización / grabación / archivo durante el uso, es mejor pensar un poco más y con cuidado en la etapa de diseño para evitar futuros problemas. <br><br>  Nuestro soporte técnico es activo, muy activo.  Ella aconseja, ayuda a configurar y, por supuesto, resuelve problemas en sistemas de video.  A menudo, estos problemas son visibles en el entorno del software, pero no están relacionados con Macroscop.  El sistema de video es de múltiples componentes, si algo se rompe o simplemente no funciona correctamente, el usuario no verá que alguna parte se ha deteriorado.  Verá que aparecieron imbéciles en video en tiempo real, y aparecieron "agujeros" en el archivo.  ¿Esto significa que el problema está en el software?  A menudo, la razón es completamente diferente. <br><br><img src="https://habrastorage.org/webt/4p/2l/d-/4p2ld-taaiydceuzg-kdpov88bm.jpeg"><br><a name="habracut"></a><br>  Debido al hecho de que las llamadas de soporte técnico de Macroscop (como se explicará más adelante) en el 40% de los casos no están relacionadas con el rendimiento del software, decidimos llevar a cabo un pequeño programa educativo sobre planificación y construcción de sistemas de video.  Y para decir por qué es importante no escatimar en tiempo y dinero en estas etapas, y qué sucederá si no lo hace.  También hablaremos de lo obvio.  Pero la experiencia muestra que <b>comprender y hacer son dos cosas diferentes</b> . <br><br>  Comencemos con cómo podría verse el problema.  Visualmente, una señal de que algo va mal en el sistema puede ser: <br><br><ol><li>  Falta de conexión a la cámara.  Simplemente no ve el video de la cámara en tiempo real y no recibe un archivo de él. </li><li>  Pantalla de video suave (sacudidas / aceleración / retraso). </li><li>  Lugares vacíos ("agujeros") en el archivo.  La grabación, al parecer, continuaba, pero no hay ningún video en el archivo. </li><li>  Artefactos.  En el video aparece lo que en realidad no era (siempre que las fuerzas de otro mundo no hayan contribuido a esto). </li></ol><br><img src="https://habrastorage.org/webt/-k/ho/n_/-khon_enrwhilupsa4ctfsjrqyo.jpeg"><br><br>  ¿Qué puede causar violaciones? <br><br><h2>  <i>Red</i> </h2><br>  Si el video no vino de la cámara al servidor, desde el servidor no fue al cliente o al almacenamiento, el canal de comunicación es el más frecuentemente culpable.  Puede que no sea lo suficientemente amplio, no lo suficientemente estable, no legible (no sabe cómo priorizar adecuadamente cuando hay mucha información diversa sobre él). <br><br>  Por lo tanto, lo primero a lo que debe prestar atención al principio es el ancho del futuro canal de comunicación.  <b>Se calcula de manera</b> simple: tomamos todas las cámaras del sistema futuro, determinamos cuántos Mbit de información enviará cada una de ellas por segundo (para esto necesitamos entender qué calidad de grabación se requiere: resolución, frecuencia, formato), tomamos en cuenta si el video se mostrará (de cuántas cámaras y cuántos monitores), hacemos un aumento del 10-15% en el tráfico técnico y entendemos dónde y qué ancho de banda se necesitará. <br><br>  Es mejor <b>dibujar un diagrama del</b> sistema futuro.  Esto se puede hacer, entre otras cosas, con la ayuda de programas especiales (Graphical Network Simulator 3, por ejemplo), que ayudarán con los cálculos y la identificación de "cuellos de botella" que requieren atención especial.  Esta es una herramienta simple y obvia, pero en la práctica, pocas personas la usan.  Especialmente entre instaladores principiantes. <br><br>  <b>Separe</b> la red de videovigilancia de la red de telefonía, Internet y cualquier otro sistema.  Para que el sistema de video que elimina la ofensa no pierda en la lucha por el tráfico con YouTube, que en ese mismo momento 10 empleados de su empresa decidieron mirar, debe asignar un canal separado para ello. <br><br>  Las redes se pueden dividir física y lógicamente.  En el primer caso, instala equipos separados y coloca cables separados, en el segundo, selecciona conmutadores con soporte VLAN.  En la práctica, desde el punto de vista de la configuración, es más fácil separar físicamente si existe la oportunidad de incurrir en costos adicionales. <br><br>  Es importante calcular la <b>potencia al elegir equipos de red</b> .  Un fabricante puede reclamar un mayor ancho de banda de los puertos del conmutador, pero esto no garantiza que el procesador del dispositivo de red resistirá todo este volumen de datos. <br><br>  La red no solo debe ser pensada correctamente, sino también <b>ensamblada de manera eficiente</b> .  Se trata de lo banal: el usuario tiene un cable de conexión muy comprimido y esto provoca una pérdida de conexión o interrupciones en el archivo.  No es posible encontrar este problema no tan rápido, porque, como regla, lo último que se debe verificar es el rendimiento de bagatelas como los cables de conexión o las tomas de enrutador. <br><br><h2>  <i>Sistemas de almacenamiento de datos</i> </h2><br>  Es importante no olvidar calcular el <b>ancho de canal</b> necesario entre el servidor y el almacenamiento conectado a la red.  A menudo se pasa por alto. <br><br>  Para que los sistemas de almacenamiento puedan hacer frente a la grabación de la cantidad entrante de información del sistema de video, es necesario calcular la <b>cantidad de memoria</b> requerida, así como evaluar <b>IOPS</b> (un parámetro responsable del número de operaciones de entrada-salida realizadas por el sistema de almacenamiento por segundo).  Esto se puede hacer usando programas especiales (Iometer, IOzone, FIO, CrystalDiskMark). <br><br>  Si el sistema es multiservidor, recomendamos que en lugar de un almacenamiento de gran capacidad, elija un volumen ligeramente más pequeño para evitar una carga excesiva. <br><br><h2>  <i>Antivirus y cortafuegos</i> </h2><br>  Como regla, el firewall y el software antivirus afectan el funcionamiento del sistema de video, ya que interfieren con el tráfico de la red.  También puede ser Windows Defender, Firewall de Windows, Firewall de hardware, etc. <br><br>  Puede deshabilitar el software antivirus, pero simplemente excluir un firewall sin cambiar la configuración general del sistema cuando ya está construido (especialmente cuando se trata de un sistema grande y complejo).  Tenemos que reconstruir toda la red.  Por lo tanto, es anticipado ocuparse de <b>deshabilitar o excluir</b> del sistema de videovigilancia todo software y dispositivo que pueda limitar la recepción o transmisión de datos.  A menudo, incluso establecer "excepciones" no limita completamente el acceso de tales soluciones al tráfico de video. <br><br><h2>  <i>Equipo</i> </h2><br>  Además de lo obvio (cámaras, servidores, el almacenamiento debería estar funcionando) hay algunos puntos en la configuración del hardware, que también es conveniente tener en cuenta.  Asegúrese de verificar que sus computadoras <b>no entren en modo de ahorro de energía</b> .  De lo contrario, el sistema funcionará, pero la red tendrá baja prioridad, por lo que es posible que algunos de los datos de las cámaras simplemente no lleguen.  Además, será muy difícil encontrar la causa, porque tan pronto como comiences a buscar, todo saldrá milagrosamente. <br><br>  Al elegir cámaras IP en un proyecto, preste atención al protocolo de transferencia de datos con el que trabajan.  Para minimizar las pérdidas, elija una conexión <b>TCP</b> (bueno, es mucho más común que otras).  Luego, en caso de errores de red, se producirá una solicitud repetida de información de la cámara y, con una alta probabilidad, se levantará con un ligero retraso, que el usuario no notará. <br><br>  A veces surgen problemas porque el usuario solicita <b>varias transmisiones</b> de la cámara a la vez, y la cámara no hace frente a esto.  Los fabricantes rara vez dan sus recomendaciones con respecto al número de flujos, por lo que aquí debe verificarlo empíricamente. <br>  Es posible que la cámara instalada en sí misma no funcione correctamente y envíe video con artefactos al servidor.  Para verificar que el problema está en la cámara, y no en el software del sistema de video, puede, por ejemplo, usar un reproductor VLC: si se observan artefactos en el reproductor, la razón debe buscarse en la cámara misma.  Solo primero debe asegurarse de que el sistema de video y el reproductor de video se transmitan utilizando el mismo protocolo. <br><br>  Si no puede proporcionar un canal de comunicación suficientemente amplio, puede <b>reducir la tasa</b> de <b>bits</b> en las cámaras.  Para hacer esto, en la configuración, reduzca la velocidad de cuadros o la calidad de grabación, use cámaras con formatos de compresión modernos (h.264 +, h.265 +), tecnología zipstream.  Además, la gran mayoría tiene la oportunidad de usar una tasa de bits variable: cuando no hay movimiento en el cuadro, se transmite menos información, cuando comienza el movimiento, aumentará la calidad de grabación y la cantidad de datos. <br><br><h2>  <i>¿Cómo encontrar un problema?</i> </h2><br>  Sin embargo, si surgió un problema, los siguientes pasos pueden ser una prioridad para diagnosticar la causa: <br><br><ol><li>  Vaya al administrador de tareas y verifique la carga general del sistema. </li><li>  Verifique la condición física del equipo (si la alimentación se apagó, si alguien rompió el cable, si las cámaras funcionan, etc.). </li><li>  Comprueba si el antivirus está desactivado. </li><li>  Aproveche <b>las</b> funciones de <b>autodiagnóstico de</b> Macroscop.  El autodiagnóstico muestra mensajes de error y ofrece recomendaciones sobre cómo resolverlos usted mismo. </li></ol><br>  Todo esto lo puede hacer el administrador del sistema sin la participación de especialistas externos. <br><br>  Si no encuentra el motivo y no puede resolver el problema usted mismo, debe ponerse en contacto con el soporte técnico.  Lo primero que verificamos cuando tratamos con el problema de demoras, artefactos o pérdida de conexión es la red entre la cámara y el servidor.  Para hacer esto, utilizamos programas especiales (Iperf), así como una prueba de ping.  Solo hacemos ping a un paquete de datos grande, ya que el video es 99% más que el volumen de datos máximo permitido de un paquete estándar (MTU). <br><br>  <i>Ejemplo</i> : ping -l 5000 -t (ping infinito con un paquete de 5000 bytes). <br><br>  Enviamos un paquete de datos, lo recuperamos y calculamos la pérdida.  Y generalmente son inaceptables.  Incluso el 1% de los fotogramas perdidos provoca varios efectos negativos: desde artefactos, pérdidas en el archivo, sacudidas en tiempo real hasta una desconexión completa de la cámara. <br>  Del mismo modo, se puede diagnosticar un problema de canal de comunicación entre el servidor y las computadoras cliente. <br><br>  Macroscop también registra el funcionamiento del sistema, y ​​los registros ayudan mucho a reducir el área de búsqueda de problemas para nuestros especialistas.  Gracias a las funciones de diagnóstico, el software identifica problemas con la violación de la secuencia de paquetes enviados por la cámara al servidor, el acceso al servidor, el subsistema de decodificación, la autorización, el lanzamiento de servicios y la grabación. <br><br>  Estas son solo algunas opciones para verificar el estado y encontrar las fuentes del problema, pero en la mayoría de los casos, estas herramientas son suficientes para diagnosticar la causa.  De lo contrario, comienza un estudio individual y un control minucioso. <br><br><h2>  <i>Pensar de antemano</i> </h2><br>  Como en muchos otros, en el caso de un sistema de video, se pueden evitar varios problemas simplemente estando seguros en la etapa de diseño.  Calcule los parámetros de red de antemano, seleccione el equipo un poco más productivo de lo que requieren los cálculos, compre consumibles de alta calidad y preste atención a su instalación, escuche las recomendaciones de los fabricantes de equipos y desarrolladores de software que elija, póngase en contacto con el soporte técnico o los ingenieros de preventa si permanecen preguntas o dudas <br><br>  En general, cuanta más atención preste al sistema de video al principio, menos lo requerirá durante muchos años de uso. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es412791/">https://habr.com/ru/post/es412791/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es412781/index.html">El fanático de NES ha permitido lanzar juegos de SNES en la consola</a></li>
<li><a href="../es412783/index.html">Instalación del proxy MTProto Telegram desde la fuente en Centos 7</a></li>
<li><a href="../es412785/index.html">Master of Management y Freelancer. La historia en tres partes.</a></li>
<li><a href="../es412787/index.html">Incrustar Git en un sistema de desarrollo empresarial</a></li>
<li><a href="../es412789/index.html">"Ayuda en el trabajo": cómo hacer que los robots de chat sean más inteligentes</a></li>
<li><a href="../es412793/index.html">Mass transit, Saga y RabbitMQ para implementar un administrador de procesos</a></li>
<li><a href="../es412795/index.html">Y saquemos conclusiones de la discusión del artículo "¿Qué tiene de malo el regreso de Geektimes a Habr?"</a></li>
<li><a href="../es412797/index.html">Sobre los peligros de CDN, servicios y fuentes de Google</a></li>
<li><a href="../es412799/index.html">Siempre en contacto: Mango Talker - messenger y softphone</a></li>
<li><a href="../es412801/index.html">Estudio: los piratas informáticos roban millones de dólares debido a la baja seguridad de los intercambios de criptomonedas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>