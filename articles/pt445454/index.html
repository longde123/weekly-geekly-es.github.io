<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöª üë©üèº‚ÄçüöÄ üë©‚Äç‚öñÔ∏è Raspberry Pi Zero dentro da tecnologia ativa estrela ativa 40 Braille Display ü§õüèº üé• üçö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O autor colocou o Raspberry Pi Zero, um apito Bluetooth e um cabo dentro de seu novo monitor Braille Handy Tech Active Star 40. Uma porta USB integrad...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Raspberry Pi Zero dentro da tecnologia ativa estrela ativa 40 Braille Display</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445454/"><img src="https://habrastorage.org/webt/5i/vv/tl/5ivvtlnh3-qi8x3gtk0kzgczlt4.jpeg"><br><br>  O autor colocou o Raspberry Pi Zero, um apito Bluetooth e um cabo dentro de seu novo monitor Braille Handy Tech Active Star 40. Uma porta USB integrada fornece energia.  O resultado foi um computador n√£o monitor independente no ARM com o sistema operacional Linux, equipado com um teclado e uma tela em braille.  Voc√™ pode carreg√°-lo / aliment√°-lo via USB, incl.  de um banco de energia ou carregador solar.  Portanto, ele pode dispensar a energia da rede el√©trica n√£o por v√°rias horas, mas por v√°rios dias. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/so/yo/ky/soyokywncc6nvduroz7wnbngtly.jpeg"><br><br><h1>  Diferencia√ß√£o dimensional de telas em braille </h1><br>  Primeiro de tudo, eles diferem no comprimento da string.  Dispositivos 60 e mais familiares s√£o bons quando se trabalha com um computador desktop, 40 dispositivos s√£o convenientes para transportar com um laptop.  Agora, existem displays Braille conectados a smartphones e tablets, com um comprimento de string de 14 ou 18 familiaridades. <br><br>  No passado, as telas em braille eram bastante enormes.  Os 40 familiares, por exemplo, tinham as dimens√µes e o peso de um laptop de 13 polegadas.  Agora, com a mesma familiaridade, eles s√£o miniatura o suficiente para colocar uma tela na frente do laptop, em vez de um laptop na tela. <br><br>  √â claro que isso √© melhor, mas ainda n√£o √© muito conveniente manter dois dispositivos separados no seu colo.  Quando voc√™ trabalha na mesa, n√£o h√° reclama√ß√µes, mas vale lembrar que o laptop √© chamado de laptop de uma maneira diferente e tente justificar seu nome, pois a exibi√ß√£o em miniatura de 40 lugares √© ainda menos conveniente. <br><br>  Portanto, o autor aguardou o lan√ßamento do novo modelo h√° muito prometido na s√©rie Handy Tech Star.  Em 2002, o modelo Handy Tech Braille Star 40 anterior foi lan√ßado, onde a √°rea do corpo √© suficiente para colocar um laptop em cima.  E se n√£o encaixar, √© fornecido um suporte retr√°til.  Agora, este modelo √© substitu√≠do pelo Active Star 40, √© quase o mesmo, mas com componentes eletr√¥nicos atualizados. <br><br><img src="https://habrastorage.org/webt/mx/tx/ba/mxtxbaqpjfxzn_j_utlp5i8nxom.jpeg"><br><br>  E o suporte retr√°til permaneceu: <br><br><img src="https://habrastorage.org/webt/6-/ds/hq/6-dshqxvtaajiaqqddsv9jnyqaa.jpeg"><br><br>  Mas a coisa mais conveniente da novidade √© um recesso aproximadamente do tamanho de um smartphone (consulte KDPV).  Ele abre quando a plataforma se move para tr√°s.  Acabou sendo inconveniente manter o smartphone l√°, mas de alguma forma voc√™ precisa usar o compartimento vazio, dentro do qual at√© uma sa√≠da de energia √© fornecida. <br><br>  A primeira coisa que o autor inventou foi colocar o Raspberry Pi l√°, mas quando a tela foi comprada, descobriu-se que, com a "framboesa", o suporte, que fecha o compartimento, n√£o desliza.  Agora, se a placa fosse apenas 3 mm mais fina ... <br><br>  Mas um colega falou sobre o lan√ßamento do Raspberry Pi Zero, que era t√£o pequeno que dois cabiam no compartimento ... ou talvez at√© tr√™s.  Foi imediatamente encomendado juntamente com um cart√£o de mem√≥ria de 64 GB, Bluetooth, um apito e um cabo Micro USB.  Alguns dias depois, tudo isso chegou e amigos avistados ajudaram o autor a preparar um mapa.  Tudo imediatamente funcionou como deveria. <br><br><h1>  O que foi feito para isso </h1><br>  Na parte traseira do Handy Tech Active Star 40 existem duas portas USB para dispositivos como teclados.  Um pequeno teclado magneticamente conectado est√° inclu√≠do.  Quando o teclado est√° conectado e o pr√≥prio monitor funciona via Bluetooth, o computador tamb√©m o reconhece como teclado Bluetooth. <br><br>  Assim, se voc√™ conectar um "apito" Bluetooth ao Raspberry Pi Zero colocado no compartimento do smartphone, ele poder√° se comunicar com a tela Braille via Bluetooth usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BRLTTY</a> , e se voc√™ tamb√©m conectar um teclado √† tela, o "Malinka" funcionar√° e com ela. <br><br>  Mas isso n√£o √© tudo.  A pr√≥pria Malinka, por sua vez, pode acessar a Internet via Bluetooth PAN a partir de qualquer dispositivo que a suporte.  O autor configurou seu smartphone e computadores de acordo em casa e no trabalho, mas no futuro ele planeja adaptar mais uma ‚Äúframboesa‚Äù para isso - uma cl√°ssica, n√£o a Zero, conectada √† Ethernet e outro ‚Äúapito‚Äù Bluetooth. <br><br><h1>  BlueZ 5 e PAN </h1><br>  A maneira de configurar um PAN usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">BlueZ</a> n√£o era √≥bvia.  O autor encontrou o script pyhton bt-pan (veja abaixo) que permite configurar o PAN sem uma GUI. <br><br>  Com ele, voc√™ pode configurar o servidor e o cliente.  Ap√≥s receber o comando D-Bus apropriado ao trabalhar no modo cliente, ele cria um novo dispositivo de rede bnep0 imediatamente ap√≥s estabelecer uma conex√£o com o servidor.  Normalmente, o DHCP √© usado para atribuir um endere√ßo IP a essa interface.  No modo de servidor, o BlueZ requer o nome do dispositivo de ponte ao qual ele pode ser adicionado pelo escravo para conectar cada cliente.  Configurar o endere√ßo do dispositivo de ponte e iniciar o servidor DHCP mais a m√°scara de IP na ponte geralmente √© tudo o que √© necess√°rio. <br><br><h1>  Ponto de acesso PAN Bluetooth com Systemd </h1><br>  Para configurar a ponte, o autor aplicou systemd-networkd: <br><br>  Arquivo /etc/systemd/network/pan.netdev <br><br><pre><code class="plaintext hljs">[NetDev] Name=pan Kind=bridge ForwardDelaySec=0</code> </pre> <br>  Arquivo /etc/systemd/network/pan.network <br><br><pre> <code class="plaintext hljs">[Match] Name=pan [Network] Address=0.0.0.0/24 DHCPServer=yes IPMasquerade=yes</code> </pre> <br>  Agora voc√™ precisa for√ßar o BlueZ a configurar o perfil NAP.  Descobriu-se que os utilit√°rios regulares do BlueZ 5.36 n√£o podem ser feitos.  Se o autor estiver errado, corrija-o: mlang (sabe como mover as orelhas) cego (√†s vezes acesso e quantum) guru <br><br>  Mas ele encontrou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um post no blog</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um script Python</a> para fazer as chamadas necess√°rias para o D-Bus. <br><br>  Por conveni√™ncia, o autor usou o servi√ßo Systemd para executar o script e verificar a resolu√ß√£o da depend√™ncia. <br><br>  Arquivo /etc/systemd/system/pan.service <br><br><pre> <code class="plaintext hljs">[Unit] Description=Bluetooth Personal Area Network After=bluetooth.service systemd-networkd.service Requires=systemd-networkd.service PartOf=bluetooth.service [Service] Type=notify ExecStart=/usr/local/sbin/pan [Install] WantedBy=bluetooth.target</code> </pre> <br>  Arquivo / usr / local / sbin / pan <br><br><pre> <code class="plaintext hljs">#!/bin/sh # Ugly hack to work around #787480 iptables -F iptables -t nat -F iptables -t mangle -F iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE exec /usr/local/sbin/bt-pan --systemd --debug server pan</code> </pre> <br>  O segundo arquivo n√£o seria necess√°rio se o Debian tivesse suporte para IPMasquerade = (veja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="># 787480</a> ). <br><br>  Depois de executar os <i>comandos systemctl daemon-reload</i> e <i>systemctl restart systemd-networkd,</i> voc√™ pode iniciar o Bluetooth PAN com o comando <i>systemctl start pan</i> <br><br><h1>  Cliente PAN Bluetooth usando Systemd </h1><br>  O lado do cliente tamb√©m √© f√°cil de configurar usando o Systemd. <br><br>  Arquivo /etc/systemd/network/pan-client.network <br><br><pre> <code class="plaintext hljs">[Match] Name=bnep* [Network] DHCP=yes</code> </pre> <br>  Arquivo /etc/systemd/system/pan@.service <br><br><pre> <code class="plaintext hljs">[Unit] Description=Bluetooth Personal Area Network client [Service] Type=notify ExecStart=/usr/local/sbin/bt-pan --debug --systemd client %I --wait</code> </pre> <br>  Agora, depois de reiniciar a configura√ß√£o, voc√™ pode conectar-se ao ponto de acesso Bluetooth especificado, como este: <br><br><pre> <code class="plaintext hljs">systemctl start pan@00:11:22:33:44:55</code> </pre> <br><h1>  Emparelhamento de linha de comando </h1><br>  Obviamente, o servidor e os clientes devem ser configurados ap√≥s o emparelhamento via Bluetooth.  No servidor, voc√™ precisa executar bluetoothctl e dar o comando: <br><br><pre> <code class="plaintext hljs">power on agent on default-agent scan on scan off pair XX:XX:XX:XX:XX:XX trust XX:XX:XX:XX:XX:XX</code> </pre> <br>  Ap√≥s iniciar a verifica√ß√£o, aguarde alguns segundos at√© que o dispositivo necess√°rio seja exibido na lista.  Anote o endere√ßo dele e use-o emitindo o comando pair e, se necess√°rio, o comando trust. <br><br>  O cliente deve fazer o mesmo, mas o comando trust n√£o ser√° necess√°rio com certeza.  O servidor precisa aceitar a conex√£o no perfil NAP sem confirma√ß√£o manual do usu√°rio. <br><br>  O autor n√£o tem certeza se esta √© a sequ√™ncia ideal de comandos.  Talvez tudo o que seja necess√°rio seja emparelhar o cliente com o servidor e executar o comando trust no servidor, mas ele ainda n√£o o tentou. <br><br><h1>  Habilitando o perfil Bluetooth HID </h1><br>  √â necess√°rio que o "Malinka" reconhe√ßa o teclado conectado ao monitor em Braille por um fio e que j√° seja encaminhado pelo pr√≥prio monitor via Bluetooth.  Isso √© feito da mesma maneira, somente em vez de <i>usar o agente,</i> voc√™ precisa fornecer o comando <i>KeyboardOnly</i> do <i>agente</i> , e o bluetoothctl encontrar√° um dispositivo com um perfil HID. <br><br><h1>  Mas configurar o Bluetooth atrav√©s da linha de comando √© um pouco complicado </h1><br>  Embora o autor tenha conseguido configurar tudo, ele entende que configurar o BlueZ atrav√©s da linha de comando √© inconveniente.  A princ√≠pio, ele pensou que os agentes eram necess√°rios apenas para inserir c√≥digos PIN, mas, por exemplo, para ativar o perfil HID, era necess√°rio digitar ‚Äúagent KeyboardOnly‚Äù.  Surpreendentemente, para iniciar o Bluetooth PAN, voc√™ precisa escalar os reposit√≥rios em busca do script desejado.  Ele lembra que na vers√£o anterior do BlueZ havia uma ferramenta pronta para isso - onde ele fez isso no BlueZ 5?  De repente, uma nova solu√ß√£o apareceu, desconhecida para o autor, mas deitada na superf√≠cie? <br><br><h1>  Desempenho </h1><br>  A taxa de transfer√™ncia de dados foi de aproximadamente 120 kbps, o que √© suficiente.  O processador ARM de 1 GHz √© muito r√°pido para a interface da linha de comandos.  O autor ainda planeja usar principalmente ssh e emacs no dispositivo. <br><br><h1>  Fontes de console e resolu√ß√£o de tela </h1><br>  A resolu√ß√£o de tela padr√£o usada pelo buffer de quadros no Raspberry Pi Zero √© bastante estranha: o fbset relata que s√£o 656x416 pixels (√© claro, o monitor n√£o est√° conectado).  Com uma fonte de console de 8x16, foram obtidos 82 caracteres por linha e 26 linhas. <br><br>  √â inconveniente trabalhar com uma tela Braille de 40 caracteres neste modo.  Al√©m disso, o autor gostaria que os caracteres Unicode fossem exibidos em Braille.  Felizmente, o Linux suporta 512 caracteres e, na maioria das fontes de console, existem 256. Com a instala√ß√£o do console, voc√™ pode usar duas fontes de 256 caracteres juntas.  O autor adicionou as seguintes linhas ao arquivo / etc / default / console-setup: <br><br><pre> <code class="plaintext hljs">SCREEN_WIDTH=80 SCREEN_HEIGHT=25 FONT="Lat15-Terminus16.psf.gz brl-16x8.psf"</code> </pre> <br>  Nota: para que a fonte brl-16x8.psf fique dispon√≠vel, √© necess√°rio instalar o console-braille. <br><br><h1>  O que vem a seguir? </h1><br>  H√° um conector de 3,5 mm na tela Braille, mas o autor n√£o conhece os adaptadores para remover o √°udio do Mini-HDMI.  O autor n√£o conseguiu usar a placa de som embutida no "raspberry" (estranho, o tradutor tinha certeza de que n√£o havia nenhuma no Zero, mas existem maneiras de emitir som PWM para o GPIO).  Ele planeja usar um hub USB-OTG e conectar uma placa externa e emitir o som para o alto-falante embutido no monitor Braille.  Por alguma raz√£o, duas placas externas n√£o funcionaram, agora ele est√° procurando um dispositivo semelhante em outro chipset. <br><br>  Tamb√©m √© inconveniente desativar manualmente a "framboesa", aguardar alguns segundos e desligar a tela em braille.  E tudo porque, quando desconecta, remove a energia do conector no compartimento.  O autor planeja colocar uma pequena bateria reserva no compartimento e, atrav√©s do GPIO, informar o "framboesa" sobre como desligar a tela para que ela comece a concluir o trabalho.  Tal UPS em miniatura. <br><br><h1>  Imagem do sistema </h1><br>  Se voc√™ tem a mesma tela em braille e deseja fazer o mesmo, o autor est√° pronto para fornecer uma imagem pronta do sistema (com base no Raspbian Stretch).  Escreva para ele sobre isso no endere√ßo acima.  Se houver muitas pessoas dispostas, √© poss√≠vel produzir conjuntos que incluam tudo o que voc√™ precisa para essa altera√ß√£o. <br><br><h1>  Agradecimentos </h1><br>  Agradecemos a Dave Mielke pela revis√£o do texto. <br><br>  Agradecimentos a Simon Kainz pela ilustra√ß√£o fotogr√°fica. <br><br>  Agradecemos aos colegas da Universidade T√©cnica de Graz pela r√°pida introdu√ß√£o do autor ao mundo do Raspberry Pi. <br><br>  PS <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O primeiro tweet</a> do autor sobre este t√≥pico (n√£o abre - tradutor) foi feito apenas cinco dias antes da publica√ß√£o do original deste artigo, e podemos assumir que, com exce√ß√£o de problemas de som, a tarefa foi praticamente resolvida.  A prop√≥sito, o autor editou a vers√£o final do texto a partir da "tela Braille auto-suficiente" feita por ele, conectando-a via SSH ao computador dom√©stico. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt445454/">https://habr.com/ru/post/pt445454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt445444/index.html">Atualiza√ß√£o de m√≥dulos solares de alto desempenho da REC e Trina (Solar)</a></li>
<li><a href="../pt445446/index.html">Como usamos a replica√ß√£o adiada para recupera√ß√£o de desastres com o PostgreSQL</a></li>
<li><a href="../pt445448/index.html">Configurando o recebimento autom√°tico de certificados letsencrypt usando o docker no linux</a></li>
<li><a href="../pt445450/index.html">Extens√£o do navegador para toster.ru</a></li>
<li><a href="../pt445452/index.html">Reposit√≥rios √∫teis com Eloquent?</a></li>
<li><a href="../pt445456/index.html">Pesquise 1 TB / s</a></li>
<li><a href="../pt445458/index.html">A Electronic Arts lidar√° com 350 funcion√°rios e "reduzir√° sua presen√ßa" na R√∫ssia</a></li>
<li><a href="../pt445460/index.html">Interatividade sem gadgets</a></li>
<li><a href="../pt445464/index.html">Diminui√ß√£o no tamanho da amostra de dados experimentais sem perda de informa√ß√µes</a></li>
<li><a href="../pt445466/index.html">Parab√©ns Imagine Final EMEA Regional Champions Cup: Team Finderr do Reino Unido! Time russo √© terceiro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>