<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëêüèΩ üíÖüèº üçõ DEFCON 21. La conferencia DNS puede ser peligrosa para su salud. Parte 1 üôç üë∏üèø üíÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mi nombre es Rob Stackle, soy consultor de seguridad de Phoenix, Arizona, y trabajo principalmente como pentester. He estado participando en las confe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DEFCON 21. La conferencia DNS puede ser peligrosa para su salud. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/430724/"> Mi nombre es Rob Stackle, soy consultor de seguridad de Phoenix, Arizona, y trabajo principalmente como pentester.  He estado participando en las conferencias de DefCon desde 1996, soy aficionado a la fotograf√≠a a gran altitud, y este fin de semana fue el und√©cimo aniversario de nuestra boda.  Quiero agradecer a mi incre√≠ble y comprensiva esposa Linda, que no esperaba que mi participaci√≥n en DefCon significara que cada a√±o me ver√≠a obligado a celebrar nuestro aniversario de bodas en Las Vegas, lo cual lo lamento mucho. <br><br><img src="https://habrastorage.org/webt/gh/iu/mb/ghiumbdk-zkg1rtasuz93unhkz8.jpeg"><br><br>  Voy a hablar con usted sobre varias cosas relacionadas con la investigaci√≥n en las que he estado trabajando durante los √∫ltimos a√±os.  Est√°n unidos por un tema com√∫n: si no controla su tr√°fico DNS y no comprende lo que sucede all√≠, cuando todo est√° en orden, entonces probablemente no prestar√° atenci√≥n cuando empiecen a suceder cosas malas.  "Viol√©" el DNS durante varios a√±os y este siempre ha sido uno de mis vectores de ataque favoritos.  Puede gastar una fortuna en fortalecer el per√≠metro de la red, pero si puedo obtener el control de uno de sus dispositivos, cr√©ame, su juego ha terminado. <a name="habracut"></a><br><br>  La ausencia de vulnerabilidades en el mercado para detectar configuraciones incorrectas siempre me da la oportunidad de "poner mi pie en la puerta".  Hoy discutiremos varios temas en los que hablar√© sobre mis aventuras con DNS y mis trucos sobre personas relacionadas con DNS. <br><br>  Estos temas est√°n dedicados a malinterpretar el comportamiento del DNS por parte de los usuarios finales de la red, hablar√© un poco sobre las personas que no han registrado sus dominios y sobre el pirateo de dominios. <br><br>  En las conferencias de Black Hat y DefCon en 2011, Artyom Daineberg habl√≥ sobre lo que llam√≥ ponerse en cuclillas, o "dar la vuelta".  Aquellos que no est√©n familiarizados con este estudio, pero que est√©n interesados ‚Äã‚Äãen este problema en el DNS de dominios populares, pueden descargar los materiales de su presentaci√≥n utilizando los enlaces provistos en esta diapositiva. <br><br><img src="https://habrastorage.org/webt/k6/xn/hb/k6xnhbvdnrhqjf77lhaplvwfq0u.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">P√°gina del proyecto</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Presentaci√≥n en video</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Diapositivas</a> <br><br>  Cuando le√≠ el anuncio de su discurso, publicado incluso antes del informe sobre Black Hat, inmediatamente me interes√© en c√≥mo se puede usar para mis propios fines.  Sin entrar en detalles, explicar√© qu√© es la posici√≥n en cuclillas, por qu√© sucede y qu√© afecta.  Le mostrar√© algunos ejemplos del riesgo de voltear accidentalmente un poco en la memoria cuando 1 se convierte en 0 y viceversa.  Las siguientes diapositivas muestran c√≥mo se ve esto como un ejemplo de una l√≠nea en la memoria que muestra un nombre de dominio. <br><br><img src="https://habrastorage.org/webt/2n/po/yp/2npoypk5v5tzpcgbmdsv-usjfne.jpeg"><br><br>  En el medio de dicha l√≠nea, la unidad se convierte en cero.  Artyom investig√≥ el fen√≥meno en el que un error de un solo bit en la parte correcta de la memoria en el momento correcto oblig√≥ al cliente a solicitar un nombre de dominio completamente leg√≠timo pero incorrecto. <br><br>  Se habl√≥ mucho sobre la probabilidad y las causas de tal error, pero comenc√© a estudiar todas las formas que permiten que este error se use con fines maliciosos.  Por lo tanto, la ocupaci√≥n de DNS le permite distorsionar los nombres de dominio, luego registrar estos dominios "incorrectos" y enviarles las solicitudes de los usuarios. <br><br>  La siguiente diapositiva muestra que, como resultado de una posici√≥n en cuclillas de bits del nombre de dominio de Google, cuando un prot√≥n de alta energ√≠a en la memoria "golpea" 1, lo que significa la letra g, lo convierte en 0, lo que significa la letra f, y como resultado, el usuario es redirigido a goofle.com . <br><br><img src="https://habrastorage.org/webt/mg/-i/dr/mg-idr_v9xmgo_s4tknxy-tnia0.jpeg"><br><br>  Por lo tanto, su navegador lo redirigir√° completamente a otro sitio y con gusto recoger√° la respuesta por usted.  Al mismo tiempo, DNS SEC no podr√° ayudarlo de ninguna manera y, de hecho, hay muy pocas oportunidades para evitar este error de una manera completamente invisible, excepto por el uso de la memoria ECC, que reconoce y corrige autom√°ticamente los errores de bits. <br><br>  Sin embargo, este tipo de memoria no es muy com√∫n, e incluso si us√≥ ECC, todav√≠a hay muchos lugares en los que puede producirse la ocupaci√≥n de bits y donde la memoria ECC nunca se usa, por ejemplo, en una tarjeta de red o en la memoria cach√© DRAM de un disco duro. <br><br>  Deineberg describi√≥ en detalle las causas del problema, pero en general se puede decir que ocurren errores de memoria, algunas veces da√±an la memoria y otras tienen un efecto en el DNS.  B√°sicamente, el "giro" de un bit se debe a da√±os f√≠sicos en la memoria, sobrecalentamiento, problemas el√©ctricos, exposici√≥n a la radiaci√≥n e incluso radiaci√≥n c√≥smica. <br><br>  La presentaci√≥n se ve interrumpida por la aparici√≥n en el escenario de los organizadores de la DefCon, que felicitan al orador y a su esposa Linda, quien est√° presente en la conferencia por primera vez, en el und√©cimo aniversario de bodas.  Robert les agradece las felicitaciones y contin√∫a la presentaci√≥n. <br>  La radiaci√≥n c√≥smica es un factor extremadamente raro que afecta la sentadilla de bits, pero el sobrecalentamiento es una causa muy com√∫n de errores de memoria.  Not√© que los tel√©fonos inteligentes son especialmente vulnerables debido a las condiciones de funcionamiento extremas a las que est√°n expuestos.  El sobrecalentamiento de la bater√≠a del tel√©fono inteligente es una ocurrencia bastante com√∫n.  La mayor√≠a de los otros dispositivos tienen refrigeraci√≥n, pero incluso logran crear condiciones de operaci√≥n dif√≠ciles. <br><br><img src="https://habrastorage.org/webt/o6/ji/aa/o6jiaavivezo-k_6racvxt9xdw0.jpeg"><br><br>  No hace mucho tiempo, Google public√≥ informaci√≥n sobre el trabajo de sus centros de datos.  Una de las cosas interesantes que aprend√≠ fue el mensaje de que, para ahorrar energ√≠a, operan sus centros de datos en condiciones que la mayor√≠a de nosotros considerar√≠amos irrazonables.  Si los centros de datos t√≠picos funcionan a una temperatura m√°xima de 60-70 grados Fahrenheit (15-20 ¬∞ C), los expertos de Google recomiendan que las empresas operen centros de datos a una temperatura de al menos 80 grados (27 ¬∞ C) y un centro de datos belga Google operaba sus servidores a una temperatura de 95 grados (35 ¬∞ C). <br><br><img src="https://habrastorage.org/webt/du/rg/hn/durghn_gxdk7asow1-e0eqkgsgc.jpeg"><br><br>  Leyenda: "Escuch√© que nos ahorra dinero". <br><br>  Intel y Microsoft afirman que sus servidores se comportan bien a altas temperaturas, y Dell garantiza que sus servidores funcionar√°n a 115 grados Fahrenheit (46 ¬∞ C).  Creo que es una mala idea, ya que la temperatura es el factor principal para garantizar un funcionamiento estable de la memoria, y los centros de datos de Google funcionan a temperaturas de "fuego". <br><br>  Comenc√© a estudiar qu√© ventajas podr√≠a ofrecer esto y qu√© dominios eran m√°s vulnerables a la posici√≥n en cuclillas de bits, es decir, intent√© encontrar los nombres solicitados con mayor frecuencia para aumentar la probabilidad de encontrar tales errores.  Comenc√© a recopilar registros de DNS de grandes empresas para encontrar los nombres de dominio m√°s comunes y descubr√≠ que el nombre m√°s solicitado era gstatic.com.  Este es uno de los dominios que Google sirve para proporcionar informaci√≥n est√°tica como CSS, im√°genes, JavaScript y archivos XML. <br><br><img src="https://habrastorage.org/webt/j9/xn/vn/j9xnvn0ht-pgfpoclvyeyf9ru5a.jpeg"><br><br>  Escrib√≠ un script para identificar posibles "trastornos" de bits en este nombre de dominio de gstatic.com, y obtuve una lista de todas las variaciones de este nombre en la cantidad de 34 piezas.  Cinco de ellos fueron utilizados con fines legales, los 29 restantes estaban disponibles, as√≠ que los compr√© todos. <br><br><img src="https://habrastorage.org/webt/e-/eo/32/e-eo32vi5w_l_cozwqd0rfmkwt0.jpeg"><br><br>  Inmediatamente golpe√© el objetivo.  Alguien estaba buscando im√°genes en Google y el contenido de la solicitud les regres√≥ da√±ado de alguna manera, porque su navegador me pidi√≥ que sirviera una de las im√°genes en la solicitud.  Veo su direcci√≥n IP, el nombre distorsionado que solicitaron, el recurso que intentaron recuperar utilizando esta imagen, la p√°gina relacionada con este contenido y el cliente que se utiliz√≥ como navegador para enviar esta solicitud. <br><br><img src="https://habrastorage.org/webt/eu/gm/oi/eugmoimv5zvkdflbtcz4ryp1o_4.jpeg"><br><br>  En la p√°gina puede ver un artefacto interesante en forma de solicitud de un nombre espec√≠fico Trisha Jones. <br><br><img src="https://habrastorage.org/webt/fr/sx/ol/frsxolhwqbwawblq6lbbxjrwy3k.jpeg"><br><br>  Adem√°s, el n√∫mero de solicitudes creci√≥, aparecieron m√°s nombres distorsionados, m√°s solicitudes de im√°genes y m√°s enlaces a la solicitud original, como resultado de lo cual recolect√© m√°s de 50,000 solicitudes √∫nicas, y result√≥ que esto era algo com√∫n. <br><br><img src="https://habrastorage.org/webt/ez/o3/gz/ezo3gzhi_-vnofpq9wspmn450bw.jpeg"><br><br>  La diapositiva muestra una solicitud de una imagen "fotografiada" de la actriz Selena G√≥mez, lo que provoca risas en el pasillo. <br><br>  Por lo tanto, a veces, las sentadillas vencidas se producen justo en el momento adecuado para satisfacer una de sus solicitudes, y si esto no sucede con demasiada frecuencia, no tiene que preocuparse.  Pero a veces esto sucede en el mismo momento en que hay un guardado en el disco duro, que ya es m√°s interesante.  Hay posibilidades de que se produzca una sentadilla de bits en condiciones normales de funcionamiento de la memoria, pero es muy probable que esto ocurra principalmente en centros de datos con una temperatura de 95 grados. <br><br>  Ahora mis registros est√°n llenos de todo ruido, recibo solicitudes distorsionadas todos los d√≠as en tal cantidad que no puedo verlas manualmente. <br><br><img src="https://habrastorage.org/webt/yh/yp/4j/yhyp4j-qevsxstztuxhg71ynn0m.jpeg"><br><br>  Por lo tanto, escribo scripts en un intento de encontrar los mismos patrones de consulta, y lo m√°s grande que obtuve fue muchas consultas de la misma imagen para el mismo nombre de dominio distorsionado, y todas proven√≠an de tel√©fonos m√≥viles.  Recib√≠ estas solicitudes cada pocos segundos, ya que todos estos tel√©fonos intentaron usar la p√°gina de b√∫squeda del sitio web de Google y me pidieron que les proporcionara una peque√±a imagen del logotipo de la p√°gina original. <br><br>  Encontr√© un servidor web de toda la nube de Google que ofrec√≠a contenido y distorsionaba constantemente el nombre de dominio, se√±alando a uno de mis servidores, donde el logotipo con ese nombre era accidental, y los clientes lo tomaron. <br><br>  <i>La diapositiva muestra c√≥mo el logotipo de la p√°gina de b√∫squeda de Google en la pantalla de un dispositivo m√≥vil se reemplaza por el logotipo de Ocupar, lo que provoca una risa apreciativa en el pasillo.</i> <br><br>  Durante dos a√±os, cientos de miles de solicitudes de este logotipo llegaron a este servidor con un nombre DNS distorsionado, en lugar del que Google planeaba usar.  Entonces, un d√≠a se detuvieron, ya que Google se neg√≥ a cambiar el contenido de los sitios m√≥viles, y este pedido fue cancelado. <br><br>  Entonces, continu√© estudiando patrones de consulta e intent√© descubrir otros patrones.  Uno de ellos apareci√≥ regularmente y se llev√≥ a cabo obviamente de forma natural al "voltear un poco" en la memoria, y no como resultado de un error de cuclillas de bits guardado. <br><br><img src="https://habrastorage.org/webt/hl/at/-o/hlat-o_vzwxgvkkkvlmz3c7lnpq.jpeg"><br><br>  Recib√≠ las solicitudes que se muestran en la siguiente diapositiva con una frecuencia de una por hora.  No parec√≠an familiares, todos usaban el cliente Google Feedfetcher, todos proven√≠an de dispositivos en la misma red y todas las solicitudes estaban relacionadas con archivos XML.  As√≠ que rebusqu√© un poco y descubr√≠ que Feedfetcher era el mecanismo que utiliza Google para capturar contenido actualizado para iGoogle, y las direcciones IP de origen se encontraban en B√©lgica. <br><br><img src="https://habrastorage.org/webt/al/ql/ar/alqlarm0ctfw4yj8hns-hnyj5zc.jpeg"><br><br>  Estas solicitudes se refieren a los propios servidores de Google, que se utilizan para recibir contenido actualizado para varios widgets que personalizan la p√°gina de inicio de iGoogle, un portal personal de Internet. <br><br>  Cada widget es un archivo XML que define el contenido, y Google me pidi√≥ que proporcionara este contenido a mis servidores de presentaci√≥n (aplausos y risas de la audiencia). <br><br><img src="https://habrastorage.org/webt/wz/lg/im/wzlgim-q0pd6qyjg5fitzgcvjgm.jpeg"><br><br>  Por lo tanto, pens√© que si Google accidentalmente quer√≠a contenido m√≠o que pudiera proporcionar a sus usuarios, entonces lo recibir√°.  Tom√© los archivos XML que Google me pregunt√≥ y los divid√≠ en partes.  Como puede ver, hay dos secciones: un encabezado que describe el m√≥dulo y un bloque C de datos empaquetados en el c√≥digo HTML CSS y JavaScript que forman el widget. <br><br><img src="https://habrastorage.org/webt/dq/me/oi/dqmeoijhs6fgla_b93rlqtpn34y.jpeg"><br><br>  As√≠ que simplemente cambi√© el enlace a la imagen de fondo, cambi√© la direcci√≥n de gstatic.com a grtatic.com, y dej√© el resto sin cambios, puse los archivos XML en la l√≠nea de donde Feedfetcher los obtuvo, y esper√© un poco. <br><br><img src="https://habrastorage.org/webt/gh/xd/4b/ghxd4butfk2lis7we9oce-kma6m.jpeg"><br><br>  Casi inmediatamente despu√©s de eso, Feedfetcher me pidi√≥ archivos XML, despu√©s de lo cual comenc√© a recibir solicitudes de muchas direcciones IP de Google para esta imagen de fondo. <br><br><img src="https://habrastorage.org/webt/9u/7d/lf/9u7dlfnnicox9tr7dwigqoasxge.jpeg"><br><br>  Por lo tanto, elimin√© los archivos XML modificados por m√≠ y esper√© hasta que se detuvieron las solicitudes, pero durante 35 d√≠as consecutivos, 61 dispositivos me preguntaban sobre esta imagen todos los d√≠as.  Y m√°s interesante, cada uno de estos dispositivos era un cliente de Virgin Media en el Reino Unido. <br><br><img src="https://habrastorage.org/webt/40/6y/hu/406yhuuqvt3uehxryvrqad34cuy.jpeg"><br><br>  Entonces, este archivo XML de Google sirvi√≥ a 61 personas, y durante el a√±o pasado, 500 IPs √∫nicas de Feedfetcher me han pedido que brinde estos m√≥dulos 15,000 veces.  Entonces podr√≠a proporcionar a mis usuarios algo m√°s da√±ino que simplemente reemplazar la imagen de fondo. <br><br>  Aqu√≠ hay algunos trucos m√°s que puedes hacer con Google.  Si no lo sabe, Postini es el reciente servicio de correo electr√≥nico de protecci√≥n contra correo no deseado, seguridad web y archivo de correo electr√≥nico de Google. <br><br><img src="https://habrastorage.org/webt/9k/k6/ee/9kk6eeugcyqa86ezoolwhjnb71e.jpeg"><br><br>  Este servicio le permite cambiar su DNS para indicar su registro MX en su dominio y crear su dominio cambiando los 4 caracteres MX antes de psmtp.com.  Lo m√°s interesante aqu√≠ es que el dominio es tan corto que puede registrar f√°cilmente todas las versiones posibles del nombre con los bits "invertidos".  Otro punto interesante es que muchas compa√±√≠as indican sus registros MX para un solo dominio y nadie pens√≥ que fuera una mala idea. <br><br>  Por lo tanto, registr√© solo tres bits posibles para este dominio, y el empleo de psmtp.com result√≥ ser tan grande que las siguientes 4 diapositivas muestran las solicitudes que recib√≠ en solo un mes. <br><br><img src="https://habrastorage.org/webt/gm/uh/85/gmuh85j-12saxsc-buln1v09ddk.jpeg"><br><br><img src="https://habrastorage.org/webt/fu/lj/dc/fuljdczh5bcckphdfsrostma2lm.jpeg"><br><br>  Entonces, si usa el correo de Postini, su solicitud llegar√° en alg√∫n momento a mi servidor.  No creo que nadie pueda decir que Google no se toma en serio la seguridad de Internet.  Pero si alguien se preguntara a qu√© problemas podr√≠a conducir un sobrecalentamiento que causa errores de memoria, podr√≠a plantear la cuesti√≥n de considerar la posibilidad de una compensaci√≥n por tales cosas.  Por lo tanto, no permita que sus nombres de dominio sean tan cortos, ya que afecta negativamente a su negocio, como Postini, especialmente si su dominio es popular. <br><br>  Recomiendo encarecidamente que las personas apliquen una pol√≠tica interna de administraci√≥n de nombres de dominio que les permita corregir errores de distorsi√≥n de nombres y comprender claramente c√≥mo pueden afectarlo.  Si tiene gstatic.com y un centro de datos que funciona a una temperatura de 95 grados, es probable que desee asegurarse de que cualquier error de okupaci√≥n no permita que el cliente acceda a una red externa maliciosa. <br><br>  Por cierto, entre todos los dominios que investig√©, la √∫nica compa√±√≠a que registr√≥ todas las posibles distorsiones de mi propio nombre fue Yahoo. <br><br>  En la siguiente parte de la presentaci√≥n, voy a demostrar el comportamiento del DNS, que muchas personas, como resultado, no entienden completamente. <br><br><img src="https://habrastorage.org/webt/5l/id/3u/5lid3udte9qlatu5vhjy7w-qnr0.jpeg"><br><br>  Honestamente, Microsoft hizo un trabajo de documentaci√≥n muy pobre, especialmente porque el comportamiento del DNS a menudo cambia.  Esto lleva a un malentendido de lo que est√° sucediendo por parte de los usuarios finales, especialmente porque dicho comportamiento es a menudo contradictorio. <br><br>  Por lo tanto, comenzar√© con el hecho de que todos deben entender c√≥mo deben comportarse los dispositivos al consultar DNS y qu√© esperar de ellos.  Luego explicar√© c√≥mo este comportamiento se vuelve impredecible al usar las rutas de b√∫squeda de sufijos DNS, c√≥mo la documentaci√≥n insuficiente afecta todo esto, y terminar√© con una breve descripci√≥n de las lecciones que se pueden aprender de todo esto.  Pero primero, demostrar√© lo peligroso que puede ser para un usuario final entender mal lo que est√° sucediendo con DNS. <br><br>  Entonces, despu√©s de escribir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.google.com</a> en la barra de direcciones de su navegador, su computadora env√≠a una solicitud al servidor DNS local, y el trabajo de encontrar lo que necesita, devolver la solicitud y responder ahora se le asigna.  El servidor local llama al servidor ra√≠z para acceder al servidor .com, y el servidor ra√≠z lo env√≠a al servidor .com.  Comprueba si el servidor local est√° autorizado para solicitudes a google.com y lo env√≠a al servidor ns.google.com.  Finalmente, el servidor local recibe una respuesta con la direcci√≥n IP del recurso que necesita y se la env√≠a. <br><br><img src="https://habrastorage.org/webt/2o/z-/1s/2oz-1ssggey-ghbnfldymzelauy.jpeg"><br><br>  Este es el comportamiento DNS normal que todos esperan de √©l.  Todos piensan que es suficiente simplemente enviar una solicitud desde el dispositivo a su servidor DNS local para que haga todo el trabajo duro, y luego obtener una respuesta a su solicitud.  Pero no todos imaginan que este proceso consta de muchos pasos importantes. <br><br>  Por ejemplo, su dispositivo est√° tratando de encontrar la respuesta en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.google.com</a> , pero todo el proceso, que nos llev√≥ hasta 8 diapositivas, solo ocurrir√° si escribe exactamente esa direcci√≥n en la barra de consultas del navegador: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.google .com</a> .  Este es el nombre de dominio completo que est√° asociado con el DNS ra√≠z.  Muchas personas creen que el nombre de dominio completo termina con un punto, lo cual no es cierto.  Todav√≠a se supone la presencia de un punto al final del nombre completo, y debido a esto, se producen problemas.  Intentemos imprimir 4 variaciones del nombre: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.google.com</a> <br>  google.com <br>  www <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.google.com</a> <br><br>  cada uno de los cuales se comporta de manera diferente con respecto al comportamiento de DNS.  Todo esto es personalizable, pero generalmente nadie lo hace. <br><br>  Veamos lo que realmente sucede en tales situaciones.  Hay varios factores que influyen en la toma de decisiones del cliente antes de que decidan enviar una consulta DNS.  Dos de estos son rutas de b√∫squeda de sufijos y devoluci√≥n de DNS. <br><br><img src="https://habrastorage.org/webt/qp/2_/eo/qp2_eogxid_o03m5butwxk-ahqo.jpeg"><br><br>  Ambos tienen muchos par√°metros personalizables que afectan su comportamiento y se comportan de manera diferente en diferentes versiones de Windows y en diferentes paquetes de servicio. <br><br>  As√≠ es como la mayor√≠a de la gente usar√° el sufijo de ruta de b√∫squeda.  Si su empresa se llama foo y es el propietario del dominio foo.com, y el nombre del directorio activo es ad.foo.com, puede usar el sufijo de las rutas de b√∫squeda ad.foo.com o foo.com y "insertarlo" en la parte del cliente del ensamblaje del sistema o en pol√≠tica de grupo. <br><br>  Si uno de sus clientes intenta resolver el nombre corto www, el comportamiento predeterminado de Windows XP ser√° as√≠.  Primero enviar√° una consulta DNS a lo largo de la ruta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.ad.foo.com</a> , luego a lo largo de la ruta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.foo.com</a> y al final seguir√° una consulta NetBIOS, solo www. <br><br>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.phx</a> ,          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.phx</a> ,      ,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.phx.ad.foo.com</a> ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.phx.foo.com</a> .       15 ,      NetBIOS,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.phx</a> . <br><br><img src="https://habrastorage.org/webt/no/_e/1b/no_e1b8sp9sson1bcnn_6niyxrq.jpeg"><br><br>    Windows,   XP sp.3,      DNS ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.phx</a>  NetBIOS ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.phx</a> ,    ,   . <br><br><img src="https://habrastorage.org/webt/6r/0u/zg/6r0uzg3wsvjgu8tawcy_qsxg7ju.jpeg"><br><br>       ,    ,   ,     ,          ,    .  , ,  Microsoft   DNS. <br><br>  XP   ,  Microsoft    XP,     DNS   Windows   DNS    .   ,    www, Windows    ,  ,    ,    DHCP     Active Directory.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.phx.ad.foo.com</a> ,    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.ad.foo.com</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.foo.com</a> , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.com</a>     . <br><br><img src="https://habrastorage.org/webt/ee/2q/ps/ee2qpsol_n0puvhe-8ay2ocihzq.jpeg"><br><br> 18:30  <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> DEFCON 21. DNS      .</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9Sgaq6OYLX8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> ,    .    ?     ?       , <b>30%        entry-level ,      :</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps  $20     ?</a> (   RAID1  RAID10,  24    40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps hasta diciembre de forma gratuita</b> al pagar por un per√≠odo de seis meses, puede ordenar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br> <b>Dell R730xd  2  ?</b>    <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2  Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100   $249</a>    !</b>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   .  c   Dell R730xd 5-2650 v4  9000   ?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es430724/">https://habr.com/ru/post/es430724/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es430712/index.html">NeurIPS: C√≥mo conquistar la mejor conferencia de ML</a></li>
<li><a href="../es430714/index.html">VMware compra Heptio: ¬øqu√© significa para Kubernetes?</a></li>
<li><a href="../es430718/index.html">¬øPara qu√© objetos vale la pena usar la videovigilancia en la nube?</a></li>
<li><a href="../es430720/index.html">Intel RealSense D435i: peque√±a actualizaci√≥n y breve digresi√≥n hist√≥rica</a></li>
<li><a href="../es430722/index.html">Rendimiento de PHP: planificaci√≥n, creaci√≥n de perfiles, optimizaci√≥n</a></li>
<li><a href="../es430728/index.html">Ens√©√±ame a dar retroalimentaci√≥n</a></li>
<li><a href="../es430730/index.html">Qu√© hace R&D ABBYY: Grupo de Investigaci√≥n Avanzada de PNL</a></li>
<li><a href="../es430732/index.html">A la cuesti√≥n de divisi√≥n y TI</a></li>
<li><a href="../es430734/index.html">Actualizaciones inteligentes vs contratos inteligentes</a></li>
<li><a href="../es430736/index.html">Desarrolle su navegador desde cero. Primera parte: HTML</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>