<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ ๐ ููุงุชูุญ ุชุนูู ุจุงูููุณ ูุน Modbus: ููุงุฐุง ูู ุจุญุงุฌุฉ ุฅูููุง ูููููุฉ ุชุทุจูููุง ูู ุดูุฉ ุฐููุฉ ๐คพ๐ผ ๐ ๐ณ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูู ุฃูุธูุฉ ุงูููุฒุงููุฉ ูู ุงูููุฒู ุงูุฐูู ุ ุนุงุฏุฉู ูุง ูุชู ุงุณุชุฎุฏุงู ุงูููุงุชูุญ ุงูููุงุณูุฉ - ููุทูู ุนูู ููุน ุงููุฎุฑุฌุงุช ุฃูุถูุง "ุงูุงุชุตุงู ุงูุฌุงู" . ููุน ุฐูู ุ ูุฐุง ููุณ ุงูุฎูุงุฑ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุงุชูุญ ุชุนูู ุจุงูููุณ ูุน Modbus: ููุงุฐุง ูู ุจุญุงุฌุฉ ุฅูููุง ูููููุฉ ุชุทุจูููุง ูู ุดูุฉ ุฐููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirenboard/blog/417093/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/up/wo/hl/upwohlfmxuv_nz9mr5vatxwj3ky.jpeg" width="600"></div><br>  ูู ุฃูุธูุฉ ุงูููุฒุงููุฉ ูู ุงูููุฒู ุงูุฐูู ุ ุนุงุฏุฉู ูุง ูุชู ุงุณุชุฎุฏุงู ุงูููุงุชูุญ ุงูููุงุณูุฉ - ููุทูู ุนูู ููุน ุงููุฎุฑุฌุงุช ุฃูุถูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ุงูุงุชุตุงู ุงูุฌุงู"</a> .  ููุน ุฐูู ุ ูุฐุง ููุณ ุงูุฎูุงุฑ ุงููุญูุฏ: ุจุญุซูุง ุนู ููุชุงุญ ุฌููู ุ ุฌุฆุช ุนุจุฑ ุงูุฃุฌูุฒุฉ ูุน ุจุฑูุชูููู Modbus RTU ูู ุงูุฏุงุฎู.  ุจุงูุฅุถุงูุฉ ุฅูู ุงููุธูุฑ ุงูุฌููู ุ ููู ุชุณูุญ ูู ุจุชูููู ูุถุน ุงูุชุดุบูู ููู ุฒุฑ ุ ูุงูุชุญูู ูู ุงูุฅุถุงุกุฉ ุงูุฎูููุฉ ุจุงูุชูุตูู ุ ูุชูุตูููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจูุญุฏุฉ</a> ุงูุชุญูู ุงููุฑูุฒูุฉ (ุงุณุชุฎุฏูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Wiren Board 5</a> ) ุ ูุฃุฑุจุนุฉ ุฃุณูุงู ูุงููุฉ - ุงูุทุงูุฉ ูุงูุฃุฑุถ ูุฎุทูู ู RS-485. <br><br>  ููููุฉ ุชูุตูู ูุซู ูุฐุง ุงูููุชุงุญ ูุชูููู ุงูุชุญูู ูู ุงูุถูุก ูุงูุชูููุฉ ููู ุ ุงูุธุฑ ุฃุฏูุงู.  ุณุชูุถุญ ุงูููุงูุฉ ุฃูุถูุง ุจุงูุชูุตูู ููููุฉ ุงูุนูู ูุน ุฃุฌูุฒุฉ Modbus ุจุดูู ุนุงู. <br><a name="habracut"></a><br>  <i>ุดุฑุญ ูู Wiren Board ุงููุณูู: ููุฏ ูุฐุง ุงูููุงู ูู ููุถูุน ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">Kallyanbl4</a> ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชุฏุงูุง</a> .</i>  <i>ุจุนุฏ ุทูุจูุง ุ ูุชุจ ููุงูุฉ ูุงููุฉ ูุณูุญ ุจูุดุฑูุง ุนูู ูุฏููุชูุง ุ ูุงูุชู ูุดูุฑู ุนูููุง.</i>  <i>ุฌููุน ุงููุตูุต ูุชุจูุง ุงููุคูู ุ ุจุงุณุชุซูุงุก ุงูููุงุญุธุงุช ูู ุงูููุงูุฉ.</i> <br><br><h3 style=";text-align:right;direction:rtl">  ูุตู ุงูููุงุชูุญ </h3><br>  ุจุนุฏ ุฏุฑุงุณุฉ ูุง ูู ุงูุขู ูู ุงูุณูู ุ ุงุดุชุฑูุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฐู</a> ุงูููุงุชูุญ ุงููุซูุฑุฉ ููุงูุชูุงู ูู ุงูุตููููู: <br><br><img src="https://habrastorage.org/webt/xw/lm/5_/xwlm5_ynjxrtogilijnfvqxd4bk.jpeg" width="600"><br><br>  ูุฒุงูุงูุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชุตููู ุงูุฌูุฏ. </li><li style=";text-align:right;direction:rtl">  ููุงุชูุญ ุงูููุณ ุ ุนูุฏ ุงูุถุบุท ุนูููุง ุ ูููุถ ุ ูุถุงุกุฉ ูู ุงูุธูุงู ุจููู ุฃุจูุถ ูุทูู ุ </li><li style=";text-align:right;direction:rtl">  ุงูุณุนุฑ ุงูููุฎูุถ ูุณุจูุง - 2000 ุฑูุจู ููู ููููุง.  ูุดูู ุงูุณุนุฑ ุงูููุด ุจุงูููุฒุฑ ุงููุฑุฏู. </li><li style=";text-align:right;direction:rtl">  ููุชุงุญ ูุงุจู ููุจุฑูุฌุฉ - ููููู ุถุจุท ุงูุฒุฑ ูุฃู ุฅุฌุฑุงุก ุชูุฑูุจูุง: ูู ุจุชุดุบูู ุงูุถูุก ุ ูุงูุชุญูู ูู ุงููุตุงุจูุญ ุ ูุฑูุน / ุฎูุถ ุงูุณุชุงุฑุฉ ุ ... </li></ul><br>  ููุงุตูุงุช ุงูุชุจุฏูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฌูุฏ ุงูุฅูุฏุงุฏ - 12 ูููุช ุ </li><li style=";text-align:right;direction:rtl">  ูุนุฏู ููู ุงูุจูุงูุงุช - 19200 ุจุช / ุซุงููุฉ ุ </li><li style=";text-align:right;direction:rtl">  ุนุฏุฏ ุงูุจุชุงุช ุงููุฑุณูุฉ - 8 ุ </li><li style=";text-align:right;direction:rtl">  ุนุฏุฏ ุจุชุงุช ุงูุชููู - 1 ุ </li><li style=";text-align:right;direction:rtl">  ูุฑุงูุจุฉ ุงูุชูุงูุค - ูุง ุชุญูู. </li></ul><br>  ุนูุฏ ุงูุนูู ุนูู Modbus RTU ุ ุชุญุชูู ุงูุฃุฌูุฒุฉ ุงููุชุตูุฉ ุนูู ูุง ูุณูู ุจุงูุณุฌูุงุช - ุงูุฎูุงูุง ุงูุชู ูุชู ุชุฎุฒูู ุงููุนูููุงุช ูููุง.  ูู ููุทุฉ ุงูุดุงุดุฉ ุ ูุตู ุงูุณุฌูุงุช ุงูุฎุงุตุฉ ุจููุชุงุญ ุงูุชุจุฏูู ุฑุจุงุนู ุงูููุงุชูุญ: <br><br><img src="https://habrastorage.org/webt/jc/ve/uz/jcveuzacmo7a4kscyvauqrd0fec.jpeg"><br><br>  ุนูุฏ ุงูููุฑ ููู ุฃุญุฏ ุฃุฒุฑุงุฑ ุงูููุณ ุ ุณุชุชุบูุฑ ุงูููู ุงูููุฌูุฏุฉ ูู ุงูุณุฌูุงุช ูู 0-3 ูู 0 ุฅูู 1. <br><br><h3 style=";text-align:right;direction:rtl">  ูุงุทุน ุงูุฏุงุฆุฑุฉ </h3><br>  ูู ูุญุฏุฉ ุชุญูู Wiren Board 5 ุ ุงุนุชูุงุฏูุง ุนูู ุงูุชูููู ุ ููุงู ูู ุงุซููู ุฅูู ุฃุฑุจุนุฉ ููุงูุฐ RS-485.  ูุฌุจ ุชูุตูู ุงููุญููุงุช (ูู ุญุงูุชู 27 ูููุง) ุจูุฐู ุงูููุงูุฐ. <br><br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูููู ุฃู ุชุนูู ูุงูุฉ ุงูููุงุชูุญ ุนูู ูุงูู ูุดุชุฑู ูุงุญุฏ.  ูููู ุชูุตูู ุงูููุงุชูุญ ูู ุณูุณูุฉ ุ ููุง ูุคุฏู ุฅูู ุชูุตูู ุงููุงุจู ูู ููุชุงุญ ุฅูู ุขุฎุฑ ุ ููููู ูุฑุฑุช ุชูุตูู ุฌููุน ุงููุงุจูุงุช ูู ุฏุฑุน ูุงุญุฏ. <br><br>  ูุงุจู ุชูุตูู - Cat 5e UTP ุซูุงูู ุงูููุงุฉ.  ููููู ุงุณุชุฎุฏุงู ุฃุฑุจุนุฉ ููุงุฉ ุ ูููู ุนุงุฏุฉ ุฃููู ุจูู ุดูุก ุนูู ุฃุณุงุณ "ููุท ูู ุญุงูุฉ".  ููููู ุงูุชูููุฑ ูู ุงููุงุจูุงุช ุงูุฃุฑุจุนุฉ ุงูุฃุฎุฑู ุ ูููู ุงูููุทุฉ ุงููููุฉ ูู ุฃูู ูุฌุจ ุญูุงูุฉ ุงููุจู ุ ูุฃูู ุญุชู ุนูู ุงูุฑุบู ูู ุงูุชุฑุฏุฏ ุงูููุฎูุถ ููุฅุดุงุฑุฉ ุ ูุง ูุชู ุงุณุชุจุนุงุฏ ุงูุฎุณุงุฆุฑ ูุงูุชุฏุงุฎู. <br><br>  ูุชูุฌุฉ ูุฐูู ุ ูุชู ุชูุตูู ุฌููุน ุงูููุงุชูุญ ุจุจุนุถูุง ุงูุจุนุถ ููุง ูู ููุถุญ ูู ุงูุตูุฑุฉ: <br><br><img src="https://habrastorage.org/webt/5e/bg/vg/5ebgvgcgc-u6uamikfwmpudrcqm.jpeg" width="400"><br><br>  ููุง ูุชุจูู ูู ุงูุดูู ุ ูุฅู ุฌููุน ุงูููุงุชูุญ ูุชุตูุฉ ุจุจุนุถูุง ุงูุจุนุถ ุจุงุณุชุฎุฏุงู ููุชุงุญ UTP ุงูุณูุจู.  ุจุงููุณุจุฉ ููููู 1 ู 2 (ุงูุจุฑุชูุงูู ูุงูุฃุจูุถ-ุงูุจุฑุชูุงูู) ูุชู ุฅุฑุณุงู ุงูุจูุงูุงุช (ุงูุฎุทุงู A ู B) ุ ูุชู ุชูุตูู ุทุงูุฉ 12 ูููุช ุจุงูููู 7 ู 8 (ุงูุจูู ูุงูุฃุจูุถ-ุงูุจูู). ุฃุณุชุฎุฏู Mean Well NDR-75-12 ููุตุฏุฑ ููุทุงูุฉ . <br><br>  ูู ุฃูู ุฃุนุฑู ููู ุชุตุฑู ููุชุงุญ UTP ุงูุตููู ุงูุณูุจู ุ ูุฐูู ุ ุนูุฏ ุชุตููู ุงูุฏุฑุน ุ ูุฏูุช ููุงููุง ููุญูู RS-423 ูุดุท.  ุฃูุงุญุธ ุฃู ุงูุฏุงุฆุฑุฉ ุชุนูู ูู ุฎูุงู ููุงุชูุญ ุณูุจูุฉ ูุบูุฑ ูุดุทุฉ.  ูุญุชู ุนูุฏูุง ุชููู ูุชุตูุฉ ุจุจุนุถูุง ุงูุจุนุถ. <br><br><img src="https://habrastorage.org/webt/b3/ur/at/b3urat_0w80cu1lw3lnp1jf_o50.jpeg" width="400"><br><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุญูู ุจุงูุถูุก ุนู ุทุฑูู ุงูุชุชุงุจุน </h3><br>  ููููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุดุฑูุนู</a> ุ ุชู ุงูุชุฎุทูุท ูู 27 ุฌูุงุฒูุง ูุณุชูููุง (ุฃุถูุงุก ุ ูุฑุงูุญ) ูู ุงูุดูุฉ ุ ูุฏุนููุฉ ุจู 220 ูููุช. ุชู ุงุฎุชูุงุฑ ุซูุงุซ ูุญุฏุงุช ุชุฑุญูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">WBIO-DO-R10A-8</a> ููุงุญุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">WBIO-DO-R10R-4</a> ููุชุญูู ูููุง.  ูุฑุฌุน ุงูุงุฎุชูุงุฑ ุฅูู ุญูููุฉ ุฃู ุฌููุน ุงูุฅุถุงุกุฉ ุชูุฑูุจูุง ูู ุงูุดูุฉ ูู LED ุ ูุงูุชู ุชุฎุชูู ุนู ุงููุตุงุจูุญ ุงููุชููุฌุฉ ุจุชูุงุฑ ุจุฏุก ุนุงูู.  ูููู ูููุฑุญูุงุช ุงููุฎุชุงุฑุฉ ุชูููุฑ ุงูุชุจุฏูู ุงูุญุงูู ุญุชู 10 ุฃูุจูุฑ ููู ููุงุฉ ุ ููู ุฃูุฑ ุบูุฑ ุถุฑูุฑู ูู ุญุงูุชู - ูููู ุ ููุง ุฐูุฑูุง ุณุงุจููุง ุ "ููุท ูู ุญุงูุฉ ูุฌูุฏ ูุงูุด". <br><br><img src="https://habrastorage.org/webt/pd/ov/yy/pdovyyz0vwsmyp9jbsn7nyx7gca.jpeg" width="400"><br><br>  ูุญุฏุซ ุชุจุฏูู ุงูุชุชุงุจุน ูู ุฎูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฌูุฉ ุงูููุจ ูุฌูุงุฒ ุงูุชุญูู</a> .  ุงูุฅุฌุฑุงุก ุจุฏููู ุ ูุง ููุฒู ุชุนูููุงุช ุฃู ุชูููุญุงุช. <br><br><h3 style=";text-align:right;direction:rtl">  ุฌุฒุก ุงูุจุฑูุงูุฌ </h3><br>  <b>ููู ุงููููุฐ</b> <br><br>  ูุชุนูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตู ุงูุฃุฌูุฒุฉ ูู Wiren Board 5</a> ุฃูู ูุญุชูู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุฐู</a> ุฌูุงุฒ <i>/ dev / ttyAPP1</i> ู <i>/ dev / ttyAPP4</i> ููุงุจู <i>ูููุฐู</i> RS-485.  ูู ุญุงูุชู ุ ูุชู ุชูุตูู ุงูููุชุงุญ ุจุงููููุฐ <i>/ dev / ttyAPP1</i> . <br><br>  <b>ุนููุงู ุงูุฌูุงุฒ (ุงูุชุจุฏูู)</b> <br><br>  ุนูุฏ ุชุจุงุฏู ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู ุจุฑูุชูููู Modbus RTU ุ ูุชู ุชุญุฏูุฏ ูู ุฌูุงุฒ ุจุฑููู ุงููุฑูุฏ - ุนููุงู Modbus.  ููุงุนุฏุฉ ุ ุชุดูุฑ ุงูุดุฑูุฉ ุงููุตูุนุฉ ุฅูู ูุฐุง ุงูุนููุงู ูู ุดูู ุซูุงุซุฉ ุฃุฑูุงู ุนูู ุงูุฌูุงุฒ ููุณู ุ ูููู ุฅุฐุง ูู ููู ููุงู ูุซู ูุฐุง ุงูุฑูู ุนูู ุงูุฌูุงุฒ ุ ูููููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชูุฑุงุฑ ุนุจุฑ ุงูุนูุงููู ูู ุณุทุฑ ุงูุฃูุงูุฑ</a> (ูุชู ุงุณุชุฎุฏุงูู ูุชุฎุฒูู ุงูุนููุงู ูู ุณุฌู Modbus 0x80): <br><br><pre style=";text-align:right;direction:rtl"><code class="bash hljs">root@wirenboard:~<span class="hljs-comment"><span class="hljs-comment"># service wb-mqtt-serial stop root@wirenboard:~# for i in {1..247}; do modbus_client -mrtu /dev/ttyAPP1 --debug -a$i -t3 -r0x80 -s1 -pnone; done 2&gt;/dev/null | grep Data:</span></span></code> </pre> <br>  ูุฌุจ ุฃู ุชููู ุงููุชูุฌุฉ ูู ุงูุดูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">Data: 0x008e</code> </pre><br>  ุชู ุงุณุชูุงู ุงูุฅุฌุงุจุฉ ุจุชูุณูู ุณุฏุงุณู ุนุดุฑู ููู ุชูุงุจู 142 ุจุตูุบุฉ ุนุดุฑูุฉ. <br>  ูุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ูู ูู ูุฑุฉ ูุชู ูููุง <i>ุงุณุชุฏุนุงุก</i> ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ <i>modbus_client</i> ุ ูุฌุจ ุฅููุงู ูุนูุงุฑ ุจุฑูุงูุฌ ุงูุงุณุชูุตุงุก <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">wb-mqtt ุงูุชุณูุณูู</a></i> ููุญุฏุฉ ุงูุชุญูู ุ  ูุฅูุง ุ ูู ุชุนูู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ <i>modbus_client</i> . <br><br>  <b>ุชุจุงุฏู ุงูุจูุงูุงุช ุจูู Switch ู Wiren Board</b> <br><br>  ุฃุนูุงู ุ ูุชู ูุชุงุจุฉ ุญููุฉ ุชุณุชูุตู ุฌููุน ุนูุงููู Modbus ุงููุญุชููุฉ ูุชุนูุฏ ูููุฉ ุงูุนููุงู ุฅุฐุง ุชู ุงูุนุซูุฑ ุนูู ุฌูุงุฒ.  ุชุณุชุฎุฏู ุงูุญููุฉ ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">modbus_client</a></i> ุ ููู ุถุฑูุฑูุฉ ูุชุตุญูุญ ุฃุฎุทุงุก ุงูุฃุฌูุฒุฉ ุงููุชุตูุฉ.  ุนูุฏ ูุฐู ุงูููุทุฉ ุ ุจุงุณุชุฎุฏุงูู ุ ุณูู ูุชุฃูุฏ ูู ุฃู ูู ุดูุก ูุชุตู ุจุดูู ุตุญูุญ ุ ูุฃู ุงูููุชุงุญ ูุชูุงุนู ูุน ูุญุฏุฉ ุงูุชุญูู ุจุดูู ุตุญูุญ.  ููููุงู ุจุฐูู ุ ุญุงูู ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ููุชุงุญ ุชุณุฌูู 0x01: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">root@wirenboard:~<span class="hljs-comment"><span class="hljs-comment"># service wb-mqtt-serial stop root@wirenboard:~# modbus_client -mrtu /dev/ttyAPP1 --debug -a142 -s1 -pnone -b19200 -a142 -t0x03</span></span></code> </pre><br>  (ูุตู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ูููุงุชูุญูุง ููุฌูุฏ ูู ูุซุงุฆู ูุญุฏุฉ ุงูุชุญูู). <br><br>  ุณุชููู ุงููุชูุฌุฉ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">Opening /dev/ttyAPP1 at 19200 bauds (N, 8, 1) [8E][03][00][64][00][01][DA][EA] Waiting <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> a confirmation... &lt;8E&gt;&lt;03&gt;&lt;02&gt;&lt;00&gt;&lt;01&gt;&lt;2C&gt;&lt;5B&gt; SUCCESS: <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 1 of elements: Data: 0x0001</code> </pre><br>  ูุซู ูุฐู ุงููุชูุฌุฉ ุชุนูู ูุชุงุจุฉ ูููุฉ ูููุตูุฉ 1 ูู ุงูุณุฌู. ุจุนุฏ ุงูุถุบุท ุนูู ุฃุญุฏ ุฃุฒุฑุงุฑ ุงููุญูู ุ ุณุชุชุบูุฑ ูููุฉ ุงูุณุฌู ุฅูู ุงููููุฉ ุงููุนุงูุณุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">SUCCESS: <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> 1 of elements: Data: 0x0000</code> </pre><br>  ุฅุฐุง ููุญุธุช ุงููุชูุฌุฉ ุ ููุง ูู ุงูุญุงู ูู ูุฐู ุงูููุฑุฉ ุ ูุฅู ูู ุดูุก ูุชุตู ุจุดูู ุตุญูุญ ุ ูุงูููุชุงุญ ููุญุฏุฉ ุงูุชุญูู ููููุงู ุจุนุถููุง ุงูุจุนุถ. <br><br>  <b>ุจุฑูุงูุฌ ุงูุชุดุบูู ุงูุฃุตูู ููููุชุงุญ</b> <br><br>  ุจุนุฏ ุงูุชุฃูุฏ ูู ุฃู ุฌูุงุฒ ุงูุชุญูู ูุงูููุชุงุญ ููููุงู ุจุนุถููุง ุงูุจุนุถ ุ ููุฏ ุญุงู ุงูููุช ูุชูุฏูู ูุตู ูููุงุชูุญ ุงูุชุจุฏูู ุนูู ูุณุชูู ุงูุจุฑูุงูุฌ.  ููุชุฑุญ ุงููุทูุฑูู ุฅุถุงูุฉ ูุตู ููุฌูุงุฒ ุงููุชุตู ุฅูู ููู /etc/wb-mqtt-serial.conf ุฃู ุฅูุดุงุก ูุงูุจ ูุฎุตุต ูู ุดูู /usr/share/wb-mqtt-serial/templates/config-*.json. <br><br>  ุฐูุจุช ูู ุงูุทุฑูู ุงูุซุงูู ุ ูุจุฏู ุงููููุฐุฌ ุงูุฎุงุต ุจู ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"device_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"4-band-switch"</span></span>, <span class="hljs-string"><span class="hljs-string">"device"</span></span>: { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"4-band-switch"</span></span>, <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"4bsw"</span></span>, <span class="hljs-string"><span class="hljs-string">"enabled"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"channels"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"All"</span></span>, <span class="hljs-string"><span class="hljs-string">"reg_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"holding"</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"0x00"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"switch"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Window"</span></span>, <span class="hljs-string"><span class="hljs-string">"reg_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"holding"</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"0x01"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"switch"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Side"</span></span>, <span class="hljs-string"><span class="hljs-string">"reg_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"holding"</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"0x02"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"switch"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Diode"</span></span>, <span class="hljs-string"><span class="hljs-string">"reg_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"holding"</span></span>, <span class="hljs-string"><span class="hljs-string">"address"</span></span>: <span class="hljs-string"><span class="hljs-string">"0x03"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"switch"</span></span> } ] } }</code> </pre><br>  ููุฌุฏ ูุตู ููุตู ูููุงูุจ ุงูููุชูุจ ุฃุนูุงู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตู ุจุฑูุงูุฌ ุชุดุบูู <i>wb-mqtt-serial</i></a> .  ุชุนุงูู ุจุฅูุฌุงุฒ ูุน ุงูุญููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  "ุงูุงุณู": "ุงููู" ูู ุงุณู ุงูุฒุฑ.  ุฅุฐุง ุชู <i>ูุฌุงุก</i> ุงููููุฐุฌ ุจุดูู ุตุญูุญ ุ ูุณูุธูุฑ ูุฐุง ุงูุฒุฑ ูู ุนูุงูุฉ ุงูุชุจููุจ "ุงูุฅุนุฏุงุฏุงุช" ูุน ุงูุนููุงู <i>/ devices / 4bsw_142 / control / All</i> </li><li style=";text-align:right;direction:rtl">  "Reg_type": "ุนูุฏ" - ููุน ูุญุฌู ุงูุชุณุฌูู.  ูุณุชุฎุฏู ุงููุญูู "ุงูุงุญุชูุงุธ" - ููู ุณุฌู 16 ุจุช ูุชููุฑ ูููุฑุงุกุฉ ูุงููุชุงุจุฉ. </li><li style=";text-align:right;direction:rtl">  "ุงูุนููุงู": "0x00" - ุนููุงู ุชุณุฌูู ุงูููุชุงุญ ุงูุฐู ุณุชูุฑุฃ ููู ูุญุฏุฉ ุงูุชุญูู ุงูุจูุงูุงุช. </li><li style=";text-align:right;direction:rtl">  "ุงูููุน": "ุงูุชุจุฏูู" - ููู ุณูุชู ุนุฑุถ ุงูููุชุงุญ ูู ูุงุฌูุฉ ุงูููุจ.  ูู ุญุงูุฉ "ุงูุชุจุฏูู" - ูู ุดูู ููุชุงุญ ูููุตู. </li></ul><br>  ุงุญูุธ ุงููุงูุจ ุนูู ูุญุฏุฉ ุงูุชุญูู.  ุจุนุฏ ุฐูู ุ ูู ูุณู ูุงุฌูุฉ ุงูููุจ (Configs -&gt; /etc/wb-mqtt-serial.conf) ุ ููููู ุฅุถุงูุฉ ุฌูุงุฒ ุฌุฏูุฏ ูุน ูุฐุง ุงููุงูุจ (4-band-switch).  ุฃุถู ููุชุงุญูุง ุงูุฃูู ูุงููุฑ ุนูู ุญูุธ. <br><br><h4 style=";text-align:right;direction:rtl">  ุงููุงุนุฏุฉ ุงูุชู ุชูุดุท ุงูุชุชุงุจุน ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ุงูุชุจุฏูู </h4><br>  ุฏุงุฎู ูุญุฏุฉ ุชุญูู ุงูุญุงูุฉ ุ ูุชู ูุตู ุฌููุน ุงูุฃุฌูุฒุฉ ุงููุชุตูุฉ ุจูุงุณุทุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑุณุงุฆู MQTT</a> .  ูุชู ุงูุชุญูู ูู ุงูุฃุฌูุฒุฉ ุฃูุถูุง ุนู ุทุฑูู ุฅุฑุณุงู ุฑุณุงุฆู MQTT.  ุนููุงุก ูุงุฆูุฉ ุงูุชุธุงุฑ ุฑุณุงุฆู MQTT (ูุณูุท) ูู ูุงุฌูุฉ ุงูููุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุญุฑู ุงูููุงุนุฏ</a> . <br><br>  ููุชูุถูุญ ุ ุณูุฑู ููู ุชุชุนุงูู ูุงุฌูุฉ ุงูููุจ ูุน ุงูุฑุณุงูุฉ ุงููุงุฑุฏุฉ.  ููุชุญ ุนูุงูุฉ ุงูุชุจููุจ "ุงูุฅุนุฏุงุฏุงุช" ูู ูุงุฌูุฉ ุงูููุจ ููุฑู ูุง ูุญุฏุซ ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ "ุงููู" ูู ุงููุญูู: ุฏุงุฎู ุงูููุชุงุญ ุ ุชุชุบูุฑ ูููุฉ ุณุฌู Modbus ุ ูุณุชูุตู ุจุฑูุงูุฌ ุชุดุบูู <i>wb-mqtt-serial</i> ุงููุญูู ุ ูููููุง ููุงูุจ ุงูุฌูุงุฒ ุ ูุฑุณู ุงููุญูู ุฑุจุงุนู ุงููุทุงู ุฑุณุงูุฉ MQTT ูู ุงูููุถูุน <i>/ ุงูุฃุฌูุฒุฉ / 4 bsw_142 / ุงูุถูุงุจุท / ุงููู</i> - ูุนูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช ุ <i>ุณุชุชุบูุฑ</i> ุงููููุฉ ูู ุงูููุถูุน <i>/ ุงูุฃุฌูุฒุฉ / 4bsw_142 / ุงูุถูุงุจุท / ุงููู</i> ุนูู ุงูููุฑ ูู 0 ุฅูู 1. <br><br>  ุฎุฐ ุจุนูู ุงูุงุนุชุจุงุฑ ุงูุนููู ุงูุซุงูู - ูุญุฑู ุงูููุงุนุฏ.  ูุนูู ุงููุญุฑู ุ ูุซู ูุงุฌูุฉ ุงูููุจ ุ ูุน ูุงุฆูุฉ ุงูุชุธุงุฑ ุงูุฑุณุงุฆู ุ ูููููู ุงูุงุณุชุฌุงุจุฉ ููุชุบูุฑุงุช ูู ุงููููุฉ - ุนูุฏ <i>ุงุณุชุฎุฏุงู</i> ูุธููุฉ <i>ุงูุชุบููุฑ</i> ููุฐุง ุงูุบุฑุถ.  ูู ุญุงูุชู ุ ุจุฏุช ุงููุงุนุฏุฉ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   defineRule("switch_all", { whenChanged: "4bsw_142/All", then: function(newValue, devName, cellName) { dev["wb-gpio"]["EXT3_R3A2"] = newValue; dev["wb-gpio"]["EXT3_R3A5"] = newValue; dev["wb-gpio"]["EXT1_R3A1"] = newValue; dev["wb-gpio"]["EXT1_R3A2"] = newValue; dev["wb-gpio"]["EXT1_R3A5"] = newValue; dev["wb-gpio"]["EXT2_R3A8"] = newValue; dev["wb-gpio"]["EXT3_R3A7"] = newValue; } }); //  defineRule("switch_window", { whenChanged: "4bsw_142/Window", then: function(newValue, devName, cellName) { dev["wb-gpio"]["EXT4_ON4"] = newValue; // dev["wb-gpio"]["EXT3_R3A6"] = newValue; // dev["wb-gpio"]["EXT3_R3A7"] = newValue; } }); // defineRule("switch_side", { whenChanged: "4bsw_142/Side", then: function(newValue, devName, cellName) { dev["wb-gpio"]["EXT1_R3A3"] = newValue; dev["wb-gpio"]["EXT1_R3A4"] = newValue; dev["wb-gpio"]["EXT2_R3A1"] = newValue; } }); // defineRule("switch_diode", { whenChanged: "4bsw_142/Diode", then: function(newValue, devName, cellName) { dev["wb-gpio"]["EXT2_R3A2"] = newValue; dev["wb-gpio"]["EXT2_R3A3"] = newValue; dev["wb-gpio"]["EXT3_R3A3"] = newValue; } });</span></span></code> </pre><br>  ูุณุนุฏูู ุฃู ุฃุฌูุจ ุนูู ุฌููุน ุงูุฃุณุฆูุฉ ูู ุงูุชุนูููุงุช. <br><br><h3 style=";text-align:right;direction:rtl">  ููุงุญุธุงุช ุงููุณูู </h3><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ุงูุฃูุถู ูุถุน ุฎุท RS-485 ุจูุงุจู KSPEVG 2x2x0.35 (ูููู 30 ุฑูุจู ููุท ููู ูุชุฑ) ุ ูููุณ ุจูุฌูุฉ ุ ูููู ูุน ุญุงููุฉ. </li><li style=";text-align:right;direction:rtl">  ููุตุญู ุจุฃู ุชููู ุญุฐุฑูุง ูุน ูุตุงุจูุญ LED - ูููู ุฃู ูุชุฌุงูุฒ ุชูุงุฑ ุจุฏุก ุงูุชุดุบูู ุงูุฃููุงุช 150 (!) ุงููุตููุฉ (ุณุชููู ูุฐู ููุงูุฉ ูููุตูุฉ) - ุงูุธุฑ ุฅูู ูุญุฏุงุช ุงูุชุฑุญูู ุงููููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">WB-MR6</a> : ุงูุชูุงุฑ 16 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃูุจูุฑ</a> ููู ููุงุฉ ุ ุจูุง ูู ุฐูู ุชูุงุฑ ุงูุชุฏูู ุญุชู 800 (!) ุฃูุจูุฑ ูู ุงูุชุนุฏูู ุณ. </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar417093/">https://habr.com/ru/post/ar417093/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar417083/index.html">ุฃุญูุงู ุนุงููุฉ ูู ูุฃุณ ุงูุนุงูู 2018</a></li>
<li><a href="../ar417085/index.html">ุชููู ุงููุณุชุนุฑุถุงุช ุจูุชู ุงูุตูุช ูู ุชุทุจูู WebRTC. ุชููู ูุงุฐุงุ</a></li>
<li><a href="../ar417087/index.html">HPE Digitize 2018: ุงูุญุฏุซ ูุงูุจุซ ุงููุจุงุดุฑ</a></li>
<li><a href="../ar417089/index.html">ุงูููุจููุชุฑ ุงูููููู: ููุชูู ูุงุญุฏ ูุญูู ุงูุฌููุน</a></li>
<li><a href="../ar417091/index.html">ุฅูุดุงุก ุชุธููู ุงูููุงู ุงููุฑุชูู ููููุจ. ุงูุฌุฒุก 3</a></li>
<li><a href="../ar417097/index.html">ุจุฑูุฌุฉ ุฌุงูุง ุณูุฑูุจุช</a></li>
<li><a href="../ar417099/index.html">ููู ูุชุจุช ููุชุจุฉ C ++ 11 ุงูููุงุณูุฉ ุฃู ููุงุฐุง ูููู ุงูุชุนุฒูุฒ ูุฎูููุง ุฌุฏูุง. ุงููุตู 2</a></li>
<li><a href="../ar417101/index.html">ุชุนุฑูู ุฌุงูุฒ - ูุง ูุณููุง ุฃู ูููู ุนูู</a></li>
<li><a href="../ar417103/index.html">Spark SQL. ููููุง ุนู ูุญุณู ุงูุงุณุชุนูุงู</a></li>
<li><a href="../ar417105/index.html">ุงูุทุจุงุนุฉ ุนูู ุทุงุจุนุฉ ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ. ุชุฌุงุฑุจ 3Dtool ุงูุณุฑูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>