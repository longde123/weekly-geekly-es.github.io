<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùé üë©üèø‚Äç‚úàÔ∏è üë©üèΩ‚Äçü§ù‚Äçüë®üèø Como criar mec√¢nica de jogo confi√°vel no Excel. Parte 2 üëÜüèæ üññüèª üßóüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nesta parte, resolveremos o problema da coloca√ß√£o √≥tima de armas no tanque, o arranjo espacial dos teleportadores no MMORPG e equilibraremos as batalh...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como criar mec√¢nica de jogo confi√°vel no Excel. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430114/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/uz/nc/jb/uzncjbvwkyi9mqataguysd8pjai.png"></div><br>  Nesta parte, resolveremos o problema da coloca√ß√£o √≥tima de armas no tanque, o arranjo espacial dos teleportadores no MMORPG e equilibraremos as batalhas das quatro classes de personagens de RPG. <br><br><h2>  Tarefas de coloca√ß√£o de objetos </h2><br>  <i>As planilhas para esta parte podem ser baixadas aqui: ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SuperTank</a> ) ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">teleportadores, parte 1</a> ) ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">teleportadores, parte 2</a> )</i> <br><br><h2>  SuperTank: o problema est√° resolvido! </h2><br>  No <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">primeiro artigo da</a> s√©rie, falamos sobre um exemplo de tarefa para um jogo chamado SuperTank.  Na segunda parte, nos familiarizamos com os conceitos b√°sicos de modelagem de decis√£o e conversamos sobre como resolver um exemplo simples usando a ferramenta "Search for Solutions" no Excel. <br><br>  Agora podemos aplicar o conhecimento adquirido na segunda parte ao problema do SuperTank e provar que, com a ajuda deles, esse problema pode ser resolvido com facilidade e rapidez.  Atualize sua mem√≥ria: SuperTank √© um jogo no qual voc√™ pode lutar em um tanque personalizado. <a name="habracut"></a>  O super tanque √© mais ou menos assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb8/a6c/2fc/fb8a6c2fcddbb776a18893059f989afc.jpg"></div><br>  Cada supertank pode ter qualquer n√∫mero de armas de cinco tipos diferentes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62e/717/050/62e717050c0d1e991663a3e9ef2dfc39.png"></div><br>  Um super tanque pode acomodar 50 toneladas de armas e um jogador pode gastar 100 cr√©ditos.  Al√©m disso, o super tanque possui 3 "slots cr√≠ticos", nos quais s√£o colocadas armas especiais como MegaRocket e UltraLaser. <br><br>  A planilha para este exemplo pode ser baixada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  O objetivo √© pegar armas que maximizem os danos causados ‚Äã‚Äãpelo super tanque, sem ultrapassar os limites de 50 toneladas, 100 cr√©ditos e 3 slots cr√≠ticos.  Tamb√©m assumimos que esta tabela cont√©m todas as informa√ß√µes necess√°rias e que fatores como alcance, frequ√™ncia e precis√£o n√£o s√£o relevantes ou j√° foram levados em considera√ß√£o no par√¢metro Dano da arma correspondente. <br><br>  Para otimizar esse esquema, primeiro inserimos esses dados na planilha.  Logo abaixo, adicionaremos outra tabela, na qual haver√° um conjunto de 5 c√©lulas "quantitativas" para indicar a quantidade de cada um dos 5 tipos de armas. <br><br>  At√© inserirmos o valor 1 nessas c√©lulas, apenas para testar seu trabalho, mas essas ser√£o nossas c√©lulas de decis√£o - solicitaremos √† ferramenta Solver que encontre os valores corretos para essas c√©lulas.  √â poss√≠vel entender que essas s√£o c√©lulas de decis√£o em amarelo, porque continuamos a seguir as regras de formata√ß√£o descritas na segunda parte.  √Ä direita das c√©lulas "quantitativas", adicionaremos c√©lulas de c√°lculo que multiplicar√£o os valores de quantidade nas c√©lulas de decis√£o pelos valores de Dano, Peso, Custo e Slots Cr√≠ticos da tabela acima.  Assim, cada linha desta tabela exibir√° corretamente os danos, peso, pre√ßo e slots cr√≠ticos necess√°rios para todas as armas usadas em todas as categorias de armas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f4e/342/27a/f4e34227a58768ee4d0a4f79fe6954e3.png"></div><br>  Tamb√©m criaremos uma se√ß√£o abaixo, que resumir√° todos os valores de quantidade, peso, custo e slots cr√≠ticos da tabela acima e comparar√° com os valores m√°ximos de peso, custo e slots cr√≠ticos especificados nas condi√ß√µes da tarefa (50, 100 e 3, respectivamente). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f6/76d/b7e/7f676db7e7034d6b9a02be24c5a1eb4b.png"></div><br>  De acordo com as regras de formata√ß√£o da segunda parte do artigo, as c√©lulas azuis na parte superior s√£o os crit√©rios das condi√ß√µes do problema.  As c√©lulas cinzas s√£o c√©lulas de c√°lculo que representam o peso total, o custo e os slots cr√≠ticos com base na soma da tabela de quantidades (ou seja, os valores totais das colunas Peso x Quantidade, Custo x Quantidade e Slots cr√≠ticos x Quantidade).  Finalmente, a c√©lula laranja representa o dano total do nosso super tanque recebido com base no dano total da coluna Dano x Quantidade da tabela acima. <br><br>  Antes de come√ßarmos, vamos tornar nossa planilha mais amig√°vel.  Aproveitaremos a oportunidade do Excel para atribuir um nome a cada c√©lula e dar nomes claros a sete c√©lulas na √∫ltima tabela de c√°lculo.  Isso √© opcional, mas a longo prazo, a planilha parecer√° muito mais clara (por exemplo, se, em vez de US $ F $ 21, a c√©lula for chamada MaxCriticalSlots).  Para fazer isso, basta selecionar uma c√©lula e ir para o campo de entrada de nome √† esquerda do campo de f√≥rmula e inserir um novo nome. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/295/3bc/e19/2953bce19ac48c3e2ed4920edbb1e26b.png"></div><br>  Agora, finalmente, vamos ao Excel Solver e localizamos uma solu√ß√£o (v√° para o lado direito da guia Dados e selecione Solver. Se voc√™ n√£o v√™, acesse Op√ß√µes do Excel , selecione a categoria Suplementos ("Complementos"), verifique se Suplementos do Excel est√° selecionado na lista suspensa "Gerenciar", clique em Ir ("Ir ...") e verifique se A caixa de sele√ß√£o Suplemento do Solver est√° marcada. <br><br>  No campo Definir objetivo ("Otimizar a fun√ß√£o objetivo"), selecionaremos a c√©lula laranja do alvo e, em seguida, clique no bot√£o de op√ß√£o M√°ximo ("M√°ximo").  No campo Ao alterar c√©lulas vari√°veis, selecione as c√©lulas de decis√£o (c√©lulas amarelas na coluna Quantidade da segunda tabela).  Abaixo, clique no bot√£o Adicionar para adicionar as seguintes restri√ß√µes: <br><br><ul><li>  Os valores das c√©lulas de decis√£o devem estar no intervalo de 0 a um m√°ximo razo√°vel (escolhemos 50, mesmo que esse seja provavelmente um valor limite muito maior que o necess√°rio).  Tamb√©m √© necess√°rio definir cada c√©lula da solu√ß√£o com uma restri√ß√£o "= n√∫mero inteiro", porque n√£o podemos ter uma parte fracion√°ria do armamento, e o Excel Solver considera cada vari√°vel como um n√∫mero real por padr√£o, a menos que seja indicado o contr√°rio. </li></ul><br><ul><li>  Tamb√©m precisamos limitar os valores do custo total, peso total e n√∫mero total de slots cr√≠ticos aos valores das condi√ß√µes do problema.  A imagem da caixa de di√°logo mostra que agora eles t√™m nomes convenientes que adicionamos √† tabela inferior, o que facilita a leitura da caixa de di√°logo. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b88/86b/402/b8886b40290a1c34dd36245276ef9930.png"></div><br>  Agora clicamos no bot√£o Resolver ("Encontrar uma solu√ß√£o") e, ap√≥s uma breve espera, o Solver preencher√° os valores de Quantidade, o que nos fornecer√° o seguinte: <br><br><ul><li>  1 Metralhadora </li><li>  3 foguetes </li><li>  2 MegaRockets </li><li>  1 Laser </li><li>  1 UltraLaser </li></ul><br>  Tudo isso nos d√° um dano total de 83 unidades e leva exatamente 50 toneladas, 100 cr√©ditos e 3 slots cr√≠ticos.  Voc√™ pode ver que a melhor solu√ß√£o n√£o muda com o tempo de execu√ß√£o do Solver.  Se voc√™ redefinir esses valores e executar uma segunda otimiza√ß√£o, ou acessar Op√ß√µes e alterar a semente, ainda obteremos os mesmos valores.  N√£o podemos ter 100% de certeza de que essa solu√ß√£o √© √≥tima, mas levando em considera√ß√£o o fato de que o Solver n√£o conseguiu aprimor√°-la ap√≥s v√°rias passagens de otimiza√ß√£o, √© muito prov√°vel que seja uma √≥tima op√ß√£o real e n√£o apenas uma m√°xima local. <br><br>  O problema est√° resolvido! <br><br><h2>  Usos adicionais </h2><br>  O legal √© que n√£o apenas resolvemos o problema muito mais r√°pido do que o poder√≠amos lidar manualmente, mas tamb√©m o configuramos de tal forma que nos permite testar quais armas no jogo SuperTank ser√£o mais √∫teis com par√¢metros diferentes (peso, custo, slots cr√≠ticos).  Isso significa que podemos alterar com facilidade o efeito de v√°rias altera√ß√µes nesses par√¢metros no jogo SuperTank, e se queremos adicionar um novo modelo alternativo de super tanque que seja mais leve, mais pesado ou com um n√∫mero diferente de slots cr√≠ticos, isso pode ser feito de maneira muito simples. <br><br>  Ao alterar todos esses par√¢metros, tamb√©m podemos entender a utilidade relativa de cada uma dessas armas e determinar rapidamente qual √© muito √∫til, n√£o √© √∫til o suficiente, tem um pre√ßo que n√£o √© adequado para seu peso e dano, e assim por diante. <br><br>  Novamente, o ponto √© que essa ferramenta nos permite pesquisar o espa√ßo do design muito mais r√°pido do que manualmente.  Ele nos oferece uma oportunidade conveniente de avaliar o efeito de tais altera√ß√µes para qualquer solu√ß√£o de design incremental que possamos encontrar, seja alterando os par√¢metros da arma ou do super tanque em si, adicionando novas armas ou modelos de super tanques, bem como adicionando novos par√¢metros (digamos que o limite de tamanho esteja em metros c√∫bicos). <br><br>  Para entender o que quero dizer, v√° para a c√©lula azul ‚ÄúMax Cost‚Äù e altere seu valor de 100 para 99. Agora execute o Solver novamente e voc√™ obter√° um layout de arma completamente diferente: <br><br><ul><li>  0 Metralhadoras </li><li>  2 foguetes </li><li>  3 MegaRockets </li><li>  3 lasers </li><li>  0 UltraLasers </li></ul><br>  Esse esquema fornece um √≠ndice de danos um pouco menor (82 em vez de 83), mas √© radicalmente diferente do anterior. <br><br>  Se voc√™ definir o valor de Custo m√°ximo como 101 ou 102 e executar o c√°lculo novamente, existe a chance de obtermos uma configura√ß√£o semelhante √† primeira ou coincidir com ela;  seja como for, o dano permanecer√° igual a 83 (os esquemas podem mudar, porque nesses casos existem v√°rios esquemas √≥timos).  No entanto, se voc√™ definir o Custo m√°ximo como 103, dever√° obter o seguinte: <br><br><ul><li>  1 Metralhadora </li><li>  4 foguetes </li><li>  2 MegaRockets </li><li>  0 lasers </li><li>  1 UltraLaser </li></ul><br>  O que aumenta o dano total para 84. <br><br>  Isso √© interessante: esse arranjo de armas √© muito diferente dos dois primeiros. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/106/807/611/106807611d9a60e93d06f9ddeca3f7f6.png"></div><br>  Como voc√™ pode ver, obtemos um resultado inesperado: a escolha ideal de armas em nosso esquema depende fortemente dos par√¢metros do super tanque e pode variar significativamente mesmo com pequenas altera√ß√µes nesses par√¢metros.  Al√©m disso, ele nos fornece todo tipo de informa√ß√£o √∫til: todos os cinco tipos de armas s√£o √∫teis em pelo menos duas das tr√™s configura√ß√µes de super tanques, e Rockets e MegaRockets s√£o obviamente √∫teis nas tr√™s.  Parece que isso nos diz que todos os cinco tipos de armas s√£o bem equilibrados, ou seja, √∫teis entre si e, ao mesmo tempo, permanecem √∫nicos. <br><br>  E como voc√™ tamb√©m pode notar, essa modelagem e otimiza√ß√£o de solu√ß√µes nos oferece uma excelente oportunidade para executar rapidamente pesquisas em um bairro local e otimizar novamente.  Para alguns tipos de tarefas, nos permitir√° detectar estrat√©gias e fa√ßanhas dominantes de jogadores que s√£o dif√≠ceis ou imposs√≠veis de encontrar de qualquer outra maneira. <br><br><h2>  Teleporte - Buracos de Minhoca </h2><br>  Observando os dois √∫ltimos exemplos (o exemplo das taxas de imposto em um jogo estrat√©gico e o SuperTank), voc√™ pode pensar que essas t√©cnicas s√£o aplic√°veis ‚Äã‚Äãapenas nos casos em que os usu√°rios est√£o lidando com n√∫meros.  Mas voc√™ estar√° absolutamente errado!  Como veremos, h√° muitos exemplos de como voc√™ pode obter os benef√≠cios de otimizar elementos de design que n√£o apenas n√£o se parecem com n√∫meros para os usu√°rios, mas nem se parecem com eles! <br><br>  Voc√™ tamb√©m pode pensar que a modelagem de decis√£o √© aplic√°vel apenas √†s decis√µes que os jogadores podem tomar nos jogos.  Isso tamb√©m n√£o √© verdade: em alguns casos, eles podem ser usados ‚Äã‚Äãpara modelagem, a fim de otimizar suas pr√≥prias solu√ß√µes como designer. <br><br>  Suponha que voc√™ esteja trabalhando em um MMORPG espacial.  Um dia, seu designer principal chega at√© voc√™ com uma ansiedade vis√≠vel no rosto.  "Estamos concluindo uma reformula√ß√£o do setor Omega", diz ele.  ‚ÄúE n√≥s tivemos um problema.  Planejamos adicionar alguns teleportadores de buraco de minhoca "neste segmento do mundo, mas n√£o podemos concordar sobre onde coloc√°-los". <br><br>  "Quantos teleportadores?" Voc√™ pergunta. <br><br>  Ainda n√£o sabemos.  Provavelmente tr√™s, mas pode haver de duas a quatro.  Ainda n√£o temos certeza.  Ent√£o ele mostra um mapa que se parece com isso: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0db/a6e/bc1/0dba6ebc16043666d174e5b3269a2965.png"></div><br>  "O que √© isso?" Voc√™ pergunta. <br><br>  ‚ÄúEste √© um mapa do setor Omega.  Ou pelo menos os sistemas estelares que um jogador pode visitar neste quadrante.  Precisamos determinar em quais c√©lulas os buracos de minhoca devem estar. ‚Äù <br><br>  ‚ÄúBem, ent√£o, e sob quais regras elas s√£o colocadas?  √â poss√≠vel colocar o buraco de minhoca em um quadrante com o sistema estelar? ‚Äù <br><br>  ‚ÄúQueremos que voc√™ coloque os buracos de minhoca de forma a minimizar a dist√¢ncia de qualquer sistema estelar ao buraco de minhoca mais pr√≥ximo.  E sim, voc√™ pode coloc√°-los no mesmo quadrante que o sistema estelar;  eles s√£o apenas pequenos teleportadores pendurados no espa√ßo, para que possam ser colocados em qualquer lugar.  E lembre-se de que ainda n√£o decidimos quantas devem existir, ent√£o me d√™ solu√ß√µes para 2, 3 e 4 buracos de minhoca. ‚Äù <br><br>  Como formular esse problema e como resolv√™-lo? <br><br><h2>  Otimizando teleportadores! </h2><br>  Vamos come√ßar preparando c√©lulas de solu√ß√£o.  Denotamos os quatro teleporte como A, B, C e D. Sabemos que cada teleporte √© essencialmente nada al√©m de coordenadas (x, y) no mapa estelar do setor Omega.  Tamb√©m sabemos que precisaremos de alguma maneira de indicar o n√∫mero de teleporte ativo; portanto, adicionaremos uma c√©lula que permite definir o n√∫mero de teleporte.  N√≥s usamos o teletransporte D apenas quando quatro buracos de minhoca s√£o usados ‚Äã‚Äãe C somente quando temos tr√™s ou mais. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e25/6b2/68d/e256b268da6878a1a79c14d2b7bfeb48.png"></div><br>  Abaixo prepararemos uma tabela para calcular a dist√¢ncia de cada sistema estelar ao teleporte mais pr√≥ximo.  Essa tabela fica assim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cdf/4d8/410/cdf4d8410caa870a35ce2dfbe2f2be19.png"></div><br>  O azul esquerdo mostra as coordenadas de cada sistema estelar no mapa.  Cada linha √© um sistema estelar.  N√≥s simplesmente os transferimos do mapa do setor Omega, que nos foi dado pelo designer l√≠der. <br><br>  √Ä direita, calculamos a dist√¢ncia de cada um dos quatro teleportadores.  Este √© apenas um teorema de Pit√°goras.  A dist√¢ncia √© calculada como a raiz quadrada das dist√¢ncias horizontal e vertical entre o sistema estelar e o teletransporte: <br><br><blockquote>  <b>= SQRT (($ B14-Ax) ^ 2 + ($ C14-Ay) ^ 2)</b> </blockquote><br>  (N√£o se preocupe, prometo que essa √© a matem√°tica mais dif√≠cil que encontraremos na s√©rie!) <br><br>  Pegamos as coordenadas X e Y de cada sistema estelar das c√©lulas azuis da tabela acima e as coordenadas X e Y de cada teleporte (c√©lulas com os nomes Ax e Ay para o teleporte A na fun√ß√£o SQRT () mostrada acima) das c√©lulas amarelas da solu√ß√£o no topo. <br><br>  Finalmente, pegamos o m√≠nimo desses quatro valores na coluna Dist to Closest, ou seja, simplesmente usamos a fun√ß√£o MIN () para determinar o m√≠nimo de quatro valores √† esquerda.  Em seguida, resumimos a coluna inteira abaixo;  a soma √© a c√©lula de destino. <br><br>  Voc√™ deve ter notado que, na captura de tela acima, todas as c√©lulas est√£o definidas como Dist como D. O motivo √© que estamos usando a c√©lula "N√∫mero de teleportadores?"  na se√ß√£o superior do modelo de solu√ß√£o, que permite configurar o n√∫mero de teleportos levados em considera√ß√£o.  Se o n√∫mero de teleportadores for 2, usaremos o valor 99 em Dist para C e Dist para D, e se for 3, o valor 99 ser√° usado apenas na coluna Dist para D. Portanto, cada sistema em estrela ignorar√° todos os teleportadores desnecess√°rios. ao calcular a dist√¢ncia at√© o teleporte mais pr√≥ximo no caso de 2 ou 3 teleporte. <br><br>  Agora lan√ßaremos o Solver: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/526/3f6/35c/5263f635cf3425abfe0f6ede918faf68.png"></div><br>  A c√©lula de destino √© a soma na parte inferior da coluna Dist para o mais pr√≥ximo.  Observe que, diferentemente de outros exemplos, aqui queremos usar o bot√£o de op√ß√£o "Para: Min" porque precisamos de uma dist√¢ncia m√≠nima entre todos os sistemas em estrela e teleportadores, e n√£o no m√°ximo. <br><br>  Abaixo, indicaremos oito c√©lulas amarelas para resolver as coordenadas X e Y dos buracos de minhoca A, B, C e D como c√©lulas das solu√ß√µes (alterando c√©lulas vari√°veis) .Na se√ß√£o restri√ß√µes, limitaremos cada uma das coordenadas como um valor inteiro no intervalo de 0 a 12. Observe que usamos uma restri√ß√£o de n√∫mero inteiro para essas c√©lulas da solu√ß√£o, porque queremos dizer que o designer principal quer apenas saber em qual c√©lula cada teleporte estar√°, mas podemos facilmente ignorar essa restri√ß√£o se o designer precisar de coordenadas de material. <br><br>  Se pedirmos "N√∫mero de teleportadores?"  valores 2, 3 e 4 e, em seguida, lan√ßaremos o Solver em cada valor, obteremos as seguintes configura√ß√µes: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb3/705/3d0/fb37053d0bb564a0ec27a7a45e4e8c32.png"></div><br>  Tendo essas informa√ß√µes, podemos abordar o designer l√≠der e mostrar a ele os locais ideais para a localiza√ß√£o de qualquer n√∫mero de teleportadores no intervalo de 2 a 4. √â assim que as localiza√ß√µes √≥timas dos "buracos de minhoca" para 2, 3 e 4 teleportadores ficam no mapa (mostrado em verde). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ca/08d/551/6ca08d5517b7f57754deab8408117e19.png"></div><br>  A planilha para este exemplo pode ser baixada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br><h2>  Eu falei sobre o ninja? </h2><br>  "Incr√≠vel", diz o designer-chefe, mas voc√™ v√™ sofrimento em seu rosto.  ‚ÄúUh, mas eu esqueci de lhe dizer que alguns desses sistemas s√£o habitados por ninjas espaciais.  E queremos que os sistemas com o ninja estejam mais distantes dos "buracos de minhoca" para que os jogadores n√£o sintam uma amea√ßa excessiva ". <br><br>  ‚ÄúUau.  Isso est√° mudando completamente o caso. " <br><br>  ‚ÄúCerto.  Al√©m disso, em alguns sistemas estelares n√£o h√° uma, mas duas col√¥nias, ou seja, elas s√£o duas vezes mais importantes do que estarem pr√≥ximas dos teleportadores.  Ou √© duas vezes mais importante para ser mais longe se for um sistema com duas col√¥nias de ninjas espaciais.  Aqui est√° a apar√™ncia do mapa agora: " <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ab/b1c/2de/1abb1c2dea24fc72efbf45d034cb2fdb.png"></div><br>  Ele continua: ‚ÄúCada n√∫mero negativo √© uma col√¥nia de ninjas do espa√ßo.  O sistema com o n√∫mero 2 cont√©m duas col√¥nias humanas e, com o n√∫mero -2, cont√©m duas col√¥nias do ninja.  Voc√™ pode me dizer onde colocar os teletransportadores neste caso? <br><br>  "Diga-me, pelo menos voc√™ j√° decidiu quantos teleportos haver√°: 2, 3 ou 4?", Voc√™ pergunta sarcasticamente. <br><br>  "Ainda n√£o tenho medo." <br><br><h2>  N√≥s resolvemos levando em considera√ß√£o o ninja </h2><br>  Para resolver esse problema, precisamos adicionar uma nova coluna √† tabela que indique o peso da tabela.  Vamos cham√°-lo de "multiplicador".  Simplesmente multiplicaremos esse valor pelo valor na coluna Dist para o mais pr√≥ximo. <br><br>  Quando fazemos isso, Dist to Closest muda ligeiramente seu significado.  Agora, essa n√£o √© a dist√¢ncia para o sistema estelar mais pr√≥ximo, porque para os sistemas estelares ninjas o valor muda em -1 vezes.  Assemelha-se a "pontos" (pontua√ß√£o) mais generalizados, ent√£o vamos cham√°-los assim. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/667/7e8/edd/6677e8edddd9fa2ac4fecf1ae499f069.png"></div><br>  Assim, os pontos agora indicam o valor acumulado.  Ao minimiz√°-lo, fazemos com que o Solver se esforce para estar o mais pr√≥ximo poss√≠vel dos sistemas com col√¥nias humanas e, ao mesmo tempo, o mais distante poss√≠vel dos sistemas ninjas habitados. <br><br>  Agora temos os seguintes resultados: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/910/372/a85/910372a8558cafb6e62a3b9298c230fc.png"></div><br>  Como voc√™ pode ver, isso nos d√° a configura√ß√£o de teleportadores, em cada caso muito diferentes das vers√µes mais simples sem um ninja. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/92a/1a4/727/92a1a4727400d6279a03988381e75f5b.png"></div><br>  A planilha para esta vers√£o estendida do exemplo de teleporte pode ser baixada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  Como voc√™ pode ver, nosso modelo de solu√ß√£o foi capaz de resolver muito rapidamente essa tarefa n√£o trivial e podemos adapt√°-la √†s mudan√ßas de requisitos. <br><br>  Essa tarefa pertence √† classe de tarefas denominadas "tarefas de aloca√ß√£o de objetos", que s√£o muito bem estudadas no campo do gerenciamento operacional.  Mas, como voc√™ pode ver, eles podem ser potencialmente usados ‚Äã‚Äãno design de jogos, bem como no design de n√≠veis, e a solu√ß√£o √© simples (se n√£o trivial) no Excel. <br><br><h2>     Player-vs-Player </h2><br> <i>       : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a></i> <br><br><h2>     </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nas tr√™s partes anteriores desta s√©rie de artigos, nos apresentamos ao conceito de modelagem e otimiza√ß√£o de solu√ß√µes, bem como √† ferramenta Solver do pacote Excel. Mostramos como eles podem ser usados ‚Äã‚Äãpara calcular as taxas de imposto ideais da cidade na estrat√©gia 4X, para determinar o posicionamento ideal dos teleportadores no jogo espacial e para selecionar o layout ideal de armas para a tarefa de super tanque descrita na primeira parte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Uma quest√£o natural surge: que tal equilibrar o jogo? √â poss√≠vel aplicar t√©cnicas semelhantes a todos os tipos de tarefas complexas de balanceamento encontradas em muitos tipos diferentes de jogos, em particular em estrat√©gias, RPG e MMORPG?</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A resposta a esta pergunta √© sim, √© claro, mas com muitas reservas. As planilhas, em particular, t√™m muitas limita√ß√µes, porque na maioria dos casos n√£o triviais elas n√£o descrevem com precis√£o o jogo. Portanto, ser√° dif√≠cil executar um balanceamento confi√°vel usando t√©cnicas de otimiza√ß√£o; as tarefas reais de balanceamento da grande maioria dos jogos estar√£o muito al√©m do que podemos modelar em uma planilha. A simula√ß√£o do jogo em si √© geralmente muito complicada, tem muitas "partes m√≥veis" e √© frequentemente realizada em tempo real. Ao tentar fazer simula√ß√µes discretas, podemos encontrar todos os tipos de problemas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, se quisermos usar t√©cnicas semelhantes para equilibrar classes em MMORPGs como o </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WildStar</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou em jogos estrat√©gicos como</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aniquila√ß√£o Planet√°ria</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , para garantir ao menos alguma precis√£o e utilidade, ter√≠amos que integr√°-las na simula√ß√£o do pr√≥prio jogo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Al√©m disso, a verdade √© que alguns aspectos do balanceamento n√£o podem ser automatizados; como explicamos na</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> primeira parte do</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> artigo, √© imposs√≠vel ajustar automaticamente a experi√™ncia do jogo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portanto, o melhor que podemos esperar √© uma demonstra√ß√£o de um exemplo simples que ilustra uma abordagem geral para tarefas desse tipo: com um exemplo simples no Excel, aprenderemos como abordar a formula√ß√£o desse tipo de problemas de balanceamento e otimiz√°-los. </font><font style="vertical-align: inherit;">Mostraremos que, pelo menos para um exemplo de uma batalha simples, o Solver pode equilibrar v√°rias classes de RPG entre si. </font><font style="vertical-align: inherit;">Ent√£o voc√™ pode usar essa estrutura b√°sica como base para resolver esses problemas de otimiza√ß√£o com um esquema mais complexo e mais profundamente integrado √† simula√ß√£o do jogo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esperamos que voc√™ conhe√ßa todos os truques e veja o que esse exemplo simples pode nos dar.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Desequilibrado </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o existe uma defini√ß√£o √∫nica e geralmente aceita da palavra "balanceamento". Tem muitos significados, e verdade geralmente depende do contexto do jogo em quest√£o. Em diferentes condi√ß√µes, o equil√≠brio pode estar relacionado √† cria√ß√£o de v√°rias classes de personagens, a fim de igualar suas capacidades em um jogo de interpreta√ß√£o de pap√©is, com o n√∫mero de for√ßas dos oponentes lutando entre si em um jogo estrat√©gico ou com o ajuste do custo de v√°rias unidades ou recursos, de acordo com sua utilidade. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A melhor defini√ß√£o de "balanceamento" geralmente depende dos objetivos de design do jogo em quest√£o, mas como esses objetivos podem ser qualquer um, √© imposs√≠vel </font><font style="vertical-align: inherit;">determinar a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">priori o</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> que o equil√≠brio realmente significa para os jogos em geral.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alguns jogadores tendem a acreditar que equilibrar na batalha significa dano igual. </font><font style="vertical-align: inherit;">Isso √© especialmente verdadeiro para os MMORPGs, nos quais os jogadores costumam reclamar que o dano por segundo (DPS) de uma classe √© muito pequeno ou muito grande em rela√ß√£o aos outros. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, as classes n√£o podem ser balanceadas apenas pelo DPS; </font><font style="vertical-align: inherit;">√© aceit√°vel que uma classe tenha um DPS maior que outro, mas isso deve ser compensado por outros fatores que limitam a utilidade geral da classe, por exemplo, sobreviv√™ncia reduzida ou menos DPS a longo prazo em compara√ß√£o com o DPS a curto prazo.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MMO min√∫sculo </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Imagine que estamos criando um novo projeto, um RPG online simplificado para v√°rios jogadores, chamado "Tiny MMO". </font><font style="vertical-align: inherit;">Como parte do desenvolvimento do design, nos esfor√ßamos para equilibrar as quatro classes de lutas de jogador para jogador (PVP), para que todas as quatro classes sejam relativamente iguais na batalha umas contra as outras e que n√£o haja uma classe clara "melhor" ou "pior" que Voc√™ pode lutar contra outras classes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Embora o Tiny MMO seja um jogo em tempo real, a a√ß√£o de cada jogador dura exatamente 3 segundos, para que possamos discretiz√°-lo apresentando-o como um jogo baseado em turnos, no qual cada movimento √© uma parte de tr√™s segundos da jogabilidade. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os jogadores deste jogo podem escolher uma das quatro classes de personagem:</font></font><br><br><ul><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Guerreiro</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> faz o maior dano.</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mago</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> lan√ßa feiti√ßos √† dist√¢ncia e tem o maior alcance de ataque das quatro classes</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Curandeiro (Curandeiro) √©</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tratado automaticamente, restaurando a cada turno uma certa parte de sua sa√∫de</font></font></li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B√°rbaro (B√°rbaro)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tem mais sa√∫de</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Isso √© tudo o que sabemos sobre essas quatro classes e precisamos definir os par√¢metros iniciais de sa√∫de (HP), dano, cura e alcance dos ataques para todas as quatro classes. </font><font style="vertical-align: inherit;">Precisamos equilibr√°-los de forma que cada classe seja √∫nica e suas caracter√≠sticas diferam significativamente de todas as outras classes, mas, como resultado, cada classe acaba sendo o mais "equilibrada" poss√≠vel em rela√ß√£o √†s outras tr√™s. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em outras palavras, buscamos otimizar a tabela a seguir:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2a5/bb2/b9a/2a5bb2b9a8a5b91eed643b89f168cd5f.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Enquanto usamos valores tempor√°rios e assumimos que cada classe come√ßa com 50 PV, causa 10 de dano por turno, cura 0 PV por turno e tem um alcance de ataque de 40 metros. Cada personagem se move a uma velocidade de 10 metros por turno. Como o design indica que todas as quatro classes de caracteres podem se mover na mesma velocidade, consideraremos esse valor constante e n√£o inseriremos a velocidade do movimento na tabela de vari√°veis ‚Äã‚Äãde decis√£o.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, este √© um estudo de caso com um modelo de dano muito simplificado. Esse √© um valor m√©dio cont√≠nuo de dano por segundo, que ignora a diferen√ßa entre dano por impulso e dano a longo prazo, bem como mana e outras mec√¢nicas que modificam as habilidades de ataque das classes. Teremos apenas um tipo de dano, o que √© bastante irreal, porque a maioria das classes tem dezenas de tipos de dano, e precisaremos implementar um sistema de IA que selecione o ataque a cada turno. Al√©m disso, na maioria dos jogos, o dano tem um elemento de aleatoriedade, mas por enquanto vamos omitir isso e assumir que a variabilidade do dano n√£o √© t√£o grande que afeta significativamente o resultado da batalha entre as duas classes.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, √© improv√°vel que qualquer equil√≠brio realizado no Excel seja ideal ou consistente com o saldo final do jogo; </font><font style="vertical-align: inherit;">ela ter√° que passar por muitas itera√ß√µes de playtesting. </font><font style="vertical-align: inherit;">Mas se levarmos uma ou duas horas para obter uma </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">boa</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> primeira op√ß√£o para o nosso jogo no Excel, pelo menos temos muito mais chances de nos aproximarmos dos par√¢metros qualitativos do saldo inicial, o que nos aproximar√° do saldo final que queremos obter.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mesa da vit√≥ria </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Precisamos equilibrar quatro classes entre si em uma batalha individual. </font><font style="vertical-align: inherit;">Como temos apenas 4 classes (Guerreiro, Mago, Curandeiro e B√°rbaro), existem 6 combina√ß√µes poss√≠veis de classes diferentes:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guerreiro - Mago </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guerreiro - Curandeiro </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Guerreiro - B√°rbaro </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mago - Curandeiro </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mago - b√°rbaro </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Curandeiro - b√°rbaro </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esse equil√≠brio pode ser bastante complicado. </font><font style="vertical-align: inherit;">Mesmo no nosso caso bastante simples, com quatro classes, temos seis rela√ß√µes interclasses, assim como podemos desenhar seis linhas entre quatro pontos de um quadrado.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/52f/bc5/6e2/52fbc56e2c50d662a5236a089c8c9fdc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sempre que queremos fazer uma pequena altera√ß√£o em um dos par√¢metros de qualquer uma das classes, essa altera√ß√£o tamb√©m afetar√° o equil√≠brio do PvP entre esse par de classes e as </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outras</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> duas classes. </font><font style="vertical-align: inherit;">Essa interconectividade da lei de poder s√≥ aumentar√° com o aumento do n√∫mero de classes, e as decis√µes sobre o equil√≠brio do PvP entre qualquer par de classes feitas "no v√°cuo", sem levar em conta todas as outras intera√ß√µes, podem se tornar muito perigosas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Idealmente, gostar√≠amos de criar algum tipo de </font><i><font style="vertical-align: inherit;">mesa</font></i><font style="vertical-align: inherit;"> de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vit√≥ria</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">como o mostrado abaixo. </font><font style="vertical-align: inherit;">Se pudermos simular uma batalha entre cada um desses 6 pares em uma planilha, poderemos gerar uma certa vari√°vel de "pontos" para cada um dos 6 pares. </font><font style="vertical-align: inherit;">Quanto mais pontos, melhor, para que possamos combinar todos esses seis pontos para gerar uma fun√ß√£o de objetivo.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b2f/b4f/6e8/b2fb4f6e8317a42dfc6696d1c41ade97.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Observe que na tabela acima, as c√©lulas ao longo das diagonais s√£o zero, porque denotam pares da mesma classe que ser√£o equilibrados por defini√ß√£o. </font><font style="vertical-align: inherit;">Al√©m disso, as c√©lulas no canto superior direito tamb√©m s√£o zero, porque denotam exatamente os mesmos pares que nas c√©lulas no canto inferior esquerdo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora vamos preparar o modelo para a batalha entre duas classes diferentes.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Simulador de batalha" </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organizaremos cada par de aulas a uma dist√¢ncia de 100 metros um do outro. </font><font style="vertical-align: inherit;">Cada personagem tem 3 segundos para atacar, ent√£o podemos imaginar isso como uma simula√ß√£o baseada em turnos, na qual cada "movimento" significa 3 segundos. </font><font style="vertical-align: inherit;">Em cada "movimento", cada personagem ataca o outro, se ele estiver dentro do alcance do ataque, ou continua a se mover para reduzir a dist√¢ncia. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A simula√ß√£o √© assim:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b1/7ce/236/3b17ce2366faaece720a363f57c261d9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Acima est√° um par de personagens que entraram na batalha: neste caso, Mage (classe 1) e Healer (classe 2). </font><font style="vertical-align: inherit;">A coluna da esquerda mostra a dist√¢ncia atual entre os dois caracteres simulados. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para cada caractere, as colunas ser√£o:</font></font><br><br><ul><li> <b>Max Range</b> :   ,     .           . </li><li> <b>Healing</b> :      ,      . </li><li> <b>HP</b> :      .      HP    ,        .         ,         . </li><li> <b>Damage</b> :  ,   ,       .   ,     0. </li><li> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ataques? </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">: Esta coluna verifica se o personagem est√° dentro do alcance do ataque. </font><font style="vertical-align: inherit;">Se sim, isso significa que o personagem est√° atacando no turno atual; </font><font style="vertical-align: inherit;">caso contr√°rio, o personagem se aproxima para alcan√ßar outro personagem.</font></font></li></ul><br>  Assim, os dois personagens come√ßam a se mover e depois atacam at√© que um deles ou ambos morram.  Cada personagem se move a cada 3 segundos e 5 metros (5 metros por "turno").  Quando os dois personagens se movem um para o outro, o alcance muda em cada turno em 10 unidades e em 5 unidades se apenas um deles se mover.  O jogo em si √© estruturado para que os dois personagens possam come√ßar a se mover simultaneamente, ap√≥s o que o movimento √© permitido ao mesmo tempo, para que seja poss√≠vel que ambos os personagens morram ao mesmo tempo. <br><br>  Em seguida, precisamos configurar a pontua√ß√£o para esta tabela e gerar um valor num√©rico indicando o qu√£o ‚Äúboa‚Äù a batalha foi;  em outras palavras, qu√£o pr√≥ximos estamos de alcan√ßar nossos objetivos de design. <br><br>  Obviamente, queremos que os dois personagens estejam mortos at√© o final da batalha, ou pelo menos o mais pr√≥ximo poss√≠vel da morte.  Se a batalha for equilibrada, as duas classes de luta dever√£o minimizar a sa√∫de do inimigo no final da batalha. <br><br>  No entanto, isso por si s√≥ n√£o √© suficiente.  Se organizarmos a pontua√ß√£o dessa maneira, o otimizador simplesmente maximizar√° os valores de dano para que os dois personagens se matem instantaneamente!  (Se voc√™ estiver curioso, tente alterar a planilha anexada ao artigo para ver por si mesmo.)  Obviamente, n√£o estamos buscando a morte instant√¢nea: precisamos que ambos os personagens estejam mortos ou quase mortos at√© o final da batalha, mas <i>ao mesmo tempo</i> queremos que a luta dure um tempo razo√°vel. <br><br>  Em outras palavras, n√£o estamos apenas nos esfor√ßando para garantir um equil√≠brio relativamente igual de todas as classes entre si;  tamb√©m queremos tornar o equil√≠brio <i>interessante</i> , incluindo os combates que duram uma quantidade de tempo adequada. <br><br>  Para gerar uma estimativa de saldo, precisamos criar v√°rias c√©lulas √† direita de cada tabela.  <i>Dura√ß√£o</i> indica a dura√ß√£o da batalha;  ela conta o n√∫mero de linhas na tabela em que os <i>dois</i> personagens ainda est√£o vivos.  <i>O HP total</i> calcula o total de pontos de vida dos dois personagens sobreviventes.  Idealmente, deve ser 0, ou seja, quando a batalha termina, os dois personagens est√£o morrendo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/957/514/77c/95751477c6324ce2fc26e41c6979122a.png"></div><br>  E, finalmente, o Score combina a dura√ß√£o e a quantidade total de pontos de vida no formato (Dura√ß√£o / (1 + HP total)).  Observe que adicionamos 1 ao divisor, porque o HP total pode ser 0 e, nesse caso, obter√≠amos uma divis√£o por erro zero.  Dessa forma, podemos garantir que recompensamos o otimizador por encontrar a dura√ß√£o m√°xima da batalha <i>e o</i> valor m√≠nimo da soma dos pontos de vida. <br><br>  (Observe que, como temos 17 linhas em cada ‚Äúsimula√ß√£o‚Äù de combate de classe para classe. Isso significa que basicamente tomamos uma decis√£o de design de que a luta deve durar cerca de 17 rodadas. Se queremos que a luta seja mais curta ou por mais tempo, voc√™ pode alterar o n√∫mero de linhas, editar a f√≥rmula para calcular a pontua√ß√£o e executar uma segunda otimiza√ß√£o de acordo.) <br><br>  Finalmente, pegamos esses seis valores de pontua√ß√£o (um para cada tabela) e os usamos na tabela de vit√≥rias acima para mostrar os resultados da batalha entre cada par de classes. <br><br>  Voc√™ pode simplesmente resumir esses seis valores de pontua√ß√£o e usar o resultado como o valor final da pontua√ß√£o.  No entanto, se fizermos isso, o Solver provavelmente n√£o conseguir√° encontrar um bom equil√≠brio entre as classifica√ß√µes mais alta e mais baixa para lutas individuais e tamb√©m receber√° classifica√ß√µes muito altas para alguns pares de classes e classifica√ß√µes baixas para outras.  N√£o √© isso que queremos: precisamos que <i>todas as</i> notas sejam altas e nos esfor√ßamos para elevar todas elas.  Para corrigir isso, multiplicamos a soma das notas pela nota <i>mais</i> baixa do grupo (usando a fun√ß√£o Excel MIN ()) para fazer o Solver se concentrar nas notas com o valor mais baixo. <br><br><h2>  Adicionar restri√ß√µes </h2><br>  Ainda n√£o terminamos.  Se voc√™ otimizar um modelo de solu√ß√£o com par√¢metros atuais, provavelmente as classes n√£o ser√£o configuradas corretamente - na verdade, √© altamente prov√°vel que o modelo grave os mesmos valores de HP, Dano, Cura e Faixa na tabela de vari√°veis ‚Äã‚Äãde decis√£o. <br><br>  E, √© claro, queremos que cada classe tenha sua pr√≥pria personalidade.  Precisamos de Warrior para causar o maior dano, Mago tem o maior alcance, Curandeiro tem o valor m√°ximo de Cura e B√°rbaro tem o HP mais alto.  Tamb√©m queremos que essas diferen√ßas n√£o sejam muito pequenas - precisamos que essas classes sejam muito diferentes umas das outras. <br><br>  Para fazer isso, criaremos uma pequena tabela de restri√ß√µes.  Esta tabela garante que cada uma das quatro classes tenha um atributo correspondente e, em seguida, d√™ uma pontua√ß√£o de 0 ou 1, dependendo se a condi√ß√£o de restri√ß√£o for atendida. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/91a/a33/010/91aa330102f6855b19ddc62b21e4b1a3.png"></div><br>  A tabela Diferen√ßa m√≠nima √† direita mostra a diferen√ßa m√≠nima de cada atributo da classe em rela√ß√£o a todas as outras classes.  Em outras palavras, Warrior deve ter pelo menos 4 HP a mais de dano do que todas as outras classes, Mage deve ter um alcance de ataque de pelo menos 10 mais e assim por diante. <br><br>  Agora que adicionamos essas restri√ß√µes especiais, √© hora de otimizar! <br><br><h2>  Procurar solu√ß√µes </h2><br>  Agora podemos executar a ferramenta Solver (‚ÄúFinding Solutions‚Äù) embutida no Excel para tentar otimizar os par√¢metros iniciais.  Como c√©lula alvo, selecionaremos a c√©lula Pontua√ß√£o, que combina os resultados de todos os seis torneios.  Definimos as vari√°veis ‚Äã‚Äãde decis√£o para incluir todas as 16 c√©lulas na tabela amarela de vari√°veis ‚Äã‚Äãde decis√£o que criamos no in√≠cio. <br><br>  Tamb√©m definimos as restri√ß√µes (no campo Assunto para as restri√ß√µes) da seguinte maneira: <br><br><ul><li>  Todas as c√©lulas de decis√£o devem ser inteiras com um valor m√≠nimo de 0. </li><li>  Todas as c√©lulas na coluna HP devem ter um valor m√°ximo de 200 e um m√≠nimo de 30. </li><li>  Todas as c√©lulas na coluna Dano t√™m um valor m√°ximo de 20. </li><li>  Todas as c√©lulas na coluna Cura t√™m um valor m√°ximo de 15. </li><li>  Todas as c√©lulas na coluna Intervalo t√™m um valor m√°ximo de 100. </li><li>  Al√©m disso, todas as quatro c√©lulas na se√ß√£o Restri√ß√µes especiais devem ser definidas como 1 para satisfazer suas condi√ß√µes especiais. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc0/cae/d5a/fc0caed5a1d370e16c71d9b2f3ef7933.png"></div><br>  Por fim, defina o M√©todo de resolu√ß√£o como Evolucion√°rio e execute o Solver.  Observe que, como se trata de um algoritmo evolutivo, existe a chance de melhorar a solu√ß√£o encontrada durante a segunda ou terceira execu√ß√£o do Solver ou ap√≥s definir par√¢metros (bot√£o Op√ß√µes) para otimiza√ß√£o evolutiva. <br><br>  Como resultado, devemos obter algo semelhante: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ad/d71/2c6/0add712c65d58c0182fd01b362787d1c.png"></div><br>  ... e, como que por m√°gica, o Solver nos deu uma boa configura√ß√£o de saldo inicial. <br><br>  Como voc√™ pode ver, Warrior agora causa mais danos, Mage tem o maior alcance, Healer cura melhor e Barbarian tem mais HP.  Al√©m disso, voc√™ pode ir at√© os resultados de torneios individuais ‚Äúclasse contra classe‚Äù e ver como as classes se mostraram em batalha entre si;  como voc√™ pode ver, a maioria deles √© equilibrada de maneira muito uniforme - no final da batalha, ambas as classes est√£o morrendo ou uma delas mal sobrevive.  Al√©m disso, todos os torneios duram o suficiente, nenhuma das classes pode "bater" na outra. <br><br>  Nada mal por algumas horas de trabalho, certo? <br><br><h2>  Conclus√£o </h2><br>  Neste exemplo, criamos uma tarefa de balanceamento simples e demonstramos que, de fato, podemos resolv√™-la com a ajuda da simula√ß√£o e otimiza√ß√£o.  Embora seja √≥bvio que este √© um exemplo simples, ele nos mostra o poder das t√©cnicas de modelagem e da otimiza√ß√£o de decis√µes.  Al√©m disso, pode se tornar uma fonte de inspira√ß√£o que pode ser usada em ferramentas de balanceamento mais complexas, fortemente integradas na simula√ß√£o do jogo.  Esperamos que voc√™ possa usar este exemplo como um guia para formular essas tarefas na pr√°tica. <br><br>  Nas pr√≥ximas duas partes da s√©rie, abordaremos a √°rea de tarefas de atribui√ß√£o, que est√° associada √† sele√ß√£o de atribui√ß√µes ideais de dois ou mais conjuntos de entidades.  Mostraremos como resolver esses tipos de problemas e demonstraremos como usamos essa abordagem para criar o design da torre em nosso jogo de estrat√©gia para iOS / Android <i>City Conquest</i> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430114/">https://habr.com/ru/post/pt430114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430102/index.html">ENOG 15: ‚ÄúPor que a Internet ainda est√° online?‚Äù</a></li>
<li><a href="../pt430104/index.html">Dados m√©dicos N√£o emita um cart√£o m√©dico em suas m√£os</a></li>
<li><a href="../pt430106/index.html">Novo na XYZprinting na IMTS 2018: Rob√¥s e impressoras 3D</a></li>
<li><a href="../pt430108/index.html">Por que "Jovem T√©cnico" n√£o ser√° capaz de construir um laser</a></li>
<li><a href="../pt430112/index.html">Como ensinamos um carro a conversar com milh√µes de pessoas</a></li>
<li><a href="../pt430116/index.html">Os computadores escrevem prosa, mas ainda inferiores √†s pessoas. Porque</a></li>
<li><a href="../pt430118/index.html">Unity3D: modificar delegado de aplicativo para iOS</a></li>
<li><a href="../pt430120/index.html">Domar a fera. O que enfrentamos ao desenvolver um aplicativo de di√°rio pessoal no React Native</a></li>
<li><a href="../pt430122/index.html">O workaholismo √© uma condi√ß√£o dolorosa que n√£o √© habitual falar.</a></li>
<li><a href="../pt430126/index.html">Outra lista de projetos para praticar em</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>