<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🤝‍👨🏿 👐🏾 🍷 自动呼吸分段 📇 ✒️ 🌇</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="手动分割肺部大约需要10分钟，并且需要一些技巧才能获得与自动分割相同的高质量结果。 自动分割大约需要15秒。 


 我假设没有神经网络，则可以获得不超过70％的精度。 我还建议形态学运算只是为更复杂的算法准备图像。 但是，由于处理了至少手头上的至少40个断层摄影样品，该算法选择了没有错误的肺部，并...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>自动呼吸分段</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/inobitec/blog/458268/"><p> 手动分割肺部大约需要10分钟，并且需要一些技巧才能获得与自动分割相同的高质量结果。 自动分割大约需要15秒。 </p><br><p> 我假设没有神经网络，则可以获得不超过70％的精度。 我还建议形态学运算只是为更复杂的算法准备图像。 但是，由于处理了至少手头上的至少40个断层摄影样品，该算法选择了没有错误的肺部，并且在前五种情况下进行了测试之后，该算法并未发生重大变化，并且从第一次应用起，它就可以在其余35项研究中正确地工作而没有变化设置。 </p><br><p> 神经网络也有缺点-要进行训练，您需要数百个肺部训练样本，这些样本必须手动标记。 </p><br><p><img src="https://habrastorage.org/webt/fg/uv/-r/fguv-r_mn7ybraf34p_1ybbphwa.jpeg"></p><a name="habracut"></a><br><h1> 目录内容 </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">呼吸系统的结构</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">洪斯菲尔德量表</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">数学形态</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Lee算法和RLE压缩</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">阈值基本音量转换</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">外部空气夹</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">突出显示体积最大的对象</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">肺内血管封闭</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">呼吸分割算法</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">该算法在MATLAB中的实现</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">结论</a> </li></ul><br><h1 id="paragraph1"> 呼吸系统的结构 </h1><br><p> 呼吸系统包括气道和肺。 分配上呼吸道和下呼吸道。 下呼吸道和上呼吸道之间的分离点是食物和呼吸道的交点。 喉部上方的所有部分均在上部，其余部分则在下部。 </p><br><p> 我们列出了呼吸器官： <br>  <strong>鼻腔</strong> ：-鼻子，上颌窦等 <br>  <strong>咽</strong>是食物和空气传播的通道。 <br>  <strong>喉</strong> -负责声音形成。 位于颈椎C4-C6的水平。 <br>  <strong>气管</strong> -连接喉和支气管的管。 <br>  <strong>支气管</strong>是呼吸道，其中大部分位于肺内。 <br>  <strong>肺</strong>是主要的呼吸器官。 </p><br><p><img src="https://habrastorage.org/webt/yx/ju/sp/yxjuspnur3gwm3ghxhqv50upj9i.png"></p><br><h1 id="paragraph2"> 洪斯菲尔德量表 </h1><br><p> 戈弗雷·霍恩斯菲尔德（Godfrey Hounsfield）是一位英国电气工程师，他与美国理论家艾伦·科马克（Allan Cormack）共同开发了计算机断层扫描技术，并因此获得了1979年的诺贝尔奖。 </p><br><p><img src="https://habrastorage.org/webt/jv/bl/ho/jvblho_x-0woitx02gbfjuxxhju.jpeg"></p><br><p> 霍恩斯菲尔德标度-以Hounsfield单位测量的定量X射线密度标度，用HU表示。 </p><br><p> 基于物质的衰减系数，即通过该物质时的辐射功率的降低程度，来计算X射线密度。 </p><br><p>  X射线密度通过以下公式计算： </p><br><p><math> </math> $$显示$$ {μ_{X}-μ_{water} \超过μ_{water}-μ_{air}} \乘以1000 $$ display $$ </p><br><p> 在哪里 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3BC;</mo></mrow><mi>X</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3BC;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x6C34;</mo></mrow></mrow></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF0C;</mo></mrow><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x3BC;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x7A7A;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x6C14;</mo></mrow></mrow></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="14.247ex" height="2.78ex" viewBox="0 -780.1 6133.9 1197.1" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/inobitec/blog/458268/&amp;usg=ALkJrhjAoDGrQM73b1rc2W354X0zfqYKaw#MJMATHI-3BC" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/inobitec/blog/458268/&amp;usg=ALkJrhjAoDGrQM73b1rc2W354X0zfqYKaw#MJMATHI-58" x="853" y="-357"></use><g transform="translate(1306,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><g transform="translate(2136,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/inobitec/blog/458268/&amp;usg=ALkJrhjAoDGrQM73b1rc2W354X0zfqYKaw#MJMATHI-3BC" x="0" y="0"></use><g transform="translate(603,-253)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)">水</text></g></g><g transform="translate(3426,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">，</text></g><g transform="translate(4256,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/inobitec/blog/458268/&amp;usg=ALkJrhjAoDGrQM73b1rc2W354X0zfqYKaw#MJMATHI-3BC" x="0" y="0"></use><g transform="translate(603,-253)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)">空</text><g transform="translate(586,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(36.68) matrix(1 0 0 -1 0 0)">气</text></g></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mrow class="MJX-TeXAtom-ORD"><mo>μ</mo></mrow><mi>X</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><msub><mrow class="MJX-TeXAtom-ORD"><mo>μ</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo>水</mo></mrow></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><msub><mrow class="MJX-TeXAtom-ORD"><mo>μ</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo>空</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>气</mo></mrow></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-2">μ_X，μ_{水}，μ_{空气} </script>  -被测物质，水和空气的线性衰减系数。 </p><br><p>  X射线密度为负，因为零X射线密度对应于水。 这意味着，与水相比，X射线波通过的所有物质的辐射功率减小的幅度要小于通过水的所有物质（例如，肺组织，空气）的负X射线密度。 </p><br><p> 以下是各种组织的近似X射线密度： </p><br><ul><li> 空气：-1000 HU。 </li><li> 呼吸器官：-950至-300 HU。 </li><li> 血液（无血管造影剂）：0至100 HU。 </li><li> 骨骼：100至1000 HU。 </li></ul><br><p><img src="https://habrastorage.org/webt/n5/o9/5w/n5o95wjj7avpy456i33a4swu_y4.png"></p><br><p> 维基百科链接： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">霍恩斯菲尔德标度</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">戈弗雷·霍恩斯菲尔德</a> ， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">衰减系数</a> 。 </p><br><h1 id="paragraph3"> 数学形态 </h1><br><p> 本文选择的算法中的主要位置是形态运算。 </p><br><p> 在计算机视觉领域，形态学运算调用了一组用于变换对象形状的算法。 最常见的是，形态学运算应用于二值化图像，其中对象的体素对应于单位，而空白对应于零。 </p><br><p> 主要的形态学操作包括： </p><br><p>  <strong>形态膨胀（膨胀，扩展）</strong> -将新体素添加到对象的所有边缘体素。 也就是说，沿着所有边界体素，使用具有给定形状（球，立方体，十字形等）的芯线进行通道。 此操作通常用于将许多相邻对象连接到单个对象中。 </p><br><p>  <strong>形态腐蚀（侵蚀，腐蚀）</strong> -破坏物体边界上所有体素的破坏。 此操作与扩张相反。 此操作对于消除许多相互连接的小物体形式的噪声很有用。 但是，仅当分割后的物体的厚度明显大于腐蚀半径时，才应使用这种噪声消除方法。 </p><br><p>  <strong>形态学闭合</strong>是扩张，随后是侵蚀。 它用于封闭对象内部的开口并合并相邻的对象。 </p><br><p>  <strong>形态上的开口（opening）</strong>是侵蚀，然后膨胀。 它用于去除小噪音物体并将物体分成几个物体。 </p><br><p><img src="https://habrastorage.org/webt/bv/kd/fv/bvkdfvdijxabpqjpbgrlw5pwdz4.gif"><img src="https://habrastorage.org/webt/7w/ft/h0/7wfth0jdj6img3nvemmktkysboq.gif"></p><br><h1 id="paragraph4">  Lee算法和RLE压缩 </h1><br><p> 为了隔离二值化体素体积中的对象，使用了Lee算法。 该算法最初是为了找到最短路径而发明的。 但是，我们使用它来选择对象并将其从三维三维像素阵列移动到另一个三维像素阵列。 它的本质是从起点开始在所有可能的方向上平行移动。 对于三维情况，从给定体素移动26或6个方向是可能的（如果体素未位于图像边缘）。 </p><br><p> 为了优化速度，我们使用了行程编码算法。 它的本质在于以下事实：用与序列中元素数相等的数字替换一和零的序列。 例如，字符串“ 00110111”可以替换为：“ 2; 2; 1; 3”。 这减少了内存访问的次数。 </p><br><p><img src="https://habrastorage.org/webt/if/kr/h6/ifkrh6br6sgi65g8sowexfxxsis.gif"><img src="https://habrastorage.org/webt/9f/rr/nc/9frrncdin9axwhdwgad8vndnlqy.gif"></p><br><p>  Wikipedia链接： <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Lee</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">算法，RLE算法</a> 。 </p><br><h1 id="paragraph5"> 阈值基本音量转换 </h1><br><p> 使用断层扫描仪，获得空间中每个点的X射线密度数据。 空气体素的X射线密度范围为-1100至-900 HU，呼吸器官体素的范围为-900至-300 HU。 因此，我们可以删除X射线密度大于-300 HU的所有多余体素。 结果，我们得到仅包含呼吸器官和空气的二值化体素体积。 </p><br><p><img src="https://habrastorage.org/webt/di/lv/ss/dilvssyv2do2rvjlbb3xov798rw.gif"></p><br><h1 id="paragraph6"> 外部空气夹 </h1><br><p> 为了隔离人体的内部空气，我们将移除所有靠近体素场景角落的对象。 这样我们就摆脱了外界的空气。 </p><br><p><img src="https://habrastorage.org/webt/c_/es/dj/c_esdje-omegb-i31quh2tslaoi.png"></p><br><p> 但是，并非所有情况都可以消除断层摄影台内的空气，因为它可能与场景的各个角落无关。 </p><br><p><img src="https://habrastorage.org/webt/mu/m1/bi/mum1bidj1at0nvceitxh5jtzqs4.png"></p><br><p> 因此，我们将不仅扫描角落，而且扫描位于场景任何边界平面上的所有体素。 但是结果，由于某种原因，肺部本身也离开了。 事实证明，气管也与场景的上平面有关。 </p><br><p><img src="https://habrastorage.org/webt/fu/zb/3b/fuzb3bzxnvxvofjz-mxoelly5w4.gif"></p><br><p> 必须从扫描区域中排除上平面。 也有研究未完全捕获肺部并且下平面与肺部相关。 因此，如果需要，也可以排除下平面。 </p><br><p><img src="https://habrastorage.org/webt/uf/ja/mb/ufjambvoavwiks-09hms7wc02lg.png"></p><br><p> 但是这种方法仅适用于乳房研究。 在捕获人体全部体积的情况下，通过鼻腔的内部和外部空气之间的连接将出现在图像上。 因此，有必要进行形态学侵蚀以分离内部和外部空气。 </p><br><p><img src="https://habrastorage.org/webt/fu/rq/26/furq26oo1ozjtnxrzu1ahknvjk4.gif"></p><br><p> 施加腐蚀之后，我们可以返回到先前获得的基于场景侧面的接近度来分割外部空气的方法。 </p><br><p><img src="https://habrastorage.org/webt/yj/i7/nh/yji7nhiveqpxbky3_qgj9b6n0zq.png"></p><br><p> 通过隔离外部空气，人们可以立即将其从空气和肺的总体积中取出，并获得体内和肺部的内部空气。 但是有一个问题。 侵蚀后，有关外界空气的一些信息丢失了。 为了恢复它，我们应用了外部空气的膨胀。 </p><br><p><img src="https://habrastorage.org/webt/vn/tu/ns/vntunsho-og3pm1at7dqi3_ltna.gif"></p><br><p> 接下来，我们从所有空气和呼吸器官中减去外部空气，得到内部空气和呼吸器官。 </p><br><p><img src="https://habrastorage.org/webt/fr/hx/df/frhxdfz7ax9fz-ps7x9zjrlgiqo.png"></p><br><p><img src="https://habrastorage.org/webt/64/hd/2i/64hd2ivbfu5g-d2yjjqkx5kv8pe.png"></p><br><h1 id="paragraph7"> 突出显示体积最大的对象 </h1><br><p> 接下来，我们选择呼吸器官作为体积最大的对象。 呼吸器官是一个单独的对象。 肺与胃肠道内的空气之间没有任何联系。 </p><br><p><img src="https://habrastorage.org/webt/7l/gt/bd/7lgtbdfvf0st73wqzlacvax1r-0.png"><img src="https://habrastorage.org/webt/5d/ce/8u/5dce8urp2qvopyat905ex9y_qqs.png"></p><br><p> 值得注意的是，在阈值转换的初始步骤中正确选择X射线密度阈值很重要。 否则，在某些情况下，由于分辨率低，两个肺之间可能没有连接。 例如，如果您认为呼吸器官的体素的X射线密度为-500 HU或更小，则在以下情况下，由于两个肺之间没有连接，因此将呼吸器官分配为体积最大的对象将导致错误。 因此，阈值应增加到-300 HU。 </p><br><p><img src="https://habrastorage.org/webt/jr/mi/m2/jrmim2de5siht6zo2nhoz8l1e5e.png"></p><br><h1 id="paragraph8"> 肺内血管封闭 </h1><br><p> 为了捕获肺内的血管，我们使用了形态学上的闭合，即扩张，然后以相同的半径进行侵蚀。 血管的X射线密度约为-100..100 HU。 </p><br><p><img src="https://habrastorage.org/webt/dz/oc/f0/dzocf0ejl-ckqqlsrbhhelo9p1u.png"><br> 大血管没有关闭。 但这不是必需的。 该手术的目的是破坏肺内的许多小孔，以利于进一步的肺分割。 </p><br><h1 id="paragraph9"> 呼吸分割算法 </h1><br><p> 结果，我们获得了以下呼吸器官分割算法： </p><br><ol><li> 基本体积的阈值转换阈值&lt;-300 HU。 </li><li> 半径为3毫米的形态腐蚀，用于分离内部和外部空气。 </li><li> 基于接近体素场景的边界侧面的外部空气分配。 </li><li> 外部空气的形态膨胀可恢复由于侵蚀而丢失的信息。 </li><li> 从所有空气和呼吸器官中减去外部空气以获得内部空气和呼吸器官。 </li><li> 突出显示最大体积的对象。 </li><li> 肺内血管的形态学闭合。 </li></ol><br><p><img src="https://habrastorage.org/webt/0z/d5/0j/0zd50js0yyqxagy_sgsp2wjyu8o.png"></p><br><h1 id="paragraph10"> 该算法在MATLAB中的实现 </h1><br><h3 id="metod-getrespiratoryorgans">  GetRespiratoryOrgans方法 </h3><br><pre><code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">%      (    ) %      . % V =         . % cr =    . % ci =      (, 3  %      3   . function RO = getRespiratoryOrgans(V,cr,ci) %     %   &lt; -300 HU. AL=~imbinarize(V,-300); %    3   %     . SE=strel('sphere',3); EAL=imerode(AL,SE); %       %      . EA=getExternalAir(EAL); %      %      . DEA=EA; for i=1:4 DEA=imdilate(DEA,SE); DEA=DEA&amp;AL; end %         %        . IAL=AL-DEA; %     . RO=getMaxObject(IAL); %     . RO=closeVoxelVolume(RO,3,2);</span></span></code> </pre> <br><h3 id="metod-getexternalair">  GetExternalAir方法 </h3><br><pre> <code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">%  ,       % (  ,     %    ). % EAL =      . function EA = getExternalAir(EAL) %  bwlabeln  :   %    ,  –    .. V=bwlabeln(EAL); %    ,    %     . R=regionprops3(V,'BoundingBox','VoxelList'); n=height(R); %  3-D      . s=size(EAL); EA=zeros(s,'logical'); %        %    ,   . for i=1:n %   x  y,    %  . x0=R(i,1).BoundingBox(1); y0=R(i,1).BoundingBox(2); x1=x0+R(i,1).BoundingBox(4); y1=y0+R(i,1).BoundingBox(5); %        %  ,       %   EA. if (x0 &lt; 1 || x1 &gt; s(1)-1 || y0 &lt; 1 || y1 &gt; s(2)-1) %        %  : [[x1 y1 z1][x2 y2 z3] … [xn yn zn]]. mat=cell2mat(R(i,2).VoxelList); ms=size(mat); %  ,    . for j=1:ms(1) x=mat(j,2); y=mat(j,1); z=mat(j,3); EA(x,y,z)=1; end end end</span></span></code> </pre> <br><h3 id="metod-getmaxobject">  GetMaxObject方法 </h3><br><pre> <code class="matlab hljs"><span class="hljs-comment"><span class="hljs-comment">%        "V". % O =    . % m =    . function [O,m] = getMaxObject(V) %  . V=bwlabeln(V); %        %  . R=regionprops3(V,'Volume','VoxelList'); %      . v=R(:,1).Volume; [m,i]=max(v); %  3-D      % . s=size(V); O=zeros(s,'logical'); %       . mat=cell2mat(R(i,2).VoxelList); ms=size(mat); for j=1:ms(1) x=mat(j,2); y=mat(j,1); z=mat(j,3); O(x,y,z)=1; end</span></span></code> </pre> <br><p> 源代码可以在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里</a>下载。 </p><br><h1 id="paragraph11"> 结论 </h1><br><p> 已计划以下文章： </p><br><ol><li> 气管和支气管的分割； </li><li> 肺的分割； </li><li> 肺叶分割。 </li></ol><br><p> 算法例如： </p><br><ol><li> 距离变换 </li><li> 最近邻变换（最近邻变换，也称为特征变换）； </li><li> 计算Hessian矩阵的特征值以分割平面3D对象； </li><li> 分割由分水岭分割。 </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN458268/">https://habr.com/ru/post/zh-CN458268/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN458252/index.html">超长射电望远镜的数学模型</a></li>
<li><a href="../zh-CN458256/index.html">是不是该洗脑了？</a></li>
<li><a href="../zh-CN458260/index.html">为Java应用程序优化Docker映像的另一种方法</a></li>
<li><a href="../zh-CN458262/index.html">会议室的在线设计师-选择视频会议的最佳解决方案</a></li>
<li><a href="../zh-CN458264/index.html">自我记录代码的10条原则</a></li>
<li><a href="../zh-CN458270/index.html">关于无处不在且无人可责的错误：责任拖尾现象</a></li>
<li><a href="../zh-CN458272/index.html">天哪！ 对于旅行者-一个家庭项目的故事</a></li>
<li><a href="../zh-CN458276/index.html">开发了基于AI的第一个宇宙模拟。 神经网络做得很好，甚至很奇怪</a></li>
<li><a href="../zh-CN458278/index.html">黑客如何对自己使用Microsoft Excel</a></li>
<li><a href="../zh-CN458280/index.html">摩尔定律终结的又一步</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>