<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüè≠ üîô üåÖ O livro "Unidade para o desenvolvedor. Jogos multiplataforma para celular ¬ª üë©üèª‚Äçü§ù‚Äçüë®üèº üë©‚Äçüë©‚Äçüëß üîä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este livro √© dirigido a todos que desejam criar jogos, mas n√£o t√™m experi√™ncia anterior em desenvolvimento. O Unity suporta v√°rias linguagens de progr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O livro "Unidade para o desenvolvedor. Jogos multiplataforma para celular ¬ª</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/413531/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/jb/cp/nf/jbcpnfxk76conc21ro289_v4fse.jpeg" align="left" alt="imagem"></a>  Este livro √© dirigido a todos que desejam criar jogos, mas n√£o t√™m experi√™ncia anterior em desenvolvimento.  O Unity suporta v√°rias linguagens de programa√ß√£o.  Neste livro, usaremos C #.  Antes de come√ßar a criar jogos, voc√™ precisa entender os conceitos b√°sicos de design, bem como o pr√≥prio mecanismo de jogo Unity, portanto, na primeira parte do livro, estudaremos essas quest√µes.  Na segunda e terceira partes, consideraremos o processo de cria√ß√£o de jogos bidimensionais e tridimensionais, respectivamente, e na quarta parte falaremos sobre outros recursos do Unity, cujo conhecimento ser√° √∫til para voc√™. <br><a name="habracut"></a><br><h3>  6. A implementa√ß√£o da jogabilidade com armadilhas e objetivos </h3><br>  <b>Armadilhas simples</b> <br><br>  A maior parte deste jogo consiste em lidar com os toques de v√°rios objetos - armadilhas, tesouros, pontos de sa√≠da etc.  Considerando a import√¢ncia de determinar quando tocar em objetos espec√≠ficos, criaremos um script comum que gera um Evento de Unidade quando qualquer objeto com a tag "Player" os tocar.  Esse evento ser√° configurado de maneira diferente para diferentes objetos: as armadilhas informar√£o o Game Manager que o gnomo recebeu dano, o tesouro informar√° que o gnomo pegou o tesouro, e o ponto de sa√≠da √© que o gnomo chegou √† sa√≠da. <br><br>  Agora crie um novo script C # em um arquivo chamado SignalOnTouch.cs e adicione o seguinte c√≥digo: <br><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine.Events;  //  UnityEvent,     "Player"  //  . [RequireComponent (typeof(Collider2D))] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> SignalOnTouch : MonoBehaviour {  // UnityEvent      .  //     . <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> UnityEvent onTouch;   //    <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>,      AudioSource. <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">bool</span></span> playAudioOnTouch = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>;  //       ,  //  SendSignal. <span class="hljs-type"><span class="hljs-type">void</span></span> OnTriggerEnter2D(Collider2D collider) {  SendSignal (collider.gameObject); }   //      , //  SendSignal. <span class="hljs-type"><span class="hljs-type">void</span></span> OnCollisionEnter2D(Collision2D collision) {   SendSignal (collision.gameObject);  }    //    "Player"      //  UnityEvent,    .  <span class="hljs-type"><span class="hljs-type">void</span></span> SendSignal(GameObject objectThatHit) {   //    "Player"? <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (objectThatHit.CompareTag("Player")) {     //    ,     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (playAudioOnTouch) {  var audio = GetComponent&lt;AudioSource&gt;();   //     //     ,  //    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (audio &amp;&amp;     audio.gameObject.activeInHierarchy) audio.Play();   }   //      onTouch.Invoke();     }   }  }</code> </pre> <br>  A classe SignalOnTouch √© baseada no m√©todo SendSignal, chamado pelos m√©todos OnCollisionEnter2D e OnTriggerEnter2D.  Os dois √∫ltimos m√©todos s√£o chamados pelo mecanismo do Unity quando o objeto toca o colisor ou quando o objeto se enquadra no escopo do gatilho.  O m√©todo SendSignal verifica a tag do objeto e, se ele armazena a string "Player", gera um evento Unity. <br>  Agora que voc√™ tem a classe SignalOnTouch, pode adicionar a primeira intercepta√ß√£o. <br><br>  1. Importe sprites de objetos.  Importe o conte√∫do da pasta Sprites / Objetos para o projeto. <br><br>  2. Adicione os picos marrons.  Encontre o sprite SpikesBrown e arraste-o para a cena. <br><br>  3. Configure o objeto com espinhos.  Adicione os componentes PolygonCollider2D e SignalOnTouch ao objeto perfurado. <br><br>  Adicione uma nova fun√ß√£o ao evento SignalOnTouch.  Arraste o Game Manager para o campo de objeto e selecione a fun√ß√£o GameManager.TrapTouched, conforme mostrado na Fig.  6.1 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l9/en/37/l9en37qkgc1vqd2-rnj3ykvk88u.png" alt="imagem"></div><br>  4. Converta o objeto cravado em um modelo.  Arraste o objeto SpikesBrown do painel Hierarquia para a pasta Level.  Como resultado, ser√° criado um modelo com o qual voc√™ pode criar v√°rias c√≥pias do objeto. <br><br>  5. Teste.  Inicie o jogo.  Fa√ßa o gnomo acertar os espinhos.  Este gnomo deve cair e reaparecer! <br><br><h3>  Tesouro e sa√≠da </h3><br>  Depois de adicionar com sucesso a armadilha que mata o gnomo, √© hora de adicionar a oportunidade de ganhar o jogo.  Para fazer isso, adicione dois novos elementos: um tesouro e um ponto de sa√≠da. <br><br>  Um tesouro √© um sprite no fundo de um po√ßo que detecta o toque de um gnomo e envia um sinal ao Game Manager.  Quando isso acontece, o gerente do jogo diz ao gnomo que ele pegou o tesouro, ap√≥s o que o sprite com a imagem da m√£o vazia do gnomo √© substitu√≠do pelo sprite com a imagem da m√£o segurando o tesouro. <br><br>  Um ponto de sa√≠da √© outro sprite localizado no topo do po√ßo.  Como um tesouro, ele detecta um toque do gnomo e notifica o gerente do jogo sobre isso.  Se neste momento o gnomo possuir o tesouro, o jogador recebe a vit√≥ria no jogo. <br><br>  O principal trabalho desses dois objetos √© realizado pelo componente SignalOnTouch - quando o gnomo atinge o ponto de sa√≠da, o m√©todo ExitReached do gerente do jogo deve ser chamado e, quando o gnomo toca o tesouro, o m√©todo TreasureCollected deve ser chamado. <br><br>  Vamos come√ßar criando um ponto de sa√≠da e, em seguida, adicione um tesouro. <br><br><h3>  Criar ponto de sa√≠da </h3><br>  Antes de tudo, importamos sprites. <br><br>  1. N√≠vel de importa√ß√£o de sprites em segundo plano.  Copie a pasta Sprites / Plano de fundo do pacote baixado com recursos para a pasta Sprites do projeto. <br><br>  2. Adicione um sprite Top.  Coloque-o logo abaixo do objeto Corda.  Este sprite servir√° como um ponto de sa√≠da. <br><br>  3. Configure o sprite.  Adicione o componente Box Collider 2D ao sprite e marque a caixa Is Trigger.  Clique no bot√£o Editar colisor e redimensione o colisor para que ele seja curto e largo, conforme mostrado na Fig.  6.2 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/30/rq/t6/30rqt6u6hfxppu6uexa1n0uewwg.png" alt="imagem"></div><br>  4. Configure o envio de um sinal para o gerente do jogo no momento de tocar no sprite.  Adicione o componente SignalOnTouch ao sprite.  Adicione um item √† lista de eventos do componente e conecte-o ao Game Manager.  Selecione a fun√ß√£o GameManager.ExitReached.  Agora, tocar no gnome de sa√≠da chamar√° o m√©todo ExitReached do Game Manager. <br>  Agora adicione o tesouro. <br><br>  O tesouro funciona assim: por padr√£o, o objeto Treasure exibe um sprite com a imagem do tesouro.  Quando o gnomo toca nele, o m√©todo TreasureCollected do Game Manager √© chamado e outro sprite √© exibido no lugar do tesouro, mostrando que o tesouro foi recolhido.  Quando o gnomo morre, o objeto Treasure retorna ao seu estado original e exibe o sprite com a imagem do tesouro novamente. <br><br>  Como a mudan√ßa de sprites no jogo ser√° realizada com bastante frequ√™ncia - voc√™ ver√° isso quando melhoraremos os gr√°ficos - faz sentido criar uma classe universal para alterar sprites e us√°-la no objeto tesouro. <br><br>  Crie um novo script C # chamado SpriteSwapper.cs.  Adicione o seguinte c√≥digo a ele: <br><br><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">/     . ,    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   ' '   ' '. public class SpriteSwapper : MonoBehaviour { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,   . public Sprite spriteToUse; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  ,    /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    . public SpriteRenderer spriteRenderer; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  .    ResetSprite. private Sprite originalSprite; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/  . public void SwapSprite() { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/      ... if (spriteToUse != spriteRenderer.sprite) { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    originalSprite originalSprite = spriteRenderer.sprite;  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/    . spriteRenderer.sprite = spriteToUse; } } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   . public void ResetSprite() { /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     ... if (originalSprite != null) {  /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ...  . spriteRenderer.sprite = originalSprite; }  } }</span></span></code> </pre> <br>  A classe SpriteSwapper foi projetada para duas opera√ß√µes: quando o m√©todo SwapSprite √© chamado, outro Sprite √© passado para o visualizador SpriteRenderer conectado ao objeto do jogo para exibi√ß√£o.  Nesse caso, o sprite original √© armazenado em uma vari√°vel.  Quando o m√©todo ResetSprite √© chamado, o visualizador recebe o sprite original para exibir. <br>  Agora voc√™ pode criar e personalizar o objeto Treasure. <br><br>  1. Adicione um sprite com uma imagem do tesouro.  Encontre o sprite TreasurePresent e adicione-o √† cena.  Coloque-o perto do fundo, mas de maneira que o gnomo possa peg√°-lo. <br><br>  2. Adicione um colisor para o tesouro.  Selecione o sprite com a imagem do tesouro e adicione o componente 2D do Box Collider.  Marque a caixa √â acionador. <br><br>  3. Adicione e configure um script para alterar o sprite.  Adicione o componente SpriteSwapper.  Arraste o sprite com a imagem do tesouro para o campo Sprite Renderer deste componente.  Em seguida, encontre o sprite TreasureAbsent e arraste-o para o campo Sprite To Use do trocador de sprites. <br><br>  4. Adicione e configure o componente de envio de sinal em resposta a um toque.  Adicione o componente SignalOnTouch.  Adicione dois itens √† lista On Touch: <br><br><ul><li>  primeiro link para o objeto Game Manager e selecione o m√©todo GameManager.TreasureCollected; </li><li>  associe o segundo ao sprite do tesouro (ou seja, ao objeto que voc√™ est√° configurando no momento) e selecione o m√©todo SpriteSwapper.SwapSprite. </li></ul><br>  5. Adicione e configure o componente Reinicializ√°vel.  Adicione um componente redefin√≠vel ao objeto.  Adicione um √∫nico item √† lista On Touch, selecione o m√©todo SpriteSwapper.ResetSprite e associe-o ao objeto Treasure. <br><br>  Como resultado, as configura√ß√µes no painel do inspetor devem parecer como mostrado na Fig.  6.3 <br><br>  6. Teste o jogo.  Inicie o jogo e toque no tesouro.  Nesse momento, o tesouro desaparecer√°;  se depois que o gnomo morrer, o tesouro reaparecer√° em seu lugar ap√≥s a cria√ß√£o do novo gnomo. <br><br><h3>  Adicionando plano de fundo </h3><br>  Atualmente, o jogo ocorre contra um fundo azul opaco definido por padr√£o no Unity.  Nesta se√ß√£o, adicionaremos um plano de fundo tempor√°rio, que substituiremos por um sprite de plano de fundo quando come√ßarmos a melhorar o design gr√°fico do jogo. <br><br>  1. Adicione um ret√¢ngulo de fundo.  Abra o menu GameObject e selecione 3D ObjectÔÄ¥Quad (3D ObjectÔÄ¥Rectangle).  Nomeie o novo objeto Background. <br><br>  2. Mova o plano de fundo para o plano de fundo.  Para evitar a situa√ß√£o em que um plano de fundo retangular ser√° desenhado no topo dos sprites do jogo, mova-o para o plano de fundo, longe da c√¢mera.  Para fazer isso, defina a coordenada Z do ret√¢ngulo como 10. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/__/ge/jp/__gejpqg6oyv_6qaf04vmhytn9a.png" alt="imagem"></div><br>  3. Defina a largura e a altura do ret√¢ngulo de fundo.  Ligue a ferramenta Rect pressionando a tecla T e use as al√ßas para definir as dimens√µes do ret√¢ngulo.  A borda superior do plano de fundo deve estar no mesmo n√≠vel do sprite no topo da cena e no fundo com o tesouro (Fig. 6.4). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ef/sk/qf/efskqficuea12yni_biknneonqi.png" alt="imagem"></div><br>  4. Teste o jogo.  Ap√≥s o in√≠cio, o fundo do campo de jogo deve ficar cinza escuro. <br><br>  ¬ªMais informa√ß√µes sobre o livro podem ser encontradas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site do editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trecho</a> <br><br>  Cupom de desconto de 20% para vendedores ambulantes - <b>Unity</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt413531/">https://habr.com/ru/post/pt413531/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt413519/index.html">Teste comparativo de dispositivos de controle de mosquitos</a></li>
<li><a href="../pt413523/index.html">Vis√£o geral do trabalho com o Universal Links: pr√≥s e contras</a></li>
<li><a href="../pt413525/index.html">Ensine-me a entrevistar</a></li>
<li><a href="../pt413527/index.html">Tr√™s variantes da palavra "esconder" em ingl√™s e outras s√©ries sin√¥nimas</a></li>
<li><a href="../pt413529/index.html">Por que os novos dispositivos i-SENSYS podem ser chamados de revolucion√°rios</a></li>
<li><a href="../pt413539/index.html">Um controlador simples baseado em l√≥gica difusa. Cria√ß√£o e customiza√ß√£o</a></li>
<li><a href="../pt413543/index.html">Angular cli 6: por que voc√™ precisa e como us√°-lo</a></li>
<li><a href="../pt413545/index.html">Humor na marca - por que nem sempre √© bom</a></li>
<li><a href="../pt413547/index.html">Experimente 2 milh√µes de sess√µes sem cabe√ßa</a></li>
<li><a href="../pt413549/index.html">Curso de Desenvolvimento Web</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>