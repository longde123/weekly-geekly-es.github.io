<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÉüèæ ü§æ üë©üèª‚Äçüî¨ Introducci√≥n a Spring, o qu√© hacer si todo el proyecto es @Autowired y @Component, pero no comprende lo que es ü§¶ üë©üèª‚Äçü§ù‚Äçüë®üèæ üë®üèø‚Äçü§ù‚Äçüë®üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬°Te saludo, Habr! 

 Este art√≠culo ser√° √∫til para aquellos que ya comenzaron a aprender Java e incluso lograron alcanzar cierto √©xito en la comprensi√≥...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introducci√≥n a Spring, o qu√© hacer si todo el proyecto es @Autowired y @Component, pero no comprende lo que es</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455794/">  ¬°Te saludo, Habr! <br><br>  Este art√≠culo ser√° √∫til para aquellos que ya comenzaron a aprender Java e incluso lograron alcanzar cierto √©xito en la comprensi√≥n de Java Core, y ahora escuch√© la palabra Spring.  Y, tal vez, ni siquiera una vez: el conocimiento del Spring Framework, al menos, aparece en las descripciones de muchas vacantes para javists.  Este art√≠culo lo ayudar√° a subir el primer paso: comprender la idea general de un marco tan popular. <br><br>  Comencemos desde lejos.  Existe una inversi√≥n de control, en ruso - Inversi√≥n de control, en forma abreviada - IoC.  IoC es uno de los principios que acerca nuestro c√≥digo a la soltura.  IoC es la delegaci√≥n de parte de nuestras responsabilidades a un componente externo. <br><br>  Existen diferentes implementaciones del enfoque de IoC, estamos interesados ‚Äã‚Äãen una de ellas: la inyecci√≥n de dependencia, la inyecci√≥n de dependencia.  ¬øQu√© es esto? El nombre habla por s√≠ mismo, as√≠ que intentar√© revelarlo usando un ejemplo.  Estamos escribiendo una aplicaci√≥n que automatiza el funcionamiento de una cadena de tiendas.  Hay clases de Tienda (tienda) y Vendedor (vendedor).  La clase Vendedor tiene un campo de tipo Tienda: la tienda en la que trabaja el vendedor.  Entonces nos enfrentamos a la adicci√≥n: el vendedor depende de la tienda.  Ahora pensemos en c√≥mo el objeto Shop entra en el objeto Vendedor.  Hay opciones: <br><br><ul><li>  Implem√©ntelo a trav√©s del dise√±ador e inmediatamente, al crear el vendedor, especifique la tienda en la que trabaja: </li></ul><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Seller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Shop shop; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Seller</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Shop shop)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shop = shop; } }</code> </pre> <br><ul><li>  Cree un setter y, usando su llamada, configure la tienda para el vendedor: </li></ul><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Seller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Shop shop; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setShop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Shop shop)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shop = shop; } }</code> </pre><br>  Los dos m√©todos enumerados son la implementaci√≥n de la inyecci√≥n de dependencia.  Y finalmente, llegamos a la primavera: proporciona otra forma de inyectar dependencias. <a name="habracut"></a><br><br>  En t√©rminos generales, Spring es una gama muy amplia de bibliotecas para muchas ocasiones.  Hay Spring MVC para crear r√°pidamente aplicaciones web, Spring Security para implementar la autorizaci√≥n en la aplicaci√≥n y Spring Data para trabajar con bases de datos y mucho m√°s.  Pero Spring IoC est√° solo: este es el tipo b√°sico de resorte que implementa el tema que estamos estudiando: la inyecci√≥n de dependencia.  Spring IoC merece atenci√≥n al comienzo del estudio de las bibliotecas de Spring por otra raz√≥n.  Como ver√° en el proceso de trabajo pr√°ctico con otros tipos de resortes, para todos los dem√°s resortes, Spring IoC se utiliza como marco. <br><br>  Comenzaremos nuestra introducci√≥n a Spring IoC con el t√©rmino principal: bean.  En las palabras mas simples <br><blockquote>  Un bean es un objeto de clase creado por Spring que se puede incrustar como valor de campo en otro objeto. </blockquote><br>  ¬øQuieres palabras m√°s complicadas?  Y por favor: <br><blockquote>  Un bean es un objeto de clase, que es un elemento de programa completo con una funci√≥n comercial espec√≠fica o una funci√≥n Spring interna, cuyo ciclo de vida est√° controlado por el contenedor bin. <br></blockquote><br>  Como ya entendi√≥, para que Shop pueda implementar Shop, Shop debe convertirse en un contenedor.  Hay varias maneras de decirle a la aplicaci√≥n qu√© objetos tienen el derecho de ser llamados beans, todos los cuales nos llevan al concepto de ApplicationContext.  <b>ApplicationContext</b> es el coraz√≥n de la primavera.  Como regla, se crea al comienzo de la aplicaci√≥n ("sube") y controla el ciclo de vida de los beans.  Por lo tanto, tambi√©n se llama contenedor bin. <br><br>  Estamos llegando a lo principal.  ¬øC√≥mo necesitamos reescribir nuestras clases para que Spring IoC y su servidor ApplicationContext sustituyan el campo Shop por el objeto Seller?  As√≠: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Shop</span></span></span><span class="hljs-class"> </span></span>{ }</code> </pre><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Component</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Seller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Autowired</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Shop shop; }</code> </pre> <br>  Es simple?  Mucho m√°s f√°cil!  Elegante?  Bastante  Aqu√≠ sucedi√≥ lo siguiente: la anotaci√≥n Componente le dijo a Spring que la clase que anot√≥ es un bin.  Anotaci√≥n Autowired le pidi√≥ a Spring que sustituyera un valor en el campo que anota.  Esta operaci√≥n se llama inyectar.  ¬øQu√© valor exacto se sustituir√°?  M√°s sobre esto m√°s adelante, primero, descubriremos c√≥mo las clases se convierten en bin en general. <br><br>  Ya sabemos que al comienzo de la aplicaci√≥n, el tutor de todos los beans de ApplicationContext debe aumentar.  √âl crea todos los contenedores a la vez.  Casi todo  El hecho es que, por defecto, cualquier bean tiene el alcance de la propiedad intraspring en el valor singleton.  Intraspringovoe, ya que en el sentido literal de la palabra no es un singleton.  Es el singleton para spring: cuando se genera el contexto, Spring crear√° exactamente un objeto bin de la clase especificada.  Si desea cambiar este comportamiento, Spring le permite controlar el tiempo de creaci√≥n del bean y su n√∫mero para una clase, pero ahora no se trata de eso. <br><br>  Por lo tanto, al generar ApplicationContext se crean todos los contenedores.  Averig√ºemos exactamente d√≥nde vive el contexto y, lo que es m√°s importante, c√≥mo determina de qu√© clases crear contenedores.  Hay varias opciones, por simplicidad, hablaremos de una de ellas: configuraci√≥n usando el archivo xml.  Aqu√≠ hay un ejemplo de ello: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">beans</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.springframework.org/schema/beans"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.springframework.org/schema/context"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:beans</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.springframework.org/schema/c"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"product"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main.java.Product"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">context:component-scan</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">base-package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">beans</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Este archivo muestra c√≥mo crear beans de dos maneras.  El primero, digamos, es manual.  Usted ve, hay una etiqueta de <i>frijol</i> con una indicaci√≥n de la clase.  Este es el frijol.  De todo lo que est√© registrado en este archivo con una etiqueta de <i>bean</i> , se crear√°n <i>beans</i> . <br><br>  La segunda forma es menos detallada.  Recuerde, sobre las clases colocamos la anotaci√≥n Componente.  De todas las clases anotadas con esta anotaci√≥n, se crear√°n beans.  Gracias a esta l√≠nea del archivo xml: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">context:component-scan</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">base-package</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  Ella le dice a Spring: escanee todo el paquete principal y, a partir de todo eso, la anotaci√≥n Componente (u otras anotaciones que son componentes de Componente) se mantendr√° activa, crear contenedores.  Compacto, ¬øno es as√≠?  Simplemente decimos qu√© paquetes contienen las clases a partir de las cuales crear los beans, y anotamos estas clases. <br><br>  Puede elevar el contexto utilizando el archivo xml con la siguiente l√≠nea de c√≥digo: <br><br><pre> <code class="java hljs">ApplicationContext context = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClassPathXmlApplicationContext(<span class="hljs-string"><span class="hljs-string">"beans.xml"</span></span>);</code> </pre> <br>  donde beans.xml es la ruta al apodo xml discutido anteriormente. <br><br>  Con la creaci√≥n de frijoles resuelto.  ¬øC√≥mo llena Spring el campo Tienda al crear un Vendedor?  Al generar contexto, se crea un objeto bin de la clase Shop.  Tambi√©n se crea un objeto bin de la clase Vendedor; tambi√©n se anota mediante Componente.  Tiene un tipo de tienda anotado por Autowired.  La anotaci√≥n con cables autom√°ticos le dice a spring: debe inyectar el contenedor en este campo.  En nuestro caso, solo tenemos un contenedor adecuado para este rol, es decir, el tipo del cual coincide con el tipo del campo: este es un contenedor, una instancia de la clase Shop.  Se inyectar√° en el objeto Vendedor, seg√∫n sea necesario.  Entiendo que ahora las preguntas han subido como gusanos: qu√© suceder√° si Spring no encuentra el bean deseado o encuentra varios adecuados (especialmente teniendo en cuenta que tambi√©n puede inyectarse a trav√©s de la interfaz, y no por clase).  La primavera es inteligente, pero requiere lo mismo de nosotros.  Necesitamos tener exactamente un bean en el sistema que sea adecuado para cada Autowired, o entrenar a Spring para actuar en tales conflictos (no hablaremos de esto ahora, ya est√°s cansado, seguro, el art√≠culo est√° llegando a su fin). <br><br>  Tenga en cuenta que el vendedor tambi√©n es un contenedor.  Si no se tratara de un contenedor, sino que se creara mediante un nuevo, entonces nada se inyectar√≠a autom√°ticamente en √©l. <br><br>  Quiz√°s ahora est√© pensando por qu√© todas estas dificultades son necesarias.  Pero imagine que nuestra aplicaci√≥n no es de 2 clases, sino varios √≥rdenes de magnitud m√°s grandes y que la administraci√≥n de dependencias ya no es la tarea m√°s trivial. <br><br>  Quiz√°s ahora piense cu√°n hermoso, simple y conciso Spring le permite implementar dependencias.  Pero imagine que algo sali√≥ mal y necesita depurar la aplicaci√≥n.  Y ya no es tan f√°cil ... <br><br>  Finalmente, un par de pistas: <br><br><ul><li>  Si ha implementado el proyecto y ahora no sabe c√≥mo obtener un contenedor de la primavera para verlo, haga lo siguiente: </li></ul><br><pre> <code class="java hljs">ApplicationContext context = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ClassPathXmlApplicationContext(<span class="hljs-string"><span class="hljs-string">"beans.xml"</span></span>); Seller seller = (Seller) context.getBean(Seller.class);</code> </pre><br>  Esta es una forma legal de obtener un contenedor, aunque en las realidades modernas esto generalmente no se hace.  Pero para un estudio de caso puedes. <br><br><ul><li>  Como Spring es un marco, debe incluirlo en su proyecto.  Creo una aplicaci√≥n usando maven y agrego dependencias spring-core y spring-context al archivo pom.xml. </li></ul><br>  Spring IoC contiene enormes oportunidades para crear, configurar e inyectar beans.  Examinamos una peque√±a parte de la punta del iceberg, una de las formas de trabajar con la primavera, pero espero que hayamos podido verlo detenidamente y tener una idea general de lo que est√° sucediendo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/455794/">https://habr.com/ru/post/455794/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455774/index.html">Motores de turbina de gas para aeronaves</a></li>
<li><a href="../455784/index.html">Debido a que el gris oscuro es m√°s claro que el gris en CSS</a></li>
<li><a href="../455788/index.html">Paseos por centros de datos y telecomunicaciones de San Petersburgo</a></li>
<li><a href="../455790/index.html">Revisi√≥n del desempe√±o e identificaci√≥n de conocimiento secreto (revisi√≥n e informe de video)</a></li>
<li><a href="../455792/index.html">Re: Tienda, Samsung, Sony Center, Nike, LEGO y Street Beat fuga de datos del comprador</a></li>
<li><a href="../455796/index.html">Programaci√≥n orientada a objetos en Java y Python: similitudes y diferencias</a></li>
<li><a href="../455800/index.html">Matrix 1.0 - Lanzamiento del protocolo de mensajer√≠a descentralizada</a></li>
<li><a href="../455802/index.html">C√≥mo armar los Juegos Ol√≠mpicos a trav√©s de boletines electr√≥nicos. Estuche Black Star</a></li>
<li><a href="../455806/index.html">Nacimiento y muerte de un √°lbum: entendemos c√≥mo los formatos de m√∫sica han cambiado en los √∫ltimos 100 a√±os.</a></li>
<li><a href="../455808/index.html">Obtenga extractos del registro en el sitio web de FTS usando python</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>