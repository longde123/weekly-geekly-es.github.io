<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüåæ üë©‚Äçüé§ üõÄüèø G√©rer Raspberry via des websockets üì∑ üò£ üë®‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le Raspberry Pi a acquis une immense popularit√© dans le monde entier. Cependant, de nombreux d√©veloppeurs amateurs sont confront√©s au probl√®me d'acc√®s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>G√©rer Raspberry via des websockets</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447496/">  Le Raspberry Pi a acquis une immense popularit√© dans le monde entier.  Cependant, de nombreux d√©veloppeurs amateurs sont confront√©s au probl√®me d'acc√®s √† l'appareil depuis Internet.  En r√®gle g√©n√©rale, vous devez conjurer avec DDNS ou acheter une adresse IP statique.  Les deux options impliquent la configuration d'un routeur, qui n'est pas pour tout le monde et n'est pas toujours disponible.  De plus, l'ouverture d'un acc√®s direct √† l'appareil depuis Internet comporte certains risques de s√©curit√©. <br><br>  Une fa√ßon extr√™mement courante de r√©soudre ce probl√®me consiste √† utiliser un serveur interm√©diaire par lequel le serveur et le client se connectent l'un √† l'autre. <br>  Le sch√©ma est extr√™mement largement utilis√© dans divers packages d'acc√®s √† distance: VNCViewer, AmmyyAdmin, etc. <br><br>  <i>Option 1-DDNS</i> <br><br><img src="https://habrastorage.org/webt/cv/ju/qr/cvjuqrf0_4bxj0um-amarub3aug.png" alt="image"><br><br>  <i>Option 2 - Adresse IP statique</i> <br><br><img src="https://habrastorage.org/webt/b5/rj/eh/b5rjehu2wfyerallt_sxzzavjo4.png" alt="image"><br><br>  <i>Option 3 - utiliser un serveur interm√©diaire</i> <br><br><img src="https://habrastorage.org/webt/zf/hu/rg/zfhurg4_uqo82vfkyr1akj03q9k.png" alt="image"><br><br>  Ce sch√©ma de connexion peut √™tre impl√©ment√© via le protocole MQTT sur Websockets, mais il √©tait int√©ressant pour moi d'impl√©menter quelque chose de beaucoup plus simple, orient√© JSON, extensible, sans restrictions de protocole sur la taille des messages et avec un mod√®le de s√©curit√© plus √©vident. <br><a name="habracut"></a><br>  Le choix du protocole √©tait √©vident.  WebSocket est depuis longtemps pris en charge par les navigateurs et la plupart des plateformes et langages de programmation. <br><br>  Le mod√®le de bus de donn√©es est trivial: <br><br>  WebSocket Server prend en charge un nombre illimit√© de canaux.  Chaque canal peut √™tre ouvert ou prot√©g√© par mot de passe.  Un canal n'existe que lorsqu'il a au moins un client connect√©.  Aucune donn√©e n'est fondamentalement stock√©e sur le serveur.  Le mot de passe est d√©fini par le premier client se connectant au canal.  Les clients sans mot de passe / avec un mot de passe incorrect ne seront pas autoris√©s dans le canal. <br><br>  Un canal est un conteneur de messages.  Les messages sont de trois types: les messages d'adresse (commandes), qui sont destin√©s √† un ou plusieurs destinataires, les messages de r√©ponse et les messages de diffusion qui seront re√ßus par tous les clients connect√©s au canal. <br><br><img src="https://habrastorage.org/webt/oz/4h/ez/oz4hez8fjzbpgbl-rc4_6l4ea5w.png" alt="image"><br><br>  Un tel sch√©ma permet l'utilisation de hubs communs pour de nombreux consommateurs de mani√®re relativement s√ªre, car  il n'y a pas besoin de r√©glages, de g√©n√©ration d'utilisateurs sur le serveur (comme dans MQTT), de g√©n√©ration de cl√©s d'acc√®s, etc. <br><br>  Les messages ne sont enregistr√©s nulle part, ni enregistr√©s ni transmis via le protocole s√©curis√© wss. <br>  Les messages sont des objets JSON typ√©s.  Les informations binaires sont transmises sous la forme d'une cha√Æne cod√©e Base64. <br><br>  Le code du projet est disponible sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GitHub</a> , et le hub actuel que vous pouvez trouver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br>  Le projet consiste en un serveur WebSocket sur .net, une application client Web qui se connecte au serveur et une application python pour raspberry pi. <br><br>  Une application web est loin d'√™tre le seul moyen possible d'interagir avec un serveur websocket.  Par exemple, vous pouvez facilement √©crire un client cloud qui ¬´√©coutera¬ª les √©v√©nements de la webcam et enregistrera des images sur une sorte de stockage cloud. <br><br>  L'architecture vous permet de connecter un nombre illimit√© de Raspberry Pi et de clients par canal. <br>  Par exemple, si vous souhaitez cr√©er une sorte de syst√®me de s√©curit√© / contr√¥le climatique / maison intelligente, vous pouvez mettre toutes les framboises sur un canal et envoyer des commandes √† toutes ou √† certaines instances √† la fois. <br><br>  Les √©v√©nements de diffusion "diffusion" recevront tous les participants du r√©seau. <br><br><h3>  Quelques mots sur les fonctionnalit√©s de l'application </h3><br><ol><li>  Acc√®s √† distance au syst√®me de fichiers.  Vous pouvez regarder, t√©l√©charger et t√©l√©charger des images, des fichiers audio et d'autres fichiers.  Il est tr√®s pratique de ne pas transporter l'int√©gralit√© de vos archives multi-t√©raoctets de photos sur votre t√©l√©phone.  Eh bien, ou si vous avez besoin de chercher quelque chose dans les archives. </li><li>  PiCamera vous permet de recevoir une image √† la demande et en mode webcam.  En plus de recevoir le son d'un microphone, il peut √™tre utilis√© comme une solution de s√©curit√© bon march√©.  N√©cessite une cam√©ra pi connect√©e. </li><li>  Envoyez des enregistrements sonores √† la framboise ou recevez des enregistrements d'un microphone.  Il peut √™tre utilis√© √† la fois pour certaines t√¢ches de s√©curit√© et pour l'interaction vocale avec des chats ou des enfants.  N√©cessite une connexion √† un t√©l√©viseur / haut-parleur et un microphone, respectivement. </li><li>  Allumez / √©teignez / obtenez la mise au point du t√©l√©viseur.  Le protocole CEC vous permet de contr√¥ler votre t√©l√©viseur via un c√¢ble HDMI.  Vous devez installer cec-client sur framboise. </li><li>  Affichez les informations audio et texte sur le t√©l√©viseur.  Cette fonction comprend l'allumage et la r√©ception de la mise au point sur le t√©l√©viseur et l'affichage d'un message texte, accompagn√© d'un signal sonore.  C'est pratique si vous devez forcer √† distance les enfants √† faire leurs devoirs. </li><li>  Affichage d'image √† distance.  Si vous voulez surprendre votre famille et afficher soudainement une photo de vos aventures sur un t√©l√©viseur familial, cette fonction est faite pour √ßa.  S√©lectionnez une image de votre PC ou t√©l√©phone et envoyez-la √† la framboise. </li><li>  Obtention de donn√©es sur l'humidit√©, la temp√©rature.  Raspberry envoie un message de diffusion avec une p√©riodicit√© sp√©cifi√©e.  En plus de l'humidit√© et de la temp√©rature, le message contient des informations sur la temp√©rature et la charge du processeur, le chargement du disque et de la m√©moire.  Ensemble, le contr√¥le du port d'E / S √† distance peut √™tre utilis√© comme t√©l√©commande du climat int√©rieur.  Un capteur de temp√©rature DHT11 (1 $) est n√©cessaire pour mesurer la temp√©rature. </li><li>  G√©rer les ports d'E / S  Il permet √† la fois de lire les informations des ports GPIO s√©lectionn√©s et de leur envoyer un signal.  Vous pouvez obtenir l'√©tat des interrupteurs, des ampoules, des sonneries et, via le relais, contr√¥ler certains appareils plus graves. </li><li>  Le d√©marrage √† distance des commandes permet d'ex√©cuter toutes les commandes shell sur la framboise.  Par exemple, commencez √† visualiser un album photo ou un film.  Si une telle opportunit√© vous semble dangereuse, cette fonction peut √™tre d√©sactiv√©e. </li></ol><br><br><img src="https://habrastorage.org/webt/zx/ir/hu/zxirhu07adcsei6kqxly7fkwuzs.gif" alt="image"><br>  √Ä suivre ... </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447496/">https://habr.com/ru/post/fr447496/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447480/index.html">Journ√©e de la cosmonautique 2019: √©v√©nements par ville</a></li>
<li><a href="../fr447482/index.html">Cyber ‚Äã‚ÄãLaw School. 5 jours intensifs en droit num√©rique</a></li>
<li><a href="../fr447488/index.html">Briser une fissure simple avec Ghidra - Partie 2</a></li>
<li><a href="../fr447490/index.html">Comment am√©liorer votre style d'√©criture en anglais: 5 conseils</a></li>
<li><a href="../fr447494/index.html">D√©veloppement durable GAN Learning (Creuser plus profond√©ment)</a></li>
<li><a href="../fr447498/index.html">Reportage photo de JPoint 2019 + annonce du Joker 2019 √† Saint-P√©tersbourg</a></li>
<li><a href="../fr447500/index.html">Pourquoi les op√©rateurs ont peur de l'eSIM</a></li>
<li><a href="../fr447502/index.html">Comment cr√©er un CV pour des entreprises informatiques √©trang√®res</a></li>
<li><a href="../fr447508/index.html">Sergey Zonov: ¬´J'ai fait le premier Spectrum parce que j'√©tais int√©ress√©¬ª</a></li>
<li><a href="../fr447510/index.html">GeekUniversity ouvre ses inscriptions au d√©partement Design</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>