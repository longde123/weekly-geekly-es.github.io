<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñï üîô üë©üèø‚Äçüé§ Una forma r√°pida de agregar notificaciones a una aplicaci√≥n de Android üë®üèø‚Äçüç≥ ‚ôéÔ∏è üßëüèø‚Äçü§ù‚Äçüßëüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Traduje para usted un art√≠culo de Brandon Weaver sobre c√≥mo trabajar con notificaciones en el sistema operativo Android. El programador explica c√≥mo a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Una forma r√°pida de agregar notificaciones a una aplicaci√≥n de Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/438462/"><img src="https://habrastorage.org/getpro/habr/post_images/dcc/b3a/ec7/dccb3aec71cce1cd9dde70221c7fe132.jpg"><br><br>  Traduje para usted <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un art√≠culo de Brandon Weaver</a> sobre c√≥mo trabajar con notificaciones en el sistema operativo Android.  El programador explica c√≥mo agregar r√°pidamente esta funcionalidad a su aplicaci√≥n.  El art√≠culo, en primer lugar, ser√° √∫til para los desarrolladores principiantes de Android. <br><br>  Las notificaciones son una de las formas m√°s f√°ciles y r√°pidas de hacer que su aplicaci√≥n sea m√°s interactiva, lo que atraer√° a m√°s usuarios.  Las notificaciones proporcionan al usuario informaci√≥n breve sobre lo que pueden necesitar en este momento.  Tambi√©n es una forma de informar sobre los pr√≥ximos eventos.  Intentemos agregar r√°pidamente esta funci√≥n a la aplicaci√≥n. <br><a name="habracut"></a><br><blockquote>  <b>Skillbox recomienda: El</b> curso en l√≠nea aplicado de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Python Data Analyst</a> . <br><br>  <b>Le recordamos:</b> <i>para todos los lectores de "Habr": un descuento de 10.000 rublos al registrarse en cualquier curso de Skillbox con el c√≥digo de promoci√≥n "Habr".</i> </blockquote><br><h3>  Crear notificaci√≥n </h3><br>  El primer paso es crear un objeto de "Notificaci√≥n".  Para hacer esto, use NotificationCompat.Builder.  El contenido m√≠nimo de notificaci√≥n permitido por los desarrolladores de Android es un peque√±o icono.  Esto es bueno, pero no muy √∫til para el usuario.  A continuaci√≥n se muestra un diagrama de una notificaci√≥n est√°ndar que es bien recibida. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4cc/eaf/f6f/4cceaff6f71d4b967bbcf91f2d566407.png"><br><br>  Un icono peque√±o se mostrar√° constantemente, y es importante que sea alfa-transparente.  Sin esto, en lugar de un icono, obtienes un cuadro blanco. <br><br>  El t√≠tulo de la notificaci√≥n tambi√©n es importante.  Esta deber√≠a ser una breve descripci√≥n para comprender por qu√© el usuario generalmente est√° preocupado. <br><br>  El cuerpo de la notificaci√≥n contiene un texto largo con toda la informaci√≥n necesaria. <br><br>  Un √≠cono grande puede ser el logotipo de una empresa u otra cosa. <br><br>  A continuaci√≥n hay dos opciones para el usuario. <br><br>  Para mostrar todo esto, necesita un c√≥digo corto: <br><br><pre><code class="java hljs">.setSmallIcon(R.drawable.ic_announcement) .setContentTitle(title) .setContentText(body) .build()</code> </pre> <br><h3>  Mostrar notificaci√≥n </h3><br>  Hemos creado nuestra notificaci√≥n, ahora la tarea es mostrarla.  Android hace posible hacer esto usando NotificationManagerCompat.  Para enviar una notificaci√≥n, debe utilizar la Id. De notificaci√≥n y la notificaci√≥n misma. <br><br><pre> <code class="java hljs">with(NotificationManagerCompat.from(context)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (getNotificationChannel(CHANNEL_ID) == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { createNotificationChannel(context) } notify(notificationId, builder.build()) }</code> </pre> <br>  Se necesita un c√≥digo adicional para verificar la existencia del canal de notificaci√≥n. <br><br><h3>  Canales e importancia </h3><br>  Por primera vez, un usuario tuvo la oportunidad de elegir los tipos de notificaciones de sus aplicaciones en Oreo.  Es importante crear varios canales, porque si todo va en un canal, el usuario no podr√° seleccionar los tipos de notificaciones que necesita y bloquear√° todo. <br><br><pre> <code class="java hljs">teNotificationChannel(context: Context) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) { val name = context.getString(R.string.channel_name) val descriptionText = context.getString(R.string.channel_description) val importance = NotificationManager.IMPORTANCE_HIGH val channel = NotificationChannel(CHANNEL_ID, name, importance).apply { description = descriptionText } NotificationManagerCompat.from(context).createNotificationChannel(channel) } }</code> </pre> <br>  El canal debe incluir la siguiente informaci√≥n: <br><br><ul><li>  ID: identificador de canal; </li><li>  nombre: debe ser breve, por ejemplo, "Mensajes"; </li><li>  importancia: puede ser alta, predeterminada, baja o m√≠nima; </li><li>  descripci√≥n: se mostrar√° en la configuraci√≥n de Android.  El desarrollador debe cuidar la calidad de la descripci√≥n. </li></ul><br><h3>  Interacci√≥n del usuario </h3><br>  Hay varias formas en que un usuario puede interactuar con las notificaciones.  Afortunadamente, las API que le permiten controlar el proceso son bastante similares.  Intentos y pendientes Los intentos se utilizan para proporcionar comentarios a la aplicaci√≥n, proporcionando una l√≥gica de procesamiento espec√≠fica. <br><br>  La forma m√°s f√°cil de manejar una gran cantidad de notificaciones es usar BroadcastReceiver.  Cuando el usuario comienza a interactuar con la notificaci√≥n, se activar√° la intenci√≥n y se llamar√° al m√©todo onReceive BroadcastReceiver. <br><br><pre> <code class="java hljs">val builder = NotificationCompat.Builder(context, CHANNEL_ID) ... .setContentIntent(onContentTapped <span class="hljs-comment"><span class="hljs-comment">/** Pending intent */</span></span>) .setDeleteIntent(onSwipedAway <span class="hljs-comment"><span class="hljs-comment">/** Pending intent */</span></span>) .addAction( R.drawable.ic_announcement, actionTitle, onActionTapped <span class="hljs-comment"><span class="hljs-comment">/** Pending intent */</span></span> )</code> </pre> <br>  ContentIntent se iniciar√° haciendo clic en la notificaci√≥n.  Vale la pena recordar que la notificaci√≥n no ser√° rechazada si no llama a setAutoCancel (true) en ella. <br>  DeleteIntent comenzar√° despu√©s de que el usuario elimine la notificaci√≥n. <br>  Las acciones son los botones en la parte inferior de la notificaci√≥n.  Tambi√©n tienen insignias y nombres. <br><br>  Para crear un BroadcastReceiver, debe extender la clase BroadcastReceiver, anular el m√©todo onReceive y recordar declarar el Receiver en AndroidManifest.xml. <br><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NotificationBroadcastReceiver</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BroadcastReceiver</span></span></span><span class="hljs-class">() </span></span>{ <span class="hljs-function"><span class="hljs-function">override fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onReceive</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context: Context, intent: Intent)</span></span></span><span class="hljs-function"> </span></span>{ val action = intent.<span class="hljs-function"><span class="hljs-function">action </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">when</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(action)</span></span></span><span class="hljs-function"> </span></span>{ ACTION_ONE -&gt; { Toast.makeText(context, <span class="hljs-string"><span class="hljs-string">"Action One hit!"</span></span>, Toast.LENGTH_SHORT).show() } ACTION_TWO -&gt; { Toast.makeText(context, <span class="hljs-string"><span class="hljs-string">"Action Two hit!"</span></span>, Toast.LENGTH_SHORT).show() } } } } object NotificationController { <span class="hljs-function"><span class="hljs-function">fun </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pendingIntent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context: Context, name: String, extras: Bundle?)</span></span></span><span class="hljs-function">: PendingIntent </span></span>{ val intent = Intent(context, NotificationBroadcastReceiver::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">).</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">apply</span></span></span><span class="hljs-class"> </span></span>{ action = <span class="hljs-function"><span class="hljs-function">name </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">putExtra</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(EXTRA_NOTIFICATION_ID, extras)</span></span></span><span class="hljs-function"> } return PendingIntent.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getBroadcast</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(context, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, intent, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> } }</span></span></code> </pre> <br>  NotificationController es una herramienta r√°pida para crear PendingIntents para notificaciones.  Lo m√°s importante es dar a las acciones diferentes nombres para manejar correctamente las reacciones del usuario a la notificaci√≥n.  Adem√°s, si tiene la intenci√≥n de iniciar una Actividad desde BroadcastReceiver, debe usar IntentFlag NEW_TASK. <br><br>  Esto es necesario para procesar todas las notificaciones en un solo lugar.  Los intentos tambi√©n se pueden registrar para diferentes BroadcastReceivers, por lo que puede limitar el alcance a un BroadcastReceiver para cada tipo de notificaci√≥n. <br><br>  Todo esto es solo el comienzo del trabajo.  Hay muchos ejemplos excelentes en la documentaci√≥n, as√≠ que aseg√∫rese de estudiarla si tiene preguntas o si desea hacer algo m√°s avanzado. <br><blockquote>  <b>Skillbox recomienda:</b> <br><br><ul><li>  Curso pr√°ctico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Mobile Developer PRO"</a> . </li><li>  El curso en l√≠nea <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Profession Web Developer"</a> . </li><li>  Curso pr√°ctico de dos a√±os <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Soy un desarrollador web PRO"</a> . </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/438462/">https://habr.com/ru/post/438462/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../438450/index.html">¬øPor qu√© la plantilla de pol√≠tica de privacidad no es adecuada para usted?</a></li>
<li><a href="../438454/index.html">OpenSceneGraph: Niveles de detalle (LOD) y carga de fondo de objetos</a></li>
<li><a href="../438456/index.html">Configuraci√≥n de inicio de sesi√≥n √∫nico en Zimbra Collaboration Suite</a></li>
<li><a href="../438458/index.html">La Conferencia DUMP 2019 se llevar√° a cabo el 19 de abril. Te invitamos a hablar en las secciones de Frontend, Backend y Ciencia.</a></li>
<li><a href="../438460/index.html">Serializaci√≥n a nivel de base de datos</a></li>
<li><a href="../438464/index.html">SciPy, algoritmos gr√°ficos</a></li>
<li><a href="../438466/index.html">Muleta para un l√°ser chino</a></li>
<li><a href="../438468/index.html">Colonia Cap√≠tulo 23: Prueba de manejo</a></li>
<li><a href="../438470/index.html">Ventas mundiales en diciembre y 2018: 2 millones de veh√≠culos el√©ctricos enchufables vendidos</a></li>
<li><a href="../438472/index.html">Sofisticado entorno arquitect√≥nico modular en UE4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>