<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Smart IdReader SDK: reconocimiento integrado en proyectos en Python y PHP  锔 </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nosotros, Smart Engines , continuamos con la serie de art铆culos sobre c贸mo integrar nuestras tecnolog铆as de reconocimiento ( pasaportes , tarjetas ban...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Smart IdReader SDK: reconocimiento integrado en proyectos en Python y PHP</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/smartengines/blog/472536/"><p>  Nosotros, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Smart Engines</a> , continuamos con la serie de art铆culos sobre c贸mo integrar nuestras tecnolog铆as de reconocimiento ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pasaportes</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tarjetas bancarias</a> y otras) en sus aplicaciones.  Anteriormente escribimos sobre incrustaci贸n en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">iOS</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Android</a> , mostramos c贸mo incrustar el reconocimiento en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bot de Telegram</a> , y hoy hablaremos sobre c贸mo trabajar con las interfaces Python y PHP de la biblioteca de reconocimiento Smart IDReader para usar en un servidor interno. </p><br><p>  Por cierto, la lista de lenguajes de programaci贸n que admitimos, adem谩s de los discutidos aqu铆, incluye C #, Objective-C, Swift y Java.  Como antes, admitimos todos los sistemas operativos y arquitecturas populares y muchos impopulares, y nuestras aplicaciones de demostraci贸n gratuitas est谩n disponibles para descargar desde la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">App Store</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Google Play</a> . </p><br><p>  Por tradici贸n, la versi贸n demo del Smart IDReader SDK para Python y PHP junto con ejemplos est谩 disponible en Github y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">est谩 disponible aqu铆.</a> </p><a name="habracut"></a><br><h2 id="sobiraem-obyortku">  Poner una envoltura </h2><br><p>  Dado que la versi贸n del complemento debe coincidir con la versi贸n del int茅rprete, no suministramos un m贸dulo listo para usar, sino un ensamblador autom谩tico que le permite recopilar e implementar el contenedor de biblioteca de reconocimiento Smart IDReader necesario en su m谩quina (se admiten Python 2/3 y PHP 5/7).  Para hacer esto, debe ejecutar el script de ensamblaje apropiado, indicando la ruta a nuestra biblioteca libsmartidEngine.so y la versi贸n del int茅rprete para la que necesita construir el m贸dulo.  Por ejemplo, para Python, se ve as铆: </p><br><pre><code class="plaintext hljs">bash build_python.sh ../../bin 3</code> </pre> <br><p>  PHP funciona de manera similar, solo el segundo argumento es la ruta a la configuraci贸n de php que usa: </p><br><pre> <code class="plaintext hljs">bash build_php.sh ../../bin /usr/bin/php56-config</code> </pre> <br><p>  <strong>Importante:</strong> despu茅s del ensamblaje, el m贸dulo resultante se referir谩 a libSmartidEngine.so en la ruta absoluta, 隆as铆 que primero instale la biblioteca en un directorio conveniente para usted! </p><br><p>  El ensamblador autom谩tico desempaquetar谩 el SWIG suministrado en el ensamblaje, generar谩 un m贸dulo y lo verificar谩 ejecutando la prueba. </p><br><p>  El contenedor de la biblioteca incluye dos archivos: un m贸dulo escrito en Python / PHP y una extensi贸n para el int茅rprete (_pySmartIdEngine.so para Python y phpSmartidEngine.so).  Para integrar el reconocimiento en el proyecto, debe importar el m贸dulo y conectar la extensi贸n. <br>  En el caso de Python, para esto es suficiente escribir expl铆citamente la ruta al m贸dulo y la extensi贸n: </p><br><pre> <code class="python hljs">sys.path.append(os.path.join(sys.path[<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-string"><span class="hljs-string">'../../bin/'</span></span>)) sys.path.append(os.path.join(sys.path[<span class="hljs-number"><span class="hljs-number">0</span></span>], <span class="hljs-string"><span class="hljs-string">'../../bindings/'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pySmartIdEngine</code> </pre> <br><p>  En PHP, un m贸dulo se importa de la misma manera: </p><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span>(phpSmartIdEngine.php<span class="hljs-string"><span class="hljs-string">");</span></span></code> </pre> <br><p>  pero con la extensi贸n es un poco m谩s complicado: el enlace din谩mico no funciona en algunas versiones, por lo que para trabajar constantemente con la extensi贸n debe colocarlo en la carpeta donde se encuentran todas las extensiones para su versi贸n (por ejemplo / usr / lib / php56 / modules) y conectarse, escritura en php.ini predeterminado </p><br><pre> <code class="plaintext hljs">extension=phpSmartisEngine.so</code> </pre> <br><p>  En el ejemplo con GitHub, solo le decimos al int茅rprete que use nuestro php.ini con la extensi贸n ya registrada </p><br><pre> <code class="plaintext hljs">php56 -c php.ini smartid_sample.php</code> </pre> <br><p>  Entonces, descubrimos la conexi贸n, 隆no dude en estudiar un ejemplo! </p><br><h2 id="izuchaem-interfeys">  Aprendiendo la interfaz </h2><br><p>  El ejemplo comienza con tres argumentos: la ruta a la imagen a reconocer, la ruta al archivo con la configuraci贸n del motor y el tipo de documento a reconocer (las pruebas ejecutan el ejemplo para rus.passport.national (pasaporte de un ciudadano de la Federaci贸n de Rusia)) </p><br><pre> <code class="plaintext hljs">python smartid_sample.py ../../testdata/passport_rf_2.jpg ../../data-zip/bundle_mock_smart_idreader.zip rus.passport.national</code> </pre> <br><p>  C贸mo funciona </p><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      (zip-,       ) engine = pySmartIdEngine.RecognitionEngine(config_path) #        session_settings = engine.CreateSessionSettings() session_settings.SetEnabledDocumentTypes(document_types) #    session = engine.SpawnSession(session_settings) #       resultFromImageFile = session.ProcessImageFile(image_path) session.Reset() #   output_recognition_result(resultFromImageFile)</span></span></code> </pre> <br><p>  Nos detendremos en los m茅todos para cargar la imagen con m谩s detalle: puede ser la ruta al archivo, una l铆nea en Base64 y un b煤fer en la memoria (ambos datos en los formatos RGB \ YUV NV21 y el archivo jpeg).  Los buffers pueden ser externos, o pueden extraerse de un objeto de la clase Image (despu茅s de crearlo especificando la ruta al archivo o usando el mismo buffer) </p><br><p>  <strong>Importante:</strong> solo se puede acceder a la imagen en formato RGB o YUV en el m贸dulo Python utilizando un objeto bytearray (cree un objeto del tama帽o requerido, p谩selo al m茅todo CopyToBuffer, vea un ejemplo), 隆en PHP solo puede trabajar con una cadena de formato Base64! </p><br><p>  Completamente se ve as铆 (en Python): </p><br><pre> <code class="python hljs">engine = pySmartIdEngine.RecognitionEngine(config_path) session_settings = engine.CreateSessionSettings() session_settings.SetEnabledDocumentTypes(document_types) <span class="hljs-comment"><span class="hljs-comment">#   Image (   ) testImage = pySmartIdEngine.Image(image_path) #    ,      binaryRGBfile = open(image_path, "rb") size = os.path.getsize(image_path) binaryRGBfileBuffer = bytearray(size) binaryRGBfile.readinto(binaryRGBfileBuffer) #  ,    Base64 f = open(os.path.join(sys.path[0],"base64.txt"), 'r') base64BufferString = f.readline() f.close() # Base64-       # base64BufferString = testImage.GetBase64String() #    session = engine.SpawnSession(session_settings) #   resultFromImage = session.ProcessImage(testImage) session.Reset() resultFromImageFile = session.ProcessImageFile(image_path) session.Reset() resultFromImageData = session.ProcessImageData(binaryRGBfileBuffer, size) session.Reset() resultFromBase64 = session.ProcessImageDataBase64(base64BufferString) session.Reset() #   output_recognition_result(resultFromImage) output_recognition_result(resultFromImageFile) output_recognition_result(resultFromImageData) output_recognition_result(resultFromBase64)</span></span></code> </pre> <br><p>  Los m贸dulos Python y PHP le permiten aprovechar todas las funcionalidades proporcionadas por la interfaz C ++ de nuestra biblioteca (con la excepci贸n de trabajar con un buffer en PHP, como se describi贸 anteriormente). </p><br><h2 id="zaklyuchenie">  Conclusi贸n </h2><br><p>  Consideramos trabajar con SmartIdEngine SDK en Python y PHP, en los ejemplos reflejamos todas las dificultades que puede encontrar en el proceso de implementaci贸n del m贸dulo en una m谩quina en funcionamiento.  La versi贸n simulada de la biblioteca, presentada en el github, le permite demostrar el mecanismo de implementaci贸n del m贸dulo y estudiar su interfaz sin ninguna funcionalidad de reconocimiento.  Para una versi贸n de prueba, cont谩ctenos: support@smartengines.ru </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472536/">https://habr.com/ru/post/472536/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472526/index.html">3D se dispara: se ha creado un nuevo compuesto para el sector aeroespacial, que ha reducido la masa de piezas en un 20%</a></li>
<li><a href="../472528/index.html">Intentando precargar (PHP 7.4) y RoadRunner</a></li>
<li><a href="../472530/index.html">Videovigilancia en Mosc煤: realidades actuales y perspectivas</a></li>
<li><a href="../472532/index.html">Enlace de ayuda 煤til para vendedores</a></li>
<li><a href="../472534/index.html">隆Se despiertan! (N.-F. novela, parte 1 de 2)</a></li>
<li><a href="../472540/index.html">隆Se despiertan! (n.-f. historia, parte 2 y la 煤ltima)</a></li>
<li><a href="../472544/index.html">Trucos de marketing de Pornhub: lo que dice el sitio web m谩s conmovedor de hoy</a></li>
<li><a href="../472548/index.html">C贸mo fuimos al mercado (y no logramos nada especial)</a></li>
<li><a href="../472550/index.html">Lanzamiento de un negocio de TI: las 4 mejores franquicias tecnol贸gicas de 2019</a></li>
<li><a href="../472552/index.html">63 n煤cleos bloqueados por siete instrucciones</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>