<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👱🏿 🐁 🔽 Membuat Keyestudio GSM / GPRS Shield berfungsi melalui perpustakaan Amperka ♠️ 🥠 👩🏻‍⚕️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya ingin memperkenalkan perpustakaan untuk GSM / GPRS Shield untuk Arduino dari Keyestudio. Saya membeli perangkat ini karena harganya. Di Cina, ter...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membuat Keyestudio GSM / GPRS Shield berfungsi melalui perpustakaan Amperka</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/403843/">  Saya ingin memperkenalkan perpustakaan untuk GSM / GPRS Shield untuk Arduino dari Keyestudio.  Saya membeli perangkat ini karena harganya.  Di Cina, ternyata hampir 2 kali lebih murah daripada mitranya dari Amperka, dan tiga kali lipat dari iAruino.  Alasan penulisan teks ini adalah kurangnya perpustakaan yang dapat diterima di Keyestudio untuk bekerja dengannya.  <s>Bekerja melalui serangkaian perintah AT tidak dipertimbangkan.</s>  Perpustakaan untuk perangkat serupa lainnya tidak pas secara langsung.  Bagaimanapun, saya tidak bisa membuat mereka bekerja. <br><br>  Menurut pendapat saya, saya harus mengadaptasi perpustakaan Amperkovskaya yang paling rumit untuk papan ini, dan dengan demikian mencoba untuk mempertahankan kompatibilitas kode yang ditulis untuk perisai Amperkovsky. <br><a name="habracut"></a><br>  Sebenarnya tautan ke perpustakaan: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github.com/andrewinc/keyestudio-gsm-gprs-shield</a> <br><img src="https://habrastorage.org/web/e22/963/00c/e2296300c29f4967bd280e81173b58de.jpg" alt="Appearance Keyestudio GSM / GPRS Shield"><br>  Amperka menggunakan chip Sim900R dalam perisainya, dan inilah Sim900.  Perbedaan paling penting dalam sinyal ST: ada di pustaka sumber dan perisai, tetapi tidak di Keyestudio.  Sementara itu, itu akan jelas mengaktifkan atau menonaktifkan chip.  Tetapi ada tombol SIM900_Power, yang mendorong saya untuk berpikir buruk tentang kurangnya kemampuan perangkat lunak untuk menyalakan chip.  Untungnya, mereka salah. <br><br>  Pin 9 - mengontrol masuknya chip, pengganti yang sama untuk tombol Power, PK ditunjukkan pada papan Amperka. <br><br>  Sedikit perbedaan dalam versi chip tidak mempengaruhi kemampuannya, dalam hal apa pun, saya berhasil melakukan panggilan, mengirim dan menerima SMS menggunakan contoh-contoh yang disediakan di perpustakaan.  Saya pikir ini adalah arah utama menggunakan perisai ini. <br><br><h3>  Pengaturan fisik </h3><br>  Dewan berkomunikasi dengan Arduino melalui antarmuka UART.  Bagi mereka yang tidak tahu UART, ini adalah pin TX dan RX.  Dengan TX - data berikut dari Arduino, dan oleh RX - kembali. <br><br>  Ada juga saklar "UART_Port - DBG_Port", tetapi saya tidak menggunakan port ini.  Switch tetap berada di "UART_Port". <br><br>  Fitur papan adalah tidak berfungsi di luar kotak.  Jika Anda memperhatikan kondisi jumper setelah membuka paket (lihat foto di atas), Anda dapat melihat koneksi TXD c 0 dan RXD dengan 1. Pada Arduino, pin yang sama digunakan untuk TX dan RX.  Inilah masalahnya, karena  mereka sibuk mengunduh sketsa, mereka juga digunakan untuk bertukar informasi melalui objek Serial, termasuk.  dan untuk debugging.  Saat menghubungkan Arduino ke perisai, terjadi konflik dan firmware gagal. <br><br><h3>  Serial Perangkat Lunak </h3><br>  Diketahui bahwa Arduino UNO hanya memiliki satu antarmuka Serial, tetapi seluruh keluarga mereka, misalnya, Arduino Mega.  Serial1 dikaitkan dengan sepasang TX1 dan RX1, serupa untuk Serial2 dan Serial3. <br>  Untuk menggunakan Arduino UNO, masuk akal untuk menggunakan perangkat lunak Serial.  Cukup menghubungkan perpustakaan yang sesuai, dan membuat objek itu sendiri, menunjukkan pin Arduino yang merupakan sinyal TXD dan RXD dari shield'a: <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SoftwareSerial.h&gt; SoftwareSerial mySerial(6, 7);</span></span></span></span></code> </pre> <br>  Dalam contoh ini, TXD terhubung ke pin 6, dan RXD terhubung ke 7. <br><br><h3>  Perangkat lunak memungkinkan chip </h3><br>  Pin on / off chip - 9, tidak seperti TX dan RX, tidak dapat dihubungkan ke pin Arduino lainnya, dalam hal apa pun, tidak ada sakelar pada pelindung untuk ini. <br><br>  Untuk menghidupkan chip yang Anda butuhkan untuk mengirim sinyal tinggi 9 pin, tunggu 1-3 detik dan menerapkan sinyal rendah untuk itu.  Maka biasanya dalam kode Anda dapat melihat menunggu dalam detik 5-15.  Semua ini menyerupai manipulasi tombol daya pada ponsel, dan kemudian mengunduhnya dan membuat koneksi dengan jaringan. <br><br>  Di perpustakaan sumber dari Amperka, ada umpan balik melalui sinyal ST.  Melalui itu, dalam proses menyalakan, negara diperiksa: apakah chip menyala?  Sayangnya, dengan tidak adanya sinyal ini, metode on dan off dari chip mirip dengan saudara kembar, karena fakta bahwa strobo panjang 9-pin juga dikirim untuk mematikan.  Metode ini tidak digabungkan menjadi satu karena kompatibilitas kode <s>dan karena kemalasan biasa</s> . <br><br><h3>  Bagaimana cara kerjanya </h3><br>  Perpustakaan itu sendiri terhubung dengan garis: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;GPRSk_Shield_Arduino.h&gt;</span></span></span></span></code> </pre> <br>  Kemudian Anda dapat membuat objek berdasarkan kelas GPRSk dan meneruskan mySerial yang sama ke konstruktor atau menentukan perangkat keras Serial1, Serial2, dll.  Contoh: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">GPRSk </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gprs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(mySerial)</span></span></span></span>;</code> </pre> <br>  Serial dan mySerial biasanya diinisialisasi dalam fungsi pengaturan, namun, jika Anda tidak berencana untuk mengirim informasi debug ke monitor Arduino IDE, Anda hanya dapat melakukan inisialisasi mySerial. <br><br>  Setelah itu, chip dimatikan menggunakan metode gprs.powerOn () dan kemudian gprs.init () dipanggil, yang akan mengembalikan true jika chip siap menerima / mengirimkan informasi. <br><br>  Ketika semua tugas ini selesai, Anda dapat mengirim SMS: <br><br><pre> <code class="cpp hljs">gprs.sendSMS(<span class="hljs-string"><span class="hljs-string">"+79007654321"</span></span>, <span class="hljs-string"><span class="hljs-string">"Hello SMS from Keyestudio!"</span></span>);</code> </pre> <br>  Baca posting baru: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> message[<span class="hljs-number"><span class="hljs-number">160</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> phone[<span class="hljs-number"><span class="hljs-number">16</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> datetime[<span class="hljs-number"><span class="hljs-number">24</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (gprs.ifSMSNow()) { gprs.readSMS(message, phone, datetime); }</code> </pre> <br>  melakukan panggilan: <br><br><pre> <code class="cpp hljs">gprs.callUp(<span class="hljs-string"><span class="hljs-string">"+79007654321"</span></span>);</code> </pre> <br>  dll. <br><br>  Dalam kerangka perpustakaan, contoh "Amperkov" dilampirkan, di mana hanya Serial1 diubah menjadi perangkat lunak.  Mereka diuji pada Keyestudio GSM / GPRS Shield dan menunjukkan kinerja mereka. <br><br><h3>  Nutrisi </h3><br>  Pengamatan telah menunjukkan bahwa "sandwich" ini dari Arduino UNO dan perisai GPRS tidak memiliki daya dari USB.  Ini diungkapkan dengan mengeluarkan sistematis salah dengan metode gprs.init () <br>  Ada juga daya 200mA (9V) yang tidak memadai ke konektor daya Arduino standar selain daya USB.  Sebaliknya, kadang-kadang gprs.init () berlalu, dan terkadang tidak.  Saya percaya bahwa catu daya 5V 1-1.5A akan cukup memadai. <br><br><h3>  Kekurangan: </h3><br><ol><li>  Perpustakaan menggunakan jeda penundaan (), yang mengganggu eksekusi semua kode pengontrol. </li><li>  Diasumsikan bahwa tidak ada kode PIN yang dipasang pada kartu SIM </li><li>  Teks pesan SMS tidak mendukung Cyrillic. </li></ol><br>  Saya harap perpustakaan ini dapat bermanfaat, serta beberapa catatan tentang cara bekerja dengan perisai ini. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id403843/">https://habr.com/ru/post/id403843/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id403833/index.html">Dari mana datangnya keinginan untuk mengasuh anak yang berlebihan?</a></li>
<li><a href="../id403835/index.html">Ulas Zyxel Keenetic Extra II: AC1200 dengan harga yang wajar</a></li>
<li><a href="../id403837/index.html">Wana decrypt0r 2.0 cryptor mass attack sedang berlangsung</a></li>
<li><a href="../id403839/index.html">Pencetakan 3D di Urban Fest 2017</a></li>
<li><a href="../id403841/index.html">Ulasan kursus online tentang Arduino / robotika dari MIPT (minggu ketiga)</a></li>
<li><a href="../id403845/index.html">Emercoin terhubung ke F2Pool</a></li>
<li><a href="../id403847/index.html">Total Commander: cari di folder saat ini secara default</a></li>
<li><a href="../id403849/index.html">Polisi Inggris akan memutuskan tersangka AI</a></li>
<li><a href="../id403851/index.html">Selama dua tahun sekarang, driver untuk kartu suara di laptop HP dilengkapi dengan keylogger bawaan</a></li>
<li><a href="../id403853/index.html">Log dan basis data acara IoT. Mulai cepat dengan server iRidium</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>