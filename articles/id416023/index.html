<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>❓ 🎾 🤛 Seperti julukan iOS, bot Telegram menulis, di Swift 🖖🏾 💆🏻 🎲</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ini akan tentang Telegrammer, kerangka kerja Telegram Bot untuk Linux / macOS , ditulis seluruhnya dalam Swift 4.1 



 Eksposisi: Bagaimana pemikiran...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Seperti julukan iOS, bot Telegram menulis, di Swift</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416023/"><p>  Ini akan tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Telegrammer, kerangka kerja Telegram Bot untuk Linux / macOS</a> , ditulis seluruhnya dalam Swift 4.1 </p><br><p><img src="https://habrastorage.org/webt/uh/8_/do/uh8_do0h1mqyeeyheidwr3c-daw.png"></p><a name="habracut"></a><br><h1 id="ekspoziciya-kak-zhe-prishla-v-golovu-takaya-mysl">  Eksposisi: Bagaimana pemikiran seperti itu muncul dalam pikiran? </h1><br><p>  Salah satu proyek kesayangan saya (aplikasi iOS yang terkait dengan Telegram, tetapi sekarang ini bukan tentang dia) membutuhkan antarmuka web untuk pengelola konten untuk membuat deskripsi, tag, dan lainnya.  Karena aplikasi sudah terhubung secara ideologis dengan Telegram, segera terlintas di benak saya untuk mengirim konten langsung ke messenger dan sudah ada tindakan di atas. </p><br><p>  Ternyata Anda dapat mengirim data tersebut melalui bot (bagaimana <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bot</a> diatur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dalam Telegram</a> ). </p><br><h1 id="zavyazka-iskal-gotovoe-reshenie-podhodyaschego-ne-nashel">  Awal: Saya mencari solusi yang sudah jadi, saya tidak bisa menemukan yang cocok. </h1><br><p> Dan kemudian semua bintang berbaris berurutan, sekarang Anda akan mengerti apa yang saya maksud ... </p><br><p>  Ada banyak kerangka kerja Sisi Server yang andal dan terbukti di Jawa, Go, Python, PHP, dan lainnya yang sudah memungkinkan Anda membuat bot tanpa masalah.  Tapi ini bukan tentang kita (saksi <del>  Yehuwa </del>  Apple), kami tidak mencari cara mudah. </p><br><p>  Bagaimana jika Anda menulis bot di Swift? </p><br><p>  Baru-baru ini (berdasarkan standar bahasa pemrograman), komunitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Server Side Swift</a> mulai berkembang secara aktif, dan beberapa kerangka kerja muncul, seperti Vapor, Perfect, Kitura, yang berhasil mendapatkan ketenaran yang cukup. </p><br><p>  Plus, Apple melemparkan kayu bakar ke tungku, membuat hidup lebih mudah bagi pengembang dengan kerangka kerja <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SwiftNIO</a> tingkat rendah dan kinerja tinggi </p><br><div class="spoiler">  <b class="spoiler_title">Mengapa SwiftNIO keren?</b> <div class="spoiler_text"><p>  SwiftNIO adalah kerangka kerja aplikasi jaringan yang digerakkan oleh platform asynchronous asinkron untuk pengembangan cepat dari server &amp; klien protokol kinerja tinggi. </p><br><p>  Ini seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Netty</a> , tetapi ditulis untuk Swift. </p><br><p>  SwiftNIO pada dasarnya adalah alat tingkat rendah untuk membangun aplikasi jaringan berkinerja tinggi di Swift.  Ini terutama menargetkan kasus-kasus penggunaan di mana menggunakan model konkurensi "thread-per-koneksi" tidak efisien atau tidak dapat dipertahankan.  Ini adalah batasan umum ketika membangun server yang menggunakan sejumlah besar koneksi pemanfaatan yang relatif rendah, seperti server HTTP. </p><br><p>  Untuk mencapai tujuannya SwiftNIO secara ekstensif menggunakan "I / O" yang tidak menghalangi ": itulah namanya!  Non-blocking I / O berbeda dari model I / O blocking yang lebih umum karena aplikasi tidak menunggu data dikirim atau diterima dari jaringan: sebaliknya, SwiftNIO meminta kernel untuk memberitahukannya ketika operasi I / O dapat dilakukan tanpa menunggu. </p><br><p>  SwiftNIO tidak bertujuan untuk memberikan solusi tingkat tinggi seperti, misalnya, kerangka kerja web lakukan.  Alih-alih, SwiftNIO berfokus untuk menyediakan blok bangunan tingkat rendah untuk aplikasi tingkat tinggi ini.  Ketika datang untuk membangun aplikasi web, sebagian besar pengguna tidak akan ingin menggunakan SwiftNIO secara langsung: sebagai gantinya, mereka akan ingin menggunakan salah satu dari banyak kerangka kerja web besar yang tersedia di ekosistem Swift.  Kerangka kerja web tersebut, bagaimanapun, dapat memilih untuk menggunakan SwiftNIO di balik selimut untuk memberikan dukungan jaringan mereka. </p></div></div><br><h4 id="chto-ya-rassmatrival-iz-gotovyh-telegram-bot-swift-bibliotek">  Apa yang saya pertimbangkan dari perpustakaan Telegram Bot Swift yang sudah selesai: </h4><br><ol><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">zmeyc / telegram-bot-swift</a> - Pustaka yang cukup canggih, seluruh API Telegram Bot diuraikan dari situs, baik metode dan model, perutean lanjutan, bekerja pada MacOS dan Linux. <br>  Kerugian yang terkait dengan fakta bahwa itu ditulis sejak lama, dan pada saat itu, semua kerangka kerja Apple (terutama Foundation) bekerja di Linux sangat tidak stabil: </p><br><ul><li>  Mengirim permintaan melalui ikal </li><li>  Pada saat penelitian, perpustakaan itu sendiri dan perpustakaan dependen tidak porting ke 4 cepat </li><li>  Tidak didukung oleh webhooks </li><li>  Sebuah repositori yang belum diperbarui untuk waktu yang lama, sebagai akibatnya, beberapa fitur API Telegram Bot yang diperbarui tidak didukung. </li></ul><br></li><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">FabrizioBrancati / SwiftyBot</a> - Maafkan saya, saya tidak mengerti mengapa bot ini memiliki bintang terbanyak, Uap 2.4.0 yang ketinggalan zaman berada di bawah tenda, dan main.swift yang kesepian, yang hanya menunjukkan pekerjaan paling sederhana dengan bot tersebut.  Tidak ada model, pembantu, antrian pengiriman, tidak ada.  Oh tidak!  Tidak seperti pesaing, ini mendukung WebHooks. </p><br></li><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ShaneQi / ZEGBot</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Implementasi yang</a> sangat sederhana, metode dasar, model, dan sekali lagi hanya LongPolling yang diimplementasikan. </p><br></li></ol><br><p>  Jadi, sudah diputuskan, kami akan menulis kerangka kerja kami sendiri.  Sejujurnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Andrey Fidrya</a> mengilhami saya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dengan botnya</a> , tetapi saya memutuskan bahwa saya bisa mencoba melakukan yang lebih baik. </p><br><h1 id="kulminaciya-dobro-pozhalovat-v-mir-bekenda-swiftnio-spasibo-za-vzorvannyy-mozg">  Climax: Selamat datang di dunia backend.  SwiftNIO, terima kasih atas otaknya yang meledak. </h1><br><p>  Saya akui, setelah aplikasi iOS, menulis aplikasi untuk Server Side cukup sulit, saya harus berfikir berbeda. </p><br><p>  Pada saat kerangka itu ditulis, orang-orang dari Vapor telah mengumumkan versi beta dan sudah berdasarkan pada SwiftNIO.  Vapor memiliki arsitektur modular, setiap lapisan hidup dalam repositori sendiri, yang sangat nyaman, Anda hanya dapat menggunakan sebagian dari implementasinya. </p><br><h4 id="ya-reshil-ispolzovat">  Saya memutuskan untuk menggunakan: </h4><br><ul><li>  <a href="https://github.com/vapor/">vapor / http</a> - untuk HTTPClient, HTTPServer </li><li>  <a href="">vapor / crypto</a> - untuk https </li><li>  <a href="">vapor / multipart</a> - untuk mengonversi Model -&gt; multipart / form-data </li></ul><br><p>  Dalam prosesnya, beberapa bug ditemukan di Vapor HTTPClient, berhasil diperbaiki, HTTPServer ditingkatkan, untuk bekerja dengan https di luar kotak, tanpa perlu menggunakan nginx dan sejenisnya. </p><br><h4 id="chto-poluchilos">  Apa yang terjadi: </h4><br><ul><li>  API bot dirancang dengan perhatian kuat pada pemain tepercaya di area ini <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">python-telegram-bot</a> </li><li>  Seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">zmeyc / telegram-bot-swift,</a> semua model dan metode bot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">API Telegram Bot</a> dapat dihasilkan dengan menjalankan skrip. </li><li>  Menerapkan mode Longpolling dan WebHooks </li><li>  Penangan yang diimplementasikan: CommandHandler, CallbackQueryHandler, RegexpHandler, MessageHandler </li><li>  Banyak filter untuk Pembaruan </li><li>  Dua bot sederhana, sebagai contoh, standar EchoBot dan HelloBot </li></ul><br><h1 id="razvyazka-pishem-bota-obschepoleznogo-pust-proveryaet-orfografiyu">  Interchange: Kami menulis bot yang umumnya berguna, biarkan bot memeriksa ejaannya. </h1><br><p>  Bot: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@yandex_spell_checker_bot</a> <br>  Kode sumber: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/givip/YandexSpellCheckerBot</a> </p><br><p>  <em>main.swift</em> terlihat seperti ini: </p><br><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Foundation <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Telegrammer ///   enviroment variable ( , ) guard let token = Enviroment.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>("SPELL_CHECKER_BOT_TOKEN") <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { ///   let bot = try Bot(token: token) ///    let dispatcher = Dispatcher(bot: bot) ///    let controller = SpellCheckerController(bot: bot) ///    /<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>,   let commandHandler = CommandHandler(commands: ["/start"], callback: controller.<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>) dispatcher.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>: commandHandler) ///    ,        let textHandler = MessageHandler(filters: .private, callback: controller.spellCheck) dispatcher.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>: textHandler) ///   ,    . let inlineHandler = CallbackQueryHandler(pattern: "\\w+", callback: controller.<span class="hljs-keyword"><span class="hljs-keyword">inline</span></span>) dispatcher.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>: inlineHandler) ///     Longpolling _ = try Updater(bot: bot, dispatcher: dispatcher).startLongpolling().wait() } catch { print(error.localizedDescription) }</code> </pre> <br><h1 id="epilog-ios-razrabotchiki-i-ne-tolko-polzuytes">  Epilog: Pengembang iOS dan banyak lagi, gunakan itu! </h1><br><p>  Kerangka kerja ini dalam versi beta, dan siapa pun dapat menggunakannya untuk kebutuhan mereka. </p><br><p>  Setelah satu bulan pengujian dan peningkatan, ada beberapa kekurangan, Wishlist dan banyak masalah peningkatan, tetapi bagaimanapun, "Pemeriksaan Ejaan" telah berputar di Ubuntu untuk waktu yang lama. </p><br><p>  Saya akan berterima kasih atas umpan balik, dan melemparkan kipas angin. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id416023/">https://habr.com/ru/post/id416023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id416013/index.html">Cara mulai berinvestasi dan menghemat uang: Pakar Dow Jones menyebutkan lima kesalahan utama pedagang pemula</a></li>
<li><a href="../id416015/index.html">Bermain dengan utas di Node.JS 10.5.0</a></li>
<li><a href="../id416017/index.html">Kami mengumpulkan analisis kohort / analisis arus pada contoh Excel</a></li>
<li><a href="../id416019/index.html">Seberapa baik ekosistem open-source R untuk memecahkan masalah bisnis?</a></li>
<li><a href="../id416021/index.html">Mengembangkan kerangka kerja Anda sendiri dan pertumbuhan profesional seorang programmer JS</a></li>
<li><a href="../id416025/index.html">Menerapkan Navigasi dalam Aplikasi Android Menggunakan Komponen Arsitektur Navigasi</a></li>
<li><a href="../id416027/index.html">Soviet HI-FI dan penciptanya: Kesukaan Hale - Elektronik 150AC - 001</a></li>
<li><a href="../id416029/index.html">Computer Liquid: Capture of Ion dalam Graphene</a></li>
<li><a href="../id416035/index.html">Pemindai 3D gigi Shining 3D Autoscan DS EX (Tanpa Box) oleh 3Dtool</a></li>
<li><a href="../id416037/index.html">Startup of the day (April-Juni 2018)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>