<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏽‍🚀 💼 🧡 Facebook como contador de un viejo medidor eléctrico ⛰️ 👰🏿 🤳🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hicimos una página física como contador en Facebook. Del viejo medidor eléctrico. En el núcleo está el tablero programable Iskra Neo de Amperka (análo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Facebook como contador de un viejo medidor eléctrico</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431554/">  Hicimos una página física como contador en Facebook.  Del viejo medidor eléctrico.  En el núcleo está el tablero programable Iskra Neo de Amperka (análogo a Arduino) y un servomotor de rotación constante. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/-k/7_/zq/-k7_zq8y6ij0lgthn5zbrsyutvw.jpeg"><br><br>  Para observar el crecimiento de los Me gusta, colocamos una cámara en línea dirigida al mostrador y sacamos el botón Me gusta en el blog.  También me gusta lidiar con la electrónica y administrar las cosas a través de Internet. <br><br>  Esta es la primera experiencia. <br><br><h3>  ¿Cómo se hace esto? </h3><br>  La electrónica para recibir Me gusta ya ha sido ensamblada y probada en el proyecto Amperka, es suficiente recolectarla.  Resultó que no era tan fácil cuando quería hacer todo en Arduino Uno en lugar de Spark.  No funcionó debido a los diferentes principios de trabajo con UART (el módulo WiFi recibe señales a través de él).  Para no escribir el software UART, tuve que anotar en Arduino y usar el Iskra Neo original. <br><br>  El módulo no puede solicitar el número de Me gusta directamente desde la página fb, ya que no funciona con HTTPS.  Para evitar la restricción del servidor, se cuelga un script PHP que reconoce el número de me gusta y se emite como una variable.  Y el módulo ya está accediendo a la dirección de este script PHP usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">comandos AT</a> (recuerde, antes de que el módem pudiera decir ATDP XXX, donde XXX es el número de teléfono, ¿y comenzó a llamarlo? Esto es lo que son) <br><br>  La electrónica estaba lista, dividí las tareas restantes en dos partes: <br><br><ul><li>  Accionamiento del medidor </li><li>  Programa de gestión </li></ul><br><h3>  Accionamiento del medidor </h3><br>  Sería genial hacer una solución elegante para conectar un medidor con un suministro de corriente a las bobinas originales.  Entonces fue posible abandonar el disco giratorio e interferir con el diseño al mínimo.  Pero esto es difícil de implementar, por lo que lo pospusieron para la próxima versión.  Ahora en el mostrador, un servomotor de rotación constante está conectado directamente a los engranajes que giran el contador. <br><br><img src="https://habrastorage.org/webt/eo/1v/qm/eo1vqmtosgq9matjg1z9ovu0kyy.jpeg"><br><br><img src="https://habrastorage.org/webt/ms/to/n5/mston5q7hn-qs-8g5mdaslnidee.jpeg"><br><br><img src="https://habrastorage.org/webt/4l/x_/io/4lx_io60cngf8elonaf3cr8byqi.jpeg"><br><br><h3>  Programa de gestión </h3><br>  Primero, calculé cuántos milisegundos es necesario encender el motor para que el disco gire una revolución.  Resultó unos 1650 ms.  Inmediatamente se hizo evidente que esta cifra cambia por el voltaje en la red (y por alguna razón a veces salta), y por caminar sobre las ruedas del mostrador.  Se desarrollaron hace unos 50 años, y más o menos medio dígito no jugó un papel en ese momento. <br><br><img src="https://habrastorage.org/webt/uf/n5/tq/ufn5tqbvjxepamraykaserpvtsi.png"><br><br>  El programa necesita saber qué muestra exactamente el contador, y al menos deberíamos poder corregirlo manualmente.  Para averiguar el número exacto de grados en que el motor giró las ruedas, necesitará un sensor como un sensor de posición del acelerador en un automóvil, es difícil. <br><br>  Por lo tanto, en la primera versión, para controlar la precisión de las lecturas, hay una pantalla electrónica al lado del contador y dos botones que se pueden usar para corregir manualmente el contador si ha salido mal.  Modo semi-manual, y qué hacer. <br><br>  El programa proporciona una variable que almacena el número de Me gusta en un contador físico.  Cuando se apaga la alimentación, se almacena en la EPROM y, cuando se enciende, se retira de allí. <br><br>  Esto es necesario para que, cuando se desconecte de la red, sepan cuánto debe arreglarse el contador. <br><br><h3>  Cual es el resultado? </h3><br>  El resultado fue un objeto de arte genial.  Antes de instalar la cámara y colgarla en la pared de nuestra habitación, la publicamos para su revisión en la zona común de coworking. <br><br>  Todavía está lejos de ser perfecto.  Falta de precisión, cuando se enciende la alimentación, el servomotor a veces comienza a girar por sí mismo y no hay un disco giratorio original. <br><br>  Finalizaremos en la próxima versión. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es431554/">https://habr.com/ru/post/es431554/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es431542/index.html">Desarrollo efectivo y mantenimiento de roles Ansible</a></li>
<li><a href="../es431544/index.html">Llevar DevOps a las masas</a></li>
<li><a href="../es431546/index.html">¿Por qué estamos diciendo bien?</a></li>
<li><a href="../es431548/index.html">Solar Dozor - ¿Qué hay detrás de las estrellas?</a></li>
<li><a href="../es431550/index.html">Moldeo por inyección de película (IMD): cómo funciona</a></li>
<li><a href="../es431556/index.html">Sidenis sobre trabajar con corporaciones de seguros, entrenamiento ágil y tecnologías prohibidas</a></li>
<li><a href="../es431558/index.html">Si inventar un lenguaje de programación del siglo XXI</a></li>
<li><a href="../es431560/index.html">Acceso a redes de señalización SS7 a través del subsistema de radio: ahora es posible</a></li>
<li><a href="../es431562/index.html">Cómo rodar con código heredado cuando se necesitaba un proyecto ayer</a></li>
<li><a href="../es431564/index.html">El mayor error en la historia de la física.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>