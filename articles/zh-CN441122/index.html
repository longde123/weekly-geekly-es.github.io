<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ–²ï¸ â™¨ï¸ ğŸ§’ğŸ» Magento 2 EAVï¼šæ•°æ®ç»“æ„æ¦‚è¿° ğŸ”¬ ğŸ§–ğŸ¾ ğŸ’ªğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨æœ¬å‡ºç‰ˆç‰©ä¸­ï¼Œæˆ‘å°†å›é¡¾æ”¯æŒè¯¸å¦‚EAVä¹‹ç±»çš„æ¦‚å¿µçš„Magento 2 æ•°æ®ç»“æ„ ã€‚ å¼€å‘äººå‘˜æœ‰æ—¶éœ€è¦æ‘†è„±ç¹ççš„ä»£ç ï¼Œå¹¶å°è¯•ä»é›„é¹°çš„é£è¡Œé«˜åº¦è°ƒæŸ¥è‡ªå·±çš„ç”Ÿæ´»åœ°ç‚¹-è¿™ä½¿æ‚¨å¯ä»¥ä¸“æ³¨äºçœŸæ­£é‡è¦æˆ–éå¸¸é‡è¦çš„äº‹æƒ…ã€‚ æ‰€ä»¥æˆ‘å‡ºå»äº†ã€‚ 





 ç¼©å†™EAVè¢«å…¬å¼€ä¸ºEntity - Attribute - Value...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Magento 2 EAVï¼šæ•°æ®ç»“æ„æ¦‚è¿°</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/441122/"><p> åœ¨æœ¬å‡ºç‰ˆç‰©ä¸­ï¼Œæˆ‘å°†å›é¡¾æ”¯æŒè¯¸å¦‚<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">EAVä¹‹ç±»</a>çš„æ¦‚å¿µçš„Magento 2 <em>æ•°æ®ç»“æ„</em> ã€‚ å¼€å‘äººå‘˜æœ‰æ—¶éœ€è¦æ‘†è„±ç¹ççš„ä»£ç ï¼Œå¹¶å°è¯•ä»é›„é¹°çš„é£è¡Œé«˜åº¦è°ƒæŸ¥è‡ªå·±çš„ç”Ÿæ´»åœ°ç‚¹-è¿™ä½¿æ‚¨å¯ä»¥ä¸“æ³¨äºçœŸæ­£é‡è¦æˆ–éå¸¸é‡è¦çš„äº‹æƒ…ã€‚ æ‰€ä»¥æˆ‘å‡ºå»äº†ã€‚ </p><br><p><img src="https://habrastorage.org/webt/9o/sf/oy/9osfoyepjgbk83twv5u4ral7f3u.jpeg" alt="å›¾ç‰‡"></p><a name="habracut"></a><br><p> ç¼©å†™EAVè¢«å…¬å¼€ä¸º<em>Entity</em> - <em>Attribute</em> - <em>Value</em> ï¼ˆè¿™æ˜¯é’ˆå¯¹é‚£äº›æœªéµå¾ªä¸Šé¢é“¾æ¥çš„ç”¨æˆ·ï¼‰ã€‚  EAVçš„ä¸»è¦â€œ <em>å¥½å¤„</em> â€æ˜¯åœ¨å¯ç”¨äºæè¿°äº‹ç‰©ï¼ˆå®ä½“ï¼‰çš„ä¸åŒå±æ€§ï¼ˆå±æ€§ï¼Œå‚æ•°ï¼‰çš„å¯èƒ½æ•°é‡éå¸¸å¤šä½†å±æ€§æ•°é‡ï¼ˆå®é™…ä¸Šæ˜¯æŒ‡æ•°é‡ï¼‰çš„æƒ…å†µä¸‹ï¼Œæœ‰æ•ˆåˆ©ç”¨æ•°æ®åº“ç©ºé—´å•ä¸ªå¯¹è±¡ç›¸å¯¹è¾ƒå°ã€‚ ç”µå­å•†åŠ¡ä¸­è¿™ç§æƒ…å†µçš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯â€œäº§å“â€çš„æ¦‚å¿µ-äº§å“â€œ <em>TV</em> â€ï¼ˆå±å¹•å°ºå¯¸ï¼‰çš„æ˜¾ç€å±æ€§ä¸åŒäºäº§å“â€œ <em>ç¡è¢‹</em> â€ï¼ˆæœ€ä½èˆ’é€‚æ¸©åº¦ï¼‰çš„æ˜¾ç€å±æ€§ã€‚ </p><br><p> é‚£ä¹ˆMagento 2æä¾›äº†ä»€ä¹ˆä»¥EAVæ ¼å¼å­˜å‚¨æ•°æ®ï¼Ÿ </p><br><h1 id="eav_-namespace">  'eav_'åç§°ç©ºé—´ </h1><br><p>åœ¨<code>eav_</code> Magento 2.3æ•°æ®åº“ä¸­ï¼Œæœ‰21ä¸ªå¸¦æœ‰<code>eav_</code>å‰ç¼€çš„è¡¨ã€‚ æ‰€æœ‰è¿™äº›éƒ½å¯ä»¥åˆ†ä¸ºä¸‰ç»„ï¼š </p><br><ul><li> <code>eav_attribute</code> </li> <li> <code>eav_entity</code> </li> <li> <code>eav_form</code> </li> </ul><br><p> æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code>eav_form</code>è¿™äº›è¡¨ä¸UIä¸ŠæŸäº›EAVæ•°æ®çš„æ˜¾ç¤ºæœ‰å…³ï¼Œå¹¶ä¸ç›´æ¥ä¸æ•°æ®åº“ä¸­EAVæ•°æ®çš„æ”¾ç½®æœ‰å…³ï¼ˆæˆ‘ä»…è€ƒè™‘æ•°æ®ç»“æ„ï¼Œå¹¶ä¸”ä»…ä»ä¿¡æ¯å­˜å‚¨çš„è§’åº¦è€ƒè™‘ï¼Œè€Œä¸è€ƒè™‘å…¶æ˜¾ç¤ºï¼‰ã€‚ å¯¹äºå®éªŒï¼Œæˆ‘ä»æ•°æ®åº“ä¸­åˆ é™¤äº†<code>eav_form</code>ç©ºé—´<code>eav_form</code> ï¼Œä½†è¿™å¹¶æ²¡æœ‰é˜»æ­¢æˆ‘åœ¨å•†åº—ä¸­ä¸‹è®¢å•ã€‚ å› æ­¤ï¼Œæ‚¨ä»ç„¶éœ€è¦æŸ¥æ‰¾è¯¥è¡¨ç©ºé—´ä¸­çš„æ•°æ®åœ¨ä½•å¤„ä½¿ç”¨ä»¥åŠMagentoéœ€è¦å¤šå°‘æ•°æ®æ‰èƒ½èµ·ä½œç”¨ã€‚ </p><br><p> åœ¨å…¶ä½™ä¸¤ä¸ªä¸­ï¼Œ <code>eav_attribute</code>ç»„å¼•ç”¨å­—æ¯<em><strong>A</strong> ï¼ˆå±æ€§ï¼‰</em> ï¼Œ <code>eav_attribute</code>ç»„å¼•ç”¨å­—æ¯<em><strong>E</strong> ï¼ˆå®ä½“ï¼‰</em> ã€‚ å­—æ¯<em><strong>V</strong> ï¼ˆalueï¼‰</em>åœ¨å“ªé‡Œï¼Ÿ </p><br><p> å®ä½“å±æ€§çš„å€¼å¿…é¡»åœ¨è¡¨åç§°åç¼€ä¸­æœç´¢ï¼š </p><br><ul><li> <code>_datetime</code> </li> <li> <code>_decimal</code> </li> <li> <code>_int</code> </li> <li> <code>_text</code> </li> <li> <code>_ varchar</code> </li> </ul><br><p> æ‚¨å¯ä»¥çœ‹åˆ°ä»¥ä»¥ä¸‹å†…å®¹å¼€å¤´çš„è¡¨ï¼š </p><br><ul><li> <code>catalog_category_entity_</code> </li> <li> <code>catalog_product_entity_</code> </li> <li> <code>customer_address_entity_</code> </li> <li> <code>customer_entity_</code> </li> <li> <code>eav_entity_</code> </li> </ul><br><p> å°†åç¼€ï¼ˆ5ï¼‰çš„æ•°é‡ä¹˜ä»¥å‰ç¼€ï¼ˆ5ï¼‰çš„æ•°é‡çš„ç®€å•ä¹˜ç§¯ï¼Œä¾¿å¾—å‡ºäº†åº”è¯¥å­˜å‚¨<em>å€¼</em>æ•°æ®çš„è¡¨ï¼ˆ25ï¼‰çš„æ€»æ•°ã€‚ </p><br><h1 id="eav_entity_type-reestr-tipov-suschnostey">  'eav_entity_type'ï¼šå®ä½“ç±»å‹æ³¨å†Œè¡¨ </h1><br><p> éœ€è¦åœ¨<code>eav_entity_type</code>è¡¨ä¸­æ‰¾åˆ°Magentoä¸­EAVçš„å¼€å§‹ã€‚ åœ¨è¿™é‡Œè®¾ç½®å°†åœ¨EAVç»“æ„ä¸­å­˜å‚¨å“ªäº›ç±»å‹çš„å®ä½“å±æ€§å€¼ã€‚ å› æ­¤ï¼Œæœ€åˆï¼ŒMagento 2.3ä¸ºä»¥ä¸‹å…«ä¸ªå®ä½“æä¾›æ­¤é€‰é¡¹ï¼š </p><br><ul><li> <code>customer</code> </li> <li> <code>customer_address</code> </li> <li> <code>catalog_category</code> </li> <li> <code>catalog_product</code> </li> <li> <code>order</code> </li> <li> <code>invoice</code> </li> <li> <code>creditmemo</code> </li> <li> <code>shipment</code> </li> </ul><br><h1 id="eav_attribute-reestr-atributov">  'eav_attribute'ï¼šå±æ€§æ³¨å†Œè¡¨ </h1><br><p> ä¸‹ä¸€æ­¥æ˜¯æ‰¾å‡ºè¿™äº›ç±»å‹çš„å®ä½“å¯ä»¥è¡¨å¾çš„å±æ€§ã€‚ æ­¤ä¿¡æ¯åœ¨<code>eav_attribute</code>è¡¨ä¸­ã€‚ å±æ€§æ³¨å†Œè¡¨é€šè¿‡<em>å¤–é”®</em>å¯¹å®ä½“ç±»å‹çš„å¯„å­˜å™¨è¿›è¡Œäº†å…³é—­ã€‚ åœ¨å±æ€§æ³¨å†Œè¡¨ä¸­ï¼Œæœ€åˆæœ‰135ä¸ªæ¡ç›®å±äº4ç§ç±»å‹çš„å®ä½“ï¼š </p><br><ul><li> <code>customer</code> </li> <li> <code>customer_address</code> </li> <li> <code>catalog_category</code> </li> <li><p> <code>catalog_product</code> </p> <br><p> è¿™æ˜¯åœ¨è¯´ä»€ä¹ˆ å¥½å§ï¼Œè‡³å°‘æ˜¯å…¶ä»–ç±»å‹çš„å®ä½“ï¼š </p><br></li><li> <code>order</code> </li> <li> <code>invoice</code> </li> <li> <code>creditmemo</code> </li> <li> <code>shipment</code> </li> </ul><br><p> ä¸è¦ä½¿ç”¨EAVç»“æ„å­˜å‚¨æ•°æ®ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æŸä¸ªé˜¶æ®µï¼Œäººä»¬è¡¨ç°å‡ºäº†çƒ­æƒ…ï¼Œå¹¶è®¡åˆ’å°†EAVç”¨äºå…«ç§ç±»å‹çš„å®ä½“ï¼Œä½†å®é™…ä¸Šå®ƒä»¬åœæ­¢åœ¨ç¬¬å››ä½ã€‚ </p><br><h1 id="eav_entity_-prostranstvo-prizrak">  'eav_entity_'ï¼šå¹½çµç©ºé—´ </h1><br><p>  <code>eav_entity</code>è¡¨<code>eav_entity</code>ç±»ä¼¼äºä¸­å›½çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¬¼åŸ</a> -åœ¨9ä¸ªç©ºé—´è¡¨ä¸­ï¼Œåªæœ‰ä¸¤ä¸ªåŒ…å«æ•°æ®ï¼š </p><br><ul><li>  <code>eav_entity_type</code> ï¼šè¿™æ˜¯æˆ‘ä¸Šé¢æåˆ°çš„å®ä½“ç±»å‹çš„å¯„å­˜å™¨ï¼› </li><li>  <code>eav_entity_attribute</code> ï¼šç”¨äºæŒ‰ç»„ç»„ç»‡å±æ€§ï¼ˆæ›´æ¥è¿‘äºæ•°æ®æ˜¾ç¤ºè€Œä¸æ˜¯å…¶å­˜å‚¨ï¼‰ï¼› è¯¥ä¿¡æ¯ä¸å±æ€§æœ¬èº«çš„å…³ç³»æ¯”ä¸å®ä½“çš„å…³ç³»æ›´ç›´æ¥ï¼ˆå³æ˜¾ç„¶ä¸æ˜¯æ¥è‡ªè¯¥æ•™åŒº-å®ƒåœ¨<code>eav_attribute_</code>ç©ºé—´ä¸­å æœ‰ä¸€å¸­ä¹‹åœ°ï¼‰; </li></ul><br><p> å…¶ä½™7ä¸ªè¡¨ä¸ºç©ºï¼š </p><br><ul><li> <code>eav_entity</code> </li> <li> <code>eav_entity_datetime</code> </li> <li> <code>eav_entity_decimal</code> </li> <li> <code>eav_entity_int</code> </li> <li> <code>eav_entity_store</code> </li> <li> <code>eav_entity_text</code> </li> <li> <code>eav_entity_varchar</code> </li> </ul><br><p> è¿™ä¸å°è¯•ç»Ÿä¸€åœ¨ä¸€ç»„è¡¨ï¼ˆ <code>datetime</code> ï¼Œ <code>decimal</code> ï¼Œ <code>int</code> ï¼Œ <code>text</code> ï¼Œ <code>varchar</code> ï¼‰ä¸­å­˜å‚¨å®ä½“å±æ€§å€¼çš„æ–¹å¼éå¸¸ç›¸ä¼¼ï¼Œè€Œä¸æ˜¯è¯•å›¾ä¸ºæ¯ç§ç±»å‹çš„å®ä½“ä½¿ç”¨5ä¸ªå¸¦æœ‰ç›¸åº”åç¼€çš„è¡¨ã€‚ å°è¯•å¤±è´¥ï¼Ÿ è¿˜æ˜¯Magentoçš„EAVçš„æœªæ¥ï¼Ÿ </p><br><p><img src="https://habrastorage.org/webt/zm/vn/v_/zmvnv_wqjc3knpzxqmob8bv9p1m.jpeg" alt="å›¾ç‰‡"></p><br><p> åæ­£ <del> å¤§åœ°æ˜¯ç©ºæ— ä¸€ç‰©ï¼Œé»‘æš—æ˜¯æ·±æ¸Šï¼Œä¸Šå¸çš„çµ </del> è¿™äº›è¡¨æœ€åˆå¹¶æœªä½¿ç”¨ã€‚ </p><br><h1 id="tipy-znacheniy-atributov"> å±æ€§å€¼ç±»å‹ </h1><br><p> åœ¨<code>eav_attribute</code>è¡¨ä¸­è®¾ç½®<code>eav_entity_type</code>ç±»å‹ï¼Œ <code>eav_attribute</code>åœ¨<code>eav_attribute</code>è¡¨ä¸­è®¾ç½®å±æ€§æœ¬èº«åŠå…¶ä¸ç›¸åº”å®ä½“ç±»å‹çš„<code>eav_attribute</code> ã€‚ ä»¥åŠå¦‚ä½•ç¡®å®šåœ¨ä½•å¤„å¯»æ‰¾æ­¤ç±»å®ä½“çš„å±æ€§å€¼ï¼Ÿ </p><br><p>  <code>eav_attribute.backend_type</code>å­—æ®µå°†å¸®åŠ©æˆ‘ä»¬è§£å†³è¿™ä¸€é—®é¢˜ã€‚ å®ƒæ˜¾ç¤ºäº†å±æ€§å€¼çš„å­˜å‚¨ä½ç½®ï¼š </p><br><ul><li>  <em>static</em> ï¼šåœ¨åŒ…å«æœ‰å…³å®ä½“æœ¬èº«çš„æ•°æ®çš„è¡¨ä¸­ï¼ˆä¾‹å¦‚ï¼Œå±æ€§ï¼ƒ9-customer.emailçš„å€¼ï¼Œæ‚¨éœ€è¦åœ¨<code>email</code>åˆ—çš„customer_entityè¡¨ä¸­æœç´¢ï¼‰ï¼› </li></ul><br><p> å¯¹äºå…¶ä½™ç±»å‹ï¼Œè¿™äº›å€¼å­˜å‚¨åœ¨å•ç‹¬çš„è¡¨ä¸­ï¼Œå…¶åç§°çš„å‰ç¼€å¯¹åº”äºå®ä½“çš„ç±»å‹ï¼ˆ <code>customer_</code> _ï¼Œ...ï¼‰ï¼Œåç¼€å¯¹åº”äºä¸€ç§æ•°æ®ç±»å‹ï¼š </p><br><ul><li> <code>datetime</code> </li> <li> <code>decimal</code> </li> <li> <code>int</code> </li> <li> <code>text</code> </li> <li> <code>varchar</code> </li> </ul><br><p> å³ï¼Œ <code>datetime</code> <code>catalog_product.special_from_date</code>ç±»å‹çš„å±æ€§ï¼ƒ79 <code>catalog_product.special_from_date</code>çš„å€¼å­˜å‚¨åœ¨è¡¨<code>catalog_product_entity_datetime</code> ã€‚ å±æ€§ï¼ƒ77 <code>catalog_product.price</code>å€¼åœ¨<code>catalog_product_entity_decimal</code>è¡¨ä¸­ã€‚ </p><br><p> åœ¨<code>eav_attribute</code>è¡¨ä¸­ä¸å€¼ç±»å‹æœ‰å…³çš„æœ‰è¶£ä¹‹å¤„æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚ä¸Šæ‰€è¿°ï¼Œæ­¤è¡¨ä»…æè¿°äº†<code>eav_entity_type</code>æ³¨å†Œçš„8ç§å®ä½“ç±»å‹ä¸­çš„4ç§<code>eav_entity_type</code> ã€‚ åŒæ—¶ï¼Œå¯¹äºè¯¸å¦‚<code>customer</code>å’Œ<code>customer_address</code>å®ä½“ï¼Œæœ€åˆå®šä¹‰çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯<code>static</code>å€¼ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬æ˜¯è¡¨ä¸­çš„æ™®é€šåˆ—ï¼Œå¹¶ä¸”æ²¡æœ‰åˆ©ç”¨EAVæ–¹æ³•ã€‚ è¡¨æ ¼ï¼š </p><br><ul><li> <code>customer_entity_datetime</code> </li> <li> <code>customer_entity_decimal</code> </li> <li> <code>customer_entity_int</code> </li> <li> <code>customer_entity_text</code> </li> <li> <code>customer_entity_varchar</code> </li> <li> <code>customer_address_entity_datetime</code> </li> <li> <code>customer_address_entity_decimal</code> </li> <li> <code>customer_address_entity_int</code> </li> <li> <code>customer_address_entity_text</code> </li> <li> <code>customer_address_entity_varchar</code> </li> </ul><br><p> æœ€åˆæ˜¯ç©ºçš„ï¼Œåªèƒ½ä»¥ç¼–ç¨‹æ–¹å¼ä½¿ç”¨ï¼ˆå³é€šè¿‡ç®¡ç†é¢æ¿ï¼Œæ²¡æœ‰ç¬¬ä¸‰æ–¹æ‰©å±•åï¼Œæ— æ³•å‘è¿™äº›è¡¨ä¸­å†™å…¥ä»»ä½•å†…å®¹ï¼‰ã€‚ </p><br><h1 id="eav-dlya-kategoriy"> ç±»åˆ«çš„EAV </h1><br><p> ç›®å½•ç±»åˆ«-è¿™æ˜¯Magentoä¸­ç¬¬ä¸€ä¸ªæˆ–å¤šæˆ–å°‘ä½¿ç”¨EAVæ–¹æ³•çš„å®ä½“ã€‚ å®ä½“ç±»å‹ä¸º<code>catalog_category</code> ï¼Œåˆå§‹å±æ€§çš„æ€»æ•°ä¸º30ï¼Œå…¶ä¸­éé™æ€å±æ€§ä¸º26ã€‚å³ï¼Œåªæœ‰4ä¸ªå±æ€§ï¼ˆ <code>children_count</code> ï¼Œ <code>level</code> ï¼Œ <code>path</code> ï¼Œ <code>position</code> ï¼‰çš„å€¼å­˜å‚¨åœ¨<code>catalog_category_entity</code>è¡¨ä¸­ï¼Œå…¶ä½™å±æ€§å­˜å‚¨åœ¨<code>catalog_category_entity_</code> [ <code>datetime</code> |  <code>decimal</code> |  <code>int</code> |  <code>text</code> |  <code>varchar</code> ]ã€‚ </p><br><p> è¯¥é›†åˆä¸­çš„è¡¨çš„ç»“æ„å½¼æ­¤éå¸¸ç›¸ä¼¼ï¼Œå¹¶ä¸”ä¸å…¶ä»–ç±»å‹çš„å®ä½“ï¼ˆå®¢æˆ·ç«¯ï¼Œå…¶åœ°å€ç­‰ï¼‰çš„ç›¸ä¼¼è¡¨ä¹Ÿéå¸¸ç›¸ä¼¼ï¼š </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> <span class="hljs-string"><span class="hljs-string">`catalog_category_entity_datetime`</span></span> ( <span class="hljs-string"><span class="hljs-string">`value_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">11</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> AUTO_INCREMENT, <span class="hljs-string"><span class="hljs-string">`attribute_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">smallint</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-string"><span class="hljs-string">`store_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">smallint</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-string"><span class="hljs-string">`entity_id`</span></span> <span class="hljs-built_in"><span class="hljs-built_in">int</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-string"><span class="hljs-string">'0'</span></span>, <span class="hljs-string"><span class="hljs-string">`value`</span></span> datetime <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> (<span class="hljs-string"><span class="hljs-string">`value_id`</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-string"><span class="hljs-string">`...`</span></span> (<span class="hljs-string"><span class="hljs-string">`entity_id`</span></span>,<span class="hljs-string"><span class="hljs-string">`attribute_id`</span></span>,<span class="hljs-string"><span class="hljs-string">`store_id`</span></span>), ... ) ...</code> </pre> <br><p> å¯¹äºå„ç§ç±»å‹çš„å­˜å‚¨å€¼ï¼ˆ <code>datetime</code> ï¼Œ <code>decimal</code> ï¼Œ <code>int</code> ï¼Œ <code>text</code> ï¼Œ <code>varchar</code> ï¼‰ï¼Œä»…<code>value</code>åˆ—çš„ç±»å‹ä¼šæ›´æ”¹ã€‚ æ­¤ç»“æ„å…è®¸æ‚¨ä¸ºå•ç‹¬çš„åº—é¢ï¼ˆ <code>store_id</code> ï¼‰ <code>entity_id</code>å•ç‹¬çš„å®ä½“ï¼ˆ <code>entity_id</code> ï¼‰çš„å•ç‹¬å±æ€§ï¼ˆ <code>attribute_id</code> ï¼‰çš„å•ç‹¬å€¼ï¼ˆ <code>value</code> ï¼‰ã€‚ </p><br><p> ç»“åˆMagentoçš„ä½“ç³»ç»“æ„åŠŸèƒ½ï¼Œæ·»åŠ äº†ä¸åº—é¢çš„å…¶ä»–è¿æ¥<code>store_id</code> ã€‚ å› æ­¤ï¼Œå¯ä»¥ä¸ºä¸åŒçš„åº—é¢å®šä½åŒä¸€å®ä½“çš„åŒä¸€å±æ€§çš„å€¼ã€‚ ç›®å½•ç±»åˆ«æ˜¯Magentoä¸­çš„ç¬¬ä¸€ä¸ªå®ä½“ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒä»¬æ¥ä½¿ç”¨EAVå­ç³»ç»Ÿã€‚ æ‚¨å¯ä»¥é€šè¿‡ç®¡ç†é¢æ¿è®¾ç½®ç›®å½•å±æ€§çš„å€¼ã€‚ </p><br><p><img src="https://habrastorage.org/webt/vb/p9/td/vbp9tdvffnhyi6go4orkfu2qn3k.png" alt="å›¾ç‰‡"></p><br><p> æ‚¨ä¸ä»…å¯ä»¥ä¸ºæ–‡æœ¬å±æ€§æä¾›ä¸åŒçš„å€¼ï¼ˆç¿»è¯‘æˆç›¸åº”åº—é¢çš„è¯­è¨€ï¼‰ï¼Œè¿˜å¯ä»¥æœ¬åœ°åŒ–å…¶ä»–ç±»å‹çš„å±æ€§ã€‚ ä¾‹å¦‚ï¼Œç”±äºé¢„æœŸ<em>ru</em>åº—é¢çš„åœ£è¯èŠ‚å‡æœŸï¼Œå±æ€§<code>catalog_category.custom_design_from</code>å¯ä»¥åœ¨æ˜å¹´çš„1æœˆ7æ—¥å’Œåœ¨åº—é¢çš„12æœˆ24æ—¥è®¾ç½®å€¼ã€‚ </p><br><p><img src="https://habrastorage.org/webt/ff/qk/cy/ffqkcyk65dmr962wladmce96whu.jpeg" alt="å›¾ç‰‡"></p><br><h1 id="eav-dlya-produktov"> äº§å“EAV </h1><br><p> é€šå¸¸ï¼Œè¿™ä¸åœ¨Magentoä¸­ä¸ºå…¶æ¨å‡ºEAVçš„å®ä½“ç±»å‹ç›¸åŒã€‚ å®ä½“ç±»å‹ä¸º<code>catalog_product</code> ï¼Œæ€»åˆå§‹å±æ€§ä¸º63ï¼Œéé™æ€ä¸º56ã€‚æ”¯æŒäº§å“EAVçš„è¡¨çš„ç»“æ„ç±»ä¼¼äºç›®å½•çš„è¡¨çš„ç»“æ„ã€‚ ä½†æ˜¯æœ‰ä¸€ä¸ªæ˜æ˜¾çš„åŒºåˆ«ã€‚ å¯¹äºäº§å“ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç®¡ç†é¢æ¿åˆ›å»ºæ–°å±æ€§-è¿™æ˜¯å¼€ç®±å³ç”¨çš„é»˜è®¤MagentoåŠŸèƒ½ã€‚ å¦‚æœMagentoæ ¹æ®å…¶ä»–å®ä½“çš„è½¯ä»¶å¡«å……ä»…æä¾›å…¶ä»–å®ä½“çš„EAVæ•°æ®ç»“æ„ï¼Œåˆ™å¯¹äºäº§å“ï¼Œå°†å®ç°ä¸€ä¸ªç•Œé¢ï¼Œä½¿æ‚¨å¯ä»¥åœ¨ç”¨æˆ·çº§åˆ«ï¼ˆå•†åº—ç»ç†ï¼‰æ‰§è¡Œæ­¤æ“ä½œ- <em>å•†åº—/å±æ€§/äº§å“</em> ã€‚ </p><br><p> å¯¹äºäº§å“ï¼Œè¿˜æœ‰ä¸¤ä¸ªä¸EAVç›¸å…³çš„è¡¨ï¼š </p><br><ul><li> <code>eav_attribute_set</code> </li> <li> <code>eav_attribute_group</code> </li> </ul><br><p> æ€»çš„æ¥è¯´ï¼Œå®ƒä»¬æ¯”å­˜å‚¨ä¿¡æ¯æ›´æœ‰å¯èƒ½æ˜¾ç¤ºä¿¡æ¯ã€‚ å°†äº§å“å±æ€§ç»„åˆåˆ°ä¸€ä¸ª<code>set</code> ï¼Œç„¶ååœ¨åˆ›å»ºäº§å“æ—¶ä¸ºå…¶åˆ†é…ä¸€ç»„å±æ€§ï¼Œè¿™å…è®¸å¡«å†™ä¾‹å¦‚ç”µè§†çš„äº§å“å¡ï¼Œé€‰æ‹©ä¸å®¶ç”¨ç”µå™¨ï¼ˆç”šè‡³æ˜¯ä¸€ç»„ç§°ä¸º``ç”µè§†''çš„äº§å“ï¼‰ç›¸å…³çš„å±æ€§ã€‚ å°†å±æ€§åˆå¹¶åˆ°é›†åˆä¸­ä¼šå‘ç”Ÿåœ¨<em>å•†åº—/å±æ€§/äº§å“/å±æ€§é›†ä¸­</em> ï¼š </p><br><p><img src="https://habrastorage.org/webt/lu/hb/tk/luhbtkj3c57oxnjulg9xy7d3foy.png" alt="å›¾ç‰‡"></p><br><h1 id="itogo"> åˆè®¡ </h1><br><p> æ•æˆ‘ç›´è¨€ï¼ŒMagentoæ˜¯ä½¿ç”¨EAVçš„é€‚ç”¨èŒƒå›´éå¸¸ç‹­çª„çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ å°†8ä¸ªå®ä½“ï¼ˆ <code>eav_entity_type</code> ï¼‰çš„EAVä½¿ç”¨æ ‡è®°ä¸ºä¹¦ç­¾æ—¶ï¼ŒEAVæ³¨é‡Šä»…ç”¨äº4ä¸ªå®ä½“ï¼ˆ <code>eav_attribute</code> ï¼‰ï¼Œå…¶ä¸­åªæœ‰2ä¸ªå®ä½“å…·æœ‰çœŸæ­£çš„EAVå±æ€§<code>catalog_category</code>å’Œ<code>catalog_product</code> ã€‚ æ­¤å¤–ï¼Œå¯¹äº<code>catalog_category</code> EAVå±æ€§å¹¶éç”¨äºå…¶é¢„æœŸç›®çš„ï¼ˆ <em>ç”¨äºæè¿°å…·æœ‰ä¸å•ä¸ªå®ä¾‹ç›¸å…³çš„å°‘é‡å±æ€§çš„å®ä½“</em>çš„<em>å¤§é‡ä¸åŒå±æ€§</em> ï¼‰ï¼Œè€Œæ˜¯ç”¨äºå±æ€§å€¼çš„â€œå±•ç¤ºä½ç½®æœ¬åœ°åŒ–â€ï¼ˆ <em>å®ä½“çš„ç›¸åŒå±æ€§é›†ï¼‰å…·æœ‰ç›®å½•å±æ€§çš„èƒ½åŠ›çš„â€œç›®å½•ç±»åˆ«â€å¯¹äºä¸åŒçš„åº—é¢å…·æœ‰ä¸åŒçš„å«ä¹‰</em> ï¼‰ã€‚ </p><br><p>  EAVçš„å…¨éƒ¨ä½¿ç”¨ä»…ç”¨äº<code>catalog_product</code> ï¼ˆå°½ç®¡ä¹Ÿæœ‰â€œåº—é¢æœ¬åœ°åŒ–â€çš„æ··åˆï¼Œä½†è¿™æ˜¯EAVæ¨¡å‹çš„æ‰©å±•ï¼Œè€Œä¸æ˜¯ç±»åˆ«çš„äºµæ¸ï¼‰ã€‚ ä½†æ˜¯ï¼Œé€šè¿‡Magentoçš„äº§å“å¯ä»¥å…¨é¢å±•ç¤ºEAV-Magentoåº”ç”¨ç¨‹åºå¯ä»¥å®‰å…¨åœ°ç”¨äºæ¸…æ¥šåœ°å±•ç¤ºEAVçš„åŸç†ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN441122/">https://habr.com/ru/post/zh-CN441122/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN441108/index.html">å·²ç»ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼šä¸‰æ˜Ÿä»¥1980ç¾å…ƒçš„ä»·æ ¼æ¨å‡ºäº†Galaxy FoldæŠ˜å å¼æ‰‹æœº</a></li>
<li><a href="../zh-CN441112/index.html">æˆ‘ä»¬å°†LDAPæˆæƒå›ºå®šåˆ°Kubernetes</a></li>
<li><a href="../zh-CN441114/index.html">å…³ç³»ç¼–ç¨‹ï¼šç—›è‹¦ï¼Œå…´è¶£å’Œå†æ¬¡ç—›è‹¦</a></li>
<li><a href="../zh-CN441116/index.html">KubeSailåŠå…¶é¢å‘å¼€å‘äººå‘˜çš„å…è´¹Kubernetesé›†ç¾¤</a></li>
<li><a href="../zh-CN441118/index.html">æ–°è¥¿å…°ä¸Šç­æ—æ¯å‘¨å·¥ä½œå››å¤©çš„å®éªŒç»“æœ</a></li>
<li><a href="../zh-CN441124/index.html">PVS-Studioä¸­çš„è¯¯æŠ¥ï¼šå…”å­æ´æœ‰å¤šæ·±</a></li>
<li><a href="../zh-CN441126/index.html">PVS-Studioä¸­çš„è¯¯æŠ¥ï¼šå…”å­æ´æœ‰å¤šæ·±</a></li>
<li><a href="../zh-CN441128/index.html">æ­£ç¡®çš„é€‰æ‹©ï¼šçŒ¿ç±»è®¤çŸ¥èƒ½åŠ›çš„å®è·µç ”ç©¶</a></li>
<li><a href="../zh-CN441130/index.html">å¹³è¡¡ç½‘ç«™æ€§èƒ½ã€‚ ç¬¬1éƒ¨åˆ†ï¼šç­–ç•¥</a></li>
<li><a href="../zh-CN441132/index.html">è¿™æ ·Roskomnadzorä¸ä¼šçªç„¶æ¥</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>