<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>โ๏ธ ๐ ๐ ุฅูุดุงุก ูุนุจุฉ "Like Coins" ุนูู ูุญุฑู Godot. ุงูุฌุฒุก 2 ๐ต ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุขูู ุฃู ุชููู ูุฏ ุณุฆูุช ูู ุงูุชุธุงุฑ ุงูุฌุฒุก ุงูุซุงูู ูู ุงูููุงูุฉ ุ ุงูุฐู ูุชูุงูู ุฌูุงูุจ ุชุทููุฑ ุงููุนุจุฉ ุจุงุณุชุฎุฏุงู ูุญุฑู Godot ุ ุจุงุณุชุฎุฏุงู ูุซุงู ูุนุจุฉ Like Coinsุ ุชู ุฅุนุฏุงุฏ ุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุฅูุดุงุก ูุนุจุฉ "Like Coins" ุนูู ูุญุฑู Godot. ุงูุฌุฒุก 2</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430800/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุขูู ุฃู ุชููู ูุฏ ุณุฆูุช ูู ุงูุชุธุงุฑ ุงูุฌุฒุก ุงูุซุงูู ูู ุงูููุงูุฉ ุ ุงูุฐู ูุชูุงูู ุฌูุงูุจ ุชุทููุฑ ุงููุนุจุฉ ุจุงุณุชุฎุฏุงู ูุญุฑู Godot ุ ุจุงุณุชุฎุฏุงู ูุซุงู ูุนุจุฉ Like Coinsุ  ุชู ุฅุนุฏุงุฏ ุงููุซูุฑ ูู ูู ุดูุก "ูุฐูุฐ" ู "ุตุญู" ุนูู ุฌุฏูู ุงูุฃุนูุงู.  ุณุฃุญุฌุฒ ุนูู ุงูููุฑ ุฃููุง ูู ูุฐู ุงูููุงูุฉ ุณูููู ุงููุนุจุฉ ุงูุชู ุจุฏุฃุชูุง ุณุงุจููุง ุ ูุงูุชู ููููู ูุฑุงุกุชูุง ูู ุงูุจุฏุงูุฉ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅูุดุงุก ูุนุจุฉ "Like Coins" ุนูู ูุญุฑู Godot.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฒุก ุงูุฃูู</a> ุ ููู ุณูุณูุฉ ุงูููุงูุงุช ุณุชุณุชูุฑ ุ ูุฃู  ูุงู ููุงู ุงููุซูุฑ ูู ุงูููุงุฏ ุงูุชู ุฌุนูุชูู ุฃุชุฑู ุฌุฒุกูุง ูููุง ุ ูููู ุจุงูุชุฃููุฏ ุณูุนูุฏ ุฅูููุง ูุงุญููุง.  ููุชุจุฏุฃ "ุฌุงููุฏู"! </p><a name="habracut"></a><br><h3 id="scena-main" style=";text-align:right;direction:rtl">  ุงููุดูุฏ "ุงูุฑุฆูุณู" </h3><br><p style=";text-align:right;direction:rtl"> ูู ุงูุฌุฒุก ุงูุณุงุจู ูู ุงูููุงู ุ ุชููููุง ุนูุฏ ุงููุฑุญูุฉ <code>Main</code> ( <code>Main</code> ) ุ ูุฑุจูุง ูุณุชูุฑ ููู.  ูุญุฐู ูู ุดูุก ุชูุช ุฅุถุงูุชู ุณุงุจููุง (ุฅุฐุง ุฃุถูุช ุดูุฆูุง ุจุงูุทุจุน ููุชุญูู ูู ููููุฉ ุนูู ูู ุดูุก) ุ ุฅุฐุง ูู ูุชู ุชุญููู ุฃู ุดูุก ูู ุงููุดูุฏ ุ ููุฌุจ ุฃู ูุถูู <code>Node</code> ุ ูุงูุชู ุณุชููู ุงูุฃุตู ููุนูุฏ ุงููุฏุฑุฌุฉ ุฃุฏูุงู ุ ูุงูุชู ุจุฏูุฑูุง ูุฌุจ ุฃู ุชุถุงู ุฅูู ุงููุดูุฏ: </p><br><p style=";text-align:right;direction:rtl">  <code>ColorRect</code> ("ุงูุฎูููุฉ") - ุงููุฃ ููู ุงูุฎูููุฉ ุ <br>  <code>Player</code> - ูุงุฆู "Player" (ุขูู ุฃูุง ุชููู ูุฑุชุจููุง ูุฃููู ุฃุณูู ูุดูุฏ <code>Player</code> ูุงุฆููุงุ) ุ <br>  <code>Node</code> ("ุงูุญุงููุฉ") - "ุงูุญุงููุฉ" ููุชุฎุฒูู ุงููุคูุช ููุนููุงุช ุงููุนุฏููุฉ ุ <br>  <code>Position2D</code> ("PlayerStart") - ูู ุจุฏุงูุฉ ุงููุนุจุฉ ุชุญุฏุฏ ุงูููุถุน ุงูุฃููู ููุงุฆู "Player" ุ <br>  <code>Timer</code> ("GameTimer") - ุนุฏุงุฏ ุงูุญุฏ ุงูุฒููู ุ </p><br><p style=";text-align:right;direction:rtl">  ุญุฏุฏ <code>ColorRect</code> ูุนูู ุดุฑูุท ุงูุฃุฏูุงุช ุญุฏุฏ: <code>Layout -&gt; Full Rect</code> ุฅูู ูุงูู ูุณุงุญุฉ ุงูุดุงุดุฉ (ูู ุงููุณุชูุจู ุบุงูุจูุง ูุง ููุฌุฃ ุฅูู ูุฐู ุงููุธููุฉ ุ ูุฐุง ุฃูุตุญู ุจุฏุฑุงุณุฉ ุงูุนูููุงุช ุงูุฃุฎุฑู ุงููุญุฏุฏุฉ ูู ูุงุฆูุฉ <code>Layout</code> ) ุ ููุฐู ุงูุนูุฏุฉ ุ ูู ุฎุงุตูุฉ "ุงูููู" ุญุฏุฏ ููู ุงูุชุนุจุฆุฉ ุงููุทููุจ.  ููููู ุฃู ุชูุนู ุงูุดูุก ููุณู ูุน <code>TextureRect</code> ุ ููุท ุจุฏูุงู ูู ุงูุชุนุจุฆุฉ ุณุชุญุชุงุฌ ุฅูู ุชุญููู ุงูุตูุฑุฉ ูู ุฎูุงู ุฎุงุตูุฉ "Texture".  ุจุงููุณุจุฉ ุฅูู <code>Position2D</code> ุ ูู ุฎุงุตูุฉ "position" ุ ุญุฏุฏ ููู "x" ู "y" - ุณูููู ูุฐุง ุจูุซุงุจุฉ ุงูููุถุน ุงูุฃููู <code>Player</code> .  ุจุงูุทุจุน ุ ุจูุณุงุนุฏุฉ ุงูุจุฑูุงูุฌ ุงููุตู ุ ููููู ุชุนููู ููู ุชุญุฏูุฏ ุงูููุงูุน ูุจุงุดุฑุฉ ูู <code>Player</code> ููุณู ุ ูููููุง ูุง ูุชุนูู ููุท ุชุทููุฑ ุงูุฃูุนุงุจ ุ ูููู ุฃูุถูุง ุฏุฑุงุณุฉ "Godot" ุ ูุฐุง ูุฅู ุงูุชูููุฑ ูู ุฎูุงุฑุงุช ูุฎุชููุฉ ูุญู ูุดููุฉ ูุงุญุฏุฉ ูู ูููู ุบูุฑ ุถุฑูุฑู. </p><br><h4 id="skript-dlya-main" style=";text-align:right;direction:rtl">  ูุต "ุฑุฆูุณู" </h4><br><p style=";text-align:right;direction:rtl">  ูู ุจุฅุถุงูุฉ ุจุฑูุงูุฌ ูุตู <code>Node</code> ูุทุจุงุนุฉ ูุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">extends Node <span class="hljs-comment"><span class="hljs-comment">#PackedScene        export (PackedScene) var Coin export (int) var playtime var level #  var score # var left_time #     var window_size #   var playing = false #   </span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุชู ุนุฑุถ ุงูุฎุตุงุฆุต "ุนููุฉ" ู "ููุช ุงููุนุจ" ูู <code>Inspector</code> .  ุงุณุญุจ ูุดูุฏ "Coin.tscn" ุฅูู ุฎุงุตูุฉ "Coin" ูุงุถุจุท "ููุช ุงููุนุจ" ุนูู "40" (ูุฏุฉ ุงููุนุจุฉ ุจุงูุซูุงูู). </p><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ุชุจุฏุฃ ุงููุนุจุฉ ุ ูู ูู ูุฑุฉ ูุฌุจ ุฃู ูููู ููุงู ุชููุฆุฉ - ุงูุชุญุถูุฑ ููุนูู ุ ูุชุญุฏูุฏ ุงููุนุงููุฑ ุงููุทููุจุฉ ููุชุดุบูู ุนุงูู ุงูุฌูุฏุฉ ูุฎุงูู ูู ุงูุฃุฎุทุงุก ููุชุทุจูู.  ูุฐู ุฎุทูุฉ ุฅูุฒุงููุฉ ุ ูุฐุง ูุฌุจ ุนููู ุงูุงูุชูุงู ุจูุง ุฃููุงู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func _ready(): randomize() <span class="hljs-comment"><span class="hljs-comment">#        window_size = get_viewport().get_visible_rect().size #    $Player.window_size = window_size #    "" $Player.hide() #  </span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุญุธ ุฃูู ุนูุฏ ุชุญุฏูุฏ ุงุณู ูุงุฆู <code>Player</code> ุ ูุชู ุงุณุชุฎุฏุงู ุงูุฑูุฒ "$" - ูุฐุง ูู "ุงูุณูุฑ ุงููุญูู" ุงูุฐู ูุณูุญ ูู ุจุงููุตูู ูุจุงุดุฑุฉ ุฅูู ุงูุนูุฏุฉ ูู ุงููุดูุฏ ุงูุญุงูู ุ ููู ุจุฏูู ุฌูุฏ <code>get_node("Node1")</code> (ุนูู ุงูุฑุบู ูู ุฃู ุงุณุชุฎุฏุงู ุงูุฃุฎูุฑ ุบูุฑ ูุญุธูุฑ).  ุฅุฐุง ูุงู ูุฏู "Node1" ุณููู "Node2" ุ ููููู ุฃูุถูุง ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ - <code>$Node1/Node2</code> .  ูุงุญุธ ุฃู ุงูููุก ุงูุชููุงุฆู ูุนูู ุจุดูู ุฌูุฏ ูู Godot ุ ูุฐูู ูุง ุชูููู.  ุงุณุชุฎุฏุงู ูุณุงูุฉ ูู ุฃุณูุงุก ุงูุนูุฏ ุฃูุฑ ุบูุฑ ูุฑุบูุจ ููู ุ ููููู ูุง ูุฒุงู ุตุงูุญูุง ุ ูู ูุฐู ุงูุญุงูุฉ ุงุณุชุฎุฏู ุนูุงูุงุช ุงูุงูุชุจุงุณ - <code>$"My best Node1"</code> . </p><br><h4 id="novaya-igra" style=";text-align:right;direction:rtl">  ูุนุจุฉ ุฌุฏูุฏุฉ </h4><br><p style=";text-align:right;direction:rtl">  ูุจุฏุก ูุนุจุฉ ุฌุฏูุฏุฉ ุ ุณูุญุฏุฏ ุงููุธููุฉ ุงูููุงุจูุฉ ูุฐูู ุ ูุงูุชู ูููููุง ุนูุฏุฆุฐู ุงุณุชุฏุนุงุคูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ุจุงูุถุบุท ุนูู ุฒุฑ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func new_game(): playing = true <span class="hljs-comment"><span class="hljs-comment">#   level = 1 score = 0 time_left = playtime $Player.start($PlayerStart.position) $Player.show() $GameTimer.start() #    spawn_coins() # </span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณุชุนูู ุงููุธููุฉ "start ()" ุงูุชู ุชููู <code>$PlayerStart.position</code> ูู <code>$PlayerStart.position</code> ุนูู ููู ุงููุดุบู ุฅูู ูููุน ุงูุจุฏุงูุฉ ุ ูุชููู ุงููุธููุฉ "spawn_coins ()" ูุณุคููุฉ ุ ููุง ูุฏ ุชุฎูู ุ ุนู ุนููุงุช ูุนุฏููุฉ ูู ุงูููุนุจ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func spawn_coins(): <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">4</span></span> + level): var c = Coin.instance() $CoinContainer.add_child(c) c.window_size = window_size c.position = Vector2(rand_range(<span class="hljs-number"><span class="hljs-number">0</span></span>, window_size.x), rand_range(<span class="hljs-number"><span class="hljs-number">0</span></span>, window_size.y))</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณุชุฑุฌุน ูุธููุฉ <code>range(4 + level)</code> ุตููููุง ุจูุทุงู ูุนูู ูููุชู ุชุณุงูู ูุฌููุน ุนุฏุฏ ุงูุนููุงุช ููููุฉ ุงููุณุชูู ุงูุญุงูู.  ูููู ุฃู ูุญุชูู ุงููุทุงู ุนูู ูุณูุทุฉ ูุงุญุฏุฉ ุ ููุง ูู ุญุงูุชูุง ุ ุฅูุง ูุณูุทุชูู ุฃู ุซูุงุซ ูุณูุทุงุช (ุณุชููู ุงููุณูุทุฉ ุงูุซุงูุซุฉ ุฎุทูุฉ ุตููู).  ูู ูุฐู ุงููุธููุฉ ุ ููุดุฆ ุนุฏุฉ ุญุงูุงุช ููุงุฆู "Coin" ููุถูู <code>CoinContainer</code> ูุนูุงุตุฑ <code>CoinContainer</code> (ุขูู ุฃูู ูู ุชูุณ ุฃููุง ุจุงููุนู ูุฏููุง ุญู ุงููุตูู ุฅูู ุงููุงุฆู ุ ุจูุถู <code>PackedScene</code> ).  ุชุฐูุฑ ุฃูู ูู ูู ูุฑุฉ ุชููู ูููุง ุจุฅูุดุงุก ูุซูู ููุนูุฏุฉ ุงูุฌุฏูุฏุฉ (ุทุฑููุฉ <code>instance()</code> ) ุ ูุฌุจ ุฅุถุงูุชูุง ุฅูู ุงูุดุฌุฑุฉ ุจุงุณุชุฎุฏุงู <code>add_child()</code> .  ุจุนุฏ ุฐูู ุ ูููุง ุจุชุนููู ุงูููุทูุฉ ููุฑุฒ ูุญุชูู ููุนููุงุช ุงููุนุฏููุฉ ุจุญูุซ ูุง ุชุธูุฑ ุนู ุทุฑูู ุงูุฎุทุฃ ุฎูู ุงูุดุงุดุฉ ุ ุซู ูููู ุจุชุนููู ููุถุน ุนุดูุงุฆู.  ูุง ูุจุฏู ุงูุณุทุฑ ุงูุฃุฎูุฑ ููุชุนูุง ูู ุงููุงุญูุฉ ุงูุฌูุงููุฉ ููููุงู ุ ูุฐูู ุฃูุชุฑุญ ุชุจุณูุทู ุจุงููุฌูุก ุฅูู Singleton. </p><br><h3 id="singltony" style=";text-align:right;direction:rtl">  ุณููุฌูุชูู </h3><br><p style=";text-align:right;direction:rtl">  ุงูุงุณู ุงูุฃูุณุท ู Singleton ูู "ุจุฏุก ุงูุชุดุบูู".  ููุญูุฉ ุจุงููุนู ุ ุฃููุณ ูุฐููุ  ุฃููู ูู ุ ูุนูู ุงูููุฑุฏ ุนูู ุงููุญู ุงูุชุงูู: ุจุฑูุงูุฌ ูุตู ูููููุง ูู ุฎูุงูู ูุชุงุจุฉ ุฃู ุดูุก ูุฑูุฏู (ุจุฏุกูุง ูู ุงูุฅุนูุงู ุนู ุงููุชุบูุฑุงุช ูุงูุชูุงุกู ุจู "ุชุจุฏูู" ุงููุดุงูุฏ ุ ุจูุง ูู ุฐูู ุชุญููููุง ูุชูุฑูุบูุง) ูุชู ุชุญูููู ุฃููุงู ุ ูุน ุชุดุบูู ุงูุชุทุจูู ุ ููููู ุงููุตูู ุฅูู ุฌููุน ูุญุชููุงุชู ูู ุฃู ููุงุท ุงููุดุฑูุน.  ุจุทุฑููุฉ ูุง ุ ูุฐุง ูู ููุน ูู ุงููุณุชูุฏุนุงุช ุงูุนุงูููุฉ ุงููุฎุตุตุฉ "ูุฃู ุดูุก" ูุชุงุญ ูู ุฃู ููุช. </p><br><blockquote style=";text-align:right;direction:rtl">  ูุงุญุธ ุฃู ุงููุดุฑูุน ูุญุชูู ุนูู ูุณุชูุฏุน ุนุงููู ุฎุงุต ุจู ุ ูููููุง ุฃูุถูุง ุงุณุชุฎุฏุงู ูุญุชููุงุชู ุ ูููููู ุงููุตูู ุฅููู ุจุงุณุชุฎุฏุงู <code>ProjectSettings.get_setting(name)</code> ุ ุญูุซ ูููู <code>name</code> ูู ุงุณู ุงููุนููุฉ ุงููุทููุจุฉ. </blockquote><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ูุงุณุชุฎุฏุงู ุดูุก ูุง ูู ุงููุณุชูุฏุน "_G" ุ ูููู ุชุณููุชู ุจุงูุงุณู ุ ุซู ุชุญุฏูุฏ ุงูุทุฑููุฉ ุงูุชู ุณูุชู ุงุณุชุฏุนุงุคูุง ุ ุฃู ุฃู ุดูุก ูุฏููุง.  ูุฐุง ุ ุฃูุดุฆ ูุตูุง ูุงุฑุบูุง ูุงูุชุจ ููู ุงููุธููุฉ ุงูููุถุญุฉ ุฃุฏูุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">extends Node func rand(): var rrand = Vector2(rand_range(<span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">760</span></span>), rand_range(<span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-number"><span class="hljs-number">540</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rrand <span class="hljs-comment"><span class="hljs-comment">#  </span></span></code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qm/te/or/qmteord9ofi1wxjimdhwqm-kexi.png"></p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุงุญูุธู <code>Project -&gt; Project Settings -&gt; AutoLoad</code> ุฅูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน: <code>Project -&gt; Project Settings -&gt; AutoLoad</code> .  ูุฎุชุงุฑ ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฐู ุชู ุฅูุดุงุคู ุญุฏูุซูุง ุ ููุนูู ุงุณููุง ูู ุ ุนูู ุณุจูู ุงููุซุงู ุ "_G" ุ ููุนูุฏ ุฅูู ูุธููุฉ "spawn_coins ()" ูุชุนุฏูู ุงูููุนุฏ ุงูููุงุฆู ููููุงู ุ ูุงุณุชุจุฏุงูู ุจุงูุฑูุฒ ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"> ... c.position = _G.rand()</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูู ุงูุฌุฏูุฑ ุงูุชุญูู ููุง ุญุฏุซ ุจูุถุน "spawn_coins ()" ูู ูุชูุฉ "_ready ()" ูุชุดุบูู ุงูุชุทุจูู ุนูู F5.  ููุง ุชูุณ ุงุฎุชูุงุฑ <code>Main.tscn</code> ุฑุฆูุณู ุ ุฅุฐุง ููุช ูุฏ ุฃุฎุทุฃุช ูุณุจุจ ูุง ูู ุงูุงุฎุชูุงุฑ ุ ูููููู ุชุบููุฑ ุงููุดูุฏ ุงูุฑุฆูุณู ูุฏูููุง ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ุฅูู ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน: <code>General -&gt; Run -&gt; MainScene</code> .  ูู ุชุนููุ  ุซู ุงูุชูู. </p><br><h4 id="skolko-monet-ostalos" style=";text-align:right;direction:rtl">  ูู ุนุฏุฏ ุงูุนููุงุช ุงููุชุจููุฉุ </h4><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุงุตู.  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ูู ุนุฏุฏ ุงููุทุน ุงูููุฏูุฉ ุงููุชุจููุฉ ูููู ุงููุงุนุจ ุฅูู ุงููุณุชูู ุงูุชุงูู ุ ูููุญู "ููุงูุฃุฉ" ุตุบูุฑุฉ ูู ุดูู ุฒูุงุฏุฉ ูู ุงูููุช ุจููุฏุงุฑ 5 ุซูุงูู ุ ุซู ุฅุนุงุฏุฉ ุฅูุชุงุฌ ุงููุทุน ุงูููุฏูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func _process(delta): <span class="hljs-comment"><span class="hljs-comment">#   ?     ? if playing and $CoinContainer.get_child_count() == 0: #    level += 1 # ""   time_left += 5 #  spawn_coins()</span></span></code> </pre> <br><h3 id="polzovatelskiy-interfeys" style=";text-align:right;direction:rtl">  ูุงุฌูุฉ ุงููุณุชุฎุฏู </h3><br><p style=";text-align:right;direction:rtl">  ุณุชุชููู ูุงุฌูุชูุง ุจุงููุงูู ูู ุงูุนูุงุตุฑ ุงูุชุงููุฉ: ูุคุดุฑ ุงููุชูุฌุฉ ูุงููุณุชูู ุงูุญุงูู ูุงูููุช ูุงุณู ุงููุนุจุฉ ูุฒุฑูุง ูุคุฏู ุฅูู ุฅุทูุงู ุงููุนุจุฉ.  ูู ุจุฅูุดุงุก ูุดูุฏ ( <code>HUD.tscn</code> ) ูุน ุฃุญุฏ ุงููุงูุฏูู <code>CanvasLayer</code> (ูุณูุญ ูู ุจุฑุณู ูุงุฌูุฉ ูุณุชุฎุฏู ุฃุนูู ูุฌุงู ุงููุนุจ).  ุจุงููุธุฑ ุฅูู ุงููุณุชูุจู ุ ุณุฃููู ุฃูู ููุณ ูู ุงูููุงุฆู ุฌุฏูุง ุฅุฏุงุฑุฉ ุนูุงุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ุนูู ุงูุฃูู ุจุงููุณุจุฉ ูู ูุฐุง ุตุญูุญ ุ ูููู ูุงุฆูุฉ ูุงุณุนุฉ ุฅูู ุญุฏ ูุง ูู ุงูุนูุงุตุฑ ูุงูุชุทููุฑ ุงููุดุท ุชููู ูุฒุงุฌูุง ุฅูุฌุงุจููุง ูู ุงููุณุชูุจู ุงููุดุฑู ูุชุทููุฑ ูุฐุง ุงูุฌุงูุจ ูู ุงููุญุฑู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/id/ql/pj/idqlpjnvonb1aegarnbxj1_zzpg.png"></p><br><p style=";text-align:right;direction:rtl">  ูู Godot ููุงู ูุง ูุณูู "ุนูุฏ ุงูุชุญูู" ุงูุชู ุชุณูุญ ูู ุจุชูุณูู ุงูุนูุงุตุฑ ุงููุฑุนูุฉ ุชููุงุฆููุง ูููุง ูุชุนูู ุจุงููุนููุงุช ุงููุญุฏุฏุฉ ูููุงูุฏ.  ููู ููุน ูู "ุนูุฏ ุงูุชุญูู" ุฎุตุงุฆุต ุฎุงุตุฉ ุชุชุญูู ูู ููููุฉ ุงูุชุญูู ูู ูููุน ุฃุญูุงุฏูู.  ุงูููุซู ุงูุญููู ูู ูุฐุง ุงูููุน ูู <code>MarginContainer</code> ุ ุงูุฐู ูุฌุจ ุฅุถุงูุชู ุฅูู ุงููุดูุฏ.  ุจูุณุงุนุฏุฉ <code>Layout -&gt; Top Wide</code> ุจุชูุฏูุฏู ูู ุฃุนูู ุงููุงูุฐุฉ ุ ููู ุฎุตุงุฆุต ูุฐุง ุงููุงุฆู ุ ูู ูุณู <code>Margin</code> ุ ุญุฏุฏ ุงููุณุงูุงุช ุงูุจุงุฏุฆุฉ ูู ุงูุญูุงู: ูุณุงุฑ ุ ูุฃุนูู ุ ููููู.  ูุฌุจ ุฃู <code>MarginContainer</code> ุนูู ุซูุงุซุฉ <code>Label</code> <code>ScoreLabel</code> ุจุงูุฃุณูุงุก ุงูุชุงููุฉ: <code>ScoreLabel</code> ู <code>LevelLabel</code> ู <code>TimeLabel</code> .  ุฃุถููู ุฅูู ุงููุดูุฏ.  ุจุงุณุชุฎุฏุงู ุฎุงุตูุฉ <code>Align</code> ุ ุงุฌุนููุง ูุญุงุฐุงุฉ ุฅูู ุงููุณุงุฑ ูุงููุณุท ูุงููููู.  ูุจูู ุฅุถุงูุฉ <code>Label</code> ุฃุฎุฑู ( <code>Messagelabel</code> ) ุ ููุถุนูุง ูู ุงูููุชุตู ุ ููู ุฐูู ุฃูุถูุง ุจูุณุงุนุฏุฉ <code>Layout</code> ุ ูููุงู ุฃูู ููููุงู ( <code>StartButton</code> ). </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/2i/qd/2i/2iqd2ir5i51-kzycvac2mr-mmk8.png"></p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ุงูุขู ูุฌุนู ุงููุงุฌูุฉ ูุชุฌุงูุจุฉ ุ ูุญุชุงุฌ ุฅูู ุชุญุฏูุซ ุงูููุช ูุนุฏุฏ ุงูุนููุงุช ุงูุชู ุชู ุฌูุนูุง ูุฅุจุฑุงุฒ ุงููุณุชูู ุงูุญุงูู.  ุฅุถุงูุฉ ุจุฑูุงูุฌ ูุตู ููุนูุฏุฉ <code>HUD</code> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">extends CanvasLayer signal start_game func update_score(value): $MarginContainer/ScoreLabel.text = str(value) func update_level(value): <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(str(value)) == <span class="hljs-number"><span class="hljs-number">1</span></span>: $MarginContainer/TimeLabel.text = <span class="hljs-string"><span class="hljs-string">"0: 0"</span></span> + str(value) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: $MarginContainer/TimeLabel.text = <span class="hljs-string"><span class="hljs-string">"0: "</span></span> + str(value) func update_timer(value): $MarginContainer/TimeLabel.txt = str(value)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ุฅูู <code>MessageLabel</code> ูุญุชุงุฌ ุฅูู ููููุช ูู ุฃุฌู ุชุบููุฑ ูุต ุงูุฑุณุงูุฉ ููุชุฑุฉ ูุตูุฑุฉ.  ุฃุถู ุนูุฏุฉ <code>Timer</code> ูุงุณุชุจุฏู ุงุณูู ุจู <code>MessageTimer</code> .  ูู ุงูููุชุด ุ ูู ุจุชุนููู ููุช ุงูุงูุชุธุงุฑ ุนูู ุซุงููุชูู ูุญุฏุฏ ุฎุงูุฉ ุงูุงุฎุชูุงุฑ ูู ุญูู <code>One Shot</code> .  ูุถูู ุฐูู ุชุดุบูู ุงููุคูุช ูุฑุฉ ูุงุญุฏุฉ ููุท ุนูุฏ ุจุฏุก ุงูุชุดุบูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func show_message(text): $MessageLabel.text = text $MessageLabel.show() $MessageTimer.start()</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุจุชูุตูู ุฅุดุงุฑุฉ <code>timeout()</code> ุจู "MessageTimer" ูุฅุถุงูุฉ ูุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func _on_MessageTimer_timeout(): $MessageLabel.hide()</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุนูุงูุฉ ุงูุชุจููุจ "ุงูุนูุฏุฉ" ู <code>StartButton</code> ุ ูู ุจุชูุตูู ุฅุดุงุฑุฉ <code>pressed()</code> .  ุนูุฏ ุงูููุฑ ููู ุงูุฒุฑ <code>StartButton</code> ูุฌุจ ุฃู ูุฎุชูู ูุน <code>MessageLabel</code> ุ ุซู ูุฑุณู ุฅุดุงุฑุฉ ุฅูู ุงููุดูุฏ ุงูุฑุฆูุณู ุ ุญูุซ ุณูููู ูุงุญููุง ุจุงุนุชุฑุงุถูุง ูู ููุณ ุงูููุช ุนู ุทุฑูู ุชูุฑูุฑ ุงููุธููุฉ ูุชูููุฐ - "new_game ()".  ูููุฐ ูุฐุง ุจุงุณุชุฎุฏุงู ุงูุฑูุฒ ุฃุฏูุงู.  ูุง ุชูุณ ุฃู ุงูุฒุฑ ุงูููุฌูุฏ ูู ุฎุงุตูุฉ <code>Text</code> ุจุชุนููู ุฃู ุงุณุชุฏุนุงุก ูุตู ูุจุฏุก ุงููุนุจุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func _on_StartButton_pressed(): $StartButton.hide() $MessageLabel.hide() emit_signal(<span class="hljs-string"><span class="hljs-string">"start_game"</span></span>)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฅููุงุก ุงููุงุฌูุฉ ูู ุงูููุงูุฉ ุ ุณููุชุจ ุงููุธููุฉ ุงูุฃุฎูุฑุฉ ูุงูุฃุฎูุฑุฉ - ูุธููุฉ ุนุฑุถ ุฑุณุงูุฉ ุญูู ููุงูุฉ ุงููุนุจุฉ.  ูู ูุฐู ุงููุธููุฉ ุ ูุญุชุงุฌ ุฅูู ุนุฑุถ ููุด "Game Over" ููุชู ุนุฑุถู ููุฏุฉ ูุง ุชุฒูุฏ ุนู ุซุงููุชูู ุ ุซู ูุฎุชูู ุ ููู ุฃูุฑ ูููู ุจูุถู ุงููุธููุฉ "show_message ()".  ููุน ุฐูู ุ ูุฌุจ ุนููู ูุฑุฉ ุฃุฎุฑู ุฅุธูุงุฑ ุฒุฑ ุงูุจุฏุก ููุนุจุฉ ุฌุฏูุฏุฉ ุ ุจูุฌุฑุฏ ุฃู ุชุฎุชูู ุฑุณุงูุฉ ุชููุฏ ุจุฃู ุงููุนุจุฉ ุงูุชูุช.  <code>yield()</code> ุจุฅููุงู ุชูููุฐ ุงููุธููุฉ ูุคูุชูุง ุญุชู ูุชู ุชููู ุฅุดุงุฑุฉ ูู <code>MessageTimer</code> ุ ูุชููู ุฅุดุงุฑุฉ ูู <code>MessageTimer</code> ุญูู ุชูููุฐูุง ุ ุณุชุณุชูุฑ ุงููุธููุฉ ูู ุงูุชูููุฐ ุ ูุชุนูุฏูุง ุฅูู ุญุงูุชูุง ุงูุฃุตููุฉ ุญุชู ูุชููู ูู ุจุฏุก ูุนุจุฉ ุฌุฏูุฏุฉ ูุฑุฉ ุฃุฎุฑู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func show_game_over(): show_message(<span class="hljs-string"><span class="hljs-string">"Game Over"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span>($MessageTimer, <span class="hljs-string"><span class="hljs-string">"timeout"</span></span>) $StartButton.show() $MessageLabel.text = <span class="hljs-string"><span class="hljs-string">"LIKE COINS!"</span></span> $MessageLabel.show()</code> </pre> <br><h3 id="ending" style=";text-align:right;direction:rtl">  ุชูุชููุ </h3><br><p style=";text-align:right;direction:rtl">  ูููู ุจุฅุนุฏุงุฏ ุงูุชุนูููุงุช ุจูู <code>HUD</code> ู <code>Main</code> .  ุฃุถู ูุดูุฏ <code>HUD</code> ุฅูู ุงููุดูุฏ ุงูุฑุฆูุณู ููู ุจุชูุตูู ุฅุดุงุฑุฉ <code>GameTimer</code> ุฎูุงู <code>timeout()</code> ุนูู ุงููุดูุฏ ุงูุฑุฆูุณู ุจุฅุถุงูุฉ ูุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func _on_GameTimer_timeout(): time_left -= <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-comment"><span class="hljs-comment">#  $HUD.update_timer(time_left) #   if time_left &lt;= 0: game_over() #    </span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซู ูู ุจุชูุตูู ุฅุดุงุฑุงุช <code>pickup()</code> <code>die()</code> ููุงุนุจ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func _on_Player_pickup(): score += <span class="hljs-number"><span class="hljs-number">1</span></span> $HUD.update_score(score) func _on_Player_die(): game_over()</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ููุงูุฉ ุงููุนุจุฉ ุ ูุฌุจ ุฃู ุชุญุฏุซ ุงูุนุฏูุฏ ูู ุงูุฃุดูุงุก ุงูุชู ูุง ูุฌุจ ุชุฌุงูููุง.  ุงูุชุจ ุงูููุฏ ุงูุชุงูู ุ ูุณุฃุดุฑุญ ูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">func game_over(): playing = false $GameTimer.stop() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> coin <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $CoinContainer.get_children(): coin.queue_free() $HUD.show_game_over() $Player.die()</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณุชููู ูุฐู ุงููุธููุฉ ุงููุนุจุฉ ุ ููู ุซู ุณูุชู ุฅุนุงุฏุฉ <code>show_game_over()</code> ุงูุนููุงุช ุงููุชุจููุฉ <code>show_game_over()</code> ุงูุนููุงุช ุงููุชุจููุฉ ุ ุซู ุณูุชู ุงุณุชุฏุนุงุก <code>show_game_over()</code> ูู <code>HUD</code> .  ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุจุฏุก ุงูุฑุณู ุงููุชุญุฑู ูุฅููุงู ุนูููุฉ ุชูููุฐ ุนูุฏุฉ <code>Player</code> . </p><br><p style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ูุฌุจ ุชูุดูุท <code>StartButton</code> ุ ุงูุฐู ูุฌุจ ุฃู ูููู ูุชุตูุงู <code>new_game()</code> .  ุงููุฑ ุนูู ุนูุฏุฉ <code>HUD</code> ููู ูุฑุจุน ุญูุงุฑ ุงูุงุชุตุงู ุ ุชุญุชุงุฌ ุฅูู ุงูููุฑ ููู <code>Make Function to Off</code> (ุณูุคุฏู ุฐูู ุฅูู ููุน ุฅูุดุงุก ูุธููุฉ ุฌุฏูุฏุฉ) <code>Method In Node</code> ุญูู <code>Method In Node</code> ุ ุญุฏุฏ ุงุณู ุงููุธููุฉ ุงููุชุตูุฉ - <code>new_game</code> .  ุณูุคุฏู ุฐูู ุฅูู ุชูุตูู ุงูุฅุดุงุฑุฉ ุจูุธููุฉ ููุฌูุฏุฉ ุ ุจุฏูุงู ูู ุฅูุดุงุก ูุธููุฉ ุฌุฏูุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูููุณุฉ ุงูุฃุฎูุฑุฉ ูู ุฅุฒุงูุฉ <code>new_game()</code> ูู ูุธููุฉ <code>_ready()</code> ูุฅุถุงูุฉ ุงูุณุทุฑูู ุงูุชุงูููู ุฅูู ูุธููุฉ <code>new_game()</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-meta"><span class="hljs-meta">... </span></span>$HUD.update_score(score) $HUD.update_timer(time_left)</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ูููููุง ุฃู ูููู ุจุซูุฉ ุฃู ุงููุนุจุฉ ุฌุงูุฒุฉ ุ ูุงูุขู ุฃุตุจุญุช "ูุงุจูุฉ ููุนุจ" ุชูุงููุง ุ ูููู ุจุฏูู ุชุฃุซูุฑุงุช.  ุณููุธุฑ ูู ูุฐุง ุงูุฃุฎูุฑ ูู ุงูููุงูุฉ ุงูุชุงููุฉ ุ ูุน ุชูุฑูุณ ุงูุชูุงู ูุจูุฑ ููุฎุชูู "ุงูุฒุฎุงุฑู" ูู ุฃุฌู ุชูููุน ุงููุนุจ ูุงุณุชูุดุงู ุงููุฒูุฏ ูู ุฅููุงููุงุช "Godot".  ูุฐูู ุ ูุง ุชูุณู ูุชุงุจุนุฉ ูุดุฑ ุงูููุงูุงุช.  ุญุธุง ุณุนูุฏุง! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar430800/">https://habr.com/ru/post/ar430800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar430788/index.html">ุชุงุฑูุฎ ุงูููุงุจูุฉ ูู IB IT (ูุทูุฑ ุฌุงูุง ุ ุจูู ุงุณุชุซูุงุฑู) ูู ููุฏู ูุน ุฃูุซูุฉ ุนูู ุงูููุงู ุงููููุฐุฌูุฉ</a></li>
<li><a href="../ar430790/index.html">ููุฏุฌุฑ ูุงูู ุฅุณ: ููุชุงุญ ุงูุบุฑูุฉ ุญูุซ ูููู ุฃู ุชููู 710 ุชููู ูุงูุนููุงุช ุงููุดูุฑุฉ</a></li>
<li><a href="../ar430792/index.html">ุฅูุดุงุก ูุฎุทุท ุชูุตููู ุญูู LWRP ูู ุงููุญุฏุฉ</a></li>
<li><a href="../ar430794/index.html">ุญูุงูุฉ ุงูุฏูุฑุงุช ุงูุฏุฑุงุณูุฉ</a></li>
<li><a href="../ar430798/index.html">Li-ion UPS: ุฃู ููุน ูู ุงูุจุทุงุฑูุงุช ุชุฎุชุงุฑ ุ LMO ุฃู LFPุ</a></li>
<li><a href="../ar430802/index.html">PMI RU: ุฏุฑุงุณุฉ ุฑูุงุชุจ ูุฏูุฑู ุงููุดุงุฑูุน ูู ุฑูุณูุง ูุนุงู 2017</a></li>
<li><a href="../ar430804/index.html">ุจุทุงุฑูุงุช Tesla / Panasonic ูู ุฃูุซุฑ ุจุทุงุฑูุงุช ุงูุณูุงุฑุงุช ุงูููุฑุจุงุฆูุฉ ุจุฃุณุนุงุฑ ูุนูููุฉ ูู ุงูุณูู</a></li>
<li><a href="../ar430806/index.html">ุจุฏุฃูุง ูู ุชุนูู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ - ูุชุจ ุทูุจูุง: EWM - ุฎุจุฑุฉ ูู ุฅูุดุงุก ูุดุฑูุน ุชุฏุฑูุจู</a></li>
<li><a href="../ar430808/index.html">ูุธุฑูุฉ ุงูุณูุงุนุงุช: 16 ูุงุฏุฉ ุญูู ููููุฉ ุนูู ุงูุณูุงุนุงุช ูููุจุฑุงุช ุงูุตูุช</a></li>
<li><a href="../ar430810/index.html">ุงุฎุชุจุงุฑ ุงูุญูู ุจุงูุฌุฑุงุฏ. ุงูุฌุฒุก 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>