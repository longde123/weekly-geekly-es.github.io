<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∂ ü§ï ü•° Kami membuat stasiun radio Internet sederhana, kompak dan murah üó∫Ô∏è ü§õüèæ üö•</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Linux akan menjadi platform perangkat lunak, untuk kesederhanaan lebih baik menggunakan sesuatu yang umum, dengan banyak informasi di Internet, jika t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami membuat stasiun radio Internet sederhana, kompak dan murah</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426349/"> Linux akan menjadi platform perangkat lunak, untuk kesederhanaan lebih baik menggunakan sesuatu yang umum, dengan banyak informasi di Internet, jika terjadi kesalahan.  Setrika untuk stasiun radio Internet bisa apa saja, server lengkap dengan proyek Anda, beberapa laptop lama, atau netbook, kami ingin murah, dan kami tidak memerlukan kinerja khusus dari besi. <br><br>  Jika Anda tidak memiliki apa pun, atau kami membutuhkan server yang benar-benar hening, mengapa tidak mencoba menggunakan komputer mini? <br><br>  Sesuatu seperti Raspberry Pi 3? <br><br>  Tidak, kami ingin lebih murah, jadi kami membutuhkan sesuatu seperti Orange Pi.  Saya menemukan model Orange Pi Pc Plus dengan 1GB DDR3 RAM dan 8GB EMMC Flash. <br><br><img src="https://habrastorage.org/webt/ew/ry/mf/ewrymf0vj-86hqfa2v8e7rrmjks.png"><a name="habracut"></a><br><br>  UPD: Kemarin, entah bagaimana semua orang menganggap artikel itu terlalu serius, tetapi sebenarnya percobaan itu dilakukan demi penggemar, untuk melihat apakah itu berhasil atau tidak.  Tentu, tidak ada pembicaraan tentang penggunaan "industri", itu seperti mencoba menyuarakan stadion dengan pusat musik biasa. <br><br>  Apa lagi yang bisa kita butuhkan? <br><br>  Saya ingin mencoba mengonfigurasikan semuanya dengan cara yang sederhana, jadi saya masih perlu kabel twisted pair ke router dan kartu memori Micro SD, karena saya tidak dapat menginstal sistem operasi langsung di komputer mikro.  Saya menemukan kartu memori untuk 8 gigabytes, jumlah ini cukup. <br><br>  Jadi, pertama-tama, Anda perlu menulis gambar sistem operasi ke kartu memori. <br>  Untuk server, saya lebih suka menggunakan Debian yang telah teruji waktu (ya, generasi muda kemungkinan besar lebih suka CentOS, tetapi berjanggut abu-abu akan setuju dengan saya bahwa Debian masih sangat bagus). <br><br>  Secara umum, ada banyak gambar siap pakai untuk Orange Pi di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.orangepi.org/downloadresources</a> , tetapi saya masih pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.armbian.com/download</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">unduh</a> file torrent dari armbian dari dl.armbian.com/orangepipcplus (di tambang kasus Debian_stretch_next.7z). <br><br>  Saya memiliki Orange Pi Pc Plus, Anda dapat memiliki komputer mini lainnya, jadi carilah gambar yang sesuai. <br><br>  Setelah mengunduh, bongkar arsip dan lihat gambar dalam format img.  Siapa pun yang menginginkan apa yang mereka isi dengan gambar, saya pribadi lebih suka Etcher (https://etcher.io).  Kami memasukkan kartu memori, memilihnya jika Anda memiliki beberapa media yang terhubung, klik tombol menjahit, masukkan kata sandi jika Anda juga memiliki Linux di desktop atau laptop Anda. <br><br><img src="https://habrastorage.org/webt/lq/3w/3y/lq3w3yteie6cz8jage7vau5zssw.png"><br><br>  Kartu dengan gambar siap, Anda dapat mulai menghubungkan semuanya. <br>  Apa yang kita butuhkan untuk memulai dan mulai mengatur server kita? <br>  Komputer mini itu sendiri, Internet melalui kabel Ethernet dan catu daya. <br>  Dan itu dia. <br><br>  Tidak, tentu saja Anda bisa bingung, sambungkan monitor dan keyboard dan konfigurasikan semuanya secara langsung, tapi saya lebih suka keyboard laptop saya, jadi saya akan mengkonfigurasi komputer mini saya dari jarak jauh, melalui SSH. <br><br>  Jadi, mari kita mulai, kita tetap menggunakan kabel Ethernet, kartu Micro SD dengan gambar Armbian. <br>  Tetap hanya untuk memasok daya ke komputer mini. <br><br>  Tetapi dengan kekuatan pada Orange Pi, semuanya sangat menyedihkan.  Apa yang ada di komputer mini normal?  Itu benar, Micro-USB, tetapi bagaimana saya bisa memberi daya pada Orange Pi?  Hanya 5V melalui konektor pin, yang dibeli secara terpisah. <br><br>  Adaptor daya dengan konektor yang sesuai harganya lebih dari sekadar kabel dengan USB standar pada akhirnya, sehingga Anda dapat mengambilnya. <br><br>  Jika tidak ada catu daya gratis dengan USB (dan kami tidak perlu, tetapi untuk 2 ampere), maka kami mencari-cari di dalam kotak kami dengan kabel, adaptor dan papan untuk komputer (Anda memiliki kotak seperti itu, kan?) Dan temukan adaptor yang sesuai dari beberapa lama, lama rusak oleh tablet anak, menyolder kabel dan daya untuk server kami siap. <br><br>  Ya, atau ambil saja pengisi daya dari pemutar mp3 disk lama iRiver (hanya 4,7 volt dan 1,2 ampere tetapi juga berfungsi). <br><br>  Kami melayani makanan dan kami siap untuk pindah, pada kenyataannya, ke yang semuanya disusun, untuk penciptaan stasiun radio internet. <br><br>  Jika Anda, seperti saya, berniat bertahan dengan minimum periferal, maka kami perlu mencari tahu alamat IP yang diterima komputer mini kami.  Cara termudah untuk mengetahuinya adalah pergi ke router Anda dan melihat alamat IP yang diberikan router ke server kami (router Anda dapat melakukan DHCP, kan?). <br><br>  Sekarang Anda dapat masuk melalui SSH ke server kami.  Siapa pun yang menggunakan klien SSH adalah yang akan digunakan (Anda tidak pernah memiliki Windows, tapi saya tidak tahu apa yang klien SSH lakukan). <br>  Dalam kasus saya, saya hanya memalu di konsol ssh root@192.168.0.88, saya setuju untuk menambahkan kunci ECDSA, kata sandi default untuk root diatur ke "1234", setelah masuk, kami menemukan diri kami di konsol komputer mikro, yang segera menyarankan untuk mengubah kata sandi root. <br><br><img src="https://habrastorage.org/webt/gu/nz/c0/gunzc0ewl71jcxyhwrvoeegqpvc.png"><br><br>  Setelah itu, diusulkan untuk membuat akun pengguna yang tidak memiliki hak pribadi, kami membuatnya. <br>  Dibandingkan dengan versi OS sebelumnya, versi saat ini agak disederhanakan dalam hal pengaturan dan banyak hal sudah dikonfigurasi secara otomatis. <br><br>  Armbian memiliki alat konfigurasi yang sangat nyaman: <code>armbian-config</code> perintah ke konsol dan lihat apa yang bisa berguna. <br><br><img src="https://habrastorage.org/webt/ow/nr/yi/ownryigiv-au8gowgrfhvcetduk.png"><br><br>  Kami belum memerlukan pengaturan sistem, tetapi mungkin diperlukan nanti, misalnya, untuk mentransfer sistem yang dikonfigurasikan dari Micro SD ke memori Flash EMMC 8GB bawaan komputer mini. <br><br>  Bagian Jaringan akan berguna bagi kami, tetapi alangkah baiknya jika memiliki alamat IP statis untuk server.  Stasiun radio Internet kami dapat terhubung ke jaringan bahkan melalui Wi-Fi.  Semua orang menetapkan tingkat kesesatan untuk dirinya sendiri, tetapi jika Anda membangun radio Internet murni untuk diri sendiri dan tidak ada rencana untuk lebih dari 10 pendengar pada saat yang sama, maka mengapa tidak mendapatkan server kami di Wi-Fi?  Dalam kasus ekstrem, Anda dapat mencolokkan kabel Ethernet kapan saja. <br><br>  Jadi, kami memutuskan pada jenis koneksi, sekarang kita perlu mengkonfigurasi alamat IP statis, untuk ini kita pergi ke pengaturan IP dan memilih antarmuka jaringan yang diinginkan, setelah itu kita mengatakan bahwa kita ingin alamat statis, mulai dan simpan pengaturan.  Tidak perlu mengubah mask dan gateway, karena mereka diterima dari router Anda melalui DHCP. <br><br><img src="https://habrastorage.org/webt/b0/gp/qv/b0gpqvib6trft_pkir827aj8d3m.png"><br><br>  Setelah Anda memasukkan alamat IP baru dan menekan Enter, sesi SSH Anda akan segera membeku, karena perangkat akan segera memiliki alamat IP baru.  Oleh karena itu, kami cukup menutup jendela dengan terminal dan pergi ke komputer mini kami melalui SSH menggunakan alamat IP baru. <br><br>  Ngomong-ngomong, karena semua fungsi yang kita miliki akan bersifat administratif, agar tidak menulis secara konstan sebelum setiap perintah sudo, saya hanya login ke komputer mini sebagai root. <br><br>  Dengan menjalankan <code>armbian-config</code> lagi, dapatkah kita melihat apa lagi yang bisa dikonfigurasi?  Di bagian Pribadi, kita dapat mengonfigurasi zona waktu, lokal, dan nama host.  Saya menambahkan lokal ru_RU.UTF-8 UTF-8, yang akan berguna. <br><br>  Agar pengaturan dapat diterapkan, Anda harus keluar dari utilitas konfigurasi, keluar dan masuk lagi, atau reboot server dengan perintah reboot. <br><br>  Saya menggunakan perintah reboot untuk memastikan bahwa pengaturan telah disimpan dan server mulai berhasil dengan mereka. <br><br>  Konfigurasi server dasar telah dibuat dan mengapa tidak menginstal sistem operasi dengan MicroSD OS pada memori internal EMMC Flash?  Tentu saja, jika komputer mini Anda memiliki memori ini. <br><br>  Untuk melakukan ini, pergi ke <code>armbian-config</code> - System - Install, pilih drive yang tersedia, tekan Enter, dapatkan salam dari masa lalu, setuju dan pilih jenis sistem file ext4. <br><br><img src="https://habrastorage.org/webt/yt/g4/ut/ytg4utinyttwtqoftarwnu-btv8.png"><br><br>  Sekarang kita bisa duduk dan menunggu sampai OS ditransfer ke penyimpanan internal komputer mini. <br><br><img src="https://habrastorage.org/webt/es/rz/0x/esrz0x4sqck7jn3sggbx6bba_yi.png"><br><br>  Setelah penyalinan selesai, pilih untuk mematikan daya.  Kami menunggu beberapa detik hingga LED pada komputer mini mati, cabut daya, lepaskan kartu microSD, pasang kembali power dan nyalakan komputer. <br><br>  Ya, jika Anda tidak memiliki memori internal dan Anda tidak mentransfer sistem operasinya, mengeluarkan MicroSD kemungkinan besar bukan ide yang baik. <br><br>  Setelah masuk ke komputer mini kami melalui SSH dan memastikan semuanya bekerja, Anda dapat mulai menyetel stasiun radio itu sendiri. <br><br>  Pertama-tama, kami memperbarui informasi paket dengan mengarahkan <code>apt update</code> ke konsol server. <br><br>  Ya, saya suka kenyamanan, jadi saya menginstal mc dengan perintah <code>apt install mc</code> . <br>  Saya suka melakukan semuanya dari bawah mc, dan jika saya perlu melihat konsol, saya cukup tekan ctrl + o. <br><br>  Pertama, instal pemutar musik setan itu sendiri: <code>apt install mpd</code> . <br>  Sekelompok dependensi akan diinstal dengannya. <br><br>  Mari beralih ke pengaturan.  File /etc/mpd.conf bertanggung jawab atas konfigurasi daemon, buka dengan perintah <code>nano /etc/mpd.conf</code> . <br><br>  Nama pengguna saya tanpa hak hzs, dan file konfigurasi saya terlihat seperti ini: <br><br><pre> <code class="php hljs">music_directory <span class="hljs-string"><span class="hljs-string">"/home/hzs/music"</span></span> playlist_directory <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd/playlists"</span></span> db_file <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd/tag_cache"</span></span> log_file <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd.log"</span></span> pid_file <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd/pid"</span></span> state_file <span class="hljs-string"><span class="hljs-string">"/home/hzs/.mpd/state"</span></span> sticker_file <span class="hljs-string"><span class="hljs-string">"/var/lib/mpd/sticker.sql"</span></span> user <span class="hljs-string"><span class="hljs-string">"hzs"</span></span> bind_to_address <span class="hljs-string"><span class="hljs-string">"localhost"</span></span> restore_paused <span class="hljs-string"><span class="hljs-string">"yes"</span></span> metadata_to_use <span class="hljs-string"><span class="hljs-string">"artist,title"</span></span> auto_update <span class="hljs-string"><span class="hljs-string">"yes"</span></span> audio_output { type <span class="hljs-string"><span class="hljs-string">"httpd"</span></span> name <span class="hljs-string"><span class="hljs-string">"My New Internet Radio Station!!!"</span></span> encoder <span class="hljs-string"><span class="hljs-string">"lame"</span></span> <span class="hljs-comment"><span class="hljs-comment"># optional, vorbis or lame port "8000" bind_to_address "0.0.0.0" # optional, IPv4 or IPv6 bitrate "256" # do not define if quality is defined format "44100:16:2" } volume_normalization "yes" filesystem_charset "UTF-8" id3v1_encoding "UTF-8"</span></span></code> </pre> <br>  Semuanya jelas di sini dan tanpa komentar khusus. <br><br>  Agar berfungsi, Anda perlu membuat struktur direktori dari atas pengaturan.  Harap perhatikan bahwa pemilik direktori ini haruslah pengguna yang tidak memiliki hak, dari siapa semuanya akan berfungsi, dalam kasus saya hzs. <br><br>  Dari root, jalankan perintah berikut: <br><br> <code>chown -cR hzs:hzs /home/hzs/music</code> <br> <code>chown -cR hzs:hzs /home/hzs/.mpd</code> <br> <br>  Saatnya mengunggah musik, kami memiliki SSH di server, sehingga kami dapat menghubungkan klien FTP favorit kami ke server kami. <br><br>  Kami tahu alamat IP, port 22, nama pengguna dan kata sandi adalah yang Anda tentukan saat membuat pengguna yang tidak berhak, jenis koneksi SSH.  Tuangkan beberapa musik untuk pengujian ke dalam direktori untuk musik yang ditentukan dalam konfigurasi. <br><br><img src="https://habrastorage.org/webt/hs/x6/wy/hsx6wyhf98bmwv5bvy5kkpdvogi.png"><br><br>  Sekarang pemain mulai dengan konfigurasi yang salah, jadi kami menghentikan daemon dan mulai lagi: <br><br> <code>service mpd stop</code> <br> <code>service mpd start</code> <br> <br>  Untuk kontrol daemon yang paling sederhana, kita akan <code>apt install mpc</code> utilitas konsol <code>apt install mpc</code> menggunakan perintah <code>apt install mpc</code> . <br><br>  Setelah instalasi, kami akan sedikit mengonfigurasi pemain: <br><br> <code>mpc random on</code> <br> <code>mpc repeat on</code> <br> <br>  Sekarang Anda perlu menambahkan trek dan daftar putar, di konsol itu agak gimmorro, tetapi tidak ada yang bisa dilakukan. <br><br>  Kami melihat file yang tersedia bagi kami, yang dapat kami tambahkan ke daftar putar: <br><br> <code>mpc ls</code> <br> <br>  Untuk menambahkan file ke daftar putar, dalam perintah <code>mpc add</code> kita harus menentukan nama lengkap file yang akan ditambahkan, pemilihan berdasarkan mask tidak berfungsi: <br><br> <code>mpc add "01 Lost in Your Eyes.mp3"</code> <br> <br>  Kami melihat daftar putar yang dihasilkan: <br><br> <code>mpc playlist</code> <br> <br>  Saatnya untuk meluncurkan stasiun radio kami: <br><br> <code>mpc play</code> <br> <br><img src="https://habrastorage.org/webt/8p/gc/j5/8pgcj5ce-fqssnegu8svkdjqxwu.png"><br><br>  Mari kita coba dengarkan, untuk ini, di pemutar audio mana pun, buka aliran audio stasiun radio kami.  Untuk melakukan ini, masukkan alamat stream <code>http://ip:port</code> , saya memilikinya <code>http://192.168.0.90:8000</code> . <br><br>  Audacious bermain sebentar-sebentar, ada masalah dengan caching, tetapi SMPlayer dan VLC tidak merasakan masalah. <br><br><img src="https://habrastorage.org/webt/do/y_/e8/doy_e8rrunt7km5_eqddovxtp0c.png"><br><br><img src="https://habrastorage.org/webt/pl/dc/ec/pldcecft-jdoram8ixgsqbupi7o.png"><br><br><img src="https://habrastorage.org/webt/ff/j4/np/ffj4nptgv3ma90bakt63oyciqys.png"><br><br>  Pada prinsipnya, pada tahap ini, stasiun radio Internet kami sudah berfungsi, Anda perlu menambahkan musik ke daftar putar dan meneruskan port pada router sehingga stasiun radio Internet kami menjadi stasiun radio Internet, dan bukan radio di jaringan lokal. <br><br>  Saya memiliki beberapa domain, jadi hal pertama yang saya lakukan dalam pengaturan DNS adalah membuat catatan "A" dengan testradio dan alamat IP eksternal statis router saya di rumah.  Anda tidak harus melakukan ini. <br><br>  Selanjutnya, pada router saya, saya mengkonfigurasi penerusan port. <br><br>  Karena saya sudah memiliki stasiun radio sendiri di server besar, saya tentukan port sumber eksternal 9000, dan port lokal 8000 internal, jadi dari luar radio akan disiarkan melalui <code>http://_ip:9000</code> . <br><br><img src="https://habrastorage.org/webt/z5/h5/vf/z5h5vf6bgcfm0k1t464-y9e1dlq.png"><br><br>  Itu dia, sekarang kita punya stasiun radio Internet "nyata". <br><br>  Jika Anda tidak ingin berhenti di situ, lanjutkan. <br><br>  Kami tidak menyiarkan suara DJ, tetapi jika perlu itu dapat diimplementasikan, tetapi yang benar-benar diperlukan adalah antarmuka manajemen daftar putar yang nyaman. <br><br>  Ada banyak konsol manajemen, beberapa dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dilihat di sini</a> , tetapi saya akan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pitchfork MPD Client</a> . <br><br>  Ini adalah moncong web yang lengkap, dan ya, kami akan menembakkan pistol ke burung pipit dan menaikkan server http lengkap di komputer mini dengan stasiun radio kami: <br><br> <code>apt install apache2</code> <br> <br>  Kami juga akan membutuhkan PHP: <br><br> <code>apt-get install php</code> <br> <br>  Masih butuh <br><br> <code>apt install php7.0-xml</code> <br> <br>  dan <br><br> <code>apt install php-pear</code> <br> <br>  Kami membuat direktori / home / hzs / wwwroot / pf di folder home dan membongkar ke dalamnya Pitchfork MPD Client yang sebelumnya dimuat melalui SSH. <br><br><img src="https://habrastorage.org/webt/vt/3j/wh/vt3jwhnfoip8vuciat5mtbjja44.png"><br><br>  Dalam file konfigurasi server web apache2 /etc/apache2/sites-available/000-default.conf <br> <code>nano /etc/apache2/sites-available/000-default.conf</code> <br>  kami memotong semuanya dan menulis (jangan lupa untuk mengubah "hzs" menjadi nama pengguna Anda): <br><br><pre> <code class="php hljs">&lt;VirtualHost *:<span class="hljs-number"><span class="hljs-number">80</span></span>&gt; ServerName localhost ServerAdmin webmaster@localhost DocumentRoot /home/hzs/wwwroot &lt;Directory /home/hzs/wwwroot/&gt; Options All AllowOverride All DirectoryIndex index.php index.html index.htm Order Allow,Deny Allow from All <span class="hljs-keyword"><span class="hljs-keyword">Require</span></span> all granted &lt;/Directory&gt; &lt;/VirtualHost&gt;</code> </pre> <br>  Kemudian kita reboot server http <br><br> <code>service apache2 restart</code> <br> <br>  Dengan masuk ke alamat server IP / pf Anda (dalam kasus saya: <code>http://192.168.0.90/pf</code> ) <br><br>  Kami akan melihat panel kontrol: <br><br><img src="https://habrastorage.org/webt/wf/ch/a-/wfcha-qsfl5kbftdhelmpue4a0s.png"><br><br>  Semuanya cukup sederhana dan intuitif. <br><br>  Selanjutnya, klik pada ikon folder di sebelah kanan dan tab Filesystem. <br><br>  Untuk memperbarui daftar file, klik tombol Perbarui DB, lalu pilih file yang tersisa yang masih belum ada dalam daftar putar dan klik tombol Tambah sedikit lebih rendah. <br><br>  Kami menyegarkan halaman dan melihat bahwa semua file yang telah kami tambahkan ke daftar putar: <br><br><img src="https://habrastorage.org/webt/d4/iz/vm/d4izvmjxin4-aapy4fxwvelnbxk.png"><br><br>  Jika Anda perlu menyembunyikan kontrol pemutar dengan kata sandi, Anda dapat mengedit file konfigurasi: <br><br> <code>nano /home/hzs/wwwroot/pf/config/config.xml</code> <br> <br>  Ada struktur pengaturan yang sepenuhnya dapat dimengerti. <br><br>  Jadi, kami memiliki server server radio Internet lengkap berukuran 10 * 7 * 3 sentimeter.  Tentu saja, server berdaya rendah yang digunakan tidak akan menarik ratusan pendengar, tetapi setidaknya tidak akan meninggalkan Anda tanpa musik favorit Anda di mana pun Anda berada, jika ada Internet di dekatnya. <br><br>  Pada prinsipnya, Anda tidak dapat terus membaca, tetapi bagi mereka yang gigih, kami melanjutkan. <br>  Kami memiliki server web lengkap, mengapa ... <br>  Anda sudah mengerti. <br><br>  Buat direktori testradio di root dari server web kami, buat file <code>"index.php"</code> di dalamnya: <br><br><pre> <code class="php hljs">&lt;!DOCTYPE html&gt; &lt;html xmlns=<span class="hljs-string"><span class="hljs-string">"https://www.w3.org/1999/xhtml"</span></span> xml:lang=<span class="hljs-string"><span class="hljs-string">"ru-ru"</span></span> lang=<span class="hljs-string"><span class="hljs-string">"ru-ru"</span></span> dir=<span class="hljs-string"><span class="hljs-string">"ltr"</span></span>&gt; &lt;head&gt; &lt;meta http-equiv=<span class="hljs-string"><span class="hljs-string">"content-type"</span></span> content=<span class="hljs-string"><span class="hljs-string">"text/html; charset=utf-8"</span></span> /&gt; &lt;title&gt;My Test Radio&lt;/title&gt; &lt;script src=<span class="hljs-string"><span class="hljs-string">"jquery-3.3.1.min.js"</span></span>&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;My Test Radio&lt;/h1&gt; &lt;div id=<span class="hljs-string"><span class="hljs-string">"song"</span></span>&gt; now playing:&lt;br&gt; &lt;div id=<span class="hljs-string"><span class="hljs-string">"title"</span></span>&gt;now playing&lt;/div&gt; &lt;br&gt; &lt;div&gt; &lt;span id=<span class="hljs-string"><span class="hljs-string">"play"</span></span> type=<span class="hljs-string"><span class="hljs-string">"button"</span></span>&gt;Play&lt;/span&gt; &lt;span id=<span class="hljs-string"><span class="hljs-string">"pause"</span></span> type=<span class="hljs-string"><span class="hljs-string">"button"</span></span>&gt;Pause&lt;/span&gt; &lt;/div&gt; &lt;br&gt; &lt;div&gt; vol:&lt;br&gt; &lt;input id=<span class="hljs-string"><span class="hljs-string">"volume"</span></span> type=<span class="hljs-string"><span class="hljs-string">"range"</span></span> min=<span class="hljs-string"><span class="hljs-string">"0"</span></span> max=<span class="hljs-string"><span class="hljs-string">"10"</span></span> value=<span class="hljs-string"><span class="hljs-string">"5"</span></span> /&gt; &lt;/div&gt; &lt;span id=<span class="hljs-string"><span class="hljs-string">"duration"</span></span>&gt;&lt;/span&gt; &lt;br&gt; &lt;div&gt;<span class="hljs-number"><span class="hljs-number">256</span></span> kbps&lt;/div&gt; &lt;/div&gt; &lt;script language=<span class="hljs-string"><span class="hljs-string">"JavaScript"</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> audio = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Audio(<span class="hljs-string"><span class="hljs-string">'http://testradio.nisel.ru:9000'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> play = document.getElementById(<span class="hljs-string"><span class="hljs-string">'play'</span></span>); play.addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ audio.play(); }, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pause = document.getElementById(<span class="hljs-string"><span class="hljs-string">'pause'</span></span>); pause.addEventListener(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ audio.pause(); }, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> volume = document.getElementById(<span class="hljs-string"><span class="hljs-string">'volume'</span></span>); volume.addEventListener(<span class="hljs-string"><span class="hljs-string">'change'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ audio.volume = parseFloat(this.value / <span class="hljs-number"><span class="hljs-number">10</span></span>); }, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); audio.addEventListener(<span class="hljs-string"><span class="hljs-string">"timeupdate"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> duration = document.getElementById(<span class="hljs-string"><span class="hljs-string">'duration'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s = parseInt(audio.currentTime % <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> m = parseInt((audio.currentTime / <span class="hljs-number"><span class="hljs-number">60</span></span>) % <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> h = parseInt((audio.currentTime / <span class="hljs-number"><span class="hljs-number">3600</span></span>) % <span class="hljs-number"><span class="hljs-number">60</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (s &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) s = <span class="hljs-string"><span class="hljs-string">'0'</span></span> + s; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (m &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) m = <span class="hljs-string"><span class="hljs-string">'0'</span></span> + m; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (h &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) h = <span class="hljs-string"><span class="hljs-string">'0'</span></span> + h; duration.innerHTML = h + <span class="hljs-string"><span class="hljs-string">':'</span></span> + m + <span class="hljs-string"><span class="hljs-string">':'</span></span> + s; }, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); &lt;/script&gt; &lt;script language=<span class="hljs-string"><span class="hljs-string">"JavaScript"</span></span>&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">show</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $.ajax({ url: <span class="hljs-string"><span class="hljs-string">"trackname.php"</span></span>, cache: <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, success: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(html)</span></span></span></span>{ $(<span class="hljs-string"><span class="hljs-string">"#title"</span></span>).html(html); } }); } $(document).ready(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ show(); setInterval(<span class="hljs-string"><span class="hljs-string">'show()'</span></span>,<span class="hljs-number"><span class="hljs-number">5000</span></span>); }); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt;</code> </pre> <br>  Ini adalah contoh paling sederhana untuk membuat pemain untuk situs, juga dapat menampilkan nama komposisi saat ini, diperbarui dengan ajax setiap 5 detik. <br><br>  Penampilan bisa selesai secukupnya menggunakan css. <br><br>  Kode menunjukkan bahwa aliran audio sudah menuju ke alamat yang ditentukan dalam DNS domain saya. <br>  Jangan lupa untuk menjatuhkan file jquery ke direktori (dalam kasus saya jquery-3.3.1.min.js).  Secara umum, tentu saja, jquery terlalu banyak di sini dan orang bisa membuat permintaan ajax tanpa itu, tetapi ternyata terlalu malas untuk berpikir dan saya menggunakan sepotong kode yang sudah jadi. <br><br>  Selanjutnya, buat file <code>"trackname.php"</code> : <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> file_get_contents(<span class="hljs-string"><span class="hljs-string">'http://192.168.0.90/mpc'</span></span>);<span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  Juga di root server web kami membuat direktori "mpc" dan file <code>"index.php"</code> di dalamnya: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> exec(<span class="hljs-string"><span class="hljs-string">'mpc current'</span></span>);<span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre> <br>  Mengapa beberapa orang bertanya kruk seperti itu, faktanya adalah di stasiun radio militer saya server pemain berada di server yang sama, dan permukaan web situs tersebut ada di server web yang secara fisik berbeda. <br><br><img src="https://habrastorage.org/webt/sl/mg/eq/slmgeqlpij1qqccf75z2yfurvy4.png"><br><br>  Karena Anda perlu menginterogasi trek yang diputar langsung di server dengan pemain, direktori server web mpc harus ada di sana, dan file <code>"trackname.php"</code> ada di server web situs itu sendiri dan mengunggah file dengan deskripsi trek dari server lain ke alamat IP-nya. <br><br>  Pemain itu sendiri dan situs stasiun radio bisa sangat berjauhan dan berkomunikasi baik pada alamat IP eksternal dan pada alamat yang tersumbat dengan DNS.  Agar semuanya berfungsi, Anda hanya perlu meneruskan porta dengan benar. <br><br>  Anda dapat memodifikasi proyek sesuai keinginan Anda, well, saya memiliki Sabtu sore yang menyenangkan. <br>  Semua percobaan yang berhasil! <br><br>  <b>UPD2: Percobaan selama seminggu sampai pada kesimpulan logisnya dan saya mematikan server mini saya dengan stasiun radio.</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id426349/">https://habr.com/ru/post/id426349/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id426339/index.html">25 Oktober 2018 Pertemuan Kelompok Pengguna Atlassian di Raiffeisenbank</a></li>
<li><a href="../id426341/index.html">Memoizing kwarg default dengan Python</a></li>
<li><a href="../id426343/index.html">Aturan perilaku sopan di TI: sejarah ITIL</a></li>
<li><a href="../id426345/index.html">Teka-teki menarik dari wawancara teknis</a></li>
<li><a href="../id426347/index.html">Intisari Universitas ITMO: Studi Baru, Pengalaman Alumni, dan Proyek Internasional</a></li>
<li><a href="../id426351/index.html">Perubahan pada Sertifikasi dan Ujian Microsoft</a></li>
<li><a href="../id426355/index.html">Fungsi Math.Sin (double) untuk GPU</a></li>
<li><a href="../id426357/index.html">Unity & Vive: Tutorial</a></li>
<li><a href="../id426359/index.html">Inisiatif anti-pembajakan Yandex tidak disetujui oleh pemegang hak cipta</a></li>
<li><a href="../id426361/index.html">Tentang keajaiban lebah, dan bagaimana kita membunuhnya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>