<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌖 🚫 👩‍👩‍👧‍👧 API, die Sie zum Weinen bringt 💖 🕔 🧑🏿‍🤝‍🧑🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Was erwartet Sie? 
 Ziel ist es, Entwicklern zu zeigen, mit welchen Problemen ihre API-Benutzer am Beispiel der Arbeit mit verschiedenen CRM-Systemen ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>API, die Sie zum Weinen bringt</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483030/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3n/vt/zr/3nvtzrww69r_ts0kn9onkooxqm0.png"></div><br><h2>  Was erwartet Sie? </h2><br>  Ziel ist es, Entwicklern zu zeigen, mit welchen Problemen ihre API-Benutzer am Beispiel der Arbeit mit verschiedenen CRM-Systemen konfrontiert sind. <br><br>  Um mein Gesicht zu schützen, werde ich die Namen der Teilnehmer in diesem Artikel nicht bewerben. <br>  Außerdem bin ich - ich bin kein Programmierer der Freundin meiner Mutter, also nehme ich nicht meine Schlussfolgerungen für die einzig wahre Option. <br><br><h2>  Eyeliner </h2><br>  Es war einmal ein hoffnungsvoller Junge.  Dieser Junge hatte nichts in seinem Leben als die Arbeit in der technischen Unterstützung von Buchhaltungsprogrammen.  Er kochte lange in diesem Kessel, bis er an einem Tag sein Dach abriss, die Hauptmerkmale des Wirts sendete und auf der Suche nach Perspektiven ging. <br><br>  Der Junge träumte immer davon, ein cooler Entwickler zu werden, er würde außergewöhnliches Geld verdienen, am liebsten in der Basurm-Währung.  Und deshalb war er parallel zur Arbeit an der Erstellung seiner Website beteiligt, wobei er Technologien einsetzte, die es in jenen Jahren noch nicht gegeben hatte.  Dank dessen fand er einen neuen Besitzer, der ihm einen Job in seinem geliebten Geschäft gab, mit einem guten Gehalt und mit unerhörten Aussichten. <br><br>  Seitdem lebte der Junge, lebte und machte es gut.  Und er kannte die Sorgen und Nöte nicht ... oder wusste er es?  Lass es uns herausfinden! <br><a name="habracut"></a><br>  Ich habe einen Job in einem Business Intelligence-Unternehmen bekommen.  Und welche Art von Analyse kann ohne Daten sein?  Aus diesem Grund hatte das Unternehmen ein separates Team und eine Abteilung, die Daten von Kundenstandorten sammelte, um Umsatzpläne aus Werbekanälen und anderen Quellen zu erstellen.  Was die Besonderheiten betrifft, bestand meine Aufgabe darin, unseren Zähler auf den Websites zu installieren, Daten über den Besucher zu sammeln und Anwendungen aus Formularen, Online-Chats, Rückrufen usw. zu erstellen.  in ihren CRM-Systemen.  Davon haben unsere Analysen in Zukunft Informationen über den Status und die Höhe des Verkaufs abgerufen. <br><br>  Und da die Erstellung von Anwendungen in CRM durch das Umschließen unseres Systems vereinfacht wurde, das die Anwendung und den Client mithilfe von 1 Anforderung erstellt hat, einschließlich der Übernahme von Diensten von Drittanbietern, scheint dies nicht kompliziert zu sein.  Aber wie Sie verstehen sollten, unterscheidet sich eine solche Logik nicht in der Flexibilität.  Und wenn der Kunde etwas anderes benötigte, musste er bereits den Komfortmodus ausschalten und die Ärmel hochkrempeln, um direkt mit der API des gewünschten Systems zu arbeiten.  Und manchmal, <s>wenn ich</s> mit der nächsten problematischen API arbeite, <s>denke ich, wäre es besser, in diesen zu bleiben.</s>  <s>unterstützen</s> ... <br><br><h2>  Problem Nr. 1: Mangel an Methoden / Daten </h2><br>  Vielleicht ist das häufigste Problem, auf das ich in meinem Leben gestoßen bin, das Fehlen der Fähigkeit, die Daten abzurufen, die ich in der Schnittstelle benötige.  Konflikte mit Kunden traten immer wieder auf, weil wir nicht jeden Tag etwas auf den Bildschirmen ihrer Monitore sehen können. <br><br>  Zum Beispiel kam vor ein paar Jahren ein ziemlich großer Kunde zu uns, der in CRM-Dateien speichern musste, die ihm Kunden von den Formularen auf der Site senden.  Eine gewöhnliche Aufgabe, aber es gab keine Möglichkeit der Umsetzung, und bis heute nicht! <br><br>  Der Fehler für den Client war inakzeptabel, und am Ende mussten wir Dateien hochladen, um JS-Anforderungen von der Schnittstelle zu emulieren. <br><br>  <i>Ich muss sagen, dass dieses CRM, die Autorisierung in der API, auch in der Schnittstelle autorisiert, was für mich eine ziemlich seltsame Lösung ist.</i>  <i>Dank dessen mussten wir jedoch nicht die übliche Autorisierung emulieren.</i>  <i>Oder war es gedacht ...?</i> <br><br>  Ein weiterer Fall mit dem gleichen CRM ist nicht allzu lange her.  Es war notwendig, den aktuell aktiven Application Manager zur Verantwortung zu ziehen.  Und wie Sie bereits verstanden haben, gibt die API keine Informationen über die Manageraktivität an uns zurück.  Das Paradoxe ist jedoch, dass ihre JS-API zurückkehrt.  Infolgedessen musste ich eine JS-Anwendung schreiben, eine Art Vermittler, mit der ich den Server über aktive Manager im Moment informierte. <br><br>  <b>Lösung:</b> <br>  In unserem Team ist es üblich, eine öffentliche API-Methode für die Schnittstelle zu erstellen und über diese bereits mit dem Server zu interagieren.  Dadurch wird das Problem der Nichtübereinstimmung zwischen den technischen Funktionen der Schnittstelle und der öffentlichen API beseitigt. <br><br><h2>  Problem Nummer 2: das Fehlen eines einheitlichen Stils von Anfragen / Antworten </h2><br>  Ein sehr häufiges Problem, auch in großen westlichen CRMs.  Angenommen, wir müssen eine Liste der Bestellungen für einen Monat abrufen, dann stellen wir fest, dass das System die Anzahl der Elemente im Upload begrenzt.  Um durch die Seiten zu navigieren, müssen Sie den Offset-Parameter verwenden.  Okay, wir haben die Methode zum Laden von Aufträgen und separat die Hilfsmethode zum Paging implementiert. <br>  Jetzt müssen wir die Liste der Clients entladen, eine neue Methode zusammen mit der zuvor geschriebenen Paginierungsmethode implementieren und ...  Wir bekommen einen Fehler.  Da PM und die Entwickler entschieden haben, dass Offset zu einfach klingt, lassen Sie es jetzt vid-offset sein. <br><br>  Natürlich übertreibe ich, ich kann nicht wissen, was passiert ist, als sie diese API geschrieben haben.  Dies ist aber immerhin ein PM-Fehler, da er nicht angegeben hat, wie er bereits in anderen Methoden implementiert wurde.  Und auch ein Fehler der Entwickler, derer, die eine neue Methode geschrieben haben, und derer, die überprüft wurden.  Derzeit ist jeder, der seine API verwendet, gezwungen, Krücken in seinen Anwendungen zu erstellen. <br><br>  <b>Lösung:</b> <br>  Jede neue API-Methode sollte, wenn möglich, der Struktur der bestehenden entsprechen.  Der technische Leiter (oder mangels des ersten Teamleiters) kann eine Vorschrift erstellen, eine Art Codestil, nach der APIs entwickelt werden müssen, ohne dass alle Entwickler damit vertraut gemacht werden müssen.  Wenn das Problem bereits besteht, ist es nach Möglichkeit besser, eine Krücke auf Ihre Seite zu legen, als Tausende Ihrer Kunden dazu zu zwingen, dies auf Ihre Seite zu tun. <br><br><h2>  Problem Nummer 3: Mangelhafte Dokumentation oder Mangel daran </h2><br>  Die Dokumentation ist eine Entwicklerreferenz.  Wir stoßen oft auf Situationen, in denen wir gefragt werden, ob eine bestimmte Funktion implementiert werden kann.  Und wenn wir uns nicht erinnern oder die Antwort nicht kennen, öffnen Sie sofort die Dokumentation.  Informationen in einem guten Verzeichnis zu finden, dauert ein paar Minuten, während Sie in einem überlasteten Verzeichnis eine halbe Stunde lang graben können und dennoch keine eindeutige Antwort erhalten. <br><br>  In einigen fortgeschrittenen Fällen ist es einfach unmöglich, im öffentlichen Bereich zu finden.  Wenn Sie eine aktuelle Liste der Methoden benötigen, wenden Sie sich an den technischen Support.  Und dann müssen Sie noch prüfen, ob dort etwas Neues aufgetaucht ist, das wir ein paar Kunden gefragt haben ... <br><br>  <b>Lösung:</b> <br>  Ich werde einige Punkte nennen, die für mich die Qualitätsdokumentation charakterisieren: <br><br><ul><li>  Suche nach Namen, Beschreibung und Methodenparametern </li><li>  korrekte Beschreibung des Zwecks der Methode </li><li>  Liste der akzeptierten Parameter mit Typ und Beschreibung </li><li>  Liste der zurückgegebenen Parameter mit Typ und Beschreibung </li><li>  Beispiel anfordern </li><li>  Antwortbeispiel </li><li>  mögliche Fehlercodes mit einer Beschreibung </li><li>  eine Sandbox, in der Sie im Entwurfsmodus mit Anforderungen "herumspielen" können </li><li>  Änderungsverlauf aller API-Methoden als Kurzreferenz </li></ul><br><h2>  Problem Nummer 4: Autorisierungsfahrräder </h2><br>  Sie kennen dieses wunderbare Gefühl, wenn Sie die Dokumentation eines neuen Systems öffnen, und dort wird im Abschnitt zur Autorisierung eine Reihenfolge von drei Methoden beschrieben, um einen Schlüssel zu erhalten, der nur für eine Anfrage gültig ist ...?  Also habe ich es nicht. <br><br>  Es bleibt mir ein Rätsel, warum Entwickler Oauth 2.0 zugunsten ihrer Motorräder aufgeben?  Und okay, wenn die Autorisierung auf einen konstanten Token beschränkt ist, ist hier die gesamte Autorisierungskette ... <br><br>  <b>Lösung:</b> <br>  Sie sollten Ihr Fahrrad nicht neu erfinden, wenn es bereits fertige Standards gibt.  Für diese Standards verfügen Entwickler bereits über eigene Komponenten für die einfache Autorisierung. <br><br><h2>  Nachwort </h2><br>  Ich habe über 4 Probleme gesprochen, auf die ich zu Beginn meiner Reise bis heute gestoßen bin.  Ich habe versucht, ihre Lösungen bereitzustellen, aber es liegt an Ihnen, zu entscheiden, ob sie gut sind oder nicht.  Am Ende hat jeder von uns seine eigene Denkarchitektur. <br><br>  Also, ich danke allen, die bisher gelesen haben!  Dies ist mein erster Artikel, und wenn er informativen Wert für Sie hatte, werde ich gerne die Artikelserie über mein Leiden mit der API fortsetzen. <br><br>  Und natürlich freue ich mich über die Meinung von Experten in den Kommentaren. <br><br>  <i>Alles für das kommende Jahr 2020!</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de483030/">https://habr.com/ru/post/de483030/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de483014/index.html">PostgreSQL-Nachrichtenwarteschlangen mit PgQ</a></li>
<li><a href="../de483016/index.html">Eine kurze Geschichte der Weltraummikroprozessoren, Teil Zwei</a></li>
<li><a href="../de483018/index.html">Maske-R CNN vom Anfänger bis zum Profi</a></li>
<li><a href="../de483024/index.html">„Was haben Unternehmen mit Ihrer Privatsphäre gemacht?“, Arthur Khachuyan</a></li>
<li><a href="../de483026/index.html">Java / Spring: So generieren Sie mit Speedment eine CRUD REST-API vollständig</a></li>
<li><a href="../de483032/index.html">Umzug aus der GUS in die Tschechische Republik, eigene Erfahrung (Teil 2)</a></li>
<li><a href="../de483036/index.html">n-Queens Completion Problem - linearer Lösungsalgorithmus</a></li>
<li><a href="../de483038/index.html">Die Spielwelt kompetent neu starten</a></li>
<li><a href="../de483040/index.html">Magic Schraubendreher für Fernost Montage Excel 97</a></li>
<li><a href="../de483042/index.html">9 Tipps zur Vue-Leistung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>