<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí§ ü§üüèª üññüèø Acelerar un programa para un procesador sintetizado Redd sin optimizaci√≥n: reemplazar un reloj ‚öìÔ∏è üöã üï∫üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hasta ahora, hemos estado discutiendo el tema de c√≥mo aumentar la velocidad del sistema utilizando algunos m√©todos intensivos. Pero, de hecho, hay m√©t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Acelerar un programa para un procesador sintetizado Redd sin optimizaci√≥n: reemplazar un reloj</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469985/">  Hasta ahora, hemos estado discutiendo el tema de c√≥mo aumentar la velocidad del sistema utilizando algunos m√©todos intensivos.  Pero, de hecho, hay m√©todos extensos.  Ahora estamos trabajando a una frecuencia de reloj de 50 MHz, que est√° asociada con el uso de un componente del conjunto para un programa universitario (y sin √©l es imposible cronometrar SDRAM, lo que requiere que los pulsos de reloj que van al microcircuito se desplacen en relaci√≥n con los principales).  Cuando introduje este componente en el juego, advert√≠ que esta soluci√≥n es temporal.  Luego arroj√© tanta informaci√≥n nueva sobre el lector que cualquier tedio adicional podr√≠a llevar a una exclamaci√≥n: "Bueno, estos FPGA, ¬°todo es tan complicado aqu√≠!"  Ahora ya estamos construyendo sistemas de procesadores de manera f√°cil y natural, todas las cosas terribles han quedado atr√°s.  Es hora de descubrir c√≥mo puede hacer su propio componente, lo que le permite aumentar la frecuencia de reloj tanto del procesador como de los perif√©ricos conectados a √©l. <br><br><img src="https://habrastorage.org/webt/cw/bq/hz/cwbqhzbsc0zb9fvgee5j7_7gyqw.png"><br><a name="habracut"></a><br><h4>  Art√≠culos anteriores de la serie: </h4><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desarrollo del "firmware" m√°s simple para FPGAs instalados en Redd, y depuraci√≥n utilizando la prueba de memoria como ejemplo.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desarrollo del "firmware" m√°s simple para FPGAs instalados en Redd.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2. C√≥digo del programa.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desarrollo de su propio n√∫cleo para incrustar en un sistema de procesador basado en FPGA.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Desarrollo de programas para el procesador central Redd sobre el ejemplo de acceso a la FPGA.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los primeros experimentos utilizando el protocolo de transmisi√≥n en el ejemplo de la conexi√≥n de la CPU y el procesador en el FPGA del complejo Redd.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Merry Quartusel, o c√≥mo el procesador ha llegado a tal vida.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M√©todos de optimizaci√≥n de c√≥digo para Redd.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1: efecto cach√©.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M√©todos de optimizaci√≥n de c√≥digo para Redd.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2: memoria no almacenada en cach√© y operaci√≥n de bus paralelo.</a> </li></ol><br><h2>  Un poco de razonamiento te√≥rico. </h2><br>  Calculemos qu√© frecuencia podemos establecer sin dolor para el reloj de todo nuestro hierro.  El chip SDRAM utilizado en el complejo permite una frecuencia l√≠mite de 133 MHz.  Para conocer las velocidades de reloj del procesador, consulte los <b>puntos de referencia de rendimiento de Nios II</b> .  All√≠, para nuestro FPGA Cyclone IV E, la frecuencia de n√∫cleo Nios II / f de 160 MHz est√° garantizada.  No soy partidario de exprimir todos los jugos del sistema, por lo que hablaremos sobre trabajar a una frecuencia de 100 MHz. <br><br>  Para ser honesto, todav√≠a no me ha inspirado la metodolog√≠a para calcular el cambio de frecuencia del reloj que figura en la secci√≥n <b>32.7.</b>  <b>Consideraciones de reloj, PLL y temporizaci√≥n de la</b> <b>Gu√≠a del usuario de IP de perif√©ricos integrados</b> , pero parece que no soy el √∫nico.  Al menos, una b√∫squeda larga en la red no me llev√≥ a art√≠culos que contuvieran resultados calculados de la misma manera, pero no a la frecuencia que se da en el documento principal (los mismos 50 MHz). <br><br>  Hay un art√≠culo interesante al que le dar√© un enlace directo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.emb4fun.de/fpga/nutos1/index.html</a> .  Uno podr√≠a referirse a √©l y decir "Hagamos como el autor", si no fuera por un "pero": el autor de este art√≠culo usa el bloque PLL (en ruso - PLL, y en el hogar - un convertidor de frecuencia), insertando su propio c√≥digo en VHDL.  Yo, como ya se se√±al√≥ en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo sobre el divertido Quartusel</a> , me adhiero a la ideolog√≠a de que el sistema de procesador debe estar en el nivel superior de la jerarqu√≠a del proyecto.  No se necesitan inserciones en ning√∫n idioma, ya sea VHDL o Verilog.  Recientemente, este enfoque m√≠o recibi√≥ otra confirmaci√≥n: tenemos un nuevo empleado, un estudiante que todav√≠a no habla Verilog, pero que tiene un gran c√≥digo para el complejo Redd, ya que el enfoque elegido lo permite. <br><br>  Resulta que simplemente tomamos como base que todo funciona para el autor con un desplazamiento de menos 54 grados (qu√© tipo de grados se describe en el art√≠culo, el enlace al que di el p√°rrafo anterior). <br><br>  A continuaci√≥n, preste atenci√≥n a otro art√≠culo interesante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">asral.unimap.edu.my/wp-content/uploads/2019/07/2019_IJEECS_Chan_Implementation-Camera-System.pdf</a> .  Todo funciona para los autores con un desplazamiento de menos 65 grados. <br><br>  Intentemos hacer que nuestro sistema use un valor de este rango.  Si durante la prueba diaria de RAM no hay un solo mal funcionamiento, dejaremos este valor como combate.  Tenemos el derecho, ya que el "firmware" desarrollado para Redd no ir√° a los Clientes, sino que se utilizar√° para necesidades internas y en cantidades por pieza.  En todo caso, siempre ser√° posible arreglar todo sin dificultades innecesarias (surgen dificultades cuando es necesario actualizar el "firmware" en miles de dispositivos vendidos, y simplemente de un Cliente remoto). <br><br><h2>  Nueva pieza de configuraci√≥n de hardware </h2><br>  Por alguna raz√≥n, me parece que el sistema de procesador para este art√≠culo es m√°s f√°cil de hacer desde cero que rehacer del anterior.  Justo c√≥mo demostrar el proceso de "torcer, torcer, querer confundir", refiri√©ndome constantemente a art√≠culos anteriores, prefiero mostrar todo desde el principio una vez m√°s.  Al mismo tiempo, arreglamos el material.  Entonces, comencemos. <br><br>  Al principio, se nos muestra un sistema completamente vac√≠o que contiene solo un reloj y una fuente de se√±al de reinicio. <br><br><img src="https://habrastorage.org/webt/7q/lb/nb/7qlbnbmbkenpbeqgwna6jk4jnn4.png"><br><br>  Por lo general, no cambio nada all√≠, pero hoy har√© una excepci√≥n.  No quiero distraerme con el circuito de reinicio, ya que seguiremos trabajando desde debajo del depurador.  Por lo tanto, cambiar√© la condici√≥n de reinicio del nivel a una diferencia negativa, y la pierna misma se anular√° posteriormente. <br><br><img src="https://habrastorage.org/webt/dg/wl/tq/dgwltqtfn-kmqrd7wln66eenqxa.png"><br><br>  Pero aqu√≠ la se√±al del reloj tiene una frecuencia de 50 MHz (esta frecuencia se establece por las caracter√≠sticas del generador soldado a la placa).  En el primero de los art√≠culos que mencion√© anteriormente, se utiliz√≥ el bloque PLL agregado al proyecto principal.  ¬øD√≥nde lo conseguimos aqu√≠?  ¬°Y aqu√≠ est√°! <br><br><img src="https://habrastorage.org/webt/08/oy/om/08oyom1okdqkzb2ifmkuzqnjjw0.png"><br><br>  Este es el mismo bloque, pero aqu√≠ no tenemos que incrustar ning√∫n c√≥digo en Verilog o VHDL.  ¬°Todo ya est√° insertado para nosotros!  Es cierto que la configuraci√≥n para diferentes tipos de FPGA difiere ligeramente m√°s que por completo.  M√°s precisamente, los par√°metros ajustables son m√°s o menos los mismos, pero est√°n ubicados en lugares fundamentalmente diferentes en los cuadros de di√°logo de configuraci√≥n.  Dado que el FPGA Cyclone IV E se usa en el complejo Redd, consideraremos la configuraci√≥n de esta opci√≥n. <br><br>  En la primera pesta√±a, reemplace la frecuencia de entrada con 50 MHz (por defecto era 100) y vaya a la siguiente pesta√±a (haga clic en Siguiente, para Cyclone IV E tenemos que hacer esto muchas veces). <br><br><img src="https://habrastorage.org/webt/w-/rd/um/w-rdummwtsajd7lb__-cdwzp5ko.png"><br><br>  Desactive las entradas y salidas adicionales.  No los necesitamos: <br><br><img src="https://habrastorage.org/webt/ed/0q/_o/ed0q_otou0y9f25tgvrlxmcpzgm.png"><br><br>  Nos saltamos las siguientes pesta√±as hasta que podamos configurar la salida C0.  All√≠ cambiamos el bot√≥n de opci√≥n para establecer la frecuencia e ingresar el valor de 100 MHz: <br><br><img src="https://habrastorage.org/webt/r0/lr/xp/r0lrxpaypyrhi9k3yvdhe8qaqp4.png"><br><br>  Con C1, las cosas son un poco m√°s complicadas.  Primero, seleccione la casilla de verificaci√≥n que dice que tambi√©n debe usarse.  En segundo lugar, establecemos de manera similar la frecuencia de 100 MHz.  Bueno, y en tercer lugar, establecemos el cambio de frecuencia.  ¬øCu√°l preguntar?  ¬øMenos 58 o menos 65?  Por supuesto, prob√© ambas opciones.  Ambos me han ganado.  Pero el argumento sobre el tema menos 58 parece un poco menos convincente, por lo que aqu√≠ recomendar√© ingresar el valor menos 65 grados (mientras que la automatizaci√≥n me dir√° que el valor real alcanzado ser√° menos 63 grados). <br><br><img src="https://habrastorage.org/webt/bc/p2/qq/bcp2qqfzxrhq5dnpg8xrkxeq4cm.png"><br><br>  Bueno, eso es todo.  Ahora puede pasar por el bot√≥n <b>Siguiente</b> hasta el final, o simplemente hacer clic en <b>Finalizar</b> .  Conectamos las entradas <b>inclk_interface</b> e <b>inclk_interface_reset</b> .  La salida <b>c0</b> se utilizar√° como reloj para todo el sistema.  La salida <b>c1 se</b> exporta para registrar el chip <b>sdram</b> .  En el futuro, deber√° recordar conectar el bus de datos a la entrada <b>pll_slave</b> .  Para el cicl√≥n V, esto no ser√≠a necesario. <br><br><img src="https://habrastorage.org/webt/d8/ka/fr/d8kafro1xgmvgyh2ofbytqoo7a0.png"><br><br><h2>  Otras piezas de ferreter√≠a, solo para fijar material </h2><br>  Agregar un n√∫cleo de procesador.  Hoy, nuestra SDRAM estar√° sujeta a pruebas.  Por lo tanto, el c√≥digo no debe ubicarse en √©l.  Y esto, a su vez, significa que todo el c√≥digo se ubicar√° en la RAM interna de la FPGA.  Es decir, no necesitamos un cach√© de instrucciones.  Ap√°guelo, ahorrando memoria FPGA.  Tambi√©n conectamos un bus altamente conectado de instrucciones y datos.  No se requieren configuraciones m√°s interesantes para el n√∫cleo del procesador. <br><br><img src="https://habrastorage.org/webt/2s/h2/jz/2sh2jzypydrpub1i5pzsqfymbyc.png"><br><br>  Con el movimiento habitual de la mano, agregue dos bloques de RAM interna FPGA.  Uno es un puerto dual con una capacidad de 16 kilobytes y uno es un puerto √∫nico con una capacidad de 4 kilobytes.  C√≥mo nombrarlos y c√≥mo conectarse, espero que todos lo recuerden.  La √∫ltima vez que me gust√≥ resaltar los neum√°ticos con flores, quiz√°s para facilitar la lectura, lo har√© en este art√≠culo. <br><br><img src="https://habrastorage.org/webt/lu/fs/sh/lufsshayqwws2kmrbr1isy3bjow.png"><br><br>  No olvide asignar a estos bloques de memoria direcciones especiales en el rango personal y bloquearlos.  Deje que <b>CodeMemory</b> se asigne a 0x20000000 y <b>DataMemory</b> a 0x20004000. <br><br>  Bueno, agreguemos un bloque <b>SDRAM</b> al sistema, configur√°ndolo, as√≠ como bloques <b>JTAG-UART</b> para mostrar mensajes y un <b>GPIO de</b> un solo bit, en el que mediremos la frecuencia real para asegurarnos de que aumente.  Como referencia, aqu√≠ hay algunas configuraciones no obvias: <br><br><img src="https://habrastorage.org/webt/i3/eo/1h/i3eo1hx2p7ozz4h_9t026n6h-io.png"><br><br><img src="https://habrastorage.org/webt/t9/af/br/t9afbrimkhlvmd-n8qkhc08ol50.png"><br><br><img src="https://habrastorage.org/webt/hw/f3/gc/hwf3gcxo8y4dt4exehzc-v_qoli.png"><br><br>  Total, obtenemos un sistema de este tipo (destaqu√© el bus de datos, ya que escanea todos los dispositivos externos): <br><br><img src="https://habrastorage.org/webt/jq/km/rv/jqkmrvm8acbrz3gqqq_asxque_a.png"><br><br>  Asignamos vectores al procesador, asignamos direcciones autom√°ticamente, asignamos autom√°ticamente n√∫meros de interrupci√≥n al sistema generador. <br><br>  Conectamos el sistema al proyecto, hacemos un ensamblaje aproximado, asignamos los n√∫meros de los <b>tramos</b> , y esta vez hacemos virtual no solo <b>CKE</b> , sino tambi√©n <b>reset_n</b> (c√≥mo se hace esto, dije en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">uno de los art√≠culos anteriores</a> , busque Virtual Pin all√≠).  Hacemos el montaje final, llenamos el equipo en el FPGA.  Eso es todo.  Hemos terminado el equipo, ve a la parte de software. <br><br><h2>  Creamos BSP para nuestro entorno. </h2><br>  Para variar, creemos un proyecto basado en una plantilla no de <b>Hello World Small</b> , sino de <b>Memory Test Small</b> : <br><br><img src="https://habrastorage.org/webt/fh/bf/zj/fhbfzjbc6dqxyirgnhffs5nmzmw.png"><br><br>  Cuando se cre√≥, vaya al editor BSP.  Como de costumbre, lo primero que hacemos es desactivar la verificaci√≥n SysID y permitir el uso de C ++ (aunque esta vez no cambiar√© el tipo de archivo, pero ya es un h√°bito para m√≠): <br><br><img src="https://habrastorage.org/webt/ro/z3/4m/roz34m7na_mx3tzwawyu98qrrgs.png"><br><br>  Pero lo m√°s importante que tenemos que arreglar en la pesta√±a <b>Linker Script</b> .  Automation reconoci√≥ que el bus de instrucciones solo va a <b>CodeMemory</b> , por lo que coloc√≥ una secci√≥n de c√≥digo (llamada <b>.text</b> ) en <b>CodeMemory</b> .  Pero cuid√°ndonos, coloc√≥ todo lo dem√°s en la regi√≥n de datos m√°s grande, que se encuentra en <b>SDRAM</b> .  ¬øC√≥mo sab√≠a ella que borrar√≠amos sin piedad este recuerdo? <br><br><img src="https://habrastorage.org/webt/vo/tm/wq/votmwq4a0fiiu1irm0nud86hvwa.png"><br><br>  Tendremos que reemplazar manualmente, l√≠nea por l√≠nea, la regi√≥n con <b>DataMemory</b> (las listas de selecci√≥n aparecer√°n all√≠, la selecci√≥n debe reorganizarse en ellas).  Deber√≠amos obtener esta imagen: <br><br><img src="https://habrastorage.org/webt/-f/xf/gs/-fxfgskf00akgti0fab5r_nn-h0.png"><br><br><h2>  Experimentos del programa </h2><br>  Salimos del editor, generamos el BSP, intentamos ejecutar el programa para la depuraci√≥n.  Recibimos el siguiente texto: <br><br><img src="https://habrastorage.org/webt/wd/wo/w2/wdwow2im-i13rjmekzoj2ada9ag.png"><br><br>  Si presiono Enter, no tuve √©xito.  Ingres√© algo (s√≠, incluso un espacio) y luego presion√© Enter.  Entonces me preguntaron: <br><br><img src="https://habrastorage.org/webt/f8/or/rz/f8orrztu-bfgdmvrwfs5pmi6bag.png"><br><br>  Hora por hora no es m√°s f√°cil.  ¬øY en qu√© direcci√≥n ingresar?  Puede abrir Platform Designer y ver el valor all√≠.  Pero generalmente busco en el archivo de referencia universal system.h (la ruta completa para mi proyecto es C: \ Work \ CachePlay5 \ software \ MemoryTest_bsp \ system.h).  All√≠ nos interesan dos l√≠neas: <br><br><img src="https://habrastorage.org/webt/6s/jd/mn/6sjdmnjd-k-jpho1b21472e6xek.png"><br><br><div class="spoiler">  <b class="spoiler_title">Mismo texto</b> <div class="spoiler_text"><pre><code class="plaintext hljs">#define ALT_MODULE_CLASS_new_sdram_controller_0 altera_avalon_new_sdram_controller #define NEW_SDRAM_CONTROLLER_0_BASE 0x0 #define NEW_SDRAM_CONTROLLER_0_CAS_LATENCY 3 #define NEW_SDRAM_CONTROLLER_0_CONTENTS_INFO #define NEW_SDRAM_CONTROLLER_0_INIT_NOP_DELAY 0.0 #define NEW_SDRAM_CONTROLLER_0_INIT_REFRESH_COMMANDS 2 #define NEW_SDRAM_CONTROLLER_0_IRQ -1 #define NEW_SDRAM_CONTROLLER_0_IRQ_INTERRUPT_CONTROLLER_ID -1 #define NEW_SDRAM_CONTROLLER_0_IS_INITIALIZED 1 #define NEW_SDRAM_CONTROLLER_0_NAME "/dev/new_sdram_controller_0" #define NEW_SDRAM_CONTROLLER_0_POWERUP_DELAY 100.0 #define NEW_SDRAM_CONTROLLER_0_REFRESH_PERIOD 15.625 #define NEW_SDRAM_CONTROLLER_0_REGISTER_DATA_IN 1 #define NEW_SDRAM_CONTROLLER_0_SDRAM_ADDR_WIDTH 0x18 #define NEW_SDRAM_CONTROLLER_0_SDRAM_BANK_WIDTH 2 #define NEW_SDRAM_CONTROLLER_0_SDRAM_COL_WIDTH 9 #define NEW_SDRAM_CONTROLLER_0_SDRAM_DATA_WIDTH 16 #define NEW_SDRAM_CONTROLLER_0_SDRAM_NUM_BANKS 4 #define NEW_SDRAM_CONTROLLER_0_SDRAM_NUM_CHIPSELECTS 1 #define NEW_SDRAM_CONTROLLER_0_SDRAM_ROW_WIDTH 13 #define NEW_SDRAM_CONTROLLER_0_SHARED_DATA 0 #define NEW_SDRAM_CONTROLLER_0_SIM_MODEL_BASE 0 #define NEW_SDRAM_CONTROLLER_0_SPAN 33554432 #define NEW_SDRAM_CONTROLLER_0_STARVATION_INDICATOR 0</code> </pre> <br></div></div><br>  donde el decimal 33554432 es igual a hexadecimal 0x2000000.  Por lo tanto, mis respuestas y el resultado del trabajo deber√≠an verse as√≠: <br><br><img src="https://habrastorage.org/webt/4a/uq/tz/4auqtz8lgb-ql61btoxiqbskzfk.png"><br><br>  Genial, pero esto no es bueno para una prueba diaria.  Reescrib√≠ la funci√≥n <b>principal de</b> esta manera: <br><br><pre> <code class="plaintext hljs">int main(void) { int step = 0; while (1) { if (step++%100 == 0) { alt_printf ("."); } if (MemTestDevice(NEW_SDRAM_CONTROLLER_0_BASE, NEW_SDRAM_CONTROLLER_0_SPAN)!=0) { printf ("*"); } } return (0); }</code> </pre><br>  Los puntos indican que el programa no se "congel√≥".  Si hay un error, se mostrar√° un asterisco.  Para mayor confiabilidad, puede poner un punto de interrupci√≥n en su salida, luego simplemente no lo duerma. <br><br>  Es cierto que los puntos "izquierdos" subieron desde alg√∫n lugar.  Result√≥ que se muestran dentro de la funci√≥n <b>MemTestDevice ()</b> .  All√≠ borr√© su conclusi√≥n.  La prueba fue exitosa.  El sistema resultante puede usarse, al menos para necesidades internas (es decir, tales desarrollos se llevan a cabo bajo el complejo Redd). <br><br><h2>  Comprobaci√≥n del rendimiento del sistema </h2><br>  Pero ya estoy acostumbrado al hecho de que cuando trabajas con equipos no puedes confiar en nada.  Todo debe ser revisado cuidadosamente.  Asegur√©monos de que trabajamos con una frecuencia duplicada en comparaci√≥n con los art√≠culos anteriores.  Agregue la conocida funci√≥n MagicFunction1 (). <br><br><div class="spoiler">  <b class="spoiler_title">D√©jame recordarte c√≥mo se ve.</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void MagicFunction1() { IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); IOWR (PIO_0_BASE,0,1); IOWR (PIO_0_BASE,0,0); }</code> </pre><br></div></div><br>  Lo llamaremos desde <b>main ()</b> , captaremos los pulsos en el osciloscopio, pero esta vez prestaremos atenci√≥n no solo a su belleza, sino tambi√©n a la frecuencia (perm√≠tame recordarle que cada ca√≠da, incluso arriba, abajo, es un comando, por lo que puede medir la distancia entre las gotas ) <br><br><img src="https://habrastorage.org/webt/sm/pt/xf/smptxfb1x4sub0-v-6lbu7wkdpy.png"><br><br>  Solo 50 megahercios.  ¬øLa frecuencia realmente no ha aumentado?  Compare con la frecuencia del c√≥digo desarrollado al escribir el √∫ltimo art√≠culo, y entendemos que todo est√° en orden.  Es solo que la unidad pio normal requiere 2 ciclos de reloj por salida al puerto (en una casera obtuve 1 reloj, pero aqu√≠ es suficiente para asegurarnos de que el rendimiento del sistema se duplique). <br><br><img src="https://habrastorage.org/webt/w3/in/uo/w3inuobmvzdoa7pebgadrjigute.png"><br><br><h2>  Conclusi√≥n </h2><br>  En lugar de usar un oscilador de frecuencia fija, aprendimos a usar una unidad PLL personalizada.  Es cierto que las constantes detectadas est√°n destinadas a una frecuencia de 100 MHz, pero todos pueden ajustarlas a cualquier otra frecuencia ya sea utilizando c√°lculos bien conocidos o por prueba y error.  Tambi√©n fortalecimos las habilidades de crear un sistema de procesador √≥ptimo y nos aseguramos de que la memoria a una frecuencia m√°s alta funcione de manera estable, y la frecuencia realmente aument√≥. <br><br>  En general, ya podemos producir cualquier cosa inform√°tica, incluso podemos intercambiar con el procesador central, pero el procesador central del complejo se encargar√° de los c√°lculos triviales de manera m√°s eficiente.  FPGA se agrega a Redd para implementar cualquier interfaz de alta velocidad o capturar (bien o reproducir) flujos de informaci√≥n.  Ya hemos dominado los conceptos b√°sicos del dise√±o, hemos aprendido a proporcionar un rendimiento m√°s o menos alto.  Es hora de seguir trabajando con interfaces, que es lo que haremos en el pr√≥ximo art√≠culo.  M√°s precisamente, un conjunto de art√≠culos, conscientes de la regla "un art√≠culo, una cosa". </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/469985/">https://habr.com/ru/post/469985/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../469975/index.html">Camino de santiago con laptop</a></li>
<li><a href="../469977/index.html">C√≥mo tres compa√±eros de clase se convirtieron en socios de Facebook - historia de Revealbot</a></li>
<li><a href="../469979/index.html">Registros de informes del segundo iOS mitap Redmadrobot</a></li>
<li><a href="../469981/index.html">¬øQu√© hay dentro del chat bot?</a></li>
<li><a href="../469983/index.html">¬øC√≥mo crear una estrategia para vencer el envejecimiento?</a></li>
<li><a href="../469987/index.html">Las 20 principales compa√±√≠as de desarrollo del mercado de todo el mundo</a></li>
<li><a href="../469991/index.html">Procesamos pedidos de la tienda en l√≠nea usando RabbitMQ y TypeScript</a></li>
<li><a href="../469995/index.html">Analizador Python SAX vs analizador Python DOM. Parsim FIAS-casas</a></li>
<li><a href="../469997/index.html">¬øQu√© titulares tienen m√°s probabilidades de llamar la atenci√≥n o el an√°lisis de HabraHabr?</a></li>
<li><a href="../469999/index.html">C√≥mo negocian los servidores entre s√≠: algoritmo de consenso distribuido Raft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>