<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öïÔ∏è üö¥üèø üë¶ Parameterverwaltung in Gesch√§ftsanwendungen √§hnlich einem Versionskontrollsystem üõÅ üïß üé∂</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In verschiedenen Anwendungen besteht die Aufgabe regelm√§√üig darin, die Logik der zeitlichen √Ñnderung eines Attributs eines Objekts relativ zu einem be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Parameterverwaltung in Gesch√§ftsanwendungen √§hnlich einem Versionskontrollsystem</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lsfusion/blog/468553/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ht/ww/gi/htwwgiirud8bctw_f6ndjlbsoee.jpeg" alt="Bild"></div><br>  In verschiedenen Anwendungen besteht die Aufgabe regelm√§√üig darin, die Logik der zeitlichen √Ñnderung eines Attributs eines Objekts relativ zu einem bestimmten Subjekt (oder Subjekten) zu unterst√ºtzen.  Dies kann beispielsweise eine √Ñnderung des Einzelhandelspreises von Waren in Gesch√§ften oder KPI-Indikatoren f√ºr Mitarbeiter sein. <br><br>  In diesem Artikel werde ich zeigen, welche Dom√§nenlogik und Schnittstellen erstellt werden k√∂nnen, um dieses Problem zu l√∂sen.  Ich werde sofort reservieren, dass dies den Einfluss des Benutzers auf das Attribut und nicht die Reflexion der historischen √Ñnderung betrifft. <br><br>  Die Implementierung wird auf der Grundlage der offenen und kostenlosen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lsFusion-</a> Plattform vorgestellt. Ein √§hnliches Schema kann jedoch angewendet werden, wenn eine andere Technologie verwendet wird. <br><a name="habracut"></a><br><h3>  Einf√ºhrung </h3><br>  F√ºr eine einfachere Darstellung und ein einfacheres Verst√§ndnis des Artikels nehmen wir den Preis als Attribut, das Produkt als Objekt und das Lager als Thema.  In diesem Fall ist das Datum das minimal m√∂gliche Intervall zum Festlegen des Attributs.  Auf diese Weise kann der Benutzer den Preis f√ºr ein bestimmtes Datum f√ºr ein Produkt und ein Lager bestimmen. <br><br>  Das Benutzereingabeschema f√ºr Preis√§nderungen √§hnelt dem in klassischen Versionskontrollsystemen verwendeten.  Jede √Ñnderung aus Sicht der Dom√§nenlogik ist ein einzelnes <i>Commit</i> , auf dessen Grundlage der Status f√ºr ein bestimmtes Datum berechnet wird.  In vielen Themenbereichen werden solche Commits als Dokumente oder Transaktionen bezeichnet.  In diesem Fall meinen wir mit diesem Commit die sogenannte Preisliste.  In jeder Preisliste sind die darin enthaltenen Waren und Lager sowie die G√ºltigkeitsdauer angegeben. <br><br>  Das beschriebene Schema hat folgende Vorteile: <br><br><ul><li>  <b>Atomizit√§t</b> .  Jede √Ñnderung wird als separates Dokument ausgestellt.  Daher k√∂nnen diese Dokumente vor√ºbergehend gespeichert, aber nicht gebucht werden.  Wenn Sie es falsch eingeben, ist es einfach, die gesamte √Ñnderung zur√ºckzusetzen. </li><li>  <b>Transparenz</b>  Es ist einfach festzustellen, wer die √Ñnderung wann vorgenommen hat, und den Grund anzugeben, indem Sie einen Kommentar zum Dokument abgeben. </li></ul><br>  Der Hauptunterschied zum Versionskontrollsystem besteht darin, dass explizite Festschreibungen unabh√§ngig voneinander sind.  Somit ist es jederzeit m√∂glich, alle Commits relativ schmerzlos zu l√∂schen.  Dar√ºber hinaus kann jedes dieser Commits so eingestellt werden, dass es endet, wenn es nicht mehr funktioniert, was nat√ºrlich nicht im Versionskontrollsystem enthalten ist. <br><br><h3>  Implementierung </h3><br>  Wir beginnen die Definition der Dom√§nenlogik mit Lagern.  Lassen Sie uns die L√∂sung etwas komplizieren, indem wir Lager zu einer Hierarchie einer Gruppe dynamischer Tiefen kombinieren.  Nach welchem ‚Äã‚ÄãPrinzip dies geschieht, wird im entsprechenden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> beschrieben. Daher gebe ich nur einen Code an, der Gruppen deklariert und Formulare zum Bearbeiten erstellt: <br><br><div class="spoiler">  <b class="spoiler_title">Ank√ºndigung der Lagergruppe</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td><code><font color="#a626a4">CLASS</font> Group <font color="#50a14f">' '</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Group); <br> <br> parent = <font color="#a626a4">DATA</font> Group (Group); <br> nameParent <font color="#50a14f">' '</font> (Group g) = name(parent(g)); <br> <br> level <font color="#50a14f">''</font> (Group child, Group parent) = <br> <font color="#a626a4">RECURSION</font> <font color="#986801">1l</font> <font color="#a626a4">IF</font> child <font color="#a626a4">IS</font> Group <font color="#a626a4">AND</font> parent = child <br> <font color="#a626a4">STEP</font> <font color="#986801">2l</font> <font color="#a626a4">IF</font> parent = parent($parent) <font color="#a626a4">MATERIALIZED</font> ; <br> <br> <font color="#a626a4">FORM</font> group <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> g = Group <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (g) name, nameParent <br> <br> <font color="#a626a4">EDIT</font> Group <font color="#a626a4">OBJECT</font> g <br> ; <br> <br> <font color="#a626a4">FORM</font> groups <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> g = Group <br> <font color="#a626a4">PROPERTIES</font> (g) <font color="#a626a4">READONLY</font> name, nameParent <br> <font color="#a626a4">PROPERTIES</font> (g) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Group <font color="#a626a4">OBJECT</font> g <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> groups; <br> } <br></code> </td></tr></tbody></table></div></div></div><br><div class="spoiler">  <b class="spoiler_title">Beispiel f√ºr eine Gruppenhierarchie</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/fh/5e/ct/fh5ect60pun-rowwwblr7uucr9w.png" alt="Bild"></div><br></div></div><br>  Als n√§chstes deklarieren Sie Lagerh√§user, die an eine der Gruppen gebunden werden k√∂nnen: <br><br><div class="spoiler">  <b class="spoiler_title">Warehouse-Ank√ºndigung</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">CLASS</font> Stock <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Stock); <br> <br> group <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> Group (Stock); <br> nameGroup <font color="#50a14f">''</font> (Stock st) = name(group(st)); <br> <br> <font color="#a626a4">FORM</font> stock <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> s = Stock <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (s) name, nameGroup <br> <br> <font color="#a626a4">EDIT</font> Stock <font color="#a626a4">OBJECT</font> s <br> ; <br> <br> <font color="#a626a4">FORM</font> stocks <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> s = Stock <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">READONLY</font> name, nameGroup <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Stock <font color="#a626a4">OBJECT</font> s <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> stocks; <br> } <br></code> </td></tr></tbody></table></div><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Lagerbeispiel</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/30/mc/iy/30mciyqfgm2bjiu9_-fonon1mga.png" alt="Bild"></div><br></div></div><br>  Und schlie√ülich erkl√§ren Sie die Logik der Waren: <br><br><div class="spoiler">  <b class="spoiler_title">Produktank√ºndigung</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">CLASS</font> Product <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Product); <br> <br> <font color="#a626a4">FORM</font> product <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> p = Product <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (p) name <br> <br> <font color="#a626a4">EDIT</font> Product <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">FORM</font> products <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> p = Product <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">READONLY</font> name <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Product <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> products; <br> } <br></code> </td></tr></tbody></table></div></div></div><br><div class="spoiler">  <b class="spoiler_title">Produktbeispiel</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3g/sz/y6/3gszy6zobgdvqnmtzqzoynhdrzw.png" alt="Bild"></div><br></div></div><br>  Wir fahren direkt mit der Erstellung der Logik von Preislisten fort.  Zun√§chst legen wir die <i>Preislistenklasse</i> selbst sowie deren G√ºltigkeitsdauer fest: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">CLASS</font> PriceList <font color="#50a14f">'-'</font> ; <br> fromDate <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (PriceList); <br> toDate <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (PriceList);</code> </td> </tr></tbody></table></div>  Wir glauben, dass die Preisliste endlos ist, wenn kein <i>Datum</i> festgelegt wurde. <br>  Wir f√ºgen ein Ereignis hinzu, das beim Erstellen der Preisliste automatisch das aktuelle Datum festlegt, ab dem die Inbetriebnahme beginnt. <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">WHEN</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">SET</font> (PriceList p <font color="#a626a4">IS</font> PriceList) <font color="#a626a4">DO</font> <br> fromDate(p) &lt;- currentDate(); <br></code> </td></tr></tbody></table></div>  Das Schl√ºsselwort <i>LOCAL</i> bedeutet, dass das Ereignis nicht ausgel√∂st wird, wenn das Speichern auf die Datenbank angewendet wird, sondern sofort, wenn die √Ñnderung vorgenommen wird. <br><br>  F√ºgen Sie dann den Benutzer, der es erstellt hat, und die Erstellungszeit hinzu: <br><div class="scrollable-table"><table><tbody><tr><td> <code>createdTime <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATETIME</font> (PriceList); <br> createdUser = <font color="#a626a4">DATA</font> User (PriceList); <br> nameCreatedUser <font color="#50a14f">''</font> (PriceList p) = name(createdUser(p)); <br></code> </td></tr></tbody></table></div>  Erstellen Sie nun ein Ereignis, das sie automatisch ausf√ºllt: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">WHEN</font> <font color="#a626a4">SET</font> (PriceList p <font color="#a626a4">IS</font> PriceList) <font color="#a626a4">DO</font> { <br> createdTime(p) &lt;- currentDateTime(); <br> createdUser(p) &lt;- currentUser(); <br> } <br></code> </td></tr></tbody></table></div>  Dieses Ereignis wird im Gegensatz zum vorherigen nur ausgel√∂st, wenn auf die Schaltfl√§che Speichern geklickt wird.  Das hei√üt, w√§hrend einer Sicherungstransaktion in der Datenbank. <br><br>  Erstellen Sie als N√§chstes die Preislistenzeilen, in denen die Waren und Preise festgelegt werden: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">CLASS</font> PriceListDetail <font color="#50a14f">' -'</font> ; <br> priceList = <font color="#a626a4">DATA</font> PriceList (PriceListDetail) <font color="#a626a4">NONULL</font> <font color="#a626a4">DELETE</font> ; <br> <br> product = <font color="#a626a4">DATA</font> Product (PriceListDetail); <br> nameProduct <font color="#50a14f">''</font> (PriceListDetail d) = name(product(d)); <br> <br> price <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">10</font> , <font color="#986801">2</font> ] (PriceListDetail); <br></code> </td></tr></tbody></table></div>  Das Attribut <i>NONULL</i> gibt an, dass die Eigenschaft <i>priceList</i> immer festgelegt werden soll, und <i>DELETE</i> gibt an, dass die entsprechende Zeile automatisch gel√∂scht werden soll, wenn der Eigenschaftswert auf Null gesetzt wird (z. B. beim L√∂schen der Preisliste). <br><br>  F√ºr die zuk√ºnftige Verwendung erstellen wir Eigenschaften, die den G√ºltigkeitszeitraum der Preislistenzeilen bestimmen: <br><div class="scrollable-table"><table><tbody><tr><td> <code>fromDate <font color="#50a14f">' '</font> (PriceListDetail d) = fromDate(priceList(d)); <br> toDate <font color="#50a14f">' '</font> (PriceListDetail d) = toDate(priceList(d)); <br></code> </td></tr></tbody></table></div>  Jetzt binden wir die Preisliste an die Lager, f√ºr die sie betrieben wird.  F√ºgen Sie zun√§chst die prim√§re Eigenschaft hinzu. Dies ist der Fall, wenn die gesamte Gruppe von Lagern in der Preisliste enthalten ist: <br><div class="scrollable-table"><table><tbody><tr><td> <code>dataIn <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">BOOLEAN</font> (PriceList, Group); <br></code> </td></tr></tbody></table></div>  Wir berechnen die ‚ÄûEinbeziehung‚Äú der Gruppe unter Ber√ºcksichtigung der ausgew√§hlten Eltern (wie im Artikel √ºber Hierarchien beschrieben): <br><div class="scrollable-table"><table><tbody><tr><td> <code>in <font color="#50a14f">' ()'</font> (PriceList p, Group child) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">LAST</font> dataIn(p, Group parent) <font color="#a626a4">ORDER</font> <font color="#a626a4">DESC</font> level(child, parent) <font color="#a626a4">WHERE</font> dataIn(p, parent); <br></code> </td></tr></tbody></table></div>  F√ºgen Sie die prim√§re Eigenschaft hinzu, mit der Sie angeben k√∂nnen, dass die Preisliste f√ºr ein bestimmtes Lager gilt: <br><div class="scrollable-table"><table><tbody><tr><td> <code>dataIn <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">BOOLEAN</font> (PriceList, Stock); <br></code> </td></tr></tbody></table></div>  Wir berechnen die endg√ºltige Eigenschaft, die bestimmt, dass die Preisliste die Preise im entsprechenden Lager √§ndert, unter Ber√ºcksichtigung der Gruppen: <br><div class="scrollable-table"><table><tbody><tr><td> <code>in <font color="#50a14f">''</font> (PriceList p, Stock s) = dataIn(p, s) <font color="#a626a4">OR</font> in(p, group(s)); <br></code> </td></tr></tbody></table></div>  Erstellen Sie eine Eigenschaft, in der die Namen aller ausgew√§hlten Gruppen und Lager der Preisliste angezeigt werden, damit ein bequemerer Benutzer die Liste der Preislisten anzeigen kann: <br><div class="scrollable-table"><table><tbody><tr><td> <code>stocks <font color="#50a14f">''</font> (PriceList p) = <font color="#a626a4">CONCAT</font> <font color="#50a14f">' / '</font> , <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">CONCAT</font> name(Group g) <font color="#a626a4">IF</font> dataIn(p, g), <font color="#50a14f">','</font> <font color="#a626a4">ORDER</font> g, <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">CONCAT</font> name(Stock s) <font color="#a626a4">IF</font> dataIn(p, s), <font color="#50a14f">','</font> <font color="#a626a4">ORDER</font> s <br> <font color="#a626a4">CHARWIDTH</font> <font color="#986801">30</font> ; <br></code> </td></tr></tbody></table></div>  Der letzte Schritt in der Beschreibung der Dom√§nenlogik berechnet direkt den aktuellen Preis der Waren im Lager.  Erstellen Sie dazu eine Eigenschaft, die die letzte Datumszeile der Preisliste mit der gew√ºnschten Ware, dem gew√ºnschten Lager und dem gew√ºnschten G√ºltigkeitszeitraum findet: <br><div class="scrollable-table"><table><tbody><tr><td> <code>priceListDetail (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">LAST</font> PriceListDetail d <br> <font color="#a626a4">ORDER</font> fromDate(d), d <br> <font color="#a626a4">WHERE</font> product(d) = p <font color="#a626a4">AND</font> in(priceList(d), s) <font color="#a626a4">AND</font> <br> fromDate(d) &lt;= dt <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> toDate(d) &lt; dt; <br></code> </td></tr></tbody></table></div>  In der Logik der Berechnung dieser Eigenschaft sind verschiedene Variationen m√∂glich.  Sie k√∂nnen sowohl den Filter f√ºr das Schlagen von Zeilen (z. B. das Hinzuf√ºgen einer Bedingung in <i>WHERE</i> , in der die Preisliste ver√∂ffentlicht wird) als auch die Bestellung √§ndern.  Es ist zu beachten, dass das Objekt selbst oder vielmehr seine interne Kennung durch den zweiten Parameter zur Auswahlreihenfolge hinzugef√ºgt wurde.  Dies ist notwendig, damit der Preiswert immer eindeutig bestimmt wird. <br><br>  Basierend auf der erhaltenen Preislistenzeile bestimmen wir den Preiswert und dessen G√ºltigkeitsdauer: <br><div class="scrollable-table"><table><tbody><tr><td> <code>price <font color="#50a14f">''</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = price(priceListDetail(p, s, dt)); <br> fromDate <font color="#50a14f">' '</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = fromDate(priceListDetail(p, s, dt)); <br> toDate <font color="#50a14f">' '</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = toDate(priceListDetail(p, s, dt)); <br></code> </td></tr></tbody></table></div>  Sie werden in Benutzeroberfl√§chentabellen weiter verwendet. <br><br>  Als n√§chstes fahren wir mit dem Aufbau der Benutzeroberfl√§che fort.  Zuerst zeichnen wir ein Formular zum Bearbeiten der Preisliste.  Erstellen Sie ein Formular und f√ºgen Sie dort die ‚ÄûKopfzeile‚Äú des Dokuments hinzu: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">FORM</font> priceList <font color="#50a14f">'-'</font> <br> <font color="#a626a4">OBJECTS</font> p = PriceList <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (p) fromDate, toDate <br> <br> <font color="#a626a4">EDIT</font> PriceList <font color="#a626a4">OBJECT</font> p <br> ; <br></code> </td></tr></tbody></table></div>  F√ºgen Sie die Preislistenzeile zum Formular hinzu: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> priceList <br> <font color="#a626a4">OBJECTS</font> d = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> (d) nameProduct, price <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">NEW</font> , <font color="#a626a4">DELETE</font> <br> <font color="#a626a4">FILTERS</font> priceList(d) = p <br> ; <br></code> </td></tr></tbody></table></div>  F√ºgen Sie als N√§chstes einen Baum hinzu, in dem sich sowohl Gruppen als auch Lager befinden: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> priceList <br> <font color="#a626a4">TREE</font> stocks g = Group <font color="#a626a4">PARENT</font> parent, s = Stock <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(g), name(s) <br> <font color="#a626a4">PROPERTIES</font> dataIn(p, g), in(p, g) <br> <font color="#a626a4">PROPERTIES</font> dataIn(p, s), in(p, s) <br> <font color="#a626a4">FILTERS</font> group(s) = g <br> ; <br></code> </td></tr></tbody></table></div>  Gleichzeitig werden dem Baum Eigenschaften f√ºr Gruppen und Lager hinzugef√ºgt.  Die Plattform zeigt diese oder jene Eigenschaft je nach Objekt in der Reihenfolge an, in der sie dem Formular hinzugef√ºgt wurden. <br><br>  Wir passen das Design des Formulars so an, dass Waren und Lager in separaten Registerkarten gezeichnet werden: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">DESIGN</font> priceList { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">TABBED</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d) { caption = <font color="#50a14f">''</font> ; } <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> ( <font color="#a626a4">TREE</font> stocks) { caption = <font color="#50a14f">''</font> ; } <br> } <br> } <br> } <br></code> </td></tr></tbody></table></div>  Das Bearbeitungsformular sieht folgenderma√üen aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nr/dc/l9/nrdcl9twis0_96fwj8lhz2sb1w4.png" alt="Bild"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rl/0c/qj/rl0cqj4vcyhb80a0rignrd3yt0w.png" alt="Bild"></div><br>  Es bleibt die Grundform des Preismanagements aufzubauen.  Es besteht aus zwei Registerkarten.  Die erste zeigt eine Liste aller Preislisten (√§hnlich der Liste der Commits).  Auf der zweiten Registerkarte werden die aktuellen Preise f√ºr ein bestimmtes Lager f√ºr das ausgew√§hlte Datum angezeigt. <br><br>  Um die erste Registerkarte zu implementieren, f√ºgen Sie dem Formular eine Liste mit Preislisten mit Zeilen f√ºr eine schnelle Vorschau hinzu: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">FORM</font> managePrices <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> p = PriceList <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">READONLY</font> fromDate, toDate, stocks, createdTime, nameCreatedUser <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">OBJECTS</font> d = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">READONLY</font> nameProduct, price <br> <font color="#a626a4">FILTERS</font> priceList(d) = p <br> ; <br></code> </td></tr></tbody></table></div>  F√ºr die zweite Registerkarte f√ºgen wir zun√§chst das Datum hinzu, an dem die Preise angezeigt werden, den Baum der Lagergruppen sowie die Lager selbst: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> dt = <font color="#a626a4">DATE</font> <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">VALUE</font> (dt) <br> <br> <font color="#a626a4">TREE</font> groups g = Group <font color="#a626a4">PARENT</font> parent <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(g) <br> <br> <font color="#a626a4">OBJECTS</font> s = Stock <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">READONLY</font> name, nameGroup <br> <font color="#a626a4">FILTERS</font> level(group(s), g) <br> ; <br></code> </td></tr></tbody></table></div>  In der Liste der Lager werden alle Lager angezeigt, die Nachkommen der oben ausgew√§hlten Gruppe sind. <br><br>  F√ºgen Sie als N√§chstes dem Formular eine Liste der Waren hinzu, f√ºr die zum ausgew√§hlten Datum g√ºltige Preise f√ºr das Lager gelten: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> pr = Product <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(pr), price(pr, s, dt), fromDate(pr, s, dt), toDate(pr, s, dt) <br> <font color="#a626a4">FILTERS</font> price(pr, s, dt) <br> ; <br></code> </td></tr></tbody></table></div>  Sowohl der Preis selbst als auch die G√ºltigkeitsdauer werden zu den Spalten hinzugef√ºgt.  Sie k√∂nnen auch die Preislistennummer hinzuf√ºgen. Diese Tabelle √§hnelt dann der Logik von Anmerkungen in Versionskontrollsystemen. <br><br>  Damit der Benutzer verstehen kann, woher ein solcher Preis stammt, f√ºgen wir die Liste der Preislistenzeilen mit geeigneten Waren und Lagern hinzu: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> prd = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> <font color="#a626a4">BACKGROUND</font> (priceListDetail(pr, s, dt) = prd) <br> fromDate(prd), toDate(prd), <font color="#50a14f">''</font> = stocks(priceList(prd)), price(prd) <br> <font color="#a626a4">FILTERS</font> product(prd) = pr <font color="#a626a4">AND</font> in(priceList(prd), s) <br> ; <br></code> </td></tr></tbody></table></div>  <i>Markieren Sie mit dem</i> Attribut <i>HINTERGRUND</i> die Zeile, in der der in der Tabelle angegebene Preis ermittelt wurde. <br><br>  Zur Vereinfachung des Benutzers werden wir au√üerdem die M√∂glichkeit hinzuf√ºgen, das Bearbeitungsformular der entsprechenden Preisliste in einer neuen Sitzung unmittelbar aus dieser Geschichte heraus zu √∂ffnen: <br><div class="scrollable-table"><table><tbody><tr><td> <code>edit (PriceListDetail d) + { edit(priceList(d)); } <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">PROPERTIES</font> (prd) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">EDIT</font> <br> ; <br></code> </td></tr></tbody></table></div>  Um dies zu erreichen, m√ºssen Sie die Aktion angeben, die ausgef√ºhrt wird, wenn Sie versuchen, eine Zeile zu bearbeiten, indem Sie die integrierte <i>Bearbeitungsaktion</i> implementieren.  Anschlie√üend wird dem Formular auf standardm√§√üige Weise eine Standardschaltfl√§che zum Bearbeiten eines Objekts √ºber einen Dialogaufruf hinzugef√ºgt. <br><br>  Und schlie√ülich bilden wir das endg√ºltige Design des Formulars: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">DESIGN</font> managePrices { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">TABBED</font> ; <br> <font color="#a626a4">NEW</font> priceLists { <br> caption = <font color="#50a14f">'-'</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (p); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d); <br> } <br> <font color="#a626a4">NEW</font> prices { <br> caption = <font color="#50a14f">''</font> ; <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">SPLITH</font> ; <br> <font color="#a626a4">NEW</font> leftPane { <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (dt); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> ( <font color="#a626a4">TREE</font> groups); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (s); <br> } <br> <font color="#a626a4">NEW</font> rightPane { <br> fill = <font color="#986801">3</font> ; <br> type = <font color="#a626a4">SPLITV</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (pr) { fill = <font color="#986801">3</font> ; } <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (prd); <br> } <br> } <br> } <br> } <br> } <br></code> </td></tr></tbody></table></div>  Hier wird zuerst der <i>Fenstercontainer</i> hinzugef√ºgt, der aus zwei Registerkarten besteht: <i>Preislisten</i> und <i>Preise</i> .  Der erste von ihnen f√ºgt nur eine Liste von Preislisten und Zeilen hinzu.  Im zweiten werden zwei Bedienfelder erstellt: <i>leftPane</i> und <i>rightPane</i> .  Das linke Feld enth√§lt das Datum und die Lager, und das rechte Feld enth√§lt die Waren- und Preishistorie. <br><br><h3>  Ergebnis </h3><br>  Betrachten Sie die Hauptoptionen f√ºr die Verwendung der resultierenden Logik. <br><br>  Angenommen, wir haben zwei separate Preislisten f√ºr verschiedene Warengruppen.  Abh√§ngig vom ausgew√§hlten Lager werden dann auf der Registerkarte mit den Preisen nur Produkte aus den entsprechenden Preislisten angezeigt: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fj/pq/nc/fjpqnc-cp2whdwy9ihbl-xboeqg.gif" alt="Bild"></div><br>  Erstellen Sie nun eine neue Preisliste mit einer begrenzten G√ºltigkeitsdauer, eine abgespeckte Liste der Lager und einen neuen Preis.  Wenn wir auf der zweiten Registerkarte ein Datum im Bereich der neuen Preisliste ausw√§hlen, erhalten wir einen neuen Preis daraus.  Sobald die G√ºltigkeitsdauer abl√§uft, kehrt der alte Preis wieder vom urspr√ºnglichen Preis zur√ºck: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jn/wm/om/jnwmom0uyge-bd2cr5d0oh7fvfu.gif" alt="Bild"></div><br>  Mit demselben Mechanismus k√∂nnen Sie die Aktion bestimmter Preise ab einem bestimmten Datum ‚Äûabbrechen‚Äú.  Wenn Sie beispielsweise einen neuen Preis eingeben, ohne einen Preis anzugeben, wird der Preis zur√ºckgesetzt und die Ware verschwindet aus dem Filter.  In diesem Fall kehrt beim L√∂schen des eingegebenen Dokuments alles in den alten Zustand zur√ºck: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rl/sf/0i/rlsf0ie34x-qwfhmdidm6qv7lpu.gif" alt="Bild"></div><br>  Das resultierende Eigentum mit dem Preis der Waren durch das Lager am Datum kann in verschiedenen Ereignissen oder anderen Formen weiter verwendet werden.  Sie k√∂nnen beispielsweise eine automatische Preisgestaltung in einer Bestellung basierend auf dieser Preislogik vornehmen: <br><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">WHEN</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">CHANGED</font> (sku(UserOrderDetail d)) <font color="#a626a4">OR</font> <font color="#a626a4">CHANGED</font> (stock(d)) <font color="#a626a4">OR</font> <font color="#a626a4">CHANGED</font> (dateTime(d)) <font color="#a626a4">DO</font> <br> price(d) &lt;- price(sku(d), stock(d), dateTime(d)); <br></code> </td></tr></tbody></table></div>  Ein sch√∂ner Bonus in dieser Logik ist, dass beim Hinzuf√ºgen eines neuen Lagers zur Gruppe automatisch Preise aus bereits erstellten Preislisten darauf angewendet werden.  Das gleiche passiert, wenn Sie die Gruppe f√ºr das Lager √§ndern. <br><br>  Wenn Sie m√∂chten, k√∂nnen Sie die Spalte mit dem Preis auf der Registerkarte mit den aktuellen Preisen bearbeiten und eine Schaltfl√§che hinzuf√ºgen, mit der ein neues Commit f√ºr die ge√§nderten Preise erstellt wird. <br><br><h3>  Fazit </h3><br>  In der L√∂sung auf Plattformebene werden weder Nachschlagewerke noch Dokumente mit Zeichenfolgen, Register, Berichte und andere unn√∂tige Abstraktionen verwendet.  Alles wird ausschlie√ülich nach den Konzepten von Klassen und Eigenschaften durchgef√ºhrt.  Beachten Sie, dass diese ziemlich komplexe Logik in ungef√§hr 150 aussagekr√§ftigen Codezeilen auf lsFusion implementiert wurde.  Es ist eine viel schwierigere Aufgabe, es in derselben Formulierung auf anderen Plattformen (z. B. 1C) zu implementieren. <br><br>  Das oben beschriebene Schema wird h√§ufig in der auf lsFusion basierenden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ERP-L√∂sung verwendet</a> .  Mit verschiedenen Modifikationen werden Preislisten von Lieferanten, Management-Einzelhandelspreise, Lagerbest√§nde und viele andere Management-Parameter unterst√ºtzt. <br><br>  Die Vorlage kann kompliziert werden, indem dem Dokument mehrere Entit√§ten hinzugef√ºgt werden (z. B. kann dem Lager ein Lieferant hinzugef√ºgt werden) und mehrere Attribute gleichzeitig in einem Dokument definiert werden.  Insbesondere k√∂nnen Sie die Entit√§t Preistyp hinzuf√ºgen und in der Belegzeile den Preis f√ºr das Tupel der Zeile und den entsprechenden Preistyp festlegen.  In der oben beschriebenen Logik m√ºssen Sie einigen Eigenschaften nur einige zus√§tzliche Parameter hinzuf√ºgen. <br><br>  Mit Hilfe mehrerer zus√§tzlicher Codezeilen ist es m√∂glich, alle √Ñnderungsdatens√§tze in einer Tabelle zu denormalisieren, auf der der entsprechende Index erstellt werden kann.  Dann erfolgt die Auswahl eines beliebigen Wertes f√ºr ein beliebiges Datum in einer logarithmischen Zeit.  Eine solche Optimierung ist erforderlich, wenn diese Tabelle mehrere hundert Millionen Datens√§tze enth√§lt. <br><br>  Sie k√∂nnen das erstellte Beispiel online auf der entsprechenden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Seite der</a> Site (Abschnitt Plattform) ausprobieren.  Hier ist der gesamte Quellcode, den Sie in das gew√ºnschte Feld einf√ºgen m√ºssen: <br><br><div class="spoiler">  <b class="spoiler_title">Quellcode</b> <div class="spoiler_text"><div class="scrollable-table"><table><tbody><tr><td> <code><font color="#a626a4">REQUIRE</font> Authentication, Time; <br> <br> <font color="#a626a4">CLASS</font> Group <font color="#50a14f">' '</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Group); <br> <br> parent = <font color="#a626a4">DATA</font> Group (Group); <br> nameParent <font color="#50a14f">' '</font> (Group g) = name(parent(g)); <br> <br> level <font color="#50a14f">''</font> (Group child, Group parent) = <br> <font color="#a626a4">RECURSION</font> <font color="#986801">1l</font> <font color="#a626a4">IF</font> child <font color="#a626a4">IS</font> Group <font color="#a626a4">AND</font> parent = child <br> <font color="#a626a4">STEP</font> <font color="#986801">2l</font> <font color="#a626a4">IF</font> parent = parent($parent) <font color="#a626a4">MATERIALIZED</font> ; <br> <br> <font color="#a626a4">FORM</font> group <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> g = Group <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (g) name, nameParent <br> <br> <font color="#a626a4">EDIT</font> Group <font color="#a626a4">OBJECT</font> g <br> ; <br> <br> <font color="#a626a4">FORM</font> groups <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> g = Group <br> <font color="#a626a4">PROPERTIES</font> (g) <font color="#a626a4">READONLY</font> name, nameParent <br> <font color="#a626a4">PROPERTIES</font> (g) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Group <font color="#a626a4">OBJECT</font> g <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> groups; <br> } <br> <br> <font color="#a626a4">CLASS</font> Stock <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Stock); <br> <br> group <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> Group (Stock); <br> nameGroup <font color="#50a14f">''</font> (Stock st) = name(group(st)); <br> <br> <font color="#a626a4">FORM</font> stock <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> s = Stock <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (s) name, nameGroup <br> <br> <font color="#a626a4">EDIT</font> Stock <font color="#a626a4">OBJECT</font> s <br> ; <br> <br> <font color="#a626a4">FORM</font> stocks <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> s = Stock <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">READONLY</font> name, nameGroup <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Stock <font color="#a626a4">OBJECT</font> s <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> stocks; <br> } <br> <br> <font color="#a626a4">CLASS</font> Product <font color="#50a14f">''</font> ; <br> name <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">ISTRING</font> [ <font color="#986801">50</font> ] (Product); <br> <br> <font color="#a626a4">FORM</font> product <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> p = Product <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (p) name <br> <br> <font color="#a626a4">EDIT</font> Product <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">FORM</font> products <font color="#50a14f">''</font> <br> <font color="#a626a4">OBJECTS</font> p = Product <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">READONLY</font> name <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">LIST</font> Product <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> products; <br> } <br> <br> <font color="#a626a4">CLASS</font> PriceList <font color="#50a14f">'-'</font> ; <br> fromDate <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (PriceList); <br> toDate <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATE</font> (PriceList); <br> <br> createdTime <font color="#50a14f">' '</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">DATETIME</font> (PriceList); <br> createdUser = <font color="#a626a4">DATA</font> User (PriceList); <br> nameCreatedUser <font color="#50a14f">''</font> (PriceList p) = name(createdUser(p)); <br> <br> <font color="#a626a4">WHEN</font> <font color="#a626a4">LOCAL</font> <font color="#a626a4">SET</font> (PriceList p <font color="#a626a4">IS</font> PriceList) <font color="#a626a4">DO</font> <br> fromDate(p) &lt;- currentDate(); <br> <br> <font color="#a626a4">WHEN</font> <font color="#a626a4">SET</font> (PriceList p <font color="#a626a4">IS</font> PriceList) <font color="#a626a4">DO</font> { <br> createdTime(p) &lt;- currentDateTime(); <br> createdUser(p) &lt;- currentUser(); <br> } <br> <br> <font color="#a626a4">CLASS</font> PriceListDetail <font color="#50a14f">' -'</font> ; <br> priceList = <font color="#a626a4">DATA</font> PriceList (PriceListDetail) <font color="#a626a4">NONULL</font> <font color="#a626a4">DELETE</font> ; <br> <br> product = <font color="#a626a4">DATA</font> Product (PriceListDetail); <br> nameProduct <font color="#50a14f">''</font> (PriceListDetail d) = name(product(d)); <br> <br> price <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">NUMERIC</font> [ <font color="#986801">10</font> , <font color="#986801">2</font> ] (PriceListDetail); <br> <br> fromDate <font color="#50a14f">' '</font> (PriceListDetail d) = fromDate(priceList(d)); <br> toDate <font color="#50a14f">' '</font> (PriceListDetail d) = toDate(priceList(d)); <br> <br> dataIn <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">BOOLEAN</font> (PriceList, Group); <br> <br> in <font color="#50a14f">' ()'</font> (PriceList p, Group child) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">LAST</font> dataIn(p, Group parent) <font color="#a626a4">ORDER</font> <font color="#a626a4">DESC</font> level(child, parent) <font color="#a626a4">WHERE</font> dataIn(p, parent); <br> <br> dataIn <font color="#50a14f">''</font> = <font color="#a626a4">DATA</font> <font color="#a626a4">BOOLEAN</font> (PriceList, Stock); <br> in <font color="#50a14f">''</font> (PriceList p, Stock s) = dataIn(p, s) <font color="#a626a4">OR</font> in(p, group(s)); <br> <br> stocks <font color="#50a14f">''</font> (PriceList p) = <font color="#a626a4">CONCAT</font> <font color="#50a14f">' / '</font> , <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">CONCAT</font> name(Group g) <font color="#a626a4">IF</font> dataIn(p, g), <font color="#50a14f">','</font> <font color="#a626a4">ORDER</font> g, <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">CONCAT</font> name(Stock s) <font color="#a626a4">IF</font> dataIn(p, s), <font color="#50a14f">','</font> <font color="#a626a4">ORDER</font> s <br> <font color="#a626a4">CHARWIDTH</font> <font color="#986801">30</font> ; <br> <br> priceListDetail (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = <br> <font color="#a626a4">GROUP</font> <font color="#a626a4">LAST</font> PriceListDetail d <br> <font color="#a626a4">ORDER</font> fromDate(d), d <br> <font color="#a626a4">WHERE</font> product(d) = p <font color="#a626a4">AND</font> in(priceList(d), s) <font color="#a626a4">AND</font> <br> fromDate(d) &lt;= dt <font color="#a626a4">AND</font> <font color="#a626a4">NOT</font> toDate(d) &lt; dt; <br> <br> price <font color="#50a14f">''</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = price(priceListDetail(p, s, dt)); <br> fromDate <font color="#50a14f">' '</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = fromDate(priceListDetail(p, s, dt)); <br> toDate <font color="#50a14f">' '</font> (Product p, Stock s, <font color="#a626a4">DATE</font> dt) = toDate(priceListDetail(p, s, dt)); <br> <br> <font color="#a626a4">FORM</font> priceList <font color="#50a14f">'-'</font> <br> <font color="#a626a4">OBJECTS</font> p = PriceList <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> (p) fromDate, toDate <br> <br> <font color="#a626a4">EDIT</font> PriceList <font color="#a626a4">OBJECT</font> p <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> priceList <br> <font color="#a626a4">OBJECTS</font> d = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> (d) nameProduct, price <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">NEW</font> , <font color="#a626a4">DELETE</font> <br> <font color="#a626a4">FILTERS</font> priceList(d) = p <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> priceList <br> <font color="#a626a4">TREE</font> stocks g = Group <font color="#a626a4">PARENT</font> parent, s = Stock <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(g), name(s) <br> <font color="#a626a4">PROPERTIES</font> dataIn(p, g), in(p, g) <br> <font color="#a626a4">PROPERTIES</font> dataIn(p, s), in(p, s) <br> <font color="#a626a4">FILTERS</font> group(s) = g <br> ; <br> <br> <font color="#a626a4">DESIGN</font> priceList { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">TABBED</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d) { caption = <font color="#50a14f">''</font> ; } <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> ( <font color="#a626a4">TREE</font> stocks) { caption = <font color="#50a14f">''</font> ; } <br> } <br> } <br> } <br> <br> <font color="#a626a4">FORM</font> managePrices <font color="#50a14f">' '</font> <br> <font color="#a626a4">OBJECTS</font> p = PriceList <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">READONLY</font> fromDate, toDate, stocks, createdTime, nameCreatedUser <br> <font color="#a626a4">PROPERTIES</font> (p) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">NEW</font> , <font color="#a626a4">EDIT</font> , <font color="#a626a4">DELETE</font> <br> <br> <font color="#a626a4">OBJECTS</font> d = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> (d) <font color="#a626a4">READONLY</font> nameProduct, price <br> <font color="#a626a4">FILTERS</font> priceList(d) = p <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> dt = <font color="#a626a4">DATE</font> <font color="#a626a4">PANEL</font> <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">VALUE</font> (dt) <br> <br> <font color="#a626a4">TREE</font> groups g = Group <font color="#a626a4">PARENT</font> parent <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(g) <br> <br> <font color="#a626a4">OBJECTS</font> s = Stock <br> <font color="#a626a4">PROPERTIES</font> (s) <font color="#a626a4">READONLY</font> name, nameGroup <br> <font color="#a626a4">FILTERS</font> level(group(s), g) <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> pr = Product <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> name(pr), price(pr, s, dt), fromDate(pr, s, dt), toDate(pr, s, dt) <br> <font color="#a626a4">FILTERS</font> price(pr, s, dt) <br> ; <br> <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">OBJECTS</font> prd = PriceListDetail <br> <font color="#a626a4">PROPERTIES</font> <font color="#a626a4">READONLY</font> <font color="#a626a4">BACKGROUND</font> (priceListDetail(pr, s, dt) = prd) <br> fromDate(prd), toDate(prd), <font color="#50a14f">''</font> = stocks(priceList(prd)), price(prd) <br> <font color="#a626a4">FILTERS</font> product(prd) = pr <font color="#a626a4">AND</font> in(priceList(prd), s) <br> ; <br> <br> edit (PriceListDetail d) + { edit(priceList(d)); } <br> <font color="#a626a4">EXTEND</font> <font color="#a626a4">FORM</font> managePrices <br> <font color="#a626a4">PROPERTIES</font> (prd) <font color="#a626a4">NEWSESSION</font> <font color="#a626a4">EDIT</font> <br> ; <br> <br> <font color="#a626a4">DESIGN</font> managePrices { <br> <font color="#a626a4">OBJECTS</font> { <br> <font color="#a626a4">NEW</font> pane { <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">TABBED</font> ; <br> <font color="#a626a4">NEW</font> priceLists { <br> caption = <font color="#50a14f">'-'</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (p); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (d); <br> } <br> <font color="#a626a4">NEW</font> prices { <br> caption = <font color="#50a14f">''</font> ; <br> fill = <font color="#986801">1</font> ; <br> type = <font color="#a626a4">SPLITH</font> ; <br> <font color="#a626a4">NEW</font> leftPane { <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (dt); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> ( <font color="#a626a4">TREE</font> groups); <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (s); <br> } <br> <font color="#a626a4">NEW</font> rightPane { <br> fill = <font color="#986801">3</font> ; <br> type = <font color="#a626a4">SPLITV</font> ; <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (pr) { fill = <font color="#986801">3</font> ; } <br> <font color="#a626a4">MOVE</font> <font color="#a626a4">BOX</font> (prd); <br> } <br> } <br> } <br> } <br> } <br> <br> <font color="#a626a4">NAVIGATOR</font> { <br> <font color="#a626a4">NEW</font> managePrices; <br> } <br></code> </td></tr></tbody></table></div></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de468553/">https://habr.com/ru/post/de468553/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de468541/index.html">Drag & Drop-Komponenten f√ºr blinde Benutzer? Sie machen Witze?</a></li>
<li><a href="../de468543/index.html">Wochentags Programmkomitee FrontendConf. Interview mit Sergey Popov</a></li>
<li><a href="../de468545/index.html">"Alice, lass uns zum Frontend gehen!"</a></li>
<li><a href="../de468547/index.html">Englisch sprechend, CSS, Grid und Barrierefreiheit bei FrontendConf</a></li>
<li><a href="../de468549/index.html">GPU gebunden. So √ºbertragen Sie alles auf die Grafikkarte und ein bisschen mehr. Animationen</a></li>
<li><a href="../de468555/index.html">Einf√ºhrung in deterministische Assemblys in C / C ++. Teil 2</a></li>
<li><a href="../de468557/index.html">WEB 3.0 - der zweite Ansatz f√ºr das Projektil</a></li>
<li><a href="../de468559/index.html">Sichern Sie die Cloud, Freunde</a></li>
<li><a href="../de468561/index.html">Sicherheitswoche 39: Sicherheit und allt√§gliche Fehler</a></li>
<li><a href="../de468563/index.html">Watchmen Watch: Der aktuelle Stand der Weltraum-Tracking-Einrichtungen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>