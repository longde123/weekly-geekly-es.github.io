<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ปโโ๏ธ ๐จโ๐จโ๐งโ๐ง ๐๐ป ุงูููุฉ ุงูุณุญุฑูุฉ ููุญุฏุงุช ุงููุงูุฑู ุ ุฃู ููููุฉ ุฌุนู ุงูุญูุงุฉ ุฃุณูู ููุจุฑูุฌ ูุฌูุน AVR ๐ฒ๐ป ๐๏ธ ๐ก๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏ ูุชุจ ุงููุซูุฑ ุนู ูุญุฏุงุช ุงููุงูุฑู ูู ุงููุฌูุน. ููู ุงููุซุงุฆู ููู ุงูููุงูุงุช ุงููุฎุชููุฉ. ููู ูู ูุนุธู ุงูุญุงูุงุช ุ ูุชุนูู ุงูุฃูุฑ ุฅูุง ุจูุงุฆูุฉ ุจุณูุทุฉ ูู ุงูุชูุฌููุงุช ูุน ูุตู ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูููุฉ ุงูุณุญุฑูุฉ ููุญุฏุงุช ุงููุงูุฑู ุ ุฃู ููููุฉ ุฌุนู ุงูุญูุงุฉ ุฃุณูู ููุจุฑูุฌ ูุฌูุน AVR</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465261/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุฏ ูุชุจ ุงููุซูุฑ ุนู ูุญุฏุงุช ุงููุงูุฑู ูู ุงููุฌูุน.  ููู ุงููุซุงุฆู ููู ุงูููุงูุงุช ุงููุฎุชููุฉ.  ููู ูู ูุนุธู ุงูุญุงูุงุช ุ ูุชุนูู ุงูุฃูุฑ ุฅูุง ุจูุงุฆูุฉ ุจุณูุทุฉ ูู ุงูุชูุฌููุงุช ูุน ูุตู ููุฌุฒ ููุธุงุฆููุง ุ ุฃู ููุฌููุนุฉ ูู ุงูุฃูุซูุฉ ุงููุชุจุงููุฉ ูู ูุญุฏุงุช ุงููุงูุฑู ุงูุฌุงูุฒุฉ. <br>  ุงูุบุฑุถ ูู ูุฐู ุงูููุงูุฉ ูู ูุตู ุทุฑููุฉ ูุญุฏุฏุฉ ูุจุฑูุฌุฉ ูุบุฉ ุงูุชุฌููุน ูุฅูุดุงุก ุงูุชุนูููุฉ ุงูุจุฑูุฌูุฉ ุงูุฃูุซุฑ ุจุณุงุทุฉ ููุฑุงุกุฉ ุจุงุณุชุฎุฏุงู ูุญุฏุงุช ุงููุงูุฑู.  ูู ุชุตู ุงูููุงูุฉ ุจูุงุก ุฌููุฉ ุงูุฃูุงูุฑ ูุงูุชูุฌููุงุช ุงููุฑุฏูุฉ.  ุชู ุชูุฏูู ูุตู ููุตู ุจุงููุนู ูู ูุจู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุดุฑูุฉ ุงููุตูุนุฉ</a> .  ุณูู ูุฑูุฒ ุนูู ููููุฉ ุงุณุชุฎุฏุงู ูุฐู ุงููุฑุต ูุญู ูุดุงูู ูุญุฏุฏุฉ. </p><a name="habracut"></a><br><p style=";text-align:right;direction:rtl">  ูู ููุช ูุงุญุฏ ุ ุฌุฑุจุช ATMEL ูุทูุฑุช ูุฌููุนุฉ ูู ูุญุฏุงุช ุงูุชุญูู ุงูุฏูููุฉ ุฐุงุช ุงูุซูุงูู ุจุชุงุช ุฐุงุช ุจููุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ูุจุณูุทุฉ ุ ููู ูู ููุณ ุงูููุช ูุธุงู ููุงุฏุฉ ููู ููุบุงูุฉ.  ูููู ุ ููุง ุชุนูู ุ ูุง ููุฌุฏ ุญุฏ ููููุงู ุ ูุจุนุถ ุงูุชุนูููุงุช ุงููุณุชุฎุฏูุฉ ุจุดูู ูุชูุฑุฑ ููุณุช ูุงููุฉ.  ูุญุณู ุงูุญุธ ุ ูููู ููุฌููุน ุงููุงูุฑู ุ ุจูุทู ููุฌุงูู ุชูุงููุง ุงูููุฏู ูู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุ ุชุจุณูุท ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุดูู ูุจูุฑ ูู ุฎูุงู ุงุณุชุฎุฏุงู ุงูุชูุฌููุงุช.  ูุจู ุงููุชุงุจุนุฉ ูุจุงุดุฑุฉู ุฅูู ูุญุฏุงุช ุงููุงูุฑู ุ ุณูููู ุจุชูููุฐ ุจุนุถ ุงูุฎุทูุงุช ุงูุฃูููุฉ </p><br><h3 id="opredelenie-konstant" style=";text-align:right;direction:rtl">  ุชุนุฑูู ุงูุซูุงุจุช </h3><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">.EQU FOSC = 16000000 .EQU CLK8 = 0</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุณูุญ ูู ูุฐุงู ุงูุชุนุฑููุงู ุจุงูุชุฎูุต ูู "ุงูุฃุฑูุงู ุงูุณุญุฑูุฉ" ูู ูุญุฏุงุช ุงููุงูุฑู ุ ุญูุซ ูุชู ุญุณุงุจ ููู ุงูุณุฌูุงุช ุจูุงุกู ุนูู ุชุฑุฏุฏ ุงููุนุงูุฌ ูุญุงูุฉ ุงูุตูุงุฑ ุงููุงุณู ุงููุญูุทู.  ุงูุชุนุฑูู ุงูุฃูู ูู ุชุฑุฏุฏ ุงููุฑูุณุชุงู ุงููุนุงูุฌ ูู ููุฑุชุฒ ุ ูุงูุซุงูู ูู ุญุงูุฉ ููุณู ุงูุชุฑุฏุฏ ุงููุญูุทู. </p><br><h3 id="imenovanie-registrov" style=";text-align:right;direction:rtl">  ุชุณุฌูู ุงูุชุณููุฉ </h3><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.DEF TempL = r16 .DEF TempH = r17 .DEF TempQL = r18 .DEF TempQH = r19 .DEF AL = r0 .DEF AH = r1 .DEF AQL = r2 .DEF AQH = r3</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุงู ุญุงุฌุฉ ููุฑุฑุฉ ุฅูู ุญุฏ ูุง ูุฃูู ูููุฉ ุณุฌูุงุช ุงูุชุณููุฉ ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูู ูุญุฏุงุช ุงููุงูุฑู.  ููุงู ุญุงุฌุฉ ุฅูู ุฃุฑุจุนุฉ ุณุฌูุงุช ููุท ูู <em>Temp</em> ุฅุฐุง ููุง ูุชุนุงูู ูุน ููู 32 ุจุช (ุนูู ุณุจูู ุงููุซุงู ุ ูู ุนูููุงุช ุถุฑุจ ุฑูููู 16 ุจุช).  ุฅุฐุง ููุง ูุชุฃูุฏูู ูู ุฃู <em>ุณุฌูู</em> <em>ุชุฎุฒูู ูุคูุชูู ููููุงู</em> ูุงุณุชุฎุฏุงููุง ูู ูุญุฏุงุช ุงููุงูุฑู ุ <em>ููุง</em> ูููู ุชุญุฏูุฏ <em>TempQL</em> ู <em>TempQH</em> .  <em>ููุงู</em> ุญุงุฌุฉ ุฅูู ุชุนุฑููุงุช ูู <em>A</em> ููุญุฏุงุช ุงููุงูุฑู ุจุงุณุชุฎุฏุงู ุนูููุงุช ุงูุถุฑุจ.  ูู ูุนุฏ <em>AQ</em> ุถุฑูุฑููุง ุฅุฐุง ูู ูุณุชุฎุฏู ุญุณุงุจ 32 ุจุช ูุน ูุญุฏุงุช ุงููุงูุฑู ุงูุฎุงุตุฉ ุจูุง. </p><br><h3 id="makrosy-dlya-realizacii-prostyh-komand" style=";text-align:right;direction:rtl">  ูุญุฏุงุช ุงููุงูุฑู ูุชูููุฐ ุฃูุงูุฑ ุจุณูุทุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุจุนุฏ ุฃู ุงูุชุดููุง ุชุณููุฉ ุงูุณุฌูุงุช ุ ุณูุจุฏุฃ ูู ุชูููุฐ ุงูุฃูุงูุฑ ุงูููููุฏุฉ ููุจุฏุฃ ุจูุญุงููุฉ ุชุจุณูุท ุงูุฃูุงูุฑ ุงูููุฌูุฏุฉ.  ูุฌูุน AVR ูุฏูู ููุฒุฉ ูุงุญุฏุฉ ุญุฑุฌ.  ุจุงููุณุจุฉ ุฅูู ุงููุฏุฎูุงุช ูุงููุฎุฑุฌุงุช ุ ูุฅู ุฃูู 64 ูููุฐูุง ุชุณุชุฎุฏู ุฃูุงูุฑ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุ <em>ูุงูุฃุฌุฒุงุก</em> ุงููุชุจููุฉ ูู <em>lds / sts</em> .  ูู ุฃุฌู ุนุฏู ุงููุธุฑ ุฅูู ุงููุซุงุฆู ูู ูู ูุฑุฉ ุจุญุซูุง ุนู ุงูุฃูุฑ ุงูุถุฑูุฑู ููููุฐ ูุนูู ุ ุณููุดุฆ ูุฌููุนุฉ ูู ุงูุฃูุงูุฑ ุงูุนุงูุฉ ุงูุชู ุณุชุญู ูุญู ุงูููู ุงูุถุฑูุฑูุฉ ุจุดูู ูุณุชูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.MACRO XOUT .IF @0&lt;64 out @0,@1 .ELSE sts @0,@1 .ENDIF .ENDMACRO .MACRO XIN .IF @1&lt;64 in @0,@1 .ELSE lds @0,@1 .ENDIF .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุนูู ุงูุงุณุชุจุฏุงู ุจุดูู ุตุญูุญ ุ ูุชู ุงุณุชุฎุฏุงู ุงูุชุฑุฌูุฉ ุงูุดุฑุทูุฉ ูู ุงููุงูุฑู.  ูู ุงูุญุงูุฉ ุงูุชู ูููู ูููุง ุนููุงู ุงููููุฐ ุฃูู ูู 64 ุ ูุชู ุชูููุฐ ุงููุณู ุงูุดุฑุทู ุงูุฃูู ุ ูุฅูุง ูุชู ุชูููุฐ ุงููุณู ุงูุซุงูู.  ุชูุฑูุฑ ูุญุฏุงุช ุงููุงูุฑู ุงูุฎุงุตุฉ ุจูุง ูุธุงุฆู ุงูุฃูุงูุฑ ุงูููุงุณูุฉ ุชูุงููุง ููุนูู ูุน ููุงูุฐ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุ ูุจุงูุชุงูู ุ ููุฅุดุงุฑุฉ ุฅูู ุฃู ูุฑูููุง ูุฏูู ููุฒุงุช ูุชูุฏูุฉ ุ ูุถูู ุจุงุฏุฆุฉ ุงูุชุณููุฉ ุงูููุงุณูุฉ <em>X.</em> <br>  ุฃุญุฏ ุงูุฃูุงูุฑ ุงูุฃูุซุฑ ุดููุนูุง ุงูุชู ูุง ุชุชููุฑ ูู ุงููุฌููุน ุ ูููููุง ูุทููุจุฉ ุจุงุณุชูุฑุงุฑ ุ ูู ุฃูุฑ ูุชุงุจุฉ ุงูุซูุงุจุช ูู ุณุฌูุงุช ุฅุฏุฎุงู ุงูุฅุฎุฑุงุฌ.  ุณูุจุฏู ุชุทุจูู ุงููุงูุฑู ููุฐุง ุงูุฃูุฑ ููุฐุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.MACRO OUTI ldi TempL,@1 .IF @0&lt;64 out @0, TempL .ELSE sts @0, TempL .ENDIF .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฅู ุงูุงุณู ูู ุงููุงูุฑู ุ ููู ูุง ููุชูู ููุทู ุชุณููุฉ ุงูุฃูุฑ ุ ูุถูู ุฅูู ุงูุงุณู ุงูููุงุณู postfix <em>I</em> ุ ุงูุฐู ูุณุชุฎุฏูู ุงููุทูุฑ ููุฅุดุงุฑุฉ ุฅูู ุฃูุงูุฑ ุงูุนูู ูุน ุงูุซูุงุจุช.  ูู ูุฐุง ุงููุงูุฑู ุ ูุณุชุฎุฏู ุณุฌู <em>TempL</em> ุงููุญุฏุฏ ูุณุจููุง <em>ููุชุดุบูู</em> . <br>  ูู ุจุนุถ ุงูุญุงูุงุช ุ ูุง ููุฒู ุชุณุฌูู ูุงุญุฏ ุ ูููู ุงูุฒูุฌ ุจุฃูููู ูุฎุฒู ูููุฉ 16 ุจุช.  ุฅูุดุงุก ูุงูุฑู ุฌุฏูุฏ ููุชุงุจุฉ ูููุฉ 16 ุจุช ุฅูู ุฒูุฌ ูู ุณุฌูุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.MACRO OUTIW ldi TempL,HIGH(@1) .IF @0&lt;64 out @0H, TempL .ELSE sts @0H, TempL .ENDIF ldi TempL,LOW(@1) .IF @0&lt;64 out @0L, TempL .ELSE sts @0L, TempL .ENDIF .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงููุงูุฑู ุ ูุณุชุฎุฏู ุงูุฏุงูุชูู <em>LOW</em> ู <em>HIGH</em> ุงููุถููุฉ ูุงุณุชุฎุฑุงุฌ ุงูุจุงูุชุงุช ุงูููุฎูุถุฉ ูุงูุนุงููุฉ ูู ูููุฉ 16 ุจุช.  ูู ุงุณู ุงููุงูุฑู ุ ุฃุถู ุงูุจุงุฏุฆุงุช <em>I</em> ู <em>W</em> ุฅูู ุงูุฃูุฑ ููุฅุดุงุฑุฉ ุฅูู ุฃูู ูู ูุฐู ุงูุญุงูุฉ ุ ูุนูู ุงูุฃูุฑ ูุน ูููุฉ 16 ุจุช (ูููุฉ). <br>  ูุง ูุชู ุชุญููู ุฃุฒูุงุฌ ุงูุชุณุฌูู ูู ุงูุจุฑุงูุฌ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฅุนุฏุงุฏ ูุคุดุฑุงุช ุนูู ุงูุฐุงูุฑุฉ.  ุฏุนููุง ุฅูุดุงุก ูุซู ูุฐุง ุงููุงูุฑู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.MACRO ldiw ldi @0L, LOW(@1) ldi @0H, HIGH(@1) .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงููุงูุฑู ุ ูุณุชุฎุฏู ุญูููุฉ ุฃู ุงูุชุณููุฉ ุงูููุงุณูุฉ ููุณุฌูุงุช ูุงูููุงูุฐ ูู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุชุชุถูู postfix <em>L</em> ููุฃูู ู postfix <em>H</em> ููุฌุฒุก ุงูุนููู ูู ูููุฉ ุงูุจุงูุช ุงููุฒุฏูุฌุฉ.  ุฅุฐุง ุงุชุจุนุช ูุฐู ุงููุงุนุฏุฉ ุนูุฏ ุชุณููุฉ ุงููุชุบูุฑุงุช ุงูุฎุงุตุฉ ุจู ุ ูุณูุนูู ุงููุงูุฑู ุจุดูู ุตุญูุญ ุ ุจูุง ูู ุฐูู ูุนูู.  ูููู ุฌูุงู ูุญุฏุงุช ุงููุงูุฑู ุฃูุถูุง ูู ุญูููุฉ ุฃููุง ุชููุฑ ุจุฏููุงู ุจุณูุทูุง ุ ูุจุงูุชุงูู ุ ูู ุญุงูุฉ ููู ุงููุนุงูู ุงูุซุงูู ุฑูููุง ุ ููู ุญุงูุฉ ูุง ุฅุฐุง ูุงู ูุฐุง ูู ุงุณู ุงูููุตู ุ ุณูุนูู ุงููุงูุฑู ุจุดูู ุตุญูุญ. </p><br><h3 id="makrosy-dlya-realizacii-slozhnyh-komand" style=";text-align:right;direction:rtl">  ูุญุฏุงุช ุงููุงูุฑู ูุชูููุฐ ุงูุฃูุงูุฑ ุงููุนูุฏุฉ. </h3><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุชุนูู ุงูุฃูุฑ ุจุนูููุงุช ุฃูุซุฑ ุชุนููุฏูุง ุ ูุง ูุชู ุงุณุชุฎุฏุงู ูุญุฏุงุช ุงููุงูุฑู ุจุดูู ุนุงู ุ ููุถูุฉ ุงูุฑูุชูู.  ููุน ุฐูู ุ ูู ูุฐู ุงูุญุงูุงุช ุ ูููู ููุญุฏุงุช ุงููุงูุฑู ุฌุนู ุงูุญูุงุฉ ุฃุณูู ูุฌุนู ุงูุดูุฑุฉ ุฃูุซุฑ ูุงุจููุฉ ูููุฑุงุกุฉ.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุฃุชู ุงูุชุฌููุน ุงูุดุฑุทู ููุฅููุงุฐ.  ูุฏ ูุจุฏู ููุฌ ุงูุจุฑูุฌุฉ ูุงูุชุงูู: <br>  ูุถุน ูู ุฅุฌุฑุงุกุงุชูุง ูู ููู ูููุตู ุ ูุงูุฐู ุณูููู ุจุชุณููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ <strong>Library.inc</strong> .  ุณูููู ููู ุฑูุชูู ูุฑุนู ูู ูุฐุง ุงูููู ุงููููุฐุฌ ุงูุชุงูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">_sub0: .IFDEF __sub0 ; -----    ----- ret .ENDIF</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุญุงูุฉ ุ ูุนูู ูุฌูุฏ ุชุนุฑูู __sub0 ุฃูู ูุฌุจ ุชุถููู ุงูุฑูุชูู ุงููุฑุนู ูู ุงูููุฏ ุงููุงุชุฌ.  ุฎูุงู ุฐูู ุ ูุชู ุชุฌุงููู. <br>  ุจุนุฏ ุฐูู ุ ูู ููู ูููุตู <strong>Macro.inc ุ</strong> ูุนุฑูู ูุญุฏุงุช ูุงูุฑู ุงููููุฐุฌ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.MACRO SUB0 .IFNDEF __sub0 .DEF __sub0 .ENDIF ; ---          call _sub0 .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุงุณุชุฎุฏุงู ูุฐุง ุงููุงูุฑู ุ ูุชุญูู ูู ุชุนุฑูู __sub0 ุ ูุฅุฐุง ูุงู ููููุฏูุง ุ ูุฅููุง ูููู ุจุฅุฌุฑุงุก ุงูุชุญุฏูุฏ.  ูุชูุฌุฉ ูุฐูู ุ ูุคุฏู ุงุณุชุฎุฏุงู ูุงูุฑู ุฅูู ุฅูุบุงุก ุชุฃููู ุฅุฏุฑุงุฌ ุฑูุฒ ูุฑุนู ูู ููู ุงูุฅุฎุฑุงุฌ.  ูู ุญุงูุฉ ุงุณุชุฎุฏุงู ุงูุฅุฌุฑุงุกุงุช ุงูุฑูุชูููุฉ ูู ูุญุฏุงุช ุงููุงูุฑู ุ ุณูู ูุฃุฎุฐ ุฑูุฒ ุงูุจุฑูุงูุฌ ุงูุฑุฆูุณู ุงููููุฐุฌ ุงูุชุงูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.INCLUDE โMacro.incโ ;----    ---- .INCLUDE โLibrary.incโ</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุซุงู ุ ูุนุทู ุชุทุจูู ูุงูุฑู ูุชูุณูู ุฃุนุฏุงุฏ ุตุญูุญุฉ ุบูุฑ ูููุนุฉ 8 ุจุช.  ูุญุงูุธ ุนูู ููุทู ุงูุดุฑูุฉ ุงููุตูุนุฉ ููุถุน ุงููุชูุฌุฉ ูู <em>AL (r0)</em> ุ ูุจููุฉ ุงูุชูุณูู ูู <em>AH (r1)</em> .  ุณูู ุงูุฑูุชูู ุงููุฑุนู ุชุจุฏู ููุง ููู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">_div8u: .IFDEF __ div8u ;AH -  ;AL  ;TempL -  ;TempH -  ;TempQL -  clr AL; clr AH; ldi TempQL,9 d8u_1: rol TempL dec TempQL brne d8u_2 ret d8u_2: rol A sub AH, TempH brcc d8u_3 add AH,TempH clc rjmp d8u_1 d8u_3: sec rjmp d8u_1 .ENDIF</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูููู ุชุนุฑูู ุงููุงูุฑู ูุงุณุชุฎุฏุงู ูุฐุง ุงูุฑูุชูู ููุง ููู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.MACRO DIV8U .IFNDEF __div8u .DEF __div8u .ENDIF mov TempL, @0 mov TempH, @1 call _div8u .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ููููู ุฅุถุงูุฉ ูุณุฎุฉ ููุนูู ูุน ุซุงุจุช </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.MACRO DIV8UI .IFNDEF __div8u .DEF __div8u .ENDIF mov TempL, @0 ldi TempH, @1 call _div8u .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ูุฐูู ุ ูุนุฏ ุงุณุชุฎุฏุงู ุนูููุฉ ุงููุณูุฉ ูู ูุต ุงูุจุฑูุงูุฌ ุฃูุฑูุง ุจุณูุทูุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">DIV8U r10, r11 ; r0 = r10/r11 r1 = r10 % r11 DIV8UI r10, 35 ; r0 = r10/35 r1 = r10 % 35</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ุงูุชุฑุฌูุฉ ุงูุดุฑุทูุฉ ุ ูููููุง ูุถุน ุฌููุน ุงูุฅุฌุฑุงุกุงุช ุงูุชู ูุฏ ุชููู ูููุฏุฉ ููุง ูู <strong>Library.inc</strong> .  ูู ูุฐู ุงูุญุงูุฉ ุ ููุท ุชูู ุงูุชู ุชู ุงุณุชุฏุนุงุคูุง ูุฑุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ุณุชุธูุฑ ูู ุฑูุฒ ุงูุฅุฎุฑุงุฌ.  ุฅููุงุก ุงูุงูุชูุงู ููููู ุชุณููุฉ ุงูุฏุฎูู.  ูุงุชุฌ ุงูุชุณููุฉ ุฎุงุฑุฌ ุญุฏูุฏ ุงูุดุฑุท ูุฑุฌุน ุฅูู ุงููุชุฑุฌู.  ุฅุฐุง ูุถุนุช ุงูููุตู ูู ูุต ุงููุชูุฉ ุงูุดุฑุทูุฉ ุ ููุฏ ูููู ุงููุชุฑุฌู ุฎุทุฃ.  ูุฌูุฏ ุนูุงูุงุช ุบูุฑ ูุณุชุฎุฏูุฉ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุณ ูุฎูููุง ุ ูุฃู ูุฌูุฏ ุฃู ุนุฏุฏ ูู ุงูุนูุงูุงุช ูุง ูุคุซุฑ ุนูู ุงููุชูุฌุฉ. </p><br><h3 id="makrosy-dlya-raboty-s-periferiey" style=";text-align:right;direction:rtl">  ูุญุฏุงุช ุงููุงูุฑู ุงููุญูุทูุฉ </h3><br><p style=";text-align:right;direction:rtl">  ุฅุญุฏู ุงูุนูููุงุช ุงูุชู ูุตุนุจ ุงูููุงู ุจูุง ุฏูู ุงุณุชุฎุฏุงู ูุซุงุฆู ุงูุดุฑูุฉ ุงููุตูุนุฉ ูู ุชููุฆุฉ ุงูุฃุฌูุฒุฉ ุงูุทุฑููุฉ.  ุญุชู ูุน ุงุณุชุฎุฏุงู ุชุณููุงุช ุฐุงูุฑู ููุณุฌูุงุช ูุงูุจุชุงุช ูู ุงูููุฏ ุ ูุฏ ูููู ูู ุงูุตุนุจ ููู ุฃู ูุถุน ุชู ุชูููู ุงูุฌูุงุฒ ุ ุฎุงุตุฉู ุฃูู ูู ุจุนุถ ุงูุฃุญูุงู ูุชู ุชูููู ุงููุถุน ูู ุฎูุงู ูุฌููุนุฉ ูู ููู ุงูุจุชุงุช ูุณุฌูุงุช ูุฎุชููุฉ.  ุฏุนููุง ูุฑู ููู ูููู ุงุณุชุฎุฏุงู ูุญุฏุงุช ุงููุงูุฑู ูุน ูุซุงู <em>USART</em> . <br>  ููุจุฏุฃ ูุน ูุงูุฑู ุชููุฆุฉ ุงููุถุน ุบูุฑ ุงููุชุฒุงูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.MACRO USART_INIT ; speed, bytes, parity, stop-bits .IF CLK8 == 0 .SET DIVIDER = FOSC/16/@0-1 .ELSE .SET DIVIDER = FOSC/128/@0-1 .ENDIF ; Set baud rate to UBRR0 outi UBRR0H, HIGH(DIVIDER) outi UBRR0L, LOW(DIVIDER) ; Enable receiver and transmitter .SET UCSR0B_ = (1&lt;&lt;RXEN0)|(1&lt;&lt;TXEN0) outi UCSR0B, UCSR0B_ .SET UCSR0C_ = 0 .IF @2 == 'E' .SET UCSR0C_ |= (1&lt;&lt;UPM01) .ENDIF .IF @2 == 'O' .SET UCSR0C_ |= (1&lt;&lt;UPM00) .ENDIF .IF @3== 2 .SET UCSR0C_ |= (1&lt;&lt;USBS0) .ENDIF .IF @1== 6 .SET UCSR0C_ |= (1&lt;&lt;UCSZ00) .ENDIF .IF @1== 7 .SET UCSR0C_ |= (1&lt;&lt;UCSZ01) .ENDIF .IF @1== 8 .SET UCSR0C_ = UCSR0C_ |(1&lt;&lt;UCSZ01)|(1&lt;&lt;UCSZ00) .ENDIF .IF @1== 9 .SET UCSR0C_ |= (1&lt;&lt;UCSZ02)|(1&lt;&lt;UCSZ01)|(1&lt;&lt;UCSZ00) .ENDIF ; Set frame format outi UCSR0C,UCSR0C_ .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุญ ููุง ุงุณุชุฎุฏุงู ุงููุงูุฑู ุจุงุณุชุจุฏุงู ุชููุฆุฉ ุณุฌูุงุช ุฅุนุฏุงุฏ <em>USART</em> ุจููู ูุงูุช ุบูุฑ ูููููุฉ ุฏูู ูุฑุงุกุฉ ุงููุซุงุฆู ุจุณุทุฑ ูููู ุญุชู ูุฃููุฆู ุงูุฐูู ูุงุฌููุง ูุญุฏุฉ ุงูุชุญูู ูุฐู ุฃููุงู ุงูุชุนุงูู ูุนูุง.  ูู ูุฐุง ุงููุงูุฑู ุ ุฃุตุจุญ ูู ุงููุงุถุญ ุฃุฎูุฑูุง ุณุจุจ ุชุญุฏูุฏ ุซูุงุจุช ุงูุชุฑุฏุฏ ูุงูููุณูู ุนูููุง.  ุญุณููุง ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃูู ุนูู ุงูุฑุบู ูู ุงูููุฏ ุงููุซูุฑ ููุฅุนุฌุงุจ ูููุงูุฑู ููุณู ุ ูุฅู ุงููุธูุฑ ุงููุงุชุฌ ุณูููู ูู ููุณ ุงููุธูุฑ ููุง ูู ููุง ููุชุจ ุงูุชููุฆุฉ ุจุงูุทุฑููุฉ ุงููุนุชุงุฏุฉ. <br>  ูุฅููุงุก ุงุณุชุฎุฏุงู <em>USART ุ</em> ุฅููู ุจุนุถ ูุญุฏุงุช ุงููุงูุฑู ุงูุตุบูุฑุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> .MACRO USART_SEND_ASYNC outi UDR0, @0 .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ููุฌุฏ ุณูู ุณุทุฑ ูุงุญุฏ ุ ูููู ุงุณุชุฎุฏุงู ูุฐุง ุงููุงูุฑู ุณูุชูุญ ูู ุฑุคูุฉ ููุงู ุนุฑุถ ุงูุจุฑูุงูุฌ ููุจูุงูุงุช ูู <em>USART ุจุดูู ุฃูุถู</em> .  ุฅุฐุง ุงูุชุฑุถูุง ุฃู ูุนูู ูู ูุถุน ูุชุฒุงูู ุฏูู ุงุณุชุฎุฏุงู ุงูููุงุทุนุงุช ุ ููู ุงูุฃูุถู ุงุณุชุฎุฏุงู ุงููุงูุฑู ุฃุฏูุงู ุจุฏูุงู ูู <em>USART_SEND_ASYNC</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> .MACRO USART_SEND USART_Transmit: xin TempL, UCSR0A sbrs TempL, UDRE0 rjmp USART_Transmit outi UDR0, @0 .ENDMACRO</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุญุงูุฉ ุ ูุง ูููููุง ุชูููู ูุญุต ุดุบู ุงูููุงูุฐ ูุนุฑุถ ุงูุจูุงูุงุช ุฅูุง ุนูุฏูุง ูููู ุงููููุฐ ูุฌุงูููุง.  ูู ุงููุงุถุญ ุฃู ูุฐุง ุงูููุฌ ููุนูู ูุน ุงูุฃุฌูุฒุฉ ุงูุทุฑููุฉ ุณูุนูู ุนูู ุฃู ุฌูุงุฒ ุ ูููุณ ููุท ูู ุฃุฌู <em>USART</em> . </p><br><h3 id="sravnenie-programm-bez-i-s-ispolzovaniem-makrosov" style=";text-align:right;direction:rtl">  ููุงุฑูุฉ ุจูู ุงูุจุฑุงูุฌ ุฏูู ุงุณุชุฎุฏุงู ูุญุฏุงุช ุงููุงูุฑู. </h3><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุซุงู ุตุบูุฑ ูููุงุฑูุฉ ุงูููุฏ ุงูููุชูุจ ุฏูู ุงุณุชุฎุฏุงู ูุญุฏุงุช ุงููุงูุฑู ูุน ุงูููุฏ ุงูุฐู ูุชู ุงุณุชุฎุฏุงูู ููู.  ุนูู ุณุจูู ุงููุซุงู ุ ุฎุฐ ุจุฑูุงูุฌูุง ูุนุฑุถ ุงูููุงุณูููุฉ <strong>"Hello world!"</strong>  ุฅูู ุงููุญุทุฉ ุนุจุฑ ุงูุฃุฌูุฒุฉ <em>UART</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> RESET: ldi r16, high(RAMEND) out SPH,r16 ldi r16, low(RAMEND) out SPL,r16 USART_Init: out UBRR0H, r17 out UBRR0L, r16 ldi r16, (1&lt;&lt;RXEN0)|(1&lt;&lt;TXEN0) out UCSRnB,r16 ldi r16, (1&lt;&lt;USBS0)|(3&lt;&lt;UCSZ00) out UCSR0C,r16 ldi ZL, LOW(STR&lt;&lt;1) ldi ZH, HIGH(STR&lt;&lt;1) LOOP: lpm r16, Z+ or r16,r16 breq END USART_Transmit: in r17, UCSR0A sbrs r17, UDRE0 rjmp USART_Transmit out UDR0,r16 rjmp LOOP END: rjmp END STR: .DB โHello world!โ,0</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููุง ูู ููุณ ุงูุจุฑูุงูุฌ ุ ูููู ููุชูุจ ุจุงุณุชุฎุฏุงู ูุญุฏุงุช ุงููุงูุฑู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">.INCLUDE โmacro.incโ .EQU FOSC = 16000000 .EQU CLK8 = 0 RESET: ldiw SP, RAMEND; USART_INIT 19200, 8, "N", 1 ldiw Z, STR&lt;&lt;1 LOOP: lpm TempL, Z+ test TempL breq END USART_SEND TempL rjmp LOOP END: rjmp END STR: .DB โHello world!โ,0</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงููุซุงู ุ ุงุณุชุฎุฏููุง ูุญุฏุงุช ุงููุงูุฑู ุงูููุถุญุฉ ุฃุนูุงู ุ ูุงูุชู ุณูุญุช ููุง ุจุชุจุณูุท ุฑูุฒ ุงูุจุฑูุงูุฌ ุจุดูู ูุจูุฑ ูุฌุนูู ุฃูุซุฑ ูุงุจููุฉ ููููู.  ุณูููู ุงูููุฏ ุงูุซูุงุฆู ูู ููุง ุงูุจุฑูุงูุฌูู ูุชุทุงุจููู ุชูุงููุง. </p><br><h3 id="vyvod" style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h3><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ูุคุฏู ุงุณุชุฎุฏุงู ูุญุฏุงุช ุงููุงูุฑู ุฅูู ุชูููู ุฑูุฒ ุงููุฌููุน ูู ุงูุจุฑูุงูุฌ ุจุฏุฑุฌุฉ ูุจูุฑุฉ ุ ููุง ูุฌุนูู ุฃูุซุฑ ูุงุจููุฉ ููููู ููุฑุงุกุฉ.  ุงูุชุญููู ุงูุจุฑูุฌู ุงูุดุฑุทู ูุณูุญ ูู ุจุฅูุดุงุก ุฃูุงูุฑ ุนุงูุฉ ูููุชุจุงุช ุงูุฅุฌุฑุงุกุงุช ุฏูู ุฅูุดุงุก ุฑูุฒ ุงูุฅุฎุฑุงุฌ ุงูููุฑุฑ.  ููุนูุจ ุ ูููู ูููุฑุก ุฃู ูุดูุฑ ุฅูู ูุชูุงุถุน ููุบุงูุฉ ุจูุนุงููุฑ ุงููุบุงุช ุงูุฑููุนุฉ ุงููุณุชูู ุงูุชู ุชู ุชุนููููุง ููุนูููุงุช ูุงููููุฏ ุงููุณููุญ ุจูุง ุนูุฏ ุฅุนูุงู ุงูุจูุงูุงุช "ุฅูู ุงูุฃูุงู".  ูุง ูุณูุญ ูุฐุง ุงูุชูููุฏ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุจุงููุชุงุจุฉ ุนู ุทุฑูู ูุญุฏุงุช ูุงูุฑู ุฃูุฑ ุนุงููู ูุงูู <em>ููุงูุชูุงูุงุช jmp / rjmp</em> ููููุฎ ุฑูุฒ ุงููุงูุฑู ููุณู ุจุดูู ูุจูุฑ ุนูุฏ ุชูููุฐ ุงูููุทู ุงููุนูุฏ. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar465261/">https://habr.com/ru/post/ar465261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar465249/index.html">ูุญุงุถุฑุฉ ุฑูุชุดุงุฑุฏ ุณุชูููุงู ูู ูููุฉ ููุณูู ูููููู ุงูุชุทุจูููุฉ. ุฃุบุณุทุณ 2019</a></li>
<li><a href="../ar465251/index.html">ุงูุตูู ุงูุชูู ุชูุฑูุจุง. ุชูุฑูุจุง ูุง ุชุณุฑุจุช ุงูุจูุงูุงุช</a></li>
<li><a href="../ar465255/index.html">ุชูููุฐ ุชุฌูุน ุงุชุตุงู WCF ูู .Net Core ุจุงุณุชุฎุฏุงู HttpClientFactory</a></li>
<li><a href="../ar465257/index.html">"ุงุญุฐุฑูุง ุ ูุงุณ!": ุญูู ูุงูุฏููุงูุฏุฒ ุ ุงูุดุงูุฑูุง ุงูุฅูููุฉ ุ ููููู ุงููุฒูู ูุจุนุถ ุณุญุฑ ุงูุดุงุฑุน</a></li>
<li><a href="../ar465259/index.html">ValueTask <ุงููุชูุฌุฉ> - ููุงุฐุง ูููุงุฐุง ููููุ</a></li>
<li><a href="../ar465263/index.html">ุฃููุงู ูู ุจูุณุชุฌุฑุณ: 3. ุฃููุงู ูุงุฆูุงุช ุฃุฎุฑู</a></li>
<li><a href="../ar465267/index.html">ูุณุฎุฉ ูุทุจูุนุฉ ุนูู ุงูุขูุฉ ุงููุงุชุจุฉ. ุชุนุจูุฑ ุงูุณุญุฑ</a></li>
<li><a href="../ar465269/index.html">ุชุฏุฑูุจ Cisco 200-125 CCNA v3.0. ููู 26. DNS ู DHCP</a></li>
<li><a href="../ar465271/index.html">ูุฑุงุตูุฉ ุณุฑูุฉ ูุบุณู ุงูุฃููุงู ูู ุฎูุงู ุชูุฏูู ุงูุทุนุงู ูุฎุฏูุงุช ุญุฌุฒ ุงูููุงุฏู.</a></li>
<li><a href="../ar465273/index.html">ููู ูุญูู ูุทูุฑู ุงูุจุฑุงูุฌ Microgaming ุงููุณุชุฎุฏููู ูู ุงูุงุฎุชุฑุงูุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>