<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äçüè≠ ü§ûüèª üîè Arraste e solte componentes para usu√°rios cegos? Voc√™ est√° brincando üçá üôÇ üàöÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O que une Trello, Gmail, Aviasales e Google Keep? Cada um deles possui componentes de arrastar e soltar que podem ser arrastados com o mouse. O uso de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arraste e solte componentes para usu√°rios cegos? Voc√™ est√° brincando</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/468541/"> O que une Trello, Gmail, Aviasales e Google Keep?  Cada um deles possui componentes de arrastar e soltar que podem ser arrastados com o mouse.  O uso desses componentes torna os sites realmente convenientes, porque na vida real costumamos usar esse padr√£o.  √â natural que movamos as coisas, por isso, na Web, queremos mover elementos da tela de um lugar para outro, como adesivos em um quadro negro ou √≠m√£s em uma geladeira.  Classifica√ß√£o de listas de tarefas, organiza√ß√£o de pain√©is, download de arquivos - simplesmente n√£o podemos imaginar todos esses eventos sem arrastar e soltar elementos na p√°gina. <br><br><img src="https://habrastorage.org/webt/xy/bl/3z/xybl3zvzibklnt3lr1w4gtn-hhw.jpeg"><br><br>  Mas h√° uma nuance.  Quando desenvolvemos esses componentes, achamos que nossos usu√°rios veem fisicamente a tela e os elementos, podem peg√°-los com o mouse e arrast√°-los. Freq√ºentemente, mas esquecemos o segmento de usu√°rios com problemas de vis√£o.  Criamos componentes que n√£o podem ser usados ‚Äã‚Äãpor um grande grupo de pessoas que simplesmente n√£o os veem.  Como tornar os componentes de arrastar e soltar acess√≠veis tamb√©m? <br><br>  <b>Sergey Krieger</b> √© desenvolvedor front-end da SinnerSchrader.  Al√©m do desenvolvimento de front-end, ele est√° interessado ativamente no t√≥pico de acessibilidade da Web e discutir√° algumas maneiras de aument√°-lo.  Sob o corte - uma hist√≥ria sobre a cria√ß√£o de componentes de arrastar e soltar para quem n√£o v√™ a tela e usa outros dispositivos para interagir com o navegador. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  Slider </h2><br>  Vamos come√ßar com uma tela simples no site Aviasales da tela.  Digite o ponto de partida, o ponto de chegada e a lista de voos para sele√ß√£o √© exibida na tela.  Pode haver muitos voos, eles podem ser filtrados por pre√ßo, hora e outros par√¢metros.  Os controles deslizantes s√£o usados ‚Äã‚Äãpara filtrar os resultados no site da Aviasales.  Eles ficam √≥timos, s√£o f√°ceis de usar. <br><br><img src="https://habrastorage.org/webt/ue/wx/7o/uewx7oalw17sy1dg05e1lkk4mvy.jpeg"><br><br>  Nossa tarefa √© imaginar que somos os desenvolvedores deste site.  Vamos tentar recriar esses controles deslizantes e ver como eles funcionam em diferentes casos. <br><br><h3>  Controle deslizante nativo </h3><br>  A primeira coisa a se pensar √© se os elementos nativos podem ser usados ‚Äã‚Äãpara nossa funcionalidade?  Se houver essa oportunidade, seguimos por esse caminho, porque os elementos nativos economizar√£o muito tempo. <br><br>  Vamos fazer um exemplo simples: o controle deslizante se move ao longo da trilha e o valor do controle deslizante muda.  Mova o controle deslizante para a direita - a cor da tela muda de branco para rosa brilhante, se voltar - novamente para branco. <br><br><img src="https://habrastorage.org/webt/u0/qx/3j/u0qx3jhkrepn96nsdnf81-c0z1e.gif"><br><br>  O controle deslizante funciona de maneira simples - o controle deslizante desliza ao longo da trilha e o controle deslizante retorna algum valor. <br><br>  Ningu√©m usar√° esse controle deslizante na produ√ß√£o.  Nenhum designer permitir√° que ele use, porque ele parece fraco.  N√≥s, como desenvolvedores, podemos resolver esse problema.  H√° v√°rias propriedades CSS com prefixos para cada navegador, nas quais voc√™ pode estilizar elementos individuais do controle deslizante e refin√°-lo. <br><br><pre><code class="css hljs">: : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-webkit-slider-runnable-track</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-webkit-sHder-thumb</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-moz-range-track</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-moz-range-thumb</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ns-track</span></span> <span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:-ms-thumb</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ms-fill-lower</span></span> : : <span class="hljs-selector-tag"><span class="hljs-selector-tag">-ms-fill-upper</span></span></code> </pre> <br>  Voc√™ pode usar as propriedades manualmente, mas isso n√£o √© uma tarefa trivial.  As propriedades funcionam em diferentes navegadores, e os testes levar√£o muito tempo. <br><br>  Mas h√° uma ferramenta especial que resolve o problema - o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site de Daniel Stern</a> .  Voc√™ estiliza manualmente o controle deslizante, copia o c√≥digo CSS e tudo funciona.  O controle deslizante nativo agora √© um elemento HTML de <code>input</code> com o <code>range</code> tipos, mas funciona como antes - movendo o controle deslizante. <br><br><h3>  Teste de controle deslizante </h3><br>  Para resolver o problema at√© o fim - testamos.  Al√©m disso, testaremos n√£o apenas o controle deslizante, mas tamb√©m outros elementos em tr√™s par√¢metros. <br><br><ul><li>  <b>O mouse</b>  Testar a opera√ß√£o do componente com o mouse √© exatamente o que sempre fazemos. <br></li><li>  <b>Teclado</b>  Al√©m do mouse, adaptamos o controle deslizante para pessoas com problemas de vis√£o.  Esses usu√°rios n√£o veem a tela e usam o teclado para interagir com o computador e o navegador <br></li><li>  <b>Leitor de tela</b> - um dispositivo especial que l√™ as informa√ß√µes na tela. <br></li></ul><br>  <i>Nota: daqui em diante √© mais conveniente combinar testes de leitura e visualiza√ß√£o em grava√ß√µes de v√≠deo - isso √© mais √≥bvio.</i>  <i>Um segmento de v√≠deo com teste do controle deslizante come√ßar√° no momento certo.</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <b>O mouse</b>  Nos agarramos ao controle deslizante, puxamos para a direita e esquerda.  Se tudo mudar - √≥timo. <br><br>  <b>Teclado</b>  Use a tecla Tab para ir para o controle deslizante e use as setas para mov√™-lo ao longo da trilha. <br><br>  <b>Leitor de tela</b> .  Aqui √© mais complicado.  Imagine que n√£o vemos a tela - desligue a luz da tela e ligue o leitor de tela.  Ele diz: <br><br>  <i>- O VoiceOver est√° ativado no Chrome</i> . <br><br>  Usando a tecla Tab, v√° para o controle deslizante. <br><br>  <i>Zero.</i>  <i>Aplica√ß√£o de controle deslizante estilizado.</i> <br><br>  O leitor de tela exprime informa√ß√µes: valor, nome do controle deslizante e outras informa√ß√µes relacionadas, que tamb√©m podem ser √∫teis.  Come√ßamos a mover o controle deslizante: <br><br>  <i>- Um, dois, tr√™s, quatro, cinco.</i> <br><br>  Se ouvirmos a contagem regressiva, tudo funcionar√°.  Acenda a luz e verifique o resultado.  Os testes terminaram. <br><br>  Parece que n√£o fizemos nada, mas simplesmente estilizamos o controle deslizante.  Qual √© o nosso trabalho sobre acessibilidade?  O fato √© que n√£o houve trabalho - usamos o elemento nativo. <br><br><blockquote>  Se o seu aplicativo puder usar elementos nativos: controle deslizante, bot√µes, caixas de sele√ß√£o, fique √† vontade para us√°-los e economizar tempo.  Esses elementos j√° suportam teclado e leitor de tela. </blockquote><br><h3>  Controle deslizante personalizado </h3><br>  Suponha que o controle deslizante nativo n√£o seja nossa op√ß√£o.  Vamos dar uma olhada no c√≥digo Aviasales e ver que aqui n√£o s√£o os controles deslizantes que acabamos de testar. <br><br><img src="https://habrastorage.org/webt/yd/nj/lw/ydnjlwzcvn_rkij3l_z5sgvi5ti.jpeg"><br><br>  Esta n√£o √© uma <code>input</code> com o <code>range</code> tipos, mas um conjunto de <code>div</code> estilizados conforme desejado pelo designer.  Parece que n√£o h√° diferen√ßa, tudo funciona. <br><br>  Vamos verificar isso e complicar da mesma forma a tarefa criando manualmente um controle deslizante.  A chave para mover o controle deslizante ao longo da pista √© o posicionamento absoluto: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">position</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">absolute</span></span></code> </pre> <br>  Posicionamos absolutamente o controle deslizante em rela√ß√£o √† pista e, dependendo da sua posi√ß√£o, calculamos o valor do controle deslizante. <br><br>  Para determinar o momento da captura de um elemento com o mouse, usamos o evento <code>mousedown</code> .  Para rastrear o movimento do evento - <code>mousemove</code> e <code>mouseup</code> nos dir√£o que lan√ßamos o controle deslizante.  Para a tela de toque, tamb√©m usaremos v√°rios eventos: <code>touchstart</code> , <code>touchmove</code> e <code>touchend</code> . <br><br>  Parece que tudo √© simples.  O controle deslizante ter√° a mesma apar√™ncia do exemplo anterior, mas no c√≥digo n√£o √© um controle deslizante, mas um conjunto de <code>div</code> estilizados e o JavaScript ser√° respons√°vel por mov√™-lo.  Ao trabalhar com um mouse, isso ser√° impercept√≠vel, mas h√° uma nuance no teclado.  Para que o teclado possa capturar esse controle deslizante, oferecemos a propriedade de focar no atributo <code>tabindex</code> e usar JavaScript para rastrear o clique nas setas. <br><br><h3>  Teste do controle deslizante personalizado </h3><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Com um leitor de tela, ser√° mais dif√≠cil.  Desligue a luz, ligue o leitor de tela e tente alterar o valor.  O leitor de tela exprime as a√ß√µes e, se ele disser algo estranho, por exemplo, "grupos", pensamos. <br><br>  "Grupos" √© o que o leitor de tela expressa quando l√™ um div ou outro elemento que n√£o possui nenhum papel sem√¢ntico.  Qualquer palavra que n√£o se refira ao controle deslizante diz que a acessibilidade ainda n√£o foi alcan√ßada.  Para disponibilizar o controle deslizante, usamos os atributos ARIA: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"thumb"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tabindex</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"slider"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-lab</span></span></span><span class="hljs-tag"></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">l</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-valuenow</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-valuemin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-valuenax</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Precisamos dizer ao leitor de tela que nosso elemento de estilo usual √© um controle deslizante.  Faremos isso usando <code>role</code> com o <code>slider</code> valor.  Em seguida, atribua o nome ao controle deslizante usando o <code>aria-labl</code> .  Definimos o valor atual do controle deslizante, o valor m√≠nimo e m√°ximo do controle deslizante.  Usando esses cinco atributos do ARIA, animaremos o controle deslizante e faremos com que o leitor de tela diga o que precisamos. <br><br>  Usando elementos de marca√ß√£o, JavaScript e ARIA, disponibilizamos o controle deslizante personalizado para todos os usu√°rios. <br><br><h2>  Classifica√ß√£o </h2><br>  Outra abordagem para implementar os componentes de arrastar e soltar √© a classifica√ß√£o.  Geralmente, os sites t√™m listas de itens que s√£o bons para classificar. <br><br><img src="https://habrastorage.org/webt/8h/vt/wm/8hvtwmxdsv-1vxevekfds05md04.jpeg"><br><br>  Acima est√° uma captura de tela do site do Google Keep - √© um servi√ßo que permite criar listas de tarefas, folhas de tarefas.  Uma folha de tarefas tem um nome, uma lista de elementos, a capacidade de marcar cada elemento, exclu√≠-lo e adicionar um novo.  Nossa tarefa √© recriar essa funcionalidade. <br><br>  √â assim que o widget da lista de tarefas se parece. <br><br><img src="https://habrastorage.org/webt/wj/vg/rp/wjvgrpwrdzpgct2-bnwfp7z_q58.jpeg"><br><br>  Tem: <br><br><ul><li>  nome - lista de tarefas; <br></li><li>  Elementos: passear com o cachorro, marcar uma consulta com o m√©dico, que pode ser anotada ou exclu√≠da; <br></li><li>  a capacidade de adicionar novos elementos - adicione uma tarefa. <br></li></ul><br>  Quando adicionamos um novo item, como "fazer o jantar", ele √© colocado no final da lista.  Este √© um comportamento l√≥gico - adicionamos o item por √∫ltimo.  Mas vamos supor que essas listas tenham algum tipo de prioridade.  Por exemplo, ap√≥s um dia √∫til, o jantar √© mais importante do que passear com um cachorro.  Gostar√≠amos de passar para o in√≠cio - os elementos priorit√°rios devem estar no topo da lista.  Como resolver este problema? <br><br>  Como mover elementos, mesmo sem pensar em acessibilidade?  J√° sabemos de uma maneira - usando posicionamento absoluto.  Outra maneira √© adicionar o atributo <code>draggable</code> aos elementos.  Se voc√™ adicionar esse atributo como <code>true</code> qualquer elemento, ele ser√° arrastado.  Voc√™ pode agarr√°-lo com o mouse e arrast√°-lo para outro local na tela. <br><br><blockquote>  Mas nem todos os elementos precisam do atributo <code>draggable</code> .  Imagens e links n√£o s√£o necess√°rios - eles s√£o arrastados e soltos por padr√£o. </blockquote><br>  Somente se quisermos cancelar essa funcionalidade, definiremos <code>draggable</code> com valor <code>false</code> . <br><br><h3>  Transfer√™ncia de dados </h3><br>  Existem dois elementos na tela.  √Ä esquerda, h√° uma imagem na qual o atributo <code>draggable</code> est√° impl√≠cito por padr√£o.  √Ä direita, h√° um elemento com uma linha tracejada.  Nossa tarefa √© arrastar a imagem para dentro do quadrado pontilhado, que chamei de ‚Äúzona de soltar‚Äù. <br><br><img src="https://habrastorage.org/webt/2m/tj/-d/2mtj-di88v16scbsrxxr6toswsq.jpeg"><br><br>  Pegue a imagem e arraste-a para a zona de soltar.  Esta funcionalidade familiar: podemos inserir a imagem na zona de arrasto, sair quando liberada - a imagem est√° dentro.  Queremos a mesma funcionalidade em nossa lista de tarefas. <br><br><img src="https://habrastorage.org/webt/r_/u_/rf/r_u_rf1xnlxdk1hrgz6tvyt62tw.gif"><br><br>  Mas antes que voc√™ veja como a lista de tarefas funciona com essa tecnologia, descobriremos o que acontece quando arrastamos um item de um lugar para outro.  Uma lista de eventos acontece em cada um desses elementos. <br><br>  Existem tr√™s eventos em um item arrastado. <br><br>  <b>Dragstart</b> , que acontece uma vez quando iniciamos o processo de arrastar um elemento.  Este √© um evento importante, mais tarde descobriremos o porqu√™. <br><br>  <b>Um arrasto</b> que ocorre regularmente a cada poucas centenas de milissegundos.  Dependendo do navegador, o valor muda, mas o evento √© frequente.  Usando esse atributo, voc√™ pode rastrear a posi√ß√£o na tela do elemento que estamos arrastando. <br><br>  <b>Arrastar</b> - dispara quando liberamos um item com o mouse. <br><br>  Em um elemento que aceita outros elementos, quatro eventos s√£o disparados. <br><br>  <b>Dragenter</b> - alerta quando arrastamos um item dentro de outro item. <br><br>  <b>Dragover</b> - diz quando come√ßamos a mov√™-lo para dentro. <br><br>  <b>Dragleave</b> - quando <b>movemos</b> um elemento al√©m dos limites de outro elemento, sem soltar o mouse. <br><br>  <b>Drop</b> √© o evento mais importante que √© acionado quando liberamos o mouse dentro do elemento receptor. <br><br>  Todos esses 4 eventos s√£o apenas pr√©-requisitos para o movimento do elemento - eles mesmos n√£o fazem nada.  Usando-os, voc√™ pode decidir o movimento de um elemento.  Fazemos assim: <br><br><pre> <code class="javascript hljs">draggable.addEventListener(<span class="hljs-string"><span class="hljs-string">"dragstart"</span></span>, e =&gt; { e.dataTransfer.setData(<span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>, e.target.id); }); dropZone.addEventListener(<span class="hljs-string"><span class="hljs-string">"drop"</span></span>, e =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> id = e.dataTransfer.getData(<span class="hljs-string"><span class="hljs-string">"text/plain"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> el = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(id); });</code> </pre> <br>  Podemos adicionar dados manualmente ao evento que √© acionado no in√≠cio no elemento que estamos arrastando.  Usando o m√©todo <code>dataTransfer.setData</code> , adicionamos o seletor do item que estamos arrastando.  No nosso caso, isso √© <code>id</code> . <br><br>  No final, quando o evento Drop √© acionado no elemento de recebimento, obtemos esses dados usando o m√©todo <code>dataTransfer.getData</code> .  Acontece que teremos o <code>id</code> elemento que queremos mover.  Em seguida, usando JavaScript comum, selecione esse elemento na p√°gina e mova-o para qualquer lugar.  N√≥s nos movemos √† m√£o.  Para tornar isso poss√≠vel, usamos eventos no elemento arrastar e soltar. <br><br>  Podemos arrastar qualquer elemento sobre qualquer outro elemento.  Basta arrastar o elemento pela p√°gina e apontar para outras pessoas.  Mover n√£o significa que um elemento deve aceitar outro se n√£o foi planejado.  Portanto, os navegadores funcionam desta maneira: por padr√£o, nenhum elemento pode aceitar outros. <br><br>  Se queremos ensinar o elemento a aceitar outras pessoas, precisamos cancelar esse valor usando o m√©todo <code>e.preventDefault()</code> no <code>dragenter</code> e <code>dragover</code> , que √© <code>dropZone</code> elemento <code>dropZone</code> . <br><br><pre> <code class="javascript hljs">dropZone.addEventListener(<span class="hljs-string"><span class="hljs-string">"dragenter"</span></span>, e =&gt; { e.preventDefault(); }); dropZone.addEventListener(<span class="hljs-string"><span class="hljs-string">"dragover¬´, e =&gt; { e.preventDefault(); });</span></span></code> </pre> <br>  Eu testei essa combina√ß√£o em diferentes navegadores.  Por exemplo, apenas o <code>dragenter</code> funciona no Chrome, portanto, use o <code>dragenter</code> e o <code>dragover</code> para uma solu√ß√£o entre navegadores. <br><br>  Vamos ver como isso funciona na lista de tarefas. <br><br><img src="https://habrastorage.org/webt/w3/7m/dw/w37mdwtlrdvhviswwdbbpvj23zu.jpeg"><br><br>  Nossa tarefa √© arrastar o √∫ltimo item da lista de tarefas familiar para a primeira posi√ß√£o.  Passe o mouse sobre um elemento e um elemento com 6 pontos verticais aparece √† esquerda.  No mundo UX, isso significa que voc√™ pode arrast√°-lo. <br><br><img src="https://habrastorage.org/webt/wx/lb/ju/wxlbju_v8d-jwy2asx3vkp-wgma.gif"><br><br>  Passamos o mouse sobre ele e, se ele mudar, esse √© um sinal de que o elemento est√° pronto para se mover.  Puxe o mouse e um indicador rosa aparecer√°, indicando onde voc√™ pode mover o item.  O restante da t√©cnica √© colocar o objeto na posi√ß√£o desejada. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b4a/48a/1e1/b4a48a1e11e23220d4fe08daddd96fee.gif"><br><br>  Agora vamos ensinar o teclado e o leitor de tela a processar corretamente o que acabamos de fazer. <br><br><h3>  Teclado </h3><br>  Com o teclado, tudo n√£o √© t√£o complicado.  Com o teclado, usamos o mesmo padr√£o do mouse: encontramos o elemento que queremos mover, selecionamos, movemos e depois liberamos, e ele se encaixa no lugar. <br><br>  Pressione Tab e um √≠cone familiar de 6 pontos aparece √† esquerda do primeiro elemento, o que indica que voc√™ pode arrastar e soltar.  Por padr√£o, ele est√° oculto e sua apar√™ncia significa que tomou o foco.  Este √© um sinal de que voc√™ pode interagir com esse elemento. <br><br>  Introduzimos o primeiro elemento "cozinhar o jantar" no "modo de sele√ß√£o" pressionando "Enter".  Este item est√° atualmente recebendo op√ß√µes adicionais.  As setas para cima e para baixo podem mov√™-lo para outras posi√ß√µes.  Pressione a seta para baixo, o item move uma posi√ß√£o, mais uma vez para outra.  Ent√£o, movemos manualmente o componente.  Esse n√£o √© o padr√£o no navegador - n√≥s o escrevemos manualmente em JavaScript. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e62/d92/a1b/e62d92a1b2d10dc8fe1d71b780b23ced.gif"><br><br>  Quando queremos remover a sele√ß√£o do elemento, pressione "Esc" ou qualquer outra tecla - o elemento perde a sele√ß√£o e permanece no lugar certo. <br><br><h3>  Leitor de tela </h3><br>  Tudo est√° claro com o teclado.  Quase resolvemos o problema.  Resta ensinar ao leitor de tela a pronunciar a√ß√µes.  Tudo o que √© necess√°rio √© adicionar instru√ß√µes para que o leitor de tela saiba o que est√° acontecendo: onde est√° e o que fazer. <br><br>  Para controlar o que o leitor de tela diz, usaremos a tecnologia da regi√£o Live.  Este √© um conjunto de atributos que podem ser adicionados aos elementos.  Dependendo dos atributos, o leitor de tela pronuncia frases diferentes. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"live-region visually-hidden"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">aria-live</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"polite"</span></span></span><span class="hljs-tag">    </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"status"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> liveRegion = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">".live-region¬´); liveRegion.textContent = ' ';</span></span></code> </pre> <br>  <code>aria-live</code> o atributo <code>aria-live</code> com um valor <code>polite</code> <code>div</code> vazia normal e a <code>role</code> com um valor de <code>status</code> .  Para um leitor de tela, este √© um sinal para ouvir um elemento.  Quando voc√™ quiser que o leitor de tela diga alguma coisa, atualize o conte√∫do usando JavaScript, e o leitor de tela dir√° esse conte√∫do. <br><br>  Vamos ver como isso funciona. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Nossa tarefa √© mover o primeiro elemento para a √∫ltima posi√ß√£o.  Desligue a luz da tela, ligue o leitor de tela. <br><br>  <i>- O VoiceOver est√° ativado no Chrome.</i> <br><br>  Come√ßamos a mover o item.  Primeiro, procure nosso widget - mova-se pelos cabe√ßalhos.  Vozes do leitor de tela: <br><br>  <i>- T√≠tulo de n√≠vel dois.</i>  <i>Lista de tarefas.</i> <br><br>  Encontrei.  Continuamos a clicar na tecla Tab. <br><br>  <i>- Lista de objetos 3. Pressione a tecla ‚ÄúEnter‚Äù para selecionar o elemento ‚ÄúAnde com o cachorro‚Äù.</i>  <i>Grupos.</i> <br><br>  Primeiro, o leitor de tela pronuncia o n√∫mero de elementos na lista, para que os usu√°rios entendam quantos elementos est√£o na lista.  Em seguida, ele pronuncia uma instru√ß√£o - o que fazer para selecionar um item: "Pressione a tecla Enter e o nome deste componente. Ficou claro o que fazer - pressione a tecla Enter. <br><br>  <i>- O elemento "Passear com o cachorro" est√° selecionado.</i>  <i>Use as teclas Para cima e Para baixo para mover.</i>  <i>Use a tecla Esc para desmarcar.</i> <br><br>  Foi sobre estas instru√ß√µes que falei: quando voc√™ seleciona um elemento, o leitor de tela fornece as instru√ß√µes que criamos.  Atualizamos o leitor de tela e pronuncia o texto que colocamos no elemento Regi√£o ao vivo.  Com as instru√ß√µes, fica claro o que fazer - use as teclas Para cima / Para baixo e Esc para desmarcar.  Mover para baixo uma posi√ß√£o. <br><br>  <i>- O elemento "Passear com o cachorro" √© movido para a posi√ß√£o 2.</i> <br><br>  Mais uma vez <br><br>  <i>- O elemento "Passear com o cachorro" √© movido para a posi√ß√£o 3.</i> <br><br>  O item est√° no final da lista.  Acenda a luz e verifique se o elemento est√° realmente na √∫ltima posi√ß√£o. <br><br>  Pressione "Esc" para desmarcar. <br><br>  <i>- O item "D√™ um passeio com um cachorro" foi desmarcado.</i> <br><br><blockquote>  Com a ajuda dos atributos imagina√ß√£o, marca√ß√£o, JavaScript e ARIA, disponibilizamos um widget dif√≠cil para usu√°rios com problemas de vis√£o. </blockquote><br><h2>  Movendo </h2><br>  Vejamos como mover elementos pela p√°gina usando o Trello como exemplo.  Este √© um rastreador de tarefas com colunas que indicam o status das tarefas.  Arrastar e soltar tarefas de uma coluna para outra corresponde a uma altera√ß√£o no status da tarefa. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5bf/b85/c45/5bfb85c458996b5b47c627254d5f6fd9.jpg"><br><br>  Simule uma vers√£o simplificada do Trello para descobrir como disponibilizar esse componente.  Na minha vers√£o, existem tr√™s colunas: "Eu vou fazer", "Eu fa√ßo", "Conclu√≠do". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/70d/9d1/160/70d9d1160ad3845ed34dbdbe0110c160.gif"><br><br>  As tarefas podem ser arrastadas de um lugar para outro: pegue o componente com o mouse, arraste-o para a pr√≥xima coluna, solte-o - ele permanece l√°. <br><br><h3>  Teclado </h3><br>  Tudo √© simples com o mouse; estamos familiarizados com o atributo <code>draggable</code> com o valor <code>true</code> do exemplo anterior.  Com o teclado, foi poss√≠vel fazer a mesma op√ß√£o - mover a tarefa de coluna em coluna com setas.  Por√©m, se as colunas forem 5 ou 8, a mudan√ßa da primeira para a √∫ltima levar√° 5 ou 8 cliques na tecla Direita 5 ou 8 vezes, o que √© inconveniente e dificulta o trabalho com o componente. <br><br>  Faremos o contr√°rio.  Pressione a tecla Tab, o foco se move para o primeiro elemento.  Pressione a tecla novamente e um novo elemento aparecer√° oculto at√© que o foco se movesse para ele. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/130/949/8f9/1309498f9ad7190823280c901d1f0d4d.gif"><br><br>  Tr√™s pontos verticais significam que o item ter√° um menu.  O √≠cone pode ser diferente.  O comportamento padr√£o do navegador ao trabalhar com o elemento <code>select</code> √© clicar em "Espa√ßo", ap√≥s o qual um menu √© exibido. <br><br>  Resolveremos o problema usando JavaScript, mas daremos aos usu√°rios a oportunidade de escolher qual coluna eles desejam mover esta ou aquela tarefa. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3dd/14a/1c5/3dd14a1c560be0797852e02380576b32.gif"><br><br>  Passamos para a √∫ltima coluna, pressionamos ‚ÄúEnter‚Äù e tudo funcionou - o elemento foi para onde quer√≠amos. <br><br><h3>  Leitor de tela </h3><br>  Adicione instru√ß√µes para o leitor de tela.  O uso do elemento de <code>select</code> regular oferece uma grande vantagem, pois est√° dispon√≠vel por padr√£o.  Vamos ver o que podemos fazer. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Desligue a luz da tela, ligue o leitor de tela. <br><br>  <i>- O VoiceOver est√° ativado no Chrome.</i> <br><br>  Passamos para o primeiro elemento.  O leitor de tela diz quantos objetos est√£o na lista.  Usamos a <code></code> elementos sem√¢nticos e o nome do elemento.  Pressione Tab. <br><br>  <i>- "Make": selecione o bot√£o pop-up recolhido do bot√£o "Play Soccer", grupos.</i> <br><br>  O leitor de tela pode pronunciar palavras estranhas.  Ele chama o nome da coluna "Make" e "pop-up minimizado" para o leitor de tela significa que usaremos o menu - para o usu√°rio do leitor de tela isso ficar√° claro. "Minimizado", "pop-up" e "bot√£o" ser√£o pronunciados diferentemente em leitores de tela diferentes, mas n√£o precisamos nos preocupar muito com isso, porque os usu√°rios do leitor de tela est√£o familiarizados com esse comportamento. <br><br>  Nossa tarefa √© selecionar a coluna desejada da lista. <br><br>  <i>- N√£o √© zero, fa√ßa.</i>  <i>Selecione o bot√£o pop-up expandido da coluna.</i>  <i>Sua posi√ß√£o atual na tela ... "Fazendo".</i>  <i>"Conclu√≠do" ... O item "Jogar futebol" foi movido para a coluna "Conclu√≠do".</i> <br><br>  Este √© o texto que adicionamos manualmente para informar aos usu√°rios que o fizemos.  √â assim que nosso quadro de tarefas funciona. <br><br><h2>  Carregar arquivos </h2><br>  A funcionalidade de upload de arquivo tamb√©m √© encontrada em sites, por exemplo, para anexar arquivos a um email.  Portanto, no meu exemplo, o email √© Gmail. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c6c/162/9af/c6c1629aff5082ed186d55c096380d34.jpg"><br><br>  H√° um elemento com uma linha tracejada na tela.  √â aqui que vamos arrastar nossos arquivos. <br><br><img src="https://habrastorage.org/webt/3f/1u/7v/3f1u7vujslz3sxoiybyis4lxopy.gif"><br><br>  Para fazer isso, abra o explorer onde os arquivos est√£o localizados e arraste o arquivo com o mouse para a zona tracejada.  Ap√≥s arrastar e soltar, o item muda de estado, libera o arquivo, o download √© iniciado.  No final do download, notificaremos o usu√°rio de que tudo foi baixado com sucesso. <br><br><h3>  Teclado </h3><br>  Com o teclado, tudo √© resolvido de forma simples.  H√° um elemento de <code>input</code> sem√¢ntica do tipo <code>file</code> .  Se voc√™ o usar, quando clicar nesse item, a caixa de di√°logo Explorer ser√° aberta automaticamente, onde voc√™ poder√° selecionar os arquivos no sistema operacional.  Os estilos de janela podem ser definidos de maneira absolutamente qualquer, dependendo dos desejos do seu designer. <br><br><img src="https://habrastorage.org/webt/q7/13/ss/q713sspf4k5lmwca19b-9po0w5i.gif"><br><br>  Clique no item, uma caixa de di√°logo √© aberta.  Como usamos o elemento de <code>input</code> nativo, voc√™ tamb√©m pode ir para esse elemento com a tecla Tab, pressionar a barra de espa√ßo e uma caixa de di√°logo ser√° aberta.  Os elementos s√£o selecionados com a tecla Enter e tudo acontece da mesma maneira. <br><br>  Tudo funciona com o mouse e o teclado.  Para o leitor de tela, voc√™ pode fazer algo que, por padr√£o, n√£o √© fornecido por elementos nativos. <br><br><h3>  Leitor de tela </h3><br>  O elemento "select" funcionar√° e ainda podemos abrir uma caixa de di√°logo com o SO.          ,   screen reader    . <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U1UjLN4I9fA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  screen reader.      ,     . <br><br> <i>‚Äî  button application.</i> <br><br>    screen reader. <br><br> <i>‚Äî   button.  ‚Ä¶  image.png. 31 ‚Ä¶ 0%‚Ä¶ 16% ‚Ä¶ 73% ‚Ä¶ 100% .  image.png  .</i> <br><br>  ?  ,     ,  .      ,   screen reader   ,      .  ,     ,    . <br><br>       ,    screen reader    .          ‚Äî 10%, 20%...100%.    ,   ,  ,   . <br><br>      Live region,   .   screen reader,     ,     ARIA Live,   screen reader         .       . <br><br><h2>  Sum√°rio </h2><br> <b> </b> .    ‚Äî  .   , ,       screen reader.     , ,           . <br><br> <b>HTML + JavaScript + ARIA</b> .   Drag-&amp;-Drop      , JavaScript   ARIA.    ,      . <br><br> <b>¬´ ¬ª</b> .     ,  ¬´ ¬ª:  , ,  ,    ,   . <br><br> <b> </b> .   :      , ,   . <br><br><h2>  </h2><br>   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">W3.org</a> ‚Äî     .              . <br><br>   ,     ,    <b> </b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">inclusive-components.design</a> .          . ,       ,       ,   ,   ,  . <br><br> <b></b> .       ,     ,    <b> </b> ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">  </a> ¬ª.      ‚Äî     .      . <br><br> <b> </b> .      ,       ‚Äî       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.google.com/url%3Fq%3D">Medium    </a> .       ,       .     ,    . ,        ,     .      .    ,     . <br><br><blockquote>       .        FrontendConf ++  .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">FrontendConf 2019</a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  Leonie Watson</a> ‚Äî ,    W3C     W3C  -.   Leonie      screen reader.  ,       ,        ,   ,         . <br><br>  FrontendConf   ,     .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>  ,       . </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt468541/">https://habr.com/ru/post/pt468541/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt468529/index.html">Domando Gorynych ou Descompilando o eBPF em Ghidra</a></li>
<li><a href="../pt468531/index.html">O primeiro bot PHP para VKontakte</a></li>
<li><a href="../pt468533/index.html">Carona no DevOps com o Express 42</a></li>
<li><a href="../pt468535/index.html">N√£o precisa de logs?</a></li>
<li><a href="../pt468537/index.html">No√ß√µes b√°sicas de DevOps. Entrada no projeto a partir do zero</a></li>
<li><a href="../pt468543/index.html">Comit√™ do programa durante a semana FrontendConf. Entrevista com Sergey Popov</a></li>
<li><a href="../pt468545/index.html">"Alice, vamos para o frontend!"</a></li>
<li><a href="../pt468547/index.html">Falando Ingl√™s, CSS, Grade e Acessibilidade no FrontendConf</a></li>
<li><a href="../pt468549/index.html">Limite de GPU. Como transferir tudo para a placa de v√≠deo e um pouco mais. Anima√ß√µes</a></li>
<li><a href="../pt468553/index.html">Gerenciamento de par√¢metros em aplicativos de neg√≥cios semelhantes a um sistema de controle de vers√£o</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>