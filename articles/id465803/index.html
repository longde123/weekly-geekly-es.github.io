<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¼â€âš–ï¸ ğŸ¤¶ ğŸ”Œ Maven-cara untuk membangun proyek Go ğŸ¤³ğŸ¾ âœ‹ğŸ¼ ğŸ˜©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pertama, sedikit latar belakang. Pada awal 2010-an, saya membuat utilitas konverter kecil untuk file BIN dari emulator BK-0010 ke file WAV. Utilitas i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Maven-cara untuk membangun proyek Go</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465803/"><p>  Pertama, sedikit latar belakang.  Pada awal 2010-an, saya membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">utilitas konverter kecil</a> untuk file BIN dari emulator <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BK-0010</a> ke file WAV.  Utilitas ini ditulis dalam Python dengan tujuan portabilitas maksimum, ia bekerja tanpa masalah dan saya lupa sebentar.  Tetapi pada tahun 2016, pengguna muncul, yang tidak tahu tentang Python dan cara menginstalnya.  Dia menginginkan monolit yang dapat dieksekusi sederhana yang akan "hanya bekerja"  Permintaannya tampak logis bagi saya, dan saya memutuskan untuk mengolah utilitas sebagai satu set file biner yang dapat dieksekusi untuk platform utama. </p><br><p><img src="https://habrastorage.org/webt/dm/hq/kd/dmhqkdcz2pv6rlqs3af4f2_5jv4.png" alt="gambar"></p><br><p> Python dan Java tidak memberikan kesempatan seperti itu (kecuali tentu saja ada keinginan untuk mengembang utilitas oleh puluhan megabyte).  Secara potensial, solusinya dapat dibuat dalam C / C ++, tetapi dengan cakupan yang ditargetkan dari platform, kesulitan dengan kompilasi silang akan melampaui waktu yang diberikan untuk tugas (dan saya harus mendukung perakitan silang untuk Windows, Linux dan MacOS dalam 64 dan 32 bit opsi).  Jadi saya menarik perhatian pada bahasa Go, yang mulai populer, yang pada saat itu sudah cukup matang dan satu-satunya yang, <strong>tanpa "menari dengan rebana," memberikan semua kompilasi silang yang diperlukan langsung dari kotak (!)</strong> . </p><a name="habracut"></a><br><p>  Satu ketidaknyamanan yang sangat mengganggu saya tentang Go (terutama sebagai pengembang Java) adalah kurangnya perhatian dalam mengatur struktur proyek Go dan kebutuhan untuk terus-menerus menyesuaikan lingkungan.  Mungkin para pengembang Go awalnya merencanakan untuk penggunaan tertentu atau ada fokus pada wadah, tetapi saya terbiasa dengan yang â€œenakâ€ dan karena alat utama saya di Jawa adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Maven</a> , saya memutuskan untuk membuat plug-in yang membuat panggilan ke utilitas dan perintah GoSDK dengan generasi otomatis dari yang diperlukan. variabel lingkungan. </p><br><p> Itu tidak menarik untuk membuat plugin sederhana yang akan memanggil utilitas go, dan saya memutuskan untuk pergi dari langkah - menginstal GoSDK pada platform host.  Segera setelah start, keberadaan GoSDK diperiksa di direktori konfigurasinya (saya memilih path default <code>~/.mvnGoLang</code> ) dan, dengan tidak adanya versi yang diperlukan, arsip GoSDK secara otomatis diunduh dan dibuka dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs resmi</a> .  Ini memungkinkan kami membuat proyek Go portabel tanpa khawatir tentang apakah alat versi yang diperlukan sudah diinstal sebelumnya dan dikonfigurasi.  Tentu saja, dengan banyak pengaturan, saya melihat kemungkinan menggunakan versi pra-instal dan menambahkan pengaturan untuk semua langkah dalam proses, karena untuk banyak masalah seperti menonaktifkan verifikasi sertifikat SSL atau umumnya membuat permintaan HTTP di luar (seperti untuk proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Keycloak</a> ) sangat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penting</a> . </p><br><p>  Langkah selanjutnya, saya membungkus Maven-tujuan (sasaran) semua perintah utilitas yang disediakan saat itu.  Karena ada kemungkinan bahwa perintah baru lain akan muncul dengan versi baru GoSDK, tugas <code>custom</code> ditambahkan yang memungkinkan pengguna untuk menentukan perintah yang diinginkan sendiri.  Secara default, dalam kerangka fase-maven (fase), tugas dijalankan dalam urutan berikut: </p><br><ul><li>  <strong>bersihkan</strong> sebagai <code>default-clean</code> dalam fase <em>clean</em> </li><li>  <strong>fix</strong> as <code>default-fix</code> dalam fase <em>validasi</em> </li><li>  <strong>dapatkan</strong> sebagai <code>default-get</code> dalam fase <em>inisialisasi</em> </li><li>  <strong>menghasilkan</strong> sebagai <code>default-generate</code> dalam fase <em>menghasilkan-sumber</em> </li><li>  <strong>fmt</strong> sebagai <code>default-fmt</code> dalam fase <em>proses-sumber</em> </li><li>  <strong>uji</strong> sebagai <strong>uji</strong> <code>default-test</code> pada fase <em>uji</em> </li><li>  <strong>build</strong> as <code>default-build</code> dalam fase <em>paket</em> </li><li>  sebagai <code>default-install</code> tugas internal <strong>mvninstall dijalankan</strong> pada fase <em>instalasi</em> </li><li>  <strong>instal</strong> sebagai <code>default-deploy</code> di fase <em>deploy</em> </li></ul><br><p>  Salah satu langkah dasar dapat dinonaktifkan dengan menerjemahkan tugas ke fase tidak ada: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>default-fix<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span>none<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">phase</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">execution</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Dalam implementasi internal, tugas dibagi menjadi "bekerja dengan dependensi" dan "tidak memerlukan resolusi dependensi", setelah munculnya dukungan untuk mode modul, sebagian besar bermigrasi ke "bekerja dengan dependensi". </p><br><p>  Struktur proyek Go-maven, saya mencoba untuk lebih dekat dengan struktur folder standar yang diterima untuk Go (mis. <code>/src</code> dan <code>/bin</code> di root proyek).  Tetapi karena Maven dipenjara untuk Java, itu tidak mungkin secara langsung untuk "mematahkan" pendekatannya untuk mengatur struktur proyek dan membuat langkah ini tidak terlihat oleh pengguna, sehingga konfigurasi dasar dari plugin terlihat sedikit tidak biasa bahkan bagi banyak yang akrab dengan pakar: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> ```${basedir}/src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span>${basedir}/bin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.igormaznitsa<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang-wrapper<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.3.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goVersion</span></span></span><span class="hljs-tag">&gt;</span></span>1.12.9<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><blockquote>  <strong>PERINGATAN!</strong>  Untuk beberapa alasan, HabR dapat menampilkan bagian <code>&lt;sourceDirectory&gt;${basedir}/src&lt;/sourceDirectory&gt;</code> ketika memformat XML </blockquote><p>  Seperti yang Anda lihat, Anda harus langsung menentukan folder sumber <code>/src</code> dan folder dengan hasil <code>/bin</code> .  Di satu sisi, ini adalah minus, di sisi lain, kemungkinan mengubah lokasi mereka. </p><br><p>  Seluruh pom.xml minimalis untuk proyek modul-tunggal, ala Hello world, adalah sebagai berikut: </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.igormaznitsa<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang-helloworld<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0-SNAPSHOT<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">packaging</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> ```${basedir}/src<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">sourceDirectory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span>${basedir}/bin<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">directory</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.igormaznitsa<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang-wrapper<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>2.3.3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">extensions</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goVersion</span></span></span><span class="hljs-tag">&gt;</span></span>1.12.9<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">goVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">configuration</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugin</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plugins</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Harap dicatat bahwa pengemasan proyek ini disebut sebagai <strong>mvn-golang</strong> .  Konfigurasi ini cukup untuk membangun file yang dapat dieksekusi dan meletakkannya di folder bin yang dihasilkan berdasarkan teks sumber dalam folder src.  Go build cache juga akan dibuat di <code>/bin</code> (sebagai <code>/bin/.goBuildCache</code> secara default) dan akan dihapus dengan bersih dengan folder sementara ini. </p><br><p>  Pada fase <em>instal</em> , tugas <code>mvninstall</code> internal <code>mvninstall</code> , yang hanya mengemas seluruh proyek dalam arsip zip dan menempatkannya dalam repositori maven sebagai artefak yang dihasilkan.  Awalnya, saya baru saja menyimpan artefak ini, tetapi dari versi 2.3.2, sebuah mekanisme ditambahkan untuk mendukung mereka sebagai dependensi pakar standar dan menjadi mungkin untuk mengembangkan proyek dengan "berbagi" kode umum melalui repositori pakar.  Jelas bahwa menempatkan hasil biner yang dihasilkan ke dalam repositori sebagai artefak adalah ide yang buruk karena persyaratan lintas-platform dan oleh karena itu isi folder <code>/bin</code> tidak dikemas dalam artefak. </p><br><p>  Menghubungkan proyek lain dengan <em>pengemasan</em> <code>mvn-golang</code> sebagai ketergantungan maven terlihat seperti ini: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.igormaznitsa<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-go-test-mix-terminal<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0.0-SNAPSHOT<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span>mvn-golang<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">type</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Dengan versi 2.3.3, dukungan ditambahkan untuk bekerja dengan mekanisme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">modul Go</a> , tetapi secara default tidak diaktifkan (untuk kompatibilitas mundur) dan diaktifkan menggunakan parameter konfigurasi: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">moduleMode</span></span></span><span class="hljs-tag">&gt;</span></span>true<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">moduleMode</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Ketika mekanisme modul Go masih pada tahap percobaan, saya menambahkan dukungan untuk bekerja dengan versi ketergantungan melalui panggilan langsung ke utilitas CVS, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">contoh uji dibuat</a> .  Tapi sekarang saya berpikir bahwa mekanisme seperti itu tidak lagi menarik dan lebih menguntungkan untuk menggunakan dependensi standar melalui modul.  Selain itu, plugin ini dapat <code>go.mod</code> file <code>go.mod</code> pada saat membangun proyek, menggantikan jalur ke folder lokal jika pekerjaan sedang berlangsung dalam kerangka proyek multi-modul. </p><br><p>  Karena Maven menyediakan kemungkinan standardisasi menggunakan arketipe, saya membuat dua arketipe: </p><br><ul><li>  <em>com.igormaznitsa: mvn-golang-hello: 2.3.3</em> untuk arketipe modul tunggal sederhana </li><li>  <em>com.igormaznitsa: mvn-golang-hello-multi: 2.3.3</em> untuk proyek multi-modul dengan kode sumber bersama </li></ul><br><p>  Contoh bekerja dengan pola dasar proyek modul tunggal dapat dilihat pada animasi di bawah ini <br><img src="https://habrastorage.org/webt/xj/l4/as/xjl4ashjm59in1djzr0hvsjqqkg.gif" alt="gambar">  . </p><br><p>  Anda juga dapat mengkloning proyek <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">"Hello World"</a> dan bermain-main: </p><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/raydac/mvn-golang-example.git</code> </pre> <br><p><img src="https://habrastorage.org/webt/x6/d8/3f/x6d83f1hbq0ul2ewmrzgkdpg0eq.gif" alt="gambar"></p><br><p>  Seringkali muncul pertanyaan yang masuk akal - mengapa semua ini diperlukan dan bonus apa yang diberikan oleh penggunaan Maven dalam proses membangun Proyek-Go?  Saya akan mencoba menjawabnya poin demi poin: </p><br><ol><li>  Maven adalah lingkungan proyek-bangunan lintas-platform yang sangat matang, didukung oleh hampir semua platform CI, misalnya Jenkins, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menggunakan Go2XUnit</a> Anda dapat mengonversi hasil tes ke format yang ditampilkan dengan melaporkan plugin. </li><li>  Maven adalah lintas-platform dan didukung oleh semua sistem operasi, yang termasuk dalam semua repositori.  Kehadiran profil yang diaktifkan secara fleksibel memudahkan untuk menyesuaikan proses untuk berbagai platform. </li><li>  Maven memiliki sejumlah <strong>besar plugin</strong> , yang membuatnya mudah untuk mendapatkan efek sinergis, misalnya dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menggabungkan Go dan GWT</a> , menghubungkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ANTLR</a> ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">proyek</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menghasilkan Go berdasarkan deskriptor Protobuf</a> dan bahkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menambahkan preprocessing</a> .  Semua ini dapat diatur secara manual melalui file batch, tetapi jika ada plugin resmi yang didukung, maka lebih menguntungkan untuk menggunakannya. </li><li>  Proyek ini menjadi portabel antara mesin dan platform, dan beralih versi GoSDK dilakukan dengan mengubah satu baris. </li><li>  Kemudahan mengatur proyek multi-modul, dengan pemisahan kode sumber melalui repositori Maven. </li><li>  Alat ini akrab dan akrab bagi pengembang Java, yang memfasilitasi adaptasi mereka ketika beralih ke pengembangan di Golang atau ketika mengembangkan solusi Go + Java multibahasa. </li><li>  Ada kemungkinan pseudo-development on Go di lingkungan yang mendukung Maven, bahkan jika mereka tidak memiliki dukungan untuk platform ini, misalnya, di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NetBeans IDE</a> . </li></ol><br><p>  Kelemahan terbesar dari solusi, menurut saya, adalah satu di sini - sejumlah pengembang yang akrab dengan Maven di antara komunitas Golang.  Bagi mereka yang beralih ke Golang dengan C / C ++, jelas bahwa sulit untuk menemukan sesuatu yang lebih dekat dan lebih mahal untuk dibuat, serta tidak ada yang membatalkan sistem Go-build "asli".  Saya perhatikan bahwa untuk beberapa alasan, banyak pengembang tidak suka mencampur platform. </p><br><p>  Jadi, saya secara singkat menunjukkan salah satu cara untuk menggunakan Maven ketika mengembangkan proyek Go menggunakan plugin mvn-golang-wrapper.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Proyek plugin dirancang sebagai proyek OSS dan diposting di GitHub</a> .  Jika seseorang tertarik dan akan menggunakan proyek mereka, maka jangan ragu untuk bertanya dan "melaporkan bug."  Saya mencoba membuat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">serangkaian contoh untuk berbagai kesempatan</a> (di mana plugin sedang diuji), tetapi saya tidak bisa membahas semuanya. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Uji kasus</a> dalam proyek plugin menggunakan versi dev, jadi jika Anda ingin membangunnya secara lokal setelah mengkloning proyek, Anda harus terlebih dahulu membangun versi dev plugin menggunakan perintah di direktori root proyek: </p><br><pre> <code class="bash hljs">mvn install</code> </pre> <br><p>  setelah itu, Anda dapat masuk ke <code>mvn-golang-examples</code> proyek <code>mvn-golang-examples</code> dan membangunnya bersama </p><br><pre> <code class="bash hljs">mvn clean install</code> </pre> <br><p>  Anda juga dapat mulai membangun semua contoh dari akar proyek, menggunakan </p><br><pre> <code class="bash hljs">mvn clean install -Pexamples</code> </pre> <br><p>  Plugin ini mendukung perakitan multi-threaded proyek dan dapat dipercepat menggunakan argumen yang sesuai, memecah misalnya menjadi 6 utas </p><br><pre> <code class="bash hljs">mvn clean install -Pexamples -T6</code> </pre> <br><p>  Selama pengembangan, proyek ini telah mengakumulasikan sejumlah "lonceng dan peluit" yang layak, yang saya putuskan untuk tidak dibahas dalam artikel singkat ini.  Informasi tentang parameter dengan contoh konfigurasi kecil dapat ditemukan di mind map plugin ini (file sumber dalam format <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SciaReto</a> ada di <a href="">sini</a> ): </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ro/yo/qr/royoqrdlvvlrwvjyiey5yigtnec.jpeg" alt="gambar"></a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id465803/">https://habr.com/ru/post/id465803/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id465791/index.html">Kerentanan pengecer - tiga kasus di mana OTP dapat diperoleh dalam permintaan</a></li>
<li><a href="../id465793/index.html">Frontend Weekly Digest (26 Agustus - 1 September 2019)</a></li>
<li><a href="../id465795/index.html">Intisari bahan-bahan segar dari dunia front-end untuk minggu terakhir No. 378 (26 Agustus - 1 September 2019)</a></li>
<li><a href="../id465797/index.html">Algoritma genetika (atau Klien selalu raja - dan seringkali bodoh)</a></li>
<li><a href="../id465801/index.html">Intisari Desain Makanan, Agustus 2019</a></li>
<li><a href="../id465805/index.html">Gigatron - komputer mikro buatan sendiri tanpa prosesor</a></li>
<li><a href="../id465807/index.html">Kisah tentang bagaimana perpustakaan JavaScript populer mulai menampilkan iklan di terminal</a></li>
<li><a href="../id465809/index.html">Jangan jatuh ke dalam perangkap optimasi prematur</a></li>
<li><a href="../id465811/index.html">14 tips untuk menulis kode Bereaksi bersih. Bagian 1</a></li>
<li><a href="../id465813/index.html">14 tips untuk menulis kode Bereaksi bersih. Bagian 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>