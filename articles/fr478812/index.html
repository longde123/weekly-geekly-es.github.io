<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò® üíø üèáüèª D√©velopper un hexapode √† partir de z√©ro (partie 6) - transition vers l'impression 3D üë®üèæ‚Äçü§ù‚Äçüë®üèº üéÄ üåñ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Le d√©veloppement de l'hexapode est activement en cours et il est temps de montrer les changements fondamentaux dans la conception et l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©velopper un hexapode √† partir de z√©ro (partie 6) - transition vers l'impression 3D</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478812/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/pz/zb/plpzzbg1zxhcgfisx9j2c2bb1p0.png"></div><br>  Bonjour √† tous!  Le d√©veloppement de l'hexapode est activement en cours et il est temps de montrer les changements fondamentaux dans la conception et les plans du firmware.  Il y a eu une grande pause dans la sortie de nouveaux articles en raison de la longue conception des nouveaux composants √©lectroniques et du bo√Ætier.  En principe, ce sera l'article, comme toujours beaucoup de photos. <br><br>  <b>Stades de d√©veloppement:</b> <br>  <a href="https://habr.com/ru/post/424867/">Partie 1 - Conception</a> <br>  <a href="https://habr.com/ru/post/424905/">Partie 2 - Assemblage</a> <br>  <a href="https://habr.com/ru/post/436748/">Partie 3 - Cin√©matique</a> <br>  <a href="https://habr.com/ru/post/444070/">Partie 4 - Trajectoires et s√©quences math√©matiques</a> <br>  <a href="https://habr.com/ru/post/448058/">Partie 5 - √âlectronique</a> <br>  <a href="https://habr.com/ru/post/478812/"><b>Partie 6 - transition vers l'impression 3D</b></a> <br><a name="habracut"></a><br><h3>  Quelques points g√©n√©raux </h3><br>  J'ai donn√© un nouveau nom au projet, car l'actuel rien de pratique en parle.  En fait, SKYNET est un r√©seau c√©leste, enfin, ou quelque chose comme √ßa (ciel - ciel, net - r√©seau).  Dans ce cas, il n'y a pas de r√©seau, et encore plus le ciel. <br><br>  Le nouveau nom est <b>AIWM (machine √† marcher √† intelligence artificielle)</b> - une machine √† marcher √† intelligence artificielle.  Au d√©triment de l'intelligence, il est trop t√¥t ici, mais soudain je peux vivre jusqu'√† ce point :) <br><br>  J'ai fait une courte d√©mo avec une description des fonctionnalit√©s actuelles (l'aper√ßu d'un nouveau design commence √† partir de la 2√®me minute). <br><iframe width="560" height="315" src="https://www.youtube.com/embed/xboa1LVdZsw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br><h3>  Changements fonctionnels </h3><br>  Au cours de la refonte, de nombreuses id√©es et complexit√©s sont apparues.  Plusieurs parties inutiles ont √©t√© supprim√©es et de nouvelles fonctionnalit√©s ont √©t√© ajout√©es.  Voici une liste des changements qui devraient √™tre mis en ≈ìuvre: <br><br><ol><li>  Architecture multiprocesseur.  Actuellement, 3 MCU sont pr√©vus: contr√¥leur de vision industrielle (Broadcom BCM2835), contr√¥leur d'alimentation (STM32F030), contr√¥leur de t√™te (STM32F373); <br><ul><li>  Le contr√¥leur de vision industrielle est un module Raspberry Pi Zero pr√™t √† l'emploi et sera engag√© dans la collecte, le traitement et la reconnaissance des objets de la cam√©ra.  Tout le mat√©riel n√©cessaire pour cela y est connect√©.  La communication est effectu√©e en utilisant le protocole ModBus en mode esclave; </li><li>  Le contr√¥leur de puissance est un puissant DC-DC (jusqu'√† 250 W) avec la possibilit√© d'ajuster la tension de sortie √† la vol√©e gr√¢ce √† la communication.  Il alimente toute l'√©lectronique de l'hexapode et en est le c≈ìur.  Peut-√™tre qu'√† l'avenir, il sera possible de passer √† l'alimentation directe des disques √† partir de 7,4 V, mais ces disques sont assez chers m√™me sur Ali.  La communication est effectu√©e en utilisant le protocole ModBus en mode esclave; </li><li>  Le contr√¥leur principal est le lien dans cette architecture.  Il est engag√© dans le traitement de mouvement et fournit une interface pour la communication avec le monde ext√©rieur.  La communication s'effectue selon le protocole ModBus en mode esclave (monde externe) et ma√Ætre (communication interprocessus); </li></ul></li><li>  Prise en charge du streaming vid√©o ou transfert d'image WIFI pour un contr√¥le en dehors de la ligne de vue s'il y a suffisamment de ressources gratuites du Raspberry Pi Zero; </li><li>  Il a √©t√© d√©cid√© de transf√©rer le contr√¥le vers Bluetooth (le pont BLE-UART HM-10 pr√™t √† l'emploi sera utilis√©), car le WIFI est d√©j√† th√©oriquement occup√© pour diffuser de la vid√©o sur le panneau de commande.  De plus, je veux pouvoir mettre √† jour le firmware ou la configuration √† la vol√©e depuis un serveur distant, et si vous utilisez le WIFI pour la communication, vous ne serez plus en ligne; </li><li>  Gestion des LED RVB √† l'avant pour √©clairer dans l'obscurit√© et afficher simultan√©ment l'√©tat de FW; </li><li>  Des capteurs tactiles sont int√©gr√©s dans la structure des jambes, ce qui permettra un algorithme de mouvement plus intelligent; </li></ol><br><h3>  Contr√¥leur principal ou carte de commande </h3><br>  J'√©tais fatigu√© de la carte sandwich actuelle, et il a √©t√© d√©cid√© de concevoir une nouvelle carte de contr√¥le, en tenant compte des innovations dans la conception.  Dans le processus de conception, l'√©cran a √©t√© jet√© (pas vraiment, pourquoi, il est n√©cessaire l√†-bas) et un t√©l√©m√®tre √† ultrasons (alors guano).  En cours de route, j'ai d√©cid√© de passer au STM32F373 afin de me d√©barrasser enfin d'Arduino, et de la pr√©sence de FPU dans ce processeur, √ßa fait vraiment signe de l'installer. <br><br>  Apr√®s une semaine de pr√©paration du circuit et de tra√ßage, un prototype √©lectronique de la carte est apparu.  Au total, il a fallu 20 heures pour concevoir, afin de r√©duire le nombre de sources possibles d'erreurs, une transition progressive vers une nouvelle √©lectronique est pr√©vue.  Dans ce cas, le premier plan de contr√¥le sera lanc√© conjointement avec l'ancienne carte de puissance. <br><br>  Pour la compatibilit√© du logiciel Android actuel, une empreinte est fournie sous le pont WIFI-UART, qui est maintenant utilis√© dans le prototype.  Les captures d'√©cran de la carte sont pr√©sent√©es ci-dessous (WIFI-UART a √©t√© supprim√© dans la vue 3D, car Altium pour une raison quelconque affiche son mod√®le en une seule couleur).  En fait, peu importe ce qu'il faut utiliser pour la communication - l'essentiel est que la sortie d'interface ait UART. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jq/zm/va/jqzmvahrjuse69kdkxkkcjolaay.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xs/kr/wj/xskrwjznuktifi27u5k3m0rtzqk.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/g_/ow/my/g_owmy9obfc9l7vaos-dwns_z7m.png"></div><br>  Les connecteurs suivants sont fournis sur la carte: <br>  - L'alimentation principale est de 12V + contacts depuis le connecteur d'√©quilibrage pour la possibilit√© de surveiller la tension de chaque cellule; sur cette base, vous pouvez √©galement d√©terminer le type de batterie connect√©e (nombre de cellules); <br>  - Un connecteur pour transmettre des signaux √† la carte d'alimentation pour les servos; <br>  - Connecteurs pour contr√¥leur de vision industrielle et contr√¥leur de puissance; <br>  - Connecteur pour contr√¥ler les LED RGB avant; <br>  - Connecteurs pour capteurs tactiles sur les membres; <br>  - Un connecteur pour connecter un √©metteur pi√©zo.  Il est suppos√© que le tweeter poss√®de d√©j√† un circuit de commande, et nous commutons uniquement l'alimentation. <br><br>  Tout est assez simple et passer √† la STM devrait √™tre indolore.  J'ai r√©ussi √† concevoir le code et il suffit de remplacer les pilotes fonctionnant avec les registres p√©riph√©riques. <br><br><h3>  Contr√¥leur de puissance </h3><br>  √Ä mesure que mon exp√©rience en √©lectronique augmentait, gr√¢ce √† un tas d'essais et d'erreurs, j'ai finalement pu comprendre DC-DC.  En fait, il n'y a rien de compliqu√© l√†-bas, l'essentiel est de savoir comment fonctionne la bobine et pourquoi elle est r√©ellement n√©cessaire l√†-bas. <br><br>  Pour contr√¥ler une charge puissante, qui est dans ce cas 18 disques avec une consommation moyenne de 12 √† 15 A, quelque chose de plus efficace qu'un simple DC-DC est n√©cessaire.  En r√®gle g√©n√©rale, le goulot d'√©tranglement en eux est la diode, qui √† des courants √©lev√©s commence √† chauffer la pi√®ce.  La tension d'alimentation des variateurs est de 6V avec une tension d'entr√©e allant jusqu'√† 12V, dans ce cas la diode fonctionnera ~ 50% du cycle (une estimation approximative sans tenir compte de la chute de tension et autres joies).  En cons√©quence, m√™me lors de l'utilisation d'une diode Schottky, la puissance qui lui est allou√©e sera suffisamment importante pour commencer √† penser √† la dissipation thermique. <br><br>  Les DC-DC synchrones viennent √† la rescousse, dans lesquels un transistor √† effet de champ est utilis√© √† la place d'une diode.  Avec de bons transistors, la r√©sistance du canal est suffisamment faible pour entra√Æner de gros courants sans g√©n√©ration de chaleur importante.  Les principales diff√©rences entre DC-DC asynchrone et synchrone sont indiqu√©es ci-dessous: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/8v/hb/0m/8vhb0mhjztzkgi_cpya8h4ofhni.png"></div><br>  En g√©n√©ral, apr√®s avoir lu un tas d'informations, j'ai finalement d√©cid√© des exigences: <br><br><ul><li>  La capacit√© de conduire des courants jusqu'√† 20 A en mode nominal; </li><li>  Passage au mode d'urgence en violation du mode de fonctionnement normal: surchauffe ou saturation de la bobine, surchauffe des interrupteurs d'alimentation, basse tension d'entr√©e, court-circuit, tension de sortie inad√©quate et autres joies; </li><li>  Capacit√© √† communiquer avec DC-DC pour obtenir des valeurs mesur√©es: tensions d'entr√©e et de sortie, consommation de courant, temp√©ratures de bobine et interrupteurs d'alimentation; </li><li>  Efficacit√© ad√©quate; </li></ul><br>  J'ai d√©cid√© de concevoir DC-DC en utilisant le microcontr√¥leur STM32F030, cela co√ªte un sou et poss√®de tous les p√©riph√©riques dont j'ai besoin pour r√©soudre mes probl√®mes.  Le seul inconv√©nient de l'utilisation de ce MK est un r√©glage de tension assez brut avec un pas de 25mV √† une fr√©quence de 100kHz.  Pour obtenir une pr√©cision plus √©lev√©e, vous devez utiliser MK avec des minuteries haute r√©solution √† bord, ou r√©duire la fr√©quence de commutation des transistors.  Pour mes besoins, cette √©tape de r√©gulation de tension suffit amplement. <br><br>  √Ä l'heure actuelle, le premier prototype a √©t√© con√ßu et assembl√©, ce qui a montr√© l'efficacit√© du circuit.  L'efficacit√© pour les mesures approximatives est de 87% √† un courant de 11 A dans la configuration de d√©bogage de la carte en utilisant des r√©sistances de protection contre les courants traversants (n√©cessaires pour configurer le temps mort entre la commutation des transistors). <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/md/dw/b7/mddwb7pqsxqj3gug7o9twgktpem.png"></div><br>  Plus de d√©tails sur DC-DC seront un peu plus tard, quand je pense √† cela.  Beaucoup de points int√©ressants, l'odeur des pilotes d'obturateurs frits et MK :) Soit dit en passant, les transistors se sont av√©r√©s si puissants qu'√† la suite de la panne, le courant passant a br√ªl√© la carte de circuit imprim√© et en m√™me temps, les transistors sont rest√©s intacts. <br><br><h3>  Un peu sur le nouveau b√¢timent </h3><br>  L'√©lectronique est tr√®s int√©ressante, mais vous n'avez pas besoin d'oublier la m√©canique non plus.  Enfin, l'hexapode a acquis un bo√Ætier ferm√© ad√©quat, d'o√π les fils et les morceaux de circuits imprim√©s ne d√©passeront pas.  Le voici <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qk/bm/_a/qkbm_a4nw9tsyqnvkffqnaef3g4.png"></div><br>  Lors de la conception, j'ai essay√© d'√©viter de redimensionner les √©l√©ments des membres et du corps lui-m√™me, car la version pr√©c√©dente se montrait bien en termes de vitesse et de charge sur les entra√Ænements.  En g√©n√©ral, seule l'id√©e de l'emplacement des pieds et des dimensions est rest√©e du b√¢timent pr√©c√©dent, le reste a √©t√© repens√©. <br><br>  La partie la plus difficile de la conception a √©t√© le d√©veloppement de la conception de la coque.  Au d√©but, j'ai voulu abandonner cette activit√© plusieurs fois √† cause de la diff√©rence entre fantaisie et r√©alit√©, mais jour apr√®s jour, des √©l√©ments d√©coratifs ont commenc√© √† appara√Ætre et ce sentiment a disparu.  Apr√®s tout, le sculpteur ne moud pas non plus imm√©diatement sa cr√©ation, et ce moment n'a qu'√† √™tre v√©cu. <br><br>  Le bo√Ætier est un ensemble de pi√®ces pour un assemblage ult√©rieur avec des boulons M3 (√† certains endroits, vous pouvez utiliser des attaches en plastique, par exemple, pour les couvercles sup√©rieur et inf√©rieur) pour r√©duire le poids.  Dans ce cas, les boulons sont viss√©s directement dans le plastique dans les trous pour cela avec des filetages pr√©d√©coup√©s. <br><br>  La base est assembl√©e √† partir de trois parties diff√©rentes √† l'aide de rainures, puis boulonn√©es.  Il n'y a aucune id√©e de conception en le divisant en parties, c'est juste les capacit√©s physiques de l'imprimante (220x220) et je ne veux pas vraiment l'√©tendre, donc je dois trouver un moyen de sortir de cette situation.  Cela a son propre avantage - en cas de dommage, il suffit de r√©imprimer uniquement la pi√®ce endommag√©e, ce qui √©conomisera du plastique et du temps de r√©paration (tout peut arriver pendant les tests). <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wp/wp/fb/wpwpfb7hc8obeq6voecpq2sidxm.png"></div><br>  Apr√®s avoir connect√© toutes les pi√®ces ensemble, install√© les variateurs et l'√©lectronique, le tout est ferm√© avec des couvercles de 6 mm, qui sont fix√©s avec des boulons de la m√™me mani√®re.  Un panneau de commande est install√© sur le capot central, qui est ensuite ferm√© par un panneau d√©coratif. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wq/5w/fb/wq5wfb4u3z3wshzpaabp7lx7y50.png"></div><br>  La force du corps repose sur une chute de 0,5 m de hauteur sur une surface solide sans violer l'int√©grit√©.  Soit dit en passant, la version en contreplaqu√© de la coque n'a pas surv√©cu aux conditions difficiles de chargement dans l'avion, tandis que la coque √©tait emball√©e dans une grosse bosse et que la jambe √©tait cass√©e. <br><br>  Les commandes de commande des membres ont √©t√© d√©plac√©es sur FEMUR, ce qui devrait r√©duire l√©g√®rement la charge en r√©duisant le poids du TIBIA en raison du transfert de la fixation et du d√©placement du servomoteur plus pr√®s du d√©but du levier.  Et ce sera mieux dans la conception si TIBIA et COXA sont install√©s sur la partie FEMUR, et non l'inverse comme avant. <br><br><div class="spoiler">  <b class="spoiler_title">COXA, FEMUR et TIBIA?</b>  <b class="spoiler_title">- C'est quoi?</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/vn/er/iv/vneriv60k1dpousumyrgiodpggi.png"><br></div></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tx/ao/jj/txaojjxoip3y68bzfxh6thdgkd0.png"></div><br>  Selon les calculs pr√©liminaires, l'impression du bo√Ætier n√©cessitera 670 g de plastique et 51 heures d'impression continue avec une couche de 0,2 mm et une √©paisseur de buse de 0,4 mm.  En g√©n√©ral, pour l'argent, il s'av√®re un peu moins cher que le contreplaqu√©, mais le design est m√™me inutile √† comparer et √ßa vaut le coup. <br><br><h3>  PS </h3><br>  Je serai heureux de toute suggestion sur le cas.  Au moment d'√©crire ces lignes, le bo√Ætier a d√©j√† √©t√© imprim√©, mais il est encore temps d'apporter des modifications aux d√©tails restants.  Je suis le seul d√©veloppeur de tout ce projet et parfois il y a des p√©riodes o√π de nouvelles pens√©es ne me viennent pas √† l'esprit b√™tement - maintenant cette p√©riode commence :) <br><br><div class="spoiler">  <b class="spoiler_title">Quelques photos du processus d'impression</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/3e/sb/id/3esbidpw5dgjclju5rxolbsrhgo.jpeg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/2u/py/ix2upydfyhpidtitprfcllbgfdw.jpeg"></div><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr478812/">https://habr.com/ru/post/fr478812/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr478788/index.html">Dans un certain royaume, pas dans un √©tat ¬´naissant¬ª. Rapport Yandex</a></li>
<li><a href="../fr478790/index.html">Julia et la s√©mantique de distribution</a></li>
<li><a href="../fr478796/index.html">Premier cycle aux √âtats-Unis: un moyen non conventionnel d'atteindre les meilleures √©coles secondaires</a></li>
<li><a href="../fr478798/index.html">Le graph√®ne, qui ne pouvait toujours pas</a></li>
<li><a href="../fr478802/index.html">R√©act-admin et framework de repos django</a></li>
<li><a href="../fr478814/index.html">Comment le marketing acc√©l√®re le chargement de vos smartphones</a></li>
<li><a href="../fr478816/index.html">Test des applications Android √† l'aide de s√©l√©no√Øde. Rechercher l'emplacement dans une application mobile √† l'aide d'Appium</a></li>
<li><a href="../fr478820/index.html">Vivaldi pour Android: une b√™ta est bonne et la seconde est meilleure</a></li>
<li><a href="../fr478822/index.html">Robotisation de l'IA avec InterSystems IRIS Data Platform</a></li>
<li><a href="../fr478824/index.html">Unity, ECS, Actors: comment augmenter dix fois le FPS dans votre jeu, quand il n'y a rien √† optimiser [avec des modifications]</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>