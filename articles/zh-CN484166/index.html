<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ ğŸ’› ğŸ¥ VVVVVV ??? VVVVVV !!! :) ğŸ’• ğŸ¤• ğŸ“†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¦‚æœé˜…è¯»æ­¤æ–‡æœ¬ï¼Œåˆ™æ„å‘³ç€æ‚¨æˆ–è€…è®¤ä¸ºæ–‡ç« æ ‡é¢˜æœ‰è¯¯ï¼Œæˆ–è€…æ‚¨åœ¨å…¶ä¸­çœ‹åˆ°äº†ç†Ÿæ‚‰çš„è®¡ç®—æœºæ¸¸æˆçš„åç§°ã€‚ VVVVVVæ˜¯ä¸€æ¬¾ç‹¬ç«‹çš„å¹³å°æ¸¸æˆï¼Œä»¥å…¶ä»¤äººæ„‰æ‚¦çš„å¤–éƒ¨ç®€æ´æ€§å’ŒåŒæ ·ä»¤äººæ„‰æ‚¦çš„å†…éƒ¨å¤æ‚æ€§èµ¢å¾—äº†è®¸å¤šç©å®¶çš„é’çã€‚ å‡ å¤©å‰ï¼ŒVVVVVVå·²ç»10å²äº†ï¼Œè¯¥æ¸¸æˆçš„ä½œè€…Terry Cavanaghé€šè¿‡å‘å¸ƒæºä»£ç åº†ç¥äº†è¿™ä¸ªå‡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>VVVVVV ??? VVVVVV !!! :)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/484166/"> å¦‚æœé˜…è¯»æ­¤æ–‡æœ¬ï¼Œåˆ™æ„å‘³ç€æ‚¨æˆ–è€…è®¤ä¸ºæ–‡ç« æ ‡é¢˜æœ‰è¯¯ï¼Œæˆ–è€…æ‚¨åœ¨å…¶ä¸­çœ‹åˆ°äº†ç†Ÿæ‚‰çš„è®¡ç®—æœºæ¸¸æˆçš„åç§°ã€‚  VVVVVVæ˜¯ä¸€æ¬¾ç‹¬ç«‹çš„å¹³å°æ¸¸æˆï¼Œä»¥å…¶ä»¤äººæ„‰æ‚¦çš„å¤–éƒ¨ç®€æ´æ€§å’ŒåŒæ ·ä»¤äººæ„‰æ‚¦çš„å†…éƒ¨å¤æ‚æ€§èµ¢å¾—äº†è®¸å¤šç©å®¶çš„é’çã€‚ å‡ å¤©å‰ï¼ŒVVVVVVå·²ç»10å²äº†ï¼Œè¯¥æ¸¸æˆçš„ä½œè€…Terry Cavanaghé€šè¿‡å‘å¸ƒæºä»£ç åº†ç¥äº†è¿™ä¸ªå‡æœŸã€‚ é‡Œé¢æœ‰ä»€ä¹ˆâ€œé²œç¾â€ï¼Ÿ é˜…è¯»æœ¬æ–‡çš„ç­”æ¡ˆã€‚ <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/i1/ij/g8/i1ijg8lekultgdxwi426mbnaers.png" alt="å›¾1"></div><br><a name="habracut"></a><br><h2> å¼•è¨€ </h2><br> å“¦ï¼ŒVVVVVV ...æˆ‘è®°å¾—å‘è¡Œåä¸ä¹…å°±é‡åˆ°äº†å®ƒï¼Œä½œä¸ºåƒç´ å¤å¤æ¸¸æˆçš„å¿ å®æ‹¥æŠ¤è€…ï¼Œæˆ‘å¾ˆé«˜å…´å°†å…¶å®‰è£…åœ¨è®¡ç®—æœºä¸Šã€‚ æˆ‘è®°å¾—æˆ‘çš„ç¬¬ä¸€å°è±¡ï¼šâ€œé‚£ä¹ˆï¼Œè¿™å°±æ˜¯å…¨éƒ¨å—ï¼Ÿ åªæ˜¯åœ¨å¹¿åœºæˆ¿é—´å‘¨å›´è·‘ï¼Ÿâ€æ¸¸æˆå‡ åˆ†é’Ÿåï¼Œæˆ‘æƒ³ã€‚ æˆ‘è¿˜ä¸çŸ¥é“æˆ‘åœ¨ç­‰ä»€ä¹ˆã€‚ ä¸€ç¦»å¼€å‡ºå‘åœ°ç‚¹ï¼Œæˆ‘ä¾¿å‘ç°è‡ªå·±èº«å¤„ä¸€ä¸ªå°è€Œåˆæ··ä¹±åˆåä¸½çš„äºŒç»´ä¸–ç•Œï¼Œé‡Œé¢å……æ»¡äº†æˆ‘æ‰€ä¸çŸ¥é“çš„å¼‚å¸¸æ™¯è§‚å’Œåƒç´ ä¼ªåƒã€‚ <br><br> è¿™åœºæ¯”èµ›æŠŠæˆ‘æ‹–äº†ä¸‹å»ã€‚ å°½ç®¡å…·æœ‰å¾ˆé«˜çš„å¤æ‚æ€§ï¼Œå¹¶ä¸”åœ¨é‚£ä¸ªæ—¶å€™è¢«å¼‚å¸¸æ§åˆ¶å·§å¦™åœ°å‡»è´¥äº†ï¼ˆä¸»è¦è§’è‰²ä¸çŸ¥é“å¦‚ä½•è·³è·ƒï¼Œä½†æ˜¯èƒ½å¤Ÿä¸ºæˆ‘è‡ªå·±åè½¬é‡åŠ›çŸ¢é‡çš„æ–¹å‘ï¼‰ï¼Œæˆ‘è¿˜æ˜¯å®Œå…¨é€šè¿‡äº†å®ƒã€‚ æˆ‘ä¸çŸ¥é“æˆ‘çš„è§’è‰²åˆ°é‚£æ—¶æ­»äº†å¤šå°‘æ¬¡ï¼Œä½†æ˜¯æˆ‘æ•¢è‚¯å®šæ­»äº¡äººæ•°ä»¥å‡ ç™¾è®¡ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œè¿™ä¸ªæ¸¸æˆè¿˜æ˜¯æœ‰ä¸€äº›ç‹¬ç‰¹çš„é­…åŠ›ï¼šï¼‰ <br><br> è®©æˆ‘ä»¬å›åˆ°ä¸º<a href="https://habr.com/ru/post/483518/">çºªå¿µæ¸¸æˆå‘¨å¹´è€Œå¸ƒç½®</a>çš„æºä»£ç ã€‚ <br><br> ç›®å‰ï¼Œæˆ‘æ˜¯C ++-PVS-Studioå›¢é˜Ÿçš„å¼€å‘äººå‘˜-é™æ€ä»£ç åˆ†æå™¨ï¼Œç”¨äºCï¼ŒC ++ï¼ŒCï¼ƒå’ŒJavaã€‚ é™¤äº†å¼€å‘æœ¬èº«ï¼Œæˆ‘ä»¬è¿˜ä»äº‹äº§å“çš„æ¨å¹¿ã€‚ å¯¹æˆ‘ä»¬è€Œè¨€ï¼Œæœ€å¥½çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯æ’°å†™æœ‰å…³æ£€æŸ¥å¼€æºé¡¹ç›®çš„æ–‡ç« ã€‚ æˆ‘ä»¬çš„è¯»è€…ä¼šæ”¶åˆ°æœ‰å…³ç¼–ç¨‹ä¸»é¢˜çš„æœ‰è¶£æ–‡ç« ï¼Œæˆ‘ä»¬æœ‰æœºä¼šæ¸…æ¥šåœ°å±•ç¤ºPVS-Studioçš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œå½“æˆ‘äº†è§£æºä»£ç VVVVVVçš„æ‰“å¼€æ—¶ï¼Œæˆ‘åªæ˜¯æ— æ³•é€šè¿‡ã€‚ <br><br> åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ç ”ç©¶PVS-Studioåˆ†æä»ªåœ¨VVVVVVä»£ç ä¸­å‘ç°çš„ä¸€äº›æœ‰è¶£çš„é”™è¯¯ï¼Œå¹¶å¯¹è¿™äº›é”™è¯¯è¿›è¡Œè¯¦ç»†åˆ†æã€‚ å°†é‡åŠ›çŸ¢é‡è¿”å›åˆ°â€œå‘ä¸‹â€ä½ç½®å¹¶åä¸‹ï¼šæˆ‘ä»¬å¼€å§‹äº†ï¼ <br><br><h2> åˆ†æä»ªå‘å‡ºçš„è­¦æŠ¥æ¦‚è¿° </h2><br><h3> è­¦å‘Š1 </h3><br>  <a href="https://www.viva64.com/ru/w/v512/">V512</a>è°ƒç”¨'sprintf'å‡½æ•°å°†å¯¼è‡´ç¼“å†²åŒº'fileSearch'æº¢å‡ºã€‚  FileSystemUtils.cpp 307 <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> MAX_PATH 260 .... void PLATFORM_migrateSaveData(char *output) { char oldLocation[MAX_PATH]; char newLocation[MAX_PATH]; char oldDirectory[MAX_PATH]; char fileSearch[MAX_PATH]; .... </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">/* Same place, different layout. */</span></span></span><span class="hljs-meta"> strcpy(oldDirectory, output); sprintf(fileSearch, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"%s\\*.vvvvvv"</span></span></span><span class="hljs-meta">, oldDirectory); .... }</span></span></code> </pre> <br> å¦‚æ‚¨æ‰€è§ï¼Œ <i>fileSearch</i>å’Œ<i>oldDirectoryè¡Œ</i>çš„å¤§å°ç›¸åŒï¼š260ä¸ªå­—ç¬¦ã€‚ å°†å­—ç¬¦ä¸²<i>oldDirectory</i>çš„å†…å®¹<i>ä»£</i>å…¥åï¼Œæ ¼å¼å­—ç¬¦ä¸²ï¼ˆ <i>sprintf</i>çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="cpp hljs">&lt;i&gt;_oldDirectory\*.vvvvvv&lt;/i&gt;</code> </pre> <br> è¯¥å­—ç¬¦ä¸²æ¯”åŸå§‹<i>oldDirectory</i>é•¿9ä¸ªå­—ç¬¦ã€‚ æ­£æ˜¯è¿™ä¸ªå­—ç¬¦åºåˆ—å°†è¢«è¿›ä¸€æ­¥å†™å…¥<i>fileSearch</i> ã€‚ å¦‚æœ<i>oldDirectory</i>å­—ç¬¦ä¸²é•¿äº251ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ ç»“æœå­—ç¬¦ä¸²å°†é•¿äº<i>fileSearch</i>å¯ä»¥å®¹çº³çš„é•¿åº¦ï¼Œè¿™å°†å¯¼è‡´åœ¨æ•°ç»„ä¹‹å¤–è¿›è¡Œå†™å…¥ã€‚ å†…å­˜ä¸­çš„ä»€ä¹ˆæ ·çš„æ•°æ®å¯èƒ½ä¼šæŸåä»¥åŠå°†å¯¼è‡´ä»€ä¹ˆç»“æœï¼Œè¿™æ˜¯ä¸€ä¸ªåé—®ï¼š <br><br><h3> è­¦å‘Š2 </h3><br>  <a href="https://www.viva64.com/ru/w/v519/">V519ä¸º</a> â€œèƒŒæ™¯â€å˜é‡è¿ç»­ä¸¤æ¬¡åˆ†é…å€¼ã€‚ ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ£€æŸ¥è¡Œï¼š1367ã€1373ã€‚Map.cpp 1373 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> mapclass::loadlevel(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-comment"><span class="hljs-comment">//The Warpzone tmap = warplevel.loadlevel(rx, ry, game, obj); fillcontent(tmap); roomname = warplevel.roomname; tileset = 1; background = 3; // &lt;= dwgfx.rcol = warplevel.rcol; dwgfx.backgrounddrawn = false; warpx = warplevel.warpx; warpy = warplevel.warpy; background = 5; // &lt;= if (warpy) background = 4; if (warpx) background = 3; if (warpx &amp;&amp; warpy) background = 5; break; .... }</span></span></code> </pre> <br> ä¸€ä¸ªå˜é‡å’ŒåŒä¸€å˜é‡è¿ç»­ä¸¤æ¬¡åˆ†é…ä¸€ä¸ªå€¼ã€‚ æ­¤å¤–ï¼Œåœ¨åˆ†é…ä¹‹é—´ï¼Œæ­¤å˜é‡ä¸åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚ å¥‡æ€ª...ä¹Ÿè®¸è¿™ä¸ªé¡ºåºå¹¶æ²¡æœ‰è¿åç¨‹åºçš„é€»è¾‘ï¼Œä½†æ˜¯è¿™æ ·çš„åˆ†é…æœ¬èº«åœ¨ç¼–å†™ä»£ç æ—¶ä¼šå¸¦æ¥ä¸€äº›æ··ä¹±ã€‚ è¿™æ˜¯å¦å®é™…ä¸Šæ˜¯ä¸€ä¸ªé”™è¯¯åªèƒ½ç”±ä½œè€…è¯´ã€‚ å°½ç®¡åœ¨ä»£ç ä¸­æœ‰æ›´è¯¦ç»†çš„ç¤ºä¾‹è¯´æ˜æ­¤é”™è¯¯ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Game::loadquick(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pKey == <span class="hljs-string"><span class="hljs-string">"frames"</span></span>) { frames = atoi(pText); frames = <span class="hljs-number"><span class="hljs-number">0</span></span>; } .... }</code> </pre> <br> åœ¨è¿™é‡Œå·²ç»å¾ˆæ¸…æ¥šï¼Œè¿™é‡Œçš„æŸä¸ªåœ°æ–¹è¦ä¹ˆæ˜¯é€»è¾‘é”™è¯¯ï¼Œè¦ä¹ˆè‡³å°‘æ˜¯ä¸å¿…è¦çš„åˆ†é…ã€‚ ä¹Ÿè®¸ç¬¬äºŒè¡Œæ˜¯ä¸ºè°ƒè¯•è€Œä¸´æ—¶ç¼–å†™çš„ï¼Œç„¶åä»–ä»¬å¿˜è®°äº†åˆ é™¤å®ƒã€‚ æ€»è®¡ï¼ŒPVS-Studioé’ˆå¯¹æ­¤ç±»æƒ…å†µå‘å‡ºäº†8æ¡è­¦å‘Šã€‚ <br><br><h3> è­¦å‘Š3 </h3><br> åˆ›å»ºäº†'basic_string'ç±»å‹çš„V808'pKey'å¯¹è±¡ï¼Œä½†æœªä½¿ç”¨ã€‚ ç¼–è¾‘å™¨.cpp 1866 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> editorclass::load(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;_path) { .... <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(pElem-&gt;Value())</span></span></span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pKey == <span class="hljs-string"><span class="hljs-string">"edEntities"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (TiXmlElement *edEntityEl = pElem-&gt;FirstChildElement(); edEntityEl; edEntityEl = edEntityEl-&gt;NextSiblingElement()) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-function"><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-built_in">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pKey</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(edEntityEl-&gt;Value())</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= //const char* pText = edEntityEl-&gt;GetText() ; if (edEntityEl-&gt;GetText() != NULL) { edentity[i].scriptname = std::string(edEntityEl-&gt;GetText()); } edEntityEl-&gt;QueryIntAttribute("x", &amp;edentity[i].x); edEntityEl-&gt;QueryIntAttribute("y", &amp;edentity[i].y); edEntityEl-&gt;QueryIntAttribute("t", &amp;edentity[i].t); edEntityEl-&gt;QueryIntAttribute("p1", &amp;edentity[i].p1); edEntityEl-&gt;QueryIntAttribute("p2", &amp;edentity[i].p2); edEntityEl-&gt;QueryIntAttribute("p3", &amp;edentity[i].p3); edEntityEl-&gt;QueryIntAttribute("p4", &amp;edentity[i].p4); edEntityEl-&gt;QueryIntAttribute("p5", &amp;edentity[i].p5); edEntityEl-&gt;QueryIntAttribute("p6", &amp;edentity[i].p6); i++; } EditorData::GetInstance().numedentities = i; } .... }</span></span></code> </pre> <br> éå¸¸å¥‡æ€ªçš„ä»£ç ã€‚ åˆ†æå™¨ä¼šè­¦å‘Šå·²åˆ›å»ºä½†å°šæœªä½¿ç”¨çš„å˜é‡<i>pKey</i> ï¼Œä½†å®é™…ä¸Šé—®é¢˜å´å˜å¾—æ›´åŠ æœ‰è¶£ã€‚ æˆ‘ç‰¹åˆ«ç”¨ç®­å¤´æ ‡è®°äº†å‘å‡ºè­¦å‘Šçš„è¡Œï¼Œå› ä¸ºæ­¤å‡½æ•°åŒ…å«å¤šä¸ªåä¸º<i>pKeyçš„</i>è¡Œå®šä¹‰ã€‚ æ˜¯çš„ï¼Œå¦ä¸€ä¸ªè¿™æ ·çš„å˜é‡åœ¨<i>for</i>å¾ªç¯å†…å£°æ˜ï¼Œå¹¶ä¸”å…¶åç§°ä¸åœ¨å¾ªç¯å¤–å£°æ˜çš„å˜é‡é‡å ã€‚ <br><br> å› æ­¤ï¼Œå¦‚æœåœ¨<i>for</i>å¾ªç¯å¤–è®¿é—®<i>pKey</i>å­—ç¬¦ä¸²çš„å€¼ï¼Œåˆ™å°†å¾—åˆ°ç­‰äº<i>pElem-&gt; Valueï¼ˆï¼‰çš„å€¼</i> ï¼Œä½†æ˜¯å¦‚æœåœ¨å¾ªç¯å†…è¿›è¡Œç›¸åŒçš„æ“ä½œï¼Œåˆ™å°†å¾—åˆ°ç­‰äº<i>edEntityEl-&gt; Valueï¼ˆï¼‰çš„å€¼</i> ã€‚ åç§°é‡å æ˜¯ä¸€ä¸ªç›¸å½“ä¸¥é‡çš„é”™è¯¯ï¼Œåœ¨ä»£ç æ£€æŸ¥è¿‡ç¨‹ä¸­å¾ˆéš¾ç‹¬è‡ªæ‰¾åˆ°ã€‚ <br><br><h3> è­¦å‘Š4 </h3><br>  <a href="https://www.viva64.com/ru/w/v805/">V805</a>æ€§èƒ½<a href="https://www.viva64.com/ru/w/v805/">ä¸‹é™</a> ã€‚ ä½¿ç”¨'strlenï¼ˆstrï¼‰&gt; 0'æ„é€ æ¥è¯†åˆ«ç©ºå­—ç¬¦ä¸²æ•ˆç‡ä¸é«˜ã€‚ ä¸€ç§æ›´æœ‰æ•ˆçš„æ–¹æ³•æ˜¯æ£€æŸ¥ï¼šstr [0]ï¼='\ 0'ã€‚ ç¬¬1604ç«  <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *prefDir = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; .... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">char</span></span></span><span class="hljs-function"> *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PHYSFS_getPrefDir</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *org, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *app)</span></span></span><span class="hljs-function"> </span></span>{ .... assert(<span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(prefDir) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>); ... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> prefDir; } <span class="hljs-comment"><span class="hljs-comment">/* PHYSFS_getPrefDir */</span></span></code> </pre> <br> åˆ†æä»ªæ‰¾åˆ°äº†å¯èƒ½è¿›è¡Œå¾®ä¼˜åŒ–çš„åœ°æ–¹ã€‚ å®ƒä½¿ç”¨<i>strlen</i>å‡½æ•°æ£€æŸ¥Cæ ·å¼çš„å­—ç¬¦ä¸²æ˜¯å¦æ— æ•ˆã€‚ æ­¤å‡½æ•°â€œéå†â€å­—ç¬¦ä¸²çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶æ£€æŸ¥æ¯ä¸ªå…ƒç´ ä¸ç»ˆç«¯é›¶ï¼ˆ'\ 0'ï¼‰çš„ç›¸ç­‰æ€§ã€‚ å¦‚æœè¾“å…¥äº†å¤§å­—ç¬¦ä¸²ï¼Œåˆ™ä»å°†å…¶æ¯ä¸ªå­—ç¬¦ä¸é›¶å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒã€‚ <br><br> ä½†æ˜¯æˆ‘ä»¬åªéœ€è¦æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºå³å¯ï¼ ä¸ºæ­¤ï¼Œåªéœ€æ‰¾å‡ºå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºé›¶ç»ˆæ­¢ç¬¦å³å¯ã€‚ å› æ­¤ï¼Œè¦åœ¨assertä¸­ä¼˜åŒ–æ­¤æ£€æŸ¥ï¼Œåº”ç¼–å†™ï¼š <br><br><pre> <code class="cpp hljs">str[<span class="hljs-number"><span class="hljs-number">0</span></span>] != <span class="hljs-string"><span class="hljs-string">'\0'</span></span></code> </pre> <br> è¿™æ˜¯åˆ†æä»ªç»™æˆ‘ä»¬çš„å»ºè®®ã€‚ å½“ç„¶ï¼Œstrlenå‡½æ•°è°ƒç”¨å¤„äº<i>assert</i>å®æ¡ä»¶ä¸‹ï¼Œå› æ­¤åªèƒ½åœ¨é€Ÿåº¦ä¸å¤ªé‡è¦çš„è°ƒè¯•ç‰ˆæœ¬ä¸­æ‰§è¡Œã€‚ åœ¨å‘è¡Œç‰ˆä¸­ï¼Œå‡½æ•°è°ƒç”¨å°†æ¶ˆå¤±å¹¶ä¸”ä»£ç å°†å¿«é€Ÿè¿è¡Œã€‚ å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯æƒ³è¯æ˜åˆ†æä»ªæå‡ºå¾®ä¼˜åŒ–çš„åŠŸèƒ½ã€‚ <br><br><h3> è­¦å‘Š5 </h3><br> ä¸ºäº†æ˜¾ç¤ºä»¥ä¸‹é”™è¯¯ï¼Œæˆ‘éœ€è¦åœ¨æ­¤å¤„é™„åŠ ä¸¤æ®µä»£ç ï¼š <i>entclass</i>ç±»çš„å£°æ˜åŠå…¶æ„é€ å‡½æ•°ã€‚ è®©æˆ‘ä»¬ä»å…¬å‘Šå¼€å§‹ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">entclass</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: entclass(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">outside</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-comment"><span class="hljs-comment">//Fundamentals bool active, invis; int type, size, tile, rule; int state, statedelay; int behave, animate; float para; int life, colour; //Position and velocity int oldxp, oldyp; float ax, ay, vx, vy; int cx, cy, w, h; float newxp, newyp; bool isplatform; int x1, y1, x2, y2; //Collision Rules int onentity; bool harmful; int onwall, onxwall, onywall; //Platforming specific bool jumping; bool gravity; int onground, onroof; int jumpframe; //Animation int framedelay, drawframe, walkingframe, dir, actionframe; int yp; int xp; };</span></span></code> </pre> <br> è¯¥ç±»çš„æ„é€ å‡½æ•°å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="cpp hljs">entclass::entclass() { clear(); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> entclass::clear() { <span class="hljs-comment"><span class="hljs-comment">// Set all values to a default, // required for creating a new entity active = false; invis = false; type = 0; size = 0; tile = 0; rule = 0; state = 0; statedelay = 0; life = 0; colour = 0; para = 0; behave = 0; animate = 0; xp = 0; yp = 0; ax = 0; ay = 0; vx = 0; vy = 0; w = 16; h = 16; cx = 0; cy = 0; newxp = 0; newyp = 0; x1 = 0; y1 = 0; x2 = 320; y2 = 240; jumping = false; gravity = false; onground = 0; onroof = 0; jumpframe = 0; onentity = 0; harmful = false; onwall = 0; onxwall = 0; onywall = 0; isplatform = false; framedelay = 0; drawframe = 0; walkingframe = 0; dir = 0; actionframe = 0; }</span></span></code> </pre> <br> è¶³å¤Ÿçš„å­—æ®µï¼Œä¸æ˜¯å—ï¼Ÿ  PVS-Studioå‘å…¶å‘å‡ºè­¦å‘Šï¼Œæ½œä¼åœ¨è¿™é‡Œå¹¶ä¸å¥‡æ€ªã€‚ <br><br>  <a href="https://www.viva64.com/ru/w/v730/">V730</a>å¯èƒ½å¹¶éæ‰€æœ‰ç±»çš„æˆå‘˜éƒ½åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ã€‚ è€ƒè™‘æ£€æŸ¥ï¼šoldxpï¼Œoldypã€‚  Ent.cpp 3 <br><br> å¦‚æ‚¨æ‰€è§ï¼Œåœ¨è¿™ä¹ˆå¤§çš„åˆ—è¡¨ä¸­ï¼Œè¯¥ç±»çš„ä¸¤ä¸ªå­—æ®µçš„åˆå§‹åŒ–ä¸¢å¤±äº†ã€‚ å› æ­¤ï¼Œå®ƒä»¬çš„å€¼ä»æœªå®šä¹‰ï¼Œå› æ­¤ï¼Œå¯ä»¥åœ¨ç¨‹åºä¸­çš„å…¶ä»–ä½ç½®è¯»å–å’Œä½¿ç”¨æœªçŸ¥å€¼ã€‚ é€šè¿‡çœ¼ç›æ£€æµ‹è¿™ç§é”™è¯¯éå¸¸å›°éš¾ã€‚ <br><br><p><img src="https://habrastorage.org/webt/mi/8n/du/mi8nduqzzi75r1jhntbsqwarlns.png" alt="å›¾2"></p><br><br><h3> è­¦å‘Š6 </h3><br> è€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> mapclass::loadlevel(....) { .... <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; tmap; .... tmap = otherlevel.loadlevel(rx, ry, game, obj); fillcontent(tmap); .... <span class="hljs-comment"><span class="hljs-comment">//  tmap    . }</span></span></code> </pre> <br> è­¦å‘ŠPVS-studioï¼š <a href="https://www.viva64.com/ru/w/v688/">V688</a> â€œ tmapâ€å±€éƒ¨å˜é‡ä¸ä¸€ä¸ªç±»æˆå‘˜å…·æœ‰ç›¸åŒçš„åç§°ï¼Œè¿™å¯èƒ½å¯¼è‡´æ··ä¹±ã€‚ ç¬¬1192ç«  <br><br> å®é™…ä¸Šï¼Œå¦‚æœæ‚¨æŸ¥çœ‹<i>mapclass</i>ç±»å†…éƒ¨ï¼Œåˆ™å¯ä»¥åœ¨å…¶ä¸­æ‰¾åˆ°å…·æœ‰ç›¸åŒåç§°çš„ç›¸åŒå‘é‡ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mapclass</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: .... <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; roomdeaths; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; roomdeathsfinal; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; areamap; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; contents; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; explored; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; vmult; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span> &lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; tmap; <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... };</span></span></code> </pre> <br> ä¸å¹¸çš„æ˜¯ï¼Œåœ¨å‡½æ•°å†…éƒ¨å£°æ˜å…·æœ‰ç›¸åŒåç§°çš„å‘é‡ä¼šä½¿åœ¨ç±»ä¸­å£°æ˜çš„å‘é‡ä¸å¯è§ã€‚ äº‹å®è¯æ˜ï¼Œåœ¨æ•´ä¸ª<i>loadlevel</i>å‡½æ•°ä¸­ï¼Œ <i>tmap</i>å‘é‡ä»…åœ¨å‡½æ•°å†…éƒ¨å‘ç”Ÿå˜åŒ–ã€‚ åœ¨ç±»ä¸­å£°æ˜çš„å‘é‡ä¿æŒä¸å˜ï¼ <br><br> æœ‰è¶£çš„æ˜¯ï¼ŒPVS-Studioå‘ç°äº†å¤šè¾¾20ä¸ªè¿™æ ·çš„ä»£ç ç‰‡æ®µï¼ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä¸ä¸´æ—¶å˜é‡ç›¸å…³è”ï¼Œä¸ºæ–¹ä¾¿èµ·è§ï¼Œå®ƒä»¬è¢«å£°æ˜ä¸ºç±»çš„æˆå‘˜ã€‚ æ¸¸æˆçš„ä½œè€…ï¼ˆåŠå…¶å”¯ä¸€çš„å¼€å‘è€…ï¼‰è‡ªå·±å†™é“ï¼Œä»–æ›¾ç»æœ‰è¿™ç§ä¸è‰¯ä¹ æƒ¯ã€‚ æ‚¨å¯ä»¥åœ¨æœ¬æ–‡å¼€å¤´é“¾æ¥åˆ°çš„æ–‡ç« ä¸­äº†è§£æœ‰å…³æ­¤å†…å®¹çš„ä¿¡æ¯ã€‚ <br><br> ä»–è¿˜æŒ‡å‡ºï¼Œè¿™ç§å‘½åä¼šå¯¼è‡´æœ‰å®³ä¸”éš¾ä»¥æ•è·çš„é”™è¯¯ã€‚ å¥½å§ï¼Œè¿™æ ·çš„é”™è¯¯ç¡®å®å¾ˆæœ‰å®³ï¼Œä½†æ˜¯ä½¿ç”¨é™æ€åˆ†ææ¥æ•è·å®ƒä»¬å¹¶ä¸å›°éš¾:) <br><br><h3> è­¦å‘Š7 </h3><br>  <a href="https://www.viva64.com/ru/w/v601/">V601</a>æ•´æ•°ç±»å‹éšå¼è½¬æ¢ä¸ºcharç±»å‹ã€‚ æ¸¸æˆ.cpp 4997 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Game::loadquick(....) { .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pKey == <span class="hljs-string"><span class="hljs-string">"totalflips"</span></span>) { totalflips = atoi(pText); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pKey == <span class="hljs-string"><span class="hljs-string">"hardestroom"</span></span>) { hardestroom = atoi(pText); <span class="hljs-comment"><span class="hljs-comment">// &lt;= } else if (pKey == "hardestroomdeaths") { hardestroomdeaths = atoi(pText); } .... }</span></span></code> </pre> <br> è¦äº†è§£é—®é¢˜æ‰€åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ç»™å®šéƒ¨åˆ†ä¸­çš„å˜é‡å®šä¹‰ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//Some stats: int totalflips; std::string hardestroom; int hardestroomdeaths;</span></span></code> </pre> <br> å˜é‡<i>totalflips</i>å’Œ<i>hardestroomdeaths</i>æ˜¯æ•´æ•°ç±»å‹ï¼Œå› æ­¤å°†ç»“æœåˆ†é…ç»™å…¶ä¸­çš„<i>atoi</i>å‡½æ•°æ˜¯å®Œå…¨æ­£å¸¸çš„ã€‚ ä½†æ˜¯ï¼Œå¦‚æœä¸º<i>std :: string</i>åˆ†é…ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ äº‹å®è¯æ˜ï¼Œä»è¯­è¨€çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ ·çš„åˆ†é…æ˜¯å®Œå…¨æœ‰æ•ˆçš„ã€‚ ç»“æœï¼Œä¸€äº›éš¾ä»¥ç†è§£çš„å€¼å°†è¢«å†™å…¥<i>hardestroom</i>å˜é‡ï¼ <br><br><h3> è­¦å‘Š8 </h3><br>  <a href="https://www.viva64.com/ru/w/v1004/">V1004</a>åœ¨å¯¹nullptrè¿›è¡Œäº†éªŒè¯ä¹‹åï¼Œä¸å®‰å…¨åœ°ä½¿ç”¨äº†â€œ pElemâ€æŒ‡é’ˆã€‚ æ£€æŸ¥è¡Œï¼š1739ã€1744ã€‚editor.cpp 1744 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> editorclass::load(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> &amp;_path) { .... <span class="hljs-function"><span class="hljs-function">TiXmlHandle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hDoc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&amp;doc)</span></span></span></span>; TiXmlElement *pElem; <span class="hljs-function"><span class="hljs-function">TiXmlHandle </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hRoot</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; version = <span class="hljs-number"><span class="hljs-number">0</span></span>; { pElem = hDoc.FirstChildElement().Element(); <span class="hljs-comment"><span class="hljs-comment">// should always have a valid root // but handle gracefully if it does if (!pElem) { printf("No valid root! Corrupt level file?\n"); } pElem-&gt;QueryIntAttribute("version", &amp;version); // &lt;= // save this for later hRoot = TiXmlHandle(pElem); } .... }</span></span></code> </pre> <br> åˆ†æå™¨è­¦å‘Šè¯´ï¼Œåœ¨æ£€æŸ¥äº†<i>nullptr</i>ä¹‹åï¼Œä¼šç«‹å³ä¸å®‰å…¨åœ°ä½¿ç”¨<i>pElem</i>æŒ‡é’ˆã€‚ ä¸ºäº†ç¡®ä¿åˆ†æå™¨æ­£ç¡®ï¼Œè¯·çœ‹ä¸€ä¸‹<i>Elementï¼ˆï¼‰</i>å‡½æ•°çš„å®šä¹‰ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼åˆå§‹åŒ–<i>pElem</i>æŒ‡é’ˆï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/** @deprecated use ToElement. Return the handle as a TiXmlElement. This may return null. */</span></span> <span class="hljs-function"><span class="hljs-function">TiXmlElement *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Element</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ToElement(); }</code> </pre> <br> ä»æ³¨é‡Šä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ­¤å‡½æ•°å¯ä»¥è¿”å›<i>null</i> ã€‚ <br><br> ç°åœ¨æƒ³è±¡ä¸€ä¸‹è¿™ç¡®å®å‘ç”Ÿäº†ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ äº‹å®æ˜¯è¿™ç§æƒ…å†µä¸ä¼šä»¥ä»»ä½•æ–¹å¼å¤„ç†ã€‚ æ˜¯çš„ï¼Œå°†æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ï¼ŒæŒ‡å‡ºå‡ºäº†ç‚¹é—®é¢˜ï¼Œä½†æ˜¯ä»å­—é¢ä¸Šçœ‹ï¼Œé”™è¯¯æŒ‡é’ˆä¸‹é¢çš„ä¸€è¡Œå°†è¢«å–æ¶ˆå¼•ç”¨ã€‚ åè¿‡æ¥ï¼Œè¿™ç§å–æ¶ˆå¼•ç”¨å°†å¯¼è‡´ç¨‹åºå´©æºƒæˆ–ä¸ç¡®å®šçš„è¡Œä¸ºã€‚ è¿™æ˜¯ä¸€ä¸ªéå¸¸ä¸¥é‡çš„é”™è¯¯ã€‚ <br><br><h3> è­¦å‘Š9 </h3><br> åœ¨ä»£ç çš„ä¸‹ä¸€éƒ¨åˆ†ä¸­ï¼ŒPVS-Studioå‘å‡ºäº†å››ä¸ªè­¦å‘Šï¼š <ul><li>  <a href="https://www.viva64.com/ru/w/v560/">V560</a>æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºtrueï¼šx&gt; =0ã€‚editor.cpp 1137 </li><li>  <a href="https://www.viva64.com/ru/w/v560/">V560</a>æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºtrueï¼šy&gt; =0ã€‚editor.cpp 1137 </li><li>  <a href="https://www.viva64.com/ru/w/v560/">V560</a>æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºtrueï¼šx &lt;40ã€‚editor.cpp 1137 </li><li>  <a href="https://www.viva64.com/ru/w/v560/">V560</a>æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºtrueï¼šy &lt;30ã€‚editor.cpp 1137 </li></ul><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> editorclass::at( <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y ) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> at(<span class="hljs-number"><span class="hljs-number">0</span></span>,y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(y&lt;<span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> at(x,<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x&gt;=<span class="hljs-number"><span class="hljs-number">40</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> at(<span class="hljs-number"><span class="hljs-number">39</span></span>,y); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(y&gt;=<span class="hljs-number"><span class="hljs-number">30</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> at(x,<span class="hljs-number"><span class="hljs-number">29</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(x&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; y&gt;=<span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; x&lt;<span class="hljs-number"><span class="hljs-number">40</span></span> &amp;&amp; y&lt;<span class="hljs-number"><span class="hljs-number">30</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> contents[x+(levx*<span class="hljs-number"><span class="hljs-number">40</span></span>)+vmult[y+(levy*<span class="hljs-number"><span class="hljs-number">30</span></span>)]]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br> æ‰€æœ‰è­¦å‘Šå‡é€‚ç”¨äºæœ€åä¸€ä¸ª<i>if</i>è¯­å¥ã€‚ é—®é¢˜åœ¨äºï¼Œå¯¹å…¶æ‰§è¡Œçš„æ‰€æœ‰å››ä¸ªæ£€æŸ¥å°†å§‹ç»ˆè¿”å›<i>true</i> ã€‚ æˆ‘ä¸ä¼šè¯´è¿™æ˜¯ä¸€ä¸ªä¸¥é‡çš„é”™è¯¯ï¼Œä½†äº‹å®è¯æ˜è¿™å¾ˆæœ‰è¶£ã€‚ ä½œè€…å†³å®šè®¤çœŸå¯¹å¾…æ­¤åŠŸèƒ½ï¼Œä»¥é˜²ä¸‡ä¸€ï¼Œå†æ¬¡æ£€æŸ¥æ¯ä¸ªå˜é‡:) <br><br> è¯¥æ”¯ç¥¨å¯ä»¥åˆ é™¤ï¼Œå› ä¸º æ— è®ºå¦‚ä½•ï¼Œæ‰§è¡Œçº¿ç¨‹å°†æ°¸è¿œä¸ä¼šåˆ°è¾¾è¡¨è¾¾å¼â€œ <i>return 0;</i> â€ã€‚ å°½ç®¡è¿™ä¸ä¼šæ”¹å˜ç¨‹åºçš„é€»è¾‘ï¼Œä½†æ˜¯å®ƒå°†ä½¿ç¨‹åºæ‘†è„±ä¸å¿…è¦çš„æ£€æŸ¥å’Œæ— æ•ˆä»£ç ã€‚ <br><br><h3> è­¦å‘Š10 </h3><br> ç‰¹é‡Œåœ¨å…¶æ¸¸æˆå‘¨å¹´çºªå¿µæ—¥çš„æ–‡ç« ä¸­è®½åˆºåœ°è¯´ï¼Œæ§åˆ¶æ¸¸æˆé€»è¾‘çš„è¦ç´ ä¹‹ä¸€æ˜¯å¯¹<i>Game :: updatestateï¼ˆï¼‰</i>å‡½æ•°çš„å·¨å¤§åˆ‡æ¢ï¼Œè¯¥åŠŸèƒ½ç«‹å³è´Ÿè´£å¤§é‡ä¸åŒçš„æ¸¸æˆçŠ¶æ€ã€‚ å¾ˆæœŸå¾…æˆ‘ä¼šå‘ç°ä»¥ä¸‹è­¦å‘Šï¼š <br><br>  <a href="https://www.viva64.com/ru/w/v2008/">V2008</a>å¾ªç¯å¤æ‚åº¦ï¼š548ã€‚è¯·è€ƒè™‘é‡æ„â€œæ¸¸æˆ::æ›´æ–°çŠ¶æ€â€åŠŸèƒ½ã€‚  Game.cpp 612 <br><br> æ˜¯çš„ï¼Œæ‚¨ç†è§£æ­£ç¡®ï¼šPVS-Studioä¼°è®¡åŠŸèƒ½çš„åœˆå¤æ‚åº¦ä¸º548ä¸ªå•ä½ã€‚ äº”ç™¾å››åå…«ï¼ æ®æˆ‘äº†è§£-â€œæ•´æ´çš„ä»£ç â€ã€‚ è€Œä¸”ï¼Œå°½ç®¡äº‹å®ä¸Šï¼Œå‡½æ•°ä¸­åªä¸è¿‡æœ‰ä¸€ä¸ªswitchè¡¨è¾¾å¼ã€‚ åœ¨å¼€å…³æœ¬èº«ä¸­ï¼Œæˆ‘è®¡ç®—äº†300å¤šä¸ªcaseè¡¨è¾¾å¼ã€‚ <br><br> åœ¨æˆ‘ä»¬çš„åŠå…¬å®¤é‡Œï¼Œä½œè€…ä¹‹é—´ä¸ºäº‰å–æœ€é•¿çš„æ–‡ç« è€Œè¿›è¡Œçš„ç«äº‰å¾ˆå°ã€‚ æˆ‘å¾ˆä¹æ„å°†æ‰€æœ‰åŠŸèƒ½ä»£ç éƒ½å¸¦åˆ°è¿™é‡Œï¼ˆ3450è¡Œï¼‰ï¼Œä½†æ˜¯è¿™æ ·çš„èƒœåˆ©æ˜¯ä¸è¯šå®çš„ï¼Œå› æ­¤æˆ‘å°†è‡ªå·±å±€é™äºç®€å•åœ°<a href="">æåŠ</a>å·¨å¤§çš„å¼€å…³ã€‚ æˆ‘å»ºè®®æ‚¨éµå¾ªå®ƒå¹¶è‡ªå·±è¯„ä¼°æ•´ä½“è§„æ¨¡ï¼ é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œé™¤äº†<i>Game :: updatestateï¼ˆï¼‰ä¹‹å¤–</i> ï¼ŒPVS-Studioè¿˜å‘ç°å¤šè¾¾44ä¸ªå‡½æ•°çš„å¾ªç¯å¤æ‚æ€§è¿‡é«˜ï¼Œå…¶ä¸­10ä¸ªå¤æ‚åº¦è¶…è¿‡200ã€‚ <br><br><p><img src="https://habrastorage.org/webt/pu/s9/a2/pus9a2tqqeyzmdkg90auf5r2d0q.png" alt="å›¾3"></p><br><br><h2> ç»“è®º </h2><br> æˆ‘è®¤ä¸ºä¹¦é¢é”™è¯¯è¶³ä»¥æ»¡è¶³æœ¬æ–‡è¦æ±‚ã€‚ æ˜¯çš„ï¼Œé¡¹ç›®ä¸­å­˜åœ¨å¾ˆå¤šé”™è¯¯ï¼Œä½†è¿™ç¡®å®æ˜¯çªé—¨ï¼šå¸ƒç½®å¥½è‡ªå·±çš„ä»£ç åï¼ŒTerry Cavanaghè¯æ˜ï¼Œä¸å¿…æˆä¸ºä¼˜ç§€çš„ç¨‹åºå‘˜æ¥åˆ¶ä½œå‡ºè‰²çš„æ¸¸æˆã€‚ ç°åœ¨ï¼Œåå¹´åï¼Œç‰¹é‡Œé¢‡å…·è®½åˆºæ„å‘³åœ°å›æƒ³èµ·é‚£äº›æ—¶ä»£ã€‚ ä»é”™è¯¯ä¸­å­¦ä¹ å¾ˆé‡è¦ï¼Œè€Œå®è·µæ˜¯åšåˆ°è¿™ä¸€ç‚¹çš„æœ€ä½³æ–¹æ³•ã€‚ è€Œä¸”ï¼Œå¦‚æœæ‚¨çš„ç»ƒä¹ ä»ç„¶å¯ä»¥äº§ç”ŸåƒVVVVVVVè¿™æ ·çš„æ¸¸æˆï¼Œé‚£ä¹ˆé€šå¸¸æ¥è¯´è¿™å¤ªå¥½äº†ï¼ æ©...æˆ‘å»äº†ï¼Œæˆ‘å¯èƒ½ä¼šå†ç©ä¸€æ¬¡:) <br><br> è¿™äº›å¹¶éæ¸¸æˆä»£ç ä¸­å‘ç°çš„æ‰€æœ‰é”™è¯¯ã€‚ å¦‚æœæ‚¨æƒ³è‡ªå·±çœ‹çœ‹è¿˜èƒ½æ‰¾åˆ°ä»€ä¹ˆï¼Œæˆ‘å»ºè®®<a href="https://www.viva64.com/ru/pvs-studio-download/">ä¸‹è½½å¹¶å°è¯•ä½¿ç”¨PVS-Studio</a> ï¼ åŒæ ·ä¸è¦å¿˜è®°ï¼Œå¯¹äºå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬<a href="https://www.viva64.com/ru/b/0614/">æä¾›</a>å…è´¹è®¸å¯è¯ã€‚ <br><br><p> <a href="https://habr.com/en/company/pvs-studio/blog/484388/"><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br> å¦‚æœæ‚¨æƒ³ä¸è®²è‹±è¯­çš„è¯»è€…åˆ†äº«è¿™ç¯‡æ–‡ç« ï¼Œè¯·ä½¿ç”¨ç¿»è¯‘é“¾æ¥ï¼šGeorge Gribkovã€‚  <a href="https://habr.com/en/company/pvs-studio/blog/484388/">VVVVVV ???</a>  <a href="https://habr.com/en/company/pvs-studio/blog/484388/">VVVVVV !!!</a>  <a href="https://habr.com/en/company/pvs-studio/blog/484388/">:)</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN484166/">https://habr.com/ru/post/zh-CN484166/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN484150/index.html">5ä¸ªç”¨äºåˆ›å»ºæœ‰è¶£å†…å®¹çš„æ–°å·¥å…·</a></li>
<li><a href="../zh-CN484152/index.html">é«˜é€ŸPACæ§åˆ¶å™¨WISE-5580</a></li>
<li><a href="../zh-CN484154/index.html">äºŒé˜¶æ–¹ç¨‹æ–¹ç¨‹ç»„çš„æ±‚è§£æ–¹æ³•</a></li>
<li><a href="../zh-CN484160/index.html">éš¾ä»¥æ‰æ‘¸çš„äººæ‰ï¼šä¿„ç½—æ–¯å¤±å»äº†æœ€ä½³ITä¸“ä¸šäººå‘˜</a></li>
<li><a href="../zh-CN484164/index.html">ä¹¦ç±çš„å†å²å’Œå›¾ä¹¦é¦†çš„æœªæ¥</a></li>
<li><a href="../zh-CN484168/index.html">æˆ‘ä»¬ç¼–å†™äº†ä»Angular CDKè¿›è¡Œè™šæ‹Ÿæ»šåŠ¨çš„ç­–ç•¥</a></li>
<li><a href="../zh-CN484170/index.html">å°†æ£€æŸ¥ç‚¹ä»R77.30æ›´æ–°åˆ°80.20</a></li>
<li><a href="../zh-CN484172/index.html">ä¸Unityçš„æŒç»­é›†æˆï¼šå¦‚ä½•å‡å°‘ç»„è£…æ—¶é—´å¹¶èŠ‚çœèµ„æº+æ”¯ä»˜çº¿ä½œä¸ºç¤¼ç‰©</a></li>
<li><a href="../zh-CN484174/index.html">åŸå ¡åœ¨â€œæç«¯â€æ¡ä»¶ä¸‹é¥®é…’æˆ–æˆ‘ä»¬å¦‚ä½•å‚åŠ â€œ DOZORâ€è¡¨æ¼”</a></li>
<li><a href="../zh-CN484176/index.html">åœ¨Unityä¸­å®ç°çŠ¶æ€æ¨¡æ¿</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>