<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤚🏾 🍤 🦆 vu-mètre sur l'IN-33 😪 🍙 📜</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pour commencer, le moment est venu de remplacer mon amplificateur par quelque chose de nouveau. Je ne peux pas dire qu'après la mise à niveau, Vega a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>vu-mètre sur l'IN-33</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/385391/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour commencer, le moment est venu de remplacer mon amplificateur par quelque chose de nouveau. Je ne peux pas dire qu'après la mise à niveau, Vega a mal joué, mais il y a un délai. Et soit vous devez le trier complètement selon le délai de prescription, soit ... en créer un nouveau. Mais ceci est une chanson distincte. En attendant, je voulais ajouter un indicateur de signal au nouvel amplificateur. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et tout irait bien, mais les LED ne l'aiment pas. Non, ils sont modernes, simples, jolis ... Et terriblement ennuyeux. Et je voulais quelque chose de </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaud, d'</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ion de </font><s><font style="vertical-align: inherit;">lampe</font></s><font style="vertical-align: inherit;"> . J'ai toujours eu un faible pour les lampes ioniques ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et donc, à la datcha, le bloc de la lampe ILT6-30M a été ouvert. Mais je n'étais pas content depuis longtemps - il s'est avéré que quelqu'un avait le temps de le brûler avant moi ... </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et maintenant, réfléchissant à la façon de remplacer l'unité de contrôle, je suis tombé par hasard sur la lampe IN-33. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/23d/c85/63b/23dc8563b1e58ad36fb1ee839f5a8cb8.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et tout est arrivé ...</font></font><br>
<br>
<a name="habracut"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La lampe n'a pas été retrouvée immédiatement. Et lors de l'achat dans un seul magasin à Saint-Pétersbourg, ils m'ont demandé avec surprise - est-ce que je sais ce que j'achète? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais acheter est la moitié du problème. Aucun schéma de contrôle d'origine n'a été trouvé. Et ce qui serait plus intéressant - la lampe a besoin d'une puissance de 130 et 250 volts de puissance constante! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et le plus triste, c'est qu'il y a très peu d'informations à ce sujet. Il y a un article sur RadioKot où SLvik a fait un projet à ce sujet et a présenté le programme. Il y a un article allemand où une personne a également fait un projet dessus et a présenté l'algorithme de travail et la source avec le schéma. Mais la lampe est à 8 broches et la mienne à 10. Oui, et le brochage ne correspond pas! Il existe un manuel pour une lampe similaire américaine. Mais il est également indiqué 8 broches! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une petite digression. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La lampe a 200 segments! Tout le monde peut être éclairé INDIVIDUELLEMENT. Et les conclusions ne sont que de 10. "Comment ont-ils réussi?!"</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et voici la chose la plus intéressante, que je n'ai par exemple même pas entendue: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
la lampe est un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compteur de décatrons</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'idée de contrôle est assez simple: on «allume» le segment «graine» situé au début du bulbe. Ensuite, nous mettons à la terre la 1ère cathode de l'élément voisin, et le flux «saute» de l'élément germe vers un nouveau. À ce moment, «éteignez» la graine et maintenant le deuxième segment est en feu. Maintenant, nous avons mis à la terre la deuxième cathode et le flux y monte, le troisième segment s'allume. Et nous éteignons la première cathode. On fait de même avec la 3e cathode. Et après lui encore, le premier, le deuxième, le troisième. Il s'avère une sorte de lumière "courante". Et nous le conduisons donc au niveau dont nous avons besoin. Et quand il a «atteint» le niveau dont nous avons besoin, nous éteignons l'anode et répétons tout à nouveau.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dessin du manuel américain sur l'indicateur: </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/11d/fc9/952/11dfc9952e75c93e0a7f141dfe474ba2.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So. Tout semble être avec la théorie. L'indicateur est entre nos mains, il est temps de pratiquer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous devez d'abord obtenir 130 et 250 volts. Il y avait une idée folle de prendre "de la sortie". J'ai pris un pont de diodes, jeté un </font><font style="vertical-align: inherit;">condensateur </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur le</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> condensateur, obtenu l'amplitude 310 du courant 220, je l'ai fait passer à travers les diodes zener et ... je l'ai attrapé au moins, saisissant accidentellement la masse de l'appareil et la batterie de chauffage. Douloureusement. Très. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et donc, </font></font><u><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">soyez extrêmement prudent lorsque vous manipulez des lampes ioniques sans filaments incandescents! La haute tension n'est pas une blague. Les planches après dessoudage doivent être soigneusement lavées avec du flux. Et si vous n'avez pas assez d'expérience en électronique, mieux vaut s'abstenir d'assembler cet appareil!</font></font></b></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En général, j'ai dû abandonner l'idée de manger dans un magasin. La collecte de boosters d'impulsions est paresseuse. Mais l'idée est venue de prendre un onduleur universel prêt à l'emploi à partir du rétroéclairage des écrans LCD. Il coûte 150 roubles par pièce, le transformateur est facilement démontable et rembobiné à la tension dont nous avons besoin. Pour le mien, il s'est avéré 200 tours pour un bobinage 130V et plus 240 tours pour 250 volts. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Reste à tromper le système de sécurité de l'onduleur, sinon il s'éteindra au bout de 3 secondes. Pour ce faire, pour la puce DF6109A, il est nécessaire de souder la </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">résistance de</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> résistance à 12K du 13e pied au sol.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, c'est simple: une diode, un condensateur et maintenant nous avons 130 et 250V prêts. Il est vrai que la tension d'alimentation de l'onduleur devait être élevée à 15 V, sinon les enroulements devraient être enroulés davantage. Si vous enroulez un fil plus fin avec un plus grand nombre de tours, vous pouvez également alimenter à partir de 12 V, mais je n'avais pas de fil plus fin. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Donc - Tout est presque prêt. Nous fabriquons une carte, y attachons un onduleur, soudons les clés selon le schéma. </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/d86/35a/ec7/d8635aec7eba85ce2307c5b30fad1195.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Schéma (le mien, version refaite. Original tiré de SLvik): Brochage de la </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/d74/fbd/ec5/d74fbdec595a6b697eb651512e87f4eb.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lampe: </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/39b/730/4c4/39b7304c470c3162a6ed6de93236ad5b.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1 Première anode </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2 Cathodes du premier groupe </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
3 Cathodes du deuxième groupe </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4 Première cathode de la réinitialisation </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5 Deuxième cathode de la réinitialisation </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6 Première anode auxiliaire </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
7 Deuxième anode auxiliaire </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
8 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cathodes </font><font style="vertical-align: inherit;">auxiliaires </font><font style="vertical-align: inherit;">9 Cathodes du troisième groupe</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
10 Anode du deuxième groupe </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Firmware. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est temps de se souvenir de l'arduino. </font><font style="vertical-align: inherit;">Il semble que sur le diagramme, il ne brille pas particulièrement. </font><font style="vertical-align: inherit;">Mais il est. </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aki est le gopher. Le</font></font></s><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
truc c'est que je suis paresseux. </font><font style="vertical-align: inherit;">Pour les projets de jouets, il est plus rapide de lancer un croquis et de le remplir via UART que de se baigner avec du C propre et de s'amuser avec le FAI. </font><font style="vertical-align: inherit;">Oui, et plus pratique pour les débutants. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'idée est la suivante. </font><font style="vertical-align: inherit;">Nous prenons l'arduino duemilanove, flashons le croquis, sélectionnons la puce, la soudons dans la planche et c'est tout. </font><font style="vertical-align: inherit;">En échange, nous achetons pour 150 roubles un nouveau sur ebee. </font><font style="vertical-align: inherit;">Idéalement.</font></font><br>
<br>
<cut text=":"> <br>
<br>
<pre><code class="python hljs"><span class="hljs-comment">#define pA1 9</span>
<span class="hljs-comment">#define pA2 10 // -  </span>
<span class="hljs-comment">#define pK1 8  // - ! </span>
<span class="hljs-comment">#define pK2 7</span>
<span class="hljs-comment">#define pK3 6</span>
<span class="hljs-comment">#define pKR 5</span><font></font>
<font></font>
<span class="hljs-comment">#define SumCounterMax 13   // .   -   .</span>
<span class="hljs-comment">#define InputMultiplier 8  //  .    -   .</span><font></font>
<font></font>
int Avg1[SumCounterMax];<font></font>
int Avg2[SumCounterMax];<font></font>
byte nAvg = <span class="hljs-number">0</span>;<font></font>
<font></font>
const byte Log_Conv[<span class="hljs-number">256</span>] = {<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">12</span>,<span class="hljs-number">13</span>,<span class="hljs-number">15</span>,<span class="hljs-number">16</span>,<span class="hljs-number">17</span>,<span class="hljs-number">18</span>,<span class="hljs-number">20</span>,<span class="hljs-number">21</span>,<span class="hljs-number">22</span>,<span class="hljs-number">23</span>,<span class="hljs-number">24</span>,<span class="hljs-number">25</span>,<span class="hljs-number">26</span>,<span class="hljs-number">27</span>,<span class="hljs-number">28</span>,<span class="hljs-number">29</span>,<span class="hljs-number">30</span>,<span class="hljs-number">31</span>,<span class="hljs-number">32</span>,<span class="hljs-number">33</span>,<span class="hljs-number">33</span>,<span class="hljs-number">34</span>,<span class="hljs-number">35</span>,<span class="hljs-number">36</span>,<span class="hljs-number">37</span>,<span class="hljs-number">37</span>,<span class="hljs-number">38</span>,<span class="hljs-number">39</span>,<span class="hljs-number">40</span>,<span class="hljs-number">40</span>,<span class="hljs-number">41</span>,<span class="hljs-number">42</span>,<span class="hljs-number">42</span>,<span class="hljs-number">43</span>,<span class="hljs-number">44</span>,<span class="hljs-number">44</span>,<span class="hljs-number">45</span>,<span class="hljs-number">45</span>,<span class="hljs-number">46</span>,<span class="hljs-number">47</span>,<span class="hljs-number">47</span>,<span class="hljs-number">48</span>,<span class="hljs-number">48</span>,<span class="hljs-number">49</span>,<span class="hljs-number">50</span>,<span class="hljs-number">50</span>,<span class="hljs-number">51</span>,<span class="hljs-number">51</span>,<span class="hljs-number">52</span>,<span class="hljs-number">52</span>,<span class="hljs-number">53</span>,<span class="hljs-number">53</span>,<span class="hljs-number">54</span>,<span class="hljs-number">54</span>,<span class="hljs-number">55</span>,<span class="hljs-number">55</span>,<span class="hljs-number">56</span>,<span class="hljs-number">56</span>,<span class="hljs-number">57</span>,<span class="hljs-number">57</span>,<span class="hljs-number">57</span>,<span class="hljs-number">58</span>,<span class="hljs-number">58</span>,<span class="hljs-number">59</span>,<span class="hljs-number">59</span>,<span class="hljs-number">60</span>,<span class="hljs-number">60</span>,<span class="hljs-number">60</span>,<span class="hljs-number">61</span>,<span class="hljs-number">61</span>,<span class="hljs-number">62</span>,<span class="hljs-number">62</span>,<span class="hljs-number">63</span>,<span class="hljs-number">63</span>,<span class="hljs-number">63</span>,<span class="hljs-number">64</span>,<span class="hljs-number">64</span>,<span class="hljs-number">64</span>,<span class="hljs-number">65</span>,<span class="hljs-number">65</span>,<span class="hljs-number">66</span>,<span class="hljs-number">66</span>,<span class="hljs-number">66</span>,<span class="hljs-number">67</span>,<span class="hljs-number">67</span>,<span class="hljs-number">67</span>,<span class="hljs-number">68</span>,<span class="hljs-number">68</span>,<span class="hljs-number">68</span>,<span class="hljs-number">69</span>,<span class="hljs-number">69</span>,<span class="hljs-number">69</span>,<span class="hljs-number">70</span>,<span class="hljs-number">70</span>,<span class="hljs-number">70</span>,<span class="hljs-number">71</span>,<span class="hljs-number">71</span>,<span class="hljs-number">72</span>,<span class="hljs-number">73</span>,<span class="hljs-number">73</span>,<span class="hljs-number">73</span>,<span class="hljs-number">74</span>,<span class="hljs-number">74</span>,<span class="hljs-number">74</span>,<span class="hljs-number">74</span>,<span class="hljs-number">75</span>,<span class="hljs-number">75</span>,<span class="hljs-number">75</span>,<span class="hljs-number">76</span>,<span class="hljs-number">76</span>,<span class="hljs-number">76</span>,<span class="hljs-number">76</span>,<span class="hljs-number">77</span>,<span class="hljs-number">77</span>,<span class="hljs-number">77</span>,<span class="hljs-number">78</span>,<span class="hljs-number">78</span>,<span class="hljs-number">78</span>,<span class="hljs-number">78</span>,<span class="hljs-number">79</span>,<span class="hljs-number">79</span>,<span class="hljs-number">79</span>,<span class="hljs-number">79</span>,<span class="hljs-number">80</span>,<span class="hljs-number">81</span>,<span class="hljs-number">81</span>,<span class="hljs-number">82</span>,<span class="hljs-number">82</span>,<span class="hljs-number">82</span>,<span class="hljs-number">82</span>,<span class="hljs-number">83</span>,<span class="hljs-number">83</span>,<span class="hljs-number">83</span>,<span class="hljs-number">83</span>,<span class="hljs-number">84</span>,<span class="hljs-number">84</span>,<span class="hljs-number">84</span>,<span class="hljs-number">84</span>,<span class="hljs-number">84</span>,<span class="hljs-number">85</span>,<span class="hljs-number">85</span>,<span class="hljs-number">86</span>,<span class="hljs-number">86</span>,<span class="hljs-number">87</span>,<span class="hljs-number">87</span>,<span class="hljs-number">87</span>,<span class="hljs-number">87</span>,<span class="hljs-number">88</span>,<span class="hljs-number">88</span>,<span class="hljs-number">88</span>,<span class="hljs-number">88</span>,<span class="hljs-number">88</span>,<span class="hljs-number">89</span>,<span class="hljs-number">89</span>,<span class="hljs-number">89</span>,<span class="hljs-number">89</span>,<span class="hljs-number">90</span>,<span class="hljs-number">90</span>,<span class="hljs-number">90</span>,<span class="hljs-number">90</span>,<span class="hljs-number">90</span>,<span class="hljs-number">91</span>,<span class="hljs-number">91</span>,<span class="hljs-number">91</span>,<span class="hljs-number">91</span>,<span class="hljs-number">92</span>,<span class="hljs-number">93</span>,<span class="hljs-number">93</span>,<span class="hljs-number">93</span>,<span class="hljs-number">93</span>,<span class="hljs-number">93</span>,<span class="hljs-number">94</span>,<span class="hljs-number">94</span>,<span class="hljs-number">94</span>,<span class="hljs-number">94</span>,<span class="hljs-number">94</span>,<span class="hljs-number">95</span>,<span class="hljs-number">95</span>,<span class="hljs-number">95</span>,<span class="hljs-number">95</span>,<span class="hljs-number">95</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">96</span>,<span class="hljs-number">97</span>,<span class="hljs-number">97</span>,<span class="hljs-number">97</span>,<span class="hljs-number">97</span>,<span class="hljs-number">97</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">98</span>,<span class="hljs-number">99</span>,<span class="hljs-number">99</span>,<span class="hljs-number">99</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">101</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">102</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">103</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">104</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">105</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">106</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>,<span class="hljs-number">107</span>};<font></font>
<font></font>
void setup()<font></font>
{<font></font>
	pinMode(pA1, OUTPUT);<font></font>
	pinMode(pA2, OUTPUT);<font></font>
	pinMode(pK1, OUTPUT);<font></font>
	pinMode(pK2, OUTPUT);<font></font>
	pinMode(pK3, OUTPUT);<font></font>
	pinMode(pKR, OUTPUT);<font></font>
<font></font>
	digitalWrite(pA1, LOW);<font></font>
	digitalWrite(pA2, LOW);<font></font>
	digitalWrite(pK1, LOW);<font></font>
	digitalWrite(pK2, LOW);<font></font>
	digitalWrite(pK3, LOW);<font></font>
	digitalWrite(pA1, LOW);<font></font>
	digitalWrite(pA2, LOW);<font></font>
	digitalWrite(pKR, HIGH);<font></font>
<font></font>
	delay(<span class="hljs-number">100</span>);<font></font>
	analogReference(INTERNAL);<font></font>
}<font></font>
<font></font>
void loop()<font></font>
{<font></font>
	//reset<font></font>
	digitalWrite(pA1, LOW);<font></font>
	digitalWrite(pA2, LOW);<font></font>
	digitalWrite(pK1, LOW);<font></font>
	digitalWrite(pK2, LOW);<font></font>
	digitalWrite(pK3, LOW);<font></font>
	digitalWrite(pA1, LOW);<font></font>
	digitalWrite(pA2, LOW);<font></font>
	<font></font>
	// <span class="hljs-string">""</span> .<font></font>
	digitalWrite(pKR, HIGH);<font></font>
	digitalWrite(pA1, HIGH);<font></font>
	digitalWrite(pA2, HIGH);<font></font>
<font></font>
	//  . *      =)<font></font>
	nAvg ++;<font></font>
	<span class="hljs-keyword">if</span> (nAvg == SumCounterMax)<font></font>
	{<font></font>
		nAvg = <span class="hljs-number">0</span>;<font></font>
	}<font></font>
	Avg1[nAvg] = min(analogRead(<span class="hljs-number">4</span>) * InputMultiplier, <span class="hljs-number">255</span>);<font></font>
	Avg2[nAvg] = min(analogRead(<span class="hljs-number">5</span>) * InputMultiplier, <span class="hljs-number">255</span>);<font></font>
	unsigned long sn1 = <span class="hljs-number">0</span>;<font></font>
	unsigned long sn2 = <span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(byte i = <span class="hljs-number">0</span>; i &lt; SumCounterMax; i++)<font></font>
	{<font></font>
		sn1 += Avg1[i];<font></font>
		sn2 += Avg2[i];<font></font>
	}<font></font>
	int n1 = Log_Conv[sn1 / SumCounterMax];<font></font>
	int n2 = Log_Conv[sn2 / SumCounterMax];<font></font>
	<font></font>
	// - .<font></font>
	<span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; max(max(n1, n2), <span class="hljs-number">60</span>) ; i++)<font></font>
	{<font></font>
		<span class="hljs-keyword">if</span> ((i + <span class="hljs-number">0</span>) % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)<font></font>
		{<font></font>
			digitalWrite(pK1, HIGH);<font></font>
			digitalWrite(pKR, LOW);<font></font>
			digitalWrite(pK3, LOW);<font></font>
		}<font></font>
		<span class="hljs-keyword">if</span> ((i + <span class="hljs-number">2</span>) % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)<font></font>
		{<font></font>
			digitalWrite(pK2, HIGH);<font></font>
			digitalWrite(pK1, LOW);<font></font>
		}<font></font>
		<span class="hljs-keyword">if</span> ((i + <span class="hljs-number">1</span>) % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)<font></font>
		{<font></font>
			digitalWrite(pK3, HIGH);<font></font>
			digitalWrite(pK2, LOW);<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (i &gt; n1)<font></font>
		{<font></font>
			digitalWrite(pA1, LOW);<font></font>
		}<font></font>
<font></font>
		<span class="hljs-keyword">if</span> (i &gt; n2)<font></font>
		{<font></font>
			digitalWrite(pA2, LOW);<font></font>
		}<font></font>
		delayMicroseconds(<span class="hljs-number">90</span>);<font></font>
	}<font></font>
}<font></font>
<font></font>
</code></pre><br>
<br>
<br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eh bien, à la fin: </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/305/be9/db5/305be9db54b773cb17bef4330fe8f6d9.jpg" alt="image"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et, à la demande des travailleurs, vidéo:</font></font><br>
<br>
<iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://www.youtube.com/embed/XkhMKLQryJ8%3Ffeature%3Doembed&amp;usg=ALkJrhjDyja6BLN6nPeQFHKBit3cv1qW0g" frameborder="0" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS. </font><font style="vertical-align: inherit;">Cependant, il y avait des questions pour les plus expérimentés: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) - Pourquoi ai-je dû utiliser l'anode supplémentaire et la cathode supplémentaire pour stabiliser le point de référence au début de l'échelle, mais pour d'autres, il n'est pas utilisé et rien n'est cassé? </font><font style="vertical-align: inherit;">Selon le manuel, ils sont nécessaires. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) - Fréquence de mise à jour. </font><font style="vertical-align: inherit;">Dans quelle mesure est-il recommandé au-dessus / en dessous? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Je serai heureux de répondre dans les commentaires. </font><font style="vertical-align: inherit;">Remercier.</font></font></cut></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr385391/">https://habr.com/ru/post/fr385391/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr385377/index.html">Les robots ont appris à tomber en toute sécurité en étudiant les chutes de chats</a></li>
<li><a href="../fr385381/index.html">Fiction maintenant</a></li>
<li><a href="../fr385383/index.html">Как сделать подарок за 2000км или использование недокументированных возможностей интернета</a></li>
<li><a href="../fr385385/index.html">STM32F103C8T6 - les premières étapes. Continuez à faire l'oscilloscope</a></li>
<li><a href="../fr385389/index.html">Nous rappelons et observons: une sélection de montres intelligentes pas sur Android Wear</a></li>
<li><a href="../fr385393/index.html">Présentation du smartphone Archos 50c Helium</a></li>
<li><a href="../fr385395/index.html">Examen de la batterie haute capacité pour Samsung Galaxy S5</a></li>
<li><a href="../fr385399/index.html">La voie difficile vers un ordinateur silencieux</a></li>
<li><a href="../fr385401/index.html">15 technologies de «Back to the Future 2» qui nous ont été promises d'ici 2015</a></li>
<li><a href="../fr385405/index.html">Microsoft va convaincre les utilisateurs des avantages d'Edge</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>