<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯНУ ЁЯШЬ ЁЯел рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдХреИрдирд╡рд╛рд╕ рдкрд░ рдкрд┐рдХреНрд╕рд▓ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реБрдП ЁЯСА ЁЯСйЁЯП╜тАНЁЯЪТ ЁЯУи</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдпрд╣ рд▓реЗрдЦ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдФрд░ HTML рдХреИрдирд╡рд╛рд╕ рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЫрд╡рд┐ рдкреНрд░рдмрдВрдзрди рдХреЛ рдХрд╡рд░ рдХрд░реЗрдЧрд╛ред рд▓реЗрдЦ рдПрдХ рдЕрдиреБрд╡рд╛рдж рд╣реИред рдореВрд▓ phpied.com рдкрд░ред 

 рдкрд┐рдХреНрд╕реЗрд▓ рдкреНрд░рдмрдВрдзрди 
 рдПрдХ рдЫрд╡рд┐ рд╕реЗ рдбреЗ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдХреИрдирд╡рд╛рд╕ рдкрд░ рдкрд┐рдХреНрд╕рд▓ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реБрдП</h1><div class="post__text post__text-html js-mediator-article" id="post-content-body" data-io-article-url="https://habr.com/ru/post/145816/">  рдпрд╣ рд▓реЗрдЦ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдФрд░ HTML рдХреИрдирд╡рд╛рд╕ рдЯреИрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЫрд╡рд┐ рдкреНрд░рдмрдВрдзрди рдХреЛ рдХрд╡рд░ рдХрд░реЗрдЧрд╛ред  рд▓реЗрдЦ рдПрдХ рдЕрдиреБрд╡рд╛рдж рд╣реИред  <a href="http://www.phpied.com/pixel-manipulation-in-canvas/">рдореВрд▓</a> phpied.com рдкрд░ред <br><a name="habracut"></a><br><h4>  рдкрд┐рдХреНрд╕реЗрд▓ рдкреНрд░рдмрдВрдзрди </h4><br>  рдПрдХ рдЫрд╡рд┐ рд╕реЗ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рд╕рд░рд▓ рддрд░реАрдХрд╛ рдкреНрд░рддреНрдпреЗрдХ рдкрд┐рдХреНрд╕реЗрд▓ рд▓реЗрдирд╛ рд╣реИ рдФрд░ рдЗрд╕рдХреЗ рдЪреИрдирд▓реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рдХрд╛ рдореВрд▓реНрдп рдмрджрд▓рдирд╛ рд╣реИ: рд▓рд╛рд▓, рд╣рд░рд╛, рдиреАрд▓рд╛ рдФрд░ рдЕрд▓реНрдлрд╛ (рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛), рд╕рдВрдХреНрд╖рд┐рдкреНрддрддрд╛ рдХреЗ рд▓рд┐рдП рд╣рдо рдЙрдиреНрд╣реЗрдВ рдЖрд░, рдЬреА, рдмреА рдФрд░ рдП рдХрд╣реЗрдВрдЧреЗред <br>  рдЙрджрд╛рд╣рд░рдг: рдХреБрдЫ рдорд╛рди рдмрджрд▓реЗрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, B рдФрд░ G рдмрджрд▓реЗрдВ: <br>  рдпрд╣ рдЖрд░рдЬреАрдмреА (100, 50, 30, 255) рдЖрд░рдЬреАрдмреА (100, 30, 50, 255) рдмрди рдЬрд╛рдПрдЧрд╛ред <br>  рдЗрд╕ рддрд░рд╣ рдХреЗ рд╣реЗрд░рдлреЗрд░ рдХреЛ рдПрдХ рд╕рд╛рдзрд╛рд░рдг рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рджреНрд╡рд╛рд░рд╛ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЙрдкрд░реЛрдХреНрдд рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП: <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r, g, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [r, b, g, <span class="hljs-number"><span class="hljs-number">255</span></span>]; }</code> </pre> <br><br>  рдпрд╣рд╛рдВ рд╣рдо рдЕрд▓реНрдлрд╛ рдЪреИрдирд▓ рдХреЛ рдЕрдирджреЗрдЦрд╛ рдХрд░рддреЗ рд╣реИрдВ, рд╣рдореЗрдВ рдЗрд╕рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ рдФрд░ рдЗрд╕реЗ 255 рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  рдкрд░рд┐рдгрд╛рдо: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/576/ad7/874/576ad787459fb29dc1e73b8c85db9a38.jpg" alt="рдЫрд╡рд┐"><br><br>  рдореВрд▓ рд╕реЗ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd3/bb2/d72/dd3bb2d7255af465e88212ffbb1d4faf.jpg" alt="рдЫрд╡рд┐"><br><br>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдо рдЕрд▓реНрдлрд╛ рдЪреИрдирд▓ рдХреЛ рдмрджрд▓рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдФрд░ рдЫрд╡рд┐ рдХреЛ рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рдкрд╛рд░рджрд░реНрд╢реА рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рддрдм рдлрд╝рдВрдХреНрд╢рди рджрд┐рдЦреЗрдЧрд╛: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r, g, b, a, factor</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [r, g, b, factor]; }</code> </pre> <br><br>  рдпрд╣рд╛рдВ рд╣рдо рдХрд╛рд░рдХ рдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рд╣рдо рдЫрд╡рд┐ рдХреА рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВрдЧреЗред  рдЗрд╕ рдЪрд░ рдХрд╛ рдорд╛рди рдПрдХ рдЕрд▓реНрдлрд╛ рдЪреИрдирд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/136/afc/f3c/136afcf3c8353acab45dca0b8ff49045.jpg" alt="рдЫрд╡рд┐"><br><br>  рдФрд░ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рдЙрджрд╛рд╣рд░рдгред  рдпрд╣рд╛рдВ рд╣рдо рдЕрддрд┐рд░рд┐рдХреНрдд рд░реВрдк рд╕реЗ рд╕реЗрдЯ рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдХрд┐рд╕ рд╣рд┐рд╕реНрд╕реЗ рдореЗрдВ рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рд▓рд╛рдЧреВ рд╣реЛ: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r, g, b, a, factor, i</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> total = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.original.data.length; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [r, g, b, factor + <span class="hljs-number"><span class="hljs-number">255</span></span> * (total - i) / total]; }</code> </pre> <br><br>  рдпрджрд┐ рд╣рдо рдХрд╛рд░рдХ = 111 рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/51e/f9e/fea/51ef9efea146026a692c935b3d8135c0.jpg" alt="рдЫрд╡рд┐"><br>  рдпрд╣ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рдПрдХ рд╡рд╕реНрддреБ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдереЛрдбрд╝рд╛ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрд╣ рдЕрдкрдиреЗ рдЖрдк рдореЗрдВ рдХреБрдЫ рдЖрд╡рд╢реНрдпрдХ рдЬрд╛рдирдХрд╛рд░реА рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЙрдкрдпреЛрдЧреА рдорд╛рдирд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдПред <br><br><h4>  рдХреИрдирд╡рд╛рд╕ </h4><br>  рд╣рдорд╛рд░реЗ рдХреИрдирд╡рд╛рд╕ рдХреА рд╕рдВрд░рдЪрдирд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред  рдирд┐рд░реНрдорд╛рддрд╛ рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CanvasImage</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">canvas, src</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     var context = canvas.getContext('2d'); var i = new Image(); var that = this; i.onload = function(){ canvas.width = i.width; canvas.height = i.height; context.drawImage(i, 0, 0, i.width, i.height); //    that.original = that.getData(); }; i.src = src; //  this.context = context; this.image = i; }</span></span></code> </pre> <br><br>  рд╣рдо рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдкреГрд╖реНрда рдкрд░ рдХрд╣реАрдВ рд╕реНрдерд┐рдд рдХреИрдирд╡рд╛рд╕ рддрддреНрд╡ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рдЫрд╡рд┐ url рдХреЗ рд▓рд┐рдВрдХ рдХреЛ рдкрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдЫрд╡рд┐ рдЙрд╕реА рдбреЛрдореЗрди рдореЗрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рдЬрд╣рд╛рдВ рдЙрд╕рдХрд╛ рдбреЗрдЯрд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> transformador = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CanvasImage( $(<span class="hljs-string"><span class="hljs-string">'canvas'</span></span>), <span class="hljs-string"><span class="hljs-string">'/wp-content/uploads/2008/05/zlati-nathalie.jpg'</span></span> );</code> </pre> <br><br>  рдирд┐рд░реНрдорд╛рддрд╛ рдПрдХ рдирдИ рдЫрд╡рд┐ рд╡рд╕реНрддреБ рдмрдирд╛рддрд╛ рд╣реИ, рдФрд░ рд▓реЛрдб рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдЫрд╡рд┐ рдХреЛ рдХреИрдирд╡рд╛рд╕ рдкрд░ рдЦреАрдВрдЪрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдлрд┐рд░ рд╣рдо рднрд╡рд┐рд╖реНрдп рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдЪреАрдЬреЛрдВ рдХреЛ рд╕рд╣реЗрдЬрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ рдХрд┐ рд╕рдВрджрд░реНрдн, рдЫрд╡рд┐ рд╡рд╕реНрддреБ рдФрд░ рдореВрд▓ рдЫрд╡рд┐ рдбреЗрдЯрд╛ред  'рдпрд╣' рд╡рд╣реА рд╣реИ рдЬреЛ рдЙрдкрд░реНрдпреБрдХреНрдд рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдкрд┐рдХреНрд╕реЗрд▓ рдореИрдирд┐рдкреБрд▓реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред <br><br>  рдЕрдЧрд▓рд╛, рд╣рдо рдХреИрдирд╡рд╛рд╕ рд╕реЗ рдЫрд╡рд┐ рдбреЗрдЯрд╛ рдХреА рд╕реНрдерд╛рдкрдирд╛, рдкреНрд░рд╛рдкреНрддрд┐ рдФрд░ рдбрдВрдкрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП 3 рд╕рд░рд▓ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="javascript hljs">CanvasImage.prototype.getData = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.context.getImageData(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.image.width, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.image.height); }; CanvasImage.prototype.setData = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.context.putImageData(data, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); }; CanvasImage.prototype.reset = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setData(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.original); }</code> </pre> <br><br>  рд╕рднреА рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдорд╕реНрддрд┐рд╖реНрдХ рдкрд░рд┐рд╡рд░реНрддрди () рд╡рд┐рдзрд┐ рд╣реИред  рдпрд╣ рдкрд┐рдХреНрд╕рд▓ рдФрд░ рдлреИрдХреНрдЯрд░ рдХреЗ рд╕рд╛рде рдореИрдирд┐рдкреБрд▓реЗрдЯрд░ рдХреЗ рдХреЙрд▓рдмреИрдХ рдХреЙрд▓ рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИ, рдЬреЛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ рдореИрдирд┐рдкреБрд▓реЗрдЯрд░ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реЗрдЯрд┐рдВрдЧ рд╣реИред  рдлрд┐рд░ рдпрд╣ рд╕рднреА рдкрд┐рдХреНрд╕реЗрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЪрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдЖрд░рдЬреАрдмреА рдЪреИрдирд▓ рдХреЗ рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдорд╛рди рдЧреБрдЬрд░рддрд╛ рд╣реИ, рдФрд░ рд▓реМрдЯрд╛рдП рдЧрдП рдорд╛рдиреЛрдВ рдХреЛ рдирдПрдбреЗрдЯрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдЕрдВрдд рдореЗрдВ, рдХреИрдирд╡рд╛рд╕ рдкрд░ newdata рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><pre> <code class="javascript hljs">CanvasImage.prototype.transform = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">fn, factor</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> olddata = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.original; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> oldpx = olddata.data; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newdata = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.context.createImageData(olddata); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newpx = newdata.data <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> res = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> len = newpx.length; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; len; i += <span class="hljs-number"><span class="hljs-number">4</span></span>) { res = fn.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, oldpx[i], oldpx[i+<span class="hljs-number"><span class="hljs-number">1</span></span>], oldpx[i+<span class="hljs-number"><span class="hljs-number">2</span></span>], oldpx[i+<span class="hljs-number"><span class="hljs-number">3</span></span>], factor, i); newpx[i] = res[<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// r newpx[i+1] = res[1]; // g newpx[i+2] = res[2]; // b newpx[i+3] = res[3]; // a } this.setData(newdata); };</span></span></code> </pre> <br><br>  рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИ, рд╣реИ рдирд╛?  рдПрдХрдорд╛рддреНрд░ рд╢рд░реНрдордирд╛рдХ рдХреНрд╖рдг рд▓реВрдк рдореЗрдВ рд╡реГрджреНрдзрд┐ i + = 4 рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдбреЗрдЯрд╛ getImageData () рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдкреНрд░рддреНрдпреЗрдХ рдкрд┐рдХреНрд╕реЗрд▓ рдХреЗ рд▓рд┐рдП 4 рддрддреНрд╡реЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд░рдгреА рдХреЗ рд░реВрдк рдореЗрдВ рдбреЗрдЯрд╛ред <br><br>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рдПрдХ рдЫрд╡рд┐ рдореЗрдВ рдХреЗрд╡рд▓ 2 рдкрд┐рдХреНрд╕реЗрд▓ рд╣реИрдВ: рд▓рд╛рд▓ рдФрд░ рдиреАрд▓рд╛, рдФрд░ рдХреЛрдИ рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рдирд╣реАрдВред  рддрдм рдЗрд╕ рдЫрд╡рд┐ рдХрд╛ рдбреЗрдЯрд╛ рдРрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><pre> <code class="javascript hljs">[ <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span> ]</code> </pre> <br><br><h4>  рдХреЙрд▓рдмреИрдХ </h4><br>  рдирд┐рдореНрди рдХреЛрдб рдХреЗрд╡рд▓ рдХреЙрд▓рдмреИрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рдХрд▓реНрдк рджрд┐рдЦрд╛рддрд╛ рд╣реИ, рдФрд░ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдпреВрдЖрдИ рдмрдирд╛рддрд╛ рд╣реИред  рдЙрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: <br><br><h5>  рдЧреНрд░реЗрд╕реНрдХреЗрд▓ </h5><br>  рдЧреНрд░реЗрд╕реНрдХреЗрд▓ рд▓рд╛рд▓, рдиреАрд▓реЗ, рд╣рд░реЗ рд░рдВрдЧ рдХреА рдПрдХ рд╕рдорд╛рди рдорд╛рддреНрд░рд╛ рд╣реИред  рдЗрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ рдФрд╕рдд рдореВрд▓реНрдп рдХреА рдЧрдгрдирд╛ рдХрд░рдирд╛ рд╣реИ: <br>  var agv = (r + g + b) / 3; <br>  рдпрд╣ рдХрд╛рдлреА рдкрд░реНрдпрд╛рдкреНрдд рд╣реИред  рд▓реЗрдХрд┐рди рд▓реЛрдЧреЛрдВ рдХреЗ рд╕рд╛рде рдлрд╝реЛрдЯреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдЧреБрдкреНрдд рд╕реВрддреНрд░ рд╣реИ, рдпрд╣ рдЪреИрдирд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ рд╕рдВрд╡реЗрджрдирд╢реАрд▓рддрд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r, g, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> avg = <span class="hljs-number"><span class="hljs-number">0.3</span></span> * r + <span class="hljs-number"><span class="hljs-number">0.59</span></span> * g + <span class="hljs-number"><span class="hljs-number">0.11</span></span> * b; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [avg, avg, avg, <span class="hljs-number"><span class="hljs-number">255</span></span>]; }</code> </pre> <br><br><img src="http://www.phpied.com/files/canvas/grey.jpg" alt="рдЫрд╡рд┐"><br><br><h5>  рдПрдХ рдкреНрд░рдХрд╛рд░ рдХреА рдордЫрд▓реА </h5><br>  рд╕рдмрд╕реЗ рд╕рд░рд▓ рд╡рд┐рдХрд▓реНрдк: рдПрдХ рдЧреНрд░реЗ рд╕рдВрд╕реНрдХрд░рдг рдмрдирд╛рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдореЗрдВ рдереЛрдбрд╝рд╛ рд░рдВрдЧ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ - рдкреНрд░рддреНрдпреЗрдХ рдкрд┐рдХреНрд╕реЗрд▓ рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди рдорд╛рддреНрд░рд╛ рдореЗрдВ рдЖрд░рдЬреАрдмреАред  рдореИрдВрдиреЗ 100 рд▓рд╛рд▓, 50 рд╣рд░реЗ рдЬреЛрдбрд╝реЗ, рд▓реЗрдХрд┐рди рдЖрдк рдЕрдиреНрдп рдореВрд▓реНрдпреЛрдВ рдХреЛ рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВред <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r, g, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> avg = <span class="hljs-number"><span class="hljs-number">0.3</span></span> * r + <span class="hljs-number"><span class="hljs-number">0.59</span></span> * g + <span class="hljs-number"><span class="hljs-number">0.11</span></span> * b; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [avg + <span class="hljs-number"><span class="hljs-number">100</span></span>, avg + <span class="hljs-number"><span class="hljs-number">50</span></span>, avg, <span class="hljs-number"><span class="hljs-number">255</span></span>]; }</code> </pre> <br><br><img src="http://www.phpied.com/files/canvas/sepia.jpg" alt="рдЫрд╡рд┐"><br><br>  рдпрд╣рд╛рдБ рдПрдХ рдФрд░ рд╡рд┐рдХрд▓реНрдк рд╣реИ рдЬреЛ рд╢рд╛рдпрдж рдмреЗрд╣рддрд░ рд╣реИ, рд▓реЗрдХрд┐рди рдореБрдЭреЗ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдкрд╕рдВрдж рдирд╣реАрдВ рд╣реИ: <br><br><img src="http://www.phpied.com/files/canvas/sepia2.jpg" alt="рдЫрд╡рд┐"><br><br><h5>  рдирдХрд╛рд░рд╛рддреНрдордХ </h5><br>  рдирдХрд╛рд░рд╛рддреНрдордХ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреНрдпреЗрдХ рдЪреИрдирд▓ рдХрд╛ рдорд╛рди 255 рд╕реЗ рдШрдЯрд╛рдПрдВ <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r, g, b</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-number"><span class="hljs-number">255</span></span> - r, <span class="hljs-number"><span class="hljs-number">255</span></span> - g, <span class="hljs-number"><span class="hljs-number">255</span></span> - b, <span class="hljs-number"><span class="hljs-number">255</span></span>]; }</code> </pre> <br><br><img src="http://www.phpied.com/files/canvas/invert.jpg" alt="рдЫрд╡рд┐"><br><br><h5>  рд╢реЛрд░ </h5><br>  рд╢реЛрд░ рдЬреЛрдбрд╝реЗрдВред  рдпрд╣ рд╕рд┐рд░реНрдл рдордиреЛрд░рдВрдЬрди рд╣реИ, рд╣рдо-рдлреИрдХреНрдЯрд░ рдФрд░ рдХрд╛рд░рдХ рдХреЗ рдмреАрдЪ рдПрдХ рдпрд╛рджреГрдЪреНрдЫрд┐рдХ рдореВрд▓реНрдп рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдЪреИрдирд▓ рдореЗрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ: <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r, g, b, a, factor</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rand = (<span class="hljs-number"><span class="hljs-number">0.5</span></span> - <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()) * factor; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [r + rand, g + rand, b + rand, <span class="hljs-number"><span class="hljs-number">255</span></span>]; }</code> </pre> <br><img src="http://www.phpied.com/files/canvas/noise55.jpg" alt="рдЫрд╡рд┐"><br><br><h4>  рдЖрдкрдХреА рдЪрд╛рд▓ </h4><br>  рдЙрджрд╛рд╣рд░рдг рд╕реНрд╡рдпрдВ <a href="http://www.phpied.com/files/canvas/pixels.html">рд╕рдВрджрд░реНрдн</a> рджреНрд╡рд╛рд░рд╛ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕реНрд░реЛрдд рдХреЛрдб рдФрд░ рдХрд▓реНрдкрдирд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╣реЗрд░рдлреЗрд░ рдХреЗ рдХреБрдЫ рдЕрдкрдиреЗ рджрдо рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред <br>  рдПрдХ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЗ рд░реВрдк рдореЗрдВ, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд▓реЗрдВ: <br><br><pre> <code class="javascript hljs">transformador.transform(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r, g, b, a, factor, i</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   ... return [r, g, b, a]; });</span></span></code> </pre> <br><br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЫрд╡рд┐ рдХреЛ рдХрд╛рд▓рд╛ рдФрд░ рд╕рдлрд╝реЗрдж рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реЗрдВ (рдЧреНрд░реЗ рд░рдВрдЧ рдирд╣реАрдВ, рд▓реЗрдХрд┐рди рдХрд╛рд▓реЗ рдФрд░ рд╕рдлреЗрдж, рдЬрд╣рд╛рдБ рдкреНрд░рддреНрдпреЗрдХ рдкрд┐рдХреНрд╕реЗрд▓ 0,0,0 рдпрд╛ 255,255,255 рд╣реИ)ред <br><br>  рдпрд╛ рдЖрдк рдХреЗ рдХреБрдЫ рджрд┐рд▓рдЪрд╕реНрдк рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕рд╛рде рдЖрддреЗ рд╣реИрдВред </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/In145816/">https://habr.com/ru/post/In145816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../In145811/index.html">360 рдкрд┐рд╡рдЯ рдпрд╛ рд╣рдордиреЗ рдХреМрди рд╕реЗ рд╕рдорд╛рдзрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред рднрд╛рдЧ 1</a></li>
<li><a href="../In145812/index.html">QML рдФрд░ QtQuick рд╡реЗрдмрд┐рдирд╛рд░: рдкреЗрдЬрд┐рдВрдЧ рдпреВрдЖрдИ</a></li>
<li><a href="../In145813/index.html">рдЬреЗрдВрдЯреА рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рд▓реИрдВрдЧреНрд╡реЗрдЬ</a></li>
<li><a href="../In145814/index.html">рд▓рд┐рдВрдЧреНрд╡реЗрд▓реЛ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдХрд╛ рдЕрдореЗрд░рд┐рдХреА рд╕рдкрдирд╛ рд╕рдЪ рд╣реЛ рдЧрдпрд╛! рд░реВрдирд╛ рдХреИрдкрд┐рдЯрд▓ рдиреЗ рд╡рд┐рджреЗрд╢реА рднрд╛рд╖рд╛рдУрдВ рдХреЛ рд╕реАрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реЗрд╡рд╛ рдореЗрдВ $ 3,000,000 рдХрд╛ рдирд┐рд╡реЗрд╢ рдХрд┐рдпрд╛ рд╣реИ!</a></li>
<li><a href="../In145815/index.html">Microsoft рдПрдХ рдмрд┐рд▓рд┐рдпрди рдбреЙрд▓рд░ рдореЗрдВ рдпрдорд░реЛрдВ рдХреА рдЦрд░реАрдж рдХреЗ рд▓рд┐рдП рдмрд╛рддрдЪреАрдд рдХрд░ рд░рд╣рд╛ рд╣реИ</a></li>
<li><a href="../In145817/index.html">TextMate рдореЗрдВ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдлреЛрд▓реНрдбрд┐рдВрдЧ</a></li>
<li><a href="../In145818/index.html">YouTube рдХрд╛ рдирдпрд╛ рдбрд┐рдЬрд╝рд╛рдЗрди рдХреИрд╕реЗ рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЬрд╛рдП</a></li>
<li><a href="../In145820/index.html">рдШрд░ рдореЗрдВ рд░реЗрдирдмреЛ рдЯреЗрдмрд▓</a></li>
<li><a href="../In145823/index.html">IE7 рдСрдирд▓рд╛рдЗрди рд╕реНрдЯреЛрд░ рдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЖрдпреЛрдЧ рдХреА рд╢реБрд░реБрдЖрдд рдХреА</a></li>
<li><a href="../In145825/index.html">Yandex рдХреЗ рд╕рд╛рде рдЕрдкрдиреА рд╕рд╛рдЗрдЯ рдкрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкрд╛рд╕рд╡рд░реНрдб рд╕реБрд░рдХреНрд╖рд┐рдд рд░рдЦреЗрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>