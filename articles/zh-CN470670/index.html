<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💟 😿 👩‍👩‍👦 如何创建智能电动自行车 🌾 💨 🎅🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="在哈布雷（Habré）上经常写有关电力运输的文章。 关于自行车。 还有关于AI的知识。 Cloud4Y决定结合这三个主题，讨论始终在线的“智能”电动自行车。 这将与Greyp G6模型有关。 

 为了使其更有趣，我们将文章分为两部分。 第一个致力于创建设备，平台和通信协议的过程。 第二个是技术规格...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何创建智能电动自行车</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/cloud4y/blog/470670/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/vi/wq/b5/viwqb5acudpgwwum-rhdmpb7jva.jpeg"></div><br>  <i>在哈布雷（Habré）上经常写有关电力运输的文章。</i>  <i>关于自行车。</i>  <i>还有关于AI的知识。</i>  <i>Cloud4Y决定结合这三个主题，讨论始终在线的“智能”电动自行车。</i>  <i>这将与Greyp G6模型有关。</i> <i><br><br></i>  <i>为了使其更有趣，我们将文章分为两部分。</i>  <i>第一个致力于创建设备，平台和通信协议的过程。</i>  <i>第二个是技术规格，说明了自行车的填充和功能。</i> <a name="habracut"></a><br><br><h2> 第一部分，后端 </h2><br>  Greyp Bikes是克罗地亚的一家高级电动自行车制造商，由当地的异国超级跑车制造商Rimac拥有。 该公司创造了真正有趣的自行车。 只有以前的型号，两悬架G12S。 这是介于电动自行车和电动摩托车之间的设备，因为该设备可以加速至70 km / h，具有强劲的电机，一次充电即可行驶120 km。 <br><br>  G6看上去更加优雅和越野，但是它的主要特征是“连通性”。  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Greyp Bikes</a>向物联网的发展迈出了重要的一步，提供了始终“在线”的自行车。 但是，让我们先谈谈如何创建“智能”电动自行车。 <br><br>  <b>一个想法的诞生</b> <br><br> 大量不同的设备连接到Internet。 为什么自行车更糟？ 因此在Greyp Bikes中出现了一个想法，后来变成了G6。 在任何给定时间，这辆自行车都会保持与<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">云服务器</a>的连接。 移动运营商提供通信，eSIM直接缝在自行车上。 这为运动员和普通自行车爱好者都带来了许多有趣的机会。 <br><br>  <b>平台平台</b> <br><br> 在为创新产品创建平台时，您需要考虑许多细微差别。 因此，选择用于托管和启动现代电动自行车所需的所有服务的云平台是一个非常重要的问题。 该公司选择了Amazon Web Services（AWS）。 部分原因是因为Greyp Bikes已经具有服务经验。 部分是由于其受欢迎程度，在全球开发人员中的广泛分布以及对Java / JVM的良好态度（是的，它们在Greyp Bikes中得到了积极使用）。 <br><br>  AWS拥​​有出色的IoT MQTT代理（ <i>Cloud4Y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">之前</a>曾写过有关协议<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的文章</a></i> ），非常适合轻松地与自行车交换数据。 没错，有必要以某种方式与智能手机的应用程序建立连接。 曾尝试使用Websockets自行实现此功能，但后来公司决定不重新发明轮子，而是改用Google Firebase平台，该平台已被移动开发人员广泛使用。 自开发之初，系统体系结构就进行了许多改进和更改。 现在看起来像这样： <br><br><img src="https://habrastorage.org/webt/4m/ry/8u/4mry8uxmij5-zc2n3o2x0mfqmzc.png"><br>  <i>技术栈</i> <br><br>  <b>实作</b> <br><br> 该公司提供了两种进入系统的方式。 它们中的每一个都是单独实现的，其用例采用了各种技术。 <br><br>  <b>从自行车到智能手机</b> <br><br> 在系统中创建入口点时，首先要考虑的是使用哪种通信协议。 如前所述，该公司之所以选择MQTT，是因为其轻巧的“特性”。 该协议在带宽方面很好，可以在可能不可靠的连接上很好地工作，并且可以节省电池电量，这对于Greyp的电动自行车尤为重要。 <br><br> 需要使用所使用的MQTT代理来下载来自自行车的所有数据。  Lambda在AWS网络内部，该Lambda读取MQTT代理提供的二进制数据，对其进行分析并将其传递给Apache Kafka进行进一步处理。 <br><br>  Apache Kafka是系统的基础。 所有数据都必须经过它才能到达最终目的地。 当前，系统的内核具有多个代理。 其中最重要的是收集数据并将其传输到InfluxDB“冷存储”的数据。 另一个将数据传输到Firebase Realtime数据库，使其可用于智能手机应用程序。 这是真正需要Apache Kafka的地方-冷藏库（InfluxDB）存储从自行车接收的所有数据，Firebase可以接收相关信息（例如实时指标-当前速度）。 <br><br>  Kafka允许您以不同的速度接收消息，并将它们几乎立即传递到Firebase（以在智能手机上的应用程序中显示），并最终将它们传输到InfluxDB（以进行数据分析，统计和监视）。 <br><br> 使用Kafka还可让您在增加负载的情况下使用水平缩放，以及连接可以按自己的步调和自己的用例（例如，在一组自行车之间竞争时）处理传入数据的其他代理。 即，该解决方案允许骑自行车者彼此竞争各种特征。 例如，最大速度，最大跳跃，最大性能等。 <br><br> 所有服务（称为“ GVC”-Greyp Vehicle Cloud）主要基于Spring Boot和Java实现，尽管也使用其他语言。 每个程序集都打包在ECR存储库中托管的Docker映像中，并由Amazon ECS启动和托管。 尽管NoSQL在许多情况下非常方便且流行，但是Firebase不能始终满足Greyp的所有需求，因此该公司还使用MySQL（在RDS中）进行特殊查询（Firebase使用JSON树，在某些情况下效率更高）和特定数据的存储。 使用的另一个存储工具是Amazon S3，它可以确保收集数据的安全性。 <br><br>  <b>从智能手机到自行车</b> <br><br> 正如我们已经说过的，与智能手机的通信是通过Firebase建立的。 该平台用于实时验证应用程序用户及其数据库部分。 实际上，Firebase是两件事的结合：一是用于永久存储数据的数据库，另一是用于通过与Websocket的连接向智能手机传输实时数据。 这种连接的理想选择是在设备彼此不靠近时（没有BT / Wi-Fi连接）向自行车发出命令。 <br><br> 在这种情况下，Greyp开发了自己的命令处理机制，该机制通过数据库以实时模式从智能手机接收消息。 该机制是基本应用程序服务（GVC）的一部分，其基本任务是将智能手机命令转换为通过IoT代理传输到自行车的MQTT消息。 自行车收到命令后，将对其进行处理，执行相应的操作，然后将响应返回给Firebase（智能手机）。 <br><br>  <b>监控方式</b> <br><br><img src="https://habrastorage.org/webt/rl/cw/cs/rlcwcsn-yj2vez3k1aa8x8zyfls.png"><br>  <i>参数控制</i> <br><br> 几乎每个后端开发人员都喜欢在晚上睡觉，而不是每隔10分钟检查一次服务器。 这意味着您需要在系统中实施自动监视和警报解决方案。 该规则也适用于Greyp自行车生态系统。 也有正常夜间睡眠的鉴赏家，因此该公司使用两种云解决方案：Amazon CloudWatch和jmxtrans。 <br><br>  CloudWatch是一项监视和监视服务，它以日志，指标和事件的形式收集监视和操作数据，有助于获得在AWS平台以及本地环境中运行的AWS应用程序，服务和资源的单一视图。 借助CloudWatch，您可以方便地检测环境中的异常行为，设置警报，创建日志和指标的常规可视表示形式，执行自动操作，对问题进行故障排除以及了解有助于保持应用程序平稳运行的有用信息。 <br><br>  CloudWatch收集自定义指标并将其传递到仪表板。 在那里，它们与来自其他Amazon管理资源的数据结合在一起。  JVM使用称为jmxtrans的“连接器”（也位于ECS内部的Docker容器）通过JMX端点接收指标。 <br><br><h2> 第二部分，特征 </h2><br><img src="https://habrastorage.org/webt/vn/eb/ts/vnebtsm6o1c7_10tmh8l3wjorvk.jpeg"><br><br> 那么电动自行车的结果是什么呢？  Greyp G6电动山地车配备了由LG电池供电的36V，700 Wh锂离子电池。  Greyp并没有像许多电动自行车制造商那样隐藏电池，而是在车架中央安装了可移动电池。  G6配备了额定功率为250瓦的MPF发动机（还有一个功率为450瓦的选件）。 <br><br>  Greyp G6是一款配备了Rockhox后悬架的山地车，藏在上管附近，在驾驶员的膝盖之间留有足够的空间容纳可拆卸的电池。 车架采用“ enduro”风格制成，由于悬架，可提供150 mm的行程。 框架内缺少电缆和制动线。 因此，确保了美观，并且减少了卡在树枝上的风险。 <br><br>  100％碳纤维框架是Greyp专门开发的，借鉴了Concept One电动超级跑车的创建过程中获得的经验。 <br><br>  Greyp G6上的电子套件由库存上的中央智能模块（CIM）控制。 它包括一个彩色显示屏，WiFi，蓝牙，4G连接，一个陀螺仪，一个USB C连接器，一个前置摄像头以及一个位于鞍座下方的后置摄像头接口。 顺便说一下，后置摄像头<a href="">被4个LED包围</a> 。 广角摄像头（1080p 30 fps）主要用于旅行时拍摄视频。 <br><br><div class="spoiler">  <b class="spoiler_title">照片实例</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/gv/uj/-a/gvuj-atwmrvkqpvafqsyi0vjksg.jpeg"><br><br><img src="https://habrastorage.org/webt/ek/dk/xm/ekdkxm3a3_2kom1bhpoqjxen0mo.jpeg"><br><br><img src="https://habrastorage.org/webt/8x/if/wa/8xifwahsarm9ygozdcayctvhmtm.jpeg"><br></div></div><br> 该公司特别关注eSTEM解决方案。 <br><br><blockquote>  “ Greyp eSTEM是自行车的中央智能模块，它控制两个摄像头（前后），控制驾驶员的心律，具有内置的陀螺仪，导航系统和eSIM，可让您随时连接它。 电动自行车系统使用智能手机作为用户界面，移动应用程序通过各种新选项创建了独特的用户界面，例如远程自行车开关，拍照，向自行车发送文本和功率限制。” </blockquote><br> 自行车车把上有一个特殊的“共享”按钮。 如果在旅途中发生有趣或令人兴奋的事情，您可以点击该按钮，然后将视频上传到骑车人的社交网络帐户中，以自动保存视频的最后15-30秒。 此外，其他数据可能会叠加在视频上。 例如，自行车的能耗，速度，骑行时间等。 <br><br> 通过将手机以仪表板模式安装在自行车上，Greyp G6可以提供大量信息，而不仅仅是显示当前速度或电池电量。 因此，骑自行车的人可以在地图上选择任何一点（例如，高高的山丘），然后计算机将计算出是否有足够的电池电量到达顶部。 否则，它将突然计算出不归路的地点，如果您不想在返回的路上踩踏板。 尽管踏板很可能会扭曲。 制造商声称这辆自行车并不重（尽管这是它的外观，但重量为25公斤）。 <br><br><img src="https://habrastorage.org/webt/wb/ym/xt/wbymxtgmvoknnaxf1kltrgqfgqq.jpeg"><br>  <i>Greyp G6很有可能提高</i> <br><br>  Greyp G6的防盗系统类似于特斯拉的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Sentry Mode</a> 。 也就是说，如果您触摸停放的自行车，他会通知车主有关信息，并让他使用摄像机，以查明谁在绕着电动自行车旋转。 然后，驾驶员可以选择远程断开自行车连接，以防止攻击者离开。 而且，鉴于这些系统已经在Greyp开发了很多年，因此很有可能在特斯拉（Tesla）引入该系统之前就提出了这个系统。 <br><br> 出售的该系列有几种型号：G6.1，G6.2，G6.3。  G6.1加速至25 km / h（15.5 mph）的价格为6,499欧元。  G6.3的最高时速为45 km / h（28 mph），售价为7,499欧元。  G6.2型号之间的区别尚不清楚，但售价为6,999欧元。 <br><br>  <b>在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Cloud4Y</a>博客上阅读还有什么有用的</b> <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">人工智能从一个奇妙的想法到科学产业的道路</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">4种方式在云中保存备份</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">在GNU / Linux中配置top</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">夏天快结束了。</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">几乎没有数据泄漏</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">物联网，雾霾和云：谈论技术？</a> <br><br> 订阅我们的<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">电报</a>频道，以免错过其他文章！ 我们每周写不超过两次，并且只在商务上写。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN470670/">https://habr.com/ru/post/zh-CN470670/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN470658/index.html">3.典型的Check Point Maestro部署方案</a></li>
<li><a href="../zh-CN470660/index.html">面试时应显示什么代码</a></li>
<li><a href="../zh-CN470662/index.html">佳能imagePRESS C910：强大的功能现在可以做得更多</a></li>
<li><a href="../zh-CN470664/index.html">英特尔推出了新的Xeon处理器系列。 它们比早期的型号便宜，但仍为14 nm</a></li>
<li><a href="../zh-CN470666/index.html">IT-Hogwarts：程序员学院hh.ru</a></li>
<li><a href="../zh-CN470672/index.html">服务台和CRM的实施。 13个主要的失败原因以及如何避免它们？</a></li>
<li><a href="../zh-CN470674/index.html">在JeMalloc内部。 核心数据结构：配对堆和位图树</a></li>
<li><a href="../zh-CN470676/index.html">解决算法问题：预订酒店的可能性</a></li>
<li><a href="../zh-CN470680/index.html">最佳游戏本地化语言</a></li>
<li><a href="../zh-CN470684/index.html">没有工作经验的简历写什么</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>