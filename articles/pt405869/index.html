<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏼 👩🏽‍🤝‍👩🏻 👴🏾 Smart Lock Dooris 🤚🏾 ➡️ 🚶🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dois anos atrás, depois de concluir grandes reparos no meu apartamento, decidi instalar uma fechadura inteligente na nova porta da frente. Logo ficou ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Smart Lock Dooris</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/405869/"><img src="https://habrastorage.org/web/ddd/57d/7e3/ddd57d7e3fa747bfa281cb59a767895e.jpg"><br>  Dois anos atrás, depois de concluir grandes reparos no meu apartamento, decidi instalar uma fechadura inteligente na nova porta da frente.  Logo ficou claro que nenhum dos modelos disponíveis naquele momento se encaixava na minha porta de metal completamente comum.  Tendo discutido essa "descoberta" com um de meus camaradas, decidimos corrigir essa falha fatal e - como deveria ser nesses casos - fizemos outra trava inteligente. <a name="habracut"></a><br><br>  Antes de passar para a história de nossa criação, não será impróprio explicar o que é tão incomum nas portas russas, mas ao mesmo tempo chamar sua atenção para outros pontos que você precisa conhecer ao escolher uma fechadura inteligente.  E começaremos respondendo à pergunta principal. <br><br><h2>  Para que serve um bloqueio inteligente? </h2><br>  Parece que a resposta a esta pergunta é óbvia: livrar-se das chaves.  Pelo menos, foi o que pareceu para nós quando começamos a desenvolver nosso dispositivo.  Mas os primeiros testes mostraram que, se você simplesmente substituir as chaves por um smartphone, haverá poucos benefícios: estar ao lado da porta, é muito mais fácil desbloqueá-lo ou trancá-lo com uma chave do que tocar no botão em um aplicativo móvel que ainda precisa ser iniciado após o desbloqueio do smartphone.  Obviamente, a capacidade de controlar remotamente a porta por si só pode ser muito útil (por exemplo, destrancar a porta da sua amada sogra sem se levantar do sofá), mas provavelmente você não poderá usá-la. <br><br>  Para se tornar um dispositivo verdadeiramente útil, uma trava inteligente deve poupar a maioria das manipulações manuais diárias das portas.  Ou seja, uma "fechadura inteligente" realmente inteligente deve - como um porteiro em um hotel decente - trancar a porta atrás de você quando você sair de casa e trancá-la quando voltar. <br><br><h2>  Chave inteligente </h2><br>  Apesar do nome, um bloqueio inteligente típico não é um bloqueio.  Muitas vezes, isso é apenas uma “guarnição”, instalada na parte interna da porta sobre a plataforma giratória ou a chave de uma fechadura convencional.  Essa sobreposição não contém um mecanismo de travamento, mas só pode girar uma chave ou um cata-vento em uma fechadura de porta convencional.  Obviamente, existem modelos com fechaduras completas (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Samsung SHP-DP728</a> ), mas como as dimensões da parte embutida das fechaduras das portas não são padronizadas, é improvável que você <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">consiga</a> substituir a fechadura da porta habitual por uma inteligente - os buracos simplesmente não combinam.  Mas o inteligente "interruptor de chave" pode teoricamente ser instalado em quase qualquer porta, embora na realidade tudo seja um pouco mais complicado. <br><br><h2>  Parafuso morto americano </h2><br>  Se você mora na Rússia, provavelmente, duas fechaduras são instaladas na porta da frente - fechaduras de cilindro e alavanca - cada uma delas é trancada / destrancada quando a chave é girada duas ou até três voltas.  E a maioria das fechaduras inteligentes é compatível apenas com as fechaduras do tipo Deadbolt.  Deadbolt é um pedaço que destrava e trava com uma chave do lado de fora e um cata-vento por dentro.  Essa trava é totalmente estendida / retraída quando o prato giratório gira 90–180 °. <br><br>  Bloqueios como o Deadbolt são comuns nos Estados Unidos, cujo mercado, provavelmente, é direcionado principalmente pelos criadores de dispositivos inteligentes.  Como resultado, muitos "comutadores de chave" (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Sesame</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Lockitron</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">agosto</a> ) simplesmente não conseguem girar a chave ou o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">botão</a> giratório mais de uma vez, ou estão tão profundamente integrados aos mecanismos do Deadbolt (como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Schlage Sense</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Kevo</a> ) que não podem mais ser chame de "sobreposições" e é quase impossível usar com outros tipos de fechaduras. <br><br><h2>  Gerenciamento via BLE e Internet </h2><br>  Como regra, fechaduras inteligentes são controladas via Bluetooth Low Energy (BLE) usando um aplicativo móvel.  Também são encontrados dispositivos que suportam WiFi, ZigBee e Z-Wave (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">RemoteLock</a> e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Yale</a> ), mas o BLE ainda é o líder por uma ampla margem.  Há uma explicação muito simples para isso: a maioria dos smartphones modernos não tem suporte embutido no ZigBee nem no Z-Wave, e eles não usam WiFi com uso intenso de energia, porque os bloqueios inteligentes são alimentados principalmente por baterias. <br><br>  Muitos fabricantes de bloqueios inteligentes permitem controlar seus dispositivos não apenas através do BLE, mas também através da Internet.  Isso geralmente requer a compra de uma "ponte" especial, que é conectada simultaneamente ao smart lock (via BLE) e à sua rede doméstica (geralmente via WiFi).  Um exemplo dessa “ponte” é a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Ponte Nuki</a> , que “Internetiza” a fechadura inteligente da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">Nuki</a> (a propósito, esse é um dos poucos “interruptores de chave” que podem ser instalados na maioria de nossas portas sem problemas). <br><br><h2>  Baterias de longa duração </h2><br>  Como já dissemos, todas as fechaduras inteligentes que conhecemos são alimentadas por baterias.  Existem duas razões para isso.  A primeira é a facilidade de instalação: não é necessário pensar em como colocar o cabo para alimentar a trava inteligente.  A segunda é a durabilidade das baterias: como regra, elas precisam ser trocadas apenas uma ou duas vezes por ano; além disso, qualquer trava inteligente decente avisa seu proprietário sobre a necessidade de substituir as baterias com antecedência.  No entanto, muitos ainda temem que não precisem abrir a porta com um "triturador" em caso de algo.  E é preciso admitir: eles temem por um bom motivo. <br><br><h2>  Contingências </h2><br>  Independentemente de seu bloqueio inteligente ser alimentado por baterias ou de uma rede com uma fonte de energia de backup, você pode se encontrar em uma situação em que, estando do lado de fora de uma porta trancada, não é possível abri-lo com um smartphone, por exemplo, porque a bateria está descarregada, ou porque o bloqueio está fora de ordem ou, finalmente, simplesmente porque você perdeu seu smartphone. <br><br>  Para evitar uma substituição não planejada da porta, é recomendável instalar apenas uma trava inteligente, para que seja possível destrancar a porta com uma chave em qualquer situação de emergência.  A chave em si nem sempre deve estar com você, mas, com a perda da chave para um bloqueio normal, a chave reserva deve estar em algum lugar próximo (com vizinhos ou parentes ou amigos que moram nas proximidades).  Pelas mesmas razões, uma trava inteligente projetada para uma trava do tipo Deadbolt não é categoricamente recomendada para instalação em uma trava de balanço noturno que não pode ser aberta com uma chave do lado de fora. <br><br><h2>  Minha casa é meu castelo </h2><br>  As fechaduras inteligentes não são instaladas para aumentar a resistência contra roubo da porta (existe, para isso, uma classe separada de dispositivos - fechaduras eletrônicas embutidas, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">titânio</a> ), mas para tornar a casa mais confortável.  Você precisa sacrificar a segurança por conforto: qualquer trava inteligente controlada pelo ar é sempre outro vetor de ataque em potencial que um invasor pode tentar usar para abrir a porta.  Se ele consegue ou não, depende de quão bem os criadores do castelo cuidaram disso.  Obviamente, todos os bloqueios inteligentes usam autenticação e autorização e criptografam todo o tráfego transmitido, mas, como mostra a prática, ainda são <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">encontradas</a> vulnerabilidades em dispositivos inteligentes de tempos em tempos. <br><br>  Também devemos falar sobre a segurança do próprio BLE, que, como lembramos, é a maneira mais comum de gerenciar bloqueios inteligentes.  Infelizmente, todos os modos de segurança "adequados" oferecidos pelo padrão BLE até a versão 4.1 inclusive <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" rel="nofollow">têm vulnerabilidades</a> .  Portanto, muitos fabricantes de dispositivos inteligentes implementam os protocolos e algoritmos necessários para proteger as conexões sem fio por conta própria. <br><br>  Outros fabricantes estão limitados a oferecer suporte ao BLE Secure Connections - Comparação Numérica.  Este é um novo modo de segurança padrão no qual todos os dados são criptografados com o algoritmo AES-128 e a chave de criptografia é gerada usando o algoritmo ECDH, verificado por um canal independente (as conversas secretas no Telegram messenger são protegidas da mesma forma).  Este modo apareceu no BLE 4.2 e, no momento, não há vulnerabilidades encontradas nele. <br><br><h2>  Smart Lock Dooris </h2><br>  Agora que você sabe quase tudo sobre fechaduras inteligentes, é hora de apresentar nossa criação a você - a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fechadura inteligente</a> da <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Dooris</a> .  Doris é um interruptor de chave típico para uma fechadura de cilindro.  Utilizando um grampo de parafuso especial, ele é fixado diretamente no cilindro de trava e, se necessário, é removido sem deixar vestígios.  As portas podem girar a chave ou a mesa giratória quantas rotações forem necessárias para destrancar e trancar a porta.  O bloqueio inteligente é alimentado por duas baterias CR123A.  Serão suficientes por cerca de um ano, se, em média, você sair de casa 3 vezes por dia (e, consequentemente, retornar o mesmo número de vezes).  O bloqueio é controlado através do BLE 4.2 no modo Conexões seguras - Comparação numérica usando um aplicativo móvel para iOS ou Android. <br><br>  O cérebro de Dooris é o SoC nRF52832, ao qual vários sensores estão conectados: sensores magnéticos permitem determinar a posição da plataforma giratória com precisão de 90 °, um acelerômetro - o fato de abrir e fechar a porta e sensores de corrente e tensão - para controlar o consumo do motor e a descarga da bateria. <br><br>  Existem dois motores em nossa fechadura: um destranca e trava a porta, e o segundo engata e desengata as engrenagens da caixa de câmbio do primeiro.  Isso é necessário para que a qualquer momento você possa usar a chave ou o cata-vento sem nenhum desconforto, ou seja, sem ter que superar a resistência da caixa de velocidades.  Todas as engrenagens são feitas de metal e a caixa é feita de plástico ABS.  Para evitar o atrito dos nós de plástico, um rolamento é fornecido na trava. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/CKOaixTRIYw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Ao gravar o vídeo, controlamos o Dooris manualmente, mas como foi dito no início, é melhor usar o "modo de porteiro", no qual a trava inteligente trava / destranca a porta.  Agora, mostraremos como esse modo funciona. <br><br>  Ao sair de casa, você abre a porta com uma plataforma giratória.  Assim que você sair e bater a porta, Dooris descobrirá isso com a ajuda de um acelerômetro e trancará a porta alguns segundos depois de bater.  O atraso é necessário para que você tenha a oportunidade de garantir que o smartphone esteja com você. <br><br>  Se, saindo de casa, você estiver a mais de 30 metros da porta (determinado pelo monitoramento de cercas geográficas), ao retornar, o aplicativo móvel abrirá a porta assim que receber um sinal do iBeacon de uma trava inteligente.  Isso acontecerá a cerca de 10 metros da porta e, quando você se aproxima, basta abrir.  Assim que você entrar e bater a porta, ela será trancada automaticamente (o mesmo que quando sai de casa). <br><br>  Devo admitir que, na realidade, o "modo de porteiro" nem sempre funciona tão bem.  Por exemplo, devido às peculiaridades da operação do scanner iBeacon em smartphones, pode acontecer que, quando você vá para a porta, ainda precise esperar um pouco antes de seu smartphone "ouvir" o sinal do iBeacon e aquecer a porta.  As portas também podem bloquear por engano uma porta enquanto ela estiver aberta, se você abrir a porta de uma certa maneira enquanto estiver batendo nela. <br><br>  Tentamos levar em conta todos esses momentos e, pelo menos, excluir situações em que, devido a um erro, a porta permaneceu destrancada.  Mas mesmo que tenhamos perdido algo ou não o tenhamos feito o suficiente, você sempre poderá corrigi-lo, se desejar - o código-fonte do software Dooris estará aberto (publicaremos o código-fonte assim que o primeiro lote de nossos bloqueios inteligentes estiver pronto). <br><br><h2>  * * * </h2><br>  Queremos lançar a Dooris na produção em massa, mas primeiro precisamos entender qual demanda nosso produto usará e quem, se não você, queridos leitores do Geektimes, pode nos ajudar melhor nisso.  O que você diz: você compraria uma fechadura Dooris inteligente por 9.400 rublos?  Nesse caso, aguardamos ansiosamente as suas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pré-encomendas</a> (não precisamos de dinheiro antecipadamente).  De qualquer forma, teremos o maior prazer em ouvir sua opinião sobre a nossa criação e responder a perguntas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt405869/">https://habr.com/ru/post/pt405869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt405857/index.html">Ataque no modelo de aprendizado de máquina derruba carros robóticos</a></li>
<li><a href="../pt405859/index.html">História do ferro: 40 anos atrás, o computador pessoal TRS-80 foi colocado à venda</a></li>
<li><a href="../pt405861/index.html">Centro de dados para navios de cruzeiro</a></li>
<li><a href="../pt405863/index.html">Mantendo a ordem: Data Center 2 de Beyond.pl</a></li>
<li><a href="../pt405867/index.html">Uma semana após o garfo: Bitcoin está fazendo melhor do que nunca</a></li>
<li><a href="../pt405871/index.html">Entendemos a física de partículas: 6) campos</a></li>
<li><a href="../pt405873/index.html">Idade de Ouro do Aviso Legal</a></li>
<li><a href="../pt405875/index.html">54% dos passageiros se recusam a pilotar um avião sem um homem ao leme</a></li>
<li><a href="../pt405877/index.html">O Facebook Messenger pode se tornar um projeto independente</a></li>
<li><a href="../pt405879/index.html">"Imposto sobre discos" é retornado. Em risco - relógios inteligentes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>