<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ»â€ğŸŒ¾ ğŸ‘©ğŸ» ğŸ‘¨â€ğŸš’ IMaskjs 6 Tahun Baru - Bereaksi Asli, Pipa, ESM ğŸ‘©â€â¤ï¸â€ğŸ‘¨ ğŸ—„ï¸ âœ”ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya! 


 Saya baru saja merilis versi keenam dari perpustakaan imaskjs . Setelah setiap rilis utama, menurut saya ini adalah versi terbaru. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>IMaskjs 6 Tahun Baru - Bereaksi Asli, Pipa, ESM</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481922/"><p><img src="https://habrastorage.org/webt/ef/f1/eb/eff1ebw3d7h1yebue3fuxq76vns.png"><br>  Halo semuanya! </p><br><p>  Saya baru saja merilis versi keenam dari perpustakaan <a href="https://imask.js.org/">imaskjs</a> .  Setelah setiap rilis utama, menurut saya ini adalah versi terbaru.  Perpustakaan berusia lebih dari satu tahun, stabil dan cukup populer di kalangan masyarakat.  Apa lagi yang bisa dilakukan di sana dan bahkan pada versi utama?  Di semua proyek saya, saya mencoba melakukan tugas sehingga saya tidak kembali ke mereka dalam konteks saat ini.  Apa yang bisa berubah di topeng?  - Browser tidak mengubah API mereka, javascript sama, tugas bisnis sama - ponsel, kartu, angka.  Mengapa Anda tidak bisa berhenti, mengingat-ingat dan tidak lagi menyentuh? </p><a name="habracut"></a><br><p>  Dari waktu ke waktu, tentu saja, Anda perlu menekannya sehingga proyek itu tampak hidup dan tanggal komit terakhir pada github diperbarui.  Saya bukan satu-satunya yang melihatnya ketika saya memilih perpustakaan? </p><br><p>  Tapi sepertinya tidak ada alasan serius untuk perubahan itu.  Sebenarnya ada.  Dalam kasus saya dengan topeng, perubahan utama menyangkut ekosistem javascript: bahasa itu sendiri telah lama melampaui peramban dan menyebar ke tempat alat asli digunakan sebelumnya, yang memaksakan persyaratan baru pada alat.  Kerangka UI baru juga muncul yang membutuhkan beberapa adaptasi.  Meskipun menurut saya antarmuka perpustakaan dibuat sesederhana dan senyaman mungkin, oleh karena itu ada dan tidak dapat menjadi masalah dengan integrasi dengan apa pun, dalam hal apa pun di browser.  Tapi kemudian saya mulai bekerja pada sebuah plugin untuk React Native. </p><br><h2 id="lezem-v-trubu-na-react-native">  Kami naik ke pipa di React Native </h2><br><p>  Sejauh yang saya tahu, React Native adalah proyek skala besar yang telah hidup untuk waktu yang sangat lama, dan bahkan menggunakan orang-orang yang serius di prod.  Beberapa tahun yang lalu, saya mencoba menggunakan RN pada satu proyek uji kecil, dan itu adalah akhir dari latihan saya - saya pergi ke web.  Sekitar waktu yang sama, saya membuat plug-in untuk topeng di RN dan berusaha keras untuk membuatnya berfungsi seperti yang saya inginkan, tetapi tidak bisa.  Saya menemukan <a href="https://github.com/uNmAnNeR/imaskjs/issues/12">beberapa bug</a> di repositori RN pada pemrosesan input dan posisi kursor, tenang dan memutuskan untuk menunggu sebentar. </p><br><p>  Lebih dari satu tahun telah berlalu dan saya pikir sudah waktunya untuk kembali dan sudah menyingkirkan plugin.  Ternyata praktis tidak ada yang berubah selama ini: bug lama ditutup karena kurangnya aktivitas, antarmuka pemosisian kursor telah berubah sedikit, dan hanya itu.  Saya ingin berpikir bahwa masalahnya ada di perpustakaan saya, saya akan memperbaiki semuanya dan itu akan berhasil.  Sayangnya, menurut saya topeng sudah memiliki antarmuka yang sesederhana mungkin - sebagian besar logikananya dibawa ke kernel, untuk memproses input Anda hanya perlu dua status - kursor dan nilai sebelum dan sesudah perubahan.  Menurut saya tidak ada tempat yang lebih mudah, tapi saya masih belum bisa mendapatkan RN. </p><br><p>  Salah satu kesulitannya adalah bahwa urutan peristiwa input di RN berbeda dari browser.  Misalnya, di browser untuk acara <em>masukan</em> , kursor sudah ada di posisi baru, tetapi di RN ada acara terpisah di <em>Seleksi</em> Perubahan yang terjadi setelah mengubah nilainya, dan hanya di iOS, di Android, sebaliknya.  Dan poin kedua - Anda tidak dapat mengubah nilai di bidang di bidang dalam pengendali event dari peristiwa perubahan nilai pada RN, hal yang sama dengan posisi kursor.  Oleh karena itu, keterlambatan perubahan tidak dapat dihindari, dan akibatnya, teks dan kursor menyentak.  Bug ini sudah berusia hampir tiga tahun, jadi saya tidak melihat alasan untuk menunggu lebih lama lagi - saya meluncurkan plugin apa adanya, tetapi saya tidak merekomendasikan untuk menggunakannya.  Sebaliknya, saya melakukannya untuk menarik perhatian masyarakat: mungkin bug akan diperbaiki di RN, atau mungkin seseorang akan menghubungkan pemrosesan acara dalam kode asli ke IMask, di mana masalah seperti itu dapat dihindari. </p><br><h2 id="svoya-truba">  Pipa sendiri </h2><br><p>  Sekarang sedikit tentang yang baik.  Topeng sekarang dapat digunakan untuk memformat dan mengubah: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> numberPipe = IMask.createPipe({ <span class="hljs-attr"><span class="hljs-attr">mask</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>, <span class="hljs-attr"><span class="hljs-attr">scale</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">thousandsSeparator</span></span>: <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-attr"><span class="hljs-attr">normalizeZeros</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">padFractionalZeros</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }); <span class="hljs-comment"><span class="hljs-comment">// `numberPipe` -    numberPipe('1'); // "1,00"</span></span></code> </pre> <br><p>  Anda dapat menggunakan kembali satu mask untuk bekerja dengan input dan untuk memformat, misalnya pada formulir: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     const mask = IMask(el, { mask: Number, scale: 2, thousandsSeparator: ' ', normalizeZeros: true, padFractionalZeros: true, }); //   pipe    , //     IMask.pipe( 1, //  mask.masked, //     IMask.PIPE_TYPE.TYPED, //     IMask.PIPE_TYPE.UNMASKED //     ) // 1.00</span></span></code> </pre> <br><p>  Di plugin Angular, untuk kenyamanan, dibungkus dengan Pipa lokal. <br>  Sekali lagi, sesederhana dan sefungsional mungkin, implementasi 5 baris kode secara harfiah merupakan indikator arsitektur yang sukses.  Namun demikian, 5 baris kode telah ditambahkan lebih dari sekali, dan ukuran seluruh pustaka telah berjalan dengan serius. </p><br><h2 id="esm-moduli">  Modul ESM </h2><br><p>  Beberapa tahun yang lalu, ketika topeng itu sekitar 30 Kb, saya mengatakan kepada semua orang bahwa untuk topeng ini tidak banyak.  Sekarang hampir 60 Kb dan bahkan rasanya agak jauh bagi saya.  Ada satu solusi sederhana - <del>  gzip </del>  ambil saja yang kamu butuhkan.  Idealnya, pengumpul harus secara otomatis menganalisis dependensi dan membuang semua yang tidak digunakan.  Meskipun modul ESM telah di topeng untuk waktu yang lama, treeshaking hampir tidak berhasil, karena  referensi ke entitas internal berada di objek IMask root.  Ini dilakukan karena adanya ketergantungan siklik di dalam topeng, dan juga karena saya ingin topeng dapat mengimpor kedua objek root atau secara terpisah di bagian-bagian.  Misalnya, ini dilakukan di Bereaksi: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; React.Component === Component; <span class="hljs-comment"><span class="hljs-comment">// true</span></span></code> </pre> <br><p>  Di IMask 6.0, tautan keras antar modul terputus dan memungkinkan untuk mengimpor masing-masing modul: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    // import IMask from 'imask'; //      import IMask from 'imask/esm/imask'; //   ,   //    import 'imask/esm/masked/number'; //      ,       const numberMask = IMask(element, { mask: Number });</span></span></code> </pre> <br><p>  Dalam hal ini, Anda dapat terus menggunakan pendekatan lama dan tidak ada yang akan rusak, tetapi melakukan treeshaking juga tidak akan berhasil. </p><br><p>  Sebagai permulaan: versi baru memiliki dukungan untuk komponen yang dapat <em>diedit</em> dan komponen web!  Terima kasih kepada komunitas untuk umpan balik dan permintaan kumpulan. </p><br><p>  Dengan setiap rilis baru, bug menjadi lebih tipis, berharap lebih eksotis.  Di sini lagi, tampaknya masalah ini bergerak ke akhir.  Dan sepertinya itu akan menjadi tak terbatas sampai proyek mati atau sesuatu yang lebih baik muncul.  Atau mungkin platform akan berubah dan antarmuka baru akan muncul.  Namun ternyata, browser sekarang berada di suatu tempat antara pemuda dan kedewasaan, dan setelah kematian <a href="https://github.com/text-mask/text-mask">teks-mask</a> , tidak ada alternatif fungsional untuk IMask, dan saya masih dapat menemukan setetes waktu pada open source, jadi harus ada topeng. </p><br><p>  Semua kesuksesan dan inspirasi di Tahun Baru, dengan kedatangan! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id481922/">https://habr.com/ru/post/id481922/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id481906/index.html">Otak Cina, atau membela Spring</a></li>
<li><a href="../id481910/index.html">Menulis Perilaku Vertikal Fleksibel</a></li>
<li><a href="../id481912/index.html">Seminggu saya bekerja magang di SRE-engineer. Perhatikan melalui mata seorang insinyur perangkat lunak</a></li>
<li><a href="../id481914/index.html">Spring Boot vs Spring MVC vs Spring - Bagaimana mereka membandingkan?</a></li>
<li><a href="../id481916/index.html">Untuk apa tahun 2019 dalam pembangunan diingat?</a></li>
<li><a href="../id481924/index.html">Apache Spark, evaluasi malas, dan kueri multi-halaman SQL</a></li>
<li><a href="../id481926/index.html">Memenuhi Cadangan Veeam Baru untuk Solusi AWS</a></li>
<li><a href="../id481930/index.html">Budaya Pembangunan: Bagaimana Kinerja dan Efisiensi Dievaluasi</a></li>
<li><a href="../id481932/index.html">Penerapan dan Basis Data Downtime Nol</a></li>
<li><a href="../id481934/index.html">Analisis: mengapa harga saham Tesla tumbuh</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>