<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéá ü§¥üèº üë©üèº‚Äçüîß Rust para desarrolladores web: inicio r√°pido y vuelo r√°pido üíù üíü üöö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! Hoy quiero compartir mi experiencia en el aprendizaje del idioma y la r√°pida implementaci√≥n de un proyecto de red de alta carga utilizan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rust para desarrolladores web: inicio r√°pido y vuelo r√°pido</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bitrix/blog/477342/">  Hola a todos!  Hoy quiero compartir mi experiencia en el aprendizaje del idioma y la r√°pida implementaci√≥n de un proyecto de red de alta carga utilizando las conexiones de red asincr√≥nicas sin bloqueo, ahora tan populares y populares, en un lenguaje Rust nuevo, hermoso, elegante y muy efectivo. <br>  Pondr√© especial √©nfasis en la publicaci√≥n en una explicaci√≥n r√°pida y clara de las capacidades del lenguaje y la plataforma para especialistas que tienen una amplia experiencia en desarrollo web, porque yo mismo lo soy.  Existe la idea err√≥nea de que la curva de entrada en Rust es muy, muy empinada.  Pero mostrar√© que esto est√° lejos de ser el caso.  Vierta caf√© y condujo! <br><a name="habracut"></a><br><h3>  Una breve historia de los valores de programaci√≥n </h3><br>  Para que el material se encuentre bien en la cabeza y el coraz√≥n, es bueno recordar brevemente lo que la gente quer√≠a hacer en la programaci√≥n durante los √∫ltimos 50 a√±os y con qu√© terminaron.  Sin ofender, solo opini√≥n personal subjetiva y holivar, respaldada por 20 a√±os de experiencia en desarrollo. <br><br><h4>  Lenguajes de bajo nivel: C, C ++ </h4><br>  Est√° claro que puede escribir el programa inmediatamente en forma de n√∫meros en c√≥digos de m√°quina y muchos lo hicieron en ZX Spectrum, BK0010-01 y en PC; el c√≥digo resulta ser muy r√°pido :-) Pero somos personas, mucha informaci√≥n no cabe en nuestras cabezas, estamos distra√≠dos y por lo tanto incluso la invenci√≥n del ensamblador no ayud√≥ mucho: el c√≥digo a un nivel tan bajo rara vez se escribe y es muy preciso y, muy probablemente, si no est√° desarrollando controladores, microcontroladores o sistemas embebidos complicados, esto no ser√° √∫til en la vida. <br><img src="https://habrastorage.org/webt/gs/zf/28/gszf28trxey6oz6aag_dgh4u_lu.jpeg"><br><br>  A principios de los a√±os 70, Bell Labs invent√≥ el lenguaje C, que se arraig√≥ gracias a la sintaxis lac√≥nica y abstracciones muy "baratas", casi convirti√©ndose en un "ensamblador port√°til".  Est√° claro que si tomas una tonsura, escribe durante 10 a√±os en las noches C, no comas carne, ores y no te distraigas con las redes sociales y el sexo justo, puedes escribir programas muy √∫tiles y r√°pidos, como <a href="https://www.gnu.org/">GNU</a> testifica elocuentemente, excelentes juegos productivos, querido, pero no alternativo en calidad de Windows, y se pueden dar muchos m√°s ejemplos. <br>  Pero la otra cara de la moneda se hace sentir constantemente: abre regularmente agujeros en la seguridad (se ha creado una industria completa para "agujeros en el software"), causada por agujeros en el concepto del lenguaje C en s√≠ mismo: el compilador es como un toro irresponsable, con un poder incre√≠ble, un orgasmo intenso y poca memoria.  Cualquier negligencia, y no solo puede soltar el programa (desreferenciar un puntero nulo, liberar dos veces el puntero, salir de la matriz), sino arruinar irrevocablemente los datos y no notarlos durante mucho tiempo hasta que los clientes comiencen a llamar y cuando sea demasiado tarde ("comportamiento indefinido", diferente de compilador a compilador). <br><br>  Bj√∂rn Straustrup solo confundi√≥ a√∫n m√°s la situaci√≥n a principios de los a√±os ochenta, agregando capacidades OOP a C. A pesar de su gran popularidad, C ++, en general, es visto como una serie de experimentos de programaci√≥n, como tal, con diferentes resultados de √©xito, incluyendo  letal  A veces incluso parece que no ten√≠a sentido en C ++ desde el principio, o se perdi√≥ gradualmente, dando lugar a un mont√≥n de conceptos objetivamente complicados y conflictivos, que se vuelven cada vez m√°s con cada nuevo est√°ndar.  A pesar del excelente objetivo de "abstracciones de costo cero", que le permite obtener un c√≥digo r√°pido, para crear una soluci√≥n confiable, como en C, se requieren las siguientes condiciones: <br><ul><li>  experimentado, de la palabra "muy", equipo (a√±os de pr√°ctica, "monjes" de programaci√≥n) </li><li>  buen analizador de c√≥digo est√°tico </li><li>  departamento de pruebas (en el c√≥digo puede haber huecos que deja un compilador irresponsable, lo que puede hacerse sentir durante mucho tiempo) </li><li>  requisitos acordados por todos los miembros del equipo que son monitoreados cuidadosamente (no se utilizan punteros en bruto, encapsulaci√≥n estricta, la disciplina m√°s severa para nombrar variables, inicializar objetos, etc.) </li></ul><br><br>  Est√° claro que el cumplimiento de estos requisitos, especialmente en el contexto de una creciente necesidad empresarial de un "c√≥digo que funcione sin sorpresas repentinas", es muy costoso.  El c√≥digo en tales proyectos est√° escrito durante mucho tiempo, debe probarse durante mucho tiempo y con cuidado, pero, a veces, sin C / C ++, antes de la invenci√≥n de Rust, era realmente dif√≠cil de hacer. <br><br>  Una vez m√°s, un resumen de C / C ++: tenemos un compilador poderoso, pero "irresponsable" con "abstracciones actuales", que ayuda muy poco al desarrollador.  Como resultado, todos los problemas pasan a los hombros del programador.  Si al menos un programador en el equipo no tiene experiencia, no tiene mucho cuidado y no conoce todas las sutilezas del compilador (de hecho, nadie conoce todas las sutilezas y los usuarios las encuentran m√°s tarde), espere el problema.  Pero luego el programa funciona de forma r√°pida y probablemente correcta :-) Esto, por supuesto, gener√≥ todo un mercado de "muletas": analizadores est√°ticos, que, como result√≥, deber√≠an ser pagados por el Cliente.  Surge la pregunta: ¬øno podr√≠a ser posible escribir un compilador m√°s estricto y seguro que ayude al desarrollador y genere programas sin sorpresas y agujeros de seguridad de bajo nivel? <br><br><h4>  Java, C #, Kotlin </h4><br>  La situaci√≥n con un control francamente d√©bil del "comportamiento indefinido" y requisitos muy altos para los desarrolladores en C / C ++ dieron lugar al deseo de crear un entorno de desarrollo seguro, que incluye  para Internet, accesible para la mayor√≠a de los visitantes.  Entonces a finales de los 90 apareci√≥ Java. <br>  En principio, ahora cualquier persona con un nivel diferente de capacitaci√≥n podr√≠a escribir cualquier cosa y FUNCION√ì y no poner en el programa: no hubo "agujeros" de bajo nivel en la seguridad y accidentes espont√°neos (casi, pero ya fueron causados ‚Äã‚Äãpor errores en una m√°quina virtual y fija centralmente).  Solo hab√≠a "agujeros" l√≥gicos o c√≥digo lento oculto (nacido de la ignorancia de los algoritmos, el concepto de costo algor√≠tmico y la desaceleraci√≥n cuando aumentaba el volumen de datos), que ya no daba tanto miedo y le permite crear programas r√°pidamente y, si es necesario, reescribir peque√±os fragmentos con un equipo calificado de C / C C ++. <br>  Las cosas interesantes y valiosas que ha tra√≠do el mundo de Java son las siguientes: <br><ul><li>  El c√≥digo se escribe una vez para una m√°quina virtual que funciona en cualquier arquitectura (Windows, Linux, Mac) </li><li>  el desarrollador ya no administra la memoria directamente, como en C / C ++: esto se transfiere a los hombros del "recolector de basura";  Esto elimina el riesgo de comportamiento indefinido, corrupci√≥n discreta de datos y posibles agujeros de seguridad de bajo nivel. </li><li>  el c√≥digo se compila sobre la marcha, mientras se ejecuta el programa (compilaci√≥n Just_In_Time), porque  se sabe que solo una peque√±a parte se ejecuta activa y frecuentemente en el programa, por lo que no tiene sentido compilar todo </li><li>  se hizo m√°s f√°cil escribir c√≥digo eficiente de subprocesos m√∫ltiples, como  el modelo de memoria se especific√≥ estrictamente (mucho antes que en C ++), pero, m√°s sobre eso, no se resolvieron todos los problemas con la "confiabilidad l√≥gica de varios subprocesos" (los puntos muertos, por ejemplo, o las carreras de datos, segu√≠an siendo posibles) </li></ul><br><br>  Por supuesto, el advenimiento de una plataforma tan amigable hizo posible escribir muchos programas √∫tiles e in√∫tiles, que la empresa aprovech√≥ de inmediato.  Y el soporte para la compatibilidad con versiones anteriores en Java durante 15 a√±os o m√°s ha hecho que la tecnolog√≠a sea tan popular en el mundo empresarial. <br><br>  S√≠, tambi√©n tengo analog√≠as con la cerveza sin alcohol y las mujeres de goma. <br><br>  Sin embargo, lejos de inmediato, los siguientes problemas surgieron en Java: <br><ul><li>  Debido al "agujero" l√≥gico en el sistema de mecanograf√≠a, que se hered√≥ de C / C ++, el tipo "Nulo" se introdujo en Java, que hasta el d√≠a de hoy causa muchos problemas y conduce constantemente a fallas de programadores "poco experimentados" que no conoce el tipo <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html">opcional</a> y no est√° interesado en m√≥nadas de programaci√≥n funcional </li><li>  Los proyectos Java, que a veces funcionan un poco m√°s lento, requieren √≥rdenes de magnitud m√°s RAM que C / C ++ que necesita el recolector de basura (tenemos varios proyectos que consumen decenas o cientos de gigabytes de RAM);  esto a menudo no es un problema directo, ya que  Los precios de la RAM est√°n cayendo, pero el "sedimento se mantuvo" </li><li>  A pesar de la compilaci√≥n de jit y las grandes inversiones para acelerar el recolector de basura (que muchos nuevos aparecen regularmente y dicen constantemente: "pruebe un nuevo GC, es mucho mejor"), durante unos 20 a√±os, algunos proyectos Java altamente cargados han estado trabajando con pausas regulares durante varios segundos, que no se puede quitar de ninguna manera (hay una recolecci√≥n forzada de basura, y como los tornillos en el GC no se tuercen, el recolector de basura simplemente no tiene tiempo para limpiar todo, incluso trabajando en paralelo e incluso devorando m√°s recursos que el programa en s√≠) </li><li>  Se sabe que las aplicaciones Java GUI a veces se congelan y ralentizan, causando enojo a los usuarios, debido a la misma recolecci√≥n de basura y no hay esperanza y no se espera </li><li>  la sintaxis del lenguaje es muy detallada y redundante (debe escribir y luego leer las palabras "funci√≥n est√°tica p√∫blica" en lugar de, por ejemplo, "pub fn" o "def"), forzando a veces a romper los dedos en las u√±as y causar dolor objetivo y sangrado de los ojos </li><li>  una fuerte disminuci√≥n en los requisitos para el nivel de calificaciones de los desarrolladores y una curva de entrada suficientemente baja dieron lugar a una gran cantidad de c√≥digo de "grado extra√±o de frescura", que constantemente se hace sentir a lo largo de mi vida con un hedor memorable </li></ul><br><br>  Despu√©s de leer, debe quedar claro que no todo se puede escribir en Java, se escribir√° muy lentamente, luego se ralentizar√° regularmente y se bloquear√° por un segundo bajo carga, a veces "come" mucha RAM (generalmente se come al menos la mitad de la RAM del servidor), juegos productivos Tampoco puede hacerlo, pero algunas piezas de l√≥gica empresarial que no son particularmente exigentes en cuanto a rendimiento y RAM, especialmente las de m√∫ltiples subprocesos, son bastante posibles, √∫tiles y, por lo tanto, vemos tanta popularidad de la tecnolog√≠a en el mundo empresarial.  Y nosotros mismos utilizamos Java de manera regular y activa para los servicios de la empresa. <br><br><h4>  C #, Scala, Kotlin </h4><br>  "¬øY cu√°ndo ser√° sobre Rust?" - espera un minuto, necesitas un poco m√°s de preparaci√≥n para comer este dulce caqui.  Si no habla sobre las caracter√≠sticas de otras tecnolog√≠as, no entender√° por qu√© apareci√≥ Rust y por qu√© es tan <a href="https://www.rust-lang.org/production">popular y</a> tan <a href="https://www.rust-lang.org/production">demandado</a> . <br><br>  Entonces, tratando de hacer que Java sea mejor y m√°s progresivo, Microsoft, en la persona del autor TurboPascal / Delphi, al comienzo del cero, ide√≥ C # y el concepto de .NET.  Objetivamente, seg√∫n muchos expertos de renombre, y en las salas de fumadores de los desarrolladores, "C #" es m√°s sexy que Java, aunque, por supuesto, hasta ahora, a pesar de Mono, est√° fuertemente vinculado a Microsoft con todas las entradas y consecuencias :-) <br><br>  Scala es sin duda un gran paso adelante, ya que  El lenguaje, por supuesto, result√≥ ser cient√≠ficamente abstruso y sofisticado, tomando muchas cosas √∫tiles e in√∫tiles del mundo de la programaci√≥n funcional.  Pero algo no est√° muy claro con la popularidad.  Sin embargo, <a href="https://ru.wikipedia.org/wiki/Apache_Spark">Apache Spark es</a> realmente bueno y popular, nada que decir. <br><br>  Kotlin es popular porque  hace que Java sea m√°s eficiente y f√°cil para los principiantes, especialmente en plataformas m√≥viles que no tienen tiempo para estudiar seriamente la programaci√≥n :-) <br><br>  Pero el problema principal en C # (en la plataforma .NET), as√≠ como en Scala, Kotlin y en otros lenguajes JVM, persisti√≥.  ¬°El recolector de basura, Carl, crea una carga notable en el servidor y detiene la ejecuci√≥n del c√≥digo durante segundos bajo carga y requisitos de RAM glotones!  Y cu√°ntos idiomas m√°s con un recolector de basura y compilaci√≥n jit no aparecer√°n, estos problemas permanecer√°n y a√∫n no hay esperanza, incluso en teor√≠a. <br><br><h4>  Scripting </h4><br>  "Pero, ¬øqu√© pasa con PHP?".  S√≠, ahora hablemos de scripting.  Parecer√≠a, ¬øpor qu√© es √©l?  A finales de los a√±os 80, se hizo evidente que si necesita resolver r√°pidamente el problema utilizando c√≥digo, no necesariamente s√∫per r√°pido, y es seguro, sin un comportamiento indefinido y agujeros de bajo nivel, puede escribir un gui√≥n.  Los guiones se escribieron antes, en bash, perl, awk, pero result√≥ que en python puedes escribir guiones grandes, grandes, especialmente cient√≠ficos, ¬°y durante a√±os! <br><br>  Lua encontr√≥ su nicho en gamedev y machine learning ( <a href="http://torch.ch/">Torch</a> ), JavaScript, en desarrollo web tanto en el lado del navegador como en el lado del <a href="https://ru.wikipedia.org/wiki/Node.js">servidor</a> (todos saben que la <a href="https://www.rust-lang.org/static/pdfs/Rust-npm-Whitepaper.pdf">autorizaci√≥n en la infraestructura "npm" de</a> Node.js se reescribe desde Node.js y Golang en √≥xido?).  Python: en el aprendizaje autom√°tico y el an√°lisis de datos, as√≠ como en las secuencias de comandos del sistema.  Y PHP: se adapta perfectamente a las tareas del servidor para el desarrollo web. <br><img src="https://habrastorage.org/webt/sj/eg/0e/sjeg0ebs9dgz9eb42wsglwralv8.jpeg"><br><br>  Las ventajas de los scripts son obvias: <br><ul><li>  El c√≥digo seguro y eficiente sin comportamiento indefinido y agujeros de seguridad de bajo nivel, usando algoritmos populares y estructuras de datos (listas, diccionarios, colas), se crea en literalmente minutos </li><li>  Un comienzo muy r√°pido y una curva de entrada suave.  Lleva varios d√≠as descubrir y escribir un script python √∫til, cambiar la l√≥gica de nginx a trav√©s de scripting en Lua, o hacer la integraci√≥n de la tienda en l√≠nea en PHP </li><li>  Si escribe scripts de manera disciplinada, observando CodeStyle y de la forma m√°s estricta posible, puede resolver r√°pidamente problemas complejos y crear grandes productos de software: una gran cantidad de bibliotecas cient√≠ficas en Python, sistemas de administraci√≥n de sitios web y negocios en PHP, plataforma de red neuronal Torch en LuaJit, scripting de juegos en muy juegos famosos y populares, etc. </li><li>  Algunos tipos de programaci√≥n multiproceso, donde I / O es el cuello de botella, se resuelven de manera bastante eficiente en Python.  Y utilizando las √∫ltimas funciones de Python con futuros como "async / await" es a√∫n m√°s f√°cil resolver los problemas de procesamiento de una gran cantidad de sockets de red </li><li>  De manera muy elegante, la tarea de procesar asincr√≥nicamente una gran cantidad de z√≥calos, incluso sin subprocesos m√∫ltiples, se resolvi√≥ en Node.js fuera de la caja </li><li>  Crear p√°ginas web, usar numerosas bibliotecas de Unix, ir a la base de datos sigue siendo f√°cil y conveniente usando PHP y productos basados ‚Äã‚Äãen √©l </li><li>  En Python, PHP, JavaScript es muy conveniente probar hip√≥tesis y hacer prototipos en horas, no en meses. </li><li>  Para el an√°lisis y el procesamiento de datos, tradicionalmente es muy conveniente usar python / R junto con una gran cantidad de bibliotecas de alta calidad (pandas, scikit-learn, seaborn, matplotlib ...) </li></ul><br><br>  Sin embargo, no puede conocer las posibles desventajas de los scripts: <br><ul><li>  Un nivel de entrada bajo y una velocidad de secuencia de comandos muy r√°pida a veces, en ausencia de un control adecuado sobre los desarrolladores, crea toneladas de c√≥digo ineficiente y dif√≠cil de mantener en cualquier plataforma </li><li>  La ausencia de un compilador, un sistema de tipos y una escritura est√°tica requiere una verificaci√≥n din√°mica de los par√°metros pasados ‚Äã‚Äãa las funciones y m√©todos para los tipos y una cobertura de c√≥digo de alta calidad con pruebas autom√°ticas.  De lo contrario, cualquier cambio en el c√≥digo puede romper el programa y el cliente, y no el desarrollador, ser√° el primero en saberlo (s√≠, s√© sobre TypeScript, pero son muletas y cataplasmas muertas) </li><li>  Objetiva y obviamente, en lenguajes sin tipeo y compilaci√≥n est√°ticos, donde suceden muchas cosas en tiempo de ejecuci√≥n, no se pueden usar numerosas optimizaciones y, por lo tanto, en algunas tareas, los scripts funcionan con √≥rdenes de magnitud m√°s lentas y consumen muchas veces m√°s recursos.  A pesar de los intentos de implementar la compilaci√≥n jit en python (pypy), PHP (hhvm), JavaScript (traducci√≥n al c√≥digo de m√°quina, wow, Node.js v8), LuaJIT: no nos enga√±emos: todo esto parece muletas d√©bilmente eficientes.  La raz√≥n es, y debe entenderse de una vez por todas, que debido al tipeo deliberadamente d√©bil de los idiomas, es poco probable que los scripts logren escribir un tiempo de ejecuci√≥n efectivo, acerc√°ndose en velocidad a Java / C # mucho m√°s tipado </li><li>  Y en Python, parece que nunca habr√° multihilo eficiente, como en Java / C #, debido a GIL </li></ul><br><br>  Sin embargo, desde  en la mayor√≠a de las aplicaciones comerciales, incluidas  sistemas de gesti√≥n del sitio, CRM, etc.  Dado que la mayor parte del tiempo de ejecuci√≥n del c√≥digo se dedica a consultas a la base de datos, la ventaja de jit Java / C # est√° profundamente nivelada por la velocidad de escribir soluciones en PHP / python / JavaScript, y personalmente, para crear aplicaciones web, seleccionar√© 10-20 l√≠neas en PHP de 10,000 cuerdas y un mont√≥n de menudillos en Java / Spring.  Y PHP7 de alguna manera overclocke√≥ para que se ejecute m√°s r√°pido que python3 ;-) <br><br>  ¬øQu√© conclusi√≥n se puede hacer aqu√≠?  No es necesario resolver todos los problemas, como ahora es popular, solo mediante secuencias de comandos; en algunos casos, es razonable tomar otra herramienta m√°s adecuada, si hay buenas razones para esto: <br><ul><li>  cargas de red muy altas y subprocesos m√∫ltiples "extremos", miles - decenas de miles de sockets de red, etc. </li><li>  restricci√≥n en el uso de RAM y hardware </li><li>  procesamiento intensivo de datos y computaci√≥n, matrices con millones de entidades, GPU (aunque python / numpy / pandas pueden ayudar aqu√≠) </li></ul><br><br>  A menudo en la empresa practicamos este enfoque: <br><ul><li>  tomar una decisi√≥n r√°pidamente en PHP / python / JavaScript / Node.js, lanzarse a la batalla y comenzar a resolver los problemas del cliente </li><li>  ejecutamos funciones, oportunidades, mejoramos los servicios </li><li>  en casos raros, por experiencia, generalmente no antes de algunos a√±os, algunos de los servicios que ya tienen una funcionalidad estable se reescriben en C / C ++ / Java / Golang / Rust </li></ul><br>  Por lo tanto, es mejor comenzar, por lo general, con secuencias de comandos, comenzar una batalla, y luego, si lo necesita directamente, necesita recoger otras herramientas y esto funciona, generalmente de manera muy suave y sin riesgos. <br><br><h4>  Programaci√≥n funcional, Lisp, Haskell, F # </h4><br>  Muchos, durante toda la carrera de desarrollador, nunca vienen aqu√≠, sino en vano.  Es extremadamente √∫til entender por qu√© apareci√≥ la FP (programaci√≥n funcional) y por qu√© en algunas √°reas es tan popular. <br><br>  Lo explicar√© simplemente.  Hay un problema tan insoluble en matem√°ticas como el <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BB%25D0%25B5%25D0%25BC%25D0%25B0_%25D0%25BE%25D1%2581%25D1%2582%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25B2%25D0%25BA%25D0%25B8">"problema de detenci√≥n"</a> .  Si lo pone en palabras muy simples y bastante no estrictas, pero est√° claro, entonces no puede encontrar un algoritmo que pruebe que el programa funcionar√° sin errores.  Por qu√©  Porque inicialmente, la gente comenz√≥ a programar de manera agresiva e imperativa, usando: <br><ul><li>  variables mutables </li><li>  ciclos con condiciones </li><li>  efectos secundarios </li></ul><br>  Y comenzaron a cometer errores.  Ahora vemos esto, observando una gran cantidad de errores tanto en la web como en aplicaciones de escritorio y m√≥viles.  Y no importa c√≥mo cubra el c√≥digo con pruebas autom√°ticas, los errores contin√∫an goteando, dispers√°ndose por el piso y ri√©ndose. <br>  Para detener esta pesadilla de la aparici√≥n de errores y software despiadado, a finales de los a√±os 50, <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2581%25D0%25BF">apareci√≥</a> una direcci√≥n de programaci√≥n funcional y el <a href="https://ru.wikipedia.org/wiki/%25D0%259B%25D0%25B8%25D1%2581%25D0%25BF">lenguaje Lisp</a> .  Ahora esta familia de idiomas representa, m√°s o menos adecuadamente, <a href="https://ru.wikipedia.org/wiki/Haskell">Haskell</a> . <br><br>  A pesar de que una gran cantidad de posibles errores en el c√≥digo se eliminan realmente debido a: <br><ul><li>  <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B3%25D0%25B5%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D1%2582%25D0%25B8%25D0%25BF_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585">tipos de datos algebraicos</a> y coincidencia de patrones en ellos </li><li>  la ausencia de ciclos (solo a trav√©s de la recursividad) y variables mutables dentro del alcance de un brazo extendido (por supuesto, <a href="https://wiki.haskell.org/Mutable_variable">se pueden encontrar</a> muletas para evitar esto) </li><li>  escritura est√°tica muy estricta y, al mismo tiempo, salida autom√°tica muy conveniente de <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D1%258B%25D0%25B2%25D0%25BE%25D0%25B4_%25D1%2582%25D0%25B8%25D0%25BF%25D0%25BE%25D0%25B2">los</a> tipos <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D1%258B%25D0%25B2%25D0%25BE%25D0%25B4_%25D1%2582%25D0%25B8%25D0%25BF%25D0%25BE%25D0%25B2">Hindley-Milner</a> </li><li>  caracter√≠sticas muy potentes, con la divisi√≥n en "puro" y "con efectos secundarios", con posibilidad de <a href="https://wiki.haskell.org/Currying">uso parcial</a> </li><li>  soporte seguro de programaci√≥n concurrente </li><li>  soporte para combinadores a trav√©s de m√≥nadas para todas las ocasiones (m√°s sobre eso en la secci√≥n Rust) </li></ul><br><br> Haskell       ¬´¬ª ‚Äî     ,  ,  ,             : <a href="https://en.wikipedia.org/wiki/Category_theory"> </a> .    Haskell    ¬´¬ª,      ,    ,    ,        .          Haskell    . <br><br> , ,      ‚Äî  Haskell ,  ,  ,              Java/C#. <br><br>    ,     . Haskell  ,   , ,     ,      .  ,          ¬´¬ª   ‚Äî  Haskell    . <br><br><h4>  ¬´C/C++¬ª ‚Äî Golang, D </h4><br>  ,    ,      C/C++ (,         Forth). <a href="https://losst.ru/pochemu-linus-torvalds-ne-lyubit-c"> </a>    C++  ,       ,         <a href="https://wiki.dlang.org/Language_History_and_Future">   D</a> (   ‚Äî    ,     ). <br><br> ,       -    /C++    c  <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25BE%25D0%25BB%25D1%2583%25D1%2587%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D1%2580%25D0%25B5%25D1%2581%25D1%2583%25D1%2580%25D1%2581%25D0%25B0_%25D0%25B5%25D1%2581%25D1%2582%25D1%258C_%25D0%25B8%25D0%25BD%25D0%25B8%25D1%2586%25D0%25B8%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25B7%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F">RAII</a>     ,      .     2009   Google   <a href="https://en.wikipedia.org/wiki/Go_(programming_language)">Golang</a> . <br>     ,  Golang         , , ,       . Golang         Java/C# (     )  ,  <a href="https://stackoverflow.com/questions/7823725/what-kind-of-garbage-collection-does-go-use"> </a> ‚Ä¶  ,   Golang: <br><ul><li>    ¬´green threads¬ª ( ),       python </li><li>    ,  ,  (,  Docker ) :-) </li></ul><br>       .   Node.js  python  . <br><br> , Golang        , Google vs Sun/Oracle,   ,   ,  ,    :-) ,   ¬´  Java/C#¬ª         ,       ‚Äî    .  Docker  Golang         .      Golang ‚Äî            Java/C#,     ,   . <br><img src="https://habrastorage.org/webt/m7/1e/sc/m71escomzu8jtn2z-xrre4vyq5g.jpeg"><br><br>     , , <a href="https://oxozle.com/2017/05/10/sravnenie-arc-i-garbage-collector/">Swift</a> , c ¬´ ¬ª     .       macOS. <br><br><h3>   ‚Äî Rust! </h3><br>    ,      ,   40-50      , ,         ,   ¬´zero-cost¬ª , , -  -  :-)     , ,    (Java/C#),   ,    (C/C++),   -,         ‚Äî  .         ,     ? <br><br>  ‚Äî .  , , ,     50      ,    2010   Mozilla Research.   ,    : <br><ul><li>  ¬´zero-cost¬ª  ( C/C++    ), ..       ,   ,   ------ <a href="https://doc.rust-lang.org/stable/book/ch13-00-functional-features.html"></a>  ¬´  ¬ª (,   ,       ) </li><li>     <a href="https://doc.rust-lang.org/stable/cargo/">cargo</a> ,        </li><li>       (* ‚Äî     ):    ,     ‚Äî        ¬´   ¬ª,    , , ,    </li><li>   ,   ,                 (  ,      ,         GC , -  runtime,     ) </li><li>         -,   Null (!),                 </li><li>     Haskell  pattern-matching  ,                Enumeration (Golang, ,       ) </li><li>           (   Java,   ) </li><li>        ( Golang   ‚Äî  ;  Java/C#/Erlang  ..    ,    ) </li><li> <a href="https://doc.rust-lang.org/stable/book/ch19-06-macros.html"></a>    ,      (   C/C++) </li></ul><br><br> ,   ,    -.    ?  !      ,       50 . , , ¬´¬ª    ,                ,  . <br><br> Rust    ¬´¬ª , ,        Haskell   . <br>  Rust    , , , Java :-) ‚Äî  Nulls,     pattern-matching  ,    generics  traits     .      .    ,    ,         , ¬´  Haskell¬ª,     . <br><br>      . <br><br><h4>       ? </h4><br>   !       , ¬´¬ª (¬´ownership¬ª)       .     ¬´  ¬ª ( ¬´lifetime¬ª,   Rust book,    ),  <a href="https://doc.rust-lang.org/stable/book/ch04-01-what-is-ownership.html">  </a> (   ,    ). <br>     /,            .     /,             . <br>            C++,   -  move-.    ,       rust   ,      . <br><br><h4>   zero-cost ? </h4><br>       ,      traits,    .   , ,   Golang.        , , -     pattern-matching,      (    Golang,  ).  /         .        :         .      <a href="https://doc.rust-lang.org/stable/book/ch04-02-references-and-borrowing.html"></a> (¬´borrowing¬ª).      ,      (  ¬´read-write locks¬ª,  ).  , ,        ,        ,    . <br>           <a href="https://doc.rust-lang.org/stable/book/ch04-03-slices.html">slice</a> ,  , , .    ‚Äî   ¬´ ¬ª , ,            ;   ,           . <br><br><h4>     </h4><br>       : <br><ul><li>  ,  <a href="https://doc.rust-lang.org/stable/book/ch03-01-variables-and-mutability.html">   </a> </li><li>     (   ,      <a href="https://doc.rust-lang.org/stable/book/ch19-01-unsafe-rust.html">  </a> ) </li><li>      ,   ---,    <a href="https://doc.rust-lang.org/stable/book/ch13-04-performance.html">  </a> </li><li>   ,       ,    ,          </li></ul><br><br>   ,           ( ,  )     <a href="https://en.wikipedia.org/wiki/Substructural_type_system"> </a>      ‚Ä¶ .                 / ,    C/C++      .       . <br><br><h4>   </h4><br>               ,      - ,     -    .  -  ,    .       Sync/Send,    ,       :  ,   , ,   . <br><br>         ,         ,       1-2         futures  <a href="https://tokio.rs/">  </a> .   ,   Node.js  python  async/await,      ,          .    ,    ? <br><br><h4>  unit    </h4><br> ,         unit           . <a href="https://doc.rust-lang.org/stable/book/ch11-00-testing.html">    </a>   . <br><br><h4>    ‚Äî cargo </h4><br>    Java, ¬´Maven   <a href="https://doc.rust-lang.org/stable/cargo/">cargo</a> ¬ª     ,     :  ,    . , ,   ,   . <br><br><h4> Heap   </h4><br>  ,        ,           heap. ,    ,       ( )  ¬´  ¬ª ( ¬´lifetime¬ª).    ,     <a href="https://doc.rust-lang.org/stable/book/ch15-00-smart-pointers.html"> </a> ( Swift).     ,     ‚Äî  ,    heap              .    ‚Äî         ,      . <br><br><h4>      </h4><br>    ,     , ,         . ,    (2   )      , , ,      ,   <a href="https://tokio.rs/">   </a> , <a href="https://rust-lang-nursery.github.io/rust-cookbook/cli/arguments.html"></a>       <a href="https://lib.rs/crates/rusoto_sqs">AmazonWebServices</a>    c tls/ssl,            . <br> ,  , ,  ,      , -   .        <a href="https://doc.rust-lang.org/stable/book/ch10-03-lifetime-syntax.html">¬´  ¬ª ( ¬´lifetimes¬ª)</a>   . <br> ,            .    IntelliJ <a href="https://intellij-rust.github.io/">   rust</a> ,        .      Notepad++ ‚Äî          . <br><br><h4>     Rust </h4><br><ul><li> Comprenda que realmente necesita escribir c√≥digo de sistema muy r√°pido, trabajando bajo cargas elevadas y consumiendo un m√≠nimo de recursos y sin ning√∫n gasto adicional, como un recolector de basura.  De lo contrario, escriba un script en python / PHP / Node.js y vuelva a la tarea despu√©s de 2-3 a√±os (en el 97% de los casos no tiene que regresar). </li><li>  No tengas miedo a Rust.  El punto culminante principal del lenguaje es un compilador muy inteligente y matem√°ticamente riguroso que NO FALTAR√Å el c√≥digo peligroso e incorrecto.  Por prueba y error, evitando esquinas agudas, aprender√° a programar usando el compilador de forma estricta y segura :-) </li><li>  Comience a aprender el idioma con un " <a href="https://doc.rust-lang.org/stable/book/title-page.html">libro de √≥xido</a> ".  Un libro hermoso y sexy que es f√°cil de leer y divertido de leer.  Pero es mejor leerlo 2 veces, "resolviendo" todos los ejemplos. </li><li>  El " <a href="https://rust-lang-nursery.github.io/rust-cookbook/">libro de cocina Rust</a> " ayuda <a href="https://rust-lang-nursery.github.io/rust-cookbook/">mucho</a> .  Tambi√©n es deseable "resolverlo" y ver c√≥mo funciona el c√≥digo, para sentirlo. </li><li>  Existe literatura sobre Rust para usuarios avanzados, como <a href="https://doc.rust-lang.org/stable/nomicon/">Rustonimicon</a> , pero no recomiendo <a href="https://doc.rust-lang.org/stable/nomicon/">molestarse</a> innecesariamente con cosas t√©cnicas realmente complicadas. </li></ul><br><img src="https://habrastorage.org/webt/o7/tb/h4/o7tbh4gcbhpj467i9pkm7muais4.jpeg"><br><br>  Comprenda una vez m√°s: para dominar la tecnolog√≠a, debe comenzar a escribir c√≥digo √∫til para la empresa.  El compilador Rust es tan inteligente que ofrece garant√≠as (de hecho, es muy importante, el compilador C ++ no sabe c√≥mo hacer esto) y no compila c√≥digo peligroso / da√±ado por la memoria, as√≠ que experimenta todo lo que quieras, y obtendr√°s el c√≥digo de forma r√°pida y segura, y a√∫n mejor comenzar√°s a programar: ) <br><br><h4>  Detalles de implementaci√≥n del proyecto </h4><br>  Revelar√© un peque√±o detalle del proyecto.  Amazon SQS derrama cientos de paquetes de datos por segundo.  La cola es le√≠da, analizada localmente por los trabajadores, cada mensaje es procesado por el intermediario y redirigido a otro servidor externo.  Hay varios servidores externos.  Inicialmente, la soluci√≥n se implement√≥ a trav√©s de secuencias de comandos: la secuencia de comandos, iniciar un proceso en el sistema operativo, leer mensajes, procesados ‚Äã‚Äãy enviados a trav√©s de la red.  En varios servidores de hierro potentes (8 n√∫cleos, 16 GB de RAM), se lanzaron cientos de scripts (¬°en cada uno!), Leyendo simult√°neamente de SQS, procesando y enviando datos.  Simple, confiable, pero la ingesta de hierro comenz√≥ a molestar.  El costo del hierro aumentaba constantemente. <br><br>  Rust utiliza principalmente bibliotecas y m√≥dulos est√°ndar de carga: <br><ul><li>  rusoto_sqs: para trabajar con Amazon Web Services, sin preguntas, funciona seg√∫n sea necesario de inmediato </li><li>  rustls - para tls, incl.  interacciones con los servicios TLS de Google, Apple y el uso de certificados de clientes </li><li>  enlace de se√±al: para interceptar kill y llevar al final de la transacci√≥n para enviar datos </li><li>  futuros, tokio-rustls: trabajo asincr√≥nico, "diferido", multiproceso, con sockets TLS de red, ala Node.js </li><li>  clap - an√°lisis de argumentos de l√≠nea de comando </li><li>  serde_json - formaci√≥n json, nada interesante aqu√≠ </li></ul><br><br>  Desafortunadamente, no fue sin usar bloques "inseguros" y "std :: mem :: transmute": la biblioteca est√°ndar no pudo encontrar herramientas para analizar datos binarios en √°rboles. <br><br>  El principal, si puede llamarlo as√≠, "enchufar" ocurri√≥ en la compilaci√≥n: las bibliotecas no se compilaron en CentOS6 debido al "ensamblador desactualizado" en binutils, pero no hubo problemas en CentOS7. <br><br>  La impresi√≥n general es que el desarrollo en Rust se asemeja, m√°s bien, a "secuencias de comandos estrictas" en lugar de a la programaci√≥n del sistema, no mucho m√°s que las secuencias de comandos o el desarrollo web, tanto en t√©rminos de recursos como de pruebas.  En este caso, una compilaci√≥n est√°tica estricta, la ausencia de un recolector de basura y tipos de datos algebraicamente. <br><br>  El sentimiento general es muy positivo.  A√∫n as√≠, en lugar de varios servidores de hierro (8 n√∫cleos, 16 GB de RAM), el problema comenz√≥ a resolverse mediante un proceso (con docenas de hilos) que no come m√°s de 5 GB de RAM y crea una carga no muy notable en los n√∫cleos, con tr√°fico en la regi√≥n de 0.5-1 gigabits . <br><br><h3>  Conclusi√≥n </h3><br>  Bueno, eso termin√≥ una publicaci√≥n larga, pero, con suerte, inspiradora y √∫til sobre tecnolog√≠a efectiva.  Ahora conoce otra herramienta y puede usarla con mayor seguridad si es necesario.  Revisamos la historia del desarrollo de lenguajes de programaci√≥n, sus capacidades y caracter√≠sticas, y podemos haber sacado o sacaremos las conclusiones correctas.  ¬°Buena suerte con tus proyectos y bueno, no, buen humor! <br><br>  PD: <br>  * - S√≠, casi lo olvido.  Por supuesto, debe hablar sobre el bloqueo inseguro.  En este bloque puedes: <ul><li>  para programar cosas que no est√°n disponibles en punteros ordinarios "sin referencia a la oxidaci√≥n" y hacer algunas cosas potencialmente m√°s peligrosas, a veces requeridas en la programaci√≥n del sistema.  Pero no todo es tan aterrador: </li><li>  los bloques inseguros son visibles y no hay ninguno, o el c√≥digo responsable se concentra en ellos </li><li>  La biblioteca est√°ndar de √≥xido se prueba exhaustivamente, lo que significa que creemos que los bloques inseguros funcionan en ella. </li><li>  Las bibliotecas populares en carga tambi√©n se prueban a fondo (todo est√° integrado para pruebas de unidad e integraci√≥n en √≥xido) y, por lo tanto, se pueden tomar y usar de forma segura </li></ul><br>  Es decir  en el bloque "inseguro" no puede participar en libertinaje arbitrario, disponible en C, pero solo con <a href="https://doc.rust-lang.org/stable/book/ch19-01-unsafe-rust.html">ciertos</a> tipos <a href="https://doc.rust-lang.org/stable/book/ch19-01-unsafe-rust.html">estrictamente ciertos</a> de actividades peligrosas.  Por lo tanto, puedes y debes dormir tranquilo :-) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/477342/">https://habr.com/ru/post/477342/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../477326/index.html">Sencillez Hickey</a></li>
<li><a href="../477328/index.html">Razones para introducir el analizador de c√≥digo est√°tico PVS-Studio en el proceso de desarrollo</a></li>
<li><a href="../477332/index.html">Hackney Pipeline: Hackathon para marcar datos de Ozon, Yandex.Tolki y Netologiya</a></li>
<li><a href="../477336/index.html">Computaci√≥n sin servidor basada en OpenWhisk, parte 1</a></li>
<li><a href="../477338/index.html">OWASP Mosc√∫ (Rusia) encuentro 19/12 CFP</a></li>
<li><a href="../477344/index.html">JIRA: reglas para la preparaci√≥n oportuna de software delicioso. TLDR 1: l√≠mites de oportunidad</a></li>
<li><a href="../477348/index.html">Habr Weekly # 28 / Hablar en p√∫blico no da miedo, Starship explot√≥, Tesla mostr√≥ CYBRTRCK, Peregrine Falcon hackeado</a></li>
<li><a href="../477350/index.html">Primera aplicaci√≥n (Avalanche - framework de aplicaciones para Java)</a></li>
<li><a href="../477352/index.html">Licencias para sitios y servicios de Internet en China</a></li>
<li><a href="../477354/index.html">Preguntas para una entrevista: del candidato al empleador</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>