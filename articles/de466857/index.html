<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üà∑Ô∏è üë©üèæ‚Äçüíª üßëüèΩ‚Äçü§ù‚Äçüßëüèª Ausf√ºhrung der Hintergrundanwendung in iOS 13 üëù ‚òùüèΩ üñºÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Hauptereignis des Jahres in der Welt der iOS- und MacOS-Entwickler, WWDC, erfreut ausnahmslos alle Branchenbeteiligten mit der Ver√∂ffentlichung ne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ausf√ºhrung der Hintergrundanwendung in iOS 13</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466857/">  Das Hauptereignis des Jahres in der Welt der iOS- und MacOS-Entwickler, WWDC, erfreut ausnahmslos alle Branchenbeteiligten mit der Ver√∂ffentlichung neuer Versionen des Betriebssystems, der Frameworks und der Hardware - im Allgemeinen alles, woran tats√§chlich gearbeitet werden muss. <br><br>  Dieses Jahr war keine Ausnahme und das Thema der aktiven Diskussion war die neue Version von iOS und SwiftUI sowie das iPadOS-Betriebssystem f√ºr Sie, die selbst verstanden haben, welche Ger√§te. <br><br>  Es gab jedoch Themen, die weniger behandelt wurden, aber nicht weniger interessant waren - zum Beispiel wurde eine so n√ºtzliche Sache wie die Hintergrundausf√ºhrung von Anwendungen angesprochen. <br><a name="habracut"></a><br><h4>  Kurz zum Thema </h4><br>  F√ºr diejenigen, die nicht genau verstehen, was Hintergrundausf√ºhrung ist, erkl√§ren wir Folgendes: Die Ausf√ºhrung im Hintergrund bedeutet, dass die Anwendung einige Arbeiten in einem Zustand ausf√ºhrt, in dem sie nicht physisch auf dem Smartphone-Bildschirm des Benutzers ausgef√ºhrt wird (d. H. Nicht im Vordergrund). . <br><br><img src="https://habrastorage.org/webt/9u/w9/wu/9uw9wug0hyv-bwo3wjkgrjznwsu.png" alt="Bild"><br><br>  Dieses Bild zeigt deutlich, unter welchen Bedingungen die Anwendung bleiben kann und wie sie von einer zur anderen gelangt. <br><br>  Au√üerdem haben sich Apple-Entwickler in dieser Sitzung auf den Ressourcenverbrauch konzentriert (ich hoffe, es ist ziemlich offensichtlich, dass die Anwendung bei der Arbeit im Hintergrund weiterhin Energie verbraucht).  Es ist jedoch Zeit, direkt zum Bericht zu gehen. <br><br><h4>  Was ist bei WWDC passiert? </h4><br>  Tats√§chlich begannen die Redner mit der gleichen Sache wie ich - sprachen kurz √ºber die Arbeit im Hintergrund und beschrieben die Aufgaben, die dort ausgef√ºhrt werden w√ºrden. <br><br><img src="https://habrastorage.org/webt/o-/s7/v8/o-s7v8ntucfmwwnfonknzwbpt8a.png" alt="Bild"><br><br>  Wir n√§hern uns der Entwicklung.  Es gibt drei Haupt√ºberlegungen f√ºr Apple, wenn es um die Hintergrundleistung geht: <br><br><ul><li>  Macht </li><li>  Leistung </li><li>  Vertraulichkeit </li></ul><br>  Alles ist ganz einfach: Wenn eine Anwendungsaufgabe im Hintergrund ausgef√ºhrt wird, kann diese Ausf√ºhrung erfolgen, w√§hrend eine andere Anwendung im Vordergrund ausgef√ºhrt wird.  Daher gibt es ein Ressourcenlimit f√ºr Sie, um sicherzustellen, dass die Ressourcen nicht √ºberlastet werden.  Wenn diese Grenzwerte √ºberschritten werden, wird Ihre Anwendung m√∂glicherweise von Apple zwangsweise beendet, was die weitere Startzeit verlangsamt.  In Bezug auf den Datenschutz empfiehlt das Unternehmen Entwicklern dringend, alle Funktionen ihrer API zu verwenden, um den Benutzer dar√ºber zu informieren, welche Daten die Anwendung f√ºr ihre Arbeit verwendet (auch im Hintergrund). <br><br>  Die Liste dieser APIs war √ºbrigens ziemlich beeindruckend - sie haben keine separate √úberpr√ºfung durchgef√ºhrt, aber ich rate Ihnen, darauf zu achten. <br><br>  Ja, und auf der Sitzung selbst zeigten Apple-Entwickler anhand des Messenger-Anwendungsbeispiels einen kurzen √úberblick √ºber die M√∂glichkeiten (es lohnt sich, ein Video von WWDC anzusehen). <br><br><h4>  Hintergrundaufgaben </h4><br>  Fast die H√§lfte des diesj√§hrigen Berichts ist diesem Rahmen gewidmet. <br><br>  2 Arten von Aufgaben, die diese Neuheit bietet: <br><br><ul><li>  App-Aktualisierungsaufgabe </li><li>  Hintergrundverarbeitungsaufgabe </li></ul><br><h4>  App-Aktualisierungsaufgabe </h4><br>  Die BG App Refresh Task ist eine spezielle Art von Hintergrundaufgabe, mit der wir Anwendungsdaten aktualisieren k√∂nnen.  Eine Sache, die diese Art von Aufgabe besonders macht, ist das Benutzerverhalten.  iOS erf√§hrt, wie oft und zu welcher Zeit der Benutzer Ihre Anwendung startet, und versucht, BGAppRefreshTask zu einem Zeitpunkt zu starten, an dem es unwahrscheinlich ist, dass der Benutzer die Anwendung verwendet. <br><br><img src="https://habrastorage.org/webt/ic/6b/9e/ic6b9e126kh0p3ygesscusklvlo.png" alt="Bild"><br><br>  Ja, es wird nicht l√§nger als 30 Sekunden funktionieren - die Funktion ist sehr unangenehm und bleibt von fr√ºheren Versionen des Betriebssystems √ºbrig. <br><br>  Betrachten Sie ein Beispiel f√ºr Code aus dem Internet. <br><br><pre><code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UIKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> BackgroundTasks @UIApplicationMain class AppDelegate: UIResponder, UIApplicationDelegate { func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool { BGTaskScheduler.shared.register( forTaskWithIdentifier: "pl.snowdog.example.refresh", using: DispatchQueue.global() ) { task in self.handleAppRefresh(task) } return true } private func handleAppRefresh(_ task: BGTask) { let queue = OperationQueue() queue.maxConcurrentOperationCount = 1 let appRefreshOperation = AppRefreshOperation() queue.addOperation(appRefreshOperation) task.expirationHandler = { queue.cancelAllOperations() } let lastOperation = queue.operations.last lastOperation?.completionBlock = { task.setTaskCompleted(success: !(lastOperation?.isCancelled ?? false)) } scheduleAppRefresh() } }</code> </pre> <br>  Es gibt mehrere Punkte, die Sie stoppen und besser ber√ºcksichtigen m√ºssen: <br><br><ul><li>  Installieren Sie den Ablaufhandler auf dem Taskobjekt (expirationHandler), da das System nur eine begrenzte Zeit zum Abschlie√üen der Arbeit zur Verf√ºgung stellt. Wenn diese √ºberschritten wird, m√ºssen Sie die Ressourcen l√∂schen. </li><li>  Stellen Sie sicher, dass die Methode setTaskCompleted aufgerufen wurde, sobald der Vorgang abgeschlossen ist. </li><li>  BGTaskScheduler ist die Hauptklasse, mit der Hintergrundarbeiten geplant werden. </li></ul><br><h4>  Hintergrundverarbeitungsaufgabe </h4><br>  Eine andere Art von Hintergrund-Hack ist die BG-Verarbeitungsaufgabe.  Sie k√∂nnen es verwenden, um das ML-Modell auf dem Ger√§t zu trainieren oder eine Bereinigung in der Datenbank durchzuf√ºhren.  Apple verspricht, dass das System bis zu mehreren Minuten Zeit f√ºr diese Art von Aufgabe einplanen kann. Dies ist eine sehr wichtige Neuerung f√ºr schwere Arbeiten, die nicht in miserable 30 Sekunden passen. <br><br>  Wieder ein Beispiel: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UIKit <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> BackgroundTasks @UIApplicationMain class AppDelegate: UIResponder, UIApplicationDelegate { func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool { BGTaskScheduler.shared.register( forTaskWithIdentifier: "pl.snowdog.example.train", using: DispatchQueue.global() ) { task in self.handleMLTrain(task) } return true } private func scheduleMLTrain() { do { let request = BGProcessingTaskRequest(identifier: "pl.snowdog.example.train") request.requiresExternalPower = true request.requiresNetworkConnectivity = true try BGTaskScheduler.shared.submit(request) } catch { print(error) } } }</code> </pre> <br>  Wichtige Punkte: <br><br><ul><li>  RequiesExternalPower ist ein boolescher Wert, der angibt, ob ein an eine Stromquelle angeschlossenes Ger√§t f√ºr eine Verarbeitungsaufgabe erforderlich ist. </li><li>  requireNetworkConnectivity - Ein boolescher Wert, der angibt, ob f√ºr eine Verarbeitungsaufgabe eine Netzwerkverbindung erforderlich ist. </li></ul><br><h4>  Debuggen </h4><br>  Auch hier ist nicht ohne Ausstattung.  Die Verz√∂gerung zwischen der geplanten Ausf√ºhrungszeit der Hintergrundaufgabe und dem Zeitpunkt, zu dem das System die Anwendung startet, um sie abzuschlie√üen, kann mehrere Stunden betragen.  Bei der Entwicklung einer Anwendung k√∂nnen Sie zwei private Funktionen verwenden, um eine Aufgabe zu starten und ihre vorzeitige Fertigstellung gem√§√ü der ausgew√§hlten Zeitachse zu erzwingen.  Debugging-Funktionen funktionieren nur auf Ger√§ten. <br><br><ul><li>  Aufgabenstart: <br><br><pre> <code class="plaintext hljs">e -l objc -- (void)[[BGTaskScheduler sharedScheduler] _simulateLaunchForTaskWithIdentifier:@"TASK_IDENTIFIER"]</code> </pre> </li><li>  Erzwungene vorzeitige Beendigung des Auftrags: <br><br><pre> <code class="plaintext hljs">e -l objc -- (void)[[BGTaskScheduler sharedScheduler] _simulateExpirationForTaskWithIdentifier:@"TASK_IDENTIFIER"]</code> </pre> </li></ul><br><h4>  Abschlie√üend </h4><br>  BackgroundTasks ist eine gro√üartige M√∂glichkeit, Ihre harte Arbeit mit der besten Benutzererfahrung in Ihrer Umgebung zu planen.  Da seit der 13. Version des Systems viele Methoden zum Arbeiten im Hintergrund veraltet sind, wird das Framework in Anwendungen immer noch sehr beliebt sein.  Angesichts der oben genannten M√∂glichkeiten ist dies ziemlich logisch. <br><br>  Ich empfehle auch, ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Video von WWDC</a> anzuschauen. Die dort beschriebenen Beispiele sind sehr interessant. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466857/">https://habr.com/ru/post/de466857/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466841/index.html">Warum ein Heizkissen, wenn es einen Laptop gibt: die Untersuchung des W√§rmewiderstands auf atomarer Ebene</a></li>
<li><a href="../de466845/index.html">Umgekehrtes Interview: Welche Fragen sollten Sie dem Unternehmen stellen?</a></li>
<li><a href="../de466849/index.html">noexcept-ctcheck oder ein paar einfache Makros, die dem Compiler helfen, noexcept-Code zu schreiben</a></li>
<li><a href="../de466851/index.html">Agilex-Linie - 10 nm Intel FPGA</a></li>
<li><a href="../de466855/index.html">Turmverteidigung in Einheit schaffen: Szenarien und Wellen der Feinde</a></li>
<li><a href="../de466859/index.html">Verwenden des AD Federation Service zum Autorisieren von AWS-Benutzern mit Verteilung von Rechten</a></li>
<li><a href="../de466861/index.html">Wie man mit einem Hackathon der Realit√§t entkommt</a></li>
<li><a href="../de466863/index.html">Asymptote einrichten</a></li>
<li><a href="../de466865/index.html">Warten auf den ersten November: Verbot oder Legalisierung von Kryptow√§hrungen</a></li>
<li><a href="../de466873/index.html">5 Dinge, die JavaScript am meisten nicht versteht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>