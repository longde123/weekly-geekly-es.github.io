<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵🏼 👩🏼‍🚀 👎🏻 Pourquoi faisons-nous Enterprise Service Mesh? 🤔 🛫 🕙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Service Mesh est un modèle architectural bien connu pour intégrer des microservices et passer à l'infrastructure cloud. Aujourd'hui, dans le monde des...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pourquoi faisons-nous Enterprise Service Mesh?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/456136/">  Service Mesh est un modèle architectural bien connu pour intégrer des microservices et passer à l'infrastructure cloud.  Aujourd'hui, dans le monde des conteneurs cloud, il est assez difficile de s'en passer.  Plusieurs implémentations de maillage de services open source sont déjà disponibles sur le marché, mais leur fonctionnalité, leur fiabilité et leur sécurité sont loin d'être toujours suffisantes, en particulier en ce qui concerne les exigences des grandes sociétés financières à travers le pays.  Par conséquent, chez Sbertech, nous avons décidé de personnaliser Service Mesh et voulons parler de ce qui est cool dans Service Mesh, de ce qui n'est pas très et de ce que nous allons en faire. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/610/635/fbf/610635fbfe1b4214c5598679e06bf4aa.png"><br><a name="habracut"></a><br>  La popularité du modèle Service Mesh augmente avec la popularité de la technologie cloud.  Il s'agit d'une couche d'infrastructure dédiée qui simplifie l'interaction entre les différents services réseau.  Les applications cloud modernes se composent de centaines, voire de milliers de ces services, chacun pouvant avoir des milliers de copies. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/394/a6f/ca9/394a6fca966e4ef70ad205c6eb79af34.png"><br><br>  L'interaction entre ces services et leur gestion est une tâche clé de Service Mesh.  En fait, il s'agit d'un modèle de réseau à partir d'une variété de procurations, géré de manière centralisée et exécutant un ensemble de fonctions très utiles. <br><br>  <i>Au niveau du proxy (plan de données):</i> <br><br><ul><li>  Attribuer et distribuer des politiques de routage et d'équilibrage du trafic <br></li><li>  Distribution de clés, certificats, jetons <br></li><li>  Collecte de télémétrie, formation de métriques de surveillance <br></li><li>  Intégration avec l'infrastructure de sécurité et de surveillance <br></li></ul><br>  <i>Au niveau du plan de contrôle:</i> <br><br><ul><li>  Appliquer des politiques de routage et d'équilibrage du trafic <br></li><li>  Gestion des relances et des timeouts, définition des nœuds «morts» (coupure de circuits), gestion des situations défaillantes (injection de défauts) et maintien de la résilience des services à travers d'autres mécanismes <br></li><li>  Authentification / autorisation d'appel <br></li><li>  Jeter les métriques (observabilité) <br></li></ul><br>  Le cercle des utilisateurs intéressés par le développement de cette technologie est très large - des petites startups aux grandes sociétés Internet, par exemple PayPal. <br><br><h2>  À quoi sert Service Mesh dans le secteur des entreprises? </h2><br>  L'utilisation de Service Mesh présente de nombreux avantages évidents.  Tout d'abord, c'est juste pratique pour les développeurs: <i>une plate-forme technologique apparaît</i> pour écrire du code qui simplifie considérablement l'intégration dans l'infrastructure cloud du fait que la couche de transport est complètement isolée de la logique d'application. <br><br>  De plus, <i>Service Mesh simplifie la relation entre fournisseurs et consommateurs.</i>  Aujourd'hui, il est beaucoup plus facile pour les fournisseurs et les consommateurs de l'API de se mettre d'accord sur des interfaces et des contrats par eux-mêmes, sans impliquer un intermédiaire d'intégration spécial et un arbitre pour cela - un bus de services d'entreprise.  Cette approche affecte de manière significative deux indicateurs.  La vitesse de mise sur le marché de nouvelles fonctionnalités (time-to-market) augmente, mais en même temps le coût de la solution augmente, car l'intégration doit se faire de manière indépendante.  L'utilisation de Service Mesh par les équipes de développement commercial permet de maintenir l'équilibre ici.  En conséquence, les fournisseurs d'API peuvent se concentrer exclusivement sur le composant d'application de leur service et le publier simplement dans le maillage de service - l'API deviendra immédiatement disponible pour tous les clients, et la qualité d'intégration sera prête pour la production et ne nécessitera pas une seule ligne de code supplémentaire. <br><br>  Un autre avantage est que le <i>développeur, en utilisant le Service Mesh, se concentre uniquement sur les fonctionnalités de l'entreprise</i> - sur le produit, et non sur la composante technologique de son service.  Par exemple, vous n'avez pas à penser au fait que dans une situation où le service sera appelé sur le réseau, quelque part la connexion peut se rompre.  En outre, Service Mesh permet d'équilibrer le trafic entre les copies du même service: si l'une des copies «meurt», le système bascule tout le trafic vers les copies actives restantes. <br><br>  <i>Service Mesh</i> est <i>une bonne base pour créer des applications distribuées</i> , qui cache au client les détails de la fourniture d'appels à ses services à la fois en interne et en externe.  Toutes les applications qui utilisent Service Mesh sont isolées sur la couche transport à la fois du réseau et les unes des autres: il n'y a pas de connexion entre elles.  Dans ce cas, le développeur obtient un contrôle total sur leurs services. <br><br>  Il convient de noter que la <i>mise à jour des applications distribuées dans un environnement où Service Mesh est utilisé devient de plus en plus facile.</i>  Par exemple, le déploiement bleu / vert, dans lequel deux environnements d'application sont disponibles pour l'installation, dont l'un n'est pas mis à jour et est en mode veille.  La restauration de la version précédente en cas d'échec de la libération est effectuée par un routeur spécial, dont le rôle est parfaitement pris en charge par Service Mesh <i>.</i>  Vous pouvez utiliser la <i>version Canary</i> pour exécuter dans la nouvelle version - basculez seulement 10% du trafic ou des demandes du groupe de clients pilotes vers la nouvelle version.  Le trafic principal passe à l'ancienne version, rien ne casse. <br><br>  <i>Service Mesh nous donne également un contrôle SLA en temps réel</i> .  Le système de procurations distribuées ne permettra pas d'inonder le service lorsqu'un des clients dépasse le quota qui lui est attribué.  Si la bande passante de l'API est limitée, personne ne pourra l'étrangler avec un grand nombre de transactions: le Service Mesh est en face du service et ne permet pas de trafic supplémentaire.  Il va tout simplement battre dans la couche d'intégration, et les services eux-mêmes continueront de fonctionner sans s'en rendre compte. <br><br>  Si l'entreprise souhaite réduire les coûts de développement de solutions d'intégration, Service Mesh aide également: <i>vous pouvez passer à sa version open-source à partir de produits commerciaux</i> .  Notre Enterprise Service Mesh est basé sur la version open source de Service Mesh. <br><br>  Un autre avantage est la <i>disponibilité d'un ensemble complet de services d'intégration</i> .  Étant donné que toute intégration est construite à travers cette couche intermédiaire, nous pouvons gérer tout le trafic d'intégration et les connexions entre les applications qui forment le cœur de métier de l'entreprise.  C'est très pratique. <br><br>  Enfin, <i>Service Mesh conduit l'entreprise à passer à une infrastructure dynamique.</i>  Maintenant, beaucoup se tournent vers la conteneurisation.  Scier un monolithe en microservices, c'est beau de tout mettre en œuvre - le sujet est à la hausse.  Mais lorsque vous essayez de transférer sur une nouvelle piste un système qui est en production depuis de nombreuses années, vous rencontrez immédiatement un certain nombre de problèmes: tout mettre dans des conteneurs et le déployer sur la plate-forme n'est pas facile.  Et l'implémentation, la synchronisation et l'interaction de ces composants distribués est un autre sujet difficile.  Comment vont-ils communiquer entre eux?  Y aura-t-il des échecs en cascade?  Service Mesh vous permet de résoudre certains de ces problèmes et de faciliter la migration de l'ancienne architecture vers la nouvelle, car vous pouvez oublier la logique de l'échange réseau. <br><br><h2>  Pourquoi personnaliser le maillage de service </h2><br>  Dans notre entreprise, des centaines de systèmes et de modules coexistent et le temps d'exécution est très chargé.  Ainsi, un schéma simple, lorsqu'un système en appelle un autre et reçoit une réponse, ne suffit pas, car en production, nous en voulons plus.  De quoi avez-vous besoin de plus d'un maillage de service d'entreprise? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ca4/0e3/e24/ca40e3e2437875712025691aa5c340e3.png"><br><br><h3>  Service de traitement d'événements </h3><br>  Imaginez que nous devons faire un traitement d'événement en temps réel - un système qui analyse en temps réel les actions du client et peut immédiatement lui faire une offre pertinente.  Pour implémenter cette fonctionnalité, un <i>modèle architectural appelé architecture événementielle (EDA) est utilisé</i> .  Aucun des services Mesh concernés ne prend en charge de tels modèles de manière native, mais cela est très important, en particulier pour la banque! <br><br>  Il est étrange que l'appel de procédure distante (RPC) prenne en charge toutes les versions du Service Mesh, et ils ne sont pas amis avec EDA.  Parce que Service Mesh est un semblant d'intégration distribuée moderne, et EDA est un modèle architectural très pertinent qui vous permet de faire des choses uniques en termes d'expérience client. <br><br>  Notre Enterprise Service Mesh devrait résoudre ce problème.  De plus, nous voulons y voir la mise en œuvre de la livraison garantie, du streaming et du traitement d'événements intégré à l'aide d'une variété de filtres et de modèles. <br><br><h3>  Service de transfert de fichiers </h3><br>  En plus d'EDA, ce serait bien de pouvoir transférer des fichiers: à l'échelle de l'entreprise, très souvent seule l'intégration de fichiers est possible.  En particulier, le modèle architectural ETL est utilisé (Extraire, Transformer, Charger - «extraire, transformer, charger»).  Dans ce document, en règle générale, tout le monde échange des fichiers exclusivement: ils utilisent des données volumineuses, ce qui n'est pas pratique pour insérer des demandes distinctes.  La possibilité de prendre en charge nativement les transferts de fichiers dans l'Enterprise Service Mesh offre la flexibilité dont les besoins métier. <br><br><h3>  Service d'orchestration </h3><br>  Dans les grandes organisations, il y a presque toujours des équipes différentes qui fabriquent des produits différents.  Par exemple, dans une banque, certaines équipes travaillent avec des dépôts, tandis que d'autres travaillent avec des produits de crédit, et il y a beaucoup de tels cas.  Ce sont des personnes différentes, des équipes différentes qui fabriquent leurs produits, développent leurs API et les fournissent à d'autres.  Et très souvent il y a un besoin pour la composition de ces services, ainsi que la mise en œuvre de la logique complexe de l'appel séquentiel de l'ensemble d'API.  Pour résoudre ce problème, une solution est nécessaire dans la couche d'intégration, ce qui simplifiera toute cette logique composite (appel de plusieurs API, décrivant le chemin des requêtes, etc.).  Il s'agit du service d'orchestration dans l'Enterprise Service Mesh. <br><br><h3>  AI et ML </h3><br>  Lorsque les microservices communiquent via une seule couche d'intégration, Service Mesh, bien sûr, sait tout sur les appels de chaque service.  Nous collectons la télémétrie: qui a appelé qui, quand, combien de temps, combien de fois, etc.  Lorsqu'il existe des centaines de milliers de ces services et des milliards d'appels, tout cela s'accumule et forme des Big Data.  Ces données peuvent être analysées à l'aide de l'IA, de l'apprentissage automatique, etc., puis effectuer des tâches utiles en fonction des résultats de l'analyse.  Il conviendrait de transférer au moins partiellement à l'intelligence artificielle la gestion de tout ce trafic réseau et appels applicatifs intégrés au Service Mesh. <br><br><h3>  Service de passerelle API </h3><br>  En règle générale, Service Mesh dispose de serveurs proxy et de services qui s’accèdent mutuellement à l’intérieur du périmètre de confiance.  Mais il existe également des contreparties externes.  Les exigences API pour ce groupe de consommateurs sont beaucoup plus sérieuses.  Nous divisons cette tâche en deux parties principales. <br><br><ul><li>  <i>La sécurité</i>  Problèmes liés aux ddos, vulnérabilité des protocoles, applications, systèmes d'exploitation, etc. <br></li><li>  <i>L'échelle</i> .  Lorsque la facture d'API qui doit être remise aux clients atteint des milliers voire des centaines de milliers, il existe un besoin pour certains moyens de gérer cet ensemble d'API.  Vous devez surveiller en permanence l'API: fonctionnent-elles ou non, dans quel état, quel trafic est en cours, quelles statistiques, etc.  La passerelle API doit gérer cette tâche, ce qui rend l'ensemble du processus gérable et sécurisé.  Grâce à ce composant, l'Enterprise Service Mesh apprend à publier les API internes et externes sans trop de difficulté. <br></li></ul><br><h3>  Service d'assistance pour des protocoles et formats de données spécifiques (passerelle AS) </h3><br>  Actuellement, la plupart des solutions Service Mesh ne peuvent fonctionner en mode natif qu'avec le trafic HTTP et HTTP2 ou en mode tronqué au niveau TCP / IP.  Enterprise Service Mesh possède de nombreux autres protocoles de transfert de données très spécifiques.  Certains systèmes peuvent utiliser des courtiers de messages, d'autres sont intégrés au niveau de la base de données.  Si l'entreprise possède SAP, elle peut également utiliser son propre système d'intégration.  Et tout cela fonctionne et constitue une partie importante de l'entreprise. <br><br>  Vous ne pouvez pas simplement dire: "Abandonnons l'héritage et créons de nouveaux systèmes qui peuvent utiliser le maillage de service."  Pour se faire des amis de tous les anciens systèmes avec de nouveaux (sur l'architecture de microservice), les systèmes qui peuvent utiliser Service Mesh auront besoin d'une sorte d'adaptateur, d'intermédiaire et de passerelle.  D'accord, ce serait bien s'il était livré dans une boîte avec le service.  La passerelle AS peut prendre en charge n'importe quelle option d'intégration.  Imaginez, vous installez simplement l'Enterprise Service Mesh, et il est prêt à interagir avec tous les protocoles dont vous avez besoin.  Pour nous, cette approche est très importante. <br><br>  <i>C'est ainsi que nous présentons la version d'entreprise de Service Mesh (Enterprise Service Mesh).</i>  <i>La personnalisation décrite résout la plupart des problèmes qui se posent lorsque vous essayez d'utiliser des versions open source prêtes à l'emploi de la plate-forme d'intégration.</i>  <i>Apparue il y a quelques années à peine, l'architecture Service Mesh continue d'évoluer et nous sommes heureux de pouvoir contribuer à son développement.</i>  <i>Nous espérons que notre expérience vous sera utile.</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456136/">https://habr.com/ru/post/fr456136/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456126/index.html">Comptez une tonne d'argent et faites de l'exploration dans la mine: comment les robots ont déjà trouvé une place parmi nous</a></li>
<li><a href="../fr456128/index.html">MBLT19 :: retour</a></li>
<li><a href="../fr456130/index.html">Comment résoudre les problèmes NP-hard en utilisant des algorithmes paramétrés</a></li>
<li><a href="../fr456132/index.html">À propos de l'enregistrement de bogues ou de la recherche d'un chat</a></li>
<li><a href="../fr456134/index.html">Faites confiance mais vérifiez! Comment tester votre modèle à l'aide du cloud IBM (Watson OpenScale)</a></li>
<li><a href="../fr456140/index.html">Découvrez Codeception 3.0</a></li>
<li><a href="../fr456144/index.html">KubeCon EU 2019: 10 résultats clés</a></li>
<li><a href="../fr456146/index.html">DevOps en développement: automatisation du code d'application web</a></li>
<li><a href="../fr456148/index.html">News de la semaine: Facebook refuse Huawei dans les applications, Aurora OS au lieu d'Android, sanctions minières</a></li>
<li><a href="../fr456150/index.html">Petite petite joie # 4: Radon - la qualité du code mesurée en chiffres</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>