<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ปโโ๏ธ ๐ฉ๐ปโ๐ณ ๐ฉโ๐ผ ุงูุฃูุบุงู ุชุญุช ุงูุฃุฏุงุก ููุชุธุฑูู ูู ุงูุฃุฌูุญุฉ ๐ฅ ๐ฟ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุณูู ุฃุชุญุฏุซ ูู ูุฐู ุงูููุงูุฉ ุนู ุงูุฃูุบุงู ุงููุฒุฑูุนุฉ ุชุญุช ุงูุฃุฏุงุก ุ ููุฐูู ุนู ุงูุชุดุงููุง (ูููุถู ุญุชู ูุจู ุงูุงููุฌุงุฑ) ูุฅุฒุงูุชูุง. 
 ุตูุฑุฉ ูุฌุฐุจ ุงูุงูุชุจุงู 


 ูุง ูู ููุ 


 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุฃูุบุงู ุชุญุช ุงูุฃุฏุงุก ููุชุธุฑูู ูู ุงูุฃุฌูุญุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443206/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุณูู ุฃุชุญุฏุซ ูู ูุฐู ุงูููุงูุฉ ุนู ุงูุฃูุบุงู ุงููุฒุฑูุนุฉ ุชุญุช ุงูุฃุฏุงุก ุ ููุฐูู ุนู ุงูุชุดุงููุง (ูููุถู ุญุชู ูุจู ุงูุงููุฌุงุฑ) ูุฅุฒุงูุชูุง. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุตูุฑุฉ ูุฌุฐุจ ุงูุงูุชุจุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://ic.pics.livejournal.com/ivagkin/26880913/58954/58954_original.jpg" alt="ุงูุตูุฑุฉ"></p></div></div><a name="habracut"></a><br><h4 id="chto-takoe-mina" style=";text-align:right;direction:rtl">  ูุง ูู ููุ </h4><br><p style=";text-align:right;direction:rtl">  ููุจุฏุฃ ุจูุง ูููู ูู ุฃุตูู ุฃู ูุนุฑูุฉ - ุจุงูุชุนุฑูู.  ูุงู ุงููุฏูุงุก ุฅู ุงูุชุณููุฉ ุจุดูู ุตุญูุญ ุชุนูู ุงูููู ุจุดูู ุตุญูุญ.  ุฃุนุชูุฏ ุฃูู ูู ุงูุฃูุถู ุงูุชุนุจูุฑ ุนู ุชุนุฑูู ุงูููุฌู ููุฏ ุงูุฃุฏุงุก ูู ุฎูุงู ููุงุฑูุชู ุจุฎุทุฃ ูุงุถุญ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"><code class="java hljs"><span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">concat</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String... strings)</span></span></span><span class="hljs-function"> </span></span>{ String result = <span class="hljs-string"><span class="hljs-string">""</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (String str : strings) { result += str; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏุฑู ุญุชู ุงููุทูุฑูู ุงููุจุชุฏุฆูู ุฃู ุงูุฎุทูุท ุบูุฑ ูุงุจูุฉ ููุชุบููุฑ ุ ูุฃู ูุตููุง ูุนูุง ูู ุญููุฉ ูุง ูุนูู ุฅุถุงูุฉ ุจูุงูุงุช ุฅูู ุฐูู ุณุทุฑ ููุฌูุฏ ุ ูููู ุฅูุดุงุก ุณุทุฑ <strong>ุฌุฏูุฏ</strong> ูุน ูู ูุฑูุฑ.  ุฅุฐุง ููุช ูุฎุทุฆูุง ุ ูุนูุฏุฆุฐ ูุง ุชุญุจุท - ูุฅู "ุงูููุฑุฉ" ุณุชุญุฐุฑู ููุฑูุง ูู ุงูุฎุทุฑ ุ ูุณูุบูุฑ "ุงูุณููุงุฑ" ุงูุชุฌูุน ุงูุฎุงุต ุจู ุจุงูุชุฃููุฏ. </p><br><p style=";text-align:right;direction:rtl">  ููู ูุฐุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุฏ</a> ุณูู ูุฌุฐุจ ุงูุชุจุงููุง ุฃูู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุชุธู</a> ุงูููุฑุฉ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุจู ุงูุฅุตุฏุงุฑ 2018.2</a> ) ุตุงูุชุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Long total = <span class="hljs-number"><span class="hljs-number">0L</span></span>; List&lt;Long&gt; totals = query.getResultList(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (Long element : totals) { total += element == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? <span class="hljs-number"><span class="hljs-number">0</span></span> : element; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููุดููุฉ ููุง ูู ููุณูุง: ูุบููุงุช ุงูุฃููุงุน ุงูุจุณูุทุฉ ุบูุฑ ูุงุจูุฉ ููุชุบููุฑ ุ ููุง ูุนูู ุฅุถุงูุฉ 5 ูุญุฏุงุช ุฅูู ุฑูู ุงููุงุฆู ูุนูู ุฅูุดุงุก ุบูุงู ุฌุฏูุฏ ููุชุงุจุฉ ุงูุฑูู 6 ููู. </p><br><p style=";text-align:right;direction:rtl">  ุงูููุชุฉ ููุง ูู ูุฌูุฏ ูู Java ุชูุซููุงู ูุฃููุงุน ูุนููุฉ ูู ุงูุจูุงูุงุช - ุจุณูุทุฉ ูููุชุนุฉ ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุชุญููู ุงูุชููุงุฆู ุจูุงุณุทุฉ ุงููุบุฉ ููุณูุง.  ูููุฐุง ุงูุณุจุจ ุ ูุนุชูุฏ ุงูุนุฏูุฏ ูู ูุทูุฑู ุงููุจุชุฏุฆูู ุดูุฆูุง ูู ูุฐุง ุงููุจูู: "ุญุณููุง ุ ุงูุชูููุฐ ูุญูููู ุจุทุฑููุฉ ูุง ุฅูู ููุงู ุจููุฑุฏู ุ ุฅูู ูุฌุฑุฏ ุฑูู." </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ููุณ ูู ุดูุก ูู ุบุงูุฉ ุงูุจุณุงุทุฉ.  ุฎุฐ <a href="">ุงููุนูุงุฑ</a> ูุญุงูู ุฅุถุงูุฉ ุงูุฃุฑูุงู ุจุงูุทุฑููุฉ ุงููุญุฏุฏุฉ: </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฌุฃุฉ ุ ุชู ุฅุตุฏุงุฑู ุจุณุนุฑ ุฑุฎูุต ุฌุฏูุง (ูุดุงุฑ ุฅููู ูููุง ููู ุจู JDK 11 ุ ูุง ูู ููุต ุตุฑุงุญุฉ ุนูู ุฎูุงู ุฐูู)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> (size) Mode Cnt Score Error Units wrapper 10 avgt 100 23,5 ยฑ 0,1 ns/op wrapper 100 avgt 100 352,3 ยฑ 2,1 ns/op wrapper 1000 avgt 100 4424,5 ยฑ 25,2 ns/op wrapper 10 avgt 100 0 ยฑ 0 B/op wrapper 100 avgt 100 1872 ยฑ 0 B/op wrapper 1000 avgt 100 23472 ยฑ 0 B/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงุฑู ูุน ููุน ุจุณูุท: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">primitive 10 avgt 100 6,4 ยฑ 0,0 ns/op primitive 100 avgt 100 39,8 ยฑ 0,1 ns/op primitive 1000 avgt 100 252,5 ยฑ 1,3 ns/op primitive 10 avgt 100 0 ยฑ 0 B/op primitive 100 avgt 100 0 ยฑ 0 B/op primitive 1000 avgt 100 0 ยฑ 0 B/op</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูู ููุง ูุดุชู ุฃุญุฏ ุชุนุฑููุงุช ุงูุฃูุบุงู ุชุญุช ุงูุฃุฏุงุก - ูุฐุง ุงูููุฏ ุงูุฐู ูุง ูููุช ุงููุธุฑ ุ ูุง ูุชู ุงูุชุดุงูู (ุนูู ุงูุฃูู ูู ุงูููุช ุงูุฐู ุตุงุฏูุชู) ูู ูุจู ุงููุญูููู ุงูุงุณุชุงุชููููู ุ ููู ูููู ุฃู ูุชุจุงุทุฃ ูู ุจุนุถ ุงูุงุณุชุฎุฏุงูุงุช.  ูู ุญุงูุชูุง ุ ุจูููุง ูุง ูุชุฌุงูุฒ ุงููุฌููุน 127 ูุงุฆููุง ูุฃุฎูุฐุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ู <code>Long</code> ุฃุจุทุฃ ูู 4 ูุฑุงุช ููุท.  ููุน ุฐูู ุ ุจุงููุณุจุฉ ููุฌููุนุฉ ูู ุงูุญุฌู 100 ุ ุชููู ุงูุณุฑุนุฉ ุฃูู 10 ูุฑุงุช ุชูุฑูุจูุง. </p><br><h4 id="bolshie-melochi" style=";text-align:right;direction:rtl">  ุฃุดูุงุก ุตุบูุฑุฉ ูุจูุฑุฉ </h4><br><p style=";text-align:right;direction:rtl">  ูู ุจุนุถ ุงูุฃุญูุงู ูุตุจุญ ุงูุชุบููุฑ ุงูุจุณูุท ุ ุงูุฐู ูุง ูุบูุฑ ูุนูู ุงูุชูููุฐ ุชูุฑูุจูุง ุ ูู <em>ุจุนุถ</em> ุงูุญุงูุงุช ุงููุฑุงูู ุงููููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูููุชุฑุถ ุฃู ูุฏููุง ุฑูุฒ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// org.springframework.data.convert.CustomConversions$ConversionTargetsCache Map&lt;Object, TypeInformation&lt;?&gt;&gt; cache = new ConcurrentHashMap&lt;&gt;(); private TypeInformation&lt;?&gt; getFromCacheOrCreate(Alias alias) { TypeInformation&lt;?&gt; info = cache.get(alias); if (info == null) { info = getAlias.apply(alias); cache.put(alias, info); } return info; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ููู ูุจุฏู ููุทู ุงูุฃุณููุจุ </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุง ุชุชุณุฑุน ูู ุงูุชุฌุณุณ ุ ูุงูุชูููุฑ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฐุง ูู <code>ConcurrentHashMap::computeIfAbsent</code> ! </p></div></div><br><p style=";text-align:right;direction:rtl">  ูุฏููุง "ุซูุงููุฉ" ุ ููููููุง ุชุญุณูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุดูู ูุงุทุน: ุงุณุชุจุฏู 6 ุฃุณุทุฑ ุจูุงุญุฏ ุ ููุง ูุฌุนู ุงูููุฏ ุฃูุตุฑ ูุฃุณูู ููููู.  ุจุงูููุงุณุจุฉ ุ ูู ุงููุญุชูู ุฃู ูุดูุฑ ุฎุจุฑุงุก multithreading ุฅูู ุชุญุณู ุขุฎุฑ <code>ConcurrentHashMap::computeIfAbsent</code> ุ ูููู ุจุนุฏ ุฐูู ุจูููู ุ) </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูุฌุนู ููุฑุฉ ุฑุงุฆุนุฉ ุชุชุญูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// org.springframework.data.convert.CustomConversions$ConversionTargetsCache Map&lt;Object, TypeInformation&lt;?&gt;&gt; cache = new ConcurrentHashMap&lt;&gt;(); private TypeInformation&lt;?&gt; getFromCacheOrCreate(Alias alias) { return cache.computeIfAbsent(alias, getAlias); }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุฌูุน ุ ุจุฏุฃ ุ ุจูู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุดุงูุฏุฉ ุงูุญุฌู ุงููุงูู ุ ุงููุฑ ุจุฒุฑ ุงููุงูุณ ุงูุฃููู ุนูู ุงูุตูุฑุฉ ูุญุฏุฏ "ูุชุญ ุตูุฑุฉ ูู ุนูุงูุฉ ุชุจููุจ ุฌุฏูุฏุฉ" <br><img src="https://habrastorage.org/getpro/habr/post_images/9f0/2aa/0e0/9f02aa0e028903e85a63d08207d93509.png" alt="ุงูุตูุฑุฉ"></p></div></div><br><p style=";text-align:right;direction:rtl">  ุจูููุง ูุงู ุงูุชุทุจูู ูุนูู ูุน ููุถูุน ูุงุญุฏ ุ ูู ุดูุก ูุงู ุฃูุซุฑ ุฃู ุฃูู ุฌูุฏุฉ.  ุชูุงุฑุงุช ุฃุตุจุญุช ุฃูุซุฑ ูุฃุตุจุญุช ุฃุณูุฃ ุจูุซูุฑ.  <code>ConcurrentHashMap::computeIfAbsent</code> ุฃูู <code>ConcurrentHashMap::computeIfAbsent</code> ุญุธุฑ <code>ConcurrentHashMap::computeIfAbsent</code> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุชู ุฅุฐุง <strong>ุชูุช</strong> ุฅุถุงูุฉ ุงูููุชุงุญ <strong>ุจุงููุนู</strong> ุฅูู ุงููุงููุณ</a> .  ูุฃุตุจุญ ูุฐุง ูู ุงูุณุจุจ ูุฑุงุก ูุฌูุฏ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฎุทุฃ ูุจูุฑ</a> ูู Spring Date Mongo. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุงูุชุญูู ูู ุฐูู <a href="">ุจููุงุณ</a> ุจุณูุท ("ุซูุงููุฉ").  ุฅูููู ุงุณุชูุชุงุฌู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Benchmark Mode Cnt Score Error Units 1 thread computeIfAbsent avgt 20 19,405 ยฑ 0,411 ns/op getAndPut avgt 20 4,578 ยฑ 0,045 ns/op 2 threads computeIfAbsent avgt 20 66,492 ยฑ 2,036 ns/op getAndPut avgt 20 4,454 ยฑ 0,110 ns/op 4 threads computeIfAbsent avgt 20 155,975 ยฑ 8,850 ns/op getAndPut avgt 20 5,616 ยฑ 2,073 ns/op 6 threads computeIfAbsent avgt 20 203,188 ยฑ 10,547 ns/op getAndPut avgt 20 7,024 ยฑ 0,456 ns/op 8 threads computeIfAbsent avgt 20 302,036 ยฑ 31,702 ns/op getAndPut avgt 20 7,990 ยฑ 0,144 ns/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูููู ุงุนุชุจุงุฑ ูุฐุง ุฎุทุฃู ูุงุถุญูุง ูู ูุจู ุงููุทูุฑููุ  ูู ุฑุฃูู ุงููุชูุงุถุน ุ ูุง ุ ูุง.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู</a> ุชููู: </p><br><blockquote style=";text-align:right;direction:rtl">  ูุฏ ูุชู ุญุธุฑ ุจุนุถ ูุญุงููุงุช ุงูุชุญุฏูุซ ุนูู ูุฐู ุงูุฎุฑูุทุฉ ุจูุงุณุทุฉ ูุคุดุฑุงุช ุชุฑุงุจุท ุฃุฎุฑู ุฃุซูุงุก ุฅุฌุฑุงุก ุนูููุฉ ุงูุญุณุงุจ ุ ูุฐูู ูุฌุจ ุฃู ูููู ุงูุญุณุงุจ ูุตูุฑูุง ูุจุณูุทูุง ุ ููุฌุจ ุฃูุง ูุญุงูู ุชุญุฏูุซ ุฃู ุชุนูููุงุช ุฃุฎุฑู ููุฐู ุงูุฎุฑูุทุฉ. </blockquote><p style=";text-align:right;direction:rtl">  ุจูุนูู ุขุฎุฑ ุ ูููู <code>ConcurrentHashMap::computeIfAbsent</code> ุจุฅุบูุงู ุงูุฎููุฉ ุงูุชู ุชุญุชูู ุนูู ุงูููุชุงุญ ูู ุงูุนุงูู ุงูุฎุงุฑุฌู (ุนูู ุนูุณ <code>ConcurrentHashMap::get</code> ) ุ ููุฐุง ุตุญูุญ ุจุดูู ุนุงู ุ ูุฃูู ูุณูุญ ูู ุจุชูุงุฏู ุงูุณุจุงู ุฃุซูุงุก ุงุณุชุฏุนุงุก ุงูุฃุณููุจ ูู ูุคุดุฑุงุช <code>ConcurrentHashMap::computeIfAbsent</code> ูุฎุชููุฉ ุนูุฏูุง ูู ุชุชู ุฅุถุงูุฉ ุงูููุชุงุญ ุจุนุฏ. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูู ูุถุน ุงูุชุดุบูู ุงูุฃูุซุฑ ุดููุนูุง ุ ูุง ูุชู ุญุณุงุจ ุงููููุฉ ููุฏู ุฑุจุทูุง ุจุงูููุชุงุญ ุฅูุง ุนูุฏ ุงูููุงููุฉ ุงูุฃููู ุ ูุชุนูุฏ ุฌููุน ุงูููุงููุงุช ุงููุงุญูุฉ ุงููููุฉ ุงููุญุณูุจุฉ ูุณุจููุง ููุท.  ูุฐูู ุ ูู ุงูููุทูู ุชุบููุฑ ุงูููุทู ุจุญูุซ ูุชู ุถุจุท ุงูููู ููุท ุนูุฏ ุงูุชุบููุฑ.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชู ุตูุนู ููุง</a> . </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฃุญุฏุซ (&gt; 8) ุ ุฃุตุจุญ <code>ConcurrentHashMap::computeIfAbsent</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">JDK 11 Benchmark Mode Cnt Score Error Units 1 thread computeIfAbsent avgt 20 6,983 ยฑ 0,066 ns/op getAndPut avgt 20 5,291 ยฑ 1,220 ns/op 2 threads computeIfAbsent avgt 20 7,173 ยฑ 0,249 ns/op getAndPut avgt 20 5,118 ยฑ 0,395 ns/op 4 threads computeIfAbsent avgt 20 7,991 ยฑ 0,447 ns/op getAndPut avgt 20 5,270 ยฑ 0,366 ns/op 6 threads computeIfAbsent avgt 20 11,919 ยฑ 0,865 ns/op getAndPut avgt 20 7,249 ยฑ 0,199 ns/op 8 threads computeIfAbsent avgt 20 14,360 ยฑ 0,892 ns/op getAndPut avgt 20 8,511 ยฑ 0,229 ns/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุชุจู ุฅูู ุบุฏุงุฑุฉ ูุฐุง ุงููุซุงู: ุงููุญุชูู ุงูุฏูุงูู ูู ูุชุบูุฑ ูุซูุฑูุง ุ ูุฃูู ูู ุงููุธุฑุฉ ุงูุฃููู ุงุณุชุฎุฏููุง ุจูุงุก ุฌููุฉ ุฃูุซุฑ ุชูุฏููุง.  ูู ุงูููุช ููุณู ุ ุจูููุง ูุชู ุชุดุบูู ุงูุชุทุจูู ูู ููุถูุน ูุงุญุฏ ุ ูุง ูุดุนุฑ ุงููุณุชุฎุฏู ุจุงููุฑู ุชูุฑูุจูุง!  ูุฐู ูู ุงูุทุฑููุฉ ุงูุชู ุชุจุฏู ุบูุฑ ุถุงุฑุฉ ุงูุชุบููุฑุงุช <del>  ุงูุฎูุฒูุฑ </del>  ุงูุฃูุบุงู ุชุญุช ุฃุฏุงุฆูุง. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ููุงุฐุง ูุชุจุช "ุจุฏูู ุชุบููุฑ ุชูุฑูุจูุง"</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <code>ConcurrentHashMap::computeIfAbsent</code> ููุชุจุงุฏู ุฏุงุฆููุง ูุน ุชุนุจูุฑ <code>getAndPut</code> ุ ูุฃู <code>ConcurrentHashMap::computeIfAbsent</code> ูู ุนูููุฉ ุฐุฑูุฉ.  ูู ููุณ ุงูุฑูุฒ </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TypeInformation&lt;?&gt; getFromCacheOrCreate(Alias alias) { TypeInformation&lt;?&gt; info = cache.get(alias); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (info == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { info = getAlias.apply(alias); cache.put(alias, info); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> info; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุณุจุจ ุนุฏู ูุฌูุฏ ุงูุชุฒุงูู ุงูุฎุงุฑุฌู <strong>ุ ูุธูุฑ ุณุจุงู</strong> .  ุฅุฐุง ูุงูุช ุงูุฏุงูุฉ ุงูุชู ุชู ุชูุฑูุฑูุง ุฅูู <code>ConcurrentHashMap::computeIfAbsent</code> ุงููุญุฏุฏ ุชูุฑุฌุน ุฏุงุฆููุง ููุณ ุงููููุฉ ุ ููุฐุง ูุนุฏ ุณุจุงููุง "ุขูููุง" ุ ูุฃูุซุฑ ูุง ููุงุฌูู ูู ุญุณุงุจ ุงููููุฉ ููุณูุง 2 ูุฑุงุช ุฃู ุฃูุซุฑ.  ุฅุฐุง ูู ุชูู ููุงู ุถูุงูุงุช ูู ูุฐุง ุงููุจูู ุ ูุฅู ุงูุจุฏูู ุงููููุงูููู ูุญููู ุจุงูููุงุฑ ูู ุงูุชุทุจูู.  ูู ุญุฐุฑุง! </p></div></div><br><h4 id="eti-ruki-nichego-ne-menyali" style=";text-align:right;direction:rtl">  ูุฐู ุงูุฃูุฏู ูู ุชุบูุฑ ุฃู ุดูุก </h4><br><p style=";text-align:right;direction:rtl">  ูุญุฏุซ ุฃูุถูุง ุฃู ุงูููุฏ ูุง ูุชุบูุฑ ุนูู ุงูุฅุทูุงู ุ ูููู ูุฌุฃุฉ ูุจุฏุฃ ูู ุงูุชุจุงุทุค. </p><br><p style=";text-align:right;direction:rtl">  ุชุฎูู ุฃููุง ููุงุฌู ูููุฉ ุชุญููู ุนูุงุตุฑ ุงูุตููู ุฅูู ูุฌููุนุฉ.  ุงูุฃูุซุฑ ููุทููุฉ ูู ุงุณุชุฎุฏุงู <code>Collection::addAll</code> ุ ููู ุงูุญุธ ุงูุณูุฆ - ููู ููุจู ุงููุฌููุนุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Iterable</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? extends E&gt; c)</span></span></span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุณูู ุทุฑููุฉ ูู ุงูุชูุงู ุงูุตููู ูู <code>Arrays::asList</code> .  ุณูู ุชุชุญูู ุดูุก ูู ูุฐุง ุงููุจูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;T&gt; collection)</span></span></span><span class="hljs-function"> </span></span>{ T[] items = getArray(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> collection.addAll(Arrays.asList(items)); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃุซูุงุก ุงูุชุฏููู ุงููุบูู ุ ูู ุงููุญุชูู ุฃู ูุฎุจุฑูุง ุงูุฒููุงุก ุงููุงุนููู ุจุงูุฃุฏุงุก ุฃู ููุงู ูุดููุชูู ูู ูุฐุง ุงูููุฏ ูุฑุฉ ูุงุญุฏุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชูุงู ุตููู ูู ูุงุฆูุฉ (ูุงุฆู ุฅุถุงูู) </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููุฑุฑ (ูุงุฆู ุฅุถุงูู ุขุฎุฑ) ูููุฑ ุนุจุฑู </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุ ูู ุชูููุฐ ูุฑุฌุน <code>Collection::addAll</code> ุณูุฑู ูุฐุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractCollection</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Collection</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? extends E&gt; c)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> modified = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (E e : c) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (add(e)) modified = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> modified; } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฐูู ูุชู ุฅูุดุงุก ุงูุชูุฑุงุฑ ููุง ููุชู ูุฑุฒ ุงูุนูุงุตุฑ ุจุงุณุชุฎุฏุงูู.  ูุฐูู ุ ููุฏู ุงูุฑูุงู ุฐูู ุงูุฎุจุฑุฉ ุญููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;T&gt; collection)</span></span></span><span class="hljs-function"> </span></span>{ T[] items = getArray(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Collections.addAll(collection, items); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฏุงุฎู ุงูููุฏ ุ <em>ูุจุฏู</em> ุชูุงููุง ุฃูุซุฑ ุฅูุชุงุฌูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">super</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&gt; c, T... elements)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (T element : elements) result |= c.add(element); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูู ูุชู ุฅูุดุงุก ููุฑุฑ.  ุซุงููุงู ุ ููุฑ ุงูููุฑ ูู ุฏูุฑุฉ ุงูุนุฏ ุงููุนุชุงุฏุฉ ุ ุฅุถุงูุฉ ุฅูู ุฃู ุงููุตูููุงุช ุชุชูุงุกู ุฌูุฏูุง ูู ุฐุงูุฑุงุช ุงูุชุฎุฒูู ุงููุคูุช ุ ุญูุซ ุชูุฌุฏ ุนูุงุตุฑูุง ูู ุงูุฐุงูุฑุฉ ุจุงูุชุชุงุจุน (ููุง ูุนูู ุฃูู ุณูููู ููุงู ุนุฏุฏ ูููู ูู ุญุงูุงุช ููุฏุงู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช) ุ ูุงููุตูู ุฅูููุง ุนู ุทุฑูู ุงูููุฑุณ ุณุฑูุน ููุบุงูุฉ.  ุญุณูุง ุ ูุง ูุชู ุฅูุดุงุก ูุงุฆูุฉ ุงููุฌูุน ุณูุงุก.  ูุฐุง ูุจุฏู ุฌูุฏุง ูุณูููุง. </p><br><p style=";text-align:right;direction:rtl">  ุฃุฎูุฑูุง ุ ูุณุชุดูุฏ ุงูุฒููุงุก ุจู "ุงููุณุจุฉ ุงููุตูู": ุงููุซุงุฆู.  ูููุงู ุ ูููู ุงูููู ุงูุฑูุงุฏู ุจุงูููู ุงูุฃุจูุถ (ุฃู ุงูุฃุฎุถุฑ ุจุงูููู ุงูุฃุณูุฏ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** * ... * The behavior of this convenience method is identical to that of * c.addAll(Arrays.asList(elements)), but this method is likely * to run significantly faster under most implementations. &lt;---- * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@since</span></span></span><span class="hljs-comment"> 1.5 */</span></span> <span class="hljs-meta"><span class="hljs-meta">@SafeVarargs</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">super</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&gt; c, T... elements)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//... }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจูุนูู ุฃู ุงููุทูุฑูู ุฃููุณูู (ููู ุงูุฐู ููุจุบู ุนูููู ุชุตุฏููู ุ ุฅู ูู ููู ููุ) ุ ุงูุชุจ ุฃูู ุจุงููุณุจุฉ ููุนุธู ุงูุชุทุจููุงุช ุ ุชุนูู ุทุฑููุฉ ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ุจุดูู ุฃุณุฑุน <em>ุจูุซูุฑ</em> .  ููู ุฃุณุฑุน ุญููุง.  ูู ุจุนุถ ุงูุงุญูุงู </p><br><p style=";text-align:right;direction:rtl">  ุณูู ูุณุงุนุฏ <a href="">ุงููุนูุงุฑ</a> ุ ุงูุฐู <code>HashSet</code> ูู <code>HashSet</code> ุนูู G8 ุ ุนูู <code>HashSet</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Benchmark (collection) (size) Mode Cnt Score Error Units addAll HashSet 10 avgt 100 155,2 ยฑ 2,8 ns/op addAll HashSet 100 avgt 100 1884,4 ยฑ 37,4 ns/op addAll HashSet 1000 avgt 100 17917,3 ยฑ 298,8 ns/op collectionsAddAll HashSet 10 avgt 100 136,1 ยฑ 0,8 ns/op collectionsAddAll HashSet 100 avgt 100 1538,3 ยฑ 31,4 ns/op collectionsAddAll HashSet 1000 avgt 100 15168,6 ยฑ 289,4 ns/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุฏู ุฃู ุงูุฑูุงู ุงูุฃูุซุฑ ุฎุจุฑุฉ ูุงููุง ุนูู ุญู.  ุชูุฑูุจุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฅุตุฏุงุฑุงุช ุงููุงุญูุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ูู 11) ุณูู ุชุชูุงุดู ุชุฃูู ุทุฑููุฉ ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ุฅูู ุญุฏ ูุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Benchmark (collection) (size) Mode Cnt Score Error Units addAll HashSet 10 avgt 100 143,1 ยฑ 0,6 ns/op addAll HashSet 100 avgt 100 1738,4 ยฑ 7,3 ns/op addAll HashSet 1000 avgt 100 16853,9 ยฑ 101,0 ns/op collectionsAddAll HashSet 10 avgt 100 132,1 ยฑ 1,1 ns/op collectionsAddAll HashSet 100 avgt 100 1661,1 ยฑ 7,1 ns/op collectionsAddAll HashSet 1000 avgt 100 15450,9 ยฑ 93,9 ns/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ูุฑู ุฃููุง ูุง ูุชุญุฏุซ ุนู ุฃู "ุฃุณุฑุน ุจูุซูุฑ".  ูุฅุฐุง ูุฑุฑูุง ุชุฌุฑุจุฉ <code>ArrayList</code> -a ุ ููุฏ ุงุชุถุญ ุฃู ุทุฑููุฉ ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ุชุจุฏุฃ ูู ุฎุณุงุฑุฉ ุงููุซูุฑ (ูููุง ุฒุงุฏ ููุฉ): </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Benchmark (collection) (size) Mode Cnt Score Error Units JDK 8 addAll ArrayList 10 avgt 100 38,5 ยฑ 0,5 ns/op addAll ArrayList 100 avgt 100 188,4 ยฑ 7,0 ns/op addAll ArrayList 1000 avgt 100 1278,8 ยฑ 42,9 ns/op collectionsAddAll ArrayList 10 avgt 100 62,7 ยฑ 0,7 ns/op collectionsAddAll ArrayList 100 avgt 100 495,1 ยฑ 2,0 ns/op collectionsAddAll ArrayList 1000 avgt 100 4892,5 ยฑ 48,0 ns/op JDK 11 addAll ArrayList 10 avgt 100 26,1 ยฑ 0,0 ns/op addAll ArrayList 100 avgt 100 161,1 ยฑ 0,4 ns/op addAll ArrayList 1000 avgt 100 1276,7 ยฑ 3,7 ns/op collectionsAddAll ArrayList 10 avgt 100 41,6 ยฑ 0,0 ns/op collectionsAddAll ArrayList 100 avgt 100 492,6 ยฑ 1,5 ns/op collectionsAddAll ArrayList 1000 avgt 100 6792,7 ยฑ 165,5 ns/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ููุฌุฏ ุดูุก ุบูุฑ ูุชููุน ููุง ุ ุญูุซ ุชู ุชุตููู <code>ArrayList</code> ุญูู ุตููู ุ ูุฐูู ุฃุนุงุฏ ุงููุทูุฑูู ุชุญุฏูุฏ ุฃุณููุจ <code>Collection::addAll</code> ุจุนูุฏ ุงููุธุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;? extends E&gt; c)</span></span></span><span class="hljs-function"> </span></span>{ Object[] a = c.toArray(); modCount++; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numNew = a.length; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (numNew == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; Object[] elementData; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> s; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (numNew &gt; (elementData = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.elementData).length - (s = size)) elementData = grow(s + numNew); System.arraycopy(a, <span class="hljs-number"><span class="hljs-number">0</span></span>, elementData, s, numNew); &lt;---    size = s + numNew; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนุงุฏ ุงูุขู ุฅูู ููุงุฌููุง.  ุงูุชุฑุถ ุฃููุง ูุจููุง ุงูุญู ุงูููุชุฑุญ ุจุดุฃู ุชุตุญูุญ ุงูุชุฌุงุฑุจ ุงููุทุจุนูุฉ ูุชุฑููุง ูุฐุง ุงูููุฏ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addItems</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Collection&lt;T&gt; collection)</span></span></span><span class="hljs-function"> </span></span>{ T[] items = getArray(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Collections.addAll(collection, items); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูููุช ุงูุญุงูู ุ ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ูููู ุจุนุฏ ุฅุถุงูุฉ ูุธุงุฆู ุฌุฏูุฏุฉ ุ ุชุตุจุญ ุงูุทุฑููุฉ ูู ุจุนุถ ุงูุฃุญูุงู ุณุงุฎูุฉ ูุชุจุฏุฃ ูู ุงูุชุจุงุทุค.  ููุชุญ ุฃููุงุฏ ุงููุตุฏุฑ - ุงูููุฏ ูู ูุชุบูุฑ.  ูููุฉ ุงูุจูุงูุงุช ูู ููุณูุง.  ู ุบุฑู ุงูุฃุฏุงุก ูุซูุฑุง.  ูุฐุง ูู ููุน ุขุฎุฑ ูู ุงูุฃูุบุงู. </p><br><p style=";text-align:right;direction:rtl">  ูุดู ุงููุตุญุญ ูุงุจุญุซ ุนู ุงูุฌููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/nw/og/mu/nwogmu0_mvl-ix_hdyoxdaoydik.png"></p><br><p style=";text-align:right;direction:rtl">  ูุฑุฌู ููุงุญุธุฉ: ุฃููุง ูู ูุบูุฑ ุงูุฎูุงุฑุฒููุฉ ุ ููู ูุชุบูุฑ ููุฏุงุฑ ุงูุจูุงูุงุช ุงูุชู ุชูุช ูุนุงูุฌุชูุง ุ ููู ุทุจูุนุชูุง ุชุบูุฑุช ูุจุฏุฃุช ูุดููุฉ ูู ุงูุฃุฏุงุก ูู ุงูููุฏ ูุฏููุง: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> Java 8 Java 11  addAll 10 56,9 25,2 ns/op collectionsAddAll 10 352,2 142,9 ns/op addAll 100 159,9 84,3 ns/op collectionsAddAll 100 4607,1 3964,3 ns/op addAll 1000 1244,2 760,2 ns/op collectionsAddAll 1000 355796,9 364677,0 ns/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุตูููุงุช ุงููุจูุฑุฉ ุ ูููู ุงููุฑู ุจูู <code>Collections::addAll</code> ู <code>Collection::addAll</code> ูุชูุงุถุนูุง 500 ูุฑุฉ.  ุงูุญูููุฉ ูู ุฃู ูุงุฆูุฉ <code>COWList</code> ูุง ุชููู ููุท ุจุชูุณูุน ุงูุตููู ุงูููุฌูุฏ ุ ูููููุง ุชูุดุฆ ูุงุญุฏุฉ ุฌุฏูุฏุฉ ูู ูู ูุฑุฉ ูุชู ูููุง ุฅุถุงูุฉ ุนูุงุตุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(E e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">synchronized</span></span> (lock) { Object[] es = getArray(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> len = es.length; es = Arrays.copyOf(es, len + <span class="hljs-number"><span class="hljs-number">1</span></span>); &lt;----    es[len] = e; setArray(es); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } }</code> </pre> <br><p style=";text-align:right;direction:rtl"><del>  ุนูู ูู ููุน ุงููููุ </del></p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุง ูุฌุจ ุงูููุงู ุจู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://bugs.openjdk.java.net/browse/JDK-8193031</a> </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://cr.openjdk.java.net/~martin/webrevs/jdk/Collections-addAll/</a> </p></div></div><br><p style=";text-align:right;direction:rtl">  ุงููุดููุฉ ุงูุฑุฆูุณูุฉ ููุง ูู ุฃู ุฃุณููุจ <code>Collections::addAll</code> ููุจู ูุงุฌูุฉ ุ ุจูููุง ูุง <code>addAll</code> ุทุฑููุฉ <code>addAll</code> ุนูู <code>addAll</code> .  ุจุฏูู ููุฆุฉ - ูุง ููุฌุฏ ุนูู ุ ูุฐูู ุ ุชุชู ูุชุงุจุฉ ุงููุซุงุฆู ุจูุงุกู ุนูู ุงูุชูููุฐ ุงูููุฌูุฏ ูู <code>AbstractCollection::addAll</code> ุ ููู ุฎูุงุฑุฒููุฉ ูุนููุฉ ุชูุทุจู ุนูู ุฌููุน ุงููุฌููุนุงุช.  ูุฐุง ูุนูู ุฃู ุชุทุจููุงุช ุฃูุซุฑ ุชุญุฏูุฏุงู ูููุงูู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ูู ูุณุชูู ุฃูู ูู ุงูุชุฌุฑูุฏ ูููู ุฃู ูุบูุฑ ูุฐุง ุงูุณููู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูุขู ุฅูุณุงููุง</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> Collection::addAll โ   AbstractCollection::addAll โ   &lt;---    ArrayList::addAll HashSet::addAll โ   &lt;---      COWList::addAll</code> </pre> </div></div><br><h4 id="eschyo-ob-abstrakciyah" style=";text-align:right;direction:rtl">  ุงููุฒูุฏ ุนู ุงูุชุฌุฑูุฏุงุช </h4><br><p style=";text-align:right;direction:rtl">  ุจูุง ุฃููุง ูุชุญุฏุซ ุนู ูุณุชููุงุช ุงูุชุฌุฑูุฏ ุ ูุณุฃุฎุจุฑูู ุจูุซุงู ูุงุญุฏ ูู ุงูุญูุงุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ููุงุฑู ูุงุชูู ุงูุทุฑููุชูู ูุญูุธ ุงูุนุฏุฏ ุงูุชุงุณุน ูู ุงูููุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) { SimpleEntity e = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleEntity(); repository.save(e); } } <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) { SimpleEntity e = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleEntity(); repository.saveAndFlush(e); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููููุฉ ุงูุฃููู ุ ูุง ููุจุบู ุฃู ูููู ุฃุฏุงุก ููุชุง ุงูุทุฑููุชูู ูุฎุชูููุง ุชูุงููุง ุ ูุฃู </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูู ููุชุง ุงูุญุงูุชูู ุณูุชู ุชุฎุฒูู ููุณ ุนุฏุฏ ุงูููุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุฃุฎุฐ ุงูููุชุงุญ ูู ุงูุชุณูุณู ุ ูุณูููู ุนุฏุฏ ุงูููุงููุงุช ูู ููุณู </li><li style=";text-align:right;direction:rtl">  ูููุฉ ุงูุจูุงูุงุช ุงููููููุฉ ูู ููุณูุง </li></ul><br><p style=";text-align:right;direction:rtl">  <code>SimpleJpaRepository::saveAndFlush</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> &lt;S extends T&gt; <span class="hljs-function"><span class="hljs-function">S </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(S entity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (entityInformation.isNew(entity)) { em.persist(entity); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> entity; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> em.merge(entity); } } <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> &lt;S extends T&gt; <span class="hljs-function"><span class="hljs-function">S </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveAndFlush</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(S entity)</span></span></span><span class="hljs-function"> </span></span>{ S result = save(entity); flush(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">flush</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ em.flush(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุทุฉ ุงููุธููุฉ ููุง ูู ุทุฑููุฉ <code>flush()</code> .  ููุงุฐุง ุงูุจููุ  ูุจุฏู ูู ุฃู ุงููุดู ุนููุง ูู ูุงุฌูุฉ <code>JpaRepository</code> ูุงู ุฎุทุฃ ูููุทูุฑูู.  ุณุฃุญุงูู ุชุจุฑูุฑ ููุฑู.  ุนุงุฏุฉู ุ ูุง ูุชู ุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ ูู ููุจู ุงููุทูุฑ ุนูู ุงูุฅุทูุงู ุ ูุฃู ุงูุฏุนูุฉ ุฅูู <code>EntityManager::flush</code> ูุฑุชุจุทุฉ ุจุฅุชูุงู ูุนุงููุฉ ูุชุญูู ูููุง Spring: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//     @Transactional public void method() { &lt;--  Session::open /*.*/ } &lt;--  Session::flush</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฑุฌู ููุงุญุธุฉ: <code>EntityManager</code> ูู ุฌุฒุก ูู ููุงุตูุงุช <code>JPA</code> ุงููููุฐุฉ ูู ุงูุณุจุงุช <code>EntityManager</code> (ูุงุฌูุฉ ุงูุฌูุณุฉ ููุฆุฉ SessionImpl ุ ุนูู ุงูุชูุงูู).  Spring Date ูู ุฅุทุงุฑ ูุนูู ุนูู ุฑุฃุณ ORM ุ ูู ูุฐู ุงูุญุงูุฉ ุ ุฃุนูู Hibernate.  ุงุชุถุญ ุฃู <code>JpaRepository::saveAndFlush</code> ุชุชูุญ ููุง ุงููุตูู ุฅูู ุงููุณุชููุงุช ุงูุฃุฏูู ูู ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช ุ ุนูู ุงูุฑุบู ูู ุฃู ูููุฉ ุงูุฅุทุงุฑ ุชุชูุซู ูู ุฅุฎูุงุก ุงูุชูุงุตูู ุฐุงุช ุงููุณุชูู ุงูููุฎูุถ (ุงููููู ูุดุงุจู ุฅูู ุญุฏ ูุง ูููุตุฉ ุบูุฑ ุงูุขููุฉ ูู JDK). <br>  ูู ุญุงูุชูุง ุ ุนูุฏ ุงุณุชุฎุฏุงู <code>JpaRepository::saveAndFlush</code> ูุฏุฎู ูู ุงูุทุจูุงุช ุงูุณููู ูู ุงูุชุทุจูู ุ ูุจุงูุชุงูู ููุณุฑ ุดูุฆูุง ูุง. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฎุฐ ููุชู ูุฅููุงุก ูุธุฑุฉ ุฎุงุทูุฉ ุ ููุฑ ุจููุณู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุฏุฑุฉ ุงูุณุจุงุช ุนูู ุฅุฑุณุงู ุงูุจูุงูุงุช ุนูู ุฏูุนุงุช ููุทูุนุฉ ุ ุฃุญุฏ ูุถุงุนูุงุช ุฅุนุฏุงุฏ <code>jdbc.batch_size</code> ุ ุงููุญุฏุฏ ูู <code>application.yml</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">spring: jpa: properties: hibernate: jdbc.batch_size: 500</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุนุชูุฏ ุนูู Hibernate ุนูู ุงูุฃุญุฏุงุซ ุ ูุฐูู ุนูุฏูุง ุชููู ุจุญูุธ 1000 ููุงู ูู ูุฐุง ุงููุจูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) { SimpleEntity e = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleEntity(); repository.save(e); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงุณุชุฏุนุงุก <code>repository.save(e)</code> ูุง ูุญูุธ ุนูู ุงูููุฑ.  ุจุฏูุงู ูู ุฐูู ุ ูุชู ุฅูุดุงุก ุญุฏุซ ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ.  ุนูุฏ ุงูุงูุชูุงุก ูู ุงููุนุงููุฉ ุ ูุชู ุฏูุฌ ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู <code>EntityManager::flush</code> ุ ูุงูุฐู ููุณู ุนูููุงุช ุงูุฅุฏุฑุงุฌ / ุงูุชุญุฏูุซุงุช ุฅูู ุญุฒู ูุชุนุฏุฏุฉ ูู <code>jdbc.batch_size</code> ููููู ุจุฅูุดุงุก ุทูุจุงุช ูููุง.  ูู ุญุงูุชูุง ุ <code>jdbc.batch_size: 500</code> ุ ูุฐุง ูุฅู ุชูููุฑ 1000 ููุงู ูู ุงููุงูุน ูุนูู ุทูุจูู ููุท. </p><br><p style=";text-align:right;direction:rtl">  ูููู ูุน ุงูุชูุฑูุบ ุงููุฏูู ููุฏูุฑุฉ ูู ูู ุชูุฑูุฑุฉ ููุฏูุฑุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Transactional</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_save</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; n; i++) { SimpleEntity e = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleEntity(); repository.saveAndFlush(e); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ูุณุญ ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ูุญูุธ 1000 ููุงู ูุนูู 1000 ุงุณุชูุณุงุฑ. </p></div></div><br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ูุฅู ุงูุชุฏุฎู ูู ุงูุทุจูุงุช ุงูุณููู ูู ุงูุชุทุจูู ูููู ุฃู ูุตุจุญ ููุฌููุง ุจุณูููุฉ ุ ูููุณ ููุท ููุฌููุง ููุฅูุชุงุฌูุฉ (ุงูุธุฑ ุบูุฑ ุงูุขูู ูุงุณุชุฎุฏุงูู ุบูุฑ ุงูููุถุจุท). </p><br><p style=";text-align:right;direction:rtl">  ูู ุชุจุทุฆุ  ุฎุฐ ุฃูุถู ุญุงูุฉ (ุจุงููุณุจุฉ ููุง) - ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนูู ููุณ ุงููุถูู ูุซู ุงูุชุทุจูู.  <a href="">ููุงุณ</a> ุจูุฏู ูุธูุฑ ุงูุตูุฑุฉ ุงูุชุงููุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> (entityCount) Mode Cnt Score Error Units bulkSave 10 ss 500 16,613 ยฑ 1,714 ms/op bulkSave 100 ss 500 31,371 ยฑ 1,453 ms/op bulkSave 1000 ss 500 35,687 ยฑ 1,973 ms/op bulkSaveUsingFlush 10 ss 500 32,653 ยฑ 2,166 ms/op bulkSaveUsingFlush 100 ss 500 61,983 ยฑ 6,304 ms/op bulkSaveUsingFlush 1000 ss 500 184,814 ยฑ 6,976 ms/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงููุงุถุญ ุ ุฅุฐุง ูุงูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฌูุฏุฉ ุนูู ูุถูู ุจุนูุฏ ุ ูุฅู ุชูููุฉ ููู ุงูุจูุงูุงุช ุณุชูู ุจุดูู ูุชุฒุงูุฏ ูู ุงูุฃุฏุงุก ูุน ููู ุญุฌู ุงูุจูุงูุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูููุฐุง ุ ูุฅู ุงูุนูู ุนูู ูุณุชูู ุฎุงุทุฆ ูู ุงูุชุฌุฑูุฏ ูููู ุฃู ูุฎูู ุจุณูููุฉ ููุจูุฉ ููููุชุฉ.  ุจุงูููุงุณุจุฉ ุ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุญุฏ ููุงูุงุชู ุงูุณุงุจูุฉ</a> ุชุญุฏุซุช ุนู ูุญุงููุฉ ุบุฑูุจุฉ ูุชุญุณูู <code>StringBuilder</code> - ุฃ: ูู ุฃูู ูุงุฌุญูุง ููุท ุนูุฏ ูุญุงููุฉ ุงูุฏุฎูู ูู ูุณุชูู ุฃูุซุฑ ุชุฌุฑูุฏูุง ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ. </p><br><h4 id="granicy-minnyh-poley" style=";text-align:right;direction:rtl">  ุญุฏูุฏ ุญููู ุงูุฃูุบุงู </h4><br><p style=";text-align:right;direction:rtl">  ููุง ููุนุจ ุตุงุจุฑุ  ุงูุจุญุซ ุนู ุงูุฃูุบุงู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// org.springframework.cache.interceptor.CacheAspectSupport Object generateKey(CacheOperationContext ctx, Object result) { Object key = ctx.generateKey(result); Assert.notNull(key, "Null key ..." + context.metadata.operation); // ... return key; }</span></span></code> </pre> <br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฌุฏุช ุฐููุ</b>  <b class="spoiler_title">ุชุญูู ูู ุงูุฅุฌุงุจุฉ ุงูุตุญูุญุฉ.</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="java hljs"> | \ / <span class="hljs-comment"><span class="hljs-comment">// org.springframework.cache.interceptor.CacheAspectSupport | \ / Object generateKey(CacheOperationContext ctx, Object result) { Object key = ctx.generateKey(result); | \ / Assert.notNull(key, "Null key ..." + context.metadata.operation); return key; }</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูุตุฑุฎ ุงููุงูุฏ: "ูู ุฃูุช ุชูุฒุญ ูุนูุ ููู ูู ููุงู ููุท ูุตู ูู ุณุทุฑููุ ูุงุฐุง ูุนูู ูุฐุง ูู E. ุงูุฏูููุ"  ูุงุณูุญูุง ูู ุฃู ุฃุณุชุฑุนู ุงูุชุจุงููู ุฅูู ุญูููุฉ ุฃููู ูู ุฃุณูุท ุงูุถูุก ุนูู ุนูููุฉ ุฑุจุท ุงูุฃูุชุงุฑ ูุญุณุจ ุ ูููู ุฃูุถูุง ุงุณู ุงููุฆุฉ ูุงุณู ุงูุฃุณููุจ.  ูู ุงููุงูุน ุ ูุง ูุชูุซู ุฎุทุฑ ุงูุฅูุชุตุงู ุจุงูุณูุงุณู ูู ุงูุฅูุชุตุงู ุจุญุฏ ุฐุงุชู ุ ุจู ูู ูุง ูุญุฏุซ ูู ุงูุทุฑููุฉ ุงูุชู ุชูุดุฆ ุงูููุงุชูุญ ูุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ุฃู ูู ุจุนุถ ุงูุณููุงุฑูููุงุช ุ ุณูููู ูุฏููุง ุงููุซูุฑ ูู ุงููุตูู ุฅูู ูุฐู ุงูุทุฑููุฉ ุ ููุง ูุนูู ุงููุซูุฑ ูู ุฎุทูุท ุงูููุงูุฉ. <br>  ูุฐูู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฌุจ ุฅูุดุงุก</a> ุฑุณุงูุฉ ุฎุทุฃ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุท</a> ุนูุฏ ุทุฑุญ ูุฐุง ุงูุฎุทุฃ ุจุงููุนู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// org.springframework.cache.interceptor.CacheAspectSupport Object generateKey(CacheOperationContext ctx, Object result) { Object key = ctx.generateKey(result); if (key == null) { throw new IAE("Null key ..." + context.metadata.operation); } // ... return key; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุจุงูุชุงูู ุ ูุฅู ุญููู ุงูุฃูุบุงู ููุง ุญุฏูุฏ - ููุฐุง ูู ููุฏุงุฑ ุงูุจูุงูุงุช ุ ูุชูุฑุฉ ุงููุตูู ุฅูู ุงูุทุฑููุฉ ุ ููุง ุฅูู ุฐูู ุงููุคุดุฑุงุช ุงููููุฉ ุ ุนูุฏ ุงููุตูู ุฅูู ูุชุฌุงูุฒ ุฃู ุนูุจ ุจุณูุท ูุตุจุญ ุฐุง ุฏูุงูุฉ ุฅุญุตุงุฆูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุฐู ูู ุงูููุฒุฉ ุ ุฅูู ููุทุฉ ุงูุชูุงุทุน ุงูุชู ูุง ุชุนุทู ุชุนููุฏ ุงูููุฏ ุชุญุณูููุง ูุจูุฑูุง (ูุงุจููุง ููููุงุณ). </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุงุณุชูุชุงุฌ ุขุฎุฑ ูููุทูุฑ: ูู ูุนุธู ุงูุญุงูุงุช ุ ุงูุฎุฏุงุน ุดุฑูุฑ ุ ููุง ูุคุฏู ุฅูู ูุถุงุนูุงุช ูุง ูุนูู ููุง ูู ุงูููุฏ.  ูู 99 ุญุงูุฉ ูู ุฃุตู 100 ุ ูู ูุฑุจุญ ุดูุฆูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูุชุฐูุฑ ุฃู ููุงู ุฏุงุฆูุง </p><br><h4 id="tot-samyy-sotyy-sluchay" style=";text-align:right;direction:rtl">  ุงููุถูุฉ ุงููุงุฆุฉ </h4><br><p style=";text-align:right;direction:rtl">  ุฅูููู ุงูููุฏ ุงูุฐู ูุฏูู ููุชุฒุงู ูุงูุงุฑุช ูู ููุงูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"ููุงุฌุฃุฉ ุงููุฑุงุกุฉ ุงููุชููุจุฉ"</a> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@BenchmarkMode</span></span>(Mode.AverageTime) <span class="hljs-meta"><span class="hljs-meta">@OutputTimeUnit</span></span>(TimeUnit.NANOSECONDS) <span class="hljs-meta"><span class="hljs-meta">@State</span></span>(Scope.Thread) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoopyBenchmarks</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Param</span></span>({ <span class="hljs-string"><span class="hljs-string">"32"</span></span>, <span class="hljs-string"><span class="hljs-string">"1024"</span></span>, <span class="hljs-string"><span class="hljs-string">"32768"</span></span> }) <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> size; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] bunn; <span class="hljs-meta"><span class="hljs-meta">@Setup</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepare</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ bunn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[size]; } <span class="hljs-meta"><span class="hljs-meta">@Benchmark</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goodOldLoop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Blackhole fox)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; bunn.length; y++) { <span class="hljs-comment"><span class="hljs-comment">// good old C style for (the win?) fox.consume(bunn[y]); } } @Benchmark public void sweetLoop(Blackhole fox) { for (byte bunny : bunn) { // syntactic sugar loop goodness fox.consume(bunny); } } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ููุดุฆ ุงูุชุฌุฑุจุฉ ุ ุณููุชุดู ูุฑููุง ูุฐููุงู ุจูู ุทุฑููุชูู ููุชูุฑุงุฑ ุนูู ุตููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Benchmark (size) Score Score error Units goodOldLoop 32 46.630 0.097 ns/op goodOldLoop 1024 1199.338 0.705 ns/op goodOldLoop 32768 37813.600 56.081 ns/op sweetLoop 32 19.304 0.010 ns/op sweetLoop 1024 475.141 1.227 ns/op sweetLoop 32768 14295.800 36.071 ns/op</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุ ูููู ูููุทูุฑ ุนุฏูู ุงูุฎุจุฑุฉ ุฃู ููุฏู ูุซู ูุฐุง ุงูุงุณุชูุชุงุฌ ุงููุงุถุญ ูุงููุนูุงุฑู: ุงููุฑูุฑ ุนุจุฑ ุตููู ุจุงุณุชุฎุฏุงู ุจูุงุก ุงูุฌููุฉ ุงูุฌุฏูุฏ ูุนูู ุจุดูู ุฃุณุฑุน ูู ุฏูุฑุฉ ุงูุนุฏ.  ูุฐุง ูู ุงูุงุณุชูุชุงุฌ ุงูุฎุงุทุฆ ุ ูุฃูู ูุณุชุญู ุชุบููุฑ ุทุฑููุฉ <code>goodOldLoop</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Benchmark</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goodOldLoopReturns</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Blackhole fox)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] sunn = bunn; <span class="hljs-comment"><span class="hljs-comment">// make a local copy of the field for (int y = 0; y &lt; sunn.length; y++) { fox.consume(sunn[y]); } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฃุฏุงุฆูุง ูุดุงุจู <code>sweetLoop</code> ุทุฑููุฉ <code>sweetLoop</code> "ุงูุฃุณุฑุน": </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Benchmark (size) Score Score error Units goodOldLoopReturns 32 19.306 0.045 ns/op goodOldLoopReturns 1024 476.493 1.190 ns/op goodOldLoopReturns 32768 14292.286 16.046 ns/op sweetLoop 32 19.304 0.010 ns/op sweetLoop 1024 475.141 1.227 ns/op sweetLoop 32768 14295.800 36.071 ns/op</code> </pre> <br><p style=";text-align:right;direction:rtl">     <code>Blackhole::consume</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//... public volatile byte b1, b2; public volatile BlackholeL2 nullBait = null; /** * Consume object. This call provides a side effect preventing JIT to eliminate dependent computations. * * @param b object to consume. */ public final void consume(byte b) { if (b == b1 &amp; b == b2) { // SHOULD NEVER HAPPEN nullBait.b1 = b; // implicit null pointer exception } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">         ,    ,      .     <code>goodOldLoop</code>       <code>this.bunn</code>    ,  <code>for-each</code>     ,        (,  Java Concurrency In Practice   "  ").      . </p><br><p style=";text-align:right;direction:rtl">    : "      ?   , <code>Blackhole::consume</code> โ   JMH       .  ,  ,       ?" </p><br><p style=";text-align:right;direction:rtl">          : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] bunn; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">goodOldLoop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Blackhole fox)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; bunn.length; y++) { fox.consume(bunn[y]); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">   ? ?  ,    : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">E[] bunn; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">forEach</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Consumer&lt;E&gt; fox)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; y &lt; bunn.length; y++) { fox.consume(bunn[y]); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  <code>Iterable::forEach</code> !        ,   ,        ,       (   JDK 13): </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//ArrayList public void forEach(Consumer&lt;? super E&gt; action) { Objects.requireNonNull(action); final int expectedModCount = modCount; final Object[] es = elementData; final int size = this.size; for (int i = 0; modCount == expectedModCount &amp;&amp; i &lt; size; i++) action.accept(elementAt(es, i)); if (modCount != expectedModCount) throw new ConcurrentModificationException(); } //Arrays$ArrayList public void forEach(Consumer&lt;? super E&gt; action) { Objects.requireNonNull(action); for (E e : a) { action.accept(e); } } //CopyOnWriteArrayList public void forEach(Consumer&lt;? super E&gt; action) { Objects.requireNonNull(action); for (Object x : getArray()) { @SuppressWarnings("unchecked") E e = (E) x; action.accept(e); } } //ArrayDeque public void forEach(Consumer&lt;? super E&gt; action) { Objects.requireNonNull(action); final Object[] es = elements; for (int i = head, end = tail, to = (i &lt;= end) ? end : es.length; ; i = 0, to = end) { for (; i &lt; to; i++) action.accept(elementAt(es, i)); if (to == end) { if (end != tail) throw new ConcurrentModificationException(); break; } } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">     ,          . ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  </a> <code>Collections.nCopies()::forEach</code> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">forEach</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Consumer&lt;? </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">super</span></span></span></span><span class="hljs-function"><span class="hljs-params"> E&gt; action)</span></span></span><span class="hljs-function"> </span></span>{ Objects.requireNonNull(action); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.n; i++) { action.accept(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.element); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">            , . .   <code>this.n</code>  <code>this.element</code>       : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CopiesList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractList</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">E</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RandomAccess</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Serializable</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> E element; CopiesList(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n, E e) { <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> n &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.n = n; element = e; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   </a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   </a> <code>@Stable</code> . </p><br><p style=";text-align:right;direction:rtl">  :  99   100  ,     ,    1   100,             .     ,     . </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   </a>          "  volatile". </p><br><h4 id="eho-voyny" style=";text-align:right;direction:rtl">   </h4><br><p style=";text-align:right;direction:rtl">      ,   : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//java.lang.Integer @HotSpotIntrinsicCandidate public static Integer valueOf(int i) { if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high) return IntegerCache.cache[i + (-IntegerCache.low)]; return new Integer(i); }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl"> -   ,         ( <code>java.lang.Integer</code> , <code>java.lang.Long</code> , <code>java.lang.Short</code> , <code>java.lang.Byte</code> , <code>java.lang.Character</code> ).  ,     ,     </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Integer intgr = Integer.valueOf(<span class="hljs-number"><span class="hljs-number">42</span></span>);</code> </pre> <br><p style=";text-align:right;direction:rtl">    . </p><br><p style=";text-align:right;direction:rtl">      : </p><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs">Integer intgr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Integer(<span class="hljs-number"><span class="hljs-number">42</span></span>);</code> </pre> <br><p style=";text-align:right;direction:rtl">        ,         ,       <code>Integer::valueOf</code>   . </p><br><p style=";text-align:right;direction:rtl">         :      .                ,   ,      ""  (         ).   ,        ,         <code>Integer::valueOf</code> .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">"  "</a> . </p><br><p style=";text-align:right;direction:rtl">   . ,              . ,       .      ,    ,      . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar443206/">https://habr.com/ru/post/ar443206/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar443196/index.html">ููุณ ุฏูููุฉ ุญุงููุง - ุงุฎุชูุงุฑ ุฌูุงุฒ ุงูุชูุฌูู ุงูุตูุงุนู LTE</a></li>
<li><a href="../ar443198/index.html">ูููู ูุงุฑู ุฒููุฑุจูุฑุฌ ุฅู ูููุน Facebook ูุนูู ุนูู ูุงุฌูุฉ ุนุตุจูุฉ ููุฑุงุกุฉ ุงูุฃููุงุฑ</a></li>
<li><a href="../ar443200/index.html">ูุฑุงุตูุฉ ุฅูุฑุงูููู ูุณุฑููู ุชูุฑุงุจุงูุช ูู ุงูุจูุงูุงุช ูู ุณูุชุฑููุณ</a></li>
<li><a href="../ar443202/index.html">ุญุดุฏ ุถุฏ ุนุฒู Runet</a></li>
<li><a href="../ar443204/index.html">Frontend Weekly Digest (4 - 10 ูุงุฑุณ 2019)</a></li>
<li><a href="../ar443208/index.html">ูุฃุฑ ุงูุดุฑูุงุช</a></li>
<li><a href="../ar443210/index.html">ุฑุฏ ูุนู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุงูุฌุฒุก 21: ุงูุฏุฑุณ ุงูุซุงูู ูุชูุฏูู ูุฑุดุฉ ุนูู ุงูุดุฑุทู</a></li>
<li><a href="../ar443212/index.html">ุฑุฏ ูุนู ุชุนูููู ุ ุงูุฌุฒุก 22: ุงููุฑุญูุฉ ุงูุณุงุจุนุฉ ูู ุงูุนูู ุนูู ุชุทุจูู TODO ุ ุชูุฒูู ุงูุจูุงูุงุช ูู ูุตุงุฏุฑ ุฎุงุฑุฌูุฉ</a></li>
<li><a href="../ar443214/index.html">ุฑุฏ ูุนู ุงูุจุฑูุงูุฌ ุงูุชุนูููู ุงูุฌุฒุก 23: ุฃูู ุฃุดูุงู ุงูุฏุฑุณ</a></li>
<li><a href="../ar443216/index.html">ููุฎุต ุงูููุงุฏ ุงูุทุงุฒุฌุฉ ูู ุนุงูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ููุฃุณุจูุน ุงููุงุถู ุฑูู 355 (ูู 4 ุฅูู 10 ูุงุฑุณ 2019)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>