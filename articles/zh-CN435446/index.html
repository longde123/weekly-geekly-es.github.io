<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏣 💨 🙍 任意偶数系统的Verhuff算法 😿 🙇🏼 🤛</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="有时会出现一项保护标识符字符串免受人为意外错误的任务。 例如，支付卡号。 为此，将以特殊方式计算出的校验位添加到该行，并且当有人输入该数字时，您可以进行初始错误校验，而无需访问数据库。 最简单的选择是将所有数字之和除以10的余数相加，在这种情况下，任何一位数字（包括控制一位）的失真都将很容易检测到，...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>任意偶数系统的Verhuff算法</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435446/"><img src="https://habrastorage.org/webt/he/i8/yu/hei8yu1qvckw3xedpmhxzobgvom.jpeg" align="left" alt="KDPV"> 有时会出现一项保护标识符字符串免受人为意外错误的任务。 例如，支付卡号。 为此，将以特殊方式计算出的校验位添加到该行，并且当有人输入该数字时，您可以进行初始错误校验，而无需访问数据库。 最简单的选择是将所有数字之和除以10的余数相加，在这种情况下，任何一位数字（包括控制一位）的失真都将很容易检测到，并且这样的行将无法通过测试。 但是诸如校验和之类的其他一些错误将丢失，例如，在位置上两位数的排列，这也是一个相当常见的错误。 <br><a name="habracut"></a><br> 为了保护银行卡号，选择了一种稍微复杂一些的算法， <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">即Moon</a>算法。 其中添加了一个修改：将偶数位置的数字乘以2，然后求和（如果结果超过9，则减去9）。 除了使任何数字失真之外，这还允许您捕获相邻数字的大部分（尽管不是全部）排列。 <br><br> 是否有算法可以检测相邻数字的任何排列（除了使任何单个数字失真之外）？ 是的，它们存在，尽管由于某些原因它们并不十分常见。 这是基于二面体组<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的Verhuff算法</a> ，以及基于Damm拟组<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的Damm算法</a> 。 听起来很吓人，但实际上并没有什么复杂的（对于那些熟悉“组”概念的人）。 <br><br> 荷兰数学家和雕塑家Jacobus Verhoeff（照片中的雕塑之一）提出了一种基于<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">二面体组</a>的算法。 二面体组是规则的N边形的一组对称性，包括旋转和轴向对称性。 这样的组不是可交换的：如果先对称显示具有重编号顶点的规则多边形，然后旋转它，则在大多数情况下，它与先旋转然后显示是不同的。 因此，当使用二面体组的操作顺序“乘”原始字符串的数字时，即 在规则的N-gon上连续应用旋转和对称映射操作，我们得到了针对大多数排列的保护。 从大多数，但仍然不是每个人。  Verkhuff建议改进此算法，并在将每个数字相乘以根据特殊表替换另一个数字之前，具体取决于数字在行中的位置。 该表是从一个排列中获得的，方法是将其依次应用于先前的结果，然后经过8个此类应用，我们便恢复了原始顺序，因此您可以预先构建表8x10并从中获取值。 其中一些排列使我们能够按源字符串的相邻数字的顺序确定所有100％的可能错误，也就是说，这对于找到防止这两种类型的错误的校验位的问题是一种完全正确的解决方案。 显然，Verkhuff通过随机选择找到了成功的排列，其中有很多。 <br><br> 关于是否存在允许人们找到相邻数字的任何排列而无需进行其他修改的问题，这个问题长期以来一直存在。 在二十一世纪，2004年，德国数学家迈克尔·达姆（Michael Damm）证明了这类基团的存在，它们被称为弱完全反对称拟群。 我还没有完全弄清楚如何构建它们；那些希望的人可以尝试通过<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">发布</a>来自己做。 尽管快速浏览时看起来并不复杂（问题悬而未决，甚至很奇怪），但对于实际实施而言，有一种更简单的方法：使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">现成的表格</a> 。 <br><br> 现在让我们继续下一个主要问题：如果我需要保护的不是字符串的十进制数字，而是字符串的任意字符，例如十六进制，base64或base58，该怎么办？ 即，不是以十进制数字系统的特定情况而是以一般形式来解决问题。 <br><br>  Moon算法可以毫无问题地扩展到这种情况，但是它并不是那么有趣，因为它无法找到相邻数字的所有排列。 构造任意大小的反对称拟群的方法尚不完全清楚。 对于Verhuff算法，大小为N的二面体组很容易构造，但是您仍然需要一个置换表，该表也不清楚从何处获得（甚至不清楚它是否存在）。 这是对最后一个问题的研究，我开始了。 <br><br> 在单独搜索和使用N = 64时使用“相当好的”解决方案（即检测几乎所有排列）之后，Google谷歌搜索什么都没有产生。 <br><br> 也许我不会描述找到所需排列的所有尝试和测试的方法，但是都没有得出结果。 我试图解决一个特殊的问题：找到base64和base58的置换，以防止更改相邻数字的顺序。 我只能说，使用不同的优化选项通过随机或顺序搜索找到这种排列的尝试失败了。 但是最后，我找到了任何偶数n的通用解决方案。 <br><br> 排列如下： <br><br> <code>0, N-1 .. N/2+1, 1 .. N/2 <br></code> <br> 例如，对于N = 10，这将是： <br><br> <code>0, 9, 8, 7, 6, 1, 2, 3, 4, 5 <br></code> <br> 此置换还有另一个显着的特性：它始终具有12的周期（对于N&gt; = 8），这使您可以预先构造12xN表并从那里取一个数字。 <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这是针对base58提议的Verhuff算法扩展的实现示例</a> （严格来说，这不是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Verkhuff</a>算法，而是其概括）。 可以说，它不是一个完整的库，而只是一个实用程序，证明了概念。 <br><br> 我将在以后的某个时间提供此置换具有必要性质且周期为12的证明。 边距中的空间太小，无法容纳在这里。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN435446/">https://habr.com/ru/post/zh-CN435446/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN435432/index.html">新年，新的GitHub：无限的免费私人存储库</a></li>
<li><a href="../zh-CN435436/index.html">IT基础架构的5大趋势：2019年的预测</a></li>
<li><a href="../zh-CN435438/index.html">PHP：在团队开发中更改数据库结构</a></li>
<li><a href="../zh-CN435442/index.html">变革渠道</a></li>
<li><a href="../zh-CN435444/index.html">我们正在Karaf平台上实现OSGI</a></li>
<li><a href="../zh-CN435448/index.html">关于通过QTcpSocket和SCPI与信号发生器进行通信的经验</a></li>
<li><a href="../zh-CN435450/index.html">新年快乐，新年快乐MQTT / UDP</a></li>
<li><a href="../zh-CN435452/index.html">使用Catcher进行微服务的端到端测试</a></li>
<li><a href="../zh-CN435454/index.html">AOP与功能</a></li>
<li><a href="../zh-CN435456/index.html">晚上将智能手机放在您身边有害吗？</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>