<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëêüèæ üíß üîà Ca√ßa aos Wumpus ou experimente escrever um jogo cl√°ssico do Android üßìüèª ‚ùï üï£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Voc√™ j√° ouviu falar de Vampus? Independentemente da resposta - bem-vindo ao seu mandato! 

 Neste artigo, quero contar a minha hist√≥ria de cria√ß√£o de ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ca√ßa aos Wumpus ou experimente escrever um jogo cl√°ssico do Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462943/"><img src="https://habrastorage.org/webt/hp/ja/ij/hpjaijkod2extsjskmvlmgv5f0w.jpeg" alt="imagem"><br><br>  <i>Voc√™ j√° ouviu falar de Vampus?</i>  <i>Independentemente da resposta - bem-vindo ao seu mandato!</i> <br><br>  Neste artigo, quero contar a minha hist√≥ria de cria√ß√£o de um jogo para Android.  Dependendo da compet√™ncia do leitor, a experi√™ncia, pensamentos e decis√µes transmitidas por mim ser√£o mais ou menos √∫teis.  No entanto, espero que minha hist√≥ria, pelo menos, seja interessante. <a name="habracut"></a><br><a name="toMenu"></a><br><h2>  Conte√∫do </h2><br>  1. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Introdu√ß√£o</a> <br>  2. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Escolha dos fundos</a> <br>  3. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A ideia do projeto</a> <br>  4. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CHEIRO DE WUMPUS</a> <br>  5. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">A base do b√°sico - a estrutura do projeto</a> <br>  6. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Gera√ß√£o do labirinto de Vampus e trabalho com ele</a> <br>  7. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Armazenamento de mensagens do jogo e sua sa√≠da para o jogador</a> <br>  8. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O primeiro resultado</a> <br>  9. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">At√© jogos pequenos s√£o dignos de hist√≥ria.</a> <br>  10. A <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Transforma√ß√£o Vampus e o resultado final</a> <br>  11. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conclus√£o</a> <br><a name="to1"></a><br><h2>  1. Introdu√ß√£o </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  Primeiro, algumas palavras sobre voc√™.  Infelizmente, programar n√£o √© minha atividade principal, mas estou feliz em dedicar meu tempo livre a ela. <br><br>  Por alguma raz√£o, escolhi a maneira de criar jogos para celular.  Meus projetos anteriores para dispositivos m√≥veis foram criados no ambiente Qt em conjunto com as linguagens QML e C ++.  Apreciei muito esse trio, por√©m, analisando minhas id√©ias, percebi que, no futuro, levaria muito tempo e esfor√ßo para resolver alguns problemas com os meios conhecidos por mim.  Portanto, pensando no pr√≥ximo projeto, decidi encontrar novas ferramentas de desenvolvimento mais adequadas e obter experi√™ncia com elas. <br><a name="to2"></a><br><h2>  2. Escolha dos fundos </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  Antes, prestei aten√ß√£o apenas ao Android e, no novo projeto, decidi me concentrar neste sistema operacional, familiarize-me com o Android Studio, que √© nativo a ele, experimente o novo Java para mim (e no futuro, se voc√™ quiser, tamb√©m prometer√° o Kotlin). <br><br>  Eu n√£o tinha usado o AS ou Java antes, e enfrentei uma frente gigantesca de trabalho com muitas tarefas novas, e estava pronto para correr para a batalha, restava apenas o projeto. <br><a name="to3"></a><br><h2>  3. A ideia do projeto </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  Sabe-se que o melhor de tudo √© que o treinamento √© realizado em tarefas reais e, principalmente, nas que s√£o de interesse.  Para mim, esse projeto de treinamento seria um jogo para o qual formei v√°rios requisitos: <br><br><ol><li>  Repetir valor. </li><li>  A simplicidade da mec√¢nica do jogo. </li><li>  Uso m√≠nimo de gr√°ficos. </li><li>  A jogabilidade deve for√ßar o jogador a pensar. </li><li>  A festa do jogo n√£o deve demorar. </li><li>  R√°pida implementa√ß√£o do projeto (2 meses). </li><li>  Simplicidade e facilidade de interface do usu√°rio. </li></ol><br>  Tendo analisado muitas op√ß√µes e avaliado objetivamente meus pontos fortes, lembrando que, independentemente de quanto tempo e recursos fossem investidos no in√≠cio, levaria muito mais, cheguei √† conclus√£o de que √© melhor usar os cl√°ssicos testados como base do que inventar algo pr√≥prio.  Eu absolutamente n√£o queria criar uma cobra condicional e comecei a estudar jogos antigos.  Ent√£o eu descobri o curioso Hunt the Wumpus. <br><a name="to4"></a><br><h2>  4. CHEIRO DE WUMPUS </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b48/769/35e/b4876935e124ffff57c7f718dda7a6bf.png" alt="imagem"></div><br>  Vampus Hunting √© um jogo de texto cl√°ssico inventado por Gregory Yob em 1972. No mesmo ano, ele recebeu uma descri√ß√£o do jogo e do c√≥digo-fonte em um artigo de revista. <br><br>  A ess√™ncia do jogo √© o estudo do jogador sobre o labirinto de dodecaedro, que √© o lar do vampiro maligno, e tenta adivinhar, com base nas mensagens indicadoras exibidas no log do jogo, que est√£o nos quartos superiores.  Al√©m do pr√≥prio Vampus (produz um odor desagrad√°vel), existem morcegos (barulho √© ouvido) transportando o jogador para uma sala aleat√≥ria e po√ßos (penetram), batida que leva ao final do jogo.  O objetivo do jogo √© matar o Vampus, para o qual o jogador tem 5 flechas que podem voar de 1 a 5 quartos por vez (o pr√≥prio jogador decide que tipo de "for√ßa" para dar o tiro).  Assim, o jogador tem duas a√ß√µes: atirar do arco, ir para a sala.  Qual ser√° o resultado depende da parte da sorte e do grau de consci√™ncia. <br><br>  Em geral, gostei da mec√¢nica: √© simples, mas ao mesmo tempo com elementos de risco.  N√£o havia jogos interessantes no Vampus no Google Play (exceto um novo jogo da √©poca no mundo Lovecraft, no qual, como descobri mais tarde, era baseado na mesma mec√¢nica do Vampus. Mas este <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo √©</a> sobre como criar um jogo no Habr√©), portanto foi aceito a decis√£o de tomar Vampus como base.  Estabeleci o objetivo de manter o jogo cl√°ssico, mas atualizo-o levemente e adiciono novos recursos. <br><a name="to5"></a><br><h2>  5. A base do b√°sico - a estrutura do projeto </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  Primeiro de tudo, eu aprendi as regras do jogo cl√°ssico e me familiarizei com v√°rias implementa√ß√µes do Vampus.  Ent√£o eu fiz um diagrama com a l√≥gica do jogo (clic√°vel): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/q2/pp/is/q2ppisokkh-yozlyjshuw3mw6lw.jpeg"></div><br>  A princ√≠pio, o esquema foi √∫til, porque  Permitido analisar a mec√¢nica do jogo, eliminar falhas e criar algo pr√≥prio.  Al√©m disso, esse esquema foi √∫til quando mais tarde trabalhei com o artista para explicar a ess√™ncia do jogo. <br><br>  Dividi o projeto em 4 partes, em cada uma das quais diferentes tarefas foram resolvidas.  Eu darei apenas alguns deles. <br><br>  <b>1. Mec√¢nica de jogo</b> <br><br><ul><li>  De que forma as informa√ß√µes sobre a masmorra ser√£o armazenadas? </li><li>  Que tipo e quantas vari√°veis ‚Äã‚Äãvoc√™ precisa? </li><li>  Algoritmos de escrita: formar uma masmorra, v√¥o da lan√ßa, verificar o resultado do disparo, v√¥o da lan√ßa com uma sequ√™ncia de salas selecionada incorretamente, mover um jogador, verificar uma sala ao mover, mover um jogador com morcegos, etc. </li><li>  Como exibir informa√ß√µes no registro do jogo e em que ordem? </li><li>  Em que ordem verificar o quarto? </li></ul><br>  <b>2. interface do usu√°rio</b> <br><br><ul><li>  Quais atividades devem estar no aplicativo?  Como eles devem parecer e que elementos devem estar neles? </li><li>  Quais par√¢metros podem ser alterados nas configura√ß√µes? </li><li>  Preciso de imagens no jogo? </li><li>  Qual, em geral, deve ser o estilo do aplicativo (cores, humor, estilo de mensagem)? </li><li>  Quais fontes usar? </li></ul><br>  <b>3. Outros</b> <br><br><ul><li>  Conecte-se aos servi√ßos do Google Play </li><li>  Trabalhar com arquivos XML </li><li>  Quais fontes usar? </li></ul><br>  <b>4. Escrevendo texto para o jogo</b> <br><br><ul><li>  Mensagens do Jogo </li><li>  As regras </li><li>  Descri√ß√£o do jogo para o Google Play </li></ul><br>  √â um tanto desnecess√°rio, e n√£o imposs√≠vel, descrever tudo; portanto, vou me concentrar apenas em alguns pontos, ap√≥s os quais mostrarei o primeiro resultado obtido. <br><a name="to6"></a><br><h2>  6. Gera√ß√£o do labirinto de Vampus e trabalho com ele </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  O labirinto de Vampus √© um dodecaedro, que pode ser representado como uma matriz <b>G de</b> dimens√£o 20x20.  N√≥s numeramos os v√©rtices de 0 a 19. Se o elemento da matriz for 1, h√° uma passagem entre os v√©rtices (salas), caso contr√°rio, n√£o. <br><br>  Tamb√©m introduzimos uma matriz 20 √ó 3 <b>N</b> que armazena os √≠ndices de vizinhos para cada sala.  Essa matriz acelerar√° o trabalho com <b>G.</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rx/s3/4p/rxs34ps8u9pan8saswot4225uow.jpeg"></div><br>  As matrizes <b>G</b> e <b>N</b> s√£o costuradas no c√≥digo do jogo e n√£o mudam (√© claro, armazenar <b>G √©</b> desnecess√°rio, porque voc√™ pode trabalhar apenas com <b>N</b> , mas por enquanto vamos deixar assim).  Estes s√£o os √≠ndices "verdadeiros" de um determinado dodecaedro de uma vez por todas.  Para o jogador, os √≠ndices de "jogo" s√£o formados, que s√£o uma esp√©cie de m√°scara dos "verdadeiros", em um vetor <b>V de</b> dimens√£o 20, da seguinte maneira: <br><br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  ""    for (byte i = 0; i &lt; 20; i++) { V[i] = i; } //    ""  for (int i = 0; i &lt; 20; i++) { int tmpRand = random.nextInt(20); byte tmpVar = V[i]; V[i] = V[tmpRand]; V[tmpRand] = tmpVar; }</span></span></code> </pre> <br>  Assim, √© obtida a seguinte imagem: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jo/4f/sy/jo4fsylsevqqvfz3vgjbzj0gtfe.jpeg"></div><br>  O vetor V √© formado a cada novo jogo, o que d√° ao jogador uma "nova" masmorra. <br><br>  Para estabelecer a correspond√™ncia entre o √≠ndice da sala "true" e "game", o m√©todo de convers√£o <b>indByNmb</b> √© usado: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">byte</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">indByNmb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> room)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> ind = -<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; V.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (V[i] == room) { ind = i; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ind; }</code> </pre><br>  Na entrada, o m√©todo <b>indByNmb</b> obt√©m o √≠ndice "game" da sala da <b>sala</b> e, na sa√≠da, fornece o <b>ind</b> "true". <br><br>  Depois de gerar a estrutura da masmorra, colocamos: 2 bandos de morcegos, 2 buracos, um Vampus e um jogador: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] randomRooms = {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">17</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">19</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">20</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tmpRand = random.nextInt(<span class="hljs-number"><span class="hljs-number">20</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> tmpVar = randomRooms[i]; randomRooms[i] = randomRooms[tmpRand]; randomRooms[tmpRand] = tmpVar; } P = randomRooms[<span class="hljs-number"><span class="hljs-number">0</span></span>]; W = randomRooms[<span class="hljs-number"><span class="hljs-number">1</span></span>]; Pits[<span class="hljs-number"><span class="hljs-number">0</span></span>] = randomRooms[<span class="hljs-number"><span class="hljs-number">2</span></span>]; Pits[<span class="hljs-number"><span class="hljs-number">1</span></span>] = randomRooms[<span class="hljs-number"><span class="hljs-number">3</span></span>]; Bats[<span class="hljs-number"><span class="hljs-number">0</span></span>] = randomRooms[<span class="hljs-number"><span class="hljs-number">4</span></span>]; Bats[<span class="hljs-number"><span class="hljs-number">1</span></span>] = randomRooms[<span class="hljs-number"><span class="hljs-number">5</span></span>];</code> </pre><br>  Essa coloca√ß√£o garante que n√£o haver√° dois habitantes em uma sala e o jogador n√£o ser√° jogado na sala para o Vampus desde o in√≠cio. <br><br>  A gera√ß√£o completa de masmorras √© a seguinte: <br><br><div class="spoiler">  <b class="spoiler_title">C√≥digo</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] V = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[<span class="hljs-number"><span class="hljs-number">20</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// ""  int P; //  , byte W; //   byte[] Bats = new byte[2]; //    , byte[] Pits = new byte[2]; //    public void generateDungeons() { resetVars(); //      for (int i = 0; i &lt; 20; i++) { int tmpRand = random.nextInt(20); byte tmpVar = V[i]; V[i] = V[tmpRand]; V[tmpRand] = tmpVar; } byte[] randomRooms = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19}; for (int i = 0; i &lt; 20; i++) { int tmpRand = random.nextInt(20); byte tmpVar = randomRooms[i]; randomRooms[i] = randomRooms[tmpRand]; randomRooms[tmpRand] = tmpVar; } P = randomRooms[0]; W = randomRooms[1]; Pits[0] = randomRooms[2]; Pits[1] = randomRooms[3]; Bats[0] = randomRooms[4]; Bats[1] = randomRooms[5]; }</span></span></code> </pre><br></div></div><br>  Agora voc√™ pode implementar todos os algoritmos da mec√¢nica do jogo.  Assim, por exemplo, a sa√≠da das salas vizinhas ocorre quando um jogador <b>entra na</b> sala com o √≠ndice <b>currentRoom</b> : <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printNearRooms</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">byte</span></span></span></span><span class="hljs-function"><span class="hljs-params"> currentRoom)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> ind = indByNmb(currentRoom); appendText(V[N[ind][<span class="hljs-number"><span class="hljs-number">0</span></span>]], V[N[ind][<span class="hljs-number"><span class="hljs-number">1</span></span>]], V[N[ind][<span class="hljs-number"><span class="hljs-number">2</span></span>]]); }</code> </pre><br>  Na entrada, o m√©todo <b>printNearRooms</b> obt√©m o √≠ndice atual de "jogo" da sala <b>currentRoom</b> . <br><br>  Considere a mec√¢nica de um exemplo.  Deixe o jogador ir para uma nova sala e uma mensagem aparecer√°: "Agora estou na sala 8".  O n√∫mero 8 √© um √≠ndice de jogos.  O √≠ndice de sala ‚Äúverdadeiro‚Äù √© 6 (veja as capturas de tela acima).  O c√≥digo est√° trabalhando especificamente com o √≠ndice "true", ou seja,  6. Para 6, os √≠ndices dos vizinhos ‚Äúverdadeiros‚Äù s√£o determinados: 2, 5, 7. Os do ‚Äújogo‚Äù, respectivamente, ser√£o: 10, 0, 7. Mostramos o jogador no log: ‚ÄúEu posso ir para as salas 10, 0, 7‚Äù. <br><br>  Assim, formando cada novo jogo o vetor <b>V</b> e trabalhando com os √≠ndices "verdadeiro" e "jogo" do gr√°fico de labirinto, √© criada a apar√™ncia do fato de que cada jogo √© √∫nico. <br><br>  Gra√ßas √† fun√ß√£o <b>appendText, as</b> mensagens s√£o exibidas em um intervalo especificado.  N√≥s a encontraremos mais tarde. <br><br>  Aqui est√° um exemplo de como verificar a sala quanto √† proximidade de ratos: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isBatsNear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> answer = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> indP = indByNmb(P); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>; i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((V[N[indP][i]] == Bats[<span class="hljs-number"><span class="hljs-number">0</span></span>]) || (V[N[indP][i]] == Bats[<span class="hljs-number"><span class="hljs-number">1</span></span>])) { answer = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> answer; }</code> </pre><br><a name="to7"></a><br><h2>  7. Armazenamento de mensagens do jogo e sua sa√≠da para o jogador </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  O jogo cl√°ssico foi um processo de intera√ß√£o entre o jogador e o console, ou seja,  o jogo era puramente textual.  Eu queria salvar esse recurso para o qual dividi todas as mensagens do jogo em blocos, por exemplo: <br><br><ul><li>  A primeira mensagem do novo jogo. </li><li>  Uma mensagem quando um jogador se move. </li><li>  Mensagem nas proximidades dos po√ßos. </li><li>  Mensagem ao mover o Vampus. </li><li>  Mensagem ao cair em um buraco. </li></ul><br>  O texto √© armazenado em um arquivo XML.  Cada bloco tem v√°rias op√ß√µes de mensagens para uma variedade de jogabilidade. <br><br>  Um exemplo de bloco de mensagens que √© exibido se houver um buraco em uma das salas vizinhas: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_1"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî  \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_2"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî    \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_3"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî     \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_4"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî  , \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear_5"</span></span></span><span class="hljs-tag">&gt;</span></span>‚Äî   \n<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string-array</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"g_pitsNear"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_3<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_4<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span>@string/g_pitsNear_5<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string-array</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Com essa estrutura, voc√™ pode editar facilmente os existentes ou adicionar novas mensagens sem afetar o c√≥digo Java. <br><br>  Se, por exemplo, ao verificar a sala, o m√©todo <b>isBatsNear</b> mostrado anteriormente retornou <b>true</b> , obtemos o bloco de mensagens necess√°rio do XML e, ent√£o, assumimos aleatoriamente um como argumento para <b>appendText</b> : <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isBatsNear()) { String[] g_batsNear = getResources().getStringArray(R.array.g_batsNear); appendText(g_batsNear[random.nextInt(g_batsNear.length)]); }</code> </pre><br>  As mensagens do jogo s√£o enviadas para o console, que √© um objeto <b>TextView</b> .  Vamos dar uma olhada no m√©todo <b>appendText</b> . <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String str)</span></span></span><span class="hljs-function"> </span></span>{ msgBuffer.add(str); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isTimerGameMsgWork) { mTimerGameMsg.run(); isTimerGameMsgWork = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } }</code> </pre><br>  Quando se torna necess√°rio exibir uma mensagem do jogo, o m√©todo <b>appendText</b> √© <b>chamado</b> , o que leva como argumento.  No pr√≥prio m√©todo, uma linha √© adicionada primeiro ao buffer <b>msgBuffer</b> .  Isso √© seguido pela verifica√ß√£o da vari√°vel booleana <b>isTimerGameMsgWork</b> .  Aceita <b>true</b> nos casos em que o timer <b>mTimerGameMsg</b> √© <b>iniciado</b> .  Quando esse timer funciona, a partir do buffer <b>msgBuffer, de</b> acordo com o princ√≠pio FIFO (primeiro a <b>entrar,</b> primeiro a sair), as mensagens s√£o <b>recebidas</b> em um intervalo especificado <b>mIntervalGameMsg</b> e adicionadas ao log do jogo - <b>txtViewGameLog</b> . <br><br>  O c√≥digo completo de sa√≠da da mensagem: <br><br><div class="spoiler">  <b class="spoiler_title">C√≥digo</b> <div class="spoiler_text"><pre> <code class="java hljs">ArrayList&lt;String&gt; msgBuffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArrayList&lt;&gt;(); Handler mHandlerGameMsg; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> mIntervalGameMsg = <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isTimerGameMsgWork = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">appendText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String str)</span></span></span><span class="hljs-function"> </span></span>{ msgBuffer.add(str); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isTimerGameMsgWork) { mTimerGameMsg.run(); isTimerGameMsgWork = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Runnable mTimerGameMsg = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Runnable() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (msgBuffer.size() == <span class="hljs-number"><span class="hljs-number">0</span></span>) { mHandlerGameMsg.removeCallbacks(mTimerGameMsg); isTimerGameMsgWork = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { txtViewGameLog.append(msgBuffer.get(<span class="hljs-number"><span class="hljs-number">0</span></span>)); msgBuffer.remove(<span class="hljs-number"><span class="hljs-number">0</span></span>); mHandlerGameMsg.postDelayed(mTimerGameMsg, mIntervalGameMsg); } } };</code> </pre><br></div></div><br><a name="to8"></a><br><h2>  8. O primeiro resultado </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  Ap√≥s um m√™s de desenvolvimento, a primeira vers√£o jog√°vel do jogo com funcionalidade totalmente implementada foi recebida.  Anexo capturas de tela: <br><br><div class="spoiler">  <b class="spoiler_title">Capturas de tela da primeira vers√£o do jogo</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/zh/tq/fc/zhtqfcmbe0mrsyhzs8fkamiczcq.png" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1j/rp/pp/1jrpppw8ilbwgsqjeinxb0spkss.png" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/s7/rh/sns7rh_i4jxngizz-qwh-1fh-0a.png" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vo/ey/iz/voeyiz_ddei0p8o8lxxjdamzn18.png" width="300"></div><br></div></div><br>  Nas capturas de tela apresentadas, voc√™ pode ver: o menu principal, a janela de regras, a janela de configura√ß√µes, a janela do jogo. <br><br>  Obviamente, entendi que o resultado era completamente desinteressante.  O principal √© que adquiri experi√™ncia pr√°tica em AS e Java, que foi a primeira tarefa. <br><br>  O jogador, como no jogo cl√°ssico, teve que interagir atrav√©s do console: digite o n√∫mero da sala para mover ou a rota para a seta voar.  Nas configura√ß√µes, possibilitei alterar o tamanho da fonte e a transpar√™ncia do plano de fundo.  Supus que, para cada janela do jogo, houvesse sua pr√≥pria imagem de fundo (para diversificar levemente a jogabilidade, ha!). <br><br>  Em seguida, planejei substituir as fotos existentes (que sem escr√∫pulos tirei da Internet) pelas que o artista desenharia.  Depois, lan√ßava o jogo no mercado Play e esquecia com seguran√ßa, aplicando a experi√™ncia adquirida a novos projetos.  E ent√£o eu n√£o podia imaginar o quanto Vampus poderia mudar ... <br><a name="to9"></a><br><h2>  9. At√© jogos pequenos s√£o dignos de hist√≥ria. </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  Quando uma pessoa vem trabalhar com a alma, o projeto apenas se beneficia disso.  Eu tive sorte que a artista, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Anastasia Frolikova</a> , acabou sendo uma pessoa assim.  I.e.  em vez de apenas desenhar o que eu precisava, ela se interessou pelo mundo do jogo e queria entender como ele funciona.  E de repente descobriu-se que em geral n√£o havia paz!  Quem √© esse vampus?  E por que um jogador deveria mat√°-lo?  Como s√£o os quartos do Vampus?  E assim por diante, sobre o que eu n√£o pensava e que n√£o planejava contar ao jogador.  Como resultado, concordamos que mesmo um jogo aparentemente t√£o pequeno deveria ter sua pr√≥pria hist√≥ria.  E ela apareceu. <br><br>  Segundo a nossa lenda, os vampiros, embora antigos, mas n√£o uma criatura m√≠tica do mal, que gostam de tirar sarro das pessoas.  Sim, ele vive em um labirinto, mas esse labirinto n√£o tem a forma de uma masmorra escura cl√°ssica, mas a forma de uma casa inimagin√°vel que consiste em uma pilha de salas, cujo conte√∫do caracteriza Vampus.  Por exemplo, em uma das salas, h√° um cinema, nas paredes onde h√° p√¥steres de seus filmes favoritos, e na outra, o arm√°rio, onde ele prepara suas "brincadeiras". <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/nz/n4/wt/nzn4wtiuursbcwufsw51ylpfuc4.jpeg"></div><br>  O jogador de um ca√ßador sem nome se transformou em um regular no f√≥rum criptozool√≥gico que quer provar a exist√™ncia de Vampus.  Substitu√≠mos o arco e flecha cl√°ssico por uma c√¢mera e um filme, e o objetivo do jogo n√£o era matar Vampus, mas tirar sua fotografia.  A prop√≥sito, o menu principal foi refeito em um f√≥rum no qual as pessoas discutem o Vampus e, a partir da discuss√£o, o jogador pode aprender sobre isso. <br><br><div class="spoiler">  <b class="spoiler_title">A primeira vers√£o do menu principal, feita na forma de um f√≥rum</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jj/m9/qi/jjm9qirjviamgd49jzag_p-edqq.jpeg" width="300"></div></div></div><br>  Quanto aos outros aspectos, eles permaneceram quase inalterados: os ratos agem da mesma maneira, e entrar no buraco come√ßou a levar a um acidente, a quebra da c√¢mera e o fim do jogo (e n√£o a morte do jogador). <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/oz/sm/v_/ozsmv_qxhdyepdscbqx5qs5jjoi.jpeg"></div><br>  Outro momento sobre a c√¢mera.  No jogo cl√°ssico, o jogador podia atirar uma flecha no intervalo de 1 a 5 quartos e parecia l√≥gico.  Temos uma c√¢mera em vez de um arco (tirando fotos de 1 a 3 quartos por vez, mas trabalhando como uma flecha cl√°ssica que atinge Vampus).  E isso ... parece estranho, n√£o √©?  Havia uma ideia de reduzir o alcance da c√¢mera para 1 sala, para que voc√™ pudesse tirar fotos apenas da vizinha, mas isso primeiro complica o jogo e, em segundo lugar, podem ser obtidas situa√ß√µes em que o jogo n√£o pode ser vencido, o que est√° errado.  Em geral, esse √© o momento que pessoalmente ainda me assombra, mas ainda n√£o encontrei uma solu√ß√£o. <br><br>  No que diz respeito ao estilo e humor do jogo.  Quase todos os jogos sobre Vampus s√£o feitos em tons de cinza chatos, e as a√ß√µes ocorrem em locais escuros das masmorras.  Portanto, decidimos que nosso jogo deveria ser diferente de tudo isso e ser feito com humor e cores brilhantes. <br><br><div style="text-align:center;"><img width="300" src="https://habrastorage.org/webt/tk/9l/dz/tk9ldz0tthvuxjyct602egaatoq.jpeg"></div><br><br><a name="to10"></a><br><h2>  10. A Transforma√ß√£o Vampus e o resultado final </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  Ent√£o, mais 2 meses de trabalho no jogo estavam esperando por n√≥s.  Desde Vampus tem 20 quartos, cada um tem seu pr√≥prio interior.  Al√©m disso, foram sorteados √≠cones de conquistas, √≠cones no jogo, decis√µes sobre design em geral e UI.  Todo o texto do jogo tamb√©m foi adicionado, o c√≥digo foi complementado e otimizado, novas fun√ß√µes foram adicionadas (por exemplo, um bloco de notas apareceu para registrar informa√ß√µes durante o jogo).  Em geral, o Vampus passou por grandes mudan√ßas. <br><br>  As salas, por exemplo, foram criadas da seguinte maneira: <br><br><img src="https://habrastorage.org/webt/in/q4/jc/inq4jcvrpg6vhfmmlcxvgumo1iq.jpeg" alt="imagem"><br>  Existem 20 quartos, todos eles √∫nicos, e o jogador recebe um labirinto "novo" a cada jogo.  Como criar todas as novas fotos de jogos anexadas a novas salas?  O mais simples √© usar a mesma abordagem de √≠ndices "verdadeiros" e "jogos": <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">changeImgOfRoom</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ ImageView img = findViewById(R.id.imgRoom); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ind = indByNmb(P); String imgName = <span class="hljs-string"><span class="hljs-string">"room_"</span></span> + ind; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> id = getResources().getIdentifier(imgName, <span class="hljs-string"><span class="hljs-string">"drawable"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getPackageName()); Glide.with(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) .load(id) .transition(DrawableTransitionOptions.withCrossFade()) .into(img); }</code> </pre><br>  Imagens de um formato quadrado (para reduzir a distor√ß√£o ao visualizar em telas diferentes) s√£o armazenadas em recursos com os nomes [room_0;  room_1;  ..., sala_19].  E eles est√£o, de fato, associados aos √≠ndices "verdadeiros" de dodecaedro, mas para o jogador, cada novo jogo para a mesma sala ter√° imagens diferentes.  Por que isso √© necess√°rio?  Para permitir que um grupo de jogo espec√≠fico correlacione informa√ß√µes textuais com a imagem de uma sala espec√≠fica ("sim, eu lembro que na sala X, que era a sala de estar, havia um rascunho") e que n√£o deu certo que "por que √© sempre X √© a mesma foto?  Tudo para variar e ajudar o jogador (no entanto, como a experi√™ncia demonstrou, n√£o h√° ajuda na memoriza√ß√£o visual, √© mais eficiente trabalhar com texto). <br><br>  Por fim, temos uma nova vers√£o do jogo.  E voc√™ sabe o que?  O vampus se tornou muito atraente e, o mais importante, ainda √© o mesmo Vampus cl√°ssico, mas em uma nova casa aconchegante! <br><br><div class="spoiler">  <b class="spoiler_title">Capturas de tela da segunda vers√£o do jogo</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qp/9h/mb/qp9hmbsp51ktglkb7iod8tm9ysq.jpeg" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pe/wn/hn/pewnhnr7px4ejhf5ko1xw11dwlk.jpeg" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ll/cd/ch/llcdchk4835c5xxhkkoeajjbzvi.jpeg" width="300"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/bw/ny/zobwnyzsxnrqs0-cnhvdlzag1zw.jpeg" width="300"></div><br></div></div><br>  Nas capturas de tela: o menu principal, a janela de regras, a janela de configura√ß√µes, a janela do jogo. <br><br>  No que diz respeito √† mec√¢nica, ela √© apenas ligeiramente modificada e renomeada (bem, de fato, h√° uma diferen√ßa: uma c√¢mera ou um arco, se voc√™ precisar fazer a mesma coisa?).  A mudan√ßa mais not√°vel na mec√¢nica √© simplificar o processo de intera√ß√£o entre o jogador e o jogo - a entrada cl√°ssica de n√∫meros de quarto usando o teclado foi removida.  Agora, para alternar entre salas, voc√™ precisa selecionar 1 dentre 3 n√∫meros na janela pop-up e, para formar a ‚Äúrota‚Äù para fotografar, basta rolar as rodas no tambor: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_f/is/yj/_fisyjclhhj5unjkm9myeinpe0w.jpeg" width="300"></div><br>  No v√≠deo abaixo, voc√™ pode ver o resultado final: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Yfa1x3a6Hcg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="to11"></a><br><h2>  11. Conclus√£o </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conte√∫do</a> <br><br>  A primeira vers√£o do jogo foi recebida por mim em um m√™s de desenvolvimento, alocando 1-2 horas ap√≥s o trabalho.  Ao mesmo tempo, nem o AS nem o Java eram familiares para mim.  A segunda vers√£o do jogo levou mais 2 meses.  Assim, apenas 3 meses de trabalho de lazer. <br><br>  √â claro que, desta forma, o jogo n√£o √© para uma ampla variedade, porque  pode parecer complicado e n√£o emocionante para um jogador moderno, mas mais importante, provavelmente, mantendo o esp√≠rito dos jogos cl√°ssicos, voc√™ n√£o acha? <br><br>  Estou feliz com o resultado?  Definitivamente sim.  Eu ganhei muita experi√™ncia tanto em programa√ß√£o quanto em trabalho em equipe.  Gosto tanto da mec√¢nica resultante do jogo quanto de seu componente visual.  Gostaria de mudar alguma coisa?  Obviamente, n√£o h√° limites para a perfei√ß√£o e voc√™ sempre pode adicionar / melhorar algo, mas n√£o pode fazer isso para sempre! <br><br>  Este jogo √© interessante?  Bem, n√£o cabe a mim decidir.  Mas deixe Vampus ficar confort√°vel na casa que constru√≠mos para ele com muito amor e aten√ß√£o. <br><br>  Desejo-lhe sucesso! <br><br>  Obrigado e cuidado com o Vampus! <br><br>  PS Tarefas que surgem constantemente e a alegria de resolv√™-las √© exatamente o que eu amo programar.  Espero que voc√™ n√£o tenha menos prazer. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462943/">https://habr.com/ru/post/pt462943/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462929/index.html">Vejo voc√™: t√°ticas de mascaramento de morcegos</a></li>
<li><a href="../pt462933/index.html">Como funciona o bloqueio da Internet: uma revis√£o dos m√©todos modernos com um exemplo real</a></li>
<li><a href="../pt462935/index.html">Como manter o foco enquanto trabalha em um escrit√≥rio de plano aberto?</a></li>
<li><a href="../pt462937/index.html">O conceito de malha persistente para controlar a infraestrutura de TI</a></li>
<li><a href="../pt462939/index.html">Os 10 principais relat√≥rios C ++ da R√∫ssia e a lista de reprodu√ß√£o da confer√™ncia de acesso aberto</a></li>
<li><a href="../pt462945/index.html">Gere senhas √∫nicas para 2FA em JS usando a API Web Crypto</a></li>
<li><a href="../pt462947/index.html">A hist√≥ria de como o PVS-Studio encontrou um erro na biblioteca usada em ... PVS-Studio</a></li>
<li><a href="../pt462949/index.html">A hist√≥ria de como o PVS-Studio encontrou um erro na biblioteca usada em ... PVS-Studio</a></li>
<li><a href="../pt462951/index.html">Onde uma pessoa v√™ formas, a IA v√™ texturas</a></li>
<li><a href="../pt462955/index.html">Transforma√ß√£o digital do treinamento e certifica√ß√£o da equipe de campo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>