<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëá üë®üèΩ‚Äçüè≠ üôé Dez pessoas em 90 mil sites: como n√£o enlouquecer üÜî üíÖüèº üêû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√°, meu nome √© Vera Sivakova. Eu trabalho com os principais parceiros da Yandex.Kassi - conecto grandes lojas e servi√ßos, lan√ßo projetos e viajo para...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dez pessoas em 90 mil sites: como n√£o enlouquecer</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yamoney/blog/426583/"><p>  Ol√°, meu nome √© Vera Sivakova.  Eu trabalho com os principais parceiros da Yandex.Kassi - conecto grandes lojas e servi√ßos, lan√ßo projetos e viajo para reuni√µes em todo o mundo.  Em geral, eu sigo que estava tudo bem. </p><br><p>  Todo funcion√°rio da Yandex.Money pode mudar de profiss√£o uma vez por ano - escolha um departamento e trabalhe l√° por v√°rios dias.  Portanto, h√° um m√™s, sentei-me em Sapsan e cheguei a S√£o Petersburgo.  Um departamento de monitoramento trabalha l√°, que tamb√©m monitora que 90.000 sites conectados √† bilheteria est√£o indo bem e decidimos unir for√ßas. </p><br><p><img src="https://habrastorage.org/webt/nk/aw/gc/nkawgcaslqu2prxrf2i8t4rp0qy.png"><br>  <em>Como n√£o enlouquecer?</em>  <em>N√£o √© exatamente o mesmo</em> (fonte: reddit.com) </p><br><p>  Esta √© uma hist√≥ria sobre como nosso monitoramento funciona e o que aprendi em alguns dias em outro departamento. </p><a name="habracut"></a><br><p>  A cada segundo, cerca de 600 transa√ß√µes passam pelo servi√ßo e tudo isso precisa ser monitorado em tempo real - mas a que horas √© hora de soar o alarme se algo acontecer?  Precisamos de uma vis√£o sistem√°tica de quase tudo. </p><br><p> √â uma boa pr√°tica analisar o sistema do ponto de vista t√©cnico e n√£o esquecer as m√©tricas de neg√≥cios - o n√∫mero de pagamentos, rotatividade e outros par√¢metros. </p><br><p>  Em sistemas pequenos, o olhar atento do administrador principal (geralmente o √∫nico) √© suficiente.  Por√©m, quando existem muitos processos, os funcion√°rios n√£o podem monitorar tudo manualmente, portanto a automa√ß√£o m√°xima ser√° a melhor estrat√©gia.  Nada funcionar√° sem o conhecimento especializado e os esfor√ßos da equipe, pois o monitoramento √© a melhoria cont√≠nua, a an√°lise e a capacidade de escolher m√©tricas e gatilhos competentes.  Eles trabalhar√£o em caso de desvio das condi√ß√µes fornecidas e reportar√£o uma anomalia. </p><br><p>  N√≥s distinguimos tr√™s n√≠veis de monitoramento, cada um com seus pr√≥prios indicadores importantes - o n√≠vel do sistema, o n√≠vel da l√≥gica de neg√≥cios e o n√≠vel das contrapartes. </p><br><h2 id="uroven-sistemy">  N√≠vel do sistema </h2><br><p>  O mais importante aqui √© o monitoramento 24 horas da infraestrutura.  Das ferramentas que usamos o Zabbix para coletar dados em tempo real - ele notifica sobre a opera√ß√£o de servidores e data centers, a qualidade da rede, a disponibilidade de componentes e fontes de dados. </p><br><p>  O monitoramento da infraestrutura de TI √© um trabalho muito respons√°vel, pois a falha nesse n√≠vel √© repleta de inoperabilidade do sistema e medidas desesperadas.  Portanto, √© importante n√£o apenas responder a problemas "intermitentes", mas tamb√©m analisar tend√™ncias e dados hist√≥ricos - isso permitir√° um aviso oportuno de poss√≠veis pontos de falha e prev√™ a necessidade de dimensionamento.  A regra funciona para todos os indicadores e n√≠veis de monitoramento, incluindo neg√≥cios. </p><br><p>  Para pontos cr√≠ticos, os limites do gatilho devem ser selecionados abaixo.  Por exemplo, se o tempo de resposta de um roteador aumentar, transferimos o tr√°fego para outro e eliminamos a causa no primeiro.  Isso acionou um gatilho de aviso, que permite que voc√™ receba notifica√ß√µes de poss√≠veis problemas muito cedo, o que fornece uma reserva de tempo para resposta, a capacidade de prever altera√ß√µes e evitar desastres. </p><br><h2 id="uroven-biznes-logiki">  N√≠vel de l√≥gica de neg√≥cios </h2><br><p>  Cada equipe define os processos que precisam ser rastreados, suas prioridades e m√©tricas pessoais.  Por exemplo, a equipe do Caixa possui dezenas de processos de neg√≥cios, como pagamento por cada m√©todo dispon√≠vel - cart√µes, carteiras eletr√¥nicas, atrav√©s de bancos e terminais on-line, com√©rcio m√≥vel, registros de envio etc.  Como ferramenta principal para coletar e exibir dados sobre o trabalho da l√≥gica de neg√≥cios, usamos o Grafite em conjunto com o Grafana. </p><br><p>  Nesse n√≠vel, √© importante aderir a uma abordagem sistem√°tica e tentar se afastar dos bin√°rios e pouco informativos "funciona / n√£o funciona". </p><br><p>  Por exemplo, existe uma m√©trica "N√∫mero de pagamentos com cart√£o bem-sucedidos".  Se come√ßar a piscar, significa que o fluxo de trabalho diminuiu.  Nesse caso, voc√™ precisa entender qual √© exatamente o motivo e levar em considera√ß√£o todos os componentes envolvidos nesse processo.  No caso de uma diminui√ß√£o no n√∫mero de transa√ß√µes, voc√™ pode pensar imediatamente no fato de que existem dificuldades do lado do banco adquirente.  Mas os gr√°ficos mostram que, com a disponibilidade dos bancos, est√° tudo bem.  Ent√£o voc√™ precisa investigar mais, e no final, por exemplo, todas as perguntas est√£o no layout: por algum motivo, o bot√£o "Pagar" desapareceu ou ficou inativo. </p><br><h2 id="uroven-kontragentov">  N√≠vel da contraparte </h2><br><p>  Aqui estamos falando de contrapartes espec√≠ficas - por exemplo, a aquisi√ß√£o de bancos e comerciantes. </p><br><p>  Selecionamos agendas e gatilhos separados para adquirentes, cuja disponibilidade devemos rastrear o tempo todo.  Para n√≥s, como servi√ßo de pagamento, a estabilidade √© muito importante, portanto, no caso de uma falha de um dos bancos, transferimos imediatamente o fluxo para a reserva. </p><br><p><img src="https://habrastorage.org/webt/go/_c/2e/go_c2eclhtetnklaej4ohkk04qy.png"><br>  <em>Um banco falhou, mas outro conectado automaticamente</em> </p><br><p>  Aprendemos a redirecionar o fluxo de trabalho razoavelmente bem e em tempo h√°bil se ocorrerem erros. </p><br><p><img src="https://habrastorage.org/webt/fe/kz/hn/fekzhnwwc8rkqb0hf7ms_-cfwjo.png"><br>  <em>Um dos bancos registrou um aumento nos erros de pagamento</em> </p><br><p><img src="https://habrastorage.org/webt/13/vf/f-/13vff-8knq05k4j59kovhms8yvs.png"><br>  <em>Traduzido - e est√° tudo em ordem.</em>  <em>Os valores do eixo Y n√£o s√£o proporcionais</em> </p><br><p>  Os adquirentes podem falhar por v√°rios motivos nos n√≠veis j√° descritos - sistemas e l√≥gica de neg√≥cios.  Ningu√©m est√° imune a problemas imprevistos e n√£o pode garantir 100% de disponibilidade.  Tamb√©m vale a pena lembrar sobre o trabalho t√©cnico planejado e as libera√ß√µes, quando voc√™ precisa monitorar de perto o andamento dos neg√≥cios.  A quest√£o da redund√¢ncia e troca autom√°tica √© cr√≠tica, pois simples significa interromper os pagamentos para os neg√≥cios. </p><br><p>  Trabalhamos com v√°rios bancos ao mesmo tempo para minimizar os riscos de inatividade e otimizar os pagamentos com cart√£o SR.  SR (taxa de sucesso) ou a convers√£o √© uma m√©trica comercial calculada como a propor√ß√£o do n√∫mero de pagamentos bem-sucedidos e o n√∫mero total de transa√ß√µes.  Diferentes empresas avaliam a convers√£o da sua maneira: por exemplo, algu√©m come√ßa a avaliar na p√°gina de pagamento, outras depois de clicar no bot√£o "Pagar".  Mas, em geral, o SR √© influenciado por muitos fatores diferentes - MCC, se h√° 3D-Secure no pagamento, na geografia dos pagadores, nos pagamentos recorrentes ou n√£o.  A SR ‚Äúm√©dia hospitalar‚Äù √© imposs√≠vel de determinar e n√£o precisa saber - em cada caso, ser√° seu pr√≥prio valor, que deve ser otimizado. </p><br><p>  Toda a variedade de erros pode ser dividida em dois grandes grupos. </p><br><ol><li>  <strong>Erros que podem ser evitados</strong> - por exemplo, o pagamento deste pa√≠s √© proibido.  Se voc√™ tem certeza de que este n√£o √© um ataque fraudulento e possui usu√°rios em todo o mundo, nesse caso, √© necess√°rio conectar a possibilidade de pagamento com cart√µes de qualquer emissor.  A prop√≥sito, isso pode ser feito na conta pessoal do Yandex Cashier. </li><li>  <strong>Erros que n√£o podem ser influenciados</strong> - por exemplo, o cart√£o est√° bloqueado.  Aqui, apenas a reemiss√£o ou uma tentativa de repetir o pagamento com outro cart√£o como parte de uma nova transa√ß√£o ajudar√°. </li></ol><br><p>  Muitos escolhem um provedor de pagamento a uma taxa.  De fato, a taxa n√£o √© o √∫nico valor que deve ser levado em considera√ß√£o.  Voc√™ tamb√©m precisa observar a porcentagem de pagamentos bem-sucedidos (SR) - porque ningu√©m tem 100% de convers√£o e esse valor varia muito de banco para banco.  Tamb√©m √© necess√°rio considerar como o cen√°rio do usu√°rio se parece em geral: quantas etapas voc√™ precisa executar antes de pagar, se a interface est√° limpa etc. </p><br><h2 id="kak-konversiya-vliyaet-na-pribyl">  Como a convers√£o afeta os lucros </h2><br><p><img src="https://habrastorage.org/webt/vy/8x/7m/vy8x7myw1csu5qa3vnrdmusryv8.png"><br>  <em>No segundo caso, a comiss√£o por servi√ßos √© maior, mas a convers√£o tamb√©m √© maior, porque s√£o usadas reserva e configura√ß√£o adequada do gateway.</em> </p><br><p>  Como pode ser visto no exemplo, uma solu√ß√£o melhor para a empresa seria prestar um servi√ßo melhor e, apesar de a comiss√£o ser maior devido √† diferen√ßa na qualidade da aquisi√ß√£o, no final temos 3 538 080 - 2 847 000 = 691 080 rublos por m√™s!  E isso √© 8 milh√µes por ano, o que √© muito dinheiro para os neg√≥cios. </p><br><p>  Convers√£o, rotatividade e taxas s√£o arbitr√°rias, mas o exemplo demonstra que o principal no servi√ßo √© sua estabilidade e qualidade.  E isso j√° implica uma maior convers√£o e, como resultado, uma maior rotatividade do comerciante. </p><br><h2 id="kak-podklyuchaetsya-merchant">  Como o comerciante est√° conectado </h2><br><p>  Como mencionado anteriormente, tentamos cobrir tudo com m√©tricas e gatilhos que disparam automaticamente em um evento.  Vamos ver como tudo acontece no exemplo de monitoramento de um dos comerciantes. </p><br><p>  Ap√≥s conectar-se ao Caixa, o comerciante, se necess√°rio, √© monitorado.  Criamos um gr√°fico no Grafana e configuramos as m√©tricas pelas quais os alertas autom√°ticos s√£o acionados em caso de desvio dos valores "normais" fornecidos. </p><br><p>  Usamos o Moira para enviar notifica√ß√µes para o bate-papo do grupo de monitoramento, que verificar√° rapidamente os detalhes.  A notifica√ß√£o cont√©m um link para a programa√ß√£o e os detalhes do incidente. </p><br><p><img src="https://habrastorage.org/webt/kr/g-/ef/krg-efr_0h_ou3yxyz0-aqwgdcy.png"><br>  <em>Absolutamente um exemplo real de uma mensagem de um bot</em> </p><br><p>  Ap√≥s analisar o gr√°fico, o especialista do grupo de monitoramento costuma usar o Kibana para visualizar os logs.  Aqui a situa√ß√£o pode ser prosaica e, nos registros, obviamente, um erro ser√° vis√≠vel ou ser√° necess√°ria uma participa√ß√£o adicional de analistas para analisar as causas da falha. </p><br><p>  No futuro, queremos configurar a notifica√ß√£o autom√°tica dos comerciantes sobre erros do lado deles, por exemplo, sobre inacessibilidade do servidor ou respostas n√£o relacionadas ao protocolo.  Isso permitir√° que voc√™ responda rapidamente a uma falha e forne√ßa informa√ß√µes √†s contrapartes para eliminar as causas. </p><br><p>  Al√©m do lado t√©cnico, tamb√©m monitoramos cuidadosamente as m√©tricas de neg√≥cios, como rotatividade, receita e sa√≠da, mas esse parece ser o t√≥pico das hist√≥rias a seguir. </p><br><h3 id="samoe-glavnoe">  A coisa mais importante </h3><br><p>  Meu "dia de desobedi√™ncia" (que √© o que chamamos de transi√ß√£o tempor√°ria para outro departamento) terminou e voltei a Moscou.  Durante 2 dias no departamento de monitoramento, aprendi muito e aperfei√ßoei o conhecimento atual. </p><br><ul><li>  A tarefa de monitoramento √© fornecer informa√ß√µes relevantes sobre o estado do sistema em todos os n√≠veis; </li><li>  Escolha m√©tricas e gatilhos competentes - 90% de sucesso; </li><li>  Nos servi√ßos de pagamento, a convers√£o atinge a oferta; </li><li>  Voc√™ precisa seguir a t√©cnica e lembrar-se das m√©tricas de neg√≥cios; </li><li>  Precisamos de uma vis√£o sistem√°tica dos processos e da capacidade de analisar relacionamentos; </li></ul><br><p>  E ainda - seja grato.  Acompanhamento pessoal, obrigado! </p><br><hr><br><p>  <em>Isso √© tudo.</em>  <em>Fa√ßa perguntas, assine o nosso blog e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">venha</a> visitar.</em> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt426583/">https://habr.com/ru/post/pt426583/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt426571/index.html">Uma abordagem sistem√°tica da velocidade: medi√ß√µes on-line no front-end</a></li>
<li><a href="../pt426573/index.html">ZeroNights 2018. Recarregar</a></li>
<li><a href="../pt426575/index.html">Relat√≥rio do Clube de Roma de 2018, cap√≠tulo 1.12: ‚ÄúDe um mundo vazio para um mundo completo‚Äù</a></li>
<li><a href="../pt426579/index.html">Engie e Ledger desenvolvem uma solu√ß√£o blockchain de hardware para armazenar dados gerados por fontes de energia verde</a></li>
<li><a href="../pt426581/index.html">Li√ß√£o aberta "Vis√£o geral dos recursos do Node.js."</a></li>
<li><a href="../pt426585/index.html">Sob press√£o do Instagram e do Facebook: por que o Snapchat pode deixar a troca e por que √© necess√°rio</a></li>
<li><a href="../pt426587/index.html">Problemas algor√≠tmicos no frontend. Exemplos Yandex e competi√ß√£o</a></li>
<li><a href="../pt426591/index.html">Mestre em Posturas: Fique Vivo</a></li>
<li><a href="../pt426593/index.html">DJI Phantom 4 RTK: mapeamento de pr√≥xima gera√ß√£o</a></li>
<li><a href="../pt426595/index.html">Richard Hamming ‚ÄúCap√≠tulo inexistente‚Äù: como sabemos o que sabemos (de 1 a 10 minutos em 40)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>