<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ù üßùüèæ üôã Le principe difficile de la responsabilit√© unique üòµ üöî ‚òïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Contexte 
 Au cours des deux derni√®res ann√©es, j'ai particip√© √† un grand nombre d'entrevues. Pour chacun d'eux, j'ai interrog√© les requ√©rants sur le p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Le principe difficile de la responsabilit√© unique</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449586/"><h1>  Contexte </h1><br>  Au cours des deux derni√®res ann√©es, j'ai particip√© √† un grand nombre d'entrevues.  Pour chacun d'eux, j'ai interrog√© les requ√©rants sur le principe de la responsabilit√© exclusive (ci-apr√®s SRP).  Et la plupart des gens ne savent rien du principe.  Et m√™me parmi ceux qui pouvaient lire la d√©finition, presque personne ne pouvait dire comment ils utilisent ce principe dans leur travail.  Ils ne pouvaient pas dire comment SRP affecte le code qu'ils √©crivent ou l'examen du code de leurs coll√®gues.  Certains d'entre eux avaient √©galement l'id√©e fausse que SRP, comme l'ensemble de SOLID, n'est pertinent que pour la programmation orient√©e objet.  De plus, souvent, les gens ne pouvaient pas identifier les cas √©vidents de violation de ce principe, simplement parce que le code √©tait √©crit dans le style recommand√© par le cadre bien connu. <br>  Redux est un excellent exemple d'un cadre dont la directive viole SRP. <br><a name="habracut"></a><br><h1>  Questions de SRP </h1><br>  Je veux commencer par la valeur de ce principe, avec les avantages qu'il apporte.  Et je tiens √©galement √† noter que le principe s'applique non seulement √† la POO, mais aussi √† la programmation proc√©durale, fonctionnelle et m√™me d√©clarative.  Le HTML, en tant que repr√©sentant de ce dernier, peut et doit √©galement √™tre d√©compos√©, surtout maintenant lorsqu'il est contr√¥l√© par des cadres d'interface utilisateur tels que React ou Angular.  En outre, le principe s'applique √† d'autres domaines d'ing√©nierie.  Et non seulement l'ing√©nierie, il y avait une telle expression dans les sujets militaires: ¬´diviser pour mieux r√©gner¬ª, qui est dans l'ensemble l'incarnation du m√™me principe.  La complexit√© tue, divisez-la en parties et vous gagnerez. <br>  En ce qui concerne les autres domaines d'ing√©nierie, ici sur le moyeu, il y avait un article int√©ressant sur la fa√ßon dont l'avion en cours de d√©veloppement avait des moteurs en panne, n'est pas pass√© en marche arri√®re √† la demande du pilote.  Le probl√®me √©tait qu'ils avaient mal interpr√©t√© l'√©tat du ch√¢ssis.  Au lieu de s'appuyer sur les syst√®mes contr√¥lant le ch√¢ssis, le contr√¥leur du moteur lit directement les capteurs, les interrupteurs de fin de course, etc. situ√©s dans le ch√¢ssis.  Il a √©galement √©t√© mentionn√© dans l'article que le moteur doit subir une longue certification avant m√™me d'√™tre install√© sur un prototype d'avion.  Et la violation de SRP dans ce cas a clairement conduit au fait que lors du changement de conception du ch√¢ssis, le code dans le contr√¥leur du moteur devait √™tre modifi√© et recertifi√©.  Pire encore, une violation de ce principe valait presque l'avion et la vie du pilote.  Heureusement, notre programmation quotidienne ne menace pas de telles cons√©quences, cependant, vous ne devez toujours pas n√©gliger les principes d'√©criture d'un bon code.  Et voici pourquoi: <br><br><ol><li>  La d√©composition du code r√©duit sa complexit√©.  Par exemple, si la solution au probl√®me vous oblige √† √©crire du code avec une complexit√© cyclomatique de quatre, alors la m√©thode qui est responsable de r√©soudre deux de ces probl√®mes en m√™me temps n√©cessitera du code avec la complexit√© 16. Si elle est divis√©e en deux m√©thodes, la complexit√© totale sera de 8. Bien s√ªr, ce n'est pas toujours revient au montant contre le travail, mais la tendance sera √† peu pr√®s la m√™me de toute fa√ßon. </li><li>  Le test unitaire du code d√©compos√© est simplifi√© et plus efficace. </li><li>  Le code d√©compos√© cr√©e moins de r√©sistance au changement.  Lors de modifications, il est moins probable de commettre une erreur. </li><li>  Le code est de mieux en mieux structur√©.  La recherche de quelque chose dans le code organis√© en fichiers et dossiers est beaucoup plus facile que dans un grand footcloth. </li><li>  La s√©paration du code passe-partout de la logique m√©tier conduit au fait que la g√©n√©ration de code peut √™tre appliqu√©e dans un projet. </li></ol><br>  Et tous ces signes vont de pair, ce sont des signes du m√™me code.  Vous n'avez pas √† choisir entre, par exemple, un code bien test√© et un code bien structur√©. <br><br><h1>  Les d√©finitions existantes ne fonctionnent pas </h1><br>  L'une des d√©finitions est: ¬´il ne devrait y avoir qu'une seule raison de changer le code (classe ou fonction)¬ª.  Le probl√®me avec cette d√©finition est qu'elle entre en conflit avec le principe Open-Close, le deuxi√®me du groupe de principes SOLID.  Sa d√©finition: "le code doit √™tre ouvert pour l'extension et ferm√© pour le changement."  Une raison du changement par rapport √† l'interdiction totale du changement.  Si nous r√©v√©lons plus en d√©tail ce que l'on veut dire ici, il s'av√®re qu'il n'y a pas de conflit entre les principes, mais il y a certainement un conflit entre les d√©finitions floues. <br><br>  La deuxi√®me d√©finition, plus directe, est: "le code ne devrait avoir qu'une seule responsabilit√©".  Le probl√®me avec cette d√©finition est que c'est la nature humaine de tout g√©n√©raliser. <br><br>  Par exemple, il y a une ferme qui √©l√®ve des poulets, et √† ce moment-l√†, la ferme n'a qu'une seule responsabilit√©.  Et donc la d√©cision est √©galement prise d'√©lever des canards.  Instinctivement, nous appellerons cela une ferme avicole, plut√¥t que d'admettre qu'il y a maintenant deux responsabilit√©s.  Ajoutez-y des moutons, et c'est maintenant une ferme pour animaux de compagnie.  Ensuite, nous voulons y cultiver des tomates ou des champignons, et trouver le nom suivant encore plus g√©n√©ralis√©.  Il en va de m√™me pour la ¬´seule raison¬ª du changement.  Cette raison peut √™tre aussi g√©n√©ralis√©e que l'imagination suffit. <br><br>  Un autre exemple est la classe de gestionnaire de station spatiale.  Il ne fait rien d'autre, il g√®re uniquement la station spatiale.  Comment aimez-vous cette classe avec une responsabilit√©? <br>  Et, puisque j'ai mentionn√© Redux lorsque le demandeur d'emploi conna√Æt cette technologie, je pose √©galement la question suivante: un r√©ducteur SRP typique viole-t-il? <br><br>  Le r√©ducteur, je me souviens, comprend la d√©claration switch, et il arrive qu'elle se d√©veloppe √† des dizaines voire des centaines de cas.  Et la seule responsabilit√© du r√©ducteur est de g√©rer les transitions d'√©tat de votre application.  C'est, litt√©ralement, certains candidats ont r√©pondu.  Et aucun indice ne pouvait faire d√©coller cette opinion. <br><br>  Au total, si une sorte de code semble satisfaire le principe SRP, mais en m√™me temps √ßa sent d√©sagr√©able - sachez pourquoi cela se produit.  Parce que la d√©finition du ¬´code doit avoir une seule responsabilit√©¬ª ne fonctionne tout simplement pas. <br><br><h1>  D√©finition plus appropri√©e </h1><br>  Par essais et erreurs, j'avais une meilleure d√©finition: <br>  <b>La responsabilit√© du code ne devrait pas √™tre trop grande</b> <br><br>  Oui, vous devez maintenant ¬´mesurer¬ª la responsabilit√© d'une classe ou d'une fonction.  Et si elle est trop grande, vous devez diviser cette grande responsabilit√© en plusieurs responsabilit√©s plus petites.  Pour revenir √† l'exemple de la ferme, m√™me la responsabilit√© d'√©lever des poulets peut √™tre trop grande et il est logique de s√©parer en quelque sorte les poulets de chair des poules pondeuses, par exemple. <br><br>  Mais comment le mesurer, comment d√©terminer que la responsabilit√© de ce code est trop grande? <br><br>  Malheureusement, je n'ai pas de m√©thodes math√©matiquement pr√©cises, seulement empiriques.  Et surtout, cela vient avec l'exp√©rience, les d√©veloppeurs novices ne sont pas du tout capables de d√©composer le code, les plus avanc√©s sont mieux √† le poss√©der, m√™me s'ils ne peuvent pas toujours d√©crire pourquoi ils le font et comment cela tombe sur des th√©ories comme SRP. <br><br><ol><li>  Complexit√© cyclomatique m√©trique.  Malheureusement, il existe des moyens de masquer cette m√©trique, mais si vous la collectez, il est possible qu'elle affiche les emplacements les plus vuln√©rables de votre application. </li><li>  La taille des fonctions et des classes.  Une fonction de 800 lignes n'a pas besoin d'√™tre lue pour comprendre que quelque chose ne va pas. </li><li>  Beaucoup d'importations.  Une fois que j'ai ouvert un fichier dans le projet d'une √©quipe voisine et que j'ai vu tout un √©cran d'importations, j'ai appuy√© sur la page et de nouveau il n'y avait que des importations √† l'√©cran.  Ce n'est qu'apr√®s la deuxi√®me pression que j'ai vu le d√©but du code.  Vous pouvez dire que tous les IDE modernes peuvent masquer les importations sous le "signe plus", mais je dis qu'un bon code n'a pas besoin de cacher les "odeurs".  De plus, j'avais besoin de r√©utiliser un petit morceau de code et je l'ai supprim√© de ce fichier √† un autre, et un quart ou m√™me un tiers des importations se sont d√©plac√©s derri√®re ce morceau.  Ce code n'y appartenait manifestement pas. </li><li>  Tests unitaires.  Si vous avez encore du mal √† d√©terminer le niveau de responsabilit√©, forcez-vous √† passer des tests.  Si vous devez √©crire deux douzaines de tests sur le but principal d'une fonction, sans compter les cas limites, etc., alors la d√©composition est n√©cessaire. </li><li>  Il en va de m√™me pour trop d'√©tapes pr√©paratoires au d√©but du test et de contr√¥les √† la fin.  Sur Internet, en passant, vous pouvez trouver la d√©claration utopique que le soi-disant  Il ne devrait y avoir qu'une seule assertion dans le test.  Je crois que toute bonne id√©e arbitraire, port√©e √† l'absolu, peut devenir absurdement impossible. </li><li>  La logique m√©tier ne doit pas d√©pendre directement d'outils externes.  Le pilote Oracle, Express routes, il est souhaitable de s√©parer tout cela de la logique m√©tier et / ou de se cacher derri√®re les interfaces. </li></ol><br>  Quelques points: <br><br>  Bien s√ªr, comme je l'ai d√©j√† mentionn√©, il y a un revers √† la m√©daille, et 800 m√©thodes sur une ligne peuvent ne pas √™tre meilleures qu'une m√©thode sur 800 lignes, il devrait y avoir un √©quilibre en tout. <br><br>  La seconde - je ne couvre pas la question de savoir o√π mettre tel ou tel code en conformit√© avec sa responsabilit√©.  Par exemple, les d√©veloppeurs ont parfois des difficult√©s √† tirer trop de logique dans la couche DAL. <br><br>  Troisi√®mement, je ne propose aucune limite stricte sp√©cifique comme ¬´pas plus de 50 lignes par fonction¬ª.  Cette approche implique uniquement une direction pour le d√©veloppement des d√©veloppeurs, et peut-√™tre des √©quipes.  Il travaille pour moi, il doit gagner de l'argent pour les autres. <br><br>  Et enfin, si vous passez par TDD, cela seul vous fera s√ªrement d√©composer le code bien avant d'√©crire ces 20 tests avec 20 assertions chacun. <br><br><h1>  S√©paration de la logique m√©tier du code passe-partout </h1><br>  En parlant des r√®gles d'un bon code, vous ne pouvez pas vous passer d'exemples.  Le premier exemple concerne la s√©paration du code passe-partout. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4ae/61f/2a4/4ae61f2a4fba4563cbe17e3cfe6da69a.png"><br><br>  Cet exemple montre comment le code principal est g√©n√©ralement √©crit.  Les gens √©crivent g√©n√©ralement une logique inextricablement avec le code indiquant les param√®tres au serveur Web Express tels que l'URL, la m√©thode de demande, etc. <br><br>  J'ai marqu√© la logique m√©tier comme marqueur vert et le code entrecoup√© de rouge qui interagit avec les param√®tres de requ√™te (rouge). <br><br>  Je partage toujours ces deux responsabilit√©s de cette fa√ßon: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b9/1a2/6a2/4b91a26a2b7d860804f22d72442c9947.png"><br><br>  Dans cet exemple, toutes les interactions avec Express se trouvent dans un fichier distinct. <br><br>  √Ä premi√®re vue, il pourrait sembler que le deuxi√®me exemple n'a pas apport√© d'am√©liorations, il y avait 2 fichiers au lieu d'un, des lignes suppl√©mentaires sont apparues, qui n'existaient pas auparavant - le nom de la classe et la signature de la m√©thode.  Et puis que donne cette s√©paration de code?  Tout d'abord, le ¬´point d'entr√©e de l'application¬ª n'est plus Express.  Il s'agit maintenant d'une fonction Typescript r√©guli√®re.  Ou une fonction javascript, que ce soit C #, qui √©crit WebAPI sur quoi. <br><br>  Ceci, √† son tour, vous permet d'effectuer diverses actions qui ne sont pas disponibles dans le premier exemple.  Par exemple, vous pouvez √©crire des tests de comportement sans avoir √† lancer Express, sans utiliser de requ√™tes http dans le test.  Et m√™me s'il n'y a pas besoin de mouiller, remplacez l'objet Router par votre objet ¬´test¬ª, maintenant le code d'application peut simplement √™tre appel√© directement depuis le test. <br><br>  Une autre fonctionnalit√© int√©ressante fournie par cette d√©composition est que vous pouvez maintenant √©crire un g√©n√©rateur de code qui analysera userApiService et l'utilisera pour g√©n√©rer du code qui connecte ce service √† Express.  Dans mes futures publications, je pr√©vois d'indiquer ce qui suit: la g√©n√©ration de code ne fera pas gagner de temps dans le processus d'√©criture de code.  Les co√ªts du g√©n√©rateur de code ne seront pas rentables du fait que vous n'avez plus besoin de copier ce passe-partout.  La g√©n√©ration de code sera payante par le fait que le code qu'elle produit n'a pas besoin de support, ce qui fera gagner du temps et, surtout, les nerfs des d√©veloppeurs √† long terme. <br><br><h1>  Diviser et conqu√©rir </h1><br>  Cette m√©thode d'√©criture de code existe depuis longtemps, je ne l'ai pas invent√©e moi-m√™me.  Je viens juste de conclure qu'il est tr√®s pratique lors de l'√©criture de la logique m√©tier.  Et pour cela, j'ai trouv√© un autre exemple fictif, montrant comment vous pouvez rapidement et facilement √©crire du code qui est imm√©diatement bien d√©compos√© et √©galement auto-document√© par des m√©thodes de nommage. <br><br>  Supposons qu'un analyste d'entreprise vous demande de cr√©er une m√©thode qui envoie un rapport d'employ√© √† une compagnie d'assurance.  Pour ce faire: <br><br><ol><li>  Les donn√©es doivent √™tre extraites de la base de donn√©es </li><li>  Convertir au format souhait√© </li><li>  Envoyer le rapport r√©sultant </li></ol><br>  De telles exigences ne sont pas toujours √©crites explicitement, parfois une telle s√©quence peut √™tre implicite ou clarifi√©e lors d'une conversation avec l'analyste.  Dans le processus de mise en ≈ìuvre de la m√©thode, ne vous pr√©cipitez pas pour ouvrir des connexions √† la base de donn√©es ou au r√©seau, essayez plut√¥t de traduire cet algorithme simple dans le code "tel quel".  Quelque chose comme √ßa: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendEmployeeReportToProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportId</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> dal.getEmployeeReportData(reportId);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> formatted = reportDataService.prepareEmployeeReport(data);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> networkService.sendReport(formatted);‚Äã }</code> </pre> <br>  Avec cette approche, il s'av√®re √™tre un code assez simple, facile √† lire et √† tester, m√™me si je pense que ce code est trivial et n'a pas besoin d'√™tre test√©.  Et il √©tait de la responsabilit√© de cette m√©thode de ne pas envoyer de rapport, sa responsabilit√© √©tait de diviser cette t√¢che complexe en trois sous-t√¢ches. <br><br>  Ensuite, nous revenons aux exigences et d√©couvrons que le rapport doit comprendre une section sur les salaires et une section sur les heures travaill√©es. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prepareEmployeeReport</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportData</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> salarySection = prepareSalarySection(reportData);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> workHoursSection = prepareWorkHoursSection(reportData);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { salarySection, workHoursSection };‚Äã }</code> </pre><br>  Et ainsi de suite, nous continuons √† diviser la t√¢che jusqu'√† ce que la mise en ≈ìuvre de petites m√©thodes qui sont presque triviales reste. <br><br><h1>  Interaction avec le principe d'ouverture-fermeture </h1><br>  Au d√©but de l'article, j'ai dit que les d√©finitions des principes de SRP et d'Open-Close se contredisent.  Le premier dit qu'il doit y avoir une raison pour le changement, le second dit que le code doit √™tre ferm√© pour le changement.  Et les principes eux-m√™mes, non seulement ne se contredisent pas, au contraire, ils travaillent en synergie les uns avec les autres.  Les 5 principes SOLID visent un seul bon objectif - dire au d√©veloppeur quel code est ¬´mauvais¬ª et comment le changer pour qu'il devienne ¬´bon¬ª.  L'ironie - je viens de remplacer 5 responsabilit√©s par une autre responsabilit√©. <br>  Donc, en plus de l'exemple pr√©c√©dent avec l'envoi du rapport √† la compagnie d'assurance, imaginez qu'un analyste d'entreprise vient √† nous et nous dit que nous devons maintenant ajouter une deuxi√®me fonctionnalit√© au projet.  Le m√™me rapport doit √™tre imprim√©. <br>  Imaginez qu'il y ait un d√©veloppeur qui pense que SRP "ne concerne pas la d√©composition". <br>  En cons√©quence, ce principe ne lui indiquait pas la n√©cessit√© d'une d√©composition, et il r√©alisa toute la premi√®re t√¢che en une seule fonction.  Apr√®s que la t√¢che lui soit venue, il combine les deux responsabilit√©s en une seule, car  ils ont beaucoup en commun et g√©n√©ralise son nom.  Maintenant, cette responsabilit√© est appel√©e ¬´rapport de service¬ª.  L'impl√©mentation de ceci ressemble √† ceci: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">serveEmployeeReportToProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportId, serveMethod</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* lots of code to read and convert the report */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span>(serveMethod) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> sendToProvider: <span class="hljs-comment"><span class="hljs-comment">/* implementation of sending */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> print: <span class="hljs-comment"><span class="hljs-comment">/* implementation of printing */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span>; } }</code> </pre><br>  Rappelle du code dans votre projet?  Comme je l'ai dit, les deux d√©finitions directes du SRP ne fonctionnent pas.  Ils ne transmettent pas au d√©veloppeur des informations selon lesquelles un tel code ne peut pas √™tre √©crit.  Et quel code peut √™tre √©crit.  Il n'y avait qu'une seule raison pour que le d√©veloppeur modifie ce code.  Il a simplement rappel√© la raison pr√©c√©dente, a ajout√© l'interrupteur et est calme.  Et ici, le principe du principe Open-Close entre en sc√®ne, qui dit directement qu'il √©tait impossible de modifier un fichier existant.  Il √©tait n√©cessaire d'√©crire du code de sorte que lors de l'ajout de nouvelles fonctionnalit√©s, il √©tait n√©cessaire d'ajouter un nouveau fichier et non d'en modifier un existant.  Autrement dit, un tel code est mauvais du point de vue de deux principes √† la fois.  Et si le premier n'a pas aid√© √† le voir, le second devrait aider. <br><br>  Et comment la m√©thode diviser pour r√©gner r√©sout-elle le m√™me probl√®me: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">printEmployeeReport</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">reportId</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> dal.getEmployeeReportData(reportId);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> formatted = reportDataService.prepareEmployeeReport(data);‚Äã <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> printService.printReport(formatted);‚Äã }</code> </pre><br>  Ajoutez une nouvelle fonction.  Je les appelle parfois une ¬´fonction de script¬ª car ils ne portent pas d'impl√©mentations, ils d√©terminent la s√©quence d'appel des √©l√©ments d√©compos√©s de notre responsabilit√©.  √âvidemment, les deux premi√®res lignes, les deux premi√®res responsabilit√©s d√©compos√©es co√Øncident avec les deux premi√®res lignes de la fonction pr√©c√©demment mise en ≈ìuvre.  Tout comme les deux premi√®res √©tapes de deux t√¢ches d√©crites par un analyste d'entreprise co√Øncident. <br>  Ainsi, pour ajouter de nouvelles fonctionnalit√©s au projet, nous avons ajout√© une nouvelle m√©thode de script et un nouveau printService.  Les anciens fichiers n'ont pas √©t√© modifi√©s.  Autrement dit, cette m√©thode d'√©criture de code est bonne du point de vue de deux principes.  Et SRP et Open-Close <br><br><h1>  Alternative </h1><br>  Je voulais √©galement mentionner une mani√®re alternative et concurrente d'obtenir un code bien d√©compos√© qui ressemble √† ceci - nous √©crivons d'abord le code ¬´sur le front¬ª, puis le remodelons en utilisant diverses techniques, par exemple, selon le livre de Fowler ¬´Refactoring¬ª.  Ces m√©thodes m'ont rappel√© l'approche math√©matique du jeu d'√©checs, o√π vous ne comprenez pas exactement ce que vous faites en termes de strat√©gie, vous calculez uniquement le "poids" de votre position et essayez de le maximiser en faisant des mouvements.  Je n'ai pas aim√© cette approche pour une petite raison - nommer des m√©thodes et des variables est d√©j√† difficile, et quand elles n'ont pas de valeur commerciale, cela devient impossible.  Par exemple, si ces techniques sugg√®rent que vous devez s√©lectionner 6 lignes identiques d'ici et de l√†, puis les mettre en surbrillance, comment devez-vous appeler cette m√©thode?  someSixIdenticalLines ()? <br>  Je veux faire une r√©servation - je ne pense pas que cette m√©thode soit mauvaise, je n'ai tout simplement pas pu apprendre √† l'utiliser. <br><br><h1>  Total </h1><br>  En suivant le principe, vous pouvez trouver des avantages. <br><br>  La d√©finition de ¬´il doit y avoir une seule responsabilit√©¬ª ne fonctionne pas. <br><br>  Il existe une meilleure d√©finition et un certain nombre de caract√©ristiques indirectes,  le code sent la n√©cessit√© de se d√©composer. <br><br>  L'approche ¬´diviser pour mieux r√©gner¬ª vous permet d'√©crire imm√©diatement du code bien structur√© et auto-document√©. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr449586/">https://habr.com/ru/post/fr449586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr449572/index.html">A propos des appels d'offres, des appels d'offres et de la formation d'une t√¢che d'appel d'offres</a></li>
<li><a href="../fr449574/index.html">Caract√©ristiques SpecFlow utiles</a></li>
<li><a href="../fr449576/index.html">Logiciel de gestion d'un bras de robot, d√©tectant automatiquement sa configuration</a></li>
<li><a href="../fr449578/index.html">L'illusion d'un design intelligent</a></li>
<li><a href="../fr449584/index.html">Commutateurs industriels non g√©r√©s Advantech EKI-2000</a></li>
<li><a href="../fr449588/index.html">Quelle est la force et la faiblesse du march√© de l'h√©bergement</a></li>
<li><a href="../fr449590/index.html">La capitalisation boursi√®re de Microsoft a d√©pass√© le billion de dollars 25/04/2019</a></li>
<li><a href="../fr449596/index.html">Jeu SFML simple</a></li>
<li><a href="../fr449600/index.html">"Maison intelligente" avec Yandex.Alisa</a></li>
<li><a href="../fr449602/index.html">Inspir√© par la production et le basket-ball: comment Yandex pr√©pare un championnat de programmation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>