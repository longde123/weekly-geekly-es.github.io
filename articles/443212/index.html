<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>↘️ 🏌️ 🚵🏼 Tutorial de React, Parte 22: Séptima etapa de trabajo en una aplicación TODO, descargando datos de fuentes externas 🗃️ 🏤 👨🏾‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la parte de hoy de la traducción del tutorial React, terminaremos el trabajo en la aplicación Todo y hablaremos sobre cómo usar los datos de los co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tutorial de React, Parte 22: Séptima etapa de trabajo en una aplicación TODO, descargando datos de fuentes externas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/443212/">  En la parte de hoy de la traducción del tutorial React, terminaremos el trabajo en la aplicación Todo y hablaremos sobre cómo usar los datos de los componentes internos y las capacidades estándar de JavaScript para cargar datos de fuentes externas. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/kv/3m/yg/kv3mygzwigixivdzbagb80fvlvi.png" alt="imagen"></a> <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 1: descripción general del curso, razones de la popularidad de React, ReactDOM y JSX</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 2: componentes funcionales</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 3: archivos de componentes, estructura del proyecto</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 4: componentes principales y secundarios</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 5: inicio del trabajo en una aplicación TODO, los fundamentos del estilo</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 6: sobre algunas características del curso, JSX y JavaScript</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 7: estilos en línea</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 8: trabajo continuo en la aplicación TODO, familiaridad con las propiedades de los componentes</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 9: propiedades del componente</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 10: Taller sobre trabajo con propiedades de componentes y estilo</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 11: generación de marcado dinámico y método de matrices de mapas</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 12: taller, tercera etapa de trabajo en una aplicación TODO</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 13: componentes basados ​​en clases</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 14: taller sobre componentes basados ​​en la clase, estado de los componentes.</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 15: talleres de componentes de salud</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 16: la cuarta etapa de trabajo en una aplicación TODO, manejo de eventos</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 17: quinta etapa de trabajo en una aplicación TODO, modificando el estado de los componentes</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 18: la sexta etapa de trabajo en una aplicación TODO</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 19: métodos del ciclo de vida de los componentes.</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 20: la primera lección de representación condicional</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 21: segunda lección y taller sobre representación condicional</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 22: la séptima etapa de trabajo en una aplicación TODO, descargando datos de fuentes externas</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 23: primera lección sobre trabajar con formularios</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 24: Segunda lección de formularios</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 25: Taller sobre trabajo con formularios</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 26: arquitectura de la aplicación, patrón de contenedor / componente</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Parte 27: proyecto del curso</a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Lección 39. Taller.</font>  <font color="#3AC1EF">TODO aplicación.</font>  <font color="#3AC1EF">Etapa número 7</font> </h2><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Original</a> <br><br><h3>  <font color="#3AC1EF">▍Trabajo</font> </h3><br>  Ahora la aplicación Todo se parece a la siguiente figura. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/921/022/322/9210223221d185d42d7461c7b1d23c31.png"></div><br>  <i><font color="#999999">Página de aplicación en el navegador</font></i> <br><br>  El <code>TodoItem</code> componente <code>TodoItem</code> ve así: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TodoItem</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">       &lt;div className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"todo-item"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;           &lt;input               type=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"checkbox"</span></span></span></span><span class="hljs-function"><span class="hljs-params">               checked={props.item.completed}               onChange={(</span></span></span><span class="hljs-function">) =&gt;</span></span> props.handleChange(props.item.id)}           /&gt;           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{props.item.text}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;   ) } export default TodoItem</span></span></code> </pre> <br>  Su tarea es diseñar los elementos de la lista según su estado.  La apariencia de los casos completados debe ser diferente de incompleta.  Al formatear elementos de la lista que representan tareas completadas, su texto puede aparecer atenuado, tachado, en cursiva o se pueden realizar otras modificaciones. <br><br><h3>  <font color="#3AC1EF">▍Solución</font> </h3><br>  El problema presentado aquí se puede resolver de varias maneras.  Utilizaremos el estilo incorporado, que describiremos como la constante <code>completedStyle</code> en el código del componente funcional <code>TodoItem</code> .  Aquí configuramos las propiedades de texto <code>fontStyle</code> , <code>color</code> y <code>textDecoration</code> .  Después de eso, utilizando la técnica de representación condicional, asignaremos este estilo al elemento <code>&lt;p&gt;</code> en caso de que el negocio deducido por él se marque como completado.  Determinaremos esto en función de la propiedad pasada a la instancia del componente, que está disponible en ella como <code>props.item.completed</code> . <br><br>  El código del componente convertido se verá así: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TodoItem</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> completedStyle = {       <span class="hljs-attr"><span class="hljs-attr">fontStyle</span></span>: <span class="hljs-string"><span class="hljs-string">"italic"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">"#cdcdcd"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">textDecoration</span></span>: <span class="hljs-string"><span class="hljs-string">"line-through"</span></span>   }     <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">       &lt;div className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"todo-item"</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;           &lt;input               type=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"checkbox"</span></span></span></span><span class="hljs-function"><span class="hljs-params">               checked={props.item.completed}               onChange={(</span></span></span><span class="hljs-function">) =&gt;</span></span> props.handleChange(props.item.id)}           /&gt;           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{props.item.completed</span></span></span></span><span class="xml"><span class="hljs-tag"> ? </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">completedStyle:</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">null</span></span></span></span><span class="xml"><span class="hljs-tag">}&gt;</span></span></span><span class="xml">{props.item.text}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       &lt;<span class="hljs-regexp"><span class="hljs-regexp">/div&gt;   ) } export default TodoItem</span></span></code> </pre> <br>  Así es como cambia el aspecto de la página de la aplicación. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/881/3f3/e93/8813f3e93f2e865ca355a402bf8aeb0f.png"></div><br>  <i><font color="#999999">Se cambió la página de la aplicación en el navegador.</font></i> <br><br>  Al mismo tiempo, los estilos se aplican al configurar y desmarcar los indicadores que indican el estado de los elementos en la lista de tareas pendientes. <br><br>  Esto concluye el trabajo en la aplicación Todo. <br><br><h2>  <font color="#3AC1EF">Lección 40. Descarga de datos de fuentes externas</font> </h2><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Original</a> <br><br>  En una lección sobre los métodos del ciclo de vida de los componentes, hablamos sobre el método <code>componentDidMount()</code> .  Intenta recordar cómo funciona.  Este método le permite interferir con el funcionamiento del componente ejecutando algún código inmediatamente después de que el componente se haya agregado al árbol DOM.  Cuando hablamos sobre los métodos del ciclo de vida de los componentes, mencioné que el método <code>componentDidMount()</code> se usa con mayor frecuencia para cargar datos de algunas fuentes externas.  El componente utiliza estos datos para realizar su propósito. <br><br>  Comencemos nuestros experimentos de hoy con un nuevo proyecto creado usando las <code>App.js</code> create-react-app <code>App.js</code> cuyo archivo <code>App.js</code> contiene el siguiente código: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, {Component} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {       <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>()       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {}   }         render() {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               Code goes here           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App</code> </pre> <br>  En el código del componente de <code>App</code> basado en componentes, describimos el método <code>componentDidMount()</code> y verificamos la operabilidad de la construcción resultante al enviar algo a la consola desde este método. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, {Component} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {       <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>()       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {}   }     componentDidMount() {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hi!"</span></span>)   }     render() {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               Code goes here           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App</code> </pre> <br>  Salida a la cadena de consola <code>Hi!</code>  demuestra la funcionalidad del código, por lo que podemos seguir trabajando.  Como ya se mencionó, este método generalmente carga los datos necesarios para que el componente funcione. <br><br>  En esta lección, utilizaremos varias herramientas auxiliares que nos serán útiles al cargar datos en el componente. <br><br>  El primero es la función de JavaScript incorporada.  Estamos hablando de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">API Fetch</a> , que es una interfaz conveniente para obtener recursos, basada en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">promesas</a> , que le permite realizar solicitudes HTTP, a través de las cuales se cargan los datos. <br><br>  La segunda herramienta que usaremos es la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">API de Star Wars</a> .  Este proyecto es bueno porque puede usarse en aplicaciones front-end sin ninguna dificultad especial (en particular, estamos hablando de las características de configuración de CORS). <br><br>  En el método <code>componentDidMount()</code> , vamos a utilizar la función <code>fetch()</code> , pasándole la dirección para cargar datos, convirtiendo estos datos al tipo que necesitamos y, para verificar el correcto funcionamiento del sistema, enviaremos estos datos a la consola.  Transformamos el código del método a la siguiente forma: <br><br><pre> <code class="javascript hljs">componentDidMount() {   fetch(<span class="hljs-string"><span class="hljs-string">"https://swapi.co/api/people/1"</span></span>)       .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> response.json())       .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data)) }</code> </pre> <br>  Aquí descargamos datos sobre cierto héroe de la película, en referencia a la API, luego convertimos lo que vino del servidor al formato JSON y luego imprimimos estos datos en la consola.  Lo que entró en la consola se muestra en la siguiente figura. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/679/aa8/4a8/679aa84a8f48a76b1cada69a75d6043b.png"></div><br>  <i><font color="#999999">Los datos descargados de la API de Star Wars se envían a la consola</font></i> <br><br>  Como puede ver, un objeto con datos sobre Luke Skywalker entró en la consola.  Ahora, una vez que tenemos los datos, debemos pensar en cómo mostrarlos en la página de la aplicación.  Para resolver este problema, primero debe tener en cuenta el hecho de que los datos descargados desde el exterior, si no se guardan en ningún lugar, no se podrán mostrar en la página de la aplicación en un navegador.  El lugar que sirve para almacenar dichos datos es el estado del componente.  Agregue una nueva propiedad, <code>character</code> , representado por un objeto vacío al estado del componente: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {   <span class="hljs-attr"><span class="hljs-attr">character</span></span>: {} }</code> </pre> <br>  Vamos a almacenar en esta propiedad un objeto con una descripción del personaje, cuyos datos se descargan de una fuente externa.  Existen como un objeto, por lo que cuando inicializamos los estados, hacemos que la propiedad del <code>character</code> un objeto vacío. <br><br>  Después de eso, en ese lugar del código del método <code>componentDidMount()</code> , donde obtenemos los datos, los escribiremos en el estado utilizando el método <code>setState()</code> .  Además, en este caso, lo que estaba almacenado en el estado anterior no nos interesa, por lo tanto, simplemente podemos pasar a este método un objeto que contiene una nueva representación del estado.  Como resultado, llegamos a este código de método <code>componentDidMount()</code> : <br><br><pre> <code class="javascript hljs">componentDidMount() {   fetch(<span class="hljs-string"><span class="hljs-string">"https://swapi.co/api/people/1"</span></span>)       .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> response.json())       .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> {           <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({               <span class="hljs-attr"><span class="hljs-attr">character</span></span>: data           })       }) }</code> </pre> <br>  Para verificar el funcionamiento correcto de los mecanismos que ahora existen en el código, mostraremos en el método <code>render()</code> algo que debe estar presente en el estado después de que los datos cargados se escriban en él.  Ahora el código del archivo <code>App.js</code> se verá así: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, {Component} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {       <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>()       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {           <span class="hljs-attr"><span class="hljs-attr">character</span></span>: {}       }   }     componentDidMount() {       fetch(<span class="hljs-string"><span class="hljs-string">"https://swapi.co/api/people/1"</span></span>)           .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> response.json())           .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> {               <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({                   <span class="hljs-attr"><span class="hljs-attr">character</span></span>: data               })           })   }     render() {       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               {this.state.character.name}           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App</code> </pre> <br>  Y así es como se verá la página de la aplicación en el navegador. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d84/b94/494/d84b94494b106a4d3567f80bcc836255.png"></div><br>  <i><font color="#999999">Página de aplicación en el navegador</font></i> <br><br>  Mostrar el texto de <code>Luke Skywalker</code> en una página demuestra cómo funcionan los mecanismos de carga de datos. <br><br>  Nuestra aplicación utiliza una solicitud simple, en respuesta a la cual la aplicación recibe una pequeña cantidad de datos que se procesan rápidamente y se muestran en la página.  Se necesita muy poco tiempo para completar todas estas acciones.  Por lo tanto, los datos se muestran en la pantalla tan rápidamente que tenemos la impresión de que el componente, inmediatamente después de mostrarlos en la pantalla, ya los contiene.  Pero si se accediera a la fuente de datos remota utilizando una línea de comunicación muy lenta, o la API desde la que se cargan los datos respondiera lentamente a las solicitudes, podría pasar mucho tiempo antes de que la aplicación pudiera mostrar estos datos en la pantalla .  Todo este tiempo, la pantalla permanecería en blanco.  Si esto ocurre en aplicaciones del mundo real, confunde a sus usuarios, quienes pueden decidir que tales aplicaciones no funcionan correctamente.  Para anticipar una situación similar, es necesario, durante la carga y el procesamiento de datos, mostrar al usuario un mensaje correspondiente.  Esto no se aplica a nuestro tema hoy, pero es aquí donde será apropiado discutirlo. <br><br>  En aplicaciones reales, para alertar al usuario de que necesita esperar una determinada acción, como descargar datos, usan algo como un indicador de carga.  En nuestro caso, hasta que los datos se carguen y estén listos para mostrarse en la página, solo mostraremos el texto <code>loading...</code>  Al hacer esto, podremos evaluar las posibilidades que nos brinda el almacenamiento de datos en el estado de la aplicación. <br><br>  Agregue una nueva propiedad al estado, que indica si los datos se están cargando en algún momento.  Llámalo <code>loading</code> e inicialízalo en <code>false</code> .  Después de eso, inmediatamente antes de cargar datos usando <code>fetch()</code> , escribimos <code>true</code> a esta propiedad. <br><br>  A continuación, en el método <code>render()</code> , basado en la propiedad del estado de <code>loading</code> , configuraremos el texto que se muestra en la página.  Así es como se <code>App.js</code> código de <code>App.js</code> después de estas conversiones. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, {Component} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {       <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>()       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {           <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,           <span class="hljs-attr"><span class="hljs-attr">character</span></span>: {}       }   }     componentDidMount() {       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({<span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>})       fetch(<span class="hljs-string"><span class="hljs-string">"https://swapi.co/api/people/1"</span></span>)           .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> response.json())           .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> {               <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({                   <span class="hljs-attr"><span class="hljs-attr">character</span></span>: data               })           })   }     render() {       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> text = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.loading ? <span class="hljs-string"><span class="hljs-string">"loading..."</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.character.name       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{text}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App</code> </pre> <br>  Este código, sin embargo, no funciona correctamente.  A saber, así es como se ve ahora la página de la aplicación. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3c1/14c/ac6/3c114cac65ab28627b6ea5f497191188.png"></div><br>  <i><font color="#999999">Página de aplicación en el navegador</font></i> <br><br>  Se supone que la <code>loading...</code> la inscripción <code>loading...</code> debe mostrarse solo cuando se cargan datos de una fuente externa, pero parece que ahora se muestra constantemente en la página.  Antes de seguir leyendo, intente encontrar y corregir errores en el código. <br><br>  En realidad, el problema aquí es que, antes de comenzar la carga de datos, configuramos la <code>loading</code> en <code>true</code> y, una vez completada la descarga, no <code>loading</code> <code>false</code> en la <code>loading</code> .  Como resultado, el texto <code>loading...</code> siempre se muestra en la página.  No es difícil corregir este error.  Suficiente, en el mismo lugar donde escribimos los datos cargados en el estado, establezca la <code>loading</code> en <code>false</code> .  Como resultado, el código <code>App.js</code> tomará la siguiente forma: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, {Component} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"react"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() {       <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>()       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = {           <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,           <span class="hljs-attr"><span class="hljs-attr">character</span></span>: {}       }   }     componentDidMount() {       <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({<span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>})       fetch(<span class="hljs-string"><span class="hljs-string">"https://swapi.co/api/people/1"</span></span>)           .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">response</span></span></span><span class="hljs-function"> =&gt;</span></span> response.json())           .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> {               <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({                   <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,                   <span class="hljs-attr"><span class="hljs-attr">character</span></span>: data               })           })   }     render() {       <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> text = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.loading ? <span class="hljs-string"><span class="hljs-string">"loading..."</span></span> : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.character.name       <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (           <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">               </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{text}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">p</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">           </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>       )   } } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> App</code> </pre> <br>  Ahora, al cargar datos, aparece la inscripción <code>loading...</code> brevemente, y luego se muestra el nombre del personaje en la página. <br><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  En esta lección, completó el trabajo en una aplicación Todo y aprendió a usar el método del ciclo de vida del <code>componentDidMount()</code> y la API Fetch estándar para cargar datos de fuentes externas, procesarlos y mostrarlos en las páginas.  Además, aquí hablamos sobre la implementación de un mecanismo para notificar al usuario sobre la aplicación que realiza operaciones, lo que puede llevar mucho tiempo.  La próxima vez hablaremos de los formularios. <br><br>  <b>Estimados lectores!</b>  ¿Cómo se cargan datos de fuentes externas en las aplicaciones React? <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/443212/">https://habr.com/ru/post/443212/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../443202/index.html">Rally contra el aislamiento de Runet</a></li>
<li><a href="../443204/index.html">Resumen semanal de frontend (4-10 de marzo de 2019)</a></li>
<li><a href="../443206/index.html">Las minas bajo rendimiento están esperando en las alas</a></li>
<li><a href="../443208/index.html">Ratón corporativo</a></li>
<li><a href="../443210/index.html">Tutorial React Parte 21: Segunda lección y taller de renderizado condicional</a></li>
<li><a href="../443214/index.html">Tutorial de Reacción Parte 23: Lección de los primeros formularios</a></li>
<li><a href="../443216/index.html">El resumen de materiales frescos del mundo del front-end para la última semana No. 355 (del 4 al 10 de marzo de 2019)</a></li>
<li><a href="../443218/index.html">Perspectivas comerciales de Roscosmos</a></li>
<li><a href="../443220/index.html">PHP Digest No. 151 (25 de febrero - 11 de marzo de 2019)</a></li>
<li><a href="../443222/index.html">Cómo se bloquea Protonmail en Rusia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>