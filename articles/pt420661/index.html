<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÖ üéÖ üèüÔ∏è Infraestrutura de nuvem cont√≠nua üëºüèø üïã üíáüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Uma demonstra√ß√£o do uso de ferramentas de c√≥digo aberto, como Packer e Terraform, para fornecer continuamente altera√ß√µes na infraestrutura a um ambien...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Infraestrutura de nuvem cont√≠nua</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/420661/"> Uma demonstra√ß√£o do uso de ferramentas de c√≥digo aberto, como Packer e Terraform, para fornecer continuamente altera√ß√µes na infraestrutura a um ambiente em nuvem amig√°vel. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FJvl13EYtBU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  O material foi baseado em uma apresenta√ß√£o de Paul Stack em nossa confer√™ncia de outono do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DevOops</a> 2017. Paul √© um desenvolvedor de infraestrutura que trabalhava na HashiCorp e participou do desenvolvimento de ferramentas usadas por milh√µes de pessoas (por exemplo, Terraform).  Ele frequentemente fala em confer√™ncias e transmite a pr√°tica da vanguarda das implementa√ß√µes de CI / CD, os princ√≠pios da organiza√ß√£o adequada da parte de opera√ß√µes, e √© capaz de explicar claramente por que os administradores fazem isso.  O restante do artigo √© narrado na primeira pessoa. <br><a name="habracut"></a><br>  Ent√£o, vamos come√ßar imediatamente com algumas descobertas importantes. <br><br><h3>  Servidor de longa dura√ß√£o √© uma porcaria </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/7f5/1dc/232/7f51dc232bf87288dc7f5c1bf7140a0d.jpg"><br><br>  Anteriormente, trabalhei em uma organiza√ß√£o em que implantamos o Windows Server 2003 em 2008 e hoje eles ainda est√£o em produ√ß√£o.  E essa empresa n√£o est√° sozinha.  Usando a √°rea de trabalho remota nesses servidores, eles instalam o software manualmente, baixando arquivos bin√°rios da Internet.  Essa √© uma p√©ssima id√©ia, porque os servidores n√£o s√£o t√≠picos.  Voc√™ n√£o pode garantir que o mesmo aconte√ßa na produ√ß√£o e no ambiente de desenvolvimento, no ambiente intermedi√°rio, no ambiente de controle de qualidade. <br><br><h3>  Infraestrutura Imut√°vel </h3><br>  Em 2013, apareceu um artigo no blog de Chad Foiler intitulado ‚ÄúJogue seus servidores e grave seu c√≥digo: infraestrutura imut√°vel e componentes descart√°veis‚Äù (Chad Foiler <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">‚Äú</a> Jogue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lixo nos servidores e grave seu c√≥digo: infraestrutura imut√°vel e componentes descart√°veis‚Äù</a> ).  Isso √© principalmente uma conversa de que a infraestrutura imut√°vel √© o caminho a seguir.  Criamos a infraestrutura e, se precisarmos alter√°-la, estamos criando uma nova infraestrutura.  Essa abordagem √© muito comum na nuvem, porque aqui √© r√°pida e barata.  Se voc√™ possui data centers f√≠sicos, isso √© um pouco mais complicado.  Obviamente, se voc√™ executa a virtualiza√ß√£o do data center, as coisas ficam mais f√°ceis.  No entanto, se voc√™ ainda iniciar servidores f√≠sicos a cada vez, demorar√° um pouco mais para inserir um novo do que para modificar um existente. <br><br><h3>  Infraestrutura descart√°vel </h3><br>  Segundo os programadores funcionais, "imut√°vel" √© realmente o termo errado para esse fen√¥meno.  Como para ser realmente imut√°vel, sua infraestrutura precisa de um sistema de arquivos somente leitura: nenhum arquivo ser√° gravado localmente, ningu√©m poder√° usar SSH ou RDP, etc.  Assim, parece que, de fato, a infraestrutura n√£o √© imut√°vel. <br><br>  A terminologia foi discutida no Twitter por seis ou at√© oito dias por v√°rias pessoas.  No final, eles concordaram que uma ‚Äúinfraestrutura √∫nica‚Äù √© uma formula√ß√£o mais apropriada.  Quando o ciclo de vida da ‚Äúinfraestrutura √∫nica‚Äù termina, ele pode ser facilmente destru√≠do.  Voc√™ n√£o precisa se apegar a isso. <br><br>  Eu darei uma analogia.  Vacas de fazenda geralmente n√£o s√£o consideradas animais de estima√ß√£o. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/be9/a17/baf/be9a17baf223a45e34c63684197cc2ce.png"><br><br>  Quando voc√™ tem gado na fazenda, n√£o lhes d√° nomes individuais.  Cada indiv√≠duo tem um n√∫mero e uma etiqueta.  O mesmo acontece com os servidores.  Se voc√™ ainda criou servidores em produ√ß√£o manualmente em 2006, eles t√™m nomes significativos, por exemplo, "Banco de Dados SQL na Produ√ß√£o 01".  E eles t√™m um significado muito espec√≠fico.  E se um dos servidores travar, o inferno come√ßa. <br><br>  Se um dos animais do rebanho morre, o fazendeiro simplesmente compra um novo.  Essa √© a "infraestrutura √∫nica". <br><br><h3>  Entrega cont√≠nua </h3><br>  Ent√£o, como voc√™ combina isso com a entrega cont√≠nua? <br>  Tudo o que estou falando agora j√° existe h√° algum tempo.  Estou apenas tentando combinar as id√©ias de desenvolvimento de infraestrutura e desenvolvimento de software. <br><br>  Os desenvolvedores de software est√£o comprometidos com a entrega cont√≠nua e a integra√ß√£o cont√≠nua.  Por exemplo, Martin Fowler escreveu sobre a integra√ß√£o cont√≠nua em seu blog no in√≠cio dos anos 2000.  Jez Humble promove h√° muito tempo a entrega cont√≠nua. <br><br>  Se voc√™ der uma olhada mais de perto, n√£o h√° nada criado especificamente para o c√≥digo-fonte do software.  Existe uma defini√ß√£o padr√£o da Wikipedia: <i>entrega cont√≠nua √© um conjunto de pr√°ticas e princ√≠pios que visam criar, testar e liberar software o mais r√°pido poss√≠vel</i> . <br><br>  A defini√ß√£o n√£o significa aplicativos da Web ou APIs, trata-se de software em geral.  Criar software de quebra-cabe√ßa requer muitas pe√ßas de quebra-cabe√ßa.  Dessa forma, voc√™ pode praticar a entrega cont√≠nua de c√≥digo de infraestrutura da mesma maneira. <br><br>  O desenvolvimento de infraestrutura e aplicativos s√£o orienta√ß√µes bastante pr√≥ximas.  E as pessoas que escrevem c√≥digo de aplicativo tamb√©m escrevem c√≥digo de infraestrutura (e vice-versa).  Esses mundos come√ßam a se unir.  N√£o existe mais essa separa√ß√£o e as armadilhas espec√≠ficas de cada um dos mundos. <br><br><h3>  Princ√≠pios e pr√°ticas de entrega cont√≠nua </h3><br>  A entrega cont√≠nua possui v√°rios princ√≠pios: <br><br><ul><li>  O processo de libera√ß√£o / implanta√ß√£o de software deve ser repet√≠vel e confi√°vel. <br></li><li>  Automatize tudo! <br></li><li>  Se um procedimento for dif√≠cil ou doloroso, fa√ßa-o com mais frequ√™ncia. <br></li><li>  Mantenha tudo no controle de origem. <br></li><li>  Conclu√≠do - significa "in√©dito". <br></li><li>  Integre trabalho com qualidade! <br></li><li>  Todos s√£o respons√°veis ‚Äã‚Äãpelo processo de libera√ß√£o. <br></li><li>  Aumentar a continuidade. <br></li></ul><br>  Mais importante, por√©m, a entrega cont√≠nua tem quatro pr√°ticas.  Leve-os e transfira diretamente para a infraestrutura: <br><br><ul><li>  Crie arquivos bin√°rios apenas uma vez.  Crie seu servidor uma vez.  Aqui estamos falando sobre ‚Äúdescartabilidade‚Äù desde o in√≠cio. <br></li><li>  Use o mesmo mecanismo de implanta√ß√£o em cada ambiente.  N√£o pratique implanta√ß√µes diferentes no desenvolvimento e produ√ß√£o.  Voc√™ deve usar o mesmo caminho em cada ambiente.  Isso √© muito importante. <br></li><li>  Teste sua implanta√ß√£o.  Eu criei muitos aplicativos.  Criei muitos problemas porque n√£o segui o mecanismo de implanta√ß√£o.  Voc√™ deve sempre verificar o que acontece.  E n√£o estou dizendo que voc√™ deva gastar cinco ou seis horas em testes em larga escala.  Chega "teste de fuma√ßa".  Voc√™ tem uma parte essencial do sistema, que, como voc√™ sabe, permite que voc√™ e sua empresa ganhem dinheiro.  N√£o tenha pregui√ßa de come√ßar o teste.  Caso contr√°rio, pode haver interrup√ß√µes que custar√£o dinheiro √† sua empresa. <br></li><li>  E, finalmente, a coisa mais importante.  Se algo quebrar, pare e corrija-o imediatamente!  Voc√™ n√£o pode permitir que o problema cres√ßa e fique cada vez pior.  Voc√™ tem que consertar isso.  Isso √© realmente importante. <br></li></ul><br>  Algu√©m j√° leu o livro <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Entrega cont√≠nua</a> ? <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cad/9eb/b6f/cad9ebb6f6c3562724d78ef5a0454e7e.png"><br><br>  Tenho certeza de que suas empresas pagar√£o uma c√≥pia que voc√™ pode transferir dentro da equipe.  N√£o estou dizendo que voc√™ deveria se sentar e passar um dia de folga lendo.  Se voc√™ o fizer, provavelmente desejar√° sair da TI.  Mas eu recomendo periodicamente o dom√≠nio de pequenos peda√ßos do livro, digerindo-os e pensando em como transferir isso para o seu ambiente, para a sua cultura e para o seu processo.  Um pequeno peda√ßo de cada vez.  Porque o fornecimento cont√≠nuo √© uma conversa sobre melhoria cont√≠nua.  N√£o √© f√°cil sentar no escrit√≥rio com colegas e o chefe e iniciar uma conversa com a pergunta: ‚ÄúComo implementaremos a entrega cont√≠nua?‚Äù. Depois, escreva 10 coisas no quadro e depois de 10 dias entenda que voc√™ a implementou.  Isso leva muito tempo, causa muitos protestos, porque com a introdu√ß√£o de mudan√ßas na cultura. <br><br>  Hoje vamos usar duas ferramentas: Terraform e Packer (ambos s√£o desenvolvimentos da Hashicorp).  Uma discuss√£o adicional ser√° sobre por que devemos usar o Terraform e como integr√°-lo ao nosso ambiente.  N√£o √© por acaso que falo sobre essas duas ferramentas.  At√© recentemente, eu tamb√©m trabalhava na Hashicorp.  Mas mesmo depois de deixar o Hashicorp, ainda contribuo com o c√≥digo dessas ferramentas, porque as acho realmente √∫teis. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5d0/4b0/807/5d04b08076e6d28da7cc17589d79de6d.png"><br><br>  O Terraform suporta a intera√ß√£o com os provedores.  Provedores s√£o nuvens, servi√ßos Saas, etc. <br><br>  Dentro de cada provedor de servi√ßos em nuvem, existem v√°rios recursos, como sub-rede, VPC, balanceador de carga, etc. Usando o DSL (idioma espec√≠fico do dom√≠nio), voc√™ informa √† Terraform como ser√° sua infraestrutura. <br><br>  Terraform usa a teoria dos grafos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1c7/142/7d2/1c71427d2d18431acfe78d79797f9948.png"><br><br>  Voc√™ provavelmente conhece a teoria dos grafos.  Os n√≥s fazem parte da nossa infraestrutura, como um balanceador de carga, sub-rede ou VPC.  Costelas s√£o as rela√ß√µes entre esses sistemas.  Isso √© tudo o que eu pessoalmente considero necess√°rio saber sobre a teoria dos grafos para usar o Terraform.  Deixamos o resto para os especialistas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8de/db7/fe6/8dedb7fe6a72bd36d371f3576e841cfa.png"><br><br>  O Terraform realmente usa um gr√°fico direcionado porque conhece n√£o apenas os relacionamentos, mas tamb√©m sua ordem: que A (suponha que A seja VPC) deve ser definido como B, que √© uma sub-rede.  E B deve ser criado antes de C (inst√¢ncia), porque existe um procedimento prescrito para criar abstra√ß√µes no Amazon ou em qualquer outra nuvem. <br>  Mais informa√ß√µes sobre esse t√≥pico est√£o dispon√≠veis no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">YouTube por</a> Paul Hinze, que ainda √© diretor de infraestrutura da Hashicorp.  Por refer√™ncia - uma √≥tima conversa sobre infraestrutura e teoria de grafos. <br><br><h3>  Pr√°tica </h3><br>  Escrever um c√≥digo √© muito melhor do que discutir uma teoria. <br><br>  Eu criei anteriormente a AMI (Amazon Machine Images).  Eu uso o Packer para cri√°-los e vou mostrar como fazer isso. <br><br>  A AMI √© uma inst√¢ncia de um servidor virtual na Amazon, √© predefinida (em termos de configura√ß√£o, aplicativos etc.) e √© criada a partir de uma imagem.  Adoro poder criar novas AMIs.  Essencialmente, as AMIs s√£o meus cont√™ineres do Docker. <br><br>  Ent√£o, eu tenho AMI, eles t√™m identifica√ß√£o.  Indo para a interface da Amazon, vemos que temos apenas uma AMI e nada mais: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4cb/b65/563/4cbb65563af0eea258e8c5cdc936a318.png"><br><br>  Eu posso lhe mostrar o que h√° nesta AMI.  Tudo √© muito simples. <br><br>  Eu tenho um modelo de arquivo JSON: <br><br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"variables"</span></span>: { <span class="hljs-string"><span class="hljs-string">"source_ami"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"region"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"builders"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"amazon-ebs"</span></span>, <span class="hljs-string"><span class="hljs-string">"region"</span></span>: <span class="hljs-string"><span class="hljs-string">"{{user 'region'}}"</span></span>, <span class="hljs-string"><span class="hljs-string">"source_ami"</span></span>: <span class="hljs-string"><span class="hljs-string">"{{user 'source_ami'}}"</span></span>, <span class="hljs-string"><span class="hljs-string">"ssh_pty"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"instance_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"t2.micro"</span></span>, <span class="hljs-string"><span class="hljs-string">"ssh_username"</span></span>: <span class="hljs-string"><span class="hljs-string">"ubuntu"</span></span>, <span class="hljs-string"><span class="hljs-string">"ssh_timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"5m"</span></span>, <span class="hljs-string"><span class="hljs-string">"associate_public_ip_address"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"ami_virtualization_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"hvm"</span></span>, <span class="hljs-string"><span class="hljs-string">"ami_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"application_instance-{{isotime \"2006-01-02-1504\"}}"</span></span>, <span class="hljs-string"><span class="hljs-string">"tags"</span></span>: { <span class="hljs-string"><span class="hljs-string">"Version"</span></span>: <span class="hljs-string"><span class="hljs-string">"{{user 'version'}}"</span></span> } }], <span class="hljs-string"><span class="hljs-string">"provisioners"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"shell"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_retry_timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"10m"</span></span>, <span class="hljs-string"><span class="hljs-string">"inline"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"sudo apt-get update -y"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo apt-get install -y ntp nginx"</span></span> ] }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"file"</span></span>, <span class="hljs-string"><span class="hljs-string">"source"</span></span>: <span class="hljs-string"><span class="hljs-string">"application-files/nginx.conf"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span>: <span class="hljs-string"><span class="hljs-string">"/tmp/nginx.conf"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"file"</span></span>, <span class="hljs-string"><span class="hljs-string">"source"</span></span>: <span class="hljs-string"><span class="hljs-string">"application-files/index.html"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span>: <span class="hljs-string"><span class="hljs-string">"/tmp/index.html"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"shell"</span></span>, <span class="hljs-string"><span class="hljs-string">"start_retry_timeout"</span></span>: <span class="hljs-string"><span class="hljs-string">"5m"</span></span>, <span class="hljs-string"><span class="hljs-string">"inline"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"sudo mkdir -p /usr/share/nginx/html"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo mv /tmp/index.html /usr/share/nginx/html/index.html"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo mv /tmp/nginx.conf /etc/nginx/nginx.conf"</span></span>, <span class="hljs-string"><span class="hljs-string">"sudo systemctl enable nginx.service"</span></span> ] } ] }</code> </pre> <br>  Temos vari√°veis ‚Äã‚Äãque passamos e o Packer possui uma lista dos chamados Construtores para diferentes √°reas;  existem muitos deles.  O Builder usa uma fonte AMI especial, que eu transmito em um identificador AMI.  Dou a ele o nome de usu√°rio e a senha do SSH e tamb√©m indico se ele precisa de um endere√ßo IP p√∫blico para que as pessoas possam acess√°-lo de fora.  No nosso caso, isso realmente n√£o importa, porque √© uma inst√¢ncia da AWS para o Packer. <br>  Tamb√©m definimos o nome e as tags da AMI. <br><br>  Voc√™ n√£o precisa analisar esse c√≥digo.  Ele est√° aqui apenas para mostrar como ele funciona.  A parte mais importante aqui √© a vers√£o.  Isso se tornar√° relevante mais tarde, quando entrarmos no Terraform. <br><br>  Depois que o construtor chama a inst√¢ncia, os agentes de fornecimento s√£o ativados nela.  Na verdade, eu instalo o NCP e o nginx para mostrar o que posso fazer aqui.  Copio alguns arquivos e apenas fa√ßo a configura√ß√£o do nginx.  Tudo √© muito simples.  Em seguida, ativei o nginx para que ele inicie quando a inst√¢ncia for iniciada. <br><br>  Ent√£o, eu tenho um servidor de aplicativos e funciona.  Eu posso us√°-lo no futuro.  No entanto, eu sempre verifico meus modelos do Packer.  Porque √© uma configura√ß√£o JSON onde voc√™ pode encontrar alguns problemas. <br>  Para fazer isso, eu executo o comando: <br><br> <code>make validate <br></code> <br>  Recebo a resposta de que o modelo do Packer foi verificado com sucesso: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2f0/aa3/1a7/2f0aa31a768c26246877688d0c81cc9e.png"><br><br>  Este √© apenas um comando, para que eu possa conect√°-lo √† ferramenta de IC (qualquer um).  Na verdade, ser√° um processo: se o desenvolvedor alterar o modelo, a solicita√ß√£o pull for gerada, a ferramenta de IC verificar√° a solicita√ß√£o, executar√° o equivalente √† verifica√ß√£o do modelo e publicar√° o modelo em caso de verifica√ß√£o bem-sucedida.  Tudo isso pode ser combinado no "Master". <br>  Temos um fluxo para modelos de AMI - voc√™ s√≥ precisa aumentar a vers√£o. <br><br>  Suponha que o desenvolvedor tenha criado uma nova vers√£o da AMI. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc9/3b9/546/dc93b95464ccf7b7e6fbe959d4a5ddf0.png"><br><br>  Vou apenas corrigir a vers√£o nos arquivos 1.0.0 a 1.0.1 para mostrar a diferen√ßa: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tittle</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome to DevOops!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tittle</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Welcome to DevOops!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Version: 1.0.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  Voltarei √† linha de comando e come√ßarei a cria√ß√£o da AMI. <br>  N√£o gosto de dirigir as mesmas equipes.  Eu gosto de criar AMI rapidamente, ent√£o eu uso makefiles.  Vamos dar uma olhada com o <code>cat</code> no meu makefile: <br><br> <code>cat Makefile <br></code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/163/0e4/bea/1630e4bea410b10ffcbb5fce2a27d595.png"><br><br>  Este √© o meu makefile.  Eu at√© forneci a Ajuda: digito <code>make</code> e clico na guia, e isso me mostra todo o destino. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/74d/cbb/611/74dcbb6110c7350483735a0f96d9fe90.png"><br><br>  Ent√£o, vamos criar uma nova vers√£o 1.0.1 da AMI. <br><br> <code>make ami <br></code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/879/16c/482/87916c482f6410c8a2fc73c150308409.png"><br><br>  De volta ao Terraform. <br><br>  Enfatizo que este n√£o √© um c√≥digo de produ√ß√£o.  Isto √© uma demonstra√ß√£o.  Existem maneiras de fazer a mesma coisa melhor. <br><br>  Eu uso os m√≥dulos Terraform em todos os lugares.  Como n√£o trabalho mais no Hashicorp, posso expressar minha opini√£o sobre os m√≥dulos.  Para mim, os m√≥dulos est√£o no n√≠vel de encapsulamento.  Por exemplo, eu gosto de encapsular tudo relacionado √† VPC: redes, sub-redes, tabelas de roteamento, etc. <br><br>  O que est√° acontecendo l√° dentro?  Os desenvolvedores que trabalham com isso podem n√£o se importar com isso.  Eles precisam ter um entendimento b√°sico de como a nuvem funciona, o que √© a VPC.  Mas n√£o √© necess√°rio se aprofundar nos detalhes.  Somente as pessoas que realmente precisam alterar um m√≥dulo devem entend√™-lo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a8/90c/b85/1a890cb85c3fb6a6580e8b6a25492f4f.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/177/a14/a24/177a14a241d80ee6bcc2cf64f194ce4e.png"><br><br>  Aqui, vou criar um recurso da AWS e um m√≥dulo VPC.  O que est√° acontecendo aqui?  Pegue o <code>cidr_block</code> n√≠vel <code>cidr_block</code> e crie tr√™s sub-redes privadas e tr√™s sub-redes p√∫blicas.  A seguir, √© apresentada uma lista de √°reas de disponibilidade.  Mas n√£o sabemos o que s√£o essas zonas de acessibilidade. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/26b/ec1/4ea/26bec14eab18a025c33c2a871c4d3ed4.png"><br><br>  N√≥s estamos indo para criar uma VPN.  Apenas n√£o use este m√≥dulo VPN.  √â o openVPN, que cria uma inst√¢ncia da AWS que n√£o possui um certificado.  Ele usa apenas o endere√ßo IP p√∫blico e √© mencionado aqui apenas para mostrar que podemos conectar-se √† VPN.  Existem ferramentas mais convenientes para criar uma VPN.  Levei cerca de 20 minutos e duas cervejas para escrever a minha. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ae3/a5f/8a6/ae3a5f8a6561b2b9f726e2e129dfcb2f.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/6a8/f0e/7b9/6a8f0e7b965f44255365d50ad64669e0.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/078/e4c/073/078e4c073df61b68e97372c7e4730f5b.png"><br><br>  Em seguida, criamos uma camada de <code>application_tier</code> , que √© um grupo de dimensionamento autom√°tico - um balanceador de carga.  Algumas configura√ß√µes de inicializa√ß√£o s√£o baseadas no AMI-ID e combinam v√°rias sub-redes e zonas de disponibilidade e tamb√©m usam uma chave SSH. <br>  Vamos voltar a isso em um segundo. <br><br>  Eu j√° mencionei zonas de disponibilidade.  Eles diferem para diferentes contas da AWS.  Minha conta nos EUA no leste pode ter acesso √†s zonas A, B e D. Sua conta da AWS pode ter acesso a B, C e E. Portanto, ao fixar esses valores no c√≥digo, encontraremos problemas.  Na Hashicorp, sugerimos que pud√©ssemos criar essas fontes de dados para poder perguntar √† Amazon o que estava dispon√≠vel para n√≥s.  Sob o cap√¥, solicitamos uma descri√ß√£o das zonas de disponibilidade e, em seguida, retornamos uma lista de todas as zonas da sua conta.  Gra√ßas a isso, podemos usar fontes de dados para a AMI. <br><br>  Agora chegamos ao fundo da minha demonstra√ß√£o.  Criei um grupo de dimensionamento autom√°tico no qual tr√™s inst√¢ncias est√£o em execu√ß√£o.  Por padr√£o, todos eles t√™m a vers√£o 1.0.0. <br><br>  Quando implantarmos a nova vers√£o da AMI, inicio a configura√ß√£o do Terraform novamente, isso mudar√° a configura√ß√£o de inicializa√ß√£o e o novo servi√ßo receber√° a pr√≥xima vers√£o do c√≥digo, etc. E podemos control√°-la. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53e/030/d08/53e030d08a8820f28ce8970bdb2bcee8.png"><br><br>  Vemos que o Packer est√° pronto e temos uma nova AMI. <br>  Volto √† Amazon, atualizo a p√°gina e vejo uma segunda AMI. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab7/966/88d/ab796688d7e117c00b12343d54547a3a.png"><br><br>  De volta ao Terraform. <br><br>  A partir da vers√£o 0.10, o Terraform dividiu os provedores em reposit√≥rios separados.  E o comando <code>init terraform</code> obt√©m uma c√≥pia do provedor necess√°ria para executar. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a71/f24/5c1/a71f245c166bffd9cce8d2da21612bb3.png"><br><br>  Fornecedores carregados.  Estamos prontos para avan√ßar. <br>  Em seguida, temos que executar o <code>terraform get</code> - carregar os m√≥dulos necess√°rios.  Eles est√£o agora na minha m√°quina local.  Ent√£o o Terraform obter√° todos os m√≥dulos localmente.  Em geral, os m√≥dulos podem ser armazenados em seus pr√≥prios reposit√≥rios no GitHub ou em outro local.  Foi por isso que falei sobre o m√≥dulo VPC.  Voc√™ pode conceder √† equipe de rede acesso para fazer altera√ß√µes.  E esta √© a API para a equipe de desenvolvimento trabalhar com eles.  Realmente √∫til. <br><br>  O pr√≥ximo passo √© construir um gr√°fico. <br><br>  Comece com <br><br> <code>terraform plan <br></code> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/854/852/ea8/854852ea82a25694dbef99af5832eb27.png"><br><br>  O Terraform pegar√° o estado local atual e ser√° comparado com a conta da AWS, indicando as diferen√ßas.  No nosso caso, ele criar√° 35 novos recursos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ce/d53/2cc/3ced532cc5cbe65758669980fda88f9e.png"><br><br>  Agora aplicamos as altera√ß√µes: <br><br> <code>terraform apply <br></code> <br><br>  Voc√™ n√£o precisa fazer tudo isso na m√°quina local.  Estes s√£o apenas comandos, passando vari√°veis ‚Äã‚Äãpara o Terraform.  Voc√™ pode portar esse processo para ferramentas de IC. <br>  Se voc√™ deseja mover isso para o CI, deve usar o estado remoto.  Eu gostaria que todos que usassem o Terraform trabalhassem com um estado remoto.  Por favor, n√£o use o estado local. <br><br>  Um de meus amigos observou que, mesmo depois de todos os anos de trabalho com Terraform, ele ainda est√° descobrindo algo novo.  Por exemplo, se voc√™ estiver criando uma inst√¢ncia da AWS, precisar√° fornecer uma senha e ela poder√° salv√°-la no seu estado.  Quando trabalhei na Hashicorp, assumimos que haveria um processo colaborativo que altera essa senha.  Portanto, n√£o tente armazenar tudo localmente.  E ent√£o voc√™ pode colocar tudo isso nas ferramentas de IC. <br><br>  Ent√£o, a infraestrutura √© criada para mim. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c55/040/c1d/c55040c1d4544a4d7c53f77a494c2be7.png"><br><br>  Terraform pode criar um gr√°fico: <br><br> <code>terraform graph <br></code> <br><br>  Como eu disse, ele est√° construindo uma √°rvore.  De fato, oferece a oportunidade de avaliar o que est√° acontecendo em sua infraestrutura.  Ele mostrar√° a rela√ß√£o entre todas as partes diferentes - todos os n√≥s e arestas.  Como as conex√µes t√™m instru√ß√µes, estamos falando de um gr√°fico direcionado. <br><br>  O gr√°fico ser√° uma lista JSON que pode ser salva em um arquivo PNG ou DOC. <br><br>  De volta ao Terraform.  Estamos realmente criando um grupo de dimensionamento autom√°tico. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9fe/253/799/9fe253799368629b6c98d7472cbc3634.png"><br><br>  O grupo de dimensionamento autom√°tico tem capacidade para 3. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0dd/2a3/e47/0dd2a3e47ef49ba119c37c6ee1118fe9.png"><br><br>  Uma pergunta interessante: podemos usar o Vault para gerenciar segredos no Terraform?  Infelizmente, n√£o.  N√£o h√° fonte de dados do Vault para ler segredos no Terraform.  Existem outras maneiras, como vari√°veis ‚Äã‚Äãde ambiente.  Com a ajuda deles, voc√™ n√£o precisa inserir segredos no c√≥digo; pode l√™-los como vari√°veis ‚Äã‚Äãde ambiente. <br><br>  Portanto, temos algumas instala√ß√µes de infraestrutura: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/107/2ef/61e/1072ef61ea789635cb6e9894005734b2.png"><br><br>  Entro na minha VPN muito secreta (n√£o quebre minhas VPNs). <br><br>  O mais importante aqui √© que temos tr√™s inst√¢ncias do aplicativo.  √â verdade que eu deveria ter notado qual vers√£o do aplicativo est√° sendo executada neles.  Isso √© muito importante. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/009/bef/b7d/009befb7dcb30e11c9454e3b27f036cf.png"><br>  Tudo realmente est√° por tr√°s da VPN: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b9f/5d3/e43/b9f5d3e436b981cfc21db8e42b782db5.png"><br><br>  Se eu pegar isso ( <code>application-elb-1069500747.eu-west-1.elb.amazonaws.com</code> ) e col√°-lo na barra de endere√ßos do navegador, obtive o seguinte: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/016/40e/203/01640e2034e1cd80ff454b5c6b74c386.png"><br><br>  Deixe-me lembr√°-lo de que estou conectado a uma VPN.  Se eu sair, o endere√ßo especificado estar√° indispon√≠vel. <br>  Vemos a vers√£o 1.0.0.  E n√£o importa o quanto atualizamos a p√°gina, obtemos a 1.0.0. <br>  O que acontece se eu alterar a vers√£o de 1.0.0 para 1.0.1 no c√≥digo? <br><br><pre> <code class="javascript hljs">filter { name = <span class="hljs-string"><span class="hljs-string">"tag:Version"</span></span> values = [<span class="hljs-string"><span class="hljs-string">"1.0.1"</span></span>] }</code> </pre> <br>  Obviamente, as ferramentas de IC garantir√£o a cria√ß√£o da vers√£o correta. <br>  N√£o observo atualiza√ß√µes manuais!  Somos imperfeitos, cometemos erros e podemos colocar a vers√£o 1.0.6 em vez da 1.0.1 ao atualizar manualmente. <br><br><pre> <code class="javascript hljs">filter { name = <span class="hljs-string"><span class="hljs-string">"tag:Version"</span></span> values = [<span class="hljs-string"><span class="hljs-string">"1.0.6"</span></span>] }</code> </pre><br>  Mas vamos para a nossa vers√£o (1.0.1). <br><br> <code>terraform plan <br></code> <br><br>  O Terraform atualiza o estado: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fb8/7f5/221/fb87f522107164e64498825e1e4e0562.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c39/8ec/61b/c398ec61bfdbd060b526417c56631b14.png"><br><br>  Ent√£o, neste momento, ele me diz que vai mudar a vers√£o na configura√ß√£o de lan√ßamento.  Devido √† altera√ß√£o no identificador, for√ßar√° o rein√≠cio da configura√ß√£o e o grupo de dimensionamento autom√°tico ser√° alterado (isso √© necess√°rio para ativar a nova configura√ß√£o de inicializa√ß√£o). <br><br>  Isso n√£o altera as inst√¢ncias em execu√ß√£o.  Isso √© realmente importante.  Voc√™ pode seguir esse processo e test√°-lo sem alterar as inst√¢ncias na produ√ß√£o. <br><br>  Nota: voc√™ sempre deve criar uma nova configura√ß√£o de ativa√ß√£o antes de destruir a antiga, caso contr√°rio, haver√° um erro. <br><br>  Vamos aplicar as altera√ß√µes: <br><br> <code>terraform apply <br></code> <br><br>  Agora, de volta √† AWS.  Quando todas as altera√ß√µes s√£o aplicadas, vamos para o grupo de dimensionamento autom√°tico. <br>  Vamos seguir para a configura√ß√£o da AWS.  Vemos que h√° tr√™s inst√¢ncias com uma configura√ß√£o de inicializa√ß√£o.  Eles s√£o iguais. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/365/ae7/49c/365ae749cd5c77ea0634247410b58da6.png"><br><br>  A Amazon garante que, se quisermos executar tr√™s inst√¢ncias do servi√ßo, elas ser√£o realmente lan√ßadas.  √â por isso que lhes pagamos dinheiro. <br><br>  Vamos seguir para os experimentos. <br><br>  Uma nova configura√ß√£o de inicializa√ß√£o foi criada.  Portanto, se eu excluir uma das inst√¢ncias, o restante n√£o ser√° danificado.  Isso √© importante.  No entanto, se voc√™ usar as inst√¢ncias diretamente, ao alterar os dados do usu√°rio, isso destruir√° as inst√¢ncias "ativas".  Por favor, n√£o fa√ßa isso. <br><br>  Portanto, exclua uma das inst√¢ncias: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eb3/373/05a/eb337305af7a4e537d2f5963661f909f.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/244/711/a7c/244711a7c5beb5edd4863239e2997fc1.png"><br><br>  O que acontecer√° no grupo de dimensionamento autom√°tico quando ele for desligado?  Uma nova inst√¢ncia aparecer√° em seu lugar. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/86d/1dd/8f5/86d1dd8f57f1af6e56ddf9054b777e91.png"><br><br>  Aqui voc√™ se encontra em uma situa√ß√£o interessante.  A inst√¢ncia ser√° iniciada com a nova configura√ß√£o.  Ou seja, no sistema voc√™ pode ter v√°rias imagens diferentes (com configura√ß√µes diferentes).  √Äs vezes, √© melhor n√£o excluir imediatamente a antiga configura√ß√£o de inicializa√ß√£o para conectar-se conforme necess√°rio. <br><br>  Aqui tudo se torna ainda mais interessante.  Por que n√£o fazer isso com scripts e ferramentas de IC, e n√£o manualmente, como mostro?  Existem ferramentas que podem fazer isso, como as excelentes ferramentas ausentes da AWS no GitHub. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/948/2b7/96d/9482b796d437daa84cf7c26dc85aa08f.png"><br><br>  E o que essa ferramenta faz?  Este √© um script bash que executa todas as inst√¢ncias no balanceador de carga, destruindo-as uma por vez, garantindo a cria√ß√£o de novas em seu lugar. <br>  Se eu perdesse uma das minhas inst√¢ncias com a vers√£o 1.0.0 e uma nova aparecesse - 1.1.1, eu gostaria de matar todo o 1.0.0, transferindo tudo para a nova vers√£o.  Porque eu sempre segui em frente.  Deixe-me lembr√°-lo de que n√£o gosto quando o servidor de aplicativos permanece por muito tempo. <br><br>  Em um dos projetos, a cada sete dias, eu tinha um script de controle que destru√≠a todas as inst√¢ncias da minha conta.  Portanto, o servidor n√£o tinha mais de sete dias.  Outra coisa (a minha favorita) √© marcar os servidores como "manchados" usando SSH em uma caixa e destru√≠-los a cada hora usando um script - n√£o queremos que as pessoas fa√ßam isso manualmente. <br><br>  Esses scripts de controle permitem que voc√™ sempre tenha a vers√£o mais recente com bugs corrigidos e atualiza√ß√µes de seguran√ßa. <br><br>  Voc√™ pode usar o script apenas executando: <br><br> <code>aws-ha-relesae.sh -a my-scaling-group <br></code> <br><br>  <code>-a</code> √© o seu grupo de dimensionamento autom√°tico.  O script passar√° por todas as inst√¢ncias do seu grupo de dimensionamento autom√°tico e o substituir√°.  Voc√™ pode execut√°-lo n√£o apenas manualmente, mas tamb√©m a partir da ferramenta CI. <br>  Voc√™ pode fazer isso no controle de qualidade ou na produ√ß√£o.  Voc√™ pode fazer isso mesmo na sua conta local da AWS.  Voc√™ faz o que quiser, sempre usando o mesmo mecanismo. <br><br>  De volta √† Amaz√¥nia.  Temos uma nova inst√¢ncia: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f4b/1aa/079/f4b1aa079ec971f111abce895d28c771.png"><br><br>  Depois de atualizar a p√°gina no navegador, onde vimos a vers√£o 1.0.0, obtemos: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ff4/923/d78/ff4923d78d16d508c0e8bae753044c15.png"><br><br>  O interessante √© que, desde que criamos o script de cria√ß√£o da AMI, podemos testar a cria√ß√£o da AMI. <br><br>  Existem √≥timas ferramentas, como ServerScript ou Serverspec. <br><br>  O Serverspec permite criar especifica√ß√µes no estilo Ruby para testar a apar√™ncia do servidor de aplicativos.  Por exemplo, abaixo, fa√ßo um teste que verifica se o nginx est√° instalado no servidor. <br><br><pre> <code class="ruby hljs"><span class="hljs-keyword"><span class="hljs-keyword">require</span></span> <span class="hljs-string"><span class="hljs-string">'spec_helper'</span></span> describe package(<span class="hljs-string"><span class="hljs-string">'nginx'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it { should be_installed } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> describe service(<span class="hljs-string"><span class="hljs-string">'nginx'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it { sould be_enabled } it { sould be_running } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> describe port(<span class="hljs-number"><span class="hljs-number">80</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> it { should be_listening } <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br>  O Nginx deve estar instalado e em execu√ß√£o no servidor e atendendo na porta 80.  Voc√™ pode dizer que o usu√°rio X deve estar dispon√≠vel no servidor.  E voc√™ pode colocar todos esses testes no lugar deles.  Portanto, quando voc√™ cria uma AMI, a ferramenta de IC pode verificar se essa AMI √© adequada para uma determinada finalidade.  Voc√™ saber√° que a AMI est√° pronta para produ√ß√£o. <br><br><h3>  Em vez de uma conclus√£o </h3><br>  Mary Poppendieck √© provavelmente uma das mulheres mais incr√≠veis que eu j√° ouvi falar.  Ao mesmo tempo, ela falou sobre como o desenvolvimento de software lean se desenvolveu ao longo dos anos.  E como ela estava associada √† 3M nos anos 60, quando a empresa estava realmente engajada no desenvolvimento enxuto. <br><br>  E ela fez a pergunta: quanto tempo levar√° para sua organiza√ß√£o implantar as altera√ß√µes associadas a uma linha de c√≥digo?  Voc√™ pode tornar esse processo confi√°vel e repet√≠vel? <br><br>  Como regra, essa pergunta sempre dizia respeito ao c√≥digo do software.  Quanto tempo levarei para corrigir um erro neste aplicativo ao implantar na produ√ß√£o?  Mas n√£o h√° raz√£o para n√£o podermos usar a mesma pergunta para infraestrutura ou bancos de dados. <br><br>  Eu trabalhei para uma empresa chamada OpenTable.  Nele, chamamos isso de dura√ß√£o do ciclo.  E no OpenTable ela tinha sete semanas.  E isso √© relativamente bom.  Conhe√ßo empresas que levam meses para enviar um c√≥digo para produ√ß√£o.  No OpenTable, revisamos o processo por quatro anos.  Isso levou muito tempo, porque a organiza√ß√£o √© grande - 200 pessoas.  E reduzimos o tempo do ciclo para tr√™s minutos.  Isso foi poss√≠vel gra√ßas a medidas do efeito de nossas transforma√ß√µes. <br><br>  Agora tudo est√° em script.  Temos muitas ferramentas e exemplos, existe o GitHub.  Portanto, pegue id√©ias de confer√™ncias como DevOops, implemente-as em sua organiza√ß√£o.  N√£o tente implementar tudo.  Pegue uma coisinha e venda.  Mostre a algu√©m.  O impacto de uma pequena mudan√ßa pode ser medido, medido e seguir em frente! <br><blockquote>  Paul Stack chegar√° a S√£o Petersburgo na confer√™ncia do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DevOops 2018</a> com um relat√≥rio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Teste de sistema sustent√°vel com o caos"</a> .  Paul falar√° sobre a metodologia Chaos Engineering e mostrar√° como usar essa metodologia em projetos reais. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt420661/">https://habr.com/ru/post/pt420661/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt420647/index.html">Por que os personagens de videogame quase nunca se despem</a></li>
<li><a href="../pt420651/index.html">Cientistas descobrem evid√™ncias de precedentes desagrad√°veis ‚Äã‚Äãrelacionados √† mudan√ßa clim√°tica</a></li>
<li><a href="../pt420653/index.html">Cinco coisas que voc√™ precisa fazer para equipar sua casa em Marte</a></li>
<li><a href="../pt420657/index.html">An√°lise: de quem dinheiro Elon Musk ser√° capaz de retirar Tesla da bolsa</a></li>
<li><a href="../pt420659/index.html">Campanha USB da HRF (Human Rights Foundation) ‚ÄúFlash Drives for Freedom‚Äù</a></li>
<li><a href="../pt420663/index.html">M√©tricas simples e uma maneira de economizar tempo ao procurar problemas na infraestrutura</a></li>
<li><a href="../pt420665/index.html">Criando um aplicativo no .NET Core e Kubernetes: Nossa experi√™ncia</a></li>
<li><a href="../pt420667/index.html">Princ√≠pios de opera√ß√£o do protocolo EIGRP</a></li>
<li><a href="../pt420669/index.html">Vis√£o Geral do Mercado de Automa√ß√£o Corporativa: Solu√ß√µes para Empresas de Constru√ß√£o e Gerenciamento de Habita√ß√µes e Utilidades</a></li>
<li><a href="../pt420671/index.html">[Ekaterinburg, an√∫ncio] UralJS # 9 - tr√™s relat√≥rios sobre microsservi√ßos, testes e registro de erros na frente</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>