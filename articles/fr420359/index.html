<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ôüèª üç¨ ü•Ñ Var, let ou const? Probl√®mes de port√©e variable et ES6 üôáüèΩ üó∫Ô∏è üåÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les √©tendues en JavaScript ont toujours √©t√© un sujet d√©licat, en particulier par rapport aux langages plus strictement organis√©s tels que C et Java. P...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Var, let ou const? Probl√®mes de port√©e variable et ES6</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/420359/"> Les √©tendues en JavaScript ont toujours √©t√© un sujet d√©licat, en particulier par rapport aux langages plus strictement organis√©s tels que C et Java.  Pendant de nombreuses ann√©es, la port√©e de JS n'a pas √©t√© particuli√®rement discut√©e, car le langage n'avait tout simplement aucun moyen susceptible d'affecter de mani√®re significative la situation actuelle.  Mais dans ECMAScript 6, il existe de nouvelles fonctionnalit√©s qui permettent aux d√©veloppeurs de mieux contr√¥ler la port√©e des variables.  Ces fonctionnalit√©s sont d√©sormais tr√®s bien support√©es par les navigateurs, elles sont assez accessibles √† la plupart des d√©veloppeurs.  Cependant, de nouveaux mots-cl√©s pour d√©clarer des variables, tenant compte du fait que l'ancien mot-cl√© <code>var</code> n'a pas disparu, signifient non seulement de nouvelles opportunit√©s, mais aussi l'apparition de nouvelles questions.  Quand utiliser les mots cl√©s <code>let</code> et <code>const</code> ?  Comment se comportent-ils?  Dans quelles situations le mot-cl√© <code>var</code> -il toujours pertinent?  Le mat√©riel, dont nous publions la traduction aujourd'hui, vise √† explorer le probl√®me de la port√©e des variables en JavaScript. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/webt/v4/6q/as/v46qas_2e_rx9sypmgyz4trnhr0.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Port√©es variables: un aper√ßu</font> </h2><br>  La port√©e d'une variable est un concept important en programmation, ce qui peut toutefois d√©router certains d√©veloppeurs, en particulier les novices.  La port√©e d'une variable est la partie du programme dans laquelle cette variable est accessible. <br><br>  Jetez un ≈ìil √† l'exemple suivant: <br><br><pre> <code class="hljs matlab">var myVar = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMyVar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myVar</span></span></span><span class="hljs-function"> = 2; } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMyVar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">console</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(myVar)</span></span></span><span class="hljs-function">;</span></span></code> </pre> <br>  Que produira la m√©thode <code>console.log</code> ?  La r√©ponse √† cette question ne surprendra personne: elle affichera <code>2</code> .  La variable <code>myVar</code> d√©clar√©e en dehors d'une fonction, ce qui nous indique qu'elle est d√©clar√©e dans la port√©e globale.  Par cons√©quent, toute fonction d√©clar√©e dans la m√™me port√©e pourra acc√©der √† <code>myVar</code> .  En effet, lorsqu'il s'agit de code ex√©cut√© dans un navigateur, m√™me les fonctions d√©clar√©es dans d'autres fichiers connect√©s √† la page auront acc√®s √† cette variable. <br><br>  Jetez maintenant un ≈ìil au code suivant: <br><br><pre> <code class="hljs matlab"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMyVar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">var</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myVar</span></span></span><span class="hljs-function"> = 2; } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setMyVar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">console</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(myVar)</span></span></span><span class="hljs-function">;</span></span></code> </pre> <br>  Ext√©rieurement, ses changements, par rapport √† l'exemple pr√©c√©dent, sont insignifiants.  √Ä savoir, nous venons de mettre la d√©claration de variable √† l'int√©rieur de la fonction.  Que produira <code>console.log</code> maintenant?  En fait, rien, puisque cette variable n'est pas d√©clar√©e et lorsque vous essayez d'y acc√©der, un message concernant une erreur <code>ReferenceError</code> non g√©r√©e sera affich√©.  Cela s'est produit parce que la variable a √©t√© d√©clar√©e dans la fonction √† l'aide du mot cl√© <code>var</code> .  Par cons√©quent, la port√©e de cette variable est limit√©e √† la port√©e interne de la fonction.  Elle est accessible dans le corps de cette fonction, les fonctions int√©gr√©es √† cette fonction peuvent fonctionner avec elle, mais elle n'est pas accessible de l'ext√©rieur.  Si nous avons besoin de plusieurs fonctions au m√™me niveau pour utiliser une certaine variable, nous devons d√©clarer cette variable au m√™me endroit o√π ces fonctions sont d√©clar√©es, c'est-√†-dire un niveau sup√©rieur √† leur port√©e interne. <br><br>  Voici une observation int√©ressante: le code de la plupart des sites Web et des applications Web ne s'applique pas au travail d'un seul programmeur.  La plupart des projets logiciels sont le r√©sultat du d√©veloppement d'une √©quipe et, en outre, ils utilisent des biblioth√®ques et des frameworks tiers.  M√™me si un seul programmeur est impliqu√© dans le d√©veloppement d'un site Web, il utilise g√©n√©ralement des ressources externes.  Pour cette raison, il n'est g√©n√©ralement pas recommand√© de d√©clarer des variables dans la port√©e globale, car vous ne pouvez pas savoir √† l'avance quelles variables seront d√©clar√©es par d'autres d√©veloppeurs dont le code sera utilis√© dans le projet.  Pour contourner ce probl√®me, vous pouvez utiliser certaines astuces, en particulier le mod√®le ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Module</a> ¬ª et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IIFE</a> lors de l'application de l'approche orient√©e objet au d√©veloppement JavaScript, bien que l'encapsulation de donn√©es et de fonctions dans des objets ordinaires puisse obtenir le m√™me effet.  En g√©n√©ral, on peut noter que les variables dont la port√©e d√©passe ce dont elles ont besoin sont g√©n√©ralement un probl√®me avec lequel quelque chose doit √™tre fait. <br><br><h2>  <font color="#3AC1EF">Probl√®me de mot cl√© var</font> </h2><br>  Nous avons donc compris le concept de ¬´port√©e¬ª.  Passons maintenant √† des choses plus complexes.  Jetez un ≈ìil au code suivant: <br><br><pre> <code class="hljs matlab"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">varTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(var i = 0; i &lt; 3; i++)</span></span></span><span class="hljs-function"> {   </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">console</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i)</span></span></span><span class="hljs-function">; } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">console</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(i)</span></span></span><span class="hljs-function">; } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">varTest</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">;</span></span></code> </pre> <br>  Qu'est-ce qui arrivera √† la console apr√®s son ex√©cution?  Il est clair que les valeurs du compteur croissant <code>i</code> : <code>0</code> , <code>1</code> et <code>2</code> seront affich√©es √† l'int√©rieur de la boucle.  Une fois la boucle termin√©e, le programme continue de s'ex√©cuter.  Maintenant, nous essayons d'acc√©der √† la m√™me variable de compteur qui a √©t√© d√©clar√©e dans la boucle <code>for</code> , en dehors de cette boucle.  Que va-t-il en r√©sulter? <br><br>  Apr√®s avoir appel√© <code>i</code> dehors de la boucle, 3 entrera dans la console, car le mot-cl√© <code>var</code> agit au niveau de la fonction.  Si vous d√©clarez une variable √† l'aide de <code>var</code> , vous pouvez y acc√©der dans une fonction m√™me apr√®s avoir quitt√© la construction o√π elle a √©t√© d√©clar√©e. <br><br>  Cela peut devenir un probl√®me lorsque les fonctions deviennent plus complexes.  Prenons l'exemple suivant: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myVar = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {   <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myVar = <span class="hljs-number"><span class="hljs-number">2</span></span>;   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(myVar); } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(myVar); } doSomething();</code> </pre> <br>  Qu'est-ce qui va arriver √† la console maintenant?  <code>2</code> et <code>2</code> .  Nous d√©clarons une variable, l'initialisons avec le chiffre 1, puis essayons de red√©finir la m√™me variable √† l'int√©rieur de l' <code>if</code> .  √âtant donn√© que ces deux d√©clarations existent dans la m√™me port√©e, nous ne pouvons pas d√©clarer une nouvelle variable avec le m√™me nom, m√™me si nous voulons √©videmment le faire.  Par cons√©quent, la premi√®re variable est remplac√©e √† l'int√©rieur de l' <code>if</code> . <br><br>  C'est pr√©cis√©ment le plus gros d√©faut du mot-cl√© <code>var</code> .  La port√©e des variables d√©clar√©es en l'utilisant est trop grande.  Cela peut entra√Æner un √©crasement accidentel des donn√©es et d'autres erreurs.  De vastes zones de visibilit√© conduisent souvent √† des programmes inexacts.  En g√©n√©ral, une variable doit avoir une port√©e limit√©e par ses besoins, mais ne les d√©passant pas.  Ce serait bien de pouvoir d√©clarer des variables dont la port√©e n'est pas aussi grande que lors de l'utilisation de <code>var</code> , ce qui permettrait, si n√©cessaire, d'utiliser des constructions logicielles plus stables et plus r√©sistantes aux erreurs.  En fait, ECMAScript 6 nous offre de telles opportunit√©s. <br><br><h2>  <font color="#3AC1EF">Nouvelles fa√ßons de d√©clarer des variables</font> </h2><br>  La norme ECMAScript 6 (un nouvel ensemble de fonctionnalit√©s JavaScript, √©galement connu sous le nom ES6 et ES2015) nous donne deux nouvelles fa√ßons de d√©clarer des variables qui diff√®rent dans leur port√©e, par rapport √† <code>var</code> , et qui ont d'autres fonctionnalit√©s.  Ce sont les mots cl√©s <code>let</code> et <code>const</code> .  Les deux nous donnent la soi-disant port√©e de bloc.  Cela signifie que la port√©e de leur utilisation peut √™tre limit√©e √† un bloc de code, comme une boucle <code>for</code> ou une <code>if</code> .  Cela donne au d√©veloppeur plus de flexibilit√© dans le choix de la port√©e des variables.  Consid√©rez les nouveaux mots cl√©s. <br><br><h3>  <font color="#3AC1EF">‚ñçUtilisation du mot cl√© let</font> </h3><br>  Le mot cl√© <code>let</code> est tr√®s similaire √† <code>var</code> , la principale diff√©rence est la port√©e limit√©e des variables d√©clar√©es avec lui.  Nous r√©√©crivons l'un des exemples ci-dessus, en rempla√ßant <code>var</code> par <code>let</code> : <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myVar = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myVar = <span class="hljs-number"><span class="hljs-number">2</span></span>;   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(myVar); } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(myVar); } doSomething();</code> </pre> <br>  Dans ce cas, les chiffres <code>2</code> et <code>1</code> arriveront √† la console.  Cela se produit car l' <code>if</code> d√©finit une nouvelle port√©e pour la variable d√©clar√©e avec le mot cl√© <code>let</code> .  Cela conduit au fait que la deuxi√®me variable d√©clar√©e est une entit√© compl√®tement ind√©pendante, non li√©e √† la premi√®re.  Vous pouvez travailler avec eux ind√©pendamment les uns des autres.  Cependant, cela ne signifie pas que les blocs de code imbriqu√©s, tels que notre <code>if</code> , sont compl√®tement coup√©s des variables d√©clar√©es avec le mot cl√© <code>let</code> dans la port√©e dans laquelle ils se trouvent.  Jetez un ≈ìil au code suivant: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myVar = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(myVar); } } doSomething();</code> </pre> <br>  Dans cet exemple, la console obtiendra le num√©ro <code>1</code> .  Le code √† l'int√©rieur de l' <code>if</code> a acc√®s √† la variable que nous avons cr√©√©e en dehors d'elle.  Par cons√©quent, il affiche sa valeur dans la console.  Et que se passe-t-il si vous essayez de m√©langer la port√©e?  Par exemple, proc√©dez comme suit: <br><br><pre> <code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myVar = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(myVar);   <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myVar = <span class="hljs-number"><span class="hljs-number">2</span></span>;   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(myVar); } } doSomething();</code> </pre> <br>  Il peut sembler que le premier appel √† <code>console.log</code> produira <code>1</code> , mais en fait, lorsque vous essayez d'ex√©cuter ce code, une erreur <code>ReferenceError</code> appara√Ætra qui nous indique que la variable <code>myVar</code> pour cette √©tendue n'est pas d√©finie ou non initialis√©e (le texte de cette erreur diff√®re selon les diff√©rents navigateurs).  En JavaScript, il existe une telle chose que d'√©lever des variables au sommet de leur port√©e.  Autrement dit, si une variable est d√©clar√©e dans une certaine port√©e, JavaScript lui r√©serve une place avant m√™me que la commande pour la d√©clarer ne soit ex√©cut√©e.  La mani√®re exacte dont cela se produit diff√®re lorsque vous utilisez <code>var</code> et <code>let</code> . <br><br>  Prenons l'exemple suivant: <br><br><pre> <code class="hljs javascript"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(varTest); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> varTest = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(letTest); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> letTest = <span class="hljs-number"><span class="hljs-number">2</span></span>;</code> </pre> <br>  Dans les deux cas, nous essayons d'utiliser la variable avant de la d√©clarer.  Mais les commandes de sortie de la console se comportent diff√©remment.  La premi√®re, √† l'aide d'une variable qui sera d√©clar√©e ult√©rieurement √† l'aide du mot cl√© <code>var</code> , affichera <code>undefined</code> - c'est-√†-dire ce qui sera √©crit dans cette variable.  La deuxi√®me commande, qui essaie d'acc√©der √† la variable, qui sera d√©clar√©e plus tard √† l'aide du mot cl√© <code>let</code> , lancera une <code>ReferenceError</code> et nous dira que nous essayons d'utiliser la variable avant qu'elle ne soit d√©clar√©e ou initialis√©e.  Quel est le probl√®me? <br><br>  Et la chose ici est qu'avant l'ex√©cution du code, les m√©canismes responsables de son ex√©cution regardent ce code, d√©couvrent si des variables y seront d√©clar√©es et, si c'est le cas, les augmentent en r√©servant de la place pour elles.  Dans ce cas, les variables d√©clar√©es √† l'aide du mot cl√© <code>var</code> sont initialis√©es √† <code>undefined</code> dans leur port√©e, m√™me si elles sont accessibles avant d'√™tre d√©clar√©es.  Le principal probl√®me ici est que la valeur <code>undefined</code> dans une variable n'indique pas toujours qu'ils essaient d'utiliser la variable avant sa d√©claration.  Jetez un ≈ìil √† l'exemple suivant: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> var1; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(var1); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(var2); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> var2 = <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br>  Dans ce cas, bien que <code>var1</code> et <code>var2</code> d√©clar√©s diff√©remment, les deux appels √† <code>console.log</code> sortiront <code>undefined</code> .  Le point ici est que dans les variables d√©clar√©es avec <code>var</code> , mais non initialis√©es, la valeur <code>undefined</code> automatiquement √©crite.  En m√™me temps, comme nous l'avons d√©j√† dit, les variables d√©clar√©es √† l'aide de <code>var</code> , auxquelles on acc√®de avant de les d√©clarer, contiennent √©galement <code>undefined</code> .  Par cons√©quent, si quelque chose se passe mal dans un tel code, il ne sera pas possible de comprendre quelle est exactement la source de l'erreur - en utilisant une variable non initialis√©e ou en utilisant une variable avant sa d√©claration. <br><br>  La place des variables d√©clar√©es avec le mot <code>let</code> cl√© <code>let</code> est r√©serv√©e dans leur bloc, mais avant de les d√©clarer, elles tombent dans la zone morte temporaire (TDZ, Temporal Dead Zone).  Cela conduit au fait qu'ils ne peuvent pas √™tre utilis√©s avant d'√™tre d√©clar√©s, et une tentative d'acc√®s √† une telle variable entra√Æne une erreur.  Cependant, le syst√®me conna√Æt exactement la cause du probl√®me et le signale.  Cela se voit clairement dans cet exemple: <br><br><pre> <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> var1; console.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(var1); console.<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>(var2); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> var2 = <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br>  Ici, le premier appel √† <code>console.log</code> sortira <code>undefined</code> , et le second lancera une erreur <code>ReferenceError</code> , nous indiquant que la variable n'a pas encore √©t√© d√©clar√©e ou initialis√©e. <br><br>  Par cons√©quent, si l'utilisation de <code>var</code> semble <code>undefined</code> , nous ne connaissons pas la raison de ce comportement du programme.  Une variable peut √™tre d√©clar√©e et non initialis√©e, ou elle ne peut pas encore √™tre d√©clar√©e dans cette √©tendue, mais elle sera d√©clar√©e dans le code situ√© sous la commande pour y acc√©der.  En utilisant le mot cl√© <code>let</code> , nous pouvons comprendre ce qui se passe exactement, ce qui est beaucoup plus utile pour le d√©bogage. <br><br><h3>  <font color="#3AC1EF">‚ñçUtilisation du mot-cl√© const</font> </h3><br>  Le mot cl√© <code>const</code> est tr√®s similaire √† <code>let</code> , mais ils ont une diff√©rence importante.  Ce mot-cl√© est utilis√© pour d√©clarer des constantes.  Les valeurs des constantes ne peuvent pas √™tre modifi√©es apr√®s leur initialisation.  Il convient de noter que cela ne s'applique qu'aux valeurs des types primitifs, de l'eau, des cha√Ænes ou des nombres.  Si la constante est quelque chose de plus complexe, par exemple, un objet ou un tableau, la structure interne d'une telle entit√© peut √™tre modifi√©e, vous ne pouvez pas simplement la remplacer par une autre.  Jetez un ≈ìil au code suivant: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">let</span></span> mutableVar = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">const</span></span> immutableVar = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">mutableVar</span></span> = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">immutableVar</span></span> = <span class="hljs-number"><span class="hljs-number">4</span></span>;</code> </pre> <br>  Ce code sera ex√©cut√© jusqu'√† la derni√®re ligne.  Tenter d'attribuer une nouvelle valeur √† une constante entra√Ænera une erreur <code>TypeError</code> .  C'est ainsi que se comportent les constantes, mais, comme d√©j√† mentionn√©, les objets que les constantes initialisent peuvent √™tre modifi√©s, ils peuvent subir des mutations, ce qui peut entra√Æner des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">surprises</a> . <br><br>  Peut-√™tre qu'en tant que d√©veloppeur JavaScript, vous vous demandez pourquoi l'immunit√© des variables est importante.  Les constantes sont un nouveau ph√©nom√®ne en JavaScript, alors qu'elles sont une partie essentielle de langages comme C ou Java.  Pourquoi ce concept est-il si populaire?  Le fait est que l'utilisation de constantes nous fait r√©fl√©chir au fonctionnement de notre code.  Dans certaines situations, la modification de la valeur d'une variable peut perturber le code, par exemple, si le nombre Pi y est √©crit et qu'il est constamment consult√©, ou si la variable a un lien vers un √©l√©ment HTML avec lequel vous devez travailler en permanence.  Disons, voici une constante dans laquelle un lien vers un certain bouton est √©crit: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> myButton = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#my-button'</span></span>);</code> </pre> <br>  Si le code d√©pend du lien vers l'√©l√©ment HTML, alors nous devons garantir l'immuabilit√© de ce lien.  Par cons√©quent, nous pouvons dire que le mot cl√© <code>const</code> suit non seulement le chemin des am√©liorations dans le domaine de la visibilit√©, mais √©galement le chemin de la limitation de la possibilit√© de modifier les valeurs des constantes d√©clar√©es √† l'aide de ce mot cl√©.  Rappelez-vous comment nous avons dit qu'une variable devrait avoir exactement la port√©e dont elle a besoin.  Cette id√©e peut √™tre poursuivie en proposant une recommandation, selon laquelle une variable ne devrait avoir que la capacit√© de changer, ce qui est n√©cessaire pour un bon travail avec elle, et rien de plus.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Voici un</a> bon mat√©riel sur le th√®me de l'immunit√©, dont une conclusion importante peut √™tre tir√©e, selon laquelle l'utilisation de variables immuables nous fait r√©fl√©chir soigneusement √† notre code, ce qui conduit √† une am√©lioration de la puret√© du code et √† une r√©duction du nombre de mauvaises surprises qui surviennent lors de son fonctionnement. <br><br>  Lorsque j'ai commenc√© √† utiliser les mots cl√©s <code>let</code> et <code>const</code> , j'ai essentiellement utilis√© <code>let</code> , le recours √† <code>const</code> uniquement lorsque l'√©criture d'une nouvelle valeur dans une variable d√©clar√©e avec <code>let</code> pourrait nuire au programme.  Mais, en apprenant davantage sur la programmation, j'ai chang√© d'avis √† ce sujet.  Maintenant, mon outil principal est <code>const</code> , et <code>let</code> moi de ne l'utiliser que lorsque la valeur de la variable doit √™tre r√©√©crite.  Cela me fait me demander s'il est vraiment n√©cessaire de changer la valeur d'une certaine variable.  Dans la plupart des cas, cela n'est pas n√©cessaire. <br><br><h2>  <font color="#3AC1EF">Avons-nous besoin du mot-cl√© var?</font> </h2><br>  Les mots cl√©s <code>let</code> et <code>const</code> contribuent √† une approche de programmation plus responsable.  Y a-t-il des situations o√π le mot-cl√© <code>var</code> est toujours n√©cessaire?  Oui, il y en a.  Il existe plusieurs situations dans lesquelles ce mot-cl√© nous est toujours utile.  R√©fl√©chissez bien √† ce dont nous allons parler avant de changer <code>var</code> en <code>let</code> ou <code>const</code> . <br><br><h3>  <font color="#3AC1EF">‚ñç Niveau de prise en charge des mots cl√©s Var par les navigateurs</font> </h3><br>  Les variables d√©clar√©es avec le mot-cl√© <code>var</code> ont une fonctionnalit√© tr√®s importante qui <code>let</code> et <code>const</code> manque.  √Ä savoir, nous parlons du fait qu'absolument tous les navigateurs prennent en charge ce mot-cl√©.  Bien que la prise en charge de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">let</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">const par les</a> navigateurs soit tr√®s bonne, il existe cependant un risque que votre programme se retrouve dans un navigateur qui ne les prend pas en charge.  Afin de comprendre les cons√©quences d'un tel incident, vous devez consid√©rer la fa√ßon dont les navigateurs g√®rent le code JavaScript non pris en charge, par exemple, comment ils r√©agissent au code CSS qu'ils ne comprennent pas. <br><br>  Si le navigateur ne prend pas en charge certaines fonctionnalit√©s CSS, cela entra√Æne essentiellement une distorsion de ce qui sera affich√© √† l'√©cran.  Un site dans un navigateur qui ne prend en charge aucun des styles utilis√©s par le site ne sera pas comme pr√©vu, mais il peut tr√®s probablement √™tre utilis√©.  Si vous utilisez, par exemple, <code>let</code> et que le navigateur ne prend pas en charge ce mot-cl√©, votre code JS ne fonctionnera tout simplement pas.  Ce ne sera pas - c'est tout.  √âtant donn√© que JavaScript est l'un des composants importants du Web moderne, cela peut devenir un probl√®me grave si vous avez besoin que vos programmes fonctionnent dans des navigateurs obsol√®tes. <br><br>  Lorsque les gens parlent de la prise en charge du navigateur pour les sites, ils demandent g√©n√©ralement dans quel navigateur le site fonctionnera de mani√®re optimale.  Si nous parlons d'un site dont la fonctionnalit√© est bas√©e sur l'utilisation de <code>let</code> et <code>const</code> , alors une question similaire devra √™tre pos√©e diff√©remment: "Dans quels navigateurs notre site ne fonctionnera-t-il pas?".  Et cela est beaucoup plus grave que de parler de l'utilisation de l' <code>display: flex</code> ou non.  Pour la plupart des sites Web, le nombre d'utilisateurs avec des navigateurs obsol√®tes ne sera pas assez important pour vous inqui√©ter.  Cependant, si nous parlons de quelque chose comme une boutique en ligne ou des sites dont les propri√©taires ach√®tent de la publicit√©, cela peut √™tre une consid√©ration tr√®s importante.  Avant d'utiliser de nouvelles opportunit√©s dans de tels projets, √©valuez le niveau de risque. <br><br>  Si vous devez prendre en charge des navigateurs tr√®s anciens, mais que vous souhaitez utiliser <code>let</code> , <code>const</code> et d'autres nouvelles fonctionnalit√©s ES6, l'une des solutions √† ce probl√®me consiste √† utiliser un transporteur JavaScript comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Babel</a> .  Les transpilers fournissent la traduction du nouveau code dans ce que les anciens navigateurs comprendront.  Babel,    ,     ,      ,     . <br><br>   ,   ?   ,        . ,      ,     ,     ,   .  ,   .  ,      ,      .     ES6-,     Babel,   Babel   ,      ,   .      ,      ,      .     .     ?   -  IE8     ? ,           ,  ,   ,  ,     . <br><br><h3> <font color="#3AC1EF">‚ñç var     </font> </h3><br>    ,     <code>var</code>  ,    .    .   : <br><br><pre> <code class="hljs actionscript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myVar = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myFunction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myVar = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  ,     myVar    ! }</span></span></code> </pre> <br> ,     <code>myVar</code>    ,      ,        .  ,         .     ,    , ,    ,      .     ,        .        <code>var</code> . <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myVar = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myVar = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(myVar); <span class="hljs-comment"><span class="hljs-comment">// 2 console.log(window.myVar); // 1 }</span></span></code> </pre> <br>          <code>var</code> ,       <code>window</code> .   <code>let</code>  <code>const</code>   .       ,     JS-   ,          (,  ,     )  ,     . <br><br>  ,         .       ,           .    ,  ,   ,    : <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myGlobalVars = {}; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myVar = <span class="hljs-number"><span class="hljs-number">1</span></span>; myGlobalVars.myVar = myVar; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> myVar = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(myVar); <span class="hljs-comment"><span class="hljs-comment">// 2 console.log(myGlobalVars.myVar); // 1 }</span></span></code> </pre> <br> ,     ,     ,      , .   ,  ,      <code>var</code>  , ,     ,   ,  ,   . <br><br><h2>  <font color="#3AC1EF">R√©sum√©</font> </h2><br> ,  ?   ?      : <br><br><ul><li>    IE10  -  ?              ‚Äî       <code>var</code> . </li><li>         JavaScript,    ,  ,      <code>var</code> ,  <code>const</code> .  -      (,      ,        ) ‚Äî  <code>let</code> . </li></ul><br>    <code>let</code>  <code>const</code> ,   ECMAScript 6,           ( )   -  -.       ,    ,       ,    . ,    - ,    ¬´¬ª  ¬´¬ª     , ,  <code>let</code>  <code>const</code> ,          . <br><br> <b> !</b>     ,       <code>const</code>       <code>var</code> ,   <code>let</code>    ,   ,   ,  ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr420359/">https://habr.com/ru/post/fr420359/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr420349/index.html">Liste de contr√¥le pour l'externalisation informatique: travailler sans risques</a></li>
<li><a href="../fr420351/index.html">Comment faire des recherches d'utilisateurs sur GitHub en utilisant Vue</a></li>
<li><a href="../fr420353/index.html">Nous rendons Shrimp encore plus utile: ajoutez le transcodage d'images √† d'autres formats</a></li>
<li><a href="../fr420355/index.html">Montre intelligente Pebble: comment devenir une raret√© du jour au lendemain</a></li>
<li><a href="../fr420357/index.html">Vuex: structurer de grands projets et travailler avec des modules</a></li>
<li><a href="../fr420361/index.html">Bogue lors de l'ex√©cution de TextBox.GetLineText dans .NET WPF</a></li>
<li><a href="../fr420363/index.html">Webinaires HPE en ao√ªt-octobre: ‚Äã‚Äãnouveaux sujets (+ SHD, pratique de l'IA, stockage cl√© en main de p√©taoctets)</a></li>
<li><a href="../fr420367/index.html">Apocalypse climatis√©e: sc√©nario de panne de r√©seau intelligent</a></li>
<li><a href="../fr420369/index.html">Extreme Extended Edge ou commutation IEEE 802.1BR</a></li>
<li><a href="../fr420371/index.html">Sur la question de la construction de v√©los dans le domaine du stockage du courrier √©lectrique</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>