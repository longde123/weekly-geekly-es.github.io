<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëéüèª üë®üèΩ‚Äçüé§ ü§Ωüèª Melhores t√©cnicas de teste em JavaScript e Node.js üê≤ ü§© üìö</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este √© um guia abrangente para fornecer confiabilidade em JavaScript e Node.js. Aqui s√£o coletadas dezenas dos melhores posts, livros e ferramentas. 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Melhores t√©cnicas de teste em JavaScript e Node.js</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/466879/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/t2/fe/u-/t2feu-mapmlc7txb2ith9futkie.jpeg"></div><br>  Este √© um guia abrangente para fornecer confiabilidade em JavaScript e Node.js.  Aqui s√£o coletadas dezenas dos melhores posts, livros e ferramentas. <br><br>  Primeiro, lide com m√©todos de teste geralmente aceitos e subjacentes a qualquer aplicativo.  E ent√£o voc√™ pode se aprofundar na √°rea de seu interesse: front-end e interfaces, back-end, IC ou todos os itens acima. <br><a name="habracut"></a><br><h1>  Conte√∫do </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Se√ß√£o 0. A Regra de Ouro.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um conselho que √© a for√ßa motriz por tr√°s de todos os outros conselhos (1 cap√≠tulo especial).</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Se√ß√£o 1. Anatomia do teste.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">No√ß√µes b√°sicas: cria√ß√£o de testes compreens√≠veis (12 cap√≠tulos).</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Se√ß√£o 2. O back-end.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Efetivamente escreva testes para o back-end e microsservi√ßos (8 cap√≠tulos).</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Se√ß√£o 3. Frontend, interface, E2E.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Estamos escrevendo testes para a interface da web, incluindo testes de componentes e E2E (11 cap√≠tulos).</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Se√ß√£o 4. Medi√ß√£o da efic√°cia do teste.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Observa√ß√£o do observador: teste de avalia√ß√£o da qualidade (4 cap√≠tulos).</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Se√ß√£o 5. Integra√ß√£o Cont√≠nua.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Recomenda√ß√µes de IC no mundo da JS (9 cap√≠tulos).</a> </li></ul><br><a name="1"></a><h1>  Se√ß√£o 0. Regra de Ouro </h1><br><h2>  0. Regra de Ouro: Atenha-se aos Testes Lean </h2><br>  <b>O que fazer</b>  O c√≥digo de teste √© diferente do que entra em opera√ß√£o.  Torne o mais simples poss√≠vel, curto, livre de abstra√ß√µes, √∫nico, maravilhoso no trabalho e econ√¥mico.  Outra pessoa deve olhar para o teste e entender imediatamente o que est√° fazendo. <br><br>  Nossas cabe√ßas est√£o ocupadas com o c√≥digo de produ√ß√£o, elas n√£o t√™m espa√ßo livre para complexidade adicional.  Se colocarmos uma nova parte do c√≥digo complexo em nossa mente fraca, isso atrasar√° o trabalho de toda a equipe na tarefa, pelo que estamos testando.  De fato, por causa disso, muitas equipes simplesmente evitam os testes. <br><br>  Testes - √© uma oportunidade de obter um assistente amig√°vel e sorridente, com quem √© muito bom trabalhar e que oferece um retorno enorme sobre pequenos investimentos.  Os cientistas acreditam que em nosso c√©rebro existem dois sistemas: um para a√ß√µes que n√£o exigem esfor√ßo, como dirigir em uma estrada vazia, e o segundo para opera√ß√µes complexas que exigem consci√™ncia, como resolver equa√ß√µes matem√°ticas.  Crie seus testes para o primeiro sistema, para que, ao examinar o c√≥digo, tenha uma sensa√ß√£o de simplicidade compar√°vel √† edi√ß√£o de um documento HTML, e n√£o com uma solu√ß√£o <code>2X(17 √ó 24)</code> . <br><br>  Isso pode ser alcan√ßado atrav√©s da sele√ß√£o cuidadosa de m√©todos, ferramentas e objetivos para teste, para que sejam econ√¥micos e ofere√ßam um ROI grande.  Teste apenas o necess√°rio, tente ser flex√≠vel.  √Äs vezes, vale a pena at√© mesmo descartar alguns testes e sacrificar a confiabilidade por uma quest√£o de velocidade e simplicidade. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f27/bc3/5f9/f27bc35f96e79037157cea807ac5be23.png"><br><br>  A maioria das recomenda√ß√µes abaixo √© derivada desse princ√≠pio. <br>  <b>Voc√™ est√° pronta?</b> <br><br><a name="2"></a><h1>  Se√ß√£o 1. Anatomia do teste </h1><br><h2>  1.1 O nome de cada teste deve consistir em tr√™s partes </h2><br>  <b>O que fazer</b>  O relat√≥rio de teste deve indicar se a revis√£o atual do aplicativo atende aos requisitos das pessoas que n√£o est√£o familiarizadas com o c√≥digo: testadores envolvidos na implanta√ß√£o dos engenheiros do DevOps, al√©m de voc√™ mesmo em dois anos.  Ser√° melhor que os testes relatem informa√ß√µes no idioma dos requisitos e seus nomes consistam em tr√™s partes: <br><br><ol><li>  O que exatamente est√° sendo testado?  Por exemplo, o m√©todo <code>ProductsService.addNewProduct</code> . </li><li>  Sob quais condi√ß√µes e cen√°rios?  Por exemplo, o pre√ßo n√£o √© passado para o m√©todo </li><li>  Qual √© o resultado esperado?  Por exemplo, um novo produto n√£o √© aprovado. </li></ol><br>  <b>Caso contr√°rio.</b>  A implanta√ß√£o falha, o teste chamado "Adicionar produto" falha.  Voc√™ entende o que exatamente funciona errado? <br><br>  <b>Nota</b>  Cada cap√≠tulo tem um c√≥digo de exemplo e, √†s vezes, uma ilustra√ß√£o.  Veja spoilers. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplos de c√≥digo</b> <div class="spoiler_text">  <b>Como fazer certo.</b>  O nome do teste consiste em tr√™s partes. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//1. unit under test describe('Products Service', function() { describe('Add new product', function() { //2. scenario and 3. expectation it('When no price is specified, then the product status is pending approval', ()=&gt; { const newProduct = new ProductService().add(...); expect(newProduct.status).to.equal('pendingApproval'); }); }); });</span></span></code> </pre> <br></div></div><br><h2>  1.2 Estruture os testes de acordo com o padr√£o AAA </h2><br>  <b>O que fazer</b>  Cada teste deve consistir em tr√™s se√ß√µes claramente separadas: organizar (prepara√ß√£o), ato (a√ß√£o) e afirmar (resultado).  A ades√£o a essa estrutura garante que o leitor do seu c√≥digo n√£o precise usar o processador cerebral para entender o plano de teste: <br><br>  Organizar: todo o c√≥digo que leva o sistema a um estado de acordo com o cen√°rio de teste.  Isso pode incluir a cria√ß√£o de uma inst√¢ncia do m√≥dulo no designer de teste, a adi√ß√£o de registros ao banco de dados, a cria√ß√£o de stubs em vez de objetos e qualquer outro c√≥digo que prepare o sistema para a execu√ß√£o do teste. <br><br>  Ato: execu√ß√£o de c√≥digo como parte de um teste.  Geralmente apenas uma linha. <br>  Afirmar: verifique se o valor obtido atende √†s expectativas.  Geralmente apenas uma linha. <br><br>  <b>Caso contr√°rio.</b>  Voc√™ n√£o passar√° apenas longas horas trabalhando com o c√≥digo principal, mas seu c√©rebro tamb√©m inchar√° do que deveria ser um trabalho simples - dos testes. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplos de c√≥digo</b> <div class="spoiler_text">  <b>Como fazer certo.</b>  Um teste estruturado de acordo com o padr√£o AAA. <br><br><pre> <code class="javascript hljs">describe.skip(<span class="hljs-string"><span class="hljs-string">'Customer classifier'</span></span>, () =&gt; { test(<span class="hljs-string"><span class="hljs-string">'When customer spent more than 500$, should be classified as premium'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//Arrange const customerToClassify = {spent:505, joined: new Date(), id:1} const DBStub = sinon.stub(dataAccess, "getCustomer") .reply({id:1, classification: 'regular'}); //Act const receivedClassification = customerClassifier.classifyCustomer(customerToClassify); //Assert expect(receivedClassification).toMatch('premium'); }); });</span></span></code> </pre><br>  <b>Um exemplo de antipadr√£o.</b>  Nenhuma separa√ß√£o, em uma √∫nica pe√ßa, √© mais dif√≠cil de interpretar. <br><br><pre> <code class="javascript hljs">test(<span class="hljs-string"><span class="hljs-string">'Should be classified as premium'</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> customerToClassify = {<span class="hljs-attr"><span class="hljs-attr">spent</span></span>:<span class="hljs-number"><span class="hljs-number">505</span></span>, <span class="hljs-attr"><span class="hljs-attr">joined</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>(), <span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DBStub = sinon.stub(dataAccess, <span class="hljs-string"><span class="hljs-string">"getCustomer"</span></span>) .reply({<span class="hljs-attr"><span class="hljs-attr">id</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">classification</span></span>: <span class="hljs-string"><span class="hljs-string">'regular'</span></span>}); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> receivedClassification = customerClassifier.classifyCustomer(customerToClassify); expect(receivedClassification).toMatch(<span class="hljs-string"><span class="hljs-string">'premium'</span></span>); });</code> </pre> <br></div></div><br><h2>  1.3 Descrever as expectativas no idioma do produto: estado no estilo do BDD </h2><br>  <b>O que fazer</b>  Testes de programa√ß√£o em estilo declarativo permitem que o usu√°rio entenda imediatamente a ess√™ncia sem gastar um √∫nico ciclo de processador cerebral.  Quando voc√™ escreve um c√≥digo imperativo empacotado em l√≥gica condicional, o leitor precisa fazer muito esfor√ßo.  Desse ponto de vista, √© necess√°rio descrever as expectativas em uma linguagem humana em um estilo declarativo de BDD usando expect / should e n√£o usando c√≥digo personalizado.  Se em Chai e Jest n√£o houver afirma√ß√£o necess√°ria, que √© frequentemente repetida, voc√™ poder√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">expandir o matcher Jest</a> ou escrever <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seu pr√≥prio plugin para o Chai</a> . <br><br>  <b>Caso contr√°rio.</b>  A equipe escrever√° menos testes e decorar√° testes irritantes <code>with .skip()</code> . <br><br><div class="spoiler">  <b class="spoiler_title">Exemplos de c√≥digo</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um exemplo usando o Mocha</a> . <br><br>  <b>Um exemplo de antipadr√£o.</b>  Para entender a ess√™ncia do teste, o usu√°rio √© for√ßado a passar por um c√≥digo imperativo bastante longo. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When asking for an admin, ensure only ordered admins in results"</span></span> , ()={ <span class="hljs-comment"><span class="hljs-comment">//assuming we've added here two admins "admin1", "admin2" and "user1" const allAdmins = getUsers({adminOnly:true}); const admin1Found, adming2Found = false; allAdmins.forEach(aSingleUser =&gt; { if(aSingleUser === "user1"){ assert.notEqual(aSingleUser, "user1", "A user was found and not admin"); } if(aSingleUser==="admin1"){ admin1Found = true; } if(aSingleUser==="admin2"){ admin2Found = true; } }); if(!admin1Found || !admin2Found ){ throw new Error("Not all admins were returned"); } });</span></span></code> </pre><br>  <b>Como fazer certo.</b>  A leitura deste teste declarativo √© simples. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When asking for an admin, ensure only ordered admins in results"</span></span> , ()={ <span class="hljs-comment"><span class="hljs-comment">//assuming we've added here two admins const allAdmins = getUsers({adminOnly:true}); expect(allAdmins).to.include.ordered.members(["admin1" , "admin2"]) .but.not.include.ordered.members(["user1"]); });</span></span></code> </pre> <br></div></div><br><h2>  1.4 Aderir ao teste de caixa preta: testar apenas m√©todos p√∫blicos </h2><br>  <b>O que fazer</b>  Testar o interior levar√° a uma sobrecarga enorme e render√° quase nada.  Se o seu c√≥digo ou API fornecer os resultados corretos, vale a pena gastar tr√™s horas testando COMO funciona internamente e, ent√£o, oferecer suporte a esses testes fr√°geis?  Quando voc√™ verifica o comportamento p√∫blico, verifica simultaneamente implicitamente a pr√≥pria implementa√ß√£o, seus testes falhar√£o apenas se houver um problema espec√≠fico (por exemplo, sa√≠da incorreta).  Essa abordagem tamb√©m √© chamada de teste comportamental.  Por outro lado, se voc√™ estiver testando os componentes internos (o m√©todo "caixa branca"), em vez de planejar a sa√≠da dos componentes, voc√™ se concentrar√° em pequenos detalhes e seus testes poder√£o ser interrompidos devido a pequenas altera√ß√µes no c√≥digo, mesmo se os resultados estiverem corretos, mas escolta ter√° muito mais recursos. <br><br>  <b>Caso contr√°rio.</b>  Seus testes se comportar√£o como um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">garoto gritando "Lobo!"</a>  : Relate em voz alta os falsos positivos (por exemplo, o teste falha devido a uma altera√ß√£o no nome de uma vari√°vel privada).  N√£o √© de surpreender que em breve as pessoas comecem a ignorar as notifica√ß√µes de IC e um dia perder√£o um bug real ... <br><br><div class="spoiler">  <b class="spoiler_title">Exemplos de c√≥digo</b> <div class="spoiler_text">  <b>Um exemplo de antipadr√£o.</b>  testando o interior sem uma boa raz√£o. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um exemplo usando o Mocha</a> . <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductService</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">//this method is only used internally //Change this name will make the tests fail calculateVAT(priceWithoutVAT){ return {finalPrice: priceWithoutVAT * 1.2}; //Change the result format or key name above will make the tests fail } //public method getPrice(productId){ const desiredProduct= DB.getProduct(productId); finalPrice = this.calculateVATAdd(desiredProduct.price).finalPrice; } } it("White-box test: When the internal methods get 0 vat, it return 0 response", async () =&gt; { //There's no requirement to allow users to calculate the VAT, only show the final price. Nevertheless we falsely insist here to test the class internals expect(new ProductService().calculateVATAdd(0).finalPrice).to.equal(0); });</span></span></code> </pre> <br></div></div><br><h2>  1.5 Escolha a implementa√ß√£o simulada correta: evite objetos falsos em favor de stubs e espi√µes </h2><br>  <b>O que fazer</b>  Implementa√ß√µes simuladas (duplas de teste) s√£o um mal necess√°rio, porque est√£o associadas √†s partes internas do aplicativo, e algumas s√£o de grande valor ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">atualize a mem√≥ria de implementa√ß√µes imitadas: objetos falsos (zombarias), stubs (stubs) e objetos espi√µes (espi√µes)</a> )  No entanto, nem todas as t√©cnicas s√£o equivalentes.  Espi√µes e tocos s√£o projetados para testar os requisitos, mas t√™m um efeito colateral inevit√°vel - eles tamb√©m afetam levemente o interior.  E objetos falsos s√£o projetados para testar o interior, o que leva a uma sobrecarga enorme, conforme descrito no cap√≠tulo 1.4. <br><br>  Antes de usar implementa√ß√µes simuladas, fa√ßa a si mesmo a pergunta mais simples: ‚ÄúEu uso isso para testar a funcionalidade que apareceu ou pode aparecer na documenta√ß√£o com requisitos?‚Äù  Caso contr√°rio, ele cheira a testes de caixa branca. <br><br>  Por exemplo, se voc√™ quiser descobrir se o aplicativo se comporta como deveria quando o servi√ßo de pagamento n√£o est√° dispon√≠vel, voc√™ pode fazer um esbo√ßo e retornar "Sem resposta" para verificar se o m√≥dulo em teste retorna o valor correto.  Portanto, voc√™ pode verificar o comportamento / resposta / sa√≠da do aplicativo em certos cen√°rios.  Voc√™ tamb√©m pode confirmar com a ajuda de um espi√£o que, quando o servi√ßo estava indispon√≠vel, a carta foi enviada, tamb√©m √© um teste comportamental, o que se reflete melhor na documenta√ß√£o com os requisitos ("Envie uma carta se as informa√ß√µes de pagamento n√£o puderem ser salvas").  Ao mesmo tempo, se voc√™ criar um servi√ßo de pagamento falso e garantir que ele seja chamado usando os tipos JS corretos, seu teste ser√° direcionado para internos que n√£o est√£o relacionados √† funcionalidade do aplicativo e que provavelmente mudam com frequ√™ncia. <br><br>  <b>Caso contr√°rio.</b>  Qualquer refatora√ß√£o de c√≥digo envolve encontrar e atualizar todos os objetos falsos no c√≥digo.  Os testes de um amigo assistente se tornam um fardo. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplos de c√≥digo</b> <div class="spoiler_text">  <b>Um exemplo de antipadr√£o.</b>  Objetos falsos s√£o para tripas. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Exemplo usando Sinon</a> . <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When a valid product is about to be deleted, ensure data access DAL was called once, with the right product and right config"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//Assume we already added a product const dataAccessMock = sinon.mock(DAL); //hmmm BAD: testing the internals is actually our main goal here, not just a side-effect dataAccessMock.expects("deleteProduct").once().withArgs(DBConfig, theProductWeJustAdded, true, false); new ProductService().deletePrice(theProductWeJustAdded); mock.verify(); });</span></span></code> </pre><br>  <b>Como fazer certo.</b>  Os espi√µes s√£o projetados para testar os requisitos, mas h√° um efeito colateral - eles inevitavelmente afetam o interior. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When a valid product is about to be deleted, ensure an email is sent"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//Assume we already added here a product const spy = sinon.spy(Emailer.prototype, "sendEmail"); new ProductService().deletePrice(theProductWeJustAdded); //hmmm OK: we deal with internals? Yes, but as a side effect of testing the requirements (sending an email) });</span></span></code> </pre> <br></div></div><br><h2>  1.6 N√£o use "foo", use entrada realista </h2><br>  <b>O que fazer</b>  Frequentemente, erros de produ√ß√£o ocorrem com dados de entrada muito espec√≠ficos e surpreendentes.  Quanto mais realistas os dados durante o teste, maior a probabilidade de detectar erros a tempo.  Para gerar dados pseudo-reais que simulam a variedade e o tipo de dados de produ√ß√£o, use bibliotecas especiais, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Faker</a> .  Essas bibliotecas podem gerar n√∫meros de telefone realistas, apelidos de usu√°rios, cart√µes banc√°rios, nomes de empresas e at√© o texto "lorem ipsum".  Voc√™ pode criar testes (al√©m dos testes de unidade, e n√£o em vez deles) que randomizam dados falsos para ajustar um m√≥dulo a um teste ou at√© importar dados reais de um ambiente de produ√ß√£o.  Quer ir ainda mais longe?  Leia o pr√≥ximo cap√≠tulo (sobre testes baseados em propriedades). <br><br>  <b>Caso contr√°rio.</b>  Seu teste de desenvolvimento ter√° √™xito usando entradas sint√©ticas como "Foo", e os dados de produ√ß√£o poder√£o falhar quando um hacker <code>@3e2ddsf . ##' 1 fdsfds . fds432 AAAA</code> linha complicada como <code>@3e2ddsf . ##' 1 fdsfds . fds432 AAAA</code> <code>@3e2ddsf . ##' 1 fdsfds . fds432 AAAA</code>  <code>@3e2ddsf . ##' 1 fdsfds . fds432 AAAA</code> . <br><br><div class="spoiler">  <b class="spoiler_title">Exemplos de c√≥digo</b> <div class="spoiler_text">  <b>Um exemplo de antipadr√£o.</b>  Um conjunto de testes que √© executado com sucesso devido ao uso de dados irrealistas. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Um exemplo usando o Jest</a> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addProduct = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, price</span></span></span><span class="hljs-function">) =&gt;</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> productNameRegexNoSpace = <span class="hljs-regexp"><span class="hljs-regexp">/^\S*$/</span></span>;<span class="hljs-comment"><span class="hljs-comment">//no white-space allowed if(!productNameRegexNoSpace.test(name)) return false;//this path never reached due to dull input //some logic here return true; }; test("Wrong: When adding new product with valid properties, get successful confirmation", async () =&gt; { //The string "Foo" which is used in all tests never triggers a false result const addProductResult = addProduct("Foo", 5); expect(addProductResult).to.be.true; //Positive-false: the operation succeeded because we never tried with long //product name including spaces });</span></span></code> </pre><br>  <b>Como fazer certo.</b>  Aleatorize a entrada realista. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"Better: When adding new valid product, get successful confirmation"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> addProductResult = addProduct(faker.commerce.productName(), faker.random.number()); <span class="hljs-comment"><span class="hljs-comment">//Generated random input: {'Sleek Cotton Computer', 85481} expect(addProductResult).to.be.true; //Test failed, the random input triggered some path we never planned for. //We discovered a bug early! });</span></span></code> </pre> <br></div></div><br><h2>  1.7 Use testes baseados em propriedades para validar v√°rias combina√ß√µes de entradas </h2><br>  <b>O que fazer</b>  Normalmente, para cada teste, selecionamos v√°rias amostras de dados de entrada.  Mesmo que o formato de entrada seja semelhante aos dados reais (consulte o cap√≠tulo ‚ÄúN√£o use‚Äú foo ‚Äù), abordamos apenas algumas combina√ß√µes de dados de entrada (m√©todo <code>('', true, 1)</code> , m√©todo <code>("string" , false" , 0)</code> Mas, em opera√ß√£o, uma API chamada com cinco par√¢metros pode ser chamada com milhares de combina√ß√µes diferentes, uma das quais pode levar a uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">falha no</a> processo ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">distor√ß√£o</a> ) .E se voc√™ pudesse escrever um teste que envie automaticamente 1000 combina√ß√µes de dados de entrada e fixa√ß√£o, em que combina√ß√µes o c√≥digo n√£o retorna a resposta correta? A mesma coisa que fazemos com m  todike teste com base nas propriedades: enviando todas as combina√ß√µes poss√≠veis de dados de entrada na unidade de teste que aumenta a chance de uma detec√ß√£o de erros, por exemplo, temos um m√©todo. <code>addNewProduct(id, name, isDiscount)</code> Apoiar sua biblioteca ir√° chamar esse m√©todo com um n√∫mero de combina√ß√µes. <code>(,  ,  )</code> , por exemplo, <code>(1, "iPhone", false)</code> , <code>(2, "Galaxy", true)</code> etc.) Voc√™ pode testar com base nas propriedades usando seu executor de teste favorito (Mocha, Jest etc.) e bibliotecas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">js-verifica</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">testcheck</a> (possui uma documenta√ß√£o muito melhor).  Voc√™ tamb√©m pode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">experimentar a biblioteca de verifica√ß√£o r√°pida</a> , que oferece recursos adicionais e √© acompanhada ativamente pelo autor. <br><br>  <b>Caso contr√°rio.</b>  Voc√™ est√° escolhendo, sem pensar, dados de entrada para o teste, que abrange apenas caminhos de execu√ß√£o de c√≥digo que funcionam bem.  Infelizmente, isso reduz a efic√°cia dos testes como forma de detectar erros. <br><br><div class="spoiler">  <b class="spoiler_title">Exemplos de c√≥digo</b> <div class="spoiler_text">  <b>Como fazer certo.</b>  Teste v√°rias combina√ß√µes com o mocha-testcheck. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'mocha-testcheck'</span></span>).install(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> {expect} = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'chai'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> faker = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'faker'</span></span>); describe(<span class="hljs-string"><span class="hljs-string">'Product service'</span></span>, () =&gt; { describe(<span class="hljs-string"><span class="hljs-string">'Adding new'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//this will run 100 times with different random properties check.it('Add new product with random yet valid properties, always successful', gen.int, gen.string, (id, name) =&gt; { expect(addNewProduct(id, name).status).to.equal('approved'); }); }) });</span></span></code> </pre> <br></div></div><br><h2>  1.8 Se necess√°rio, use apenas fotos curtas e em linha. </h2><br>  <b>O que fazer</b>  Quando voc√™ precisar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">testar com base em snapshots</a> , use apenas snapshots curtos sem todo o extra (por exemplo, em 3 a 7 linhas), incluindo-os como parte do teste ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">snapshot em linha</a> ) e n√£o como arquivos externos.  Seguir esta recomenda√ß√£o manter√° seus testes evidentes e mais confi√°veis. <br><br>  Por outro lado, os guias e ferramentas do ‚Äúinstant√¢neo cl√°ssico‚Äù nos levam a armazenar arquivos grandes (por exemplo, marca√ß√£o para componentes de renderiza√ß√£o ou resultados da API JSON) em m√≠dia externa e comparar os resultados com a vers√£o salva sempre que o teste √© executado.  Pode, digamos, associar implicitamente nosso teste a 1000 linhas contendo 3000 valores que o autor do teste nunca viu sobre o que ele n√£o esperava.  Por que isso √© ruim?  Porque existem 1000 raz√µes para o teste falhar.  Mesmo uma linha pode invalidar um instant√¢neo, e isso pode acontecer com frequ√™ncia.  Quanto  Ap√≥s cada espa√ßo, coment√°rio ou pequena altera√ß√£o no CSS ou HTML.  Al√©m disso, o nome do teste n√£o informa sobre a falha, porque verifica apenas se 1000 linhas n√£o foram alteradas e tamb√©m incentiva o autor do teste a levar, pelo tempo que desejar, um documento longo que ele n√£o p√¥de analisar e verificar.  Todos esses s√£o sintomas de um teste obscuro e apressado, que n√£o possui uma tarefa clara e est√° tentando realizar demais. <br><br>  √â importante notar que existem v√°rias situa√ß√µes em que √© aceit√°vel usar imagens longas e externas, por exemplo, ao confirmar o esquema, e n√£o os dados (extra√ß√£o de valores e foco nos campos) ou quando os documentos recebidos raramente mudam. <br><br>  <b>Caso contr√°rio.</b>  Os testes de interface do usu√°rio falham.  O c√≥digo parece bom, os pixels ideais s√£o exibidos na tela, ent√£o o que acontece?  Seu teste com instant√¢neos acabou de revelar a diferen√ßa entre o documento original e o rec√©m-recebido - um caractere de espa√ßo foi adicionado √† marca√ß√£o ... <br><br><div class="spoiler">  <b class="spoiler_title">Exemplos de c√≥digo</b> <div class="spoiler_text">  <b>Um exemplo de antipadr√£o.</b>  Associando um teste a algumas 2000 linhas de c√≥digo desconhecidas. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">'TestJavaScript.com is renderd correctly'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//Arrange //Act const receivedPage = renderer .create( &lt;DisplayPage page = "http://www.testjavascript.com" &gt; Test JavaScript &lt; /DisplayPage&gt;) .toJSON(); //Assert expect(receivedPage).toMatchSnapshot(); //We now implicitly maintain a 2000 lines long document //every additional line break or comment - will break this test });</span></span></code> </pre><br>  <b>Como fazer certo.</b>  As expectativas s√£o vis√≠veis e est√£o no centro das aten√ß√µes. <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">'When visiting TestJavaScript.com home page, a menu is displayed'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//Arrange //Act receivedPage tree = renderer .create( &lt;DisplayPage page = "http://www.testjavascript.com" &gt; Test JavaScript &lt; /DisplayPage&gt;) .toJSON(); //Assert const menu = receivedPage.content.menu; expect(menu).toMatchInlineSnapshot(` &lt;ul&gt; &lt;li&gt;Home&lt;/li&gt; &lt;li&gt; About &lt;/li&gt; &lt;li&gt; Contact &lt;/li&gt; &lt;/ul&gt; `); });</span></span></code> </pre> <br></div></div><br><h2>  1.9 Evite bancos de teste globais e dados iniciais, adicione dados a cada teste separadamente </h2><br>  <b>O que fazer</b>  De acordo com a regra de ouro (cap√≠tulo 0), cada teste deve adicionar e trabalhar dentro de seu pr√≥prio conjunto de linhas no banco de dados para evitar vincula√ß√µes, e era mais f√°cil para os usu√°rios entender o teste.  Na realidade, os testadores frequentemente violam essa regra, antes de executar testes preenchendo o banco de dados com dados iniciais (sementes) ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tamb√©m chamados de "banco de testes"</a> ) para aumentar a produtividade.       ,     (.  ¬´ ¬ª),              .                .    ,           ,     (, ). <br><br> <b>  .</b>   ,  ,     ,   ?  , , ,         . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um exemplo de antipadr√£o. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Os testes n√£o s√£o independentes e usam algum tipo de gancho global para obter dados globais do banco de dados.</font></font><br><br><pre> <code class="javascript hljs">before(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//adding sites and admins data to our DB. Where is the data? outside. At some external json or migration framework await DB.AddSeedDataFromJson('seed.json'); }); it("When updating site name, get successful confirmation", async () =&gt; { //I know that site name "portal" exists - I saw it in the seed files const siteToUpdate = await SiteService.getSiteByName("Portal"); const updateNameResult = await SiteService.changeName(siteToUpdate, "newName"); expect(updateNameResult).to.be(true); }); it("When querying by site name, get the right site", async () =&gt; { //I know that site name "portal" exists - I saw it in the seed files const siteToCheck = await SiteService.getSiteByName("Portal"); expect(siteToCheck.name).to.be.equal("Portal"); //Failure! The previous test change the name :[ });</span></span></code> </pre><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como fazer certo. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode permanecer dentro do teste, cada teste funciona apenas com seus pr√≥prios dados.</font></font><br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When updating site name, get successful confirmation"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//test is adding a fresh new records and acting on the records only const siteUnderTest = await SiteService.addSite({ name: "siteForUpdateTest" }); const updateNameResult = await SiteService.changeName(siteUnderTest, "newName"); expect(updateNameResult).to.be(true); });</span></span></code> </pre><br></div></div><br><h2> 1.10   ,    </h2><br> <b> .</b>  ,  -     ,     try-catch-finally  ,      .        ( ),        . <br><br>        Chai: <code>expect(method).to.throw</code> (  Jest: <code>expect(method).toThrow()</code> ).      ,    ,    . ,     ,        . <br><br> <b>  .</b>     (, CI-)   ,    . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um exemplo de antipadr√£o. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um longo caso de teste que tenta detectar um erro usando o try-catch.</font></font><br><br><pre> <code class="javascript hljs">/it(<span class="hljs-string"><span class="hljs-string">"When no product name, it throws error 400"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span>() =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> errorWeExceptFor = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> addNewProduct({<span class="hljs-attr"><span class="hljs-attr">name</span></span>:<span class="hljs-string"><span class="hljs-string">'nest'</span></span>});} <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (error) { expect(error.code).to.equal(<span class="hljs-string"><span class="hljs-string">'InvalidInput'</span></span>); errorWeExceptFor = error; } expect(errorWeExceptFor).not.to.be.null; <span class="hljs-comment"><span class="hljs-comment">//if this assertion fails, the tests results/reports will only show //that some value is null, there won't be a word about a missing Exception });</span></span></code> </pre><br> <b>  .</b>     ,   , ,   QA    . <br><br><pre> <code class="javascript hljs">it.only(<span class="hljs-string"><span class="hljs-string">"When no product name, it throws error 400"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span>() =&gt; { expect(addNewProduct)).to.eventually.throw(AppError).with.property(<span class="hljs-string"><span class="hljs-string">'code'</span></span>, <span class="hljs-string"><span class="hljs-string">"InvalidInput"</span></span>); });</code> </pre><br></div></div><br><h2> 1.11    </h2><br> <b> .</b>       : <br><br><ul><li>  smoke-, <br></li><li> IO-less, <br></li><li> ,   ,      , <br></li><li>   ,       pull request',   . <br></li></ul><br>   ,     , , #cold #api #sanity.            . ,     Mocha     : <code>mocha ‚Äî grep 'sanity'</code> . <br><br> <b>  .</b>   ,    ,   ,   ,  ,       ,      ,      . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>   '#cold-test'      (Cold=== ,     -    ,     ). <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//this test is fast (no DB) and we're tagging it correspondingly //now the user/CI can run it frequently describe('Order service', function() { describe('Add new order #cold-test #sanity', function() { it('Scenario - no currency was supplied. Expectation - Use the default currency #sanity', function() { //code logic here }); }); });</span></span></code> </pre> <br></div></div><br><h2> 1.12      </h2><br> <b> .</b>    ,    Node.js       .          ,    Node. <br><br>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> TDD</a> .     ,   ,       ,      .         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">--</a> ,       - .   ,      ,      .       ,    .       ,  ,     ,    ,     (,   ..). <br><br> <b>  .</b>   ,    . <br><br><a name="3"></a><h1>  2:   </h1><br><h2> Ô∏è2.1    :        </h2><br> <b> .</b>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>  10 ,                 .         .   ,      10  (, ,   ),   ,   ,      <i></i>  ?         ? <br><br>    :  2019-  , TDD        , , ,      . ,     ,    , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a> .  IoT-,         Kafka  RabbitMQ,     ,       -  .          ,  ,         ?      (, ,  ),      ,      - . <br><br>             (    )    ,        ,    (¬´   API,    ,  !¬ª (consumer-driven contracts)).     ,      : ,    ,  ,     . <br><br> :   TDD      - .    TDD ,     .  ,     . <br><br> <b>  .</b>       ROI,  Fuzz,   ,      10 . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b> Cindy Sridharan        'Testing Microservices ‚Äî the sane way' <br><br><img src="https://habrastorage.org/getpro/habr/post_images/375/7ab/6f0/3757ab6f02f3bad93c7235ad2ee0ad95.png"><br><br>  Um exemplo: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/-2zP494wdUY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br></div></div><br><h2> 2.2        </h2><br> <b> .</b>       ,     .        ,     .          ,   ,   ?   ‚Äî   .        :      TDD-,     . <br><br>      ¬´¬ª,    API,   ,     (,   ,     in-memory ),      , ,   .     ,  ,      ¬´   ¬ª,        . <br><br> <b>  .</b>         ,   ,       20 %. <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>     Express API   (     ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/625/d5d/7c1/625d5d7c195e640bacb1b4f50d8a0cdc.png"><br></div></div><br><h2> 2.3 ,       API </h2><br> <b> .</b>     ,        (   ).    - ,  ! ‚Äî    ,       , .  ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">-22</a> ¬ª   :          ,       ,      .           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   (consumer-driven contracts)   PACT</a> :       , ‚Ä¶ ! PACT           ‚Äî ¬´¬ª,          .   PACT-      ‚Äî    .  ,   API           CI,       . <br><br> <b>  .</b>  ‚Äî       . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/308/385/2ff/3083852ffe6faa62f826bc9c131027d7.png"><br></div></div><br><h2> 2.4     </h2><br> <b> .</b>     ,           Express-.   .   ,         ,        ,  JS- {req,res}.     ,      (,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sinon</a> )    {req,res},  ,     .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://www.npmjs.com/package/node-mocks-">node-mock-http</a>       {req,res}    . ,   ,    HTTP-,  res- (.  ). <br><br> <b>  .</b>   Express- ===        . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>    ,         Express-. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//the middleware we want to test const unitUnderTest = require('./middleware') const httpMocks = require('node-mocks-http'); //Jest syntax, equivalent to describe() &amp; it() in Mocha test('A request without authentication header, should return http status 403', () =&gt; { const request = httpMocks.createRequest({ method: 'GET', url: '/user/42', headers: { authentication: '' } }); const response = httpMocks.createResponse(); unitUnderTest(request, response); expect(response.statusCode).toBe(403); });</span></span></code> </pre><br></div></div><br><h2> 2.5         </h2><br> <b> .</b>                   .    CI-   ,         .                  (,   ),     (,   ),          .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sonarqube</a> (2600+ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> )  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Code Climate</a> (1500+ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ). :: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Keith Holliday</a> <br><br> <b>  .</b>            ,            . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>   CodeClimate,    : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c63/a0c/6d2/c63a0c6d207ab1fc67f540db7b2d6259.png"><br></div></div><br><h2> 2.6 ,      Node </h2><br> <b> .</b>   ,         .     (   )   . ,  - ,      ?      ?      ,  API    50 % ?      ,  Netflix   - ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Chaos Engineering</a> ).  :   ,              . ,     Netflix, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">chaos monkey</a> ,    ,  ,     ,     -   (   Kubernetes   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">kube-monkey</a> ,   ).         ,         . , ,   Node-     ,   ,    v8    1,7 ,    UX ,     ?   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">node-chaos</a> (-),        ,   Node. <br><br> <b>  .</b>      ,     production   . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b> Node-chaos     ,   Node.js,          . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/39d/46d/fc1/39d46dfc17d7bc4a6d50735681bd1025.png"><br></div></div><br><h2> 2.7       ,        </h2><br> <b> .</b>    ( 0),              ,   ,        .       ,        (seeds) ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   ¬´ ¬ª</a> )   .       ,     (.  ¬´ ¬ª),     ,         .                .    ,           ,     (, ). <br><br> <b>  .</b>   ,  ,     ,   ?  , , ,         . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b> .</b>       -        . <br><br><pre> <code class="javascript hljs">before(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-comment"><span class="hljs-comment">//adding sites and admins data to our DB. Where is the data? outside. At some external json or migration framework await DB.AddSeedDataFromJson('seed.json'); }); it("When updating site name, get successful confirmation", async () =&gt; { //I know that site name "portal" exists - I saw it in the seed files const siteToUpdate = await SiteService.getSiteByName("Portal"); const updateNameResult = await SiteService.changeName(siteToUpdate, "newName"); expect(updateNameResult).to.be(true); }); it("When querying by site name, get the right site", async () =&gt; { //I know that site name "portal" exists - I saw it in the seed files const siteToCheck = await SiteService.getSiteByName("Portal"); expect(siteToCheck.name).to.be.equal("Portal"); //Failure! The previous test change the name :[ });</span></span></code> </pre><br> <b>  .</b>     ,       . <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">"When updating site name, get successful confirmation"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-comment"><span class="hljs-comment">//test is adding a fresh new records and acting on the records only const siteUnderTest = await SiteService.addSite({ name: "siteForUpdateTest" }); const updateNameResult = await SiteService.changeName(siteUnderTest, "newName"); expect(updateNameResult).to.be(true); });</span></span></code> </pre><br></div></div><br><a name="4"></a><h1>  3:   </h1><br><h2>  3.1  UI   </h2><br> <b> .</b>      ,      ,   ,        .        ,         ,      (    HTML  CSS)    . ,                (, , , ),      ,         ,         . <br><br> <b>  .</b>          10 ,     500  (100  = 1 ) - -    . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>    . <br><br><pre> <code class="javascript hljs">test(<span class="hljs-string"><span class="hljs-string">'When users-list is flagged to show only VIP, should display only VIP members'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">// Arrange const allUsers = [ { id: 1, name: 'Yoni Goldberg', vip: false }, { id: 2, name: 'John Doe', vip: true } ]; // Act const { getAllByTestId } = render(&lt;UsersList users={allUsers} showOnlyVIP={true}/&gt;); // Assert - Extract the data from the UI first const allRenderedUsers = getAllByTestId('user').map(uiElement =&gt; uiElement.textContent); const allRealVIPUsers = allUsers.filter((user) =&gt; user.vip).map((user) =&gt; user.name); expect(allRenderedUsers).toEqual(allRealVIPUsers); //compare data with data, no UI here });</span></span></code> </pre><br> <b><b> .</b>     UI  .</b> <br><pre> <code class="javascript hljs">test(<span class="hljs-string"><span class="hljs-string">'When flagging to show only VIP, should display only VIP members'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">// Arrange const allUsers = [ {id: 1, name: 'Yoni Goldberg', vip: false }, {id: 2, name: 'John Doe', vip: true } ]; // Act const { getAllByTestId } = render(&lt;UsersList users={allUsers} showOnlyVIP={true}/&gt;); // Assert - Mix UI &amp; data in assertion expect(getAllByTestId('user')).toEqual('[&lt;li data-testid="user"&gt;John Doe&lt;/li&gt;]'); });</span></span></code> </pre><br></div></div><br><h2> 3.2  HTML-   ,     </h2><br> <b> .</b>  HTML-   ,     . ,  ,   CSS-.      ,      'test-id-submit-button'.              .   ,    ,           . <br><br> <b>  .</b>     ,    ,   .    ‚Äî , ,  Ajax .   .    ,      CSS  'thick-border'  'thin-border' <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>     ,    . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// the markup code (part of React component) &lt;b&gt; &lt;Badge pill className="fixed_badge" variant="dark"&gt; &lt;span data-testid="errorsLabel"&gt;{value}&lt;/span&gt; &lt;!-- note the attribute data-testid --&gt; &lt;/Badge&gt; &lt;/b&gt; // this example is using react-testing-library test('Whenever no data is passed to metric, show 0 as default', () =&gt; { // Arrange const metricValue = undefined; // Act const { getByTestId } = render(&lt;dashboardMetric value={undefined}/&gt;); expect(getByTestId('errorsLabel')).text()).toBe("0"); });</span></span></code> </pre><br> <b> .</b>   CSS-. <br><br><pre> <code class="javascript hljs">&lt;!-- the markup code (part <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> React component) --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"metric"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"d-flex-column"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">{value}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">span</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!-- what <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> the designer changes the classs? --&gt; <span class="hljs-comment"><span class="hljs-comment">// this exammple is using enzyme test('Whenever no data is passed, error metric shows zero', () =&gt; { // ... expect(wrapper.find("[className='d-flex-column']").text()).toBe("0"); });</span></span></code> </pre><br></div></div><br><h2> 3.3           </h2><br> <b> .</b>   ,   ,     .   ,    ,      .   ,     ‚Äî  -       ,       (.  <i>    ¬´ ¬ª</i> ).      (, )     ,     . <br><br>  ,  :        ,      .            (  )     .           ,       . <br><br> <b>  .</b>               ,           .         ? <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>        . <br><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Calendar</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> defaultProps = {<span class="hljs-attr"><span class="hljs-attr">showFilters</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>} render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div&gt; A filters panel </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">with</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a button to hide</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/show filters &lt;FiltersPanel showFilter={showFilters} title='Choose Filters'/</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &lt;</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/div&gt; ) } } /</span></span></span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/Examples use React &amp; Enzyme test('Realistic approach: When clicked to show filters, filters are displayed', () =&gt; { /</span></span></span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/ Arrange const wrapper = mount(&lt;Calendar showFilters={false} /</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt;</span></span></span><span class="hljs-function">) // </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Act</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">wrapper</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">find</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'button'</span></span></span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">simulate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'click'</span></span></span></span></span><span class="hljs-function">); // </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Assert</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">expect</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">wrapper.text(</span></span></span><span class="hljs-function">).</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">includes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'Choose Filter'</span></span></span></span></span><span class="hljs-function">)); // </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">This</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">is</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">how</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">the</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">user</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">will</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">approach</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">this</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">element</span></span></span><span class="hljs-function">: </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">by</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text</span></span></span><span class="hljs-function"> })</span></span></code> </pre><br> <b> .</b>      . <br><br><pre> <code class="javascript hljs">test(<span class="hljs-string"><span class="hljs-string">'Shallow/mocked approach: When clicked to show filters, filters are displayed'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">// Arrange const wrapper = shallow(&lt;Calendar showFilters={false} title='Choose Filter'/&gt;) // Act wrapper.find('filtersPanel').instance().showFilters(); // Tap into the internals, bypass the UI and invoke a method. White-box approach // Assert expect(wrapper.find('Filter').props()).toEqual({title: 'Choose Filter'}); // what if we change the prop name or don't pass anything relevant? })</span></span></code> </pre><br></div></div><br><h2> 3.4          .     </h2><br> <b> .</b>        (,    ).      (, <code>setTimeOut</code> )     ,   .       (, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cypress cy.request('url')</a> ),     API,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> wait(expect(element))  @testing-library/DOM</a> .       ,    API,      ,    .      ,   ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">hurry-up the clock</a> .  ‚Äî  ,   ,          (      ).        ,       ,    - npm-   , , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wait-for-expect</a> . <br><br> <b>  .</b>   ,    .          ,      .           . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b> E2E API       (Cypress). <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// using Cypress cy.get('#show-products').click()// navigate cy.wait('@products')// wait for route to appear // this line will get executed only when the route is ready</span></span></code> </pre><br> <b>  .  ,  DOM- (@testing-library/dom).</b> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// @testing-library/dom test('movie title appears', async () =&gt; { // element is initially not present... // wait for appearance await wait(() =&gt; { expect(getByText('the lion king')).toBeInTheDocument() }) // wait for appearance and return the element const movie = await waitForElement(() =&gt; getByText('the lion king')) })</span></span></code> </pre><br> <b> .</b>    . <br><br><pre> <code class="javascript hljs">test(<span class="hljs-string"><span class="hljs-string">'movie title appears'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; { <span class="hljs-comment"><span class="hljs-comment">// element is initially not present... // custom wait logic (caution: simplistic, no timeout) const interval = setInterval(() =&gt; { const found = getByText('the lion king'); if(found){ clearInterval(interval); expect(getByText('the lion king')).toBeInTheDocument(); } }, 100); // wait for appearance and return the element const movie = await waitForElement(() =&gt; getByText('the lion king')) })</span></span></code> </pre><br></div></div><br><h2> 3.5.      </h2><br> <b> .</b>   -   ,        .    ,    ,      .      :    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pingdom</a> , AWS CloudWatch  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gcp StackDriver</a>    ,  ,          SLA.          ,     ,    (, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">lighthouse</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pagespeed</a> ),   .    ‚Äî ,      :     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">       (TTI)</a> .  ,      ,   ,     ,  ,   DOM, SSL   .      ,   CI,     247     CDN. <br><br> <b>  .</b>   ,  ,       ,       ,       -    CDN. <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>  Lighthouse   . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/857/732/c2c/857732c2c3976c167757a9da12d81e05.png"><br></div></div><br><h2> 3.6         API  </h2><br> <b> .</b>     ( 2),    ,         ,      (  ).      API    (, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sinon</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Test doubles</a> ),    API.         .    API      ,           (         ).      API,     . ,     ,   API  .  ,    :     . <br><br> <b>  .</b>       ,   API   100 ,     20  . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>    API-. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// unit under test export default function ProductsList() { const [products, setProducts] = useState(false) const fetchProducts = async() =&gt; { const products = await axios.get('api/products') setProducts(products); } useEffect(() =&gt; { fetchProducts(); }, []); return products ? &lt;div&gt;{products}&lt;/div&gt; : &lt;div data-testid='no-products-message'&gt;No products&lt;/div&gt; } // test test('When no products exist, show the appropriate message', () =&gt; { // Arrange nock("api") .get(`/products`) .reply(404); // Act const {getByTestId} = render(&lt;ProductsList/&gt;); // Assert expect(getByTestId('no-products-message')).toBeTruthy(); });</span></span></code> </pre><br></div></div><br><h2> 3.7     ,    </h2><br> <b> .</b>  E2E (end-to-end,  )      UI   (.  3.6).       ,    ,  .     ,         ,    -     .  ,   ‚Äî        (,        ),      .   -   ,      ,  UI-  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cypress</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Pupeteer</a> .           ,    :    50 ,    ,       .           10  .   ,         ,    , ‚Äî    .     ,   . <br><br> <b>  .</b> UI        ,     ,      ( ,     UI)    . <br><br><h2> 3.8            </h2><br> <b> .</b>   ,       API   ,     ,           .          (before-all),    -        .   ,       :       .     ,      .  - API-         .      ,          .      (,    ),  ,      ,       .  ,    :      ,       API  (.  3.6). <br><br> <b>  .</b> ,   200  ,     100 ,         20    . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>      (before-all),       (before-each) (,   Cypress). <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   Cypress</a> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> authenticationToken; <span class="hljs-comment"><span class="hljs-comment">// happens before ALL tests run before(() =&gt; { cy.request('POST', 'http://localhost:3000/login', { username: Cypress.env('username'), password: Cypress.env('password'), }) .its('body') .then((responseFromLogin) =&gt; { authenticationToken = responseFromLogin.token; }) }) // happens before EACH test beforeEach(setUser =&gt; () { cy.visit('/home', { onBeforeLoad (win) { win.localStorage.setItem('token', JSON.stringify(authenticationToken)) }, }) })</span></span></code> </pre><br></div></div><br><h2> 3.9    smoke-,       </h2><br> <b> .</b>  production-          ,         ,    .    ,       ,       ,    ,     .   smoke-        .         production,  ,    ,       . , smoke-    ,      . <br><br> <b>  .</b>    ,   ,    production  .             /Payment. <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b> Smoke-    . <br><br><pre> <code class="javascript hljs">it(<span class="hljs-string"><span class="hljs-string">'When doing smoke testing over all page, should load them all successfully'</span></span>, () =&gt; { <span class="hljs-comment"><span class="hljs-comment">// exemplified using Cypress but can be implemented easily // using any E2E suite cy.visit('https://mysite.com/home'); cy.contains('Home'); cy.contains('https://mysite.com/Login'); cy.contains('Login'); cy.contains('https://mysite.com/About'); cy.contains('About'); })</span></span></code> </pre><br></div></div><br><h2> 3.10        </h2><br> <b> .</b>    ,     .    ¬´¬ª   ,        , ,   ,          . ,        (   )   ,     ,  -,  ,      ,     .      ¬´ ¬ª,         . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">   </a>   .       , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Cucumber   JavaScript</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">StoryBook</a>   UI-    ,           (,      ,        ,  ..)  ,    .      ,           ,   . <br><br> <b>  .</b>     ,        . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b>        cucumber-js. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// this is how one can describe tests using cucumber: plain language that allows anyone to understand and collaborate Feature: Twitter new tweet I want to tweet something in Twitter @focus Scenario: Tweeting from the home page Given I open Twitter home Given I click on "New tweet" button Given I type "Hello followers!" in the textbox Given I click on "Submit" button Then I see message "Tweet saved"</span></span></code> </pre><br> <b>  .</b>   Storybook  ,      . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/135/d4c/6c5/135d4c6c5dcf2758cfd90bc20dbad939.png"><br></div></div><br><h2> 3.11        </h2><br> <b> .</b>   ,                 .       ,     .    ,     .            ,     -    .         ,     .      , ,      ,       .   ,        -   .      UI        ¬´ ¬ª.     ,      (, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wraith</a> , PhantomCSS),        .   (, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Applitools</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Perci.io</a> )          , ,     ¬´ ¬ª (, ),      DOM/CSS,    . <br><br> <b>  .</b>   ,    (   )   ,       ? <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b> .</b>   :  ,   . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b00/b82/ad7/b00b82ad77c637eb6e00742f38780216.png"><br><br> <b>  </b> .  wraith      UI. <br><br><pre> <code class="javascript hljs">‚Äã# Add <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> many domains <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> necessary. Key will act <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> a label‚Äã domains: english: <span class="hljs-string"><span class="hljs-string">"http://www.mysite.com"</span></span>‚Äã ‚Äã# Type screen widths below, here are a couple <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> examples‚Äã screen_widths: - <span class="hljs-number"><span class="hljs-number">600</span></span>‚Äã - <span class="hljs-number"><span class="hljs-number">768</span></span>‚Äã - <span class="hljs-number"><span class="hljs-number">1024</span></span>‚Äã - <span class="hljs-number"><span class="hljs-number">1280</span></span>‚Äã ‚Äã# Type page URL paths below, here are a couple <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> examples‚Äã paths: about: path: <span class="hljs-regexp"><span class="hljs-regexp">/about selector: '.about'‚Äã subscribe: selector: '.subscribe'‚Äã path: /</span></span>subscribe</code> </pre><br></div></div><br><a name="5"></a><h1>  4:    </h1><br><h2> 4.1    (~80 %),      </h2><br> <b> .</b>   ‚Äî   ,   .    ,     .  ‚Äî     (,    ),  .    ? ,  10-30 %      .  100 %  ,                .      . ,   :         Airbus,     ;     ,   50 %   .     ,       ,       80 % ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Fowler: ¬´in the upper 80s or 90s¬ª</a> ), ,  ,    . <br><br> :      (CI),     ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Jest</a> )     ,    .       ,   .  ,       (      ) ‚Äî           .  ,  ‚Äî   ,      ,     .       ,    . <br><br> <b>  .</b>       .    ,     ,     .     . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>    .</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d94/db1/8bf/d94db18bf89f833800bf8234c40f095c.png"><br><br> <b>  </b> .       (  Jest). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b97/d73/d8b/b97d73d8b66e627b8fee40d9fa940d7f.png"><br></div></div><br><h2> 4.2    ,        </h2><br> <b> .</b>    ,       .   , , ,   ,     . ,   ,  -     ,   .     <code>PricingCalculator</code>    ,  ,     ,     10 000    ‚Ä¶     ,     ,  .  ,      .   80-     ,    .   :             ,    ,  ,      .      ,    - . <br><br> <b>  .</b>    ,     ,    ,    . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b> .</b>      ?   ,        QA       . :     , -   . ,   -    API  . </div></div><br><br><img src="https://habrastorage.org/getpro/habr/post_images/18e/7d7/2dc/18e7d72dcf5440fe964269002529b69c.png"><br><br><h2> 4.3        </h2><br> <b> .</b>     :       100 %,        .  Como assim?      ,  ,   ,    .       .    -          :    ,    ,   ,       . <br><br>        ,    .        JavaScript- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Stryker</a> : <br><br><ol><li>      ¬´ ¬ª. ,  <code>newOrder.price===0</code>   <code>newOrder.price!=0</code> .  ¬´¬ª  . <br></li><li>    ,     ,    :      ,  .    ,   ,   . <br></li></ol><br>   ,     ,       ,     . <br><br> <b>  .</b>   ,  85-     85 %   . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b> .</b>  100 %,  0 %. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addNewOrder</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newOrder</span></span></span><span class="hljs-function">) </span></span>{ logger.log(<span class="hljs-string"><span class="hljs-string">`Adding new order </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${newOrder}</span></span></span><span class="hljs-string">`</span></span>); DB.save(newOrder); Mailer.sendMail(newOrder.assignee, <span class="hljs-string"><span class="hljs-string">`A new order was places </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${newOrder}</span></span></span><span class="hljs-string">`</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {<span class="hljs-attr"><span class="hljs-attr">approved</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}; } it(<span class="hljs-string"><span class="hljs-string">"Test addNewOrder, don't use such test names"</span></span>, () =&gt; { addNewOrder({<span class="hljs-attr"><span class="hljs-attr">asignee</span></span>: <span class="hljs-string"><span class="hljs-string">"John@mailer.com"</span></span>,<span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-number"><span class="hljs-number">120</span></span>}); });<span class="hljs-comment"><span class="hljs-comment">//Triggers 100% code coverage, but it doesn't check anything</span></span></code> </pre><br> <b>  .</b> Stryker reports,   ,       (). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/880/047/5ed/8800475ed27d8c632aa2fb7a0372da68.png"><br></div></div><br><h2> 4.4      - </h2><br> <b> .</b>             ESLint.  , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eslint-plugin-mocha</a>  ,       (     <code>describe()</code> ),    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a> ,           .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eslint-plugin-jest</a>  ,       (    ). <br><br> <b>  .</b>   90-     ,    ,   ,          . ,          . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b> .</b>    ,  ,   . <br><br><pre> <code class="javascript hljs">describe(<span class="hljs-string"><span class="hljs-string">"Too short description"</span></span>, () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> userToken = userService.getDefaultToken() <span class="hljs-comment"><span class="hljs-comment">// *error:no-setup-in-describe, use hooks (sparingly) instead it("Some description", () =&gt; {});//* error: valid-test-description. Must include the word "Should" + at least 5 words }); it.skip("Test name", () =&gt; {// *error:no-skipped-tests, error:error:no-global-tests. Put tests only under describe or suite expect("somevalue"); // error:no-assert }); it("Test name", () =&gt; {*//error:no-identical-title. Assign unique titles to tests });</span></span></code> </pre><br></div></div><br><a name="6"></a><h1>  5: CI     </h1><br><h2> 5.1      ,      </h2><br> <b> .</b>  ‚Äî   .        ,           .  ,        (   !).     ,         .      ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ESLint standard</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> Airbnb</a> ),     . , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eslint-plugin-chai-expect</a>   ,    . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Eslint-plugin-promise</a>     (    ). <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Eslint-plugin-security</a>     ,     DOS-.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eslint-plugin-you-dont-need-lodash-underscore</a>  ,      ,      V8, , <code>Lodash._map(‚Ä¶)</code> . <br><br> <b>  .</b>    ,      ,     .  O que est√° havendo?      ,   ,     .      .          ,    ,      . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b> .</b>   ,        .  , ESLint   production-. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ec/386/b94/2ec386b943b21f0dee093e6c50e5ae75.png"><br></div></div><br><h1> 5.2            </h1><br> <b> .</b>   CI         , ,    ..?      ,        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a> .  Porque        : (1)  -&gt; (2)   -&gt; (3) .    ,          ,     . <br><br>             ,       ,   ,         ,   -   . <br><br>  CI- ( , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CircleCI local CLI</a> )     .   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">wallaby</a> ,      (  )    .    npm-  package.json,    ,     (, , , ).       (non-zero exit code)           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">concurrently</a> .             ‚Äî , <code>npm run quality</code> .             githook ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">husky </a> ). <br><br> <b>  .</b>           ,           . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b> Npm-,   ,  ,        . <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-string"><span class="hljs-string">"inspect:sanity-testing"</span></span>: <span class="hljs-string"><span class="hljs-string">"mocha **/**--test.js --grep \"sanity\""</span></span>, <span class="hljs-string"><span class="hljs-string">"inspect:lint"</span></span>: <span class="hljs-string"><span class="hljs-string">"eslint ."</span></span>, <span class="hljs-string"><span class="hljs-string">"inspect:vulnerabilities"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm audit"</span></span>, <span class="hljs-string"><span class="hljs-string">"inspect:license"</span></span>: <span class="hljs-string"><span class="hljs-string">"license-checker --failOn GPLv2"</span></span>, <span class="hljs-string"><span class="hljs-string">"inspect:complexity"</span></span>: <span class="hljs-string"><span class="hljs-string">"plato ."</span></span>, <span class="hljs-string"><span class="hljs-string">"inspect:all"</span></span>: <span class="hljs-string"><span class="hljs-string">"concurrently -c \"bgBlue.bold,bgMagenta.bold,yellow\" \"npm:inspect:quick-testing\" \"npm:inspect:lint\" \"npm:inspect:vulnerabilities\" \"npm:inspect:license\""</span></span> }, <span class="hljs-string"><span class="hljs-string">"husky"</span></span>: { <span class="hljs-string"><span class="hljs-string">"hooks"</span></span>: { <span class="hljs-string"><span class="hljs-string">"precommit"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run inspect:all"</span></span>, <span class="hljs-string"><span class="hljs-string">"prepush"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run inspect:all"</span></span> } }</code> </pre><br></div></div><br><h2> 5.3     production- </h2><br> <b> .</b>   ‚Äî     CI-.                .   ‚Äî <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Docker-compose</a>           .     (,  )     production-.   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AWS Local</a>      AWS-.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> </a>  ,    serverless  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AWS SAM</a>    Faas-. <br><br>   Kubernetes           CI-,        . ,   ¬´ Kubernetes¬ª     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Minikube</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MicroK8s</a> ,    ,     .       ¬´ Kubernetes¬ª:   CI- (, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Codefresh</a> )     Kubernetes-,     CI-   ;          . <br><br> <b>  .</b>                    . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b></b> : CI-,     Kubernetes- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">(Dynamic-environments Kubernetes</a> ) <br><br><pre> <code class="javascript hljs">deploy: stage: deploy image: registry.gitlab.com/gitlab-examples/kubernetes-deploy script: - ./configureCluster.sh $KUBE_CA_PEM_FILE $KUBE_URL $KUBE_TOKEN - kubectl create ns $NAMESPACE - kubectl create secret -n $NAMESPACE docker-registry gitlab-registry --docker-server=<span class="hljs-string"><span class="hljs-string">"$CI_REGISTRY"</span></span> --docker-username=<span class="hljs-string"><span class="hljs-string">"$CI_REGISTRY_USER"</span></span> --docker-password=<span class="hljs-string"><span class="hljs-string">"$CI_REGISTRY_PASSWORD"</span></span> --docker-email=<span class="hljs-string"><span class="hljs-string">"$GITLAB_USER_EMAIL"</span></span> - mkdir .generated - echo <span class="hljs-string"><span class="hljs-string">"$CI_BUILD_REF_NAME-$CI_BUILD_REF"</span></span> - sed -e <span class="hljs-string"><span class="hljs-string">"s/TAG/$CI_BUILD_REF_NAME-$CI_BUILD_REF/g"</span></span> templates/deals.yaml | tee <span class="hljs-string"><span class="hljs-string">".generated/deals.yaml"</span></span> - kubectl apply --namespace $NAMESPACE -f .generated/deals.yaml - kubectl apply --namespace $NAMESPACE -f templates/my-sock-shop.yaml environment: name: test-<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>-ci</code> </pre><br></div></div><br><h2> 5.4    </h2><br> <b> .</b>    ,      ,     .  ,     500  ,   ,     .  ,      CI- ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Jest</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AVA</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> Mocha</a> )      ,     .  CI-      (!),       .  ,          CLI   ,    ,        . <br><br> <b>  .</b>      ‚Äî         ,       . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b> Mocha parallel  Jest    Mocha    ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JavaScript Test-Runners Benchmark</a> ) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d87/ff4/d2e/d87ff4d2e1664df527d8a69d4403e8e9.png"><br></div></div><br><h2> 5.5             </h2><br> <b> .</b> ,           .         10 ?       CI-  npm-  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">license check</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">plagiarism check</a> (   ),        ,    ,   Stackoveflow     . <br><br> <b>  .</b>  ,       ,     . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>  .</b> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//install license-checker in your CI environment or also locally npm install -g license-checker //ask it to scan all licenses and fail with exit code other than 0 if it found unauthorized license. The CI system should catch this failure and stop the build license-checker --summary --failOn BSD</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/09b/b9b/2ad/09bb9b2ad230b17b0006bd137f480606.png"><br></div></div><br><h2> 5.6        </h2><br> <b> .</b>    ,  Express,   .           <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npm audit</a> ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">snyk</a> (     ).       CI   . <br><br> <b>  .</b>              .   . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>:</b>   NPM Audit <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a89/b1a/ed3/a89b1aed3ab2301c3f4d077e0a259c60.png"><br></div></div><br><h2> 5.7    </h2><br> <b> .</b>  package-lock.json  Yarn  npm    (     ):       .           <code>npm install</code>  <code>npm update</code> ,     .         ,    ‚Äî   .         ,    package.json     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ncu</a> . <br><br>       ,    .   : <br><br><ul><li> CI   ,   ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npm outdated</a>  npm-check-updates (ncu).     . <br></li><li>    ,      pull request'   . <br></li></ul><br>    :      ?       ,          (          ,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">  eslint-scope</a> ).       ¬´ ¬ª:        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">latest</a> ,    ,     (,   1.3.1,     ‚Äî 1.3.8). <br><br> <b>  .</b>     ,     . <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b></b> :  ,       ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ncu</a>     CI-. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c09/9c2/640/c099c264012f534b4bf8dc8ef83d2f4b.png"><br></div></div><br><h2> 5.8  CI-,    Node </h2><br> <b> .</b>      ,   Node     .         ,    Node. <br><br><ol><li>   .      ,    Jenkins     . <br></li><li>      Docker. <br></li><li>     ,  .     .   smoke-,       (, ,  )       . <br></li><li>  ,       ,    ,   ,   ,    . <br></li><li>        ,      . ,            -.           -  (       ). <br></li><li>        .        . <br></li><li>      ,    ,    . <br></li><li>            (, Docker-). <br></li><li>    ,      .      <code>node_modules</code> . <br></li></ol><br> <b>  .</b>    ,   . <br><br><h2> 5.9  :      CI-,    Node </h2><br> <b> .</b>    ,     ,     .                Node,   CI        . ,      MySQL,    Postgres.  CI-     ¬´¬ª,        MySQl, Postgres    Node.      ,  -   (,        ).   CI,    ,      . <br><br> <b>  .</b>              -   ? <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> <b>:</b>   Travis ( CI)             Node. <br><br><pre> <code class="javascript hljs">language: node_js node_js: - <span class="hljs-string"><span class="hljs-string">"7"</span></span> - <span class="hljs-string"><span class="hljs-string">"6"</span></span> - <span class="hljs-string"><span class="hljs-string">"5"</span></span> - <span class="hljs-string"><span class="hljs-string">"4"</span></span> install: - npm install script: - npm run test</code> </pre> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt466879/">https://habr.com/ru/post/pt466879/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt466863/index.html">Configurando Ass√≠ntota</a></li>
<li><a href="../pt466865/index.html">Esperando o primeiro de novembro: proibi√ß√£o ou legaliza√ß√£o de criptomoedas</a></li>
<li><a href="../pt466873/index.html">As 5 coisas mais novas do JavaScript n√£o entendem</a></li>
<li><a href="../pt466875/index.html">O triste destino dos especificadores de formato de fun√ß√£o printf para caracteres Unicode no Visual C ++</a></li>
<li><a href="../pt466877/index.html">O Malicious Sustes foi atualizado e agora est√° se espalhando pela vulnerabilidade do Exim (CVE-2019-10149)</a></li>
<li><a href="../pt466881/index.html">Ivan Shamatov: como escrever dinheiro</a></li>
<li><a href="../pt466887/index.html">Apenas divis√£o, ou como criar uma teoria matem√°tica e ganhar US $ 400.000 nela</a></li>
<li><a href="../pt466889/index.html">Status da zona de dom√≠nio do B√°ltico em agosto de 2019</a></li>
<li><a href="../pt466899/index.html">Por que largar tudo e aprender Swift e Kotlin agora</a></li>
<li><a href="../pt466903/index.html">Sempre apresente seu trabalho</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>