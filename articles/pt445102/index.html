<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏻‍🤝‍👨🏾 👨🏿‍🎨 🧕🏾 Animação em Flash no Unity3D do zero. Parte um, lírica 👩🏽‍🤝‍👨🏻 👨🏿‍🚒 🙄</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nesta série de artigos, falarei sobre como e por que decidimos criar nossa própria solução para importação de animação em Flash para o Unity, e sobre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Animação em Flash no Unity3D do zero. Parte um, lírica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445102/"><p>  Nesta série de artigos, falarei sobre como e por que decidimos criar nossa própria solução para importação de animação em Flash para o Unity, e sobre técnicas de otimização e funcionamento interno do plug-in.  Também tenho muitas outras coisas fascinantes para contar: elementos internos do formato SWF, recursos especiais da extensão do editor do Unity e assuntos gerais de animação.  Você encontrará tudo isso por dentro! </p><br><img src="https://habrastorage.org/webt/q3/4s/r_/q34sr_45c9c6d5lygnzixa7jhwy.png"><br><a name="habracut"></a><br><h2>  1. Introdução </h2><br><p> Quando você começa a trabalhar em qualquer projeto, sempre precisa enfrentar o problema de escolher as tecnologias para a maioria de seus componentes.  Um desses componentes é, obviamente, o sistema de animação.  Agora, existem algumas variáveis ​​das quais sua escolha dependerá.  A primeira pergunta que você deve se perguntar é com que ferramentas seus animadores estão acostumados (podem trabalhar) e quais são mais fáceis de encontrar.  Certamente, escolher um produto extremamente específico não faz muito sentido.  Nesse caso, se seus funcionários forem embora por algum motivo (ou forem atropelados por um ônibus), será quase impossível substituí-los.  Portanto, basicamente, seu projeto, no todo ou em parte, será interrompido por um período indeterminado, o que pode ser muito caro, especialmente para um produto comercial.  A segunda variável é mais técnica e está integrando as ferramentas ao seu mecanismo.  Existem soluções de terceiros e qual é a qualidade delas?  Você tem oportunidade e capacidade de criar sua própria solução?  Obviamente, a eficiência e conveniência de todas as opções acima também são cruciais.  E a terceira variável é a capacidade das ferramentas.  Portanto, se você realmente precisa de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cinemática inversa</a> , seria muito estranho da sua parte preferir animação não esquelética. </p><br><h2>  Tipos de animação 2D </h2><br><p>  Agora, vejamos as técnicas de animação mais populares nos jogos.  Considerarei apenas a animação em 2D, pois a animação em 3D é um tópico para uma conversa completamente diferente, com abordagens e ferramentas próprias.  Sinta-se à vontade para pular esta seção se você for bem versado nesse assunto (confie em mim, não haverá revelações ou reveladores).  Da mesma forma, se você estiver aqui apenas para ver os recursos da animação em Flash, você os encontrará no artigo abaixo. </p><br><h3>  Animação quadro a quadro </h3><br><p>  Iniciando nossa mini-revisão, o tipo de animação mais simples e mais antigo: animação quadro a quadro.  Nesta animação, cada quadro é representado por uma imagem individual e, mudando essas imagens muito rapidamente, temos a ilusão de movimento. </p><br><p>  <strong>Prós:</strong> </p><br><p>  Implementação elementar, geralmente disponível para qualquer mecanismo.  Qualquer complexidade e estilo de animação, você pode até inserir todos os quadros do filme (em teoria, é claro).  Qualquer ferramenta: quase tudo pode fornecer uma sequência de quadros que você pode, se necessário, montar em um atlas de textura. </p><br><p>  <strong>Contras:</strong> </p><br><p>  A principal desvantagem é, obviamente, a quantidade de memória que tudo isso requer.  Certamente, você pode usar todos os tipos de truques, como cortar quadros em blocos e, em seguida, reutilizar os blocos repetitivos, carregar em segundo plano os quadros do disco e remover os já mostrados, e assim por diante.  Mas lembre-se de que todos esses truques também têm suas próprias desvantagens.  Por exemplo, cortar blocos pode ser usado apenas em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pixel art</a> , o carregamento em segundo plano coloca uma pressão adicional no disco, ocupa muito espaço nesse disco, aumentando assim o tamanho do jogo em si, assim como a quantidade de dados necessários para um usuário iniciá-lo ou atualizá-lo. </p><br><p>  <strong>Bottom line:</strong> </p><br><p>  Funciona apenas para pequenos e poucos quadros de animação, perfeitos para pixel art e jogos de estilo retrô, como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NES</a> . </p><br><h3>  Animação de vídeo </h3><br><p>  Basicamente, a animação em vídeo é uma apoteose da loucura quadro a quadro.  E sim, ainda é aplicado e, às vezes, até com razão.  Implementamos algo parecido com isso nos jogos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Hidden Object</a> para animações volumosas e complexas e também para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cenas</a> com uma pitada de realismo.  Adicione a esses codecs como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">theora</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vp8</a> , e você poderá criar uma animação em vídeo bastante agradável (mesmo com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">composição alfa</a> ). </p><br><p>  O que é bom nesse tipo de animação é que você pode criar quase tudo, desde cenas gerenciadas pelo palco com atores reais até batalhas em 3D renderizadas.  O ruim é uma grande carga na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CPU</a> quando você está decodificando e, é claro, a qualidade da imagem.  O compromisso entre qualidade e eficiência pode ser alcançado apenas em um número limitado de casos específicos, como nos jogos de objetos ocultos mencionados acima. <br><br>  De qualquer forma, a animação em vídeo não é para todos e nem sempre é aplicável, quase nunca, para ser precisa.  Basicamente, esse tipo de animação funciona muito bem apenas nas cenas renderizadas.  Se você conseguir fazer uma boa implementação dessa animação, com certeza não será fácil.  Há muitas nuances e truques a serem lembrados, tanto em relação à qualidade da imagem de saída quanto à carga da CPU.  Devido a essa especificidade, existem muito poucas implementações prontas para uso, que não são boas o suficiente ou custam muito dinheiro (olá, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bink_Video</a> ), então a maioria das pessoas prefere escrever suas próprias. </p><br><h3>  Animação esquelética </h3><br><p>  Então, vamos avançar para os tipos mais populares e modernos de animação em 2D.  As animações esqueléticas estão conquistando cada vez mais corações e mentes dos desenvolvedores de 2D, aproximando-se de ser o padrão de animação de jogos.  O engraçado é que eles se tornaram tão populares em 2D relativamente recentemente, ao contrário do 3D, onde eles remontam quando nossos ancestrais estavam criando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Half-Life</a> .  A essência da animação esquelética, você ficaria surpreso, é um esqueleto criado por um animador.  Basicamente, um esqueleto é um conjunto de ossos conectados entre si e formando uma estrutura de árvore.  Os ossos são unidos em pedaços, representados por figuras individuais.  Essa construção começa a se mover quando os ossos são deslocados ou girados um em relação ao outro.  As mudanças e rotações dos ossos do esqueleto seguem a linha do tempo geral da animação. </p><br><p>  Os profissionais são óbvios: não precisamos armazenar todos os quadros de animação como uma imagem separada, apenas as peças (por exemplo, pernas e braços do personagem), que serão movidas pelos ossos.  Existem algumas implementações realmente interessantes desse tipo de animação com tempos de execução para diferentes plataformas e mecanismos, que são acessíveis ou até gratuitos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spine</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spriter</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Anima2D</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DragonBones</a> e outros.  Usando o esqueleto e seus recursos, você pode obter um nível incrível de suavidade da sua animação interpolando as posições dos ossos.  Você também pode alternar as transições entre as cenas e até misturar dois tipos diferentes de cenas: fotografar enquanto corre, fotografar enquanto rasteja e assim por diante.  Não vou listar todas as possibilidades de animação esquelética, então lembre-se de que existem muitas delas e elas são muito legais.  E prefiro fornecer um link para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o site da Spine,</a> onde você pode dar uma boa olhada em todos eles, com fotos e descrições </p><br><p>  Parece que conseguimos nosso soldado universal, mas não ainda.  Ele também tem suas próprias desvantagens.  E devo dizer imediatamente que, para muitos projetos e animações, essas desvantagens talvez nem existam.  Portanto, se a animação esquelética funcionar para você - isso é ótimo, use-a, porque ela parece realmente fina e moderna. </p><br><p>  Agora, voltemos aos inconvenientes.  A animação esquelética requer uma montagem adicional.  É sobre a criação de um esqueleto e vincular ossos e peças.  Se o seu objeto tiver apenas uma animação, não poucas, como, por exemplo, o personagem do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jogo de plataforma</a> , esta etapa não será útil para você.  Você também deve se lembrar que nem todas as cenas podem ser facilmente animadas com ossos.  De fato, existem muitos exemplos em que é melhor sem eles, tanto em termos de criação quanto de desempenho final do jogo.  Eu também apontaria a disponibilidade de especialistas no mercado como um fator importante.  É claro que, com a crescente popularidade da animação esquelética, seu número também está aumentando, mas ainda assim provavelmente não será fácil para você colocá-las em sua equipe.  A variedade de ferramentas também está fazendo sua parte.  Todo mundo tem suas próprias preferências, e ainda é preciso ser flexível e pronto para aprender, o que cria dificuldades adicionais no recrutamento e treinamento de seus funcionários. </p><br><h3>  Animação da linha do tempo </h3><br><p>  Guardei esse tipo de animação por último, não porque seja melhor que todos os outros, mas porque é representado principalmente pela animação em Flash, cujo interior falaremos na parte técnica deste artigo.  Agora, o Flash não é o único representante desse tipo de animação, mas certamente é o principal; portanto, a partir deste momento, vou descrever tudo em relação a ele.  As cenas de animação da linha do tempo consistem em peças animadas em diferentes camadas na linha do tempo.  Basicamente, é quase a mesma coisa que vimos na animação esquelética, mas sem esqueletos.  Usando os quadros-chave na linha do tempo, podemos mover, girar, substituir e adicionar novas peças nesses quadros e, é claro, interpolar transições, ampliações e rotações entre eles.  Isso significa que, nesse caso, movemos não os ossos aos quais as peças se ligam, mas as próprias peças.  Claro, isso nos priva de muitas possibilidades de animação esquelética, mas, como eu disse antes, nem todo mundo precisa delas.  Além disso, temos outras vantagens, como: </p><br><ul><li>  capacidade de adicionar e inserir novas peças no meio de uma cena; </li><li>  sem cordame, sem ossos que às vezes são apenas desnecessários; </li><li>  Adobe Flash (atualmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Adobe Animate</a> ), o mais antigo e testado ao longo dos anos, ferramenta de animação;  um grande número de animadores, de um jeito ou de outro, pode trabalhar com ele; </li><li>  capacidade de usar cenas antigas ao transferir seus projetos do Flash para o Unity, incluindo as cenas feitas em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gráficos vetoriais</a> , não apenas em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">raster</a> . </li></ul><br><p>  Você pode perguntar: o Flash não está morto?  Como jogador de navegador - sim, mas como ferramenta de animação, ele ainda está no jogo.  E vou lhe dizer mais, não há alternativas para o Flash agora ou previstas.  Existem desvantagens?  Claro.  E a principal desvantagem é que ... não é animação esquelética, ha-ha.  Portanto, estamos perdendo a capacidade de misturar nossas cenas, cinemática inversa e alguns outros recursos que você pode usar apenas quando trabalha com esqueletos.  Mas temos linhas de tempo uma dentro da outra e também máscaras de varredura e vetor!  E os animadores adoram máscaras!  Aqui, é preciso observar que o Spine também adicionou recentemente a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">opção de recorte</a> , mas até agora são apenas geométricos e severamente limitados em comparação com as máscaras do Flash. </p><br><h3>  Tipos de animação: Resumo </h3><br><p>  Obviamente, listei não todos os tipos de animação, mas apenas os principais.  Por exemplo, deixei para trás a chamada animação processual, quando objetos ou peças são direcionados apenas por código, mas dificilmente é possível comparar esse com outros, e não queria que o artigo fosse muito longo para ser lido.  Acho que agora é melhor olharmos mais de perto algo mais especializado em animação para completar a imagem. <br><br>  Então, para resumir.  Como sempre e em outros lugares, não há soldado universal aqui.  Você precisa escolher sua solução, dependendo do seu projeto, tarefas e pessoas.  Afinal, quem disse que você só precisa usar um tipo de animação por vez?  Existem muitos projetos em que podemos ver todos os tipos de animação usados ​​e todos estão felizes.  Animação em vídeo para cenas, esqueleto para personagens, linha do tempo para cenário, procedimento para vôo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sistemas de partículas</a> de emissores e quadro único para as próprias partículas.  Simplesmente tiramos o melhor de cada tipo. </p><br><h2>  Dilema e decisão de escrever nossa própria solução </h2><br><p>  De qualquer forma, por algumas razões objetivas, decidimos que para o nosso projeto precisamos de animação em Flash.  Então surgiu a pergunta sobre a integração deles no mecanismo.  Depois de experimentar várias opções de plug-in, optamos pelo que consideramos melhor por suas capacidades.  Embora fosse vivo e bem suportado, também possuía uma licença empresarial completamente inacessível, mas quem realmente pode fixar o preço de um bom produto?  Agora, intencionalmente, não vou lhe dar nomes, para não parecer propaganda ou antipublicidade. <br><br>  Passamos quase um ano de desenvolvimento com este plug-in, período em que ficou claro por que não podemos continuar a usá-lo.  Em particular, foi a qualidade de sua integração ao Unity.  Isso resultou em bugs bastante sérios que não facilmente, não rapidamente e sem luta foram derrotados pelos desenvolvedores.  O desempenho nos dispositivos de destino também foi terrível, e para nós ainda significa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o</a> nível do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">iPad 2</a> .  Isso aconteceu porque tentamos fazer uma integração com um mecanismo específico, ignorando suas especificidades e buracos.  Estávamos mais do que satisfeitos com a funcionalidade, mas os desenvolvedores se recusaram a abrir o código-fonte para nós, mesmo individualmente.  Então, foi assim que decidimos escrever nossa própria solução. <br><br>  Tive <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma</a> experiência bastante bem-sucedida ao escrever extensões para o Unity e um pouco de experiência na conversão de cenas de animação em Flash para meus próprios formatos.  Já faz algum tempo desde o último, para ser justo, mas algo que ainda me lembrava.  Ao mesmo tempo, tomei a decisão de escrever tudo isso como um projeto de estimação, para não depender do projeto principal ou da empresa em que trabalho.  E, convenhamos, é bom ter essa produção por conta própria.  De qualquer forma, armado com uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">especificação de formato SWF de</a> 250 páginas, eu entrei na batalha. </p><br><h2>  Opções de exportação </h2><br><p>  Para começar, vamos discutir as opções que temos para exportar animação do editor Flash.  Existem alguns deles, cada um com suas próprias vantagens e desvantagens.  Nós vamos revisar os principais. </p><br><h3>  Formato .XFL </h3><br><p>  No editor de animação Flash, você pode salvar o arquivo de origem em um formato .XFL não compactado, em vez do .FLA fechado definido por padrão.  Agora, é fácil trabalhar com esse formato, mas não possui documentação.  Basicamente, ele consiste em alguns subdiretórios e um monte de arquivos .XML que descrevem todos os estados dos clipes armazenados.  O formato da descrição também é muito simples e compreensível, como você pode ver no exemplo abaixo: </p><br><p>  <strong>static_clip.xml</strong> </p><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5c719f28-00000051"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lastModified</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1550950184"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Layer_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#00FFFF"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isSelected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9728"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMBitmapInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">selected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bitmap.png"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>Link de origem</i></a> <br><blockquote><p>  O que obtivemos aqui é este clipe, <code>static_clip</code> com uma camada, <code>Layer_1</code> e um quadro que armazena uma imagem raster chamada <code>bitmap.png</code> . </p></blockquote><br><p>  <strong>movie_clip.xml</strong> </p><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5c719f30-00000053"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lastModified</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1550950713"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Layer_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#00FFFF"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isSelected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">duration</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tweenType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"motion"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">motionTweenSnap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"22017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Matrix</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-50"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ty</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-50"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Point</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"28.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"27.5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tweenType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"motion"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">motionTweenSnap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"22017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">centerPoint3DX</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"128.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">centerPoint3DY</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"127.5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Matrix</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ty</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Point</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"28.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"27.5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>Link de origem</i></a> <blockquote><p>  Aqui você pode ver a descrição do clipe <code>movie_clip</code> , que consiste em dois quadros-chave com os índices 0 e 4, respectivamente.  Nesses quadros, nosso clipe <code>static_clip</code> é armazenado pelas coordenadas <code>(-50;-50)</code> e <code>(100;100)</code> .  Aqui há interpolação de movimento entre os quadros (uma animação processual, no nosso caso, é apenas uma mudança, sem redimensionamento e rotação).  Assim, a posição do clipe estático entre os quadros principais pode ser calculada usando a interpolação linear das coordenadas que extraímos desses quadros. </p></blockquote><p>  É claro que, no caso de uma animação real, tudo será um pouco mais complicado e volumoso, mas ainda assim tudo pode ser entendido, mesmo sem documentação.  E pode parecer para você que é isso.  E, na verdade, estou ciente de vários projetos e empresas que foram desta maneira e tiveram bastante sucesso, mas não sem algumas limitações e dificuldades.  E essas dificuldades são a verdadeira colisão do .XFL, que são: </p><br><ol><li>  As interpolações podem ser muito diferentes, tanto simples - com interpolação linear quanto mais complexas - com funções e gráficos personalizados dessa interpolação;  os gráficos vetoriais que se transformam em interpolações são executados apenas de acordo com suas próprias regras, compreensíveis para as pessoas da Macromedia e da Adobe; </li><li>  Os gráficos vetoriais, assim como todas as animações, exceto os gráficos de varredura, são descritos em um arquivo de texto., <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Por exemplo</a> .  Isso significa que você precisa escrever seu próprio rasterizador, o que, devido à natureza e complexidade do formato vetorial no Flash, não pode ser feito; </li><li>  As regras para reprodução de animação, incluindo as aninhadas, precisam ser criadas do zero.  Não existe documentação para isso, e respostas para perguntas como quando e qual quadro deve ser mostrado, quando interpolar e quando deixá-lo sem interpolação, você precisará descobrir por conta própria, ao mesmo tempo em que tenta abranja todos os casos possíveis durante as execuções de teste, o que, acredite, é um exercício não trivial para uma solução geral, não privada. </li></ol><br><p>  Essas não são todas as desvantagens dessa abordagem, mas acho que são suficientes para você entender que isso funcionaria para uma solução geral apenas com fortes limitações.  Há muito tempo, segui esse caminho trabalhando em um dos meus projetos.  Havia cenas do Flash com interpolações clássicas (sem regras de interpolação personalizadas e funções especiais de interpolação), gráficos de varredura apenas e outras oportunidades avançadas fornecidas pelo editor do Flash.  Eu vim com essa solução proprietária com bastante rapidez e eficiência, mas ainda exigia algumas limitações severas aos animadores, para que eles não usassem nada que você possa chamar de complicado.  A abordagem tem o direito de existir e existem algumas bibliotecas baseadas nela, com graus variados de shabbiness, mas, como eu disse, funciona com muitas limitações. </p><br><h3>  Scripts .JSFL </h3><br><p>  Outra opção quase funcional para obter informações sobre nossas animações, os scripts .JSFL permitem que você estenda seu editor Flash, interaja com seu ambiente, edite sua animação e, é claro, obtenha todas as informações necessárias sobre as linhas de tempo, camadas, clipes e quadros dentro .  Também é usado pelos animadores para automatizar vários processos, mas essa é realmente uma história completamente diferente.  Como um todo, a abordagem possui todas as desvantagens da anterior, então não vou me aprofundar nisso.  Deixe-me apenas dizer que ele permite exportar suas cenas de animação, por exemplo, quadro a quadro, mas sabemos que não é isso que um Jedi real faria (mas, é claro, isso pode ser feito em alguns projetos).  Voltaremos a esses scripts mais tarde, quando discutirmos a abordagem que escolhi: para rasterização de gráficos vetoriais e otimização das cenas exportadas. </p><br><h3>  Aplicativo AIR </h3><br><p>  Essa abordagem está realmente funcionando e pode ser usada como deveria.  Ainda assim, não escolhi, mas vou falar sobre essa opção, só para constar.  A essência dessa abordagem é que criamos um aplicativo AIR no próprio Flash ou, para puristas, por exemplo, no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Haxe</a> .  Este aplicativo extrai todas as informações das cenas de animação que você já compilou no formato SWF.  Na aplicação, reproduzimos a cena quadro a quadro, obtemos todas as informações sobre os quadros e as salvamos no formato mais adequado ao nosso tempo de execução.  Usando esse método, abordamos todos os problemas mencionados acima: </p><br><ul><li>  não precisamos rasterizar nossos gráficos vetoriais, pois isso será feito pelo tempo de execução do Flash.  A única coisa que resta a fazer é obter essas informações e salvar a saída raster de nossas partes vetoriais; </li><li>  não precisamos inventar regras de reprodução e lidar com interpolação de interpolação personalizada, o Flash player integrado ao aplicativo AIR sabe exatamente como isso deve ser feito e basicamente faz o trabalho para nós; </li></ul><br><p>  Como bônus, temos a oportunidade de usar scripts de quadro (todo o <code>play()</code> , <code>stop()</code> e outros <code>gotoAndPlay()</code> , alguns animadores realmente gostam deles).  Como desvantagem, perdemos a oportunidade de exportar as cenas em loop no próprio Flash.  Mas não é tão ruim assim, pois podemos repeti-los em nosso tempo de execução, e os animadores podem preparar tudo para isso. </p><br><p>  Note-se agora que tenho certeza de que tudo será mais ou menos difícil do que eu o descrevo, já que eu pessoalmente não fui lá, então não posso realmente contar todos os detalhes.  Congratulo-me com aqueles que seguiram este caminho para compartilhar sua experiência. Ficarei feliz em ler sobre seus sucessos e fracassos! </p><br><h3>  Seu próprio flash player </h3><br><p>  Esta é provavelmente a opção mais justa, óbvia e direta entre todas, mas também é a mais difícil.  Afinal, é isso que um Flash player real faz, aquele que a maioria de nós instalou no navegador favorito como complemento.  Agora, os representantes populares desse gênero são: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gameswf</a> e, nascidos do primeiro, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">scaleform</a> .  Ambos estão mortos hoje.  O que é fascinante sobre eles é que eles foram usados ​​principalmente para implementações de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GUI</a> em vários projetos, incluindo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AAA</a> .  Mas nosso interesse é nas partes internas, não nas aplicações de bibliotecas mortas. </p><br><p>  Qualquer Flash player decente possui pelo menos duas coisas importantes ocultas: </p><br><ul><li>  Analisador de formato SWF; </li><li>  rasterizador de gráficos vetoriais; </li><li>  máquina virtual para iniciar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ActionScript</a> do código; </li><li>  biblioteca padrão para um código personalizado; </li></ul><br><p>  Eu sei que você pensa.  Cada um desses pontos acima grita que, mesmo que algo como isso seja possível de implementar, você precisará mudar mais de uma equipe para esta tarefa e passar alguns anos no desenvolvimento da versão básica.  Mesmo a implementação de uma pequena parte apenas para reproduzir alguma coisa levará um longo tempo e você pode ter certeza de que as adições adicionais na forma de muitas partes não documentadas desse pipeline dobrarão esse longo período. </p><br><p>  Sim, a Internet está cheia de tentativas de implementar cada uma dessas partes, variando em graus de shabiness e buggedness.  Mas você não pode nem considerar esses desenvolvimentos como base para suas próprias coisas, pois você precisaria passar anos apenas para caçar bugs.  Além disso, você teria que adicionar todos os testes de unidade não escritos antes de perceber que nunca será capaz de implementar totalmente todas as pequenas coisas.  Aqueles caras que tentaram adicionar os recursos necessários ao gameswf entenderão do que estou falando.  Um Flash player justo também deve rasterizar os gráficos vetoriais sem antecedência, mas no tempo de execução, o que causará um impacto tão grande no desempenho que nem todo projeto pode passar.  A propósito, quero dizer olá aos sobreviventes que tentaram usar o scaleform em dispositivos móveis.  De qualquer forma, esta é a maneira mais solene e sem esperança, e definitivamente não é a nossa escolha. </p><br><h3>  Combinando as abordagens </h3><br><p>  Então, finalmente vamos à minha opção.  Tendo estudado todas as formas possíveis, criei essa combinação interessante.  É relativamente fácil de implementar, gerenciável por uma pessoa e, ao mesmo tempo, possui funcionalidade suficiente para atender a todas as necessidades de praticamente qualquer produção de animação em linha do tempo 2D. </p><br><p>  Primeiro, vamos usar a cena de animação compilada no SWF, para não inventar várias opções de reprodução e quase nunca adivinhar como o Flash player funciona por dentro, pois não podemos cobrir todos os casos, mas ainda estamos procurando a solução geral.  Além disso, o editor Flash se livra de todas as interpolações que usamos em nossa animação, fornecendo apenas as posições vazias das peças no SWF compilado. </p><br><p>  Segundo, proibimos o uso de scripts em animação.  Sim, esse requisito é certamente muito difícil e triste, mas não tenho uma equipe inteira de programadores para implementar uma máquina virtual decente e uma biblioteca padrão que eles teriam que escrever quase de olhos vendados.  Aqui, é claro, você pode ver uma desvantagem da minha abordagem em comparação com o método de aplicativo do AIR.  No segundo, poderíamos usar alguns scripts para reprodução interna de animação.  Ao mesmo tempo, isso não nos impede de criar boas cenas de animação.  Para transferir informações personalizadas da cena para o jogo, você pode usar os chamados <code>frame labels</code> , que você encontrará no código.  Além disso, você pode fixar eventos do usuário nos quadros específicos usando as funções de retorno de chamada do tempo de execução. </p><br><p>  Em seguida, nos livramos de escrever nosso próprio rasterizador de gráficos vetoriais, pois não podemos escrevê-lo para o caso geral e para cobrir todas as opções e possibilidades de vetor no Flash.  Em vez disso, rasterizaremos nossos gráficos antes da compilação (!) Usando um script JSFL.  Enquanto isso, usando esse mesmo script, otimizaremos nossos gráficos vetoriais mesclando clipes estáticos em uma imagem e ampliar ou reduzir as imagens rasterizadas resultantes em prol de nossa própria prioridade: qualidade e / ou desempenho.  Também aqui vale a pena considerar as opções de qualidade / resolução da arte para dispositivos com várias densidades de pixel da tela (por exemplo, arte em HD e SD). </p><br><h2>  Conclusão da parte lírica </h2><br><p>  Isso conclui a primeira parte do meu artigo.  No segundo, discutiremos detalhes técnicos da implementação, fragmentos de código, figuras (!), Otimização, truques e ajustes.  Em breve, não perca! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt445102/">https://habr.com/ru/post/pt445102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt445090/index.html">O YouTube permanecerá como o conhecemos?</a></li>
<li><a href="../pt445092/index.html">HATEOAS Deep Link Problem</a></li>
<li><a href="../pt445094/index.html">Acesso centralizado a assinaturas digitais e outras chaves de proteção eletrônica usando hardware USB sobre IP</a></li>
<li><a href="../pt445098/index.html">DynamicData: alterando coleções, padrão de design MVVM e extensões reativas</a></li>
<li><a href="../pt445100/index.html">Anycubic: Photon S, 4Max Pro e grande renomeação</a></li>
<li><a href="../pt445104/index.html">Uma breve história da marca de áudio Klipsch</a></li>
<li><a href="../pt445106/index.html">Mesa-redonda: Tecnologia aditiva como alternativa à fabricação tradicional</a></li>
<li><a href="../pt445108/index.html">Nem um Falcon - projetos ESA e ULA reutilizáveis ​​fundamentalmente diferentes</a></li>
<li><a href="../pt445110/index.html">Um computador com uma unidade terminal do tipo Fallout</a></li>
<li><a href="../pt445112/index.html">Desvendando um emaranhado de vulnerabilidades em sites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>