<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèª‚Äçü§ù‚Äçüë®üèæ üë®üèø‚Äçüé® üßïüèæ Anima√ß√£o em Flash no Unity3D do zero. Parte um, l√≠rica üë©üèΩ‚Äçü§ù‚Äçüë®üèª üë®üèø‚Äçüöí üôÑ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nesta s√©rie de artigos, falarei sobre como e por que decidimos criar nossa pr√≥pria solu√ß√£o para importa√ß√£o de anima√ß√£o em Flash para o Unity, e sobre ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Anima√ß√£o em Flash no Unity3D do zero. Parte um, l√≠rica</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445102/"><p>  Nesta s√©rie de artigos, falarei sobre como e por que decidimos criar nossa pr√≥pria solu√ß√£o para importa√ß√£o de anima√ß√£o em Flash para o Unity, e sobre t√©cnicas de otimiza√ß√£o e funcionamento interno do plug-in.  Tamb√©m tenho muitas outras coisas fascinantes para contar: elementos internos do formato SWF, recursos especiais da extens√£o do editor do Unity e assuntos gerais de anima√ß√£o.  Voc√™ encontrar√° tudo isso por dentro! </p><br><img src="https://habrastorage.org/webt/q3/4s/r_/q34sr_45c9c6d5lygnzixa7jhwy.png"><br><a name="habracut"></a><br><h2>  1. Introdu√ß√£o </h2><br><p> Quando voc√™ come√ßa a trabalhar em qualquer projeto, sempre precisa enfrentar o problema de escolher as tecnologias para a maioria de seus componentes.  Um desses componentes √©, obviamente, o sistema de anima√ß√£o.  Agora, existem algumas vari√°veis ‚Äã‚Äãdas quais sua escolha depender√°.  A primeira pergunta que voc√™ deve se perguntar √© com que ferramentas seus animadores est√£o acostumados (podem trabalhar) e quais s√£o mais f√°ceis de encontrar.  Certamente, escolher um produto extremamente espec√≠fico n√£o faz muito sentido.  Nesse caso, se seus funcion√°rios forem embora por algum motivo (ou forem atropelados por um √¥nibus), ser√° quase imposs√≠vel substitu√≠-los.  Portanto, basicamente, seu projeto, no todo ou em parte, ser√° interrompido por um per√≠odo indeterminado, o que pode ser muito caro, especialmente para um produto comercial.  A segunda vari√°vel √© mais t√©cnica e est√° integrando as ferramentas ao seu mecanismo.  Existem solu√ß√µes de terceiros e qual √© a qualidade delas?  Voc√™ tem oportunidade e capacidade de criar sua pr√≥pria solu√ß√£o?  Obviamente, a efici√™ncia e conveni√™ncia de todas as op√ß√µes acima tamb√©m s√£o cruciais.  E a terceira vari√°vel √© a capacidade das ferramentas.  Portanto, se voc√™ realmente precisa de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cinem√°tica inversa</a> , seria muito estranho da sua parte preferir anima√ß√£o n√£o esquel√©tica. </p><br><h2>  Tipos de anima√ß√£o 2D </h2><br><p>  Agora, vejamos as t√©cnicas de anima√ß√£o mais populares nos jogos.  Considerarei apenas a anima√ß√£o em 2D, pois a anima√ß√£o em 3D √© um t√≥pico para uma conversa completamente diferente, com abordagens e ferramentas pr√≥prias.  Sinta-se √† vontade para pular esta se√ß√£o se voc√™ for bem versado nesse assunto (confie em mim, n√£o haver√° revela√ß√µes ou reveladores).  Da mesma forma, se voc√™ estiver aqui apenas para ver os recursos da anima√ß√£o em Flash, voc√™ os encontrar√° no artigo abaixo. </p><br><h3>  Anima√ß√£o quadro a quadro </h3><br><p>  Iniciando nossa mini-revis√£o, o tipo de anima√ß√£o mais simples e mais antigo: anima√ß√£o quadro a quadro.  Nesta anima√ß√£o, cada quadro √© representado por uma imagem individual e, mudando essas imagens muito rapidamente, temos a ilus√£o de movimento. </p><br><p>  <strong>Pr√≥s:</strong> </p><br><p>  Implementa√ß√£o elementar, geralmente dispon√≠vel para qualquer mecanismo.  Qualquer complexidade e estilo de anima√ß√£o, voc√™ pode at√© inserir todos os quadros do filme (em teoria, √© claro).  Qualquer ferramenta: quase tudo pode fornecer uma sequ√™ncia de quadros que voc√™ pode, se necess√°rio, montar em um atlas de textura. </p><br><p>  <strong>Contras:</strong> </p><br><p>  A principal desvantagem √©, obviamente, a quantidade de mem√≥ria que tudo isso requer.  Certamente, voc√™ pode usar todos os tipos de truques, como cortar quadros em blocos e, em seguida, reutilizar os blocos repetitivos, carregar em segundo plano os quadros do disco e remover os j√° mostrados, e assim por diante.  Mas lembre-se de que todos esses truques tamb√©m t√™m suas pr√≥prias desvantagens.  Por exemplo, cortar blocos pode ser usado apenas em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pixel art</a> , o carregamento em segundo plano coloca uma press√£o adicional no disco, ocupa muito espa√ßo nesse disco, aumentando assim o tamanho do jogo em si, assim como a quantidade de dados necess√°rios para um usu√°rio inici√°-lo ou atualiz√°-lo. </p><br><p>  <strong>Bottom line:</strong> </p><br><p>  Funciona apenas para pequenos e poucos quadros de anima√ß√£o, perfeitos para pixel art e jogos de estilo retr√¥, como o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NES</a> . </p><br><h3>  Anima√ß√£o de v√≠deo </h3><br><p>  Basicamente, a anima√ß√£o em v√≠deo √© uma apoteose da loucura quadro a quadro.  E sim, ainda √© aplicado e, √†s vezes, at√© com raz√£o.  Implementamos algo parecido com isso nos jogos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Hidden Object</a> para anima√ß√µes volumosas e complexas e tamb√©m para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">cenas</a> com uma pitada de realismo.  Adicione a esses codecs como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">theora</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">vp8</a> , e voc√™ poder√° criar uma anima√ß√£o em v√≠deo bastante agrad√°vel (mesmo com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">composi√ß√£o alfa</a> ). </p><br><p>  O que √© bom nesse tipo de anima√ß√£o √© que voc√™ pode criar quase tudo, desde cenas gerenciadas pelo palco com atores reais at√© batalhas em 3D renderizadas.  O ruim √© uma grande carga na <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">CPU</a> quando voc√™ est√° decodificando e, √© claro, a qualidade da imagem.  O compromisso entre qualidade e efici√™ncia pode ser alcan√ßado apenas em um n√∫mero limitado de casos espec√≠ficos, como nos jogos de objetos ocultos mencionados acima. <br><br>  De qualquer forma, a anima√ß√£o em v√≠deo n√£o √© para todos e nem sempre √© aplic√°vel, quase nunca, para ser precisa.  Basicamente, esse tipo de anima√ß√£o funciona muito bem apenas nas cenas renderizadas.  Se voc√™ conseguir fazer uma boa implementa√ß√£o dessa anima√ß√£o, com certeza n√£o ser√° f√°cil.  H√° muitas nuances e truques a serem lembrados, tanto em rela√ß√£o √† qualidade da imagem de sa√≠da quanto √† carga da CPU.  Devido a essa especificidade, existem muito poucas implementa√ß√µes prontas para uso, que n√£o s√£o boas o suficiente ou custam muito dinheiro (ol√°, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Bink_Video</a> ), ent√£o a maioria das pessoas prefere escrever suas pr√≥prias. </p><br><h3>  Anima√ß√£o esquel√©tica </h3><br><p>  Ent√£o, vamos avan√ßar para os tipos mais populares e modernos de anima√ß√£o em 2D.  As anima√ß√µes esquel√©ticas est√£o conquistando cada vez mais cora√ß√µes e mentes dos desenvolvedores de 2D, aproximando-se de ser o padr√£o de anima√ß√£o de jogos.  O engra√ßado √© que eles se tornaram t√£o populares em 2D relativamente recentemente, ao contr√°rio do 3D, onde eles remontam quando nossos ancestrais estavam criando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Half-Life</a> .  A ess√™ncia da anima√ß√£o esquel√©tica, voc√™ ficaria surpreso, √© um esqueleto criado por um animador.  Basicamente, um esqueleto √© um conjunto de ossos conectados entre si e formando uma estrutura de √°rvore.  Os ossos s√£o unidos em peda√ßos, representados por figuras individuais.  Essa constru√ß√£o come√ßa a se mover quando os ossos s√£o deslocados ou girados um em rela√ß√£o ao outro.  As mudan√ßas e rota√ß√µes dos ossos do esqueleto seguem a linha do tempo geral da anima√ß√£o. </p><br><p>  Os profissionais s√£o √≥bvios: n√£o precisamos armazenar todos os quadros de anima√ß√£o como uma imagem separada, apenas as pe√ßas (por exemplo, pernas e bra√ßos do personagem), que ser√£o movidas pelos ossos.  Existem algumas implementa√ß√µes realmente interessantes desse tipo de anima√ß√£o com tempos de execu√ß√£o para diferentes plataformas e mecanismos, que s√£o acess√≠veis ou at√© gratuitos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spine</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Spriter</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Anima2D</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DragonBones</a> e outros.  Usando o esqueleto e seus recursos, voc√™ pode obter um n√≠vel incr√≠vel de suavidade da sua anima√ß√£o interpolando as posi√ß√µes dos ossos.  Voc√™ tamb√©m pode alternar as transi√ß√µes entre as cenas e at√© misturar dois tipos diferentes de cenas: fotografar enquanto corre, fotografar enquanto rasteja e assim por diante.  N√£o vou listar todas as possibilidades de anima√ß√£o esquel√©tica, ent√£o lembre-se de que existem muitas delas e elas s√£o muito legais.  E prefiro fornecer um link para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o site da Spine,</a> onde voc√™ pode dar uma boa olhada em todos eles, com fotos e descri√ß√µes </p><br><p>  Parece que conseguimos nosso soldado universal, mas n√£o ainda.  Ele tamb√©m tem suas pr√≥prias desvantagens.  E devo dizer imediatamente que, para muitos projetos e anima√ß√µes, essas desvantagens talvez nem existam.  Portanto, se a anima√ß√£o esquel√©tica funcionar para voc√™ - isso √© √≥timo, use-a, porque ela parece realmente fina e moderna. </p><br><p>  Agora, voltemos aos inconvenientes.  A anima√ß√£o esquel√©tica requer uma montagem adicional.  √â sobre a cria√ß√£o de um esqueleto e vincular ossos e pe√ßas.  Se o seu objeto tiver apenas uma anima√ß√£o, n√£o poucas, como, por exemplo, o personagem do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jogo de plataforma</a> , esta etapa n√£o ser√° √∫til para voc√™.  Voc√™ tamb√©m deve se lembrar que nem todas as cenas podem ser facilmente animadas com ossos.  De fato, existem muitos exemplos em que √© melhor sem eles, tanto em termos de cria√ß√£o quanto de desempenho final do jogo.  Eu tamb√©m apontaria a disponibilidade de especialistas no mercado como um fator importante.  √â claro que, com a crescente popularidade da anima√ß√£o esquel√©tica, seu n√∫mero tamb√©m est√° aumentando, mas ainda assim provavelmente n√£o ser√° f√°cil para voc√™ coloc√°-las em sua equipe.  A variedade de ferramentas tamb√©m est√° fazendo sua parte.  Todo mundo tem suas pr√≥prias prefer√™ncias, e ainda √© preciso ser flex√≠vel e pronto para aprender, o que cria dificuldades adicionais no recrutamento e treinamento de seus funcion√°rios. </p><br><h3>  Anima√ß√£o da linha do tempo </h3><br><p>  Guardei esse tipo de anima√ß√£o por √∫ltimo, n√£o porque seja melhor que todos os outros, mas porque √© representado principalmente pela anima√ß√£o em Flash, cujo interior falaremos na parte t√©cnica deste artigo.  Agora, o Flash n√£o √© o √∫nico representante desse tipo de anima√ß√£o, mas certamente √© o principal; portanto, a partir deste momento, vou descrever tudo em rela√ß√£o a ele.  As cenas de anima√ß√£o da linha do tempo consistem em pe√ßas animadas em diferentes camadas na linha do tempo.  Basicamente, √© quase a mesma coisa que vimos na anima√ß√£o esquel√©tica, mas sem esqueletos.  Usando os quadros-chave na linha do tempo, podemos mover, girar, substituir e adicionar novas pe√ßas nesses quadros e, √© claro, interpolar transi√ß√µes, amplia√ß√µes e rota√ß√µes entre eles.  Isso significa que, nesse caso, movemos n√£o os ossos aos quais as pe√ßas se ligam, mas as pr√≥prias pe√ßas.  Claro, isso nos priva de muitas possibilidades de anima√ß√£o esquel√©tica, mas, como eu disse antes, nem todo mundo precisa delas.  Al√©m disso, temos outras vantagens, como: </p><br><ul><li>  capacidade de adicionar e inserir novas pe√ßas no meio de uma cena; </li><li>  sem cordame, sem ossos que √†s vezes s√£o apenas desnecess√°rios; </li><li>  Adobe Flash (atualmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Adobe Animate</a> ), o mais antigo e testado ao longo dos anos, ferramenta de anima√ß√£o;  um grande n√∫mero de animadores, de um jeito ou de outro, pode trabalhar com ele; </li><li>  capacidade de usar cenas antigas ao transferir seus projetos do Flash para o Unity, incluindo as cenas feitas em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gr√°ficos vetoriais</a> , n√£o apenas em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">raster</a> . </li></ul><br><p>  Voc√™ pode perguntar: o Flash n√£o est√° morto?  Como jogador de navegador - sim, mas como ferramenta de anima√ß√£o, ele ainda est√° no jogo.  E vou lhe dizer mais, n√£o h√° alternativas para o Flash agora ou previstas.  Existem desvantagens?  Claro.  E a principal desvantagem √© que ... n√£o √© anima√ß√£o esquel√©tica, ha-ha.  Portanto, estamos perdendo a capacidade de misturar nossas cenas, cinem√°tica inversa e alguns outros recursos que voc√™ pode usar apenas quando trabalha com esqueletos.  Mas temos linhas de tempo uma dentro da outra e tamb√©m m√°scaras de varredura e vetor!  E os animadores adoram m√°scaras!  Aqui, √© preciso observar que o Spine tamb√©m adicionou recentemente a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">op√ß√£o de recorte</a> , mas at√© agora s√£o apenas geom√©tricos e severamente limitados em compara√ß√£o com as m√°scaras do Flash. </p><br><h3>  Tipos de anima√ß√£o: Resumo </h3><br><p>  Obviamente, listei n√£o todos os tipos de anima√ß√£o, mas apenas os principais.  Por exemplo, deixei para tr√°s a chamada anima√ß√£o processual, quando objetos ou pe√ßas s√£o direcionados apenas por c√≥digo, mas dificilmente √© poss√≠vel comparar esse com outros, e n√£o queria que o artigo fosse muito longo para ser lido.  Acho que agora √© melhor olharmos mais de perto algo mais especializado em anima√ß√£o para completar a imagem. <br><br>  Ent√£o, para resumir.  Como sempre e em outros lugares, n√£o h√° soldado universal aqui.  Voc√™ precisa escolher sua solu√ß√£o, dependendo do seu projeto, tarefas e pessoas.  Afinal, quem disse que voc√™ s√≥ precisa usar um tipo de anima√ß√£o por vez?  Existem muitos projetos em que podemos ver todos os tipos de anima√ß√£o usados ‚Äã‚Äãe todos est√£o felizes.  Anima√ß√£o em v√≠deo para cenas, esqueleto para personagens, linha do tempo para cen√°rio, procedimento para v√¥o de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sistemas de part√≠culas</a> de emissores e quadro √∫nico para as pr√≥prias part√≠culas.  Simplesmente tiramos o melhor de cada tipo. </p><br><h2>  Dilema e decis√£o de escrever nossa pr√≥pria solu√ß√£o </h2><br><p>  De qualquer forma, por algumas raz√µes objetivas, decidimos que para o nosso projeto precisamos de anima√ß√£o em Flash.  Ent√£o surgiu a pergunta sobre a integra√ß√£o deles no mecanismo.  Depois de experimentar v√°rias op√ß√µes de plug-in, optamos pelo que consideramos melhor por suas capacidades.  Embora fosse vivo e bem suportado, tamb√©m possu√≠a uma licen√ßa empresarial completamente inacess√≠vel, mas quem realmente pode fixar o pre√ßo de um bom produto?  Agora, intencionalmente, n√£o vou lhe dar nomes, para n√£o parecer propaganda ou antipublicidade. <br><br>  Passamos quase um ano de desenvolvimento com este plug-in, per√≠odo em que ficou claro por que n√£o podemos continuar a us√°-lo.  Em particular, foi a qualidade de sua integra√ß√£o ao Unity.  Isso resultou em bugs bastante s√©rios que n√£o facilmente, n√£o rapidamente e sem luta foram derrotados pelos desenvolvedores.  O desempenho nos dispositivos de destino tamb√©m foi terr√≠vel, e para n√≥s ainda significa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o</a> n√≠vel do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">iPad 2</a> .  Isso aconteceu porque tentamos fazer uma integra√ß√£o com um mecanismo espec√≠fico, ignorando suas especificidades e buracos.  Est√°vamos mais do que satisfeitos com a funcionalidade, mas os desenvolvedores se recusaram a abrir o c√≥digo-fonte para n√≥s, mesmo individualmente.  Ent√£o, foi assim que decidimos escrever nossa pr√≥pria solu√ß√£o. <br><br>  Tive <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma</a> experi√™ncia bastante bem-sucedida ao escrever extens√µes para o Unity e um pouco de experi√™ncia na convers√£o de cenas de anima√ß√£o em Flash para meus pr√≥prios formatos.  J√° faz algum tempo desde o √∫ltimo, para ser justo, mas algo que ainda me lembrava.  Ao mesmo tempo, tomei a decis√£o de escrever tudo isso como um projeto de estima√ß√£o, para n√£o depender do projeto principal ou da empresa em que trabalho.  E, convenhamos, √© bom ter essa produ√ß√£o por conta pr√≥pria.  De qualquer forma, armado com uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">especifica√ß√£o de formato SWF de</a> 250 p√°ginas, eu entrei na batalha. </p><br><h2>  Op√ß√µes de exporta√ß√£o </h2><br><p>  Para come√ßar, vamos discutir as op√ß√µes que temos para exportar anima√ß√£o do editor Flash.  Existem alguns deles, cada um com suas pr√≥prias vantagens e desvantagens.  N√≥s vamos revisar os principais. </p><br><h3>  Formato .XFL </h3><br><p>  No editor de anima√ß√£o Flash, voc√™ pode salvar o arquivo de origem em um formato .XFL n√£o compactado, em vez do .FLA fechado definido por padr√£o.  Agora, √© f√°cil trabalhar com esse formato, mas n√£o possui documenta√ß√£o.  Basicamente, ele consiste em alguns subdiret√≥rios e um monte de arquivos .XML que descrevem todos os estados dos clipes armazenados.  O formato da descri√ß√£o tamb√©m √© muito simples e compreens√≠vel, como voc√™ pode ver no exemplo abaixo: </p><br><p>  <strong>static_clip.xml</strong> </p><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5c719f28-00000051"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lastModified</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1550950184"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Layer_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#00FFFF"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isSelected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9728"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMBitmapInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">selected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bitmap.png"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>Link de origem</i></a> <br><blockquote><p>  O que obtivemos aqui √© este clipe, <code>static_clip</code> com uma camada, <code>Layer_1</code> e um quadro que armazena uma imagem raster chamada <code>bitmap.png</code> . </p></blockquote><br><p>  <strong>movie_clip.xml</strong> </p><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">itemID</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5c719f30-00000053"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lastModified</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1550950713"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"movie_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Layer_1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#00FFFF"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isSelected</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">duration</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tweenType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"motion"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">motionTweenSnap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"22017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Matrix</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-50"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ty</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"-50"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Point</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"28.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"27.5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"4"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tweenType</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"motion"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">motionTweenSnap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">keyMode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"22017"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">libraryItemName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"static_clip"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">centerPoint3DX</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"128.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">centerPoint3DY</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"127.5"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Matrix</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ty</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">matrix</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Point</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"28.5"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">y</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"27.5"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">transformationPoint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolInstance</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">elements</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMFrame</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">frames</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMLayer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">layers</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMTimeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">timeline</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">DOMSymbolItem</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><i>Link de origem</i></a> <blockquote><p>  Aqui voc√™ pode ver a descri√ß√£o do clipe <code>movie_clip</code> , que consiste em dois quadros-chave com os √≠ndices 0 e 4, respectivamente.  Nesses quadros, nosso clipe <code>static_clip</code> √© armazenado pelas coordenadas <code>(-50;-50)</code> e <code>(100;100)</code> .  Aqui h√° interpola√ß√£o de movimento entre os quadros (uma anima√ß√£o processual, no nosso caso, √© apenas uma mudan√ßa, sem redimensionamento e rota√ß√£o).  Assim, a posi√ß√£o do clipe est√°tico entre os quadros principais pode ser calculada usando a interpola√ß√£o linear das coordenadas que extra√≠mos desses quadros. </p></blockquote><p>  √â claro que, no caso de uma anima√ß√£o real, tudo ser√° um pouco mais complicado e volumoso, mas ainda assim tudo pode ser entendido, mesmo sem documenta√ß√£o.  E pode parecer para voc√™ que √© isso.  E, na verdade, estou ciente de v√°rios projetos e empresas que foram desta maneira e tiveram bastante sucesso, mas n√£o sem algumas limita√ß√µes e dificuldades.  E essas dificuldades s√£o a verdadeira colis√£o do .XFL, que s√£o: </p><br><ol><li>  As interpola√ß√µes podem ser muito diferentes, tanto simples - com interpola√ß√£o linear quanto mais complexas - com fun√ß√µes e gr√°ficos personalizados dessa interpola√ß√£o;  os gr√°ficos vetoriais que se transformam em interpola√ß√µes s√£o executados apenas de acordo com suas pr√≥prias regras, compreens√≠veis para as pessoas da Macromedia e da Adobe; </li><li>  Os gr√°ficos vetoriais, assim como todas as anima√ß√µes, exceto os gr√°ficos de varredura, s√£o descritos em um arquivo de texto., <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Por exemplo</a> .  Isso significa que voc√™ precisa escrever seu pr√≥prio rasterizador, o que, devido √† natureza e complexidade do formato vetorial no Flash, n√£o pode ser feito; </li><li>  As regras para reprodu√ß√£o de anima√ß√£o, incluindo as aninhadas, precisam ser criadas do zero.  N√£o existe documenta√ß√£o para isso, e respostas para perguntas como quando e qual quadro deve ser mostrado, quando interpolar e quando deix√°-lo sem interpola√ß√£o, voc√™ precisar√° descobrir por conta pr√≥pria, ao mesmo tempo em que tenta abranja todos os casos poss√≠veis durante as execu√ß√µes de teste, o que, acredite, √© um exerc√≠cio n√£o trivial para uma solu√ß√£o geral, n√£o privada. </li></ol><br><p>  Essas n√£o s√£o todas as desvantagens dessa abordagem, mas acho que s√£o suficientes para voc√™ entender que isso funcionaria para uma solu√ß√£o geral apenas com fortes limita√ß√µes.  H√° muito tempo, segui esse caminho trabalhando em um dos meus projetos.  Havia cenas do Flash com interpola√ß√µes cl√°ssicas (sem regras de interpola√ß√£o personalizadas e fun√ß√µes especiais de interpola√ß√£o), gr√°ficos de varredura apenas e outras oportunidades avan√ßadas fornecidas pelo editor do Flash.  Eu vim com essa solu√ß√£o propriet√°ria com bastante rapidez e efici√™ncia, mas ainda exigia algumas limita√ß√µes severas aos animadores, para que eles n√£o usassem nada que voc√™ possa chamar de complicado.  A abordagem tem o direito de existir e existem algumas bibliotecas baseadas nela, com graus variados de shabbiness, mas, como eu disse, funciona com muitas limita√ß√µes. </p><br><h3>  Scripts .JSFL </h3><br><p>  Outra op√ß√£o quase funcional para obter informa√ß√µes sobre nossas anima√ß√µes, os scripts .JSFL permitem que voc√™ estenda seu editor Flash, interaja com seu ambiente, edite sua anima√ß√£o e, √© claro, obtenha todas as informa√ß√µes necess√°rias sobre as linhas de tempo, camadas, clipes e quadros dentro .  Tamb√©m √© usado pelos animadores para automatizar v√°rios processos, mas essa √© realmente uma hist√≥ria completamente diferente.  Como um todo, a abordagem possui todas as desvantagens da anterior, ent√£o n√£o vou me aprofundar nisso.  Deixe-me apenas dizer que ele permite exportar suas cenas de anima√ß√£o, por exemplo, quadro a quadro, mas sabemos que n√£o √© isso que um Jedi real faria (mas, √© claro, isso pode ser feito em alguns projetos).  Voltaremos a esses scripts mais tarde, quando discutirmos a abordagem que escolhi: para rasteriza√ß√£o de gr√°ficos vetoriais e otimiza√ß√£o das cenas exportadas. </p><br><h3>  Aplicativo AIR </h3><br><p>  Essa abordagem est√° realmente funcionando e pode ser usada como deveria.  Ainda assim, n√£o escolhi, mas vou falar sobre essa op√ß√£o, s√≥ para constar.  A ess√™ncia dessa abordagem √© que criamos um aplicativo AIR no pr√≥prio Flash ou, para puristas, por exemplo, no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Haxe</a> .  Este aplicativo extrai todas as informa√ß√µes das cenas de anima√ß√£o que voc√™ j√° compilou no formato SWF.  Na aplica√ß√£o, reproduzimos a cena quadro a quadro, obtemos todas as informa√ß√µes sobre os quadros e as salvamos no formato mais adequado ao nosso tempo de execu√ß√£o.  Usando esse m√©todo, abordamos todos os problemas mencionados acima: </p><br><ul><li>  n√£o precisamos rasterizar nossos gr√°ficos vetoriais, pois isso ser√° feito pelo tempo de execu√ß√£o do Flash.  A √∫nica coisa que resta a fazer √© obter essas informa√ß√µes e salvar a sa√≠da raster de nossas partes vetoriais; </li><li>  n√£o precisamos inventar regras de reprodu√ß√£o e lidar com interpola√ß√£o de interpola√ß√£o personalizada, o Flash player integrado ao aplicativo AIR sabe exatamente como isso deve ser feito e basicamente faz o trabalho para n√≥s; </li></ul><br><p>  Como b√¥nus, temos a oportunidade de usar scripts de quadro (todo o <code>play()</code> , <code>stop()</code> e outros <code>gotoAndPlay()</code> , alguns animadores realmente gostam deles).  Como desvantagem, perdemos a oportunidade de exportar as cenas em loop no pr√≥prio Flash.  Mas n√£o √© t√£o ruim assim, pois podemos repeti-los em nosso tempo de execu√ß√£o, e os animadores podem preparar tudo para isso. </p><br><p>  Note-se agora que tenho certeza de que tudo ser√° mais ou menos dif√≠cil do que eu o descrevo, j√° que eu pessoalmente n√£o fui l√°, ent√£o n√£o posso realmente contar todos os detalhes.  Congratulo-me com aqueles que seguiram este caminho para compartilhar sua experi√™ncia. Ficarei feliz em ler sobre seus sucessos e fracassos! </p><br><h3>  Seu pr√≥prio flash player </h3><br><p>  Esta √© provavelmente a op√ß√£o mais justa, √≥bvia e direta entre todas, mas tamb√©m √© a mais dif√≠cil.  Afinal, √© isso que um Flash player real faz, aquele que a maioria de n√≥s instalou no navegador favorito como complemento.  Agora, os representantes populares desse g√™nero s√£o: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gameswf</a> e, nascidos do primeiro, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">scaleform</a> .  Ambos est√£o mortos hoje.  O que √© fascinante sobre eles √© que eles foram usados ‚Äã‚Äãprincipalmente para implementa√ß√µes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GUI</a> em v√°rios projetos, incluindo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">AAA</a> .  Mas nosso interesse √© nas partes internas, n√£o nas aplica√ß√µes de bibliotecas mortas. </p><br><p>  Qualquer Flash player decente possui pelo menos duas coisas importantes ocultas: </p><br><ul><li>  Analisador de formato SWF; </li><li>  rasterizador de gr√°ficos vetoriais; </li><li>  m√°quina virtual para iniciar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ActionScript</a> do c√≥digo; </li><li>  biblioteca padr√£o para um c√≥digo personalizado; </li></ul><br><p>  Eu sei que voc√™ pensa.  Cada um desses pontos acima grita que, mesmo que algo como isso seja poss√≠vel de implementar, voc√™ precisar√° mudar mais de uma equipe para esta tarefa e passar alguns anos no desenvolvimento da vers√£o b√°sica.  Mesmo a implementa√ß√£o de uma pequena parte apenas para reproduzir alguma coisa levar√° um longo tempo e voc√™ pode ter certeza de que as adi√ß√µes adicionais na forma de muitas partes n√£o documentadas desse pipeline dobrar√£o esse longo per√≠odo. </p><br><p>  Sim, a Internet est√° cheia de tentativas de implementar cada uma dessas partes, variando em graus de shabiness e buggedness.  Mas voc√™ n√£o pode nem considerar esses desenvolvimentos como base para suas pr√≥prias coisas, pois voc√™ precisaria passar anos apenas para ca√ßar bugs.  Al√©m disso, voc√™ teria que adicionar todos os testes de unidade n√£o escritos antes de perceber que nunca ser√° capaz de implementar totalmente todas as pequenas coisas.  Aqueles caras que tentaram adicionar os recursos necess√°rios ao gameswf entender√£o do que estou falando.  Um Flash player justo tamb√©m deve rasterizar os gr√°ficos vetoriais sem anteced√™ncia, mas no tempo de execu√ß√£o, o que causar√° um impacto t√£o grande no desempenho que nem todo projeto pode passar.  A prop√≥sito, quero dizer ol√° aos sobreviventes que tentaram usar o scaleform em dispositivos m√≥veis.  De qualquer forma, esta √© a maneira mais solene e sem esperan√ßa, e definitivamente n√£o √© a nossa escolha. </p><br><h3>  Combinando as abordagens </h3><br><p>  Ent√£o, finalmente vamos √† minha op√ß√£o.  Tendo estudado todas as formas poss√≠veis, criei essa combina√ß√£o interessante.  √â relativamente f√°cil de implementar, gerenci√°vel por uma pessoa e, ao mesmo tempo, possui funcionalidade suficiente para atender a todas as necessidades de praticamente qualquer produ√ß√£o de anima√ß√£o em linha do tempo 2D. </p><br><p>  Primeiro, vamos usar a cena de anima√ß√£o compilada no SWF, para n√£o inventar v√°rias op√ß√µes de reprodu√ß√£o e quase nunca adivinhar como o Flash player funciona por dentro, pois n√£o podemos cobrir todos os casos, mas ainda estamos procurando a solu√ß√£o geral.  Al√©m disso, o editor Flash se livra de todas as interpola√ß√µes que usamos em nossa anima√ß√£o, fornecendo apenas as posi√ß√µes vazias das pe√ßas no SWF compilado. </p><br><p>  Segundo, proibimos o uso de scripts em anima√ß√£o.  Sim, esse requisito √© certamente muito dif√≠cil e triste, mas n√£o tenho uma equipe inteira de programadores para implementar uma m√°quina virtual decente e uma biblioteca padr√£o que eles teriam que escrever quase de olhos vendados.  Aqui, √© claro, voc√™ pode ver uma desvantagem da minha abordagem em compara√ß√£o com o m√©todo de aplicativo do AIR.  No segundo, poder√≠amos usar alguns scripts para reprodu√ß√£o interna de anima√ß√£o.  Ao mesmo tempo, isso n√£o nos impede de criar boas cenas de anima√ß√£o.  Para transferir informa√ß√µes personalizadas da cena para o jogo, voc√™ pode usar os chamados <code>frame labels</code> , que voc√™ encontrar√° no c√≥digo.  Al√©m disso, voc√™ pode fixar eventos do usu√°rio nos quadros espec√≠ficos usando as fun√ß√µes de retorno de chamada do tempo de execu√ß√£o. </p><br><p>  Em seguida, nos livramos de escrever nosso pr√≥prio rasterizador de gr√°ficos vetoriais, pois n√£o podemos escrev√™-lo para o caso geral e para cobrir todas as op√ß√µes e possibilidades de vetor no Flash.  Em vez disso, rasterizaremos nossos gr√°ficos antes da compila√ß√£o (!) Usando um script JSFL.  Enquanto isso, usando esse mesmo script, otimizaremos nossos gr√°ficos vetoriais mesclando clipes est√°ticos em uma imagem e ampliar ou reduzir as imagens rasterizadas resultantes em prol de nossa pr√≥pria prioridade: qualidade e / ou desempenho.  Tamb√©m aqui vale a pena considerar as op√ß√µes de qualidade / resolu√ß√£o da arte para dispositivos com v√°rias densidades de pixel da tela (por exemplo, arte em HD e SD). </p><br><h2>  Conclus√£o da parte l√≠rica </h2><br><p>  Isso conclui a primeira parte do meu artigo.  No segundo, discutiremos detalhes t√©cnicos da implementa√ß√£o, fragmentos de c√≥digo, figuras (!), Otimiza√ß√£o, truques e ajustes.  Em breve, n√£o perca! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt445102/">https://habr.com/ru/post/pt445102/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt445090/index.html">O YouTube permanecer√° como o conhecemos?</a></li>
<li><a href="../pt445092/index.html">HATEOAS Deep Link Problem</a></li>
<li><a href="../pt445094/index.html">Acesso centralizado a assinaturas digitais e outras chaves de prote√ß√£o eletr√¥nica usando hardware USB sobre IP</a></li>
<li><a href="../pt445098/index.html">DynamicData: alterando cole√ß√µes, padr√£o de design MVVM e extens√µes reativas</a></li>
<li><a href="../pt445100/index.html">Anycubic: Photon S, 4Max Pro e grande renomea√ß√£o</a></li>
<li><a href="../pt445104/index.html">Uma breve hist√≥ria da marca de √°udio Klipsch</a></li>
<li><a href="../pt445106/index.html">Mesa-redonda: Tecnologia aditiva como alternativa √† fabrica√ß√£o tradicional</a></li>
<li><a href="../pt445108/index.html">Nem um Falcon - projetos ESA e ULA reutiliz√°veis ‚Äã‚Äãfundamentalmente diferentes</a></li>
<li><a href="../pt445110/index.html">Um computador com uma unidade terminal do tipo Fallout</a></li>
<li><a href="../pt445112/index.html">Desvendando um emaranhado de vulnerabilidades em sites</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>