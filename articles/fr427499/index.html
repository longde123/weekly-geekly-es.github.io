<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏮 👲🏼 😌 De quoi parlent-ils dans le support technique du streamer vidéo? 👋🏾 🎅🏻 🕡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour à tous. Des dizaines d'appels différents sont ouverts quotidiennement dans notre support, de simples questions «aider à mettre en place un clu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>De quoi parlent-ils dans le support technique du streamer vidéo?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/erlyvideo/blog/427499/">  Bonjour à tous.  Des dizaines d'appels différents sont ouverts quotidiennement dans notre support, de simples questions «aider à mettre en place un cluster» à très complexes «le flux ne fonctionne pas, le flux parfois bégaie», mais il y a des questions dont l'œil se contracte déjà et chaque employé de l'entreprise peut répondre en détail. <br><br>  Et comme les questions ne s'arrêtent pas, vous pouvez donc répondre ici. <br><a name="habracut"></a><br><h2>  Pourquoi la vidéo est-elle retardée? </h2><br>  Nous avons deux articles sur le blog ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deux</a> ) sur ce sujet, lisez-les si vous travaillez avec la vidéo, et ici je vais donner une réponse courte et complète: <br><br>  Le streaming Internet moderne est un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">protocole HLS</a> .  Parfois DASH, mais ce n'est pas important, car ils sont tous deux segmentés. <br><br>  Comment ça marche?  La vidéo en streaming est "coupée" en petits fichiers (généralement de 2 à 8 secondes, selon la dynamique du contenu), 3 à 10 de ces segments sont accumulés et décrits par une liste de lecture spéciale, qui est automatiquement mise à jour lorsque l'ancien segment est supprimé et qu'un nouveau est ajouté.  Si simple.  Plus de segments - délai plus long, durée plus longue de chaque segment - délai plus long.  10-20 secondes est normal. <br><br>  Pourquoi est-ce nécessaire?  Pourquoi stocker autant de vidéos dans la mémoire du serveur vidéo?  La segmentation permet au joueur de ne pas réagir à l'instabilité de la connexion Internet, de ne pas interrompre la vidéo lors du passage d'un réseau Wi-Fi à une connexion mobile.  Si la vidéo n'avait pas été préparée à l'avance et emballée dans des fichiers séparés, alors au moindre problème ou manque de bande passante, nous aurions des artefacts vidéo à l'écran, et la segmentation donne au lecteur environ 4 à 20 secondes pour rétablir la connexion du lecteur et charger de nouvelles données. <br><br>  Que faire si vous avez besoin d'une vidéo sans délai?  Choisissez un protocole différent si vous avez l'intention d'organiser un chat Web, de contrôler l'hélicoptère via Internet, de regarder des caméras vidéo IP.  Voici des exemples: WebRTC, MSE-LD, RTMP. <br><br><h2>  Comment protéger la vidéo?  Coller uniquement sur votre site </h2><br>  La tâche est très simple - la vidéo sur le site doit être protégée contre toute insertion dans d'autres sites, personne ne veut payer pour le trafic de quelqu'un d'autre, le trafic vidéo coûte cher.  Et la vidéo peut être privée et ne doit pas dépasser votre compte personnel. <br><br>  J'ai toujours une réponse à toutes ces demandes - vous <b>devez configurer Securelink</b> sur votre site.  La protection du contenu n'est pas possible unilatéralement - le site lui-même doit générer des liens, vous ne pouvez pas simplement prendre et insérer un lien statique vers le site. <br><br>  Securelink est une technologie de protection des liens ancienne et très efficace.  De nombreux habruchitel connaissent un module spécial pour Nginx - ngx_http_secure_link_module.  Nous n'utilisons pas Nginx, mais il existe une implémentation similaire et non moins efficace, la seule différence est dans l'ordre des paramètres. <br><br>  Comment ça marche?  Le site génère un lien <b>unique unique</b> basé sur les données des utilisateurs.  Et que sait le serveur Web sur le client?  C'est vrai, c'est l'adresse IP, l'agent utilisateur, le cookie, l'URL demandée.  Si le client est autorisé, dans les variables de session, vous pouvez obtenir d'autres informations, par exemple, un ID client unique dans la base de données de service ou, par exemple, la période de validité de l'abonnement. <br><br>  Nous collectons les paramètres sur une seule ligne et hachons avec votre algorithme préféré, par exemple, SHA1.  Il s'avère un ensemble de personnages inutiles.  Par exemple, le hachage de la chaîne «127.0.0.1Habr» serait: 70ebe94671dd21bd65f4a00dfd988adc83fe6bda. <br><br>  Cette ligne sera transmise au streamer vidéo et sa tâche sera de vérifier la validité du lien, qu'il a été généré par votre site, n'est pas «pourri» et n'est pas transmis à des tiers.  Il n'y a aucun retour du site, donc le streamer vidéo doit générer un hachage en utilisant les mêmes données que le site Web utilisé.  Le streamer vidéo connaît également l'adresse IP du client, le contenu demandé, mais ne peut en aucun cas connaître l'ID utilisateur ou la durée de vie du lien.  Vous devrez transférer ces données directement sur le lien et utiliser la clé secrète afin que personne ne puisse générer de liens pour lui-même. <br><br>  Nous prenons la ligne "127.0.0.1Habr1540327100SECRET" et obtenons SHA1 99fe961672c52aa3033b98b545ec2cdec93bf515, et maintenant nous formons un lien du formulaire: <br><br>  <a href="">example.com/Habr/index.m3u8?token=99fe961672c52aa3033b98b545ec2cdec93bf515-1540327100</a> <br><br>  example.com est votre serveur vidéo, Habr est la vidéo demandée, index.m3u8 est le nom standard de la liste de lecture HLS, le jeton de valeur est la chaîne du serveur Web que nous avons générée. <br><br>  Le streamer vidéo extrait facilement de ces données tout ce qui est nécessaire pour obtenir le même hachage: l'adresse IP est lue à partir de la variable du serveur web, le contenu demandé de l'URL, la durée de vie provient du paramètre token, la seule chose qui lui manque est la clé secrète, elle devra inscrivez-vous dans le fichier de configuration et gardez le secret. <br><br>  Vous ne pourrez pas envoyer un tel lien à un ami ou l'ouvrir dans un autre navigateur - il y a une adresse IP dans la formule de hachage, et vous ne réussirez pas à remplacer la durée de vie - alors le hachage ne correspondra pas. <br><br><h2>  Pièges </h2><br>  Je voulais vraiment décrire en deux paragraphes, mais en bref, cela n'a pas fonctionné.  C'est le premier problème - tout le monde n'est pas prêt à se plonger dans de tels détails, car il est beaucoup plus facile d'insérer un lien statique.  Nous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avons des exemples prêts à l'emploi sur</a> notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site</a> , donc il ne devrait pas y avoir de problème. <br><br>  Il arrive souvent que le site et le serveur Web déterminent incorrectement l'adresse IP du client, ce qui est normal si des réseaux CDN sont utilisés, par exemple CloudFlare.  Dans ce cas, vous devez prendre l'adresse IP de l'en-tête correct, vous pouvez avoir besoin de l'aide du fournisseur CDN.  Par exemple, CloudFlare a CF-Connecting-IP. <br><br>  Mauvais moment.  Une heure incorrecte sur l'un des serveurs, combinée à des tentatives de minimiser la durée de vie du lien, conduit souvent à des liens rompus.  Il arrive également que l'utilisateur laisse l'onglet ouvert pendant plusieurs heures, puis ne puisse pas lire la vidéo en raison de la courte durée de vie. <br><br>  Durée de vie des liens de 3 à 24 heures - c'est normal, ils sont protégés de toute façon et il existe des moyens de limiter le nombre de vues simultanées. <br><br><h2>  Au lieu d'un total </h2><br>  Dites-nous dans les commentaires comment contourner ce mécanisme de protection des liens? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr427499/">https://habr.com/ru/post/fr427499/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr427487/index.html">Test de configuration pour les développeurs Java: expérience pratique</a></li>
<li><a href="../fr427489/index.html">HomeData: comment l'analyse des données est utilisée en architecture et en urbanisme</a></li>
<li><a href="../fr427491/index.html">vDud en anglais: 7 enquêteurs occidentaux, dont chacun prend un exemple</a></li>
<li><a href="../fr427493/index.html">Amplificateurs de classes basse fréquence: A, B, AB, D, G, H</a></li>
<li><a href="../fr427495/index.html">Combien d'instructions Habr + comment savoir combien d'autres entreprises gagnent</a></li>
<li><a href="../fr427501/index.html">Seymour Papert: Hard Fun</a></li>
<li><a href="../fr427505/index.html">Présomption d'esprit</a></li>
<li><a href="../fr427507/index.html">Seymour Papert: la délicieuse découverte de "rien"</a></li>
<li><a href="../fr427509/index.html">Serveurs Web: expérience et pratique de Southbridge</a></li>
<li><a href="../fr427513/index.html">Comment analyser le vidage des threads</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>